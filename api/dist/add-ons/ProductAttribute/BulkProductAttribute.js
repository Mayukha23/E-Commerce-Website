'use strict';function a61_0x437e(){const _0x4f9343=['where','LOWER(attribute.attributeName)\x20=\x20','text','LOWER(attributeGroup.attributeGroupName)\x20=\x20','1296208PxAayb','attribute.groupId\x20=\x20','ProductAttribute','Attribute','toLowerCase','__esModule','andWhere','attributeProcess','createQueryBuilder','attributeGroup','20UHHyQh','join','724914RMAoyt','33105pGsVVF','AttributeGroup','8eysWqP','../../src/api/core/models/ProductModel','1399SGanyX','groupId','getRepository','./models/ProductAttribute','attributeGroupName','findOne','attributeId','sortOrder','524271CPBNIT','tslib','696012DAuKYY','1550571UpGPlg','68FEvQMP','push','getConnection','__awaiter','attributeValue','defineProperty','./models/Attribute','getOne','productId','attribute','save','7vQlXKb','attributeKeyword','attributeName'];a61_0x437e=function(){return _0x4f9343;};return a61_0x437e();}const a61_0x11de11=a61_0x34a5;(function(_0x387ede,_0x6f047f){const _0x302f5e=a61_0x34a5,_0x5dc35f=_0x387ede();while(!![]){try{const _0xcf762b=-parseInt(_0x302f5e(0x87))/0x1*(-parseInt(_0x302f5e(0x85))/0x2)+parseInt(_0x302f5e(0x8f))/0x3+-parseInt(_0x302f5e(0x93))/0x4*(-parseInt(_0x302f5e(0x83))/0x5)+-parseInt(_0x302f5e(0x91))/0x6+parseInt(_0x302f5e(0x9e))/0x7*(parseInt(_0x302f5e(0xa5))/0x8)+parseInt(_0x302f5e(0x82))/0x9+parseInt(_0x302f5e(0x80))/0xa*(-parseInt(_0x302f5e(0x92))/0xb);if(_0xcf762b===_0x6f047f)break;else _0x5dc35f['push'](_0x5dc35f['shift']());}catch(_0x4b4083){_0x5dc35f['push'](_0x5dc35f['shift']());}}}(a61_0x437e,0x21956));function a61_0x34a5(_0x484da8,_0x5fe158){const _0x437edb=a61_0x437e();return a61_0x34a5=function(_0x34a5cd,_0x5eb012){_0x34a5cd=_0x34a5cd-0x7d;let _0x58fe6d=_0x437edb[_0x34a5cd];return _0x58fe6d;},a61_0x34a5(_0x484da8,_0x5fe158);}Object[a61_0x11de11(0x98)](exports,a61_0x11de11(0xaa),{'value':!![]}),exports[a61_0x11de11(0x7d)]=void 0x0;const tslib_1=require(a61_0x11de11(0x90)),typeorm_1=require('typeorm'),AttributeGroup_1=require('./models/AttributeGroup'),Attribute_1=require(a61_0x11de11(0x99)),ProductAttribute_1=require(a61_0x11de11(0x8a)),ProductModel_1=require(a61_0x11de11(0x86));function attributeProcess(_0x15bf70,_0x4e0e1d){const _0x43d79b=a61_0x11de11;return tslib_1[_0x43d79b(0x96)](this,void 0x0,void 0x0,function*(){const _0x32bfe9=_0x43d79b,_0x29f72e=(0x0,typeorm_1[_0x32bfe9(0x95)])()[_0x32bfe9(0x89)](AttributeGroup_1[_0x32bfe9(0x84)]),_0x4b2d2e=(0x0,typeorm_1['getConnection'])()[_0x32bfe9(0x89)](Attribute_1[_0x32bfe9(0xa8)]),_0x250d92=(0x0,typeorm_1['getConnection'])()['getRepository'](ProductAttribute_1['ProductAttribute']),_0x4e1060=(0x0,typeorm_1['getConnection'])()[_0x32bfe9(0x89)](ProductModel_1['Product']),_0x1b4f32=_0x15bf70,_0x893280=[],_0x5cc781=[];for(const _0x265580 of _0x1b4f32){function _0x29fd9f(_0x30ab88){const _0x4110db=_0x32bfe9;return tslib_1[_0x4110db(0x96)](this,void 0x0,void 0x0,function*(){const _0x49976d=_0x4110db,_0x4d11c0=_0x30ab88[_0x49976d(0xa9)](),_0x3388a0=yield(0x0,typeorm_1[_0x49976d(0x95)])()[_0x49976d(0x89)](AttributeGroup_1[_0x49976d(0x84)])['createQueryBuilder'](_0x49976d(0x7f));return _0x3388a0[_0x49976d(0xa1)](_0x49976d(0xa4)+'\x27'+_0x4d11c0+'\x27'),_0x3388a0['getOne']();});}function _0x1d6fdd(_0x2a94cd,_0x149c4f){const _0x4423b5=_0x32bfe9;return tslib_1[_0x4423b5(0x96)](this,void 0x0,void 0x0,function*(){const _0x2c32a3=_0x4423b5,_0x33360c=_0x2a94cd['toLowerCase'](),_0x3c991a=yield(0x0,typeorm_1['getConnection'])()[_0x2c32a3(0x89)](Attribute_1[_0x2c32a3(0xa8)])[_0x2c32a3(0x7e)](_0x2c32a3(0x9c));return _0x3c991a[_0x2c32a3(0xa1)](_0x2c32a3(0xa2)+'\x27'+_0x33360c+'\x27'),_0x3c991a[_0x2c32a3(0xab)](_0x2c32a3(0xa6)+_0x149c4f),_0x3c991a[_0x2c32a3(0x9a)]();});}const _0x2c2ea0=yield _0x29fd9f(_0x265580[_0x32bfe9(0x7f)]);if(!_0x2c2ea0){const _0xe5e0c=new AttributeGroup_1[(_0x32bfe9(0x84))]();_0xe5e0c[_0x32bfe9(0x8b)]=_0x265580[_0x32bfe9(0x7f)],_0xe5e0c['sortOrder']=0x1;const _0x731496=yield _0x29f72e[_0x32bfe9(0x9d)](_0xe5e0c),_0x1150f1=yield _0x1d6fdd(_0x265580['attributeName'],_0x731496['groupId']);if(!_0x1150f1){const _0x3bd9ff=new Attribute_1[(_0x32bfe9(0xa8))]();_0x3bd9ff[_0x32bfe9(0xa0)]=_0x265580[_0x32bfe9(0xa0)],_0x3bd9ff[_0x32bfe9(0x8e)]=0x1,_0x3bd9ff[_0x32bfe9(0x88)]=_0x731496[_0x32bfe9(0x88)];const _0x22f2d3=yield _0x4b2d2e[_0x32bfe9(0x9d)](_0x3bd9ff),_0x2b4a7a=new ProductAttribute_1[(_0x32bfe9(0xa7))]();_0x2b4a7a['productId']=_0x4e0e1d,_0x2b4a7a[_0x32bfe9(0x8d)]=_0x22f2d3[_0x32bfe9(0x8d)],_0x2b4a7a[_0x32bfe9(0xa3)]=_0x265580['attributeValue'];const _0x3c36b8='~'+_0x265580['attributeName']+'-'+_0x265580[_0x32bfe9(0x97)]+'~';_0x893280[_0x32bfe9(0x94)](_0x3c36b8),_0x5cc781['push'](_0x2b4a7a);}else{const _0xeed5c0=new ProductAttribute_1[(_0x32bfe9(0xa7))]();_0xeed5c0['productId']=_0x4e0e1d,_0xeed5c0[_0x32bfe9(0x8d)]=_0x1150f1['attributeId'],_0xeed5c0['text']=_0x265580[_0x32bfe9(0x97)];const _0x42ac5a='~'+_0x265580[_0x32bfe9(0xa0)]+'-'+_0x265580['attributeValue']+'~';_0x893280[_0x32bfe9(0x94)](_0x42ac5a),_0x5cc781[_0x32bfe9(0x94)](_0xeed5c0);}}else{const _0x255236=yield _0x1d6fdd(_0x265580['attributeName'],_0x2c2ea0['groupId']);if(!_0x255236){const _0x3a739b=new Attribute_1[(_0x32bfe9(0xa8))]();_0x3a739b[_0x32bfe9(0xa0)]=_0x265580[_0x32bfe9(0xa0)],_0x3a739b[_0x32bfe9(0x8e)]=0x1,_0x3a739b[_0x32bfe9(0x88)]=_0x2c2ea0[_0x32bfe9(0x88)];const _0x2b1845=yield _0x4b2d2e[_0x32bfe9(0x9d)](_0x3a739b),_0x25a716=new ProductAttribute_1[(_0x32bfe9(0xa7))]();_0x25a716[_0x32bfe9(0x9b)]=_0x4e0e1d,_0x25a716['attributeId']=_0x2b1845['attributeId'],_0x25a716[_0x32bfe9(0xa3)]=_0x265580[_0x32bfe9(0x97)];const _0x2c3c25='~'+_0x265580['attributeName']+'-'+_0x265580[_0x32bfe9(0x97)]+'~';_0x893280['push'](_0x2c3c25),_0x5cc781[_0x32bfe9(0x94)](_0x25a716);}else{const _0x4f5755=new ProductAttribute_1[(_0x32bfe9(0xa7))]();_0x4f5755[_0x32bfe9(0x9b)]=_0x4e0e1d,_0x4f5755[_0x32bfe9(0x8d)]=_0x255236[_0x32bfe9(0x8d)],_0x4f5755[_0x32bfe9(0xa3)]=_0x265580[_0x32bfe9(0x97)];const _0x1794a0='~'+_0x265580['attributeName']+'-'+_0x265580['attributeValue']+'~';_0x893280[_0x32bfe9(0x94)](_0x1794a0),_0x5cc781[_0x32bfe9(0x94)](_0x4f5755);}}}const _0x38a29b=yield _0x250d92[_0x32bfe9(0x9d)](_0x5cc781),_0x3370c4=yield _0x4e1060[_0x32bfe9(0x8c)]({'where':{'productId':_0x4e0e1d}});return _0x3370c4[_0x32bfe9(0x9f)]=_0x893280[_0x32bfe9(0x81)](),yield _0x4e1060[_0x32bfe9(0x9d)](_0x3370c4),_0x38a29b;});}exports['attributeProcess']=attributeProcess;