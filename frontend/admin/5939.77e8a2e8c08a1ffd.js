"use strict";(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[5939],{75939:(U,g,s)=>{s.r(g),s.d(g,{AddonModule:()=>w});var p=s(99291),i=s(93075),t=s(5e3),u=s(10518),h=s(73056),x=s(9900);let v=(()=>{class n extends x.V{constructor(){super(...arguments),this.params={},this.basUrl=this.getBaseUrl()}pluginList(e){return this.http.get(this.basUrl+"/plugins/list",{params:e})}pluginDetail(e){return this.http.get(this.basUrl+"/plugins/detail/"+e.id,{params:e})}updatePluginSetting(e,a){return this.http.post(this.basUrl+e,a)}updatePluginStatus(e,a){return this.http.put(this.basUrl+"/plugins/update/plugin-status/"+e,a)}}return n.\u0275fac=function(){let r;return function(a){return(r||(r=t.\u0275\u0275getInheritedFactory(n)))(a||n)}}(),n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var d=s(69808),m=s(84218);function C(n,r){if(1&n&&(t.\u0275\u0275elementStart(0,"label",18),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.label)}}const y=function(n){return{"is-invalid":n}};function S(n,r){if(1&n&&t.\u0275\u0275element(0,"input",19),2&n){const e=t.\u0275\u0275nextContext().$implicit,a=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("type",e.type)("formControlName",e.name)("value",e.value)("ngClass",t.\u0275\u0275pureFunction1(4,y,a.submitted&&a.f.countryName.errors))}}function b(n,r){if(1&n&&(t.\u0275\u0275elementStart(0,"div",20),t.\u0275\u0275element(1,"input",21)(2,"label",22),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("formControlName",e.name)("checked",e.value)}}const _=function(){return["text","number"]};function F(n,r){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",13)(2,"div",14),t.\u0275\u0275template(3,C,2,1,"label",15),t.\u0275\u0275template(4,S,1,6,"input",16),t.\u0275\u0275template(5,b,3,2,"div",17),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerEnd()),2&n){const e=r.$implicit;t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",""!==e.label),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pureFunction0(3,_).includes(e.type)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","checkbox"===e.type)}}function I(n,r){if(1&n&&(t.\u0275\u0275elementStart(0,"div",8),t.\u0275\u0275template(1,F,6,4,"ng-container",9),t.\u0275\u0275elementStart(2,"div",10)(3,"div",11)(4,"button",12),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd()()()()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",null==e.jsonFormData?null:e.jsonFormData.controls),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(6,2,"Settings.nav.Submit"))}}let A=(()=>{class n{constructor(e,a,o,c,l,f,$,R){this.modalService=e,this.fb=a,this.changeDetectRef=o,this.route=c,this.router=l,this.configService=f,this.paymentService=$,this.cd=R,this.myForm=this.fb.group({})}ngOnInit(){this.paymentService.pluginDetail({id:this.pluginId}).subscribe({next:e=>{this.pluginFormControl=e.data,this.createForm(this.pluginFormControl.controls)},error:e=>{}})}createForm(e){this.jsonFormData={controls:e};for(const a of e){const o=[];if(a.validators)for(const[c,l]of Object.entries(a.validators))switch(c){case"min":o.push(i.Validators.min(l));break;case"max":o.push(i.Validators.max(l));break;case"required":l&&o.push(i.Validators.required);break;case"requiredTrue":l&&o.push(i.Validators.requiredTrue);break;case"email":l&&o.push(i.Validators.email);break;case"minLength":o.push(i.Validators.minLength(l));break;case"maxLength":o.push(i.Validators.maxLength(l));break;case"pattern":o.push(i.Validators.pattern(l));break;case"nullValidator":l&&o.push(i.Validators.nullValidator)}this.myForm.addControl(a.name,this.fb.control(a.value,o))}}onSubmit(){this.myForm.valid?this.paymentService.updatePluginSetting(this.pluginFormControl.postRoute,this.myForm.value).subscribe({next:e=>{this.modalService.dismiss(!0)},error:e=>{}}):this.validateAllFormFields(this.myForm)}close(){this.modalService.close("close")}validateAllFormFields(e){Object.keys(e.controls).forEach(a=>{const o=e.get(a);o instanceof i.FormControl?o.markAsTouched({onlySelf:!0}):o instanceof i.FormGroup&&this.validateAllFormFields(o)})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(u.Kz),t.\u0275\u0275directiveInject(i.FormBuilder),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(p.gz),t.\u0275\u0275directiveInject(p.F0),t.\u0275\u0275directiveInject(h.E),t.\u0275\u0275directiveInject(v),t.\u0275\u0275directiveInject(t.ChangeDetectorRef))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-addon-config-add"]],decls:10,vars:5,consts:[[1,"flex","setting2-inner-header"],[1,"modal-header__title"],[1,"close-modal",3,"click"],["src","assets/img/modal-close.svg"],[1,"settings-right-wrapper","addnewuser"],[1,"new-user"],[3,"formGroup","ngSubmit"],["class","row",4,"ngIf"],[1,"row"],[4,"ngFor","ngForOf"],[1,"col-12"],[1,"modal-action-btns","flex"],["type","submit"],[1,"col-lg-12","col-xs-12"],[1,"form-group","flex"],["style","width: auto; margin-right: 15px;",4,"ngIf"],["class","form-control",3,"type","formControlName","value","ngClass",4,"ngIf"],["class","toggle",4,"ngIf"],[2,"width","auto","margin-right","15px"],[1,"form-control",3,"type","formControlName","value","ngClass"],[1,"toggle"],["id","cb1","type","checkbox",1,"tgl","tgl-light",3,"formControlName","checked"],["for","cb1",1,"tgl-btn"]],template:function(e,a){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"h3",1),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"button",2),t.\u0275\u0275listener("click",function(){return a.close()}),t.\u0275\u0275element(5,"img",3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",4)(7,"div",5)(8,"form",6),t.\u0275\u0275listener("ngSubmit",function(){return a.onSubmit()}),t.\u0275\u0275template(9,I,7,4,"div",7),t.\u0275\u0275elementEnd()()()),2&e&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,3,"Settings.nav.UpdateSettings")," "),t.\u0275\u0275advance(6),t.\u0275\u0275property("formGroup",a.myForm),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",(null==a.jsonFormData?null:a.jsonFormData.controls)&&(null==a.jsonFormData?null:a.jsonFormData.controls.length)>0))},directives:[i.\u0275NgNoValidate,i.NgControlStatusGroup,i.FormGroupDirective,d.NgIf,d.NgForOf,i.DefaultValueAccessor,i.NgControlStatus,i.FormControlName,d.NgClass,i.CheckboxControlValueAccessor],pipes:[m.X$],styles:[""]}),n})();var P=s(33052);function E(n,r){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"button",27),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const o=t.\u0275\u0275nextContext().$implicit;return t.\u0275\u0275nextContext(2).configurePlugin(o.id)}),t.\u0275\u0275element(2,"img",28),t.\u0275\u0275elementEnd()()}}function L(n,r){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"tr")(2,"td"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"titlecase"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"td"),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"td",22)(8,"div",23)(9,"input",24),t.\u0275\u0275listener("ngModelChange",function(o){return t.\u0275\u0275restoreView(e).$implicit.pluginStatus=o})("change",function(o){const l=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275nextContext(2).onFilterChange(o,l)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(10,"label",25),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(11,"td",26),t.\u0275\u0275template(12,E,3,0,"div",20),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerEnd()}if(2&n){const e=r.$implicit,a=r.index;t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,6,e.pluginName)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.pluginType),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("id",a),t.\u0275\u0275property("ngModel",e.pluginStatus),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("for",a),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",1==e.isEditable)}}function j(n,r){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,L,13,8,"ng-container",21),t.\u0275\u0275elementContainerEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.pluginList)}}let k=(()=>{class n{constructor(e,a,o,c){this.modal=e,this.router=a,this.paymentService=o,this.cd=c,this.pluginListLoading=!1,this.pluginListLoading=!0}ngOnInit(){this.paymentService.pluginList({}).subscribe({next:e=>{this.pluginListLoading=!1,this.pluginList=e.data,this.cd.markForCheck()},error:e=>{}})}configurePlugin(e){const a=this.modal.open(A,{windowClass:"add-local",keyboard:!1,backdrop:"static",centered:!1,animation:!1});a.componentInstance.pluginId=e,a.result.then(o=>{})}onFilterChange(e,a){!0===e.target.checked?this.paymentService.updatePluginStatus(a.id,{pluginStatus:"1"}).subscribe({next:l=>{this.cd.markForCheck()},error:l=>{}}):this.paymentService.updatePluginStatus(a.id,{pluginStatus:"0"}).subscribe({next:l=>{this.cd.markForCheck()},error:l=>{}})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(u.FF),t.\u0275\u0275directiveInject(p.F0),t.\u0275\u0275directiveInject(v),t.\u0275\u0275directiveInject(t.ChangeDetectorRef))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-settings-addon-list"]],decls:43,vars:23,consts:[[1,"setup-wrapper"],[1,"setup-container","localization-container"],[1,"loc-lay-title"],[1,"page-title"],[1,"text14"],[1,"card","ap-general","ap-info","set-loc-card"],[1,"localize-tab"],[1,"set-lay-notes","flex",2,"padding","0 10px 10px 10px"],[1,"setup-wrapper","set-loc-wrapper"],[1,"card","ap-general","ap-info"],[1,"flex","ap-body"],[1,"setup-right"],[1,"spinner-wrapper",2,"display","flex","justify-content","center","justify-items","center"],[2,"transform","translate(58%, 18%)","position","absolute",3,"isShow"],[1,"product-table"],[1,"table-responsive"],[1,"table"],["scope","col"],["scope","col",1,"text-center"],["scope","col",1,"text-right"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"toggle"],["type","checkbox",1,"tgl","tgl-light",3,"id","ngModel","ngModelChange","change"],[1,"tgl-btn",3,"for"],[1,"text-right","action-btn"],[3,"click"],["src","assets/img/edit.png","alt",""]],template:function(e,a){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"p",4),t.\u0275\u0275text(7),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"div",5),t.\u0275\u0275element(10,"div",6),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(11,"div",7)(12,"h4"),t.\u0275\u0275text(13),t.\u0275\u0275pipe(14,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"p"),t.\u0275\u0275text(16),t.\u0275\u0275pipe(17,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(18,"div",8)(19,"div",1)(20,"div",9)(21,"div",10)(22,"div",11)(23,"div",12),t.\u0275\u0275element(24,"app-global-loader",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(25,"div",14)(26,"div",15)(27,"table",16)(28,"thead")(29,"tr")(30,"th",17),t.\u0275\u0275text(31),t.\u0275\u0275pipe(32,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(33,"th",17),t.\u0275\u0275text(34),t.\u0275\u0275pipe(35,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(36,"th",18),t.\u0275\u0275text(37,"Status"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(38,"th",19),t.\u0275\u0275text(39),t.\u0275\u0275pipe(40,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(41,"tbody"),t.\u0275\u0275template(42,j,2,1,"ng-container",20),t.\u0275\u0275elementEnd()()()()()()()()()),2&e&&(t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(5,9,"Settings.nav.AddOns")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(8,11,"Settings.nav.AddonAdaptation")," "),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(14,13,"Settings.nav.Note:")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(17,15,"Settings.nav.AdminNote")),t.\u0275\u0275advance(8),t.\u0275\u0275property("isShow",a.pluginListLoading),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(32,17,"Settings.nav.Name")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(35,19,"Settings.nav.Module")),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(40,21,"Settings.nav.Action"),""),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",a.pluginList))},directives:[P.A,d.NgIf,d.NgForOf,i.CheckboxControlValueAccessor,i.NgControlStatus,i.NgModel],pipes:[m.X$,d.TitleCasePipe],styles:[".setup-wrapper[_ngcontent-%COMP%]{margin-top:-20px;padding:0 20px 20px}[_nghost-%COMP%]{width:calc(100% - 250px)}"]}),n})();var N=s(12476),V=s(40520),T=s(10128),M=s(8300),B=s(3675),D=s(16917);const O=[{path:"",component:k,canActivate:[M.a],data:{root:"settingsLocal"}}];let w=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({providers:[],imports:[[p.Bz.forChild(O),B.o,i.FormsModule,i.ReactiveFormsModule,D.q,N.K,d.CommonModule,u.IJ,m.aw.forChild({loader:{provide:m.Zw,useFactory:T.g,deps:[V.eN]}})],p.Bz]}),n})()}}]);