"use strict";(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[3085],{23085:(L,g,i)=>{i.r(g),i.d(g,{AccessPermissionModule:()=>k});var c=i(69808),p=i(99291),l=i(8300),t=i(5e3),u=i(89113),d=i(84218);const h=function(){return["/settings/access-and-permission/role/list"]},f=function(){return["/settings/access-and-permission/user/list"]},x=function(){return{exact:!0}};let C=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-access-layout"]],decls:18,vars:21,consts:[[1,"setup-wrapper"],[1,"setup-container","localization-container"],[1,"loc-lay-title"],[1,"page-title"],[1,"text14"],[1,"card","ap-general","ap-info","set-loc-card"],[1,"localize-tab"],["routerLinkActive","'active'","routerLinkActive","active","ariaCurrentWhenActive","edit-role-permission",1,"tablinks",3,"appHideIfUnauthorized","routerLink"],["routerLinkActive","'active'","routerLinkActive","active",1,"tablinks",3,"appHideIfUnauthorized","routerLink","routerLinkActiveOptions"]],template:function(e,o){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"p",4),t.\u0275\u0275text(7),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"div",5)(10,"div",6)(11,"button",7),t.\u0275\u0275text(12),t.\u0275\u0275pipe(13,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"button",8),t.\u0275\u0275text(15),t.\u0275\u0275pipe(16,"translate"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275element(17,"router-outlet")),2&e&&(t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(5,10,"Settings.nav.Accessandpermission")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(8,12,"Settings.nav.SettingOrder")),t.\u0275\u0275advance(4),t.\u0275\u0275property("appHideIfUnauthorized","settings-role")("appHideIfUnauthorized","edit-role-permission")("routerLink",t.\u0275\u0275pureFunction0(18,h)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(13,14,"common.Roles")),t.\u0275\u0275advance(2),t.\u0275\u0275property("appHideIfUnauthorized","settings-user")("routerLink",t.\u0275\u0275pureFunction0(19,f))("routerLinkActiveOptions",t.\u0275\u0275pureFunction0(20,x)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(16,16,"Settings.nav.Users")))},directives:[p.Od,u.E,p.rH,p.lC],pipes:[d.X$],styles:[".setup-wrapper[_ngcontent-%COMP%]{padding:16px;margin-bottom:0!important}.tabcontent[_ngcontent-%COMP%]{display:none;padding:6px 12px;border:1px solid #ccc;border-top:none}.back-buttons[_ngcontent-%COMP%]{background:#f20a6d!important;border:solid thin #dddddd!important;color:#fff!important;padding:4px 16px!important;float:right!important;margin-top:-45px;margin-right:10px}[_nghost-%COMP%]{width:calc(100% - 250px)}.active[_ngcontent-%COMP%]{background-color:transparent;border-bottom:solid green}"]}),n})();var P=i(73593),m=i(93075);function M(n,r){if(1&n&&(t.\u0275\u0275elementStart(0,"span",9),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementStart(3,"b"),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"uppercase"),t.\u0275\u0275elementEnd()()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(2,2,"common.USER")," - "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(5,4,null==e.detail?null:e.detail.name))}}function b(n,r){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",2)(1,"input",19),t.\u0275\u0275listener("ngModelChange",function(s){return t.\u0275\u0275restoreView(e).$implicit.selected=s})("change",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext(3).statusChange()}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"label",20),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()()}if(2&n){const e=r.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("id",e.moduleId),t.\u0275\u0275property("value",e.moduleId)("ngModel",e.selected)("checked",e.selected),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("for",e.moduleId),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e?null:e.name," ")}}function O(n,r){if(1&n&&(t.\u0275\u0275elementStart(0,"div",16)(1,"h3"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",17),t.\u0275\u0275template(4,b,4,6,"div",18),t.\u0275\u0275elementEnd()()),2&n){const e=r.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.name),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",null==e?null:e.permissionModule)}}function v(n,r){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",10),t.\u0275\u0275template(1,O,5,2,"div",11),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementStart(3,"div",12)(4,"div",13)(5,"button",14),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().cancel()}),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"button",15),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().save()}),t.\u0275\u0275text(9),t.\u0275\u0275pipe(10,"translate"),t.\u0275\u0275elementEnd()()()()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(2,3,e.sandbox.getPermissionsList$)),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(7,5,"Settings.nav.Cancel")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(10,7,"Settings.nav.Save"))}}const w=[{path:"",redirectTo:"role",pathMatch:"full"},{path:"",component:C,children:[{path:"",redirectTo:"role",pathMatch:"full"},{path:"role",loadChildren:()=>Promise.all([i.e(8592),i.e(1382)]).then(i.bind(i,31382)).then(n=>n.RoleModule),canActivate:[l.a],data:{permission:"settings-role",root:"settings"}},{path:"user",loadChildren:()=>i.e(1629).then(i.bind(i,51629)).then(n=>n.UserModule),canActivate:[l.a],data:{permission:"settings-user",root:"settings"}},{path:"permission",component:(()=>{class n{constructor(e,o,s,a){this.route=e,this.sandbox=o,this.changeDetect=s,this.router=a,this.subscriptions=[],this.selectAllPermission=!1}ngOnInit(){this.detail=JSON.parse(this.route.snapshot.queryParams.user),this.type=this.detail.type,this.id=this.detail.id,this.getPermissionList(),this.subscribeList()}subscribeList(){this.subscriptions.push(this.sandbox.getPermissionsList$.subscribe(e=>{e&&(this.permissionList=e,this.id&&this.getPermission())}))}getStatus(){let e=!0;this.permissionList.forEach(o=>{!e||(e=o.permissionModule.every(s=>!0===s.selected))}),this.selectAllPermission=e}getPermissionList(){this.sandbox.getPermissionlist({})}getPermission(){const e={};e.refType="user"===this.type?2:1,e.refId=this.id,this.sandbox.getPermission(e),this.subscriptions.push(this.sandbox.permissionLoaded$.subscribe(o=>{o&&this.getStatus()}))}save(){const e=[];this.permissionList.forEach(s=>{s.permissionModule&&s.permissionModule.forEach(a=>{!0===a.selected&&e.push(a.slugName)})});const o={};o.refId=this.id,o.refType="user"===this.type?2:1,o.permission=JSON.stringify(e),this.sandbox.addPermission(o),this.sandbox.permissionAddLoaded$.subscribe(s=>{!0===s&&this.router.navigate(["/settings/access-and-permission"])})}selectAll(e){this.sandbox.selectAllPermission(e)}cancel(){this.router.navigate(["/settings/access-and-permission"])}statusChange(){this.getStatus()}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(p.gz),t.\u0275\u0275directiveInject(P.O),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(p.F0))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-permission"]],decls:21,vars:19,consts:[[1,"flex","main-header"],[1,"form-group"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","checkbox22",1,"custom-control-input",3,"ngModel","ngModelChange","change"],["for","checkbox22",1,"custom-control-label","cursor-pointer"],[1,"permission-wrap"],["class","user",4,"ngIf"],[1,"user-role",2,"margin-left","10px"],["class","pw-row",4,"ngIf"],[1,"user"],[1,"pw-row"],["class","pw-wrap-row",4,"ngFor","ngForOf"],[1,"col-12"],[1,"flex","srbtn"],[1,"button-reg","secondary",3,"click"],["type","submit",1,"button-reg","primary",3,"click"],[1,"pw-wrap-row"],[1,"form-group","pw-row-full","flex"],["class","custom-control custom-checkbox",4,"ngFor","ngForOf"],["type","checkbox",1,"custom-control-input",3,"value","ngModel","checked","id","ngModelChange","change"],[1,"custom-control-label","cursor-pointer",3,"for"]],template:function(e,o){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"h3"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",1)(5,"div",2)(6,"input",3),t.\u0275\u0275listener("ngModelChange",function(a){return o.selectAllPermission=a})("change",function(a){return o.selectAll(a.target.checked)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"label",4),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(10,"div",5),t.\u0275\u0275template(11,M,6,6,"span",6),t.\u0275\u0275elementStart(12,"span",7),t.\u0275\u0275text(13),t.\u0275\u0275pipe(14,"translate"),t.\u0275\u0275elementStart(15,"b"),t.\u0275\u0275text(16),t.\u0275\u0275pipe(17,"uppercase"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(18,v,11,9,"div",8),t.\u0275\u0275pipe(19,"async"),t.\u0275\u0275pipe(20,"async"),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,7,"Settings.nav.PermissionStatus")),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngModel",o.selectAllPermission),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(9,9,"Settings.nav.SelectAll")," "),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf","user"===o.type),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(14,11,"common.ROLE")," - "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(17,13,null==o.detail?null:o.detail.role)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(19,15,o.sandbox.permissionListLoaded$)&&t.\u0275\u0275pipeBind1(20,17,o.sandbox.permissionLoaded$)))},directives:[m.CheckboxControlValueAccessor,m.NgControlStatus,m.NgModel,c.NgIf,c.NgForOf],pipes:[d.X$,c.UpperCasePipe,c.AsyncPipe],styles:['.main-header[_ngcontent-%COMP%]{justify-content:space-between;margin-bottom:0;padding:8px 16px}.main-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:inline-flex;font-size:18px;color:#222;margin-bottom:0;font-weight:500;padding-left:0}.main-header[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin:0}.main-header[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]{font-size:12px;font-weight:400;color:#393939}.main-header[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:before{width:12px!important;height:12px!important;left:-1rem!important}.main-header[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:after{width:4px!important;height:9px!important;top:5px!important;left:4px!important}.permission-wrap[_ngcontent-%COMP%]{padding:0 16px}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]{padding:16px 0 0;border-bottom:solid 1px #ececec}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#3d3d3d;line-height:1.19;margin-bottom:10px}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;align-items:flex-start;gap:32px}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-control[_ngcontent-%COMP%]{padding-left:0;margin:0 0 12px}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]{font-size:12px;font-weight:400;color:#393939;padding-left:20px}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:before{width:12px!important;height:12px!important;left:0rem!important}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:after{width:4px!important;height:9px!important;top:5px!important;left:4px!important}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%]:checked ~ .custom-control-label[_ngcontent-%COMP%]:before{background-color:#239323!important}.main[_ngcontent-%COMP%]{display:block;background:white;padding:15px 30px 100px}.main[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{float:right;margin-top:10px;width:70px;padding:5px;background-color:#f2086d;border:none;color:#fff}.main[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.main[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .user-role[_ngcontent-%COMP%]{color:#f2086d;margin-bottom:5px;font-size:14px}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px;font-weight:800;letter-spacing:.5px}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{box-shadow:0 0 2px 1px #cacaca;margin-top:8px;padding:20px 20px 20px 30px;flex-flow:row wrap;box-sizing:border-box;display:flex;height:500px;overflow-y:auto;justify-content:space-between}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]{height:auto;margin-right:1.33%;margin-bottom:30px;flex:1 1 33%;width:30%;box-sizing:border-box;max-width:30%;display:block}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]   .role-head[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding-bottom:9px;letter-spacing:.5px;border-bottom:2px solid #dadada}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]   .role-head[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:8px}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]   .role-list[_ngcontent-%COMP%]   .roles[_ngcontent-%COMP%]{margin-top:20px}.save[_ngcontent-%COMP%]{background:#f2086d;border:solid thin transparent;color:#fff;padding:5px 20px;font-size:14px;margin:30px;float:right}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:35px;height:18px;margin-right:10px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:15px;width:15px;left:-8px;bottom:2px;background-color:#fff;transition:.4s;border:1px solid #fde0d5}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:15px;width:15px;left:3px;bottom:2px;background-color:#fff;transition:.4s;border:1px solid #fde0d5}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#f2086d}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #f2086d}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.slider.toggle-slide[_ngcontent-%COMP%]{border-radius:34px}.slider.toggle-slide[_ngcontent-%COMP%]:before{border-radius:50%}.pw-wrap-row[_ngcontent-%COMP%]{width:100%;border-radius:4px;box-shadow:0 2px 4px #00000013;border:solid 1px #eeeded;padding:15px;margin-bottom:16px}']}),n})(),canActivate:[l.a],data:{permission:"edit-role-permission"}}]}];let y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[p.Bz.forChild(w)],p.Bz]}),n})();var I=i(10518),S=i(12476);let k=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[c.CommonModule,y,I.IJ,S.K,d.aw.forChild()]]}),n})()}}]);