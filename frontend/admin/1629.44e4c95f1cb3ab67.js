"use strict";(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[1629],{51629:(y,h,l)=>{l.r(h),l.d(h,{UserModule:()=>xe});var i=l(69808),x=l(3675),s=l(93075),C=l(36642),I=l(35518),f=l(76431),u=l(68451),g=l(99291),m=l(93604),e=l(5e3),c=l(10518),b=l(24376),M=l(66836),_=l(84218);function w(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"Settings.User.Error.FirstNameisrequired")))}function N(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"Settings.User.Error.Mustbeatleast3characterslong")))}function A(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"Settings.User.Error.Mustbemax32characterslong")))}function T(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"Settings.User.Error.Mustbestring")))}function B(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"div",26),e.\u0275\u0275template(1,w,3,3,"div",27),e.\u0275\u0275template(2,N,3,3,"div",27),e.\u0275\u0275template(3,A,3,3,"div",27),e.\u0275\u0275template(4,T,3,3,"div",27),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.f.firstName.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.user.controls.firstName.hasError("minlength")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.user.controls.firstName.hasError("maxlength")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.user.controls.firstName.hasError("pattern"))}}function D(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"Settings.User.Error.LastNameisrequired")))}function L(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"Settings.User.Error.Mustbemax32characterslong")))}function V(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"Settings.User.Error.Mustbestring")))}function z(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"div",26),e.\u0275\u0275template(1,D,3,3,"div",27),e.\u0275\u0275template(2,L,3,3,"div",27),e.\u0275\u0275template(3,V,3,3,"div",27),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.f.lastName.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.user.controls.lastName.hasError("maxlength")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.user.controls.lastName.hasError("pattern"))}}function F(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"Settings.User.Error.Emailisrequired")))}function P(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"Settings.User.Error.Emailmustbeavalidemailaddress")))}function O(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"Settings.User.Error.Mustbemax96characterslong")))}function k(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"div",26),e.\u0275\u0275template(1,F,3,3,"div",27),e.\u0275\u0275template(2,P,3,3,"div",27),e.\u0275\u0275template(3,O,3,3,"div",27),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.f.email.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.f.email.errors),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.user.controls.email.hasError("maxlength"))}}function j(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"ng-option",28),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275property("value",n.groupId),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.name)}}function R(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"Settings.User.Error.Roleisrequired")))}function H(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"div",26),e.\u0275\u0275template(1,R,3,3,"div",27),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.f.email.errors.required)}}function $(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(2,1,"Settings.User.Error.UserNameEmailisrequired")," "))}function K(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"Settings.User.Error.UserNameEmailmustbeavalidemailaddress")))}function Z(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"Settings.User.Error.Mustbemax32characterslong")))}function G(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"div",26),e.\u0275\u0275template(1,$,3,3,"div",27),e.\u0275\u0275template(2,K,3,3,"div",27),e.\u0275\u0275template(3,Z,3,3,"div",27),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.f.username.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.f.username.errors),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.user.controls.username.hasError("maxlength"))}}function W(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(2,1,"Settings.User.Error.Passwordisrequired")," "))}function J(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"div",26),e.\u0275\u0275template(1,W,3,3,"div",27),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.f.password.errors.required)}}function X(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"Settings.User.Error.Mustbeatleast8characters")," "))}function Y(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"Settings.User.Error.Musthaveatleast1numberorSymbol")," "))}function Q(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"Settings.User.Error.Mustcontainatleast1inCapitalCase")," "))}function q(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"Settings.User.Error.Mustcontainatleast1inSmallCase")," "))}function ee(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"Settings.User.Error.Mustbemax50characters")," "))}const v=function(t){return{"is-invalid":t}},te=function(t){return{"error-fields":t}};let S=(()=>{class t{constructor(n,r,o,d,p,Ce){this.fb=n,this.route=r,this.sandbox=o,this.router=d,this.service=p,this.modalService=Ce,this.submitted=!1,this.pageSize=10,this.keyword="",this.userInfo=[],this.editUserId="",this.enteredPassword="",this.subscriptions=[],this.groupList=[]}ngOnInit(){this.initForm(),this.getUserGroupList(this.offset,this.keyword),this.subscribe(),this.userInfo=[],this.updateUserId=!1,this.userInfo&&this.userInfo[0]&&(this.updateUserId=!0)}subscribe(){this.sandbox.getUserGroupList({}),this.subscriptions.push(this.sandbox.getGroupRoleList$.subscribe(n=>{n&&n.length>0&&"edit"===this.edit&&this.editUserList()}))}beforeChange(n){"preventchange-2"===n.panelId&&n.preventDefault(),"preventchange-3"===n.panelId&&!1===n.nextState&&n.preventDefault()}close(){this.modalService.close("close")}initForm(){const n="^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$",r="[a-zA-Z '-,;.]*";this.user=this.fb.group({firstName:["",s.Validators.compose([s.Validators.required,s.Validators.pattern(r),s.Validators.minLength(3),s.Validators.maxLength(32)])],lastName:["",s.Validators.compose([s.Validators.required,s.Validators.pattern(r),s.Validators.maxLength(32)])],email:["",s.Validators.compose([s.Validators.required,s.Validators.pattern(n),s.Validators.email,s.Validators.maxLength(96)])],username:["",s.Validators.compose([s.Validators.required,s.Validators.pattern(n),s.Validators.maxLength(32)])],role:[null,s.Validators.required],password:["",s.Validators.compose([s.Validators.required,m.d.patternValidator(/((?=.*\d)|(?=.*[#$^+=!*()@%&]))/,{hasNumber:!0}),m.d.patternValidator(/[A-Z]/,{hasCapitalCase:!0}),m.d.patternValidator(/[a-z]/,{hasSmallCase:!0}),s.Validators.minLength(8),s.Validators.maxLength(50)])]})}conditionalValidator(n,r){return o=>n()?r(o):null}onSubmit(n){if(this.submitted=!0,"edit"===this.edit&&(""!==this.enteredPassword?(this.user.controls.password.setValidators(s.Validators.compose([s.Validators.required,m.d.patternValidator(/((?=.*\d)|(?=.*[#$^+=!*()@%&]))/,{hasNumber:!0}),m.d.patternValidator(/[A-Z]/,{hasCapitalCase:!0}),m.d.patternValidator(/[a-z]/,{hasSmallCase:!0}),s.Validators.minLength(8),s.Validators.maxLength(50)])),this.user.controls.password.updateValueAndValidity()):(this.user.controls.password.clearValidators(),this.user.controls.password.updateValueAndValidity())),this.user.invalid)return;const r={};r.firstName=this.user.value.firstName,r.lastName=this.user.value.lastName,r.email=this.user.value.email,r.role=this.user.value.role,r.username=this.user.value.username,r.password=this.user.value.password,this.userInfo&&this.userInfo[0]&&this.userInfo[0].userId?(r.userID=this.userInfo[0].userId,this.sandbox.updateUser(r),this.modalService.close("close"),this.service.setdata("")):(this.sandbox.addUser(r),this.modalService.close("close"))}enterPassword(n){this.enteredPassword=n}getUserGroupList(n=0,r){const o={limit:0};o.offset=n,o.keyword=this.keyword,o.count=0,o.status=1,this.service.userGrouplist(o).subscribe(d=>{null!=d&&(this.groupList=d.data)})}UserCancle(){this.userInfo=" ",this.service.setdata(this.userInfo),this.modalService.close("close")}editUserList(){if(this.serviceData=this.service.getdata(),this.serviceData&&(this.userInfo.push(this.serviceData),this.updateUserId=!1),this.userInfo&&this.userInfo[0]&&(this.updateUserId=!1,"edit"===this.edit))for(let n=0;n<this.userInfo.length;n++)this.updateTitle=1,this.firstName=this.userInfo[0].firstName,this.lastName=this.userInfo[0].lastName,this.email=this.userInfo[0].email,this.username=this.userInfo[0].username,this.userInfo[0]&&this.userInfo[0].usergroup&&(this.role=this.userInfo[0].usergroup.groupId)}get f(){return this.user.controls}ngOnDestroy(){this.sandbox.clearVariable(),this.subscriptions.forEach(n=>n.unsubscribe())}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(s.FormBuilder),e.\u0275\u0275directiveInject(g.gz),e.\u0275\u0275directiveInject(u.M),e.\u0275\u0275directiveInject(g.F0),e.\u0275\u0275directiveInject(f.K),e.\u0275\u0275directiveInject(c.Kz))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-spurt-settings-user-add"]],inputs:{userlist:"userlist",edit:"edit",id:"id"},decls:83,vars:79,consts:[[1,"flex","setting2-inner-header"],[1,"modal-header__title"],[1,"close-modal",3,"click"],["src","assets/img/modal-close.svg"],[1,"settings-right-wrapper","addnewuser"],[1,"new-user"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-12","col-xs-12"],[1,"form-group"],[1,"supvalidation"],["type","text","formControlName","firstName",1,"form-control",3,"ngModel","placeholder","ngClass","ngModelChange"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","lastName",1,"form-control",3,"ngModel","placeholder","ngClass","ngModelChange"],["type","email","formControlName","email","placeholder","Email",1,"form-control",3,"ngModel","ngClass","ngModelChange"],[1,"control-label"],["formControlName","role",3,"placeholder","ngModel","searchable","ngClass","clearable","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","email","formControlName","username",1,"form-control",3,"ngModel","placeholder","ngClass","ngModelChange"],[1,"form-group","form-group-pwd",2,"position","relative"],["passwordshow","","type","password","formControlName","password",1,"form-control",3,"ngModel","placeholder","ngClass","keyup","ngModelChange","keydown.space"],["pwd",""],[1,"col-12"],[1,"modal-action-btns","flex"],["type","submit"],[1,"cancel",3,"click"],[1,"invalid-feedback"],[4,"ngIf"],[3,"value"]],template:function(n,r){if(1&n){const o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0)(1,"h3",1),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",2),e.\u0275\u0275listener("click",function(){return r.close()}),e.\u0275\u0275element(4,"img",3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",4)(6,"div",5)(7,"form",6),e.\u0275\u0275listener("ngSubmit",function(){return r.onSubmit(r.user.value)}),e.\u0275\u0275elementStart(8,"div",7)(9,"div",8)(10,"div",9)(11,"label"),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275elementStart(14,"sup",10),e.\u0275\u0275text(15,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"input",11),e.\u0275\u0275listener("ngModelChange",function(p){return r.firstName=p}),e.\u0275\u0275pipe(17,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,B,5,4,"div",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"div",8)(20,"div",9)(21,"label"),e.\u0275\u0275text(22),e.\u0275\u0275pipe(23,"translate"),e.\u0275\u0275elementStart(24,"sup",10),e.\u0275\u0275text(25,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"input",13),e.\u0275\u0275listener("ngModelChange",function(p){return r.lastName=p}),e.\u0275\u0275pipe(27,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(28,z,4,3,"div",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"div",8)(30,"div",9)(31,"label"),e.\u0275\u0275text(32),e.\u0275\u0275pipe(33,"translate"),e.\u0275\u0275elementStart(34,"sup",10),e.\u0275\u0275text(35,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"input",14),e.\u0275\u0275listener("ngModelChange",function(p){return r.email=p}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(37,k,4,3,"div",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"div",8)(39,"div",9)(40,"label",15),e.\u0275\u0275text(41),e.\u0275\u0275pipe(42,"translate"),e.\u0275\u0275elementStart(43,"sup",10),e.\u0275\u0275text(44,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(45,"ng-select",16),e.\u0275\u0275listener("ngModelChange",function(p){return r.role=p}),e.\u0275\u0275pipe(46,"translate"),e.\u0275\u0275template(47,j,2,2,"ng-option",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(48,H,2,1,"div",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(49,"div",8)(50,"div",9)(51,"label"),e.\u0275\u0275text(52),e.\u0275\u0275pipe(53,"translate"),e.\u0275\u0275elementStart(54,"sup",10),e.\u0275\u0275text(55,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(56,"input",18),e.\u0275\u0275listener("ngModelChange",function(p){return r.username=p}),e.\u0275\u0275pipe(57,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(58,G,4,3,"div",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(59,"div",8)(60,"div",19)(61,"label"),e.\u0275\u0275text(62),e.\u0275\u0275pipe(63,"translate"),e.\u0275\u0275elementStart(64,"sup",10),e.\u0275\u0275text(65,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(66,"input",20,21),e.\u0275\u0275listener("keyup",function(){e.\u0275\u0275restoreView(o);const p=e.\u0275\u0275reference(67);return r.enterPassword(p.value)})("ngModelChange",function(p){return r.password=p})("keydown.space",function(p){return p.preventDefault()}),e.\u0275\u0275pipe(68,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(69,J,2,1,"div",12),e.\u0275\u0275template(70,X,3,3,"div",12),e.\u0275\u0275template(71,Y,3,3,"div",12),e.\u0275\u0275template(72,Q,3,3,"div",12),e.\u0275\u0275template(73,q,3,3,"div",12),e.\u0275\u0275template(74,ee,3,3,"div",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(75,"div",22)(76,"div",23)(77,"button",24),e.\u0275\u0275text(78),e.\u0275\u0275pipe(79,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(80,"button",25),e.\u0275\u0275listener("click",function(){return r.UserCancle()}),e.\u0275\u0275text(81),e.\u0275\u0275pipe(82,"translate"),e.\u0275\u0275elementEnd()()()()()()()}2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",r.updateTitle?"Update User":"Add User"," "),e.\u0275\u0275advance(5),e.\u0275\u0275property("formGroup",r.user),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(13,41,"Settings.User.FirstName")),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(17,43,"Settings.User.FirstName")),e.\u0275\u0275property("ngModel",r.firstName)("ngClass",e.\u0275\u0275pureFunction1(67,v,r.submitted&&r.f.firstName.errors)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.submitted&&r.f.firstName.errors),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(23,45,"Settings.User.LastName")),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(27,47,"Settings.User.LastName")),e.\u0275\u0275property("ngModel",r.lastName)("ngClass",e.\u0275\u0275pureFunction1(69,v,r.submitted&&r.f.lastName.errors)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.submitted&&r.f.lastName.errors),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(33,49,"Settings.User.Email")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngModel",r.email)("ngClass",e.\u0275\u0275pureFunction1(71,v,r.submitted&&r.f.email.errors)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.submitted&&r.f.email.errors),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(42,51,"Settings.User.Role")),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(46,53,"Settings.User.Select")),e.\u0275\u0275property("ngModel",r.role)("searchable",!0)("ngClass",e.\u0275\u0275pureFunction1(73,te,r.submitted&&r.f.role.errors))("clearable",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",r.groupList),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.submitted&&r.f.email.errors),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(53,55,"Settings.User.UserName")),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(57,57,"Settings.User.UserName")),e.\u0275\u0275property("ngModel",r.username)("ngClass",e.\u0275\u0275pureFunction1(75,v,r.submitted&&r.f.username.errors)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.submitted&&r.f.username.errors),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(63,59,"Settings.User.Password")),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(68,61,"Settings.User.Password")),e.\u0275\u0275property("ngModel",r.password)("ngClass",e.\u0275\u0275pureFunction1(77,v,r.submitted&&r.f.password.errors)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",r.submitted&&r.f.password.errors),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.user.controls.password.hasError("minlength")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.user.controls.password.hasError("hasNumber")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.user.controls.password.hasError("hasCapitalCase")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.user.controls.password.hasError("hasSmallCase")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.user.controls.password.hasError("maxlength")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",r.updateTitle?"Update User":e.\u0275\u0275pipeBind1(79,63,"Save")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(82,65,"Settings.User.Cancle")))},directives:[s.\u0275NgNoValidate,s.NgControlStatusGroup,s.FormGroupDirective,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,i.NgClass,i.NgIf,b.w9,i.NgForOf,b.jq,M.m],pipes:[_.X$],styles:[".form-group-pwd span{position:absolute;right:5px;top:8px}.cancel{background-color:transparent;border:solid 1px #078e05;color:#078e05}\n",".settings-right-wrapper{margin-top:0!important}.setting1-inner-header{margin-top:40px!important}\n"],encapsulation:2}),t})();var ne=l(9819),re=l(22290),ie=l(89113),ae=l(33052),se=l(86087);const oe=function(t){return{"hide-permission":t}};function le(t,a){if(1&t){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",26),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const o=e.\u0275\u0275nextContext().$implicit;return e.\u0275\u0275nextContext().goToPermission(o)}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()}if(2&t){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("appHideIfUnauthorized","edit-role-permission")("ngClass",e.\u0275\u0275pureFunction1(5,oe,1===(null==n||null==n.usergroup?null:n.usergroup.groupId))),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,3,"Settings.Local.Permission"),"")}}const E=function(){return["edit-role-permission","edit-user","delete-user"]};function de(t,a){if(1&t){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td",17)(8,"div",20),e.\u0275\u0275element(9,"i",21),e.\u0275\u0275elementStart(10,"div",22),e.\u0275\u0275template(11,le,3,7,"a",23),e.\u0275\u0275elementStart(12,"a",24),e.\u0275\u0275listener("click",function(){const d=e.\u0275\u0275restoreView(n).$implicit;return e.\u0275\u0275nextContext().addNewUser(d,"edit")}),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"a",25),e.\u0275\u0275listener("click",function(){const d=e.\u0275\u0275restoreView(n).$implicit;return e.\u0275\u0275nextContext().deleteUser(d.userId)}),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"translate"),e.\u0275\u0275elementEnd()()()()()}if(2&t){const n=a.$implicit,r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",n.firstName," ",n.lastName,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.email),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.usergroup.name),e.\u0275\u0275advance(1),e.\u0275\u0275property("multipleHide",e.\u0275\u0275pureFunction0(14,E)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",1!==(null==r.Rolelist?null:r.Rolelist.groupId)),e.\u0275\u0275advance(1),e.\u0275\u0275property("appHideIfUnauthorized","edit-user"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(14,10,"Settings.Local.Edit")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("appHideIfUnauthorized","delete-user"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(17,12,"Settings.Local.Delete")," ")}}const pe=function(t){return[t]};let me=(()=>{class t{constructor(n,r,o,d,p){this.router=n,this.sandbox=r,this.service=o,this.toastr=d,this.modalService=p,this.userdetails={},this.pageSize="5",this.keyword="",this.id="",this.type="edit",this.pagination=1,this.addnewuser=!1,this.subscriptions=[],this.regSubscribeEvents()}ngOnInit(){this.pageSize=sessionStorage.getItem("itemsPerPage"),this.getUserList(this.offset,this.keyword),this.sandbox.userAddLoaded$.subscribe(n=>{!0===n&&this.getUserList(this.offset,this.keyword)}),this.sandbox.userUpdateLoaded$.subscribe(n=>{!0===n&&this.getUserList(this.offset,this.keyword)})}beforeChange(n){"preventchange-2"===n.panelId&&n.preventDefault(),"preventchange-3"===n.panelId&&!1===n.nextState&&n.preventDefault()}addNewUser(n,r){this.userdetails=null,this.service.setdata(this.userdetails);const o=this.modalService.open(S,{windowClass:"add-local",backdrop:"static",centered:!1,animation:!1});"edit"===r&&(this.userdetails=n,this.service.setdata(this.userdetails),o.componentInstance.edit=this.type,o.componentInstance.id=n),o.result.then(d=>{})}getUserList(n=0,r){const o={};o.limit=this.pageSize,o.offset=n,o.keyword=this.keyword,this.sandbox.getUserList(o),this.pagination&&(o.count="true",this.sandbox.getUserPagination(o))}editUser(n){JSON.parse(sessionStorage.getItem("adminUserdetail")).userdetails.userId!==n.userId?(this.userdetails=n,this.service.setdata(this.userdetails),this.router.navigate(["/settings/user/edit",this.userdetails.userId])):this.toastr.error("You cannot edit current logged in user")}onPageChange(n){this.currentPage=n.offset,this.pageSize=n.pageSize,this.index=n.pageIndex,this.getUserList(n.pageSize*n.pageIndex,this.pageSize)}goToPermission(n){JSON.parse(sessionStorage.getItem("adminUserdetail")).userdetails.userId!==n.userId?this.router.navigate(["/settings/access-and-permission/permission"],{queryParams:{user:JSON.stringify({id:n.userId,name:n.firstName+" "+n.lastName,type:"user",role:n.usergroup.name})}}):this.toastr.error("You cannot set permission for current logged in user")}deleteUser(n){const r=this.modalService.open(ne.j,{size:"sm",windowClass:"delete-confirm",backdrop:"static",backdropClass:"createcr"});r.componentInstance.key="",r.componentInstance.id="",r.result.then(o=>{if("deleted"===o){const d={};d.id=n,this.sandbox.deleteUser(d),this.sandbox.userDelate$.subscribe(p=>{p&&1===p.status&&this.getUserList(this.offset,this.pageSize)})}})}regSubscribeEvents(){this.subscriptions.push(this.sandbox.userDelate$.subscribe(n=>{n&&1===n.status&&this.getUserList(this.offset,"")}))}ngOnDestroy(){this.subscriptions.forEach(n=>{n.unsubscribe()})}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(g.F0),e.\u0275\u0275directiveInject(u.M),e.\u0275\u0275directiveInject(f.K),e.\u0275\u0275directiveInject(re._W),e.\u0275\u0275directiveInject(c.FF))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-settings-user-list"]],decls:44,vars:37,consts:[[1,"set-lay-notes","flex",2,"padding","0 10px 10px 10px"],[1,"setup-wrapper","set-loc-wrapper"],[1,"setup-container","localization-container"],[1,"card","ap-general","ap-info"],[1,"flex","ap-body"],[1,"settings-right-wrapper"],[1,"localize-header","flex"],[1,"loc-hdr-lft"],[1,"button-reg","primary",3,"appHideIfUnauthorized","click"],["src","assets/img/add-white-ico.png","alt","add"],[1,"setup-right"],[1,"spinner-wrapper",2,"display","flex","justify-content","center","justify-items","center"],[2,"transform","translate(58%, 18%)","position","absolute",3,"isShow"],[1,"product-table"],[1,"table-responsive"],[1,"table"],["width","20%"],[1,"text-right",3,"appHideIfUnauthorized","multipleHide"],[4,"ngFor","ngForOf"],[3,"length","pageSize","pageSizeOptions","page"],["ngbDropdown","",1,"dropdown"],["ngbDropdownToggle","",1,"fa","fa-ellipsis-v","cursor",2,"padding","0 15px"],["ngbDropdownMenu","",1,"dropdown-menu",2,"min-width","88px"],["class","dropdown-item","ngbDropdownItem","","style","cursor: pointer;",3,"appHideIfUnauthorized","ngClass","click",4,"ngIf"],["ngbDropdownItem","","href","javascript:void(0)",1,"dropdown-item",3,"appHideIfUnauthorized","click"],[1,"dropdown-item",2,"margin-left","15px","cursor","pointer",3,"appHideIfUnauthorized","click"],["ngbDropdownItem","",1,"dropdown-item",2,"cursor","pointer",3,"appHideIfUnauthorized","ngClass","click"]],template:function(n,r){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"h4"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"p"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",1)(8,"div",2)(9,"div",3)(10,"div",4)(11,"div",5)(12,"div",6),e.\u0275\u0275element(13,"div",7),e.\u0275\u0275elementStart(14,"button",8),e.\u0275\u0275listener("click",function(){return r.addNewUser("","add")}),e.\u0275\u0275element(15,"img",9),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"div",10)(19,"div",11),e.\u0275\u0275element(20,"app-global-loader",12),e.\u0275\u0275pipe(21,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",13)(23,"div",14)(24,"table",15)(25,"thead")(26,"tr")(27,"th",16),e.\u0275\u0275text(28),e.\u0275\u0275pipe(29,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"th"),e.\u0275\u0275text(31),e.\u0275\u0275pipe(32,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"th"),e.\u0275\u0275text(34),e.\u0275\u0275pipe(35,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"th",17),e.\u0275\u0275text(37),e.\u0275\u0275pipe(38,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(39,"tbody"),e.\u0275\u0275template(40,de,18,15,"tr",18),e.\u0275\u0275pipe(41,"async"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(42,"mat-paginator",19),e.\u0275\u0275listener("page",function(d){return r.onPageChange(d)}),e.\u0275\u0275pipe(43,"async"),e.\u0275\u0275elementEnd()()()()()()),2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,14,"Settings.nav.Note:")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(6,16,"Settings.nav.Superadmin")," "),e.\u0275\u0275advance(9),e.\u0275\u0275property("appHideIfUnauthorized","create-user"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(17,18,"Settings.User.AddNewUser")),e.\u0275\u0275advance(4),e.\u0275\u0275property("isShow",e.\u0275\u0275pipeBind1(21,20,r.sandbox.userListLoading$)),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(29,22,"Settings.User.UserName")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(32,24,"Settings.User.EmailId")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(35,26,"Settings.User.Role")),e.\u0275\u0275advance(2),e.\u0275\u0275property("multipleHide",e.\u0275\u0275pureFunction0(34,E)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(38,28,"Settings.User.Action")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(41,30,r.sandbox.getUsersList$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("length",e.\u0275\u0275pipeBind1(43,32,r.sandbox.userPagination$))("pageSize",r.pageSize)("pageSizeOptions",e.\u0275\u0275pureFunction1(35,pe,r.pageSize)))},directives:[ie.E,ae.A,i.NgForOf,c.jt,c.iD,c.Vi,i.NgIf,c.TH,i.NgClass,se.NW],pipes:[_.X$,i.AsyncPipe],styles:[""]}),t})();var U=l(8300);const ce=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:me,data:{permission:"list-user"},canActivate:[U.a]},{path:"add",component:S,canActivate:[U.a],data:{permission:"create-user"}},{path:"edit/:id",component:S,canActivate:[U.a],data:{permission:"edit-user"}}];let ue=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[[g.Bz.forChild(ce)],g.Bz]}),t})();var ge=l(16917),fe=l(10128),ve=l(40520),he=l(12476),_e=l(1944);let xe=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({providers:[f.K,u.M],imports:[[i.CommonModule,x.o,s.FormsModule,s.ReactiveFormsModule,ge.q,ue,he.K,_e._,C.sQ.forFeature([I.n]),_.aw.forChild({loader:{provide:_.Zw,useFactory:fe.g,deps:[ve.eN]}})]]}),t})()},9819:(y,h,l)=>{l.d(h,{j:()=>f});var i=l(5e3),x=l(10518),s=l(85699),C=l(8110),I=l(84218);let f=(()=>{class u{constructor(m,e,c){this.activeModal=m,this.sellerSandbox=e,this.productSandbox=c}ngOnInit(){}close(){this.activeModal.close()}deleteContent(){"vendor"===this.key?(this.sellerSandbox.deleteSeller({vendorId:this.id}),this.sellerSandbox.deleteLoaded$.subscribe(m=>{!0===m&&this.activeModal.close("deleted")})):"product"===this.key?(this.productSandbox.doProductDelete({productId:this.id}),this.productSandbox.productDeleteLoaded$.subscribe(m=>{!0===m&&this.activeModal.close("deleted")})):this.activeModal.close("deleted")}}return u.\u0275fac=function(m){return new(m||u)(i.\u0275\u0275directiveInject(x.Kz),i.\u0275\u0275directiveInject(s.A),i.\u0275\u0275directiveInject(C.Z))},u.\u0275cmp=i.\u0275\u0275defineComponent({type:u,selectors:[["app-delete-confirmation-dialog"]],decls:15,vars:9,consts:[[1,"modal-body"],["type","button",1,"close",3,"click"],["aria-hidden","true",2,"background-color","white"],["src","assets/img/info-triangle.svg"],[1,"delete-btns","flex"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(m,e){1&m&&(i.\u0275\u0275elementStart(0,"div",0)(1,"button",1),i.\u0275\u0275listener("click",function(){return e.close()}),i.\u0275\u0275elementStart(2,"span",2),i.\u0275\u0275text(3,"\xd7"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(4,"h4"),i.\u0275\u0275element(5,"img",3),i.\u0275\u0275text(6),i.\u0275\u0275pipe(7,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div",4)(9,"button",5),i.\u0275\u0275listener("click",function(){return e.close()}),i.\u0275\u0275text(10),i.\u0275\u0275pipe(11,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(12,"button",6),i.\u0275\u0275listener("click",function(){return e.deleteContent()}),i.\u0275\u0275text(13),i.\u0275\u0275pipe(14,"translate"),i.\u0275\u0275elementEnd()()()),2&m&&(i.\u0275\u0275advance(6),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(7,3,"CommonFormAll.Doyouwanttodelete")," "),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(11,5,"CommonFormAll.No")," "),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(14,7,"CommonFormAll.Yes"),""))},pipes:[I.X$],styles:[".modal-title[_ngcontent-%COMP%]{padding:30px 30px 5px;border-bottom:1px solid #eeeeee}.modal-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-align:center;font-size:.875rem}.close[_ngcontent-%COMP%]{padding:10px;border:none}.close[_ngcontent-%COMP%]:focus{outline:none!important}.modal-footer[_ngcontent-%COMP%]{justify-content:center!important}"]}),u})()}}]);