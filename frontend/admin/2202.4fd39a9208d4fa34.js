"use strict";(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[2202],{42202:($,C,s)=>{s.r(C),s.d(C,{EmailTemplateModule:()=>je});var i=s(69808),S=s(3675),c=s(93075),u=s(36642),I=s(9900),e=s(5e3);let v=(()=>{class n extends I.V{constructor(){super(...arguments),this.url=this.getBaseUrl()}setemailtemplistdata(t){this.emailtemplistdata=t}getemailtemplistdata(){return this.emailtemplistdata}addEmailtemp(t){return this.http.post(this.url+"/email-template/add-email-template",t)}updateEmailTemp(t){return this.http.put(this.url+"/email-template/update-email-template/"+t.Id,t)}emailtemplist(t){let a={};return a=t,this.http.get(this.url+"/email-template/email-templatelist",{params:a})}emailtempPagiantion(t){let a={};return a=t,this.http.get(this.url+"/email-template/email-templatelist",{params:a})}deleteEmailtemp(t,a){return this.http.delete(this.url+"/email-template/delete-email-template/"+a,t)}}return n.\u0275fac=function(){let o;return function(a){return(o||(o=e.\u0275\u0275getInheritedFactory(n)))(a||n)}}(),n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();var r=s(83895),d=s(85775),p=s(82905);const m=n=>n.emailtemp,g=(0,d.P1)(m,p.bt),T=(0,d.P1)(m,p.p3),b=(0,d.P1)(m,p.Au),k=(0,d.P1)(m,p.cy),K=(0,d.P1)(m,p.vv),H=(0,d.P1)(m,p.ET),W=(0,d.P1)(m,p.KP),G=(0,d.P1)(m,p.KQ),Q=(0,d.P1)(m,p.mm),X=(0,d.P1)(m,p.Ij),Z=(0,d.P1)(m,p.BO),Y=(0,d.P1)(m,p.x3),J=(0,d.P1)(m,p.Td),q=(0,d.P1)(m,p.fP),ee=(0,d.P1)(m,p.Pz),te=(0,d.P1)(m,p.nO),ne=(0,d.P1)(m,p.OI),ae=(0,d.P1)(m,p.Ae),ie=(0,d.P1)(m,p.qZ),le=(0,d.P1)(m,p.il);class B{constructor(o){this.title=o.title||"",this.subject=o.subject||"",this.content=o.content||"",this.status=o.status||0,o&&o.id&&(this.Id=o.id||0)}}class N{constructor(o){this.limit=o.limit||0,this.offset=o.offset||0,this.keyword=o.keyword||"",this.count=o.count||0}}var oe=s(47319),x=s(99291),se=s(22290);let A=(()=>{class n{constructor(t,a,l){this.appState=t,this.router=a,this.toastr=l,this.emailTempList$=this.appState.select(g),this.emailTempPagination$=this.appState.select(T),this.getAddEmailTemp$=this.appState.select(b),this.updateEmailTemp$=this.appState.select(k),this.emailTempDelete$=this.appState.select(K),this.emailTempListLoading$=this.appState.select(H),this.emailTempListLoaded$=this.appState.select(W),this.emailTempListFailed$=this.appState.select(G),this.emailTempDeleteLoading$=this.appState.select(ee),this.emailTempDeleteLoaded$=this.appState.select(te),this.emailTempDeleteFailed$=this.appState.select(ne),this.emailTempCountLoading$=this.appState.select(Q),this.emailTempCountLoaded$=this.appState.select(X),this.emailTempCountFailed$=this.appState.select(Z),this.emailTempAddLoading$=this.appState.select(Y),this.emailTempAddLoaded$=this.appState.select(J),this.emailTempAddFailed$=this.appState.select(q),this.emailTempUpdateLoading$=this.appState.select(ae),this.emailTempUpdateLoaded$=this.appState.select(ie),this.emailTempUpdateFailed$=this.appState.select(le),this.subscriptions=[]}addEmailTemplate(t){this.appState.dispatch(new r.x$(new B(t)))}updateEmailTemplate(t){this.appState.dispatch(new r.QY(new B(t)))}getEmailTemplateList(t){this.appState.dispatch(new r.xN(new N(t)))}emailTemplateDelete(t){this.appState.dispatch(new r.UO(t))}emailTemplatePagination(t){this.appState.dispatch(new r.lt(new N(t)))}subscribe(){this.subscriptions.push(this.getAddEmailTemp$.subscribe(t=>{t&&t.message&&this.router.navigate(["/settings/local/emailtemp"])})),this.subscriptions.push(this.updateEmailTemp$.subscribe(t=>{t&&t.message&&1===t.status&&this.router.navigate(["/settings/local/emailtemp"])}))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(oe.yh),e.\u0275\u0275inject(x.F0),e.\u0275\u0275inject(se._W))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();var y=s(97582),P=s(39646),M=s(54004),E=s(63900),L=s(70262);class f{constructor(o,t){this.action$=o,this.service=t,this.doAddEmailTemp$=this.action$.pipe((0,u.l4)(r.MF.DO_NEW_EMAIL_TEMP_ACTION),(0,M.U)(a=>a.payload),(0,E.w)(a=>this.service.addEmailtemp(a).pipe((0,E.w)(l=>[new r.f_(l)]),(0,L.K)(l=>(0,P.of)(new r.b1(l)))))),this.doUpdateEmailTemp$=this.action$.pipe((0,u.l4)(r.MF.DO_UPDATE_EMAIL_TEMP_ACTION),(0,M.U)(a=>a.payload),(0,E.w)(a=>this.service.updateEmailTemp(a).pipe((0,E.w)(l=>[new r.Fx(l)]),(0,L.K)(l=>(0,P.of)(new r.$j(l)))))),this.doemailtemplists$=this.action$.pipe((0,u.l4)(r.MF.GET_EMAIL_TEMP_LIST_ACTION),(0,M.U)(a=>a.payload),(0,E.w)(a=>this.service.emailtemplist(a).pipe((0,E.w)(l=>[new r.$S(l)]),(0,L.K)(l=>(0,P.of)(new r.vD(l)))))),this.doemailtemppagination$=this.action$.pipe((0,u.l4)(r.MF.GET_EMAIL_TEMP_COUNT_ACTION),(0,M.U)(a=>a.payload),(0,E.w)(a=>this.service.emailtempPagiantion(a).pipe((0,E.w)(l=>[new r.fO(l)]),(0,L.K)(l=>(0,P.of)(new r.iF(l)))))),this.doEmailtempDelete$=this.action$.pipe((0,u.l4)(r.MF.DO_EMAIL_TEMP_DELETE),(0,M.U)(a=>a.payload),(0,E.w)(a=>this.service.deleteEmailtemp(a,a.emailTemplateId).pipe((0,E.w)(h=>[new r.KY(h)]),(0,L.K)(h=>(0,P.of)(new r.kr(h))))))}}function U(n){const o=n.dynamicFieldsRef.split(",").map(t=>t.slice(1,-1));for(const t of o)if(!n.content.includes(`{${t}}`))return!0;return!1}f.\u0275fac=function(o){return new(o||f)(e.\u0275\u0275inject(u.eX),e.\u0275\u0275inject(v))},f.\u0275prov=e.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac}),(0,y.gn)([(0,u.Qm)()],f.prototype,"doAddEmailTemp$",void 0),(0,y.gn)([(0,u.Qm)()],f.prototype,"doUpdateEmailTemp$",void 0),(0,y.gn)([(0,u.Qm)()],f.prototype,"doemailtemplists$",void 0),(0,y.gn)([(0,u.Qm)()],f.prototype,"doemailtemppagination$",void 0),(0,y.gn)([(0,u.Qm)()],f.prototype,"doEmailtempDelete$",void 0);var _=s(10518),re=s(59070),z=s(49876),R=s(24376),O=s(84218);function pe(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"Settings.Local.Emailtemplate.Error.Titleisrequired")))}function me(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div",24),e.\u0275\u0275template(1,pe,3,3,"div",25),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.f.title.errors.required)}}function de(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"Settings.Local.Emailtemplate.Error.Subjectisrequired")))}function ce(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div",24),e.\u0275\u0275template(1,de,3,3,"div",25),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.f.subject.errors.required)}}function ue(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"Settings.Local.Emailtemplate.Error.Contentisrequired")))}function ge(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div",24),e.\u0275\u0275template(1,ue,3,3,"div",25),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.f.content.errors.required)}}function he(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"common.Dynamic field value")," "))}function fe(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"Settings.Local.Emailtemplate.Error.Statusisrequired")))}function ve(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div",24),e.\u0275\u0275template(1,fe,3,3,"div",25),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.f.status.errors.required)}}const F=function(n){return{"is-invalid":n}},Ee=function(n){return{"error-fields":n}};let D=(()=>{class n{constructor(t,a,l,h,w,we,$e,Be){this.modalService=t,this.fb=a,this.route=l,this.sandbox=h,this.router=w,this.service=we,this.changeDetectRef=$e,this.ckeconfiqservice=Be,this.editEmailTemplateInfo=[],this.submitted=!1,this.dynamicFieldsValue=!1,this.config=this.ckeconfiqservice.getckeconfig()}get f(){return this.emailTemplateForm.controls}ngOnInit(){this.initForm(),this.editEmailTempId=this.route.snapshot.paramMap.get("id"),this.setDefaultValues(),this.editEmailtempList()}beforeChange(t){"preventchange-2"===t.panelId&&t.preventDefault(),"preventchange-3"===t.panelId&&!1===t.nextState&&t.preventDefault()}setDefaultValues(){this.emailTemplateForm.patchValue({postalcode:"Yes",tc:!0})}initForm(){this.emailTemplateForm=this.fb.group({title:[null,[c.Validators.required]],subject:[null,[c.Validators.required]],content:[null,[c.Validators.required]],status:[null,[c.Validators.required]]})}close(){this.modalService.close("close")}cancel(){this.router.navigate(["/settings/local/emailtemp"])}onSubmit(t){if(this.submitted=!0,this.dynamicFieldsValue=U({content:this.emailTemplateForm.value.content,dynamicFieldsRef:this.editEmailTemplateInfo[0].dynamicFieldsRef}),this.emailTemplateForm.invalid||this.dynamicFieldsValue)return;const l={};l.title=this.emailTemplateForm.value.title,l.subject=this.emailTemplateForm.value.subject,l.content=this.emailTemplateForm.value.content,l.status=this.emailTemplateForm.value.status,this.editEmailTemplateInfo&&this.editEmailTemplateInfo[0]?(l.id=this.editEmailTemplateInfo[0].emailTemplateId,this.sandbox.updateEmailTemplate(l)):this.sandbox.addEmailTemplate(l),this.modalService.close("close")}editEmailtempList(){this.editEmailTemplateInfo.push(this.service.getemailtemplistdata()),null!==this.editEmailTemplateInfo[0]?this.editEmailTemplateInfo[0]&&this.editEmailTemplateInfo[0].title&&(this.updateTitle=1,this.emailTemplateForm.controls.title.setValue(this.editEmailTemplateInfo[0].title),this.emailTemplateForm.controls.subject.setValue(this.editEmailTemplateInfo[0].subject),this.emailTemplateForm.controls.content.setValue(this.htmlTagConversion(this.editEmailTemplateInfo[0].content)),this.emailTemplateForm.controls.status.setValue(this.editEmailTemplateInfo[0].isActive)):this.emailTemplateForm=null}htmlTagConversion(t){return t.replaceAll("&amp;","&").replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&quot;",'"').replaceAll("&#39;","'").replaceAll("&sbquo;","\u201a").replaceAll("&#61;","=").replaceAll("&#45;","-").replaceAll("&hellip;","\u2026").replaceAll("&commat;","@").replaceAll("&copy;","\xa9").replaceAll("&#35;","#").replaceAll("&ldquo;","\u201c").replaceAll("&rsquo;","\u2019").replaceAll("&lsquo;","\u2018").replaceAll("&trade;","\u2122").replaceAll("&reg;","\xae").replaceAll("&ndash;","\u2013").replaceAll("&eacute;","\xe9").replaceAll("&euro;","\u20ac").replaceAll("&pound;","\xa3")}saveChanges(){if(this.submitted=!0,this.dynamicFieldsValue=U({content:this.emailTemplateForm.value.content,dynamicFieldsRef:this.editEmailTemplateInfo[0].dynamicFieldsRef}),this.changeDetectRef.detectChanges(),this.emailTemplateForm.invalid)return;const a={};a.title=this.emailTemplateForm.value.title,a.subject=this.emailTemplateForm.value.subject,a.content=this.emailTemplateForm.value.content,a.status=this.emailTemplateForm.value.status,this.editEmailTemplateInfo&&this.editEmailTemplateInfo[0]?(a.id=this.editEmailTemplateInfo[0].emailTemplateId,this.sandbox.updateEmailTemplate(a)):this.sandbox.addEmailTemplate(a),this.modalService.close("close")}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(_.Kz),e.\u0275\u0275directiveInject(c.FormBuilder),e.\u0275\u0275directiveInject(x.gz),e.\u0275\u0275directiveInject(A),e.\u0275\u0275directiveInject(x.F0),e.\u0275\u0275directiveInject(v),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(re.U))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-spurt-addemail"]],decls:63,vars:56,consts:[[1,"flex","setting2-inner-header"],[1,"modal-header__title"],[1,"close-modal",3,"click"],["src","assets/img/modal-close.svg"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"settings-right-wrapper","addnewuser"],[1,"new-user"],[1,"row"],[1,"col-lg-6","col-xs-12"],[1,"form-group"],["type","text","formControlName","title",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","subject",1,"form-control",3,"ngClass"],[1,"col-lg-12"],["formControlName","content",3,"config","ngClass"],["class","errors",4,"ngIf"],[1,"col-lg-12","col-xs-12"],[1,"control-label"],["formControlName","status",3,"placeholder","searchable","ngClass","clearable"],[3,"value"],[1,"col-12"],[1,"flex","srbtn"],["type","submit()",1,"button-reg","primary"],[1,"button-reg","secondary",3,"click"],[1,"invalid-feedback"],[4,"ngIf"],[1,"errors"]],template:function(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"h3",1),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",2),e.\u0275\u0275listener("click",function(){return a.close()}),e.\u0275\u0275element(5,"img",3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"form",4),e.\u0275\u0275listener("ngSubmit",function(){return a.onSubmit(a.emailTemplateForm.value)}),e.\u0275\u0275elementStart(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"label"),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"translate"),e.\u0275\u0275elementStart(15,"sup"),e.\u0275\u0275text(16,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(17,"input",10),e.\u0275\u0275template(18,me,2,1,"div",11),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"div",8)(20,"div",9)(21,"label"),e.\u0275\u0275text(22),e.\u0275\u0275pipe(23,"translate"),e.\u0275\u0275elementStart(24,"sup"),e.\u0275\u0275text(25,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(26,"input",12),e.\u0275\u0275template(27,ce,2,1,"div",11),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"div",13)(29,"div",9)(30,"label"),e.\u0275\u0275text(31),e.\u0275\u0275pipe(32,"translate"),e.\u0275\u0275elementStart(33,"sup"),e.\u0275\u0275text(34,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(35,"ckeditor",14),e.\u0275\u0275template(36,ge,2,1,"div",11),e.\u0275\u0275template(37,he,3,3,"div",15),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"div",16)(39,"div",9)(40,"label",17),e.\u0275\u0275text(41),e.\u0275\u0275pipe(42,"translate"),e.\u0275\u0275elementStart(43,"sup"),e.\u0275\u0275text(44,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(45,"ng-select",18),e.\u0275\u0275pipe(46,"translate"),e.\u0275\u0275pipe(47,"translate"),e.\u0275\u0275elementStart(48,"ng-option",19),e.\u0275\u0275text(49),e.\u0275\u0275pipe(50,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"ng-option",19),e.\u0275\u0275text(52),e.\u0275\u0275pipe(53,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(54,ve,2,1,"div",11),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(55,"div",20)(56,"div",21)(57,"button",22),e.\u0275\u0275text(58),e.\u0275\u0275pipe(59,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(60,"button",23),e.\u0275\u0275listener("click",function(){return a.close()}),e.\u0275\u0275text(61),e.\u0275\u0275pipe(62,"translate"),e.\u0275\u0275elementEnd()()()()()),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(a.updateTitle?"Update Email Template":e.\u0275\u0275pipeBind1(3,26,"Add Email Template")),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",a.emailTemplateForm),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(14,28,"Settings.Local.Emailtemplate.Title")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(48,F,a.submitted&&a.f.title.errors)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.submitted&&a.f.title.errors),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(23,30,"Settings.Local.Emailtemplate.Subject")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(50,F,a.submitted&&a.f.subject.errors)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.submitted&&a.f.subject.errors),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(32,32,"Settings.Local.Emailtemplate.Content")),e.\u0275\u0275advance(4),e.\u0275\u0275property("config",a.config)("ngClass",e.\u0275\u0275pureFunction1(52,F,a.submitted&&a.f.content.errors)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.submitted&&a.f.content.errors),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.dynamicFieldsValue&&a.submitted),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(42,34,"Settings.Local.Emailtemplate.Status")," "),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(46,36,"Settings.Local.Language.SelectStatus")),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(47,38,"placeholder.Choose Role")),e.\u0275\u0275property("searchable",!1)("ngClass",e.\u0275\u0275pureFunction1(54,Ee,a.submitted&&a.f.status.errors))("clearable",!1),e.\u0275\u0275advance(3),e.\u0275\u0275property("value",1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(50,40,"Settings.Local.Emailtemplate.Enabled")),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",0),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(53,42,"Settings.Local.Emailtemplate.Disabled")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",a.submitted&&a.f.status.errors),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(59,44,"Settings.generalsettings.Save")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(62,46,"Settings.generalsettings.Cancel")))},directives:[c.\u0275NgNoValidate,c.NgControlStatusGroup,c.FormGroupDirective,c.DefaultValueAccessor,c.NgControlStatus,c.FormControlName,i.NgClass,i.NgIf,z.ue,R.w9,R.jq],pipes:[O.X$],styles:[".errors[_ngcontent-%COMP%]{color:red}",".settings-right-wrapper[_ngcontent-%COMP%]{margin-top:0!important}"]}),n})();var Te=s(9819),Ce=s(33052),be=s(89113),xe=s(86087);function _e(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"Settings.Local.Emailtemplate.Enabled")," "))}function Se(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"Settings.Local.Emailtemplate.Disabled")," "))}const V=function(){return["edit-email-template","delete-email-template"]};function Ie(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td",24),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"td",25),e.\u0275\u0275elementStart(6,"td"),e.\u0275\u0275template(7,_e,3,3,"div",26),e.\u0275\u0275template(8,Se,3,3,"div",26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td",27)(10,"button",28),e.\u0275\u0275listener("click",function(){const h=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext(2).editEmailtemp(h)}),e.\u0275\u0275element(11,"img",29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"button",28),e.\u0275\u0275listener("click",function(){const h=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext(2).deleteEmailtemp(h.emailTemplateId)}),e.\u0275\u0275element(13,"img",30),e.\u0275\u0275elementEnd()()()}if(2&n){const t=o.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.title),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.subject),e.\u0275\u0275advance(1),e.\u0275\u0275property("innerHtml",t.content,e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",1==t.isActive),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0==t.isActive),e.\u0275\u0275advance(1),e.\u0275\u0275property("multipleHide",e.\u0275\u0275pureFunction0(8,V)),e.\u0275\u0275advance(1),e.\u0275\u0275property("appHideIfUnauthorized","edit-email-template"),e.\u0275\u0275advance(2),e.\u0275\u0275property("appHideIfUnauthorized","delete-email-template")}}function ye(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",10),e.\u0275\u0275element(1,"div",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"div",12)(3,"div",13),e.\u0275\u0275element(4,"app-global-loader",14),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",15)(7,"div",16)(8,"table",17)(9,"thead")(10,"tr")(11,"th",18),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th",19),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"th",20),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"th",19),e.\u0275\u0275text(21),e.\u0275\u0275pipe(22,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"th",21),e.\u0275\u0275text(24),e.\u0275\u0275pipe(25,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(26,"tbody"),e.\u0275\u0275template(27,Ie,14,9,"tr",22),e.\u0275\u0275pipe(28,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"mat-paginator",23),e.\u0275\u0275listener("page",function(l){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().onPageChange(l)}),e.\u0275\u0275pipe(30,"async"),e.\u0275\u0275elementEnd()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("isShow",e.\u0275\u0275pipeBind1(5,10,t.sandbox.emailTempListLoading$)),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(13,12,"Settings.Local.Emailtemplate.Title"),""),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(16,14,"Settings.Local.Emailtemplate.Subject")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(19,16,"Settings.Local.Emailtemplate.Content")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(22,18,"Settings.Local.Emailtemplate.Status")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("multipleHide",e.\u0275\u0275pureFunction0(26,V)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(25,20,"Settings.Local.Emailtemplate.Action"),""),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(28,22,t.sandbox.emailTempList$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("length",e.\u0275\u0275pipeBind1(30,24,t.sandbox.emailTempPagination$))("pageSize",t.pageSize)}}let Pe=(()=>{class n{constructor(t,a,l,h){this.modal=t,this.router=a,this.sandbox=l,this.service=h,this.pageSize=10,this.index=0,this.keyword="",this.paginationCount=!0,this.regSubscribeEvents()}ngOnInit(){this.pageSize=sessionStorage.getItem("itemsPerPage")?sessionStorage.getItem("itemsPerPage"):this.pageSize,this.getemailtempList(this.offset,this.pageSize),this.sandbox.emailTempUpdateLoaded$.subscribe(t=>{t&&this.getemailtempList(this.offset,this.pageSize)}),this.sandbox.emailTempList$.subscribe(t=>{})}beforeChange(t){"preventchange-2"===t.panelId&&t.preventDefault(),"preventchange-3"===t.panelId&&!1===t.nextState&&t.preventDefault()}getemailtempList(t=0,a){const l={};l.limit=a,l.offset=t,l.keyword=this.keyword,this.sandbox.getEmailTemplateList(l),this.paginationCount&&(l.count="true",this.sandbox.emailTemplatePagination(l))}addNewEmailTemp(){this.service.setemailtemplistdata(""),this.router.navigate(["/settings/local/emailtemp/add"])}editEmailtemp(t){const a=this.modal.open(D,{windowClass:"add-variant-roles",keyboard:!1,backdrop:"static"});t&&(this.service.setemailtemplistdata(t),a.componentInstance.id=t.emailTemplateId)}deleteEmailtemp(t){const a=this.modal.open(Te.j,{size:"sm",windowClass:"delete-confirm",backdrop:"static",modalDialogClass:"modal-dialog-centered",backdropClass:"createcr"});a.componentInstance.key="",a.componentInstance.id="",a.result.then(l=>{"deleted"===l&&(this.sandbox.emailTemplateDelete({emailTemplateId:t}),this.regSubscribeEvents())})}regSubscribeEvents(){this.sandbox.emailTempDelete$.subscribe(t=>{t&&1===t.status&&this.getemailtempList(this.offset,this.pageSize)})}onPageChange(t){this.pageSize=t.pageSize,this.index=t.pageIndex,this.offset=t.pageSize*t.pageIndex,this.getemailtempList(this.offset,this.pageSize)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(_.FF),e.\u0275\u0275directiveInject(x.F0),e.\u0275\u0275directiveInject(A),e.\u0275\u0275directiveInject(v))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-spurt-listemailtemp"]],decls:16,vars:7,consts:[[1,"set-lay-notes","flex",2,"padding","0 10px 10px 10px"],[1,"setup-wrapper","set-loc-wrapper"],[1,"setup-container","localization-container"],[1,"card","ap-general","ap-info"],[1,"flex","ap-body"],["ngbNav","",2,"width","100%"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavContent","","style","display: flex !important;"],[1,"mt-2",2,"width","100%",3,"ngbNavOutlet"],[1,"localize-header","flex"],[1,"loc-hdr-lft"],[1,"setup-right"],[1,"spinner-wrapper",2,"display","flex","justify-content","center","justify-items","center"],[2,"transform","translate(58%, 18%)","position","absolute",3,"isShow"],[1,"product-table"],[1,"table-responsive"],[1,"table"],["scope","col",1,""],["scope","col"],["scope","col",2,"width","466px"],["scope","col",1,"text-right",3,"appHideIfUnauthorized","multipleHide"],[4,"ngFor","ngForOf"],[3,"length","pageSize","page"],["scope","row",1,""],[2,"width","466px",3,"innerHtml"],[4,"ngIf"],[1,"text-center","action-btn",3,"appHideIfUnauthorized","multipleHide"],[3,"appHideIfUnauthorized","click"],["src","assets/img/edit.png","alt","edit"],["src","assets/img/delete-new.png","alt","delete"]],template:function(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"h4"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"p"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",1)(8,"div",2)(9,"div",3)(10,"div",4)(11,"ul",5,6)(13,"li",7),e.\u0275\u0275template(14,ye,31,27,"ng-template",8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(15,"div",9),e.\u0275\u0275elementEnd()()()()),2&t){const l=e.\u0275\u0275reference(12);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,3,"Settings.nav.Note:")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(6,5,"Settings.paragraph.Forsendingnotifications")," "),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngbNavOutlet",l)}},directives:[_.Pz,_.nv,_.uN,Ce.A,be.E,i.NgForOf,i.NgIf,xe.NW,_.tO],pipes:[O.X$,i.AsyncPipe],styles:[".settings-right-wrapper[_ngcontent-%COMP%]{margin-top:0!important}.coc[_ngcontent-%COMP%]{background:#f20a6d;border:solid thin #dddddd;color:#fff;padding:4px 16px}"]}),n})();var j=s(8300);const Me=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:Pe,canActivate:[j.a],data:{permission:"list-email-template"}},{path:"add",component:D,canActivate:[j.a],data:{permission:"create-email-template"}},{path:"edit/:id",component:D,canActivate:[j.a],data:{permission:"edit-email-template"}}];let Le=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[x.Bz.forChild(Me)],x.Bz]}),n})();var Oe=s(14696),Ae=s(47769),Fe=s(40520),De=s(12476);let je=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({providers:[v,A],imports:[[i.CommonModule,S.o,c.FormsModule,c.ReactiveFormsModule,Oe.q,Le,De.K,u.sQ.forFeature([f]),O.aw.forChild({loader:{provide:O.Zw,useFactory:Ae.g,deps:[Fe.eN]}}),z.dF]]}),n})()},33052:($,C,s)=>{s.d(C,{A:()=>I});var i=s(5e3),S=s(9932),c=s(69808);function u(e,v){1&e&&(i.\u0275\u0275elementStart(0,"div",1)(1,"div",2),i.\u0275\u0275element(2,"img",3),i.\u0275\u0275elementEnd()())}let I=(()=>{class e{constructor(r){this.httpStatus=r,this.subscriptions=[],this.loader=!1,this.getHttpResponse()}ngOnInit(){}getHttpResponse(){this.subscriptions.push(this.httpStatus.getHttpStatus().subscribe(r=>{this.loader=r}))}ngOnDestroy(){this.subscriptions.forEach(r=>r.unsubscribe())}}return e.\u0275fac=function(r){return new(r||e)(i.\u0275\u0275directiveInject(S.Z))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-global-loader"]],inputs:{isShow:"isShow"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"row"],["width","80px","height","80px","src","./assets/loader/Spurt-commerce-Loader-2.1.gif"]],template:function(r,d){1&r&&i.\u0275\u0275template(0,u,3,0,"div",0),2&r&&i.\u0275\u0275property("ngIf",d.isShow)},directives:[c.NgIf],styles:['#loader[_ngcontent-%COMP%]{height:175px;inset:0;margin:auto;position:absolute;width:175px}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{height:100%;inset:0;margin:auto;position:absolute;width:87.5px}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:before{border-radius:100%;content:"";height:87.5px;left:0;position:absolute;right:0;top:0;transform:scale(0);width:87.5px}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+1){transform:rotate(45deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+1):before{animation:.8s linear .1s normal none infinite running load;background:#00ff80 none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+2){transform:rotate(90deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+2):before{animation:.8s linear .2s normal none infinite running load;background:#00ffea none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+3){transform:rotate(135deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+3):before{animation:.8s linear .3s normal none infinite running load;background:#00aaff none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+4){transform:rotate(180deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+4):before{animation:.8s linear .4s normal none infinite running load;background:#0040ff none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+5){transform:rotate(225deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+5):before{animation:.8s linear .5s normal none infinite running load;background:#2a00ff none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+6){transform:rotate(270deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+6):before{animation:.8s linear .6s normal none infinite running load;background:#9500ff none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+7){transform:rotate(315deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+7):before{animation:.8s linear .7s normal none infinite running load;background:magenta none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+8){transform:rotate(360deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+8):before{animation:.8s linear .8s normal none infinite running load;background:#ff0095 none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{background-position:50% 50%;background-repeat:no-repeat;bottom:-40px;height:20px;left:0;position:absolute;right:0;width:180px}@keyframes load{to{opacity:0;transform:scale(1)}}.spinner-message[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{text-align:center}']}),e})()},9819:($,C,s)=>{s.d(C,{j:()=>d});var i=s(5e3),S=s(10518),c=s(85699),u=s(8110),I=s(69808),e=s(84218);function v(p,m){if(1&p&&(i.\u0275\u0275elementStart(0,"p"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&p){const g=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" Cannot recover a deleted ",g.variantMessage,". Are you sure you want to proceed with deletion ?")}}function r(p,m){if(1&p&&(i.\u0275\u0275elementStart(0,"p"),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275elementEnd()),2&p){const g=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate2("",i.\u0275\u0275pipeBind1(2,2,"common.Are you sure want to delete this")," ",g.deleteMessage," ?")}}let d=(()=>{class p{constructor(g,T,b){this.activeModal=g,this.sellerSandbox=T,this.productSandbox=b}ngOnInit(){}close(){this.activeModal.close()}deleteContent(){"vendor"===this.key?(this.sellerSandbox.deleteSeller({vendorId:this.id}),this.sellerSandbox.deleteLoaded$.subscribe(g=>{!0===g&&this.activeModal.close("deleted")})):"product"===this.key?(this.productSandbox.doProductDelete({productId:this.id}),this.productSandbox.productDeleteLoaded$.subscribe(g=>{!0===g&&this.activeModal.close("deleted")})):this.activeModal.close("deleted"),this.deleteMessage=""}}return p.\u0275fac=function(g){return new(g||p)(i.\u0275\u0275directiveInject(S.Kz),i.\u0275\u0275directiveInject(c.A),i.\u0275\u0275directiveInject(u.Z))},p.\u0275cmp=i.\u0275\u0275defineComponent({type:p,selectors:[["app-delete-confirmation-dialog"]],inputs:{deleteMessage:"deleteMessage",variantMessage:"variantMessage"},decls:17,vars:11,consts:[[1,"modal-body"],["type","button",1,"close",3,"click"],["aria-hidden","true",2,"background-color","white"],[4,"ngIf"],[1,"delete-btns","flex"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(g,T){1&g&&(i.\u0275\u0275elementStart(0,"div",0)(1,"button",1),i.\u0275\u0275listener("click",function(){return T.close()}),i.\u0275\u0275elementStart(2,"span",2),i.\u0275\u0275text(3,"\xd7"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(4,"h3"),i.\u0275\u0275text(5),i.\u0275\u0275pipe(6,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(7,v,2,1,"p",3),i.\u0275\u0275template(8,r,3,4,"p",3),i.\u0275\u0275element(9,"h4"),i.\u0275\u0275elementStart(10,"div",4)(11,"button",5),i.\u0275\u0275listener("click",function(){return T.close()}),i.\u0275\u0275text(12),i.\u0275\u0275pipe(13,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(14,"button",6),i.\u0275\u0275listener("click",function(){return T.deleteContent()}),i.\u0275\u0275text(15),i.\u0275\u0275pipe(16,"translate"),i.\u0275\u0275elementEnd()()()),2&g&&(i.\u0275\u0275advance(5),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(6,5,"common.Delete Confirmation")),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",T.variantMessage),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!T.variantMessage),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1("",i.\u0275\u0275pipeBind1(13,7,"common.Cancel")," "),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("",i.\u0275\u0275pipeBind1(16,9,"common.Delete")," "))},directives:[I.NgIf],pipes:[e.X$],styles:[".modal-title[_ngcontent-%COMP%]{padding:30px 30px 5px;border-bottom:1px solid #eeeeee}.modal-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-align:center;font-size:.875rem}.close[_ngcontent-%COMP%]{padding:10px;border:none}.close[_ngcontent-%COMP%]:focus{outline:none!important}.modal-footer[_ngcontent-%COMP%]{justify-content:center!important}.modal-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}"]}),p})()}}]);