(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[7314],{62953:(af,qs,Pa)=>{"use strict";Pa.d(qs,{z:()=>r});var Ba=Pa(97582),Si=Pa(39646),q=Pa(54004),W=Pa(63900),t=Pa(18505),A=Pa(36642),g=Pa(70262),i=Pa(4751),P=Pa(94327),u=Pa(5e3),y=Pa(99291),e=Pa(61870);class r{constructor(a,s,c){this.action$=a,this.router=s,this.sellerService=c,this.sellerList$=this.action$.pipe((0,A.l4)(i.MF.GET_SELLER_LIST),(0,q.U)(f=>f.payload),(0,W.w)(f=>this.sellerService.sellerList(f).pipe((0,W.w)(m=>[new i.lq(m)]),(0,g.K)(m=>(0,Si.of)(new i.fh(m)))))),this.sellerAdd$=this.action$.pipe((0,A.l4)(i.MF.DO_SELLER_ADD),(0,q.U)(f=>f.payload),(0,W.w)(f=>this.sellerService.sellerAdd(f).pipe((0,W.w)(m=>[new i.dL(m)]),(0,g.K)(m=>(0,Si.of)(new i.a4(m)))))),this.sellerUpdate$=this.action$.pipe((0,A.l4)(i.MF.DO_SELLER_UPDATE),(0,q.U)(f=>f.payload),(0,W.w)(f=>this.sellerService.sellerUpdate(f).pipe((0,W.w)(m=>[new i.dL(m)]),(0,g.K)(m=>(0,Si.of)(new i.a4(m)))))),this.pageDetails$=this.action$.pipe((0,A.l4)(i.MF.PAGE_DETAILS),(0,q.U)(f=>f.payload),(0,W.w)(f=>this.sellerService.pageDetails(f).pipe((0,q.U)(m=>new i.l6(m)),(0,g.K)(m=>(0,Si.of)(new i.ch(m)))))),this.doSellerDelete$=this.action$.pipe((0,A.l4)(i.MF.DO_DELETE_SELLER_ACTION),(0,q.U)(f=>f.payload),(0,W.w)(f=>this.sellerService.deleteSeller(f).pipe((0,W.w)(m=>[new i.u2(m)]),(0,g.K)(m=>(0,Si.of)(new i.lo(m)))))),this.doSellerExcel$=this.action$.pipe((0,A.l4)(i.MF.GET_SELLER_EXCEL),(0,q.U)(f=>f.payload),(0,W.w)(f=>this.sellerService.sellerExcel(f).pipe((0,t.b)(m=>{const h="SellerExcel_"+Date.now()+".xlsx",w=new Blob([m],{type:"text/xlsx"});(0,P.saveAs)(w,h)}),(0,W.w)(m=>[new i.tE(m)]),(0,g.K)(m=>(0,Si.of)(new i.NR(m)))))),this.doSellerBulkDelete$=this.action$.pipe((0,A.l4)(i.MF.DO_SELLER_BULK_DELETE),(0,q.U)(f=>f.payload),(0,W.w)(f=>this.sellerService.sellerBulkDelete(f).pipe((0,W.w)(m=>[new i.LO(m)]),(0,g.K)(m=>(0,Si.of)(new i.Uy(m)))))),this.doSellerApproval$=this.action$.pipe((0,A.l4)(i.MF.DO_SELLER_APPROVAL),(0,q.U)(f=>f.payload),(0,W.w)(f=>this.sellerService.sellerApproval(f).pipe((0,W.w)(m=>[new i.YC(m)]),(0,g.K)(m=>(0,Si.of)(new i.PY(m)))))),this.docountrylists$=this.action$.pipe((0,A.l4)(i.MF.GET_COUNTRY_LIST),(0,q.U)(f=>f.payload),(0,W.w)(f=>this.sellerService.countrylist(f).pipe((0,t.b)(m=>{}),(0,W.w)(m=>[new i._N(m)]),(0,g.K)(m=>(0,Si.of)(new i.GU(m)))))),this.vendorCounts$=this.action$.pipe((0,A.l4)(i.MF.GET_VENDOR_COUNTS),(0,q.U)(f=>f.payload),(0,W.w)(f=>this.sellerService.vendorCounts().pipe((0,W.w)(m=>[new i.YW(m)]),(0,g.K)(m=>(0,Si.of)(new i.M4(m)))))),this.dozonelists$=this.action$.pipe((0,A.l4)(i.MF.ZONE_LIST),(0,q.U)(f=>f.payload),(0,W.w)(f=>this.sellerService.zoneList(f).pipe((0,W.w)(m=>[new i.$e(m)]),(0,g.K)(m=>(0,Si.of)(new i.Jg(m)))))),this.sellerListCount$=this.action$.pipe((0,A.l4)(i.MF.SELLER_LIST_COUNT),(0,q.U)(f=>f.payload),(0,W.w)(f=>this.sellerService.sellerListCount(f).pipe((0,W.w)(m=>[new i.bL(m)]),(0,g.K)(m=>(0,Si.of)(new i.Bu(m)))))),this.getproductList$=this.action$.pipe((0,A.l4)(i.MF.GET_PRODUCT_LIST),(0,q.U)(f=>f.payload),(0,W.w)(f=>this.sellerService.getproductList(f).pipe((0,W.w)(m=>[new i.Ck(m)]),(0,g.K)(m=>(0,Si.of)(new i.QU(m)))))),this.getproductListcount$=this.action$.pipe((0,A.l4)(i.MF.GET_PRODUCT_LIST_COUNT),(0,q.U)(f=>f.payload),(0,W.w)(f=>this.sellerService.getproductListcount(f).pipe((0,W.w)(m=>[new i.mb(m)]),(0,g.K)(m=>(0,Si.of)(new i.Z4(m)))))),this.checkAvailability$=this.action$.pipe((0,A.l4)(i.MF.CHECK_AVAILABILITY),(0,q.U)(f=>f.payload),(0,W.w)(f=>this.sellerService.checkAvailability(f).pipe((0,W.w)(m=>[new i.$_(m)]),(0,g.K)(m=>(0,Si.of)(new i.kD(m)))))),this.stateList$=this.action$.pipe((0,A.l4)(i.MF.STATE_LIST),(0,q.U)(f=>f.payload),(0,W.w)(f=>this.sellerService.stateList(f).pipe((0,W.w)(m=>[new i.M3(m)]),(0,g.K)(m=>(0,Si.of)(new i.Ay(m))))))}}r.\u0275fac=function(a){return new(a||r)(u.\u0275\u0275inject(A.eX),u.\u0275\u0275inject(y.F0),u.\u0275\u0275inject(e.n))},r.\u0275prov=u.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac}),(0,Ba.gn)([(0,A.Qm)()],r.prototype,"sellerList$",void 0),(0,Ba.gn)([(0,A.Qm)()],r.prototype,"sellerAdd$",void 0),(0,Ba.gn)([(0,A.Qm)()],r.prototype,"sellerUpdate$",void 0),(0,Ba.gn)([(0,A.Qm)()],r.prototype,"pageDetails$",void 0),(0,Ba.gn)([(0,A.Qm)()],r.prototype,"doSellerDelete$",void 0),(0,Ba.gn)([(0,A.Qm)()],r.prototype,"doSellerExcel$",void 0),(0,Ba.gn)([(0,A.Qm)()],r.prototype,"doSellerBulkDelete$",void 0),(0,Ba.gn)([(0,A.Qm)()],r.prototype,"doSellerApproval$",void 0),(0,Ba.gn)([(0,A.Qm)()],r.prototype,"docountrylists$",void 0),(0,Ba.gn)([(0,A.Qm)()],r.prototype,"vendorCounts$",void 0),(0,Ba.gn)([(0,A.Qm)()],r.prototype,"dozonelists$",void 0),(0,Ba.gn)([(0,A.Qm)()],r.prototype,"sellerListCount$",void 0),(0,Ba.gn)([(0,A.Qm)()],r.prototype,"getproductList$",void 0),(0,Ba.gn)([(0,A.Qm)()],r.prototype,"getproductListcount$",void 0),(0,Ba.gn)([(0,A.Qm)()],r.prototype,"checkAvailability$",void 0),(0,Ba.gn)([(0,A.Qm)()],r.prototype,"stateList$",void 0)},77314:(af,qs,Pa)=>{"use strict";Pa.r(qs),Pa.d(qs,{DashboardModule:()=>Er});var Ba=Pa(69808),Si=Pa(3675),q=Pa(93075),W=Pa(36642),t=Pa(40520),A=Pa(9900),g=Pa(5e3);let i=(()=>{class He extends A.V{constructor(){super(...arguments),this.params={},this.URL=this.getBaseUrl()}getTopSellingProducts(Ve){const je={},ir=Object.getOwnPropertyNames(Ve).reduce((Zr,yn)=>Zr.set(yn,Ve[yn]),new t.LE);return je.params=ir,this.http.get(this.URL+"/product/top-performing-products",je)}getSalesOrders(Ve){const je={},ir=Object.getOwnPropertyNames(Ve).reduce((Zr,yn)=>Zr.set(yn,Ve[yn]),new t.LE);return je.params=ir,this.http.get(this.URL+"/admin-customer/customer-visit-list",je)}getVisitorsList(Ve){const je={},ir=Object.getOwnPropertyNames(Ve).reduce((Zr,yn)=>Zr.set(yn,Ve[yn]),new t.LE);return je.params=ir,this.http.get(this.URL+"/order/transaction-list",je)}getRecentVisitorsList(Ve){const je={},ir=Object.getOwnPropertyNames(Ve).reduce((Zr,yn)=>Zr.set(yn,Ve[yn]),new t.LE);return je.params=ir,this.http.get(this.URL+"/product/top-five-repeatedly-purchased-customers",je)}getRecentSellingProductList(Ve){const je={},ir=Object.getOwnPropertyNames(Ve).reduce((Zr,yn)=>Zr.set(yn,Ve[yn]),new t.LE);return je.params=ir,this.http.get(this.URL+"/product/recent-selling-product",je)}getItemsPerPageCount(){return this.http.get(this.URL+"/settings/get-settings")}getDashboardCount(){return this.http.get(this.URL+"/product/dashboard-admin-totalvendor-totalproduct-count")}averageOrderValue(Ve){const je={},ir=Object.getOwnPropertyNames(Ve).reduce((Zr,yn)=>Zr.set(yn,Ve[yn]),new t.LE);return je.params=ir,this.http.get(this.URL+"/product/dashboard-average-order-value",je)}totalCustomersList(Ve){const je={},ir=Object.getOwnPropertyNames(Ve).reduce((Zr,yn)=>Zr.set(yn,Ve[yn]),new t.LE);return je.params=ir,this.http.get(this.URL+"/product/dashboard/admin-customers-count",je)}getTopSellingProductListCount(Ve){const je={},ir=Object.getOwnPropertyNames(Ve).reduce((Zr,yn)=>Zr.set(yn,Ve[yn]),new t.LE);return je.params=ir,this.http.get(this.URL+"/product/top-performing-products",je)}totalRevenue(Ve){const je={},ir=Object.getOwnPropertyNames(Ve).reduce((Zr,yn)=>Zr.set(yn,Ve[yn]),new t.LE);return je.params=ir,this.http.get(this.URL+"/product/dashboard-total-revenue",je)}totalOrders(Ve){const je={},ir=Object.getOwnPropertyNames(Ve).reduce((Zr,yn)=>Zr.set(yn,Ve[yn]),new t.LE);return je.params=ir,this.http.get(this.URL+"/product/dashboard-admin/orders-count",je)}newCustomers(Ve){const je={},ir=Object.getOwnPropertyNames(Ve).reduce((Zr,yn)=>Zr.set(yn,Ve[yn]),new t.LE);return je.params=ir,this.http.get(this.URL+"/product/dashboard/admin-customers-count",je)}averageConversionRatio(Ve){const je={},ir=Object.getOwnPropertyNames(Ve).reduce((Zr,yn)=>Zr.set(yn,Ve[yn]),new t.LE);return je.params=ir,this.http.get(this.URL+"/product/dashboard-average-conversion-ratio",je)}transactionValues(Ve){const je={},ir=Object.getOwnPropertyNames(Ve).reduce((Zr,yn)=>Zr.set(yn,Ve[yn]),new t.LE);return je.params=ir,this.http.get(this.URL+"/order/transaction-list",je)}vendor(Ve){const je={},ir=Object.getOwnPropertyNames(Ve).reduce((Zr,yn)=>Zr.set(yn,Ve[yn]),new t.LE);return je.params=ir,this.http.get(this.URL+"/admin-customer/vendor-graph-list",je)}salesgraph(Ve){const je={},ir=Object.getOwnPropertyNames(Ve).reduce((Zr,yn)=>Zr.set(yn,Ve[yn]),new t.LE);return je.params=ir,this.http.get(this.URL+"/order/sales-graph-list",je)}weeklysalesproduct(Ve){const je={},ir=Object.getOwnPropertyNames(Ve).reduce((Zr,yn)=>Zr.set(yn,Ve[yn]),new t.LE);return je.params=ir,this.http.get(this.URL+"/product/dashboard/graph-weekly-saleslist",je)}toptenweeklyproducts(Ve){const je={},ir=Object.getOwnPropertyNames(Ve).reduce((Zr,yn)=>Zr.set(yn,Ve[yn]),new t.LE);return je.params=ir,this.http.get(this.URL+"/product/top-performing-products",je)}}return He.\u0275fac=function(){let Dr;return function(je){return(Dr||(Dr=g.\u0275\u0275getInheritedFactory(He)))(je||He)}}(),He.\u0275prov=g.\u0275\u0275defineInjectable({token:He,factory:He.\u0275fac}),He})();var P=Pa(85762),C=Pa(85775),u=Pa(3492);const y=He=>He.dashboard,e=(0,C.P1)(y,u.Z5),r=(0,C.P1)(y,u.Xe),l=(0,C.P1)(y,u.Ps),s=((0,C.P1)(y,u.wZ),(0,C.P1)(y,u.gE)),c=(0,C.P1)(y,u.Lp),f=(0,C.P1)(y,u.yS),h=((0,C.P1)(y,u.W3),(0,C.P1)(y,u.B9)),w=(0,C.P1)(y,u.kh),p=(0,C.P1)(y,u._1),v=((0,C.P1)(y,u.OF),(0,C.P1)(y,u.DE)),M=(0,C.P1)(y,u.AZ),b=(0,C.P1)(y,u.P0),x=((0,C.P1)(y,u.$),(0,C.P1)(y,u.CB)),S=(0,C.P1)(y,u.SP),T=(0,C.P1)(y,u.or),E=((0,C.P1)(y,u.gf),(0,C.P1)(y,u.Bm)),d=(0,C.P1)(y,u.Q7),F=(0,C.P1)(y,u.G3),N=((0,C.P1)(y,u.zR),(0,C.P1)(y,u.bh)),k=(0,C.P1)(y,u.$_),O=(0,C.P1)(y,u.Pj),z=((0,C.P1)(y,u.d8),(0,C.P1)(y,u.KL)),U=(0,C.P1)(y,u.Ek),H=(0,C.P1)(y,u.zp),nt=((0,C.P1)(y,u.aq),(0,C.P1)(y,u.pH)),it=(0,C.P1)(y,u.jB),ut=(0,C.P1)(y,u.NJ),j=((0,C.P1)(y,u.rr),(0,C.P1)(y,u.C4)),Z=(0,C.P1)(y,u.mW),G=(0,C.P1)(y,u.y$),at=((0,C.P1)(y,u.OV),(0,C.P1)(y,u.XO)),$=(0,C.P1)(y,u.Tb),X=(0,C.P1)(y,u.eB),et=((0,C.P1)(y,u.TB),(0,C.P1)(y,u.if)),st=(0,C.P1)(y,u.f4),dt=(0,C.P1)(y,u.AE),gt=((0,C.P1)(y,u.ie),(0,C.P1)(y,u.R1)),Lt=(0,C.P1)(y,u.dq),It=(0,C.P1)(y,u.Wf),xt=((0,C.P1)(y,u.FO),(0,C.P1)(y,u.BN)),At=(0,C.P1)(y,u.$P),Gt=(0,C.P1)(y,u.o9),Pt=((0,C.P1)(y,u.Mw),(0,C.P1)(y,u.Hx)),Vt=(0,C.P1)(y,u.eo),te=(0,C.P1)(y,u.dl),Bt=((0,C.P1)(y,u.xB),(0,C.P1)(y,u.XX)),Ot=(0,C.P1)(y,u.OC),qt=(0,C.P1)(y,u.ZU),oe=((0,C.P1)(y,u.y3),(0,C.P1)(y,u.fq)),pe=(0,C.P1)(y,u.q1),de=(0,C.P1)(y,u._7),Kt=((0,C.P1)(y,u.vf),(0,C.P1)(y,u.UZ)),Et=(0,C.P1)(y,u.dB),St=(0,C.P1)(y,u.l2),Ft=((0,C.P1)(y,u.p9),(0,C.P1)(y,u.Kl)),Nt=(0,C.P1)(y,u.rU),Rt=(0,C.P1)(y,u.h0),ft=((0,C.P1)(y,u.tv),(0,C.P1)(y,u.cV)),pt=(0,C.P1)(y,u.D_),kt=(0,C.P1)(y,u.M7),ee=((0,C.P1)(y,u.vR),(0,C.P1)(y,u.eD)),se=(0,C.P1)(y,u.sv),Be=(0,C.P1)(y,u.CV);(0,C.P1)(y,u.pb);var xe=Pa(47319);let Pe=(()=>{class He{constructor(Ve){this.appState=Ve,this.OrderCount$=this.appState.select(e),this.OrderCountLoading$=this.appState.select(l),this.OrderCountLoaded$=this.appState.select(r),this.productCount$=this.appState.select(s),this.productCountLoading$=this.appState.select(f),this.productCountLoaded$=this.appState.select(c),this.customerCount$=this.appState.select(h),this.customerCountLoading$=this.appState.select(p),this.customerCountLoaded$=this.appState.select(w),this.topSellingProducts$=this.appState.select(v),this.topSellingProductsLoading$=this.appState.select(b),this.topSellingProductsLoaded$=this.appState.select(M),this.salesOrderList$=this.appState.select(x),this.salesOrderListLoading$=this.appState.select(T),this.salesOrderListLoaded$=this.appState.select(S),this.recentVisitorList$=this.appState.select(N),this.recentVisitorListLoading$=this.appState.select(O),this.recentVisitorListLoaded$=this.appState.select(k),this.visitorLogList$=this.appState.select(E),this.visitorLogListLoading$=this.appState.select(F),this.visitorLogListLoaded$=this.appState.select(d),this.recentSellingProduct$=this.appState.select(z),this.recentSellingProductLoading$=this.appState.select(H),this.recentSellingProductLoaded$=this.appState.select(U),this.dashboardCount$=this.appState.select(nt),this.dashboardCountLoading$=this.appState.select(it),this.dashboardCountLoaded$=this.appState.select(ut),this.averageOrderValue$=this.appState.select(j),this.averageOrderValueLoading$=this.appState.select(Z),this.averageOrderValueLoaded$=this.appState.select(G),this.totalCustomersList$=this.appState.select(at),this.totalCustomersListLoading$=this.appState.select($),this.totalCustomersListLoaded$=this.appState.select(X),this.getTopSellingProductListCount$=this.appState.select(et),this.getTopSellingProductListCountLoading$=this.appState.select(st),this.getTopSellingProductListCountLoaded$=this.appState.select(dt),this.totalRevenue$=this.appState.select(gt),this.totalRevenueLoading$=this.appState.select(Lt),this.totalRevenueLoaded$=this.appState.select(It),this.totalOrders$=this.appState.select(xt),this.totalOrdersLoading$=this.appState.select(At),this.totalOrdersLoaded$=this.appState.select(Gt),this.newCustomers$=this.appState.select(Pt),this.newCustomersLoading$=this.appState.select(Vt),this.newCustomersLoaded$=this.appState.select(te),this.averageConversionRatio$=this.appState.select(Bt),this.averageConversionRatioLoading$=this.appState.select(Ot),this.averageConversionRatioLoaded$=this.appState.select(qt),this.transactionValues$=this.appState.select(oe),this.transactionValuesLoading$=this.appState.select(pe),this.transactionValuesLoaded$=this.appState.select(de),this.vendor$=this.appState.select(Kt),this.vendorLoading$=this.appState.select(Et),this.vendorLoaded$=this.appState.select(St),this.salesgraph$=this.appState.select(Ft),this.salesgraphLoading$=this.appState.select(Nt),this.salesgraphLoaded$=this.appState.select(Rt),this.weeklysalesproduct$=this.appState.select(ft),this.weeklysalesproductLoading$=this.appState.select(pt),this.weeklysalesproductLoaded$=this.appState.select(kt),this.toptenweeklyproducts$=this.appState.select(ee),this.toptenweeklyproductsLoading$=this.appState.select(se),this.toptenweeklyproductsLoaded$=this.appState.select(Be)}getTopSellingProductList(Ve){this.appState.dispatch(new P._U(Ve))}getSalesOrderList(Ve={}){this.appState.dispatch(new P.zR(Ve))}getVisitorLogsList(Ve={}){this.appState.dispatch(new P.oM(Ve))}getRecentVisitorList(Ve={}){this.appState.dispatch(new P.Ns(Ve))}getRecentSellingProductList(Ve={}){this.appState.dispatch(new P.ch(Ve))}getItemPerPageCount(Ve={}){this.appState.dispatch(new P.UY(Ve))}getDashboardCount(){this.appState.dispatch(new P.wh)}averageOrderValue(Ve){this.appState.dispatch(new P.mN(Ve))}totalCustomersList(Ve){this.appState.dispatch(new P.Dr(Ve))}getTopSellingProductListCount(Ve){this.appState.dispatch(new P.WR(Ve))}totalRevenue(Ve){this.appState.dispatch(new P.c7(Ve))}totalOrders(Ve){this.appState.dispatch(new P.AA(Ve))}newCustomers(Ve){this.appState.dispatch(new P.$y(Ve))}averageConversionRatio(Ve){this.appState.dispatch(new P.qj(Ve))}transactionValues(Ve){this.appState.dispatch(new P.j(Ve))}vendor(Ve){this.appState.dispatch(new P.QA(Ve))}salesgraph(Ve){this.appState.dispatch(new P.KJ(Ve))}weeklysalesproduct(Ve){this.appState.dispatch(new P.vs(Ve))}toptenweeklyproducts(Ve){this.appState.dispatch(new P.gF(Ve))}}return He.\u0275fac=function(Ve){return new(Ve||He)(g.\u0275\u0275inject(xe.yh))},He.\u0275prov=g.\u0275\u0275defineInjectable({token:He,factory:He.\u0275fac}),He})();var Ge=Pa(97582),gr=Pa(39646),ue=Pa(54004),Ne=Pa(63900),Ye=Pa(70262),xr=Pa(18505);class rr{constructor(Dr,Ve){this.action$=Dr,this.dashboardService=Ve,this.doTopSellingProducts$=this.action$.pipe((0,W.l4)(P.MF.GET_TOP_SELLING_PRODUCTS),(0,ue.U)(je=>je.payload),(0,Ne.w)(je=>this.dashboardService.getTopSellingProducts(je).pipe((0,Ne.w)(ir=>[new P.eG(ir)]),(0,Ye.K)(ir=>(0,gr.of)(new P.yZ(ir)))))),this.doSalesOrderList$=this.action$.pipe((0,W.l4)(P.MF.GET_SALES_ORDER_LIST),(0,ue.U)(je=>je.payload),(0,Ne.w)(je=>this.dashboardService.getSalesOrders(je).pipe((0,Ne.w)(ir=>[new P.ki(ir)]),(0,Ye.K)(ir=>(0,gr.of)(new P.nH(ir)))))),this.doVisitorLogs$=this.action$.pipe((0,W.l4)(P.MF.GET_VISITOR_LOG_LIST),(0,ue.U)(je=>je.payload),(0,Ne.w)(je=>this.dashboardService.getVisitorsList(je).pipe((0,Ne.w)(ir=>[new P.nK(ir)]),(0,Ye.K)(ir=>(0,gr.of)(new P.Um(ir)))))),this.doRecentVisitorList$=this.action$.pipe((0,W.l4)(P.MF.GET_RECENT_VISITOR_LIST),(0,ue.U)(je=>je.payload),(0,Ne.w)(je=>this.dashboardService.getRecentVisitorsList(je).pipe((0,Ne.w)(ir=>[new P.mZ(ir)]),(0,Ye.K)(ir=>(0,gr.of)(new P.WO(ir)))))),this.doRecentSellingProducts$=this.action$.pipe((0,W.l4)(P.MF.GET_RECENT_SELLING_PRODUCT),(0,ue.U)(je=>je.payload),(0,Ne.w)(je=>this.dashboardService.getRecentSellingProductList(je).pipe((0,Ne.w)(ir=>[new P.f_(ir)]),(0,Ye.K)(ir=>(0,gr.of)(new P.IQ(ir)))))),this.doItemPageCount$=this.action$.pipe((0,W.l4)(P.MF.GET_ITEMS_PAGECOUNT),(0,ue.U)(je=>je.payload),(0,Ne.w)(()=>this.dashboardService.getItemsPerPageCount().pipe((0,xr.b)(je=>{sessionStorage.setItem("itemsPerPage",je.data[0].itemsPerPage)}),(0,Ne.w)(je=>[new P.wZ(je)]),(0,Ye.K)(je=>(0,gr.of)(new P.zF(je)))))),this.dashboardCount$=this.action$.pipe((0,W.l4)(P.MF.GET_DASHBOARD_COUNT),(0,ue.U)(je=>je.payload),(0,Ne.w)(je=>this.dashboardService.getDashboardCount().pipe((0,Ne.w)(ir=>[new P.j_(ir)]),(0,Ye.K)(ir=>(0,gr.of)(new P.SS(ir)))))),this.averageOrderValue$=this.action$.pipe((0,W.l4)(P.MF.AVERAGE_ORDER_VALUE),(0,ue.U)(je=>je.payload),(0,Ne.w)(je=>this.dashboardService.averageOrderValue(je).pipe((0,Ne.w)(ir=>[new P.l6(ir)]),(0,Ye.K)(ir=>(0,gr.of)(new P.UO(ir)))))),this.totalCustomersList$=this.action$.pipe((0,W.l4)(P.MF.TOTAL_CUSTOMERS_LIST),(0,ue.U)(je=>je.payload),(0,Ne.w)(je=>this.dashboardService.totalCustomersList(je).pipe((0,Ne.w)(ir=>[new P.Ue(ir)]),(0,Ye.K)(ir=>(0,gr.of)(new P.x4(ir)))))),this.getTopSellingProductListCount$=this.action$.pipe((0,W.l4)(P.MF.TOP_SELLING_PRODUCT_COUNT),(0,ue.U)(je=>je.payload),(0,Ne.w)(je=>this.dashboardService.getTopSellingProductListCount(je).pipe((0,Ne.w)(ir=>[new P.zD(ir)]),(0,Ye.K)(ir=>(0,gr.of)(new P.mX(ir)))))),this.totalRevenue$=this.action$.pipe((0,W.l4)(P.MF.TOTAL_REVENUE),(0,ue.U)(je=>je.payload),(0,Ne.w)(je=>this.dashboardService.totalRevenue(je).pipe((0,Ne.w)(ir=>[new P._2(ir)]),(0,Ye.K)(ir=>(0,gr.of)(new P.C4(ir)))))),this.totalOrders$=this.action$.pipe((0,W.l4)(P.MF.TOTAL_ORDERS),(0,ue.U)(je=>je.payload),(0,Ne.w)(je=>this.dashboardService.totalOrders(je).pipe((0,Ne.w)(ir=>[new P.EI(ir)]),(0,Ye.K)(ir=>(0,gr.of)(new P.Mw(ir)))))),this.newCustomers$=this.action$.pipe((0,W.l4)(P.MF.NEW_CUSTOMERS),(0,ue.U)(je=>je.payload),(0,Ne.w)(je=>this.dashboardService.newCustomers(je).pipe((0,Ne.w)(ir=>[new P.De(ir)]),(0,Ye.K)(ir=>(0,gr.of)(new P.Qt(ir)))))),this.averageConversionRatio$=this.action$.pipe((0,W.l4)(P.MF.AVERAGE_CONVERSION_RATIO),(0,ue.U)(je=>je.payload),(0,Ne.w)(je=>this.dashboardService.averageConversionRatio(je).pipe((0,Ne.w)(ir=>[new P.p0(ir)]),(0,Ye.K)(ir=>(0,gr.of)(new P.XE(ir)))))),this.transactionValues$=this.action$.pipe((0,W.l4)(P.MF.TRANSACTION_VALUES),(0,ue.U)(je=>je.payload),(0,Ne.w)(je=>this.dashboardService.transactionValues(je).pipe((0,Ne.w)(ir=>[new P.J2(ir)]),(0,Ye.K)(ir=>(0,gr.of)(new P.ti(ir)))))),this.vendor$=this.action$.pipe((0,W.l4)(P.MF.VENDOR),(0,ue.U)(je=>je.payload),(0,Ne.w)(je=>this.dashboardService.vendor(je).pipe((0,Ne.w)(ir=>[new P.Gb(ir)]),(0,Ye.K)(ir=>(0,gr.of)(new P.eB(ir)))))),this.salesgraph$=this.action$.pipe((0,W.l4)(P.MF.SALESGRAPH),(0,ue.U)(je=>je.payload),(0,Ne.w)(je=>this.dashboardService.salesgraph(je).pipe((0,Ne.w)(ir=>[new P.X0(ir)]),(0,Ye.K)(ir=>(0,gr.of)(new P.fn(ir)))))),this.weeklysalesproduct$=this.action$.pipe((0,W.l4)(P.MF.WEEKLYSALESPRODUCT),(0,ue.U)(je=>je.payload),(0,Ne.w)(je=>this.dashboardService.weeklysalesproduct(je).pipe((0,Ne.w)(ir=>[new P.Xg(ir)]),(0,Ye.K)(ir=>(0,gr.of)(new P.FG(ir)))))),this.toptenweeklyproducts$=this.action$.pipe((0,W.l4)(P.MF.TOPTENWEEKLYPRODUCTS),(0,ue.U)(je=>je.payload),(0,Ne.w)(je=>this.dashboardService.toptenweeklyproducts(je).pipe((0,Ne.w)(ir=>[new P.p$(ir)]),(0,Ye.K)(ir=>(0,gr.of)(new P.qs(ir))))))}}rr.\u0275fac=function(Dr){return new(Dr||rr)(g.\u0275\u0275inject(W.eX),g.\u0275\u0275inject(i))},rr.\u0275prov=g.\u0275\u0275defineInjectable({token:rr,factory:rr.\u0275fac}),(0,Ge.gn)([(0,W.Qm)()],rr.prototype,"doTopSellingProducts$",void 0),(0,Ge.gn)([(0,W.Qm)()],rr.prototype,"doSalesOrderList$",void 0),(0,Ge.gn)([(0,W.Qm)()],rr.prototype,"doVisitorLogs$",void 0),(0,Ge.gn)([(0,W.Qm)()],rr.prototype,"doRecentVisitorList$",void 0),(0,Ge.gn)([(0,W.Qm)()],rr.prototype,"doRecentSellingProducts$",void 0),(0,Ge.gn)([(0,W.Qm)()],rr.prototype,"doItemPageCount$",void 0),(0,Ge.gn)([(0,W.Qm)()],rr.prototype,"dashboardCount$",void 0),(0,Ge.gn)([(0,W.Qm)()],rr.prototype,"averageOrderValue$",void 0),(0,Ge.gn)([(0,W.Qm)()],rr.prototype,"totalCustomersList$",void 0),(0,Ge.gn)([(0,W.Qm)()],rr.prototype,"getTopSellingProductListCount$",void 0),(0,Ge.gn)([(0,W.Qm)()],rr.prototype,"totalRevenue$",void 0),(0,Ge.gn)([(0,W.Qm)()],rr.prototype,"totalOrders$",void 0),(0,Ge.gn)([(0,W.Qm)()],rr.prototype,"newCustomers$",void 0),(0,Ge.gn)([(0,W.Qm)()],rr.prototype,"averageConversionRatio$",void 0),(0,Ge.gn)([(0,W.Qm)()],rr.prototype,"transactionValues$",void 0),(0,Ge.gn)([(0,W.Qm)()],rr.prototype,"vendor$",void 0),(0,Ge.gn)([(0,W.Qm)()],rr.prototype,"salesgraph$",void 0),(0,Ge.gn)([(0,W.Qm)()],rr.prototype,"weeklysalesproduct$",void 0),(0,Ge.gn)([(0,W.Qm)()],rr.prototype,"toptenweeklyproducts$",void 0);var ce=Pa(99291),re=Pa(92340),ve=Pa(73056),be=Pa(22313),Ae=Pa(97941),Te=Pa(85699),Re=Pa(22290),Ie=Pa(84218),Xe=Pa(24376),ar=Pa(33052);const nr=["plot"],cr=["*"];class Ut{static setModuleName(Dr){Ut.moduleName=Dr}static getModuleName(){return Ut.moduleName}static setPlotly(Dr){if("object"==typeof Dr&&"function"!=typeof Dr.react)throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");Ut.plotly=Dr}static insert(Dr){return-1===Ut.instances.indexOf(Dr)&&Ut.instances.push(Dr),Dr}static remove(Dr){const Ve=Ut.instances.indexOf(Dr);Ve>=0&&(Ut.instances.splice(Ve,1),Ut.plotly.purge(Dr))}getInstanceByDivId(Dr){for(const Ve of Ut.instances)if(Ve&&Ve.id===Dr)return Ve}getPlotly(){return(0,Ge.mG)(this,void 0,void 0,function*(){return yield this.waitFor(()=>"waiting"!==this._getPlotly()),this._getPlotly()})}_getPlotly(){if(void 0===Ut.plotly)throw new Error("ViaCDN"===Ut.moduleName?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed");return Ut.plotly}waitFor(Dr){return new Promise(Ve=>{const je=()=>{Dr()?Ve():setTimeout(je,10)};je()})}newPlot(Dr,Ve,je,ir,Zr){return(0,Ge.mG)(this,void 0,void 0,function*(){if(yield this.waitFor(()=>"waiting"!==this._getPlotly()),Zr){const yn={data:Ve,layout:je,config:ir,frames:Zr};return this._getPlotly().newPlot(Dr,yn).then(()=>Ut.insert(Dr))}return this._getPlotly().newPlot(Dr,Ve,je,ir).then(()=>Ut.insert(Dr))})}plot(Dr,Ve,je,ir,Zr){if(Zr){const yn={data:Ve,layout:je,config:ir,frames:Zr};return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(Dr,yn):this._getPlotly().newPlot(Dr,yn)}return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(Dr,Ve,je,ir):this._getPlotly().newPlot(Dr,Ve,je,ir)}update(Dr,Ve,je,ir,Zr){if(Zr){const yn={data:Ve,layout:je,config:ir,frames:Zr};return this._getPlotly().react(Dr,yn)}return this._getPlotly().react(Dr,Ve,je,ir)}resize(Dr){return this._getPlotly().Plots.resize(Dr)}}Ut.\u0275fac=function(Dr){return new(Dr||Ut)},Ut.instances=[],Ut.plotly=void 0,Ut.moduleName=void 0,Ut.\u0275prov=g.\u0275\u0275defineInjectable({factory:function(){return new Ut},token:Ut,providedIn:"root"});let Ht=(()=>{class He{constructor(Ve,je,ir){this.plotly=Ve,this.iterableDiffers=je,this.keyValueDiffers=ir,this.defaultClassName="js-plotly-plot",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!1,this.initialized=new g.EventEmitter,this.update=new g.EventEmitter,this.purge=new g.EventEmitter,this.error=new g.EventEmitter,this.afterExport=new g.EventEmitter,this.afterPlot=new g.EventEmitter,this.animated=new g.EventEmitter,this.animatingFrame=new g.EventEmitter,this.animationInterrupted=new g.EventEmitter,this.autoSize=new g.EventEmitter,this.beforeExport=new g.EventEmitter,this.buttonClicked=new g.EventEmitter,this.click=new g.EventEmitter,this.plotlyClick=new g.EventEmitter,this.clickAnnotation=new g.EventEmitter,this.deselect=new g.EventEmitter,this.doubleClick=new g.EventEmitter,this.framework=new g.EventEmitter,this.hover=new g.EventEmitter,this.legendClick=new g.EventEmitter,this.legendDoubleClick=new g.EventEmitter,this.react=new g.EventEmitter,this.relayout=new g.EventEmitter,this.restyle=new g.EventEmitter,this.redraw=new g.EventEmitter,this.selected=new g.EventEmitter,this.selecting=new g.EventEmitter,this.sliderChange=new g.EventEmitter,this.sliderEnd=new g.EventEmitter,this.sliderStart=new g.EventEmitter,this.transitioning=new g.EventEmitter,this.transitionInterrupted=new g.EventEmitter,this.unhover=new g.EventEmitter,this.relayouting=new g.EventEmitter,this.treemapclick=new g.EventEmitter,this.sunburstclick=new g.EventEmitter,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","buttonClicked","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","react","relayout","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","transitioning","transitionInterrupted","unhover","relayouting","treemapclick","sunburstclick"]}ngOnInit(){this.createPlot().then(()=>{const Ve=this.createFigure();this.initialized.emit(Ve)}),this.click.observers.length>0&&console.error("DEPRECATED: Reconsider using `(plotlyClick)` instead of `(click)` to avoid event conflict. Please check https://github.com/plotly/angular-plotly.js#FAQ")}ngOnDestroy(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0);const Ve=this.createFigure();this.purge.emit(Ve),Ut.remove(this.plotlyInstance)}ngOnChanges(Ve){let je=!1;const ir=Ve.revision;ir&&!ir.isFirstChange()&&(je=!0);const Zr=Ve.debug;Zr&&!Zr.isFirstChange()&&(je=!0),je&&this.updatePlot(),this.updateWindowResizeHandler()}ngDoCheck(){if(this.updateOnlyWithRevision)return!1;let Ve=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(Ve=!0):this.layoutDiffer=this.layout?this.keyValueDiffers.find(this.layout).create():void 0),this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(Ve=!0):this.dataDiffer=Array.isArray(this.data)?this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):void 0),Ve&&this.plotlyInstance&&this.updatePlot()}getWindow(){return window}getClassName(){let Ve=[this.defaultClassName];return Array.isArray(this.className)?Ve=Ve.concat(this.className):this.className&&Ve.push(this.className),Ve.join(" ")}createPlot(){return this.plotly.newPlot(this.plotEl.nativeElement,this.data,this.layout,this.config,this.frames).then(Ve=>{this.plotlyInstance=Ve,this.getWindow().gd=this.debug?Ve:void 0,this.eventNames.forEach(je=>{const ir=`plotly_${je.toLowerCase()}`;Ve.on(ir,Zr=>this[je].emit(Zr))}),Ve.on("plotly_click",je=>{this.click.emit(je),this.plotlyClick.emit(je)}),this.updateWindowResizeHandler()},Ve=>{console.error("Error while plotting:",Ve),this.error.emit(Ve)})}createFigure(){const Ve=this.plotlyInstance;return{data:Ve.data,layout:Ve.layout,frames:Ve._transitionData?Ve._transitionData._frames:null}}updatePlot(){if(!this.plotlyInstance){const je=new Error("Plotly component wasn't initialized");throw this.error.emit(je),je}const Ve=Object.assign({},this.layout);return this.plotly.update(this.plotlyInstance,this.data,Ve,this.config,this.frames).then(()=>{const je=this.createFigure();this.update.emit(je)},je=>{console.error("Error while updating plot:",je),this.error.emit(je)})}updateWindowResizeHandler(){this.useResizeHandler?void 0===this.resizeHandler&&(this.resizeHandler=()=>this.plotly.resize(this.plotlyInstance),this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)}dataDifferTrackBy(Ve,je){const ir=Object.assign({},je,{uid:""});return JSON.stringify(ir)}}return He.\u0275fac=function(Ve){return new(Ve||He)(g.\u0275\u0275directiveInject(Ut),g.\u0275\u0275directiveInject(g.IterableDiffers),g.\u0275\u0275directiveInject(g.KeyValueDiffers))},He.\u0275cmp=g.\u0275\u0275defineComponent({type:He,selectors:[["plotly-plot"]],viewQuery:function(Ve,je){if(1&Ve&&g.\u0275\u0275viewQuery(nr,7),2&Ve){let ir;g.\u0275\u0275queryRefresh(ir=g.\u0275\u0275loadQuery())&&(je.plotEl=ir.first)}},inputs:{revision:"revision",debug:"debug",useResizeHandler:"useResizeHandler",updateOnLayoutChange:"updateOnLayoutChange",updateOnDataChange:"updateOnDataChange",updateOnlyWithRevision:"updateOnlyWithRevision",data:"data",layout:"layout",config:"config",frames:"frames",style:"style",divId:"divId",className:"className"},outputs:{initialized:"initialized",update:"update",purge:"purge",error:"error",afterExport:"afterExport",afterPlot:"afterPlot",animated:"animated",animatingFrame:"animatingFrame",animationInterrupted:"animationInterrupted",autoSize:"autoSize",beforeExport:"beforeExport",buttonClicked:"buttonClicked",click:"click",plotlyClick:"plotlyClick",clickAnnotation:"clickAnnotation",deselect:"deselect",doubleClick:"doubleClick",framework:"framework",hover:"hover",legendClick:"legendClick",legendDoubleClick:"legendDoubleClick",react:"react",relayout:"relayout",restyle:"restyle",redraw:"redraw",selected:"selected",selecting:"selecting",sliderChange:"sliderChange",sliderEnd:"sliderEnd",sliderStart:"sliderStart",transitioning:"transitioning",transitionInterrupted:"transitionInterrupted",unhover:"unhover",relayouting:"relayouting",treemapclick:"treemapclick",sunburstclick:"sunburstclick"},features:[g.\u0275\u0275ProvidersFeature([Ut]),g.\u0275\u0275NgOnChangesFeature],ngContentSelectors:cr,decls:3,vars:3,consts:[[3,"ngClass","ngStyle"],["plot",""]],template:function(Ve,je){1&Ve&&(g.\u0275\u0275projectionDef(),g.\u0275\u0275elementStart(0,"div",0,1),g.\u0275\u0275projection(2),g.\u0275\u0275elementEnd()),2&Ve&&(g.\u0275\u0275property("ngClass",je.getClassName())("ngStyle",je.style),g.\u0275\u0275attribute("id",je.divId))},directives:[Ba.NgClass,Ba.NgStyle],encapsulation:2}),He})(),Se=(()=>{class He{constructor(){}}return He.\u0275fac=function(Ve){return new(Ve||He)},He.\u0275mod=g.\u0275\u0275defineNgModule({type:He}),He.\u0275inj=g.\u0275\u0275defineInjector({providers:[Ut],imports:[[Ba.CommonModule]]}),He})(),Ce=(()=>{class He{constructor(){if(!this.isValid())throw new Error("Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.");Ut.setPlotly(He.plotlyjs)}isValid(){return void 0!==He.plotlyjs&&("function"==typeof He.plotlyjs.plot||"function"==typeof He.plotlyjs.newPlot)}}return He.\u0275fac=function(Ve){return new(Ve||He)},He.\u0275mod=g.\u0275\u0275defineNgModule({type:He}),He.\u0275inj=g.\u0275\u0275defineInjector({providers:[Ut],imports:[[Ba.CommonModule,Se],Se]}),He.plotlyjs={},He})(),We=(()=>{class He{constructor(Ve){this.plotlyService=Ve,Ut.setModuleName("ViaCDN")}static setPlotlyVersion(Ve){if("latest"!==Ve&&!/^\d\.\d{1,2}\.\d{1,2}$/.test(Ve))throw new Error("Invalid plotly version. Please set 'latest' or version number (i.e.: 1.4.3)");He.loadViaCDN(),He.plotlyVersion=Ve}static setPlotlyBundle(Ve){if(!(null===Ve||He.plotlyBundleNames.indexOf(Ve)>=0)){const ir=He.plotlyBundleNames.map(Zr=>`"${Zr}"`).join(", ");throw new Error(`Invalid plotly bundle. Please set to null for full or ${ir} for a partial bundle.`)}He.plotlyBundle=Ve}static loadViaCDN(){Ut.setPlotly("waiting"),setTimeout(()=>{const je=null==He.plotlyBundle?`https://cdn.plot.ly/plotly-${He.plotlyVersion}.min.js`:`https://cdn.plot.ly/plotly-${He.plotlyBundle}-${He.plotlyVersion}.min.js`,ir=document.createElement("script");ir.type="text/javascript",ir.src=je,ir.onerror=()=>console.error(`Error loading plotly.js library from ${je}`),document.getElementsByTagName("head")[0].appendChild(ir);let yn=200;const Kn=()=>{const ea=window.Plotly;if(ea)Ut.setPlotly(ea);else{if(!(yn>0))throw new Error(`Error loading plotly.js library from ${je}. Timeout.`);yn--,setTimeout(Kn,50)}};Kn()})}}return He.\u0275fac=function(Ve){return new(Ve||He)(g.\u0275\u0275inject(Ut))},He.\u0275mod=g.\u0275\u0275defineNgModule({type:He}),He.\u0275inj=g.\u0275\u0275defineInjector({providers:[Ut],imports:[[Ba.CommonModule,Se],Se]}),He.plotlyBundle=null,He.plotlyVersion="latest",He.plotlyBundleNames=["basic","cartesian","geo","gl3d","gl2d","mapbox","finance"],He})();var or=Pa(90221),_e=Pa(10518),De=Pa(47296),sr=Pa(86400);function yr(He,Dr){1&He&&g.\u0275\u0275element(0,"span",72)}function dr(He,Dr){1&He&&g.\u0275\u0275element(0,"span",72)}function Pr(He,Dr){1&He&&g.\u0275\u0275element(0,"span",72)}function Jr(He,Dr){1&He&&g.\u0275\u0275element(0,"span",72)}function Mr(He,Dr){1&He&&g.\u0275\u0275element(0,"span",73)}function Wr(He,Dr){if(1&He){const Ve=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"img",82),g.\u0275\u0275listener("load",function(){g.\u0275\u0275restoreView(Ve);const ir=g.\u0275\u0275nextContext().$implicit;return g.\u0275\u0275nextContext().topSellingImageLoading(ir.productId)}),g.\u0275\u0275elementEnd()}if(2&He){const Ve=g.\u0275\u0275nextContext().$implicit,je=g.\u0275\u0275nextContext();g.\u0275\u0275property("src",je.imageURL+"?path="+Ve.containerName+"&name="+Ve.image+"&width=40&height=40",g.\u0275\u0275sanitizeUrl)("alt",Ve.productName)("hidden",!je.topSellingImage[Ve.productId])}}function nn(He,Dr){1&He&&(g.\u0275\u0275elementStart(0,"span",83),g.\u0275\u0275text(1,"..."),g.\u0275\u0275elementEnd())}function Nr(He,Dr){if(1&He&&(g.\u0275\u0275elementStart(0,"h4"),g.\u0275\u0275text(1),g.\u0275\u0275pipe(2,"translate"),g.\u0275\u0275elementEnd()),2&He){const Ve=g.\u0275\u0275nextContext().$implicit;g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate2("",g.\u0275\u0275pipeBind1(2,2,"Dashboard.Vendors")," : ",Ve.companyName,"")}}function Dn(He,Dr){if(1&He&&(g.\u0275\u0275elementStart(0,"div",74)(1,"div",75)(2,"div",76),g.\u0275\u0275template(3,Wr,1,3,"img",77),g.\u0275\u0275element(4,"img",78),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(5,"div",79)(6,"h3"),g.\u0275\u0275text(7),g.\u0275\u0275pipe(8,"slice"),g.\u0275\u0275template(9,nn,2,0,"span",80),g.\u0275\u0275elementEnd(),g.\u0275\u0275template(10,Nr,3,4,"h4",81),g.\u0275\u0275elementEnd()(),g.\u0275\u0275elementStart(11,"h2"),g.\u0275\u0275text(12),g.\u0275\u0275pipe(13,"translate"),g.\u0275\u0275elementEnd()()),2&He){const Ve=Dr.$implicit,je=g.\u0275\u0275nextContext();g.\u0275\u0275advance(3),g.\u0275\u0275property("ngIf",Ve),g.\u0275\u0275advance(1),g.\u0275\u0275property("hidden",je.topSellingImage[Ve.productId]),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate1("",g.\u0275\u0275pipeBind3(8,7,Ve.productName,0,51)," "),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngIf",(null==Ve.productName?null:Ve.productName.length)>51),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngIf",null!==Ve.companyName),g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate2("",Ve.topPerformingProductCount," ",g.\u0275\u0275pipeBind1(13,11,"Dashboard.nos"),"")}}function hn(He,Dr){1&He&&(g.\u0275\u0275elementStart(0,"h2",84),g.\u0275\u0275text(1),g.\u0275\u0275pipe(2,"translate"),g.\u0275\u0275elementEnd()),2&He&&(g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(2,1,"marketplace.product.NoProductsfound")))}function hr(He,Dr){1&He&&g.\u0275\u0275element(0,"span",85)}function Ar(He,Dr){if(1&He&&(g.\u0275\u0275elementStart(0,"div",86)(1,"div",87),g.\u0275\u0275element(2,"img",88),g.\u0275\u0275elementStart(3,"span"),g.\u0275\u0275text(4),g.\u0275\u0275elementEnd()(),g.\u0275\u0275elementStart(5,"div",89)(6,"h4",90),g.\u0275\u0275text(7),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(8,"p"),g.\u0275\u0275text(9),g.\u0275\u0275elementEnd()()()),2&He){const Ve=Dr.$implicit,je=g.\u0275\u0275nextContext();g.\u0275\u0275advance(2),g.\u0275\u0275property("src",je.imageURL+"?path="+Ve.avatarPath+"&name="+Ve.avatar+"&width=50&height=50",g.\u0275\u0275sanitizeUrl),g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate(Ve.orderCount),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(Ve.firstName),g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate(Ve.paymentCity)}}function Br(He,Dr){1&He&&g.\u0275\u0275element(0,"span",91)}function Or(He,Dr){1&He&&g.\u0275\u0275element(0,"span",91)}function an(He,Dr){1&He&&g.\u0275\u0275element(0,"span",72)}function dn(He,Dr){1&He&&g.\u0275\u0275element(0,"span",72)}function pn(He,Dr){if(1&He&&(g.\u0275\u0275elementStart(0,"ng-option",92),g.\u0275\u0275text(1),g.\u0275\u0275elementEnd()),2&He){const Ve=Dr.$implicit;g.\u0275\u0275propertyInterpolate("value",Ve.Values),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate(Ve.name)}}function wn(He,Dr){if(1&He&&(g.\u0275\u0275elementStart(0,"ng-option",92),g.\u0275\u0275text(1),g.\u0275\u0275elementEnd()),2&He){const Ve=Dr.$implicit;g.\u0275\u0275propertyInterpolate("value",Ve.Values),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate(Ve.name)}}function Ln(He,Dr){if(1&He&&g.\u0275\u0275element(0,"plotly-plot",93),2&He){const Ve=g.\u0275\u0275nextContext();g.\u0275\u0275property("config",Ve.salesconfig)("data",Ve.salesdata)("layout",Ve.saleslayout)}}function Qn(He,Dr){1&He&&(g.\u0275\u0275elementStart(0,"p",94),g.\u0275\u0275text(1),g.\u0275\u0275pipe(2,"translate"),g.\u0275\u0275elementEnd()),2&He&&(g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(2,1,"Dashboard.NoDatafound")))}function Nn(He,Dr){if(1&He&&(g.\u0275\u0275elementStart(0,"ng-option",92),g.\u0275\u0275text(1),g.\u0275\u0275elementEnd()),2&He){const Ve=Dr.$implicit;g.\u0275\u0275propertyInterpolate("value",Ve.Values),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate(Ve.name)}}function Zn(He,Dr){if(1&He&&(g.\u0275\u0275elementStart(0,"ng-option",92),g.\u0275\u0275text(1),g.\u0275\u0275elementEnd()),2&He){const Ve=Dr.$implicit;g.\u0275\u0275propertyInterpolate("value",Ve.Values),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate(Ve.name)}}function Bn(He,Dr){if(1&He&&g.\u0275\u0275element(0,"plotly-plot",93),2&He){const Ve=g.\u0275\u0275nextContext();g.\u0275\u0275property("config",Ve.config)("data",Ve.data)("layout",Ve.layout)}}function Wn(He,Dr){1&He&&(g.\u0275\u0275elementStart(0,"p",94),g.\u0275\u0275text(1),g.\u0275\u0275pipe(2,"translate"),g.\u0275\u0275elementEnd()),2&He&&(g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(2,1,"Dashboard.NoMonthlysalesfound")))}function wr(He,Dr){if(1&He&&(g.\u0275\u0275elementStart(0,"ng-option",92),g.\u0275\u0275text(1),g.\u0275\u0275elementEnd()),2&He){const Ve=Dr.$implicit;g.\u0275\u0275propertyInterpolate("value",Ve.vendorId),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate(Ve.firstName)}}function en(He,Dr){if(1&He&&(g.\u0275\u0275elementStart(0,"ng-option",92),g.\u0275\u0275text(1),g.\u0275\u0275elementEnd()),2&He){const Ve=Dr.$implicit;g.\u0275\u0275propertyInterpolate("value",Ve.Values),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate(Ve.name)}}function tn(He,Dr){if(1&He&&(g.\u0275\u0275elementStart(0,"div",95)(1,"div",96)(2,"h3"),g.\u0275\u0275text(3),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(4,"p"),g.\u0275\u0275text(5),g.\u0275\u0275pipe(6,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(7,"p"),g.\u0275\u0275text(8),g.\u0275\u0275pipe(9,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(10,"p"),g.\u0275\u0275text(11),g.\u0275\u0275pipe(12,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(13,"p"),g.\u0275\u0275text(14),g.\u0275\u0275pipe(15,"translate"),g.\u0275\u0275elementEnd()(),g.\u0275\u0275elementStart(16,"div",97),g.\u0275\u0275element(17,"ngx-charts-pie-chart",98),g.\u0275\u0275elementEnd()()),2&He){const Ve=g.\u0275\u0275nextContext();g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(null==Ve.vendorDetails?null:Ve.vendorDetails.companyName),g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate2("",g.\u0275\u0275pipeBind1(6,19,"Sales.Orders.Products")," -",null==Ve.vendorDetails?null:Ve.vendorDetails.productCount,""),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate2("",g.\u0275\u0275pipeBind1(9,21,"Dashboard.productsSold")," -",null==Ve.vendorDetails?null:Ve.vendorDetails.productSoldCount,""),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate2("",g.\u0275\u0275pipeBind1(12,23,"Dashboard.outofStock")," -",null==Ve.vendorDetails?null:Ve.vendorDetails.outOfStockCount,""),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate2("",g.\u0275\u0275pipeBind1(15,25,"Dashboard.delivered")," -",null==Ve.vendorDetails?null:Ve.vendorDetails.deliveryCount,""),g.\u0275\u0275advance(3),g.\u0275\u0275property("results",Ve.vendors)("view",Ve.view)("scheme",Ve.colorScheme)("gradient",Ve.gradient)("legend",!1)("legendPosition",Ve.legendPosition)("labels",Ve.showLabels)("doughnut",Ve.isDoughnut)("trimLabels",!1)("arcWidth",-.4)}}function gn(He,Dr){1&He&&(g.\u0275\u0275elementStart(0,"div",94),g.\u0275\u0275text(1),g.\u0275\u0275pipe(2,"translate"),g.\u0275\u0275elementEnd()),2&He&&(g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(2,1,"Dashboard.NoDatafound")))}function Fn(He,Dr){if(1&He){const Ve=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"p",99)(1,"input",100),g.\u0275\u0275listener("ngModelChange",function(ir){return g.\u0275\u0275restoreView(Ve).$implicit.checked=ir})("change",function(ir){const Zr=g.\u0275\u0275restoreView(Ve),yn=Zr.$implicit,Kn=Zr.index;return g.\u0275\u0275nextContext().checkboxweekly(ir,yn,Kn)}),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(2,"span",101),g.\u0275\u0275text(3),g.\u0275\u0275elementEnd()()}if(2&He){const Ve=Dr.$implicit;g.\u0275\u0275advance(1),g.\u0275\u0275property("ngModel",Ve.checked),g.\u0275\u0275advance(1),g.\u0275\u0275propertyInterpolate("ngbTooltip",Ve.productName),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate1("",Ve.productName," ")}}function Tn(He,Dr){if(1&He&&g.\u0275\u0275element(0,"canvas",102),2&He){const Ve=g.\u0275\u0275nextContext();g.\u0275\u0275property("datasets",Ve.toptenweeklysalesdata)("labels",Ve.demoradarChartLabels)("type","radar")("options",Ve.optionsradar)("legend",!1)}}function Mn(He,Dr){1&He&&(g.\u0275\u0275elementStart(0,"div",94),g.\u0275\u0275text(1),g.\u0275\u0275pipe(2,"translate"),g.\u0275\u0275elementEnd()),2&He&&(g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(2,1,"Dashboard.NoDataFound")))}function In(He,Dr){if(1&He&&(g.\u0275\u0275elementStart(0,"ng-option",92),g.\u0275\u0275text(1),g.\u0275\u0275elementEnd()),2&He){const Ve=Dr.$implicit;g.\u0275\u0275propertyInterpolate("value",Ve.Values),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate(Ve.name)}}function Gn(He,Dr){1&He&&g.\u0275\u0275element(0,"span",103)}function ua(He,Dr){if(1&He&&g.\u0275\u0275element(0,"plotly-plot",104),2&He){const Ve=g.\u0275\u0275nextContext();g.\u0275\u0275property("data",Ve.data1)("layout",Ve.layout1)("config",Ve.config1)}}function ka(He,Dr){1&He&&(g.\u0275\u0275elementStart(0,"p",94),g.\u0275\u0275text(1),g.\u0275\u0275pipe(2,"translate"),g.\u0275\u0275elementEnd()),2&He&&(g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(2,1,"Dashboard.NoDatafound")))}const Tr=[{path:"",component:(()=>{class He{constructor(Ve,je,ir,Zr,yn,Kn,ea,$n){this.dashboardSandbox=Ve,this.router=je,this.configService=ir,this.titleService=Zr,this.layoutSandbox=yn,this.sellerSandbox=Kn,this.toastr=ea,this.translate=$n,this.view=[300,300],this.imageURL=this.configService.getImageUrl(),this.showXAxis=!0,this.showYAxis=!0,this.gradient=!1,this.showLegend=!0,this.topSellingImage={},this.recentSellingImage={},this.colorScheme={domain:["#704FC4","#4B852C","#B67A3D","#5B6FC8","#25706F"]},this.topProducts="4",this.averagevalue="4",this.newcustomerscount="4",this.totalorderscount="4",this.totalRevenues="4",this.averageConvertionRatios="4",this.customersVisitmonth="3",this.customersVisityear="2020",this.year=[],this.transactionlistyear="2021",this.vendors=[],this.vendorsyear="2020",this.vendorID=null,this.vendorDetails={},this.top10weeklyproductlist=[],this.xvalue=[],this.yvalue=[],this.title="demo",this.xvalue1=[],this.yvalue1=["Jan","Feb","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],this.title1="demo",this.showLabels=!0,this.isDoughnut=!0,this.legendPosition="below",this.salesgraphyear=2021,this.salesgraphmonth="8",this.salesxvalue=[],this.salesyvalue=[],this.resultValue=[],this.toptenweeklysalesdata=[],this.top10weeklycheckeddata=[],this.demoradarChartLabels=["SUN","MON","TUE","WED","THU","FRI","SAT"],this.demoradarChartData=[{data:[46,46,46,46,46,46],label:"Company A"},{data:[48,48,48,48,48,48],label:"Company B"},{data:[52,52,52,52,52,52],label:"Company c"},{data:[30,30,30,30,30,30],label:"Company D"},{data:[30,30,30,30,30,30],label:"Company E"}],this.radarChartType="radar",this.optionsradar={responsive:!1,maintainAspectRatio:!1,legend:{position:"left",responsive:!0,maintainAspectRatio:!0,labels:{boxWidth:15}},scale:{pointLabels:{fontStyle:"bold"}}},this.subscriptions=[],this.currentDate={year:(new Date).getFullYear(),month:(new Date).getMonth()+1,day:(new Date).getDate()},this.salesgraphyear=this.currentDate.year.toString(),this.customersVisityear=this.currentDate.year.toString(),this.transactionlistyear=this.currentDate.year.toString(),this.vendorsyear=this.currentDate.year.toString(),this.salesgraphmonth=this.currentDate.month.toString(),this.customersVisitmonth=this.currentDate.month.toString();for(let fa=2010;fa<=this.currentDate.year;fa++)this.year.push({name:fa.toString(),Values:fa.toString()});this.month=[{name:"Jan",Values:"1"},{name:"Feb",Values:"2"},{name:"Mar",Values:"3"},{name:"Apr",Values:"4"},{name:"May",Values:"5"},{name:"June",Values:"6"},{name:"July",Values:"7"},{name:"Aug",Values:"8"},{name:"Sep",Values:"9"},{name:"Oct",Values:"10"},{name:"Nov",Values:"11"},{name:"Dec",Values:"12"}]}ngOnInit(){this.dashboardSandbox.getDashboardCount(),this.titleService.setTitle("Dashboard"),this.dashboardSandbox.getRecentVisitorList(),this.dashboardSandbox.getRecentSellingProductList(),this.dashboardSandbox.getItemPerPageCount(),this.productUrl=re.N.productUrl,this.averageOrderValue(),this.getTopSellingProductList(),this.totalRevenue(),this.totalOrders(),this.newCustomers(),this.averageConversionRatio(),this.getSalesOrderList(),this.transactionValues(),this.sellerList(),this.salesgraph(),this.toptenweeklyproducts()}viewProduct(Ve){window.open(this.productUrl+"products/productdetails/"+Ve)}viewOrder(Ve){this.router.navigate(["/sales/orders/vieworder",Ve])}topSellingImageLoading(Ve){this.topSellingImage[Ve]=!0}recentSellingImageLoading(Ve){this.recentSellingImage[Ve]=!0}averageOrderValue(){let Ve={limit:10,offset:0,count:0};Ve.duration=this.averagevalue,this.dashboardSandbox.averageOrderValue(Ve)}getTopSellingProductList(){let Ve={limit:10,offset:0,count:0};Ve.duration=this.topProducts,this.dashboardSandbox.getTopSellingProductList(Ve),this.subscriptions.push(this.dashboardSandbox.topSellingProducts$.subscribe(je=>{})),Ve.count=!0,this.dashboardSandbox.getTopSellingProductListCount(Ve)}totalRevenue(){let Ve={};Ve.duration=this.totalRevenues,this.dashboardSandbox.totalRevenue(Ve)}totalOrders(){let Ve={};Ve.duration=this.totalorderscount,this.dashboardSandbox.totalOrders(Ve)}newCustomers(){let Ve={};Ve.duration=this.newcustomerscount,this.dashboardSandbox.newCustomers(Ve)}averageConversionRatio(){let Ve={};Ve.duration=this.averageConvertionRatios,this.dashboardSandbox.averageConversionRatio(Ve)}getSalesOrderList(){this.xvalue=[],this.yvalue=[],this.data=[];let Ve={};Ve.month=this.customersVisitmonth,Ve.year=this.customersVisityear,this.dashboardSandbox.getSalesOrderList(Ve),this.subscriptions.push(this.dashboardSandbox.salesOrderList$.subscribe(je=>{je&&0===this.xvalue.length&&0===this.yvalue.length&&(this.customervisits=je,this.customervisits.forEach(ir=>{this.xvalue.push(ir.dayOfMonth),this.yvalue.push(JSON.parse(ir.visitCount))}))})),this.trace1={type:"bar",x:this.xvalue,y:this.yvalue,marker:{color:"blue"}},this.data=[this.trace1],this.layout={height:300,autosize:!0,xaxis:{title:"Days",autorange:!0,showgrid:!1,zeroline:!1,showline:!0,showticklabels:!0},yaxis:{title:"Customer Visits",autorange:!0,showgrid:!1,zeroline:!1,showline:!0},annotations:[{xref:"x1",yref:"y1",x:[1,2,3,4],y:[1,2,3,4],text:"",font:{family:"Arial",size:12,color:"rgb(50, 171, 96)"}}],showticklabels:!1,margin:{l:40,r:20,b:40,t:20,pad:4}},this.config={responsive:!0,displayModeBar:!1}}transactionValues(){this.xvalue1=[],this.layout1={},this.data1=[],this.yvalue1=[];let je={};je.year=this.transactionlistyear,this.dashboardSandbox.transactionValues(je),this.resultValue=[],this.subscriptions.push(this.dashboardSandbox.transactionValues$.subscribe(ir=>{ir&&0===this.xvalue1.length&&(this.transactionslist=ir,this.transactionslist.forEach(Zr=>{Zr&&(this.xvalue1.push(JSON.parse(Zr.ordercount)),this.yvalue1.push(function Ve(ir){return["January","February","March","April","May","June","July","August","September","October","November","December"][ir-1]}(Zr.month)),this.resultValue.push(Zr.ordercount+", $ "+Zr.orderAmount))}),this.layout1={height:300,autosize:!0,xaxis:{showgrid:!1,zeroline:!1,showline:!1,showticklabels:!1,fixedrange:!0},yaxis:{showgrid:!1,zeroline:!1,showline:!1,showticklabels:!0,fixedrange:!0},barmode:"stack",annotations:[{xref:"paper",yref:"paper",x:this.xvalue1,y:[""],text:"",font:{family:"Arial",size:12,color:"blue"}}],margin:{l:90,r:60,b:40,t:10,pad:10},bargap:.83},this.layout1.annotations=[],this.config1={responsive:!0,displayModeBar:!1},this.xvalue1.forEach((Zr,yn)=>{let Kn={};Kn={xref:"x1",yref:"y1",x:this.xvalue1[yn],y:yn,text:Array(30).fill("\xa0").join("")+this.resultValue[yn],font:{family:"Arial",size:12,color:"black"},showarrow:!1},this.layout1.annotations.push(Kn)}))})),this.trace11={type:"bar",x:this.xvalue1.reverse(),y:this.yvalue1.reverse(),orientation:"h",text:this.yvalue1.map(String),constrainoutsidetext:!0,textposition:"top center",insidetextanchor:"start",mode:"markers+text",marker:{color:"#14BAE1"}},this.data1=[this.trace11]}sellerList(){this.sellerSandbox.sellerList({limit:0,offset:0,status:1,count:0}),this.subscriptions.push(this.sellerSandbox.getSellerList$.subscribe(je=>{je&&(this.vendorList=je,this.vendorList=je.filter(ir=>1==ir.approvalFlag&&null!=ir.companyName),this.vendorID=this.vendorList[0].vendorId.toString(),this.vendor())}))}vendor(){let Ve={};Ve.vendorId=this.vendorID,Ve.duration=this.vendorsyear,this.dashboardSandbox.vendor(Ve),this.subscriptions.push(this.dashboardSandbox.vendor$.subscribe(je=>{(null==je?void 0:je.array)&&(this.vendors=je.array,this.vendorDetails=je.val)}))}salesgraph(){this.salesxvalue=[],this.saleslayout={},this.salesyvalue=[],this.salesdata=[];let Ve={};Ve.year=this.salesgraphyear,Ve.month=this.salesgraphmonth,this.dashboardSandbox.salesgraph(Ve),this.subscriptions.push(this.dashboardSandbox.salesgraph$.subscribe(je=>{je&&0===this.salesxvalue.length&&0===this.salesyvalue.length&&(this.salesgraphdata=je,this.salesgraphdata.forEach(ir=>{this.salesxvalue.push(ir.dayOfMonth),this.salesyvalue.push(JSON.parse(ir.productCount))}))})),this.salestrace={type:"scatter",x:this.salesxvalue,y:this.salesyvalue,mode:"lines",marker:{color:"#FDA677"}},this.salesdata=[this.salestrace],this.saleslayout={height:300,xaxis:{title:"Days",autorange:!0,showgrid:!1,zeroline:!1,showline:!0,showticklabels:!0},yaxis:{title:"Products Sold",autorange:!0,showgrid:!1,zeroline:!1,showline:!0},annotations:[{xref:"x1",yref:"y1",x:[1,2,3,4],y:[1,2,3,4],text:"",font:{family:"Arial",size:12,color:"rgb(50, 171, 96)"}}],showticklabels:!1,margin:{l:40,r:20,b:40,t:20,pad:4}},this.salesconfig={responsive:!0,displayModeBar:!1}}toptenweeklyproducts(){this.dashboardSandbox.toptenweeklyproducts({limit:10,offset:0,count:0,duration:2}),this.subscriptions.push(this.dashboardSandbox.toptenweeklyproducts$.subscribe(je=>{if(je&&je.length>0){let ir=je.map(Zr=>Object.assign(Object.assign({},Zr),{checked:!1}));this.top10weeklyproductlist=ir,this.top10weeklyproductlist.forEach((Zr,yn)=>{yn<3&&(Zr.checked=!0)}),this.top10weeklyproductdatalist=this.top10weeklyproductlist.filter(Zr=>Zr.checked),this.top10weeklycheckeddata=this.top10weeklyproductdatalist.filter(Zr=>Zr.productId),this.weeklysalesproduct()}}))}checkboxweekly(Ve,je){if(1==Ve.target.checked){if(this.top10weeklyproductdatalist.length>2)return this.translateName=this.translate.instant("reports.Enteranyvaluetofilter"),this.toastr.error("this.translateName"),this.top10weeklyproductlist.forEach(ir=>{ir.id==je.id&&(je.checked=!1)}),Ve.target.checked=!1;this.top10weeklyproductdatalist=this.top10weeklyproductlist.filter(ir=>{if(!0===ir.checked)return ir})}else 0==Ve.target.checked&&this.top10weeklyproductdatalist.forEach((ir,Zr)=>{ir.id==je.id&&this.top10weeklyproductdatalist.splice(Zr,1)});this.weeklysalesproduct()}weeklysalesproduct(){let Ve={};this.top10weeklyproductdatalist=this.top10weeklyproductlist.filter(je=>je.checked),this.top10weeklycheckeddata=this.top10weeklyproductdatalist.map(je=>je.productId),Ve.productId=this.top10weeklycheckeddata,this.dashboardSandbox.weeklysalesproduct(Ve),this.subscriptions.push(this.dashboardSandbox.weeklysalesproduct$.subscribe(je=>{je&&(this.toptenweeklysalesdata=je.map((ir,Zr)=>{let yn={};return yn.label=ir.productName,yn.data={},yn.data=ir.value.map(Kn=>Kn.value),yn}))}))}ngOnDestroy(){this.subscriptions.forEach(Ve=>Ve.unsubscribe())}}return He.\u0275fac=function(Ve){return new(Ve||He)(g.\u0275\u0275directiveInject(Pe),g.\u0275\u0275directiveInject(ce.F0),g.\u0275\u0275directiveInject(ve.E),g.\u0275\u0275directiveInject(be.Dx),g.\u0275\u0275directiveInject(Ae.b),g.\u0275\u0275directiveInject(Te.A),g.\u0275\u0275directiveInject(Re._W),g.\u0275\u0275directiveInject(Ie.sK))},He.\u0275cmp=g.\u0275\u0275defineComponent({type:He,selectors:[["app-dashboard"]],decls:298,vars:299,consts:[[1,"dashboard-wrapper"],[1,"dash-topper","flex"],[1,"dast-col"],[1,"dastc-top","flex"],["name","","id","",1,"ng-sel-width",3,"searchable","clearable","ngModel","ngModelChange","change"],["value","1"],["value","2"],["value","3"],["value","4"],[1,"flex","dastc-vtm"],[1,"dastcbtm-ig"],["src","assets/img/total-revenue.png","alt",""],["class","spinner-border spinner-border-sm ","style","margin-left:20px","aria-hidden","true",4,"ngIf"],["name","","id","",1,"ng-sel-width",3,"searchable","clearable","ngModel","change","ngModelChange"],["src","assets/img/total-orders.png","alt",""],["src","assets/img/new-customers.png","alt",""],[2,"margin-top","8px"],[1,"flex","dastc-vtm",2,"margin-top","23px"],["src","assets/img/total-customers.png","alt",""],[1,"dashboard-main","flex"],[1,"dm-lft"],[1,"dml-top","flex"],[1,"dmlt-roe","flex"],[1,"dmlt-lft-img"],["src","assets/img/top-performing.png","alt",""],[1,"dmlt-lft-cont"],["name","","id","",1,"ng-sel-width",2,"margin-left","7px",3,"searchable","clearable","ngModel","ngModelChange","change"],[1,"dmlt-prd-list"],["class","spinner-border","style","position:absolute; margin-left: 130px; margin-top: 110px;","aria-hidden","true",4,"ngIf"],["class","dmltprdlist-row flex",4,"ngFor","ngForOf"],["style","font-size: 16px;width: 139px;margin: auto;margin-top: 31%;",4,"ngIf"],[1,"dml-btm"],[1,"dml-btm-row","flex"],["class","spinner-border spinner-border-sm ","style","margin-left:120px;margin:auto","aria-hidden","true",4,"ngIf"],["class","dml-btm-col flex",4,"ngFor","ngForOf"],[1,"dm-rht"],[1,"dmr-top","flex"],[1,"dmrt-col"],["class","spinner-border spinner-border-sm ","aria-hidden","true",4,"ngIf"],[1,"flex","dmrtc-rw"],[1,"dmr-btm","flex"],[1,"dmr-btm-lft"],[1,"tabset"],["type","radio","name","tabset","id","tab1","aria-controls","marzen","checked","",3,"click"],["for","tab1"],["type","radio","name","tabset","id","tab2","aria-controls","rauchbier",3,"click"],["for","tab2"],["type","radio","name","tabset","id","tab3","aria-controls","dunkles",3,"click"],["for","tab3"],["type","radio","name","tabset","id","tab4","aria-controls","sales",3,"click"],["for","tab4"],[1,"tab-panels"],["id","marzen",1,"tab-panel"],[1,"dmrbtop","flex"],[3,"value",4,"ngFor","ngForOf"],[1,"spinner-wrapper"],[3,"isShow"],[3,"config","data","layout",4,"ngIf"],["class","no-data",4,"ngIf"],["id","rauchbier",1,"tab-panel"],["id","dunkles",1,"tab-panel","dmrtab-vendor"],["name","","id","","placeholder","Choose Vendor",1,"ng-sel-width",3,"searchable","clearable","ngModel","ngModelChange","change"],["class","flex dmrtabvenrow",4,"ngIf"],["id","sales",1,"tab-panel","dmrb-sales"],[1,"rad-chart"],[1,"rad-chart-left"],["class","checkbox-data","style","display: flex;",4,"ngFor","ngForOf"],[1,"rad-chart-right"],["baseChart","","width","300","height","300",3,"datasets","labels","type","options","legend",4,"ngIf"],[1,"dmr-btm-rht"],["class","spinner-border","style","position:absolute; margin-left: 150px; margin-top: 110px;","aria-hidden","true",4,"ngIf"],[3,"data","layout","config",4,"ngIf"],["aria-hidden","true",1,"spinner-border","spinner-border-sm",2,"margin-left","20px"],["aria-hidden","true",1,"spinner-border",2,"position","absolute","margin-left","130px","margin-top","110px"],[1,"dmltprdlist-row","flex"],[1,"dmltprdlist-lft","flex"],[1,"dmltprdlist-lft-img"],["onError","this.src='assets/error-images/Load-icon-Products.png';",3,"src","alt","hidden","load",4,"ngIf"],["src","./assets/error-images/Load-icon-Products.png","alt","error-img",3,"hidden"],[1,"dmltprdlist-lft-cont"],["style","margin-left: -2px",4,"ngIf"],[4,"ngIf"],["onError","this.src='assets/error-images/Load-icon-Products.png';",3,"src","alt","hidden","load"],[2,"margin-left","-2px"],[2,"font-size","16px","width","139px","margin","auto","margin-top","31%"],["aria-hidden","true",1,"spinner-border","spinner-border-sm",2,"margin-left","120px","margin","auto"],[1,"dml-btm-col","flex"],[1,"dmlbtmc-img"],["onError","this.src='assets/error-images/Load-icon-Products.png';",2,"border-radius","50%","width","24px","height","24px",3,"src"],[1,"dmlbtmc-content"],[2,"overflow","hidden"],["aria-hidden","true",1,"spinner-border","spinner-border-sm"],[3,"value"],[3,"config","data","layout"],[1,"no-data"],[1,"flex","dmrtabvenrow"],[1,"dmrtabvenlft"],[1,"dashboard-card-content"],[3,"results","view","scheme","gradient","legend","legendPosition","labels","doughnut","trimLabels","arcWidth"],[1,"checkbox-data",2,"display","flex"],["type","checkbox",2,"cursor","pointer","position","relative","top","7px",3,"ngModel","ngModelChange","change"],["placement","top-left",1,"product-name",3,"ngbTooltip"],["baseChart","","width","300","height","300",3,"datasets","labels","type","options","legend"],["aria-hidden","true",1,"spinner-border",2,"position","absolute","margin-left","150px","margin-top","110px"],[3,"data","layout","config"]],template:function(Ve,je){if(1&Ve&&(g.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4"),g.\u0275\u0275text(5),g.\u0275\u0275pipe(6,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(7,"ng-select",4),g.\u0275\u0275listener("ngModelChange",function(Zr){return je.totalRevenues=Zr})("change",function(){return je.totalRevenue()}),g.\u0275\u0275elementStart(8,"ng-option",5),g.\u0275\u0275text(9),g.\u0275\u0275pipe(10,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(11,"ng-option",6),g.\u0275\u0275text(12),g.\u0275\u0275pipe(13,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(14,"ng-option",7),g.\u0275\u0275text(15),g.\u0275\u0275pipe(16,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(17,"ng-option",8),g.\u0275\u0275text(18),g.\u0275\u0275pipe(19,"translate"),g.\u0275\u0275elementEnd()()(),g.\u0275\u0275element(20,"p"),g.\u0275\u0275elementStart(21,"div",9)(22,"span",10),g.\u0275\u0275element(23,"img",11),g.\u0275\u0275elementEnd(),g.\u0275\u0275template(24,yr,1,0,"span",12),g.\u0275\u0275pipe(25,"async"),g.\u0275\u0275elementStart(26,"h2"),g.\u0275\u0275text(27),g.\u0275\u0275pipe(28,"async"),g.\u0275\u0275pipe(29,"async"),g.\u0275\u0275pipe(30,"number"),g.\u0275\u0275pipe(31,"async"),g.\u0275\u0275elementEnd()()(),g.\u0275\u0275elementStart(32,"div",2)(33,"div",3)(34,"h4"),g.\u0275\u0275text(35),g.\u0275\u0275pipe(36,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(37,"ng-select",13),g.\u0275\u0275listener("change",function(){return je.totalOrders()})("ngModelChange",function(Zr){return je.totalorderscount=Zr}),g.\u0275\u0275elementStart(38,"ng-option",5),g.\u0275\u0275text(39),g.\u0275\u0275pipe(40,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(41,"ng-option",6),g.\u0275\u0275text(42),g.\u0275\u0275pipe(43,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(44,"ng-option",7),g.\u0275\u0275text(45),g.\u0275\u0275pipe(46,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(47,"ng-option",8),g.\u0275\u0275text(48),g.\u0275\u0275pipe(49,"translate"),g.\u0275\u0275elementEnd()()(),g.\u0275\u0275elementStart(50,"div",9)(51,"span",10),g.\u0275\u0275element(52,"img",14),g.\u0275\u0275elementEnd(),g.\u0275\u0275template(53,dr,1,0,"span",12),g.\u0275\u0275pipe(54,"async"),g.\u0275\u0275elementStart(55,"h2"),g.\u0275\u0275text(56),g.\u0275\u0275pipe(57,"async"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(58,"h5"),g.\u0275\u0275text(59),g.\u0275\u0275pipe(60,"async"),g.\u0275\u0275pipe(61,"translate"),g.\u0275\u0275elementEnd()()(),g.\u0275\u0275elementStart(62,"div",2)(63,"div",3)(64,"h4"),g.\u0275\u0275text(65),g.\u0275\u0275pipe(66,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(67,"ng-select",4),g.\u0275\u0275listener("ngModelChange",function(Zr){return je.newcustomerscount=Zr})("change",function(){return je.newCustomers()}),g.\u0275\u0275elementStart(68,"ng-option",5),g.\u0275\u0275text(69),g.\u0275\u0275pipe(70,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(71,"ng-option",6),g.\u0275\u0275text(72),g.\u0275\u0275pipe(73,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(74,"ng-option",7),g.\u0275\u0275text(75),g.\u0275\u0275pipe(76,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(77,"ng-option",8),g.\u0275\u0275text(78),g.\u0275\u0275pipe(79,"translate"),g.\u0275\u0275elementEnd()()(),g.\u0275\u0275elementStart(80,"div",9)(81,"span",10),g.\u0275\u0275element(82,"img",15),g.\u0275\u0275elementEnd(),g.\u0275\u0275template(83,Pr,1,0,"span",12),g.\u0275\u0275pipe(84,"async"),g.\u0275\u0275elementStart(85,"h2"),g.\u0275\u0275text(86),g.\u0275\u0275pipe(87,"async"),g.\u0275\u0275elementEnd()()(),g.\u0275\u0275elementStart(88,"div",2)(89,"div",3)(90,"h4",16),g.\u0275\u0275text(91),g.\u0275\u0275pipe(92,"translate"),g.\u0275\u0275elementEnd()(),g.\u0275\u0275elementStart(93,"div",17)(94,"span",10),g.\u0275\u0275element(95,"img",18),g.\u0275\u0275elementEnd(),g.\u0275\u0275template(96,Jr,1,0,"span",12),g.\u0275\u0275pipe(97,"async"),g.\u0275\u0275elementStart(98,"h2"),g.\u0275\u0275text(99),g.\u0275\u0275pipe(100,"async"),g.\u0275\u0275elementEnd()()()(),g.\u0275\u0275elementStart(101,"div",19)(102,"div",20)(103,"div",21)(104,"div",22)(105,"div",23),g.\u0275\u0275element(106,"img",24),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(107,"div",25)(108,"h3"),g.\u0275\u0275text(109),g.\u0275\u0275pipe(110,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(111,"h4"),g.\u0275\u0275text(112),g.\u0275\u0275pipe(113,"async"),g.\u0275\u0275pipe(114,"translate"),g.\u0275\u0275elementEnd()(),g.\u0275\u0275elementStart(115,"ng-select",26),g.\u0275\u0275listener("ngModelChange",function(Zr){return je.topProducts=Zr})("change",function(){return je.getTopSellingProductList()}),g.\u0275\u0275elementStart(116,"ng-option",5),g.\u0275\u0275text(117),g.\u0275\u0275pipe(118,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(119,"ng-option",6),g.\u0275\u0275text(120),g.\u0275\u0275pipe(121,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(122,"ng-option",7),g.\u0275\u0275text(123),g.\u0275\u0275pipe(124,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(125,"ng-option",8),g.\u0275\u0275text(126),g.\u0275\u0275pipe(127,"translate"),g.\u0275\u0275elementEnd()()(),g.\u0275\u0275elementStart(128,"div",27),g.\u0275\u0275template(129,Mr,1,0,"span",28),g.\u0275\u0275pipe(130,"async"),g.\u0275\u0275template(131,Dn,14,13,"div",29),g.\u0275\u0275pipe(132,"async"),g.\u0275\u0275template(133,hn,3,3,"h2",30),g.\u0275\u0275pipe(134,"async"),g.\u0275\u0275elementEnd()(),g.\u0275\u0275elementStart(135,"div",31)(136,"h3"),g.\u0275\u0275text(137),g.\u0275\u0275pipe(138,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(139,"div",32),g.\u0275\u0275template(140,hr,1,0,"span",33),g.\u0275\u0275pipe(141,"async"),g.\u0275\u0275template(142,Ar,10,4,"div",34),g.\u0275\u0275pipe(143,"async"),g.\u0275\u0275elementEnd()()(),g.\u0275\u0275elementStart(144,"div",35)(145,"div",36)(146,"div",37)(147,"h4"),g.\u0275\u0275text(148),g.\u0275\u0275pipe(149,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275template(150,Br,1,0,"span",38),g.\u0275\u0275pipe(151,"async"),g.\u0275\u0275elementStart(152,"div",39)(153,"h2"),g.\u0275\u0275text(154),g.\u0275\u0275pipe(155,"async"),g.\u0275\u0275elementEnd()()(),g.\u0275\u0275elementStart(156,"div",37)(157,"h4"),g.\u0275\u0275text(158),g.\u0275\u0275pipe(159,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275template(160,Or,1,0,"span",38),g.\u0275\u0275pipe(161,"async"),g.\u0275\u0275elementStart(162,"div",39)(163,"h2"),g.\u0275\u0275text(164),g.\u0275\u0275pipe(165,"async"),g.\u0275\u0275elementEnd()()(),g.\u0275\u0275elementStart(166,"div",37)(167,"h4"),g.\u0275\u0275text(168),g.\u0275\u0275pipe(169,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(170,"div",39),g.\u0275\u0275template(171,an,1,0,"span",12),g.\u0275\u0275pipe(172,"async"),g.\u0275\u0275elementStart(173,"h2"),g.\u0275\u0275text(174),g.\u0275\u0275pipe(175,"currencysymbol"),g.\u0275\u0275pipe(176,"async"),g.\u0275\u0275pipe(177,"async"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(178,"ng-select",13),g.\u0275\u0275listener("change",function(){return je.averageOrderValue()})("ngModelChange",function(Zr){return je.averagevalue=Zr}),g.\u0275\u0275elementStart(179,"ng-option",5),g.\u0275\u0275text(180),g.\u0275\u0275pipe(181,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(182,"ng-option",6),g.\u0275\u0275text(183),g.\u0275\u0275pipe(184,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(185,"ng-option",7),g.\u0275\u0275text(186),g.\u0275\u0275pipe(187,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(188,"ng-option",8),g.\u0275\u0275text(189),g.\u0275\u0275pipe(190,"translate"),g.\u0275\u0275elementEnd()()()(),g.\u0275\u0275elementStart(191,"div",37)(192,"h4"),g.\u0275\u0275text(193),g.\u0275\u0275pipe(194,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(195,"div",39),g.\u0275\u0275template(196,dn,1,0,"span",12),g.\u0275\u0275pipe(197,"async"),g.\u0275\u0275elementStart(198,"h2"),g.\u0275\u0275text(199),g.\u0275\u0275pipe(200,"async"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(201,"ng-select",4),g.\u0275\u0275listener("ngModelChange",function(Zr){return je.averageConvertionRatios=Zr})("change",function(){return je.averageConversionRatio()}),g.\u0275\u0275elementStart(202,"ng-option",5),g.\u0275\u0275text(203),g.\u0275\u0275pipe(204,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(205,"ng-option",6),g.\u0275\u0275text(206),g.\u0275\u0275pipe(207,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(208,"ng-option",7),g.\u0275\u0275text(209),g.\u0275\u0275pipe(210,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(211,"ng-option",8),g.\u0275\u0275text(212),g.\u0275\u0275pipe(213,"translate"),g.\u0275\u0275elementEnd()()()()(),g.\u0275\u0275elementStart(214,"div",40)(215,"div",41)(216,"div",42)(217,"input",43),g.\u0275\u0275listener("click",function(){return je.salesgraph()}),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(218,"label",44),g.\u0275\u0275text(219),g.\u0275\u0275pipe(220,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(221,"input",45),g.\u0275\u0275listener("click",function(){return je.getSalesOrderList()}),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(222,"label",46),g.\u0275\u0275text(223),g.\u0275\u0275pipe(224,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(225,"input",47),g.\u0275\u0275listener("click",function(){return je.vendor()}),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(226,"label",48),g.\u0275\u0275text(227),g.\u0275\u0275pipe(228,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(229,"input",49),g.\u0275\u0275listener("click",function(){return je.weeklysalesproduct()}),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(230,"label",50),g.\u0275\u0275text(231),g.\u0275\u0275pipe(232,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(233,"div",51)(234,"section",52)(235,"div",53)(236,"ng-select",4),g.\u0275\u0275listener("ngModelChange",function(Zr){return je.salesgraphyear=Zr})("change",function(){return je.salesgraph()}),g.\u0275\u0275template(237,pn,2,2,"ng-option",54),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(238,"ng-select",4),g.\u0275\u0275listener("ngModelChange",function(Zr){return je.salesgraphmonth=Zr})("change",function(){return je.salesgraph()}),g.\u0275\u0275template(239,wn,2,2,"ng-option",54),g.\u0275\u0275elementEnd()(),g.\u0275\u0275elementStart(240,"div",55),g.\u0275\u0275element(241,"app-global-loader",56),g.\u0275\u0275pipe(242,"async"),g.\u0275\u0275elementEnd(),g.\u0275\u0275template(243,Ln,1,3,"plotly-plot",57),g.\u0275\u0275pipe(244,"async"),g.\u0275\u0275pipe(245,"async"),g.\u0275\u0275template(246,Qn,3,3,"p",58),g.\u0275\u0275pipe(247,"async"),g.\u0275\u0275pipe(248,"async"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(249,"section",59)(250,"div",53)(251,"ng-select",4),g.\u0275\u0275listener("ngModelChange",function(Zr){return je.customersVisityear=Zr})("change",function(){return je.getSalesOrderList()}),g.\u0275\u0275template(252,Nn,2,2,"ng-option",54),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(253,"ng-select",4),g.\u0275\u0275listener("ngModelChange",function(Zr){return je.customersVisitmonth=Zr})("change",function(){return je.getSalesOrderList()}),g.\u0275\u0275template(254,Zn,2,2,"ng-option",54),g.\u0275\u0275elementEnd()(),g.\u0275\u0275elementStart(255,"div",55),g.\u0275\u0275element(256,"app-global-loader",56),g.\u0275\u0275pipe(257,"async"),g.\u0275\u0275elementEnd(),g.\u0275\u0275template(258,Bn,1,3,"plotly-plot",57),g.\u0275\u0275pipe(259,"async"),g.\u0275\u0275pipe(260,"async"),g.\u0275\u0275template(261,Wn,3,3,"p",58),g.\u0275\u0275pipe(262,"async"),g.\u0275\u0275pipe(263,"async"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(264,"section",60)(265,"div",53)(266,"ng-select",61),g.\u0275\u0275listener("ngModelChange",function(Zr){return je.vendorID=Zr})("change",function(){return je.vendor()}),g.\u0275\u0275template(267,wr,2,2,"ng-option",54),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(268,"ng-select",4),g.\u0275\u0275listener("ngModelChange",function(Zr){return je.vendorsyear=Zr})("change",function(){return je.vendor()}),g.\u0275\u0275template(269,en,2,2,"ng-option",54),g.\u0275\u0275elementEnd()(),g.\u0275\u0275elementStart(270,"div",55),g.\u0275\u0275element(271,"app-global-loader",56),g.\u0275\u0275pipe(272,"async"),g.\u0275\u0275elementEnd(),g.\u0275\u0275template(273,tn,18,27,"div",62),g.\u0275\u0275pipe(274,"async"),g.\u0275\u0275template(275,gn,3,3,"div",58),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(276,"section",63)(277,"div",64)(278,"div",65),g.\u0275\u0275template(279,Fn,4,3,"p",66),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(280,"div",67),g.\u0275\u0275template(281,Tn,1,5,"canvas",68),g.\u0275\u0275elementEnd()(),g.\u0275\u0275template(282,Mn,3,3,"div",58),g.\u0275\u0275elementEnd()()()(),g.\u0275\u0275elementStart(283,"div",69)(284,"div",53)(285,"h3"),g.\u0275\u0275text(286),g.\u0275\u0275pipe(287,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(288,"ng-select",4),g.\u0275\u0275listener("ngModelChange",function(Zr){return je.transactionlistyear=Zr})("change",function(){return je.transactionValues()}),g.\u0275\u0275template(289,In,2,2,"ng-option",54),g.\u0275\u0275elementEnd()(),g.\u0275\u0275template(290,Gn,1,0,"span",70),g.\u0275\u0275pipe(291,"async"),g.\u0275\u0275template(292,ua,1,3,"plotly-plot",71),g.\u0275\u0275pipe(293,"async"),g.\u0275\u0275pipe(294,"async"),g.\u0275\u0275template(295,ka,3,3,"p",58),g.\u0275\u0275pipe(296,"async"),g.\u0275\u0275pipe(297,"async"),g.\u0275\u0275elementEnd()()()()()),2&Ve){let ir,Zr;g.\u0275\u0275advance(5),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(6,125,"Dashboard.totalRevenue")),g.\u0275\u0275advance(2),g.\u0275\u0275property("searchable",!1)("clearable",!1)("ngModel",je.totalRevenues),g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(10,127,"Dashboard.today")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(13,129,"Dashboard.thisWeek")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(16,131,"Dashboard.thisMonth")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(19,133,"Dashboard.thisYear")),g.\u0275\u0275advance(6),g.\u0275\u0275property("ngIf",g.\u0275\u0275pipeBind1(25,135,je.dashboardSandbox.totalRevenueLoading$)),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(28,137,je.dashboardSandbox.totalRevenue$).toString()<0?-1*g.\u0275\u0275pipeBind1(29,139,je.dashboardSandbox.totalRevenue$).toString():g.\u0275\u0275pipeBind2(30,141,g.\u0275\u0275pipeBind1(31,144,je.dashboardSandbox.totalRevenue$).toString(),"1.0-0")),g.\u0275\u0275advance(8),g.\u0275\u0275textInterpolate1("",g.\u0275\u0275pipeBind1(36,146,"Dashboard.totalOrders")," "),g.\u0275\u0275advance(2),g.\u0275\u0275property("searchable",!1)("clearable",!1)("ngModel",je.totalorderscount),g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(40,148,"Dashboard.today")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(43,150,"Dashboard.thisWeek")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(46,152,"Dashboard.thisMonth")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(49,154,"Dashboard.thisYear")),g.\u0275\u0275advance(5),g.\u0275\u0275property("ngIf",g.\u0275\u0275pipeBind1(54,156,je.dashboardSandbox.totalOrdersLoading$)),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(null==(ir=g.\u0275\u0275pipeBind1(57,158,je.dashboardSandbox.totalOrders$))?null:ir.ordersCount),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate2("",null==(Zr=g.\u0275\u0275pipeBind1(60,160,je.dashboardSandbox.totalOrders$))?null:Zr.vendorsCount," ",g.\u0275\u0275pipeBind1(61,162,"Dashboard.vendors"),""),g.\u0275\u0275advance(6),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(66,164,"Dashboard.newCustomers")),g.\u0275\u0275advance(2),g.\u0275\u0275property("searchable",!1)("clearable",!1)("ngModel",je.newcustomerscount),g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(70,166,"Dashboard.today")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(73,168,"Dashboard.thisWeek")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(76,170,"Dashboard.thisMonth")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(79,172,"Dashboard.thisYear")),g.\u0275\u0275advance(5),g.\u0275\u0275property("ngIf",g.\u0275\u0275pipeBind1(84,174,je.dashboardSandbox.newCustomersLoading$)),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(87,176,je.dashboardSandbox.newCustomers$)),g.\u0275\u0275advance(5),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(92,178,"Dashboard.totalCustomers")),g.\u0275\u0275advance(5),g.\u0275\u0275property("ngIf",g.\u0275\u0275pipeBind1(97,180,je.dashboardSandbox.dashboardCountLoading$)),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(100,182,je.dashboardSandbox.dashboardCount$).customers),g.\u0275\u0275advance(10),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(110,184,"Dashboard.TopPerformingProducts")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate2("",g.\u0275\u0275pipeBind1(113,186,je.dashboardSandbox.getTopSellingProductListCount$)," ",g.\u0275\u0275pipeBind1(114,188,"Dashboard.products"),""),g.\u0275\u0275advance(3),g.\u0275\u0275property("searchable",!1)("clearable",!1)("ngModel",je.topProducts),g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(118,190,"Dashboard.today")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(121,192,"Dashboard.thisWeek")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(124,194,"Dashboard.thisMonth")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(127,196,"Dashboard.thisYear")),g.\u0275\u0275advance(3),g.\u0275\u0275property("ngIf",g.\u0275\u0275pipeBind1(130,198,je.dashboardSandbox.topSellingProductsLoading$)),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngForOf",g.\u0275\u0275pipeBind1(132,200,je.dashboardSandbox.topSellingProducts$)),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngIf",0===g.\u0275\u0275pipeBind1(134,202,je.dashboardSandbox.getTopSellingProductListCount$)),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate1("",g.\u0275\u0275pipeBind1(138,204,"Dashboard.repeatedCustomers")," "),g.\u0275\u0275advance(3),g.\u0275\u0275property("ngIf",g.\u0275\u0275pipeBind1(141,206,je.dashboardSandbox.recentVisitorListLoading$)),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngForOf",g.\u0275\u0275pipeBind1(143,208,je.dashboardSandbox.recentVisitorList$)),g.\u0275\u0275advance(6),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(149,210,"marketplace.seller.TotalVendors")),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngIf",g.\u0275\u0275pipeBind1(151,212,je.dashboardSandbox.dashboardCountLoading$)),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(155,214,je.dashboardSandbox.dashboardCount$).vendors),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(159,216,"catalog.categories.TotalProduct")),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngIf",g.\u0275\u0275pipeBind1(161,218,je.dashboardSandbox.dashboardCountLoading$)),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(165,220,je.dashboardSandbox.dashboardCount$).products),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(169,222,"Dashboard.averageorderValue")),g.\u0275\u0275advance(3),g.\u0275\u0275property("ngIf",g.\u0275\u0275pipeBind1(172,224,je.dashboardSandbox.averageOrderValueLoading$)),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind2(175,226,g.\u0275\u0275pipeBind1(176,229,je.dashboardSandbox.averageOrderValue$),g.\u0275\u0275pipeBind1(177,231,je.layoutSandbox.settings$))),g.\u0275\u0275advance(4),g.\u0275\u0275property("searchable",!1)("clearable",!1)("ngModel",je.averagevalue),g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(181,233,"Dashboard.today")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(184,235,"Dashboard.thisWeek")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(187,237,"Dashboard.thisMonth")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(190,239,"Dashboard.thisYear")),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(194,241,"Dashboard.averageConversionRatio")),g.\u0275\u0275advance(3),g.\u0275\u0275property("ngIf",g.\u0275\u0275pipeBind1(197,243,je.dashboardSandbox.averageConversionRatioLoading$)),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate1("",g.\u0275\u0275pipeBind1(200,245,je.dashboardSandbox.averageConversionRatio$),"%"),g.\u0275\u0275advance(2),g.\u0275\u0275property("searchable",!1)("clearable",!1)("ngModel",je.averageConvertionRatios),g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(204,247,"Dashboard.today")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(207,249,"Dashboard.thisWeek")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(210,251,"Dashboard.thisMonth")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(213,253,"Dashboard.thisYear")),g.\u0275\u0275advance(7),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(220,255,"Sales.Orders.Sales")),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(224,257,"Dashboard.customerVisits")),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(228,259,"Dashboard.vendor")),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(232,261,"Dashboard.10weeklySales")),g.\u0275\u0275advance(5),g.\u0275\u0275property("searchable",!1)("clearable",!1)("ngModel",je.salesgraphyear),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngForOf",je.year),g.\u0275\u0275advance(1),g.\u0275\u0275property("searchable",!1)("clearable",!1)("ngModel",je.salesgraphmonth),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngForOf",je.month),g.\u0275\u0275advance(2),g.\u0275\u0275property("isShow",g.\u0275\u0275pipeBind1(242,263,je.dashboardSandbox.salesgraphLoading$)),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngIf",g.\u0275\u0275pipeBind1(244,265,je.dashboardSandbox.salesgraph$).length>0&&g.\u0275\u0275pipeBind1(245,267,je.dashboardSandbox.salesgraphLoaded$)),g.\u0275\u0275advance(3),g.\u0275\u0275property("ngIf",0==g.\u0275\u0275pipeBind1(247,269,je.dashboardSandbox.salesgraph$).length&&g.\u0275\u0275pipeBind1(248,271,je.dashboardSandbox.salesgraphLoaded$)),g.\u0275\u0275advance(5),g.\u0275\u0275property("searchable",!1)("clearable",!1)("ngModel",je.customersVisityear),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngForOf",je.year),g.\u0275\u0275advance(1),g.\u0275\u0275property("searchable",!1)("clearable",!1)("ngModel",je.customersVisitmonth),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngForOf",je.month),g.\u0275\u0275advance(2),g.\u0275\u0275property("isShow",g.\u0275\u0275pipeBind1(257,273,je.dashboardSandbox.salesOrderListLoading$)),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngIf",g.\u0275\u0275pipeBind1(259,275,je.dashboardSandbox.salesOrderList$).length>0&&g.\u0275\u0275pipeBind1(260,277,je.dashboardSandbox.salesOrderListLoaded$)),g.\u0275\u0275advance(3),g.\u0275\u0275property("ngIf",0===g.\u0275\u0275pipeBind1(262,279,je.dashboardSandbox.salesOrderList$).length&&g.\u0275\u0275pipeBind1(263,281,je.dashboardSandbox.salesOrderListLoaded$)),g.\u0275\u0275advance(5),g.\u0275\u0275property("searchable",!1)("clearable",!1)("ngModel",je.vendorID),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngForOf",je.vendorList),g.\u0275\u0275advance(1),g.\u0275\u0275property("searchable",!1)("clearable",!1)("ngModel",je.vendorsyear),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngForOf",je.year),g.\u0275\u0275advance(2),g.\u0275\u0275property("isShow",g.\u0275\u0275pipeBind1(272,283,je.dashboardSandbox.vendorLoading$)),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngIf",je.vendorDetails.productCount>0&&!g.\u0275\u0275pipeBind1(274,285,je.dashboardSandbox.vendorLoading$)),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngIf",0===je.vendorDetails.productCount),g.\u0275\u0275advance(4),g.\u0275\u0275property("ngForOf",je.top10weeklyproductlist),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngIf",je.top10weeklyproductlist.length>0),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngIf",0===je.top10weeklyproductlist.length),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(287,287,"Dashboard.transaction")),g.\u0275\u0275advance(2),g.\u0275\u0275property("searchable",!1)("clearable",!1)("ngModel",je.transactionlistyear),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngForOf",je.year),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngIf",g.\u0275\u0275pipeBind1(291,289,je.dashboardSandbox.transactionValuesLoading$)),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngIf",g.\u0275\u0275pipeBind1(293,291,je.dashboardSandbox.transactionValues$).length>0&&g.\u0275\u0275pipeBind1(294,293,je.dashboardSandbox.transactionValuesLoaded$)),g.\u0275\u0275advance(3),g.\u0275\u0275property("ngIf",0==g.\u0275\u0275pipeBind1(296,295,je.dashboardSandbox.transactionValues$).length&&g.\u0275\u0275pipeBind1(297,297,je.dashboardSandbox.transactionValuesLoaded$))}},directives:[Xe.w9,q.NgControlStatus,q.NgModel,Xe.jq,Ba.NgIf,Ba.NgForOf,ar.A,Ht,or.JU,q.CheckboxControlValueAccessor,_e._L,De.jh],pipes:[Ie.X$,Ba.AsyncPipe,Ba.DecimalPipe,Ba.SlicePipe,sr.G],styles:["[_nghost-%COMP%]     .ng-select.ng-select-single{width:106px;font-size:12px;font-weight:600}[_nghost-%COMP%]     .ng-select .ng-option{font-size:small}[_nghost-%COMP%]     .ng-select .ng-dropdown-panel.ng-select-bottom{margin-left:0;width:-moz-fit-content;width:fit-content;width:100%}[_nghost-%COMP%]     .ng-select .ng-dropdown-panel.ng-select-top{margin-left:0;width:-moz-fit-content;width:fit-content;width:100%}.dashboard-card-content[_ngcontent-%COMP%]{width:calc(100% - 150px);height:calc(100% - 30px);display:flex;flex-flow:column;justify-content:center;align-items:center;box-sizing:border-box}.no-data[_ngcontent-%COMP%]{padding:20px;text-align:center}.checkbox-data[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.checkbox-data[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:5px;font-size:12px;color:#000}.no-data[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:30px}.rad-chart[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.rad-chart-left[_ngcontent-%COMP%]{width:200px}.rad-chart-right[_ngcontent-%COMP%]{width:calc(100% - 150px);display:flex;justify-content:center}.product-name[_ngcontent-%COMP%]{text-overflow:ellipsis;width:100px;overflow:hidden;white-space:nowrap}.spinner-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;justify-items:center}.no-document[_ngcontent-%COMP%]{display:flex;justify-content:center!important;color:gray;font-size:14px}"]}),He})()}];let _r=(()=>{class He{}return He.\u0275fac=function(Ve){return new(Ve||He)},He.\u0275mod=g.\u0275\u0275defineNgModule({type:He}),He.\u0275inj=g.\u0275\u0275defineInjector({imports:[[ce.Bz.forChild(Tr)],ce.Bz]}),He})();var fn=Pa(16917),sn=Pa(47769),En=Pa(12476),xn=Pa(67638),vn=Pa(62953),Lr=Pa(61870);Ce.plotlyjs=xn,We.setPlotlyVersion("1.55.2"),We.setPlotlyBundle("basic");let Er=(()=>{class He{}return He.\u0275fac=function(Ve){return new(Ve||He)},He.\u0275mod=g.\u0275\u0275defineNgModule({type:He}),He.\u0275inj=g.\u0275\u0275defineInjector({providers:[i,Pe,Lr.n,Te.A],imports:[[Ba.CommonModule,En.K,Si.o,q.FormsModule,q.ReactiveFormsModule,fn.q,_r,or.a4,De.vQ,W.sQ.forFeature([rr,vn.z]),Ie.aw.forChild({loader:{provide:Ie.Zw,useFactory:sn.g,deps:[t.eN]}}),Ce]]}),He})()},33052:(af,qs,Pa)=>{"use strict";Pa.d(qs,{A:()=>t});var Ba=Pa(5e3),Si=Pa(9932),q=Pa(69808);function W(A,g){1&A&&(Ba.\u0275\u0275elementStart(0,"div",1)(1,"div",2),Ba.\u0275\u0275element(2,"img",3),Ba.\u0275\u0275elementEnd()())}let t=(()=>{class A{constructor(i){this.httpStatus=i,this.subscriptions=[],this.loader=!1,this.getHttpResponse()}ngOnInit(){}getHttpResponse(){this.subscriptions.push(this.httpStatus.getHttpStatus().subscribe(i=>{this.loader=i}))}ngOnDestroy(){this.subscriptions.forEach(i=>i.unsubscribe())}}return A.\u0275fac=function(i){return new(i||A)(Ba.\u0275\u0275directiveInject(Si.Z))},A.\u0275cmp=Ba.\u0275\u0275defineComponent({type:A,selectors:[["app-global-loader"]],inputs:{isShow:"isShow"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"row"],["width","80px","height","80px","src","./assets/loader/Spurt-commerce-Loader-2.1.gif"]],template:function(i,P){1&i&&Ba.\u0275\u0275template(0,W,3,0,"div",0),2&i&&Ba.\u0275\u0275property("ngIf",P.isShow)},directives:[q.NgIf],styles:['#loader[_ngcontent-%COMP%]{height:175px;inset:0;margin:auto;position:absolute;width:175px}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{height:100%;inset:0;margin:auto;position:absolute;width:87.5px}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:before{border-radius:100%;content:"";height:87.5px;left:0;position:absolute;right:0;top:0;transform:scale(0);width:87.5px}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+1){transform:rotate(45deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+1):before{animation:.8s linear .1s normal none infinite running load;background:#00ff80 none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+2){transform:rotate(90deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+2):before{animation:.8s linear .2s normal none infinite running load;background:#00ffea none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+3){transform:rotate(135deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+3):before{animation:.8s linear .3s normal none infinite running load;background:#00aaff none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+4){transform:rotate(180deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+4):before{animation:.8s linear .4s normal none infinite running load;background:#0040ff none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+5){transform:rotate(225deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+5):before{animation:.8s linear .5s normal none infinite running load;background:#2a00ff none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+6){transform:rotate(270deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+6):before{animation:.8s linear .6s normal none infinite running load;background:#9500ff none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+7){transform:rotate(315deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+7):before{animation:.8s linear .7s normal none infinite running load;background:magenta none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+8){transform:rotate(360deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+8):before{animation:.8s linear .8s normal none infinite running load;background:#ff0095 none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{background-position:50% 50%;background-repeat:no-repeat;bottom:-40px;height:20px;left:0;position:absolute;right:0;width:180px}@keyframes load{to{opacity:0;transform:scale(1)}}.spinner-message[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{text-align:center}']}),A})()},94327:function(af,qs){var Si;void 0!==(Si=function(){"use strict";function W(C,u,y){var e=new XMLHttpRequest;e.open("GET",C),e.responseType="blob",e.onload=function(){P(e.response,u,y)},e.onerror=function(){console.error("could not download file")},e.send()}function t(C){var u=new XMLHttpRequest;u.open("HEAD",C,!1);try{u.send()}catch(y){}return 200<=u.status&&299>=u.status}function A(C){try{C.dispatchEvent(new MouseEvent("click"))}catch(y){var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),C.dispatchEvent(u)}}var g="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,i=g.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),P=g.saveAs||("object"!=typeof window||window!==g?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(C,u,y){var e=g.URL||g.webkitURL,r=document.createElement("a");r.download=u=u||C.name||"download",r.rel="noopener","string"==typeof C?(r.href=C,r.origin===location.origin?A(r):t(r.href)?W(C,u,y):A(r,r.target="_blank")):(r.href=e.createObjectURL(C),setTimeout(function(){e.revokeObjectURL(r.href)},4e4),setTimeout(function(){A(r)},0))}:"msSaveOrOpenBlob"in navigator?function(C,u,y){if(u=u||C.name||"download","string"!=typeof C)navigator.msSaveOrOpenBlob(function q(C,u){return void 0===u?u={autoBom:!1}:"object"!=typeof u&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(C.type)?new Blob(["\ufeff",C],{type:C.type}):C}(C,y),u);else if(t(C))W(C,u,y);else{var e=document.createElement("a");e.href=C,e.target="_blank",setTimeout(function(){A(e)})}}:function(C,u,y,e){if((e=e||open("","_blank"))&&(e.document.title=e.document.body.innerText="downloading..."),"string"==typeof C)return W(C,u,y);var r="application/octet-stream"===C.type,l=/constructor/i.test(g.HTMLElement)||g.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||r&&l||i)&&"undefined"!=typeof FileReader){var s=new FileReader;s.onloadend=function(){var m=s.result;m=a?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),e?e.location.href=m:location=m,e=null},s.readAsDataURL(C)}else{var c=g.URL||g.webkitURL,f=c.createObjectURL(C);e?e.location=f:location.href=f,e=null,setTimeout(function(){c.revokeObjectURL(f)},4e4)}});g.saveAs=P.saveAs=P,af.exports=P}.apply(qs,[]))&&(af.exports=Si)},67638:af=>{self,af.exports=function(){var qs={98847:function(q,W,t){"use strict";var A=t(71828),g={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var i in g){var P=i.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");A.addStyleRule(P,g[i])}},98222:function(q,W,t){"use strict";q.exports=t(82887)},27206:function(q,W,t){"use strict";q.exports=t(60822)},59893:function(q,W,t){"use strict";q.exports=t(23381)},5224:function(q,W,t){"use strict";q.exports=t(83832)},59509:function(q,W,t){"use strict";q.exports=t(72201)},75557:function(q,W,t){"use strict";q.exports=t(91815)},40338:function(q,W,t){"use strict";q.exports=t(21462)},35080:function(q,W,t){"use strict";q.exports=t(51319)},61396:function(q,W,t){"use strict";q.exports=t(57516)},40549:function(q,W,t){"use strict";q.exports=t(98128)},49866:function(q,W,t){"use strict";q.exports=t(99442)},36089:function(q,W,t){"use strict";q.exports=t(93740)},19548:function(q,W,t){"use strict";q.exports=t(8729)},35831:function(q,W,t){"use strict";q.exports=t(93814)},61039:function(q,W,t){"use strict";q.exports=t(14382)},97040:function(q,W,t){"use strict";q.exports=t(51759)},77986:function(q,W,t){"use strict";q.exports=t(10421)},24296:function(q,W,t){"use strict";q.exports=t(43102)},58872:function(q,W,t){"use strict";q.exports=t(92165)},29626:function(q,W,t){"use strict";q.exports=t(3325)},65591:function(q,W,t){"use strict";q.exports=t(36071)},69738:function(q,W,t){"use strict";q.exports=t(43905)},92650:function(q,W,t){"use strict";q.exports=t(35902)},35630:function(q,W,t){"use strict";q.exports=t(69816)},73434:function(q,W,t){"use strict";q.exports=t(94507)},27909:function(q,W,t){"use strict";var A=t(19548);A.register([t(27206),t(5224),t(58872),t(65591),t(69738),t(92650),t(49866),t(25743),t(6197),t(97040),t(85461),t(73434),t(54201),t(81299),t(47645),t(35630),t(77986),t(83043),t(93005),t(96881),t(4534),t(50581),t(40549),t(77900),t(47582),t(35080),t(21641),t(17280),t(5861),t(29626),t(10021),t(65317),t(96268),t(61396),t(35831),t(16122),t(46163),t(40344),t(40338),t(48131),t(36089),t(55334),t(75557),t(19440),t(99488),t(59893),t(97393),t(98222),t(61039),t(24296),t(66398),t(59509)]),q.exports=A},46163:function(q,W,t){"use strict";q.exports=t(15154)},96881:function(q,W,t){"use strict";q.exports=t(64943)},50581:function(q,W,t){"use strict";q.exports=t(21164)},55334:function(q,W,t){"use strict";q.exports=t(54186)},65317:function(q,W,t){"use strict";q.exports=t(94873)},10021:function(q,W,t){"use strict";q.exports=t(67618)},54201:function(q,W,t){"use strict";q.exports=t(58810)},5861:function(q,W,t){"use strict";q.exports=t(20593)},16122:function(q,W,t){"use strict";q.exports=t(29396)},83043:function(q,W,t){"use strict";q.exports=t(13551)},48131:function(q,W,t){"use strict";q.exports=t(46858)},47582:function(q,W,t){"use strict";q.exports=t(17988)},21641:function(q,W,t){"use strict";q.exports=t(68868)},96268:function(q,W,t){"use strict";q.exports=t(20467)},19440:function(q,W,t){"use strict";q.exports=t(91271)},99488:function(q,W,t){"use strict";q.exports=t(21461)},97393:function(q,W,t){"use strict";q.exports=t(85956)},25743:function(q,W,t){"use strict";q.exports=t(52979)},66398:function(q,W,t){"use strict";q.exports=t(32275)},17280:function(q,W,t){"use strict";q.exports=t(6419)},77900:function(q,W,t){"use strict";q.exports=t(61510)},81299:function(q,W,t){"use strict";q.exports=t(87619)},93005:function(q,W,t){"use strict";q.exports=t(93601)},40344:function(q,W,t){"use strict";q.exports=t(96595)},47645:function(q,W,t){"use strict";q.exports=t(70954)},6197:function(q,W,t){"use strict";q.exports=t(47462)},4534:function(q,W,t){"use strict";q.exports=t(17659)},85461:function(q,W,t){"use strict";q.exports=t(19990)},82884:function(q){"use strict";q.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},50215:function(q,W,t){"use strict";var A=t(82884),g=t(41940),i=t(85555),P=t(44467).templatedArray;t(24695),q.exports=P("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:g({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:A.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:A.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",i.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",i.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:g({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},3749:function(q,W,t){"use strict";var A=t(71828),g=t(89298),i=t(92605).draw;function P(u){A.filterVisible(u._fullLayout.annotations).forEach(function(e){var r=g.getFromId(u,e.xref),l=g.getFromId(u,e.yref),a=g.getRefType(e.xref),s=g.getRefType(e.yref);e._extremes={},"range"===a&&C(e,r),"range"===s&&C(e,l)})}function C(u,y){var L,e=y._id,r=e.charAt(0),l=u[r],a=u["a"+r],f=u["_"+r+"padplus"],m=u["_"+r+"padminus"],h={x:1,y:-1}[r]*u[r+"shift"],w=3*u.arrowsize*u.arrowwidth||0,p=w+h,o=w-h,v=3*u.startarrowsize*u.arrowwidth||0,M=v+h,b=v-h;if(u["a"+r+"ref"]===u[r+"ref"]){var x=g.findExtremes(y,[y.r2c(l)],{ppadplus:p,ppadminus:o}),S=g.findExtremes(y,[y.r2c(a)],{ppadplus:Math.max(f,M),ppadminus:Math.max(m,b)});L={min:[x.min[0],S.min[0]],max:[x.max[0],S.max[0]]}}else M=a?M+a:M,b=a?b-a:b,L=g.findExtremes(y,[y.r2c(l)],{ppadplus:Math.max(f,p,M),ppadminus:Math.max(m,o,b)});u._extremes[e]=L}q.exports=function(y){if(A.filterVisible(y._fullLayout.annotations).length&&y._fullData.length)return A.syncOrAsync([i,P],y)}},44317:function(q,W,t){"use strict";var A=t(71828),g=t(73972),i=t(44467).arrayEditor;function u(e,r){var m,h,w,p,o,v,M,l=e._fullLayout.annotations,a=[],s=[],c=[],f=(r||[]).length;for(m=0;m<l.length;m++)if(p=(w=l[m]).clicktoshow){for(h=0;h<f;h++)if(M=(o=r[h]).yaxis,(v=o.xaxis)._id===w.xref&&M._id===w.yref&&v.d2r(o.x)===y(w._xclick,v)&&M.d2r(o.y)===y(w._yclick,M)){(w.visible?"onout"===p?s:c:a).push(m);break}h===f&&w.visible&&"onout"===p&&s.push(m)}return{on:a,off:s,explicitOff:c}}function y(e,r){return"log"===r.type?r.l2r(e):r.d2r(e)}q.exports={hasClickToShow:function P(e,r){var l=u(e,r);return l.on.length>0||l.explicitOff.length>0},onClick:function C(e,r){var m,h,l=u(e,r),a=l.on,s=l.off.concat(l.explicitOff),c={},f=e._fullLayout.annotations;if(a.length||s.length){for(m=0;m<a.length;m++)(h=i(e.layout,"annotations",f[a[m]])).modifyItem("visible",!0),A.extendFlat(c,h.getUpdateObj());for(m=0;m<s.length;m++)(h=i(e.layout,"annotations",f[s[m]])).modifyItem("visible",!1),A.extendFlat(c,h.getUpdateObj());return g.call("update",e,{},c)}}}},25625:function(q,W,t){"use strict";var A=t(71828),g=t(7901);q.exports=function(P,C,u,y){y("opacity");var e=y("bgcolor"),r=y("bordercolor"),l=g.opacity(r);y("borderpad");var a=y("borderwidth"),s=y("showarrow");if(y("text",s?" ":u._dfltTitle.annotation),y("textangle"),A.coerceFont(y,"font",u.font),y("width"),y("align"),y("height")&&y("valign"),s){var m,h,f=y("arrowside");-1!==f.indexOf("end")&&(m=y("arrowhead"),h=y("arrowsize")),-1!==f.indexOf("start")&&(y("startarrowhead",m),y("startarrowsize",h)),y("arrowcolor",l?C.bordercolor:g.defaultLine),y("arrowwidth",2*(l&&a||1)),y("standoff"),y("startstandoff")}var w=y("hovertext"),p=u.hoverlabel||{};if(w){var o=y("hoverlabel.bgcolor",p.bgcolor||(g.opacity(e)?g.rgb(e):g.defaultLine)),v=y("hoverlabel.bordercolor",p.bordercolor||g.contrast(o));A.coerceFont(y,"hoverlabel.font",{family:p.font.family,size:p.font.size,color:p.font.color||v})}y("captureevents",!!w)}},94128:function(q,W,t){"use strict";var A=t(92770),g=t(58163);q.exports=function(P,C,u,y){C=C||{};var e="log"===u&&"linear"===C.type;if(e||"linear"===u&&"log"===C.type)for(var s,c,l=P._fullLayout.annotations,a=C._id.charAt(0),m=0;m<l.length;m++)c="annotations["+m+"].",(s=l[m])[a+"ref"]===C._id&&f(a),s["a"+a+"ref"]===C._id&&f("a"+a);function f(h){var w=s[h],p=null;p=e?g(w,C.range):Math.pow(10,w),A(p)||(p=null),y(c+h,p)}}},84046:function(q,W,t){"use strict";var A=t(71828),g=t(89298),i=t(85501),P=t(25625),C=t(50215);function u(y,e,r){function l(T,n){return A.coerce(y,e,C,T,n)}var a=l("visible"),s=l("clicktoshow");if(a||s){P(y,e,r,l);for(var c=e.showarrow,f=["x","y"],m=[-10,-30],h={_fullLayout:r},w=0;w<2;w++){var p=f[w],o=g.coerceRef(y,e,h,p,"","paper");if("paper"!==o&&g.getFromId(h,o)._annIndices.push(e._index),g.coercePosition(e,h,l,o,p,.5),c){var M="a"+p,b=g.coerceRef(y,e,h,M,"pixel",["pixel","paper"]);"pixel"!==b&&b!==o&&(b=e[M]="pixel"),g.coercePosition(e,h,l,b,M,"pixel"===b?m[w]:.4)}l(p+"anchor"),l(p+"shift")}if(A.noneOrAll(y,e,["x","y"]),c&&A.noneOrAll(y,e,["ax","ay"]),s){var x=l("xclick"),S=l("yclick");e._xclick=void 0===x?e.x:g.cleanPosition(x,h,e.xref),e._yclick=void 0===S?e.y:g.cleanPosition(S,h,e.yref)}}}q.exports=function(e,r){i(e,r,{name:"annotations",handleItemDefaults:u})}},92605:function(q,W,t){"use strict";var A=t(39898),g=t(73972),i=t(74875),P=t(71828),C=P.strTranslate,u=t(89298),y=t(7901),e=t(91424),r=t(30211),l=t(63893),a=t(6964),s=t(28569),c=t(44467).arrayEditor,f=t(13011);function h(o,v){var b=o._fullLayout.annotations[v]||{},L=u.getFromId(o,b.xref),x=u.getFromId(o,b.yref);L&&L.setScale(),x&&x.setScale(),p(o,b,v,!1,L,x)}function w(o,v,M,b,L){var x=L[M],S=L[M+"ref"],T=-1!==M.indexOf("y"),n="domain"===u.getRefType(S),E=T?b.h:b.w;return o?n?x+(T?-v:v)/o._length:o.p2r(o.r2p(x)+v):x+(T?-v:v)/E}function p(o,v,M,b,L,x){var E,d,S=o._fullLayout,T=o._fullLayout._size,n=o._context.edits;b?(E="annotation-"+b,d=b+".annotations"):(E="annotation",d="annotations");var F=c(o.layout,d,v),D=F.modifyBase,N=F.modifyItem,k=F.getUpdateObj;S._infolayer.selectAll("."+E+'[data-index="'+M+'"]').remove();var O="clip"+S._uid+"_ann"+M;if(v._input&&!1!==v.visible){var B={x:{},y:{}},z=+v.textangle||0,U=S._infolayer.append("g").classed(E,!0).attr("data-index",String(M)).style("opacity",v.opacity),H=U.append("g").classed("annotation-text-g",!0),J=n[v.showarrow?"annotationTail":"annotationPosition"],nt=v.captureevents||n.annotationText||J,ut=H.append("g").style("pointer-events",nt?"all":null).call(a,"pointer").on("click",function(){o._dragging=!1,o.emit("plotly_clickannotation",it(A.event))});v.hovertext&&ut.on("mouseover",function(){var dt=v.hoverlabel,bt=dt.font,gt=this.getBoundingClientRect(),Lt=o.getBoundingClientRect();r.loneHover({x0:gt.left-Lt.left,x1:gt.right-Lt.left,y:(gt.top+gt.bottom)/2-Lt.top,text:v.hovertext,color:dt.bgcolor,borderColor:dt.bordercolor,fontFamily:bt.family,fontSize:bt.size,fontColor:bt.color},{container:S._hoverlayer.node(),outerContainer:S._paper.node(),gd:o})}).on("mouseout",function(){r.loneUnhover(S._hoverlayer.node())});var Q=v.borderwidth,Z=Q+v.borderpad,G=ut.append("rect").attr("class","bg").style("stroke-width",Q+"px").call(y.stroke,v.bordercolor).call(y.fill,v.bgcolor),K=v.width||v.height,at=S._topclips.selectAll("#"+O).data(K?[0]:[]);at.enter().append("clipPath").classed("annclip",!0).attr("id",O).append("rect"),at.exit().remove();var $=v.font,X=S._meta?P.templateString(v.text,S._meta):v.text,rt=ut.append("text").classed("annotation-text",!0).text(X);n.annotationText?rt.call(l.makeEditable,{delegate:ut,gd:o}).call(et).on("edit",function(dt){v.text=dt,this.call(et),N("text",dt),L&&L.autorange&&D(L._name+".autorange",!0),x&&x.autorange&&D(x._name+".autorange",!0),g.call("_guiRelayout",o,k())}):rt.call(et)}else A.selectAll("#"+O).remove();function it(dt){var bt={index:M,annotation:v._input,fullAnnotation:v,event:dt};return b&&(bt.subplotId=b),bt}function et(dt){return dt.call(e.font,$).attr({"text-anchor":{left:"start",right:"end"}[v.align]||"middle"}),l.convertToTspans(dt,o,st),dt}function st(){var dt=rt.selectAll("a");1===dt.size()&&dt.text()===rt.text()&&ut.insert("a",":first-child").attr({"xlink:xlink:href":dt.attr("xlink:href"),"xlink:xlink:show":dt.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(G.node());var gt=ut.select(".annotation-text-math-group"),Lt=!gt.empty(),It=e.bBox((Lt?gt:rt).node()),Mt=It.width,xt=It.height,At=v.width||Mt,Gt=v.height||xt,Wt=Math.round(At+2*Z),Pt=Math.round(Gt+2*Z);function Vt(xr,rr){return"auto"===rr&&(rr=xr<.3333333333333333?"left":xr>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[rr]}for(var te=!1,Qt=["x","y"],Bt=0;Bt<Qt.length;Bt++){var Ft,Nt,Rt,wt,ft,Ot=Qt[Bt],qt=v[Ot+"ref"]||Ot,ie=v["a"+Ot+"ref"],oe={x:L,y:x}[Ot],pe=(z+("x"===Ot?0:-90))*Math.PI/180,de=Wt*Math.cos(pe),Fe=Pt*Math.sin(pe),Kt=Math.abs(de)+Math.abs(Fe),Et=v[Ot+"anchor"],St=v[Ot+"shift"]*("x"===Ot?1:-1),Dt=B[Ot],pt=u.getRefType(qt);if(oe&&"domain"!==pt){var kt=oe.r2fraction(v[Ot]);(kt<0||kt>1)&&(ie===qt?((kt=oe.r2fraction(v["a"+Ot]))<0||kt>1)&&(te=!0):te=!0),Ft=oe._offset+oe.r2p(v[Ot]),wt=.5}else{var Zt="domain"===pt;"x"===Ot?(Rt=v[Ot],Ft=Zt?oe._offset+oe._length*Rt:Ft=T.l+T.w*Rt):(Rt=1-v[Ot],Ft=Zt?oe._offset+oe._length*Rt:Ft=T.t+T.h*Rt),wt=v.showarrow?.5:Rt}if(v.showarrow){Dt.head=Ft;var ee=v["a"+Ot];if(ft=de*Vt(.5,v.xanchor)-Fe*Vt(.5,v.yanchor),ie===qt){var se=u.getRefType(ie);"domain"===se?("y"===Ot&&(ee=1-ee),Dt.tail=oe._offset+oe._length*ee):Dt.tail="paper"===se?"y"===Ot?T.t+T.h*(ee=1-ee):T.l+T.w*ee:oe._offset+oe.r2p(ee),Nt=ft}else Dt.tail=Ft+ee,Nt=ft+ee;Dt.text=Dt.tail+ft;var Be=S["x"===Ot?"width":"height"];if("paper"===qt&&(Dt.head=P.constrain(Dt.head,1,Be-1)),"pixel"===ie){var Ke=-Math.max(Dt.tail-3,Dt.text),xe=Math.min(Dt.tail+3,Dt.text)-Be;Ke>0?(Dt.tail+=Ke,Dt.text+=Ke):xe>0&&(Dt.tail-=xe,Dt.text-=xe)}Dt.tail+=St,Dt.head+=St}else Nt=ft=Kt*Vt(wt,Et),Dt.text=Ft+ft;Dt.text+=St,ft+=St,v["_"+Ot+"padplus"]=Kt/2+(Nt+=St),v["_"+Ot+"padminus"]=Kt/2-Nt,v["_"+Ot+"size"]=Kt,v["_"+Ot+"shift"]=ft}if(te)ut.remove();else{var Pe=0,Ge=0;"left"!==v.align&&(Pe=(At-Mt)*("center"===v.align?.5:1)),"top"!==v.valign&&(Ge=(Gt-xt)*("middle"===v.valign?.5:1)),Lt?gt.select("svg").attr({x:Z+Pe-1,y:Z+Ge}).call(e.setClipUrl,K?O:null,o):rt.call(l.positionText,Z+Pe-It.left,Z+Ge-It.top).call(e.setClipUrl,K?O:null,o),at.select("rect").call(e.setRect,Z,Z,At,Gt),G.call(e.setRect,Q/2,Q/2,Wt-Q,Pt-Q),ut.call(e.setTranslate,Math.round(B.x.text-Wt/2),Math.round(B.y.text-Pt/2)),H.attr({transform:"rotate("+z+","+B.x.text+","+B.y.text+")"});var Ye,Ne=function(xr,rr){U.selectAll(".annotation-arrow-g").remove();var ce=B.x.head,re=B.y.head,ve=B.x.tail+xr,be=B.y.tail+rr,Ae=B.x.text+xr,Te=B.y.text+rr,Re=P.rotationXYMatrix(z,Ae,Te),Ie=P.apply2DTransform(Re),Xe=P.apply2DTransform2(Re),ar=+G.attr("width"),nr=+G.attr("height"),cr=Ae-.5*ar,Ut=cr+ar,Ht=Te-.5*nr,Se=Ht+nr,Ce=[[cr,Ht,cr,Se],[cr,Se,Ut,Se],[Ut,Se,Ut,Ht],[Ut,Ht,cr,Ht]].map(Xe);if(!Ce.reduce(function(Wr,nn){return Wr^!!P.segmentsIntersect(ce,re,ce+1e6,re+1e6,nn[0],nn[1],nn[2],nn[3])},!1)){Ce.forEach(function(Wr){var nn=P.segmentsIntersect(ve,be,ce,re,Wr[0],Wr[1],Wr[2],Wr[3]);nn&&(ve=nn.x,be=nn.y)});var We=v.arrowwidth,qe=v.arrowcolor,or=v.arrowside,_e=U.append("g").style({opacity:y.opacity(qe)}).classed("annotation-arrow-g",!0),De=_e.append("path").attr("d","M"+ve+","+be+"L"+ce+","+re).style("stroke-width",We+"px").call(y.stroke,y.rgb(qe));if(f(De,or,v),n.annotationPosition&&De.node().parentNode&&!b){var sr=ce,yr=re;if(v.standoff){var dr=Math.sqrt(Math.pow(ce-ve,2)+Math.pow(re-be,2));sr+=v.standoff*(ve-ce)/dr,yr+=v.standoff*(be-re)/dr}var Jr,Mr,Pr=_e.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(ve-sr)+","+(be-yr),transform:C(sr,yr)}).style("stroke-width",We+6+"px").call(y.stroke,"rgba(0,0,0,0)").call(y.fill,"rgba(0,0,0,0)");s.init({element:Pr.node(),gd:o,prepFn:function(){var Wr=e.getTranslate(ut);Jr=Wr.x,Mr=Wr.y,L&&L.autorange&&D(L._name+".autorange",!0),x&&x.autorange&&D(x._name+".autorange",!0)},moveFn:function(Wr,nn){var Nr=Ie(Jr,Mr),Dn=Nr[0]+Wr,hn=Nr[1]+nn;ut.call(e.setTranslate,Dn,hn),N("x",w(L,Wr,"x",T,v)),N("y",w(x,nn,"y",T,v)),v.axref===v.xref&&N("ax",w(L,Wr,"ax",T,v)),v.ayref===v.yref&&N("ay",w(x,nn,"ay",T,v)),_e.attr("transform",C(Wr,nn)),H.attr({transform:"rotate("+z+","+Dn+","+hn+")"})},doneFn:function(){g.call("_guiRelayout",o,k());var Wr=document.querySelector(".js-notes-box-panel");Wr&&Wr.redraw(Wr.selectedObj)}})}}};v.showarrow&&Ne(0,0),J&&s.init({element:ut.node(),gd:o,prepFn:function(){Ye=H.attr("transform")},moveFn:function(xr,rr){var ce="pointer";if(v.showarrow)N("ax",v.axref===v.xref?w(L,xr,"ax",T,v):v.ax+xr),N("ay",v.ayref===v.yref?w(x,rr,"ay",T.w,v):v.ay+rr),Ne(xr,rr);else{if(b)return;var re,ve;if(L)re=w(L,xr,"x",T,v);else{var be=v._xsize/T.w;re=s.align(v.x+(v._xshift-v.xshift)/T.w-be/2+xr/T.w,be,0,1,v.xanchor)}if(x)ve=w(x,rr,"y",T,v);else{var Te=v._ysize/T.h;ve=s.align(v.y-(v._yshift+v.yshift)/T.h-Te/2-rr/T.h,Te,0,1,v.yanchor)}N("x",re),N("y",ve),(!L||!x)&&(ce=s.getCursor(L?.5:re,x?.5:ve,v.xanchor,v.yanchor))}H.attr({transform:C(xr,rr)+Ye}),a(ut,ce)},clickFn:function(xr,rr){v.captureevents&&o.emit("plotly_clickannotation",it(rr))},doneFn:function(){a(ut),g.call("_guiRelayout",o,k());var xr=document.querySelector(".js-notes-box-panel");xr&&xr.redraw(xr.selectedObj)}})}}}q.exports={draw:function m(o){var v=o._fullLayout;v._infolayer.selectAll(".annotation").remove();for(var M=0;M<v.annotations.length;M++)v.annotations[M].visible&&h(o,M);return i.previousPromises(o)},drawOne:h,drawRaw:p}},13011:function(q,W,t){"use strict";var A=t(39898),g=t(7901),i=t(82884),P=t(71828),C=P.strScale,u=P.strRotate,y=P.strTranslate;q.exports=function(r,l,a){var M,b,L,x,s=r.node(),c=i[a.arrowhead||0],f=i[a.startarrowhead||0],m=(a.arrowwidth||1)*(a.arrowsize||1),h=(a.arrowwidth||1)*(a.startarrowsize||1),w=l.indexOf("start")>=0,p=l.indexOf("end")>=0,o=c.backoff*m+a.standoff,v=f.backoff*h+a.startstandoff;if("line"===s.nodeName){M={x:+r.attr("x1"),y:+r.attr("y1")},b={x:+r.attr("x2"),y:+r.attr("y2")};var S=M.x-b.x,T=M.y-b.y;if(x=(L=Math.atan2(T,S))+Math.PI,o&&v&&o+v>Math.sqrt(S*S+T*T))return void H();if(o){if(o*o>S*S+T*T)return void H();var n=o*Math.cos(L),E=o*Math.sin(L);b.x+=n,b.y+=E,r.attr({x2:b.x,y2:b.y})}if(v){if(v*v>S*S+T*T)return void H();var d=v*Math.cos(L),F=v*Math.sin(L);M.x-=d,M.y-=F,r.attr({x1:M.x,y1:M.y})}}else if("path"===s.nodeName){var D=s.getTotalLength(),N="";if(D<o+v)return void H();var k=s.getPointAtLength(0),O=s.getPointAtLength(.1);L=Math.atan2(k.y-O.y,k.x-O.x),M=s.getPointAtLength(Math.min(v,D)),N="0px,"+v+"px,";var B=s.getPointAtLength(D),z=s.getPointAtLength(D-.1);x=Math.atan2(B.y-z.y,B.x-z.x),b=s.getPointAtLength(Math.max(0,D-o)),r.style("stroke-dasharray",N+=D-(N?v+o:o)+"px,"+D+"px")}function H(){r.style("stroke-dasharray","0px,100px")}function J(nt,it,ut,Q){!nt.path||(nt.noRotate&&(ut=0),A.select(s.parentNode).append("path").attr({class:r.attr("class"),d:nt.path,transform:y(it.x,it.y)+u(180*ut/Math.PI)+C(Q)}).style({fill:g.rgb(a.arrowcolor),"stroke-width":0}))}w&&J(f,M,L,h),p&&J(c,b,x,m)}},32745:function(q,W,t){"use strict";var A=t(92605),g=t(44317);q.exports={moduleType:"component",name:"annotations",layoutAttributes:t(50215),supplyLayoutDefaults:t(84046),includeBasePlot:t(76325)("annotations"),calcAutorange:t(3749),draw:A.draw,drawOne:A.drawOne,drawRaw:A.drawRaw,hasClickToShow:g.hasClickToShow,onClick:g.onClick,convertCoords:t(94128)}},26997:function(q,W,t){"use strict";var A=t(50215),g=t(30962).overrideAll,i=t(44467).templatedArray;q.exports=g(i("annotation",{visible:A.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:A.xanchor,xshift:A.xshift,yanchor:A.yanchor,yshift:A.yshift,text:A.text,textangle:A.textangle,font:A.font,width:A.width,height:A.height,opacity:A.opacity,align:A.align,valign:A.valign,bgcolor:A.bgcolor,bordercolor:A.bordercolor,borderpad:A.borderpad,borderwidth:A.borderwidth,showarrow:A.showarrow,arrowcolor:A.arrowcolor,arrowhead:A.arrowhead,startarrowhead:A.startarrowhead,arrowside:A.arrowside,arrowsize:A.arrowsize,startarrowsize:A.startarrowsize,arrowwidth:A.arrowwidth,standoff:A.standoff,startstandoff:A.startstandoff,hovertext:A.hovertext,hoverlabel:A.hoverlabel,captureevents:A.captureevents}),"calc","from-root")},5485:function(q,W,t){"use strict";var A=t(71828),g=t(89298);function i(P,C){var y=C.fullSceneLayout.domain,e=C.fullLayout._size,r={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};P._xa={},A.extendFlat(P._xa,r),g.setConvert(P._xa),P._xa._offset=e.l+y.x[0]*e.w,P._xa.l2p=function(){return.5*(1+P._pdata[0]/P._pdata[3])*e.w*(y.x[1]-y.x[0])},P._ya={},A.extendFlat(P._ya,r),g.setConvert(P._ya),P._ya._offset=e.t+(1-y.y[1])*e.h,P._ya.l2p=function(){return.5*(1-P._pdata[1]/P._pdata[3])*e.h*(y.y[1]-y.y[0])}}q.exports=function(C){for(var y=C.fullSceneLayout.annotations,e=0;e<y.length;e++)i(y[e],C);C.fullLayout._infolayer.selectAll(".annotation-"+C.id).remove()}},20226:function(q,W,t){"use strict";var A=t(71828),g=t(89298),i=t(85501),P=t(25625),C=t(26997);function u(y,e,r,l){function a(f,m){return A.coerce(y,e,C,f,m)}function s(f){var m=f+"axis",h={_fullLayout:{}};return h._fullLayout[m]=r[m],g.coercePosition(e,h,a,f,f,.5)}!a("visible")||(P(y,e,l.fullLayout,a),s("x"),s("y"),s("z"),A.noneOrAll(y,e,["x","y","z"]),e.xref="x",e.yref="y",e.zref="z",a("xanchor"),a("yanchor"),a("xshift"),a("yshift"),e.showarrow&&(e.axref="pixel",e.ayref="pixel",a("ax",-10),a("ay",-30),A.noneOrAll(y,e,["ax","ay"])))}q.exports=function(e,r,l){i(e,r,{name:"annotations",handleItemDefaults:u,fullLayout:l.fullLayout})}},82188:function(q,W,t){"use strict";var A=t(92605).drawRaw,g=t(63538),i=["x","y","z"];q.exports=function(C){for(var u=C.fullSceneLayout,y=C.dataScale,e=u.annotations,r=0;r<e.length;r++){for(var l=e[r],a=!1,s=0;s<3;s++){var c=i[s],h=u[c+"axis"].r2fraction(l[c]);if(h<0||h>1){a=!0;break}}a?C.fullLayout._infolayer.select(".annotation-"+C.id+'[data-index="'+r+'"]').remove():(l._pdata=g(C.glplot.cameraParams,[u.xaxis.r2l(l.x)*y[0],u.yaxis.r2l(l.y)*y[1],u.zaxis.r2l(l.z)*y[2]]),A(C.graphDiv,l,r,C.id,l._xa,l._ya))}}},2468:function(q,W,t){"use strict";var A=t(73972),g=t(71828);q.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:t(26997)}}},layoutAttributes:t(26997),handleDefaults:t(20226),includeBasePlot:function i(P,C){var u=A.subplotsRegistry.gl3d;if(u)for(var y=u.attrRegex,e=Object.keys(P),r=0;r<e.length;r++){var l=e[r];y.test(l)&&(P[l].annotations||[]).length&&(g.pushUnique(C._basePlotModules,u),g.pushUnique(C._subplots.gl3d,l))}},convert:t(5485),draw:t(82188)}},7561:function(q,W,t){"use strict";q.exports=t(63489),t(94338),t(3961),t(38751),t(86825),t(37715),t(99384),t(43805),t(88874),t(83290),t(29108),t(55422),t(94320),t(31320),t(51367),t(21457)},72201:function(q,W,t){"use strict";var A=t(7561),g=t(71828),i=t(50606),P=i.EPOCHJD,C=i.ONEDAY,u={valType:"enumerated",values:g.sortObjectKeys(A.calendars),editType:"calc",dflt:"gregorian"},y=function(L,x,S,T){var n={};return n[S]=u,g.coerce(L,x,n,S,T)},s="##",c={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:s,w:s,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};var m={};function h(L){var x=m[L];return x||(m[L]=A.instance(L))}function w(L){return g.extendFlat({},u,{description:L})}function p(L){return"Sets the calendar system to use with `"+L+"` date data."}var o={xcalendar:w(p("x"))},v=g.extendFlat({},o,{ycalendar:w(p("y"))}),M=g.extendFlat({},v,{zcalendar:w(p("z"))}),b=w(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));q.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:v,bar:v,box:v,heatmap:v,contour:v,histogram:v,histogram2d:v,histogram2dcontour:v,scatter3d:M,surface:M,mesh3d:M,scattergl:v,ohlc:o,candlestick:o},layout:{calendar:w(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:b},yaxis:{calendar:b},scene:{xaxis:{calendar:b},yaxis:{calendar:b},zaxis:{calendar:b}},polar:{radialaxis:{calendar:b}}},transforms:{filter:{valuecalendar:w(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:w(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:u,handleDefaults:y,handleTraceDefaults:function(L,x,S,T){for(var n=0;n<S.length;n++)y(L,x,S[n]+"calendar",T.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:h,worldCalFmt:function f(L,x,S){for(var d,F,D,N,k,T=Math.floor((x+.05)/C)+P,n=h(S).fromJD(T),E=0;-1!==(E=L.indexOf("%",E));)"0"===(d=L.charAt(E+1))||"-"===d||"_"===d?(D=3,F=L.charAt(E+2),"_"===d&&(d="-")):(F=d,d="0",D=2),(N=c[F])?(k=N===s?s:n.formatDate(N[d]),L=L.substr(0,E)+k+L.substr(E+D),E+=k.length):E+=D;return L}}},22399:function(q,W){"use strict";W.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],W.defaultLine="#444",W.lightLine="#eee",W.background="#fff",W.borderLine="#BEC8D9",W.lightFraction=90.9090909090909},7901:function(q,W,t){"use strict";var A=t(84267),g=t(92770),i=t(73627).isTypedArray,P=q.exports={},C=t(22399);P.defaults=C.defaults;var u=P.defaultLine=C.defaultLine;P.lightLine=C.lightLine;var y=P.background=C.background;function e(r){if(g(r)||"string"!=typeof r)return r;var l=r.trim();if("rgb"!==l.substr(0,3))return r;var a=l.match(/^rgba?\s*\(([^()]*)\)$/);if(!a)return r;var s=a[1].trim().split(/\s*[\s,]\s*/),c="a"===l.charAt(3)&&4===s.length;if(!c&&3!==s.length)return r;for(var f=0;f<s.length;f++){if(!(s[f].length&&(s[f]=Number(s[f]),s[f]>=0)))return r;if(3===f)s[f]>1&&(s[f]=1);else if(s[f]>=1)return r}var m=Math.round(255*s[0])+", "+Math.round(255*s[1])+", "+Math.round(255*s[2]);return c?"rgba("+m+", "+s[3]+")":"rgb("+m+")"}P.tinyRGB=function(r){var l=r.toRgb();return"rgb("+Math.round(l.r)+", "+Math.round(l.g)+", "+Math.round(l.b)+")"},P.rgb=function(r){return P.tinyRGB(A(r))},P.opacity=function(r){return r?A(r).getAlpha():0},P.addOpacity=function(r,l){var a=A(r).toRgb();return"rgba("+Math.round(a.r)+", "+Math.round(a.g)+", "+Math.round(a.b)+", "+l+")"},P.combine=function(r,l){var a=A(r).toRgb();if(1===a.a)return A(r).toRgbString();var s=A(l||y).toRgb(),c=1===s.a?s:{r:255*(1-s.a)+s.r*s.a,g:255*(1-s.a)+s.g*s.a,b:255*(1-s.a)+s.b*s.a};return A({r:c.r*(1-a.a)+a.r*a.a,g:c.g*(1-a.a)+a.g*a.a,b:c.b*(1-a.a)+a.b*a.a}).toRgbString()},P.contrast=function(r,l,a){var s=A(r);return 1!==s.getAlpha()&&(s=A(P.combine(r,y))),(s.isDark()?l?s.lighten(l):y:a?s.darken(a):u).toString()},P.stroke=function(r,l){var a=A(l);r.style({stroke:P.tinyRGB(a),"stroke-opacity":a.getAlpha()})},P.fill=function(r,l){var a=A(l);r.style({fill:P.tinyRGB(a),"fill-opacity":a.getAlpha()})},P.clean=function(r){if(r&&"object"==typeof r){var a,s,c,f,l=Object.keys(r);for(a=0;a<l.length;a++)if(f=r[c=l[a]],"color"===c.substr(c.length-5))if(Array.isArray(f))for(s=0;s<f.length;s++)f[s]=e(f[s]);else r[c]=e(f);else if("colorscale"===c.substr(c.length-10)&&Array.isArray(f))for(s=0;s<f.length;s++)Array.isArray(f[s])&&(f[s][1]=e(f[s][1]));else if(Array.isArray(f)){var m=f[0];if(!Array.isArray(m)&&m&&"object"==typeof m)for(s=0;s<f.length;s++)P.clean(f[s])}else f&&"object"==typeof f&&!i(f)&&P.clean(f)}}},63583:function(q,W,t){"use strict";var A=t(13838),g=t(41940),i=t(1426).extendFlat,P=t(30962).overrideAll;q.exports=P({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:A.linecolor,outlinewidth:A.linewidth,bordercolor:A.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:A.minor.tickmode,nticks:A.nticks,tick0:A.tick0,dtick:A.dtick,tickvals:A.tickvals,ticktext:A.ticktext,ticks:i({},A.ticks,{dflt:""}),ticklabeloverflow:i({},A.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:A.ticklen,tickwidth:A.tickwidth,tickcolor:A.tickcolor,ticklabelstep:A.ticklabelstep,showticklabels:A.showticklabels,labelalias:A.labelalias,tickfont:g({}),tickangle:A.tickangle,tickformat:A.tickformat,tickformatstops:A.tickformatstops,tickprefix:A.tickprefix,showtickprefix:A.showtickprefix,ticksuffix:A.ticksuffix,showticksuffix:A.showticksuffix,separatethousands:A.separatethousands,exponentformat:A.exponentformat,minexponent:A.minexponent,showexponent:A.showexponent,title:{text:{valType:"string"},font:g({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:g({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},30939:function(q){"use strict";q.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},62499:function(q,W,t){"use strict";var A=t(71828),g=t(44467),i=t(26218),P=t(38701),C=t(96115),u=t(89426),y=t(63583);q.exports=function(r,l,a){var s=g.newContainer(l,"colorbar"),c=r.colorbar||{};function f(B,z){return A.coerce(c,s,y,B,z)}var m=a.margin||{t:0,b:0,l:0,r:0},h=a.width-m.l-m.r,w=a.height-m.t-m.b,o="v"===f("orientation"),v=f("thicknessmode");f("thickness","fraction"===v?30/(o?h:w):30);var M=f("lenmode");f("len","fraction"===M?1:o?w:h);var T,n,E,x="paper"===f("yref"),S="paper"===f("xref"),d="left";o?(E="middle",d=S?"left":"right",T=S?1.02:1,n=.5):(E=x?"bottom":"top",d="center",T=.5,n=x?1.02:1),A.coerce(c,s,{x:{valType:"number",min:S?-2:0,max:S?3:1,dflt:T}},"x"),A.coerce(c,s,{y:{valType:"number",min:x?-2:0,max:x?3:1,dflt:n}},"y"),f("xanchor",d),f("xpad"),f("yanchor",E),f("ypad"),A.noneOrAll(c,s,["x","y"]),f("outlinecolor"),f("outlinewidth"),f("bordercolor"),f("borderwidth"),f("bgcolor");var F=A.coerce(c,s,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:o?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");f("ticklabeloverflow",-1!==F.indexOf("inside")?"hide past domain":"hide past div"),i(c,s,f,"linear");var D=a.font,N={outerTicks:!1,font:D};-1!==F.indexOf("inside")&&(N.bgColor="black"),u(c,s,f,"linear",N),C(c,s,f,"linear",N),P(c,s,f,"linear",N),f("title.text",a._dfltTitle.colorbar);var k=s.showticklabels?s.tickfont:D,O=A.extendFlat({},k,{color:D.color,size:A.bigFont(k.size)});A.coerceFont(f,"title.font",O),f("title.side",o?"top":"right")}},98981:function(q,W,t){"use strict";var A=t(39898),g=t(84267),i=t(74875),P=t(73972),C=t(89298),u=t(28569),y=t(71828),e=y.strTranslate,r=t(1426).extendFlat,l=t(6964),a=t(91424),s=t(7901),c=t(92998),f=t(63893),m=t(52075).flipScale,h=t(71453),w=t(52830),p=t(13838),o=t(18783),v=o.LINE_SPACING,M=o.FROM_TL,b=o.FROM_BR,L=t(30939).cn;q.exports={draw:function x(F){var N=F._fullLayout._infolayer.selectAll("g."+L.colorbar).data(function S(F){var O,B,z,U,D=F._fullLayout,N=F.calcdata,k=[];function H($){return r($,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function J(){"function"==typeof U.calc?U.calc(F,z,O):(O._fillgradient=B.reversescale?m(B.colorscale):B.colorscale,O._zrange=[B[U.min],B[U.max]])}for(var nt=0;nt<N.length;nt++)if((z=N[nt][0].trace)._module){var ut=z._module.colorbar;if(!0===z.visible&&ut)for(var Q=Array.isArray(ut),j=Q?ut:[ut],Z=0;Z<j.length;Z++){var G=(U=j[Z]).container;(B=G?z[G]:z)&&B.showscale&&((O=H(B.colorbar))._id="cb"+z.uid+(Q&&G?"-"+G:""),O._traceIndex=z.index,O._propPrefix=(G?G+".":"")+"colorbar.",O._meta=z._meta,J(),k.push(O))}}for(var K in D._colorAxes)if((B=D[K]).showscale){var at=D._colorAxes[K];(O=H(B.colorbar))._id="cb"+K,O._propPrefix=K+".colorbar.",O._meta=D._meta,U={min:"cmin",max:"cmax"},"heatmap"!==at[0]&&(U.calc=(z=at[1])._module.colorbar.calc),J(),k.push(O)}return k}(F),function(k){return k._id});N.enter().append("g").attr("class",function(k){return k._id}).classed(L.colorbar,!0),N.each(function(k){var O=A.select(this);y.ensureSingle(O,"rect",L.cbbg),y.ensureSingle(O,"g",L.cbfills),y.ensureSingle(O,"g",L.cblines),y.ensureSingle(O,"g",L.cbaxis,function(z){z.classed(L.crisp,!0)}),y.ensureSingle(O,"g",L.cbtitleunshift,function(z){z.append("g").classed(L.cbtitle,!0)}),y.ensureSingle(O,"rect",L.cboutline);var B=function T(F,D,N){var k="v"===D.orientation,O=D.len,B=D.lenmode,z=D.thickness,U=D.thicknessmode,H=D.outlinewidth,J=D.borderwidth,nt=D.bgcolor,it=D.xanchor,ut=D.yanchor,Q=D.xpad,j=D.ypad,Z=D.x,G=k?D.y:1-D.y,K="paper"===D.yref,at="paper"===D.xref,$=N._fullLayout,X=$._size,rt=D._fillcolor,et=D._line,st=D.title,dt=st.side,bt=D._zrange||A.extent(("function"==typeof rt?rt:et.color).domain()),gt="function"==typeof et.color?et.color:function(){return et.color},Lt="function"==typeof rt?rt:function(){return rt},It=D._levels,Mt=function E(F,D,N){var z,U,k=D._levels,O=[],B=[],H=k.end+k.size/100,J=k.size,nt=1.001*N[0]-.001*N[1],it=1.001*N[1]-.001*N[0];for(U=0;U<1e5&&(z=k.start+U*J,!(J>0?z>=H:z<=H));U++)z>nt&&z<it&&O.push(z);if(D._fillgradient)B=[0];else if("function"==typeof D._fillcolor){var ut=D._filllevels;if(ut)for(H=ut.end+ut.size/100,J=ut.size,U=0;U<1e5&&(z=ut.start+U*J,!(J>0?z>=H:z<=H));U++)z>N[0]&&z<N[1]&&B.push(z);else(B=O.map(function(Q){return Q-k.size/2})).push(B[B.length-1]+k.size)}else D._fillcolor&&"string"==typeof D._fillcolor&&(B=[0]);return k.size<0&&(O.reverse(),B.reverse()),{line:O,fill:B}}(0,D,bt),xt=Mt.fill,At=Mt.line,Gt=Math.round(z*("fraction"===U?k?X.w:X.h:1)),Wt=Gt/(k?X.w:X.h),Pt=Math.round(O*("fraction"===B?k?X.h:X.w:1)),Vt=Pt/(k?X.h:X.w),te=at?X.w:N._fullLayout.width,Qt=K?X.h:N._fullLayout.height,Bt=Math.round(k?Z*te+Q:G*Qt+j),Ot={center:.5,right:1}[it]||0,qt={top:1,middle:.5}[ut]||0,ie=k?Z-Ot*Wt:G-qt*Wt,oe=k?G-qt*Vt:Z-Ot*Vt,pe=Math.round(k?Qt*(1-oe):te*oe);D._lenFrac=Vt,D._thickFrac=Wt,D._uFrac=ie,D._vFrac=oe;var de=D._axis=function d(F,D,N){var k=F._fullLayout,O="v"===D.orientation,B={type:"linear",range:N,tickmode:D.tickmode,nticks:D.nticks,tick0:D.tick0,dtick:D.dtick,tickvals:D.tickvals,ticktext:D.ticktext,ticks:D.ticks,ticklen:D.ticklen,tickwidth:D.tickwidth,tickcolor:D.tickcolor,showticklabels:D.showticklabels,labelalias:D.labelalias,ticklabelposition:D.ticklabelposition,ticklabeloverflow:D.ticklabeloverflow,ticklabelstep:D.ticklabelstep,tickfont:D.tickfont,tickangle:D.tickangle,tickformat:D.tickformat,exponentformat:D.exponentformat,minexponent:D.minexponent,separatethousands:D.separatethousands,showexponent:D.showexponent,showtickprefix:D.showtickprefix,tickprefix:D.tickprefix,showticksuffix:D.showticksuffix,ticksuffix:D.ticksuffix,title:D.title,showline:!0,anchor:"free",side:O?"right":"bottom",position:1},z=O?"y":"x",U={type:"linear",_id:z+D._id},H={letter:z,font:k.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:k.calendar};function J(nt,it){return y.coerce(B,U,p,nt,it)}return h(B,U,J,H,k),w(B,U,J,H),U}(N,D,bt);de.position=Wt+(k?Z+Q/X.w:G+j/X.h);var Fe=-1!==["top","bottom"].indexOf(dt);if(k&&Fe&&(de.title.side=dt,de.titlex=Z+Q/X.w,de.titley=oe+("top"===st.side?Vt-j/X.h:j/X.h)),!k&&!Fe&&(de.title.side=dt,de.titley=G+j/X.h,de.titlex=oe+Q/X.w),et.color&&"auto"===D.tickmode){de.tickmode="linear",de.tick0=It.start;var Kt=It.size,Et=y.constrain(Pt/50,4,15)+1,St=(bt[1]-bt[0])/((D.nticks||Et)*Kt);if(St>1){var Dt=Math.pow(10,Math.floor(Math.log(St)/Math.LN10));Kt*=Dt*y.roundUp(St/Dt,[2,5,10]),(Math.abs(It.start)/It.size+1e-6)%1<2e-6&&(de.tick0=0)}de.dtick=Kt}de.domain=k?[oe+j/X.h,oe+Vt-j/X.h]:[oe+Q/X.w,oe+Vt-Q/X.w],de.setScale(),F.attr("transform",e(Math.round(X.l),Math.round(X.t)));var ft,Ft=F.select("."+L.cbtitleunshift).attr("transform",e(-Math.round(X.l),-Math.round(X.t))),Nt=de.ticklabelposition,Rt=de.title.font.size,wt=F.select("."+L.cbaxis),pt=0,kt=0;function Zt(xe,Pe){var Ge={propContainer:de,propName:D._propPrefix+"title",traceIndex:D._traceIndex,_meta:D._meta,placeholder:$._dfltTitle.colorbar,containerGroup:F.select("."+L.cbtitle)},gr="h"===xe.charAt(0)?xe.substr(1):"h"+xe;F.selectAll("."+gr+",."+gr+"-math-group").remove(),c.draw(N,xe,r(Ge,Pe||{}))}function ee(){var xe,Pe;(k&&Fe||!k&&!Fe)&&("top"===dt&&(xe=Q+X.l+te*Z,Pe=j+X.t+Qt*(1-oe-Vt)+3+.75*Rt),"bottom"===dt&&(xe=Q+X.l+te*Z,Pe=j+X.t+Qt*(1-oe)-3-.25*Rt),"right"===dt&&(Pe=j+X.t+Qt*G+3+.75*Rt,xe=Q+X.l+te*oe),Zt(de._id+"title",{attributes:{x:xe,y:Pe,"text-anchor":k?"start":"middle"}}))}function se(){if(k&&!Fe||!k&&Fe){var Ge,gr,xe=de.position||0,Pe=de._offset+de._length/2;if("right"===dt)gr=Pe,Ge=X.l+te*xe+10+Rt*(de.showticklabels?1:.5);else if(Ge=Pe,"bottom"===dt&&(gr=X.t+Qt*xe+10+(-1===Nt.indexOf("inside")?de.tickfont.size:0)+("intside"!==de.ticks&&D.ticklen||0)),"top"===dt){var ue=st.text.split("<br>").length;gr=X.t+Qt*xe+10-Gt-v*Rt*ue}Zt((k?"h":"v")+de._id+"title",{avoid:{selection:A.select(N).selectAll("g."+de._id+"tick"),side:dt,offsetTop:k?0:X.t,offsetLeft:k?X.l:0,maxShift:k?$.width:$.height},attributes:{x:Ge,y:gr,"text-anchor":"middle"},transform:{rotate:k?-90:0,offset:0}})}}function Be(){if(!k&&!Fe||k&&Fe){var Ne,xe=F.select("."+L.cbtitle),Pe=xe.select("text"),Ge=[-H/2,H/2],gr=xe.select(".h"+de._id+"title-math-group").node(),ue=15.6;if(Pe.node()&&(ue=parseInt(Pe.node().style.fontSize,10)*v),gr?(Ne=a.bBox(gr),kt=Ne.width,(pt=Ne.height)>ue&&(Ge[1]-=(pt-ue)/2)):Pe.node()&&!Pe.classed(L.jsPlaceholder)&&(Ne=a.bBox(Pe.node()),kt=Ne.width,pt=Ne.height),k){if(pt){if(pt+=5,"top"===dt)de.domain[1]-=pt/X.h,Ge[1]*=-1;else{de.domain[0]+=pt/X.h;var Ye=f.lineCount(Pe);Ge[1]+=(1-Ye)*ue}xe.attr("transform",e(Ge[0],Ge[1])),de.setScale()}}else kt&&("right"===dt&&(de.domain[0]+=(kt+Rt/2)/X.w),xe.attr("transform",e(Ge[0],Ge[1])),de.setScale())}F.selectAll("."+L.cbfills+",."+L.cblines).attr("transform",k?e(0,Math.round(X.h*(1-de.domain[1]))):e(Math.round(X.w*de.domain[0]),0)),wt.attr("transform",k?e(0,Math.round(-X.t)):e(Math.round(-X.l),0));var xr=F.select("."+L.cbfills).selectAll("rect."+L.cbfill).attr("style","").data(xt);xr.enter().append("rect").classed(L.cbfill,!0).attr("style",""),xr.exit().remove();var rr=bt.map(de.c2p).map(Math.round).sort(function(Ae,Te){return Ae-Te});xr.each(function(Ae,Te){var Re=[0===Te?bt[0]:(xt[Te]+xt[Te-1])/2,Te===xt.length-1?bt[1]:(xt[Te]+xt[Te+1])/2].map(de.c2p).map(Math.round);k&&(Re[1]=y.constrain(Re[1]+(Re[1]>Re[0])?1:-1,rr[0],rr[1]));var Ie=A.select(this).attr(k?"x":"y",Bt).attr(k?"y":"x",A.min(Re)).attr(k?"width":"height",Math.max(Gt,2)).attr(k?"height":"width",Math.max(A.max(Re)-A.min(Re),2));if(D._fillgradient)a.gradient(Ie,N,D._id,k?"vertical":"horizontalreversed",D._fillgradient,"fill");else{var Xe=Lt(Ae).replace("e-","");Ie.attr("fill",g(Xe).toHexString())}});var ce=F.select("."+L.cblines).selectAll("path."+L.cbline).data(et.color&&et.width?At:[]);ce.enter().append("path").classed(L.cbline,!0),ce.exit().remove(),ce.each(function(Ae){var Te=Bt,Re=Math.round(de.c2p(Ae))+et.width/2%1;A.select(this).attr("d","M"+(k?Te+","+Re:Re+","+Te)+(k?"h":"v")+Gt).call(a.lineGroupStyle,et.width,gt(Ae),et.dash)}),wt.selectAll("g."+de._id+"tick,path").remove();var re=Bt+Gt+(H||0)/2-("outside"===D.ticks?1:0),ve=C.calcTicks(de),be=C.getTickSigns(de)[2];return C.drawTicks(N,de,{vals:"inside"===de.ticks?C.clipEnds(de,ve):ve,layer:wt,path:C.makeTickPath(de,re,be),transFn:C.makeTransTickFn(de)}),C.drawLabels(N,de,{vals:ve,layer:wt,transFn:C.makeTransTickLabelFn(de),labelFns:C.makeLabelFns(de,re)})}function Ke(){var xe,Pe=Gt+H/2;-1===Nt.indexOf("inside")&&(xe=a.bBox(wt.node()),Pe+=k?xe.width:xe.height),ft=Ft.select("text");var Ge=0,gr=k&&"top"===dt,ue=!k&&"right"===dt,Ne=0;if(ft.node()&&!ft.classed(L.jsPlaceholder)){var Ye,xr=Ft.select(".h"+de._id+"title-math-group").node();xr&&(k&&Fe||!k&&!Fe)?(Ge=(xe=a.bBox(xr)).width,Ye=xe.height):(Ge=(xe=a.bBox(Ft.node())).right-X.l-(k?Bt:pe),Ye=xe.bottom-X.t-(k?pe:Bt),!k&&"top"===dt&&(Pe+=xe.height,Ne=xe.height)),ue&&(ft.attr("transform",e(Ge/2+Rt/2,0)),Ge*=2),Pe=Math.max(Pe,k?Ge:Ye)}var rr=2*(k?Q:j)+Pe+J+H/2,ce=0;!k&&st.text&&"bottom"===ut&&G<=0&&(rr+=ce=rr/2,Ne+=ce),$._hColorbarMoveTitle=ce,$._hColorbarMoveCBTitle=Ne;var re=J+H,ve=(k?Bt:pe)-re/2-(k?Q:0),be=(k?pe:Bt)-(k?Pt:j+Ne-ce);F.select("."+L.cbbg).attr("x",ve).attr("y",be).attr(k?"width":"height",Math.max(rr-ce,2)).attr(k?"height":"width",Math.max(Pt+re,2)).call(s.fill,nt).call(s.stroke,D.bordercolor).style("stroke-width",J);var Ae=ue?Math.max(Ge-10,0):0;F.selectAll("."+L.cboutline).attr("x",(k?Bt:pe+Q)+Ae).attr("y",(k?pe+j-Pt:Bt)+(gr?pt:0)).attr(k?"width":"height",Math.max(Gt,2)).attr(k?"height":"width",Math.max(Pt-(k?2*j+pt:2*Q+Ae),2)).call(s.stroke,D.outlinecolor).style({fill:"none","stroke-width":H});var Te=k?Ot*rr:0,Re=k?0:(1-qt)*rr-Ne;if(F.attr("transform",e(Te=at?X.l-Te:-Te,Re=K?X.t-Re:-Re)),!k&&(J||g(nt).getAlpha()&&!g.equals($.paper_bgcolor,nt))){var Ie=wt.selectAll("text"),Xe=Ie[0].length,ar=F.select("."+L.cbbg).node(),nr=a.bBox(ar),cr=a.getTranslate(F),Ut=2;Ie.each(function(yr,dr){var Pr=0,Jr=Xe-1;if(dr===Pr||dr===Jr){var nn,Mr=a.bBox(this),Wr=a.getTranslate(this);dr===Jr?(nn=nr.right+cr.x+pe-J-Ut+Z-(Mr.right+Wr.x))>0&&(nn=0):dr===Pr&&(nn=nr.left+cr.x+pe+J+Ut-(Mr.left+Wr.x))<0&&(nn=0),nn&&(Xe<3?this.setAttribute("transform","translate("+nn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Ht={},Se=M[it],Ce=b[it],We=M[ut],qe=b[ut],or=rr-Gt;k?("pixels"===B?(Ht.y=G,Ht.t=Pt*We,Ht.b=Pt*qe):(Ht.t=Ht.b=0,Ht.yt=G+O*We,Ht.yb=G-O*qe),"pixels"===U?(Ht.x=Z,Ht.l=rr*Se,Ht.r=rr*Ce):(Ht.l=or*Se,Ht.r=or*Ce,Ht.xl=Z-z*Se,Ht.xr=Z+z*Ce)):("pixels"===B?(Ht.x=Z,Ht.l=Pt*Se,Ht.r=Pt*Ce):(Ht.l=Ht.r=0,Ht.xl=Z+O*Se,Ht.xr=Z-O*Ce),"pixels"===U?(Ht.y=1-G,Ht.t=rr*We,Ht.b=rr*qe):(Ht.t=or*We,Ht.b=or*qe,Ht.yt=G-z*We,Ht.yb=G+z*qe));var _e=D.y<.5?"b":"t",De=D.x<.5?"l":"r";N._fullLayout._reservedMargin[D._id]={};var sr={r:$.width-ve-Te,l:ve+Ht.r,b:$.height-be-Re,t:be+Ht.b};at&&K?i.autoMargin(N,D._id,Ht):at?N._fullLayout._reservedMargin[D._id][_e]=sr[_e]:K||k?N._fullLayout._reservedMargin[D._id][De]=sr[De]:N._fullLayout._reservedMargin[D._id][_e]=sr[_e]}return y.syncOrAsync([i.previousPromises,ee,Be,se,i.previousPromises,Ke],N)}(O,k,F);B&&B.then&&(F._promises||[]).push(B),F._context.edits.colorbarPosition&&function n(F,D,N){var z,U,H,k="v"===D.orientation,B=N._fullLayout._size;u.init({element:F.node(),gd:N,prepFn:function(){z=F.attr("transform"),l(F)},moveFn:function(J,nt){F.attr("transform",z+e(J,nt)),U=u.align((k?D._uFrac:D._vFrac)+J/B.w,k?D._thickFrac:D._lenFrac,0,1,D.xanchor),H=u.align((k?D._vFrac:1-D._uFrac)-nt/B.h,k?D._lenFrac:D._thickFrac,0,1,D.yanchor);var it=u.getCursor(U,H,D.xanchor,D.yanchor);l(F,it)},doneFn:function(){if(l(F),void 0!==U&&void 0!==H){var J={};J[D._propPrefix+"x"]=U,J[D._propPrefix+"y"]=H,void 0!==D._traceIndex?P.call("_guiRestyle",N,J,D._traceIndex):P.call("_guiRelayout",N,J)}}})}(O,k,F)}),N.exit().each(function(k){i.autoMargin(F,k._id)}).remove(),N.order()}}},76228:function(q,W,t){"use strict";var A=t(71828);q.exports=function(i){return A.isPlainObject(i.colorbar)}},12311:function(q,W,t){"use strict";q.exports={moduleType:"component",name:"colorbar",attributes:t(63583),supplyDefaults:t(62499),draw:t(98981).draw,hasColorbar:t(76228)}},50693:function(q,W,t){"use strict";var A=t(63583),g=t(30587).counter,i=t(78607),P=t(63282).scales;function u(y){return"`"+y+"`"}i(P),q.exports=function(e,r){e=e||"";var w,l=(r=r||{}).cLetter||"c",s=("onlyIfNumerical"in r||Boolean(e),"noScale"in r?r.noScale:"marker.line"===e),c="showScaleDflt"in r?r.showScaleDflt:"z"===l,f="string"==typeof r.colorscaleDflt?P[r.colorscaleDflt]:null,m=r.editTypeOverride||"",h=e?e+".":"";"colorAttr"in r?w=r.colorAttr:u(h+(w={z:"z",c:"color"}[l]));var v=l+"auto",M=l+"min",b=l+"max",L=l+"mid",E=(u(h+v),u(h+M),u(h+b),{});E[M]=E[b]=void 0;var d={};d[v]=!1;var F={};return"color"===w&&(F.color={valType:"color",arrayOk:!0,editType:m||"style"},r.anim&&(F.color.anim=!0)),F[v]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:E},F[M]={valType:"number",dflt:null,editType:m||"plot",impliedEdits:d},F[b]={valType:"number",dflt:null,editType:m||"plot",impliedEdits:d},F[L]={valType:"number",dflt:null,editType:"calc",impliedEdits:E},F.colorscale={valType:"colorscale",editType:"calc",dflt:f,impliedEdits:{autocolorscale:!1}},F.autocolorscale={valType:"boolean",dflt:!1!==r.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},F.reversescale={valType:"boolean",dflt:!1,editType:"plot"},s||(F.showscale={valType:"boolean",dflt:c,editType:"calc"},F.colorbar=A),r.noColorAxis||(F.coloraxis={valType:"subplotid",regex:g("coloraxis"),dflt:null,editType:"calc"}),F}},78803:function(q,W,t){"use strict";var A=t(92770),g=t(71828),i=t(52075).extractOpts;q.exports=function(C,u,y){var e=C._fullLayout,r=y.vals,l=y.containerStr,a=l?g.nestedProperty(u,l).get():u,s=i(a),c=!1!==s.auto,f=s.min,m=s.max,h=s.mid,w=function(){return g.aggNums(Math.min,null,r)},p=function(){return g.aggNums(Math.max,null,r)};void 0===f?f=w():c&&(f=a._colorAx&&A(f)?Math.min(f,w()):w()),void 0===m?m=p():c&&(m=a._colorAx&&A(m)?Math.max(m,p()):p()),c&&void 0!==h&&(m-h>h-f?f=h-(m-h):m-h<h-f&&(m=h+(h-f))),f===m&&(f-=.5,m+=.5),s._sync("min",f),s._sync("max",m),s.autocolorscale&&s._sync("colorscale",f*m<0?e.colorscale.diverging:f>=0?e.colorscale.sequential:e.colorscale.sequentialminus)}},33046:function(q,W,t){"use strict";var A=t(71828),g=t(52075).hasColorscale,i=t(52075).extractOpts;q.exports=function(C,u){function y(f,m){var h=f["_"+m];void 0!==h&&(f[m]=h)}function e(f,m){var h=m.container?A.nestedProperty(f,m.container).get():f;if(h)if(h.coloraxis)h._colorAx=u[h.coloraxis];else{var w=i(h),p=w.auto;(p||void 0===w.min)&&y(h,m.min),(p||void 0===w.max)&&y(h,m.max),w.autocolorscale&&y(h,"colorscale")}}for(var r=0;r<C.length;r++){var l=C[r],a=l._module.colorbar;if(a)if(Array.isArray(a))for(var s=0;s<a.length;s++)e(l,a[s]);else e(l,a);g(l,"marker.line")&&e(l,{container:"marker.line",min:"cmin",max:"cmax"})}for(var c in u._colorAxes)e(u[c],{min:"cmin",max:"cmax"})}},1586:function(q,W,t){"use strict";var A=t(92770),g=t(71828),i=t(76228),P=t(62499),C=t(63282).isValid,u=t(73972).traceIs;function y(e,r){var l=r.slice(0,r.length-1);return r?g.nestedProperty(e,l).get()||{}:e}q.exports=function e(r,l,a,s,c){var f=c.prefix,m=c.cLetter,h="_module"in l,w=y(r,f),p=y(l,f),o=y(l._template||{},f)||{},v=function(){return delete r.coloraxis,delete l.coloraxis,e(r,l,a,s,c)};if(h){var M=a._colorAxes||{},b=s(f+"coloraxis");if(b){var L=u(l,"contour")&&g.nestedProperty(l,"contours.coloring").get()||"heatmap",x=M[b];return void(x?(x[2].push(v),x[0]!==L&&(x[0]=!1,g.warn(["Ignoring coloraxis:",b,"setting","as it is linked to incompatible colorscales."].join(" ")))):M[b]=[L,l,[v]])}}var S=w[m+"min"],T=w[m+"max"],n=A(S)&&A(T)&&S<T;s(f+m+"auto",!n)?s(f+m+"mid"):(s(f+m+"min"),s(f+m+"max"));var D,N,d=w.colorscale,F=o.colorscale;void 0!==d&&(D=!C(d)),void 0!==F&&(D=!C(F)),s(f+"autocolorscale",D),s(f+"colorscale"),s(f+"reversescale"),"marker.line."!==f&&(f&&h&&(N=i(w)),s(f+"showscale",N)&&(f&&o&&(p._template=o),P(w,p,a)))}},52075:function(q,W,t){"use strict";var A=t(39898),g=t(84267),i=t(92770),P=t(71828),C=t(7901),u=t(63282).isValid;var e=["showscale","autocolorscale","colorscale","reversescale","colorbar"],r=["min","max","mid","auto"];function l(h){var v,M,b,w=h._colorAx,p=w||h,o={};for(M=0;M<e.length;M++)o[b=e[M]]=p[b];if(w)for(v="c",M=0;M<r.length;M++)o[b=r[M]]=p["c"+b];else{var L;for(M=0;M<r.length;M++)((L="c"+(b=r[M]))in p||(L="z"+b)in p)&&(o[b]=p[L]);v=L.charAt(0)}return o._sync=function(x,S){var T=-1!==r.indexOf(x)?v+x:x;p[T]=p["_"+T]=S},o}function a(h){for(var w=l(h),p=w.min,o=w.max,v=w.reversescale?s(w.colorscale):w.colorscale,M=v.length,b=new Array(M),L=new Array(M),x=0;x<M;x++){var S=v[x];b[x]=p+S[0]*(o-p),L[x]=S[1]}return{domain:b,range:L}}function s(h){for(var w=h.length,p=new Array(w),o=w-1,v=0;o>=0;o--,v++){var M=h[o];p[v]=[1-M[0],M[1]]}return p}function c(h,w){w=w||{};for(var p=h.domain,o=h.range,v=o.length,M=new Array(v),b=0;b<v;b++){var L=g(o[b]).toRgb();M[b]=[L.r,L.g,L.b,L.a]}var n,x=A.scale.linear().domain(p).range(M).clamp(!0),S=w.noNumericCheck,T=w.returnArray;return(n=S&&T?x:S?function(E){return m(x(E))}:T?function(E){return i(E)?x(E):g(E).isValid()?E:C.defaultLine}:function(E){return i(E)?m(x(E)):g(E).isValid()?E:C.defaultLine}).domain=x.domain,n.range=function(){return o},n}function m(h){return g({r:h[0],g:h[1],b:h[2],a:h[3]}).toRgbString()}q.exports={hasColorscale:function y(h,w,p){var o=w?P.nestedProperty(h,w).get()||{}:h,v=o[p||"color"],M=!1;if(P.isArrayOrTypedArray(v))for(var b=0;b<v.length;b++)if(i(v[b])){M=!0;break}return P.isPlainObject(o)&&(M||!0===o.showscale||i(o.cmin)&&i(o.cmax)||u(o.colorscale)||P.isPlainObject(o.colorbar))},extractOpts:l,extractScale:a,flipScale:s,makeColorScaleFunc:c,makeColorScaleFuncFromTrace:function f(h,w){return c(a(h),w)}}},21081:function(q,W,t){"use strict";var A=t(63282),g=t(52075);q.exports={moduleType:"component",name:"colorscale",attributes:t(50693),layoutAttributes:t(72673),supplyLayoutDefaults:t(30959),handleDefaults:t(1586),crossTraceDefaults:t(33046),calc:t(78803),scales:A.scales,defaultScale:A.defaultScale,getScale:A.get,isValidScale:A.isValid,hasColorscale:g.hasColorscale,extractOpts:g.extractOpts,extractScale:g.extractScale,flipScale:g.flipScale,makeColorScaleFunc:g.makeColorScaleFunc,makeColorScaleFuncFromTrace:g.makeColorScaleFuncFromTrace}},72673:function(q,W,t){"use strict";var A=t(1426).extendFlat,g=t(50693),i=t(63282).scales;q.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:i.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:i.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:i.RdBu,editType:"calc"}},coloraxis:A({_isSubplotObj:!0,editType:"calc"},g("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},30959:function(q,W,t){"use strict";var A=t(71828),g=t(44467),i=t(72673),P=t(1586);q.exports=function(u,y){function e(h,w){return A.coerce(u,y,i,h,w)}e("colorscale.sequential"),e("colorscale.sequentialminus"),e("colorscale.diverging");var l,a,r=y._colorAxes;function s(h,w){return A.coerce(l,a,i.coloraxis,h,w)}for(var c in r){var f=r[c];if(f[0])l=u[c]||{},(a=g.newContainer(y,c,"coloraxis"))._name=c,P(l,a,y,s,{prefix:"",cLetter:"c"});else{for(var m=0;m<f[2].length;m++)f[2][m]();delete y._colorAxes[c]}}}},63282:function(q,W,t){"use strict";var A=t(84267),g={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},i=g.RdBu;function C(y){var e=0;if(!Array.isArray(y)||y.length<2||!y[0]||!y[y.length-1]||0!=+y[0][0]||1!=+y[y.length-1][0])return!1;for(var r=0;r<y.length;r++){var l=y[r];if(2!==l.length||+l[0]<e||!A(l[1]).isValid())return!1;e=+l[0]}return!0}q.exports={scales:g,defaultScale:i,get:function P(y,e){if(e||(e=i),!y)return e;function r(){try{y=g[y]||JSON.parse(y)}catch(l){y=e}}return"string"==typeof y&&(r(),"string"==typeof y&&r()),C(y)?y:e},isValid:function u(y){return void 0!==g[y]||C(y)}}},92807:function(q){"use strict";q.exports=function(t,A,g,i,P){var C=(t-g)/(i-g),u=C+A/(i-g),y=(C+u)/2;return"left"===P||"bottom"===P?C:"center"===P||"middle"===P?y:"right"===P||"top"===P?u:C<.6666666666666666-y?C:u>1.3333333333333333-y?u:y}},70461:function(q,W,t){"use strict";var A=t(71828),g=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];q.exports=function(P,C,u,y){return P="left"===u?0:"center"===u?1:"right"===u?2:A.constrain(Math.floor(3*P),0,2),C="bottom"===y?0:"middle"===y?1:"top"===y?2:A.constrain(Math.floor(3*C),0,2),g[C][P]}},64505:function(q,W){"use strict";W.selectMode=function(t){return"lasso"===t||"select"===t},W.drawMode=function(t){return"drawclosedpath"===t||"drawopenpath"===t||"drawline"===t||"drawrect"===t||"drawcircle"===t},W.openMode=function(t){return"drawline"===t||"drawopenpath"===t},W.rectMode=function(t){return"select"===t||"drawline"===t||"drawrect"===t||"drawcircle"===t},W.freeMode=function(t){return"lasso"===t||"drawclosedpath"===t||"drawopenpath"===t},W.selectingOrDrawing=function(t){return W.freeMode(t)||W.rectMode(t)}},28569:function(q,W,t){"use strict";var A=t(48956),g=t(57035),i=t(38520),P=t(71828).removeElement,C=t(85555),u=q.exports={};u.align=t(92807),u.getCursor=t(70461);var y=t(26041);function e(){var l=document.createElement("div");l.className="dragcover";var a=l.style;return a.position="fixed",a.left=0,a.right=0,a.top=0,a.bottom=0,a.zIndex=999999999,a.background="none",document.body.appendChild(l),l}function r(l){return A(l.changedTouches?l.changedTouches[0]:l,document.body)}u.unhover=y.wrapped,u.unhoverRaw=y.raw,u.init=function(a){var h,w,p,o,v,M,b,L,s=a.gd,c=1,f=s._context.doubleClickDelay,m=a.element;s._mouseDownTime||(s._mouseDownTime=0),m.style.pointerEvents="all",m.onmousedown=T,i?(m._ontouchstart&&m.removeEventListener("touchstart",m._ontouchstart),m._ontouchstart=T,m.addEventListener("touchstart",T,{passive:!1})):m.ontouchstart=T;var S=a.clampFn||function x(d,F,D){return Math.abs(d)<D&&(d=0),Math.abs(F)<D&&(F=0),[d,F]};function T(d){s._dragged=!1,s._dragging=!0;var F=r(d);h=F[0],w=F[1],b=d.target,M=d,L=2===d.buttons||d.ctrlKey,void 0===d.clientX&&void 0===d.clientY&&(d.clientX=h,d.clientY=w),(p=(new Date).getTime())-s._mouseDownTime<f?c+=1:(c=1,s._mouseDownTime=p),a.prepFn&&a.prepFn(d,h,w),g&&!L?(v=e()).style.cursor=window.getComputedStyle(m).cursor:g||(v=document,o=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(m).cursor),document.addEventListener("mouseup",E),document.addEventListener("touchend",E),!1!==a.dragmode&&(d.preventDefault(),document.addEventListener("mousemove",n),document.addEventListener("touchmove",n,{passive:!1}))}function n(d){d.preventDefault();var F=r(d),N=S(F[0]-h,F[1]-w,a.minDrag||C.MINDRAG),k=N[0],O=N[1];(k||O)&&(s._dragged=!0,u.unhover(s,d)),s._dragged&&a.moveFn&&!L&&(s._dragdata={element:m,dx:k,dy:O},a.moveFn(k,O))}function E(d){if(delete s._dragdata,!1!==a.dragmode&&(d.preventDefault(),document.removeEventListener("mousemove",n),document.removeEventListener("touchmove",n)),document.removeEventListener("mouseup",E),document.removeEventListener("touchend",E),g?P(v):o&&(v.documentElement.style.cursor=o,o=null),s._dragging){if(s._dragging=!1,(new Date).getTime()-s._mouseDownTime>f&&(c=Math.max(c-1,1)),s._dragged)a.doneFn&&a.doneFn();else if(a.clickFn&&a.clickFn(c,M),!L){var F;try{F=new MouseEvent("click",d)}catch(N){var D=r(d);(F=document.createEvent("MouseEvents")).initMouseEvent("click",d.bubbles,d.cancelable,d.view,d.detail,d.screenX,d.screenY,D[0],D[1],d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,d.button,d.relatedTarget)}b.dispatchEvent(F)}s._dragging=!1,s._dragged=!1}else s._dragged=!1}},u.coverSlip=e},26041:function(q,W,t){"use strict";var A=t(11086),g=t(79990),i=t(24401).getGraphDiv,P=t(26675),C=q.exports={};C.wrapped=function(u,y,e){(u=i(u))._fullLayout&&g.clear(u._fullLayout._uid+P.HOVERID),C.raw(u,y,e)},C.raw=function(y,e){var r=y._fullLayout,l=y._hoverdata;e||(e={}),(!e.target||y._dragged||!1!==A.triggerHandler(y,"plotly_beforehover",e))&&(r._hoverlayer.selectAll("g").remove(),r._hoverlayer.selectAll("line").remove(),r._hoverlayer.selectAll("circle").remove(),y._hoverdata=void 0,e.target&&l&&y.emit("plotly_unhover",{event:e,points:l}))}},79952:function(q,W){"use strict";W.P={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},W.u={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},91424:function(q,W,t){"use strict";var A=t(39898),g=t(71828),i=g.numberFormat,P=t(92770),C=t(84267),u=t(73972),y=t(7901),e=t(21081),r=g.strTranslate,l=t(63893),a=t(77922),c=t(18783).LINE_SPACING,f=t(37822).DESELECTDIM,m=t(34098),h=t(39984),w=t(23469).appendArrayPointValue,p=q.exports={};function o(Mt,xt,At){var Gt=xt.fillpattern,Wt=Gt&&p.getPatternAttr(Gt.shape,0,"");if(Wt){var Pt=p.getPatternAttr(Gt.bgcolor,0,null),Vt=p.getPatternAttr(Gt.fgcolor,0,null),te=Gt.fgopacity,Qt=p.getPatternAttr(Gt.size,0,8),Bt=p.getPatternAttr(Gt.solidity,0,.3);p.pattern(Mt,"point",At,xt.uid,Wt,Qt,Bt,void 0,Gt.fillmode,Pt,Vt,te)}else xt.fillcolor&&Mt.call(y.fill,xt.fillcolor)}p.font=function(Mt,xt,At,Gt){g.isPlainObject(xt)&&(Gt=xt.color,At=xt.size,xt=xt.family),xt&&Mt.style("font-family",xt),At+1&&Mt.style("font-size",At+"px"),Gt&&Mt.call(y.fill,Gt)},p.setPosition=function(Mt,xt,At){Mt.attr("x",xt).attr("y",At)},p.setSize=function(Mt,xt,At){Mt.attr("width",xt).attr("height",At)},p.setRect=function(Mt,xt,At,Gt,Wt){Mt.call(p.setPosition,xt,At).call(p.setSize,Gt,Wt)},p.translatePoint=function(Mt,xt,At,Gt){var Wt=At.c2p(Mt.x),Pt=Gt.c2p(Mt.y);return!!(P(Wt)&&P(Pt)&&xt.node())&&("text"===xt.node().nodeName?xt.attr("x",Wt).attr("y",Pt):xt.attr("transform",r(Wt,Pt)),!0)},p.translatePoints=function(Mt,xt,At){Mt.each(function(Gt){var Wt=A.select(this);p.translatePoint(Gt,Wt,xt,At)})},p.hideOutsideRangePoint=function(Mt,xt,At,Gt,Wt,Pt){xt.attr("display",At.isPtWithinRange(Mt,Wt)&&Gt.isPtWithinRange(Mt,Pt)?null:"none")},p.hideOutsideRangePoints=function(Mt,xt){if(xt._hasClipOnAxisFalse){var At=xt.xaxis,Gt=xt.yaxis;Mt.each(function(Wt){var Pt=Wt[0].trace,Vt=Pt.xcalendar,te=Pt.ycalendar,Qt=u.traceIs(Pt,"bar-like")?".bartext":".point,.textpoint";Mt.selectAll(Qt).each(function(Bt){p.hideOutsideRangePoint(Bt,A.select(this),At,Gt,Vt,te)})})}},p.crispRound=function(Mt,xt,At){return xt&&P(xt)?Mt._context.staticPlot?xt:xt<1?1:Math.round(xt):At||0},p.singleLineStyle=function(Mt,xt,At,Gt,Wt){xt.style("fill","none");var Pt=(((Mt||[])[0]||{}).trace||{}).line||{},Vt=At||Pt.width||0,te=Wt||Pt.dash||"";y.stroke(xt,Gt||Pt.color),p.dashLine(xt,te,Vt)},p.lineGroupStyle=function(Mt,xt,At,Gt){Mt.style("fill","none").each(function(Wt){var Pt=(((Wt||[])[0]||{}).trace||{}).line||{},Vt=xt||Pt.width||0,te=Gt||Pt.dash||"";A.select(this).call(y.stroke,At||Pt.color).call(p.dashLine,te,Vt)})},p.dashLine=function(Mt,xt,At){xt=p.dashStyle(xt,At=+At||0),Mt.style({"stroke-dasharray":xt,"stroke-width":At+"px"})},p.dashStyle=function(Mt,xt){xt=+xt||1;var At=Math.max(xt,3);return"solid"===Mt?Mt="":"dot"===Mt?Mt=At+"px,"+At+"px":"dash"===Mt?Mt=3*At+"px,"+3*At+"px":"longdash"===Mt?Mt=5*At+"px,"+5*At+"px":"dashdot"===Mt?Mt=3*At+"px,"+At+"px,"+At+"px,"+At+"px":"longdashdot"===Mt&&(Mt=5*At+"px,"+2*At+"px,"+At+"px,"+2*At+"px"),Mt},p.singleFillStyle=function(Mt,xt){var At=A.select(Mt.node());o(Mt,((At.data()[0]||[])[0]||{}).trace||{},xt)},p.fillGroupStyle=function(Mt,xt){Mt.style("stroke-width",0).each(function(At){var Gt=A.select(this);At[0].trace&&o(Gt,At[0].trace,xt)})};var v=t(90998);p.symbolNames=[],p.symbolFuncs=[],p.symbolBackOffs=[],p.symbolNeedLines={},p.symbolNoDot={},p.symbolNoFill={},p.symbolList=[],Object.keys(v).forEach(function(Mt){var xt=v[Mt],At=xt.n;p.symbolList.push(At,String(At),Mt,At+100,String(At+100),Mt+"-open"),p.symbolNames[At]=Mt,p.symbolFuncs[At]=xt.f,p.symbolBackOffs[At]=xt.backoff||0,xt.needLine&&(p.symbolNeedLines[At]=!0),xt.noDot?p.symbolNoDot[At]=!0:p.symbolList.push(At+200,String(At+200),Mt+"-dot",At+300,String(At+300),Mt+"-open-dot"),xt.noFill&&(p.symbolNoFill[At]=!0)});var M=p.symbolNames.length;function L(Mt,xt,At,Gt){return p.symbolFuncs[Mt%100](xt,At,Gt)+(Mt>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}p.symbolNumber=function(Mt){if(P(Mt))Mt=+Mt;else if("string"==typeof Mt){var xt=0;Mt.indexOf("-open")>0&&(xt=100,Mt=Mt.replace("-open","")),Mt.indexOf("-dot")>0&&(xt+=200,Mt=Mt.replace("-dot","")),(Mt=p.symbolNames.indexOf(Mt))>=0&&(Mt+=xt)}return Mt%100>=M||Mt>=400?0:Math.floor(Math.max(Mt,0))};var x={x1:1,x2:0,y1:0,y2:0},S={x1:0,x2:0,y1:1,y2:0},T=i("~f"),n={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:x},horizontalreversed:{node:"linearGradient",attrs:x,reversed:!0},vertical:{node:"linearGradient",attrs:S},verticalreversed:{node:"linearGradient",attrs:S,reversed:!0}};p.gradient=function(Mt,xt,At,Gt,Wt,Pt){for(var Vt=Wt.length,te=n[Gt],Qt=new Array(Vt),Bt=0;Bt<Vt;Bt++)te.reversed?Qt[Vt-1-Bt]=[T(100*(1-Wt[Bt][0])),Wt[Bt][1]]:Qt[Bt]=[T(100*Wt[Bt][0]),Wt[Bt][1]];var Ot=xt._fullLayout,qt="g"+Ot._uid+"-"+At,ie=Ot._defs.select(".gradients").selectAll("#"+qt).data([Gt+Qt.join(";")],g.identity);ie.exit().remove(),ie.enter().append(te.node).each(function(){var oe=A.select(this);te.attrs&&oe.attr(te.attrs),oe.attr("id",qt);var pe=oe.selectAll("stop").data(Qt);pe.exit().remove(),pe.enter().append("stop"),pe.each(function(de){var Fe=C(de[1]);A.select(this).attr({offset:de[0]+"%","stop-color":y.tinyRGB(Fe),"stop-opacity":Fe.getAlpha()})})}),Mt.style(Pt,j(qt,xt)).style(Pt+"-opacity",null),Mt.classed("gradient_filled",!0)},p.pattern=function(Mt,xt,At,Gt,Wt,Pt,Vt,te,Qt,Bt,Ot,qt){var ie="legend"===xt;te&&("overlay"===Qt?Ot=y.contrast(Bt=te):(Bt=void 0,Ot=te));var de,Fe,Et,St,Dt,Ft,ee,se,Be,Ke,xe,oe=At._fullLayout,pe="p"+oe._uid+"-"+Gt,Nt={},Rt=C(Ot),wt=y.tinyRGB(Rt),pt=qt*Rt.getAlpha();switch(Wt){case"/":de=Pt*Math.sqrt(2),Fe=Pt*Math.sqrt(2),Ft="path",Nt={d:Et="M-"+de/4+","+Fe/4+"l"+de/2+",-"+Fe/2+"M0,"+Fe+"L"+de+",0M"+de/4*3+","+Fe/4*5+"l"+de/2+",-"+Fe/2,opacity:pt,stroke:wt,"stroke-width":(St=Vt*Pt)+"px"};break;case"\\":de=Pt*Math.sqrt(2),Fe=Pt*Math.sqrt(2),Ft="path",Nt={d:Et="M"+de/4*3+",-"+Fe/4+"l"+de/2+","+Fe/2+"M0,0L"+de+","+Fe+"M-"+de/4+","+Fe/4*3+"l"+de/2+","+Fe/2,opacity:pt,stroke:wt,"stroke-width":(St=Vt*Pt)+"px"};break;case"x":de=Pt*Math.sqrt(2),Fe=Pt*Math.sqrt(2),Et="M-"+de/4+","+Fe/4+"l"+de/2+",-"+Fe/2+"M0,"+Fe+"L"+de+",0M"+de/4*3+","+Fe/4*5+"l"+de/2+",-"+Fe/2+"M"+de/4*3+",-"+Fe/4+"l"+de/2+","+Fe/2+"M0,0L"+de+","+Fe+"M-"+de/4+","+Fe/4*3+"l"+de/2+","+Fe/2,St=Pt-Pt*Math.sqrt(1-Vt),Ft="path",Nt={d:Et,opacity:pt,stroke:wt,"stroke-width":St+"px"};break;case"|":Ft="path",Ft="path",Nt={d:Et="M"+(de=Pt)/2+",0L"+de/2+","+(Fe=Pt),opacity:pt,stroke:wt,"stroke-width":(St=Vt*Pt)+"px"};break;case"-":Ft="path",Ft="path",Nt={d:Et="M0,"+(Fe=Pt)/2+"L"+(de=Pt)+","+Fe/2,opacity:pt,stroke:wt,"stroke-width":(St=Vt*Pt)+"px"};break;case"+":Ft="path",Et="M"+(de=Pt)/2+",0L"+de/2+","+(Fe=Pt)+"M0,"+Fe/2+"L"+de+","+Fe/2,St=Pt-Pt*Math.sqrt(1-Vt),Ft="path",Nt={d:Et,opacity:pt,stroke:wt,"stroke-width":St+"px"};break;case".":de=Pt,Fe=Pt,Dt=Vt<Math.PI/4?Math.sqrt(Vt*Pt*Pt/Math.PI):(ee=Vt,se=Math.PI/4,Be=1,Ke=Pt/2,xe=Pt/Math.sqrt(2),Ke+(xe-Ke)*(ee-se)/(Be-se)),Ft="circle",Nt={cx:de/2,cy:Fe/2,r:Dt,opacity:pt,fill:wt}}var kt=[Wt||"noSh",Bt||"noBg",Ot||"noFg",Pt,Vt].join(";"),Zt=oe._defs.select(".patterns").selectAll("#"+pe).data([kt],g.identity);Zt.exit().remove(),Zt.enter().append("pattern").each(function(){var ee=A.select(this);if(ee.attr({id:pe,width:de+"px",height:Fe+"px",patternUnits:"userSpaceOnUse",patternTransform:ie?"scale(0.8)":""}),Bt){var se=C(Bt),Be=y.tinyRGB(se),Ke=se.getAlpha(),xe=ee.selectAll("rect").data([0]);xe.exit().remove(),xe.enter().append("rect").attr({width:de+"px",height:Fe+"px",fill:Be,"fill-opacity":Ke})}var Pe=ee.selectAll(Ft).data([0]);Pe.exit().remove(),Pe.enter().append(Ft).attr(Nt)}),Mt.style("fill",j(pe,At)).style("fill-opacity",null),Mt.classed("pattern_filled",!0)},p.initGradients=function(Mt){g.ensureSingle(Mt._fullLayout._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),A.select(Mt).selectAll(".gradient_filled").classed("gradient_filled",!1)},p.initPatterns=function(Mt){g.ensureSingle(Mt._fullLayout._defs,"g","patterns").selectAll("pattern").remove(),A.select(Mt).selectAll(".pattern_filled").classed("pattern_filled",!1)},p.getPatternAttr=function(Mt,xt,At){return Mt&&g.isArrayOrTypedArray(Mt)?xt<Mt.length?Mt[xt]:At:Mt},p.pointStyle=function(Mt,xt,At,Gt){if(Mt.size()){var Wt=p.makePointStyleFns(xt);Mt.each(function(Pt){p.singlePointStyle(Pt,A.select(this),xt,Wt,At,Gt)})}},p.singlePointStyle=function(Mt,xt,At,Gt,Wt,Pt){var Vt=At.marker,te=Vt.line;if(Pt&&Pt.i>=0&&void 0===Mt.i&&(Mt.i=Pt.i),xt.style("opacity",Gt.selectedOpacityFn?Gt.selectedOpacityFn(Mt):void 0===Mt.mo?Vt.opacity:Mt.mo),Gt.ms2mrc){var Qt;Qt="various"===Mt.ms||"various"===Vt.size?3:Gt.ms2mrc(Mt.ms),Mt.mrc=Qt,Gt.selectedSizeFn&&(Qt=Mt.mrc=Gt.selectedSizeFn(Mt));var Bt=p.symbolNumber(Mt.mx||Vt.symbol)||0;Mt.om=Bt%200>=100;var Ot=It(Mt,At),qt=K(Mt,At);xt.attr("d",L(Bt,Qt,Ot,qt))}var oe,pe,de,ie=!1;if(Mt.so?(de=te.outlierwidth,pe=te.outliercolor,oe=Vt.outliercolor):(de=(Mt.mlw+1||(te||{}).width+1||(Mt.trace?(Mt.trace.marker.line||{}).width:0)+1)-1||0,pe="mlc"in Mt?Mt.mlcc=Gt.lineScale(Mt.mlc):g.isArrayOrTypedArray(te.color)?y.defaultLine:te.color,g.isArrayOrTypedArray(Vt.color)&&(oe=y.defaultLine,ie=!0),oe="mc"in Mt?Mt.mcc=Gt.markerScale(Mt.mc):Vt.color||Vt.colors||"rgba(0,0,0,0)",Gt.selectedColorFn&&(oe=Gt.selectedColorFn(Mt))),Mt.om)xt.call(y.stroke,oe).style({"stroke-width":(de||1)+"px",fill:"none"});else{xt.style("stroke-width",(Mt.isBlank?0:de)+"px");var Kt=Vt.gradient,Et=Mt.mgt;Et?ie=!0:Et=Kt&&Kt.type,g.isArrayOrTypedArray(Et)&&(n[Et=Et[0]]||(Et=0));var St=Vt.pattern,Dt=St&&p.getPatternAttr(St.shape,Mt.i,"");if(Et&&"none"!==Et){var Ft=Mt.mgc;Ft?ie=!0:Ft=Kt.color;var Nt=At.uid;ie&&(Nt+="-"+Mt.i),p.gradient(xt,Wt,Nt,Et,[[0,Ft],[1,oe]],"fill")}else if(Dt){var Rt=!1,wt=St.fgcolor;!wt&&Pt&&Pt.color&&(wt=Pt.color,Rt=!0);var ft=p.getPatternAttr(wt,Mt.i,Pt&&Pt.color||null),pt=p.getPatternAttr(St.bgcolor,Mt.i,null),kt=St.fgopacity,Zt=p.getPatternAttr(St.size,Mt.i,8),ee=p.getPatternAttr(St.solidity,Mt.i,.3);Rt=Rt||Mt.mcc||g.isArrayOrTypedArray(St.shape)||g.isArrayOrTypedArray(St.bgcolor)||g.isArrayOrTypedArray(St.fgcolor)||g.isArrayOrTypedArray(St.size)||g.isArrayOrTypedArray(St.solidity);var se=At.uid;Rt&&(se+="-"+Mt.i),p.pattern(xt,"point",Wt,se,Dt,Zt,ee,Mt.mcc,St.fillmode,pt,ft,kt)}else g.isArrayOrTypedArray(oe)?y.fill(xt,oe[Mt.i]):y.fill(xt,oe);de&&y.stroke(xt,pe)}},p.makePointStyleFns=function(Mt){var xt={},At=Mt.marker;return xt.markerScale=p.tryColorscale(At,""),xt.lineScale=p.tryColorscale(At,"line"),u.traceIs(Mt,"symbols")&&(xt.ms2mrc=m.isBubble(Mt)?h(Mt):function(){return(At.size||6)/2}),Mt.selectedpoints&&g.extendFlat(xt,p.makeSelectedPointStyleFns(Mt)),xt},p.makeSelectedPointStyleFns=function(Mt){var xt={},Wt=Mt.marker||{},Pt=(Mt.selected||{}).marker||{},Vt=(Mt.unselected||{}).marker||{},Qt=Pt.opacity,Bt=Vt.opacity,Ot=void 0!==Qt,qt=void 0!==Bt;(g.isArrayOrTypedArray(Wt.opacity)||Ot||qt)&&(xt.selectedOpacityFn=function(Dt){var Ft=void 0===Dt.mo?Wt.opacity:Dt.mo;return Dt.selected?Ot?Qt:Ft:qt?Bt:f*Ft});var ie=Wt.color,oe=Pt.color,pe=Vt.color;(oe||pe)&&(xt.selectedColorFn=function(Dt){var Ft=Dt.mcc||ie;return Dt.selected?oe||Ft:pe||Ft});var de=Wt.size,Fe=Pt.size,Kt=Vt.size,Et=void 0!==Fe,St=void 0!==Kt;return u.traceIs(Mt,"symbols")&&(Et||St)&&(xt.selectedSizeFn=function(Dt){var Ft=Dt.mrc||de/2;return Dt.selected?Et?Fe/2:Ft:St?Kt/2:Ft}),xt},p.makeSelectedTextStyleFns=function(Mt){var xt={},te=(Mt.textfont||{}).color,Qt=((Mt.selected||{}).textfont||{}).color,Bt=((Mt.unselected||{}).textfont||{}).color;return xt.selectedTextColorFn=function(Ot){var qt=Ot.tc||te;return Ot.selected?Qt||qt:Bt||(Qt?qt:y.addOpacity(qt,f))},xt},p.selectedPointStyle=function(Mt,xt){if(Mt.size()&&xt.selectedpoints){var At=p.makeSelectedPointStyleFns(xt),Gt=xt.marker||{},Wt=[];At.selectedOpacityFn&&Wt.push(function(Pt,Vt){Pt.style("opacity",At.selectedOpacityFn(Vt))}),At.selectedColorFn&&Wt.push(function(Pt,Vt){y.fill(Pt,At.selectedColorFn(Vt))}),At.selectedSizeFn&&Wt.push(function(Pt,Vt){var te=Vt.mx||Gt.symbol||0,Qt=At.selectedSizeFn(Vt);Pt.attr("d",L(p.symbolNumber(te),Qt,It(Vt,xt),K(Vt,xt))),Vt.mrc2=Qt}),Wt.length&&Mt.each(function(Pt){for(var Vt=A.select(this),te=0;te<Wt.length;te++)Wt[te](Vt,Pt)})}},p.tryColorscale=function(Mt,xt){var At=xt?g.nestedProperty(Mt,xt).get():Mt;return At&&(At.colorscale||At._colorAx)&&g.isArrayOrTypedArray(At.color)?e.makeColorScaleFuncFromTrace(At):g.identity};var E={start:1,end:-1,middle:0,bottom:1,top:-1};function d(Mt,xt,At,Gt,Wt){var Pt=A.select(Mt.node().parentNode),Vt=-1!==xt.indexOf("top")?"top":-1!==xt.indexOf("bottom")?"bottom":"middle",te=-1!==xt.indexOf("left")?"end":-1!==xt.indexOf("right")?"start":"middle",Qt=Gt?Gt/.8+1:0,Bt=(l.lineCount(Mt)-1)*c+1,Ot=E[te]*Qt,qt=.75*At+E[Vt]*Qt+(E[Vt]-1)*Bt*At/2;Mt.attr("text-anchor",te),Wt||Pt.attr("transform",r(Ot,qt))}function F(Mt,xt){var At=Mt.ts||xt.textfont.size;return P(At)&&At>0?At:0}p.textPointStyle=function(Mt,xt,At){if(Mt.size()){var Gt;if(xt.selectedpoints){var Wt=p.makeSelectedTextStyleFns(xt);Gt=Wt.selectedTextColorFn}var Pt=xt.texttemplate,Vt=At._fullLayout;Mt.each(function(te){var Qt=A.select(this),Bt=Pt?g.extractOption(te,xt,"txt","texttemplate"):g.extractOption(te,xt,"tx","text");if(Bt||0===Bt){if(Pt){var Ot=xt._module.formatLabels,qt=Ot?Ot(te,xt,Vt):{},ie={};w(ie,xt,te.i),Bt=g.texttemplateString(Bt,qt,Vt._d3locale,ie,te,xt._meta||{})}var pe=te.tp||xt.textposition,de=F(te,xt),Fe=Gt?Gt(te):te.tc||xt.textfont.color;Qt.call(p.font,te.tf||xt.textfont.family,de,Fe).text(Bt).call(l.convertToTspans,At).call(d,pe,de,te.mrc)}else Qt.remove()})}},p.selectedTextStyle=function(Mt,xt){if(Mt.size()&&xt.selectedpoints){var At=p.makeSelectedTextStyleFns(xt);Mt.each(function(Gt){var Wt=A.select(this),Pt=At.selectedTextColorFn(Gt),Vt=Gt.tp||xt.textposition,te=F(Gt,xt);y.fill(Wt,Pt);var Qt=u.traceIs(xt,"bar-like");d(Wt,Vt,te,Gt.mrc2||Gt.mrc,Qt)})}};var N,k;function O(Mt,xt,At){return At&&(Mt=nt(Mt)),xt?z(Mt[1]):B(Mt[0])}function B(Mt){var xt=A.round(Mt,2);return N=xt,xt}function z(Mt){var xt=A.round(Mt,2);return k=xt,xt}function U(Mt,xt,At,Gt){var Wt=Mt[0]-xt[0],Pt=Mt[1]-xt[1],Vt=At[0]-xt[0],te=At[1]-xt[1],Qt=Math.pow(Wt*Wt+Pt*Pt,.25),Bt=Math.pow(Vt*Vt+te*te,.25),Ot=(Bt*Bt*Wt-Qt*Qt*Vt)*Gt,qt=(Bt*Bt*Pt-Qt*Qt*te)*Gt,ie=3*Bt*(Qt+Bt),oe=3*Qt*(Qt+Bt);return[[B(xt[0]+(ie&&Ot/ie)),z(xt[1]+(ie&&qt/ie))],[B(xt[0]-(oe&&Ot/oe)),z(xt[1]-(oe&&qt/oe))]]}p.smoothopen=function(Mt,xt){if(Mt.length<3)return"M"+Mt.join("L");var Wt,At="M"+Mt[0],Gt=[];for(Wt=1;Wt<Mt.length-1;Wt++)Gt.push(U(Mt[Wt-1],Mt[Wt],Mt[Wt+1],xt));for(At+="Q"+Gt[0][0]+" "+Mt[1],Wt=2;Wt<Mt.length-1;Wt++)At+="C"+Gt[Wt-2][1]+" "+Gt[Wt-1][0]+" "+Mt[Wt];return At+"Q"+Gt[Mt.length-3][1]+" "+Mt[Mt.length-1]},p.smoothclosed=function(Mt,xt){if(Mt.length<3)return"M"+Mt.join("L")+"Z";var Pt,At="M"+Mt[0],Gt=Mt.length-1,Wt=[U(Mt[Gt],Mt[0],Mt[1],xt)];for(Pt=1;Pt<Gt;Pt++)Wt.push(U(Mt[Pt-1],Mt[Pt],Mt[Pt+1],xt));for(Wt.push(U(Mt[Gt-1],Mt[Gt],Mt[0],xt)),Pt=1;Pt<=Gt;Pt++)At+="C"+Wt[Pt-1][1]+" "+Wt[Pt][0]+" "+Mt[Pt];return At+"C"+Wt[Gt][1]+" "+Wt[0][0]+" "+Mt[0]+"Z"};var H={hv:function(Mt,xt,At){return"H"+B(xt[0])+"V"+O(xt,1,At)},vh:function(Mt,xt,At){return"V"+z(xt[1])+"H"+O(xt,0,At)},hvh:function(Mt,xt,At){return"H"+B((Mt[0]+xt[0])/2)+"V"+z(xt[1])+"H"+O(xt,0,At)},vhv:function(Mt,xt,At){return"V"+z((Mt[1]+xt[1])/2)+"H"+B(xt[0])+"V"+O(xt,1,At)}},J=function(Mt,xt,At){return"L"+O(xt,0,At)+","+O(xt,1,At)};function nt(Mt,xt){var At=Mt.backoff,Gt=Mt.trace,Wt=Mt.d,Pt=Mt.i;if(At&&Gt&&Gt.marker&&Gt.marker.angle%360==0&&Gt.line&&"spline"!==Gt.line.shape){var Vt=g.isArrayOrTypedArray(At),te=Mt,Qt=xt?xt[0]:N||0,Bt=xt?xt[1]:k||0,Ot=te[0],qt=te[1],pe=Math.atan2(qt-Bt,Ot-Qt),de=Vt?At[Pt]:At;if("auto"===de){var Fe=te.i;"scatter"===Gt.type&&Fe--;var Kt=te.marker,Et=Kt.symbol;g.isArrayOrTypedArray(Et)&&(Et=Et[Fe]);var St=Kt.size;g.isArrayOrTypedArray(St)&&(St=St[Fe]),de=Kt?p.symbolBackOffs[p.symbolNumber(Et)]*St:0,de+=p.getMarkerStandoff(Wt[Fe],Gt)||0}var Dt=Ot-de*Math.cos(pe),Ft=qt-de*Math.sin(pe);(Dt<=Ot&&Dt>=Qt||Dt>=Ot&&Dt<=Qt)&&(Ft<=qt&&Ft>=Bt||Ft>=qt&&Ft<=Bt)&&(Mt=[Dt,Ft])}return Mt}p.steps=function(Mt){var xt=H[Mt]||J;return function(At){for(var Gt="M"+B(At[0][0])+","+z(At[0][1]),Wt=At.length,Pt=1;Pt<Wt;Pt++)Gt+=xt(At[Pt-1],At[Pt],Pt===Wt-1);return Gt}},p.applyBackoff=nt,p.makeTester=function(){var Mt=g.ensureSingleById(A.select("body"),"svg","js-plotly-tester",function(At){At.attr(a.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),xt=g.ensureSingle(Mt,"path","js-reference-point",function(At){At.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});p.tester=Mt,p.testref=xt},p.savedBBoxes={};var it=0;function Q(Mt){var xt=Mt.getAttribute("data-unformatted");if(null!==xt)return xt+Mt.getAttribute("data-math")+Mt.getAttribute("text-anchor")+Mt.getAttribute("style")}function j(Mt,xt){if(!Mt)return null;var At=xt._context,Gt=At._exportedPlot?"":At._baseUrl||"";return Gt?"url('"+Gt+"#"+Mt+"')":"url(#"+Mt+")"}p.bBox=function(Mt,xt,At){var Gt,Bt,Ot;if(At||(At=Q(Mt)),At){if(Gt=p.savedBBoxes[At])return g.extendFlat({},Gt)}else if(1===Mt.childNodes.length){var Wt=Mt.childNodes[0];if(At=Q(Wt)){var Pt=+Wt.getAttribute("x")||0,Vt=+Wt.getAttribute("y")||0,te=Wt.getAttribute("transform");if(!te){var Qt=p.bBox(Wt,!1,At);return Pt&&(Qt.left+=Pt,Qt.right+=Pt),Vt&&(Qt.top+=Vt,Qt.bottom+=Vt),Qt}if(Gt=p.savedBBoxes[At+="~"+Pt+"~"+Vt+"~"+te])return g.extendFlat({},Gt)}}xt?Bt=Mt:(Ot=p.tester.node(),Bt=Mt.cloneNode(!0),Ot.appendChild(Bt)),A.select(Bt).attr("transform",null).call(l.positionText,0,0);var qt=Bt.getBoundingClientRect(),ie=p.testref.node().getBoundingClientRect();xt||Ot.removeChild(Bt);var oe={height:qt.height,width:qt.width,left:qt.left-ie.left,top:qt.top-ie.top,right:qt.right-ie.left,bottom:qt.bottom-ie.top};return it>=1e4&&(p.savedBBoxes={},it=0),At&&(p.savedBBoxes[At]=oe),it++,g.extendFlat({},oe)},p.setClipUrl=function(Mt,xt,At){Mt.attr("clip-path",j(xt,At))},p.getTranslate=function(Mt){var Wt=(Mt[Mt.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(Pt,Vt,te){return[Vt,te].join(" ")}).split(" ");return{x:+Wt[0]||0,y:+Wt[1]||0}},p.setTranslate=function(Mt,xt,At){var Pt=Mt.attr?"attr":"setAttribute",Vt=Mt[Mt.attr?"attr":"getAttribute"]("transform")||"";return xt=xt||0,At=At||0,Vt=Vt.replace(/(\btranslate\(.*?\);?)/,"").trim(),Vt=(Vt+=r(xt,At)).trim(),Mt[Pt]("transform",Vt),Vt},p.getScale=function(Mt){var Wt=(Mt[Mt.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(Pt,Vt,te){return[Vt,te].join(" ")}).split(" ");return{x:+Wt[0]||1,y:+Wt[1]||1}},p.setScale=function(Mt,xt,At){var Pt=Mt.attr?"attr":"setAttribute",Vt=Mt[Mt.attr?"attr":"getAttribute"]("transform")||"";return xt=xt||1,At=At||1,Vt=Vt.replace(/(\bscale\(.*?\);?)/,"").trim(),Vt=(Vt+="scale("+xt+","+At+")").trim(),Mt[Pt]("transform",Vt),Vt};var Z=/\s*sc.*/;p.setPointGroupScale=function(Mt,xt,At){if(xt=xt||1,At=At||1,Mt){var Gt=1===xt&&1===At?"":"scale("+xt+","+At+")";Mt.each(function(){var Wt=(this.getAttribute("transform")||"").replace(Z,"");Wt=(Wt+=Gt).trim(),this.setAttribute("transform",Wt)})}};var G=/translate\([^)]*\)\s*$/;function K(Mt,xt){var At;return Mt&&(At=Mt.mf),void 0===At&&(At=xt.marker&&xt.marker.standoff||0),xt._geo||xt._xA?At:-At}p.setTextPointsScale=function(Mt,xt,At){!Mt||Mt.each(function(){var Gt,Wt=A.select(this),Pt=Wt.select("text");if(Pt.node()){var Vt=parseFloat(Pt.attr("x")||0),te=parseFloat(Pt.attr("y")||0),Qt=(Wt.attr("transform")||"").match(G);Gt=1===xt&&1===At?[]:[r(Vt,te),"scale("+xt+","+At+")",r(-Vt,-te)],Qt&&Gt.push(Qt),Wt.attr("transform",Gt.join(""))}})},p.getMarkerStandoff=K;var et,st,dt,bt,gt,Lt,at=Math.atan2,$=Math.cos,X=Math.sin;function rt(Mt,xt){var At=xt[0],Gt=xt[1];return[At*$(Mt)-Gt*X(Mt),At*X(Mt)+Gt*$(Mt)]}function It(Mt,xt){var At=Mt.ma;void 0===At&&(At=xt.marker.angle||0);var Gt,Wt,Pt=xt.marker.angleref;if("previous"===Pt||"north"===Pt){if(xt._geo){var Vt=xt._geo.project(Mt.lonlat);Gt=Vt[0],Wt=Vt[1]}else{var te=xt._xA,Qt=xt._yA;if(!te||!Qt)return 90;Gt=te.c2p(Mt.x),Wt=Qt.c2p(Mt.y)}if(xt._geo){var de,Bt=Mt.lonlat[0],Ot=Mt.lonlat[1],qt=xt._geo.project([Bt,Ot+1e-5]),ie=xt._geo.project([Bt+1e-5,Ot]),oe=at(ie[1]-Wt,ie[0]-Gt),pe=at(qt[1]-Wt,qt[0]-Gt);if("north"===Pt)de=At/180*Math.PI;else if("previous"===Pt){var Fe=Bt/180*Math.PI,Kt=Ot/180*Math.PI,Et=et/180*Math.PI,St=st/180*Math.PI,Dt=Et-Fe,Ft=$(St)*X(Dt),Nt=X(St)*$(Kt)-$(St)*X(Kt)*$(Dt);de=-at(Ft,Nt)-Math.PI,et=Bt,st=Ot}var Rt=rt(oe,[$(de),0]),wt=rt(pe,[X(de),0]);At=at(Rt[1]+wt[1],Rt[0]+wt[0])/Math.PI*180,"previous"===Pt&&(Lt!==xt.uid||Mt.i!==gt+1)&&(At=null)}if("previous"===Pt&&!xt._geo)if(Lt===xt.uid&&Mt.i===gt+1&&P(Gt)&&P(Wt)){var ft=Gt-dt,pt=Wt-bt,kt=xt.line&&xt.line.shape||"",Zt=kt.slice(kt.length-1);"h"===Zt&&(pt=0),"v"===Zt&&(ft=0),At+=at(pt,ft)/Math.PI*180+90}else At=null}return dt=Gt,bt=Wt,gt=Mt.i,Lt=xt.uid,At}p.getMarkerAngle=It},90998:function(q,W,t){"use strict";var l,a,s,c,A=t(95616),g=t(39898).round,i="M0,0Z",P=Math.sqrt(2),C=Math.sqrt(3),u=Math.PI,y=Math.cos,e=Math.sin;function r(m){return null===m}function f(m,h,w){if(!(m&&m%360!=0||h))return w;if(s===m&&c===h&&l===w)return a;function p(D,N){var k=y(D),O=e(D),B=N[0],z=N[1]+(h||0);return[B*k-z*O,B*O+z*k]}s=m,c=h,l=w;for(var o=m/180*u,v=0,M=0,b=A(w),L="",x=0;x<b.length;x++){var S=b[x],T=S[0],n=v,E=M;if("M"===T||"L"===T)v=+S[1],M=+S[2];else if("m"===T||"l"===T)v+=+S[1],M+=+S[2];else if("H"===T)v=+S[1];else if("h"===T)v+=+S[1];else if("V"===T)M=+S[1];else if("v"===T)M+=+S[1];else if("A"===T){v=+S[1],M=+S[2];var d=p(o,[+S[6],+S[7]]);S[6]=d[0],S[7]=d[1],S[3]=+S[3]+m}("H"===T||"V"===T)&&(T="L"),("h"===T||"v"===T)&&(T="l"),("m"===T||"l"===T)&&(v-=n,M-=E);var F=p(o,[v,M]);("H"===T||"V"===T)&&(T="L"),("M"===T||"L"===T||"m"===T||"l"===T)&&(S[1]=F[0],S[2]=F[1]),S[0]=T,L+=S[0]+S.slice(1).join(",")}return a=L,L}q.exports={circle:{n:0,f:function(m,h,w){if(r(h))return i;var p=g(m,2),o="M"+p+",0A"+p+","+p+" 0 1,1 0,-"+p+"A"+p+","+p+" 0 0,1 "+p+",0Z";return w?f(h,w,o):o}},square:{n:1,f:function(m,h,w){if(r(h))return i;var p=g(m,2);return f(h,w,"M"+p+","+p+"H-"+p+"V-"+p+"H"+p+"Z")}},diamond:{n:2,f:function(m,h,w){if(r(h))return i;var p=g(1.3*m,2);return f(h,w,"M"+p+",0L0,"+p+"L-"+p+",0L0,-"+p+"Z")}},cross:{n:3,f:function(m,h,w){if(r(h))return i;var p=g(.4*m,2),o=g(1.2*m,2);return f(h,w,"M"+o+","+p+"H"+p+"V"+o+"H-"+p+"V"+p+"H-"+o+"V-"+p+"H-"+p+"V-"+o+"H"+p+"V-"+p+"H"+o+"Z")}},x:{n:4,f:function(m,h,w){if(r(h))return i;var p=g(.8*m/P,2),o="l"+p+","+p,v="l"+p+",-"+p,M="l-"+p+",-"+p,b="l-"+p+","+p;return f(h,w,"M0,"+p+o+v+M+v+M+b+M+b+o+b+o+"Z")}},"triangle-up":{n:5,f:function(m,h,w){if(r(h))return i;var p=g(2*m/C,2);return f(h,w,"M-"+p+","+g(m/2,2)+"H"+p+"L0,-"+g(m,2)+"Z")}},"triangle-down":{n:6,f:function(m,h,w){if(r(h))return i;var p=g(2*m/C,2);return f(h,w,"M-"+p+",-"+g(m/2,2)+"H"+p+"L0,"+g(m,2)+"Z")}},"triangle-left":{n:7,f:function(m,h,w){if(r(h))return i;var p=g(2*m/C,2);return f(h,w,"M"+g(m/2,2)+",-"+p+"V"+p+"L-"+g(m,2)+",0Z")}},"triangle-right":{n:8,f:function(m,h,w){if(r(h))return i;var p=g(2*m/C,2);return f(h,w,"M-"+g(m/2,2)+",-"+p+"V"+p+"L"+g(m,2)+",0Z")}},"triangle-ne":{n:9,f:function(m,h,w){if(r(h))return i;var p=g(.6*m,2),o=g(1.2*m,2);return f(h,w,"M-"+o+",-"+p+"H"+p+"V"+o+"Z")}},"triangle-se":{n:10,f:function(m,h,w){if(r(h))return i;var p=g(.6*m,2),o=g(1.2*m,2);return f(h,w,"M"+p+",-"+o+"V"+p+"H-"+o+"Z")}},"triangle-sw":{n:11,f:function(m,h,w){if(r(h))return i;var p=g(.6*m,2),o=g(1.2*m,2);return f(h,w,"M"+o+","+p+"H-"+p+"V-"+o+"Z")}},"triangle-nw":{n:12,f:function(m,h,w){if(r(h))return i;var p=g(.6*m,2),o=g(1.2*m,2);return f(h,w,"M-"+p+","+o+"V-"+p+"H"+o+"Z")}},pentagon:{n:13,f:function(m,h,w){if(r(h))return i;var p=g(.951*m,2),o=g(.588*m,2),v=g(-m,2),M=g(-.309*m,2);return f(h,w,"M"+p+","+M+"L"+o+","+g(.809*m,2)+"H-"+o+"L-"+p+","+M+"L0,"+v+"Z")}},hexagon:{n:14,f:function(m,h,w){if(r(h))return i;var p=g(m,2),o=g(m/2,2),v=g(m*C/2,2);return f(h,w,"M"+v+",-"+o+"V"+o+"L0,"+p+"L-"+v+","+o+"V-"+o+"L0,-"+p+"Z")}},hexagon2:{n:15,f:function(m,h,w){if(r(h))return i;var p=g(m,2),o=g(m/2,2),v=g(m*C/2,2);return f(h,w,"M-"+o+","+v+"H"+o+"L"+p+",0L"+o+",-"+v+"H-"+o+"L-"+p+",0Z")}},octagon:{n:16,f:function(m,h,w){if(r(h))return i;var p=g(.924*m,2),o=g(.383*m,2);return f(h,w,"M-"+o+",-"+p+"H"+o+"L"+p+",-"+o+"V"+o+"L"+o+","+p+"H-"+o+"L-"+p+","+o+"V-"+o+"Z")}},star:{n:17,f:function(m,h,w){if(r(h))return i;var p=1.4*m,o=g(.225*p,2),v=g(.951*p,2),M=g(.363*p,2),b=g(.588*p,2),L=g(-p,2),x=g(-.309*p,2),S=g(.118*p,2),T=g(.809*p,2);return f(h,w,"M"+o+","+x+"H"+v+"L"+M+","+S+"L"+b+","+T+"L0,"+g(.382*p,2)+"L-"+b+","+T+"L-"+M+","+S+"L-"+v+","+x+"H-"+o+"L0,"+L+"Z")}},hexagram:{n:18,f:function(m,h,w){if(r(h))return i;var p=g(.66*m,2),o=g(.38*m,2),v=g(.76*m,2);return f(h,w,"M-"+v+",0l-"+o+",-"+p+"h"+v+"l"+o+",-"+p+"l"+o+","+p+"h"+v+"l-"+o+","+p+"l"+o+","+p+"h-"+v+"l-"+o+","+p+"l-"+o+",-"+p+"h-"+v+"Z")}},"star-triangle-up":{n:19,f:function(m,h,w){if(r(h))return i;var p=g(m*C*.8,2),o=g(.8*m,2),v=g(1.6*m,2),M=g(4*m,2),b="A "+M+","+M+" 0 0 1 ";return f(h,w,"M-"+p+","+o+b+p+","+o+b+"0,-"+v+b+"-"+p+","+o+"Z")}},"star-triangle-down":{n:20,f:function(m,h,w){if(r(h))return i;var p=g(m*C*.8,2),o=g(.8*m,2),v=g(1.6*m,2),M=g(4*m,2),b="A "+M+","+M+" 0 0 1 ";return f(h,w,"M"+p+",-"+o+b+"-"+p+",-"+o+b+"0,"+v+b+p+",-"+o+"Z")}},"star-square":{n:21,f:function(m,h,w){if(r(h))return i;var p=g(1.1*m,2),o=g(2*m,2),v="A "+o+","+o+" 0 0 1 ";return f(h,w,"M-"+p+",-"+p+v+"-"+p+","+p+v+p+","+p+v+p+",-"+p+v+"-"+p+",-"+p+"Z")}},"star-diamond":{n:22,f:function(m,h,w){if(r(h))return i;var p=g(1.4*m,2),o=g(1.9*m,2),v="A "+o+","+o+" 0 0 1 ";return f(h,w,"M-"+p+",0"+v+"0,"+p+v+p+",0"+v+"0,-"+p+v+"-"+p+",0Z")}},"diamond-tall":{n:23,f:function(m,h,w){if(r(h))return i;var p=g(.7*m,2),o=g(1.4*m,2);return f(h,w,"M0,"+o+"L"+p+",0L0,-"+o+"L-"+p+",0Z")}},"diamond-wide":{n:24,f:function(m,h,w){if(r(h))return i;var p=g(1.4*m,2),o=g(.7*m,2);return f(h,w,"M0,"+o+"L"+p+",0L0,-"+o+"L-"+p+",0Z")}},hourglass:{n:25,f:function(m,h,w){if(r(h))return i;var p=g(m,2);return f(h,w,"M"+p+","+p+"H-"+p+"L"+p+",-"+p+"H-"+p+"Z")},noDot:!0},bowtie:{n:26,f:function(m,h,w){if(r(h))return i;var p=g(m,2);return f(h,w,"M"+p+","+p+"V-"+p+"L-"+p+","+p+"V-"+p+"Z")},noDot:!0},"circle-cross":{n:27,f:function(m,h,w){if(r(h))return i;var p=g(m,2);return f(h,w,"M0,"+p+"V-"+p+"M"+p+",0H-"+p+"M"+p+",0A"+p+","+p+" 0 1,1 0,-"+p+"A"+p+","+p+" 0 0,1 "+p+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(m,h,w){if(r(h))return i;var p=g(m,2),o=g(m/P,2);return f(h,w,"M"+o+","+o+"L-"+o+",-"+o+"M"+o+",-"+o+"L-"+o+","+o+"M"+p+",0A"+p+","+p+" 0 1,1 0,-"+p+"A"+p+","+p+" 0 0,1 "+p+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(m,h,w){if(r(h))return i;var p=g(m,2);return f(h,w,"M0,"+p+"V-"+p+"M"+p+",0H-"+p+"M"+p+","+p+"H-"+p+"V-"+p+"H"+p+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(m,h,w){if(r(h))return i;var p=g(m,2);return f(h,w,"M"+p+","+p+"L-"+p+",-"+p+"M"+p+",-"+p+"L-"+p+","+p+"M"+p+","+p+"H-"+p+"V-"+p+"H"+p+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(m,h,w){if(r(h))return i;var p=g(1.3*m,2);return f(h,w,"M"+p+",0L0,"+p+"L-"+p+",0L0,-"+p+"ZM0,-"+p+"V"+p+"M-"+p+",0H"+p)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(m,h,w){if(r(h))return i;var p=g(1.3*m,2),o=g(.65*m,2);return f(h,w,"M"+p+",0L0,"+p+"L-"+p+",0L0,-"+p+"ZM-"+o+",-"+o+"L"+o+","+o+"M-"+o+","+o+"L"+o+",-"+o)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(m,h,w){if(r(h))return i;var p=g(1.4*m,2);return f(h,w,"M0,"+p+"V-"+p+"M"+p+",0H-"+p)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(m,h,w){if(r(h))return i;var p=g(m,2);return f(h,w,"M"+p+","+p+"L-"+p+",-"+p+"M"+p+",-"+p+"L-"+p+","+p)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(m,h,w){if(r(h))return i;var p=g(1.2*m,2),o=g(.85*m,2);return f(h,w,"M0,"+p+"V-"+p+"M"+p+",0H-"+p+"M"+o+","+o+"L-"+o+",-"+o+"M"+o+",-"+o+"L-"+o+","+o)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(m,h,w){if(r(h))return i;var p=g(m/2,2),o=g(m,2);return f(h,w,"M"+p+","+o+"V-"+o+"M"+(p-o)+",-"+o+"V"+o+"M"+o+","+p+"H-"+o+"M-"+o+","+(p-o)+"H"+o)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(m,h,w){if(r(h))return i;var p=g(1.2*m,2),o=g(1.6*m,2),v=g(.8*m,2);return f(h,w,"M-"+p+","+v+"L0,0M"+p+","+v+"L0,0M0,-"+o+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(m,h,w){if(r(h))return i;var p=g(1.2*m,2),o=g(1.6*m,2),v=g(.8*m,2);return f(h,w,"M-"+p+",-"+v+"L0,0M"+p+",-"+v+"L0,0M0,"+o+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(m,h,w){if(r(h))return i;var p=g(1.2*m,2),o=g(1.6*m,2),v=g(.8*m,2);return f(h,w,"M"+v+","+p+"L0,0M"+v+",-"+p+"L0,0M-"+o+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(m,h,w){if(r(h))return i;var p=g(1.2*m,2),o=g(1.6*m,2),v=g(.8*m,2);return f(h,w,"M-"+v+","+p+"L0,0M-"+v+",-"+p+"L0,0M"+o+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(m,h,w){if(r(h))return i;var p=g(1.4*m,2);return f(h,w,"M"+p+",0H-"+p)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(m,h,w){if(r(h))return i;var p=g(1.4*m,2);return f(h,w,"M0,"+p+"V-"+p)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(m,h,w){if(r(h))return i;var p=g(m,2);return f(h,w,"M"+p+",-"+p+"L-"+p+","+p)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(m,h,w){if(r(h))return i;var p=g(m,2);return f(h,w,"M"+p+","+p+"L-"+p+",-"+p)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(m,h,w){if(r(h))return i;var p=g(m,2);return f(h,w,"M0,0L-"+p+","+g(2*m,2)+"H"+p+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(m,h,w){if(r(h))return i;var p=g(m,2);return f(h,w,"M0,0L-"+p+",-"+g(2*m,2)+"H"+p+"Z")},noDot:!0},"arrow-left":{n:47,f:function(m,h,w){if(r(h))return i;var p=g(2*m,2),o=g(m,2);return f(h,w,"M0,0L"+p+",-"+o+"V"+o+"Z")},noDot:!0},"arrow-right":{n:48,f:function(m,h,w){if(r(h))return i;var p=g(2*m,2),o=g(m,2);return f(h,w,"M0,0L-"+p+",-"+o+"V"+o+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(m,h,w){if(r(h))return i;var p=g(m,2);return f(h,w,"M-"+p+",0H"+p+"M0,0L-"+p+","+g(2*m,2)+"H"+p+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(m,h,w){if(r(h))return i;var p=g(m,2);return f(h,w,"M-"+p+",0H"+p+"M0,0L-"+p+",-"+g(2*m,2)+"H"+p+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(m,h,w){if(r(h))return i;var p=g(2*m,2),o=g(m,2);return f(h,w,"M0,-"+o+"V"+o+"M0,0L"+p+",-"+o+"V"+o+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(m,h,w){if(r(h))return i;var p=g(2*m,2),o=g(m,2);return f(h,w,"M0,-"+o+"V"+o+"M0,0L-"+p+",-"+o+"V"+o+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(m,h,w){if(r(h))return i;var p=u/2.5,o=2*m*y(p),v=2*m*e(p);return f(h,w,"M0,0L"+-o+","+v+"L"+o+","+v+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(m,h,w){if(r(h))return i;var p=u/4,o=2*m*y(p),v=2*m*e(p);return f(h,w,"M0,0L"+-o+","+v+"A "+2*m+","+2*m+" 0 0 1 "+o+","+v+"Z")},backoff:.4,noDot:!0}}},25673:function(q){"use strict";q.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},84532:function(q,W,t){"use strict";var A=t(92770),g=t(73972),i=t(89298),P=t(71828),C=t(45827);function u(y,e,r,l){var a=e["error_"+l]||{},c=[];if(a.visible&&-1!==["linear","log"].indexOf(r.type)){for(var f=C(a),m=0;m<y.length;m++){var h=y[m],w=h.i;if(void 0===w)w=m;else if(null===w)continue;var p=h[l];if(A(r.c2l(p))){var o=f(p,w);if(A(o[0])&&A(o[1])){var v=h[l+"s"]=p-o[0],M=h[l+"h"]=p+o[1];c.push(v,M)}}}var L=e._extremes[r._id],x=i.findExtremes(r,c,P.extendFlat({tozero:L.opts.tozero},{padded:!0}));L.min=L.min.concat(x.min),L.max=L.max.concat(x.max)}}q.exports=function(e){for(var r=e.calcdata,l=0;l<r.length;l++){var a=r[l],s=a[0].trace;if(!0===s.visible&&g.traceIs(s,"errorBarsOK")){var c=i.getFromId(e,s.xaxis),f=i.getFromId(e,s.yaxis);u(a,s,c,"x"),u(a,s,f,"y")}}}},45827:function(q){"use strict";function W(t,A){return"percent"===t?function(g){return Math.abs(g*A/100)}:"constant"===t?function(){return Math.abs(A)}:"sqrt"===t?function(g){return Math.sqrt(Math.abs(g))}:void 0}q.exports=function(A){var g=A.type,i=A.symmetric;if("data"===g){var P=A.array||[];if(i)return function(r,l){var a=+P[l];return[a,a]};var C=A.arrayminus||[];return function(r,l){var a=+P[l],s=+C[l];return isNaN(a)&&isNaN(s)?[NaN,NaN]:[s||0,a||0]}}var u=W(g,A.value),y=W(g,A.valueminus);return i||void 0===A.valueminus?function(r){var l=u(r);return[l,l]}:function(r){return[y(r),u(r)]}}},97587:function(q,W,t){"use strict";var A=t(92770),g=t(73972),i=t(71828),P=t(44467),C=t(25673);q.exports=function(u,y,e,r){var l="error_"+r.axis,a=P.newContainer(y,l),s=u[l]||{};function c(v,M){return i.coerce(s,a,C,v,M)}if(!1!==c("visible",void 0!==s.array||void 0!==s.value||"sqrt"===s.type)){var h=c("type","array"in s?"data":"percent"),w=!0;"sqrt"!==h&&(w=c("symmetric",!(("data"===h?"arrayminus":"valueminus")in s))),"data"===h?(c("array"),c("traceref"),w||(c("arrayminus"),c("tracerefminus"))):("percent"===h||"constant"===h)&&(c("value"),w||c("valueminus"));var p="copy_"+r.inherit+"style";r.inherit&&(y["error_"+r.inherit]||{}).visible&&c(p,!(s.color||A(s.thickness)||A(s.width))),(!r.inherit||!a[p])&&(c("color",e),c("thickness"),c("width",g.traceIs(y,"gl3d")?0:4))}}},37369:function(q,W,t){"use strict";var A=t(71828),g=t(30962).overrideAll,i=t(25673),P={error_x:A.extendFlat({},i),error_y:A.extendFlat({},i)};delete P.error_x.copy_zstyle,delete P.error_y.copy_zstyle,delete P.error_y.copy_ystyle;var C={error_x:A.extendFlat({},i),error_y:A.extendFlat({},i),error_z:A.extendFlat({},i)};delete C.error_x.copy_ystyle,delete C.error_y.copy_ystyle,delete C.error_z.copy_ystyle,delete C.error_z.copy_zstyle,q.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:P,bar:P,histogram:P,scatter3d:g(C,"calc","nested"),scattergl:g(P,"calc","nested")}},supplyDefaults:t(97587),calc:t(84532),makeComputeError:t(45827),plot:t(19398),style:t(62662),hoverInfo:function u(y,e,r){(e.error_y||{}).visible&&(r.yerr=y.yh-y.y,e.error_y.symmetric||(r.yerrneg=y.y-y.ys)),(e.error_x||{}).visible&&(r.xerr=y.xh-y.x,e.error_x.symmetric||(r.xerrneg=y.x-y.xs))}}},19398:function(q,W,t){"use strict";var A=t(39898),g=t(92770),i=t(91424),P=t(34098);q.exports=function(y,e,r,l){var s=r.xaxis,c=r.yaxis,f=l&&l.duration>0,m=y._context.staticPlot;e.each(function(h){var v,w=h[0].trace,p=w.error_x||{},o=w.error_y||{};w.ids&&(v=function(x){return x.id});var M=P.hasMarkers(w)&&w.marker.maxdisplayed>0;!o.visible&&!p.visible&&(h=[]);var b=A.select(this).selectAll("g.errorbar").data(h,v);if(b.exit().remove(),h.length){p.visible||b.selectAll("path.xerror").remove(),o.visible||b.selectAll("path.yerror").remove(),b.style("opacity",1);var L=b.enter().append("g").classed("errorbar",!0);f&&L.style("opacity",0).transition().duration(l.duration).style("opacity",1),i.setClipUrl(b,r.layerClipId,y),b.each(function(x){var S=A.select(this),T=function C(u,y,e){var r={x:y.c2p(u.x),y:e.c2p(u.y)};return void 0!==u.yh&&(r.yh=e.c2p(u.yh),r.ys=e.c2p(u.ys),g(r.ys)||(r.noYS=!0,r.ys=e.c2p(u.ys,!0))),void 0!==u.xh&&(r.xh=y.c2p(u.xh),r.xs=y.c2p(u.xs),g(r.xs)||(r.noXS=!0,r.xs=y.c2p(u.xs,!0))),r}(x,s,c);if(!M||x.vis){var n,E=S.select("path.yerror");if(o.visible&&g(T.x)&&g(T.yh)&&g(T.ys)){var d=o.width;n="M"+(T.x-d)+","+T.yh+"h"+2*d+"m-"+d+",0V"+T.ys,T.noYS||(n+="m-"+d+",0h"+2*d),E.size()?f&&(E=E.transition().duration(l.duration).ease(l.easing)):E=S.append("path").style("vector-effect",m?"none":"non-scaling-stroke").classed("yerror",!0),E.attr("d",n)}else E.remove();var F=S.select("path.xerror");if(p.visible&&g(T.y)&&g(T.xh)&&g(T.xs)){var D=(p.copy_ystyle?o:p).width;n="M"+T.xh+","+(T.y-D)+"v"+2*D+"m0,-"+D+"H"+T.xs,T.noXS||(n+="m0,-"+D+"v"+2*D),F.size()?f&&(F=F.transition().duration(l.duration).ease(l.easing)):F=S.append("path").style("vector-effect",m?"none":"non-scaling-stroke").classed("xerror",!0),F.attr("d",n)}else F.remove()}})}})}},62662:function(q,W,t){"use strict";var A=t(39898),g=t(7901);q.exports=function(P){P.each(function(C){var u=C[0].trace,y=u.error_y||{},e=u.error_x||{},r=A.select(this);r.selectAll("path.yerror").style("stroke-width",y.thickness+"px").call(g.stroke,y.color),e.copy_ystyle&&(e=y),r.selectAll("path.xerror").style("stroke-width",e.thickness+"px").call(g.stroke,e.color)})}},77914:function(q,W,t){"use strict";var A=t(41940),g=t(528).hoverlabel,i=t(1426).extendFlat;q.exports={hoverlabel:{bgcolor:i({},g.bgcolor,{arrayOk:!0}),bordercolor:i({},g.bordercolor,{arrayOk:!0}),font:A({arrayOk:!0,editType:"none"}),align:i({},g.align,{arrayOk:!0}),namelength:i({},g.namelength,{arrayOk:!0}),editType:"none"}}},30732:function(q,W,t){"use strict";var A=t(71828),g=t(73972);function i(P,C,u,y){y=y||A.identity,Array.isArray(P)&&(C[0][u]=y(P))}q.exports=function(C){var u=C.calcdata,y=C._fullLayout;function e(c){return function(f){return A.coerceHoverinfo({hoverinfo:f},{_module:c._module},y)}}for(var r=0;r<u.length;r++){var l=u[r],a=l[0].trace;if(!g.traceIs(a,"pie-like")){var s=g.traceIs(a,"2dMap")?i:A.fillArray;s(a.hoverinfo,l,"hi",e(a)),a.hovertemplate&&s(a.hovertemplate,l,"ht"),a.hoverlabel&&(s(a.hoverlabel.bgcolor,l,"hbg"),s(a.hoverlabel.bordercolor,l,"hbc"),s(a.hoverlabel.font.size,l,"hts"),s(a.hoverlabel.font.color,l,"htc"),s(a.hoverlabel.font.family,l,"htf"),s(a.hoverlabel.namelength,l,"hnl"),s(a.hoverlabel.align,l,"hta"))}}}},75914:function(q,W,t){"use strict";var A=t(73972),g=t(88335).hover;q.exports=function(P,C,u){var y=A.getComponentMethod("annotations","onClick")(P,P._hoverdata);function e(){P.emit("plotly_click",{points:P._hoverdata,event:C})}void 0!==u&&g(P,C,u,!0),P._hoverdata&&C&&C.target&&(y&&y.then?y.then(e):e(),C.stopImmediatePropagation&&C.stopImmediatePropagation())}},26675:function(q){"use strict";q.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},54268:function(q,W,t){"use strict";var A=t(71828),g=t(77914),i=t(38048);q.exports=function(C,u,y,e){var l=A.extendFlat({},e.hoverlabel);u.hovertemplate&&(l.namelength=-1),i(C,u,function r(a,s){return A.coerce(C,u,g,a,s)},l)}},23469:function(q,W,t){"use strict";var A=t(71828);W.getSubplot=function(y){return y.subplot||y.xaxis+y.yaxis||y.geo},W.isTraceInSubplots=function(y,e){if("splom"===y.type){for(var r=y.xaxes||[],l=y.yaxes||[],a=0;a<r.length;a++)for(var s=0;s<l.length;s++)if(-1!==e.indexOf(r[a]+l[s]))return!0;return!1}return-1!==e.indexOf(W.getSubplot(y))},W.flat=function(y,e){for(var r=new Array(y.length),l=0;l<y.length;l++)r[l]=e;return r},W.p2c=function(y,e){for(var r=new Array(y.length),l=0;l<y.length;l++)r[l]=y[l].p2c(e);return r},W.getDistanceFunction=function(y,e,r,l){return"closest"===y?l||W.quadrature(e,r):"x"===y.charAt(0)?e:r},W.getClosest=function(y,e,r){if(!1!==r.index)r.index>=0&&r.index<y.length?r.distance=0:r.index=!1;else for(var l=0;l<y.length;l++){var a=e(y[l]);a<=r.distance&&(r.index=l,r.distance=a)}return r},W.inbox=function(y,e,r){return y*e<0||0===y?r:1/0},W.quadrature=function(y,e){return function(r){var l=y(r),a=e(r);return Math.sqrt(l*l+a*a)}},W.makeEventData=function(y,e,r){var l="index"in y?y.index:y.pointNumber,a={data:e._input,fullData:e,curveNumber:e.index,pointNumber:l};if(e._indexToPoints){var s=e._indexToPoints[l];1===s.length?a.pointIndex=s[0]:a.pointIndices=s}else a.pointIndex=l;return e._module.eventData?a=e._module.eventData(a,y,e,r,l):("xVal"in y?a.x=y.xVal:"x"in y&&(a.x=y.x),"yVal"in y?a.y=y.yVal:"y"in y&&(a.y=y.y),y.xa&&(a.xaxis=y.xa),y.ya&&(a.yaxis=y.ya),void 0!==y.zLabelVal&&(a.z=y.zLabelVal)),W.appendArrayPointValue(a,e,l),a},W.appendArrayPointValue=function(y,e,r){var l=e._arrayAttrs;if(l)for(var a=0;a<l.length;a++){var s=l[a],c=i(s);if(void 0===y[c]){var m=P(A.nestedProperty(e,s).get(),r);void 0!==m&&(y[c]=m)}}},W.appendArrayMultiPointValues=function(y,e,r){var l=e._arrayAttrs;if(l)for(var a=0;a<l.length;a++){var s=l[a],c=i(s);if(void 0===y[c]){for(var f=A.nestedProperty(e,s).get(),m=new Array(r.length),h=0;h<r.length;h++)m[h]=P(f,r[h]);y[c]=m}}};var g={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function i(y){return g[y]||y}function P(y,e){return Array.isArray(e)?Array.isArray(y)&&Array.isArray(y[e[0]])?y[e[0]][e[1]]:void 0:y[e]}var C={x:!0,y:!0},u={"x unified":!0,"y unified":!0};W.isUnifiedHover=function(y){return"string"==typeof y&&!!u[y]},W.isXYhover=function(y){return"string"==typeof y&&!!C[y]}},88335:function(q,W,t){"use strict";var A=t(39898),g=t(92770),i=t(84267),P=t(71828),C=P.strTranslate,u=P.strRotate,y=t(11086),e=t(63893),r=t(39918),l=t(91424),a=t(7901),s=t(28569),c=t(89298),f=t(73972),m=t(23469),h=t(26675),w=t(99017),p=t(43969),o=h.YANGLE,v=Math.PI*o/180,M=1/Math.sin(v),b=Math.cos(v),L=Math.sin(v),x=h.HOVERARROWSIZE,S=h.HOVERTEXTPAD,T={box:!0,ohlc:!0,violin:!0,candlestick:!0},n={scatter:!0,scattergl:!0,splom:!0};function E(K,at,$,X,rt){$||($="xy");var et=Array.isArray($)?$:[$],st=K._fullLayout,dt=st._plots||[],bt=dt[$],gt=st._has("cartesian");if(bt){var Lt=bt.overlays.map(function(Ar){return Ar.id});et=et.concat(Lt)}for(var It=et.length,Mt=new Array(It),xt=new Array(It),At=!1,Gt=0;Gt<It;Gt++){var Wt=et[Gt];if(dt[Wt])At=!0,Mt[Gt]=dt[Wt].xaxis,xt[Gt]=dt[Wt].yaxis;else{if(!st[Wt]||!st[Wt]._subplot)return void P.warn("Unrecognized subplot: "+Wt);var Pt=st[Wt]._subplot;Mt[Gt]=Pt.xaxis,xt[Gt]=Pt.yaxis}}var Vt=at.hovermode||st.hovermode;if(Vt&&!At&&(Vt="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(Vt)||!K.calcdata||K.querySelector(".zoombox")||K._dragging)return s.unhoverRaw(K,at);var te=st.hoverdistance;-1===te&&(te=1/0);var Qt=st.spikedistance;-1===Qt&&(Qt=1/0);var qt,ie,oe,pe,de,Fe,Kt,Et,St,Dt,Ft,Nt,Rt,Bt=[],Ot=[],wt={hLinePoint:null,vLinePoint:null},ft=!1;if(Array.isArray(at))for(Vt="array",oe=0;oe<at.length;oe++)(de=K.calcdata[at[oe].curveNumber||0])&&(Fe=de[0].trace,"skip"!==de[0].trace.hoverinfo&&(Ot.push(de),"h"===Fe.orientation&&(ft=!0)));else{for(pe=0;pe<K.calcdata.length;pe++)"skip"!==(Fe=(de=K.calcdata[pe])[0].trace).hoverinfo&&m.isTraceInSubplots(Fe,et)&&(Ot.push(de),"h"===Fe.orientation&&(ft=!0));var kt,Zt;if(rt){if(!1===y.triggerHandler(K,"plotly_beforehover",at))return;var ee=rt.getBoundingClientRect();kt=at.clientX-ee.left,Zt=at.clientY-ee.top,st._calcInverseTransform(K);var se=P.apply3DTransform(st._invTransform)(kt,Zt);if(Zt=se[1],(kt=se[0])<0||kt>Mt[0]._length||Zt<0||Zt>xt[0]._length)return s.unhoverRaw(K,at)}else kt="xpx"in at?at.xpx:Mt[0]._length/2,Zt="ypx"in at?at.ypx:xt[0]._length/2;if(at.pointerX=kt+Mt[0]._offset,at.pointerY=Zt+xt[0]._offset,qt="xval"in at?m.flat(et,at.xval):m.p2c(Mt,kt),ie="yval"in at?m.flat(et,at.yval):m.p2c(xt,Zt),!g(qt[0])||!g(ie[0]))return P.warn("Fx.hover failed",at,K),s.unhoverRaw(K,at)}var Be=1/0;function Ke(Ar,Br){for(pe=0;pe<Ot.length;pe++)if((de=Ot[pe])&&de[0]&&de[0].trace&&!0===(Fe=de[0].trace).visible&&0!==Fe._length&&-1===["carpet","contourcarpet"].indexOf(Fe._module.name)){if("splom"===Fe.type?Kt=et[Et=0]:(Kt=m.getSubplot(Fe),Et=et.indexOf(Kt)),m.isUnifiedHover(St=Vt)&&(St=St.charAt(0)),Nt={cd:de,trace:Fe,xa:Mt[Et],ya:xt[Et],maxHoverDistance:te,maxSpikeDistance:Qt,index:!1,distance:Math.min(Be,te),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:a.defaultLine,name:Fe.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},st[Kt]&&(Nt.subplot=st[Kt]._subplot),st._splomScenes&&st._splomScenes[Fe.uid]&&(Nt.scene=st._splomScenes[Fe.uid]),Rt=Bt.length,"array"===St){var Or=at[pe];"pointNumber"in Or?(Nt.index=Or.pointNumber,St="closest"):(St="","xval"in Or&&(Dt=Or.xval,St="x"),"yval"in Or&&(Ft=Or.yval,St=St?"closest":"y"))}else void 0!==Ar&&void 0!==Br?(Dt=Ar,Ft=Br):(Dt=qt[Et],Ft=ie[Et]);if(0!==te)if(Fe._module&&Fe._module.hoverPoints){var an=Fe._module.hoverPoints(Nt,Dt,Ft,St,{finiteRange:!0,hoverLayer:st._hoverlayer});if(an)for(var dn,pn=0;pn<an.length;pn++)g((dn=an[pn]).x0)&&g(dn.y0)&&Bt.push(U(dn,Vt))}else P.log("Unrecognized trace type in hover:",Fe);if("closest"===Vt&&Bt.length>Rt&&(Bt.splice(0,Rt),Be=Bt[0].distance),gt&&0!==Qt&&0===Bt.length){Nt.distance=Qt,Nt.index=!1;var wn=Fe._module.hoverPoints(Nt,Dt,Ft,"closest",{hoverLayer:st._hoverlayer});if(wn&&(wn=wn.filter(function(Wn){return Wn.spikeDistance<=Qt})),wn&&wn.length){var Ln,Qn=wn.filter(function(Wn){return Wn.xa.showspikes&&"hovered data"!==Wn.xa.spikesnap});if(Qn.length){var Nn=Qn[0];g(Nn.x0)&&g(Nn.y0)&&(Ln=Pe(Nn),(!wt.vLinePoint||wt.vLinePoint.spikeDistance>Ln.spikeDistance)&&(wt.vLinePoint=Ln))}var Zn=wn.filter(function(Wn){return Wn.ya.showspikes&&"hovered data"!==Wn.ya.spikesnap});if(Zn.length){var Bn=Zn[0];g(Bn.x0)&&g(Bn.y0)&&(Ln=Pe(Bn),(!wt.hLinePoint||wt.hLinePoint.spikeDistance>Ln.spikeDistance)&&(wt.hLinePoint=Ln))}}}}}function xe(Ar,Br,Or){for(var pn,an=null,dn=1/0,wn=0;wn<Ar.length;wn++)pn=Ar[wn].spikeDistance,Or&&0===wn&&(pn=-1/0),pn<=dn&&pn<=Br&&(an=Ar[wn],dn=pn);return an}function Pe(Ar){return Ar?{xa:Ar.xa,ya:Ar.ya,x:void 0!==Ar.xSpike?Ar.xSpike:(Ar.x0+Ar.x1)/2,y:void 0!==Ar.ySpike?Ar.ySpike:(Ar.y0+Ar.y1)/2,distance:Ar.distance,spikeDistance:Ar.spikeDistance,curveNumber:Ar.trace.index,color:Ar.color,pointNumber:Ar.index}:null}Ke();var Ge={fullLayout:st,container:st._hoverlayer,event:at},gr=K._spikepoints;K._spikepoints={vLinePoint:wt.vLinePoint,hLinePoint:wt.hLinePoint};var Ne=function(){Bt.sort(function(Ar,Br){return Ar.distance-Br.distance}),Bt=function ut(K,at){for(var $=at.charAt(0),X=[],rt=[],et=[],st=0;st<K.length;st++){var dt=K[st];f.traceIs(dt.trace,"bar-like")||f.traceIs(dt.trace,"box-violin")?et.push(dt):dt.trace[$+"period"]?rt.push(dt):X.push(dt)}return X.concat(rt).concat(et)}(Bt,Vt)};Ne();var Ye=Vt.charAt(0),xr=("x"===Ye||"y"===Ye)&&Bt[0]&&n[Bt[0].trace.type];if(gt&&0!==Qt&&0!==Bt.length){var ce=xe(Bt.filter(function(Ar){return Ar.ya.showspikes}),Qt,xr);wt.hLinePoint=Pe(ce);var ve=xe(Bt.filter(function(Ar){return Ar.xa.showspikes}),Qt,xr);wt.vLinePoint=Pe(ve)}if(0===Bt.length){var be=s.unhoverRaw(K,at);return gt&&(null!==wt.hLinePoint||null!==wt.vLinePoint)&&nt(gr)&&H(K,wt,Ge),be}if(gt&&nt(gr)&&H(K,wt,Ge),m.isXYhover(St)&&0!==Bt[0].length&&"splom"!==Bt[0].trace.type){var Ae=Bt[0],Te=(Bt=T[Ae.trace.type]?Bt.filter(function(Ar){return Ar.trace.index===Ae.trace.index}):[Ae]).length;Ke(Q("x",Ae,st),Q("y",Ae,st));var Ut,Xe=[],ar={},nr=0,cr=function(Ar){var Br=T[Ar.trace.type]?d(Ar):Ar.trace.index;if(ar[Br]){var Or=ar[Br]-1,an=Xe[Or];Or>0&&Math.abs(Ar.distance)<Math.abs(an.distance)&&(Xe[Or]=Ar)}else nr++,ar[Br]=nr,Xe.push(Ar)};for(Ut=0;Ut<Te;Ut++)cr(Bt[Ut]);for(Ut=Bt.length-1;Ut>Te-1;Ut--)cr(Bt[Ut]);Bt=Xe,Ne()}var Ht=K._hoverdata,Se=[],Ce=j(K),We=Z(K);for(oe=0;oe<Bt.length;oe++){var qe=Bt[oe],or=m.makeEventData(qe,qe.trace,qe.cd);if(!1!==qe.hovertemplate){var _e=!1;qe.cd[qe.index]&&qe.cd[qe.index].ht&&(_e=qe.cd[qe.index].ht),qe.hovertemplate=_e||qe.trace.hovertemplate||!1}if(qe.xa&&qe.ya){var De=qe.x0+qe.xa._offset,sr=qe.x1+qe.xa._offset,yr=qe.y0+qe.ya._offset,dr=qe.y1+qe.ya._offset,Pr=Math.min(De,sr),Jr=Math.max(De,sr),Mr=Math.min(yr,dr),Wr=Math.max(yr,dr);or.bbox={x0:Pr+We,x1:Jr+We,y0:Mr+Ce,y1:Wr+Ce}}qe.eventData=[or],Se.push(or)}K._hoverdata=Se;var nn="y"===Vt&&(Ot.length>1||Bt.length>1)||"closest"===Vt&&ft&&Bt.length>1,Nr=a.combine(st.plot_bgcolor||a.background,st.paper_bgcolor),Dn=D(Bt,{gd:K,hovermode:Vt,rotateLabels:nn,bgColor:Nr,container:st._hoverlayer,outerContainer:st._paper.node(),commonLabelOpts:st.hoverlabel,hoverdistance:st.hoverdistance}),hn=Dn.hoverLabels;if(m.isUnifiedHover(Vt)||(function k(K,at,$,X){var Pt,Vt,te,Qt,Bt,Ot,qt,rt=at?"xa":"ya",et=at?"ya":"xa",st=0,dt=1,bt=K.size(),gt=new Array(bt),Lt=0,It=X.minX,Mt=X.maxX,xt=X.minY,At=X.maxY,Gt=function(Dt){return Dt*$._invScaleX},Wt=function(Dt){return Dt*$._invScaleY};function ie(Dt){var Ft=Dt[0],Nt=Dt[Dt.length-1];if(te=Nt.pos+Nt.dp+Nt.size-Ft.pmax,(Vt=Ft.pmin-Ft.pos-Ft.dp+Ft.size)>.01){for(Bt=Dt.length-1;Bt>=0;Bt--)Dt[Bt].dp+=Vt;Pt=!1}if(!(te<.01)){if(Vt<-.01){for(Bt=Dt.length-1;Bt>=0;Bt--)Dt[Bt].dp-=te;Pt=!1}if(Pt){var Rt=0;for(Qt=0;Qt<Dt.length;Qt++)(Ot=Dt[Qt]).pos+Ot.dp+Ot.size>Ft.pmax&&Rt++;for(Qt=Dt.length-1;Qt>=0&&!(Rt<=0);Qt--)(Ot=Dt[Qt]).pos>Ft.pmax-1&&(Ot.del=!0,Rt--);for(Qt=0;Qt<Dt.length&&!(Rt<=0);Qt++)if((Ot=Dt[Qt]).pos<Ft.pmin+1)for(Ot.del=!0,Rt--,te=2*Ot.size,Bt=Dt.length-1;Bt>=0;Bt--)Dt[Bt].dp-=te;for(Qt=Dt.length-1;Qt>=0&&!(Rt<=0);Qt--)(Ot=Dt[Qt]).pos+Ot.dp+Ot.size>Ft.pmax&&(Ot.del=!0,Rt--)}}}for(K.each(function(Dt){var Ft=Dt[rt],Nt=Dt[et],Rt="x"===Ft._id.charAt(0),wt=Ft.range;0===Lt&&wt&&wt[0]>wt[1]!==Rt&&(dt=-1);var ft=0,pt=Rt?$.width:$.height;if("x"===$.hovermode||"y"===$.hovermode){var se,Be,kt=O(Dt,at),Zt=Dt.anchor,ee="end"===Zt?-1:1;if("middle"===Zt)Be=(se=Dt.crossPos+(Rt?Wt(kt.y-Dt.by/2):Gt(Dt.bx/2+Dt.tx2width/2)))+(Rt?Wt(Dt.by):Gt(Dt.bx));else if(Rt)Be=(se=Dt.crossPos+Wt(x+kt.y)-Wt(Dt.by/2-x))+Wt(Dt.by);else{var Ke=Gt(ee*x+kt.x),xe=Ke+Gt(ee*Dt.bx);se=Dt.crossPos+Math.min(Ke,xe),Be=Dt.crossPos+Math.max(Ke,xe)}Rt?void 0!==xt&&void 0!==At&&Math.min(Be,At)-Math.max(se,xt)>1&&("left"===Nt.side?(ft=Nt._mainLinePosition,pt=$.width):pt=Nt._mainLinePosition):void 0!==It&&void 0!==Mt&&Math.min(Be,Mt)-Math.max(se,It)>1&&("top"===Nt.side?(ft=Nt._mainLinePosition,pt=$.height):pt=Nt._mainLinePosition)}gt[Lt++]=[{datum:Dt,traceIndex:Dt.trace.index,dp:0,pos:Dt.pos,posref:Dt.posref,size:Dt.by*(Rt?M:1)/2,pmin:ft,pmax:pt}]}),gt.sort(function(Dt,Ft){return Dt[0].posref-Ft[0].posref||dt*(Ft[0].traceIndex-Dt[0].traceIndex)});!Pt&&st<=bt;){for(st++,Pt=!0,Qt=0;Qt<gt.length-1;){var oe=gt[Qt],pe=gt[Qt+1],de=oe[oe.length-1],Fe=pe[0];if((Vt=de.pos+de.dp+de.size-Fe.pos-Fe.dp+Fe.size)>.01&&de.pmin===Fe.pmin&&de.pmax===Fe.pmax){for(Bt=pe.length-1;Bt>=0;Bt--)pe[Bt].dp+=Vt;for(oe.push.apply(oe,pe),gt.splice(Qt+1,1),qt=0,Bt=oe.length-1;Bt>=0;Bt--)qt+=oe[Bt].dp;for(te=qt/oe.length,Bt=oe.length-1;Bt>=0;Bt--)oe[Bt].dp-=te;Pt=!1}else Qt++}gt.forEach(ie)}for(Qt=gt.length-1;Qt>=0;Qt--){var Kt=gt[Qt];for(Bt=Kt.length-1;Bt>=0;Bt--){var Et=Kt[Bt],St=Et.datum;St.offset=Et.dp,St.del=Et.del}}}(hn,nn,st,Dn.commonLabelBoundingBox),z(hn,nn,st._invScaleX,st._invScaleY)),rt&&rt.tagName){var hr=f.getComponentMethod("annotations","hasClickToShow")(K,Se);r(A.select(rt),hr?"pointer":"")}!rt||X||!function J(K,at,$){if(!$||$.length!==K._hoverdata.length)return!0;for(var X=$.length-1;X>=0;X--){var rt=$[X],et=K._hoverdata[X];if(rt.curveNumber!==et.curveNumber||String(rt.pointNumber)!==String(et.pointNumber)||String(rt.pointNumbers)!==String(et.pointNumbers))return!0}return!1}(K,0,Ht)||(Ht&&K.emit("plotly_unhover",{event:at,points:Ht}),K.emit("plotly_hover",{event:at,points:K._hoverdata,xaxes:Mt,yaxes:xt,xvals:qt,yvals:ie}))}function d(K){return[K.trace.index,K.index,K.x0,K.y0,K.name,K.attr,K.xa?K.xa._id:"",K.ya?K.ya._id:""].join(",")}W.hover=function(at,$,X,rt){at=P.getGraphDiv(at);var et=$.target;P.throttle(at._fullLayout._uid+h.HOVERID,h.HOVERMINTIME,function(){E(at,$,X,rt,et)})},W.loneHover=function(at,$){var X=!0;Array.isArray(at)||(X=!1,at=[at]);var rt=$.gd,et=j(rt),st=Z(rt),Lt=D(at.map(function(Wt){var Pt=Wt._x0||Wt.x0||Wt.x||0,Vt=Wt._x1||Wt.x1||Wt.x||0,te=Wt._y0||Wt.y0||Wt.y||0,Qt=Wt._y1||Wt.y1||Wt.y||0,Bt=Wt.eventData;if(Bt){var Ot=Math.min(Pt,Vt),qt=Math.max(Pt,Vt),ie=Math.min(te,Qt),oe=Math.max(te,Qt),pe=Wt.trace;if(f.traceIs(pe,"gl3d")){var de=rt._fullLayout[pe.scene]._scene.container,Fe=de.offsetLeft,Kt=de.offsetTop;Ot+=Fe,qt+=Fe,ie+=Kt,oe+=Kt}Bt.bbox={x0:Ot+st,x1:qt+st,y0:ie+et,y1:oe+et},$.inOut_bbox&&$.inOut_bbox.push(Bt.bbox)}else Bt=!1;return{color:Wt.color||a.defaultLine,x0:Wt.x0||Wt.x||0,x1:Wt.x1||Wt.x||0,y0:Wt.y0||Wt.y||0,y1:Wt.y1||Wt.y||0,xLabel:Wt.xLabel,yLabel:Wt.yLabel,zLabel:Wt.zLabel,text:Wt.text,name:Wt.name,idealAlign:Wt.idealAlign,borderColor:Wt.borderColor,fontFamily:Wt.fontFamily,fontSize:Wt.fontSize,fontColor:Wt.fontColor,nameLength:Wt.nameLength,textAlign:Wt.textAlign,trace:Wt.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:Wt.hovertemplate||!1,hovertemplateLabels:Wt.hovertemplateLabels||!1,eventData:Bt}}),{gd:rt,hovermode:"closest",rotateLabels:false,bgColor:$.bgColor||a.background,container:A.select($.container),outerContainer:$.outerContainer||$.container}).hoverLabels,Mt=0,xt=0;return Lt.sort(function(Wt,Pt){return Wt.y0-Pt.y0}).each(function(Wt,Pt){var Vt=Wt.y0-Wt.by/2;Wt.offset=Vt-5<Mt?Mt-Vt+5:0,Mt=Vt+Wt.by+Wt.offset,Pt===$.anchorIndex&&(xt=Wt.offset)}).each(function(Wt){Wt.offset-=xt}),z(Lt,false,rt._fullLayout._invScaleX,rt._fullLayout._invScaleY),X?Lt:Lt.node()};var F=/<extra>([\s\S]*)<\/extra>/;function D(K,at){var $=at.gd,X=$._fullLayout,rt=at.hovermode,et=at.rotateLabels,st=at.bgColor,dt=at.container,bt=at.outerContainer,gt=at.commonLabelOpts||{};if(0===K.length)return[[]];var Lt=at.fontFamily||h.HOVERFONT,It=at.fontSize||h.HOVERFONTSIZE,Mt=K[0],xt=Mt.xa,At=Mt.ya,Gt=rt.charAt(0),Wt=Gt+"Label",Pt=Mt[Wt];if(void 0===Pt&&"multicategory"===xt.type)for(var Vt=0;Vt<K.length&&void 0===(Pt=K[Vt][Wt]);Vt++);var te=G($,bt),Qt=te.top,Bt=te.width,Ot=te.height,qt=void 0!==Pt&&Mt.distance<=at.hoverdistance&&("x"===rt||"y"===rt);if(qt){var oe,pe,ie=!0;for(oe=0;oe<K.length;oe++)if(ie&&void 0===K[oe].zLabel&&(ie=!1),pe=K[oe].hoverinfo||K[oe].trace.hoverinfo){var de=Array.isArray(pe)?pe:pe.split("+");if(-1===de.indexOf("all")&&-1===de.indexOf(rt)){qt=!1;break}}ie&&(qt=!1)}var Fe=dt.selectAll("g.axistext").data(qt?[0]:[]);Fe.enter().append("g").classed("axistext",!0),Fe.exit().remove();var Kt={minX:0,maxX:0,minY:0,maxY:0};if(Fe.each(function(){var Te=A.select(this),Re=P.ensureSingle(Te,"path","",function(Mr){Mr.style({"stroke-width":"1px"})}),Ie=P.ensureSingle(Te,"text","",function(Mr){Mr.attr("data-notex",1)}),Xe=gt.bgcolor||a.defaultLine,ar=gt.bordercolor||a.contrast(Xe),nr=a.contrast(Xe),cr={family:gt.font.family||Lt,size:gt.font.size||It,color:gt.font.color||nr};Re.style({fill:Xe,stroke:ar}),Ie.text(Pt).call(l.font,cr).call(e.positionText,0,0).call(e.convertToTspans,$),Te.attr("transform","");var Ht,Se,Ut=G($,Ie.node());if("x"===rt){var Ce="top"===xt.side?"-":"";Ie.attr("text-anchor","middle").call(e.positionText,0,"top"===xt.side?Qt-Ut.bottom-x-S:Qt-Ut.top+x+S),Se=At._offset+("top"===xt.side?0:At._length);var We=Ut.width/2+S;(Ht=xt._offset+(Mt.x0+Mt.x1)/2)<We?(Ht=We,Re.attr("d","M-"+(We-x)+",0L-"+(We-2*x)+","+Ce+x+"H"+We+"v"+Ce+(2*S+Ut.height)+"H-"+We+"V"+Ce+x+"Z")):Ht>X.width-We?(Ht=X.width-We,Re.attr("d","M"+(We-x)+",0L"+We+","+Ce+x+"v"+Ce+(2*S+Ut.height)+"H-"+We+"V"+Ce+x+"H"+(We-2*x)+"Z")):Re.attr("d","M0,0L"+x+","+Ce+x+"H"+We+"v"+Ce+(2*S+Ut.height)+"H-"+We+"V"+Ce+x+"H-"+x+"Z"),Kt.minX=Ht-We,Kt.maxX=Ht+We,"top"===xt.side?(Kt.minY=Se-(2*S+Ut.height),Kt.maxY=Se-S):(Kt.minY=Se+S,Kt.maxY=Se+(2*S+Ut.height))}else{var qe,or,_e;"right"===At.side?(qe="start",or=1,_e="",Ht=xt._offset+xt._length):(qe="end",or=-1,_e="-",Ht=xt._offset),Se=At._offset+(Mt.y0+Mt.y1)/2,Ie.attr("text-anchor",qe),Re.attr("d","M0,0L"+_e+x+","+x+"V"+(S+Ut.height/2)+"h"+_e+(2*S+Ut.width)+"V-"+(S+Ut.height/2)+"H"+_e+x+"V-"+x+"Z"),Kt.minY=Se-(S+Ut.height/2),Kt.maxY=Se+(S+Ut.height/2),"right"===At.side?(Kt.minX=Ht+x,Kt.maxX=Ht+x+(2*S+Ut.width)):(Kt.minX=Ht-x-(2*S+Ut.width),Kt.maxX=Ht-x);var dr,De=Ut.height/2,sr=Qt-Ut.top-De,yr="clip"+X._uid+"commonlabel"+At._id;if(Ht<Ut.width+2*S+x){dr="M-"+(x+S)+"-"+De+"h-"+(Ut.width-S)+"V"+De+"h"+(Ut.width-S)+"Z";var Pr=Ut.width-Ht+S;e.positionText(Ie,Pr,sr),"end"===qe&&Ie.selectAll("tspan").each(function(){var Mr=A.select(this),Wr=l.tester.append("text").text(Mr.text()).call(l.font,cr),nn=G($,Wr.node());Math.round(nn.width)<Math.round(Ut.width)&&Mr.attr("x",Pr-nn.width),Wr.remove()})}else e.positionText(Ie,or*(S+x),sr),dr=null;var Jr=X._topclips.selectAll("#"+yr).data(dr?[0]:[]);Jr.enter().append("clipPath").attr("id",yr).append("path"),Jr.exit().remove(),Jr.select("path").attr("d",dr),l.setClipUrl(Ie,dr?yr:null,$)}Te.attr("transform",C(Ht,Se))}),m.isUnifiedHover(rt)){dt.selectAll("g.hovertext").remove();var Et=K.filter(function(Te){return"none"!==Te.hoverinfo});if(0===Et.length)return[];var St=X.hoverlabel,Dt=St.font,Nt={font:Dt};w({showlegend:!0,legend:{title:{text:Pt,font:Dt},font:Dt,bgcolor:St.bgcolor,bordercolor:St.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:X.legend?X.legend.traceorder:void 0,orientation:"v"}},Nt,$._fullData);var Rt=Nt.legend;Rt.entries=[];for(var wt=0;wt<Et.length;wt++){var ft=Et[wt];if("none"!==ft.hoverinfo){var pt=N(ft,!0,rt,X,Pt),kt=pt[0],Zt=pt[1];ft.name=Zt,ft.text=""!==Zt?Zt+" : "+kt:kt;var ee=ft.cd[ft.index];ee&&(ee.mc&&(ft.mc=ee.mc),ee.mcc&&(ft.mc=ee.mcc),ee.mlc&&(ft.mlc=ee.mlc),ee.mlcc&&(ft.mlc=ee.mlcc),ee.mlw&&(ft.mlw=ee.mlw),ee.mrc&&(ft.mrc=ee.mrc),ee.dir&&(ft.dir=ee.dir)),ft._distinct=!0,Rt.entries.push([ft])}}Rt.entries.sort(function(Te,Re){return Te[0].trace.index-Re[0].trace.index}),Rt.layer=dt,Rt._inHover=!0,Rt._groupTitleFont=St.grouptitlefont,p($,Rt);var Ne,Ye,xr,rr,se=dt.select("g.legend"),Be=G($,se.node()),Ke=Be.width+2*S,xe=Be.height+2*S,Pe=Et[0],Ge=(Pe.x0+Pe.x1)/2,gr=(Pe.y0+Pe.y1)/2,ue=!(f.traceIs(Pe.trace,"bar-like")||f.traceIs(Pe.trace,"box-violin"));"y"===Gt?ue?(Ye=gr-S,Ne=gr+S):(Ye=Math.min.apply(null,Et.map(function(Te){return Math.min(Te.y0,Te.y1)})),Ne=Math.max.apply(null,Et.map(function(Te){return Math.max(Te.y0,Te.y1)}))):Ye=Ne=P.mean(Et.map(function(Te){return(Te.y0+Te.y1)/2}))-xe/2,"x"===Gt?ue?(xr=Ge+S,rr=Ge-S):(xr=Math.max.apply(null,Et.map(function(Te){return Math.max(Te.x0,Te.x1)})),rr=Math.min.apply(null,Et.map(function(Te){return Math.min(Te.x0,Te.x1)}))):xr=rr=P.mean(Et.map(function(Te){return(Te.x0+Te.x1)/2}))-Ke/2;var ve,be,ce=xt._offset,re=At._offset;return rr+=ce-Ke,Ye+=re-xe,ve=(xr+=ce)+Ke<Bt&&xr>=0?xr:rr+Ke<Bt&&rr>=0?rr:ce+Ke<Bt?ce:xr-Ge<Ge-rr+Ke?Bt-Ke:0,be=(Ne+=re)+xe<Ot&&Ne>=0?Ne:Ye+xe<Ot&&Ye>=0?Ye:re+xe<Ot?re:Ne-gr<gr-Ye+xe?Ot-xe:0,se.attr("transform",C((ve+=S)-1,(be+=S)-1)),se}var Ae=dt.selectAll("g.hovertext").data(K,function(Te){return d(Te)});return Ae.enter().append("g").classed("hovertext",!0).each(function(){var Te=A.select(this);Te.append("rect").call(a.fill,a.addOpacity(st,.8)),Te.append("text").classed("name",!0),Te.append("path").style("stroke-width","1px"),Te.append("text").classed("nums",!0).call(l.font,Lt,It)}),Ae.exit().remove(),Ae.each(function(Te){var Re=A.select(this).attr("transform",""),Ie=Te.color;Array.isArray(Ie)&&(Ie=Ie[Te.eventData[0].pointNumber]);var Xe=Te.bgcolor||Ie,ar=a.combine(a.opacity(Xe)?Xe:a.defaultLine,st),nr=a.combine(a.opacity(Ie)?Ie:a.defaultLine,st),cr=Te.borderColor||a.contrast(ar),Ut=N(Te,qt,rt,X,Pt,Re),Ht=Ut[0],Se=Ut[1],Ce=Re.select("text.nums").call(l.font,Te.fontFamily||Lt,Te.fontSize||It,Te.fontColor||cr).text(Ht).attr("data-notex",1).call(e.positionText,0,0).call(e.convertToTspans,$),We=Re.select("text.name"),qe=0,or=0;if(Se&&Se!==Ht){We.call(l.font,Te.fontFamily||Lt,Te.fontSize||It,nr).text(Se).attr("data-notex",1).call(e.positionText,0,0).call(e.convertToTspans,$);var _e=G($,We.node());qe=_e.width+2*S,or=_e.height+2*S}else We.remove(),Re.select("rect").remove();Re.select("path").style({fill:ar,stroke:cr});var De=Te.xa._offset+(Te.x0+Te.x1)/2,sr=Te.ya._offset+(Te.y0+Te.y1)/2,yr=Math.abs(Te.x1-Te.x0),dr=Math.abs(Te.y1-Te.y0),Pr=G($,Ce.node()),Jr=Pr.width/X._invScaleX,Mr=Pr.height/X._invScaleY;Te.ty0=(Qt-Pr.top)/X._invScaleY,Te.bx=Jr+2*S,Te.by=Math.max(Mr+2*S,or),Te.anchor="start",Te.txwidth=Jr,Te.tx2width=qe,Te.offset=0;var nn,Nr,Wr=(Jr+x+S+qe)*X._invScaleX;if(et)Te.pos=De,nn=sr+dr/2+Wr<=Ot,Nr=sr-dr/2-Wr>=0,"top"!==Te.idealAlign&&nn||!Nr?nn?(sr+=dr/2,Te.anchor="start"):Te.anchor="middle":(sr-=dr/2,Te.anchor="end"),Te.crossPos=sr;else{if(Te.pos=sr,nn=De+yr/2+Wr<=Bt,Nr=De-yr/2-Wr>=0,"left"!==Te.idealAlign&&nn||!Nr)if(nn)De+=yr/2,Te.anchor="start";else{Te.anchor="middle";var Dn=Wr/2,hn=De+Dn-Bt,hr=De-Dn;hn>0&&(De-=hn),hr<0&&(De+=-hr)}else De-=yr/2,Te.anchor="end";Te.crossPos=De}Ce.attr("text-anchor",Te.anchor),qe&&We.attr("text-anchor",Te.anchor),Re.attr("transform",C(De,sr)+(et?u(o):""))}),{hoverLabels:Ae,commonLabelBoundingBox:Kt}}function N(K,at,$,X,rt,et){var st="",dt="";void 0!==K.nameOverride&&(K.name=K.nameOverride),K.name&&(K.trace._meta&&(K.name=P.templateString(K.name,K.trace._meta)),st=it(K.name,K.nameLength));var bt=$.charAt(0);void 0!==K.zLabel?(void 0!==K.xLabel&&(dt+="x: "+K.xLabel+"<br>"),void 0!==K.yLabel&&(dt+="y: "+K.yLabel+"<br>"),"choropleth"!==K.trace.type&&"choroplethmapbox"!==K.trace.type&&(dt+=(dt?"z: ":"")+K.zLabel)):at&&K[bt+"Label"]===rt?dt=K[("x"===bt?"y":"x")+"Label"]||"":void 0===K.xLabel?void 0!==K.yLabel&&"scattercarpet"!==K.trace.type&&(dt=K.yLabel):dt=void 0===K.yLabel?K.xLabel:"("+K.xLabel+", "+K.yLabel+")",(K.text||0===K.text)&&!Array.isArray(K.text)&&(dt+=(dt?"<br>":"")+K.text),void 0!==K.extraText&&(dt+=(dt?"<br>":"")+K.extraText),et&&""===dt&&!K.hovertemplate&&(""===st&&et.remove(),dt=st);var Lt=K.hovertemplate||!1;if(Lt){var It=K.hovertemplateLabels||K;K[bt+"Label"]!==rt&&(It[bt+"other"]=It[bt+"Val"],It[bt+"otherLabel"]=It[bt+"Label"]),dt=(dt=P.hovertemplateString(Lt,It,X._d3locale,K.eventData[0]||{},K.trace._meta)).replace(F,function(Mt,xt){return st=it(xt,K.nameLength),""})}return[dt,st]}function O(K,at){var $=0,X=K.offset;return at&&(X*=-L,$=K.offset*b),{x:$,y:X}}function z(K,at,$,X){var rt=function(st){return st*$},et=function(st){return st*X};K.each(function(st){var dt=A.select(this);if(st.del)return dt.remove();var bt=dt.select("text.nums"),gt=st.anchor,Lt="end"===gt?-1:1,It=function B(K){var at={start:1,end:-1,middle:0}[K.anchor],$=at*(x+S),X=$+at*(K.txwidth+S);return"middle"===K.anchor&&($-=K.tx2width/2,X+=K.txwidth/2+S),{alignShift:at,textShiftX:$,text2ShiftX:X}}(st),Mt=O(st,at),xt=Mt.x,At=Mt.y,Gt="middle"===gt;dt.select("path").attr("d",Gt?"M-"+rt(st.bx/2+st.tx2width/2)+","+et(At-st.by/2)+"h"+rt(st.bx)+"v"+et(st.by)+"h-"+rt(st.bx)+"Z":"M0,0L"+rt(Lt*x+xt)+","+et(x+At)+"v"+et(st.by/2-x)+"h"+rt(Lt*st.bx)+"v-"+et(st.by)+"H"+rt(Lt*x+xt)+"V"+et(At-x)+"Z");var Wt=xt+It.textShiftX,Pt=At+st.ty0-st.by/2+S,Vt=st.textAlign||"auto";"auto"!==Vt&&("left"===Vt&&"start"!==gt?(bt.attr("text-anchor","start"),Wt=Gt?-st.bx/2-st.tx2width/2+S:-st.bx-S):"right"===Vt&&"end"!==gt&&(bt.attr("text-anchor","end"),Wt=Gt?st.bx/2-st.tx2width/2-S:st.bx+S)),bt.call(e.positionText,rt(Wt),et(Pt)),st.tx2width&&(dt.select("text.name").call(e.positionText,rt(It.text2ShiftX+It.alignShift*S+xt),et(At+st.ty0-st.by/2+S)),dt.select("rect").call(l.setRect,rt(It.text2ShiftX+(It.alignShift-1)*st.tx2width/2+xt),et(At-st.by/2-1),rt(st.tx2width),et(st.by+2)))})}function U(K,at){var $=K.index,X=K.trace||{},rt=K.cd[0],et=K.cd[$]||{};function st(Mt){return Mt||g(Mt)&&0===Mt}var dt=Array.isArray($)?function(Mt,xt){var At=P.castOption(rt,$,Mt);return st(At)?At:P.extractOption({},X,"",xt)}:function(Mt,xt){return P.extractOption(et,X,Mt,xt)};function bt(Mt,xt,At){var Gt=dt(xt,At);st(Gt)&&(K[Mt]=Gt)}if(bt("hoverinfo","hi","hoverinfo"),bt("bgcolor","hbg","hoverlabel.bgcolor"),bt("borderColor","hbc","hoverlabel.bordercolor"),bt("fontFamily","htf","hoverlabel.font.family"),bt("fontSize","hts","hoverlabel.font.size"),bt("fontColor","htc","hoverlabel.font.color"),bt("nameLength","hnl","hoverlabel.namelength"),bt("textAlign","hta","hoverlabel.align"),K.posref="y"===at||"closest"===at&&"h"===X.orientation?K.xa._offset+(K.x0+K.x1)/2:K.ya._offset+(K.y0+K.y1)/2,K.x0=P.constrain(K.x0,0,K.xa._length),K.x1=P.constrain(K.x1,0,K.xa._length),K.y0=P.constrain(K.y0,0,K.ya._length),K.y1=P.constrain(K.y1,0,K.ya._length),void 0!==K.xLabelVal&&(K.xLabel="xLabel"in K?K.xLabel:c.hoverLabelText(K.xa,K.xLabelVal,X.xhoverformat),K.xVal=K.xa.c2d(K.xLabelVal)),void 0!==K.yLabelVal&&(K.yLabel="yLabel"in K?K.yLabel:c.hoverLabelText(K.ya,K.yLabelVal,X.yhoverformat),K.yVal=K.ya.c2d(K.yLabelVal)),void 0!==K.zLabelVal&&void 0===K.zLabel&&(K.zLabel=String(K.zLabelVal)),!(isNaN(K.xerr)||"log"===K.xa.type&&K.xerr<=0)){var gt=c.tickText(K.xa,K.xa.c2l(K.xerr),"hover").text;K.xLabel+=void 0!==K.xerrneg?" +"+gt+" / -"+c.tickText(K.xa,K.xa.c2l(K.xerrneg),"hover").text:" \xb1 "+gt,"x"===at&&(K.distance+=1)}if(!(isNaN(K.yerr)||"log"===K.ya.type&&K.yerr<=0)){var Lt=c.tickText(K.ya,K.ya.c2l(K.yerr),"hover").text;K.yLabel+=void 0!==K.yerrneg?" +"+Lt+" / -"+c.tickText(K.ya,K.ya.c2l(K.yerrneg),"hover").text:" \xb1 "+Lt,"y"===at&&(K.distance+=1)}var It=K.hoverinfo||K.trace.hoverinfo;return It&&"all"!==It&&(-1===(It=Array.isArray(It)?It:It.split("+")).indexOf("x")&&(K.xLabel=void 0),-1===It.indexOf("y")&&(K.yLabel=void 0),-1===It.indexOf("z")&&(K.zLabel=void 0),-1===It.indexOf("text")&&(K.text=void 0),-1===It.indexOf("name")&&(K.name=void 0)),K}function H(K,at,$){var gt,Lt,X=$.container,rt=$.fullLayout,et=rt._size,st=$.event,dt=!!at.hLinePoint,bt=!!at.vLinePoint;if(X.selectAll(".spikeline").remove(),bt||dt){var It=a.combine(rt.plot_bgcolor,rt.paper_bgcolor);if(dt){var xt,At,Mt=at.hLinePoint;gt=Mt&&Mt.xa,"cursor"===(Lt=Mt&&Mt.ya).spikesnap?(xt=st.pointerX,At=st.pointerY):(xt=gt._offset+Mt.x,At=Lt._offset+Mt.y);var Bt,Ot,Wt=i.readability(Mt.color,It)<1.5?a.contrast(It):Mt.color,Pt=Lt.spikemode,Vt=Lt.spikethickness,te=Lt.spikecolor||Wt,Qt=c.getPxPosition(K,Lt);if(-1!==Pt.indexOf("toaxis")||-1!==Pt.indexOf("across")){if(-1!==Pt.indexOf("toaxis")&&(Bt=Qt,Ot=xt),-1!==Pt.indexOf("across")){var qt=Lt._counterDomainMin,ie=Lt._counterDomainMax;"free"===Lt.anchor&&(qt=Math.min(qt,Lt.position),ie=Math.max(ie,Lt.position)),Bt=et.l+qt*et.w,Ot=et.l+ie*et.w}X.insert("line",":first-child").attr({x1:Bt,x2:Ot,y1:At,y2:At,"stroke-width":Vt,stroke:te,"stroke-dasharray":l.dashStyle(Lt.spikedash,Vt)}).classed("spikeline",!0).classed("crisp",!0),X.insert("line",":first-child").attr({x1:Bt,x2:Ot,y1:At,y2:At,"stroke-width":Vt+2,stroke:It}).classed("spikeline",!0).classed("crisp",!0)}-1!==Pt.indexOf("marker")&&X.insert("circle",":first-child").attr({cx:Qt+("right"!==Lt.side?Vt:-Vt),cy:At,r:Vt,fill:te}).classed("spikeline",!0)}if(bt){var pe,de,oe=at.vLinePoint;Lt=oe&&oe.ya,"cursor"===(gt=oe&&oe.xa).spikesnap?(pe=st.pointerX,de=st.pointerY):(pe=gt._offset+oe.x,de=Lt._offset+oe.y);var Nt,Rt,Kt=i.readability(oe.color,It)<1.5?a.contrast(It):oe.color,Et=gt.spikemode,St=gt.spikethickness,Dt=gt.spikecolor||Kt,Ft=c.getPxPosition(K,gt);if(-1!==Et.indexOf("toaxis")||-1!==Et.indexOf("across")){if(-1!==Et.indexOf("toaxis")&&(Nt=Ft,Rt=de),-1!==Et.indexOf("across")){var wt=gt._counterDomainMin,ft=gt._counterDomainMax;"free"===gt.anchor&&(wt=Math.min(wt,gt.position),ft=Math.max(ft,gt.position)),Nt=et.t+(1-ft)*et.h,Rt=et.t+(1-wt)*et.h}X.insert("line",":first-child").attr({x1:pe,x2:pe,y1:Nt,y2:Rt,"stroke-width":St,stroke:Dt,"stroke-dasharray":l.dashStyle(gt.spikedash,St)}).classed("spikeline",!0).classed("crisp",!0),X.insert("line",":first-child").attr({x1:pe,x2:pe,y1:Nt,y2:Rt,"stroke-width":St+2,stroke:It}).classed("spikeline",!0).classed("crisp",!0)}-1!==Et.indexOf("marker")&&X.insert("circle",":first-child").attr({cx:pe,cy:Ft-("top"!==gt.side?St:-St),r:St,fill:Dt}).classed("spikeline",!0)}}}function nt(K,at){return!at||at.vLinePoint!==K._spikepoints.vLinePoint||at.hLinePoint!==K._spikepoints.hLinePoint}function it(K,at){return e.plainText(K||"",{len:at,allowedTags:["br","sub","sup","b","i","em"]})}function Q(K,at,$){var X=at[K+"a"],rt=at[K+"Val"],et=at.cd[0];if("category"===X.type||"multicategory"===X.type)rt=X._categoriesMap[rt];else if("date"===X.type){var st=at.trace[K+"periodalignment"];if(st){var dt=at.cd[at.index],bt=dt[K+"Start"];void 0===bt&&(bt=dt[K]);var gt=dt[K+"End"];void 0===gt&&(gt=dt[K]);var Lt=gt-bt;"end"===st?rt+=Lt:"middle"===st&&(rt+=Lt/2)}rt=X.d2c(rt)}return et&&et.t&&et.t.posLetter===X._id&&("group"===$.boxmode||"group"===$.violinmode)&&(rt+=et.t.dPos),rt}function j(K){return K.offsetTop+K.clientTop}function Z(K){return K.offsetLeft+K.clientLeft}function G(K,at){var $=K._fullLayout,X=at.getBoundingClientRect(),rt=X.left,et=X.top,st=rt+X.width,dt=et+X.height,bt=P.apply3DTransform($._invTransform)(rt,et),gt=P.apply3DTransform($._invTransform)(st,dt),Lt=bt[0],It=bt[1],Mt=gt[0],xt=gt[1];return{x:Lt,y:It,width:Mt-Lt,height:xt-It,top:Math.min(It,xt),left:Math.min(Lt,Mt),right:Math.max(Lt,Mt),bottom:Math.max(It,xt)}}},38048:function(q,W,t){"use strict";var A=t(71828),g=t(7901),i=t(23469).isUnifiedHover;q.exports=function(C,u,y,e){e=e||{};var r=u.legend;function l(a){e.font[a]||(e.font[a]=r?u.legend.font[a]:u.font[a])}u&&i(u.hovermode)&&(e.font||(e.font={}),l("size"),l("family"),l("color"),r?(e.bgcolor||(e.bgcolor=g.combine(u.legend.bgcolor,u.paper_bgcolor)),e.bordercolor||(e.bordercolor=u.legend.bordercolor)):e.bgcolor||(e.bgcolor=u.paper_bgcolor)),y("hoverlabel.bgcolor",e.bgcolor),y("hoverlabel.bordercolor",e.bordercolor),y("hoverlabel.namelength",e.namelength),A.coerceFont(y,"hoverlabel.font",e.font),y("hoverlabel.align",e.align)}},98212:function(q,W,t){"use strict";var A=t(71828),g=t(528);q.exports=function(P,C){function u(y,e){return void 0!==C[y]?C[y]:A.coerce(P,C,g,y,e)}return u("clickmode"),u("hovermode")}},30211:function(q,W,t){"use strict";var A=t(39898),g=t(71828),i=t(28569),P=t(23469),C=t(528),u=t(88335);q.exports={moduleType:"component",name:"fx",constants:t(26675),schema:{layout:C},attributes:t(77914),layoutAttributes:C,supplyLayoutGlobalDefaults:t(22774),supplyDefaults:t(54268),supplyLayoutDefaults:t(34938),calc:t(30732),getDistanceFunction:P.getDistanceFunction,getClosest:P.getClosest,inbox:P.inbox,quadrature:P.quadrature,appendArrayPointValue:P.appendArrayPointValue,castHoverOption:function e(l,a,s){return g.castOption(l,a,"hoverlabel."+s)},castHoverinfo:function r(l,a,s){return g.castOption(l,s,"hoverinfo",function c(f){return g.coerceHoverinfo({hoverinfo:f},{_module:l._module},a)})},hover:u.hover,unhover:i.unhover,loneHover:u.loneHover,loneUnhover:function y(l){var a=g.isD3Selection(l)?l:A.select(l);a.selectAll("g.hovertext").remove(),a.selectAll(".spikeline").remove()},click:t(75914)}},528:function(q,W,t){"use strict";var A=t(26675),g=t(41940),i=g({editType:"none"});i.family.dflt=A.HOVERFONT,i.size.dflt=A.HOVERFONTSIZE,q.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:i,grouptitlefont:g({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},34938:function(q,W,t){"use strict";var A=t(71828),g=t(528),i=t(98212),P=t(38048);q.exports=function(u,y){function e(f,m){return A.coerce(u,y,g,f,m)}i(u,y)&&(e("hoverdistance"),e("spikedistance")),"select"===e("dragmode")&&e("selectdirection");var a=y._has("mapbox"),s=y._has("geo"),c=y._basePlotModules.length;"zoom"===y.dragmode&&((a||s)&&1===c||a&&s&&2===c)&&(y.dragmode="pan"),P(u,y,e),A.coerceFont(e,"hoverlabel.grouptitlefont",y.hoverlabel.font)}},22774:function(q,W,t){"use strict";var A=t(71828),g=t(38048),i=t(528);q.exports=function(C,u){g(C,u,function y(e,r){return A.coerce(C,u,i,e,r)})}},83312:function(q,W,t){"use strict";var A=t(71828),g=t(30587).counter,i=t(27670).Y,P=t(85555).idRegex,C=t(44467),u={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[g("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[P.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[P.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:i({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function y(s,c,f){var m=c[f+"axes"],h=Object.keys((s._splomAxes||{})[f]||{});return Array.isArray(m)?m:h.length?h:void 0}function r(s,c,f,m,h,w){var p=c(s+"gap",f),o=c("domain."+s);c(s+"side",m);for(var v=new Array(h),M=o[0],b=(o[1]-M)/(h-p),L=b*(1-p),x=0;x<h;x++){var S=M+b*x;v[w?h-1-x:x]=[S,S+L]}return v}function a(s,c,f,m,h){var p,w=new Array(f);function o(v,M){-1!==c.indexOf(M)&&void 0===m[M]?(w[v]=M,m[M]=v):w[v]=""}if(Array.isArray(s))for(p=0;p<f;p++)o(p,s[p]);else for(o(0,h),p=1;p<f;p++)o(p,h+(p+1));return w}q.exports={moduleType:"component",name:"grid",schema:{layout:{grid:u}},layoutAttributes:u,sizeDefaults:function e(s,c){var f=s.grid||{},m=y(c,f,"x"),h=y(c,f,"y");if(s.grid||m||h){var M,b,w=Array.isArray(f.subplots)&&Array.isArray(f.subplots[0]),p=Array.isArray(m),o=Array.isArray(h),v=p&&m!==f.xaxes&&o&&h!==f.yaxes;w?(M=f.subplots.length,b=f.subplots[0].length):(o&&(M=h.length),p&&(b=m.length));var L=C.newContainer(c,"grid"),S=x("rows",M),T=x("columns",b);if(S*T>1){w||p||o||"independent"===x("pattern")&&(w=!0),L._hasSubplotGrid=w;var N,k,d="top to bottom"===x("roworder"),D=w?.3:.1;v&&c._splomGridDflt&&(N=c._splomGridDflt.xside,k=c._splomGridDflt.yside),L._domains={x:r("x",x,w?.2:.1,N,T),y:r("y",x,D,k,S,d)}}else delete c.grid}function x(O,B){return A.coerce(f,L,u,O,B)}},contentDefaults:function l(s,c){var f=c.grid;if(f&&f._domains){var M,b,L,x,S,T,n,m=s.grid||{},h=c._subplots,w=f._hasSubplotGrid,p=f.rows,o=f.columns,v="independent"===f.pattern,E=f._axisMap={};if(w){var d=m.subplots||[];T=f.subplots=new Array(p);var F=1;for(M=0;M<p;M++){var D=T[M]=new Array(o),N=d[M]||[];for(b=0;b<o;b++)if(v?(S=1===F?"xy":"x"+F+"y"+F,F++):S=N[b],D[b]="",-1!==h.cartesian.indexOf(S)){if(n=S.indexOf("y"),L=S.slice(0,n),x=S.slice(n),void 0!==E[L]&&E[L]!==b||void 0!==E[x]&&E[x]!==M)continue;D[b]=S,E[L]=b,E[x]=M}}}else{var k=y(c,m,"x"),O=y(c,m,"y");f.xaxes=a(k,h.xaxis,o,E,"x"),f.yaxes=a(O,h.yaxis,p,E,"y")}var B=f._anchors={},z="top to bottom"===f.roworder;for(var U in E){var nt,it,ut,H=U.charAt(0),J=f[H+"side"];if(J.length<8)B[U]="free";else if("x"===H){if("t"===J.charAt(0)===z?(nt=0,it=1,ut=p):(nt=p-1,it=-1,ut=-1),w){var Q=E[U];for(M=nt;M!==ut;M+=it)if((S=T[M][Q])&&(n=S.indexOf("y"),S.slice(0,n)===U)){B[U]=S.slice(n);break}}else for(M=nt;M!==ut;M+=it)if(-1!==h.cartesian.indexOf(U+(x=f.yaxes[M]))){B[U]=x;break}}else if("l"===J.charAt(0)?(nt=0,it=1,ut=o):(nt=o-1,it=-1,ut=-1),w){var j=E[U];for(M=nt;M!==ut;M+=it)if((S=T[j][M])&&(n=S.indexOf("y"),S.slice(n)===U)){B[U]=S.slice(0,n);break}}else for(M=nt;M!==ut;M+=it)if(-1!==h.cartesian.indexOf((L=f.xaxes[M])+U)){B[U]=L;break}}}}}},69819:function(q,W,t){"use strict";var A=t(85555),g=t(44467).templatedArray;t(24695),q.exports=g("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",A.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",A.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},75378:function(q,W,t){"use strict";var A=t(92770),g=t(58163);q.exports=function(P,C,u,y){C=C||{};var e="log"===u&&"linear"===C.type;if(e||"linear"===u&&"log"===C.type)for(var s,c,l=P._fullLayout.images,a=C._id.charAt(0),f=0;f<l.length;f++)if(c="images["+f+"].",(s=l[f])[a+"ref"]===C._id){var m=s[a],h=s["size"+a],w=null,p=null;if(e){w=g(m,C.range);var o=h/Math.pow(10,w)/2;p=2*Math.log(o+Math.sqrt(1+o*o))/Math.LN10}else p=(w=Math.pow(10,m))*(Math.pow(10,h/2)-Math.pow(10,-h/2));A(w)?A(p)||(p=null):(w=null,p=null),y(c+a,w),y(c+"size"+a,p)}}},81603:function(q,W,t){"use strict";var A=t(71828),g=t(89298),i=t(85501),P=t(69819);function u(y,e,r){function l(o,v){return A.coerce(y,e,P,o,v)}var a=l("source");if(!l("visible",!!a))return e;l("layer"),l("xanchor"),l("yanchor"),l("sizex"),l("sizey"),l("sizing"),l("opacity");for(var c={_fullLayout:r},f=["x","y"],m=0;m<2;m++){var h=f[m],w=g.coerceRef(y,e,c,h,"paper",void 0);"paper"!==w&&g.getFromId(c,w)._imgIndices.push(e._index),g.coercePosition(e,c,l,w,h,0)}return e}q.exports=function(e,r){i(e,r,{name:"images",handleItemDefaults:u})}},80750:function(q,W,t){"use strict";var A=t(39898),g=t(91424),i=t(89298),P=t(41675),C=t(77922);q.exports=function(y){var s,c,e=y._fullLayout,r=[],l={},a=[];for(c=0;c<e.images.length;c++){var f=e.images[c];if(f.visible)if("below"===f.layer&&"paper"!==f.xref&&"paper"!==f.yref){s=P.ref2id(f.xref)+P.ref2id(f.yref);var m=e._plots[s];if(!m){a.push(f);continue}m.mainplot&&(s=m.mainplot.id),l[s]||(l[s]=[]),l[s].push(f)}else"above"===f.layer?r.push(f):a.push(f)}var h_x={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},h_y={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function w(x){var S=A.select(this);if(this._imgSrc!==x.source)if(S.attr("xmlns",C.svg),x.source&&"data:"===x.source.slice(0,5))S.attr("xlink:href",x.source),this._imgSrc=x.source;else{var T=new Promise(function(n){var E=new Image;function d(){S.remove(),n()}this.img=E,E.setAttribute("crossOrigin","anonymous"),E.onerror=d,E.onload=function(){var F=document.createElement("canvas");F.width=this.width,F.height=this.height,F.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var N=F.toDataURL("image/png");S.attr("xlink:href",N),n()},S.on("error",d),E.src=x.source,this._imgSrc=x.source}.bind(this));y._promises.push(T)}}function p(x){var D,N,S=A.select(this),T=i.getFromId(y,x.xref),n=i.getFromId(y,x.yref),E="domain"===i.getRefType(x.xref),d="domain"===i.getRefType(x.yref),F=e._size;D=void 0!==T?"string"==typeof x.xref&&E?T._length*x.sizex:Math.abs(T.l2p(x.sizex)-T.l2p(0)):x.sizex*F.w,N=void 0!==n?"string"==typeof x.yref&&d?n._length*x.sizey:Math.abs(n.l2p(x.sizey)-n.l2p(0)):x.sizey*F.h;var z,U,k=D*h_x[x.xanchor].offset,O=N*h_y[x.yanchor].offset,B=h_x[x.xanchor].sizing+h_y[x.yanchor].sizing;switch(z=void 0!==T?"string"==typeof x.xref&&E?T._length*x.x+T._offset:T.r2p(x.x)+T._offset:x.x*F.w+F.l,z+=k,U=void 0!==n?"string"==typeof x.yref&&d?n._length*(1-x.y)+n._offset:n.r2p(x.y)+n._offset:F.h-x.y*F.h+F.t,U+=O,x.sizing){case"fill":B+=" slice";break;case"stretch":B="none"}S.attr({x:z,y:U,width:D,height:N,preserveAspectRatio:B,opacity:x.opacity});var nt=(T&&"domain"!==i.getRefType(x.xref)?T._id:"")+(n&&"domain"!==i.getRefType(x.yref)?n._id:"");g.setClipUrl(S,nt?"clip"+e._uid+nt:null,y)}var o=e._imageLowerLayer.selectAll("image").data(a),v=e._imageUpperLayer.selectAll("image").data(r);o.enter().append("image"),v.enter().append("image"),o.exit().remove(),v.exit().remove(),o.each(function(x){w.bind(this)(x),p.bind(this)(x)}),v.each(function(x){w.bind(this)(x),p.bind(this)(x)});var M=Object.keys(e._plots);for(c=0;c<M.length;c++){var b=e._plots[s=M[c]];if(b.imagelayer){var L=b.imagelayer.selectAll("image").data(l[s]||[]);L.enter().append("image"),L.exit().remove(),L.each(function(x){w.bind(this)(x),p.bind(this)(x)})}}}},68804:function(q,W,t){"use strict";q.exports={moduleType:"component",name:"images",layoutAttributes:t(69819),supplyLayoutDefaults:t(81603),includeBasePlot:t(76325)("images"),draw:t(80750),convertCoords:t(75378)}},33030:function(q,W,t){"use strict";var A=t(41940),g=t(22399);q.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:g.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:A({editType:"legend"}),grouptitlefont:A({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:A({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},14928:function(q){"use strict";q.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},99017:function(q,W,t){"use strict";var A=t(73972),g=t(71828),i=t(44467),P=t(9012),C=t(33030),u=t(10820),y=t(10130);function e(r,l,a,s){var c=l[r]||{},f=i.newContainer(a,r);function m(ut,Q){return g.coerce(c,f,C,ut,Q)}var h=g.coerceFont(m,"font",a.font);if(m("bgcolor",a.paper_bgcolor),m("bordercolor"),m("visible")){for(var p,o=function(ut,Q){return g.coerce(p._input,p,P,ut,Q)},v=a.font||{},M=g.coerceFont(m,"grouptitlefont",g.extendFlat({},v,{size:Math.round(1.1*v.size)})),b=0,L=!1,x="normal",S=(a.shapes||[]).filter(function(ut){return ut.showlegend}),T=s.concat(S).filter(function(ut){return r===(ut.legend||"legend")}),n=0;n<T.length;n++)if((p=T[n]).visible){var E=p._isShape;(p.showlegend||p._dfltShowLegend&&!(p._module&&p._module.attributes&&p._module.attributes.showlegend&&!1===p._module.attributes.showlegend.dflt))&&(b++,p.showlegend&&(L=!0,(!E&&A.traceIs(p,"pie-like")||!0===p._input.showlegend)&&b++),g.coerceFont(o,"legendgrouptitle.font",M)),(!E&&A.traceIs(p,"bar")&&"stack"===a.barmode||-1!==["tonextx","tonexty"].indexOf(p.fill))&&(x=y.isGrouped({traceorder:x})?"grouped+reversed":"reversed"),void 0!==p.legendgroup&&""!==p.legendgroup&&(x=y.isReversed({traceorder:x})?"reversed+grouped":"grouped")}var d=g.coerce(l,a,u,"showlegend",L&&b>("legend"===r?1:0));if(!1===d&&(a[r]=void 0),(!1!==d||c.uirevision)&&(m("uirevision",a.uirevision),!1!==d)){m("borderwidth");var z,U,H,k="h"===m("orientation"),O="paper"===m("yref"),B="paper"===m("xref"),J="left";if(k?(z=0,A.getComponentMethod("rangeslider","isVisible")(l.xaxis)?O?(U=1.1,H="bottom"):(U=1,H="top"):O?(U=-.1,H="top"):(U=0,H="bottom")):(U=1,H="auto",B?z=1.02:(z=1,J="right")),g.coerce(c,f,{x:{valType:"number",editType:"legend",min:B?-2:0,max:B?3:1,dflt:z}},"x"),g.coerce(c,f,{y:{valType:"number",editType:"legend",min:O?-2:0,max:O?3:1,dflt:U}},"y"),m("traceorder",x),y.isGrouped(a[r])&&m("tracegroupgap"),m("entrywidth"),m("entrywidthmode"),m("itemsizing"),m("itemwidth"),m("itemclick"),m("itemdoubleclick"),m("groupclick"),m("xanchor",J),m("yanchor",H),m("valign"),g.noneOrAll(c,f,["x","y"]),m("title.text")){m("title.side",k?"left":"top");var it=g.extendFlat({},h,{size:g.bigFont(h.size)});g.coerceFont(m,"title.font",it)}}}}q.exports=function(l,a,s){var c,f=s.slice(),m=a.shapes;if(m)for(c=0;c<m.length;c++){var h=m[c];h.showlegend&&f.push({_input:h._input,visible:h.visible,showlegend:h.showlegend,legend:h.legend})}var p=["legend"];for(c=0;c<f.length;c++)g.pushUnique(p,f[c].legend);for(a._legends=[],c=0;c<p.length;c++){var o=p[c];e(o,l,a,f),a[o]&&a[o].visible&&(a[o]._id=o),a._legends.push(o)}}},43969:function(q,W,t){"use strict";var A=t(39898),g=t(71828),i=t(74875),P=t(73972),C=t(11086),u=t(28569),y=t(91424),e=t(7901),r=t(63893),l=t(85167),a=t(14928),s=t(18783),c=s.LINE_SPACING,f=s.FROM_TL,m=s.FROM_BR,h=t(82424),w=t(53630),p=t(10130),v=/^legend[0-9]*$/;function b(z,U){var it,ut,H=U||{},J=z._fullLayout,nt=B(H),Q=H._inHover;if(Q?(ut=H.layer,it="hover"):(ut=J._infolayer,it=nt),ut){var j;if(it+=J._uid,z._legendMouseDownTime||(z._legendMouseDownTime=0),Q){if(!H.entries)return;j=h(H.entries,H)}else{for(var Z=(z.calcdata||[]).slice(),G=J.shapes,K=0;K<G.length;K++){var at=G[K];at.showlegend&&Z.push([{trace:{_isShape:!0,_fullInput:at,index:at._index,name:at.name||at.label.text||"shape "+at._index,legend:at.legend,legendgroup:at.legendgroup,legendgrouptitle:at.legendgrouptitle,legendrank:at.legendrank,legendwidth:at.legendwidth,showlegend:at.showlegend,visible:at.visible,opacity:at.opacity,mode:"line"===at.type?"lines":"markers",line:at.line,marker:{line:at.line,color:at.fillcolor,size:12,symbol:"rect"===at.type?"square":"circle"===at.type?"circle":"hexagon2"}}}])}j=J.showlegend&&h(Z,H,J._legends.length>1)}var X=J.hiddenlabels||[];if(!(Q||J.showlegend&&j.length))return ut.selectAll("."+nt).remove(),J._topdefs.select("#"+it).remove(),i.autoMargin(z,nt);var rt=g.ensureSingle(ut,"g",nt,function(xt){Q||xt.attr("pointer-events","all")}),et=g.ensureSingleById(J._topdefs,"clipPath",it,function(xt){xt.append("rect")}),st=g.ensureSingle(rt,"rect","bg",function(xt){xt.attr("shape-rendering","crispEdges")});st.call(e.stroke,H.bordercolor).call(e.fill,H.bgcolor).style("stroke-width",H.borderwidth+"px");var gt,dt=g.ensureSingle(rt,"g","scrollbox"),bt=H.title;H._titleWidth=0,H._titleHeight=0,bt.text?((gt=g.ensureSingle(dt,"text",nt+"titletext")).attr("text-anchor","start").call(y.font,bt.font).text(bt.text),E(gt,dt,z,H,1)):dt.selectAll("."+nt+"titletext").remove();var Lt=g.ensureSingle(rt,"rect","scrollbar",function(xt){xt.attr(a.scrollBarEnterAttrs).call(e.fill,a.scrollBarColor)}),It=dt.selectAll("g.groups").data(j);It.enter().append("g").attr("class","groups"),It.exit().remove();var Mt=It.selectAll("g.traces").data(g.identity);Mt.enter().append("g").attr("class","traces"),Mt.exit().remove(),Mt.style("opacity",function(xt){var At=xt[0].trace;return P.traceIs(At,"pie-like")?-1!==X.indexOf(xt[0].label)?.5:1:"legendonly"===At.visible?.5:1}).each(function(){A.select(this).call(S,z,H)}).call(w,z,H).each(function(){Q||A.select(this).call(n,z,nt)}),g.syncOrAsync([i.previousPromises,function(){return function D(z,U,H,J){var nt=z._fullLayout,it=B(J);J||(J=nt[it]);var ut=nt._size,Q=p.isVertical(J),j=p.isGrouped(J),Z="fraction"===J.entrywidthmode,G=J.borderwidth,K=2*G,at=a.itemGap,$=J.itemwidth+2*at,X=2*(G+at),rt=O(J),et=J.y<0||0===J.y&&"top"===rt,st=J.y>1||1===J.y&&"bottom"===rt,dt=J.tracegroupgap,bt={};J._maxHeight=Math.max(et||st?nt.height/2:ut.h,30);var gt=0;J._width=0,J._height=0;var Lt=function F(z){var U=0,H=0,J=z.title.side;return J&&(-1!==J.indexOf("left")&&(U=z._titleWidth),-1!==J.indexOf("top")&&(H=z._titleHeight)),[U,H]}(J);if(Q)H.each(function(Et){var St=Et[0].height;y.setTranslate(this,G+Lt[0],G+Lt[1]+J._height+St/2+at),J._height+=St,J._width=Math.max(J._width,Et[0].width)}),gt=$+J._width,J._width+=at+$+K,J._height+=X,j&&(U.each(function(Et,St){y.setTranslate(this,0,St*J.tracegroupgap)}),J._height+=(J._lgroupsLength-1)*J.tracegroupgap);else{var It=k(J),At=st||et,Gt=nt.width/2;J._maxWidth=Math.max(J.x<0||0===J.x&&"right"===It?At&&"left"===It?ut.l+ut.w:Gt:J.x>1||1===J.x&&"left"===It?At&&"right"===It?ut.r+ut.w:Gt:ut.w,2*$);var Wt=0,Pt=0;H.each(function(Et){var St=L(Et,J,$);Wt=Math.max(Wt,St),Pt+=St}),gt=null;var Vt=0;if(j){var te=0,Qt=0,Bt=0;U.each(function(){var Et=0,St=0;A.select(this).selectAll("g.traces").each(function(Ft){var Nt=L(Ft,J,$),Rt=Ft[0].height;y.setTranslate(this,Lt[0],Lt[1]+G+at+Rt/2+St),St+=Rt,Et=Math.max(Et,Nt),bt[Ft[0].trace.legendgroup]=Et});var Dt=Et+at;Qt>0&&Dt+G+Qt>J._maxWidth?(Vt=Math.max(Vt,Qt),Qt=0,Bt+=te+dt,te=St):te=Math.max(te,St),y.setTranslate(this,Qt,Bt),Qt+=Dt}),J._width=Math.max(Vt,Qt)+G,J._height=Bt+te+X}else{var Ot=H.size(),qt=Pt+K+(Ot-1)*at<J._maxWidth,ie=0,oe=0,pe=0,de=0;H.each(function(Et){var St=Et[0].height,Dt=L(Et,J,$),Ft=qt?Dt:Wt;Z||(Ft+=at),Ft+G+oe-at>=J._maxWidth&&(Vt=Math.max(Vt,de),oe=0,pe+=ie,J._height+=ie,ie=0),y.setTranslate(this,Lt[0]+G+oe,Lt[1]+G+pe+St/2+at),de=oe+Dt+at,oe+=Ft,ie=Math.max(ie,St)}),qt?(J._width=oe+K,J._height=ie+X):(J._width=Math.max(Vt,de)+K,J._height+=ie+X)}}J._width=Math.ceil(Math.max(J._width+Lt[0],J._titleWidth+2*(G+a.titlePad))),J._height=Math.ceil(Math.max(J._height+Lt[1],J._titleHeight+2*(G+a.itemGap))),J._effHeight=Math.min(J._height,J._maxHeight);var Fe=z._context.edits,Kt=Fe.legendText||Fe.legendPosition;H.each(function(Et){var St=A.select(this).select("."+it+"toggle"),Dt=Et[0].height,Ft=Et[0].trace.legendgroup,Nt=L(Et,J,$);j&&""!==Ft&&(Nt=bt[Ft]);var Rt=Kt?$:gt||Nt;!Q&&!Z&&(Rt+=at/2),y.setRect(St,0,-Dt/2,Rt,Dt)})}(z,It,Mt,H)},function(){var wt,ft,pt,kt,xt=J._size,At=H.borderwidth,Gt="paper"===H.xref,Wt="paper"===H.yref;if(bt.text&&function M(z,U,H){if("top center"===U.title.side||"top right"===U.title.side){var nt=U.title.font.size*c,it=0,ut=z.node(),Q=y.bBox(ut).width;"top center"===U.title.side?it=.5*(U._width-2*H-2*a.titlePad-Q):"top right"===U.title.side&&(it=U._width-2*H-2*a.titlePad-Q),r.positionText(z,H+a.titlePad+it,H+nt)}}(gt,H,At),!Q){var Pt,Vt;if(Pt=Gt?xt.l+xt.w*H.x-f[k(H)]*H._width:J.width*H.x-f[k(H)]*H._width,Vt=Wt?xt.t+xt.h*(1-H.y)-f[O(H)]*H._effHeight:J.height*(1-H.y)-f[O(H)]*H._effHeight,function N(z,U,H,J){var nt=z._fullLayout,it=nt[U],ut=k(it),Q=O(it),j="paper"===it.xref,Z="paper"===it.yref;z._fullLayout._reservedMargin[U]={};var G=it.y<.5?"b":"t",K=it.x<.5?"l":"r",at={r:nt.width-H,l:H+it._width,b:nt.height-J,t:J+it._effHeight};if(j&&Z)return i.autoMargin(z,U,{x:it.x,y:it.y,l:it._width*f[ut],r:it._width*m[ut],b:it._effHeight*m[Q],t:it._effHeight*f[Q]});j?z._fullLayout._reservedMargin[U][G]=at[G]:Z||"v"===it.orientation?z._fullLayout._reservedMargin[U][K]=at[K]:z._fullLayout._reservedMargin[U][G]=at[G]}(z,nt,Pt,Vt))return;if(J.margin.autoexpand){var Qt=Pt,Bt=Vt;Pt=Gt?g.constrain(Pt,0,J.width-H._width):Qt,Vt=Wt?g.constrain(Vt,0,J.height-H._effHeight):Bt,Pt!==Qt&&g.log("Constrain "+nt+".x to make legend fit inside graph"),Vt!==Bt&&g.log("Constrain "+nt+".y to make legend fit inside graph")}y.setTranslate(rt,Pt,Vt)}if(Lt.on(".drag",null),rt.on("wheel",null),Q||H._height<=H._maxHeight||z._context.staticPlot){var Ot=H._effHeight;Q&&(Ot=H._height),st.attr({width:H._width-At,height:Ot-At,x:At/2,y:At/2}),y.setTranslate(dt,0,0),et.select("rect").attr({width:H._width-2*At,height:Ot-2*At,x:At,y:At}),y.setClipUrl(dt,it,z),y.setRect(Lt,0,0,0,0),delete H._scrollY}else{var qt=Math.max(a.scrollBarMinHeight,H._effHeight*H._effHeight/H._height),ie=H._effHeight-qt-2*a.scrollBarMargin,oe=H._height-H._effHeight,pe=ie/oe,de=Math.min(H._scrollY||0,oe);st.attr({width:H._width-2*At+a.scrollBarWidth+a.scrollBarMargin,height:H._effHeight-At,x:At/2,y:At/2}),et.select("rect").attr({width:H._width-2*At+a.scrollBarWidth+a.scrollBarMargin,height:H._effHeight-2*At,x:At,y:At+de}),y.setClipUrl(dt,it,z),Rt(de,qt,pe),rt.on("wheel",function(){Rt(de=g.constrain(H._scrollY+A.event.deltaY/ie*oe,0,oe),qt,pe),0!==de&&de!==oe&&A.event.preventDefault()});var Fe,Et,Ft=A.behavior.drag().on("dragstart",function(){var Zt=A.event.sourceEvent;Fe="touchstart"===Zt.type?Zt.changedTouches[0].clientY:Zt.clientY,Et=de}).on("drag",function(){var Zt=A.event.sourceEvent;2===Zt.buttons||Zt.ctrlKey||Rt(de=function(Zt,ee,se){return g.constrain((se-ee)/pe+Zt,0,oe)}(Et,Fe,"touchmove"===Zt.type?Zt.changedTouches[0].clientY:Zt.clientY),qt,pe)});Lt.call(Ft);var Nt=A.behavior.drag().on("dragstart",function(){var Zt=A.event.sourceEvent;"touchstart"===Zt.type&&(Fe=Zt.changedTouches[0].clientY,Et=de)}).on("drag",function(){var Zt=A.event.sourceEvent;"touchmove"===Zt.type&&Rt(de=function(Zt,ee,se){return g.constrain((ee-se)/pe+Zt,0,oe)}(Et,Fe,Zt.changedTouches[0].clientY),qt,pe)});dt.call(Nt)}function Rt(Zt,ee,se){H._scrollY=z._fullLayout[nt]._scrollY=Zt,y.setTranslate(dt,0,-Zt),y.setRect(Lt,H._width,a.scrollBarMargin+Zt*se,a.scrollBarWidth,ee),et.select("rect").attr("y",At+Zt)}z._context.edits.legendPosition&&(rt.classed("cursor-move",!0),u.init({element:rt.node(),gd:z,prepFn:function(){var Zt=y.getTranslate(rt);pt=Zt.x,kt=Zt.y},moveFn:function(Zt,ee){var se=pt+Zt,Be=kt+ee;y.setTranslate(rt,se,Be),wt=u.align(se,H._width,xt.l,xt.l+xt.w,H.xanchor),ft=u.align(Be+H._height,-H._height,xt.t+xt.h,xt.t,H.yanchor)},doneFn:function(){if(void 0!==wt&&void 0!==ft){var Zt={};Zt[nt+".x"]=wt,Zt[nt+".y"]=ft,P.call("_guiRelayout",z,Zt)}},clickFn:function(Zt,ee){var se=ut.selectAll("g.traces").filter(function(){var Be=this.getBoundingClientRect();return ee.clientX>=Be.left&&ee.clientX<=Be.right&&ee.clientY>=Be.top&&ee.clientY<=Be.bottom});se.size()>0&&x(z,rt,se,Zt,ee)}}))}],z)}}function L(z,U,H){var J=z[0],ut=J.trace.legendwidth||U.entrywidth;return"fraction"===U.entrywidthmode?U._maxWidth*ut:H+(ut||J.width)}function x(z,U,H,J,nt){var it=H.data()[0][0].trace,ut={event:nt,node:H.node(),curveNumber:it.index,expandedIndex:it._expandedIndex,data:z.data,layout:z.layout,frames:z._transitionData._frames,config:z._context,fullData:z._fullData,fullLayout:z._fullLayout};it._group&&(ut.group=it._group),P.traceIs(it,"pie-like")&&(ut.label=H.datum()[0].label);var Q=C.triggerHandler(z,"plotly_legendclick",ut);if(1===J){if(!1===Q)return;U._clickTimeout=setTimeout(function(){!z._fullLayout||l(H,z,J)},z._context.doubleClickDelay)}else 2===J&&(U._clickTimeout&&clearTimeout(U._clickTimeout),z._legendMouseDownTime=0,!1!==C.triggerHandler(z,"plotly_legenddoubleclick",ut)&&!1!==Q&&l(H,z,J))}function S(z,U,H){var Z,G,J=B(H),nt=z.data()[0][0],it=nt.trace,ut=P.traceIs(it,"pie-like"),Q=!H._inHover&&U._context.edits.legendText&&!ut,j=H._maxNameLength;nt.groupTitle?(Z=nt.groupTitle.text,G=nt.groupTitle.font):(G=H.font,H.entries?Z=nt.text:(Z=ut?nt.label:it.name,it._meta&&(Z=g.templateString(Z,it._meta))));var K=g.ensureSingle(z,"text",J+"text");K.attr("text-anchor","start").call(y.font,G).text(Q?T(Z,j):Z),r.positionText(K,H.itemwidth+2*a.itemGap,0),Q?K.call(r.makeEditable,{gd:U,text:Z}).call(E,z,U,H).on("edit",function($){this.text(T($,j)).call(E,z,U,H);var X=nt.trace._fullInput||{},rt={};if(P.hasTransform(X,"groupby")){var et=P.getTransformIndices(X,"groupby"),dt=g.keyedContainer(X,"transforms["+et[et.length-1]+"].styles","target","value.name");dt.set(nt.trace._group,$),rt=dt.constructUpdate()}else rt.name=$;return X._isShape?P.call("_guiRelayout",U,"shapes["+it.index+"].name",rt.name):P.call("_guiRestyle",U,rt,it.index)}):E(K,z,U,H)}function T(z,U){var H=Math.max(4,U);if(z&&z.trim().length>=H/2)return z;for(var J=H-(z=z||"").length;J>0;J--)z+=" ";return z}function n(z,U,H){var nt,J=U._context.doubleClickDelay,it=1,ut=g.ensureSingle(z,"rect",H+"toggle",function(Q){U._context.staticPlot||Q.style("cursor","pointer").attr("pointer-events","all"),Q.call(e.fill,"rgba(0,0,0,0)")});U._context.staticPlot||(ut.on("mousedown",function(){(nt=(new Date).getTime())-U._legendMouseDownTime<J?it+=1:(it=1,U._legendMouseDownTime=nt)}),ut.on("mouseup",function(){if(!U._dragged&&!U._editing){var Q=U._fullLayout[H];(new Date).getTime()-U._legendMouseDownTime>J&&(it=Math.max(it-1,1)),x(U,Q,z,it,A.event)}}))}function E(z,U,H,J,nt){J._inHover&&z.attr("data-notex",!0),r.convertToTspans(z,H,function(){!function d(z,U,H,J){var nt=z.data()[0][0];if(H._inHover||!nt||nt.trace.showlegend){var it=z.select("g[class*=math-group]"),ut=it.node(),Q=B(H);H||(H=U._fullLayout[Q]);var K,at,j=H.borderwidth,G=(1===J?H.title.font:nt.groupTitle?nt.groupTitle.font:H.font).size*c;if(ut){var $=y.bBox(ut);K=$.height,at=$.width,1===J?y.setTranslate(it,j,j+.75*K):y.setTranslate(it,0,.25*K)}else{var rt=z.select("."+Q+(1===J?"title":"")+"text"),et=r.lineCount(rt),st=rt.node();if(K=G*et,at=st?y.bBox(st).width:0,1===J)"left"===H.title.side&&(at+=2*a.itemGap),r.positionText(rt,j+a.titlePad,j+G);else{var dt=2*a.itemGap+H.itemwidth;nt.groupTitle&&(dt=a.itemGap,at-=H.itemwidth),r.positionText(rt,dt,-G*((et-1)/2-.3))}}1===J?(H._titleWidth=at,H._titleHeight=K):(nt.lineHeight=G,nt.height=Math.max(K,16)+3,nt.width=at)}else z.remove()}(U,H,J,nt)})}function k(z){return g.isRightAnchor(z)?"right":g.isCenterAnchor(z)?"center":"left"}function O(z){return g.isBottomAnchor(z)?"bottom":g.isMiddleAnchor(z)?"middle":"top"}function B(z){return z._id||"legend"}q.exports=function(U,H){if(H)b(U,H);else{var J=U._fullLayout,nt=J._legends;J._infolayer.selectAll('[class^="legend"]').each(function(){var Z=A.select(this),K=Z.attr("class").split(" ")[0];K.match(v)&&-1===nt.indexOf(K)&&Z.remove()});for(var ut=0;ut<nt.length;ut++)b(U,U._fullLayout[nt[ut]])}}},82424:function(q,W,t){"use strict";var A=t(73972),g=t(10130);q.exports=function(P,C,u){var h,w,y=C._inHover,e=g.isGrouped(C),r=g.isReversed(C),l={},a=[],s=!1,c={},f=0,m=0;function p(z,U,H){if(!1!==C.visible&&(!u||z===C._id))if(""!==U&&g.isGrouped(C))-1===a.indexOf(U)?(a.push(U),s=!0,l[U]=[H]):l[U].push(H);else{var J="~~i"+f;a.push(J),l[J]=[H],f++}}for(h=0;h<P.length;h++){var o=P[h],v=o[0],M=v.trace,b=M.legend,L=M.legendgroup;if(y||M.visible&&M.showlegend)if(A.traceIs(M,"pie-like"))for(c[L]||(c[L]={}),w=0;w<o.length;w++){var x=o[w].label;c[L][x]||(p(b,L,{label:x,color:o[w].color,i:o[w].i,trace:M,pts:o[w].pts}),c[L][x]=!0,m=Math.max(m,(x||"").length))}else p(b,L,v),m=Math.max(m,(M.name||"").length)}if(!a.length)return[];var S=!s||!e,T=[];for(h=0;h<a.length;h++){var n=l[a[h]];T.push(S?n[0]:n)}for(S&&(T=[T]),h=0;h<T.length;h++){var E=1/0;for(w=0;w<T[h].length;w++){var d=T[h][w].trace.legendrank;E>d&&(E=d)}T[h][0]._groupMinRank=E,T[h][0]._preGroupSort=h}var D=function(z,U){return z.trace.legendrank-U.trace.legendrank||z._preSort-U._preSort};for(T.forEach(function(z,U){z[0]._preGroupSort=U}),T.sort(function(z,U){return z[0]._groupMinRank-U[0]._groupMinRank||z[0]._preGroupSort-U[0]._preGroupSort}),h=0;h<T.length;h++){T[h].forEach(function(z,U){z._preSort=U}),T[h].sort(D);var N=T[h][0].trace,k=null;for(w=0;w<T[h].length;w++){var O=T[h][w].trace.legendgrouptitle;if(O&&O.text){k=O,y&&(O.font=C._groupTitleFont);break}}if(r&&T[h].reverse(),k){var B=!1;for(w=0;w<T[h].length;w++)if(A.traceIs(T[h][w].trace,"pie-like")){B=!0;break}T[h].unshift({i:-1,groupTitle:k,noClick:B,trace:{showlegend:N.showlegend,legendgroup:N.legendgroup,visible:"toggleitem"===C.groupclick||N.visible}})}for(w=0;w<T[h].length;w++)T[h][w]=[T[h][w]]}return C._lgroupsLength=T.length,C._maxNameLength=m,T}},85167:function(q,W,t){"use strict";var A=t(73972),g=t(71828),i=g.pushUnique,P=!0;q.exports=function(u,y,e){var r=y._fullLayout;if(!y._dragged&&!y._editing){var c,l=r.legend.itemclick,a=r.legend.itemdoubleclick,s=r.legend.groupclick;if(1===e&&"toggle"===l&&"toggleothers"===a&&P&&y.data&&y._context.showTips&&g.notifier(g._(y,"Double-click on legend to isolate one trace"),"long"),P=!1,1===e?c=l:2===e&&(c=a),c){var f="togglegroup"===s,m=r.hiddenlabels?r.hiddenlabels.slice():[],h=u.data()[0][0];if(!h.groupTitle||!h.noClick){var w=y._fullData,p=(r.shapes||[]).filter(function(Gt){return Gt.showlegend}),o=w.concat(p),v=h.trace;v._isShape&&(v=v._fullInput);var b,L,x,S,T,M=v.legendgroup,E={},d=[],F=[],D=[],k=(r.shapes||[]).map(function(Gt){return Gt._input}),O=!1,U=v.legend,H=v._fullInput;if(H&&H._isShape||!A.traceIs(v,"pie-like")){var rt,$=M&&M.length,X=[];if($)for(b=0;b<o.length;b++)(rt=o[b]).visible&&rt.legendgroup===M&&X.push(b);if("toggle"===c){var et;switch(v.visible){case!0:et="legendonly";break;case!1:et=!1;break;case"legendonly":et=!0}if($)if(f)for(b=0;b<o.length;b++){var st=o[b];!1!==st.visible&&st.legendgroup===M&&z(st,et)}else z(v,et);else z(v,et)}else if("toggleothers"===c){var bt,gt,It,Mt=!0;for(b=0;b<o.length;b++)if(gt=!0!==(It=o[b]).showlegend,!(It===v||gt||(bt=$&&It.legendgroup===M,bt||It.legend!==U||!0!==It.visible||A.traceIs(It,"notLegendIsolatable")))){Mt=!1;break}for(b=0;b<o.length;b++)if(!1!==(It=o[b]).visible&&It.legend===U&&!A.traceIs(It,"notLegendIsolatable"))switch(v.visible){case"legendonly":z(It,!0);break;case!0:gt=!0!==It.showlegend&&!It.legendgroup,z(It,!(!(bt=It===v||$&&It.legendgroup===M)&&!gt)||!!Mt||"legendonly")}}for(b=0;b<F.length;b++)if(x=F[b]){var xt=x.constructUpdate(),At=Object.keys(xt);for(L=0;L<At.length;L++)(E[S=At[L]]=E[S]||[])[D[b]]=xt[S]}for(T=Object.keys(E),b=0;b<T.length;b++)for(S=T[b],L=0;L<d.length;L++)E[S].hasOwnProperty(L)||(E[S][L]=void 0);O?A.call("_guiUpdate",y,E,{shapes:k},d):A.call("_guiRestyle",y,E,d)}else{var nt=h.label,it=m.indexOf(nt);if("toggle"===c)-1===it?m.push(nt):m.splice(it,1);else if("toggleothers"===c){var ut=-1!==it,Q=[];for(b=0;b<y.calcdata.length;b++){var j=y.calcdata[b];for(L=0;L<j.length;L++){var G=j[L].label;U===j[0].trace.legend&&nt!==G&&(-1===m.indexOf(G)&&(ut=!0),i(m,G),Q.push(G))}}if(!ut)for(var K=0;K<Q.length;K++){var at=m.indexOf(Q[K]);-1!==at&&m.splice(at,1)}}A.call("_guiRelayout",y,"hiddenlabels",m)}}}}function N(Gt,Wt){var Pt=d.indexOf(Gt),Vt=E.visible;return Vt||(Vt=E.visible=[]),-1===d.indexOf(Gt)&&(d.push(Gt),Pt=d.length-1),Vt[Pt]=Wt,Pt}function z(Gt,Wt){if(!h.groupTitle||f){var Pt=Gt._fullInput||Gt,Vt=Pt._isShape,te=Pt.index;if(void 0===te&&(te=Pt._index),A.hasTransform(Pt,"groupby")){var Qt=F[te];if(!Qt){var Bt=A.getTransformIndices(Pt,"groupby");Qt=g.keyedContainer(Pt,"transforms["+Bt[Bt.length-1]+"].styles","target","value.visible"),F[te]=Qt}var qt=Qt.get(Gt._group);void 0===qt&&(qt=!0),!1!==qt&&Qt.set(Gt._group,Wt),D[te]=N(te,!1!==Pt.visible)}else{var ie=!1!==Pt.visible&&Wt;Vt?function B(Gt,Wt){k[Gt].visible=Wt,O=!0}(te,ie):N(te,ie)}}}}},10130:function(q,W){"use strict";W.isGrouped=function(A){return-1!==(A.traceorder||"").indexOf("grouped")},W.isVertical=function(A){return"h"!==A.orientation},W.isReversed=function(A){return-1!==(A.traceorder||"").indexOf("reversed")}},2199:function(q,W,t){"use strict";q.exports={moduleType:"component",name:"legend",layoutAttributes:t(33030),supplyLayoutDefaults:t(99017),draw:t(43969),style:t(53630)}},53630:function(q,W,t){"use strict";var A=t(39898),g=t(73972),i=t(71828),P=i.strTranslate,C=t(91424),u=t(7901),y=t(52075).extractOpts,e=t(34098),r=t(63463),l=t(53581).castOption,a=t(14928);function w(v,M){return(M?"radial":"horizontal")+(v?"":"reversed")}function p(v){var M=v[0].trace,b=M.contours,L=e.hasLines(M),x=e.hasMarkers(M),S=M.visible&&M.fill&&"none"!==M.fill,T=!1,n=!1;if(b){var E=b.coloring;"lines"===E?T=!0:L="none"===E||"heatmap"===E||b.showlines,"constraint"===b.type?S="="!==b._operation:("fill"===E||"heatmap"===E)&&(n=!0)}return{showMarker:x,showLine:L,showFill:S,showGradientLine:T,showGradientFill:n,anyLine:L||T,anyFill:S||n}}function o(v,M,b){return v&&i.isArrayOrTypedArray(v)?M:v>b?b:v}q.exports=function(M,b,L){L||(L=b._fullLayout.legend);var S="constant"===L.itemsizing,T=L.itemwidth,E=P((T+2*a.itemGap)/2,0),d=function(Q,j,Z,G){var K;if(Q+1)K=Q;else{if(!(j&&j.width>0))return 0;K=j.width}return S?G:Math.min(K,Z)};function B(Q,j,Z){var G=Q[0].trace,K=G.marker||{},at=K.line||{},$=Z?G.visible&&G.type===Z:g.traceIs(G,"bar"),X=A.select(j).select("g.legendpoints").selectAll("path.legend"+Z).data($?[Q]:[]);X.enter().append("path").classed("legend"+Z,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),X.exit().remove(),X.each(function(rt){var et=A.select(this),st=rt[0],dt=d(st.mlw,K.line,5,2);et.style("stroke-width",dt+"px");var bt=st.mcc;if(!L._inHover&&"mc"in st){var gt=y(K),Lt=gt.mid;void 0===Lt&&(Lt=(gt.max+gt.min)/2),bt=C.tryColorscale(K,"")(Lt)}var It=bt||st.mc||K.color,Mt=K.pattern,xt=Mt&&C.getPatternAttr(Mt.shape,0,"");if(xt){var At=C.getPatternAttr(Mt.bgcolor,0,null),Gt=C.getPatternAttr(Mt.fgcolor,0,null),Wt=Mt.fgopacity,Pt=o(Mt.size,8,10),Vt=o(Mt.solidity,.5,1);et.call(C.pattern,"legend",b,"legend-"+G.uid,xt,Pt,Vt,bt,Mt.fillmode,At,Gt,Wt)}else et.call(u.fill,It);dt&&u.stroke(et,st.mlc||at.color)})}function it(Q,j,Z){var G=Q[0],K=G.trace,at=Z?K.visible&&K.type===Z:g.traceIs(K,Z),$=A.select(j).select("g.legendpoints").selectAll("path.legend"+Z).data(at?[Q]:[]);if($.enter().append("path").classed("legend"+Z,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),$.exit().remove(),$.size()){var X=K.marker||{},rt=d(l(X.line.width,G.pts),X.line,5,2),et="pieLike",st=i.minExtend(K,{marker:{line:{width:rt}}},et),dt=i.minExtend(G,{trace:st},et);r($,dt,st,b)}}M.each(function(Q){var j=A.select(this),Z=i.ensureSingle(j,"g","layers");Z.style("opacity",Q[0].trace.opacity);var G=L.valign,K=Q[0].lineHeight,at=Q[0].height;Z.attr("transform","middle"!==G&&K&&at?P(0,{top:1,bottom:-1}[G]*(.5*(K-at+3))):null),Z.selectAll("g.legendfill").data([Q]).enter().append("g").classed("legendfill",!0),Z.selectAll("g.legendlines").data([Q]).enter().append("g").classed("legendlines",!0);var st=Z.selectAll("g.legendsymbols").data([Q]);st.enter().append("g").classed("legendsymbols",!0),st.selectAll("g.legendpoints").data([Q]).enter().append("g").classed("legendpoints",!0)}).each(function ut(Q){var Z,j=Q[0].trace,G=[];if(j.visible)switch(j.type){case"histogram2d":case"heatmap":G=[["M-15,-2V4H15V-2Z"]],Z=!0;break;case"choropleth":case"choroplethmapbox":G=[["M-6,-6V6H6V-6Z"]],Z=!0;break;case"densitymapbox":G=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],Z="radial";break;case"cone":G=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],Z=!1;break;case"streamtube":G=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],Z=!1;break;case"surface":G=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],Z=!0;break;case"mesh3d":G=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],Z=!1;break;case"volume":G=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],Z=!0;break;case"isosurface":G=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],Z=!1}var K=A.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(G);K.enter().append("path").classed("legend3dandfriends",!0).attr("transform",E).style("stroke-miterlimit",1),K.exit().remove(),K.each(function(at,$){var bt,X=A.select(this),rt=y(j),et=rt.colorscale,st=rt.reversescale;if(et){if(!Z){var Lt=et.length;bt=0===$?et[st?Lt-1:0][1]:1===$?et[st?0:Lt-1][1]:et[Math.floor((Lt-1)/2)][1]}}else{var gt=j.vertexcolor||j.facecolor||j.color;bt=i.isArrayOrTypedArray(gt)?gt[$]||gt[0]:gt}X.attr("d",at[0]),bt?X.call(u.fill,bt):X.call(function(It){It.size()&&C.gradient(It,b,"legendfill-"+j.uid,w(st,"radial"===Z),et,"fill")})})}).each(function N(Q){var j=Q[0].trace,Z="waterfall"===j.type;if(Q[0]._distinct&&Z){var G=Q[0].trace[Q[0].dir].marker;return Q[0].mc=G.color,Q[0].mlw=G.line.width,Q[0].mlc=G.line.color,B(Q,this,"waterfall")}var K=[];j.visible&&Z&&(K=Q[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var at=A.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(K);at.enter().append("path").classed("legendwaterfall",!0).attr("transform",E).style("stroke-miterlimit",1),at.exit().remove(),at.each(function($){var X=A.select(this),rt=j[$[0]].marker,et=d(void 0,rt.line,5,2);X.attr("d",$[1]).style("stroke-width",et+"px").call(u.fill,rt.color),et&&X.call(u.stroke,rt.line.color)})}).each(function O(Q){B(Q,this,"funnel")}).each(function k(Q){B(Q,this)}).each(function z(Q){var j=Q[0].trace,Z=A.select(this).select("g.legendpoints").selectAll("path.legendbox").data(j.visible&&g.traceIs(j,"box-violin")?[Q]:[]);Z.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),Z.exit().remove(),Z.each(function(){var G=A.select(this);if("all"!==j.boxpoints&&"all"!==j.points||0!==u.opacity(j.fillcolor)||0!==u.opacity((j.line||{}).color)){var at=d(void 0,j.line,5,2);G.style("stroke-width",at+"px").call(u.fill,j.fillcolor),at&&u.stroke(G,j.line.color)}else{var K=i.minExtend(j,{marker:{size:S?12:i.constrain(j.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});Z.call(C.pointStyle,K,b)}})}).each(function nt(Q){it(Q,this,"funnelarea")}).each(function J(Q){it(Q,this,"pie")}).each(function F(Q){var st,dt,j=p(Q),Z=j.showFill,G=j.showLine,K=j.showGradientLine,at=j.showGradientFill,$=j.anyFill,X=j.anyLine,rt=Q[0],et=rt.trace,bt=y(et),gt=bt.colorscale,Lt=bt.reversescale,xt=e.hasMarkers(et)||!$?"M5,0":X?"M5,-2":"M5,-3",At=A.select(this),Gt=At.select(".legendfill").selectAll("path").data(Z||at?[Q]:[]);if(Gt.enter().append("path").classed("js-fill",!0),Gt.exit().remove(),Gt.attr("d",xt+"h"+T+"v6h-"+T+"z").call(function(Vt){Vt.size()&&(Z?C.fillGroupStyle(Vt,b):C.gradient(Vt,b,"legendfill-"+et.uid,w(Lt),gt,"fill"))}),G||K){var Wt=d(void 0,et.line,10,5);dt=i.minExtend(et,{line:{width:Wt}}),st=[i.minExtend(rt,{trace:dt})]}var Pt=At.select(".legendlines").selectAll("path").data(G||K?[st]:[]);Pt.enter().append("path").classed("js-line",!0),Pt.exit().remove(),Pt.attr("d",xt+(K?"l"+T+",0.0001":"h"+T)).call(G?C.lineGroupStyle:function(Vt){if(Vt.size()){var te="legendline-"+et.uid;C.lineGroupStyle(Vt),C.gradient(Vt,b,te,w(Lt),gt,"stroke")}})}).each(function D(Q){var et,st,j=p(Q),K=j.showLine,at=j.showMarker,$=Q[0],X=$.trace,rt=!at&&!j.anyLine&&!j.anyFill&&e.hasText(X);function dt(Gt,Wt,Pt,Vt){var te=i.nestedProperty(X,Gt).get(),Qt=i.isArrayOrTypedArray(te)&&Wt?Wt(te):te;if(S&&Qt&&void 0!==Vt&&(Qt=Vt),Pt){if(Qt<Pt[0])return Pt[0];if(Qt>Pt[1])return Pt[1]}return Qt}function bt(Gt){return $._distinct&&$.index&&Gt[$.index]?Gt[$.index]:Gt[0]}if(at||rt||K){var gt={},Lt={};if(at){gt.mc=dt("marker.color",bt),gt.mx=dt("marker.symbol",bt),gt.mo=dt("marker.opacity",i.mean,[.2,1]),gt.mlc=dt("marker.line.color",bt),gt.mlw=dt("marker.line.width",i.mean,[0,5],2),Lt.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var It=dt("marker.size",i.mean,[2,16],12);gt.ms=It,Lt.marker.size=It}K&&(Lt.line={width:dt("line.width",bt,[0,10],5)}),rt&&(gt.tx="Aa",gt.tp=dt("textposition",bt),gt.ts=10,gt.tc=dt("textfont.color",bt),gt.tf=dt("textfont.family",bt)),et=[i.minExtend($,gt)],(st=i.minExtend(X,Lt)).selectedpoints=null,st.texttemplate=null}var Mt=A.select(this).select("g.legendpoints"),xt=Mt.selectAll("path.scatterpts").data(at?et:[]);xt.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",E),xt.exit().remove(),xt.call(C.pointStyle,st,b),at&&(et[0].mrc=3);var At=Mt.selectAll("g.pointtext").data(rt?et:[]);At.enter().append("g").classed("pointtext",!0).append("text").attr("transform",E),At.exit().remove(),At.selectAll("text").call(C.textPointStyle,st,b)}).each(function U(Q){var j=Q[0].trace,Z=A.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(j.visible&&"candlestick"===j.type?[Q,Q]:[]);Z.enter().append("path").classed("legendcandle",!0).attr("d",function(G,K){return K?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",E).style("stroke-miterlimit",1),Z.exit().remove(),Z.each(function(G,K){var at=A.select(this),$=j[K?"increasing":"decreasing"],X=d(void 0,$.line,5,2);at.style("stroke-width",X+"px").call(u.fill,$.fillcolor),X&&u.stroke(at,$.line.color)})}).each(function H(Q){var j=Q[0].trace,Z=A.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(j.visible&&"ohlc"===j.type?[Q,Q]:[]);Z.enter().append("path").classed("legendohlc",!0).attr("d",function(G,K){return K?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",E).style("stroke-miterlimit",1),Z.exit().remove(),Z.each(function(G,K){var at=A.select(this),$=j[K?"increasing":"decreasing"],X=d(void 0,$.line,5,2);at.style("fill","none").call(C.dashLine,$.line.dash,X),X&&u.stroke(at,$.line.color)})})}},42068:function(q,W,t){"use strict";t(93348),q.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},26023:function(q,W,t){"use strict";var A=t(73972),g=t(74875),i=t(41675),P=t(24255),C=t(34031).eraseActiveShape,u=t(71828),y=u._,e=q.exports={};function r(v,M){var d,F,b=M.currentTarget,L=b.getAttribute("data-attr"),x=b.getAttribute("data-val")||!0,S=v._fullLayout,T={},n=i.list(v,null,!0),E=S._cartesianSpikesEnabled;if("zoom"===L){var O,D="in"===x?.5:2,N=(1+D)/2,k=(1-D)/2;for(F=0;F<n.length;F++)if(!(d=n[F]).fixedrange)if(O=d._name,"auto"===x)T[O+".autorange"]=!0;else if("reset"===x)void 0===d._rangeInitial0&&void 0===d._rangeInitial1?T[O+".autorange"]=!0:void 0===d._rangeInitial0?(T[O+".autorange"]=d._autorangeInitial,T[O+".range"]=[null,d._rangeInitial1]):void 0===d._rangeInitial1?(T[O+".range"]=[d._rangeInitial0,null],T[O+".autorange"]=d._autorangeInitial):T[O+".range"]=[d._rangeInitial0,d._rangeInitial1],void 0!==d._showSpikeInitial&&(T[O+".showspikes"]=d._showSpikeInitial,"on"===E&&!d._showSpikeInitial&&(E="off"));else{var B=[d.r2l(d.range[0]),d.r2l(d.range[1])],z=[N*B[0]+k*B[1],N*B[1]+k*B[0]];T[O+".range[0]"]=d.l2r(z[0]),T[O+".range[1]"]=d.l2r(z[1])}}else"hovermode"===L&&("x"===x||"y"===x)&&b.setAttribute("data-val",x=S._isHoriz?"y":"x"),T[L]=x;S._cartesianSpikesEnabled=E,A.call("_guiRelayout",v,T)}function l(v,M){for(var b=M.currentTarget,L=b.getAttribute("data-attr"),x=b.getAttribute("data-val")||!0,S=v._fullLayout._subplots.gl3d||[],T={},n=L.split("."),E=0;E<S.length;E++)T[S[E]+"."+n[1]]=x;T.dragmode="pan"===x?x:"zoom",A.call("_guiRelayout",v,T)}function a(v,M){for(var L=M.currentTarget.getAttribute("data-attr"),x="resetLastSave"===L,S="resetDefault"===L,T=v._fullLayout,n=T._subplots.gl3d||[],E={},d=0;d<n.length;d++){var B,F=n[d],D=F+".camera",N=F+".aspectratio",k=F+".aspectmode",O=T[F]._scene;x?(E[D+".up"]=O.viewInitial.up,E[D+".eye"]=O.viewInitial.eye,E[D+".center"]=O.viewInitial.center,B=!0):S&&(E[D+".up"]=null,E[D+".eye"]=null,E[D+".center"]=null,B=!0),B&&(E[N+".x"]=O.viewInitial.aspectratio.x,E[N+".y"]=O.viewInitial.aspectratio.y,E[N+".z"]=O.viewInitial.aspectratio.z,E[k]=O.viewInitial.aspectmode)}A.call("_guiRelayout",v,E)}function s(v,M){var b=M.currentTarget,L=b._previousVal,x=v._fullLayout,S=x._subplots.gl3d||[],T=["xaxis","yaxis","zaxis"],n={},E={};if(L)E=L,b._previousVal=null;else{for(var d=0;d<S.length;d++){var F=S[d],D=x[F],N=F+".hovermode";n[N]=D.hovermode,E[N]=!1;for(var k=0;k<3;k++){var O=T[k],B=F+"."+O+".showspikes";E[B]=!1,n[B]=D[O].showspikes}}b._previousVal=n}return E}function f(v,M){for(var b=M.currentTarget,L=b.getAttribute("data-attr"),x=b.getAttribute("data-val")||!0,S=v._fullLayout,T=S._subplots.geo||[],n=0;n<T.length;n++){var E=T[n];if("zoom"===L){var F=S[E].projection.scale;A.call("_guiRelayout",v,E+".projection.scale","in"===x?2*F:.5*F)}}"reset"===L&&o(v,"geo")}function m(v){var M=v._fullLayout;return!M.hovermode&&(M._has("cartesian")?M._isHoriz?"y":"x":"closest")}function h(v){var M=m(v);A.call("_guiRelayout",v,"hovermode",M)}function p(v,M){for(var L=M.currentTarget.getAttribute("data-val"),x=v._fullLayout,S=x._subplots.mapbox||[],n={},E=0;E<S.length;E++){var d=S[E],F=x[d].zoom;n[d+".zoom"]="in"===L?1.05*F:F/1.05}A.call("_guiRelayout",v,n)}function o(v,M){for(var b=v._fullLayout,L=b._subplots[M]||[],x={},S=0;S<L.length;S++)for(var T=L[S],E=b[T]._subplot.viewInitial,d=Object.keys(E),F=0;F<d.length;F++){var D=d[F];x[T+"."+D]=E[D]}A.call("_guiRelayout",v,x)}e.toImage={name:"toImage",title:function(v){return y(v,"png"===((v._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:P.camera,click:function(v){var M=v._context.toImageButtonOptions,b={format:M.format||"png"};u.notifier(y(v,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==b.format&&u.isIE()&&(u.notifier(y(v,"IE only supports svg.  Changing format to svg."),"long"),b.format="svg"),["filename","width","height","scale"].forEach(function(L){L in M&&(b[L]=M[L])}),A.call("downloadImage",v,b).then(function(L){u.notifier(y(v,"Snapshot succeeded")+" - "+L,"long")}).catch(function(){u.notifier(y(v,"Sorry, there was a problem downloading your snapshot!"),"long")})}},e.sendDataToCloud={name:"sendDataToCloud",title:function(v){return y(v,"Edit in Chart Studio")},icon:P.disk,click:function(v){g.sendDataToCloud(v)}},e.editInChartStudio={name:"editInChartStudio",title:function(v){return y(v,"Edit in Chart Studio")},icon:P.pencil,click:function(v){g.sendDataToCloud(v)}},e.zoom2d={name:"zoom2d",_cat:"zoom",title:function(v){return y(v,"Zoom")},attr:"dragmode",val:"zoom",icon:P.zoombox,click:r},e.pan2d={name:"pan2d",_cat:"pan",title:function(v){return y(v,"Pan")},attr:"dragmode",val:"pan",icon:P.pan,click:r},e.select2d={name:"select2d",_cat:"select",title:function(v){return y(v,"Box Select")},attr:"dragmode",val:"select",icon:P.selectbox,click:r},e.lasso2d={name:"lasso2d",_cat:"lasso",title:function(v){return y(v,"Lasso Select")},attr:"dragmode",val:"lasso",icon:P.lasso,click:r},e.drawclosedpath={name:"drawclosedpath",title:function(v){return y(v,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:P.drawclosedpath,click:r},e.drawopenpath={name:"drawopenpath",title:function(v){return y(v,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:P.drawopenpath,click:r},e.drawline={name:"drawline",title:function(v){return y(v,"Draw line")},attr:"dragmode",val:"drawline",icon:P.drawline,click:r},e.drawrect={name:"drawrect",title:function(v){return y(v,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:P.drawrect,click:r},e.drawcircle={name:"drawcircle",title:function(v){return y(v,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:P.drawcircle,click:r},e.eraseshape={name:"eraseshape",title:function(v){return y(v,"Erase active shape")},icon:P.eraseshape,click:C},e.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(v){return y(v,"Zoom in")},attr:"zoom",val:"in",icon:P.zoom_plus,click:r},e.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(v){return y(v,"Zoom out")},attr:"zoom",val:"out",icon:P.zoom_minus,click:r},e.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(v){return y(v,"Autoscale")},attr:"zoom",val:"auto",icon:P.autoscale,click:r},e.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(v){return y(v,"Reset axes")},attr:"zoom",val:"reset",icon:P.home,click:r},e.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(v){return y(v,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:P.tooltip_basic,gravity:"ne",click:r},e.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(v){return y(v,"Compare data on hover")},attr:"hovermode",val:function(v){return v._fullLayout._isHoriz?"y":"x"},icon:P.tooltip_compare,gravity:"ne",click:r},e.zoom3d={name:"zoom3d",_cat:"zoom",title:function(v){return y(v,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:P.zoombox,click:l},e.pan3d={name:"pan3d",_cat:"pan",title:function(v){return y(v,"Pan")},attr:"scene.dragmode",val:"pan",icon:P.pan,click:l},e.orbitRotation={name:"orbitRotation",title:function(v){return y(v,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:P["3d_rotate"],click:l},e.tableRotation={name:"tableRotation",title:function(v){return y(v,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:P["z-axis"],click:l},e.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(v){return y(v,"Reset camera to default")},attr:"resetDefault",icon:P.home,click:a},e.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(v){return y(v,"Reset camera to last save")},attr:"resetLastSave",icon:P.movie,click:a},e.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(v){return y(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:P.tooltip_basic,gravity:"ne",click:function c(v,M){var b=s(v,M);A.call("_guiRelayout",v,b)}},e.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(v){return y(v,"Zoom in")},attr:"zoom",val:"in",icon:P.zoom_plus,click:f},e.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(v){return y(v,"Zoom out")},attr:"zoom",val:"out",icon:P.zoom_minus,click:f},e.resetGeo={name:"resetGeo",_cat:"reset",title:function(v){return y(v,"Reset")},attr:"reset",val:null,icon:P.autoscale,click:f},e.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(v){return y(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:P.tooltip_basic,gravity:"ne",click:h},e.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(v){return y(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:P.tooltip_basic,gravity:"ne",click:h},e.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(v){return y(v,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:P.tooltip_basic,gravity:"ne",click:h},e.resetViewSankey={name:"resetSankeyGroup",title:function(v){return y(v,"Reset view")},icon:P.home,click:function(v){for(var M={"node.groups":[],"node.x":[],"node.y":[]},b=0;b<v._fullData.length;b++){var L=v._fullData[b]._viewInitial;M["node.groups"].push(L.node.groups.slice()),M["node.x"].push(L.node.x.slice()),M["node.y"].push(L.node.y.slice())}A.call("restyle",v,M)}},e.toggleHover={name:"toggleHover",title:function(v){return y(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:P.tooltip_basic,gravity:"ne",click:function(v,M){var b=s(v,M);b.hovermode=m(v),A.call("_guiRelayout",v,b)}},e.resetViews={name:"resetViews",title:function(v){return y(v,"Reset views")},icon:P.home,click:function(v,M){var b=M.currentTarget;b.setAttribute("data-attr","zoom"),b.setAttribute("data-val","reset"),r(v,M),b.setAttribute("data-attr","resetLastSave"),a(v,M),o(v,"geo"),o(v,"mapbox")}},e.toggleSpikelines={name:"toggleSpikelines",title:function(v){return y(v,"Toggle Spike Lines")},icon:P.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(v){var M=v._fullLayout;M._cartesianSpikesEnabled="on"===M._cartesianSpikesEnabled?"off":"on",A.call("_guiRelayout",v,function w(v){for(var b="on"===v._fullLayout._cartesianSpikesEnabled,L=i.list(v,null,!0),x={},S=0;S<L.length;S++){var T=L[S];x[T._name+".showspikes"]=!!b||T._showSpikeInitial}return x}(v))}},e.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(v){return y(v,"Reset view")},attr:"reset",icon:P.home,click:function(v){o(v,"mapbox")}},e.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(v){return y(v,"Zoom in")},attr:"zoom",val:"in",icon:P.zoom_plus,click:p},e.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(v){return y(v,"Zoom out")},attr:"zoom",val:"out",icon:P.zoom_minus,click:p}},93348:function(q,W,t){"use strict";var A=t(26023),g=Object.keys(A),i=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],P=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(i),C=[];g.forEach(function(y){!function(y){if(-1===P.indexOf(y._cat||y.name)){var e=y.name,r=(y._cat||y.name).toLowerCase();-1===C.indexOf(e)&&C.push(e),-1===C.indexOf(r)&&C.push(r)}}(A[y])}),C.sort(),q.exports={DRAW_MODES:i,backButtons:P,foreButtons:C}},35750:function(q,W,t){"use strict";var A=t(71828),g=t(7901),i=t(44467),P=t(42068);q.exports=function(u,y){var e=u.modebar||{},r=i.newContainer(y,"modebar");function l(s,c){return A.coerce(e,r,P,s,c)}l("orientation"),l("bgcolor",g.addOpacity(y.paper_bgcolor,.5));var a=g.contrast(g.rgb(y.modebar.bgcolor));l("color",g.addOpacity(a,.3)),l("activecolor",g.addOpacity(a,.7)),l("uirevision",y.uirevision),l("add"),l("remove")}},64168:function(q,W,t){"use strict";q.exports={moduleType:"component",name:"modebar",layoutAttributes:t(42068),supplyLayoutDefaults:t(35750),manage:t(14192)}},14192:function(q,W,t){"use strict";var A=t(41675),g=t(34098),i=t(73972),P=t(23469).isUnifiedHover,C=t(37676),u=t(26023),y=t(93348).DRAW_MODES,e=t(71828).extendDeep;function r(m){var h=m._fullLayout,w=m._fullData,p=m._context;function o($,X){if("string"==typeof X){if(X.toLowerCase()===$.toLowerCase())return!0}else if(X.name===$||(X._cat||X.name)===$.toLowerCase())return!0;return!1}var v=h.modebar.add;"string"==typeof v&&(v=[v]);var M=h.modebar.remove;"string"==typeof M&&(M=[M]);var b=p.modeBarButtonsToAdd.concat(v.filter(function($){for(var X=0;X<p.modeBarButtonsToRemove.length;X++)if(o($,p.modeBarButtonsToRemove[X]))return!1;return!0})),L=p.modeBarButtonsToRemove.concat(M.filter(function($){for(var X=0;X<p.modeBarButtonsToAdd.length;X++)if(o($,p.modeBarButtonsToAdd[X]))return!1;return!0})),x=h._has("cartesian"),S=h._has("gl3d"),T=h._has("geo"),n=h._has("pie"),E=h._has("funnelarea"),d=h._has("gl2d"),F=h._has("ternary"),D=h._has("mapbox"),N=h._has("polar"),k=h._has("smith"),O=h._has("sankey"),B=function l(m){for(var h=A.list({_fullLayout:m},null,!0),w=0;w<h.length;w++)if(!h[w].fixedrange)return!1;return!0}(h),z=P(h.hovermode),U=[];function H($){if($.length){for(var X=[],rt=0;rt<$.length;rt++){for(var et=$[rt],st=u[et],dt=st.name.toLowerCase(),bt=(st._cat||st.name).toLowerCase(),gt=!1,Lt=0;Lt<L.length;Lt++){var It=L[Lt].toLowerCase();if(It===dt||It===bt){gt=!0;break}}gt||X.push(u[et])}U.push(X)}}var J=["toImage"];p.showEditInChartStudio?J.push("editInChartStudio"):p.showSendToCloud&&J.push("sendDataToCloud"),H(J);var nt=[],it=[],ut=[],Q=[];(x||d||n||E||F)+T+S+D+N+k>1?(it=["toggleHover"],ut=["resetViews"]):T?(nt=["zoomInGeo","zoomOutGeo"],it=["hoverClosestGeo"],ut=["resetGeo"]):S?(it=["hoverClosest3d"],ut=["resetCameraDefault3d","resetCameraLastSave3d"]):D?(nt=["zoomInMapbox","zoomOutMapbox"],it=["toggleHover"],ut=["resetViewMapbox"]):d?it=["hoverClosestGl2d"]:n?it=["hoverClosestPie"]:O?(it=["hoverClosestCartesian","hoverCompareCartesian"],ut=["resetViewSankey"]):it=["toggleHover"],x&&(it=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function s(m){for(var h=0;h<m.length;h++)if(!i.traceIs(m[h],"noHover"))return!1;return!0}(w)||z)&&(it=[]),(x||d)&&!B&&(nt=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==ut[0]&&(ut=["resetScale2d"])),S?Q=["zoom3d","pan3d","orbitRotation","tableRotation"]:(x||d)&&!B||F?Q=["zoom2d","pan2d"]:D||T?Q=["pan2d"]:N&&(Q=["zoom2d"]),function a(m){for(var h=!1,w=0;w<m.length&&!h;w++){var p=m[w];!p._module||!p._module.selectPoints||(i.traceIs(p,"scatter-like")?(g.hasMarkers(p)||g.hasText(p))&&(h=!0):i.traceIs(p,"box-violin")?("all"===p.boxpoints||"all"===p.points)&&(h=!0):h=!0)}return h}(w)&&Q.push("select2d","lasso2d");var j=[],Z=function($){-1===j.indexOf($)&&-1!==it.indexOf($)&&j.push($)};if(Array.isArray(b)){for(var G=[],K=0;K<b.length;K++){var at=b[K];"string"==typeof at?(at=at.toLowerCase(),-1!==y.indexOf(at)?(h._has("mapbox")||h._has("cartesian"))&&Q.push(at):"togglespikelines"===at?Z("toggleSpikelines"):"togglehover"===at?Z("toggleHover"):"hovercompare"===at?Z("hoverCompareCartesian"):"hoverclosest"===at?(Z("hoverClosestCartesian"),Z("hoverClosestGeo"),Z("hoverClosest3d"),Z("hoverClosestGl2d"),Z("hoverClosestPie")):"v1hovermode"===at&&(Z("toggleHover"),Z("hoverClosestCartesian"),Z("hoverCompareCartesian"),Z("hoverClosestGeo"),Z("hoverClosest3d"),Z("hoverClosestGl2d"),Z("hoverClosestPie"))):G.push(at)}b=G}return H(Q),H(nt.concat(ut)),H(j),function c(m,h){if(h.length)if(Array.isArray(h[0]))for(var w=0;w<h.length;w++)m.push(h[w]);else m.push(h);return m}(U,b)}q.exports=function(h){var w=h._fullLayout,p=h._context,o=w._modeBar;if(p.displayModeBar||p.watermark){if(!Array.isArray(p.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(p.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var M,v=p.modeBarButtons;M=Array.isArray(v)&&v.length?function f(m){for(var h=e([],m),w=0;w<h.length;w++)for(var p=h[w],o=0;o<p.length;o++){var v=p[o];if("string"==typeof v){if(void 0===u[v])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));h[w][o]=u[v]}}return h}(v):!p.displayModeBar&&p.watermark?[]:r(h),o?o.update(h,M):w._modeBar=C(h,M)}else o&&(o.destroy(),delete w._modeBar)}},37676:function(q,W,t){"use strict";var A=t(39898),g=t(92770),i=t(71828),P=t(24255),C=t(11506).version,u=new DOMParser;function y(a){this.container=a.container,this.element=document.createElement("div"),this.update(a.graphInfo,a.buttons),this.container.appendChild(this.element)}var e=y.prototype;e.update=function(a,s){this.graphInfo=a;var c=this.graphInfo._context,f=this.graphInfo._fullLayout,m="modebar-"+f._uid;this.element.setAttribute("id",m),this._uid=m,this.element.className="modebar","hover"===c.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===f.modebar.orientation&&(this.element.className+=" vertical",s=s.reverse());var h=f.modebar,w="hover"===c.displayModeBar?".js-plotly-plot .plotly:hover ":"";i.deleteRelatedStyleRule(m),i.addRelatedStyleRule(m,w+"#"+m+" .modebar-group","background-color: "+h.bgcolor),i.addRelatedStyleRule(m,"#"+m+" .modebar-btn .icon path","fill: "+h.color),i.addRelatedStyleRule(m,"#"+m+" .modebar-btn:hover .icon path","fill: "+h.activecolor),i.addRelatedStyleRule(m,"#"+m+" .modebar-btn.active .icon path","fill: "+h.activecolor);var p=!this.hasButtons(s),o=this.hasLogo!==c.displaylogo,v=this.locale!==c.locale;if(this.locale=c.locale,(p||o||v)&&(this.removeAllButtons(),this.updateButtons(s),c.watermark||c.displaylogo)){var M=this.getLogo();c.watermark&&(M.className=M.className+" watermark"),"v"===f.modebar.orientation?this.element.insertBefore(M,this.element.childNodes[0]):this.element.appendChild(M),this.hasLogo=!0}this.updateActiveButton()},e.updateButtons=function(a){var s=this;this.buttons=a,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(c){var f=s.createGroup();c.forEach(function(m){var h=m.name;if(!h)throw new Error("must provide button 'name' in button config");if(-1!==s.buttonsNames.indexOf(h))throw new Error("button name '"+h+"' is taken");s.buttonsNames.push(h);var w=s.createButton(m);s.buttonElements.push(w),f.appendChild(w)}),s.element.appendChild(f)})},e.createGroup=function(){var a=document.createElement("div");return a.className="modebar-group",a},e.createButton=function(a){var s=this,c=document.createElement("a");c.setAttribute("rel","tooltip"),c.className="modebar-btn";var f=a.title;void 0===f?f=a.name:"function"==typeof f&&(f=f(this.graphInfo)),(f||0===f)&&c.setAttribute("data-title",f),void 0!==a.attr&&c.setAttribute("data-attr",a.attr);var m=a.val;if(void 0!==m&&("function"==typeof m&&(m=m(this.graphInfo)),c.setAttribute("data-val",m)),"function"!=typeof a.click)throw new Error("must provide button 'click' function in button config");c.addEventListener("click",function(p){a.click(s.graphInfo,p),s.updateActiveButton(p.currentTarget)}),c.setAttribute("data-toggle",a.toggle||!1),a.toggle&&A.select(c).classed("active",!0);var w=a.icon;return c.appendChild("function"==typeof w?w():this.createIcon(w||P.question)),c.setAttribute("data-gravity",a.gravity||"n"),c},e.createIcon=function(a){var f,s=g(a.height)?Number(a.height):a.ascent-a.descent,c="http://www.w3.org/2000/svg";if(a.path){(f=document.createElementNS(c,"svg")).setAttribute("viewBox",[0,0,a.width,s].join(" ")),f.setAttribute("class","icon");var m=document.createElementNS(c,"path");m.setAttribute("d",a.path),a.transform?m.setAttribute("transform",a.transform):void 0!==a.ascent&&m.setAttribute("transform","matrix(1 0 0 -1 0 "+a.ascent+")"),f.appendChild(m)}return a.svg&&(f=u.parseFromString(a.svg,"application/xml").childNodes[0]),f.setAttribute("height","1em"),f.setAttribute("width","1em"),f},e.updateActiveButton=function(a){var s=this.graphInfo._fullLayout,c=void 0!==a?a.getAttribute("data-attr"):null;this.buttonElements.forEach(function(f){var m=f.getAttribute("data-val")||!0,h=f.getAttribute("data-attr"),w="true"===f.getAttribute("data-toggle"),p=A.select(f);if(w)h===c&&p.classed("active",!p.classed("active"));else{var o=null===h?h:i.nestedProperty(s,h).get();p.classed("active",o===m)}})},e.hasButtons=function(a){var s=this.buttons;if(!s||a.length!==s.length)return!1;for(var c=0;c<a.length;++c){if(a[c].length!==s[c].length)return!1;for(var f=0;f<a[c].length;f++)if(a[c][f].name!==s[c][f].name)return!1}return!0},e.getLogo=function(){var a=this.createGroup(),s=document.createElement("a");return s.href="https://plotly.com/",s.target="_blank",s.setAttribute("data-title",function r(a){return a+" (v"+C+")"}(i._(this.graphInfo,"Produced with Plotly.js"))),s.className="modebar-btn plotlyjsicon modebar-btn--logo",s.appendChild(this.createIcon(P.newplotlylogo)),a.appendChild(s),a},e.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},e.destroy=function(){i.removeElement(this.container.querySelector(".modebar")),i.deleteRelatedStyleRule(this._uid)},q.exports=function l(a,s){var c=a._fullLayout,f=new y({graphInfo:a,container:c._modebardiv.node(),buttons:s});return c._privateplot&&A.select(f.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),f}},37113:function(q,W,t){"use strict";var A=t(41940),g=t(22399),P=(0,t(44467).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});q.exports={visible:{valType:"boolean",editType:"plot"},buttons:P,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:A({editType:"plot"}),bgcolor:{valType:"color",dflt:g.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:g.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},89573:function(q){"use strict";q.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},28674:function(q,W,t){"use strict";var A=t(71828),g=t(7901),i=t(44467),P=t(85501),C=t(37113),u=t(89573);function y(r,l,a,s){var c=s.calendar;function f(w,p){return A.coerce(r,l,C.buttons,w,p)}if(f("visible")){var h=f("step");"all"!==h&&(!c||"gregorian"===c||"month"!==h&&"year"!==h?f("stepmode"):l.stepmode="backward",f("count")),f("label")}}q.exports=function(l,a,s,c,f){var m=l.rangeselector||{},h=i.newContainer(a,"rangeselector");function w(b,L){return A.coerce(m,h,C,b,L)}if(w("visible",P(m,h,{name:"buttons",handleItemDefaults:y,calendar:f}).length>0)){var v=function e(r,l,a){for(var s=a.filter(function(h){return l[h].anchor===r._id}),c=0,f=0;f<s.length;f++){var m=l[s[f]].domain;m&&(c=Math.max(m[1],c))}return[r.domain[0],c+u.yPad]}(a,s,c);w("x",v[0]),w("y",v[1]),A.noneOrAll(l,a,["x","y"]),w("xanchor"),w("yanchor"),A.coerceFont(w,"font",s.font);var M=w("bgcolor");w("activecolor",g.contrast(M,u.lightAmount,u.darkAmount)),w("bordercolor"),w("borderwidth")}}},21598:function(q,W,t){"use strict";var A=t(39898),g=t(73972),i=t(74875),P=t(7901),C=t(91424),u=t(71828),y=u.strTranslate,e=t(63893),r=t(41675),l=t(18783),a=l.LINE_SPACING,s=l.FROM_TL,c=l.FROM_BR,f=t(89573),m=t(70565);function w(x){return x._id}function o(x,S,T){var n=u.ensureSingle(x,"rect","selector-rect",function(E){E.attr("shape-rendering","crispEdges")});n.attr({rx:f.rx,ry:f.ry}),n.call(P.stroke,S.bordercolor).call(P.fill,function v(x,S){return S._isActive||S._isHovered?x.activecolor:x.bgcolor}(S,T)).style("stroke-width",S.borderwidth+"px")}function M(x,S,T,n){u.ensureSingle(x,"text","selector-text",function(F){F.attr("text-anchor","middle")}).call(C.font,S.font).text(function b(x,S){return x.label?S?u.templateString(x.label,S):x.label:"all"===x.step?"all":x.count+x.step.charAt(0)}(T,n._fullLayout._meta)).call(function E(F){e.convertToTspans(F,n)})}q.exports=function(S){var n=S._fullLayout._infolayer.selectAll(".rangeselector").data(function h(x){for(var S=r.list(x,"x",!0),T=[],n=0;n<S.length;n++){var E=S[n];E.rangeselector&&E.rangeselector.visible&&T.push(E)}return T}(S),w);n.enter().append("g").classed("rangeselector",!0),n.exit().remove(),n.style({cursor:"pointer","pointer-events":"all"}),n.each(function(E){var d=A.select(this),F=E,D=F.rangeselector,N=d.selectAll("g.button").data(u.filterVisible(D.buttons));N.enter().append("g").classed("button",!0),N.exit().remove(),N.each(function(k){var O=A.select(this),B=m(F,k);k._isActive=function p(x,S,T){if("all"===S.step)return!0===x.autorange;var n=Object.keys(T);return x.range[0]===T[n[0]]&&x.range[1]===T[n[1]]}(F,k,B),O.call(o,D,k),O.call(M,D,k,S),O.on("click",function(){S._dragged||g.call("_guiRelayout",S,B)}),O.on("mouseover",function(){k._isHovered=!0,O.call(o,D,k)}),O.on("mouseout",function(){k._isHovered=!1,O.call(o,D,k)})}),function L(x,S,T,n,E){var d=0,F=0,D=T.borderwidth;S.each(function(){var H=A.select(this).select(".selector-text"),nt=Math.max(T.font.size*a*e.lineCount(H),16)+3;F=Math.max(F,nt)}),S.each(function(){var U=A.select(this),H=U.select(".selector-rect"),J=U.select(".selector-text"),nt=J.node()&&C.bBox(J.node()).width,it=T.font.size*a,ut=e.lineCount(J),Q=Math.max(nt+10,f.minButtonWidth);U.attr("transform",y(D+d,D)),H.attr({x:0,y:0,width:Q,height:F}),e.positionText(J,Q/2,F/2-(ut-1)*it/2+3),d+=Q+5});var N=x._fullLayout._size,k=N.l+N.w*T.x,O=N.t+N.h*(1-T.y),B="left";u.isRightAnchor(T)&&(k-=d,B="right"),u.isCenterAnchor(T)&&(k-=d/2,B="center");var z="top";u.isBottomAnchor(T)&&(O-=F,z="bottom"),u.isMiddleAnchor(T)&&(O-=F/2,z="middle"),d=Math.ceil(d),F=Math.ceil(F),k=Math.round(k),O=Math.round(O),i.autoMargin(x,n+"-range-selector",{x:T.x,y:T.y,l:d*s[B],r:d*c[B],b:F*c[z],t:F*s[z]}),E.attr("transform",y(k,O))}(S,N,D,F._name,d)})}},70565:function(q,W,t){"use strict";var A=t(81041),g=t(71828).titleCase;q.exports=function(C,u){var y=C._name,e={};if("all"===u.step)e[y+".autorange"]=!0;else{var r=function i(P,C){var a,u=P.range,y=new Date(P.r2l(u[1])),r=A["utc"+g(C.step)],l=C.count;switch(C.stepmode){case"backward":a=P.l2r(+r.offset(y,-l));break;case"todate":var s=r.offset(y,-l);a=P.l2r(+r.ceil(s))}return[a,u[1]]}(C,u);e[y+".range[0]"]=r[0],e[y+".range[1]"]=r[1]}return e}},97218:function(q,W,t){"use strict";q.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:t(37113)}}},layoutAttributes:t(37113),handleDefaults:t(28674),draw:t(21598)}},75148:function(q,W,t){"use strict";var A=t(22399);q.exports={bgcolor:{valType:"color",dflt:A.background,editType:"plot"},bordercolor:{valType:"color",dflt:A.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},88443:function(q,W,t){"use strict";var A=t(41675).list,g=t(71739).getAutoRange,i=t(73251);q.exports=function(C){for(var u=A(C,"x",!0),y=0;y<u.length;y++){var e=u[y],r=e[i.name];r&&r.visible&&r.autorange&&(r._input.autorange=!0,r._input.range=r.range=g(C,e))}}},73251:function(q){"use strict";q.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},26377:function(q,W,t){"use strict";var A=t(71828),g=t(44467),i=t(41675),P=t(75148),C=t(47850);q.exports=function(y,e,r){var l=y[r],a=e[r];if(l.rangeslider||e._requestRangeslider[a._id]){A.isPlainObject(l.rangeslider)||(l.rangeslider={});var m,h,s=l.rangeslider,c=g.newContainer(a,"rangeslider");if(f("visible")){f("bgcolor",e.plot_bgcolor),f("bordercolor"),f("borderwidth"),f("thickness"),f("autorange",!a.isValidRange(s.range)),f("range");var o=e._subplots;if(o)for(var v=o.cartesian.filter(function(n){return n.substr(0,n.indexOf("y"))===i.name2id(r)}).map(function(n){return n.substr(n.indexOf("y"),n.length)}),M=A.simpleMap(v,i.id2name),b=0;b<M.length;b++){var L=M[b];m=s[L]||{},h=g.newContainer(c,L,"yaxis");var S,x=e[L];m.range&&x.isValidRange(m.range)&&(S="fixed"),"match"!==w("rangemode",S)&&w("range",x.range.slice())}c._input=s}}function f(n,E){return A.coerce(s,c,P,n,E)}function w(n,E){return A.coerce(m,h,C,n,E)}}},72413:function(q,W,t){"use strict";var A=t(39898),g=t(73972),i=t(74875),P=t(71828),C=P.strTranslate,u=t(91424),y=t(7901),e=t(92998),r=t(93612),l=t(41675),a=t(28569),s=t(6964),c=t(73251);function f(x,S,T,n){if(!S._context.staticPlot){var E=x.select("rect."+c.slideBoxClassName).node(),d=x.select("rect."+c.grabAreaMinClassName).node(),F=x.select("rect."+c.grabAreaMaxClassName).node();x.on("mousedown",D),x.on("touchstart",D)}function D(){var N=A.event,k=N.target,O=N.clientX||N.touches[0].clientX,B=O-x.node().getBoundingClientRect().left,z=n.d2p(T._rl[0]),U=n.d2p(T._rl[1]),H=a.coverSlip();function J(it){var j,Z,G,Q=+(it.clientX||it.touches[0].clientX)-O;switch(k){case E:if(G="ew-resize",z+Q>T._length||U+Q<0)return;j=z+Q,Z=U+Q;break;case d:if(G="col-resize",z+Q>T._length)return;j=z+Q,Z=U;break;case F:if(G="col-resize",U+Q<0)return;j=z,Z=U+Q;break;default:G="ew-resize",j=B,Z=B+Q}if(Z<j){var K=Z;Z=j,j=K}n._pixelMin=j,n._pixelMax=Z,s(A.select(H),G),function m(x,S,T,n){function E(D){return T.l2r(P.constrain(D,n._rl[0],n._rl[1]))}var d=E(n.p2d(n._pixelMin)),F=E(n.p2d(n._pixelMax));window.requestAnimationFrame(function(){g.call("_guiRelayout",S,T._name+".range",[d,F])})}(0,S,T,n)}function nt(){H.removeEventListener("mousemove",J),H.removeEventListener("mouseup",nt),this.removeEventListener("touchmove",J),this.removeEventListener("touchend",nt),P.removeElement(H)}this.addEventListener("touchmove",J),this.addEventListener("touchend",nt),H.addEventListener("mousemove",J),H.addEventListener("mouseup",nt)}}function w(x,S,T,n){var E=P.ensureSingle(x,"rect",c.bgClassName,function(N){N.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),d=n.borderwidth%2==0?n.borderwidth:n.borderwidth-1,F=-n._offsetShift,D=u.crispRound(S,n.borderwidth);E.attr({width:n._width+d,height:n._height+d,transform:C(F,F),"stroke-width":D}).call(y.stroke,n.bordercolor).call(y.fill,n.bgcolor)}function p(x,S,T,n){P.ensureSingleById(S._fullLayout._topdefs,"clipPath",n._clipId,function(F){F.append("rect").attr({x:0,y:0})}).select("rect").attr({width:n._width,height:n._height})}function o(x,S,T,n){var F,E=S.calcdata,d=x.selectAll("g."+c.rangePlotClassName).data(T._subplotsWith,P.identity);d.enter().append("g").attr("class",function(D){return c.rangePlotClassName+" "+D}).call(u.setClipUrl,n._clipId,S),d.order(),d.exit().remove(),d.each(function(D,N){var k=A.select(this),O=0===N,B=l.getFromId(S,D,"y"),z=B._name,U=n[z],H={data:[],layout:{xaxis:{type:T.type,domain:[0,1],range:n.range.slice(),calendar:T.calendar},width:n._width,height:n._height,margin:{t:0,b:0,l:0,r:0}},_context:S._context};T.rangebreaks&&(H.layout.xaxis.rangebreaks=T.rangebreaks),H.layout[z]={type:B.type,domain:[0,1],range:"match"!==U.rangemode?U.range.slice():B.range.slice(),calendar:B.calendar},B.rangebreaks&&(H.layout[z].rangebreaks=B.rangebreaks),i.supplyDefaults(H);var J=H._fullLayout.xaxis,nt=H._fullLayout[z];J.clearCalc(),J.setScale(),nt.clearCalc(),nt.setScale();var it={id:D,plotgroup:k,xaxis:J,yaxis:nt,isRangePlot:!0};O?F=it:(it.mainplot="xy",it.mainplotinfo=F),r.rangePlot(S,it,function v(x,S){for(var T=[],n=0;n<x.length;n++){var E=x[n],d=E[0].trace;d.xaxis+d.yaxis===S&&T.push(E)}return T}(E,D))})}function M(x,S,T,n,E){P.ensureSingle(x,"rect",c.maskMinClassName,function(k){k.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",n._height).call(y.fill,c.maskColor),P.ensureSingle(x,"rect",c.maskMaxClassName,function(k){k.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",n._height).call(y.fill,c.maskColor),"match"!==E.rangemode&&(P.ensureSingle(x,"rect",c.maskMinOppAxisClassName,function(k){k.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",n._width).call(y.fill,c.maskOppAxisColor),P.ensureSingle(x,"rect",c.maskMaxOppAxisClassName,function(k){k.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",n._width).style("border-top",c.maskOppBorder).call(y.fill,c.maskOppAxisColor))}function b(x,S,T,n){S._context.staticPlot||P.ensureSingle(x,"rect",c.slideBoxClassName,function(d){d.attr({y:0,cursor:c.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:n._height,fill:c.slideBoxFill})}function L(x,S,T,n){var E=P.ensureSingle(x,"g",c.grabberMinClassName),d=P.ensureSingle(x,"g",c.grabberMaxClassName),F={x:0,width:c.handleWidth,rx:c.handleRadius,fill:y.background,stroke:y.defaultLine,"stroke-width":c.handleStrokeWidth,"shape-rendering":"crispEdges"},D={y:Math.round(n._height/4),height:Math.round(n._height/2)};P.ensureSingle(E,"rect",c.handleMinClassName,function(U){U.attr(F)}).attr(D),P.ensureSingle(d,"rect",c.handleMaxClassName,function(U){U.attr(F)}).attr(D);var O={width:c.grabAreaWidth,x:0,y:0,fill:c.grabAreaFill,cursor:S._context.staticPlot?void 0:c.grabAreaCursor};P.ensureSingle(E,"rect",c.grabAreaMinClassName,function(U){U.attr(O)}).attr("height",n._height),P.ensureSingle(d,"rect",c.grabAreaMaxClassName,function(U){U.attr(O)}).attr("height",n._height)}q.exports=function(x){for(var S=x._fullLayout,T=S._rangeSliderData,n=0;n<T.length;n++){var E=T[n][c.name];E._clipId=E._id+"-"+S._uid}var F=S._infolayer.selectAll("g."+c.containerClassName).data(T,function d(D){return D._name});F.exit().each(function(D){S._topdefs.select("#"+D[c.name]._clipId).remove()}).remove(),0!==T.length&&(F.enter().append("g").classed(c.containerClassName,!0).attr("pointer-events","all"),F.each(function(D){var N=A.select(this),k=D[c.name],O=S[l.id2name(D.anchor)],B=k[l.id2name(D.anchor)];if(k.range){var H,z=P.simpleMap(k.range,D.r2l),U=P.simpleMap(D.range,D.r2l);H=U[0]<U[1]?[Math.min(z[0],U[0]),Math.max(z[1],U[1])]:[Math.max(z[0],U[0]),Math.min(z[1],U[1])],k.range=k._input.range=P.simpleMap(H,D.l2r)}D.cleanRange("rangeslider.range");var J=S._size,nt=D.domain;k._width=J.w*(nt[1]-nt[0]);var it=Math.round(J.l+J.w*nt[0]),ut=Math.round(J.t+J.h*(1-D._counterDomainMin)+("bottom"===D.side?D._depth:0)+k._offsetShift+c.extraPad);N.attr("transform",C(it,ut)),k._rl=P.simpleMap(k.range,D.r2l);var Q=k._rl[0],j=k._rl[1],Z=j-Q;if(k.p2d=function(bt){return bt/k._width*Z+Q},k.d2p=function(bt){return(bt-Q)/Z*k._width},D.rangebreaks){var G=D.locateBreaks(Q,j);if(G.length){var K,at,$=0;for(K=0;K<G.length;K++)$+=(at=G[K]).max-at.min;var X=k._width/(j-Q-$),rt=[-X*Q];for(K=0;K<G.length;K++)rt.push(rt[rt.length-1]-X*((at=G[K]).max-at.min));for(k.d2p=function(bt){for(var gt=rt[0],Lt=0;Lt<G.length;Lt++){var It=G[Lt];if(bt>=It.max)gt=rt[Lt+1];else if(bt<It.min)break}return gt+X*bt},K=0;K<G.length;K++)(at=G[K]).pmin=k.d2p(at.min),at.pmax=k.d2p(at.max);k.p2d=function(bt){for(var gt=rt[0],Lt=0;Lt<G.length;Lt++){var It=G[Lt];if(bt>=It.pmax)gt=rt[Lt+1];else if(bt<It.pmin)break}return(bt-gt)/X}}}if("match"!==B.rangemode){var et=O.r2l(B.range[0]),dt=O.r2l(B.range[1])-et;k.d2pOppAxis=function(bt){return(bt-et)/dt*k._height}}N.call(w,x,D,k).call(p,x,D,k).call(o,x,D,k).call(M,x,D,k,B).call(b,x,D,k).call(L,x,D,k),f(N,x,D,k),function h(x,S,T,n,E,d){var F=c.handleWidth/2;function D(it){return P.constrain(it,0,n._width)}function N(it){return P.constrain(it,0,n._height)}function k(it){return P.constrain(it,-F,n._width+F)}var O=D(n.d2p(T._rl[0])),B=D(n.d2p(T._rl[1]));if(x.select("rect."+c.slideBoxClassName).attr("x",O).attr("width",B-O),x.select("rect."+c.maskMinClassName).attr("width",O),x.select("rect."+c.maskMaxClassName).attr("x",B).attr("width",n._width-B),"match"!==d.rangemode){var z=n._height-N(n.d2pOppAxis(E._rl[1])),U=n._height-N(n.d2pOppAxis(E._rl[0]));x.select("rect."+c.maskMinOppAxisClassName).attr("x",O).attr("height",z).attr("width",B-O),x.select("rect."+c.maskMaxOppAxisClassName).attr("x",O).attr("y",U).attr("height",n._height-U).attr("width",B-O),x.select("rect."+c.slideBoxClassName).attr("y",z).attr("height",U-z)}var H=.5,J=Math.round(k(O-F))-H,nt=Math.round(k(B-F))+H;x.select("g."+c.grabberMinClassName).attr("transform",C(J,H)),x.select("g."+c.grabberMaxClassName).attr("transform",C(nt,H))}(N,0,D,k,O,B),"bottom"===D.side&&e.draw(x,D._id+"title",{propContainer:D,propName:D._name+".title",placeholder:S._dfltTitle.x,attributes:{x:D._offset+D._length/2,y:ut+k._height+k._offsetShift+10+1.5*D.title.font.size,"text-anchor":"middle"}})}))}},549:function(q,W,t){"use strict";var A=t(41675),g=t(63893),i=t(73251),P=t(18783).LINE_SPACING,C=i.name;function u(y){var e=y&&y[C];return e&&e.visible}W.isVisible=u,W.makeData=function(y){var e=A.list({_fullLayout:y},"x",!0),r=y.margin,l=[];if(!y._has("gl2d"))for(var a=0;a<e.length;a++){var s=e[a];if(u(s)){l.push(s);var c=s[C];c._id=C+s._id,c._height=(y.height-r.b-r.t)*c.thickness,c._offsetShift=Math.floor(c.borderwidth/2)}}y._rangeSliderData=l},W.autoMarginOpts=function(y,e){var r=y._fullLayout,l=e[C],a=e._id.charAt(0),s=0,c=0;return"bottom"===e.side&&(s=e._depth,e.title.text!==r._dfltTitle[a])&&(c=1.5*e.title.font.size+10+l._offsetShift,c+=(e.title.text.match(g.BR_TAG_ALL)||[]).length*e.title.font.size*P),{x:0,y:e._counterDomainMin,l:0,r:0,t:0,b:l._height+s+Math.max(r.margin.b,c),pad:i.extraPad+2*l._offsetShift}}},13137:function(q,W,t){"use strict";var A=t(71828),g=t(75148),i=t(47850),P=t(549);q.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:A.extendFlat({},g,{yaxis:i})}}},layoutAttributes:t(75148),handleDefaults:t(26377),calcAutorange:t(88443),draw:t(72413),isVisible:P.isVisible,makeData:P.makeData,autoMarginOpts:P.autoMarginOpts}},47850:function(q){"use strict";q.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},8389:function(q,W,t){"use strict";var A=t(50215),g=t(82196).line,i=t(79952).P,P=t(1426).extendFlat,C=t(30962).overrideAll,u=t(44467).templatedArray;t(24695),q.exports=C(u("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:P({},A.xref,{}),yref:P({},A.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:g.color,width:P({},g.width,{min:1,dflt:1}),dash:P({},i,{dflt:"dot"})}}),"arraydraw","from-root")},34122:function(q){"use strict";q.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},59402:function(q,W,t){"use strict";var A=t(71828),g=t(89298),i=t(85501),P=t(8389),C=t(30477);function u(y,e,r){function l(d,F){return A.coerce(y,e,P,d,F)}var a=l("path"),f="path"!==l("type",a?"path":"rect");f&&delete e.path,l("opacity"),l("line.color"),l("line.width"),l("line.dash");for(var m=["x","y"],h=0;h<2;h++){var o,v,M,w=m[h],p={_fullLayout:r},b=g.coerceRef(y,e,p,w);if((o=g.getFromId(p,b))._selectionIndices.push(e._index),M=C.rangeToShapePosition(o),v=C.shapePositionToRange(o),f){var L=w+"0",x=w+"1",S=y[L],T=y[x];y[L]=v(y[L],!0),y[x]=v(y[x],!0),g.coercePosition(e,p,l,b,L),g.coercePosition(e,p,l,b,x);var n=e[L],E=e[x];void 0!==n&&void 0!==E&&(e[L]=M(n),e[x]=M(E),y[L]=S,y[x]=T)}}f&&A.noneOrAll(y,e,["x0","x1","y0","y1"])}q.exports=function(e,r){i(e,r,{name:"selections",handleItemDefaults:u});for(var l=r.selections,a=0;a<l.length;a++){var s=l[a];!s||void 0===s.path&&(void 0===s.x0||void 0===s.x1||void 0===s.y0||void 0===s.y1)&&(r.selections[a]=null)}}},32485:function(q,W,t){"use strict";var A=t(60165).readPaths,g=t(42359),i=t(51873).clearOutlineControllers,P=t(7901),C=t(91424),u=t(44467).arrayEditor,y=t(30477),e=y.getPathString;function r(h){var w=h._fullLayout;for(var p in i(h),w._selectionLayer.selectAll("path").remove(),w._plots){var o=w._plots[p].selectionLayer;o&&o.selectAll("path").remove()}for(var v=0;v<w.selections.length;v++)a(h,v)}function l(h){return h._context.editSelection}function a(h,w){h._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+w+'"]').remove();var p=y.makeSelectionsOptionsAndPlotinfo(h,w),o=p.options,v=p.plotinfo;o._input&&function M(b){var L=e(h,o),x={"data-index":w,"fill-rule":"evenodd",d:L},S=o.opacity,T="rgba(0,0,0,0)",n=o.line.color||P.contrast(h._fullLayout.plot_bgcolor),E=o.line.width,d=o.line.dash;E||(E=5,d="solid");var F=l(h)&&h._fullLayout._activeSelectionIndex===w;F&&(T=h._fullLayout.activeselection.fillcolor,S=h._fullLayout.activeselection.opacity);for(var D=[],N=1;N>=0;N--){var k=b.append("path").attr(x).style("opacity",N?.1:S).call(P.stroke,n).call(P.fill,T).call(C.dashLine,N?"solid":d,N?4+E:E);if(s(k,h,o),F){var O=u(h.layout,"selections",o);k.style({cursor:"move"});var B={element:k.node(),plotinfo:v,gd:h,editHelpers:O,isActiveSelection:!0},z=A(L,h);g(z,k,B)}else k.style("pointer-events",N?"all":"none");D[N]=k}var U=D[0];D[1].node().addEventListener("click",function(){return function c(h,w){if(l(h)){var o=+w.node().getAttribute("data-index");if(o>=0){if(o===h._fullLayout._activeSelectionIndex)return void m(h);h._fullLayout._activeSelectionIndex=o,h._fullLayout._deactivateSelection=m,r(h)}}}(h,U)})}(h._fullLayout._selectionLayer)}function s(h,w,p){C.setClipUrl(h,"clip"+w._fullLayout._uid+(p.xref+p.yref),w)}function m(h){l(h)&&h._fullLayout._activeSelectionIndex>=0&&(i(h),delete h._fullLayout._activeSelectionIndex,r(h))}q.exports={draw:r,drawOne:a,activateLastSelection:function f(h){l(h)&&(h._fullLayout._activeSelectionIndex=h._fullLayout.selections.length-1,h._fullLayout._deactivateSelection=m,r(h))}}},53777:function(q,W,t){"use strict";var A=t(79952).P,g=t(1426).extendFlat;q.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:g({},A,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},90849:function(q){"use strict";q.exports=function(t,A,g){g("newselection.mode"),g("newselection.line.width")&&(g("newselection.line.color"),g("newselection.line.dash")),g("activeselection.fillcolor"),g("activeselection.opacity")}},35855:function(q,W,t){"use strict";var g=t(64505).selectMode,P=t(51873).clearOutline,C=t(60165),u=C.readPaths,y=C.writePaths,e=C.fixDatesForPaths;q.exports=function(l,a){if(l.length){var s=l[0][0];if(s){var c=s.getAttribute("d"),f=a.gd,m=f._fullLayout.newselection,h=a.plotinfo,w=h.xaxis,p=h.yaxis,o=a.isActiveSelection,v=a.dragmode,M=(f.layout||{}).selections||[];if(!g(v)&&void 0!==o){var b=f._fullLayout._activeSelectionIndex;if(b<M.length)switch(f._fullLayout.selections[b].type){case"rect":v="select";break;case"path":v="lasso"}}var S,L=u(c,f,h,o),x={xref:w._id,yref:p._id,opacity:m.opacity,line:{color:m.line.color,width:m.line.width,dash:m.line.dash}};1===L.length&&(S=L[0]),S&&5===S.length&&"select"===v?(x.type="rect",x.x0=S[0][1],x.y0=S[0][2],x.x1=S[2][1],x.y1=S[2][2]):(x.type="path",w&&p&&e(L,w,p),x.path=y(L),S=null),P(f);for(var T=a.editHelpers,n=(T||{}).modifyItem,E=[],d=0;d<M.length;d++){var F=f._fullLayout.selections[d];if(F){if(E[d]=F._input,void 0!==o&&d===f._fullLayout._activeSelectionIndex){var D=x;switch(F.type){case"rect":n("x0",D.x0),n("x1",D.x1),n("y0",D.y0),n("y1",D.y1);break;case"path":n("path",D.path)}}}else E[d]=F}return void 0===o?(E.push(x),E):T?T.getUpdateObj():{}}}}},75549:function(q,W,t){"use strict";var A=t(71828).strTranslate;function g(u,y){switch(u.type){case"log":return u.p2d(y);case"date":return u.p2r(y,0,u.calendar);default:return u.p2r(y)}}q.exports={p2r:g,r2p:function i(u,y){switch(u.type){case"log":return u.d2p(y);case"date":return u.r2p(y,0,u.calendar);default:return u.r2p(y)}},axValue:function P(u){var y="y"===u._id.charAt(0)?1:0;return function(e){return g(u,e[y])}},getTransform:function C(u){return A(u.xaxis._offset,u.yaxis._offset)}}},47322:function(q,W,t){"use strict";var A=t(32485),g=t(3937);q.exports={moduleType:"component",name:"selections",layoutAttributes:t(8389),supplyLayoutDefaults:t(59402),supplyDrawNewSelectionDefaults:t(90849),includeBasePlot:t(76325)("selections"),draw:A.draw,drawOne:A.drawOne,reselect:g.reselect,prepSelect:g.prepSelect,clearOutline:g.clearOutline,clearSelectionsCache:g.clearSelectionsCache,selectOnClick:g.selectOnClick}},3937:function(q,W,t){"use strict";var A=t(52142),g=t(38258),i=t(73972),P=t(91424).dashStyle,C=t(7901),u=t(30211),y=t(23469).makeEventData,e=t(64505),r=e.freeMode,l=e.rectMode,a=e.drawMode,s=e.openMode,c=e.selectMode,f=t(30477),m=t(21459),h=t(42359),w=t(51873).clearOutline,p=t(60165),o=p.handleEllipse,v=p.readPaths,M=t(90551).newShapes,b=t(35855),L=t(32485).activateLastSelection,x=t(71828),S=x.sorterAsc,T=t(61082),n=t(79990),E=t(41675).getFromId,d=t(33306),F=t(61549).redrawReglTraces,D=t(34122),N=D.MINSELECT,k=T.filter,O=T.tester,B=t(75549),z=B.p2r,U=B.axValue,H=B.getTransform;function J(Dt){return void 0!==Dt.subplot}function it(Dt,Ft,Nt,Rt,wt,ft,pt){var Ke,xe,Pe,Ge,ue,Ne,Ye,xr,rr,kt=Ft._hoverdata,se=Ft._fullLayout.clickmode.indexOf("event")>-1,Be=[];if(function st(Dt){return Dt&&Array.isArray(Dt)&&!0!==Dt[0].hoverOnBox}(kt)){G(Dt,Ft,ft);var ce=function dt(Dt,Ft){var ft,pt,Nt=Dt[0],Rt=-1,wt=[];for(pt=0;pt<Ft.length;pt++)if(Nt.fullData._expandedIndex===(ft=Ft[pt]).cd[0].trace._expandedIndex){if(!0===Nt.hoverOnBox)break;void 0!==Nt.pointNumber?Rt=Nt.pointNumber:void 0!==Nt.binNumber&&(Rt=Nt.binNumber,wt=Nt.pointNumbers);break}return{pointNumber:Rt,pointNumbers:wt,searchInfo:ft}}(kt,Ke=rt(Ft,Nt,Rt,wt));if(ce.pointNumbers.length>0?function gt(Dt,Ft){var Rt,wt,pt,Nt=[];for(pt=0;pt<Dt.length;pt++)(Rt=Dt[pt]).cd[0].trace.selectedpoints&&Rt.cd[0].trace.selectedpoints.length>0&&Nt.push(Rt);if(1===Nt.length&&Nt[0]===Ft.searchInfo&&(wt=Ft.searchInfo.cd[0].trace).selectedpoints.length===Ft.pointNumbers.length){for(pt=0;pt<Ft.pointNumbers.length;pt++)if(wt.selectedpoints.indexOf(Ft.pointNumbers[pt])<0)return!1;return!0}return!1}(Ke,ce):function Lt(Dt){var Rt,wt,Ft=0;for(wt=0;wt<Dt.length;wt++)if((Rt=Dt[wt].cd[0].trace).selectedpoints&&(Rt.selectedpoints.length>1||(Ft+=Rt.selectedpoints.length)>1))return!1;return 1===Ft}(Ke)&&(Ne=bt(ce))){for(pt&&pt.remove(),rr=0;rr<Ke.length;rr++)(xe=Ke[rr])._module.selectPoints(xe,!1);It(Ft,Ke),$(ft),se&&St(Ft)}else{for(Ye=Dt.shiftKey&&(void 0!==Ne?Ne:bt(ce)),Pe=function ut(Dt,Ft,Nt){return{pointNumber:Dt,searchInfo:Ft,subtract:!!Nt}}(ce.pointNumber,ce.searchInfo,Ye),Ge=Z(ft.selectionDefs.concat([Pe])),rr=0;rr<Ke.length;rr++)if(ue=At(Ke[rr]._module.selectPoints(Ke[rr],Ge),Ke[rr]),Be.length)for(var be=0;be<ue.length;be++)Be.push(ue[be]);else Be=ue;if(It(Ft,Ke,xr={points:Be}),Pe&&ft&&ft.selectionDefs.push(Pe),pt){var Ae=ft.mergedPolygons,Te=s(ft.dragmode);h(Gt(Ae,Te),pt,ft)}se&&Et(Ft,xr)}}}function Q(Dt){return"pointNumber"in Dt&&"searchInfo"in Dt}function j(Dt){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Ft,Nt,Rt,wt){return wt.cd[0].trace._expandedIndex===Dt.searchInfo.cd[0].trace._expandedIndex&&Rt===Dt.pointNumber},isRect:!1,degenerate:!1,subtract:!!Dt.subtract}}function Z(Dt){if(Dt.length){for(var Ft=[],Nt=Q(Dt[0])?0:Dt[0][0][0],Rt=Nt,wt=Q(Dt[0])?0:Dt[0][0][1],ft=wt,pt=0;pt<Dt.length;pt++)if(Q(Dt[pt]))Ft.push(j(Dt[pt]));else{var kt=O(Dt[pt]);kt.subtract=!!Dt[pt].subtract,Ft.push(kt),Nt=Math.min(Nt,kt.xmin),Rt=Math.max(Rt,kt.xmax),wt=Math.min(wt,kt.ymin),ft=Math.max(ft,kt.ymax)}return{xmin:Nt,xmax:Rt,ymin:wt,ymax:ft,pts:[],contains:function Zt(ee,se,Be,Ke){for(var xe=!1,Pe=0;Pe<Ft.length;Pe++)Ft[Pe].contains(ee,se,Be,Ke)&&(xe=!Ft[Pe].subtract);return xe},isRect:!1,degenerate:!1}}}function G(Dt,Ft,Nt){var Rt=Ft._fullLayout,wt=Nt.plotinfo,ft=Nt.dragmode,pt=Rt._lastSelectedSubplot&&Rt._lastSelectedSubplot===wt.id,kt=(Dt.shiftKey||Dt.altKey)&&!(a(ft)&&s(ft));pt&&kt&&wt.selection&&wt.selection.selectionDefs&&!Nt.selectionDefs?(Nt.selectionDefs=wt.selection.selectionDefs,Nt.mergedPolygons=wt.selection.mergedPolygons):(!kt||!wt.selection)&&$(Nt),pt||(w(Ft),Rt._lastSelectedSubplot=wt.id)}function $(Dt,Ft){var Nt=Dt.dragmode,Rt=Dt.plotinfo,wt=Dt.gd;(function K(Dt){return Dt._fullLayout._activeShapeIndex>=0})(wt)&&wt._fullLayout._deactivateShape(wt),function at(Dt){return Dt._fullLayout._activeSelectionIndex>=0}(wt)&&wt._fullLayout._deactivateSelection(wt);var pt=wt._fullLayout._zoomlayer,kt=a(Nt),Zt=c(Nt);if(kt||Zt){var se,Be,ee=pt.selectAll(".select-outline-"+Rt.id);ee&&wt._fullLayout._outlining&&(kt&&(se=M(ee,Dt)),se&&i.call("_guiRelayout",wt,{shapes:se}),Zt&&!J(Dt)&&(Be=b(ee,Dt)),Be&&(wt._fullLayout._noEmitSelectedAtStart=!0,i.call("_guiRelayout",wt,{selections:Be}).then(function(){Ft&&L(wt)})),wt._fullLayout._outlining=!1)}Rt.selection={},Rt.selection.selectionDefs=Dt.selectionDefs=[],Rt.selection.mergedPolygons=Dt.mergedPolygons=[]}function X(Dt){return Dt._id}function rt(Dt,Ft,Nt,Rt){if(!Dt.calcdata)return[];var kt,Zt,ee,wt=[],ft=Ft.map(X),pt=Nt.map(X);for(ee=0;ee<Dt.calcdata.length;ee++)if(!0===(Zt=(kt=Dt.calcdata[ee])[0].trace).visible&&Zt._module&&Zt._module.selectPoints)if(!J({subplot:Rt})||Zt.subplot!==Rt&&Zt.geo!==Rt)if("splom"===Zt.type){if(Zt._xaxes[ft[0]]&&Zt._yaxes[pt[0]]){var se=et(Zt._module,kt,Ft[0],Nt[0]);se.scene=Dt._fullLayout._splomScenes[Zt.uid],wt.push(se)}}else if("sankey"===Zt.type){var Be=et(Zt._module,kt,Ft[0],Nt[0]);wt.push(Be)}else{if(-1===ft.indexOf(Zt.xaxis)||-1===pt.indexOf(Zt.yaxis))continue;wt.push(et(Zt._module,kt,E(Dt,Zt.xaxis),E(Dt,Zt.yaxis)))}else wt.push(et(Zt._module,kt,Ft[0],Nt[0]));return wt}function et(Dt,Ft,Nt,Rt){return{_module:Dt,cd:Ft,xaxis:Nt,yaxis:Rt}}function bt(Dt){var Ft=Dt.searchInfo.cd[0].trace,Rt=Dt.pointNumbers;return!!Ft.selectedpoints&&Ft.selectedpoints.indexOf(Rt.length>0?Rt[0]:Dt.pointNumber)>-1}function It(Dt,Ft,Nt){var Rt,pt;for(Rt=0;Rt<Ft.length;Rt++){var wt=Ft[Rt].cd[0].trace._fullInput,ft=Dt._fullLayout._tracePreGUI[wt.uid]||{};void 0===ft.selectedpoints&&(ft.selectedpoints=wt._input.selectedpoints||null)}if(Nt){var kt=Nt.points||[];for(Rt=0;Rt<Ft.length;Rt++)(pt=Ft[Rt].cd[0].trace)._input.selectedpoints=pt._fullInput.selectedpoints=[],pt._fullInput!==pt&&(pt.selectedpoints=[]);for(var Zt=0;Zt<kt.length;Zt++){var ee=kt[Zt],se=ee.data,Be=ee.fullData,Ke=ee.pointIndex,xe=ee.pointIndices;xe?([].push.apply(se.selectedpoints,xe),pt._fullInput!==pt&&[].push.apply(Be.selectedpoints,xe)):(se.selectedpoints.push(Ke),pt._fullInput!==pt&&Be.selectedpoints.push(Ke))}}else for(Rt=0;Rt<Ft.length;Rt++)delete(pt=Ft[Rt].cd[0].trace).selectedpoints,delete pt._input.selectedpoints,pt._fullInput!==pt&&delete pt._fullInput.selectedpoints;!function Mt(Dt,Ft){for(var Nt=!1,Rt=0;Rt<Ft.length;Rt++){var wt=Ft[Rt],ft=wt.cd;i.traceIs(ft[0].trace,"regl")&&(Nt=!0);var pt=wt._module,kt=pt.styleOnSelect||pt.style;kt&&(kt(Dt,ft,ft[0].node3),ft[0].nodeRangePlot3&&kt(Dt,ft,ft[0].nodeRangePlot3))}Nt&&(d(Dt),F(Dt))}(Dt,Ft)}function xt(Dt,Ft,Nt){for(var ft=(Nt?A.difference:A.union)({regions:Dt},{regions:[Ft]}).regions.reverse(),pt=0;pt<ft.length;pt++){var kt=ft[pt];kt.subtract=qt(kt,ft.slice(0,pt))}return ft}function At(Dt,Ft){if(Array.isArray(Dt))for(var Nt=Ft.cd,Rt=Ft.cd[0].trace,wt=0;wt<Dt.length;wt++)Dt[wt]=y(Dt[wt],Rt,Nt);return Dt}function Gt(Dt,Ft){for(var Nt=[],Rt=0;Rt<Dt.length;Rt++){Nt[Rt]=[];for(var wt=0;wt<Dt[Rt].length;wt++){Nt[Rt][wt]=[],Nt[Rt][wt][0]=wt?"L":"M";for(var ft=0;ft<Dt[Rt][wt].length;ft++)Nt[Rt][wt].push(Dt[Rt][wt][ft])}Ft||Nt[Rt].push(["Z",Nt[Rt][0][1],Nt[Rt][0][2]])}return Nt}function Wt(Dt,Ft){for(var Rt,ft,Nt=[],wt=[],pt=0;pt<Ft.length;pt++){var kt=Ft[pt];ft=kt._module.selectPoints(kt,Dt),wt.push(ft),Rt=At(ft,kt),Nt=Nt.concat(Rt)}return Nt}function Pt(Dt,Ft,Nt,Rt,wt){var pt,kt,Zt,ft=!!Rt;wt&&(pt=wt.plotinfo,kt=wt.xaxes[0]._id,Zt=wt.yaxes[0]._id);var ee=[],se=[],Be=Ot(Dt),Ke=Dt._fullLayout;if(pt){var xe=Ke._zoomlayer,Pe=Ke.dragmode,Ge=a(Pe),gr=c(Pe);if(Ge||gr){var ue=E(Dt,kt,"x"),Ne=E(Dt,Zt,"y");if(ue&&Ne){var Ye=xe.selectAll(".select-outline-"+pt.id);if(Ye&&Dt._fullLayout._outlining&&Ye.length){for(var rr=Ye[0][0].getAttribute("d"),ce=v(rr,Dt,pt),re=[],ve=0;ve<ce.length;ve++){for(var be=ce[ve],Ae=[],Te=0;Te<be.length;Te++)Ae.push([ie(ue,be[Te][1]),ie(Ne,be[Te][2])]);Ae.xref=kt,Ae.yref=Zt,Ae.subtract=qt(Ae,re),re.push(Ae)}Be=Be.concat(re)}}}}var Re=kt&&Zt?[kt+Zt]:Ke._subplots.cartesian;!function Vt(Dt){var Ft=Dt.calcdata;if(Ft)for(var Nt=0;Nt<Ft.length;Nt++){var ft=Dt._fullLayout._splomScenes;if(ft){var pt=ft[Ft[Nt][0].trace.uid];pt&&(pt.selectBatch=[])}}}(Dt);for(var Ie={},Xe=0;Xe<Re.length;Xe++){var ar=Re[Xe],nr=ar.indexOf("y"),cr=ar.slice(0,nr),Ut=ar.slice(nr),Ht=kt&&Zt?Nt:void 0;if(Ht=Bt(Be,cr,Ut,Ht)){var Se=Rt;if(!ft){var Ce=E(Dt,cr,"x"),We=E(Dt,Ut,"y");Se=rt(Dt,[Ce],[We],ar);for(var qe=0;qe<Se.length;qe++){var or=Se[qe],_e=or.cd[0],De=_e.trace;if("scattergl"===or._module.name&&!_e.t.xpx){var sr=De.x,yr=De.y,dr=De._length;_e.t.xpx=[],_e.t.ypx=[];for(var Pr=0;Pr<dr;Pr++)_e.t.xpx[Pr]=Ce.c2p(sr[Pr]),_e.t.ypx[Pr]=We.c2p(yr[Pr])}"splom"===or._module.name&&(Ie[De.uid]||(Ie[De.uid]=!0))}}var Jr=Wt(Ht,Se);ee=ee.concat(Jr),se=se.concat(Se)}}var Mr={points:ee};It(Dt,se,Mr);var nn=Ke.clickmode.indexOf("event")>-1&&Ft;if(!pt&&Ft){var Nr=Ot(Dt,!0);if(Nr.length){var Dn=Nr[0].xref,hn=Nr[0].yref;if(Dn&&hn){var hr=oe(Nr);de([E(Dt,Dn,"x"),E(Dt,hn,"y")])(Mr,hr)}}Dt._fullLayout._noEmitSelectedAtStart?Dt._fullLayout._noEmitSelectedAtStart=!1:nn&&Et(Dt,Mr),Ke._reselect=!1}if(!pt&&Ke._deselect){var Br=Ke._deselect;(function te(Dt,Ft,Nt){for(var Rt=0;Rt<Nt.length;Rt++){var wt=Nt[Rt];if(wt.xaxis&&wt.xaxis._id===Dt&&wt.yaxis&&wt.yaxis._id===Ft)return!0}return!1})(kt=Br.xref,Zt=Br.yref,se)||Qt(Dt,kt,Zt,Rt),nn&&(Mr.points.length?Et(Dt,Mr):St(Dt)),Ke._deselect=!1}return{eventData:Mr,selectionTesters:Nt}}function Qt(Dt,Ft,Nt,Rt){Rt=rt(Dt,[E(Dt,Ft,"x")],[E(Dt,Nt,"y")],Ft+Nt);for(var wt=0;wt<Rt.length;wt++){var ft=Rt[wt];ft._module.selectPoints(ft,!1)}It(Dt,Rt)}function Bt(Dt,Ft,Nt,Rt){for(var wt,ft=0;ft<Dt.length;ft++){var pt=Dt[ft];Ft===pt.xref&&Nt===pt.yref&&(wt?Rt=Z(wt=xt(wt,pt,!!pt.subtract)):(wt=[pt],Rt=O(pt)))}return Rt}function Ot(Dt,Ft){for(var Nt=[],Rt=Dt._fullLayout,wt=Rt.selections,ft=wt.length,pt=0;pt<ft;pt++)if(!Ft||pt===Rt._activeSelectionIndex){var kt=wt[pt];if(kt){var Ke,xe,Pe,Ge,gr,Zt=kt.xref,ee=kt.yref,se=E(Dt,Zt,"x"),Be=E(Dt,ee,"y");if("rect"===kt.type){gr=[];var ue=ie(se,kt.x0),Ne=ie(se,kt.x1),Ye=ie(Be,kt.y0),xr=ie(Be,kt.y1);gr=[[ue,Ye],[ue,xr],[Ne,xr],[Ne,Ye]],Ke=Math.min(ue,Ne),xe=Math.max(ue,Ne),Pe=Math.min(Ye,xr),Ge=Math.max(Ye,xr),gr.xmin=Ke,gr.xmax=xe,gr.ymin=Pe,gr.ymax=Ge,gr.xref=Zt,gr.yref=ee,gr.subtract=!1,gr.isRect=!0,Nt.push(gr)}else if("path"===kt.type)for(var rr=kt.path.split("Z"),ce=[],re=0;re<rr.length;re++){var ve=rr[re];if(ve){var be=f.extractPathCoords(ve+="Z",m.paramIsX,"raw"),Ae=f.extractPathCoords(ve,m.paramIsY,"raw");Ke=1/0,xe=-1/0,Pe=1/0,Ge=-1/0,gr=[];for(var Te=0;Te<be.length;Te++){var Re=ie(se,be[Te]),Ie=ie(Be,Ae[Te]);gr.push([Re,Ie]),Ke=Math.min(Re,Ke),xe=Math.max(Re,xe),Pe=Math.min(Ie,Pe),Ge=Math.max(Ie,Ge)}gr.xmin=Ke,gr.xmax=xe,gr.ymin=Pe,gr.ymax=Ge,gr.xref=Zt,gr.yref=ee,gr.subtract=qt(gr,ce),ce.push(gr),Nt.push(gr)}}}}return Nt}function qt(Dt,Ft){for(var Nt=!1,Rt=0;Rt<Ft.length;Rt++)for(var wt=Ft[Rt],ft=0;ft<Dt.length;ft++)if(g(Dt[ft],wt)){Nt=!Nt;break}return Nt}function ie(Dt,Ft){return"date"===Dt.type&&(Ft=Ft.replace("_"," ")),"log"===Dt.type?Dt.c2p(Ft):Dt.r2p(Ft,null,Dt.calendar)}function oe(Dt){for(var Ft=Dt.length,Nt=[],Rt=0;Rt<Ft;Rt++){var wt=Dt[Rt];Nt=(Nt=Nt.concat(wt)).concat([wt[0]])}return function pe(Dt){return Dt.isRect=5===Dt.length&&Dt[0][0]===Dt[4][0]&&Dt[0][1]===Dt[4][1]&&Dt[0][0]===Dt[1][0]&&Dt[2][0]===Dt[3][0]&&Dt[0][1]===Dt[3][1]&&Dt[1][1]===Dt[2][1]||Dt[0][1]===Dt[1][1]&&Dt[2][1]===Dt[3][1]&&Dt[0][0]===Dt[3][0]&&Dt[1][0]===Dt[2][0],Dt.isRect&&(Dt.xmin=Math.min(Dt[0][0],Dt[2][0]),Dt.xmax=Math.max(Dt[0][0],Dt[2][0]),Dt.ymin=Math.min(Dt[0][1],Dt[2][1]),Dt.ymax=Math.max(Dt[0][1],Dt[2][1])),Dt}(Nt)}function de(Dt){return function(Ft,Nt){for(var Rt,wt,ft=0;ft<Dt.length;ft++){var pt=Dt[ft],kt=pt._id,Zt=kt.charAt(0);if(Nt.isRect){Rt||(Rt={});var ee=Nt[Zt+"min"],se=Nt[Zt+"max"];void 0!==ee&&void 0!==se&&(Rt[kt]=[z(pt,ee),z(pt,se)].sort(S))}else wt||(wt={}),wt[kt]=Nt.map(U(pt))}Rt&&(Ft.range=Rt),wt&&(Ft.lassoPoints=wt)}}function Et(Dt,Ft){Ft&&(Ft.selections=(Dt.layout||{}).selections||[]),Dt.emit("plotly_selected",Ft)}function St(Dt){Dt.emit("plotly_deselect",null)}q.exports={reselect:Pt,prepSelect:function nt(Dt,Ft,Nt,Rt,wt){var ft=!J(Rt),pt=r(wt),kt=l(wt),Zt=s(wt),ee=a(wt),se=c(wt),Ke="drawcircle"===wt,xe="drawline"===wt||Ke,Pe=Rt.gd,Ge=Pe._fullLayout,gr=se&&"immediate"===Ge.newselection.mode&&ft,ue=Ge._zoomlayer,Ne=Rt.element.getBoundingClientRect(),Ye=Rt.plotinfo,xr=H(Ye),rr=Ft-Ne.left,ce=Nt-Ne.top;Ge._calcInverseTransform(Pe);var Ut,Ht,Se,Ce,We,qe,or,re=x.apply3DTransform(Ge._invTransform)(rr,ce),ve=Ge._invScaleX,be=Ge._invScaleY,Ae=rr=re[0],Te=ce=re[1],Re="M"+rr+","+ce,Ie=Rt.xaxes[0],Xe=Rt.yaxes[0],ar=Ie._length,nr=Xe._length,cr=Dt.altKey&&!(a(wt)&&Zt);G(Dt,Pe,Rt),pt&&(Ut=k([[rr,ce]],D.BENDPX));var _e=ue.selectAll("path.select-outline-"+Ye.id).data([1]),De=ee?Ge.newshape:Ge.newselection;ee&&(Rt.hasText=De.label.text||De.label.texttemplate);var sr=ee&&!Zt?De.fillcolor:"rgba(0,0,0,0)",yr=De.line.color||(ft?C.contrast(Pe._fullLayout.plot_bgcolor):"#7f7f7f");_e.enter().append("path").attr("class","select-outline select-outline-"+Ye.id).style({opacity:ee?De.opacity/2:1,"stroke-dasharray":P(De.line.dash,De.line.width),"stroke-width":De.line.width+"px","shape-rendering":"crispEdges"}).call(C.stroke,yr).call(C.fill,sr).attr("fill-rule","evenodd").classed("cursor-move",!!ee).attr("transform",xr).attr("d",Re+"Z");var dr=ue.append("path").attr("class","zoombox-corners").style({fill:C.background,stroke:C.defaultLine,"stroke-width":1}).attr("transform",xr).attr("d","M0,0Z");if(ee&&Rt.hasText){var Pr=ue.select(".label-temp");Pr.empty()&&(Pr=ue.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var Jr=Ge._uid+D.SELECTID,Mr=[],Wr=rt(Pe,Rt.xaxes,Rt.yaxes,Rt.subplot);gr&&!Dt.shiftKey&&(Rt._clearSubplotSelections=function(){if(ft){var Nr=Ie._id,Dn=Xe._id;Qt(Pe,Nr,Dn,Wr);for(var hn=(Pe.layout||{}).selections||[],hr=[],Ar=!1,Br=0;Br<hn.length;Br++){var Or=Ge.selections[Br];Or.xref!==Nr||Or.yref!==Dn?hr.push(hn[Br]):Ar=!0}Ar&&(Pe._fullLayout._noEmitSelectedAtStart=!0,i.call("_guiRelayout",Pe,{selections:hr}))}});var nn=function Fe(Dt){return Dt.plotinfo.fillRangeItems||de(Dt.xaxes.concat(Dt.yaxes))}(Rt);Rt.moveFn=function(Nr,Dn){Rt._clearSubplotSelections&&(Rt._clearSubplotSelections(),Rt._clearSubplotSelections=void 0),Ae=Math.max(0,Math.min(ar,ve*Nr+rr)),Te=Math.max(0,Math.min(nr,be*Dn+ce));var hn=Math.abs(Ae-rr),hr=Math.abs(Te-ce);if(kt){var Ar,Br,Or;if(se){var an=Ge.selectdirection;switch(Ar="any"===an?hr<Math.min(.6*hn,N)?"h":hn<Math.min(.6*hr,N)?"v":"d":an){case"h":Br=Ke?nr/2:0,Or=nr;break;case"v":Br=Ke?ar/2:0,Or=ar}}if(ee)switch(Ge.newshape.drawdirection){case"vertical":Ar="h",Br=Ke?nr/2:0,Or=nr;break;case"horizontal":Ar="v",Br=Ke?ar/2:0,Or=ar;break;case"ortho":hn<hr?(Ar="h",Br=ce,Or=Te):(Ar="v",Br=rr,Or=Ae);break;default:Ar="d"}"h"===Ar?((Ce=xe?o(Ke,[Ae,Br],[Ae,Or]):[[rr,Br],[rr,Or],[Ae,Or],[Ae,Br]]).xmin=xe?Ae:Math.min(rr,Ae),Ce.xmax=xe?Ae:Math.max(rr,Ae),Ce.ymin=Math.min(Br,Or),Ce.ymax=Math.max(Br,Or),dr.attr("d","M"+Ce.xmin+","+(ce-N)+"h-4v"+2*N+"h4ZM"+(Ce.xmax-1)+","+(ce-N)+"h4v"+2*N+"h-4Z")):"v"===Ar?((Ce=xe?o(Ke,[Br,Te],[Or,Te]):[[Br,ce],[Br,Te],[Or,Te],[Or,ce]]).xmin=Math.min(Br,Or),Ce.xmax=Math.max(Br,Or),Ce.ymin=xe?Te:Math.min(ce,Te),Ce.ymax=xe?Te:Math.max(ce,Te),dr.attr("d","M"+(rr-N)+","+Ce.ymin+"v-4h"+2*N+"v4ZM"+(rr-N)+","+(Ce.ymax-1)+"v4h"+2*N+"v-4Z")):"d"===Ar&&((Ce=xe?o(Ke,[rr,ce],[Ae,Te]):[[rr,ce],[rr,Te],[Ae,Te],[Ae,ce]]).xmin=Math.min(rr,Ae),Ce.xmax=Math.max(rr,Ae),Ce.ymin=Math.min(ce,Te),Ce.ymax=Math.max(ce,Te),dr.attr("d","M0,0Z"))}else pt&&(Ut.addPt([Ae,Te]),Ce=Ut.filtered);if(Rt.selectionDefs&&Rt.selectionDefs.length?(Se=xt(Rt.mergedPolygons,Ce,cr),Ce.subtract=cr,Ht=Z(Rt.selectionDefs.concat([Ce]))):(Se=[Ce],Ht=O(Ce)),h(Gt(Se,Zt),_e,Rt),se){var wn,dn=Pt(Pe,!1),pn=dn.eventData?dn.eventData.points.slice():[];dn=Pt(Pe,!1,Ht,Wr,Rt),Ht=dn.selectionTesters,or=dn.eventData,wn=Ut?Ut.filtered:oe(Se),n.throttle(Jr,D.SELECTDELAY,function(){for(var Ln=(Mr=Wt(Ht,Wr)).slice(),Qn=0;Qn<pn.length;Qn++){for(var Nn=pn[Qn],Zn=!1,Bn=0;Bn<Ln.length;Bn++)if(Ln[Bn].curveNumber===Nn.curveNumber&&Ln[Bn].pointNumber===Nn.pointNumber){Zn=!0;break}Zn||Ln.push(Nn)}Ln.length&&(or||(or={}),or.points=Ln),nn(or,wn),function Kt(Dt,Ft){Dt.emit("plotly_selecting",Ft)}(Pe,or)})}},Rt.clickFn=function(Nr,Dn){if(dr.remove(),Pe._fullLayout._activeShapeIndex>=0)Pe._fullLayout._deactivateShape(Pe);else if(!ee){var hn=Ge.clickmode;n.done(Jr).then(function(){if(n.clear(Jr),2===Nr){for(_e.remove(),We=0;We<Wr.length;We++)(qe=Wr[We])._module.selectPoints(qe,!1);if(It(Pe,Wr),$(Rt),St(Pe),Wr.length){var hr=Wr[0].xaxis,Ar=Wr[0].yaxis;if(hr&&Ar){for(var Br=[],Or=Pe._fullLayout.selections,an=0;an<Or.length;an++){var dn=Or[an];!dn||(dn.xref!==hr._id||dn.yref!==Ar._id)&&Br.push(dn)}Br.length<Or.length&&(Pe._fullLayout._noEmitSelectedAtStart=!0,i.call("_guiRelayout",Pe,{selections:Br}))}}}else hn.indexOf("select")>-1&&it(Dn,Pe,Rt.xaxes,Rt.yaxes,Rt.subplot,Rt,_e),"event"===hn&&Et(Pe,void 0);u.click(Pe,Dn,Ye.id)}).catch(x.error)}},Rt.doneFn=function(){dr.remove(),n.done(Jr).then(function(){n.clear(Jr),!gr&&Ce&&Rt.selectionDefs&&(Ce.subtract=cr,Rt.selectionDefs.push(Ce),Rt.mergedPolygons.length=0,[].push.apply(Rt.mergedPolygons,Se)),(gr||ee)&&$(Rt,gr),Rt.doneFnCompleted&&Rt.doneFnCompleted(Mr),se&&Et(Pe,or)}).catch(x.error)}},clearOutline:w,clearSelectionsCache:$,selectOnClick:it}},89827:function(q,W,t){"use strict";var A=t(50215),g=t(41940),i=t(82196).line,P=t(79952).P,C=t(1426).extendFlat,u=t(44467).templatedArray,e=(t(24695),t(9012)),r=t(5386).R,l=t(37281);q.exports=u("shape",{visible:C({},e.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:C({},e.legend,{editType:"calc+arraydraw"}),legendgroup:C({},e.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:C({},e.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:g({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:C({},e.legendrank,{editType:"calc+arraydraw"}),legendwidth:C({},e.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:C({},A.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:C({},A.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:C({},i.color,{editType:"arraydraw"}),width:C({},i.width,{editType:"calc+arraydraw"}),dash:C({},P,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:r({},{keys:Object.keys(l)}),font:g({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},5627:function(q,W,t){"use strict";var A=t(71828),g=t(89298),i=t(21459),P=t(30477);function u(r){return y(r.line.width,r.ysizemode,r.y0,r.y1,r.path,!0)}function y(r,l,a,s,c,f){var m=r/2,h=f;if("pixel"===l){var w=c?P.extractPathCoords(c,f?i.paramIsY:i.paramIsX):[a,s],p=A.aggNums(Math.max,null,w),o=A.aggNums(Math.min,null,w),v=o<0?Math.abs(o)+m:m,M=p>0?p+m:m;return{ppad:m,ppadplus:h?v:M,ppadminus:h?M:v}}return{ppad:m}}function e(r,l,a,s,c){var f="category"===r.type||"multicategory"===r.type?r.r2c:r.d2c;if(void 0!==l)return[f(l),f(a)];if(s){var p,v,M,b,m=1/0,h=-1/0,w=s.match(i.segmentRE);for("date"===r.type&&(f=P.decodeDate(f)),p=0;p<w.length;p++)void 0!==(v=c[w[p].charAt(0)].drawn)&&(M=w[p].substr(1).match(i.paramRE))&&!(M.length<v)&&((b=f(M[v]))<m&&(m=b),b>h&&(h=b));if(h>=m)return[m,h]}}q.exports=function(l){var r,s=A.filterVisible(l._fullLayout.shapes);if(s.length&&l._fullData.length)for(var c=0;c<s.length;c++){var f=s[c];f._extremes={};var m,h,w=g.getRefType(f.xref),p=g.getRefType(f.yref);if("paper"!==f.xref&&"domain"!==w){var o="pixel"===f.xsizemode?f.xanchor:f.x0,v="pixel"===f.xsizemode?f.xanchor:f.x1;(h=e(m=g.getFromId(l,f.xref),o,v,f.path,i.paramIsX))&&(f._extremes[m._id]=g.findExtremes(m,h,y((r=f).line.width,r.xsizemode,r.x0,r.x1,r.path,!1)))}if("paper"!==f.yref&&"domain"!==p){var M="pixel"===f.ysizemode?f.yanchor:f.y0,b="pixel"===f.ysizemode?f.yanchor:f.y1;(h=e(m=g.getFromId(l,f.yref),M,b,f.path,i.paramIsY))&&(f._extremes[m._id]=g.findExtremes(m,h,u(f)))}}}},21459:function(q){"use strict";q.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},84726:function(q,W,t){"use strict";var A=t(71828),g=t(89298),i=t(85501),P=t(89827),C=t(30477);function y(e,r,l){function a(Q,j){return A.coerce(e,r,P,Q,j)}if(r._isShape=!0,a("visible")){a("showlegend")&&(a("legend"),a("legendwidth"),a("legendgroup"),a("legendgrouptitle.text"),A.coerceFont(a,"legendgrouptitle.font"),a("legendrank"));var f=a("path"),h=a("type",f?"path":"rect"),w="path"!==h;w&&delete r.path,a("editable"),a("layer"),a("opacity"),a("fillcolor"),a("fillrule"),a("line.width")&&(a("line.color"),a("line.dash"));for(var o=a("xsizemode"),v=a("ysizemode"),M=["x","y"],b=0;b<2;b++){var n,E,d,L=M[b],x=L+"anchor",S="x"===L?o:v,T={_fullLayout:l},F=g.coerceRef(e,r,T,L,void 0,"paper");if("range"===g.getRefType(F)?((n=g.getFromId(T,F))._shapeIndices.push(r._index),d=C.rangeToShapePosition(n),E=C.shapePositionToRange(n)):E=d=A.identity,w){var O=L+"0",B=L+"1",z=e[O],U=e[B];e[O]=E(e[O],!0),e[B]=E(e[B],!0),"pixel"===S?(a(O,0),a(B,10)):(g.coercePosition(r,T,a,F,O,.25),g.coercePosition(r,T,a,F,B,.75)),r[O]=d(r[O]),r[B]=d(r[B]),e[O]=z,e[B]=U}if("pixel"===S){var H=e[x];e[x]=E(e[x],!0),g.coercePosition(r,T,a,F,x,.25),r[x]=d(r[x]),e[x]=H}}w&&A.noneOrAll(e,r,["x0","x1","y0","y1"]);var nt,it,J="line"===h;if(w&&(nt=a("label.texttemplate")),nt||(it=a("label.text")),it||nt){a("label.textangle");var ut=a("label.textposition",J?"middle":"middle center");a("label.xanchor"),a("label.yanchor",function u(e,r){return e?"bottom":-1!==r.indexOf("top")?"top":-1!==r.indexOf("bottom")?"bottom":"middle"}(J,ut)),a("label.padding"),A.coerceFont(a,"label.font",l.font)}}}q.exports=function(r,l){i(r,l,{name:"shapes",handleItemDefaults:y})}},48100:function(q,W,t){"use strict";var A=t(71828),g=t(89298),i=t(63893),P=t(91424),C=t(60165).readPaths,u=t(30477),y=u.getPathString,e=t(37281),r=t(18783).FROM_TL;q.exports=function(c,f,m,h){if(h.selectAll(".shape-label").remove(),m.label.text||m.label.texttemplate){var w;if(m.label.texttemplate){var p={};if("path"!==m.type){var o=g.getFromId(c,m.xref),v=g.getFromId(c,m.yref);for(var M in e){var b=e[M](m,o,v);void 0!==b&&(p[M]=b)}}w=A.texttemplateStringForShapes(m.label.texttemplate,{},c._fullLayout._d3locale,p)}else w=m.label.text;var E,d,F,D,L={"data-index":f},x=m.label.font,n=h.append("g").attr(L).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(w);if(m.path){var N=y(c,m),k=C(N,c);E=1/0,F=1/0,d=-1/0,D=-1/0;for(var O=0;O<k.length;O++)for(var B=0;B<k[O].length;B++)for(var z=k[O][B],U=1;U<z.length;U+=2){var H=z[U],J=z[U+1];E=Math.min(E,H),d=Math.max(d,H),F=Math.min(F,J),D=Math.max(D,J)}}else{var nt=g.getFromId(c,m.xref),it=g.getRefType(m.xref),ut=g.getFromId(c,m.yref),Q=g.getRefType(m.yref),j=u.getDataToPixel(c,nt,!1,it),Z=u.getDataToPixel(c,ut,!0,Q);E=j(m.x0),d=j(m.x1),F=Z(m.y0),D=Z(m.y1)}var G=m.label.textangle;"auto"===G&&(G="line"===m.type?function l(s,c,f,m){var w;return w=Math.abs(f-s),-180/Math.PI*Math.atan2(f>=s?c-m:m-c,w)}(E,F,d,D):0),n.call(function(et){return et.call(P.font,x).attr({}),i.convertToTspans(et,c),et});var at=function a(s,c,f,m,h,w,p){var E,d,F,D,o=h.label.textposition,v=h.label.textangle,M=h.label.padding,b=h.type,L=Math.PI/180*w,x=Math.sin(L),S=Math.cos(L),T=h.label.xanchor,n=h.label.yanchor;if("line"===b){"start"===o?(E=s,d=c):"end"===o?(E=f,d=m):(E=(s+f)/2,d=(c+m)/2),"auto"===T&&(T="start"===o?"auto"===v?f>s?"left":f<s?"right":"center":f>s?"right":f<s?"left":"center":"end"===o?"auto"===v?f>s?"right":f<s?"left":"center":f>s?"left":f<s?"right":"center":"center");var k={bottom:-1,middle:0,top:1};if("auto"===v){var O=k[n];F=-M*x*O,D=M*S*O}else F=M*{left:1,center:0,right:-1}[T],D=M*k[n];E+=F,d+=D}else F=M+3,-1!==o.indexOf("right")?(E=Math.max(s,f)-F,"auto"===T&&(T="right")):-1!==o.indexOf("left")?(E=Math.min(s,f)+F,"auto"===T&&(T="left")):(E=(s+f)/2,"auto"===T&&(T="center")),d=-1!==o.indexOf("top")?Math.min(c,m):-1!==o.indexOf("bottom")?Math.max(c,m):(c+m)/2,D=M,"bottom"===n?d-=D:"top"===n&&(d+=D);var U=r[n],H=h.label.font.size,J=p.height;return{textx:E+(J*U-H)*x,texty:d+-(J*U-H)*S,xanchor:T}}(E,F,d,D,m,G,P.bBox(n.node())),$=at.textx,X=at.texty;n.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[at.xanchor],y:X,x:$,transform:"rotate("+G+","+$+","+X+")"}).call(i.positionText,$,X)}}},42359:function(q,W,t){"use strict";var g=t(71828).strTranslate,i=t(28569),P=t(64505),C=P.drawMode,u=P.selectMode,y=t(73972),e=t(7901),r=t(89995),l=r.i000,a=r.i090,s=r.i180,c=r.i270,m=t(51873).clearOutlineControllers,h=t(60165),w=h.pointsOnRectangle,p=h.pointsOnEllipse,o=h.writePaths,v=t(90551).newShapes,M=t(90551).createShapeObj,b=t(35855),L=t(48100);function S(n,E){var N,k,O,D=n.length;return O=n[N=(E+1)%D][2],(k=n[N][1])===n[E][1]&&O===n[E][2]&&(k=n[N=(E+2)%D][1],O=n[N][2]),[N,k,O]}q.exports=function n(E,d,F,D){D||(D=0);var N=F.gd;function k(){n(E,d,F,D++),(p(E[0])||F.hasText)&&O({redrawing:!0})}function O(xt){var At={};void 0!==F.isActiveShape&&(F.isActiveShape=!1,At=v(d,F)),void 0!==F.isActiveSelection&&(F.isActiveSelection=!1,At=b(d,F),N._fullLayout._reselect=!0),Object.keys(At).length&&y.call((xt||{}).redrawing?"relayout":"_guiRelayout",N,At)}var nt,it,ut,Q,j,z=N._fullLayout._zoomlayer,U=F.dragmode,H=C(U),J=u(U);if((H||J)&&(N._fullLayout._outlining=!0),m(N),d.attr("d",o(E)),D||!F.isActiveShape&&!F.isActiveSelection||(j=function x(n,E){for(var d=0;d<E.length;d++){var F=E[d];n[d]=[];for(var D=0;D<F.length;D++){n[d][D]=[];for(var N=0;N<F[D].length;N++)n[d][D][N]=F[D][N]}}return n}([],E),function st(xt){nt=[];for(var At=0;At<E.length;At++){var Gt=E[At],Wt=w(Gt),Pt=!Wt&&p(Gt);nt[At]=[];for(var Vt=Gt.length,te=0;te<Vt;te++)if("Z"!==Gt[te][0]&&(!Pt||te===l||te===a||te===s||te===c)){var Bt,Qt=Wt&&F.isActiveSelection;Qt&&(Bt=S(Gt,te));var Ot=Gt[te][1],qt=Gt[te][2],ie=xt.append(Qt?"rect":"circle").attr("data-i",At).attr("data-j",te).style({fill:e.background,stroke:e.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(Qt){var oe=Bt[1]-Ot,pe=Bt[2]-qt,de=pe?5:Math.max(Math.min(25,Math.abs(oe)-5),5),Fe=oe?5:Math.max(Math.min(25,Math.abs(pe)-5),5);ie.classed(pe?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",de).attr("height",Fe).attr("x",Ot-de/2).attr("y",qt-Fe/2).attr("transform",g(oe/2,pe/2))}else ie.classed("cursor-grab",!0).attr("r",5).attr("cx",Ot).attr("cy",qt);nt[At][te]={element:ie.node(),gd:N,prepFn:at,doneFn:X,clickFn:et},i.init(nt[At][te])}}}(z.append("g").attr("class","outline-controllers")),function Mt(){if(it=[],E.length){it[0]={element:d[0][0],gd:N,prepFn:gt,doneFn:Lt,clickFn:It},i.init(it[0])}}()),H&&F.hasText){var G=z.select(".label-temp"),K=M(d,F,F.dragmode);L(N,"label-temp",K,G)}function at(xt){ut=+xt.srcElement.getAttribute("data-i"),Q=+xt.srcElement.getAttribute("data-j"),nt[ut][Q].moveFn=$}function $(xt,At){if(E.length){var Gt=j[ut][Q][1],Wt=j[ut][Q][2],Pt=E[ut],Vt=Pt.length;if(w(Pt)){var te=xt,Qt=At;F.isActiveSelection&&(S(Pt,Q)[1]===Pt[Q][1]?Qt=0:te=0);for(var Ot=0;Ot<Vt;Ot++)if(Ot!==Q){var qt=Pt[Ot];qt[1]===Pt[Q][1]&&(qt[1]=Gt+te),qt[2]===Pt[Q][2]&&(qt[2]=Wt+Qt)}if(Pt[Q][1]=Gt+te,Pt[Q][2]=Wt+Qt,!w(Pt))for(var ie=0;ie<Vt;ie++)for(var oe=0;oe<Pt[ie].length;oe++)Pt[ie][oe]=j[ut][ie][oe]}else Pt[Q][1]=Gt+xt,Pt[Q][2]=Wt+At;k()}}function X(){O()}function et(xt,At){if(2===xt){ut=+At.srcElement.getAttribute("data-i"),Q=+At.srcElement.getAttribute("data-j");var Gt=E[ut];!w(Gt)&&!p(Gt)&&function rt(){if(E.length&&E[ut]&&E[ut].length){for(var xt=[],At=0;At<E[ut].length;At++)At!==Q&&xt.push(E[ut][At]);xt.length>1&&(2!==xt.length||"Z"!==xt[1][0])&&(0===Q&&(xt[0][0]="M"),E[ut]=xt,k(),O())}}()}}function bt(xt,At){(function dt(xt,At){if(E.length)for(var Gt=0;Gt<E.length;Gt++)for(var Wt=0;Wt<E[Gt].length;Wt++)for(var Pt=0;Pt+2<E[Gt][Wt].length;Pt+=2)E[Gt][Wt][Pt+1]=j[Gt][Wt][Pt+1]+xt,E[Gt][Wt][Pt+2]=j[Gt][Wt][Pt+2]+At})(xt,At),k()}function gt(xt){(ut=+xt.srcElement.getAttribute("data-i"))||(ut=0),it[ut].moveFn=bt}function Lt(){O()}function It(xt){2===xt&&function T(n){if(u(n._fullLayout.dragmode)){m(n);var E=n._fullLayout._activeSelectionIndex,d=(n.layout||{}).selections||[];if(E<d.length){for(var F=[],D=0;D<d.length;D++)D!==E&&F.push(d[D]);delete n._fullLayout._activeSelectionIndex;var N=n._fullLayout.selections[E];n._fullLayout._deselect={xref:N.xref,yref:N.yref},y.call("_guiRelayout",n,{selections:F})}}}(N)}}},34031:function(q,W,t){"use strict";var A=t(39898),g=t(73972),i=t(71828),P=t(89298),C=t(60165).readPaths,u=t(42359),y=t(48100),e=t(51873).clearOutlineControllers,r=t(7901),l=t(91424),a=t(44467).arrayEditor,s=t(28569),c=t(6964),f=t(21459),m=t(30477),h=m.getPathString;function w(n){var E=n._fullLayout;for(var d in E._shapeUpperLayer.selectAll("path").remove(),E._shapeLowerLayer.selectAll("path").remove(),E._shapeUpperLayer.selectAll("text").remove(),E._shapeLowerLayer.selectAll("text").remove(),E._plots){var F=E._plots[d].shapelayer;F&&(F.selectAll("path").remove(),F.selectAll("text").remove())}for(var D=0;D<E.shapes.length;D++)!0===E.shapes[D].visible&&v(n,D)}function p(n){return!!n._fullLayout._outlining}function o(n){return!n._context.edits.shapePosition}function v(n,E){n._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+E+'"]').remove();var d=m.makeShapesOptionsAndPlotinfo(n,E),F=d.options,D=d.plotinfo;F._input&&!0===F.visible&&function k(O){var B=h(n,F),z={"data-index":E,"fill-rule":F.fillrule,d:B},U=F.opacity,H=F.fillcolor,J=F.line.width?F.line.color:"rgba(0,0,0,0)",nt=F.line.width,it=F.line.dash;!nt&&!0===F.editable&&(nt=5,it="solid");var ut="Z"!==B[B.length-1],Q=o(n)&&F.editable&&n._fullLayout._activeShapeIndex===E;Q&&(H=ut?"rgba(0,0,0,0)":n._fullLayout.activeshape.fillcolor,U=n._fullLayout.activeshape.opacity);var G,j=O.append("g").classed("shape-group",!0).attr({"data-index":E}),Z=j.append("path").attr(z).style("opacity",U).call(r.stroke,J).call(r.fill,H).call(l.dashLine,it,nt);if(M(j,n,F),y(n,E,F,j),(Q||n._context.edits.shapePosition)&&(G=a(n.layout,"shapes",F)),Q){Z.style({cursor:"move"});var K={element:Z.node(),plotinfo:D,gd:n,editHelpers:G,hasText:F.label.text||F.label.texttemplate,isActiveShape:!0},at=C(B,n);u(at,Z,K)}else n._context.edits.shapePosition?function b(n,E,d,F,D,N){var nt,it,ut,Q,j,Z,G,K,at,$,X,rt,et,st,dt,te,k=10,O=10,B="pixel"===d.xsizemode,z="pixel"===d.ysizemode,U="line"===d.type,H="path"===d.type,J=N.modifyItem,bt=A.select(E.node().parentNode),gt=P.getFromId(n,d.xref),Lt=P.getRefType(d.xref),It=P.getFromId(n,d.yref),Mt=P.getRefType(d.yref),xt=m.getDataToPixel(n,gt,!1,Lt),At=m.getDataToPixel(n,It,!0,Mt),Gt=m.getPixelToData(n,gt,!1,Lt),Wt=m.getPixelToData(n,It,!0,Mt),Pt=Qt(),Vt={element:Pt.node(),gd:n,prepFn:qt,doneFn:ie,clickFn:oe};function Qt(){return U?Bt():E}function Bt(){var St=10,Dt=Math.max(d.line.width,St),Ft=D.append("g").attr("data-index",F).attr("drag-helper",!0);Ft.append("path").attr("d",E.attr("d")).style({cursor:"move","stroke-width":Dt,"stroke-opacity":"0"});var Nt={"fill-opacity":"0"},Rt=Math.max(Dt/2,St);return Ft.append("circle").attr({"data-line-point":"start-point",cx:B?xt(d.xanchor)+d.x0:xt(d.x0),cy:z?At(d.yanchor)-d.y0:At(d.y0),r:Rt}).style(Nt).classed("cursor-grab",!0),Ft.append("circle").attr({"data-line-point":"end-point",cx:B?xt(d.xanchor)+d.x1:xt(d.x1),cy:z?At(d.yanchor)-d.y1:At(d.y1),r:Rt}).style(Nt).classed("cursor-grab",!0),Ft}function Ot(St){if(p(n))te=null;else if(U)te="path"===St.target.tagName?"move":"start-point"===St.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var Dt=Vt.element.getBoundingClientRect(),Ft=Dt.right-Dt.left,Nt=Dt.bottom-Dt.top,ft=!H&&Ft>k&&Nt>O&&!St.shiftKey?s.getCursor((St.clientX-Dt.left)/Ft,1-(St.clientY-Dt.top)/Nt):"move";c(E,ft),te=ft.split("-")[0]}}function qt(St){p(n)||(B&&(j=xt(d.xanchor)),z&&(Z=At(d.yanchor)),"path"===d.type?dt=d.path:(nt=B?d.x0:xt(d.x0),it=z?d.y0:At(d.y0),ut=B?d.x1:xt(d.x1),Q=z?d.y1:At(d.y1)),nt<ut?(at=nt,et="x0",$=ut,st="x1"):(at=ut,et="x1",$=nt,st="x0"),!z&&it<Q||z&&it>Q?(G=it,X="y0",K=Q,rt="y1"):(G=Q,X="y1",K=it,rt="y0"),Ot(St),Fe(D,d),Et(E,d,n),Vt.moveFn="move"===te?pe:de,Vt.altKey=St.altKey)}function ie(){p(n)||(c(E),Kt(D),M(E,n,d),g.call("_guiRelayout",n,N.getUpdateObj()))}function oe(){p(n)||Kt(D)}function pe(St,Dt){if("path"===d.type){var Ft=function(wt){return wt},Nt=Ft,Rt=Ft;B?J("xanchor",d.xanchor=Gt(j+St)):(Nt=function(ft){return Gt(xt(ft)+St)},gt&&"date"===gt.type&&(Nt=m.encodeDate(Nt))),z?J("yanchor",d.yanchor=Wt(Z+Dt)):(Rt=function(ft){return Wt(At(ft)+Dt)},It&&"date"===It.type&&(Rt=m.encodeDate(Rt))),J("path",d.path=L(dt,Nt,Rt))}else B?J("xanchor",d.xanchor=Gt(j+St)):(J("x0",d.x0=Gt(nt+St)),J("x1",d.x1=Gt(ut+St))),z?J("yanchor",d.yanchor=Wt(Z+Dt)):(J("y0",d.y0=Wt(it+Dt)),J("y1",d.y1=Wt(Q+Dt)));E.attr("d",h(n,d)),Fe(D,d),y(n,F,d,bt)}function de(St,Dt){if(H){var Ft=function(ue){return ue},Nt=Ft,Rt=Ft;B?J("xanchor",d.xanchor=Gt(j+St)):(Nt=function(Ne){return Gt(xt(Ne)+St)},gt&&"date"===gt.type&&(Nt=m.encodeDate(Nt))),z?J("yanchor",d.yanchor=Wt(Z+Dt)):(Rt=function(Ne){return Wt(At(Ne)+Dt)},It&&"date"===It.type&&(Rt=m.encodeDate(Rt))),J("path",d.path=L(dt,Nt,Rt))}else if(U){if("resize-over-start-point"===te){var wt=nt+St,ft=z?it-Dt:it+Dt;J("x0",d.x0=B?wt:Gt(wt)),J("y0",d.y0=z?ft:Wt(ft))}else if("resize-over-end-point"===te){var pt=ut+St,kt=z?Q-Dt:Q+Dt;J("x1",d.x1=B?pt:Gt(pt)),J("y1",d.y1=z?kt:Wt(kt))}}else{var Zt=function(ue){return-1!==te.indexOf(ue)},ee=Zt("n"),se=Zt("s"),Be=Zt("w"),Ke=Zt("e"),xe=ee?G+Dt:G,Pe=se?K+Dt:K,Ge=Be?at+St:at,gr=Ke?$+St:$;z&&(ee&&(xe=G-Dt),se&&(Pe=K-Dt)),(!z&&Pe-xe>O||z&&xe-Pe>O)&&(J(X,d[X]=z?xe:Wt(xe)),J(rt,d[rt]=z?Pe:Wt(Pe))),gr-Ge>k&&(J(et,d[et]=B?Ge:Gt(Ge)),J(st,d[st]=B?gr:Gt(gr)))}E.attr("d",h(n,d)),Fe(D,d),y(n,F,d,bt)}function Fe(St,Dt){function Ft(){var Nt="path"!==Dt.type,Rt=St.selectAll(".visual-cue").data([0]),wt=1;Rt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":wt}).classed("visual-cue",!0);var ft=xt(B?Dt.xanchor:i.midRange(Nt?[Dt.x0,Dt.x1]:m.extractPathCoords(Dt.path,f.paramIsX))),pt=At(z?Dt.yanchor:i.midRange(Nt?[Dt.y0,Dt.y1]:m.extractPathCoords(Dt.path,f.paramIsY)));ft=m.roundPositionForSharpStrokeRendering(ft,wt),pt=m.roundPositionForSharpStrokeRendering(pt,wt),Rt.attr("d",B&&z?"M"+(ft-1-wt)+","+(pt-1-wt)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":B?"M"+(ft-1-wt)+","+(pt-9-wt)+"v18 h2 v-18 Z":"M"+(ft-9-wt)+","+(pt-1-wt)+"h18 v2 h-18 Z")}(B||z)&&Ft()}function Kt(St){St.selectAll(".visual-cue").remove()}function Et(St,Dt,Ft){var Nt=Dt.xref,Rt=Dt.yref,wt=P.getFromId(Ft,Nt),ft=P.getFromId(Ft,Rt),pt="";"paper"!==Nt&&!wt.autorange&&(pt+=Nt),"paper"!==Rt&&!ft.autorange&&(pt+=Rt),l.setClipUrl(St,pt?"clip"+Ft._fullLayout._uid+pt:null,Ft)}s.init(Vt),Pt.node().onmousemove=Ot}(n,Z,F,E,O,G):!0===F.editable&&Z.style("pointer-events",ut||r.opacity(H)*U<=.5?"stroke":"all");Z.node().addEventListener("click",function(){return function x(n,E){if(o(n)){var F=+E.node().getAttribute("data-index");if(F>=0){if(F===n._fullLayout._activeShapeIndex)return void S(n);n._fullLayout._activeShapeIndex=F,n._fullLayout._deactivateShape=S,w(n)}}}(n,Z)})}("below"!==F.layer?n._fullLayout._shapeUpperLayer:"paper"===F.xref||"paper"===F.yref?n._fullLayout._shapeLowerLayer:D._hadPlotinfo?(D.mainplotinfo||D).shapelayer:n._fullLayout._shapeLowerLayer)}function M(n,E,d){var F=(d.xref+d.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");l.setClipUrl(n,F?"clip"+E._fullLayout._uid+F:null,E)}function L(n,E,d){return n.replace(f.segmentRE,function(F){var D=0,N=F.charAt(0),k=f.paramIsX[N],O=f.paramIsY[N],B=f.numParams[N];return N+F.substr(1).replace(f.paramRE,function(U){return D>=B||(k[D]?U=E(U):O[D]&&(U=d(U)),D++),U})})}function S(n){o(n)&&n._fullLayout._activeShapeIndex>=0&&(e(n),delete n._fullLayout._activeShapeIndex,w(n))}q.exports={draw:w,drawOne:v,eraseActiveShape:function T(n){if(o(n)){e(n);var E=n._fullLayout._activeShapeIndex,d=(n.layout||{}).shapes||[];if(E<d.length){for(var F=[],D=0;D<d.length;D++)D!==E&&F.push(d[D]);return delete n._fullLayout._activeShapeIndex,g.call("_guiRelayout",n,{shapes:F})}}},drawLabel:y}},29241:function(q,W,t){"use strict";var A=t(30962).overrideAll,g=t(9012),i=t(41940),P=t(79952).P,C=t(1426).extendFlat,u=t(5386).R,y=t(37281);q.exports=A({newshape:{visible:C({},g.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:C({},g.legend,{}),legendgroup:C({},g.legendgroup,{}),legendgrouptitle:{text:C({},g.legendgrouptitle.text,{}),font:i({})},legendrank:C({},g.legendrank,{}),legendwidth:C({},g.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:C({},P,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:C({},g.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:u({newshape:!0},{keys:Object.keys(y)}),font:i({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},89995:function(q){"use strict";q.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},45547:function(q,W,t){"use strict";var A=t(7901),g=t(71828);q.exports=function(C,u,y){y("newshape.visible"),y("newshape.name"),y("newshape.showlegend"),y("newshape.legend"),y("newshape.legendwidth"),y("newshape.legendgroup"),y("newshape.legendgrouptitle.text"),g.coerceFont(y,"newshape.legendgrouptitle.font"),y("newshape.legendrank"),y("newshape.drawdirection"),y("newshape.layer"),y("newshape.fillcolor"),y("newshape.fillrule"),y("newshape.opacity"),y("newshape.line.width")&&(y("newshape.line.color",A.contrast((C||{}).plot_bgcolor||"#FFF")),y("newshape.line.dash"));var l="drawline"===C.dragmode,a=y("newshape.label.text"),s=y("newshape.label.texttemplate");if(a||s){y("newshape.label.textangle");var c=y("newshape.label.textposition",l?"middle":"middle center");y("newshape.label.xanchor"),y("newshape.label.yanchor",function i(P,C){return P?"bottom":-1!==C.indexOf("top")?"top":-1!==C.indexOf("bottom")?"bottom":"middle"}(l,c)),y("newshape.label.padding"),g.coerceFont(y,"newshape.label.font",u.font)}y("activeshape.fillcolor"),y("activeshape.opacity")}},60165:function(q,W,t){"use strict";var A=t(95616),g=t(89995),i=g.CIRCLE_SIDES,P=g.SQRT2,C=t(75549),u=C.p2r,y=C.r2p,e=[0,3,4,5,6,1,2],r=[0,3,4,1,2];function l(s,c){return Math.abs(s-c)<=1e-6}function a(s,c){var f=c[1]-s[1],m=c[2]-s[2];return Math.sqrt(f*f+m*m)}W.writePaths=function(s){var c=s.length;if(!c)return"M0,0Z";for(var f="",m=0;m<c;m++)for(var h=s[m].length,w=0;w<h;w++){var p=s[m][w][0];if("Z"===p)f+="Z";else for(var o=s[m][w].length,v=0;v<o;v++){var M=v;"Q"===p||"S"===p?M=r[v]:"C"===p&&(M=e[v]),f+=s[m][w][M],v>0&&v<o-1&&(f+=",")}}return f},W.readPaths=function(s,c,f,m){var v,L,x,h=A(s),w=[],p=-1,M=0,b=0,S=function(){L=M,x=b};S();for(var T=0;T<h.length;T++){var n=[],N=h[T][0],k=N;switch(N){case"M":p++,w[p]=[],n.push([k,M=+h[T][1],b=+h[T][2]]),S();break;case"Q":case"S":n.push([k,M=+h[T][3],b=+h[T][4],+h[T][1],+h[T][2]]);break;case"C":n.push([k,M=+h[T][5],b=+h[T][6],+h[T][1],+h[T][2],+h[T][3],+h[T][4]]);break;case"T":case"L":n.push([k,M=+h[T][1],b=+h[T][2]]);break;case"H":n.push([k="L",M=+h[T][1],b]);break;case"V":n.push([k="L",M,b=+h[T][1]]);break;case"A":k="L";var O=+h[T][1],B=+h[T][2];+h[T][4]||(O=-O,B=-B);var z=M-O,U=b;for(v=1;v<=i/2;v++){var H=2*Math.PI*v/i;n.push([k,z+O*Math.cos(H),U+B*Math.sin(H)])}break;case"Z":(M!==L||b!==x)&&n.push([k,M=L,b=x])}for(var J=(f||{}).domain,nt=c._fullLayout._size,it=f&&"pixel"===f.xsizemode,ut=f&&"pixel"===f.ysizemode,Q=!1===m,j=0;j<n.length;j++){for(v=0;v+2<7;v+=2){var Z=n[j][v+1],G=n[j][v+2];void 0===Z||void 0===G||(M=Z,b=G,f&&(f.xaxis&&f.xaxis.p2r?(Q&&(Z-=f.xaxis._offset),Z=it?y(f.xaxis,f.xanchor)+Z:u(f.xaxis,Z)):(Q&&(Z-=nt.l),J?Z=J.x[0]+Z/nt.w:Z/=nt.w),f.yaxis&&f.yaxis.p2r?(Q&&(G-=f.yaxis._offset),G=ut?y(f.yaxis,f.yanchor)-G:u(f.yaxis,G)):(Q&&(G-=nt.t),G=J?J.y[1]-G/nt.h:1-G/nt.h)),n[j][v+1]=Z,n[j][v+2]=G)}w[p].push(n[j].slice())}}return w},W.pointsOnRectangle=function(s){if(5!==s.length)return!1;for(var f=1;f<3;f++){if(!l(s[0][f]-s[1][f],s[3][f]-s[2][f]))return!1;if(!l(s[0][f]-s[3][f],s[1][f]-s[2][f]))return!1}return!(!l(s[0][1],s[1][1])&&!l(s[0][1],s[3][1])||!(a(s[0],s[1])*a(s[0],s[3])))},W.pointsOnEllipse=function(s){var c=s.length;if(c!==i+1)return!1;c=i;for(var f=0;f<c;f++){var m=(2*c-f)%c,h=(c/2+m)%c;if(!l(a(s[f],s[(c/2+f)%c]),a(s[m],s[h])))return!1}return!0},W.handleEllipse=function(s,c,f){if(!s)return[c,f];var m=W.ellipseOver({x0:c[0],y0:c[1],x1:f[0],y1:f[1]}),h=(m.x1+m.x0)/2,w=(m.y1+m.y0)/2,p=(m.x1-m.x0)/2,o=(m.y1-m.y0)/2;p||(p=o/=P),o||(o=p/=P);for(var v=[],M=0;M<i;M++){var b=2*M*Math.PI/i;v.push([h+p*Math.cos(b),w+o*Math.sin(b)])}return v},W.ellipseOver=function(s){var c=s.x0,f=s.y0,m=s.x1,h=s.y1,w=m-c,p=h-f,o=((c-=w)+m)/2,v=((f-=p)+h)/2;return{x0:o-(w*=P),y0:v-(p*=P),x1:o+w,y1:v+p}},W.fixDatesForPaths=function(s,c,f){var m="date"===c.type,h="date"===f.type;if(!m&&!h)return s;for(var w=0;w<s.length;w++)for(var p=0;p<s[w].length;p++)for(var o=0;o+2<s[w][p].length;o+=2)m&&(s[w][p][o+1]=s[w][p][o+1].replace(" ","_")),h&&(s[w][p][o+2]=s[w][p][o+2].replace(" ","_"));return s}},90551:function(q,W,t){"use strict";var A=t(64505),g=A.drawMode,i=A.openMode,P=t(89995),C=P.i000,u=P.i090,y=P.i180,e=P.i270,r=P.cos45,l=P.sin45,a=t(75549),s=a.p2r,c=a.r2p,m=t(51873).clearOutline,h=t(60165),w=h.readPaths,p=h.writePaths,o=h.ellipseOver,v=h.fixDatesForPaths;function b(L,x,S){var J,n=x.gd,E=L[0][0].getAttribute("d"),d=n._fullLayout.newshape,F=x.plotinfo,D=x.isActiveShape,N=F.xaxis,k=F.yaxis,O=!!F.domain||!F.xaxis,B=!!F.domain||!F.yaxis,z=i(S),U=w(E,n,F,D),H={editable:!0,visible:d.visible,name:d.name,showlegend:d.showlegend,legend:d.legend,legendwidth:d.legendwidth,legendgroup:d.legendgroup,legendgrouptitle:{text:d.legendgrouptitle.text,font:d.legendgrouptitle.font},legendrank:d.legendrank,label:d.label,xref:O?"paper":N._id,yref:B?"paper":k._id,layer:d.layer,opacity:d.opacity,line:{color:d.line.color,width:d.line.width,dash:d.line.dash}};if(z||(H.fillcolor=d.fillcolor,H.fillrule=d.fillrule),1===U.length&&(J=U[0]),J&&5===J.length&&"drawrect"===S)H.type="rect",H.x0=J[0][1],H.y0=J[0][2],H.x1=J[2][1],H.y1=J[2][2];else if(J&&"drawline"===S)H.type="line",H.x0=J[0][1],H.y0=J[0][2],H.x1=J[1][1],H.y1=J[1][2];else if(J&&"drawcircle"===S){H.type="circle";var nt=J[C][1],it=J[u][1],ut=J[y][1],Q=J[e][1],j=J[C][2],Z=J[u][2],G=J[y][2],K=J[e][2],at=F.xaxis&&("date"===F.xaxis.type||"log"===F.xaxis.type),$=F.yaxis&&("date"===F.yaxis.type||"log"===F.yaxis.type);at&&(nt=c(F.xaxis,nt),it=c(F.xaxis,it),ut=c(F.xaxis,ut),Q=c(F.xaxis,Q)),$&&(j=c(F.yaxis,j),Z=c(F.yaxis,Z),G=c(F.yaxis,G),K=c(F.yaxis,K));var X=(it+Q)/2,rt=(j+G)/2,dt=o({x0:X,y0:rt,x1:X+(Q-it+ut-nt)/2*r,y1:rt+(K-Z+G-j)/2*l});at&&(dt.x0=s(F.xaxis,dt.x0),dt.x1=s(F.xaxis,dt.x1)),$&&(dt.y0=s(F.yaxis,dt.y0),dt.y1=s(F.yaxis,dt.y1)),H.x0=dt.x0,H.y0=dt.y0,H.x1=dt.x1,H.y1=dt.y1}else H.type="path",N&&k&&v(U,N,k),H.path=p(U),J=null;return H}q.exports={newShapes:function M(L,x){if(L.length&&L[0][0]){var T=x.gd,n=x.isActiveShape,E=x.dragmode,d=(T.layout||{}).shapes||[];if(!g(E)&&void 0!==n){var F=T._fullLayout._activeShapeIndex;if(F<d.length)switch(T._fullLayout.shapes[F].type){case"rect":E="drawrect";break;case"circle":E="drawcircle";break;case"line":E="drawline";break;case"path":var D=d[F].path||"";E="Z"===D[D.length-1]?"drawclosedpath":"drawopenpath"}}var N=b(L,x,E);m(T);for(var k=x.editHelpers,O=(k||{}).modifyItem,B=[],z=0;z<d.length;z++){var U=T._fullLayout.shapes[z];if(B[z]=U._input,void 0!==n&&z===T._fullLayout._activeShapeIndex){var H=N;switch(U.type){case"line":case"rect":case"circle":O("x0",H.x0),O("x1",H.x1),O("y0",H.y0),O("y1",H.y1);break;case"path":O("path",H.path)}}}return void 0===n?(B.push(N),B):k?k.getUpdateObj():{}}},createShapeObj:b}},51873:function(q){"use strict";q.exports={clearOutlineControllers:function W(A){var g=A._fullLayout._zoomlayer;g&&g.selectAll(".outline-controllers").remove()},clearOutline:function t(A){var g=A._fullLayout._zoomlayer;g&&g.selectAll(".select-outline").remove(),A._fullLayout._outlining=!1}}},30477:function(q,W,t){"use strict";var A=t(21459),g=t(71828),i=t(89298);W.rangeToShapePosition=function(C){return"log"===C.type?C.r2d:function(u){return u}},W.shapePositionToRange=function(C){return"log"===C.type?C.d2r:function(u){return u}},W.decodeDate=function(C){return function(u){return u.replace&&(u=u.replace("_"," ")),C(u)}},W.encodeDate=function(C){return function(u){return C(u).replace(" ","_")}},W.extractPathCoords=function(C,u,y){var e=[];return C.match(A.segmentRE).forEach(function(l){var a=u[l.charAt(0)].drawn;if(void 0!==a){var s=l.substr(1).match(A.paramRE);if(s&&!(s.length<a)){var c=s[a],f=y?c:g.cleanNumber(c);e.push(f)}}}),e},W.getDataToPixel=function(C,u,y,e){var l,r=C._fullLayout._size;if(u)if("domain"===e)l=function(s){return u._length*(y?1-s:s)+u._offset};else{var a=W.shapePositionToRange(u);l=function(s){return u._offset+u.r2p(a(s,!0))},"date"===u.type&&(l=W.decodeDate(l))}else l=y?function(s){return r.t+r.h*(1-s)}:function(s){return r.l+r.w*s};return l},W.getPixelToData=function(C,u,y,e){var l,r=C._fullLayout._size;if(u)if("domain"===e)l=function(s){var c=(s-u._offset)/u._length;return y?1-c:c};else{var a=W.rangeToShapePosition(u);l=function(s){return a(u.p2r(s-u._offset))}}else l=y?function(s){return 1-(s-r.t)/r.h}:function(s){return(s-r.l)/r.w};return l},W.roundPositionForSharpStrokeRendering=function(C,u){var y=1===Math.round(u%2),e=Math.round(C);return y?e+.5:e},W.makeShapesOptionsAndPlotinfo=function(C,u){var y=C._fullLayout.shapes[u]||{},e=C._fullLayout._plots[y.xref+y.yref];return e?e._hadPlotinfo=!0:(e={},y.xref&&"paper"!==y.xref&&(e.xaxis=C._fullLayout[y.xref+"axis"]),y.yref&&"paper"!==y.yref&&(e.yaxis=C._fullLayout[y.yref+"axis"])),e.xsizemode=y.xsizemode,e.ysizemode=y.ysizemode,e.xanchor=y.xanchor,e.yanchor=y.yanchor,{options:y,plotinfo:e}},W.makeSelectionsOptionsAndPlotinfo=function(C,u){var y=C._fullLayout.selections[u]||{},e=C._fullLayout._plots[y.xref+y.yref];return e?e._hadPlotinfo=!0:(e={},y.xref&&(e.xaxis=C._fullLayout[y.xref+"axis"]),y.yref&&(e.yaxis=C._fullLayout[y.yref+"axis"])),{options:y,plotinfo:e}},W.getPathString=function(C,u){var c,f,m,h,w,p,o,v,y=u.type,e=i.getRefType(u.xref),r=i.getRefType(u.yref),l=i.getFromId(C,u.xref),a=i.getFromId(C,u.yref),s=C._fullLayout._size;if(l?"domain"===e?f=function(F){return l._offset+l._length*F}:(c=W.shapePositionToRange(l),f=function(F){return l._offset+l.r2p(c(F,!0))}):f=function(F){return s.l+s.w*F},a?"domain"===r?h=function(F){return a._offset+a._length*(1-F)}:(m=W.shapePositionToRange(a),h=function(F){return a._offset+a.r2p(m(F,!0))}):h=function(F){return s.t+s.h*(1-F)},"path"===y)return l&&"date"===l.type&&(f=W.decodeDate(f)),a&&"date"===a.type&&(h=W.decodeDate(h)),function P(C,u,y){var r=C.xsizemode,l=C.ysizemode,a=C.xanchor,s=C.yanchor;return C.path.replace(A.segmentRE,function(c){var f=0,m=c.charAt(0),h=A.paramIsX[m],w=A.paramIsY[m],p=A.numParams[m],o=c.substr(1).replace(A.paramRE,function(v){return h[f]?v="pixel"===r?u(a)+Number(v):u(v):w[f]&&(v="pixel"===l?y(s)-Number(v):y(v)),++f>p&&(v="X"),v});return f>p&&(o=o.replace(/[\s,]*X.*/,""),g.log("Ignoring extra params in segment "+c)),m+o})}(u,f,h);if("pixel"===u.xsizemode){var M=f(u.xanchor);w=M+u.x0,p=M+u.x1}else w=f(u.x0),p=f(u.x1);if("pixel"===u.ysizemode){var b=h(u.yanchor);o=b-u.y0,v=b-u.y1}else o=h(u.y0),v=h(u.y1);if("line"===y)return"M"+w+","+o+"L"+p+","+v;if("rect"===y)return"M"+w+","+o+"H"+p+"V"+v+"H"+w+"Z";var L=(w+p)/2,x=(o+v)/2,S=Math.abs(L-w),T=Math.abs(x-o),n="A"+S+","+T,E=L+S+","+x;return"M"+E+n+" 0 1,1 "+L+","+(x-T)+n+" 0 0,1 "+E+"Z"}},89853:function(q,W,t){"use strict";var A=t(34031);q.exports={moduleType:"component",name:"shapes",layoutAttributes:t(89827),supplyLayoutDefaults:t(84726),supplyDrawNewShapeDefaults:t(45547),includeBasePlot:t(76325)("shapes"),calcAutorange:t(5627),draw:A.draw,drawOne:A.drawOne}},37281:function(q){"use strict";function W(c,f){return f?f.d2l(c):c}function t(c,f){return f?f.l2d(c):c}function C(c,f){return W(c.x1,f)-W(c.x0,f)}function u(c,f,m){return W(c.y1,m)-W(c.y0,m)}q.exports={x0:function A(c){return c.x0},x1:function g(c){return c.x1},y0:function i(c){return c.y0},y1:function P(c){return c.y1},slope:function s(c,f,m){return"line"!==c.type?void 0:u(c,0,m)/C(c,f)},dx:C,dy:u,width:function y(c,f){return Math.abs(C(c,f))},height:function e(c,f,m){return Math.abs(u(c,0,m))},length:function r(c,f,m){return"line"!==c.type?void 0:Math.sqrt(Math.pow(C(c,f),2)+Math.pow(u(c,0,m),2))},xcenter:function l(c,f){return t((W(c.x1,f)+W(c.x0,f))/2,f)},ycenter:function a(c,f,m){return t((W(c.y1,m)+W(c.y0,m))/2,m)}}},75067:function(q,W,t){"use strict";var A=t(41940),g=t(35025),i=t(1426).extendDeepAll,P=t(30962).overrideAll,C=t(85594),u=t(44467).templatedArray,y=t(98292),e=u("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});q.exports=P(u("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:e,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:i(g({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:C.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:A({})},font:A({}),activebgcolor:{valType:"color",dflt:y.gripBgActiveColor},bgcolor:{valType:"color",dflt:y.railBgColor},bordercolor:{valType:"color",dflt:y.railBorderColor},borderwidth:{valType:"number",min:0,dflt:y.railBorderWidth},ticklen:{valType:"number",min:0,dflt:y.tickLength},tickcolor:{valType:"color",dflt:y.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:y.minorTickLength}}),"arraydraw","from-root")},98292:function(q){"use strict";q.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},12343:function(q,W,t){"use strict";var A=t(71828),g=t(85501),i=t(75067),C=t(98292).name,u=i.steps;function y(r,l,a){function s(v,M){return A.coerce(r,l,i,v,M)}for(var c=g(r,l,{name:"steps",handleItemDefaults:e}),f=0,m=0;m<c.length;m++)c[m].visible&&f++;if(f<2?l.visible=!1:s("visible")){l._stepCount=f;var w=l._visibleSteps=A.filterVisible(c);(c[s("active")]||{}).visible||(l.active=w[0]._index),s("x"),s("y"),A.noneOrAll(r,l,["x","y"]),s("xanchor"),s("yanchor"),s("len"),s("lenmode"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),A.coerceFont(s,"font",a.font),s("currentvalue.visible")&&(s("currentvalue.xanchor"),s("currentvalue.prefix"),s("currentvalue.suffix"),s("currentvalue.offset"),A.coerceFont(s,"currentvalue.font",l.font)),s("transition.duration"),s("transition.easing"),s("bgcolor"),s("activebgcolor"),s("bordercolor"),s("borderwidth"),s("ticklen"),s("tickwidth"),s("tickcolor"),s("minorticklen")}}function e(r,l){function a(f,m){return A.coerce(r,l,u,f,m)}if("skip"===r.method||Array.isArray(r.args)?a("visible"):l.visible=!1){a("method"),a("args");var c=a("label","step-"+l._index);a("value",c),a("execute")}}q.exports=function(l,a){g(l,a,{name:C,handleItemDefaults:y})}},44504:function(q,W,t){"use strict";var A=t(39898),g=t(74875),i=t(7901),P=t(91424),C=t(71828),u=C.strTranslate,y=t(63893),e=t(44467).arrayEditor,r=t(98292),l=t(18783),a=l.LINE_SPACING,s=l.FROM_TL,c=l.FROM_BR;function f(k){return r.autoMarginIdRoot+k._index}function h(k){return k._index}function w(k,O){var B=P.tester.selectAll("g."+r.labelGroupClass).data(O._visibleSteps);B.enter().append("g").classed(r.labelGroupClass,!0);var z=0,U=0;B.each(function(K){var X=M(A.select(this),{step:K},O).node();if(X){var rt=P.bBox(X);U=Math.max(U,rt.height),z=Math.max(z,rt.width)}}),B.remove();var H=O._dims={};H.inputAreaWidth=Math.max(r.railWidth,r.gripHeight);var J=k._fullLayout._size;if(H.lx=J.l+J.w*O.x,H.ly=J.t+J.h*(1-O.y),H.outerLength="fraction"===O.lenmode?Math.round(J.w*O.len):O.len,H.inputAreaStart=0,H.inputAreaLength=Math.round(H.outerLength-O.pad.l-O.pad.r),H.labelStride=Math.max(1,Math.ceil((z+r.labelPadding)/((H.inputAreaLength-2*r.stepInset)/(O._stepCount-1)))),H.labelHeight=U,H.currentValueMaxWidth=0,H.currentValueHeight=0,H.currentValueTotalHeight=0,H.currentValueMaxLines=1,O.currentvalue.visible){var Q=P.tester.append("g");B.each(function(K){var at=o(Q,O,K.label),$=at.node()&&P.bBox(at.node())||{width:0,height:0},X=y.lineCount(at);H.currentValueMaxWidth=Math.max(H.currentValueMaxWidth,Math.ceil($.width)),H.currentValueHeight=Math.max(H.currentValueHeight,Math.ceil($.height)),H.currentValueMaxLines=Math.max(H.currentValueMaxLines,X)}),H.currentValueTotalHeight=H.currentValueHeight+O.currentvalue.offset,Q.remove()}H.height=H.currentValueTotalHeight+r.tickOffset+O.ticklen+r.labelOffset+H.labelHeight+O.pad.t+O.pad.b;var j="left";C.isRightAnchor(O)&&(H.lx-=H.outerLength,j="right"),C.isCenterAnchor(O)&&(H.lx-=H.outerLength/2,j="center");var Z="top";C.isBottomAnchor(O)&&(H.ly-=H.height,Z="bottom"),C.isMiddleAnchor(O)&&(H.ly-=H.height/2,Z="middle"),H.outerLength=Math.ceil(H.outerLength),H.height=Math.ceil(H.height),H.lx=Math.round(H.lx),H.ly=Math.round(H.ly);var G={y:O.y,b:H.height*c[Z],t:H.height*s[Z]};"fraction"===O.lenmode?(G.l=0,G.xl=O.x-O.len*s[j],G.r=0,G.xr=O.x+O.len*c[j]):(G.x=O.x,G.l=H.outerLength*s[j],G.r=H.outerLength*c[j]),g.autoMargin(k,f(O),G)}function o(k,O,B){if(O.currentvalue.visible){var U,H,z=O._dims;switch(O.currentvalue.xanchor){case"right":U=z.inputAreaLength-r.currentValueInset-z.currentValueMaxWidth,H="left";break;case"center":U=.5*z.inputAreaLength,H="middle";break;default:U=r.currentValueInset,H="left"}var J=C.ensureSingle(k,"text",r.labelClass,function(Z){Z.attr({"text-anchor":H,"data-notex":1})}),nt=O.currentvalue.prefix?O.currentvalue.prefix:"";if("string"==typeof B)nt+=B;else{var it=O.steps[O.active].label,ut=O._gd._fullLayout._meta;ut&&(it=C.templateString(it,ut)),nt+=it}O.currentvalue.suffix&&(nt+=O.currentvalue.suffix),J.call(P.font,O.currentvalue.font).text(nt).call(y.convertToTspans,O._gd);var Q=y.lineCount(J);return y.positionText(J,U,(z.currentValueMaxLines+1-Q)*O.currentvalue.font.size*a),J}}function v(k,O,B){C.ensureSingle(k,"rect",r.gripRectClass,function(U){U.call(S,O,k,B).style("pointer-events","all")}).attr({width:r.gripWidth,height:r.gripHeight,rx:r.gripRadius,ry:r.gripRadius}).call(i.stroke,B.bordercolor).call(i.fill,B.bgcolor).style("stroke-width",B.borderwidth+"px")}function M(k,O,B){var z=C.ensureSingle(k,"text",r.labelClass,function(J){J.attr({"text-anchor":"middle","data-notex":1})}),U=O.step.label,H=B._gd._fullLayout._meta;return H&&(U=C.templateString(U,H)),z.call(P.font,B.font).text(U).call(y.convertToTspans,B._gd),z}function b(k,O){var B=C.ensureSingle(k,"g",r.labelsClass),z=O._dims,U=B.selectAll("g."+r.labelGroupClass).data(z.labelSteps);U.enter().append("g").classed(r.labelGroupClass,!0),U.exit().remove(),U.each(function(H){var J=A.select(this);J.call(M,H,O),P.setTranslate(J,d(O,H.fraction),r.tickOffset+O.ticklen+O.font.size*a+r.labelOffset+z.currentValueTotalHeight)})}function L(k,O,B,z,U){var H=Math.round(z*(B._stepCount-1)),J=B._visibleSteps[H]._index;J!==B.active&&x(k,O,B,J,!0,U)}function x(k,O,B,z,U,H){var J=B.active;B.active=z,e(k.layout,r.name,B).applyUpdate("active",z);var nt=B.steps[B.active];O.call(E,B,H),O.call(o,B),k.emit("plotly_sliderchange",{slider:B,step:B.steps[B.active],interaction:U,previousActive:J}),nt&&nt.method&&U&&(O._nextMethod?(O._nextMethod.step=nt,O._nextMethod.doCallback=U,O._nextMethod.doTransition=H):(O._nextMethod={step:nt,doCallback:U,doTransition:H},O._nextMethodRaf=window.requestAnimationFrame(function(){var it=O._nextMethod.step;!it.method||(it.execute&&g.executeAPICommand(k,it.method,it.args),O._nextMethod=null,O._nextMethodRaf=null)})))}function S(k,O,B){if(!O._context.staticPlot){var z=B.node(),U=A.select(O);k.on("mousedown",J),k.on("touchstart",J)}function H(){return B.data()[0]}function J(){var nt=H();O.emit("plotly_sliderstart",{slider:nt});var it=B.select("."+r.gripRectClass);A.event.stopPropagation(),A.event.preventDefault(),it.call(i.fill,nt.activebgcolor);var ut=F(nt,A.mouse(z)[0]);function Q(){var Z=H(),G=F(Z,A.mouse(z)[0]);L(O,B,Z,G,!1)}function j(){var Z=H();Z._dragging=!1,it.call(i.fill,Z.bgcolor),U.on("mouseup",null),U.on("mousemove",null),U.on("touchend",null),U.on("touchmove",null),O.emit("plotly_sliderend",{slider:Z,step:Z.steps[Z.active]})}L(O,B,nt,ut,!0),nt._dragging=!0,U.on("mousemove",Q),U.on("touchmove",Q),U.on("mouseup",j),U.on("touchend",j)}}function T(k,O){var B=k.selectAll("rect."+r.tickRectClass).data(O._visibleSteps),z=O._dims;B.enter().append("rect").classed(r.tickRectClass,!0),B.exit().remove(),B.attr({width:O.tickwidth+"px","shape-rendering":"crispEdges"}),B.each(function(U,H){var J=H%z.labelStride==0,nt=A.select(this);nt.attr({height:J?O.ticklen:O.minorticklen}).call(i.fill,O.tickcolor),P.setTranslate(nt,d(O,H/(O._stepCount-1))-.5*O.tickwidth,(J?r.tickOffset:r.minorTickOffset)+z.currentValueTotalHeight)})}function E(k,O,B){for(var z=k.select("rect."+r.gripRectClass),U=0,H=0;H<O._stepCount;H++)if(O._visibleSteps[H]._index===O.active){U=H;break}var J=d(O,U/(O._stepCount-1));if(!O._invokingCommand){var nt=z;B&&O.transition.duration>0&&(nt=nt.transition().duration(O.transition.duration).ease(O.transition.easing)),nt.attr("transform",u(J-.5*r.gripWidth,O._dims.currentValueTotalHeight))}}function d(k,O){var B=k._dims;return B.inputAreaStart+r.stepInset+(B.inputAreaLength-2*r.stepInset)*Math.min(1,Math.max(0,O))}function F(k,O){var B=k._dims;return Math.min(1,Math.max(0,(O-r.stepInset-B.inputAreaStart)/(B.inputAreaLength-2*r.stepInset-2*B.inputAreaStart)))}function D(k,O,B){var z=B._dims,U=C.ensureSingle(k,"rect",r.railTouchRectClass,function(H){H.call(S,O,k,B).style("pointer-events","all")});U.attr({width:z.inputAreaLength,height:Math.max(z.inputAreaWidth,r.tickOffset+B.ticklen+z.labelHeight)}).call(i.fill,B.bgcolor).attr("opacity",0),P.setTranslate(U,0,z.currentValueTotalHeight)}function N(k,O){var B=O._dims,z=B.inputAreaLength-2*r.railInset,U=C.ensureSingle(k,"rect",r.railRectClass);U.attr({width:z,height:r.railWidth,rx:r.railRadius,ry:r.railRadius,"shape-rendering":"crispEdges"}).call(i.stroke,O.bordercolor).call(i.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px"),P.setTranslate(U,r.railInset,.5*(B.inputAreaWidth-r.railWidth)+B.currentValueTotalHeight)}q.exports=function(O){var B=O._context.staticPlot,z=O._fullLayout,U=function m(k,O){for(var B=k[r.name],z=[],U=0;U<B.length;U++){var H=B[U];!H.visible||(H._gd=O,z.push(H))}return z}(z,O),H=z._infolayer.selectAll("g."+r.containerClassName).data(U.length>0?[0]:[]);function J(Q){Q._commandObserver&&(Q._commandObserver.remove(),delete Q._commandObserver),g.autoMargin(O,f(Q))}if(H.enter().append("g").classed(r.containerClassName,!0).style("cursor",B?null:"ew-resize"),H.exit().each(function(){A.select(this).selectAll("g."+r.groupClassName).each(J)}).remove(),0!==U.length){var nt=H.selectAll("g."+r.groupClassName).data(U,h);nt.enter().append("g").classed(r.groupClassName,!0),nt.exit().each(J).remove();for(var it=0;it<U.length;it++)w(O,U[it]);nt.each(function(Q){var j=A.select(this);(function n(k){var O=k._dims;O.labelSteps=[];for(var B=k._stepCount,z=0;z<B;z+=O.labelStride)O.labelSteps.push({fraction:z/(B-1),step:k._visibleSteps[z]})})(Q),g.manageCommandObserver(O,Q,Q._visibleSteps,function(Z){var G=j.data()[0];G.active!==Z.index&&(G._dragging||x(O,j,G,Z.index,!1,!0))}),function p(k,O,B){(B.steps[B.active]||{}).visible||(B.active=B._visibleSteps[0]._index),O.call(o,B).call(N,B).call(b,B).call(T,B).call(D,k,B).call(v,k,B);var z=B._dims;P.setTranslate(O,z.lx+B.pad.l,z.ly+B.pad.t),O.call(E,B,!1),O.call(o,B)}(O,A.select(this),Q)})}}},23243:function(q,W,t){"use strict";var A=t(98292);q.exports={moduleType:"component",name:A.name,layoutAttributes:t(75067),supplyLayoutDefaults:t(12343),draw:t(44504)}},92998:function(q,W,t){"use strict";var A=t(39898),g=t(92770),i=t(74875),P=t(73972),C=t(71828),u=C.strTranslate,y=t(91424),e=t(7901),r=t(63893),l=t(37822),a=t(18783).OPPOSITE_SIDE,s=/ [XY][0-9]* /;q.exports={draw:function c(f,m,h){var O,w=h.propContainer,p=h.propName,o=h.placeholder,v=h.traceIndex,M=h.avoid||{},b=h.attributes,L=h.transform,x=h.containerGroup,S=f._fullLayout,T=1,n=!1,E=w.title,d=(E&&E.text?E.text:"").trim(),F=E&&E.font?E.font:{},D=F.family,N=F.size,k=F.color;"title.text"===p?O="titleText":-1!==p.indexOf("axis")?O="axisTitleText":p.indexOf(!0)&&(O="colorbarTitleText");var B=f._context.edits[O];""===d?T=0:d.replace(s," % ")===o.replace(s," % ")&&(T=.2,n=!0,B||(d="")),h._meta?d=C.templateString(d,h._meta):S._meta&&(d=C.templateString(d,S._meta));var U,z=d||B;x||(x=C.ensureSingle(S._infolayer,"g","g-"+m),U=S._hColorbarMoveTitle);var H=x.selectAll("text").data(z?[0]:[]);if(H.enter().append("text"),H.text(d).attr("class",m),H.exit().remove(),!z)return x;function J(Q){C.syncOrAsync([nt,it],Q)}function nt(Q){var j;return!L&&U&&(L={}),L?(j="",L.rotate&&(j+="rotate("+[L.rotate,b.x,b.y]+")"),(L.offset||U)&&(j+=u(0,(L.offset||0)-(U||0)))):j=null,Q.attr("transform",j),Q.style({"font-family":D,"font-size":A.round(N,2)+"px",fill:e.rgb(k),opacity:T*e.opacity(k),"font-weight":i.fontWeight}).attr(b).call(r.convertToTspans,f),i.previousPromises(f)}function it(Q){var j=A.select(Q.node().parentNode);if(M&&M.selection&&M.side&&d){j.attr("transform",null);var Z=a[M.side],G="left"===M.side||"top"===M.side?-1:1,K=g(M.pad)?M.pad:2,at=y.bBox(j.node()),$={t:0,b:0,l:0,r:0},X=f._fullLayout._reservedMargin;for(var rt in X)for(var et in X[rt])$[et]=Math.max($[et],X[rt][et]);var bt=M.maxShift||G*({left:$.l,top:$.t,right:S.width-$.r,bottom:S.height-$.b}[M.side]-at[M.side]),gt=0;if(bt<0)gt=bt;else{var Lt=M.offsetLeft||0,It=M.offsetTop||0;at.left-=Lt,at.right-=Lt,at.top-=It,at.bottom-=It,M.selection.each(function(){var xt=y.bBox(this);C.bBoxIntersect(at,xt,K)&&(gt=Math.max(gt,G*(xt[M.side]-at[Z])+K))}),gt=Math.min(bt,gt),w._titleScoot=Math.abs(gt)}if(gt>0||bt<0){var Mt={left:[-gt,0],right:[gt,0],top:[0,-gt],bottom:[0,gt]}[M.side];j.attr("transform",u(Mt[0],Mt[1]))}}}return H.call(J),B&&(d?H.on(".opacity",null):function ut(){T=0,n=!0,H.text(o).on("mouseover.opacity",function(){A.select(this).transition().duration(l.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){A.select(this).transition().duration(l.HIDE_PLACEHOLDER).style("opacity",0)})}(),H.call(r.makeEditable,{gd:f}).on("edit",function(Q){void 0!==v?P.call("_guiRestyle",f,p,Q,v):P.call("_guiRelayout",f,p,Q)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(J)}).on("input",function(Q){this.text(Q||" ").call(r.positionText,b.x,b.y)})),H.classed("js-placeholder",n),x}}},7163:function(q,W,t){"use strict";var A=t(41940),g=t(22399),i=t(1426).extendFlat,P=t(30962).overrideAll,C=t(35025),u=t(44467).templatedArray,y=u("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});q.exports=P(u("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:y,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:i(C({editType:"arraydraw"}),{}),font:A({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:g.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},75909:function(q){"use strict";q.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},64897:function(q,W,t){"use strict";var A=t(71828),g=t(85501),i=t(7163),C=t(75909).name,u=i.buttons;function y(r,l,a){function s(m,h){return A.coerce(r,l,i,m,h)}!s("visible",g(r,l,{name:"buttons",handleItemDefaults:e}).length>0)||(s("active"),s("direction"),s("type"),s("showactive"),s("x"),s("y"),A.noneOrAll(r,l,["x","y"]),s("xanchor"),s("yanchor"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),A.coerceFont(s,"font",a.font),s("bgcolor",a.paper_bgcolor),s("bordercolor"),s("borderwidth"))}function e(r,l){function a(c,f){return A.coerce(r,l,u,c,f)}a("visible","skip"===r.method||Array.isArray(r.args))&&(a("method"),a("args"),a("args2"),a("label"),a("execute"))}q.exports=function(l,a){g(l,a,{name:C,handleItemDefaults:y})}},13689:function(q,W,t){"use strict";var A=t(39898),g=t(74875),i=t(7901),P=t(91424),C=t(71828),u=t(63893),y=t(44467).arrayEditor,e=t(18783).LINE_SPACING,r=t(75909),l=t(25849);function a(d){return d._index}function c(d,F){return+d.attr(r.menuIndexAttrName)===F._index}function f(d,F,D,N,k,O,B,z){F.active=B,y(d.layout,r.name,F).applyUpdate("active",B),"buttons"===F.type?h(d,N,null,null,F):"dropdown"===F.type&&(k.attr(r.menuIndexAttrName,"-1"),m(d,N,k,O,F),z||h(d,N,k,O,F))}function m(d,F,D,N,k){var O=C.ensureSingle(F,"g",r.headerClassName,function(it){it.style("pointer-events","all")}),B=k._dims,H={y:k.pad.t,yPad:0,x:k.pad.l,xPad:0,index:0},J={width:B.headerWidth,height:B.headerHeight};O.call(o,k,k.buttons[k.active]||r.blankHeaderOpts,d).call(n,k,H,J),C.ensureSingle(F,"text",r.headerArrowClassName,function(it){it.attr("text-anchor","end").call(P.font,k.font).text(r.arrowSymbol[k.direction])}).attr({x:B.headerWidth-r.arrowOffsetX+k.pad.l,y:B.headerHeight/2+r.textOffsetY+k.pad.t}),O.on("click",function(){D.call(E,String(c(D,k)?-1:k._index)),h(d,F,D,N,k)}),O.on("mouseover",function(){O.call(L)}),O.on("mouseout",function(){O.call(x,k)}),P.setTranslate(F,B.lx,B.ly)}function h(d,F,D,N,k){D||(D=F).attr("pointer-events","all");var O=function s(d){return-1==+d.attr(r.menuIndexAttrName)}(D)&&"buttons"!==k.type?[]:k.buttons,B="dropdown"===k.type?r.dropdownButtonClassName:r.buttonClassName,z=D.selectAll("g."+B).data(C.filterVisible(O)),U=z.enter().append("g").classed(B,!0),H=z.exit();"dropdown"===k.type?(U.attr("opacity","0").transition().attr("opacity","1"),H.transition().attr("opacity","0").remove()):H.remove();var J=0,nt=0,it=k._dims,ut=-1!==["up","down"].indexOf(k.direction);"dropdown"===k.type&&(ut?nt=it.headerHeight+r.gapButtonHeader:J=it.headerWidth+r.gapButtonHeader),"dropdown"===k.type&&"up"===k.direction&&(nt=-r.gapButtonHeader+r.gapButton-it.openHeight),"dropdown"===k.type&&"left"===k.direction&&(J=-r.gapButtonHeader+r.gapButton-it.openWidth);var Q={x:it.lx+J+k.pad.l,y:it.ly+nt+k.pad.t,yPad:r.gapButton,xPad:r.gapButton,index:0},j={l:Q.x+k.borderwidth,t:Q.y+k.borderwidth};z.each(function(Z,G){var K=A.select(this);K.call(o,k,Z,d).call(n,k,Q),K.on("click",function(){A.event.defaultPrevented||(Z.execute&&(Z.args2&&k.active===G?(f(d,k,0,F,D,N,-1),g.executeAPICommand(d,Z.method,Z.args2)):(f(d,k,0,F,D,N,G),g.executeAPICommand(d,Z.method,Z.args))),d.emit("plotly_buttonclicked",{menu:k,button:Z,active:k.active}))}),K.on("mouseover",function(){K.call(L)}),K.on("mouseout",function(){K.call(x,k),z.call(b,k)})}),z.call(b,k),ut?(j.w=Math.max(it.openWidth,it.headerWidth),j.h=Q.y-j.t):(j.w=Q.x-j.l,j.h=Math.max(it.openHeight,it.headerHeight)),j.direction=k.direction,N&&(z.size()?function w(d,F,D,N,k,O){var J,nt,it,B=k.direction,U=k._dims,H=k.active;if("up"===B||"down"===B)for(nt=0,it=0;it<H;it++)nt+=U.heights[it]+r.gapButton;else for(J=0,it=0;it<H;it++)J+=U.widths[it]+r.gapButton;N.enable(O,J,nt),N.hbar&&N.hbar.attr("opacity","0").transition().attr("opacity","1"),N.vbar&&N.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,N,k,j):function p(d){var F=!!d.hbar,D=!!d.vbar;F&&d.hbar.transition().attr("opacity","0").each("end",function(){F=!1,D||d.disable()}),D&&d.vbar.transition().attr("opacity","0").each("end",function(){D=!1,F||d.disable()})}(N))}function o(d,F,D,N){d.call(v,F).call(M,F,D,N)}function v(d,F){C.ensureSingle(d,"rect",r.itemRectClassName,function(N){N.attr({rx:r.rx,ry:r.ry,"shape-rendering":"crispEdges"})}).call(i.stroke,F.bordercolor).call(i.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px")}function M(d,F,D,N){var k=C.ensureSingle(d,"text",r.itemTextClassName,function(z){z.attr({"text-anchor":"start","data-notex":1})}),O=D.label,B=N._fullLayout._meta;B&&(O=C.templateString(O,B)),k.call(P.font,F.font).text(O).call(u.convertToTspans,N)}function b(d,F){var D=F.active;d.each(function(N,k){var O=A.select(this);k===D&&F.showactive&&O.select("rect."+r.itemRectClassName).call(i.fill,r.activeColor)})}function L(d){d.select("rect."+r.itemRectClassName).call(i.fill,r.hoverColor)}function x(d,F){d.select("rect."+r.itemRectClassName).call(i.fill,F.bgcolor)}function S(d,F){var D=F._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},N=P.tester.selectAll("g."+r.dropdownButtonClassName).data(C.filterVisible(F.buttons));N.enter().append("g").classed(r.dropdownButtonClassName,!0);var k=-1!==["up","down"].indexOf(F.direction);N.each(function(J,nt){var it=A.select(this);it.call(o,F,J,d);var ut=it.select("."+r.itemTextClassName),Q=ut.node()&&P.bBox(ut.node()).width,j=Math.max(Q+r.textPadX,r.minWidth),Z=F.font.size*e,G=u.lineCount(ut),K=Math.max(Z*G,r.minHeight)+r.textOffsetY;K=Math.ceil(K),j=Math.ceil(j),D.widths[nt]=j,D.heights[nt]=K,D.height1=Math.max(D.height1,K),D.width1=Math.max(D.width1,j),k?(D.totalWidth=Math.max(D.totalWidth,j),D.openWidth=D.totalWidth,D.totalHeight+=K+r.gapButton,D.openHeight+=K+r.gapButton):(D.totalWidth+=j+r.gapButton,D.openWidth+=j+r.gapButton,D.totalHeight=Math.max(D.totalHeight,K),D.openHeight=D.totalHeight)}),k?D.totalHeight-=r.gapButton:D.totalWidth-=r.gapButton,D.headerWidth=D.width1+r.arrowPadX,D.headerHeight=D.height1,"dropdown"===F.type&&(k?(D.width1+=r.arrowPadX,D.totalHeight=D.height1):D.totalWidth=D.width1,D.totalWidth+=r.arrowPadX),N.remove();var O=D.totalWidth+F.pad.l+F.pad.r,B=D.totalHeight+F.pad.t+F.pad.b,z=d._fullLayout._size;D.lx=z.l+z.w*F.x,D.ly=z.t+z.h*(1-F.y);var U="left";C.isRightAnchor(F)&&(D.lx-=O,U="right"),C.isCenterAnchor(F)&&(D.lx-=O/2,U="center");var H="top";C.isBottomAnchor(F)&&(D.ly-=B,H="bottom"),C.isMiddleAnchor(F)&&(D.ly-=B/2,H="middle"),D.totalWidth=Math.ceil(D.totalWidth),D.totalHeight=Math.ceil(D.totalHeight),D.lx=Math.round(D.lx),D.ly=Math.round(D.ly),g.autoMargin(d,T(F),{x:F.x,y:F.y,l:O*({right:1,center:.5}[U]||0),r:O*({left:1,center:.5}[U]||0),b:B*({top:1,middle:.5}[H]||0),t:B*({bottom:1,middle:.5}[H]||0)})}function T(d){return r.autoMarginIdRoot+d._index}function n(d,F,D,N){N=N||{};var k=d.select("."+r.itemRectClassName),O=d.select("."+r.itemTextClassName),B=F.borderwidth,z=D.index,U=F._dims;P.setTranslate(d,B+D.x,B+D.y);var H=-1!==["up","down"].indexOf(F.direction),J=N.height||(H?U.heights[z]:U.height1);k.attr({x:0,y:0,width:N.width||(H?U.width1:U.widths[z]),height:J});var nt=F.font.size*e,it=u.lineCount(O);u.positionText(O,r.textOffsetX,J/2-(it-1)*nt/2+r.textOffsetY),H?D.y+=U.heights[z]+D.yPad:D.x+=U.widths[z]+D.xPad,D.index++}function E(d,F){d.attr(r.menuIndexAttrName,F||"-1").selectAll("g."+r.dropdownButtonClassName).remove()}q.exports=function(F){var D=F._fullLayout,N=C.filterVisible(D[r.name]);function k(it){g.autoMargin(F,T(it))}var O=D._menulayer.selectAll("g."+r.containerClassName).data(N.length>0?[0]:[]);if(O.enter().append("g").classed(r.containerClassName,!0).style("cursor","pointer"),O.exit().each(function(){A.select(this).selectAll("g."+r.headerGroupClassName).each(k)}).remove(),0!==N.length){var B=O.selectAll("g."+r.headerGroupClassName).data(N,a);B.enter().append("g").classed(r.headerGroupClassName,!0);for(var z=C.ensureSingle(O,"g",r.dropdownButtonGroupClassName,function(it){it.style("pointer-events","all")}),U=0;U<N.length;U++)S(F,N[U]);var nt=new l(F,z,"updatemenus"+D._uid);B.enter().size()&&(z.node().parentNode.appendChild(z.node()),z.call(E)),B.exit().each(function(it){z.call(E),k(it)}).remove(),B.each(function(it){var ut=A.select(this),Q="dropdown"===it.type?z:null;g.manageCommandObserver(F,it,it.buttons,function(j){f(F,it,0,ut,Q,nt,j.index,!0)}),"dropdown"===it.type?(m(F,ut,z,nt,it),c(z,it)&&h(F,ut,z,nt,it)):h(F,ut,null,null,it)})}}},20763:function(q,W,t){"use strict";var A=t(75909);q.exports={moduleType:"component",name:A.name,layoutAttributes:t(7163),supplyLayoutDefaults:t(64897),draw:t(13689)}},25849:function(q,W,t){"use strict";q.exports=C;var A=t(39898),g=t(7901),i=t(91424),P=t(71828);function C(u,y,e){this.gd=u,this.container=y,this.id=e,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}C.barWidth=2,C.barLength=20,C.barRadius=2,C.barPad=1,C.barColor="#808BA4",C.prototype.enable=function(y,e,r){var l=this.gd._fullLayout,a=l.width,s=l.height;this.position=y;var x,S,T,n,c=this.position.l,f=this.position.w,m=this.position.t,h=this.position.h,w=this.position.direction,p="down"===w,o="left"===w,M="up"===w,b=f,L=h;!p&&!o&&!("right"===w)&&!M&&(this.position.direction="down",p=!0),p||M?(S=(x=c)+b,p?(T=m,L=(n=Math.min(T+L,s))-T):L=(n=m+L)-(T=Math.max(n-L,0))):(n=(T=m)+L,o?b=(S=c+b)-(x=Math.max(S-b,0)):(x=c,b=(S=Math.min(x+b,a))-x)),this._box={l:x,t:T,w:b,h:L};var d=f>b,F=C.barLength+2*C.barPad,D=C.barWidth+2*C.barPad,N=c,k=m+h;k+D>s&&(k=s-D);var O=this.container.selectAll("rect.scrollbar-horizontal").data(d?[0]:[]);O.exit().on(".drag",null).remove(),O.enter().append("rect").classed("scrollbar-horizontal",!0).call(g.fill,C.barColor),d?(this.hbar=O.attr({rx:C.barRadius,ry:C.barRadius,x:N,y:k,width:F,height:D}),this._hbarXMin=N+F/2,this._hbarTranslateMax=b-F):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var B=h>L,z=C.barWidth+2*C.barPad,U=C.barLength+2*C.barPad,H=c+f,J=m;H+z>a&&(H=a-z);var nt=this.container.selectAll("rect.scrollbar-vertical").data(B?[0]:[]);nt.exit().on(".drag",null).remove(),nt.enter().append("rect").classed("scrollbar-vertical",!0).call(g.fill,C.barColor),B?(this.vbar=nt.attr({rx:C.barRadius,ry:C.barRadius,x:H,y:J,width:z,height:U}),this._vbarYMin=J+U/2,this._vbarTranslateMax=L-U):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var it=this.id,ut=x-.5,Q=B?S+z+.5:S+.5,j=T-.5,Z=d?n+D+.5:n+.5,G=l._topdefs.selectAll("#"+it).data(d||B?[0]:[]);if(G.exit().remove(),G.enter().append("clipPath").attr("id",it).append("rect"),d||B?(this._clipRect=G.select("rect").attr({x:Math.floor(ut),y:Math.floor(j),width:Math.ceil(Q)-Math.floor(ut),height:Math.ceil(Z)-Math.floor(j)}),this.container.call(i.setClipUrl,it,this.gd),this.bg.attr({x:c,y:m,width:f,height:h})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(i.setClipUrl,null),delete this._clipRect),d||B){var K=A.behavior.drag().on("dragstart",function(){A.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(K);var at=A.behavior.drag().on("dragstart",function(){A.event.sourceEvent.preventDefault(),A.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));d&&this.hbar.on(".drag",null).call(at),B&&this.vbar.on(".drag",null).call(at)}this.setTranslate(e,r)},C.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(i.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},C.prototype._onBoxDrag=function(){var y=this.translateX,e=this.translateY;this.hbar&&(y-=A.event.dx),this.vbar&&(e-=A.event.dy),this.setTranslate(y,e)},C.prototype._onBoxWheel=function(){var y=this.translateX,e=this.translateY;this.hbar&&(y+=A.event.deltaY),this.vbar&&(e+=A.event.deltaY),this.setTranslate(y,e)},C.prototype._onBarDrag=function(){var y=this.translateX,e=this.translateY;if(this.hbar){var r=y+this._hbarXMin,l=r+this._hbarTranslateMax;y=(P.constrain(A.event.x,r,l)-r)/(l-r)*(this.position.w-this._box.w)}if(this.vbar){var f=e+this._vbarYMin,m=f+this._vbarTranslateMax;e=(P.constrain(A.event.y,f,m)-f)/(m-f)*(this.position.h-this._box.h)}this.setTranslate(y,e)},C.prototype.setTranslate=function(y,e){var r=this.position.w-this._box.w,l=this.position.h-this._box.h;y=P.constrain(y||0,0,r),e=P.constrain(e||0,0,l),this.translateX=y,this.translateY=e,this.container.call(i.setTranslate,this._box.l-this.position.l-y,this._box.t-this.position.t-e),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+y-.5),y:Math.floor(this.position.t+e-.5)}),this.hbar&&this.hbar.call(i.setTranslate,y+y/r*this._hbarTranslateMax,e),this.vbar&&this.vbar.call(i.setTranslate,y,e+e/l*this._vbarTranslateMax)}},18783:function(q){"use strict";q.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},24695:function(q){"use strict";q.exports={axisRefDescription:function(W,t,A){return["If set to a",W,"axis id (e.g. *"+W+"* or","*"+W+"2*), the `"+W+"` position refers to a",W,"coordinate. If set to *paper*, the `"+W+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+A+"). If set to a",W,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+W+"2 domain* refers to the domain of the second",W," axis and a",W,"position of 0.5 refers to the","point between the",t,"and the",A,"of the domain of the","second",W,"axis."].join(" ")}}},22372:function(q){"use strict";q.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},31562:function(q){"use strict";q.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},74808:function(q){"use strict";q.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},29659:function(q){"use strict";q.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87381:function(q){"use strict";q.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},37822:function(q){"use strict";q.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},50606:function(q){"use strict";q.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},32396:function(q,W){"use strict";W.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],W.STYLE=W.CSS_DECLARATIONS.map(function(t){return t.join(": ")+"; "}).join("")},77922:function(q,W){"use strict";W.xmlns="http://www.w3.org/2000/xmlns/",W.svg="http://www.w3.org/2000/svg",W.xlink="http://www.w3.org/1999/xlink",W.svgAttrs={xmlns:W.svg,"xmlns:xlink":W.xlink}},8729:function(q,W,t){"use strict";W.version=t(11506).version,t(7417),t(98847);for(var A=t(73972),g=W.register=A.register,i=t(10641),P=Object.keys(i),C=0;C<P.length;C++){var u=P[C];"_"!==u.charAt(0)&&(W[u]=i[u]),g({moduleType:"apiMethod",name:u,fn:i[u]})}g(t(67368)),g([t(32745),t(2468),t(47322),t(89853),t(68804),t(20763),t(23243),t(13137),t(97218),t(83312),t(37369),t(21081),t(12311),t(2199),t(30211),t(64168)]),g([t(92177),t(37815)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(g(window.PlotlyLocales),delete window.PlotlyLocales),W.Icons=t(24255);var y=t(30211),e=t(74875);W.Plots={resize:e.resize,graphJson:e.graphJson,sendDataToCloud:e.sendDataToCloud},W.Fx={hover:y.hover,unhover:y.unhover,loneHover:y.loneHover,loneUnhover:y.loneUnhover},W.Snapshot=t(44511),W.PlotSchema=t(86281)},24255:function(q){"use strict";q.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},99863:function(q,W){"use strict";W.isLeftAnchor=function(A){return"left"===A.xanchor||"auto"===A.xanchor&&A.x<=.3333333333333333},W.isCenterAnchor=function(A){return"center"===A.xanchor||"auto"===A.xanchor&&A.x>.3333333333333333&&A.x<.6666666666666666},W.isRightAnchor=function(A){return"right"===A.xanchor||"auto"===A.xanchor&&A.x>=.6666666666666666},W.isTopAnchor=function(A){return"top"===A.yanchor||"auto"===A.yanchor&&A.y>=.6666666666666666},W.isMiddleAnchor=function(A){return"middle"===A.yanchor||"auto"===A.yanchor&&A.y>.3333333333333333&&A.y<.6666666666666666},W.isBottomAnchor=function(A){return"bottom"===A.yanchor||"auto"===A.yanchor&&A.y<=.3333333333333333}},26348:function(q,W,t){"use strict";var A=t(64872),g=A.mod,i=A.modHalf,P=Math.PI,C=2*P;function e(w){return Math.abs(w[1]-w[0])>C-1e-14}function r(w,p){return i(p-w,C)}function a(w,p){if(e(p))return!0;var o,v;p[0]<p[1]?(o=p[0],v=p[1]):(o=p[1],v=p[0]),(o=g(o,C))>(v=g(v,C))&&(v+=C);var M=g(w,C),b=M+C;return M>=o&&M<=v||b>=o&&b<=v}function c(w,p,o,v,M,b,L){M=M||0,b=b||0;var S,T,n,E,d,x=e([o,v]);function F(O,B){return[O*Math.cos(B)+M,b-O*Math.sin(B)]}x?(S=0,T=P,n=C):o<v?(S=o,n=v):(S=v,n=o),w<p?(E=w,d=p):(E=p,d=w);var k,D=Math.abs(n-S)<=P?0:1;function N(O,B,z){return"A"+[O,O]+" "+[0,D,z]+" "+F(O,B)}return x?k=null===E?"M"+F(d,S)+N(d,T,0)+N(d,n,0)+"Z":"M"+F(E,S)+N(E,T,0)+N(E,n,0)+"ZM"+F(d,S)+N(d,T,1)+N(d,n,1)+"Z":null===E?(k="M"+F(d,S)+N(d,n,0),L&&(k+="L0,0Z")):k="M"+F(E,S)+"L"+F(d,S)+N(d,n,0)+"L"+F(E,n)+N(E,S,1)+"Z",k}q.exports={deg2rad:function u(w){return w/180*P},rad2deg:function y(w){return w/P*180},angleDelta:r,angleDist:function l(w,p){return Math.abs(r(w,p))},isFullCircle:e,isAngleInsideSector:a,isPtInsideSector:function s(w,p,o,v){return!!a(p,v)&&(o[0]<o[1]?(M=o[0],b=o[1]):(M=o[1],b=o[0]),w>=M&&w<=b);var M,b},pathArc:function f(w,p,o,v,M){return c(null,w,p,o,v,M,0)},pathSector:function m(w,p,o,v,M){return c(null,w,p,o,v,M,1)},pathAnnulus:function h(w,p,o,v,M,b){return c(w,p,o,v,M,b,1)}}},73627:function(q,W){"use strict";var t=Array.isArray,A=ArrayBuffer,g=DataView;function i(y){return A.isView(y)&&!(y instanceof g)}function P(y){return t(y)||i(y)}function u(y,e,r){if(P(y)){if(P(y[0])){for(var l=r,a=0;a<y.length;a++)l=e(l,y[a].length);return l}return y.length}return 0}W.isTypedArray=i,W.isArrayOrTypedArray=P,W.isArray1D=function C(y){return!P(y[0])},W.ensureArray=function(y,e){return t(y)||(y=[]),y.length=e,y},W.concat=function(){var l,a,s,c,f,m,h,w,y=[],e=!0,r=0;for(s=0;s<arguments.length;s++)(m=(c=arguments[s]).length)&&(a?y.push(c):(a=c,f=m),t(c)?l=!1:(e=!1,r?l!==c.constructor&&(l=!1):l=c.constructor),r+=m);if(!r)return[];if(!y.length)return a;if(e)return a.concat.apply(a,y);if(l){for((h=new l(r)).set(a),s=0;s<y.length;s++)h.set(c=y[s],f),f+=c.length;return h}for(h=new Array(r),w=0;w<a.length;w++)h[w]=a[w];for(s=0;s<y.length;s++){for(c=y[s],w=0;w<c.length;w++)h[f+w]=c[w];f+=w}return h},W.maxRowLength=function(y){return u(y,Math.max,0)},W.minRowLength=function(y){return u(y,Math.min,1/0)}},95218:function(q,W,t){"use strict";var A=t(92770),g=t(50606).BADNUM,i=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;q.exports=function(C){return"string"==typeof C&&(C=C.replace(i,"")),A(C)?Number(C):g}},33306:function(q){"use strict";q.exports=function(t){var A=t._fullLayout;A._glcanvas&&A._glcanvas.size()&&A._glcanvas.each(function(g){g.regl&&g.regl.clear({color:!0,depth:!0})})}},86367:function(q){"use strict";q.exports=function(t){t._responsiveChartHandler&&(window.removeEventListener("resize",t._responsiveChartHandler),delete t._responsiveChartHandler)}},96554:function(q,W,t){"use strict";var A=t(92770),g=t(84267),i=t(9012),P=t(63282),C=t(7901),u=t(37822).DESELECTDIM,y=t(65487),e=t(30587).counter,r=t(64872).modHalf,l=t(73627).isArrayOrTypedArray;function a(s,c){var f=W.valObjectMeta[c.valType];if(c.arrayOk&&l(s))return!0;if(f.validateFunction)return f.validateFunction(s,c);var m={},h=m;return f.coerceFunction(s,{set:function(p){h=p}},m,c),h!==m}W.valObjectMeta={data_array:{coerceFunction:function(s,c,f){l(s)?c.set(s):void 0!==f&&c.set(f)}},enumerated:{coerceFunction:function(s,c,f,m){m.coerceNumber&&(s=+s),-1===m.values.indexOf(s)?c.set(f):c.set(s)},validateFunction:function(s,c){c.coerceNumber&&(s=+s);for(var f=c.values,m=0;m<f.length;m++){var h=String(f[m]);if("/"===h.charAt(0)&&"/"===h.charAt(h.length-1)){if(new RegExp(h.substr(1,h.length-2)).test(s))return!0}else if(s===f[m])return!0}return!1}},boolean:{coerceFunction:function(s,c,f){c.set(!0===s||!1===s?s:f)}},number:{coerceFunction:function(s,c,f,m){!A(s)||void 0!==m.min&&s<m.min||void 0!==m.max&&s>m.max?c.set(f):c.set(+s)}},integer:{coerceFunction:function(s,c,f,m){s%1||!A(s)||void 0!==m.min&&s<m.min||void 0!==m.max&&s>m.max?c.set(f):c.set(+s)}},string:{coerceFunction:function(s,c,f,m){c.set("string"!=typeof s?!0!==m.strict&&"number"==typeof s?String(s):f:m.noBlank&&!s?f:s)}},color:{coerceFunction:function(s,c,f){g(s).isValid()?c.set(s):c.set(f)}},colorlist:{coerceFunction:function(s,c,f){Array.isArray(s)&&s.length&&s.every(function m(h){return g(h).isValid()})?c.set(s):c.set(f)}},colorscale:{coerceFunction:function(s,c,f){c.set(P.get(s,f))}},angle:{coerceFunction:function(s,c,f){"auto"===s?c.set("auto"):A(s)?c.set(r(+s,360)):c.set(f)}},subplotid:{coerceFunction:function(s,c,f,m){var h=m.regex||e(f);"string"==typeof s&&h.test(s)?c.set(s):c.set(f)},validateFunction:function(s,c){var f=c.dflt;return s===f||"string"==typeof s&&!!e(f).test(s)}},flaglist:{coerceFunction:function(s,c,f,m){if(-1===(m.extras||[]).indexOf(s))if("string"==typeof s){for(var h=s.split("+"),w=0;w<h.length;){var p=h[w];-1===m.flags.indexOf(p)||h.indexOf(p)<w?h.splice(w,1):w++}c.set(h.length?h.join("+"):f)}else c.set(f);else c.set(s)}},any:{coerceFunction:function(s,c,f){c.set(void 0===s?f:s)}},info_array:{coerceFunction:function(s,c,f,m){function h(F,D,N){var k;return void 0===N&&(N=D.dflt),W.valObjectMeta[D.valType].coerceFunction(F,{set:function(B){k=B}},N,D),k}var w=2===m.dimensions||"1-2"===m.dimensions&&Array.isArray(s)&&Array.isArray(s[0]);if(Array.isArray(s)){var x,S,T,E,d,p=m.items,o=[],v=Array.isArray(p),M=v&&w&&Array.isArray(p[0]),b=w&&v&&!M,L=v&&!b?p.length:s.length;if(f=Array.isArray(f)?f:[],w)for(x=0;x<L;x++)for(o[x]=[],T=Array.isArray(s[x])?s[x]:[],E=b?p.length:v?p[x].length:T.length,S=0;S<E;S++)void 0!==(d=h(T[S],b?p[S]:v?p[x][S]:p,(f[x]||[])[S]))&&(o[x][S]=d);else for(x=0;x<L;x++)void 0!==(d=h(s[x],v?p[x]:p,f[x]))&&(o[x]=d);c.set(o)}else c.set(f)},validateFunction:function(s,c){if(!Array.isArray(s))return!1;var f=c.items,m=Array.isArray(f),h=2===c.dimensions;if(!c.freeLength&&s.length!==f.length)return!1;for(var w=0;w<s.length;w++)if(h){if(!Array.isArray(s[w])||!c.freeLength&&s[w].length!==f[w].length)return!1;for(var p=0;p<s[w].length;p++)if(!a(s[w][p],m?f[w][p]:f))return!1}else if(!a(s[w],m?f[w]:f))return!1;return!0}}},W.coerce=function(s,c,f,m,h){var w=y(f,m).get(),p=y(s,m),o=y(c,m),v=p.get(),M=c._template;if(void 0===v&&M&&(v=y(M,m).get(),M=0),void 0===h&&(h=w.dflt),w.arrayOk&&l(v))return o.set(v),v;var b=W.valObjectMeta[w.valType].coerceFunction;b(v,o,h,w);var L=o.get();return M&&L===h&&!a(v,w)&&(b(v=y(M,m).get(),o,h,w),L=o.get()),L},W.coerce2=function(s,c,f,m,h){var w=y(s,m),p=W.coerce(s,c,f,m,h);return null!=w.get()&&p},W.coerceFont=function(s,c,f){var m={};return m.family=s(c+".family",(f=f||{}).family),m.size=s(c+".size",f.size),m.color=s(c+".color",f.color),m},W.coercePattern=function(s,c,f,m){if(s(c+".shape")){s(c+".solidity"),s(c+".size");var p="overlay"===s(c+".fillmode");if(!m){var o=s(c+".bgcolor",p?f:void 0);s(c+".fgcolor",p?C.contrast(o):f)}s(c+".fgopacity",p?.5:1)}},W.coerceHoverinfo=function(s,c,f){var p,m=c._module.attributes,h=m.hoverinfo?m:i,w=h.hoverinfo;if(1===f._dataLength){var o="all"===w.dflt?w.flags.slice():w.dflt.split("+");o.splice(o.indexOf("name"),1),p=o.join("+")}return W.coerce(s,c,h,"hoverinfo",p)},W.coerceSelectionMarkerOpacity=function(s,c){if(s.marker){var m,h,f=s.marker.opacity;void 0!==f&&(!l(f)&&!s.selected&&!s.unselected&&(m=f,h=u*f),c("selected.marker.opacity",m),c("unselected.marker.opacity",h))}},W.validate=a},41631:function(q,W,t){"use strict";var o,v,A=t(84096).i$,g=t(92770),i=t(47769),P=t(64872).mod,C=t(50606),u=C.BADNUM,y=C.ONEDAY,e=C.ONEHOUR,r=C.ONEMIN,l=C.ONESEC,a=C.EPOCHJD,s=t(73972),c=t(84096).g0,f=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,m=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,h=(new Date).getFullYear()-70;function w(k){return k&&s.componentsRegistry.calendars&&"string"==typeof k&&"gregorian"!==k}function M(k,O){return String(k+Math.pow(10,O)).substr(1)}W.dateTick0=function(k,O){var B=function p(k,O){return w(k)?O?s.getComponentMethod("calendars","CANONICAL_SUNDAY")[k]:s.getComponentMethod("calendars","CANONICAL_TICK")[k]:O?"2000-01-02":"2000-01-01"}(k,!!O);if(O<2)return B;var z=W.dateTime2ms(B,k);return W.ms2DateTime(z+=y*(O-1),0,k)},W.dfltRange=function(k){return w(k)?s.getComponentMethod("calendars","DFLTRANGE")[k]:["2000-01-01","2001-01-01"]},W.isJSDate=function(k){return"object"==typeof k&&null!==k&&"function"==typeof k.getTime},W.dateTime2ms=function(k,O){if(W.isJSDate(k)){var B=k.getTimezoneOffset()*r,z=(k.getUTCMinutes()-k.getMinutes())*r+(k.getUTCSeconds()-k.getSeconds())*l+(k.getUTCMilliseconds()-k.getMilliseconds());if(z){var U=3*r;B=B-U/2+P(z-B+U/2,U)}return(k=Number(k)-B)>=o&&k<=v?k:u}if("string"!=typeof k&&"number"!=typeof k)return u;k=String(k);var H=w(O),J=k.charAt(0);H&&("G"===J||"g"===J)&&(k=k.substr(1),O="");var nt=H&&"chinese"===O.substr(0,7),it=k.match(nt?m:f);if(!it)return u;var ut=it[1],Q=it[3]||"1",j=Number(it[5]||1),Z=Number(it[7]||0),G=Number(it[9]||0),K=Number(it[11]||0);if(H){if(2===ut.length)return u;var at;ut=Number(ut);try{var $=s.getComponentMethod("calendars","getCal")(O);if(nt){var X="i"===Q.charAt(Q.length-1);Q=parseInt(Q,10),at=$.newDate(ut,$.toMonthIndex(ut,Q,X),j)}else at=$.newDate(ut,Number(Q),j)}catch(et){return u}return at?(at.toJD()-a)*y+Z*e+G*r+K*l:u}ut=2===ut.length?(Number(ut)+2e3-h)%100+h:Number(ut),Q-=1;var rt=new Date(Date.UTC(2e3,Q,j,Z,G));return rt.setUTCFullYear(ut),rt.getUTCMonth()!==Q||rt.getUTCDate()!==j?u:rt.getTime()+K*l},o=W.MIN_MS=W.dateTime2ms("-9999"),v=W.MAX_MS=W.dateTime2ms("9999-12-31 23:59:59.9999"),W.isDateTime=function(k,O){return W.dateTime2ms(k,O)!==u};var b=90*y,L=3*e,x=5*r;function S(k,O,B,z,U){if((O||B||z||U)&&(k+=" "+M(O,2)+":"+M(B,2),(z||U)&&(k+=":"+M(z,2),U))){for(var H=4;U%10==0;)H-=1,U/=10;k+="."+M(U,H)}return k}W.ms2DateTime=function(k,O,B){if("number"!=typeof k||!(k>=o&&k<=v))return u;O||(O=0);var H,J,nt,it,ut,Q,z=Math.floor(10*P(k+.05,1)),U=Math.round(k-z/10);if(w(B)){var j=Math.floor(U/y)+a,Z=Math.floor(P(k,y));try{H=s.getComponentMethod("calendars","getCal")(B).fromJD(j).formatDate("yyyy-mm-dd")}catch(G){H=c("G%Y-%m-%d")(new Date(U))}if("-"===H.charAt(0))for(;H.length<11;)H="-0"+H.substr(1);else for(;H.length<10;)H="0"+H;J=O<b?Math.floor(Z/e):0,nt=O<b?Math.floor(Z%e/r):0,it=O<L?Math.floor(Z%r/l):0,ut=O<x?Z%l*10+z:0}else Q=new Date(U),H=c("%Y-%m-%d")(Q),J=O<b?Q.getUTCHours():0,nt=O<b?Q.getUTCMinutes():0,it=O<L?Q.getUTCSeconds():0,ut=O<x?10*Q.getUTCMilliseconds()+z:0;return S(H,J,nt,it,ut)},W.ms2DateTimeLocal=function(k){if(!(k>=o+y&&k<=v-y))return u;var O=Math.floor(10*P(k+.05,1)),B=new Date(Math.round(k-O/10));return S(A("%Y-%m-%d")(B),B.getHours(),B.getMinutes(),B.getSeconds(),10*B.getUTCMilliseconds()+O)},W.cleanDate=function(k,O,B){if(k===u)return O;if(W.isJSDate(k)||"number"==typeof k&&isFinite(k)){if(w(B))return i.error("JS Dates and milliseconds are incompatible with world calendars",k),O;if(!(k=W.ms2DateTimeLocal(+k))&&void 0!==O)return O}else if(!W.isDateTime(k,B))return i.error("unrecognized date",k),O;return k};var T=/%\d?f/g,n=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function d(k,O,B,z){k=k.replace(T,function(H){var J=Math.min(+H.charAt(1)||6,6);return(O/1e3%1+2).toFixed(J).substr(2).replace(/0+$/,"")||"0"});var U=new Date(Math.floor(O+.05));if(k=k.replace(n,function(){return E[B("%q")(U)]}),w(z))try{k=s.getComponentMethod("calendars","worldCalFmt")(k,O,z)}catch(H){return"Invalid"}return B(k)(U)}var F=[59,59.9,59.99,59.999,59.9999];W.formatDate=function(k,O,B,z,U,H){if(U=w(U)&&U,!O)if("y"===B)O=H.year;else if("m"===B)O=H.month;else{if("d"!==B)return function D(k,O){var B=P(k+.05,y),z=M(Math.floor(B/e),2)+":"+M(P(Math.floor(B/r),60),2);if("M"!==O){g(O)||(O=0);var H=(100+Math.min(P(k/l,60),F[O])).toFixed(O).substr(1);O>0&&(H=H.replace(/0+$/,"").replace(/[\.]$/,"")),z+=":"+H}return z}(k,B)+"\n"+d(H.dayMonthYear,k,z,U);O=H.dayMonth+"\n"+H.year}return d(O,k,z,U)};var N=3*y;W.incrementMonth=function(k,O,B){B=w(B)&&B;var z=P(k,y);if(k=Math.round(k-z),B)try{var U=Math.round(k/y)+a,H=s.getComponentMethod("calendars","getCal")(B),J=H.fromJD(U);return O%12?H.add(J,O,"m"):H.add(J,O/12,"y"),(J.toJD()-a)*y+z}catch(it){i.error("invalid ms "+k+" in calendar "+B)}var nt=new Date(k+N);return nt.setUTCMonth(nt.getUTCMonth()+O)+z-N},W.findExactDates=function(k,O){for(var J,nt,B=0,z=0,U=0,H=0,it=w(O)&&s.getComponentMethod("calendars","getCal")(O),ut=0;ut<k.length;ut++)if(g(nt=k[ut])){if(!(nt%y))if(it)try{1===(J=it.fromJD(nt/y+a)).day()?1===J.month()?B++:z++:U++}catch(j){}else 1===(J=new Date(nt)).getUTCDate()?0===J.getUTCMonth()?B++:z++:U++}else H++;var Q=k.length-H;return{exactYears:B/Q,exactMonths:(z+=B)/Q,exactDays:(U+=z)/Q}}},24401:function(q,W,t){"use strict";var A=t(39898),g=t(47769),i=t(35657),P=t(79576);function y(h){var w=h&&h.parentNode;w&&w.removeChild(h)}function r(h,w,p){var o="plotly.js-style-"+h,v=document.getElementById(o);v||((v=document.createElement("style")).setAttribute("id",o),v.appendChild(document.createTextNode("")),document.head.appendChild(v));var M=v.sheet;M.insertRule?M.insertRule(w+"{"+p+"}",0):M.addRule?M.addRule(w,p,0):g.warn("addStyleRule failed")}function s(h){var w=window.getComputedStyle(h,null),p=w.getPropertyValue("-webkit-transform")||w.getPropertyValue("-moz-transform")||w.getPropertyValue("-ms-transform")||w.getPropertyValue("-o-transform")||w.getPropertyValue("transform");return"none"===p?null:p.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(o){return+o})}function c(h){for(var w=[];f(h);)w.push(h),h=h.parentNode;return w}function f(h){return h&&(h instanceof Element||h instanceof HTMLElement)}q.exports={getGraphDiv:function C(h){var w;if("string"==typeof h){if(null===(w=document.getElementById(h)))throw new Error("No DOM element with id '"+h+"' exists on the page.");return w}if(null==h)throw new Error("DOM element provided is null or undefined");return h},isPlotDiv:function u(h){var w=A.select(h);return w.node()instanceof HTMLElement&&w.size()&&w.classed("js-plotly-plot")},removeElement:y,addStyleRule:function e(h,w){r("global",h,w)},addRelatedStyleRule:r,deleteRelatedStyleRule:function l(h){var p=document.getElementById("plotly.js-style-"+h);p&&y(p)},getFullTransformMatrix:function a(h){var w=c(h),p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return w.forEach(function(o){var v=s(o);if(v){var M=i.convertCssMatrix(v);p=P.multiply(p,p,M)}}),p},getElementTransformMatrix:s,getElementAndAncestors:c,equalDomRects:function m(h,w){return h&&w&&h.top===w.top&&h.left===w.left&&h.right===w.right&&h.bottom===w.bottom}}},11086:function(q,W,t){"use strict";var A=t(15398).EventEmitter;q.exports={init:function(i){if(i._ev instanceof A)return i;var P=new A,C=new A;return i._ev=P,i._internalEv=C,i.on=P.on.bind(P),i.once=P.once.bind(P),i.removeListener=P.removeListener.bind(P),i.removeAllListeners=P.removeAllListeners.bind(P),i._internalOn=C.on.bind(C),i._internalOnce=C.once.bind(C),i._removeInternalListener=C.removeListener.bind(C),i._removeAllInternalListeners=C.removeAllListeners.bind(C),i.emit=function(u,y){"undefined"!=typeof jQuery&&jQuery(i).trigger(u,y),P.emit(u,y),C.emit(u,y)},i},triggerHandler:function(i,P,C){var u,y;"undefined"!=typeof jQuery&&(u=jQuery(i).triggerHandler(P,C));var e=i._ev;if(!e)return u;var a,r=e._events[P];if(!r)return u;function l(s){return s.listener?(e.removeListener(P,s.listener),s.fired?void 0:(s.fired=!0,s.listener.apply(e,[C]))):s.apply(e,[C])}for(r=Array.isArray(r)?r:[r],a=0;a<r.length-1;a++)l(r[a]);return y=l(r[a]),void 0!==u?u:y},purge:function(i){return delete i._ev,delete i.on,delete i.once,delete i.removeListener,delete i.removeAllListeners,delete i.emit,delete i._ev,delete i._internalEv,delete i._internalOn,delete i._internalOnce,delete i._removeInternalListener,delete i._removeAllInternalListeners,i}}},1426:function(q,W,t){"use strict";var A=t(41965),g=Array.isArray;function P(C,u,y,e){var a,s,c,f,m,h,r=C[0],l=C.length;if(2===l&&g(r)&&g(C[1])&&0===r.length){if(function i(C,u){var y,e;for(y=0;y<C.length;y++){if(null!==(e=C[y])&&"object"==typeof e)return!1;void 0!==e&&(u[y]=e)}return!0}(C[1],r))return r;r.splice(0,r.length)}for(var p=1;p<l;p++)for(s in a=C[p])c=r[s],f=a[s],e&&g(f)?r[s]=f:u&&f&&(A(f)||(m=g(f)))?(m?(m=!1,h=c&&g(c)?c:[]):h=c&&A(c)?c:{},r[s]=P([h,f],u,y,e)):(void 0!==f||y)&&(r[s]=f);return r}W.extendFlat=function(){return P(arguments,!1,!1,!1)},W.extendDeep=function(){return P(arguments,!0,!1,!1)},W.extendDeepAll=function(){return P(arguments,!0,!0,!1)},W.extendDeepNoArrays=function(){return P(arguments,!0,!1,!0)}},75744:function(q){"use strict";q.exports=function(t){for(var A={},g=[],i=0,P=0;P<t.length;P++){var C=t[P];1!==A[C]&&(A[C]=1,g[i++]=C)}return g}},76756:function(q){"use strict";function W(g){return!0===g.visible}function t(g){var i=g[0].trace;return!0===i.visible&&0!==i._length}q.exports=function(i){for(var P=function A(g){return Array.isArray(g)&&Array.isArray(g[0])&&g[0][0]&&g[0][0].trace}(i)?t:W,C=[],u=0;u<i.length;u++){var y=i[u];P(y)&&C.push(y)}return C}},41327:function(q,W,t){"use strict";var A=t(39898),g=t(24138),i=t(30774),P=t(29261),C=t(85268),u=t(23389),y=t(47769),e=t(41965),r=t(65487),l=t(61082),a=Object.keys(g),s={"ISO-3":u,"USA-states":u,"country names":function c(M){for(var b=0;b<a.length;b++){var L=a[b];if(new RegExp(g[L]).test(M.trim().toLowerCase()))return L}return y.log("Unrecognized country name: "+M+"."),!1}};function h(M){var b=M.geojson,L=window.PlotlyGeoAssets||{},x="string"==typeof b?L[b]:b;return e(x)?x:(y.error("Oops ... something went wrong when fetching "+b),!1)}q.exports={locationToFeature:function f(M,b,L){if(!b||"string"!=typeof b)return!1;var S,T,n,x=s[M](b);if(x){if("USA-states"===M)for(S=[],n=0;n<L.length;n++)(T=L[n]).properties&&T.properties.gu&&"USA"===T.properties.gu&&S.push(T);else S=L;for(n=0;n<S.length;n++)if((T=S[n]).id===x)return T;y.log(["Location with id",x,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function m(M){var T,n,E,d,b=M.geometry,L=b.coordinates,x=M.id,S=[];function F(D){for(var N=0;N<D.length-1;N++)if(D[N][0]>0&&D[N+1][0]<0)return N;return null}switch(T="RUS"===x||"FJI"===x?function(D){var N;if(null===F(D))N=D;else for(N=new Array(D.length),d=0;d<D.length;d++)N[d]=[D[d][0]<0?D[d][0]+360:D[d][0],D[d][1]];S.push(l.tester(N))}:"ATA"===x?function(D){var N=F(D);if(null===N)return S.push(l.tester(D));var k=new Array(D.length+1),O=0;for(d=0;d<D.length;d++)d>N?k[O++]=[D[d][0]+360,D[d][1]]:d===N?(k[O++]=D[d],k[O++]=[D[d][0],-90]):k[O++]=D[d];var B=l.tester(k);B.pts.pop(),S.push(B)}:function(D){S.push(l.tester(D))},b.type){case"MultiPolygon":for(n=0;n<L.length;n++)for(E=0;E<L[n].length;E++)T(L[n][E]);break;case"Polygon":for(n=0;n<L.length;n++)T(L[n])}return S},getTraceGeojson:h,extractTraceFeature:function w(M){var b=M[0].trace,L=h(b);if(!L)return!1;var T,x={},S=[];for(T=0;T<b._length;T++){var n=M[T];(n.loc||0===n.loc)&&(x[n.loc]=n)}function E(D){var N=r(D,b.featureidkey||"id").get(),k=x[N];if(k){var O=D.geometry;if("Polygon"===O.type||"MultiPolygon"===O.type){var B={type:"Feature",id:N,geometry:O,properties:{}};B.properties.ct=function p(M){var L,b=M.geometry;if("MultiPolygon"===b.type)for(var x=b.coordinates,S=0,T=0;T<x.length;T++){var n={type:"Polygon",coordinates:x[T]},E=i.default(n);E>S&&(S=E,L=n)}else L=b;return P.default(L).geometry.coordinates}(B),k.fIn=D,k.fOut=B,S.push(B)}else y.log(["Location",k.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete x[N]}switch(L.type){case"FeatureCollection":var d=L.features;for(T=0;T<d.length;T++)E(d[T]);break;case"Feature":E(L);break;default:return y.warn(["Invalid GeoJSON type",(L.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var F in x)y.log(["Location *"+F+"*","does not have a matching feature with id-key","*"+b.featureidkey+"*."].join(" "));return S},fetchTraceGeoData:function o(M){var b=window.PlotlyGeoAssets||{},L=[];function x(d){return new Promise(function(F,D){A.json(d,function(N,k){return N?(delete b[d],D(new Error(404===N.status?'GeoJSON at URL "'+d+'" does not exist.':"Unexpected error while fetching from "+d))):(b[d]=k,F(k))})})}function S(d){return new Promise(function(F,D){var N=0,k=setInterval(function(){return b[d]&&"pending"!==b[d]?(clearInterval(k),F(b[d])):N>100?(clearInterval(k),D("Unexpected error while fetching from "+d)):void N++},50)})}for(var T=0;T<M.length;T++){var E=M[T][0].trace.geojson;"string"==typeof E&&(b[E]?"pending"===b[E]&&L.push(S(E)):(b[E]="pending",L.push(x(E))))}return L},computeBbox:function v(M){return C.default(M)}}},18214:function(q,W,t){"use strict";var A=t(50606).BADNUM;W.calcTraceToLineCoords=function(g){for(var P=g[0].trace.connectgaps,C=[],u=[],y=0;y<g.length;y++){var r=g[y].lonlat;r[0]!==A?u.push(r):!P&&u.length>0&&(C.push(u),u=[])}return u.length>0&&C.push(u),C},W.makeLine=function(g){return 1===g.length?{type:"LineString",coordinates:g[0]}:{type:"MultiLineString",coordinates:g}},W.makePolygon=function(g){if(1===g.length)return{type:"Polygon",coordinates:g};for(var i=new Array(g.length),P=0;P<g.length;P++)i[P]=[g[P]];return{type:"MultiPolygon",coordinates:i}},W.makeBlank=function(){return{type:"Point",coordinates:[]}}},87642:function(q,W,t){"use strict";var P,C,u,A=t(64872).mod;function g(y,e,r,l,a,s,c,f){var m=r-y,h=a-y,w=c-a,p=l-e,o=s-e,v=f-s,M=m*v-w*p;if(0===M)return null;var b=(h*v-w*o)/M,L=(h*p-m*o)/M;return L<0||L>1||b<0||b>1?null:{x:y+m*b,y:e+p*b}}function i(y,e,r,l,a){var s=l*y+a*e;if(s<0)return l*l+a*a;if(s>r){var c=l-y,f=a-e;return c*c+f*f}var m=l*e-a*y;return m*m/r}W.segmentsIntersect=g,W.segmentDistance=function(e,r,l,a,s,c,f,m){if(g(e,r,l,a,s,c,f,m))return 0;var h=l-e,w=a-r,p=f-s,o=m-c,v=h*h+w*w,M=p*p+o*o,b=Math.min(i(h,w,v,s-e,c-r),i(h,w,v,f-e,m-r),i(p,o,M,e-s,r-c),i(p,o,M,l-s,a-c));return Math.sqrt(b)},W.getTextLocation=function(e,r,l,a){if((e!==C||a!==u)&&(P={},C=e,u=a),P[l])return P[l];var s=e.getPointAtLength(A(l-a/2,r)),c=e.getPointAtLength(A(l+a/2,r)),f=Math.atan((c.y-s.y)/(c.x-s.x)),m=e.getPointAtLength(A(l,r)),p={x:(4*m.x+s.x+c.x)/6,y:(4*m.y+s.y+c.y)/6,theta:f};return P[l]=p,p},W.clearLocationCache=function(){C=null},W.getVisibleSegment=function(e,r,l){var p,o,a=r.left,s=r.right,c=r.top,f=r.bottom,m=0,h=e.getTotalLength(),w=h;function v(b){var L=e.getPointAtLength(b);0===b?p=L:b===h&&(o=L);var x=L.x<a?a-L.x:L.x>s?L.x-s:0,S=L.y<c?c-L.y:L.y>f?L.y-f:0;return Math.sqrt(x*x+S*S)}for(var M=v(m);M;){if((m+=M+l)>w)return;M=v(m)}for(M=v(w);M;){if(m>(w-=M+l))return;M=v(w)}return{min:m,max:w,len:w-m,total:h,isClosed:0===m&&w===h&&Math.abs(p.x-o.x)<.1&&Math.abs(p.y-o.y)<.1}},W.findPointOnPath=function(e,r,l,a){for(var o,v,M,s=(a=a||{}).pathLength||e.getTotalLength(),c=a.tolerance||.001,f=a.iterationLimit||30,m=e.getPointAtLength(0)[l]>e.getPointAtLength(s)[l]?-1:1,h=0,w=0,p=s;h<f;){if(M=(v=e.getPointAtLength(o=(w+p)/2))[l]-r,Math.abs(M)<c)return v;m*M>0?p=o:w=o,h++}return v}},81697:function(q,W,t){"use strict";var A=t(92770),g=t(84267),i=t(25075),P=t(21081),C=t(22399).defaultLine,u=t(73627).isArrayOrTypedArray,y=i(C);function r(f,m){var h=f;return h[3]*=m,h}function l(f){if(A(f))return y;var m=i(f);return m.length?m:y}function a(f){return A(f)?f:1}q.exports={formatColor:function s(f,m,h){var b,L,x,S,T,w=f.color,p=u(w),o=u(m),v=P.extractOpts(f),M=[];if(b=void 0!==v.colorscale?P.makeColorScaleFuncFromTrace(f):l,L=p?function(E,d){return void 0===E[d]?y:i(b(E[d]))}:l,x=o?function(E,d){return void 0===E[d]?1:a(E[d])}:a,p||o)for(var n=0;n<h;n++)S=L(w,n),T=x(m,n),M[n]=r(S,T);else M=r(i(w),m);return M},parseColorScale:function c(f){var m=P.extractOpts(f),h=m.colorscale;return m.reversescale&&(h=P.flipScale(m.colorscale)),h.map(function(w){var p=w[0],v=g(w[1]).toRgb();return{index:p,rgb:[v.r,v.g,v.b,v.a]}})}}},28984:function(q,W,t){"use strict";var A=t(23389);function g(i){return[i]}q.exports={keyFun:function(i){return i.key},repeat:g,descend:A,wrap:g,unwrap:function(i){return i[0]}}},23389:function(q){"use strict";q.exports=function(t){return t}},39240:function(q){"use strict";q.exports=function(t,A){if(!A)return t;var g=1/Math.abs(A),i=g>1?(g*t+g*A)/g:t+A,P=String(i).length;if(P>16){var C=String(A).length;if(P>=String(t).length+C){var y=parseFloat(i).toPrecision(12);-1===y.indexOf("e+")&&(i=+y)}}return i}},71828:function(q,W,t){"use strict";var A=t(39898),g=t(84096).g0,i=t(60721).WU,P=t(92770),C=t(50606),u=C.FP_SAFE,y=-u,e=C.BADNUM,r=q.exports={};r.adjustFormat=function(at){return!at||/^\d[.]\df/.test(at)||/[.]\d%/.test(at)?at:"0.f"===at?"~f":/^\d%/.test(at)?"~%":/^\ds/.test(at)?"~s":!/^[~,.0$]/.test(at)&&/[&fps]/.test(at)?"~"+at:at};var l={};r.warnBadFormat=function(K){var at=String(K);l[at]||(l[at]=1,r.warn('encountered bad format: "'+at+'"'))},r.noFormat=function(K){return String(K)},r.numberFormat=function(K){var at;try{at=i(r.adjustFormat(K))}catch($){return r.warnBadFormat(K),r.noFormat}return at},r.nestedProperty=t(65487),r.keyedContainer=t(66636),r.relativeAttr=t(6962),r.isPlainObject=t(41965),r.toLogRange=t(58163),r.relinkPrivateKeys=t(51332);var a=t(73627);r.isTypedArray=a.isTypedArray,r.isArrayOrTypedArray=a.isArrayOrTypedArray,r.isArray1D=a.isArray1D,r.ensureArray=a.ensureArray,r.concat=a.concat,r.maxRowLength=a.maxRowLength,r.minRowLength=a.minRowLength;var s=t(64872);r.mod=s.mod,r.modHalf=s.modHalf;var c=t(96554);r.valObjectMeta=c.valObjectMeta,r.coerce=c.coerce,r.coerce2=c.coerce2,r.coerceFont=c.coerceFont,r.coercePattern=c.coercePattern,r.coerceHoverinfo=c.coerceHoverinfo,r.coerceSelectionMarkerOpacity=c.coerceSelectionMarkerOpacity,r.validate=c.validate;var f=t(41631);r.dateTime2ms=f.dateTime2ms,r.isDateTime=f.isDateTime,r.ms2DateTime=f.ms2DateTime,r.ms2DateTimeLocal=f.ms2DateTimeLocal,r.cleanDate=f.cleanDate,r.isJSDate=f.isJSDate,r.formatDate=f.formatDate,r.incrementMonth=f.incrementMonth,r.dateTick0=f.dateTick0,r.dfltRange=f.dfltRange,r.findExactDates=f.findExactDates,r.MIN_MS=f.MIN_MS,r.MAX_MS=f.MAX_MS;var m=t(65888);r.findBin=m.findBin,r.sorterAsc=m.sorterAsc,r.sorterDes=m.sorterDes,r.distinctVals=m.distinctVals,r.roundUp=m.roundUp,r.sort=m.sort,r.findIndexOfMin=m.findIndexOfMin,r.sortObjectKeys=t(78607);var h=t(80038);r.aggNums=h.aggNums,r.len=h.len,r.mean=h.mean,r.median=h.median,r.midRange=h.midRange,r.variance=h.variance,r.stdev=h.stdev,r.interp=h.interp;var w=t(35657);r.init2dArray=w.init2dArray,r.transposeRagged=w.transposeRagged,r.dot=w.dot,r.translationMatrix=w.translationMatrix,r.rotationMatrix=w.rotationMatrix,r.rotationXYMatrix=w.rotationXYMatrix,r.apply3DTransform=w.apply3DTransform,r.apply2DTransform=w.apply2DTransform,r.apply2DTransform2=w.apply2DTransform2,r.convertCssMatrix=w.convertCssMatrix,r.inverseTransformMatrix=w.inverseTransformMatrix;var p=t(26348);r.deg2rad=p.deg2rad,r.rad2deg=p.rad2deg,r.angleDelta=p.angleDelta,r.angleDist=p.angleDist,r.isFullCircle=p.isFullCircle,r.isAngleInsideSector=p.isAngleInsideSector,r.isPtInsideSector=p.isPtInsideSector,r.pathArc=p.pathArc,r.pathSector=p.pathSector,r.pathAnnulus=p.pathAnnulus;var o=t(99863);r.isLeftAnchor=o.isLeftAnchor,r.isCenterAnchor=o.isCenterAnchor,r.isRightAnchor=o.isRightAnchor,r.isTopAnchor=o.isTopAnchor,r.isMiddleAnchor=o.isMiddleAnchor,r.isBottomAnchor=o.isBottomAnchor;var v=t(87642);r.segmentsIntersect=v.segmentsIntersect,r.segmentDistance=v.segmentDistance,r.getTextLocation=v.getTextLocation,r.clearLocationCache=v.clearLocationCache,r.getVisibleSegment=v.getVisibleSegment,r.findPointOnPath=v.findPointOnPath;var M=t(1426);r.extendFlat=M.extendFlat,r.extendDeep=M.extendDeep,r.extendDeepAll=M.extendDeepAll,r.extendDeepNoArrays=M.extendDeepNoArrays;var b=t(47769);r.log=b.log,r.warn=b.warn,r.error=b.error;var L=t(30587);r.counterRegex=L.counter;var x=t(79990);r.throttle=x.throttle,r.throttleDone=x.done,r.clearThrottle=x.clear;var S=t(24401);function T(K){var at={};for(var $ in K)for(var X=K[$],rt=0;rt<X.length;rt++)at[X[rt]]=+$;return at}r.getGraphDiv=S.getGraphDiv,r.isPlotDiv=S.isPlotDiv,r.removeElement=S.removeElement,r.addStyleRule=S.addStyleRule,r.addRelatedStyleRule=S.addRelatedStyleRule,r.deleteRelatedStyleRule=S.deleteRelatedStyleRule,r.getFullTransformMatrix=S.getFullTransformMatrix,r.getElementTransformMatrix=S.getElementTransformMatrix,r.getElementAndAncestors=S.getElementAndAncestors,r.equalDomRects=S.equalDomRects,r.clearResponsive=t(86367),r.preserveDrawingBuffer=t(45142),r.makeTraceGroups=t(77310),r._=t(15867),r.notifier=t(75046),r.filterUnique=t(75744),r.filterVisible=t(76756),r.pushUnique=t(75138),r.increment=t(39240),r.cleanNumber=t(95218),r.ensureNumber=function(at){return P(at)?(at=Number(at))>u||at<y?e:at:e},r.isIndex=function(K,at){return!(void 0!==at&&K>=at)&&P(K)&&K>=0&&K%1==0},r.noop=t(64213),r.identity=t(23389),r.repeat=function(K,at){for(var $=new Array(at),X=0;X<at;X++)$[X]=K;return $},r.swapAttrs=function(K,at,$,X){$||($="x"),X||(X="y");for(var rt=0;rt<at.length;rt++){var et=at[rt],st=r.nestedProperty(K,et.replace("?",$)),dt=r.nestedProperty(K,et.replace("?",X)),bt=st.get();st.set(dt.get()),dt.set(bt)}},r.raiseToTop=function(at){at.parentNode.appendChild(at)},r.cancelTransition=function(K){return K.transition().duration(0)},r.constrain=function(K,at,$){return at>$?Math.max($,Math.min(at,K)):Math.max(at,Math.min($,K))},r.bBoxIntersect=function(K,at,$){return K.left<=at.right+($=$||0)&&at.left<=K.right+$&&K.top<=at.bottom+$&&at.top<=K.bottom+$},r.simpleMap=function(K,at,$,X,rt){for(var et=K.length,st=new Array(et),dt=0;dt<et;dt++)st[dt]=at(K[dt],$,X,rt);return st},r.randstr=function K(at,$,X,rt){if(X||(X=16),void 0===$&&($=24),$<=0)return"0";var dt,bt,et=Math.log(Math.pow(2,$))/Math.log(X),st="";for(dt=2;et===1/0;dt*=2)et=Math.log(Math.pow(2,$/dt))/Math.log(X)*dt;var Lt=et-Math.floor(et);for(dt=0;dt<Math.floor(et);dt++)st=Math.floor(Math.random()*X).toString(X)+st;Lt&&(bt=Math.pow(X,Lt),st=Math.floor(Math.random()*bt).toString(X)+st);var It=parseInt(st,X);return at&&at[st]||It!==1/0&&It>=Math.pow(2,$)?rt>10?(r.warn("randstr failed uniqueness"),st):K(at,$,X,(rt||0)+1):st},r.OptionControl=function(K,at){K||(K={}),at||(at="opt");var $={optionList:[],_newoption:function(X){X[at]=K,$[X.name]=X,$.optionList.push(X)}};return $["_"+at]=K,$},r.smooth=function(K,at){if((at=Math.round(at)||0)<2)return K;var dt,bt,gt,Lt,$=K.length,X=2*$,rt=2*at-1,et=new Array(rt),st=new Array($);for(dt=0;dt<rt;dt++)et[dt]=(1-Math.cos(Math.PI*(dt+1)/at))/(2*at);for(dt=0;dt<$;dt++){for(Lt=0,bt=0;bt<rt;bt++)(gt=dt+bt+1-at)<-$?gt-=X*Math.round(gt/X):gt>=X&&(gt-=X*Math.floor(gt/X)),gt<0?gt=-1-gt:gt>=$&&(gt=X-1-gt),Lt+=K[gt]*et[bt];st[dt]=Lt}return st},r.syncOrAsync=function(K,at,$){var X;function et(){return r.syncOrAsync(K,at,$)}for(;K.length;)if((X=(0,K.splice(0,1)[0])(at))&&X.then)return X.then(et);return $&&$(at)},r.stripTrailingSlash=function(K){return"/"===K.substr(-1)?K.substr(0,K.length-1):K},r.noneOrAll=function(K,at,$){if(K){var et,X=!1,rt=!0;for(et=0;et<$.length;et++)null!=K[$[et]]?X=!0:rt=!1;if(X&&!rt)for(et=0;et<$.length;et++)K[$[et]]=at[$[et]]}},r.mergeArray=function(K,at,$,X){var rt="function"==typeof X;if(r.isArrayOrTypedArray(K))for(var et=Math.min(K.length,at.length),st=0;st<et;st++){var dt=K[st];at[st][$]=rt?X(dt):dt}},r.mergeArrayCastPositive=function(K,at,$){return r.mergeArray(K,at,$,function(X){var rt=+X;return isFinite(rt)&&rt>0?rt:0})},r.fillArray=function(K,at,$,X){if(X=X||r.identity,r.isArrayOrTypedArray(K))for(var rt=0;rt<at.length;rt++)at[rt][$]=X(K[rt])},r.castOption=function(K,at,$,X){X=X||r.identity;var rt=r.nestedProperty(K,$).get();return r.isArrayOrTypedArray(rt)?Array.isArray(at)&&r.isArrayOrTypedArray(rt[at[0]])?X(rt[at[0]][at[1]]):X(rt[at]):rt},r.extractOption=function(K,at,$,X){if($ in K)return K[$];var rt=r.nestedProperty(at,X).get();return Array.isArray(rt)?void 0:rt},r.tagSelected=function(K,at,$){var et,It,X=at.selectedpoints,rt=at._indexToPoints;rt&&(et=T(rt));for(var dt=0;dt<X.length;dt++){var bt=X[dt];if(r.isIndex(bt)||r.isArrayOrTypedArray(bt)&&r.isIndex(bt[0])&&r.isIndex(bt[1])){var gt=et?et[bt]:bt,Lt=$?$[gt]:gt;void 0!==(It=Lt)&&It<K.length&&(K[Lt].selected=1)}}},r.selIndices2selPoints=function(K){var at=K.selectedpoints,$=K._indexToPoints;if($){for(var X=T($),rt=[],et=0;et<at.length;et++){var st=at[et];if(r.isIndex(st)){var dt=X[st];r.isIndex(dt)&&rt.push(dt)}}return rt}return at},r.getTargetArray=function(K,at){var $=at.target;if("string"==typeof $&&$){var X=r.nestedProperty(K,$).get();return!!Array.isArray(X)&&X}return!!Array.isArray($)&&$},r.minExtend=function n(K,at,$){var X={};"object"!=typeof at&&(at={});var st,dt,bt,rt="pieLike"===$?-1:3,et=Object.keys(K);for(st=0;st<et.length;st++)bt=K[dt=et[st]],"_"!==dt.charAt(0)&&"function"!=typeof bt&&(X[dt]="module"===dt?bt:Array.isArray(bt)?"colorscale"===dt||-1===rt?bt.slice():bt.slice(0,rt):r.isTypedArray(bt)?-1===rt?bt.subarray():bt.subarray(0,rt):bt&&"object"==typeof bt?n(K[dt],at[dt],$):bt);for(et=Object.keys(at),st=0;st<et.length;st++)("object"!=typeof(bt=at[dt=et[st]])||!(dt in X)||"object"!=typeof X[dt])&&(X[dt]=bt);return X},r.titleCase=function(K){return K.charAt(0).toUpperCase()+K.substr(1)},r.containsAny=function(K,at){for(var $=0;$<at.length;$++)if(-1!==K.indexOf(at[$]))return!0;return!1},r.isIE=function(){return void 0!==window.navigator.msSaveBlob};var E=/Version\/[\d\.]+.*Safari/;r.isSafari=function(){return E.test(window.navigator.userAgent)};var d=/iPad|iPhone|iPod/;r.isIOS=function(){return d.test(window.navigator.userAgent)};var F=/Firefox\/(\d+)\.\d+/;r.getFirefoxVersion=function(){var K=F.exec(window.navigator.userAgent);if(K&&2===K.length){var at=parseInt(K[1]);if(!isNaN(at))return at}return null},r.isD3Selection=function(K){return K instanceof A.selection},r.ensureSingle=function(K,at,$,X){var rt=K.select(at+($?"."+$:""));if(rt.size())return rt;var et=K.append(at);return $&&et.classed($,!0),X&&et.call(X),et},r.ensureSingleById=function(K,at,$,X){var rt=K.select(at+"#"+$);if(rt.size())return rt;var et=K.append(at).attr("id",$);return X&&et.call(X),et},r.objectFromPath=function(K,at){for(var X,$=K.split("."),rt=X={},et=0;et<$.length;et++){var st=$[et],dt=null,bt=$[et].match(/(.*)\[([0-9]+)\]/);bt?(dt=bt[2],(X=X[st=bt[1]]=[])[dt]=et===$.length-1?at:{},X=X[dt]):(X[st]=et===$.length-1?at:{},X=X[st])}return rt};var D=/^([^\[\.]+)\.(.+)?/,N=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function k(K){return"__"===K.slice(0,2)}r.expandObjectPaths=function(K){var at,$,X,rt,et,st,dt;if("object"==typeof K&&!Array.isArray(K))for($ in K)if(K.hasOwnProperty($))if(at=$.match(D)){if(rt=K[$],k(X=at[1]))continue;delete K[$],K[X]=r.extendDeepNoArrays(K[X]||{},r.objectFromPath($,r.expandObjectPaths(rt))[X])}else if(at=$.match(N)){if(rt=K[$],k(X=at[1]))continue;if(et=parseInt(at[2]),delete K[$],K[X]=K[X]||[],"."===at[3])dt=at[4],st=K[X][et]=K[X][et]||{},r.extendDeepNoArrays(st,r.objectFromPath(dt,r.expandObjectPaths(rt)));else{if(k(X))continue;K[X][et]=r.expandObjectPaths(rt)}}else{if(k($))continue;K[$]=r.expandObjectPaths(K[$])}return K},r.numSeparate=function(K,at,$){if($||($=!1),"string"!=typeof at||0===at.length)throw new Error("Separator string required for formatting!");"number"==typeof K&&(K=String(K));var X=/(\d+)(\d{3})/,rt=at.charAt(0),et=at.charAt(1),st=K.split("."),dt=st[0],bt=st.length>1?rt+st[1]:"";if(et&&(st.length>1||dt.length>4||$))for(;X.test(dt);)dt=dt.replace(X,"$1"+et+"$2");return dt+bt},r.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var O=/^\w*$/;r.templateString=function(K,at){var $={};return K.replace(r.TEMPLATE_STRING_REGEX,function(X,rt){var et;return O.test(rt)?et=at[rt]:($[rt]=$[rt]||r.nestedProperty(at,rt).get,et=$[rt]()),r.isValidTextValue(et)?et:""})};var B={max:10,count:0,name:"hovertemplate"};r.hovertemplateString=function(){return it.apply(B,arguments)};var z={max:10,count:0,name:"texttemplate"};r.texttemplateString=function(){return it.apply(z,arguments)};var U=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function H(K){var at=K.match(U);return at?{key:at[1],op:at[2],number:Number(at[3])}:{key:K,op:null,number:null}}var J={max:10,count:0,name:"texttemplate",parseMultDiv:!0};r.texttemplateStringForShapes=function(){return it.apply(J,arguments)};var nt=/^[:|\|]/;function it(K,at,$){var X=this,rt=arguments;at||(at={});var et={};return K.replace(r.TEMPLATE_STRING_REGEX,function(st,dt,bt){var Lt="_xother"===dt||"_yother"===dt,It="_xother_"===dt||"_yother_"===dt,Mt="xother_"===dt||"yother_"===dt,xt="xother"===dt||"yother"===dt||Lt||Mt||It,At=dt;(Lt||It)&&(At=At.substring(1)),(Mt||It)&&(At=At.substring(0,At.length-1));var Vt,te,Qt,Gt=null,Wt=null;if(X.parseMultDiv){var Pt=H(At);At=Pt.key,Gt=Pt.op,Wt=Pt.number}if(xt){if(void 0===(Vt=at[At]))return""}else for(Qt=3;Qt<rt.length;Qt++)if(te=rt[Qt]){if(te.hasOwnProperty(At)){Vt=te[At];break}if(O.test(At)||(Vt=r.nestedProperty(te,At).get(),(Vt=et[At]||r.nestedProperty(te,At).get())&&(et[At]=Vt)),void 0!==Vt)break}if(void 0!==Vt&&("*"===Gt&&(Vt*=Wt),"/"===Gt&&(Vt/=Wt)),void 0===Vt&&X)return X.count<X.max&&(r.warn("Variable '"+At+"' in "+X.name+" could not be found!"),Vt=st),X.count===X.max&&r.warn("Too many "+X.name+" warnings - additional warnings will be suppressed"),X.count++,st;if(bt){var Bt;if(":"===bt[0]&&(Vt=(Bt=$?$.numberFormat:r.numberFormat)(bt.replace(nt,""))(Vt)),"|"===bt[0]){Bt=$?$.timeFormat:g;var Ot=r.dateTime2ms(Vt);Vt=r.formatDate(Ot,bt.replace(nt,""),!1,Bt)}}else{var qt=At+"Label";at.hasOwnProperty(qt)&&(Vt=at[qt])}return xt&&(Vt="("+Vt+")",(Lt||It)&&(Vt=" "+Vt),(Mt||It)&&(Vt+=" ")),Vt})}r.subplotSort=function(K,at){for(var $=Math.min(K.length,at.length)+1,X=0,rt=0,et=0;et<$;et++){var st=K.charCodeAt(et)||0,dt=at.charCodeAt(et)||0,bt=st>=48&&st<=57,gt=dt>=48&&dt<=57;if(bt&&(X=10*X+st-48),gt&&(rt=10*rt+dt-48),!bt||!gt){if(X!==rt)return X-rt;if(st!==dt)return st-dt}}return rt-X};var j=2e9;r.seedPseudoRandom=function(){j=2e9},r.pseudoRandom=function(){var K=j;return j=(69069*j+1)%4294967296,Math.abs(j-K)<429496729?r.pseudoRandom():j/4294967296},r.fillText=function(K,at,$){var X=Array.isArray($)?function(st){$.push(st)}:function(st){$.text=st},rt=r.extractOption(K,at,"htx","hovertext");if(r.isValidTextValue(rt))return X(rt);var et=r.extractOption(K,at,"tx","text");return r.isValidTextValue(et)?X(et):void 0},r.isValidTextValue=function(K){return K||0===K},r.formatPercent=function(K,at){at=at||0;for(var $=(Math.round(100*K*Math.pow(10,at))*Math.pow(.1,at)).toFixed(at)+"%",X=0;X<at;X++)-1!==$.indexOf(".")&&($=($=$.replace("0%","%")).replace(".%","%"));return $},r.isHidden=function(K){var at=window.getComputedStyle(K).display;return!at||"none"===at},r.strTranslate=function(K,at){return K||at?"translate("+K+","+at+")":""},r.strRotate=function(K){return K?"rotate("+K+")":""},r.strScale=function(K){return 1!==K?"scale("+K+")":""},r.getTextTransform=function(K){var at=K.noCenter,$=K.textX,X=K.textY,bt=K.rotate,gt=K.scale;return gt?gt>1&&(gt=1):gt=0,r.strTranslate(K.targetX-gt*($+(K.anchorX||0)),K.targetY-gt*(X+(K.anchorY||0)))+r.strScale(gt)+(bt?"rotate("+bt+(at?"":" "+$+" "+X)+")":"")},r.setTransormAndDisplay=function(K,at){K.attr("transform",r.getTextTransform(at)),K.style("display",at.scale?null:"none")},r.ensureUniformFontSize=function(K,at){var $=r.extendFlat({},at);return $.size=Math.max(at.size,K._fullLayout.uniformtext.minsize||0),$},r.join2=function(K,at,$){var X=K.length;return X>1?K.slice(0,-1).join(at)+$+K[X-1]:K.join(at)},r.bigFont=function(K){return Math.round(1.2*K)};var Z=r.getFirefoxVersion(),G=null!==Z&&Z<86;r.getPositionFromD3Event=function(){return G?[A.event.layerX,A.event.layerY]:[A.event.offsetX,A.event.offsetY]}},41965:function(q){"use strict";q.exports=function(t){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(t):"[object Object]"===Object.prototype.toString.call(t)&&Object.getPrototypeOf(t).hasOwnProperty("hasOwnProperty")}},66636:function(q,W,t){"use strict";var A=t(65487),g=/^\w*$/;q.exports=function(r,l,a,s){a=a||"name",s=s||"value";var c,f,m,h={};l&&l.length?(m=A(r,l),f=m.get()):f=r,l=l||"";var w={};if(f)for(c=0;c<f.length;c++)w[f[c][a]]=c;var p=g.test(s),o={set:function(v,M){var b=null===M?4:0;if(!f){if(!m||4===b)return;m.set(f=[])}var L=w[v];if(void 0===L){if(4===b)return;b|=3,w[v]=L=f.length}else M!==(p?f[L][s]:A(f[L],s).get())&&(b|=2);var x=f[L]=f[L]||{};return x[a]=v,p?x[s]=M:A(x,s).set(M),null!==M&&(b&=-5),h[L]=h[L]|b,o},get:function(v){if(f){var M=w[v];if(void 0!==M)return p?f[M][s]:A(f[M],s).get()}},rename:function(v,M){var b=w[v];return void 0===b||(h[b]=1|h[b],w[M]=b,delete w[v],f[b][a]=M),o},remove:function(v){var M=w[v];if(void 0===M)return o;var b=f[M];if(Object.keys(b).length>2)return h[M]=2|h[M],o.set(v,null);if(p){for(c=M;c<f.length;c++)h[c]=3|h[c];for(c=M;c<f.length;c++)w[f[c][a]]--;f.splice(M,1),delete w[v]}else A(b,s).set(null),h[M]=6|h[M];return o},constructUpdate:function(){for(var v,M,b={},L=Object.keys(h),x=0;x<L.length;x++)v=l+"["+(M=L[x])+"]",f[M]?(1&h[M]&&(b[v+"."+a]=f[M][a]),2&h[M]&&(b[v+"."+s]=p?4&h[M]?null:f[M][s]:4&h[M]?null:A(f[M],s).get())):b[v]=null;return b}};return o}},15867:function(q,W,t){"use strict";var A=t(73972);q.exports=function(i,P){for(var C=i._context.locale,u=0;u<2;u++){for(var y=i._context.locales,e=0;e<2;e++){var r=(y[C]||{}).dictionary;if(r){var l=r[P];if(l)return l}y=A.localeRegistry}var a=C.split("-")[0];if(a===C)break;C=a}return P}},47769:function(q,W,t){"use strict";var A=t(72075).dfltConfig,g=t(75046),i=q.exports={};i.log=function(){var P;if(A.logging>1){var C=["LOG:"];for(P=0;P<arguments.length;P++)C.push(arguments[P]);console.trace.apply(console,C)}if(A.notifyOnLogging>1){var u=[];for(P=0;P<arguments.length;P++)u.push(arguments[P]);g(u.join("<br>"),"long")}},i.warn=function(){var P;if(A.logging>0){var C=["WARN:"];for(P=0;P<arguments.length;P++)C.push(arguments[P]);console.trace.apply(console,C)}if(A.notifyOnLogging>0){var u=[];for(P=0;P<arguments.length;P++)u.push(arguments[P]);g(u.join("<br>"),"stick")}},i.error=function(){var P;if(A.logging>0){var C=["ERROR:"];for(P=0;P<arguments.length;P++)C.push(arguments[P]);console.error.apply(console,C)}if(A.notifyOnLogging>0){var u=[];for(P=0;P<arguments.length;P++)u.push(arguments[P]);g(u.join("<br>"),"stick")}}},77310:function(q,W,t){"use strict";var A=t(39898);q.exports=function(i,P,C){var u=i.selectAll("g."+C.replace(/\s/g,".")).data(P,function(e){return e[0].trace.uid});u.exit().remove(),u.enter().append("g").attr("class",C),u.order();var y=i.classed("rangeplot")?"nodeRangePlot3":"node3";return u.each(function(e){e[0][y]=A.select(this)}),u}},35657:function(q,W,t){"use strict";var A=t(79576);W.init2dArray=function(g,i){for(var P=new Array(g),C=0;C<g;C++)P[C]=new Array(i);return P},W.transposeRagged=function(g){var C,u,i=0,P=g.length;for(C=0;C<P;C++)i=Math.max(i,g[C].length);var y=new Array(i);for(C=0;C<i;C++)for(y[C]=new Array(P),u=0;u<P;u++)y[C][u]=g[u][C];return y},W.dot=function(g,i){if(!g.length||!i.length||g.length!==i.length)return null;var C,u,P=g.length;if(g[0].length)for(C=new Array(P),u=0;u<P;u++)C[u]=W.dot(g[u],i);else if(i[0].length){var y=W.transposeRagged(i);for(C=new Array(y.length),u=0;u<y.length;u++)C[u]=W.dot(g,y[u])}else for(C=0,u=0;u<P;u++)C+=g[u]*i[u];return C},W.translationMatrix=function(g,i){return[[1,0,g],[0,1,i],[0,0,1]]},W.rotationMatrix=function(g){var i=g*Math.PI/180;return[[Math.cos(i),-Math.sin(i),0],[Math.sin(i),Math.cos(i),0],[0,0,1]]},W.rotationXYMatrix=function(g,i,P){return W.dot(W.dot(W.translationMatrix(i,P),W.rotationMatrix(g)),W.translationMatrix(-i,-P))},W.apply3DTransform=function(g){return function(){var i=arguments,P=1===arguments.length?i[0]:[i[0],i[1],i[2]||0];return W.dot(g,[P[0],P[1],P[2],1]).slice(0,3)}},W.apply2DTransform=function(g){return function(){var i=arguments;3===i.length&&(i=i[0]);var P=1===arguments.length?i[0]:[i[0],i[1]];return W.dot(g,[P[0],P[1],1]).slice(0,2)}},W.apply2DTransform2=function(g){var i=W.apply2DTransform(g);return function(P){return i(P.slice(0,2)).concat(i(P.slice(2,4)))}},W.convertCssMatrix=function(g){if(g){var i=g.length;if(16===i)return g;if(6===i)return[g[0],g[1],0,0,g[2],g[3],0,0,0,0,1,0,g[4],g[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},W.inverseTransformMatrix=function(g){var i=[];return A.invert(i,g),[[i[0],i[1],i[2],i[3]],[i[4],i[5],i[6],i[7]],[i[8],i[9],i[10],i[11]],[i[12],i[13],i[14],i[15]]]}},64872:function(q){"use strict";q.exports={mod:function W(A,g){var i=A%g;return i<0?i+g:i},modHalf:function t(A,g){return Math.abs(A)>g/2?A-Math.round(A/g)*g:A}}},65487:function(q,W,t){"use strict";var A=t(92770),g=t(73627).isArrayOrTypedArray;function i(a,s){return function(){var f,m,h,w,p,c=a;for(w=0;w<s.length-1;w++){if(-1===(f=s[w])){for(m=!0,h=[],p=0;p<c.length;p++)h[p]=i(c[p],s.slice(w+1))(),h[p]!==h[0]&&(m=!1);return m?h[0]:h}if("number"==typeof f&&!g(c)||"object"!=typeof(c=c[f])||null===c)return}if("object"==typeof c&&null!==c&&null!==(h=c[s[w]]))return h}}q.exports=function(s,c){if(A(c))c=String(c);else if("string"!=typeof c||"[-1]"===c.substr(c.length-4))throw"bad property string";var m,h,w,p,f=c.split(".");for(p=0;p<f.length;p++)if("__"===String(f[p]).slice(0,2))throw"bad property string";for(p=0;p<f.length;){if(m=String(f[p]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(m[1])f[p]=m[1];else{if(0!==p)throw"bad property string";f.splice(0,1)}for(h=m[2].substr(1,m[2].length-2).split("]["),w=0;w<h.length;w++)p++,f.splice(p,0,Number(h[w]))}p++}return"object"!=typeof s?function l(a,s,c){return{set:function(){throw"bad container"},get:function(){},astr:s,parts:c,obj:a}}(s,c,f):{set:u(s,f,c),get:i(s,f),astr:c,parts:f,obj:s}};var P=/(^|\.)args\[/;function C(a,s){return void 0===a||null===a&&!s.match(P)}function u(a,s,c){return function(f){var o,v,m=a,h="",w=[[a,h]],p=C(f,c);for(v=0;v<s.length-1;v++){if("number"==typeof(o=s[v])&&!g(m))throw"array index but container is not an array";if(-1===o){if(p=!e(m,s.slice(v+1),f,c))break;return}if(!r(m,o,s[v+1],p))break;if("object"!=typeof(m=m[o])||null===m)throw"container is not an object";h=y(h,o),w.push([m,h])}if(p){if(v===s.length-1&&(delete m[s[v]],Array.isArray(m)&&+s[v]==m.length-1))for(;m.length&&void 0===m[m.length-1];)m.pop()}else m[s[v]]=f}}function y(a,s){var c=s;return A(s)?c="["+s+"]":a&&(c="."+s),a+c}function e(a,s,c,f){var M,m=g(c),h=!0,w=c,p=f.replace("-1",0),o=!m&&C(c,p),v=s[0];for(M=0;M<a.length;M++)p=f.replace("-1",M),m&&(o=C(w=c[M%c.length],p)),o&&(h=!1),r(a,M,v,o)&&u(a[M],s,f.replace("-1",M))(w);return h}function r(a,s,c,f){if(void 0===a[s]){if(f)return!1;a[s]="number"==typeof c?[]:{}}return!0}},64213:function(q){"use strict";q.exports=function(){}},75046:function(q,W,t){"use strict";var A=t(39898),g=t(92770),i=[];q.exports=function(P,C){if(-1===i.indexOf(P)){i.push(P);var u=1e3;g(C)?u=C:"long"===C&&(u=3e3);var y=A.select("body").selectAll(".plotly-notifier").data([0]);y.enter().append("div").classed("plotly-notifier",!0),y.selectAll(".notifier-note").data(i).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(l){var a=A.select(this);a.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){a.transition().call(r)});for(var s=a.append("p"),c=l.split(/<br\s*\/?>/g),f=0;f<c.length;f++)f&&s.append("br"),s.append("span").text(c[f]);"stick"===C?a.transition().duration(350).style("opacity",1):a.transition().duration(700).style("opacity",1).transition().delay(u).call(r)})}function r(l){l.duration(700).style("opacity",0).each("end",function(a){var s=i.indexOf(a);-1!==s&&i.splice(s,1),A.select(this).remove()})}}},39918:function(q,W,t){"use strict";var A=t(6964),g="data-savedcursor";q.exports=function(C,u){var y=C.attr(g);if(u){if(!y){for(var e=(C.attr("class")||"").split(" "),r=0;r<e.length;r++){var l=e[r];0===l.indexOf("cursor-")&&C.attr(g,l.substr(7)).classed(l,!1)}C.attr(g)||C.attr(g,"!!")}A(C,u)}else y&&(C.attr(g,null),"!!"===y?A(C):A(C,y))}},61082:function(q,W,t){"use strict";var A=t(35657).dot,g=t(50606).BADNUM,i=q.exports={};i.tester=function(C){var a,u=C.slice(),y=u[0][0],e=y,r=u[0][1],l=r;for((u[u.length-1][0]!==u[0][0]||u[u.length-1][1]!==u[0][1])&&u.push(u[0]),a=1;a<u.length;a++)y=Math.min(y,u[a][0]),e=Math.max(e,u[a][0]),r=Math.min(r,u[a][1]),l=Math.max(l,u[a][1]);var c,s=!1;5===u.length&&(u[0][0]===u[1][0]?u[2][0]===u[3][0]&&u[0][1]===u[3][1]&&u[1][1]===u[2][1]&&(s=!0,c=function(p){return p[0]===u[0][0]}):u[0][1]===u[1][1]&&u[2][1]===u[3][1]&&u[0][0]===u[3][0]&&u[1][0]===u[2][0]&&(s=!0,c=function(p){return p[1]===u[0][1]}));var h=!0,w=u[0];for(a=1;a<u.length;a++)if(w[0]!==u[a][0]||w[1]!==u[a][1]){h=!1;break}return{xmin:y,xmax:e,ymin:r,ymax:l,pts:u,contains:s?function f(p,o){var v=p[0],M=p[1];return!(v===g||v<y||v>e||M===g||M<r||M>l||o&&c(p))}:function m(p,o){var v=p[0],M=p[1];if(v===g||v<y||v>e||M===g||M<r||M>l)return!1;var T,n,E,d,F,b=u.length,L=u[0][0],x=u[0][1],S=0;for(T=1;T<b;T++)if(n=L,E=x,L=u[T][0],x=u[T][1],!(v<(d=Math.min(n,L))||v>Math.max(n,L)||M>Math.max(E,x)))if(M<Math.min(E,x))v!==d&&S++;else{if(M===(F=L===n?M:E+(v-n)*(x-E)/(L-n)))return!(1===T&&o);M<=F&&v!==d&&S++}return S%2==1},isRect:s,degenerate:h}},i.isSegmentBent=function(C,u,y,e){var f,m,h,r=C[u],l=[C[y][0]-r[0],C[y][1]-r[1]],a=A(l,l),s=Math.sqrt(a),c=[-l[1]/s,l[0]/s];for(f=u+1;f<y;f++)if((h=A(m=[C[f][0]-r[0],C[f][1]-r[1]],l))<0||h>a||Math.abs(A(m,c))>e)return!0;return!1},i.filter=function(C,u){var y=[C[0]],e=0,r=0;function l(s){C.push(s);var c=y.length,f=e;y.splice(r+1);for(var m=f+1;m<C.length;m++)(m===C.length-1||i.isSegmentBent(C,f,m+1,u))&&(y.push(C[m]),y.length<c-2&&(e=m,r=y.length-1),f=m)}return C.length>1&&l(C.pop()),{addPt:l,raw:C,filtered:y}}},79749:function(q,W,t){"use strict";var A=t(58617),g=t(98580);q.exports=function(P,C,u){var y=P._fullLayout,e=!0;return y._glcanvas.each(function(r){if(r.regl)r.regl.preloadCachedCode(u);else if(!r.pick||y._has("parcoords")){try{r.regl=g({canvas:this,attributes:{antialias:!r.pick,preserveDrawingBuffer:!0},pixelRatio:P._context.plotGlPixelRatio||t.g.devicePixelRatio,extensions:C||[],cachedCode:u||{}})}catch(l){e=!1}r.regl||(e=!1),e&&this.addEventListener("webglcontextlost",function(l){P&&P.emit&&P.emit("plotly_webglcontextlost",{event:l,layer:r.key})},!1)}}),e||A({container:y._glcontainer.node()}),e}},45142:function(q,W,t){"use strict";var A=t(92770),g=t(35791);q.exports=function(C){var u;if("string"!=typeof(u=C&&C.hasOwnProperty("userAgent")?C.userAgent:function i(){var P;return"undefined"!=typeof navigator&&(P=navigator.userAgent),P&&P.headers&&"string"==typeof P.headers["user-agent"]&&(P=P.headers["user-agent"]),P}()))return!0;var y=g({ua:{headers:{"user-agent":u}},tablet:!0,featureDetect:!1});if(!y)for(var e=u.split(" "),r=1;r<e.length;r++)if(-1!==e[r].indexOf("Safari"))for(var a=r-1;a>-1;a--){var s=e[a];if("Version/"===s.substr(0,8)){var c=s.substr(8).split(".")[0];if(A(c)&&(c=+c),c>=13)return!0}}return y}},75138:function(q){"use strict";q.exports=function(t,A){if(A instanceof RegExp){for(var g=A.toString(),i=0;i<t.length;i++)if(t[i]instanceof RegExp&&t[i].toString()===g)return t;t.push(A)}else(A||0===A)&&-1===t.indexOf(A)&&t.push(A);return t}},10847:function(q,W,t){"use strict";var A=t(71828),g=t(72075).dfltConfig;var P={add:function(C,u,y,e,r){var l,a;C.undoQueue=C.undoQueue||{index:0,queue:[],sequence:!1},a=C.undoQueue.index,C.autoplay?C.undoQueue.inSequence||(C.autoplay=!1):(!C.undoQueue.sequence||C.undoQueue.beginSequence?(C.undoQueue.queue.splice(a,C.undoQueue.queue.length-a,l={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),C.undoQueue.index+=1):l=C.undoQueue.queue[a-1],C.undoQueue.beginSequence=!1,l&&(l.undo.calls.unshift(u),l.undo.args.unshift(y),l.redo.calls.push(e),l.redo.args.push(r)),C.undoQueue.queue.length>g.queueLength&&(C.undoQueue.queue.shift(),C.undoQueue.index--))},startSequence:function(C){C.undoQueue=C.undoQueue||{index:0,queue:[],sequence:!1},C.undoQueue.sequence=!0,C.undoQueue.beginSequence=!0},stopSequence:function(C){C.undoQueue=C.undoQueue||{index:0,queue:[],sequence:!1},C.undoQueue.sequence=!1,C.undoQueue.beginSequence=!1},undo:function(u){var y,e;if(!(void 0===u.undoQueue||isNaN(u.undoQueue.index)||u.undoQueue.index<=0)){for(u.undoQueue.index--,y=u.undoQueue.queue[u.undoQueue.index],u.undoQueue.inSequence=!0,e=0;e<y.undo.calls.length;e++)P.plotDo(u,y.undo.calls[e],y.undo.args[e]);u.undoQueue.inSequence=!1,u.autoplay=!1}},redo:function(u){var y,e;if(!(void 0===u.undoQueue||isNaN(u.undoQueue.index)||u.undoQueue.index>=u.undoQueue.queue.length)){for(y=u.undoQueue.queue[u.undoQueue.index],u.undoQueue.inSequence=!0,e=0;e<y.redo.calls.length;e++)P.plotDo(u,y.redo.calls[e],y.redo.args[e]);u.undoQueue.inSequence=!1,u.autoplay=!1,u.undoQueue.index++}},plotDo:function(C,u,y){C.autoplay=!0,y=function i(C,u){for(var e,y=[],r=0;r<u.length;r++)y[r]=(e=u[r])===C?e:"object"==typeof e?Array.isArray(e)?A.extendDeep([],e):A.extendDeepAll({},e):e;return y}(C,y),u.apply(null,y)}};q.exports=P},30587:function(q,W){"use strict";W.counter=function(t,A,g,i){var P=(A||"")+(g?"":"$"),C=!1===i?"":"^";return"xy"===t?new RegExp(C+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+P):new RegExp(C+t+"([2-9]|[1-9][0-9]+)?"+P)}},6962:function(q){"use strict";var W=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,t=/^[^\.\[\]]+$/;q.exports=function(A,g){for(;g;){var i=A.match(W);if(i)A=i[1];else{if(!A.match(t))throw new Error("bad relativeAttr call:"+[A,g]);A=""}if("^"!==g.charAt(0))break;g=g.slice(1)}return A&&"["!==g.charAt(0)?A+"."+g:A+g}},51332:function(q,W,t){"use strict";var A=t(73627).isArrayOrTypedArray,g=t(41965);q.exports=function i(P,C){for(var u in C){var y=C[u],e=P[u];if(e!==y)if("_"===u.charAt(0)||"function"==typeof y){if(u in P)continue;P[u]=y}else if(A(y)&&A(e)&&g(y[0])){if("customdata"===u||"ids"===u)continue;for(var r=Math.min(y.length,e.length),l=0;l<r;l++)e[l]!==y[l]&&g(y[l])&&g(e[l])&&i(e[l],y[l])}else g(y)&&g(e)&&(i(e,y),Object.keys(e).length||delete P[u])}}},65888:function(q,W,t){"use strict";var A=t(92770),g=t(47769),i=t(23389),P=t(50606).BADNUM,C=1e-9;function u(l,a){return l<a}function y(l,a){return l<=a}function e(l,a){return l>a}function r(l,a){return l>=a}W.findBin=function(l,a,s){if(A(a.start))return s?Math.ceil((l-a.start)/a.size-C)-1:Math.floor((l-a.start)/a.size+C);var w,p,c=0,f=a.length,m=0,h=f>1?(a[f-1]-a[0])/(f-1):1;for(p=h>=0?s?u:y:s?r:e,l+=h*C*(s?-1:1)*(h>=0?1:-1);c<f&&m++<100;)p(a[w=Math.floor((c+f)/2)],l)?c=w+1:f=w;return m>90&&g.log("Long binary search..."),c-1},W.sorterAsc=function(l,a){return l-a},W.sorterDes=function(l,a){return a-l},W.distinctVals=function(l){var s,a=l.slice();for(a.sort(W.sorterAsc),s=a.length-1;s>-1&&a[s]===P;s--);for(var h,c=a[s]-a[0]||1,f=c/(s||1)/1e4,m=[],w=0;w<=s;w++){var p=a[w],o=p-h;void 0===h?(m.push(p),h=p):o>f&&(c=Math.min(c,o),m.push(p),h=p)}return{vals:m,minDiff:c}},W.roundUp=function(l,a,s){for(var m,c=0,f=a.length-1,h=0,w=s?0:1,p=s?1:0,o=s?Math.ceil:Math.floor;c<f&&h++<100;)a[m=o((c+f)/2)]<=l?c=m+w:f=m-p;return a[c]},W.sort=function(l,a){for(var s=0,c=0,f=1;f<l.length;f++){var m=a(l[f],l[f-1]);if(m<0?s=1:m>0&&(c=1),s&&c)return l.sort(a)}return c?l:l.reverse()},W.findIndexOfMin=function(l,a){a=a||i;for(var c,s=1/0,f=0;f<l.length;f++){var m=a(l[f]);m<s&&(s=m,c=f)}return c}},6964:function(q){"use strict";q.exports=function(t,A){(t.attr("class")||"").split(" ").forEach(function(g){0===g.indexOf("cursor-")&&t.classed(g,!1)}),A&&t.classed("cursor-"+A,!0)}},58617:function(q,W,t){"use strict";var A=t(7901),g=function(){};q.exports=function(P){for(var C in P)"function"==typeof P[C]&&(P[C]=g);P.destroy=function(){P.container.parentNode.removeChild(P.container)};var u=document.createElement("div");u.className="no-webgl",u.style.cursor="pointer",u.style.fontSize="24px",u.style.color=A.defaults[0],u.style.position="absolute",u.style.left=u.style.top="0px",u.style.width=u.style.height="100%",u.style["background-color"]=A.lightLine,u.style["z-index"]=30;var y=document.createElement("p");return y.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",y.style.position="relative",y.style.top="50%",y.style.left="50%",y.style.height="30%",y.style.width="50%",y.style.margin="-15% 0 0 -25%",u.appendChild(y),P.container.appendChild(u),P.container.style.background="#FFFFFF",P.container.onclick=function(){window.open("https://get.webgl.org")},!1}},78607:function(q){"use strict";q.exports=function(t){return Object.keys(t).sort()}},80038:function(q,W,t){"use strict";var A=t(92770),g=t(73627).isArrayOrTypedArray;W.aggNums=function(i,P,C,u){var y,e;if((!u||u>C.length)&&(u=C.length),A(P)||(P=!1),g(C[0])){for(e=new Array(u),y=0;y<u;y++)e[y]=W.aggNums(i,P,C[y]);C=e}for(y=0;y<u;y++)A(P)?A(C[y])&&(P=i(+P,+C[y])):P=C[y];return P},W.len=function(i){return W.aggNums(function(P){return P+1},0,i)},W.mean=function(i,P){return P||(P=W.len(i)),W.aggNums(function(C,u){return C+u},0,i)/P},W.midRange=function(i){if(void 0!==i&&0!==i.length)return(W.aggNums(Math.max,null,i)+W.aggNums(Math.min,null,i))/2},W.variance=function(i,P,C){return P||(P=W.len(i)),A(C)||(C=W.mean(i,P)),W.aggNums(function(u,y){return u+Math.pow(y-C,2)},0,i)/P},W.stdev=function(i,P,C){return Math.sqrt(W.variance(i,P,C))},W.median=function(i){var P=i.slice().sort();return W.interp(P,.5)},W.interp=function(i,P){if(!A(P))throw"n should be a finite number";if((P=P*i.length-.5)<0)return i[0];if(P>i.length-1)return i[i.length-1];var C=P%1;return C*i[Math.ceil(P)]+(1-C)*i[Math.floor(P)]}},78614:function(q,W,t){"use strict";var A=t(25075);q.exports=function g(i){return i?A(i):[0,0,0,1]}},3883:function(q,W,t){"use strict";var A=t(32396),g=t(91424),i=t(71828),P=null;q.exports=function C(){if(null!==P)return P;P=!1;var u=i.isIE()||i.isSafari()||i.isIOS();if(window.navigator.userAgent&&!u){var y=Array.from(A.CSS_DECLARATIONS).reverse(),e=window.CSS&&window.CSS.supports||window.supportsCSS;if("function"==typeof e)P=y.some(function(s){return e.apply(null,s)});else{var r=g.tester.append("image").attr("style",A.STYLE),a=window.getComputedStyle(r.node()).imageRendering;P=y.some(function(s){var c=s[1];return a===c||a===c.toLowerCase()}),r.remove()}}return P}},63893:function(q,W,t){"use strict";var A=t(39898),g=t(71828),i=g.strTranslate,P=t(77922),C=t(18783).LINE_SPACING,u=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;W.convertToTspans=function(B,z,U){var H=B.text(),J=!B.attr("data-notex")&&z&&z._context.typesetMath&&"undefined"!=typeof MathJax&&H.match(u),nt=A.select(B.node().parentNode);if(!nt.empty()){var it=B.attr("class")?B.attr("class").split(" ")[0]:"text";return nt.selectAll("svg."+(it+="-math")).remove(),nt.selectAll("g."+it+"-group").remove(),B.style("display",null).attr({"data-unformatted":H,"data-math":"N"}),J?(z&&z._promises||[]).push(new Promise(function(Q){B.style("display","none");var j=parseInt(B.node().style.fontSize,10);!function a(B,z,U){var H=parseInt((MathJax.version||"").split(".")[0]);if(2===H||3===H){var J,nt,it,ut,Q=function(){return nt=g.extendDeepAll({},MathJax.Hub.config),it=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:l},displayAlign:"left"})},j=function(){nt=g.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=l},Z=function(){if("SVG"!==(J=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},G=function(){"svg"!==(J=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg")},K=function(){var st="math-output-"+g.randstr({},64),dt=(ut=A.select("body").append("div").attr({id:st}).style({visibility:"hidden",position:"absolute","font-size":z.fontSize+"px"}).text(function r(B){return B.replace(y,"\\lt ").replace(e,"\\gt ")}(B))).node();return 2===H?MathJax.Hub.Typeset(dt):MathJax.typeset([dt])},at=function(){var st=ut.select(2===H?".MathJax_SVG":".MathJax"),dt=!st.empty()&&ut.select("svg").node();if(dt){var gt,bt=dt.getBoundingClientRect();gt=2===H?A.select("body").select("#MathJax_SVG_glyphs"):st.select("defs"),U(st,gt,bt)}else g.log("There was an error in the tex syntax.",B),U();ut.remove()},$=function(){if("SVG"!==J)return MathJax.Hub.setRenderer(J)},X=function(){"svg"!==J&&(MathJax.config.startup.output=J)},rt=function(){return void 0!==it&&(MathJax.Hub.processSectionDelay=it),MathJax.Hub.Config(nt)},et=function(){MathJax.config=nt};2===H?MathJax.Hub.Queue(Q,Z,K,at,$,rt):3===H&&(j(),G(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){K(),at(),X(),et()}))}else g.warn("No MathJax version:",MathJax.version)}(J[2],{fontSize:j},function(G,K,at){nt.selectAll("svg."+it).remove(),nt.selectAll("g."+it+"-group").remove();var $=G&&G.select("svg");if(!$||!$.node())return ut(),void Q();var X=nt.append("g").classed(it+"-group",!0).attr({"pointer-events":"none","data-unformatted":H,"data-math":"Y"});X.node().appendChild($.node()),K&&K.node()&&$.node().insertBefore(K.node().cloneNode(!0),$.node().firstChild);var rt=at.width,et=at.height;$.attr({class:it,height:et,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var st=B.node().style.fill||"black",dt=$.select("g");dt.attr({fill:st,stroke:st});var bt=dt.node().getBoundingClientRect(),gt=bt.width,Lt=bt.height;(gt>rt||Lt>et)&&($.style("overflow","hidden"),gt=(bt=$.node().getBoundingClientRect()).width,Lt=bt.height);var It=+B.attr("x"),Mt=+B.attr("y"),At=-(j||B.node().getBoundingClientRect().height)/4;if("y"===it[0])X.attr({transform:"rotate("+[-90,It,Mt]+")"+i(-gt/2,At-Lt/2)});else if("l"===it[0])Mt=At-Lt/2;else if("a"===it[0]&&0!==it.indexOf("atitle"))It=0,Mt=At;else{var Gt=B.attr("text-anchor");It-=gt*("middle"===Gt?.5:"end"===Gt?1:0),Mt=Mt+At-Lt/2}$.attr({x:It,y:Mt}),U&&U.call(B,X),Q(X)})})):ut(),B}function ut(){nt.empty()||(it=B.attr("class")+"-math",nt.select("svg."+it).remove()),B.text("").style("white-space","pre"),function D(B,z){z=z.replace(w," ");var J,U=!1,H=[],nt=-1;function it(){nt++;var Lt=document.createElementNS(P.svg,"tspan");A.select(Lt).attr({class:"line",dy:nt*C+"em"}),B.appendChild(Lt),J=Lt;var It=H;if(H=[{node:Lt}],It.length>1)for(var Mt=1;Mt<It.length;Mt++)ut(It[Mt])}function ut(Lt){var xt,It=Lt.type,Mt={};if("a"===It){xt="a";var At=Lt.target,Gt=Lt.href,Wt=Lt.popup;Gt&&(Mt={"xlink:xlink:show":"_blank"===At||"_"!==At.charAt(0)?"new":"replace",target:At,"xlink:xlink:href":Gt},Wt&&(Mt.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Wt+'");return false;'))}else xt="tspan";Lt.style&&(Mt.style=Lt.style);var Pt=document.createElementNS(P.svg,xt);if("sup"===It||"sub"===It){Q(J,m),J.appendChild(Pt);var Vt=document.createElementNS(P.svg,"tspan");Q(Vt,m),A.select(Vt).attr("dy",f[It]),Mt.dy=c[It],J.appendChild(Pt),J.appendChild(Vt)}else J.appendChild(Pt);A.select(Pt).attr(Mt),J=Lt.node=Pt,H.push(Lt)}function Q(Lt,It){Lt.appendChild(document.createTextNode(It))}function j(Lt){if(1!==H.length){var It=H.pop();Lt!==It.type&&g.log("Start tag <"+It.type+"> doesnt match end tag <"+Lt+">. Pretending it did match.",z),J=H[H.length-1].node}else g.log("Ignoring unexpected end tag </"+Lt+">.",z)}v.test(z)?it():(J=B,H=[{node:B}]);for(var G=z.split(p),K=0;K<G.length;K++){var at=G[K],$=at.match(o),X=$&&$[2].toLowerCase(),rt=s[X];if("br"===X)it();else if(void 0===rt)Q(J,d(at));else if($[1])j(X);else{var et=$[4],st={type:X},dt=S(et,M);if(dt?(dt=dt.replace(T,"$1 fill:"),rt&&(dt+=";"+rt)):rt&&(dt=rt),dt&&(st.style=dt),"a"===X){U=!0;var bt=S(et,b);if(bt){var gt=N(bt);gt&&(st.href=gt,st.target=S(et,L)||"_blank",st.popup=S(et,x))}}ut(st)}}return U}(B.node(),H)&&B.style("pointer-events","all"),W.positionText(B),U&&U.call(B)}};var y=/(<|&lt;|&#60;)/g,e=/(>|&gt;|&#62;)/g;var l=[["$","$"],["\\(","\\)"]];var s={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},c={sub:"0.3em",sup:"-0.6em"},f={sub:"-0.21em",sup:"0.42em"},m="\u200b",h=["http:","https:","mailto:","",void 0,":"],w=W.NEWLINES=/(\r\n?|\n)/g,p=/(<[^<>]*>)/,o=/<(\/?)([^ >]*)(\s+(.*))?>/i,v=/<br(\s+.*)?>/i;W.BR_TAG_ALL=/<br(\s+.*)?>/gi;var M=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,b=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,L=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,x=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function S(B,z){if(!B)return null;var U=B.match(z),H=U&&(U[3]||U[4]);return H&&d(H)}var T=/(^|;)\s*color:/;W.plainText=function(B,z){for(var U=void 0!==(z=z||{}).len&&-1!==z.len?z.len:1/0,H=void 0!==z.allowedTags?z.allowedTags:["br"],nt="...".length,it=B.split(p),ut=[],Q="",j=0,Z=0;Z<it.length;Z++){var G=it[Z],K=G.match(o),at=K&&K[2].toLowerCase();if(at)-1!==H.indexOf(at)&&(ut.push(G),Q=at);else{var $=G.length;if(j+$<U)ut.push(G),j+=$;else if(j<U){var X=U-j;Q&&("br"!==Q||X<=nt||$<=nt)&&ut.pop(),ut.push(U>nt?G.substr(0,X-nt)+"...":G.substr(0,X));break}Q=""}}return ut.join("")};var n={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},E=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function d(B){return B.replace(E,function(z,U){return("#"===U.charAt(0)?function F(B){if(!(B>1114111)){var z=String.fromCodePoint;if(z)return z(B);var U=String.fromCharCode;return B<=65535?U(B):U(55232+(B>>10),B%1024+56320)}}("x"===U.charAt(1)?parseInt(U.substr(2),16):parseInt(U.substr(1),10)):n[U])||z})}function N(B){var z=encodeURI(decodeURI(B)),U=document.createElement("a"),H=document.createElement("a");U.href=B,H.href=z;var nt=H.protocol;return-1!==h.indexOf(U.protocol)&&-1!==h.indexOf(nt)?z:""}function k(B,z,U){var ut,Q,j,H=U.horizontalAlign,J=U.verticalAlign||"top",nt=B.node().getBoundingClientRect(),it=z.node().getBoundingClientRect();return Q="bottom"===J?function(){return nt.bottom-ut.height}:"middle"===J?function(){return nt.top+(nt.height-ut.height)/2}:function(){return nt.top},j="right"===H?function(){return nt.right-ut.width}:"center"===H?function(){return nt.left+(nt.width-ut.width)/2}:function(){return nt.left},function(){ut=this.node().getBoundingClientRect();var Z=j()-it.left,G=Q()-it.top,K=U.gd||{};if(U.gd){K._fullLayout._calcInverseTransform(K);var at=g.apply3DTransform(K._fullLayout._invTransform)(Z,G);Z=at[0],G=at[1]}return this.style({top:G+"px",left:Z+"px","z-index":1e3}),this}}W.convertEntities=d,W.sanitizeHTML=function(z){z=z.replace(w," ");for(var U=document.createElement("p"),H=U,J=[],nt=z.split(p),it=0;it<nt.length;it++){var ut=nt[it],Q=ut.match(o),j=Q&&Q[2].toLowerCase();if(j in s)if(Q[1])J.length&&(H=J.pop());else{var Z=Q[4],G=S(Z,M),K=G?{style:G}:{};if("a"===j){var at=S(Z,b);if(at){var $=N(at);if($){K.href=$;var X=S(Z,L);X&&(K.target=X)}}}var rt=document.createElement(j);H.appendChild(rt),A.select(rt).attr(K),H=rt,J.push(rt)}else H.appendChild(document.createTextNode(d(ut)))}return U.innerHTML},W.lineCount=function(z){return z.selectAll("tspan.line").size()||1},W.positionText=function(z,U,H){return z.each(function(){var J=A.select(this);function nt(Q,j){return void 0===j?null===(j=J.attr(Q))&&(J.attr(Q,0),j=0):J.attr(Q,j),j}var it=nt("x",U),ut=nt("y",H);"text"===this.nodeName&&J.selectAll("tspan.line").attr({x:it,y:ut})})};var O="1px ";W.makeTextShadow=function(B){return O+O+O+B+", -"+O+"-"+O+O+B+", "+O+"-"+O+O+B+", -"+O+O+O+B},W.makeEditable=function(B,z){var U=z.gd,H=z.delegate,J=A.dispatch("edit","input","cancel"),nt=H||B;if(B.style({"pointer-events":H?"none":"all"}),1!==B.size())throw new Error("boo");function it(){(function Q(){var Z=A.select(U).select(".svg-container"),G=Z.append("div"),K=B.node().style,at=parseFloat(K.fontSize||12),$=z.text;void 0===$&&($=B.attr("data-unformatted")),G.classed("plugin-editable editable",!0).style({position:"absolute","font-family":K.fontFamily||"Arial","font-size":at,color:z.fill||K.fill||"black",opacity:1,"background-color":z.background||"transparent",outline:"#ffffff33 1px solid",margin:[-at/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text($).call(k(B,Z,z)).on("blur",function(){U._editing=!1,B.text(this.textContent).style({opacity:1});var rt,X=A.select(this).attr("class");(rt=X?"."+X.split(" ")[0]+"-math-group":"[class*=-math-group]")&&A.select(B.node().parentNode).select(rt).style({opacity:0});var et=this.textContent;A.select(this).transition().duration(0).remove(),A.select(document).on("mouseup",null),J.edit.call(B,et)}).on("focus",function(){var X=this;U._editing=!0,A.select(document).on("mouseup",function(){if(A.event.target===X)return!1;document.activeElement===G.node()&&G.node().blur()})}).on("keyup",function(){27===A.event.which?(U._editing=!1,B.style({opacity:1}),A.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),J.cancel.call(B,this.textContent)):(J.input.call(B,this.textContent),A.select(this).call(k(B,Z,z)))}).on("keydown",function(){13===A.event.which&&this.blur()}).call(ut)})(),B.style({opacity:0});var Z,j=nt.attr("class");(Z=j?"."+j.split(" ")[0]+"-math-group":"[class*=-math-group]")&&A.select(B.node().parentNode).select(Z).style({opacity:0})}function ut(j){var Z=j.node(),G=document.createRange();G.selectNodeContents(Z);var K=window.getSelection();K.removeAllRanges(),K.addRange(G),Z.focus()}return z.immediate?it():nt.on("click",it),A.rebind(B,J,"on")}},79990:function(q,W){"use strict";var t={};function A(g){g&&null!==g.timer&&(clearTimeout(g.timer),g.timer=null)}W.throttle=function(i,P,C){var u=t[i],y=Date.now();if(!u){for(var e in t)t[e].ts<y-6e4&&delete t[e];u=t[i]={ts:0,timer:null}}function r(){C(),u.ts=Date.now(),u.onDone&&(u.onDone(),u.onDone=null)}A(u),y>u.ts+P?r():u.timer=setTimeout(function(){r(),u.timer=null},P)},W.done=function(g){var i=t[g];return i&&i.timer?new Promise(function(P){var C=i.onDone;i.onDone=function(){C&&C(),P(),i.onDone=null}}):Promise.resolve()},W.clear=function(g){if(g)A(t[g]),delete t[g];else for(var i in t)W.clear(i)}},58163:function(q,W,t){"use strict";var A=t(92770);q.exports=function(i,P){if(i>0)return Math.log(i)/Math.LN10;var C=Math.log(Math.min(P[0],P[1]))/Math.LN10;return A(C)||(C=Math.log(Math.max(P[0],P[1]))/Math.LN10-6),C}},90973:function(q,W,t){"use strict";var A=q.exports={},g=t(78776).locationmodeToLayer,i=t(96892).zL;A.getTopojsonName=function(P){return[P.scope.replace(/ /g,"-"),"_",P.resolution.toString(),"m"].join("")},A.getTopojsonPath=function(P,C){return P+C+".json"},A.getTopojsonFeatures=function(P,C){return i(C,C.objects[g[P.locationmode]]).features}},37815:function(q){"use strict";q.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},92177:function(q){"use strict";q.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},14458:function(q,W,t){"use strict";var A=t(73972);q.exports=function(i){for(var y,e,P=A.layoutArrayContainers,C=A.layoutArrayRegexes,u=i.split("[")[0],r=0;r<C.length;r++)if((e=i.match(C[r]))&&0===e.index){y=e[0];break}if(y||(y=P[P.indexOf(u)]),!y)return!1;var l=i.substr(y.length);return l?!!(e=l.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:y,index:Number(e[1]),property:e[3]||""}:{array:y,index:"",property:""}}},30962:function(q,W,t){"use strict";var A=t(1426).extendFlat,g=t(41965),i={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},P={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},C=i.flags.slice().concat(["fullReplot"]),u=P.flags.slice().concat("layoutReplot");function y(l){for(var a={},s=0;s<l.length;s++)a[l[s]]=!1;return a}function e(l,a,s){var c=A({},l);for(var f in c){var m=c[f];g(m)&&(c[f]=r(m,a,0,f))}return"from-root"===s&&(c.editType=a),c}function r(l,a,s,c){if(l.valType){var f=A({},l);if(f.editType=a,Array.isArray(l.items)){f.items=new Array(l.items.length);for(var m=0;m<l.items.length;m++)f.items[m]=r(l.items[m],a)}return f}return e(l,a,"_"===c.charAt(0)?"nested":"from-root")}q.exports={traces:i,layout:P,traceFlags:function(){return y(C)},layoutFlags:function(){return y(u)},update:function(l,a){var s=a.editType;if(s&&"none"!==s)for(var c=s.split("+"),f=0;f<c.length;f++)l[c[f]]=!0},overrideAll:e}},58377:function(q,W,t){"use strict";var A=t(92770),g=t(27812),i=t(73972),P=t(71828),C=t(74875),u=t(41675),y=t(7901),e=u.cleanId,r=u.getFromTrace,l=i.traceIs;function a(v,M){var b=v[M],L=M.charAt(0);b&&"paper"!==b&&(v[M]=e(b,L,!0))}function s(v){function M(b,L){v[b]&&(!v.title||!v.title[L])&&(v.title||(v.title={}),v.title[L]=v[b],delete v[b])}v&&(("string"==typeof v.title||"number"==typeof v.title)&&(v.title={text:v.title}),M("titlefont","font"),M("titleposition","position"),M("titleside","side"),M("titleoffset","offset"))}function c(v){if(!P.isPlainObject(v))return!1;var M=v.name;return delete v.name,delete v.showlegend,("string"==typeof M||"number"==typeof M)&&String(M)}function f(v,M,b,L){if(b&&!L)return v;if(L&&!b||!v.trim())return M;if(!M.trim())return v;var S,x=Math.min(v.length,M.length);for(S=0;S<x&&v.charAt(S)===M.charAt(S);S++);return v.substr(0,S).trim()}function m(v){var M="middle",b="center";return"string"==typeof v&&(-1!==v.indexOf("top")?M="top":-1!==v.indexOf("bottom")&&(M="bottom"),-1!==v.indexOf("left")?b="left":-1!==v.indexOf("right")&&(b="right")),M+" "+b}function h(v,M){return M in v&&"object"==typeof v[M]&&0===Object.keys(v[M]).length}W.clearPromiseQueue=function(v){Array.isArray(v._promises)&&v._promises.length>0&&P.log("Clearing previous rejected promises from queue."),v._promises=[]},W.cleanLayout=function(v){var M,b;v||(v={}),v.xaxis1&&(v.xaxis||(v.xaxis=v.xaxis1),delete v.xaxis1),v.yaxis1&&(v.yaxis||(v.yaxis=v.yaxis1),delete v.yaxis1),v.scene1&&(v.scene||(v.scene=v.scene1),delete v.scene1);var L=(C.subplotsRegistry.cartesian||{}).attrRegex,x=(C.subplotsRegistry.polar||{}).attrRegex,S=(C.subplotsRegistry.ternary||{}).attrRegex,T=(C.subplotsRegistry.gl3d||{}).attrRegex,n=Object.keys(v);for(M=0;M<n.length;M++){var E=n[M];if(L&&L.test(E)){var d=v[E];d.anchor&&"free"!==d.anchor&&(d.anchor=e(d.anchor)),d.overlaying&&(d.overlaying=e(d.overlaying)),d.type||(d.isdate?d.type="date":d.islog?d.type="log":!1===d.isdate&&!1===d.islog&&(d.type="linear")),("withzero"===d.autorange||"tozero"===d.autorange)&&(d.autorange=!0,d.rangemode="tozero"),d.insiderange&&delete d.range,delete d.islog,delete d.isdate,delete d.categories,h(d,"domain")&&delete d.domain,void 0!==d.autotick&&(void 0===d.tickmode&&(d.tickmode=d.autotick?"auto":"linear"),delete d.autotick),s(d)}else if(x&&x.test(E))s(v[E].radialaxis);else if(S&&S.test(E)){var D=v[E];s(D.aaxis),s(D.baxis),s(D.caxis)}else if(T&&T.test(E)){var N=v[E],k=N.cameraposition;if(Array.isArray(k)&&4===k[0].length){var B=k[1],z=k[2],U=g([],k[0]),H=[];for(b=0;b<3;++b)H[b]=B[b]+z*U[2+4*b];N.camera={eye:{x:H[0],y:H[1],z:H[2]},center:{x:B[0],y:B[1],z:B[2]},up:{x:0,y:0,z:1}},delete N.cameraposition}s(N.xaxis),s(N.yaxis),s(N.zaxis)}}var J=Array.isArray(v.annotations)?v.annotations.length:0;for(M=0;M<J;M++){var nt=v.annotations[M];!P.isPlainObject(nt)||(nt.ref&&("paper"===nt.ref?(nt.xref="paper",nt.yref="paper"):"data"===nt.ref&&(nt.xref="x",nt.yref="y"),delete nt.ref),a(nt,"xref"),a(nt,"yref"))}var it=Array.isArray(v.shapes)?v.shapes.length:0;for(M=0;M<it;M++){var ut=v.shapes[M];!P.isPlainObject(ut)||(a(ut,"xref"),a(ut,"yref"))}var Q=Array.isArray(v.images)?v.images.length:0;for(M=0;M<Q;M++){var j=v.images[M];!P.isPlainObject(j)||(a(j,"xref"),a(j,"yref"))}var Z=v.legend;return Z&&(Z.x>3?(Z.x=1.02,Z.xanchor="left"):Z.x<-2&&(Z.x=-.02,Z.xanchor="right"),Z.y>3?(Z.y=1.02,Z.yanchor="bottom"):Z.y<-2&&(Z.y=-.02,Z.yanchor="top")),s(v),"rotate"===v.dragmode&&(v.dragmode="orbit"),y.clean(v),v.template&&v.template.layout&&W.cleanLayout(v.template.layout),v},W.cleanData=function(v){for(var M=0;M<v.length;M++){var L,b=v[M];if("histogramy"===b.type&&"xbins"in b&&!("ybins"in b)&&(b.ybins=b.xbins,delete b.xbins),b.error_y&&"opacity"in b.error_y){var x=y.defaults,S=b.error_y.color||(l(b,"bar")?y.defaultLine:x[M%x.length]);b.error_y.color=y.addOpacity(y.rgb(S),y.opacity(S)*b.error_y.opacity),delete b.error_y.opacity}if("bardir"in b&&("h"===b.bardir&&(l(b,"bar")||"histogram"===b.type.substr(0,9))&&(b.orientation="h",W.swapXYData(b)),delete b.bardir),"histogramy"===b.type&&W.swapXYData(b),("histogramx"===b.type||"histogramy"===b.type)&&(b.type="histogram"),"scl"in b&&!("colorscale"in b)&&(b.colorscale=b.scl,delete b.scl),"reversescl"in b&&!("reversescale"in b)&&(b.reversescale=b.reversescl,delete b.reversescl),b.xaxis&&(b.xaxis=e(b.xaxis,"x")),b.yaxis&&(b.yaxis=e(b.yaxis,"y")),l(b,"gl3d")&&b.scene&&(b.scene=C.subplotsRegistry.gl3d.cleanId(b.scene)),!l(b,"pie-like")&&!l(b,"bar-like"))if(Array.isArray(b.textposition))for(L=0;L<b.textposition.length;L++)b.textposition[L]=m(b.textposition[L]);else b.textposition&&(b.textposition=m(b.textposition));var T=i.getModule(b);if(T&&T.colorbar){var n=T.colorbar.container,E=n?b[n]:b;E&&E.colorscale&&("YIGnBu"===E.colorscale&&(E.colorscale="YlGnBu"),"YIOrRd"===E.colorscale&&(E.colorscale="YlOrRd"))}if("surface"===b.type&&P.isPlainObject(b.contours)){var d=["x","y","z"];for(L=0;L<d.length;L++){var F=b.contours[d[L]];!P.isPlainObject(F)||(F.highlightColor&&(F.highlightcolor=F.highlightColor,delete F.highlightColor),F.highlightWidth&&(F.highlightwidth=F.highlightWidth,delete F.highlightWidth))}}if("candlestick"===b.type||"ohlc"===b.type){var D=!1!==(b.increasing||{}).showlegend,N=!1!==(b.decreasing||{}).showlegend,k=c(b.increasing),O=c(b.decreasing);if(!1!==k&&!1!==O){var B=f(k,O,D,N);B&&(b.name=B)}else(k||O)&&!b.name&&(b.name=k||O)}if(Array.isArray(b.transforms)){var z=b.transforms;for(L=0;L<z.length;L++){var U=z[L];if(P.isPlainObject(U))switch(U.type){case"filter":U.filtersrc&&(U.target=U.filtersrc,delete U.filtersrc),U.calendar&&(U.valuecalendar||(U.valuecalendar=U.calendar),delete U.calendar);break;case"groupby":if(U.styles=U.styles||U.style,U.styles&&!Array.isArray(U.styles)){var H=U.styles,J=Object.keys(H);U.styles=[];for(var nt=0;nt<J.length;nt++)U.styles.push({target:J[nt],value:H[J[nt]]})}}}}h(b,"line")&&delete b.line,"marker"in b&&(h(b.marker,"line")&&delete b.marker.line,h(b,"marker")&&delete b.marker),y.clean(b),b.autobinx&&(delete b.autobinx,delete b.xbins),b.autobiny&&(delete b.autobiny,delete b.ybins),s(b),b.colorbar&&s(b.colorbar),b.marker&&b.marker.colorbar&&s(b.marker.colorbar),b.line&&b.line.colorbar&&s(b.line.colorbar),b.aaxis&&s(b.aaxis),b.baxis&&s(b.baxis)}},W.swapXYData=function(v){var M;if(P.swapAttrs(v,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(v.z)&&Array.isArray(v.z[0])&&(v.transpose?delete v.transpose:v.transpose=!0),v.error_x&&v.error_y){var b=v.error_y,L="copy_ystyle"in b?b.copy_ystyle:!(b.color||b.thickness||b.width);P.swapAttrs(v,["error_?.copy_ystyle"]),L&&P.swapAttrs(v,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof v.hoverinfo){var x=v.hoverinfo.split("+");for(M=0;M<x.length;M++)"x"===x[M]?x[M]="y":"y"===x[M]&&(x[M]="x");v.hoverinfo=x.join("+")}},W.coerceTraceIndices=function(v,M){if(A(M))return[M];if(!Array.isArray(M)||!M.length)return v.data.map(function(x,S){return S});if(Array.isArray(M)){for(var b=[],L=0;L<M.length;L++)P.isIndex(M[L],v.data.length)?b.push(M[L]):P.warn("trace index (",M[L],") is not a number or is out of bounds");return b}return M},W.manageArrayContainers=function(v,M,b){var L=v.obj,x=v.parts,S=x.length,T=x[S-1],n=A(T);if(n&&null===M){var E=x.slice(0,S-1).join(".");P.nestedProperty(L,E).get().splice(T,1)}else n&&void 0===v.get()&&void 0===v.get()&&(b[v.astr]=null),v.set(M)};var w=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function p(v){var M=v.search(w);if(M>0)return v.substr(0,M)}W.hasParent=function(v,M){for(var b=p(M);b;){if(b in v)return!0;b=p(b)}return!1};var o=["x","y","z"];W.clearAxisTypes=function(v,M,b){for(var L=0;L<M.length;L++)for(var x=v._fullData[L],S=0;S<3;S++){var T=r(v,x,o[S]);if(T&&"log"!==T.type){var n=T._name,E=T._id.substr(1);if("scene"===E.substr(0,5)){if(void 0!==b[E])continue;n=E+"."+n}var d=n+".type";void 0===b[n]&&void 0===b[d]&&P.nestedProperty(v.layout,d).set(null)}}}},10641:function(q,W,t){"use strict";var A=t(72391);W._doPlot=A._doPlot,W.newPlot=A.newPlot,W.restyle=A.restyle,W.relayout=A.relayout,W.redraw=A.redraw,W.update=A.update,W._guiRestyle=A._guiRestyle,W._guiRelayout=A._guiRelayout,W._guiUpdate=A._guiUpdate,W._storeDirectGUIEdit=A._storeDirectGUIEdit,W.react=A.react,W.extendTraces=A.extendTraces,W.prependTraces=A.prependTraces,W.addTraces=A.addTraces,W.deleteTraces=A.deleteTraces,W.moveTraces=A.moveTraces,W.purge=A.purge,W.addFrames=A.addFrames,W.deleteFrames=A.deleteFrames,W.animate=A.animate,W.setPlotConfig=A.setPlotConfig;var g=t(24401).getGraphDiv,i=t(34031).eraseActiveShape;W.deleteActiveShape=function(C){return i(g(C))},W.toImage=t(403),W.validate=t(84936),W.downloadImage=t(7239);var P=t(96318);W.makeTemplate=P.makeTemplate,W.validateTemplate=P.validateTemplate},6611:function(q,W,t){"use strict";var A=t(41965),g=t(64213),i=t(47769),P=t(65888).sorterAsc,C=t(73972);W.containerArrayMatch=t(14458);var u=W.isAddVal=function(r){return"add"===r||A(r)},y=W.isRemoveVal=function(r){return null===r||"remove"===r};W.applyContainerArrayChanges=function(r,l,a,s,c){var f=l.astr,m=C.getComponentMethod(f,"supplyLayoutDefaults"),h=C.getComponentMethod(f,"draw"),w=C.getComponentMethod(f,"drawOne"),p=s.replot||s.recalc||m===g||h===g,o=r.layout,v=r._fullLayout;if(a[""]){Object.keys(a).length>1&&i.warn("Full array edits are incompatible with other edits",f);var M=a[""][""];if(y(M))l.set(null);else{if(!Array.isArray(M))return i.warn("Unrecognized full array edit value",f,M),!0;l.set(M)}return!p&&(m(o,v),h(r),!0)}var d,F,D,N,k,O,B,b=Object.keys(a).map(Number).sort(P),L=l.get(),x=L||[],S=c(v,f).get(),T=[],n=-1,E=x.length;for(d=0;d<b.length;d++)if(N=a[D=b[d]],k=Object.keys(N),B=u(O=N[""]),D<0||D>x.length-(B?0:1))i.warn("index out of range",f,D);else if(void 0!==O)k.length>1&&i.warn("Insertion & removal are incompatible with edits to the same index.",f,D),y(O)?T.push(D):B?("add"===O&&(O={}),x.splice(D,0,O),S&&S.splice(D,0,{})):i.warn("Unrecognized full object edit value",f,D,O),-1===n&&(n=D);else for(F=0;F<k.length;F++)c(x[D],k[F],f+"["+D+"].").set(N[k[F]]);for(d=T.length-1;d>=0;d--)x.splice(T[d],1),S&&S.splice(T[d],1);if(x.length?L||l.set(x):l.set(null),p)return!1;if(m(o,v),w!==g){var U;if(-1===n)U=b;else{for(E=Math.max(x.length,E),U=[],d=0;d<b.length&&!((D=b[d])>=n);d++)U.push(D);for(d=n;d<E;d++)U.push(d)}for(d=0;d<U.length;d++)w(r,U[d])}else h(r);return!0}},72391:function(q,W,t){"use strict";var A=t(39898),g=t(92770),i=t(57035),P=t(71828),C=P.nestedProperty,u=t(11086),y=t(10847),e=t(73972),r=t(86281),l=t(74875),a=t(89298),s=t(23608),c=t(13838),f=t(91424),m=t(7901),h=t(4305).initInteractions,w=t(77922),p=t(47322).clearOutline,o=t(72075).dfltConfig,v=t(6611),M=t(58377),b=t(61549),L=t(30962),x=t(85555).AX_NAME_PATTERN,S=0;function E(ft){var pt=ft._fullLayout;pt._redrawFromAutoMarginCount?pt._redrawFromAutoMarginCount--:ft.emit("plotly_afterplot")}function F(ft,pt){try{ft._fullLayout._paper.style("background",pt)}catch(kt){P.error(kt)}}function D(ft,pt){F(ft,m.combine(pt,"white"))}function N(ft,pt){if(!ft._context){ft._context=P.extendDeep({},o);var kt=A.select("base");ft._context._baseUrl=kt.size()&&kt.attr("href")?window.location.href.split("#")[0]:""}var ee,se,Be,Zt=ft._context;if(pt){for(se=Object.keys(pt),ee=0;ee<se.length;ee++)"editable"!==(Be=se[ee])&&"edits"!==Be&&Be in Zt&&(Zt[Be]="setBackground"===Be&&"opaque"===pt[Be]?D:pt[Be]);pt.plot3dPixelRatio&&!Zt.plotGlPixelRatio&&(Zt.plotGlPixelRatio=Zt.plot3dPixelRatio);var Ke=pt.editable;if(void 0!==Ke)for(Zt.editable=Ke,se=Object.keys(Zt.edits),ee=0;ee<se.length;ee++)Zt.edits[se[ee]]=Ke;if(pt.edits)for(se=Object.keys(pt.edits),ee=0;ee<se.length;ee++)(Be=se[ee])in Zt.edits&&(Zt.edits[Be]=pt.edits[Be]);Zt._exportedPlot=pt._exportedPlot}Zt.staticPlot&&(Zt.editable=!1,Zt.edits={},Zt.autosizable=!1,Zt.scrollZoom=!1,Zt.doubleClick=!1,Zt.showTips=!1,Zt.showLink=!1,Zt.displayModeBar=!1),"hover"===Zt.displayModeBar&&!i&&(Zt.displayModeBar=!0),("transparent"===Zt.setBackground||"function"!=typeof Zt.setBackground)&&(Zt.setBackground=F),Zt._hasZeroHeight=Zt._hasZeroHeight||0===ft.clientHeight,Zt._hasZeroWidth=Zt._hasZeroWidth||0===ft.clientWidth;var xe=Zt.scrollZoom,Pe=Zt._scrollZoom={};if(!0===xe)Pe.cartesian=1,Pe.gl3d=1,Pe.geo=1,Pe.mapbox=1;else if("string"==typeof xe){var Ge=xe.split("+");for(ee=0;ee<Ge.length;ee++)Pe[Ge[ee]]=1}else!1!==xe&&(Pe.gl3d=1,Pe.geo=1,Pe.mapbox=1)}function B(ft,pt){var ee,se,kt=pt+1,Zt=[];for(ee=0;ee<ft.length;ee++)Zt.push((se=ft[ee])<0?kt+se:se);return Zt}function z(ft,pt,kt){var Zt,ee;for(Zt=0;Zt<pt.length;Zt++){if((ee=pt[Zt])!==parseInt(ee,10))throw new Error("all values in "+kt+" must be integers");if(ee>=ft.data.length||ee<-ft.data.length)throw new Error(kt+" must be valid indices for gd.data.");if(pt.indexOf(ee,Zt+1)>-1||ee>=0&&pt.indexOf(-ft.data.length+ee)>-1||ee<0&&pt.indexOf(ft.data.length+ee)>-1)throw new Error("each index in "+kt+" must be unique.")}}function U(ft,pt,kt){if(!Array.isArray(ft.data))throw new Error("gd.data must be an array.");if(void 0===pt)throw new Error("currentIndices is a required argument.");if(Array.isArray(pt)||(pt=[pt]),z(ft,pt,"currentIndices"),void 0!==kt&&!Array.isArray(kt)&&(kt=[kt]),void 0!==kt&&z(ft,kt,"newIndices"),void 0!==kt&&pt.length!==kt.length)throw new Error("current and new indices must be of equal length.")}function it(ft,pt,kt,Zt,ee){!function J(ft,pt,kt,Zt){var ee=P.isPlainObject(Zt);if(!Array.isArray(ft.data))throw new Error("gd.data must be an array");if(!P.isPlainObject(pt))throw new Error("update must be a key:value object");if(void 0===kt)throw new Error("indices must be an integer or array of integers");for(var se in z(ft,kt,"indices"),pt){if(!Array.isArray(pt[se])||pt[se].length!==kt.length)throw new Error("attribute "+se+" must be an array of length equal to indices array length");if(ee&&(!(se in Zt)||!Array.isArray(Zt[se])||Zt[se].length!==pt[se].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(ft,pt,kt,Zt);for(var se=function nt(ft,pt,kt,Zt){var Ke,xe,Pe,Ge,ee=P.isPlainObject(Zt),se=[];for(var gr in Array.isArray(kt)||(kt=[kt]),kt=B(kt,ft.data.length-1),pt)for(var ue=0;ue<kt.length;ue++){if(Ke=(xe=C(ft.data[kt[ue]],gr)).get(),!P.isArrayOrTypedArray(Pe=pt[gr][ue]))throw new Error("attribute: "+gr+" index: "+ue+" must be an array");if(!P.isArrayOrTypedArray(Ke))throw new Error("cannot extend missing or non-array attribute: "+gr);if(Ke.constructor!==Pe.constructor)throw new Error("cannot extend array with an array of a different type: "+gr);g(Ge=ee?Zt[gr][ue]:Zt)||(Ge=-1),se.push({prop:xe,target:Ke,insert:Pe,maxp:Math.floor(Ge)})}return se}(ft,pt,kt,Zt),Be={},Ke={},xe=0;xe<se.length;xe++){var Pe=se[xe].prop,gr=ee(se[xe].target,se[xe].insert,se[xe].maxp);Pe.set(gr[0]),Array.isArray(Be[Pe.astr])||(Be[Pe.astr]=[]),Be[Pe.astr].push(gr[1]),Array.isArray(Ke[Pe.astr])||(Ke[Pe.astr]=[]),Ke[Pe.astr].push(se[xe].target.length)}return{update:Be,maxPoints:Ke}}function ut(ft,pt){var kt=new ft.constructor(ft.length+pt.length);return kt.set(ft),kt.set(pt,ft.length),kt}function at(ft,pt,kt,Zt){ft=P.getGraphDiv(ft),M.clearPromiseQueue(ft);var ee={};if("string"==typeof pt)ee[pt]=kt;else{if(!P.isPlainObject(pt))return P.warn("Restyle fail.",pt,kt,Zt),Promise.reject();ee=P.extendFlat({},pt),void 0===Zt&&(Zt=kt)}Object.keys(ee).length&&(ft.changed=!0);var se=M.coerceTraceIndices(ft,Zt),Be=st(ft,ee,se),Ke=Be.flags;Ke.calc&&(ft.calcdata=void 0),Ke.clearAxisTypes&&M.clearAxisTypes(ft,se,{});var xe=[];Ke.fullReplot?xe.push(W._doPlot):(xe.push(l.previousPromises),l.supplyDefaults(ft),Ke.markerSize&&(l.doCalcdata(ft),Lt(xe)),Ke.style&&xe.push(b.doTraceStyle),Ke.colorbars&&xe.push(b.doColorBars),xe.push(E)),xe.push(l.rehover,l.redrag,l.reselect),y.add(ft,at,[ft,Be.undoit,Be.traces],at,[ft,Be.redoit,Be.traces]);var Pe=P.syncOrAsync(xe,ft);return(!Pe||!Pe.then)&&(Pe=Promise.resolve()),Pe.then(function(){return ft.emit("plotly_restyle",Be.eventData),ft})}function $(ft){return void 0===ft?null:ft}function X(ft,pt){return pt?function(kt,Zt,ee){var se=C(kt,Zt),Be=se.set;return se.set=function(Ke){rt((ee||"")+Zt,se.get(),Ke,ft),Be(Ke)},se}:C}function rt(ft,pt,kt,Zt){if(Array.isArray(pt)||Array.isArray(kt))for(var ee=Array.isArray(pt)?pt:[],se=Array.isArray(kt)?kt:[],Be=Math.max(ee.length,se.length),Ke=0;Ke<Be;Ke++)rt(ft+"["+Ke+"]",ee[Ke],se[Ke],Zt);else if(P.isPlainObject(pt)||P.isPlainObject(kt)){var xe=P.isPlainObject(pt)?pt:{},Pe=P.isPlainObject(kt)?kt:{},Ge=P.extendFlat({},xe,Pe);for(var gr in Ge)rt(ft+"."+gr,xe[gr],Pe[gr],Zt)}else void 0===Zt[ft]&&(Zt[ft]=$(pt))}function st(ft,pt,kt){var Pe,Zt=ft._fullLayout,ee=ft._fullData,se=ft.data,Be=Zt._guiEditing,Ke=X(Zt._preGUI,Be),xe=P.extendDeepAll({},pt);dt(pt);var Ne,Ge=L.traceFlags(),gr={},ue={};function Ye(){return kt.map(function(){})}function xr(hn){var hr=a.id2name(hn);-1===Ne.indexOf(hr)&&Ne.push(hr)}function rr(hn){return"LAYOUT"+hn+".autorange"}function ce(hn){return"LAYOUT"+hn+".range"}function re(hn){for(var hr=hn;hr<ee.length;hr++)if(ee[hr]._input===se[hn])return ee[hr]}function ve(hn,hr,Ar){if(Array.isArray(hn))hn.forEach(function(dn){ve(dn,hr,Ar)});else if(!(hn in pt)&&!M.hasParent(pt,hn)){var Br;if("LAYOUT"===hn.substr(0,6))Br=Ke(ft.layout,hn.replace("LAYOUT",""));else{var Or=kt[Ar];Br=X(Zt._tracePreGUI[re(Or)._fullInput.uid],Be)(se[Or],hn)}hn in ue||(ue[hn]=Ye()),void 0===ue[hn][Ar]&&(ue[hn][Ar]=$(Br.get())),void 0!==hr&&Br.set(hr)}}function be(hn){return function(hr){return ee[hr][hn]}}function Ae(hn){return function(hr,Ar){return!1===hr?ee[kt[Ar]][hn]:null}}for(var Te in pt){if(M.hasParent(pt,Te))throw new Error("cannot set "+Te+" and a parent attribute simultaneously");var Ie,Xe,ar,nr,cr,Ut,Re=pt[Te];if(("autobinx"===Te||"autobiny"===Te)&&(Te=Te.charAt(Te.length-1)+"bins",Re=Array.isArray(Re)?Re.map(Ae(Te)):!1===Re?kt.map(be(Te)):null),gr[Te]=Re,"LAYOUT"!==Te.substr(0,6)){for(ue[Te]=Ye(),Pe=0;Pe<kt.length;Pe++)if(Ie=se[kt[Pe]],Xe=re(kt[Pe]),nr=(ar=X(Zt._tracePreGUI[Xe._fullInput.uid],Be)(Ie,Te)).get(),void 0!==(cr=Array.isArray(Re)?Re[Pe%Re.length]:Re)){var Se=ar.parts[ar.parts.length-1],Ce=Te.substr(0,Te.length-Se.length-1),We=Ce?Ce+".":"",qe=Ce?C(Xe,Ce).get():Xe;if((Ut=r.getTraceValObject(Xe,ar.parts))&&Ut.impliedEdits&&null!==cr)for(var or in Ut.impliedEdits)ve(P.relativeAttr(Te,or),Ut.impliedEdits[or],Pe);else if("thicknessmode"!==Se&&"lenmode"!==Se||nr===cr||"fraction"!==cr&&"pixels"!==cr||!qe){if("type"===Te&&("pie"===cr!=("pie"===nr)||"funnelarea"===cr!=("funnelarea"===nr))){var Pr="x",Jr="y";("bar"===cr||"bar"===nr)&&"h"===Ie.orientation&&(Pr="y",Jr="x"),P.swapAttrs(Ie,["?","?src"],"labels",Pr),P.swapAttrs(Ie,["d?","?0"],"label",Pr),P.swapAttrs(Ie,["?","?src"],"values",Jr),"pie"===nr||"funnelarea"===nr?(C(Ie,"marker.color").set(C(Ie,"marker.colors").get()),Zt._pielayer.selectAll("g.trace").remove()):e.traceIs(Ie,"cartesian")&&C(Ie,"marker.colors").set(C(Ie,"marker.color").get())}}else{var _e=Zt._size,De=qe.orient,sr="top"===De||"bottom"===De;if("thicknessmode"===Se){var yr=sr?_e.h:_e.w;ve(We+"thickness",qe.thickness*("fraction"===cr?1/yr:yr),Pe)}else{var dr=sr?_e.w:_e.h;ve(We+"len",qe.len*("fraction"===cr?1/dr:dr),Pe)}}if(ue[Te][Pe]=$(nr),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Te)){if("orientation"===Te){ar.set(cr);var Wr=Ie.x&&!Ie.y?"h":"v";if((ar.get()||Wr)===Xe.orientation)continue}else"orientationaxes"===Te&&(Ie.orientation={v:"h",h:"v"}[Xe.orientation]);M.swapXYData(Ie),Ge.calc=Ge.clearAxisTypes=!0}else-1!==l.dataArrayContainers.indexOf(ar.parts[0])?(M.manageArrayContainers(ar,cr,ue),Ge.calc=!0):(Ut?Ut.arrayOk&&!e.traceIs(Xe,"regl")&&(P.isArrayOrTypedArray(cr)||P.isArrayOrTypedArray(nr))?Ge.calc=!0:L.update(Ge,Ut):Ge.calc=!0,ar.set(cr))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(Te)&&a.swap(ft,kt),"orientationaxes"===Te){var nn=C(ft.layout,"hovermode"),Nr=nn.get();"x"===Nr?nn.set("y"):"y"===Nr?nn.set("x"):"x unified"===Nr?nn.set("y unified"):"y unified"===Nr&&nn.set("x unified")}if(-1!==["orientation","type"].indexOf(Te)){for(Ne=[],Pe=0;Pe<kt.length;Pe++){var Dn=se[kt[Pe]];e.traceIs(Dn,"cartesian")&&(xr(Dn.xaxis||"x"),xr(Dn.yaxis||"y"))}ve(Ne.map(rr),!0,0),ve(Ne.map(ce),[0,1],0)}}else ar=Ke(ft.layout,Te.replace("LAYOUT","")),ue[Te]=[$(ar.get())],ar.set(Array.isArray(Re)?Re[0]:Re),Ge.calc=!0}return(Ge.calc||Ge.plot)&&(Ge.fullReplot=!0),{flags:Ge,undoit:ue,redoit:gr,traces:kt,eventData:P.extendDeepNoArrays([],[xe,kt])}}function dt(ft){var ee,se,Be,pt=P.counterRegex("axis",".title",!1,!1),kt=/colorbar\.title$/,Zt=Object.keys(ft);for(ee=0;ee<Zt.length;ee++)Be=ft[se=Zt[ee]],"title"!==se&&!pt.test(se)&&!kt.test(se)||"string"!=typeof Be&&"number"!=typeof Be?se.indexOf("titlefont")>-1&&-1===se.indexOf("grouptitlefont")?Ke(se,se.replace("titlefont","title.font")):se.indexOf("titleposition")>-1?Ke(se,se.replace("titleposition","title.position")):se.indexOf("titleside")>-1?Ke(se,se.replace("titleside","title.side")):se.indexOf("titleoffset")>-1&&Ke(se,se.replace("titleoffset","title.offset")):Ke(se,se.replace("title","title.text"));function Ke(xe,Pe){ft[Pe]=ft[xe],delete ft[xe]}}function bt(ft,pt,kt){ft=P.getGraphDiv(ft),M.clearPromiseQueue(ft);var Zt={};if("string"==typeof pt)Zt[pt]=kt;else{if(!P.isPlainObject(pt))return P.warn("Relayout fail.",pt,kt),Promise.reject();Zt=P.extendFlat({},pt)}Object.keys(Zt).length&&(ft.changed=!0);var ee=At(ft,Zt),se=ee.flags;se.calc&&(ft.calcdata=void 0);var Be=[l.previousPromises];se.layoutReplot?Be.push(b.layoutReplot):Object.keys(Zt).length&&(gt(ft,se,ee)||l.supplyDefaults(ft),se.legend&&Be.push(b.doLegend),se.layoutstyle&&Be.push(b.layoutStyles),se.axrange&&Lt(Be,ee.rangesAltered),se.ticks&&Be.push(b.doTicksRelayout),se.modebar&&Be.push(b.doModeBar),se.camera&&Be.push(b.doCamera),se.colorbars&&Be.push(b.doColorBars),Be.push(E)),Be.push(l.rehover,l.redrag,l.reselect),y.add(ft,bt,[ft,ee.undoit],bt,[ft,ee.redoit]);var Ke=P.syncOrAsync(Be,ft);return(!Ke||!Ke.then)&&(Ke=Promise.resolve(ft)),Ke.then(function(){return ft.emit("plotly_relayout",ee.eventData),ft})}function gt(ft,pt,kt){var Zt=ft._fullLayout;if(!pt.axrange)return!1;for(var ee in pt)if("axrange"!==ee&&pt[ee])return!1;var se,Be,Ke=function(Ne,Ye){return P.coerce(se,Be,c,Ne,Ye)},xe={};for(var Pe in kt.rangesAltered){var Ge=a.id2name(Pe);if(s(se=ft.layout[Ge],Be=Zt[Ge],Ke,xe),Be._matchGroup)for(var gr in Be._matchGroup)if(gr!==Pe){var ue=Zt[a.id2name(gr)];ue.autorange=Be.autorange,ue.range=Be.range.slice(),ue._input.range=Be.range.slice()}}return!0}function Lt(ft,pt){ft.push(p,b.doAutoRangeAndConstraints,pt?function(Zt){var ee=[];for(var Be in pt){var Ke=a.getFromId(Zt,Be);if(ee.push(Be),-1!==(Ke.ticklabelposition||"").indexOf("inside")&&Ke._anchorAxis&&ee.push(Ke._anchorAxis._id),Ke._matchGroup)for(var xe in Ke._matchGroup)pt[xe]||ee.push(xe)}return a.draw(Zt,ee,{skipTitle:!0})}:function(Zt){return a.draw(Zt,"redraw")},b.drawData,b.finalDraw)}var It=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Mt=/^[xyz]axis[0-9]*\.autorange$/,xt=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function At(ft,pt){var Ge,gr,ue,kt=ft.layout,Zt=ft._fullLayout,se=X(Zt._preGUI,Zt._guiEditing),Be=Object.keys(pt),Ke=a.list(ft),xe=P.extendDeepAll({},pt),Pe={};for(dt(pt),Be=Object.keys(pt),gr=0;gr<Be.length;gr++)if(0===Be[gr].indexOf("allaxes")){for(ue=0;ue<Ke.length;ue++){var Ne=Ke[ue]._id.substr(1),Ye=-1!==Ne.indexOf("scene")?Ne+".":"",xr=Be[gr].replace("allaxes",Ye+Ke[ue]._name);pt[xr]||(pt[xr]=pt[Be[gr]])}delete pt[Be[gr]]}var rr=L.layoutFlags(),ce={},re={};function ve(an,dn){if(Array.isArray(an))an.forEach(function(wn){ve(wn,dn)});else if(!(an in pt)&&!M.hasParent(pt,an)){var pn=se(kt,an);an in re||(re[an]=$(pn.get())),void 0!==dn&&pn.set(dn)}}var Ae,be={};function Te(an){var dn=a.name2id(an.split(".")[0]);return be[dn]=1,dn}for(var Re in pt){if(M.hasParent(pt,Re))throw new Error("cannot set "+Re+" and a parent attribute simultaneously");for(var Ie=se(kt,Re),Xe=pt[Re],nr=Ie.parts.length-1;nr>0&&"string"!=typeof Ie.parts[nr];)nr--;var cr=Ie.parts[nr],Ut=Ie.parts[nr-1]+"."+cr,Ht=Ie.parts.slice(0,nr).join("."),Se=C(ft.layout,Ht).get(),Ce=C(Zt,Ht).get(),We=Ie.get();if(void 0!==Xe){ce[Re]=Xe,re[Re]="reverse"===cr?Xe:$(We);var qe=r.getLayoutValObject(Zt,Ie.parts);if(qe&&qe.impliedEdits&&null!==Xe)for(var or in qe.impliedEdits)ve(P.relativeAttr(Re,or),qe.impliedEdits[or]);if(-1!==["width","height"].indexOf(Re))if(Xe){ve("autosize",null);var _e="height"===Re?"width":"height";ve(_e,Zt[_e])}else Zt[Re]=ft._initialAutoSize[Re];else if("autosize"===Re)ve("width",Xe?null:Zt.width),ve("height",Xe?null:Zt.height);else if(Ut.match(It))Te(Ut),C(Zt,Ht+"._inputRange").set(null);else if(Ut.match(Mt)){Te(Ut),C(Zt,Ht+"._inputRange").set(null);var De=C(Zt,Ht).get();De._inputDomain&&(De._input.domain=De._inputDomain.slice())}else Ut.match(xt)&&C(Zt,Ht+"._inputDomain").set(null);if("type"===cr){Ae=Se;var sr="linear"===Ce.type&&"log"===Xe;if(sr||"log"===Ce.type&&"linear"===Xe){if(Ae&&Ae.range)if(Ce.autorange)sr&&(Ae.range=Ae.range[1]>Ae.range[0]?[1,2]:[2,1]);else{var dr=Ae.range[0],Pr=Ae.range[1];sr?(dr<=0&&Pr<=0&&ve(Ht+".autorange",!0),dr<=0?dr=Pr/1e6:Pr<=0&&(Pr=dr/1e6),ve(Ht+".range[0]",Math.log(dr)/Math.LN10),ve(Ht+".range[1]",Math.log(Pr)/Math.LN10)):(ve(Ht+".range[0]",Math.pow(10,dr)),ve(Ht+".range[1]",Math.pow(10,Pr)))}else ve(Ht+".autorange",!0);Array.isArray(Zt._subplots.polar)&&Zt._subplots.polar.length&&Zt[Ie.parts[0]]&&"radialaxis"===Ie.parts[1]&&delete Zt[Ie.parts[0]]._subplot.viewInitial["radialaxis.range"],e.getComponentMethod("annotations","convertCoords")(ft,Ce,Xe,ve),e.getComponentMethod("images","convertCoords")(ft,Ce,Xe,ve)}else ve(Ht+".autorange",!0),ve(Ht+".range",null);C(Zt,Ht+"._inputRange").set(null)}else if(cr.match(x)){var Jr=C(Zt,Re).get(),Mr=(Xe||{}).type;(!Mr||"-"===Mr)&&(Mr="linear"),e.getComponentMethod("annotations","convertCoords")(ft,Jr,Mr,ve),e.getComponentMethod("images","convertCoords")(ft,Jr,Mr,ve)}var Wr=v.containerArrayMatch(Re);if(Wr){Ge=Wr.array;var nn=Wr.property,Nr=qe||{editType:"calc"};""!==(gr=Wr.index)&&""===nn&&(v.isAddVal(Xe)?re[Re]=null:v.isRemoveVal(Xe)?re[Re]=(C(kt,Ge).get()||[])[gr]:P.warn("unrecognized full object value",pt)),L.update(rr,Nr),Pe[Ge]||(Pe[Ge]={});var Dn=Pe[Ge][gr];Dn||(Dn=Pe[Ge][gr]={}),Dn[nn]=Xe,delete pt[Re]}else"reverse"===cr?(Se.range?Se.range.reverse():(ve(Ht+".autorange",!0),Se.range=[1,0]),Ce.autorange?rr.calc=!0:rr.plot=!0):("dragmode"===Re&&(!1===Xe&&!1!==We||!1!==Xe&&!1===We)||Zt._has("scatter-like")&&Zt._has("regl")&&"dragmode"===Re&&("lasso"===Xe||"select"===Xe)&&"lasso"!==We&&"select"!==We||Zt._has("gl2d")?rr.plot=!0:qe?L.update(rr,qe):rr.calc=!0,Ie.set(Xe))}}for(Ge in Pe)v.applyContainerArrayChanges(ft,se(kt,Ge),Pe[Ge],rr,se)||(rr.plot=!0);for(var hr in be){var Ar=(Ae=a.getFromId(ft,hr))&&Ae._constraintGroup;if(Ar)for(var Br in rr.calc=!0,Ar)be[Br]||(a.getFromId(ft,Br)._constraintShrinkable=!0)}(Gt(ft)||pt.height||pt.width)&&(rr.plot=!0);var Or=Zt.shapes;for(gr=0;gr<Or.length;gr++)if(Or[gr].showlegend){rr.calc=!0;break}return(rr.plot||rr.calc)&&(rr.layoutReplot=!0),{flags:rr,rangesAltered:be,undoit:re,redoit:ce,eventData:xe}}function Gt(ft){var pt=ft._fullLayout,kt=pt.width,Zt=pt.height;return ft.layout.autosize&&l.plotAutoSize(ft,ft.layout,pt),pt.width!==kt||pt.height!==Zt}function Wt(ft,pt,kt,Zt){ft=P.getGraphDiv(ft),M.clearPromiseQueue(ft),P.isPlainObject(pt)||(pt={}),P.isPlainObject(kt)||(kt={}),Object.keys(pt).length&&(ft.changed=!0),Object.keys(kt).length&&(ft.changed=!0);var ee=M.coerceTraceIndices(ft,Zt),se=st(ft,P.extendFlat({},pt),ee),Be=se.flags,Ke=At(ft,P.extendFlat({},kt)),xe=Ke.flags;(Be.calc||xe.calc)&&(ft.calcdata=void 0),Be.clearAxisTypes&&M.clearAxisTypes(ft,ee,kt);var Pe=[];xe.layoutReplot?Pe.push(b.layoutReplot):Be.fullReplot?Pe.push(W._doPlot):(Pe.push(l.previousPromises),gt(ft,xe,Ke)||l.supplyDefaults(ft),Be.style&&Pe.push(b.doTraceStyle),(Be.colorbars||xe.colorbars)&&Pe.push(b.doColorBars),xe.legend&&Pe.push(b.doLegend),xe.layoutstyle&&Pe.push(b.layoutStyles),xe.axrange&&Lt(Pe,Ke.rangesAltered),xe.ticks&&Pe.push(b.doTicksRelayout),xe.modebar&&Pe.push(b.doModeBar),xe.camera&&Pe.push(b.doCamera),Pe.push(E)),Pe.push(l.rehover,l.redrag,l.reselect),y.add(ft,Wt,[ft,se.undoit,Ke.undoit,se.traces],Wt,[ft,se.redoit,Ke.redoit,se.traces]);var Ge=P.syncOrAsync(Pe,ft);return(!Ge||!Ge.then)&&(Ge=Promise.resolve(ft)),Ge.then(function(){return ft.emit("plotly_update",{data:se.eventData,layout:Ke.eventData}),ft})}function Pt(ft){return function(kt){kt._fullLayout._guiEditing=!0;var Zt=ft.apply(null,arguments);return kt._fullLayout._guiEditing=!1,Zt}}var Vt=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],te=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Qt(ft,pt){for(var kt=0;kt<pt.length;kt++){var Zt=pt[kt],ee=ft.match(Zt.pattern);if(ee){var se=ee[1]||"";return{head:se,tail:ft.substr(se.length+1),attr:Zt.attr}}}}function Bt(ft,pt){var kt=C(pt,ft).get();if(void 0!==kt)return kt;var Zt=ft.split(".");for(Zt.pop();Zt.length>1;)if(Zt.pop(),void 0!==(kt=C(pt,Zt.join(".")+".uirevision").get()))return kt;return pt.uirevision}function Ot(ft,pt){for(var kt=0;kt<pt.length;kt++)if(pt[kt]._fullInput.uid===ft)return kt;return-1}function qt(ft,pt,kt){for(var Zt=0;Zt<pt.length;Zt++)if(pt[Zt].uid===ft)return Zt;return!pt[kt]||pt[kt].uid?-1:kt}function ie(ft,pt){var kt=P.isPlainObject(ft),Zt=Array.isArray(ft);return kt||Zt?(kt&&P.isPlainObject(pt)||Zt&&Array.isArray(pt))&&JSON.stringify(ft)===JSON.stringify(pt):ft===pt}function Kt(ft,pt,kt,Zt){var ee,se,Be,Ke=Zt.getValObject,xe=Zt.flags,Pe=Zt.immutable,Ge=Zt.inArray,gr=Zt.arrayIndex;function ue(){var Ht=ee.editType;Ge&&-1!==Ht.indexOf("arraydraw")?P.pushUnique(xe.arrays[Ge],gr):(L.update(xe,ee),"none"!==Ht&&xe.nChanges++,Zt.transition&&ee.anim&&xe.nChangesAnim++,(It.test(Be)||Mt.test(Be))&&(xe.rangesAltered[kt[0]]=1),xt.test(Be)&&C(pt,"_inputDomain").set(null),"datarevision"===se&&(xe.newDataRevision=1))}function Ne(Ht){return"data_array"===Ht.valType||Ht.arrayOk}for(se in ft){if(xe.calc&&!Zt.transition)return;var Ye=ft[se],xr=pt[se],rr=kt.concat(se);if(Be=rr.join("."),"_"!==se.charAt(0)&&"function"!=typeof Ye&&Ye!==xr){if(("tick0"===se||"dtick"===se)&&"geo"!==kt[0]){var ce=pt.tickmode;if("auto"===ce||"array"===ce||!ce)continue}if(("range"!==se||!pt.autorange)&&("zmin"!==se&&"zmax"!==se||"contourcarpet"!==pt.type)&&(ee=Ke(rr))&&(!ee._compareAsJSON||JSON.stringify(Ye)!==JSON.stringify(xr))){var ve,re=ee.valType,be=Ne(ee),Ae=Array.isArray(Ye),Te=Array.isArray(xr);if(Ae&&Te){var Re="_input_"+se,Ie=ft[Re],Xe=pt[Re];if(Array.isArray(Ie)&&Ie===Xe)continue}if(void 0===xr)be&&Ae?xe.calc=!0:ue();else if(ee._isLinkedToArray){var ar=[],nr=!1;Ge||(xe.arrays[se]=ar);var cr=Math.min(Ye.length,xr.length),Ut=Math.max(Ye.length,xr.length);if(cr!==Ut){if("arraydraw"!==ee.editType){ue();continue}nr=!0}for(ve=0;ve<cr;ve++)Kt(Ye[ve],xr[ve],rr.concat(ve),P.extendFlat({inArray:se,arrayIndex:ve},Zt));if(nr)for(ve=cr;ve<Ut;ve++)ar.push(ve)}else!re&&P.isPlainObject(Ye)?Kt(Ye,xr,rr,Zt):be?Ae&&Te?(Pe&&(xe.calc=!0),(Pe||Zt.newDataRevision)&&ue()):Ae!==Te?xe.calc=!0:ue():Ae&&Te?(Ye.length!==xr.length||String(Ye)!==String(xr))&&ue():ue()}}}for(se in pt)if(!(se in ft)&&"_"!==se.charAt(0)&&"function"!=typeof pt[se]){if(Ne(ee=Ke(kt.concat(se)))&&Array.isArray(pt[se]))return void(xe.calc=!0);ue()}}function Et(ft,pt){var kt;for(kt in ft)if("_"!==kt.charAt(0)){var Zt=ft[kt],ee=pt[kt];if(Zt!==ee)if(P.isPlainObject(Zt)&&P.isPlainObject(ee)){if(Et(Zt,ee))return!0}else{if(!Array.isArray(Zt)||!Array.isArray(ee))return!0;if(Zt.length!==ee.length)return!0;for(var se=0;se<Zt.length;se++)if(Zt[se]!==ee[se]){if(!P.isPlainObject(Zt[se])||!P.isPlainObject(ee[se]))return!0;if(Et(Zt[se],ee[se]))return!0}}}}function Rt(ft){var pt=ft._fullLayout,kt=ft.getBoundingClientRect();if(!P.equalDomRects(kt,pt._lastBBox)){var Zt=pt._invTransform=P.inverseTransformMatrix(P.getFullTransformMatrix(ft));pt._invScaleX=Math.sqrt(Zt[0][0]*Zt[0][0]+Zt[0][1]*Zt[0][1]+Zt[0][2]*Zt[0][2]),pt._invScaleY=Math.sqrt(Zt[1][0]*Zt[1][0]+Zt[1][1]*Zt[1][1]+Zt[1][2]*Zt[1][2]),pt._lastBBox=kt}}W.animate=function St(ft,pt,kt){if(ft=P.getGraphDiv(ft),!P.isPlotDiv(ft))throw new Error("This element is not a Plotly plot: "+ft+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Zt=ft._transitionData;Zt._frameQueue||(Zt._frameQueue=[]);var ee=(kt=l.supplyAnimationDefaults(kt)).transition,se=kt.frame;function Be(Pe){return Array.isArray(ee)?Pe>=ee.length?ee[0]:ee[Pe]:ee}function Ke(Pe){return Array.isArray(se)?Pe>=se.length?se[0]:se[Pe]:se}function xe(Pe,Ge){var gr=0;return function(){if(Pe&&++gr===Ge)return Pe()}}return void 0===Zt._frameWaitingCnt&&(Zt._frameWaitingCnt=0),new Promise(function(Pe,Ge){var rr=0;function ce(cr){return cr.transitionOpts=Array.isArray(ee)?rr>=ee.length?ee[rr]:ee[0]:ee,rr++,cr}var re,ve,be=[],Ae=null==pt,Te=Array.isArray(pt);if(Ae||Te||!P.isPlainObject(pt)){if(Ae||-1!==["string","number"].indexOf(typeof pt))for(re=0;re<Zt._frames.length;re++)(ve=Zt._frames[re])&&(Ae||String(ve.group)===String(pt))&&be.push({type:"byname",name:String(ve.name),data:ce({name:ve.name})});else if(Te)for(re=0;re<pt.length;re++){var Ie=pt[re];-1!==["number","string"].indexOf(typeof Ie)?(Ie=String(Ie),be.push({type:"byname",name:Ie,data:ce({name:Ie})})):P.isPlainObject(Ie)&&be.push({type:"object",data:ce(P.extendFlat({},Ie))})}}else be.push({type:"object",data:ce(P.extendFlat({},pt))});for(re=0;re<be.length;re++)if("byname"===(ve=be[re]).type&&!Zt._frameHash[ve.data.name])return P.warn('animate failure: frame not found: "'+ve.data.name+'"'),void Ge();-1!==["next","immediate"].indexOf(kt.mode)&&function gr(){if(0!==Zt._frameQueue.length){for(;Zt._frameQueue.length;){var cr=Zt._frameQueue.pop();cr.onInterrupt&&cr.onInterrupt()}ft.emit("plotly_animationinterrupted",[])}}(),"reverse"===kt.direction&&be.reverse();var Xe=ft._fullLayout._currentFrame;if(Xe&&kt.fromcurrent){var ar=-1;for(re=0;re<be.length;re++)if("byname"===(ve=be[re]).type&&ve.name===Xe){ar=re;break}if(ar>0&&ar<be.length-1){var nr=[];for(re=0;re<be.length;re++)ve=be[re],("byname"!==be[re].type||re>ar)&&nr.push(ve);be=nr}}be.length>0?function ue(cr){if(0!==cr.length){for(var Ut=0;Ut<cr.length;Ut++){var Ht;Ht="byname"===cr[Ut].type?l.computeFrame(ft,cr[Ut].name):cr[Ut].data;var Se=Ke(Ut),Ce=Be(Ut);Ce.duration=Math.min(Ce.duration,Se.duration);var We={frame:Ht,name:cr[Ut].name,frameOpts:Se,transitionOpts:Ce};Ut===cr.length-1&&(We.onComplete=xe(Pe,2),We.onInterrupt=Ge),Zt._frameQueue.push(We)}"immediate"===kt.mode&&(Zt._lastFrameAt=-1/0),Zt._animationRaf||function xr(){ft.emit("plotly_animating"),Zt._lastFrameAt=-1/0,Zt._timeToNext=0,Zt._runningTransitions=0,Zt._currentFrame=null;var cr=function(){Zt._animationRaf=window.requestAnimationFrame(cr),Date.now()-Zt._lastFrameAt>Zt._timeToNext&&function Ye(){Zt._currentFrame&&Zt._currentFrame.onComplete&&Zt._currentFrame.onComplete();var cr=Zt._currentFrame=Zt._frameQueue.shift();if(cr){var Ut=cr.name?cr.name.toString():null;ft._fullLayout._currentFrame=Ut,Zt._lastFrameAt=Date.now(),Zt._timeToNext=cr.frameOpts.duration,l.transition(ft,cr.frame.data,cr.frame.layout,M.coerceTraceIndices(ft,cr.frame.traces),cr.frameOpts,cr.transitionOpts).then(function(){cr.onComplete&&cr.onComplete()}),ft.emit("plotly_animatingframe",{name:Ut,frame:cr.frame,animation:{frame:cr.frameOpts,transition:cr.transitionOpts}})}else!function Ne(){ft.emit("plotly_animated"),window.cancelAnimationFrame(Zt._animationRaf),Zt._animationRaf=null}()}()};cr()}()}}(be):(ft.emit("plotly_animated"),Pe())})},W.addFrames=function Dt(ft,pt,kt){if(ft=P.getGraphDiv(ft),null==pt)return Promise.resolve();if(!P.isPlotDiv(ft))throw new Error("This element is not a Plotly plot: "+ft+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Zt,ee,se,Be,Ke=ft._transitionData._frames,xe=ft._transitionData._frameHash;if(!Array.isArray(pt))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+pt);var Pe=Ke.length+2*pt.length,Ge=[],gr={};for(Zt=pt.length-1;Zt>=0;Zt--)if(P.isPlainObject(pt[Zt])){var ue=pt[Zt].name,Ne=(xe[ue]||gr[ue]||{}).name,Ye=pt[Zt].name;Ne&&Ye&&"number"==typeof Ye&&(xe[Ne]||gr[Ne])&&S<5&&(S++,P.warn('addFrames: overwriting frame "'+(xe[Ne]||gr[Ne]).name+'" with a frame whose name of type "number" also equates to "'+Ne+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===S&&P.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),gr[ue]={name:ue},Ge.push({frame:l.supplyFrameDefaults(pt[Zt]),index:kt&&null!=kt[Zt]?kt[Zt]:Pe+Zt})}Ge.sort(function(Re,Ie){return Re.index>Ie.index?-1:Re.index<Ie.index?1:0});var rr=[],ce=[],re=Ke.length;for(Zt=Ge.length-1;Zt>=0;Zt--){if("number"==typeof(ee=Ge[Zt].frame).name&&P.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!ee.name)for(;xe[ee.name="frame "+ft._transitionData._counter++];);if(xe[ee.name]){for(se=0;se<Ke.length&&(Ke[se]||{}).name!==ee.name;se++);rr.push({type:"replace",index:se,value:ee}),ce.unshift({type:"replace",index:se,value:Ke[se]})}else Be=Math.max(0,Math.min(Ge[Zt].index,re)),rr.push({type:"insert",index:Be,value:ee}),ce.unshift({type:"delete",index:Be}),re++}return y&&y.add(ft,l.modifyFrames,[ft,ce],l.modifyFrames,[ft,rr]),l.modifyFrames(ft,rr)},W.deleteFrames=function Ft(ft,pt){if(ft=P.getGraphDiv(ft),!P.isPlotDiv(ft))throw new Error("This element is not a Plotly plot: "+ft);var kt,Zt,ee=ft._transitionData._frames,se=[],Be=[];if(!pt)for(pt=[],kt=0;kt<ee.length;kt++)pt.push(kt);for((pt=pt.slice()).sort(),kt=pt.length-1;kt>=0;kt--)se.push({type:"delete",index:Zt=pt[kt]}),Be.unshift({type:"insert",index:Zt,value:ee[Zt]});return y&&y.add(ft,l.modifyFrames,[ft,Be],l.modifyFrames,[ft,se]),l.modifyFrames(ft,se)},W.addTraces=function Z(ft,pt,kt){ft=P.getGraphDiv(ft);var xe,Pe,Zt=[],ee=W.deleteTraces,se=Z,Be=[ft,Zt],Ke=[ft,pt];for(function H(ft,pt,kt){var Zt,ee;if(!Array.isArray(ft.data))throw new Error("gd.data must be an array.");if(void 0===pt)throw new Error("traces must be defined.");for(Array.isArray(pt)||(pt=[pt]),Zt=0;Zt<pt.length;Zt++)if("object"!=typeof(ee=pt[Zt])||Array.isArray(ee)||null===ee)throw new Error("all values in traces array must be non-array objects");if(void 0!==kt&&!Array.isArray(kt)&&(kt=[kt]),void 0!==kt&&kt.length!==pt.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(ft,pt,kt),Array.isArray(pt)||(pt=[pt]),pt=pt.map(function(Ge){return P.extendFlat({},Ge)}),M.cleanData(pt),xe=0;xe<pt.length;xe++)ft.data.push(pt[xe]);for(xe=0;xe<pt.length;xe++)Zt.push(-pt.length+xe);if(void 0===kt)return Pe=W.redraw(ft),y.add(ft,ee,Be,se,Ke),Pe;Array.isArray(kt)||(kt=[kt]);try{U(ft,Zt,kt)}catch(Ge){throw ft.data.splice(ft.data.length-pt.length,pt.length),Ge}return y.startSequence(ft),y.add(ft,ee,Be,se,Ke),Pe=W.moveTraces(ft,Zt,kt),y.stopSequence(ft),Pe},W.deleteTraces=function G(ft,pt){ft=P.getGraphDiv(ft);var Ke,xe,kt=[],Zt=W.addTraces,ee=G,se=[ft,kt,pt],Be=[ft,pt];if(void 0===pt)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(pt)||(pt=[pt]),z(ft,pt,"indices"),(pt=B(pt,ft.data.length-1)).sort(P.sorterDes),Ke=0;Ke<pt.length;Ke+=1)xe=ft.data.splice(pt[Ke],1)[0],kt.push(xe);var Pe=W.redraw(ft);return y.add(ft,Zt,se,ee,Be),Pe},W.extendTraces=function Q(ft,pt,kt,Zt){function ee(xe,Pe,Ge){var gr,ue;if(P.isTypedArray(xe))if(Ge<0){var Ne=new xe.constructor(0),Ye=ut(xe,Pe);Ge<0?(gr=Ye,ue=Ne):(gr=Ne,ue=Ye)}else if(gr=new xe.constructor(Ge),ue=new xe.constructor(xe.length+Pe.length-Ge),Ge===Pe.length)gr.set(Pe),ue.set(xe);else if(Ge<Pe.length){var xr=Pe.length-Ge;gr.set(Pe.subarray(xr)),ue.set(xe),ue.set(Pe.subarray(0,xr),xe.length)}else{var rr=Ge-Pe.length,ce=xe.length-rr;gr.set(xe.subarray(ce)),gr.set(Pe,rr),ue.set(xe.subarray(0,ce))}else gr=xe.concat(Pe),ue=Ge>=0&&Ge<gr.length?gr.splice(0,gr.length-Ge):[];return[gr,ue]}var se=it(ft=P.getGraphDiv(ft),pt,kt,Zt,ee),Be=W.redraw(ft);return y.add(ft,W.prependTraces,[ft,se.update,kt,se.maxPoints],Q,arguments),Be},W.moveTraces=function K(ft,pt,kt){var Pe,Zt=[],ee=[],se=K,Be=K,Ke=[ft=P.getGraphDiv(ft),kt,pt],xe=[ft,pt,kt];if(U(ft,pt,kt),pt=Array.isArray(pt)?pt:[pt],void 0===kt)for(kt=[],Pe=0;Pe<pt.length;Pe++)kt.push(-pt.length+Pe);for(kt=Array.isArray(kt)?kt:[kt],pt=B(pt,ft.data.length-1),kt=B(kt,ft.data.length-1),Pe=0;Pe<ft.data.length;Pe++)-1===pt.indexOf(Pe)&&Zt.push(ft.data[Pe]);for(Pe=0;Pe<pt.length;Pe++)ee.push({newIndex:kt[Pe],trace:ft.data[pt[Pe]]});for(ee.sort(function(gr,ue){return gr.newIndex-ue.newIndex}),Pe=0;Pe<ee.length;Pe+=1)Zt.splice(ee[Pe].newIndex,0,ee[Pe].trace);ft.data=Zt;var Ge=W.redraw(ft);return y.add(ft,se,Ke,Be,xe),Ge},W.prependTraces=function j(ft,pt,kt,Zt){function ee(xe,Pe,Ge){var gr,ue;if(P.isTypedArray(xe))if(Ge<=0){var Ne=new xe.constructor(0),Ye=ut(Pe,xe);Ge<0?(gr=Ye,ue=Ne):(gr=Ne,ue=Ye)}else if(gr=new xe.constructor(Ge),ue=new xe.constructor(xe.length+Pe.length-Ge),Ge===Pe.length)gr.set(Pe),ue.set(xe);else if(Ge<Pe.length){var xr=Pe.length-Ge;gr.set(Pe.subarray(0,xr)),ue.set(Pe.subarray(xr)),ue.set(xe,xr)}else{var rr=Ge-Pe.length;gr.set(Pe),gr.set(xe.subarray(0,rr),Pe.length),ue.set(xe.subarray(rr))}else gr=Pe.concat(xe),ue=Ge>=0&&Ge<gr.length?gr.splice(Ge,gr.length):[];return[gr,ue]}var se=it(ft=P.getGraphDiv(ft),pt,kt,Zt,ee),Be=W.redraw(ft);return y.add(ft,W.extendTraces,[ft,se.update,kt,se.maxPoints],j,arguments),Be},W.newPlot=function O(ft,pt,kt,Zt){return ft=P.getGraphDiv(ft),l.cleanPlot([],{},ft._fullData||[],ft._fullLayout||{}),l.purge(ft),W._doPlot(ft,pt,kt,Zt)},W._doPlot=function n(ft,pt,kt,Zt){var ee;if(ft=P.getGraphDiv(ft),u.init(ft),P.isPlainObject(pt)){var se=pt;pt=se.data,kt=se.layout,Zt=se.config,ee=se.frames}if(!1===u.triggerHandler(ft,"plotly_beforeplot",[pt,kt,Zt]))return Promise.reject();!pt&&!kt&&!P.isPlotDiv(ft)&&P.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",ft),N(ft,Zt),kt||(kt={}),A.select(ft).classed("js-plotly-plot",!0),f.makeTester(),Array.isArray(ft._promises)||(ft._promises=[]);var xe=0===(ft.data||[]).length&&Array.isArray(pt);Array.isArray(pt)&&(M.cleanData(pt),xe?ft.data=pt:ft.data.push.apply(ft.data,pt),ft.empty=!1),(!ft.layout||xe)&&(ft.layout=M.cleanLayout(kt)),l.supplyDefaults(ft);var Pe=ft._fullLayout,Ge=Pe._has("cartesian");Pe._replotting=!0,(xe||Pe._shouldCreateBgLayer)&&(function wt(ft){var pt=A.select(ft),kt=ft._fullLayout;if(kt._calcInverseTransform=Rt,kt._calcInverseTransform(ft),kt._container=pt.selectAll(".plot-container").data([0]),kt._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),kt._paperdiv=kt._container.selectAll(".svg-container").data([0]),kt._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),kt._glcontainer=kt._paperdiv.selectAll(".gl-container").data([{}]),kt._glcontainer.enter().append("div").classed("gl-container",!0),kt._paperdiv.selectAll(".main-svg").remove(),kt._paperdiv.select(".modebar-container").remove(),kt._paper=kt._paperdiv.insert("svg",":first-child").classed("main-svg",!0),kt._toppaper=kt._paperdiv.append("svg").classed("main-svg",!0),kt._modebardiv=kt._paperdiv.append("div"),delete kt._modeBar,kt._hoverpaper=kt._paperdiv.append("svg").classed("main-svg",!0),!kt._uid){var Zt={};A.selectAll("defs").each(function(){this.id&&(Zt[this.id.split("-")[1]]=1)}),kt._uid=P.randstr(Zt)}kt._paperdiv.selectAll(".main-svg").attr(w.svgAttrs),kt._defs=kt._paper.append("defs").attr("id","defs-"+kt._uid),kt._clips=kt._defs.append("g").classed("clips",!0),kt._topdefs=kt._toppaper.append("defs").attr("id","topdefs-"+kt._uid),kt._topclips=kt._topdefs.append("g").classed("clips",!0),kt._bgLayer=kt._paper.append("g").classed("bglayer",!0),kt._draggers=kt._paper.append("g").classed("draglayer",!0);var ee=kt._paper.append("g").classed("layer-below",!0);kt._imageLowerLayer=ee.append("g").classed("imagelayer",!0),kt._shapeLowerLayer=ee.append("g").classed("shapelayer",!0),kt._cartesianlayer=kt._paper.append("g").classed("cartesianlayer",!0),kt._polarlayer=kt._paper.append("g").classed("polarlayer",!0),kt._smithlayer=kt._paper.append("g").classed("smithlayer",!0),kt._ternarylayer=kt._paper.append("g").classed("ternarylayer",!0),kt._geolayer=kt._paper.append("g").classed("geolayer",!0),kt._funnelarealayer=kt._paper.append("g").classed("funnelarealayer",!0),kt._pielayer=kt._paper.append("g").classed("pielayer",!0),kt._iciclelayer=kt._paper.append("g").classed("iciclelayer",!0),kt._treemaplayer=kt._paper.append("g").classed("treemaplayer",!0),kt._sunburstlayer=kt._paper.append("g").classed("sunburstlayer",!0),kt._indicatorlayer=kt._toppaper.append("g").classed("indicatorlayer",!0),kt._glimages=kt._paper.append("g").classed("glimages",!0);var se=kt._toppaper.append("g").classed("layer-above",!0);kt._imageUpperLayer=se.append("g").classed("imagelayer",!0),kt._shapeUpperLayer=se.append("g").classed("shapelayer",!0),kt._selectionLayer=kt._toppaper.append("g").classed("selectionlayer",!0),kt._infolayer=kt._toppaper.append("g").classed("infolayer",!0),kt._menulayer=kt._toppaper.append("g").classed("menulayer",!0),kt._zoomlayer=kt._toppaper.append("g").classed("zoomlayer",!0),kt._hoverlayer=kt._hoverpaper.append("g").classed("hoverlayer",!0),kt._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),ft.emit("plotly_framework")}(ft),Pe._shouldCreateBgLayer&&delete Pe._shouldCreateBgLayer),f.initGradients(ft),f.initPatterns(ft),xe&&a.saveShowSpikeInitial(ft);var gr=!ft.calcdata||ft.calcdata.length!==(ft._fullData||[]).length;gr&&l.doCalcdata(ft);for(var ue=0;ue<ft.calcdata.length;ue++)ft.calcdata[ue][0].trace=ft._fullData[ue];ft._context.responsive?ft._responsiveChartHandler||(ft._responsiveChartHandler=function(){P.isHidden(ft)||l.resize(ft)},window.addEventListener("resize",ft._responsiveChartHandler)):P.clearResponsive(ft);var Ne=P.extendFlat({},Pe._size),Ye=0;function rr(){if(l.clearAutoMarginIds(ft),b.drawMarginPushers(ft),a.allowAutoMargin(ft),ft._fullLayout.title.text&&ft._fullLayout.title.automargin&&l.allowAutoMargin(ft,"title.automargin"),Pe._has("pie"))for(var Re=ft._fullData,Ie=0;Ie<Re.length;Ie++){var Xe=Re[Ie];"pie"===Xe.type&&Xe.automargin&&l.allowAutoMargin(ft,"pie."+Xe.uid+".automargin")}return l.doAutoMargin(ft),l.previousPromises(ft)}function ve(){ft._transitioning||(b.doAutoRangeAndConstraints(ft),xe&&a.saveRangeInitial(ft),e.getComponentMethod("rangeslider","calcAutorange")(ft))}var Ae=[l.previousPromises,function Ke(){if(ee)return W.addFrames(ft,ee)},function xr(){for(var Re=Pe._basePlotModules,Ie=0;Ie<Re.length;Ie++)Re[Ie].drawFramework&&Re[Ie].drawFramework(ft);!Pe._glcanvas&&Pe._has("gl")&&(Pe._glcanvas=Pe._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(cr){return cr.key}),Pe._glcanvas.enter().append("canvas").attr("class",function(cr){return"gl-canvas gl-canvas-"+cr.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Xe=ft._context.plotGlPixelRatio;if(Pe._glcanvas){Pe._glcanvas.attr("width",Pe.width*Xe).attr("height",Pe.height*Xe).style("width",Pe.width+"px").style("height",Pe.height+"px");var ar=Pe._glcanvas.data()[0].regl;if(ar&&(Math.floor(Pe.width*Xe)!==ar._gl.drawingBufferWidth||Math.floor(Pe.height*Xe)!==ar._gl.drawingBufferHeight)){var nr="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Ye)return P.log(nr+" Clearing graph and plotting again."),l.cleanPlot([],{},ft._fullData,Pe),l.supplyDefaults(ft),Pe=ft._fullLayout,l.doCalcdata(ft),Ye++,xr();P.error(nr)}}return"h"===Pe.modebar.orientation?Pe._modebardiv.style("height",null).style("width","100%"):Pe._modebardiv.style("width",null).style("height",Pe.height+"px"),l.previousPromises(ft)},rr,function ce(){if(l.didMarginChange(Ne,Pe._size))return P.syncOrAsync([rr,b.layoutStyles],ft)}];Ge&&Ae.push(function re(){if(gr)return P.syncOrAsync([e.getComponentMethod("shapes","calcAutorange"),e.getComponentMethod("annotations","calcAutorange"),ve],ft);ve()}),Ae.push(b.layoutStyles),Ge&&Ae.push(function be(){return a.draw(ft,xe?"":"redraw")},function(Ie){var Xe=Ie._fullLayout._insideTickLabelsUpdaterange;if(Xe)return Ie._fullLayout._insideTickLabelsUpdaterange=void 0,bt(Ie,Xe).then(function(){a.saveRangeInitial(Ie,!0)})}),Ae.push(b.drawData,b.finalDraw,h,l.addLinks,l.rehover,l.redrag,l.reselect,l.doAutoMargin,l.previousPromises);var Te=P.syncOrAsync(Ae,ft);return(!Te||!Te.then)&&(Te=Promise.resolve()),Te.then(function(){return E(ft),ft})},W.purge=function Nt(ft){var pt=(ft=P.getGraphDiv(ft))._fullLayout||{};return l.cleanPlot([],{},ft._fullData||[],pt),l.purge(ft),u.purge(ft),pt._container&&pt._container.remove(),delete ft._context,ft},W.react=function pe(ft,pt,kt,Zt){var ee,se;ft=P.getGraphDiv(ft),M.clearPromiseQueue(ft);var Ke=ft._fullData,xe=ft._fullLayout;if(P.isPlotDiv(ft)&&Ke&&xe){if(P.isPlainObject(pt)){var Pe=pt;pt=Pe.data,kt=Pe.layout,Zt=Pe.config,ee=Pe.frames}var Ge=!1;if(Zt){var gr=P.extendDeep({},ft._context);ft._context=void 0,N(ft,Zt),Ge=Et(gr,ft._context)}ft.data=pt||[],M.cleanData(ft.data),ft.layout=kt||{},M.cleanLayout(ft.layout),function oe(ft,pt,kt,Zt){var se,Be,Ke,xe,Pe,Ge,gr,ue,Ne,Ye,ee=Zt._preGUI,xr=[],rr={},ce={};for(se in ee){if(Pe=Qt(se,Vt)){if(Ne=Pe.head,Ye=Pe.tail,(xe=(Ke=C(Zt,Be=Pe.attr||Ne+".uirevision").get())&&Bt(Be,pt))&&xe===Ke){if(null===(Ge=ee[se])&&(Ge=void 0),ie(ue=(gr=C(pt,se)).get(),Ge)){void 0===ue&&"autorange"===Ye&&xr.push(Ne),gr.set($(C(Zt,se).get()));continue}if("autorange"===Ye||"range["===Ye.substr(0,6)){var be=ee[Ne+".autorange"];if(be||null===be&&null===ee[Ne+".range[0]"]&&null===ee[Ne+".range[1]"]){if(!(Ne in rr)){var Ae=C(pt,Ne).get();rr[Ne]=Ae&&(Ae.autorange||!1!==Ae.autorange&&(!Ae.range||2!==Ae.range.length))}if(rr[Ne]){gr.set($(C(Zt,se).get()));continue}}}}}else P.warn("unrecognized GUI edit: "+se);delete ee[se],Pe&&"range["===Pe.tail.substr(0,6)&&(ce[Pe.head]=1)}for(var Te=0;Te<xr.length;Te++){var Re=xr[Te];if(ce[Re]){var Ie=C(pt,Re).get();Ie&&delete Ie.autorange}}var Xe=Zt._tracePreGUI;for(var ar in Xe){var Ut,nr=Xe[ar],cr=null;for(se in nr){if(!cr){var Ht=Ot(ar,kt);if(Ht<0){delete Xe[ar];break}var Ce=qt(ar,ft,(Ut=kt[Ht]._fullInput).index);if(Ce<0){delete Xe[ar];break}cr=ft[Ce]}if(Pe=Qt(se,te)){if(Pe.attr?xe=(Ke=C(Zt,Pe.attr).get())&&Bt(Pe.attr,pt):(Ke=Ut.uirevision,void 0===(xe=cr.uirevision)&&(xe=pt.uirevision)),xe&&xe===Ke&&(null===(Ge=nr[se])&&(Ge=void 0),ie(ue=(gr=C(cr,se)).get(),Ge))){gr.set($(C(Ut,se).get()));continue}}else P.warn("unrecognized GUI edit: "+se+" in trace uid "+ar);delete nr[se]}}}(ft.data,ft.layout,Ke,xe),l.supplyDefaults(ft,{skipUpdateCalc:!0});var ue=ft._fullData,Ne=ft._fullLayout,Ye=void 0===Ne.datarevision,xr=Ne.transition,rr=function Fe(ft,pt,kt,Zt,ee){var se=L.layoutFlags();function Be(xe){return r.getLayoutValObject(kt,xe)}return se.arrays={},se.rangesAltered={},se.nChanges=0,se.nChangesAnim=0,Kt(pt,kt,[],{getValObject:Be,flags:se,immutable:Zt,transition:ee,gd:ft}),(se.plot||se.calc)&&(se.layoutReplot=!0),ee&&se.nChanges&&se.nChangesAnim&&(se.anim=se.nChanges===se.nChangesAnim?"all":"some"),se}(ft,xe,Ne,Ye,xr),re=function de(ft,pt,kt,Zt,ee,se){var Be=pt.length===kt.length;if(!ee&&!Be)return{fullReplot:!0,calc:!0};var xe,Pe,Ke=L.traceFlags();function Ge(Ne){var Ye=r.getTraceValObject(Pe,Ne);return!Pe._module.animatable&&Ye.anim&&(Ye.anim=!1),Ye}Ke.arrays={},Ke.nChanges=0,Ke.nChangesAnim=0;var gr={getValObject:Ge,flags:Ke,immutable:Zt,transition:ee,newDataRevision:se,gd:ft},ue={};for(xe=0;xe<pt.length;xe++)if(kt[xe]){if(l.hasMakesDataTransform(Pe=kt[xe]._fullInput)&&(Pe=kt[xe]),ue[Pe.uid])continue;ue[Pe.uid]=1,Kt(pt[xe]._fullInput,Pe,[],gr)}return(Ke.calc||Ke.plot)&&(Ke.fullReplot=!0),ee&&Ke.nChanges&&Ke.nChangesAnim&&(Ke.anim=Ke.nChanges===Ke.nChangesAnim&&Be?"all":"some"),Ke}(ft,Ke,ue,Ye,xr,rr.newDataRevision);if(Gt(ft)&&(rr.layoutReplot=!0),re.calc||rr.calc){ft.calcdata=void 0;for(var ve=Object.getOwnPropertyNames(Ne),be=0;be<ve.length;be++){var Ae=ve[be],Te=Ae.substring(0,5);if("xaxis"===Te||"yaxis"===Te){var Re=Ne[Ae]._emptyCategories;Re&&Re()}}}else l.supplyDefaultsUpdateCalc(ft.calcdata,ue);var Ie=[];if(ee&&(ft._transitionData={},l.createTransitionData(ft),Ie.push(function Be(){return W.addFrames(ft,ee)})),Ne.transition&&!Ge&&(re.anim||rr.anim))rr.ticks&&Ie.push(b.doTicksRelayout),l.doCalcdata(ft),b.doAutoRangeAndConstraints(ft),Ie.push(function(){return l.transitionFromReact(ft,re,rr,xe)});else if(re.fullReplot||rr.layoutReplot||Ge)ft._fullLayout._skipDefaults=!0,Ie.push(W._doPlot);else{for(var Xe in rr.arrays){var ar=rr.arrays[Xe];if(ar.length){var nr=e.getComponentMethod(Xe,"drawOne");if(nr!==P.noop)for(var cr=0;cr<ar.length;cr++)nr(ft,ar[cr]);else{var Ut=e.getComponentMethod(Xe,"draw");if(Ut===P.noop)throw new Error("cannot draw components: "+Xe);Ut(ft)}}}Ie.push(l.previousPromises),re.style&&Ie.push(b.doTraceStyle),(re.colorbars||rr.colorbars)&&Ie.push(b.doColorBars),rr.legend&&Ie.push(b.doLegend),rr.layoutstyle&&Ie.push(b.layoutStyles),rr.axrange&&Lt(Ie),rr.ticks&&Ie.push(b.doTicksRelayout),rr.modebar&&Ie.push(b.doModeBar),rr.camera&&Ie.push(b.doCamera),Ie.push(E)}Ie.push(l.rehover,l.redrag,l.reselect),(!(se=P.syncOrAsync(Ie,ft))||!se.then)&&(se=Promise.resolve(ft))}else se=W.newPlot(ft,pt,kt,Zt);return se.then(function(){return ft.emit("plotly_react",{data:pt,layout:kt}),ft})},W.redraw=function k(ft){if(ft=P.getGraphDiv(ft),!P.isPlotDiv(ft))throw new Error("This element is not a Plotly plot: "+ft);return M.cleanData(ft.data),M.cleanLayout(ft.layout),ft.calcdata=void 0,W._doPlot(ft).then(function(){return ft.emit("plotly_redraw"),ft})},W.relayout=bt,W.restyle=at,W.setPlotConfig=function d(ft){return P.extendFlat(o,ft)},W.update=Wt,W._guiRelayout=Pt(bt),W._guiRestyle=Pt(at),W._guiUpdate=Pt(Wt),W._storeDirectGUIEdit=function et(ft,pt,kt){for(var Zt in kt)rt(Zt,C(ft,Zt).get(),kt[Zt],pt)}},72075:function(q){"use strict";var W={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},t={};(function A(g,i){for(var P in g){var C=g[P];C.valType?i[P]=C.dflt:(i[P]||(i[P]={}),A(C,i[P]))}})(W,t),q.exports={configAttributes:W,dfltConfig:t}},86281:function(q,W,t){"use strict";var A=t(73972),g=t(71828),i=t(9012),P=t(10820),C=t(31391),u=t(85594),y=t(72075).configAttributes,e=t(30962),r=g.extendDeepAll,l=g.isPlainObject,a=g.isArrayOrTypedArray,s=g.nestedProperty,c=g.valObjectMeta,f="_isSubplotObj",m="_isLinkedToArray",w="_deprecated",p=[f,m,"_arrayAttrRegexps",w];function v(N,k,O){if(!N)return!1;if(N._isLinkedToArray)if(M(k[O]))O++;else if(O<k.length)return!1;for(;O<k.length;O++){var B=N[k[O]];if(!l(B))break;if(N=B,O===k.length-1)break;if(N._isLinkedToArray){if(!M(k[++O]))return!1}else if("info_array"===N.valType){var z=k[++O];if(!M(z))return!1;var U=N.items;if(Array.isArray(U)){if(z>=U.length)return!1;if(2===N.dimensions){if(O++,k.length===O)return N;var H=k[O];if(!M(H))return!1;N=U[z][H]}else N=U[z]}else N=U}}return N}function M(N){return N===Math.round(N)&&N>=0}function L(){var k,O,N={};for(k in r(N,P),A.subplotsRegistry)if((O=A.subplotsRegistry[k]).layoutAttributes)if(Array.isArray(O.attr))for(var B=0;B<O.attr.length;B++)F(N,O,O.attr[B]);else F(N,O,"subplot"===O.attr?O.name:O.attr);for(k in A.componentsRegistry){var U=(O=A.componentsRegistry[k]).schema;if(U&&(U.subplots||U.layout)){var H=U.subplots;if(H&&H.xaxis&&!H.yaxis)for(var J in H.xaxis)delete N.yaxis[J];delete N.xaxis.shift,delete N.xaxis.autoshift}else"colorscale"===O.name?r(N,O.layoutAttributes):O.layoutAttributes&&D(N,O.layoutAttributes,O.name)}return{layoutAttributes:T(N)}}function S(){var N={frames:r({},C)};return T(N),N.frames}function T(N){return function n(N){function k(B){return{valType:"string",editType:"none"}}function O(B,z,U){W.isValObject(B)?(!0===B.arrayOk||"data_array"===B.valType)&&(U[z+"src"]=k(z)):l(B)&&(B.role="object")}W.crawl(N,O)}(N),function E(N){function k(O,B,z){if(O){var U=O[m];!U||(delete O[m],z[B]={items:{}},z[B].items[U]=O,z[B].role="object")}}W.crawl(N,k)}(N),function d(N){function k(O){for(var B in O)if(l(O[B]))k(O[B]);else if(Array.isArray(O[B]))for(var z=0;z<O[B].length;z++)k(O[B][z]);else O[B]instanceof RegExp&&(O[B]=O[B].toString())}k(N)}(N),N}function F(N,k,O){var B=s(N,O),z=r({},k.layoutAttributes);z[f]=!0,B.set(z)}function D(N,k,O){var B=s(N,O);B.set(r(B.get()||{},k))}W.IS_SUBPLOT_OBJ=f,W.IS_LINKED_TO_ARRAY=m,W.DEPRECATED=w,W.UNDERSCORE_ATTRS=p,W.get=function(){var N={};A.allTypes.forEach(function(O){N[O]=function b(N){var k,O;O=(k=A.modules[N]._module).basePlotModule;var B={type:null},z=r({},i),U=r({},k.attributes);W.crawl(U,function(nt,it,ut,Q,j){s(z,j).set(void 0),void 0===nt&&s(U,j).set(void 0)}),r(B,z),A.traceIs(N,"noOpacity")&&delete B.opacity,A.traceIs(N,"showLegend")||(delete B.showlegend,delete B.legendgroup),A.traceIs(N,"noHover")&&(delete B.hoverinfo,delete B.hoverlabel),k.selectPoints||delete B.selectedpoints,r(B,U),O.attributes&&r(B,O.attributes),B.type=N;var H={meta:k.meta||{},categories:k.categories||{},animatable:Boolean(k.animatable),type:N,attributes:T(B)};if(k.layoutAttributes){var J={};r(J,k.layoutAttributes),H.layoutAttributes=T(J)}return k.animatable||W.crawl(H,function(nt){W.isValObject(nt)&&"anim"in nt&&delete nt.anim}),H}(O)});var k={};return Object.keys(A.transformsRegistry).forEach(function(O){k[O]=function x(N){var O=r({},A.transformsRegistry[N].attributes);return Object.keys(A.componentsRegistry).forEach(function(B){var z=A.componentsRegistry[B];z.schema&&z.schema.transforms&&z.schema.transforms[N]&&Object.keys(z.schema.transforms[N]).forEach(function(U){D(O,z.schema.transforms[N][U],U)})}),{attributes:T(O)}}(O)}),{defs:{valObjects:c,metaKeys:p.concat(["description","role","editType","impliedEdits"]),editType:{traces:e.traces,layout:e.layout},impliedEdits:{}},traces:N,layout:L(),transforms:k,frames:S(),animation:T(u),config:T(y)}},W.crawl=function(N,k,O,B){var z=O||0;B=B||"",Object.keys(N).forEach(function(U){var H=N[U];if(-1===p.indexOf(U)){var J=(B?B+".":"")+U;k(H,U,N,z,J),!W.isValObject(H)&&l(H)&&"impliedEdits"!==U&&W.crawl(H,k,z+1,J)}})},W.isValObject=function(N){return N&&void 0!==N.valType},W.findArrayAttributes=function(N){var z,U,k=[],O=[],B=[];function H(j,Z,G,K){O=O.slice(0,K).concat([Z]),B=B.slice(0,K).concat([j&&j._isLinkedToArray]),!j||"data_array"!==j.valType&&!0!==j.arrayOk||"colorbar"===O[K-1]&&("ticktext"===Z||"tickvals"===Z)||J(z,0,"")}function J(j,Z,G){var K=j[O[Z]],at=G+O[Z];if(Z===O.length-1)a(K)&&k.push(U+at);else if(B[Z]){if(Array.isArray(K))for(var $=0;$<K.length;$++)l(K[$])&&J(K[$],Z+1,at+"["+$+"].")}else l(K)&&J(K,Z+1,at+".")}z=N,U="",W.crawl(i,H),N._module&&N._module.attributes&&W.crawl(N._module.attributes,H);var nt=N.transforms;if(nt)for(var it=0;it<nt.length;it++){var ut=nt[it],Q=ut._module;Q&&(U="transforms["+it+"].",z=ut,W.crawl(Q.attributes,H))}return k},W.getTraceValObject=function(N,k){var z,U,O=k[0],B=1;if("transforms"===O){if(1===k.length)return i.transforms;var H=N.transforms;if(!Array.isArray(H)||!H.length)return!1;var J=k[1];if(!M(J)||J>=H.length)return!1;U=(z=(A.transformsRegistry[H[J].type]||{}).attributes)&&z[k[2]],B=3}else{var nt=N._module;if(nt||(nt=(A.modules[N.type||i.type.dflt]||{})._module),!nt)return!1;if(!(U=(z=nt.attributes)&&z[O])){var it=nt.basePlotModule;it&&it.attributes&&(U=it.attributes[O])}U||(U=i[O])}return v(U,k,B)},W.getLayoutValObject=function(N,k){return v(function o(N,k){var O,B,z,U,H=N._basePlotModules;if(H){var J;for(O=0;O<H.length;O++){if((z=H[O]).attrRegex&&z.attrRegex.test(k)){if(z.layoutAttrOverrides)return z.layoutAttrOverrides;!J&&z.layoutAttributes&&(J=z.layoutAttributes)}var nt=z.baseLayoutAttrOverrides;if(nt&&k in nt)return nt[k]}if(J)return J}var it=N._modules;if(it)for(O=0;O<it.length;O++)if((U=it[O].layoutAttributes)&&k in U)return U[k];for(B in A.componentsRegistry){if("colorscale"===(z=A.componentsRegistry[B]).name&&0===k.indexOf("coloraxis"))return z.layoutAttributes[k];if(!z.schema&&k===z.name)return z.layoutAttributes}return k in P&&P[k]}(N,k[0]),k,1)}},44467:function(q,W,t){"use strict";var A=t(71828),g=t(9012),i="templateitemname",P={name:{valType:"string",editType:"none"}};function C(y){return y&&"string"==typeof y}function u(y){return"s"!==y.charAt(y.length-1)&&A.warn("bad argument to arrayDefaultKey: "+y),y.substr(0,y.length-1)+"defaults"}P[i]={valType:"string",editType:"calc"},W.templatedArray=function(y,e){return e._isLinkedToArray=y,e.name=P.name,e[i]=P[i],e},W.traceTemplater=function(y){var r,l,e={};for(r in y)l=y[r],Array.isArray(l)&&l.length&&(e[r]=0);return{newTrace:function a(s){var c={type:r=A.coerce(s,{},g,"type"),_template:null};if(r in e){var f=e[r]%(l=y[r]).length;e[r]++,c._template=l[f]}return c}}},W.newContainer=function(y,e,r){var l=y._template,a=l&&(l[e]||r&&l[r]);return A.isPlainObject(a)||(a=null),y[e]={_template:a}},W.arrayTemplater=function(y,e,r){var l=y._template,a=l&&l[u(e)],s=l&&l[e];(!Array.isArray(s)||!s.length)&&(s=[]);var c={};return{newItem:function f(h){var w={name:h.name,_input:h},p=w[i]=h[i];if(!C(p))return w._template=a,w;for(var o=0;o<s.length;o++){var v=s[o];if(v.name===p)return c[p]=1,w._template=v,w}return w[r]=h[r]||!1,w._template=!1,w},defaultItems:function m(){for(var h=[],w=0;w<s.length;w++){var p=s[w],o=p.name;if(C(o)&&!c[o]){var v={_template:p,name:o,_input:{_templateitemname:o}};v[i]=p[i],h.push(v),c[o]=1}}return h}}},W.arrayDefaultKey=u,W.arrayEditor=function(y,e,r){var l=(A.nestedProperty(y,e).get()||[]).length,a=r._index,s=a>=l&&(r._input||{})._templateitemname;s&&(a=l);var f,c=e+"["+a+"]";function m(){f={},s&&(f[c]={},f[c][i]=s)}function w(v,M){s?A.nestedProperty(f[c],v).set(M):f[c+"."+v]=M}function p(){var v=f;return m(),v}return m(),{modifyBase:function h(v,M){f[v]=M},modifyItem:w,getUpdateObj:p,applyUpdate:function o(v,M){v&&w(v,M);var b=p();for(var L in b)A.nestedProperty(y,L).set(b[L])}}}},61549:function(q,W,t){"use strict";var A=t(39898),g=t(73972),i=t(74875),P=t(71828),C=t(63893),u=t(33306),y=t(7901),e=t(91424),r=t(92998),l=t(64168),a=t(89298),s=t(18783),c=t(99082),f=c.enforce,m=c.clean,h=t(71739).doAutoRange,w="start";function v(O,B,z){for(var U=0;U<z.length;U++){var H=z[U][0],J=z[U][1];if(!(H[0]>=O[1]||H[1]<=O[0])&&J[0]<B[1]&&J[1]>B[0])return!0}return!1}function M(O){var J,nt,it,ut,Q,j,B=O._fullLayout,z=B._size,U=z.p,H=a.list(O,"",!0);if(B._paperdiv.style({width:O._context.responsive&&B.autosize&&!O._context._hasZeroWidth&&!O.layout.width?"100%":B.width+"px",height:O._context.responsive&&B.autosize&&!O._context._hasZeroHeight&&!O.layout.height?"100%":B.height+"px"}).selectAll(".main-svg").call(e.setSize,B.width,B.height),O._context.setBackground(O,B.paper_bgcolor),W.drawMainTitle(O),l.manage(O),!B._has("cartesian"))return i.previousPromises(O);function Z(Nt,Rt,wt){var ft=Nt._lw/2;return"x"===Nt._id.charAt(0)?Rt?"top"===wt?Rt._offset-U-ft:Rt._offset+Rt._length+U+ft:z.t+z.h*(1-(Nt.position||0))+ft%1:Rt?"right"===wt?Rt._offset+Rt._length+U+ft:Rt._offset-U-ft:z.l+z.w*(Nt.position||0)+ft%1}for(J=0;J<H.length;J++){var G=(ut=H[J])._anchorAxis;ut._linepositions={},ut._lw=e.crispRound(O,ut.linewidth,1),ut._mainLinePosition=Z(ut,G,ut.side),ut._mainMirrorPosition=ut.mirror&&G?Z(ut,G,s.OPPOSITE_SIDE[ut.side]):null}var K=[],at=[],$=[],X=1===y.opacity(B.paper_bgcolor)&&1===y.opacity(B.plot_bgcolor)&&B.paper_bgcolor===B.plot_bgcolor;for(nt in B._plots)if((it=B._plots[nt]).mainplot)it.bg&&it.bg.remove(),it.bg=void 0;else{var rt=it.xaxis.domain,et=it.yaxis.domain,st=it.plotgroup;if(v(rt,et,$)){var dt=st.node(),bt=it.bg=P.ensureSingle(st,"rect","bg");dt.insertBefore(bt.node(),dt.childNodes[0]),at.push(nt)}else st.select("rect.bg").remove(),$.push([rt,et]),X||(K.push(nt),at.push(nt))}var At,Gt,Wt,Pt,Vt,te,Qt,Bt,Ot,qt,ie,oe,pe,gt=B._bgLayer.selectAll(".bg").data(K);for(gt.enter().append("rect").classed("bg",!0),gt.exit().remove(),gt.each(function(Nt){B._plots[Nt].bg=A.select(this)}),J=0;J<at.length;J++)Q=(it=B._plots[at[J]]).xaxis,j=it.yaxis,it.bg&&void 0!==Q._offset&&void 0!==j._offset&&it.bg.call(e.setRect,Q._offset-U,j._offset-U,Q._length+2*U,j._length+2*U).call(y.fill,B.plot_bgcolor).style("stroke-width",0);if(!B._hasOnlyLargeSploms)for(nt in B._plots){Q=(it=B._plots[nt]).xaxis,j=it.yaxis;var Mt,xt,Lt=it.clipId="clip"+B._uid+nt+"plot",It=P.ensureSingleById(B._clips,"clipPath",Lt,function(Nt){Nt.classed("plotclip",!0).append("rect")});it.clipRect=It.select("rect").attr({width:Q._length,height:j._length}),e.setTranslate(it.plot,Q._offset,j._offset),it._hasClipOnAxisFalse?(Mt=null,xt=Lt):(Mt=Lt,xt=null),e.setClipUrl(it.plot,Mt,O),it.layerClipId=xt}function de(Nt){return"M"+At+","+Nt+"H"+Gt}function Fe(Nt){return"M"+Q._offset+","+Nt+"h"+Q._length}function Kt(Nt){return"M"+Nt+","+Bt+"V"+Qt}function Et(Nt){return void 0!==j._shift&&(Nt+=j._shift),"M"+Nt+","+j._offset+"v"+j._length}function St(Nt,Rt,wt){if(!Nt.showline||nt!==Nt._mainSubplot)return"";if(!Nt._anchorAxis)return wt(Nt._mainLinePosition);var ft=Rt(Nt._mainLinePosition);return Nt.mirror&&(ft+=Rt(Nt._mainMirrorPosition)),ft}for(nt in B._plots){j=(it=B._plots[nt]).yaxis;var Dt="M0,0";b(Q=it.xaxis,nt)&&(Vt=x(Q,"left",j,H),At=Q._offset-(Vt?U+Vt:0),te=x(Q,"right",j,H),Gt=Q._offset+Q._length+(te?U+te:0),Wt=Z(Q,j,"bottom"),Pt=Z(Q,j,"top"),(pe=!Q._anchorAxis||nt!==Q._mainSubplot)&&("allticks"===Q.mirror||"all"===Q.mirror)&&(Q._linepositions[nt]=[Wt,Pt]),Dt=St(Q,de,Fe),pe&&Q.showline&&("all"===Q.mirror||"allticks"===Q.mirror)&&(Dt+=de(Wt)+de(Pt)),it.xlines.style("stroke-width",Q._lw+"px").call(y.stroke,Q.showline?Q.linecolor:"rgba(0,0,0,0)")),it.xlines.attr("d",Dt);var Ft="M0,0";b(j,nt)&&(ie=x(j,"bottom",Q,H),Qt=j._offset+j._length+(ie?U:0),oe=x(j,"top",Q,H),Bt=j._offset-(oe?U:0),Ot=Z(j,Q,"left"),qt=Z(j,Q,"right"),(pe=!j._anchorAxis||nt!==j._mainSubplot)&&("allticks"===j.mirror||"all"===j.mirror)&&(j._linepositions[nt]=[Ot,qt]),Ft=St(j,Kt,Et),pe&&j.showline&&("all"===j.mirror||"allticks"===j.mirror)&&(Ft+=Kt(Ot)+Kt(qt)),it.ylines.style("stroke-width",j._lw+"px").call(y.stroke,j.showline?j.linecolor:"rgba(0,0,0,0)")),it.ylines.attr("d",Ft)}return a.makeClipPaths(O),i.previousPromises(O)}function b(O,B){return(O.ticks||O.showline)&&(B===O._mainSubplot||"all"===O.mirror||"allticks"===O.mirror)}function L(O,B,z){if(!z.showline||!z._lw)return!1;if("all"===z.mirror||"allticks"===z.mirror)return!0;var U=z._anchorAxis;if(!U)return!1;var H=s.FROM_BL[B];return z.side===B?U.domain[H]===O.domain[H]:z.mirror&&U.domain[1-H]===O.domain[1-H]}function x(O,B,z,U){if(L(O,B,z))return z._lw;for(var H=0;H<U.length;H++){var J=U[H];if(J._mainAxis===z._mainAxis&&L(O,B,J))return J._lw}return 0}function E(O,B,z,U){var H="title.automargin",J=O._fullLayout.title,nt=J.y>.5?"t":"b",it={x:J.x,y:J.y,t:0,b:0},ut={};"paper"===J.yref&&function S(O,B,z,U,H){var J="paper"===B.yref?O._fullLayout._size.h:O._fullLayout.height,nt=P.isTopAnchor(B)?U:U-H,it="b"===z?J-nt:nt;return!(P.isTopAnchor(B)&&"t"===z||P.isBottomAnchor(B)&&"b"===z)&&it<H}(O,J,nt,B,U)?it[nt]=z:"container"===J.yref&&(ut[nt]=z,O._fullLayout._reservedMargin[H]=ut),i.allowAutoMargin(O,H),i.autoMargin(O,H,it)}function D(O){return"top"===O?s.CAP_SHIFT+.3+"em":"bottom"===O?"-0.3em":s.MID_SHIFT+"em"}W.layoutStyles=function(O){return P.syncOrAsync([i.doAutoMargin,M],O)},W.drawMainTitle=function(O){var B=O._fullLayout.title,z=O._fullLayout,U=function N(O){var B=O.title,z="middle";return P.isRightAnchor(B)?z="end":P.isLeftAnchor(B)&&(z=w),z}(z),H=function k(O){var B=O.title,z="0em";return P.isTopAnchor(B)?z=s.CAP_SHIFT+"em":P.isMiddleAnchor(B)&&(z=s.MID_SHIFT+"em"),z}(z),J=function F(O,B){var z=O.title,U=O._size,H=0;return"0em"!==B&&B?B===s.CAP_SHIFT+"em"&&(H=z.pad.t):H=-z.pad.b,"auto"===z.y?U.t/2:"paper"===z.yref?U.t+U.h-U.h*z.y+H:O.height-O.height*z.y+H}(z,H),nt=function d(O,B){var z=O.title,U=O._size,H=0;return"paper"===(B===w?H=z.pad.l:"end"===B&&(H=-z.pad.r),z.xref)?U.l+U.w*z.x+H:O.width*z.x+H}(z,U);if(r.draw(O,"gtitle",{propContainer:z,propName:"title.text",placeholder:z._dfltTitle.plot,attributes:{x:nt,y:J,"text-anchor":U,dy:H}}),B.text&&B.automargin){var it=A.selectAll(".gtitle"),ut=e.bBox(it.node()).height,Q=function n(O,B,z){var U=B.y,J=U>.5?"t":"b",nt=O._fullLayout.margin[J],it=0;return"paper"===B.yref?it=z+B.pad.t+B.pad.b:"container"===B.yref&&(it=function T(O,B,z,U,H){var J=0;return"middle"===z&&(J+=H/2),"t"===O?("top"===z&&(J+=H),J+=U-B*U):("bottom"===z&&(J+=H),J+=B*U),J}(J,U,B.yanchor,O._fullLayout.height,z)+B.pad.t+B.pad.b),it>nt?it:0}(O,B,ut);if(Q>0){E(O,J,Q,ut),it.attr({x:nt,y:J,"text-anchor":U,dy:D(B.yanchor)}).call(C.positionText,nt,J);var j=(B.text.match(C.BR_TAG_ALL)||[]).length;if(j){var Z=s.LINE_SPACING*j+s.MID_SHIFT;0===B.y&&(Z=-Z),it.selectAll(".line").each(function(){var G=+this.getAttribute("dy").slice(0,-2)-Z+"em";this.setAttribute("dy",G)})}}}},W.doTraceStyle=function(O){var U,B=O.calcdata,z=[];for(U=0;U<B.length;U++){var H=B[U],J=H[0]||{},nt=J.trace||{},it=nt._module||{},ut=it.arraysToCalcdata;ut&&ut(H,nt);var Q=it.editStyle;Q&&z.push({fn:Q,cd0:J})}if(z.length){for(U=0;U<z.length;U++){var j=z[U];j.fn(O,j.cd0)}u(O),W.redrawReglTraces(O)}return i.style(O),g.getComponentMethod("legend","draw")(O),i.previousPromises(O)},W.doColorBars=function(O){return g.getComponentMethod("colorbar","draw")(O),i.previousPromises(O)},W.layoutReplot=function(O){var B=O.layout;return O.layout=void 0,g.call("_doPlot",O,"",B)},W.doLegend=function(O){return g.getComponentMethod("legend","draw")(O),i.previousPromises(O)},W.doTicksRelayout=function(O){return a.draw(O,"redraw"),O._fullLayout._hasOnlyLargeSploms&&(g.subplotsRegistry.splom.updateGrid(O),u(O),W.redrawReglTraces(O)),W.drawMainTitle(O),i.previousPromises(O)},W.doModeBar=function(O){var B=O._fullLayout;l.manage(O);for(var z=0;z<B._basePlotModules.length;z++){var U=B._basePlotModules[z].updateFx;U&&U(O)}return i.previousPromises(O)},W.doCamera=function(O){for(var B=O._fullLayout,z=B._subplots.gl3d,U=0;U<z.length;U++){var H=B[z[U]];H._scene.setViewport(H)}},W.drawData=function(O){var B=O._fullLayout;u(O);for(var z=B._basePlotModules,U=0;U<z.length;U++)z[U].plot(O);return W.redrawReglTraces(O),i.style(O),g.getComponentMethod("selections","draw")(O),g.getComponentMethod("shapes","draw")(O),g.getComponentMethod("annotations","draw")(O),g.getComponentMethod("images","draw")(O),B._replotting=!1,i.previousPromises(O)},W.redrawReglTraces=function(O){var B=O._fullLayout;if(B._has("regl")){var J,nt,z=O._fullData,U=[],H=[];for(B._hasOnlyLargeSploms&&B._splomGrid.draw(),J=0;J<z.length;J++){var it=z[J];!0===it.visible&&0!==it._length&&("splom"===it.type?B._splomScenes[it.uid].draw():"scattergl"===it.type?P.pushUnique(U,it.xaxis+it.yaxis):"scatterpolargl"===it.type&&P.pushUnique(H,it.subplot))}for(J=0;J<U.length;J++)(nt=B._plots[U[J]])._scene&&nt._scene.draw();for(J=0;J<H.length;J++)(nt=B[H[J]]._subplot)._scene&&nt._scene.draw()}},W.doAutoRangeAndConstraints=function(O){for(var z,B=a.list(O,"",!0),U={},H=0;H<B.length;H++)if(!U[(z=B[H])._id]){U[z._id]=1,m(O,z),h(O,z);var J=z._matchGroup;if(J)for(var nt in J){var it=a.getFromId(O,nt);h(O,it,z.range),U[nt]=1}}f(O)},W.finalDraw=function(O){g.getComponentMethod("rangeslider","draw")(O),g.getComponentMethod("rangeselector","draw")(O)},W.drawMarginPushers=function(O){g.getComponentMethod("legend","draw")(O),g.getComponentMethod("rangeselector","draw")(O),g.getComponentMethod("sliders","draw")(O),g.getComponentMethod("updatemenus","draw")(O),g.getComponentMethod("colorbar","draw")(O)}},96318:function(q,W,t){"use strict";var A=t(71828),g=A.isPlainObject,i=t(86281),P=t(74875),C=t(9012),u=t(44467),y=t(72075).dfltConfig;function e(h,w){h=A.extendDeep({},h);var o,v,p=Object.keys(h).sort();function M(T,n,E){if(g(n)&&g(T))e(T,n);else if(Array.isArray(n)&&Array.isArray(T)){var d=u.arrayTemplater({_template:h},E);for(v=0;v<n.length;v++){var F=n[v],D=d.newItem(F)._template;D&&e(D,F)}var N=d.defaultItems();for(v=0;v<N.length;v++)n.push(N[v]._template);for(v=0;v<n.length;v++)delete n[v].templateitemname}}for(o=0;o<p.length;o++){var b=p[o],L=h[b];if(b in w?M(L,w[b],b):w[b]=L,r(b)===b)for(var x in w){var S=r(x);x!==S&&S===b&&!(x in h)&&M(L,w[x],b)}}}function r(h){return h.replace(/[0-9]+$/,"")}function l(h,w,p,o,v){var M=v&&p(v);for(var b in h){var L=h[b],x=c(h,b,o),S=c(h,b,v),T=p(S);if(!T){var n=r(b);n!==b&&(T=p(S=c(h,n,v)))}if(!(M&&M===T||!T||T._noTemplating||"data_array"===T.valType||T.arrayOk&&Array.isArray(L)))if(!T.valType&&g(L))l(L,w,p,x,S);else if(T._isLinkedToArray&&Array.isArray(L))for(var E=!1,d=0,F={},D=0;D<L.length;D++){var N=L[D];if(g(N)){var k=N.name;if(k)F[k]||(l(N,w,p,c(L,d,x),c(L,d,S)),d++,F[k]=1);else if(!E){var B=c(h,u.arrayDefaultKey(b),o),z=c(L,d,x);l(N,w,p,z,c(L,d,S));var U=A.nestedProperty(w,z);A.nestedProperty(w,B).set(U.get()),U.set(null),E=!0}}}else A.nestedProperty(w,x).set(L)}}function a(h,w){return i.getLayoutValObject(h,A.nestedProperty({},w).parts)}function s(h,w){return i.getTraceValObject(h,A.nestedProperty({},w).parts)}function c(h,w,p){return p?Array.isArray(h)?p+"["+w+"]":p+"."+w:w}function f(h){for(var w=0;w<h.length;w++)if(g(h[w]))return!0}function m(h){var w;switch(h.code){case"data":w="The template has no key data.";break;case"layout":w="The template has no key layout.";break;case"missing":w=h.path?"There are no templates for item "+h.path+" with name "+h.templateitemname:"There are no templates for trace "+h.index+", of type "+h.traceType+".";break;case"unused":w=h.path?"The template item at "+h.path+" was not used in constructing the plot.":h.dataCount?"Some of the templates of type "+h.traceType+" were not used. The template has "+h.templateCount+" traces, the data only has "+h.dataCount+" of this type.":"The template has "+h.templateCount+" traces of type "+h.traceType+" but there are none in the data.";break;case"reused":w="Some of the templates of type "+h.traceType+" were used more than once. The template has "+h.templateCount+" traces, the data has "+h.dataCount+" of this type."}return h.msg=w,h}W.makeTemplate=function(h){h=A.isPlainObject(h)?h:A.getGraphDiv(h),h=A.extendDeep({_context:y},{data:h.data,layout:h.layout}),P.supplyDefaults(h);var w=h.data||[],p=h.layout||{};p._basePlotModules=h._fullLayout._basePlotModules,p._modules=h._fullLayout._modules;var o={data:{},layout:{}};w.forEach(function(d){var F={};l(d,F,s.bind(null,d));var D=A.coerce(d,{},C,"type"),N=o.data[D];N||(N=o.data[D]=[]),N.push(F)}),l(p,o.layout,a.bind(null,p)),delete o.layout.template;var v=p.template;if(g(v)){var b,L,x,S,T,n,M=v.layout;g(M)&&e(M,o.layout);var E=v.data;if(g(E)){for(L in o.data)if(x=E[L],Array.isArray(x)){for(n=(T=o.data[L]).length,S=x.length,b=0;b<n;b++)e(x[b%S],T[b]);for(b=n;b<S;b++)T.push(A.extendDeep({},x[b]))}for(L in E)L in o.data||(o.data[L]=A.extendDeep([],E[L]))}}return o},W.validateTemplate=function(h,w){var p=A.extendDeep({},{_context:y,data:h.data,layout:h.layout}),o=p.layout||{};g(w)||(w=o.template||{});var v=w.layout,M=w.data,b=[];p.layout=o,p.layout.template=w,P.supplyDefaults(p);var L=p._fullLayout,x=p._fullData,S={};if(g(v)?(function T(B,z){for(var U in B)if("_"!==U.charAt(0)&&g(B[U])){var nt,H=r(U),J=[];for(nt=0;nt<z.length;nt++)J.push(c(B,U,z[nt])),H!==U&&J.push(c(B,H,z[nt]));for(nt=0;nt<J.length;nt++)S[J[nt]]=1;T(B[U],J)}}(L,["layout"]),function n(B,z){for(var U in B)if(-1===U.indexOf("defaults")&&g(B[U])){var H=c(B,U,z);S[H]?n(B[U],H):b.push({code:"unused",path:H})}}(v,"layout")):b.push({code:"layout"}),g(M)){for(var d,E={},F=0;F<x.length;F++){var D=x[F];E[d=D.type]=(E[d]||0)+1,D._fullInput._template||b.push({code:"missing",index:D._fullInput.index,traceType:d})}for(d in M){var N=M[d].length,k=E[d]||0;N>k?b.push({code:"unused",traceType:d,templateCount:N,dataCount:k}):k>N&&b.push({code:"reused",traceType:d,templateCount:N,dataCount:k})}}else b.push({code:"data"});if(function O(B,z){for(var U in B)if("_"!==U.charAt(0)){var H=B[U],J=c(B,U,z);g(H)?(Array.isArray(B)&&!1===H._template&&H.templateitemname&&b.push({code:"missing",path:J,templateitemname:H.templateitemname}),O(H,J)):Array.isArray(H)&&f(H)&&O(H,J)}}({data:x,layout:L},""),b.length)return b.map(m)}},403:function(q,W,t){"use strict";var A=t(92770),g=t(72391),i=t(74875),P=t(71828),C=t(25095),u=t(5900),y=t(70942),e=t(11506).version,r={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};q.exports=function l(a,s){var c,f,m,h;function w(k){return!(k in s)||P.validate(s[k],r[k])}if(s=s||{},P.isPlainObject(a)?(c=a.data||[],f=a.layout||{},m=a.config||{},h={}):(a=P.getGraphDiv(a),c=P.extendDeep([],a.data),f=P.extendDeep({},a.layout),m=a._context,h=a._fullLayout||{}),!w("width")&&null!==s.width||!w("height")&&null!==s.height)throw new Error("Height and width should be pixel values.");if(!w("format"))throw new Error("Export format is not "+P.join2(r.format.values,", "," or ")+".");var p={};function o(k,O){return P.coerce(s,p,r,k,O)}var v=o("format"),M=o("width"),b=o("height"),L=o("scale"),x=o("setBackground"),S=o("imageDataOnly"),T=document.createElement("div");T.style.position="absolute",T.style.left="-5000px",document.body.appendChild(T);var n=P.extendFlat({},f);M?n.width=M:null===s.width&&A(h.width)&&(n.width=h.width),b?n.height=b:null===s.height&&A(h.height)&&(n.height=h.height);var E=P.extendFlat({},m,{_exportedPlot:!0,staticPlot:!0,setBackground:x}),d=C.getRedrawFunc(T);function F(){return new Promise(function(k){setTimeout(k,C.getDelay(T._fullLayout))})}function D(){return new Promise(function(k,O){var B=u(T,v,L),z=T._fullLayout.width,U=T._fullLayout.height;function H(){g.purge(T),document.body.removeChild(T)}if("full-json"===v){var J=i.graphJson(T,!1,"keepdata","object",!0,!0);return J.version=e,J=JSON.stringify(J),H(),k(S?J:C.encodeJSON(J))}if(H(),"svg"===v)return k(S?B:C.encodeSVG(B));var nt=document.createElement("canvas");nt.id=P.randstr(),y({format:v,width:z,height:U,scale:L,canvas:nt,svg:B,promise:!0}).then(k).catch(O)})}return new Promise(function(k,O){g.newPlot(T,c,n,E).then(d).then(F).then(D).then(function(B){k(function N(k){return S?k.replace(C.IMAGE_URL_PREFIX,""):k}(B))}).catch(function(B){O(B)})})}},84936:function(q,W,t){"use strict";var A=t(71828),g=t(74875),i=t(86281),P=t(72075).dfltConfig,C=A.isPlainObject,u=Array.isArray,y=A.isArrayOrTypedArray;function e(p,o,v,M,b,L){L=L||[];for(var x=Object.keys(p),S=0;S<x.length;S++){var T=x[S];if("transforms"!==T){var n=L.slice();n.push(T);var E=p[T],d=o[T],F=f(v,T),D=(F||{}).valType,N="info_array"===D,k="colorscale"===D,O=(F||{}).items;if(c(v,T))if(C(E)&&C(d)&&"any"!==D)e(E,d,F,M,b,n);else if(N&&u(E)){E.length>d.length&&M.push(s("unused",b,n.concat(d.length)));var U,H,nt,it,B=d.length,z=Array.isArray(O);if(z&&(B=Math.min(B,O.length)),2===F.dimensions)for(H=0;H<B;H++)if(u(E[H])){E[H].length>d[H].length&&M.push(s("unused",b,n.concat(H,d[H].length)));var ut=d[H].length;for(U=0;U<(z?Math.min(ut,O[H].length):ut);U++)it=d[H][U],A.validate(nt=E[H][U],z?O[H][U]:O)?it!==nt&&it!==+nt&&M.push(s("dynamic",b,n.concat(H,U),nt,it)):M.push(s("value",b,n.concat(H,U),nt))}else M.push(s("array",b,n.concat(H),E[H]));else for(H=0;H<B;H++)it=d[H],A.validate(nt=E[H],z?O[H]:O)?it!==nt&&it!==+nt&&M.push(s("dynamic",b,n.concat(H),nt,it)):M.push(s("value",b,n.concat(H),nt))}else if(F.items&&!N&&u(E)){var Z,G,Q=O[Object.keys(O)[0]],j=[];for(Z=0;Z<d.length;Z++){var K=d[Z]._index||Z;if((G=n.slice()).push(K),C(E[K])&&C(d[Z])){j.push(K);var at=E[K],$=d[Z];C(at)&&!1!==at.visible&&!1===$.visible?M.push(s("invisible",b,G)):e(at,$,Q,M,b,G)}}for(Z=0;Z<E.length;Z++)(G=n.slice()).push(Z),C(E[Z])?-1===j.indexOf(Z)&&M.push(s("unused",b,G)):M.push(s("object",b,G,E[Z]))}else!C(E)&&C(d)?M.push(s("object",b,n,E)):y(E)||!y(d)||N||k?T in o?A.validate(E,F)?"enumerated"===F.valType&&(F.coerceNumber&&E!==+d||E!==d)&&M.push(s("dynamic",b,n,E,d)):M.push(s("value",b,n,E)):M.push(s("unused",b,n,E)):M.push(s("array",b,n,E));else M.push(s("schema",b,n))}}return M}function r(p,o){for(var v=p.layout.layoutAttributes,M=0;M<o.length;M++){var b=o[M],L=p.traces[b.type],x=L.layoutAttributes;x&&A.extendFlat(b.subplot?v[L.attributes.subplot.dflt]:v,x)}return v}q.exports=function(o,v){void 0===o&&(o=[]),void 0===v&&(v={});var x,S,M=i.get(),b=[],L={_context:A.extendFlat({},P)};u(o)?(L.data=A.extendDeep([],o),x=o):(L.data=[],x=[],b.push(s("array","data"))),C(v)?(L.layout=A.extendDeep({},v),S=v):(L.layout={},S={},arguments.length>1&&b.push(s("object","layout"))),g.supplyDefaults(L);for(var T=L._fullData,n=x.length,E=0;E<n;E++){var d=x[E],F=["data",E];if(C(d)){var D=T[E],N=D.type,k=M.traces[N].attributes;k.type={valType:"enumerated",values:[N]},!1===D.visible&&!1!==d.visible&&b.push(s("invisible",F)),e(d,D,k,b,F);var O=d.transforms,B=D.transforms;if(O){u(O)||b.push(s("array",F,["transforms"])),F.push("transforms");for(var z=0;z<O.length;z++){var U=["transforms",z],H=O[z].type;if(C(O[z])){var J=M.transforms[H]?M.transforms[H].attributes:{};J.type={valType:"enumerated",values:Object.keys(M.transforms)},e(O[z],B[z],J,b,F,U)}else b.push(s("object",F,U))}}}else b.push(s("object",F))}return e(S,L._fullLayout,r(M,T),b,"layout"),0===b.length?void 0:b};var l={object:function(p,o){return("layout"===p&&""===o?"The layout argument":"data"===p[0]&&""===o?"Trace "+p[1]+" in the data argument":a(p)+"key "+o)+" must be linked to an object container"},array:function(p,o){return("data"===p?"The data argument":a(p)+"key "+o)+" must be linked to an array container"},schema:function(p,o){return a(p)+"key "+o+" is not part of the schema"},unused:function(p,o,v){var M=C(v)?"container":"key";return a(p)+M+" "+o+" did not get coerced"},dynamic:function(p,o,v,M){return[a(p)+"key",o,"(set to '"+v+"')","got reset to","'"+M+"'","during defaults."].join(" ")},invisible:function(p,o){return(o?a(p)+"item "+o:"Trace "+p[1])+" got defaulted to be not visible"},value:function(p,o,v){return[a(p)+"key "+o,"is set to an invalid value ("+v+")"].join(" ")}};function a(p){return u(p)?"In data trace "+p[1]+", ":"In "+p+", "}function s(p,o,v,M,b){var L,x;v=v||"",u(o)?(L=o[0],x=o[1]):(L=o,x=null);var S=function w(p){if(!u(p))return String(p);for(var o="",v=0;v<p.length;v++){var M=p[v];"number"==typeof M?o=o.substr(0,o.length-1)+"["+M+"]":o+=M,v<p.length-1&&(o+=".")}return o}(v),T=l[p](o,S,M,b);return A.log(T),{code:p,container:L,trace:x,path:v,astr:S,msg:T}}function c(p,o){var v=h(o),M=v.keyMinusId;return!!(M in p&&p[M]._isSubplotObj&&v.id)||o in p}function f(p,o){return o in p?p[o]:p[h(o).keyMinusId]}var m=A.counterRegex("([a-z]+)");function h(p){var o=p.match(m);return{keyMinusId:o&&o[1],id:o&&o[2]}}},85594:function(q){"use strict";q.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},85501:function(q,W,t){"use strict";var A=t(71828),g=t(44467);q.exports=function(P,C,u){var c,f,y=u.name,e=u.inclusionAttr||"visible",r=C[y],l=A.isArrayOrTypedArray(P[y])?P[y]:[],a=C[y]=[],s=g.arrayTemplater(C,y,e);for(c=0;c<l.length;c++){var m=l[c];A.isPlainObject(m)?f=s.newItem(m):(f=s.newItem({}))[e]=!1,f._index=c,!1!==f[e]&&u.handleItemDefaults(m,f,C,u),a.push(f)}var h=s.defaultItems();for(c=0;c<h.length;c++)(f=h[c])._index=a.length,u.handleItemDefaults({},f,C,u,{}),a.push(f);if(A.isArrayOrTypedArray(r)){var w=Math.min(r.length,a.length);for(c=0;c<w;c++)A.relinkPrivateKeys(a[c],r[c])}return a}},9012:function(q,W,t){"use strict";var A=t(41940),g=t(77914);q.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:A({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:g.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},42973:function(q,W,t){"use strict";var A=t(92770),g=t(71828),i=g.dateTime2ms,P=g.incrementMonth,u=t(50606).ONEAVGMONTH;q.exports=function(e,r,l,a){if("date"!==r.type)return{vals:a};var s=e[l+"periodalignment"];if(!s)return{vals:a};var f,c=e[l+"period"];if(A(c)){if((c=+c)<=0)return{vals:a}}else if("string"==typeof c&&"M"===c.charAt(0)){var m=+c.substring(1);if(!(m>0&&Math.round(m)===m))return{vals:a};f=m}for(var h=r.calendar,w="start"===s,p="end"===s,v=i(e[l+"period0"],h)||0,M=[],b=[],L=[],x=a.length,S=0;S<x;S++){var n,E,d,T=a[S];if(f){for(n=Math.round((T-v)/(f*u)),d=P(v,f*n,h);d>T;)d=P(d,-f,h);for(;d<=T;)d=P(d,f,h);E=P(d,-f,h)}else{for(d=v+(n=Math.round((T-v)/c))*c;d>T;)d-=c;for(;d<=T;)d+=c;E=d-c}M[S]=w?E:p?d:(E+d)/2,b[S]=E,L[S]=d}return{vals:M,starts:b,ends:L}}},89502:function(q){"use strict";q.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},71739:function(q,W,t){"use strict";var A=t(39898),g=t(92770),i=t(71828),P=t(50606).FP_SAFE,C=t(73972),u=t(91424),y=t(41675),e=y.getFromId,r=y.isLinked;function l(E,d){var F,D,N=[],k=E._fullLayout,O=s(k,d,0),B=s(k,d,1),z=m(E,d),U=z.min,H=z.max;if(0===U.length||0===H.length)return i.simpleMap(d.range,d.r2l);var J=U[0].val,nt=H[0].val;for(F=1;F<U.length&&J===nt;F++)J=Math.min(J,U[F].val);for(F=1;F<H.length&&J===nt;F++)nt=Math.max(nt,H[F].val);var it=d.autorange,ut="reversed"===it||"min reversed"===it||"max reversed"===it;if(!ut&&d.range){var Q=i.simpleMap(d.range,d.r2l);ut=Q[1]<Q[0]}"reversed"===d.autorange&&(d.autorange=!0);var X,rt,et,st,dt,bt,j=d.rangemode,Z="tozero"===j,G="nonnegative"===j,K=d._length,at=K/10,$=0;for(F=0;F<U.length;F++)for(X=U[F],D=0;D<H.length;D++)(bt=(rt=H[D]).val-X.val-a(d,X.val,rt.val))>0&&((dt=K-O(X)-B(rt))>at?bt/dt>$&&(et=X,st=rt,$=bt/dt):bt/K>$&&(et={val:X.val,nopad:1},st={val:rt.val,nopad:1},$=bt/K));if(J===nt){var Lt=J-1,It=J+1;if(Z)if(0===J)N=[0,1];else{var Mt=(J>0?H:U).reduce(function gt(At,Gt){return Math.max(At,B(Gt))},0),xt=J/(1-Math.min(.5,Mt/K));N=J>0?[0,xt]:[xt,0]}else N=G?[Math.max(0,Lt),Math.max(1,It)]:[Lt,It]}else Z?(et.val>=0&&(et={val:0,nopad:1}),st.val<=0&&(st={val:0,nopad:1})):G&&(et.val-$*O(et)<0&&(et={val:0,nopad:1}),st.val<=0&&(st={val:1,nopad:1})),$=(st.val-et.val-a(d,X.val,rt.val))/(K-O(et)-B(st)),N=[et.val-$*O(et),st.val+$*B(st)];return N=n(N,d),d.limitRange&&d.limitRange(),ut&&N.reverse(),i.simpleMap(N,d.l2r||Number)}function a(E,d,F){var D=0;if(E.rangebreaks)for(var N=E.locateBreaks(d,F),k=0;k<N.length;k++){var O=N[k];D+=O.max-O.min}return D}function s(E,d,F){var D=.05*d._length,N=d._anchorAxis||{};if(-1!==(d.ticklabelposition||"").indexOf("inside")||-1!==(N.ticklabelposition||"").indexOf("inside")){var k=d.isReversed();if(!k){var O=i.simpleMap(d.range,d.r2l);k=O[1]<O[0]}k&&(F=!F)}var B=0;return r(E,d._id)||(B=function f(E,d,F){var D=0,N="x"===d._id.charAt(0);for(var k in E._plots){var O=E._plots[k];if(d._id===O.xaxis._id||d._id===O.yaxis._id){var B=(N?O.yaxis:O.xaxis)||{};if(-1!==(B.ticklabelposition||"").indexOf("inside")&&(!F&&("left"===B.side||"bottom"===B.side)||F&&("top"===B.side||"right"===B.side))){if(B._vals){var z=i.deg2rad(B._tickAngles[B._id+"tick"]||0),U=Math.abs(Math.cos(z)),H=Math.abs(Math.sin(z));B._vals[0].bb||B._selections[B._id+"tick"].each(function(G){var K=A.select(this);K.select(".text-math-group").empty()&&(G.bb=u.bBox(K.node()))});for(var it=0;it<B._vals.length;it++){var Q=B._vals[it].bb;if(Q){var j=6+Q.width,Z=6+Q.height;D=Math.max(D,N?Math.max(j*U,Z*H):Math.max(Z*U,j*H))}}}"inside"===B.ticks&&"inside"===B.ticklabelposition&&(D+=B.ticklen||0)}}}return D}(E,d,F)),D=Math.max(B,D),"domain"===d.constrain&&d._inputDomain&&(D*=(d._inputDomain[1]-d._inputDomain[0])/(d.domain[1]-d.domain[0])),function(U){return U.nopad?0:U.pad+(U.extrapad?D:B)}}q.exports={applyAutorangeOptions:n,getAutoRange:l,makePadFn:s,doAutoRange:function h(E,d,F){if(d.setScale(),d.autorange){d.range=F?F.slice():l(E,d),d._r=d.range.slice(),d._rl=i.simpleMap(d._r,d.r2l);var D=d._input,N={};N[d._attr+".range"]=d.range,N[d._attr+".autorange"]=d.autorange,C.call("_storeDirectGUIEdit",E.layout,E._fullLayout._preGUI,N),D.range=d.range.slice(),D.autorange=d.autorange}var k=d._anchorAxis;if(k&&k.rangeslider){var O=k.rangeslider[d._name];O&&"auto"===O.rangemode&&(O.range=l(E,d)),k._input.rangeslider[d._name]=i.extendFlat({},O)}},findExtremes:function w(E,d,F){F||(F={}),E._m||E.setScale();var J,nt,it,ut,Q,j,Z,G,K,D=[],N=[],k=d.length,O=F.padded||!1,B=F.tozero&&("linear"===E.type||"-"===E.type),z="log"===E.type,U=!1,H=F.vpadLinearized||!1;function at(gt){if(Array.isArray(gt))return U=!0,function(It){return Math.max(Number(gt[It]||0),0)};var Lt=Math.max(Number(gt||0),0);return function(){return Lt}}var $=at((E._m>0?F.ppadplus:F.ppadminus)||F.ppad||0),X=at((E._m>0?F.ppadminus:F.ppadplus)||F.ppad||0),rt=at(F.vpadplus||F.vpad),et=at(F.vpadminus||F.vpad);if(!U){if(G=1/0,K=-1/0,z)for(J=0;J<k;J++)(nt=d[J])<G&&nt>0&&(G=nt),nt>K&&nt<P&&(K=nt);else for(J=0;J<k;J++)(nt=d[J])<G&&nt>-P&&(G=nt),nt>K&&nt<P&&(K=nt);d=[G,K],k=2}var st={tozero:B,extrapad:O};function dt(gt){g(it=d[gt])&&(j=$(gt),Z=X(gt),H?(ut=E.c2l(it)-et(gt),Q=E.c2l(it)+rt(gt)):(G=it-et(gt),K=it+rt(gt),z&&G<K/10&&(G=K/10),ut=E.c2l(G),Q=E.c2l(K)),B&&(ut=Math.min(0,ut),Q=Math.max(0,Q)),M(ut)&&p(D,ut,Z,st),M(Q)&&o(N,Q,j,st))}var bt=Math.min(6,k);for(J=0;J<bt;J++)dt(J);for(J=k-1;J>=bt;J--)dt(J);return{min:D,max:N,opts:F}},concatExtremes:m};function m(E,d,F){var z,U,H,D=d._id,k=E._fullLayout,O=[],B=[];function J(j,Z){for(z=0;z<Z.length;z++){var G=j[Z[z]],K=(G._extremes||{})[D];if(!0===G.visible&&K){for(U=0;U<K.min.length;U++)p(O,(H=K.min[U]).val,H.pad,{extrapad:H.extrapad});for(U=0;U<K.max.length;U++)o(B,(H=K.max[U]).val,H.pad,{extrapad:H.extrapad})}}}if(J(E._fullData,d._traceIndices),J(k.annotations||[],d._annIndices||[]),J(k.shapes||[],d._shapeIndices||[]),d._matchGroup&&!F)for(var nt in d._matchGroup)if(nt!==d._id){var it=e(E,nt),ut=m(E,it,!0),Q=d._length/it._length;for(U=0;U<ut.min.length;U++)p(O,(H=ut.min[U]).val,H.pad*Q,{extrapad:H.extrapad});for(U=0;U<ut.max.length;U++)o(B,(H=ut.max[U]).val,H.pad*Q,{extrapad:H.extrapad})}return{min:O,max:B}}function p(E,d,F,D){v(E,d,F,D,b)}function o(E,d,F,D){v(E,d,F,D,L)}function v(E,d,F,D,N){for(var k=D.tozero,O=D.extrapad,B=!0,z=0;z<E.length&&B;z++){var U=E[z];if(N(U.val,d)&&U.pad>=F&&(U.extrapad||!O)){B=!1;break}N(d,U.val)&&U.pad<=F&&(O||!U.extrapad)&&(E.splice(z,1),z--)}if(B){var H=k&&0===d;E.push({val:d,pad:H?0:F,extrapad:!H&&O})}}function M(E){return g(E)&&Math.abs(E)<P}function b(E,d){return E<=d}function L(E,d){return E>=d}function x(E,d){var F=d.autorangeoptions;return F&&void 0!==F.minallowed&&T(d,F.minallowed,F.maxallowed)?F.minallowed:F&&void 0!==F.clipmin&&T(d,F.clipmin,F.clipmax)?Math.max(E,d.d2l(F.clipmin)):E}function S(E,d){var F=d.autorangeoptions;return F&&void 0!==F.maxallowed&&T(d,F.minallowed,F.maxallowed)?F.maxallowed:F&&void 0!==F.clipmax&&T(d,F.clipmin,F.clipmax)?Math.min(E,d.d2l(F.clipmax)):E}function T(E,d,F){return void 0===d||void 0===F||(d=E.d2l(d))<E.d2l(F)}function n(E,d){if(!d||!d.autorangeoptions)return E;var F=E[0],D=E[1],N=d.autorangeoptions.include;if(void 0!==N){var k=d.d2l(F),O=d.d2l(D);i.isArrayOrTypedArray(N)||(N=[N]);for(var B=0;B<N.length;B++){var z=d.d2l(N[B]);k>=z&&(k=z,F=z),O<=z&&(O=z,D=z)}}return[F=x(F,d),D=S(D,d)]}},23074:function(q){"use strict";q.exports=function(t,A,g){var i,P;if(g){var C="reversed"===A||"min reversed"===A||"max reversed"===A;i=g[C?1:0],P=g[C?0:1]}var u=t("autorangeoptions.minallowed",null===P?i:void 0),y=t("autorangeoptions.maxallowed",null===i?P:void 0);void 0===u&&t("autorangeoptions.clipmin"),void 0===y&&t("autorangeoptions.clipmax"),t("autorangeoptions.include")}},89298:function(q,W,t){"use strict";var A=t(39898),g=t(92770),i=t(74875),P=t(73972),C=t(71828),u=C.strTranslate,y=t(63893),e=t(92998),r=t(7901),l=t(91424),a=t(13838),s=t(66287),c=t(50606),f=c.ONEMAXYEAR,m=c.ONEAVGYEAR,h=c.ONEMINYEAR,w=c.ONEMAXQUARTER,p=c.ONEAVGQUARTER,o=c.ONEMINQUARTER,v=c.ONEMAXMONTH,M=c.ONEAVGMONTH,b=c.ONEMINMONTH,L=c.ONEWEEK,x=c.ONEDAY,S=x/2,T=c.ONEHOUR,n=c.ONEMIN,E=c.ONESEC,d=c.MINUS_SIGN,F=c.BADNUM,D={K:"zeroline"},N={K:"gridline",L:"path"},k={K:"minor-gridline",L:"path"},O={K:"tick",L:"path"},B={K:"tick",L:"text"},z={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},U=t(18783),H=U.MID_SHIFT,J=U.CAP_SHIFT,nt=U.LINE_SPACING,it=U.OPPOSITE_SIDE,Q=q.exports={};Q.setConvert=t(21994);var j=t(4322),Z=t(41675),G=Z.idSort,K=Z.isLinked;Q.id2name=Z.id2name,Q.name2id=Z.name2id,Q.cleanId=Z.cleanId,Q.list=Z.list,Q.listIds=Z.listIds,Q.getFromId=Z.getFromId,Q.getFromTrace=Z.getFromTrace;var at=t(71739);Q.getAutoRange=at.getAutoRange,Q.findExtremes=at.findExtremes;function X(Ut){var Ht=1e-4*(Ut[1]-Ut[0]);return[Ut[0]-Ht,Ut[1]+Ht]}Q.coerceRef=function(Ut,Ht,Se,Ce,We,qe){var or=Ce.charAt(Ce.length-1),_e=Se._fullLayout._subplots[or+"axis"],De=Ce+"ref",sr={};return We||(We=_e[0]||("string"==typeof qe?qe:qe[0])),qe||(qe=We),_e=_e.concat(_e.map(function(yr){return yr+" domain"})),sr[De]={valType:"enumerated",values:_e.concat(qe?"string"==typeof qe?[qe]:qe:[]),dflt:We},C.coerce(Ut,Ht,sr,De)},Q.getRefType=function(Ut){return void 0===Ut?Ut:"paper"===Ut?"paper":"pixel"===Ut?"pixel":/( domain)$/.test(Ut)?"domain":"range"},Q.coercePosition=function(Ut,Ht,Se,Ce,We,qe){var or,_e;if("range"!==Q.getRefType(Ce))or=C.ensureNumber,_e=Se(We,qe);else{var sr=Q.getFromId(Ht,Ce);_e=Se(We,qe=sr.fraction2r(qe)),or=sr.cleanPos}Ut[We]=or(_e)},Q.cleanPosition=function(Ut,Ht,Se){return("paper"===Se||"pixel"===Se?C.ensureNumber:Q.getFromId(Ht,Se).cleanPos)(Ut)},Q.redrawComponents=function(Ut,Ht){Ht=Ht||Q.listIds(Ut);var Se=Ut._fullLayout;function Ce(We,qe,or,_e){for(var De=P.getComponentMethod(We,qe),sr={},yr=0;yr<Ht.length;yr++)for(var Pr=Se[Q.id2name(Ht[yr])][or],Jr=0;Jr<Pr.length;Jr++){var Mr=Pr[Jr];if(!sr[Mr]&&(De(Ut,Mr),sr[Mr]=1,_e))return}}Ce("annotations","drawOne","_annIndices"),Ce("shapes","drawOne","_shapeIndices"),Ce("images","draw","_imgIndices",!0),Ce("selections","drawOne","_selectionIndices")};var rt=Q.getDataConversions=function(Ut,Ht,Se,Ce){var We,qe="x"===Se||"y"===Se||"z"===Se?Se:Ce;if(Array.isArray(qe)){if(We={type:j(Ce,void 0,{autotypenumbers:Ut._fullLayout.autotypenumbers}),_categories:[]},Q.setConvert(We),"category"===We.type)for(var or=0;or<Ce.length;or++)We.d2c(Ce[or])}else We=Q.getFromTrace(Ut,Ht,qe);return We?{d2c:We.d2c,c2d:We.c2d}:"ids"===qe?{d2c:st,c2d:st}:{d2c:et,c2d:et}};function et(Ut){return+Ut}function st(Ut){return String(Ut)}function gt(Ut,Ht){return Math.abs((Ut/Ht+.5)%1-.5)<.001}function Lt(Ut,Ht){return Math.abs(Ut/Ht-1)<.001}function It(Ut){return+Ut.substring(1)}function At(Ut,Ht){return Ut.rangebreaks&&(Ht=Ht.filter(function(Se){return Ut.maskBreaks(Se.x)!==F})),Ht}function Gt(Ut){var Ht=Ut._mainAxis,Se=[];if(Ht._vals)for(var Ce=0;Ce<Ht._vals.length;Ce++)if(!Ht._vals[Ce].noTick){var We=Ht.l2p(Ht._vals[Ce].x),qe=Ut.p2l(We),or=Q.tickText(Ut,qe);Ht._vals[Ce].minor&&(or.minor=!0,or.text=""),Se.push(or)}return At(Ut,Se)}function Wt(Ut){var Se=X(C.simpleMap(Ut.range,Ut.r2l)),Ce=Math.min(Se[0],Se[1]),We=Math.max(Se[0],Se[1]),qe="category"===Ut.type?Ut.d2l_noadd:Ut.d2l;"log"===Ut.type&&"L"!==String(Ut.dtick).charAt(0)&&(Ut.dtick="L"+Math.pow(10,Math.floor(Math.min(Ut.range[0],Ut.range[1]))-1));for(var or=[],_e=0;_e<=1;_e++)if(!_e||Ut.minor){var De=_e?Ut.minor.tickvals:Ut.tickvals,sr=_e?[]:Ut.ticktext;if(De){Array.isArray(sr)||(sr=[]);for(var yr=0;yr<De.length;yr++){var dr=qe(De[yr]);if(dr>Ce&&dr<We){var Pr=void 0===sr[yr]?Q.tickText(Ut,dr):pe(Ut,dr,String(sr[yr]));_e&&(Pr.minor=!0,Pr.text=""),or.push(Pr)}}}}return At(Ut,or)}Q.getDataToCoordFunc=function(Ut,Ht,Se,Ce){return rt(Ut,Ht,Se,Ce).d2c},Q.counterLetter=function(Ut){var Ht=Ut.charAt(0);return"x"===Ht?"y":"y"===Ht?"x":void 0},Q.minDtick=function(Ut,Ht,Se,Ce){-1===["log","category","multicategory"].indexOf(Ut.type)&&Ce?void 0===Ut._minDtick?(Ut._minDtick=Ht,Ut._forceTick0=Se):Ut._minDtick&&((Ut._minDtick/Ht+1e-6)%1<2e-6&&((Se-Ut._forceTick0)/Ht%1+1.000001)%1<2e-6?(Ut._minDtick=Ht,Ut._forceTick0=Se):((Ht/Ut._minDtick+1e-6)%1>2e-6||((Se-Ut._forceTick0)/Ut._minDtick%1+1.000001)%1>2e-6)&&(Ut._minDtick=0)):Ut._minDtick=0},Q.saveRangeInitial=function(Ut,Ht){for(var Se=Q.list(Ut,"",!0),Ce=!1,We=0;We<Se.length;We++){var qe=Se[We],or=void 0===qe._rangeInitial0&&void 0===qe._rangeInitial1,De=qe.autorange;(or&&!0!==De||Ht&&(or||qe.range[0]!==qe._rangeInitial0||qe.range[1]!==qe._rangeInitial1))&&(qe._rangeInitial0="min"===De||"max reversed"===De?void 0:qe.range[0],qe._rangeInitial1="max"===De||"min reversed"===De?void 0:qe.range[1],qe._autorangeInitial=De,Ce=!0)}return Ce},Q.saveShowSpikeInitial=function(Ut,Ht){for(var Se=Q.list(Ut,"",!0),Ce=!1,We="on",qe=0;qe<Se.length;qe++){var or=Se[qe],_e=void 0===or._showSpikeInitial;(_e||Ht&&(_e||or.showspikes!==or._showspikes))&&(or._showSpikeInitial=or.showspikes,Ce=!0),"on"===We&&!or.showspikes&&(We="off")}return Ut._fullLayout._cartesianSpikesEnabled=We,Ce},Q.autoBin=function(Ut,Ht,Se,Ce,We,qe){var De,or=C.aggNums(Math.min,null,Ut),_e=C.aggNums(Math.max,null,Ut);if("category"===Ht.type||"multicategory"===Ht.type)return{start:or-.5,end:_e+.5,size:Math.max(1,Math.round(qe)||1),_dataSpan:_e-or};if(We||(We=Ht.calendar),De="log"===Ht.type?{type:"linear",range:[or,_e]}:{type:Ht.type,range:C.simpleMap([or,_e],Ht.c2r,0,We),calendar:We},Q.setConvert(De),qe=qe&&s.dtick(qe,De.type))De.dtick=qe,De.tick0=s.tick0(void 0,De.type,We);else{var sr;if(Se)sr=(_e-or)/Se;else{var yr=C.distinctVals(Ut),dr=Math.pow(10,Math.floor(Math.log(yr.minDiff)/Math.LN10)),Pr=dr*C.roundUp(yr.minDiff/dr,[.9,1.9,4.9,9.9],!0);sr=Math.max(Pr,2*C.stdev(Ut)/Math.pow(Ut.length,Ce?.25:.4)),g(sr)||(sr=1)}Q.autoTicks(De,sr)}var Wr,Jr=De.dtick,Mr=Q.tickIncrement(Q.tickFirst(De),Jr,"reverse",We);if("number"==typeof Jr)Wr=(Mr=function dt(Ut,Ht,Se,Ce,We){var qe=0,or=0,_e=0,De=0;function sr(Jr){return(1+100*(Jr-Ut)/Se.dtick)%100<2}for(var yr=0;yr<Ht.length;yr++)Ht[yr]%1==0?_e++:g(Ht[yr])||De++,sr(Ht[yr])&&qe++,sr(Ht[yr]+Se.dtick/2)&&or++;var dr=Ht.length-De;if(_e===dr&&"date"!==Se.type)Se.dtick<1?Ut=Ce-.5*Se.dtick:(Ut-=.5)+Se.dtick<Ce&&(Ut+=Se.dtick);else if(or<.1*dr&&(qe>.3*dr||sr(Ce)||sr(We))){var Pr=Se.dtick/2;Ut+=Ut+Pr<Ce?Pr:-Pr}return Ut}(Mr,Ut,De,or,_e))+(1+Math.floor((_e-Mr)/Jr))*Jr;else for("M"===De.dtick.charAt(0)&&(Mr=function bt(Ut,Ht,Se,Ce,We){var qe=C.findExactDates(Ht,We);if(qe.exactDays>.8){var _e=Number(Se.substr(1));qe.exactYears>.8&&_e%12==0?Ut=Q.tickIncrement(Ut,"M6","reverse")+1.5*x:qe.exactMonths>.8?Ut=Q.tickIncrement(Ut,"M1","reverse")+15.5*x:Ut-=S;var De=Q.tickIncrement(Ut,Se);if(De<=Ce)return De}return Ut}(Mr,Ut,Jr,or,We)),Wr=Mr;Wr<=_e;)Wr=Q.tickIncrement(Wr,Jr,!1,We);return{start:Ht.c2r(Mr,0,We),end:Ht.c2r(Wr,0,We),size:Jr,_dataSpan:_e-or}},Q.prepMinorTicks=function(Ut,Ht,Se){if(!Ht.minor.dtick){delete Ut.dtick;var We,Ce=Ht.dtick&&g(Ht._tmin);if(Ce){var qe=Q.tickIncrement(Ht._tmin,Ht.dtick,!0);We=[Ht._tmin,.99*qe+.01*Ht._tmin]}else{var or=C.simpleMap(Ht.range,Ht.r2l);We=[or[0],.8*or[0]+.2*or[1]]}if(Ut.range=C.simpleMap(We,Ht.l2r),Ut._isMinor=!0,Q.prepTicks(Ut,Se),Ce){var _e=g(Ht.dtick),De=g(Ut.dtick),sr=_e?Ht.dtick:+Ht.dtick.substring(1),yr=De?Ut.dtick:+Ut.dtick.substring(1);_e&&De?gt(sr,yr)?sr===2*L&&yr===2*x&&(Ut.dtick=L):Ut.dtick=sr===2*L&&yr===3*x?L:sr!==L||(Ht._input.minor||{}).nticks?Lt(sr/yr,2.5)?sr/2:sr:x:"M"===String(Ht.dtick).charAt(0)?De?Ut.dtick="M1":gt(sr,yr)?sr>=12&&2===yr&&(Ut.dtick="M3"):Ut.dtick=Ht.dtick:"L"===String(Ut.dtick).charAt(0)?"L"===String(Ht.dtick).charAt(0)?gt(sr,yr)||(Ut.dtick=Lt(sr/yr,2.5)?Ht.dtick/2:Ht.dtick):Ut.dtick="D1":"D2"===Ut.dtick&&+Ht.dtick>1&&(Ut.dtick=1)}Ut.range=Ht.range}void 0===Ht.minor._tick0Init&&(Ut.tick0=Ht.tick0)},Q.prepTicks=function(Ut,Ht){var Se=C.simpleMap(Ut.range,Ut.r2l,void 0,void 0,Ht);if("auto"===Ut.tickmode||!Ut.dtick){var We,Ce=Ut.nticks;Ce||("category"===Ut.type||"multicategory"===Ut.type?(We=Ut.tickfont?C.bigFont(Ut.tickfont.size||12):15,Ce=Ut._length/We):(We="y"===Ut._id.charAt(0)?40:80,Ce=C.constrain(Ut._length/We,4,9)+1),"radialaxis"===Ut._name&&(Ce*=2)),Ut.minor&&"array"!==Ut.minor.tickmode||"array"===Ut.tickmode&&(Ce*=100),Ut._roughDTick=Math.abs(Se[1]-Se[0])/Ce,Q.autoTicks(Ut,Ut._roughDTick),Ut._minDtick>0&&Ut.dtick<2*Ut._minDtick&&(Ut.dtick=Ut._minDtick,Ut.tick0=Ut.l2r(Ut._forceTick0))}"period"===Ut.ticklabelmode&&function Mt(Ut){var Ht;function Se(){return!(g(Ut.dtick)||"M"!==Ut.dtick.charAt(0))}var Ce=Se(),We=Q.getTickFormat(Ut);if(We){var qe=Ut._dtickInit!==Ut.dtick;/%[fLQsSMX]/.test(We)||(/%[HI]/.test(We)?(Ht=T,qe&&!Ce&&Ut.dtick<T&&(Ut.dtick=T)):/%p/.test(We)?(Ht=S,qe&&!Ce&&Ut.dtick<S&&(Ut.dtick=S)):/%[Aadejuwx]/.test(We)?(Ht=x,qe&&!Ce&&Ut.dtick<x&&(Ut.dtick=x)):/%[UVW]/.test(We)?(Ht=L,qe&&!Ce&&Ut.dtick<L&&(Ut.dtick=L)):/%[Bbm]/.test(We)?(Ht=M,qe&&(Ce?It(Ut.dtick)<1:Ut.dtick<b)&&(Ut.dtick="M1")):/%[q]/.test(We)?(Ht=p,qe&&(Ce?It(Ut.dtick)<3:Ut.dtick<o)&&(Ut.dtick="M3")):/%[Yy]/.test(We)&&(Ht=m,qe&&(Ce?It(Ut.dtick)<12:Ut.dtick<h)&&(Ut.dtick="M12")))}(Ce=Se())&&Ut.tick0===Ut._dowTick0&&(Ut.tick0=Ut._rawTick0),Ut._definedDelta=Ht}(Ut),Ut.tick0||(Ut.tick0="date"===Ut.type?"2000-01-01":0),"date"===Ut.type&&Ut.dtick<.1&&(Ut.dtick=.1),oe(Ut)},Q.calcTicks=function(Ht,Se){for(var Ce=Ht.type,We=Ht.calendar,qe=Ht.ticklabelstep,or="period"===Ht.ticklabelmode,_e=C.simpleMap(Ht.range,Ht.r2l,void 0,void 0,Se),De=_e[1]<_e[0],sr=Math.min(_e[0],_e[1]),yr=Math.max(_e[0],_e[1]),dr=Math.max(1e3,Ht._length||0),Pr=[],Jr=[],Mr=[],Wr=[],nn=Ht.minor&&(Ht.minor.ticks||Ht.minor.showgrid),Nr=1;Nr>=(nn?0:1);Nr--){var Dn=!Nr;Nr?(Ht._dtickInit=Ht.dtick,Ht._tick0Init=Ht.tick0):(Ht.minor._dtickInit=Ht.minor.dtick,Ht.minor._tick0Init=Ht.minor.tick0);var hn=Nr?Ht:C.extendFlat({},Ht,Ht.minor);if(Dn?Q.prepMinorTicks(hn,Ht,Se):Q.prepTicks(hn,Se),"array"!==hn.tickmode)if("sync"!==hn.tickmode){var hr=X(_e),Ar=hr[0],Br=hr[1],Or=g(hn.dtick),an="log"===Ce&&!(Or||"L"===hn.dtick.charAt(0)),dn=Q.tickFirst(hn,Se);if(Nr){if(Ht._tmin=dn,dn<Ar!==De)break;("category"===Ce||"multicategory"===Ce)&&(Br=De?Math.max(-.5,Br):Math.min(Ht._categories.length-.5,Br))}var Ln,Qn,pn=null,wn=dn;Nr&&(Or?Qn=Ht.dtick:"date"===Ce?"string"==typeof Ht.dtick&&"M"===Ht.dtick.charAt(0)&&(Qn=M*Ht.dtick.substring(1)):Qn=Ht._roughDTick,Ln=Math.round((Ht.r2l(wn)-Ht.r2l(Ht.tick0))/Qn)-1);var Nn=hn.dtick;for(hn.rangebreaks&&hn._tick0Init!==hn.tick0&&(wn=Ie(wn,Ht),De||(wn=Q.tickIncrement(wn,Nn,!De,We))),Nr&&or&&(wn=Q.tickIncrement(wn,Nn,!De,We),Ln--);De?wn>=Br:wn<=Br;wn=Q.tickIncrement(wn,Nn,De,We)){if(Nr&&Ln++,hn.rangebreaks&&!De){if(wn<Ar)continue;if(hn.maskBreaks(wn)===F&&Ie(wn,hn)>=yr)break}if(Mr.length>dr||wn===pn)break;pn=wn;var Zn={value:wn};Nr?(an&&wn!==(0|wn)&&(Zn.simpleLabel=!0),qe>1&&Ln%qe&&(Zn.skipLabel=!0),Mr.push(Zn)):(Zn.minor=!0,Wr.push(Zn))}}else Mr=[],Pr=Gt(Ht);else Nr?(Mr=[],Pr=Wt(Ht)):(Wr=[],Jr=Wt(Ht))}var Mn;if(nn&&!("inside"===Ht.minor.ticks&&"outside"===Ht.ticks||"outside"===Ht.minor.ticks&&"inside"===Ht.ticks)){for(var Wn=Mr.map(function(xn){return xn.value}),wr=[],en=0;en<Wr.length;en++){var tn=Wr[en],gn=tn.value;if(-1===Wn.indexOf(gn)){for(var Fn=!1,Tn=0;!Fn&&Tn<Mr.length;Tn++)1e7+Mr[Tn].value===1e7+gn&&(Fn=!0);Fn||wr.push(tn)}}Wr=wr}if(or&&function xt(Ut,Ht,Se){for(var Ce=0;Ce<Ut.length;Ce++){var We=Ut[Ce].value,qe=Ce,or=Ce+1;Ce<Ut.length-1?(qe=Ce,or=Ce+1):Ce>0?(qe=Ce-1,or=Ce):(qe=Ce,or=Ce);var Pr,sr=Math.abs(Ut[or].value-Ut[qe].value),yr=Se||sr,dr=0;yr>=h?dr=sr>=h&&sr<=f?sr:m:Se===p&&yr>=o?dr=sr>=o&&sr<=w?sr:p:yr>=b?dr=sr>=b&&sr<=v?sr:M:Se===L&&yr>=L?dr=L:yr>=x?dr=x:Se===S&&yr>=S?dr=S:Se===T&&yr>=T&&(dr=T),dr>=sr&&(dr=sr,Pr=!0);var Jr=We+dr;if(Ht.rangebreaks&&dr>0){for(var Wr=0,nn=0;nn<84;nn++){var Nr=(nn+.5)/84;Ht.maskBreaks(We*(1-Nr)+Nr*Jr)!==F&&Wr++}(dr*=Wr/84)||(Ut[Ce].drop=!0),Pr&&sr>L&&(dr=sr)}(dr>0||0===Ce)&&(Ut[Ce].periodX=We+dr/2)}}(Mr,Ht,Ht._definedDelta),Ht.rangebreaks){var In="y"===Ht._id.charAt(0),Gn=1;"auto"===Ht.tickmode&&(Gn=Ht.tickfont?Ht.tickfont.size:12);var ua=NaN;for(Mn=Mr.length-1;Mn>-1;Mn--)if(Mr[Mn].drop)Mr.splice(Mn,1);else{Mr[Mn].value=Ie(Mr[Mn].value,Ht);var ka=Ht.c2p(Mr[Mn].value);(In?ua>ka-Gn:ua<ka+Gn)?Mr.splice(De?Mn+1:Mn,1):ua=ka}}Re(Ht)&&360===Math.abs(_e[1]-_e[0])&&Mr.pop(),Ht._tmax=(Mr[Mr.length-1]||{}).value,Ht._prevDateHead="",Ht._inCalcTicks=!0;var Ze,_r,fn,Tr=function(xn){xn.text="",Ht._prevDateHead=Ze};for(Mr=Mr.concat(Wr),Mn=0;Mn<Mr.length;Mn++){var En=Mr[Mn].value;Mr[Mn].minor?Jr.push({x:En,minor:!0}):(Ze=Ht._prevDateHead,_r=Q.tickText(Ht,En,!1,Mr[Mn].simpleLabel),void 0!==(fn=Mr[Mn].periodX)&&(_r.periodX=fn,(fn>yr||fn<sr)&&(fn>yr&&(_r.periodX=yr),fn<sr&&(_r.periodX=sr),Tr(_r))),Mr[Mn].skipLabel&&Tr(_r),Pr.push(_r))}return Pr=Pr.concat(Jr),Ht._inCalcTicks=!1,or&&Pr.length&&(Pr[0].noTick=!0),Pr};var Pt=[2,5,10],Vt=[1,2,3,6,12],te=[1,2,5,10,15,30],Qt=[1,2,3,7,14],Bt=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ot=[-.301,0,.301,.699,1],qt=[15,30,45,90,180];function ie(Ut,Ht,Se){return Ht*C.roundUp(Ut/Ht,Se)}function oe(Ut){var Ht=Ut.dtick;if(Ut._tickexponent=0,!g(Ht)&&"string"!=typeof Ht&&(Ht=1),("category"===Ut.type||"multicategory"===Ut.type)&&(Ut._tickround=null),"date"===Ut.type){var Se=Ut.r2l(Ut.tick0),Ce=Ut.l2r(Se).replace(/(^-|i)/g,""),We=Ce.length;if("M"===String(Ht).charAt(0))Ut._tickround=We>10||"01-01"!==Ce.substr(5)?"d":+Ht.substr(1)%12==0?"y":"m";else if(Ht>=x&&We<=10||Ht>=15*x)Ut._tickround="d";else if(Ht>=n&&We<=16||Ht>=T)Ut._tickround="M";else if(Ht>=E&&We<=19||Ht>=n)Ut._tickround="S";else{var qe=Ut.l2r(Se+Ht).replace(/^-/,"").length;Ut._tickround=Math.max(We,qe)-20,Ut._tickround<0&&(Ut._tickround=4)}}else if(g(Ht)||"L"===Ht.charAt(0)){var or=Ut.range.map(Ut.r2d||Number);g(Ht)||(Ht=Number(Ht.substr(1))),Ut._tickround=2-Math.floor(Math.log(Ht)/Math.LN10+.01);var _e=Math.max(Math.abs(or[0]),Math.abs(or[1])),De=Math.floor(Math.log(_e)/Math.LN10+.01),sr=void 0===Ut.minexponent?3:Ut.minexponent;Math.abs(De)>sr&&(Ut._tickexponent=Rt(Ut.exponentformat)&&!wt(De)?3*Math.round((De-1)/3):De)}else Ut._tickround=null}function pe(Ut,Ht,Se){var Ce=Ut.tickfont||{};return{x:Ht,dx:0,dy:0,text:Se||"",fontSize:Ce.size,font:Ce.family,fontColor:Ce.color}}function Dt(Ut,Ht,Se,Ce,We){if("radians"!==Ut.thetaunit||Se)Ht.text=ft(Ht.x,Ut,We,Ce);else{var qe=Ht.x/180;if(0===qe)Ht.text="0";else{var or=function Ft(Ut){function Ht(_e,De){return Math.abs(_e-De)<=1e-6}function Se(_e,De){return Ht(De,0)?_e:Se(De,_e%De)}function Ce(_e){for(var De=1;!Ht(Math.round(_e*De)/De,_e);)De*=10;return De}var We=Ce(Ut),qe=Ut*We,or=Math.abs(Se(qe,We));return[Math.round(qe/or),Math.round(We/or)]}(qe);if(or[1]>=100)Ht.text=ft(C.deg2rad(Ht.x),Ut,We,Ce);else{var _e=Ht.x<0;Ht.text=1===or[1]?1===or[0]?"\u03c0":or[0]+"\u03c0":["<sup>",or[0],"</sup>","\u2044","<sub>",or[1],"</sub>","\u03c0"].join(""),_e&&(Ht.text=d+Ht.text)}}}}Q.autoTicks=function(Ut,Ht,Se){var Ce;function We(dr){return Math.pow(dr,Math.floor(Math.log(Ht)/Math.LN10))}if("date"===Ut.type){Ut.tick0=C.dateTick0(Ut.calendar,0);var qe=2*Ht;if(qe>m)Ht/=m,Ce=We(10),Ut.dtick="M"+12*ie(Ht,Ce,Pt);else if(qe>M)Ut.dtick="M"+ie(Ht/=M,1,Vt);else if(qe>x){if(Ut.dtick=ie(Ht,x,Ut._hasDayOfWeekBreaks?[1,2,7,14]:Qt),!Se){var or=Q.getTickFormat(Ut),_e="period"===Ut.ticklabelmode;_e&&(Ut._rawTick0=Ut.tick0),Ut.tick0=/%[uVW]/.test(or)?C.dateTick0(Ut.calendar,2):C.dateTick0(Ut.calendar,1),_e&&(Ut._dowTick0=Ut.tick0)}}else qe>T?Ut.dtick=ie(Ht,T,Vt):qe>n?Ut.dtick=ie(Ht,n,te):qe>E?Ut.dtick=ie(Ht,E,te):(Ce=We(10),Ut.dtick=ie(Ht,Ce,Pt))}else if("log"===Ut.type){Ut.tick0=0;var De=C.simpleMap(Ut.range,Ut.r2l);if(Ut._isMinor&&(Ht*=1.5),Ht>.7)Ut.dtick=Math.ceil(Ht);else if(Math.abs(De[1]-De[0])<1){var sr=1.5*Math.abs((De[1]-De[0])/Ht);Ht=Math.abs(Math.pow(10,De[1])-Math.pow(10,De[0]))/sr,Ce=We(10),Ut.dtick="L"+ie(Ht,Ce,Pt)}else Ut.dtick=Ht>.3?"D2":"D1"}else"category"===Ut.type||"multicategory"===Ut.type?(Ut.tick0=0,Ut.dtick=Math.ceil(Math.max(Ht,1))):Re(Ut)?(Ut.tick0=0,Ut.dtick=ie(Ht,Ce=1,qt)):(Ut.tick0=0,Ce=We(10),Ut.dtick=ie(Ht,Ce,Pt));if(0===Ut.dtick&&(Ut.dtick=1),!g(Ut.dtick)&&"string"!=typeof Ut.dtick){var yr=Ut.dtick;throw Ut.dtick=1,"ax.dtick error: "+String(yr)}},Q.tickIncrement=function(Ut,Ht,Se,Ce){var We=Se?-1:1;if(g(Ht))return C.increment(Ut,We*Ht);var qe=Ht.charAt(0),or=We*Number(Ht.substr(1));if("M"===qe)return C.incrementMonth(Ut,or,Ce);if("L"===qe)return Math.log(Math.pow(10,Ut)+or)/Math.LN10;if("D"===qe){var _e="D2"===Ht?Ot:Bt,De=Ut+.01*We,sr=C.roundUp(C.mod(De,1),_e,Se);return Math.floor(De)+Math.log(A.round(Math.pow(10,sr),1))/Math.LN10}throw"unrecognized dtick "+String(Ht)},Q.tickFirst=function(Ut,Ht){var Se=Ut.r2l||Number,Ce=C.simpleMap(Ut.range,Se,void 0,void 0,Ht),We=Ce[1]<Ce[0],qe=We?Math.floor:Math.ceil,or=X(Ce)[0],_e=Ut.dtick,De=Se(Ut.tick0);if(g(_e)){var sr=qe((or-De)/_e)*_e+De;return("category"===Ut.type||"multicategory"===Ut.type)&&(sr=C.constrain(sr,0,Ut._categories.length-1)),sr}var yr=_e.charAt(0),dr=Number(_e.substr(1));if("M"===yr){for(var Mr,Wr,nn,Pr=0,Jr=De;Pr<10;){if(((Mr=Q.tickIncrement(Jr,_e,We,Ut.calendar))-or)*(Jr-or)<=0)return We?Math.min(Jr,Mr):Math.max(Jr,Mr);Wr=(or-(Jr+Mr)/2)/(Mr-Jr),nn=yr+(Math.abs(Math.round(Wr))||1)*dr,Jr=Q.tickIncrement(Jr,nn,Wr<0?!We:We,Ut.calendar),Pr++}return C.error("tickFirst did not converge",Ut),Jr}if("L"===yr)return Math.log(qe((Math.pow(10,or)-De)/dr)*dr+De)/Math.LN10;if("D"===yr){var Nr="D2"===_e?Ot:Bt,Dn=C.roundUp(C.mod(or,1),Nr,We);return Math.floor(or)+Math.log(A.round(Math.pow(10,Dn),1))/Math.LN10}throw"unrecognized dtick "+String(_e)},Q.tickText=function(Ut,Ht,Se,Ce){var sr,We=pe(Ut,Ht),qe="array"===Ut.tickmode,or=Se||qe,_e=Ut.type,De="category"===_e?Ut.d2l_noadd:Ut.d2l;if(qe&&Array.isArray(Ut.ticktext)){var yr=C.simpleMap(Ut.range,Ut.r2l),dr=(Math.abs(yr[1]-yr[0])-(Ut._lBreaks||0))/1e4;for(sr=0;sr<Ut.ticktext.length&&!(Math.abs(Ht-De(Ut.tickvals[sr]))<dr);sr++);if(sr<Ut.ticktext.length)return We.text=String(Ut.ticktext[sr]),We}function Pr(nn){return void 0===nn||(Se?"none"===nn:"all"!==nn&&Ht!=={first:Ut._tmin,last:Ut._tmax}[nn])}var Jr=Se?"never":"none"!==Ut.exponentformat&&Pr(Ut.showexponent)?"hide":"";if("date"===_e?function de(Ut,Ht,Se,Ce){var We=Ut._tickround,qe=Se&&Ut.hoverformat||Q.getTickFormat(Ut);(Ce=!qe&&Ce)&&(We=g(We)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[We]);var _e,or=C.formatDate(Ht.x,qe,We,Ut._dateFormat,Ut.calendar,Ut._extraFormat),De=or.indexOf("\n");if(-1!==De&&(_e=or.substr(De+1),or=or.substr(0,De)),Ce&&(void 0===_e||"00:00:00"!==or&&"00:00"!==or?8===or.length&&(or=or.replace(/:00$/,"")):(or=_e,_e="")),_e)if(Se)"d"===We?or+=", "+_e:or=_e+(or?", "+or:"");else if(Ut._inCalcTicks&&Ut._prevDateHead===_e){var sr=Xe(Ut),yr=Ut._trueSide||Ut.side;(!sr&&"top"===yr||sr&&"bottom"===yr)&&(or+="<br> ")}else Ut._prevDateHead=_e,or+="<br>"+_e;Ht.text=or}(Ut,We,Se,or):"log"===_e?function Fe(Ut,Ht,Se,Ce,We){var qe=Ut.dtick,or=Ht.x,_e=Ut.tickformat,De="string"==typeof qe&&qe.charAt(0);if("never"===We&&(We=""),Ce&&"L"!==De&&(qe="L3",De="L"),_e||"L"===De)Ht.text=ft(Math.pow(10,or),Ut,We,Ce);else if(g(qe)||"D"===De&&C.mod(or+.01,1)<.1){var sr=Math.round(or),yr=Math.abs(sr),dr=Ut.exponentformat;"power"===dr||Rt(dr)&&wt(sr)?(Ht.text=0===sr?1:1===sr?"10":"10<sup>"+(sr>1?"":d)+yr+"</sup>",Ht.fontSize*=1.25):("e"===dr||"E"===dr)&&yr>2?Ht.text="1"+dr+(sr>0?"+":d)+yr:(Ht.text=ft(Math.pow(10,or),Ut,"","fakehover"),"D1"===qe&&"y"===Ut._id.charAt(0)&&(Ht.dy-=Ht.fontSize/6))}else{if("D"!==De)throw"unrecognized dtick "+String(qe);Ht.text=String(Math.round(Math.pow(10,C.mod(or,1)))),Ht.fontSize*=.75}if("D1"===Ut.dtick){var Pr=String(Ht.text).charAt(0);("0"===Pr||"1"===Pr)&&("y"===Ut._id.charAt(0)?Ht.dx-=Ht.fontSize/4:(Ht.dy+=Ht.fontSize/2,Ht.dx+=(Ut.range[1]>Ut.range[0]?1:-1)*Ht.fontSize*(or<0?.5:.25)))}}(Ut,We,0,or,Jr):"category"===_e?function Kt(Ut,Ht){var Se=Ut._categories[Math.round(Ht.x)];void 0===Se&&(Se=""),Ht.text=String(Se)}(Ut,We):"multicategory"===_e?function Et(Ut,Ht,Se){var Ce=Math.round(Ht.x),We=Ut._categories[Ce]||[],qe=void 0===We[1]?"":String(We[1]),or=void 0===We[0]?"":String(We[0]);Se?Ht.text=or+" - "+qe:(Ht.text=qe,Ht.text2=or)}(Ut,We,Se):Re(Ut)?Dt(Ut,We,Se,or,Jr):function St(Ut,Ht,Se,Ce,We){"never"===We?We="":"all"===Ut.showexponent&&Math.abs(Ht.x/Ut.dtick)<1e-6&&(We="hide"),Ht.text=ft(Ht.x,Ut,We,Ce)}(Ut,We,0,or,Jr),Ce||(Ut.tickprefix&&!Pr(Ut.showtickprefix)&&(We.text=Ut.tickprefix+We.text),Ut.ticksuffix&&!Pr(Ut.showticksuffix)&&(We.text+=Ut.ticksuffix)),Ut.labelalias&&Ut.labelalias.hasOwnProperty(We.text)){var Mr=Ut.labelalias[We.text];"string"==typeof Mr&&(We.text=Mr)}if("boundaries"===Ut.tickson||Ut.showdividers){var Wr=function(nn){var Nr=Ut.l2p(nn);return Nr>=0&&Nr<=Ut._length?nn:null};We.xbnd=[Wr(We.x-.5),Wr(We.x+Ut.dtick-.5)]}return We},Q.hoverLabelText=function(Ut,Ht,Se){Se&&(Ut=C.extendFlat({},Ut,{hoverformat:Se}));var Ce=Array.isArray(Ht)?Ht[0]:Ht,We=Array.isArray(Ht)?Ht[1]:void 0;if(void 0!==We&&We!==Ce)return Q.hoverLabelText(Ut,Ce,Se)+" - "+Q.hoverLabelText(Ut,We,Se);var qe="log"===Ut.type&&Ce<=0,or=Q.tickText(Ut,Ut.c2l(qe?-Ce:Ce),"hover").text;return qe?0===Ce?"0":d+or:or};var Nt=["f","p","n","\u03bc","m","","k","M","G","T"];function Rt(Ut){return"SI"===Ut||"B"===Ut}function wt(Ut){return Ut>14||Ut<-15}function ft(Ut,Ht,Se,Ce){var We=Ut<0,qe=Ht._tickround,or=Se||Ht.exponentformat||"B",_e=Ht._tickexponent,De=Q.getTickFormat(Ht),sr=Ht.separatethousands;if(Ce){var yr={exponentformat:or,minexponent:Ht.minexponent,dtick:"none"===Ht.showexponent?Ht.dtick:g(Ut)&&Math.abs(Ut)||1,range:"none"===Ht.showexponent?Ht.range.map(Ht.r2d):[0,Ut||1]};oe(yr),qe=(Number(yr._tickround)||0)+4,_e=yr._tickexponent,Ht.hoverformat&&(De=Ht.hoverformat)}if(De)return Ht._numFormat(De)(Ut).replace(/-/g,d);var Mr,dr=Math.pow(10,-qe)/2;if("none"===or&&(_e=0),(Ut=Math.abs(Ut))<dr)Ut="0",We=!1;else{if(Ut+=dr,_e&&(Ut*=Math.pow(10,-_e),qe+=_e),0===qe)Ut=String(Math.floor(Ut));else if(qe<0){Ut=(Ut=String(Math.round(Ut))).substr(0,Ut.length+qe);for(var Pr=qe;Pr<0;Pr++)Ut+="0"}else{var Jr=(Ut=String(Ut)).indexOf(".")+1;Jr&&(Ut=Ut.substr(0,Jr+qe).replace(/\.?0+$/,""))}Ut=C.numSeparate(Ut,Ht._separators,sr)}return _e&&"hide"!==or&&(Rt(or)&&wt(_e)&&(or="power"),Mr=_e<0?d+-_e:"power"!==or?"+"+_e:String(_e),"e"===or||"E"===or?Ut+=or+Mr:"power"===or?Ut+="\xd710<sup>"+Mr+"</sup>":"B"===or&&9===_e?Ut+="B":Rt(or)&&(Ut+=Nt[_e/3+5])),We?d+Ut:Ut}function pt(Ut,Ht){if(Ut){var Se=Object.keys(z).reduce(function(Ce,We){return-1!==Ht.indexOf(We)&&z[We].forEach(function(qe){Ce[qe]=1}),Ce},{});Object.keys(Ut).forEach(function(Ce){Se[Ce]||(1===Ce.length?Ut[Ce]=0:delete Ut[Ce])})}}function Zt(Ut,Ht){for(var Se=[],Ce={},We=0;We<Ht.length;We++){var qe=Ht[We];Ce[qe.text2]?Ce[qe.text2].push(qe.x):Ce[qe.text2]=[qe.x]}for(var or in Ce)Se.push(pe(Ut,C.interp(Ce[or],.5),or));return Se}function Be(Ut){return void 0!==Ut.periodX?Ut.periodX:Ut.x}function xe(Ut){return[Ut.text,Ut.x,Ut.axInfo,Ut.font,Ut.fontSize,Ut.fontColor].join("_")}function Ge(Ut){var Ht=Ut.title.font.size,Se=(Ut.title.text.match(y.BR_TAG_ALL)||[]).length;return Ut.title.hasOwnProperty("standoff")?Se?Ht*(J+Se*nt):Ht*J:Se?Ht*(Se+1)*nt:Ht}function ue(Ut,Ht){var Se=Ut.l2p(Ht);return Se>1&&Se<Ut._length-1}function xr(Ut){var Ht=A.select(Ut),Se=Ht.select(".text-math-group");return Se.empty()?Ht.select("text"):Se}function rr(Ut){return Ut._id+".automargin"}function ce(Ut){return rr(Ut)+".mirror"}function re(Ut){return Ut._id+".rangeslider"}function be(Ut,Ht){for(var Se=0;Se<Ht.length;Se++)-1===Ut.indexOf(Ht[Se])&&Ut.push(Ht[Se])}function Ae(Ut,Ht,Se){var or,_e,Ce=[],We=[],qe=Ut.layout;for(or=0;or<Ht.length;or++)Ce.push(Q.getFromId(Ut,Ht[or]));for(or=0;or<Se.length;or++)We.push(Q.getFromId(Ut,Se[or]));var De=Object.keys(a),sr=["anchor","domain","overlaying","position","side","tickangle","editType"],yr=["linear","log"];for(or=0;or<De.length;or++){var dr=De[or],Pr=Ce[0][dr],Jr=We[0][dr],Mr=!0,Wr=!1,nn=!1;if("_"!==dr.charAt(0)&&"function"!=typeof Pr&&-1===sr.indexOf(dr)){for(_e=1;_e<Ce.length&&Mr;_e++){var Nr=Ce[_e][dr];"type"===dr&&-1!==yr.indexOf(Pr)&&-1!==yr.indexOf(Nr)&&Pr!==Nr?Wr=!0:Nr!==Pr&&(Mr=!1)}for(_e=1;_e<We.length&&Mr;_e++){var Dn=We[_e][dr];"type"===dr&&-1!==yr.indexOf(Jr)&&-1!==yr.indexOf(Dn)&&Jr!==Dn?nn=!0:We[_e][dr]!==Jr&&(Mr=!1)}Mr&&(Wr&&(qe[Ce[0]._name].type="linear"),nn&&(qe[We[0]._name].type="linear"),Te(qe,dr,Ce,We,Ut._fullLayout._dfltTitle))}}for(or=0;or<Ut._fullLayout.annotations.length;or++){var hn=Ut._fullLayout.annotations[or];-1!==Ht.indexOf(hn.xref)&&-1!==Se.indexOf(hn.yref)&&C.swapAttrs(qe.annotations[or],["?"])}}function Te(Ut,Ht,Se,Ce,We){var De,qe=C.nestedProperty,or=qe(Ut[Se[0]._name],Ht).get(),_e=qe(Ut[Ce[0]._name],Ht).get();for("title"===Ht&&(or&&or.text===We.x&&(or.text=We.y),_e&&_e.text===We.y&&(_e.text=We.x)),De=0;De<Se.length;De++)qe(Ut,Se[De]._name+"."+Ht).set(_e);for(De=0;De<Ce.length;De++)qe(Ut,Ce[De]._name+"."+Ht).set(or)}function Re(Ut){return"angularaxis"===Ut._id}function Ie(Ut,Ht){for(var Se=Ht._rangebreaks.length,Ce=0;Ce<Se;Ce++){var We=Ht._rangebreaks[Ce];if(Ut>=We.min&&Ut<We.max)return We.max}return Ut}function Xe(Ut){return-1!==(Ut.ticklabelposition||"").indexOf("inside")}function ar(Ut,Ht){Xe(Ut._anchorAxis||{})&&Ut._hideCounterAxisInsideTickLabels&&Ut._hideCounterAxisInsideTickLabels(Ht)}function nr(Ut,Ht,Se,Ce){var qe,We="free"===Ut.anchor||void 0!==Ut.overlaying&&!1!==Ut.overlaying?Ut.overlaying:Ut._id;qe=Ce?"right"===Ut.side?Ht:-Ht:Ht,We in Se||(Se[We]={}),Ut.side in Se[We]||(Se[We][Ut.side]=0),Se[We][Ut.side]+=qe}Q.getTickFormat=function(Ut){var Ht,or,_e,De,sr,dr,Pr,Jr;function Se(De){return"string"!=typeof De?De:Number(De.replace("M",""))*M}function Ce(De,sr){var yr=["L","D"];if(typeof De==typeof sr){if("number"==typeof De)return De-sr;var dr=yr.indexOf(De.charAt(0)),Pr=yr.indexOf(sr.charAt(0));return dr===Pr?Number(De.replace(/(L|D)/g,""))-Number(sr.replace(/(L|D)/g,"")):dr-Pr}return"number"==typeof De?1:-1}function qe(De,sr){var yr=null===sr[0],dr=null===sr[1],Pr=Ce(De,sr[0])>=0,Jr=Ce(De,sr[1])<=0;return(yr||Pr)&&(dr||Jr)}if(Ut.tickformatstops&&Ut.tickformatstops.length>0)switch(Ut.type){case"date":case"linear":for(Ht=0;Ht<Ut.tickformatstops.length;Ht++)if((_e=Ut.tickformatstops[Ht]).enabled&&(De=Ut.dtick,dr=void 0,Pr=void 0,Jr=void 0,dr=Se||function(Mr){return Mr},Jr=(sr=_e.dtickrange)[1],(!(Pr=sr[0])&&"number"!=typeof Pr||dr(Pr)<=dr(De))&&(!Jr&&"number"!=typeof Jr||dr(Jr)>=dr(De)))){or=_e;break}break;case"log":for(Ht=0;Ht<Ut.tickformatstops.length;Ht++)if((_e=Ut.tickformatstops[Ht]).enabled&&qe(Ut.dtick,_e.dtickrange)){or=_e;break}}return or?or.value:Ut.tickformat},Q.getSubplots=function(Ut,Ht){var Se=Ut._fullLayout._subplots,Ce=Se.cartesian.concat(Se.gl2d||[]),We=Ht?Q.findSubplotsWithAxis(Ce,Ht):Ce;return We.sort(function(qe,or){var _e=qe.substr(1).split("y"),De=or.substr(1).split("y");return _e[0]===De[0]?+_e[1]-+De[1]:+_e[0]-+De[0]}),We},Q.findSubplotsWithAxis=function(Ut,Ht){for(var Se=new RegExp("x"===Ht._id.charAt(0)?"^"+Ht._id+"y":Ht._id+"$"),Ce=[],We=0;We<Ut.length;We++){var qe=Ut[We];Se.test(qe)&&Ce.push(qe)}return Ce},Q.makeClipPaths=function(Ut){var Ht=Ut._fullLayout;if(!Ht._hasOnlyLargeSploms){var _e,De,Se={_offset:0,_length:Ht.width,_id:""},Ce={_offset:0,_length:Ht.height,_id:""},We=Q.list(Ut,"x",!0),qe=Q.list(Ut,"y",!0),or=[];for(_e=0;_e<We.length;_e++)for(or.push({x:We[_e],y:Ce}),De=0;De<qe.length;De++)0===_e&&or.push({x:Se,y:qe[De]}),or.push({x:We[_e],y:qe[De]});var sr=Ht._clips.selectAll(".axesclip").data(or,function(yr){return yr.x._id+yr.y._id});sr.enter().append("clipPath").classed("axesclip",!0).attr("id",function(yr){return"clip"+Ht._uid+yr.x._id+yr.y._id}).append("rect"),sr.exit().remove(),sr.each(function(yr){A.select(this).select("rect").attr({x:yr.x._offset||0,y:yr.y._offset||0,width:yr.x._length||1,height:yr.y._length||1})})}},Q.draw=function(Ut,Ht,Se){var Ce=Ut._fullLayout;"redraw"===Ht&&Ce._paper.selectAll("g.subplot").each(function(De){var yr=Ce._plots[De[0]];if(yr){var dr=yr.xaxis,Pr=yr.yaxis;yr.xaxislayer.selectAll("."+dr._id+"tick").remove(),yr.yaxislayer.selectAll("."+Pr._id+"tick").remove(),yr.xaxislayer.selectAll("."+dr._id+"tick2").remove(),yr.yaxislayer.selectAll("."+Pr._id+"tick2").remove(),yr.xaxislayer.selectAll("."+dr._id+"divider").remove(),yr.yaxislayer.selectAll("."+Pr._id+"divider").remove(),yr.minorGridlayer&&yr.minorGridlayer.selectAll("path").remove(),yr.gridlayer&&yr.gridlayer.selectAll("path").remove(),yr.zerolinelayer&&yr.zerolinelayer.selectAll("path").remove(),Ce._infolayer.select(".g-"+dr._id+"title").remove(),Ce._infolayer.select(".g-"+Pr._id+"title").remove()}});var We=Ht&&"redraw"!==Ht?Ht:Q.listIds(Ut),or=Q.list(Ut).filter(function(De){return De.autoshift}).map(function(De){return De.overlaying});We.map(function(De){var sr=Q.getFromId(Ut,De);if("sync"===sr.tickmode&&sr.overlaying){var yr=We.findIndex(function(dr){return dr===sr.overlaying});yr>=0&&We.unshift(We.splice(yr,1).shift())}});var _e={false:{left:0,right:0}};return C.syncOrAsync(We.map(function(De){return function(){if(De){var sr=Q.getFromId(Ut,De);Se||(Se={}),Se.axShifts=_e,Se.overlayingShiftedAx=or;var yr=Q.drawOne(Ut,sr,Se);return sr._shiftPusher&&nr(sr,sr._fullDepth||0,_e,!0),sr._r=sr.range.slice(),sr._rl=C.simpleMap(sr._r,sr.r2l),yr}}}))},Q.drawOne=function(Ut,Ht,Se){var qe,or,_e,Ce=(Se=Se||{}).axShifts||{},We=Se.overlayingShiftedAx||[];Ht.setScale();var De=Ut._fullLayout,sr=Ht._id,yr=sr.charAt(0),dr=Q.counterLetter(sr),Pr=De._plots[Ht._mainSubplot];if(Pr){if(Ht._shiftPusher=Ht.autoshift||-1!==We.indexOf(Ht._id)||-1!==We.indexOf(Ht.overlaying),Ht._shiftPusher&"free"===Ht.anchor){var Jr=Ht.linewidth/2||0;"inside"===Ht.ticks&&(Jr+=Ht.ticklen),nr(Ht,Jr,Ce,!0),nr(Ht,Ht.shift||0,Ce,!1)}(!0!==Se.skipTitle||void 0===Ht._shift)&&(Ht._shift=function cr(Ut,Ht){return Ut.autoshift?Ht[Ut.overlaying][Ut.side]:Ut.shift||0}(Ht,Ce));var Mr=Pr[yr+"axislayer"],Wr=Ht._mainLinePosition,nn=Wr+=Ht._shift,Nr=Ht._mainMirrorPosition,Dn=Ht._vals=Q.calcTicks(Ht),hn=[Ht.mirror,nn,Nr].join("_");for(qe=0;qe<Dn.length;qe++)Dn[qe].axInfo=hn;Ht._selections={},Ht._tickAngles&&(Ht._prevTickAngles=Ht._tickAngles),Ht._tickAngles={},Ht._depth=null;var hr={};if(Ht.visible){var an,dn,Br=Q.makeTransTickFn(Ht),Or=Q.makeTransTickLabelFn(Ht),pn="inside"===Ht.ticks,wn="outside"===Ht.ticks;if("boundaries"===Ht.tickson){var Ln=function kt(Ut,Ht){var Ce,Se=[],We=function(qe,or){var _e=qe.xbnd[or];null!==_e&&Se.push(C.extendFlat({},qe,{x:_e}))};if(Ht.length){for(Ce=0;Ce<Ht.length;Ce++)We(Ht[Ce],0);We(Ht[Ce-1],1)}return Se}(0,Dn);dn=Q.clipEnds(Ht,Ln),an=pn?dn:Ln}else dn=Q.clipEnds(Ht,Dn),an=pn&&"period"!==Ht.ticklabelmode?dn:Dn;var Qn=Ht._gridVals=dn,Nn=function ee(Ut,Ht){var Ce,We,Se=[],qe=Ht.length&&Ht[Ht.length-1].x<Ht[0].x,or=function(De,sr){var yr=De.xbnd[sr];null!==yr&&Se.push(C.extendFlat({},De,{x:yr}))};if(Ut.showdividers&&Ht.length){for(Ce=0;Ce<Ht.length;Ce++){var _e=Ht[Ce];_e.text2!==We&&or(_e,qe?1:0),We=_e.text2}or(Ht[Ce-1],qe?0:1)}return Se}(Ht,Dn);if(!De._hasOnlyLargeSploms){var Zn=Ht._subplotsWith,Bn={};for(qe=0;qe<Zn.length;qe++){var Wn=(_e=De._plots[or=Zn[qe]])[dr+"axis"],wr=Wn._mainAxis._id;if(!Bn[wr]){Bn[wr]=1;var en="x"===yr?"M0,"+Wn._offset+"v"+Wn._length:"M"+Wn._offset+",0h"+Wn._length;Q.drawGrid(Ut,Ht,{vals:Qn,counterAxis:Wn,layer:_e.gridlayer.select("."+sr),minorLayer:_e.minorGridlayer.select("."+sr),path:en,transFn:Br}),Q.drawZeroLine(Ut,Ht,{counterAxis:Wn,layer:_e.zerolinelayer,path:en,transFn:Br})}}}var tn,gn=Q.getTickSigns(Ht),Fn=Q.getTickSigns(Ht,"minor");if(Ht.ticks||Ht.minor&&Ht.minor.ticks){var In,Gn,ua,ka,Tn=Q.makeTickPath(Ht,nn,gn[2]),Mn=Q.makeTickPath(Ht,nn,Fn[2],{minor:!0});if(Ht._anchorAxis&&Ht.mirror&&!0!==Ht.mirror?(In=Q.makeTickPath(Ht,Nr,gn[3]),Gn=Q.makeTickPath(Ht,Nr,Fn[3],{minor:!0}),ua=Tn+In,ka=Mn+Gn):(In="",Gn="",ua=Tn,ka=Mn),Ht.showdividers&&wn&&"boundaries"===Ht.tickson){var Ze={};for(qe=0;qe<Nn.length;qe++)Ze[Nn[qe].x]=1;tn=function(He){return Ze[He.x]?In:ua}}else tn=function(He){return He.minor?ka:ua}}if(Q.drawTicks(Ut,Ht,{vals:an,layer:Mr,path:tn,transFn:Br}),"allticks"===Ht.mirror){var Tr=Object.keys(Ht._linepositions||{});for(qe=0;qe<Tr.length;qe++){_e=De._plots[or=Tr[qe]];var _r=Ht._linepositions[or]||[],sn=_r[1],En=_r[2],xn=Q.makeTickPath(Ht,_r[0],En?gn[0]:Fn[0],{minor:En})+Q.makeTickPath(Ht,sn,En?gn[1]:Fn[1],{minor:En});Q.drawTicks(Ut,Ht,{vals:an,layer:_e[yr+"axislayer"],path:xn,transFn:Br})}}var vn=[];if(vn.push(function(){return Q.drawLabels(Ut,Ht,{vals:Dn,layer:Mr,plotinfo:_e,transFn:Or,labelFns:Q.makeLabelFns(Ht,nn)})}),"multicategory"===Ht.type){var Lr={x:2,y:10}[yr];vn.push(function(){var He={x:"height",y:"width"}[yr],Dr=Ar()[He]+Lr+(Ht._tickAngles[sr+"tick"]?Ht.tickfont.size*nt:0);return Q.drawLabels(Ut,Ht,{vals:Zt(Ht,Dn),layer:Mr,cls:sr+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Br,labelFns:Q.makeLabelFns(Ht,nn+Dr*gn[4])})}),vn.push(function(){return Ht._depth=gn[4]*(Ar("tick2")[Ht.side]-nn),function Pe(Ut,Ht,Se){var Ce=Ht._id+"divider",We=Se.vals,qe=Se.layer.selectAll("path."+Ce).data(We,xe);qe.exit().remove(),qe.enter().insert("path",":first-child").classed(Ce,1).classed("crisp",1).call(r.stroke,Ht.dividercolor).style("stroke-width",l.crispRound(Ut,Ht.dividerwidth,1)+"px"),qe.attr("transform",Se.transFn).attr("d",Se.path)}(Ut,Ht,{vals:Nn,layer:Mr,path:Q.makeTickPath(Ht,nn,gn[4],{len:Ht._depth}),transFn:Br})})}else Ht.title.hasOwnProperty("standoff")&&vn.push(function(){Ht._depth=gn[4]*(Ar()[Ht.side]-nn)});var Er=P.getComponentMethod("rangeslider","isVisible")(Ht);return!Se.skipTitle&&!(Er&&"bottom"===Ht.side)&&vn.push(function(){return function gr(Ut,Ht){var or,Se=Ut._fullLayout,Ce=Ht._id,We=Ce.charAt(0),qe=Ht.title.font.size;if(Ht.title.hasOwnProperty("standoff"))or=Ht._depth+Ht.title.standoff+Ge(Ht);else{var _e=Xe(Ht);if("multicategory"===Ht.type)or=Ht._depth;else{var De=1.5*qe;_e&&(De=.5*qe,"outside"===Ht.ticks&&(De+=Ht.ticklen)),or=10+De+(Ht.linewidth?Ht.linewidth-1:0)}_e||(or+="x"===We?"top"===Ht.side?qe*(Ht.showticklabels?1:0):qe*(Ht.showticklabels?1.5:.5):"right"===Ht.side?qe*(Ht.showticklabels?1:.5):qe*(Ht.showticklabels?.5:0))}var yr,dr,Pr,Jr,sr=Q.getPxPosition(Ut,Ht);if("x"===We?(dr=Ht._offset+Ht._length/2,Pr="top"===Ht.side?sr-or:sr+or):(Pr=Ht._offset+Ht._length/2,dr="right"===Ht.side?sr+or:sr-or,yr={rotate:"-90",offset:0}),"multicategory"!==Ht.type){var Mr=Ht._selections[Ht._id+"tick"];if(Jr={selection:Mr,side:Ht.side},Mr&&Mr.node()&&Mr.node().parentNode){var Wr=l.getTranslate(Mr.node().parentNode);Jr.offsetLeft=Wr.x,Jr.offsetTop=Wr.y}Ht.title.hasOwnProperty("standoff")&&(Jr.pad=0)}return Ht._titleStandoff=or,e.draw(Ut,Ce+"title",{propContainer:Ht,propName:Ht._name+".title.text",placeholder:Se._dfltTitle[We],avoid:Jr,transform:yr,attributes:{x:dr,y:Pr,"text-anchor":"middle"}})}(Ut,Ht)}),vn.push(function(){var ir,Zr,yn,Kn,He=Ht.side.charAt(0),Dr=it[Ht.side].charAt(0),Ve=Q.getPxPosition(Ut,Ht),je=wn?Ht.ticklen:0;(Ht.automargin||Er||Ht._shiftPusher)&&("multicategory"===Ht.type?ir=Ar("tick2"):(ir=Ar(),"x"===yr&&"b"===He&&(Ht._depth=Math.max(ir.width>0?ir.bottom-Ve:0,je))));var ea=0,$n=0;if(Ht._shiftPusher&&(ea=Math.max(je,ir.height>0?"l"===He?Ve-ir.left:ir.right-Ve:0),Ht.title.text!==De._dfltTitle[yr]&&($n=(Ht._titleStandoff||0)+(Ht._titleScoot||0),"l"===He&&($n+=Ge(Ht))),Ht._fullDepth=Math.max(ea,$n)),Ht.automargin){Zr={x:0,y:0,r:0,l:0,t:0,b:0};var fa=[0,1],Ei="number"==typeof Ht._shift?Ht._shift:0;if("x"===yr){if("b"===He?Zr[He]=Ht._depth:(Zr[He]=Ht._depth=Math.max(ir.width>0?Ve-ir.top:0,je),fa.reverse()),ir.width>0){var qi=ir.right-(Ht._offset+Ht._length);qi>0&&(Zr.xr=1,Zr.r=qi);var to=Ht._offset-ir.left;to>0&&(Zr.xl=0,Zr.l=to)}}else if("l"===He?(Ht._depth=Math.max(ir.height>0?Ve-ir.left:0,je),Zr[He]=Ht._depth-Ei):(Ht._depth=Math.max(ir.height>0?ir.right-Ve:0,je),Zr[He]=Ht._depth+Ei,fa.reverse()),ir.height>0){var eo=ir.bottom-(Ht._offset+Ht._length);eo>0&&(Zr.yb=0,Zr.b=eo);var Fs=Ht._offset-ir.top;Fs>0&&(Zr.yt=1,Zr.t=Fs)}Zr[dr]="free"===Ht.anchor?Ht.position:Ht._anchorAxis.domain[fa[0]],Ht.title.text!==De._dfltTitle[yr]&&(Zr[He]+=Ge(Ht)+(Ht.title.standoff||0)),Ht.mirror&&"free"!==Ht.anchor&&((yn={x:0,y:0,r:0,l:0,t:0,b:0})[Dr]=Ht.linewidth,Ht.mirror&&!0!==Ht.mirror&&(yn[Dr]+=je),!0===Ht.mirror||"ticks"===Ht.mirror?yn[dr]=Ht._anchorAxis.domain[fa[1]]:("all"===Ht.mirror||"allticks"===Ht.mirror)&&(yn[dr]=[Ht._counterDomainMin,Ht._counterDomainMax][fa[1]]))}Er&&(Kn=P.getComponentMethod("rangeslider","autoMarginOpts")(Ut,Ht)),"string"==typeof Ht.automargin&&(pt(Zr,Ht.automargin),pt(yn,Ht.automargin)),i.autoMargin(Ut,rr(Ht),Zr),i.autoMargin(Ut,ce(Ht),yn),i.autoMargin(Ut,re(Ht),Kn)}),C.syncOrAsync(vn)}}function Ar(He){var Dr=sr+(He||"tick");return hr[Dr]||(hr[Dr]=function se(Ut,Ht){var Se,Ce,We,qe;return Ut._selections[Ht].size()?(Se=1/0,Ce=-1/0,We=1/0,qe=-1/0,Ut._selections[Ht].each(function(){var or=xr(this),_e=l.bBox(or.node().parentNode);Se=Math.min(Se,_e.top),Ce=Math.max(Ce,_e.bottom),We=Math.min(We,_e.left),qe=Math.max(qe,_e.right)})):(Se=0,Ce=0,We=0,qe=0),{top:Se,bottom:Ce,left:We,right:qe,height:Ce-Se,width:qe-We}}(Ht,Dr)),hr[Dr]}},Q.getTickSigns=function(Ut,Ht){var Se=Ut._id.charAt(0),We=Ut.side==={x:"top",y:"right"}[Se]?1:-1,qe=[-1,1,We,-We];return"inside"!==(Ht?(Ut.minor||{}).ticks:Ut.ticks)==("x"===Se)&&(qe=qe.map(function(_e){return-_e})),Ut.side&&qe.push({l:-1,t:-1,r:1,b:1}[Ut.side.charAt(0)]),qe},Q.makeTransTickFn=function(Ut){return"x"===Ut._id.charAt(0)?function(Ht){return u(Ut._offset+Ut.l2p(Ht.x),0)}:function(Ht){return u(0,Ut._offset+Ut.l2p(Ht.x))}},Q.makeTransTickLabelFn=function(Ut){var Ht=function Ke(Ut){var Ht=Ut.ticklabelposition||"",Se=function(Jr){return-1!==Ht.indexOf(Jr)},Ce=Se("top"),We=Se("left"),qe=Se("right"),or=Se("bottom"),_e=Se("inside"),De=or||We||Ce||qe;if(!De&&!_e)return[0,0];var sr=Ut.side,yr=De?(Ut.tickwidth||0)/2:0,dr=3,Pr=Ut.tickfont?Ut.tickfont.size:12;return(or||Ce)&&(yr+=Pr*J,dr+=(Ut.linewidth||0)/2),(We||qe)&&(yr+=(Ut.linewidth||0)/2,dr+=3),_e&&"top"===sr&&(dr-=Pr*(1-J)),(We||Ce)&&(yr=-yr),("bottom"===sr||"right"===sr)&&(dr=-dr),[De?yr:0,_e?dr:0]}(Ut),Se=Ht[0],Ce=Ht[1];return"x"===Ut._id.charAt(0)?function(We){return u(Se+Ut._offset+Ut.l2p(Be(We)),Ce)}:function(We){return u(Ce,Se+Ut._offset+Ut.l2p(Be(We)))}},Q.makeTickPath=function(Ut,Ht,Se,Ce){Ce||(Ce={});var We=Ce.minor;if(We&&!Ut.minor)return"";var qe=void 0!==Ce.len?Ce.len:We?Ut.minor.ticklen:Ut.ticklen,or=Ut._id.charAt(0),_e=(Ut.linewidth||1)/2;return"x"===or?"M0,"+(Ht+_e*Se)+"v"+qe*Se:"M"+(Ht+_e*Se)+",0h"+qe*Se},Q.makeLabelFns=function(Ut,Ht,Se){var Ce=Ut.ticklabelposition||"",We=function(Ln){return-1!==Ce.indexOf(Ln)},qe=We("top"),or=We("left"),_e=We("right"),sr=We("bottom")||or||qe||_e,yr=We("inside"),dr="inside"===Ce&&"inside"===Ut.ticks||!yr&&"outside"===Ut.ticks&&"boundaries"!==Ut.tickson,Pr=0,Jr=0,Mr=dr?Ut.ticklen:0;if(yr?Mr*=-1:sr&&(Mr=0),dr&&(Pr+=Mr,Se)){var Wr=C.deg2rad(Se);Pr=Mr*Math.cos(Wr)+1,Jr=Mr*Math.sin(Wr)}Ut.showticklabels&&(dr||Ut.showline)&&(Pr+=.2*Ut.tickfont.size);var Nr,Dn,hn,hr,dn,nn={labelStandoff:Pr+=(Ut.linewidth||1)/2*(yr?-1:1),labelShift:Jr},Ar=0,Br=Ut.side,Or=Ut._id.charAt(0),an=Ut.tickangle;if("x"===Or)hr=(dn=!yr&&"bottom"===Br||yr&&"top"===Br)?1:-1,yr&&(hr*=-1),Nr=Jr*hr,Dn=Ht+Pr*hr,hn=dn?1:-.2,90===Math.abs(an)&&(yr?hn+=H:hn=-90===an&&"bottom"===Br?J:90===an&&"top"===Br?H:.5,Ar=H/2*(an/90)),nn.xFn=function(Ln){return Ln.dx+Nr+Ar*Ln.fontSize},nn.yFn=function(Ln){return Ln.dy+Dn+Ln.fontSize*hn},nn.anchorFn=function(Ln,Qn){if(sr){if(or)return"end";if(_e)return"start"}return g(Qn)&&0!==Qn&&180!==Qn?Qn*hr<0!==yr?"end":"start":"middle"},nn.heightFn=function(Ln,Qn,Nn){return Qn<-60||Qn>60?-.5*Nn:"top"===Ut.side!==yr?-Nn:0};else if("y"===Or){if(hr=(dn=!yr&&"left"===Br||yr&&"right"===Br)?1:-1,yr&&(hr*=-1),Nr=Pr,Dn=Jr*hr,hn=0,!yr&&90===Math.abs(an)&&(hn=-90===an&&"left"===Br||90===an&&"right"===Br?J:.5),yr){var pn=g(an)?+an:0;if(0!==pn){var wn=C.deg2rad(pn);Ar=Math.abs(Math.sin(wn))*J*hr,hn=0}}nn.xFn=function(Ln){return Ln.dx+Ht-(Nr+Ln.fontSize*hn)*hr+Ar*Ln.fontSize},nn.yFn=function(Ln){return Ln.dy+Dn+Ln.fontSize*H},nn.anchorFn=function(Ln,Qn){return g(Qn)&&90===Math.abs(Qn)?"middle":dn?"end":"start"},nn.heightFn=function(Ln,Qn,Nn){return"right"===Ut.side&&(Qn*=-1),Qn<-30?-Nn:Qn<30?-.5*Nn:0}}return nn},Q.drawTicks=function(Ut,Ht,Se){Se=Se||{};var Ce=Ht._id+"tick",We=[].concat(Ht.minor&&Ht.minor.ticks?Se.vals.filter(function(or){return or.minor&&!or.noTick}):[]).concat(Ht.ticks?Se.vals.filter(function(or){return!or.minor&&!or.noTick}):[]),qe=Se.layer.selectAll("path."+Ce).data(We,xe);qe.exit().remove(),qe.enter().append("path").classed(Ce,1).classed("ticks",1).classed("crisp",!1!==Se.crisp).each(function(or){return r.stroke(A.select(this),or.minor?Ht.minor.tickcolor:Ht.tickcolor)}).style("stroke-width",function(or){return l.crispRound(Ut,or.minor?Ht.minor.tickwidth:Ht.tickwidth,1)+"px"}).attr("d",Se.path).style("display",null),ar(Ht,[O]),qe.attr("transform",Se.transFn)},Q.drawGrid=function(Ut,Ht,Se){if(Se=Se||{},"sync"!==Ht.tickmode){var Ce=Ht._id+"grid",We=Ht.minor&&Ht.minor.showgrid,qe=We?Se.vals.filter(function(Nr){return Nr.minor}):[],or=Ht.showgrid?Se.vals.filter(function(Nr){return!Nr.minor}):[],_e=Se.counterAxis;if(_e&&Q.shouldShowZeroLine(Ut,Ht,_e))for(var De="array"===Ht.tickmode,sr=0;sr<or.length;sr++){var yr=or[sr].x;if(De?!yr:Math.abs(yr)<Ht.dtick/100){if(or=or.slice(0,sr).concat(or.slice(sr+1)),!De)break;sr--}}Ht._gw=l.crispRound(Ut,Ht.gridwidth,1);for(var dr=We?l.crispRound(Ut,Ht.minor.gridwidth,1):0,Pr=Se.layer,Jr=Se.minorLayer,Mr=1;Mr>=0;Mr--){var Wr=Mr?Pr:Jr;if(Wr){var nn=Wr.selectAll("path."+Ce).data(Mr?or:qe,xe);nn.exit().remove(),nn.enter().append("path").classed(Ce,1).classed("crisp",!1!==Se.crisp),nn.attr("transform",Se.transFn).attr("d",Se.path).each(function(Nr){return r.stroke(A.select(this),Nr.minor?Ht.minor.gridcolor:Ht.gridcolor||"#ddd")}).style("stroke-dasharray",function(Nr){return l.dashStyle(Nr.minor?Ht.minor.griddash:Ht.griddash,Nr.minor?Ht.minor.gridwidth:Ht.gridwidth)}).style("stroke-width",function(Nr){return(Nr.minor?dr:Ht._gw)+"px"}).style("display",null),"function"==typeof Se.path&&nn.attr("d",Se.path)}}ar(Ht,[N,k])}},Q.drawZeroLine=function(Ut,Ht,Se){var Ce=Ht._id+"zl",We=Q.shouldShowZeroLine(Ut,Ht,(Se=Se||Se).counterAxis),qe=Se.layer.selectAll("path."+Ce).data(We?[{x:0,id:Ht._id}]:[]);qe.exit().remove(),qe.enter().append("path").classed(Ce,1).classed("zl",1).classed("crisp",!1!==Se.crisp).each(function(){Se.layer.selectAll("path").sort(function(or,_e){return G(or.id,_e.id)})}),qe.attr("transform",Se.transFn).attr("d",Se.path).call(r.stroke,Ht.zerolinecolor||r.defaultLine).style("stroke-width",l.crispRound(Ut,Ht.zerolinewidth,Ht._gw||1)+"px").style("display",null),ar(Ht,[D])},Q.drawLabels=function(Ut,Ht,Se){Se=Se||{};var Ce=Ut._fullLayout,We=Ht._id,qe=We.charAt(0),or=Se.cls||We+"tick",_e=Se.vals.filter(function(Nn){return Nn.text}),De=Se.labelFns,sr=Se.secondary?0:Ht.tickangle,yr=(Ht._prevTickAngles||{})[or],dr=Se.layer.selectAll("g."+or).data(Ht.showticklabels?_e:[],xe),Pr=[];function Jr(Nn,Zn){Nn.each(function(Bn){var Wn=A.select(this),wr=Wn.select(".text-math-group"),en=De.anchorFn(Bn,Zn),tn=Se.transFn.call(Wn.node(),Bn)+(g(Zn)&&0!=+Zn?" rotate("+Zn+","+De.xFn(Bn)+","+(De.yFn(Bn)-Bn.fontSize/2)+")":""),gn=y.lineCount(Wn),Fn=nt*Bn.fontSize,Tn=De.heightFn(Bn,g(Zn)?+Zn:0,(gn-1)*Fn);if(Tn&&(tn+=u(0,Tn)),wr.empty()){var Mn=Wn.select("text");Mn.attr({transform:tn,"text-anchor":en}),Mn.style("opacity",1),Ht._adjustTickLabelsOverflow&&Ht._adjustTickLabelsOverflow()}else{var In=l.bBox(wr.node()).width;wr.attr("transform",tn+u(In*{end:-.5,start:.5}[en],0))}})}dr.enter().append("g").classed(or,1).append("text").attr("text-anchor","middle").each(function(Nn){var Zn=A.select(this),Bn=Ut._promises.length;Zn.call(y.positionText,De.xFn(Nn),De.yFn(Nn)).call(l.font,Nn.font,Nn.fontSize,Nn.fontColor).text(Nn.text).call(y.convertToTspans,Ut),Ut._promises[Bn]?Pr.push(Ut._promises.pop().then(function(){Jr(Zn,sr)})):Jr(Zn,sr)}),ar(Ht,[B]),dr.exit().remove(),Se.repositionOnUpdate&&dr.each(function(Nn){A.select(this).select("text").call(y.positionText,De.xFn(Nn),De.yFn(Nn))}),Ht._adjustTickLabelsOverflow=function(){var Nn=Ht.ticklabeloverflow;if(Nn&&"allow"!==Nn){var Zn=-1!==Nn.indexOf("hide"),Bn="x"===Ht._id.charAt(0),Wn=0,wr=Bn?Ut._fullLayout.width:Ut._fullLayout.height;if(-1!==Nn.indexOf("domain")){var en=C.simpleMap(Ht.range,Ht.r2l);Wn=Ht.l2p(en[0])+Ht._offset,wr=Ht.l2p(en[1])+Ht._offset}var tn=Math.min(Wn,wr),gn=Math.max(Wn,wr),Fn=Ht.side,Tn=1/0,Mn=-1/0;for(var In in dr.each(function(ka){var Ze=A.select(this);if(Ze.select(".text-math-group").empty()){var _r=l.bBox(Ze.node()),fn=0;Bn?(_r.right>gn||_r.left<tn)&&(fn=1):(_r.bottom>gn||_r.top+(Ht.tickangle?0:ka.fontSize/4)<tn)&&(fn=1);var sn=Ze.select("text");fn?Zn&&sn.style("opacity",0):(sn.style("opacity",1),Tn="bottom"===Fn||"right"===Fn?Math.min(Tn,Bn?_r.top:_r.left):-1/0,Mn="top"===Fn||"left"===Fn?Math.max(Mn,Bn?_r.bottom:_r.right):1/0)}}),Ce._plots){var Gn=Ce._plots[In];if(Ht._id===Gn.xaxis._id||Ht._id===Gn.yaxis._id){var ua=Bn?Gn.yaxis:Gn.xaxis;ua&&(ua["_visibleLabelMin_"+Ht._id]=Tn,ua["_visibleLabelMax_"+Ht._id]=Mn)}}}},Ht._hideCounterAxisInsideTickLabels=function(Nn){var Zn="x"===Ht._id.charAt(0),Bn=[];for(var Wn in Ce._plots){var wr=Ce._plots[Wn];Ht._id!==wr.xaxis._id&&Ht._id!==wr.yaxis._id||Bn.push(Zn?wr.yaxis:wr.xaxis)}Bn.forEach(function(en,tn){en&&Xe(en)&&(Nn||[D,k,N,O,B]).forEach(function(gn){var Fn="tick"===gn.K&&"text"===gn.L&&"period"===Ht.ticklabelmode,Tn=Ce._plots[Ht._mainSubplot];(gn.K===D.K?Tn.zerolinelayer.selectAll("."+Ht._id+"zl"):gn.K===k.K?Tn.minorGridlayer.selectAll("."+Ht._id):gn.K===N.K?Tn.gridlayer.selectAll("."+Ht._id):Tn[Ht._id.charAt(0)+"axislayer"]).each(function(){var In=A.select(this);gn.L&&(In=In.selectAll(gn.L)),In.each(function(Gn){var ua=Ht.l2p(Fn?Be(Gn):Gn.x)+Ht._offset,ka=A.select(this);ua<Ht["_visibleLabelMax_"+en._id]&&ua>Ht["_visibleLabelMin_"+en._id]?ka.style("display","none"):"tick"===gn.K&&!tn&&ka.style("display",null)})})})})},Jr(dr,yr+1?yr:sr);var Wr=null;Ht._selections&&(Ht._selections[or]=dr);var Nr=[function Mr(){return Pr.length&&Promise.all(Pr)}];Ht.automargin&&Ce._redrawFromAutoMarginCount&&90===yr?(Wr=90,Nr.push(function(){Jr(dr,yr)})):Nr.push(function nn(){if(Jr(dr,sr),_e.length&&"x"===qe&&!g(sr)&&("log"!==Ht.type||"D"!==String(Ht.dtick).charAt(0))){Wr=0;var Bn,Nn=0,Zn=[];if(dr.each(function(_r){Nn=Math.max(Nn,_r.fontSize);var fn=Ht.l2p(_r.x),sn=xr(this),En=l.bBox(sn.node());Zn.push({top:0,bottom:10,height:10,left:fn-En.width/2,right:fn+En.width/2+2,width:En.width+2})}),"boundaries"!==Ht.tickson&&!Ht.showdividers||Se.secondary){var tn=_e.length,gn=Math.abs((_e[tn-1].x-_e[0].x)*Ht._m)/(tn-1),Fn=Ht.ticklabelposition||"",Tn=function(_r){return-1!==Fn.indexOf(_r)},Mn=Tn("top"),In=Tn("left"),Gn=Tn("right"),Ze=Tn("bottom")||In||Mn||Gn?(Ht.tickwidth||0)+6:0,Tr=gn<2.5*Nn||"multicategory"===Ht.type||"realaxis"===Ht._name;for(Bn=0;Bn<Zn.length-1;Bn++)if(C.bBoxIntersect(Zn[Bn],Zn[Bn+1],Ze)){Wr=Tr?90:30;break}}else{var Wn=2;for(Ht.ticks&&(Wn+=Ht.tickwidth/2),Bn=0;Bn<Zn.length;Bn++){var wr=_e[Bn].xbnd,en=Zn[Bn];if(null!==wr[0]&&en.left-Ht.l2p(wr[0])<Wn||null!==wr[1]&&Ht.l2p(wr[1])-en.right<Wn){Wr=90;break}}}Wr&&Jr(dr,Wr)}}),Ht._tickAngles&&Nr.push(function(){Ht._tickAngles[or]=null===Wr?g(sr)?sr:0:Wr});var Dn=function(){var Nn=0,Zn=0;return dr.each(function(Bn,Wn){var tn,wr=xr(this);wr.select(".text-math-group").empty()&&(Ht._vals[Wn]&&(tn=Ht._vals[Wn].bb||l.bBox(wr.node()),Ht._vals[Wn].bb=tn),Nn=Math.max(Nn,tn.width),Zn=Math.max(Zn,tn.height))}),{labelsMaxW:Nn,labelsMaxH:Zn}},hn=Ht._anchorAxis;if(hn&&(hn.autorange||hn.insiderange)&&Xe(Ht)&&!K(Ce,Ht._id)&&(Ce._insideTickLabelsUpdaterange||(Ce._insideTickLabelsUpdaterange={}),hn.autorange&&(Ce._insideTickLabelsUpdaterange[hn._name+".autorange"]=hn.autorange,Nr.push(Dn)),hn.insiderange)){var hr=Dn(),Ar="y"===Ht._id.charAt(0)?hr.labelsMaxW:hr.labelsMaxH;Ar+=6,"inside"===Ht.ticklabelposition&&(Ar+=Ht.ticklen||0);var Br="right"===Ht.side||"top"===Ht.side?1:-1,Or=1===Br?1:0,an=1===Br?0:1,dn=[];dn[an]=hn.range[an];var pn=hn.d2p(hn.range[Or]),wn=hn.d2p(hn.range[an]),Ln=Math.abs(wn-pn);Ln-Ar>0?Ar*=1+Ar/(Ln-=Ar):Ar=0,"y"!==Ht._id.charAt(0)&&(Ar=-Ar),dn[Or]=hn.p2d(hn.d2p(hn.range[Or])+Br*Ar),"min"===hn.autorange||"max reversed"===hn.autorange?(dn[0]=null,hn._rangeInitial0=void 0,hn._rangeInitial1=void 0):("max"===hn.autorange||"min reversed"===hn.autorange)&&(dn[1]=null,hn._rangeInitial0=void 0,hn._rangeInitial1=void 0),Ce._insideTickLabelsUpdaterange[hn._name+".range"]=dn}var Qn=C.syncOrAsync(Nr);return Qn&&Qn.then&&Ut._promises.push(Qn),Qn},Q.getPxPosition=function(Ut,Ht){var qe,Se=Ut._fullLayout._size,Ce=Ht._id.charAt(0),We=Ht.side;return"free"!==Ht.anchor?qe=Ht._anchorAxis:"x"===Ce?qe={_offset:Se.t+(1-(Ht.position||0))*Se.h,_length:0}:"y"===Ce&&(qe={_offset:Se.l+(Ht.position||0)*Se.w+Ht._shift,_length:0}),"top"===We||"left"===We?qe._offset:"bottom"===We||"right"===We?qe._offset+qe._length:void 0},Q.shouldShowZeroLine=function(Ut,Ht,Se){var Ce=C.simpleMap(Ht.range,Ht.r2l);return Ce[0]*Ce[1]<=0&&Ht.zeroline&&("linear"===Ht.type||"-"===Ht.type)&&!(Ht.rangebreaks&&Ht.maskBreaks(0)===F)&&(ue(Ht,0)||!function Ne(Ut,Ht,Se,Ce){var We=Se._mainAxis;if(We){var qe=Ut._fullLayout,or=Ht._id.charAt(0),_e=Q.counterLetter(Ht._id),De=Ht._offset+(Math.abs(Ce[0])<Math.abs(Ce[1])==("x"===or)?0:Ht._length),yr=qe._plots[Se._mainSubplot];if(!(yr.mainplotinfo||yr).overlays.length)return sr(Se);for(var dr=Q.list(Ut,_e),Pr=0;Pr<dr.length;Pr++){var Jr=dr[Pr];if(Jr._mainAxis===We&&sr(Jr))return!0}}function sr(Mr){if(!Mr.showline||!Mr.linewidth)return!1;var Wr=Math.max((Mr.linewidth+Ht.zerolinewidth)/2,1);function nn(hn){return"number"==typeof hn&&Math.abs(hn-De)<Wr}if(nn(Mr._mainLinePosition)||nn(Mr._mainMirrorPosition))return!0;var Nr=Mr._linepositions||{};for(var Dn in Nr)if(nn(Nr[Dn][0])||nn(Nr[Dn][1]))return!0}}(Ut,Ht,Se,Ce)||function Ye(Ut,Ht){for(var Se=Ut._fullData,Ce=Ht._mainSubplot,We=Ht._id.charAt(0),qe=0;qe<Se.length;qe++){var or=Se[qe];if(!0===or.visible&&or.xaxis+or.yaxis===Ce&&(P.traceIs(or,"bar-like")&&or.orientation==={x:"h",y:"v"}[We]||or.fill&&or.fill.charAt(or.fill.length-1)===We))return!0}return!1}(Ut,Ht))},Q.clipEnds=function(Ut,Ht){return Ht.filter(function(Se){return ue(Ut,Se.x)})},Q.allowAutoMargin=function(Ut){for(var Ht=Q.list(Ut,"",!0),Se=0;Se<Ht.length;Se++){var Ce=Ht[Se];Ce.automargin&&(i.allowAutoMargin(Ut,rr(Ce)),Ce.mirror&&i.allowAutoMargin(Ut,ce(Ce))),P.getComponentMethod("rangeslider","isVisible")(Ce)&&i.allowAutoMargin(Ut,re(Ce))}},Q.swap=function(Ut,Ht){for(var Se=function ve(Ut,Ht){var Ce,We,Se=[];for(Ce=0;Ce<Ht.length;Ce++){var qe=[],or=Ut._fullData[Ht[Ce]].xaxis,_e=Ut._fullData[Ht[Ce]].yaxis;if(or&&_e){for(We=0;We<Se.length;We++)(-1!==Se[We].x.indexOf(or)||-1!==Se[We].y.indexOf(_e))&&qe.push(We);if(!qe.length){Se.push({x:[or],y:[_e]});continue}var sr,De=Se[qe[0]];if(qe.length>1)for(We=1;We<qe.length;We++)be(De.x,(sr=Se[qe[We]]).x),be(De.y,sr.y);be(De.x,[or]),be(De.y,[_e])}}return Se}(Ut,Ht),Ce=0;Ce<Se.length;Ce++)Ae(Ut,Se[Ce].x,Se[Ce].y)}},4322:function(q,W,t){"use strict";var A=t(92770),g=t(71828),i=t(50606).BADNUM,P=g.isArrayOrTypedArray,C=g.isDateTime,u=g.cleanNumber,y=Math.round;function e(f,m){return m?A(f):"number"==typeof f}function a(f){return Math.max(1,(f-1)/1e3)}q.exports=function(m,h,w){var p=m,o=w.noMultiCategory;if(P(p)&&!p.length)return"-";if(!o&&function c(f){return P(f[0])&&P(f[1])}(p))return"multicategory";if(o&&Array.isArray(p[0])){for(var v=[],M=0;M<p.length;M++)if(P(p[M]))for(var b=0;b<p[M].length;b++)v.push(p[M][b]);p=v}if(function l(f,m){for(var h=f.length,w=a(h),p=0,o=0,v={},M=0;M<h;M+=w){var L=f[y(M)],x=String(L);v[x]||(v[x]=1,C(L,m)&&p++,A(L)&&o++)}return p>2*o}(p,h))return"date";var L="strict"!==w.autotypenumbers;return function s(f,m){for(var h=f.length,w=a(h),p=0,o=0,v={},M=0;M<h;M+=w){var L=f[y(M)],x=String(L);if(!v[x]){v[x]=1;var S=typeof L;"boolean"===S?o++:(m?u(L)!==i:"number"===S)?p++:"string"===S&&o++}}return o>2*p}(p,L)?"category":function r(f,m){for(var h=f.length,w=0;w<h;w++)if(e(f[w],m))return!0;return!1}(p,L)?"linear":"-"}},71453:function(q,W,t){"use strict";var A=t(92770),g=t(73972),i=t(71828),P=t(44467),C=t(85501),u=t(13838),y=t(26218),e=t(38701),r=t(96115),l=t(89426),a=t(15258),s=t(92128),c=t(23608),f=t(21994),m=t(85555).WEEKDAY_PATTERN,h=t(85555).HOUR_PATTERN;function w(v,M,b){function L(N,k){return i.coerce(v,M,u.rangebreaks,N,k)}if(L("enabled")){var S=L("bounds");if(S&&S.length>=2){var n,E,T="";if(2===S.length)for(n=0;n<2;n++)if(E=o(S[n])){T=m;break}var d=L("pattern",T);if(d===m)for(n=0;n<2;n++)(E=o(S[n]))&&(M.bounds[n]=S[n]=E-1);if(d)for(n=0;n<2;n++)switch(E=S[n],d){case m:if(!A(E))return void(M.enabled=!1);if((E=+E)!==Math.floor(E)||E<0||E>=7)return void(M.enabled=!1);M.bounds[n]=S[n]=E;break;case h:if(!A(E))return void(M.enabled=!1);if((E=+E)<0||E>24)return void(M.enabled=!1);M.bounds[n]=S[n]=E}if(!1===b.autorange){var F=b.range;if(F[0]<F[1]){if(S[0]<F[0]&&S[1]>F[1])return void(M.enabled=!1)}else if(S[0]>F[0]&&S[1]<F[1])return void(M.enabled=!1)}}else{var D=L("values");if(!D||!D.length)return void(M.enabled=!1);L("dvalue")}}}q.exports=function(M,b,L,x,S){var N,T=x.letter,n=x.font||{},E=x.splomStash||{},d=L("visible",!x.visibleDflt),D=b.type||(b._template||{}).type||"-";"date"===D&&(g.getComponentMethod("calendars","handleDefaults")(M,b,"calendar",x.calendar),x.noTicklabelmode||(N=L("ticklabelmode")));var O="";(!x.noTicklabelposition||"multicategory"===D)&&(O=i.coerce(M,b,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===N?["outside","inside"]:"x"===T?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),x.noTicklabeloverflow||L("ticklabeloverflow",-1!==O.indexOf("inside")?"hide past domain":"category"===D||"multicategory"===D?"allow":"hide past div"),f(b,S),c(M,b,L,x),a(M,b,L,x),"category"!==D&&!x.noHover&&L("hoverformat");var B=L("color"),z=B!==u.color.dflt?B:n.color,U=E.label||S._dfltTitle[T];if(l(M,b,L,D,x),!d)return b;L("title.text",U),i.coerceFont(L,"title.font",{family:n.family,size:i.bigFont(n.size),color:z}),y(M,b,L,D);var H=x.hasMinor;if(H&&(P.newContainer(b,"minor"),y(M,b,L,D,{isMinor:!0})),r(M,b,L,D,x),e(M,b,L,x),H){var J=x.isMinor;x.isMinor=!0,e(M,b,L,x),x.isMinor=J}s(M,b,L,{dfltColor:B,bgColor:x.bgColor,showGrid:x.showGrid,hasMinor:H,attributes:u}),H&&!b.minor.ticks&&!b.minor.showgrid&&delete b.minor,(b.showline||b.ticks)&&L("mirror");var it,nt="multicategory"===D;if(x.noTickson||"category"!==D&&!nt||!b.ticks&&!b.showgrid||(nt&&(it="boundaries"),"boundaries"===L("tickson",it)&&delete b.ticklabelposition),nt&&L("showdividers")&&(L("dividercolor"),L("dividerwidth")),"date"===D)if(C(M,b,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:w}),b.rangebreaks.length){for(var j=0;j<b.rangebreaks.length;j++)if(b.rangebreaks[j].pattern===m){b._hasDayOfWeekBreaks=!0;break}if(f(b,S),S._has("scattergl")||S._has("splom"))for(var Z=0;Z<x.data.length;Z++){var G=x.data[Z];("scattergl"===G.type||"splom"===G.type)&&(G.visible=!1,i.warn(G.type+" traces do not work on axes with rangebreaks. Setting trace "+G.index+" to `visible: false`."))}}else delete b.rangebreaks;return b};var p={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function o(v){if("string"==typeof v)return p[v.substr(0,3).toLowerCase()]}},12663:function(q,W,t){"use strict";var A=t(31562),g=A.FORMAT_LINK,i=A.DATE_FORMAT_LINK;function C(y,e){return["Sets the "+y+" formatting rule"+(e?"for `"+e+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+g+"."].join(" ")}function u(y,e){return C(y,e)+[" And for dates see: "+i+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}q.exports={axisHoverFormat:function P(y,e){return{valType:"string",dflt:"",editType:"none",description:(e?C:u)("hover text",y)+["By default the values are formatted using "+(e?"generic number format":"`"+y+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:C,descriptionWithDates:u}},41675:function(q,W,t){"use strict";var A=t(73972),g=t(85555);function i(P,C){if(C&&C.length)for(var u=0;u<C.length;u++)if(C[u][P])return!0;return!1}W.id2name=function(C){if("string"==typeof C&&C.match(g.AX_ID_PATTERN)){var u=C.split(" ")[0].substr(1);return"1"===u&&(u=""),C.charAt(0)+"axis"+u}},W.name2id=function(C){if(C.match(g.AX_NAME_PATTERN)){var u=C.substr(5);return"1"===u&&(u=""),C.charAt(0)+u}},W.cleanId=function(C,u,y){var e=/( domain)$/.test(C);if("string"==typeof C&&C.match(g.AX_ID_PATTERN)&&(!u||C.charAt(0)===u)&&(!e||y)){var r=C.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===r&&(r=""),C.charAt(0)+r+(e&&y?" domain":"")}},W.list=function(P,C,u){var y=P._fullLayout;if(!y)return[];var l,e=W.listIds(P,C),r=new Array(e.length);for(l=0;l<e.length;l++){var a=e[l];r[l]=y[a.charAt(0)+"axis"+a.substr(1)]}if(!u){var s=y._subplots.gl3d||[];for(l=0;l<s.length;l++){var c=y[s[l]];C?r.push(c[C+"axis"]):r.push(c.xaxis,c.yaxis,c.zaxis)}}return r},W.listIds=function(P,C){var u=P._fullLayout;if(!u)return[];var y=u._subplots;return C?y[C+"axis"]:y.xaxis.concat(y.yaxis)},W.getFromId=function(P,C,u){var y=P._fullLayout;return C=void 0===C||"string"!=typeof C?C:C.replace(" domain",""),"x"===u?C=C.replace(/y[0-9]*/,""):"y"===u&&(C=C.replace(/x[0-9]*/,"")),y[W.id2name(C)]},W.getFromTrace=function(P,C,u){var y=P._fullLayout,e=null;if(A.traceIs(C,"gl3d")){var r=C.scene;"scene"===r.substr(0,5)&&(e=y[r][u+"axis"])}else e=W.getFromId(P,C[u+"axis"]||u);return e},W.idSort=function(P,C){var u=P.charAt(0),y=C.charAt(0);return u!==y?u>y?1:-1:+(P.substr(1)||1)-+(C.substr(1)||1)},W.ref2id=function(P){return!!/^[xyz]/.test(P)&&P.split(" ")[0]},W.isLinked=function(P,C){return i(C,P._axisMatchGroups)||i(C,P._axisConstraintGroups)}},15258:function(q){"use strict";q.exports=function(A,g,i,P){if("category"===g.type){var y,C=A.categoryarray,u=Array.isArray(C)&&C.length>0;u&&(y="array");var r,e=i("categoryorder",y);"array"===e&&(r=i("categoryarray")),!u&&"array"===e&&(e=g.categoryorder="trace"),"trace"===e?g._initialCategories=[]:"array"===e?g._initialCategories=r.slice():(r=function W(t,A){var P,C,u,g=A.dataAttr||t._id.charAt(0),i={};if(A.axData)P=A.axData;else for(P=[],C=0;C<A.data.length;C++){var y=A.data[C];y[g+"axis"]===t._id&&P.push(y)}for(C=0;C<P.length;C++){var e=P[C][g];for(u=0;u<e.length;u++){var r=e[u];null!=r&&(i[r]=1)}}return Object.keys(i)}(g,P).sort(),"category ascending"===e?g._initialCategories=r:"category descending"===e&&(g._initialCategories=r.reverse()))}}},66287:function(q,W,t){"use strict";var A=t(92770),g=t(71828),i=t(50606),P=i.ONEDAY,C=i.ONEWEEK;W.dtick=function(u,y){var e="log"===y,r="date"===y,l="category"===y,a=r?P:1;if(!u)return a;if(A(u))return(u=Number(u))<=0?a:l?Math.max(1,Math.round(u)):r?Math.max(.1,u):u;if("string"!=typeof u||!r&&!e)return a;var s=u.charAt(0),c=u.substr(1);return(c=A(c)?Number(c):0)<=0||!(r&&"M"===s&&c===Math.round(c)||e&&"L"===s||e&&"D"===s&&(1===c||2===c))?a:u},W.tick0=function(u,y,e,r){return"date"===y?g.cleanDate(u,g.dateTick0(e,r%C==0?1:0)):"D1"!==r&&"D2"!==r?A(u)?Number(u):0:void 0}},85555:function(q,W,t){"use strict";var A=t(30587).counter;q.exports={idRegex:{x:A("x","( domain)?"),y:A("y","( domain)?")},attrRegex:A("[xy]axis"),xAxisMatch:A("xaxis"),yAxisMatch:A("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},99082:function(q,W,t){"use strict";var A=t(71828),g=t(71739),i=t(41675).id2name,P=t(13838),C=t(42449),u=t(21994),y=t(50606).ALMOST_EQUAL,e=t(18783).FROM_BL;function r(h,w,p){var o=p.axIds,v=p.layoutOut,M=p.hasImage,b=v._axisConstraintGroups,L=v._axisMatchGroups,x=w._id,S=x.charAt(0),T=((v._splomAxes||{})[S]||{})[x]||{},n=w._id,E="x"===n.charAt(0);function d(j,Z){return A.coerce(h,w,P,j,Z)}w._matchGroup=null,w._constraintGroup=null,d("constrain",M?"domain":"range"),A.coerce(h,w,{constraintoward:{valType:"enumerated",values:E?["left","center","right"]:["bottom","middle","top"],dflt:E?"center":"middle"}},"constraintoward");var D,N,F=w.type,k=[];for(D=0;D<o.length;D++)(N=o[D])!==n&&v[i(N)].type===F&&k.push(N);var B=a(b,n);if(B){var z=[];for(D=0;D<k.length;D++)B[N=k[D]]||z.push(N);k=z}var H,J,U=k.length;U&&(h.matches||T.matches)&&(H=A.coerce(h,w,{matches:{valType:"enumerated",values:k,dflt:-1!==k.indexOf(T.matches)?T.matches:void 0}},"matches"));var nt=M&&!E?w.anchor:void 0;if(U&&!H&&(h.scaleanchor||nt)&&(J=A.coerce(h,w,{scaleanchor:{valType:"enumerated",values:k.concat([!1])}},"scaleanchor",nt)),H){w._matchGroup=s(L,n,H,1);var it=v[i(H)],ut=l(v,w)/l(v,it);E!==("x"===H.charAt(0))&&(ut=(E?"x":"y")+ut),s(b,n,H,ut)}else h.matches&&-1!==o.indexOf(h.matches)&&A.warn("ignored "+w._name+'.matches: "'+h.matches+'" to avoid an infinite loop');if(J){var Q=d("scaleratio");Q||(Q=w.scaleratio=1),s(b,n,J,Q)}else h.scaleanchor&&-1!==o.indexOf(h.scaleanchor)&&A.warn("ignored "+w._name+'.scaleanchor: "'+h.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function l(h,w){var p=w.domain;return p||(p=h[i(w.overlaying)].domain),p[1]-p[0]}function a(h,w){for(var p=0;p<h.length;p++)if(h[p][w])return h[p];return null}function s(h,w,p,o){var v,M,b,L,x,S=a(h,w);null===S?((S={})[w]=1,x=h.length,h.push(S)):x=h.indexOf(S);var T=Object.keys(S);for(v=0;v<h.length;v++)if(b=h[v],v!==x&&b[p]){var n=b[p];for(M=0;M<T.length;M++)b[L=T[M]]=c(n,c(o,S[L]));return void h.splice(x,1)}if(1!==o)for(M=0;M<T.length;M++){var E=T[M];S[E]=c(o,S[E])}S[p]=1}function c(h,w){var v,M,p="",o="";"string"==typeof h&&(p=h.match(/^[xy]*/)[0],h=+h.substr(v=p.length)),"string"==typeof w&&(o=w.match(/^[xy]*/)[0],w=+w.substr(M=o.length));var b=h*w;return v||M?v&&M&&p.charAt(0)!==o.charAt(0)?v===M?b:(v>M?p.substr(M):o.substr(v))+b:p+o+h*w:b}function f(h,w){for(var p=w._size,o=p.h/p.w,v={},M=Object.keys(h),b=0;b<M.length;b++){var L=M[b],x=h[L];if("string"==typeof x){var S=x.match(/^[xy]*/)[0],T=S.length;x=+x.substr(T);for(var n="y"===S.charAt(0)?o:1/o,E=0;E<T;E++)x*=n}v[L]=x}return v}function m(h,w){var p=h._inputDomain,v=p[0]+(p[1]-p[0])*e[h.constraintoward];h.domain=h._input.domain=[v+(p[0]-v)/w,v+(p[1]-v)/w],h.setScale()}W.handleDefaults=function(h,w,p){var L,x,S,T,n,E,d,F,o=p.axIds,v=p.axHasImage,M=w._axisConstraintGroups=[],b=w._axisMatchGroups=[];for(L=0;L<o.length;L++)r(n=h[T=i(o[L])],E=w[T],{axIds:o,layoutOut:w,hasImage:v[T]});function D(nt,it){for(L=0;L<nt.length;L++)for(S in x=nt[L])w[i(S)][it]=x}for(D(b,"_matchGroup"),L=0;L<M.length;L++)for(S in x=M[L])if((E=w[i(S)]).fixedrange){for(var N in x){var k=i(N);!1===(h[k]||{}).fixedrange&&A.warn("fixedrange was specified as false for axis "+k+" but was overridden because another axis in its constraint group has fixedrange true"),w[k].fixedrange=!0}break}for(L=0;L<M.length;){for(S in x=M[L]){(E=w[i(S)])._matchGroup&&Object.keys(E._matchGroup).length===Object.keys(x).length&&(M.splice(L,1),L--);break}L++}D(M,"_constraintGroup");var O=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],B=!1,z=!1;function U(){F=E[d],"rangebreaks"===d&&(z=E._hasDayOfWeekBreaks)}for(L=0;L<b.length;L++){x=b[L];for(var H=0;H<O.length;H++){var J;for(S in d=O[H],F=null,x)if(n=h[T=i(S)],d in(E=w[T])){if(!E.matches&&(J=E,d in n)){U();break}null===F&&d in n&&U()}if("range"===d&&F&&n.range&&2===n.range.length&&null!==n.range[0]&&null!==n.range[1]&&(B=!0),"autorange"===d&&null===F&&B&&(F=!1),null===F&&d in J&&(F=J[d]),null!==F)for(S in x)(E=w[i(S)])[d]="range"===d?F.slice():F,"rangebreaks"===d&&(E._hasDayOfWeekBreaks=z,u(E,w))}}},W.enforce=function(w){var v,M,b,L,x,S,T,n,p=w._fullLayout,o=p._axisConstraintGroups||[];for(v=0;v<o.length;v++){b=f(o[v],p);var E=Object.keys(b),d=1/0,F=0,D=1/0,N={},k={},O=!1;for(M=0;M<E.length;M++)k[L=E[M]]=x=p[i(L)],x._inputDomain?x.domain=x._inputDomain.slice():x._inputDomain=x.domain.slice(),x._inputRange||(x._inputRange=x.range.slice()),x.setScale(),N[L]=S=Math.abs(x._m)/b[L],d=Math.min(d,S),("domain"===x.constrain||!x._constraintShrinkable)&&(D=Math.min(D,S)),delete x._constraintShrinkable,F=Math.max(F,S),"domain"===x.constrain&&(O=!0);if(!(d>y*F)||O)for(M=0;M<E.length;M++)if(T=(x=k[L=E[M]]).constrain,(S=N[L])!==D||"domain"===T)if(n=S/D,"range"===T)C(x,n);else{var B=x._inputDomain,z=(x.domain[1]-x.domain[0])/(B[1]-B[0]),U=(x.r2l(x.range[1])-x.r2l(x.range[0]))/(x.r2l(x._inputRange[1])-x.r2l(x._inputRange[0]));if((n/=z)*U<1){x.domain=x._input.domain=B.slice(),C(x,n);continue}if(U<1&&(x.range=x._input.range=x._inputRange.slice(),n*=U),x.autorange){var H=x.r2l(x.range[0]),J=x.r2l(x.range[1]),nt=(H+J)/2,it=nt,ut=nt,Q=Math.abs(J-nt),j=nt-Q*n*1.0001,Z=nt+Q*n*1.0001,G=g.makePadFn(p,x,0),K=g.makePadFn(p,x,1);m(x,n);var et,st,at=Math.abs(x._m),$=g.concatExtremes(w,x),X=$.min,rt=$.max;for(st=0;st<X.length;st++)(et=X[st].val-G(X[st])/at)>j&&et<it&&(it=et);for(st=0;st<rt.length;st++)(et=rt[st].val+K(rt[st])/at)<Z&&et>ut&&(ut=et);n/=(ut-it)/(2*Q),it=x.l2r(it),ut=x.l2r(ut),x.range=x._input.range=H<J?[it,ut]:[ut,it]}m(x,n)}}},W.getAxisGroup=function(w,p){for(var o=w._axisMatchGroups,v=0;v<o.length;v++)if(o[v][p])return"g"+v;return p},W.clean=function(w,p){if(p._inputDomain){for(var o=!1,v=p._id,M=w._fullLayout._axisConstraintGroups,b=0;b<M.length;b++)if(M[b][v]){o=!0;break}(!o||"domain"!==p.constrain)&&(p._input.domain=p.domain=p._inputDomain,delete p._inputDomain)}}},29323:function(q,W,t){"use strict";var A=t(39898),g=t(71828),i=g.numberFormat,P=t(84267),C=t(38520),u=t(73972),y=g.strTranslate,e=t(63893),r=t(7901),l=t(91424),a=t(30211),s=t(89298),c=t(6964),f=t(28569),m=t(64505),h=m.selectingOrDrawing,w=m.freeMode,p=t(18783).FROM_TL,o=t(33306),v=t(61549).redrawReglTraces,M=t(74875),b=t(41675).getFromId,L=t(47322).prepSelect,x=t(47322).clearOutline,S=t(47322).selectOnClick,T=t(42449),n=t(85555),E=n.MINDRAG,d=n.MINZOOM,F=!0;function N(et,st,dt,bt){var gt=g.ensureSingle(et.draglayer,st,dt,function(Lt){Lt.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",et.id)});return gt.call(c,bt),gt.node()}function k(et,st,dt,bt,gt,Lt,It){var Mt=N(et,"rect",st,dt);return A.select(Mt).call(l.setRect,bt,gt,Lt,It),Mt}function O(et,st){for(var dt=0;dt<et.length;dt++)if(!et[dt].fixedrange)return st;return""}function z(et,st,dt,bt,gt){for(var Lt=0;Lt<et.length;Lt++){var It=et[Lt];if(!It.fixedrange)if(It.rangebreaks){var Mt="y"===It._id.charAt(0),At=Mt?1-dt:dt;bt[It._name+".range[0]"]=It.l2r(It.p2l((Mt?1-st:st)*It._length)),bt[It._name+".range[1]"]=It.l2r(It.p2l(At*It._length))}else{var Gt=It._rl[0],Wt=It._rl[1]-Gt;bt[It._name+".range[0]"]=It.l2r(Gt+Wt*st),bt[It._name+".range[1]"]=It.l2r(Gt+Wt*dt)}}if(gt&&gt.length){var Pt=(st+(1-dt))/2;z(gt,Pt,1-Pt,bt,[])}}function U(et,st){for(var dt=0;dt<et.length;dt++){var bt=et[dt];if(!bt.fixedrange){if(bt.rangebreaks){var Lt=bt._length,xt=(bt.p2l(0+st)-bt.p2l(0)+(bt.p2l(Lt+st)-bt.p2l(Lt)))/2;bt.range=[bt.l2r(bt._rl[0]-xt),bt.l2r(bt._rl[1]-xt)]}else bt.range=[bt.l2r(bt._rl[0]-st/bt._m),bt.l2r(bt._rl[1]-st/bt._m)];bt.limitRange&&bt.limitRange()}}}function H(et){return 1-(et>=0?Math.min(et,.9):1/(1/Math.max(et,-.3)+3.222))}function nt(et,st,dt,bt,gt){return et.append("path").attr("class","zoombox").style({fill:st>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",y(dt,bt)).attr("d",gt+"Z")}function it(et,st,dt){return et.append("path").attr("class","zoombox-corners").style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,opacity:0}).attr("transform",y(st,dt)).attr("d","M0,0Z")}function ut(et,st,dt,bt,gt,Lt){et.attr("d",bt+"M"+dt.l+","+dt.t+"v"+dt.h+"h"+dt.w+"v-"+dt.h+"h-"+dt.w+"Z"),Q(et,st,gt,Lt)}function Q(et,st,dt,bt){dt||(et.transition().style("fill",bt>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),st.transition().style("opacity",1).duration(200))}function j(et){A.select(et).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Z(et){F&&et.data&&et._context.showTips&&(g.notifier(g._(et,"Double-click to zoom back out"),"long"),F=!1)}function at(et){var st=Math.floor(Math.min(et.b-et.t,et.r-et.l,d)/2);return"M"+(et.l-3.5)+","+(et.t-.5+st)+"h3v"+-st+"h"+st+"v-3h-"+(st+3)+"ZM"+(et.r+3.5)+","+(et.t-.5+st)+"h-3v"+-st+"h"+-st+"v-3h"+(st+3)+"ZM"+(et.r+3.5)+","+(et.b+.5-st)+"h-3v"+st+"h"+-st+"v3h"+(st+3)+"ZM"+(et.l-3.5)+","+(et.b+.5-st)+"h3v"+st+"h"+st+"v3h-"+(st+3)+"Z"}function $(et,st,dt,bt,gt){for(var xt,At,Gt,Wt,Lt=!1,It={},Mt={},Pt=(gt||{}).xaHash,Vt=(gt||{}).yaHash,te=0;te<st.length;te++){var Qt=st[te];for(xt in dt)if(Qt[xt]){for(Gt in Qt)(!gt||!Pt[Gt]&&!Vt[Gt])&&!("x"===Gt.charAt(0)?dt:bt)[Gt]&&(It[Gt]=xt);for(At in bt)(!gt||!Pt[At]&&!Vt[At])&&Qt[At]&&(Lt=!0)}for(At in bt)if(Qt[At])for(Wt in Qt)(!gt||!Pt[Wt]&&!Vt[Wt])&&!("x"===Wt.charAt(0)?dt:bt)[Wt]&&(Mt[Wt]=At)}Lt&&(g.extendFlat(It,Mt),Mt={});var Bt={},Ot=[];for(Gt in It){var qt=b(et,Gt);Ot.push(qt),Bt[qt._id]=qt}var ie={},oe=[];for(Wt in Mt){var pe=b(et,Wt);oe.push(pe),ie[pe._id]=pe}return{xaHash:Bt,yaHash:ie,xaxes:Ot,yaxes:oe,xLinks:It,yLinks:Mt,isSubplotConstrained:Lt}}function X(et,st){if(C){var dt=void 0!==et.onwheel?"wheel":"mousewheel";et._onwheel&&et.removeEventListener(dt,et._onwheel),et._onwheel=st,et.addEventListener(dt,st,{passive:!1})}else void 0!==et.onwheel?et.onwheel=st:void 0!==et.onmousewheel?et.onmousewheel=st:et.isAddedWheelEvent||(et.isAddedWheelEvent=!0,et.addEventListener("wheel",st,{passive:!1}))}function rt(et){var st=[];for(var dt in et)st.push(et[dt]);return st}q.exports={makeDragBox:function D(et,st,dt,bt,gt,Lt,It,Mt){var Wt,Pt,Vt,te,Qt,Bt,Ot,qt,ie,oe,pe,de,Fe,Kt,Et,St,Dt,Ft,Nt,Rt,wt,ft,pt,xt=et._fullLayout._zoomlayer,At=It+Mt==="nsew",Gt=1===(It+Mt).length;function kt(){if(ie=(Wt=st.xaxis)._length,oe=(Pt=st.yaxis)._length,Ot=Wt._offset,qt=Pt._offset,(Vt={})[Wt._id]=Wt,(te={})[Pt._id]=Pt,It&&Mt)for(var _e=st.overlays,De=0;De<_e.length;De++){var sr=_e[De].xaxis;Vt[sr._id]=sr;var yr=_e[De].yaxis;te[yr._id]=yr}Qt=rt(Vt),Bt=rt(te),Fe=O(Qt,Mt),Kt=O(Bt,It),Et=!Kt&&!Fe,de=$(et,et._fullLayout._axisMatchGroups,Vt,te);var dr=(pe=$(et,et._fullLayout._axisConstraintGroups,Vt,te,de)).isSubplotConstrained||de.isSubplotConstrained;St=Mt||dr,Dt=It||dr;var Pr=et._fullLayout;Ft=Pr._has("scattergl"),Nt=Pr._has("splom"),Rt=Pr._has("svg")}dt+=st.yaxis._shift,kt();var Zt=function J(et,st,dt){return et?"nsew"===et?dt?"":"pan"===st?"move":"crosshair":et.toLowerCase()+"-resize":"pointer"}(Kt+Fe,et._fullLayout.dragmode,At),ee=k(st,It+Mt+"drag",Zt,dt,bt,gt,Lt);if(Et&&!At)return ee.onmousedown=null,ee.style.pointerEvents="none",ee;var xe,Pe,Ge,gr,ue,Ne,Ye,xr,rr,ce,se={element:ee,gd:et,plotinfo:st};function Be(){se.plotinfo.selection=!1,x(et)}function Ke(_e,De){var sr=se.gd;if(sr._fullLayout._activeShapeIndex>=0)sr._fullLayout._deactivateShape(sr);else{var yr=sr._fullLayout.clickmode;if(j(sr),2===_e&&!Gt&&function Ht(){if(!et._transitioningWithDuration){var _e=et._context.doubleClick,De=[];Fe&&(De=De.concat(Qt)),Kt&&(De=De.concat(Bt)),de.xaxes&&(De=De.concat(de.xaxes)),de.yaxes&&(De=De.concat(de.yaxes));var yr,dr,sr={};if("reset+autosize"===_e)for(_e="autosize",dr=0;dr<De.length;dr++){var Pr=(yr=De[dr])._rangeInitial0,Jr=yr._rangeInitial1,Mr=void 0!==Pr||void 0!==Jr;if(Mr&&(void 0!==Pr&&Pr!==yr.range[0]||void 0!==Jr&&Jr!==yr.range[1])||!Mr&&!0!==yr.autorange){_e="reset";break}}if("autosize"===_e)for(dr=0;dr<De.length;dr++)(yr=De[dr]).fixedrange||(sr[yr._name+".autorange"]=!0);else if("reset"===_e)for((Fe||pe.isSubplotConstrained)&&(De=De.concat(pe.xaxes)),Kt&&!pe.isSubplotConstrained&&(De=De.concat(pe.yaxes)),pe.isSubplotConstrained&&(Fe?Kt||(De=De.concat(Bt)):De=De.concat(Qt)),dr=0;dr<De.length;dr++)if(!(yr=De[dr]).fixedrange){var Wr=yr._name,nn=yr._autorangeInitial;void 0===yr._rangeInitial0&&void 0===yr._rangeInitial1?sr[Wr+".autorange"]=!0:void 0===yr._rangeInitial0?(sr[Wr+".autorange"]=nn,sr[Wr+".range"]=[null,yr._rangeInitial1]):void 0===yr._rangeInitial1?(sr[Wr+".range"]=[yr._rangeInitial0,null],sr[Wr+".autorange"]=nn):sr[Wr+".range"]=[yr._rangeInitial0,yr._rangeInitial1]}et.emit("plotly_doubleclick",null),u.call("_guiRelayout",et,sr)}}(),At)yr.indexOf("select")>-1&&S(De,sr,Qt,Bt,st.id,se),yr.indexOf("event")>-1&&a.click(sr,De,st.id);else if(1===_e&&Gt){var dr=It?Pt:Wt,Pr="s"===It||"w"===Mt?0:1,Jr=dr._name+".range["+Pr+"]",Mr=function B(et,st){var gt,dt=et.range[st],bt=Math.abs(dt-et.range[1-st]);return"date"===et.type?dt:"log"===et.type?(gt=Math.ceil(Math.max(0,-Math.log(bt)/Math.LN10))+3,i("."+gt+"g")(Math.pow(10,dt))):(gt=Math.floor(Math.log(Math.abs(dt))/Math.LN10)-Math.floor(Math.log(bt)/Math.LN10)+4,i("."+String(gt)+"g")(dt))}(dr,Pr),Wr="left",nn="middle";if(dr.fixedrange)return;It?(nn="n"===It?"top":"bottom","right"===dr.side&&(Wr="right")):"e"===Mt&&(Wr="right"),sr._context.showAxisRangeEntryBoxes&&A.select(ee).call(e.makeEditable,{gd:sr,immediate:!0,background:sr._fullLayout.paper_bgcolor,text:String(Mr),fill:dr.tickfont?dr.tickfont.color:"#444",horizontalAlign:Wr,verticalAlign:nn}).on("edit",function(Nr){var Dn=dr.d2r(Nr);void 0!==Dn&&u.call("_guiRelayout",sr,Jr,Dn)})}}}function ve(_e,De){if(et._transitioningWithDuration)return!1;var sr=Math.max(0,Math.min(ie,ft*_e+xe)),yr=Math.max(0,Math.min(oe,pt*De+Pe)),dr=Math.abs(sr-xe),Pr=Math.abs(yr-Pe);function Jr(){Ye="",Ge.r=Ge.l,Ge.t=Ge.b,rr.attr("d","M0,0Z")}if(Ge.l=Math.min(xe,sr),Ge.r=Math.max(xe,sr),Ge.t=Math.min(Pe,yr),Ge.b=Math.max(Pe,yr),pe.isSubplotConstrained)dr>d||Pr>d?(Ye="xy",dr/ie>Pr/oe?(Pr=dr*oe/ie,Pe>yr?Ge.t=Pe-Pr:Ge.b=Pe+Pr):(dr=Pr*ie/oe,xe>sr?Ge.l=xe-dr:Ge.r=xe+dr),rr.attr("d",at(Ge))):Jr();else if(de.isSubplotConstrained)if(dr>d||Pr>d){Ye="xy";var Mr=Math.min(Ge.l/ie,(oe-Ge.b)/oe),Wr=Math.max(Ge.r/ie,(oe-Ge.t)/oe);Ge.l=Mr*ie,Ge.r=Wr*ie,Ge.b=(1-Mr)*oe,Ge.t=(1-Wr)*oe,rr.attr("d",at(Ge))}else Jr();else!Kt||Pr<Math.min(Math.max(.6*dr,E),d)?dr<E||!Fe?Jr():(Ge.t=0,Ge.b=oe,Ye="x",rr.attr("d",function G(et,st){return"M"+(et.l-.5)+","+(st-d-.5)+"h-3v"+(2*d+1)+"h3ZM"+(et.r+.5)+","+(st-d-.5)+"h3v"+(2*d+1)+"h-3Z"}(Ge,Pe))):!Fe||dr<Math.min(.6*Pr,d)?(Ge.l=0,Ge.r=ie,Ye="y",rr.attr("d",function K(et,st){return"M"+(st-d-.5)+","+(et.t-.5)+"v-3h"+(2*d+1)+"v3ZM"+(st-d-.5)+","+(et.b+.5)+"v3h"+(2*d+1)+"v-3Z"}(Ge,xe))):(Ye="xy",rr.attr("d",at(Ge)));Ge.w=Ge.r-Ge.l,Ge.h=Ge.b-Ge.t,Ye&&(ce=!0),et._dragged=ce,ut(xr,rr,Ge,ue,Ne,gr),be(),et.emit("plotly_relayouting",wt),Ne=!0}function be(){wt={},("xy"===Ye||"x"===Ye)&&(z(Qt,Ge.l/ie,Ge.r/ie,wt,pe.xaxes),cr("x",wt)),("xy"===Ye||"y"===Ye)&&(z(Bt,(oe-Ge.b)/oe,(oe-Ge.t)/oe,wt,pe.yaxes),cr("y",wt))}function Ae(){be(),j(et),Se(),Z(et)}se.prepFn=function(_e,De,sr){var yr=se.dragmode,dr=et._fullLayout.dragmode;dr!==yr&&(se.dragmode=dr),kt(),ft=et._fullLayout._invScaleX,pt=et._fullLayout._invScaleY,Et||(At?_e.shiftKey?"pan"===dr?dr="zoom":h(dr)||(dr="pan"):_e.ctrlKey&&(dr="pan"):dr="pan"),se.minDrag=w(dr)?1:void 0,h(dr)?(se.xaxes=Qt,se.yaxes=Bt,L(_e,De,sr,se,dr)):(se.clickFn=Ke,h(yr)&&Be(),Et||("zoom"===dr?(se.moveFn=ve,se.doneFn=Ae,se.minDrag=1,function re(_e,De,sr){var yr=ee.getBoundingClientRect();xe=De-yr.left,Pe=sr-yr.top,et._fullLayout._calcInverseTransform(et);var dr=g.apply3DTransform(et._fullLayout._invTransform)(xe,Pe);Ge={l:xe=dr[0],r:xe,w:0,t:Pe=dr[1],b:Pe,h:0},gr=et._hmpixcount?et._hmlumcount/et._hmpixcount:P(et._fullLayout.plot_bgcolor).getLuminance(),Ne=!1,Ye="xy",ce=!1,xr=nt(xt,gr,Ot,qt,ue="M0,0H"+ie+"V"+oe+"H0V0"),rr=it(xt,Ot,qt)}(0,De,sr)):"pan"===dr&&(se.moveFn=nr,se.doneFn=Se))),et._fullLayout._redrag=function(){var Pr=et._dragdata;Pr&&Pr.element===ee&&(h(et._fullLayout.dragmode)||(kt(),Ce([0,0,ie,oe]),se.moveFn(Pr.dx,Pr.dy)))}},f.init(se);var Te=[0,0,ie,oe],Re=null,Ie=n.REDRAWDELAY,Xe=st.mainplot?et._fullLayout._plots[st.mainplot]:st;function nr(_e,De){if(_e*=ft,De*=pt,!et._transitioningWithDuration){if(et._fullLayout._replotting=!0,"ew"===Fe||"ns"===Kt){var sr=Fe?-_e:0,yr=Kt?-De:0;if(de.isSubplotConstrained){if(Fe&&Kt){var dr=(_e/ie-De/oe)/2;sr=-(_e=dr*ie),yr=-(De=-dr*oe)}Kt?sr=-yr*ie/oe:yr=-sr*oe/ie}return Fe&&(U(Qt,_e),cr("x")),Kt&&(U(Bt,De),cr("y")),Ce([sr,yr,ie,oe]),Ut(),void et.emit("plotly_relayouting",wt)}var Wr,nn,Jr="w"===Fe==("n"===Kt)?1:-1;if(Fe&&Kt&&(pe.isSubplotConstrained||de.isSubplotConstrained)){var Mr=(_e/ie+Jr*De/oe)/2;_e=Mr*ie,De=Jr*Mr*oe}if("w"===Fe?_e=Pr(Qt,0,_e):"e"===Fe?_e=Pr(Qt,1,-_e):Fe||(_e=0),"n"===Kt?De=Pr(Bt,1,De):"s"===Kt?De=Pr(Bt,0,-De):Kt||(De=0),Wr="w"===Fe?_e:0,nn="n"===Kt?De:0,pe.isSubplotConstrained&&!de.isSubplotConstrained||de.isSubplotConstrained&&Fe&&Kt&&Jr>0){var Nr;if(de.isSubplotConstrained||!Fe&&1===Kt.length){for(Nr=0;Nr<Qt.length;Nr++)Qt[Nr].range=Qt[Nr]._r.slice(),T(Qt[Nr],1-De/oe);Wr=(_e=De*ie/oe)/2}if(de.isSubplotConstrained||!Kt&&1===Fe.length){for(Nr=0;Nr<Bt.length;Nr++)Bt[Nr].range=Bt[Nr]._r.slice(),T(Bt[Nr],1-_e/ie);nn=(De=_e*oe/ie)/2}}(!de.isSubplotConstrained||!Kt)&&cr("x"),(!de.isSubplotConstrained||!Fe)&&cr("y");var Dn=ie-_e,hn=oe-De;de.isSubplotConstrained&&!(Fe&&Kt)&&(Fe?(nn=Wr?0:_e*oe/ie,hn=Dn*oe/ie):(Wr=nn?0:De*ie/oe,Dn=hn*ie/oe)),Ce([Wr,nn,Dn,hn]),Ut(),et.emit("plotly_relayouting",wt)}function Pr(hr,Ar,Br){for(var an,dn,Or=1-Ar,pn=0;pn<hr.length;pn++){var wn=hr[pn];if(!wn.fixedrange){an=wn,dn=wn._rl[Or]+(wn._rl[Ar]-wn._rl[Or])/H(Br/wn._length);var Ln=wn.l2r(dn);!1!==Ln&&void 0!==Ln&&(wn.range[Ar]=Ln)}}return an._length*(an._rl[Ar]-dn)/(an._rl[Ar]-an._rl[Or])}}function cr(_e,De){for(var sr=de.isSubplotConstrained?{x:Bt,y:Qt}[_e]:de[_e+"axes"],yr=de.isSubplotConstrained?{x:Qt,y:Bt}[_e]:[],dr=0;dr<sr.length;dr++){var Pr=sr[dr],Jr=Pr._id,Mr=de.xLinks[Jr]||de.yLinks[Jr],Wr=yr[0]||Vt[Mr]||te[Mr];Wr&&(De?(De[Pr._name+".range[0]"]=De[Wr._name+".range[0]"],De[Pr._name+".range[1]"]=De[Wr._name+".range[1]"]):Pr.range=Wr.range.slice())}}function Ut(){var De,_e=[];function sr(Jr){for(De=0;De<Jr.length;De++)Jr[De].fixedrange||_e.push(Jr[De]._id)}function yr(Jr,Mr){for(De=0;De<Jr.length;De++){var Wr=Jr[De],nn=Wr[Mr];!Wr.fixedrange&&"sync"===nn.tickmode&&_e.push(nn._id)}}for(St&&(sr(Qt),sr(pe.xaxes),sr(de.xaxes),yr(st.overlays,"xaxis")),Dt&&(sr(Bt),sr(pe.yaxes),sr(de.yaxes),yr(st.overlays,"yaxis")),wt={},De=0;De<_e.length;De++){var Pr=b(et,_e[De]);s.drawOne(et,Pr,{skipTitle:!0}),wt[Pr._name+".range[0]"]=Pr.range[0],wt[Pr._name+".range[1]"]=Pr.range[1]}s.redrawComponents(et,_e)}function Se(){Ce([0,0,ie,oe]),g.syncOrAsync([M.previousPromises,function(){et._fullLayout._replotting=!1,u.call("_guiRelayout",et,wt)}],et)}function Ce(_e){var dr,Pr,Jr,Mr,De=et._fullLayout,sr=De._plots,yr=De._subplots.cartesian;if(Nt&&u.subplotsRegistry.splom.drag(et),Ft)for(dr=0;dr<yr.length;dr++)if(Jr=(Pr=sr[yr[dr]]).xaxis,Mr=Pr.yaxis,Pr._scene){var Wr=g.simpleMap(Jr.range,Jr.r2l),nn=g.simpleMap(Mr.range,Mr.r2l);Jr.limitRange&&Jr.limitRange(),Mr.limitRange&&Mr.limitRange(),Pr._scene.update({range:[(Wr=Jr.range)[0],(nn=Mr.range)[0],Wr[1],nn[1]]})}if((Nt||Ft)&&(o(et),v(et)),Rt){var Nr=_e[2]/Wt._length,Dn=_e[3]/Pt._length;for(dr=0;dr<yr.length;dr++){Jr=(Pr=sr[yr[dr]]).xaxis,Mr=Pr.yaxis;var Ar,Br,Or,an,hr=(Dt||de.isSubplotConstrained)&&!Mr.fixedrange&&te[Mr._id];if((St||de.isSubplotConstrained)&&!Jr.fixedrange&&Vt[Jr._id]?(Ar=Nr,Or=Mt||de.isSubplotConstrained?_e[0]:or(Jr,Ar)):de.xaHash[Jr._id]?(Ar=Nr,Or=_e[0]*Jr._length/Wt._length):de.yaHash[Jr._id]?(Ar=Dn,Or="ns"===Kt?-_e[1]*Jr._length/Pt._length:or(Jr,Ar,{n:"top",s:"bottom"}[Kt])):Or=qe(Jr,Ar=We(Jr,Nr,Dn)),Ar>1&&(void 0!==Jr.maxallowed&&St===(Jr.range[0]<Jr.range[1]?"e":"w")||void 0!==Jr.minallowed&&St===(Jr.range[0]<Jr.range[1]?"w":"e"))&&(Ar=1,Or=0),hr?(Br=Dn,an=It||de.isSubplotConstrained?_e[1]:or(Mr,Br)):de.yaHash[Mr._id]?(Br=Dn,an=_e[1]*Mr._length/Pt._length):de.xaHash[Mr._id]?(Br=Nr,an="ew"===Fe?-_e[0]*Mr._length/Wt._length:or(Mr,Br,{e:"right",w:"left"}[Fe])):an=qe(Mr,Br=We(Mr,Nr,Dn)),Br>1&&(void 0!==Mr.maxallowed&&Dt===(Mr.range[0]<Mr.range[1]?"n":"s")||void 0!==Mr.minallowed&&Dt===(Mr.range[0]<Mr.range[1]?"s":"n"))&&(Br=1,an=0),Ar||Br){Ar||(Ar=1),Br||(Br=1);var dn=Jr._offset-Or/Ar,pn=Mr._offset-an/Br;Pr.clipRect.call(l.setTranslate,Or,an).call(l.setScale,Ar,Br),Pr.plot.call(l.setTranslate,dn,pn).call(l.setScale,1/Ar,1/Br),(Ar!==Pr.xScaleFactor||Br!==Pr.yScaleFactor)&&(l.setPointGroupScale(Pr.zoomScalePts,Ar,Br),l.setTextPointsScale(Pr.zoomScaleTxt,Ar,Br)),l.hideOutsideRangePoints(Pr.clipOnAxisFalseTraces,Pr),Pr.xScaleFactor=Ar,Pr.yScaleFactor=Br}}}}function We(_e,De,sr){return _e.fixedrange?0:St&&pe.xaHash[_e._id]?De:Dt&&(pe.isSubplotConstrained?pe.xaHash:pe.yaHash)[_e._id]?sr:0}function qe(_e,De){return De?(_e.range=_e._r.slice(),T(_e,De),or(_e,De)):0}function or(_e,De,sr){return _e._length*(1-De)*p[sr||_e.constraintoward||"middle"]}return It.length*Mt.length!=1&&X(ee,function ar(_e){if(et._context._scrollZoom.cartesian||et._fullLayout._enablescrollzoom){if(Be(),et._transitioningWithDuration)return _e.preventDefault(),void _e.stopPropagation();kt(),clearTimeout(Re);var De=-_e.deltaY;if(isFinite(De)||(De=_e.wheelDelta/10),isFinite(De)){var Jr,sr=Math.exp(-Math.min(Math.max(De,-20),20)/200),yr=Xe.draglayer.select(".nsewdrag").node().getBoundingClientRect(),dr=(_e.clientX-yr.left)/yr.width,Pr=(yr.bottom-_e.clientY)/yr.height;if(St){for(Mt||(dr=.5),Jr=0;Jr<Qt.length;Jr++)Mr(Qt[Jr],dr,sr);cr("x"),Te[2]*=sr,Te[0]+=Te[2]*dr*(1/sr-1)}if(Dt){for(It||(Pr=.5),Jr=0;Jr<Bt.length;Jr++)Mr(Bt[Jr],Pr,sr);cr("y"),Te[3]*=sr,Te[1]+=Te[3]*(1-Pr)*(1/sr-1)}Ce(Te),Ut(),et.emit("plotly_relayouting",wt),Re=setTimeout(function(){!et._fullLayout||(Te=[0,0,ie,oe],Se())},Ie),_e.preventDefault()}else g.log("Did not find wheel motion attributes: ",_e)}function Mr(Wr,nn,Nr){if(!Wr.fixedrange){var Dn=g.simpleMap(Wr.range,Wr.r2l),hn=Dn[0]+(Dn[1]-Dn[0])*nn;Wr.range=Dn.map(function hr(Ar){return Wr.l2r(hn+(Ar-hn)*Nr)})}}}),ee},makeDragger:N,makeRectDragger:k,makeZoombox:nt,makeCorners:it,updateZoombox:ut,xyCorners:at,transitionZoombox:Q,removeZoombox:j,showDoubleClickNotifier:Z,attachWheelEventHandler:X}},4305:function(q,W,t){"use strict";var A=t(39898),g=t(30211),i=t(28569),P=t(6964),C=t(29323).makeDragBox,u=t(85555).DRAGGERSIZE;W.initInteractions=function(e){var r=e._fullLayout;if(e._context.staticPlot)A.select(e).selectAll(".drag").remove();else if(r._has("cartesian")||r._has("splom")){Object.keys(r._plots||{}).sort(function(s,c){if((r._plots[s].mainplot&&!0)===(r._plots[c].mainplot&&!0)){var f=s.split("y"),m=c.split("y");return f[0]===m[0]?Number(f[1]||1)-Number(m[1]||1):Number(f[0]||1)-Number(m[0]||1)}return r._plots[s].mainplot?1:-1}).forEach(function(s){var c=r._plots[s],f=c.xaxis,m=c.yaxis;if(!c.mainplot){var h=C(e,c,f._offset,m._offset,f._length,m._length,"ns","ew");h.onmousemove=function(o){e._fullLayout._rehover=function(){e._fullLayout._hoversubplot===s&&e._fullLayout._plots[s]&&g.hover(e,o,s)},g.hover(e,o,s),e._fullLayout._lasthover=h,e._fullLayout._hoversubplot=s},h.onmouseout=function(o){e._dragging||(e._fullLayout._hoversubplot=null,i.unhover(e,o))},e._context.showAxisDragHandles&&(C(e,c,f._offset-u,m._offset-u,u,u,"n","w"),C(e,c,f._offset+f._length,m._offset-u,u,u,"n","e"),C(e,c,f._offset-u,m._offset+m._length,u,u,"s","w"),C(e,c,f._offset+f._length,m._offset+m._length,u,u,"s","e"))}if(e._context.showAxisDragHandles){if(s===f._mainSubplot){var w=f._mainLinePosition;"top"===f.side&&(w-=u),C(e,c,f._offset+.1*f._length,w,.8*f._length,u,"","ew"),C(e,c,f._offset,w,.1*f._length,u,"","w"),C(e,c,f._offset+.9*f._length,w,.1*f._length,u,"","e")}if(s===m._mainSubplot){var p=m._mainLinePosition;"right"!==m.side&&(p-=u),C(e,c,p,m._offset+.1*m._length,u,.8*m._length,"ns",""),C(e,c,p,m._offset+.9*m._length,u,.1*m._length,"s",""),C(e,c,p,m._offset,u,.1*m._length,"n","")}}});var a=r._hoverlayer.node();a.onmousemove=function(s){s.target=e._fullLayout._lasthover,g.hover(e,s,r._hoversubplot)},a.onclick=function(s){s.target=e._fullLayout._lasthover,g.click(e,s)},a.onmousedown=function(s){e._fullLayout._lasthover.onmousedown(s)},W.updateFx(e)}},W.updateFx=function(y){var e=y._fullLayout;P(e._draggers,"pan"===e.dragmode?"move":"crosshair")}},76325:function(q,W,t){"use strict";var A=t(73972),g=t(71828),i=t(41675);q.exports=function(C){return function(y,e){var r=y[C];if(Array.isArray(r))for(var l=A.subplotsRegistry.cartesian,a=l.idRegex,s=e._subplots,c=s.xaxis,f=s.yaxis,m=s.cartesian,h=e._has("cartesian")||e._has("gl2d"),w=0;w<r.length;w++){var p=r[w];if(g.isPlainObject(p)){var o=i.cleanId(p.xref,"x",!1),v=i.cleanId(p.yref,"y",!1),M=a.x.test(o),b=a.y.test(v);if(M||b){h||g.pushUnique(e._basePlotModules,l);var L=!1;M&&-1===c.indexOf(o)&&(c.push(o),L=!0),b&&-1===f.indexOf(v)&&(f.push(v),L=!0),L&&M&&b&&m.push(o+v)}}}}}},93612:function(q,W,t){"use strict";var A=t(39898),g=t(73972),i=t(71828),P=t(74875),C=t(91424),u=t(27659).a0,y=t(41675),e=t(85555),r=t(77922),l=i.ensureSingle;function a(w,p,o){return i.ensureSingle(w,p,o,function(v){v.datum(o)})}function s(w,p,o,v,M){for(var S,T,n,b=e.traceLayerClasses,L=w._fullLayout,x=L._modules,E=[],d=[],F=0;F<x.length;F++){var D=(S=x[F]).name,N=g.modules[D].categories;if(N.svg){var k=S.layerName||D+"layer",O=S.plot;o=(T=u(o,O))[1],(n=T[0]).length&&E.push({i:b.indexOf(k),className:k,plotMethod:O,cdModule:n}),N.zoomScale&&d.push("."+k)}}E.sort(function(U,H){return U.i-H.i});var B=p.plot.selectAll("g.mlayer").data(E,function(U){return U.className});if(B.enter().append("g").attr("class",function(U){return U.className}).classed("mlayer",!0).classed("rangeplot",p.isRangePlot),B.exit().remove(),B.order(),B.each(function(U){var H=A.select(this),J=U.className;U.plotMethod(w,p,U.cdModule,H,v,M),-1===e.clipOnAxisFalseQuery.indexOf("."+J)&&C.setClipUrl(H,p.layerClipId,w)}),L._has("scattergl")&&(S=g.getModule("scattergl"),n=u(o,S)[0],S.plot(w,p,n)),!w._context.staticPlot&&(p._hasClipOnAxisFalse&&(p.clipOnAxisFalseTraces=p.plot.selectAll(e.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),d.length)){var z=p.plot.selectAll(d.join(",")).selectAll(".trace");p.zoomScalePts=z.selectAll("path.point"),p.zoomScaleTxt=z.selectAll(".textpoint")}}function f(w,p){var o=p.plotgroup,v=p.id,M=e.layerValue2layerClass[p.xaxis.layer],b=e.layerValue2layerClass[p.yaxis.layer],L=w._fullLayout._hasOnlyLargeSploms;if(p.mainplot){var S=p.mainplotinfo,T=S.plotgroup,n=v+"-x",E=v+"-y";p.minorGridlayer=S.minorGridlayer,p.gridlayer=S.gridlayer,p.zerolinelayer=S.zerolinelayer,l(S.overlinesBelow,"path",n),l(S.overlinesBelow,"path",E),l(S.overaxesBelow,"g",n),l(S.overaxesBelow,"g",E),p.plot=l(S.overplot,"g",v),l(S.overlinesAbove,"path",n),l(S.overlinesAbove,"path",E),l(S.overaxesAbove,"g",n),l(S.overaxesAbove,"g",E),p.xlines=T.select(".overlines-"+M).select("."+n),p.ylines=T.select(".overlines-"+b).select("."+E),p.xaxislayer=T.select(".overaxes-"+M).select("."+n),p.yaxislayer=T.select(".overaxes-"+b).select("."+E)}else if(L)p.xlines=l(o,"path","xlines-above"),p.ylines=l(o,"path","ylines-above"),p.xaxislayer=l(o,"g","xaxislayer-above"),p.yaxislayer=l(o,"g","yaxislayer-above");else{var x=l(o,"g","layer-subplot");p.shapelayer=l(x,"g","shapelayer"),p.imagelayer=l(x,"g","imagelayer"),p.minorGridlayer=l(o,"g","minor-gridlayer"),p.gridlayer=l(o,"g","gridlayer"),p.zerolinelayer=l(o,"g","zerolinelayer"),l(o,"path","xlines-below"),l(o,"path","ylines-below"),p.overlinesBelow=l(o,"g","overlines-below"),l(o,"g","xaxislayer-below"),l(o,"g","yaxislayer-below"),p.overaxesBelow=l(o,"g","overaxes-below"),p.plot=l(o,"g","plot"),p.overplot=l(o,"g","overplot"),p.xlines=l(o,"path","xlines-above"),p.ylines=l(o,"path","ylines-above"),p.overlinesAbove=l(o,"g","overlines-above"),l(o,"g","xaxislayer-above"),l(o,"g","yaxislayer-above"),p.overaxesAbove=l(o,"g","overaxes-above"),p.xlines=o.select(".xlines-"+M),p.ylines=o.select(".ylines-"+b),p.xaxislayer=o.select(".xaxislayer-"+M),p.yaxislayer=o.select(".yaxislayer-"+b)}L||(a(p.minorGridlayer,"g",p.xaxis._id),a(p.minorGridlayer,"g",p.yaxis._id),p.minorGridlayer.selectAll("g").map(function(d){return d[0]}).sort(y.idSort),a(p.gridlayer,"g",p.xaxis._id),a(p.gridlayer,"g",p.yaxis._id),p.gridlayer.selectAll("g").map(function(d){return d[0]}).sort(y.idSort)),p.xlines.style("fill","none").classed("crisp",!0),p.ylines.style("fill","none").classed("crisp",!0)}function m(w,p){if(w){var o={};for(var v in w.each(function(S){var T=S[0];A.select(this).remove(),h(T,p),o[T]=!0}),p._plots)for(var b=p._plots[v].overlays||[],L=0;L<b.length;L++){var x=b[L];o[x.id]&&x.plot.selectAll(".trace").remove()}}}function h(w,p){p._draggers.selectAll("g."+w).remove(),p._defs.select("#clip"+p._uid+w+"plot").remove()}W.name="cartesian",W.attr=["xaxis","yaxis"],W.idRoot=["x","y"],W.idRegex=e.idRegex,W.attrRegex=e.attrRegex,W.attributes=t(89502),W.layoutAttributes=t(13838),W.supplyLayoutDefaults=t(86763),W.transitionAxes=t(66847),W.finalizeSubplots=function(w,p){var T,n,E,o=p._subplots,v=o.xaxis,M=o.yaxis,b=o.cartesian,L=b.concat(o.gl2d||[]),x={},S={};for(T=0;T<L.length;T++){var d=L[T].split("y");x[d[0]]=1,S["y"+d[1]]=1}for(T=0;T<v.length;T++)x[n=v[T]]||(E=(w[y.id2name(n)]||{}).anchor,e.idRegex.y.test(E)||(E="y"),b.push(n+E),L.push(n+E),S[E]||(S[E]=1,i.pushUnique(M,E)));for(T=0;T<M.length;T++)S[E=M[T]]||(n=(w[y.id2name(E)]||{}).anchor,e.idRegex.x.test(n)||(n="x"),b.push(n+E),L.push(n+E),x[n]||(x[n]=1,i.pushUnique(v,n)));if(!L.length){for(var F in n="",E="",w)e.attrRegex.test(F)&&("x"===F.charAt(0)?(!n||+F.substr(5)<+n.substr(5))&&(n=F):(!E||+F.substr(5)<+E.substr(5))&&(E=F));n=n?y.name2id(n):"x",E=E?y.name2id(E):"y",v.push(n),M.push(E),b.push(n+E)}},W.plot=function(w,p,o,v){var x,M=w._fullLayout,b=M._subplots.cartesian,L=w.calcdata;if(!Array.isArray(p))for(p=[],x=0;x<L.length;x++)p.push(x);for(x=0;x<b.length;x++){for(var E,S=b[x],T=M._plots[S],n=[],d=0;d<L.length;d++){var F=L[d],D=F[0].trace;D.xaxis+D.yaxis===S&&((-1!==p.indexOf(D.index)||D.carpet)&&(E&&E[0].trace.xaxis+E[0].trace.yaxis===S&&-1!==["tonextx","tonexty","tonext"].indexOf(D.fill)&&-1===n.indexOf(E)&&n.push(E),n.push(F)),E=F)}s(w,T,n,o,v)}},W.clean=function(w,p,o,v){var x,S,T,M=v._plots||{},b=p._plots||{},L=v._subplots||{};if(v._hasOnlyLargeSploms&&!p._hasOnlyLargeSploms)for(T in M)(x=M[T]).plotgroup&&x.plotgroup.remove();var n=v._has&&v._has("gl"),E=p._has&&p._has("gl");if(n&&!E)for(T in M)(x=M[T])._scene&&x._scene.destroy();if(L.xaxis&&L.yaxis){var d=y.listIds({_fullLayout:v});for(S=0;S<d.length;S++){var F=d[S];p[y.id2name(F)]||v._infolayer.selectAll(".g-"+F+"title").remove()}}var D=v._has&&v._has("cartesian"),N=p._has&&p._has("cartesian");if(D&&!N)m(v._cartesianlayer.selectAll(".subplot"),v),v._defs.selectAll(".axesclip").remove(),delete v._axisConstraintGroups,delete v._axisMatchGroups;else if(L.cartesian)for(S=0;S<L.cartesian.length;S++){var k=L.cartesian[S];b[k]||(v._cartesianlayer.selectAll("."+k+",."+k+"-x,."+k+"-y").remove(),h(k,v))}},W.drawFramework=function(w){var p=w._fullLayout,o=function c(w){var M,b,L,x,S,T,p=w._fullLayout,o=p._subplots.cartesian,v=o.length,n=[],E=[];for(M=0;M<v;M++){var D=(S=(x=p._plots[L=o[M]]).xaxis)._mainAxis._id+(T=x.yaxis)._mainAxis._id,N=p._plots[D];x.overlays=[],D!==L&&N?(x.mainplot=D,x.mainplotinfo=N,E.push(L)):(x.mainplot=void 0,x.mainplotinfo=void 0,n.push(L))}for(M=0;M<E.length;M++)(x=p._plots[L=E[M]]).mainplotinfo.overlays.push(x);var k=n.concat(E),O=new Array(v);for(M=0;M<v;M++){var B=[L=k[M],(S=(x=p._plots[L]).xaxis).layer,(T=x.yaxis).layer,S.overlaying||"",T.overlaying||""];for(b=0;b<x.overlays.length;b++)B.push(x.overlays[b].id);O[M]=B}return O}(w),v=p._cartesianlayer.selectAll(".subplot").data(o,String);v.enter().append("g").attr("class",function(M){return"subplot "+M[0]}),v.order(),v.exit().call(m,p),v.each(function(M){var b=M[0],L=p._plots[b];L.plotgroup=A.select(this),f(w,L),L.draglayer=l(p._draggers,"g",b)})},W.rangePlot=function(w,p,o){f(w,p),s(w,p,o),P.style(w)},W.toSVG=function(w){var p=w._fullLayout._glimages,o=A.select(w).selectAll(".svg-container");o.filter(function(b,L){return L===o.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function M(){var b=this,L=b.toDataURL("image/png");p.append("svg:image").attr({xmlns:r.svg,"xlink:href":L,preserveAspectRatio:"none",x:0,y:0,width:b.style.width,height:b.style.height})})},W.updateFx=t(4305).updateFx},13838:function(q,W,t){"use strict";var A=t(41940),g=t(22399),i=t(79952).P,P=t(1426).extendFlat,C=t(44467).templatedArray,u=t(12663).descriptionWithDates,y=t(50606).ONEDAY,e=t(85555),r=e.HOUR_PATTERN,l=e.WEEKDAY_PATTERN,a={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},s=P({},a,{values:a.values.slice().concat(["sync"])});function c(S){return{valType:"integer",min:0,dflt:S?5:0,editType:"ticks"}}var f={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},m={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},h={valType:"data_array",editType:"ticks"},w={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function p(S){var T={valType:"number",min:0,editType:"ticks"};return S||(T.dflt=5),T}function o(S){var T={valType:"number",min:0,editType:"ticks"};return S||(T.dflt=1),T}var v={valType:"color",dflt:g.defaultLine,editType:"ticks"},M={valType:"color",dflt:g.lightLine,editType:"ticks"};function b(S){var T={valType:"number",min:0,editType:"ticks"};return S||(T.dflt=1),T}var L=P({},i,{editType:"ticks"}),x={valType:"boolean",editType:"ticks"};q.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:g.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:A({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[e.idRegex.x.toString(),e.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[e.idRegex.x.toString(),e.idRegex.y.toString()],editType:"calc"},rangebreaks:C("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[l,r,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:y},editType:"calc"}),tickmode:s,nticks:c(),tick0:f,dtick:m,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:h,ticktext:{valType:"data_array",editType:"ticks"},ticks:w,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:p(),tickwidth:o(),tickcolor:v,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:P({},i,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:A({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:u("tick label")},tickformatstops:C("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:u("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:g.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:x,gridcolor:M,gridwidth:b(),griddash:L,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:g.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:g.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",e.idRegex.x.toString(),e.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",e.idRegex.x.toString(),e.idRegex.y.toString()],editType:"plot"},minor:{tickmode:a,nticks:c("minor"),tick0:f,dtick:m,tickvals:h,ticks:w,ticklen:p("minor"),tickwidth:o("minor"),tickcolor:v,gridcolor:M,gridwidth:b("minor"),griddash:L,showgrid:x,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:A({editType:"ticks"})}}},86763:function(q,W,t){"use strict";var A=t(71828),g=t(7901),i=t(23469).isUnifiedHover,P=t(98212),C=t(44467),u=t(10820),y=t(13838),e=t(951),r=t(71453),l=t(99082),a=t(52830),s=t(41675),c=s.id2name,f=s.name2id,m=t(85555).AX_ID_PATTERN,h=t(73972),w=h.traceIs,p=h.getComponentMethod;function o(v,M,b){Array.isArray(v[M])?v[M].push(b):v[M]=[b]}q.exports=function(M,b,L){var B,z,x=b.autotypenumbers,S={},T={},n={},E={},d={},F={},D={},N={},k={},O={};for(B=0;B<L.length;B++){var U=L[B];if(w(U,"cartesian")||w(U,"gl2d")){var H,J;if(U.xaxis)H=c(U.xaxis),o(S,H,U);else if(U.xaxes)for(z=0;z<U.xaxes.length;z++)o(S,c(U.xaxes[z]),U);if(U.yaxis)J=c(U.yaxis),o(S,J,U);else if(U.yaxes)for(z=0;z<U.yaxes.length;z++)o(S,c(U.yaxes[z]),U);"funnel"===U.type?"h"===U.orientation?(H&&(T[H]=!0),J&&(D[J]=!0)):J&&(n[J]=!0):"image"===U.type?(J&&(N[J]=!0),H&&(N[H]=!0)):(J&&(d[J]=!0,F[J]=!0),(!w(U,"carpet")||"carpet"===U.type&&!U._cheater)&&H&&(E[H]=!0)),"carpet"===U.type&&U._cheater&&H&&(T[H]=!0),w(U,"2dMap")&&(k[H]=!0,k[J]=!0),w(U,"oriented")&&(O["h"===U.orientation?J:H]=!0)}}var it=b._subplots,ut=it.xaxis,Q=it.yaxis,j=A.simpleMap(ut,c),Z=A.simpleMap(Q,c),G=j.concat(Z),K=g.background;ut.length&&Q.length&&(K=A.coerce(M,b,u,"plot_bgcolor"));var $,X,rt,et,st,at=g.combine(K,b.paper_bgcolor);function dt(){st._traceIndices=(S[$]||[]).map(function(pt){return pt._expandedIndex}),st._annIndices=[],st._shapeIndices=[],st._selectionIndices=[],st._imgIndices=[],st._subplotsWith=[],st._counterAxes=[],st._name=st._attr=$,st._id=X}function bt(ft,pt){return A.coerce(et,st,y,ft,pt)}function gt(ft,pt){return A.coerce2(et,st,y,ft,pt)}function Lt(ft){return"x"===ft?Q:ut}function It(ft,pt){for(var kt="x"===ft?j:Z,Zt=[],ee=0;ee<kt.length;ee++){var se=kt[ee];se!==pt&&!(M[se]||{}).overlaying&&Zt.push(f(se))}return Zt}var Mt={x:Lt("x"),y:Lt("y")},xt=Mt.x.concat(Mt.y),At={},Gt=[];function Wt(){var ft=et.matches;m.test(ft)&&-1===xt.indexOf(ft)&&(At[ft]=et.type,Gt=Object.keys(At))}var Pt=P(M,b),Vt=i(Pt);for(B=0;B<G.length;B++){X=f($=G[B]),rt=$.charAt(0),A.isPlainObject(M[$])||(M[$]={}),et=M[$],st=C.newContainer(b,$,rt+"axis"),dt();var Bt={hasMinor:!0,letter:rt,font:b.font,outerTicks:k[$],showGrid:!O[$],data:S[$]||[],bgColor:at,calendar:b.calendar,automargin:!0,visibleDflt:"x"===rt&&!E[$]&&T[$]||"y"===rt&&!d[$]&&n[$],reverseDflt:"y"===rt&&(!F[$]&&D[$]||N[$]),autotypenumbersDflt:x,splomStash:((b._splomAxes||{})[rt]||{})[X]};bt("uirevision",b.uirevision),e(et,st,bt,Bt),r(et,st,bt,Bt,b);var Ot=Vt&&rt===Pt.charAt(0),qt=gt("spikecolor",Vt?st.color:void 0),ie=gt("spikethickness",Vt?1.5:void 0),oe=gt("spikedash",Vt?"dot":void 0),pe=gt("spikemode",Vt?"across":void 0),de=gt("spikesnap");bt("showspikes",!!(Ot||qt||ie||oe||pe||de))||(delete st.spikecolor,delete st.spikethickness,delete st.spikedash,delete st.spikemode,delete st.spikesnap);var Kt=c(et.overlaying),Et=[0,1];if(void 0!==b[Kt]){var St=c(b[Kt].anchor);void 0!==b[St]&&(Et=b[St].domain)}a(et,st,bt,{letter:rt,counterAxes:Mt[rt],overlayableAxes:It(rt,$),grid:b.grid,overlayingDomain:Et}),bt("title.standoff"),Wt(),st._input=et}for(B=0;B<Gt.length;){X=Gt[B++],rt=($=c(X)).charAt(0),A.isPlainObject(M[$])||(M[$]={}),et=M[$],st=C.newContainer(b,$,rt+"axis"),dt();var Dt={letter:rt,font:b.font,outerTicks:k[$],showGrid:!O[$],data:[],bgColor:at,calendar:b.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:x,splomStash:((b._splomAxes||{})[rt]||{})[X]};bt("uirevision",b.uirevision),st.type=At[X]||"linear",r(et,st,bt,Dt,b),a(et,st,bt,{letter:rt,counterAxes:Mt[rt],overlayableAxes:It(rt,$),grid:b.grid}),bt("fixedrange"),Wt(),st._input=et}var Ft=p("rangeslider","handleDefaults"),Nt=p("rangeselector","handleDefaults");for(B=0;B<j.length;B++)et=M[$=j[B]],st=b[$],Ft(M,b,$),"date"===st.type&&Nt(et,st,b,Z,st.calendar),bt("fixedrange");for(B=0;B<Z.length;B++){et=M[$=Z[B]];var Rt=b[c((st=b[$]).anchor)];bt("fixedrange",p("rangeslider","isVisible")(Rt))}l.handleDefaults(M,b,{axIds:xt.concat(Gt).sort(s.idSort),axHasImage:N})}},92128:function(q,W,t){"use strict";var A=t(84267).mix,g=t(22399),i=t(71828);q.exports=function(C,u,y,e){var r=(e=e||{}).dfltColor;function l(n,E){return i.coerce2(C,u,e.attributes,n,E)}var a=l("linecolor",r),s=l("linewidth");y("showline",e.showLine||!!a||!!s)||(delete u.linecolor,delete u.linewidth);var m=l("gridcolor",A(r,e.bgColor,e.blend||g.lightFraction).toRgbString()),h=l("gridwidth"),w=l("griddash");if(y("showgrid",e.showGrid||!!m||!!h||!!w)||(delete u.gridcolor,delete u.gridwidth,delete u.griddash),e.hasMinor){var v=l("minor.gridcolor",A(u.gridcolor,e.bgColor,67).toRgbString()),M=l("minor.gridwidth",u.gridwidth||1),b=l("minor.griddash",u.griddash||"solid");y("minor.showgrid",!!v||!!M||!!b)||(delete u.minor.gridcolor,delete u.minor.gridwidth,delete u.minor.griddash)}if(!e.noZeroLine){var x=l("zerolinecolor",r),S=l("zerolinewidth");y("zeroline",e.showGrid||!!x||!!S)||(delete u.zerolinecolor,delete u.zerolinewidth)}}},52830:function(q,W,t){"use strict";var A=t(92770),g=t(71828);q.exports=function(P,C,u,y){var c,f,m,h,w,p,e=y.counterAxes||[],r=y.overlayableAxes||[],l=y.letter,a=y.grid,s=y.overlayingDomain;a&&(c=a._anchors[C._id],(f=a._domains[l][a._axisMap[C._id]])&&(m=a[l+"side"].split(" ")[0],h=a.domain[l]["right"===m||"top"===m?1:0])),f=f||[0,1],c=c||(A(P.position)?"free":e[0]||"free"),m=m||("x"===l?"bottom":"left"),h=h||0,w=0,p=!1;var o=g.coerce(P,C,{anchor:{valType:"enumerated",values:["free"].concat(e),dflt:c}},"anchor"),v=g.coerce(P,C,{side:{valType:"enumerated",values:"x"===l?["bottom","top"]:["left","right"],dflt:m}},"side");"free"===o&&("y"===l&&(u("autoshift")&&(h="left"===v?s[0]:s[1],p=!C.automargin||C.automargin,w="left"===v?-3:3),u("shift",w)),u("position",h)),u("automargin",p);var b=!1;if(r.length&&(b=g.coerce(P,C,{overlaying:{valType:"enumerated",values:[!1].concat(r),dflt:!1}},"overlaying")),!b){var L=u("domain",f);L[0]>L[1]-.000244140625&&(C.domain=f),g.noneOrAll(P.domain,C.domain,f),"sync"===C.tickmode&&(C.tickmode="auto")}return u("layer"),C}},89426:function(q,W,t){"use strict";var A=t(59652);q.exports=function(i,P,C,u,y){y||(y={});var e=y.tickSuffixDflt,r=A(i);C("tickprefix")&&C("showtickprefix",r),C("ticksuffix",e)&&C("showticksuffix",r)}},23608:function(q,W,t){"use strict";var A=t(23074);q.exports=function(i,P,C,u){var e=P.type||(P._template||{}).type||"-";C("minallowed"),C("maxallowed");var l,r=C("range");r||!u.noInsiderange&&"log"!==e&&((l=C("insiderange"))&&(null===l[0]||null===l[1])&&(P.insiderange=!1,l=void 0),l&&(r=C("range",l)));var c,a=P.getAutorangeDflt(r,u),s=C("autorange",a);r&&(null===r[0]&&null===r[1]||(null===r[0]||null===r[1])&&("reversed"===s||!0===s)||null!==r[0]&&("min"===s||"max reversed"===s)||null!==r[1]&&("max"===s||"min reversed"===s))&&(r=void 0,delete P.range,P.autorange=!0,c=!0),c||(s=C("autorange",a=P.getAutorangeDflt(r,u))),s&&(A(C,s,r),("linear"===e||"-"===e)&&C("rangemode")),P.cleanRange()}},42449:function(q,W,t){"use strict";var A=t(18783).FROM_BL;q.exports=function(i,P,C){void 0===C&&(C=A[i.constraintoward||"center"]);var u=[i.r2l(i.range[0]),i.r2l(i.range[1])],y=u[0]+(u[1]-u[0])*C;i.range=i._input.range=[i.l2r(y+(u[0]-y)*P),i.l2r(y+(u[1]-y)*P)],i.setScale()}},21994:function(q,W,t){"use strict";var A=t(39898),g=t(84096).g0,i=t(71828),P=i.numberFormat,C=t(92770),u=i.cleanNumber,y=i.ms2DateTime,e=i.dateTime2ms,r=i.ensureNumber,l=i.isArrayOrTypedArray,a=t(50606),s=a.FP_SAFE,c=a.BADNUM,f=a.LOG_CLIP,m=a.ONEWEEK,h=a.ONEDAY,w=a.ONEHOUR,p=a.ONEMIN,o=a.ONESEC,v=t(41675),M=t(85555),b=M.HOUR_PATTERN,L=M.WEEKDAY_PATTERN;function x(T){return Math.pow(10,T)}function S(T){return null!=T}q.exports=function(n,E){E=E||{};var d=n._id||"x",F=d.charAt(0);function D(G,K){if(G>0)return Math.log(G)/Math.LN10;if(G<=0&&K&&n.range&&2===n.range.length){var at=n.range[0],$=n.range[1];return.5*(at+$-2*f*Math.abs(at-$))}return c}function N(G,K,at,$){if(($||{}).msUTC&&C(G))return+G;var X=e(G,at||n.calendar);if(X===c){if(!C(G))return c;G=+G;var rt=Math.floor(10*i.mod(G+.05,1)),et=Math.round(G-rt/10);X=e(new Date(et))+rt/10}return X}function k(G,K,at){return y(G,K,at||n.calendar)}function O(G){return n._categories[Math.round(G)]}function B(G){if(S(G)){if(void 0===n._categoriesMap&&(n._categoriesMap={}),void 0!==n._categoriesMap[G])return n._categoriesMap[G];n._categories.push("number"==typeof G?String(G):G);var K=n._categories.length-1;return n._categoriesMap[G]=K,K}return c}function U(G){if(n._categoriesMap)return n._categoriesMap[G]}function H(G){var K=U(G);return void 0!==K?K:C(G)?+G:void 0}function J(G){return C(G)?+G:U(G)}function nt(G,K,at){return A.round(at+K*G,2)}function it(G,K,at){return(G-at)/K}var ut=function(K){return C(K)?nt(K,n._m,n._b):c},Q=function(G){return it(G,n._m,n._b)};if(n.rangebreaks){var j="y"===F;ut=function(G){if(!C(G))return c;var K=n._rangebreaks.length;if(!K)return nt(G,n._m,n._b);var at=j;n.range[0]>n.range[1]&&(at=!at);for(var $=at?-1:1,X=$*G,rt=0,et=0;et<K;et++){var st=$*n._rangebreaks[et].min,dt=$*n._rangebreaks[et].max;if(X<st)break;if(!(X>dt)){rt=X<(st+dt)/2?et:et+1;break}rt=et+1}var bt=n._B[rt]||0;return isFinite(bt)?nt(G,n._m2,bt):0},Q=function(G){var K=n._rangebreaks.length;if(!K)return it(G,n._m,n._b);for(var at=0,$=0;$<K&&!(G<n._rangebreaks[$].pmin);$++)G>n._rangebreaks[$].pmax&&(at=$+1);return it(G,n._m2,n._B[at])}}n.c2l="log"===n.type?D:r,n.l2c="log"===n.type?x:r,n.l2p=ut,n.p2l=Q,n.c2p="log"===n.type?function(G,K){return ut(D(G,K))}:ut,n.p2c="log"===n.type?function(G){return x(Q(G))}:Q,-1!==["linear","-"].indexOf(n.type)?(n.d2r=n.r2d=n.d2c=n.r2c=n.d2l=n.r2l=u,n.c2d=n.c2r=n.l2d=n.l2r=r,n.d2p=n.r2p=function(G){return n.l2p(u(G))},n.p2d=n.p2r=Q,n.cleanPos=r):"log"===n.type?(n.d2r=n.d2l=function(G,K){return D(u(G),K)},n.r2d=n.r2c=function(G){return x(u(G))},n.d2c=n.r2l=u,n.c2d=n.l2r=r,n.c2r=D,n.l2d=x,n.d2p=function(G,K){return n.l2p(n.d2r(G,K))},n.p2d=function(G){return x(Q(G))},n.r2p=function(G){return n.l2p(u(G))},n.p2r=Q,n.cleanPos=r):"date"===n.type?(n.d2r=n.r2d=i.identity,n.d2c=n.r2c=n.d2l=n.r2l=N,n.c2d=n.c2r=n.l2d=n.l2r=k,n.d2p=n.r2p=function(G,K,at){return n.l2p(N(G,0,at))},n.p2d=n.p2r=function(G,K,at){return k(Q(G),K,at)},n.cleanPos=function(G){return i.cleanDate(G,c,n.calendar)}):"category"===n.type?(n.d2c=n.d2l=B,n.r2d=n.c2d=n.l2d=O,n.d2r=n.d2l_noadd=H,n.r2c=function(G){var K=J(G);return void 0!==K?K:n.fraction2r(.5)},n.l2r=n.c2r=r,n.r2l=J,n.d2p=function(G){return n.l2p(n.r2c(G))},n.p2d=function(G){return O(Q(G))},n.r2p=n.d2p,n.p2r=Q,n.cleanPos=function(G){return"string"==typeof G&&""!==G?G:r(G)}):"multicategory"===n.type&&(n.r2d=n.c2d=n.l2d=O,n.d2r=n.d2l_noadd=H,n.r2c=function(G){var K=H(G);return void 0!==K?K:n.fraction2r(.5)},n.r2c_just_indices=U,n.l2r=n.c2r=r,n.r2l=H,n.d2p=function(G){return n.l2p(n.r2c(G))},n.p2d=function(G){return O(Q(G))},n.r2p=n.d2p,n.p2r=Q,n.cleanPos=function(G){return Array.isArray(G)||"string"==typeof G&&""!==G?G:r(G)},n.setupMultiCategory=function(G){var at,$,K=n._traceIndices,X=n._matchGroup;if(X&&0===n._categories.length)for(var rt in X)if(rt!==d){var et=E[v.id2name(rt)];K=K.concat(et._traceIndices)}var st=[[0,{}],[0,{}]],dt=[];for(at=0;at<K.length;at++){var bt=G[K[at]];if(F in bt){var gt=bt[F],Lt=bt._length||i.minRowLength(gt);if(l(gt[0])&&l(gt[1]))for($=0;$<Lt;$++){var It=gt[0][$],Mt=gt[1][$];S(It)&&S(Mt)&&(dt.push([It,Mt]),It in st[0][1]||(st[0][1][It]=st[0][0]++),Mt in st[1][1]||(st[1][1][Mt]=st[1][0]++))}}}for(dt.sort(function(xt,At){var Gt=st[0][1],Wt=Gt[xt[0]]-Gt[At[0]];if(Wt)return Wt;var Pt=st[1][1];return Pt[xt[1]]-Pt[At[1]]}),at=0;at<dt.length;at++)B(dt[at])}),n.fraction2r=function(G){var K=n.r2l(n.range[0]),at=n.r2l(n.range[1]);return n.l2r(K+G*(at-K))},n.r2fraction=function(G){var K=n.r2l(n.range[0]),at=n.r2l(n.range[1]);return(n.r2l(G)-K)/(at-K)},n.limitRange=function(G){var K=n.minallowed,at=n.maxallowed;if(void 0!==K||void 0!==at){G||(G="range");var $=i.nestedProperty(n,G).get(),X=i.simpleMap($,n.r2l),rt=X[1]<X[0];rt&&X.reverse();var et=i.simpleMap([K,at],n.r2l);void 0!==K&&X[0]<et[0]&&($[rt?1:0]=K),void 0!==at&&X[1]>et[1]&&($[rt?0:1]=at)}},n.cleanRange=function(G,K){n._cleanRange(G,K),n.limitRange(G)},n._cleanRange=function(G,K){K||(K={}),G||(G="range");var $,X,at=i.nestedProperty(n,G).get();if(X=(X="date"===n.type?i.dfltRange(n.calendar):"y"===F?M.DFLTRANGEY:"realaxis"===n._name?[0,1]:K.dfltRange||M.DFLTRANGEX).slice(),("tozero"===n.rangemode||"nonnegative"===n.rangemode)&&(X[0]=0),at&&2===at.length){var rt=null===at[0],et=null===at[1];for("date"===n.type&&!n.autorange&&(at[0]=i.cleanDate(at[0],c,n.calendar),at[1]=i.cleanDate(at[1],c,n.calendar)),$=0;$<2;$++)if("date"===n.type){if(!i.isDateTime(at[$],n.calendar)){n[G]=X;break}if(n.r2l(at[0])===n.r2l(at[1])){var st=i.constrain(n.r2l(at[0]),i.MIN_MS+1e3,i.MAX_MS-1e3);at[0]=n.l2r(st-1e3),at[1]=n.l2r(st+1e3);break}}else{if(!C(at[$])){if(rt||et||!C(at[1-$])){n[G]=X;break}at[$]=at[1-$]*($?10:.1)}if(at[$]<-s?at[$]=-s:at[$]>s&&(at[$]=s),at[0]===at[1]){var dt=Math.max(1,Math.abs(1e-6*at[0]));at[0]-=dt,at[1]+=dt}}}else i.nestedProperty(n,G).set(X)},n.setScale=function(G){var K=E._size;if(n.overlaying){var at=v.getFromId({_fullLayout:E},n.overlaying);n.domain=at.domain}var $=G&&n._r?"_r":"range",X=n.calendar;n.cleanRange($);var dt,bt,rt=n.r2l(n[$][0],X),et=n.r2l(n[$][1],X),st="y"===F;if(st?(n._offset=K.t+(1-n.domain[1])*K.h,n._length=K.h*(n.domain[1]-n.domain[0]),n._m=n._length/(rt-et),n._b=-n._m*et):(n._offset=K.l+n.domain[0]*K.w,n._length=K.w*(n.domain[1]-n.domain[0]),n._m=n._length/(et-rt),n._b=-n._m*rt),n._rangebreaks=[],n._lBreaks=0,n._m2=0,n._B=[],n.rangebreaks&&(n._rangebreaks=n.locateBreaks(Math.min(rt,et),Math.max(rt,et)),n._rangebreaks.length)){for(dt=0;dt<n._rangebreaks.length;dt++)bt=n._rangebreaks[dt],n._lBreaks+=Math.abs(bt.max-bt.min);var gt=st;rt>et&&(gt=!gt),gt&&n._rangebreaks.reverse();var Lt=gt?-1:1;for(n._m2=Lt*n._length/(Math.abs(et-rt)-n._lBreaks),n._B.push(-n._m2*(st?et:rt)),dt=0;dt<n._rangebreaks.length;dt++)n._B.push(n._B[n._B.length-1]-Lt*n._m2*((bt=n._rangebreaks[dt]).max-bt.min));for(dt=0;dt<n._rangebreaks.length;dt++)(bt=n._rangebreaks[dt]).pmin=ut(bt.min),bt.pmax=ut(bt.max)}if(!isFinite(n._m)||!isFinite(n._b)||n._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},n.maskBreaks=function(G){var at,$,X,rt,et,K=n.rangebreaks||[];K._cachedPatterns||(K._cachedPatterns=K.map(function(Gt){return Gt.enabled&&Gt.bounds?i.simpleMap(Gt.bounds,Gt.pattern?u:n.d2c):null})),K._cachedValues||(K._cachedValues=K.map(function(Gt){return Gt.enabled&&Gt.values?i.simpleMap(Gt.values,n.d2c).sort(i.sorterAsc):null}));for(var st=0;st<K.length;st++){var dt=K[st];if(dt.enabled)if(dt.bounds){switch($=(at=K._cachedPatterns[st])[0],X=at[1],dt.pattern){case L:rt=(et=new Date(G)).getUTCDay(),$>X&&(X+=7,rt<$&&(rt+=7));break;case b:rt=(et=new Date(G)).getUTCHours()+(et.getUTCMinutes()/60+et.getUTCSeconds()/3600+et.getUTCMilliseconds()/36e5),$>X&&(X+=24,rt<$&&(rt+=24));break;case"":rt=G}if(rt>=$&&rt<X)return c}else for(var xt=K._cachedValues[st],At=0;At<xt.length;At++)if(X=($=xt[At])+dt.dvalue,G>=$&&G<X)return c}return G},n.locateBreaks=function(G,K){var at,$,X,rt,et=[];if(!n.rangebreaks)return et;var st=n.rangebreaks.slice().sort(function(Pt,Vt){return Pt.pattern===L&&Vt.pattern===b?-1:Vt.pattern===L&&Pt.pattern===b?1:0}),dt=function(Pt,Vt){if((Pt=i.constrain(Pt,G,K))!==(Vt=i.constrain(Vt,G,K))){for(var te=!0,Qt=0;Qt<et.length;Qt++){var Bt=et[Qt];Pt<Bt.max&&Vt>=Bt.min&&(Pt<Bt.min&&(Bt.min=Pt),Vt>Bt.max&&(Bt.max=Vt),te=!1)}te&&et.push({min:Pt,max:Vt})}};for(at=0;at<st.length;at++){var bt=st[at];if(bt.enabled)if(bt.bounds){var gt=G,Lt=K;bt.pattern&&(gt=Math.floor(gt)),X=($=i.simpleMap(bt.bounds,bt.pattern?u:n.r2l))[0],rt=$[1];var Mt,xt,It=new Date(gt);switch(bt.pattern){case L:xt=m,Mt=(rt-X+(rt<X?7:0))*h,gt+=X*h-(It.getUTCDay()*h+It.getUTCHours()*w+It.getUTCMinutes()*p+It.getUTCSeconds()*o+It.getUTCMilliseconds());break;case b:xt=h,Mt=(rt-X+(rt<X?24:0))*w,gt+=X*w-(It.getUTCHours()*w+It.getUTCMinutes()*p+It.getUTCSeconds()*o+It.getUTCMilliseconds());break;default:gt=Math.min($[0],$[1]),Mt=xt=(Lt=Math.max($[0],$[1]))-gt}for(var At=gt;At<Lt;At+=xt)dt(At,At+Mt)}else for(var Gt=i.simpleMap(bt.values,n.d2c),Wt=0;Wt<Gt.length;Wt++)dt(X=Gt[Wt],rt=X+bt.dvalue)}return et.sort(function(Pt,Vt){return Pt.min-Vt.min}),et},n.makeCalcdata=function(G,K,at){var $,X,rt,et,st=n.type,dt="date"===st&&G[K+"calendar"];if(K in G){if($=G[K],et=G._length||i.minRowLength($),i.isTypedArray($)&&("linear"===st||"log"===st)){if(et===$.length)return $;if($.subarray)return $.subarray(0,et)}if("multicategory"===st)return function z(G,K){for(var at=new Array(K),$=0;$<K;$++)at[$]=U([(G[0]||[])[$],(G[1]||[])[$]]);return at}($,et);for(X=new Array(et),rt=0;rt<et;rt++)X[rt]=n.d2c($[rt],0,dt,at)}else{var bt=K+"0"in G?n.d2c(G[K+"0"],0,dt):0,gt=G["d"+K]?Number(G["d"+K]):1;for($=G[{x:"y",y:"x"}[K]],et=G._length||$.length,X=new Array(et),rt=0;rt<et;rt++)X[rt]=bt+rt*gt}if(n.rangebreaks)for(rt=0;rt<et;rt++)X[rt]=n.maskBreaks(X[rt]);return X},n.isValidRange=function(G,K){return Array.isArray(G)&&2===G.length&&(K&&null===G[0]||C(n.r2l(G[0])))&&(K&&null===G[1]||C(n.r2l(G[1])))},n.getAutorangeDflt=function(G,K){var at=!n.isValidRange(G,"nullOk");return at&&K&&K.reverseDflt?at="reversed":G&&(null===G[0]&&null===G[1]?at=!0:null===G[0]&&null!==G[1]?at="min":null!==G[0]&&null===G[1]&&(at="max")),at},n.isReversed=function(){var G=n.autorange;return"reversed"===G||"min reversed"===G||"max reversed"===G},n.isPtWithinRange=function(G,K){var at=n.c2l(G[F],null,K),$=n.r2l(n.range[0]),X=n.r2l(n.range[1]);return $<X?$<=at&&at<=X:X<=at&&at<=$},n._emptyCategories=function(){n._categories=[],n._categoriesMap={}},n.clearCalc=function(){var G=n._matchGroup;if(G){var K=null,at=null;for(var $ in G){var X=E[v.id2name($)];if(X._categories){K=X._categories,at=X._categoriesMap;break}}K&&at?(n._categories=K,n._categoriesMap=at):n._emptyCategories()}else n._emptyCategories();if(n._initialCategories)for(var rt=0;rt<n._initialCategories.length;rt++)B(n._initialCategories[rt])},n.sortByInitialCategories=function(){var G=[];if(n._emptyCategories(),n._initialCategories)for(var K=0;K<n._initialCategories.length;K++)B(n._initialCategories[K]);G=G.concat(n._traceIndices);var at=n._matchGroup;for(var $ in at)if(d!==$){var X=E[v.id2name($)];X._categories=n._categories,X._categoriesMap=n._categoriesMap,G=G.concat(X._traceIndices)}return G};var Z=E._d3locale;"date"===n.type&&(n._dateFormat=Z?Z.timeFormat:g,n._extraFormat=E._extraFormat),n._separators=E.separators,n._numFormat=Z?Z.numberFormat:P,delete n._minDtick,delete n._forceTick0}},59652:function(q){"use strict";q.exports=function(t){var g=["showexponent","showtickprefix","showticksuffix"].filter(function(P){return void 0!==t[P]});if(g.every(function(P){return t[P]===t[g[0]]})||1===g.length)return t[g[0]]}},96115:function(q,W,t){"use strict";var A=t(71828),g=t(7901).contrast,i=t(13838),P=t(59652),C=t(85501);function u(y,e){function r(a,s){return A.coerce(y,e,i.tickformatstops,a,s)}r("enabled")&&(r("dtickrange"),r("value"))}q.exports=function(e,r,l,a,s){s||(s={});var c=l("labelalias");A.isPlainObject(c)||delete r.labelalias;var f=P(e);if(l("showticklabels")){var h=s.font||{},w=r.color,o=-1!==(r.ticklabelposition||"").indexOf("inside")?g(s.bgColor):w&&w!==i.color.dflt?w:h.color;if(A.coerceFont(l,"tickfont",{family:h.family,size:h.size,color:o}),!s.noTicklabelstep&&"multicategory"!==a&&"log"!==a&&l("ticklabelstep"),s.noAng||l("tickangle"),"category"!==a){var v=l("tickformat");C(e,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:u}),r.tickformatstops.length||delete r.tickformatstops,!s.noExp&&!v&&"date"!==a&&(l("showexponent",f),l("exponentformat"),l("minexponent"),l("separatethousands"))}}}},38701:function(q,W,t){"use strict";var A=t(71828),g=t(13838);q.exports=function(P,C,u,y){var e=y.isMinor,r=e?P.minor||{}:P,l=e?C.minor:C,a=e?g.minor:g,s=e?"minor.":"",c=A.coerce2(r,l,a,"ticklen",e?.6*(C.ticklen||5):void 0),f=A.coerce2(r,l,a,"tickwidth",e?C.tickwidth||1:void 0),m=A.coerce2(r,l,a,"tickcolor",(e?C.tickcolor:void 0)||l.color);u(s+"ticks",!e&&y.outerTicks||c||f||m?"outside":"")||(delete l.ticklen,delete l.tickwidth,delete l.tickcolor)}},26218:function(q,W,t){"use strict";var A=t(66287),g=t(71828).isArrayOrTypedArray;q.exports=function(P,C,u,y,e){e||(e={});var r=e.isMinor,l=r?P.minor||{}:P,a=r?C.minor:C,s=r?"minor.":"";function c(M){var b=l[M];return void 0!==b?b:(a._template||{})[M]}var f=c("tick0"),m=c("dtick"),h=c("tickvals"),p=u(s+"tickmode",g(h)?"array":m?"linear":"auto");if("auto"===p||"sync"===p)u(s+"nticks");else if("linear"===p){var o=a.dtick=A.dtick(m,y);a.tick0=A.tick0(f,y,C.calendar,o)}else"multicategory"!==y&&(void 0===u(s+"tickvals")?a.tickmode="auto":r||u("ticktext"))}},66847:function(q,W,t){"use strict";var A=t(39898),g=t(73972),i=t(71828),P=t(91424),C=t(89298);q.exports=function(y,e,r,l){var a=y._fullLayout;if(0!==e.length){var f;l&&(f=l());var w,p,o,v=A.ease(r.easing);return y._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(o),o=null,function h(){for(var b={},L=0;L<e.length;L++){var x=e[L],T=x.plotinfo.yaxis;x.xr0&&(b[x.plotinfo.xaxis._name+".range"]=x.xr0.slice()),x.yr0&&(b[T._name+".range"]=x.yr0.slice())}return g.call("relayout",y,b).then(function(){for(var n=0;n<e.length;n++)s(e[n].plotinfo)})}()}),w=Date.now(),o=window.requestAnimationFrame(function M(){p=Date.now();for(var b=Math.min(1,(p-w)/r.duration),L=v(b),x=0;x<e.length;x++)c(e[x],L);p-w>r.duration?(function m(){for(var b={},L=0;L<e.length;L++){var x=e[L],T=x.plotinfo.yaxis;x.xr1&&(b[x.plotinfo.xaxis._name+".range"]=x.xr1.slice()),x.yr1&&(b[T._name+".range"]=x.yr1.slice())}return f&&f(),g.call("relayout",y,b).then(function(){for(var n=0;n<e.length;n++)s(e[n].plotinfo)})}(),o=window.cancelAnimationFrame(M)):o=window.requestAnimationFrame(M)}),Promise.resolve()}function s(b){var L=b.xaxis,x=b.yaxis;a._defs.select("#"+b.clipId+"> rect").call(P.setTranslate,0,0).call(P.setScale,1,1),b.plot.call(P.setTranslate,L._offset,x._offset).call(P.setScale,1,1);var S=b.plot.selectAll(".scatterlayer .trace");S.selectAll(".point").call(P.setPointGroupScale,1,1),S.selectAll(".textpoint").call(P.setTextPointsScale,1,1),S.call(P.hideOutsideRangePoints,b)}function c(b,L){var x=b.plotinfo,S=x.xaxis,T=x.yaxis,n=S._length,E=T._length,d=!!b.xr1,F=!!b.yr1,D=[];if(d){var N=i.simpleMap(b.xr0,S.r2l),k=i.simpleMap(b.xr1,S.r2l),O=N[1]-N[0],B=k[1]-k[0];D[0]=(N[0]*(1-L)+L*k[0]-N[0])/(N[1]-N[0])*n,D[2]=n*(1-L+L*B/O),S.range[0]=S.l2r(N[0]*(1-L)+L*k[0]),S.range[1]=S.l2r(N[1]*(1-L)+L*k[1])}else D[0]=0,D[2]=n;if(F){var z=i.simpleMap(b.yr0,T.r2l),U=i.simpleMap(b.yr1,T.r2l),H=z[1]-z[0],J=U[1]-U[0];D[1]=(z[1]*(1-L)+L*U[1]-z[1])/(z[0]-z[1])*E,D[3]=E*(1-L+L*J/H),T.range[0]=S.l2r(z[0]*(1-L)+L*U[0]),T.range[1]=T.l2r(z[1]*(1-L)+L*U[1])}else D[1]=0,D[3]=E;C.drawOne(y,S,{skipTitle:!0}),C.drawOne(y,T,{skipTitle:!0}),C.redrawComponents(y,[S._id,T._id]);var nt=d?n/D[2]:1,it=F?E/D[3]:1,G=S._offset-(d?D[0]/D[2]*n:0),K=T._offset-(F?D[1]/D[3]*E:0);x.clipRect.call(P.setTranslate,d?D[0]:0,F?D[1]:0).call(P.setScale,1/nt,1/it),x.plot.call(P.setTranslate,G,K).call(P.setScale,nt,it),P.setPointGroupScale(x.zoomScalePts,1/nt,1/it),P.setTextPointsScale(x.zoomScaleTxt,1/nt,1/it)}C.redrawComponents(y)}},951:function(q,W,t){"use strict";var A=t(73972).traceIs,g=t(4322);function i(y,e){if("-"===y.type){var a,r=y._id,l=r.charAt(0);-1!==r.indexOf("scene")&&(r=l);var s=function P(y,e,r){for(var l=0;l<y.length;l++){var a=y[l];if("splom"===a.type&&a._length>0&&(a["_"+r+"axes"]||{})[e])return a;if((a[r+"axis"]||r)===e){if(u(a,r))return a;if((a[r]||[]).length||a[r+"0"])return a}}}(e,r,l);if(s){if("histogram"===s.type&&l==={v:"y",h:"x"}[s.orientation||"v"])return void(y.type="linear");var c=l+"calendar",f=s[c],m={noMultiCategory:!A(s,"cartesian")||A(s,"noMultiCategory")};if("box"===s.type&&s._hasPreCompStats&&l==={h:"x",v:"y"}[s.orientation||"v"]&&(m.noMultiCategory=!0),m.autotypenumbers=y.autotypenumbers,u(s,l)){var h=C(s),w=[];for(a=0;a<e.length;a++){var p=e[a];!A(p,"box-violin")||(p[l+"axis"]||l)!==r||(w.push(void 0!==p[h]?p[h][0]:void 0!==p.name?p.name:"text"),p[c]!==f&&(f=void 0))}y.type=g(w,f,m)}else if("splom"===s.type){var v=s.dimensions[s._axesDim[r]];v.visible&&(y.type=g(v.values,f,m))}else y.type=g(s[l]||[s[l+"0"]],f,m)}}}function C(y){return{v:"x",h:"y"}[y.orientation||"v"]}function u(y,e){var r=C(y),l=A(y,"box-violin"),a=A(y._fullInput||{},"candlestick");return l&&!a&&e===r&&void 0===y[r]&&void 0===y[r+"0"]}q.exports=function(e,r,l,a){l("autotypenumbers",a.autotypenumbersDflt),"-"===l("type",(a.splomStash||{}).type)&&(i(r,a.data),"-"===r.type?r.type="linear":e.type=r.type)}},31137:function(q,W,t){"use strict";var A=t(73972),g=t(71828);function i(e,r,l){var a,s,c,f=!1;if("data"===r.type)a=e._fullData[null!==r.traces?r.traces[0]:0];else{if("layout"!==r.type)return!1;a=e._fullLayout}return s=g.nestedProperty(a,r.prop).get(),(c=l[r.type]=l[r.type]||{}).hasOwnProperty(r.prop)&&c[r.prop]!==s&&(f=!0),c[r.prop]=s,{changed:f,value:s}}function C(e,r){var l=[],a=r[0],s={};if("string"==typeof a)s[a]=r[1];else{if(!g.isPlainObject(a))return l;s=a}return y(s,function(c,f,m){l.push({type:"layout",prop:c,value:m})},"",0),l}function u(e,r){var l,a,s,c,f=[];if(s=r[1],l=r[2],c={},"string"==typeof(a=r[0]))c[a]=s;else{if(!g.isPlainObject(a))return f;c=a,void 0===l&&(l=s)}return void 0===l&&(l=null),y(c,function(m,h,w){var p,o;if(Array.isArray(w)){o=w.slice();var v=Math.min(o.length,e.data.length);l&&(v=Math.min(v,l.length)),p=[];for(var M=0;M<v;M++)p[M]=l?l[M]:M}else o=w,p=l?l.slice():null;if(null===p)Array.isArray(o)&&(o=o[0]);else if(Array.isArray(p)){if(!Array.isArray(o)){var b=o;o=[];for(var L=0;L<p.length;L++)o[L]=b}o.length=Math.min(p.length,o.length)}f.push({type:"data",prop:m,traces:p,value:o})},"",0),f}function y(e,r,l,a){Object.keys(e).forEach(function(s){var c=e[s];if("_"!==s[0]){var f=l+(a>0?".":"")+s;g.isPlainObject(c)?y(c,r,f,a+1):r(f,s,c)}})}W.manageCommandObserver=function(e,r,l,a){var s={},c=!0;r&&r._commandObserver&&(s=r._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var f=W.hasSimpleAPICommandBindings(e,l,s.lookupTable);if(r&&r._commandObserver){if(f)return s;if(r._commandObserver.remove)return r._commandObserver.remove(),r._commandObserver=null,s}if(f){i(e,f,s.cache),s.check=function(){if(c){var p=i(e,f,s.cache);return p.changed&&a&&void 0!==s.lookupTable[p.value]&&(s.disable(),Promise.resolve(a({value:p.value,type:f.type,prop:f.prop,traces:f.traces,index:s.lookupTable[p.value]})).then(s.enable,s.enable)),p.changed}};for(var m=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],h=0;h<m.length;h++)e._internalOn(m[h],s.check);s.remove=function(){for(var w=0;w<m.length;w++)e._removeInternalListener(m[w],s.check)}}else g.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){c=!1},s.enable=function(){c=!0},r&&(r._commandObserver=s),s},W.hasSimpleAPICommandBindings=function(e,r,l){var a,c,s=r.length;for(a=0;a<s;a++){var f,m=r[a],h=m.method,w=m.args;if(Array.isArray(w)||(w=[]),!h)return!1;var p=W.computeAPICommandBindings(e,h,w);if(1!==p.length)return!1;if(c){if((f=p[0]).type!==c.type||f.prop!==c.prop)return!1;if(Array.isArray(c.traces)){if(!Array.isArray(f.traces))return!1;f.traces.sort();for(var o=0;o<c.traces.length;o++)if(c.traces[o]!==f.traces[o])return!1}else if(f.prop!==c.prop)return!1}else c=p[0],Array.isArray(c.traces)&&c.traces.sort();var v=(f=p[0]).value;if(Array.isArray(v)){if(1!==v.length)return!1;v=v[0]}l&&(l[v]=a)}return c},W.executeAPICommand=function(e,r,l){if("skip"===r)return Promise.resolve();var a=A.apiMethodRegistry[r],s=[e];Array.isArray(l)||(l=[]);for(var c=0;c<l.length;c++)s.push(l[c]);return a.apply(null,s).catch(function(f){return g.warn("API call to Plotly."+r+" rejected.",f),Promise.reject(f)})},W.computeAPICommandBindings=function(e,r,l){var a;switch(Array.isArray(l)||(l=[]),r){case"restyle":a=u(e,l);break;case"relayout":a=C(0,l);break;case"update":a=u(e,[l[0],l[2]]).concat(C(0,[l[1]]));break;case"animate":a=function P(e,r){return Array.isArray(r[0])&&1===r[0].length&&-1!==["string","number"].indexOf(typeof r[0][0])?[{type:"layout",prop:"_currentFrame",value:r[0][0].toString()}]:[]}(0,l);break;default:a=[]}return a}},27670:function(q,W,t){"use strict";var A=t(1426).extendFlat;W.Y=function(g,i){var P={valType:"info_array",editType:(g=g||{}).editType,items:[{valType:"number",min:0,max:1,editType:g.editType},{valType:"number",min:0,max:1,editType:g.editType}],dflt:[0,1]},e=(i=i||{},{x:A({},P,{}),y:A({},P,{}),editType:g.editType});return g.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:g.editType},e.column={valType:"integer",min:0,dflt:0,editType:g.editType}),e},W.c=function(g,i,P,C){var u=C&&C.x||[0,1],y=C&&C.y||[0,1],e=i.grid;if(e){var r=P("domain.column");void 0!==r&&(r<e.columns?u=e._domains.x[r]:delete g.domain.column);var l=P("domain.row");void 0!==l&&(l<e.rows?y=e._domains.y[l]:delete g.domain.row)}var a=P("domain.x",u),s=P("domain.y",y);a[0]<a[1]||(g.domain.x=u.slice()),s[0]<s[1]||(g.domain.y=y.slice())}},41940:function(q){"use strict";q.exports=function(W){var t=W.editType,A=W.colorEditType;void 0===A&&(A=t);var g={family:{valType:"string",noBlank:!0,strict:!0,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:A},editType:t};return W.autoSize&&(g.size.dflt="auto"),W.autoColor&&(g.color.dflt="auto"),W.arrayOk&&(g.family.arrayOk=!0,g.size.arrayOk=!0,g.color.arrayOk=!0),g}},31391:function(q){"use strict";q.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},78776:function(q,W){"use strict";W.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},W.axesNames=["lonaxis","lataxis"],W.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},W.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},W.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},W.clipPad=.001,W.precision=.1,W.landColor="#F0DC82",W.waterColor="#3399FF",W.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},W.sphereSVG={type:"Sphere"},W.fillLayers={ocean:1,land:1,lakes:1},W.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},W.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],W.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],W.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},69082:function(q,W,t){"use strict";var A=t(39898),g=t(27362),i=g.geoPath,P=g.geoDistance,C=t(65704),u=t(73972),y=t(71828),e=y.strTranslate,r=t(7901),l=t(91424),a=t(30211),s=t(74875),c=t(89298),f=t(71739).getAutoRange,m=t(28569),h=t(47322).prepSelect,w=t(47322).clearOutline,p=t(47322).selectOnClick,o=t(74455),v=t(78776),M=t(41327),b=t(90973),L=t(96892).zL;function x(d){this.id=d.id,this.graphDiv=d.graphDiv,this.container=d.container,this.topojsonURL=d.topojsonURL,this.isStatic=d.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var S=x.prototype;function E(d,F){var D=v.clipPad,N=d[0]+D,k=d[1]-D,O=F[0]+D,B=F[1]-D;N>0&&k<0&&(k+=360);var z=(k-N)/4;return{type:"Polygon",coordinates:[[[N,O],[N,B],[N+z,B],[N+2*z,B],[N+3*z,B],[k,B],[k,O],[k-z,O],[k-2*z,O],[k-3*z,O],[N,O]]]}}q.exports=function(F){return new x(F)},S.plot=function(d,F,D,N){var k=this;if(N)return k.update(d,F,!0);k._geoCalcData=d,k._fullLayout=F;var O=F[this.id],B=[],z=!1;for(var U in v.layerNameToAdjective)if("frame"!==U&&O["show"+U]){z=!0;break}for(var H=!1,J=0;J<d.length;J++){var nt=d[0][0].trace;nt._geo=k,nt.locationmode&&(z=!0);var it=nt.marker;if(it){var Q=it.angleref;(it.angle||"north"===Q||"previous"===Q)&&(H=!0)}}if(this._hasMarkerAngles=H,z){var j=b.getTopojsonName(O);(null===k.topojson||j!==k.topojsonName)&&(k.topojsonName=j,void 0===PlotlyGeoAssets.topojson[k.topojsonName]&&B.push(k.fetchTopojson()))}B=B.concat(M.fetchTraceGeoData(d)),D.push(new Promise(function(Z,G){Promise.all(B).then(function(){k.topojson=PlotlyGeoAssets.topojson[k.topojsonName],k.update(d,F),Z()}).catch(G)}))},S.fetchTopojson=function(){var d=this,F=b.getTopojsonPath(d.topojsonURL,d.topojsonName);return new Promise(function(D,N){A.json(F,function(k,O){if(k)return N(404===k.status?new Error(["plotly.js could not find topojson file at",F+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",F].join(" ")));PlotlyGeoAssets.topojson[d.topojsonName]=O,D()})})},S.update=function(d,F,D){var N=F[this.id];this.hasChoropleth=!1;for(var k=0;k<d.length;k++){var O=d[k],B=O[0].trace;"choropleth"===B.type&&(this.hasChoropleth=!0),!0===B.visible&&B._length>0&&B._module.calcGeoJSON(O,F)}if(!D){if(this.updateProjection(d,F))return;(!this.viewInitial||this.scope!==N.scope)&&this.saveViewInitial(N)}this.scope=N.scope,this.updateBaseLayers(F,N),this.updateDims(F,N),this.updateFx(F,N),s.generalUpdatePerTraceModule(this.graphDiv,this,d,N);var U=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=U.selectAll(".point"),this.dataPoints.text=U.selectAll("text"),this.dataPaths.line=U.selectAll(".js-line");var H=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=H.selectAll("path"),this._render()},S.updateProjection=function(d,F){var D=this.graphDiv,N=F[this.id],k=F._size,O=N.domain,B=N.projection,z=N.lonaxis,U=N.lataxis,H=z._ax,J=U._ax,nt=this.projection=function T(d){var F=d.projection,D=F.type,N=v.projNames[D];N="geo"+y.titleCase(N);for(var O=(g[N]||C[N])(),B=d._isSatellite?180*Math.acos(1/F.distance)/Math.PI:d._isClipped?v.lonaxisSpan[D]/2:null,z=["center","rotate","parallels","clipExtent"],U=function(nt){return nt?O:[]},H=0;H<z.length;H++){var J=z[H];"function"!=typeof O[J]&&(O[J]=U)}return O.isLonLatOverEdges=function(nt){if(null===O(nt))return!0;if(B){var it=O.rotate();return P(nt,[-it[0],-it[1]])>B*Math.PI/180}return!1},O.getPath=function(){return i().projection(O)},O.getBounds=function(nt){return O.getPath().bounds(nt)},O.precision(v.precision),d._isSatellite&&O.tilt(F.tilt).distance(F.distance),B&&O.clipAngle(B-v.clipPad),O}(N),it=[[k.l+k.w*O.x[0],k.t+k.h*(1-O.y[1])],[k.l+k.w*O.x[1],k.t+k.h*(1-O.y[0])]],ut=N.center||{},Q=B.rotation||{},j=z.range||[],Z=U.range||[];if(N.fitbounds){H._length=it[1][0]-it[0][0],J._length=it[1][1]-it[0][1],H.range=f(D,H),J.range=f(D,J);var G=(H.range[0]+H.range[1])/2,K=(J.range[0]+J.range[1])/2;if(N._isScoped)ut={lon:G,lat:K};else if(N._isClipped){ut={lon:G,lat:K},Q={lon:G,lat:K,roll:Q.roll};var at=B.type,$=v.lonaxisSpan[at]/2||180,X=v.lataxisSpan[at]/2||90;j=[G-$,G+$],Z=[K-X,K+X]}else ut={lon:G,lat:K},Q={lon:G,lat:Q.lat,roll:Q.roll}}nt.center([ut.lon-Q.lon,ut.lat-Q.lat]).rotate([-Q.lon,-Q.lat,Q.roll]).parallels(B.parallels);var rt=E(j,Z);nt.fitExtent(it,rt);var et=this.bounds=nt.getBounds(rt),st=this.fitScale=nt.scale(),dt=nt.translate();if(N.fitbounds){var bt=nt.getBounds(E(H.range,J.range)),gt=Math.min((et[1][0]-et[0][0])/(bt[1][0]-bt[0][0]),(et[1][1]-et[0][1])/(bt[1][1]-bt[0][1]));isFinite(gt)?nt.scale(gt*st):y.warn("Something went wrong during"+this.id+"fitbounds computations.")}else nt.scale(B.scale*st);var Lt=this.midPt=[(et[0][0]+et[1][0])/2,(et[0][1]+et[1][1])/2];if(nt.translate([dt[0]+(Lt[0]-dt[0]),dt[1]+(Lt[1]-dt[1])]).clipExtent(et),N._isAlbersUsa){var It=nt([ut.lon,ut.lat]),Mt=nt.translate();nt.translate([Mt[0]-(It[0]-Mt[0]),Mt[1]-(It[1]-Mt[1])])}},S.updateBaseLayers=function(d,F){var D=this,N=D.topojson,k=D.layers,O=D.basePaths;function B(it){return"lonaxis"===it||"lataxis"===it}function z(it){return Boolean(v.lineLayers[it])}function U(it){return Boolean(v.fillLayers[it])}var J=(this.hasChoropleth?v.layersForChoropleth:v.layers).filter(function(it){return z(it)||U(it)?F["show"+it]:!B(it)||F[it].showgrid}),nt=D.framework.selectAll(".layer").data(J,String);nt.exit().each(function(it){delete k[it],delete O[it],A.select(this).remove()}),nt.enter().append("g").attr("class",function(it){return"layer "+it}).each(function(it){var ut=k[it]=A.select(this);"bg"===it?D.bgRect=ut.append("rect").style("pointer-events","all"):B(it)?O[it]=ut.append("path").style("fill","none"):"backplot"===it?ut.append("g").classed("choroplethlayer",!0):"frontplot"===it?ut.append("g").classed("scatterlayer",!0):z(it)?O[it]=ut.append("path").style("fill","none").style("stroke-miterlimit",2):U(it)&&(O[it]=ut.append("path").style("stroke","none"))}),nt.order(),nt.each(function(it){var ut=O[it],Q=v.layerNameToAdjective[it];"frame"===it?ut.datum(v.sphereSVG):z(it)||U(it)?ut.datum(L(N,N.objects[it])):B(it)&&ut.datum(function n(d,F,D){var z,U,H,O=F[d],B=v.scopeDefaults[F.scope];"lonaxis"===d?(z=B.lonaxisRange,U=B.lataxisRange,H=function(K,at){return[K,at]}):"lataxis"===d&&(z=B.lataxisRange,U=B.lonaxisRange,H=function(K,at){return[at,K]});var J={type:"linear",range:[z[0],z[1]-1e-6],tick0:O.tick0,dtick:O.dtick};c.setConvert(J,D);var nt=c.calcTicks(J);!F.isScoped&&"lonaxis"===d&&nt.pop();for(var it=nt.length,ut=new Array(it),Q=0;Q<it;Q++)for(var j=nt[Q].x,Z=ut[Q]=[],G=U[0];G<U[1]+2.5;G+=2.5)Z.push(H(j,G));return{type:"MultiLineString",coordinates:ut}}(it,F,d)).call(r.stroke,F[it].gridcolor).call(l.dashLine,F[it].griddash,F[it].gridwidth),z(it)?ut.call(r.stroke,F[Q+"color"]).call(l.dashLine,"",F[Q+"width"]):U(it)&&ut.call(r.fill,F[Q+"color"])})},S.updateDims=function(d,F){var D=this.bounds,N=(F.framewidth||0)/2,k=D[0][0]-N,O=D[0][1]-N,B=D[1][0]-k+N,z=D[1][1]-O+N;l.setRect(this.clipRect,k,O,B,z),this.bgRect.call(l.setRect,k,O,B,z).call(r.fill,F.bgcolor),this.xaxis._offset=k,this.xaxis._length=B,this.yaxis._offset=O,this.yaxis._length=z},S.updateFx=function(d,F){var D=this,N=D.graphDiv,k=D.bgRect,O=d.dragmode,B=d.clickmode;if(!D.isStatic){var J={element:D.bgRect.node(),gd:N,plotinfo:{id:D.id,xaxis:D.xaxis,yaxis:D.yaxis,fillRangeItems:function(nt,it){it.isRect?(nt.range={})[D.id]=[U([it.xmin,it.ymin]),U([it.xmax,it.ymax])]:(nt.lassoPoints={})[D.id]=it.map(U)}},xaxes:[D.xaxis],yaxes:[D.yaxis],subplot:D.id,clickFn:function(nt){2===nt&&w(N)}};"pan"===O?(k.node().onmousedown=null,k.call(o(D,F)),k.on("dblclick.zoom",function z(){var nt=D.viewInitial,it={};for(var ut in nt)it[D.id+"."+ut]=nt[ut];u.call("_guiRelayout",N,it),N.emit("plotly_doubleclick",null)}),N._context._scrollZoom.geo||k.on("wheel.zoom",null)):("select"===O||"lasso"===O)&&(k.on(".zoom",null),J.prepFn=function(nt,it,ut){h(nt,it,ut,J,O)},m.init(J)),k.on("mousemove",function(){var nt=D.projection.invert(y.getPositionFromD3Event());if(!nt)return m.unhover(N,A.event);D.xaxis.p2c=function(){return nt[0]},D.yaxis.p2c=function(){return nt[1]},a.hover(N,A.event,D.id)}),k.on("mouseout",function(){N._dragging||m.unhover(N,A.event)}),k.on("click",function(){"select"!==O&&"lasso"!==O&&(B.indexOf("select")>-1&&p(A.event,N,[D.xaxis],[D.yaxis],D.id,J),B.indexOf("event")>-1&&a.click(N,A.event))})}function U(nt){return D.projection.invert([nt[0]+D.xaxis._offset,nt[1]+D.yaxis._offset])}},S.makeFramework=function(){var d=this,F=d.graphDiv,D=F._fullLayout,N="clip"+D._uid+d.id;d.clipDef=D._clips.append("clipPath").attr("id",N),d.clipRect=d.clipDef.append("rect"),d.framework=A.select(d.container).append("g").attr("class","geo "+d.id).call(l.setClipUrl,N,F),d.project=function(k){var O=d.projection(k);return O?[O[0]-d.xaxis._offset,O[1]-d.yaxis._offset]:[null,null]},d.xaxis={_id:"x",c2p:function(k){return d.project(k)[0]}},d.yaxis={_id:"y",c2p:function(k){return d.project(k)[1]}},d.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},c.setConvert(d.mockAxis,D)},S.saveViewInitial=function(d){var F=d.center||{},D=d.projection,N=D.rotation||{};this.viewInitial={fitbounds:d.fitbounds,"projection.scale":D.scale},y.extendFlat(this.viewInitial,d._isScoped?{"center.lon":F.lon,"center.lat":F.lat}:d._isClipped?{"projection.rotation.lon":N.lon,"projection.rotation.lat":N.lat}:{"center.lon":F.lon,"center.lat":F.lat,"projection.rotation.lon":N.lon})},S.render=function(d){this._hasMarkerAngles&&d?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},S._render=function(){var D,d=this.projection,F=d.getPath();function N(O){var B=d(O.lonlat);return B?e(B[0],B[1]):null}function k(O){return d.isLonLatOverEdges(O.lonlat)?"none":null}for(D in this.basePaths)this.basePaths[D].attr("d",F);for(D in this.dataPaths)this.dataPaths[D].attr("d",function(O){return F(O.geojson)});for(D in this.dataPoints)this.dataPoints[D].attr("display",k).attr("transform",N)}},44622:function(q,W,t){"use strict";var A=t(27659).AU,g=t(71828).counterRegex,i=t(69082),P="geo",C=g(P),u={};u[P]={valType:"subplotid",dflt:P,editType:"calc"},q.exports={attr:P,name:P,idRoot:P,idRegex:C,attrRegex:C,attributes:u,layoutAttributes:t(77519),supplyLayoutDefaults:t(82161),plot:function y(l){for(var a=l._fullLayout,s=l.calcdata,c=a._subplots[P],f=0;f<c.length;f++){var m=c[f],h=A(s,P,m),p=a[m]._subplot;p||(p=i({id:m,graphDiv:l,container:a._geolayer.node(),topojsonURL:l._context.topojsonURL,staticPlot:l._context.staticPlot}),a[m]._subplot=p),p.plot(h,a,l._promises)}},updateFx:function r(l){for(var a=l._fullLayout,s=a._subplots[P],c=0;c<s.length;c++){var f=a[s[c]];f._subplot.updateFx(a,f)}},clean:function e(l,a,s,c){for(var f=c._subplots[P]||[],m=0;m<f.length;m++){var h=f[m],w=c[h]._subplot;!a[h]&&w&&(w.framework.remove(),w.clipDef.remove())}}}},77519:function(q,W,t){"use strict";var A=t(22399),g=t(27670).Y,i=t(79952).P,P=t(78776),C=t(30962).overrideAll,u=t(78607),y={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:A.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:i};(q.exports=C({domain:g({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:u(P.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:u(P.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:A.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:P.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:P.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:P.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:P.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:A.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:A.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:A.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:A.background},lonaxis:y,lataxis:y},"plot","from-root")).uirevision={valType:"any",editType:"none"}},82161:function(q,W,t){"use strict";var A=t(71828),g=t(49119),i=t(27659).NG,P=t(78776),C=t(77519),u=P.axesNames;function y(e,r,l,a){var c=i(a.fullData,"geo",a.id).map(function(Z){return Z._expandedIndex}),f=l("resolution"),m=l("scope"),h=P.scopeDefaults[m],w=l("projection.type",h.projType),p=r._isAlbersUsa="albers usa"===w;p&&(m=r.scope="usa");var o=r._isScoped="world"!==m,v=r._isSatellite="satellite"===w,M=r._isConic=-1!==w.indexOf("conic")||"albers"===w,b=r._isClipped=!!P.lonaxisSpan[w];if(!1===e.visible){var L=A.extendDeep({},r._template);L.showcoastlines=!1,L.showcountries=!1,L.showframe=!1,L.showlakes=!1,L.showland=!1,L.showocean=!1,L.showrivers=!1,L.showsubunits=!1,L.lonaxis&&(L.lonaxis.showgrid=!1),L.lataxis&&(L.lataxis.showgrid=!1),r._template=L}for(var x=l("visible"),T=0;T<u.length;T++){var d,n=u[T],E=[30,10][T];if(o)d=h[n+"Range"];else{var F=P[n+"Span"],D=(F[w]||F["*"])/2,N=l("projection.rotation."+n.substr(0,3),h.projRotate[T]);d=[N-D,N+D]}var k=l(n+".range",d);l(n+".tick0"),l(n+".dtick",E),l(n+".showgrid",!!x&&void 0)&&(l(n+".gridcolor"),l(n+".gridwidth"),l(n+".griddash")),r[n]._ax={type:"linear",_id:n.slice(0,3),_traceIndices:c,setScale:A.identity,c2l:A.identity,r2l:A.identity,autorange:!0,range:k.slice(),_m:1,_input:{}}}var O=r.lonaxis.range,B=r.lataxis.range,z=O[0],U=O[1];z>0&&U<0&&(U+=360);var J,it,ut,H=(z+U)/2;if(!p){var nt=o?h.projRotate:[H,0,0];J=l("projection.rotation.lon",nt[0]),l("projection.rotation.lat",nt[1]),l("projection.rotation.roll",nt[2]),l("showcoastlines",!o&&x)&&(l("coastlinecolor"),l("coastlinewidth")),l("showocean",!!x&&void 0)&&l("oceancolor")}p?(it=-96.6,ut=38.7):(it=o?H:J,ut=(B[0]+B[1])/2),l("center.lon",it),l("center.lat",ut),v&&(l("projection.tilt"),l("projection.distance")),M&&l("projection.parallels",h.projParallels||[0,60]),l("projection.scale"),l("showland",!!x&&void 0)&&l("landcolor"),l("showlakes",!!x&&void 0)&&l("lakecolor"),l("showrivers",!!x&&void 0)&&(l("rivercolor"),l("riverwidth")),l("showcountries",o&&"usa"!==m&&x)&&(l("countrycolor"),l("countrywidth")),("usa"===m||"north america"===m&&50===f)&&(l("showsubunits",x),l("subunitcolor"),l("subunitwidth")),o||l("showframe",x)&&(l("framecolor"),l("framewidth")),l("bgcolor"),l("fitbounds")&&(delete r.projection.scale,o?(delete r.center.lon,delete r.center.lat):b?(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon,delete r.projection.rotation.lat,delete r.lonaxis.range,delete r.lataxis.range):(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon))}q.exports=function(r,l,a){g(r,l,a,{type:"geo",attributes:C,handleDefaults:y,fullData:a,partition:"y"})}},74455:function(q,W,t){"use strict";var A=t(39898),g=t(71828),i=t(73972),P=Math.PI/180,C=180/Math.PI,u={cursor:"pointer"},y={cursor:"auto"};function r(n,E){return A.behavior.zoom().translate(E.translate()).scale(E.scale())}function l(n,E,d){var F=n.id,D=n.graphDiv,N=D.layout,k=N[F],O=D._fullLayout,B=O[F],z={},U={};function H(J,nt){z[F+"."+J]=g.nestedProperty(k,J).get(),i.call("_storeDirectGUIEdit",N,O._preGUI,z);var it=g.nestedProperty(B,J);it.get()!==nt&&(it.set(nt),g.nestedProperty(k,J).set(nt),U[F+"."+J]=nt)}d(H),H("projection.scale",E.scale()/n.fitScale),H("fitbounds",!1),D.emit("plotly_relayout",U)}function a(n,E){var d=r(0,E);function N(O){var B=E.invert(n.midPt);O("center.lon",B[0]),O("center.lat",B[1])}return d.on("zoomstart",function F(){A.select(this).style(u)}).on("zoom",function D(){E.scale(A.event.scale).translate(A.event.translate),n.render(!0);var O=E.invert(n.midPt);n.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/n.fitScale,"geo.center.lon":O[0],"geo.center.lat":O[1]})}).on("zoomend",function k(){A.select(this).style(y),l(n,E,N)}),d}function s(n,E){var D,N,k,O,B,z,U,H,J,d=r(0,E);function nt(G){return E.invert(G)}function Z(G){var K=E.rotate(),at=E.invert(n.midPt);G("projection.rotation.lon",-K[0]),G("center.lon",at[0]),G("center.lat",at[1])}return d.on("zoomstart",function ut(){A.select(this).style(u),D=A.mouse(this),N=E.rotate(),k=E.translate(),O=N,B=nt(D)}).on("zoom",function Q(){if(z=A.mouse(this),function it(G){var K=nt(G);if(!K)return!0;var at=E(K);return Math.abs(at[0]-G[0])>2||Math.abs(at[1]-G[1])>2}(D))return d.scale(E.scale()),void d.translate(E.translate());E.scale(A.event.scale),E.translate([k[0],A.event.translate[1]]),B?nt(z)&&(H=nt(z),E.rotate(U=[O[0]+(H[0]-B[0]),N[1],N[2]]),O=U):B=nt(D=z),J=!0,n.render(!0);var G=E.rotate(),K=E.invert(n.midPt);n.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/n.fitScale,"geo.center.lon":K[0],"geo.center.lat":K[1],"geo.projection.rotation.lon":-G[0]})}).on("zoomend",function j(){A.select(this).style(y),J&&l(n,E,Z)}),d}function c(n,E){var O,d={r:E.rotate(),k:E.scale()},F=r(0,E),D=function T(n){for(var E=0,d=arguments.length,F=[];++E<d;)F.push(arguments[E]);var D=A.dispatch.apply(null,F);return D.of=function(N,k){return function(O){var B;try{B=O.sourceEvent=A.event,O.target=n,A.event=O,D[O.type].apply(N,k)}finally{A.event=B}}},D}(F,"zoomstart","zoom","zoomend"),N=0,k=F.on;function B(J){N++||J({type:"zoomstart"})}function z(J){J({type:"zoom"})}function U(J){--N||J({type:"zoomend"})}function H(J){var nt=E.rotate();J("projection.rotation.lon",-nt[0]),J("projection.rotation.lat",-nt[1])}return F.on("zoomstart",function(){A.select(this).style(u);var J=A.mouse(this),nt=E.rotate(),it=nt,ut=E.translate(),Q=m(nt);O=f(E,J),k.call(F,"zoom",function(){var j=A.mouse(this);if(E.scale(d.k=A.event.scale),O){if(f(E,j)){E.rotate(nt).translate(ut);var Z=f(E,j),G=w(O,Z),K=b(h(Q,G)),at=d.r=p(K,O,it);(!isFinite(at[0])||!isFinite(at[1])||!isFinite(at[2]))&&(at=it),E.rotate(at),it=at}}else O=f(E,J=j);z(D.of(this,arguments))}),B(D.of(this,arguments))}).on("zoomend",function(){A.select(this).style(y),k.call(F,"zoom",null),U(D.of(this,arguments)),l(n,E,H)}).on("zoom.redraw",function(){n.render(!0);var J=E.rotate();n.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/n.fitScale,"geo.projection.rotation.lon":-J[0],"geo.projection.rotation.lat":-J[1]})}),A.rebind(F,D,"on")}function f(n,E){var d=n.invert(E);return d&&isFinite(d[0])&&isFinite(d[1])&&function L(n){var E=n[0]*P,d=n[1]*P,F=Math.cos(d);return[F*Math.cos(E),F*Math.sin(E),Math.sin(d)]}(d)}function m(n){var E=.5*n[0]*P,d=.5*n[1]*P,F=.5*n[2]*P,D=Math.sin(E),N=Math.cos(E),k=Math.sin(d),O=Math.cos(d),B=Math.sin(F),z=Math.cos(F);return[N*O*z+D*k*B,D*O*z-N*k*B,N*k*z+D*O*B,N*O*B-D*k*z]}function h(n,E){var d=n[0],F=n[1],D=n[2],N=n[3],k=E[0],O=E[1],B=E[2],z=E[3];return[d*k-F*O-D*B-N*z,d*O+F*k+D*z-N*B,d*B-F*z+D*k+N*O,d*z+F*B-D*O+N*k]}function w(n,E){if(n&&E){var d=function S(n,E){return[n[1]*E[2]-n[2]*E[1],n[2]*E[0]-n[0]*E[2],n[0]*E[1]-n[1]*E[0]]}(n,E),F=Math.sqrt(x(d,d)),D=.5*Math.acos(Math.max(-1,Math.min(1,x(n,E)))),N=Math.sin(D)/F;return F&&[Math.cos(D),d[2]*N,-d[1]*N,d[0]*N]}}function p(n,E,d){var F=M(E,2,n[0]);F=M(F,1,n[1]),F=M(F,0,n[2]-d[2]);var J,nt,D=E[0],N=E[1],k=E[2],O=F[0],B=F[1],z=F[2],U=Math.atan2(N,D)*C,H=Math.sqrt(D*D+N*N);Math.abs(B)>H?(nt=(B>0?90:-90)-U,J=0):(nt=Math.asin(B/H)*C-U,J=Math.sqrt(H*H-B*B));var it=180-nt-2*U,ut=(Math.atan2(z,O)-Math.atan2(k,J))*C,Q=(Math.atan2(z,O)-Math.atan2(k,-J))*C;return o(d[0],d[1],nt,ut)<=o(d[0],d[1],it,Q)?[nt,ut,d[2]]:[it,Q,d[2]]}function o(n,E,d,F){var D=v(d-n),N=v(F-E);return Math.sqrt(D*D+N*N)}function v(n){return(n%360+540)%360-180}function M(n,E,d){var F=d*P,D=n.slice(),N=0===E?1:0,k=2===E?1:2,O=Math.cos(F),B=Math.sin(F);return D[N]=n[N]*O-n[k]*B,D[k]=n[k]*O+n[N]*B,D}function b(n){return[Math.atan2(2*(n[0]*n[1]+n[2]*n[3]),1-2*(n[1]*n[1]+n[2]*n[2]))*C,Math.asin(Math.max(-1,Math.min(1,2*(n[0]*n[2]-n[3]*n[1]))))*C,Math.atan2(2*(n[0]*n[3]+n[1]*n[2]),1-2*(n[2]*n[2]+n[3]*n[3]))*C]}function x(n,E){for(var d=0,F=0,D=n.length;F<D;++F)d+=n[F]*E[F];return d}q.exports=function e(n,E){return(E._isScoped?a:E._isClipped?c:s)(n,n.projection)}},27659:function(q,W,t){"use strict";var A=t(73972),g=t(85555).SUBPLOT_PATTERN;W.AU=function(i,P,C){var u=A.subplotsRegistry[P];if(!u)return[];for(var y=u.attr,e=[],r=0;r<i.length;r++){var l=i[r];l[0].trace[y]===C&&e.push(l)}return e},W.a0=function(i,P){var y,C=[],u=[];if(!(y="string"==typeof P?A.getModule(P).plot:"function"==typeof P?P:P.plot))return[C,i];for(var e=0;e<i.length;e++){var r=i[e],l=r[0].trace;!0!==l.visible||0===l._length||(l._module&&l._module.plot===y?C.push(r):u.push(r))}return[C,u]},W.NG=function(P,C,u){if(!A.subplotsRegistry[C])return[];var r,l,a,y=A.subplotsRegistry[C].attr,e=[];if("gl2d"===C){var s=u.match(g);l="x"+s[1],a="y"+s[2]}for(var c=0;c<P.length;c++)r=P[c],"gl2d"===C&&A.traceIs(r,"gl2d")?r[y[0]]===l&&r[y[1]]===a&&e.push(r):r[y]===u&&e.push(r);return e}},75071:function(q,W,t){"use strict";var A=t(16825),g=t(1195),i=t(48956),P=t(85555),C=t(38520);function u(e,r){this.element=e,this.plot=r,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}q.exports=function y(e){var r=e.mouseContainer,l=e.glplot,a=new u(r,l);function s(){e.xaxis.autorange=!1,e.yaxis.autorange=!1}function f(m,h,w){var x,S,p=e.calcDataBox(),o=l.viewBox,v=a.lastPos[0],M=a.lastPos[1],b=P.MINDRAG*l.pixelRatio,L=P.MINZOOM*l.pixelRatio;function T(N,k,O){var B=Math.min(k,O),z=Math.max(k,O);B!==z?(p[N]=B,p[N+2]=z,a.dataBox=p,e.setRanges(p)):(e.selectBox.selectBox=[0,0,1,1],e.glplot.setDirty())}switch(h*=l.pixelRatio,w=o[3]-o[1]-(w*=l.pixelRatio),e.fullLayout.dragmode){case"zoom":if(m){var n=h/(o[2]-o[0])*(p[2]-p[0])+p[0],E=w/(o[3]-o[1])*(p[3]-p[1])+p[1];a.boxInited||(a.boxStart[0]=n,a.boxStart[1]=E,a.dragStart[0]=h,a.dragStart[1]=w),a.boxEnd[0]=n,a.boxEnd[1]=E,a.boxInited=!0,!a.boxEnabled&&(a.boxStart[0]!==a.boxEnd[0]||a.boxStart[1]!==a.boxEnd[1])&&(a.boxEnabled=!0);var d=Math.abs(a.dragStart[0]-h)<L,F=Math.abs(a.dragStart[1]-w)<L;if(!function c(){for(var m=e.graphDiv._fullLayout._axisConstraintGroups,h=e.xaxis._id,w=e.yaxis._id,p=0;p<m.length;p++)if(-1!==m[p][h]){if(-1!==m[p][w])return!0;break}return!1}()||d&&F)d&&(a.boxEnd[0]=a.boxStart[0]),F&&(a.boxEnd[1]=a.boxStart[1]);else{x=a.boxEnd[0]-a.boxStart[0],S=a.boxEnd[1]-a.boxStart[1];var D=(p[3]-p[1])/(p[2]-p[0]);Math.abs(x*D)>Math.abs(S)?(a.boxEnd[1]=a.boxStart[1]+Math.abs(x)*D*(S>=0?1:-1),a.boxEnd[1]<p[1]?(a.boxEnd[1]=p[1],a.boxEnd[0]=a.boxStart[0]+(p[1]-a.boxStart[1])/Math.abs(D)):a.boxEnd[1]>p[3]&&(a.boxEnd[1]=p[3],a.boxEnd[0]=a.boxStart[0]+(p[3]-a.boxStart[1])/Math.abs(D))):(a.boxEnd[0]=a.boxStart[0]+Math.abs(S)/D*(x>=0?1:-1),a.boxEnd[0]<p[0]?(a.boxEnd[0]=p[0],a.boxEnd[1]=a.boxStart[1]+(p[0]-a.boxStart[0])*Math.abs(D)):a.boxEnd[0]>p[2]&&(a.boxEnd[0]=p[2],a.boxEnd[1]=a.boxStart[1]+(p[2]-a.boxStart[0])*Math.abs(D)))}}else a.boxEnabled?(S=a.boxStart[1]!==a.boxEnd[1],(x=a.boxStart[0]!==a.boxEnd[0])||S?(x&&(T(0,a.boxStart[0],a.boxEnd[0]),e.xaxis.autorange=!1),S&&(T(1,a.boxStart[1],a.boxEnd[1]),e.yaxis.autorange=!1),e.relayoutCallback()):e.glplot.setDirty(),a.boxEnabled=!1,a.boxInited=!1):a.boxInited&&(a.boxInited=!1);break;case"pan":a.boxEnabled=!1,a.boxInited=!1,m?(a.panning||(a.dragStart[0]=h,a.dragStart[1]=w),Math.abs(a.dragStart[0]-h)<b&&(h=a.dragStart[0]),Math.abs(a.dragStart[1]-w)<b&&(w=a.dragStart[1]),S=(M-w)*(p[3]-p[1])/(l.viewBox[3]-l.viewBox[1]),p[0]+=x=(v-h)*(p[2]-p[0])/(l.viewBox[2]-l.viewBox[0]),p[2]+=x,p[1]+=S,p[3]+=S,e.setRanges(p),a.panning=!0,a.lastInputTime=Date.now(),s(),e.cameraChanged(),e.handleAnnotations()):a.panning&&(a.panning=!1,e.relayoutCallback())}a.lastPos[0]=h,a.lastPos[1]=w}return a.mouseListener=A(r,f),r.addEventListener("touchstart",function(m){var h=i(m.changedTouches[0],r);f(0,h[0],h[1]),f(1,h[0],h[1]),m.preventDefault()},!!C&&{passive:!1}),r.addEventListener("touchmove",function(m){m.preventDefault();var h=i(m.changedTouches[0],r);f(1,h[0],h[1]),m.preventDefault()},!!C&&{passive:!1}),r.addEventListener("touchend",function(m){f(0,a.lastPos[0],a.lastPos[1]),m.preventDefault()},!!C&&{passive:!1}),a.wheelListener=g(r,function(m,h){if(!e.scrollZoom)return!1;var w=e.calcDataBox(),p=l.viewBox,o=a.lastPos[0],v=a.lastPos[1],M=Math.exp(5*h/(p[3]-p[1])),b=o/(p[2]-p[0])*(w[2]-w[0])+w[0],L=v/(p[3]-p[1])*(w[3]-w[1])+w[1];return w[0]=(w[0]-b)*M+b,w[2]=(w[2]-b)*M+b,w[1]=(w[1]-L)*M+L,w[3]=(w[3]-L)*M+L,e.setRanges(w),a.lastInputTime=Date.now(),s(),e.cameraChanged(),e.handleAnnotations(),e.relayoutCallback(),!0},!0),a}},82961:function(q,W,t){"use strict";var A=t(89298),g=t(78614);function i(y){this.scene=y,this.gl=y.gl,this.pixelRatio=y.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var P=i.prototype,C=["xaxis","yaxis"];P.merge=function(y){var e,r,l,a,s,c,f,m,h,w,p;for(this.titleEnable=!1,this.backgroundColor=g(y.plot_bgcolor),w=0;w<2;++w){var o=(e=C[w]).charAt(0);for(l=(r=y[this.scene[e]._name]).title.text===this.scene.fullLayout._dfltTitle[o]?"":r.title.text,p=0;p<=2;p+=2)this.labelEnable[w+p]=!1,this.labels[w+p]=l,this.labelColor[w+p]=g(r.title.font.color),this.labelFont[w+p]=r.title.font.family,this.labelSize[w+p]=r.title.font.size,this.labelPad[w+p]=this.getLabelPad(e,r),this.tickEnable[w+p]=!1,this.tickColor[w+p]=g((r.tickfont||{}).color),this.tickAngle[w+p]="auto"===r.tickangle?0:Math.PI*-r.tickangle/180,this.tickPad[w+p]=this.getTickPad(r),this.tickMarkLength[w+p]=0,this.tickMarkWidth[w+p]=r.tickwidth||0,this.tickMarkColor[w+p]=g(r.tickcolor),this.borderLineEnable[w+p]=!1,this.borderLineColor[w+p]=g(r.linecolor),this.borderLineWidth[w+p]=r.linewidth||0;f=this.hasSharedAxis(r),s=this.hasAxisInDfltPos(e,r)&&!f,c=this.hasAxisInAltrPos(e,r)&&!f,a=r.mirror||!1,m=f?-1!==String(a).indexOf("all"):!!a,h=f?"allticks"===a:-1!==String(a).indexOf("ticks"),s?this.labelEnable[w]=!0:c&&(this.labelEnable[w+2]=!0),s?this.tickEnable[w]=r.showticklabels:c&&(this.tickEnable[w+2]=r.showticklabels),(s||m)&&(this.borderLineEnable[w]=r.showline),(c||m)&&(this.borderLineEnable[w+2]=r.showline),(s||h)&&(this.tickMarkLength[w]=this.getTickMarkLength(r)),(c||h)&&(this.tickMarkLength[w+2]=this.getTickMarkLength(r)),this.gridLineEnable[w]=r.showgrid,this.gridLineColor[w]=g(r.gridcolor),this.gridLineWidth[w]=r.gridwidth,this.zeroLineEnable[w]=r.zeroline,this.zeroLineColor[w]=g(r.zerolinecolor),this.zeroLineWidth[w]=r.zerolinewidth}},P.hasSharedAxis=function(y){var e=this.scene;return 0!==A.findSubplotsWithAxis(e.fullLayout._subplots.gl2d,y).indexOf(e.id)},P.hasAxisInDfltPos=function(y,e){var r=e.side;return"xaxis"===y?"bottom"===r:"yaxis"===y?"left"===r:void 0},P.hasAxisInAltrPos=function(y,e){var r=e.side;return"xaxis"===y?"top"===r:"yaxis"===y?"right"===r:void 0},P.getLabelPad=function(y,e){var r=1.5,l=e.title.font.size,a=e.showticklabels;return"xaxis"===y?"top"===e.side?l*(r+(a?1:0))-10:l*(r+(a?.5:0))-10:"yaxis"===y?"right"===e.side?10+l*(r+(a?1:.5)):10+l*(r+(a?.5:0)):void 0},P.getTickPad=function(y){return"outside"===y.ticks?10+y.ticklen:15},P.getTickMarkLength=function(y){if(!y.ticks)return 0;var e=y.ticklen;return"inside"===y.ticks?-e:e},q.exports=function u(y){return new i(y)}},4796:function(q,W,t){"use strict";var A=t(30962).overrideAll,g=t(92918),i=t(10820),P=t(77922),C=t(85555),u=t(93612),y=t(528),e=t(27659).NG;W.name="gl2d",W.attr=["xaxis","yaxis"],W.idRoot=["x","y"],W.idRegex=C.idRegex,W.attrRegex=C.attrRegex,W.attributes=t(89502),W.supplyLayoutDefaults=function(r,l,a){l._has("cartesian")||u.supplyLayoutDefaults(r,l,a)},W.layoutAttrOverrides=A(u.layoutAttributes,"plot","from-root"),W.baseLayoutAttrOverrides=A({plot_bgcolor:i.plot_bgcolor,hoverlabel:y.hoverlabel},"plot","nested"),W.plot=function(l){for(var a=l._fullLayout,s=l._fullData,c=a._subplots.gl2d,f=0;f<c.length;f++){var m=c[f],h=a._plots[m],w=e(s,"gl2d",m),p=h._scene2d;void 0===p&&(p=new g({id:m,graphDiv:l,container:l.querySelector(".gl-container"),staticPlot:l._context.staticPlot,plotGlPixelRatio:l._context.plotGlPixelRatio},a),h._scene2d=p),p.plot(w,l.calcdata,a,l.layout)}},W.clean=function(r,l,a,s){for(var c=s._subplots.gl2d||[],f=0;f<c.length;f++){var m=c[f],h=s._plots[m];h._scene2d&&0===e(r,"gl2d",m).length&&(h._scene2d.destroy(),delete s._plots[m])}u.clean.apply(this,arguments)},W.drawFramework=function(r){r._context.staticPlot||u.drawFramework(r)},W.toSVG=function(r){for(var l=r._fullLayout,a=l._subplots.gl2d,s=0;s<a.length;s++){var f=l._plots[a[s]]._scene2d,m=f.toImage("png");l._glimages.append("svg:image").attr({xmlns:P.svg,"xlink:href":m,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),f.destroy()}},W.updateFx=function(r){for(var l=r._fullLayout,a=l._subplots.gl2d,s=0;s<a.length;s++)l._plots[a[s]]._scene2d.updateFx(l.dragmode)}},92918:function(q,W,t){"use strict";var o,v,A=t(73972),g=t(89298),i=t(30211),P=t(9330).gl_plot2d,C=t(9330).gl_spikes2d,u=t(9330).gl_select_box,y=t(40372),e=t(82961),r=t(75071),l=t(58617),a=t(99082),s=a.enforce,c=a.clean,f=t(71739).doAutoRange,m=t(64505),h=m.drawMode,w=m.selectMode,p=["xaxis","yaxis"],M=t(85555).SUBPLOT_PATTERN;function b(S,T){this.container=S.container,this.graphDiv=S.graphDiv,this.pixelRatio=S.plotGlPixelRatio||window.devicePixelRatio,this.id=S.id,this.staticPlot=!!S.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(T),this.makeFramework(),!this.stopped&&(this.glplotOptions=e(this),this.glplotOptions.merge(T),this.glplot=P(this.glplotOptions),this.camera=r(this),this.traces={},this.spikes=C(this.glplot),this.selectBox=u(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}q.exports=b;var L=b.prototype;L.makeFramework=function(){if(this.staticPlot){if(!(v||(o=document.createElement("canvas"),v=y({canvas:o,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=o,this.gl=v}else{var S=this.container.querySelector(".gl-canvas-focus"),T=y({canvas:S,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!T)return l(this),void(this.stopped=!0);this.canvas=S,this.gl=T}var n=this.canvas;n.style.width="100%",n.style.height="100%",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style["pointer-events"]="none",this.updateSize(n);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var d=this.mouseContainer=document.createElement("div");d.style.position="absolute",d.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var F=this.container;F.appendChild(E),F.appendChild(d);var D=this;d.addEventListener("mouseout",function(){D.isMouseOver=!1,D.unhover()}),d.addEventListener("mouseover",function(){D.isMouseOver=!0})},L.toImage=function(S){S||(S="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(o),this.updateSize(this.canvas);var T=this.glplot.gl,n=T.drawingBufferWidth,E=T.drawingBufferHeight;T.clearColor(1,1,1,0),T.clear(T.COLOR_BUFFER_BIT|T.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),T.bindFramebuffer(T.FRAMEBUFFER,null);var d=new Uint8Array(n*E*4);T.readPixels(0,0,n,E,T.RGBA,T.UNSIGNED_BYTE,d);for(var F=0,D=E-1;F<D;++F,--D)for(var N=0;N<n;++N)for(var k=0;k<4;++k){var O=d[4*(n*F+N)+k];d[4*(n*F+N)+k]=d[4*(n*D+N)+k],d[4*(n*D+N)+k]=O}var B=document.createElement("canvas");B.width=n,B.height=E;var H,z=B.getContext("2d",{willReadFrequently:!0}),U=z.createImageData(n,E);switch(U.data.set(d),z.putImageData(U,0,0),S){case"jpeg":H=B.toDataURL("image/jpeg");break;case"webp":H=B.toDataURL("image/webp");break;default:H=B.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(o),H},L.updateSize=function(S){S||(S=this.canvas);var T=this.pixelRatio,n=this.fullLayout,d=n.height,F=0|Math.ceil(T*n.width),D=0|Math.ceil(T*d);return(S.width!==F||S.height!==D)&&(S.width=F,S.height=D),S},L.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var S=[g.calcTicks(this.xaxis),g.calcTicks(this.yaxis)],T=0;T<2;++T)for(var n=0;n<S[T].length;++n)S[T][n].text=S[T][n].text+"";return S},L.updateRefs=function(S){this.fullLayout=S;var T=this.id.match(M),E="yaxis"+T[2];this.xaxis=this.fullLayout["xaxis"+T[1]],this.yaxis=this.fullLayout[E]},L.relayoutCallback=function(){var S=this.graphDiv,T=this.xaxis,n=this.yaxis,E=S.layout,d={},F=d[T._name+".range"]=T.range.slice(),D=d[n._name+".range"]=n.range.slice();d[T._name+".autorange"]=T.autorange,d[n._name+".autorange"]=n.autorange,A.call("_storeDirectGUIEdit",S.layout,S._fullLayout._preGUI,d);var N=E[T._name];N.range=F,N.autorange=T.autorange;var k=E[n._name];k.range=D,k.autorange=n.autorange,d.lastInputTime=this.camera.lastInputTime,S.emit("plotly_relayout",d)},L.cameraChanged=function(){var S=this.camera;this.glplot.setDataBox(this.calcDataBox());var T=this.computeTickMarks();(function x(S,T){for(var n=0;n<2;++n){var E=S[n],d=T[n];if(E.length!==d.length)return!0;for(var F=0;F<E.length;++F)if(E[F].x!==d[F].x)return!0}return!1})(T,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=T,this.glplotOptions.dataBox=S.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},L.handleAnnotations=function(){for(var S=this.graphDiv,T=this.fullLayout.annotations,n=0;n<T.length;n++){var E=T[n];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&A.getComponentMethod("annotations","drawOne")(S,n)}},L.destroy=function(){if(this.glplot){var S=this.traces;S&&Object.keys(S).map(function(T){S[T].dispose(),delete S[T]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},L.plot=function(S,T,n){var E=this.glplot;this.updateRefs(n),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(S,T),this.updateFx(n.dragmode);var d=n.width,F=n.height;this.updateSize(this.canvas);var D=this.glplotOptions;D.merge(n),D.screenBox=[0,0,d,F];var N={_fullLayout:{_axisConstraintGroups:n._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:n._size}};c(N,this.xaxis),c(N,this.yaxis);var z,U,k=n._size,O=this.xaxis.domain,B=this.yaxis.domain;for(D.viewBox=[k.l+O[0]*k.w,k.b+B[0]*k.h,d-k.r-(1-O[1])*k.w,F-k.t-(1-B[1])*k.h],this.mouseContainer.style.width=k.w*(O[1]-O[0])+"px",this.mouseContainer.style.height=k.h*(B[1]-B[0])+"px",this.mouseContainer.height=k.h*(B[1]-B[0]),this.mouseContainer.style.left=k.l+O[0]*k.w+"px",this.mouseContainer.style.top=k.t+(1-B[1])*k.h+"px",U=0;U<2;++U)(z=this[p[U]])._length=D.viewBox[U+2]-D.viewBox[U],f(this.graphDiv,z),z.setScale();s(N),D.ticks=this.computeTickMarks(),D.dataBox=this.calcDataBox(),D.merge(n),E.update(D),this.glplot.draw()},L.calcDataBox=function(){var S=this.xaxis,T=this.yaxis,n=S.range,E=T.range,d=S.r2l,F=T.r2l;return[d(n[0]),F(E[0]),d(n[1]),F(E[1])]},L.setRanges=function(S){var T=this.xaxis,n=this.yaxis,E=T.l2r,d=n.l2r;T.range=[E(S[0]),E(S[2])],n.range=[d(S[1]),d(S[3])]},L.updateTraces=function(S,T){var E,d,F,n=Object.keys(this.traces);this.fullData=S;t:for(E=0;E<n.length;E++){var D=n[E],N=this.traces[D];for(d=0;d<S.length;d++)if((F=S[d]).uid===D&&F.type===N.type)continue t;N.dispose(),delete this.traces[D]}for(E=0;E<S.length;E++){var k=T[E],O=this.traces[(F=S[E]).uid];O?O.update(F,k):(O=F._module.plot(this,F,k),this.traces[F.uid]=O)}this.glplot.objects.sort(function(B,z){return B._trace.index-z._trace.index})},L.updateFx=function(S){w(S)||h(S)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===S?"move":"zoom"===S?"crosshair":null},L.emitPointAction=function(S,T){for(var d,n=S.trace.uid,E=S.pointIndex,F=0;F<this.fullData.length;F++)this.fullData[F].uid===n&&(d=this.fullData[F]);var D={x:S.traceCoord[0],y:S.traceCoord[1],curveNumber:d.index,pointNumber:E,data:d._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};i.appendArrayPointValue(D,d,E),this.graphDiv.emit(T,{points:[D]})},L.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var S=this.glplot,T=this.camera,n=T.mouseListener,E=1===this.lastButtonState&&0===n.buttons,d=this.fullLayout;this.lastButtonState=n.buttons,this.cameraChanged();var N,F=n.x*S.pixelRatio,D=this.canvas.height-S.pixelRatio*n.y;if(T.boxEnabled&&"zoom"===d.dragmode){this.selectBox.enabled=!0;for(var k=this.selectBox.selectBox=[Math.min(T.boxStart[0],T.boxEnd[0]),Math.min(T.boxStart[1],T.boxEnd[1]),Math.max(T.boxStart[0],T.boxEnd[0]),Math.max(T.boxStart[1],T.boxEnd[1])],O=0;O<2;O++)T.boxStart[O]===T.boxEnd[O]&&(k[O]=S.dataBox[O],k[O+2]=S.dataBox[O+2]);S.setDirty()}else if(!T.panning&&this.isMouseOver){this.selectBox.enabled=!1;var B=d._size,H=(N=S.pick(F/S.pixelRatio+B.l+this.xaxis.domain[0]*B.w,D/S.pixelRatio-(B.t+(1-this.yaxis.domain[1])*B.h)))&&N.object._trace.handlePick(N);if(H&&E&&this.emitPointAction(H,"plotly_click"),N&&"skip"!==N.object._trace.hoverinfo&&d.hovermode&&H&&(!this.lastPickResult||this.lastPickResult.traceUid!==H.trace.uid||this.lastPickResult.dataCoord[0]!==H.dataCoord[0]||this.lastPickResult.dataCoord[1]!==H.dataCoord[1])){var J=H;this.lastPickResult={traceUid:H.trace?H.trace.uid:null,dataCoord:H.dataCoord.slice()},this.spikes.update({center:N.dataCoord}),J.screenCoord=[((S.viewBox[2]-S.viewBox[0])*(N.dataCoord[0]-S.dataBox[0])/(S.dataBox[2]-S.dataBox[0])+S.viewBox[0])/S.pixelRatio,(this.canvas.height-(S.viewBox[3]-S.viewBox[1])*(N.dataCoord[1]-S.dataBox[1])/(S.dataBox[3]-S.dataBox[1])-S.viewBox[1])/S.pixelRatio],this.emitPointAction(H,"plotly_hover");var nt=this.fullData[J.trace.index]||{},it=J.pointIndex,ut=i.castHoverinfo(nt,d,it);if(ut&&"all"!==ut){var Q=ut.split("+");-1===Q.indexOf("x")&&(J.traceCoord[0]=void 0),-1===Q.indexOf("y")&&(J.traceCoord[1]=void 0),-1===Q.indexOf("z")&&(J.traceCoord[2]=void 0),-1===Q.indexOf("text")&&(J.textLabel=void 0),-1===Q.indexOf("name")&&(J.name=void 0)}i.loneHover({x:J.screenCoord[0],y:J.screenCoord[1],xLabel:this.hoverFormatter("xaxis",J.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",J.traceCoord[1]),zLabel:J.traceCoord[2],text:J.textLabel,name:J.name,color:i.castHoverOption(nt,it,"bgcolor")||J.color,borderColor:i.castHoverOption(nt,it,"bordercolor"),fontFamily:i.castHoverOption(nt,it,"font.family"),fontSize:i.castHoverOption(nt,it,"font.size"),fontColor:i.castHoverOption(nt,it,"font.color"),nameLength:i.castHoverOption(nt,it,"namelength"),textAlign:i.castHoverOption(nt,it,"align")},{container:this.svgContainer,gd:this.graphDiv})}}N||this.unhover(),S.draw()}},L.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),i.loneUnhover(this.svgContainer))},L.hoverFormatter=function(S,T){if(void 0!==T){var n=this[S];return g.tickText(n,n.c2l(T),"hover").text}}},58547:function(q,W,t){"use strict";var A=t(30962).overrideAll,g=t(528),i=t(33539),P=t(27659).NG,C=t(71828),u=t(77922),y="gl3d",e="scene";W.name=y,W.attr=e,W.idRoot=e,W.idRegex=W.attrRegex=C.counterRegex("scene"),W.attributes=t(59084),W.layoutAttributes=t(65500),W.baseLayoutAttrOverrides=A({hoverlabel:g.hoverlabel},"plot","nested"),W.supplyLayoutDefaults=t(24682),W.plot=function(l){for(var a=l._fullLayout,s=l._fullData,c=a._subplots[y],f=0;f<c.length;f++){var m=c[f],h=P(s,y,m),w=a[m],p=w.camera,o=w._scene;o||(o=new i({id:m,graphDiv:l,container:l.querySelector(".gl-container"),staticPlot:l._context.staticPlot,plotGlPixelRatio:l._context.plotGlPixelRatio,camera:p},a),w._scene=o),o.viewInitial||(o.viewInitial={up:{x:p.up.x,y:p.up.y,z:p.up.z},eye:{x:p.eye.x,y:p.eye.y,z:p.eye.z},center:{x:p.center.x,y:p.center.y,z:p.center.z}}),o.plot(h,a,l.layout)}},W.clean=function(r,l,a,s){for(var c=s._subplots[y]||[],f=0;f<c.length;f++){var m=c[f];!l[m]&&s[m]._scene&&(s[m]._scene.destroy(),s._infolayer&&s._infolayer.selectAll(".annotation-"+m).remove())}},W.toSVG=function(r){for(var l=r._fullLayout,a=l._subplots[y],s=l._size,c=0;c<a.length;c++){var f=l[a[c]],m=f.domain,h=f._scene,w=h.toImage("png");l._glimages.append("svg:image").attr({xmlns:u.svg,"xlink:href":w,x:s.l+s.w*m.x[0],y:s.t+s.h*(1-m.y[1]),width:s.w*(m.x[1]-m.x[0]),height:s.h*(m.y[1]-m.y[0]),preserveAspectRatio:"none"}),h.destroy()}},W.cleanId=function(l){if(l.match(/^scene[0-9]*$/)){var a=l.substr(5);return"1"===a&&(a=""),e+a}},W.updateFx=function(r){for(var l=r._fullLayout,a=l._subplots[y],s=0;s<a.length;s++)l[a[s]]._scene.updateFx(l.dragmode,l.hovermode)}},59084:function(q){"use strict";q.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},77894:function(q,W,t){"use strict";var A=t(7901),g=t(13838),i=t(1426).extendFlat,P=t(30962).overrideAll;q.exports=P({visible:g.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:A.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:g.color,categoryorder:g.categoryorder,categoryarray:g.categoryarray,title:{text:g.title.text,font:g.title.font},type:i({},g.type,{values:["-","linear","log","date","category"]}),autotypenumbers:g.autotypenumbers,autorange:g.autorange,autorangeoptions:{minallowed:g.autorangeoptions.minallowed,maxallowed:g.autorangeoptions.maxallowed,clipmin:g.autorangeoptions.clipmin,clipmax:g.autorangeoptions.clipmax,include:g.autorangeoptions.include,editType:"plot"},rangemode:g.rangemode,minallowed:g.minallowed,maxallowed:g.maxallowed,range:i({},g.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:g.minor.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,ticks:g.ticks,mirror:g.mirror,ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,showticklabels:g.showticklabels,labelalias:g.labelalias,tickfont:g.tickfont,tickangle:g.tickangle,tickprefix:g.tickprefix,showtickprefix:g.showtickprefix,ticksuffix:g.ticksuffix,showticksuffix:g.showticksuffix,showexponent:g.showexponent,exponentformat:g.exponentformat,minexponent:g.minexponent,separatethousands:g.separatethousands,tickformat:g.tickformat,tickformatstops:g.tickformatstops,hoverformat:g.hoverformat,showline:g.showline,linecolor:g.linecolor,linewidth:g.linewidth,showgrid:g.showgrid,gridcolor:i({},g.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:g.gridwidth,zeroline:g.zeroline,zerolinecolor:g.zerolinecolor,zerolinewidth:g.zerolinewidth,_deprecated:{title:g._deprecated.title,titlefont:g._deprecated.titlefont}},"plot","from-root")},3277:function(q,W,t){"use strict";var A=t(84267).mix,g=t(71828),i=t(44467),P=t(77894),C=t(951),u=t(71453),y=["xaxis","yaxis","zaxis"];q.exports=function(l,a,s){var c,f;function m(p,o){return g.coerce(c,f,P,p,o)}for(var h=0;h<y.length;h++){var w=y[h];c=l[w]||{},(f=i.newContainer(a,w))._id=w[0]+s.scene,f._name=w,C(c,f,m,s),u(c,f,m,{font:s.font,letter:w[0],data:s.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:s.bgColor,calendar:s.calendar},s.fullLayout),m("gridcolor",A(f.color,s.bgColor,72.72727272727273).toRgbString()),m("title.text",w[0]),f.setScale=g.noop,m("showspikes")&&(m("spikesides"),m("spikethickness"),m("spikecolor",f.color)),m("showaxeslabels"),m("showbackground")&&m("backgroundcolor")}}},30422:function(q,W,t){"use strict";var A=t(78614),g=t(71828),i=["xaxis","yaxis","zaxis"];function P(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}P.prototype.merge=function(y,e){for(var r=this,l=0;l<3;++l){var a=e[i[l]];a.visible?(r.labels[l]=y._meta?g.templateString(a.title.text,y._meta):a.title.text,"font"in a.title&&(a.title.font.color&&(r.labelColor[l]=A(a.title.font.color)),a.title.font.family&&(r.labelFont[l]=a.title.font.family),a.title.font.size&&(r.labelSize[l]=a.title.font.size)),"showline"in a&&(r.lineEnable[l]=a.showline),"linecolor"in a&&(r.lineColor[l]=A(a.linecolor)),"linewidth"in a&&(r.lineWidth[l]=a.linewidth),"showgrid"in a&&(r.gridEnable[l]=a.showgrid),"gridcolor"in a&&(r.gridColor[l]=A(a.gridcolor)),"gridwidth"in a&&(r.gridWidth[l]=a.gridwidth),"log"===a.type?r.zeroEnable[l]=!1:"zeroline"in a&&(r.zeroEnable[l]=a.zeroline),"zerolinecolor"in a&&(r.zeroLineColor[l]=A(a.zerolinecolor)),"zerolinewidth"in a&&(r.zeroLineWidth[l]=a.zerolinewidth),r.lineTickEnable[l]=!(!("ticks"in a)||!a.ticks),"ticklen"in a&&(r.lineTickLength[l]=r._defaultLineTickLength[l]=a.ticklen),"tickcolor"in a&&(r.lineTickColor[l]=A(a.tickcolor)),"tickwidth"in a&&(r.lineTickWidth[l]=a.tickwidth),"tickangle"in a&&(r.tickAngle[l]="auto"===a.tickangle?-3600:Math.PI*-a.tickangle/180),"showticklabels"in a&&(r.tickEnable[l]=a.showticklabels),"tickfont"in a&&(a.tickfont.color&&(r.tickColor[l]=A(a.tickfont.color)),a.tickfont.family&&(r.tickFont[l]=a.tickfont.family),a.tickfont.size&&(r.tickSize[l]=a.tickfont.size)),"mirror"in a?-1!==["ticks","all","allticks"].indexOf(a.mirror)?(r.lineTickMirror[l]=!0,r.lineMirror[l]=!0):!0===a.mirror?(r.lineTickMirror[l]=!1,r.lineMirror[l]=!0):(r.lineTickMirror[l]=!1,r.lineMirror[l]=!1):r.lineMirror[l]=!1,"showbackground"in a&&!1!==a.showbackground?(r.backgroundEnable[l]=!0,r.backgroundColor[l]=A(a.backgroundcolor)):r.backgroundEnable[l]=!1):(r.tickEnable[l]=!1,r.labelEnable[l]=!1,r.lineEnable[l]=!1,r.lineTickEnable[l]=!1,r.gridEnable[l]=!1,r.zeroEnable[l]=!1,r.backgroundEnable[l]=!1)}},q.exports=function u(y,e){var r=new P;return r.merge(y,e),r}},24682:function(q,W,t){"use strict";var A=t(71828),g=t(7901),i=t(73972),P=t(49119),C=t(3277),u=t(65500),y=t(27659).NG,e="gl3d";function r(l,a,s,c){for(var f=s("bgcolor"),m=g.combine(f,c.paper_bgcolor),h=["up","center","eye"],w=0;w<h.length;w++)s("camera."+h[w]+".x"),s("camera."+h[w]+".y"),s("camera."+h[w]+".z");s("camera.projection.type");var p=!!s("aspectratio.x")&&!!s("aspectratio.y")&&!!s("aspectratio.z"),v=s("aspectmode",p?"manual":"auto");p||(l.aspectratio=a.aspectratio={x:1,y:1,z:1},"manual"===v&&(a.aspectmode="auto"),l.aspectmode=a.aspectmode);var M=y(c.fullData,e,c.id);C(l,a,{font:c.font,scene:c.id,data:M,bgColor:m,calendar:c.calendar,autotypenumbersDflt:c.autotypenumbersDflt,fullLayout:c.fullLayout}),i.getComponentMethod("annotations3d","handleDefaults")(l,a,c);var b=c.getDfltFromLayout("dragmode");if(!1!==b&&!b)if(b="orbit",l.camera&&l.camera.up){var L=l.camera.up.x,x=l.camera.up.y,S=l.camera.up.z;0!==S&&(!L||!x||!S||S/Math.sqrt(L*L+x*x+S*S)>.999)&&(b="turntable")}else b="turntable";s("dragmode",b),s("hovermode",c.getDfltFromLayout("hovermode"))}q.exports=function(a,s,c){var f=s._basePlotModules.length>1;P(a,s,c,{type:e,attributes:u,handleDefaults:r,fullLayout:s,font:s.font,fullData:c,getDfltFromLayout:function m(h){if(!f&&A.validate(a[h],u[h]))return a[h]},autotypenumbersDflt:s.autotypenumbers,paper_bgcolor:s.paper_bgcolor,calendar:s.calendar})}},65500:function(q,W,t){"use strict";var A=t(77894),g=t(27670).Y,i=t(1426).extendFlat,P=t(71828).counterRegex;function C(u,y,e){return{x:{valType:"number",dflt:u,editType:"camera"},y:{valType:"number",dflt:y,editType:"camera"},z:{valType:"number",dflt:e,editType:"camera"},editType:"camera"}}q.exports={_arrayAttrRegexps:[P("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:i(C(0,0,1),{}),center:i(C(0,0,0),{}),eye:i(C(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:g({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:A,yaxis:A,zaxis:A,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},13133:function(q,W,t){"use strict";var A=t(78614),g=["xaxis","yaxis","zaxis"];function i(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}i.prototype.merge=function(u){for(var y=0;y<3;++y){var e=u[g[y]];e.visible?(this.enabled[y]=e.showspikes,this.colors[y]=A(e.spikecolor),this.drawSides[y]=e.spikesides,this.lineWidth[y]=e.spikethickness):(this.enabled[y]=!1,this.drawSides[y]=!1)}},q.exports=function C(u){var y=new i;return y.merge(u),y}},96085:function(q,W,t){"use strict";q.exports=function u(y){for(var e=y.axesOptions,r=y.glplot.axesPixels,l=y.fullSceneLayout,a=[[],[],[]],s=0;s<3;++s){var c=l[i[s]];if(c._length=(r[s].hi-r[s].lo)*r[s].pixelsPerDataUnit/y.dataScale[s],Math.abs(c._length)===1/0||isNaN(c._length))a[s]=[];else{c._input_range=c.range.slice(),c.range[0]=r[s].lo/y.dataScale[s],c.range[1]=r[s].hi/y.dataScale[s],c._m=1/(y.dataScale[s]*r[s].pixelsPerDataUnit),c.range[0]===c.range[1]&&(c.range[0]-=1,c.range[1]+=1);var f=c.tickmode;if("auto"===c.tickmode){c.tickmode="linear";var m=c.nticks||g.constrain(c._length/40,4,9);A.autoTicks(c,Math.abs(c.range[1]-c.range[0])/m)}for(var h=A.calcTicks(c,{msUTC:!0}),w=0;w<h.length;++w)h[w].x=h[w].x*y.dataScale[s],"date"===c.type&&(h[w].text=h[w].text.replace(/\<br\>/g," "));a[s]=h,c.tickmode=f}}for(e.ticks=a,s=0;s<3;++s)for(P[s]=.5*(y.glplot.bounds[0][s]+y.glplot.bounds[1][s]),w=0;w<2;++w)e.bounds[w][s]=y.glplot.bounds[w][s];y.contourLevels=function C(y){for(var e=new Array(3),r=0;r<3;++r){for(var l=y[r],a=new Array(l.length),s=0;s<l.length;++s)a[s]=l[s].x;e[r]=a}return e}(a)};var A=t(89298),g=t(71828),i=["xaxis","yaxis","zaxis"],P=[0,0,0]},63538:function(q){"use strict";function W(A,g){var P,C,i=[0,0,0,0];for(P=0;P<4;++P)for(C=0;C<4;++C)i[C]+=A[4*P+C]*g[P];return i}q.exports=function t(A,g){return W(A.projection,W(A.view,W(A.model,[g[0],g[1],g[2],1])))}},33539:function(q,W,t){"use strict";var p,o,A=t(9330).gl_plot3d,g=A.createCamera,i=A.createScene,P=t(40372),C=t(38520),u=t(73972),y=t(71828),e=y.preserveDrawingBuffer(),r=t(89298),l=t(30211),a=t(78614),s=t(58617),c=t(63538),f=t(30422),m=t(13133),h=t(96085),w=t(71739).applyAutorangeOptions,v=!1;function M(D,N){var k=document.createElement("div"),O=D.container;this.graphDiv=D.graphDiv;var B=document.createElementNS("http://www.w3.org/2000/svg","svg");B.style.position="absolute",B.style.top=B.style.left="0px",B.style.width=B.style.height="100%",B.style["z-index"]=20,B.style["pointer-events"]="none",k.appendChild(B),this.svgContainer=B,k.id=D.id,k.style.position="absolute",k.style.top=k.style.left="0px",k.style.width=k.style.height="100%",O.appendChild(k),this.fullLayout=N,this.id=D.id||"scene",this.fullSceneLayout=N[this.id],this.plotArgs=[[],{},{}],this.axesOptions=f(N,N[this.id]),this.spikeOptions=m(N[this.id]),this.container=k,this.staticMode=!!D.staticPlot,this.pixelRatio=this.pixelRatio||D.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=u.getComponentMethod("annotations3d","convert"),this.drawAnnotations=u.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var b=M.prototype;b.prepareOptions=function(){var D=this,N={canvas:D.canvas,gl:D.gl,glOptions:{preserveDrawingBuffer:e,premultipliedAlpha:!0,antialias:!0},container:D.container,axes:D.axesOptions,spikes:D.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:D.camera,pixelRatio:D.pixelRatio};if(D.staticMode){if(!(o||(p=document.createElement("canvas"),o=P({canvas:p,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");N.gl=o,N.canvas=p}return N};var L=!0;b.tryCreatePlot=function(){var D=this,N=D.prepareOptions(),k=!0;try{D.glplot=i(N)}catch(O){if(D.staticMode||!L||e)k=!1;else{y.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{e=N.glOptions.preserveDrawingBuffer=!0,D.glplot=i(N)}catch(B){e=N.glOptions.preserveDrawingBuffer=!1,k=!1}}}return L=!1,k},b.initializeGLCamera=function(){var D=this,N=D.fullSceneLayout.camera;D.camera=g(D.container,{center:[N.center.x,N.center.y,N.center.z],eye:[N.eye.x,N.eye.y,N.eye.z],up:[N.up.x,N.up.y,N.up.z],_ortho:"orthographic"===N.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})},b.initializeGLPlot=function(){var D=this;if(D.initializeGLCamera(),!D.tryCreatePlot())return s(D);D.traces={},D.make4thDimension();var k=D.graphDiv,O=k.layout,B=function(){var U={};return D.isCameraChanged(O)&&(U[D.id+".camera"]=D.getCamera()),D.isAspectChanged(O)&&(U[D.id+".aspectratio"]=D.glplot.getAspectratio(),"manual"!==O[D.id].aspectmode&&(D.fullSceneLayout.aspectmode=O[D.id].aspectmode=U[D.id+".aspectmode"]="manual")),U},z=function(U){if(!1!==U.fullSceneLayout.dragmode){var H=B();U.saveLayout(O),U.graphDiv.emit("plotly_relayout",H)}};return D.glplot.canvas&&(D.glplot.canvas.addEventListener("mouseup",function(){z(D)}),D.glplot.canvas.addEventListener("touchstart",function(){v=!0}),D.glplot.canvas.addEventListener("wheel",function(U){if(k._context._scrollZoom.gl3d){if(D.camera._ortho){var H=U.deltaX>U.deltaY?1.1:.9090909090909091,J=D.glplot.getAspectratio();D.glplot.setAspectratio({x:H*J.x,y:H*J.y,z:H*J.z})}z(D)}},!!C&&{passive:!1}),D.glplot.canvas.addEventListener("mousemove",function(){if(!1!==D.fullSceneLayout.dragmode&&0!==D.camera.mouseListener.buttons){var U=B();D.graphDiv.emit("plotly_relayouting",U)}}),D.staticMode||D.glplot.canvas.addEventListener("webglcontextlost",function(U){k&&k.emit&&k.emit("plotly_webglcontextlost",{event:U,layer:D.id})},!1)),D.glplot.oncontextloss=function(){D.recoverContext()},D.glplot.onrender=function(){D.render()},!0},b.render=function(){var k,D=this,N=D.graphDiv,O=D.svgContainer,B=D.container.getBoundingClientRect();N._fullLayout._calcInverseTransform(N);var H=B.width*N._fullLayout._invScaleX,J=B.height*N._fullLayout._invScaleY;O.setAttributeNS(null,"viewBox","0 0 "+H+" "+J),O.setAttributeNS(null,"width",H),O.setAttributeNS(null,"height",J),h(D),D.glplot.axes.update(D.axesOptions);for(var nt=Object.keys(D.traces),it=null,ut=D.glplot.selection,Q=0;Q<nt.length;++Q)"skip"!==(k=D.traces[nt[Q]]).data.hoverinfo&&k.handlePick(ut)&&(it=k),k.setContourLevels&&k.setContourLevels();function j(Lt,It,Mt){var xt=D.fullSceneLayout[Lt+"axis"];return"log"!==xt.type&&(It=xt.d2l(It)),r.hoverLabelText(xt,It,Mt)}if(null!==it){var Z=c(D.glplot.cameraParams,ut.dataCoordinate),G=N._fullData[(k=it.data).index],K=ut.index,at={xLabel:j("x",ut.traceCoordinate[0],k.xhoverformat),yLabel:j("y",ut.traceCoordinate[1],k.yhoverformat),zLabel:j("z",ut.traceCoordinate[2],k.zhoverformat)},$=l.castHoverinfo(G,D.fullLayout,K),X=($||"").split("+"),rt=$&&"all"===$;!G.hovertemplate&&!rt&&(-1===X.indexOf("x")&&(at.xLabel=void 0),-1===X.indexOf("y")&&(at.yLabel=void 0),-1===X.indexOf("z")&&(at.zLabel=void 0),-1===X.indexOf("text")&&(ut.textLabel=void 0),-1===X.indexOf("name")&&(it.name=void 0));var et,st=[];"cone"===k.type||"streamtube"===k.type?(at.uLabel=j("x",ut.traceCoordinate[3],k.uhoverformat),(rt||-1!==X.indexOf("u"))&&st.push("u: "+at.uLabel),at.vLabel=j("y",ut.traceCoordinate[4],k.vhoverformat),(rt||-1!==X.indexOf("v"))&&st.push("v: "+at.vLabel),at.wLabel=j("z",ut.traceCoordinate[5],k.whoverformat),(rt||-1!==X.indexOf("w"))&&st.push("w: "+at.wLabel),at.normLabel=ut.traceCoordinate[6].toPrecision(3),(rt||-1!==X.indexOf("norm"))&&st.push("norm: "+at.normLabel),"streamtube"===k.type&&(at.divergenceLabel=ut.traceCoordinate[7].toPrecision(3),(rt||-1!==X.indexOf("divergence"))&&st.push("divergence: "+at.divergenceLabel)),ut.textLabel&&st.push(ut.textLabel),et=st.join("<br>")):"isosurface"===k.type||"volume"===k.type?(at.valueLabel=r.hoverLabelText(D._mockAxis,D._mockAxis.d2l(ut.traceCoordinate[3]),k.valuehoverformat),st.push("value: "+at.valueLabel),ut.textLabel&&st.push(ut.textLabel),et=st.join("<br>")):et=ut.textLabel;var dt={x:ut.traceCoordinate[0],y:ut.traceCoordinate[1],z:ut.traceCoordinate[2],data:G._input,fullData:G,curveNumber:G.index,pointNumber:K};l.appendArrayPointValue(dt,G,K),k._module.eventData&&(dt=G._module.eventData(dt,ut,G,{},K));var bt={points:[dt]};if(D.fullSceneLayout.hovermode){var gt=[];l.loneHover({trace:G,x:(.5+.5*Z[0]/Z[3])*H,y:(.5-.5*Z[1]/Z[3])*J,xLabel:at.xLabel,yLabel:at.yLabel,zLabel:at.zLabel,text:et,name:it.name,color:l.castHoverOption(G,K,"bgcolor")||it.color,borderColor:l.castHoverOption(G,K,"bordercolor"),fontFamily:l.castHoverOption(G,K,"font.family"),fontSize:l.castHoverOption(G,K,"font.size"),fontColor:l.castHoverOption(G,K,"font.color"),nameLength:l.castHoverOption(G,K,"namelength"),textAlign:l.castHoverOption(G,K,"align"),hovertemplate:y.castOption(G,K,"hovertemplate"),hovertemplateLabels:y.extendFlat({},dt,at),eventData:[dt]},{container:O,gd:N,inOut_bbox:gt}),dt.bbox=gt[0]}N.emit(ut.distance<5&&(ut.buttons||v)?"plotly_click":"plotly_hover",bt),this.oldEventData=bt}else l.loneUnhover(O),this.oldEventData&&N.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;D.drawAnnotations(D)},b.recoverContext=function(){var D=this;D.glplot.dispose();var N=function(){D.glplot.gl.isContextLost()?requestAnimationFrame(N):D.initializeGLPlot()?D.plot.apply(D,D.plotArgs):y.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(N)};var x=["xaxis","yaxis","zaxis"];function S(D,N,k){for(var O=D.fullSceneLayout,B=0;B<3;B++){var z=x[B],U=z.charAt(0),H=O[z],J=N[U],nt=N[U+"calendar"],it=N["_"+U+"length"];if(y.isArrayOrTypedArray(J))for(var ut,Q=0;Q<(it||J.length);Q++)if(y.isArrayOrTypedArray(J[Q]))for(var j=0;j<J[Q].length;++j)ut=H.d2l(J[Q][j],0,nt),!isNaN(ut)&&isFinite(ut)&&(k[0][B]=Math.min(k[0][B],ut),k[1][B]=Math.max(k[1][B],ut));else ut=H.d2l(J[Q],0,nt),!isNaN(ut)&&isFinite(ut)&&(k[0][B]=Math.min(k[0][B],ut),k[1][B]=Math.max(k[1][B],ut));else k[0][B]=Math.min(k[0][B],0),k[1][B]=Math.max(k[1][B],it-1)}}b.plot=function(D,N,k){var O=this;if(O.plotArgs=[D,N,k],!O.glplot.contextLost){var B,z,U,H,J,nt,it=N[O.id],ut=k[O.id];O.fullLayout=N,O.fullSceneLayout=it,O.axesOptions.merge(N,it),O.spikeOptions.merge(it),O.setViewport(it),O.updateFx(it.dragmode,it.hovermode),O.camera.enableWheel=O.graphDiv._context._scrollZoom.gl3d,O.glplot.setClearColor(a(it.bgcolor)),O.setConvert(J),D?Array.isArray(D)||(D=[D]):D=[];var Q=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(U=0;U<D.length;++U)!0===(B=D[U]).visible&&0!==B._length&&S(this,B,Q);!function T(D,N){for(var k=D.fullSceneLayout,O=k.annotations||[],B=0;B<3;B++)for(var z=x[B],U=z.charAt(0),H=k[z],J=0;J<O.length;J++){var nt=O[J];if(nt.visible){var it=H.r2l(nt[U]);!isNaN(it)&&isFinite(it)&&(N[0][B]=Math.min(N[0][B],it),N[1][B]=Math.max(N[1][B],it))}}}(this,Q);var j=[1,1,1];for(H=0;H<3;++H)j[H]=Q[1][H]===Q[0][H]?1:1/(Q[1][H]-Q[0][H]);for(O.dataScale=j,O.convertAnnotations(this),U=0;U<D.length;++U)!0===(B=D[U]).visible&&0!==B._length&&((z=O.traces[B.uid])?z.data.type===B.type?z.update(B):(z.dispose(),z=B._module.plot(this,B),O.traces[B.uid]=z):(z=B._module.plot(this,B),O.traces[B.uid]=z),z.name=B.name);var Z=Object.keys(O.traces);t:for(U=0;U<Z.length;++U){for(H=0;H<D.length;++H)if(D[H].uid===Z[U]&&!0===D[H].visible&&0!==D[H]._length)continue t;(z=O.traces[Z[U]]).dispose(),delete O.traces[Z[U]]}O.glplot.objects.sort(function(Bt,Ot){return Bt._trace.data.index-Ot._trace.data.index});var G=[[0,0,0],[0,0,0]],K=[],at={};for(U=0;U<3;++U){var $;if((nt=(J=it[x[U]]).type)in at?(at[nt].acc*=j[U],at[nt].count+=1):at[nt]={acc:j[U],count:1},J.autorange){G[0][U]=1/0,G[1][U]=-1/0;var X=O.glplot.objects,rt=O.fullSceneLayout.annotations||[],et=J._name.charAt(0);for(H=0;H<X.length;H++){var st=X[H],dt=st.bounds,bt=st._trace.data._pad||0;G[0][U]="ErrorBars"===st.constructor.name&&J._lowerLogErrorBound?Math.min(G[0][U],J._lowerLogErrorBound):Math.min(G[0][U],dt[0][U]/j[U]-bt),G[1][U]=Math.max(G[1][U],dt[1][U]/j[U]+bt)}for(H=0;H<rt.length;H++){var gt=rt[H];if(gt.visible){var Lt=J.r2l(gt[et]);G[0][U]=Math.min(G[0][U],Lt),G[1][U]=Math.max(G[1][U],Lt)}}if("rangemode"in J&&"tozero"===J.rangemode&&(G[0][U]=Math.min(G[0][U],0),G[1][U]=Math.max(G[1][U],0)),G[0][U]>G[1][U])G[0][U]=-1,G[1][U]=1;else{var It=G[1][U]-G[0][U];G[0][U]-=It/32,G[1][U]+=It/32}if($=w($=[G[0][U],G[1][U]],J),G[0][U]=$[0],G[1][U]=$[1],J.isReversed()){var Mt=G[0][U];G[0][U]=G[1][U],G[1][U]=Mt}}else G[0][U]=J.r2l(($=J.range)[0]),G[1][U]=J.r2l($[1]);G[0][U]===G[1][U]&&(G[0][U]-=1,G[1][U]+=1),K[U]=G[1][U]-G[0][U],J.range=[G[0][U],G[1][U]],J.limitRange(),O.glplot.setBounds(U,{min:J.range[0]*j[U],max:J.range[1]*j[U]})}var xt,At=it.aspectmode;if("cube"===At)xt=[1,1,1];else if("manual"===At){var Gt=it.aspectratio;xt=[Gt.x,Gt.y,Gt.z]}else{if("auto"!==At&&"data"!==At)throw new Error("scene.js aspectRatio was not one of the enumerated types");var Wt=[1,1,1];for(U=0;U<3;++U){var Pt=at[nt=(J=it[x[U]]).type];Wt[U]=Math.pow(Pt.acc,1/Pt.count)/j[U]}xt="data"===At||Math.max.apply(null,Wt)/Math.min.apply(null,Wt)<=4?Wt:[1,1,1]}it.aspectratio.x=ut.aspectratio.x=xt[0],it.aspectratio.y=ut.aspectratio.y=xt[1],it.aspectratio.z=ut.aspectratio.z=xt[2],O.glplot.setAspectratio(it.aspectratio),O.viewInitial.aspectratio||(O.viewInitial.aspectratio={x:it.aspectratio.x,y:it.aspectratio.y,z:it.aspectratio.z}),O.viewInitial.aspectmode||(O.viewInitial.aspectmode=it.aspectmode);var Vt=it.domain||null,te=N._size||null;if(Vt&&te){var Qt=O.container.style;Qt.position="absolute",Qt.left=te.l+Vt.x[0]*te.w+"px",Qt.top=te.t+(1-Vt.y[1])*te.h+"px",Qt.width=te.w*(Vt.x[1]-Vt.x[0])+"px",Qt.height=te.h*(Vt.y[1]-Vt.y[0])+"px"}O.glplot.redraw()}},b.destroy=function(){var D=this;!D.glplot||(D.camera.mouseListener.enabled=!1,D.container.removeEventListener("wheel",D.camera.wheelListener),D.camera=null,D.glplot.dispose(),D.container.parentNode.removeChild(D.container),D.glplot=null)},b.getCamera=function(){var D=this;return D.camera.view.recalcMatrix(D.camera.view.lastT()),function E(D){return{up:{x:D.up[0],y:D.up[1],z:D.up[2]},center:{x:D.center[0],y:D.center[1],z:D.center[2]},eye:{x:D.eye[0],y:D.eye[1],z:D.eye[2]},projection:{type:!0===D._ortho?"orthographic":"perspective"}}}(D.camera)},b.setViewport=function(D){var N=this,k=D.camera;N.camera.lookAt.apply(this,function n(D){return[[D.eye.x,D.eye.y,D.eye.z],[D.center.x,D.center.y,D.center.z],[D.up.x,D.up.y,D.up.z]]}(k)),N.glplot.setAspectratio(D.aspectratio),"orthographic"===k.projection.type!==N.camera._ortho&&(N.glplot.redraw(),N.glplot.clearRGBA(),N.glplot.dispose(),N.initializeGLPlot())},b.isCameraChanged=function(D){var k=this.getCamera(),B=y.nestedProperty(D,this.id+".camera").get();var nt,it,ut,Q,j,Z,U=!1;if(void 0===B)U=!0;else{for(var H=0;H<3;H++)for(var J=0;J<3;J++)if(nt=k,Q=J,j=void 0,Z=void 0,Z=["x","y","z"],!(it=B)[(j=["up","center","eye"])[ut=H]]||nt[j[ut]][Z[Q]]!==it[j[ut]][Z[Q]]){U=!0;break}(!B.projection||k.projection&&k.projection.type!==B.projection.type)&&(U=!0)}return U},b.isAspectChanged=function(D){var k=this.glplot.getAspectratio(),B=y.nestedProperty(D,this.id+".aspectratio").get();return void 0===B||B.x!==k.x||B.y!==k.y||B.z!==k.z},b.saveLayout=function(D){var O,B,z,U,H,J,N=this,k=N.fullLayout,nt=N.isCameraChanged(D),it=N.isAspectChanged(D),ut=nt||it;if(ut){var Q={};nt&&(O=N.getCamera(),z=(B=y.nestedProperty(D,N.id+".camera")).get(),Q[N.id+".camera"]=z),it&&(U=N.glplot.getAspectratio(),J=(H=y.nestedProperty(D,N.id+".aspectratio")).get(),Q[N.id+".aspectratio"]=J),u.call("_storeDirectGUIEdit",D,k._preGUI,Q),nt&&(B.set(O),y.nestedProperty(k,N.id+".camera").set(O)),it&&(H.set(U),y.nestedProperty(k,N.id+".aspectratio").set(U),N.glplot.redraw())}return ut},b.updateFx=function(D,N){var k=this,O=k.camera;if(O)if("orbit"===D)O.mode="orbit",O.keyBindingMode="rotate";else if("turntable"===D){O.up=[0,0,1],O.mode="turntable",O.keyBindingMode="rotate";var B=k.graphDiv,z=B._fullLayout,U=k.fullSceneLayout.camera,H=U.up.x,J=U.up.y,nt=U.up.z;if(nt/Math.sqrt(H*H+J*J+nt*nt)<.999){var it=k.id+".camera.up",ut={x:0,y:0,z:1},Q={};Q[it]=ut;var j=B.layout;u.call("_storeDirectGUIEdit",j,z._preGUI,Q),U.up=ut,y.nestedProperty(j,it).set(ut)}}else O.keyBindingMode=D;k.fullSceneLayout.hovermode=N},b.toImage=function(D){var N=this;D||(D="png"),N.staticMode&&N.container.appendChild(p),N.glplot.redraw();var k=N.glplot.gl,O=k.drawingBufferWidth,B=k.drawingBufferHeight;k.bindFramebuffer(k.FRAMEBUFFER,null);var z=new Uint8Array(O*B*4);k.readPixels(0,0,O,B,k.RGBA,k.UNSIGNED_BYTE,z),function d(D,N,k){for(var O=0,B=k-1;O<B;++O,--B)for(var z=0;z<N;++z)for(var U=0;U<4;++U){var H=4*(N*O+z)+U,J=4*(N*B+z)+U,nt=D[H];D[H]=D[J],D[J]=nt}}(z,O,B),function F(D,N,k){for(var O=0;O<k;++O)for(var B=0;B<N;++B){var z=4*(N*O+B),U=D[z+3];if(U>0)for(var H=255/U,J=0;J<3;++J)D[z+J]=Math.min(H*D[z+J],255)}}(z,O,B);var U=document.createElement("canvas");U.width=O,U.height=B;var nt,H=U.getContext("2d",{willReadFrequently:!0}),J=H.createImageData(O,B);switch(J.data.set(z),H.putImageData(J,0,0),D){case"jpeg":nt=U.toDataURL("image/jpeg");break;case"webp":nt=U.toDataURL("image/webp");break;default:nt=U.toDataURL("image/png")}return N.staticMode&&N.container.removeChild(p),nt},b.setConvert=function(){for(var N=0;N<3;N++){var k=this.fullSceneLayout[x[N]];r.setConvert(k,this.fullLayout),k.setScale=y.noop}},b.make4thDimension=function(){var D=this,k=D.graphDiv._fullLayout;D._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},r.setConvert(D._mockAxis,k)},q.exports=M},90060:function(q){"use strict";q.exports=function(t,A,g,i){i=i||t.length;for(var P=new Array(i),C=0;C<i;C++)P[C]=[t[C],A[C],g[C]];return P}},10820:function(q,W,t){"use strict";var A=t(41940),g=t(85594),i=t(22399),P=t(29241),C=t(53777),u=t(35025),y=t(1426).extendFlat,e=A({editType:"calc"});e.family.dflt='"Open Sans", verdana, arial, sans-serif',e.size.dflt=12,e.color.dflt=i.defaultLine,q.exports={font:e,title:{text:{valType:"string",editType:"layoutstyle"},font:A({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:y(u({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:i.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:i.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:i.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:P.newshape,activeshape:P.activeshape,newselection:C.newselection,activeselection:C.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:y({},g.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:A({editType:"layoutstyle"})}}},77734:function(q,W,t){"use strict";var A=t(78607),g="1.10.1",i='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',P=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',i].join(" "),C=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),y={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:i,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:P,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:P,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:C,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:C,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},e=A(y);q.exports={requiredVersion:g,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:y,styleValuesNonMapbox:e,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+g+"."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",e.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},13056:function(q,W,t){"use strict";var A=t(71828);q.exports=function(i,P){var C=i.split(" "),u=C[0],y=C[1],e=A.isArrayOrTypedArray(P)?A.mean(P):P,r=.5+e/100,l=1.5+e/100,a=["",""],s=[0,0];switch(u){case"top":a[0]="top",s[1]=-l;break;case"bottom":a[0]="bottom",s[1]=l}switch(y){case"left":a[1]="right",s[0]=-r;break;case"right":a[1]="left",s[0]=r}return{anchor:a[0]&&a[1]?a.join("-"):a[0]?a[0]:a[1]?a[1]:"center",offset:s}}},50101:function(q,W,t){"use strict";var A=t(44517),g=t(71828),i=g.strTranslate,P=g.strScale,C=t(27659).AU,u=t(77922),y=t(39898),e=t(91424),r=t(63893),l=t(10481),a="mapbox",s=W.constants=t(77734);function f(m){return"string"==typeof m&&(-1!==s.styleValuesMapbox.indexOf(m)||0===m.indexOf("mapbox://")||0===m.indexOf("stamen"))}W.name=a,W.attr="subplot",W.idRoot=a,W.idRegex=W.attrRegex=g.counterRegex(a),W.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},W.layoutAttributes=t(23585),W.supplyLayoutDefaults=t(77882),W.plot=function(h){var w=h._fullLayout,p=h.calcdata,o=w._subplots[a];if(A.version!==s.requiredVersion)throw new Error(s.wrongVersionErrorMsg);var v=function c(m,h){var w=m._fullLayout;if(""===m._context.mapboxAccessToken)return"";for(var o=[],v=[],M=!1,b=!1,L=0;L<h.length;L++){var x=w[h[L]],S=x.accesstoken;f(x.style)&&(S?g.pushUnique(o,S):(f(x._input.style)&&(g.error("Uses Mapbox map style, but did not set an access token."),M=!0),b=!0)),S&&g.pushUnique(v,S)}if(b){var T=M?s.noAccessTokenErrorMsg:s.missingStyleErrorMsg;throw g.error(T),new Error(T)}return o.length?(o.length>1&&g.warn(s.multipleTokensErrorMsg),o[0]):(v.length&&g.log(["Listed mapbox access token(s)",v.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(h,o);A.accessToken=v;for(var M=0;M<o.length;M++){var b=o[M],L=C(p,a,b),x=w[b],S=x._subplot;S||(S=new l(h,b),w[b]._subplot=S),S.viewInitial||(S.viewInitial={center:g.extendFlat({},x.center),zoom:x.zoom,bearing:x.bearing,pitch:x.pitch}),S.plot(L,w,h._promises)}},W.clean=function(m,h,w,p){for(var o=p._subplots[a]||[],v=0;v<o.length;v++){var M=o[v];!h[M]&&p[M]._subplot&&p[M]._subplot.destroy()}},W.toSVG=function(m){for(var h=m._fullLayout,w=h._subplots[a],p=h._size,o=0;o<w.length;o++){var v=h[w[o]],M=v.domain,L=v._subplot.toImage("png");h._glimages.append("svg:image").attr({xmlns:u.svg,"xlink:href":L,x:p.l+p.w*M.x[0],y:p.t+p.h*(1-M.y[1]),width:p.w*(M.x[1]-M.x[0]),height:p.h*(M.y[1]-M.y[0]),preserveAspectRatio:"none"});var S=y.select(v._subplot.div);if(null!==S.select(".mapboxgl-ctrl-logo").node().offsetParent){var n=h._glimages.append("g");n.attr("transform",i(p.l+p.w*M.x[0]+10,p.t+p.h*(1-M.y[0])-31)),n.append("path").attr("d",s.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),n.append("path").attr("d",s.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),n.append("path").attr("d",s.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),n.append("polygon").attr("points",s.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var E=S.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),d=h._glimages.append("g"),F=d.append("text");F.text(E).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":E});var D=e.bBox(F.node()),N=p.w*(M.x[1]-M.x[0]);if(D.width>N/2){var k=E.split("|").join("<br>");F.text(k).attr("data-unformatted",k).call(r.convertToTspans,m),D=e.bBox(F.node())}F.attr("transform",i(-3,8-D.height)),d.insert("rect",".static-attribution").attr({x:-D.width-6,y:-D.height-3,width:D.width+6,height:D.height+3,fill:"rgba(255, 255, 255, 0.75)"});var O=1;D.width+6>N&&(O=N/(D.width+6));var B=[p.l+p.w*M.x[1],p.t+p.h*(1-M.y[0])];d.attr("transform",i(B[0],B[1])+P(O))}},W.updateFx=function(m){for(var h=m._fullLayout,w=h._subplots[a],p=0;p<w.length;p++)h[w[p]]._subplot.updateFx(h)}},67911:function(q,W,t){"use strict";var A=t(71828),g=t(63893).sanitizeHTML,i=t(13056),P=t(77734);function C(l,a){this.subplot=l,this.uid=l.uid+"-"+a,this.index=a,this.idSource="source-"+this.uid,this.idLayer=P.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var u=C.prototype;function y(l){if(!l.visible)return!1;var a=l.source;if(Array.isArray(a)&&a.length>0){for(var s=0;s<a.length;s++)if("string"!=typeof a[s]||0===a[s].length)return!1;return!0}return A.isPlainObject(a)||"string"==typeof a&&a.length>0}function e(l){var a={},s={};switch(l.type){case"circle":A.extendFlat(s,{"circle-radius":l.circle.radius,"circle-color":l.color,"circle-opacity":l.opacity});break;case"line":A.extendFlat(s,{"line-width":l.line.width,"line-color":l.color,"line-opacity":l.opacity,"line-dasharray":l.line.dash});break;case"fill":A.extendFlat(s,{"fill-color":l.color,"fill-outline-color":l.fill.outlinecolor,"fill-opacity":l.opacity});break;case"symbol":var c=l.symbol,f=i(c.textposition,c.iconsize);A.extendFlat(a,{"icon-image":c.icon+"-15","icon-size":c.iconsize/10,"text-field":c.text,"text-size":c.textfont.size,"text-anchor":f.anchor,"text-offset":f.offset,"symbol-placement":c.placement}),A.extendFlat(s,{"icon-color":l.color,"text-color":c.textfont.color,"text-opacity":l.opacity});break;case"raster":A.extendFlat(s,{"raster-fade-duration":0,"raster-opacity":l.opacity})}return{layout:a,paint:s}}u.update=function(a){this.visible?this.needsNewImage(a)?this.updateImage(a):this.needsNewSource(a)?(this.removeLayer(),this.updateSource(a),this.updateLayer(a)):this.needsNewLayer(a)?this.updateLayer(a):this.updateStyle(a):(this.updateSource(a),this.updateLayer(a)),this.visible=y(a)},u.needsNewImage=function(l){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===l.sourcetype&&(this.source!==l.source||JSON.stringify(this.coordinates)!==JSON.stringify(l.coordinates))},u.needsNewSource=function(l){return this.sourceType!==l.sourcetype||JSON.stringify(this.source)!==JSON.stringify(l.source)||this.layerType!==l.type},u.needsNewLayer=function(l){return this.layerType!==l.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},u.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},u.updateImage=function(l){this.subplot.map.getSource(this.idSource).updateImage({url:l.source,coordinates:l.coordinates});var s=this.findFollowingMapboxLayerId(this.lookupBelow());null!==s&&this.subplot.map.moveLayer(this.idLayer,s)},u.updateSource=function(l){var a=this.subplot.map;if(a.getSource(this.idSource)&&a.removeSource(this.idSource),this.sourceType=l.sourcetype,this.source=l.source,y(l)){var s=function r(l){var f,a=l.sourcetype,s=l.source,c={type:a};return"geojson"===a?f="data":"vector"===a?f="string"==typeof s?"url":"tiles":"raster"===a?(f="tiles",c.tileSize=256):"image"===a&&(f="url",c.coordinates=l.coordinates),c[f]=s,l.sourceattribution&&(c.attribution=g(l.sourceattribution)),c}(l);a.addSource(this.idSource,s)}},u.findFollowingMapboxLayerId=function(l){if("traces"===l)for(var a=this.subplot.getMapLayers(),s=0;s<a.length;s++){var c=a[s].id;if("string"==typeof c&&0===c.indexOf(P.traceLayerPrefix)){l=c;break}}return l},u.updateLayer=function(l){var a=this.subplot,s=e(l),c=this.lookupBelow(),f=this.findFollowingMapboxLayerId(c);this.removeLayer(),y(l)&&a.addLayer({id:this.idLayer,source:this.idSource,"source-layer":l.sourcelayer||"",type:l.type,minzoom:l.minzoom,maxzoom:l.maxzoom,layout:s.layout,paint:s.paint},f),this.layerType=l.type,this.below=c},u.updateStyle=function(l){if(y(l)){var a=e(l);this.subplot.setOptions(this.idLayer,"setLayoutProperty",a.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",a.paint)}},u.removeLayer=function(){var l=this.subplot.map;l.getLayer(this.idLayer)&&l.removeLayer(this.idLayer)},u.dispose=function(){var l=this.subplot.map;l.getLayer(this.idLayer)&&l.removeLayer(this.idLayer),l.getSource(this.idSource)&&l.removeSource(this.idSource)},q.exports=function(a,s,c){var f=new C(a,s);return f.update(c),f}},23585:function(q,W,t){"use strict";var A=t(71828),g=t(7901).defaultLine,i=t(27670).Y,P=t(41940),C=t(82196).textposition,u=t(30962).overrideAll,y=t(44467).templatedArray,e=t(77734),r=P({});r.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(q.exports=u({_arrayAttrRegexps:[A.counterRegex("mapbox",".layers",!0)],domain:i({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:e.styleValuesMapbox.concat(e.styleValuesNonMapbox),dflt:e.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:y("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:g},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:g}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:r,textposition:A.extendFlat({},C,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},77882:function(q,W,t){"use strict";var A=t(71828),g=t(49119),i=t(85501),P=t(23585);function C(y,e,r,l){r("accesstoken",l.accessToken),r("style"),r("center.lon"),r("center.lat"),r("zoom"),r("bearing"),r("pitch");var a=r("bounds.west"),s=r("bounds.east"),c=r("bounds.south"),f=r("bounds.north");(void 0===a||void 0===s||void 0===c||void 0===f)&&delete e.bounds,i(y,e,{name:"layers",handleItemDefaults:u}),e._input=y}function u(y,e){function r(m,h){return A.coerce(y,e,P.layers,m,h)}if(r("visible")){var c,a=r("sourcetype"),s="raster"===a||"image"===a;r("source"),r("sourceattribution"),"vector"===a&&r("sourcelayer"),"image"===a&&r("coordinates"),s&&(c="raster");var f=r("type",c);s&&"raster"!==f&&(f=e.type="raster",A.log("Source types *raster* and *image* must drawn *raster* layer type.")),r("below"),r("color"),r("opacity"),r("minzoom"),r("maxzoom"),"circle"===f&&r("circle.radius"),"line"===f&&(r("line.width"),r("line.dash")),"fill"===f&&r("fill.outlinecolor"),"symbol"===f&&(r("symbol.icon"),r("symbol.iconsize"),r("symbol.text"),A.coerceFont(r,"symbol.textfont"),r("symbol.textposition"),r("symbol.placement"))}}q.exports=function(e,r,l){g(e,r,l,{type:"mapbox",attributes:P,handleDefaults:C,partition:"y",accessToken:r._mapboxAccessToken})}},10481:function(q,W,t){"use strict";var A=t(44517),g=t(71828),i=t(41327),P=t(73972),C=t(89298),u=t(28569),y=t(30211),e=t(64505),r=e.drawMode,l=e.selectMode,a=t(47322).prepSelect,s=t(47322).clearOutline,c=t(47322).clearSelectionsCache,f=t(47322).selectOnClick,m=t(77734),h=t(67911);function w(L,x){this.id=x,this.gd=L;var S=L._fullLayout,T=L._context;this.container=S._glcontainer.node(),this.isStatic=T.staticPlot,this.uid=S._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(S),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var p=w.prototype;p.plot=function(L,x,S){var E,T=this;T.map&&x[T.id].accesstoken!==T.accessToken&&(T.map.remove(),T.map=null,T.styleObj=null,T.traceHash={},T.layerList=[]),E=new Promise(T.map?function(d,F){T.updateMap(L,x,d,F)}:function(d,F){T.createMap(L,x,d,F)}),S.push(E)},p.createMap=function(L,x,S,T){var n=this,E=x[n.id],d=n.styleObj=v(E.style,x);n.accessToken=E.accesstoken;var F=E.bounds,D=F?[[F.west,F.south],[F.east,F.north]]:null,N=n.map=new A.Map({container:n.div,style:d.style,center:b(E.center),zoom:E.zoom,bearing:E.bearing,pitch:E.pitch,maxBounds:D,interactive:!n.isStatic,preserveDrawingBuffer:n.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new A.AttributionControl({compact:!0}));N._canvas.style.left="0px",N._canvas.style.top="0px",n.rejectOnError(T),n.isStatic||n.initFx(L,x);var k=[];k.push(new Promise(function(O){N.once("load",O)})),k=k.concat(i.fetchTraceGeoData(L)),Promise.all(k).then(function(){n.fillBelowLookup(L,x),n.updateData(L),n.updateLayout(x),n.resolveOnRender(S)}).catch(T)},p.updateMap=function(L,x,S,T){var n=this,E=n.map,d=x[this.id];n.rejectOnError(T);var F=[],D=v(d.style,x);JSON.stringify(n.styleObj)!==JSON.stringify(D)&&(n.styleObj=D,E.setStyle(D.style),n.traceHash={},F.push(new Promise(function(N){E.once("styledata",N)}))),F=F.concat(i.fetchTraceGeoData(L)),Promise.all(F).then(function(){n.fillBelowLookup(L,x),n.updateData(L),n.updateLayout(x),n.resolveOnRender(S)}).catch(T)},p.fillBelowLookup=function(L,x){var n,E,T=x[this.id].layers,d=this.belowLookup={},F=!1;for(n=0;n<L.length;n++){var D=L[n][0].trace,N=D._module;"string"==typeof D.below?E=D.below:N.getBelow&&(E=N.getBelow(D,this)),""===E&&(F=!0),d["trace-"+D.uid]=E||""}for(n=0;n<T.length;n++){var k=T[n];d["layout-"+n]=E="string"==typeof k.below?k.below:F?"traces":""}var B,z,O={};for(B in d)O[E=d[B]]?O[E].push(B):O[E]=[B];for(E in O){var U=O[E];if(U.length>1)for(n=0;n<U.length;n++)0===(B=U[n]).indexOf("trace-")?(z=B.split("trace-")[1],this.traceHash[z]&&(this.traceHash[z].below=null)):0===B.indexOf("layout-")&&(z=B.split("layout-")[1],this.layerList[z]&&(this.layerList[z].below=null))}};var o={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function v(L,x){var S={};if(g.isPlainObject(L))S.id=L.id,S.style=L;else if("string"==typeof L)if(S.id=L,-1!==m.styleValuesMapbox.indexOf(L))S.style=M(L);else if(m.stylesNonMapbox[L]){S.style=m.stylesNonMapbox[L];var T=S.style.sources["plotly-"+L],n=T?T.tiles:void 0;n&&n[0]&&"?api_key="===n[0].slice(-9)&&(n[0]+=x._mapboxAccessToken)}else S.style=L;else S.id=m.styleValueDflt,S.style=M(m.styleValueDflt);return S.transition={duration:0,delay:0},S}function M(L){return m.styleUrlPrefix+L+"-"+m.styleUrlSuffix}function b(L){return[L.lon,L.lat]}p.updateData=function(L){var S,T,n,E,x=this.traceHash,d=L.slice().sort(function(O,B){return o[O[0].trace.type]-o[B[0].trace.type]});for(n=0;n<d.length;n++){var F=d[n],D=!1;(S=x[(T=F[0].trace).uid])&&(S.type===T.type?(S.update(F),D=!0):S.dispose()),!D&&T._module&&(x[T.uid]=T._module.plot(this,F))}var N=Object.keys(x);t:for(n=0;n<N.length;n++){var k=N[n];for(E=0;E<L.length;E++)if(k===(T=L[E][0].trace).uid)continue t;(S=x[k]).dispose(),delete x[k]}},p.updateLayout=function(L){var x=this.map,S=L[this.id];!this.dragging&&!this.wheeling&&(x.setCenter(b(S.center)),x.setZoom(S.zoom),x.setBearing(S.bearing),x.setPitch(S.pitch)),this.updateLayers(L),this.updateFramework(L),this.updateFx(L),this.map.resize(),this.gd._context._scrollZoom.mapbox?x.scrollZoom.enable():x.scrollZoom.disable()},p.resolveOnRender=function(L){var x=this.map;x.on("render",function S(){x.loaded()&&(x.off("render",S),setTimeout(L,10))})},p.rejectOnError=function(L){var x=this.map;function S(){L(new Error(m.mapOnErrorMsg))}x.once("error",S),x.once("style.error",S),x.once("source.error",S),x.once("tile.error",S),x.once("layer.error",S)},p.createFramework=function(L){var x=this,S=x.div=document.createElement("div");S.id=x.uid,S.style.position="absolute",x.container.appendChild(S),x.xaxis={_id:"x",c2p:function(T){return x.project(T).x}},x.yaxis={_id:"y",c2p:function(T){return x.project(T).y}},x.updateFramework(L),x.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},C.setConvert(x.mockAxis,L)},p.initFx=function(L,x){var S=this,T=S.gd,n=S.map;function E(){y.loneUnhover(x._hoverlayer)}function d(){var F=S.getView();T.emit("plotly_relayouting",S.getViewEditsWithDerived(F))}n.on("moveend",function(F){if(S.map){var D=T._fullLayout;if(F.originalEvent||S.wheeling){var N=D[S.id];P.call("_storeDirectGUIEdit",T.layout,D._preGUI,S.getViewEdits(N));var k=S.getView();N._input.center=N.center=k.center,N._input.zoom=N.zoom=k.zoom,N._input.bearing=N.bearing=k.bearing,N._input.pitch=N.pitch=k.pitch,T.emit("plotly_relayout",S.getViewEditsWithDerived(k))}F.originalEvent&&"mouseup"===F.originalEvent.type?S.dragging=!1:S.wheeling&&(S.wheeling=!1),D._rehover&&D._rehover()}}),n.on("wheel",function(){S.wheeling=!0}),n.on("mousemove",function(F){var D=S.div.getBoundingClientRect(),N=[F.originalEvent.offsetX,F.originalEvent.offsetY];F.target.getBoundingClientRect=function(){return D},S.xaxis.p2c=function(){return n.unproject(N).lng},S.yaxis.p2c=function(){return n.unproject(N).lat},T._fullLayout._rehover=function(){T._fullLayout._hoversubplot===S.id&&T._fullLayout[S.id]&&y.hover(T,F,S.id)},y.hover(T,F,S.id),T._fullLayout._hoversubplot=S.id}),n.on("dragstart",function(){S.dragging=!0,E()}),n.on("zoomstart",E),n.on("mouseout",function(){T._fullLayout._hoversubplot=null}),n.on("drag",d),n.on("zoom",d),n.on("dblclick",function(){var F=T._fullLayout[S.id];P.call("_storeDirectGUIEdit",T.layout,T._fullLayout._preGUI,S.getViewEdits(F));var D=S.viewInitial;n.setCenter(b(D.center)),n.setZoom(D.zoom),n.setBearing(D.bearing),n.setPitch(D.pitch);var N=S.getView();F._input.center=F.center=N.center,F._input.zoom=F.zoom=N.zoom,F._input.bearing=F.bearing=N.bearing,F._input.pitch=F.pitch=N.pitch,T.emit("plotly_doubleclick",null),T.emit("plotly_relayout",S.getViewEditsWithDerived(N))}),S.clearOutline=function(){c(S.dragOptions),s(S.dragOptions.gd)},S.onClickInPanFn=function(F){return function(D){var N=T._fullLayout.clickmode;N.indexOf("select")>-1&&f(D.originalEvent,T,[S.xaxis],[S.yaxis],S.id,F),N.indexOf("event")>-1&&y.click(T,D.originalEvent)}}},p.updateFx=function(L){var x=this,S=x.map;if(!x.isStatic){var E=L.dragmode;x.dragOptions=g.extendDeep(x.dragOptions||{},{dragmode:L.dragmode,element:x.div,gd:x.gd,plotinfo:{id:x.id,domain:L[x.id].domain,xaxis:x.xaxis,yaxis:x.yaxis,fillRangeItems:function(D,N){N.isRect?(D.range={})[x.id]=[n([N.xmin,N.ymin]),n([N.xmax,N.ymax])]:(D.lassoPoints={})[x.id]=N.map(n)}},xaxes:[x.xaxis],yaxes:[x.yaxis],subplot:x.id}),S.off("click",x.onClickInPanHandler),l(E)||r(E)?(S.dragPan.disable(),S.on("zoomstart",x.clearOutline),x.dragOptions.prepFn=function(D,N,k){a(D,N,k,x.dragOptions,E)},u.init(x.dragOptions)):(S.dragPan.enable(),S.off("zoomstart",x.clearOutline),x.div.onmousedown=null,x.div.ontouchstart=null,x.div.removeEventListener("touchstart",x.div._ontouchstart),x.onClickInPanHandler=x.onClickInPanFn(x.dragOptions),S.on("click",x.onClickInPanHandler))}function n(D){var N=x.map.unproject(D);return[N.lng,N.lat]}},p.updateFramework=function(L){var x=L[this.id].domain,S=L._size,T=this.div.style;T.width=S.w*(x.x[1]-x.x[0])+"px",T.height=S.h*(x.y[1]-x.y[0])+"px",T.left=S.l+x.x[0]*S.w+"px",T.top=S.t+(1-x.y[1])*S.h+"px",this.xaxis._offset=S.l+x.x[0]*S.w,this.xaxis._length=S.w*(x.x[1]-x.x[0]),this.yaxis._offset=S.t+(1-x.y[1])*S.h,this.yaxis._length=S.h*(x.y[1]-x.y[0])},p.updateLayers=function(L){var n,S=L[this.id].layers,T=this.layerList;if(S.length!==T.length){for(n=0;n<T.length;n++)T[n].dispose();for(T=this.layerList=[],n=0;n<S.length;n++)T.push(h(this,n,S[n]))}else for(n=0;n<S.length;n++)T[n].update(S[n])},p.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},p.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},p.setOptions=function(L,x,S){for(var T in S)this.map[x](L,T,S[T])},p.getMapLayers=function(){return this.map.getStyle().layers},p.addLayer=function(L,x){var S=this.map;if("string"==typeof x){if(""===x)return void S.addLayer(L,x);for(var T=this.getMapLayers(),n=0;n<T.length;n++)if(x===T[n].id)return void S.addLayer(L,x);g.warn(["Trying to add layer with *below* value",x,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}S.addLayer(L)},p.project=function(L){return this.map.project(new A.LngLat(L[0],L[1]))},p.getView=function(){var L=this.map,x=L.getCenter(),n={lon:x.lng,lat:x.lat},E=L.getCanvas(),d=parseInt(E.style.width),F=parseInt(E.style.height);return{center:n,zoom:L.getZoom(),bearing:L.getBearing(),pitch:L.getPitch(),_derived:{coordinates:[L.unproject([0,0]).toArray(),L.unproject([d,0]).toArray(),L.unproject([d,F]).toArray(),L.unproject([0,F]).toArray()]}}},p.getViewEdits=function(L){for(var x=this.id,S=["center","zoom","bearing","pitch"],T={},n=0;n<S.length;n++){var E=S[n];T[x+"."+E]=L[E]}return T},p.getViewEditsWithDerived=function(L){var x=this.id,S=this.getViewEdits(L);return S[x+"._derived"]=L._derived,S},q.exports=w},35025:function(q){"use strict";q.exports=function(W){var t=W.editType;return{t:{valType:"number",dflt:0,editType:t},r:{valType:"number",dflt:0,editType:t},b:{valType:"number",dflt:0,editType:t},l:{valType:"number",dflt:0,editType:t},editType:t}}},74875:function(q,W,t){"use strict";var A=t(39898),g=t(84096).Dq,i=t(60721).FF,P=t(92770),C=t(73972),u=t(86281),y=t(44467),e=t(71828),r=t(7901),l=t(50606).BADNUM,a=t(41675),s=t(51873).clearOutline,c=t(21479),f=t(85594),m=t(31391),h=t(27659).a0,w=e.relinkPrivateKeys,p=e._,o=q.exports={};e.extendFlat(o,C),o.attributes=t(9012),o.attributes.type.values=o.allTypes,o.fontAttrs=t(41940),o.layoutAttributes=t(10820),o.fontWeight="normal";var v=o.transformsRegistry,M=t(31137);o.executeAPICommand=M.executeAPICommand,o.computeAPICommandBindings=M.computeAPICommandBindings,o.manageCommandObserver=M.manageCommandObserver,o.hasSimpleAPICommandBindings=M.hasSimpleAPICommandBindings,o.redrawText=function(Z){return Z=e.getGraphDiv(Z),new Promise(function(G){setTimeout(function(){!Z._fullLayout||(C.getComponentMethod("annotations","draw")(Z),C.getComponentMethod("legend","draw")(Z),C.getComponentMethod("colorbar","draw")(Z),G(o.previousPromises(Z)))},300)})},o.resize=function(Z){Z=e.getGraphDiv(Z);var G,K=new Promise(function(at,$){(!Z||e.isHidden(Z))&&$(new Error("Resize must be passed a displayed plot div element.")),Z._redrawTimer&&clearTimeout(Z._redrawTimer),Z._resolveResize&&(G=Z._resolveResize),Z._resolveResize=at,Z._redrawTimer=setTimeout(function(){if(!Z.layout||Z.layout.width&&Z.layout.height||e.isHidden(Z))at(Z);else{delete Z.layout.width,delete Z.layout.height;var X=Z.changed;Z.autoplay=!0,C.call("relayout",Z,{autosize:!0}).then(function(){Z.changed=X,Z._resolveResize===at&&(delete Z._resolveResize,at(Z))})}},100)});return G&&G(K),K},o.previousPromises=function(Z){if((Z._promises||[]).length)return Promise.all(Z._promises).then(function(){Z._promises=[]})},o.addLinks=function(Z){if(Z._context.showLink||Z._context.showSources){var G=Z._fullLayout,K=e.ensureSingle(G._paper,"text","js-plot-link-container",function(st){st.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:r.defaultLine,"pointer-events":"all"}).each(function(){var dt=A.select(this);dt.append("tspan").classed("js-link-to-tool",!0),dt.append("tspan").classed("js-link-spacer",!0),dt.append("tspan").classed("js-sourcelinks",!0)})}),at=K.node(),$={y:G._paper.attr("height")-9};document.body.contains(at)&&at.getComputedTextLength()>=G.width-20?($["text-anchor"]="start",$.x=5):($["text-anchor"]="end",$.x=G._paper.attr("width")-7),K.attr($);var X=K.select(".js-link-to-tool"),rt=K.select(".js-link-spacer"),et=K.select(".js-sourcelinks");Z._context.showSources&&Z._context.showSources(Z),Z._context.showLink&&function b(Z,G){G.text("");var K=G.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(Z._context.linkText+" "+String.fromCharCode(187));if(Z._context.sendData)K.on("click",function(){o.sendDataToCloud(Z)});else{var at=window.location.pathname.split("/"),$=window.location.search;K.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+at[2].split(".")[0]+"/"+at[1]+$})}}(Z,X),rt.text(X.text()&&et.text()?" - ":"")}},o.sendDataToCloud=function(Z){var G=(window.PLOTLYENV||{}).BASE_URL||Z._context.plotlyServerURL;if(G){Z.emit("plotly_beforeexport");var K=A.select(Z).append("div").attr("id","hiddenform").style("display","none"),at=K.append("form").attr({action:G+"/external",method:"post",target:"_blank"});return at.append("input").attr({type:"text",name:"data"}).node().value=o.graphJson(Z,!1,"keepdata"),at.node().submit(),K.remove(),Z.emit("plotly_afterexport"),!1}};var L=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],x=["year","month","dayMonth","dayMonthYear"];function n(Z,G){var K=Z._context.locale;K||(K="en-US");var at=!1,$={};function X(gt){for(var Lt=!0,It=0;It<G.length;It++){var Mt=G[It];$[Mt]||(gt[Mt]?$[Mt]=gt[Mt]:Lt=!1)}Lt&&(at=!0)}for(var rt=0;rt<2;rt++){for(var et=Z._context.locales,st=0;st<2;st++){var dt=(et[K]||{}).format;if(dt&&(X(dt),at))break;et=C.localeRegistry}var bt=K.split("-")[0];if(at||bt===K)break;K=bt}return at||X(C.localeRegistry.en.format),$}function F(Z,G){var K={_fullLayout:G},at="x"===Z._id.charAt(0),$=Z._mainAxis._anchorAxis,X="",rt="",et="";if($&&(et=$._mainAxis._id,X=at?Z._id+et:et+Z._id),!X||!G._plots[X]){X="";for(var st=Z._counterAxes,dt=0;dt<st.length;dt++){var bt=st[dt],gt=at?Z._id+bt:bt+Z._id;rt||(rt=gt);var Lt=a.getFromId(K,bt);if(et&&Lt.overlaying===et){X=gt;break}}}return X||rt}function D(Z){var G=Z.transforms;if(Array.isArray(G)&&G.length)for(var K=0;K<G.length;K++){var at=G[K],$=at._module||v[at.type];if($&&$.makesData)return!0}return!1}function N(Z,G,K,at){for(var $=Z.transforms,X=[Z],rt=0;rt<$.length;rt++){var et=$[rt],st=v[et.type];st&&st.transform&&(X=st.transform(X,{transform:et,fullTrace:Z,fullData:G,layout:K,fullLayout:at,transformIndex:rt}))}return X}function k(Z){return"string"==typeof Z&&"px"===Z.substr(Z.length-2)&&parseFloat(Z)}function O(Z){var G=Z.margin;if(!Z._size){var K=Z._size={l:Math.round(G.l),r:Math.round(G.r),t:Math.round(G.t),b:Math.round(G.b),p:Math.round(G.pad)};K.w=Math.round(Z.width)-K.l-K.r,K.h=Math.round(Z.height)-K.t-K.b}Z._pushmargin||(Z._pushmargin={}),Z._pushmarginIds||(Z._pushmarginIds={}),Z._reservedMargin||(Z._reservedMargin={})}o.supplyDefaults=function(Z,G){var K=G&&G.skipUpdateCalc,at=Z._fullLayout||{};if(at._skipDefaults)delete at._skipDefaults;else{var gt,$=Z._fullLayout={},X=Z.layout||{},rt=Z._fullData||[],et=Z._fullData=[],st=Z.data||[],dt=Z.calcdata||[],bt=Z._context||{};Z._transitionData||o.createTransitionData(Z),$._dfltTitle={plot:p(Z,"Click to enter Plot title"),x:p(Z,"Click to enter X axis title"),y:p(Z,"Click to enter Y axis title"),colorbar:p(Z,"Click to enter Colorscale title"),annotation:p(Z,"new text")},$._traceWord=p(Z,"trace");var Lt=n(Z,L);if($._mapboxAccessToken=bt.mapboxAccessToken,at._initialAutoSizeIsDone){var It=at.width,Mt=at.height;o.supplyLayoutGlobalDefaults(X,$,Lt),X.width||($.width=It),X.height||($.height=Mt),o.sanitizeMargins($)}else{o.supplyLayoutGlobalDefaults(X,$,Lt);var xt=!X.width||!X.height,At=$.autosize;xt&&(At||bt.autosizable)?o.plotAutoSize(Z,X,$):xt&&o.sanitizeMargins($),!At&&xt&&(X.width=$.width,X.height=$.height)}$._d3locale=function E(Z,G){return Z.decimal=G.charAt(0),Z.thousands=G.charAt(1),{numberFormat:function(K){try{K=i(Z).format(e.adjustFormat(K))}catch(at){return e.warnBadFormat(K),e.noFormat}return K},timeFormat:g(Z).utcFormat}}(Lt,$.separators),$._extraFormat=n(Z,x),$._initialAutoSizeIsDone=!0,$._dataLength=st.length,$._modules=[],$._visibleModules=[],$._basePlotModules=[];var Pt=$._subplots=function T(){var K,at,Z=C.collectableSubplotTypes,G={};if(!Z){Z=[];var $=C.subplotsRegistry;for(var X in $){var et=$[X].attr;if(et&&(Z.push(X),Array.isArray(et)))for(at=0;at<et.length;at++)e.pushUnique(Z,et[at])}}for(K=0;K<Z.length;K++)G[Z[K]]=[];return G}(),Vt=$._splomAxes={x:{},y:{}},te=$._splomSubplots={};$._splomGridDflt={},$._scatterStackOpts={},$._firstScatter={},$._alignmentOpts={},$._colorAxes={},$._requestRangeslider={},$._traceUids=function S(Z,G){var $,X,K=G.length,at=[];for($=0;$<Z.length;$++){var rt=Z[$]._fullInput;rt!==X&&at.push(rt),X=rt}var et=at.length,st=new Array(K),dt={};function bt(It,Mt){st[Mt]=It,dt[It]=1}function gt(It,Mt){if(It&&"string"==typeof It&&!dt[It])return bt(It,Mt),!0}for($=0;$<K;$++){var Lt=G[$].uid;"number"==typeof Lt&&(Lt=String(Lt)),!gt(Lt,$)&&($<et&&gt(at[$].uid,$)||bt(e.randstr(dt),$))}return st}(rt,st),$._globalTransforms=(Z._context||{}).globalTransforms,o.supplyDataDefaults(st,et,X,$);var Qt=Object.keys(Vt.x),Bt=Object.keys(Vt.y);if(Qt.length>1&&Bt.length>1){for(C.getComponentMethod("grid","sizeDefaults")(X,$),gt=0;gt<Qt.length;gt++)e.pushUnique(Pt.xaxis,Qt[gt]);for(gt=0;gt<Bt.length;gt++)e.pushUnique(Pt.yaxis,Bt[gt]);for(var Ot in te)e.pushUnique(Pt.cartesian,Ot)}if($._has=o._hasPlotType.bind($),rt.length===et.length)for(gt=0;gt<et.length;gt++)w(et[gt],rt[gt]);o.supplyLayoutModuleDefaults(X,$,et,Z._transitionData);var qt=$._visibleModules,ie=[];for(gt=0;gt<qt.length;gt++){var oe=qt[gt].crossTraceDefaults;oe&&e.pushUnique(ie,oe)}for(gt=0;gt<ie.length;gt++)ie[gt](et,$);$._hasOnlyLargeSploms=1===$._basePlotModules.length&&"splom"===$._basePlotModules[0].name&&Qt.length>15&&Bt.length>15&&0===$.shapes.length&&0===$.images.length,o.linkSubplots(et,$,rt,at),o.cleanPlot(et,$,rt,at);var pe=!(!at._has||!at._has("gl2d")),de=!(!$._has||!$._has("gl2d")),Et=!(!at._has||!at._has("cartesian"))||pe,St=!(!$._has||!$._has("cartesian"))||de;Et&&!St?at._bgLayer.remove():St&&!Et&&($._shouldCreateBgLayer=!0),at._zoomlayer&&!Z._dragging&&s({_fullLayout:at}),function d(Z,G){var K,at=[];G.meta&&(K=G._meta={meta:G.meta,layout:{meta:G.meta}});for(var $=0;$<Z.length;$++){var X=Z[$];X.meta?at[X.index]=X._meta={meta:X.meta}:G.meta&&(X._meta={meta:G.meta}),G.meta&&(X._meta.layout={meta:G.meta})}at.length&&(K||(K=G._meta={}),K.data=at)}(et,$),w($,at),C.getComponentMethod("colorscale","crossTraceDefaults")(et,$),$._preGUI||($._preGUI={}),$._tracePreGUI||($._tracePreGUI={});var Nt,Dt=$._tracePreGUI,Ft={};for(Nt in Dt)Ft[Nt]="old";for(gt=0;gt<et.length;gt++)Ft[Nt=et[gt]._fullInput.uid]||(Dt[Nt]={}),Ft[Nt]="new";for(Nt in Ft)"old"===Ft[Nt]&&delete Dt[Nt];O($),C.getComponentMethod("rangeslider","makeData")($),!K&&dt.length===et.length&&o.supplyDefaultsUpdateCalc(dt,et)}},o.supplyDefaultsUpdateCalc=function(Z,G){for(var K=0;K<G.length;K++){var at=G[K],$=(Z[K]||[])[0];if($&&$.trace){var X=$.trace;if(X._hasCalcTransform){var et,st,dt,rt=X._arrayAttrs;for(et=0;et<rt.length;et++)dt=e.nestedProperty(X,st=rt[et]).get().slice(),e.nestedProperty(at,st).set(dt)}$.trace=at}}},o.createTransitionData=function(Z){Z._transitionData||(Z._transitionData={}),Z._transitionData._frames||(Z._transitionData._frames=[]),Z._transitionData._frameHash||(Z._transitionData._frameHash={}),Z._transitionData._counter||(Z._transitionData._counter=0),Z._transitionData._interruptCallbacks||(Z._transitionData._interruptCallbacks=[])},o._hasPlotType=function(Z){var G,K=this._basePlotModules||[];for(G=0;G<K.length;G++)if(K[G].name===Z)return!0;var at=this._modules||[];for(G=0;G<at.length;G++){var $=at[G].name;if($===Z)return!0;var X=C.modules[$];if(X&&X.categories[Z])return!0}return!1},o.cleanPlot=function(Z,G,K,at){var $,X,rt=at._basePlotModules||[];for($=0;$<rt.length;$++){var et=rt[$];et.clean&&et.clean(Z,G,K,at)}var st=at._has&&at._has("gl"),dt=G._has&&G._has("gl");st&&!dt&&void 0!==at._glcontainer&&(at._glcontainer.selectAll(".gl-canvas").remove(),at._glcontainer.selectAll(".no-webgl").remove(),at._glcanvas=null);var bt=!!at._infolayer;t:for($=0;$<K.length;$++){var Lt=K[$].uid;for(X=0;X<Z.length;X++)if(Lt===Z[X].uid)continue t;bt&&at._infolayer.select(".cb"+Lt).remove()}},o.linkSubplots=function(Z,G,K,at){var $,X,rt=at._plots||{},et=G._plots={},st=G._subplots,dt={_fullData:Z,_fullLayout:G},bt=st.cartesian.concat(st.gl2d||[]);for($=0;$<bt.length;$++){var xt,gt=bt[$],Lt=rt[gt],It=a.getFromId(dt,gt,"x"),Mt=a.getFromId(dt,gt,"y");for(Lt?xt=et[gt]=Lt:(xt=et[gt]={}).id=gt,It._counterAxes.push(Mt._id),Mt._counterAxes.push(It._id),It._subplotsWith.push(gt),Mt._subplotsWith.push(gt),xt.xaxis=It,xt.yaxis=Mt,xt._hasClipOnAxisFalse=!1,X=0;X<Z.length;X++){var At=Z[X];if(At.xaxis===xt.xaxis._id&&At.yaxis===xt.yaxis._id&&!1===At.cliponaxis){xt._hasClipOnAxisFalse=!0;break}}}var Wt,Gt=a.list(dt,null,!0);for($=0;$<Gt.length;$++){var Pt=null;(Wt=Gt[$]).overlaying&&(Pt=a.getFromId(dt,Wt.overlaying))&&Pt.overlaying&&(Wt.overlaying=!1,Pt=null),Wt._mainAxis=Pt||Wt,Pt&&(Wt.domain=Pt.domain.slice()),Wt._anchorAxis="free"===Wt.anchor?null:a.getFromId(dt,Wt.anchor)}for($=0;$<Gt.length;$++)if((Wt=Gt[$])._counterAxes.sort(a.idSort),Wt._subplotsWith.sort(e.subplotSort),Wt._mainSubplot=F(Wt,G),Wt._counterAxes.length&&(Wt.spikemode&&-1!==Wt.spikemode.indexOf("across")||Wt.automargin&&Wt.mirror&&"free"!==Wt.anchor||C.getComponentMethod("rangeslider","isVisible")(Wt))){var Vt=1,te=0;for(X=0;X<Wt._counterAxes.length;X++){var Qt=a.getFromId(dt,Wt._counterAxes[X]);Vt=Math.min(Vt,Qt.domain[0]),te=Math.max(te,Qt.domain[1])}Vt<te&&(Wt._counterDomainMin=Vt,Wt._counterDomainMax=te)}},o.clearExpandedTraceDefaultColors=function(Z){var G,K,at;for(K=[],(G=Z._module._colorAttrs)||(Z._module._colorAttrs=G=[],u.crawl(Z._module.attributes,function $(rt,et,st,dt){K[dt]=et,K.length=dt+1,"color"===rt.valType&&void 0===rt.dflt&&G.push(K.join("."))})),at=0;at<G.length;at++)e.nestedProperty(Z,"_input."+G[at]).get()||e.nestedProperty(Z,G[at]).set(null)},o.supplyDataDefaults=function(Z,G,K,at){var dt,bt,gt,$=at._modules,X=at._visibleModules,rt=at._basePlotModules,et=0,st=0;function Lt(Bt){G.push(Bt);var Ot=Bt._module;!Ot||(e.pushUnique($,Ot),!0===Bt.visible&&e.pushUnique(X,Ot),e.pushUnique(rt,Bt._module.basePlotModule),et++,!1!==Bt._input.visible&&st++)}at._transformModules=[];var It={},Mt=[],At=y.traceTemplater((K.template||{}).data||{});for(dt=0;dt<Z.length;dt++){if((bt=At.newTrace(gt=Z[dt])).uid=at._traceUids[dt],o.supplyTraceDefaults(gt,bt,st,at,dt),bt.index=dt,bt._input=gt,bt._expandedIndex=et,bt.transforms&&bt.transforms.length)for(var Gt=!1!==gt.visible&&!1===bt.visible,Wt=N(bt,G,K,at),Pt=0;Pt<Wt.length;Pt++){var Vt=Wt[Pt],te={_template:bt._template,type:bt.type,uid:bt.uid+Pt};Gt&&!1===Vt.visible&&delete Vt.visible,o.supplyTraceDefaults(Vt,te,et,at,dt),w(te,Vt),te.index=dt,te._input=gt,te._fullInput=bt,te._expandedIndex=et,te._expandedInput=Vt,Lt(te)}else bt._fullInput=bt,bt._expandedInput=bt,Lt(bt);C.traceIs(bt,"carpetAxis")&&(It[bt.carpet]=bt),C.traceIs(bt,"carpetDependent")&&Mt.push(dt)}for(dt=0;dt<Mt.length;dt++)if((bt=G[Mt[dt]]).visible){var Qt=It[bt.carpet];if(bt._carpet=Qt,!Qt||!Qt.visible){bt.visible=!1;continue}bt.xaxis=Qt.xaxis,bt.yaxis=Qt.yaxis}},o.supplyAnimationDefaults=function(Z){Z=Z||{};var G,K={};function at($,X){return e.coerce(Z||{},K,f,$,X)}if(at("mode"),at("direction"),at("fromcurrent"),Array.isArray(Z.frame))for(K.frame=[],G=0;G<Z.frame.length;G++)K.frame[G]=o.supplyAnimationFrameDefaults(Z.frame[G]||{});else K.frame=o.supplyAnimationFrameDefaults(Z.frame||{});if(Array.isArray(Z.transition))for(K.transition=[],G=0;G<Z.transition.length;G++)K.transition[G]=o.supplyAnimationTransitionDefaults(Z.transition[G]||{});else K.transition=o.supplyAnimationTransitionDefaults(Z.transition||{});return K},o.supplyAnimationFrameDefaults=function(Z){var G={};function K(at,$){return e.coerce(Z||{},G,f.frame,at,$)}return K("duration"),K("redraw"),G},o.supplyAnimationTransitionDefaults=function(Z){var G={};function K(at,$){return e.coerce(Z||{},G,f.transition,at,$)}return K("duration"),K("easing"),G},o.supplyFrameDefaults=function(Z){var G={};function K(at,$){return e.coerce(Z,G,m,at,$)}return K("group"),K("name"),K("traces"),K("baseframe"),K("data"),K("layout"),G},o.supplyTraceDefaults=function(Z,G,K,at,$){var et,X=at.colorway||r.defaults,rt=X[K%X.length];function st(Wt,Pt){return e.coerce(Z,G,o.attributes,Wt,Pt)}var dt=st("visible");st("type"),st("name",at._traceWord+" "+$),st("uirevision",at.uirevision);var bt=o.getModule(G);if(G._module=bt,bt){var gt=bt.basePlotModule,Lt=gt.attr,It=gt.attributes;if(Lt&&It){var Mt=at._subplots,xt="";if(dt||"gl2d"!==gt.name){if(Array.isArray(Lt))for(et=0;et<Lt.length;et++){var At=Lt[et],Gt=e.coerce(Z,G,It,At);Mt[At]&&e.pushUnique(Mt[At],Gt),xt+=Gt}else xt=e.coerce(Z,G,It,Lt);Mt[gt.name]&&e.pushUnique(Mt[gt.name],xt)}}}return dt&&(st("customdata"),st("ids"),st("meta"),C.traceIs(G,"showLegend")?(e.coerce(Z,G,bt.attributes.showlegend?bt.attributes:o.attributes,"showlegend"),st("legend"),st("legendwidth"),st("legendgroup"),st("legendgrouptitle.text"),st("legendrank"),G._dfltShowLegend=!0):G._dfltShowLegend=!1,bt&&bt.supplyDefaults(Z,G,rt,at),C.traceIs(G,"noOpacity")||st("opacity"),C.traceIs(G,"notLegendIsolatable")&&(G.visible=!!G.visible),C.traceIs(G,"noHover")||(G.hovertemplate||e.coerceHoverinfo(Z,G,at),"parcats"!==G.type&&C.getComponentMethod("fx","supplyDefaults")(Z,G,rt,at)),bt&&bt.selectPoints&&st("selectedpoints"),o.supplyTransformDefaults(Z,G,at)),G},o.hasMakesDataTransform=D,o.supplyTransformDefaults=function(Z,G,K){if(G._length||D(Z)){var at=K._globalTransforms||[],$=K._transformModules||[];if(Array.isArray(Z.transforms)||0!==at.length)for(var rt=at.concat(Z.transforms||[]),et=G.transforms=[],st=0;st<rt.length;st++){var Lt,dt=rt[st],bt=dt.type,gt=v[bt],It=!(dt._module&&dt._module===gt),Mt=gt&&"function"==typeof gt.transform;gt||e.warn("Unrecognized transform type "+bt+"."),gt&&gt.supplyDefaults&&(It||Mt)?((Lt=gt.supplyDefaults(dt,G,K,Z)).type=bt,Lt._module=gt,e.pushUnique($,gt)):Lt=e.extendFlat({},dt),et.push(Lt)}}},o.supplyLayoutGlobalDefaults=function(Z,G,K){function at(gt,Lt){return e.coerce(Z,G,o.layoutAttributes,gt,Lt)}var $=Z.template;e.isPlainObject($)&&(G.template=$,G._template=$.layout,G._dataTemplate=$.data),at("autotypenumbers");var X=e.coerceFont(at,"font");e.coerceFont(at,"title.font",e.extendFlat({},X,{size:Math.round(1.4*X.size)})),at("title.text",G._dfltTitle.plot),at("title.xref");var et=at("title.yref");at("title.pad.t"),at("title.pad.r"),at("title.pad.b"),at("title.pad.l");var st=at("title.automargin");at("title.x"),at("title.xanchor"),at("title.y"),at("title.yanchor"),st&&("paper"===et&&(0!==G.title.y&&(G.title.y=1),"auto"===G.title.yanchor&&(G.title.yanchor=0===G.title.y?"top":"bottom")),"container"===et&&("auto"===G.title.y&&(G.title.y=1),"auto"===G.title.yanchor&&(G.title.yanchor=G.title.y<.5?"bottom":"top"))),at("uniformtext.mode")&&at("uniformtext.minsize"),at("autosize",!(Z.width&&Z.height)),at("width"),at("height"),at("minreducedwidth"),at("minreducedheight"),at("margin.l"),at("margin.r"),at("margin.t"),at("margin.b"),at("margin.pad"),at("margin.autoexpand"),Z.width&&Z.height&&o.sanitizeMargins(G),C.getComponentMethod("grid","sizeDefaults")(Z,G),at("paper_bgcolor"),at("separators",K.decimal+K.thousands),at("hidesources"),at("colorway"),at("datarevision");var bt=at("uirevision");at("editrevision",bt),at("selectionrevision",bt),C.getComponentMethod("modebar","supplyLayoutDefaults")(Z,G),C.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(Z,G,at),C.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(Z,G,at),at("meta"),e.isPlainObject(Z.transition)&&(at("transition.duration"),at("transition.easing"),at("transition.ordering")),C.getComponentMethod("calendars","handleDefaults")(Z,G,"calendar"),C.getComponentMethod("fx","supplyLayoutGlobalDefaults")(Z,G,at),e.coerce(Z,G,c,"scattermode")},o.plotAutoSize=function(G,K,at){var rt,et,$=G._context||{},X=$.frameMargins,st=e.isPlotDiv(G);if(st&&G.emit("plotly_autosize"),$.fillFrame)rt=window.innerWidth,et=window.innerHeight,document.body.style.overflow="hidden";else{var dt=st?window.getComputedStyle(G):{};if(rt=k(dt.width)||k(dt.maxWidth)||at.width,et=k(dt.height)||k(dt.maxHeight)||at.height,P(X)&&X>0){var bt=1-2*X;rt=Math.round(bt*rt),et=Math.round(bt*et)}}var gt=o.layoutAttributes.width.min,Lt=o.layoutAttributes.height.min;rt<gt&&(rt=gt),et<Lt&&(et=Lt);var It=!K.width&&Math.abs(at.width-rt)>1,Mt=!K.height&&Math.abs(at.height-et)>1;(Mt||It)&&(It&&(at.width=rt),Mt&&(at.height=et)),G._initialAutoSize||(G._initialAutoSize={width:rt,height:et}),o.sanitizeMargins(at)},o.supplyLayoutModuleDefaults=function(Z,G,K,at){var rt,et,st,$=C.componentsRegistry,X=G._basePlotModules,dt=C.subplotsRegistry.cartesian;for(rt in $)(st=$[rt]).includeBasePlot&&st.includeBasePlot(Z,G);for(var bt in X.length||X.push(dt),G._has("cartesian")&&(C.getComponentMethod("grid","contentDefaults")(Z,G),dt.finalizeSubplots(Z,G)),G._subplots)G._subplots[bt].sort(e.subplotSort);for(et=0;et<X.length;et++)(st=X[et]).supplyLayoutDefaults&&st.supplyLayoutDefaults(Z,G,K);var gt=G._modules;for(et=0;et<gt.length;et++)(st=gt[et]).supplyLayoutDefaults&&st.supplyLayoutDefaults(Z,G,K);var Lt=G._transformModules;for(et=0;et<Lt.length;et++)(st=Lt[et]).supplyLayoutDefaults&&st.supplyLayoutDefaults(Z,G,K,at);for(rt in $)(st=$[rt]).supplyLayoutDefaults&&st.supplyLayoutDefaults(Z,G,K)},o.purge=function(Z){var G=Z._fullLayout||{};void 0!==G._glcontainer&&(G._glcontainer.selectAll(".gl-canvas").remove(),G._glcontainer.remove(),G._glcanvas=null),G._modeBar&&G._modeBar.destroy(),Z._transitionData&&(Z._transitionData._interruptCallbacks&&(Z._transitionData._interruptCallbacks.length=0),Z._transitionData._animationRaf&&window.cancelAnimationFrame(Z._transitionData._animationRaf)),e.clearThrottle(),e.clearResponsive(Z),delete Z.data,delete Z.layout,delete Z._fullData,delete Z._fullLayout,delete Z.calcdata,delete Z.empty,delete Z.fid,delete Z.undoqueue,delete Z.undonum,delete Z.autoplay,delete Z.changed,delete Z._promises,delete Z._redrawTimer,delete Z._hmlumcount,delete Z._hmpixcount,delete Z._transitionData,delete Z._transitioning,delete Z._initialAutoSize,delete Z._transitioningWithDuration,delete Z._dragging,delete Z._dragged,delete Z._dragdata,delete Z._hoverdata,delete Z._snapshotInProgress,delete Z._editing,delete Z._mouseDownTime,delete Z._legendMouseDownTime,Z.removeAllListeners&&Z.removeAllListeners()},o.style=function(Z){var at,G=Z._fullLayout._visibleModules,K=[];for(at=0;at<G.length;at++){var $=G[at];$.style&&e.pushUnique(K,$.style)}for(at=0;at<K.length;at++)K[at](Z)},o.sanitizeMargins=function(Z){if(Z&&Z.margin){var rt,G=Z.width,K=Z.height,at=Z.margin,X=K-(at.t+at.b);G-(at.l+at.r)<0&&(rt=(G-1)/(at.l+at.r),at.l=Math.floor(rt*at.l),at.r=Math.floor(rt*at.r)),X<0&&(rt=(K-1)/(at.t+at.b),at.t=Math.floor(rt*at.t),at.b=Math.floor(rt*at.b))}},o.clearAutoMarginIds=function(Z){Z._fullLayout._pushmarginIds={}},o.allowAutoMargin=function(Z,G){Z._fullLayout._pushmarginIds[G]=1};o.autoMargin=function(Z,G,K){var at=Z._fullLayout,$=at.width,X=at.height,rt=at.margin,st=at.minreducedheight,dt=e.constrain($-rt.l-rt.r,2,at.minreducedwidth),bt=e.constrain(X-rt.t-rt.b,2,st),gt=Math.max(0,$-dt),Lt=Math.max(0,X-bt),It=at._pushmargin,Mt=at._pushmarginIds;if(!1!==rt.autoexpand){if(K){var xt=K.pad;if(void 0===xt&&(xt=Math.min(12,rt.l,rt.r,rt.t,rt.b)),gt){var At=(K.l+K.r)/gt;At>1&&(K.l/=At,K.r/=At)}if(Lt){var Gt=(K.t+K.b)/Lt;Gt>1&&(K.t/=Gt,K.b/=Gt)}It[G]={l:{val:void 0!==K.xl?K.xl:K.x,size:K.l+xt},r:{val:void 0!==K.xr?K.xr:K.x,size:K.r+xt},b:{val:void 0!==K.yb?K.yb:K.y,size:K.b+xt},t:{val:void 0!==K.yt?K.yt:K.y,size:K.t+xt}},Mt[G]=1}else delete It[G],delete Mt[G];if(!at._replotting)return o.doAutoMargin(Z)}},o.doAutoMargin=function(Z){var G=Z._fullLayout,K=G.width,at=G.height;G._size||(G._size={}),O(G);var $=G._size,X=G.margin,rt={t:0,b:0,l:0,r:0},et=e.extendFlat({},$),st=X.l,dt=X.r,bt=X.t,gt=X.b,Lt=G._pushmargin,It=G._pushmarginIds,Mt=G.minreducedwidth,xt=G.minreducedheight;if(!1!==X.autoexpand){for(var At in Lt)It[At]||delete Lt[At];var Gt=Z._fullLayout._reservedMargin;for(var Wt in Gt)for(var Pt in Gt[Wt])rt[Pt]=Math.max(rt[Pt],Gt[Wt][Pt]);for(var te in Lt.base={l:{val:0,size:st},r:{val:1,size:dt},t:{val:1,size:bt},b:{val:0,size:gt}},rt){var Qt=0;for(var Bt in Lt)"base"!==Bt&&P(Lt[Bt][te].size)&&(Qt=Lt[Bt][te].size>Qt?Lt[Bt][te].size:Qt);var Ot=Math.max(0,X[te]-Qt);rt[te]=Math.max(0,rt[te]-Ot)}for(var qt in Lt){var ie=Lt[qt].l||{},oe=Lt[qt].b||{},pe=ie.val,de=ie.size,Fe=oe.val,Kt=oe.size,Et=K-rt.r-rt.l,St=at-rt.t-rt.b;for(var Dt in Lt){if(P(de)&&Lt[Dt].r){var Ft=Lt[Dt].r.val,Nt=Lt[Dt].r.size;if(Ft>pe){var Rt=(de*Ft+(Nt-Et)*pe)/(Ft-pe),wt=(Nt*(1-pe)+(de-Et)*(1-Ft))/(Ft-pe);Rt+wt>st+dt&&(st=Rt,dt=wt)}}if(P(Kt)&&Lt[Dt].t){var ft=Lt[Dt].t.val,pt=Lt[Dt].t.size;if(ft>Fe){var kt=(Kt*ft+(pt-St)*Fe)/(ft-Fe),Zt=(pt*(1-Fe)+(Kt-St)*(1-ft))/(ft-Fe);kt+Zt>gt+bt&&(gt=kt,bt=Zt)}}}}}var ee=e.constrain(K-X.l-X.r,2,Mt),se=e.constrain(at-X.t-X.b,2,xt),Be=Math.max(0,K-ee),Ke=Math.max(0,at-se);if(Be){var xe=(st+dt)/Be;xe>1&&(st/=xe,dt/=xe)}if(Ke){var Pe=(gt+bt)/Ke;Pe>1&&(gt/=Pe,bt/=Pe)}if($.l=Math.round(st)+rt.l,$.r=Math.round(dt)+rt.r,$.t=Math.round(bt)+rt.t,$.b=Math.round(gt)+rt.b,$.p=Math.round(X.pad),$.w=Math.round(K)-$.l-$.r,$.h=Math.round(at)-$.t-$.b,!G._replotting&&(o.didMarginChange(et,$)||function U(Z){if("_redrawFromAutoMarginCount"in Z._fullLayout)return!1;var G=a.list(Z,"",!0);for(var K in G)if(G[K].autoshift||G[K].shift)return!0;return!1}(Z))){"_redrawFromAutoMarginCount"in G?G._redrawFromAutoMarginCount++:G._redrawFromAutoMarginCount=1;var Ge=3*(1+Object.keys(It).length);if(G._redrawFromAutoMarginCount<Ge)return C.call("_doPlot",Z);G._size=et,e.warn("Too many auto-margin redraws.")}!function H(Z){var G=a.list(Z,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(K){for(var at=0;at<G.length;at++){var $=G[at][K];$&&$()}})}(Z)};var J=["l","r","t","b","p","w","h"];function nt(Z,G,K){var at=!1;var bt=e.syncOrAsync([o.previousPromises,function st(){if(Z._transitionData)return Z._transitioning=!1,function $(gt){var Lt=Promise.resolve();if(!gt)return Lt;for(;gt.length;)Lt=Lt.then(gt.shift());return Lt}(Z._transitionData._interruptCallbacks)},K.prepareFn,o.rehover,o.reselect,function rt(){return Z.emit("plotly_transitioning",[]),new Promise(function(gt){Z._transitioning=!0,G.duration>0&&(Z._transitioningWithDuration=!0),Z._transitionData._interruptCallbacks.push(function(){at=!0}),K.redraw&&Z._transitionData._interruptCallbacks.push(function(){return C.call("redraw",Z)}),Z._transitionData._interruptCallbacks.push(function(){Z.emit("plotly_transitioninterrupted",[])});var Lt=0,It=0;function Mt(){return Lt++,function(){It++,!at&&It===Lt&&function et(gt){if(Z._transitionData)return function X(gt){if(gt)for(;gt.length;)gt.shift()}(Z._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(K.redraw)return C.call("redraw",Z)}).then(function(){Z._transitioning=!1,Z._transitioningWithDuration=!1,Z.emit("plotly_transitioned",[])}).then(gt)}(gt)}}K.runFn(Mt),setTimeout(Mt())})}],Z);return(!bt||!bt.then)&&(bt=Promise.resolve()),bt.then(function(){return Z})}o.didMarginChange=function(Z,G){for(var K=0;K<J.length;K++){var at=J[K],$=Z[at],X=G[at];if(!P($)||Math.abs(X-$)>1)return!0}return!1},o.graphJson=function(Z,G,K,at,$,X){($&&G&&!Z._fullData||$&&!G&&!Z._fullLayout)&&o.supplyDefaults(Z);var et=$?Z._fullLayout:Z.layout,st=(Z._transitionData||{})._frames;function dt(Lt,It){if("function"==typeof Lt)return It?"_function_":null;if(e.isPlainObject(Lt)){var xt,Mt={};return Object.keys(Lt).sort().forEach(function(At){if(-1===["_","["].indexOf(At.charAt(0))){if("function"==typeof Lt[At])return void(It&&(Mt[At]="_function"));if("keepdata"===K){if("src"===At.substr(At.length-3))return}else if("keepstream"===K){if("string"==typeof(xt=Lt[At+"src"])&&xt.indexOf(":")>0&&!e.isPlainObject(Lt.stream))return}else if("keepall"!==K&&"string"==typeof(xt=Lt[At+"src"])&&xt.indexOf(":")>0)return;Mt[At]=dt(Lt[At],It)}}),Mt}return Array.isArray(Lt)?Lt.map(function(At){return dt(At,It)}):e.isTypedArray(Lt)?e.simpleMap(Lt,e.identity):e.isJSDate(Lt)?e.ms2DateTimeLocal(+Lt):Lt}var bt={data:(($?Z._fullData:Z.data)||[]).map(function(Lt){var It=dt(Lt);return G&&delete It.fit,It})};if(!G&&(bt.layout=dt(et),$)){var gt=et._size;bt.layout.computed={margin:{b:gt.b,l:gt.l,r:gt.r,t:gt.t}}}return st&&(bt.frames=dt(st)),X&&(bt.config=dt(Z._context,!0)),"object"===at?bt:JSON.stringify(bt)},o.modifyFrames=function(Z,G){var K,at,$,X=Z._transitionData._frames,rt=Z._transitionData._frameHash;for(K=0;K<G.length;K++)switch(at=G[K],at.type){case"replace":var et=(X[at.index]||{}).name,st=($=at.value).name;X[at.index]=rt[st]=$,st!==et&&(delete rt[et],rt[st]=$);break;case"insert":rt[($=at.value).name]=$,X.splice(at.index,0,$);break;case"delete":delete rt[($=X[at.index]).name],X.splice(at.index,1)}return Promise.resolve()},o.computeFrame=function(Z,G){var at,$,X,rt,K=Z._transitionData._frameHash;if(!G)throw new Error("computeFrame must be given a string frame name");var et=K[G.toString()];if(!et)return!1;for(var st=[et],dt=[et.name];et.baseframe&&(et=K[et.baseframe.toString()])&&-1===dt.indexOf(et.name);)st.push(et),dt.push(et.name);for(var bt={};et=st.pop();)if(et.layout&&(bt.layout=o.extendLayout(bt.layout,et.layout)),et.data){if(bt.data||(bt.data=[]),!($=et.traces))for($=[],at=0;at<et.data.length;at++)$[at]=at;for(bt.traces||(bt.traces=[]),at=0;at<et.data.length;at++)null!=(X=$[at])&&(-1===(rt=bt.traces.indexOf(X))&&(bt.traces[rt=bt.data.length]=X),bt.data[rt]=o.extendTrace(bt.data[rt],et.data[at]))}return bt},o.recomputeFrameHash=function(Z){for(var G=Z._transitionData._frameHash={},K=Z._transitionData._frames,at=0;at<K.length;at++){var $=K[at];$&&$.name&&(G[$.name]=$)}},o.extendObjectWithContainers=function(Z,G,K){var at,$,X,rt,st,dt,bt,gt=e.extendDeepNoArrays({},G||{}),Lt=e.expandObjectPaths(gt),It={};if(K&&K.length)for(X=0;X<K.length;X++)void 0===($=(at=e.nestedProperty(Lt,K[X])).get())?e.nestedProperty(It,K[X]).set(null):(at.set(null),e.nestedProperty(It,K[X]).set($));if(Z=e.extendDeepNoArrays(Z||{},Lt),K&&K.length)for(X=0;X<K.length;X++)if(dt=e.nestedProperty(It,K[X]).get()){for(bt=(st=e.nestedProperty(Z,K[X])).get(),Array.isArray(bt)||st.set(bt=[]),rt=0;rt<dt.length;rt++){var Mt=dt[rt];bt[rt]=null===Mt?null:o.extendObjectWithContainers(bt[rt],Mt)}st.set(bt)}return Z},o.dataArrayContainers=["transforms","dimensions"],o.layoutArrayContainers=C.layoutArrayContainers,o.extendTrace=function(Z,G){return o.extendObjectWithContainers(Z,G,o.dataArrayContainers)},o.extendLayout=function(Z,G){return o.extendObjectWithContainers(Z,G,o.layoutArrayContainers)},o.transition=function(Z,G,K,at,$,X){var rt={redraw:$.redraw},et={},st=[];return rt.prepareFn=function(){for(var dt=Array.isArray(G)?G.length:0,bt=at.slice(0,dt),gt=0;gt<bt.length;gt++){var Lt=bt[gt],Mt=Z._fullData[Lt]._module;if(Mt){if(Mt.animatable){var xt=Mt.basePlotModule.name;et[xt]||(et[xt]=[]),et[xt].push(Lt)}Z.data[bt[gt]]=o.extendTrace(Z.data[bt[gt]],G[gt])}}var At=e.expandObjectPaths(e.extendDeepNoArrays({},K)),Gt=/^[xy]axis[0-9]*$/;for(var Wt in At)!Gt.test(Wt)||delete At[Wt].range;o.extendLayout(Z.layout,At),delete Z.calcdata,o.supplyDefaults(Z),o.doCalcdata(Z);var Pt=e.expandObjectPaths(K);if(Pt){var Vt=Z._fullLayout._plots;for(var te in Vt){var Qt=Vt[te],Bt=Qt.xaxis,Ot=Qt.yaxis,qt=Bt.range.slice(),ie=Ot.range.slice(),oe=null,pe=null,de=null,Fe=null;Array.isArray(Pt[Bt._name+".range"])?oe=Pt[Bt._name+".range"].slice():Array.isArray((Pt[Bt._name]||{}).range)&&(oe=Pt[Bt._name].range.slice()),Array.isArray(Pt[Ot._name+".range"])?pe=Pt[Ot._name+".range"].slice():Array.isArray((Pt[Ot._name]||{}).range)&&(pe=Pt[Ot._name].range.slice()),qt&&oe&&(Bt.r2l(qt[0])!==Bt.r2l(oe[0])||Bt.r2l(qt[1])!==Bt.r2l(oe[1]))&&(de={xr0:qt,xr1:oe}),ie&&pe&&(Ot.r2l(ie[0])!==Ot.r2l(pe[0])||Ot.r2l(ie[1])!==Ot.r2l(pe[1]))&&(Fe={yr0:ie,yr1:pe}),(de||Fe)&&st.push(e.extendFlat({plotinfo:Qt},de,Fe))}}return Promise.resolve()},rt.runFn=function(dt){var bt,It,gt=Z._fullLayout._basePlotModules,Lt=st.length;if(K)for(It=0;It<gt.length;It++)gt[It].transitionAxes&&gt[It].transitionAxes(Z,st,X,dt);for(var Mt in Lt?((bt=e.extendFlat({},X)).duration=0,delete et.cartesian):bt=X,et){var xt=et[Mt];Z._fullData[xt[0]]._module.basePlotModule.plot(Z,xt,bt,dt)}},nt(Z,X,rt)},o.transitionFromReact=function(Z,G,K,at){var $=Z._fullLayout,X=$.transition,rt={},et=[];return rt.prepareFn=function(){var st=$._plots;for(var dt in rt.redraw=!1,"some"===G.anim&&(rt.redraw=!0),"some"===K.anim&&(rt.redraw=!0),st){var bt=st[dt],gt=bt.xaxis,Lt=bt.yaxis,It=at[gt._name].range.slice(),Mt=at[Lt._name].range.slice(),xt=gt.range.slice(),At=Lt.range.slice();gt.setScale(),Lt.setScale();var Gt=null,Wt=null;(gt.r2l(It[0])!==gt.r2l(xt[0])||gt.r2l(It[1])!==gt.r2l(xt[1]))&&(Gt={xr0:It,xr1:xt}),(Lt.r2l(Mt[0])!==Lt.r2l(At[0])||Lt.r2l(Mt[1])!==Lt.r2l(At[1]))&&(Wt={yr0:Mt,yr1:At}),(Gt||Wt)&&et.push(e.extendFlat({plotinfo:bt},Gt,Wt))}return Promise.resolve()},rt.runFn=function(st){for(var Lt,It,Mt,dt=Z._fullData,gt=Z._fullLayout._basePlotModules,xt=[],At=0;At<dt.length;At++)xt.push(At);function Gt(){if(Z._fullLayout)for(var Pt=0;Pt<gt.length;Pt++)gt[Pt].transitionAxes&&gt[Pt].transitionAxes(Z,et,Lt,st)}function Wt(){if(Z._fullLayout)for(var Pt=0;Pt<gt.length;Pt++)gt[Pt].plot(Z,Mt,It,st)}et.length&&G.anim?"traces first"===X.ordering?(Lt=e.extendFlat({},X,{duration:0}),Mt=xt,It=X,setTimeout(Gt,X.duration),Wt()):(Lt=X,Mt=null,It=e.extendFlat({},X,{duration:0}),setTimeout(Wt,Lt.duration),Gt()):et.length?(Lt=X,Gt()):G.anim&&(Mt=xt,It=X,Wt())},nt(Z,X,rt)},o.doCalcdata=function(Z,G){var X,rt,et,st,K=a.list(Z),at=Z._fullData,$=Z._fullLayout,dt=new Array(at.length),bt=(Z.calcdata||[]).slice();for(Z.calcdata=dt,$._numBoxes=0,$._numViolins=0,$._violinScaleGroupStats={},Z._hmpixcount=0,Z._hmlumcount=0,$._piecolormap={},$._sunburstcolormap={},$._treemapcolormap={},$._iciclecolormap={},$._funnelareacolormap={},et=0;et<at.length;et++)if(Array.isArray(G)&&-1===G.indexOf(et)){dt[et]=bt[et];continue}for(et=0;et<at.length;et++)(X=at[et])._arrayAttrs=u.findArrayAttributes(X),X._extremes={};var gt=$._subplots.polar||[];for(et=0;et<gt.length;et++)K.push($[gt[et]].radialaxis,$[gt[et]].angularaxis);for(var Lt in $._colorAxes){var It=$[Lt];!1!==It.cauto&&(delete It.cmin,delete It.cmax)}var Mt=!1;function xt(Wt){if(rt=(X=at[Wt])._module,!0===X.visible&&X.transforms){if(rt&&rt.calc){var Pt=rt.calc(Z,X);Pt[0]&&Pt[0].t&&Pt[0].t._scene&&delete Pt[0].t._scene.dirty}for(st=0;st<X.transforms.length;st++){var Vt=X.transforms[st];(rt=v[Vt.type])&&rt.calcTransform&&(X._hasCalcTransform=!0,Mt=!0,rt.calcTransform(Z,X,Vt))}}}function At(Wt,Pt){if(!!(rt=(X=at[Wt])._module).isContainer===Pt){var Vt=[];if(!0===X.visible&&0!==X._length){delete X._indexToPoints;var te=X.transforms||[];for(st=te.length-1;st>=0;st--)if(te[st].enabled){X._indexToPoints=te[st]._indexToPoints;break}rt&&rt.calc&&(Vt=rt.calc(Z,X))}(!Array.isArray(Vt)||!Vt[0])&&(Vt=[{x:l,y:l}]),Vt[0].t||(Vt[0].t={}),Vt[0].trace=X,dt[Wt]=Vt}}for(Q(K,at,$),et=0;et<at.length;et++)At(et,!0);for(et=0;et<at.length;et++)xt(et);for(Mt&&Q(K,at,$),et=0;et<at.length;et++)At(et,!0);for(et=0;et<at.length;et++)At(et,!1);j(Z);var Gt=function ut(Z,G){var at,$,X,rt,et,K=[];function st(Dt,Ft,Nt){var Rt=Ft._id.charAt(0);if("histogram2dcontour"===Dt){var wt=Ft._counterAxes[0],ft=a.getFromId(G,wt),pt="x"===Rt||"x"===wt&&"category"===ft.type,kt="y"===Rt||"y"===wt&&"category"===ft.type;return function(Zt,ee){return 0===Zt||0===ee||pt&&Zt===Nt[ee].length-1||kt&&ee===Nt.length-1?-1:("y"===Rt?ee:Zt)-1}}return function(Zt,ee){return"y"===Rt?ee:Zt}}var dt={min:function(Dt){return e.aggNums(Math.min,null,Dt)},max:function(Dt){return e.aggNums(Math.max,null,Dt)},sum:function(Dt){return e.aggNums(function(Ft,Nt){return Ft+Nt},null,Dt)},total:function(Dt){return e.aggNums(function(Ft,Nt){return Ft+Nt},null,Dt)},mean:function(Dt){return e.mean(Dt)},median:function(Dt){return e.median(Dt)}};function bt(Dt,Ft){return Dt[1]-Ft[1]}function gt(Dt,Ft){return Ft[1]-Dt[1]}for(at=0;at<Z.length;at++){var Lt=Z[at];if("category"===Lt.type){var It=Lt.categoryorder.match(it);if(It){var Mt=It[1],xt=It[2],At=Lt._id.charAt(0),Gt="x"===At,Wt=[];for($=0;$<Lt._categories.length;$++)Wt.push([Lt._categories[$],[]]);for($=0;$<Lt._traceIndices.length;$++){var Pt=Lt._traceIndices[$],Vt=G._fullData[Pt];if(!0===Vt.visible){var te=Vt.type;C.traceIs(Vt,"histogram")&&(delete Vt._xautoBinFinished,delete Vt._yautoBinFinished);var Qt="splom"===te,Bt="scattergl"===te,Ot=G.calcdata[Pt];for(X=0;X<Ot.length;X++){var ie,oe,qt=Ot[X];if(Qt){var pe=Vt._axesDim[Lt._id];if(!Gt){var de=Vt._diag[pe][0];de&&(Lt=G._fullLayout[a.id2name(de)])}var Fe=qt.trace.dimensions[pe].values;for(rt=0;rt<Fe.length;rt++)for(ie=Lt._categoriesMap[Fe[rt]],et=0;et<qt.trace.dimensions.length;et++)et!==pe&&Wt[ie][1].push(qt.trace.dimensions[et].values[rt])}else if(Bt){for(rt=0;rt<qt.t.x.length;rt++)Gt?(ie=qt.t.x[rt],oe=qt.t.y[rt]):(ie=qt.t.y[rt],oe=qt.t.x[rt]),Wt[ie][1].push(oe);qt.t&&qt.t._scene&&delete qt.t._scene.dirty}else if(qt.hasOwnProperty("z")){var Et=st(Vt.type,Lt,oe=qt.z);for(rt=0;rt<oe.length;rt++)for(et=0;et<oe[rt].length;et++)(ie=Et(et,rt))+1&&Wt[ie][1].push(oe[rt][et])}else for(void 0===(ie=qt.p)&&(ie=qt[At]),void 0===(oe=qt.s)&&(oe=qt.v),void 0===oe&&(oe=Gt?qt.y:qt.x),Array.isArray(oe)||(oe=void 0===oe?[]:[oe]),rt=0;rt<oe.length;rt++)Wt[ie][1].push(oe[rt])}}}Lt._categoriesValue=Wt;var St=[];for($=0;$<Wt.length;$++)St.push([Wt[$][0],dt[Mt](Wt[$][1])]);St.sort("descending"===xt?gt:bt),Lt._categoriesAggregatedValue=St,Lt._initialCategories=St.map(function(Dt){return Dt[0]}),K=K.concat(Lt.sortByInitialCategories())}}}return K}(K,Z);if(Gt.length){for($._numBoxes=0,$._numViolins=0,et=0;et<Gt.length;et++)At(Gt[et],!0);for(et=0;et<Gt.length;et++)At(Gt[et],!1);j(Z)}C.getComponentMethod("fx","calc")(Z),C.getComponentMethod("errorbars","calc")(Z)};var it=/(total|sum|min|max|mean|median) (ascending|descending)/;function Q(Z,G,K){var at={};function $(st){st.clearCalc(),"multicategory"===st.type&&st.setupMultiCategory(G),at[st._id]=1}e.simpleMap(Z,$);for(var X=K._axisMatchGroups||[],rt=0;rt<X.length;rt++)for(var et in X[rt])at[et]||$(K[a.id2name(et)])}function j(Z){var $,X,rt,G=Z._fullLayout,K=G._visibleModules,at={};for(X=0;X<K.length;X++){var et=K[X],st=et.crossTraceCalc;if(st){var dt=et.basePlotModule.name;at[dt]?e.pushUnique(at[dt],st):at[dt]=[st]}}for(rt in at){var bt=at[rt],gt=G._subplots[rt];if(Array.isArray(gt))for($=0;$<gt.length;$++){var Lt=gt[$],It="cartesian"===rt?G._plots[Lt]:G[Lt];for(X=0;X<bt.length;X++)bt[X](Z,It,Lt)}else for(X=0;X<bt.length;X++)bt[X](Z)}}o.rehover=function(Z){Z._fullLayout._rehover&&Z._fullLayout._rehover()},o.redrag=function(Z){Z._fullLayout._redrag&&Z._fullLayout._redrag()},o.reselect=function(Z){var G=Z._fullLayout,K=(Z.layout||{}).selections,at=G._previousSelections;G._previousSelections=K;var $=G._reselect||JSON.stringify(K)!==JSON.stringify(at);C.getComponentMethod("selections","reselect")(Z,$)},o.generalUpdatePerTraceModule=function(Z,G,K,at){var rt,$=G.traceHash,X={};for(rt=0;rt<K.length;rt++){var et=K[rt],st=et[0].trace;st.visible&&(X[st.type]=X[st.type]||[],X[st.type].push(et))}for(var dt in $)if(!X[dt]){var bt=$[dt][0];bt[0].trace.visible=!1,X[dt]=[bt]}for(var Lt in X){var It=X[Lt];It[0][0].trace._module.plot(Z,G,e.filterVisible(It),at)}G.traceHash=X},o.plotBasePlot=function(Z,G,K,at,$){var X=C.getModule(Z),rt=h(G.calcdata,X)[0];X.plot(G,rt,at,$)},o.cleanBasePlot=function(Z,G,K,at,$){var X=$._has&&$._has(Z),rt=K._has&&K._has(Z);X&&!rt&&$["_"+Z+"layer"].selectAll("g.trace").remove()}},9813:function(q){"use strict";q.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},10869:function(q,W,t){"use strict";var A=t(71828),g=t(61082).tester,i=A.findIndexOfMin,P=A.isAngleInsideSector,C=A.angleDelta,u=A.angleDist;function e(o,v,M,b){var L,x,S=b[0],T=b[1],n=m(Math.sin(v)-Math.sin(o)),E=m(Math.cos(v)-Math.cos(o)),d=Math.tan(M),F=m(1/d),D=n/E,N=T-D*S;return F?n&&E?x=d*(L=N/(d-D)):E?(L=T*F,x=T):(L=S,x=S*d):n&&E?(L=0,x=N):E?(L=0,x=T):L=x=NaN,[L,x]}function s(o,v,M,b){return A.isFullCircle([v,M])?function l(o,v){var L,M=v.length,b=new Array(M+1);for(L=0;L<M;L++){var x=v[L];b[L]=[o*Math.cos(x),o*Math.sin(x)]}return b[L]=b[0].slice(),b}(o,b):function a(o,v,M,b){var S,T,L=b.length,x=[];function n(z){return[o*Math.cos(z),o*Math.sin(z)]}function E(z,U,H){return e(z,U,H,n(z))}function d(z){return A.mod(z,L)}function F(z){return P(z,[v,M])}var D=i(b,function(z){return F(z)?u(z,v):1/0}),N=E(b[D],b[d(D-1)],v);for(x.push(N),S=D,T=0;T<L;S++,T++){var k=b[d(S)];if(!F(k))break;x.push(n(k))}var O=i(b,function(z){return F(z)?u(z,M):1/0}),B=E(b[O],b[d(O+1)],M);return x.push(B),x.push([0,0]),x.push(x[0].slice()),x}(o,v,M,b)}function m(o){return Math.abs(o)>1e-10?o:0}function h(o,v,M){v=v||0,M=M||0;for(var b=o.length,L=new Array(b),x=0;x<b;x++){var S=o[x];L[x]=[v+S[0],M-S[1]]}return L}q.exports={isPtInsidePolygon:function y(o,v,M,b,L){if(!P(v,b))return!1;var x,S;M[0]<M[1]?(x=M[0],S=M[1]):(x=M[1],S=M[0]);var T=g(s(x,b[0],b[1],L)),n=g(s(S,b[0],b[1],L)),E=[o*Math.cos(v),o*Math.sin(v)];return n.contains(E)&&!T.contains(E)},findPolygonOffset:function c(o,v,M,b){for(var L=1/0,x=1/0,S=s(o,v,M,b),T=0;T<S.length;T++){var n=S[T];L=Math.min(L,n[0]),x=Math.min(x,-n[1])}return[L,x]},findEnclosingVertexAngles:function f(o,v){var b=i(v,function(x){var S=C(x,o);return S>0?S:1/0}),L=A.mod(b+1,v.length);return[v[b],v[L]]},findIntersectionXY:e,findXYatLength:function r(o,v,M,b){var L=-v*M,x=v*v+1,S=2*(v*L-M),n=Math.sqrt(S*S-4*x*(L*L+M*M-o*o)),E=(-S+n)/(2*x),d=(-S-n)/(2*x);return[[E,v*E+L+b],[d,v*d+L+b]]},clampTiny:m,pathPolygon:function w(o,v,M,b,L,x){return"M"+h(s(o,v,M,b),L,x).join("L")},pathPolygonAnnulus:function p(o,v,M,b,L,x,S){var T,n;o<v?(T=o,n=v):(T=v,n=o);var E=h(s(T,M,b,L),x,S);return"M"+h(s(n,M,b,L),x,S).reverse().join("L")+"M"+E.join("L")}}},23580:function(q,W,t){"use strict";var A=t(27659).AU,g=t(71828).counterRegex,i=t(77997),P=t(9813),C=P.attr,u=P.name,y=g(u),e={};e[C]={valType:"subplotid",dflt:u,editType:"calc"},q.exports={attr:C,name:u,idRoot:u,idRegex:y,attrRegex:y,attributes:e,layoutAttributes:t(73812),supplyLayoutDefaults:t(68993),plot:function r(a){for(var s=a._fullLayout,c=a.calcdata,f=s._subplots[u],m=0;m<f.length;m++){var h=f[m],w=A(c,u,h),p=s[h]._subplot;p||(p=i(a,h),s[h]._subplot=p),p.plot(w,s,a._promises)}},clean:function l(a,s,c,f){for(var m=f._subplots[u]||[],h=f._has&&f._has("gl"),w=s._has&&s._has("gl"),p=h&&!w,o=0;o<m.length;o++){var v=m[o],M=f[v]._subplot;if(!s[v]&&M)for(var b in M.framework.remove(),M.layers["radial-axis-title"].remove(),M.clipPaths)M.clipPaths[b].remove();p&&M._scene&&(M._scene.destroy(),M._scene=null)}},toSVG:t(93612).toSVG}},73812:function(q,W,t){"use strict";var A=t(22399),g=t(13838),i=t(27670).Y,P=t(71828).extendFlat,C=t(30962).overrideAll,u=C({color:g.color,showline:P({},g.showline,{dflt:!0}),linecolor:g.linecolor,linewidth:g.linewidth,showgrid:P({},g.showgrid,{dflt:!0}),gridcolor:g.gridcolor,gridwidth:g.gridwidth,griddash:g.griddash},"plot","from-root"),y=C({tickmode:g.minor.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,ticks:g.ticks,ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,ticklabelstep:g.ticklabelstep,showticklabels:g.showticklabels,labelalias:g.labelalias,showtickprefix:g.showtickprefix,tickprefix:g.tickprefix,showticksuffix:g.showticksuffix,ticksuffix:g.ticksuffix,showexponent:g.showexponent,exponentformat:g.exponentformat,minexponent:g.minexponent,separatethousands:g.separatethousands,tickfont:g.tickfont,tickangle:g.tickangle,tickformat:g.tickformat,tickformatstops:g.tickformatstops,layer:g.layer},"plot","from-root"),e={visible:P({},g.visible,{dflt:!0}),type:P({},g.type,{values:["-","linear","log","date","category"]}),autotypenumbers:g.autotypenumbers,autorangeoptions:{minallowed:g.autorangeoptions.minallowed,maxallowed:g.autorangeoptions.maxallowed,clipmin:g.autorangeoptions.clipmin,clipmax:g.autorangeoptions.clipmax,include:g.autorangeoptions.include,editType:"plot"},autorange:P({},g.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:P({},g.minallowed,{editType:"plot"}),maxallowed:P({},g.maxallowed,{editType:"plot"}),range:P({},g.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:g.categoryorder,categoryarray:g.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:P({},g.title.text,{editType:"plot",dflt:""}),font:P({},g.title.font,{editType:"plot"}),editType:"plot"},hoverformat:g.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:g._deprecated.title,titlefont:g._deprecated.titlefont}};P(e,u,y);var r={visible:P({},g.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:g.autotypenumbers,categoryorder:g.categoryorder,categoryarray:g.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:g.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};P(r,u,y),q.exports={domain:i({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:A.background},radialaxis:e,angularaxis:r,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},68993:function(q,W,t){"use strict";var A=t(71828),g=t(7901),i=t(44467),P=t(49119),C=t(27659).NG,u=t(26218),y=t(38701),e=t(96115),r=t(89426),l=t(15258),a=t(92128),s=t(23074),c=t(4322),f=t(73812),m=t(12101),h=t(9813),w=h.axisNames;function p(v,M,b,L){var x=b("bgcolor");L.bgColor=g.combine(x,L.paper_bgcolor);var S=b("sector");b("hole");var E,T=C(L.fullData,h.name,L.id),n=L.layoutOut;function d(K,at){return b(E+"."+K,at)}for(var F=0;F<w.length;F++){A.isPlainObject(v[E=w[F]])||(v[E]={});var D=v[E],N=i.newContainer(M,E);N._id=N._name=E,N._attr=L.id+"."+E,N._traceIndices=T.map(function(K){return K._expandedIndex});var k=h.axisName2dataArray[E],O=o(D,N,d,T,k,L);l(D,N,d,{axData:T,dataAttr:k});var B=d("visible");switch(m(N,M,n),d("uirevision",M.uirevision),N._m=1,E){case"radialaxis":d("minallowed"),d("maxallowed");var J,z=d("range"),U=N.getAutorangeDflt(z),H=d("autorange",U);z&&(null===z[0]&&null===z[1]||(null===z[0]||null===z[1])&&("reversed"===H||!0===H)||null!==z[0]&&("min"===H||"max reversed"===H)||null!==z[1]&&("max"===H||"min reversed"===H))&&(z=void 0,delete N.range,N.autorange=!0,J=!0),J||(H=d("autorange",U=N.getAutorangeDflt(z))),D.autorange=H,H&&(s(d,H,z),("linear"===O||"-"===O)&&d("rangemode"),N.isReversed()&&(N._m=-1)),N.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===O){A.log("Polar plots do not support date angular axes yet.");for(var nt=0;nt<T.length;nt++)T[nt].visible=!1;O=D.type=N.type="linear"}d("linear"===O?"thetaunit":"period");var it=d("direction");d("rotation",{counterclockwise:0,clockwise:90}[it])}if(r(D,N,d,N.type,{tickSuffixDflt:"degrees"===N.thetaunit?"\xb0":void 0}),B){var ut,Q,j,Z,G=L.font||{};Q=(ut=d("color"))===D.color?ut:G.color,j=G.size,Z=G.family,u(D,N,d,N.type),e(D,N,d,N.type,{font:{color:Q,size:j,family:Z}}),y(D,N,d,{outerTicks:!0}),a(D,N,d,{dfltColor:ut,bgColor:L.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:f[E]}),d("layer"),"radialaxis"===E&&(d("side"),d("angle",S[0]),d("title.text"),A.coerceFont(d,"title.font",{color:Q,size:A.bigFont(j),family:Z}))}"category"!==O&&d("hoverformat"),N._input=D}"category"===M.angularaxis.type&&b("gridshape")}function o(v,M,b,L,x,S){var T=b("autotypenumbers",S.autotypenumbersDflt);if("-"===b("type")){for(var E,d=0;d<L.length;d++)if(L[d].visible){E=L[d];break}E&&E[x]&&(M.type=c(E[x],"gregorian",{noMultiCategory:!0,autotypenumbers:T})),"-"===M.type?M.type="linear":v.type=M.type}return M.type}q.exports=function(M,b,L){P(M,b,L,{type:h.name,attributes:f,handleDefaults:p,font:b.font,autotypenumbersDflt:b.autotypenumbers,paper_bgcolor:b.paper_bgcolor,fullData:L,layoutOut:b})}},77997:function(q,W,t){"use strict";var A=t(39898),g=t(84267),i=t(73972),P=t(71828),C=P.strRotate,u=P.strTranslate,y=t(7901),e=t(91424),r=t(74875),l=t(89298),a=t(21994),s=t(12101),c=t(71739).doAutoRange,f=t(29323),m=t(28569),h=t(30211),w=t(92998),p=t(47322).prepSelect,o=t(47322).selectOnClick,v=t(47322).clearOutline,M=t(6964),b=t(33306),L=t(61549).redrawReglTraces,x=t(18783).MID_SHIFT,S=t(9813),T=t(10869),n=t(23893),E=n.smith,d=n.reactanceArc,F=n.resistanceArc,D=n.smithTransform,N=P._,k=P.mod,O=P.deg2rad,B=P.rad2deg;function z(ut,Q,j){this.isSmith=j||!1,this.id=Q,this.gd=ut,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var Z=ut._fullLayout;this.clipIds.forTraces="clip"+Z._uid+Q+"-for-traces",this.clipPaths.forTraces=Z._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=Z["_"+(j?"smith":"polar")+"layer"].append("g").attr("class",Q),this.getHole=function(K){return this.isSmith?0:K.hole},this.getSector=function(K){return this.isSmith?[0,360]:K.sector},this.getRadial=function(K){return this.isSmith?K.realaxis:K.radialaxis},this.getAngular=function(K){return this.isSmith?K.imaginaryaxis:K.angularaxis},j||(this.radialTickLayout=null,this.angularTickLayout=null)}var U=z.prototype;function H(ut){var Q=ut.ticks+String(ut.ticklen)+String(ut.showticklabels);return"side"in ut&&(Q+=ut.side),Q}function nt(ut,Q){return Q[P.findIndexOfMin(Q,function(G){return P.angleDist(ut,G)})]}function it(ut,Q,j){return Q?(ut.attr("display",null),ut.attr(j)):ut&&ut.attr("display","none"),ut}q.exports=function(Q,j,Z){return new z(Q,j,Z)},U.plot=function(ut,Q){for(var j=this,Z=Q[j.id],G=!1,K=0;K<ut.length;K++)if(!1===ut[K][0].trace.cliponaxis){G=!0;break}j._hasClipOnAxisFalse=G,j.updateLayers(Q,Z),j.updateLayout(Q,Z),r.generalUpdatePerTraceModule(j.gd,j,ut,Z),j.updateFx(Q,Z),j.isSmith&&(delete Z.realaxis.range,delete Z.imaginaryaxis.range)},U.updateLayers=function(ut,Q){var j=this,Z=j.isSmith,G=j.layers,K=j.getRadial(Q),at=j.getAngular(Q),$=S.layerNames,X=$.indexOf("frontplot"),rt=$.slice(0,X),et="below traces"===at.layer,st="below traces"===K.layer;et&&rt.push("angular-line"),st&&rt.push("radial-line"),et&&rt.push("angular-axis"),st&&rt.push("radial-axis"),rt.push("frontplot"),et||rt.push("angular-line"),st||rt.push("radial-line"),et||rt.push("angular-axis"),st||rt.push("radial-axis");var dt=(Z?"smith":"polar")+"sublayer",bt=j.framework.selectAll("."+dt).data(rt,String);bt.enter().append("g").attr("class",function(gt){return dt+" "+gt}).each(function(gt){var Lt=G[gt]=A.select(this);switch(gt){case"frontplot":Z||Lt.append("g").classed("barlayer",!0),Lt.append("g").classed("scatterlayer",!0);break;case"backplot":Lt.append("g").classed("maplayer",!0);break;case"plotbg":G.bg=Lt.append("path");break;case"radial-grid":case"angular-grid":Lt.style("fill","none");break;case"radial-line":Lt.append("line").style("fill","none");break;case"angular-line":Lt.append("path").style("fill","none")}}),bt.order()},U.updateLayout=function(ut,Q){var j=this,Z=j.layers,G=ut._size,K=j.getRadial(Q),at=j.getAngular(Q),$=Q.domain.x,X=Q.domain.y;j.xOffset=G.l+G.w*$[0],j.yOffset=G.t+G.h*(1-X[1]);var rt=j.xLength=G.w*($[1]-$[0]),et=j.yLength=G.h*(X[1]-X[0]),st=j.getSector(Q);j.sectorInRad=st.map(O);var Mt,xt,At,Gt,Wt,dt=j.sectorBBox=function J(ut){var bt,Q=ut[0],Z=ut[1]-Q,G=k(Q,360),K=G+Z,at=Math.cos(O(G)),$=Math.sin(O(G)),X=Math.cos(O(K)),rt=Math.sin(O(K));return bt=G<=90&&K>=90||G>90&&K>=450?1:$<=0&&rt<=0?0:Math.max($,rt),[G<=180&&K>=180||G>180&&K>=540?-1:at>=0&&X>=0?0:Math.min(at,X),G<=270&&K>=270||G>270&&K>=630?-1:$>=0&&rt>=0?0:Math.min($,rt),K>=360?1:at<=0&&X<=0?0:Math.max(at,X),bt]}(st),bt=dt[2]-dt[0],Lt=et/rt,It=Math.abs((dt[3]-dt[1])/bt);Lt>It?(Mt=rt,At=[$[0],$[1]],Gt=[X[0]+(Wt=(et-(xt=rt*It))/G.h/2),X[1]-Wt]):(xt=et,At=[$[0]+(Wt=(rt-(Mt=et/It))/G.w/2),$[1]-Wt],Gt=[X[0],X[1]]),j.xLength2=Mt,j.yLength2=xt,j.xDomain2=At,j.yDomain2=Gt;var pe,Pt=j.xOffset2=G.l+G.w*At[0],Vt=j.yOffset2=G.t+G.h*(1-Gt[1]),te=j.radius=Mt/bt,Qt=j.innerRadius=j.getHole(Q)*te,Bt=j.cx=Pt-te*dt[0],Ot=j.cy=Vt+te*dt[3],qt=j.cxx=Bt-Pt,ie=j.cyy=Ot-Vt,oe=K.side;"counterclockwise"===oe?(pe=oe,oe="top"):"clockwise"===oe&&(pe=oe,oe="bottom"),j.radialAxis=j.mockAxis(ut,Q,K,{_id:"x",side:oe,_trueSide:pe,domain:[Qt/G.w,te/G.w]}),j.angularAxis=j.mockAxis(ut,Q,at,{side:"right",domain:[0,Math.PI],autorange:!1}),j.doAutoRange(ut,Q),j.updateAngularAxis(ut,Q),j.updateRadialAxis(ut,Q),j.updateRadialAxisTitle(ut,Q),j.xaxis=j.mockCartesianAxis(ut,Q,{_id:"x",domain:At}),j.yaxis=j.mockCartesianAxis(ut,Q,{_id:"y",domain:Gt});var de=j.pathSubplot();j.clipPaths.forTraces.select("path").attr("d",de).attr("transform",u(qt,ie)),Z.frontplot.attr("transform",u(Pt,Vt)).call(e.setClipUrl,j._hasClipOnAxisFalse?null:j.clipIds.forTraces,j.gd),Z.bg.attr("d",de).attr("transform",u(Bt,Ot)).call(y.fill,Q.bgcolor)},U.mockAxis=function(ut,Q,j,Z){var G=P.extendFlat({},j,Z);return s(G,Q,ut),G},U.mockCartesianAxis=function(ut,Q,j){var Z=this,G=Z.isSmith,K=j._id,at=P.extendFlat({type:"linear"},j);a(at,ut);var $={x:[0,2],y:[1,3]};return at.setRange=function(){var X=Z.sectorBBox,rt=$[K],et=Z.radialAxis._rl,st=(et[1]-et[0])/(1-Z.getHole(Q));at.range=[X[rt[0]]*st,X[rt[1]]*st]},at.isPtWithinRange="x"!==K||G?function(){return!0}:function(X){return Z.isPtInside(X)},at.setRange(),at.setScale(),at},U.doAutoRange=function(ut,Q){var j=this,Z=j.gd,G=j.radialAxis,K=j.getRadial(Q);c(Z,G);var at=G.range;K.range=at.slice(),K._input.range=at.slice(),G._rl=[G.r2l(at[0],null,"gregorian"),G.r2l(at[1],null,"gregorian")]},U.updateRadialAxis=function(ut,Q){var j=this,Z=j.gd,G=j.layers,K=j.radius,at=j.innerRadius,$=j.cx,X=j.cy,rt=j.getRadial(Q),et=k(j.getSector(Q)[0],360),st=j.radialAxis,dt=at<K,bt=j.isSmith;bt||(j.fillViewInitialKey("radialaxis.angle",rt.angle),j.fillViewInitialKey("radialaxis.range",st.range.slice()),st.setGeometry()),"auto"===st.tickangle&&et>90&&et<=270&&(st.tickangle=180);var gt=bt?function(te){var Qt=D(j,E([te.x,0]));return u(Qt[0]-$,Qt[1]-X)}:function(te){return u(st.l2p(te.x)+at,0)},Lt=bt?function(te){return F(j,te.x,-1/0,1/0)}:function(te){return j.pathArc(st.r2p(te.x)+at)},It=H(rt);if(j.radialTickLayout!==It&&(G["radial-axis"].selectAll(".xtick").remove(),j.radialTickLayout=It),dt){st.setScale();var Mt=0,xt=bt?(st.tickvals||[]).filter(function(te){return te>=0}).map(function(te){return l.tickText(st,te,!0,!1)}):l.calcTicks(st),At=bt?xt:l.clipEnds(st,xt),Gt=l.getTickSigns(st)[2];bt&&(("top"===st.ticks&&"bottom"===st.side||"bottom"===st.ticks&&"top"===st.side)&&(Gt=-Gt),"top"===st.ticks&&"top"===st.side&&(Mt=-st.ticklen),"bottom"===st.ticks&&"bottom"===st.side&&(Mt=st.ticklen)),l.drawTicks(Z,st,{vals:xt,layer:G["radial-axis"],path:l.makeTickPath(st,0,Gt),transFn:gt,crisp:!1}),l.drawGrid(Z,st,{vals:At,layer:G["radial-grid"],path:Lt,transFn:P.noop,crisp:!1}),l.drawLabels(Z,st,{vals:xt,layer:G["radial-axis"],transFn:gt,labelFns:l.makeLabelFns(st,Mt)})}var Wt=j.radialAxisAngle=j.vangles?B(nt(O(rt.angle),j.vangles)):rt.angle,Pt=u($,X),Vt=Pt+C(-Wt);it(G["radial-axis"],dt&&(rt.showticklabels||rt.ticks),{transform:Vt}),it(G["radial-grid"],dt&&rt.showgrid,{transform:bt?"":Pt}),it(G["radial-line"].select("line"),dt&&rt.showline,{x1:bt?-K:at,y1:0,x2:K,y2:0,transform:Vt}).attr("stroke-width",rt.linewidth).call(y.stroke,rt.linecolor)},U.updateRadialAxisTitle=function(ut,Q,j){if(!this.isSmith){var Z=this,G=Z.gd,K=Z.radius,at=Z.cx,$=Z.cy,X=Z.getRadial(Q),rt=Z.id+"title",et=0;if(X.title){var st=e.bBox(Z.layers["radial-axis"].node()).height,dt=X.title.font.size,bt=X.side;et="top"===bt?dt:"counterclockwise"===bt?-(st+.4*dt):st+.8*dt}var gt=void 0!==j?j:Z.radialAxisAngle,Lt=O(gt),It=Math.cos(Lt),Mt=Math.sin(Lt),xt=at+K/2*It+et*Mt,At=$-K/2*Mt+et*It;Z.layers["radial-axis-title"]=w.draw(G,rt,{propContainer:X,propName:Z.id+".radialaxis.title",placeholder:N(G,"Click to enter radial axis title"),attributes:{x:xt,y:At,"text-anchor":"middle"},transform:{rotate:-gt}})}},U.updateAngularAxis=function(ut,Q){var j=this,Z=j.gd,G=j.layers,K=j.radius,at=j.innerRadius,$=j.cx,X=j.cy,rt=j.getAngular(Q),et=j.angularAxis,st=j.isSmith;st||(j.fillViewInitialKey("angularaxis.rotation",rt.rotation),et.setGeometry(),et.setScale());var dt=st?function(Qt){var Bt=D(j,E([0,Qt.x]));return Math.atan2(Bt[0]-$,Bt[1]-X)-Math.PI/2}:function(Qt){return et.t2g(Qt.x)};"linear"===et.type&&"radians"===et.thetaunit&&(et.tick0=B(et.tick0),et.dtick=B(et.dtick));var bt=function(Qt){return u($+K*Math.cos(Qt),X-K*Math.sin(Qt))},gt=st?function(Qt){var Bt=D(j,E([0,Qt.x]));return u(Bt[0],Bt[1])}:function(Qt){return bt(dt(Qt))},Lt=st?function(Qt){var Bt=D(j,E([0,Qt.x])),Ot=Math.atan2(Bt[0]-$,Bt[1]-X)-Math.PI/2;return u(Bt[0],Bt[1])+C(-B(Ot))}:function(Qt){var Bt=dt(Qt);return bt(Bt)+C(-B(Bt))},It=st?function(Qt){return d(j,Qt.x,0,1/0)}:function(Qt){var Bt=dt(Qt),Ot=Math.cos(Bt),qt=Math.sin(Bt);return"M"+[$+at*Ot,X-at*qt]+"L"+[$+K*Ot,X-K*qt]},xt=l.makeLabelFns(et,0).labelStandoff,At={xFn:function(Qt){var Bt=dt(Qt);return Math.cos(Bt)*xt},yFn:function(Qt){var Bt=dt(Qt),Ot=Math.sin(Bt)>0?.2:1;return-Math.sin(Bt)*(xt+Qt.fontSize*Ot)+Math.abs(Math.cos(Bt))*(Qt.fontSize*x)},anchorFn:function(Qt){var Bt=dt(Qt),Ot=Math.cos(Bt);return Math.abs(Ot)<.1?"middle":Ot>0?"start":"end"},heightFn:function(Qt,Bt,Ot){var qt=dt(Qt);return-.5*(1+Math.sin(qt))*Ot}},Gt=H(rt);j.angularTickLayout!==Gt&&(G["angular-axis"].selectAll("."+et._id+"tick").remove(),j.angularTickLayout=Gt);var Pt,Wt=st?[1/0].concat(et.tickvals||[]).map(function(Qt){return l.tickText(et,Qt,!0,!1)}):l.calcTicks(et);if(st&&(Wt[0].text="\u221e",Wt[0].fontSize*=1.75),"linear"===Q.gridshape?(Pt=Wt.map(dt),P.angleDelta(Pt[0],Pt[1])<0&&(Pt=Pt.slice().reverse())):Pt=null,j.vangles=Pt,"category"===et.type&&(Wt=Wt.filter(function(Qt){return P.isAngleInsideSector(dt(Qt),j.sectorInRad)})),et.visible){var Vt="inside"===et.ticks?-1:1;l.drawTicks(Z,et,{vals:Wt,layer:G["angular-axis"],path:"M"+Vt*((et.linewidth||1)/2)+",0h"+Vt*et.ticklen,transFn:Lt,crisp:!1}),l.drawGrid(Z,et,{vals:Wt,layer:G["angular-grid"],path:It,transFn:P.noop,crisp:!1}),l.drawLabels(Z,et,{vals:Wt,layer:G["angular-axis"],repositionOnUpdate:!0,transFn:gt,labelFns:At})}it(G["angular-line"].select("path"),rt.showline,{d:j.pathSubplot(),transform:u($,X)}).attr("stroke-width",rt.linewidth).call(y.stroke,rt.linecolor)},U.updateFx=function(ut,Q){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(ut),this.updateRadialDrag(ut,Q,0),this.updateRadialDrag(ut,Q,1)),this.updateHoverAndMainDrag(ut))},U.updateHoverAndMainDrag=function(ut){var Pt,Vt,Q=this,j=Q.isSmith,Z=Q.gd,K=ut._zoomlayer,at=S.MINZOOM,$=S.OFFEDGE,X=Q.radius,rt=Q.innerRadius,et=Q.cx,st=Q.cy,dt=Q.cxx,bt=Q.cyy,gt=Q.sectorInRad,Lt=Q.vangles,It=Q.radialAxis,Mt=T.clampTiny,xt=T.findXYatLength,At=T.findEnclosingVertexAngles,Gt=S.cornerHalfWidth,Wt=S.cornerLen/2,te=f.makeDragger(Q.layers,"path","maindrag",!1===ut.dragmode?"none":"crosshair");A.select(te).attr("d",Q.pathSubplot()).attr("transform",u(et,st)),te.onmousemove=function(xe){h.hover(Z,xe,Q.id),Z._fullLayout._lasthover=te,Z._fullLayout._hoversubplot=Q.id},te.onmouseout=function(xe){Z._dragging||m.unhover(Z,xe)};var Bt,Ot,qt,ie,oe,pe,de,Fe,Kt,Qt={element:te,gd:Z,subplot:Q.id,plotinfo:{id:Q.id,xaxis:Q.xaxis,yaxis:Q.yaxis},xaxes:[Q.xaxis],yaxes:[Q.yaxis]};function Et(xe,Pe){return Math.sqrt(xe*xe+Pe*Pe)}function St(xe,Pe){return Et(xe-dt,Pe-bt)}function Dt(xe,Pe){return Math.atan2(bt-Pe,xe-dt)}function Ft(xe,Pe){return[xe*Math.cos(Pe),xe*Math.sin(-Pe)]}function Nt(xe,Pe){if(0===xe)return Q.pathSector(2*Gt);var Ge=Wt/xe,gr=Pe-Ge,ue=Pe+Ge,Ne=Math.max(0,Math.min(xe,X)),Ye=Ne-Gt,xr=Ne+Gt;return"M"+Ft(Ye,gr)+"A"+[Ye,Ye]+" 0,0,0 "+Ft(Ye,ue)+"L"+Ft(xr,ue)+"A"+[xr,xr]+" 0,0,1 "+Ft(xr,gr)+"Z"}function Rt(xe,Pe,Ge){if(0===xe)return Q.pathSector(2*Gt);var xr,rr,gr=Ft(xe,Pe),ue=Ft(xe,Ge),Ne=Mt((gr[0]+ue[0])/2),Ye=Mt((gr[1]+ue[1])/2);if(Ne&&Ye){var ce=Ye/Ne,re=-1/ce,ve=xt(Gt,ce,Ne,Ye);xr=xt(Wt,re,ve[0][0],ve[0][1]),rr=xt(Wt,re,ve[1][0],ve[1][1])}else{var be,Ae;Ye?(be=Wt,Ae=Gt):(be=Gt,Ae=Wt),xr=[[Ne-be,Ye-Ae],[Ne+be,Ye-Ae]],rr=[[Ne-be,Ye+Ae],[Ne+be,Ye+Ae]]}return"M"+xr.join("L")+"L"+rr.reverse().join("L")+"Z"}function ft(xe,Pe){return Pe=Math.max(Math.min(Pe,X),rt),xe<$?xe=0:X-xe<$?xe=X:Pe<$?Pe=0:X-Pe<$&&(Pe=X),Math.abs(Pe-xe)>at?(xe<Pe?(qt=xe,ie=Pe):(qt=Pe,ie=xe),!0):(qt=null,ie=null,!1)}function pt(xe,Pe){Pe=Pe||"M0,0Z",Fe.attr("d",xe=xe||oe),Kt.attr("d",Pe),f.transitionZoombox(Fe,Kt,pe,de),pe=!0;var Ge={};Be(Ge),Z.emit("plotly_relayouting",Ge)}function kt(xe,Pe){var xr,rr,Ge=Bt+(xe*=Pt),gr=Ot+(Pe*=Vt),ue=St(Bt,Ot),Ne=Math.min(St(Ge,gr),X),Ye=Dt(Bt,Ot);ft(ue,Ne)&&(xr=oe+Q.pathSector(ie),qt&&(xr+=Q.pathSector(qt)),rr=Nt(qt,Ye)+Nt(ie,Ye)),pt(xr,rr)}function Zt(xe,Pe,Ge,gr){var ue=T.findIntersectionXY(Ge,gr,Ge,[xe-dt,bt-Pe]);return Et(ue[0],ue[1])}function ee(xe,Pe){var re,ve,Ge=Bt+xe,gr=Ot+Pe,ue=Dt(Bt,Ot),Ne=Dt(Ge,gr),Ye=At(ue,Lt),xr=At(Ne,Lt);ft(Zt(Bt,Ot,Ye[0],Ye[1]),Math.min(Zt(Ge,gr,xr[0],xr[1]),X))&&(re=oe+Q.pathSector(ie),qt&&(re+=Q.pathSector(qt)),ve=[Rt(qt,Ye[0],Ye[1]),Rt(ie,Ye[0],Ye[1])].join(" ")),pt(re,ve)}function se(){if(f.removeZoombox(Z),null!==qt&&null!==ie){var xe={};Be(xe),f.showDoubleClickNotifier(Z),i.call("_guiRelayout",Z,xe)}}function Be(xe){var Pe=It._rl,Ge=(Pe[1]-Pe[0])/(1-rt/X)/X;xe[Q.id+".radialaxis.range"]=[Pe[0]+(qt-rt)*Ge,Pe[0]+(ie-rt)*Ge]}function Ke(xe,Pe){var Ge=Z._fullLayout.clickmode;if(f.removeZoombox(Z),2===xe){var gr={};for(var ue in Q.viewInitial)gr[Q.id+"."+ue]=Q.viewInitial[ue];Z.emit("plotly_doubleclick",null),i.call("_guiRelayout",Z,gr)}Ge.indexOf("select")>-1&&1===xe&&o(Pe,Z,[Q.xaxis],[Q.yaxis],Q.id,Qt),Ge.indexOf("event")>-1&&h.click(Z,Pe,Q.id)}Qt.prepFn=function(xe,Pe,Ge){var gr=Z._fullLayout.dragmode,ue=te.getBoundingClientRect();Z._fullLayout._calcInverseTransform(Z),Pt=Z._fullLayout._invScaleX,Vt=Z._fullLayout._invScaleY;var Ye=P.apply3DTransform(Z._fullLayout._invTransform)(Pe-ue.left,Ge-ue.top);if(Bt=Ye[0],Ot=Ye[1],Lt){var xr=T.findPolygonOffset(X,gt[0],gt[1],Lt);Bt+=dt+xr[0],Ot+=bt+xr[1]}switch(gr){case"zoom":Qt.clickFn=Ke,j||(Qt.moveFn=Lt?ee:kt,Qt.doneFn=se,function wt(){qt=null,ie=null,oe=Q.pathSubplot(),pe=!1,de=g(Z._fullLayout[Q.id].bgcolor).getLuminance(),(Fe=f.makeZoombox(K,de,et,st,oe)).attr("fill-rule","evenodd"),Kt=f.makeCorners(K,et,st),v(Z)}());break;case"select":case"lasso":p(xe,Pe,Ge,Qt,gr)}},m.init(Qt)},U.updateRadialDrag=function(ut,Q,j){var Z=this,G=Z.gd,K=Z.layers,at=Z.radius,$=Z.innerRadius,X=Z.cx,rt=Z.cy,et=Z.radialAxis,st=S.radialDragBoxSize,dt=st/2;if(et.visible){var At,Gt,Wt,bt=O(Z.radialAxisAngle),gt=et._rl,Lt=gt[0],It=gt[1],Mt=gt[j],xt=.75*(gt[1]-gt[0])/(1-Z.getHole(Q))/at;j?(At=X+(at+dt)*Math.cos(bt),Gt=rt-(at+dt)*Math.sin(bt),Wt="radialdrag"):(At=X+($-dt)*Math.cos(bt),Gt=rt-($-dt)*Math.sin(bt),Wt="radialdrag-inner");var te,Qt,Bt,Pt=f.makeRectDragger(K,Wt,"crosshair",-dt,-dt,st,st),Vt={element:Pt,gd:G};!1===ut.dragmode&&(Vt.dragmode=!1),it(A.select(Pt),et.visible&&$<at,{transform:u(At,Gt)}),Vt.prepFn=function(){te=null,Qt=null,Bt=null,Vt.moveFn=Ot,Vt.doneFn=ie,v(G)},Vt.clampFn=function(de,Fe){return Math.sqrt(de*de+Fe*Fe)<S.MINDRAG&&(de=0,Fe=0),[de,Fe]},m.init(Vt)}function Ot(de,Fe){if(te)te(de,Fe);else{var Kt=[de,-Fe],Et=[Math.cos(bt),Math.sin(bt)],St=Math.abs(P.dot(Kt,Et)/Math.sqrt(P.dot(Kt,Kt)));isNaN(St)||(te=St<.5?oe:pe)}var Dt={};(function qt(de){null!==Qt?de[Z.id+".radialaxis.angle"]=Qt:null!==Bt&&(de[Z.id+".radialaxis.range["+j+"]"]=Bt)})(Dt),G.emit("plotly_relayouting",Dt)}function ie(){null!==Qt?i.call("_guiRelayout",G,Z.id+".radialaxis.angle",Qt):null!==Bt&&i.call("_guiRelayout",G,Z.id+".radialaxis.range["+j+"]",Bt)}function oe(de,Fe){if(0!==j){Qt=Math.atan2(rt-(Gt+Fe),At+de-X),Z.vangles&&(Qt=nt(Qt,Z.vangles)),Qt=B(Qt);var St=u(X,rt)+C(-Qt);K["radial-axis"].attr("transform",St),K["radial-line"].select("line").attr("transform",St);var Dt=Z.gd._fullLayout;Z.updateRadialAxisTitle(Dt,Dt[Z.id],Qt)}}function pe(de,Fe){var Kt=P.dot([de,-Fe],[Math.cos(bt),Math.sin(bt)]);if(Bt=Mt-xt*Kt,xt>0==(j?Bt>Lt:Bt<It)){var Et=G._fullLayout,St=Et[Z.id];et.range[j]=Bt,et._rl[j]=Bt,Z.updateRadialAxis(Et,St),Z.xaxis.setRange(),Z.xaxis.setScale(),Z.yaxis.setRange(),Z.yaxis.setScale();var Dt=!1;for(var Ft in Z.traceHash){var Nt=Z.traceHash[Ft],Rt=P.filterVisible(Nt);Nt[0][0].trace._module.plot(G,Z,Rt,St),i.traceIs(Ft,"gl")&&Rt.length&&(Dt=!0)}Dt&&(b(G),L(G))}else Bt=null}},U.updateAngularDrag=function(ut){var Q=this,j=Q.gd,Z=Q.layers,G=Q.radius,K=Q.angularAxis,at=Q.cx,$=Q.cy,X=Q.cxx,rt=Q.cyy,et=S.angularDragBoxSize,st=f.makeDragger(Z,"path","angulardrag",!1===ut.dragmode?"none":"move"),dt={element:st,gd:j};function bt(Bt,Ot){return Math.atan2(rt+et-Ot,Bt-X-et)}!1===ut.dragmode?dt.dragmode=!1:A.select(st).attr("d",Q.pathAnnulus(G,G+et)).attr("transform",u(at,$)).call(M,"move");var Mt,xt,At,Gt,Wt,Pt,gt=Z.frontplot.select(".scatterlayer").selectAll(".trace"),Lt=gt.selectAll(".point"),It=gt.selectAll(".textpoint");function Vt(Bt,Ot){var qt=Q.gd._fullLayout,ie=qt[Q.id],de=bt(Mt+Bt*ut._invScaleX,xt+Ot*ut._invScaleY),Fe=B(de-Pt);if(Gt=At+Fe,Z.frontplot.attr("transform",u(Q.xOffset2,Q.yOffset2)+C([-Fe,X,rt])),Q.vangles){Wt=Q.radialAxisAngle+Fe;var Kt=u(at,$)+C(-Fe),Et=u(at,$)+C(-Wt);Z.bg.attr("transform",Kt),Z["radial-grid"].attr("transform",Kt),Z["radial-axis"].attr("transform",Et),Z["radial-line"].select("line").attr("transform",Et),Q.updateRadialAxisTitle(qt,ie,Wt)}else Q.clipPaths.forTraces.select("path").attr("transform",u(X,rt)+C(Fe));Lt.each(function(){var ft=A.select(this),pt=e.getTranslate(ft);ft.attr("transform",u(pt.x,pt.y)+C([Fe]))}),It.each(function(){var ft=A.select(this),pt=ft.select("text"),kt=e.getTranslate(ft);ft.attr("transform",C([Fe,pt.attr("x"),pt.attr("y")])+u(kt.x,kt.y))}),K.rotation=P.modHalf(Gt,360),Q.updateAngularAxis(qt,ie),Q._hasClipOnAxisFalse&&!P.isFullCircle(Q.sectorInRad)&&gt.call(e.hideOutsideRangePoints,Q);var St=!1;for(var Dt in Q.traceHash)if(i.traceIs(Dt,"gl")){var Ft=Q.traceHash[Dt],Nt=P.filterVisible(Ft);Ft[0][0].trace._module.plot(j,Q,Nt,ie),Nt.length&&(St=!0)}St&&(b(j),L(j));var wt={};te(wt),j.emit("plotly_relayouting",wt)}function te(Bt){Bt[Q.id+".angularaxis.rotation"]=Gt,Q.vangles&&(Bt[Q.id+".radialaxis.angle"]=Wt)}function Qt(){It.select("text").attr("transform",null);var Bt={};te(Bt),i.call("_guiRelayout",j,Bt)}dt.prepFn=function(Bt,Ot,qt){At=ut[Q.id].angularaxis.rotation;var oe=st.getBoundingClientRect();Mt=Ot-oe.left,xt=qt-oe.top,j._fullLayout._calcInverseTransform(j);var pe=P.apply3DTransform(ut._invTransform)(Mt,xt);Pt=bt(Mt=pe[0],xt=pe[1]),dt.moveFn=Vt,dt.doneFn=Qt,v(j)},Q.vangles&&!P.isFullCircle(Q.sectorInRad)&&(dt.prepFn=P.noop,M(A.select(st),null)),m.init(dt)},U.isPtInside=function(ut){if(this.isSmith)return!0;var Q=this.sectorInRad,j=this.vangles,Z=this.angularAxis.c2g(ut.theta),G=this.radialAxis,K=G.c2l(ut.r);return(j?T.isPtInsidePolygon:P.isPtInsideSector)(K,Z,G._rl,Q,j)},U.pathArc=function(ut){var Q=this.sectorInRad,j=this.vangles;return(j?T.pathPolygon:P.pathArc)(ut,Q[0],Q[1],j)},U.pathSector=function(ut){var Q=this.sectorInRad,j=this.vangles;return(j?T.pathPolygon:P.pathSector)(ut,Q[0],Q[1],j)},U.pathAnnulus=function(ut,Q){var j=this.sectorInRad,Z=this.vangles;return(Z?T.pathPolygonAnnulus:P.pathAnnulus)(ut,Q,j[0],j[1],Z)},U.pathSubplot=function(){var ut=this.innerRadius,Q=this.radius;return ut?this.pathAnnulus(ut,Q):this.pathSector(Q)},U.fillViewInitialKey=function(ut,Q){ut in this.viewInitial||(this.viewInitial[ut]=Q)}},12101:function(q,W,t){"use strict";var A=t(71828),g=t(21994),i=A.deg2rad,P=A.rad2deg;function e(r,l){var a=r.type;if("linear"===a){var s=r.d2c,c=r.c2d;r.d2c=function(f,m){return function u(r,l){return"degrees"===l?i(r):r}(s(f),m)},r.c2d=function(f,m){return c(function y(r,l){return"degrees"===l?P(r):r}(f,m))}}r.makeCalcdata=function(f,m){var p,o,h=f[m],w=f._length,v=function(S){return r.d2c(S,f.thetaunit)};if(h){if(A.isTypedArray(h)&&"linear"===a){if(w===h.length)return h;if(h.subarray)return h.subarray(0,w)}for(p=new Array(w),o=0;o<w;o++)p[o]=v(h[o])}else{var M=m+"0",b="d"+m,L=M in f?v(f[M]):0,x=f[b]?v(f[b]):(r.period||2*Math.PI)/w;for(p=new Array(w),o=0;o<w;o++)p[o]=L+o*x}return p},r.setGeometry=function(){var v,M,b,L,f=l.sector,m=f.map(i),h={clockwise:-1,counterclockwise:1}[r.direction],w=i(r.rotation),p=function(T){return h*T+w},o=function(T){return(T-w)/h};switch(a){case"linear":M=v=A.identity,L=i,b=P,r.range=A.isFullCircle(m)?[f[0],f[0]+360]:m.map(o).map(P);break;case"category":var x=r._categories.length,S=r.period?Math.max(r.period,x):x;0===S&&(S=1),M=L=function(T){return 2*T*Math.PI/S},v=b=function(T){return T*S/Math.PI/2},r.range=[0,S]}r.c2g=function(T){return p(M(T))},r.g2c=function(T){return v(o(T))},r.t2g=function(T){return p(L(T))},r.g2t=function(T){return b(o(T))}}}q.exports=function(l,a,s){switch(g(l,s),l._id){case"x":case"radialaxis":!function C(r,l){var a=l._subplot;r.setGeometry=function(){var s=r._rl[0],c=r._rl[1],f=a.innerRadius,m=(a.radius-f)/(c-s),h=f/m,w=s>c?function(p){return p<=0}:function(p){return p>=0};r.c2g=function(p){var o=r.c2l(p)-s;return(w(o)?o:0)+h},r.g2c=function(p){return r.l2c(p+s-h)},r.g2p=function(p){return p*m},r.c2p=function(p){return r.g2p(r.c2g(p))}}}(l,a);break;case"angularaxis":e(l,a)}}},39779:function(q){"use strict";q.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},23893:function(q){"use strict";function W(C){return C<0?-1:C>0?1:0}function t(C){var u=C[0],y=C[1];if(!isFinite(u)||!isFinite(y))return[1,0];var e=(u+1)*(u+1)+y*y;return[(u*u+y*y-1)/e,2*y/e]}function A(C,u){return[u[0]*C.radius+C.cx,-u[1]*C.radius+C.cy]}function g(C,u){return u*C.radius}q.exports={smith:t,reactanceArc:function i(C,u,y,e){var r=A(C,t([y,u])),l=r[0],a=r[1],s=A(C,t([e,u])),c=s[0],f=s[1];if(0===u)return["M"+l+","+a,"L"+c+","+f].join(" ");var m=g(C,1/Math.abs(u));return["M"+l+","+a,"A"+m+","+m+" 0 0,"+(u<0?1:0)+" "+c+","+f].join(" ")},resistanceArc:function P(C,u,y,e){var r=g(C,1/(u+1)),l=A(C,t([u,y])),a=l[0],s=l[1],c=A(C,t([u,e])),f=c[0],m=c[1];if(W(y)!==W(e)){var h=A(C,t([u,0]));return["M"+a+","+s,"A"+r+","+r+" 0 0,"+(0<y?0:1)+" "+h[0]+","+h[1],"A"+r+","+r+" 0 0,"+(e<0?0:1)+f+","+m].join(" ")}return["M"+a+","+s,"A"+r+","+r+" 0 0,"+(e<y?0:1)+" "+f+","+m].join(" ")},smithTransform:A}},7504:function(q,W,t){"use strict";var A=t(27659).AU,g=t(71828).counterRegex,i=t(77997),P=t(39779),C=P.attr,u=P.name,y=g(u),e={};e[C]={valType:"subplotid",dflt:u,editType:"calc"},q.exports={attr:C,name:u,idRoot:u,idRegex:y,attrRegex:y,attributes:e,layoutAttributes:t(33419),supplyLayoutDefaults:t(9558),plot:function r(a){for(var s=a._fullLayout,c=a.calcdata,f=s._subplots[u],m=0;m<f.length;m++){var h=f[m],w=A(c,u,h),p=s[h]._subplot;p||(p=i(a,h,!0),s[h]._subplot=p),p.plot(w,s,a._promises)}},clean:function l(a,s,c,f){for(var m=f._subplots[u]||[],h=0;h<m.length;h++){var w=m[h],p=f[w]._subplot;if(!s[w]&&p)for(var o in p.framework.remove(),p.clipPaths)p.clipPaths[o].remove()}},toSVG:t(93612).toSVG}},33419:function(q,W,t){"use strict";var A=t(22399),g=t(13838),i=t(27670).Y,P=t(71828).extendFlat,C=t(30962).overrideAll,u=C({color:g.color,showline:P({},g.showline,{dflt:!0}),linecolor:g.linecolor,linewidth:g.linewidth,showgrid:P({},g.showgrid,{dflt:!0}),gridcolor:g.gridcolor,gridwidth:g.gridwidth,griddash:g.griddash},"plot","from-root"),y=C({ticklen:g.ticklen,tickwidth:P({},g.tickwidth,{dflt:2}),tickcolor:g.tickcolor,showticklabels:g.showticklabels,labelalias:g.labelalias,showtickprefix:g.showtickprefix,tickprefix:g.tickprefix,showticksuffix:g.showticksuffix,ticksuffix:g.ticksuffix,tickfont:g.tickfont,tickformat:g.tickformat,hoverformat:g.hoverformat,layer:g.layer},"plot","from-root"),e=P({visible:P({},g.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:P({},g.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},u,y),r=P({visible:P({},g.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:g.ticks,editType:"calc"},u,y);q.exports={domain:i({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:A.background},realaxis:e,imaginaryaxis:r,editType:"calc"}},9558:function(q,W,t){"use strict";var A=t(71828),g=t(7901),i=t(44467),P=t(49119),C=t(27659).NG,u=t(89426),y=t(96115),e=t(92128),r=t(21994),l=t(33419),a=t(39779),s=a.axisNames,c=function m(h,w){var p={};return function(o){var v=w?w(o):o;if(v in p)return p[v];var M=h(o);return p[v]=M,M}}(function(h){return h.slice().reverse().map(function(w){return-w}).concat([0]).concat(h)},String);function f(h,w,p,o){var v=p("bgcolor");o.bgColor=g.combine(v,o.paper_bgcolor);var L,M=C(o.fullData,a.name,o.id),b=o.layoutOut;function x(U,H){return p(L+"."+U,H)}for(var S=0;S<s.length;S++){A.isPlainObject(h[L=s[S]])||(h[L]={});var T=h[L],n=i.newContainer(w,L);n._id=n._name=L,n._attr=o.id+"."+L,n._traceIndices=M.map(function(U){return U._expandedIndex});var E=x("visible");if(n.type="linear",r(n,b),u(T,n,x,n.type),E){var d="realaxis"===L;d&&x("side"),d?x("tickvals"):x("tickvals",c(w.realaxis.tickvals||l.realaxis.tickvals.dflt));var D,N,k,O,B=o.font||{};E&&(N=(D=x("color"))===T.color?D:B.color,k=B.size,O=B.family),y(T,n,x,n.type,{noTicklabelstep:!0,noAng:!d,noExp:!0,font:{color:N,size:k,family:O}}),A.coerce2(h,w,l,L+".ticklen"),A.coerce2(h,w,l,L+".tickwidth"),A.coerce2(h,w,l,L+".tickcolor",w.color),x("ticks")||(delete w[L].ticklen,delete w[L].tickwidth,delete w[L].tickcolor),e(T,n,x,{dfltColor:D,bgColor:o.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l[L]}),x("layer")}x("hoverformat"),delete n.type,n._input=T}}q.exports=function(w,p,o){P(w,p,o,{noUirevision:!0,type:a.name,attributes:l,handleDefaults:f,font:p.font,paper_bgcolor:p.paper_bgcolor,fullData:o,layoutOut:p})}},49119:function(q,W,t){"use strict";var A=t(71828),g=t(44467),i=t(27670).c;q.exports=function(C,u,y,e){var h,w,l=e.attributes,a=e.handleDefaults,s=e.partition||"x",c=u._subplots[e.type],f=c.length,m=f&&c[0].replace(/\d+$/,"");function p(b,L){return A.coerce(h,w,l,b,L)}for(var o=0;o<f;o++){var v=c[o];h=C[v]?C[v]:C[v]={},w=g.newContainer(u,v,m),e.noUirevision||p("uirevision",u.uirevision);var M={};M[s]=[o/f,(o+1)/f],i(w,u,p,M),e.id=v,a(h,w,p,e)}}},5386:function(q,W,t){"use strict";function u(y){var e=y.description?" "+y.description:"",r=y.keys||[];if(r.length>0){for(var l=[],a=0;a<r.length;a++)l[a]="`"+r[a]+"`";e+="Finally, the template string has access to ",e=1===r.length?e+"variable "+l[0]:e+"variables "+l.slice(0,-1).join(", ")+" and "+l.slice(-1)+"."}return e}t(31562),W.fF=function(y,e){y=y||{},u(e=e||{});var l={valType:"string",dflt:"",editType:y.editType||"none"};return!1!==y.arrayOk&&(l.arrayOk=!0),l},W.si=function(y,e){y=y||{},u(e=e||{});var l={valType:"string",dflt:"",editType:y.editType||"calc"};return!1!==y.arrayOk&&(l.arrayOk=!0),l},W.R=function(y,e){return y=y||{},u(e=e||{}),{valType:"string",dflt:"",editType:y.editType||"arraydraw"}}},61639:function(q,W,t){"use strict";var A=t(64380),g=t(27659).AU,i=t(71828).counterRegex,P="ternary";W.name=P;var C=W.attr="subplot";W.idRoot=P,W.idRegex=W.attrRegex=i(P),(W.attributes={})[C]={valType:"subplotid",dflt:"ternary",editType:"calc"},W.layoutAttributes=t(81367),W.supplyLayoutDefaults=t(25369),W.plot=function(e){for(var r=e._fullLayout,l=e.calcdata,a=r._subplots[P],s=0;s<a.length;s++){var c=a[s],f=g(l,P,c),m=r[c]._subplot;m||(m=new A({id:c,graphDiv:e,container:r._ternarylayer.node()},r),r[c]._subplot=m),m.plot(f,r,e._promises)}},W.clean=function(y,e,r,l){for(var a=l._subplots[P]||[],s=0;s<a.length;s++){var c=a[s],f=l[c]._subplot;!e[c]&&f&&(f.plotContainer.remove(),f.clipDef.remove(),f.clipDefRelative.remove(),f.layers["a-title"].remove(),f.layers["b-title"].remove(),f.layers["c-title"].remove())}}},81367:function(q,W,t){"use strict";var A=t(22399),g=t(27670).Y,i=t(13838),P=t(30962).overrideAll,C=t(1426).extendFlat,u={title:{text:i.title.text,font:i.title.font},color:i.color,tickmode:i.minor.tickmode,nticks:C({},i.nticks,{dflt:6,min:1}),tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:i.ticks,ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,ticklabelstep:i.ticklabelstep,showticklabels:i.showticklabels,labelalias:i.labelalias,showtickprefix:i.showtickprefix,tickprefix:i.tickprefix,showticksuffix:i.showticksuffix,ticksuffix:i.ticksuffix,showexponent:i.showexponent,exponentformat:i.exponentformat,minexponent:i.minexponent,separatethousands:i.separatethousands,tickfont:i.tickfont,tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,hoverformat:i.hoverformat,showline:C({},i.showline,{dflt:!0}),linecolor:i.linecolor,linewidth:i.linewidth,showgrid:C({},i.showgrid,{dflt:!0}),gridcolor:i.gridcolor,gridwidth:i.gridwidth,griddash:i.griddash,layer:i.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:i._deprecated.title,titlefont:i._deprecated.titlefont}},y=q.exports=P({domain:g({name:"ternary"}),bgcolor:{valType:"color",dflt:A.background},sum:{valType:"number",dflt:1,min:0},aaxis:u,baxis:u,caxis:u},"plot","from-root");y.uirevision={valType:"any",editType:"none"},y.aaxis.uirevision=y.baxis.uirevision=y.caxis.uirevision={valType:"any",editType:"none"}},25369:function(q,W,t){"use strict";var A=t(7901),g=t(44467),i=t(71828),P=t(49119),C=t(96115),u=t(89426),y=t(38701),e=t(26218),r=t(92128),l=t(81367),a=["aaxis","baxis","caxis"];function s(f,m,h,w){var p=h("bgcolor"),o=h("sum");w.bgColor=A.combine(p,w.paper_bgcolor);for(var v,M,b,L=0;L<a.length;L++)M=f[v=a[L]]||{},(b=g.newContainer(m,v))._name=v,c(M,b,w,m);var x=m.aaxis,S=m.baxis,T=m.caxis;x.min+S.min+T.min>=o&&(x.min=0,S.min=0,T.min=0,f.aaxis&&delete f.aaxis.min,f.baxis&&delete f.baxis.min,f.caxis&&delete f.caxis.min)}function c(f,m,h,w){var p=l[m._name];function o(n,E){return i.coerce(f,m,p,n,E)}o("uirevision",w.uirevision),m.type="linear";var v=o("color"),M=v!==p.color.dflt?v:h.font.color,L=m._name.charAt(0).toUpperCase(),x="Component "+L,S=o("title.text",x);m._hovertitle=S===x?S:L,i.coerceFont(o,"title.font",{family:h.font.family,size:i.bigFont(h.font.size),color:M}),o("min"),e(f,m,o,"linear"),u(f,m,o,"linear"),C(f,m,o,"linear"),y(f,m,o,{outerTicks:!0}),o("showticklabels")&&(i.coerceFont(o,"tickfont",{family:h.font.family,size:h.font.size,color:M}),o("tickangle"),o("tickformat")),r(f,m,o,{dfltColor:v,bgColor:h.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:p}),o("hoverformat"),o("layer")}q.exports=function(m,h,w){P(m,h,w,{type:"ternary",attributes:l,handleDefaults:s,font:h.font,paper_bgcolor:h.paper_bgcolor})}},64380:function(q,W,t){"use strict";var A=t(39898),g=t(84267),i=t(73972),P=t(71828),C=P.strTranslate,u=P._,y=t(7901),e=t(91424),r=t(21994),l=t(1426).extendFlat,a=t(74875),s=t(89298),c=t(28569),f=t(30211),m=t(64505),h=m.freeMode,w=m.rectMode,p=t(92998),o=t(47322).prepSelect,v=t(47322).selectOnClick,M=t(47322).clearOutline,b=t(47322).clearSelectionsCache,L=t(85555);function x(B,z){this.id=B.id,this.graphDiv=B.graphDiv,this.init(z),this.makeFramework(z),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}q.exports=x;var S=x.prototype;S.init=function(B){this.container=B._ternarylayer,this.defs=B._defs,this.layoutId=B._uid,this.traceHash={},this.layers={}},S.plot=function(B,z){var U=this,H=z[U.id],J=z._size;U._hasClipOnAxisFalse=!1;for(var nt=0;nt<B.length;nt++)if(!1===B[nt][0].trace.cliponaxis){U._hasClipOnAxisFalse=!0;break}U.updateLayers(H),U.adjustLayout(H,J),a.generalUpdatePerTraceModule(U.graphDiv,U,B,H),U.layers.plotbg.select("path").call(y.fill,H.bgcolor)},S.makeFramework=function(B){var z=this,U=z.graphDiv,H=B[z.id],J=z.clipId="clip"+z.layoutId+z.id,nt=z.clipIdRelative="clip-relative"+z.layoutId+z.id;z.clipDef=P.ensureSingleById(B._clips,"clipPath",J,function(it){it.append("path").attr("d","M0,0Z")}),z.clipDefRelative=P.ensureSingleById(B._clips,"clipPath",nt,function(it){it.append("path").attr("d","M0,0Z")}),z.plotContainer=P.ensureSingle(z.container,"g",z.id),z.updateLayers(H),e.setClipUrl(z.layers.backplot,J,U),e.setClipUrl(z.layers.grids,J,U)},S.updateLayers=function(B){var U=this.layers,H=["draglayer","plotbg","backplot","grids"];"below traces"===B.aaxis.layer&&H.push("aaxis","aline"),"below traces"===B.baxis.layer&&H.push("baxis","bline"),"below traces"===B.caxis.layer&&H.push("caxis","cline"),H.push("frontplot"),"above traces"===B.aaxis.layer&&H.push("aaxis","aline"),"above traces"===B.baxis.layer&&H.push("baxis","bline"),"above traces"===B.caxis.layer&&H.push("caxis","cline");var J=this.plotContainer.selectAll("g.toplevel").data(H,String),nt=["agrid","bgrid","cgrid"];J.enter().append("g").attr("class",function(it){return"toplevel "+it}).each(function(it){var ut=A.select(this);U[it]=ut,"frontplot"===it?ut.append("g").classed("scatterlayer",!0):"backplot"===it?ut.append("g").classed("maplayer",!0):"plotbg"===it?ut.append("path").attr("d","M0,0Z"):"aline"===it||"bline"===it||"cline"===it?ut.append("path"):"grids"===it&&nt.forEach(function(Q){U[Q]=ut.append("g").classed("grid "+Q,!0)})}),J.order()};var T=Math.sqrt(4/3);S.adjustLayout=function(B,z){var $,X,rt,et,st,dt,U=this,H=B.domain,J=(H.x[0]+H.x[1])/2,nt=(H.y[0]+H.y[1])/2,it=H.x[1]-H.x[0],ut=H.y[1]-H.y[0],Q=it*z.w,j=ut*z.h,Z=B.sum,G=B.aaxis.min,K=B.baxis.min,at=B.caxis.min;Q>T*j?rt=(et=j)*T:et=(rt=Q)/T,st=it*rt/Q,dt=ut*et/j,X=z.t+z.h*(1-nt)-et/2,U.x0=$=z.l+z.w*J-rt/2,U.y0=X,U.w=rt,U.h=et,U.sum=Z,U.xaxis={type:"linear",range:[G+2*at-Z,Z-G-2*K],domain:[J-st/2,J+st/2],_id:"x"},r(U.xaxis,U.graphDiv._fullLayout),U.xaxis.setScale(),U.xaxis.isPtWithinRange=function(Vt){return Vt.a>=U.aaxis.range[0]&&Vt.a<=U.aaxis.range[1]&&Vt.b>=U.baxis.range[1]&&Vt.b<=U.baxis.range[0]&&Vt.c>=U.caxis.range[1]&&Vt.c<=U.caxis.range[0]},U.yaxis={type:"linear",range:[G,Z-K-at],domain:[nt-dt/2,nt+dt/2],_id:"y"},r(U.yaxis,U.graphDiv._fullLayout),U.yaxis.setScale(),U.yaxis.isPtWithinRange=function(){return!0};var bt=U.yaxis.domain[0],gt=U.aaxis=l({},B.aaxis,{range:[G,Z-K-at],side:"left",tickangle:(+B.aaxis.tickangle||0)-30,domain:[bt,bt+dt*T],anchor:"free",position:0,_id:"y",_length:rt});r(gt,U.graphDiv._fullLayout),gt.setScale();var Lt=U.baxis=l({},B.baxis,{range:[Z-G-at,K],side:"bottom",domain:U.xaxis.domain,anchor:"free",position:0,_id:"x",_length:rt});r(Lt,U.graphDiv._fullLayout),Lt.setScale();var It=U.caxis=l({},B.caxis,{range:[Z-G-K,at],side:"right",tickangle:(+B.caxis.tickangle||0)+30,domain:[bt,bt+dt*T],anchor:"free",position:0,_id:"y",_length:rt});r(It,U.graphDiv._fullLayout),It.setScale();var Mt="M"+$+","+(X+et)+"h"+rt+"l-"+rt/2+",-"+et+"Z";U.clipDef.select("path").attr("d",Mt),U.layers.plotbg.select("path").attr("d",Mt);var xt="M0,"+et+"h"+rt+"l-"+rt/2+",-"+et+"Z";U.clipDefRelative.select("path").attr("d",xt);var At=C($,X);U.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",At),U.clipDefRelative.select("path").attr("transform",null);var Gt=C($-Lt._offset,X+et);U.layers.baxis.attr("transform",Gt),U.layers.bgrid.attr("transform",Gt);var Wt=C($+rt/2,X)+"rotate(30)"+C(0,-gt._offset);U.layers.aaxis.attr("transform",Wt),U.layers.agrid.attr("transform",Wt);var Pt=C($+rt/2,X)+"rotate(-30)"+C(0,-It._offset);U.layers.caxis.attr("transform",Pt),U.layers.cgrid.attr("transform",Pt),U.drawAxes(!0),U.layers.aline.select("path").attr("d",gt.showline?"M"+$+","+(X+et)+"l"+rt/2+",-"+et:"M0,0").call(y.stroke,gt.linecolor||"#000").style("stroke-width",(gt.linewidth||0)+"px"),U.layers.bline.select("path").attr("d",Lt.showline?"M"+$+","+(X+et)+"h"+rt:"M0,0").call(y.stroke,Lt.linecolor||"#000").style("stroke-width",(Lt.linewidth||0)+"px"),U.layers.cline.select("path").attr("d",It.showline?"M"+($+rt/2)+","+X+"l"+rt/2+","+et:"M0,0").call(y.stroke,It.linecolor||"#000").style("stroke-width",(It.linewidth||0)+"px"),U.graphDiv._context.staticPlot||U.initInteractions(),e.setClipUrl(U.layers.frontplot,U._hasClipOnAxisFalse?null:U.clipId,U.graphDiv)},S.drawAxes=function(B){var z=this,U=z.graphDiv,H=z.id.substr(7)+"title",J=z.layers,nt=z.aaxis,it=z.baxis,ut=z.caxis;if(z.drawAx(nt),z.drawAx(it),z.drawAx(ut),B){var Q=Math.max(nt.showticklabels?nt.tickfont.size/2:0,(ut.showticklabels?.75*ut.tickfont.size:0)+("outside"===ut.ticks?.87*ut.ticklen:0)),j=(it.showticklabels?it.tickfont.size:0)+("outside"===it.ticks?it.ticklen:0)+3;J["a-title"]=p.draw(U,"a"+H,{propContainer:nt,propName:z.id+".aaxis.title",placeholder:u(U,"Click to enter Component A title"),attributes:{x:z.x0+z.w/2,y:z.y0-nt.title.font.size/3-Q,"text-anchor":"middle"}}),J["b-title"]=p.draw(U,"b"+H,{propContainer:it,propName:z.id+".baxis.title",placeholder:u(U,"Click to enter Component B title"),attributes:{x:z.x0-j,y:z.y0+z.h+.83*it.title.font.size+j,"text-anchor":"middle"}}),J["c-title"]=p.draw(U,"c"+H,{propContainer:ut,propName:z.id+".caxis.title",placeholder:u(U,"Click to enter Component C title"),attributes:{x:z.x0+z.w+j,y:z.y0+z.h+.83*ut.title.font.size+j,"text-anchor":"middle"}})}},S.drawAx=function(B){var z=this,U=z.graphDiv,H=B._name,J=H.charAt(0),nt=B._id,it=z.layers[H],Q=J+"tickLayout",j=function n(B){return B.ticks+String(B.ticklen)+String(B.showticklabels)}(B);z[Q]!==j&&(it.selectAll("."+nt+"tick").remove(),z[Q]=j),B.setScale();var Z=s.calcTicks(B),G=s.clipEnds(B,Z),K=s.makeTransTickFn(B),at=s.getTickSigns(B)[2],$=P.deg2rad(30),X=at*(B.linewidth||1)/2,rt=at*B.ticklen,et=z.w,st=z.h,dt="b"===J?"M0,"+X+"l"+Math.sin($)*rt+","+Math.cos($)*rt:"M"+X+",0l"+Math.cos($)*rt+","+-Math.sin($)*rt,bt={a:"M0,0l"+st+",-"+et/2,b:"M0,0l-"+et/2+",-"+st,c:"M0,0l-"+st+","+et/2}[J];s.drawTicks(U,B,{vals:"inside"===B.ticks?G:Z,layer:it,path:dt,transFn:K,crisp:!1}),s.drawGrid(U,B,{vals:G,layer:z.layers[J+"grid"],path:bt,transFn:K,crisp:!1}),s.drawLabels(U,B,{vals:Z,layer:it,transFn:K,labelFns:s.makeLabelFns(B,0,30)})};var E=L.MINZOOM/2+.87,d="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(.87*E+4.5)+"l2.6,1.5l-"+E/2+","+.87*E+"Z",F="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-2.6,1.5l"+E/2+","+.87*E+"Z",D="m0,1l"+E/2+","+.87*E+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-"+(E/2+2.6)+","+(.87*E+4.5)+"l2.6,1.5l"+E/2+",-"+.87*E+"Z",k=!0;function O(B){A.select(B).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}S.clearOutline=function(){b(this.dragOptions),M(this.dragOptions.gd)},S.initInteractions=function(){var J,nt,it,ut,Q,j,Z,G,K,at,$,X,B=this,z=B.layers.plotbg.select("path").node(),U=B.graphDiv,H=U._fullLayout._zoomlayer;function rt(Gt){var Wt={};return Wt[B.id+".aaxis.min"]=Gt.a,Wt[B.id+".baxis.min"]=Gt.b,Wt[B.id+".caxis.min"]=Gt.c,Wt}function et(Gt,Wt){var Pt=U._fullLayout.clickmode;O(U),2===Gt&&(U.emit("plotly_doubleclick",null),i.call("_guiRelayout",U,rt({a:0,b:0,c:0}))),Pt.indexOf("select")>-1&&1===Gt&&v(Wt,U,[B.xaxis],[B.yaxis],B.id,B.dragOptions),Pt.indexOf("event")>-1&&f.click(U,Wt,B.id)}function dt(Gt,Wt){return 1-Wt/B.h}function bt(Gt,Wt){return 1-(Gt+(B.h-Wt)/Math.sqrt(3))/B.w}function gt(Gt,Wt){return(Gt-(B.h-Wt)/Math.sqrt(3))/B.w}function Lt(Gt,Wt){var Pt=it+Gt*J,Vt=ut+Wt*nt,te=Math.max(0,Math.min(1,dt(0,ut),dt(0,Vt))),Qt=Math.max(0,Math.min(1,bt(it,ut),bt(Pt,Vt))),Bt=Math.max(0,Math.min(1,gt(it,ut),gt(Pt,Vt))),Ot=(te/2+Bt)*B.w,qt=(1-te/2-Qt)*B.w,ie=(Ot+qt)/2,oe=qt-Ot,pe=(1-te)*B.h,de=pe-oe/T;oe<L.MINZOOM?(Z=Q,$.attr("d",K),X.attr("d","M0,0Z")):(Z={a:Q.a+te*j,b:Q.b+Qt*j,c:Q.c+Bt*j},$.attr("d",K+"M"+Ot+","+pe+"H"+qt+"L"+ie+","+de+"L"+Ot+","+pe+"Z"),X.attr("d","M"+it+","+ut+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Ot+","+pe+d+"M"+qt+","+pe+F+"M"+ie+","+de+D)),at||($.transition().style("fill",G>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),X.transition().style("opacity",1).duration(200),at=!0),U.emit("plotly_relayouting",rt(Z))}function It(){O(U),Z!==Q&&(i.call("_guiRelayout",U,rt(Z)),k&&U.data&&U._context.showTips&&(P.notifier(u(U,"Double-click to zoom back out"),"long"),k=!1))}function xt(Gt,Wt){var Pt=Gt/B.xaxis._m,Vt=Wt/B.yaxis._m,te=[(Z={a:Q.a-Vt,b:Q.b+(Pt+Vt)/2,c:Q.c-(Pt-Vt)/2}).a,Z.b,Z.c].sort(P.sorterAsc),Qt_a=te.indexOf(Z.a),Qt_b=te.indexOf(Z.b),Qt_c=te.indexOf(Z.c);te[0]<0&&(te[1]+te[0]/2<0?(te[2]+=te[0]+te[1],te[0]=te[1]=0):(te[2]+=te[0]/2,te[1]+=te[0]/2,te[0]=0),Wt=(Q.a-(Z={a:te[Qt_a],b:te[Qt_b],c:te[Qt_c]}).a)*B.yaxis._m,Gt=(Q.c-Z.c-Q.b+Z.b)*B.xaxis._m);var Bt=C(B.x0+Gt,B.y0+Wt);B.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Bt);var Ot=C(-Gt,-Wt);B.clipDefRelative.select("path").attr("transform",Ot),B.aaxis.range=[Z.a,B.sum-Z.b-Z.c],B.baxis.range=[B.sum-Z.a-Z.c,Z.b],B.caxis.range=[B.sum-Z.a-Z.b,Z.c],B.drawAxes(!1),B._hasClipOnAxisFalse&&B.plotContainer.select(".scatterlayer").selectAll(".trace").call(e.hideOutsideRangePoints,B),U.emit("plotly_relayouting",rt(Z))}function At(){i.call("_guiRelayout",U,rt(Z))}this.dragOptions={element:z,gd:U,plotinfo:{id:B.id,domain:U._fullLayout[B.id].domain,xaxis:B.xaxis,yaxis:B.yaxis},subplot:B.id,prepFn:function(Gt,Wt,Pt){B.dragOptions.xaxes=[B.xaxis],B.dragOptions.yaxes=[B.yaxis],J=U._fullLayout._invScaleX,nt=U._fullLayout._invScaleY;var Vt=B.dragOptions.dragmode=U._fullLayout.dragmode;B.dragOptions.minDrag=h(Vt)?1:void 0,"zoom"===Vt?(B.dragOptions.moveFn=Lt,B.dragOptions.clickFn=et,B.dragOptions.doneFn=It,function st(Gt,Wt,Pt){var Vt=z.getBoundingClientRect();it=Wt-Vt.left,ut=Pt-Vt.top,U._fullLayout._calcInverseTransform(U);var Qt=P.apply3DTransform(U._fullLayout._invTransform)(it,ut);it=Qt[0],ut=Qt[1],Z=Q={a:B.aaxis.range[0],b:B.baxis.range[1],c:B.caxis.range[1]},j=B.aaxis.range[1]-Q.a,G=g(B.graphDiv._fullLayout[B.id].bgcolor).getLuminance(),K="M0,"+B.h+"L"+B.w/2+", 0L"+B.w+","+B.h+"Z",at=!1,$=H.append("path").attr("class","zoombox").attr("transform",C(B.x0,B.y0)).style({fill:G>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",K),X=H.append("path").attr("class","zoombox-corners").attr("transform",C(B.x0,B.y0)).style({fill:y.background,stroke:y.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),B.clearOutline(U)}(0,Wt,Pt)):"pan"===Vt?(B.dragOptions.moveFn=xt,B.dragOptions.clickFn=et,B.dragOptions.doneFn=At,function Mt(){Z=Q={a:B.aaxis.range[0],b:B.baxis.range[1],c:B.caxis.range[1]}}(),B.clearOutline(U)):(w(Vt)||h(Vt))&&o(Gt,Wt,Pt,B.dragOptions,Vt)}},z.onmousemove=function(Gt){f.hover(U,Gt,B.id),U._fullLayout._lasthover=z,U._fullLayout._hoversubplot=B.id},z.onmouseout=function(Gt){U._dragging||c.unhover(U,Gt)},c.init(this.dragOptions)}},73972:function(q,W,t){"use strict";var A=t(47769),g=t(64213),i=t(75138),P=t(41965),C=t(24401).addStyleRule,u=t(1426),y=t(9012),e=t(10820),r=u.extendFlat,l=u.extendDeepAll;function a(M){var b=M.name,L=M.categories,x=M.meta;if(W.modules[b])A.log("Type "+b+" already registered");else{W.subplotsRegistry[M.basePlotModule.name]||function s(M){var b=M.name;if(W.subplotsRegistry[b])A.log("Plot type "+b+" already registered.");else for(var L in h(M),W.subplotsRegistry[b]=M,W.componentsRegistry)o(L,M.name)}(M.basePlotModule);for(var S={},T=0;T<L.length;T++)S[L[T]]=!0,W.allCategories[L[T]]=!0;for(var n in W.modules[b]={_module:M,categories:S},x&&Object.keys(x).length&&(W.modules[b].meta=x),W.allTypes.push(b),W.componentsRegistry)w(n,b);M.layoutAttributes&&r(W.traceLayoutAttributes,M.layoutAttributes);var E=M.basePlotModule,d=E.name;if("mapbox"===d){var F=E.constants.styleRules;for(var D in F)C(".js-plotly-plot .plotly .mapboxgl-"+D,F[D])}("geo"===d||"mapbox"===d)&&void 0===window.PlotlyGeoAssets&&(window.PlotlyGeoAssets={topojson:{}})}}function c(M){if("string"!=typeof M.name)throw new Error("Component module *name* must be a string.");var b=M.name;for(var L in W.componentsRegistry[b]=M,M.layoutAttributes&&(M.layoutAttributes._isLinkedToArray&&i(W.layoutArrayContainers,b),h(M)),W.modules)w(b,L);for(var x in W.subplotsRegistry)o(b,x);for(var S in W.transformsRegistry)p(b,S);M.schema&&M.schema.layout&&l(e,M.schema.layout)}function f(M){if("string"!=typeof M.name)throw new Error("Transform module *name* must be a string.");var b="Transform module "+M.name,L="function"==typeof M.transform,x="function"==typeof M.calcTransform;if(!L&&!x)throw new Error(b+" is missing a *transform* or *calcTransform* method.");for(var S in L&&x&&A.log([b+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),P(M.attributes)||A.log(b+" registered without an *attributes* object."),"function"!=typeof M.supplyDefaults&&A.log(b+" registered without a *supplyDefaults* method."),W.transformsRegistry[M.name]=M,W.componentsRegistry)p(S,M.name)}function m(M){var b=M.name,L=b.split("-")[0],x=M.dictionary,S=M.format,T=x&&Object.keys(x).length,n=S&&Object.keys(S).length,E=W.localeRegistry,d=E[b];if(d||(E[b]=d={}),L!==b){var F=E[L];F||(E[L]=F={}),T&&F.dictionary===d.dictionary&&(F.dictionary=x),n&&F.format===d.format&&(F.format=S)}T&&(d.dictionary=x),n&&(d.format=S)}function h(M){if(M.layoutAttributes){var b=M.layoutAttributes._arrayAttrRegexps;if(b)for(var L=0;L<b.length;L++)i(W.layoutArrayRegexes,b[L])}}function w(M,b){var L=W.componentsRegistry[M].schema;if(L&&L.traces){var x=L.traces[b];x&&l(W.modules[b]._module.attributes,x)}}function p(M,b){var L=W.componentsRegistry[M].schema;if(L&&L.transforms){var x=L.transforms[b];x&&l(W.transformsRegistry[b].attributes,x)}}function o(M,b){var L=W.componentsRegistry[M].schema;if(L&&L.subplots){var x=W.subplotsRegistry[b],S=x.layoutAttributes,T="subplot"===x.attr?x.name:x.attr;Array.isArray(T)&&(T=T[0]);var n=L.subplots[T];S&&n&&l(S,n)}}function v(M){return"object"==typeof M&&(M=M.type),M}W.modules={},W.allCategories={},W.allTypes=[],W.subplotsRegistry={},W.transformsRegistry={},W.componentsRegistry={},W.layoutArrayContainers=[],W.layoutArrayRegexes=[],W.traceLayoutAttributes={},W.localeRegistry={},W.apiMethodRegistry={},W.collectableSubplotTypes=null,W.register=function(b){if(W.collectableSubplotTypes=null,!b)throw new Error("No argument passed to Plotly.register.");b&&!Array.isArray(b)&&(b=[b]);for(var L=0;L<b.length;L++){var x=b[L];if(!x)throw new Error("Invalid module was attempted to be registered!");switch(x.moduleType){case"trace":a(x);break;case"transform":f(x);break;case"component":c(x);break;case"locale":m(x);break;case"apiMethod":W.apiMethodRegistry[x.name]=x.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},W.getModule=function(M){var b=W.modules[v(M)];return!!b&&b._module},W.traceIs=function(M,b){if("various"===(M=v(M)))return!1;var L=W.modules[M];return L||(M&&A.log("Unrecognized trace type "+M+"."),L=W.modules[y.type.dflt]),!!L.categories[b]},W.getTransformIndices=function(M,b){for(var L=[],x=M.transforms||[],S=0;S<x.length;S++)x[S].type===b&&L.push(S);return L},W.hasTransform=function(M,b){for(var L=M.transforms||[],x=0;x<L.length;x++)if(L[x].type===b)return!0;return!1},W.getComponentMethod=function(M,b){var L=W.componentsRegistry[M];return L&&L[b]||g},W.call=function(){var M=arguments[0],b=[].slice.call(arguments,1);return W.apiMethodRegistry[M].apply(null,b)}},61914:function(q,W,t){"use strict";var A=t(73972),g=t(71828),i=g.extendFlat,P=g.extendDeep;function C(y){var e;switch(y){case"themes__thumb":e={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":e={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:e={}}return e}q.exports=function(e,r){var l,s=e.layout,c=P([],e.data),f=P({},s,C(r.tileClass)),m=e._context||{};if(r.width&&(f.width=r.width),r.height&&(f.height=r.height),"thumbnail"===r.tileClass||"themes__thumb"===r.tileClass){f.annotations=[];var h=Object.keys(f);for(l=0;l<h.length;l++)["xaxis","yaxis","zaxis"].indexOf(h[l].slice(0,5))>-1&&(f[h[l]].title={text:""});for(l=0;l<c.length;l++){var w=c[l];w.showscale=!1,w.marker&&(w.marker.showscale=!1),A.traceIs(w,"pie-like")&&(w.textposition="none")}}if(Array.isArray(r.annotations))for(l=0;l<r.annotations.length;l++)f.annotations.push(r.annotations[l]);var p=Object.keys(f).filter(function(L){return L.match(/^scene\d*$/)});if(p.length){var o={};for("thumbnail"===r.tileClass&&(o={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),l=0;l<p.length;l++){var v=f[p[l]];v.xaxis||(v.xaxis={}),v.yaxis||(v.yaxis={}),v.zaxis||(v.zaxis={}),i(v.xaxis,o),i(v.yaxis,o),i(v.zaxis,o),v._scene=null}}var M=document.createElement("div");r.tileClass&&(M.className=r.tileClass);var b={gd:M,td:M,layout:f,data:c,config:{staticPlot:void 0===r.staticPlot||r.staticPlot,plotGlPixelRatio:void 0===r.plotGlPixelRatio?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||!1,showLink:r.showLink||!1,showTips:r.showTips||!1,mapboxAccessToken:m.mapboxAccessToken}};return"transparent"!==r.setBackground&&(b.config.setBackground=r.setBackground||"opaque"),b.gd.defaultLayout=C(r.tileClass),b}},7239:function(q,W,t){"use strict";var A=t(71828),g=t(403),i=t(22435),P=t(25095);q.exports=function C(u,y){var e;return A.isPlainObject(u)||(e=A.getGraphDiv(u)),(y=y||{}).format=y.format||"png",y.width=y.width||null,y.height=y.height||null,y.imageDataOnly=!0,new Promise(function(r,l){e&&e._snapshotInProgress&&l(new Error("Snapshotting already in progress.")),A.isIE()&&"svg"!==y.format&&l(new Error(P.MSG_IE_BAD_FORMAT)),e&&(e._snapshotInProgress=!0);var a=g(u,y),s=y.filename||u.fn||"newplot";s+="."+y.format.replace("-","."),a.then(function(c){return e&&(e._snapshotInProgress=!1),i(c,s,y.format)}).then(function(c){r(c)}).catch(function(c){e&&(e._snapshotInProgress=!1),l(c)})})}},22435:function(q,W,t){"use strict";var A=t(71828),g=t(25095);q.exports=function i(P,C,u){var y=document.createElement("a"),e="download"in y;return new Promise(function(l,a){var s,c;return A.isIE()?(s=g.createBlob(P,"svg"),window.navigator.msSaveBlob(s,C),s=null,l(C)):e?(s=g.createBlob(P,u),c=g.createObjectURL(s),y.href=c,y.download=C,document.body.appendChild(y),y.click(),document.body.removeChild(y),g.revokeObjectURL(c),s=null,l(C)):A.isSafari()?(g.octetStream(("svg"===u?",":";base64,")+encodeURIComponent(P)),l(C)):void a(new Error("download error"))})}},25095:function(q,W,t){"use strict";var A=t(73972);W.getDelay=function(P){return P._has&&(P._has("gl3d")||P._has("gl2d")||P._has("mapbox"))?500:0},W.getRedrawFunc=function(P){return function(){A.getComponentMethod("colorbar","draw")(P)}},W.encodeSVG=function(P){return"data:image/svg+xml,"+encodeURIComponent(P)},W.encodeJSON=function(P){return"data:application/json,"+encodeURIComponent(P)};var g=window.URL||window.webkitURL;W.createObjectURL=function(P){return g.createObjectURL(P)},W.revokeObjectURL=function(P){return g.revokeObjectURL(P)},W.createBlob=function(P,C){if("svg"===C)return new window.Blob([P],{type:"image/svg+xml;charset=utf-8"});if("full-json"===C)return new window.Blob([P],{type:"application/json;charset=utf-8"});var u=function i(P){for(var C=P.length,u=new ArrayBuffer(C),y=new Uint8Array(u),e=0;e<C;e++)y[e]=P.charCodeAt(e);return u}(window.atob(P));return new window.Blob([u],{type:"image/"+C})},W.octetStream=function(P){document.location.href="data:application/octet-stream"+P},W.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,W.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},44511:function(q,W,t){"use strict";var A=t(25095),g={getDelay:A.getDelay,getRedrawFunc:A.getRedrawFunc,clone:t(61914),toSVG:t(5900),svgToImg:t(70942),toImage:t(56395),downloadImage:t(7239)};q.exports=g},70942:function(q,W,t){"use strict";var A=t(71828),g=t(15398).EventEmitter,i=t(25095);q.exports=function P(C){var u=C.emitter||new g,y=new Promise(function(e,r){var l=window.Image,a=C.svg,s=C.format||"png";if(A.isIE()&&"svg"!==s){var c=new Error(i.MSG_IE_BAD_FORMAT);return r(c),C.promise?y:u.emit("error",c)}var b,L,f=C.canvas,m=C.scale||1,p=m*(C.width||300),o=m*(C.height||150),v=f.getContext("2d",{willReadFrequently:!0}),M=new l;"svg"===s||A.isSafari()?L=i.encodeSVG(a):(b=i.createBlob(a,"svg"),L=i.createObjectURL(b)),f.width=p,f.height=o,M.onload=function(){var x;switch(b=null,i.revokeObjectURL(L),"svg"!==s&&v.drawImage(M,0,0,p,o),s){case"jpeg":x=f.toDataURL("image/jpeg");break;case"png":x=f.toDataURL("image/png");break;case"webp":x=f.toDataURL("image/webp");break;case"svg":x=L;break;default:var S="Image format is not jpeg, png, svg or webp.";if(r(new Error(S)),!C.promise)return u.emit("error",S)}e(x),C.promise||u.emit("success",x)},M.onerror=function(x){if(b=null,i.revokeObjectURL(L),r(x),!C.promise)return u.emit("error",x)},M.src=L});return C.promise?y:u}},56395:function(q,W,t){"use strict";var A=t(15398).EventEmitter,g=t(73972),i=t(71828),P=t(25095),C=t(61914),u=t(5900),y=t(70942);q.exports=function e(r,l){var a=new A,s=C(r,{format:"png"}),c=s.gd;c.style.position="absolute",c.style.left="-5000px",document.body.appendChild(c);var m=P.getRedrawFunc(c);return g.call("_doPlot",c,s.data,s.layout,s.config).then(m).then(function f(){var h=P.getDelay(c._fullLayout);setTimeout(function(){var w=u(c),p=document.createElement("canvas");p.id=i.randstr(),(a=y({format:l.format,width:c._fullLayout.width,height:c._fullLayout.height,canvas:p,emitter:a,svg:w})).clean=function(){c&&document.body.removeChild(c)}},h)}).catch(function(h){a.emit("error",h)}),a}},5900:function(q,W,t){"use strict";var A=t(39898),g=t(71828),i=t(91424),P=t(7901),C=t(77922),u=/"/g,y="TOBESTRIPPED",e=new RegExp('("'+y+")|("+y+'")',"g");q.exports=function(s,c,f){var v,m=s._fullLayout,h=m._paper,w=m._toppaper,p=m.width,o=m.height;h.insert("rect",":first-child").call(i.setRect,0,0,p,o).call(P.fill,m.paper_bgcolor);var M=m._basePlotModules||[];for(v=0;v<M.length;v++){var b=M[v];b.toSVG&&b.toSVG(s)}if(w){var L=w.node().childNodes,x=Array.prototype.slice.call(L);for(v=0;v<x.length;v++){var S=x[v];S.childNodes.length&&h.node().appendChild(S)}}m._draggers&&m._draggers.remove(),h.node().style.background="",h.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var n=A.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){n.style({visibility:null,display:null});var E=this.style.fontFamily;E&&-1!==E.indexOf('"')&&n.style("font-family",E.replace(u,y))}else n.remove()}),h.selectAll(".gradient_filled,.pattern_filled").each(function(){var n=A.select(this),E=this.style.fill;E&&-1!==E.indexOf("url(")&&n.style("fill",E.replace(u,y));var d=this.style.stroke;d&&-1!==d.indexOf("url(")&&n.style("stroke",d.replace(u,y))}),("pdf"===c||"eps"===c)&&h.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),h.node().setAttributeNS(C.xmlns,"xmlns",C.svg),h.node().setAttributeNS(C.xmlns,"xmlns:xlink",C.xlink),"svg"===c&&f&&(h.attr("width",f*p),h.attr("height",f*o),h.attr("viewBox","0 0 "+p+" "+o));var T=(new window.XMLSerializer).serializeToString(h.node());return T=(T=function l(a){return a.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}(T=function r(a){var s=A.select("body").append("div").style({display:"none"}).html(""),c=a.replace(/(&[^;]*;)/gi,function(f){return"&lt;"===f?"&#60;":"&rt;"===f?"&#62;":-1!==f.indexOf("<")||-1!==f.indexOf(">")?"":s.html(f).text()});return s.remove(),c}(T))).replace(e,"'"),g.isIE()&&(T=(T=(T=T.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),T}},75341:function(q,W,t){"use strict";var A=t(71828);q.exports=function(i,P){for(var C=0;C<i.length;C++)i[C].i=C;A.mergeArray(P.text,i,"tx"),A.mergeArray(P.hovertext,i,"htx");var u=P.marker;if(u){A.mergeArray(u.opacity,i,"mo",!0),A.mergeArray(u.color,i,"mc");var y=u.line;y&&(A.mergeArray(y.color,i,"mlc"),A.mergeArrayCastPositive(y.width,i,"mlw"))}}},1486:function(q,W,t){"use strict";var A=t(82196),g=t(12663).axisHoverFormat,i=t(5386).fF,P=t(5386).si,C=t(50693),u=t(41940),y=t(97313),e=t(79952).u,r=t(1426).extendFlat,l=u({editType:"calc",arrayOk:!0,colorEditType:"style"}),c=r({},A.marker.line.width,{dflt:0}),f=r({width:c,editType:"calc"},C("marker.line")),m=r({line:f,editType:"calc"},C("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:e});q.exports={x:A.x,x0:A.x0,dx:A.dx,y:A.y,y0:A.y0,dy:A.dy,xperiod:A.xperiod,yperiod:A.yperiod,xperiod0:A.xperiod0,yperiod0:A.yperiod0,xperiodalignment:A.xperiodalignment,yperiodalignment:A.yperiodalignment,xhoverformat:g("x"),yhoverformat:g("y"),text:A.text,texttemplate:P({editType:"plot"},{keys:y.eventDataKeys}),hovertext:A.hovertext,hovertemplate:i({},{keys:y.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:r({},l,{}),insidetextfont:r({},l,{}),outsidetextfont:r({},l,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:r({},A.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:m,offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup,selected:{marker:{opacity:A.selected.marker.opacity,color:A.selected.marker.color,editType:"style"},textfont:A.selected.textfont,editType:"style"},unselected:{marker:{opacity:A.unselected.marker.opacity,color:A.unselected.marker.color,editType:"style"},textfont:A.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},92290:function(q,W,t){"use strict";var A=t(89298),g=t(42973),i=t(52075).hasColorscale,P=t(78803),C=t(75341),u=t(66279);q.exports=function(e,r){var s,c,f,m,h,w,l=A.getFromId(e,r.xaxis||"x"),a=A.getFromId(e,r.yaxis||"y"),p={msUTC:!(!r.base&&0!==r.base)};"h"===r.orientation?(s=l.makeCalcdata(r,"x",p),f=a.makeCalcdata(r,"y"),m=g(r,a,"y",f),h=!!r.yperiodalignment,w="y"):(s=a.makeCalcdata(r,"y",p),f=l.makeCalcdata(r,"x"),m=g(r,l,"x",f),h=!!r.xperiodalignment,w="x"),c=m.vals;for(var o=Math.min(c.length,s.length),v=new Array(o),M=0;M<o;M++)v[M]={p:c[M],s:s[M]},h&&(v[M].orig_p=f[M],v[M][w+"End"]=m.ends[M],v[M][w+"Start"]=m.starts[M]),r.ids&&(v[M].id=String(r.ids[M]));return i(r,"marker")&&P(e,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),i(r,"marker.line")&&P(e,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),C(v,r),u(v,r),v}},97313:function(q){"use strict";q.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},11661:function(q,W,t){"use strict";var A=t(92770),g=t(71828).isArrayOrTypedArray,i=t(50606).BADNUM,P=t(73972),C=t(89298),u=t(99082).getAxisGroup,y=t(61546);function r(T,n,E,d,F){if(d.length){var D,N,k,O;switch(function l(T,n){var E,d;for(E=0;E<n.length;E++){var k,F=n[E],D=F[0].trace,N="funnel"===D.type?D._base:D.base,O="h"===D.orientation?D.xcalendar:D.ycalendar,B="category"===T.type||"multicategory"===T.type?function(){return null}:T.d2c;if(g(N)){for(d=0;d<Math.min(N.length,F.length);d++)k=B(N[d],0,O),A(k)?(F[d].b=+k,F[d].hasB=1):F[d].b=0;for(;d<F.length;d++)F[d].b=0}else{k=B(N,0,O);var z=A(k);for(k=z?k:0,d=0;d<F.length;d++)F[d].b=k,z&&(F[d].hasB=1)}}}(E,d),F.mode){case"overlay":a(n,E,d,F);break;case"group":for(D=[],N=[],k=0;k<d.length;k++)void 0===(O=d[k])[0].trace.offset?N.push(O):D.push(O);N.length&&function s(T,n,E,d,F){var D=new y(d,{posAxis:n,sepNegVal:!1,overlapNoMerge:!F.norm});(function m(T,n,E,d){for(var F=T._fullLayout,k=E.minDiff,O=E.traces,B=O.length,z=E.positions.length!==E.distinctPositions.length,U=k*(1-d.gap),H=u(F,n._id)+O[0][0].trace.orientation,J=F._alignmentOpts[H]||{},nt=0;nt<B;nt++){var Z,K,it=O[nt],ut=it[0].trace,j=Object.keys((J[ut.alignmentgroup]||{}).offsetGroups||{}).length,G=(Z=j?U/j:z?U/B:U)*(1-(d.groupgap||0));K=j?((2*ut._offsetIndex+1-j)*Z-G)/2:z?((2*nt+1-B)*Z-G)/2:-G/2;var at=it[0].t;at.barwidth=G,at.poffset=K,at.bargroupwidth=U,at.bardelta=k}E.binWidth=O[0][0].t.barwidth/100,h(E),w(n,E),p(n,E,z)})(T,n,D,F),function b(T,n){for(var E=T.traces,d=0;d<E.length;d++){var F=E[d];if(void 0===F[0].trace.base)for(var N=new y([F],{posAxis:n,sepNegVal:!0,overlapNoMerge:!0}),k=0;k<F.length;k++){var O=F[k];if(O.p!==i){var B=N.put(O.p,O.b+O.s);B&&(O.b=B)}}}}(D,n),F.norm?(M(D),L(E,D,F)):o(E,D)}(T,n,E,N,F),D.length&&a(n,E,D,F);break;case"stack":case"relative":for(D=[],N=[],k=0;k<d.length;k++)void 0===(O=d[k])[0].trace.base?N.push(O):D.push(O);N.length&&function c(T,n,E,d,F){var D=new y(d,{posAxis:n,sepNegVal:"relative"===F.mode,overlapNoMerge:!(F.norm||"stack"===F.mode||"relative"===F.mode)});f(n,D,F),function v(T,n,E){var D,N,k,O,B,z,d=S(T),F=n.traces;for(O=0;O<F.length;O++)if("funnel"===(N=(D=F[O])[0].trace).type)for(B=0;B<D.length;B++)(z=D[B]).s!==i&&n.put(z.p,-.5*z.s);for(O=0;O<F.length;O++){k="funnel"===(N=(D=F[O])[0].trace).type;var U=[];for(B=0;B<D.length;B++)if((z=D[B]).s!==i){var H,J=n.put(z.p,H=k?z.s:z.s+z.b),nt=J+H;z.b=J,z[d]=nt,E.norm||(U.push(nt),z.hasB&&U.push(J))}E.norm||(N._extremes[T._id]=C.findExtremes(T,U,{tozero:!0,padded:!0}))}}(E,D,F);for(var N=0;N<d.length;N++)for(var k=d[N],O=0;O<k.length;O++){var B=k[O];B.s!==i&&B.b+B.s===D.get(B.p,B.s)&&(B._outmost=!0)}F.norm&&L(E,D,F)}(0,n,E,N,F),D.length&&a(n,E,D,F)}!function x(T,n){var F,D,N,E=S(n),d={},k=1/0,O=-1/0;for(F=0;F<T.length;F++)for(N=T[F],D=0;D<N.length;D++){var B=N[D].p;A(B)&&(k=Math.min(k,B),O=Math.max(O,B))}var z=1e4/(O-k),U=d.round=function(j){return String(Math.round(z*(j-k)))};for(F=0;F<T.length;F++){(N=T[F])[0].t.extents=d;var H=N[0].t.poffset,J=Array.isArray(H);for(D=0;D<N.length;D++){var nt=N[D],it=nt[E]-nt.w/2;if(A(it)){var ut=nt[E]+nt.w/2,Q=U(nt.p);d[Q]=d[Q]?[Math.min(it,d[Q][0]),Math.max(ut,d[Q][1])]:[it,ut]}nt.p0=nt.p+(J?H[D]:H),nt.p1=nt.p0+nt.w,nt.s0=nt.b,nt.s1=nt.s0+nt.s}}}(d,n)}}function a(T,n,E,d){for(var F=0;F<E.length;F++){var N=new y([E[F]],{posAxis:T,sepNegVal:!1,overlapNoMerge:!d.norm});f(T,N,d),d.norm?(M(N),L(n,N,d)):o(n,N)}}function f(T,n,E){for(var d=n.minDiff,F=n.traces,D=d*(1-E.gap),k=D*(1-(E.groupgap||0)),O=-k/2,B=0;B<F.length;B++){var U=F[B][0].t;U.barwidth=k,U.poffset=O,U.bargroupwidth=D,U.bardelta=d}n.binWidth=F[0][0].t.barwidth/100,h(n),w(T,n),p(T,n)}function h(T){var E,d,n=T.traces;for(E=0;E<n.length;E++){var z,F=n[E],D=F[0],N=D.trace,k=D.t,O=N._offset||N.offset,B=k.poffset;if(g(O)){for(z=Array.prototype.slice.call(O,0,F.length),d=0;d<z.length;d++)A(z[d])||(z[d]=B);for(d=z.length;d<F.length;d++)z.push(B);k.poffset=z}else void 0!==O&&(k.poffset=O);var U=N._width||N.width,H=k.barwidth;if(g(U)){var J=Array.prototype.slice.call(U,0,F.length);for(d=0;d<J.length;d++)A(J[d])||(J[d]=H);for(d=J.length;d<F.length;d++)J.push(H);if(k.barwidth=J,void 0===O){for(z=[],d=0;d<F.length;d++)z.push(B+(H-J[d])/2);k.poffset=z}}else void 0!==U&&(k.barwidth=U,void 0===O&&(k.poffset=B+(H-U)/2))}}function w(T,n){for(var E=n.traces,d=S(T),F=0;F<E.length;F++)for(var D=E[F],N=D[0].t,k=N.poffset,O=Array.isArray(k),B=N.barwidth,z=Array.isArray(B),U=0;U<D.length;U++){var H=D[U],J=H.w=z?B[U]:B;void 0===H.p&&(H.p=H[d],H["orig_"+d]=H[d]),H[d]=H.p+((O?k[U]:k)+J/2)}}function p(T,n,E){var d=n.traces,D=n.minDiff/2;C.minDtick(T,n.minDiff,n.distinctPositions[0],E);for(var N=0;N<d.length;N++){var U,H,nt,k=d[N],O=k[0],B=O.trace,z=[];for(nt=0;nt<k.length;nt++)z.push(H=(U=k[nt]).p-D,U.p+D);if(B.width||B.offset){var it=O.t,ut=it.poffset,Q=it.barwidth,j=Array.isArray(ut),Z=Array.isArray(Q);for(nt=0;nt<k.length;nt++)z.push(H=(U=k[nt]).p+(j?ut[nt]:ut),H+(Z?Q[nt]:Q))}B._extremes[T._id]=C.findExtremes(T,z,{padded:!1})}}function o(T,n){for(var E=n.traces,d=S(T),F=0;F<E.length;F++){for(var D=E[F],N=D[0].trace,k="scatter"===N.type,O="v"===N.orientation,B=[],z=!1,U=0;U<D.length;U++){var H=D[U],J=k?0:H.b,nt=k?O?H.y:H.x:J+H.s;H[d]=nt,B.push(nt),H.hasB&&B.push(J),(!H.hasB||!H.b)&&(z=!0)}N._extremes[T._id]=C.findExtremes(T,B,{tozero:z,padded:!0})}}function M(T){for(var n=T.traces,E=0;E<n.length;E++)for(var d=n[E],F=0;F<d.length;F++){var D=d[F];D.s!==i&&T.put(D.p,D.b+D.s)}}function L(T,n,E){var d=n.traces,F=S(T),D="fraction"===E.norm?1:100,N=D/1e9,k=T.l2c(T.c2l(0)),O="stack"===E.mode?D:k;function B(K){return A(T.c2l(K))&&(K<k-N||K>O+N||!A(k))}for(var z=0;z<d.length;z++){for(var U=d[z],H=U[0].trace,J=[],nt=!1,it=!1,ut=0;ut<U.length;ut++){var Q=U[ut];if(Q.s!==i){var j=Math.abs(D/n.get(Q.p,Q.s));Q.b*=j,Q.s*=j;var Z=Q.b,G=Z+Q.s;Q[F]=G,J.push(G),it=it||B(G),Q.hasB&&(J.push(Z),it=it||B(Z)),(!Q.hasB||!Q.b)&&(nt=!0)}}H._extremes[T._id]=C.findExtremes(T,J,{tozero:nt,padded:it})}}function S(T){return T._id.charAt(0)}q.exports={crossTraceCalc:function e(T,n){for(var E=n.xaxis,d=n.yaxis,F=T._fullLayout,D=T._fullData,N=T.calcdata,k=[],O=[],B=0;B<D.length;B++){var z=D[B];if(!0===z.visible&&P.traceIs(z,"bar")&&z.xaxis===E._id&&z.yaxis===d._id&&("h"===z.orientation?k.push(N[B]):O.push(N[B]),z._computePh))for(var U=T.calcdata[B],H=0;H<U.length;H++)"function"==typeof U[H].ph0&&(U[H].ph0=U[H].ph0()),"function"==typeof U[H].ph1&&(U[H].ph1=U[H].ph1())}var J={xCat:"category"===E.type||"multicategory"===E.type,yCat:"category"===d.type||"multicategory"===d.type,mode:F.barmode,norm:F.barnorm,gap:F.bargap,groupgap:F.bargroupgap};r(T,E,d,O,J),r(T,d,E,k,J)},setGroupPositions:r}},90769:function(q,W,t){"use strict";var A=t(71828),g=t(7901),i=t(73972),P=t(67513),C=t(73927),u=t(98340),y=t(26125),e=t(1486),r=A.coerceFont;function s(c,f,m,h,w,p){var o=!1!==(p=p||{}).moduleHasSelected,v=!1!==p.moduleHasUnselected,M=!1!==p.moduleHasConstrain,b=!1!==p.moduleHasCliponaxis,L=!1!==p.moduleHasTextangle,x=!1!==p.moduleHasInsideanchor,S=!!p.hasPathbar,T=Array.isArray(w)||"auto"===w,n=T||"inside"===w,E=T||"outside"===w;if(n||E){var d=r(h,"textfont",m.font),F=A.extendFlat({},d),N=!(c.textfont&&c.textfont.color);if(N&&delete F.color,r(h,"insidetextfont",F),S){var k=A.extendFlat({},d);N&&delete k.color,r(h,"pathbar.textfont",k)}E&&r(h,"outsidetextfont",d),o&&h("selected.textfont.color"),v&&h("unselected.textfont.color"),M&&h("constraintext"),b&&h("cliponaxis"),L&&h("textangle"),h("texttemplate")}n&&x&&h("insidetextanchor")}q.exports={supplyDefaults:function l(c,f,m,h){function w(b,L){return A.coerce(c,f,e,b,L)}if(P(c,f,h,w)){C(c,f,h,w),w("xhoverformat"),w("yhoverformat"),w("orientation",f.x&&!f.y?"h":"v"),w("base"),w("offset"),w("width"),w("text"),w("hovertext"),w("hovertemplate");var o=w("textposition");s(c,0,h,w,o,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),u(c,f,w,m,h);var v=(f.marker.line||{}).color,M=i.getComponentMethod("errorbars","supplyDefaults");M(c,f,v||g.defaultLine,{axis:"y"}),M(c,f,v||g.defaultLine,{axis:"x",inherit:"y"}),A.coerceSelectionMarkerOpacity(f,w)}else f.visible=!1},crossTraceDefaults:function a(c,f){var h;function w(o){return A.coerce(h._input,h,e,o)}if("group"===f.barmode)for(var p=0;p<c.length;p++)"bar"===(h=c[p]).type&&y(h._input,h,f,w)},handleText:s}},58065:function(q){"use strict";q.exports=function(t,A,g){return t.x="xVal"in A?A.xVal:A.x,t.y="yVal"in A?A.yVal:A.y,A.xa&&(t.xaxis=A.xa),A.ya&&(t.yaxis=A.ya),"h"===g.orientation?(t.label=t.y,t.value=t.x):(t.label=t.x,t.value=t.y),t}},69383:function(q,W,t){"use strict";var A=t(92770),g=t(84267),i=t(71828).isArrayOrTypedArray;W.coerceString=function(P,C,u){if("string"==typeof C){if(C||!P.noBlank)return C}else if(("number"==typeof C||!0===C)&&!P.strict)return String(C);return void 0!==u?u:P.dflt},W.coerceNumber=function(P,C,u){if(A(C)){C=+C;var y=P.min,e=P.max;if(!(void 0!==y&&C<y||void 0!==e&&C>e))return C}return void 0!==u?u:P.dflt},W.coerceColor=function(P,C,u){return g(C).isValid()?C:void 0!==u?u:P.dflt},W.coerceEnumerated=function(P,C,u){return P.coerceNumber&&(C=+C),-1!==P.values.indexOf(C)?C:void 0!==u?u:P.dflt},W.getValue=function(P,C){var u;return Array.isArray(P)?C<P.length&&(u=P[C]):u=P,u},W.getLineWidth=function(P,C){return 0<C.mlw?C.mlw:i(P.marker.line.width)?0:P.marker.line.width}},95423:function(q,W,t){"use strict";var A=t(30211),g=t(73972),i=t(7901),P=t(71828).fillText,C=t(69383).getLineWidth,u=t(89298).hoverLabelText,y=t(50606).BADNUM;function r(a,s,c,f,m){var L,x,S,T,n,E,d,h=a.cd,w=h[0].trace,p=h[0].t,o="closest"===f,v="waterfall"===w.type,M=a.maxHoverDistance,b=a.maxSpikeDistance;"h"===w.orientation?(L=c,x=s,S="y",T="x",n=ut,E=J):(L=s,x=c,S="x",T="y",E=ut,n=J);var F=w[S+"period"],D=o||F;function N(st){return O(st,-1)}function k(st){return O(st,1)}function O(st,dt){return st[S]+dt*st.w/2}function B(st){return st[S+"End"]-st[S+"Start"]}var z=o?N:F?function(st){return st.p-B(st)/2}:function(st){return Math.min(N(st),st.p-p.bardelta/2)},U=o?k:F?function(st){return st.p+B(st)/2}:function(st){return Math.max(k(st),st.p+p.bardelta/2)};function H(st,dt,bt){return m.finiteRange&&(bt=0),A.inbox(st-L,dt-L,bt+Math.min(1,Math.abs(dt-st)/d)-1)}function J(st){return H(z(st),U(st),M)}function it(st){var dt=st[T];if(v){var bt=Math.abs(st.rawS)||0;x>0?dt+=bt:x<0&&(dt-=bt)}return dt}function ut(st){var dt=x,bt=st.b,gt=it(st);return A.inbox(bt-dt,gt-dt,M+(gt-dt)/(gt-bt)-1)}var j=a[S+"a"],Z=a[T+"a"];d=Math.abs(j.r2c(j.range[1])-j.r2c(j.range[0]));var K=A.getDistanceFunction(f,n,E,function G(st){return(n(st)+E(st))/2});if(A.getClosest(h,K,a),!1!==a.index&&h[a.index].p!==y){D||(z=function(st){return Math.min(N(st),st.p-p.bargroupwidth/2)},U=function(st){return Math.max(k(st),st.p+p.bargroupwidth/2)});var $=h[a.index],X=w.base?$.b+$.s:$.s;a[T+"0"]=a[T+"1"]=Z.c2p($[T],!0),a[T+"LabelVal"]=X;var rt=p.extents[p.extents.round($.p)];return a[S+"0"]=j.c2p(o?z($):rt[0],!0),a[S+"1"]=j.c2p(o?U($):rt[1],!0),a[S+"LabelVal"]=void 0!==$.orig_p?$.orig_p:$.p,a.labelLabel=u(j,a[S+"LabelVal"],w[S+"hoverformat"]),a.valueLabel=u(Z,a[T+"LabelVal"],w[T+"hoverformat"]),a.baseLabel=u(Z,$.b,w[T+"hoverformat"]),a.spikeDistance=(function Q(st){var dt=x,bt=st.b,gt=it(st);return A.inbox(bt-dt,gt-dt,b+(gt-dt)/(gt-bt)-1)}($)+function nt(st){return H(N(st),k(st),b)}($))/2,a[S+"Spike"]=j.c2p($.p,!0),P($,w,a),a.hovertemplate=w.hovertemplate,a}}function l(a,s){var c=s.mcc||a.marker.color,f=s.mlcc||a.marker.line.color,m=C(a,s);return i.opacity(c)?c:i.opacity(f)&&m?f:void 0}q.exports={hoverPoints:function e(a,s,c,f,m){var h=r(a,s,c,f,m);if(h){var w=h.cd,p=w[0].trace,o=w[h.index];return h.color=l(p,o),g.getComponentMethod("errorbars","hoverInfo")(o,p,h),[h]}},hoverOnBars:r,getTraceColor:l}},60822:function(q,W,t){"use strict";q.exports={attributes:t(1486),layoutAttributes:t(43641),supplyDefaults:t(90769).supplyDefaults,crossTraceDefaults:t(90769).crossTraceDefaults,supplyLayoutDefaults:t(13957),calc:t(92290),crossTraceCalc:t(11661).crossTraceCalc,colorbar:t(4898),arraysToCalcdata:t(75341),plot:t(17295).plot,style:t(16688).style,styleOnSelect:t(16688).styleOnSelect,hoverPoints:t(95423).hoverPoints,eventData:t(58065),selectPoints:t(81974),moduleType:"trace",name:"bar",basePlotModule:t(93612),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},43641:function(q){"use strict";q.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},13957:function(q,W,t){"use strict";var A=t(73972),g=t(89298),i=t(71828),P=t(43641);q.exports=function(C,u,y){function e(p,o){return i.coerce(C,u,P,p,o)}for(var r=!1,l=!1,a=!1,s={},c=e("barmode"),f=0;f<y.length;f++){var m=y[f];if(A.traceIs(m,"bar")&&m.visible){if(r=!0,"group"===c){var h=m.xaxis+m.yaxis;s[h]&&(a=!0),s[h]=!0}m.visible&&"histogram"===m.type&&"category"!==g.getFromId({_fullLayout:u},m["v"===m.orientation?"xaxis":"yaxis"]).type&&(l=!0)}}r?("overlay"!==c&&e("barnorm"),e("bargap",l&&!a?0:.2),e("bargroupgap")):delete u.barmode}},17295:function(q,W,t){"use strict";var A=t(39898),g=t(92770),i=t(71828),P=t(63893),C=t(7901),u=t(91424),y=t(73972),e=t(89298).tickText,r=t(72597),l=r.recordMinTextSize,a=r.clearMinTextSize,s=t(16688),c=t(69383),f=t(97313),m=t(1486),h=m.text,w=m.textposition,p=t(23469).appendArrayPointValue,o=f.TEXTPAD;function v(z){return z.id}function b(z,U){return z<U?1:-1}function x(z,U,H,J){var nt;return!U.uniformtext.mode&&S(H)?(J&&(nt=J()),z.transition().duration(H.duration).ease(H.easing).each("end",function(){nt&&nt()}).each("interrupt",function(){nt&&nt()})):z}function S(z){return z&&z.duration>0}function E(z){return"auto"===z?0:z}function d(z,U){var H=Math.PI/180*U,J=Math.abs(Math.sin(H)),nt=Math.abs(Math.cos(H));return{x:z.width*nt+z.height*J,y:z.width*J+z.height*nt}}function F(z,U,H,J,nt,it){var ut=!!it.isHorizontal,Q=!!it.constrained,j=it.angle||0,Z=it.anchor||"end",G="end"===Z,K="start"===Z,$=((it.leftToRight||0)+1)/2,X=1-$,rt=nt.width,et=nt.height,st=Math.abs(U-z),dt=Math.abs(J-H),bt=st>2*o&&dt>2*o?o:0;st-=2*bt,dt-=2*bt;var gt=E(j);"auto"===j&&!(rt<=st&&et<=dt)&&(rt>st||et>dt)&&(!(rt>dt||et>st)||rt<et!=st<dt)&&(gt+=90);var Lt=d(nt,gt),It=1;Q&&(It=Math.min(1,st/Lt.x,dt/Lt.y));var Mt=nt.left*X+nt.right*$,xt=(nt.top+nt.bottom)/2,At=(z+o)*X+(U-o)*$,Gt=(H+J)/2,Wt=0,Pt=0;if(K||G){var Vt=(ut?Lt.x:Lt.y)/2,te=ut?b(z,U):b(H,J);ut?K?(At=z+te*bt,Wt=-te*Vt):(At=U-te*bt,Wt=te*Vt):K?(Gt=H+te*bt,Pt=-te*Vt):(Gt=J-te*bt,Pt=te*Vt)}return{textX:Mt,textY:xt,targetX:At,targetY:Gt,anchorX:Wt,anchorY:Pt,scale:It,rotate:gt}}q.exports={plot:function T(z,U,H,J,nt,it){var ut=U.xaxis,Q=U.yaxis,j=z._fullLayout,Z=z._context.staticPlot;nt||(nt={mode:j.barmode,norm:j.barmode,gap:j.bargap,groupgap:j.bargroupgap},a("bar",j));var G=i.makeTraceGroups(J,H,"trace bars").each(function(K){var at=A.select(this),$=K[0].trace,st="bar"===$.type||"funnel"===$.type,dt=0;"waterfall"===$.type&&$.connector.visible&&"between"===$.connector.mode&&(dt=$.connector.line.width/2);var bt="h"===$.orientation,gt=S(nt),Lt=i.ensureSingle(at,"g","points"),It=function M(z){if(z.ids)return v}($),Mt=Lt.selectAll("g.point").data(i.identity,It);Mt.enter().append("g").classed("point",!0),Mt.exit().remove(),Mt.each(function(At,Gt){var qt,ie,Wt=A.select(this),Pt=function L(z,U,H,J){var nt=[],it=[],ut=J?U:H,Q=J?H:U;return nt[0]=ut.c2p(z.s0,!0),it[0]=Q.c2p(z.p0,!0),nt[1]=ut.c2p(z.s1,!0),it[1]=Q.c2p(z.p1,!0),J?[nt,it]:[it,nt]}(At,ut,Q,bt),Vt=Pt[0][0],te=Pt[0][1],Qt=Pt[1][0],Bt=Pt[1][1],Ot=0==(bt?te-Vt:Bt-Qt);if(Ot&&st&&c.getLineWidth($,At)&&(Ot=!1),Ot||(Ot=!(g(Vt)&&g(te)&&g(Qt)&&g(Bt))),At.isBlank=Ot,Ot&&(bt?te=Vt:Bt=Qt),dt&&!Ot&&(bt?(Vt-=b(Vt,te)*dt,te+=b(Vt,te)*dt):(Qt-=b(Qt,Bt)*dt,Bt+=b(Qt,Bt)*dt)),"waterfall"===$.type){if(!Ot){var oe=$[At.dir].marker;qt=oe.line.width,ie=oe.color}}else qt=c.getLineWidth($,At),ie=At.mc||$.marker.color;function pe(Dt){var Ft=A.round(qt/2%1,2);return 0===nt.gap&&0===nt.groupgap?A.round(Math.round(Dt)-Ft,2):Dt}if(!z._context.staticPlot){var Kt=C.opacity(ie)<1||qt>.01?pe:function de(Dt,Ft,Nt){return Nt&&Dt===Ft?Dt:Math.abs(Dt-Ft)>=2?pe(Dt):Dt>Ft?Math.ceil(Dt):Math.floor(Dt)};Vt=Kt(Vt,te,bt),te=Kt(te,Vt,bt),Qt=Kt(Qt,Bt,!bt),Bt=Kt(Bt,Qt,!bt)}var Et=x(i.ensureSingle(Wt,"path"),j,nt,it);if(Et.style("vector-effect",Z?"none":"non-scaling-stroke").attr("d",isNaN((te-Vt)*(Bt-Qt))||Ot&&z._context.staticPlot?"M0,0Z":"M"+Vt+","+Qt+"V"+Bt+"H"+te+"V"+Qt+"Z").call(u.setClipUrl,U.layerClipId,z),!j.uniformtext.mode&&gt){var St=u.makePointStyleFns($);u.singlePointStyle(At,Et,$,St,z)}(function n(z,U,H,J,nt,it,ut,Q,j,Z,G){var X,K=U.xaxis,at=U.yaxis,$=z._fullLayout;function rt(Dt,Ft,Nt){return i.ensureSingle(Dt,"text").text(Ft).attr({class:"bartext bartext-"+X,"text-anchor":"middle","data-notex":1}).call(u.font,Nt).call(P.convertToTspans,z)}var et=J[0].trace,st="h"===et.orientation,dt=function N(z,U,H,J,nt){var Q,it=U[0].trace;return Q=it.texttemplate?function O(z,U,H,J,nt){var it=U[0].trace,ut=i.castOption(it,H,"texttemplate");if(!ut)return"";var K,at,$,X,Q="histogram"===it.type,j="waterfall"===it.type,Z="funnel"===it.type,G="h"===it.orientation;function rt(It){return e(at,at.c2l(It),!0).text}function et(It){return e(X,X.c2l(It),!0).text}G?(K="y",at=nt,$="x",X=J):(K="x",at=J,$="y",X=nt);var st=U[H],dt={};dt.label=st.p,dt.labelLabel=dt[K+"Label"]=rt(st.p);var bt=i.castOption(it,st.i,"text");(0===bt||bt)&&(dt.text=bt),dt.value=st.s,dt.valueLabel=dt[$+"Label"]=et(st.s);var gt={};p(gt,it,st.i),(Q||void 0===gt.x)&&(gt.x=G?dt.value:dt.label),(Q||void 0===gt.y)&&(gt.y=G?dt.label:dt.value),(Q||void 0===gt.xLabel)&&(gt.xLabel=G?dt.valueLabel:dt.labelLabel),(Q||void 0===gt.yLabel)&&(gt.yLabel=G?dt.labelLabel:dt.valueLabel),j&&(dt.delta=+st.rawS||st.s,dt.deltaLabel=et(dt.delta),dt.final=st.v,dt.finalLabel=et(dt.final),dt.initial=dt.final-dt.delta,dt.initialLabel=et(dt.initial)),Z&&(dt.value=st.s,dt.valueLabel=et(dt.value),dt.percentInitial=st.begR,dt.percentInitialLabel=i.formatPercent(st.begR),dt.percentPrevious=st.difR,dt.percentPreviousLabel=i.formatPercent(st.difR),dt.percentTotal=st.sumR,dt.percenTotalLabel=i.formatPercent(st.sumR));var Lt=i.castOption(it,st.i,"customdata");return Lt&&(dt.customdata=Lt),i.texttemplateString(ut,dt,z._d3locale,gt,dt,it._meta||{})}(z,U,H,J,nt):it.textinfo?function B(z,U,H,J){var nt=z[0].trace,it="h"===nt.orientation,ut="waterfall"===nt.type,Q="funnel"===nt.type;function j(Lt){return e(it?J:H,Lt,!0).text}function Z(Lt){return e(it?H:J,+Lt,!0).text}var X,K=z[U],at=nt.textinfo.split("+"),$=[],rt=function(Lt){return-1!==at.indexOf(Lt)};if(rt("label")&&$.push(j(z[U].p)),rt("text")&&(0===(X=i.castOption(nt,K.i,"text"))||X)&&$.push(X),ut){var et=+K.rawS||K.s,st=K.v,dt=st-et;rt("initial")&&$.push(Z(dt)),rt("delta")&&$.push(Z(et)),rt("final")&&$.push(Z(st))}if(Q){rt("value")&&$.push(Z(K.s));var bt=0;rt("percent initial")&&bt++,rt("percent previous")&&bt++,rt("percent total")&&bt++;var gt=bt>1;rt("percent initial")&&(X=i.formatPercent(K.begR),gt&&(X+=" of initial"),$.push(X)),rt("percent previous")&&(X=i.formatPercent(K.difR),gt&&(X+=" of previous"),$.push(X)),rt("percent total")&&(X=i.formatPercent(K.sumR),gt&&(X+=" of total"),$.push(X))}return $.join("<br>")}(U,H,J,nt):c.getValue(it.text,H),c.coerceString(h,Q)}($,J,nt,K,at);X=function k(z,U){var H=c.getValue(z.textposition,U);return c.coerceEnumerated(w,H)}(et,nt);var gt=J[nt],Lt=!("stack"===Z.mode||"relative"===Z.mode)||gt._outmost;if(dt&&"none"!==X&&(!gt.isBlank&&it!==ut&&Q!==j||"auto"!==X&&"inside"!==X)){var It=$.font,Mt=s.getBarColor(J[nt],et),xt=s.getInsideTextFont(et,nt,It,Mt),At=s.getOutsideTextFont(et,nt,It),Gt=H.datum();st?"log"===K.type&&Gt.s0<=0&&(it=K.range[0]<K.range[1]?0:K._length):"log"===at.type&&Gt.s0<=0&&(Q=at.range[0]<at.range[1]?at._length:0);var Vt,te,Qt,Bt,Ot,Wt=Math.abs(ut-it)-2*o,Pt=Math.abs(j-Q)-2*o;if("outside"===X&&!Lt&&!gt.hasB&&(X="inside"),"auto"===X&&(Lt?(X="inside",Vt=rt(H,dt,Ot=i.ensureUniformFontSize(z,xt)),Bt=(te=u.bBox(Vt.node())).height,(Qt=te.width)>0&&Bt>0&&(Qt<=Wt&&Bt<=Pt||Qt<=Pt&&Bt<=Wt||(st?Wt>=Qt*(Pt/Bt):Pt>=Bt*(Wt/Qt)))?X="inside":(X="outside",Vt.remove(),Vt=null)):X="inside"),!Vt){var de=(Vt=rt(H,dt,Ot=i.ensureUniformFontSize(z,"outside"===X?At:xt))).attr("transform");if(Vt.attr("transform",""),Qt=(te=u.bBox(Vt.node())).width,Bt=te.height,Vt.attr("transform",de),Qt<=0||Bt<=0)return void Vt.remove()}var Kt,Fe=et.textangle;(Kt="outside"===X?function D(z,U,H,J,nt,it){var $,ut=!!it.isHorizontal,Q=!!it.constrained,j=it.angle||0,Z=nt.width,G=nt.height,K=Math.abs(U-z),at=Math.abs(J-H);$=ut?at>2*o?o:0:K>2*o?o:0;var X=1;Q&&(X=ut?Math.min(1,at/G):Math.min(1,K/Z));var rt=E(j),et=d(nt,rt),st=(ut?et.x:et.y)/2,dt=(nt.left+nt.right)/2,bt=(nt.top+nt.bottom)/2,gt=(z+U)/2,Lt=(H+J)/2,It=0,Mt=0,xt=ut?b(U,z):b(H,J);return ut?(gt=U-xt*$,It=xt*st):(Lt=J+xt*$,Mt=-xt*st),{textX:dt,textY:bt,targetX:gt,targetY:Lt,anchorX:It,anchorY:Mt,scale:X,rotate:rt}}(it,ut,Q,j,te,{isHorizontal:st,constrained:"both"===et.constraintext||"outside"===et.constraintext,angle:Fe}):F(it,ut,Q,j,te,{isHorizontal:st,constrained:"both"===et.constraintext||"inside"===et.constraintext,angle:Fe,anchor:et.insidetextanchor})).fontSize=Ot.size,l("histogram"===et.type?"bar":et.type,Kt,$),gt.transform=Kt;var St=x(Vt,$,Z,G);i.setTransormAndDisplay(St,Kt)}else H.select("text").remove()})(z,U,Wt,K,Gt,Vt,te,Qt,Bt,nt,it),U.layerClipId&&u.hideOutsideRangePoint(At,Wt.select("text"),ut,Q,$.xcalendar,$.ycalendar)}),u.setClipUrl(at,!1===$.cliponaxis?null:U.layerClipId,z)});y.getComponentMethod("errorbars","plot")(z,G,U,nt)},toMoveInsideBar:F}},81974:function(q){"use strict";function W(t,A,g,i,P){var C=A.c2p(i?t.s0:t.p0,!0),u=A.c2p(i?t.s1:t.p1,!0),y=g.c2p(i?t.p0:t.s0,!0),e=g.c2p(i?t.p1:t.s1,!0);return P?[(C+u)/2,(y+e)/2]:i?[u,(y+e)/2]:[(C+u)/2,e]}q.exports=function(A,g){var l,i=A.cd,P=A.xaxis,C=A.yaxis,u=i[0].trace,y="funnel"===u.type,e="h"===u.orientation,r=[];if(!1===g)for(l=0;l<i.length;l++)i[l].selected=0;else for(l=0;l<i.length;l++){var a=i[l],s="ct"in a?a.ct:W(a,P,C,e,y);g.contains(s,!1,l,A)?(r.push({pointNumber:l,x:P.c2d(a.x),y:C.c2d(a.y)}),a.selected=1):a.selected=0}return r}},61546:function(q,W,t){"use strict";q.exports=g;var A=t(71828).distinctVals;function g(i,P){this.traces=i,this.sepNegVal=P.sepNegVal,this.overlapNoMerge=P.overlapNoMerge;for(var C=1/0,u=P.posAxis._id.charAt(0),y=[],e=0;e<i.length;e++){for(var r=i[e],l=0;l<r.length;l++){var a=r[l],s=a.p;void 0===s&&(s=a[u]),void 0!==s&&y.push(s)}r[0]&&r[0].width1&&(C=Math.min(r[0].width1,C))}this.positions=y;var c=A(y);this.distinctPositions=c.vals,this.minDiff=1===c.vals.length&&C!==1/0?C:Math.min(c.minDiff,C);var f=(P.posAxis||{}).type;("category"===f||"multicategory"===f)&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}g.prototype.put=function(P,C){var u=this.getLabel(P,C),y=this.bins[u]||0;return this.bins[u]=y+C,y},g.prototype.get=function(P,C){var u=this.getLabel(P,C);return this.bins[u]||0},g.prototype.getLabel=function(P,C){return(C<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?P:Math.round(P/this.binWidth))}},16688:function(q,W,t){"use strict";var A=t(39898),g=t(7901),i=t(91424),P=t(71828),C=t(73972),u=t(72597).resizeText,y=t(1486),e=y.textfont,r=y.insidetextfont,l=y.outsidetextfont,a=t(69383);function c(x,S,T){i.pointStyle(x.selectAll("path"),S,T),f(x,S,T)}function f(x,S,T){x.selectAll("text").each(function(n){var E=A.select(this),d=P.ensureUniformFontSize(T,p(E,n,S,T));i.font(E,d)})}function p(x,S,T,n){var E=n._fullLayout.font,d=T.textfont;if(x.classed("bartext-inside")){var F=L(S,T);d=v(T,S.i,E,F)}else x.classed("bartext-outside")&&(d=M(T,S.i,E));return d}function o(x,S,T){return b(e,x.textfont,S,T)}function v(x,S,T,n){var E=o(x,S,T);return(void 0===x._input.textfont||void 0===x._input.textfont.color||Array.isArray(x.textfont.color)&&void 0===x.textfont.color[S])&&(E={color:g.contrast(n),family:E.family,size:E.size}),b(r,x.insidetextfont,S,E)}function M(x,S,T){var n=o(x,S,T);return b(l,x.outsidetextfont,S,n)}function b(x,S,T,n){var E=a.getValue((S=S||{}).family,T),d=a.getValue(S.size,T),F=a.getValue(S.color,T);return{family:a.coerceString(x.family,E,n.family),size:a.coerceNumber(x.size,d,n.size),color:a.coerceColor(x.color,F,n.color)}}function L(x,S){return"waterfall"===S.type?S[x.dir].marker.color:x.mcc||x.mc||S.marker.color}q.exports={style:function s(x){var S=A.select(x).selectAll("g.barlayer").selectAll("g.trace");u(x,S,"bar");var T=S.size(),n=x._fullLayout;S.style("opacity",function(E){return E[0].trace.opacity}).each(function(E){("stack"===n.barmode&&T>1||0===n.bargap&&0===n.bargroupgap&&!E[0].trace.marker.line.width)&&A.select(this).attr("shape-rendering","crispEdges")}),S.selectAll("g.points").each(function(E){c(A.select(this),E[0].trace,x)}),C.getComponentMethod("errorbars","style")(S)},styleTextPoints:f,styleOnSelect:function m(x,S,T){var n=S[0].trace;n.selectedpoints?function h(x,S,T){i.selectedPointStyle(x.selectAll("path"),S),function w(x,S,T){x.each(function(n){var d,E=A.select(this);if(n.selected){d=P.ensureUniformFontSize(T,p(E,n,S,T));var F=S.selected.textfont&&S.selected.textfont.color;F&&(d.color=F),i.font(E,d)}else i.selectedTextStyle(E,S)})}(x.selectAll("text"),S,T)}(T,n,x):(c(T,n,x),C.getComponentMethod("errorbars","style")(T))},getInsideTextFont:v,getOutsideTextFont:M,getBarColor:L,resizeText:u}},98340:function(q,W,t){"use strict";var A=t(7901),g=t(52075).hasColorscale,i=t(1586),P=t(71828).coercePattern;q.exports=function(u,y,e,r,l){var a=e("marker.color",r),s=g(u,"marker");s&&i(u,y,l,e,{prefix:"marker.",cLetter:"c"}),e("marker.line.color",A.defaultLine),g(u,"marker.line")&&i(u,y,l,e,{prefix:"marker.line.",cLetter:"c"}),e("marker.line.width"),e("marker.opacity"),P(e,"marker.pattern",a,s),e("selected.marker.color"),e("unselected.marker.color")}},72597:function(q,W,t){"use strict";var A=t(39898),g=t(71828);function u(y){return"_"+y+"Text_minsize"}q.exports={recordMinTextSize:function P(y,e,r){if(r.uniformtext.mode){var l=u(y),a=r.uniformtext.minsize,s=e.scale*e.fontSize;e.hide=s<a,r[l]=r[l]||1/0,e.hide||(r[l]=Math.min(r[l],Math.max(s,a)))}},clearMinTextSize:function C(y,e){e[u(y)]=void 0},resizeText:function i(y,e,r){var l=y._fullLayout,a=l["_"+r+"Text_minsize"];if(a){var c,s="hide"===l.uniformtext.mode;switch(r){case"funnelarea":case"pie":case"sunburst":c="g.slice";break;case"treemap":case"icicle":c="g.slice, g.pathbar";break;default:c="g.points > g.point"}e.selectAll(c).each(function(f){var m=f.transform;if(m){m.scale=s&&m.hide?0:a/m.fontSize;var h=A.select(this).select("text");g.setTransormAndDisplay(h,m)}})}}}},55023:function(q,W,t){"use strict";var A=t(5386).fF,g=t(1426).extendFlat,i=t(81245),P=t(1486);q.exports={r:i.r,theta:i.theta,r0:i.r0,dr:i.dr,theta0:i.theta0,dtheta:i.dtheta,thetaunit:i.thetaunit,base:g({},P.base,{}),offset:g({},P.offset,{}),width:g({},P.width,{}),text:g({},P.text,{}),hovertext:g({},P.hovertext,{}),marker:P.marker,hoverinfo:i.hoverinfo,hovertemplate:A(),selected:P.selected,unselected:P.unselected}},74692:function(q,W,t){"use strict";var A=t(52075).hasColorscale,g=t(78803),i=t(75341),P=t(11661).setGroupPositions,C=t(66279),u=t(73972).traceIs,y=t(71828).extendFlat;q.exports={calc:function e(l,a){for(var s=l._fullLayout,c=a.subplot,m=s[c].angularaxis,h=s[c].radialaxis.makeCalcdata(a,"r"),w=m.makeCalcdata(a,"theta"),p=a._length,o=new Array(p),v=h,M=w,b=0;b<p;b++)o[b]={p:M[b],s:v[b]};function L(x){var S=a[x];void 0!==S&&(a["_"+x]=Array.isArray(S)?m.makeCalcdata(a,x):m.d2c(S,a.thetaunit))}return"linear"===m.type&&(L("width"),L("offset")),A(a,"marker")&&g(l,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),A(a,"marker.line")&&g(l,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}),i(o,a),C(o,a),o},crossTraceCalc:function r(l,a,s){for(var c=l.calcdata,f=[],m=0;m<c.length;m++){var h=c[m],w=h[0].trace;!0===w.visible&&u(w,"bar")&&w.subplot===s&&f.push(h)}var p=y({},a.radialaxis,{_id:"x"});P(l,a.angularaxis,p,f,{mode:a.barmode,norm:a.barnorm,gap:a.bargap,groupgap:a.bargroupgap})}}},6135:function(q,W,t){"use strict";var A=t(71828),g=t(22184).handleRThetaDefaults,i=t(98340),P=t(55023);q.exports=function(u,y,e,r){function l(s,c){return A.coerce(u,y,P,s,c)}g(u,y,r,l)?(l("thetaunit"),l("base"),l("offset"),l("width"),l("text"),l("hovertext"),l("hovertemplate"),i(u,y,l,e,r),A.coerceSelectionMarkerOpacity(y,l)):y.visible=!1}},27379:function(q,W,t){"use strict";var A=t(30211),g=t(71828),i=t(95423).getTraceColor,P=g.fillText,C=t(59150).makeHoverPointText,u=t(10869).isPtInsidePolygon;q.exports=function(e,r,l){var a=e.cd,s=a[0].trace,c=e.subplot,f=c.radialAxis,h=c.vangles,w=h?u:g.isPtInsideSector,p=e.maxHoverDistance,o=c.angularAxis._period||2*Math.PI,v=Math.abs(f.g2p(Math.sqrt(r*r+l*l))),M=Math.atan2(l,r);if(f.range[0]>f.range[1]&&(M+=Math.PI),A.getClosest(a,function(T){return w(v,M,[T.rp0,T.rp1],[T.thetag0,T.thetag1],h)?p+Math.min(1,Math.abs(T.thetag1-T.thetag0)/o)-1+(T.rp1-v)/(T.rp1-T.rp0)-1:1/0},e),!1!==e.index){var x=a[e.index];e.x0=e.x1=x.ct[0],e.y0=e.y1=x.ct[1];var S=g.extendFlat({},x,{r:x.s,theta:x.p});return P(x,s,e),C(S,s,c,e),e.hovertemplate=s.hovertemplate,e.color=i(s,x),e.xLabelVal=e.yLabelVal=void 0,x.s<0&&(e.idealAlign="left"),[e]}}},23381:function(q,W,t){"use strict";q.exports={moduleType:"trace",name:"barpolar",basePlotModule:t(23580),categories:["polar","bar","showLegend"],attributes:t(55023),layoutAttributes:t(40151),supplyDefaults:t(6135),supplyLayoutDefaults:t(19860),calc:t(74692).calc,crossTraceCalc:t(74692).crossTraceCalc,plot:t(60173),colorbar:t(4898),formatLabels:t(98608),style:t(16688).style,styleOnSelect:t(16688).styleOnSelect,hoverPoints:t(27379),selectPoints:t(81974),meta:{}}},40151:function(q){"use strict";q.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},19860:function(q,W,t){"use strict";var A=t(71828),g=t(40151);q.exports=function(i,P,C){var y,u={};function e(a,s){return A.coerce(i[y]||{},P[y],g,a,s)}for(var r=0;r<C.length;r++){var l=C[r];"barpolar"===l.type&&!0===l.visible&&(u[y=l.subplot]||(e("barmode"),e("bargap"),u[y]=1))}}},60173:function(q,W,t){"use strict";var A=t(39898),g=t(92770),i=t(71828),P=t(91424),C=t(10869);q.exports=function(e,r,l){var a=e._context.staticPlot,s=r.xaxis,c=r.yaxis,f=r.radialAxis,m=r.angularAxis,h=function u(y){var e=y.cxx,r=y.cyy;return y.vangles?function(l,a,s,c){var f,m;i.angleDelta(s,c)>0?(f=s,m=c):(f=c,m=s);var h=C.findEnclosingVertexAngles(f,y.vangles)[0],w=C.findEnclosingVertexAngles(m,y.vangles)[1];return C.pathPolygonAnnulus(l,a,f,m,[h,(f+m)/2,w],e,r)}:function(l,a,s,c){return i.pathAnnulus(l,a,s,c,e,r)}}(r),w=r.layers.frontplot.select("g.barlayer");i.makeTraceGroups(w,l,"trace bars").each(function(){var p=A.select(this),v=i.ensureSingle(p,"g","points").selectAll("g.point").data(i.identity);v.enter().append("g").style("vector-effect",a?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),v.exit().remove(),v.each(function(M){var n,b=A.select(this),L=M.rp0=f.c2p(M.s0),x=M.rp1=f.c2p(M.s1),S=M.thetag0=m.c2g(M.p0),T=M.thetag1=m.c2g(M.p1);if(g(L)&&g(x)&&g(S)&&g(T)&&L!==x&&S!==T){var E=f.c2g(M.s1),d=(S+T)/2;M.ct=[s.c2p(E*Math.cos(d)),c.c2p(E*Math.sin(d))],n=h(L,x,S,T)}else n="M0,0Z";i.ensureSingle(b,"path").attr("d",n)}),P.setClipUrl(p,r._hasClipOnAxisFalse?r.clipIds.forTraces:null,e)})}},53522:function(q,W,t){"use strict";var A=t(82196),g=t(1486),i=t(22399),P=t(12663).axisHoverFormat,C=t(5386).fF,u=t(1426).extendFlat,y=A.marker,e=y.line;q.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:A.xperiod,yperiod:A.yperiod,xperiod0:A.xperiod0,yperiod0:A.yperiod0,xperiodalignment:A.xperiodalignment,yperiodalignment:A.yperiodalignment,xhoverformat:P("x"),yhoverformat:P("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:u({},y.symbol,{arrayOk:!1,editType:"plot"}),opacity:u({},y.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:u({},y.angle,{arrayOk:!1,editType:"calc"}),size:u({},y.size,{arrayOk:!1,editType:"calc"}),color:u({},y.color,{arrayOk:!1,editType:"style"}),line:{color:u({},e.color,{arrayOk:!1,dflt:i.defaultLine,editType:"style"}),width:u({},e.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:A.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:g.offsetgroup,alignmentgroup:g.alignmentgroup,selected:{marker:A.selected.marker,editType:"style"},unselected:{marker:A.unselected.marker,editType:"style"},text:u({},A.text,{}),hovertext:u({},A.hovertext,{}),hovertemplate:C({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},48518:function(q,W,t){"use strict";var A=t(92770),g=t(89298),i=t(42973),P=t(71828),C=t(50606).BADNUM,u=P._;q.exports=function(M,b){var E,d,F,D,N,k,O,L=M._fullLayout,x=g.getFromId(M,b.xaxis||"x"),S=g.getFromId(M,b.yaxis||"y"),T=[],n="violin"===b.type?"_numViolins":"_numBoxes";"h"===b.orientation?(F=x,D="x",N=S,k="y",O=!!b.yperiodalignment):(F=S,D="y",N=x,k="x",O=!!b.xperiodalignment);var it,ut,Q,j,Z,G,B=function y(v,M,b,L){var d,S=M+"0"in v;if(M in v||S&&"d"+M in v){var n=b.makeCalcdata(v,M);return[i(v,b,M,n).vals,n]}d=S?v[M+"0"]:"name"in v&&("category"===b.type||A(v.name)&&-1!==["linear","log"].indexOf(b.type)||P.isDateTime(v.name)&&"date"===b.type)?v.name:L;for(var F="multicategory"===b.type?b.r2c_just_indices(d):b.d2c(d,0,v[M+"calendar"]),D=v._length,N=new Array(D),k=0;k<D;k++)N[k]=F;return[N]}(b,k,N,L[n]),z=B[0],U=B[1],H=P.distinctVals(z,N),J=H.vals,nt=H.minDiff/2,K="all"===(b.boxpoints||b.points)?P.identity:function(de){return de.v<it.lf||de.v>it.uf};if(b._hasPreCompStats){var at=b[D],$=function(de){return F.d2c((b[de]||[])[E])},X=1/0,rt=-1/0;for(E=0;E<b._length;E++){var et=z[E];if(A(et)){if((it={}).pos=it[k]=et,O&&U&&(it.orig_p=U[E]),it.q1=$("q1"),it.med=$("median"),it.q3=$("q3"),ut=[],at&&P.isArrayOrTypedArray(at[E]))for(d=0;d<at[E].length;d++)(G=F.d2c(at[E][d]))!==C&&(a(Z={v:G,i:[E,d]},b,[E,d]),ut.push(Z));if(it.pts=ut.sort(c),j=(Q=it[D]=ut.map(f)).length,it.med!==C&&it.q1!==C&&it.q3!==C&&it.med>=it.q1&&it.q3>=it.med){var st=$("lowerfence");it.lf=st!==C&&st<=it.q1?st:m(it,Q,j);var dt=$("upperfence");it.uf=dt!==C&&dt>=it.q3?dt:h(it,Q,j);var bt=$("mean");it.mean=bt!==C?bt:j?P.mean(Q,j):(it.q1+it.q3)/2;var gt=$("sd");it.sd=bt!==C&&gt>=0?gt:j?P.stdev(Q,j,it.mean):it.q3-it.q1,it.lo=w(it),it.uo=p(it);var Lt=$("notchspan");Lt=Lt!==C&&Lt>0?Lt:o(it,j),it.ln=it.med-Lt,it.un=it.med+Lt;var It=it.lf,Mt=it.uf;b.boxpoints&&Q.length&&(It=Math.min(It,Q[0]),Mt=Math.max(Mt,Q[j-1])),b.notched&&(It=Math.min(It,it.ln),Mt=Math.max(Mt,it.un)),it.min=It,it.max=Mt}else{var xt;P.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+it.q1,"median = "+it.med,"q3 = "+it.q3].join("\n")),it.med=xt=it.med!==C?it.med:it.q1!==C?it.q3!==C?(it.q1+it.q3)/2:it.q1:it.q3!==C?it.q3:0,it.q1=it.q3=xt,it.lf=it.uf=xt,it.mean=it.sd=xt,it.ln=it.un=xt,it.min=it.max=xt}X=Math.min(X,it.min),rt=Math.max(rt,it.max),it.pts2=ut.filter(K),T.push(it)}}b._extremes[F._id]=g.findExtremes(F,[X,rt],{padded:!0})}else{var At=F.makeCalcdata(b,D),Gt=function e(v,M){for(var b=v.length,L=new Array(b+1),x=0;x<b;x++)L[x]=v[x]-M;return L[b]=v[b-1]+M,L}(J,nt),Wt=J.length,Pt=function r(v){for(var M=new Array(v),b=0;b<v;b++)M[b]=[];return M}(Wt);for(E=0;E<b._length;E++)if(A(G=At[E])){var Vt=P.findBin(z[E],Gt);Vt>=0&&Vt<Wt&&(a(Z={v:G,i:E},b,E),Pt[Vt].push(Z))}var te=1/0,Qt=-1/0,Bt=b.quartilemethod,Ot="exclusive"===Bt,qt="inclusive"===Bt;for(E=0;E<Wt;E++)if(Pt[E].length>0){var ie,oe;(it={}).pos=it[k]=J[E],ut=it.pts=Pt[E].sort(c),j=(Q=it[D]=ut.map(f)).length,it.min=Q[0],it.max=Q[j-1],it.mean=P.mean(Q,j),it.sd=P.stdev(Q,j,it.mean)*b.sdmultiple,it.med=P.interp(Q,.5),j%2&&(Ot||qt)?(Ot?(ie=Q.slice(0,j/2),oe=Q.slice(j/2+1)):qt&&(ie=Q.slice(0,j/2+1),oe=Q.slice(j/2)),it.q1=P.interp(ie,.5),it.q3=P.interp(oe,.5)):(it.q1=P.interp(Q,.25),it.q3=P.interp(Q,.75)),it.lf=m(it,Q,j),it.uf=h(it,Q,j),it.lo=w(it),it.uo=p(it);var pe=o(it,j);it.ln=it.med-pe,it.un=it.med+pe,te=Math.min(te,it.ln),Qt=Math.max(Qt,it.un),it.pts2=ut.filter(K),T.push(it)}b._extremes[F._id]=g.findExtremes(F,b.notched?At.concat([te,Qt]):At,{padded:!0})}return function s(v,M){if(P.isArrayOrTypedArray(M.selectedpoints))for(var b=0;b<v.length;b++){for(var L=v[b].pts||[],x={},S=0;S<L.length;S++)x[L[S].i]=S;P.tagSelected(L,M,x)}}(T,b),T.length>0?(T[0].t={num:L[n],dPos:nt,posLetter:k,valLetter:D,labels:{med:u(M,"median:"),min:u(M,"min:"),q1:u(M,"q1:"),q3:u(M,"q3:"),max:u(M,"max:"),mean:"sd"===b.boxmean||"sd"===b.sizemode?u(M,"mean \xb1 \u03c3:").replace("\u03c3",1===b.sdmultiple?"\u03c3":b.sdmultiple+"\u03c3"):u(M,"mean:"),lf:u(M,"lower fence:"),uf:u(M,"upper fence:")}},L[n]++,T):[{t:{empty:!0}}]};var l={text:"tx",hovertext:"htx"};function a(v,M,b){for(var L in l)P.isArrayOrTypedArray(M[L])&&(Array.isArray(b)?P.isArrayOrTypedArray(M[L][b[0]])&&(v[l[L]]=M[L][b[0]][b[1]]):v[l[L]]=M[L][b])}function c(v,M){return v.v-M.v}function f(v){return v.v}function m(v,M,b){return 0===b?v.q1:Math.min(v.q1,M[Math.min(P.findBin(2.5*v.q1-1.5*v.q3,M,!0)+1,b-1)])}function h(v,M,b){return 0===b?v.q3:Math.max(v.q3,M[Math.max(P.findBin(2.5*v.q3-1.5*v.q1,M),0)])}function w(v){return 4*v.q1-3*v.q3}function p(v){return 4*v.q3-3*v.q1}function o(v,M){return 0===M?0:1.57*(v.q3-v.q1)/Math.sqrt(M)}},37188:function(q,W,t){"use strict";var A=t(89298),g=t(71828),i=t(99082).getAxisGroup,P=["v","h"];function u(y,e,r,l){var m,h,w,a=e.calcdata,s=e._fullLayout,c=l._id,f=c.charAt(0),p=[],o=0;for(m=0;m<r.length;m++)for(w=a[r[m]],h=0;h<w.length;h++)p.push(l.c2l(w[h].pos,!0)),o+=(w[h].pts2||[]).length;if(p.length){var v=g.distinctVals(p);("category"===l.type||"multicategory"===l.type)&&(v.minDiff=1);var M=v.minDiff/2;A.minDtick(l,v.minDiff,v.vals[0],!0);var L=s["violin"===y?"_numViolins":"_numBoxes"],x="group"===s[y+"mode"]&&L>1,S=1-s[y+"gap"],T=1-s[y+"groupgap"];for(m=0;m<r.length;m++){var D,N,k,O,n=(w=a[r[m]])[0].trace,E=w[0].t,d=n.width,F=n.side;if(d)D=N=O=d/2,k=0;else if(D=M,x){var B=i(s,l._id)+n.orientation,H=Object.keys(((s._alignmentOpts[B]||{})[n.alignmentgroup]||{}).offsetGroups||{}).length,J=H||L;N=D*S*T/J,k=2*D*(((H?n._offsetIndex:E.num)+.5)/J-.5)*S,O=D*S/J}else N=D*S*T,k=0,O=D;E.dPos=D,E.bPos=k,E.bdPos=N,E.wHover=O;var it,ut,j,Z,G,K,at,$,Q=k+N,X=Boolean(d);if("positive"===F?(it=D*(d?1:.5),j=Q,ut=j=k):"negative"===F?(it=j=k,ut=D*(d?1:.5),Z=Q):(it=ut=D,j=Z=Q),(n.boxpoints||n.points)&&o>0){var et=n.pointpos,st=n.jitter,dt=n.marker.size/2,bt=0;et+st>=0&&((bt=Q*(et+st))>it?(X=!0,at=dt,G=bt):bt>j&&(at=dt,G=it)),bt<=it&&(G=it);var gt=0;et-st<=0&&((gt=-Q*(et-st))>ut?(X=!0,$=dt,K=gt):gt>Z&&($=dt,K=ut)),gt<=ut&&(K=ut)}else G=it,K=ut;var Lt=new Array(w.length);for(h=0;h<w.length;h++)Lt[h]=w[h].pos;n._extremes[c]=A.findExtremes(l,Lt,{padded:X,vpadminus:K,vpadplus:G,vpadLinearized:!0,ppadminus:{x:$,y:at}[f],ppadplus:{x:at,y:$}[f]})}}}q.exports={crossTraceCalc:function C(y,e){for(var r=y.calcdata,l=e.xaxis,a=e.yaxis,s=0;s<P.length;s++){for(var c=P[s],f="h"===c?a:l,m=[],h=0;h<r.length;h++){var w=r[h],o=w[0].trace;!0===o.visible&&("box"===o.type||"candlestick"===o.type)&&!w[0].t.empty&&(o.orientation||"v")===c&&o.xaxis===l._id&&o.yaxis===a._id&&m.push(h)}u("box",y,m,f)}},setPositionOffset:u}},36411:function(q,W,t){"use strict";var A=t(71828),g=t(73972),i=t(7901),P=t(73927),C=t(26125),u=t(4322),y=t(53522);function r(s,c,f,m){function h(H){var J=0;return H&&H.length&&(J+=1,A.isArrayOrTypedArray(H[0])&&H[0].length&&(J+=1)),J}function w(H){return A.validate(s[H],y[H])}var v,p=f("y"),o=f("x");if("box"===c.type){var M=f("q1"),b=f("median"),L=f("q3");c._hasPreCompStats=M&&M.length&&b&&b.length&&L&&L.length,v=Math.min(A.minRowLength(M),A.minRowLength(b),A.minRowLength(L))}var F,D,x=h(p),S=h(o),T=x&&A.minRowLength(p),n=S&&A.minRowLength(o),E=m.calendar,d={autotypenumbers:m.autotypenumbers};if(c._hasPreCompStats)switch(String(S)+String(x)){case"00":var N=w("x0")||w("dx");F=!w("y0")&&!w("dy")||N?"v":"h",D=v;break;case"10":F="v",D=Math.min(v,n);break;case"20":F="h",D=Math.min(v,o.length);break;case"01":F="h",D=Math.min(v,T);break;case"02":F="v",D=Math.min(v,p.length);break;case"12":F="v",D=Math.min(v,n,p.length);break;case"21":F="h",D=Math.min(v,o.length,T);break;case"11":D=0;break;case"22":var B,O=!1;for(B=0;B<o.length;B++)if("category"===u(o[B],E,d)){O=!0;break}if(O)F="v",D=Math.min(v,n,p.length);else{for(B=0;B<p.length;B++)if("category"===u(p[B],E,d)){O=!0;break}O?(F="h",D=Math.min(v,o.length,T)):(F="v",D=Math.min(v,n,p.length))}}else x>0?(F="v",D=S>0?Math.min(n,T):Math.min(T)):S>0?(F="h",D=Math.min(n)):D=0;if(D){c._length=D;var z=f("orientation",F);c._hasPreCompStats?"v"===z&&0===S?(f("x0",0),f("dx",1)):"h"===z&&0===x&&(f("y0",0),f("dy",1)):"v"===z&&0===S?f("x0"):"h"===z&&0===x&&f("y0"),g.getComponentMethod("calendars","handleTraceDefaults")(s,c,["x","y"],m)}else c.visible=!1}function l(s,c,f,m){var h=m.prefix,w=A.coerce2(s,c,y,"marker.outliercolor"),p=f("marker.line.outliercolor"),o="outliers";c._hasPreCompStats?o="all":(w||p)&&(o="suspectedoutliers");var v=f(h+"points",o);v?(f("jitter","all"===v?.3:0),f("pointpos","all"===v?-1.5:0),f("marker.symbol"),f("marker.opacity"),f("marker.size"),f("marker.angle"),f("marker.color",c.line.color),f("marker.line.color"),f("marker.line.width"),"suspectedoutliers"===v&&(f("marker.line.outliercolor",c.marker.color),f("marker.line.outlierwidth")),f("selected.marker.color"),f("unselected.marker.color"),f("selected.marker.size"),f("unselected.marker.size"),f("text"),f("hovertext")):delete c.marker;var M=f("hoveron");("all"===M||-1!==M.indexOf("points"))&&f("hovertemplate"),A.coerceSelectionMarkerOpacity(c,f)}q.exports={supplyDefaults:function e(s,c,f,m){function h(T,n){return A.coerce(s,c,y,T,n)}if(r(s,c,h,m),!1!==c.visible){P(s,c,m,h),h("xhoverformat"),h("yhoverformat");var w=c._hasPreCompStats;w&&(h("lowerfence"),h("upperfence")),h("line.color",(s.marker||{}).color||f),h("line.width"),h("fillcolor",i.addOpacity(c.line.color,.5));var p=!1;if(w){var o=h("mean"),v=h("sd");o&&o.length&&(p=!0,v&&v.length&&(p="sd"))}h("whiskerwidth");var b,M=h("sizemode");"quartiles"===M&&(b=h("boxmean",p)),h("showwhiskers","quartiles"===M),("sd"===M||"sd"===b)&&h("sdmultiple"),h("width"),h("quartilemethod");var L=!1;if(w){var x=h("notchspan");x&&x.length&&(L=!0)}else A.validate(s.notchwidth,y.notchwidth)&&(L=!0);h("notched",L)&&h("notchwidth"),l(s,c,h,{prefix:"box"})}},crossTraceDefaults:function a(s,c){var m;function h(o){return A.coerce(m._input,m,y,o)}for(var w=0;w<s.length;w++){var p=(m=s[w]).type;("box"===p||"violin"===p)&&"group"===c[p+"mode"]&&C(m._input,m,c,h)}},handleSampleDefaults:r,handlePointsDefaults:l}},74907:function(q){"use strict";q.exports=function(t,A){return A.hoverOnBox&&(t.hoverOnBox=A.hoverOnBox),"xVal"in A&&(t.x=A.xVal),"yVal"in A&&(t.y=A.yVal),A.xa&&(t.xaxis=A.xa),A.ya&&(t.yaxis=A.ya),t}},41868:function(q,W,t){"use strict";var A=t(89298),g=t(71828),i=t(30211),P=t(7901),C=g.fillText;function y(r,l,a,s){var o,v,M,b,L,x,S,T,n,E,d,D,N,B,c=r.cd,f=r.xa,m=r.ya,h=c[0].trace,w=c[0].t,p="violin"===h.type,F=w.bdPos,k=w.wHover,O=function(gt){return M.c2l(gt.pos)+w.bPos-M.c2l(x)};p&&"both"!==h.side?("positive"===h.side&&(n=function(gt){var Lt=O(gt);return i.inbox(Lt,Lt+k,E)},D=F,N=0),"negative"===h.side&&(n=function(gt){var Lt=O(gt);return i.inbox(Lt-k,Lt,E)},D=0,N=F)):(n=function(gt){var Lt=O(gt);return i.inbox(Lt-k,Lt+k,E)},D=N=F),B=p?function(gt){return i.inbox(gt.span[0]-L,gt.span[1]-L,E)}:function(gt){return i.inbox(gt.min-L,gt.max-L,E)},"h"===h.orientation?(L=l,x=a,S=B,T=n,o="y",M=m,v="x",b=f):(L=a,x=l,S=n,T=B,o="x",M=f,v="y",b=m);var z=Math.min(1,F/Math.abs(M.r2c(M.range[1])-M.r2c(M.range[0])));function U(gt){return(S(gt)+T(gt))/2}E=r.maxHoverDistance-z,d=r.maxSpikeDistance-z;var H=i.getDistanceFunction(s,S,T,U);if(i.getClosest(c,H,r),!1===r.index)return[];var J=c[r.index],nt=h.line.color,it=(h.marker||{}).color;r.color=P.opacity(nt)&&h.line.width?nt:P.opacity(it)&&h.boxpoints?it:h.fillcolor,r[o+"0"]=M.c2p(J.pos+w.bPos-N,!0),r[o+"1"]=M.c2p(J.pos+w.bPos+D,!0),r[o+"LabelVal"]=void 0!==J.orig_p?J.orig_p:J.pos;var ut=o+"Spike";r.spikeDistance=U(J)*d/E,r[ut]=M.c2p(J.pos,!0);var Q=h.boxmean||"sd"===h.sizemode||(h.meanline||{}).visible,j=h.boxpoints||h.points,Z=j&&Q?["max","uf","q3","med","mean","q1","lf","min"]:j&&!Q?["max","uf","q3","med","q1","lf","min"]:!j&&Q?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"];h.orientation===(b.range[1]<b.range[0]?"v":"h")&&Z.reverse();for(var K=r.spikeDistance,at=r[ut],$=[],X=0;X<Z.length;X++){var rt=Z[X];if(rt in J){var et=J[rt],st=b.c2p(et,!0),dt=g.extendFlat({},r);dt.attr=rt,dt[v+"0"]=dt[v+"1"]=st,dt[v+"LabelVal"]=et,dt[v+"Label"]=(w.labels?w.labels[rt]+" ":"")+A.hoverLabelText(b,et,h[v+"hoverformat"]),dt.hoverOnBox=!0,"mean"===rt&&"sd"in J&&("sd"===h.boxmean||"sd"===h.sizemode)&&(dt[v+"err"]=J.sd),dt.hovertemplate=!1,$.push(dt)}}r.name="",r.spikeDistance=void 0,r[ut]=void 0;for(var bt=0;bt<$.length;bt++)"med"!==$[bt].attr?($[bt].name="",$[bt].spikeDistance=void 0,$[bt][ut]=void 0):($[bt].spikeDistance=K,$[bt][ut]=at);return $}function e(r,l,a){for(var p,L,x,s=r.cd,c=r.xa,f=r.ya,m=s[0].trace,h=c.c2p(l),w=f.c2p(a),M=i.quadrature(function(B){var z=Math.max(3,B.mrc||0);return Math.max(Math.abs(c.c2p(B.x)-h)-z,1-3/z)},function(B){var z=Math.max(3,B.mrc||0);return Math.max(Math.abs(f.c2p(B.y)-w)-z,1-3/z)}),b=!1,S=0;S<s.length;S++){L=s[S];for(var T=0;T<(L.pts||[]).length;T++){var n=M(x=L.pts[T]);n<=r.distance&&(r.distance=n,b=[S,T])}}if(!b)return!1;var E=c.c2p((x=(L=s[b[0]]).pts[b[1]]).x,!0),d=f.c2p(x.y,!0),F=x.mrc||1;p=g.extendFlat({},r,{index:x.i,color:(m.marker||{}).color,name:m.name,x0:E-F,x1:E+F,y0:d-F,y1:d+F,spikeDistance:r.distance,hovertemplate:m.hovertemplate});var k,D=L.orig_p,N=void 0!==D?D:L.pos;return"h"===m.orientation?(k=f,p.xLabelVal=x.x,p.yLabelVal=N):(k=c,p.xLabelVal=N,p.yLabelVal=x.y),p[k._id.charAt(0)+"Spike"]=k.c2p(L.pos,!0),C(x,m,p),p}q.exports={hoverPoints:function u(r,l,a,s){var w,m=r.cd[0].trace.hoveron,h=[];return-1!==m.indexOf("boxes")&&(h=h.concat(y(r,l,a,s))),-1!==m.indexOf("points")&&(w=e(r,l,a)),"closest"===s?w?[w]:h:(w&&h.push(w),h)},hoverOnBoxes:y,hoverOnPoints:e}},83832:function(q,W,t){"use strict";q.exports={attributes:t(53522),layoutAttributes:t(40094),supplyDefaults:t(36411).supplyDefaults,crossTraceDefaults:t(36411).crossTraceDefaults,supplyLayoutDefaults:t(4199).supplyLayoutDefaults,calc:t(48518),crossTraceCalc:t(37188).crossTraceCalc,plot:t(86047).plot,style:t(58063).style,styleOnSelect:t(58063).styleOnSelect,hoverPoints:t(41868).hoverPoints,eventData:t(74907),selectPoints:t(24626),moduleType:"trace",name:"box",basePlotModule:t(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},40094:function(q){"use strict";q.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},4199:function(q,W,t){"use strict";var A=t(73972),g=t(71828),i=t(40094);function P(u,y,e,r,l){for(var a=l+"Layout",s=!1,c=0;c<e.length;c++)if(A.traceIs(e[c],a)){s=!0;break}!s||(r(l+"mode"),r(l+"gap"),r(l+"groupgap"))}q.exports={supplyLayoutDefaults:function C(u,y,e){P(0,0,e,function r(l,a){return g.coerce(u,y,i,l,a)},"box")},_supply:P}},86047:function(q,W,t){"use strict";var A=t(39898),g=t(71828),i=t(91424);function y(l,a,s,c,f){var T,n,m="h"===s.orientation,h=a.val,w=a.pos,p=!!w.rangebreaks,o=c.bPos,v=c.wdPos||0,M=c.bPosPxOffset||0,b=s.whiskerwidth||0,L=!1!==s.showwhiskers,x=s.notched||!1,S=x?1-2*s.notchwidth:1;Array.isArray(c.bdPos)?(T=c.bdPos[0],n=c.bdPos[1]):(T=c.bdPos,n=c.bdPos);var E=l.selectAll("path.box").data("violin"!==s.type||s.box.visible?g.identity:[]);E.enter().append("path").style("vector-effect",f?"none":"non-scaling-stroke").attr("class","box"),E.exit().remove(),E.each(function(d){if(d.empty)return A.select(this).attr("d","M0,0Z");var F=w.c2l(d.pos+o,!0),D=w.l2p(F-T)+M,N=w.l2p(F+n)+M,k=p?(D+N)/2:w.l2p(F)+M,O=s.whiskerwidth,B=p?D*O+(1-O)*k:w.l2p(F-v)+M,z=p?N*O+(1-O)*k:w.l2p(F+v)+M,U=w.l2p(F-T*S)+M,H=w.l2p(F+n*S)+M,J="sd"===s.sizemode,nt=h.c2p(J?d.mean-d.sd:d.q1,!0),it=h.c2p(J?d.mean+d.sd:d.q3,!0),ut=g.constrain(h.c2p(J?d.mean:d.med,!0),Math.min(nt,it)+1,Math.max(nt,it)-1),Q=void 0===d.lf||!1===s.boxpoints||J,j=h.c2p(Q?d.min:d.lf,!0),Z=h.c2p(Q?d.max:d.uf,!0),G=h.c2p(d.ln,!0),K=h.c2p(d.un,!0);m?A.select(this).attr("d","M"+ut+","+U+"V"+H+"M"+nt+","+D+"V"+N+(x?"H"+G+"L"+ut+","+H+"L"+K+","+N:"")+"H"+it+"V"+D+(x?"H"+K+"L"+ut+","+U+"L"+G+","+D:"")+"Z"+(L?"M"+nt+","+k+"H"+j+"M"+it+","+k+"H"+Z+(0===b?"":"M"+j+","+B+"V"+z+"M"+Z+","+B+"V"+z):"")):A.select(this).attr("d","M"+U+","+ut+"H"+H+"M"+D+","+nt+"H"+N+(x?"V"+G+"L"+H+","+ut+"L"+N+","+K:"")+"V"+it+"H"+D+(x?"V"+K+"L"+U+","+ut+"L"+D+","+G:"")+"Z"+(L?"M"+k+","+nt+"V"+j+"M"+k+","+it+"V"+Z+(0===b?"":"M"+B+","+j+"H"+z+"M"+B+","+Z+"H"+z):""))})}function e(l,a,s,c){var f=a.x,m=a.y,h=c.bdPos,w=c.bPos,p=s.boxpoints||s.points;g.seedPseudoRandom();var v=l.selectAll("g.points").data(p?function(b){return b.forEach(function(L){L.t=c,L.trace=s}),b}:[]);v.enter().append("g").attr("class","points"),v.exit().remove();var M=v.selectAll("path").data(function(b){var L,F,x=b.pts2,S=Math.max((b.max-b.min)/10,b.q3-b.q1),T=1e-9*S,n=.01*S,E=[],d=0;if(s.jitter){if(0===S)for(d=1,E=new Array(x.length),L=0;L<x.length;L++)E[L]=1;else for(L=0;L<x.length;L++){var D=Math.max(0,L-5),N=x[D].v,k=Math.min(x.length-1,L+5),O=x[k].v;"all"!==p&&(x[L].v<b.lf?O=Math.min(O,b.lf):N=Math.max(N,b.uf));var B=Math.sqrt(n*(k-D)/(O-N+T))||0;B=g.constrain(Math.abs(B),0,1),E.push(B),d=Math.max(B,d)}F=2*s.jitter/(d||1)}for(L=0;L<x.length;L++){var z=x[L],U=z.v,H=s.jitter?F*E[L]*(g.pseudoRandom()-.5):0,J=b.pos+w+h*(s.pointpos+H);"h"===s.orientation?(z.y=J,z.x=U):(z.x=J,z.y=U),"suspectedoutliers"===p&&U<b.uo&&U>b.lo&&(z.so=!0)}return x});M.enter().append("path").classed("point",!0),M.exit().remove(),M.call(i.translatePoints,f,m)}function r(l,a,s,c){var v,M,f=a.val,m=a.pos,h=!!m.rangebreaks,w=c.bPos,p=c.bPosPxOffset||0,o=s.boxmean||(s.meanline||{}).visible;Array.isArray(c.bdPos)?(v=c.bdPos[0],M=c.bdPos[1]):(v=c.bdPos,M=c.bdPos);var b=l.selectAll("path.mean").data("box"===s.type&&s.boxmean||"violin"===s.type&&s.box.visible&&s.meanline.visible?g.identity:[]);b.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),b.exit().remove(),b.each(function(L){var x=m.c2l(L.pos+w,!0),S=m.l2p(x-v)+p,T=m.l2p(x+M)+p,n=h?(S+T)/2:m.l2p(x)+p,E=f.c2p(L.mean,!0),d=f.c2p(L.mean-L.sd,!0),F=f.c2p(L.mean+L.sd,!0);"h"===s.orientation?A.select(this).attr("d","M"+E+","+S+"V"+T+("sd"===o?"m0,0L"+d+","+n+"L"+E+","+S+"L"+F+","+n+"Z":"")):A.select(this).attr("d","M"+S+","+E+"H"+T+("sd"===o?"m0,0L"+n+","+d+"L"+S+","+E+"L"+n+","+F+"Z":""))})}q.exports={plot:function u(l,a,s,c){var f=l._context.staticPlot,m=a.xaxis,h=a.yaxis;g.makeTraceGroups(c,s,"trace boxes").each(function(w){var b,L,p=A.select(this),o=w[0],v=o.t,M=o.trace;v.wdPos=v.bdPos*M.whiskerwidth,!0!==M.visible||v.empty?p.remove():("h"===M.orientation?(b=h,L=m):(b=m,L=h),y(p,{pos:b,val:L},M,v,f),e(p,{x:m,y:h},M,v),r(p,{pos:b,val:L},M,v))})},plotBoxAndWhiskers:y,plotPoints:e,plotBoxMean:r}},24626:function(q){"use strict";q.exports=function(t,A){var u,y,g=t.cd,i=t.xaxis,P=t.yaxis,C=[];if(!1===A)for(u=0;u<g.length;u++)for(y=0;y<(g[u].pts||[]).length;y++)g[u].pts[y].selected=0;else for(u=0;u<g.length;u++)for(y=0;y<(g[u].pts||[]).length;y++){var e=g[u].pts[y],r=i.c2p(e.x),l=P.c2p(e.y);A.contains([r,l],null,e.i,t)?(C.push({pointNumber:e.i,x:i.c2d(e.x),y:P.c2d(e.y)}),e.selected=1):e.selected=0}return C}},58063:function(q,W,t){"use strict";var A=t(39898),g=t(7901),i=t(91424);q.exports={style:function P(u,y,e){var r=e||A.select(u).selectAll("g.trace.boxes");r.style("opacity",function(l){return l[0].trace.opacity}),r.each(function(l){var a=A.select(this),s=l[0].trace,c=s.line.width;function f(w,p,o,v){w.style("stroke-width",p+"px").call(g.stroke,o).call(g.fill,v)}var m=a.selectAll("path.box");if("candlestick"===s.type)m.each(function(w){if(!w.empty){var p=A.select(this),o=s[w.dir];f(p,o.line.width,o.line.color,o.fillcolor),p.style("opacity",s.selectedpoints&&!w.selected?.3:1)}});else{f(m,c,s.line.color,s.fillcolor),a.selectAll("path.mean").style({"stroke-width":c,"stroke-dasharray":2*c+"px,"+c+"px"}).call(g.stroke,s.line.color);var h=a.selectAll("path.point");i.pointStyle(h,s,u)}})},styleOnSelect:function C(u,y,e){var r=y[0].trace,l=e.selectAll("path.point");r.selectedpoints?i.selectedPointStyle(l,r):i.pointStyle(l,r,u)}}},75343:function(q,W,t){"use strict";var A=t(71828).extendFlat,g=t(12663).axisHoverFormat,i=t(2522),P=t(53522);function C(u){return{line:{color:A({},P.line.color,{dflt:u}),width:P.line.width,editType:"style"},fillcolor:P.fillcolor,editType:"style"}}q.exports={xperiod:i.xperiod,xperiod0:i.xperiod0,xperiodalignment:i.xperiodalignment,xhoverformat:g("x"),yhoverformat:g("y"),x:i.x,open:i.open,high:i.high,low:i.low,close:i.close,line:{width:A({},P.line.width,{}),editType:"style"},increasing:C(i.increasing.line.color.dflt),decreasing:C(i.decreasing.line.color.dflt),text:i.text,hovertext:i.hovertext,whiskerwidth:A({},P.whiskerwidth,{dflt:0}),hoverlabel:i.hoverlabel}},41197:function(q,W,t){"use strict";var A=t(71828),g=t(89298),i=t(42973),P=t(3485).calcCommon;function C(u,y,e,r){return{min:e,q1:Math.min(u,r),med:r,q3:Math.max(u,r),max:y}}q.exports=function(u,y){var e=u._fullLayout,r=g.getFromId(u,y.xaxis),l=g.getFromId(u,y.yaxis),a=r.makeCalcdata(y,"x"),s=i(y,r,"x",a).vals,c=P(u,y,a,s,l,C);return c.length?(A.extendFlat(c[0].t,{num:e._numBoxes,dPos:A.distinctVals(s).minDiff/2,posLetter:"x",valLetter:"y"}),e._numBoxes++,c):[{t:{empty:!0}}]}},1026:function(q,W,t){"use strict";var A=t(71828),g=t(7901),i=t(14555),P=t(73927),C=t(75343);function u(y,e,r,l){var a=r(l+".line.color");r(l+".line.width",e.line.width),r(l+".fillcolor",g.addOpacity(a,.5))}q.exports=function(e,r,l,a){function s(f,m){return A.coerce(e,r,C,f,m)}i(e,r,s,a)?(P(e,r,a,s,{x:!0}),s("xhoverformat"),s("yhoverformat"),s("line.width"),u(0,r,s,"increasing"),u(0,r,s,"decreasing"),s("text"),s("hovertext"),s("whiskerwidth"),a._requestRangeslider[r.xaxis]=!0):r.visible=!1}},91815:function(q,W,t){"use strict";q.exports={moduleType:"trace",name:"candlestick",basePlotModule:t(93612),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:t(75343),layoutAttributes:t(40094),supplyLayoutDefaults:t(4199).supplyLayoutDefaults,crossTraceCalc:t(37188).crossTraceCalc,supplyDefaults:t(1026),calc:t(41197),plot:t(86047).plot,layerName:"boxlayer",style:t(58063).style,hoverPoints:t(66449).hoverPoints,selectPoints:t(67324)}},13145:function(q,W,t){"use strict";var A=t(11500),g=t(44467);q.exports=function(C,u,y,e,r){e("a")||(e("da"),e("a0")),e("b")||(e("db"),e("b0")),function i(P,C,u,y){["aaxis","baxis"].forEach(function(r){var l=r.charAt(0),a=P[r]||{},s=g.newContainer(C,r);A(a,s,{noTicklabelstep:!0,tickfont:"x",id:l+"axis",letter:l,font:C.font,name:r,data:P[l],calendar:C.calendar,dfltColor:y,bgColor:u.paper_bgcolor,autotypenumbersDflt:u.autotypenumbers,fullLayout:u}),s._categories=s._categories||[],!P[r]&&"-"!==a.type&&(P[r]={type:a.type})})}(C,u,y,r)}},402:function(q,W,t){"use strict";var A=t(71828).isArrayOrTypedArray;function g(i,P){if(!A(i)||P>=10)return null;for(var C=1/0,u=-1/0,y=i.length,e=0;e<y;e++){var r=i[e];if(A(r)){var l=g(r,P+1);l&&(C=Math.min(l[0],C),u=Math.max(l[1],u))}else C=Math.min(r,C),u=Math.max(r,u)}return[C,u]}q.exports=function(i){return g(i,0)}},99798:function(q,W,t){"use strict";var A=t(41940),g=t(1928),i=t(22399),P=A({editType:"calc"});P.family.dflt='"Open Sans", verdana, arial, sans-serif',P.size.dflt=12,P.color.dflt=i.defaultLine,q.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:g,baxis:g,font:P,color:{valType:"color",dflt:i.defaultLine,editType:"plot"},transforms:void 0}},4536:function(q,W,t){"use strict";var A=t(71828).isArrayOrTypedArray;q.exports=function(g,i,P,C){var u,y,e,r,l,a,s,c,f,m,h,w,p,o=A(P)?"a":"b",M=("a"===o?g.aaxis:g.baxis).smoothing,b="a"===o?g.a2i:g.b2j,L="a"===o?P:C,x="a"===o?C:P,S="a"===o?i.a.length:i.b.length,T="a"===o?i.b.length:i.a.length,n=Math.floor("a"===o?g.b2j(x):g.a2i(x)),E="a"===o?function(nt){return g.evalxy([],nt,n)}:function(nt){return g.evalxy([],n,nt)};M&&(e=Math.max(0,Math.min(T-2,n)),r=n-e,y="a"===o?function(nt,it){return g.dxydi([],nt,e,it,r)}:function(nt,it){return g.dxydj([],e,nt,r,it)});var d=b(L[0]),F=b(L[1]),D=d<F?1:-1,N=1e-8*(F-d),k=D>0?Math.floor:Math.ceil,O=D>0?Math.ceil:Math.floor,B=D>0?Math.min:Math.max,z=D>0?Math.max:Math.min,U=k(d+N),H=O(F-N),J=[[s=E(d)]];for(u=U;u*D<H*D;u+=D)l=[],h=z(d,u),p=(w=B(F,u+D))-h,a=Math.max(0,Math.min(S-2,Math.floor(.5*(h+w)))),c=E(w),M&&(f=y(a,h-a),m=y(a,w-a),l.push([s[0]+f[0]/3*p,s[1]+f[1]/3*p]),l.push([c[0]-m[0]/3*p,c[1]-m[1]/3*p])),l.push(c),J.push(l),s=c;return J}},1928:function(q,W,t){"use strict";var A=t(41940),g=t(22399),i=t(13838),P=t(12663).descriptionWithDates,C=t(30962).overrideAll,u=t(79952).P,y=t(1426).extendFlat;q.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:A({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:i.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:y({},i.labelalias,{editType:"calc"}),tickfont:A({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:P("tick label")},tickformatstops:C(i.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:g.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:y({},u,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:y({},u,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:g.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:A({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},11500:function(q,W,t){"use strict";var A=t(99798),g=t(7901).addOpacity,i=t(73972),P=t(71828),C=t(26218),u=t(96115),y=t(89426),e=t(15258),r=t(21994),l=t(4322);q.exports=function(c,f,m){var h=m.letter,w=m.font||{},p=A[h+"axis"];function o(U,H){return P.coerce(c,f,p,U,H)}function v(U,H){return P.coerce2(c,f,p,U,H)}m.name&&(f._name=m.name,f._id=m.name),o("autotypenumbers",m.autotypenumbersDflt);var M=o("type");"-"===M&&(m.data&&function a(s,c){if("-"===s.type){var m=s._id.charAt(0);s.type=l(c,s[m+"calendar"],{autotypenumbers:s.autotypenumbers})}}(f,m.data),"-"===f.type?f.type="linear":M=c.type=f.type),o("smoothing"),o("cheatertype"),o("showticklabels"),o("labelprefix",h+" = "),o("labelsuffix"),o("showtickprefix"),o("showticksuffix"),o("separatethousands"),o("tickformat"),o("exponentformat"),o("minexponent"),o("showexponent"),o("categoryorder"),o("tickmode"),o("tickvals"),o("ticktext"),o("tick0"),o("dtick"),"array"===f.tickmode&&(o("arraytick0"),o("arraydtick")),o("labelpadding"),f._hovertitle=h,"date"===M&&i.getComponentMethod("calendars","handleDefaults")(c,f,"calendar",m.calendar),r(f,m.fullLayout),f.c2p=P.identity;var L=o("color",m.dfltColor),x=L===c.color?L:w.color;o("title.text")&&(P.coerceFont(o,"title.font",{family:w.family,size:P.bigFont(w.size),color:x}),o("title.offset")),o("tickangle"),o("autorange",!f.isValidRange(c.range))&&o("rangemode"),o("range"),f.cleanRange(),o("fixedrange"),C(c,f,o,M),y(c,f,o,M,m),u(c,f,o,M,m),e(c,f,o,{data:m.data,dataAttr:h});var n=v("gridcolor",g(L,.3)),E=v("gridwidth"),d=v("griddash"),F=o("showgrid");F||(delete f.gridcolor,delete f.gridwidth,delete f.griddash);var D=v("startlinecolor",L),N=v("startlinewidth",E);o("startline",f.showgrid||!!D||!!N)||(delete f.startlinecolor,delete f.startlinewidth);var O=v("endlinecolor",L),B=v("endlinewidth",E);return o("endline",f.showgrid||!!O||!!B)||(delete f.endlinecolor,delete f.endlinewidth),F?(o("minorgridcount"),o("minorgridwidth",E),o("minorgriddash",d),o("minorgridcolor",g(n,.06)),f.minorgridcount||(delete f.minorgridwidth,delete f.minorgriddash,delete f.minorgridcolor)):(delete f.gridcolor,delete f.gridwidth,delete f.griddash),"none"===f.showticklabels&&(delete f.tickfont,delete f.tickangle,delete f.showexponent,delete f.exponentformat,delete f.minexponent,delete f.tickformat,delete f.showticksuffix,delete f.showtickprefix),f.showticksuffix||delete f.ticksuffix,f.showtickprefix||delete f.tickprefix,o("tickmode"),f}},25281:function(q,W,t){"use strict";var A=t(89298),g=t(71828).isArray1D,i=t(53824),P=t(402),C=t(20347),u=t(83311),y=t(44807),e=t(4742),r=t(72505),l=t(68296),a=t(11435);q.exports=function(c,f){var m=A.getFromId(c,f.xaxis),h=A.getFromId(c,f.yaxis),w=f.aaxis,p=f.baxis,o=f.x,v=f.y,M=[];o&&g(o)&&M.push("x"),v&&g(v)&&M.push("y"),M.length&&l(f,w,p,"a","b",M);var b=f._a=f._a||f.a,L=f._b=f._b||f.b;o=f._x||f.x,v=f._y||f.y;var x={};f._cheater&&(o=i("index"===w.cheatertype?b.length:b,"index"===p.cheatertype?L.length:L,f.cheaterslope)),f._x=o=e(o),f._y=v=e(v),r(o,b,L),r(v,b,L),a(f),f.setScale();var n=P(o),E=P(v),d=.5*(n[1]-n[0]),F=.5*(n[1]+n[0]),D=.5*(E[1]-E[0]),N=.5*(E[1]+E[0]),k=1.3;return E=[N-D*k,N+D*k],f._extremes[m._id]=A.findExtremes(m,n=[F-d*k,F+d*k],{padded:!0}),f._extremes[h._id]=A.findExtremes(h,E,{padded:!0}),C(f,"a","b"),C(f,"b","a"),u(f,w),u(f,p),x.clipsegments=y(f._xctrl,f._yctrl,w,p),x.x=o,x.y=v,x.a=b,x.b=L,[x]}},44807:function(q){"use strict";q.exports=function(t,A,g,i){var P,C,u,y=[],e=!!g.smoothing,r=!!i.smoothing,l=t[0].length-1,a=t.length-1;for(P=0,C=[],u=[];P<=l;P++)C[P]=t[0][P],u[P]=A[0][P];for(y.push({x:C,y:u,bicubic:e}),P=0,C=[],u=[];P<=a;P++)C[P]=t[P][l],u[P]=A[P][l];for(y.push({x:C,y:u,bicubic:r}),P=l,C=[],u=[];P>=0;P--)C[l-P]=t[a][P],u[l-P]=A[a][P];for(y.push({x:C,y:u,bicubic:e}),P=a,C=[],u=[];P>=0;P--)C[a-P]=t[P][0],u[a-P]=A[P][0];return y.push({x:C,y:u,bicubic:r}),y}},20347:function(q,W,t){"use strict";var A=t(89298),g=t(1426).extendFlat;q.exports=function(P,C,u){var y,e,r,l,a,s,c,f,m,h,w,p,o,v,M=P["_"+C],b=P[C+"axis"],L=b._gridlines=[],x=b._minorgridlines=[],S=b._boundarylines=[],T=P["_"+u],n=P[u+"axis"];"array"===b.tickmode&&(b.tickvals=M.slice());var E=P._xctrl,d=P._yctrl,F=E[0].length,D=E.length,N=P._a.length,k=P._b.length;A.prepTicks(b),"array"===b.tickmode&&delete b.tickvals;var O=b.smoothing?3:1;function B(U){var H,J,nt,it,ut,Q,j,Z,G,K,at,$,X=[],rt=[],et={};if("b"===C)for(J=P.b2j(U),nt=Math.floor(Math.max(0,Math.min(k-2,J))),it=J-nt,et.length=k,et.crossLength=N,et.xy=function(st){return P.evalxy([],st,J)},et.dxy=function(st,dt){return P.dxydi([],st,nt,dt,it)},H=0;H<N;H++)Q=Math.min(N-2,H),j=H-Q,Z=P.evalxy([],H,J),n.smoothing&&H>0&&(G=P.dxydi([],H-1,nt,0,it),X.push(ut[0]+G[0]/3),rt.push(ut[1]+G[1]/3),K=P.dxydi([],H-1,nt,1,it),X.push(Z[0]-K[0]/3),rt.push(Z[1]-K[1]/3)),X.push(Z[0]),rt.push(Z[1]),ut=Z;else for(H=P.a2i(U),Q=Math.floor(Math.max(0,Math.min(N-2,H))),j=H-Q,et.length=N,et.crossLength=k,et.xy=function(st){return P.evalxy([],H,st)},et.dxy=function(st,dt){return P.dxydj([],Q,st,j,dt)},J=0;J<k;J++)nt=Math.min(k-2,J),it=J-nt,Z=P.evalxy([],H,J),n.smoothing&&J>0&&(at=P.dxydj([],Q,J-1,j,0),X.push(ut[0]+at[0]/3),rt.push(ut[1]+at[1]/3),$=P.dxydj([],Q,J-1,j,1),X.push(Z[0]-$[0]/3),rt.push(Z[1]-$[1]/3)),X.push(Z[0]),rt.push(Z[1]),ut=Z;return et.axisLetter=C,et.axis=b,et.crossAxis=n,et.value=U,et.constvar=u,et.index=f,et.x=X,et.y=rt,et.smoothing=n.smoothing,et}function z(U){var H,J,nt,it,ut,Q=[],j=[],Z={};if(Z.length=M.length,Z.crossLength=T.length,"b"===C)for(nt=Math.max(0,Math.min(k-2,U)),ut=Math.min(1,Math.max(0,U-nt)),Z.xy=function(G){return P.evalxy([],G,U)},Z.dxy=function(G,K){return P.dxydi([],G,nt,K,ut)},H=0;H<F;H++)Q[H]=E[U*O][H],j[H]=d[U*O][H];else for(J=Math.max(0,Math.min(N-2,U)),it=Math.min(1,Math.max(0,U-J)),Z.xy=function(G){return P.evalxy([],U,G)},Z.dxy=function(G,K){return P.dxydj([],J,G,it,K)},H=0;H<D;H++)Q[H]=E[H][U*O],j[H]=d[H][U*O];return Z.axisLetter=C,Z.axis=b,Z.crossAxis=n,Z.value=M[U],Z.constvar=u,Z.index=U,Z.x=Q,Z.y=j,Z.smoothing=n.smoothing,Z}if("array"===b.tickmode){for(l=5e-15,c=(a=[Math.floor((M.length-1-b.arraytick0)/b.arraydtick*(1+l)),Math.ceil(-b.arraytick0/b.arraydtick/(1+l))].sort(function(U,H){return U-H}))[1]+1,f=s=a[0]-1;f<c;f++)!((e=b.arraytick0+b.arraydtick*f)<0||e>M.length-1)&&L.push(g(z(e),{color:b.gridcolor,width:b.gridwidth,dash:b.griddash}));for(f=s;f<c;f++)if(r=b.arraytick0+b.arraydtick*f,w=Math.min(r+b.arraydtick,M.length-1),!(r<0||r>M.length-1||w<0||w>M.length-1))for(p=M[r],o=M[w],y=0;y<b.minorgridcount;y++)!((v=w-r)<=0)&&!((h=p+(o-p)*(y+1)/(b.minorgridcount+1)*(b.arraydtick/v))<M[0]||h>M[M.length-1])&&x.push(g(B(h),{color:b.minorgridcolor,width:b.minorgridwidth,dash:b.minorgriddash}));b.startline&&S.push(g(z(0),{color:b.startlinecolor,width:b.startlinewidth})),b.endline&&S.push(g(z(M.length-1),{color:b.endlinecolor,width:b.endlinewidth}))}else{for(l=5e-15,c=(a=[Math.floor((M[M.length-1]-b.tick0)/b.dtick*(1+l)),Math.ceil((M[0]-b.tick0)/b.dtick/(1+l))].sort(function(U,H){return U-H}))[1],f=s=a[0];f<=c;f++)L.push(g(B(m=b.tick0+b.dtick*f),{color:b.gridcolor,width:b.gridwidth,dash:b.griddash}));for(f=s-1;f<c+1;f++)for(m=b.tick0+b.dtick*f,y=0;y<b.minorgridcount;y++)!((h=m+b.dtick*(y+1)/(b.minorgridcount+1))<M[0]||h>M[M.length-1])&&x.push(g(B(h),{color:b.minorgridcolor,width:b.minorgridwidth,dash:b.minorgriddash}));b.startline&&S.push(g(B(M[0]),{color:b.startlinecolor,width:b.startlinewidth})),b.endline&&S.push(g(B(M[M.length-1]),{color:b.endlinecolor,width:b.endlinewidth}))}}},83311:function(q,W,t){"use strict";var A=t(89298),g=t(1426).extendFlat;q.exports=function(P,C){var u,y,l,a=C._labels=[],s=C._gridlines;for(u=0;u<s.length;u++)l=s[u],-1!==["start","both"].indexOf(C.showticklabels)&&(y=A.tickText(C,l.value),g(y,{prefix:undefined,suffix:undefined,endAnchor:!0,xy:l.xy(0),dxy:l.dxy(0,0),axis:l.axis,length:l.crossAxis.length,font:l.axis.tickfont,isFirst:0===u,isLast:u===s.length-1}),a.push(y)),-1!==["end","both"].indexOf(C.showticklabels)&&(y=A.tickText(C,l.value),g(y,{endAnchor:!1,xy:l.xy(l.crossLength-1),dxy:l.dxy(l.crossLength-2,1),axis:l.axis,length:l.crossAxis.length,font:l.axis.tickfont,isFirst:0===u,isLast:u===s.length-1}),a.push(y))}},42048:function(q){"use strict";q.exports=function(A,g,i,P){var C=A[0]-g[0],u=A[1]-g[1],y=i[0]-g[0],e=i[1]-g[1],r=Math.pow(C*C+u*u,.25),l=Math.pow(y*y+e*e,.25),a=(l*l*C-r*r*y)*P,s=(l*l*u-r*r*e)*P,c=l*(r+l)*3,f=r*(r+l)*3;return[[g[0]+(c&&a/c),g[1]+(c&&s/c)],[g[0]-(f&&a/f),g[1]-(f&&s/f)]]}},53824:function(q,W,t){"use strict";var A=t(71828).isArrayOrTypedArray;q.exports=function(g,i,P){var C,u,y,e,l,a=[],s=A(g)?g.length:g,c=A(i)?i.length:i,f=A(g)?g:null,m=A(i)?i:null;f&&(y=(f.length-1)/(f[f.length-1]-f[0])/(s-1)),m&&(e=(m.length-1)/(m[m.length-1]-m[0])/(c-1));var h,w=1/0,p=-1/0;for(u=0;u<c;u++)for(a[u]=[],l=m?(m[u]-m[0])*e:u/(c-1),C=0;C<s;C++)h=(f?(f[C]-f[0])*y:C/(s-1))-l*P,w=Math.min(h,w),p=Math.max(h,p),a[u][C]=h;var o=1/(p-w),v=-w*o;for(u=0;u<c;u++)for(C=0;C<s;C++)a[u][C]=o*a[u][C]+v;return a}},45664:function(q,W,t){"use strict";var A=t(42048),g=t(71828).ensureArray;function i(P,C,u){return[(2*(-.5*u[0]+1.5*C[0])+P[0])/3,(2*(-.5*u[1]+1.5*C[1])+P[1])/3]}q.exports=function(C,u,y,e,r,l){var a,s,c,f,m,h,w,p,o,v,M=y[0].length,b=y.length,L=r?3*M-2:M,x=l?3*b-2:b;for(C=g(C,x),u=g(u,x),c=0;c<x;c++)C[c]=g(C[c],L),u[c]=g(u[c],L);for(s=0,f=0;s<b;s++,f+=l?3:1)for(m=C[f],h=u[f],w=y[s],p=e[s],a=0,c=0;a<M;a++,c+=r?3:1)m[c]=w[a],h[c]=p[a];if(r)for(s=0,f=0;s<b;s++,f+=l?3:1){for(a=1,c=3;a<M-1;a++,c+=3)o=A([y[s][a-1],e[s][a-1]],[y[s][a],e[s][a]],[y[s][a+1],e[s][a+1]],r),C[f][c-1]=o[0][0],u[f][c-1]=o[0][1],C[f][c+1]=o[1][0],u[f][c+1]=o[1][1];v=i([C[f][0],u[f][0]],[C[f][2],u[f][2]],[C[f][3],u[f][3]]),C[f][1]=v[0],u[f][1]=v[1],v=i([C[f][L-1],u[f][L-1]],[C[f][L-3],u[f][L-3]],[C[f][L-4],u[f][L-4]]),C[f][L-2]=v[0],u[f][L-2]=v[1]}if(l)for(c=0;c<L;c++){for(f=3;f<x-3;f+=3)o=A([C[f-3][c],u[f-3][c]],[C[f][c],u[f][c]],[C[f+3][c],u[f+3][c]],l),C[f-1][c]=o[0][0],u[f-1][c]=o[0][1],C[f+1][c]=o[1][0],u[f+1][c]=o[1][1];v=i([C[0][c],u[0][c]],[C[2][c],u[2][c]],[C[3][c],u[3][c]]),C[1][c]=v[0],u[1][c]=v[1],v=i([C[x-1][c],u[x-1][c]],[C[x-3][c],u[x-3][c]],[C[x-4][c],u[x-4][c]]),C[x-2][c]=v[0],u[x-2][c]=v[1]}if(r&&l)for(f=1;f<x;f+=(f+1)%3==0?2:1){for(c=3;c<L-3;c+=3)o=A([C[f][c-3],u[f][c-3]],[C[f][c],u[f][c]],[C[f][c+3],u[f][c+3]],r),C[f][c-1]=.5*(C[f][c-1]+o[0][0]),u[f][c-1]=.5*(u[f][c-1]+o[0][1]),C[f][c+1]=.5*(C[f][c+1]+o[1][0]),u[f][c+1]=.5*(u[f][c+1]+o[1][1]);v=i([C[f][0],u[f][0]],[C[f][2],u[f][2]],[C[f][3],u[f][3]]),C[f][1]=.5*(C[f][1]+v[0]),u[f][1]=.5*(u[f][1]+v[1]),v=i([C[f][L-1],u[f][L-1]],[C[f][L-3],u[f][L-3]],[C[f][L-4],u[f][L-4]]),C[f][L-2]=.5*(C[f][L-2]+v[0]),u[f][L-2]=.5*(u[f][L-2]+v[1])}return[C,u]}},35509:function(q){"use strict";q.exports={RELATIVE_CULL_TOLERANCE:1e-6}},54495:function(q){"use strict";q.exports=function(W,t,A){return t&&A?function(g,i,P,C,u){var a,s;g||(g=[]),i*=3,P*=3;var c=C*C,f=1-C,m=f*f,h=f*C*2,w=-3*m,p=3*(m-h),o=3*(h-c),v=3*c,M=u*u,b=M*u,L=1-u,x=L*L,S=x*L;for(s=0;s<W.length;s++)g[s]=S*(w*(a=W[s])[P][i]+p*a[P][i+1]+o*a[P][i+2]+v*a[P][i+3])+3*(x*u*(w*a[P+1][i]+p*a[P+1][i+1]+o*a[P+1][i+2]+v*a[P+1][i+3])+L*M*(w*a[P+2][i]+p*a[P+2][i+1]+o*a[P+2][i+2]+v*a[P+2][i+3]))+b*(w*a[P+3][i]+p*a[P+3][i+1]+o*a[P+3][i+2]+v*a[P+3][i+3]);return g}:t?function(g,i,P,C,u){var r,l;g||(g=[]),i*=3;var a=C*C,s=1-C,c=s*s,f=s*C*2,m=-3*c,h=3*(c-f),w=3*(f-a),p=3*a,o=1-u;for(r=0;r<W.length;r++)g[r]=o*(m*(l=W[r])[P][i]+h*l[P][i+1]+w*l[P][i+2]+p*l[P][i+3])+u*(m*l[P+1][i]+h*l[P+1][i+1]+w*l[P+1][i+2]+p*l[P+1][i+3]);return g}:A?function(g,i,P,C,u){var a,s;g||(g=[]),P*=3;var c=u*u,f=c*u,m=1-u,h=m*m,w=h*m;for(a=0;a<W.length;a++)g[a]=w*((s=W[a])[P][i+1]-s[P][i])+3*(h*u*(s[P+1][i+1]-s[P+1][i])+m*c*(s[P+2][i+1]-s[P+2][i]))+f*(s[P+3][i+1]-s[P+3][i]);return g}:function(g,i,P,C,u){g||(g=[]);var r,l,a=1-u;for(r=0;r<W.length;r++)g[r]=a*((l=W[r])[P][i+1]-l[P][i])+u*(l[P+1][i+1]-l[P+1][i]);return g}}},73057:function(q){"use strict";q.exports=function(W,t,A){return t&&A?function(g,i,P,C,u){var a,s;g||(g=[]),i*=3,P*=3;var c=C*C,f=c*C,m=1-C,h=m*m,w=h*m,p=u*u,o=1-u,v=o*o,M=o*u*2,b=-3*v,L=3*(v-M),x=3*(M-p),S=3*p;for(s=0;s<W.length;s++)g[s]=w*(b*(a=W[s])[P][i]+L*a[P+1][i]+x*a[P+2][i]+S*a[P+3][i])+3*(h*C*(b*a[P][i+1]+L*a[P+1][i+1]+x*a[P+2][i+1]+S*a[P+3][i+1])+m*c*(b*a[P][i+2]+L*a[P+1][i+2]+x*a[P+2][i+2]+S*a[P+3][i+2]))+f*(b*a[P][i+3]+L*a[P+1][i+3]+x*a[P+2][i+3]+S*a[P+3][i+3]);return g}:t?function(g,i,P,C,u){var a,s;g||(g=[]),i*=3;var c=u*u,f=c*u,m=1-u,h=m*m,w=h*m;for(a=0;a<W.length;a++)g[a]=w*((s=W[a])[P+1][i]-s[P][i])+3*(h*u*(s[P+1][i+1]-s[P][i+1])+m*c*(s[P+1][i+2]-s[P][i+2]))+f*(s[P+1][i+3]-s[P][i+3]);return g}:A?function(g,i,P,C,u){var r,l;g||(g=[]),P*=3;var a=1-C,s=u*u,c=1-u,f=c*c,m=c*u*2,h=-3*f,w=3*(f-m),p=3*(m-s),o=3*s;for(r=0;r<W.length;r++)g[r]=a*(h*(l=W[r])[P][i]+w*l[P+1][i]+p*l[P+2][i]+o*l[P+3][i])+C*(h*l[P][i+1]+w*l[P+1][i+1]+p*l[P+2][i+1]+o*l[P+3][i+1]);return g}:function(g,i,P,C,u){g||(g=[]);var r,l,a=1-C;for(r=0;r<W.length;r++)g[r]=a*((l=W[r])[P+1][i]-l[P][i])+C*(l[P+1][i+1]-l[P][i+1]);return g}}},20349:function(q){"use strict";q.exports=function(W,t,A,g,i){var P=t-2,C=A-2;return g&&i?function(u,y,e){u||(u=[]);var c,f,m=Math.max(0,Math.min(Math.floor(y),P)),h=Math.max(0,Math.min(Math.floor(e),C)),w=Math.max(0,Math.min(1,y-m)),p=Math.max(0,Math.min(1,e-h));m*=3,h*=3;var o=w*w,v=o*w,M=1-w,b=M*M,L=b*M,x=p*p,S=x*p,T=1-p,n=T*T,E=n*T;for(f=0;f<W.length;f++)u[f]=E*(L*(c=W[f])[h][m]+3*(b*w*c[h][m+1]+M*o*c[h][m+2])+v*c[h][m+3])+3*(n*p*(L*c[h+1][m]+3*(b*w*c[h+1][m+1]+M*o*c[h+1][m+2])+v*c[h+1][m+3])+T*x*(L*c[h+2][m]+3*(b*w*c[h+2][m+1]+M*o*c[h+2][m+2])+v*c[h+2][m+3]))+S*(L*c[h+3][m]+3*(b*w*c[h+3][m+1]+M*o*c[h+3][m+2])+v*c[h+3][m+3]);return u}:g?function(u,y,e){u||(u=[]);var w,p,r=Math.max(0,Math.min(Math.floor(y),P)),l=Math.max(0,Math.min(Math.floor(e),C)),a=Math.max(0,Math.min(1,y-r)),s=Math.max(0,Math.min(1,e-l));r*=3;var o=a*a,v=o*a,M=1-a,b=M*M,L=b*M,x=1-s;for(w=0;w<W.length;w++)u[w]=L*(x*(p=W[w])[l][r]+s*p[l+1][r])+3*(b*a*(x*p[l][r+1]+s*p[l+1][r+1])+M*o*(x*p[l][r+2]+s*p[l+1][r+1]))+v*(x*p[l][r+3]+s*p[l+1][r+1]);return u}:i?function(u,y,e){u||(u=[]);var w,p,r=Math.max(0,Math.min(Math.floor(y),P)),l=Math.max(0,Math.min(Math.floor(e),C)),a=Math.max(0,Math.min(1,y-r)),s=Math.max(0,Math.min(1,e-l));l*=3;var o=s*s,v=o*s,M=1-s,b=M*M,L=b*M,x=1-a;for(w=0;w<W.length;w++)u[w]=L*(x*(p=W[w])[l][r]+a*p[l][r+1])+3*(b*s*(x*p[l+1][r]+a*p[l+1][r+1])+M*o*(x*p[l+2][r]+a*p[l+2][r+1]))+v*(x*p[l+3][r]+a*p[l+3][r+1]);return u}:function(u,y,e){u||(u=[]);var m,h,r=Math.max(0,Math.min(Math.floor(y),P)),l=Math.max(0,Math.min(Math.floor(e),C)),a=Math.max(0,Math.min(1,y-r)),s=Math.max(0,Math.min(1,e-l)),w=1-s,p=1-a;for(m=0;m<W.length;m++)u[m]=w*(p*(h=W[m])[l][r]+a*h[l][r+1])+s*(p*h[l+1][r]+a*h[l+1][r+1]);return u}}},92087:function(q,W,t){"use strict";var A=t(71828),g=t(19237),i=t(13145),P=t(99798),C=t(22399);q.exports=function(y,e,r,l){function a(f,m){return A.coerce(y,e,P,f,m)}e._clipPathId="clip"+e.uid+"carpet";var s=a("color",C.defaultLine);A.coerceFont(a,"font"),a("carpet"),i(y,e,l,a,s),e.a&&e.b?(e.a.length<3&&(e.aaxis.smoothing=0),e.b.length<3&&(e.baxis.smoothing=0),g(y,e,a)||(e.visible=!1),e._cheater&&a("cheaterslope")):e.visible=!1}},21462:function(q,W,t){"use strict";q.exports={attributes:t(99798),supplyDefaults:t(92087),plot:t(89740),calc:t(25281),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:t(93612),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},22882:function(q){"use strict";q.exports=function(W,t){for(var g,A=W._fullData.length,i=0;i<A;i++){var P=W._fullData[i];if(P.index!==t.index&&"carpet"===P.type&&(g||(g=P),P.carpet===t.carpet))return P}return g}},67961:function(q){"use strict";q.exports=function(t,A,g){if(0===t.length)return"";var i,P=[],C=g?3:1;for(i=0;i<t.length;i+=C)P.push(t[i]+","+A[i]),g&&i<t.length-C&&(P.push("C"),P.push([t[i+1]+","+A[i+1],t[i+2]+","+A[i+2]+" "].join(" ")));return P.join(g?"":"L")}},27669:function(q,W,t){"use strict";var A=t(71828).isArrayOrTypedArray;q.exports=function(i,P,C){var u;for(A(i)?i.length>P.length&&(i=i.slice(0,P.length)):i=[],u=0;u<P.length;u++)i[u]=C(P[u]);return i}},11651:function(q){"use strict";q.exports=function(t,A,g,i,P,C){var u=P[0]*t.dpdx(A),y=P[1]*t.dpdy(g),e=1,r=1;if(C){var l=Math.sqrt(P[0]*P[0]+P[1]*P[1]),a=Math.sqrt(C[0]*C[0]+C[1]*C[1]);r=Math.max(0,(P[0]*C[0]+P[1]*C[1])/l/a)}var c=180*Math.atan2(y,u)/Math.PI;return c<-90?(c+=180,e=-e):c>90&&(c-=180,e=-e),{angle:c,flip:e,p:t.c2p(i,A,g),offsetMultplier:r}}},89740:function(q,W,t){"use strict";var A=t(39898),g=t(91424),i=t(27669),P=t(67961),C=t(11651),u=t(63893),y=t(71828),e=y.strRotate,r=y.strTranslate,l=t(18783);function s(p,o,v,M,b,L,x){var S="const-"+b+"-lines",T=v.selectAll("."+S).data(L);T.enter().append("path").classed(S,!0).style("vector-effect",x?"none":"non-scaling-stroke"),T.each(function(n){var E=n,F=E.y,D=i([],E.x,p.c2p),N=i([],F,o.c2p),k="M"+P(D,N,E.smoothing);A.select(this).attr("d",k).style("stroke-width",E.width).style("stroke",E.color).style("stroke-dasharray",g.dashStyle(E.dash,E.width)).style("fill","none")}),T.exit().remove()}function c(p,o,v,M,b,L,x,S){var T=L.selectAll("text."+S).data(x);T.enter().append("text").classed(S,!0);var n=0,E={};return T.each(function(d,F){var D;if("auto"===d.axis.tickangle)D=C(M,o,v,d.xy,d.dxy);else{var N=(d.axis.tickangle+180)*Math.PI/180;D=C(M,o,v,d.xy,[Math.cos(N),Math.sin(N)])}F||(E={angle:D.angle,flip:D.flip});var k=(d.endAnchor?-1:1)*D.flip,O=A.select(this).attr({"text-anchor":k>0?"start":"end","data-notex":1}).call(g.font,d.font).text(d.text).call(u.convertToTspans,p),B=g.bBox(this);O.attr("transform",r(D.p[0],D.p[1])+e(D.angle)+r(d.axis.labelpadding*k,.3*B.height)),n=Math.max(n,B.width+d.axis.labelpadding)}),T.exit().remove(),E.maxExtent=n,E}q.exports=function(o,v,M,b){var L=o._context.staticPlot,x=v.xaxis,S=v.yaxis,n=o._fullLayout._clips;y.makeTraceGroups(b,M,"trace").each(function(E){var d=A.select(this),F=E[0],D=F.trace,N=D.aaxis,k=D.baxis,O=y.ensureSingle(d,"g","minorlayer"),B=y.ensureSingle(d,"g","majorlayer"),z=y.ensureSingle(d,"g","boundarylayer"),U=y.ensureSingle(d,"g","labellayer");d.style("opacity",D.opacity),s(x,S,B,0,"a",N._gridlines,!0),s(x,S,B,0,"b",k._gridlines,!0),s(x,S,O,0,"a",N._minorgridlines,!0),s(x,S,O,0,"b",k._minorgridlines,!0),s(x,S,z,0,"a-boundary",N._boundarylines,L),s(x,S,z,0,"b-boundary",k._boundarylines,L);var H=c(o,x,S,D,0,U,N._labels,"a-label"),J=c(o,x,S,D,0,U,k._labels,"b-label");(function f(p,o,v,M,b,L,x,S){var T,n,E,d,F=y.aggNums(Math.min,null,v.a),D=y.aggNums(Math.max,null,v.a),N=y.aggNums(Math.min,null,v.b),k=y.aggNums(Math.max,null,v.b);E=v.ab2xy(T=.5*(F+D),n=N,!0),d=v.dxyda_rough(T,n),void 0===x.angle&&y.extendFlat(x,C(v,b,L,E,v.dxydb_rough(T,n))),w(p,o,v,0,E,d,v.aaxis,b,L,x,"a-title"),E=v.ab2xy(T=F,n=.5*(N+k),!0),d=v.dxydb_rough(T,n),void 0===S.angle&&y.extendFlat(S,C(v,b,L,E,v.dxyda_rough(T,n))),w(p,o,v,0,E,d,v.baxis,b,L,S,"b-title")})(o,U,D,0,x,S,H,J),function a(p,o,v,M,b){var L,x,S,T,n=v.select("#"+p._clipPathId);n.size()||(n=v.append("clipPath").classed("carpetclip",!0));var E=y.ensureSingle(n,"path","carpetboundary"),d=o.clipsegments,F=[];for(T=0;T<d.length;T++)x=i([],(L=d[T]).x,M.c2p),S=i([],L.y,b.c2p),F.push(P(x,S,L.bicubic));var D="M"+F.join("L")+"Z";n.attr("id",p._clipPathId),E.attr("d",D)}(D,F,n,x,S)})};var m=l.LINE_SPACING,h=(1-l.MID_SHIFT)/m+1;function w(p,o,v,M,b,L,x,S,T,n,E){var d=[];x.title.text&&d.push(x.title.text);var F=o.selectAll("text."+E).data(d),D=n.maxExtent;F.enter().append("text").classed(E,!0),F.each(function(){var N=C(v,S,T,b,L);-1===["start","both"].indexOf(x.showticklabels)&&(D=0);var k=x.title.font.size;D+=k+x.title.offset;var B=(n.angle+(n.flip<0?180:0)-N.angle+450)%360,z=B>90&&B<270,U=A.select(this);U.text(x.title.text).call(u.convertToTspans,p),z&&(D=(-u.lineCount(U)+h)*m*k-D),U.attr("transform",r(N.p[0],N.p[1])+e(N.angle)+r(0,D)).attr("text-anchor","middle").call(g.font,x.title.font)}),F.exit().remove()}},11435:function(q,W,t){"use strict";var A=t(35509),g=t(65888).findBin,i=t(45664),P=t(20349),C=t(54495),u=t(73057);q.exports=function(e){var r=e._a,l=e._b,a=r.length,s=l.length,c=e.aaxis,f=e.baxis,m=r[0],h=r[a-1],w=l[0],p=l[s-1],o=r[r.length-1]-r[0],v=l[l.length-1]-l[0],M=o*A.RELATIVE_CULL_TOLERANCE,b=v*A.RELATIVE_CULL_TOLERANCE;m-=M,h+=M,w-=b,p+=b,e.isVisible=function(L,x){return L>m&&L<h&&x>w&&x<p},e.isOccluded=function(L,x){return L<m||L>h||x<w||x>p},e.setScale=function(){var S=i(e._xctrl,e._yctrl,e._x,e._y,c.smoothing,f.smoothing);e._xctrl=S[0],e._yctrl=S[1],e.evalxy=P([e._xctrl,e._yctrl],a,s,c.smoothing,f.smoothing),e.dxydi=C([e._xctrl,e._yctrl],c.smoothing,f.smoothing),e.dxydj=u([e._xctrl,e._yctrl],c.smoothing,f.smoothing)},e.i2a=function(L){var x=Math.max(0,Math.floor(L[0]),a-2),S=L[0]-x;return(1-S)*r[x]+S*r[x+1]},e.j2b=function(L){var x=Math.max(0,Math.floor(L[1]),a-2),S=L[1]-x;return(1-S)*l[x]+S*l[x+1]},e.ij2ab=function(L){return[e.i2a(L[0]),e.j2b(L[1])]},e.a2i=function(L){var x=Math.max(0,Math.min(g(L,r),a-2)),S=r[x];return Math.max(0,Math.min(a-1,x+(L-S)/(r[x+1]-S)))},e.b2j=function(L){var x=Math.max(0,Math.min(g(L,l),s-2)),S=l[x];return Math.max(0,Math.min(s-1,x+(L-S)/(l[x+1]-S)))},e.ab2ij=function(L){return[e.a2i(L[0]),e.b2j(L[1])]},e.i2c=function(L,x){return e.evalxy([],L,x)},e.ab2xy=function(L,x,S){if(!S&&(L<r[0]||L>r[a-1]|x<l[0]||x>l[s-1]))return[!1,!1];var T=e.a2i(L),n=e.b2j(x),E=e.evalxy([],T,n);if(S){var N,k,O,B,d=0,F=0,D=[];L<r[0]?(N=0,k=0,d=(L-r[0])/(r[1]-r[0])):L>r[a-1]?(N=a-2,k=1,d=(L-r[a-1])/(r[a-1]-r[a-2])):k=T-(N=Math.max(0,Math.min(a-2,Math.floor(T)))),x<l[0]?(O=0,B=0,F=(x-l[0])/(l[1]-l[0])):x>l[s-1]?(O=s-2,B=1,F=(x-l[s-1])/(l[s-1]-l[s-2])):B=n-(O=Math.max(0,Math.min(s-2,Math.floor(n)))),d&&(e.dxydi(D,N,O,k,B),E[0]+=D[0]*d,E[1]+=D[1]*d),F&&(e.dxydj(D,N,O,k,B),E[0]+=D[0]*F,E[1]+=D[1]*F)}return E},e.c2p=function(L,x,S){return[x.c2p(L[0]),S.c2p(L[1])]},e.p2x=function(L,x,S){return[x.p2c(L[0]),S.p2c(L[1])]},e.dadi=function(L){var x=Math.max(0,Math.min(r.length-2,L));return r[x+1]-r[x]},e.dbdj=function(L){var x=Math.max(0,Math.min(l.length-2,L));return l[x+1]-l[x]},e.dxyda=function(L,x,S,T){var n=e.dxydi(null,L,x,S,T),E=e.dadi(L,S);return[n[0]/E,n[1]/E]},e.dxydb=function(L,x,S,T){var n=e.dxydj(null,L,x,S,T),E=e.dbdj(x,T);return[n[0]/E,n[1]/E]},e.dxyda_rough=function(L,x,S){var T=o*(S||.1),n=e.ab2xy(L+T,x,!0),E=e.ab2xy(L-T,x,!0);return[.5*(n[0]-E[0])/T,.5*(n[1]-E[1])/T]},e.dxydb_rough=function(L,x,S){var T=v*(S||.1),n=e.ab2xy(L,x+T,!0),E=e.ab2xy(L,x-T,!0);return[.5*(n[0]-E[0])/T,.5*(n[1]-E[1])/T]},e.dpdx=function(L){return L._m},e.dpdy=function(L){return L._m}}},72505:function(q,W,t){"use strict";var A=t(71828);q.exports=function(i,P,C){var u,y,e,r=[],l=[],a=i[0].length,s=i.length;var J,nt,ut,it,Q,f=0;for(u=0;u<a;u++)for(y=0;y<s;y++)void 0===i[y][u]&&(r.push(u),l.push(y),i[y][u]=(nt=y,ut=void 0,it=void 0,Q=void 0,it=0,Q=0,(J=u)>0&&void 0!==(ut=i[nt][J-1])&&(Q++,it+=ut),J<a-1&&void 0!==(ut=i[nt][J+1])&&(Q++,it+=ut),nt>0&&void 0!==(ut=i[nt-1][J])&&(Q++,it+=ut),nt<s-1&&void 0!==(ut=i[nt+1][J])&&(Q++,it+=ut),it/Math.max(1,Q))),f=Math.max(f,Math.abs(i[y][u]));if(!r.length)return i;var m,h,w,p,o,v,M,b,L,x,n=0,d=0,F=r.length;do{for(n=0,e=0;e<F;e++){y=l[e];var O,z,U,H,D=0,N=0;0===(u=r[e])?(U=Math.min(a-1,2),N+=(O=i[y][1])+(O-i[y][U])*(P[0]-(z=P[1]))/(z-P[U]),D++):u===a-1&&(U=Math.max(0,a-3),N+=(O=i[y][a-2])+(O-i[y][U])*(P[a-1]-(z=P[a-2]))/(z-P[U]),D++),(0===u||u===a-1)&&y>0&&y<s-1&&(N+=((h=C[y]-C[y-1])*i[y+1][u]+(m=C[y+1]-C[y])*i[y-1][u])/(h+m),D++),0===y?(H=Math.min(s-1,2),N+=(O=i[1][u])+(O-i[H][u])*(C[0]-(z=C[1]))/(z-C[H]),D++):y===s-1&&(H=Math.max(0,s-3),N+=(O=i[s-2][u])+(O-i[H][u])*(C[s-1]-(z=C[s-2]))/(z-C[H]),D++),(0===y||y===s-1)&&u>0&&u<a-1&&(N+=((h=P[u]-P[u-1])*i[y][u+1]+(m=P[u+1]-P[u])*i[y][u-1])/(h+m),D++),D?N/=D:N=((M=(w=P[u+1]-P[u])*(p=P[u]-P[u-1])*(w+p))*((v=C[y]-C[y-1])*i[y+1][u]+(o=C[y+1]-C[y])*i[y-1][u])+(b=o*v*(o+v))*(p*i[y][u+1]+w*i[y][u-1]))/(b*(p+w)+M*(v+o)),n+=(x=(L=N-i[y][u])/f)*x,i[y][u]+=L*(1+(D?0:.85))}n=Math.sqrt(n)}while(d++<100&&n>1e-5);return A.log("Smoother converged to",n,"after",d,"iterations"),i}},19237:function(q,W,t){"use strict";var A=t(71828).isArray1D;q.exports=function(i,P,C){var u=C("x"),y=u&&u.length,e=C("y"),r=e&&e.length;if(!y&&!r)return!1;if(P._cheater=!u,y&&!A(u)||r&&!A(e))P._length=null;else{var l=y?u.length:1/0;r&&(l=Math.min(l,e.length)),P.a&&P.a.length&&(l=Math.min(l,P.a.length)),P.b&&P.b.length&&(l=Math.min(l,P.b.length)),P._length=l}return!0}},69568:function(q,W,t){"use strict";var A=t(5386).fF,g=t(19316),i=t(50693),P=t(9012),C=t(22399).defaultLine,u=t(1426).extendFlat,y=g.marker.line;q.exports=u({locations:{valType:"data_array",editType:"calc"},locationmode:g.locationmode,z:{valType:"data_array",editType:"calc"},geojson:u({},g.geojson,{}),featureidkey:g.featureidkey,text:u({},g.text,{}),hovertext:u({},g.hovertext,{}),marker:{line:{color:u({},y.color,{dflt:C}),width:u({},y.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:g.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:g.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:u({},P.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:A(),showlegend:u({},P.showlegend,{dflt:!1})},i("",{cLetter:"z",editTypeOverride:"calc"}))},38675:function(q,W,t){"use strict";var A=t(92770),g=t(50606).BADNUM,i=t(78803),P=t(75225),C=t(66279);function u(y){return y&&"string"==typeof y}q.exports=function(e,r){var s,l=r._length,a=new Array(l);s=r.geojson?function(w){return u(w)||A(w)}:u;for(var c=0;c<l;c++){var f=a[c]={},m=r.locations[c],h=r.z[c];s(m)&&A(h)?(f.loc=m,f.z=h):(f.loc=null,f.z=g),f.index=c}return P(a,r),i(e,r,{vals:r.z,containerStr:"",cLetter:"z"}),C(a,r),a}},61869:function(q,W,t){"use strict";var A=t(71828),g=t(1586),i=t(69568);q.exports=function(C,u,y,e){function r(h,w){return A.coerce(C,u,i,h,w)}var l=r("locations"),a=r("z");if(l&&l.length&&A.isArrayOrTypedArray(a)&&a.length){u._length=Math.min(l.length,a.length);var c,s=r("geojson");("string"==typeof s&&""!==s||A.isPlainObject(s))&&(c="geojson-id"),"geojson-id"===r("locationmode",c)&&r("featureidkey"),r("text"),r("hovertext"),r("hovertemplate"),r("marker.line.width")&&r("marker.line.color"),r("marker.opacity"),g(C,u,e,r,{prefix:"",cLetter:"z"}),A.coerceSelectionMarkerOpacity(u,r)}else u.visible=!1}},92069:function(q){"use strict";q.exports=function(t,A,g,i,P){t.location=A.location,t.z=A.z;var C=i[P];return C.fIn&&C.fIn.properties&&(t.properties=C.fIn.properties),t.ct=C.ct,t}},42300:function(q,W,t){"use strict";var A=t(89298),g=t(69568),i=t(71828).fillText;q.exports=function(u,y,e){var s,c,f,m,r=u.cd,l=r[0].trace,a=u.subplot,h=[y,e],w=[y+360,e];for(c=0;c<r.length;c++)if(m=!1,(s=r[c])._polygons){for(f=0;f<s._polygons.length;f++)s._polygons[f].contains(h)&&(m=!m),s._polygons[f].contains(w)&&(m=!m);if(m)break}if(m&&s)return u.x0=u.x1=u.xa.c2p(s.ct),u.y0=u.y1=u.ya.c2p(s.ct),u.index=s.index,u.location=s.loc,u.z=s.z,u.zLabel=A.tickText(a.mockAxis,a.mockAxis.c2l(s.z),"hover").text,u.hovertemplate=s.hovertemplate,function P(C,u,y){if(!u.hovertemplate){var e=y.hi||u.hoverinfo,r=String(y.loc),l="all"===e?g.hoverinfo.flags:e.split("+"),a=-1!==l.indexOf("name"),s=-1!==l.indexOf("location"),c=-1!==l.indexOf("z"),f=-1!==l.indexOf("text"),h=[];!a&&s?C.nameOverride=r:(a&&(C.nameOverride=u.name),s&&h.push(r)),c&&h.push(C.zLabel),f&&i(y,u,h),C.extraText=h.join("<br>")}}(u,l,s),[u]}},51319:function(q,W,t){"use strict";q.exports={attributes:t(69568),supplyDefaults:t(61869),colorbar:t(61243),calc:t(38675),calcGeoJSON:t(99841).calcGeoJSON,plot:t(99841).plot,style:t(99636).style,styleOnSelect:t(99636).styleOnSelect,hoverPoints:t(42300),eventData:t(92069),selectPoints:t(81253),moduleType:"trace",name:"choropleth",basePlotModule:t(44622),categories:["geo","noOpacity","showLegend"],meta:{}}},99841:function(q,W,t){"use strict";var A=t(39898),g=t(71828),i=t(41327),P=t(90973).getTopojsonFeatures,C=t(71739).findExtremes,u=t(99636).style;q.exports={calcGeoJSON:function e(r,l){for(var a=r[0].trace,s=l[a.geo],c=s._subplot,f=a.locationmode,m=a._length,h="geojson-id"===f?i.extractTraceFeature(r):P(a,c.topojson),w=[],p=[],o=0;o<m;o++){var v=r[o],M="geojson-id"===f?v.fOut:i.locationToFeature(f,v.loc,h);if(M){v.geojson=M,v.ct=M.properties.ct,v._polygons=i.feature2polygons(M);var b=i.computeBbox(M);w.push(b[0],b[2]),p.push(b[1],b[3])}else v.geojson=null}if("geojson"===s.fitbounds&&"geojson-id"===f){var L=i.computeBbox(i.getTraceGeojson(a));w=[L[0],L[2]],p=[L[1],L[3]]}var x={padded:!0};a._extremes.lon=C(s.lonaxis._ax,w,x),a._extremes.lat=C(s.lataxis._ax,p,x)},plot:function y(r,l,a){var s=l.layers.backplot.select(".choroplethlayer");g.makeTraceGroups(s,a,"trace choropleth").each(function(c){var m=A.select(this).selectAll("path.choroplethlocation").data(g.identity);m.enter().append("path").classed("choroplethlocation",!0),m.exit().remove(),u(r,c)})}}},81253:function(q){"use strict";q.exports=function(t,A){var u,y,e,r,l,g=t.cd,i=t.xaxis,P=t.yaxis,C=[];if(!1===A)for(u=0;u<g.length;u++)g[u].selected=0;else for(u=0;u<g.length;u++)(e=(y=g[u]).ct)&&(r=i.c2p(e),l=P.c2p(e),A.contains([r,l],null,u,t)?(C.push({pointNumber:u,lon:e[0],lat:e[1]}),y.selected=1):y.selected=0);return C}},99636:function(q,W,t){"use strict";var A=t(39898),g=t(7901),i=t(91424),P=t(21081);function u(e,r){var l=r[0].trace,s=r[0].node3.selectAll(".choroplethlocation"),c=l.marker||{},f=c.line||{},m=P.makeColorScaleFuncFromTrace(l);s.each(function(h){A.select(this).attr("fill",m(h.z)).call(g.stroke,h.mlc||f.color).call(i.dashLine,"",h.mlw||f.width||0).style("opacity",c.opacity)}),i.selectedPointStyle(s,l)}q.exports={style:function C(e,r){r&&u(0,r)},styleOnSelect:function y(e,r){var a=r[0].trace;a.selectedpoints?i.selectedPointStyle(r[0].node3.selectAll(".choroplethlocation"),a):u(0,r)}}},64496:function(q,W,t){"use strict";var A=t(69568),g=t(50693),i=t(5386).fF,P=t(9012),C=t(1426).extendFlat;q.exports=C({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:C({},A.featureidkey,{}),below:{valType:"string",editType:"plot"},text:A.text,hovertext:A.hovertext,marker:{line:{color:C({},A.marker.line.color,{editType:"plot"}),width:C({},A.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:C({},A.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:C({},A.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:C({},A.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:A.hoverinfo,hovertemplate:i({},{keys:["properties"]}),showlegend:C({},P.showlegend,{dflt:!1})},g("",{cLetter:"z",editTypeOverride:"calc"}))},82004:function(q,W,t){"use strict";var A=t(92770),g=t(71828),i=t(21081),P=t(91424),C=t(18214).makeBlank,u=t(41327);function e(r){var s,l=r[0].trace,a=l._opts;if(l.selectedpoints){for(var c=P.makeSelectedPointStyleFns(l),f=0;f<r.length;f++){var m=r[f];m.fOut&&(m.fOut.properties.mo2=c.selectedOpacityFn(m))}s={type:"identity",property:"mo2"}}else s=g.isArrayOrTypedArray(l.marker.opacity)?{type:"identity",property:"mo"}:l.marker.opacity;return g.extendFlat(a.fill.paint,{"fill-opacity":s}),g.extendFlat(a.line.paint,{"line-opacity":s}),a}q.exports={convert:function y(r){var l=r[0].trace,a=!0===l.visible&&0!==l._length,s={layout:{visibility:"none"},paint:{}},c={layout:{visibility:"none"},paint:{}},f=l._opts={fill:s,line:c,geojson:C()};if(!a)return f;var m=u.extractTraceFeature(r);if(!m)return f;var o,v,M,h=i.makeColorScaleFuncFromTrace(l),w=l.marker,p=w.line||{};g.isArrayOrTypedArray(w.opacity)&&(o=function(n){var E=n.mo;return A(E)?+g.constrain(E,0,1):0}),g.isArrayOrTypedArray(p.color)&&(v=function(n){return n.mlc}),g.isArrayOrTypedArray(p.width)&&(M=function(n){return n.mlw});for(var b=0;b<r.length;b++){var L=r[b],x=L.fOut;if(x){var S=x.properties;S.fc=h(L.z),o&&(S.mo=o(L)),v&&(S.mlc=v(L)),M&&(S.mlw=M(L)),L.ct=S.ct,L._polygons=u.feature2polygons(x)}}var T=o?{type:"identity",property:"mo"}:w.opacity;return g.extendFlat(s.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":T}),g.extendFlat(c.paint,{"line-color":v?{type:"identity",property:"mlc"}:p.color,"line-width":M?{type:"identity",property:"mlw"}:p.width,"line-opacity":T}),s.layout.visibility="visible",c.layout.visibility="visible",f.geojson={type:"FeatureCollection",features:m},e(r),f},convertOnSelect:e}},22654:function(q,W,t){"use strict";var A=t(71828),g=t(1586),i=t(64496);q.exports=function(C,u,y,e){function r(f,m){return A.coerce(C,u,i,f,m)}var l=r("locations"),a=r("z"),s=r("geojson");A.isArrayOrTypedArray(l)&&l.length&&A.isArrayOrTypedArray(a)&&a.length&&("string"==typeof s&&""!==s||A.isPlainObject(s))?(r("featureidkey"),u._length=Math.min(l.length,a.length),r("below"),r("text"),r("hovertext"),r("hovertemplate"),r("marker.line.width")&&r("marker.line.color"),r("marker.opacity"),g(C,u,e,r,{prefix:"",cLetter:"z"}),A.coerceSelectionMarkerOpacity(u,r)):u.visible=!1}},57516:function(q,W,t){"use strict";q.exports={attributes:t(64496),supplyDefaults:t(22654),colorbar:t(61243),calc:t(38675),plot:t(7852),hoverPoints:t(42300),eventData:t(92069),selectPoints:t(81253),styleOnSelect:function(A,g){g&&g[0].trace._glTrace.updateOnSelect(g)},getBelow:function(A,g){for(var i=g.getMapLayers(),P=i.length-2;P>=0;P--){var C=i[P].id;if("string"==typeof C&&0===C.indexOf("water"))for(var u=P+1;u<i.length;u++)if("string"==typeof(C=i[u].id)&&-1===C.indexOf("plotly-"))return C}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:t(50101),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},7852:function(q,W,t){"use strict";var A=t(82004).convert,g=t(82004).convertOnSelect,i=t(77734).traceLayerPrefix;function P(u,y){this.type="choroplethmapbox",this.subplot=u,this.uid=y,this.sourceId="source-"+y,this.layerList=[["fill",i+y+"-fill"],["line",i+y+"-line"]],this.below=null}var C=P.prototype;C.update=function(u){this._update(A(u)),u[0].trace._glTrace=this},C.updateOnSelect=function(u){this._update(g(u))},C._update=function(u){var y=this.subplot,e=this.layerList,r=y.belowLookup["trace-"+this.uid];y.map.getSource(this.sourceId).setData(u.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(u,r),this.below=r);for(var l=0;l<e.length;l++){var a=e[l],c=a[1],f=u[a[0]];y.setOptions(c,"setLayoutProperty",f.layout),"visible"===f.layout.visibility&&y.setOptions(c,"setPaintProperty",f.paint)}},C._addLayers=function(u,y){for(var e=this.subplot,r=this.layerList,l=this.sourceId,a=0;a<r.length;a++){var s=r[a],c=s[0],f=u[c];e.addLayer({type:c,id:s[1],source:l,layout:f.layout,paint:f.paint},y)}},C._removeLayers=function(){for(var u=this.subplot.map,y=this.layerList,e=y.length-1;e>=0;e--)u.removeLayer(y[e][1])},C.dispose=function(){var u=this.subplot.map;this._removeLayers(),u.removeSource(this.sourceId)},q.exports=function(y,e){var r=e[0].trace,l=new P(y,r.uid),a=l.sourceId,s=A(e),c=l.below=y.belowLookup["trace-"+r.uid];return y.map.addSource(a,{type:"geojson",data:s.geojson}),l._addLayers(s,c),e[0].trace._glTrace=l,l}},12674:function(q,W,t){"use strict";var A=t(50693),g=t(12663).axisHoverFormat,i=t(5386).fF,P=t(2418),C=t(9012),u=t(1426).extendFlat,y={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:i({editType:"calc"},{keys:["norm"]}),uhoverformat:g("u",1),vhoverformat:g("v",1),whoverformat:g("w",1),xhoverformat:g("x"),yhoverformat:g("y"),zhoverformat:g("z"),showlegend:u({},C.showlegend,{dflt:!1})};u(y,A("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(r){y[r]=P[r]}),y.hoverinfo=u({},C.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),y.transforms=void 0,q.exports=y},31371:function(q,W,t){"use strict";var A=t(78803);q.exports=function(i,P){for(var C=P.u,u=P.v,y=P.w,e=Math.min(P.x.length,P.y.length,P.z.length,C.length,u.length,y.length),r=-1/0,l=1/0,a=0;a<e;a++){var s=C[a],c=u[a],f=y[a],m=Math.sqrt(s*s+c*c+f*f);r=Math.max(r,m),l=Math.min(l,m)}P._len=e,P._normMax=r,A(i,P,{vals:[l,r],containerStr:"",cLetter:"c"})}},5453:function(q,W,t){"use strict";var A=t(9330).gl_cone3d,g=t(9330).gl_cone3d.createConeMesh,i=t(71828).simpleMap,P=t(81697).parseColorScale,C=t(21081).extractOpts,u=t(90060);function y(f,m){this.scene=f,this.uid=m,this.mesh=null,this.data=null}var e=y.prototype;e.handlePick=function(f){if(f.object===this.mesh){var m=f.index=f.data.index,o=this.data.u[m],v=this.data.v[m],M=this.data.w[m];f.traceCoordinate=[this.data.x[m],this.data.y[m],this.data.z[m],o,v,M,Math.sqrt(o*o+v*v+M*M)];var b=this.data.hovertext||this.data.text;return Array.isArray(b)&&void 0!==b[m]?f.textLabel=b[m]:b&&(f.textLabel=b),!0}};var r={xaxis:0,yaxis:1,zaxis:2},l={tip:1,tail:0,cm:.25,center:.5},a={tip:1,tail:1,cm:.75,center:.5};function s(f,m){var h=f.fullSceneLayout,w=f.dataScale,p={};function o(L,x){var S=h[x],T=w[r[x]];return i(L,function(n){return S.d2l(n)*T})}p.vectors=u(o(m.u,"xaxis"),o(m.v,"yaxis"),o(m.w,"zaxis"),m._len),p.positions=u(o(m.x,"xaxis"),o(m.y,"yaxis"),o(m.z,"zaxis"),m._len);var v=C(m);p.colormap=P(m),p.vertexIntensityBounds=[v.min/m._normMax,v.max/m._normMax],p.coneOffset=l[m.anchor],p.coneSize="scaled"===m.sizemode?m.sizeref||.5:m.sizeref&&m._normMax?m.sizeref/m._normMax:.5;var M=A(p),b=m.lightposition;return M.lightPosition=[b.x,b.y,b.z],M.ambient=m.lighting.ambient,M.diffuse=m.lighting.diffuse,M.specular=m.lighting.specular,M.roughness=m.lighting.roughness,M.fresnel=m.lighting.fresnel,M.opacity=m.opacity,m._pad=a[m.anchor]*M.vectorScale*M.coneScale*m._normMax,M}e.update=function(f){this.data=f;var m=s(this.scene,f);this.mesh.update(m)},e.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},q.exports=function c(f,m){var h=f.glplot.gl,w=s(f,m),p=g(h,w),o=new y(f,m.uid);return o.mesh=p,o.data=m,p._trace=o,f.glplot.add(p),o}},91750:function(q,W,t){"use strict";var A=t(71828),g=t(1586),i=t(12674);q.exports=function(C,u,y,e){function r(h,w){return A.coerce(C,u,i,h,w)}var l=r("u"),a=r("v"),s=r("w"),c=r("x"),f=r("y"),m=r("z");l&&l.length&&a&&a.length&&s&&s.length&&c&&c.length&&f&&f.length&&m&&m.length?(r("sizeref"),r("sizemode"),r("anchor"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),g(C,u,e,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),u._length=null):u.visible=!1}},98128:function(q,W,t){"use strict";q.exports={moduleType:"trace",name:"cone",basePlotModule:t(58547),categories:["gl3d","showLegend"],attributes:t(12674),supplyDefaults:t(91750),colorbar:{min:"cmin",max:"cmax"},calc:t(31371),plot:t(5453),eventData:function(A,g){return A.norm=g.traceCoordinate[6],A},meta:{}}},70600:function(q,W,t){"use strict";var A=t(21606),g=t(82196),i=t(12663),P=i.axisHoverFormat,C=i.descriptionOnlyNumbers,u=t(50693),y=t(79952).P,e=t(41940),r=t(1426).extendFlat,l=t(74808),a=l.COMPARISON_OPS2,s=l.INTERVAL_OPS,c=g.line;q.exports=r({z:A.z,x:A.x,x0:A.x0,dx:A.dx,y:A.y,y0:A.y0,dy:A.dy,xperiod:A.xperiod,yperiod:A.yperiod,xperiod0:g.xperiod0,yperiod0:g.yperiod0,xperiodalignment:A.xperiodalignment,yperiodalignment:A.yperiodalignment,text:A.text,hovertext:A.hovertext,transpose:A.transpose,xtype:A.xtype,ytype:A.ytype,xhoverformat:P("x"),yhoverformat:P("y"),zhoverformat:P("z",1),hovertemplate:A.hovertemplate,texttemplate:r({},A.texttemplate,{}),textfont:r({},A.textfont,{}),hoverongaps:A.hoverongaps,connectgaps:r({},A.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:e({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:C("contour label")},operation:{valType:"enumerated",values:[].concat(a).concat(s),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:r({},c.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:y,smoothing:r({},c.smoothing,{}),editType:"plot"}},u("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},27529:function(q,W,t){"use strict";var A=t(21081),g=t(90757),i=t(18670),P=t(53572);q.exports=function(u,y){var e=g(u,y),r=e[0].z;i(y,r);var s,l=y.contours,a=A.extractOpts(y);if("heatmap"===l.coloring&&a.auto&&!1===y.autocontour){var c=l.start,f=P(l),m=l.size||1,h=Math.floor((f-c)/m)+1;isFinite(m)||(m=1,h=1);var w=c-m/2;s=[w,w+h*m]}else s=r;return A.calc(u,y,{vals:s,cLetter:"z"}),e}},20083:function(q){"use strict";q.exports=function(W,t){var i,A=W[0],g=A.z;switch(t.type){case"levels":var P=Math.min(g[0][0],g[0][1]);for(i=0;i<W.length;i++){var C=W[i];C.prefixBoundary=!C.edgepaths.length&&(P>C.level||C.starts.length&&P===C.level)}break;case"constraint":if(A.prefixBoundary=!1,A.edgepaths.length)return;var u=A.x.length,y=A.y.length,e=-1/0,r=1/0;for(i=0;i<y;i++)r=Math.min(r,g[i][0]),r=Math.min(r,g[i][u-1]),e=Math.max(e,g[i][0]),e=Math.max(e,g[i][u-1]);for(i=1;i<u-1;i++)r=Math.min(r,g[0][i]),r=Math.min(r,g[y-1][i]),e=Math.max(e,g[0][i]),e=Math.max(e,g[y-1][i]);var a,s,l=t.value;switch(t._operation){case">":l>e&&(A.prefixBoundary=!0);break;case"<":(l<r||A.starts.length&&l===r)&&(A.prefixBoundary=!0);break;case"[]":a=Math.min(l[0],l[1]),((s=Math.max(l[0],l[1]))<r||a>e||A.starts.length&&s===r)&&(A.prefixBoundary=!0);break;case"][":a=Math.min(l[0],l[1]),s=Math.max(l[0],l[1]),a<r&&s>e&&(A.prefixBoundary=!0)}}}},90654:function(q,W,t){"use strict";var A=t(21081),g=t(86068),i=t(53572);q.exports={min:"zmin",max:"zmax",calc:function P(C,u,y){var e=u.contours,r=u.line,l=e.size||1,a=e.coloring,s=g(u,{isColorbar:!0});if("heatmap"===a){var c=A.extractOpts(u);y._fillgradient=c.reversescale?A.flipScale(c.colorscale):c.colorscale,y._zrange=[c.min,c.max]}else"fill"===a&&(y._fillcolor=s);y._line={color:"lines"===a?s:r.color,width:!1!==e.showlines?r.width:0,dash:r.dash},y._levels={start:e.start,end:i(e),size:l}}}},36914:function(q){"use strict";q.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},83179:function(q,W,t){"use strict";var A=t(92770),g=t(14523),i=t(7901),P=i.addOpacity,C=i.opacity,u=t(74808),y=u.CONSTRAINT_REDUCTION,e=u.COMPARISON_OPS2;q.exports=function(a,s,c,f,m,h){var p,o,v,w=s.contours,M=c("contours.operation");w._operation=y[M],function r(l,a){var s;-1===e.indexOf(a.operation)?(l("contours.value",[0,1]),Array.isArray(a.value)?a.value.length>2?a.value=a.value.slice(2):0===a.length?a.value=[0,1]:a.length<2?(s=parseFloat(a.value[0]),a.value=[s,s+1]):a.value=[parseFloat(a.value[0]),parseFloat(a.value[1])]:A(a.value)&&(s=parseFloat(a.value),a.value=[s,s+1])):(l("contours.value",0),A(a.value)||(a.value=Array.isArray(a.value)?parseFloat(a.value[0]):0))}(c,w),"="===M?p=w.showlines=!0:(p=c("contours.showlines"),v=c("fillcolor",P((a.line||{}).color||m,.5))),p&&(o=c("line.color",v&&C(v)?P(s.fillcolor,1):m),c("line.width",2),c("line.dash")),c("line.smoothing"),g(c,f,o,h)}},64237:function(q,W,t){"use strict";var A=t(74808),g=t(92770);function i(u,y){var r,e=Array.isArray(y);function l(a){return g(a)?+a:null}return-1!==A.COMPARISON_OPS2.indexOf(u)?r=l(e?y[0]:y):-1!==A.INTERVAL_OPS.indexOf(u)?r=e?[l(y[0]),l(y[1])]:[l(y),l(y)]:-1!==A.SET_OPS.indexOf(u)&&(r=e?y.map(l):[l(y)]),r}function P(u){return function(y){y=i(u,y);var e=Math.min(y[0],y[1]),r=Math.max(y[0],y[1]);return{start:e,end:r,size:r-e}}}function C(u){return function(y){return{start:y=i(u,y),end:1/0,size:1/0}}}q.exports={"[]":P("[]"),"][":P("]["),">":C(">"),"<":C("<"),"=":C("=")}},67217:function(q){"use strict";q.exports=function(t,A,g,i){var P=i("contours.start"),C=i("contours.end"),u=!1===P||!1===C,y=g("contours.size");((u?A.autocontour=!0:g("autocontour",!1))||!y)&&g("ncontours")}},84857:function(q,W,t){"use strict";var A=t(71828);function g(i){return A.extendFlat({},i,{edgepaths:A.extendDeep([],i.edgepaths),paths:A.extendDeep([],i.paths),starts:A.extendDeep([],i.starts)})}q.exports=function(i,P){var C,u,y,e=function(a){return a.reverse()},r=function(a){return a};switch(P){case"=":case"<":return i;case">":for(1!==i.length&&A.warn("Contour data invalid for the specified inequality operation."),u=i[0],C=0;C<u.edgepaths.length;C++)u.edgepaths[C]=e(u.edgepaths[C]);for(C=0;C<u.paths.length;C++)u.paths[C]=e(u.paths[C]);for(C=0;C<u.starts.length;C++)u.starts[C]=e(u.starts[C]);return i;case"][":var l=e;e=r,r=l;case"[]":for(2!==i.length&&A.warn("Contour data invalid for the specified inequality range operation."),u=g(i[0]),y=g(i[1]),C=0;C<u.edgepaths.length;C++)u.edgepaths[C]=e(u.edgepaths[C]);for(C=0;C<u.paths.length;C++)u.paths[C]=e(u.paths[C]);for(C=0;C<u.starts.length;C++)u.starts[C]=e(u.starts[C]);for(;y.edgepaths.length;)u.edgepaths.push(r(y.edgepaths.shift()));for(;y.paths.length;)u.paths.push(r(y.paths.shift()));for(;y.starts.length;)u.starts.push(r(y.starts.shift()));return[u]}}},13031:function(q,W,t){"use strict";var A=t(71828),g=t(67684),i=t(73927),P=t(83179),C=t(67217),u=t(8724),y=t(58623),e=t(70600);q.exports=function(l,a,s,c){function f(p,o){return A.coerce(l,a,e,p,o)}if(g(l,a,f,c)){i(l,a,c,f),f("xhoverformat"),f("yhoverformat"),f("text"),f("hovertext"),f("hoverongaps"),f("hovertemplate");var w="constraint"===f("contours.type");f("connectgaps",A.isArray1D(a.z)),w?P(l,a,f,c,s):(C(l,a,f,function m(p){return A.coerce2(l,a,e,p)}),u(l,a,f,c)),a.contours&&"heatmap"===a.contours.coloring&&y(f,c)}else a.visible=!1}},87558:function(q,W,t){"use strict";var A=t(71828),g=t(64237),i=t(53572);q.exports=function(C,u,y){for(var e="constraint"===C.type?g[C._operation](C.value):C,r=e.size,l=[],a=i(e),s=y.trace._carpetTrace,c=s?{xaxis:s.aaxis,yaxis:s.baxis,x:y.a,y:y.b}:{xaxis:u.xaxis,yaxis:u.yaxis,x:y.x,y:y.y},f=e.start;f<a;f+=r)if(l.push(A.extendFlat({level:f,crossings:{},starts:[],edgepaths:[],paths:[],z:y.z,smoothing:y.trace.line.smoothing},c)),l.length>1e3){A.warn("Too many contours, clipping at 1000",C);break}return l}},53572:function(q){"use strict";q.exports=function(t){return t.end+t.size/1e6}},81696:function(q,W,t){"use strict";var A=t(71828),g=t(36914);function i(e,r,l,a){return Math.abs(e[0]-r[0])<l&&Math.abs(e[1]-r[1])<a}function P(e,r){var l=e[2]-r[2],a=e[3]-r[3];return Math.sqrt(l*l+a*a)}function C(e,r,l,a,s){var M,c=r.join(","),f=e.crossings[c],m=function u(e,r,l){var a=0,s=0;return e>20&&r?208===e||1114===e?a=0===l[0]?1:-1:s=0===l[1]?1:-1:-1!==g.BOTTOMSTART.indexOf(e)?s=1:-1!==g.LEFTSTART.indexOf(e)?a=1:-1!==g.TOPSTART.indexOf(e)?s=-1:a=-1,[a,s]}(f,l,r),h=[y(e,r,[-m[0],-m[1]])],w=e.z.length,p=e.z[0].length,o=r.slice(),v=m.slice();for(M=0;M<1e4;M++){if(f>20?e.crossings[c]=g.SADDLEREMAINDER[f=g.CHOOSESADDLE[f][(m[0]||m[1])<0?0:1]]:delete e.crossings[c],!(m=g.NEWDELTA[f])){A.log("Found bad marching index:",f,r,e.level);break}if(h.push(y(e,r,m)),r[0]+=m[0],r[1]+=m[1],c=r.join(","),i(h[h.length-1],h[h.length-2],a,s)&&h.pop(),r[0]===o[0]&&r[1]===o[1]&&m[0]===v[0]&&m[1]===v[1]||l&&(m[0]&&(r[0]<0||r[0]>p-2)||m[1]&&(r[1]<0||r[1]>w-2)))break;f=e.crossings[c]}1e4===M&&A.log("Infinite loop in contour?");var d,F,D,N,k,O,B,z,U,H,J,x=i(h[0],h[h.length-1],a,s),S=0,T=.2*e.smoothing,n=[],E=0;for(M=1;M<h.length;M++)S+=B=P(h[M],h[M-1]),n.push(B);var nt=S/n.length*T;function it(j){return h[j%h.length]}for(M=h.length-2;M>=E;M--)if((d=n[M])<nt){for(D=0,F=M-1;F>=E&&d+n[F]<nt;F--)d+=n[F];if(x&&M===h.length-2)for(D=0;D<F&&d+n[D]<nt;D++)d+=n[D];k=M-F+D+1,O=Math.floor((M+F+D+2)/2),N=x||M!==h.length-2?x||-1!==F?k%2?it(O):[(it(O)[0]+it(O+1)[0])/2,(it(O)[1]+it(O+1)[1])/2]:h[0]:h[h.length-1],h.splice(F+1,M-F+1,N),M=F+1,D&&(E=D),x&&(M===h.length-2?h[D]=h[h.length-1]:0===M&&(h[h.length-1]=h[0]))}for(h.splice(0,E),M=0;M<h.length;M++)h[M].length=2;if(!(h.length<2))if(x)h.pop(),e.paths.push(h);else{l||A.log("Unclosed interior contour?",e.level,o.join(","),h.join("L"));var ut=!1;for(z=0;z<e.edgepaths.length;z++)if(H=e.edgepaths[z],!ut&&i(H[0],h[h.length-1],a,s)){h.pop(),ut=!0;var Q=!1;for(U=0;U<e.edgepaths.length;U++)if(i((J=e.edgepaths[U])[J.length-1],h[0],a,s)){Q=!0,h.shift(),e.edgepaths.splice(z,1),U===z?e.paths.push(h.concat(J)):(U>z&&U--,e.edgepaths[U]=J.concat(h,H));break}Q||(e.edgepaths[z]=h.concat(H))}for(z=0;z<e.edgepaths.length&&!ut;z++)i((H=e.edgepaths[z])[H.length-1],h[0],a,s)&&(h.shift(),e.edgepaths[z]=H.concat(h),ut=!0);ut||e.edgepaths.push(h)}}function y(e,r,l){var a=r[0]+Math.max(l[0],0),s=r[1]+Math.max(l[1],0),c=e.z[s][a],f=e.xaxis,m=e.yaxis;if(l[1]){var h=(e.level-c)/(e.z[s][a+1]-c),w=(1!==h?(1-h)*f.c2l(e.x[a]):0)+(0!==h?h*f.c2l(e.x[a+1]):0);return[f.c2p(f.l2c(w),!0),m.c2p(e.y[s],!0),a+h,s]}var p=(e.level-c)/(e.z[s+1][a]-c),o=(1!==p?(1-p)*m.c2l(e.y[s]):0)+(0!==p?p*m.c2l(e.y[s+1]):0);return[f.c2p(e.x[a],!0),m.c2p(m.l2c(o),!0),a,s+p]}q.exports=function(r,l,a){var s,f,m,h;for(l=l||.01,a=a||.01,f=0;f<r.length;f++){for(m=r[f],h=0;h<m.starts.length;h++)C(m,m.starts[h],"edge",l,a);for(s=0;Object.keys(m.crossings).length&&s<1e4;)s++,C(m,Object.keys(m.crossings)[0].split(",").map(Number),void 0,l,a);1e4===s&&A.log("Infinite loop in contour?")}}},52421:function(q,W,t){"use strict";var A=t(7901),g=t(46248);q.exports=function(P,C,u,y,e){e||(e={}),e.isContour=!0;var r=g(P,C,u,y,e);return r&&r.forEach(function(l){var a=l.trace;"constraint"===a.contours.type&&(a.fillcolor&&A.opacity(a.fillcolor)?l.color=A.addOpacity(a.fillcolor,1):a.contours.showlines&&A.opacity(a.line.color)&&(l.color=A.addOpacity(a.line.color,1)))}),r}},99442:function(q,W,t){"use strict";q.exports={attributes:t(70600),supplyDefaults:t(13031),calc:t(27529),plot:t(29854).plot,style:t(84426),colorbar:t(90654),hoverPoints:t(52421),moduleType:"trace",name:"contour",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},14523:function(q,W,t){"use strict";var A=t(71828);q.exports=function(i,P,C,u){if(u||(u={}),i("contours.showlabels")){var e=P.font;A.coerceFont(i,"contours.labelfont",{family:e.family,size:e.size,color:C}),i("contours.labelformat")}!1!==u.hasHover&&i("zhoverformat")}},86068:function(q,W,t){"use strict";var A=t(39898),g=t(21081),i=t(53572);q.exports=function(C){var u=C.contours,y=u.start,e=i(u),r=u.size||1,l=Math.floor((e-y)/r)+1,a="lines"===u.coloring?0:1,s=g.extractOpts(C);isFinite(r)||(r=1,l=1);var w,p,c=s.reversescale?g.flipScale(s.colorscale):s.colorscale,f=c.length,m=new Array(f),h=new Array(f),o=s.min,v=s.max;if("heatmap"===u.coloring){for(p=0;p<f;p++)m[p]=(w=c[p])[0]*(v-o)+o,h[p]=w[1];var M=A.extent([o,v,u.start,u.start+r*(l-1)]),b=M[o<v?0:1],L=M[o<v?1:0];b!==o&&(m.splice(0,0,b),h.splice(0,0,h[0])),L!==v&&(m.push(L),h.push(h[h.length-1]))}else{var x=C._input&&"number"==typeof C._input.zmin&&"number"==typeof C._input.zmax;for(x&&(y<=o||e>=v)&&(y<=o&&(y=o),e>=v&&(e=v),l=Math.floor((e-y)/r)+1,a=0),p=0;p<f;p++)m[p]=((w=c[p])[0]*(l+a-1)-a/2)*r+y,h[p]=w[1];(x||C.autocontour)&&(m[0]>o&&(m.unshift(o),h.unshift(h[0])),m[m.length-1]<v&&(m.push(v),h.push(h[h.length-1])))}return g.makeColorScaleFunc({domain:m,range:h},{noNumericCheck:!0})}},87678:function(q,W,t){"use strict";var A=t(36914);function g(i,P){var C=(P[0][0]>i?0:1)+(P[0][1]>i?0:2)+(P[1][1]>i?0:4)+(P[1][0]>i?0:8);return 5===C||10===C?i>(P[0][0]+P[0][1]+P[1][0]+P[1][1])/4?5===C?713:1114:5===C?104:208:15===C?0:C}q.exports=function(P){var r,l,a,s,c,f,m,h,w,C=P[0].z,u=C.length,y=C[0].length,e=2===u||2===y;for(l=0;l<u-1;l++)for(s=[],0===l&&(s=s.concat(A.BOTTOMSTART)),l===u-2&&(s=s.concat(A.TOPSTART)),r=0;r<y-1;r++)for(a=s.slice(),0===r&&(a=a.concat(A.LEFTSTART)),r===y-2&&(a=a.concat(A.RIGHTSTART)),c=r+","+l,f=[[C[l][r],C[l][r+1]],[C[l+1][r],C[l+1][r+1]]],w=0;w<P.length;w++)(m=g((h=P[w]).level,f))&&(h.crossings[c]=m,-1!==a.indexOf(m)&&(h.starts.push([r,l]),e&&-1!==a.indexOf(m,a.indexOf(m)+1)&&h.starts.push([r,l])))}},29854:function(q,W,t){"use strict";var A=t(39898),g=t(71828),i=t(91424),P=t(21081),C=t(63893),u=t(89298),y=t(21994),e=t(50347),r=t(87678),l=t(81696),a=t(87558),s=t(84857),c=t(20083),f=t(36914),m=f.LABELOPTIMIZER;function p(L,x){var d,F,D,N,k,O,S="",T=0,n=L.edgepaths.map(function(nt,it){return it}),E=!0;function z(nt){return Math.abs(nt[1]-x[2][1])<.01}function U(nt){return Math.abs(nt[0]-x[0][0])<.01}function H(nt){return Math.abs(nt[0]-x[2][0])<.01}for(;n.length;){for(O=i.smoothopen(L.edgepaths[T],L.smoothing),S+=E?O:O.replace(/^M/,"L"),n.splice(n.indexOf(T),1),d=L.edgepaths[T][L.edgepaths[T].length-1],N=-1,D=0;D<4;D++){if(!d){g.log("Missing end?",T,L);break}for(Math.abs(d[1]-x[0][1])<.01&&!H(d)?F=x[1]:U(d)?F=x[0]:z(d)?F=x[3]:H(d)&&(F=x[2]),k=0;k<L.edgepaths.length;k++){var J=L.edgepaths[k][0];Math.abs(d[0]-F[0])<.01?Math.abs(d[0]-J[0])<.01&&(J[1]-d[1])*(F[1]-J[1])>=0&&(F=J,N=k):Math.abs(d[1]-F[1])<.01?Math.abs(d[1]-J[1])<.01&&(J[0]-d[0])*(F[0]-J[0])>=0&&(F=J,N=k):g.log("endpt to newendpt is not vert. or horz.",d,F,J)}if(d=F,N>=0)break;S+="L"+F}if(N===L.edgepaths.length){g.log("unclosed perimeter path");break}(E=-1===n.indexOf(T=N))&&(T=n[0],S+="Z")}for(T=0;T<L.paths.length;T++)S+=i.smoothclosed(L.paths[T],L.smoothing);return S}function v(L,x,S,T){var n=x.width/2,E=x.height/2,d=L.x,F=L.y,D=L.theta,N=Math.cos(D)*n,k=Math.sin(D)*n,O=(d>T.center?T.right-d:d-T.left)/(N+Math.abs(Math.sin(D)*E)),B=(F>T.middle?T.bottom-F:F-T.top)/(Math.abs(k)+Math.cos(D)*E);if(O<1||B<1)return 1/0;var z=m.EDGECOST*(1/(O-1)+1/(B-1));z+=m.ANGLECOST*D*D;for(var U=d-N,H=F-k,J=d+N,nt=F+k,it=0;it<S.length;it++){var ut=S[it],Q=Math.cos(ut.theta)*ut.width/2,j=Math.sin(ut.theta)*ut.width/2,Z=2*g.segmentDistance(U,H,J,nt,ut.x-Q,ut.y-j,ut.x+Q,ut.y+j)/(x.height+ut.height),G=ut.level===x.level,K=G?m.SAMELEVELDISTANCE:1;if(Z<=K)return 1/0;z+=m.NEIGHBORCOST*(G?m.SAMELEVELFACTOR:1)/(Z-K)}return z}function b(L){var E,F,x=L.trace._emptypoints,S=[],T=L.z.length,n=L.z[0].length,d=[];for(E=0;E<n;E++)d.push(1);for(E=0;E<T;E++)S.push(d.slice());for(E=0;E<x.length;E++)S[(F=x[E])[0]][F[1]]=0;return L.zmask=S,S}W.plot=function(x,S,T,n){var E=S.xaxis,d=S.yaxis;g.makeTraceGroups(n,T,"contour").each(function(F){var D=A.select(this),N=F[0],O=N.x,B=N.y,z=N.trace.contours,U=a(z,S,N),H=g.ensureSingle(D,"g","heatmapcoloring"),J=[];"heatmap"===z.coloring&&(J=[F]),e(x,S,J,H),r(U),l(U);var nt=E.c2p(O[0],!0),it=E.c2p(O[O.length-1],!0),ut=d.c2p(B[0],!0),Q=d.c2p(B[B.length-1],!0),j=[[nt,Q],[it,Q],[it,ut],[nt,ut]],Z=U;"constraint"===z.type&&(Z=s(U,z._operation)),function h(L,x,S){var n=g.ensureSingle(L,"g","contourbg").selectAll("path").data("fill"===S.coloring?[0]:[]);n.enter().append("path"),n.exit().remove(),n.attr("d","M"+x.join("L")+"Z").style("stroke","none")}(D,j,z),function w(L,x,S,T){var n="fill"===T.coloring||"constraint"===T.type&&"="!==T._operation,E="M"+S.join("L")+"Z";n&&c(x,T);var F=g.ensureSingle(L,"g","contourfill").selectAll("path").data(n?x:[]);F.enter().append("path"),F.exit().remove(),F.each(function(D){var N=(D.prefixBoundary?E:"")+p(D,S);N?A.select(this).attr("d",N).style("stroke","none"):A.select(this).remove()})}(D,Z,j,z),function o(L,x,S,T,n){var E=S._context.staticPlot,d=g.ensureSingle(L,"g","contourlines"),F=!1!==n.showlines,D=n.showlabels,N=F&&D,k=W.createLines(d,F||D,x,E),O=W.createLineClip(d,N,S,T.trace.uid),B=L.selectAll("g.contourlabels").data(D?[0]:[]);if(B.exit().remove(),B.enter().append("g").classed("contourlabels",!0),D){var z=[],U=[];g.clearLocationCache();var H=W.labelFormatter(S,T),J=i.tester.append("text").attr("data-notex",1).call(i.font,n.labelfont),nt=x[0].xaxis,it=x[0].yaxis,ut=nt._length,Q=it._length,j=nt.range,Z=it.range,G=g.aggNums(Math.min,null,T.x),K=g.aggNums(Math.max,null,T.x),at=g.aggNums(Math.min,null,T.y),$=g.aggNums(Math.max,null,T.y),X=Math.max(nt.c2p(G,!0),0),rt=Math.min(nt.c2p(K,!0),ut),et=Math.max(it.c2p($,!0),0),st=Math.min(it.c2p(at,!0),Q),dt={};j[0]<j[1]?(dt.left=X,dt.right=rt):(dt.left=rt,dt.right=X),Z[0]<Z[1]?(dt.top=et,dt.bottom=st):(dt.top=st,dt.bottom=et),dt.middle=(dt.top+dt.bottom)/2,dt.center=(dt.left+dt.right)/2,z.push([[dt.left,dt.top],[dt.right,dt.top],[dt.right,dt.bottom],[dt.left,dt.bottom]]);var bt=Math.sqrt(ut*ut+Q*Q),gt=f.LABELDISTANCE*bt/Math.max(1,x.length/f.LABELINCREASE);k.each(function(Lt){var It=W.calcTextOpts(Lt.level,H,J,S);A.select(this).selectAll("path").each(function(){var xt=g.getVisibleSegment(this,dt,It.height/2);if(xt&&!(xt.len<(It.width+It.height)*f.LABELMIN))for(var At=Math.min(Math.ceil(xt.len/gt),f.LABELMAX),Gt=0;Gt<At;Gt++){var Wt=W.findBestTextLocation(this,xt,It,U,dt);if(!Wt)break;W.addLabelData(Wt,It,U,z)}})}),J.remove(),W.drawLabels(B,U,S,O,N?z:null)}D&&!F&&k.remove()}(D,U,x,N,z),function M(L,x,S,T,n){var E=T.trace,F="clip"+E.uid,D=S._fullLayout._clips.selectAll("#"+F).data(E.connectgaps?[]:[0]);if(D.enter().append("clipPath").classed("contourclip",!0).attr("id",F),D.exit().remove(),!1===E.connectgaps){var N={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:x.xaxis,yaxis:x.yaxis,x:T.x,y:T.y,z:b(T),smoothing:0};r([N]),l([N]),c([N],{type:"levels"}),g.ensureSingle(D,"path","").attr("d",(N.prefixBoundary?"M"+n.join("L")+"Z":"")+p(N,n))}else F=null;i.setClipUrl(L,F,S)}(D,S,x,N,j)})},W.createLines=function(L,x,S,T){var n=S[0].smoothing,E=L.selectAll("g.contourlevel").data(x?S:[]);if(E.exit().remove(),E.enter().append("g").classed("contourlevel",!0),x){var d=E.selectAll("path.openline").data(function(D){return D.pedgepaths||D.edgepaths});d.exit().remove(),d.enter().append("path").classed("openline",!0),d.attr("d",function(D){return i.smoothopen(D,n)}).style("stroke-miterlimit",1).style("vector-effect",T?"none":"non-scaling-stroke");var F=E.selectAll("path.closedline").data(function(D){return D.ppaths||D.paths});F.exit().remove(),F.enter().append("path").classed("closedline",!0),F.attr("d",function(D){return i.smoothclosed(D,n)}).style("stroke-miterlimit",1).style("vector-effect",T?"none":"non-scaling-stroke")}return E},W.createLineClip=function(L,x,S,T){var E=x?"clipline"+T:null,d=S._fullLayout._clips.selectAll("#"+E).data(x?[0]:[]);return d.exit().remove(),d.enter().append("clipPath").classed("contourlineclip",!0).attr("id",E),i.setClipUrl(L,E,S),d},W.labelFormatter=function(L,x){var S=L._fullLayout,T=x.trace,n=T.contours,E={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(n.labelformat)E.tickformat=n.labelformat,y(E,S);else{var d=P.extractOpts(T);if(d&&d.colorbar&&d.colorbar._axis)E=d.colorbar._axis;else{if("constraint"===n.type){var F=n.value;E.range=Array.isArray(F)?[F[0],F[F.length-1]]:[F,F]}else E.range=[n.start,n.end],E.nticks=(n.end-n.start)/n.size;E.range[0]===E.range[1]&&(E.range[1]+=E.range[0]||1),E.nticks||(E.nticks=1e3),y(E,S),u.prepTicks(E),E._tmin=null,E._tmax=null}}return function(D){return u.tickText(E,D).text}},W.calcTextOpts=function(L,x,S,T){var n=x(L);S.text(n).call(C.convertToTspans,T);var E=S.node(),d=i.bBox(E,!0);return{text:n,width:d.width,height:d.height,fontSize:+E.style["font-size"].replace("px",""),level:L,dy:(d.top+d.bottom)/2}},W.findBestTextLocation=function(L,x,S,T,n){var d,F,D,N,k,E=S.width;x.isClosed?(d=x.min+(F=x.len/m.INITIALSEARCHPOINTS)/2,D=x.max):(d=x.min+(F=(x.len-E)/(m.INITIALSEARCHPOINTS+1))+E/2,D=x.max-(F+E)/2);for(var O=1/0,B=0;B<m.ITERATIONS;B++){for(var z=d;z<D;z+=F){var U=g.getTextLocation(L,x.total,z,E),H=v(U,S,T,n);H<O&&(O=H,k=U,N=z)}if(O>2*m.MAXCOST)break;B&&(F/=2),D=(d=N-F/2)+1.5*F}if(O<=m.MAXCOST)return k},W.addLabelData=function(L,x,S,T){var n=x.fontSize,E=x.width+n/3,d=Math.max(0,x.height-n/3),F=L.x,D=L.y,N=L.theta,k=Math.sin(N),O=Math.cos(N),B=function(U,H){return[F+U*O-H*k,D+U*k+H*O]},z=[B(-E/2,-d/2),B(-E/2,d/2),B(E/2,d/2),B(E/2,-d/2)];S.push({text:x.text,x:F,y:D,dy:x.dy,theta:N,level:x.level,width:E,height:d}),T.push(z)},W.drawLabels=function(L,x,S,T,n){var E=L.selectAll("text").data(x,function(N){return N.text+","+N.x+","+N.y+","+N.theta});if(E.exit().remove(),E.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(N){var k=N.x+Math.sin(N.theta)*N.dy,O=N.y-Math.cos(N.theta)*N.dy;A.select(this).text(N.text).attr({x:k,y:O,transform:"rotate("+180*N.theta/Math.PI+" "+k+" "+O+")"}).call(C.convertToTspans,S)}),n){for(var d="",F=0;F<n.length;F++)d+="M"+n[F].join("L")+"Z";g.ensureSingle(T,"path","").attr("d",d)}}},18670:function(q,W,t){"use strict";var A=t(89298),g=t(71828);function i(P,C,u){var y={type:"linear",range:[P,C]};return A.autoTicks(y,(C-P)/(u||15)),y}q.exports=function(C,u){var y=C.contours;if(C.autocontour){var e=C.zmin,r=C.zmax;(C.zauto||void 0===e)&&(e=g.aggNums(Math.min,null,u)),(C.zauto||void 0===r)&&(r=g.aggNums(Math.max,null,u));var l=i(e,r,C.ncontours);y.size=l.dtick,y.start=A.tickFirst(l),l.range.reverse(),y.end=A.tickFirst(l),y.start===e&&(y.start+=y.size),y.end===r&&(y.end-=y.size),y.start>y.end&&(y.start=y.end=(y.start+y.end)/2),C._input.contours||(C._input.contours={}),g.extendFlat(C._input.contours,{start:y.start,end:y.end,size:y.size}),C._input.autocontour=!0}else if("constraint"!==y.type){var f,a=y.start,s=y.end,c=C._input.contours;a>s&&(y.start=c.start=s,s=y.end=c.end=a,a=y.start),y.size>0||(f=a===s?1:i(a,s,C.ncontours).dtick,c.size=y.size=f)}}},84426:function(q,W,t){"use strict";var A=t(39898),g=t(91424),i=t(70035),P=t(86068);q.exports=function(u){var y=A.select(u).selectAll("g.contour");y.style("opacity",function(e){return e[0].trace.opacity}),y.each(function(e){var r=A.select(this),l=e[0].trace,a=l.contours,s=l.line,c=a.size||1,f=a.start,m="constraint"===a.type,h=!m&&"lines"===a.coloring,w=!m&&"fill"===a.coloring,p=h||w?P(l):null;r.selectAll("g.contourlevel").each(function(M){A.select(this).selectAll("path").call(g.lineGroupStyle,s.width,h?p(M.level):s.color,s.dash)});var o=a.labelfont;if(r.selectAll("g.contourlabels text").each(function(M){g.font(A.select(this),{family:o.family,size:o.size,color:o.color||(h?p(M.level):s.color)})}),m)r.selectAll("g.contourfill path").style("fill",l.fillcolor);else if(w){var v;r.selectAll("g.contourfill path").style("fill",function(M){return void 0===v&&(v=M.level),p(M.level+.5*c)}),void 0===v&&(v=f),r.selectAll("g.contourbg path").style("fill",p(v-.5*c))}}),i(u)}},8724:function(q,W,t){"use strict";var A=t(1586),g=t(14523);q.exports=function(P,C,u,y,e){var l,r=u("contours.coloring"),a="";"fill"===r&&(l=u("contours.showlines")),!1!==l&&("lines"!==r&&(a=u("line.color","#000")),u("line.width",.5),u("line.dash")),"none"!==r&&(!0!==P.showlegend&&(C.showlegend=!1),C._dfltShowLegend=!1,A(P,C,y,u,{prefix:"",cLetter:"z"})),u("line.smoothing"),g(u,y,a,e)}},88085:function(q,W,t){"use strict";var A=t(21606),g=t(70600),i=t(50693),P=t(1426).extendFlat,C=g.contours;q.exports=P({carpet:{valType:"string",editType:"calc"},z:A.z,a:A.x,a0:A.x0,da:A.dx,b:A.y,b0:A.y0,db:A.dy,text:A.text,hovertext:A.hovertext,transpose:A.transpose,atype:A.xtype,btype:A.ytype,fillcolor:g.fillcolor,autocontour:g.autocontour,ncontours:g.ncontours,contours:{type:C.type,start:C.start,end:C.end,size:C.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:C.showlines,showlabels:C.showlabels,labelfont:C.labelfont,labelformat:C.labelformat,operation:C.operation,value:C.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:g.line.color,width:g.line.width,dash:g.line.dash,smoothing:g.line.smoothing,editType:"plot"},transforms:void 0},i("",{cLetter:"z",autoColorDflt:!1}))},59885:function(q,W,t){"use strict";var A=t(78803),g=t(71828),i=t(68296),P=t(4742),C=t(824),u=t(43907),y=t(70769),e=t(75005),r=t(22882),l=t(18670);q.exports=function(c,f){var m=f._carpetTrace=r(c,f);if(m&&m.visible&&"legendonly"!==m.visible){if(!f.a||!f.b){var h=c.data[m.index],w=c.data[f.index];w.a||(w.a=h.a),w.b||(w.b=h.b),e(w,f,f._defaultColor,c._fullLayout)}var p=function a(s,c){var w,p,o,v,M,b,L,f=c._carpetTrace,m=f.aaxis,h=f.baxis;m._minDtick=0,h._minDtick=0,g.isArray1D(c.z)&&i(c,m,h,"a","b",["z"]),w=c._a=c._a||c.a,v=c._b=c._b||c.b,w=w?m.makeCalcdata(c,"_a"):[],v=v?h.makeCalcdata(c,"_b"):[],p=c.a0||0,o=c.da||1,M=c.b0||0,b=c.db||1,L=c._z=P(c._z||c.z,c.transpose),c._emptypoints=u(L),C(L,c._emptypoints);var x=g.maxRowLength(L),d={a:y(c,"scaled"===c.xtype?"":w,p,o,x,m),b:y(c,"scaled"===c.ytype?"":v,M,b,L.length,h),z:L};return"levels"===c.contours.type&&"none"!==c.contours.coloring&&A(s,c,{vals:L,containerStr:"",cLetter:"z"}),[d]}(c,f);return l(f,f._z),p}}},75005:function(q,W,t){"use strict";var A=t(71828),g=t(67684),i=t(88085),P=t(83179),C=t(67217),u=t(8724);q.exports=function(e,r,l,a){function s(h,w){return A.coerce(e,r,i,h,w)}if(s("carpet"),e.a&&e.b){if(!g(e,r,s,a,"a","b"))return void(r.visible=!1);s("text"),"constraint"===s("contours.type")?P(e,r,s,a,l,{hasHover:!1}):(C(e,r,s,function c(h){return A.coerce2(e,r,i,h)}),u(e,r,s,a,{hasHover:!1}))}else r._defaultColor=l,r._length=null}},93740:function(q,W,t){"use strict";q.exports={attributes:t(88085),supplyDefaults:t(75005),colorbar:t(90654),calc:t(59885),plot:t(51048),style:t(84426),moduleType:"trace",name:"contourcarpet",basePlotModule:t(93612),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},51048:function(q,W,t){"use strict";var A=t(39898),g=t(27669),i=t(67961),P=t(91424),C=t(71828),u=t(87678),y=t(81696),e=t(29854),r=t(36914),l=t(84857),a=t(87558),s=t(20083),c=t(22882),f=t(4536);function h(x,S,T,n,E,d,F){var D=T._context.staticPlot,N=C.ensureSingle(x,"g","contourlines"),k=!1!==E.showlines,O=E.showlabels,B=k&&O,z=e.createLines(N,k||O,S,D),U=e.createLineClip(N,B,T,n.trace.uid),H=x.selectAll("g.contourlabels").data(O?[0]:[]);if(H.exit().remove(),H.enter().append("g").classed("contourlabels",!0),O){var it=d.xaxis._length,ut=d.yaxis._length,Q=[[[0,0],[it,0],[it,ut],[0,ut]]],j=[];C.clearLocationCache();var Z=e.labelFormatter(T,n),G=P.tester.append("text").attr("data-notex",1).call(P.font,E.labelfont),K={left:0,right:it,center:it/2,top:0,bottom:ut,middle:ut/2},at=Math.sqrt(it*it+ut*ut),$=r.LABELDISTANCE*at/Math.max(1,S.length/r.LABELINCREASE);z.each(function(X){var rt=e.calcTextOpts(X.level,Z,G,T);A.select(this).selectAll("path").each(function(et){var dt=C.getVisibleSegment(this,K,rt.height/2);if(dt&&(function w(x,S,T,n,E,d){for(var F,D=0;D<T.pedgepaths.length;D++)S===T.pedgepaths[D]&&(F=T.edgepaths[D]);if(F){var N=E.a[0],k=E.a[E.a.length-1],O=E.b[0],B=E.b[E.b.length-1],U=p(x,0,1),H=p(x,n.total,n.total-1),J=z(F[0],U),nt=n.total-z(F[F.length-1],H);n.min<J&&(n.min=J),n.max>nt&&(n.max=nt),n.len=n.max-n.min}function z(it,ut){var j,Q=0,Z=.1;return(Math.abs(it[0]-N)<Z||Math.abs(it[0]-k)<Z)&&(j=o(E.dxydb_rough(it[0],it[1],Z)),Q=Math.max(Q,d*v(ut,j)/2)),(Math.abs(it[1]-O)<Z||Math.abs(it[1]-B)<Z)&&(j=o(E.dxyda_rough(it[0],it[1],Z)),Q=Math.max(Q,d*v(ut,j)/2)),Q}}(this,et,X,dt,F,rt.height),!(dt.len<(rt.width+rt.height)*r.LABELMIN)))for(var bt=Math.min(Math.ceil(dt.len/$),r.LABELMAX),gt=0;gt<bt;gt++){var Lt=e.findBestTextLocation(this,dt,rt,j,K);if(!Lt)break;e.addLabelData(Lt,rt,j,Q)}})}),G.remove(),e.drawLabels(H,j,T,U,B?Q:null)}O&&!k&&z.remove()}function p(x,S,T){var n=x.getPointAtLength(S),E=x.getPointAtLength(T),d=E.x-n.x,F=E.y-n.y,D=Math.sqrt(d*d+F*F);return[d/D,F/D]}function o(x){var S=Math.sqrt(x[0]*x[0]+x[1]*x[1]);return[x[0]/S,x[1]/S]}function v(x,S){var T=Math.abs(x[0]*S[0]+x[1]*S[1]);return Math.sqrt(1-T*T)/T}function b(x,S,T,n,E,d,F,D,N,k,O){var B="fill"===k;B&&s(E,x.contours);var U=C.ensureSingle(S,"g","contourfill").selectAll("path").data(B?E:[]);U.enter().append("path"),U.exit().remove(),U.each(function(H){var J=(H.prefixBoundary?O:"")+function L(x,S,T,n,E,d,F,D){var N,z,U,H,J,nt,it,k="",O=S.edgepaths.map(function(rt,et){return et}),B=!0,ut=1e-4*Math.abs(T[0][0]-T[2][0]),Q=1e-4*Math.abs(T[0][1]-T[2][1]);function j(rt){return Math.abs(rt[1]-T[0][1])<Q}function Z(rt){return Math.abs(rt[1]-T[2][1])<Q}function G(rt){return Math.abs(rt[0]-T[0][0])<ut}function K(rt){return Math.abs(rt[0]-T[2][0])<ut}function at(rt,et){var st,dt,bt,gt,Lt="";for(j(rt)&&!K(rt)||Z(rt)&&!G(rt)?(gt=E.aaxis,bt=f(E,d,[rt[0],et[0]],.5*(rt[1]+et[1]))):(gt=E.baxis,bt=f(E,d,.5*(rt[0]+et[0]),[rt[1],et[1]])),st=1;st<bt.length;st++)for(Lt+=gt.smoothing?"C":"L",dt=0;dt<bt[st].length;dt++){var It=bt[st][dt];Lt+=[F.c2p(It[0]),D.c2p(It[1])]+" "}return Lt}for(N=0,z=null;O.length;){for(z&&(k+=at(z,S.edgepaths[N][0])),it=P.smoothopen(S.edgepaths[N].map(n),S.smoothing),k+=B?it:it.replace(/^M/,"L"),O.splice(O.indexOf(N),1),z=S.edgepaths[N][S.edgepaths[N].length-1],J=-1,H=0;H<4;H++){if(!z){C.log("Missing end?",N,S);break}for(j(z)&&!K(z)?U=T[1]:G(z)?U=T[0]:Z(z)?U=T[3]:K(z)&&(U=T[2]),nt=0;nt<S.edgepaths.length;nt++){var X=S.edgepaths[nt][0];Math.abs(z[0]-U[0])<ut?Math.abs(z[0]-X[0])<ut&&(X[1]-z[1])*(U[1]-X[1])>=0&&(U=X,J=nt):Math.abs(z[1]-U[1])<Q?Math.abs(z[1]-X[1])<Q&&(X[0]-z[0])*(U[0]-X[0])>=0&&(U=X,J=nt):C.log("endpt to newendpt is not vert. or horz.",z,U,X)}if(J>=0)break;k+=at(z,U),z=U}if(J===S.edgepaths.length){C.log("unclosed perimeter path");break}(B=-1===O.indexOf(N=J))&&(N=O[0],k+=at(z,U)+"Z",z=null)}for(N=0;N<S.paths.length;N++)k+=P.smoothclosed(S.paths[N].map(n),S.smoothing);return k}(0,H,d,F,D,N,T,n);J?A.select(this).attr("d",J).style("stroke","none"):A.select(this).remove()})}q.exports=function(S,T,n,E){var d=T.xaxis,F=T.yaxis;C.makeTraceGroups(E,n,"contour").each(function(D){var N=A.select(this),k=D[0],O=k.trace,B=O._carpetTrace=c(S,O),z=S.calcdata[B.index][0];if(B.visible&&"legendonly"!==B.visible){var U=k.a,H=k.b,J=O.contours,nt=a(J,T,k),it="constraint"===J.type,ut=J._operation,Q=it?"="===ut?"lines":"fill":J.coloring,Z=[[U[0],H[H.length-1]],[U[U.length-1],H[H.length-1]],[U[U.length-1],H[0]],[U[0],H[0]]];u(nt),y(nt,1e-8*(U[U.length-1]-U[0]),1e-8*(H[H.length-1]-H[0]));var at=nt;"constraint"===J.type&&(at=l(nt,ut)),function m(x,S){var T,n,E,d,F,D,N,k,O;for(T=0;T<x.length;T++){for(F=(d=x[T]).pedgepaths=[],D=d.ppaths=[],n=0;n<d.edgepaths.length;n++){for(O=d.edgepaths[n],N=[],E=0;E<O.length;E++)N[E]=S(O[E]);F.push(N)}for(n=0;n<d.paths.length;n++){for(O=d.paths[n],k=[],E=0;E<O.length;E++)k[E]=S(O[E]);D.push(k)}}}(nt,j);var $,X,rt,et,st=[];for(et=z.clipsegments.length-1;et>=0;et--)X=g([],($=z.clipsegments[et]).x,d.c2p),rt=g([],$.y,F.c2p),X.reverse(),rt.reverse(),st.push(i(X,rt,$.bicubic));var dt="M"+st.join("L")+"Z";(function M(x,S,T,n,E,d){var F,D,N,k,B=C.ensureSingle(x,"g","contourbg").selectAll("path").data("fill"!==d||E?[]:[0]);B.enter().append("path"),B.exit().remove();var z=[];for(k=0;k<S.length;k++)D=g([],(F=S[k]).x,T.c2p),N=g([],F.y,n.c2p),z.push(i(D,N,F.bicubic));B.attr("d","M"+z.join("L")+"Z").style("stroke","none")})(N,z.clipsegments,d,F,it,Q),b(O,N,d,F,at,Z,j,B,z,Q,dt),h(N,nt,S,k,J,T,B),P.setClipUrl(N,B._clipPathId,S)}function j(bt){var gt=B.ab2xy(bt[0],bt[1],!0);return[d.c2p(gt[0]),F.c2p(gt[1])]}})}},64096:function(q,W,t){"use strict";var A=t(50693),g=t(5386).fF,i=t(9012),P=t(99181),C=t(1426).extendFlat;q.exports=C({lon:P.lon,lat:P.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:P.text,hovertext:P.hovertext,hoverinfo:C({},i.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:g(),showlegend:C({},i.showlegend,{dflt:!1})},A("",{cLetter:"z",editTypeOverride:"calc"}))},85070:function(q,W,t){"use strict";var A=t(92770),g=t(71828).isArrayOrTypedArray,i=t(50606).BADNUM,P=t(78803),C=t(71828)._;q.exports=function(y,e){for(var r=e._length,l=new Array(r),a=e.z,s=g(a)&&a.length,c=0;c<r;c++){var f=l[c]={},m=e.lon[c],h=e.lat[c];if(f.lonlat=A(m)&&A(h)?[+m,+h]:[i,i],s){var w=a[c];f.z=A(w)?w:i}}return P(y,e,{vals:s?a:[0,1],containerStr:"",cLetter:"z"}),r&&(l[0].t={labels:{lat:C(y,"lat:")+" ",lon:C(y,"lon:")+" "}}),l}},52414:function(q,W,t){"use strict";var A=t(92770),g=t(71828),i=t(7901),P=t(21081),C=t(50606).BADNUM,u=t(18214).makeBlank;q.exports=function(e){var r=e[0].trace,l=!0===r.visible&&0!==r._length,s=r._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:u()};if(!l)return s;var f,c=[],m=r.z,h=r.radius,w=g.isArrayOrTypedArray(m)&&m.length,p=g.isArrayOrTypedArray(h);for(f=0;f<e.length;f++){var o=e[f],v=o.lonlat;if(v[0]!==C){var M={};if(w){var b=o.z;M.z=b!==C?b:0}p&&(M.r=A(h[f])&&h[f]>0?+h[f]:0),c.push({type:"Feature",geometry:{type:"Point",coordinates:v},properties:M})}}var L=P.extractOpts(r),x=L.reversescale?P.flipScale(L.colorscale):L.colorscale,S=x[0][1],n=["interpolate",["linear"],["heatmap-density"],0,i.opacity(S)<1?S:i.addOpacity(S,0)];for(f=1;f<x.length;f++)n.push(x[f][0],x[f][1]);return g.extendFlat(s.heatmap.paint,{"heatmap-weight":w?["interpolate",["linear"],["get","z"],L.min,0,L.max,1]:1/(L.max-L.min),"heatmap-color":n,"heatmap-radius":p?{type:"identity",property:"r"}:r.radius,"heatmap-opacity":r.opacity}),s.geojson={type:"FeatureCollection",features:c},s.heatmap.layout.visibility="visible",s}},79429:function(q,W,t){"use strict";var A=t(71828),g=t(1586),i=t(64096);q.exports=function(C,u,y,e){function r(c,f){return A.coerce(C,u,i,c,f)}var l=r("lon")||[],a=r("lat")||[],s=Math.min(l.length,a.length);s?(u._length=s,r("z"),r("radius"),r("below"),r("text"),r("hovertext"),r("hovertemplate"),g(C,u,e,r,{prefix:"",cLetter:"z"})):u.visible=!1}},62474:function(q){"use strict";q.exports=function(t,A){return t.lon=A.lon,t.lat=A.lat,t.z=A.z,t}},84684:function(q,W,t){"use strict";var A=t(89298),g=t(28178).hoverPoints,i=t(28178).getExtraText;q.exports=function(C,u,y){var e=g(C,u,y);if(e){var r=e[0],l=r.cd,a=l[0].trace,s=l[r.index];if(delete r.color,"z"in s){var c=r.subplot.mockAxis;r.z=s.z,r.zLabel=A.tickText(c,c.c2l(s.z),"hover").text}return r.extraText=i(a,s,l[0].t.labels),[r]}}},93814:function(q,W,t){"use strict";q.exports={attributes:t(64096),supplyDefaults:t(79429),colorbar:t(61243),formatLabels:t(15636),calc:t(85070),plot:t(7336),hoverPoints:t(84684),eventData:t(62474),getBelow:function(A,g){for(var i=g.getMapLayers(),P=0;P<i.length;P++){var C=i[P],u=C.id;if("symbol"===C.type&&"string"==typeof u&&-1===u.indexOf("plotly-"))return u}},moduleType:"trace",name:"densitymapbox",basePlotModule:t(50101),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},7336:function(q,W,t){"use strict";var A=t(52414),g=t(77734).traceLayerPrefix;function i(C,u){this.type="densitymapbox",this.subplot=C,this.uid=u,this.sourceId="source-"+u,this.layerList=[["heatmap",g+u+"-heatmap"]],this.below=null}var P=i.prototype;P.update=function(C){var u=this.subplot,y=this.layerList,e=A(C),r=u.belowLookup["trace-"+this.uid];u.map.getSource(this.sourceId).setData(e.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(e,r),this.below=r);for(var l=0;l<y.length;l++){var a=y[l],c=a[1],f=e[a[0]];u.setOptions(c,"setLayoutProperty",f.layout),"visible"===f.layout.visibility&&u.setOptions(c,"setPaintProperty",f.paint)}},P._addLayers=function(C,u){for(var y=this.subplot,e=this.layerList,r=this.sourceId,l=0;l<e.length;l++){var a=e[l],s=a[0],c=C[s];y.addLayer({type:s,id:a[1],source:r,layout:c.layout,paint:c.paint},u)}},P._removeLayers=function(){for(var C=this.subplot.map,u=this.layerList,y=u.length-1;y>=0;y--)C.removeLayer(u[y][1])},P.dispose=function(){var C=this.subplot.map;this._removeLayers(),C.removeSource(this.sourceId)},q.exports=function(u,y){var e=y[0].trace,r=new i(u,e.uid),l=r.sourceId,a=A(y),s=r.below=u.belowLookup["trace-"+e.uid];return u.map.addSource(l,{type:"geojson",data:a.geojson}),r._addLayers(a,s),r}},49789:function(q,W,t){"use strict";var A=t(71828);q.exports=function(i,P){for(var C=0;C<i.length;C++)i[C].i=C;A.mergeArray(P.text,i,"tx"),A.mergeArray(P.hovertext,i,"htx");var u=P.marker;if(u){A.mergeArray(u.opacity,i,"mo"),A.mergeArray(u.color,i,"mc");var y=u.line;y&&(A.mergeArray(y.color,i,"mlc"),A.mergeArrayCastPositive(y.width,i,"mlw"))}}},1285:function(q,W,t){"use strict";var A=t(1486),g=t(82196).line,i=t(9012),P=t(12663).axisHoverFormat,C=t(5386).fF,u=t(5386).si,y=t(18517),e=t(1426).extendFlat,r=t(7901);q.exports={x:A.x,x0:A.x0,dx:A.dx,y:A.y,y0:A.y0,dy:A.dy,xperiod:A.xperiod,yperiod:A.yperiod,xperiod0:A.xperiod0,yperiod0:A.yperiod0,xperiodalignment:A.xperiodalignment,yperiodalignment:A.yperiodalignment,xhoverformat:P("x"),yhoverformat:P("y"),hovertext:A.hovertext,hovertemplate:C({},{keys:y.eventDataKeys}),hoverinfo:e({},i.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:u({editType:"plot"},{keys:y.eventDataKeys.concat(["label","value"])}),text:A.text,textposition:A.textposition,insidetextanchor:e({},A.insidetextanchor,{dflt:"middle"}),textangle:e({},A.textangle,{dflt:0}),textfont:A.textfont,insidetextfont:A.insidetextfont,outsidetextfont:A.outsidetextfont,constraintext:A.constraintext,cliponaxis:A.cliponaxis,orientation:e({},A.orientation,{}),offset:e({},A.offset,{arrayOk:!1}),width:e({},A.width,{arrayOk:!1}),marker:function l(){var a=e({},A.marker);return delete a.pattern,a}(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:e({},g.color,{dflt:r.defaultLine}),width:e({},g.width,{dflt:0,editType:"plot"}),dash:g.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup}},9532:function(q,W,t){"use strict";var A=t(89298),g=t(42973),i=t(49789),P=t(66279),C=t(50606).BADNUM;function u(y){return y===C?0:y}q.exports=function(e,r){var s,c,f,m,h,w,p,o,l=A.getFromId(e,r.xaxis||"x"),a=A.getFromId(e,r.yaxis||"y");"h"===r.orientation?(s=l.makeCalcdata(r,"x"),f=a.makeCalcdata(r,"y"),m=g(r,a,"y",f),h=!!r.yperiodalignment,w="y"):(s=a.makeCalcdata(r,"y"),f=l.makeCalcdata(r,"x"),m=g(r,l,"x",f),h=!!r.xperiodalignment,w="x"),c=m.vals;var L,v=Math.min(c.length,s.length),M=new Array(v);for(r._base=[],p=0;p<v;p++){s[p]<0&&(s[p]=C);var b=!1;s[p]!==C&&p+1<v&&s[p+1]!==C&&(b=!0),o=M[p]={p:c[p],s:s[p],cNext:b},r._base[p]=-.5*o.s,h&&(M[p].orig_p=f[p],M[p][w+"End"]=m.ends[p],M[p][w+"Start"]=m.starts[p]),r.ids&&(o.id=String(r.ids[p])),0===p&&(M[0].vTotal=0),M[0].vTotal+=u(o.s),o.begR=u(o.s)/u(M[0].s)}for(p=0;p<v;p++)(o=M[p]).s!==C&&(o.sumR=o.s/M[0].vTotal,o.difR=void 0!==L?o.s/L:1,L=o.s);return i(M,r),P(M,r),M}},18517:function(q){"use strict";q.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},8984:function(q,W,t){"use strict";var A=t(11661).setGroupPositions;q.exports=function(i,P){var c,f,C=i._fullLayout,u=i._fullData,y=i.calcdata,e=P.xaxis,r=P.yaxis,l=[],a=[],s=[];for(f=0;f<u.length;f++){var m=u[f];!0===m.visible&&m.xaxis===e._id&&m.yaxis===r._id&&"funnel"===m.type&&(c=y[f],"h"===m.orientation?s.push(c):a.push(c),l.push(c))}var w={mode:C.funnelmode,norm:C.funnelnorm,gap:C.funnelgap,groupgap:C.funnelgroupgap};for(A(i,e,r,a,w),A(i,r,e,s,w),f=0;f<l.length;f++){c=l[f];for(var p=0;p<c.length;p++)p+1<c.length&&(c[p].nextP0=c[p+1].p0,c[p].nextS0=c[p+1].s0,c[p].nextP1=c[p+1].p1,c[p].nextS1=c[p+1].s1)}}},26199:function(q,W,t){"use strict";var A=t(71828),g=t(26125),i=t(90769).handleText,P=t(67513),C=t(73927),u=t(1285),y=t(7901);q.exports={supplyDefaults:function e(a,s,c,f){function m(b,L){return A.coerce(a,s,u,b,L)}if(P(a,s,f,m)){C(a,s,f,m),m("xhoverformat"),m("yhoverformat"),m("orientation",s.y&&!s.x?"v":"h"),m("offset"),m("width");var w=m("text");m("hovertext"),m("hovertemplate");var p=m("textposition");i(a,s,f,m,p,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==s.textposition&&!s.texttemplate&&m("textinfo",Array.isArray(w)?"text+value":"value");var o=m("marker.color",c);m("marker.line.color",y.defaultLine),m("marker.line.width"),m("connector.visible")&&(m("connector.fillcolor",function r(a){var s=A.isArrayOrTypedArray(a)?"#000":a;return y.addOpacity(s,.5*y.opacity(s))}(o)),m("connector.line.width")&&(m("connector.line.color"),m("connector.line.dash")))}else s.visible=!1},crossTraceDefaults:function l(a,s){var f;function m(w){return A.coerce(f._input,f,u,w)}if("group"===s.funnelmode)for(var h=0;h<a.length;h++)g((f=a[h])._input,f,s,m)}}},34598:function(q){"use strict";q.exports=function(t,A){return t.x="xVal"in A?A.xVal:A.x,t.y="yVal"in A?A.yVal:A.y,"percentInitial"in A&&(t.percentInitial=A.percentInitial),"percentPrevious"in A&&(t.percentPrevious=A.percentPrevious),"percentTotal"in A&&(t.percentTotal=A.percentTotal),A.xa&&(t.xaxis=A.xa),A.ya&&(t.yaxis=A.ya),t}},63341:function(q,W,t){"use strict";var A=t(7901).opacity,g=t(95423).hoverOnBars,i=t(71828).formatPercent;q.exports=function(u,y,e,r,l){var a=g(u,y,e,r,l);if(a){var s=a.cd,c=s[0].trace,h=s[a.index];a[("h"===c.orientation?"x":"y")+"LabelVal"]=h.s,a.percentInitial=h.begR,a.percentInitialLabel=i(h.begR,1),a.percentPrevious=h.difR,a.percentPreviousLabel=i(h.difR,1),a.percentTotal=h.sumR,a.percentTotalLabel=i(h.sumR,1);var p=h.hi||c.hoverinfo,o=[];if(p&&"none"!==p&&"skip"!==p){var v="all"===p,M=p.split("+"),b=function(L){return v||-1!==M.indexOf(L)};b("percent initial")&&o.push(a.percentInitialLabel+" of initial"),b("percent previous")&&o.push(a.percentPreviousLabel+" of previous"),b("percent total")&&o.push(a.percentTotalLabel+" of total")}return a.extraText=o.join("<br>"),a.color=function P(C,u){var y=C.marker,e=u.mc||y.color,r=u.mlc||y.line.color,l=u.mlw||y.line.width;return A(e)?e:A(r)&&l?r:void 0}(c,h),[a]}}},51759:function(q,W,t){"use strict";q.exports={attributes:t(1285),layoutAttributes:t(10440),supplyDefaults:t(26199).supplyDefaults,crossTraceDefaults:t(26199).crossTraceDefaults,supplyLayoutDefaults:t(93138),calc:t(9532),crossTraceCalc:t(8984),plot:t(80461),style:t(68266).style,hoverPoints:t(63341),eventData:t(34598),selectPoints:t(81974),moduleType:"trace",name:"funnel",basePlotModule:t(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},10440:function(q){"use strict";q.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},93138:function(q,W,t){"use strict";var A=t(71828),g=t(10440);q.exports=function(i,P,C){var u=!1;function y(l,a){return A.coerce(i,P,g,l,a)}for(var e=0;e<C.length;e++){var r=C[e];if(r.visible&&"funnel"===r.type){u=!0;break}}u&&(y("funnelmode"),y("funnelgap",.2),y("funnelgroupgap"))}},80461:function(q,W,t){"use strict";var A=t(39898),g=t(71828),i=t(91424),P=t(50606).BADNUM,C=t(17295),u=t(72597).clearMinTextSize;function r(l,a,s,c){var f=[],m=[],h=c?a:s,w=c?s:a;return f[0]=h.c2p(l.s0,!0),m[0]=w.c2p(l.p0,!0),f[1]=h.c2p(l.s1,!0),m[1]=w.c2p(l.p1,!0),f[2]=h.c2p(l.nextS0,!0),m[2]=w.c2p(l.nextP0,!0),f[3]=h.c2p(l.nextS1,!0),m[3]=w.c2p(l.nextP1,!0),c?[f,m]:[m,f]}q.exports=function(a,s,c,f){var m=a._fullLayout;u("funnel",m),function y(l,a,s,c){var f=a.xaxis,m=a.yaxis;g.makeTraceGroups(c,s,"trace bars").each(function(h){var w=A.select(this),p=h[0].trace,o=g.ensureSingle(w,"g","regions");if(p.connector&&p.connector.visible){var v="h"===p.orientation,M=o.selectAll("g.region").data(g.identity);M.enter().append("g").classed("region",!0),M.exit().remove();var b=M.size();M.each(function(L,x){if(x===b-1||L.cNext){var S=r(L,f,m,v),T=S[0],n=S[1],E="";T[0]!==P&&n[0]!==P&&T[1]!==P&&n[1]!==P&&T[2]!==P&&n[2]!==P&&T[3]!==P&&n[3]!==P&&(E+=v?"M"+T[0]+","+n[1]+"L"+T[2]+","+n[2]+"H"+T[3]+"L"+T[1]+","+n[1]+"Z":"M"+T[1]+","+n[1]+"L"+T[2]+","+n[3]+"V"+n[2]+"L"+T[1]+","+n[0]+"Z"),""===E&&(E="M0,0Z"),g.ensureSingle(A.select(this),"path").attr("d",E).call(i.setClipUrl,a.layerClipId,l)}})}else o.remove()})}(a,s,c,f),function e(l,a,s,c){var f=a.xaxis,m=a.yaxis;g.makeTraceGroups(c,s,"trace bars").each(function(h){var w=A.select(this),p=h[0].trace,o=g.ensureSingle(w,"g","lines");if(p.connector&&p.connector.visible&&p.connector.line.width){var v="h"===p.orientation,M=o.selectAll("g.line").data(g.identity);M.enter().append("g").classed("line",!0),M.exit().remove();var b=M.size();M.each(function(L,x){if(x===b-1||L.cNext){var S=r(L,f,m,v),T=S[0],n=S[1],E="";void 0!==T[3]&&void 0!==n[3]&&(v?(E+="M"+T[0]+","+n[1]+"L"+T[2]+","+n[2],E+="M"+T[1]+","+n[1]+"L"+T[3]+","+n[2]):(E+="M"+T[1]+","+n[1]+"L"+T[2]+","+n[3],E+="M"+T[1]+","+n[0]+"L"+T[2]+","+n[2])),""===E&&(E="M0,0Z"),g.ensureSingle(A.select(this),"path").attr("d",E).call(i.setClipUrl,a.layerClipId,l)}})}else o.remove()})}(a,s,c,f),C.plot(a,s,c,f,{mode:m.funnelmode,norm:m.funnelmode,gap:m.funnelgap,groupgap:m.funnelgroupgap})}},68266:function(q,W,t){"use strict";var A=t(39898),g=t(91424),i=t(7901),P=t(37822).DESELECTDIM,C=t(16688),u=t(72597).resizeText,y=C.styleTextPoints;q.exports={style:function e(r,l,a){var s=a||A.select(r).selectAll("g.funnellayer").selectAll("g.trace");u(r,s,"funnel"),s.style("opacity",function(c){return c[0].trace.opacity}),s.each(function(c){var f=A.select(this),m=c[0].trace;f.selectAll(".point > path").each(function(h){if(!h.isBlank){var w=m.marker;A.select(this).call(i.fill,h.mc||w.color).call(i.stroke,h.mlc||w.line.color).call(g.dashLine,w.line.dash,h.mlw||w.line.width).style("opacity",m.selectedpoints&&!h.selected?P:1)}}),y(f,m,r),f.selectAll(".regions").each(function(){A.select(this).selectAll("path").style("stroke-width",0).call(i.fill,m.connector.fillcolor)}),f.selectAll(".lines").each(function(){var h=m.connector.line;g.lineGroupStyle(A.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},86807:function(q,W,t){"use strict";var A=t(34e3),g=t(9012),i=t(27670).Y,P=t(5386).fF,C=t(5386).si,u=t(1426).extendFlat;q.exports={labels:A.labels,label0:A.label0,dlabel:A.dlabel,values:A.values,marker:{colors:A.marker.colors,line:{color:u({},A.marker.line.color,{dflt:null}),width:u({},A.marker.line.width,{dflt:1}),editType:"calc"},pattern:A.marker.pattern,editType:"calc"},text:A.text,hovertext:A.hovertext,scalegroup:u({},A.scalegroup,{}),textinfo:u({},A.textinfo,{flags:["label","text","value","percent"]}),texttemplate:C({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:u({},g.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:P({},{keys:["label","color","value","text","percent"]}),textposition:u({},A.textposition,{values:["inside","none"],dflt:"inside"}),textfont:A.textfont,insidetextfont:A.insidetextfont,title:{text:A.title.text,font:A.title.font,position:u({},A.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:i({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},6452:function(q,W,t){"use strict";var A=t(74875);W.name="funnelarea",W.plot=function(g,i,P,C){A.plotBasePlot(W.name,g,i,P,C)},W.clean=function(g,i,P,C){A.cleanBasePlot(W.name,g,i,P,C)}},89574:function(q,W,t){"use strict";var A=t(32354);q.exports={calc:function g(P,C){return A.calc(P,C)},crossTraceCalc:function i(P){A.crossTraceCalc(P,{type:"funnelarea"})}}},86282:function(q,W,t){"use strict";var A=t(71828),g=t(86807),i=t(27670).c,P=t(90769).handleText,C=t(37434).handleLabelsAndValues,u=t(37434).handleMarkerDefaults;q.exports=function(e,r,l,a){function s(b,L){return A.coerce(e,r,g,b,L)}var c=s("labels"),f=s("values"),m=C(c,f),h=m.len;if(r._hasLabels=m.hasLabels,r._hasValues=m.hasValues,!r._hasLabels&&r._hasValues&&(s("label0"),s("dlabel")),h){r._length=h,u(e,r,a,s),s("scalegroup");var o,w=s("text"),p=s("texttemplate");if(p||(o=s("textinfo",Array.isArray(w)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),p||o&&"none"!==o){var v=s("textposition");P(e,r,a,s,v,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}i(r,a,s),s("title.text")&&(s("title.position"),A.coerceFont(s,"title.font",a.font)),s("aspectratio"),s("baseratio")}else r.visible=!1}},10421:function(q,W,t){"use strict";q.exports={moduleType:"trace",name:"funnelarea",basePlotModule:t(6452),categories:["pie-like","funnelarea","showLegend"],attributes:t(86807),layoutAttributes:t(80097),supplyDefaults:t(86282),supplyLayoutDefaults:t(57402),calc:t(89574).calc,crossTraceCalc:t(89574).crossTraceCalc,plot:t(79187),style:t(71858),styleOne:t(63463),meta:{}}},80097:function(q,W,t){"use strict";var A=t(92774).hiddenlabels;q.exports={hiddenlabels:A,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57402:function(q,W,t){"use strict";var A=t(71828),g=t(80097);q.exports=function(P,C){function u(y,e){return A.coerce(P,C,g,y,e)}u("hiddenlabels"),u("funnelareacolorway",C.colorway),u("extendfunnelareacolors")}},79187:function(q,W,t){"use strict";var A=t(39898),g=t(91424),i=t(71828),P=i.strScale,C=i.strTranslate,u=t(63893),e=t(17295).toMoveInsideBar,r=t(72597),l=r.recordMinTextSize,a=r.clearMinTextSize,s=t(53581),c=t(14575),f=c.attachFxHandlers,m=c.determineInsideTextFont,h=c.layoutAreas,w=c.prerenderTitles,p=c.positionTitleOutside,o=c.formatSliceLabel;function v(L,x){return"l"+(x[0]-L[0])+","+(x[1]-L[1])}function M(L,x){return[.5*(L[0]+x[0]),.5*(L[1]+x[1])]}function b(L){if(L.length){var x=L[0],S=x.trace,T=S.aspectratio,n=S.baseratio;n>.999&&(n=.999);var B,U,H,E=Math.pow(n,2),d=x.vTotal,D=d,N=d*E/(1-E)/d,z=[];for(z.push(O()),U=L.length-1;U>-1;U--)(H=L[U]).hidden||(N+=H.v/D,z.push(O()));var nt=1/0,it=-1/0;for(U=0;U<z.length;U++)B=z[U],nt=Math.min(nt,B[1]),it=Math.max(it,B[1]);for(U=0;U<z.length;U++)z[U][1]-=(it+nt)/2;var Q=x.r,j=(it-nt)/2,Z=Q/z[z.length-1][0],G=Q/j*T;for(x.r=G*j,U=0;U<z.length;U++)z[U][0]*=Z,z[U][1]*=G;var K=[-(B=z[0])[0],B[1]],at=[B[0],B[1]],$=0;for(U=L.length-1;U>-1;U--)if(!(H=L[U]).hidden){var X=z[$+=1][0],rt=z[$][1];H.TL=[-X,rt],H.TR=[X,rt],H.BL=K,H.BR=at,H.pxmid=M(H.TR,H.BR),K=H.TL,at=H.TR}}function O(){var et=function k(){var et=Math.sqrt(N);return{x:et,y:-et}}();return[et.x,et.y]}}q.exports=function(x,S){var T=x._context.staticPlot,n=x._fullLayout;a("funnelarea",n),w(S,x),h(S,n._size),i.makeTraceGroups(n._funnelarealayer,S,"trace").each(function(E){var d=A.select(this),F=E[0],D=F.trace;b(E),d.each(function(){var N=A.select(this).selectAll("g.slice").data(E);N.enter().append("g").classed("slice",!0),N.exit().remove(),N.each(function(O,B){if(O.hidden)A.select(this).selectAll("path,g").remove();else{O.pointNumber=O.i,O.curveNumber=D.index;var z=F.cx,U=F.cy,H=A.select(this),J=H.selectAll("path.surface").data([O]);J.enter().append("path").classed("surface",!0).style({"pointer-events":T?"none":"all"}),H.call(f,x,E);var nt="M"+(z+O.TR[0])+","+(U+O.TR[1])+v(O.TR,O.BR)+v(O.BR,O.BL)+v(O.BL,O.TL)+"Z";J.attr("d",nt),o(x,O,F);var it=s.castOption(D.textposition,O.pts),ut=H.selectAll("g.slicetext").data(O.text&&"none"!==it?[0]:[]);ut.enter().append("g").classed("slicetext",!0),ut.exit().remove(),ut.each(function(){var Q=i.ensureSingle(A.select(this),"text","",function(rt){rt.attr("data-notex",1)}),j=i.ensureUniformFontSize(x,m(D,O,n.font));Q.text(O.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(g.font,j).call(u.convertToTspans,x);var G,K,at,Z=g.bBox(Q.node()),$=Math.min(O.BL[1],O.BR[1])+U,X=Math.max(O.TL[1],O.TR[1])+U;K=Math.max(O.TL[0],O.BL[0])+z,at=Math.min(O.TR[0],O.BR[0])+z,(G=e(K,at,$,X,Z,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=j.size,l(D.type,G,n),E[B].transform=G,i.setTransormAndDisplay(Q,G)})}});var k=A.select(this).selectAll("g.titletext").data(D.title.text?[0]:[]);k.enter().append("g").classed("titletext",!0),k.exit().remove(),k.each(function(){var O=i.ensureSingle(A.select(this),"text","",function(U){U.attr("data-notex",1)}),B=D.title.text;D._meta&&(B=i.templateString(B,D._meta)),O.text(B).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(g.font,D.title.font).call(u.convertToTspans,x);var z=p(F,n._size);O.attr("transform",C(z.x,z.y)+P(Math.min(1,z.scale))+C(z.tx,z.ty))})})})}},71858:function(q,W,t){"use strict";var A=t(39898),g=t(63463),i=t(72597).resizeText;q.exports=function(C){var u=C._fullLayout._funnelarealayer.selectAll(".trace");i(C,u,"funnelarea"),u.each(function(y){var r=y[0].trace,l=A.select(this);l.style({opacity:r.opacity}),l.selectAll("path.surface").each(function(a){A.select(this).call(g,a,r,C)})})}},21606:function(q,W,t){"use strict";var A=t(82196),g=t(9012),i=t(41940),P=t(12663).axisHoverFormat,C=t(5386).fF,u=t(5386).si,y=t(50693),e=t(1426).extendFlat;q.exports=e({z:{valType:"data_array",editType:"calc"},x:e({},A.x,{impliedEdits:{xtype:"array"}}),x0:e({},A.x0,{impliedEdits:{xtype:"scaled"}}),dx:e({},A.dx,{impliedEdits:{xtype:"scaled"}}),y:e({},A.y,{impliedEdits:{ytype:"array"}}),y0:e({},A.y0,{impliedEdits:{ytype:"scaled"}}),dy:e({},A.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:e({},A.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:e({},A.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:e({},A.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:e({},A.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:e({},A.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:e({},A.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:P("x"),yhoverformat:P("y"),zhoverformat:P("z",1),hovertemplate:C(),texttemplate:u({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:i({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:e({},g.showlegend,{dflt:!1})},{transforms:void 0},y("",{cLetter:"z",autoColorDflt:!1}))},90757:function(q,W,t){"use strict";var A=t(73972),g=t(71828),i=t(89298),P=t(42973),C=t(17562),u=t(78803),y=t(68296),e=t(4742),r=t(824),l=t(43907),a=t(70769),s=t(50606).BADNUM;function c(m){for(var h=[],w=m.length,p=0;p<w;p++){var o=m[p];o!==s&&h.push(o)}return h}q.exports=function(h,w){var x,S,T,n,E,d,F,D,N,k,O,p=i.getFromId(h,w.xaxis||"x"),o=i.getFromId(h,w.yaxis||"y"),v=A.traceIs(w,"contour"),M=A.traceIs(w,"histogram"),b=A.traceIs(w,"gl2d"),L=v?"best":w.zsmooth;if(p._minDtick=0,o._minDtick=0,M)n=(O=C(h,w)).orig_x,x=O.x,S=O.x0,T=O.dx,D=O.orig_y,E=O.y,d=O.y0,F=O.dy,N=O.z;else{var B=w.z;g.isArray1D(B)?(y(w,p,o,"x","y",["z"]),x=w._x,E=w._y,B=w._z):(n=w.x?p.makeCalcdata(w,"x"):[],D=w.y?o.makeCalcdata(w,"y"):[],x=P(w,p,"x",n).vals,E=P(w,o,"y",D).vals,w._x=x,w._y=E),S=w.x0,T=w.dx,d=w.y0,F=w.dy,N=e(B,w,p,o)}function z(Z){L=w._input.zsmooth=w.zsmooth=!1,g.warn('cannot use zsmooth: "fast": '+Z)}function U(Z){if(Z.length>1){var G=(Z[Z.length-1]-Z[0])/(Z.length-1),K=Math.abs(G/100);for(k=0;k<Z.length-1;k++)if(Math.abs(Z[k+1]-Z[k]-G)>K)return!1}return!0}(p.rangebreaks||o.rangebreaks)&&(N=function f(m,h,w){for(var p=[],o=-1,v=0;v<w.length;v++)if(h[v]!==s){p[++o]=[];for(var M=0;M<w[v].length;M++)m[M]!==s&&p[o].push(w[v][M])}return p}(x,E,N),M||(x=c(x),E=c(E),w._x=x,w._y=E)),!M&&(v||w.connectgaps)&&(w._emptypoints=l(N),r(N,w._emptypoints)),w._islinear=!1,"log"===p.type||"log"===o.type?"fast"===L&&z("log axis found"):U(x)?U(E)?w._islinear=!0:"fast"===L&&z("y scale is not linear"):"fast"===L&&z("x scale is not linear");var H=g.maxRowLength(N),J="scaled"===w.xtype?"":x,nt=a(w,J,S,T,H,p),it="scaled"===w.ytype?"":E,ut=a(w,it,d,F,N.length,o);b||(w._extremes[p._id]=i.findExtremes(p,nt),w._extremes[o._id]=i.findExtremes(o,ut));var Q={x:nt,y:ut,z:N,text:w._text||w.text,hovertext:w._hovertext||w.hovertext};if(w.xperiodalignment&&n&&(Q.orig_x=n),w.yperiodalignment&&D&&(Q.orig_y=D),J&&J.length===nt.length-1&&(Q.xCenter=J),it&&it.length===ut.length-1&&(Q.yCenter=it),M&&(Q.xRanges=O.xRanges,Q.yRanges=O.yRanges,Q.pts=O.pts),v||u(h,w,{vals:N,cLetter:"z"}),v&&w.contours&&"heatmap"===w.contours.coloring){var j={type:"contour"===w.type?"heatmap":"histogram2d",xcalendar:w.xcalendar,ycalendar:w.ycalendar};Q.xfill=a(j,J,S,T,H,p),Q.yfill=a(j,it,d,F,N.length,o)}return[Q]}},4742:function(q,W,t){"use strict";var A=t(92770),g=t(71828),i=t(50606).BADNUM;q.exports=function(C,u,y,e){var r,l,a,s,c,f;function m(M){if(A(M))return+M}if(u&&u.transpose){for(r=0,c=0;c<C.length;c++)r=Math.max(r,C[c].length);if(0===r)return!1;a=function(M){return M.length},s=function(M,b,L){return(M[L]||[])[b]}}else r=C.length,a=function(M,b){return M[b].length},s=function(M,b,L){return(M[b]||[])[L]};function w(M){if(u&&"carpet"!==u.type&&"contourcarpet"!==u.type&&M&&"category"===M.type&&u["_"+M._id.charAt(0)].length){var b=M._id.charAt(0),L={},x=u["_"+b+"CategoryMap"]||u[b];for(c=0;c<x.length;c++)L[x[c]]=c;return function(S){var T=L[M._categories[S]];return T+1?T:i}}return g.identity}var p=w(y),o=w(e);e&&"category"===e.type&&(r=e._categories.length);var M,b,L,v=new Array(r);for(c=0;c<r;c++)for(l=y&&"category"===y.type?y._categories.length:a(C,c),v[c]=new Array(l),f=0;f<l;f++)v[c][f]=m((M=C,b=o(c),L=p(f),b===i||L===i?i:s(M,b,L)));return v}},61243:function(q){"use strict";q.exports={min:"zmin",max:"zmax"}},68296:function(q,W,t){"use strict";var A=t(71828),g=t(50606).BADNUM,i=t(42973);q.exports=function(C,u,y,e,r,l){var a=C._length,s=u.makeCalcdata(C,e),c=y.makeCalcdata(C,r);s=i(C,u,e,s).vals,c=i(C,y,r,c).vals;var p,o,S,T,f=C.text,m=void 0!==f&&A.isArray1D(f),h=C.hovertext,w=void 0!==h&&A.isArray1D(h),v=A.distinctVals(s),M=v.vals,b=A.distinctVals(c),L=b.vals,x=[],n=L.length,E=M.length;for(p=0;p<l.length;p++)x[p]=A.init2dArray(n,E);m&&(S=A.init2dArray(n,E)),w&&(T=A.init2dArray(n,E));var d=A.init2dArray(n,E);for(p=0;p<a;p++)if(s[p]!==g&&c[p]!==g){var F=A.findBin(s[p]+v.minDiff/2,M),D=A.findBin(c[p]+b.minDiff/2,L);for(o=0;o<l.length;o++)x[o][D][F]=C[l[o]][p],d[D][F]=p;m&&(S[D][F]=f[p]),w&&(T[D][F]=h[p])}for(C["_"+e]=M,C["_"+r]=L,o=0;o<l.length;o++)C["_"+l[o]]=x[o];m&&(C._text=S),w&&(C._hovertext=T),u&&"category"===u.type&&(C["_"+e+"CategoryMap"]=M.map(function(B){return u._categories[B]})),y&&"category"===y.type&&(C["_"+r+"CategoryMap"]=L.map(function(B){return y._categories[B]})),C._after2before=d}},76382:function(q,W,t){"use strict";var A=t(71828),g=t(67684),i=t(58623),P=t(73927),C=t(49901),u=t(1586),y=t(21606);q.exports=function(r,l,a,s){function c(m,h){return A.coerce(r,l,y,m,h)}g(r,l,c,s)?(P(r,l,s,c),c("xhoverformat"),c("yhoverformat"),c("text"),c("hovertext"),c("hovertemplate"),i(c,s),C(r,l,c,s),c("hoverongaps"),c("connectgaps",A.isArray1D(l.z)&&!1!==l.zsmooth),u(r,l,s,c,{prefix:"",cLetter:"z"})):l.visible=!1}},43907:function(q,W,t){"use strict";var A=t(71828).maxRowLength;q.exports=function(i){var a,s,c,f,m,h,w,p,P=[],C={},u=[],y=i[0],e=[],r=[0,0,0],l=A(i);for(s=0;s<i.length;s++)for(a=e,e=y,y=i[s+1]||[],c=0;c<l;c++)void 0===e[c]&&((h=(void 0!==e[c-1]?1:0)+(void 0!==e[c+1]?1:0)+(void 0!==a[c]?1:0)+(void 0!==y[c]?1:0))?(0===s&&h++,0===c&&h++,s===i.length-1&&h++,c===e.length-1&&h++,h<4&&(C[[s,c]]=[s,c,h]),P.push([s,c,h])):u.push([s,c]));for(;u.length;){for(w={},p=!1,m=u.length-1;m>=0;m--)(h=((C[[(s=(f=u[m])[0])-1,c=f[1]]]||r)[2]+(C[[s+1,c]]||r)[2]+(C[[s,c-1]]||r)[2]+(C[[s,c+1]]||r)[2])/20)&&(w[f]=[s,c,h],u.splice(m,1),p=!0);if(!p)throw"findEmpties iterated with no new neighbors";for(f in w)C[f]=w[f],P.push(w[f])}return P.sort(function(o,v){return v[2]-o[2]})}},46248:function(q,W,t){"use strict";var A=t(30211),g=t(71828),i=t(89298),P=t(21081).extractOpts;q.exports=function(u,y,e,r,l){l||(l={});var S,T,n,E,a=l.isContour,s=u.cd[0],c=s.trace,f=u.xa,m=u.ya,h=s.x,w=s.y,p=s.z,o=s.xCenter,v=s.yCenter,M=s.zmask,b=c.zhoverformat,L=h,x=w;if(!1!==u.index){try{n=Math.round(u.index[1]),E=Math.round(u.index[0])}catch(it){return void g.error("Error hovering on heatmap, pointNumber must be [row,col], found:",u.index)}if(n<0||n>=p[0].length||E<0||E>p.length)return}else{if(A.inbox(y-h[0],y-h[h.length-1],0)>0||A.inbox(e-w[0],e-w[w.length-1],0)>0)return;if(a){var d;for(L=[2*h[0]-h[1]],d=1;d<h.length;d++)L.push((h[d]+h[d-1])/2);for(L.push([2*h[h.length-1]-h[h.length-2]]),x=[2*w[0]-w[1]],d=1;d<w.length;d++)x.push((w[d]+w[d-1])/2);x.push([2*w[w.length-1]-w[w.length-2]])}n=Math.max(0,Math.min(L.length-2,g.findBin(y,L))),E=Math.max(0,Math.min(x.length-2,g.findBin(e,x)))}var O,B,F=f.c2p(h[n]),D=f.c2p(h[n+1]),N=m.c2p(w[E]),k=m.c2p(w[E+1]);a?(D=F,S=(O=s.orig_x||h)[n],k=N,T=(B=s.orig_y||w)[E]):(O=s.orig_x||o||h,B=s.orig_y||v||w,S=o?O[n]:(O[n]+O[n+1])/2,T=v?B[E]:(B[E]+B[E+1])/2,f&&"category"===f.type&&(S=h[n]),m&&"category"===m.type&&(T=w[E]),c.zsmooth&&(F=D=f.c2p(S),N=k=m.c2p(T)));var z=p[E][n];if(M&&!M[E][n]&&(z=void 0),void 0!==z||c.hoverongaps){var U;Array.isArray(s.hovertext)&&Array.isArray(s.hovertext[E])?U=s.hovertext[E][n]:Array.isArray(s.text)&&Array.isArray(s.text[E])&&(U=s.text[E][n]);var H=P(c),nt=i.tickText({type:"linear",range:[H.min,H.max],hoverformat:b,_separators:f._separators,_numFormat:f._numFormat},z,"hover").text;return[g.extendFlat(u,{index:c._after2before?c._after2before[E][n]:[E,n],distance:u.maxHoverDistance,spikeDistance:u.maxSpikeDistance,x0:F,x1:D,y0:N,y1:k,xLabelVal:S,yLabelVal:T,zLabelVal:z,zLabel:nt,text:U})]}}},92165:function(q,W,t){"use strict";q.exports={attributes:t(21606),supplyDefaults:t(76382),calc:t(90757),plot:t(50347),colorbar:t(61243),style:t(70035),hoverPoints:t(46248),moduleType:"trace",name:"heatmap",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},824:function(q,W,t){"use strict";var A=t(71828),i=[[-1,0],[1,0],[0,-1],[0,1]];function C(u,y,e){var l,a,s,c,f,m,h,w,p,o,v,M,b,r=0;for(c=0;c<y.length;c++){for(v=u[a=(l=y[c])[0]][s=l[1]],o=0,p=0,f=0;f<4;f++)(h=u[a+(m=i[f])[0]])&&void 0!==(w=h[s+m[1]])&&(0===o?M=b=w:(M=Math.min(M,w),b=Math.max(b,w)),p++,o+=w);if(0===p)throw"iterateInterp2d order is wrong: no defined neighbors";u[a][s]=o/p,void 0===v?p<4&&(r=1):(u[a][s]=(1+e)*u[a][s]-e*v,b>M&&(r=Math.max(r,Math.abs(u[a][s]-v)/(b-M))))}return r}q.exports=function(y,e){var l,r=1;for(C(y,e),l=0;l<e.length&&!(e[l][2]<4);l++);for(e=e.slice(l),l=0;l<100&&r>.01;l++)r=C(y,e,.5-.25*Math.min(1,.5*r));return r>.01&&A.log("interp2d didn't converge quickly",r),y}},58623:function(q,W,t){"use strict";var A=t(71828);q.exports=function(i,P){i("texttemplate");var C=A.extendFlat({},P.font,{color:"auto",size:"auto"});A.coerceFont(i,"textfont",C)}},70769:function(q,W,t){"use strict";var A=t(73972),g=t(71828).isArrayOrTypedArray;q.exports=function(P,C,u,y,e,r){var f,m,h,l=[],a=A.traceIs(P,"contour"),s=A.traceIs(P,"histogram"),c=A.traceIs(P,"gl2d");if(g(C)&&C.length>1&&!s&&"category"!==r.type){var p=C.length;if(!(p<=e))return C.slice(0,a?e:e+1);if(a||c)l=C.slice(0,e);else if(1===e)l=[C[0]-.5,C[0]+.5];else{for(l=[1.5*C[0]-.5*C[1]],h=1;h<p;h++)l.push(.5*(C[h-1]+C[h]));l.push(1.5*C[p-1]-.5*C[p-2])}if(p<e){var o=l[l.length-1],v=o-l[l.length-2];for(h=p;h<e;h++)l.push(o+=v)}}else{var M=P[r._id.charAt(0)+"calendar"];for(f=s?r.r2c(u,0,M):g(C)&&1===C.length?C[0]:void 0===u?0:("log"===r.type?r.d2c:r.r2c)(u,0,M),m=y||1,h=a||c?0:-.5;h<e;h++)l.push(f+m*h)}return l}},50347:function(q,W,t){"use strict";var A=t(39898),g=t(84267),i=t(73972),P=t(91424),C=t(89298),u=t(71828),y=t(63893),e=t(8225),r=t(7901),l=t(21081).extractOpts,a=t(21081).makeColorScaleFuncFromTrace,s=t(77922),f=t(18783).LINE_SPACING,m=t(3883),h=t(32396).STYLE,w="heatmap-label";function p(L){return L.selectAll("g."+w)}function o(L){p(L).remove()}function v(L,x){var S=x.length-2,T=u.constrain(u.findBin(L,x),0,S),n=x[T],d=u.constrain(T+(L-n)/(x[T+1]-n)-.5,0,S),F=Math.round(d),D=Math.abs(d-F);return d&&d!==S&&D?{bin0:F,frac:D,bin1:Math.round(F+D/(d-F))}:{bin0:F,bin1:F,frac:0}}function M(L,x){var S=x.length-1,T=u.constrain(u.findBin(L,x),0,S),n=x[T],d=(L-n)/(x[T+1]-n)||0;return d<=0?{bin0:T,bin1:T,frac:0}:d<.5?{bin0:T,bin1:T+1,frac:d}:{bin0:T+1,bin1:T,frac:1-d}}function b(L,x,S){L[x]=S[0],L[x+1]=S[1],L[x+2]=S[2],L[x+3]=Math.round(255*S[3])}q.exports=function(L,x,S,T){var n=x.xaxis,E=x.yaxis;u.makeTraceGroups(T,S,"hm").each(function(d){var G,K,at,$,X,rt,et,st,F=A.select(this),D=d[0],N=D.trace,k=N.xgap||0,O=N.ygap||0,B=D.z,z=D.x,U=D.y,H=D.xCenter,J=D.yCenter,nt=i.traceIs(N,"contour"),it=nt?"best":N.zsmooth,ut=B.length,Q=u.maxRowLength(B),j=!1,Z=!1;for(rt=0;void 0===G&&rt<z.length-1;)G=n.c2p(z[rt]),rt++;for(rt=z.length-1;void 0===K&&rt>0;)K=n.c2p(z[rt]),rt--;for(K<G&&(at=K,K=G,G=at,j=!0),rt=0;void 0===$&&rt<U.length-1;)$=E.c2p(U[rt]),rt++;for(rt=U.length-1;void 0===X&&rt>0;)X=E.c2p(U[rt]),rt--;X<$&&(at=$,$=X,X=at,Z=!0),nt&&(H=z,J=U,z=D.xfill,U=D.yfill);var dt="default";if(it?dt="best"===it?"smooth":"fast":N._islinear&&0===k&&0===O&&m()&&(dt="fast"),"fast"!==dt){var bt="best"===it?0:.5;G=Math.max(-bt*n._length,G),K=Math.min((1+bt)*n._length,K),$=Math.max(-bt*E._length,$),X=Math.min((1+bt)*E._length,X)}var xt,At,gt=Math.round(K-G),Lt=Math.round(X-$);if(G>=n._length||K<=0||$>=E._length||X<=0)return F.selectAll("image").data([]).exit().remove(),void o(F);"fast"===dt?(xt=Q,At=ut):(xt=gt,At=Lt);var Gt=document.createElement("canvas");Gt.width=xt,Gt.height=At;var Vt,te,Wt=Gt.getContext("2d",{willReadFrequently:!0}),Pt=a(N,{noNumericCheck:!0,returnArray:!0});"fast"===dt?(Vt=j?function(an){return Q-1-an}:u.identity,te=Z?function(an){return ut-1-an}:u.identity):(Vt=function(an){return u.constrain(Math.round(n.c2p(z[an])-G),0,gt)},te=function(an){return u.constrain(Math.round(E.c2p(U[an])-$),0,Lt)});var Fe,Kt,St,Dt,Qt=te(0),Bt=[Qt,Qt],Ot=j?0:1,qt=Z?0:1,ie=0,oe=0,pe=0,de=0;function Ft(an,dn){if(void 0!==an){var pn=Pt(an);return pn[0]=Math.round(pn[0]),pn[1]=Math.round(pn[1]),pn[2]=Math.round(pn[2]),ie+=dn,oe+=pn[0]*dn,pe+=pn[1]*dn,de+=pn[2]*dn,pn}return[0,0,0,0]}function Nt(an,dn,pn,wn){var Ln=an[pn.bin0];if(void 0===Ln)return Ft(void 0,1);var Qn=an[pn.bin1],Nn=dn[pn.bin0],Zn=dn[pn.bin1];return Ft(Ln+pn.frac*(Qn-Ln||0)+wn.frac*((Nn-Ln||0)+pn.frac*(void 0===Qn?void 0===Zn?0:void 0===Nn?2*(Zn-Ln):2*(2*Zn-Nn-Ln)/3:void 0===Zn?void 0===Nn?0:2*(2*Ln-Qn-Nn)/3:void 0===Nn?2*(2*Zn-Qn-Ln)/3:Zn+Ln-Qn-Nn)))}if("default"!==dt){var wt,Rt=0;try{wt=new Uint8Array(xt*At*4)}catch(an){wt=new Array(xt*At*4)}if("smooth"===dt){var Ke,xe,Pe,ft=H||z,pt=J||U,kt=new Array(ft.length),Zt=new Array(pt.length),ee=new Array(gt),se=H?M:v,Be=J?M:v;for(rt=0;rt<ft.length;rt++)kt[rt]=Math.round(n.c2p(ft[rt])-G);for(rt=0;rt<pt.length;rt++)Zt[rt]=Math.round(E.c2p(pt[rt])-$);for(rt=0;rt<gt;rt++)ee[rt]=se(rt,kt);for(et=0;et<Lt;et++)for(xe=B[(Ke=Be(et,Zt)).bin0],Pe=B[Ke.bin1],rt=0;rt<gt;rt++,Rt+=4)b(wt,Rt,Dt=Nt(xe,Pe,ee[rt],Ke))}else for(et=0;et<ut;et++)for(St=B[et],Bt=te(et),rt=0;rt<Q;rt++)Dt=Ft(St[rt],1),b(wt,Rt=4*(Bt*Q+Vt(rt)),Dt);var Ge=Wt.createImageData(xt,At);try{Ge.data.set(wt)}catch(an){var gr=Ge.data,ue=gr.length;for(et=0;et<ue;et++)gr[et]=wt[et]}Wt.putImageData(Ge,0,0)}else{var Ne=Math.floor(k/2),Ye=Math.floor(O/2);for(et=0;et<ut;et++)if(St=B[et],Bt.reverse(),Bt[qt]=te(et+1),Bt[0]!==Bt[1]&&void 0!==Bt[0]&&void 0!==Bt[1])for(Fe=[Kt=Vt(0),Kt],rt=0;rt<Q;rt++)Fe.reverse(),Fe[Ot]=Vt(rt+1),Fe[0]!==Fe[1]&&void 0!==Fe[0]&&void 0!==Fe[1]&&(Dt=Ft(St[rt],(Fe[1]-Fe[0])*(Bt[1]-Bt[0])),Wt.fillStyle="rgba("+Dt.join(",")+")",Wt.fillRect(Fe[0]+Ne,Bt[0]+Ye,Fe[1]-Fe[0]-k,Bt[1]-Bt[0]-O))}oe=Math.round(oe/ie),pe=Math.round(pe/ie),de=Math.round(de/ie);var xr=g("rgb("+oe+","+pe+","+de+")");L._hmpixcount=(L._hmpixcount||0)+ie,L._hmlumcount=(L._hmlumcount||0)+ie*xr.getLuminance();var rr=F.selectAll("image").data(d);rr.enter().append("svg:image").attr({xmlns:s.svg,preserveAspectRatio:"none"}),rr.attr({height:Lt,width:gt,x:G,y:$,"xlink:href":Gt.toDataURL("image/png")}),"fast"===dt&&!it&&rr.attr("style",h),o(F);var ce=N.texttemplate;if(ce){var re=l(N),ve={type:"linear",range:[re.min,re.max],_separators:n._separators,_numFormat:n._numFormat},be="histogram2dcontour"===N.type,Ae="contour"===N.type,Re=Ae?ut-1:ut,Ie=Ae?1:0,Xe=Ae?Q-1:Q,ar=[];for(rt=Ae?1:0;rt<Re;rt++){var nr;if(Ae)nr=D.y[rt];else if(be){if(0===rt||rt===ut-1)continue;nr=D.y[rt]}else if(D.yCenter)nr=D.yCenter[rt];else{if(rt+1===ut&&void 0===D.y[rt+1])continue;nr=(D.y[rt]+D.y[rt+1])/2}var cr=Math.round(E.c2p(nr));if(!(0>cr||cr>E._length))for(et=Ie;et<Xe;et++){var Ut;if(Ae)Ut=D.x[et];else if(be){if(0===et||et===Q-1)continue;Ut=D.x[et]}else if(D.xCenter)Ut=D.xCenter[et];else{if(et+1===Q&&void 0===D.x[et+1])continue;Ut=(D.x[et]+D.x[et+1])/2}var Ht=Math.round(n.c2p(Ut));if(!(0>Ht||Ht>n._length)){var Se=e({x:Ut,y:nr},N,L._fullLayout);Se.x=Ut,Se.y=nr;var Ce=D.z[rt][et];void 0===Ce?(Se.z="",Se.zLabel=""):(Se.z=Ce,Se.zLabel=C.tickText(ve,Ce,"hover").text);var We=D.text&&D.text[rt]&&D.text[rt][et];(void 0===We||!1===We)&&(We=""),Se.text=We;var qe=u.texttemplateString(ce,Se,L._fullLayout._d3locale,Se,N._meta||{});if(qe){var or=qe.split("<br>"),_e=or.length,De=0;for(st=0;st<_e;st++)De=Math.max(De,or[st].length);ar.push({l:_e,c:De,t:qe,x:Ht,y:cr,z:Ce})}}}}var sr=N.textfont,yr=sr.family,dr=sr.size,Pr=L._fullLayout.font.size;if(!dr||"auto"===dr){var Jr=1/0,Mr=1/0,Wr=0,nn=0;for(st=0;st<ar.length;st++){var Nr=ar[st];if(Wr=Math.max(Wr,Nr.l),nn=Math.max(nn,Nr.c),st<ar.length-1){var Dn=ar[st+1],hn=Math.abs(Dn.x-Nr.x),hr=Math.abs(Dn.y-Nr.y);hn&&(Jr=Math.min(Jr,hn)),hr&&(Mr=Math.min(Mr,hr))}}isFinite(Jr)&&isFinite(Mr)?(Jr-=k,Mr-=O,Jr/=nn,Mr/=Wr,Jr/=f/2,Mr/=f,dr=Math.min(Math.floor(Jr),Math.floor(Mr),Pr)):dr=Pr}if(dr<=0||!isFinite(dr))return;p(F).data(ar).enter().append("g").classed(w,1).append("text").attr("text-anchor","middle").each(function(an){var dn=A.select(this),pn=sr.color;(!pn||"auto"===pn)&&(pn=r.contrast("rgba("+Pt(an.z).join()+")")),dn.attr("data-notex",1).call(y.positionText,function(an){return an.x}(an),function(an){return an.y-dr*(an.l*f/2-1)}(an)).call(P.font,yr,dr,pn).text(an.t).call(y.convertToTspans,L)})}})}},70035:function(q,W,t){"use strict";var A=t(39898);q.exports=function(i){A.select(i).selectAll(".hm image").style("opacity",function(P){return P.trace.opacity})}},49901:function(q){"use strict";q.exports=function(t,A,g){!1===g("zsmooth")&&(g("xgap"),g("ygap")),g("zhoverformat")}},67684:function(q,W,t){"use strict";var A=t(92770),g=t(71828),i=t(73972);function P(u,y){var e=y(u);return"scaled"===(e?y(u+"type","array"):"scaled")&&(y(u+"0"),y("d"+u)),e}q.exports=function(y,e,r,l,a,s){var f,m,c=r("z");if(a=a||"x",s=s||"y",void 0===c||!c.length)return 0;if(g.isArray1D(y.z)){f=r(a),m=r(s);var h=g.minRowLength(f),w=g.minRowLength(m);if(0===h||0===w)return 0;e._length=Math.min(h,w,c.length)}else{if(f=P(a,r),m=P(s,r),!function C(u){for(var l,y=!0,e=!1,r=!1,a=0;a<u.length;a++){if(!g.isArrayOrTypedArray(l=u[a])){y=!1;break}l.length>0&&(e=!0);for(var s=0;s<l.length;s++)if(A(l[s])){r=!0;break}}return y&&e&&r}(c))return 0;r("transpose"),e._length=null}return"heatmapgl"===y.type||i.getComponentMethod("calendars","handleTraceDefaults")(y,e,[a,s],l),!0}},16063:function(q,W,t){"use strict";for(var A=t(21606),g=t(50693),i=t(1426).extendFlat,P=t(30962).overrideAll,C=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],u={},y=0;y<C.length;y++){var e=C[y];u[e]=A[e]}u.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},i(u,g("",{cLetter:"z",autoColorDflt:!1})),q.exports=P(u,"calc","nested")},59560:function(q,W,t){"use strict";var A=t(9330).gl_heatmap2d,g=t(89298),i=t(78614);function P(e,r){this.scene=e,this.uid=r,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=A(e.glplot,this.options),this.heatmap._trace=this}var C=P.prototype;C.handlePick=function(e){var r=this.options,l=r.shape,a=e.pointId,s=a%l[0],c=Math.floor(a/l[0]);return{trace:this,dataCoord:e.dataCoord,traceCoord:[r.x[s],r.y[c],r.z[a]],textLabel:this.textLabels[a],name:this.name,pointIndex:[c,s],hoverinfo:this.hoverinfo}},C.update=function(e,r){var l=r[0];this.index=e.index,this.name=e.name,this.hoverinfo=e.hoverinfo;var a=l.z;this.options.z=[].concat.apply([],a),this.options.shape=[a[0].length,a.length],this.options.x=l.x,this.options.y=l.y,this.options.zsmooth=e.zsmooth;var f=function u(e){for(var r=e.colorscale,l=e.zmin,a=e.zmax,s=r.length,c=new Array(s),f=new Array(4*s),m=0;m<s;m++){var h=r[m],w=i(h[1]);c[m]=l+h[0]*(a-l);for(var p=0;p<4;p++)f[4*m+p]=w[p]}return{colorLevels:c,colorValues:f}}(e);this.options.colorLevels=f.colorLevels,this.options.colorValues=f.colorValues,this.textLabels=[].concat.apply([],e.text),this.heatmap.update(this.options);var w,p,m=this.scene.xaxis,h=this.scene.yaxis;!1===e.zsmooth&&(w={ppad:l.x[1]-l.x[0]},p={ppad:l.y[1]-l.y[0]}),e._extremes[m._id]=g.findExtremes(m,l.x,w),e._extremes[h._id]=g.findExtremes(h,l.y,p)},C.dispose=function(){this.heatmap.dispose()},q.exports=function y(e,r,l){var a=new P(e,r.uid);return a.update(r,l),a}},19600:function(q,W,t){"use strict";var A=t(71828),g=t(67684),i=t(1586),P=t(16063);q.exports=function(u,y,e,r){function l(s,c){return A.coerce(u,y,P,s,c)}g(u,y,l,r)?(l("text"),l("zsmooth"),i(u,y,r,l,{prefix:"",cLetter:"z"})):y.visible=!1}},3325:function(q,W,t){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),q.exports={attributes:t(16063),supplyDefaults:t(19600),colorbar:t(61243),calc:t(90757),plot:t(59560),moduleType:"trace",name:"heatmapgl",basePlotModule:t(4796),categories:["gl","gl2d","2dMap"],meta:{}}},7745:function(q,W,t){"use strict";var A=t(1486),g=t(12663).axisHoverFormat,i=t(5386).fF,P=t(5386).si,C=t(41940),u=t(17656),y=t(72406),e=t(1426).extendFlat;q.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:g("x"),yhoverformat:g("y"),text:e({},A.text,{}),hovertext:e({},A.hovertext,{}),orientation:A.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:u("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:u("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:i({},{keys:y.eventDataKeys}),texttemplate:P({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:e({},A.textposition,{arrayOk:!1}),textfont:C({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:C({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:C({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:A.insidetextanchor,textangle:A.textangle,cliponaxis:A.cliponaxis,constraintext:A.constraintext,marker:A.marker,offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup,selected:A.selected,unselected:A.unselected,_deprecated:{bardir:A._deprecated.bardir}}},42174:function(q){"use strict";q.exports=function(t,A){for(var g=t.length,i=0,P=0;P<g;P++)A[P]?(t[P]/=A[P],i+=t[P]):t[P]=null;return i}},17656:function(q){"use strict";q.exports=function(t,A){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},59575:function(q,W,t){"use strict";var A=t(92770);q.exports={count:function(g,i,P){return P[g]++,1},sum:function(g,i,P,C){var u=C[i];return A(u)?(u=Number(u),P[g]+=u,u):0},avg:function(g,i,P,C,u){var y=C[i];return A(y)&&(y=Number(y),P[g]+=y,u[g]++),0},min:function(g,i,P,C){var u=C[i];if(A(u)){if(u=Number(u),!A(P[g]))return P[g]=u,u;if(P[g]>u){var y=u-P[g];return P[g]=u,y}}return 0},max:function(g,i,P,C){var u=C[i];if(A(u)){if(u=Number(u),!A(P[g]))return P[g]=u,u;if(P[g]<u){var y=u-P[g];return P[g]=u,y}}return 0}}},40965:function(q,W,t){"use strict";var A=t(50606),g=A.ONEAVGYEAR,i=A.ONEAVGMONTH,P=A.ONEDAY,C=A.ONEHOUR,u=A.ONEMIN,y=A.ONESEC,e=t(89298).tickIncrement;function r(c,f,m,h){if(c*f<=0)return 1/0;for(var w=Math.abs(f-c),p="date"===m.type,o=l(w,p),v=0;v<10;v++){var M=l(80*o,p);if(o===M)break;if(!a(M,c,f,p,m,h))break;o=M}return o}function l(c,f){return f&&c>y?c>P?c>1.1*g?g:c>1.1*i?i:P:c>C?C:c>u?u:y:Math.pow(10,Math.floor(Math.log(c)/Math.LN10))}function a(c,f,m,h,w,p){if(h&&c>P){var o=s(f,w,p),v=s(m,w,p),M=c===g?0:1;return o[M]!==v[M]}return Math.floor(m/c)-Math.floor(f/c)>.1}function s(c,f,m){var h=f.c2d(c,g,m).split("-");return""===h[0]&&(h.unshift(),h[0]="-"+h[0]),h}q.exports=function(f,m,h,w,p){var T,n,o=-1.1*m,v=-.1*m,M=f-v,b=h[0],L=h[1],x=Math.min(r(b+v,b+M,w,p),r(L+v,L+M,w,p)),S=Math.min(r(b+o,b+v,w,p),r(L+o,L+v,w,p));if(x>S&&S<Math.abs(L-b)/4e3?(T=x,n=!1):(T=Math.min(x,S),n=!0),"date"===w.type&&T>P){var E=T===g?1:6,d=T===g?"M12":"M1";return function(F,D){var N=w.c2d(F,g,p),k=N.indexOf("-",E);k>0&&(N=N.substr(0,k));var O=w.d2c(N,0,p);if(O<F){var B=e(O,d,!1,p);(O+B)/2<F+f&&(O=B)}return D&&n?e(O,d,!0,p):O}}return function(F,D){var N=T*Math.round(F/T);return N+T/10<F&&N+.9*T<F+f&&(N+=T),D&&n&&(N-=T),N}}},72138:function(q,W,t){"use strict";var A=t(92770),g=t(71828),i=t(73972),P=t(89298),C=t(75341),u=t(59575),y=t(36362),e=t(42174),r=t(40965);function a(m,h,w,p,o){var S,T,n,E,d,F,D,v=p+"bins",M=m._fullLayout,L=M._histogramBinOpts[h["_"+p+"bingroup"]],x="overlay"===M.barmode,N=function(gt){return w.r2c(gt,0,E)},k=function(gt){return w.c2r(gt,0,E)},O="date"===w.type?function(gt){return gt||0===gt?g.cleanDate(gt,null,E):null}:function(gt){return A(gt)?Number(gt):null};function B(gt,Lt,It){Lt[gt+"Found"]?(Lt[gt]=O(Lt[gt]),null===Lt[gt]&&(Lt[gt]=It[gt])):(F[gt]=Lt[gt]=It[gt],g.nestedProperty(T[0],v+"."+gt).set(It[gt]))}if(h["_"+p+"autoBinFinished"])delete h["_"+p+"autoBinFinished"];else{T=L.traces;var z=[],U=!0,H=!1,J=!1;for(S=0;S<T.length;S++)if((n=T[S]).visible){var nt=L.dirs[S];d=n["_"+nt+"pos0"]=w.makeCalcdata(n,nt),z=g.concat(z,d),delete n["_"+p+"autoBinFinished"],!0===h.visible&&(U?U=!1:(delete n._autoBin,n["_"+p+"autoBinFinished"]=1),i.traceIs(n,"2dMap")&&(H=!0),"histogram2dcontour"===n.type&&(J=!0))}var it=P.autoBin(z,w,L.nbins,H,E=T[0][p+"calendar"],L.sizeFound&&L.size),ut=T[0]._autoBin={};if(F=ut[L.dirs[0]]={},J&&(L.size||(it.start=k(P.tickIncrement(N(it.start),it.size,!0,E))),void 0===L.end&&(it.end=k(P.tickIncrement(N(it.end),it.size,!1,E)))),x&&!i.traceIs(h,"2dMap")&&0===it._dataSpan&&"category"!==w.type&&"multicategory"!==w.type&&""===h.bingroup&&void 0===h.xbins){if(o)return[it,d,!0];it=function s(m,h,w,p,o){var S,T,n,v=m._fullLayout,M=function c(m,h){for(var w=h.xaxis,p=h.yaxis,o=h.orientation,v=[],M=m._fullData,b=0;b<M.length;b++){var L=M[b];"histogram"===L.type&&!0===L.visible&&L.orientation===o&&L.xaxis===w&&L.yaxis===p&&v.push(L)}return v}(m,h),b=!1,L=1/0,x=[h];for(S=0;S<M.length;S++)if((T=M[S])===h)b=!0;else if(b){var E=a(m,T,w,p,!0),d=E[0],F=E[2];T["_"+p+"autoBinFinished"]=1,T["_"+p+"pos0"]=E[1],F?x.push(T):L=Math.min(L,d.size)}else n=v._histogramBinOpts[T["_"+p+"bingroup"]],L=Math.min(L,n.size||T[o].size);var D=new Array(x.length);for(S=0;S<x.length;S++)for(var N=x[S]["_"+p+"pos0"],k=0;k<N.length;k++)if(void 0!==N[k]){D[S]=N[k];break}for(isFinite(L)||(L=g.distinctVals(D).minDiff),S=0;S<x.length;S++){var O=(T=x[S])[p+"calendar"],B={start:w.c2r(D[S]-L/2,0,O),end:w.c2r(D[S]+L/2,0,O),size:L};T._input[o]=T[o]=B,(n=v._histogramBinOpts[T["_"+p+"bingroup"]])&&g.extendFlat(n,B)}return h[o]}(m,h,w,p,v)}(D=n.cumulative||{}).enabled&&"include"!==D.currentbin&&("decreasing"===D.direction?it.start=k(P.tickIncrement(N(it.start),it.size,!0,E)):it.end=k(P.tickIncrement(N(it.end),it.size,!1,E))),L.size=it.size,L.sizeFound||(F.size=it.size,g.nestedProperty(T[0],v+".size").set(it.size)),B("start",L,it),B("end",L,it)}d=h["_"+p+"pos0"],delete h["_"+p+"pos0"];var Q=h._input[v]||{},j=g.extendFlat({},L),Z=L.start,G=w.r2l(Q.start),K=void 0!==G;if((L.startFound||K)&&G!==w.r2l(Z)){var at=K?G:g.aggNums(Math.min,null,d),$={type:"category"===w.type||"multicategory"===w.type?"linear":w.type,r2l:w.r2l,dtick:L.size,tick0:Z,calendar:E,range:[at,P.tickIncrement(at,L.size,!1,E)].map(w.l2r)},X=P.tickFirst($);X>w.r2l(at)&&(X=P.tickIncrement(X,L.size,!0,E)),j.start=w.l2r(X),K||g.nestedProperty(h,v+".start").set(j.start)}var rt=L.end,et=w.r2l(Q.end),st=void 0!==et;if((L.endFound||st)&&et!==w.r2l(rt)){var dt=st?et:g.aggNums(Math.max,null,d);j.end=w.l2r(dt),st||g.nestedProperty(h,v+".start").set(j.end)}var bt="autobin"+p;return!1===h._input[bt]&&(h._input[v]=g.extendFlat({},h[v]||{}),delete h._input[bt],delete h[bt]),[j,d]}q.exports={calc:function l(m,h){var S,J,nt,it,w=[],p=[],o="h"===h.orientation,v=P.getFromId(m,o?h.yaxis:h.xaxis),M=o?"y":"x",b={x:"y",y:"x"}[M],L=h[M+"calendar"],x=h.cumulative,T=a(m,h,v,M),n=T[0],E=T[1],d="string"==typeof n.size,F=[],D=d?F:n,N=[],k=[],O=[],B=0,z=h.histnorm,U=h.histfunc,H=-1!==z.indexOf("density");x.enabled&&H&&(z=z.replace(/ ?density$/,""),H=!1);var at,Q="max"===U||"min"===U?null:0,j=u.count,Z=y[z],G=!1,K=function(Wt){return v.r2c(Wt,0,L)};for(g.isArrayOrTypedArray(h[b])&&"count"!==U&&(at=h[b],G="avg"===U,j=u[U]),S=K(n.start),nt=K(n.end)+(S-P.tickIncrement(S,n.size,!1,L))/1e6;S<nt&&w.length<1e6&&(J=P.tickIncrement(S,n.size,!1,L),w.push((S+J)/2),p.push(Q),O.push([]),F.push(S),H&&N.push(1/(J-S)),G&&k.push(0),!(J<=S));)S=J;F.push(S),!d&&"date"===v.type&&(D={start:K(D.start),end:K(D.end),size:D.size}),m._fullLayout._roundFnOpts||(m._fullLayout._roundFnOpts={});var $=h["_"+M+"bingroup"],X={leftGap:1/0,rightGap:1/0};$&&(m._fullLayout._roundFnOpts[$]||(m._fullLayout._roundFnOpts[$]=X),X=m._fullLayout._roundFnOpts[$]);var Lt,rt=p.length,et=!0,st=X.leftGap,dt=X.rightGap,bt={};for(S=0;S<E.length;S++){var gt=E[S];(it=g.findBin(gt,D))>=0&&it<rt&&(B+=j(it,S,p,at,k),et&&O[it].length&&gt!==E[O[it][0]]&&(et=!1),O[it].push(S),bt[S]=it,st=Math.min(st,gt-F[it]),dt=Math.min(dt,F[it+1]-gt))}X.leftGap=st,X.rightGap=dt,et||(Lt=function(Wt,Pt){return function(){var Vt=m._fullLayout._roundFnOpts[$];return r(Vt.leftGap,Vt.rightGap,F,v,L)(Wt,Pt)}}),G&&(B=e(p,k)),Z&&Z(p,B,N),x.enabled&&function f(m,h,w){var p,o,v;function M(L){v=m[L],m[L]/=2}function b(L){m[L]=v+(o=m[L])/2,v+=o}if("half"===w)if("increasing"===h)for(M(0),p=1;p<m.length;p++)b(p);else for(M(m.length-1),p=m.length-2;p>=0;p--)b(p);else if("increasing"===h){for(p=1;p<m.length;p++)m[p]+=m[p-1];"exclude"===w&&(m.unshift(0),m.pop())}else{for(p=m.length-2;p>=0;p--)m[p]+=m[p+1];"exclude"===w&&(m.push(0),m.shift())}}(p,x.direction,x.currentbin);var It=Math.min(w.length,p.length),Mt=[],xt=0,At=It-1;for(S=0;S<It;S++)if(p[S]){xt=S;break}for(S=It-1;S>=xt;S--)if(p[S]){At=S;break}for(S=xt;S<=At;S++)if(A(w[S])&&A(p[S])){var Gt={p:w[S],s:p[S],b:0};x.enabled||(Gt.pts=O[S],et?Gt.ph0=Gt.ph1=O[S].length?E[O[S][0]]:w[S]:(h._computePh=!0,Gt.ph0=Lt(F[S]),Gt.ph1=Lt(F[S+1],!0))),Mt.push(Gt)}return 1===Mt.length&&(Mt[0].width1=P.tickIncrement(Mt[0].p,n.size,!1,L)-Mt[0].p),C(Mt,h),g.isArrayOrTypedArray(h.selectedpoints)&&g.tagSelected(Mt,h,bt),Mt},calcAllAutoBins:a}},72406:function(q){"use strict";q.exports={eventDataKeys:["binNumber"]}},82222:function(q,W,t){"use strict";var A=t(71828),g=t(41675),i=t(73972).traceIs,P=t(26125),C=A.nestedProperty,u=t(99082).getAxisGroup,y=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],e=["x","y"];q.exports=function(l,a){var h,w,p,o,v,M,b,s=a._histogramBinOpts={},c=[],f={},m=[];function L(J,nt){return A.coerce(h._input,h,h._module.attributes,J,nt)}function x(J){return"v"===J.orientation?"x":"y"}function T(J,nt,it){var ut=J.uid+"__"+it;nt||(nt=ut);var Q=function S(J,nt){return g.getFromTrace({_fullLayout:a},J,nt).type}(J,it),j=J[it+"calendar"]||"",Z=s[nt],G=!0;Z&&(Q===Z.axType&&j===Z.calendar?(G=!1,Z.traces.push(J),Z.dirs.push(it)):(nt=ut,Q!==Z.axType&&A.warn(["Attempted to group the bins of trace",J.index,"set on a","type:"+Q,"axis","with bins on","type:"+Z.axType,"axis."].join(" ")),j!==Z.calendar&&A.warn(["Attempted to group the bins of trace",J.index,"set with a",j,"calendar","with bins",Z.calendar?"on a "+Z.calendar+" calendar":"w/o a set calendar"].join(" ")))),G&&(s[nt]={traces:[J],dirs:[it],axType:Q,calendar:J[it+"calendar"]||""}),J["_"+it+"bingroup"]=nt}for(v=0;v<l.length;v++)i(h=l[v],"histogram")&&(c.push(h),delete h._xautoBinFinished,delete h._yautoBinFinished,i(h,"2dMap")||P(h._input,h,a,L));var n=a._alignmentOpts||{};for(v=0;v<c.length;v++){if(p="",!i(h=c[v],"2dMap")){if(o=x(h),"group"===a.barmode&&h.alignmentgroup){var d=u(a,h[o+"axis"])+h.orientation;(n[d]||{})[h.alignmentgroup]&&(p=d)}!p&&"overlay"!==a.barmode&&(p=u(a,h.xaxis)+u(a,h.yaxis)+x(h))}p?(f[p]||(f[p]=[]),f[p].push(h)):m.push(h)}for(p in f)if(1!==(w=f[p]).length){var F=!1;for(w.length&&(h=w[0],F=L("bingroup")),p=F||p,v=0;v<w.length;v++){var D=(h=w[v])._input.bingroup;D&&D!==p&&A.warn(["Trace",h.index,"must match","within bingroup",p+".","Ignoring its bingroup:",D,"setting."].join(" ")),h.bingroup=p,T(h,p,x(h))}}else m.push(w[0]);for(v=0;v<m.length;v++){h=m[v];var N=L("bingroup");if(i(h,"2dMap"))for(b=0;b<2;b++){var k=L((o=e[b])+"bingroup",N?N+"__"+o:null);T(h,k,o)}else T(h,N,x(h))}for(p in s){var O=s[p];for(w=O.traces,M=0;M<y.length;M++){var U,H,B=y[M],z=B.name;if("nbins"!==z||!O.sizeFound){for(v=0;v<w.length;v++){if(void 0!==C((h=w[v])._input,U=B.aStr[o=O.dirs[v]]).get()){O[z]=L(U),O[z+"Found"]=!0;break}(H=(h._autoBin||{})[o]||{})[z]&&C(h,U).set(H[z])}if("start"===z||"end"===z)for(;v<w.length;v++)(h=w[v])["_"+o+"bingroup"]&&L(U,(H=(h._autoBin||{})[o]||{})[z]);"nbins"===z&&!O.sizeFound&&!O.nbinsFound&&(h=w[0],O[z]=L(U))}}}}},11385:function(q,W,t){"use strict";var A=t(73972),g=t(71828),i=t(7901),P=t(90769).handleText,C=t(98340),u=t(7745);q.exports=function(e,r,l,a){function s(S,T){return g.coerce(e,r,u,S,T)}var c=s("x"),f=s("y");s("cumulative.enabled")&&(s("cumulative.direction"),s("cumulative.currentbin")),s("text");var h=s("textposition");P(e,r,a,s,h,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat");var w=s("orientation",f&&!c?"h":"v"),p="v"===w?"x":"y",o="v"===w?"y":"x",v=c&&f?Math.min(g.minRowLength(c)&&g.minRowLength(f)):g.minRowLength(r[p]||[]);if(v){r._length=v,A.getComponentMethod("calendars","handleTraceDefaults")(e,r,["x","y"],a),r[o]&&s("histfunc"),s("histnorm"),s("autobin"+p),C(e,r,s,l,a),g.coerceSelectionMarkerOpacity(r,s);var L=(r.marker.line||{}).color,x=A.getComponentMethod("errorbars","supplyDefaults");x(e,r,L||i.defaultLine,{axis:"y"}),x(e,r,L||i.defaultLine,{axis:"x",inherit:"y"})}else r.visible=!1}},84402:function(q){"use strict";q.exports=function(t,A,g,i,P){if(t.x="xVal"in A?A.xVal:A.x,t.y="yVal"in A?A.yVal:A.y,"zLabelVal"in A&&(t.z=A.zLabelVal),A.xa&&(t.xaxis=A.xa),A.ya&&(t.yaxis=A.ya),!(g.cumulative||{}).enabled){var u,C=Array.isArray(P)?i[0].pts[P[0]][P[1]]:i[P].pts;if(t.pointNumbers=C,t.binNumber=t.pointNumber,delete t.pointNumber,delete t.pointIndex,g._indexToPoints){u=[];for(var y=0;y<C.length;y++)u=u.concat(g._indexToPoints[C[y]])}else u=C;t.pointIndices=u}return t}},76440:function(q,W,t){"use strict";var A=t(95423).hoverPoints,g=t(89298).hoverLabelText;q.exports=function(P,C,u,y,e){var r=A(P,C,u,y,e);if(r){var l=(P=r[0]).cd[P.index],a=P.cd[0].trace;if(!a.cumulative.enabled){var s="h"===a.orientation?"y":"x";P[s+"Label"]=g(P[s+"a"],[l.ph0,l.ph1],a[s+"hoverformat"])}return r}}},36071:function(q,W,t){"use strict";q.exports={attributes:t(7745),layoutAttributes:t(43641),supplyDefaults:t(11385),crossTraceDefaults:t(82222),supplyLayoutDefaults:t(13957),calc:t(72138).calc,crossTraceCalc:t(11661).crossTraceCalc,plot:t(17295).plot,layerName:"barlayer",style:t(16688).style,styleOnSelect:t(16688).styleOnSelect,colorbar:t(4898),hoverPoints:t(76440),selectPoints:t(81974),eventData:t(84402),moduleType:"trace",name:"histogram",basePlotModule:t(93612),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},36362:function(q){"use strict";q.exports={percent:function(W,t){for(var A=W.length,g=100/t,i=0;i<A;i++)W[i]*=g},probability:function(W,t){for(var A=W.length,g=0;g<A;g++)W[g]/=t},density:function(W,t,A,g){var i=W.length;g=g||1;for(var P=0;P<i;P++)W[P]*=A[P]*g},"probability density":function(W,t,A,g){var i=W.length;g&&(t/=g);for(var P=0;P<i;P++)W[P]*=A[P]/t}}},35361:function(q,W,t){"use strict";var A=t(7745),g=t(17656),i=t(21606),P=t(9012),C=t(12663).axisHoverFormat,u=t(5386).fF,y=t(5386).si,e=t(50693),r=t(1426).extendFlat;q.exports=r({x:A.x,y:A.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:A.histnorm,histfunc:A.histfunc,nbinsx:A.nbinsx,xbins:g("x"),nbinsy:A.nbinsy,ybins:g("y"),autobinx:A.autobinx,autobiny:A.autobiny,bingroup:r({},A.bingroup,{}),xbingroup:r({},A.bingroup,{}),ybingroup:r({},A.bingroup,{}),xgap:i.xgap,ygap:i.ygap,zsmooth:i.zsmooth,xhoverformat:C("x"),yhoverformat:C("y"),zhoverformat:C("z",1),hovertemplate:u({},{keys:"z"}),texttemplate:y({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:i.textfont,showlegend:r({},P.showlegend,{dflt:!1})},e("",{cLetter:"z",autoColorDflt:!1}))},17562:function(q,W,t){"use strict";var A=t(71828),g=t(89298),i=t(59575),P=t(36362),C=t(42174),u=t(40965),y=t(72138).calcAllAutoBins;function e(a,s,c,f){var h,m=new Array(a);if(f)for(h=0;h<a;h++)m[h]=1/(s[h+1]-s[h]);else{var w=1/c;for(h=0;h<a;h++)m[h]=w}return m}function r(a,s){return{start:a(s.start),end:a(s.end),size:s.size}}function l(a,s,c,f,m,h){var w,p=a.length-1,o=new Array(p),v=u(c,f,a,m,h);for(w=0;w<p;w++){var M=(s||[])[w];o[w]=void 0===M?[v(a[w]),v(a[w+1],!0)]:[M,M]}return o}q.exports=function(s,c){var b,L,x,S,f=g.getFromId(s,c.xaxis),m=g.getFromId(s,c.yaxis),h=c.xcalendar,w=c.ycalendar,p=function(Dt){return f.r2c(Dt,0,h)},o=function(Dt){return m.r2c(Dt,0,w)},T=y(s,c,f,"x"),n=T[0],E=T[1],d=y(s,c,m,"y"),F=d[0],D=d[1],N=c._length;E.length>N&&E.splice(N,E.length-N),D.length>N&&D.splice(N,D.length-N);var k=[],O=[],B=[],z="string"==typeof n.size,U="string"==typeof F.size,H=[],J=[],nt=z?H:n,it=U?J:F,ut=0,Q=[],j=[],Z=c.histnorm,G=c.histfunc,K=-1!==Z.indexOf("density"),$="max"===G||"min"===G?null:0,X=i.count,rt=P[Z],et=!1,st=[],dt=[],bt="z"in c?c.z:"marker"in c&&Array.isArray(c.marker.color)?c.marker.color:"";bt&&"count"!==G&&(et="avg"===G,X=i[G]);var gt=n.size,Lt=p(n.start),It=p(n.end)+(Lt-g.tickIncrement(Lt,gt,!1,h))/1e6;for(b=Lt;b<It;b=g.tickIncrement(b,gt,!1,h))O.push($),H.push(b),et&&B.push(0);H.push(b);var Mt=O.length,xt=(b-Lt)/Mt,At=f.c2r(Lt+xt/2,0,h),Gt=F.size,Wt=o(F.start),Pt=o(F.end)+(Wt-g.tickIncrement(Wt,Gt,!1,w))/1e6;for(b=Wt;b<Pt;b=g.tickIncrement(b,Gt,!1,w)){k.push(O.slice()),J.push(b);var Vt=new Array(Mt);for(L=0;L<Mt;L++)Vt[L]=[];j.push(Vt),et&&Q.push(B.slice())}J.push(b);var te=k.length,Qt=(b-Wt)/te,Bt=function(Dt){return m.c2r(Dt,0,w)}(Wt+Qt/2);K&&(st=e(O.length,nt,xt,z),dt=e(k.length,it,Qt,U)),!z&&"date"===f.type&&(nt=r(p,nt)),!U&&"date"===m.type&&(it=r(o,it));var Ot=!0,qt=!0,ie=new Array(Mt),oe=new Array(te),pe=1/0,de=1/0,Fe=1/0,Kt=1/0;for(b=0;b<N;b++){var Et=E[b],St=D[b];x=A.findBin(Et,nt),S=A.findBin(St,it),x>=0&&x<Mt&&S>=0&&S<te&&(ut+=X(x,b,k[S],bt,Q[S]),j[S][x].push(b),Ot&&(void 0===ie[x]?ie[x]=Et:ie[x]!==Et&&(Ot=!1)),qt&&(void 0===oe[S]?oe[S]=St:oe[S]!==St&&(qt=!1)),pe=Math.min(pe,Et-H[x]),de=Math.min(de,H[x+1]-Et),Fe=Math.min(Fe,St-J[S]),Kt=Math.min(Kt,J[S+1]-St))}if(et)for(S=0;S<te;S++)ut+=C(k[S],Q[S]);if(rt)for(S=0;S<te;S++)rt(k[S],ut,st,dt[S]);return{x:E,xRanges:l(H,Ot&&ie,pe,de,f,h),x0:At,dx:xt,y:D,yRanges:l(J,qt&&oe,Fe,Kt,m,w),y0:Bt,dy:Qt,z:k,pts:j}}},93888:function(q,W,t){"use strict";var A=t(71828),g=t(75238),i=t(49901),P=t(1586),C=t(58623),u=t(35361);q.exports=function(e,r,l,a){function s(c,f){return A.coerce(e,r,u,c,f)}g(e,r,s,a),!1!==r.visible&&(i(e,r,s,a),P(e,r,a,s,{prefix:"",cLetter:"z"}),s("hovertemplate"),C(s,a),s("xhoverformat"),s("yhoverformat"))}},76128:function(q,W,t){"use strict";var A=t(46248),g=t(89298).hoverLabelText;q.exports=function(P,C,u,y,e){var r=A(P,C,u,y,e);if(r){var l=(P=r[0]).index,c=P.cd[0],f=c.trace,m=c.xRanges[l[1]],h=c.yRanges[l[0]];return P.xLabel=g(P.xa,[m[0],m[1]],f.xhoverformat),P.yLabel=g(P.ya,[h[0],h[1]],f.yhoverformat),r}}},43905:function(q,W,t){"use strict";q.exports={attributes:t(35361),supplyDefaults:t(93888),crossTraceDefaults:t(82222),calc:t(90757),plot:t(50347),layerName:"heatmaplayer",colorbar:t(61243),style:t(70035),hoverPoints:t(76128),eventData:t(84402),moduleType:"trace",name:"histogram2d",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},75238:function(q,W,t){"use strict";var A=t(73972),g=t(71828);q.exports=function(P,C,u,y){var e=u("x"),r=u("y"),l=g.minRowLength(e),a=g.minRowLength(r);l&&a?(C._length=Math.min(l,a),A.getComponentMethod("calendars","handleTraceDefaults")(P,C,["x","y"],y),(u("z")||u("marker.color"))&&u("histfunc"),u("histnorm"),u("autobinx"),u("autobiny")):C.visible=!1}},99066:function(q,W,t){"use strict";var A=t(35361),g=t(70600),i=t(50693),P=t(12663).axisHoverFormat,C=t(1426).extendFlat;q.exports=C({x:A.x,y:A.y,z:A.z,marker:A.marker,histnorm:A.histnorm,histfunc:A.histfunc,nbinsx:A.nbinsx,xbins:A.xbins,nbinsy:A.nbinsy,ybins:A.ybins,autobinx:A.autobinx,autobiny:A.autobiny,bingroup:A.bingroup,xbingroup:A.xbingroup,ybingroup:A.ybingroup,autocontour:g.autocontour,ncontours:g.ncontours,contours:g.contours,line:{color:g.line.color,width:C({},g.line.width,{dflt:.5}),dash:g.line.dash,smoothing:g.line.smoothing,editType:"plot"},xhoverformat:P("x"),yhoverformat:P("y"),zhoverformat:P("z",1),hovertemplate:A.hovertemplate,texttemplate:g.texttemplate,textfont:g.textfont},i("",{cLetter:"z",editTypeOverride:"calc"}))},62654:function(q,W,t){"use strict";var A=t(71828),g=t(75238),i=t(67217),P=t(8724),C=t(58623),u=t(99066);q.exports=function(e,r,l,a){function s(f,m){return A.coerce(e,r,u,f,m)}g(e,r,s,a),!1!==r.visible&&(i(e,r,s,function c(f){return A.coerce2(e,r,u,f)}),P(e,r,s,a),s("xhoverformat"),s("yhoverformat"),s("hovertemplate"),r.contours&&"heatmap"===r.contours.coloring&&C(s,a))}},35902:function(q,W,t){"use strict";q.exports={attributes:t(99066),supplyDefaults:t(62654),crossTraceDefaults:t(82222),calc:t(27529),plot:t(29854).plot,layerName:"contourlayer",style:t(84426),colorbar:t(90654),hoverPoints:t(52421),moduleType:"trace",name:"histogram2dcontour",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},46291:function(q,W,t){"use strict";var A=t(5386).fF,g=t(5386).si,i=t(50693),P=t(27670).Y,C=t(34e3),u=t(57564),y=t(45802),e=t(43473),r=t(1426).extendFlat,l=t(79952).u;q.exports={labels:u.labels,parents:u.parents,values:u.values,branchvalues:u.branchvalues,count:u.count,level:u.level,maxdepth:u.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:y.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:r({colors:u.marker.colors,line:u.marker.line,pattern:l,editType:"calc"},i("marker",{colorAttr:"colors",anim:!1})),leaf:u.leaf,pathbar:y.pathbar,text:C.text,textinfo:u.textinfo,texttemplate:g({editType:"plot"},{keys:e.eventDataKeys.concat(["label","value"])}),hovertext:C.hovertext,hoverinfo:u.hoverinfo,hovertemplate:A({},{keys:e.eventDataKeys}),textfont:C.textfont,insidetextfont:C.insidetextfont,outsidetextfont:y.outsidetextfont,textposition:y.textposition,sort:C.sort,root:u.root,domain:P({name:"icicle",trace:!0,editType:"calc"})}},96346:function(q,W,t){"use strict";var A=t(74875);W.name="icicle",W.plot=function(g,i,P,C){A.plotBasePlot(W.name,g,i,P,C)},W.clean=function(g,i,P,C){A.cleanBasePlot(W.name,g,i,P,C)}},46584:function(q,W,t){"use strict";var A=t(52147);W.y=function(g,i){return A.calc(g,i)},W.T=function(g){return A._runCrossTraceCalc("icicle",g)}},56524:function(q,W,t){"use strict";var A=t(71828),g=t(46291),i=t(7901),P=t(27670).c,C=t(90769).handleText,u=t(97313).TEXTPAD,y=t(37434).handleMarkerDefaults,e=t(21081),r=e.hasColorscale,l=e.handleDefaults;q.exports=function(s,c,f,m){function h(x,S){return A.coerce(s,c,g,x,S)}var w=h("labels"),p=h("parents");if(w&&w.length&&p&&p.length){var o=h("values");h(o&&o.length?"branchvalues":"count"),h("level"),h("maxdepth"),h("tiling.orientation"),h("tiling.flip"),h("tiling.pad");var v=h("text");h("texttemplate"),c.texttemplate||h("textinfo",Array.isArray(v)?"text+label":"label"),h("hovertext"),h("hovertemplate");var M=h("pathbar.visible");C(s,c,m,h,"auto",{hasPathbar:M,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),h("textposition"),y(s,c,m,h);var L=c._hasColorscale=r(s,"marker","colors")||(s.marker||{}).coloraxis;L&&l(s,c,m,h,{prefix:"marker.",cLetter:"c"}),h("leaf.opacity",L?1:.7),c._hovered={marker:{line:{width:2,color:i.contrast(m.paper_bgcolor)}}},M&&(h("pathbar.thickness",c.pathbar.textfont.size+2*u),h("pathbar.side"),h("pathbar.edgeshape")),h("sort"),h("root.color"),P(c,m,h),c._length=null}else c.visible=!1}},90666:function(q,W,t){"use strict";var A=t(39898),g=t(71828),i=t(91424),P=t(63893),C=t(21538),u=t(82454).styleOne,y=t(43473),e=t(2791),r=t(83523),l=t(24714).formatSliceLabel,a=!1;q.exports=function(c,f,m,h,w){var p=w.width,o=w.height,v=w.viewX,M=w.viewY,b=w.pathSlice,L=w.toMoveInsideSlice,x=w.strTransform,S=w.hasTransition,T=w.handleSlicesExit,n=w.makeUpdateSliceInterpolator,E=w.makeUpdateTextInterpolator,d=w.prevEntry,D=c._context.staticPlot,N=c._fullLayout,O=f[0].trace,B=-1!==O.textposition.indexOf("left"),z=-1!==O.textposition.indexOf("right"),U=-1!==O.textposition.indexOf("bottom"),J=C(m,[p,o],{flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1,orientation:O.tiling.orientation,pad:{inner:O.tiling.pad},maxDepth:O._maxDepth}).descendants(),nt=1/0,it=-1/0;J.forEach(function(G){var K=G.depth;K>=O._maxDepth?(G.x0=G.x1=(G.x0+G.x1)/2,G.y0=G.y1=(G.y0+G.y1)/2):(nt=Math.min(nt,K),it=Math.max(it,K))}),h=h.data(J,e.getPtId),O._maxVisibleLayers=isFinite(it)?it-nt+1:0,h.enter().append("g").classed("slice",!0),T(h,a,{},[p,o],b),h.order();var ut=null;if(S&&d){var Q=e.getPtId(d);h.each(function(G){null===ut&&e.getPtId(G)===Q&&(ut={x0:G.x0,x1:G.x1,y0:G.y0,y1:G.y1})})}var j=function(){return ut||{x0:0,x1:p,y0:0,y1:o}},Z=h;return S&&(Z=Z.transition().each("end",function(){var G=A.select(this);e.setSliceCursor(G,c,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),Z.each(function(G){G._x0=v(G.x0),G._x1=v(G.x1),G._y0=M(G.y0),G._y1=M(G.y1),G._hoverX=v(G.x1-O.tiling.pad),G._hoverY=M(U?G.y1-O.tiling.pad/2:G.y0+O.tiling.pad/2);var K=A.select(this),at=g.ensureSingle(K,"path","surface",function(et){et.style("pointer-events",D?"none":"all")});S?at.transition().attrTween("d",function(et){var st=n(et,a,j(),[p,o],{orientation:O.tiling.orientation,flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1});return function(dt){return b(st(dt))}}):at.attr("d",b),K.call(r,m,c,f,{styleOne:u,eventDataKeys:y.eventDataKeys,transitionTime:y.CLICK_TRANSITION_TIME,transitionEasing:y.CLICK_TRANSITION_EASING}).call(e.setSliceCursor,c,{isTransitioning:c._transitioning}),at.call(u,G,O,c,{hovered:!1}),G._text=G.x0===G.x1||G.y0===G.y1?"":l(G,m,O,f,N)||"";var $=g.ensureSingle(K,"g","slicetext"),X=g.ensureSingle($,"text","",function(et){et.attr("data-notex",1)}),rt=g.ensureUniformFontSize(c,e.determineTextFont(O,G,N.font));X.text(G._text||" ").classed("slicetext",!0).attr("text-anchor",z?"end":B?"start":"middle").call(i.font,rt).call(P.convertToTspans,c),G.textBB=i.bBox(X.node()),G.transform=L(G,{fontSize:rt.size}),G.transform.fontSize=rt.size,S?X.transition().attrTween("transform",function(et){var st=E(et,a,j(),[p,o]);return function(dt){return x(st(dt))}}):X.attr("transform",x(G))}),ut}},69816:function(q,W,t){"use strict";q.exports={moduleType:"trace",name:"icicle",basePlotModule:t(96346),categories:[],animatable:!0,attributes:t(46291),layoutAttributes:t(92894),supplyDefaults:t(56524),supplyLayoutDefaults:t(21070),calc:t(46584).y,crossTraceCalc:t(46584).T,plot:t(85596),style:t(82454).style,colorbar:t(4898),meta:{}}},92894:function(q){"use strict";q.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},21070:function(q,W,t){"use strict";var A=t(71828),g=t(92894);q.exports=function(P,C){function u(y,e){return A.coerce(P,C,g,y,e)}u("iciclecolorway",C.colorway),u("extendiciclecolors")}},21538:function(q,W,t){"use strict";var A=t(674),g=t(14102);q.exports=function(P,C,u){var y=u.flipX,e=u.flipY,r="h"===u.orientation,l=u.maxDepth,a=C[0],s=C[1];l&&(a=(P.height+1)*C[0]/Math.min(P.height+1,l),s=(P.height+1)*C[1]/Math.min(P.height+1,l));var c=A.partition().padding(u.pad.inner).size(r?[C[1],a]:[C[0],s])(P);return(r||y||e)&&g(c,C,{swapXY:r,flipX:y,flipY:e}),c}},85596:function(q,W,t){"use strict";var A=t(80694),g=t(90666);q.exports=function(P,C,u,y){return A(P,C,u,y,{type:"icicle",drawDescendants:g})}},82454:function(q,W,t){"use strict";var A=t(39898),g=t(7901),i=t(71828),P=t(72597).resizeText,C=t(43467);function y(e,r,l,a){var c=!r.children,f=r.data.data.i,m=i.castOption(l,f,"marker.line.color")||g.defaultLine,h=i.castOption(l,f,"marker.line.width")||0;e.call(C,r,l,a).style("stroke-width",h).call(g.stroke,m).style("opacity",c?l.leaf.opacity:null)}q.exports={style:function u(e){var r=e._fullLayout._iciclelayer.selectAll(".trace");P(e,r,"icicle"),r.each(function(l){var a=A.select(this),c=l[0].trace;a.style("opacity",c.opacity),a.selectAll("path.surface").each(function(f){A.select(this).call(y,f,c,e)})})},styleOne:y}},17230:function(q,W,t){"use strict";for(var A=t(9012),g=t(5386).fF,i=t(1426).extendFlat,P=t(51877).colormodel,C=["rgb","rgba","rgba256","hsl","hsla"],u=[],y=[],e=0;e<C.length;e++){var r=P[C[e]];u.push("For the `"+C[e]+"` colormodel, it is ["+(r.zminDflt||r.min).join(", ")+"]."),y.push("For the `"+C[e]+"` colormodel, it is ["+(r.zmaxDflt||r.max).join(", ")+"].")}q.exports=i({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:C,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:i({},A.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:g({},{keys:["z","color","colormodel"]}),transforms:void 0})},71113:function(q,W,t){"use strict";var A=t(71828),g=t(51877),i=t(92770),P=t(89298),C=t(71828).maxRowLength,u=t(67395).A;function y(l,a,s,c){return function(f){return A.constrain((f-l)*a,s,c)}}function e(l,a){return function(s){return A.constrain(s,l,a)}}q.exports=function(a,s){var c,f;if(s._hasZ)c=s.z.length,f=C(s.z);else if(s._hasSource){var m=u(s.source);c=m.height,f=m.width}var v,h=P.getFromId(a,s.xaxis||"x"),w=P.getFromId(a,s.yaxis||"y"),p=h.d2c(s.x0)-s.dx/2,o=w.d2c(s.y0)-s.dy/2,M=[p,p+f*s.dx],b=[o,o+c*s.dy];if(h&&"log"===h.type)for(v=0;v<f;v++)M.push(p+v*s.dx);if(w&&"log"===w.type)for(v=0;v<c;v++)b.push(o+v*s.dy);return s._extremes[h._id]=P.findExtremes(h,M),s._extremes[w._id]=P.findExtremes(w,b),s._scaler=function r(l){var a=g.colormodel[l.colormodel],c=(a.colormodel||l.colormodel).length;l._sArray=[];for(var f=0;f<c;f++)l._sArray.push(a.min[f]!==l.zmin[f]||a.max[f]!==l.zmax[f]?y(l.zmin[f],(a.max[f]-a.min[f])/(l.zmax[f]-l.zmin[f]),a.min[f],a.max[f]):e(a.min[f],a.max[f]));return function(m){for(var h=m.slice(0,c),w=0;w<c;w++){var p=h[w];if(!i(p))return!1;h[w]=l._sArray[w](p)}return h}}(s),[{x0:p,y0:o,z:s.z,w:f,h:c}]}},51877:function(q){"use strict";q.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(W){return W.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(W){return W.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(W){return W.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(W){var t=W.slice(0,3);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(W){var t=W.slice(0,4);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["\xb0","%","%",""]}}}},13245:function(q,W,t){"use strict";var A=t(71828),g=t(17230),i=t(51877),P=t(25095).IMAGE_URL_PREFIX;q.exports=function(u,y){function e(a,s){return A.coerce(u,y,g,a,s)}e("source"),y.source&&!y.source.match(P)&&delete y.source,y._hasSource=!!y.source;var l,r=e("z");y._hasZ=!(void 0===r||!r.length||!r[0]||!r[0].length),y._hasZ||y._hasSource?(e("x0"),e("y0"),e("dx"),e("dy"),y._hasZ?(e("colormodel","rgb"),e("zmin",(l=i.colormodel[y.colormodel]).zminDflt||l.min),e("zmax",l.zmaxDflt||l.max)):y._hasSource&&(y.colormodel="rgba256",y.zmin=(l=i.colormodel[y.colormodel]).zminDflt,y.zmax=l.zmaxDflt),e("zsmooth"),e("text"),e("hovertext"),e("hovertemplate"),y._length=null):y.visible=!1}},30835:function(q){"use strict";q.exports=function(t,A){return"xVal"in A&&(t.x=A.xVal),"yVal"in A&&(t.y=A.yVal),A.xa&&(t.xaxis=A.xa),A.ya&&(t.yaxis=A.ya),t.color=A.color,t.colormodel=A.trace.colormodel,t.z||(t.z=A.color),t}},67395:function(q,W,t){"use strict";var A=t(33575),g=t(25095).IMAGE_URL_PREFIX,i=t(12856).Buffer;W.A=function(P){var C=P.replace(g,""),u=new i(C,"base64");return A(u)}},28749:function(q,W,t){"use strict";var A=t(30211),g=t(71828),i=t(51877);q.exports=function(C,u,y){var e=C.cd[0],r=e.trace,l=C.xa,a=C.ya;if(!(A.inbox(u-e.x0,u-(e.x0+e.w*r.dx),0)>0||A.inbox(y-e.y0,y-(e.y0+e.h*r.dy),0)>0)){var f,s=Math.floor((u-e.x0)/r.dx),c=Math.floor(Math.abs(y-e.y0)/r.dy);if(r._hasZ?f=e.z[c][s]:r._hasSource&&(f=r._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(s,c,1,1).data),f){var h,m=e.hi||r.hoverinfo;if(m){var w=m.split("+");-1!==w.indexOf("all")&&(w=["color"]),-1!==w.indexOf("color")&&(h=!0)}var x,p=i.colormodel[r.colormodel],o=p.colormodel||r.colormodel,v=o.length,M=r._scaler(f),b=p.suffix,L=[];(r.hovertemplate||h)&&(L.push("["+[M[0]+b[0],M[1]+b[1],M[2]+b[2]].join(", ")),4===v&&L.push(", "+M[3]+b[3]),L.push("]"),L=L.join(""),C.extraText=o.toUpperCase()+": "+L),Array.isArray(r.hovertext)&&Array.isArray(r.hovertext[c])?x=r.hovertext[c][s]:Array.isArray(r.text)&&Array.isArray(r.text[c])&&(x=r.text[c][s]);var S=a.c2p(e.y0+(c+.5)*r.dy),T=e.x0+(s+.5)*r.dx,n=e.y0+(c+.5)*r.dy,E="["+f.slice(0,r.colormodel.length).join(", ")+"]";return[g.extendFlat(C,{index:[c,s],x0:l.c2p(e.x0+s*r.dx),x1:l.c2p(e.x0+(s+1)*r.dx),y0:S,y1:S,color:M,xVal:T,xLabelVal:T,yVal:n,yLabelVal:n,zLabelVal:E,text:x,hovertemplateLabels:{zLabel:E,colorLabel:L,"color[0]Label":M[0]+b[0],"color[1]Label":M[1]+b[1],"color[2]Label":M[2]+b[2],"color[3]Label":M[3]+b[3]}})]}}}},94507:function(q,W,t){"use strict";q.exports={attributes:t(17230),supplyDefaults:t(13245),calc:t(71113),plot:t(60775),style:t(12826),hoverPoints:t(28749),eventData:t(30835),moduleType:"trace",name:"image",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},60775:function(q,W,t){"use strict";var A=t(39898),g=t(71828),i=g.strTranslate,P=t(77922),C=t(51877),u=t(3883),y=t(32396).STYLE;q.exports=function(r,l,a,s){var c=l.xaxis,f=l.yaxis,m=!r._context._exportedPlot&&u();g.makeTraceGroups(s,a,"im").each(function(h){var w=A.select(this),p=h[0],o=p.trace,v=("fast"===o.zsmooth||!1===o.zsmooth&&m)&&!o._hasZ&&o._hasSource&&"linear"===c.type&&"linear"===f.type;o._realImage=v;var E,d,F,D,N,k,M=p.z,b=p.x0,L=p.y0,x=p.w,S=p.h,T=o.dx,n=o.dy;for(k=0;void 0===E&&k<x;)E=c.c2p(b+k*T),k++;for(k=x;void 0===d&&k>0;)d=c.c2p(b+k*T),k--;for(k=0;void 0===D&&k<S;)D=f.c2p(L+k*n),k++;for(k=S;void 0===N&&k>0;)N=f.c2p(L+k*n),k--;if(d<E&&(F=d,d=E,E=F),N<D&&(F=D,D=N,N=F),!v){var O=.5;E=Math.max(-O*c._length,E),d=Math.min(1.5*c._length,d),D=Math.max(-O*f._length,D),N=Math.min(1.5*f._length,N)}var B=Math.round(d-E),z=Math.round(N-D);if(B<=0||z<=0)w.selectAll("image").data([]).exit().remove();else{var nt=w.selectAll("image").data([h]);nt.enter().append("svg:image").attr({xmlns:P.svg,preserveAspectRatio:"none"}),nt.exit().remove();var it=!1===o.zsmooth?y:"";if(v){var ut=g.simpleMap(c.range,c.r2l),Q=g.simpleMap(f.range,f.r2l),j=ut[1]<ut[0],Z=Q[1]>Q[0];if(j||Z){var G=E+B/2,K=D+z/2;it+="transform:"+i(G+"px",K+"px")+"scale("+(j?-1:1)+","+(Z?-1:1)+")"+i(-G+"px",-K+"px")+";"}}nt.attr("style",it);var at=new Promise(function($){if(o._hasZ)$();else if(o._hasSource)if(o._canvas&&o._canvas.el.width===x&&o._canvas.el.height===S&&o._canvas.source===o.source)$();else{var X=document.createElement("canvas");X.width=x,X.height=S;var rt=X.getContext("2d",{willReadFrequently:!0});o._image=o._image||new Image;var et=o._image;et.onload=function(){rt.drawImage(et,0,0),o._canvas={el:X,source:o.source},$()},et.setAttribute("src",o.source)}}).then(function(){var $;if(o._hasZ)$=J(function(st,dt){return M[dt][st]}).toDataURL("image/png");else if(o._hasSource)if(v)$=o.source;else{var et=o._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,x,S).data;$=J(function(st,dt){var bt=4*(dt*x+st);return[et[bt],et[bt+1],et[bt+2],et[bt+3]]}).toDataURL("image/png")}nt.attr({"xlink:href":$,height:z,width:B,x:E,y:D})});r._promises.push(at)}function J($){var X=document.createElement("canvas");X.width=B,X.height=z;var Lt,rt=X.getContext("2d",{willReadFrequently:!0}),et=function(Wt){return g.constrain(Math.round(c.c2p(b+Wt*T)-E),0,B)},st=function(Wt){return g.constrain(Math.round(f.c2p(L+Wt*n)-D),0,z)},dt=C.colormodel[o.colormodel],bt=dt.colormodel||o.colormodel,gt=dt.fmt;for(k=0;k<p.w;k++){var It=et(k),Mt=et(k+1);if(Mt!==It&&!isNaN(Mt)&&!isNaN(It))for(var xt=0;xt<p.h;xt++){var At=st(xt),Gt=st(xt+1);Gt===At||isNaN(Gt)||isNaN(At)||!$(k,xt)||(Lt=o._scaler($(k,xt)),rt.fillStyle=Lt?bt+"("+gt(Lt).join(",")+")":"rgba(0,0,0,0)",rt.fillRect(It,At,Mt-It,Gt-At))}}return X}})}},12826:function(q,W,t){"use strict";var A=t(39898);q.exports=function(i){A.select(i).selectAll(".im image").style("opacity",function(P){return P[0].trace.opacity})}},54846:function(q,W,t){"use strict";var A=t(1426).extendFlat,g=t(1426).extendDeep,i=t(30962).overrideAll,P=t(41940),C=t(22399),u=t(27670).Y,y=t(13838),e=t(44467).templatedArray,r=t(22372),l=t(12663).descriptionOnlyNumbers,a=P({editType:"plot",colorEditType:"plot"}),s={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:C.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},c={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},f=e("step",g({},s,{range:c}));q.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:u({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:A({},a,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:l("value")},font:A({},a,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:l("value")},increasing:{symbol:{valType:"string",dflt:r.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:r.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:A({},a,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:g({},s,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:C.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:i({range:c,visible:A({},y.visible,{dflt:!0}),tickmode:y.minor.tickmode,nticks:y.nticks,tick0:y.tick0,dtick:y.dtick,tickvals:y.tickvals,ticktext:y.ticktext,ticks:A({},y.ticks,{dflt:"outside"}),ticklen:y.ticklen,tickwidth:y.tickwidth,tickcolor:y.tickcolor,ticklabelstep:y.ticklabelstep,showticklabels:y.showticklabels,labelalias:y.labelalias,tickfont:P({}),tickangle:y.tickangle,tickformat:y.tickformat,tickformatstops:y.tickformatstops,tickprefix:y.tickprefix,showtickprefix:y.showtickprefix,ticksuffix:y.ticksuffix,showticksuffix:y.showticksuffix,separatethousands:y.separatethousands,exponentformat:y.exponentformat,minexponent:y.minexponent,showexponent:y.showexponent,editType:"plot"},"plot"),steps:f,threshold:{line:{color:A({},s.line.color,{}),width:A({},s.line.width,{dflt:1}),editType:"plot"},thickness:A({},s.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},15970:function(q,W,t){"use strict";var A=t(74875);W.name="indicator",W.plot=function(g,i,P,C){A.plotBasePlot(W.name,g,i,P,C)},W.clean=function(g,i,P,C){A.cleanBasePlot(W.name,g,i,P,C)}},24667:function(q){"use strict";q.exports={calc:function W(t,A){var g=[],i=A.value;"number"!=typeof A._lastValue&&(A._lastValue=A.value);var P=A._lastValue,C=P;return A._hasDelta&&"number"==typeof A.delta.reference&&(C=A.delta.reference),g[0]={y:i,lastY:P,delta:i-C,relativeDelta:(i-C)/C},g}}},84577:function(q){"use strict";q.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},94425:function(q,W,t){"use strict";var A=t(71828),g=t(54846),i=t(27670).c,P=t(44467),C=t(85501),u=t(84577),y=t(26218),e=t(38701),r=t(96115),l=t(89426);function s(c,f){function m(h,w){return A.coerce(c,f,g.gauge.steps,h,w)}m("color"),m("line.color"),m("line.width"),m("range"),m("thickness")}q.exports={supplyDefaults:function a(c,f,m,h){function w(N,k){return A.coerce(c,f,g,N,k)}i(f,h,w),w("mode"),f._hasNumber=-1!==f.mode.indexOf("number"),f._hasDelta=-1!==f.mode.indexOf("delta"),f._hasGauge=-1!==f.mode.indexOf("gauge");var p=w("value");f._range=[0,"number"==typeof p?1.5*p:1];var v,M,b,L,x,S,o=new Array(2);function T(N,k){return A.coerce(b,L,g.gauge,N,k)}function n(N,k){return A.coerce(x,S,g.gauge.axis,N,k)}if(f._hasNumber&&(w("number.valueformat"),w("number.font.color",h.font.color),w("number.font.family",h.font.family),w("number.font.size"),void 0===f.number.font.size&&(f.number.font.size=u.defaultNumberFontSize,o[0]=!0),w("number.prefix"),w("number.suffix"),v=f.number.font.size),f._hasDelta&&(w("delta.font.color",h.font.color),w("delta.font.family",h.font.family),w("delta.font.size"),void 0===f.delta.font.size&&(f.delta.font.size=(f._hasNumber?.5:1)*(v||u.defaultNumberFontSize),o[1]=!0),w("delta.reference",f.value),w("delta.relative"),w("delta.valueformat",f.delta.relative?"2%":""),w("delta.increasing.symbol"),w("delta.increasing.color"),w("delta.decreasing.symbol"),w("delta.decreasing.color"),w("delta.position"),w("delta.prefix"),w("delta.suffix"),M=f.delta.font.size),f._scaleNumbers=(!f._hasNumber||o[0])&&(!f._hasDelta||o[1])||!1,w("title.font.color",h.font.color),w("title.font.family",h.font.family),w("title.font.size",.25*(v||M||u.defaultNumberFontSize)),w("title.text"),f._hasGauge){(b=c.gauge)||(b={}),L=P.newContainer(f,"gauge"),T("shape"),(f._isBullet="bullet"===f.gauge.shape)||w("title.align","center"),(f._isAngular="angular"===f.gauge.shape)||w("align","center"),T("bgcolor",h.paper_bgcolor),T("borderwidth"),T("bordercolor"),T("bar.color"),T("bar.line.color"),T("bar.line.width"),T("bar.thickness",u.valueThickness*("bullet"===f.gauge.shape?.5:1)),C(b,L,{name:"steps",handleItemDefaults:s}),T("threshold.value"),T("threshold.thickness"),T("threshold.line.width"),T("threshold.line.color"),x={},b&&(x=b.axis||{}),S=P.newContainer(L,"axis"),n("visible"),f._range=n("range",f._range);var D={outerTicks:!0};y(x,S,n,"linear"),l(x,S,n,"linear",D),r(x,S,n,"linear",D),e(x,S,n,D)}else w("title.align","center"),w("align","center"),f._isAngular=f._isBullet=!1;f._length=null}}},15154:function(q,W,t){"use strict";q.exports={moduleType:"trace",name:"indicator",basePlotModule:t(15970),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:t(54846),supplyDefaults:t(94425).supplyDefaults,calc:t(24667).calc,plot:t(75634),meta:{}}},75634:function(q,W,t){"use strict";var A=t(39898),g=t(81684).sX,i=t(81684).k4,P=t(71828),C=P.strScale,u=P.strTranslate,y=P.rad2deg,e=t(18783).MID_SHIFT,r=t(91424),l=t(84577),a=t(63893),s=t(89298),c=t(71453),f=t(52830),m=t(13838),h=t(7901),w={left:"start",center:"middle",right:"end"},p={left:0,center:.5,right:1},o=/[yzafpn\xb5mkMGTPEZY]/;function v(D){return D&&D.duration>0}function b(D,N,k,O){var X,rt,et,st,B=k[0].trace,z=O.size,U=O.radius,H=O.innerRadius,J=O.gaugeBg,nt=O.gaugeOutline,it=[z.l+z.w/2,z.t+z.h/2+U/2],ut=O.gauge,Q=O.layer,j=O.transitionOpts,Z=O.onComplete,G=Math.PI/2;function K(Ot){var qt=B.gauge.axis.range[0],oe=(Ot-qt)/(B.gauge.axis.range[1]-qt)*Math.PI-G;return oe<-G?-G:oe>G?G:oe}function at(Ot){return A.svg.arc().innerRadius((H+U)/2-Ot/2*(U-H)).outerRadius((H+U)/2+Ot/2*(U-H)).startAngle(-G)}function $(Ot){Ot.attr("d",function(qt){return at(qt.thickness).startAngle(K(qt.range[0])).endAngle(K(qt.range[1]))()})}ut.enter().append("g").classed("angular",!0),ut.attr("transform",u(it[0],it[1])),Q.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),Q.selectAll("g.xangularaxistick,path,text").remove(),(X=T(D,B.gauge.axis)).type="linear",X.range=B.gauge.axis.range,X._id="xangularaxis",X.ticklabeloverflow="allow",X.setScale();var dt=function(Ot){return(X.range[0]-Ot.x)/(X.range[1]-X.range[0])*Math.PI+Math.PI},bt={},Lt=s.makeLabelFns(X,0).labelStandoff;bt.xFn=function(Ot){var qt=dt(Ot);return Math.cos(qt)*Lt},bt.yFn=function(Ot){var qt=dt(Ot),ie=Math.sin(qt)>0?.2:1;return-Math.sin(qt)*(Lt+Ot.fontSize*ie)+Math.abs(Math.cos(qt))*(Ot.fontSize*e)},bt.anchorFn=function(Ot){var qt=dt(Ot),ie=Math.cos(qt);return Math.abs(ie)<.1?"middle":ie>0?"start":"end"},bt.heightFn=function(Ot,qt,ie){var oe=dt(Ot);return-.5*(1+Math.sin(oe))*ie};var It=function(Ot){return u(it[0]+U*Math.cos(Ot),it[1]-U*Math.sin(Ot))};et=function(Ot){return It(dt(Ot))};rt=s.calcTicks(X),st=s.getTickSigns(X)[2],X.visible&&(s.drawTicks(D,X,{vals:rt,layer:Q,path:"M"+(st="inside"===X.ticks?-1:1)*((X.linewidth||1)/2)+",0h"+st*X.ticklen,transFn:function(Ot){var qt=dt(Ot);return It(qt)+"rotate("+-y(qt)+")"}}),s.drawLabels(D,X,{vals:rt,layer:Q,transFn:et,labelFns:bt}));var At=[J].concat(B.gauge.steps),Gt=ut.selectAll("g.bg-arc").data(At);Gt.enter().append("g").classed("bg-arc",!0).append("path"),Gt.select("path").call($).call(x),Gt.exit().remove();var Wt=at(B.gauge.bar.thickness),Pt=ut.selectAll("g.value-arc").data([B.gauge.bar]);Pt.enter().append("g").classed("value-arc",!0).append("path");var Vt=Pt.select("path");v(j)?(Vt.transition().duration(j.duration).ease(j.easing).each("end",function(){Z&&Z()}).each("interrupt",function(){Z&&Z()}).attrTween("d",function S(D,N,k){return function(){var O=g(N,k);return function(B){return D.endAngle(O(B))()}}}(Wt,K(k[0].lastY),K(k[0].y))),B._lastValue=k[0].y):Vt.attr("d","number"==typeof k[0].y?Wt.endAngle(K(k[0].y)):"M0,0Z"),Vt.call(x),Pt.exit().remove(),At=[];var te=B.gauge.threshold.value;(te||0===te)&&At.push({range:[te,te],color:B.gauge.threshold.color,line:{color:B.gauge.threshold.line.color,width:B.gauge.threshold.line.width},thickness:B.gauge.threshold.thickness});var Qt=ut.selectAll("g.threshold-arc").data(At);Qt.enter().append("g").classed("threshold-arc",!0).append("path"),Qt.select("path").call($).call(x),Qt.exit().remove();var Bt=ut.selectAll("g.gauge-outline").data([nt]);Bt.enter().append("g").classed("gauge-outline",!0).append("path"),Bt.select("path").call($).call(x),Bt.exit().remove()}function x(D){D.each(function(N){h.stroke(A.select(this),N.line.color)}).each(function(N){h.fill(A.select(this),N.color)}).style("stroke-width",function(N){return N.line.width})}function T(D,N,k){var O=D._fullLayout,B=P.extendFlat({type:"linear",ticks:"outside",range:k,showline:!0},N),z={type:"linear",_id:"x"+N._id},U={letter:"x",font:O.font,noHover:!0,noTickson:!0};function H(J,nt){return P.coerce(B,z,m,J,nt)}return c(B,z,H,U,O),f(B,z,H,U),z}function n(D,N,k){return[Math.min(N/D.width,k/D.height),D,N+"x"+k]}function d(D,N,k,O){var B=document.createElementNS("http://www.w3.org/2000/svg","text"),z=A.select(B);return z.text(D).attr("x",0).attr("y",0).attr("text-anchor",k).attr("data-unformatted",D).call(a.convertToTspans,O).call(r.font,N),r.bBox(z.node())}function F(D,N,k,O,B,z){var U="_cache"+N;D[U]&&D[U].key===B||(D[U]={key:B,value:k});var H=P.aggNums(z,null,[D[U].value,O],2);return D[U].value=H,H}q.exports=function(N,k,O,B){var U,z=N._fullLayout;v(O)&&B&&(U=B()),P.makeTraceGroups(z._indicatorlayer,k,"trace").each(function(H){var rt,et,st,Lt,It,nt=H[0].trace,it=A.select(this),ut=nt._hasGauge,Q=nt._isAngular,j=nt._isBullet,Z=nt.domain,G={w:z._size.w*(Z.x[1]-Z.x[0]),h:z._size.h*(Z.y[1]-Z.y[0]),l:z._size.l+z._size.w*Z.x[0],r:z._size.r+z._size.w*(1-Z.x[1]),t:z._size.t+z._size.h*(1-Z.y[1]),b:z._size.b+z._size.h*Z.y[0]},K=G.l+G.w/2,at=G.t+G.h/2,$=Math.min(G.w/2,G.h),X=l.innerRadius*$,dt=nt.align||"center";if(et=at,ut){if(Q&&(rt=K,et=at+$/2,st=function(Pt){return function E(D,N){return[N/Math.sqrt(D.width/2*(D.width/2)+D.height*D.height),D,N]}(Pt,.9*X)}),j){var bt=l.bulletPadding,gt=1-l.bulletNumberDomainSize+bt;rt=G.l+(gt+(1-gt)*p[dt])*G.w,st=function(Pt){return n(Pt,(l.bulletNumberDomainSize-bt)*G.w,G.h)}}}else rt=G.l+p[dt]*G.w,st=function(Pt){return n(Pt,G.w,G.h)};(function L(D,N,k,O){var Q,j,Z,B=k[0].trace,z=O.numbersX,U=O.numbersY,H=B.align||"center",J=w[H],nt=O.transitionOpts,it=O.onComplete,ut=P.ensureSingle(N,"g","numbers"),G=[];B._hasNumber&&G.push("number"),B._hasDelta&&(G.push("delta"),"left"===B.delta.position&&G.reverse());var K=ut.selectAll("text").data(G);function at(It,Mt,xt,At){if(!It.match("s")||xt>=0==At>=0||Mt(xt).slice(-1).match(o)||Mt(At).slice(-1).match(o))return Mt;var Gt=It.slice().replace("s","f").replace(/\d+/,function(Pt){return parseInt(Pt)-1}),Wt=T(D,{tickformat:Gt});return function(Pt){return Math.abs(Pt)<1?s.tickText(Wt,Pt).text:Mt(Pt)}}K.enter().append("text"),K.attr("text-anchor",function(){return J}).attr("class",function(It){return It}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),K.exit().remove();var et,rt=B.mode+B.align;if(B._hasDelta&&(et=function X(){var It=T(D,{tickformat:B.delta.valueformat},B._range);It.setScale(),s.prepTicks(It);var Mt=function(Qt){return s.tickText(It,Qt).text},xt=B.delta.suffix,At=B.delta.prefix,Gt=function(Qt){return B.delta.relative?Qt.relativeDelta:Qt.delta},Wt=function(Qt,Bt){return 0===Qt||"number"!=typeof Qt||isNaN(Qt)?"-":(Qt>0?B.delta.increasing.symbol:B.delta.decreasing.symbol)+At+Bt(Qt)+xt},Pt=function(Qt){return Qt.delta>=0?B.delta.increasing.color:B.delta.decreasing.color};void 0===B._deltaLastValue&&(B._deltaLastValue=Gt(k[0]));var Vt=ut.select("text.delta");function te(){Vt.text(Wt(Gt(k[0]),Mt)).call(h.fill,Pt(k[0])).call(a.convertToTspans,D)}return Vt.call(r.font,B.delta.font).call(h.fill,Pt({delta:B._deltaLastValue})),v(nt)?Vt.transition().duration(nt.duration).ease(nt.easing).tween("text",function(){var Qt=A.select(this),Bt=Gt(k[0]),Ot=B._deltaLastValue,qt=at(B.delta.valueformat,Mt,Ot,Bt),ie=i(Ot,Bt);return B._deltaLastValue=Bt,function(oe){Qt.text(Wt(ie(oe),qt)),Qt.call(h.fill,Pt({delta:ie(oe)}))}}).each("end",function(){te(),it&&it()}).each("interrupt",function(){te(),it&&it()}):te(),j=d(Wt(Gt(k[0]),Mt),B.delta.font,J,D),Vt}(),rt+=B.delta.position+B.delta.font.size+B.delta.font.family+B.delta.valueformat,rt+=B.delta.increasing.symbol+B.delta.decreasing.symbol,Z=j),B._hasNumber&&(function $(){var It=T(D,{tickformat:B.number.valueformat},B._range);It.setScale(),s.prepTicks(It);var Mt=function(Pt){return s.tickText(It,Pt).text},xt=B.number.suffix,At=B.number.prefix,Gt=ut.select("text.number");function Wt(){var Pt="number"==typeof k[0].y?At+Mt(k[0].y)+xt:"-";Gt.text(Pt).call(r.font,B.number.font).call(a.convertToTspans,D)}v(nt)?Gt.transition().duration(nt.duration).ease(nt.easing).each("end",function(){Wt(),it&&it()}).each("interrupt",function(){Wt(),it&&it()}).attrTween("text",function(){var Pt=A.select(this),Vt=i(k[0].lastY,k[0].y);B._lastValue=k[0].y;var te=at(B.number.valueformat,Mt,k[0].lastY,k[0].y);return function(Qt){Pt.text(At+te(Vt(Qt))+xt)}}):Wt(),Q=d(At+Mt(k[0].y)+xt,B.number.font,J,D)}(),rt+=B.number.font.size+B.number.font.family+B.number.valueformat+B.number.suffix+B.number.prefix,Z=Q),B._hasDelta&&B._hasNumber){var bt,gt,st=[(Q.left+Q.right)/2,(Q.top+Q.bottom)/2],dt=[(j.left+j.right)/2,(j.top+j.bottom)/2],Lt=.75*B.delta.font.size;"left"===B.delta.position&&(bt=F(B,"deltaPos",0,-1*(Q.width*p[B.align]+j.width*(1-p[B.align])+Lt),rt,Math.min),gt=st[1]-dt[1],Z={width:Q.width+j.width+Lt,height:Math.max(Q.height,j.height),left:j.left+bt,right:Q.right,top:Math.min(Q.top,j.top+gt),bottom:Math.max(Q.bottom,j.bottom+gt)}),"right"===B.delta.position&&(bt=F(B,"deltaPos",0,Q.width*(1-p[B.align])+j.width*p[B.align]+Lt,rt,Math.max),gt=st[1]-dt[1],Z={width:Q.width+j.width+Lt,height:Math.max(Q.height,j.height),left:Q.left,right:j.right+bt,top:Math.min(Q.top,j.top+gt),bottom:Math.max(Q.bottom,j.bottom+gt)}),"bottom"===B.delta.position&&(bt=null,gt=j.height,Z={width:Math.max(Q.width,j.width),height:Q.height+j.height,left:Math.min(Q.left,j.left),right:Math.max(Q.right,j.right),top:Q.bottom-Q.height,bottom:Q.bottom+j.height}),"top"===B.delta.position&&(bt=null,gt=Q.top,Z={width:Math.max(Q.width,j.width),height:Q.height+j.height,left:Math.min(Q.left,j.left),right:Math.max(Q.right,j.right),top:Q.bottom-Q.height-j.height,bottom:Q.bottom}),et.attr({dx:bt,dy:gt})}(B._hasNumber||B._hasDelta)&&ut.attr("transform",function(){var xt,It=O.numbersScaler(Z),Mt=F(B,"numbersScale",1,It[0],rt+=It[2],Math.min);B._scaleNumbers||(Mt=1),B._numbersTop=Mt*Z.top+(xt=B._isAngular?U-Mt*Z.bottom:U-Mt*(Z.top+Z.bottom)/2);var At=Z[H];"center"===H&&(At=(Z.left+Z.right)/2);var Gt=z-Mt*At;return Gt=F(B,"numbersTranslate",0,Gt,rt,Math.max),u(Gt,xt)+C(Mt)})})(N,it,H,{numbersX:rt,numbersY:et,numbersScaler:st,transitionOpts:O,onComplete:U}),ut&&(Lt={range:nt.gauge.axis.range,color:nt.gauge.bgcolor,line:{color:nt.gauge.bordercolor,width:0},thickness:1},It={range:nt.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:nt.gauge.bordercolor,width:nt.gauge.borderwidth},thickness:1});var Mt=it.selectAll("g.angular").data(Q?H:[]);Mt.exit().remove();var xt=it.selectAll("g.angularaxis").data(Q?H:[]);xt.exit().remove(),Q&&b(N,0,H,{radius:$,innerRadius:X,gauge:Mt,layer:xt,size:G,gaugeBg:Lt,gaugeOutline:It,transitionOpts:O,onComplete:U});var At=it.selectAll("g.bullet").data(j?H:[]);At.exit().remove();var Gt=it.selectAll("g.bulletaxis").data(j?H:[]);Gt.exit().remove(),j&&function M(D,N,k,O){var j,Z,G,K,at,B=k[0].trace,z=O.gauge,U=O.layer,H=O.gaugeBg,J=O.gaugeOutline,nt=O.size,it=B.domain,ut=O.transitionOpts,Q=O.onComplete;z.enter().append("g").classed("bullet",!0),z.attr("transform",u(nt.l,nt.t)),U.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),U.selectAll("g.xbulletaxistick,path,text").remove();var $=nt.h,X=B.gauge.bar.thickness*$,rt=it.x[0],et=it.x[0]+(it.x[1]-it.x[0])*(B._hasNumber||B._hasDelta?1-l.bulletNumberDomainSize:1);function st(xt){xt.attr("width",function(At){return Math.max(0,j.c2p(At.range[1])-j.c2p(At.range[0]))}).attr("x",function(At){return j.c2p(At.range[0])}).attr("y",function(At){return.5*(1-At.thickness)*$}).attr("height",function(At){return At.thickness*$})}(j=T(D,B.gauge.axis))._id="xbulletaxis",j.domain=[rt,et],j.setScale(),Z=s.calcTicks(j),G=s.makeTransTickFn(j),K=s.getTickSigns(j)[2],at=nt.t+nt.h,j.visible&&(s.drawTicks(D,j,{vals:"inside"===j.ticks?s.clipEnds(j,Z):Z,layer:U,path:s.makeTickPath(j,at,K),transFn:G}),s.drawLabels(D,j,{vals:Z,layer:U,transFn:G,labelFns:s.makeLabelFns(j,at)}));var dt=[H].concat(B.gauge.steps),bt=z.selectAll("g.bg-bullet").data(dt);bt.enter().append("g").classed("bg-bullet",!0).append("rect"),bt.select("rect").call(st).call(x),bt.exit().remove();var gt=z.selectAll("g.value-bullet").data([B.gauge.bar]);gt.enter().append("g").classed("value-bullet",!0).append("rect"),gt.select("rect").attr("height",X).attr("y",($-X)/2).call(x),v(ut)?gt.select("rect").transition().duration(ut.duration).ease(ut.easing).each("end",function(){Q&&Q()}).each("interrupt",function(){Q&&Q()}).attr("width",Math.max(0,j.c2p(Math.min(B.gauge.axis.range[1],k[0].y)))):gt.select("rect").attr("width","number"==typeof k[0].y?Math.max(0,j.c2p(Math.min(B.gauge.axis.range[1],k[0].y))):0),gt.exit().remove();var Lt=k.filter(function(){return B.gauge.threshold.value||0===B.gauge.threshold.value}),It=z.selectAll("g.threshold-bullet").data(Lt);It.enter().append("g").classed("threshold-bullet",!0).append("line"),It.select("line").attr("x1",j.c2p(B.gauge.threshold.value)).attr("x2",j.c2p(B.gauge.threshold.value)).attr("y1",(1-B.gauge.threshold.thickness)/2*$).attr("y2",(1-(1-B.gauge.threshold.thickness)/2)*$).call(h.stroke,B.gauge.threshold.line.color).style("stroke-width",B.gauge.threshold.line.width),It.exit().remove();var Mt=z.selectAll("g.gauge-outline").data([J]);Mt.enter().append("g").classed("gauge-outline",!0).append("rect"),Mt.select("rect").call(st).call(x),Mt.exit().remove()}(N,0,H,{gauge:At,layer:Gt,size:G,gaugeBg:Lt,gaugeOutline:It,transitionOpts:O,onComplete:U});var Wt=it.selectAll("text.title").data(H);Wt.exit().remove(),Wt.enter().append("text").classed("title",!0),Wt.attr("text-anchor",function(){return j?w.right:w[nt.title.align]}).text(nt.title.text).call(r.font,nt.title.font).call(a.convertToTspans,N),Wt.attr("transform",function(){var Vt,Pt=G.l+G.w*p[nt.title.align],te=l.titlePadding,Qt=r.bBox(Wt.node());return ut?(Q&&(Vt=nt.gauge.axis.visible?r.bBox(xt.node()).top-te-Qt.bottom:G.t+G.h/2-$/2-Qt.bottom-te),j&&(Vt=et-(Qt.top+Qt.bottom)/2,Pt=G.l-l.bulletPadding*G.w)):Vt=nt._numbersTop-te-Qt.bottom,u(Pt,Vt)})})}},16249:function(q,W,t){"use strict";var A=t(50693),g=t(12663).axisHoverFormat,i=t(5386).fF,P=t(2418),C=t(9012),u=t(1426).extendFlat,y=t(30962).overrideAll;var l=q.exports=y(u({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:i(),xhoverformat:g("x"),yhoverformat:g("y"),zhoverformat:g("z"),valuehoverformat:g("value",1),showlegend:u({},C.showlegend,{dflt:!1})},A("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:P.opacity,lightposition:P.lightposition,lighting:P.lighting,flatshading:P.flatshading,contour:P.contour,hoverinfo:u({},C.hoverinfo)}),"calc","nested");l.flatshading.dflt=!0,l.lighting.facenormalsepsilon.dflt=0,l.x.editType=l.y.editType=l.z.editType=l.value.editType="calc+clearAxisTypes",l.transforms=void 0},56959:function(q,W,t){"use strict";var A=t(78803),g=t(88489).processGrid,i=t(88489).filter;q.exports=function(C,u){u._len=Math.min(u.x.length,u.y.length,u.z.length,u.value.length),u._x=i(u.x,u._len),u._y=i(u.y,u._len),u._z=i(u.z,u._len),u._value=i(u.value,u._len);var y=g(u);u._gridFill=y.fill,u._Xs=y.Xs,u._Ys=y.Ys,u._Zs=y.Zs,u._len=y.len;for(var e=1/0,r=-1/0,l=0;l<u._len;l++){var a=u._value[l];e=Math.min(e,a),r=Math.max(r,a)}u._minValues=e,u._maxValues=r,u._vMin=null==u.isomin?e:u.isomin,u._vMax=void 0===u.isomax||null===u.isomin?r:u.isomax,A(C,u,{vals:[u._vMin,u._vMax],containerStr:"",cLetter:"c"})}},22674:function(q,W,t){"use strict";var A=t(9330).gl_mesh3d,g=t(81697).parseColorScale,i=t(78614),P=t(21081).extractOpts,C=t(90060),u=function(s,c){for(var f=c.length-1;f>0;f--){var m=Math.min(c[f],c[f-1]),h=Math.max(c[f],c[f-1]);if(h>m&&m<s&&s<=h)return{id:f,distRatio:(h-s)/(h-m)}}return{id:0,distRatio:0}};function y(s,c,f){this.scene=s,this.uid=f,this.mesh=c,this.name="",this.data=null,this.showContour=!1}var e=y.prototype;e.handlePick=function(s){if(s.object===this.mesh){var c=s.data.index,m=this.data._meshY[c],h=this.data._meshZ[c],w=this.data._Ys.length,p=this.data._Zs.length,o=u(this.data._meshX[c],this.data._Xs).id,v=u(m,this.data._Ys).id,M=u(h,this.data._Zs).id,b=s.index=M+p*v+p*w*o;s.traceCoordinate=[this.data._meshX[b],this.data._meshY[b],this.data._meshZ[b],this.data._value[b]];var L=this.data.hovertext||this.data.text;return Array.isArray(L)&&void 0!==L[b]?s.textLabel=L[b]:L&&(s.textLabel=L),!0}},e.update=function(s){var c=this.scene,f=c.fullSceneLayout;function m(v,M,b,L){return M.map(function(x){return v.d2l(x,0,L)*b})}this.data=l(s);var p={positions:C(m(f.xaxis,s._meshX,c.dataScale[0],s.xcalendar),m(f.yaxis,s._meshY,c.dataScale[1],s.ycalendar),m(f.zaxis,s._meshZ,c.dataScale[2],s.zcalendar)),cells:C(s._meshI,s._meshJ,s._meshK),lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,contourEnable:s.contour.show,contourColor:i(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},o=P(s);p.vertexIntensity=s._meshIntensity,p.vertexIntensityBounds=[o.min,o.max],p.colormap=g(s),this.mesh.update(p)},e.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var r=["xyz","xzy","yxz","yzx","zxy","zyx"];function l(s){s._meshI=[],s._meshJ=[],s._meshK=[];var v,M,O,B,z,U,Z,c=s.surface.show,f=s.spaceframe.show,m=s.surface.fill,h=s.spaceframe.fill,w=!1,p=!1,o=0,b=s._Xs,L=s._Ys,x=s._Zs,S=b.length,T=L.length,n=x.length,E=r.indexOf(s._gridFill.replace(/-/g,"").replace(/\+/g,"")),d=function(Et,St,Dt){switch(E){case 5:return Dt+n*St+n*T*Et;case 4:return Dt+n*Et+n*S*St;case 3:return St+T*Dt+T*n*Et;case 2:return St+T*Et+T*S*Dt;case 1:return Et+S*Dt+S*n*St;default:return Et+S*St+S*T*Dt}},F=s._minValues,D=s._maxValues,N=s._vMin,k=s._vMax;function H(Et,St,Dt){for(var Ft=U.length,Nt=M;Nt<Ft;Nt++)if(Et===O[Nt]&&St===B[Nt]&&Dt===z[Nt])return Nt;return-1}function J(){M=v}function nt(){O=[],B=[],z=[],U=[],v=0,J()}function it(Et,St,Dt,Ft){return O.push(Et),B.push(St),z.push(Dt),U.push(Ft),++v-1}function ut(Et,St,Dt){return s._meshI.push(Et),s._meshJ.push(St),s._meshK.push(Dt),++o-1}function j(Et,St,Dt){for(var Ft=[],Nt=0;Nt<Et.length;Nt++)Ft[Nt]=Et[Nt]*(1-Dt)+Dt*St[Nt];return Ft}function G(Et){Z=Et}function at(Et,St){return"all"===Et||null===Et||Et.indexOf(St)>-1}function $(Et,St){return null===Et?St:Et}function X(Et,St,Dt){J();var Ft=[St],Nt=[Dt];if(Z>=1)Ft=[St],Nt=[Dt];else if(Z>0){var Rt=function K(Et,St){var Dt=Et[0],Ft=Et[1],Nt=Et[2],Rt=function Q(Et,St,Dt){for(var Ft=[],Nt=0;Nt<Et.length;Nt++)Ft[Nt]=(Et[Nt]+St[Nt]+Dt[Nt])/3;return Ft}(Dt,Ft,Nt),wt=Math.sqrt(1-Z),ft=j(Rt,Dt,wt),pt=j(Rt,Ft,wt),kt=j(Rt,Nt,wt),Zt=St[0],ee=St[1],se=St[2];return{xyzv:[[Dt,Ft,pt],[pt,ft,Dt],[Ft,Nt,kt],[kt,pt,Ft],[Nt,Dt,ft],[ft,kt,Nt]],abc:[[Zt,ee,-1],[-1,-1,Zt],[ee,se,-1],[-1,-1,ee],[se,Zt,-1],[-1,-1,se]]}}(St,Dt);Ft=Rt.xyzv,Nt=Rt.abc}for(var wt=0;wt<Ft.length;wt++){St=Ft[wt],Dt=Nt[wt];for(var ft=[],pt=0;pt<3;pt++){var kt=St[pt][0],Zt=St[pt][1],ee=St[pt][2],se=St[pt][3],Be=Dt[pt]>-1?Dt[pt]:H(kt,Zt,ee);ft[pt]=Be>-1?Be:it(kt,Zt,ee,$(Et,se))}ut(ft[0],ft[1],ft[2])}}function st(Et,St,Dt,Ft){var Nt=Et[3];Nt<Dt&&(Nt=Dt),Nt>Ft&&(Nt=Ft);for(var Rt=(Et[3]-Nt)/(Et[3]-St[3]+1e-9),wt=[],ft=0;ft<4;ft++)wt[ft]=(1-Rt)*Et[ft]+Rt*St[ft];return wt}function dt(Et,St,Dt){return Et>=St&&Et<=Dt}function bt(Et){var St=.001*(k-N);return Et>=N-St&&Et<=k+St}function gt(Et){for(var St=[],Dt=0;Dt<4;Dt++){var Ft=Et[Dt];St.push([s._x[Ft],s._y[Ft],s._z[Ft],s._value[Ft]])}return St}function It(Et,St,Dt,Ft,Nt,Rt){Rt||(Rt=1),Dt=[-1,-1,-1];var wt=!1,ft=[dt(St[0][3],Ft,Nt),dt(St[1][3],Ft,Nt),dt(St[2][3],Ft,Nt)];if(!ft[0]&&!ft[1]&&!ft[2])return!1;var pt=function(Zt,ee,se){return bt(ee[0][3])&&bt(ee[1][3])&&bt(ee[2][3])?(X(Zt,ee,se),!0):Rt<3&&It(Zt,ee,se,N,k,++Rt)};if(ft[0]&&ft[1]&&ft[2])return pt(Et,St,Dt)||wt;var kt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(Zt){if(ft[Zt[0]]&&ft[Zt[1]]&&!ft[Zt[2]]){var ee=St[Zt[0]],se=St[Zt[1]],Be=St[Zt[2]],Ke=st(Be,ee,Ft,Nt),xe=st(Be,se,Ft,Nt);wt=pt(Et,[xe,Ke,ee],[-1,-1,Dt[Zt[0]]])||wt,wt=pt(Et,[ee,se,xe],[Dt[Zt[0]],Dt[Zt[1]],-1])||wt,kt=!0}}),kt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(Zt){if(ft[Zt[0]]&&!ft[Zt[1]]&&!ft[Zt[2]]){var ee=St[Zt[0]],Be=St[Zt[2]],Ke=st(St[Zt[1]],ee,Ft,Nt),xe=st(Be,ee,Ft,Nt);wt=pt(Et,[xe,Ke,ee],[-1,-1,Dt[Zt[0]]])||wt,kt=!0}}),wt}function Mt(Et,St,Dt,Ft){var Nt=!1,Rt=gt(St),wt=[dt(Rt[0][3],Dt,Ft),dt(Rt[1][3],Dt,Ft),dt(Rt[2][3],Dt,Ft),dt(Rt[3][3],Dt,Ft)];if(!(wt[0]||wt[1]||wt[2]||wt[3]))return Nt;if(wt[0]&&wt[1]&&wt[2]&&wt[3])return p&&(Nt=function et(Et,St,Dt){var Ft=function(Nt,Rt,wt){X(Et,[St[Nt],St[Rt],St[wt]],[Dt[Nt],Dt[Rt],Dt[wt]])};Ft(0,1,2),Ft(3,0,1),Ft(2,3,0),Ft(1,2,3)}(Et,Rt,St)||Nt),Nt;var ft=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(pt){if(wt[pt[0]]&&wt[pt[1]]&&wt[pt[2]]&&!wt[pt[3]]){var kt=Rt[pt[0]],Zt=Rt[pt[1]],ee=Rt[pt[2]],se=Rt[pt[3]];if(p)Nt=X(Et,[kt,Zt,ee],[St[pt[0]],St[pt[1]],St[pt[2]]])||Nt;else{var Be=st(se,kt,Dt,Ft),Ke=st(se,Zt,Dt,Ft),xe=st(se,ee,Dt,Ft);Nt=X(null,[Be,Ke,xe],[-1,-1,-1])||Nt}ft=!0}}),ft||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(pt){if(wt[pt[0]]&&wt[pt[1]]&&!wt[pt[2]]&&!wt[pt[3]]){var kt=Rt[pt[0]],Zt=Rt[pt[1]],ee=Rt[pt[2]],se=Rt[pt[3]],Be=st(ee,kt,Dt,Ft),Ke=st(ee,Zt,Dt,Ft),xe=st(se,Zt,Dt,Ft),Pe=st(se,kt,Dt,Ft);p?(Nt=X(Et,[kt,Pe,Be],[St[pt[0]],-1,-1])||Nt,Nt=X(Et,[Zt,Ke,xe],[St[pt[1]],-1,-1])||Nt):Nt=function rt(Et,St,Dt){var Ft=function(Nt,Rt,wt){X(Et,[St[Nt],St[Rt],St[wt]],[Dt[Nt],Dt[Rt],Dt[wt]])};Ft(0,1,2),Ft(2,3,0)}(null,[Be,Ke,xe,Pe],[-1,-1,-1,-1])||Nt,ft=!0}}),ft)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(pt){if(wt[pt[0]]&&!wt[pt[1]]&&!wt[pt[2]]&&!wt[pt[3]]){var kt=Rt[pt[0]],ee=Rt[pt[2]],se=Rt[pt[3]],Be=st(Rt[pt[1]],kt,Dt,Ft),Ke=st(ee,kt,Dt,Ft),xe=st(se,kt,Dt,Ft);p?(Nt=X(Et,[kt,Be,Ke],[St[pt[0]],-1,-1])||Nt,Nt=X(Et,[kt,Ke,xe],[St[pt[0]],-1,-1])||Nt,Nt=X(Et,[kt,xe,Be],[St[pt[0]],-1,-1])||Nt):Nt=X(null,[Be,Ke,xe],[-1,-1,-1])||Nt,ft=!0}}),Nt}function xt(Et,St,Dt,Ft,Nt,Rt,wt,ft,pt,kt,Zt){var ee=!1;return w&&(at(Et,"A")&&(ee=Mt(null,[St,Dt,Ft,Rt],kt,Zt)||ee),at(Et,"B")&&(ee=Mt(null,[Dt,Ft,Nt,pt],kt,Zt)||ee),at(Et,"C")&&(ee=Mt(null,[Dt,Rt,wt,pt],kt,Zt)||ee),at(Et,"D")&&(ee=Mt(null,[Ft,Rt,ft,pt],kt,Zt)||ee),at(Et,"E")&&(ee=Mt(null,[Dt,Ft,Rt,pt],kt,Zt)||ee)),p&&(ee=Mt(Et,[Dt,Ft,Rt,pt],kt,Zt)||ee),ee}function At(Et,St,Dt,Ft,Nt,Rt,wt,ft){return[!0===ft[0]||It(Et,gt([St,Dt,Ft]),[St,Dt,Ft],Rt,wt),!0===ft[1]||It(Et,gt([Ft,Nt,St]),[Ft,Nt,St],Rt,wt)]}function Gt(Et,St,Dt,Ft,Nt,Rt,wt,ft,pt){return ft?At(Et,St,Dt,Nt,Ft,Rt,wt,pt):At(Et,Dt,Nt,Ft,St,Rt,wt,pt)}function Wt(Et,St,Dt,Ft,Nt,Rt,wt){var pt,kt,Zt,ee,ft=!1,se=function(){ft=It(Et,[pt,kt,Zt],[-1,-1,-1],Nt,Rt)||ft,ft=It(Et,[Zt,ee,pt],[-1,-1,-1],Nt,Rt)||ft},Be=wt[0],Ke=wt[1],xe=wt[2];return Be&&(pt=j(gt([d(St,Dt-0,Ft-0)])[0],gt([d(St-1,Dt-0,Ft-0)])[0],Be),kt=j(gt([d(St,Dt-0,Ft-1)])[0],gt([d(St-1,Dt-0,Ft-1)])[0],Be),Zt=j(gt([d(St,Dt-1,Ft-1)])[0],gt([d(St-1,Dt-1,Ft-1)])[0],Be),ee=j(gt([d(St,Dt-1,Ft-0)])[0],gt([d(St-1,Dt-1,Ft-0)])[0],Be),se()),Ke&&(pt=j(gt([d(St-0,Dt,Ft-0)])[0],gt([d(St-0,Dt-1,Ft-0)])[0],Ke),kt=j(gt([d(St-0,Dt,Ft-1)])[0],gt([d(St-0,Dt-1,Ft-1)])[0],Ke),Zt=j(gt([d(St-1,Dt,Ft-1)])[0],gt([d(St-1,Dt-1,Ft-1)])[0],Ke),ee=j(gt([d(St-1,Dt,Ft-0)])[0],gt([d(St-1,Dt-1,Ft-0)])[0],Ke),se()),xe&&(pt=j(gt([d(St-0,Dt-0,Ft)])[0],gt([d(St-0,Dt-0,Ft-1)])[0],xe),kt=j(gt([d(St-0,Dt-1,Ft)])[0],gt([d(St-0,Dt-1,Ft-1)])[0],xe),Zt=j(gt([d(St-1,Dt-1,Ft)])[0],gt([d(St-1,Dt-1,Ft-1)])[0],xe),ee=j(gt([d(St-1,Dt-0,Ft)])[0],gt([d(St-1,Dt-0,Ft-1)])[0],xe),se()),ft}function Pt(Et,St,Dt,Ft,Nt,Rt,wt,ft,pt,kt,Zt,ee){var se=Et;return ee?(w&&"even"===Et&&(se=null),xt(se,St,Dt,Ft,Nt,Rt,wt,ft,pt,kt,Zt)):(w&&"odd"===Et&&(se=null),xt(se,pt,ft,wt,Rt,Nt,Ft,Dt,St,kt,Zt))}function Vt(Et,St,Dt,Ft,Nt){for(var Rt=[],wt=0,ft=0;ft<St.length;ft++)for(var pt=St[ft],kt=1;kt<n;kt++)for(var Zt=1;Zt<T;Zt++)Rt.push(Gt(Et,d(pt,Zt-1,kt-1),d(pt,Zt-1,kt),d(pt,Zt,kt-1),d(pt,Zt,kt),Dt,Ft,(pt+Zt+kt)%2,Nt&&Nt[wt]?Nt[wt]:[])),wt++;return Rt}function te(Et,St,Dt,Ft,Nt){for(var Rt=[],wt=0,ft=0;ft<St.length;ft++)for(var pt=St[ft],kt=1;kt<S;kt++)for(var Zt=1;Zt<n;Zt++)Rt.push(Gt(Et,d(kt-1,pt,Zt-1),d(kt,pt,Zt-1),d(kt-1,pt,Zt),d(kt,pt,Zt),Dt,Ft,(kt+pt+Zt)%2,Nt&&Nt[wt]?Nt[wt]:[])),wt++;return Rt}function Qt(Et,St,Dt,Ft,Nt){for(var Rt=[],wt=0,ft=0;ft<St.length;ft++)for(var pt=St[ft],kt=1;kt<T;kt++)for(var Zt=1;Zt<S;Zt++)Rt.push(Gt(Et,d(Zt-1,kt-1,pt),d(Zt-1,kt,pt),d(Zt,kt-1,pt),d(Zt,kt,pt),Dt,Ft,(Zt+kt+pt)%2,Nt&&Nt[wt]?Nt[wt]:[])),wt++;return Rt}function Bt(Et,St,Dt){for(var Ft=1;Ft<n;Ft++)for(var Nt=1;Nt<T;Nt++)for(var Rt=1;Rt<S;Rt++)Pt(Et,d(Rt-1,Nt-1,Ft-1),d(Rt-1,Nt-1,Ft),d(Rt-1,Nt,Ft-1),d(Rt-1,Nt,Ft),d(Rt,Nt-1,Ft-1),d(Rt,Nt-1,Ft),d(Rt,Nt,Ft-1),d(Rt,Nt,Ft),St,Dt,(Rt+Nt+Ft)%2)}function qt(Et,St,Dt){w=!0,Bt(Et,St,Dt),w=!1}function ie(Et,St,Dt,Ft,Nt,Rt){for(var wt=[],pt=0;pt<St.length;pt++)for(var kt=St[pt],Zt=1;Zt<n;Zt++)for(var ee=1;ee<T;ee++)wt.push(Wt(Et,kt,ee,Zt,Dt,Ft,Nt[pt]));return wt}function oe(Et,St,Dt,Ft,Nt,Rt){for(var wt=[],pt=0;pt<St.length;pt++)for(var kt=St[pt],Zt=1;Zt<S;Zt++)for(var ee=1;ee<n;ee++)wt.push(Wt(Et,Zt,kt,ee,Dt,Ft,Nt[pt]));return wt}function pe(Et,St,Dt,Ft,Nt,Rt){for(var wt=[],pt=0;pt<St.length;pt++)for(var kt=St[pt],Zt=1;Zt<T;Zt++)for(var ee=1;ee<S;ee++)wt.push(Wt(Et,ee,Zt,kt,Dt,Ft,Nt[pt]));return wt}function de(Et,St){for(var Dt=[],Ft=Et;Ft<St;Ft++)Dt.push(Ft);return Dt}return function Kt(){nt(),function Fe(){for(var Et=0;Et<S;Et++)for(var St=0;St<T;St++)for(var Dt=0;Dt<n;Dt++){var Ft=d(Et,St,Dt);it(s._x[Ft],s._y[Ft],s._z[Ft],s._value[Ft])}}();var Et=null;if(f&&h&&(G(h),function Ot(Et,St,Dt){p=!0,Bt(Et,St,Dt),p=!1}(Et,N,k)),c&&m){G(m);for(var St=s.surface.pattern,Dt=s.surface.count,Ft=0;Ft<Dt;Ft++){var Nt=1===Dt?.5:Ft/(Dt-1),Rt=(1-Nt)*N+Nt*k,pt=Math.abs(Rt-F)>Math.abs(Rt-D)?[F,Rt]:[Rt,D];qt(St,pt[0],pt[1])}}var kt=[[Math.min(N,D),Math.max(N,D)],[Math.min(F,k),Math.max(F,k)]];["x","y","z"].forEach(function(Zt){for(var ee=[],se=0;se<kt.length;se++){var Be=0,Ke=kt[se][0],xe=kt[se][1],Pe=s.slices[Zt];if(Pe.show&&Pe.fill){G(Pe.fill);var Ge=[],gr=[],ue=[];if(Pe.locations.length)for(var Ne=0;Ne<Pe.locations.length;Ne++){var Ye=u(Pe.locations[Ne],"x"===Zt?b:"y"===Zt?L:x);0===Ye.distRatio?Ge.push(Ye.id):Ye.id>0&&(gr.push(Ye.id),ue.push("x"===Zt?[Ye.distRatio,0,0]:"y"===Zt?[0,Ye.distRatio,0]:[0,0,Ye.distRatio]))}else Ge=de(1,"x"===Zt?S-1:"y"===Zt?T-1:n-1);gr.length>0&&(ee[Be]="x"===Zt?ie(Et,gr,Ke,xe,ue):"y"===Zt?oe(Et,gr,Ke,xe,ue):pe(Et,gr,Ke,xe,ue),Be++),Ge.length>0&&(ee[Be]="x"===Zt?Vt(Et,Ge,Ke,xe,ee[Be]):"y"===Zt?te(Et,Ge,Ke,xe,ee[Be]):Qt(Et,Ge,Ke,xe,ee[Be]),Be++)}var xr=s.caps[Zt];xr.show&&xr.fill&&(G(xr.fill),ee[Be]="x"===Zt?Vt(Et,[0,S-1],Ke,xe,ee[Be]):"y"===Zt?te(Et,[0,T-1],Ke,xe,ee[Be]):Qt(Et,[0,n-1],Ke,xe,ee[Be]),Be++)}}),0===o&&nt(),s._meshX=O,s._meshY=B,s._meshZ=z,s._meshIntensity=U,s._Xs=b,s._Ys=L,s._Zs=x}(),s}q.exports={findNearestOnAxis:u,generateIsoMeshes:l,createIsosurfaceTrace:function a(s,c){var m=A({gl:s.glplot.gl}),h=new y(s,m,c.uid);return m._trace=h,h.update(c),s.glplot.add(m),h}}},82738:function(q,W,t){"use strict";var A=t(71828),g=t(73972),i=t(16249),P=t(1586);function u(y,e,r,l,a){var s=a("isomin"),c=a("isomax");null!=c&&null!=s&&s>c&&(e.isomin=null,e.isomax=null);var f=a("x"),m=a("y"),h=a("z"),w=a("value");f&&f.length&&m&&m.length&&h&&h.length&&w&&w.length?(g.getComponentMethod("calendars","handleTraceDefaults")(y,e,["x","y","z"],l),a("valuehoverformat"),["x","y","z"].forEach(function(b){a(b+"hoverformat");var L="caps."+b;a(L+".show")&&a(L+".fill");var S="slices."+b;a(S+".show")&&(a(S+".fill"),a(S+".locations"))}),a("spaceframe.show")&&a("spaceframe.fill"),a("surface.show")&&(a("surface.count"),a("surface.fill"),a("surface.pattern")),a("contour.show")&&(a("contour.color"),a("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(b){a(b)}),P(y,e,l,a,{prefix:"",cLetter:"c"}),e._length=null):e.visible=!1}q.exports={supplyDefaults:function C(y,e,r,l){u(y,e,0,l,function a(s,c){return A.coerce(y,e,i,s,c)})},supplyIsoDefaults:u}},64943:function(q,W,t){"use strict";q.exports={attributes:t(16249),supplyDefaults:t(82738).supplyDefaults,calc:t(56959),colorbar:{min:"cmin",max:"cmax"},plot:t(22674).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:t(58547),categories:["gl3d","showLegend"],meta:{}}},2418:function(q,W,t){"use strict";var A=t(50693),g=t(12663).axisHoverFormat,i=t(5386).fF,P=t(54532),C=t(9012),u=t(1426).extendFlat;q.exports=u({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:i({editType:"calc"}),xhoverformat:g("x"),yhoverformat:g("y"),zhoverformat:g("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},A("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:P.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:u({},P.contours.x.show,{}),color:P.contours.x.color,width:P.contours.x.width,editType:"calc"},lightposition:{x:u({},P.lightposition.x,{dflt:1e5}),y:u({},P.lightposition.y,{dflt:1e5}),z:u({},P.lightposition.z,{dflt:0}),editType:"calc"},lighting:u({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},P.lighting),hoverinfo:u({},C.hoverinfo,{editType:"calc"}),showlegend:u({},C.showlegend,{dflt:!1})})},82932:function(q,W,t){"use strict";var A=t(78803);q.exports=function(i,P){P.intensity&&A(i,P,{vals:P.intensity,containerStr:"",cLetter:"c"})}},91134:function(q,W,t){"use strict";var A=t(9330).gl_mesh3d,g=t(9330).delaunay_triangulate,i=t(9330).alpha_shape,P=t(9330).convex_hull,C=t(81697).parseColorScale,u=t(78614),y=t(21081).extractOpts,e=t(90060);function r(w,p,o){this.scene=w,this.uid=o,this.mesh=p,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var l=r.prototype;function a(w){for(var p=[],o=w.length,v=0;v<o;v++)p[v]=u(w[v]);return p}function s(w,p,o,v){for(var M=[],b=p.length,L=0;L<b;L++)M[L]=w.d2l(p[L],0,v)*o;return M}function c(w){for(var p=[],o=w.length,v=0;v<o;v++)p[v]=Math.round(w[v]);return p}function m(w,p){for(var o=w.length,v=0;v<o;v++)if(w[v]<=-.5||w[v]>=p-.5)return!1;return!0}l.handlePick=function(w){if(w.object===this.mesh){var p=w.index=w.data.index;w.traceCoordinate=w.data._cellCenter?w.data.dataCoordinate:[this.data.x[p],this.data.y[p],this.data.z[p]];var o=this.data.hovertext||this.data.text;return Array.isArray(o)&&void 0!==o[p]?w.textLabel=o[p]:o&&(w.textLabel=o),!0}},l.update=function(w){var p=this.scene,o=p.fullSceneLayout;this.data=w;var b,v=w.x.length,M=e(s(o.xaxis,w.x,p.dataScale[0],w.xcalendar),s(o.yaxis,w.y,p.dataScale[1],w.ycalendar),s(o.zaxis,w.z,p.dataScale[2],w.zcalendar));if(w.i&&w.j&&w.k){if(w.i.length!==w.j.length||w.j.length!==w.k.length||!m(w.i,v)||!m(w.j,v)||!m(w.k,v))return;b=e(c(w.i),c(w.j),c(w.k))}else b=0===w.alphahull?P(M):w.alphahull>0?i(w.alphahull,M):function f(w,p){for(var o=["x","y","z"].indexOf(w),v=[],M=p.length,b=0;b<M;b++)v[b]=[p[b][(o+1)%3],p[b][(o+2)%3]];return g(v)}(w.delaunayaxis,M);var L={positions:M,cells:b,lightPosition:[w.lightposition.x,w.lightposition.y,w.lightposition.z],ambient:w.lighting.ambient,diffuse:w.lighting.diffuse,specular:w.lighting.specular,roughness:w.lighting.roughness,fresnel:w.lighting.fresnel,vertexNormalsEpsilon:w.lighting.vertexnormalsepsilon,faceNormalsEpsilon:w.lighting.facenormalsepsilon,opacity:w.opacity,contourEnable:w.contour.show,contourColor:u(w.contour.color).slice(0,3),contourWidth:w.contour.width,useFacetNormals:w.flatshading};if(w.intensity){var x=y(w);this.color="#fff";var S=w.intensitymode;L[S+"Intensity"]=w.intensity,L[S+"IntensityBounds"]=[x.min,x.max],L.colormap=C(w)}else w.vertexcolor?(this.color=w.vertexcolor[0],L.vertexColors=a(w.vertexcolor)):w.facecolor?(this.color=w.facecolor[0],L.cellColors=a(w.facecolor)):(this.color=w.color,L.meshColor=u(w.color));this.mesh.update(L)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},q.exports=function h(w,p){var v=A({gl:w.glplot.gl}),M=new r(w,v,p.uid);return v._trace=M,M.update(p),w.glplot.add(v),M}},58669:function(q,W,t){"use strict";var A=t(73972),g=t(71828),i=t(1586),P=t(2418);q.exports=function(u,y,e,r){function l(m,h){return g.coerce(u,y,P,m,h)}function a(m){var h=m.map(function(w){var p=l(w);return p&&g.isArrayOrTypedArray(p)?p:null});return h.every(function(w){return w&&w.length===h[0].length})&&h}a(["x","y","z"])?(a(["i","j","k"]),(!y.i||y.j&&y.k)&&(!y.j||y.k&&y.i)&&(!y.k||y.i&&y.j)?(A.getComponentMethod("calendars","handleTraceDefaults")(u,y,["x","y","z"],r),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(m){l(m)}),l("contour.show")&&(l("contour.color"),l("contour.width")),"intensity"in u?(l("intensity"),l("intensitymode"),i(u,y,r,l,{prefix:"",cLetter:"c"})):(y.showscale=!1,"facecolor"in u?l("facecolor"):"vertexcolor"in u?l("vertexcolor"):l("color",e)),l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),y._length=null):y.visible=!1):y.visible=!1}},21164:function(q,W,t){"use strict";q.exports={attributes:t(2418),supplyDefaults:t(58669),calc:t(82932),colorbar:{min:"cmin",max:"cmax"},plot:t(91134),moduleType:"trace",name:"mesh3d",basePlotModule:t(58547),categories:["gl3d","showLegend"],meta:{}}},2522:function(q,W,t){"use strict";var A=t(71828).extendFlat,g=t(82196),i=t(12663).axisHoverFormat,P=t(79952).P,C=t(77914),u=t(22372),y=u.INCREASING.COLOR,e=u.DECREASING.COLOR,r=g.line;function l(a){return{line:{color:A({},r.color,{dflt:a}),width:r.width,dash:P,editType:"style"},editType:"style"}}q.exports={xperiod:g.xperiod,xperiod0:g.xperiod0,xperiodalignment:g.xperiodalignment,xhoverformat:i("x"),yhoverformat:i("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:A({},r.width,{}),dash:A({},P,{}),editType:"style"},increasing:l(y),decreasing:l(e),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:A({},C.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},3485:function(q,W,t){"use strict";var A=t(71828),g=A._,i=t(89298),P=t(42973),C=t(50606).BADNUM;function y(l,a,s,c){return{o:l,h:a,l:s,c}}function e(l,a,s,c,f,m){for(var h=f.makeCalcdata(a,"open"),w=f.makeCalcdata(a,"high"),p=f.makeCalcdata(a,"low"),o=f.makeCalcdata(a,"close"),v=Array.isArray(a.text),M=Array.isArray(a.hovertext),b=!0,L=null,x=!!a.xperiodalignment,S=[],T=0;T<c.length;T++){var n=c[T],E=h[T],d=w[T],F=p[T],D=o[T];if(n!==C&&E!==C&&d!==C&&F!==C&&D!==C){D===E?null!==L&&D!==L&&(b=D>L):b=D>E,L=D;var N=m(E,d,F,D);N.pos=n,N.yc=(E+D)/2,N.i=T,N.dir=b?"increasing":"decreasing",N.x=N.pos,N.y=[F,d],x&&(N.orig_p=s[T]),v&&(N.tx=a.text[T]),M&&(N.htx=a.hovertext[T]),S.push(N)}else S.push({pos:n,empty:!0})}return a._extremes[f._id]=i.findExtremes(f,A.concat(p,w),{padded:!0}),S.length&&(S[0].t={labels:{open:g(l,"open:")+" ",high:g(l,"high:")+" ",low:g(l,"low:")+" ",close:g(l,"close:")+" "}}),S}q.exports={calc:function u(l,a){var s=i.getFromId(l,a.xaxis),c=i.getFromId(l,a.yaxis),f=function r(l,a,s){var c=s._minDiff;if(!c){var h,f=l._fullData,m=[];for(c=1/0,h=0;h<f.length;h++){var w=f[h];if("ohlc"===w.type&&!0===w.visible&&w.xaxis===a._id){m.push(w);var p=a.makeCalcdata(w,"x");w._origX=p;var o=P(s,a,"x",p).vals;w._xcalc=o;var v=A.distinctVals(o).minDiff;v&&isFinite(v)&&(c=Math.min(c,v))}}for(c===1/0&&(c=1),h=0;h<m.length;h++)m[h]._minDiff=c}return c*s.tickwidth}(l,s,a),m=a._minDiff;a._minDiff=null;var h=a._origX;a._origX=null;var w=a._xcalc;a._xcalc=null;var p=e(l,a,h,w,c,y);return a._extremes[s._id]=i.findExtremes(s,w,{vpad:m/2}),p.length?(A.extendFlat(p[0].t,{wHover:m/2,tickLen:f}),p):[{t:{empty:!0}}]},calcCommon:e}},16169:function(q,W,t){"use strict";var A=t(71828),g=t(14555),i=t(73927),P=t(2522);function C(u,y,e,r){e(r+".line.color"),e(r+".line.width",y.line.width),e(r+".line.dash",y.line.dash)}q.exports=function(y,e,r,l){function a(c,f){return A.coerce(y,e,P,c,f)}g(y,e,a,l)?(i(y,e,l,a,{x:!0}),a("xhoverformat"),a("yhoverformat"),a("line.width"),a("line.dash"),C(0,e,a,"increasing"),C(0,e,a,"decreasing"),a("text"),a("hovertext"),a("tickwidth"),l._requestRangeslider[e.xaxis]=!0):e.visible=!1}},66449:function(q,W,t){"use strict";var A=t(89298),g=t(71828),i=t(30211),P=t(7901),C=t(71828).fillText,u=t(22372),y={increasing:u.INCREASING.SYMBOL,decreasing:u.DECREASING.SYMBOL};function r(s,c,f,m){var L,x,h=s.cd,w=s.xa,p=h[0].trace,o=h[0].t,v=p.type,M="ohlc"===v?"l":"min",b="ohlc"===v?"h":"max",S=o.bPos||0,n=o.bdPos||o.tickLen,E=o.wHover,d=Math.min(1,n/Math.abs(w.r2c(w.range[1])-w.r2c(w.range[0])));function F(H){var J=function(H){return H.pos+S-c}(H);return i.inbox(J-E,J+E,L)}function D(H){var J=H[M],nt=H[b];return J===nt||i.inbox(J-f,nt-f,L)}function N(H){return(F(H)+D(H))/2}L=s.maxHoverDistance-d,x=s.maxSpikeDistance-d;var k=i.getDistanceFunction(m,F,D,N);if(i.getClosest(h,k,s),!1===s.index)return null;var O=h[s.index];if(O.empty)return null;var z=p[O.dir],U=z.line.color;return s.color=P.opacity(U)&&z.line.width?U:z.fillcolor,s.x0=w.c2p(O.pos+S-n,!0),s.x1=w.c2p(O.pos+S+n,!0),s.xLabelVal=void 0!==O.orig_p?O.orig_p:O.pos,s.spikeDistance=N(O)*x/L,s.xSpike=w.c2p(O.pos,!0),s}function l(s,c,f,m){var h=s.cd,w=s.ya,p=h[0].trace,o=h[0].t,v=[],M=r(s,c,f,m);if(!M)return[];var x=h[M.index].hi||p.hoverinfo,S=x.split("+");if("all"!==x&&-1===S.indexOf("y"))return[];for(var E=["high","open","close","low"],d={},F=0;F<E.length;F++){var O,D=E[F],N=p[D][M.index],k=w.c2p(N,!0);N in d?(O=d[N]).yLabel+="<br>"+o.labels[D]+A.hoverLabelText(w,N,p.yhoverformat):((O=g.extendFlat({},M)).y0=O.y1=k,O.yLabelVal=N,O.yLabel=o.labels[D]+A.hoverLabelText(w,N,p.yhoverformat),O.name="",v.push(O),d[N]=O)}return v}function a(s,c,f,m){var h=s.cd,w=s.ya,p=h[0].trace,o=h[0].t,v=r(s,c,f,m);if(!v)return[];var b=h[v.index],L=v.index=b.i,x=b.dir;function S(N){return o.labels[N]+A.hoverLabelText(w,p[N][L],p.yhoverformat)}var T=b.hi||p.hoverinfo,n=T.split("+"),E="all"===T,d=E||-1!==n.indexOf("y"),F=E||-1!==n.indexOf("text"),D=d?[S("open"),S("high"),S("low"),S("close")+"  "+y[x]]:[];return F&&C(b,p,D),v.extraText=D.join("<br>"),v.y0=v.y1=w.c2p(b.yc,!0),[v]}q.exports={hoverPoints:function e(s,c,f,m){return s.cd[0].trace.hoverlabel.split?l(s,c,f,m):a(s,c,f,m)},hoverSplit:l,hoverOnPoints:a}},54186:function(q,W,t){"use strict";q.exports={moduleType:"trace",name:"ohlc",basePlotModule:t(93612),categories:["cartesian","svg","showLegend"],meta:{},attributes:t(2522),supplyDefaults:t(16169),calc:t(3485).calc,plot:t(72314),style:t(53101),hoverPoints:t(66449).hoverPoints,selectPoints:t(67324)}},14555:function(q,W,t){"use strict";var A=t(73972),g=t(71828);q.exports=function(P,C,u,y){var e=u("x"),r=u("open"),l=u("high"),a=u("low"),s=u("close");if(u("hoverlabel.split"),A.getComponentMethod("calendars","handleTraceDefaults")(P,C,["x"],y),r&&l&&a&&s){var f=Math.min(r.length,l.length,a.length,s.length);return e&&(f=Math.min(f,g.minRowLength(e))),C._length=f,f}}},72314:function(q,W,t){"use strict";var A=t(39898),g=t(71828);q.exports=function(P,C,u,y){var e=C.yaxis,r=C.xaxis,l=!!r.rangebreaks;g.makeTraceGroups(y,u,"trace ohlc").each(function(a){var s=A.select(this),c=a[0],f=c.t;if(!0!==c.trace.visible||f.empty)s.remove();else{var h=f.tickLen,w=s.selectAll("path").data(g.identity);w.enter().append("path"),w.exit().remove(),w.attr("d",function(p){if(p.empty)return"M0,0Z";var o=r.c2p(p.pos-h,!0),v=r.c2p(p.pos+h,!0),M=l?(o+v)/2:r.c2p(p.pos,!0);return"M"+o+","+e.c2p(p.o,!0)+"H"+M+"M"+M+","+e.c2p(p.h,!0)+"V"+e.c2p(p.l,!0)+"M"+v+","+e.c2p(p.c,!0)+"H"+M})}})}},67324:function(q){"use strict";q.exports=function(t,A){var u,g=t.cd,i=t.xaxis,P=t.yaxis,C=[],y=g[0].t.bPos||0;if(!1===A)for(u=0;u<g.length;u++)g[u].selected=0;else for(u=0;u<g.length;u++){var e=g[u];A.contains([i.c2p(e.pos+y),P.c2p(e.yc)],null,e.i,t)?(C.push({pointNumber:e.i,x:i.c2d(e.pos),y:P.c2d(e.yc)}),e.selected=1):e.selected=0}return C}},53101:function(q,W,t){"use strict";var A=t(39898),g=t(91424),i=t(7901);q.exports=function(C,u,y){var e=y||A.select(C).selectAll("g.ohlclayer").selectAll("g.trace");e.style("opacity",function(r){return r[0].trace.opacity}),e.each(function(r){var l=r[0].trace;A.select(this).selectAll("path").each(function(a){if(!a.empty){var s=l[a.dir].line;A.select(this).style("fill","none").call(i.stroke,s.color).call(g.dashLine,s.dash,s.width).style("opacity",l.selectedpoints&&!a.selected?.3:1)}})})}},99506:function(q,W,t){"use strict";var A=t(1426).extendFlat,g=t(9012),i=t(41940),P=t(50693),C=t(5386).fF,u=t(27670).Y,y=A({editType:"calc"},P("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:C({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});q.exports={domain:u({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:A({},g.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:C({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:i({editType:"calc"}),tickfont:i({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:y,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},27677:function(q,W,t){"use strict";var A=t(27659).a0,g=t(45784),i="parcats";W.name=i,W.plot=function(P,C,u,y){var e=A(P.calcdata,i);e.length&&g(P,e[0],u,y)},W.clean=function(P,C,u,y){var e=y._has&&y._has("parcats"),r=C._has&&C._has("parcats");e&&!r&&y._paperdiv.selectAll(".parcats").remove()}},28699:function(q,W,t){"use strict";var A=t(28984).wrap,g=t(52075).hasColorscale,i=t(78803),P=t(75744),C=t(91424),u=t(71828),y=t(92770);function l(p,o,v,M){return{dimensionInd:p,categoryInd:o,categoryValue:v,displayInd:o,categoryLabel:M,valueInds:[],count:0,dragY:null}}function a(p,o,v){p.valueInds.push(o),p.count+=v}function s(p,o,v){return{categoryInds:p,color:o,rawColor:v,valueInds:[],count:0}}function c(p,o,v){p.valueInds.push(o),p.count+=v}function m(p){var v;if(function w(p){for(var o=new Array(p.length),v=0;v<p.length;v++){if(p[v]<0||p[v]>=p.length||void 0!==o[p[v]])return!1;o[p[v]]=!0}return!0}(p.map(function(M){return M.displayindex})))for(v=0;v<p.length;v++)p[v]._displayindex=p[v].displayindex;else for(v=0;v<p.length;v++)p[v]._displayindex=v}q.exports=function(o,v){var M=u.filterVisible(v.dimensions);if(0===M.length)return[];var L,x,S,b=M.map(function(Q){var j;if("trace"===Q.categoryorder)j=null;else if("array"===Q.categoryorder)j=Q.categoryarray;else{j=P(Q.values);for(var Z=!0,G=0;G<j.length;G++)if(!y(j[G])){Z=!1;break}j.sort(Z?u.sorterAsc:void 0),"category descending"===Q.categoryorder&&(j=j.reverse())}return function f(p,o){o=null==o?[]:o.map(function(n){return n});var v={},M={},b=[];o.forEach(function(n,E){v[n]=0,M[n]=E});for(var L=0;L<p.length;L++){var S,x=p[L];void 0===v[x]?(v[x]=1,S=o.push(x)-1,M[x]=S):(v[x]++,S=M[x]),b.push(S)}var T=o.map(function(n){return v[n]});return{uniqueValues:o,uniqueCounts:T,inds:b}}(Q.values,j)});L=u.isArrayOrTypedArray(v.counts)?v.counts:[v.counts],m(M),M.forEach(function(Q,j){!function h(p,o){p._categoryarray=o.uniqueValues,p._ticktext=null==p.ticktext?[]:p.ticktext.slice();for(var v=p._ticktext.length;v<o.uniqueValues.length;v++)p._ticktext.push(o.uniqueValues[v])}(Q,b[j])});var n,T=v.line;T?(g(v,"line")&&i(o,v,{vals:v.line.color,containerStr:"line",cLetter:"c"}),n=C.tryColorscale(T)):n=u.identity;var N,k,Q,j,Z,d=M[0].values.length,F={},D=b.map(function(Q){return Q.inds});for(S=0,N=0;N<d;N++){var O=[];for(k=0;k<D.length;k++)O.push(D[k][N]);S+=x=L[N%L.length];var B=(Q=N,j=void 0,Z=void 0,u.isArrayOrTypedArray(T.color)?Z=j=T.color[Q%T.color.length]:j=T.color,{color:n(j),rawColor:Z}),z=O+"-"+B.rawColor;void 0===F[z]&&(F[z]=s(O,B.color,B.rawColor)),c(F[z],N,x)}var U=M.map(function(Q,j){return function r(p,o,v,M,b){return{dimensionInd:p,containerInd:o,displayInd:v,dimensionLabel:M,count:b,categories:[],dragX:null}}(j,Q._index,Q._displayindex,Q.label,S)});for(N=0;N<d;N++)for(x=L[N%L.length],k=0;k<U.length;k++){var H=U[k].containerInd,J=b[k].inds[N],nt=U[k].categories;void 0===nt[J]&&(nt[J]=l(k,J,v.dimensions[H]._categoryarray[J],v.dimensions[H]._ticktext[J])),a(nt[J],N,x)}return A(function e(p,o,v){var M=p.map(function(b){return b.categories.length}).reduce(function(b,L){return Math.max(b,L)});return{dimensions:p,paths:o,trace:void 0,maxCats:M,count:v}}(U,F,S))}},14647:function(q,W,t){"use strict";var A=t(71828),g=t(52075).hasColorscale,i=t(1586),P=t(27670).c,C=t(85501),u=t(99506),y=t(94397);function r(l,a){function s(o,v){return A.coerce(l,a,u.dimensions,o,v)}var c=s("values"),f=s("visible");if(c&&c.length||(f=a.visible=!1),f){s("label"),s("displayindex",a._index);var w,m=l.categoryarray,h=Array.isArray(m)&&m.length>0;h&&(w="array");var p=s("categoryorder",w);"array"===p?(s("categoryarray"),s("ticktext")):(delete l.categoryarray,delete l.ticktext),!h&&"array"===p&&(a.categoryorder="trace")}}q.exports=function(a,s,c,f){function m(v,M){return A.coerce(a,s,u,v,M)}var h=C(a,s,{name:"dimensions",handleItemDefaults:r}),w=function e(l,a,s,c,f){f("line.shape"),f("line.hovertemplate");var m=f("line.color",c.colorway[0]);if(g(l,"line")&&A.isArrayOrTypedArray(m)){if(m.length)return f("line.colorscale"),i(l,a,c,f,{prefix:"line.",cLetter:"c"}),m.length;a.line.color=s}return 1/0}(a,s,c,f,m);P(s,f,m),(!Array.isArray(h)||!h.length)&&(s.visible=!1),y(s,h,"values",w),m("hoveron"),m("hovertemplate"),m("arrangement"),m("bundlecolors"),m("sortpaths"),m("counts");var p={family:f.font.family,size:Math.round(f.font.size),color:f.font.color};A.coerceFont(m,"labelfont",p);var o={family:f.font.family,size:Math.round(f.font.size/1.2),color:f.font.color};A.coerceFont(m,"tickfont",o)}},94873:function(q,W,t){"use strict";q.exports={attributes:t(99506),supplyDefaults:t(14647),calc:t(28699),plot:t(45784),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:t(27677),categories:["noOpacity"],meta:{}}},45460:function(q,W,t){"use strict";var A=t(39898),g=t(81684).k4,i=t(72391),P=t(30211),C=t(71828),u=C.strTranslate,y=t(91424),e=t(84267),r=t(63893);function l(G,K,at,$){var X=K._context.staticPlot,rt=G.map(it.bind(0,K,at)),et=$.selectAll("g.parcatslayer").data([null]);et.enter().append("g").attr("class","parcatslayer").style("pointer-events",X?"none":"all");var st=et.selectAll("g.trace.parcats").data(rt,a),dt=st.enter().append("g").attr("class","trace parcats");st.attr("transform",function(Vt){return u(Vt.x,Vt.y)}),dt.append("g").attr("class","paths");var gt=st.select("g.paths").selectAll("path.path").data(function(Vt){return Vt.paths},a);gt.attr("fill",function(Vt){return Vt.model.color});var Lt=gt.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Vt){return Vt.model.color}).attr("fill-opacity",0);o(Lt),gt.attr("d",function(Vt){return Vt.svgD}),Lt.empty()||gt.sort(c),gt.exit().remove(),gt.on("mouseover",f).on("mouseout",m).on("click",p),dt.append("g").attr("class","dimensions");var Mt=st.select("g.dimensions").selectAll("g.dimension").data(function(Vt){return Vt.dimensions},a);Mt.enter().append("g").attr("class","dimension"),Mt.attr("transform",function(Vt){return u(Vt.x,0)}),Mt.exit().remove();var xt=Mt.selectAll("g.category").data(function(Vt){return Vt.categories},a),At=xt.enter().append("g").attr("class","category");xt.attr("transform",function(Vt){return u(0,Vt.y)}),At.append("rect").attr("class","catrect").attr("pointer-events","none"),xt.select("rect.catrect").attr("fill","none").attr("width",function(Vt){return Vt.width}).attr("height",function(Vt){return Vt.height}),b(At);var Gt=xt.selectAll("rect.bandrect").data(function(Vt){return Vt.bands},a);Gt.each(function(){C.raiseToTop(this)}),Gt.attr("fill",function(Vt){return Vt.color});var Wt=Gt.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Vt){return Vt.color}).attr("fill-opacity",0);Gt.attr("fill",function(Vt){return Vt.color}).attr("width",function(Vt){return Vt.width}).attr("height",function(Vt){return Vt.height}).attr("y",function(Vt){return Vt.y}).attr("cursor",function(Vt){return"fixed"===Vt.parcatsViewModel.arrangement?"default":"perpendicular"===Vt.parcatsViewModel.arrangement?"ns-resize":"move"}),x(Wt),Gt.exit().remove(),At.append("text").attr("class","catlabel").attr("pointer-events","none");var Pt=K._fullLayout.paper_bgcolor;xt.select("text.catlabel").attr("text-anchor",function(Vt){return s(Vt)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",r.makeTextShadow(Pt)).style("fill","rgb(0, 0, 0)").attr("x",function(Vt){return s(Vt)?Vt.width+5:-5}).attr("y",function(Vt){return Vt.height/2}).text(function(Vt){return Vt.model.categoryLabel}).each(function(Vt){y.font(A.select(this),Vt.parcatsViewModel.categorylabelfont),r.convertToTspans(A.select(this),K)}),At.append("text").attr("class","dimlabel"),xt.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Vt){return"fixed"===Vt.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(Vt){return Vt.width/2}).attr("y",-5).text(function(Vt,te){return 0===te?Vt.parcatsViewModel.model.dimensions[Vt.model.dimensionInd].dimensionLabel:null}).each(function(Vt){y.font(A.select(this),Vt.parcatsViewModel.labelfont)}),xt.selectAll("rect.bandrect").on("mouseover",k).on("mouseout",O),xt.exit().remove(),Mt.call(A.behavior.drag().origin(function(Vt){return{x:Vt.x,y:0}}).on("dragstart",B).on("drag",z).on("dragend",U)),st.each(function(Vt){Vt.traceSelection=A.select(this),Vt.pathSelection=A.select(this).selectAll("g.paths").selectAll("path.path"),Vt.dimensionSelection=A.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),st.exit().remove()}function a(G){return G.key}function s(G){return G.model.dimensionInd===G.parcatsViewModel.dimensions[G.parcatsViewModel.dimensions.length-1].model.dimensionInd}function c(G,K){return G.model.rawColor>K.model.rawColor?1:G.model.rawColor<K.model.rawColor?-1:0}function f(G){if(!G.parcatsViewModel.dragDimension&&-1===G.parcatsViewModel.hoverinfoItems.indexOf("skip")){C.raiseToTop(this),v(A.select(this));var K=h(G),at=w(G);if(G.parcatsViewModel.graphDiv.emit("plotly_hover",{points:K,event:A.event,constraints:at}),-1===G.parcatsViewModel.hoverinfoItems.indexOf("none")){var bt,gt,Lt,$=A.mouse(this)[0],X=G.parcatsViewModel.graphDiv,rt=G.parcatsViewModel.trace,et=X._fullLayout,st=et._paperdiv.node().getBoundingClientRect(),dt=G.parcatsViewModel.graphDiv.getBoundingClientRect();for(Lt=0;Lt<G.leftXs.length-1;Lt++)if(G.leftXs[Lt]+G.dimWidths[Lt]-2<=$&&$<=G.leftXs[Lt+1]+2){var It=G.parcatsViewModel.dimensions[Lt];bt=(It.x+It.width+G.parcatsViewModel.dimensions[Lt+1].x)/2,gt=(G.topYs[Lt]+G.topYs[Lt+1]+G.height)/2;break}var xt=G.parcatsViewModel.x+bt,At=G.parcatsViewModel.y+gt,Gt=e.mostReadable(G.model.color,["black","white"]),Wt=G.model.count,Pt=Wt/G.parcatsViewModel.model.count,Vt={countLabel:Wt,probabilityLabel:Pt.toFixed(3)},te=[];-1!==G.parcatsViewModel.hoverinfoItems.indexOf("count")&&te.push(["Count:",Vt.countLabel].join(" ")),-1!==G.parcatsViewModel.hoverinfoItems.indexOf("probability")&&te.push(["P:",Vt.probabilityLabel].join(" "));var Qt=te.join("<br>"),Bt=A.mouse(X)[0];P.loneHover({trace:rt,x:xt-st.left+dt.left,y:At-st.top+dt.top,text:Qt,color:G.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Gt,idealAlign:Bt<xt?"right":"left",hovertemplate:(rt.line||{}).hovertemplate,hovertemplateLabels:Vt,eventData:[{data:rt._input,fullData:rt,count:Wt,probability:Pt}]},{container:et._hoverlayer.node(),outerContainer:et._paper.node(),gd:X})}}}function m(G){if(!G.parcatsViewModel.dragDimension&&(o(A.select(this)),P.loneUnhover(G.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),G.parcatsViewModel.pathSelection.sort(c),-1===G.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var K=h(G),at=w(G);G.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:K,event:A.event,constraints:at})}}function h(G){for(var K=[],at=H(G.parcatsViewModel),$=0;$<G.model.valueInds.length;$++)K.push({curveNumber:at,pointNumber:G.model.valueInds[$]});return K}function w(G){for(var K={},at=G.parcatsViewModel.model.dimensions,$=0;$<at.length;$++){var X=at[$];K[X.containerInd]=X.categories[G.model.categoryInds[$]].categoryValue}return void 0!==G.model.rawColor&&(K.color=G.model.rawColor),K}function p(G){if(-1===G.parcatsViewModel.hoverinfoItems.indexOf("skip")){var K=h(G),at=w(G);G.parcatsViewModel.graphDiv.emit("plotly_click",{points:K,event:A.event,constraints:at})}}function o(G){G.attr("fill",function(K){return K.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function v(G){G.attr("fill-opacity",.8).attr("stroke",function(K){return e.mostReadable(K.model.color,["black","white"])}).attr("stroke-width",.3)}function b(G){G.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function x(G){G.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function S(G){var at=G.categoryViewModel.model.dimensionInd,$=G.categoryViewModel.model.categoryInd;return G.parcatsViewModel.pathSelection.filter(function(X){return X.model.categoryInds[at]===$&&X.model.color===G.color})}function E(G,K,at){var $=A.select(G).datum(),X=$.categoryViewModel.model,rt=$.parcatsViewModel.graphDiv,et=A.select(G.parentNode).selectAll("rect.bandrect"),st=[];et.each(function(bt){S(bt).each(function(Lt){Array.prototype.push.apply(st,h(Lt))})});var dt={};dt[X.dimensionInd]=X.categoryValue,rt.emit(K,{points:st,event:at,constraints:dt})}function d(G,K,at){var $=A.select(G).datum(),X=$.categoryViewModel.model,rt=$.parcatsViewModel.graphDiv,et=S($),st=[];et.each(function(bt){Array.prototype.push.apply(st,h(bt))});var dt={};dt[X.dimensionInd]=X.categoryValue,void 0!==$.rawColor&&(dt.color=$.rawColor),rt.emit(K,{points:st,event:at,constraints:dt})}function F(G,K,at){G._fullLayout._calcInverseTransform(G);var It,Mt,$=G._fullLayout._invScaleX,X=G._fullLayout._invScaleY,rt=A.select(at.parentNode).select("rect.catrect"),et=rt.node().getBoundingClientRect(),st=rt.datum(),dt=st.parcatsViewModel,gt=dt.trace,Lt=et.top+et.height/2;dt.dimensions.length>1&&dt.model.dimensions[st.model.dimensionInd].displayInd===dt.dimensions.length-1?(It=et.left,Mt="left"):(It=et.left+et.width,Mt="right");var xt=st.model.count,At=st.model.categoryLabel,Gt=xt/st.parcatsViewModel.model.count,Wt={countLabel:xt,categoryLabel:At,probabilityLabel:Gt.toFixed(3)},Pt=[];-1!==st.parcatsViewModel.hoverinfoItems.indexOf("count")&&Pt.push(["Count:",Wt.countLabel].join(" ")),-1!==st.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Pt.push(["P("+Wt.categoryLabel+"):",Wt.probabilityLabel].join(" "));var Vt=Pt.join("<br>");return{trace:gt,x:$*(It-K.left),y:X*(Lt-K.top),text:Vt,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:Mt,hovertemplate:gt.hovertemplate,hovertemplateLabels:Wt,eventData:[{data:gt._input,fullData:gt,count:xt,category:At,probability:Gt}]}}function k(G){if(!G.parcatsViewModel.dragDimension&&-1===G.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(A.mouse(this)[1]<-1)return;var st,at=G.parcatsViewModel.graphDiv,$=at._fullLayout,X=$._paperdiv.node().getBoundingClientRect(),rt=G.parcatsViewModel.hoveron,et=this;"color"===rt?(function n(G){var K=A.select(G).datum(),at=S(K);v(at),at.each(function(){C.raiseToTop(this)}),A.select(G.parentNode).selectAll("rect.bandrect").filter(function($){return $.color===K.color}).each(function(){C.raiseToTop(this),function L(G){G.attr("stroke","black").attr("stroke-width",1.5)}(A.select(this))})}(et),d(et,"plotly_hover",A.event)):(function T(G){A.select(G.parentNode).selectAll("rect.bandrect").each(function(at){var $=S(at);v($),$.each(function(){C.raiseToTop(this)})}),function M(G){G.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(A.select(G.parentNode))}(et),E(et,"plotly_hover",A.event)),-1===G.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===rt?st=F(at,X,et):"color"===rt?st=function N(G,K,at){G._fullLayout._calcInverseTransform(G);var It,Mt,$=G._fullLayout._invScaleX,X=G._fullLayout._invScaleY,rt=at.getBoundingClientRect(),et=A.select(at).datum(),st=et.categoryViewModel,dt=st.parcatsViewModel,gt=dt.trace,Lt=rt.y+rt.height/2;dt.dimensions.length>1&&dt.model.dimensions[st.model.dimensionInd].displayInd===dt.dimensions.length-1?(It=rt.left,Mt="left"):(It=rt.left+rt.width,Mt="right");var xt=st.model.categoryLabel,At=et.parcatsViewModel.model.count,Gt=0;et.categoryViewModel.bands.forEach(function(oe){oe.color===et.color&&(Gt+=oe.count)});var Wt=st.model.count,Pt=0;dt.pathSelection.each(function(oe){oe.model.color===et.color&&(Pt+=oe.model.count)});var Vt=Gt/At,te=Gt/Pt,Qt=Gt/Wt,Bt={countLabel:At,categoryLabel:xt,probabilityLabel:Vt.toFixed(3)},Ot=[];-1!==st.parcatsViewModel.hoverinfoItems.indexOf("count")&&Ot.push(["Count:",Bt.countLabel].join(" ")),-1!==st.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(Ot.push("P(color \u2229 "+xt+"): "+Bt.probabilityLabel),Ot.push("P("+xt+" | color): "+te.toFixed(3)),Ot.push("P(color | "+xt+"): "+Qt.toFixed(3)));var qt=Ot.join("<br>"),ie=e.mostReadable(et.color,["black","white"]);return{trace:gt,x:$*(It-K.left),y:X*(Lt-K.top),text:qt,color:et.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:ie,fontSize:10,idealAlign:Mt,hovertemplate:gt.hovertemplate,hovertemplateLabels:Bt,eventData:[{data:gt._input,fullData:gt,category:xt,count:At,probability:Vt,categorycount:Wt,colorcount:Pt,bandcolorcount:Gt}]}}(at,X,et):"dimension"===rt&&(st=function D(G,K,at){var $=[];return A.select(at.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){$.push(F(G,K,this))}),$}(at,X,et)),st&&P.loneHover(st,{container:$._hoverlayer.node(),outerContainer:$._paper.node(),gd:at}))}}function O(G){var K=G.parcatsViewModel;if(!K.dragDimension&&(o(K.pathSelection),b(K.dimensionSelection.selectAll("g.category")),x(K.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),P.loneUnhover(K.graphDiv._fullLayout._hoverlayer.node()),K.pathSelection.sort(c),-1===K.hoverinfoItems.indexOf("skip"))){"color"===G.parcatsViewModel.hoveron?d(this,"plotly_unhover",A.event):E(this,"plotly_unhover",A.event)}}function B(G){"fixed"!==G.parcatsViewModel.arrangement&&(G.dragDimensionDisplayInd=G.model.displayInd,G.initialDragDimensionDisplayInds=G.parcatsViewModel.model.dimensions.map(function(K){return K.displayInd}),G.dragHasMoved=!1,G.dragCategoryDisplayInd=null,A.select(this).selectAll("g.category").select("rect.catrect").each(function(K){var at=A.mouse(this)[0],$=A.mouse(this)[1];-2<=at&&at<=K.width+2&&-2<=$&&$<=K.height+2&&(G.dragCategoryDisplayInd=K.model.displayInd,G.initialDragCategoryDisplayInds=G.model.categories.map(function(X){return X.displayInd}),K.model.dragY=K.y,C.raiseToTop(this.parentNode),A.select(this.parentNode).selectAll("rect.bandrect").each(function(X){X.y<$&&$<=X.y+X.height&&(G.potentialClickBand=this)}))}),G.parcatsViewModel.dragDimension=G,P.loneUnhover(G.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function z(G){if("fixed"!==G.parcatsViewModel.arrangement&&(G.dragHasMoved=!0,null!==G.dragDimensionDisplayInd)){var K=G.dragDimensionDisplayInd,at=K-1,$=K+1,X=G.parcatsViewModel.dimensions[K];if(null!==G.dragCategoryDisplayInd){var rt=X.categories[G.dragCategoryDisplayInd];rt.model.dragY+=A.event.dy;var et=rt.model.dragY,st=rt.model.displayInd,dt=X.categories,bt=dt[st-1],gt=dt[st+1];void 0!==bt&&et<bt.y+bt.height/2&&(rt.model.displayInd=bt.model.displayInd,bt.model.displayInd=st),void 0!==gt&&et+rt.height>gt.y+gt.height/2&&(rt.model.displayInd=gt.model.displayInd,gt.model.displayInd=st),G.dragCategoryDisplayInd=rt.model.displayInd}if(null===G.dragCategoryDisplayInd||"freeform"===G.parcatsViewModel.arrangement){X.model.dragX=A.event.x;var Lt=G.parcatsViewModel.dimensions[at],It=G.parcatsViewModel.dimensions[$];void 0!==Lt&&X.model.dragX<Lt.x+Lt.width&&(X.model.displayInd=Lt.model.displayInd,Lt.model.displayInd=K),void 0!==It&&X.model.dragX+X.width>It.x&&(X.model.displayInd=It.model.displayInd,It.model.displayInd=G.dragDimensionDisplayInd),G.dragDimensionDisplayInd=X.model.displayInd}j(G.parcatsViewModel),Q(G.parcatsViewModel),nt(G.parcatsViewModel),J(G.parcatsViewModel)}}function U(G){if("fixed"!==G.parcatsViewModel.arrangement&&null!==G.dragDimensionDisplayInd){A.select(this).selectAll("text").attr("font-weight","normal");var K={},at=H(G.parcatsViewModel),$=G.parcatsViewModel.model.dimensions.map(function(It){return It.displayInd}),X=G.initialDragDimensionDisplayInds.some(function(It,Mt){return It!==$[Mt]});X&&$.forEach(function(It,Mt){K["dimensions["+G.parcatsViewModel.model.dimensions[Mt].containerInd+"].displayindex"]=It});var rt=!1;if(null!==G.dragCategoryDisplayInd){var et=G.model.categories.map(function(It){return It.displayInd});if(rt=G.initialDragCategoryDisplayInds.some(function(It,Mt){return It!==et[Mt]})){var st=G.model.categories.slice().sort(function(It,Mt){return It.displayInd-Mt.displayInd}),dt=st.map(function(It){return It.categoryValue}),bt=st.map(function(It){return It.categoryLabel});K["dimensions["+G.model.containerInd+"].categoryarray"]=[dt],K["dimensions["+G.model.containerInd+"].ticktext"]=[bt],K["dimensions["+G.model.containerInd+"].categoryorder"]="array"}}-1===G.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!G.dragHasMoved&&G.potentialClickBand&&("color"===G.parcatsViewModel.hoveron?d(G.potentialClickBand,"plotly_click",A.event.sourceEvent):E(G.potentialClickBand,"plotly_click",A.event.sourceEvent)),G.model.dragX=null,null!==G.dragCategoryDisplayInd&&(G.parcatsViewModel.dimensions[G.dragDimensionDisplayInd].categories[G.dragCategoryDisplayInd].model.dragY=null,G.dragCategoryDisplayInd=null),G.dragDimensionDisplayInd=null,G.parcatsViewModel.dragDimension=null,G.dragHasMoved=null,G.potentialClickBand=null,j(G.parcatsViewModel),Q(G.parcatsViewModel),A.transition().duration(300).ease("cubic-in-out").each(function(){nt(G.parcatsViewModel,!0),J(G.parcatsViewModel,!0)}).each("end",function(){(X||rt)&&i.restyle(G.parcatsViewModel.graphDiv,K,[at])})}}function H(G){for(var K,at=G.graphDiv._fullData,$=0;$<at.length;$++)if(G.key===at[$].uid){K=$;break}return K}function J(G,K){void 0===K&&(K=!1),G.pathSelection.data(function($){return $.paths},a),function at($){return K?$.transition():$}(G.pathSelection).attr("d",function($){return $.svgD})}function nt(G,K){function at(dt){return K?dt.transition():dt}void 0===K&&(K=!1),G.dimensionSelection.data(function(dt){return dt.dimensions},a);var $=G.dimensionSelection.selectAll("g.category").data(function(dt){return dt.categories},a);at(G.dimensionSelection).attr("transform",function(dt){return u(dt.x,0)}),at($).attr("transform",function(dt){return u(0,dt.y)}),$.select(".dimlabel").text(function(dt,bt){return 0===bt?dt.parcatsViewModel.model.dimensions[dt.model.dimensionInd].dimensionLabel:null}),$.select(".catlabel").attr("text-anchor",function(dt){return s(dt)?"start":"end"}).attr("x",function(dt){return s(dt)?dt.width+5:-5}).each(function(dt){var bt,gt;s(dt)?(bt=dt.width+5,gt="start"):(bt=-5,gt="end"),A.select(this).selectAll("tspan").attr("x",bt).attr("text-anchor",gt)});var et=$.selectAll("rect.bandrect").data(function(dt){return dt.bands},a),st=et.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(dt){return dt.color}).attr("fill-opacity",0);et.attr("fill",function(dt){return dt.color}).attr("width",function(dt){return dt.width}).attr("height",function(dt){return dt.height}).attr("y",function(dt){return dt.y}),x(st),et.each(function(){C.raiseToTop(this)}),et.exit().remove()}function it(G,K,at){var xt,$=at[0],X=K.margin||{l:80,r:80,t:100,b:80},rt=$.trace,et=rt.domain,st=K.width,dt=K.height,bt=Math.floor(st*(et.x[1]-et.x[0])),gt=Math.floor(dt*(et.y[1]-et.y[0])),Lt=et.x[0]*st+X.l,It=K.height-et.y[1]*K.height+X.t,Mt=rt.line.shape;xt="all"===rt.hoverinfo?["count","probability"]:(rt.hoverinfo||"").split("+");var At={trace:rt,key:rt.uid,model:$,x:Lt,y:It,width:bt,height:gt,hoveron:rt.hoveron,hoverinfoItems:xt,arrangement:rt.arrangement,bundlecolors:rt.bundlecolors,sortpaths:rt.sortpaths,labelfont:rt.labelfont,categorylabelfont:rt.tickfont,pathShape:Mt,dragDimension:null,margin:X,paths:[],dimensions:[],graphDiv:G,traceSelection:null,pathSelection:null,dimensionSelection:null};return $.dimensions&&(j(At),Q(At)),At}function ut(G,K,at,$,X){var st,dt,rt=[],et=[];for(dt=0;dt<at.length-1;dt++)st=g(at[dt]+G[dt],G[dt+1]),rt.push(st(X)),et.push(st(1-X));var bt="M "+G[0]+","+K[0];for(bt+="l"+at[0]+",0 ",dt=1;dt<at.length;dt++)bt+="C"+rt[dt-1]+","+K[dt-1]+" "+et[dt-1]+","+K[dt]+" "+G[dt]+","+K[dt],bt+="l"+at[dt]+",0 ";for(bt+="l0,"+$+" ",bt+="l -"+at[at.length-1]+",0 ",dt=at.length-2;dt>=0;dt--)bt+="C"+et[dt]+","+(K[dt+1]+$)+" "+rt[dt]+","+(K[dt]+$)+" "+(G[dt]+at[dt])+","+(K[dt]+$),bt+="l-"+at[dt]+",0 ";return bt+"Z"}function Q(G){var K=G.dimensions,at=G.model,$=K.map(function(Fe){return Fe.categories.map(function(Kt){return Kt.y})}),X=G.model.dimensions.map(function(Fe){return Fe.categories.map(function(Kt){return Kt.displayInd})}),rt=G.model.dimensions.map(function(Fe){return Fe.displayInd}),et=G.dimensions.map(function(Fe){return Fe.model.dimensionInd}),st=K.map(function(Fe){return Fe.x}),dt=K.map(function(Fe){return Fe.width}),bt=[];for(var gt in at.paths)at.paths.hasOwnProperty(gt)&&bt.push(at.paths[gt]);function Lt(Fe){var Kt=Fe.categoryInds.map(function(St,Dt){return X[Dt][St]});return et.map(function(St){return Kt[St]})}bt.sort(function(Fe,Kt){var Et=Lt(Fe),St=Lt(Kt);return"backward"===G.sortpaths&&(Et.reverse(),St.reverse()),Et.push(Fe.valueInds[0]),St.push(Kt.valueInds[0]),G.bundlecolors&&(Et.unshift(Fe.rawColor),St.unshift(Kt.rawColor)),Et<St?-1:Et>St?1:0});for(var It=new Array(bt.length),Mt=K[0].model.count,xt=K[0].categories.map(function(Fe){return Fe.height}).reduce(function(Fe,Kt){return Fe+Kt}),At=0;At<bt.length;At++){var Wt,de,Gt=bt[At];Wt=Mt>0?xt*(Gt.count/Mt):0;for(var Pt=new Array($.length),Vt=0;Vt<Gt.categoryInds.length;Vt++){var Qt=X[Vt][Gt.categoryInds[Vt]],Bt=rt[Vt];Pt[Bt]=$[Bt][Qt],$[Bt][Qt]+=Wt;var Ot=G.dimensions[Bt].categories[Qt],qt=Ot.bands.length,ie=Ot.bands[qt-1];if(void 0===ie||Gt.rawColor!==ie.rawColor){var oe=void 0===ie?0:ie.y+ie.height;Ot.bands.push({key:oe,color:Gt.color,rawColor:Gt.rawColor,height:Wt,width:Ot.width,count:Gt.count,y:oe,categoryViewModel:Ot,parcatsViewModel:G})}else{var pe=Ot.bands[qt-1];pe.height+=Wt,pe.count+=Gt.count}}de=ut(st,Pt,dt,Wt,"hspline"===G.pathShape?.5:0),It[At]={key:Gt.valueInds[0],model:Gt,height:Wt,leftXs:st,topYs:Pt,dimWidths:dt,svgD:de,parcatsViewModel:G}}G.paths=It}function j(G){var K=G.model.dimensions.map(function(et){return{displayInd:et.displayInd,dimensionInd:et.dimensionInd}});K.sort(function(et,st){return et.displayInd-st.displayInd});var at=[];for(var $ in K)at.push(Z(G,G.model.dimensions[K[$].dimensionInd]));G.dimensions=at}function Z(G,K){var dt,X=G.model.dimensions.length;dt=40+(X>1?(G.width-80-16)/(X-1):0)*K.displayInd;var At,Gt,Wt,Vt,bt=[],gt=G.model.maxCats,Lt=K.categories.length,Mt=K.count,xt=G.height-8*(gt-1),te=8*(gt-Lt)/2,Qt=K.categories.map(function(Bt){return{displayInd:Bt.displayInd,categoryInd:Bt.categoryInd}});for(Qt.sort(function(Bt,Ot){return Bt.displayInd-Ot.displayInd}),Vt=0;Vt<Lt;Vt++)Wt={key:(Gt=K.categories[Qt[Vt].categoryInd]).valueInds[0],model:Gt,width:16,height:At=Mt>0?Gt.count/Mt*xt:0,y:null!==Gt.dragY?Gt.dragY:te,bands:[],parcatsViewModel:G},te=te+At+8,bt.push(Wt);return{key:K.dimensionInd,x:null!==K.dragX?K.dragX:dt,y:0,width:16,model:K,categories:bt,parcatsViewModel:G,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}q.exports=function(G,K,at,$){l(at,G,$,K)}},45784:function(q,W,t){"use strict";var A=t(45460);q.exports=function(i,P,C,u){var y=i._fullLayout,r=y._size;A(i,y._paper,P,{width:r.w,height:r.h,margin:{t:r.t,r:r.r,b:r.b,l:r.l}},C,u)}},73362:function(q,W,t){"use strict";var A=t(50693),g=t(13838),i=t(41940),P=t(27670).Y,C=t(1426).extendFlat,u=t(44467).templatedArray;q.exports={domain:P({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:i({editType:"plot"}),tickfont:i({editType:"plot"}),rangefont:i({editType:"plot"}),dimensions:u("dimension",{label:{valType:"string",editType:"plot"},tickvals:C({},g.tickvals,{editType:"plot"}),ticktext:C({},g.ticktext,{editType:"plot"}),tickformat:C({},g.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:C({editType:"calc"},A("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},57920:function(q,W,t){"use strict";var A=t(25706),g=t(39898),i=t(28984).keyFun,P=t(28984).repeat,C=t(71828).sorterAsc,u=t(71828).strTranslate,y=A.bar.snapRatio;function e(U,H){return U*(1-y)+H*y}var r=A.bar.snapClose;function l(U,H){return U*(1-r)+H*r}function a(U,H,J,nt){if(function s(U,H){for(var J=0;J<H.length;J++)if(U>=H[J][0]&&U<=H[J][1])return!0;return!1}(J,nt))return J;var it=U?-1:1,ut=0,Q=H.length-1;if(it<0){var j=ut;ut=Q,Q=j}for(var Z=H[ut],G=Z,K=ut;it*K<it*Q;K+=it){var at=K+it,$=H[at];if(it*J<it*l(Z,$))return e(Z,G);if(it*J<it*$||at===Q)return e($,Z);G=Z,Z=$}}function c(U){U.attr("x",-A.bar.captureWidth/2).attr("width",A.bar.captureWidth)}function f(U){U.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function m(U){if(!U.brush.filterSpecified)return"0,"+U.height;for(var nt,it,ut,H=h(U.brush.filter.getConsolidated(),U.height),J=[0],Q=H.length?H[0][0]:null,j=0;j<H.length;j++)it=(nt=H[j])[1]-nt[0],J.push(Q),J.push(it),(ut=j+1)<H.length&&(Q=H[ut][0]-nt[1]);return J.push(U.height),J}function h(U,H){return U.map(function(J){return J.map(function(nt){return Math.max(0,nt*H)}).sort(C)})}function p(){g.select(document.body).style("cursor",null)}function o(U){U.attr("stroke-dasharray",m)}function v(U,H){var J=g.select(U).selectAll(".highlight, .highlight-shadow");o(H?J.transition().duration(A.bar.snapDuration).each("end",H):J)}function M(U,H){var Q,J=U.brush,it=NaN,ut={};if(J.filterSpecified){var j=U.height,Z=J.filter.getConsolidated(),G=h(Z,j),K=NaN,at=NaN,$=NaN;for(Q=0;Q<=G.length;Q++){var X=G[Q];if(X&&X[0]<=H&&H<=X[1]){K=Q;break}if(at=Q?Q-1:NaN,X&&X[0]>H){$=Q;break}}if(it=K,isNaN(it)&&(it=isNaN(at)||isNaN($)?isNaN(at)?$:at:H-G[at][1]<G[$][0]-H?at:$),!isNaN(it)){var rt=G[it],et=function w(U,H){var J=A.bar.handleHeight;if(!(H>U[1]+J||H<U[0]-J))return H>=.9*U[1]+.1*U[0]?"n":H<=.9*U[0]+.1*U[1]?"s":"ns"}(rt,H);et&&(ut.interval=Z[it],ut.intervalPix=rt,ut.region=et)}}if(U.ordinal&&!ut.region){var st=U.unitTickvals,dt=U.unitToPaddedPx.invert(H);for(Q=0;Q<st.length;Q++){var bt=[.25*st[Math.max(Q-1,0)]+.75*st[Q],.25*st[Math.min(Q+1,st.length-1)]+.75*st[Q]];if(dt>=bt[0]&&dt<=bt[1]){ut.clickableOrdinalRange=bt;break}}}return ut}function L(U,H){g.event.sourceEvent.stopPropagation();var J=H.height-g.mouse(U)[1]-2*A.verticalPadding,nt=H.brush.svgBrush;nt.wasDragged=!0,nt._dragging=!0,nt.newExtent=nt.grabbingBar?[J-nt.grabPoint,J+nt.barLength-nt.grabPoint].map(H.unitToPaddedPx.invert):[nt.startExtent,H.unitToPaddedPx.invert(J)].sort(C),H.brush.filterSpecified=!0,nt.extent=nt.stayingIntervals.concat([nt.newExtent]),nt.brushCallback(H),v(U.parentNode)}function S(U,H){var nt=M(H,H.height-g.mouse(U)[1]-2*A.verticalPadding),it="crosshair";nt.clickableOrdinalRange?it="pointer":nt.region&&(it=nt.region+"-resize"),g.select(document.body).style("cursor",it)}function T(U){U.on("mousemove",function(H){g.event.preventDefault(),H.parent.inBrushDrag||S(this,H)}).on("mouseleave",function(H){H.parent.inBrushDrag||p()}).call(g.behavior.drag().on("dragstart",function(H){!function b(U,H){g.event.sourceEvent.stopPropagation();var J=H.height-g.mouse(U)[1]-2*A.verticalPadding,nt=H.unitToPaddedPx.invert(J),it=H.brush,ut=M(H,J),Q=ut.interval,j=it.svgBrush;if(j.wasDragged=!1,j.grabbingBar="ns"===ut.region,j.grabbingBar){var Z=Q.map(H.unitToPaddedPx);j.grabPoint=J-Z[0]-A.verticalPadding,j.barLength=Z[1]-Z[0]}j.clickableOrdinalRange=ut.clickableOrdinalRange,j.stayingIntervals=H.multiselect&&it.filterSpecified?it.filter.getConsolidated():[],Q&&(j.stayingIntervals=j.stayingIntervals.filter(function(G){return G[0]!==Q[0]&&G[1]!==Q[1]})),j.startExtent=ut.region?Q["s"===ut.region?1:0]:nt,H.parent.inBrushDrag=!0,j.brushStartCallback()}(this,H)}).on("drag",function(H){L(this,H)}).on("dragend",function(H){!function x(U,H){var J=H.brush,nt=J.filter,it=J.svgBrush;it._dragging||(S(U,H),L(U,H),H.brush.svgBrush.wasDragged=!1),it._dragging=!1,g.event.sourceEvent.stopPropagation();var Q=it.grabbingBar;if(it.grabbingBar=!1,it.grabLocation=void 0,H.parent.inBrushDrag=!1,p(),!it.wasDragged)return it.wasDragged=void 0,it.clickableOrdinalRange?J.filterSpecified&&H.multiselect?it.extent.push(it.clickableOrdinalRange):(it.extent=[it.clickableOrdinalRange],J.filterSpecified=!0):Q?(it.extent=it.stayingIntervals,0===it.extent.length&&D(J)):D(J),it.brushCallback(H),v(U.parentNode),void it.brushEndCallback(J.filterSpecified?nt.getConsolidated():[]);var j=function(){nt.set(nt.getConsolidated())};if(H.ordinal){var Z=H.unitTickvals;Z[Z.length-1]<Z[0]&&Z.reverse(),it.newExtent=[a(0,Z,it.newExtent[0],it.stayingIntervals),a(1,Z,it.newExtent[1],it.stayingIntervals)];var G=it.newExtent[1]>it.newExtent[0];it.extent=it.stayingIntervals.concat(G?[it.newExtent]:[]),it.extent.length||D(J),it.brushCallback(H),G?v(U.parentNode,j):(j(),v(U.parentNode))}else j();it.brushEndCallback(J.filterSpecified?nt.getConsolidated():[])}(this,H)}))}function n(U,H){return U[0]-H[0]}function D(U){U.filterSpecified=!1,U.svgBrush.extent=[[-1/0,1/0]]}function N(U){return function(J){var nt=J.brush,ut=function F(U){return U.svgBrush.extent.map(function(H){return H.slice()})}(nt).slice();nt.filter.set(ut),U()}}function k(U){for(var nt,H=U.slice(),J=[],it=H.shift();it;){for(nt=it.slice();(it=H.shift())&&it[0]<=nt[1];)nt[1]=Math.max(nt[1],it[1]);J.push(nt)}return 1===J.length&&J[0][0]>J[0][1]&&(J=[]),J}q.exports={makeBrush:function B(U,H,J,nt,it,ut){var Q=function O(){var H,J,U=[];return{set:function(nt){1===(U=nt.map(function(it){return it.slice().sort(C)}).sort(n)).length&&U[0][0]===-1/0&&U[0][1]===1/0&&(U=[[0,-1]]),H=k(U),J=U.reduce(function(it,ut){return[Math.min(it[0],ut[0]),Math.max(it[1],ut[1])]},[1/0,-1/0])},get:function(){return U.slice()},getConsolidated:function(){return H},getBounds:function(){return J}}}();return Q.set(J),{filter:Q,filterSpecified:H,svgBrush:{extent:[],brushStartCallback:nt,brushCallback:N(it),brushEndCallback:ut}}},ensureAxisBrush:function d(U,H,J){var nt=U.selectAll("."+A.cn.axisBrush).data(P,i);nt.enter().append("g").classed(A.cn.axisBrush,!0),function E(U,H,J){var nt=J._context.staticPlot,it=U.selectAll(".background").data(P);it.enter().append("rect").classed("background",!0).call(c).call(f).style("pointer-events",nt?"none":"auto").attr("transform",u(0,A.verticalPadding)),it.call(T).attr("height",function(j){return j.height-A.verticalPadding});var ut=U.selectAll(".highlight-shadow").data(P);ut.enter().append("line").classed("highlight-shadow",!0).attr("x",-A.bar.width/2).attr("stroke-width",A.bar.width+A.bar.strokeWidth).attr("stroke",H).attr("opacity",A.bar.strokeOpacity).attr("stroke-linecap","butt"),ut.attr("y1",function(j){return j.height}).call(o);var Q=U.selectAll(".highlight").data(P);Q.enter().append("line").classed("highlight",!0).attr("x",-A.bar.width/2).attr("stroke-width",A.bar.width-A.bar.strokeWidth).attr("stroke",A.bar.fillColor).attr("opacity",A.bar.fillOpacity).attr("stroke-linecap","butt"),Q.attr("y1",function(j){return j.height}).call(o)}(nt,H,J)},cleanRanges:function z(U,H){if(Array.isArray(U[0])?(U=U.map(function(nt){return nt.sort(C)}),U=H.multiselect?k(U.sort(n)):[U[0]]):U=[U.sort(C)],H.tickvals){var J=H.tickvals.slice().sort(C);if(!(U=U.map(function(nt){var it=[a(0,J,nt[0],[]),a(1,J,nt[1],[])];if(it[1]>it[0])return it}).filter(function(nt){return nt})).length)return}return U.length>1?U:U[0]}}},71791:function(q,W,t){"use strict";q.exports={attributes:t(73362),supplyDefaults:t(3633),calc:t(24639),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:t(49351),categories:["gl","regl","noOpacity","noHover"],meta:{}}},49351:function(q,W,t){"use strict";var A=t(39898),g=t(27659).a0,i=t(21341),P=t(77922);W.name="parcoords",W.plot=function(C){var u=g(C.calcdata,"parcoords")[0];u.length&&i(C,u)},W.clean=function(C,u,y,e){var r=e._has&&e._has("parcoords"),l=u._has&&u._has("parcoords");r&&!l&&(e._paperdiv.selectAll(".parcoords").remove(),e._glimages.selectAll("*").remove())},W.toSVG=function(C){var u=C._fullLayout._glimages,y=A.select(C).selectAll(".svg-container");y.filter(function(l,a){return a===y.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function r(){var l=this,a=l.toDataURL("image/png");u.append("svg:image").attr({xmlns:P.svg,"xlink:href":a,preserveAspectRatio:"none",x:0,y:0,width:l.style.width,height:l.style.height})}),window.setTimeout(function(){A.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},24639:function(q,W,t){"use strict";var A=t(71828).isArrayOrTypedArray,g=t(21081),i=t(28984).wrap;q.exports=function(u,y){var e,r;return g.hasColorscale(y,"line")&&A(y.line.color)?(e=y.line.color,r=g.extractOpts(y.line).colorscale,g.calc(u,y,{vals:e,containerStr:"line",cLetter:"c"})):(e=function P(C){for(var u=new Array(C),y=0;y<C;y++)u[y]=.5;return u}(y._length),r=[[0,y.line.color],[1,y.line.color]]),i({lineColor:e,cscale:r})}},25706:function(q){"use strict";q.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},3633:function(q,W,t){"use strict";var A=t(71828),g=t(52075).hasColorscale,i=t(1586),P=t(27670).c,C=t(85501),u=t(89298),y=t(73362),e=t(57920),r=t(25706).maxDimensionCount,l=t(94397);function s(c,f,m,h){function w(b,L){return A.coerce(c,f,y.dimensions,b,L)}var p=w("values"),o=w("visible");if(p&&p.length||(o=f.visible=!1),o){w("label"),w("tickvals"),w("ticktext"),w("tickformat");var v=w("range");f._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:v},u.setConvert(f._ax,h.layout),w("multiselect");var M=w("constraintrange");M&&(f.constraintrange=e.cleanRanges(M,f))}}q.exports=function(f,m,h,w){function p(L,x){return A.coerce(f,m,y,L,x)}var o=f.dimensions;Array.isArray(o)&&o.length>r&&(A.log("parcoords traces support up to "+r+" dimensions at the moment"),o.splice(r));var v=C(f,m,{name:"dimensions",layout:w,handleItemDefaults:s}),M=function a(c,f,m,h,w){var p=w("line.color",m);if(g(c,"line")&&A.isArrayOrTypedArray(p)){if(p.length)return w("line.colorscale"),i(c,f,h,w,{prefix:"line.",cLetter:"c"}),p.length;f.line.color=m}return 1/0}(f,m,h,w,p);P(m,w,p),(!Array.isArray(v)||!v.length)&&(m.visible=!1),l(m,v,"values",M);var b={family:w.font.family,size:Math.round(w.font.size/1.2),color:w.font.color};A.coerceFont(p,"labelfont",b),A.coerceFont(p,"tickfont",b),A.coerceFont(p,"rangefont",b),p("labelangle"),p("labelside"),p("unselected.line.color"),p("unselected.line.opacity")}},1602:function(q,W,t){"use strict";var A=t(71828).isTypedArray;W.convertTypedArray=function(g){return A(g)?Array.prototype.slice.call(g):g},W.isOrdinal=function(g){return!!g.tickvals},W.isVisible=function(g){return g.visible||!("visible"in g)}},67618:function(q,W,t){"use strict";var A=t(71791);A.plot=t(21341),q.exports=A},83398:function(q,W,t){"use strict";var A=t(56068),g=A(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),i=A(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),P=t(25706).maxDimensionCount,C=t(71828),u=1e-6,y=2048,e=new Uint8Array(4),r=new Uint8Array(4),l={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function s(S,T,n,E,d){var F=S._gl;F.enable(F.SCISSOR_TEST),F.scissor(T,n,E,d),S.clear({color:[0,0,0,0],depth:1})}function c(S,T,n,E,d,F){var D=F.key;n.drawCompleted||(function a(S){S.read({x:0,y:0,width:1,height:1,data:e})}(S),n.drawCompleted=!0),function N(k){var O=Math.min(E,d-k*E);0===k&&(window.cancelAnimationFrame(n.currentRafs[D]),delete n.currentRafs[D],s(S,F.scissorX,F.scissorY,F.scissorWidth,F.viewBoxSize[1])),!n.clearOnly&&(F.count=2*O,F.offset=2*k*E,T(F),k*E+O<d&&(n.currentRafs[D]=window.requestAnimationFrame(function(){N(k+1)})),n.drawCompleted=!1)}(0)}function f(S){return Math.max(u,Math.min(1-u,S))}function m(S,T){for(var n=new Array(256),E=0;E<256;E++)n[E]=S(E/255).concat(T);return n}function h(S,T){return(S>>>8*T)%256/255}function p(S,T,n){for(var E=new Array(8*T),d=0,F=0;F<T;F++)for(var D=0;D<2;D++)for(var N=0;N<4;N++){var k=4*S+N,O=n[64*F+k];63===k&&0===D&&(O*=-1),E[d++]=O}return E}function o(S){var T="0"+S;return T.substr(T.length-2)}function v(S){return S<P?"p"+o(S+1)+"_"+o(S+4):"colors"}function L(S,T,n,E,d,F,D,N,k,O,B,z,U,H){for(var J=[[],[]],nt=0;nt<64;nt++)J[0][nt]=nt===d?1:0,J[1][nt]=nt===F?1:0;var it=S.lines.canvasOverdrag*H,ut=S.domain,Q=S.canvasWidth*H,j=S.canvasHeight*H,Z=S.pad.l*H,G=S.pad.b*H,K=S.layoutHeight*H,at=S.layoutWidth*H,$=S.deselectedLines.color,X=S.deselectedLines.opacity;return C.extendFlat({key:B,resolution:[Q,j],viewBoxPos:[(D*=H)+it,N*=H],viewBoxSize:[k*=H,O*=H],i0:d,i1:F,dim0A:J[0].slice(0,16),dim0B:J[0].slice(16,32),dim0C:J[0].slice(32,48),dim0D:J[0].slice(48,64),dim1A:J[1].slice(0,16),dim1B:J[1].slice(16,32),dim1C:J[1].slice(32,48),dim1D:J[1].slice(48,64),drwLayer:z,contextColor:[$[0]/255,$[1]/255,$[2]/255,"auto"!==X?$[3]*X:Math.max(1/255,Math.pow(1/S.lines.color.length,1/3))],scissorX:(E===T?0:D+it)+(Z-it)+at*ut.x[0],scissorWidth:(E===n?Q-D+it:k+.5)+(E===T?D+it:0),scissorY:N+G+K*ut.y[0],scissorHeight:O,viewportX:Z-it+at*ut.x[0],viewportY:G+K*ut.y[0],viewportWidth:Q,viewportHeight:j},U)}function x(S){var T=y-1,n=Math.max(0,Math.floor(S[0]*T),0),E=Math.min(T,Math.ceil(S[1]*T),T);return[Math.min(n,E),Math.max(n,E)]}q.exports=function(S,T){var O,z,U,J,n=T.context,E=T.pick,d=T.regl,F=d._gl,D=F.getParameter(F.ALIASED_LINE_WIDTH_RANGE),N=Math.max(D[0],Math.min(D[1],T.viewModel.plotGlPixelRatio)),k={currentRafs:{},drawCompleted:!0,clearOnly:!1},H=function b(S){for(var T={},n=0;n<=P;n+=4)T[v(n)]=S.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return T}(d),nt=d.texture(l),it=[];Q(T);var ut=d({profile:!1,blend:{enable:n,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!n,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:d.prop("scissorX"),y:d.prop("scissorY"),width:d.prop("scissorWidth"),height:d.prop("scissorHeight")}},viewport:{x:d.prop("viewportX"),y:d.prop("viewportY"),width:d.prop("viewportWidth"),height:d.prop("viewportHeight")},dither:!1,vert:g,frag:i,primitive:"lines",lineWidth:N,attributes:H,uniforms:{resolution:d.prop("resolution"),viewBoxPos:d.prop("viewBoxPos"),viewBoxSize:d.prop("viewBoxSize"),dim0A:d.prop("dim0A"),dim1A:d.prop("dim1A"),dim0B:d.prop("dim0B"),dim1B:d.prop("dim1B"),dim0C:d.prop("dim0C"),dim1C:d.prop("dim1C"),dim0D:d.prop("dim0D"),dim1D:d.prop("dim1D"),loA:d.prop("loA"),hiA:d.prop("hiA"),loB:d.prop("loB"),hiB:d.prop("hiB"),loC:d.prop("loC"),hiC:d.prop("hiC"),loD:d.prop("loD"),hiD:d.prop("hiD"),palette:nt,contextColor:d.prop("contextColor"),maskTexture:d.prop("maskTexture"),drwLayer:d.prop("drwLayer"),maskHeight:d.prop("maskHeight")},offset:d.prop("offset"),count:d.prop("count")});function Q($){O=$.model,z=$.viewModel.dimensions.slice(),U=z[0]?z[0].values.length:0;var X=O.lines,rt=E?X.color.map(function(st,dt){return dt/X.color.length}):X.color,et=function w(S,T,n){for(var E=new Array(S*(P+4)),d=0,F=0;F<S;F++){for(var D=0;D<P;D++)E[d++]=D<T.length?T[D].paddedUnitValues[F]:.5;E[d++]=h(F,2),E[d++]=h(F,1),E[d++]=h(F,0),E[d++]=f(n[F])}return E}(U,z,rt);(function M(S,T,n){for(var E=0;E<=P;E+=4)S[v(E)](p(E/4,T,n))})(H,U,et),!n&&!E&&(nt=d.texture(C.extendFlat({data:m(O.unitToColor,255)},l)))}return{render:function Z($,X,rt){var st,dt,bt,et=$.length,gt=1/0,Lt=-1/0;for(st=0;st<et;st++)$[st].dim0.canvasX<gt&&(gt=$[st].dim0.canvasX,dt=st),$[st].dim1.canvasX>Lt&&(Lt=$[st].dim1.canvasX,bt=st);0===et&&s(d,0,0,O.canvasWidth,O.canvasHeight);var It=function j($){var X,rt,et,st=[[],[]];for(et=0;et<64;et++){var dt=!$&&et<z.length?z[et].brush.filter.getBounds():[-1/0,1/0];st[0][et]=dt[0],st[1][et]=dt[1]}var gt=new Array(16384);for(X=0;X<16384;X++)gt[X]=255;if(!$)for(X=0;X<z.length;X++){var Lt=X%8,It=(X-Lt)/8,Mt=Math.pow(2,Lt),At=z[X].brush.filter.get();if(!(At.length<2)){var Gt=x(At[0])[1];for(rt=1;rt<At.length;rt++){var Wt=x(At[rt]);for(et=Gt+1;et<Wt[0];et++)gt[8*et+It]&=~Mt;Gt=Math.max(Gt,Wt[1])}}}var Pt={shape:[8,y],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:gt};return J?J(Pt):J=d.texture(Pt),{maskTexture:J,maskHeight:y,loA:st[0].slice(0,16),loB:st[0].slice(16,32),loC:st[0].slice(32,48),loD:st[0].slice(48,64),hiA:st[1].slice(0,16),hiB:st[1].slice(16,32),hiC:st[1].slice(32,48),hiD:st[1].slice(48,64)}}(n);for(st=0;st<et;st++){var Mt=$[st],xt=Mt.dim0.crossfilterDimensionIndex,At=Mt.dim1.crossfilterDimensionIndex,Gt=Mt.canvasX,Wt=Mt.canvasY,Pt=Gt+Mt.panelSizeX,Vt=Mt.plotGlPixelRatio;if(X||!it[xt]||it[xt][0]!==Gt||it[xt][1]!==Pt){it[xt]=[Gt,Pt];var te=L(O,dt,bt,st,xt,At,Gt,Wt,Mt.panelSizeX,Mt.panelSizeY,Mt.dim0.crossfilterDimensionIndex,n?0:E?2:1,It,Vt);k.clearOnly=rt,c(d,ut,k,X?O.lines.blockLineCount:U,U,te)}}},readPixel:function G($,X){return d.read({x:$,y:X,width:1,height:1,data:r}),r},readPixels:function K($,X,rt,et){var st=new Uint8Array(4*rt*et);return d.read({x:$,y:X,width:rt,height:et,data:st}),st},destroy:function at(){for(var $ in S.style["pointer-events"]="none",nt.destroy(),J&&J.destroy(),H)H[$].destroy()},update:Q}}},94397:function(q){"use strict";q.exports=function(W,t,A,g){var i,P;for(g||(g=1/0),i=0;i<t.length;i++)(P=t[i]).visible&&(g=Math.min(g,P[A].length));for(g===1/0&&(g=0),W._length=g,i=0;i<t.length;i++)(P=t[i]).visible&&(P._length=g);return g}},17171:function(q,W,t){"use strict";var A=t(39898),g=t(71828),i=g.numberFormat,P=t(36652),C=t(89298),u=g.strRotate,y=g.strTranslate,e=t(63893),r=t(91424),l=t(21081),a=t(28984),s=a.keyFun,c=a.repeat,f=a.unwrap,m=t(1602),h=t(25706),w=t(57920),p=t(83398);function o(J,nt,it){return g.aggNums(J,null,nt,it)}function v(J,nt){return b(o(Math.min,J,nt),o(Math.max,J,nt))}function M(J){var nt=J.range;return nt?b(nt[0],nt[1]):v(J.values,J._length)}function b(J,nt){return(isNaN(J)||!isFinite(J))&&(J=0),(isNaN(nt)||!isFinite(nt))&&(nt=0),J===nt&&(0===J?(J-=1,nt+=1):(J*=.9,nt*=1.1)),[J,nt]}function x(J,nt,it,ut,Q){var j=M(it);return ut?A.scale.ordinal().domain(ut.map(function L(J,nt){return nt?function(it,ut){var Q=nt[ut];return null==Q?J(it):Q}:J}(i(it.tickformat),Q))).range(ut.map(function(Z){return J-nt+(Z-j[0])/(j[1]-j[0])*(2*nt-J)})):A.scale.linear().domain(j).range([J-nt,nt])}function n(J){if(J.tickvals){var nt=M(J);return A.scale.ordinal().domain(J.tickvals).range(J.tickvals.map(function(it){return(it-nt[0])/(nt[1]-nt[0])}))}}function E(J){var nt=J.map(function(j){return j[0]}),it=J.map(function(j){var Z=P(j[1]);return A.rgb("rgb("+Z[0]+","+Z[1]+","+Z[2]+")")}),Q="rgb".split("").map(function(j){return A.scale.linear().clamp(!0).domain(nt).range(it.map(function(j){return function(Z){return Z[j]}}(j)))});return function(j){return Q.map(function(Z){return Z(j)})}}function d(J){return J.dimensions.some(function(nt){return nt.brush.filterSpecified})}function F(J,nt,it){var ut=f(nt),Q=ut.trace,j=m.convertTypedArray(ut.lineColor),Z=Q.line,G={color:P(Q.unselected.line.color),opacity:Q.unselected.line.opacity},K=l.extractOpts(Z),at=K.reversescale?l.flipScale(ut.cscale):ut.cscale,$=Q.domain,X=Q.dimensions,rt=J.width,et=Q.labelangle,st=Q.labelside,dt=Q.labelfont,bt=Q.tickfont,gt=Q.rangefont,Lt=g.extendDeepNoArrays({},Z,{color:j.map(A.scale.linear().domain(M({values:j,range:[K.min,K.max],_length:Q._length}))),blockLineCount:h.blockLineCount,canvasOverdrag:h.overdrag*h.canvasPixelRatio}),It=Math.floor(rt*($.x[1]-$.x[0])),Mt=Math.floor(J.height*($.y[1]-$.y[0])),xt=J.margin||{l:80,r:80,t:100,b:80},At=It,Gt=Mt;return{key:it,colCount:X.filter(m.isVisible).length,dimensions:X,tickDistance:h.tickDistance,unitToColor:E(at),lines:Lt,deselectedLines:G,labelAngle:et,labelSide:st,labelFont:dt,tickFont:bt,rangeFont:gt,layoutWidth:rt,layoutHeight:J.height,domain:$,translateX:$.x[0]*rt,translateY:J.height-$.y[1]*J.height,pad:xt,canvasWidth:At*h.canvasPixelRatio+2*Lt.canvasOverdrag,canvasHeight:Gt*h.canvasPixelRatio,width:At,height:Gt,canvasPixelRatio:h.canvasPixelRatio}}function D(J,nt,it){var ut=it.width,Q=it.height,j=it.dimensions,Z=it.canvasPixelRatio,G=function(rt){return ut*rt/Math.max(1,it.colCount-1)},K=h.verticalPadding/Q,at=function S(J,nt){return A.scale.linear().range([nt,J-nt])}(Q,h.verticalPadding),$={key:it.key,xScale:G,model:it,inBrushDrag:!1},X={};return $.dimensions=j.filter(m.isVisible).map(function(rt,et){var st=function T(J,nt){return A.scale.linear().domain(M(J)).range([nt,1-nt])}(rt,K),dt=X[rt.label];X[rt.label]=(dt||0)+1;var bt=rt.label+(dt?"__"+dt:""),gt=rt.constraintrange,Lt=gt&&gt.length;Lt&&!Array.isArray(gt[0])&&(gt=[gt]);var It=Lt?gt.map(function(Bt){return Bt.map(st)}):[[-1/0,1/0]],xt=rt.values;xt.length>rt._length&&(xt=xt.slice(0,rt._length));var Gt,At=rt.tickvals;function Wt(Bt,Ot){return{val:Bt,text:Gt[Ot]}}function Pt(Bt,Ot){return Bt.val-Ot.val}if(Array.isArray(At)&&At.length){Gt=rt.ticktext,Array.isArray(Gt)&&Gt.length?Gt.length>At.length?Gt=Gt.slice(0,At.length):At.length>Gt.length&&(At=At.slice(0,Gt.length)):Gt=At.map(i(rt.tickformat));for(var Vt=1;Vt<At.length;Vt++)if(At[Vt]<At[Vt-1]){for(var te=At.map(Wt).sort(Pt),Qt=0;Qt<At.length;Qt++)At[Qt]=te[Qt].val,Gt[Qt]=te[Qt].text;break}}else At=void 0;return xt=m.convertTypedArray(xt),{key:bt,label:rt.label,tickFormat:rt.tickformat,tickvals:At,ticktext:Gt,ordinal:m.isOrdinal(rt),multiselect:rt.multiselect,xIndex:et,crossfilterDimensionIndex:et,visibleIndex:rt._index,height:Q,values:xt,paddedUnitValues:xt.map(st),unitTickvals:At&&At.map(st),xScale:G,x:G(et),canvasX:G(et)*Z,unitToPaddedPx:at,domainScale:x(Q,h.verticalPadding,rt,At,Gt),ordinalScale:n(rt),parent:$,model:it,brush:w.makeBrush(J,Lt,It,function(){J.linePickActive(!1)},function(){var Bt=$;Bt.focusLayer&&Bt.focusLayer.render(Bt.panels,!0);var Ot=d(Bt);!J.contextShown()&&Ot?(Bt.contextLayer&&Bt.contextLayer.render(Bt.panels,!0),J.contextShown(!0)):J.contextShown()&&!Ot&&(Bt.contextLayer&&Bt.contextLayer.render(Bt.panels,!0,!0),J.contextShown(!1))},function(Bt){if($.focusLayer.render($.panels,!0),$.pickLayer&&$.pickLayer.render($.panels,!0),J.linePickActive(!0),nt&&nt.filterChanged){var Ot=st.invert,qt=Bt.map(function(ie){return ie.map(Ot).sort(g.sorterAsc)}).sort(function(ie,oe){return ie[0]-oe[0]});nt.filterChanged($.key,rt._index,qt)}})}}),$}function N(J){J.classed(h.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function O(J,nt){var ut=J*Math.PI/180;return{dir:"top"===nt?1:-1,dx:Math.sin(ut),dy:Math.cos(ut),degrees:J}}function B(J,nt,it){for(var ut=nt.panels||(nt.panels=[]),Q=J.data(),j=0;j<Q.length-1;j++){var Z=ut[j]||(ut[j]={}),G=Q[j],K=Q[j+1];Z.dim0=G,Z.dim1=K,Z.canvasX=G.canvasX,Z.panelSizeX=K.canvasX-G.canvasX,Z.panelSizeY=nt.model.canvasHeight,Z.y=0,Z.canvasY=0,Z.plotGlPixelRatio=it}}function U(J,nt){return C.tickText(J._ax,nt,!1).text}function H(J,nt){if(J.ordinal)return"";var it=J.domainScale.domain();return U(J.model.dimensions[J.visibleIndex],it[nt?it.length-1:0])}q.exports=function(nt,it,ut,Q){var j=nt._context.staticPlot,Z=nt._fullLayout,G=Z._toppaper,K=Z._glcontainer,at=nt._context.plotGlPixelRatio,$=nt._fullLayout.paper_bgcolor;!function z(J){for(var nt=0;nt<J.length;nt++)for(var it=0;it<J[nt].length;it++)for(var ut=J[nt][it].trace,Q=ut.dimensions,j=0;j<Q.length;j++){var Z=Q[j].values,G=Q[j]._ax;G&&(G.range=G.range?b(G.range[0],G.range[1]):v(Z,ut._length),G.dtick||(G.dtick=.01*(Math.abs(G.range[1]-G.range[0])||1)),G.tickformat=Q[j].tickformat,C.calcTicks(G),G.cleanRange())}}(it);var X=function k(){var J=!0,nt=!1;return{linePickActive:function(it){return arguments.length?J=!!it:J},contextShown:function(it){return arguments.length?nt=!!it:nt}}}(),rt=it.filter(function(Qt){return f(Qt).trace.visible}).map(F.bind(0,ut)).map(D.bind(0,X,Q));K.each(function(Qt,Bt){return g.extendFlat(Qt,rt[Bt])});var et=K.selectAll(".gl-canvas").each(function(Qt){Qt.viewModel=rt[0],Qt.viewModel.plotGlPixelRatio=at,Qt.viewModel.paperColor=$,Qt.model=Qt.viewModel?Qt.viewModel.model:null}),st=null;et.filter(function(Qt){return Qt.pick}).style("pointer-events",j?"none":"auto").on("mousemove",function(Qt){if(X.linePickActive()&&Qt.lineLayer&&Q&&Q.hover){var Bt=A.event,Ot=this.width,qt=this.height,ie=A.mouse(this),oe=ie[0],pe=ie[1];if(oe<0||pe<0||oe>=Ot||pe>=qt)return;var de=Qt.lineLayer.readPixel(oe,qt-1-pe),Fe=0!==de[3],Kt=Fe?de[2]+256*(de[1]+256*de[0]):null,Et={x:oe,y:pe,clientX:Bt.clientX,clientY:Bt.clientY,dataIndex:Qt.model.key,curveNumber:Kt};Kt!==st&&(Fe?Q.hover(Et):Q.unhover&&Q.unhover(Et),st=Kt)}}),et.style("opacity",function(Qt){return Qt.pick?0:1}),G.style("background","rgba(255, 255, 255, 0)");var bt=G.selectAll("."+h.cn.parcoords).data(rt,s);bt.exit().remove(),bt.enter().append("g").classed(h.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),bt.attr("transform",function(Qt){return y(Qt.model.translateX,Qt.model.translateY)});var gt=bt.selectAll("."+h.cn.parcoordsControlView).data(c,s);gt.enter().append("g").classed(h.cn.parcoordsControlView,!0),gt.attr("transform",function(Qt){return y(Qt.model.pad.l,Qt.model.pad.t)});var Lt=gt.selectAll("."+h.cn.yAxis).data(function(Qt){return Qt.dimensions},s);Lt.enter().append("g").classed(h.cn.yAxis,!0),gt.each(function(Qt){B(Lt,Qt,at)}),et.each(function(Qt){Qt.viewModel&&(!Qt.lineLayer||Q?Qt.lineLayer=p(this,Qt):Qt.lineLayer.update(Qt),(Qt.key||0===Qt.key)&&(Qt.viewModel[Qt.key]=Qt.lineLayer),Qt.lineLayer.render(Qt.viewModel.panels,!Qt.context||Q))}),Lt.attr("transform",function(Qt){return y(Qt.xScale(Qt.xIndex),0)}),Lt.call(A.behavior.drag().origin(function(Qt){return Qt}).on("drag",function(Qt){var Bt=Qt.parent;X.linePickActive(!1),Qt.x=Math.max(-h.overdrag,Math.min(Qt.model.width+h.overdrag,A.event.x)),Qt.canvasX=Qt.x*Qt.model.canvasPixelRatio,Lt.sort(function(Ot,qt){return Ot.x-qt.x}).each(function(Ot,qt){Ot.xIndex=qt,Ot.x=Qt===Ot?Ot.x:Ot.xScale(Ot.xIndex),Ot.canvasX=Ot.x*Ot.model.canvasPixelRatio}),B(Lt,Bt,at),Lt.filter(function(Ot){return 0!==Math.abs(Qt.xIndex-Ot.xIndex)}).attr("transform",function(Ot){return y(Ot.xScale(Ot.xIndex),0)}),A.select(this).attr("transform",y(Qt.x,0)),Lt.each(function(Ot,qt,ie){ie===Qt.parent.key&&(Bt.dimensions[qt]=Ot)}),Bt.contextLayer&&Bt.contextLayer.render(Bt.panels,!1,!d(Bt)),Bt.focusLayer.render&&Bt.focusLayer.render(Bt.panels)}).on("dragend",function(Qt){var Bt=Qt.parent;Qt.x=Qt.xScale(Qt.xIndex),Qt.canvasX=Qt.x*Qt.model.canvasPixelRatio,B(Lt,Bt,at),A.select(this).attr("transform",function(Ot){return y(Ot.x,0)}),Bt.contextLayer&&Bt.contextLayer.render(Bt.panels,!1,!d(Bt)),Bt.focusLayer&&Bt.focusLayer.render(Bt.panels),Bt.pickLayer&&Bt.pickLayer.render(Bt.panels,!0),X.linePickActive(!0),Q&&Q.axesMoved&&Q.axesMoved(Bt.key,Bt.dimensions.map(function(Ot){return Ot.crossfilterDimensionIndex}))})),Lt.exit().remove();var It=Lt.selectAll("."+h.cn.axisOverlays).data(c,s);It.enter().append("g").classed(h.cn.axisOverlays,!0),It.selectAll("."+h.cn.axis).remove();var Mt=It.selectAll("."+h.cn.axis).data(c,s);Mt.enter().append("g").classed(h.cn.axis,!0),Mt.each(function(Qt){var Bt=Qt.model.height/Qt.model.tickDistance,Ot=Qt.domainScale,qt=Ot.domain();A.select(this).call(A.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Bt,Qt.tickFormat).tickValues(Qt.ordinal?qt:null).tickFormat(function(ie){return m.isOrdinal(Qt)?ie:U(Qt.model.dimensions[Qt.visibleIndex],ie)}).scale(Ot)),r.font(Mt.selectAll("text"),Qt.model.tickFont)}),Mt.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Mt.selectAll("text").style("text-shadow",e.makeTextShadow($)).style("cursor","default");var xt=It.selectAll("."+h.cn.axisHeading).data(c,s);xt.enter().append("g").classed(h.cn.axisHeading,!0);var At=xt.selectAll("."+h.cn.axisTitle).data(c,s);At.enter().append("text").classed(h.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",j?"none":"auto"),At.text(function(Qt){return Qt.label}).each(function(Qt){var Bt=A.select(this);r.font(Bt,Qt.model.labelFont),e.convertToTspans(Bt,nt)}).attr("transform",function(Qt){var Bt=O(Qt.model.labelAngle,Qt.model.labelSide),Ot=h.axisTitleOffset;return(Bt.dir>0?"":y(0,2*Ot+Qt.model.height))+u(Bt.degrees)+y(-Ot*Bt.dx,-Ot*Bt.dy)}).attr("text-anchor",function(Qt){var Bt=O(Qt.model.labelAngle,Qt.model.labelSide);return 2*Math.abs(Bt.dx)>Math.abs(Bt.dy)?Bt.dir*Bt.dx<0?"start":"end":"middle"});var Gt=It.selectAll("."+h.cn.axisExtent).data(c,s);Gt.enter().append("g").classed(h.cn.axisExtent,!0);var Wt=Gt.selectAll("."+h.cn.axisExtentTop).data(c,s);Wt.enter().append("g").classed(h.cn.axisExtentTop,!0),Wt.attr("transform",y(0,-h.axisExtentOffset));var Pt=Wt.selectAll("."+h.cn.axisExtentTopText).data(c,s);Pt.enter().append("text").classed(h.cn.axisExtentTopText,!0).call(N),Pt.text(function(Qt){return H(Qt,!0)}).each(function(Qt){r.font(A.select(this),Qt.model.rangeFont)});var Vt=Gt.selectAll("."+h.cn.axisExtentBottom).data(c,s);Vt.enter().append("g").classed(h.cn.axisExtentBottom,!0),Vt.attr("transform",function(Qt){return y(0,Qt.model.height+h.axisExtentOffset)});var te=Vt.selectAll("."+h.cn.axisExtentBottomText).data(c,s);te.enter().append("text").classed(h.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(N),te.text(function(Qt){return H(Qt,!1)}).each(function(Qt){r.font(A.select(this),Qt.model.rangeFont)}),w.ensureAxisBrush(It,$,nt)}},21341:function(q,W,t){"use strict";var A=t(17171),g=t(79749),i=t(1602).isVisible,P={};function C(e,r,l){var a=r.indexOf(l),s=e.indexOf(a);return-1===s&&(s+=r.length),s}(q.exports=function(r,l){var a=r._fullLayout;if(g(r,[],P)){var c={},f={},m={},h={},w=a._size;l.forEach(function(b,L){var x=b[0].trace;m[L]=x.index;var S=h[L]=x._fullInput.index;c[L]=r.data[S].dimensions,f[L]=r.data[S].dimensions.slice()});A(r,l,{width:w.w,height:w.h,margin:{t:w.t,r:w.r,b:w.b,l:w.l}},{filterChanged:function(b,L,x){var S=f[b][L],T=x.map(function(N){return N.slice()}),n="dimensions["+L+"].constraintrange",E=a._tracePreGUI[r._fullData[m[b]]._fullInput.uid];void 0===E[n]&&(E[n]=S.constraintrange||null);var F=r._fullData[m[b]].dimensions[L];T.length?(1===T.length&&(T=T[0]),S.constraintrange=T,F.constraintrange=T.slice(),T=[T]):(delete S.constraintrange,delete F.constraintrange,T=null);var D={};D[n]=T,r.emit("plotly_restyle",[D,[h[b]]])},hover:function(b){r.emit("plotly_hover",b)},unhover:function(b){r.emit("plotly_unhover",b)},axesMoved:function(b,L){var x=function u(e,r){return function(a,s){return C(e,r,a)-C(e,r,s)}}(L,f[b].filter(i));c[b].sort(x),f[b].filter(function(S){return!i(S)}).sort(function(S){return f[b].indexOf(S)}).forEach(function(S){c[b].splice(c[b].indexOf(S),1),c[b].splice(f[b].indexOf(S),0,S)}),r.emit("plotly_restyle",[{dimensions:[c[b]]},[h[b]]])}})}}).reglPrecompiled=P},34e3:function(q,W,t){"use strict";var A=t(9012),g=t(27670).Y,i=t(41940),P=t(22399),C=t(5386).fF,u=t(5386).si,y=t(1426).extendFlat,e=t(79952).u,r=i({editType:"plot",arrayOk:!0,colorEditType:"plot"});q.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:P.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:e,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:y({},A.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:C({},{keys:["label","color","value","percent","text"]}),texttemplate:u({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:y({},r,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:y({},r,{}),outsidetextfont:y({},r,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:y({},r,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:g({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:y({},r,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},13584:function(q,W,t){"use strict";var A=t(74875);W.name="pie",W.plot=function(g,i,P,C){A.plotBasePlot(W.name,g,i,P,C)},W.clean=function(g,i,P,C){A.cleanBasePlot(W.name,g,i,P,C)}},32354:function(q,W,t){"use strict";var A=t(92770),g=t(84267),i=t(7901),P={};function u(r){return function(a,s){return!(!a||(a=g(a),!a.isValid()))&&(a=i.addOpacity(a,a.getAlpha()),r[s]||(r[s]=a),a)}}function e(r,l){var a,s=JSON.stringify(r),c=l[s];if(!c){for(c=r.slice(),a=0;a<r.length;a++)c.push(g(r[a]).lighten(20).toHexString());for(a=0;a<r.length;a++)c.push(g(r[a]).darken(20).toHexString());l[s]=c}return c}q.exports={calc:function C(r,l){var o,v,a=[],s=r._fullLayout,c=s.hiddenlabels||[],f=l.labels,m=l.marker.colors||[],h=l.values,w=l._length,p=l._hasValues&&w;if(l.dlabel)for(f=new Array(w),o=0;o<w;o++)f[o]=String(l.label0+o*l.dlabel);var M={},b=u(s["_"+l.type+"colormap"]),L=0,x=!1;for(o=0;o<w;o++){var S,T,n;if(p){if(!A(S=h[o]))continue;S=+S}else S=1;(void 0===(T=f[o])||""===T)&&(T=o);var E=M[T=String(T)];void 0===E?(M[T]=a.length,(n=-1!==c.indexOf(T))||(L+=S),a.push({v:S,label:T,color:b(m[o],T),i:o,pts:[o],hidden:n})):(x=!0,(v=a[E]).v+=S,v.pts.push(o),v.hidden||(L+=S),!1===v.color&&m[o]&&(v.color=b(m[o],T)))}return a=a.filter(function(F){return F.v>=0}),("funnelarea"===l.type?x:l.sort)&&a.sort(function(F,D){return D.v-F.v}),a[0]&&(a[0].vTotal=L),a},crossTraceCalc:function y(r,l){var a=(l||{}).type;a||(a="pie");var s=r._fullLayout,c=r.calcdata,f=s[a+"colorway"],m=s["_"+a+"colormap"];s["extend"+a+"colors"]&&(f=e(f,P));for(var h=0,w=0;w<c.length;w++){var p=c[w];if(p[0].trace.type===a)for(var v=0;v<p.length;v++){var M=p[v];!1===M.color&&(m[M.label]?M.color=m[M.label]:(m[M.label]=M.color=f[h%f.length],h++))}}},makePullColorFn:u,generateExtendedColors:e}},37434:function(q,W,t){"use strict";var A=t(92770),g=t(71828),i=t(34e3),P=t(27670).c,C=t(90769).handleText,u=t(71828).coercePattern;function y(l,a){var s=Array.isArray(l),c=g.isArrayOrTypedArray(a),f=Math.min(s?l.length:1/0,c?a.length:1/0);if(isFinite(f)||(f=0),f&&c){for(var m,h=0;h<f;h++){var w=a[h];if(A(w)&&w>0){m=!0;break}}m||(f=0)}return{hasLabels:s,hasValues:c,len:f}}function e(l,a,s,c,f){c("marker.line.width")&&c("marker.line.color",f?void 0:s.paper_bgcolor);var h=c("marker.colors");u(c,"marker.pattern",h),l.marker&&!a.marker.pattern.fgcolor&&(a.marker.pattern.fgcolor=l.marker.colors),a.marker.pattern.bgcolor||(a.marker.pattern.bgcolor=s.paper_bgcolor)}q.exports={handleLabelsAndValues:y,handleMarkerDefaults:e,supplyDefaults:function r(l,a,s,c){function f(E,d){return g.coerce(l,a,i,E,d)}var w=y(f("labels"),f("values")),p=w.len;if(a._hasLabels=w.hasLabels,a._hasValues=w.hasValues,!a._hasLabels&&a._hasValues&&(f("label0"),f("dlabel")),p){a._length=p,e(l,a,c,f,!0),f("scalegroup");var M,o=f("text"),v=f("texttemplate");if(v||(M=f("textinfo",Array.isArray(o)?"text+percent":"percent")),f("hovertext"),f("hovertemplate"),v||M&&"none"!==M){var b=f("textposition");C(l,a,c,f,b,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(b)||"auto"===b||"outside"===b)&&f("automargin"),("inside"===b||"auto"===b||Array.isArray(b))&&f("insidetextorientation")}P(a,c,f);var S=f("hole");if(f("title.text")){var n=f("title.position",S?"middle center":"top center");!S&&"middle center"===n&&(a.title.position="top center"),g.coerceFont(f,"title.font",c.font)}f("sort"),f("direction"),f("rotation"),f("pull")}else a.visible=!1}}},20007:function(q,W,t){"use strict";var A=t(23469).appendArrayMultiPointValues;q.exports=function(i,P){var C={curveNumber:P.index,pointNumbers:i.pts,data:P._input,fullData:P,label:i.label,color:i.color,value:i.v,percent:i.percent,text:i.text,bbox:i.bbox,v:i.v};return 1===i.pts.length&&(C.pointNumber=C.i=i.pts[0]),A(C,P,i.pts),"funnelarea"===P.type&&(delete C.v,delete C.i),C}},22209:function(q,W,t){"use strict";var A=t(91424),g=t(7901);q.exports=function(P,C,u,y){var e=u.marker.pattern;e&&e.shape?A.pointStyle(P,u,y,C):g.fill(P,C.color)}},53581:function(q,W,t){"use strict";var A=t(71828);function g(i){return-1!==i.indexOf("e")?i.replace(/[.]?0+e/,"e"):-1!==i.indexOf(".")?i.replace(/[.]?0+$/,""):i}W.formatPiePercent=function(P,C){var u=g((100*P).toPrecision(3));return A.numSeparate(u,C)+"%"},W.formatPieValue=function(P,C){var u=g(P.toPrecision(10));return A.numSeparate(u,C)},W.getFirstFilled=function(P,C){if(Array.isArray(P))for(var u=0;u<C.length;u++){var y=P[C[u]];if(y||0===y||""===y)return y}},W.castOption=function(P,C){return Array.isArray(P)?W.getFirstFilled(P,C):P||void 0},W.getRotationAngle=function(i){return("auto"===i?0:i)*Math.PI/180}},58810:function(q,W,t){"use strict";q.exports={attributes:t(34e3),supplyDefaults:t(37434).supplyDefaults,supplyLayoutDefaults:t(92097),layoutAttributes:t(92774),calc:t(32354).calc,crossTraceCalc:t(32354).crossTraceCalc,plot:t(14575).plot,style:t(68357),styleOne:t(63463),moduleType:"trace",name:"pie",basePlotModule:t(13584),categories:["pie-like","pie","showLegend"],meta:{}}},92774:function(q){"use strict";q.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},92097:function(q,W,t){"use strict";var A=t(71828),g=t(92774);q.exports=function(P,C){function u(y,e){return A.coerce(P,C,g,y,e)}u("hiddenlabels"),u("piecolorway",C.colorway),u("extendpiecolors")}},14575:function(q,W,t){"use strict";var A=t(39898),g=t(74875),i=t(30211),P=t(7901),C=t(91424),u=t(71828),y=u.strScale,e=u.strTranslate,r=t(63893),l=t(72597),a=l.recordMinTextSize,s=l.clearMinTextSize,c=t(97313).TEXTPAD,f=t(53581),m=t(20007),h=t(71828).isValidTextValue;function o(j,Z,G){var K=G[0],at=K.cx,$=K.cy,X=K.trace,rt="funnelarea"===X.type;"_hasHoverLabel"in X||(X._hasHoverLabel=!1),"_hasHoverEvent"in X||(X._hasHoverEvent=!1),j.on("mouseover",function(et){var st=Z._fullLayout,dt=Z._fullData[X.index];if(!Z._dragging&&!1!==st.hovermode){var bt=dt.hoverinfo;if(Array.isArray(bt)&&(bt=i.castHoverinfo({hoverinfo:[f.castOption(bt,et.pts)],_module:X._module},st,0)),"all"===bt&&(bt="label+text+value+percent+name"),dt.hovertemplate||"none"!==bt&&"skip"!==bt&&bt){var gt=et.rInscribed||0,Lt=at+et.pxmid[0]*(1-gt),It=$+et.pxmid[1]*(1-gt),Mt=st.separators,xt=[];if(bt&&-1!==bt.indexOf("label")&&xt.push(et.label),et.text=f.castOption(dt.hovertext||dt.text,et.pts),bt&&-1!==bt.indexOf("text")){var At=et.text;u.isValidTextValue(At)&&xt.push(At)}et.value=et.v,et.valueLabel=f.formatPieValue(et.v,Mt),bt&&-1!==bt.indexOf("value")&&xt.push(et.valueLabel),et.percent=et.v/K.vTotal,et.percentLabel=f.formatPiePercent(et.percent,Mt),bt&&-1!==bt.indexOf("percent")&&xt.push(et.percentLabel);var Gt=dt.hoverlabel,Wt=Gt.font,Pt=[];i.loneHover({trace:X,x0:Lt-gt*K.r,x1:Lt+gt*K.r,y:It,_x0:rt?at+et.TL[0]:Lt-gt*K.r,_x1:rt?at+et.TR[0]:Lt+gt*K.r,_y0:rt?$+et.TL[1]:It-gt*K.r,_y1:rt?$+et.BL[1]:It+gt*K.r,text:xt.join("<br>"),name:dt.hovertemplate||-1!==bt.indexOf("name")?dt.name:void 0,idealAlign:et.pxmid[0]<0?"left":"right",color:f.castOption(Gt.bgcolor,et.pts)||et.color,borderColor:f.castOption(Gt.bordercolor,et.pts),fontFamily:f.castOption(Wt.family,et.pts),fontSize:f.castOption(Wt.size,et.pts),fontColor:f.castOption(Wt.color,et.pts),nameLength:f.castOption(Gt.namelength,et.pts),textAlign:f.castOption(Gt.align,et.pts),hovertemplate:f.castOption(dt.hovertemplate,et.pts),hovertemplateLabels:et,eventData:[m(et,dt)]},{container:st._hoverlayer.node(),outerContainer:st._paper.node(),gd:Z,inOut_bbox:Pt}),et.bbox=Pt[0],X._hasHoverLabel=!0}X._hasHoverEvent=!0,Z.emit("plotly_hover",{points:[m(et,dt)],event:A.event})}}),j.on("mouseout",function(et){var st=Z._fullLayout,dt=Z._fullData[X.index],bt=A.select(this).datum();X._hasHoverEvent&&(et.originalEvent=A.event,Z.emit("plotly_unhover",{points:[m(bt,dt)],event:A.event}),X._hasHoverEvent=!1),X._hasHoverLabel&&(i.loneUnhover(st._hoverlayer.node()),X._hasHoverLabel=!1)}),j.on("click",function(et){Z._dragging||!1===Z._fullLayout.hovermode||(Z._hoverdata=[m(et,Z._fullData[X.index])],i.click(Z,A.event))})}function M(j,Z,G){var K=f.castOption(j.insidetextfont.color,Z.pts);!K&&j._input.textfont&&(K=f.castOption(j._input.textfont.color,Z.pts));var at=f.castOption(j.insidetextfont.family,Z.pts)||f.castOption(j.textfont.family,Z.pts)||G.family,$=f.castOption(j.insidetextfont.size,Z.pts)||f.castOption(j.textfont.size,Z.pts)||G.size;return{color:K||P.contrast(Z.color),family:at,size:$}}function b(j,Z){for(var G,K,at=0;at<j.length;at++)if((K=(G=j[at][0]).trace).title.text){var $=K.title.text;K._meta&&($=u.templateString($,K._meta));var X=C.tester.append("text").attr("data-notex",1).text($).call(C.font,K.title.font).call(r.convertToTspans,Z),rt=C.bBox(X.node(),!0);G.titleBox={width:rt.width,height:rt.height},X.remove()}}function L(j,Z,G){var K=G.r||Z.rpx1,at=Z.rInscribed;if(Z.startangle===Z.stopangle)return{rCenter:1-at,scale:0,rotate:0,textPosAngle:0};var xt,X=Z.ring,rt=1===X&&Math.abs(Z.startangle-Z.stopangle)===2*Math.PI,et=Z.halfangle,st=Z.midangle,dt=G.trace.insidetextorientation,bt="horizontal"===dt,gt="tangential"===dt,Lt="radial"===dt,It="auto"===dt,Mt=[];if(!It){var Gt,At=function(Bt,Ot){if(function x(j,Z){var G=j.startangle,K=j.stopangle;return G>Z&&Z>K||G<Z&&Z<K}(Z,Bt)){var qt=Math.abs(Bt-Z.startangle),ie=Math.abs(Bt-Z.stopangle),oe=qt<ie?qt:ie;(xt="tan"===Ot?T(j,K,X,oe,0):S(j,K,X,oe,Math.PI/2)).textPosAngle=Bt,Mt.push(xt)}};if(bt||gt){for(Gt=4;Gt>=-4;Gt-=2)At(Math.PI*Gt,"tan");for(Gt=4;Gt>=-4;Gt-=2)At(Math.PI*(Gt+1),"tan")}if(bt||Lt){for(Gt=4;Gt>=-4;Gt-=2)At(Math.PI*(Gt+1.5),"rad");for(Gt=4;Gt>=-4;Gt-=2)At(Math.PI*(Gt+.5),"rad")}}if(rt||It||bt){var Wt=Math.sqrt(j.width*j.width+j.height*j.height);if((xt={scale:at*K*2/Wt,rCenter:1-at,rotate:0}).textPosAngle=(Z.startangle+Z.stopangle)/2,xt.scale>=1)return xt;Mt.push(xt)}(It||Lt)&&((xt=S(j,K,X,et,st)).textPosAngle=(Z.startangle+Z.stopangle)/2,Mt.push(xt)),(It||gt)&&((xt=T(j,K,X,et,st)).textPosAngle=(Z.startangle+Z.stopangle)/2,Mt.push(xt));for(var Pt=0,Vt=0,te=0;te<Mt.length;te++){var Qt=Mt[te].scale;if(Vt<Qt&&(Vt=Qt,Pt=te),!It&&Vt>=1)break}return Mt[Pt]}function S(j,Z,G,K,at){Z=Math.max(0,Z-2*c);var $=j.width/j.height,X=d($,K,Z,G);return{scale:2*X/j.height,rCenter:n($,X/Z),rotate:E(at)}}function T(j,Z,G,K,at){Z=Math.max(0,Z-2*c);var $=j.height/j.width,X=d($,K,Z,G);return{scale:2*X/j.width,rCenter:n($,X/Z),rotate:E(at+Math.PI/2)}}function n(j,Z){return Math.cos(Z)-j*Z}function E(j){return(180/Math.PI*j+720)%180-90}function d(j,Z,G,K){var at=j+1/(2*Math.tan(Z));return G*Math.min(1/(Math.sqrt(at*at+.5)+at),K/(Math.sqrt(j*j+K/2)+j))}function F(j,Z){return j.v!==Z.vTotal||Z.trace.hole?Math.min(1/(1+1/Math.sin(j.halfangle)),j.ring/2):1}function D(j,Z){var G=Z.pxmid[0],K=Z.pxmid[1],at=j.width/2,$=j.height/2;return G<0&&(at*=-1),K<0&&($*=-1),{scale:1,rCenter:1,rotate:0,x:at+Math.abs($)*(at>0?1:-1)/2,y:$/(1+G*G/(K*K)),outside:!0}}function k(j,Z){var at,G,K,$=j.trace,X={x:j.cx,y:j.cy},rt={tx:0,ty:0};rt.ty+=$.title.font.size,at=z($),-1!==$.title.position.indexOf("top")?(X.y-=(1+at)*j.r,rt.ty-=j.titleBox.height):-1!==$.title.position.indexOf("bottom")&&(X.y+=(1+at)*j.r);var et=function O(j,Z){return j/(void 0===Z?1:Z)}(j.r,j.trace.aspectratio),st=Z.w*($.domain.x[1]-$.domain.x[0])/2;return-1!==$.title.position.indexOf("left")?(st+=et,X.x-=(1+at)*et,rt.tx+=j.titleBox.width/2):-1!==$.title.position.indexOf("center")?st*=2:-1!==$.title.position.indexOf("right")&&(st+=et,X.x+=(1+at)*et,rt.tx-=j.titleBox.width/2),G=st/j.titleBox.width,K=B(j,Z)/j.titleBox.height,{x:X.x,y:X.y,scale:Math.min(G,K),tx:rt.tx,ty:rt.ty}}function B(j,Z){var G=j.trace;return Math.min(j.titleBox.height,Z.h*(G.domain.y[1]-G.domain.y[0])/2)}function z(j){var G,Z=j.pull;if(!Z)return 0;if(Array.isArray(Z))for(Z=0,G=0;G<j.pull.length;G++)j.pull[G]>Z&&(Z=j.pull[G]);return Z}function H(j,Z){for(var G=[],K=0;K<j.length;K++){var at=j[K][0],$=at.trace,X=$.domain,rt=Z.w*(X.x[1]-X.x[0]),et=Z.h*(X.y[1]-X.y[0]);$.title.text&&"middle center"!==$.title.position&&(et-=B(at,Z));var dt=et/2;"funnelarea"===$.type&&!$.scalegroup&&(dt/=$.aspectratio),at.r=Math.min(rt/2,dt)/(1+z($)),at.cx=Z.l+Z.w*($.domain.x[1]+$.domain.x[0])/2,at.cy=Z.t+Z.h*(1-$.domain.y[0])-et/2,$.title.text&&-1!==$.title.position.indexOf("bottom")&&(at.cy-=B(at,Z)),$.scalegroup&&-1===G.indexOf($.scalegroup)&&G.push($.scalegroup)}!function J(j,Z){for(var G,K,at,$=0;$<Z.length;$++){var X=1/0,rt=Z[$];for(K=0;K<j.length;K++)if((at=(G=j[K][0]).trace).scalegroup===rt){var et;if("pie"===at.type)et=G.r*G.r;else if("funnelarea"===at.type){var st,dt;at.aspectratio>1?dt=(st=G.r)/at.aspectratio:st=(dt=G.r)*at.aspectratio,et=(st*=(1+at.baseratio)/2)*dt}X=Math.min(X,et/G.vTotal)}for(K=0;K<j.length;K++)if((at=(G=j[K][0]).trace).scalegroup===rt){var bt=X*G.vTotal;"funnelarea"===at.type&&(bt/=(1+at.baseratio)/2,bt/=at.aspectratio),G.r=Math.sqrt(bt)}}}(j,G)}function it(j,Z){return[j*Math.sin(Z),-j*Math.cos(Z)]}function ut(j,Z,G){var K=j._fullLayout,at=G.trace,$=at.texttemplate,X=at.textinfo;if(!$&&X&&"none"!==X){var It,rt=X.split("+"),et=function(Pt){return-1!==rt.indexOf(Pt)},st=et("label"),dt=et("text"),bt=et("value"),gt=et("percent"),Lt=K.separators;if(It=st?[Z.label]:[],dt){var Mt=f.getFirstFilled(at.text,Z.pts);h(Mt)&&It.push(Mt)}bt&&It.push(f.formatPieValue(Z.v,Lt)),gt&&It.push(f.formatPiePercent(Z.v/G.vTotal,Lt)),Z.text=It.join("<br>")}if($){var At=u.castOption(at,Z.i,"texttemplate");if(At){var Gt=function xt(Pt){return{label:Pt.label,value:Pt.v,valueLabel:f.formatPieValue(Pt.v,K.separators),percent:Pt.v/G.vTotal,percentLabel:f.formatPiePercent(Pt.v/G.vTotal,K.separators),color:Pt.color,text:Pt.text,customdata:u.castOption(at,Pt.i,"customdata")}}(Z),Wt=f.getFirstFilled(at.text,Z.pts);(h(Wt)||""===Wt)&&(Gt.text=Wt),Z.text=u.texttemplateString(At,Gt,j._fullLayout._d3locale,Gt,at._meta||{})}else Z.text=""}}function Q(j,Z){var G=j.rotate*Math.PI/180,K=Math.cos(G),at=Math.sin(G),$=(Z.left+Z.right)/2,X=(Z.top+Z.bottom)/2;j.textX=$*K-X*at,j.textY=$*at+X*K,j.noCenter=!0}q.exports={plot:function w(j,Z){var G=j._context.staticPlot,K=j._fullLayout,at=K._size;s("pie",K),b(Z,j),H(Z,at);var $=u.makeTraceGroups(K._pielayer,Z,"trace").each(function(X){var rt=A.select(this),et=X[0],st=et.trace;(function nt(j){var et,st,dt,Z=j[0],G=Z.r,K=Z.trace,at=f.getRotationAngle(K.rotation),$=2*Math.PI/Z.vTotal,X="px0",rt="px1";if("counterclockwise"===K.direction){for(et=0;et<j.length&&j[et].hidden;et++);if(et===j.length)return;at+=$*j[et].v,$*=-1,X="px1",rt="px0"}for(dt=it(G,at),et=0;et<j.length;et++)!(st=j[et]).hidden&&(st[X]=dt,st.startangle=at,st.pxmid=it(G,at+=$*st.v/2),st.midangle=at,dt=it(G,at+=$*st.v/2),st.stopangle=at,st[rt]=dt,st.largeArc=st.v>Z.vTotal/2?1:0,st.halfangle=Math.PI*Math.min(st.v/Z.vTotal,.5),st.ring=1-K.hole,st.rInscribed=F(st,Z))})(X),rt.attr("stroke-linejoin","round"),rt.each(function(){var dt=A.select(this).selectAll("g.slice").data(X);dt.enter().append("g").classed("slice",!0),dt.exit().remove();var bt=[[[],[]],[[],[]]],gt=!1;dt.each(function(Pt,Vt){if(Pt.hidden)A.select(this).selectAll("path,g").remove();else{Pt.pointNumber=Pt.i,Pt.curveNumber=st.index,bt[Pt.pxmid[1]<0?0:1][Pt.pxmid[0]<0?0:1].push(Pt);var te=et.cx,Qt=et.cy,Bt=A.select(this),Ot=Bt.selectAll("path.surface").data([Pt]);if(Ot.enter().append("path").classed("surface",!0).style({"pointer-events":G?"none":"all"}),Bt.call(o,j,X),st.pull){var qt=+f.castOption(st.pull,Pt.pts)||0;qt>0&&(te+=qt*Pt.pxmid[0],Qt+=qt*Pt.pxmid[1])}Pt.cxFinal=te,Pt.cyFinal=Qt;var oe=st.hole;if(Pt.v===et.vTotal){var pe="M"+(te+Pt.px0[0])+","+(Qt+Pt.px0[1])+ie(Pt.px0,Pt.pxmid,!0,1)+ie(Pt.pxmid,Pt.px0,!0,1)+"Z";Ot.attr("d",oe?"M"+(te+oe*Pt.px0[0])+","+(Qt+oe*Pt.px0[1])+ie(Pt.px0,Pt.pxmid,!1,oe)+ie(Pt.pxmid,Pt.px0,!1,oe)+"Z"+pe:pe)}else{var de=ie(Pt.px0,Pt.px1,!0,1);if(oe){var Fe=1-oe;Ot.attr("d","M"+(te+oe*Pt.px1[0])+","+(Qt+oe*Pt.px1[1])+ie(Pt.px1,Pt.px0,!1,oe)+"l"+Fe*Pt.px0[0]+","+Fe*Pt.px0[1]+de+"Z")}else Ot.attr("d","M"+te+","+Qt+"l"+Pt.px0[0]+","+Pt.px0[1]+de+"Z")}ut(j,Pt,et);var Kt=f.castOption(st.textposition,Pt.pts),Et=Bt.selectAll("g.slicetext").data(Pt.text&&"none"!==Kt?[0]:[]);Et.enter().append("g").classed("slicetext",!0),Et.exit().remove(),Et.each(function(){var St=u.ensureSingle(A.select(this),"text","",function(kt){kt.attr("data-notex",1)}),Dt=u.ensureUniformFontSize(j,"outside"===Kt?function v(j,Z,G){return{color:f.castOption(j.outsidetextfont.color,Z.pts)||f.castOption(j.textfont.color,Z.pts)||G.color,family:f.castOption(j.outsidetextfont.family,Z.pts)||f.castOption(j.textfont.family,Z.pts)||G.family,size:f.castOption(j.outsidetextfont.size,Z.pts)||f.castOption(j.textfont.size,Z.pts)||G.size}}(st,Pt,K.font):M(st,Pt,K.font));St.text(Pt.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(C.font,Dt).call(r.convertToTspans,j);var Nt,Ft=C.bBox(St.node());if("outside"===Kt)Nt=D(Ft,Pt);else if(Nt=L(Ft,Pt,et),"auto"===Kt&&Nt.scale<1){var Rt=u.ensureUniformFontSize(j,st.outsidetextfont);St.call(C.font,Rt),Nt=D(Ft=C.bBox(St.node()),Pt)}var wt=Nt.textPosAngle,ft=void 0===wt?Pt.pxmid:it(et.r,wt);if(Nt.targetX=te+ft[0]*Nt.rCenter+(Nt.x||0),Nt.targetY=Qt+ft[1]*Nt.rCenter+(Nt.y||0),Q(Nt,Ft),Nt.outside){var pt=Nt.targetY;Pt.yLabelMin=pt-Ft.height/2,Pt.yLabelMid=pt,Pt.yLabelMax=pt+Ft.height/2,Pt.labelExtraX=0,Pt.labelExtraY=0,gt=!0}Nt.fontSize=Dt.size,a(st.type,Nt,K),X[Vt].transform=Nt,u.setTransormAndDisplay(St,Nt)})}function ie(St,Dt,Ft,Nt){return"a"+Nt*et.r+","+Nt*et.r+" 0 "+Pt.largeArc+(Ft?" 1 ":" 0 ")+Nt*(Dt[0]-St[0])+","+Nt*(Dt[1]-St[1])}});var Lt=A.select(this).selectAll("g.titletext").data(st.title.text?[0]:[]);if(Lt.enter().append("g").classed("titletext",!0),Lt.exit().remove(),Lt.each(function(){var te,Pt=u.ensureSingle(A.select(this),"text","",function(Qt){Qt.attr("data-notex",1)}),Vt=st.title.text;st._meta&&(Vt=u.templateString(Vt,st._meta)),Pt.text(Vt).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(C.font,st.title.font).call(r.convertToTspans,j),te="middle center"===st.title.position?function N(j){var Z=Math.sqrt(j.titleBox.width*j.titleBox.width+j.titleBox.height*j.titleBox.height);return{x:j.cx,y:j.cy,scale:j.trace.hole*j.r*2/Z,tx:0,ty:-j.titleBox.height/2+j.trace.title.font.size}}(et):k(et,at),Pt.attr("transform",e(te.x,te.y)+y(Math.min(1,te.scale))+e(te.tx,te.ty))}),gt&&function U(j,Z){var G,K,at,$,X,rt,et,st,dt,bt,gt,Lt,It;function Mt(Wt,Pt){return Wt.pxmid[1]-Pt.pxmid[1]}function xt(Wt,Pt){return Pt.pxmid[1]-Wt.pxmid[1]}function At(Wt,Pt){Pt||(Pt={});var qt,ie,oe,Fe,Vt=Pt.labelExtraY+(K?Pt.yLabelMax:Pt.yLabelMin),te=K?Wt.yLabelMin:Wt.yLabelMax,Qt=K?Wt.yLabelMax:Wt.yLabelMin,Bt=Wt.cyFinal+X(Wt.px0[1],Wt.px1[1]),Ot=Vt-te;if(Ot*et>0&&(Wt.labelExtraY=Ot),Array.isArray(Z.pull))for(ie=0;ie<bt.length;ie++)!((oe=bt[ie])===Wt||(f.castOption(Z.pull,Wt.pts)||0)>=(f.castOption(Z.pull,oe.pts)||0))&&((Wt.pxmid[1]-oe.pxmid[1])*et>0?(Ot=oe.cyFinal+X(oe.px0[1],oe.px1[1])-te-Wt.labelExtraY)*et>0&&(Wt.labelExtraY+=Ot):(Qt+Wt.labelExtraY-Bt)*et>0&&(qt=3*rt*Math.abs(ie-bt.indexOf(Wt)),(Fe=oe.cxFinal+$(oe.px0[0],oe.px1[0])+qt-(Wt.cxFinal+Wt.pxmid[0])-Wt.labelExtraX)*rt>0&&(Wt.labelExtraX+=Fe)))}for(K=0;K<2;K++)for(at=K?Mt:xt,X=K?Math.max:Math.min,et=K?1:-1,G=0;G<2;G++){for($=G?Math.max:Math.min,rt=G?1:-1,(st=j[K][G]).sort(at),bt=(dt=j[1-K][G]).concat(st),Lt=[],gt=0;gt<st.length;gt++)void 0!==st[gt].yLabelMid&&Lt.push(st[gt]);for(It=!1,gt=0;K&&gt<dt.length;gt++)if(void 0!==dt[gt].yLabelMid){It=dt[gt];break}for(gt=0;gt<Lt.length;gt++){var Gt=gt&&Lt[gt-1];It&&!gt&&(Gt=It),At(Lt[gt],Gt)}}}(bt,st),function p(j,Z){j.each(function(G){var K=A.select(this);if(G.labelExtraX||G.labelExtraY){var at=K.select("g.slicetext text");G.transform.targetX+=G.labelExtraX,G.transform.targetY+=G.labelExtraY,u.setTransormAndDisplay(at,G.transform);var $=G.cxFinal+G.pxmid[0],rt="M"+$+","+(G.cyFinal+G.pxmid[1]),et=(G.yLabelMax-G.yLabelMin)*(G.pxmid[0]<0?-1:1)/4;if(G.labelExtraX){var st=G.labelExtraX*G.pxmid[1]/G.pxmid[0],dt=G.yLabelMid+G.labelExtraY-(G.cyFinal+G.pxmid[1]);Math.abs(st)>Math.abs(dt)?rt+="l"+dt*G.pxmid[0]/G.pxmid[1]+","+dt+"H"+($+G.labelExtraX+et):rt+="l"+G.labelExtraX+","+st+"v"+(dt-st)+"h"+et}else rt+="V"+(G.yLabelMid+G.labelExtraY)+"h"+et;u.ensureSingle(K,"path","textline").call(P.stroke,Z.outsidetextfont.color).attr({"stroke-width":Math.min(2,Z.outsidetextfont.size/8),d:rt,fill:"none"})}else K.select("path.textline").remove()})}(dt,st),gt&&st.automargin){var It=C.bBox(rt.node()),Mt=st.domain,Gt=(at.w*(Mt.x[1]-Mt.x[0])*.5-et.r)/at.w,Wt=(at.h*(Mt.y[1]-Mt.y[0])*.5-et.r)/at.h;g.autoMargin(j,"pie."+st.uid+".automargin",{xl:Mt.x[0]-Gt,xr:Mt.x[1]+Gt,yb:Mt.y[0]-Wt,yt:Mt.y[1]+Wt,l:Math.max(et.cx-et.r-It.left,0),r:Math.max(It.right-(et.cx+et.r),0),b:Math.max(It.bottom-(et.cy+et.r),0),t:Math.max(et.cy-et.r-It.top,0),pad:5})}})});setTimeout(function(){$.selectAll("tspan").each(function(){var X=A.select(this);X.attr("dy")&&X.attr("dy",X.attr("dy"))})},0)},formatSliceLabel:ut,transformInsideText:L,determineInsideTextFont:M,positionTitleOutside:k,prerenderTitles:b,layoutAreas:H,attachFxHandlers:o,computeTransform:Q}},68357:function(q,W,t){"use strict";var A=t(39898),g=t(63463),i=t(72597).resizeText;q.exports=function(C){var u=C._fullLayout._pielayer.selectAll(".trace");i(C,u,"pie"),u.each(function(y){var r=y[0].trace,l=A.select(this);l.style({opacity:r.opacity}),l.selectAll("path.surface").each(function(a){A.select(this).call(g,a,r,C)})})}},63463:function(q,W,t){"use strict";var A=t(7901),g=t(53581).castOption,i=t(22209);q.exports=function(C,u,y,e){var r=y.marker.line,l=g(r.color,u.pts)||A.defaultLine,a=g(r.width,u.pts)||0;C.call(i,u,y,e).style("stroke-width",a).call(A.stroke,l)}},10959:function(q,W,t){"use strict";var A=t(82196);q.exports={x:A.x,y:A.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:A.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},42743:function(q,W,t){"use strict";var A=t(9330).gl_pointcloud2d,g=t(78614),i=t(71739).findExtremes,P=t(34603);function C(e,r){this.scene=e,this.uid=r,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=A(e.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var u=C.prototype;u.handlePick=function(e){var r=this.idToIndex[e.pointId];return{trace:this,dataCoord:e.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*r],this.pickXYData[2*r+1]]:[this.pickXData[r],this.pickYData[r]],textLabel:Array.isArray(this.textLabels)?this.textLabels[r]:this.textLabels,color:this.color,name:this.name,pointIndex:r,hoverinfo:this.hoverinfo}},u.update=function(e){this.index=e.index,this.textLabels=e.text,this.name=e.name,this.hoverinfo=e.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(e),this.color=P(e,{})},u.updateFast=function(e){var f,m,h,p,o,v,r=this.xData=this.pickXData=e.x,l=this.yData=this.pickYData=e.y,a=this.pickXYData=e.xy,c=e.indices,w=this.bounds;if(a){if(h=a,f=a.length>>>1,e.xbounds&&e.ybounds)w[0]=e.xbounds[0],w[2]=e.xbounds[1],w[1]=e.ybounds[0],w[3]=e.ybounds[1];else for(v=0;v<f;v++)o=h[2*v+1],(p=h[2*v])<w[0]&&(w[0]=p),p>w[2]&&(w[2]=p),o<w[1]&&(w[1]=o),o>w[3]&&(w[3]=o);if(c)m=c;else for(m=new Int32Array(f),v=0;v<f;v++)m[v]=v}else for(f=r.length,h=new Float32Array(2*f),m=new Int32Array(f),v=0;v<f;v++)p=r[v],o=l[v],m[v]=v,h[2*v]=p,h[2*v+1]=o,p<w[0]&&(w[0]=p),p>w[2]&&(w[2]=p),o<w[1]&&(w[1]=o),o>w[3]&&(w[3]=o);this.idToIndex=m,this.pointcloudOptions.idToIndex=m,this.pointcloudOptions.positions=h;var M=g(e.marker.color),b=g(e.marker.border.color),L=e.opacity*e.marker.opacity;M[3]*=L,this.pointcloudOptions.color=M;var x=e.marker.blend;if(null===x){x=r.length<100||l.length<100}this.pointcloudOptions.blend=x,b[3]*=L,this.pointcloudOptions.borderColor=b;var T=e.marker.sizemin,n=Math.max(e.marker.sizemax,e.marker.sizemin);this.pointcloudOptions.sizeMin=T,this.pointcloudOptions.sizeMax=n,this.pointcloudOptions.areaRatio=e.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var E=this.scene.xaxis,d=this.scene.yaxis,F=n/2||.5;e._extremes[E._id]=i(E,[w[0],w[2]],{ppad:F}),e._extremes[d._id]=i(d,[w[1],w[3]],{ppad:F})},u.dispose=function(){this.pointcloud.dispose()},q.exports=function y(e,r){var l=new C(e,r.uid);return l.update(r),l}},33876:function(q,W,t){"use strict";var A=t(71828),g=t(10959);q.exports=function(P,C,u){function y(e,r){return A.coerce(P,C,g,e,r)}y("x"),y("y"),y("xbounds"),y("ybounds"),P.xy&&P.xy instanceof Float32Array&&(C.xy=P.xy),P.indices&&P.indices instanceof Int32Array&&(C.indices=P.indices),y("text"),y("marker.color",u),y("marker.opacity"),y("marker.blend"),y("marker.sizemin"),y("marker.sizemax"),y("marker.border.color",u),y("marker.border.arearatio"),C._length=null}},20593:function(q,W,t){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),q.exports={attributes:t(10959),supplyDefaults:t(33876),calc:t(36563),plot:t(42743),moduleType:"trace",name:"pointcloud",basePlotModule:t(4796),categories:["gl","gl2d","showLegend"],meta:{}}},39953:function(q,W,t){"use strict";var A=t(41940),g=t(9012),i=t(22399),P=t(77914),C=t(27670).Y,u=t(5386).fF,y=t(50693),e=t(44467).templatedArray,r=t(12663).descriptionOnlyNumbers,l=t(1426).extendFlat,a=t(30962).overrideAll;(q.exports=a({hoverinfo:l({},g.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:P.hoverlabel,domain:C({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:r("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:A({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:i.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:P.hoverlabel,hovertemplate:u({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:i.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:P.hoverlabel,hovertemplate:u({},{keys:["value","label"]}),colorscales:e("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:l(y().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},75536:function(q,W,t){"use strict";var A=t(30962).overrideAll,g=t(27659).a0,i=t(60436),P=t(528),C=t(6964),u=t(28569),y=t(47322).prepSelect,e=t(71828),r=t(73972),l="sankey";function a(s,c){var f=s._fullData[c],m=s._fullLayout,h=m.dragmode,p=f._bgRect;if(p&&"pan"!==h&&"zoom"!==h){C(p,"pan"===m.dragmode?"move":"crosshair");var o={_id:"x",c2p:e.identity,_offset:f._sankey.translateX,_length:f._sankey.width},v={_id:"y",c2p:e.identity,_offset:f._sankey.translateY,_length:f._sankey.height},M={gd:s,element:p.node(),plotinfo:{id:c,xaxis:o,yaxis:v,fillRangeItems:e.noop},subplot:c,xaxes:[o],yaxes:[v],doneFnCompleted:function(b){var x,L=s._fullData[c],S=L.node.groups.slice(),T=[];function n(D){for(var N=L._sankey.graph.nodes,k=0;k<N.length;k++)if(N[k].pointNumber===D)return N[k]}for(var E=0;E<b.length;E++){var d=n(b[E].pointNumber);if(d)if(d.group){for(var F=0;F<d.childrenNodes.length;F++)T.push(d.childrenNodes[F].pointNumber);S[d.pointNumber-L.node._count]=!1}else T.push(d.pointNumber)}x=S.filter(Boolean).concat([T]),r.call("_guiRestyle",s,{"node.groups":[x]},c)},prepFn:function(b,L,x){y(b,L,x,M,h)}};u.init(M)}}W.name=l,W.baseLayoutAttrOverrides=A({hoverlabel:P.hoverlabel},"plot","nested"),W.plot=function(s){var c=g(s.calcdata,l)[0];i(s,c),W.updateFx(s)},W.clean=function(s,c,f,m){var h=m._has&&m._has(l),w=c._has&&c._has(l);h&&!w&&(m._paperdiv.selectAll(".sankey").remove(),m._paperdiv.selectAll(".bgsankey").remove())},W.updateFx=function(s){for(var c=0;c<s._fullData.length;c++)a(s,c)}},92930:function(q,W,t){"use strict";var A=t(68664),g=t(71828),i=t(28984).wrap,P=g.isArrayOrTypedArray,C=g.isIndex,u=t(21081);function y(r){var p,l=r.node,a=r.link,s=[],c=P(a.color),f=P(a.customdata),m={},h={},w=a.colorscales.length;for(p=0;p<w;p++){var o=a.colorscales[p],v=u.extractScale(o,{cLetter:"c"}),M=u.makeColorScaleFunc(v);h[o.label]=M}var b=0;for(p=0;p<a.value.length;p++)a.source[p]>b&&(b=a.source[p]),a.target[p]>b&&(b=a.target[p]);var L=b+1;r.node._count=L;var x,S=r.node.groups,T={};for(p=0;p<S.length;p++){var n=S[p];for(x=0;x<n.length;x++){var E=n[x],d=L+p;T.hasOwnProperty(E)?g.warn("Node "+E+" is already part of a group."):T[E]=d}}var F={source:[],target:[]};for(p=0;p<a.value.length;p++){var D=a.value[p],N=a.source[p],k=a.target[p];if(D>0&&C(N,L)&&C(k,L)&&(!T.hasOwnProperty(N)||!T.hasOwnProperty(k)||T[N]!==T[k])){T.hasOwnProperty(k)&&(k=T[k]),T.hasOwnProperty(N)&&(N=T[N]),m[N=+N]=m[k=+k]=!0;var O="";a.label&&a.label[p]&&(O=a.label[p]);var B=null;O&&h.hasOwnProperty(O)&&(B=h[O]),s.push({pointNumber:p,label:O,color:c?a.color[p]:a.color,customdata:f?a.customdata[p]:a.customdata,concentrationscale:B,source:N,target:k,value:+D}),F.source.push(N),F.target.push(k)}}var z=L+S.length,U=P(l.color),H=P(l.customdata),J=[];for(p=0;p<z;p++)m[p]&&J.push({group:p>L-1,childrenNodes:[],pointNumber:p,label:l.label[p],color:U?l.color[p]:l.color,customdata:H?l.customdata[p]:l.customdata});var it=!1;return function e(r,l,a){for(var s=g.init2dArray(r,0),c=0;c<Math.min(l.length,a.length);c++)if(g.isIndex(l[c],r)&&g.isIndex(a[c],r)){if(l[c]===a[c])return!0;s[l[c]].push(a[c])}return A(s).components.some(function(m){return m.length>1})}(z,F.source,F.target)&&(it=!0),{circular:it,links:s,nodes:J,groups:S,groupLookup:T}}q.exports=function(l,a){var s=y(a);return i({circular:s.circular,_nodes:s.nodes,_links:s.links,_groups:s.groups,_groupLookup:s.groupLookup})}},85247:function(q){"use strict";q.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},26857:function(q,W,t){"use strict";var A=t(71828),g=t(39953),i=t(7901),P=t(84267),C=t(27670).c,u=t(38048),y=t(44467),e=t(85501);function r(l,a){function s(c,f){return A.coerce(l,a,g.link.colorscales,c,f)}s("label"),s("cmin"),s("cmax"),s("colorscale")}q.exports=function(a,s,c,f){function m(n,E){return A.coerce(a,s,g,n,E)}var h=A.extendDeep(f.hoverlabel,a.hoverlabel),w=a.node,p=y.newContainer(s,"node");function o(n,E){return A.coerce(w,p,g.node,n,E)}o("label"),o("groups"),o("x"),o("y"),o("pad"),o("thickness"),o("line.color"),o("line.width"),o("hoverinfo",a.hoverinfo),u(w,p,o,h),o("hovertemplate");var v=f.colorway;o("color",p.label.map(function(n,E){return i.addOpacity(function(n){return v[n%v.length]}(E),.8)})),o("customdata");var b=a.link||{},L=y.newContainer(s,"link");function x(n,E){return A.coerce(b,L,g.link,n,E)}x("label"),x("arrowlen"),x("source"),x("target"),x("value"),x("line.color"),x("line.width"),x("hoverinfo",a.hoverinfo),u(b,L,x,h),x("hovertemplate");var T,S=P(f.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";x("color",A.repeat(S,L.value.length)),x("customdata"),e(b,L,{name:"colorscales",handleItemDefaults:r}),C(s,f,m),m("orientation"),m("valueformat"),m("valuesuffix"),p.x.length&&p.y.length&&(T="freeform"),m("arrangement",T),A.coerceFont(m,"textfont",A.extendFlat({},f.font)),s._length=null}},29396:function(q,W,t){"use strict";q.exports={attributes:t(39953),supplyDefaults:t(26857),calc:t(92930),plot:t(60436),moduleType:"trace",name:"sankey",basePlotModule:t(75536),selectPoints:t(84564),categories:["noOpacity"],meta:{}}},60436:function(q,W,t){"use strict";var A=t(39898),g=t(71828),i=g.numberFormat,P=t(3393),C=t(30211),u=t(7901),y=t(85247).cn,e=g._;function r(v){return""!==v}function l(v,M){return v.filter(function(b){return b.key===M.traceId})}function a(v,M){A.select(v).select("path").style("fill-opacity",M),A.select(v).select("rect").style("fill-opacity",M)}function s(v){A.select(v).select("text.name").style("fill","black")}function c(v){return function(M){return-1!==v.node.sourceLinks.indexOf(M.link)||-1!==v.node.targetLinks.indexOf(M.link)}}function f(v){return function(M){return-1!==M.node.sourceLinks.indexOf(v.link)||-1!==M.node.targetLinks.indexOf(v.link)}}function m(v,M,b){M&&b&&l(b,M).selectAll("."+y.sankeyLink).filter(c(M)).call(w.bind(0,M,b,!1))}function h(v,M,b){M&&b&&l(b,M).selectAll("."+y.sankeyLink).filter(c(M)).call(p.bind(0,M,b,!1))}function w(v,M,b,L){var x=L.datum().link.label;L.style("fill-opacity",function(S){if(!S.link.concentrationscale)return.4}),x&&l(M,v).selectAll("."+y.sankeyLink).filter(function(S){return S.link.label===x}).style("fill-opacity",function(S){if(!S.link.concentrationscale)return.4}),b&&l(M,v).selectAll("."+y.sankeyNode).filter(f(v)).call(m)}function p(v,M,b,L){var x=L.datum().link.label;L.style("fill-opacity",function(S){return S.tinyColorAlpha}),x&&l(M,v).selectAll("."+y.sankeyLink).filter(function(S){return S.link.label===x}).style("fill-opacity",function(S){return S.tinyColorAlpha}),b&&l(M,v).selectAll(y.sankeyNode).filter(f(v)).call(h)}function o(v,M){var L=g.nestedProperty(v.hoverlabel||{},M).get();return!Array.isArray(L)&&L}q.exports=function(M,b){for(var L=M._fullLayout,x=L._paper,S=L._size,T=0;T<M._fullData.length;T++)if(M._fullData[T].visible&&M._fullData[T].type===y.sankey&&!M._fullData[T]._viewInitial){var n=M._fullData[T].node;M._fullData[T]._viewInitial={node:{groups:n.groups.slice(),x:n.x.slice(),y:n.y.slice()}}}var F=e(M,"source:")+" ",D=e(M,"target:")+" ",N=e(M,"concentration:")+" ",k=e(M,"incoming flow count:")+" ",O=e(M,"outgoing flow count:")+" ";P(M,x,b,{width:S.w,height:S.h,margin:{t:S.t,r:S.r,b:S.b,l:S.l}},{linkEvents:{hover:function(it,ut,Q){!1!==M._fullLayout.hovermode&&(A.select(it).call(w.bind(0,ut,Q,!0)),"skip"!==ut.link.trace.link.hoverinfo&&(ut.link.fullData=ut.link.trace,M.emit("plotly_hover",{event:A.event,points:[ut.link]})))},follow:function(it,ut){if(!1!==M._fullLayout.hovermode){var Q=ut.link.trace.link;if("none"!==Q.hoverinfo&&"skip"!==Q.hoverinfo){for(var j=[],G=0,K=0;K<ut.flow.links.length;K++){var at=ut.flow.links[K];if("closest"!==M._fullLayout.hovermode||ut.link.pointNumber===at.pointNumber){ut.link.pointNumber===at.pointNumber&&(G=K),at.fullData=at.trace,Q=ut.link.trace.link;var $=Z(at),X={valueLabel:i(ut.valueFormat)(at.value)+ut.valueSuffix};j.push({x:$[0],y:$[1],name:X.valueLabel,text:[at.label||"",F+at.source.label,D+at.target.label,at.concentrationscale?N+i("%0.2f")(at.flow.labelConcentration):""].filter(r).join("<br>"),color:o(Q,"bgcolor")||u.addOpacity(at.color,1),borderColor:o(Q,"bordercolor"),fontFamily:o(Q,"font.family"),fontSize:o(Q,"font.size"),fontColor:o(Q,"font.color"),nameLength:o(Q,"namelength"),textAlign:o(Q,"align"),idealAlign:A.event.x<$[0]?"right":"left",hovertemplate:Q.hovertemplate,hovertemplateLabels:X,eventData:[at]})}}C.loneHover(j,{container:L._hoverlayer.node(),outerContainer:L._paper.node(),gd:M,anchorIndex:G}).each(function(){ut.link.concentrationscale||a(this,.65),s(this)})}}function Z(et){var st,dt;et.circular?(st=(et.circularPathData.leftInnerExtent+et.circularPathData.rightInnerExtent)/2,dt=et.circularPathData.verticalFullExtent):(st=(et.source.x1+et.target.x0)/2,dt=(et.y0+et.y1)/2);var bt=[st,dt];return"v"===et.trace.orientation&&bt.reverse(),bt[0]+=ut.parent.translateX,bt[1]+=ut.parent.translateY,bt}},unhover:function(it,ut,Q){!1!==M._fullLayout.hovermode&&(A.select(it).call(p.bind(0,ut,Q,!0)),"skip"!==ut.link.trace.link.hoverinfo&&(ut.link.fullData=ut.link.trace,M.emit("plotly_unhover",{event:A.event,points:[ut.link]})),C.loneUnhover(L._hoverlayer.node()))},select:function(it,ut){var Q=ut.link;Q.originalEvent=A.event,M._hoverdata=[Q],C.click(M,{target:!0})}},nodeEvents:{hover:function(it,ut,Q){!1!==M._fullLayout.hovermode&&(A.select(it).call(m,ut,Q),"skip"!==ut.node.trace.node.hoverinfo&&(ut.node.fullData=ut.node.trace,M.emit("plotly_hover",{event:A.event,points:[ut.node]})))},follow:function(it,ut){if(!1!==M._fullLayout.hovermode){var Q=ut.node.trace.node;if("none"!==Q.hoverinfo&&"skip"!==Q.hoverinfo){var j=A.select(it).select("."+y.nodeRect),Z=M._fullLayout._paperdiv.node().getBoundingClientRect(),G=j.node().getBoundingClientRect(),K=G.left-2-Z.left,at=G.right+2-Z.left,$=G.top+G.height/4-Z.top,X={valueLabel:i(ut.valueFormat)(ut.node.value)+ut.valueSuffix};ut.node.fullData=ut.node.trace,M._fullLayout._calcInverseTransform(M);var rt=M._fullLayout._invScaleX,st=C.loneHover({x0:rt*K,x1:rt*at,y:M._fullLayout._invScaleY*$,name:i(ut.valueFormat)(ut.node.value)+ut.valueSuffix,text:[ut.node.label,k+ut.node.targetLinks.length,O+ut.node.sourceLinks.length].filter(r).join("<br>"),color:o(Q,"bgcolor")||ut.tinyColorHue,borderColor:o(Q,"bordercolor"),fontFamily:o(Q,"font.family"),fontSize:o(Q,"font.size"),fontColor:o(Q,"font.color"),nameLength:o(Q,"namelength"),textAlign:o(Q,"align"),idealAlign:"left",hovertemplate:Q.hovertemplate,hovertemplateLabels:X,eventData:[ut.node]},{container:L._hoverlayer.node(),outerContainer:L._paper.node(),gd:M});a(st,.85),s(st)}}},unhover:function(it,ut,Q){!1!==M._fullLayout.hovermode&&(A.select(it).call(h,ut,Q),"skip"!==ut.node.trace.node.hoverinfo&&(ut.node.fullData=ut.node.trace,M.emit("plotly_unhover",{event:A.event,points:[ut.node]})),C.loneUnhover(L._hoverlayer.node()))},select:function(it,ut,Q){var j=ut.node;j.originalEvent=A.event,M._hoverdata=[j],A.select(it).call(h,ut,Q),C.click(M,{target:!0})}}})}},3393:function(q,W,t){"use strict";var A=t(49887),g=t(81684).k4,i=t(39898),P=t(30838),C=t(86781),u=t(85247),y=t(84267),e=t(7901),r=t(91424),l=t(71828),a=l.strTranslate,s=l.strRotate,c=t(28984),f=c.keyFun,m=c.repeat,h=c.unwrap,w=t(63893),p=t(73972),o=t(18783),v=o.CAP_SHIFT,M=o.LINE_SPACING;function L(Z,G,K){var Mt,at=h(G),$=at.trace,X=$.domain,rt="h"===$.orientation,et=$.node.pad,st=$.node.thickness,dt=Z.width*(X.x[1]-X.x[0]),bt=Z.height*(X.y[1]-X.y[0]),gt=at._nodes,Lt=at._links,It=at.circular;(Mt=It?C.sankeyCircular().circularLinkGap(0):P.sankey()).iterations(u.sankeyIterations).size(rt?[dt,bt]:[bt,dt]).nodeWidth(st).nodePadding(et).nodeId(function(de){return de.pointNumber}).nodes(gt).links(Lt);var At,Gt,Wt,xt=Mt();for(var Pt in Mt.nodePadding()<et&&l.warn("node.pad was reduced to ",Mt.nodePadding()," to fit within the figure."),at._groupLookup){var te,Vt=parseInt(at._groupLookup[Pt]);for(At=0;At<xt.nodes.length;At++)if(xt.nodes[At].pointNumber===Vt){te=xt.nodes[At];break}if(te){var Qt={pointNumber:parseInt(Pt),x0:te.x0,x1:te.x1,y0:te.y0,y1:te.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};xt.nodes.unshift(Qt),te.childrenNodes.unshift(Qt)}}if(function Bt(){for(At=0;At<xt.nodes.length;At++){var Kt,Et,de=xt.nodes[At],Fe={};for(Gt=0;Gt<de.targetLinks.length;Gt++)Fe.hasOwnProperty(Kt=(Et=de.targetLinks[Gt]).source.pointNumber+":"+Et.target.pointNumber)||(Fe[Kt]=[]),Fe[Kt].push(Et);var St=Object.keys(Fe);for(Gt=0;Gt<St.length;Gt++){var Dt=Fe[Kt=St[Gt]],Ft=0,Nt={};for(Wt=0;Wt<Dt.length;Wt++)Nt[(Et=Dt[Wt]).label]||(Nt[Et.label]=0),Nt[Et.label]+=Et.value,Ft+=Et.value;for(Wt=0;Wt<Dt.length;Wt++)(Et=Dt[Wt]).flow={value:Ft,labelConcentration:Nt[Et.label]/Ft,concentration:Et.value/Ft,links:Dt},Et.concentrationscale&&(Et.color=y(Et.concentrationscale(Et.flow.labelConcentration)))}var Rt=0;for(Gt=0;Gt<de.sourceLinks.length;Gt++)Rt+=de.sourceLinks[Gt].value;for(Gt=0;Gt<de.sourceLinks.length;Gt++)(Et=de.sourceLinks[Gt]).concentrationOut=Et.value/Rt;var wt=0;for(Gt=0;Gt<de.targetLinks.length;Gt++)wt+=de.targetLinks[Gt].value;for(Gt=0;Gt<de.targetLinks.length;Gt++)(Et=de.targetLinks[Gt]).concenrationIn=Et.value/wt}}(),$.node.x.length&&$.node.y.length){for(At=0;At<Math.min($.node.x.length,$.node.y.length,xt.nodes.length);At++)if($.node.x[At]&&$.node.y[At]){var ie=[$.node.x[At]*dt,$.node.y[At]*bt];xt.nodes[At].x0=ie[0]-st/2,xt.nodes[At].x1=ie[0]+st/2;var oe=xt.nodes[At].y1-xt.nodes[At].y0;xt.nodes[At].y0=ie[1]-oe/2,xt.nodes[At].y1=ie[1]+oe/2}"snap"===$.arrangement&&function Ot(de){de.forEach(function(Fe){var Kt,Et,Ft,St=0,Dt=Fe.length;for(Fe.sort(function(Nt,Rt){return Nt.y0-Rt.y0}),Ft=0;Ft<Dt;++Ft)(Kt=Fe[Ft]).y0>=St||(Et=St-Kt.y0)>1e-6&&(Kt.y0+=Et,Kt.y1+=Et),St=Kt.y1+et})}(function qt(de){var St,Ft,Fe=de.map(function(Rt,wt){return{x0:Rt.x0,index:wt}}).sort(function(Rt,wt){return Rt.x0-wt.x0}),Kt=[],Et=-1,Dt=-1/0;for(At=0;At<Fe.length;At++){var Nt=de[Fe[At].index];Nt.x0>Dt+st&&(Et+=1,St=Nt.x0),Dt=Nt.x0,Kt[Et]||(Kt[Et]=[]),Kt[Et].push(Nt),Nt.x0+=Ft=St-Nt.x0,Nt.x1+=Ft}return Kt}(gt=xt.nodes)),Mt.update(xt)}return{circular:It,key:K,trace:$,guid:l.randstr(),horizontal:rt,width:dt,height:bt,nodePad:$.node.pad,nodeLineColor:$.node.line.color,nodeLineWidth:$.node.line.width,linkLineColor:$.link.line.color,linkLineWidth:$.link.line.width,linkArrowLength:$.link.arrowlen,valueFormat:$.valueformat,valueSuffix:$.valuesuffix,textFont:$.textfont,translateX:X.x[0]*Z.width+Z.margin.l,translateY:Z.height-X.y[1]*Z.height+Z.margin.t,dragParallel:rt?bt:dt,dragPerpendicular:rt?dt:bt,arrangement:$.arrangement,sankey:Mt,graph:xt,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function x(Z,G,K){var at=y(G.color),X=G.source.label+"|"+G.target.label+"__"+K;return G.trace=Z.trace,G.curveNumber=Z.trace.index,{circular:Z.circular,key:X,traceId:Z.key,pointNumber:G.pointNumber,link:G,tinyColorHue:e.tinyRGB(at),tinyColorAlpha:at.getAlpha(),linkPath:T,linkLineColor:Z.linkLineColor,linkLineWidth:Z.linkLineWidth,linkArrowLength:Z.linkArrowLength,valueFormat:Z.valueFormat,valueSuffix:Z.valueSuffix,sankey:Z.sankey,parent:Z,interactionState:Z.interactionState,flow:G.flow}}function T(){return function G(K){var at=K.linkArrowLength;if(K.link.circular)return function S(Z,G){var at=Z.width/2,$=Z.circularPathData;return"top"===Z.circularLinkType?"M "+($.targetX-G)+" "+($.targetY+at)+" L"+($.rightInnerExtent-G)+" "+($.targetY+at)+"A"+($.rightLargeArcRadius+at)+" "+($.rightSmallArcRadius+at)+" 0 0 1 "+($.rightFullExtent-at-G)+" "+($.targetY-$.rightSmallArcRadius)+"L"+($.rightFullExtent-at-G)+" "+$.verticalRightInnerExtent+"A"+($.rightLargeArcRadius+at)+" "+($.rightLargeArcRadius+at)+" 0 0 1 "+($.rightInnerExtent-G)+" "+($.verticalFullExtent-at)+"L"+$.leftInnerExtent+" "+($.verticalFullExtent-at)+"A"+($.leftLargeArcRadius+at)+" "+($.leftLargeArcRadius+at)+" 0 0 1 "+($.leftFullExtent+at)+" "+$.verticalLeftInnerExtent+"L"+($.leftFullExtent+at)+" "+($.sourceY-$.leftSmallArcRadius)+"A"+($.leftLargeArcRadius+at)+" "+($.leftSmallArcRadius+at)+" 0 0 1 "+$.leftInnerExtent+" "+($.sourceY+at)+"L"+$.sourceX+" "+($.sourceY+at)+"L"+$.sourceX+" "+($.sourceY-at)+"L"+$.leftInnerExtent+" "+($.sourceY-at)+"A"+($.leftLargeArcRadius-at)+" "+($.leftSmallArcRadius-at)+" 0 0 0 "+($.leftFullExtent-at)+" "+($.sourceY-$.leftSmallArcRadius)+"L"+($.leftFullExtent-at)+" "+$.verticalLeftInnerExtent+"A"+($.leftLargeArcRadius-at)+" "+($.leftLargeArcRadius-at)+" 0 0 0 "+$.leftInnerExtent+" "+($.verticalFullExtent+at)+"L"+($.rightInnerExtent-G)+" "+($.verticalFullExtent+at)+"A"+($.rightLargeArcRadius-at)+" "+($.rightLargeArcRadius-at)+" 0 0 0 "+($.rightFullExtent+at-G)+" "+$.verticalRightInnerExtent+"L"+($.rightFullExtent+at-G)+" "+($.targetY-$.rightSmallArcRadius)+"A"+($.rightLargeArcRadius-at)+" "+($.rightSmallArcRadius-at)+" 0 0 0 "+($.rightInnerExtent-G)+" "+($.targetY-at)+"L"+($.targetX-G)+" "+($.targetY-at)+(G>0?"L"+$.targetX+" "+$.targetY:"")+"Z":"M "+($.targetX-G)+" "+($.targetY-at)+" L"+($.rightInnerExtent-G)+" "+($.targetY-at)+"A"+($.rightLargeArcRadius+at)+" "+($.rightSmallArcRadius+at)+" 0 0 0 "+($.rightFullExtent-at-G)+" "+($.targetY+$.rightSmallArcRadius)+"L"+($.rightFullExtent-at-G)+" "+$.verticalRightInnerExtent+"A"+($.rightLargeArcRadius+at)+" "+($.rightLargeArcRadius+at)+" 0 0 0 "+($.rightInnerExtent-G)+" "+($.verticalFullExtent+at)+"L"+$.leftInnerExtent+" "+($.verticalFullExtent+at)+"A"+($.leftLargeArcRadius+at)+" "+($.leftLargeArcRadius+at)+" 0 0 0 "+($.leftFullExtent+at)+" "+$.verticalLeftInnerExtent+"L"+($.leftFullExtent+at)+" "+($.sourceY+$.leftSmallArcRadius)+"A"+($.leftLargeArcRadius+at)+" "+($.leftSmallArcRadius+at)+" 0 0 0 "+$.leftInnerExtent+" "+($.sourceY-at)+"L"+$.sourceX+" "+($.sourceY-at)+"L"+$.sourceX+" "+($.sourceY+at)+"L"+$.leftInnerExtent+" "+($.sourceY+at)+"A"+($.leftLargeArcRadius-at)+" "+($.leftSmallArcRadius-at)+" 0 0 1 "+($.leftFullExtent-at)+" "+($.sourceY+$.leftSmallArcRadius)+"L"+($.leftFullExtent-at)+" "+$.verticalLeftInnerExtent+"A"+($.leftLargeArcRadius-at)+" "+($.leftLargeArcRadius-at)+" 0 0 1 "+$.leftInnerExtent+" "+($.verticalFullExtent-at)+"L"+($.rightInnerExtent-G)+" "+($.verticalFullExtent-at)+"A"+($.rightLargeArcRadius-at)+" "+($.rightLargeArcRadius-at)+" 0 0 1 "+($.rightFullExtent+at-G)+" "+$.verticalRightInnerExtent+"L"+($.rightFullExtent+at-G)+" "+($.targetY+$.rightSmallArcRadius)+"A"+($.rightLargeArcRadius-at)+" "+($.rightSmallArcRadius-at)+" 0 0 1 "+($.rightInnerExtent-G)+" "+($.targetY+at)+"L"+($.targetX-G)+" "+($.targetY+at)+(G>0?"L"+$.targetX+" "+$.targetY:"")+"Z"}(K.link,at);var $=Math.abs((K.link.target.x0-K.link.source.x1)/2);at>$&&(at=$);var X=K.link.source.x1,rt=K.link.target.x0-at,et=g(X,rt),st=et(.5),dt=et(.5),bt=K.link.y0-K.link.width/2,gt=K.link.y0+K.link.width/2,Lt=K.link.y1-K.link.width/2,It=K.link.y1+K.link.width/2,Gt=at>0?"L"+(rt+at)+","+(Lt+K.link.width/2):"";return"M"+X+","+bt+"C"+st+","+bt+" "+dt+","+Lt+" "+rt+","+Lt+(Gt+="L"+rt+","+It)+"C"+dt+","+It+" "+st+","+gt+" "+X+","+gt+"Z"}}function n(Z,G){var K=y(G.color),at=u.nodePadAcross,$=Z.nodePad/2;G.dx=G.x1-G.x0,G.dy=G.y1-G.y0;var X=G.dx,rt=Math.max(.5,G.dy),et="node_"+G.pointNumber;return G.group&&(et=l.randstr()),G.trace=Z.trace,G.curveNumber=Z.trace.index,{index:G.pointNumber,key:et,partOfGroup:G.partOfGroup||!1,group:G.group,traceId:Z.key,trace:Z.trace,node:G,nodePad:Z.nodePad,nodeLineColor:Z.nodeLineColor,nodeLineWidth:Z.nodeLineWidth,textFont:Z.textFont,size:Z.horizontal?Z.height:Z.width,visibleWidth:Math.ceil(X),visibleHeight:rt,zoneX:-at,zoneY:-$,zoneWidth:X+2*at,zoneHeight:rt+2*$,labelY:Z.horizontal?G.dy/2+1:G.dx/2+1,left:1===G.originalLayer,sizeAcross:Z.width,forceLayouts:Z.forceLayouts,horizontal:Z.horizontal,darkBackground:K.getBrightness()<=128,tinyColorHue:e.tinyRGB(K),tinyColorAlpha:K.getAlpha(),valueFormat:Z.valueFormat,valueSuffix:Z.valueSuffix,sankey:Z.sankey,graph:Z.graph,arrangement:Z.arrangement,uniqueNodeLabelPathId:[Z.guid,Z.key,et].join("_"),interactionState:Z.interactionState,figure:Z}}function E(Z){Z.attr("transform",function(G){return a(G.node.x0.toFixed(3),G.node.y0.toFixed(3))})}function d(Z){Z.call(E)}function F(Z,G){Z.call(d),G.attr("d",T())}function D(Z){Z.attr("width",function(G){return G.node.x1-G.node.x0}).attr("height",function(G){return G.visibleHeight})}function N(Z){return Z.link.width>1||Z.linkLineWidth>0}function k(Z){return a(Z.translateX,Z.translateY)+(Z.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function O(Z,G,K){Z.on(".basic",null).on("mouseover.basic",function(at){!at.interactionState.dragInProgress&&!at.partOfGroup&&(K.hover(this,at,G),at.interactionState.hovered=[this,at])}).on("mousemove.basic",function(at){!at.interactionState.dragInProgress&&!at.partOfGroup&&(K.follow(this,at),at.interactionState.hovered=[this,at])}).on("mouseout.basic",function(at){!at.interactionState.dragInProgress&&!at.partOfGroup&&(K.unhover(this,at,G),at.interactionState.hovered=!1)}).on("click.basic",function(at){at.interactionState.hovered&&(K.unhover(this,at,G),at.interactionState.hovered=!1),!at.interactionState.dragInProgress&&!at.partOfGroup&&K.select(this,at,G)})}function B(Z,G,K,at){var $=i.behavior.drag().origin(function(X){return{x:X.node.x0+X.visibleWidth/2,y:X.node.y0+X.visibleHeight/2}}).on("dragstart",function(X){if("fixed"!==X.arrangement&&(l.ensureSingle(at._fullLayout._infolayer,"g","dragcover",function(et){at._fullLayout._dragCover=et}),l.raiseToTop(this),X.interactionState.dragInProgress=X.node,it(X.node),X.interactionState.hovered&&(K.nodeEvents.unhover.apply(0,X.interactionState.hovered),X.interactionState.hovered=!1),"snap"===X.arrangement)){var rt=X.traceId+"|"+X.key;X.forceLayouts[rt]?X.forceLayouts[rt].alpha(1):function z(Z,G,K,at){!function Q(Z){for(var G=0;G<Z.length;G++)Z[G].y=(Z[G].y0+Z[G].y1)/2,Z[G].x=(Z[G].x0+Z[G].x1)/2}(K.graph.nodes);var $=K.graph.nodes.filter(function(X){return X.originalX===K.node.originalX}).filter(function(X){return!X.partOfGroup});K.forceLayouts[G]=A.forceSimulation($).alphaDecay(0).force("collide",A.forceCollide().radius(function(X){return X.dy/2+K.nodePad/2}).strength(1).iterations(u.forceIterations)).force("constrain",function H(Z,G,K,at){return function(){for(var X=0,rt=0;rt<K.length;rt++){var et=K[rt];et===at.interactionState.dragInProgress?(et.x=et.lastDraggedX,et.y=et.lastDraggedY):(et.vx=(et.originalX-et.x)/u.forceTicksPerFrame,et.y=Math.min(at.size-et.dy/2,Math.max(et.dy/2,et.y))),X=Math.max(X,Math.abs(et.vx),Math.abs(et.vy))}!at.interactionState.dragInProgress&&X<.1&&at.forceLayouts[G].alpha()>0&&at.forceLayouts[G].alpha(0)}}(0,G,$,K)).stop()}(0,rt,X),function U(Z,G,K,at,$){window.requestAnimationFrame(function X(){var rt;for(rt=0;rt<u.forceTicksPerFrame;rt++)K.forceLayouts[at].tick();if(function j(Z){for(var G=0;G<Z.length;G++)Z[G].y0=Z[G].y-Z[G].dy/2,Z[G].y1=Z[G].y0+Z[G].dy,Z[G].x0=Z[G].x-Z[G].dx/2,Z[G].x1=Z[G].x0+Z[G].dx}(K.graph.nodes),K.sankey.update(K.graph),F(Z.filter(ut(K)),G),K.forceLayouts[at].alpha()>0)window.requestAnimationFrame(X);else{var st=K.node.originalX;K.node.x0=st-K.visibleWidth/2,K.node.x1=st+K.visibleWidth/2,J(K,$)}})}(Z,G,X,rt,at)}}).on("drag",function(X){if("fixed"!==X.arrangement){var rt=i.event.x,et=i.event.y;"snap"===X.arrangement?(X.node.x0=rt-X.visibleWidth/2,X.node.x1=rt+X.visibleWidth/2,X.node.y0=et-X.visibleHeight/2,X.node.y1=et+X.visibleHeight/2):("freeform"===X.arrangement&&(X.node.x0=rt-X.visibleWidth/2,X.node.x1=rt+X.visibleWidth/2),et=Math.max(0,Math.min(X.size-X.visibleHeight/2,et)),X.node.y0=et-X.visibleHeight/2,X.node.y1=et+X.visibleHeight/2),it(X.node),"snap"!==X.arrangement&&(X.sankey.update(X.graph),F(Z.filter(ut(X)),G))}}).on("dragend",function(X){if("fixed"!==X.arrangement){X.interactionState.dragInProgress=!1;for(var rt=0;rt<X.node.childrenNodes.length;rt++)X.node.childrenNodes[rt].x=X.node.x,X.node.childrenNodes[rt].y=X.node.y;"snap"!==X.arrangement&&J(X,at)}});Z.on(".drag",null).call($)}function J(Z,G){for(var K=[],at=[],$=0;$<Z.graph.nodes.length;$++){var rt=(Z.graph.nodes[$].y0+Z.graph.nodes[$].y1)/2;K.push((Z.graph.nodes[$].x0+Z.graph.nodes[$].x1)/2/Z.figure.width),at.push(rt/Z.figure.height)}p.call("_guiRestyle",G,{"node.x":[K],"node.y":[at]},Z.trace.index).then(function(){G._fullLayout._dragCover&&G._fullLayout._dragCover.remove()})}function it(Z){Z.lastDraggedX=Z.x0+Z.dx/2,Z.lastDraggedY=Z.y0+Z.dy/2}function ut(Z){return function(G){return G.node.originalX===Z.node.originalX}}q.exports=function(Z,G,K,at,$){var X=Z._context.staticPlot,rt=!1;l.ensureSingle(Z._fullLayout._infolayer,"g","first-render",function(){rt=!0});var et=Z._fullLayout._dragCover,st=K.filter(function(At){return h(At).trace.visible}).map(L.bind(null,at)),dt=G.selectAll("."+u.cn.sankey).data(st,f);dt.exit().remove(),dt.enter().append("g").classed(u.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",X?"none":"auto").attr("transform",k),dt.each(function(At,Gt){Z._fullData[Gt]._sankey=At;var Wt="bgsankey-"+At.trace.uid+"-"+Gt;l.ensureSingle(Z._fullLayout._draggers,"rect",Wt),Z._fullData[Gt]._bgRect=i.select("."+Wt),Z._fullData[Gt]._bgRect.style("pointer-events",X?"none":"all").attr("width",At.width).attr("height",At.height).attr("x",At.translateX).attr("y",At.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),dt.transition().ease(u.ease).duration(u.duration).attr("transform",k);var bt=dt.selectAll("."+u.cn.sankeyLinks).data(m,f);bt.enter().append("g").classed(u.cn.sankeyLinks,!0).style("fill","none");var gt=bt.selectAll("."+u.cn.sankeyLink).data(function(At){return At.graph.links.filter(function(Wt){return Wt.value}).map(x.bind(null,At))},f);gt.enter().append("path").classed(u.cn.sankeyLink,!0).call(O,dt,$.linkEvents),gt.style("stroke",function(At){return N(At)?e.tinyRGB(y(At.linkLineColor)):At.tinyColorHue}).style("stroke-opacity",function(At){return N(At)?e.opacity(At.linkLineColor):At.tinyColorAlpha}).style("fill",function(At){return At.tinyColorHue}).style("fill-opacity",function(At){return At.tinyColorAlpha}).style("stroke-width",function(At){return N(At)?At.linkLineWidth:1}).attr("d",T()),gt.style("opacity",function(){return Z._context.staticPlot||rt||et?1:0}).transition().ease(u.ease).duration(u.duration).style("opacity",1),gt.exit().transition().ease(u.ease).duration(u.duration).style("opacity",0).remove();var Lt=dt.selectAll("."+u.cn.sankeyNodeSet).data(m,f);Lt.enter().append("g").classed(u.cn.sankeyNodeSet,!0),Lt.style("cursor",function(At){switch(At.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var It=Lt.selectAll("."+u.cn.sankeyNode).data(function(At){var Gt=At.graph.nodes;return function nt(Z){var K,G=[];for(K=0;K<Z.length;K++)Z[K].originalX=(Z[K].x0+Z[K].x1)/2,Z[K].originalY=(Z[K].y0+Z[K].y1)/2,-1===G.indexOf(Z[K].originalX)&&G.push(Z[K].originalX);for(G.sort(function(at,$){return at-$}),K=0;K<Z.length;K++)Z[K].originalLayerIndex=G.indexOf(Z[K].originalX),Z[K].originalLayer=Z[K].originalLayerIndex/(G.length-1)}(Gt),Gt.map(n.bind(null,At))},f);It.enter().append("g").classed(u.cn.sankeyNode,!0).call(E).style("opacity",function(At){return!Z._context.staticPlot&&!rt||At.partOfGroup?0:1}),It.call(O,dt,$.nodeEvents).call(B,gt,$,Z),It.transition().ease(u.ease).duration(u.duration).call(E).style("opacity",function(At){return At.partOfGroup?0:1}),It.exit().transition().ease(u.ease).duration(u.duration).style("opacity",0).remove();var Mt=It.selectAll("."+u.cn.nodeRect).data(m);Mt.enter().append("rect").classed(u.cn.nodeRect,!0).call(D),Mt.style("stroke-width",function(At){return At.nodeLineWidth}).style("stroke",function(At){return e.tinyRGB(y(At.nodeLineColor))}).style("stroke-opacity",function(At){return e.opacity(At.nodeLineColor)}).style("fill",function(At){return At.tinyColorHue}).style("fill-opacity",function(At){return At.tinyColorAlpha}),Mt.transition().ease(u.ease).duration(u.duration).call(D);var xt=It.selectAll("."+u.cn.nodeLabel).data(m);xt.enter().append("text").classed(u.cn.nodeLabel,!0).style("cursor","default"),xt.attr("data-notex",1).text(function(At){return At.node.label}).each(function(At){var Gt=i.select(this);r.font(Gt,At.textFont),w.convertToTspans(Gt,Z)}).style("text-shadow",w.makeTextShadow(Z._fullLayout.paper_bgcolor)).attr("text-anchor",function(At){return At.horizontal&&At.left?"end":"start"}).attr("transform",function(At){var Gt=i.select(this),Wt=w.lineCount(Gt),Vt=At.nodeLineWidth/2+3,te=((At.horizontal?At.visibleHeight:At.visibleWidth)-At.textFont.size*((Wt-1)*M-v))/2;At.horizontal&&(At.left?Vt=-Vt:Vt+=At.visibleWidth);var Qt=At.horizontal?"":"scale(-1,1)"+s(90);return a(At.horizontal?Vt:te,At.horizontal?te:Vt)+Qt}),xt.transition().ease(u.ease).duration(u.duration)}},84564:function(q){"use strict";q.exports=function(t,A){for(var i=[],P=t.cd[0].trace,C=P._sankey.graph.nodes,u=0;u<C.length;u++){var y=C[u];if(!y.partOfGroup){var e=[(y.x0+y.x1)/2,(y.y0+y.y1)/2];"v"===P.orientation&&e.reverse(),A&&A.contains(e,!1,u,t)&&i.push({pointNumber:y.pointNumber})}}return i}},75225:function(q,W,t){"use strict";var A=t(71828);q.exports=function(i,P){for(var C=0;C<i.length;C++)i[C].i=C;A.mergeArray(P.text,i,"tx"),A.mergeArray(P.texttemplate,i,"txt"),A.mergeArray(P.hovertext,i,"htx"),A.mergeArray(P.customdata,i,"data"),A.mergeArray(P.textposition,i,"tp"),P.textfont&&(A.mergeArrayCastPositive(P.textfont.size,i,"ts"),A.mergeArray(P.textfont.color,i,"tc"),A.mergeArray(P.textfont.family,i,"tf"));var u=P.marker;if(u){A.mergeArrayCastPositive(u.size,i,"ms"),A.mergeArrayCastPositive(u.opacity,i,"mo"),A.mergeArray(u.symbol,i,"mx"),A.mergeArray(u.angle,i,"ma"),A.mergeArray(u.standoff,i,"mf"),A.mergeArray(u.color,i,"mc");var y=u.line;u.line&&(A.mergeArray(y.color,i,"mlc"),A.mergeArrayCastPositive(y.width,i,"mlw"));var e=u.gradient;e&&"none"!==e.type&&(A.mergeArray(e.type,i,"mgt"),A.mergeArray(e.color,i,"mgc"))}}},82196:function(q,W,t){"use strict";var A=t(12663).axisHoverFormat,g=t(5386).si,i=t(5386).fF,P=t(50693),C=t(41940),u=t(79952).P,y=t(79952).u,e=t(91424),r=t(47581),l=t(1426).extendFlat;q.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:A("x"),yhoverformat:A("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:g({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:i({},{keys:r.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:l({},u,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:y,marker:l({symbol:{valType:"enumerated",values:e.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:l({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},P("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},P("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:C({editType:"calc",colorEditType:"style",arrayOk:!0})}},47761:function(q,W,t){"use strict";var A=t(92770),g=t(71828),i=t(89298),P=t(42973),C=t(50606).BADNUM,u=t(34098),y=t(36922),e=t(75225),r=t(66279);function a(h,w,p,o,v,M,b){var L=w._length,x=h._fullLayout,S=p._id,T=o._id,n=x._firstScatter[f(w)]===w.uid,E=(m(w,x,p,o)||{}).orientation,d=w.fill;p._minDtick=0,o._minDtick=0;var F={padded:!0},D={padded:!0};b&&(F.ppad=D.ppad=b);var N=L<2||v[0]!==v[L-1]||M[0]!==M[L-1];N&&("tozerox"===d||"tonextx"===d&&(n||"h"===E))?F.tozero=!0:!(w.error_y||{}).visible&&("tonexty"===d||"tozeroy"===d||!u.hasMarkers(w)&&!u.hasText(w))&&(F.padded=!1,F.ppad=0),N&&("tozeroy"===d||"tonexty"===d&&(n||"v"===E))?D.tozero=!0:("tonextx"===d||"tozerox"===d)&&(D.padded=!1),S&&(w._extremes[S]=i.findExtremes(p,v,F)),T&&(w._extremes[T]=i.findExtremes(o,M,D))}function s(h,w){if(u.hasMarkers(h)){var v,p=h.marker,o=1.6*(h.marker.sizeref||1);if(v="area"===h.marker.sizemode?function(S){return Math.max(Math.sqrt((S||0)/o),3)}:function(S){return Math.max((S||0)/o,3)},g.isArrayOrTypedArray(p.size)){var M={type:"linear"};i.setConvert(M);for(var b=M.makeCalcdata(h.marker,"size"),L=new Array(w),x=0;x<w;x++)L[x]=v(b[x]);return L}return v(p.size)}}function c(h,w){var p=f(w),o=h._firstScatter;o[p]||(o[p]=w.uid)}function f(h){var w=h.stackgroup;return h.xaxis+h.yaxis+h.type+(w?"-"+w:"")}function m(h,w,p,o){var v=h.stackgroup;if(v){var M=w._scatterStackOpts[p._id+o._id][v],b="v"===M.orientation?o:p;if("linear"===b.type||"log"===b.type)return M}}q.exports={calc:function l(h,w){var N,k,O,B,z,U,p=h._fullLayout,o=w._xA=i.getFromId(h,w.xaxis||"x","x"),v=w._yA=i.getFromId(h,w.yaxis||"y","y"),M=o.makeCalcdata(w,"x"),b=v.makeCalcdata(w,"y"),L=P(w,o,"x",M),x=P(w,v,"y",b),S=L.vals,T=x.vals,n=w._length,E=new Array(n),d=w.ids,F=m(w,p,o,v),D=!1;c(p,w);var nt,H="x",J="y";F?(g.pushUnique(F.traceIndices,w._expandedIndex),(N="v"===F.orientation)?(J="s",nt="x"):(H="s",nt="y"),z="interpolate"===F.stackgaps):a(h,w,o,v,S,T,s(w,n));var ut=!!w.xperiodalignment,Q=!!w.yperiodalignment;for(k=0;k<n;k++){var j=E[k]={},Z=A(S[k]),G=A(T[k]);Z&&G?(j[H]=S[k],j[J]=T[k],ut&&(j.orig_x=M[k],j.xEnd=L.ends[k],j.xStart=L.starts[k]),Q&&(j.orig_y=b[k],j.yEnd=x.ends[k],j.yStart=x.starts[k])):F&&(N?Z:G)?(j[nt]=N?S[k]:T[k],j.gap=!0,z?(j.s=C,D=!0):j.s=0):j[H]=j[J]=C,d&&(j.id=String(d[k]))}if(e(E,w),y(h,w),r(E,w),F){for(k=0;k<E.length;)E[k][nt]===C?E.splice(k,1):k++;if(g.sort(E,function(X,rt){return X[nt]-rt[nt]||X.i-rt.i}),D){for(k=0;k<E.length-1&&E[k].gap;)k++;for((U=E[k].s)||(U=E[k].s=0),O=0;O<k;O++)E[O].s=U;for(B=E.length-1;B>k&&E[B].gap;)B--;for(U=E[B].s,O=E.length-1;O>B;O--)E[O].s=U;for(;k<B;)if(E[++k].gap){for(O=k+1;E[O].gap;)O++;for(var K=E[k-1][nt],at=E[k-1].s,$=(E[O].s-at)/(E[O][nt]-K);k<O;)E[k].s=at+(E[k][nt]-K)*$,k++}}}return E},calcMarkerSize:s,calcAxisExpansion:a,setFirstScatter:c,getStackOpts:m}},66279:function(q,W,t){"use strict";var A=t(71828);q.exports=function(i,P){A.isArrayOrTypedArray(P.selectedpoints)&&A.tagSelected(i,P)}},36922:function(q,W,t){"use strict";var A=t(52075).hasColorscale,g=t(78803),i=t(34098);q.exports=function(C,u){i.hasLines(u)&&A(u,"line")&&g(C,u,{vals:u.line.color,containerStr:"line",cLetter:"c"}),i.hasMarkers(u)&&(A(u,"marker")&&g(C,u,{vals:u.marker.color,containerStr:"marker",cLetter:"c"}),A(u,"marker.line")&&g(C,u,{vals:u.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},47581:function(q){"use strict";q.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},72626:function(q,W,t){"use strict";var A=t(47761),g=t(11661).setGroupPositions;function P(u,y,e,r,l,a,s){l[r]=!0;var c={i:null,gap:!0,s:0};if(c[s]=e,u.splice(y,0,c),y&&e===u[y-1][s]){var f=u[y-1];c.s=f.s,c.i=f.i,c.gap=f.gap}else a&&(c.s=function C(u,y,e,r){var l=u[y-1],a=u[y+1];return a?l?l.s+(a.s-l.s)*(e-l[r])/(a[r]-l[r]):a.s:l.s}(u,y,e,s));y||(u[0].t=u[1].t,u[0].trace=u[1].trace,delete u[1].t,delete u[1].trace)}q.exports=function(y,e){"group"===y._fullLayout.scattermode&&function i(u,y){for(var e=y.xaxis,r=y.yaxis,l=u._fullLayout,a=u._fullData,s=u.calcdata,c=[],f=[],m=0;m<a.length;m++){var h=a[m];!0===h.visible&&"scatter"===h.type&&h.xaxis===e._id&&h.yaxis===r._id&&("h"===h.orientation?c.push(s[m]):"v"===h.orientation&&f.push(s[m]))}var w={mode:l.scattermode,gap:l.scattergap};g(u,e,r,f,w),g(u,r,e,c,w)}(y,e);var r=e.xaxis,l=e.yaxis,s=y._fullLayout._scatterStackOpts[r._id+l._id];if(s){var f,m,h,w,p,o,v,M,b,L,x,S,T,n,E,c=y.calcdata;for(var d in s){var F=(L=s[d]).traceIndices;if(F.length){for(x="interpolate"===L.stackgaps,S=L.groupnorm,"v"===L.orientation?(T="x",n="y"):(T="y",n="x"),E=new Array(F.length),f=0;f<E.length;f++)E[f]=!1;o=c[F[0]];var D=new Array(o.length);for(f=0;f<o.length;f++)D[f]=o[f][T];for(f=1;f<F.length;f++){for(p=c[F[f]],m=h=0;m<p.length;m++){for(v=p[m][T];v>D[h]&&h<D.length;h++)P(p,m,D[h],f,E,x,T),m++;if(v!==D[h]){for(w=0;w<f;w++)P(c[F[w]],h,v,w,E,x,T);D.splice(h,0,v)}h++}for(;h<D.length;h++)P(p,m,D[h],f,E,x,T),m++}var N=D.length;for(m=0;m<o.length;m++){for(M=o[m][n]=o[m].s,f=1;f<F.length;f++)(p=c[F[f]])[0].trace._rawLength=p[0].trace._length,p[0].trace._length=N,p[m][n]=M+=p[m].s;if(S)for(b=("fraction"===S?M:M/100)||1,f=0;f<F.length;f++){var k=c[F[f]][m];k[n]/=b,k.sNorm=k.s/b}}for(f=0;f<F.length;f++){var O=(p=c[F[f]])[0].trace,B=A.calcMarkerSize(O,O._rawLength),z=Array.isArray(B);if(B&&E[f]||z){var U=B;for(B=new Array(N),m=0;m<N;m++)B[m]=p[m].gap?0:z?U[p[m].i]:U}var H=new Array(N),J=new Array(N);for(m=0;m<N;m++)H[m]=p[m].x,J[m]=p[m].y;A.calcAxisExpansion(y,O,r,l,H,J,B),p[0].t.orientation=L.orientation}}}}}},34936:function(q,W,t){"use strict";var A=t(71828),g=t(26125),i=t(82196);q.exports=function(C,u){var e,r;function l(m){return A.coerce(e._input,e,i,m)}if("group"===u.scattermode)for(r=0;r<C.length;r++)"scatter"===(e=C[r]).type&&g(e._input,e,u,l);for(r=0;r<C.length;r++){var a=C[r];if("scatter"===a.type){var s=a.fill;if("none"!==s&&"toself"!==s&&(a.opacity=void 0,"tonexty"===s||"tonextx"===s))for(var c=r-1;c>=0;c--){var f=C[c];if("scatter"===f.type&&f.xaxis===a.xaxis&&f.yaxis===a.yaxis){f.opacity=void 0;break}}}}}},17438:function(q,W,t){"use strict";var A=t(71828),g=t(73972),i=t(82196),P=t(47581),C=t(34098),u=t(67513),y=t(73927),e=t(565),r=t(49508),l=t(11058),a=t(94039),s=t(82410),c=t(28908),f=t(71828).coercePattern;q.exports=function(h,w,p,o){function v(E,d){return A.coerce(h,w,i,E,d)}var M=u(h,w,o,v);if(M||(w.visible=!1),w.visible){y(h,w,o,v),v("xhoverformat"),v("yhoverformat");var b=e(h,w,o,v);"group"===o.scattermode&&void 0===w.orientation&&v("orientation","v");var L=!b&&M<P.PTS_LINESONLY?"lines+markers":"lines";v("text"),v("hovertext"),v("mode",L),C.hasLines(w)&&(l(h,w,p,o,v,{backoff:!0}),a(h,w,v),v("connectgaps"),v("line.simplify")),C.hasMarkers(w)&&r(h,w,p,o,v,{gradient:!0}),C.hasText(w)&&(v("texttemplate"),s(h,w,o,v));var x=[];(C.hasMarkers(w)||C.hasText(w))&&(v("cliponaxis"),v("marker.maxdisplayed"),x.push("points")),v("fill",b?b.fillDflt:"none"),"none"!==w.fill&&(c(h,w,p,v),C.hasLines(w)||a(h,w,v),f(v,"fillpattern",w.fillcolor,!1));var S=(w.line||{}).color,T=(w.marker||{}).color;("tonext"===w.fill||"toself"===w.fill)&&x.push("fills"),v("hoveron",x.join("+")||"points"),"fills"!==w.hoveron&&v("hovertemplate");var n=g.getComponentMethod("errorbars","supplyDefaults");n(h,w,S||T||p,{axis:"y"}),n(h,w,S||T||p,{axis:"x",inherit:"y"}),A.coerceSelectionMarkerOpacity(w,v)}}},28908:function(q,W,t){"use strict";var A=t(7901),g=t(71828).isArrayOrTypedArray;q.exports=function(P,C,u,y){var e=!1;if(C.marker){var r=C.marker.color,l=(C.marker.line||{}).color;r&&!g(r)?e=r:l&&!g(l)&&(e=l)}y("fillcolor",A.addOpacity((C.line||{}).color||e||u,.5))}},8225:function(q,W,t){"use strict";var A=t(89298);q.exports=function(i,P,C){var u={},y={_fullLayout:C},e=A.getFromTrace(y,P,"x"),r=A.getFromTrace(y,P,"y"),l=i.orig_x;void 0===l&&(l=i.x);var a=i.orig_y;return void 0===a&&(a=i.y),u.xLabel=A.tickText(e,e.c2l(l),!0).text,u.yLabel=A.tickText(r,r.c2l(a),!0).text,u}},34603:function(q,W,t){"use strict";var A=t(7901),g=t(34098);q.exports=function(P,C){var u,y;if("lines"===P.mode)return(u=P.line.color)&&A.opacity(u)?u:P.fillcolor;if("none"===P.mode)return P.fill?P.fillcolor:"";var e=C.mcc||(P.marker||{}).color,r=C.mlcc||((P.marker||{}).line||{}).color;return(y=e&&A.opacity(e)?e:r&&A.opacity(r)&&(C.mlw||((P.marker||{}).line||{}).width)?r:"")?A.opacity(y)<.3?A.addOpacity(y,.3):y:(u=(P.line||{}).color)&&A.opacity(u)&&g.hasLines(P)&&P.line.width?u:P.fillcolor}},26125:function(q,W,t){"use strict";var A=t(99082).getAxisGroup;q.exports=function(i,P,C,u){var y=P.orientation,r=A(C,P[{v:"x",h:"y"}[y]+"axis"])+y,l=C._alignmentOpts||{},a=u("alignmentgroup"),s=l[r];s||(s=l[r]={});var c=s[a];c?c.traces.push(P):c=s[a]={traces:[P],alignmentIndex:Object.keys(s).length,offsetGroups:{}};var f=u("offsetgroup"),m=c.offsetGroups,h=m[f];f&&(h||(h=m[f]={offsetIndex:Object.keys(m).length}),P._offsetIndex=h.offsetIndex)}},33720:function(q,W,t){"use strict";var A=t(71828),g=t(30211),i=t(73972),P=t(34603),C=t(7901),u=A.fillText;q.exports=function(e,r,l,a){var s=e.cd,c=s[0].trace,f=e.xa,m=e.ya,h=f.c2p(r),w=m.c2p(l),p=[h,w],o=c.hoveron||"",v=-1!==c.mode.indexOf("markers")?3:.5,M=!!c.xperiodalignment,b=!!c.yperiodalignment;if(-1!==o.indexOf("points")){var S=function(st){var dt=Math.max(v,st.mrc||0),bt=f.c2p(st.x)-h,gt=m.c2p(st.y)-w;return Math.max(Math.sqrt(bt*bt+gt*gt)-dt,1-v/dt)},T=g.getDistanceFunction(a,function(st){if(M){var dt=f.c2p(st.xStart),bt=f.c2p(st.xEnd);return h>=Math.min(dt,bt)&&h<=Math.max(dt,bt)?0:1/0}var gt=Math.max(3,st.mrc||0),Lt=1-1/gt,It=Math.abs(f.c2p(st.x)-h);return It<gt?Lt*It/gt:It-gt+Lt},function(st){if(b){var dt=m.c2p(st.yStart),bt=m.c2p(st.yEnd);return w>=Math.min(dt,bt)&&w<=Math.max(dt,bt)?0:1/0}var gt=Math.max(3,st.mrc||0),Lt=1-1/gt,It=Math.abs(m.c2p(st.y)-w);return It<gt?Lt*It/gt:It-gt+Lt},S);if(g.getClosest(s,T,e),!1!==e.index){var n=s[e.index],E=f.c2p(n.x,!0),d=m.c2p(n.y,!0),F=n.mrc||1;e.index=n.i;var D=s[0].t.orientation,N=D&&(n.sNorm||n.s),k="h"===D?N:void 0!==n.orig_x?n.orig_x:n.x,O="v"===D?N:void 0!==n.orig_y?n.orig_y:n.y;return A.extendFlat(e,{color:P(c,n),x0:E-F,x1:E+F,xLabelVal:k,y0:d-F,y1:d+F,yLabelVal:O,spikeDistance:S(n),hovertemplate:c.hovertemplate}),u(n,c,e),i.getComponentMethod("errorbars","hoverInfo")(n,c,e),[e]}}if(-1!==o.indexOf("fills")&&c._polygons){var ut,Q,j,Z,G,K,$,X,B=c._polygons,z=[],U=!1,H=1/0,J=-1/0,nt=1/0,it=-1/0;for(ut=0;ut<B.length;ut++)(j=B[ut]).contains(p)&&(U=!U,z.push(j),nt=Math.min(nt,j.ymin),it=Math.max(it,j.ymax));if(U){var rt=((nt=Math.max(nt,0))+(it=Math.min(it,m._length)))/2;for(ut=0;ut<z.length;ut++)for(Z=z[ut].pts,Q=1;Q<Z.length;Q++)($=Z[Q-1][1])>rt!=(X=Z[Q][1])>=rt&&(K=Z[Q-1][0],X-$&&(G=K+(Z[Q][0]-K)*(rt-$)/(X-$),H=Math.min(H,G),J=Math.max(J,G)));H=Math.max(H,0),J=Math.min(J,f._length);var et=C.defaultLine;return C.opacity(c.fillcolor)?et=c.fillcolor:C.opacity((c.line||{}).color)&&(et=c.line.color),A.extendFlat(e,{distance:e.maxHoverDistance,x0:H,x1:J,y0:rt,y1:rt,color:et,hovertemplate:!1}),delete e.index,e.text=c.text&&!Array.isArray(c.text)?String(c.text):c.name,[e]}}}},67368:function(q,W,t){"use strict";var A=t(34098);q.exports={hasLines:A.hasLines,hasMarkers:A.hasMarkers,hasText:A.hasText,isBubble:A.isBubble,attributes:t(82196),layoutAttributes:t(21479),supplyDefaults:t(17438),crossTraceDefaults:t(34936),supplyLayoutDefaults:t(79334),calc:t(47761).calc,crossTraceCalc:t(72626),arraysToCalcdata:t(75225),plot:t(32663),colorbar:t(4898),formatLabels:t(8225),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(33720),selectPoints:t(98002),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:t(93612),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},21479:function(q){"use strict";q.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},79334:function(q,W,t){"use strict";var A=t(71828),g=t(21479);q.exports=function(i,P){"group"===P.scattermode&&function C(y,e){return A.coerce(i,P,g,y,e)}("scattergap","group"===P.barmode?P.bargap:.2)}},11058:function(q,W,t){"use strict";var A=t(71828).isArrayOrTypedArray,g=t(52075).hasColorscale,i=t(1586);q.exports=function(C,u,y,e,r,l){l||(l={});var a=(C.marker||{}).color;r("line.color",y),g(C,"line")?i(C,u,e,r,{prefix:"line.",cLetter:"c"}):r("line.color",!A(a)&&a||y),r("line.width"),l.noDash||r("line.dash"),l.backoff&&r("line.backoff")}},34621:function(q,W,t){"use strict";var A=t(91424),g=t(50606),i=g.BADNUM,P=g.LOG_CLIP,C=P+.5,u=P-.5,y=t(71828),e=y.segmentsIntersect,r=y.constrain,l=t(47581);q.exports=function(s,c){var k,O,B,z,U,H,J,nt,it,ut,Q,j,Z,G,K,at,rt,et,f=c.trace||{},m=c.xaxis,h=c.yaxis,w="log"===m.type,p="log"===h.type,o=m._length,v=h._length,M=c.backoff,b=f.marker,L=c.connectGaps,x=c.baseTolerance,S=c.shape,T="linear"===S,n=f.fill&&"none"!==f.fill,E=[],d=l.minTolerance,F=s.length,D=new Array(F),N=0;function $(ee){var se=s[ee];if(!se)return!1;var Be=c.linearized?m.l2p(se.x):m.c2p(se.x),Ke=c.linearized?h.l2p(se.y):h.c2p(se.y);if(Be===i){if(w&&(Be=m.c2p(se.x,!0)),Be===i)return!1;p&&Ke===i&&(Be*=Math.abs(m._m*v*(m._m>0?C:u)/(h._m*o*(h._m>0?C:u)))),Be*=1e3}if(Ke===i){if(p&&(Ke=h.c2p(se.y,!0)),Ke===i)return!1;Ke*=1e3}return[Be,Ke]}function X(ee,se,Be,Ke){var xe=Be-ee,Pe=Ke-se,Ge=.5-ee,gr=.5-se,ue=xe*xe+Pe*Pe,Ne=xe*Ge+Pe*gr;if(Ne>0&&Ne<ue){var Ye=Ge*Pe-gr*xe;if(Ye*Ye<ue)return!0}}function st(ee,se){var Be=ee[0]/o,Ke=ee[1]/v,xe=Math.max(0,-Be,Be-1,-Ke,Ke-1);return xe&&void 0!==rt&&X(Be,Ke,rt,et)&&(xe=0),xe&&se&&X(Be,Ke,se[0]/o,se[1]/v)&&(xe=0),(1+l.toleranceGrowth*xe)*x}function dt(ee,se){var Be=ee[0]-se[0],Ke=ee[1]-se[1];return Math.sqrt(Be*Be+Ke*Ke)}var At,Gt,Wt,Pt,Vt,te,oe,bt=l.maxScreensAway,gt=-o*bt,Lt=o*(1+bt),It=-v*bt,Mt=v*(1+bt),xt=[[gt,It,Lt,It],[Lt,It,Lt,Mt],[Lt,Mt,gt,Mt],[gt,Mt,gt,It]];function Bt(ee){if(ee[0]<gt||ee[0]>Lt||ee[1]<It||ee[1]>Mt)return[r(ee[0],gt,Lt),r(ee[1],It,Mt)]}function Ot(ee,se){if(ee[0]===se[0]&&(ee[0]===gt||ee[0]===Lt)||ee[1]===se[1]&&(ee[1]===It||ee[1]===Mt))return!0}function ie(ee,se,Be){return function(Ke,xe){var Pe=Bt(Ke),Ge=Bt(xe),gr=[];if(Pe&&Ge&&Ot(Pe,Ge))return gr;Pe&&gr.push(Pe),Ge&&gr.push(Ge);var ue=2*y.constrain((Ke[ee]+xe[ee])/2,se,Be)-((Pe||Ke)[ee]+(Ge||xe)[ee]);return ue&&((Pe&&Ge?ue>0==Pe[ee]>Ge[ee]?Pe:Ge:Pe||Ge)[ee]+=ue),gr}}function de(ee){var se=ee[0],Be=ee[1],Ke=se===D[N-1][0],xe=Be===D[N-1][1];if(!Ke||!xe)if(N>1){var Pe=se===D[N-2][0],Ge=Be===D[N-2][1];Ke&&(se===gt||se===Lt)&&Pe?Ge?N--:D[N-1]=ee:xe&&(Be===It||Be===Mt)&&Ge?Pe?N--:D[N-1]=ee:D[N++]=ee}else D[N++]=ee}function Fe(ee){D[N-1][0]!==ee[0]&&D[N-1][1]!==ee[1]&&de([Wt,Pt]),de(ee),Vt=null,Wt=Pt=0}"linear"===S||"spline"===S?oe=function Qt(ee,se){for(var Be=[],Ke=0,xe=0;xe<4;xe++){var Pe=xt[xe],Ge=e(ee[0],ee[1],se[0],se[1],Pe[0],Pe[1],Pe[2],Pe[3]);Ge&&(!Ke||Math.abs(Ge.x-Be[0][0])>1||Math.abs(Ge.y-Be[0][1])>1)&&(Ge=[Ge.x,Ge.y],Ke&&dt(Ge,ee)<dt(Be[0],ee)?Be.unshift(Ge):Be.push(Ge),Ke++)}return Be}:"hv"===S||"vh"===S?oe=function qt(ee,se){var Be=[],Ke=Bt(ee),xe=Bt(se);return Ke&&xe&&Ot(Ke,xe)||(Ke&&Be.push(Ke),xe&&Be.push(xe)),Be}:"hvh"===S?oe=ie(0,gt,Lt):"vhv"===S&&(oe=ie(1,It,Mt));var Kt=y.isArrayOrTypedArray(b);function Et(ee){if(ee&&M&&(ee.i=k,ee.d=s,ee.trace=f,ee.marker=Kt?b[ee.i]:b,ee.backoff=M),rt=ee[0]/o,et=ee[1]/v,Gt=ee[1]<It?It:ee[1]>Mt?Mt:0,(At=ee[0]<gt?gt:ee[0]>Lt?Lt:0)||Gt){if(N)if(Vt){var se=oe(Vt,ee);se.length>1&&(Fe(se[0]),D[N++]=se[1])}else te=oe(D[N-1],ee)[0],D[N++]=te;else D[N++]=[At||ee[0],Gt||ee[1]];var Be=D[N-1];At&&Gt&&(Be[0]!==At||Be[1]!==Gt)?(Vt&&(Wt!==At&&Pt!==Gt?de(Wt&&Pt?function pe(ee,se){var Be=se[0]-ee[0],Ke=(se[1]-ee[1])/Be;return(ee[1]*se[0]-se[1]*ee[0])/Be>0?[Ke>0?gt:Lt,Mt]:[Ke>0?Lt:gt,It]}(Vt,ee):[Wt||At,Pt||Gt]):Wt&&Pt&&de([Wt,Pt])),de([At,Gt])):Wt-At&&Pt-Gt&&de([At||Wt,Gt||Pt]),Vt=ee,Wt=At,Pt=Gt}else Vt&&Fe(oe(Vt,ee)[0]),D[N++]=ee}for(k=0;k<F;k++)if(O=$(k)){for(N=0,Vt=null,Et(O),k++;k<F;k++){if(!(z=$(k))){if(L)continue;break}if(T&&c.simplify){var St=$(k+1);if(ut=dt(z,O),n&&(0===N||N===F-1)||!(ut<st(z,St)*d)){for(nt=[(z[0]-O[0])/ut,(z[1]-O[1])/ut],U=O,Q=ut,j=G=K=0,J=!1,B=z,k++;k<s.length;k++){if(H=St,St=$(k+1),!H){if(L)continue;break}if(at=(it=[H[0]-O[0],H[1]-O[1]])[0]*nt[1]-it[1]*nt[0],G=Math.min(G,at),(K=Math.max(K,at))-G>st(H,St))break;B=H,(Z=it[0]*nt[0]+it[1]*nt[1])>Q?(Q=Z,z=H,J=!1):Z<j&&(j=Z,U=H,J=!0)}if(J?(Et(z),B!==U&&Et(U)):(U!==O&&Et(U),B!==z&&Et(z)),Et(B),k>=s.length||!H)break;Et(H),O=H}}else Et(z)}Vt&&de([Wt||Vt[0],Pt||Vt[1]]),E.push(D.slice(0,N))}var Dt=S.slice(S.length-1);if(M&&"h"!==Dt&&"v"!==Dt){for(var Ft=!1,Nt=-1,Rt=[],wt=0;wt<E.length;wt++)for(var ft=0;ft<E[wt].length-1;ft++){var pt=E[wt][ft],kt=E[wt][ft+1],Zt=A.applyBackoff(kt,pt);(Zt[0]!==kt[0]||Zt[1]!==kt[1])&&(Ft=!0),Rt[Nt+1]||(Rt[++Nt]=[pt,[Zt[0],Zt[1]]])}return Ft?Rt:E}return E}},94039:function(q){"use strict";q.exports=function(t,A,g){"spline"===g("line.shape")&&g("line.smoothing")}},68687:function(q){"use strict";var W={tonextx:1,tonexty:1,tonext:1};q.exports=function(A,g,i){var P,C,u,y,e,r={},l=!1,a=-1,s=0,c=-1;for(C=0;C<i.length;C++)(u=(P=i[C][0].trace).stackgroup||"")?u in r?e=r[u]:(e=r[u]=s,s++):P.fill in W&&c>=0?e=c:(e=c=s,s++),e<a&&(l=!0),P._groupIndex=a=e;var f=i.slice();l&&f.sort(function(h,w){var p=h[0].trace,o=w[0].trace;return p._groupIndex-o._groupIndex||p.index-o.index});var m={};for(C=0;C<f.length;C++)u=(P=f[C][0].trace).stackgroup||"",!0===P.visible?(P._nexttrace=null,P.fill in W&&(P._prevtrace=(y=m[u])||null,y&&(y._nexttrace=P)),P._ownfill=P.fill&&("tozero"===P.fill.substr(0,6)||"toself"===P.fill||"to"===P.fill.substr(0,2)&&!P._prevtrace),m[u]=P):P._prevtrace=P._nexttrace=P._ownfill=null;return f}},39984:function(q,W,t){"use strict";var A=t(92770);q.exports=function(i,P){P||(P=2);var C=i.marker,u=C.sizeref||1,y=C.sizemin||0,e="area"===C.sizemode?function(r){return Math.sqrt(r/u)}:function(r){return r/u};return function(r){var l=e(r/P);return A(l)&&l>0?Math.max(l,y):0}}},4898:function(q){"use strict";q.exports={container:"marker",min:"cmin",max:"cmax"}},49508:function(q,W,t){"use strict";var A=t(7901),g=t(52075).hasColorscale,i=t(1586),P=t(34098);q.exports=function(u,y,e,r,l,a){var s=P.isBubble(u),c=(u.line||{}).color;a=a||{},c&&(e=c),l("marker.symbol"),l("marker.opacity",s?.7:1),l("marker.size"),a.noAngle||(l("marker.angle"),a.noAngleRef||l("marker.angleref"),a.noStandOff||l("marker.standoff")),l("marker.color",e),g(u,"marker")&&i(u,y,r,l,{prefix:"marker.",cLetter:"c"}),a.noSelect||(l("selected.marker.color"),l("unselected.marker.color"),l("selected.marker.size"),l("unselected.marker.size")),a.noLine||(l("marker.line.color",c&&!Array.isArray(c)&&y.marker.color!==c?c:s?A.background:A.defaultLine),g(u,"marker.line")&&i(u,y,r,l,{prefix:"marker.line.",cLetter:"c"}),l("marker.line.width",s?1:0)),s&&(l("marker.sizeref"),l("marker.sizemin"),l("marker.sizemode")),a.gradient&&"none"!==l("marker.gradient.type")&&l("marker.gradient.color")}},73927:function(q,W,t){"use strict";var A=t(71828).dateTick0,i=t(50606).ONEWEEK;function P(C,u){return A(u,C%i==0?1:0)}q.exports=function(u,y,e,r,l){if(l||(l={x:!0,y:!0}),l.x){var a=r("xperiod");a&&(r("xperiod0",P(a,y.xcalendar)),r("xperiodalignment"))}if(l.y){var s=r("yperiod");s&&(r("yperiod0",P(s,y.ycalendar)),r("yperiodalignment"))}}},32663:function(q,W,t){"use strict";var A=t(39898),g=t(73972),i=t(71828),P=i.ensureSingle,C=i.identity,u=t(91424),y=t(34098),e=t(34621),r=t(68687),l=t(61082).tester;function s(f,m,h,w,p,o,v){var b,M=f._context.staticPlot;!function c(f,m,h,w,p){var o=h.xaxis,v=h.yaxis,M=A.extent(i.simpleMap(o.range,o.r2c)),b=A.extent(i.simpleMap(v.range,v.r2c)),L=w[0].trace;if(y.hasMarkers(L)){var x=L.marker.maxdisplayed;if(0!==x){var S=w.filter(function(d){return d.x>=M[0]&&d.x<=M[1]&&d.y>=b[0]&&d.y<=b[1]}),T=Math.ceil(S.length/x),n=0;p.forEach(function(d,F){var D=d[0].trace;y.hasMarkers(D)&&D.marker.maxdisplayed>0&&F<m&&n++});var E=Math.round(n*T/3+Math.floor(n/3)*T/7.1);w.forEach(function(d){delete d.vis}),S.forEach(function(d,F){0===Math.round((F+E)%T)&&(d.vis=!0)})}}}(0,m,h,w,p);var L=!!v&&v.duration>0;function x(Pt){return L?Pt.transition():Pt}var S=h.xaxis,T=h.yaxis,n=w[0].trace,E=n.line,d=A.select(o),F=P(d,"g","errorbars"),D=P(d,"g","lines"),N=P(d,"g","points"),k=P(d,"g","text");if(g.getComponentMethod("errorbars","plot")(f,F,h,v),!0===n.visible){x(d).style("opacity",n.opacity);var O,B,z=n.fill.charAt(n.fill.length-1);"x"!==z&&"y"!==z&&(z=""),w[0][h.isRangePlot?"nodeRangePlot3":"node3"]=d;var U="",H=[],J=n._prevtrace;J&&(U=J._prevRevpath||"",B=J._nextFill,H=J._polygons);var nt,it,j,Z,G,K,at,$,X,ut="",Q="",rt=[],et=i.noop;if(O=n._ownFill,y.hasLines(n)||"none"!==n.fill){for(B&&B.datum(w),-1!==["hv","vh","hvh","vhv"].indexOf(E.shape)?(j=u.steps(E.shape),Z=u.steps(E.shape.split("").reverse().join(""))):j=Z="spline"===E.shape?function(Pt){var Vt=Pt[Pt.length-1];return Pt.length>1&&Pt[0][0]===Vt[0]&&Pt[0][1]===Vt[1]?u.smoothclosed(Pt.slice(1),E.smoothing):u.smoothopen(Pt,E.smoothing)}:function(Pt){return"M"+Pt.join("L")},G=function(Pt){return Z(Pt.reverse())},rt=e(w,{xaxis:S,yaxis:T,trace:n,connectGaps:n.connectgaps,baseTolerance:Math.max(E.width||1,3)/4,shape:E.shape,backoff:E.backoff,simplify:E.simplify,fill:n.fill}),X=n._polygons=new Array(rt.length),b=0;b<rt.length;b++)n._polygons[b]=l(rt[b]);rt.length&&(K=rt[0][0],$=(at=rt[rt.length-1])[at.length-1]),et=function(Pt){return function(Vt){if(nt=j(Vt),it=G(Vt),ut?z?(ut+="L"+nt.substr(1),Q=it+"L"+Q.substr(1)):(ut+="Z"+nt,Q=it+"Z"+Q):(ut=nt,Q=it),y.hasLines(n)){var te=A.select(this);if(te.datum(w),Pt)x(te.style("opacity",0).attr("d",nt).call(u.lineGroupStyle)).style("opacity",1);else{var Qt=x(te);Qt.attr("d",nt),u.singleLineStyle(w,Qt)}}}}}var st=D.selectAll(".js-line").data(rt);x(st.exit()).style("opacity",0).remove(),st.each(et(!1)),st.enter().append("path").classed("js-line",!0).style("vector-effect",M?"none":"non-scaling-stroke").call(u.lineGroupStyle).each(et(!0)),u.setClipUrl(st,h.layerClipId,f),rt.length?(O?(O.datum(w),K&&$&&(z?("y"===z?K[1]=$[1]=T.c2p(0,!0):"x"===z&&(K[0]=$[0]=S.c2p(0,!0)),x(O).attr("d","M"+$+"L"+K+"L"+ut.substr(1)).call(u.singleFillStyle,f)):x(O).attr("d",ut+"Z").call(u.singleFillStyle,f))):B&&("tonext"===n.fill.substr(0,6)&&ut&&U?("tonext"===n.fill?x(B).attr("d",ut+"Z"+U+"Z").call(u.singleFillStyle,f):x(B).attr("d",ut+"L"+U.substr(1)+"Z").call(u.singleFillStyle,f),n._polygons=n._polygons.concat(H)):(dt(B),n._polygons=null)),n._prevRevpath=Q,n._prevPolygons=X):(O?dt(O):B&&dt(B),n._polygons=n._prevRevpath=n._prevPolygons=null),N.datum(w),k.datum(w),function At(Pt,Vt,te){var Qt,qt=te[0].trace,ie=y.hasMarkers(qt),oe=y.hasText(qt),pe=function Mt(Pt){if(Pt.ids)return It}(qt),de=xt,Fe=xt;if(ie||oe){var Kt=C,Et=qt.stackgroup,St=Et&&"infer zero"===f._fullLayout._scatterStackOpts[S._id+T._id][Et].stackgaps;qt.marker.maxdisplayed||qt._needsCull?Kt=St?gt:bt:Et&&!St&&(Kt=Lt),ie&&(de=Kt),oe&&(Fe=Kt)}var Ft,Dt=(Qt=Pt.selectAll("path.point").data(de,pe)).enter().append("path").classed("point",!0);L&&Dt.call(u.pointStyle,qt,f).call(u.translatePoints,S,T).style("opacity",0).transition().style("opacity",1),Qt.order(),ie&&(Ft=u.makePointStyleFns(qt)),Qt.each(function(Nt){var Rt=A.select(this),wt=x(Rt);u.translatePoint(Nt,wt,S,T)?(u.singlePointStyle(Nt,wt,qt,Ft,f),h.layerClipId&&u.hideOutsideRangePoint(Nt,wt,S,T,qt.xcalendar,qt.ycalendar),qt.customdata&&Rt.classed("plotly-customdata",null!=Nt.data)):wt.remove()}),L?Qt.exit().transition().style("opacity",0).remove():Qt.exit().remove(),(Qt=Vt.selectAll("g").data(Fe,pe)).enter().append("g").classed("textpoint",!0).append("text"),Qt.order(),Qt.each(function(Nt){var Rt=A.select(this),wt=x(Rt.select("text"));u.translatePoint(Nt,wt,S,T)?h.layerClipId&&u.hideOutsideRangePoint(Nt,Rt,S,T,qt.xcalendar,qt.ycalendar):Rt.remove()}),Qt.selectAll("text").call(u.textPointStyle,qt,f).each(function(Nt){var Rt=S.c2p(Nt.x),wt=T.c2p(Nt.y);A.select(this).selectAll("tspan.line").each(function(){x(A.select(this)).attr({x:Rt,y:wt})})}),Qt.exit().remove()}(N,k,w);var Wt=!1===n.cliponaxis?null:h.layerClipId;u.setClipUrl(N,Wt,f),u.setClipUrl(k,Wt,f)}function dt(Pt){x(Pt).attr("d","M0,0Z")}function bt(Pt){return Pt.filter(function(Vt){return!Vt.gap&&Vt.vis})}function gt(Pt){return Pt.filter(function(Vt){return Vt.vis})}function Lt(Pt){return Pt.filter(function(Vt){return!Vt.gap})}function It(Pt){return Pt.id}function xt(){return!1}}q.exports=function(m,h,w,p,o,v){var M,b,L=!o,x=!!o&&o.duration>0,S=r(m,h,w);(M=p.selectAll("g.trace").data(S,function(n){return n[0].trace.uid})).enter().append("g").attr("class",function(n){return"trace scatter trace"+n[0].trace.uid}).style("stroke-miterlimit",2),M.order(),function a(f,m,h){m.each(function(w){var p=P(A.select(this),"g","fills");u.setClipUrl(p,h.layerClipId,f);var o=w[0].trace,v=[];o._ownfill&&v.push("_ownFill"),o._nexttrace&&v.push("_nextFill");var M=p.selectAll("g").data(v,C);M.enter().append("g"),M.exit().each(function(b){o[b]=null}).remove(),M.order().each(function(b){o[b]=P(A.select(this),"path","js-fill")})})}(m,M,h),x?(v&&(b=v()),A.transition().duration(o.duration).ease(o.easing).each("end",function(){b&&b()}).each("interrupt",function(){b&&b()}).each(function(){p.selectAll("g.trace").each(function(n,E){s(m,E,h,n,S,this,o)})})):M.each(function(n,E){s(m,E,h,n,S,this,o)}),L&&M.exit().remove(),p.selectAll("path:not([d])").remove()}},98002:function(q,W,t){"use strict";var A=t(34098);q.exports=function(i,P){var l,a,s,c,C=i.cd,u=i.xaxis,y=i.yaxis,e=[],r=C[0].trace;if(!A.hasMarkers(r)&&!A.hasText(r))return[];if(!1===P)for(l=0;l<C.length;l++)C[l].selected=0;else for(l=0;l<C.length;l++)s=u.c2p((a=C[l]).x),c=y.c2p(a.y),null!==a.i&&P.contains([s,c],!1,l,i)?(e.push({pointNumber:a.i,x:u.c2d(a.x),y:y.c2d(a.y)}),a.selected=1):a.selected=0;return e}},565:function(q){"use strict";var W=["orientation","groupnorm","stackgaps"];q.exports=function(A,g,i,P){var C=i._scatterStackOpts,u=P("stackgroup");if(u){var y=g.xaxis+g.yaxis,e=C[y];e||(e=C[y]={});var r=e[u],l=!1;r?r.traces.push(g):(r=e[u]={traceIndices:[],traces:[g]},l=!0);for(var a={orientation:g.x&&!g.y?"h":"v"},s=0;s<W.length;s++){var c=W[s],f=c+"Found";if(!r[f]){var m=void 0!==A[c],h="orientation"===c;if((m||l)&&(r[c]=P(c,a[c]),h&&(r.fillDflt="h"===r[c]?"tonextx":"tonexty"),m&&(r[f]=!0,!l&&(delete r.traces[0][c],h))))for(var w=0;w<r.traces.length-1;w++){var p=r.traces[w];p._input.fill!==p.fill&&(p.fill=r.fillDflt)}}}return r}}},16296:function(q,W,t){"use strict";var A=t(39898),g=t(91424),i=t(73972);function C(e,r,l){g.pointStyle(e.selectAll("path.point"),r,l)}function u(e,r,l){g.textPointStyle(e.selectAll("text"),r,l)}q.exports={style:function P(e){var r=A.select(e).selectAll("g.trace.scatter");r.style("opacity",function(l){return l[0].trace.opacity}),r.selectAll("g.points").each(function(l){C(A.select(this),l.trace||l[0].trace,e)}),r.selectAll("g.text").each(function(l){u(A.select(this),l.trace||l[0].trace,e)}),r.selectAll("g.trace path.js-line").call(g.lineGroupStyle),r.selectAll("g.trace path.js-fill").call(g.fillGroupStyle,e),i.getComponentMethod("errorbars","style")(r)},stylePoints:C,styleText:u,styleOnSelect:function y(e,r,l){var a=r[0].trace;a.selectedpoints?(g.selectedPointStyle(l.selectAll("path.point"),a),g.selectedTextStyle(l.selectAll("text"),a)):(C(l,a,e),u(l,a,e))}}},34098:function(q,W,t){"use strict";var A=t(71828);q.exports={hasLines:function(g){return g.visible&&g.mode&&-1!==g.mode.indexOf("lines")},hasMarkers:function(g){return g.visible&&(g.mode&&-1!==g.mode.indexOf("markers")||"splom"===g.type)},hasText:function(g){return g.visible&&g.mode&&-1!==g.mode.indexOf("text")},isBubble:function(g){return A.isPlainObject(g.marker)&&A.isArrayOrTypedArray(g.marker.size)}}},82410:function(q,W,t){"use strict";var A=t(71828);q.exports=function(g,i,P,C,u){u=u||{},C("textposition"),A.coerceFont(C,"textfont",u.font||P.font),u.noSelect||(C("selected.textfont.color"),C("unselected.textfont.color"))}},67513:function(q,W,t){"use strict";var A=t(71828),g=t(73972);q.exports=function(P,C,u,y){var l,e=y("x"),r=y("y");if(g.getComponentMethod("calendars","handleTraceDefaults")(P,C,["x","y"],u),e){var s=A.minRowLength(e);r?l=Math.min(s,A.minRowLength(r)):(l=s,y("y0"),y("dy"))}else{if(!r)return 0;l=A.minRowLength(r),y("x0"),y("dx")}return C._length=l,l}},44542:function(q,W,t){"use strict";var A=t(82196),g=t(50693),i=t(12663).axisHoverFormat,P=t(5386).fF,C=t(5386).si,u=t(9012),y=t(29659),e=t(87381),r=t(1426).extendFlat,l=t(30962).overrideAll,a=t(78607),c=A.marker,f=c.line,m=r({width:A.line.width,dash:{valType:"enumerated",values:a(y),dflt:"solid"}},g("line"));var w=q.exports=l({x:A.x,y:A.y,z:{valType:"data_array"},text:r({},A.text,{}),texttemplate:C({},{}),hovertext:r({},A.hovertext,{}),hovertemplate:P(),xhoverformat:i("x"),yhoverformat:i("y"),zhoverformat:i("z"),mode:r({},A.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:.6666666666666666}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:.6666666666666666}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:.6666666666666666}}},connectgaps:A.connectgaps,line:m,marker:r({symbol:{valType:"enumerated",values:a(e),dflt:"circle",arrayOk:!0},size:r({},c.size,{dflt:8}),sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,opacity:r({},c.opacity,{arrayOk:!1}),colorbar:c.colorbar,line:r({width:r({},f.width,{arrayOk:!1})},g("marker.line"))},g("marker")),textposition:r({},A.textposition,{dflt:"top center"}),textfont:{color:A.textfont.color,size:A.textfont.size,family:r({},A.textfont.family,{arrayOk:!1})},opacity:u.opacity,hoverinfo:r({},u.hoverinfo)},"calc","nested");w.x.editType=w.y.editType=w.z.editType="calc+clearAxisTypes"},36563:function(q,W,t){"use strict";var A=t(75225),g=t(36922);q.exports=function(P,C){var u=[{x:!1,y:!1,trace:C,t:{}}];return A(u,C),g(P,C),u}},67336:function(q,W,t){"use strict";var A=t(73972);function g(C,u,y,e){if(!u||!u.visible)return null;for(var r=A.getComponentMethod("errorbars","makeComputeError")(u),l=new Array(C.length),a=0;a<C.length;a++){var s=r(+C[a],a);if("log"===e.type){var c=e.c2l(C[a]),f=C[a]-s[0],m=C[a]+s[1];if(l[a]=[(e.c2l(f,!0)-c)*y,(e.c2l(m,!0)-c)*y],f>0){var h=e.c2l(f);e._lowerLogErrorBound||(e._lowerLogErrorBound=h),e._lowerErrorBound=Math.min(e._lowerLogErrorBound,h)}}else l[a]=[-s[0]*y,s[1]*y]}return l}q.exports=function P(C,u,y){var e=[g(C.x,C.error_x,u[0],y.xaxis),g(C.y,C.error_y,u[1],y.yaxis),g(C.z,C.error_z,u[2],y.zaxis)],r=function i(C){for(var u=0;u<C.length;u++)if(C[u])return C[u].length;return 0}(e);if(0===r)return null;for(var l=new Array(r),a=0;a<r;a++){for(var s=[[0,0,0],[0,0,0]],c=0;c<3;c++)if(e[c])for(var f=0;f<2;f++)s[f][c]=e[c][a][f];l[a]=s}return l}},58925:function(q,W,t){"use strict";var A=t(9330).gl_line3d,g=t(9330).gl_scatter3d,i=t(9330).gl_error3d,P=t(9330).gl_mesh3d,C=t(9330).delaunay_triangulate,u=t(71828),y=t(78614),e=t(81697).formatColor,r=t(39984),l=t(29659),a=t(87381),s=t(89298),c=t(23469).appendArrayPointValue,f=t(67336);function m(d,F){this.scene=d,this.uid=F,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var h=m.prototype;function o(d){return null==d?0:d.indexOf("left")>-1?-1:d.indexOf("right")>-1?1:0}function v(d){return null==d?0:d.indexOf("top")>-1?-1:d.indexOf("bottom")>-1?1:0}function b(d,F){return F(4*d)}function L(d){return a[d]}function x(d,F,D,N,k){var O=null;if(u.isArrayOrTypedArray(d)){O=[];for(var B=0;B<F;B++)O[B]=void 0===d[B]?N:D(d[B],k)}else O=D(d,u.identity);return O}function S(d,F){var G,K,at,$,X,rt,D=[],N=d.fullSceneLayout,k=d.dataScale,O=N.xaxis,B=N.yaxis,z=N.zaxis,U=F.marker,H=F.line,J=F.x||[],nt=F.y||[],it=F.z||[],ut=J.length,Q=F.xcalendar,j=F.ycalendar,Z=F.zcalendar;for(X=0;X<ut;X++)G=O.d2l(J[X],0,Q)*k[0],K=B.d2l(nt[X],0,j)*k[1],at=z.d2l(it[X],0,Z)*k[2],D[X]=[G,K,at];if(Array.isArray(F.text))rt=F.text;else if(void 0!==F.text)for(rt=new Array(ut),X=0;X<ut;X++)rt[X]=F.text;function et(Qt,Bt){var Ot=N[Qt];return s.tickText(Ot,Ot.d2l(Bt),!0).text}var st=F.texttemplate;if(st){var bt=d.fullLayout._d3locale,gt=Array.isArray(st),Lt=gt?Math.min(st.length,ut):ut,It=gt?function(Qt){return st[Qt]}:function(){return st};for(rt=new Array(Lt),X=0;X<Lt;X++){var Mt={x:J[X],y:nt[X],z:it[X]},xt={xLabel:et("xaxis",J[X]),yLabel:et("yaxis",nt[X]),zLabel:et("zaxis",it[X])},At={};c(At,F,X);var Gt=F._meta||{};rt[X]=u.texttemplateString(It(X),xt,bt,At,Mt,Gt)}}if($={position:D,mode:F.mode,text:rt},"line"in F&&($.lineColor=e(H,1,ut),$.lineWidth=H.width,$.lineDashes=H.dash),"marker"in F){var Wt=r(F);$.scatterColor=e(U,1,ut),$.scatterSize=x(U.size,ut,b,20,Wt),$.scatterMarker=x(U.symbol,ut,L,"\u25cf"),$.scatterLineWidth=U.line.width,$.scatterLineColor=e(U.line,1,ut),$.scatterAngle=0}"textposition"in F&&($.textOffset=function M(d){var N=[0,0];if(Array.isArray(d))for(var k=0;k<d.length;k++)N[k]=[0,0],d[k]&&(N[k][0]=o(d[k]),N[k][1]=v(d[k]));else N[0]=o(d),N[1]=v(d);return N}(F.textposition),$.textColor=e(F.textfont,1,ut),$.textSize=x(F.textfont.size,ut,u.identity,12),$.textFont=F.textfont.family,$.textAngle=0);var Pt=["x","y","z"];for($.project=[!1,!1,!1],$.projectScale=[1,1,1],$.projectOpacity=[1,1,1],X=0;X<3;++X){var Vt=F.projection[Pt[X]];($.project[X]=Vt.show)&&($.projectOpacity[X]=Vt.opacity,$.projectScale[X]=Vt.scale)}$.errorBounds=f(F,k,N);var te=function p(d){for(var F=[0,0,0],D=[[0,0,0],[0,0,0],[0,0,0]],N=[1,1,1],k=0;k<3;k++){var O=d[k];O&&!1!==O.copy_zstyle&&!1!==d[2].visible&&(O=d[2]),O&&O.visible&&(F[k]=O.width/2,D[k]=y(O.color),N[k]=O.thickness)}return{capSize:F,color:D,lineWidth:N}}([F.error_x,F.error_y,F.error_z]);return $.errorColor=te.color,$.errorLineWidth=te.lineWidth,$.errorCapSize=te.capSize,$.delaunayAxis=F.surfaceaxis,$.delaunayColor=y(F.surfacecolor),$}function T(d){if(u.isArrayOrTypedArray(d)){var F=d[0];return u.isArrayOrTypedArray(F)&&(d=F),"rgb("+d.slice(0,3).map(function(D){return Math.round(255*D)})+")"}return null}function n(d){return u.isArrayOrTypedArray(d)?4===d.length&&"number"==typeof d[0]?T(d):d.map(T):null}h.handlePick=function(d){if(d.object&&(d.object===this.linePlot||d.object===this.delaunayMesh||d.object===this.textMarkers||d.object===this.scatterPlot)){var F=d.index=d.data.index;return d.object.highlight&&d.object.highlight(null),this.scatterPlot&&(d.object=this.scatterPlot,this.scatterPlot.highlight(d.data)),d.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[F]||0===this.textLabels[F])&&(d.textLabel=this.textLabels[F]):d.textLabel=this.textLabels),d.traceCoordinate=[this.data.x[F],this.data.y[F],this.data.z[F]],!0}},h.update=function(d){var D,N,k,O,F=this.scene.glplot.gl,B=l.solid;this.data=d;var z=S(this.scene,d);"mode"in z&&(this.mode=z.mode),"lineDashes"in z&&z.lineDashes in l&&(B=l[z.lineDashes]),this.color=n(z.scatterColor)||n(z.lineColor),this.dataPoints=z.position,D={gl:this.scene.glplot.gl,position:z.position,color:z.lineColor,lineWidth:z.lineWidth||1,dashes:B[0],dashScale:B[1],opacity:d.opacity,connectGaps:d.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(D):(this.linePlot=A(D),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var U=d.opacity;if(d.marker&&void 0!==d.marker.opacity&&(U*=d.marker.opacity),N={gl:this.scene.glplot.gl,position:z.position,color:z.scatterColor,size:z.scatterSize,glyph:z.scatterMarker,opacity:U,orthographic:!0,lineWidth:z.scatterLineWidth,lineColor:z.scatterLineColor,project:z.project,projectScale:z.projectScale,projectOpacity:z.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(N):(this.scatterPlot=g(N),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),O={gl:this.scene.glplot.gl,position:z.position,glyph:z.text,color:z.textColor,size:z.textSize,angle:z.textAngle,alignment:z.textOffset,font:z.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:d.opacity},this.textLabels=d.hovertext||d.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(O):(this.textMarkers=g(O),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),k={gl:this.scene.glplot.gl,position:z.position,color:z.errorColor,error:z.errorBounds,lineWidth:z.errorLineWidth,capSize:z.errorCapSize,opacity:d.opacity},this.errorBars?z.errorBounds?this.errorBars.update(k):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):z.errorBounds&&(this.errorBars=i(k),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),z.delaunayAxis>=0){var H=function w(d,F,D){var z,N=(D+1)%3,k=(D+2)%3,O=[],B=[];for(z=0;z<d.length;++z){var U=d[z];isNaN(U[N])||!isFinite(U[N])||isNaN(U[k])||!isFinite(U[k])||(O.push([U[N],U[k]]),B.push(z))}var H=C(O);for(z=0;z<H.length;++z)for(var J=H[z],nt=0;nt<J.length;++nt)J[nt]=B[J[nt]];return{positions:d,cells:H,meshColor:F}}(z.position,z.delaunayColor,z.delaunayAxis);H.opacity=d.opacity,this.delaunayMesh?this.delaunayMesh.update(H):(H.gl=F,this.delaunayMesh=P(H),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},h.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},q.exports=function E(d,F){var D=new m(d,F.uid);return D.update(F),D}},21428:function(q,W,t){"use strict";var A=t(73972),g=t(71828),i=t(34098),P=t(49508),C=t(11058),u=t(82410),y=t(44542);q.exports=function(l,a,s,c){function f(b,L){return g.coerce(l,a,y,b,L)}if(function e(r,l,a,s){var c=0,f=a("x"),m=a("y"),h=a("z");return A.getComponentMethod("calendars","handleTraceDefaults")(r,l,["x","y","z"],s),f&&m&&h&&(c=Math.min(f.length,m.length,h.length),l._length=l._xlength=l._ylength=l._zlength=c),c}(l,a,f,c)){f("text"),f("hovertext"),f("hovertemplate"),f("xhoverformat"),f("yhoverformat"),f("zhoverformat"),f("mode"),i.hasLines(a)&&(f("connectgaps"),C(l,a,s,c,f)),i.hasMarkers(a)&&P(l,a,s,c,f,{noSelect:!0,noAngle:!0}),i.hasText(a)&&(f("texttemplate"),u(l,a,c,f,{noSelect:!0}));var h=(a.line||{}).color,w=(a.marker||{}).color;f("surfaceaxis")>=0&&f("surfacecolor",h||w);for(var p=["x","y","z"],o=0;o<3;++o){var v="projection."+p[o];f(v+".show")&&(f(v+".opacity"),f(v+".scale"))}var M=A.getComponentMethod("errorbars","supplyDefaults");M(l,a,h||w||s,{axis:"z"}),M(l,a,h||w||s,{axis:"y",inherit:"z"}),M(l,a,h||w||s,{axis:"x",inherit:"z"})}else a.visible=!1}},13551:function(q,W,t){"use strict";q.exports={plot:t(58925),attributes:t(44542),markerSymbols:t(87381),supplyDefaults:t(21428),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:t(36563),moduleType:"trace",name:"scatter3d",basePlotModule:t(58547),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},97001:function(q,W,t){"use strict";var A=t(82196),g=t(9012),i=t(5386).fF,P=t(5386).si,C=t(50693),u=t(1426).extendFlat,y=A.marker,e=A.line,r=y.line;q.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:u({},A.mode,{dflt:"markers"}),text:u({},A.text,{}),texttemplate:P({editType:"plot"},{keys:["a","b","text"]}),hovertext:u({},A.hovertext,{}),line:{color:e.color,width:e.width,dash:e.dash,backoff:e.backoff,shape:u({},e.shape,{values:["linear","spline"]}),smoothing:e.smoothing,editType:"calc"},connectgaps:A.connectgaps,fill:u({},A.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:A.fillcolor,marker:u({symbol:y.symbol,opacity:y.opacity,maxdisplayed:y.maxdisplayed,angle:y.angle,angleref:y.angleref,standoff:y.standoff,size:y.size,sizeref:y.sizeref,sizemin:y.sizemin,sizemode:y.sizemode,line:u({width:r.width,editType:"calc"},C("marker.line")),gradient:y.gradient,editType:"calc"},C("marker")),textfont:A.textfont,textposition:A.textposition,selected:A.selected,unselected:A.unselected,hoverinfo:u({},g.hoverinfo,{flags:["a","b","text","name"]}),hoveron:A.hoveron,hovertemplate:i()}},34618:function(q,W,t){"use strict";var A=t(92770),g=t(36922),i=t(75225),P=t(66279),C=t(47761).calcMarkerSize,u=t(22882);q.exports=function(e,r){var l=r._carpetTrace=u(e,r);if(l&&l.visible&&"legendonly"!==l.visible){var a;r.xaxis=l.xaxis,r.yaxis=l.yaxis;var f,m,s=r._length,c=new Array(s),h=!1;for(a=0;a<s;a++)if(m=r.b[a],A(f=r.a[a])&&A(m)){var w=l.ab2xy(+f,+m,!0),p=l.isVisible(+f,+m);p||(h=!0),c[a]={x:w[0],y:w[1],a:f,b:m,vis:p}}else c[a]={x:!1,y:!1};return r._needsCull=h,c[0].carpet=l,c[0].trace=r,C(r,s),g(e,r),i(c,r),P(c,r),c}}},98965:function(q,W,t){"use strict";var A=t(71828),g=t(47581),i=t(34098),P=t(49508),C=t(11058),u=t(94039),y=t(82410),e=t(28908),r=t(97001);q.exports=function(a,s,c,f){function m(b,L){return A.coerce(a,s,r,b,L)}m("carpet"),s.xaxis="x",s.yaxis="y";var h=m("a"),w=m("b"),p=Math.min(h.length,w.length);if(p){s._length=p,m("text"),m("texttemplate"),m("hovertext"),m("mode",p<g.PTS_LINESONLY?"lines+markers":"lines"),i.hasLines(s)&&(C(a,s,c,f,m,{backoff:!0}),u(a,s,m),m("connectgaps")),i.hasMarkers(s)&&P(a,s,c,f,m,{gradient:!0}),i.hasText(s)&&y(a,s,f,m);var v=[];(i.hasMarkers(s)||i.hasText(s))&&(m("marker.maxdisplayed"),v.push("points")),m("fill"),"none"!==s.fill&&(e(a,s,c,m),i.hasLines(s)||u(a,s,m)),("tonext"===s.fill||"toself"===s.fill)&&v.push("fills"),"fills"!==m("hoveron",v.join("+")||"points")&&m("hovertemplate"),A.coerceSelectionMarkerOpacity(s,m)}else s.visible=!1}},16165:function(q){"use strict";q.exports=function(t,A,g,i,P){var C=i[P];return t.a=C.a,t.b=C.b,t.y=C.y,t}},48953:function(q){"use strict";q.exports=function(t,A){var g={},i=A._carpet,P=i.ab2ij([t.a,t.b]),C=Math.floor(P[0]),u=P[0]-C,y=Math.floor(P[1]),r=i.evalxy([],C,y,u,P[1]-y);return g.yLabel=r[1].toFixed(3),g}},22931:function(q,W,t){"use strict";var A=t(33720),g=t(71828).fillText;q.exports=function(P,C,u,y){var e=A(P,C,u,y);if(e&&!1!==e[0].index){var r=e[0];if(void 0===r.index){var a=P.xa._length,s=a*(1-r.y0/P.ya._length)/2,c=a-s;return r.x0=Math.max(Math.min(r.x0,c),s),r.x1=Math.max(Math.min(r.x1,c),s),e}var f=r.cd[r.index];r.a=f.a,r.b=f.b,r.xLabelVal=void 0,r.yLabelVal=void 0;var m=r.trace,h=m._carpet,w=m._module.formatLabels(f,m);r.yLabel=w.yLabel,delete r.text;var p=[];if(!m.hovertemplate){var M=(f.hi||m.hoverinfo).split("+");-1!==M.indexOf("all")&&(M=["a","b","text"]),-1!==M.indexOf("a")&&o(h.aaxis,f.a),-1!==M.indexOf("b")&&o(h.baxis,f.b),p.push("y: "+r.yLabel),-1!==M.indexOf("text")&&g(f,m,p),r.extraText=p.join("<br>")}return e}function o(b,L){var x;x=b.labelprefix&&b.labelprefix.length>0?b.labelprefix.replace(/ = $/,""):b._hovertitle,p.push(x+": "+L.toFixed(3)+b.labelsuffix)}}},46858:function(q,W,t){"use strict";q.exports={attributes:t(97001),supplyDefaults:t(98965),colorbar:t(4898),formatLabels:t(48953),calc:t(34618),plot:t(1913),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(22931),selectPoints:t(98002),eventData:t(16165),moduleType:"trace",name:"scattercarpet",basePlotModule:t(93612),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},1913:function(q,W,t){"use strict";var A=t(32663),g=t(89298),i=t(91424);q.exports=function(C,u,y,e){var r,l,a,s=y[0][0].carpet,c=g.getFromId(C,s.xaxis||"x"),f=g.getFromId(C,s.yaxis||"y"),m={xaxis:c,yaxis:f,plot:u.plot};for(r=0;r<y.length;r++)(l=y[r][0].trace)._xA=c,l._yA=f;for(A(C,m,y,e),r=0;r<y.length;r++)a=e.selectAll("g.trace"+(l=y[r][0].trace).uid+" .js-line"),i.setClipUrl(a,y[r][0].carpet._clipPathId,C)}},19316:function(q,W,t){"use strict";var A=t(5386).fF,g=t(5386).si,i=t(82196),P=t(9012),C=t(50693),u=t(79952).P,y=t(1426).extendFlat,e=t(30962).overrideAll,r=i.marker,l=i.line,a=r.line;q.exports=e({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:y({},i.mode,{dflt:"markers"}),text:y({},i.text,{}),texttemplate:g({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:y({},i.hovertext,{}),textfont:i.textfont,textposition:i.textposition,line:{color:l.color,width:l.width,dash:u},connectgaps:i.connectgaps,marker:y({symbol:r.symbol,opacity:r.opacity,angle:r.angle,angleref:y({},r.angleref,{values:["previous","up","north"]}),standoff:r.standoff,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,colorbar:r.colorbar,line:y({width:a.width},C("marker.line")),gradient:r.gradient},C("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:i.fillcolor,selected:i.selected,unselected:i.unselected,hoverinfo:y({},P.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:A()},"calc","nested")},84622:function(q,W,t){"use strict";var A=t(92770),g=t(50606).BADNUM,i=t(36922),P=t(75225),C=t(66279),u=t(71828)._;function y(e){return e&&"string"==typeof e}q.exports=function(r,l){var f,a=Array.isArray(l.locations),s=a?l.locations.length:l._length,c=new Array(s);f=l.geojson?function(v){return y(v)||A(v)}:y;for(var m=0;m<s;m++){var h=c[m]={};if(a){var w=l.locations[m];h.loc=f(w)?w:null}else{var p=l.lon[m],o=l.lat[m];h.lonlat=A(p)&&A(o)?[+p,+o]:[g,g]}}return P(c,l),i(r,l),C(c,l),s&&(c[0].t={labels:{lat:u(r,"lat:")+" ",lon:u(r,"lon:")+" "}}),c}},10659:function(q,W,t){"use strict";var A=t(71828),g=t(34098),i=t(49508),P=t(11058),C=t(82410),u=t(28908),y=t(19316);q.exports=function(r,l,a,s){function c(M,b){return A.coerce(r,l,y,M,b)}var m,f=c("locations");if(f&&f.length){var w,h=c("geojson");("string"==typeof h&&""!==h||A.isPlainObject(h))&&(w="geojson-id"),"geojson-id"===c("locationmode",w)&&c("featureidkey"),m=f.length}else{var o=c("lon")||[],v=c("lat")||[];m=Math.min(o.length,v.length)}m?(l._length=m,c("text"),c("hovertext"),c("hovertemplate"),c("mode"),g.hasLines(l)&&(P(r,l,a,s,c),c("connectgaps")),g.hasMarkers(l)&&i(r,l,a,s,c,{gradient:!0}),g.hasText(l)&&(c("texttemplate"),C(r,l,s,c)),c("fill"),"none"!==l.fill&&u(r,l,a,c),A.coerceSelectionMarkerOpacity(l,c)):l.visible=!1}},84084:function(q){"use strict";q.exports=function(t,A,g,i,P){t.lon=A.lon,t.lat=A.lat,t.location=A.loc?A.loc:null;var C=i[P];return C.fIn&&C.fIn.properties&&(t.properties=C.fIn.properties),t}},82719:function(q,W,t){"use strict";var A=t(89298);q.exports=function(i,P,C){var u={},e=C[P.geo]._subplot.mockAxis,r=i.lonlat;return u.lonLabel=A.tickText(e,e.c2l(r[0]),!0).text,u.latLabel=A.tickText(e,e.c2l(r[1]),!0).text,u}},14977:function(q,W,t){"use strict";var A=t(30211),g=t(50606).BADNUM,i=t(34603),P=t(71828).fillText,C=t(19316);q.exports=function(e,r,l){var a=e.cd,s=a[0].trace,c=e.xa,f=e.ya,m=e.subplot,h=m.projection.isLonLatOverEdges,w=m.project;if(A.getClosest(a,function p(S){var T=S.lonlat;if(T[0]===g||h(T))return 1/0;var n=w(T),E=w([r,l]),d=Math.abs(n[0]-E[0]),F=Math.abs(n[1]-E[1]),D=Math.max(3,S.mrc||0);return Math.max(Math.sqrt(d*d+F*F)-D,1-3/D)},e),!1!==e.index){var o=a[e.index],v=o.lonlat,M=[c.c2p(v),f.c2p(v)],b=o.mrc||1;e.x0=M[0]-b,e.x1=M[0]+b,e.y0=M[1]-b,e.y1=M[1]+b,e.loc=o.loc,e.lon=v[0],e.lat=v[1];var L={};L[s.geo]={_subplot:m};var x=s._module.formatLabels(o,s,L);return e.lonLabel=x.lonLabel,e.latLabel=x.latLabel,e.color=i(s,o),e.extraText=function u(y,e,r,l){if(!y.hovertemplate){var a=e.hi||y.hoverinfo,s="all"===a?C.hoverinfo.flags:a.split("+"),c=-1!==s.indexOf("location")&&Array.isArray(y.locations),f=-1!==s.indexOf("lon"),m=-1!==s.indexOf("lat"),h=-1!==s.indexOf("text"),w=[];return c?w.push(e.loc):f&&m?w.push("("+p(r.latLabel)+", "+p(r.lonLabel)+")"):f?w.push(l.lon+p(r.lonLabel)):m&&w.push(l.lat+p(r.latLabel)),h&&P(e,y,w),w.join("<br>")}function p(o){return o+"\xb0"}}(s,o,e,a[0].t.labels),e.hovertemplate=s.hovertemplate,[e]}}},17988:function(q,W,t){"use strict";q.exports={attributes:t(19316),supplyDefaults:t(10659),colorbar:t(4898),formatLabels:t(82719),calc:t(84622),calcGeoJSON:t(89171).calcGeoJSON,plot:t(89171).plot,style:t(33095),styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(14977),eventData:t(84084),selectPoints:t(20548),moduleType:"trace",name:"scattergeo",basePlotModule:t(44622),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},89171:function(q,W,t){"use strict";var A=t(39898),g=t(71828),i=t(90973).getTopojsonFeatures,P=t(18214),C=t(41327),u=t(71739).findExtremes,y=t(50606).BADNUM,e=t(47761).calcMarkerSize,r=t(34098),l=t(33095);q.exports={calcGeoJSON:function s(c,f){var o,v,m=c[0].trace,h=f[m.geo],w=h._subplot,p=m._length;if(Array.isArray(m.locations)){var M=m.locationmode,b="geojson-id"===M?C.extractTraceFeature(c):i(m,w.topojson);for(o=0;o<p;o++){v=c[o];var L="geojson-id"===M?v.fOut:C.locationToFeature(M,v.loc,b);v.lonlat=L?L.properties.ct:[y,y]}}var S,T,x={padded:!0};if("geojson"===h.fitbounds&&"geojson-id"===m.locationmode){var n=C.computeBbox(C.getTraceGeojson(m));S=[n[0],n[2]],T=[n[1],n[3]]}else{for(S=new Array(p),T=new Array(p),o=0;o<p;o++)S[o]=(v=c[o]).lonlat[0],T[o]=v.lonlat[1];x.ppad=e(m,p)}m._extremes.lon=u(h.lonaxis._ax,S,x),m._extremes.lat=u(h.lataxis._ax,T,x)},plot:function a(c,f,m){var h=f.layers.frontplot.select(".scatterlayer"),w=g.makeTraceGroups(h,m,"trace scattergeo");function p(o,v){o.lonlat[0]===y&&A.select(v).remove()}w.selectAll("*").remove(),w.each(function(o){var v=A.select(this),M=o[0].trace;if(r.hasLines(M)||"none"!==M.fill){var b=P.calcTraceToLineCoords(o),L="none"!==M.fill?P.makePolygon(b):P.makeLine(b);v.selectAll("path.js-line").data([{geojson:L,trace:M}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}r.hasMarkers(M)&&v.selectAll("path.point").data(g.identity).enter().append("path").classed("point",!0).each(function(x){p(x,this)}),r.hasText(M)&&v.selectAll("g").data(g.identity).enter().append("g").append("text").each(function(x){p(x,this)}),l(c,o)})}}},20548:function(q,W,t){"use strict";var A=t(34098),g=t(50606).BADNUM;q.exports=function(P,C){var a,s,c,f,m,u=P.cd,y=P.xaxis,e=P.yaxis,r=[],l=u[0].trace;if(!A.hasMarkers(l)&&!A.hasText(l))return[];if(!1===C)for(m=0;m<u.length;m++)u[m].selected=0;else for(m=0;m<u.length;m++)(s=(a=u[m]).lonlat)[0]!==g&&(c=y.c2p(s),f=e.c2p(s),C.contains([c,f],null,m,P)?(r.push({pointNumber:m,lon:s[0],lat:s[1]}),a.selected=1):a.selected=0);return r}},33095:function(q,W,t){"use strict";var A=t(39898),g=t(91424),i=t(7901),P=t(16296),C=P.stylePoints,u=P.styleText;q.exports=function(r,l){l&&function y(e,r){var l=r[0].trace,a=r[0].node3;a.style("opacity",r[0].trace.opacity),C(a,l,e),u(a,l,e),a.selectAll("path.js-line").style("fill","none").each(function(s){var c=A.select(this),f=s.trace,m=f.line||{};c.call(i.stroke,m.color).call(g.dashLine,m.dash||"",m.width||0),"none"!==f.fill&&c.call(i.fill,f.fillcolor)})}(r,l)}},42341:function(q,W,t){"use strict";var A=t(9012),g=t(82196),i=t(12663).axisHoverFormat,P=t(50693),C=t(78607),u=t(1426).extendFlat,y=t(30962).overrideAll,e=t(78232).DASHES,r=g.line,l=g.marker,a=l.line,s=q.exports=y({x:g.x,x0:g.x0,dx:g.dx,y:g.y,y0:g.y0,dy:g.dy,xperiod:g.xperiod,yperiod:g.yperiod,xperiod0:g.xperiod0,yperiod0:g.yperiod0,xperiodalignment:g.xperiodalignment,yperiodalignment:g.yperiodalignment,xhoverformat:i("x"),yhoverformat:i("y"),text:g.text,hovertext:g.hovertext,textposition:g.textposition,textfont:g.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:r.color,width:r.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:C(e),dflt:"solid"}},marker:u({},P("marker"),{symbol:l.symbol,angle:l.angle,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,opacity:l.opacity,colorbar:l.colorbar,line:u({},P("marker.line"),{width:a.width})}),connectgaps:g.connectgaps,fill:u({},g.fill,{dflt:"none"}),fillcolor:g.fillcolor,selected:{marker:g.selected.marker,textfont:g.selected.textfont},unselected:{marker:g.unselected.marker,textfont:g.unselected.textfont},opacity:A.opacity},"calc","nested");s.x.editType=s.y.editType=s.x0.editType=s.y0.editType="calc+clearAxisTypes",s.hovertemplate=g.hovertemplate,s.texttemplate=g.texttemplate},72156:function(q,W,t){"use strict";var A=t(20794);q.exports={moduleType:"trace",name:"scattergl",basePlotModule:t(93612),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:t(42341),supplyDefaults:t(47148),crossTraceDefaults:t(34936),colorbar:t(4898),formatLabels:t(68101),calc:t(45032),hoverPoints:A.hoverPoints,selectPoints:t(58147),meta:{}}},45032:function(q,W,t){"use strict";var A=t(88294),g=t(71828),i=t(41675),P=t(71739).findExtremes,C=t(42973),u=t(47761),y=u.calcMarkerSize,e=u.calcAxisExpansion,r=u.setFirstScatter,l=t(36922),a=t(19635),s=t(38967),c=t(50606).BADNUM,f=t(78232).TOO_MANY_POINTS;function m(w,p,o){var v=w._extremes[p._id],M=P(p,o._bnds,{padded:!0});v.min=v.min.concat(M.min),v.max=v.max.concat(M.max)}q.exports=function(p,o){var E,v=p._fullLayout,M=o._xA=i.getFromId(p,o.xaxis,"x"),b=o._yA=i.getFromId(p,o.yaxis,"y"),L=v._plots[o.xaxis+o.yaxis],x=o._length,S=x>=f,T=2*x,n={},d=M.makeCalcdata(o,"x"),F=b.makeCalcdata(o,"y"),D=C(o,M,"x",d),N=C(o,b,"y",F),k=D.vals,O=N.vals;o._x=k,o._y=O,o.xperiodalignment&&(o._origX=d,o._xStarts=D.starts,o._xEnds=D.ends),o.yperiodalignment&&(o._origY=F,o._yStarts=N.starts,o._yEnds=N.ends);var B=new Array(T),z=new Array(x);for(E=0;E<x;E++)B[2*E]=k[E]===c?NaN:k[E],B[2*E+1]=O[E]===c?NaN:O[E],z[E]=E;if("log"===M.type)for(E=0;E<T;E+=2)B[E]=M.c2l(B[E]);if("log"===b.type)for(E=1;E<T;E+=2)B[E]=b.c2l(B[E]);S&&"log"!==M.type&&"log"!==b.type?n.tree=A(B):n.ids=z,l(p,o);var J,U=function h(w,p,o,v,M,b){var L=a.style(w,o);if(L.marker&&(L.marker.positions=v),L.line&&v.length>1&&g.extendFlat(L.line,a.linePositions(w,o,v)),L.errorX||L.errorY){var x=a.errorBarPositions(w,o,v,M,b);L.errorX&&g.extendFlat(L.errorX,x.x),L.errorY&&g.extendFlat(L.errorY,x.y)}return L.text&&(g.extendFlat(L.text,{positions:v},a.textPosition(w,o,L.text,L.marker)),g.extendFlat(L.textSel,{positions:v},a.textPosition(w,o,L.text,L.markerSel)),g.extendFlat(L.textUnsel,{positions:v},a.textPosition(w,o,L.text,L.markerUnsel))),L}(p,0,o,B,k,O),H=s(p,L);return r(v,o),S?U.marker&&(J=U.marker.sizeAvg||Math.max(U.marker.size,3)):J=y(o,x),e(p,o,M,b,k,O,J),U.errorX&&m(o,M,U.errorX),U.errorY&&m(o,b,U.errorY),U.fill&&!H.fill2d&&(H.fill2d=!0),U.marker&&!H.scatter2d&&(H.scatter2d=!0),U.line&&!H.line2d&&(H.line2d=!0),(U.errorX||U.errorY)&&!H.error2d&&(H.error2d=!0),U.text&&!H.glText&&(H.glText=!0),U.marker&&(U.marker.snap=x),H.lineOptions.push(U.line),H.errorXOptions.push(U.errorX),H.errorYOptions.push(U.errorY),H.fillOptions.push(U.fill),H.markerOptions.push(U.marker),H.markerSelectedOptions.push(U.markerSel),H.markerUnselectedOptions.push(U.markerUnsel),H.textOptions.push(U.text),H.textSelectedOptions.push(U.textSel),H.textUnselectedOptions.push(U.textUnsel),H.selectBatch.push([]),H.unselectBatch.push([]),n._scene=H,n.index=H.count,n.x=k,n.y=O,n.positions=B,H.count++,[{x:!1,y:!1,t:n,trace:o}]}},78232:function(q){"use strict";q.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},19635:function(q,W,t){"use strict";var A=t(92770),g=t(82019),i=t(25075),P=t(73972),C=t(71828),u=t(91424),y=t(41675),e=t(81697).formatColor,r=t(34098),l=t(39984),a=t(68645),s=t(78232),c=t(37822).DESELECTDIM,f={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},m=t(23469).appendArrayPointValue;function w(D,N){var ut,k=D._fullLayout,O=N._length,B=N.textfont,z=N.textposition,U=Array.isArray(z)?z:[z],H=B.color,J=B.size,nt=B.family,it={},Q=D._context.plotGlPixelRatio,j=N.texttemplate;if(j){it.text=[];var Z=k._d3locale,G=Array.isArray(j),K=G?Math.min(j.length,O):O,at=G?function(bt){return j[bt]}:function(){return j};for(ut=0;ut<K;ut++){var $={i:ut},X=N._module.formatLabels($,N,k),rt={};m(rt,N,ut);var et=N._meta||{};it.text.push(C.texttemplateString(at(ut),X,Z,rt,$,et))}}else it.text=Array.isArray(N.text)&&N.text.length<O?N.text.slice():N.text;if(Array.isArray(it.text))for(ut=it.text.length;ut<O;ut++)it.text[ut]="";for(it.opacity=N.opacity,it.font={},it.align=[],it.baseline=[],ut=0;ut<U.length;ut++){var st=U[ut].split(/\s+/);switch(st[1]){case"left":it.align.push("right");break;case"right":it.align.push("left");break;default:it.align.push(st[1])}switch(st[0]){case"top":it.baseline.push("bottom");break;case"bottom":it.baseline.push("top");break;default:it.baseline.push(st[0])}}if(Array.isArray(H))for(it.color=new Array(O),ut=0;ut<O;ut++)it.color[ut]=H[ut];else it.color=H;if(C.isArrayOrTypedArray(J)||Array.isArray(nt))for(it.font=new Array(O),ut=0;ut<O;ut++){var dt=it.font[ut]={};dt.size=(C.isTypedArray(J)?J[ut]:Array.isArray(J)?A(J[ut])?J[ut]:0:J)*Q,dt.family=Array.isArray(nt)?nt[ut]:nt}else it.font={size:J*Q,family:nt};return it}function p(D,N){var z,j,k=N._length,O=N.marker,B={},U=C.isArrayOrTypedArray(O.symbol),H=C.isArrayOrTypedArray(O.angle),J=C.isArrayOrTypedArray(O.color),nt=C.isArrayOrTypedArray(O.line.color),it=C.isArrayOrTypedArray(O.opacity),ut=C.isArrayOrTypedArray(O.size),Q=C.isArrayOrTypedArray(O.line.width);if(U||(j=a.isOpenSymbol(O.symbol)),U||J||nt||it||H){B.symbols=new Array(k),B.angles=new Array(k),B.colors=new Array(k),B.borderColors=new Array(k);var Z=O.symbol,G=O.angle,K=e(O,O.opacity,k),at=e(O.line,O.opacity,k);if(!Array.isArray(at[0])){var $=at;for(at=Array(k),z=0;z<k;z++)at[z]=$}if(!Array.isArray(K[0])){var X=K;for(K=Array(k),z=0;z<k;z++)K[z]=X}if(!Array.isArray(Z)){var rt=Z;for(Z=Array(k),z=0;z<k;z++)Z[z]=rt}if(!Array.isArray(G)){var et=G;for(G=Array(k),z=0;z<k;z++)G[z]=et}for(B.symbols=Z,B.angles=G,B.colors=K,B.borderColors=at,z=0;z<k;z++)U&&(j=a.isOpenSymbol(O.symbol[z])),j&&(at[z]=K[z].slice(),K[z]=K[z].slice(),K[z][3]=0);for(B.opacity=N.opacity,B.markers=new Array(k),z=0;z<k;z++)B.markers[z]=n({mx:B.symbols[z],ma:B.angles[z]},N)}else j?(B.color=i(O.color,"uint8"),B.color[3]=0,B.borderColor=i(O.color,"uint8")):(B.color=i(O.color,"uint8"),B.borderColor=i(O.line.color,"uint8")),B.opacity=N.opacity*O.opacity,B.marker=n({mx:O.symbol,ma:O.angle},N);var bt,dt=l(N,1);if(ut||Q){var Mt,gt=B.sizes=new Array(k),Lt=B.borderSizes=new Array(k),It=0;if(ut){for(z=0;z<k;z++)gt[z]=dt(O.size[z]),It+=gt[z];Mt=It/k}else for(bt=dt(O.size),z=0;z<k;z++)gt[z]=bt;if(Q)for(z=0;z<k;z++)Lt[z]=O.line.width[z];else for(bt=O.line.width,z=0;z<k;z++)Lt[z]=bt;B.sizeAvg=Mt}else B.size=dt(O&&O.size||10),B.borderSizes=dt(O.line.width);return B}function o(D,N,k){var B={};return k&&(k.marker&&k.marker.symbol?B=p(0,C.extendFlat({},N.marker,k.marker)):k.marker&&(k.marker.size&&(B.size=k.marker.size),k.marker.color&&(B.colors=k.marker.color),void 0!==k.marker.opacity&&(B.opacity=k.marker.opacity))),B}function v(D,N,k){var O={};if(!k)return O;if(k.textfont){var B={opacity:1,text:N.text,texttemplate:N.texttemplate,textposition:N.textposition,textfont:C.extendFlat({},N.textfont)};k.textfont&&C.extendFlat(B.textfont,k.textfont),O=w(D,B)}return O}function M(D,N,k){var O={capSize:2*N.width*k,lineWidth:N.thickness*k,color:N.color};return N.copy_ystyle&&(O=D.error_y),O}var b=s.SYMBOL_SDF_SIZE,L=s.SYMBOL_SIZE,x=s.SYMBOL_STROKE,S={},T=u.symbolFuncs[0](.05*L);function n(D,N){var k=D.mx;if("circle"===k)return null;var O,B,z=u.symbolNumber(k),U=u.symbolFuncs[z%100],H=!!u.symbolNoDot[z%100],J=!!u.symbolNoFill[z%100],nt=a.isDotSymbol(k);if(D.ma&&(k+="_"+D.ma),S[k])return S[k];var it=u.getMarkerAngle(D,N);return O=nt&&!H?U(1.1*L,it)+T:U(L,it),B=g(O,{w:b,h:b,viewBox:[-L,-L,L,L],stroke:J?x:-x}),S[k]=B,B||null}q.exports={style:function h(D,N){var k,O={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},B=D._context.plotGlPixelRatio;if(!0!==N.visible)return O;if(r.hasText(N)&&(O.text=w(D,N),O.textSel=v(D,N,N.selected),O.textUnsel=v(D,N,N.unselected)),r.hasMarkers(N)&&(O.marker=p(0,N),O.markerSel=o(D,N,N.selected),O.markerUnsel=o(D,N,N.unselected),!N.unselected&&C.isArrayOrTypedArray(N.marker.opacity))){var z=N.marker.opacity;for(O.markerUnsel.opacity=new Array(z.length),k=0;k<z.length;k++)O.markerUnsel.opacity[k]=c*z[k]}if(r.hasLines(N)){O.line={overlay:!0,thickness:N.line.width*B,color:N.line.color,opacity:N.opacity};var U=(s.DASHES[N.line.dash]||[1]).slice();for(k=0;k<U.length;++k)U[k]*=N.line.width*B;O.line.dashes=U}return N.error_x&&N.error_x.visible&&(O.errorX=M(N,N.error_x,B)),N.error_y&&N.error_y.visible&&(O.errorY=M(N,N.error_y,B)),!!N.fill&&"none"!==N.fill&&(O.fill={closed:!0,fill:N.fillcolor,thickness:0}),O},markerStyle:p,markerSelection:o,linePositions:function E(D,N,k){var z,U,O=k.length,B=O/2;if(r.hasLines(N)&&B)if("hv"===N.line.shape){for(z=[],U=0;U<B-1;U++)isNaN(k[2*U])||isNaN(k[2*U+1])?z.push(NaN,NaN,NaN,NaN):(z.push(k[2*U],k[2*U+1]),isNaN(k[2*U+2])||isNaN(k[2*U+3])?z.push(NaN,NaN):z.push(k[2*U+2],k[2*U+1]));z.push(k[O-2],k[O-1])}else if("hvh"===N.line.shape){for(z=[],U=0;U<B-1;U++)if(isNaN(k[2*U])||isNaN(k[2*U+1])||isNaN(k[2*U+2])||isNaN(k[2*U+3]))isNaN(k[2*U])||isNaN(k[2*U+1])?z.push(NaN,NaN):z.push(k[2*U],k[2*U+1]),z.push(NaN,NaN);else{var H=(k[2*U]+k[2*U+2])/2;z.push(k[2*U],k[2*U+1],H,k[2*U+1],H,k[2*U+3])}z.push(k[O-2],k[O-1])}else if("vhv"===N.line.shape){for(z=[],U=0;U<B-1;U++)if(isNaN(k[2*U])||isNaN(k[2*U+1])||isNaN(k[2*U+2])||isNaN(k[2*U+3]))isNaN(k[2*U])||isNaN(k[2*U+1])?z.push(NaN,NaN):z.push(k[2*U],k[2*U+1]),z.push(NaN,NaN);else{var J=(k[2*U+1]+k[2*U+3])/2;z.push(k[2*U],k[2*U+1],k[2*U],J,k[2*U+2],J)}z.push(k[O-2],k[O-1])}else if("vh"===N.line.shape){for(z=[],U=0;U<B-1;U++)isNaN(k[2*U])||isNaN(k[2*U+1])?z.push(NaN,NaN,NaN,NaN):(z.push(k[2*U],k[2*U+1]),isNaN(k[2*U+2])||isNaN(k[2*U+3])?z.push(NaN,NaN):z.push(k[2*U],k[2*U+3]));z.push(k[O-2],k[O-1])}else z=k;var nt=!1;for(U=0;U<z.length;U++)if(isNaN(z[U])){nt=!0;break}var it=nt||z.length>s.TOO_MANY_POINTS||r.hasMarkers(N)?"rect":"round";if(nt&&N.connectgaps){var ut=z[0],Q=z[1];for(U=0;U<z.length;U+=2)isNaN(z[U])||isNaN(z[U+1])?(z[U]=ut,z[U+1]=Q):(ut=z[U],Q=z[U+1])}return{join:it,positions:z}},errorBarPositions:function d(D,N,k,O,B){var z=P.getComponentMethod("errorbars","makeComputeError"),U=y.getFromId(D,N.xaxis,"x"),H=y.getFromId(D,N.yaxis,"y"),J=k.length/2,nt={};function it(ut,Q){var j=Q._id.charAt(0),Z=N["error_"+j];if(Z&&Z.visible&&("linear"===Q.type||"log"===Q.type)){for(var G=z(Z),K={x:0,y:1}[j],at={x:[0,1,2,3],y:[2,3,0,1]}[j],$=new Float64Array(4*J),X=1/0,rt=-1/0,et=0,st=0;et<J;et++,st+=4){var dt=ut[et];if(A(dt)){var bt=k[2*et+K],gt=G(dt,et),Lt=gt[0],It=gt[1];if(A(Lt)&&A(It)){var xt=dt+It;$[st+at[0]]=bt-Q.c2l(dt-Lt),$[st+at[1]]=Q.c2l(xt)-bt,$[st+at[2]]=0,$[st+at[3]]=0,X=Math.min(X,dt-Lt),rt=Math.max(rt,dt+It)}}}nt[j]={positions:k,errors:$,_bnds:[X,rt]}}}return it(O,U),it(B,H),nt},textPosition:function F(D,N,k,O){var U,B=N._length,z={};if(r.hasMarkers(N)){var H=k.font,J=k.align,nt=k.baseline;for(z.offset=new Array(B),U=0;U<B;U++){var it=O.sizes?O.sizes[U]:O.size,ut=Array.isArray(H)?H[U].size:H.size,Q=Array.isArray(J)?J.length>1?J[U]:J[0]:J,j=Array.isArray(nt)?nt.length>1?nt[U]:nt[0]:nt,G=f[j],K=it?it/.8+1:0;z.offset[U]=[f[Q]*K/ut,(-G*K-.5*G)/ut]}}return z}}},47148:function(q,W,t){"use strict";var A=t(71828),g=t(73972),i=t(68645),P=t(42341),C=t(47581),u=t(34098),y=t(67513),e=t(73927),r=t(49508),l=t(11058),a=t(28908),s=t(82410);q.exports=function(f,m,h,w){function p(T,n){return A.coerce(f,m,P,T,n)}var o=!!f.marker&&i.isOpenSymbol(f.marker.symbol),v=u.isBubble(f),M=y(f,m,w,p);if(M){e(f,m,w,p),p("xhoverformat"),p("yhoverformat");var b=M<C.PTS_LINESONLY?"lines+markers":"lines";p("text"),p("hovertext"),p("hovertemplate"),p("mode",b),u.hasLines(m)&&(p("connectgaps"),l(f,m,h,w,p),p("line.shape")),u.hasMarkers(m)&&(r(f,m,h,w,p,{noAngleRef:!0,noStandOff:!0}),p("marker.line.width",o||v?1:0)),u.hasText(m)&&(p("texttemplate"),s(f,m,w,p));var L=(m.line||{}).color,x=(m.marker||{}).color;p("fill"),"none"!==m.fill&&a(f,m,h,p);var S=g.getComponentMethod("errorbars","supplyDefaults");S(f,m,L||x||h,{axis:"y"}),S(f,m,L||x||h,{axis:"x",inherit:"y"}),A.coerceSelectionMarkerOpacity(m,p)}else m.visible=!1}},5345:function(q,W,t){"use strict";var A=t(71828),g=t(7901),i=t(37822).DESELECTDIM;q.exports={styleTextSelection:function P(C){var w,p,u=C[0],y=u.trace,e=u.t,r=e._scene,l=e.index,a=r.selectBatch[l],s=r.unselectBatch[l],c=r.textOptions[l],f=r.textSelectedOptions[l]||{},m=r.textUnselectedOptions[l]||{},h=A.extendFlat({},c);if(a.length||s.length){var o=f.color,v=m.color,M=c.color,b=Array.isArray(M);for(h.color=new Array(y._length),w=0;w<a.length;w++)h.color[p=a[w]]=o||(b?M[p]:M);for(w=0;w<s.length;w++){p=s[w];var L=b?M[p]:M;h.color[p]=v||(o?L:g.addOpacity(L,i))}}r.glText[l].update(h)}}},68101:function(q,W,t){"use strict";var A=t(8225);q.exports=function(i,P,C){var u=i.i;return"x"in i||(i.x=P._x[u]),"y"in i||(i.y=P._y[u]),A(i,P,C)}},68645:function(q,W,t){"use strict";var A=t(78232);W.isOpenSymbol=function(g){return"string"==typeof g?A.OPEN_RE.test(g):g%200>100},W.isDotSymbol=function(g){return"string"==typeof g?A.DOT_RE.test(g):g>200}},20794:function(q,W,t){"use strict";var A=t(73972),g=t(71828),i=t(34603);function C(u,y,e,r){var l=u.xa,a=u.ya,s=u.distance,c=u.dxy,f=u.index,m={pointNumber:f,x:y[f],y:e[f]};m.tx=Array.isArray(r.text)?r.text[f]:r.text,m.htx=Array.isArray(r.hovertext)?r.hovertext[f]:r.hovertext,m.data=Array.isArray(r.customdata)?r.customdata[f]:r.customdata,m.tp=Array.isArray(r.textposition)?r.textposition[f]:r.textposition;var h=r.textfont;h&&(m.ts=g.isArrayOrTypedArray(h.size)?h.size[f]:h.size,m.tc=Array.isArray(h.color)?h.color[f]:h.color,m.tf=Array.isArray(h.family)?h.family[f]:h.family);var w=r.marker;w&&(m.ms=g.isArrayOrTypedArray(w.size)?w.size[f]:w.size,m.mo=g.isArrayOrTypedArray(w.opacity)?w.opacity[f]:w.opacity,m.mx=g.isArrayOrTypedArray(w.symbol)?w.symbol[f]:w.symbol,m.ma=g.isArrayOrTypedArray(w.angle)?w.angle[f]:w.angle,m.mc=g.isArrayOrTypedArray(w.color)?w.color[f]:w.color);var p=w&&w.line;p&&(m.mlc=Array.isArray(p.color)?p.color[f]:p.color,m.mlw=g.isArrayOrTypedArray(p.width)?p.width[f]:p.width);var o=w&&w.gradient;o&&"none"!==o.type&&(m.mgt=Array.isArray(o.type)?o.type[f]:o.type,m.mgc=Array.isArray(o.color)?o.color[f]:o.color);var v=l.c2p(m.x,!0),M=a.c2p(m.y,!0),b=m.mrc||1,L=r.hoverlabel;L&&(m.hbg=Array.isArray(L.bgcolor)?L.bgcolor[f]:L.bgcolor,m.hbc=Array.isArray(L.bordercolor)?L.bordercolor[f]:L.bordercolor,m.hts=g.isArrayOrTypedArray(L.font.size)?L.font.size[f]:L.font.size,m.htc=Array.isArray(L.font.color)?L.font.color[f]:L.font.color,m.htf=Array.isArray(L.font.family)?L.font.family[f]:L.font.family,m.hnl=g.isArrayOrTypedArray(L.namelength)?L.namelength[f]:L.namelength);var x=r.hoverinfo;x&&(m.hi=Array.isArray(x)?x[f]:x);var S=r.hovertemplate;S&&(m.ht=Array.isArray(S)?S[f]:S);var T={};T[u.index]=m;var n=r._origX,E=r._origY,d=g.extendFlat({},u,{color:i(r,m),x0:v-b,x1:v+b,xLabelVal:n?n[f]:m.x,y0:M-b,y1:M+b,yLabelVal:E?E[f]:m.y,cd:T,distance:s,spikeDistance:c,hovertemplate:m.ht});return m.htx?d.text=m.htx:m.tx?d.text=m.tx:r.text&&(d.text=r.text),g.fillText(m,r,d),A.getComponentMethod("errorbars","hoverInfo")(m,r,d),d}q.exports={hoverPoints:function P(u,y,e,r){var v,l=u.cd,a=l[0].t,s=l[0].trace,c=u.xa,f=u.ya,m=a.x,h=a.y,w=c.c2p(y),p=f.c2p(e),o=u.distance;if(a.tree){var M=c.p2c(w-o),b=c.p2c(w+o),L=f.p2c(p-o),x=f.p2c(p+o);v="x"===r?a.tree.range(Math.min(M,b),Math.min(f._rl[0],f._rl[1]),Math.max(M,b),Math.max(f._rl[0],f._rl[1])):a.tree.range(Math.min(M,b),Math.min(L,x),Math.max(M,b),Math.max(L,x))}else v=a.ids;var S,T,n,E,d,F,D,N,k,O=o;if("x"===r){var B=!!s.xperiodalignment,z=!!s.yperiodalignment;for(d=0;d<v.length;d++){if(n=m[S=v[d]],F=Math.abs(c.c2p(n)-w),B){var U=c.c2p(s._xStarts[S]),H=c.c2p(s._xEnds[S]);F=w>=Math.min(U,H)&&w<=Math.max(U,H)?0:1/0}if(F<O){if(O=F,D=f.c2p(E=h[S])-p,z){var J=f.c2p(s._yStarts[S]),nt=f.c2p(s._yEnds[S]);D=p>=Math.min(J,nt)&&p<=Math.max(J,nt)?0:1/0}k=Math.sqrt(F*F+D*D),T=v[d]}}}else for(d=v.length-1;d>-1;d--)E=h[S=v[d]],F=c.c2p(n=m[S])-w,D=f.c2p(E)-p,(N=Math.sqrt(F*F+D*D))<O&&(O=k=N,T=S);return u.index=T,u.distance=O,u.dxy=k,void 0===T?[u]:[C(u,m,h,s)]},calcHover:C}},68868:function(q,W,t){"use strict";var A=t(72156);A.plot=t(26787),q.exports=A},26787:function(q,W,t){"use strict";var A=t(11870),g=t(46075),i=t(3593),P=t(42505),C=t(71828),u=t(64505).selectMode,y=t(79749),e=t(34098),r=t(68687),l=t(5345).styleTextSelection,a={};function s(f,m,h,w){var p=f._size,S=p.w*w,T=p.h*w;return[p.l*w+m.domain[0]*S,p.b*w+h.domain[0]*T,f.width*w-p.r*w-(1-m.domain[1])*S,f.height*w-p.t*w-(1-h.domain[1])*T]}(q.exports=function(m,h,w){if(w.length){var b,L,p=m._fullLayout,o=h._scene,v=h.xaxis,M=h.yaxis;if(o){if(!y(m,["ANGLE_instanced_arrays","OES_element_index_uint"],a))return void o.init();var S=o.count,T=p._glcanvas.data()[0].regl;if(r(m,h,w),o.dirty){if(!0===o.error2d&&(o.error2d=i(T)),!0===o.line2d&&(o.line2d=g(T)),!0===o.scatter2d&&(o.scatter2d=A(T)),!0===o.fill2d&&(o.fill2d=g(T)),!0===o.glText)for(o.glText=new Array(S),b=0;b<S;b++)o.glText[b]=new P(T);if(o.glText){if(S>o.glText.length){var n=S-o.glText.length;for(b=0;b<n;b++)o.glText.push(new P(T))}else S<o.glText.length&&o.glText.splice(S,o.glText.length-S).forEach(function($){$.destroy()});for(b=0;b<S;b++)o.glText[b].update(o.textOptions[b])}if(o.line2d&&(o.line2d.update(o.lineOptions),o.lineOptions=o.lineOptions.map(function($){if($&&$.positions){for(var X=$.positions,rt=0;rt<X.length&&(isNaN(X[rt])||isNaN(X[rt+1]));)rt+=2;for(var et=X.length-2;et>rt&&(isNaN(X[et])||isNaN(X[et+1]));)et-=2;$.positions=X.slice(rt,et+2)}return $}),o.line2d.update(o.lineOptions)),o.error2d){var F=(o.errorXOptions||[]).concat(o.errorYOptions||[]);o.error2d.update(F)}o.scatter2d&&o.scatter2d.update(o.markerOptions),o.fillOrder=C.repeat(null,S),o.fill2d&&(o.fillOptions=o.fillOptions.map(function($,X){var rt=w[X];if($&&rt&&rt[0]&&rt[0].trace){var gt,Lt,et=rt[0],st=et.trace,dt=et.t,bt=o.lineOptions[X],It=[];st._ownfill&&It.push(X),st._nexttrace&&It.push(X+1),It.length&&(o.fillOrder[X]=It);var At,Gt,Mt=[],xt=bt&&bt.positions||dt.positions;if("tozeroy"===st.fill){for(At=0;At<xt.length&&isNaN(xt[At+1]);)At+=2;for(Gt=xt.length-2;Gt>At&&isNaN(xt[Gt+1]);)Gt-=2;0!==xt[At+1]&&(Mt=[xt[At],0]),Mt=Mt.concat(xt.slice(At,Gt+2)),0!==xt[Gt+1]&&(Mt=Mt.concat([xt[Gt],0]))}else if("tozerox"===st.fill){for(At=0;At<xt.length&&isNaN(xt[At]);)At+=2;for(Gt=xt.length-2;Gt>At&&isNaN(xt[Gt]);)Gt-=2;0!==xt[At]&&(Mt=[0,xt[At+1]]),Mt=Mt.concat(xt.slice(At,Gt+2)),0!==xt[Gt]&&(Mt=Mt.concat([0,xt[Gt+1]]))}else if("toself"===st.fill||"tonext"===st.fill){for(Mt=[],gt=0,$.splitNull=!0,Lt=0;Lt<xt.length;Lt+=2)(isNaN(xt[Lt])||isNaN(xt[Lt+1]))&&((Mt=Mt.concat(xt.slice(gt,Lt))).push(xt[gt],xt[gt+1]),Mt.push(null,null),gt=Lt+2);Mt=Mt.concat(xt.slice(gt)),gt&&Mt.push(xt[gt],xt[gt+1])}else{var Wt=st._nexttrace;if(Wt){var Pt=o.lineOptions[X+1];if(Pt){var Vt=Pt.positions;if("tonexty"===st.fill){for(Mt=xt.slice(),X=Math.floor(Vt.length/2);X--;){var te=Vt[2*X],Qt=Vt[2*X+1];isNaN(te)||isNaN(Qt)||Mt.push(te,Qt)}$.fill=Wt.fillcolor}}}}if(st._prevtrace&&"tonext"===st._prevtrace.fill){var Bt=o.lineOptions[X-1].positions,Ot=Mt.length/2,qt=[gt=Ot];for(Lt=0;Lt<Bt.length;Lt+=2)(isNaN(Bt[Lt])||isNaN(Bt[Lt+1]))&&(qt.push(Lt/2+Ot+1),gt=Lt+2);Mt=Mt.concat(Bt),$.hole=qt}return $.fillmode=st.fill,$.opacity=st.opacity,$.positions=Mt,$}}),o.fill2d.update(o.fillOptions))}var N=u(p.dragmode),k=p.clickmode.indexOf("select")>-1;for(b=0;b<S;b++){var O=w[b][0],B=O.trace,z=O.t,U=z.index,H=B._length,J=z.x,nt=z.y;if(B.selectedpoints||N||k){if(N||(N=!0),B.selectedpoints){var it=o.selectBatch[U]=C.selIndices2selPoints(B),ut={};for(L=0;L<it.length;L++)ut[it[L]]=1;var Q=[];for(L=0;L<H;L++)ut[L]||Q.push(L);o.unselectBatch[U]=Q}var j=z.xpx=new Array(H),Z=z.ypx=new Array(H);for(L=0;L<H;L++)j[L]=v.c2p(J[L]),Z[L]=M.c2p(nt[L])}else z.xpx=z.ypx=null}if(N){if(o.select2d||(o.select2d=A(p._glcanvas.data()[1].regl)),o.scatter2d){var G=new Array(S);for(b=0;b<S;b++)G[b]=o.selectBatch[b].length||o.unselectBatch[b].length?o.markerUnselectedOptions[b]:{};o.scatter2d.update(G)}o.select2d&&(o.select2d.update(o.markerOptions),o.select2d.update(o.markerSelectedOptions)),o.glText&&w.forEach(function($){e.hasText((($||[])[0]||{}).trace||{})&&l($)})}else o.scatter2d&&o.scatter2d.update(o.markerOptions);var K={viewport:s(p,v,M,m._context.plotGlPixelRatio),range:[(v._rl||v.range)[0],(M._rl||M.range)[0],(v._rl||v.range)[1],(M._rl||M.range)[1]]},at=C.repeat(K,o.count);o.fill2d&&o.fill2d.update(at),o.line2d&&o.line2d.update(at),o.error2d&&o.error2d.update(at.concat(at)),o.scatter2d&&o.scatter2d.update(at),o.select2d&&o.select2d.update(at),o.glText&&o.glText.forEach(function($){$.update(K)})}}}).reglPrecompiled=a},38967:function(q,W,t){"use strict";var A=t(71828);q.exports=function(i,P){var C=P._scene,u={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},y={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return P._scene||((C=P._scene={}).init=function(){A.extendFlat(C,y,u)},C.init(),C.update=function(r){var l=A.repeat(r,C.count);if(C.fill2d&&C.fill2d.update(l),C.scatter2d&&C.scatter2d.update(l),C.line2d&&C.line2d.update(l),C.error2d&&C.error2d.update(l.concat(l)),C.select2d&&C.select2d.update(l),C.glText)for(var a=0;a<C.count;a++)C.glText[a].update(r)},C.draw=function(){for(var r=C.count,l=C.fill2d,a=C.error2d,s=C.line2d,c=C.scatter2d,f=C.glText,m=C.select2d,h=C.selectBatch,w=C.unselectBatch,p=0;p<r;p++){if(l&&C.fillOrder[p]&&l.draw(C.fillOrder[p]),s&&C.lineOptions[p]&&s.draw(p),a&&(C.errorXOptions[p]&&a.draw(p),C.errorYOptions[p]&&a.draw(p+r)),c&&C.markerOptions[p])if(w[p].length){var o=A.repeat([],C.count);o[p]=w[p],c.draw(o)}else h[p].length||c.draw(p);f[p]&&C.textOptions[p]&&f[p].render()}m&&m.draw(h),C.dirty=!1},C.destroy=function(){C.fill2d&&C.fill2d.destroy&&C.fill2d.destroy(),C.scatter2d&&C.scatter2d.destroy&&C.scatter2d.destroy(),C.error2d&&C.error2d.destroy&&C.error2d.destroy(),C.line2d&&C.line2d.destroy&&C.line2d.destroy(),C.select2d&&C.select2d.destroy&&C.select2d.destroy(),C.glText&&C.glText.forEach(function(r){r.destroy&&r.destroy()}),C.lineOptions=null,C.fillOptions=null,C.markerOptions=null,C.markerSelectedOptions=null,C.markerUnselectedOptions=null,C.errorXOptions=null,C.errorYOptions=null,C.textOptions=null,C.textSelectedOptions=null,C.textUnselectedOptions=null,C.selectBatch=null,C.unselectBatch=null,P._scene=null}),C.dirty||A.extendFlat(C,u),C}},58147:function(q,W,t){"use strict";var A=t(34098),g=t(5345).styleTextSelection;q.exports=function(P,C){var u=P.cd,y=P.xaxis,e=P.yaxis,r=[],l=u[0].trace,a=u[0].t,s=l._length,c=a.x,f=a.y,m=a._scene,h=a.index;if(!m)return r;var w=A.hasText(l),p=A.hasMarkers(l);if(!0!==l.visible||!p&&!w)return r;var v=[],M=[];if(!1!==C&&!C.degenerate)for(var b=0;b<s;b++)C.contains([a.xpx[b],a.ypx[b]],!1,b,P)?(v.push(b),r.push({pointNumber:b,x:y.c2d(c[b]),y:e.c2d(f[b])})):M.push(b);if(p){var L=m.scatter2d;if(v.length||M.length){if(!m.selectBatch[h].length&&!m.unselectBatch[h].length){var S=new Array(m.count);S[h]=m.markerUnselectedOptions[h],L.update.apply(L,S)}}else{var x=new Array(m.count);x[h]=m.markerOptions[h],L.update.apply(L,x)}}return m.selectBatch[h]=v,m.unselectBatch[h]=M,w&&g(u),r}},99181:function(q,W,t){"use strict";var A=t(5386).fF,g=t(5386).si,i=t(19316),P=t(82196),C=t(23585),u=t(9012),y=t(50693),e=t(1426).extendFlat,r=t(30962).overrideAll,l=t(23585),a=i.line,s=i.marker;q.exports=r({lon:i.lon,lat:i.lat,cluster:{enabled:{valType:"boolean"},maxzoom:e({},l.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:e({},s.opacity,{dflt:1})},mode:e({},P.mode,{dflt:"markers"}),text:e({},P.text,{}),texttemplate:g({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:e({},P.hovertext,{}),line:{color:a.color,width:a.width},connectgaps:P.connectgaps,marker:e({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:s.opacity,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode},y("marker")),fill:i.fill,fillcolor:P.fillcolor,textfont:C.layers.symbol.textfont,textposition:C.layers.symbol.textposition,below:{valType:"string"},selected:{marker:P.selected.marker},unselected:{marker:P.unselected.marker},hoverinfo:e({},u.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:A()},"calc","nested")},15790:function(q,W,t){"use strict";var A=t(92770),g=t(71828),i=t(50606).BADNUM,P=t(18214),C=t(21081),u=t(91424),y=t(39984),e=t(34098),r=t(13056),l=t(23469).appendArrayPointValue,a=t(63893).NEWLINES,s=t(63893).BR_TAG_ALL;function c(v){return{type:v,geojson:P.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function h(v,M){return g.isArrayOrTypedArray(v)?M?function(b){return A(v[b])?+v[b]:0}:function(b){return v[b]}:v?function(){return v}:w}function w(){return""}function p(v){return v[0]===i}function o(v,M){var b;if(g.isArrayOrTypedArray(v)&&g.isArrayOrTypedArray(M)){b=["step",["get","point_count"],v[0]];for(var L=1;L<v.length;L++)b.push(M[L-1],v[L])}else b=v;return b}q.exports=function(M,b){var U,L=b[0].trace,x=!0===L.visible&&0!==L._length,S="none"!==L.fill,T=e.hasLines(L),n=e.hasMarkers(L),E=e.hasText(L),d=n&&"circle"===L.marker.symbol,F=n&&"circle"!==L.marker.symbol,D=L.cluster&&L.cluster.enabled,N=c("fill"),k=c("line"),O=c("circle"),B=c("symbol"),z={fill:N,line:k,circle:O,symbol:B};if(!x)return z;if((S||T)&&(U=P.calcTraceToLineCoords(b)),S&&(N.geojson=P.makePolygon(U),N.layout.visibility="visible",g.extendFlat(N.paint,{"fill-color":L.fillcolor})),T&&(k.geojson=P.makeLine(U),k.layout.visibility="visible",g.extendFlat(k.paint,{"line-width":L.line.width,"line-color":L.line.color,"line-opacity":L.opacity})),d){var H=function f(v){var n,F,D,N,M=v[0].trace,b=M.marker,L=M.selectedpoints,x=g.isArrayOrTypedArray(b.color),S=g.isArrayOrTypedArray(b.size),T=g.isArrayOrTypedArray(b.opacity);function E(J){return M.opacity*J}x&&(F=C.hasColorscale(M,"marker")?C.makeColorScaleFuncFromTrace(b):g.identity),S&&(D=y(M)),T&&(N=function(J){return E(A(J)?+g.constrain(J,0,1):0)});var U,k=[];for(n=0;n<v.length;n++){var O=v[n],B=O.lonlat;if(!p(B)){var z={};F&&(z.mcc=O.mcc=F(O.mc)),D&&(z.mrc=O.mrc=D(O.ms)),N&&(z.mo=N(O.mo)),L&&(z.selected=O.selected||0),k.push({type:"Feature",id:n+1,geometry:{type:"Point",coordinates:B},properties:z})}}if(L)for(U=u.makeSelectedPointStyleFns(M),n=0;n<k.length;n++){var H=k[n].properties;U.selectedOpacityFn&&(H.mo=E(U.selectedOpacityFn(H))),U.selectedColorFn&&(H.mcc=U.selectedColorFn(H)),U.selectedSizeFn&&(H.mrc=U.selectedSizeFn(H))}return{geojson:{type:"FeatureCollection",features:k},mcc:x||U&&U.selectedColorFn?{type:"identity",property:"mcc"}:b.color,mrc:S||U&&U.selectedSizeFn?{type:"identity",property:"mrc"}:function d(J){return J/2}(b.size),mo:T||U&&U.selectedOpacityFn?{type:"identity",property:"mo"}:E(b.opacity)}}(b);O.geojson=H.geojson,O.layout.visibility="visible",D&&(O.filter=["!",["has","point_count"]],z.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":o(L.cluster.color,L.cluster.step),"circle-radius":o(L.cluster.size,L.cluster.step),"circle-opacity":o(L.cluster.opacity,L.cluster.step)}},z.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),g.extendFlat(O.paint,{"circle-color":H.mcc,"circle-radius":H.mrc,"circle-opacity":H.mo})}if(d&&D&&(O.filter=["!",["has","point_count"]]),(F||E)&&(B.geojson=function m(v,M){for(var b=M._fullLayout,L=v[0].trace,x=L.marker||{},S=x.symbol,T=x.angle,n="circle"!==S?h(S):w,E="auto"!==T?h(T,!0):w,d=e.hasText(L)?h(L.text):w,F=[],D=0;D<v.length;D++){var N=v[D];if(!p(N.lonlat)){var O,k=L.texttemplate;if(k){var B=Array.isArray(k)?k[D]||"":k,z=L._module.formatLabels(N,L,b),U={};l(U,L,N.i),O=g.texttemplateString(B,z,b._d3locale,U,N,L._meta||{})}else O=d(D);O&&(O=O.replace(a,"").replace(s,"\n")),F.push({type:"Feature",geometry:{type:"Point",coordinates:N.lonlat},properties:{symbol:n(D),angle:E(D),text:O}})}}return{type:"FeatureCollection",features:F}}(b,M),g.extendFlat(B.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),F&&(g.extendFlat(B.layout,{"icon-size":L.marker.size/10}),"angle"in L.marker&&"auto"!==L.marker.angle&&g.extendFlat(B.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),B.layout["icon-allow-overlap"]=L.marker.allowoverlap,g.extendFlat(B.paint,{"icon-opacity":L.opacity*L.marker.opacity,"icon-color":L.marker.color})),E)){var nt=r(L.textposition,(L.marker||{}).size);g.extendFlat(B.layout,{"text-size":L.textfont.size,"text-anchor":nt.anchor,"text-offset":nt.offset,"text-font":L.textfont.family.split(", ")}),g.extendFlat(B.paint,{"text-color":L.textfont.color,"text-opacity":L.opacity})}return z}},76645:function(q,W,t){"use strict";var A=t(71828),g=t(34098),i=t(49508),P=t(11058),C=t(82410),u=t(28908),y=t(99181),e=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extra Bold Italic","Open Sans Extra Bold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];q.exports=function(a,s,c,f){function m(S,T){return A.coerce(a,s,y,S,T)}function h(S,T){return A.coerce2(a,s,y,S,T)}if(function r(l,a,s){var c=s("lon")||[],f=s("lat")||[],m=Math.min(c.length,f.length);return a._length=m,m}(0,s,m)){if(m("text"),m("texttemplate"),m("hovertext"),m("hovertemplate"),m("mode"),m("below"),g.hasLines(s)&&(P(a,s,c,f,m,{noDash:!0}),m("connectgaps")),g.hasMarkers(s)){i(a,s,c,f,m,{noLine:!0,noAngle:!0}),m("marker.allowoverlap"),m("marker.angle");var p=s.marker;"circle"!==p.symbol&&(A.isArrayOrTypedArray(p.size)&&(p.size=p.size[0]),A.isArrayOrTypedArray(p.color)&&(p.color=p.color[0]))}var o=h("cluster.maxzoom"),v=h("cluster.step"),M=h("cluster.color",s.marker&&s.marker.color||c),b=h("cluster.size"),L=h("cluster.opacity");m("cluster.enabled",!1!==o||!1!==v||!1!==M||!1!==b||!1!==L),g.hasText(s)&&C(a,s,f,m,{noSelect:!0,font:{family:-1!==e.indexOf(f.font.family)?f.font.family:"Open Sans Regular",size:f.font.size,color:f.font.color}}),m("fill"),"none"!==s.fill&&u(a,s,c,m),A.coerceSelectionMarkerOpacity(s,m)}else s.visible=!1}},53353:function(q){"use strict";q.exports=function(t,A){return t.lon=A.lon,t.lat=A.lat,t}},15636:function(q,W,t){"use strict";var A=t(89298);q.exports=function(i,P,C){var u={},e=C[P.subplot]._subplot.mockAxis,r=i.lonlat;return u.lonLabel=A.tickText(e,e.c2l(r[0]),!0).text,u.latLabel=A.tickText(e,e.c2l(r[1]),!0).text,u}},28178:function(q,W,t){"use strict";var A=t(30211),g=t(71828),i=t(34603),P=g.fillText,C=t(50606).BADNUM,u=t(77734).traceLayerPrefix;function e(r,l,a){if(!r.hovertemplate){var c=(l.hi||r.hoverinfo).split("+"),f=-1!==c.indexOf("all"),m=-1!==c.indexOf("lon"),h=-1!==c.indexOf("lat"),w=l.lonlat,p=[];return f||m&&h?p.push("("+o(w[1])+", "+o(w[0])+")"):m?p.push(a.lon+o(w[0])):h&&p.push(a.lat+o(w[1])),(f||-1!==c.indexOf("text"))&&P(l,r,p),p.join("<br>")}function o(v){return v+"\xb0"}}q.exports={hoverPoints:function y(r,l,a){var s=r.cd,c=s[0].trace,f=r.xa,m=r.ya,h=r.subplot,w=[],o=c.cluster&&c.cluster.enabled;if(o){var v=h.map.queryRenderedFeatures(null,{layers:[u+c.uid+"-circle"]});w=v.map(function(k){return k.id})}var b=360*(l>=0?Math.floor((l+180)/360):Math.ceil((l-180)/360)),L=l-b;if(A.getClosest(s,function x(k){var O=k.lonlat;if(O[0]===C||o&&-1===w.indexOf(k.i+1))return 1/0;var B=g.modHalf(O[0],360),z=O[1],U=h.project([B,z]),H=U.x-f.c2p([L,z]),J=U.y-m.c2p([B,a]),nt=Math.max(3,k.mrc||0);return Math.max(Math.sqrt(H*H+J*J)-nt,1-3/nt)},r),!1!==r.index){var S=s[r.index],T=S.lonlat,n=[g.modHalf(T[0],360)+b,T[1]],E=f.c2p(n),d=m.c2p(n),F=S.mrc||1;r.x0=E-F,r.x1=E+F,r.y0=d-F,r.y1=d+F;var D={};D[c.subplot]={_subplot:h};var N=c._module.formatLabels(S,c,D);return r.lonLabel=N.lonLabel,r.latLabel=N.latLabel,r.color=i(c,S),r.extraText=e(c,S,s[0].t.labels),r.hovertemplate=c.hovertemplate,[r]}},getExtraText:e}},20467:function(q,W,t){"use strict";q.exports={attributes:t(99181),supplyDefaults:t(76645),colorbar:t(4898),formatLabels:t(15636),calc:t(84622),plot:t(86951),hoverPoints:t(28178).hoverPoints,eventData:t(53353),selectPoints:t(86387),styleOnSelect:function(A,g){g&&g[0].trace._glTrace.update(g)},moduleType:"trace",name:"scattermapbox",basePlotModule:t(50101),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},86951:function(q,W,t){"use strict";var A=t(71828),g=t(15790),i=t(77734).traceLayerPrefix,P={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function C(y,e,r,l){this.type="scattermapbox",this.subplot=y,this.uid=e,this.clusterEnabled=r,this.isHidden=l,this.sourceIds={fill:"source-"+e+"-fill",line:"source-"+e+"-line",circle:"source-"+e+"-circle",symbol:"source-"+e+"-symbol",cluster:"source-"+e+"-circle",clusterCount:"source-"+e+"-circle"},this.layerIds={fill:i+e+"-fill",line:i+e+"-line",circle:i+e+"-circle",symbol:i+e+"-symbol",cluster:i+e+"-cluster",clusterCount:i+e+"-cluster-count"},this.below=null}var u=C.prototype;u.addSource=function(y,e,r){var l={type:"geojson",data:e.geojson};r&&r.enabled&&A.extendFlat(l,{cluster:!0,clusterMaxZoom:r.maxzoom});var a=this.subplot.map.getSource(this.sourceIds[y]);a?a.setData(e.geojson):this.subplot.map.addSource(this.sourceIds[y],l)},u.setSourceData=function(y,e){this.subplot.map.getSource(this.sourceIds[y]).setData(e.geojson)},u.addLayer=function(y,e,r){var l={type:e.type,id:this.layerIds[y],source:this.sourceIds[y],layout:e.layout,paint:e.paint};e.filter&&(l.filter=e.filter);for(var s,a=this.layerIds[y],c=this.subplot.getMapLayers(),f=0;f<c.length;f++)if(c[f].id===a){s=!0;break}s?(this.subplot.setOptions(a,"setLayoutProperty",l.layout),"visible"===l.layout.visibility&&this.subplot.setOptions(a,"setPaintProperty",l.paint)):this.subplot.addLayer(l,r)},u.update=function(e){var r=e[0].trace,l=this.subplot,a=l.map,s=g(l.gd,e),c=l.belowLookup["trace-"+this.uid],f=!(!r.cluster||!r.cluster.enabled),m=!!this.clusterEnabled,h=this;function M(T){m?function p(T){for(var n=P.cluster,E=n.length-1;E>=0;E--)a.removeLayer(h.layerIds[n[E]]);T||a.removeSource(h.sourceIds.circle)}(T):function v(T){for(var n=P.nonCluster,E=n.length-1;E>=0;E--){var d=n[E];a.removeLayer(h.layerIds[d]),T||a.removeSource(h.sourceIds[d])}}(T)}function b(T){f?function w(T){T||h.addSource("circle",s.circle,r.cluster);for(var n=P.cluster,E=0;E<n.length;E++){var d=n[E];h.addLayer(d,s[d],c)}}(T):function o(T){for(var n=P.nonCluster,E=0;E<n.length;E++){var d=n[E],F=s[d];T||h.addSource(d,F),h.addLayer(d,F,c)}}(T)}var x=this.isHidden,S=!0!==r.visible;S?x||M():x?S||b():m!==f?(M(),b()):(this.below!==c&&(M(!0),b(!0)),function L(){for(var T=f?P.cluster:P.nonCluster,n=0;n<T.length;n++){var E=T[n],d=s[E];!d||(l.setOptions(h.layerIds[E],"setLayoutProperty",d.layout),"visible"===d.layout.visibility&&("cluster"!==E&&h.setSourceData(E,d),l.setOptions(h.layerIds[E],"setPaintProperty",d.paint)))}}()),this.clusterEnabled=f,this.isHidden=S,this.below=c,e[0].trace._glTrace=this},u.dispose=function(){for(var e=this.subplot.map,r=this.clusterEnabled?P.cluster:P.nonCluster,l=r.length-1;l>=0;l--){var a=r[l];e.removeLayer(this.layerIds[a]),e.removeSource(this.sourceIds[a])}},q.exports=function(e,r){var h,w,p,l=r[0].trace,a=l.cluster&&l.cluster.enabled,c=new C(e,l.uid,a,!0!==l.visible),f=g(e.gd,r),m=c.below=e.belowLookup["trace-"+l.uid];if(a)for(c.addSource("circle",f.circle,l.cluster),h=0;h<P.cluster.length;h++)c.addLayer(w=P.cluster[h],p=f[w],m);else for(h=0;h<P.nonCluster.length;h++)c.addSource(w=P.nonCluster[h],p=f[w],l.cluster),c.addLayer(w,p,m);return r[0].trace._glTrace=c,c}},86387:function(q,W,t){"use strict";var A=t(71828),g=t(34098),i=t(50606).BADNUM;q.exports=function(C,u){var s,y=C.cd,e=C.xaxis,r=C.yaxis,l=[];if(!g.hasMarkers(y[0].trace))return[];if(!1===u)for(s=0;s<y.length;s++)y[s].selected=0;else for(s=0;s<y.length;s++){var c=y[s],f=c.lonlat;if(f[0]!==i){var m=[A.modHalf(f[0],360),f[1]],h=[e.c2p(m),r.c2p(m)];u.contains(h,null,s,C)?(l.push({pointNumber:s,lon:f[0],lat:f[1]}),c.selected=1):c.selected=0}}return l}},81245:function(q,W,t){"use strict";var A=t(5386).fF,g=t(5386).si,i=t(1426).extendFlat,P=t(82196),C=t(9012),u=P.line;q.exports={mode:P.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:P.text,texttemplate:g({editType:"plot"},{keys:["r","theta","text"]}),hovertext:P.hovertext,line:{color:u.color,width:u.width,dash:u.dash,backoff:u.backoff,shape:i({},u.shape,{values:["linear","spline"]}),smoothing:u.smoothing,editType:"calc"},connectgaps:P.connectgaps,marker:P.marker,cliponaxis:i({},P.cliponaxis,{dflt:!1}),textposition:P.textposition,textfont:P.textfont,fill:i({},P.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:P.fillcolor,hoverinfo:i({},C.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:P.hoveron,hovertemplate:A(),selected:P.selected,unselected:P.unselected}},26442:function(q,W,t){"use strict";var A=t(92770),g=t(50606).BADNUM,i=t(89298),P=t(36922),C=t(75225),u=t(66279),y=t(47761).calcMarkerSize;q.exports=function(r,l){for(var a=r._fullLayout,s=l.subplot,c=a[s].radialaxis,f=a[s].angularaxis,m=c.makeCalcdata(l,"r"),h=f.makeCalcdata(l,"theta"),w=l._length,p=new Array(w),o=0;o<w;o++){var v=m[o],M=h[o],b=p[o]={};A(v)&&A(M)?(b.r=v,b.theta=M):b.r=g}var L=y(l,w);return l._extremes.x=i.findExtremes(c,m,{ppad:L}),P(r,l),C(p,l),u(p,l),p}},22184:function(q,W,t){"use strict";var A=t(71828),g=t(34098),i=t(49508),P=t(11058),C=t(94039),u=t(82410),y=t(28908),e=t(47581).PTS_LINESONLY,r=t(81245);function a(s,c,f,m){var p,h=m("r"),w=m("theta");if(h)w?p=Math.min(h.length,w.length):(p=h.length,m("theta0"),m("dtheta"));else{if(!w)return 0;p=c.theta.length,m("r0"),m("dr")}return c._length=p,p}q.exports={handleRThetaDefaults:a,supplyDefaults:function l(s,c,f,m){function h(o,v){return A.coerce(s,c,r,o,v)}var w=a(0,c,0,h);if(w){h("thetaunit"),h("mode",w<e?"lines+markers":"lines"),h("text"),h("hovertext"),"fills"!==c.hoveron&&h("hovertemplate"),g.hasLines(c)&&(P(s,c,f,m,h,{backoff:!0}),C(s,c,h),h("connectgaps")),g.hasMarkers(c)&&i(s,c,f,m,h,{gradient:!0}),g.hasText(c)&&(h("texttemplate"),u(s,c,m,h));var p=[];(g.hasMarkers(c)||g.hasText(c))&&(h("cliponaxis"),h("marker.maxdisplayed"),p.push("points")),h("fill"),"none"!==c.fill&&(y(s,c,f,h),g.hasLines(c)||C(s,c,h)),("tonext"===c.fill||"toself"===c.fill)&&p.push("fills"),h("hoveron",p.join("+")||"points"),A.coerceSelectionMarkerOpacity(c,h)}else c.visible=!1}}},98608:function(q,W,t){"use strict";var A=t(71828),g=t(89298);q.exports=function(P,C,u){var r,l,y={},e=u[C.subplot]._subplot;e?(r=e.radialAxis,l=e.angularAxis):(r=(e=u[C.subplot]).radialaxis,l=e.angularaxis);var a=r.c2l(P.r);y.rLabel=g.tickText(r,a,!0).text;var s="degrees"===l.thetaunit?A.rad2deg(P.theta):P.theta;return y.thetaLabel=g.tickText(l,s,!0).text,y}},59150:function(q,W,t){"use strict";var A=t(33720);function i(P,C,u,y){var e=u.radialAxis,r=u.angularAxis;e._hovertitle="r",r._hovertitle="\u03b8";var l={};l[C.subplot]={_subplot:u};var a=C._module.formatLabels(P,C,l);y.rLabel=a.rLabel,y.thetaLabel=a.thetaLabel;var c=[];function f(h,w){c.push(h._hovertitle+": "+w)}if(!C.hovertemplate){var m=(P.hi||C.hoverinfo).split("+");-1!==m.indexOf("all")&&(m=["r","theta","text"]),-1!==m.indexOf("r")&&f(e,y.rLabel),-1!==m.indexOf("theta")&&f(r,y.thetaLabel),-1!==m.indexOf("text")&&y.text&&(c.push(y.text),delete y.text),y.extraText=c.join("<br>")}}q.exports={hoverPoints:function g(P,C,u,y){var e=A(P,C,u,y);if(e&&!1!==e[0].index){var r=e[0];if(void 0===r.index)return e;var l=P.subplot,a=r.cd[r.index],s=r.trace;if(l.isPtInside(a))return r.xLabelVal=void 0,r.yLabelVal=void 0,i(a,s,l,r),r.hovertemplate=s.hovertemplate,e}},makeHoverPointText:i}},91271:function(q,W,t){"use strict";q.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:t(23580),categories:["polar","symbols","showLegend","scatter-like"],attributes:t(81245),supplyDefaults:t(22184).supplyDefaults,colorbar:t(4898),formatLabels:t(98608),calc:t(26442),plot:t(45162),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(59150).hoverPoints,selectPoints:t(98002),meta:{}}},45162:function(q,W,t){"use strict";var A=t(32663),g=t(50606).BADNUM;q.exports=function(P,C,u){for(var y=C.layers.frontplot.select("g.scatterlayer"),e=C.xaxis,r=C.yaxis,l={xaxis:e,yaxis:r,plot:C.framework,layerClipId:C._hasClipOnAxisFalse?C.clipIds.forTraces:null},a=C.radialAxis,s=C.angularAxis,c=0;c<u.length;c++)for(var f=u[c],m=0;m<f.length;m++){0===m&&(f[0].trace._xA=e,f[0].trace._yA=r);var h=f[m],w=h.r;if(w===g)h.x=h.y=g;else{var p=a.c2g(w),o=s.c2g(h.theta);h.x=p*Math.cos(o),h.y=p*Math.sin(o)}}A(P,l,u,y)}},53286:function(q,W,t){"use strict";var A=t(81245),g=t(42341),i=t(5386).si;q.exports={mode:A.mode,r:A.r,theta:A.theta,r0:A.r0,dr:A.dr,theta0:A.theta0,dtheta:A.dtheta,thetaunit:A.thetaunit,text:A.text,texttemplate:i({editType:"plot"},{keys:["r","theta","text"]}),hovertext:A.hovertext,hovertemplate:A.hovertemplate,line:g.line,connectgaps:g.connectgaps,marker:g.marker,fill:g.fill,fillcolor:g.fillcolor,textposition:g.textposition,textfont:g.textfont,hoverinfo:A.hoverinfo,selected:A.selected,unselected:A.unselected}},65746:function(q,W,t){"use strict";q.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:t(23580),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:t(53286),supplyDefaults:t(75485),colorbar:t(4898),formatLabels:t(46255),calc:t(37499),hoverPoints:t(29347).hoverPoints,selectPoints:t(58147),meta:{}}},37499:function(q,W,t){"use strict";var A=t(36922),g=t(47761).calcMarkerSize,i=t(19635),P=t(89298),C=t(78232).TOO_MANY_POINTS;q.exports=function(y,e){var r=y._fullLayout,l=e.subplot,a=r[l].radialaxis,s=r[l].angularaxis,c=e._r=a.makeCalcdata(e,"r"),f=e._theta=s.makeCalcdata(e,"theta"),m=e._length,h={};m<c.length&&(c=c.slice(0,m)),m<f.length&&(f=f.slice(0,m)),h.r=c,h.theta=f,A(y,e);var p,w=h.opts=i.style(y,e);return m<C?p=g(e,m):w.marker&&(p=2*(w.marker.sizeAvg||Math.max(w.marker.size,3))),e._extremes.x=P.findExtremes(a,c,{ppad:p}),[{x:!1,y:!1,t:h,trace:e}]}},75485:function(q,W,t){"use strict";var A=t(71828),g=t(34098),i=t(22184).handleRThetaDefaults,P=t(49508),C=t(11058),u=t(82410),y=t(28908),e=t(47581).PTS_LINESONLY,r=t(53286);q.exports=function(a,s,c,f){function m(w,p){return A.coerce(a,s,r,w,p)}var h=i(a,s,f,m);h?(m("thetaunit"),m("mode",h<e?"lines+markers":"lines"),m("text"),m("hovertext"),"fills"!==s.hoveron&&m("hovertemplate"),g.hasLines(s)&&(C(a,s,c,f,m),m("connectgaps")),g.hasMarkers(s)&&P(a,s,c,f,m,{noAngleRef:!0,noStandOff:!0}),g.hasText(s)&&(m("texttemplate"),u(a,s,f,m)),m("fill"),"none"!==s.fill&&y(a,s,c,m),A.coerceSelectionMarkerOpacity(s,m)):s.visible=!1}},46255:function(q,W,t){"use strict";var A=t(98608);q.exports=function(i,P,C){var u=i.i;return"r"in i||(i.r=P._r[u]),"theta"in i||(i.theta=P._theta[u]),A(i,P,C)}},29347:function(q,W,t){"use strict";var A=t(20794),g=t(59150).makeHoverPointText;q.exports={hoverPoints:function i(P,C,u,y){var r=P.cd[0].t,l=r.r,a=r.theta,s=A.hoverPoints(P,C,u,y);if(s&&!1!==s[0].index){var c=s[0];if(void 0===c.index)return s;var f=P.subplot,m=c.cd[c.index],h=c.trace;if(m.r=l[c.index],m.theta=a[c.index],f.isPtInside(m))return c.xLabelVal=void 0,c.yLabelVal=void 0,g(m,h,f,c),s}}}},21461:function(q,W,t){"use strict";var A=t(65746);A.plot=t(49741),q.exports=A},49741:function(q,W,t){"use strict";var A=t(88294),g=t(92770),i=t(26787),P=t(38967),C=t(19635),u=t(71828),y=t(78232).TOO_MANY_POINTS;q.exports=function(l,a,s){if(s.length){var c=a.radialAxis,f=a.angularAxis,m=P(l,a);return s.forEach(function(h){if(h&&h[0]&&h[0].trace){var x,w=h[0],p=w.trace,o=w.t,v=p._length,M=o.r,b=o.theta,L=o.opts,S=M.slice(),T=b.slice();for(x=0;x<M.length;x++)a.isPtInside({r:M[x],theta:b[x]})||(S[x]=NaN,T[x]=NaN);var n=new Array(2*v),E=Array(v),d=Array(v);for(x=0;x<v;x++){var D,N,F=S[x];if(g(F)){var k=c.c2g(F),O=f.c2g(T[x],p.thetaunit);D=k*Math.cos(O),N=k*Math.sin(O)}else D=N=NaN;E[x]=n[2*x]=D,d[x]=n[2*x+1]=N}o.tree=A(n),L.marker&&v>=y&&(L.marker.cluster=o.tree),L.marker&&(L.markerSel.positions=L.markerUnsel.positions=L.marker.positions=n),L.line&&n.length>1&&u.extendFlat(L.line,C.linePositions(l,p,n)),L.text&&(u.extendFlat(L.text,{positions:n},C.textPosition(l,p,L.text,L.marker)),u.extendFlat(L.textSel,{positions:n},C.textPosition(l,p,L.text,L.markerSel)),u.extendFlat(L.textUnsel,{positions:n},C.textPosition(l,p,L.text,L.markerUnsel))),L.fill&&!m.fill2d&&(m.fill2d=!0),L.marker&&!m.scatter2d&&(m.scatter2d=!0),L.line&&!m.line2d&&(m.line2d=!0),L.text&&!m.glText&&(m.glText=!0),m.lineOptions.push(L.line),m.fillOptions.push(L.fill),m.markerOptions.push(L.marker),m.markerSelectedOptions.push(L.markerSel),m.markerUnselectedOptions.push(L.markerUnsel),m.textOptions.push(L.text),m.textSelectedOptions.push(L.textSel),m.textUnselectedOptions.push(L.textUnsel),m.selectBatch.push([]),m.unselectBatch.push([]),o.x=E,o.y=d,o.rawx=E,o.rawy=d,o.r=M,o.theta=b,o.positions=n,o._scene=m,o.index=m.count,m.count++}}),i(l,a,s)}},q.exports.reglPrecompiled={}},48300:function(q,W,t){"use strict";var A=t(5386).fF,g=t(5386).si,i=t(1426).extendFlat,P=t(82196),C=t(9012),u=P.line;q.exports={mode:P.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:P.text,texttemplate:g({editType:"plot"},{keys:["real","imag","text"]}),hovertext:P.hovertext,line:{color:u.color,width:u.width,dash:u.dash,backoff:u.backoff,shape:i({},u.shape,{values:["linear","spline"]}),smoothing:u.smoothing,editType:"calc"},connectgaps:P.connectgaps,marker:P.marker,cliponaxis:i({},P.cliponaxis,{dflt:!1}),textposition:P.textposition,textfont:P.textfont,fill:i({},P.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:P.fillcolor,hoverinfo:i({},C.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:P.hoveron,hovertemplate:A(),selected:P.selected,unselected:P.unselected}},30621:function(q,W,t){"use strict";var A=t(92770),g=t(50606).BADNUM,i=t(36922),P=t(75225),C=t(66279),u=t(47761).calcMarkerSize;q.exports=function(e,r){for(var l=e._fullLayout,a=r.subplot,c=l[a].imaginaryaxis,f=l[a].realaxis.makeCalcdata(r,"real"),m=c.makeCalcdata(r,"imag"),h=r._length,w=new Array(h),p=0;p<h;p++){var o=f[p],v=m[p],M=w[p]={};A(o)&&A(v)?(M.real=o,M.imag=v):M.real=g}return u(r,h),i(e,r),P(w,r),C(w,r),w}},65269:function(q,W,t){"use strict";var A=t(71828),g=t(34098),i=t(49508),P=t(11058),C=t(94039),u=t(82410),y=t(28908),e=t(47581).PTS_LINESONLY,r=t(48300);q.exports=function(s,c,f,m){function h(o,v){return A.coerce(s,c,r,o,v)}var w=function l(a,s,c,f){var w,m=f("real"),h=f("imag");return m&&h&&(w=Math.min(m.length,h.length)),s._length=w,w}(0,c,0,h);if(w){h("mode",w<e?"lines+markers":"lines"),h("text"),h("hovertext"),"fills"!==c.hoveron&&h("hovertemplate"),g.hasLines(c)&&(P(s,c,f,m,h,{backoff:!0}),C(s,c,h),h("connectgaps")),g.hasMarkers(c)&&i(s,c,f,m,h,{gradient:!0}),g.hasText(c)&&(h("texttemplate"),u(s,c,m,h));var p=[];(g.hasMarkers(c)||g.hasText(c))&&(h("cliponaxis"),h("marker.maxdisplayed"),p.push("points")),h("fill"),"none"!==c.fill&&(y(s,c,f,h),g.hasLines(c)||C(s,c,h)),("tonext"===c.fill||"toself"===c.fill)&&p.push("fills"),h("hoveron",p.join("+")||"points"),A.coerceSelectionMarkerOpacity(c,h)}else c.visible=!1}},62047:function(q,W,t){"use strict";var A=t(89298);q.exports=function(i,P,C){var u={},y=C[P.subplot]._subplot;return u.realLabel=A.tickText(y.radialAxis,i.real,!0).text,u.imagLabel=A.tickText(y.angularAxis,i.imag,!0).text,u}},11350:function(q,W,t){"use strict";var A=t(33720);function i(P,C,u,y){var e=u.radialAxis,r=u.angularAxis;e._hovertitle="real",r._hovertitle="imag";var l={};l[C.subplot]={_subplot:u};var a=C._module.formatLabels(P,C,l);y.realLabel=a.realLabel,y.imagLabel=a.imagLabel;var c=[];function f(h,w){c.push(h._hovertitle+": "+w)}if(!C.hovertemplate){var m=(P.hi||C.hoverinfo).split("+");-1!==m.indexOf("all")&&(m=["real","imag","text"]),-1!==m.indexOf("real")&&f(e,y.realLabel),-1!==m.indexOf("imag")&&f(r,y.imagLabel),-1!==m.indexOf("text")&&y.text&&(c.push(y.text),delete y.text),y.extraText=c.join("<br>")}}q.exports={hoverPoints:function g(P,C,u,y){var e=A(P,C,u,y);if(e&&!1!==e[0].index){var r=e[0];if(void 0===r.index)return e;var l=P.subplot,a=r.cd[r.index],s=r.trace;if(l.isPtInside(a))return r.xLabelVal=void 0,r.yLabelVal=void 0,i(a,s,l,r),r.hovertemplate=s.hovertemplate,e}},makeHoverPointText:i}},85956:function(q,W,t){"use strict";q.exports={moduleType:"trace",name:"scattersmith",basePlotModule:t(7504),categories:["smith","symbols","showLegend","scatter-like"],attributes:t(48300),supplyDefaults:t(65269),colorbar:t(4898),formatLabels:t(62047),calc:t(30621),plot:t(12480),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(11350).hoverPoints,selectPoints:t(98002),meta:{}}},12480:function(q,W,t){"use strict";var A=t(32663),g=t(50606).BADNUM,P=t(23893).smith;q.exports=function(u,y,e){for(var r=y.layers.frontplot.select("g.scatterlayer"),l=y.xaxis,a=y.yaxis,s={xaxis:l,yaxis:a,plot:y.framework,layerClipId:y._hasClipOnAxisFalse?y.clipIds.forTraces:null},c=0;c<e.length;c++)for(var f=e[c],m=0;m<f.length;m++){0===m&&(f[0].trace._xA=l,f[0].trace._yA=a);var h=f[m],w=h.real;if(w===g)h.x=h.y=g;else{var p=P([w,h.imag]);h.x=p[0],h.y=p[1]}}A(u,s,e,r)}},50413:function(q,W,t){"use strict";var A=t(5386).fF,g=t(5386).si,i=t(82196),P=t(9012),C=t(50693),u=t(79952).P,y=t(1426).extendFlat,e=i.marker,r=i.line,l=e.line;q.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:y({},i.mode,{dflt:"markers"}),text:y({},i.text,{}),texttemplate:g({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:y({},i.hovertext,{}),line:{color:r.color,width:r.width,dash:u,backoff:r.backoff,shape:y({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:i.connectgaps,cliponaxis:i.cliponaxis,fill:y({},i.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:i.fillcolor,marker:y({symbol:e.symbol,opacity:e.opacity,angle:e.angle,angleref:e.angleref,standoff:e.standoff,maxdisplayed:e.maxdisplayed,size:e.size,sizeref:e.sizeref,sizemin:e.sizemin,sizemode:e.sizemode,line:y({width:l.width,editType:"calc"},C("marker.line")),gradient:e.gradient,editType:"calc"},C("marker")),textfont:i.textfont,textposition:i.textposition,selected:i.selected,unselected:i.unselected,hoverinfo:y({},P.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:i.hoveron,hovertemplate:A()}},54337:function(q,W,t){"use strict";var A=t(92770),g=t(36922),i=t(75225),P=t(66279),C=t(47761).calcMarkerSize,u=["a","b","c"],y={a:["b","c"],b:["a","c"],c:["a","b"]};q.exports=function(r,l){var m,h,w,p,o,v,s=r._fullLayout[l.subplot].sum,c=l.sum||s,f={a:l.a,b:l.b,c:l.c};for(m=0;m<u.length;m++)if(!f[w=u[m]]){for(o=f[y[w][0]],v=f[y[w][1]],p=new Array(o.length),h=0;h<o.length;h++)p[h]=c-o[h]-v[h];f[w]=p}var L,x,S,T,M=l._length,b=new Array(M);for(m=0;m<M;m++)x=f.b[m],S=f.c[m],A(L=f.a[m])&&A(x)&&A(S)?(1!=(T=s/((L=+L)+(x=+x)+(S=+S)))&&(L*=T,x*=T,S*=T),b[m]={x:S-x,y:L,a:L,b:x,c:S}):b[m]={x:!1,y:!1};return C(l,M),g(r,l),i(b,l),P(b,l),b}},46008:function(q,W,t){"use strict";var A=t(71828),g=t(47581),i=t(34098),P=t(49508),C=t(11058),u=t(94039),y=t(82410),e=t(28908),r=t(50413);q.exports=function(a,s,c,f){function m(b,L){return A.coerce(a,s,r,b,L)}var o,h=m("a"),w=m("b"),p=m("c");if(h?(o=h.length,w?(o=Math.min(o,w.length),p&&(o=Math.min(o,p.length))):o=p?Math.min(o,p.length):0):w&&p&&(o=Math.min(w.length,p.length)),o){s._length=o,m("sum"),m("text"),m("hovertext"),"fills"!==s.hoveron&&m("hovertemplate"),m("mode",o<g.PTS_LINESONLY?"lines+markers":"lines"),i.hasLines(s)&&(C(a,s,c,f,m,{backoff:!0}),u(a,s,m),m("connectgaps")),i.hasMarkers(s)&&P(a,s,c,f,m,{gradient:!0}),i.hasText(s)&&(m("texttemplate"),y(a,s,f,m));var M=[];(i.hasMarkers(s)||i.hasText(s))&&(m("cliponaxis"),m("marker.maxdisplayed"),M.push("points")),m("fill"),"none"!==s.fill&&(e(a,s,c,m),i.hasLines(s)||u(a,s,m)),("tonext"===s.fill||"toself"===s.fill)&&M.push("fills"),m("hoveron",M.join("+")||"points"),A.coerceSelectionMarkerOpacity(s,m)}else s.visible=!1}},4524:function(q){"use strict";q.exports=function(t,A,g,i,P){if(A.xa&&(t.xaxis=A.xa),A.ya&&(t.yaxis=A.ya),i[P]){var C=i[P];t.a=C.a,t.b=C.b,t.c=C.c}else t.a=A.a,t.b=A.b,t.c=A.c;return t}},93645:function(q,W,t){"use strict";var A=t(89298);q.exports=function(i,P,C){var u={},y=C[P.subplot]._subplot;return u.aLabel=A.tickText(y.aaxis,i.a,!0).text,u.bLabel=A.tickText(y.baxis,i.b,!0).text,u.cLabel=A.tickText(y.caxis,i.c,!0).text,u}},47250:function(q,W,t){"use strict";var A=t(33720);q.exports=function(i,P,C,u){var y=A(i,P,C,u);if(y&&!1!==y[0].index){var e=y[0];if(void 0===e.index){var l=i.xa._length,a=l*(1-e.y0/i.ya._length)/2,s=l-a;return e.x0=Math.max(Math.min(e.x0,s),a),e.x1=Math.max(Math.min(e.x1,s),a),y}var c=e.cd[e.index],f=e.trace,m=e.subplot;e.a=c.a,e.b=c.b,e.c=c.c,e.xLabelVal=void 0,e.yLabelVal=void 0;var h={};h[f.subplot]={_subplot:m};var w=f._module.formatLabels(c,f,h);e.aLabel=w.aLabel,e.bLabel=w.bLabel,e.cLabel=w.cLabel;var o=[];if(!f.hovertemplate){var M=(c.hi||f.hoverinfo).split("+");-1!==M.indexOf("all")&&(M=["a","b","c"]),-1!==M.indexOf("a")&&v(m.aaxis,e.aLabel),-1!==M.indexOf("b")&&v(m.baxis,e.bLabel),-1!==M.indexOf("c")&&v(m.caxis,e.cLabel)}return e.extraText=o.join("<br>"),e.hovertemplate=f.hovertemplate,y}function v(b,L){o.push(b._hovertitle+": "+L)}}},52979:function(q,W,t){"use strict";q.exports={attributes:t(50413),supplyDefaults:t(46008),colorbar:t(4898),formatLabels:t(93645),calc:t(54337),plot:t(7507),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(47250),selectPoints:t(98002),eventData:t(4524),moduleType:"trace",name:"scatterternary",basePlotModule:t(61639),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},7507:function(q,W,t){"use strict";var A=t(32663);q.exports=function(i,P,C){var u=P.plotContainer;u.select(".scatterlayer").selectAll("*").remove();for(var y=P.xaxis,e=P.yaxis,r={xaxis:y,yaxis:e,plot:u,layerClipId:P._hasClipOnAxisFalse?P.clipIdRelative:null},l=P.layers.frontplot.select("g.scatterlayer"),a=0;a<C.length;a++){var s=C[a];s.length&&(s[0].trace._xA=y,s[0].trace._yA=e)}A(i,r,C,l)}},46880:function(q,W,t){"use strict";var A=t(82196),g=t(50693),i=t(12663).axisHoverFormat,P=t(5386).fF,C=t(42341),u=t(85555).idRegex,y=t(44467).templatedArray,e=t(1426).extendFlat,r=A.marker,l=r.line,a=e(g("marker.line",{editTypeOverride:"calc"}),{width:e({},l.width,{editType:"calc"}),editType:"calc"}),s=e(g("marker"),{symbol:r.symbol,angle:r.angle,size:e({},r.size,{editType:"markerSize"}),sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:a,editType:"calc"});function c(f){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:u[f],editType:"plot"}}}s.color.editType=s.cmin.editType=s.cmax.editType="style",q.exports={dimensions:y("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:e({},C.text,{}),hovertext:e({},C.hovertext,{}),hovertemplate:P(),xhoverformat:i("x"),yhoverformat:i("y"),marker:s,xaxes:c("x"),yaxes:c("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:C.selected.marker,editType:"calc"},unselected:{marker:C.unselected.marker,editType:"calc"},opacity:C.opacity}},65017:function(q,W,t){"use strict";var A=t(73972),g=t(83312);q.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:t(46880),supplyDefaults:t(25784),colorbar:t(4898),calc:t(87625),plot:t(79410),hoverPoints:t(8567).hoverPoints,selectPoints:t(8689),editStyle:t(28801),meta:{}},A.register(g)},16947:function(q,W,t){"use strict";var A=t(46075),g=t(73972),i=t(79749),P=t(27659).a0,C=t(93612),u=t(41675).getFromId,y=t(89298).shouldShowZeroLine,e="splom",r={};function s(h,w,p){for(var v=w._visibleDims,M=p.viewOpts.ranges=new Array(p.matrixOptions.data.length),b=0;b<v.length;b++){var L=v[b],x=M[b]=new Array(4),S=u(h,w._diag[L][0]);S&&(x[0]=S.r2l(S.range[0]),x[2]=S.r2l(S.range[1]));var T=u(h,w._diag[L][1]);T&&(x[1]=T.r2l(T.range[0]),x[3]=T.r2l(T.range[1]))}p.selectBatch.length||p.unselectBatch.length?p.matrix.update({ranges:M},{ranges:M}):p.matrix.update({ranges:M})}function c(h){var w=h._fullLayout,p=w._glcanvas.data()[0].regl,o=w._splomGrid;o||(o=w._splomGrid=A(p)),o.update(function f(h){var b,w=h._context.plotGlPixelRatio,p=h._fullLayout,o=p._size,v=[0,0,p.width*w,p.height*w],M={};function L(H,J,nt,it,ut,Q){nt*=w,it*=w,ut*=w,Q*=w;var j=J[H+"color"],Z=J[H+"width"],G=String(j+Z);G in M?M[G].data.push(NaN,NaN,nt,it,ut,Q):M[G]={data:[nt,it,ut,Q],join:"rect",thickness:Z*w,color:j,viewport:v,range:v,overlay:!1}}for(b in p._splomSubplots){var B,z,x=p._plots[b],S=x.xaxis,T=x.yaxis,n=S._gridVals,E=T._gridVals,d=S._offset,F=S._length,D=T._length,N=o.b+T.domain[0]*o.h,k=-T._m,O=-k*T.r2l(T.range[0],T.calendar);if(S.showgrid)for(b=0;b<n.length;b++)B=d+S.l2p(n[b].x),L("grid",S,B,N,B,N+D);if(T.showgrid)for(b=0;b<E.length;b++)L("grid",T,d,z=N+O+k*E[b].x,d+F,z);y(h,S,T)&&(B=d+S.l2p(0),L("zeroline",S,B,N,B,N+D)),y(h,T,S)&&L("zeroline",T,d,z=N+O+0,d+F,z)}var U=[];for(b in M)U.push(M[b]);return U}(h))}q.exports={name:e,attr:C.attr,attrRegex:C.attrRegex,layoutAttributes:C.layoutAttributes,supplyLayoutDefaults:C.supplyLayoutDefaults,drawFramework:C.drawFramework,plot:function l(h){var w=h._fullLayout,p=g.getModule(e),o=P(h.calcdata,p)[0];!i(h,["ANGLE_instanced_arrays","OES_element_index_uint"],r)||(w._hasOnlyLargeSploms&&c(h),p.plot(h,{},o))},drag:function a(h){var w=h.calcdata,p=h._fullLayout;p._hasOnlyLargeSploms&&c(h);for(var o=0;o<w.length;o++){var M=w[o][0].trace,b=p._splomScenes[M.uid];"splom"===M.type&&b&&b.matrix&&s(h,M,b)}},updateGrid:c,clean:function m(h,w,p,o){var M,v={};if(o._splomScenes){for(M=0;M<h.length;M++){var b=h[M];"splom"===b.type&&(v[b.uid]=1)}for(M=0;M<p.length;M++){var L=p[M];if(!v[L.uid]){var x=o._splomScenes[L.uid];x&&x.destroy&&x.destroy(),o._splomScenes[L.uid]=null,delete o._splomScenes[L.uid]}}}0===Object.keys(o._splomScenes||{}).length&&delete o._splomScenes,o._splomGrid&&!w._hasOnlyLargeSploms&&o._hasOnlyLargeSploms&&(o._splomGrid.destroy(),o._splomGrid=null,delete o._splomGrid),C.clean(h,w,p,o)},updateFx:C.updateFx,toSVG:C.toSVG,reglPrecompiled:r}},87625:function(q,W,t){"use strict";var A=t(71828),g=t(41675),i=t(47761).calcMarkerSize,P=t(47761).calcAxisExpansion,C=t(36922),u=t(19635).markerSelection,y=t(19635).markerStyle,e=t(10164),r=t(50606).BADNUM,l=t(78232).TOO_MANY_POINTS;q.exports=function(s,c){var v,M,b,L,x,E,f=c.dimensions,m=c._length,h={},w=h.cdata=[],p=h.data=[],o=c._visibleDims=[];function S(F,D){for(var N=F.makeCalcdata({v:D.values,vcalendar:c.calendar},"v"),k=0;k<N.length;k++)N[k]=N[k]===r?NaN:N[k];w.push(N),p.push("log"===F.type?A.simpleMap(N,F.c2l):N)}for(v=0;v<f.length;v++)if((b=f[v]).visible){if(L=g.getFromId(s,c._diag[v][0]),x=g.getFromId(s,c._diag[v][1]),L&&x&&L.type!==x.type){A.log("Skipping splom dimension "+v+" with conflicting axis types");continue}L?(S(L,b),x&&"category"===x.type&&(x._categories=L._categories.slice())):S(x,b),o.push(v)}for(C(s,c),A.extendFlat(h,y(s,c)),E=w.length*m>l?h.sizeAvg||Math.max(h.size,3):i(c,m),M=0;M<o.length;M++)b=f[v=o[M]],L=g.getFromId(s,c._diag[v][0])||{},x=g.getFromId(s,c._diag[v][1])||{},P(s,c,L,x,w[M],w[M],E);var d=e(s,c);return d.matrix||(d.matrix=!0),d.matrixOptions=h,d.selectedOptions=u(s,c,c.selected),d.unselectedOptions=u(s,c,c.unselected),[{x:!1,y:!1,t:{},trace:c}]}},25784:function(q,W,t){"use strict";var A=t(71828),g=t(85501),i=t(46880),P=t(34098),C=t(49508),u=t(94397),y=t(68645).isOpenSymbol;function e(l,a){function s(f,m){return A.coerce(l,a,i.dimensions,f,m)}s("label");var c=s("values");c&&c.length?s("visible"):a.visible=!1,s("axis.type"),s("axis.matches")}q.exports=function(a,s,c,f){function m(L,x){return A.coerce(a,s,i,L,x)}var h=g(a,s,{name:"dimensions",handleItemDefaults:e}),w=m("diagonal.visible"),p=m("showupperhalf"),o=m("showlowerhalf");if(u(s,h,"values")&&(w||p||o)){m("text"),m("hovertext"),m("hovertemplate"),m("xhoverformat"),m("yhoverformat"),C(a,s,c,f,m,{noAngleRef:!0,noStandOff:!0});var M=y(s.marker.symbol),b=P.isBubble(s);m("marker.line.width",M||b?1:0),function r(l,a,s,c){var o,v,f=a.dimensions,m=f.length,h=a.showupperhalf,w=a.showlowerhalf,p=a.diagonal.visible,M=new Array(m),b=new Array(m);for(o=0;o<m;o++){var L=o?o+1:"";M[o]="x"+L,b[o]="y"+L}var x=c("xaxes",M),S=c("yaxes",b),T=a._diag=new Array(m);a._xaxes={},a._yaxes={};var n=[],E=[];function d(H,J,nt,it){if(H){var ut=H.charAt(0),Q=s._splomAxes[ut];if(a["_"+ut+"axes"][H]=1,it.push(H),!(H in Q)){var j=Q[H]={};nt&&(j.label=nt.label||"",nt.visible&&nt.axis&&(nt.axis.type&&(j.type=nt.axis.type),nt.axis.matches&&(j.matches=J)))}}}var F=!p&&!w,D=!p&&!h;for(a._axesDim={},o=0;o<m;o++){var N=f[o],k=0===o,O=o===m-1,B=k&&F||O&&D?void 0:x[o],z=k&&D||O&&F?void 0:S[o];d(B,z,N,n),d(z,B,N,E),T[o]=[B,z],a._axesDim[B]=o,a._axesDim[z]=o}for(o=0;o<n.length;o++)for(v=0;v<E.length;v++)(o>v&&h||o<v&&w||o===v&&(p||!w||!h))&&(s._splomSubplots[n[o]+E[v]]=1);(!w||!p&&h&&w)&&(s._splomGridDflt.xside="bottom",s._splomGridDflt.yside="left")}(0,s,f,m),A.coerceSelectionMarkerOpacity(s,m)}else s.visible=!1}},28801:function(q,W,t){"use strict";var A=t(71828),g=t(36922),i=t(19635).markerStyle;q.exports=function(C,u){var y=u.trace,e=C._fullLayout._splomScenes[y.uid];if(e){g(C,y),A.extendFlat(e.matrixOptions,i(C,y));var r=A.extendFlat({},e.matrixOptions,e.viewOpts);e.matrix.update(r,null)}}},35948:function(q,W){"use strict";W.getDimIndex=function(A,g){for(var i=g._id,C={x:0,y:1}[i.charAt(0)],u=A._visibleDims,y=0;y<u.length;y++)if(A._diag[u[y]][C]===i)return y;return!1}},8567:function(q,W,t){"use strict";var A=t(35948),g=t(20794).calcHover;q.exports={hoverPoints:function i(P,C,u){var e=P.cd[0].trace,l=P.scene.matrixOptions.cdata,a=P.xa,s=P.ya,c=a.c2p(C),f=s.c2p(u),m=P.distance,h=A.getDimIndex(e,a),w=A.getDimIndex(e,s);if(!1===h||!1===w)return[P];for(var v,M,p=l[h],o=l[w],b=m,L=0;L<p.length;L++){var S=o[L],T=a.c2p(p[L])-c,n=s.c2p(S)-f,E=Math.sqrt(T*T+n*n);E<b&&(b=M=E,v=L)}return P.index=v,P.distance=b,P.dxy=M,void 0===v?[P]:[g(P,p,o,e)]}}},6419:function(q,W,t){"use strict";var A=t(65017);A.basePlotModule=t(16947),q.exports=A},79410:function(q,W,t){"use strict";var A=t(60487),g=t(71828),i=t(41675),P=t(64505).selectMode;function C(u,y){var w,p,o,v,M,e=u._fullLayout,r=e._size,l=y.trace,a=y.t,s=e._splomScenes[l.uid],c=s.matrixOptions,f=c.cdata,m=e._glcanvas.data()[0].regl,h=e.dragmode;if(0!==f.length){c.lower=l.showupperhalf,c.upper=l.showlowerhalf,c.diagonal=l.diagonal.visible;var b=l._visibleDims,L=f.length,x=s.viewOpts={};for(x.ranges=new Array(L),x.domains=new Array(L),M=0;M<b.length;M++){o=b[M];var S=x.ranges[M]=new Array(4),T=x.domains[M]=new Array(4);(w=i.getFromId(u,l._diag[o][0]))&&(S[0]=w._rl[0],S[2]=w._rl[1],T[0]=w.domain[0],T[2]=w.domain[1]),(p=i.getFromId(u,l._diag[o][1]))&&(S[1]=p._rl[0],S[3]=p._rl[1],T[1]=p.domain[0],T[3]=p.domain[1])}var n=u._context.plotGlPixelRatio,E=r.l*n,d=r.b*n;x.viewport=[E,d,r.w*n+E,r.h*n+d],!0===s.matrix&&(s.matrix=A(m));var N=e.clickmode.indexOf("select")>-1,O=!0;if(P(h)||l.selectedpoints||N){var B=l._length;if(l.selectedpoints){s.selectBatch=l.selectedpoints;var z=l.selectedpoints,U={};for(o=0;o<z.length;o++)U[z[o]]=!0;var H=[];for(o=0;o<B;o++)U[o]||H.push(o);s.unselectBatch=H}var J=a.xpx=new Array(L),nt=a.ypx=new Array(L);for(M=0;M<b.length;M++){if(w=i.getFromId(u,l._diag[o=b[M]][0]))for(J[M]=new Array(B),v=0;v<B;v++)J[M][v]=w.c2p(f[M][v]);if(p=i.getFromId(u,l._diag[o][1]))for(nt[M]=new Array(B),v=0;v<B;v++)nt[M][v]=p.c2p(f[M][v])}if(s.selectBatch.length||s.unselectBatch.length){var it=g.extendFlat({},c,s.unselectedOptions,x),ut=g.extendFlat({},c,s.selectedOptions,x);s.matrix.update(it,ut),O=!1}}else a.xpx=a.ypx=null;if(O){var Q=g.extendFlat({},c,x);s.matrix.update(Q,null)}}}q.exports=function(y,e,r){if(r.length)for(var l=0;l<r.length;l++)C(y,r[l][0])}},10164:function(q,W,t){"use strict";var A=t(71828);q.exports=function(i,P){var C=i._fullLayout,u=P.uid,y=C._splomScenes;y||(y=C._splomScenes={});var e={dirty:!0,selectBatch:[],unselectBatch:[]},l=y[P.uid];return l||((l=y[u]=A.extendFlat({},e,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){l.matrix&&l.matrix.draw&&(l.selectBatch.length||l.unselectBatch.length?l.matrix.draw(l.unselectBatch,l.selectBatch):l.matrix.draw()),l.dirty=!1},l.destroy=function(){l.matrix&&l.matrix.destroy&&l.matrix.destroy(),l.matrixOptions=null,l.selectBatch=null,l.unselectBatch=null,l=null}),l.dirty||A.extendFlat(l,e),l}},8689:function(q,W,t){"use strict";var A=t(71828),g=A.pushUnique,i=t(34098),P=t(35948);q.exports=function(u,y){var e=u.cd,r=e[0].trace,l=e[0].t,a=u.scene,s=a.matrixOptions.cdata,c=u.xaxis,f=u.yaxis,m=[];if(!a)return m;var h=!i.hasMarkers(r)&&!i.hasText(r);if(!0!==r.visible||h)return m;var w=P.getDimIndex(r,c),p=P.getDimIndex(r,f);if(!1===w||!1===p)return m;var o=l.xpx[w],v=l.ypx[p],M=s[w],b=s[p],L=(u.scene.selectBatch||[]).slice(),x=[];if(!1!==y&&!y.degenerate)for(var S=0;S<M.length;S++)y.contains([o[S],v[S]],null,S,u)?(m.push({pointNumber:S,x:M[S],y:b[S]}),g(L,S)):-1!==L.indexOf(S)?g(L,S):x.push(S);var T=a.matrixOptions;return L.length||x.length?!a.selectBatch.length&&!a.unselectBatch.length&&a.matrix.update(a.unselectedOptions,A.extendFlat({},T,a.selectedOptions,a.viewOpts)):a.matrix.update(T,null),a.selectBatch=L,a.unselectBatch=x,m}},21850:function(q,W,t){"use strict";var A=t(50693),g=t(12663).axisHoverFormat,i=t(5386).fF,P=t(2418),C=t(9012),u=t(1426).extendFlat,y={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:i({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:g("u",1),vhoverformat:g("v",1),whoverformat:g("w",1),xhoverformat:g("x"),yhoverformat:g("y"),zhoverformat:g("z"),showlegend:u({},C.showlegend,{dflt:!1})};u(y,A("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(r){y[r]=P[r]}),y.hoverinfo=u({},C.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),y.transforms=void 0,q.exports=y},88489:function(q,W,t){"use strict";var A=t(71828),g=t(78803);function P(y){var s,c,f,b,L,x,S,T,n,E,d,F,e=y._x,r=y._y,l=y._z,a=y._len,m=-1/0,h=1/0,w=-1/0,p=1/0,o=-1/0,v=1/0,M="";for(a&&(S=e[0],n=r[0],d=l[0]),a>1&&(T=e[a-1],E=r[a-1],F=l[a-1]),s=0;s<a;s++)m=Math.max(m,e[s]),h=Math.min(h,e[s]),w=Math.max(w,r[s]),p=Math.min(p,r[s]),o=Math.max(o,l[s]),v=Math.min(v,l[s]),!b&&e[s]!==S&&(b=!0,M+="x"),!L&&r[s]!==n&&(L=!0,M+="y"),!x&&l[s]!==d&&(x=!0,M+="z");b||(M+="x"),L||(M+="y"),x||(M+="z");var D=C(y._x),N=C(y._y),k=C(y._z);M=(M=(M=M.replace("x",(S>T?"-":"+")+"x")).replace("y",(n>E?"-":"+")+"y")).replace("z",(d>F?"-":"+")+"z");var O=function(){a=0,D=[],N=[],k=[]};(!a||a<D.length*N.length*k.length)&&O();var B=function(st){return"x"===st?e:"y"===st?r:l},z=function(st){return"x"===st?D:"y"===st?N:k},U=function(st){return st[a-1]<st[0]?-1:1},H=B(M[1]),J=B(M[3]),nt=B(M[5]),it=z(M[1]).length,ut=z(M[3]).length,Q=z(M[5]).length,j=!1,Z=function(st,dt,bt){return it*(ut*st+dt)+bt},G=U(B(M[1])),K=U(B(M[3])),at=U(B(M[5]));for(s=0;s<Q-1;s++){for(c=0;c<ut-1;c++){for(f=0;f<it-1;f++){var $=Z(s,c,f),X=Z(s,c,f+1),rt=Z(s,c+1,f),et=Z(s+1,c,f);if(H[$]*G<H[X]*G&&J[$]*K<J[rt]*K&&nt[$]*at<nt[et]*at||(j=!0),j)break}if(j)break}if(j)break}return j&&(A.warn("Encountered arbitrary coordinates! Unable to input data grid."),O()),{xMin:h,yMin:p,zMin:v,xMax:m,yMax:w,zMax:o,Xs:D,Ys:N,Zs:k,len:a,fill:M}}function C(y){return A.distinctVals(y).vals}function u(y,e){if(void 0===e&&(e=y.length),A.isTypedArray(y))return y.subarray(0,e);for(var r=[],l=0;l<e;l++)r[l]=+y[l];return r}q.exports={calc:function i(y,e){e._len=Math.min(e.u.length,e.v.length,e.w.length,e.x.length,e.y.length,e.z.length),e._u=u(e.u,e._len),e._v=u(e.v,e._len),e._w=u(e.w,e._len),e._x=u(e.x,e._len),e._y=u(e.y,e._len),e._z=u(e.z,e._len);var r=P(e);e._gridFill=r.fill,e._Xs=r.Xs,e._Ys=r.Ys,e._Zs=r.Zs,e._len=r.len;var a,s,c,l=0;e.starts&&(a=u(e.starts.x||[]),s=u(e.starts.y||[]),c=u(e.starts.z||[]),l=Math.min(a.length,s.length,c.length)),e._startsX=a||[],e._startsY=s||[],e._startsZ=c||[];var h,f=0,m=1/0;for(h=0;h<e._len;h++){var w=e._u[h],p=e._v[h],o=e._w[h],v=Math.sqrt(w*w+p*p+o*o);f=Math.max(f,v),m=Math.min(m,v)}for(g(y,e,{vals:[m,f],containerStr:"",cLetter:"c"}),h=0;h<l;h++){var M=a[h];r.xMax=Math.max(r.xMax,M),r.xMin=Math.min(r.xMin,M);var b=s[h];r.yMax=Math.max(r.yMax,b),r.yMin=Math.min(r.yMin,b);var L=c[h];r.zMax=Math.max(r.zMax,L),r.zMin=Math.min(r.zMin,L)}e._slen=l,e._normMax=f,e._xbnds=[r.xMin,r.xMax],e._ybnds=[r.yMin,r.yMax],e._zbnds=[r.zMin,r.zMax]},filter:u,processGrid:P}},90154:function(q,W,t){"use strict";var A=t(9330).gl_streamtube3d,g=A.createTubeMesh,i=t(71828),P=t(81697).parseColorScale,C=t(21081).extractOpts,u=t(90060),y={xaxis:0,yaxis:1,zaxis:2};function e(f,m){this.scene=f,this.uid=m,this.mesh=null,this.data=null}var r=e.prototype;function l(f){var m=f.length;return m>2?f.slice(1,m-1):2===m?[(f[0]+f[1])/2]:f}function a(f){var m=f.length;return 1===m?[.5,.5]:[f[1]-f[0],f[m-1]-f[m-2]]}function s(f,m){var h=f.fullSceneLayout,w=f.dataScale,p=m._len,o={};function v(ut,Q){var j=h[Q],Z=w[y[Q]];return i.simpleMap(ut,function(G){return j.d2l(G)*Z})}if(o.vectors=u(v(m._u,"xaxis"),v(m._v,"yaxis"),v(m._w,"zaxis"),p),!p)return{positions:[],cells:[]};var M=v(m._Xs,"xaxis"),b=v(m._Ys,"yaxis"),L=v(m._Zs,"zaxis");if(o.meshgrid=[M,b,L],o.gridFill=m._gridFill,m._slen)o.startingPositions=u(v(m._startsX,"xaxis"),v(m._startsY,"yaxis"),v(m._startsZ,"zaxis"));else{for(var S=b[0],T=l(M),n=l(L),E=new Array(T.length*n.length),d=0,F=0;F<T.length;F++)for(var D=0;D<n.length;D++)E[d++]=[T[F],S,n[D]];o.startingPositions=E}o.colormap=P(m),o.tubeSize=m.sizeref,o.maxLength=m.maxdisplayed;var N=v(m._xbnds,"xaxis"),k=v(m._ybnds,"yaxis"),O=v(m._zbnds,"zaxis"),B=a(M),z=a(b),U=a(L),J=A(o,[[N[0]-B[0],k[0]-z[0],O[0]-U[0]],[N[1]+B[1],k[1]+z[1],O[1]+U[1]]]),nt=C(m);J.vertexIntensityBounds=[nt.min/m._normMax,nt.max/m._normMax];var it=m.lightposition;return J.lightPosition=[it.x,it.y,it.z],J.ambient=m.lighting.ambient,J.diffuse=m.lighting.diffuse,J.specular=m.lighting.specular,J.roughness=m.lighting.roughness,J.fresnel=m.lighting.fresnel,J.opacity=m.opacity,m._pad=J.tubeScale*m.sizeref*2,J}r.handlePick=function(f){var m=this.scene.fullSceneLayout,h=this.scene.dataScale;function w(v,M){var L=h[y[M]];return m[M].l2c(v)/L}if(f.object===this.mesh){var p=f.data.position,o=f.data.velocity;return f.traceCoordinate=[w(p[0],"xaxis"),w(p[1],"yaxis"),w(p[2],"zaxis"),w(o[0],"xaxis"),w(o[1],"yaxis"),w(o[2],"zaxis"),f.data.intensity*this.data._normMax,f.data.divergence],f.textLabel=this.data.hovertext||this.data.text,!0}},r.update=function(f){this.data=f;var m=s(this.scene,f);this.mesh.update(m)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},q.exports=function c(f,m){var h=f.glplot.gl,w=s(f,m),p=g(h,w),o=new e(f,m.uid);return o.mesh=p,o.data=m,p._trace=o,f.glplot.add(p),o}},22459:function(q,W,t){"use strict";var A=t(71828),g=t(1586),i=t(21850);q.exports=function(C,u,y,e){function r(h,w){return A.coerce(C,u,i,h,w)}var l=r("u"),a=r("v"),s=r("w"),c=r("x"),f=r("y"),m=r("z");l&&l.length&&a&&a.length&&s&&s.length&&c&&c.length&&f&&f.length&&m&&m.length?(r("starts.x"),r("starts.y"),r("starts.z"),r("maxdisplayed"),r("sizeref"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),g(C,u,e,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),u._length=null):u.visible=!1}},61510:function(q,W,t){"use strict";q.exports={moduleType:"trace",name:"streamtube",basePlotModule:t(58547),categories:["gl3d","showLegend"],attributes:t(21850),supplyDefaults:t(22459),colorbar:{min:"cmin",max:"cmax"},calc:t(88489).calc,plot:t(90154),eventData:function(A,g){return A.tubex=A.x,A.tubey=A.y,A.tubez=A.z,A.tubeu=g.traceCoordinate[3],A.tubev=g.traceCoordinate[4],A.tubew=g.traceCoordinate[5],A.norm=g.traceCoordinate[6],A.divergence=g.traceCoordinate[7],delete A.x,delete A.y,delete A.z,A},meta:{}}},57564:function(q,W,t){"use strict";var A=t(9012),g=t(5386).fF,i=t(5386).si,P=t(50693),C=t(27670).Y,u=t(34e3),y=t(7055),e=t(1426).extendFlat,r=t(79952).u;q.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:e({colors:{valType:"data_array",editType:"calc"},line:{color:e({},u.marker.line.color,{dflt:null}),width:e({},u.marker.line.width,{dflt:1}),editType:"calc"},pattern:r,editType:"calc"},P("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:u.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:i({editType:"plot"},{keys:y.eventDataKeys.concat(["label","value"])}),hovertext:u.hovertext,hoverinfo:e({},A.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:g({},{keys:y.eventDataKeys}),textfont:u.textfont,insidetextorientation:u.insidetextorientation,insidetextfont:u.insidetextfont,outsidetextfont:e({},u.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:u.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:C({name:"sunburst",trace:!0,editType:"calc"})}},66888:function(q,W,t){"use strict";var A=t(74875);W.name="sunburst",W.plot=function(g,i,P,C){A.plotBasePlot(W.name,g,i,P,C)},W.clean=function(g,i,P,C){A.cleanBasePlot(W.name,g,i,P,C)}},52147:function(q,W,t){"use strict";var A=t(674),g=t(92770),i=t(71828),P=t(21081).makeColorScaleFuncFromTrace,C=t(32354).makePullColorFn,u=t(32354).generateExtendedColors,y=t(21081).calc,e=t(50606).ALMOST_EQUAL,r={},l={},a={};function s(c,f,m){var h=0,w=c.children;if(w){for(var p=w.length,o=0;o<p;o++)h+=s(w[o],f,m);m.branches&&h++}else m.leaves&&h++;return c.value=c.data.data.value=h,f._values||(f._values=[]),f._values[c.data.data.i]=h,h}W.calc=function(c,f){var E,d,F,J,G,K,m=c._fullLayout,h=f.ids,w=i.isArrayOrTypedArray(h),p=f.labels,o=f.parents,v=f.values,M=i.isArrayOrTypedArray(v),b=[],L={},x={},T=function(G){return G||"number"==typeof G},n=function(G){return!M||g(v[G])&&v[G]>=0};w?(E=Math.min(h.length,o.length),d=function(G){return T(h[G])&&n(G)},F=function(G){return String(h[G])}):(E=Math.min(p.length,o.length),d=function(G){return T(p[G])&&n(G)},F=function(G){return String(p[G])}),M&&(E=Math.min(E,v.length));for(var D=0;D<E;D++)if(d(D)){var N=F(D),k=T(o[D])?String(o[D]):"",O={i:D,id:N,pid:k,label:T(p[D])?String(p[D]):""};M&&(O.v=+v[D]),b.push(O),K=N,L[G=k]?L[G].push(K):L[G]=[K],x[K]=1}if(L[""]){if(L[""].length>1){for(var U=i.randstr(),H=0;H<b.length;H++)""===b[H].pid&&(b[H].pid=U);b.unshift({hasMultipleRoots:!0,id:U,pid:"",label:""})}}else{var z,B=[];for(z in L)x[z]||B.push(z);if(1!==B.length)return i.warn(["Multiple implied roots, cannot build",f.type,"hierarchy of",f.name+".","These roots include:",B.join(", ")].join(" "));b.unshift({hasImpliedRoot:!0,id:z=B[0],pid:"",label:z})}try{J=A.stratify().id(function(G){return G.id}).parentId(function(G){return G.pid})(b)}catch(G){return i.warn(["Failed to build",f.type,"hierarchy of",f.name+".","Error:",G.message].join(" "))}var nt=A.hierarchy(J),it=!1;if(M)switch(f.branchvalues){case"remainder":nt.sum(function(G){return G.data.v});break;case"total":nt.each(function(G){var K=G.data.data,at=K.v;if(G.children){var $=G.children.reduce(function(X,rt){return X+rt.data.data.v},0);if((K.hasImpliedRoot||K.hasMultipleRoots)&&(at=$),at<$*e)return it=!0,i.warn(["Total value for node",G.data.data.id,"of",f.name,"is smaller than the sum of its children.","\nparent value =",at,"\nchildren sum =",$].join(" "))}G.value=at})}else s(nt,f,{branches:-1!==f.count.indexOf("branches"),leaves:-1!==f.count.indexOf("leaves")});if(!it){f.sort&&nt.sort(function(G,K){return K.value-G.value});var ut,Q,j=f.marker.colors||[];return f._hasColorscale?(!!j.length||(j=M?f.values:f._values),y(c,f,{vals:j,containerStr:"marker",cLetter:"c"}),Q=P(f.marker)):ut=C(m["_"+f.type+"colormap"]),nt.each(function(G){var K=G.data.data;K.color=f._hasColorscale?Q(j[K.i]):ut(j[K.i],K.id)}),b[0].hierarchy=nt,b}},W._runCrossTraceCalc=function(c,f){var m=f._fullLayout,h=f.calcdata,w=m[c+"colorway"],p=m["_"+c+"colormap"];m["extend"+c+"colors"]&&(w=u(w,"icicle"===c?a:"treemap"===c?l:r));var v,o=0;function M(S){var T=S.data.data,n=T.id;!1===T.color&&(p[n]?T.color=p[n]:S.parent?S.parent.parent?T.color=S.parent.data.data.color:(p[n]=T.color=w[o%w.length],o++):T.color=v)}for(var b=0;b<h.length;b++){var x=h[b][0];x.trace.type===c&&x.hierarchy&&(v=x.trace.root.color,x.hierarchy.each(M))}},W.crossTraceCalc=function(c){return W._runCrossTraceCalc("sunburst",c)}},7055:function(q){"use strict";q.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},17094:function(q,W,t){"use strict";var A=t(71828),g=t(57564),i=t(27670).c,P=t(90769).handleText,C=t(37434).handleMarkerDefaults,u=t(21081),y=u.hasColorscale,e=u.handleDefaults;q.exports=function(l,a,s,c){function f(M,b){return A.coerce(l,a,g,M,b)}var m=f("labels"),h=f("parents");if(m&&m.length&&h&&h.length){var w=f("values");f(w&&w.length?"branchvalues":"count"),f("level"),f("maxdepth"),C(l,a,c,f);var p=a._hasColorscale=y(l,"marker","colors")||(l.marker||{}).coloraxis;p&&e(l,a,c,f,{prefix:"marker.",cLetter:"c"}),f("leaf.opacity",p?1:.7);var o=f("text");f("texttemplate"),a.texttemplate||f("textinfo",Array.isArray(o)?"text+label":"label"),f("hovertext"),f("hovertemplate"),P(l,a,c,f,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),f("insidetextorientation"),f("sort"),f("rotation"),f("root.color"),i(a,c,f),a._length=null}else a.visible=!1}},43467:function(q,W,t){"use strict";var A=t(91424),g=t(7901);q.exports=function(P,C,u,y,e){var r=C.data.data,a=e||r.color;if(r.i>=0){C.i=r.i;var s=u.marker;s.pattern?(!s.colors||!s.pattern.shape)&&(s.color=a,C.color=a):(s.color=a,C.color=a),A.pointStyle(P,u,y,C)}else g.fill(P,a)}},83523:function(q,W,t){"use strict";var A=t(39898),g=t(73972),i=t(23469).appendArrayPointValue,P=t(30211),C=t(71828),u=t(11086),y=t(2791),r=t(53581).formatPieValue;function l(a,s,c){for(var f=a.data.data,m={curveNumber:s.index,pointNumber:f.i,data:s._input,fullData:s},h=0;h<c.length;h++){var w=c[h];w in a&&(m[w]=a[w])}return"parentString"in a&&!y.isHierarchyRoot(a)&&(m.parent=a.parentString),i(m,s,f.i),m}q.exports=function(s,c,f,m,h){var w=m[0],p=w.trace,o=w.hierarchy,v="sunburst"===p.type,M="treemap"===p.type||"icicle"===p.type;"_hasHoverLabel"in p||(p._hasHoverLabel=!1),"_hasHoverEvent"in p||(p._hasHoverEvent=!1);s.on("mouseover",function(S){var T=f._fullLayout;if(!f._dragging&&!1!==T.hovermode){var U,n=f._fullData[p.index],E=S.data.data,d=E.i,F=y.isHierarchyRoot(S),D=y.getParent(o,S),N=y.getValue(S),k=function(X){return C.castOption(n,d,X)},O=k("hovertemplate"),B=P.castHoverinfo(n,T,d),z=T.separators;if(O||B&&"none"!==B&&"skip"!==B){var H,J;v&&(H=w.cx+S.pxmid[0]*(1-S.rInscribed),J=w.cy+S.pxmid[1]*(1-S.rInscribed)),M&&(H=S._hoverX,J=S._hoverY);var nt={},it=[],ut=[],Q=function(X){return-1!==it.indexOf(X)};B&&(it="all"===B?n._module.attributes.hoverinfo.flags:B.split("+")),nt.label=E.label,Q("label")&&nt.label&&ut.push(nt.label),E.hasOwnProperty("v")&&(nt.value=E.v,nt.valueLabel=r(nt.value,z),Q("value")&&ut.push(nt.valueLabel)),nt.currentPath=S.currentPath=y.getPath(S.data),Q("current path")&&!F&&ut.push(nt.currentPath);var j,Z=[],G=function(){-1===Z.indexOf(j)&&(ut.push(j),Z.push(j))};nt.percentParent=S.percentParent=N/y.getValue(D),nt.parent=S.parentString=y.getPtLabel(D),Q("percent parent")&&(j=y.formatPercent(nt.percentParent,z)+" of "+nt.parent,G()),nt.percentEntry=S.percentEntry=N/y.getValue(c),nt.entry=S.entry=y.getPtLabel(c),Q("percent entry")&&!F&&!S.onPathbar&&(j=y.formatPercent(nt.percentEntry,z)+" of "+nt.entry,G()),nt.percentRoot=S.percentRoot=N/y.getValue(o),nt.root=S.root=y.getPtLabel(o),Q("percent root")&&!F&&(j=y.formatPercent(nt.percentRoot,z)+" of "+nt.root,G()),nt.text=k("hovertext")||k("text"),Q("text")&&C.isValidTextValue(j=nt.text)&&ut.push(j),U=[l(S,n,h.eventDataKeys)];var K={trace:n,y:J,_x0:S._x0,_x1:S._x1,_y0:S._y0,_y1:S._y1,text:ut.join("<br>"),name:O||Q("name")?n.name:void 0,color:k("hoverlabel.bgcolor")||E.color,borderColor:k("hoverlabel.bordercolor"),fontFamily:k("hoverlabel.font.family"),fontSize:k("hoverlabel.font.size"),fontColor:k("hoverlabel.font.color"),nameLength:k("hoverlabel.namelength"),textAlign:k("hoverlabel.align"),hovertemplate:O,hovertemplateLabels:nt,eventData:U};v&&(K.x0=H-S.rInscribed*S.rpx1,K.x1=H+S.rInscribed*S.rpx1,K.idealAlign=S.pxmid[0]<0?"left":"right"),M&&(K.x=H,K.idealAlign=H<0?"left":"right");var at=[];P.loneHover(K,{container:T._hoverlayer.node(),outerContainer:T._paper.node(),gd:f,inOut_bbox:at}),U[0].bbox=at[0],p._hasHoverLabel=!0}if(M){var $=s.select("path.surface");h.styleOne($,S,n,f,{hovered:!0})}p._hasHoverEvent=!0,f.emit("plotly_hover",{points:U||[l(S,n,h.eventDataKeys)],event:A.event})}}),s.on("mouseout",function(S){var T=f._fullLayout,n=f._fullData[p.index],E=A.select(this).datum();if(p._hasHoverEvent&&(S.originalEvent=A.event,f.emit("plotly_unhover",{points:[l(E,n,h.eventDataKeys)],event:A.event}),p._hasHoverEvent=!1),p._hasHoverLabel&&(P.loneUnhover(T._hoverlayer.node()),p._hasHoverLabel=!1),M){var d=s.select("path.surface");h.styleOne(d,E,n,f,{hovered:!1})}}),s.on("click",function(S){var T=f._fullLayout,n=f._fullData[p.index],E=v&&(y.isHierarchyRoot(S)||y.isLeaf(S)),d=y.getPtId(S),F=y.isEntry(S)?y.findEntryWithChild(o,d):y.findEntryWithLevel(o,d),D=y.getPtId(F),N={points:[l(S,n,h.eventDataKeys)],event:A.event};E||(N.nextLevel=D);var k=u.triggerHandler(f,"plotly_"+p.type+"click",N);if(!1!==k&&T.hovermode&&(f._hoverdata=[l(S,n,h.eventDataKeys)],P.click(f,A.event)),!E&&!1!==k&&!f._dragging&&!f._transitioning){g.call("_storeDirectGUIEdit",n,T._tracePreGUI[n.uid],{level:n.level});var O={data:[{level:D}],traces:[p.index]},B={frame:{redraw:!1,duration:h.transitionTime},transition:{duration:h.transitionTime,easing:h.transitionEasing},mode:"immediate",fromcurrent:!0};P.loneUnhover(T._hoverlayer.node()),g.call("animate",f,O,B)}})}},2791:function(q,W,t){"use strict";var A=t(71828),g=t(7901),i=t(6964),P=t(53581);function y(e){return e.data.data.pid}W.findEntryWithLevel=function(e,r){var l;return r&&e.eachAfter(function(a){if(W.getPtId(a)===r)return l=a.copy()}),l||e},W.findEntryWithChild=function(e,r){var l;return e.eachAfter(function(a){for(var s=a.children||[],c=0;c<s.length;c++)if(W.getPtId(s[c])===r)return l=a.copy()}),l||e},W.isEntry=function(e){return!e.parent},W.isLeaf=function(e){return!e.children},W.getPtId=function(e){return e.data.data.id},W.getPtLabel=function(e){return e.data.data.label},W.getValue=function(e){return e.value},W.isHierarchyRoot=function(e){return""===y(e)},W.setSliceCursor=function(e,r,l){var a=l.isTransitioning;if(!a){var s=e.datum();a=l.hideOnRoot&&W.isHierarchyRoot(s)||l.hideOnLeaves&&W.isLeaf(s)}i(e,a?null:"pointer")},W.getInsideTextFontKey=function(e,r,l,a,s){var m=l.data.data.i;return A.castOption(r,m,((s||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+e)||A.castOption(r,m,"textfont."+e)||a.size},W.getOutsideTextFontKey=function(e,r,l,a){var s=l.data.data.i;return A.castOption(r,s,"outsidetextfont."+e)||A.castOption(r,s,"textfont."+e)||a.size},W.isOutsideText=function(e,r){return!e._hasColorscale&&W.isHierarchyRoot(r)},W.determineTextFont=function(e,r,l,a){return W.isOutsideText(e,r)?function C(e,r,l){return{color:W.getOutsideTextFontKey("color",e,r,l),family:W.getOutsideTextFontKey("family",e,r,l),size:W.getOutsideTextFontKey("size",e,r,l)}}(e,r,l):function u(e,r,l,a){var c=r.data.data,f=c.i,m=A.castOption(e,f,((a||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");return!m&&e._input.textfont&&(m=A.castOption(e._input,f,"textfont.color")),{color:m||g.contrast(c.color),family:W.getInsideTextFontKey("family",e,r,l,a),size:W.getInsideTextFontKey("size",e,r,l,a)}}(e,r,l,a)},W.hasTransition=function(e){return!!(e&&e.duration>0)},W.getMaxDepth=function(e){return e.maxdepth>=0?e.maxdepth:1/0},W.isHeader=function(e,r){return!(W.isLeaf(e)||e.depth===r._maxDepth-1)},W.getParent=function(e,r){return W.findEntryWithLevel(e,y(r))},W.listPath=function(e,r){var l=e.parent;if(!l)return[];var a=r?[l.data[r]]:[l];return W.listPath(l,r).concat(a)},W.getPath=function(e){return W.listPath(e,"label").join("/")+"/"},W.formatValue=P.formatPieValue,W.formatPercent=function(e,r){var l=A.formatPercent(e,0);return"0%"===l&&(l=P.formatPiePercent(e,r)),l}},87619:function(q,W,t){"use strict";q.exports={moduleType:"trace",name:"sunburst",basePlotModule:t(66888),categories:[],animatable:!0,attributes:t(57564),layoutAttributes:t(2654),supplyDefaults:t(17094),supplyLayoutDefaults:t(57034),calc:t(52147).calc,crossTraceCalc:t(52147).crossTraceCalc,plot:t(24714).plot,style:t(29969).style,colorbar:t(4898),meta:{}}},2654:function(q){"use strict";q.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57034:function(q,W,t){"use strict";var A=t(71828),g=t(2654);q.exports=function(P,C){function u(y,e){return A.coerce(P,C,g,y,e)}u("sunburstcolorway",C.colorway),u("extendsunburstcolors")}},24714:function(q,W,t){"use strict";var A=t(39898),g=t(674),i=t(81684).sX,P=t(91424),C=t(71828),u=t(63893),y=t(72597),e=y.recordMinTextSize,r=y.clearMinTextSize,l=t(14575),a=t(53581).getRotationAngle,s=l.computeTransform,c=l.transformInsideText,f=t(29969).styleOne,m=t(16688).resizeText,h=t(83523),w=t(7055),p=t(2791);function o(x,S,T,n){var E=x._context.staticPlot,d=x._fullLayout,F=!d.uniformtext.mode&&p.hasTransition(n),N=A.select(T).selectAll("g.slice"),k=S[0],O=k.trace,z=p.findEntryWithLevel(k.hierarchy,O.level),U=p.getMaxDepth(O),H=d._size,J=O.domain,it=H.h*(J.y[1]-J.y[0]),ut=.5*Math.min(H.w*(J.x[1]-J.x[0]),it),Q=k.cx=H.l+H.w*(J.x[1]+J.x[0])/2,j=k.cy=H.t+H.h*(1-J.y[0])-it/2;if(!z)return N.remove();var Z=null,G={};F&&N.each(function(Vt){G[p.getPtId(Vt)]={rpx0:Vt.rpx0,rpx1:Vt.rpx1,x0:Vt.x0,x1:Vt.x1,transform:Vt.transform},!Z&&p.isEntry(Vt)&&(Z=Vt)});var K=function v(x){return g.partition().size([2*Math.PI,x.height+1])(x)}(z).descendants(),at=z.height+1,$=0,X=U;k.hasMultipleRoots&&p.isHierarchyRoot(z)&&(K=K.slice(1),at-=1,$=1,X+=1),K=K.filter(function(Vt){return Vt.y1<=X});var rt=a(O.rotation);rt&&K.forEach(function(Vt){Vt.x0+=rt,Vt.x1+=rt});var et=Math.min(at,U),st=function(Vt){return(Vt-$)/et*ut},dt=function(Vt,te){return[Vt*Math.cos(te),-Vt*Math.sin(te)]},bt=function(Vt){return C.pathAnnulus(Vt.rpx0,Vt.rpx1,Vt.x0,Vt.x1,Q,j)},gt=function(Vt){return Q+b(Vt)[0]*(Vt.transform.rCenter||0)+(Vt.transform.x||0)},Lt=function(Vt){return j+b(Vt)[1]*(Vt.transform.rCenter||0)+(Vt.transform.y||0)};(N=N.data(K,p.getPtId)).enter().append("g").classed("slice",!0),F?N.exit().transition().each(function(){var Vt=A.select(this);Vt.select("path.surface").transition().attrTween("d",function(Bt){var Ot=function At(Vt){var Ot,te=p.getPtId(Vt),Qt=G[te],Bt=G[p.getPtId(z)];if(Bt){var qt=(Vt.x1>Bt.x1?2*Math.PI:0)+rt;Ot=Vt.rpx1<Bt.rpx1?{x0:Vt.x0,x1:Vt.x1,rpx0:0,rpx1:0}:{x0:qt,x1:qt,rpx0:Vt.rpx0,rpx1:Vt.rpx1}}else{var ie,oe=p.getPtId(Vt.parent);N.each(function(Et){if(p.getPtId(Et)===oe)return ie=Et});var de,pe=ie.children;pe.forEach(function(Et,St){if(p.getPtId(Et)===te)return de=St});var Fe=pe.length,Kt=i(ie.x0,ie.x1);Ot={rpx0:ut,rpx1:ut,x0:Kt(de/Fe),x1:Kt((de+1)/Fe)}}return i(Qt,Ot)}(Bt);return function(qt){return bt(Ot(qt))}}),Vt.select("g.slicetext").attr("opacity",0)}).remove():N.exit().remove(),N.order();var It=null;if(F&&Z){var Mt=p.getPtId(Z);N.each(function(Vt){null===It&&p.getPtId(Vt)===Mt&&(It=Vt.x1)})}var xt=N;function Wt(Vt){var Qt,te=G[p.getPtId(Vt)],Bt=Vt.transform;if(te)Qt=te;else if(Qt={rpx1:Vt.rpx1,transform:{textPosAngle:Bt.textPosAngle,scale:0,rotate:Bt.rotate,rCenter:Bt.rCenter,x:Bt.x,y:Bt.y}},Z)if(Vt.parent)if(It){var Ot=Vt.x1>It?2*Math.PI:0;Qt.x0=Qt.x1=Ot}else C.extendFlat(Qt,Pt(Vt));else Qt.x0=Qt.x1=rt;else Qt.x0=Qt.x1=rt;var qt=i(Qt.transform.textPosAngle,Vt.transform.textPosAngle),ie=i(Qt.rpx1,Vt.rpx1),oe=i(Qt.x0,Vt.x0),pe=i(Qt.x1,Vt.x1),de=i(Qt.transform.scale,Bt.scale),Fe=i(Qt.transform.rotate,Bt.rotate),Kt=0===Bt.rCenter?3:0===Qt.transform.rCenter?1/3:1,Et=i(Qt.transform.rCenter,Bt.rCenter);return function(Dt){var Ft=ie(Dt),Nt=oe(Dt),Rt=pe(Dt),wt=function(Dt){return Et(Math.pow(Dt,Kt))}(Dt),kt={pxmid:dt(Ft,(Nt+Rt)/2),rpx1:Ft,transform:{textPosAngle:qt(Dt),rCenter:wt,x:Bt.x,y:Bt.y}};return e(O.type,Bt,d),{transform:{targetX:gt(kt),targetY:Lt(kt),scale:de(Dt),rotate:Fe(Dt),rCenter:wt}}}}function Pt(Vt){var te=Vt.parent,Qt=G[p.getPtId(te)],Bt={};if(Qt){var Ot=te.children,qt=Ot.indexOf(Vt),ie=Ot.length,oe=i(Qt.x0,Qt.x1);Bt.x0=oe(qt/ie),Bt.x1=oe(qt/ie)}else Bt.x0=Bt.x1=0;return Bt}F&&(xt=xt.transition().each("end",function(){var Vt=A.select(this);p.setSliceCursor(Vt,x,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),xt.each(function(Vt){var te=A.select(this),Qt=C.ensureSingle(te,"path","surface",function(pe){pe.style("pointer-events",E?"none":"all")});Vt.rpx0=st(Vt.y0),Vt.rpx1=st(Vt.y1),Vt.xmid=(Vt.x0+Vt.x1)/2,Vt.pxmid=dt(Vt.rpx1,Vt.xmid),Vt.midangle=-(Vt.xmid-Math.PI/2),Vt.startangle=-(Vt.x0-Math.PI/2),Vt.stopangle=-(Vt.x1-Math.PI/2),Vt.halfangle=.5*Math.min(C.angleDelta(Vt.x0,Vt.x1)||Math.PI,Math.PI),Vt.ring=1-Vt.rpx0/Vt.rpx1,Vt.rInscribed=function M(x){return 0===x.rpx0&&C.isFullCircle([x.x0,x.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(x.halfangle)),x.ring/2))}(Vt),F?Qt.transition().attrTween("d",function(pe){var de=function Gt(Vt){var Qt,te=G[p.getPtId(Vt)],Bt={x0:Vt.x0,x1:Vt.x1,rpx0:Vt.rpx0,rpx1:Vt.rpx1};if(te)Qt=te;else if(Z)if(Vt.parent)if(It){var Ot=(Vt.x1>It?2*Math.PI:0)+rt;Qt={x0:Ot,x1:Ot}}else C.extendFlat(Qt={rpx0:ut,rpx1:ut},Pt(Vt));else Qt={rpx0:0,rpx1:0};else Qt={x0:rt,x1:rt};return i(Qt,Bt)}(pe);return function(Fe){return bt(de(Fe))}}):Qt.attr("d",bt),te.call(h,z,x,S,{eventDataKeys:w.eventDataKeys,transitionTime:w.CLICK_TRANSITION_TIME,transitionEasing:w.CLICK_TRANSITION_EASING}).call(p.setSliceCursor,x,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:x._transitioning}),Qt.call(f,Vt,O,x);var Bt=C.ensureSingle(te,"g","slicetext"),Ot=C.ensureSingle(Bt,"text","",function(pe){pe.attr("data-notex",1)}),qt=C.ensureUniformFontSize(x,p.determineTextFont(O,Vt,d.font));Ot.text(W.formatSliceLabel(Vt,z,O,S,d)).classed("slicetext",!0).attr("text-anchor","middle").call(P.font,qt).call(u.convertToTspans,x);var ie=P.bBox(Ot.node());Vt.transform=c(ie,Vt,k),Vt.transform.targetX=gt(Vt),Vt.transform.targetY=Lt(Vt);var oe=function(pe,de){var Fe=pe.transform;return s(Fe,de),Fe.fontSize=qt.size,e(O.type,Fe,d),C.getTextTransform(Fe)};F?Ot.transition().attrTween("transform",function(pe){var de=Wt(pe);return function(Fe){return oe(de(Fe),ie)}}):Ot.attr("transform",oe(Vt,ie))})}function b(x){return function L(x,S){return[x*Math.sin(S),-x*Math.cos(S)]}(x.rpx1,x.transform.textPosAngle)}W.plot=function(x,S,T,n){var F,D,E=x._fullLayout,d=E._sunburstlayer,N=!T,k=!E.uniformtext.mode&&p.hasTransition(T);r("sunburst",E),(F=d.selectAll("g.trace.sunburst").data(S,function(B){return B[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),F.order(),k?(n&&(D=n()),A.transition().duration(T.duration).ease(T.easing).each("end",function(){D&&D()}).each("interrupt",function(){D&&D()}).each(function(){d.selectAll("g.trace").each(function(B){o(x,B,this,T)})})):(F.each(function(B){o(x,B,this,T)}),E.uniformtext.mode&&m(x,E._sunburstlayer.selectAll(".trace"),"sunburst")),N&&F.exit().remove()},W.formatSliceLabel=function(x,S,T,n,E){var d=T.texttemplate,F=T.textinfo;if(!(d||F&&"none"!==F))return"";var D=E.separators,k=x.data.data,O=n[0].hierarchy,B=p.isHierarchyRoot(x),z=p.getParent(O,x),U=p.getValue(x);if(!d){var it,H=F.split("+"),J=function($){return-1!==H.indexOf($)},nt=[];if(J("label")&&k.label&&nt.push(k.label),k.hasOwnProperty("v")&&J("value")&&nt.push(p.formatValue(k.v,D)),!B){J("current path")&&nt.push(p.getPath(x.data));var ut=0;J("percent parent")&&ut++,J("percent entry")&&ut++,J("percent root")&&ut++;var Q=ut>1;if(ut){var j,Z=function($){it=p.formatPercent(j,D),Q&&(it+=" of "+$),nt.push(it)};J("percent parent")&&!B&&(j=U/p.getValue(z),Z("parent")),J("percent entry")&&(j=U/p.getValue(S),Z("entry")),J("percent root")&&(j=U/p.getValue(O),Z("root"))}}return J("text")&&(it=C.castOption(T,k.i,"text"),C.isValidTextValue(it)&&nt.push(it)),nt.join("<br>")}var G=C.castOption(T,k.i,"texttemplate");if(!G)return"";var K={};k.label&&(K.label=k.label),k.hasOwnProperty("v")&&(K.value=k.v,K.valueLabel=p.formatValue(k.v,D)),K.currentPath=p.getPath(x.data),B||(K.percentParent=U/p.getValue(z),K.percentParentLabel=p.formatPercent(K.percentParent,D),K.parent=p.getPtLabel(z)),K.percentEntry=U/p.getValue(S),K.percentEntryLabel=p.formatPercent(K.percentEntry,D),K.entry=p.getPtLabel(S),K.percentRoot=U/p.getValue(O),K.percentRootLabel=p.formatPercent(K.percentRoot,D),K.root=p.getPtLabel(O),k.hasOwnProperty("color")&&(K.color=k.color);var at=C.castOption(T,k.i,"text");return(C.isValidTextValue(at)||""===at)&&(K.text=at),K.customdata=C.castOption(T,k.i,"customdata"),C.texttemplateString(G,K,E._d3locale,K,T._meta||{})}},29969:function(q,W,t){"use strict";var A=t(39898),g=t(7901),i=t(71828),P=t(72597).resizeText,C=t(43467);function y(e,r,l,a){var c=!r.children,f=r.data.data.i,m=i.castOption(l,f,"marker.line.color")||g.defaultLine,h=i.castOption(l,f,"marker.line.width")||0;e.call(C,r,l,a).style("stroke-width",h).call(g.stroke,m).style("opacity",c?l.leaf.opacity:null)}q.exports={style:function u(e){var r=e._fullLayout._sunburstlayer.selectAll(".trace");P(e,r,"sunburst"),r.each(function(l){var a=A.select(this),c=l[0].trace;a.style("opacity",c.opacity),a.selectAll("path.surface").each(function(f){A.select(this).call(y,f,c,e)})})},styleOne:y}},54532:function(q,W,t){"use strict";var A=t(7901),g=t(50693),i=t(12663).axisHoverFormat,P=t(5386).fF,C=t(9012),u=t(1426).extendFlat,y=t(30962).overrideAll;function r(a){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:A.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:A.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var l=q.exports=y(u({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:P(),xhoverformat:i("x"),yhoverformat:i("y"),zhoverformat:i("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},g("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:r(),y:r(),z:r()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:u({},g.zauto,{}),zmin:u({},g.zmin,{}),zmax:u({},g.zmax,{})},hoverinfo:u({},C.hoverinfo),showlegend:u({},C.showlegend,{dflt:!1})}),"calc","nested");l.x.editType=l.y.editType=l.z.editType="calc+clearAxisTypes",l.transforms=void 0},18396:function(q,W,t){"use strict";var A=t(78803);q.exports=function(i,P){A(i,P,P.surfacecolor?{vals:P.surfacecolor,containerStr:"",cLetter:"c"}:{vals:P.z,containerStr:"",cLetter:"c"})}},43768:function(q,W,t){"use strict";var A=t(9330).gl_surface3d,g=t(9330).ndarray,i=t(9330).ndarray_linear_interpolate.d2,P=t(824),C=t(43907),u=t(71828).isArrayOrTypedArray,y=t(81697).parseColorScale,e=t(78614),r=t(21081).extractOpts;function l(n,E,d){this.scene=n,this.uid=d,this.surface=E,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var a=l.prototype;a.getXat=function(n,E,d,F){var D=u(this.data.x)?u(this.data.x[0])?this.data.x[E][n]:this.data.x[n]:n;return void 0===d?D:F.d2l(D,0,d)},a.getYat=function(n,E,d,F){var D=u(this.data.y)?u(this.data.y[0])?this.data.y[E][n]:this.data.y[E]:E;return void 0===d?D:F.d2l(D,0,d)},a.getZat=function(n,E,d,F){var D=this.data.z[E][n];return null===D&&this.data.connectgaps&&this.data._interpolatedZ&&(D=this.data._interpolatedZ[E][n]),void 0===d?D:F.d2l(D,0,d)},a.handlePick=function(n){if(n.object===this.surface){var d=(n.data.index[1]-1)/this.dataScaleY-1,F=Math.max(Math.min(Math.round((n.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),D=Math.max(Math.min(Math.round(d),this.data._ylength-1),0);n.index=[F,D],n.traceCoordinate=[this.getXat(F,D),this.getYat(F,D),this.getZat(F,D)],n.dataCoordinate=[this.getXat(F,D,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(F,D,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(F,D,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var N=0;N<3;N++)null!=n.dataCoordinate[N]&&(n.dataCoordinate[N]*=this.scene.dataScale[N]);var O=this.data.hovertext||this.data.text;return n.textLabel=Array.isArray(O)&&O[D]&&void 0!==O[D][F]?O[D][F]:O||"",n.data.dataCoordinate=n.dataCoordinate.slice(),this.surface.highlight(n.data),this.scene.glplot.spikes.position=n.dataCoordinate,!0}};var c=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function f(n,E){if(n<E)return 0;for(var d=0;0===Math.floor(n%E);)n/=E,d++;return d}function m(n){for(var E=[],d=0;d<c.length;d++)E.push(f(n,c[d]));return E}function h(n){for(var E=m(n),d=n,F=0;F<c.length;F++)if(E[F]>0){d=c[F];break}return d}function w(n,E){if(!(n<1||E<1)){for(var d=m(n),F=m(E),D=1,N=0;N<c.length;N++)D*=Math.pow(c[N],Math.max(d[N],F[N]));return D}}a.calcXnums=function(n){var E,d=[];for(E=1;E<n;E++){var F=this.getXat(E-1,0),D=this.getXat(E,0);d[E-1]=D!==F&&null!=F&&null!=D?Math.abs(D-F):0}var N=0;for(E=1;E<n;E++)N+=d[E-1];for(E=1;E<n;E++)d[E-1]=0===d[E-1]?1:Math.round(N/d[E-1]);return d},a.calcYnums=function(n){var E,d=[];for(E=1;E<n;E++){var F=this.getYat(0,E-1),D=this.getYat(0,E);d[E-1]=D!==F&&null!=F&&null!=D?Math.abs(D-F):0}var N=0;for(E=1;E<n;E++)N+=d[E-1];for(E=1;E<n;E++)d[E-1]=0===d[E-1]?1:Math.round(N/d[E-1]);return d};var o=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],v=o[9],M=o[13];function b(n,E,d){var F=d[8]+d[2]*E[0]+d[5]*E[1];return n[0]=(d[6]+d[0]*E[0]+d[3]*E[1])/F,n[1]=(d[7]+d[1]*E[0]+d[4]*E[1])/F,n}function L(n,E,d){return function x(n,E,d,F){for(var D=[0,0],N=n.shape[0],k=n.shape[1],O=0;O<N;O++)for(var B=0;B<k;B++)d(D,[O,B],F),n.set(O,B,i(E,D[0],D[1]));return n}(n,E,b,d),n}function S(n,E){for(var d=!1,F=0;F<n.length;F++)if(E===n[F]){d=!0;break}!1===d&&n.push(E)}a.estimateScale=function(n,E){for(var F=1+function p(n){if(0!==n.length){for(var E=1,d=0;d<n.length;d++)E=w(E,n[d]);return E}}(0===E?this.calcXnums(n):this.calcYnums(n));F<v;)F*=2;for(;F>M;)F--,F/=h(F),++F<v&&(F=M);var D=Math.round(F/n);return D>1?D:1},a.refineCoords=function(n){for(var E=this.dataScaleX,d=this.dataScaleY,F=n[0].shape[0],D=n[0].shape[1],N=0|Math.floor(n[0].shape[0]*E+1),k=0|Math.floor(n[0].shape[1]*d+1),O=1+F+1,B=1+D+1,z=g(new Float32Array(O*B),[O,B]),U=[1/E,0,0,0,1/d,0,0,0,1],H=0;H<n.length;++H){this.surface.padField(z,n[H]);var J=g(new Float32Array(N*k),[N,k]);L(J,z,U),n[H]=J}},a.setContourLevels=function(){var F,D,n=[[],[],[]],E=[!1,!1,!1],d=!1;for(F=0;F<3;++F)if(this.showContour[F]&&(d=!0,this.contourSize[F]>0&&null!==this.contourStart[F]&&null!==this.contourEnd[F]&&this.contourEnd[F]>this.contourStart[F]))for(E[F]=!0,D=this.contourStart[F];D<this.contourEnd[F];D+=this.contourSize[F])S(n[F],D*this.scene.dataScale[F]);if(d){var k=[[],[],[]];for(F=0;F<3;++F)this.showContour[F]&&(k[F]=E[F]?n[F]:this.scene.contourLevels[F]);this.surface.update({levels:k})}},a.update=function(n){var E=this.scene,d=E.fullSceneLayout,F=this.surface,D=y(n),N=E.dataScale,k=n.z[0].length,O=n._ylength,B=E.contourLevels;this.data=n;var z,U,H,J,nt=[];for(z=0;z<3;z++)for(nt[z]=[],U=0;U<k;U++)nt[z][U]=[];for(U=0;U<k;U++)for(H=0;H<O;H++)nt[0][U][H]=this.getXat(U,H,n.xcalendar,d.xaxis),nt[1][U][H]=this.getYat(U,H,n.ycalendar,d.yaxis),nt[2][U][H]=this.getZat(U,H,n.zcalendar,d.zaxis);if(n.connectgaps)for(n._emptypoints=C(nt[2]),P(nt[2],n._emptypoints),n._interpolatedZ=[],U=0;U<k;U++)for(n._interpolatedZ[U]=[],H=0;H<O;H++)n._interpolatedZ[U][H]=nt[2][U][H];for(z=0;z<3;z++)for(U=0;U<k;U++)for(H=0;H<O;H++)null==(J=nt[z][U][H])?nt[z][U][H]=NaN:J=nt[z][U][H]*=N[z];for(z=0;z<3;z++)for(U=0;U<k;U++)for(H=0;H<O;H++)null!=(J=nt[z][U][H])&&(this.minValues[z]>J&&(this.minValues[z]=J),this.maxValues[z]<J&&(this.maxValues[z]=J));for(z=0;z<3;z++)this.objectOffset[z]=.5*(this.minValues[z]+this.maxValues[z]);for(z=0;z<3;z++)for(U=0;U<k;U++)for(H=0;H<O;H++)null!=(J=nt[z][U][H])&&(nt[z][U][H]-=this.objectOffset[z]);var it=[g(new Float32Array(k*O),[k,O]),g(new Float32Array(k*O),[k,O]),g(new Float32Array(k*O),[k,O])];for(z=0;z<3;z++)for(U=0;U<k;U++)for(H=0;H<O;H++)it[z].set(U,H,nt[z][U][H]);nt=[];var ut={colormap:D,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!n.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:n.opacityscale,opacity:n.opacity},Q=r(n);if(ut.intensityBounds=[Q.min,Q.max],n.surfacecolor){var j=g(new Float32Array(k*O),[k,O]);for(U=0;U<k;U++)for(H=0;H<O;H++)j.set(U,H,n.surfacecolor[H][U]);it.push(j)}else ut.intensityBounds[0]*=N[2],ut.intensityBounds[1]*=N[2];(M<it[0].shape[0]||M<it[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(it[0].shape[0],0),this.dataScaleY=this.estimateScale(it[0].shape[1],1),(1!==this.dataScaleX||1!==this.dataScaleY)&&this.refineCoords(it)),n.surfacecolor&&(ut.intensity=it.pop());var Z=[!0,!0,!0],G=["x","y","z"];for(z=0;z<3;++z){var K=n.contours[G[z]];Z[z]=K.highlight,ut.showContour[z]=K.show||K.highlight,ut.showContour[z]&&(ut.contourProject[z]=[K.project.x,K.project.y,K.project.z],K.show?(this.showContour[z]=!0,ut.levels[z]=B[z],F.highlightColor[z]=ut.contourColor[z]=e(K.color),F.highlightTint[z]=ut.contourTint[z]=K.usecolormap?0:1,ut.contourWidth[z]=K.width,this.contourStart[z]=K.start,this.contourEnd[z]=K.end,this.contourSize[z]=K.size):(this.showContour[z]=!1,this.contourStart[z]=null,this.contourEnd[z]=null,this.contourSize[z]=0),K.highlight&&(ut.dynamicColor[z]=e(K.highlightcolor),ut.dynamicWidth[z]=K.highlightwidth))}(function s(n){var E=n[0].rgb,d=n[n.length-1].rgb;return E[0]===d[0]&&E[1]===d[1]&&E[2]===d[2]&&E[3]===d[3]})(D)&&(ut.vertexColor=!0),ut.objectOffset=this.objectOffset,ut.coords=it,F.update(ut),F.visible=n.visible,F.enableDynamic=Z,F.enableHighlight=Z,F.snapToData=!0,"lighting"in n&&(F.ambientLight=n.lighting.ambient,F.diffuseLight=n.lighting.diffuse,F.specularLight=n.lighting.specular,F.roughness=n.lighting.roughness,F.fresnel=n.lighting.fresnel),"lightposition"in n&&(F.lightPosition=[n.lightposition.x,n.lightposition.y,n.lightposition.z])},a.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},q.exports=function T(n,E){var F=A({gl:n.glplot.gl}),D=new l(n,F,E.uid);return F._trace=D,D.update(E),n.glplot.add(F),D}},91831:function(q,W,t){"use strict";var A=t(73972),g=t(71828),i=t(1586),P=t(54532);function r(a,s,c,f){var m=f("opacityscale");"max"===m?s.opacityscale=[[0,.1],[1,1]]:"min"===m?s.opacityscale=[[0,1],[1,.1]]:"extremes"===m?s.opacityscale=function u(a,s){for(var c=[],m=0;m<32;m++){var h=m/31,w=s+(1-s)*(1-Math.pow(Math.sin(a*h*Math.PI),2));c.push([h,Math.max(0,Math.min(1,w))])}return c}(1,.1):function y(a){var s=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||0!=+a[0][0]||1!=+a[a.length-1][0])return!1;for(var c=0;c<a.length;c++){var f=a[c];if(2!==f.length||+f[0]<s)return!1;s=+f[0]}return!0}(m)||(s.opacityscale=void 0)}function l(a,s,c){s in a&&!(c in a)&&(a[c]=a[s])}q.exports={supplyDefaults:function e(a,s,c,f){var m,h;function w(n,E){return g.coerce(a,s,P,n,E)}var p=w("x"),o=w("y"),v=w("z");if(!v||!v.length||p&&p.length<1||o&&o.length<1)s.visible=!1;else{s._xlength=Array.isArray(p)&&g.isArrayOrTypedArray(p[0])?v.length:v[0].length,s._ylength=v.length,A.getComponentMethod("calendars","handleTraceDefaults")(a,s,["x","y","z"],f),w("text"),w("hovertext"),w("hovertemplate"),w("xhoverformat"),w("yhoverformat"),w("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(n){w(n)});var b=w("surfacecolor"),L=["x","y","z"];for(m=0;m<3;++m){var x="contours."+L[m],S=w(x+".show"),T=w(x+".highlight");if(S||T)for(h=0;h<3;++h)w(x+".project."+L[h]);S&&(w(x+".color"),w(x+".width"),w(x+".usecolormap")),T&&(w(x+".highlightcolor"),w(x+".highlightwidth")),w(x+".start"),w(x+".end"),w(x+".size")}b||(l(a,"zmin","cmin"),l(a,"zmax","cmax"),l(a,"zauto","cauto")),i(a,s,f,w,{prefix:"",cLetter:"c"}),r(0,s,0,w),s._length=null}},opacityscaleDefaults:r}},93601:function(q,W,t){"use strict";q.exports={attributes:t(54532),supplyDefaults:t(91831).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:t(18396),plot:t(43768),moduleType:"trace",name:"surface",basePlotModule:t(58547),categories:["gl3d","2dMap","showLegend"],meta:{}}},44464:function(q,W,t){"use strict";var A=t(50215),g=t(1426).extendFlat,i=t(30962).overrideAll,P=t(41940),C=t(27670).Y,u=t(12663).descriptionOnlyNumbers;(q.exports=i({domain:C({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:u("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:g({},A.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:g({},P({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:u("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:g({},A.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:g({},P({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},99469:function(q,W,t){"use strict";var A=t(27659).a0,g=t(36736),i="table";W.name=i,W.plot=function(P){var C=A(P.calcdata,i)[0];C.length&&g(P,C)},W.clean=function(P,C,u,y){var e=y._has&&y._has(i),r=C._has&&C._has(i);e&&!r&&y._paperdiv.selectAll(".table").remove()}},76333:function(q,W,t){"use strict";var A=t(28984).wrap;q.exports=function(){return A({})}},49850:function(q){"use strict";q.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},51018:function(q,W,t){"use strict";var A=t(49850),g=t(1426).extendFlat,i=t(92770);function P(s){if(Array.isArray(s)){for(var c=0,f=0;f<s.length;f++)c=Math.max(c,P(s[f]));return c}return s}function C(s,c){return s+c}function u(s){var h,c=s.slice(),f=1/0,m=0;for(h=0;h<c.length;h++)Array.isArray(c[h])||(c[h]=[c[h]]),f=Math.min(f,c[h].length),m=Math.max(m,c[h].length);if(f!==m)for(h=0;h<c.length;h++){var w=m-c[h].length;w&&(c[h]=c[h].concat(y(w)))}return c}function y(s){for(var c=new Array(s),f=0;f<s;f++)c[f]="";return c}function e(s){return s.calcdata.columns.reduce(function(c,f){return f.xIndex<s.xIndex?c+f.columnWidth:c},0)}function r(s,c){return Object.keys(s).map(function(m){return g({},s[m],{auxiliaryBlocks:c})})}function l(s,c){for(var m,f={},h=0,w=0,p={firstRowIndex:null,lastRowIndex:null,rows:[]},o=0,v=0,M=0;M<s.length;M++)p.rows.push({rowIndex:M,rowHeight:m=s[M]}),((w+=m)>=c||M===s.length-1)&&(f[h]=p,p.key=v++,p.firstRowIndex=o,p.lastRowIndex=M,p={firstRowIndex:null,lastRowIndex:null,rows:[]},h+=w,o=M+1,w=0);return f}q.exports=function(c,f){var m=u(f.cells.values),h=function(U){return U.slice(f.header.values.length,U.length)},w=u(f.header.values);w.length&&!w[0].length&&(w[0]=[""],w=u(w));var p=w.concat(h(m).map(function(){return y((w[0]||[""]).length)})),o=f.domain,v=Math.floor(c._fullLayout._size.w*(o.x[1]-o.x[0])),M=Math.floor(c._fullLayout._size.h*(o.y[1]-o.y[0])),b=f.header.values.length?p[0].map(function(){return f.header.height}):[A.emptyHeaderHeight],L=m.length?m[0].map(function(){return f.cells.height}):[],x=b.reduce(C,0),n=l(L,M-x+A.uplift),d=r(l(b,x),[]),F=r(n,d),D={},N=f._fullInput.columnorder.concat(h(m.map(function(U,H){return H}))),k=p.map(function(U,H){var J=Array.isArray(f.columnwidth)?f.columnwidth[Math.min(H,f.columnwidth.length-1)]:f.columnwidth;return i(J)?Number(J):1}),O=k.reduce(C,0);k=k.map(function(U){return U/O*v});var B=Math.max(P(f.header.line.width),P(f.cells.line.width)),z={key:f.uid+c._context.staticPlot,translateX:o.x[0]*c._fullLayout._size.w,translateY:c._fullLayout._size.h*(1-o.y[1]),size:c._fullLayout._size,width:v,maxLineWidth:B,height:M,columnOrder:N,groupHeight:M,rowBlocks:F,headerRowBlocks:d,scrollY:0,cells:g({},f.cells,{values:m}),headerCells:g({},f.header,{values:p}),gdColumns:p.map(function(U){return U[0]}),gdColumnsOriginalOrder:p.map(function(U){return U[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:p.map(function(U,H){return D[U]=(D[U]||0)+1,{key:U+"__"+D[U],label:U,specIndex:H,xIndex:N[H],xScale:e,x:void 0,calcdata:void 0,columnWidth:k[H]}})};return z.columns.forEach(function(U){U.calcdata=z,U.x=e(U)}),z}},56269:function(q,W,t){"use strict";var A=t(1426).extendFlat;W.splitToPanels=function(i){var P=[0,0],C=A({},i,{key:"header",type:"header",page:0,prevPages:P,currentRepaint:[null,null],dragHandle:!0,values:i.calcdata.headerCells.values[i.specIndex],rowBlocks:i.calcdata.headerRowBlocks,calcdata:A({},i.calcdata,{cells:i.calcdata.headerCells})});return[A({},i,{key:"cells1",type:"cells",page:0,prevPages:P,currentRepaint:[null,null],dragHandle:!1,values:i.calcdata.cells.values[i.specIndex],rowBlocks:i.calcdata.rowBlocks}),A({},i,{key:"cells2",type:"cells",page:1,prevPages:P,currentRepaint:[null,null],dragHandle:!1,values:i.calcdata.cells.values[i.specIndex],rowBlocks:i.calcdata.rowBlocks}),C]},W.splitToCells=function(i){var P=function g(i){var P=i.rowBlocks[i.page],C=P?P.rows[0].rowIndex:0;return[C,P?C+P.rows.length:0]}(i);return(i.values||[]).slice(P[0],P[1]).map(function(C,u){return{keyWithinBlock:u+("string"==typeof C&&C.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:P[0]+u,column:i,calcdata:i.calcdata,page:i.page,rowBlocks:i.rowBlocks,value:C}})}},39754:function(q,W,t){"use strict";var A=t(71828),g=t(44464),i=t(27670).c;q.exports=function(u,y,e,r){function l(a,s){return A.coerce(u,y,g,a,s)}i(y,r,l),l("columnwidth"),l("header.values"),l("header.format"),l("header.align"),l("header.prefix"),l("header.suffix"),l("header.height"),l("header.line.width"),l("header.line.color"),l("header.fill.color"),A.coerceFont(l,"header.font",A.extendFlat({},r.font)),function P(C,u){for(var e=C.header.values.length,r=(C.columnorder||[]).slice(0,e),l=r.slice().sort(function(c,f){return c-f}),a=r.map(function(c){return l.indexOf(c)}),s=a.length;s<e;s++)a.push(s);u("columnorder",a)}(y,l),l("cells.values"),l("cells.format"),l("cells.align"),l("cells.prefix"),l("cells.suffix"),l("cells.height"),l("cells.line.width"),l("cells.line.color"),l("cells.fill.color"),A.coerceFont(l,"cells.font",A.extendFlat({},r.font)),y._length=null}},96595:function(q,W,t){"use strict";q.exports={attributes:t(44464),supplyDefaults:t(39754),calc:t(76333),plot:t(36736),moduleType:"trace",name:"table",basePlotModule:t(99469),categories:["noOpacity"],meta:{}}},36736:function(q,W,t){"use strict";var A=t(49850),g=t(39898),P=t(71828).numberFormat,C=t(28984),u=t(91424),y=t(63893),e=t(71828).raiseToTop,r=t(71828).strTranslate,l=t(71828).cancelTransition,a=t(51018),s=t(56269),c=t(7901);function f(X){return Math.ceil(X.calcdata.maxLineWidth/2)}function m(X,rt){return"clip"+X._fullLayout._uid+"_scrollAreaBottomClip_"+rt.key}function h(X,rt){return"clip"+X._fullLayout._uid+"_columnBoundaryClippath_"+rt.calcdata.key+"_"+rt.specIndex}function w(X){return[].concat.apply([],X.map(function(rt){return rt})).map(function(rt){return rt.__data__})}function p(X,rt,et){var dt=X.selectAll("."+A.cn.scrollbarKit).data(C.repeat,C.keyFun);dt.enter().append("g").classed(A.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),dt.each(function(Mt){var xt=Mt.scrollbarState;xt.totalHeight=function st(Mt){var xt=Mt.rowBlocks;return Z(xt,xt.length-1)+(xt.length?G(xt[xt.length-1],1/0):1)}(Mt),xt.scrollableAreaHeight=Mt.groupHeight-z(Mt),xt.currentlyVisibleHeight=Math.min(xt.totalHeight,xt.scrollableAreaHeight),xt.ratio=xt.currentlyVisibleHeight/xt.totalHeight,xt.barLength=Math.max(xt.ratio*xt.currentlyVisibleHeight,A.goldenRatio*A.scrollbarWidth),xt.barWiggleRoom=xt.currentlyVisibleHeight-xt.barLength,xt.wiggleRoom=Math.max(0,xt.totalHeight-xt.scrollableAreaHeight),xt.topY=0===xt.barWiggleRoom?0:Mt.scrollY/xt.wiggleRoom*xt.barWiggleRoom,xt.bottomY=xt.topY+xt.barLength,xt.dragMultiplier=xt.wiggleRoom/xt.barWiggleRoom}).attr("transform",function(Mt){return r(Mt.width+A.scrollbarWidth/2+A.scrollbarOffset,z(Mt))});var bt=dt.selectAll("."+A.cn.scrollbar).data(C.repeat,C.keyFun);bt.enter().append("g").classed(A.cn.scrollbar,!0);var gt=bt.selectAll("."+A.cn.scrollbarSlider).data(C.repeat,C.keyFun);gt.enter().append("g").classed(A.cn.scrollbarSlider,!0),gt.attr("transform",function(Mt){return r(0,Mt.scrollbarState.topY||0)});var Lt=gt.selectAll("."+A.cn.scrollbarGlyph).data(C.repeat,C.keyFun);Lt.enter().append("line").classed(A.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",A.scrollbarWidth).attr("stroke-linecap","round").attr("y1",A.scrollbarWidth/2),Lt.attr("y2",function(Mt){return Mt.scrollbarState.barLength-A.scrollbarWidth/2}).attr("stroke-opacity",function(Mt){return Mt.columnDragInProgress||!Mt.scrollbarState.barWiggleRoom||et?0:.4}),Lt.transition().delay(0).duration(0),Lt.transition().delay(A.scrollbarHideDelay).duration(A.scrollbarHideDuration).attr("stroke-opacity",0);var It=bt.selectAll("."+A.cn.scrollbarCaptureZone).data(C.repeat,C.keyFun);It.enter().append("line").classed(A.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",A.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(Mt){var xt=g.event.y,At=this.getBoundingClientRect(),Gt=Mt.scrollbarState,Wt=xt-At.top,Pt=g.scale.linear().domain([0,Gt.scrollableAreaHeight]).range([0,Gt.totalHeight]).clamp(!0);Gt.topY<=Wt&&Wt<=Gt.bottomY||J(rt,X,null,Pt(Wt-Gt.barLength/2))(Mt)}).call(g.behavior.drag().origin(function(Mt){return g.event.stopPropagation(),Mt.scrollbarState.scrollbarScrollInProgress=!0,Mt}).on("drag",J(rt,X)).on("dragend",function(){})),It.attr("y2",function(Mt){return Mt.scrollbarState.scrollableAreaHeight}),rt._context.staticPlot&&(Lt.remove(),It.remove())}function o(X,rt,et,st){var bt=function M(X){var rt=X.selectAll("."+A.cn.columnCell).data(s.splitToCells,function(et){return et.keyWithinBlock});return rt.enter().append("g").classed(A.cn.columnCell,!0),rt.exit().remove(),rt}(function v(X){var rt=X.selectAll("."+A.cn.columnCells).data(C.repeat,C.keyFun);return rt.enter().append("g").classed(A.cn.columnCells,!0),rt.exit().remove(),rt}(et));(function S(X){X.each(function(rt,et){var st=rt.calcdata.cells.font,dt=rt.column.specIndex,bt={size:N(st.size,dt,et),color:N(st.color,dt,et),family:N(st.family,dt,et)};rt.rowNumber=rt.key,rt.align=N(rt.calcdata.cells.align,dt,et),rt.cellBorderWidth=N(rt.calcdata.cells.line.width,dt,et),rt.font=bt})})(bt),function n(X){X.attr("width",function(rt){return rt.column.columnWidth}).attr("stroke-width",function(rt){return rt.cellBorderWidth}).each(function(rt){var et=g.select(this);c.stroke(et,N(rt.calcdata.cells.line.color,rt.column.specIndex,rt.rowNumber)),c.fill(et,N(rt.calcdata.cells.fill.color,rt.column.specIndex,rt.rowNumber))})}(function b(X){var rt=X.selectAll("."+A.cn.cellRect).data(C.repeat,function(et){return et.keyWithinBlock});return rt.enter().append("rect").classed(A.cn.cellRect,!0),rt}(bt));var It=function L(X){var rt=X.selectAll("."+A.cn.cellText).data(C.repeat,function(et){return et.keyWithinBlock});return rt.enter().append("text").classed(A.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){g.event.stopPropagation()}),rt}(function x(X){var rt=X.selectAll("."+A.cn.cellTextHolder).data(C.repeat,function(et){return et.keyWithinBlock});return rt.enter().append("g").classed(A.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),rt}(bt));(function T(X){X.each(function(rt){u.font(g.select(this),rt.font)})})(It),E(It,rt,st,X),j(bt)}function E(X,rt,et,st){X.text(function(dt){var bt=dt.column.specIndex,gt=dt.rowNumber,Lt=dt.value,It="string"==typeof Lt,Mt=It&&Lt.match(/<br>/i),xt=!It||Mt;dt.mayHaveMarkup=It&&Lt.match(/[<&>]/);var At=function d(X){return"string"==typeof X&&X.match(A.latexCheck)}(Lt);dt.latex=At;var te,Qt,Gt=At?"":N(dt.calcdata.cells.prefix,bt,gt)||"",Wt=At?"":N(dt.calcdata.cells.suffix,bt,gt)||"",Pt=At?null:N(dt.calcdata.cells.format,bt,gt)||null,Vt=Gt+(Pt?P(Pt)(dt.value):dt.value)+Wt;if(dt.wrappingNeeded=!dt.wrapped&&!xt&&!At&&(te=F(Vt)),dt.cellHeightMayIncrease=Mt||At||dt.mayHaveMarkup||(void 0===te?F(Vt):te),dt.needsConvertToTspans=dt.mayHaveMarkup||dt.wrappingNeeded||dt.latex,dt.wrappingNeeded){var Ot=(" "===A.wrapSplitCharacter?Vt.replace(/<a href=/gi,"<a_href="):Vt).split(A.wrapSplitCharacter),qt=" "===A.wrapSplitCharacter?Ot.map(function(ie){return ie.replace(/<a_href=/gi,"<a href=")}):Ot;dt.fragments=qt.map(function(ie){return{text:ie,width:null}}),dt.fragments.push({fragment:A.wrapSpacer,width:null}),Qt=qt.join(A.lineBreaker)+A.lineBreaker+A.wrapSpacer}else delete dt.fragments,Qt=Vt;return Qt}).attr("dy",function(dt){return dt.needsConvertToTspans?0:"0.75em"}).each(function(dt){var gt=g.select(this);dt.needsConvertToTspans?y.convertToTspans(gt,st,(dt.wrappingNeeded?it:ut)(et,this,rt,st,dt)):g.select(this.parentNode).attr("transform",function(It){return r(Q(It),A.cellPad)}).attr("text-anchor",function(It){return{left:"start",center:"middle",right:"end"}[It.align]})})}function F(X){return-1!==X.indexOf(A.wrapSplitCharacter)}function N(X,rt,et){if(Array.isArray(X)){var st=X[Math.min(rt,X.length-1)];return Array.isArray(st)?st[Math.min(et,st.length-1)]:st}return X}function k(X,rt,et){X.transition().ease(A.releaseTransitionEase).duration(A.releaseTransitionDuration).attr("transform",r(rt.x,et))}function O(X){return"cells"===X.type}function B(X){return"header"===X.type}function z(X){return(X.rowBlocks.length?X.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(et,st){return et+G(st,1/0)},0)}function H(X,rt,et){var st=w(rt)[0];if(void 0!==st){var dt=st.rowBlocks,bt=st.calcdata,gt=Z(dt,dt.length),Lt=st.calcdata.groupHeight-z(st),It=bt.scrollY=Math.max(0,Math.min(gt-Lt,bt.scrollY)),Mt=function U(X,rt,et){for(var st=[],dt=0,bt=0;bt<X.length;bt++){for(var gt=X[bt],Lt=gt.rows,It=0,Mt=0;Mt<Lt.length;Mt++)It+=Lt[Mt].rowHeight;gt.allRowsHeight=It,rt<dt+It&&rt+et>dt&&st.push(bt),dt+=It}return st}(dt,It,Lt);1===Mt.length&&(Mt[0]===dt.length-1?Mt.unshift(Mt[0]-1):Mt.push(Mt[0]+1)),Mt[0]%2&&Mt.reverse(),rt.each(function(xt,At){xt.page=Mt[At],xt.scrollY=It}),rt.attr("transform",function(xt){var At=Z(xt.rowBlocks,xt.page)-xt.scrollY;return r(0,At)}),X&&(nt(X,et,rt,Mt,st.prevPages,st,0),nt(X,et,rt,Mt,st.prevPages,st,1),p(et,X))}}function J(X,rt,et,st){return function(bt){var gt=bt.calcdata?bt.calcdata:bt,Lt=rt.filter(function(At){return gt.key===At.key}),Mt=gt.scrollY;gt.scrollY=void 0===st?gt.scrollY+(et||gt.scrollbarState.dragMultiplier)*g.event.dy:st;var xt=Lt.selectAll("."+A.cn.yColumn).selectAll("."+A.cn.columnBlock).filter(O);return H(X,xt,Lt),gt.scrollY===Mt}}function nt(X,rt,et,st,dt,bt,gt){st[gt]!==dt[gt]&&(clearTimeout(bt.currentRepaint[gt]),bt.currentRepaint[gt]=setTimeout(function(){var It=et.filter(function(Mt,xt){return xt===gt&&st[xt]!==dt[xt]});o(X,rt,It,et),dt[gt]=st[gt]}))}function it(X,rt,et,st){return function(){var bt=g.select(rt.parentNode);bt.each(function(gt){var Lt=gt.fragments;bt.selectAll("tspan.line").each(function(Vt,te){Lt[te].width=this.getComputedTextLength()});var At,Gt,It=Lt[Lt.length-1].width,Mt=Lt.slice(0,-1),xt=[],Wt=0,Pt=gt.column.columnWidth-2*A.cellPad;for(gt.value="";Mt.length;)Wt+(Gt=(At=Mt.shift()).width+It)>Pt&&(gt.value+=xt.join(A.wrapSpacer)+A.lineBreaker,xt=[],Wt=0),xt.push(At.text),Wt+=Gt;Wt&&(gt.value+=xt.join(A.wrapSpacer)),gt.wrapped=!0}),bt.selectAll("tspan.line").remove(),E(bt.select("."+A.cn.cellText),et,X,st),g.select(rt.parentNode.parentNode).call(j)}}function ut(X,rt,et,st,dt){return function(){if(!dt.settledY){var gt=g.select(rt.parentNode),Lt=at(dt),It=dt.key-Lt.firstRowIndex,Mt=Lt.rows[It].rowHeight,xt=dt.cellHeightMayIncrease?rt.parentNode.getBoundingClientRect().height+2*A.cellPad:Mt,At=Math.max(xt,Mt);At-Lt.rows[It].rowHeight&&(Lt.rows[It].rowHeight=At,X.selectAll("."+A.cn.columnCell).call(j),H(null,X.filter(O),0),p(et,st,!0)),gt.attr("transform",function(){var Vt=this.parentNode.getBoundingClientRect(),te=g.select(this.parentNode).select("."+A.cn.cellRect).node().getBoundingClientRect(),Qt=this.transform.baseVal.consolidate(),Bt=te.top-Vt.top+(Qt?Qt.matrix.f:A.cellPad);return r(Q(dt,g.select(this.parentNode).select("."+A.cn.cellTextHolder).node().getBoundingClientRect().width),Bt)}),dt.settledY=!0}}}function Q(X,rt){switch(X.align){case"left":default:return A.cellPad;case"right":return X.column.columnWidth-(rt||0)-A.cellPad;case"center":return(X.column.columnWidth-(rt||0))/2}}function j(X){X.attr("transform",function(rt){var et=rt.rowBlocks[0].auxiliaryBlocks.reduce(function(gt,Lt){return gt+G(Lt,1/0)},0),dt=G(at(rt),rt.key);return r(0,dt+et)}).selectAll("."+A.cn.cellRect).attr("height",function(rt){return function $(X,rt){return X.rows[rt-X.firstRowIndex]}(at(rt),rt.key).rowHeight})}function Z(X,rt){for(var et=0,st=rt-1;st>=0;st--)et+=K(X[st]);return et}function G(X,rt){for(var et=0,st=0;st<X.rows.length&&X.rows[st].rowIndex<rt;st++)et+=X.rows[st].rowHeight;return et}function K(X){var rt=X.allRowsHeight;if(void 0!==rt)return rt;for(var et=0,st=0;st<X.rows.length;st++)et+=X.rows[st].rowHeight;return X.allRowsHeight=et,et}function at(X){return X.rowBlocks[X.page]}q.exports=function(rt,et){var st=!rt._context.staticPlot,dt=rt._fullLayout._paper.selectAll("."+A.cn.table).data(et.map(function(Bt){var Ot=C.unwrap(Bt);return a(rt,Ot.trace)}),C.keyFun);dt.exit().remove(),dt.enter().append("g").classed(A.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),dt.attr("width",function(Bt){return Bt.width+Bt.size.l+Bt.size.r}).attr("height",function(Bt){return Bt.height+Bt.size.t+Bt.size.b}).attr("transform",function(Bt){return r(Bt.translateX,Bt.translateY)});var bt=dt.selectAll("."+A.cn.tableControlView).data(C.repeat,C.keyFun),gt=bt.enter().append("g").classed(A.cn.tableControlView,!0).style("box-sizing","content-box");if(st){var Lt="onwheel"in document?"wheel":"mousewheel";gt.on("mousemove",function(Bt){bt.filter(function(Ot){return Bt===Ot}).call(p,rt)}).on(Lt,function(Bt){Bt.scrollbarState.wheeling||(Bt.scrollbarState.wheeling=!0,J(rt,bt,null,Bt.scrollY+g.event.deltaY)(Bt)||(g.event.stopPropagation(),g.event.preventDefault()),Bt.scrollbarState.wheeling=!1)}).call(p,rt,!0)}bt.attr("transform",function(Bt){return r(Bt.size.l,Bt.size.t)});var It=bt.selectAll("."+A.cn.scrollBackground).data(C.repeat,C.keyFun);It.enter().append("rect").classed(A.cn.scrollBackground,!0).attr("fill","none"),It.attr("width",function(Bt){return Bt.width}).attr("height",function(Bt){return Bt.height}),bt.each(function(Bt){u.setClipUrl(g.select(this),m(rt,Bt),rt)});var Mt=bt.selectAll("."+A.cn.yColumn).data(function(Bt){return Bt.columns},C.keyFun);Mt.enter().append("g").classed(A.cn.yColumn,!0),Mt.exit().remove(),Mt.attr("transform",function(Bt){return r(Bt.x,0)}),st&&Mt.call(g.behavior.drag().origin(function(Bt){return k(g.select(this),Bt,-A.uplift),e(this),Bt.calcdata.columnDragInProgress=!0,p(bt.filter(function(qt){return Bt.calcdata.key===qt.key}),rt),Bt}).on("drag",function(Bt){var Ot=g.select(this),qt=function(pe){return(Bt===pe?g.event.x:pe.x)+pe.columnWidth/2};Bt.x=Math.max(-A.overdrag,Math.min(Bt.calcdata.width+A.overdrag-Bt.columnWidth,g.event.x)),w(Mt).filter(function(pe){return pe.calcdata.key===Bt.calcdata.key}).sort(function(pe,de){return qt(pe)-qt(de)}).forEach(function(pe,de){pe.xIndex=de,pe.x=Bt===pe?pe.x:pe.xScale(pe)}),Mt.filter(function(pe){return Bt!==pe}).transition().ease(A.transitionEase).duration(A.transitionDuration).attr("transform",function(pe){return r(pe.x,0)}),Ot.call(l).attr("transform",r(Bt.x,-A.uplift))}).on("dragend",function(Bt){var Ot=g.select(this),qt=Bt.calcdata;Bt.x=Bt.xScale(Bt),Bt.calcdata.columnDragInProgress=!1,k(Ot,Bt,0),function D(X,rt,et){var st=rt.gdColumnsOriginalOrder;rt.gdColumns.sort(function(dt,bt){return et[st.indexOf(dt)]-et[st.indexOf(bt)]}),rt.columnorder=et,X.emit("plotly_restyle")}(rt,qt,qt.columns.map(function(ie){return ie.xIndex}))})),Mt.each(function(Bt){u.setClipUrl(g.select(this),h(rt,Bt),rt)});var xt=Mt.selectAll("."+A.cn.columnBlock).data(s.splitToPanels,C.keyFun);xt.enter().append("g").classed(A.cn.columnBlock,!0).attr("id",function(Bt){return Bt.key}),xt.style("cursor",function(Bt){return Bt.dragHandle?"ew-resize":Bt.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var At=xt.filter(B),Gt=xt.filter(O);st&&Gt.call(g.behavior.drag().origin(function(Bt){return g.event.stopPropagation(),Bt}).on("drag",J(rt,bt,-1)).on("dragend",function(){})),o(rt,bt,At,xt),o(rt,bt,Gt,xt);var Wt=bt.selectAll("."+A.cn.scrollAreaClip).data(C.repeat,C.keyFun);Wt.enter().append("clipPath").classed(A.cn.scrollAreaClip,!0).attr("id",function(Bt){return m(rt,Bt)});var Pt=Wt.selectAll("."+A.cn.scrollAreaClipRect).data(C.repeat,C.keyFun);Pt.enter().append("rect").classed(A.cn.scrollAreaClipRect,!0).attr("x",-A.overdrag).attr("y",-A.uplift).attr("fill","none"),Pt.attr("width",function(Bt){return Bt.width+2*A.overdrag}).attr("height",function(Bt){return Bt.height+A.uplift}),Mt.selectAll("."+A.cn.columnBoundary).data(C.repeat,C.keyFun).enter().append("g").classed(A.cn.columnBoundary,!0);var te=Mt.selectAll("."+A.cn.columnBoundaryClippath).data(C.repeat,C.keyFun);te.enter().append("clipPath").classed(A.cn.columnBoundaryClippath,!0),te.attr("id",function(Bt){return h(rt,Bt)});var Qt=te.selectAll("."+A.cn.columnBoundaryRect).data(C.repeat,C.keyFun);Qt.enter().append("rect").classed(A.cn.columnBoundaryRect,!0).attr("fill","none"),Qt.attr("width",function(Bt){return Bt.columnWidth+2*f(Bt)}).attr("height",function(Bt){return Bt.calcdata.height+2*f(Bt)+A.uplift}).attr("x",function(Bt){return-f(Bt)}).attr("y",function(Bt){return-f(Bt)}),H(null,Gt,bt)}},45802:function(q,W,t){"use strict";var A=t(5386).fF,g=t(5386).si,i=t(50693),P=t(27670).Y,C=t(34e3),u=t(57564),y=t(43473),e=t(1426).extendFlat,r=t(79952).u;q.exports={labels:u.labels,parents:u.parents,values:u.values,branchvalues:u.branchvalues,count:u.count,level:u.level,maxdepth:u.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:e({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:u.marker.colors,pattern:r,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:u.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},i("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:e({},C.textfont,{}),editType:"calc"},text:C.text,textinfo:u.textinfo,texttemplate:g({editType:"plot"},{keys:y.eventDataKeys.concat(["label","value"])}),hovertext:C.hovertext,hoverinfo:u.hoverinfo,hovertemplate:A({},{keys:y.eventDataKeys}),textfont:C.textfont,insidetextfont:C.insidetextfont,outsidetextfont:e({},C.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:C.sort,root:u.root,domain:P({name:"treemap",trace:!0,editType:"calc"})}},78018:function(q,W,t){"use strict";var A=t(74875);W.name="treemap",W.plot=function(g,i,P,C){A.plotBasePlot(W.name,g,i,P,C)},W.clean=function(g,i,P,C){A.cleanBasePlot(W.name,g,i,P,C)}},65039:function(q,W,t){"use strict";var A=t(52147);W.y=function(g,i){return A.calc(g,i)},W.T=function(g){return A._runCrossTraceCalc("treemap",g)}},43473:function(q){"use strict";q.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},91174:function(q,W,t){"use strict";var A=t(71828),g=t(45802),i=t(7901),P=t(27670).c,C=t(90769).handleText,u=t(97313).TEXTPAD,y=t(37434).handleMarkerDefaults,e=t(21081),r=e.hasColorscale,l=e.handleDefaults;q.exports=function(s,c,f,m){function h(n,E){return A.coerce(s,c,g,n,E)}var w=h("labels"),p=h("parents");if(w&&w.length&&p&&p.length){var o=h("values");h(o&&o.length?"branchvalues":"count"),h("level"),h("maxdepth"),"squarify"===h("tiling.packing")&&h("tiling.squarifyratio"),h("tiling.flip"),h("tiling.pad");var M=h("text");h("texttemplate"),c.texttemplate||h("textinfo",Array.isArray(M)?"text+label":"label"),h("hovertext"),h("hovertemplate");var b=h("pathbar.visible");C(s,c,m,h,"auto",{hasPathbar:b,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),h("textposition");var x=-1!==c.textposition.indexOf("bottom");y(s,c,m,h),(c._hasColorscale=r(s,"marker","colors")||(s.marker||{}).coloraxis)?l(s,c,m,h,{prefix:"marker.",cLetter:"c"}):h("marker.depthfade",!(c.marker.colors||[]).length);var T=2*c.textfont.size;h("marker.pad.t",x?T/4:T),h("marker.pad.l",T/4),h("marker.pad.r",T/4),h("marker.pad.b",x?T:T/4),h("marker.cornerradius"),c._hovered={marker:{line:{width:2,color:i.contrast(m.paper_bgcolor)}}},b&&(h("pathbar.thickness",c.pathbar.textfont.size+2*u),h("pathbar.side"),h("pathbar.edgeshape")),h("sort"),h("root.color"),P(c,m,h),c._length=null}else c.visible=!1}},80694:function(q,W,t){"use strict";var A=t(39898),g=t(2791),P=t(72597).clearMinTextSize,C=t(16688).resizeText,u=t(46650);q.exports=function(e,r,l,a,s){var w,p,c=s.type,f=s.drawDescendants,m=e._fullLayout,h=m["_"+c+"layer"],o=!l;P(c,m),(w=h.selectAll("g.trace."+c).data(r,function(M){return M[0].trace.uid})).enter().append("g").classed("trace",!0).classed(c,!0),w.order(),!m.uniformtext.mode&&g.hasTransition(l)?(a&&(p=a()),A.transition().duration(l.duration).ease(l.easing).each("end",function(){p&&p()}).each("interrupt",function(){p&&p()}).each(function(){h.selectAll("g.trace").each(function(M){u(e,M,this,l,f)})})):(w.each(function(M){u(e,M,this,l,f)}),m.uniformtext.mode&&C(e,h.selectAll(".trace"),c)),o&&w.exit().remove()}},66209:function(q,W,t){"use strict";var A=t(39898),g=t(71828),i=t(91424),P=t(63893),C=t(37210),u=t(96362).styleOne,y=t(43473),e=t(2791),r=t(83523),l=!0;q.exports=function(s,c,f,m,h){var w=h.barDifY,p=h.width,o=h.height,v=h.viewX,M=h.viewY,b=h.pathSlice,L=h.toMoveInsideSlice,x=h.strTransform,S=h.hasTransition,T=h.handleSlicesExit,n=h.makeUpdateSliceInterpolator,E=h.makeUpdateTextInterpolator,d={},F=s._context.staticPlot,D=s._fullLayout,N=c[0],k=N.trace,O=N.hierarchy,B=p/k._entryDepth,z=e.listPath(f.data,"id"),U=C(O.copy(),[p,o],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(U=U.filter(function(J){var nt=z.indexOf(J.data.id);return-1!==nt&&(J.x0=B*nt,J.x1=B*(nt+1),J.y0=w,J.y1=w+o,J.onPathbar=!0,!0)})).reverse(),(m=m.data(U,e.getPtId)).enter().append("g").classed("pathbar",!0),T(m,l,d,[p,o],b),m.order();var H=m;S&&(H=H.transition().each("end",function(){var J=A.select(this);e.setSliceCursor(J,s,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),H.each(function(J){J._x0=v(J.x0),J._x1=v(J.x1),J._y0=M(J.y0),J._y1=M(J.y1),J._hoverX=v(J.x1-Math.min(p,o)/2),J._hoverY=M(J.y1-o/2);var nt=A.select(this),it=g.ensureSingle(nt,"path","surface",function(Z){Z.style("pointer-events",F?"none":"all")});S?it.transition().attrTween("d",function(Z){var G=n(Z,l,d,[p,o]);return function(K){return b(G(K))}}):it.attr("d",b),nt.call(r,f,s,c,{styleOne:u,eventDataKeys:y.eventDataKeys,transitionTime:y.CLICK_TRANSITION_TIME,transitionEasing:y.CLICK_TRANSITION_EASING}).call(e.setSliceCursor,s,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:s._transitioning}),it.call(u,J,k,s,{hovered:!1}),J._text=(e.getPtLabel(J)||"").split("<br>").join(" ")||"";var ut=g.ensureSingle(nt,"g","slicetext"),Q=g.ensureSingle(ut,"text","",function(Z){Z.attr("data-notex",1)}),j=g.ensureUniformFontSize(s,e.determineTextFont(k,J,D.font,{onPathbar:!0}));Q.text(J._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(i.font,j).call(P.convertToTspans,s),J.textBB=i.bBox(Q.node()),J.transform=L(J,{fontSize:j.size,onPathbar:!0}),J.transform.fontSize=j.size,S?Q.transition().attrTween("transform",function(Z){var G=E(Z,l,d,[p,o]);return function(K){return x(G(K))}}):Q.attr("transform",x(J))})}},52583:function(q,W,t){"use strict";var A=t(39898),g=t(71828),i=t(91424),P=t(63893),C=t(37210),u=t(96362).styleOne,y=t(43473),e=t(2791),r=t(83523),l=t(24714).formatSliceLabel,a=!1;q.exports=function(c,f,m,h,w){var p=w.width,o=w.height,v=w.viewX,M=w.viewY,b=w.pathSlice,L=w.toMoveInsideSlice,x=w.strTransform,S=w.hasTransition,T=w.handleSlicesExit,n=w.makeUpdateSliceInterpolator,E=w.makeUpdateTextInterpolator,d=w.prevEntry,D=c._context.staticPlot,N=c._fullLayout,O=f[0].trace,B=-1!==O.textposition.indexOf("left"),z=-1!==O.textposition.indexOf("right"),U=-1!==O.textposition.indexOf("bottom"),H=!U&&!O.marker.pad.t||U&&!O.marker.pad.b,nt=C(m,[p,o],{packing:O.tiling.packing,squarifyratio:O.tiling.squarifyratio,flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1,pad:{inner:O.tiling.pad,top:O.marker.pad.t,left:O.marker.pad.l,right:O.marker.pad.r,bottom:O.marker.pad.b}}).descendants(),it=1/0,ut=-1/0;nt.forEach(function(K){var at=K.depth;at>=O._maxDepth?(K.x0=K.x1=(K.x0+K.x1)/2,K.y0=K.y1=(K.y0+K.y1)/2):(it=Math.min(it,at),ut=Math.max(ut,at))}),h=h.data(nt,e.getPtId),O._maxVisibleLayers=isFinite(ut)?ut-it+1:0,h.enter().append("g").classed("slice",!0),T(h,a,{},[p,o],b),h.order();var Q=null;if(S&&d){var j=e.getPtId(d);h.each(function(K){null===Q&&e.getPtId(K)===j&&(Q={x0:K.x0,x1:K.x1,y0:K.y0,y1:K.y1})})}var Z=function(){return Q||{x0:0,x1:p,y0:0,y1:o}},G=h;return S&&(G=G.transition().each("end",function(){var K=A.select(this);e.setSliceCursor(K,c,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),G.each(function(K){var at=e.isHeader(K,O);K._x0=v(K.x0),K._x1=v(K.x1),K._y0=M(K.y0),K._y1=M(K.y1),K._hoverX=v(K.x1-O.marker.pad.r),K._hoverY=M(U?K.y1-O.marker.pad.b/2:K.y0+O.marker.pad.t/2);var $=A.select(this),X=g.ensureSingle($,"path","surface",function(dt){dt.style("pointer-events",D?"none":"all")});S?X.transition().attrTween("d",function(dt){var bt=n(dt,a,Z(),[p,o]);return function(gt){return b(bt(gt))}}):X.attr("d",b),$.call(r,m,c,f,{styleOne:u,eventDataKeys:y.eventDataKeys,transitionTime:y.CLICK_TRANSITION_TIME,transitionEasing:y.CLICK_TRANSITION_EASING}).call(e.setSliceCursor,c,{isTransitioning:c._transitioning}),X.call(u,K,O,c,{hovered:!1}),K._text=K.x0===K.x1||K.y0===K.y1?"":at?H?"":e.getPtLabel(K)||"":l(K,m,O,f,N)||"";var rt=g.ensureSingle($,"g","slicetext"),et=g.ensureSingle(rt,"text","",function(dt){dt.attr("data-notex",1)}),st=g.ensureUniformFontSize(c,e.determineTextFont(O,K,N.font));et.text(K._text||" ").classed("slicetext",!0).attr("text-anchor",z?"end":B||at?"start":"middle").call(i.font,st).call(P.convertToTspans,c),K.textBB=i.bBox(et.node()),K.transform=L(K,{fontSize:st.size,isHeader:at}),K.transform.fontSize=st.size,S?et.transition().attrTween("transform",function(dt){var bt=E(dt,a,Z(),[p,o]);return function(gt){return x(bt(gt))}}):et.attr("transform",x(K))}),Q}},14102:function(q){"use strict";q.exports=function W(t,A,g){var i;g.swapXY&&(i=t.x0,t.x0=t.y0,t.y0=i,i=t.x1,t.x1=t.y1,t.y1=i),g.flipX&&(i=t.x0,t.x0=A[0]-t.x1,t.x1=A[0]-i),g.flipY&&(i=t.y0,t.y0=A[1]-t.y1,t.y1=A[1]-i);var P=t.children;if(P)for(var C=0;C<P.length;C++)W(P[C],A,g)}},70954:function(q,W,t){"use strict";q.exports={moduleType:"trace",name:"treemap",basePlotModule:t(78018),categories:[],animatable:!0,attributes:t(45802),layoutAttributes:t(55479),supplyDefaults:t(91174),supplyLayoutDefaults:t(77182),calc:t(65039).y,crossTraceCalc:t(65039).T,plot:t(5893),style:t(96362).style,colorbar:t(4898),meta:{}}},55479:function(q){"use strict";q.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77182:function(q,W,t){"use strict";var A=t(71828),g=t(55479);q.exports=function(P,C){function u(y,e){return A.coerce(P,C,g,y,e)}u("treemapcolorway",C.colorway),u("extendtreemapcolors")}},37210:function(q,W,t){"use strict";var A=t(674),g=t(14102);q.exports=function(C,u,y){var m,e=y.flipX,r=y.flipY,l="dice-slice"===y.packing,a=y.pad[r?"bottom":"top"],s=y.pad[e?"right":"left"],c=y.pad[e?"left":"right"],f=y.pad[r?"top":"bottom"];l&&(m=s,s=a,a=m,m=c,c=f,f=m);var h=A.treemap().tile(function i(P,C){switch(P){case"squarify":return A.treemapSquarify.ratio(C);case"binary":return A.treemapBinary;case"dice":return A.treemapDice;case"slice":return A.treemapSlice;default:return A.treemapSliceDice}}(y.packing,y.squarifyratio)).paddingInner(y.pad.inner).paddingLeft(s).paddingRight(c).paddingTop(a).paddingBottom(f).size(l?[u[1],u[0]]:u)(C);return(l||e||r)&&g(h,u,{swapXY:l,flipX:e,flipY:r}),h}},5893:function(q,W,t){"use strict";var A=t(80694),g=t(52583);q.exports=function(P,C,u,y){return A(P,C,u,y,{type:"treemap",drawDescendants:g})}},46650:function(q,W,t){"use strict";var A=t(39898),g=t(81684).sX,i=t(2791),P=t(71828),C=t(97313).TEXTPAD,y=t(17295).toMoveInsideBar,r=t(72597).recordMinTextSize,l=t(43473),a=t(66209);function s(c){return i.isHierarchyRoot(c)?"":i.getPtId(c)}q.exports=function(f,m,h,w,p){var o=f._fullLayout,v=m[0],M=v.trace,L="icicle"===M.type,x=v.hierarchy,S=i.findEntryWithLevel(x,M.level),T=A.select(h),n=T.selectAll("g.pathbar"),E=T.selectAll("g.slice");if(!S)return n.remove(),void E.remove();var d=i.isHierarchyRoot(S),F=!o.uniformtext.mode&&i.hasTransition(w),D=i.getMaxDepth(M),k=o._size,O=M.domain,B=k.w*(O.x[1]-O.x[0]),z=k.h*(O.y[1]-O.y[0]),U=B,H=M.pathbar.thickness,J=M.marker.line.width+l.gapWithPathbar,nt=M.pathbar.visible?M.pathbar.side.indexOf("bottom")>-1?z+J:-(H+J):0,it={x0:U,x1:U,y0:nt,y1:nt+H},ut=function(Kt,Et,St){var Dt=M.tiling.pad,Ft=function(ft){return ft-Dt<=Et.x0},Nt=function(ft){return ft+Dt>=Et.x1},Rt=function(ft){return ft-Dt<=Et.y0},wt=function(ft){return ft+Dt>=Et.y1};return Kt.x0===Et.x0&&Kt.x1===Et.x1&&Kt.y0===Et.y0&&Kt.y1===Et.y1?{x0:Kt.x0,x1:Kt.x1,y0:Kt.y0,y1:Kt.y1}:{x0:Ft(Kt.x0-Dt)?0:Nt(Kt.x0-Dt)?St[0]:Kt.x0,x1:Ft(Kt.x1+Dt)?0:Nt(Kt.x1+Dt)?St[0]:Kt.x1,y0:Rt(Kt.y0-Dt)?0:wt(Kt.y0-Dt)?St[1]:Kt.y0,y1:Rt(Kt.y1+Dt)?0:wt(Kt.y1+Dt)?St[1]:Kt.y1}},Q=null,j={},Z={},G=null,K=function(Kt,Et){return Et?j[s(Kt)]:Z[s(Kt)]},at=function(Kt,Et,St,Dt){if(Et)return j[s(x)]||it;var Ft=Z[M.level]||St;return function(Kt){return Kt.data.depth-S.data.depth<D}(Kt)?ut(Kt,Ft,Dt):{}};v.hasMultipleRoots&&d&&D++,M._maxDepth=D,M._backgroundColor=o.paper_bgcolor,M._entryDepth=S.data.depth,M._atRootLevel=d;var $=-B/2+k.l+k.w*(O.x[1]+O.x[0])/2,X=-z/2+k.t+k.h*(1-(O.y[1]+O.y[0])/2),rt=function(Kt){return $+Kt},et=function(Kt){return X+Kt},st=et(0),dt=rt(0),bt=function(Kt){return dt+Kt},gt=function(Kt){return st+Kt};function Lt(Kt,Et){return Kt+","+Et}var It=bt(0),Mt=function(Kt){Kt.x=Math.max(It,Kt.x)},xt=M.pathbar.edgeshape,Gt=M[L?"tiling":"marker"].pad,Wt=function(Kt){return-1!==M.textposition.indexOf(Kt)},Pt=Wt("top"),Vt=Wt("left"),te=Wt("right"),Qt=Wt("bottom"),Ot=function(Kt,Et){var St=Kt.x0,Dt=Kt.x1,Ft=Kt.y0,Nt=Kt.y1,Rt=Kt.textBB,ft=Pt||Et.isHeader&&!Qt?"start":Qt?"end":"middle",pt=Wt("right"),kt=Wt("left")||Et.onPathbar;if(Et.isHeader){if((St+=(L?Gt:Gt.l)-C)>=(Dt-=(L?Gt:Gt.r)-C)){var ee=(St+Dt)/2;St=ee,Dt=ee}var se;Qt?Ft<(se=Nt-(L?Gt:Gt.b))&&se<Nt&&(Ft=se):Ft<(se=Ft+(L?Gt:Gt.t))&&se<Nt&&(Nt=se)}var Be=y(St,Dt,Ft,Nt,Rt,{isHorizontal:!1,constrained:!0,angle:0,anchor:ft,leftToRight:kt?-1:pt?1:0});return Be.fontSize=Et.fontSize,Be.targetX=rt(Be.targetX),Be.targetY=et(Be.targetY),isNaN(Be.targetX)||isNaN(Be.targetY)?{}:(St!==Dt&&Ft!==Nt&&r(M.type,Be,o),{scale:Be.scale,rotate:Be.rotate,textX:Be.textX,textY:Be.textY,anchorX:Be.anchorX,anchorY:Be.anchorY,targetX:Be.targetX,targetY:Be.targetY})},qt=function(Kt,Et){for(var St,Dt=0,Ft=Kt;!St&&Dt<D;)Dt++,(Ft=Ft.parent)?St=K(Ft,Et):Dt=D;return St||{}},oe=function(Kt,Et,St,Dt,Ft){var Rt,Nt=K(Kt,Et);if(Nt)Rt=Nt;else if(Et)Rt=it;else if(Q)if(Kt.parent){var wt=G||St;wt&&!Et?Rt=ut(Kt,wt,Dt):P.extendFlat(Rt={},qt(Kt,Et))}else Rt=P.extendFlat({},Kt),L&&("h"===Ft.orientation?Ft.flipX?Rt.x0=Kt.x1:Rt.x1=0:Ft.flipY?Rt.y0=Kt.y1:Rt.y1=0);else Rt={};return g(Rt,{x0:Kt.x0,x1:Kt.x1,y0:Kt.y0,y1:Kt.y1})},pe=function(Kt,Et,St,Dt){var Ft=K(Kt,Et),Nt={},Rt=at(Kt,Et,St,Dt);P.extendFlat(Nt,{transform:Ot({x0:Rt.x0,x1:Rt.x1,y0:Rt.y0,y1:Rt.y1,textBB:Kt.textBB,_text:Kt._text},{isHeader:i.isHeader(Kt,M)})}),Ft?Nt=Ft:Kt.parent&&P.extendFlat(Nt,qt(Kt,Et));var wt=Kt.transform;return Kt.x0!==Kt.x1&&Kt.y0!==Kt.y1&&r(M.type,wt,o),g(Nt,{transform:{scale:wt.scale,rotate:wt.rotate,textX:wt.textX,textY:wt.textY,anchorX:wt.anchorX,anchorY:wt.anchorY,targetX:wt.targetX,targetY:wt.targetY}})},de=function(Kt,Et,St,Dt,Ft){var Nt=Dt[0],Rt=Dt[1];F?Kt.exit().transition().each(function(){var wt=A.select(this);wt.select("path.surface").transition().attrTween("d",function(kt){var Zt=function(Kt,Et,St,Dt){var Nt,Ft=K(Kt,Et);if(Et)Nt=it;else{var Rt=K(S,Et);Nt=Rt?ut(Kt,Rt,Dt):{}}return g(Ft,Nt)}(kt,Et,0,[Nt,Rt]);return function(ee){return Ft(Zt(ee))}}),wt.select("g.slicetext").attr("opacity",0)}).remove():Kt.exit().remove()},Fe=function(Kt){var Et=Kt.transform;return Kt.x0!==Kt.x1&&Kt.y0!==Kt.y1&&r(M.type,Et,o),P.getTextTransform({textX:Et.textX,textY:Et.textY,anchorX:Et.anchorX,anchorY:Et.anchorY,targetX:Et.targetX,targetY:Et.targetY,scale:Et.scale,rotate:Et.rotate})};F&&(n.each(function(Kt){j[s(Kt)]={x0:Kt.x0,x1:Kt.x1,y0:Kt.y0,y1:Kt.y1},Kt.transform&&(j[s(Kt)].transform={textX:Kt.transform.textX,textY:Kt.transform.textY,anchorX:Kt.transform.anchorX,anchorY:Kt.transform.anchorY,targetX:Kt.transform.targetX,targetY:Kt.transform.targetY,scale:Kt.transform.scale,rotate:Kt.transform.rotate})}),E.each(function(Kt){Z[s(Kt)]={x0:Kt.x0,x1:Kt.x1,y0:Kt.y0,y1:Kt.y1},Kt.transform&&(Z[s(Kt)].transform={textX:Kt.transform.textX,textY:Kt.transform.textY,anchorX:Kt.transform.anchorX,anchorY:Kt.transform.anchorY,targetX:Kt.transform.targetX,targetY:Kt.transform.targetY,scale:Kt.transform.scale,rotate:Kt.transform.rotate}),!Q&&i.isEntry(Kt)&&(Q=Kt)})),G=p(f,m,S,E,{width:B,height:z,viewX:rt,viewY:et,pathSlice:function(Kt){var Et=rt(Kt.x0),St=rt(Kt.x1),Dt=et(Kt.y0),Ft=et(Kt.y1),Nt=St-Et,Rt=Ft-Dt;if(!Nt||!Rt)return"";var ft=Math.min(M.marker.cornerradius||0,Nt/2,Rt/2);ft&&Kt.data&&Kt.data.data&&Kt.data.data.label&&(Pt&&(ft=Math.min(ft,Gt.t)),Vt&&(ft=Math.min(ft,Gt.l)),te&&(ft=Math.min(ft,Gt.r)),Qt&&(ft=Math.min(ft,Gt.b)));var pt=function(kt,Zt){return ft?"a"+Lt(ft,ft)+" 0 0 1 "+Lt(kt,Zt):""};return"M"+Lt(Et,Dt+ft)+pt(ft,-ft)+"L"+Lt(St-ft,Dt)+pt(ft,ft)+"L"+Lt(St,Ft-ft)+pt(-ft,ft)+"L"+Lt(Et+ft,Ft)+pt(-ft,-ft)+"Z"},toMoveInsideSlice:Ot,prevEntry:Q,makeUpdateSliceInterpolator:oe,makeUpdateTextInterpolator:pe,handleSlicesExit:de,hasTransition:F,strTransform:Fe}),M.pathbar.visible?a(f,m,S,n,{barDifY:nt,width:U,height:H,viewX:bt,viewY:gt,pathSlice:function(Kt){var Et=bt(Math.max(Math.min(Kt.x0,Kt.x0),0)),St=bt(Math.min(Math.max(Kt.x1,Kt.x1),U)),Dt=gt(Kt.y0),Ft=gt(Kt.y1),Nt=H/2,Rt={},wt={};Rt.x=Et,wt.x=St,Rt.y=wt.y=(Dt+Ft)/2;var ft={x:Et,y:Dt},pt={x:St,y:Dt},kt={x:St,y:Ft},Zt={x:Et,y:Ft};return">"===xt?(ft.x-=Nt,pt.x-=Nt,kt.x-=Nt,Zt.x-=Nt):"/"===xt?(kt.x-=Nt,Zt.x-=Nt,Rt.x-=Nt/2,wt.x-=Nt/2):"\\"===xt?(ft.x-=Nt,pt.x-=Nt,Rt.x-=Nt/2,wt.x-=Nt/2):"<"===xt&&(Rt.x-=Nt,wt.x-=Nt),Mt(ft),Mt(Zt),Mt(Rt),Mt(pt),Mt(kt),Mt(wt),"M"+Lt(ft.x,ft.y)+"L"+Lt(pt.x,pt.y)+"L"+Lt(wt.x,wt.y)+"L"+Lt(kt.x,kt.y)+"L"+Lt(Zt.x,Zt.y)+"L"+Lt(Rt.x,Rt.y)+"Z"},toMoveInsideSlice:Ot,makeUpdateSliceInterpolator:oe,makeUpdateTextInterpolator:pe,handleSlicesExit:de,hasTransition:F,strTransform:Fe}):n.remove()}},96362:function(q,W,t){"use strict";var A=t(39898),g=t(7901),i=t(71828),P=t(2791),C=t(72597).resizeText,u=t(43467);function e(r,l,a,s,c){var w,p,f=(c||{}).hovered,m=l.data.data,h=m.i,o=m.color,v=P.isHierarchyRoot(l),M=1;if(f)w=a._hovered.marker.line.color,p=a._hovered.marker.line.width;else if(v&&o===a.root.color)M=100,w="rgba(0,0,0,0)",p=0;else if(w=i.castOption(a,h,"marker.line.color")||g.defaultLine,p=i.castOption(a,h,"marker.line.width")||0,!a._hasColorscale&&!l.onPathbar){var b=a.marker.depthfade;if(b){var x,L=g.combine(g.addOpacity(a._backgroundColor,.75),o);if(!0===b){var S=P.getMaxDepth(a);x=isFinite(S)?P.isLeaf(l)?0:a._maxVisibleLayers-(l.data.depth-a._entryDepth):l.data.height+1}else x=l.data.depth-a._entryDepth,a._atRootLevel||x++;if(x>0)for(var T=0;T<x;T++)o=g.combine(g.addOpacity(L,.5*T/x),o)}}r.call(u,l,a,s,o).style("stroke-width",p).call(g.stroke,w).style("opacity",M)}q.exports={style:function y(r){var l=r._fullLayout._treemaplayer.selectAll(".trace");C(r,l,"treemap"),l.each(function(a){var s=A.select(this),f=a[0].trace;s.style("opacity",f.opacity),s.selectAll("path.surface").each(function(m){A.select(this).call(e,m,f,r,{hovered:!1})})})},styleOne:e}},68875:function(q,W,t){"use strict";var A=t(53522),g=t(1426).extendFlat,i=t(12663).axisHoverFormat;q.exports={y:A.y,x:A.x,x0:A.x0,y0:A.y0,xhoverformat:i("x"),yhoverformat:i("y"),name:g({},A.name,{}),orientation:g({},A.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:A.fillcolor,points:g({},A.boxpoints,{}),jitter:g({},A.jitter,{}),pointpos:g({},A.pointpos,{}),width:g({},A.width,{}),marker:A.marker,text:A.text,hovertext:A.hovertext,hovertemplate:A.hovertemplate,quartilemethod:A.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup,selected:A.selected,unselected:A.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},38603:function(q,W,t){"use strict";var A=t(71828),g=t(89298),i=t(48518),P=t(60168),C=t(50606).BADNUM;function y(r,l,a){var s=l.max-l.min;if(!s)return r.bandwidth?r.bandwidth:0;if(r.bandwidth)return Math.max(r.bandwidth,s/1e4);var c=a.length,f=A.stdev(a,c-1,l.mean);return Math.max(function u(r,l,a){return 1.059*Math.min(l,a/1.349)*Math.pow(r,-.2)}(c,f,l.q3-l.q1),s/100)}function e(r,l,a,s){var w,c=r.spanmode,f=r.span||[],h=[l.min-2*s,l.max+2*s];function p(v){var M=f[v],b="multicategory"===a.type?a.r2c(M):a.d2c(M,0,r[l.valLetter+"calendar"]);return b===C?h[v]:b}var o={type:"linear",range:w="soft"===c?h:"hard"===c?[l.min,l.max]:[p(0),p(1)]};return g.setConvert(o),o.cleanRange(),w}q.exports=function(l,a){var s=i(l,a);if(s[0].t.empty)return s;for(var c=l._fullLayout,f=g.getFromId(l,a["h"===a.orientation?"xaxis":"yaxis"]),m=1/0,h=-1/0,w=0,p=0,o=0;o<s.length;o++){var v=s[o],M=v.pts.map(P.extractVal),b=v.bandwidth=y(a,v,M),L=v.span=e(a,v,f,b);if(v.min===v.max&&0===b)L=v.span=[v.min,v.max],v.density=[{v:1,t:L[0]}],v.bandwidth=b,w=Math.max(w,1);else{var x=L[1]-L[0],S=Math.ceil(x/(b/3)),T=x/S;if(!isFinite(T)||!isFinite(S))return A.error("Something went wrong with computing the violin span"),s[0].t.empty=!0,s;var n=P.makeKDE(v,a,M);v.density=new Array(S);for(var E=0,d=L[0];d<L[1]+T/2;E++,d+=T){var F=n(d);v.density[E]={v:F,t:d},w=Math.max(w,F)}}p=Math.max(p,M.length),m=Math.min(m,L[0]),h=Math.max(h,L[1])}var D=g.findExtremes(f,[m,h],{padded:!0});if(a._extremes[f._id]=D,a.width)s[0].t.maxKDE=w;else{var N=c._violinScaleGroupStats,k=a.scalegroup,O=N[k];O?(O.maxKDE=Math.max(O.maxKDE,w),O.maxCount=Math.max(O.maxCount,p)):N[k]={maxKDE:w,maxCount:p}}return s[0].t.labels.kde=A._(l,"kde:"),s}},86403:function(q,W,t){"use strict";var A=t(37188).setPositionOffset,g=["v","h"];q.exports=function(P,C){for(var u=P.calcdata,y=C.xaxis,e=C.yaxis,r=0;r<g.length;r++){for(var l=g[r],a="h"===l?e:y,s=[],c=0;c<u.length;c++){var f=u[c],h=f[0].trace;!0===h.visible&&"violin"===h.type&&!f[0].t.empty&&h.orientation===l&&h.xaxis===y._id&&h.yaxis===e._id&&s.push(c)}A("violin",P,s,a)}}},15899:function(q,W,t){"use strict";var A=t(71828),g=t(7901),i=t(36411),P=t(68875);q.exports=function(u,y,e,r){function l(T,n){return A.coerce(u,y,P,T,n)}function a(T,n){return A.coerce2(u,y,P,T,n)}if(i.handleSampleDefaults(u,y,l,r),!1!==y.visible){l("bandwidth"),l("side"),l("width")||(l("scalegroup",y.name),l("scalemode"));var f,c=l("span");Array.isArray(c)&&(f="manual"),l("spanmode",f);var m=l("line.color",(u.marker||{}).color||e),h=l("line.width"),w=l("fillcolor",g.addOpacity(y.line.color,.5));i.handlePointsDefaults(u,y,l,{prefix:""});var p=a("box.width"),o=a("box.fillcolor",w),v=a("box.line.color",m),M=a("box.line.width",h);l("box.visible",Boolean(p||o||v||M))||(y.box={visible:!1});var L=a("meanline.color",m),x=a("meanline.width",h);l("meanline.visible",Boolean(L||x))||(y.meanline={visible:!1}),l("quartilemethod")}}},60168:function(q,W,t){"use strict";var A=t(71828),g_gaussian=function(i){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*i*i)};W.makeKDE=function(i,P,C){var u=C.length,y=g_gaussian,e=i.bandwidth,r=1/(u*e);return function(l){for(var a=0,s=0;s<u;s++)a+=y((l-C[s])/e);return r*a}},W.getPositionOnKdePath=function(i,P,C){var u,y;"h"===P.orientation?(u="y",y="x"):(u="x",y="y");var e=A.findPointOnPath(i.path,C,y,{pathLength:i.pathLength}),r=i.posCenterPx,l=e[u];return[l,"both"===P.side?2*r-l:r]},W.getKdeValue=function(i,P,C){var u=i.pts.map(W.extractVal);return W.makeKDE(i,P,u)(C)/i.posDensityScale},W.extractVal=function(i){return i.v}},57634:function(q,W,t){"use strict";var A=t(7901),g=t(71828),i=t(89298),P=t(41868),C=t(60168);q.exports=function(y,e,r,l,a){a||(a={});var o,v,s=a.hoverLayer,c=y.cd,f=c[0].trace,m=f.hoveron,h=-1!==m.indexOf("violins"),w=-1!==m.indexOf("kde"),p=[];if(h||w){var M=P.hoverOnBoxes(y,e,r,l);if(w&&M.length>0){var x,S,T,n,E,b=y.xa,L=y.ya;"h"===f.orientation?(E=e,x="y",T=L,S="x",n=b):(E=r,x="x",T=b,S="y",n=L);var d=c[y.index];if(E>=d.span[0]&&E<=d.span[1]){var F=g.extendFlat({},y),D=n.c2p(E,!0),N=C.getKdeValue(d,f,E),k=C.getPositionOnKdePath(d,f,D),O=T._offset,B=T._length;F[x+"0"]=k[0],F[x+"1"]=k[1],F[S+"0"]=F[S+"1"]=D,F[S+"Label"]=S+": "+i.hoverLabelText(n,E,f[S+"hoverformat"])+", "+c[0].t.labels.kde+" "+N.toFixed(3);for(var z=0,U=0;U<M.length;U++)if("med"===M[U].attr){z=U;break}F.spikeDistance=M[z].spikeDistance;var H=x+"Spike";F[H]=M[z][H],M[z].spikeDistance=void 0,M[z][H]=void 0,F.hovertemplate=!1,p.push(F),(v={})[x+"1"]=g.constrain(O+k[0],O,O+B),v[x+"2"]=g.constrain(O+k[1],O,O+B),v[S+"1"]=v[S+"2"]=n._offset+D}}h&&(p=p.concat(M))}-1!==m.indexOf("points")&&(o=P.hoverOnPoints(y,e,r));var J=s.selectAll(".violinline-"+f.uid).data(v?[0]:[]);return J.enter().append("line").classed("violinline-"+f.uid,!0).attr("stroke-width",1.5),J.exit().remove(),J.attr(v).call(A.stroke,y.color),"closest"===l?o?[o]:p:(o&&p.push(o),p)}},47462:function(q,W,t){"use strict";q.exports={attributes:t(68875),layoutAttributes:t(9228),supplyDefaults:t(15899),crossTraceDefaults:t(36411).crossTraceDefaults,supplyLayoutDefaults:t(33598),calc:t(38603),crossTraceCalc:t(86403),plot:t(28443),style:t(31847),styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(57634),selectPoints:t(24626),moduleType:"trace",name:"violin",basePlotModule:t(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},9228:function(q,W,t){"use strict";var A=t(40094),g=t(71828).extendFlat;q.exports={violinmode:g({},A.boxmode,{}),violingap:g({},A.boxgap,{}),violingroupgap:g({},A.boxgroupgap,{})}},33598:function(q,W,t){"use strict";var A=t(71828),g=t(9228),i=t(4199);q.exports=function(C,u,y){i._supply(C,u,y,function e(r,l){return A.coerce(C,u,g,r,l)},"violin")}},28443:function(q,W,t){"use strict";var A=t(39898),g=t(71828),i=t(91424),P=t(86047),C=t(34621),u=t(60168);q.exports=function(e,r,l,a){var s=e._context.staticPlot,c=e._fullLayout,f=r.xaxis,m=r.yaxis;function h(w,p){var o=C(w,{xaxis:f,yaxis:m,trace:p,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return i.smoothopen(o[0],1)}g.makeTraceGroups(a,l,"trace violins").each(function(w){var p=A.select(this),o=w[0],v=o.t,M=o.trace;if(!0!==M.visible||v.empty)p.remove();else{var b=v.bPos,L=v.bdPos,x=r[v.valLetter+"axis"],S=r[v.posLetter+"axis"],T="both"===M.side,n=T||"positive"===M.side,E=T||"negative"===M.side,d=p.selectAll("path.violin").data(g.identity);d.enter().append("path").style("vector-effect",s?"none":"non-scaling-stroke").attr("class","violin"),d.exit().remove(),d.each(function(U){var Q,Z,G,K,at,$,X,rt,H=A.select(this),J=U.density,nt=J.length,it=S.c2l(U.pos+b,!0),ut=S.l2p(it);if(M.width)Q=v.maxKDE/L;else{var j=c._violinScaleGroupStats[M.scalegroup];Q="count"===M.scalemode?j.maxKDE/L*(j.maxCount/U.pts.length):j.maxKDE/L}if(n){for(X=new Array(nt),at=0;at<nt;at++)(rt=X[at]={})[v.posLetter]=it+J[at].v/Q,rt[v.valLetter]=x.c2l(J[at].t,!0);Z=h(X,M)}if(E){for(X=new Array(nt),$=0,at=nt-1;$<nt;$++,at--)(rt=X[$]={})[v.posLetter]=it-J[at].v/Q,rt[v.valLetter]=x.c2l(J[at].t,!0);G=h(X,M)}if(T)K=Z+"L"+G.substr(1)+"Z";else{var et=[ut,x.c2p(J[0].t)],st=[ut,x.c2p(J[nt-1].t)];"h"===M.orientation&&(et.reverse(),st.reverse()),K=n?"M"+et+"L"+Z.substr(1)+"L"+st:"M"+st+"L"+G.substr(1)+"L"+et}H.attr("d",K),U.posCenterPx=ut,U.posDensityScale=Q*L,U.path=H.node(),U.pathLength=U.path.getTotalLength()/(T?2:1)});var k,O,B,F=M.box,D=F.width,N=(F.line||{}).width;T?(k=L*D,O=0):n?(k=[0,L*D/2],O=N*{x:1,y:-1}[v.posLetter]):(k=[L*D/2,0],O=N*{x:-1,y:1}[v.posLetter]),P.plotBoxAndWhiskers(p,{pos:S,val:x},M,{bPos:b,bdPos:k,bPosPxOffset:O}),P.plotBoxMean(p,{pos:S,val:x},M,{bPos:b,bdPos:k,bPosPxOffset:O}),!M.box.visible&&M.meanline.visible&&(B=g.identity);var z=p.selectAll("path.meanline").data(B||[]);z.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",s?"none":"non-scaling-stroke"),z.exit().remove(),z.each(function(U){var H=x.c2p(U.mean,!0),J=u.getPositionOnKdePath(U,M,H);A.select(this).attr("d","h"===M.orientation?"M"+H+","+J[0]+"V"+J[1]:"M"+J[0]+","+H+"H"+J[1])}),P.plotPoints(p,{x:f,y:m},M,v)}})}},31847:function(q,W,t){"use strict";var A=t(39898),g=t(7901),i=t(16296).stylePoints;q.exports=function(C){var u=A.select(C).selectAll("g.trace.violins");u.style("opacity",function(y){return y[0].trace.opacity}),u.each(function(y){var e=y[0].trace,r=A.select(this),l=e.box||{},a=l.line||{},s=e.meanline||{},c=s.width;r.selectAll("path.violin").style("stroke-width",e.line.width+"px").call(g.stroke,e.line.color).call(g.fill,e.fillcolor),r.selectAll("path.box").style("stroke-width",a.width+"px").call(g.stroke,a.color).call(g.fill,l.fillcolor);var f={"stroke-width":c+"px","stroke-dasharray":2*c+"px,"+c+"px"};r.selectAll("path.mean").style(f).call(g.stroke,s.color),r.selectAll("path.meanline").style(f).call(g.stroke,s.color),i(r,e,C)})}},16336:function(q,W,t){"use strict";var A=t(50693),g=t(16249),i=t(54532),P=t(9012),C=t(1426).extendFlat,u=t(30962).overrideAll,y=q.exports=u(C({x:g.x,y:g.y,z:g.z,value:g.value,isomin:g.isomin,isomax:g.isomax,surface:g.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:g.slices,caps:g.caps,text:g.text,hovertext:g.hovertext,xhoverformat:g.xhoverformat,yhoverformat:g.yhoverformat,zhoverformat:g.zhoverformat,valuehoverformat:g.valuehoverformat,hovertemplate:g.hovertemplate},A("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:g.colorbar,opacity:g.opacity,opacityscale:i.opacityscale,lightposition:g.lightposition,lighting:g.lighting,flatshading:g.flatshading,contour:g.contour,hoverinfo:C({},P.hoverinfo),showlegend:C({},P.showlegend,{dflt:!1})}),"calc","nested");y.x.editType=y.y.editType=y.z.editType=y.value.editType="calc+clearAxisTypes",y.transforms=void 0},64809:function(q,W,t){"use strict";var A=t(9330).gl_mesh3d,g=t(81697).parseColorScale,i=t(78614),P=t(21081).extractOpts,C=t(90060),u=t(22674).findNearestOnAxis,y=t(22674).generateIsoMeshes;function e(a,s,c){this.scene=a,this.uid=c,this.mesh=s,this.name="",this.data=null,this.showContour=!1}var r=e.prototype;r.handlePick=function(a){if(a.object===this.mesh){var s=a.data.index,f=this.data._meshY[s],m=this.data._meshZ[s],h=this.data._Ys.length,w=this.data._Zs.length,p=u(this.data._meshX[s],this.data._Xs).id,o=u(f,this.data._Ys).id,v=u(m,this.data._Zs).id,M=a.index=v+w*o+w*h*p;a.traceCoordinate=[this.data._meshX[M],this.data._meshY[M],this.data._meshZ[M],this.data._value[M]];var b=this.data.hovertext||this.data.text;return Array.isArray(b)&&void 0!==b[M]?a.textLabel=b[M]:b&&(a.textLabel=b),!0}},r.update=function(a){var s=this.scene,c=s.fullSceneLayout;function f(o,v,M,b){return v.map(function(L){return o.d2l(L,0,b)*M})}this.data=y(a);var w={positions:C(f(c.xaxis,a._meshX,s.dataScale[0],a.xcalendar),f(c.yaxis,a._meshY,s.dataScale[1],a.ycalendar),f(c.zaxis,a._meshZ,s.dataScale[2],a.zcalendar)),cells:C(a._meshI,a._meshJ,a._meshK),lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,opacityscale:a.opacityscale,contourEnable:a.contour.show,contourColor:i(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading},p=P(a);w.vertexIntensity=a._meshIntensity,w.vertexIntensityBounds=[p.min,p.max],w.colormap=g(a),this.mesh.update(w)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},q.exports=function l(a,s){var f=A({gl:a.glplot.gl}),m=new e(a,f,s.uid);return f._trace=m,m.update(s),a.glplot.add(f),m}},47651:function(q,W,t){"use strict";var A=t(71828),g=t(16336),i=t(82738).supplyIsoDefaults,P=t(91831).opacityscaleDefaults;q.exports=function(u,y,e,r){function l(a,s){return A.coerce(u,y,g,a,s)}i(u,y,e,r,l),P(u,y,r,l)}},17659:function(q,W,t){"use strict";q.exports={attributes:t(16336),supplyDefaults:t(47651),calc:t(56959),colorbar:{min:"cmin",max:"cmax"},plot:t(64809),moduleType:"trace",name:"volume",basePlotModule:t(58547),categories:["gl3d","showLegend"],meta:{}}},43037:function(q,W,t){"use strict";var A=t(1486),g=t(82196).line,i=t(9012),P=t(12663).axisHoverFormat,C=t(5386).fF,u=t(5386).si,y=t(48334),e=t(1426).extendFlat,r=t(7901);function l(a){return{marker:{color:e({},A.marker.color,{arrayOk:!1,editType:"style"}),line:{color:e({},A.marker.line.color,{arrayOk:!1,editType:"style"}),width:e({},A.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}q.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:A.x,x0:A.x0,dx:A.dx,y:A.y,y0:A.y0,dy:A.dy,xperiod:A.xperiod,yperiod:A.yperiod,xperiod0:A.xperiod0,yperiod0:A.yperiod0,xperiodalignment:A.xperiodalignment,yperiodalignment:A.yperiodalignment,xhoverformat:P("x"),yhoverformat:P("y"),hovertext:A.hovertext,hovertemplate:C({},{keys:y.eventDataKeys}),hoverinfo:e({},i.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:u({editType:"plot"},{keys:y.eventDataKeys.concat(["label"])}),text:A.text,textposition:A.textposition,insidetextanchor:A.insidetextanchor,textangle:A.textangle,textfont:A.textfont,insidetextfont:A.insidetextfont,outsidetextfont:A.outsidetextfont,constraintext:A.constraintext,cliponaxis:A.cliponaxis,orientation:A.orientation,offset:A.offset,width:A.width,increasing:l(),decreasing:l(),totals:l(),connector:{line:{color:e({},g.color,{dflt:r.defaultLine}),width:e({},g.width,{editType:"plot"}),dash:g.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup}},52752:function(q,W,t){"use strict";var A=t(89298),g=t(42973),i=t(71828).mergeArray,P=t(66279),C=t(50606).BADNUM;function u(e){return"a"===e||"absolute"===e}function y(e){return"t"===e||"total"===e}q.exports=function(r,l){var c,f,m,h,w,p,a=A.getFromId(r,l.xaxis||"x"),s=A.getFromId(r,l.yaxis||"y");"h"===l.orientation?(c=a.makeCalcdata(l,"x"),m=s.makeCalcdata(l,"y"),h=g(l,s,"y",m),w=!!l.yperiodalignment,p="y"):(c=s.makeCalcdata(l,"y"),m=a.makeCalcdata(l,"x"),h=g(l,a,"x",m),w=!!l.xperiodalignment,p="x"),f=h.vals;for(var b,o=Math.min(f.length,c.length),v=new Array(o),M=0,L=!1,x=0;x<o;x++){var S=c[x]||0,T=!1;(c[x]!==C||y(l.measure[x])||u(l.measure[x]))&&x+1<o&&(c[x+1]!==C||y(l.measure[x+1])||u(l.measure[x+1]))&&(T=!0);var n=v[x]={i:x,p:f[x],s:S,rawS:S,cNext:T};u(l.measure[x])?(M=n.s,n.isSum=!0,n.dir="totals",n.s=M):y(l.measure[x])?(n.isSum=!0,n.dir="totals",n.s=M):(n.isSum=!1,n.dir=n.rawS<0?"decreasing":"increasing",n.s=M+(b=n.s),M+=b),"totals"===n.dir&&(L=!0),w&&(v[x].orig_p=m[x],v[x][p+"End"]=h.ends[x],v[x][p+"Start"]=h.starts[x]),l.ids&&(n.id=String(l.ids[x])),n.v=(l.base||0)+M}return v.length&&(v[0].hasTotals=L),i(l.text,v,"tx"),i(l.hovertext,v,"htx"),P(v,l),v}},48334:function(q){"use strict";q.exports={eventDataKeys:["initial","delta","final"]}},70766:function(q,W,t){"use strict";var A=t(11661).setGroupPositions;q.exports=function(i,P){var c,f,C=i._fullLayout,u=i._fullData,y=i.calcdata,e=P.xaxis,r=P.yaxis,l=[],a=[],s=[];for(f=0;f<u.length;f++){var m=u[f];!0===m.visible&&m.xaxis===e._id&&m.yaxis===r._id&&"waterfall"===m.type&&(c=y[f],"h"===m.orientation?s.push(c):a.push(c),l.push(c))}var h={mode:C.waterfallmode,norm:C.waterfallnorm,gap:C.waterfallgap,groupgap:C.waterfallgroupgap};for(A(i,e,r,a,h),A(i,r,e,s,h),f=0;f<l.length;f++){c=l[f];for(var w=0;w<c.length;w++){var p=c[w];!1===p.isSum&&(p.s0+=0===w?0:c[w-1].s),w+1<c.length&&(c[w].nextP0=c[w+1].p0,c[w].nextS0=c[w+1].s0)}}}},83266:function(q,W,t){"use strict";var A=t(71828),g=t(26125),i=t(90769).handleText,P=t(67513),C=t(73927),u=t(43037),y=t(7901),e=t(22372),r=e.INCREASING.COLOR,l=e.DECREASING.COLOR;function s(m,h,w){m(h+".marker.color",w),m(h+".marker.line.color",y.defaultLine),m(h+".marker.line.width")}q.exports={supplyDefaults:function c(m,h,w,p){function o(x,S){return A.coerce(m,h,u,x,S)}if(P(m,h,p,o)){C(m,h,p,o),o("xhoverformat"),o("yhoverformat"),o("measure"),o("orientation",h.x&&!h.y?"h":"v"),o("base"),o("offset"),o("width"),o("text"),o("hovertext"),o("hovertemplate");var M=o("textposition");i(m,h,p,o,M,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==h.textposition&&(o("texttemplate"),h.texttemplate||o("textinfo")),s(o,"increasing",r),s(o,"decreasing",l),s(o,"totals","#4499FF"),o("connector.visible")&&(o("connector.mode"),o("connector.line.width")&&(o("connector.line.color"),o("connector.line.dash")))}else h.visible=!1},crossTraceDefaults:function f(m,h){var p;function o(M){return A.coerce(p._input,p,u,M)}if("group"===h.waterfallmode)for(var v=0;v<m.length;v++)g((p=m[v])._input,p,h,o)}}},58593:function(q){"use strict";q.exports=function(t,A){return t.x="xVal"in A?A.xVal:A.x,t.y="yVal"in A?A.yVal:A.y,"initial"in A&&(t.initial=A.initial),"delta"in A&&(t.delta=A.delta),"final"in A&&(t.final=A.final),A.xa&&(t.xaxis=A.xa),A.ya&&(t.yaxis=A.ya),t}},61326:function(q,W,t){"use strict";var A=t(89298).hoverLabelText,g=t(7901).opacity,i=t(95423).hoverOnBars,P=t(22372),C_increasing=P.INCREASING.SYMBOL,C_decreasing=P.DECREASING.SYMBOL;q.exports=function(e,r,l,a,s){var c=i(e,r,l,a,s);if(c){var f=c.cd,m=f[0].trace,h="h"===m.orientation,w=h?"x":"y",p=h?e.xa:e.ya,M=f[c.index],b=M.isSum?M.b+M.s:M.rawS;c.initial=M.b+M.s-b,c.delta=b,c.final=c.initial+c.delta;var L=o(Math.abs(c.delta));c.deltaLabel=b<0?"("+L+")":L,c.finalLabel=o(c.final),c.initialLabel=o(c.initial);var x=M.hi||m.hoverinfo,S=[];if(x&&"none"!==x&&"skip"!==x){var T="all"===x,n=x.split("+"),E=function(d){return T||-1!==n.indexOf(d)};M.isSum||(E("final")&&(h?!E("x"):!E("y"))&&S.push(c.finalLabel),E("delta")&&S.push(b<0?c.deltaLabel+" "+C_decreasing:c.deltaLabel+" "+C_increasing),E("initial")&&S.push("Initial: "+c.initialLabel))}return S.length&&(c.extraText=S.join("<br>")),c.color=function u(y,e){var r=y[e.dir].marker,l=r.color,a=r.line.color,s=r.line.width;return g(l)?l:g(a)&&s?a:void 0}(m,M),[c]}function o(d){return A(p,d,m[w+"hoverformat"])}}},19990:function(q,W,t){"use strict";q.exports={attributes:t(43037),layoutAttributes:t(13494),supplyDefaults:t(83266).supplyDefaults,crossTraceDefaults:t(83266).crossTraceDefaults,supplyLayoutDefaults:t(5176),calc:t(52752),crossTraceCalc:t(70766),plot:t(30436),style:t(55750).style,hoverPoints:t(61326),eventData:t(58593),selectPoints:t(81974),moduleType:"trace",name:"waterfall",basePlotModule:t(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},13494:function(q){"use strict";q.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},5176:function(q,W,t){"use strict";var A=t(71828),g=t(13494);q.exports=function(i,P,C){var u=!1;function y(l,a){return A.coerce(i,P,g,l,a)}for(var e=0;e<C.length;e++){var r=C[e];if(r.visible&&"waterfall"===r.type){u=!0;break}}u&&(y("waterfallmode"),y("waterfallgap",.2),y("waterfallgroupgap"))}},30436:function(q,W,t){"use strict";var A=t(39898),g=t(71828),i=t(91424),P=t(50606).BADNUM,C=t(17295),u=t(72597).clearMinTextSize;q.exports=function(l,a,s,c){var f=l._fullLayout;u("waterfall",f),C.plot(l,a,s,c,{mode:f.waterfallmode,norm:f.waterfallmode,gap:f.waterfallgap,groupgap:f.waterfallgroupgap}),function y(r,l,a,s){var c=l.xaxis,f=l.yaxis;g.makeTraceGroups(s,a,"trace bars").each(function(m){var h=A.select(this),w=m[0].trace,p=g.ensureSingle(h,"g","lines");if(w.connector&&w.connector.visible){var o="h"===w.orientation,v=w.connector.mode,M=p.selectAll("g.line").data(g.identity);M.enter().append("g").classed("line",!0),M.exit().remove();var b=M.size();M.each(function(L,x){if(x===b-1||L.cNext){var S=function e(r,l,a,s){var c=[],f=[],m=s?l:a,h=s?a:l;return c[0]=m.c2p(r.s0,!0),f[0]=h.c2p(r.p0,!0),c[1]=m.c2p(r.s1,!0),f[1]=h.c2p(r.p1,!0),c[2]=m.c2p(r.nextS0,!0),f[2]=h.c2p(r.nextP0,!0),s?[c,f]:[f,c]}(L,c,f,o),T=S[0],n=S[1],E="";T[0]!==P&&n[0]!==P&&T[1]!==P&&n[1]!==P&&("spanning"===v&&!L.isSum&&x>0&&(E+=o?"M"+T[0]+","+n[1]+"V"+n[0]:"M"+T[1]+","+n[0]+"H"+T[0]),"between"!==v&&(L.isSum||x<b-1)&&(E+=o?"M"+T[1]+","+n[0]+"V"+n[1]:"M"+T[0]+","+n[1]+"H"+T[1]),T[2]!==P&&n[2]!==P&&(E+=o?"M"+T[1]+","+n[1]+"V"+n[2]:"M"+T[1]+","+n[1]+"H"+T[2])),""===E&&(E="M0,0Z"),g.ensureSingle(A.select(this),"path").attr("d",E).call(i.setClipUrl,l.layerClipId,r)}})}else p.remove()})}(l,a,s,c)}},55750:function(q,W,t){"use strict";var A=t(39898),g=t(91424),i=t(7901),P=t(37822).DESELECTDIM,C=t(16688),u=t(72597).resizeText,y=C.styleTextPoints;q.exports={style:function e(r,l,a){var s=a||A.select(r).selectAll("g.waterfalllayer").selectAll("g.trace");u(r,s,"waterfall"),s.style("opacity",function(c){return c[0].trace.opacity}),s.each(function(c){var f=A.select(this),m=c[0].trace;f.selectAll(".point > path").each(function(h){if(!h.isBlank){var w=m[h.dir].marker;A.select(this).call(i.fill,w.color).call(i.stroke,w.line.color).call(g.dashLine,w.line.dash,w.line.width).style("opacity",m.selectedpoints&&!h.selected?P:1)}}),y(f,m,r),f.selectAll(".lines").each(function(){var h=m.connector.line;g.lineGroupStyle(A.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},82887:function(q,W,t){"use strict";var A=t(89298),g=t(71828),i=t(86281),P=t(79344).p,C=t(50606).BADNUM;W.moduleType="transform",W.name="aggregate";var u=W.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},y=u.aggregations;function e(c,f,m,h){if(h.enabled){for(var w=h.target,p=g.nestedProperty(f,w),o=p.get(),M=function r(c,f){var h=f.d2c,w=f.c2d;switch(c.func){case"count":return l;case"first":return a;case"last":return s;case"sum":return function(p,o){for(var v=0,M=0;M<o.length;M++){var b=h(p[o[M]]);b!==C&&(v+=b)}return w(v)};case"avg":return function(p,o){for(var v=0,M=0,b=0;b<o.length;b++){var L=h(p[o[b]]);L!==C&&(v+=L,M++)}return M?w(v/M):C};case"min":return function(p,o){for(var v=1/0,M=0;M<o.length;M++){var b=h(p[o[M]]);b!==C&&(v=Math.min(v,b))}return v===1/0?C:w(v)};case"max":return function(p,o){for(var v=-1/0,M=0;M<o.length;M++){var b=h(p[o[M]]);b!==C&&(v=Math.max(v,b))}return v===-1/0?C:w(v)};case"range":return function(p,o){for(var v=1/0,M=-1/0,b=0;b<o.length;b++){var L=h(p[o[b]]);L!==C&&(v=Math.min(v,L),M=Math.max(M,L))}return M===-1/0||v===1/0?C:w(M-v)};case"change":return function(p,o){var v=h(p[o[0]]),M=h(p[o[o.length-1]]);return v===C||M===C?C:w(M-v)};case"median":return function(p,o){for(var v=[],M=0;M<o.length;M++){var b=h(p[o[M]]);b!==C&&v.push(b)}if(!v.length)return C;v.sort(g.sorterAsc);var L=(v.length-1)/2;return w((v[Math.floor(L)]+v[Math.ceil(L)])/2)};case"mode":return function(p,o){for(var v={},M=0,b=C,L=0;L<o.length;L++){var x=h(p[o[L]]);if(x!==C){var S=v[x]=(v[x]||0)+1;S>M&&(M=S,b=x)}}return M?w(b):C};case"rms":return function(p,o){for(var v=0,M=0,b=0;b<o.length;b++){var L=h(p[o[b]]);L!==C&&(v+=L*L,M++)}return M?w(Math.sqrt(v/M)):C};case"stddev":return function(p,o){var x,v=0,M=0,b=1,L=C;for(x=0;x<o.length&&L===C;x++)L=h(p[o[x]]);if(L===C)return C;for(;x<o.length;x++){var S=h(p[o[x]]);if(S!==C){var T=S-L;v+=T,M+=T*T,b++}}var n="sample"===c.funcmode?b-1:b;return n?Math.sqrt((M-v*v/b)/n):0}}}(h,A.getDataConversions(c,f,w,o)),b=new Array(m.length),L=0;L<m.length;L++)b[L]=M(o,m[L]);p.set(b),"count"===h.func&&g.pushUnique(f._arrayAttrs,w)}}function l(c,f){return f.length}function a(c,f){return c[f[0]]}function s(c,f){return c[f[f.length-1]]}W.supplyDefaults=function(c,f){var h,m={};function w(d,F){return g.coerce(c,m,u,d,F)}if(!w("enabled"))return m;var o=i.findArrayAttributes(f),v={};for(h=0;h<o.length;h++)v[o[h]]=1;var M=w("groups");if(!Array.isArray(M)){if(!v[M])return m.enabled=!1,m;v[M]=0}var x,b=c.aggregations||[],L=m.aggregations=new Array(b.length);function S(d,F){return g.coerce(b[h],x,y,d,F)}for(h=0;h<b.length;h++){x={_index:h};var T=S("target"),n=S("func");S("enabled")&&T&&(v[T]||"count"===n&&void 0===v[T])?("stddev"===n&&S("funcmode"),v[T]=0,L[h]=x):L[h]={enabled:!1,_index:h}}for(h=0;h<o.length;h++)v[o[h]]&&L.push({target:o[h],func:y.func.dflt,enabled:!0,_index:-1});return m},W.calcTransform=function(c,f,m){if(m.enabled){var h=m.groups,w=g.getTargetArray(f,{target:h});if(w){var p,o,v,b={},L={},x=[],S=P(f.transforms,m),T=w.length;for(f._length&&(T=Math.min(T,f._length)),p=0;p<T;p++)void 0===(v=b[o=w[p]])?(b[o]=x.length,x.push([p]),L[b[o]]=S(p)):(x[v].push(p),L[b[o]]=(L[b[o]]||[]).concat(S(p)));m._indexToPoints=L;var n=m.aggregations;for(p=0;p<n.length;p++)e(c,f,x,n[p]);"string"==typeof h&&e(c,f,x,{target:h,func:"first",enabled:!0}),f._length=x.length}}}},14382:function(q,W,t){"use strict";var A=t(71828),g=t(73972),i=t(89298),P=t(79344).p,C=t(74808),u=C.COMPARISON_OPS,y=C.INTERVAL_OPS,e=C.SET_OPS;W.moduleType="transform",W.name="filter",W.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(u).concat(y).concat(e),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},W.supplyDefaults=function(l){var a={};function s(h,w){return A.coerce(l,a,W.attributes,h,w)}if(s("enabled")){var f=s("target");if(A.isArrayOrTypedArray(f)&&0===f.length)return a.enabled=!1,a;s("preservegaps"),s("operation"),s("value");var m=g.getComponentMethod("calendars","handleDefaults");m(l,a,"valuecalendar",null),m(l,a,"targetcalendar",null)}return a},W.calcTransform=function(l,a,s){if(s.enabled){var c=A.getTargetArray(a,s);if(c){var f=s.target,m=c.length;a._length&&(m=Math.min(m,a._length));var h=s.targetcalendar,w=a._arrayAttrs,p=s.preservegaps;if("string"==typeof f){var o=A.nestedProperty(a,f+"calendar").get();o&&(h=o)}var T,n,M=function r(l,a,s){var c=l.operation,f=l.value,m=Array.isArray(f);function h(v){return-1!==v.indexOf(c)}var o,w=function(v){return a(v,0,l.valuecalendar)},p=function(v){return a(v,0,s)};switch(h(u)?o=w(m?f[0]:f):h(y)?o=m?[w(f[0]),w(f[1])]:[w(f),w(f)]:h(e)&&(o=m?f.map(w):[w(f)]),c){case"=":return function(v){return p(v)===o};case"!=":return function(v){return p(v)!==o};case"<":return function(v){return p(v)<o};case"<=":return function(v){return p(v)<=o};case">":return function(v){return p(v)>o};case">=":return function(v){return p(v)>=o};case"[]":return function(v){var M=p(v);return M>=o[0]&&M<=o[1]};case"()":return function(v){var M=p(v);return M>o[0]&&M<o[1]};case"[)":return function(v){var M=p(v);return M>=o[0]&&M<o[1]};case"(]":return function(v){var M=p(v);return M>o[0]&&M<=o[1]};case"][":return function(v){var M=p(v);return M<=o[0]||M>=o[1]};case")(":return function(v){var M=p(v);return M<o[0]||M>o[1]};case"](":return function(v){var M=p(v);return M<=o[0]||M>o[1]};case")[":return function(v){var M=p(v);return M<o[0]||M>=o[1]};case"{}":return function(v){return-1!==o.indexOf(p(v))};case"}{":return function(v){return-1===o.indexOf(p(v))}}}(s,i.getDataToCoordFunc(l,a,f,c),h),b={},L={},x=0;p?(T=function(D){b[D.astr]=A.extendDeep([],D.get()),D.set(new Array(m))},n=function(D,N){var k=b[D.astr][N];D.get()[N]=k}):(T=function(D){b[D.astr]=A.extendDeep([],D.get()),D.set([])},n=function(D,N){var k=b[D.astr][N];D.get().push(k)}),S(T);for(var E=P(a.transforms,s),d=0;d<m;d++)M(c[d])?(S(n,d),L[x++]=E(d)):p&&x++;s._indexToPoints=L,a._length=x}}function S(D,N){for(var k=0;k<w.length;k++)D(A.nestedProperty(a,w[k]),N)}}},43102:function(q,W,t){"use strict";var A=t(71828),g=t(86281),i=t(74875),P=t(79344).p;function C(u,y){var e,r,l,a,s,c,f,m,h,w,p=y.transform,o=y.transformIndex,v=u.transforms[o].groups,M=P(u.transforms,p);if(!A.isArrayOrTypedArray(v)||0===v.length)return[u];var b=A.filterUnique(v),L=new Array(b.length),x=v.length,S=g.findArrayAttributes(u),T=p.styles||[],n={};for(e=0;e<T.length;e++)n[T[e].target]=T[e].value;p.styles&&(w=A.keyedContainer(p,"styles","target","value.name"));var E={},d={};for(e=0;e<b.length;e++){E[c=b[e]]=e,d[c]=0,(f=L[e]=A.extendDeepNoArrays({},u))._group=c,f.transforms[o]._indexToPoints={};var F=null;for(w&&(F=w.get(c)),f.name=F||""===F?F:A.templateString(p.nameformat,{trace:u.name,group:c}),m=f.transforms,f.transforms=[],r=0;r<m.length;r++)f.transforms[r]=A.extendDeepNoArrays({},m[r]);for(r=0;r<S.length;r++)A.nestedProperty(f,S[r]).set([])}for(l=0;l<S.length;l++){for(a=S[l],r=0,h=[];r<b.length;r++)h[r]=A.nestedProperty(L[r],a).get();for(s=A.nestedProperty(u,a).get(),r=0;r<x;r++)h[E[v[r]]].push(s[r])}for(r=0;r<x;r++)(f=L[E[v[r]]]).transforms[o]._indexToPoints[d[v[r]]]=M(r),d[v[r]]++;for(e=0;e<b.length;e++)c=b[e],i.clearExpandedTraceDefaultColors(f=L[e]),f=A.extendDeepNoArrays(f,n[c]||{});return L}W.moduleType="transform",W.name="groupby",W.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},W.supplyDefaults=function(u,y,e){var r,l={};function a(w,p){return A.coerce(u,l,W.attributes,w,p)}if(!a("enabled"))return l;a("groups"),a("nameformat",e._dataLength>1?"%{group} (%{trace})":"%{group}");var c=u.styles,f=l.styles=[];if(c)for(r=0;r<c.length;r++){var m=f[r]={};A.coerce(c[r],f[r],W.attributes.styles,"target");var h=A.coerce(c[r],f[r],W.attributes.styles,"value");A.isPlainObject(h)?m.value=A.extendDeep({},h):h&&delete m.value}return l},W.transform=function(u,y){var e,r,l,a=[];for(r=0;r<u.length;r++)for(e=C(u[r],y),l=0;l<e.length;l++)a.push(e[l]);return a}},79344:function(q,W){"use strict";W.p=function(t,A){for(var g,i,P=0;P<t.length&&(g=t[P])!==A;P++)!g._indexToPoints||!1===g.enabled||(i=g._indexToPoints);return i?function(u){return i[u]}:function(u){return[u]}}},32275:function(q,W,t){"use strict";var A=t(71828),g=t(89298),i=t(79344).p,P=t(50606).BADNUM;function C(y,e,r,l){var c,a=new Array(l),s=new Array(l);for(c=0;c<l;c++)a[c]={v:e[c],i:c};for(a.sort(function u(y,e){switch(y.order){case"ascending":return function(r,l){var a=e(r.v),s=e(l.v);return a===P?1:s===P?-1:a-s};case"descending":return function(r,l){var a=e(r.v),s=e(l.v);return a===P?1:s===P?-1:s-a}}}(y,r)),c=0;c<l;c++)s[c]=a[c].i;return s}W.moduleType="transform",W.name="sort",W.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},W.supplyDefaults=function(y){var e={};function r(a,s){return A.coerce(y,e,W.attributes,a,s)}return r("enabled")&&(r("target"),r("order")),e},W.calcTransform=function(y,e,r){if(r.enabled){var l=A.getTargetArray(e,r);if(l){var a=r.target,s=l.length;e._length&&(s=Math.min(s,e._length));var p,o,c=e._arrayAttrs,m=C(r,l,g.getDataToCoordFunc(y,e,a,l),s),h=i(e.transforms,r),w={};for(p=0;p<c.length;p++){var v=A.nestedProperty(e,c[p]),M=v.get(),b=new Array(s);for(o=0;o<s;o++)b[o]=M[m[o]];v.set(b)}for(o=0;o<s;o++)w[o]=h(m[o]);r._indexToPoints=w,e._length=s}}}},11506:function(q,W){"use strict";W.version="2.27.1"},9330:function(q,W,t){var P,A=t(90386);self,P=function(){return function(){var g={7386:function(u,y,e){u.exports={alpha_shape:e(2350),convex_hull:e(5537),delaunay_triangulate:e(4419),gl_cone3d:e(1140),gl_error3d:e(3110),gl_heatmap2d:e(6386),gl_line3d:e(6086),gl_mesh3d:e(8116),gl_plot2d:e(2117),gl_plot3d:e(1059),gl_pointcloud2d:e(8271),gl_scatter3d:e(2182),gl_select_box:e(6623),gl_spikes2d:e(3050),gl_streamtube3d:e(7307),gl_surface3d:e(3754),ndarray:e(5050),ndarray_linear_interpolate:e(3581)}},2146:function(u,y,e){"use strict";function l(wt,ft){if(!(wt instanceof ft))throw new TypeError("Cannot call a class as a function")}function a(wt,ft){for(var pt=0;pt<ft.length;pt++){var kt=ft[pt];kt.enumerable=kt.enumerable||!1,kt.configurable=!0,"value"in kt&&(kt.writable=!0),Object.defineProperty(wt,kt.key,kt)}}function c(wt,ft){if("function"!=typeof ft&&null!==ft)throw new TypeError("Super expression must either be null or a function");wt.prototype=Object.create(ft&&ft.prototype,{constructor:{value:wt,writable:!0,configurable:!0}}),Object.defineProperty(wt,"prototype",{writable:!1}),ft&&f(wt,ft)}function f(wt,ft){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(kt,Zt){return kt.__proto__=Zt,kt})(wt,ft)}function m(wt){var ft=function p(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(wt){return!1}}();return function(){var Zt,kt=o(wt);if(ft){var ee=o(this).constructor;Zt=Reflect.construct(kt,arguments,ee)}else Zt=kt.apply(this,arguments);return h(this,Zt)}}function h(wt,ft){if(ft&&("object"===v(ft)||"function"==typeof ft))return ft;if(void 0!==ft)throw new TypeError("Derived constructors may only return object or undefined");return w(wt)}function w(wt){if(void 0===wt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return wt}function o(wt){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(pt){return pt.__proto__||Object.getPrototypeOf(pt)})(wt)}function v(wt){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ft){return typeof ft}:function(ft){return ft&&"function"==typeof Symbol&&ft.constructor===Symbol&&ft!==Symbol.prototype?"symbol":typeof ft})(wt)}var M=e(3910),b=e(3187),L="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;y.lW=n,y.h2=50;var x=2147483647;function T(wt){if(wt>x)throw new RangeError('The value "'+wt+'" is invalid for option "size"');var ft=new Uint8Array(wt);return Object.setPrototypeOf(ft,n.prototype),ft}function n(wt,ft,pt){if("number"==typeof wt){if("string"==typeof ft)throw new TypeError('The "string" argument must be of type string. Received type number');return D(wt)}return E(wt,ft,pt)}function E(wt,ft,pt){if("string"==typeof wt)return function N(wt,ft){if(("string"!=typeof ft||""===ft)&&(ft="utf8"),!n.isEncoding(ft))throw new TypeError("Unknown encoding: "+ft);var pt=0|J(wt,ft),kt=T(pt),Zt=kt.write(wt,ft);return Zt!==pt&&(kt=kt.slice(0,Zt)),kt}(wt,ft);if(ArrayBuffer.isView(wt))return function O(wt){if(St(wt,Uint8Array)){var ft=new Uint8Array(wt);return B(ft.buffer,ft.byteOffset,ft.byteLength)}return k(wt)}(wt);if(null==wt)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+v(wt));if(St(wt,ArrayBuffer)||wt&&St(wt.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(St(wt,SharedArrayBuffer)||wt&&St(wt.buffer,SharedArrayBuffer)))return B(wt,ft,pt);if("number"==typeof wt)throw new TypeError('The "value" argument must not be of type number. Received type number');var kt=wt.valueOf&&wt.valueOf();if(null!=kt&&kt!==wt)return n.from(kt,ft,pt);var Zt=function z(wt){if(n.isBuffer(wt)){var ft=0|U(wt.length),pt=T(ft);return 0===pt.length||wt.copy(pt,0,0,ft),pt}return void 0!==wt.length?"number"!=typeof wt.length||Dt(wt.length)?T(0):k(wt):"Buffer"===wt.type&&Array.isArray(wt.data)?k(wt.data):void 0}(wt);if(Zt)return Zt;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof wt[Symbol.toPrimitive])return n.from(wt[Symbol.toPrimitive]("string"),ft,pt);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+v(wt))}function d(wt){if("number"!=typeof wt)throw new TypeError('"size" argument must be of type number');if(wt<0)throw new RangeError('The value "'+wt+'" is invalid for option "size"')}function D(wt){return d(wt),T(wt<0?0:0|U(wt))}function k(wt){for(var ft=wt.length<0?0:0|U(wt.length),pt=T(ft),kt=0;kt<ft;kt+=1)pt[kt]=255&wt[kt];return pt}function B(wt,ft,pt){if(ft<0||wt.byteLength<ft)throw new RangeError('"offset" is outside of buffer bounds');if(wt.byteLength<ft+(pt||0))throw new RangeError('"length" is outside of buffer bounds');var kt;return kt=void 0===ft&&void 0===pt?new Uint8Array(wt):void 0===pt?new Uint8Array(wt,ft):new Uint8Array(wt,ft,pt),Object.setPrototypeOf(kt,n.prototype),kt}function U(wt){if(wt>=x)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+x.toString(16)+" bytes");return 0|wt}function J(wt,ft){if(n.isBuffer(wt))return wt.length;if(ArrayBuffer.isView(wt)||St(wt,ArrayBuffer))return wt.byteLength;if("string"!=typeof wt)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+v(wt));var pt=wt.length,kt=arguments.length>2&&!0===arguments[2];if(!kt&&0===pt)return 0;for(var Zt=!1;;)switch(ft){case"ascii":case"latin1":case"binary":return pt;case"utf8":case"utf-8":return pe(wt).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*pt;case"hex":return pt>>>1;case"base64":return Kt(wt).length;default:if(Zt)return kt?-1:pe(wt).length;ft=(""+ft).toLowerCase(),Zt=!0}}function nt(wt,ft,pt){var kt=!1;if((void 0===ft||ft<0)&&(ft=0),ft>this.length||((void 0===pt||pt>this.length)&&(pt=this.length),pt<=0)||(pt>>>=0)<=(ft>>>=0))return"";for(wt||(wt="utf8");;)switch(wt){case"hex":return bt(this,ft,pt);case"utf8":case"utf-8":return X(this,ft,pt);case"ascii":return st(this,ft,pt);case"latin1":case"binary":return dt(this,ft,pt);case"base64":return $(this,ft,pt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gt(this,ft,pt);default:if(kt)throw new TypeError("Unknown encoding: "+wt);wt=(wt+"").toLowerCase(),kt=!0}}function it(wt,ft,pt){var kt=wt[ft];wt[ft]=wt[pt],wt[pt]=kt}function ut(wt,ft,pt,kt,Zt){if(0===wt.length)return-1;if("string"==typeof pt?(kt=pt,pt=0):pt>2147483647?pt=2147483647:pt<-2147483648&&(pt=-2147483648),Dt(pt=+pt)&&(pt=Zt?0:wt.length-1),pt<0&&(pt=wt.length+pt),pt>=wt.length){if(Zt)return-1;pt=wt.length-1}else if(pt<0){if(!Zt)return-1;pt=0}if("string"==typeof ft&&(ft=n.from(ft,kt)),n.isBuffer(ft))return 0===ft.length?-1:Q(wt,ft,pt,kt,Zt);if("number"==typeof ft)return ft&=255,"function"==typeof Uint8Array.prototype.indexOf?Zt?Uint8Array.prototype.indexOf.call(wt,ft,pt):Uint8Array.prototype.lastIndexOf.call(wt,ft,pt):Q(wt,[ft],pt,kt,Zt);throw new TypeError("val must be string, number or Buffer")}function Q(wt,ft,pt,kt,Zt){var xe,ee=1,se=wt.length,Be=ft.length;if(void 0!==kt&&("ucs2"===(kt=String(kt).toLowerCase())||"ucs-2"===kt||"utf16le"===kt||"utf-16le"===kt)){if(wt.length<2||ft.length<2)return-1;ee=2,se/=2,Be/=2,pt/=2}function Ke(ue,Ne){return 1===ee?ue[Ne]:ue.readUInt16BE(Ne*ee)}if(Zt){var Pe=-1;for(xe=pt;xe<se;xe++)if(Ke(wt,xe)===Ke(ft,-1===Pe?0:xe-Pe)){if(-1===Pe&&(Pe=xe),xe-Pe+1===Be)return Pe*ee}else-1!==Pe&&(xe-=xe-Pe),Pe=-1}else for(pt+Be>se&&(pt=se-Be),xe=pt;xe>=0;xe--){for(var Ge=!0,gr=0;gr<Be;gr++)if(Ke(wt,xe+gr)!==Ke(ft,gr)){Ge=!1;break}if(Ge)return xe}return-1}function j(wt,ft,pt,kt){pt=Number(pt)||0;var Zt=wt.length-pt;kt?(kt=Number(kt))>Zt&&(kt=Zt):kt=Zt;var se,ee=ft.length;for(kt>ee/2&&(kt=ee/2),se=0;se<kt;++se){var Be=parseInt(ft.substr(2*se,2),16);if(Dt(Be))return se;wt[pt+se]=Be}return se}function Z(wt,ft,pt,kt){return Et(pe(ft,wt.length-pt),wt,pt,kt)}function G(wt,ft,pt,kt){return Et(function de(wt){for(var ft=[],pt=0;pt<wt.length;++pt)ft.push(255&wt.charCodeAt(pt));return ft}(ft),wt,pt,kt)}function K(wt,ft,pt,kt){return Et(Kt(ft),wt,pt,kt)}function at(wt,ft,pt,kt){return Et(function Fe(wt,ft){for(var pt,kt,ee=[],se=0;se<wt.length&&!((ft-=2)<0);++se)kt=(pt=wt.charCodeAt(se))>>8,ee.push(pt%256),ee.push(kt);return ee}(ft,wt.length-pt),wt,pt,kt)}function $(wt,ft,pt){return M.fromByteArray(0===ft&&pt===wt.length?wt:wt.slice(ft,pt))}function X(wt,ft,pt){pt=Math.min(wt.length,pt);for(var kt=[],Zt=ft;Zt<pt;){var ee=wt[Zt],se=null,Be=ee>239?4:ee>223?3:ee>191?2:1;if(Zt+Be<=pt){var Ke=void 0,xe=void 0,Pe=void 0,Ge=void 0;switch(Be){case 1:ee<128&&(se=ee);break;case 2:128==(192&(Ke=wt[Zt+1]))&&(Ge=(31&ee)<<6|63&Ke)>127&&(se=Ge);break;case 3:xe=wt[Zt+2],128==(192&(Ke=wt[Zt+1]))&&128==(192&xe)&&(Ge=(15&ee)<<12|(63&Ke)<<6|63&xe)>2047&&(Ge<55296||Ge>57343)&&(se=Ge);break;case 4:xe=wt[Zt+2],Pe=wt[Zt+3],128==(192&(Ke=wt[Zt+1]))&&128==(192&xe)&&128==(192&Pe)&&(Ge=(15&ee)<<18|(63&Ke)<<12|(63&xe)<<6|63&Pe)>65535&&Ge<1114112&&(se=Ge)}}null===se?(se=65533,Be=1):se>65535&&(kt.push((se-=65536)>>>10&1023|55296),se=56320|1023&se),kt.push(se),Zt+=Be}return function et(wt){var ft=wt.length;if(ft<=4096)return String.fromCharCode.apply(String,wt);for(var pt="",kt=0;kt<ft;)pt+=String.fromCharCode.apply(String,wt.slice(kt,kt+=4096));return pt}(kt)}!(n.TYPED_ARRAY_SUPPORT=function S(){try{var wt=new Uint8Array(1),ft={foo:function(){return 42}};return Object.setPrototypeOf(ft,Uint8Array.prototype),Object.setPrototypeOf(wt,ft),42===wt.foo()}catch(pt){return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),n.poolSize=8192,n.from=function(wt,ft,pt){return E(wt,ft,pt)},Object.setPrototypeOf(n.prototype,Uint8Array.prototype),Object.setPrototypeOf(n,Uint8Array),n.alloc=function(wt,ft,pt){return function F(wt,ft,pt){return d(wt),wt<=0?T(wt):void 0!==ft?"string"==typeof pt?T(wt).fill(ft,pt):T(wt).fill(ft):T(wt)}(wt,ft,pt)},n.allocUnsafe=function(wt){return D(wt)},n.allocUnsafeSlow=function(wt){return D(wt)},n.isBuffer=function(ft){return null!=ft&&!0===ft._isBuffer&&ft!==n.prototype},n.compare=function(ft,pt){if(St(ft,Uint8Array)&&(ft=n.from(ft,ft.offset,ft.byteLength)),St(pt,Uint8Array)&&(pt=n.from(pt,pt.offset,pt.byteLength)),!n.isBuffer(ft)||!n.isBuffer(pt))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ft===pt)return 0;for(var kt=ft.length,Zt=pt.length,ee=0,se=Math.min(kt,Zt);ee<se;++ee)if(ft[ee]!==pt[ee]){kt=ft[ee],Zt=pt[ee];break}return kt<Zt?-1:Zt<kt?1:0},n.isEncoding=function(ft){switch(String(ft).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(ft,pt){if(!Array.isArray(ft))throw new TypeError('"list" argument must be an Array of Buffers');if(0===ft.length)return n.alloc(0);var kt;if(void 0===pt)for(pt=0,kt=0;kt<ft.length;++kt)pt+=ft[kt].length;var Zt=n.allocUnsafe(pt),ee=0;for(kt=0;kt<ft.length;++kt){var se=ft[kt];if(St(se,Uint8Array))ee+se.length>Zt.length?(n.isBuffer(se)||(se=n.from(se)),se.copy(Zt,ee)):Uint8Array.prototype.set.call(Zt,se,ee);else{if(!n.isBuffer(se))throw new TypeError('"list" argument must be an Array of Buffers');se.copy(Zt,ee)}ee+=se.length}return Zt},n.byteLength=J,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var ft=this.length;if(ft%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var pt=0;pt<ft;pt+=2)it(this,pt,pt+1);return this},n.prototype.swap32=function(){var ft=this.length;if(ft%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var pt=0;pt<ft;pt+=4)it(this,pt,pt+3),it(this,pt+1,pt+2);return this},n.prototype.swap64=function(){var ft=this.length;if(ft%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var pt=0;pt<ft;pt+=8)it(this,pt,pt+7),it(this,pt+1,pt+6),it(this,pt+2,pt+5),it(this,pt+3,pt+4);return this},n.prototype.toLocaleString=n.prototype.toString=function(){var ft=this.length;return 0===ft?"":0===arguments.length?X(this,0,ft):nt.apply(this,arguments)},n.prototype.equals=function(ft){if(!n.isBuffer(ft))throw new TypeError("Argument must be a Buffer");return this===ft||0===n.compare(this,ft)},n.prototype.inspect=function(){var ft="",pt=y.h2;return ft=this.toString("hex",0,pt).replace(/(.{2})/g,"$1 ").trim(),this.length>pt&&(ft+=" ... "),"<Buffer "+ft+">"},L&&(n.prototype[L]=n.prototype.inspect),n.prototype.compare=function(ft,pt,kt,Zt,ee){if(St(ft,Uint8Array)&&(ft=n.from(ft,ft.offset,ft.byteLength)),!n.isBuffer(ft))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+v(ft));if(void 0===pt&&(pt=0),void 0===kt&&(kt=ft?ft.length:0),void 0===Zt&&(Zt=0),void 0===ee&&(ee=this.length),pt<0||kt>ft.length||Zt<0||ee>this.length)throw new RangeError("out of range index");if(Zt>=ee&&pt>=kt)return 0;if(Zt>=ee)return-1;if(pt>=kt)return 1;if(this===ft)return 0;for(var se=(ee>>>=0)-(Zt>>>=0),Be=(kt>>>=0)-(pt>>>=0),Ke=Math.min(se,Be),xe=this.slice(Zt,ee),Pe=ft.slice(pt,kt),Ge=0;Ge<Ke;++Ge)if(xe[Ge]!==Pe[Ge]){se=xe[Ge],Be=Pe[Ge];break}return se<Be?-1:Be<se?1:0},n.prototype.includes=function(ft,pt,kt){return-1!==this.indexOf(ft,pt,kt)},n.prototype.indexOf=function(ft,pt,kt){return ut(this,ft,pt,kt,!0)},n.prototype.lastIndexOf=function(ft,pt,kt){return ut(this,ft,pt,kt,!1)},n.prototype.write=function(ft,pt,kt,Zt){if(void 0===pt)Zt="utf8",kt=this.length,pt=0;else if(void 0===kt&&"string"==typeof pt)Zt=pt,kt=this.length,pt=0;else{if(!isFinite(pt))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");pt>>>=0,isFinite(kt)?(kt>>>=0,void 0===Zt&&(Zt="utf8")):(Zt=kt,kt=void 0)}var ee=this.length-pt;if((void 0===kt||kt>ee)&&(kt=ee),ft.length>0&&(kt<0||pt<0)||pt>this.length)throw new RangeError("Attempt to write outside buffer bounds");Zt||(Zt="utf8");for(var se=!1;;)switch(Zt){case"hex":return j(this,ft,pt,kt);case"utf8":case"utf-8":return Z(this,ft,pt,kt);case"ascii":case"latin1":case"binary":return G(this,ft,pt,kt);case"base64":return K(this,ft,pt,kt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return at(this,ft,pt,kt);default:if(se)throw new TypeError("Unknown encoding: "+Zt);Zt=(""+Zt).toLowerCase(),se=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function st(wt,ft,pt){var kt="";pt=Math.min(wt.length,pt);for(var Zt=ft;Zt<pt;++Zt)kt+=String.fromCharCode(127&wt[Zt]);return kt}function dt(wt,ft,pt){var kt="";pt=Math.min(wt.length,pt);for(var Zt=ft;Zt<pt;++Zt)kt+=String.fromCharCode(wt[Zt]);return kt}function bt(wt,ft,pt){var kt=wt.length;(!ft||ft<0)&&(ft=0),(!pt||pt<0||pt>kt)&&(pt=kt);for(var Zt="",ee=ft;ee<pt;++ee)Zt+=Ft[wt[ee]];return Zt}function gt(wt,ft,pt){for(var kt=wt.slice(ft,pt),Zt="",ee=0;ee<kt.length-1;ee+=2)Zt+=String.fromCharCode(kt[ee]+256*kt[ee+1]);return Zt}function Lt(wt,ft,pt){if(wt%1!=0||wt<0)throw new RangeError("offset is not uint");if(wt+ft>pt)throw new RangeError("Trying to access beyond buffer length")}function It(wt,ft,pt,kt,Zt,ee){if(!n.isBuffer(wt))throw new TypeError('"buffer" argument must be a Buffer instance');if(ft>Zt||ft<ee)throw new RangeError('"value" argument is out of bounds');if(pt+kt>wt.length)throw new RangeError("Index out of range")}function Mt(wt,ft,pt,kt,Zt){Bt(ft,kt,Zt,wt,pt,7);var ee=Number(ft&BigInt(4294967295));wt[pt++]=ee,wt[pt++]=ee>>=8,wt[pt++]=ee>>=8,wt[pt++]=ee>>=8;var se=Number(ft>>BigInt(32)&BigInt(4294967295));return wt[pt++]=se,wt[pt++]=se>>=8,wt[pt++]=se>>=8,wt[pt++]=se>>=8,pt}function xt(wt,ft,pt,kt,Zt){Bt(ft,kt,Zt,wt,pt,7);var ee=Number(ft&BigInt(4294967295));wt[pt+7]=ee,wt[pt+6]=ee>>=8,wt[pt+5]=ee>>=8,wt[pt+4]=ee>>=8;var se=Number(ft>>BigInt(32)&BigInt(4294967295));return wt[pt+3]=se,wt[pt+2]=se>>=8,wt[pt+1]=se>>=8,wt[pt]=se>>=8,pt+8}function At(wt,ft,pt,kt,Zt,ee){if(pt+kt>wt.length)throw new RangeError("Index out of range");if(pt<0)throw new RangeError("Index out of range")}function Gt(wt,ft,pt,kt,Zt){return ft=+ft,pt>>>=0,Zt||At(wt,0,pt,4),b.write(wt,ft,pt,kt,23,4),pt+4}function Wt(wt,ft,pt,kt,Zt){return ft=+ft,pt>>>=0,Zt||At(wt,0,pt,8),b.write(wt,ft,pt,kt,52,8),pt+8}n.prototype.slice=function(ft,pt){var kt=this.length;(ft=~~ft)<0?(ft+=kt)<0&&(ft=0):ft>kt&&(ft=kt),(pt=void 0===pt?kt:~~pt)<0?(pt+=kt)<0&&(pt=0):pt>kt&&(pt=kt),pt<ft&&(pt=ft);var Zt=this.subarray(ft,pt);return Object.setPrototypeOf(Zt,n.prototype),Zt},n.prototype.readUintLE=n.prototype.readUIntLE=function(ft,pt,kt){ft>>>=0,pt>>>=0,kt||Lt(ft,pt,this.length);for(var Zt=this[ft],ee=1,se=0;++se<pt&&(ee*=256);)Zt+=this[ft+se]*ee;return Zt},n.prototype.readUintBE=n.prototype.readUIntBE=function(ft,pt,kt){ft>>>=0,pt>>>=0,kt||Lt(ft,pt,this.length);for(var Zt=this[ft+--pt],ee=1;pt>0&&(ee*=256);)Zt+=this[ft+--pt]*ee;return Zt},n.prototype.readUint8=n.prototype.readUInt8=function(ft,pt){return ft>>>=0,pt||Lt(ft,1,this.length),this[ft]},n.prototype.readUint16LE=n.prototype.readUInt16LE=function(ft,pt){return ft>>>=0,pt||Lt(ft,2,this.length),this[ft]|this[ft+1]<<8},n.prototype.readUint16BE=n.prototype.readUInt16BE=function(ft,pt){return ft>>>=0,pt||Lt(ft,2,this.length),this[ft]<<8|this[ft+1]},n.prototype.readUint32LE=n.prototype.readUInt32LE=function(ft,pt){return ft>>>=0,pt||Lt(ft,4,this.length),(this[ft]|this[ft+1]<<8|this[ft+2]<<16)+16777216*this[ft+3]},n.prototype.readUint32BE=n.prototype.readUInt32BE=function(ft,pt){return ft>>>=0,pt||Lt(ft,4,this.length),16777216*this[ft]+(this[ft+1]<<16|this[ft+2]<<8|this[ft+3])},n.prototype.readBigUInt64LE=Nt(function(ft){Ot(ft>>>=0,"offset");var pt=this[ft],kt=this[ft+7];(void 0===pt||void 0===kt)&&qt(ft,this.length-8);var Zt=pt+this[++ft]*Math.pow(2,8)+this[++ft]*Math.pow(2,16)+this[++ft]*Math.pow(2,24),ee=this[++ft]+this[++ft]*Math.pow(2,8)+this[++ft]*Math.pow(2,16)+kt*Math.pow(2,24);return BigInt(Zt)+(BigInt(ee)<<BigInt(32))}),n.prototype.readBigUInt64BE=Nt(function(ft){Ot(ft>>>=0,"offset");var pt=this[ft],kt=this[ft+7];(void 0===pt||void 0===kt)&&qt(ft,this.length-8);var Zt=pt*Math.pow(2,24)+this[++ft]*Math.pow(2,16)+this[++ft]*Math.pow(2,8)+this[++ft],ee=this[++ft]*Math.pow(2,24)+this[++ft]*Math.pow(2,16)+this[++ft]*Math.pow(2,8)+kt;return(BigInt(Zt)<<BigInt(32))+BigInt(ee)}),n.prototype.readIntLE=function(ft,pt,kt){ft>>>=0,pt>>>=0,kt||Lt(ft,pt,this.length);for(var Zt=this[ft],ee=1,se=0;++se<pt&&(ee*=256);)Zt+=this[ft+se]*ee;return Zt>=(ee*=128)&&(Zt-=Math.pow(2,8*pt)),Zt},n.prototype.readIntBE=function(ft,pt,kt){ft>>>=0,pt>>>=0,kt||Lt(ft,pt,this.length);for(var Zt=pt,ee=1,se=this[ft+--Zt];Zt>0&&(ee*=256);)se+=this[ft+--Zt]*ee;return se>=(ee*=128)&&(se-=Math.pow(2,8*pt)),se},n.prototype.readInt8=function(ft,pt){return ft>>>=0,pt||Lt(ft,1,this.length),128&this[ft]?-1*(255-this[ft]+1):this[ft]},n.prototype.readInt16LE=function(ft,pt){ft>>>=0,pt||Lt(ft,2,this.length);var kt=this[ft]|this[ft+1]<<8;return 32768&kt?4294901760|kt:kt},n.prototype.readInt16BE=function(ft,pt){ft>>>=0,pt||Lt(ft,2,this.length);var kt=this[ft+1]|this[ft]<<8;return 32768&kt?4294901760|kt:kt},n.prototype.readInt32LE=function(ft,pt){return ft>>>=0,pt||Lt(ft,4,this.length),this[ft]|this[ft+1]<<8|this[ft+2]<<16|this[ft+3]<<24},n.prototype.readInt32BE=function(ft,pt){return ft>>>=0,pt||Lt(ft,4,this.length),this[ft]<<24|this[ft+1]<<16|this[ft+2]<<8|this[ft+3]},n.prototype.readBigInt64LE=Nt(function(ft){Ot(ft>>>=0,"offset");var pt=this[ft],kt=this[ft+7];(void 0===pt||void 0===kt)&&qt(ft,this.length-8);var Zt=this[ft+4]+this[ft+5]*Math.pow(2,8)+this[ft+6]*Math.pow(2,16)+(kt<<24);return(BigInt(Zt)<<BigInt(32))+BigInt(pt+this[++ft]*Math.pow(2,8)+this[++ft]*Math.pow(2,16)+this[++ft]*Math.pow(2,24))}),n.prototype.readBigInt64BE=Nt(function(ft){Ot(ft>>>=0,"offset");var pt=this[ft],kt=this[ft+7];(void 0===pt||void 0===kt)&&qt(ft,this.length-8);var Zt=(pt<<24)+this[++ft]*Math.pow(2,16)+this[++ft]*Math.pow(2,8)+this[++ft];return(BigInt(Zt)<<BigInt(32))+BigInt(this[++ft]*Math.pow(2,24)+this[++ft]*Math.pow(2,16)+this[++ft]*Math.pow(2,8)+kt)}),n.prototype.readFloatLE=function(ft,pt){return ft>>>=0,pt||Lt(ft,4,this.length),b.read(this,ft,!0,23,4)},n.prototype.readFloatBE=function(ft,pt){return ft>>>=0,pt||Lt(ft,4,this.length),b.read(this,ft,!1,23,4)},n.prototype.readDoubleLE=function(ft,pt){return ft>>>=0,pt||Lt(ft,8,this.length),b.read(this,ft,!0,52,8)},n.prototype.readDoubleBE=function(ft,pt){return ft>>>=0,pt||Lt(ft,8,this.length),b.read(this,ft,!1,52,8)},n.prototype.writeUintLE=n.prototype.writeUIntLE=function(ft,pt,kt,Zt){ft=+ft,pt>>>=0,kt>>>=0,Zt||It(this,ft,pt,kt,Math.pow(2,8*kt)-1,0);var se=1,Be=0;for(this[pt]=255&ft;++Be<kt&&(se*=256);)this[pt+Be]=ft/se&255;return pt+kt},n.prototype.writeUintBE=n.prototype.writeUIntBE=function(ft,pt,kt,Zt){ft=+ft,pt>>>=0,kt>>>=0,Zt||It(this,ft,pt,kt,Math.pow(2,8*kt)-1,0);var se=kt-1,Be=1;for(this[pt+se]=255&ft;--se>=0&&(Be*=256);)this[pt+se]=ft/Be&255;return pt+kt},n.prototype.writeUint8=n.prototype.writeUInt8=function(ft,pt,kt){return ft=+ft,pt>>>=0,kt||It(this,ft,pt,1,255,0),this[pt]=255&ft,pt+1},n.prototype.writeUint16LE=n.prototype.writeUInt16LE=function(ft,pt,kt){return ft=+ft,pt>>>=0,kt||It(this,ft,pt,2,65535,0),this[pt]=255&ft,this[pt+1]=ft>>>8,pt+2},n.prototype.writeUint16BE=n.prototype.writeUInt16BE=function(ft,pt,kt){return ft=+ft,pt>>>=0,kt||It(this,ft,pt,2,65535,0),this[pt]=ft>>>8,this[pt+1]=255&ft,pt+2},n.prototype.writeUint32LE=n.prototype.writeUInt32LE=function(ft,pt,kt){return ft=+ft,pt>>>=0,kt||It(this,ft,pt,4,4294967295,0),this[pt+3]=ft>>>24,this[pt+2]=ft>>>16,this[pt+1]=ft>>>8,this[pt]=255&ft,pt+4},n.prototype.writeUint32BE=n.prototype.writeUInt32BE=function(ft,pt,kt){return ft=+ft,pt>>>=0,kt||It(this,ft,pt,4,4294967295,0),this[pt]=ft>>>24,this[pt+1]=ft>>>16,this[pt+2]=ft>>>8,this[pt+3]=255&ft,pt+4},n.prototype.writeBigUInt64LE=Nt(function(ft){return Mt(this,ft,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeBigUInt64BE=Nt(function(ft){return xt(this,ft,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeIntLE=function(ft,pt,kt,Zt){if(ft=+ft,pt>>>=0,!Zt){var ee=Math.pow(2,8*kt-1);It(this,ft,pt,kt,ee-1,-ee)}var se=0,Be=1,Ke=0;for(this[pt]=255&ft;++se<kt&&(Be*=256);)ft<0&&0===Ke&&0!==this[pt+se-1]&&(Ke=1),this[pt+se]=(ft/Be>>0)-Ke&255;return pt+kt},n.prototype.writeIntBE=function(ft,pt,kt,Zt){if(ft=+ft,pt>>>=0,!Zt){var ee=Math.pow(2,8*kt-1);It(this,ft,pt,kt,ee-1,-ee)}var se=kt-1,Be=1,Ke=0;for(this[pt+se]=255&ft;--se>=0&&(Be*=256);)ft<0&&0===Ke&&0!==this[pt+se+1]&&(Ke=1),this[pt+se]=(ft/Be>>0)-Ke&255;return pt+kt},n.prototype.writeInt8=function(ft,pt,kt){return ft=+ft,pt>>>=0,kt||It(this,ft,pt,1,127,-128),ft<0&&(ft=255+ft+1),this[pt]=255&ft,pt+1},n.prototype.writeInt16LE=function(ft,pt,kt){return ft=+ft,pt>>>=0,kt||It(this,ft,pt,2,32767,-32768),this[pt]=255&ft,this[pt+1]=ft>>>8,pt+2},n.prototype.writeInt16BE=function(ft,pt,kt){return ft=+ft,pt>>>=0,kt||It(this,ft,pt,2,32767,-32768),this[pt]=ft>>>8,this[pt+1]=255&ft,pt+2},n.prototype.writeInt32LE=function(ft,pt,kt){return ft=+ft,pt>>>=0,kt||It(this,ft,pt,4,2147483647,-2147483648),this[pt]=255&ft,this[pt+1]=ft>>>8,this[pt+2]=ft>>>16,this[pt+3]=ft>>>24,pt+4},n.prototype.writeInt32BE=function(ft,pt,kt){return ft=+ft,pt>>>=0,kt||It(this,ft,pt,4,2147483647,-2147483648),ft<0&&(ft=4294967295+ft+1),this[pt]=ft>>>24,this[pt+1]=ft>>>16,this[pt+2]=ft>>>8,this[pt+3]=255&ft,pt+4},n.prototype.writeBigInt64LE=Nt(function(ft){return Mt(this,ft,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeBigInt64BE=Nt(function(ft){return xt(this,ft,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeFloatLE=function(ft,pt,kt){return Gt(this,ft,pt,!0,kt)},n.prototype.writeFloatBE=function(ft,pt,kt){return Gt(this,ft,pt,!1,kt)},n.prototype.writeDoubleLE=function(ft,pt,kt){return Wt(this,ft,pt,!0,kt)},n.prototype.writeDoubleBE=function(ft,pt,kt){return Wt(this,ft,pt,!1,kt)},n.prototype.copy=function(ft,pt,kt,Zt){if(!n.isBuffer(ft))throw new TypeError("argument should be a Buffer");if(kt||(kt=0),!Zt&&0!==Zt&&(Zt=this.length),pt>=ft.length&&(pt=ft.length),pt||(pt=0),Zt>0&&Zt<kt&&(Zt=kt),Zt===kt||0===ft.length||0===this.length)return 0;if(pt<0)throw new RangeError("targetStart out of bounds");if(kt<0||kt>=this.length)throw new RangeError("Index out of range");if(Zt<0)throw new RangeError("sourceEnd out of bounds");Zt>this.length&&(Zt=this.length),ft.length-pt<Zt-kt&&(Zt=ft.length-pt+kt);var ee=Zt-kt;return this===ft&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(pt,kt,Zt):Uint8Array.prototype.set.call(ft,this.subarray(kt,Zt),pt),ee},n.prototype.fill=function(ft,pt,kt,Zt){if("string"==typeof ft){if("string"==typeof pt?(Zt=pt,pt=0,kt=this.length):"string"==typeof kt&&(Zt=kt,kt=this.length),void 0!==Zt&&"string"!=typeof Zt)throw new TypeError("encoding must be a string");if("string"==typeof Zt&&!n.isEncoding(Zt))throw new TypeError("Unknown encoding: "+Zt);if(1===ft.length){var ee=ft.charCodeAt(0);("utf8"===Zt&&ee<128||"latin1"===Zt)&&(ft=ee)}}else"number"==typeof ft?ft&=255:"boolean"==typeof ft&&(ft=Number(ft));if(pt<0||this.length<pt||this.length<kt)throw new RangeError("Out of range index");if(kt<=pt)return this;var se;if(pt>>>=0,kt=void 0===kt?this.length:kt>>>0,ft||(ft=0),"number"==typeof ft)for(se=pt;se<kt;++se)this[se]=ft;else{var Be=n.isBuffer(ft)?ft:n.from(ft,Zt),Ke=Be.length;if(0===Ke)throw new TypeError('The value "'+ft+'" is invalid for argument "value"');for(se=0;se<kt-pt;++se)this[se+pt]=Be[se%Ke]}return this};var Pt={};function Vt(wt,ft,pt){Pt[wt]=function(kt){c(ee,kt);var Zt=m(ee);function ee(){var se;return l(this,ee),se=Zt.call(this),Object.defineProperty(w(se),"message",{value:ft.apply(w(se),arguments),writable:!0,configurable:!0}),se.name="".concat(se.name," [").concat(wt,"]"),delete se.name,se}return function s(wt,ft,pt){return ft&&a(wt.prototype,ft),pt&&a(wt,pt),Object.defineProperty(wt,"prototype",{writable:!1}),wt}(ee,[{key:"code",get:function(){return wt},set:function(Be){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Be,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(wt,"]: ").concat(this.message)}}]),ee}(pt)}function te(wt){for(var ft="",pt=wt.length,kt="-"===wt[0]?1:0;pt>=kt+4;pt-=3)ft="_".concat(wt.slice(pt-3,pt)).concat(ft);return"".concat(wt.slice(0,pt)).concat(ft)}function Bt(wt,ft,pt,kt,Zt,ee){if(wt>pt||wt<ft){var Be,se="bigint"==typeof ft?"n":"";throw Be=ee>3?0===ft||ft===BigInt(0)?">= 0".concat(se," and < 2").concat(se," ** ").concat(8*(ee+1)).concat(se):">= -(2".concat(se," ** ").concat(8*(ee+1)-1).concat(se,") and < 2 ** ")+"".concat(8*(ee+1)-1).concat(se):">= ".concat(ft).concat(se," and <= ").concat(pt).concat(se),new Pt.ERR_OUT_OF_RANGE("value",Be,wt)}!function Qt(wt,ft,pt){Ot(ft,"offset"),(void 0===wt[ft]||void 0===wt[ft+pt])&&qt(ft,wt.length-(pt+1))}(kt,Zt,ee)}function Ot(wt,ft){if("number"!=typeof wt)throw new Pt.ERR_INVALID_ARG_TYPE(ft,"number",wt)}function qt(wt,ft,pt){throw Math.floor(wt)!==wt?(Ot(wt,pt),new Pt.ERR_OUT_OF_RANGE(pt||"offset","an integer",wt)):ft<0?new Pt.ERR_BUFFER_OUT_OF_BOUNDS:new Pt.ERR_OUT_OF_RANGE(pt||"offset",">= ".concat(pt?1:0," and <= ").concat(ft),wt)}Vt("ERR_BUFFER_OUT_OF_BOUNDS",function(wt){return wt?"".concat(wt," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),Vt("ERR_INVALID_ARG_TYPE",function(wt,ft){return'The "'.concat(wt,'" argument must be of type number. Received type ').concat(v(ft))},TypeError),Vt("ERR_OUT_OF_RANGE",function(wt,ft,pt){var kt='The value of "'.concat(wt,'" is out of range.'),Zt=pt;return Number.isInteger(pt)&&Math.abs(pt)>Math.pow(2,32)?Zt=te(String(pt)):"bigint"==typeof pt&&(Zt=String(pt),(pt>Math.pow(BigInt(2),BigInt(32))||pt<-Math.pow(BigInt(2),BigInt(32)))&&(Zt=te(Zt)),Zt+="n"),kt+" It must be ".concat(ft,". Received ").concat(Zt)},RangeError);var ie=/[^+/0-9A-Za-z-_]/g;function pe(wt,ft){ft=ft||1/0;for(var pt,kt=wt.length,Zt=null,ee=[],se=0;se<kt;++se){if((pt=wt.charCodeAt(se))>55295&&pt<57344){if(!Zt){if(pt>56319){(ft-=3)>-1&&ee.push(239,191,189);continue}if(se+1===kt){(ft-=3)>-1&&ee.push(239,191,189);continue}Zt=pt;continue}if(pt<56320){(ft-=3)>-1&&ee.push(239,191,189),Zt=pt;continue}pt=65536+(Zt-55296<<10|pt-56320)}else Zt&&(ft-=3)>-1&&ee.push(239,191,189);if(Zt=null,pt<128){if((ft-=1)<0)break;ee.push(pt)}else if(pt<2048){if((ft-=2)<0)break;ee.push(pt>>6|192,63&pt|128)}else if(pt<65536){if((ft-=3)<0)break;ee.push(pt>>12|224,pt>>6&63|128,63&pt|128)}else{if(!(pt<1114112))throw new Error("Invalid code point");if((ft-=4)<0)break;ee.push(pt>>18|240,pt>>12&63|128,pt>>6&63|128,63&pt|128)}}return ee}function Kt(wt){return M.toByteArray(function oe(wt){if((wt=(wt=wt.split("=")[0]).trim().replace(ie,"")).length<2)return"";for(;wt.length%4!=0;)wt+="=";return wt}(wt))}function Et(wt,ft,pt,kt){var Zt;for(Zt=0;Zt<kt&&!(Zt+pt>=ft.length||Zt>=wt.length);++Zt)ft[Zt+pt]=wt[Zt];return Zt}function St(wt,ft){return wt instanceof ft||null!=wt&&null!=wt.constructor&&null!=wt.constructor.name&&wt.constructor.name===ft.name}function Dt(wt){return wt!=wt}var Ft=function(){for(var wt="0123456789abcdef",ft=new Array(256),pt=0;pt<16;++pt)for(var kt=16*pt,Zt=0;Zt<16;++Zt)ft[kt+Zt]=wt[pt]+wt[Zt];return ft}();function Nt(wt){return"undefined"==typeof BigInt?Rt:wt}function Rt(){throw new Error("BigInt not supported")}},2321:function(u){"use strict";u.exports=l,u.exports.isMobile=l,u.exports.default=l;var y=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,r=/android|ipad|playbook|silk/i;function l(a){a||(a={});var s=a.ua;if(!s&&"undefined"!=typeof navigator&&(s=navigator.userAgent),s&&s.headers&&"string"==typeof s.headers["user-agent"]&&(s=s.headers["user-agent"]),"string"!=typeof s)return!1;var c=y.test(s)&&!e.test(s)||!!a.tablet&&r.test(s);return!c&&a.tablet&&a.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==s.indexOf("Macintosh")&&-1!==s.indexOf("Safari")&&(c=!0),c}},3910:function(u,y){"use strict";y.byteLength=function m(M){var b=f(M),x=b[1];return 3*(b[0]+x)/4-x},y.toByteArray=function w(M){var b,d,L=f(M),x=L[0],S=L[1],T=new l(function h(M,b,L){return 3*(b+L)/4-L}(0,x,S)),n=0,E=S>0?x-4:x;for(d=0;d<E;d+=4)b=r[M.charCodeAt(d)]<<18|r[M.charCodeAt(d+1)]<<12|r[M.charCodeAt(d+2)]<<6|r[M.charCodeAt(d+3)],T[n++]=b>>16&255,T[n++]=b>>8&255,T[n++]=255&b;return 2===S&&(b=r[M.charCodeAt(d)]<<2|r[M.charCodeAt(d+1)]>>4,T[n++]=255&b),1===S&&(b=r[M.charCodeAt(d)]<<10|r[M.charCodeAt(d+1)]<<4|r[M.charCodeAt(d+2)]>>2,T[n++]=b>>8&255,T[n++]=255&b),T},y.fromByteArray=function v(M){for(var b,L=M.length,x=L%3,S=[],T=16383,n=0,E=L-x;n<E;n+=T)S.push(o(M,n,n+T>E?E:n+T));return 1===x?S.push(e[(b=M[L-1])>>2]+e[b<<4&63]+"=="):2===x&&S.push(e[(b=(M[L-2]<<8)+M[L-1])>>10]+e[b>>4&63]+e[b<<2&63]+"="),S.join("")};for(var e=[],r=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)e[s]=a[s],r[a.charCodeAt(s)]=s;function f(M){var b=M.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var L=M.indexOf("=");return-1===L&&(L=b),[L,L===b?0:4-L%4]}function p(M){return e[M>>18&63]+e[M>>12&63]+e[M>>6&63]+e[63&M]}function o(M,b,L){for(var S=[],T=b;T<L;T+=3)S.push(p((M[T]<<16&16711680)+(M[T+1]<<8&65280)+(255&M[T+2])));return S.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},3187:function(u,y){y.read=function(e,r,l,a,s){var c,f,m=8*s-a-1,h=(1<<m)-1,w=h>>1,p=-7,o=l?s-1:0,v=l?-1:1,M=e[r+o];for(o+=v,c=M&(1<<-p)-1,M>>=-p,p+=m;p>0;c=256*c+e[r+o],o+=v,p-=8);for(f=c&(1<<-p)-1,c>>=-p,p+=a;p>0;f=256*f+e[r+o],o+=v,p-=8);if(0===c)c=1-w;else{if(c===h)return f?NaN:1/0*(M?-1:1);f+=Math.pow(2,a),c-=w}return(M?-1:1)*f*Math.pow(2,c-a)},y.write=function(e,r,l,a,s,c){var f,m,h,w=8*c-s-1,p=(1<<w)-1,o=p>>1,v=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,M=a?0:c-1,b=a?1:-1,L=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(m=isNaN(r)?1:0,f=p):(f=Math.floor(Math.log(r)/Math.LN2),r*(h=Math.pow(2,-f))<1&&(f--,h*=2),(r+=f+o>=1?v/h:v*Math.pow(2,1-o))*h>=2&&(f++,h/=2),f+o>=p?(m=0,f=p):f+o>=1?(m=(r*h-1)*Math.pow(2,s),f+=o):(m=r*Math.pow(2,o-1)*Math.pow(2,s),f=0));s>=8;e[l+M]=255&m,M+=b,m/=256,s-=8);for(f=f<<s|m,w+=s;w>0;e[l+M]=255&f,M+=b,f/=256,w-=8);e[l+M-b]|=128*L}},1152:function(u,y,e){"use strict";u.exports=function f(m){var h=(m=m||{}).eye||[0,0,1],w=m.center||[0,0,0],p=m.up||[0,1,0],o=m.distanceLimits||[0,1/0],v=m.mode||"turntable",M=r(),b=l(),L=a();return M.setDistanceLimits(o[0],o[1]),M.lookAt(0,h,w,p),b.setDistanceLimits(o[0],o[1]),b.lookAt(0,h,w,p),L.setDistanceLimits(o[0],o[1]),L.lookAt(0,h,w,p),new s({turntable:M,orbit:b,matrix:L},v)};var r=e(3440),l=e(7774),a=e(9298);function s(m,h){this._controllerNames=Object.keys(m),this._controllerList=this._controllerNames.map(function(w){return m[w]}),this._mode=h,this._active=m[h],this._active||(this._mode="turntable",this._active=m.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var c=s.prototype;c.flush=function(m){for(var h=this._controllerList,w=0;w<h.length;++w)h[w].flush(m)},c.idle=function(m){for(var h=this._controllerList,w=0;w<h.length;++w)h[w].idle(m)},c.lookAt=function(m,h,w,p){for(var o=this._controllerList,v=0;v<o.length;++v)o[v].lookAt(m,h,w,p)},c.rotate=function(m,h,w,p){for(var o=this._controllerList,v=0;v<o.length;++v)o[v].rotate(m,h,w,p)},c.pan=function(m,h,w,p){for(var o=this._controllerList,v=0;v<o.length;++v)o[v].pan(m,h,w,p)},c.translate=function(m,h,w,p){for(var o=this._controllerList,v=0;v<o.length;++v)o[v].translate(m,h,w,p)},c.setMatrix=function(m,h){for(var w=this._controllerList,p=0;p<w.length;++p)w[p].setMatrix(m,h)},c.setDistanceLimits=function(m,h){for(var w=this._controllerList,p=0;p<w.length;++p)w[p].setDistanceLimits(m,h)},c.setDistance=function(m,h){for(var w=this._controllerList,p=0;p<w.length;++p)w[p].setDistance(m,h)},c.recalcMatrix=function(m){this._active.recalcMatrix(m)},c.getDistance=function(m){return this._active.getDistance(m)},c.getDistanceLimits=function(m){return this._active.getDistanceLimits(m)},c.lastT=function(){return this._active.lastT()},c.setMode=function(m){if(m!==this._mode){var h=this._controllerNames.indexOf(m);if(!(h<0)){var w=this._active,p=this._controllerList[h],o=Math.max(w.lastT(),p.lastT());w.recalcMatrix(o),p.setMatrix(o,w.computedMatrix),this._active=p,this._mode=m,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},c.getMode=function(){return this._mode}},8126:function(u,y,e){"use strict";var r="undefined"==typeof WeakMap?e(5346):WeakMap,l=e(5827),a=e(2944),s=new r;u.exports=function c(f){var m=s.get(f),h=m&&(m._triangleBuffer.handle||m._triangleBuffer.buffer);if(!h||!f.isBuffer(h)){var w=l(f,new Float32Array([-1,-1,-1,4,4,-1]));(m=a(f,[{buffer:w,type:f.FLOAT,size:2}]))._triangleBuffer=w,s.set(f,m)}m.bind(),f.drawArrays(f.TRIANGLES,0,3),m.unbind()}},8008:function(u,y,e){var r=e(4930);u.exports=function l(a,s,c){s="number"==typeof s?s:1,c=c||": ";var f=a.split(/\r?\n/),m=String(f.length+s-1).length;return f.map(function(h,w){var p=w+s,o=String(p).length;return r(p,m-o)+c+h}).join("\n")}},2153:function(u,y,e){"use strict";u.exports=function a(s){var c=s.length;if(0===c)return[];if(1===c)return[0];for(var f=s[0].length,m=[s[0]],h=[0],w=1;w<c;++w)if(m.push(s[w]),l(m,f)){if(h.push(w),h.length===f+1)return h}else m.pop();return h};var r=e(417);function l(s,c){for(var f=new Array(c+1),m=0;m<s.length;++m)f[m]=s[m];for(m=0;m<=s.length;++m){for(var h=s.length;h<=c;++h){for(var w=new Array(c),p=0;p<c;++p)w[p]=Math.pow(h+1-m,p);f[h]=w}if(r.apply(void 0,f))return!0}return!1}},4653:function(u,y,e){"use strict";u.exports=function a(s,c){return r(c).filter(function(f){for(var m=new Array(f.length),h=0;h<f.length;++h)m[h]=c[f[h]];return l(m)*s<1})};var r=e(4419),l=e(1778)},2350:function(u,y,e){u.exports=function a(s,c){return l(r(s,c))};var r=e(4653),l=e(8691)},7896:function(u){u.exports=function(e){return atob(e)}},957:function(u,y,e){"use strict";u.exports=function a(s,c){for(var f=c.length,m=new Array(f+1),h=0;h<f;++h){for(var w=new Array(f+1),p=0;p<=f;++p)w[p]=s[p][h];m[h]=w}for(m[f]=new Array(f+1),h=0;h<=f;++h)m[f][h]=1;var o=new Array(f+1);for(h=0;h<f;++h)o[h]=c[h];o[f]=1;var v=r(m,o),M=l(v[f+1]);0===M&&(M=1);var b=new Array(f+1);for(h=0;h<=f;++h)b[h]=l(v[h])/M;return b};var r=e(6606);function l(s){for(var c=0,f=0;f<s.length;++f)c+=s[f];return c}},1539:function(u,y,e){"use strict";var r=e(8524);u.exports=function l(a,s){return r(a[0].mul(s[1]).add(s[0].mul(a[1])),a[1].mul(s[1]))}},8846:function(u){"use strict";u.exports=function y(e,r){return e[0].mul(r[1]).cmp(r[0].mul(e[1]))}},9189:function(u,y,e){"use strict";var r=e(8524);u.exports=function l(a,s){return r(a[0].mul(s[1]),a[1].mul(s[0]))}},5125:function(u,y,e){"use strict";var r=e(234),l=e(3218),a=e(5514),s=e(2813),c=e(8524),f=e(9189);u.exports=function m(h,w){if(r(h))return w?f(h,m(w)):[h[0].clone(),h[1].clone()];var o,v,p=0;if(l(h))o=h.clone();else if("string"==typeof h)o=s(h);else{if(0===h)return[a(0),a(1)];if(h===Math.floor(h))o=a(h);else{for(;h!==Math.floor(h);)h*=Math.pow(2,256),p-=256;o=a(h)}}if(r(w))o.mul(w[1]),v=w[0].clone();else if(l(w))v=w.clone();else if("string"==typeof w)v=s(w);else if(w)if(w===Math.floor(w))v=a(w);else{for(;w!==Math.floor(w);)w*=Math.pow(2,256),p+=256;v=a(w)}else v=a(1);return p>0?o=o.ushln(p):p<0&&(v=v.ushln(-p)),c(o,v)}},234:function(u,y,e){"use strict";var r=e(3218);u.exports=function l(a){return Array.isArray(a)&&2===a.length&&r(a[0])&&r(a[1])}},4275:function(u,y,e){"use strict";var r=e(1928);u.exports=function l(a){return a.cmp(new r(0))}},9958:function(u,y,e){"use strict";var r=e(4275);u.exports=function l(a){var s=a.length,c=a.words,f=0;if(1===s)f=c[0];else if(2===s)f=c[0]+67108864*c[1];else for(var m=0;m<s;m++)f+=c[m]*Math.pow(67108864,m);return r(a)*f}},1112:function(u,y,e){"use strict";var r=e(8362),l=e(2288).countTrailingZeros;u.exports=function a(s){var c=l(r.lo(s));if(c<32)return c;var f=l(r.hi(s));return f>20?52:f+32}},3218:function(u,y,e){"use strict";e(1928),u.exports=function l(a){return a&&"object"==typeof a&&Boolean(a.words)}},5514:function(u,y,e){"use strict";var r=e(1928),l=e(8362);u.exports=function a(s){var c=l.exponent(s);return c<52?new r(s):new r(s*Math.pow(2,52-c)).ushln(c-52)}},8524:function(u,y,e){"use strict";var r=e(5514),l=e(4275);u.exports=function a(s,c){var f=l(s),m=l(c);if(0===f)return[r(0),r(1)];if(0===m)return[r(0),r(0)];m<0&&(s=s.neg(),c=c.neg());var h=s.gcd(c);return h.cmpn(1)?[s.div(h),c.div(h)]:[s,c]}},2813:function(u,y,e){"use strict";var r=e(1928);u.exports=function l(a){return new r(a)}},3962:function(u,y,e){"use strict";var r=e(8524);u.exports=function l(a,s){return r(a[0].mul(s[0]),a[1].mul(s[1]))}},4951:function(u,y,e){"use strict";var r=e(4275);u.exports=function l(a){return r(a[0])*r(a[1])}},4354:function(u,y,e){"use strict";var r=e(8524);u.exports=function l(a,s){return r(a[0].mul(s[1]).sub(a[1].mul(s[0])),a[1].mul(s[1]))}},7999:function(u,y,e){"use strict";var r=e(9958),l=e(1112);u.exports=function a(s){var c=s[0],f=s[1];if(0===c.cmpn(0))return 0;var m=c.abs().divmod(f.abs()),w=r(m.div),p=m.mod,o=c.negative!==f.negative?-1:1;if(0===p.cmpn(0))return o*w;if(w){var v=l(w)+4;return o*(w+(M=r(p.ushln(v).divRound(f)))*Math.pow(2,-v))}var b=f.bitLength()-p.bitLength()+53,M=r(p.ushln(b).divRound(f));return b<1023?o*M*Math.pow(2,-b):o*(M*=Math.pow(2,-1023))*Math.pow(2,1023-b)}},5070:function(u){"use strict";function y(c,f,m,h,w){for(var p=w+1;h<=w;){var o=h+w>>>1,v=c[o];(void 0!==m?m(v,f):v-f)>=0?(p=o,w=o-1):h=o+1}return p}function e(c,f,m,h,w){for(var p=w+1;h<=w;){var o=h+w>>>1,v=c[o];(void 0!==m?m(v,f):v-f)>0?(p=o,w=o-1):h=o+1}return p}function r(c,f,m,h,w){for(var p=h-1;h<=w;){var o=h+w>>>1,v=c[o];(void 0!==m?m(v,f):v-f)<0?(p=o,h=o+1):w=o-1}return p}function l(c,f,m,h,w){for(var p=h-1;h<=w;){var o=h+w>>>1,v=c[o];(void 0!==m?m(v,f):v-f)<=0?(p=o,h=o+1):w=o-1}return p}function a(c,f,m,h,w){for(;h<=w;){var p=h+w>>>1,o=c[p],v=void 0!==m?m(o,f):o-f;if(0===v)return p;v<=0?h=p+1:w=p-1}return-1}function s(c,f,m,h,w,p){return"function"==typeof m?p(c,f,m,void 0===h?0:0|h,void 0===w?c.length-1:0|w):p(c,f,void 0,void 0===m?0:0|m,void 0===h?c.length-1:0|h)}u.exports={ge:function(c,f,m,h,w){return s(c,f,m,h,w,y)},gt:function(c,f,m,h,w){return s(c,f,m,h,w,e)},lt:function(c,f,m,h,w){return s(c,f,m,h,w,r)},le:function(c,f,m,h,w){return s(c,f,m,h,w,l)},eq:function(c,f,m,h,w){return s(c,f,m,h,w,a)}}},2288:function(u,y){"use strict";function r(a){var s=32;return(a&=-a)&&s--,65535&a&&(s-=16),16711935&a&&(s-=8),252645135&a&&(s-=4),858993459&a&&(s-=2),1431655765&a&&(s-=1),s}y.INT_BITS=32,y.INT_MAX=2147483647,y.INT_MIN=-1<<31,y.sign=function(a){return(a>0)-(a<0)},y.abs=function(a){var s=a>>31;return(a^s)-s},y.min=function(a,s){return s^(a^s)&-(a<s)},y.max=function(a,s){return a^(a^s)&-(a<s)},y.isPow2=function(a){return!(a&a-1||!a)},y.log2=function(a){var s,c;return s=(a>65535)<<4,s|=c=((a>>>=s)>255)<<3,s|=c=((a>>>=c)>15)<<2,(s|=c=((a>>>=c)>3)<<1)|(a>>>=c)>>1},y.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},y.popCount=function(a){return 16843009*((a=(858993459&(a-=a>>>1&1431655765))+(a>>>2&858993459))+(a>>>4)&252645135)>>>24},y.countTrailingZeros=r,y.nextPow2=function(a){return a+=0===a,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,1+((a|=a>>>8)|a>>>16)},y.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,(a|=a>>>16)-(a>>>1)},y.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,27030>>>(a&=15)&1};var l=new Array(256);(function(a){for(var s=0;s<256;++s){var c=s,f=s,m=7;for(c>>>=1;c;c>>>=1)f<<=1,f|=1&c,--m;a[s]=f<<m&255}})(l),y.reverse=function(a){return l[255&a]<<24|l[a>>>8&255]<<16|l[a>>>16&255]<<8|l[a>>>24&255]},y.interleave2=function(a,s){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a&=65535)|a<<8))|a<<4))|a<<2))|a<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s&=65535)|s<<8))|s<<4))|s<<2))|s<<1))<<1},y.deinterleave2=function(a,s){return(a=65535&((a=16711935&((a=252645135&((a=858993459&((a=a>>>s&1431655765)|a>>>1))|a>>>2))|a>>>4))|a>>>16))<<16>>16},y.interleave3=function(a,s,c){return a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2),(a|=(s=1227133513&((s=3272356035&((s=251719695&((s=4278190335&((s&=1023)|s<<16))|s<<8))|s<<4))|s<<2))<<1)|(c=1227133513&((c=3272356035&((c=251719695&((c=4278190335&((c&=1023)|c<<16))|c<<8))|c<<4))|c<<2))<<2},y.deinterleave3=function(a,s){return(a=1023&((a=4278190335&((a=251719695&((a=3272356035&((a=a>>>s&1227133513)|a>>>2))|a>>>4))|a>>>8))|a>>>16))<<22>>22},y.nextCombination=function(a){var s=a|a-1;return s+1|(~s&-~s)-1>>>r(a)+1}},1928:function(u,y,e){!function(r,l){"use strict";function a(B,z){if(!B)throw new Error(z||"Assertion failed")}function s(B,z){B.super_=z;var U=function(){};U.prototype=z.prototype,B.prototype=new U,B.prototype.constructor=B}function c(B,z,U){if(c.isBN(B))return B;this.negative=0,this.words=null,this.length=0,this.red=null,null!==B&&(("le"===z||"be"===z)&&(U=z,z=10),this._init(B||0,z||10,U||"be"))}var f;"object"==typeof r?r.exports=c:l.BN=c,c.BN=c,c.wordSize=26;try{f="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:e(6601).Buffer}catch(B){}function m(B,z){var U=B.charCodeAt(z);return U>=65&&U<=70?U-55:U>=97&&U<=102?U-87:U-48&15}function h(B,z,U){var H=m(B,U);return U-1>=z&&(H|=m(B,U-1)<<4),H}function w(B,z,U,H){for(var J=0,nt=Math.min(B.length,U),it=z;it<nt;it++){var ut=B.charCodeAt(it)-48;J*=H,J+=ut>=49?ut-49+10:ut>=17?ut-17+10:ut}return J}c.isBN=function(z){return z instanceof c||null!==z&&"object"==typeof z&&z.constructor.wordSize===c.wordSize&&Array.isArray(z.words)},c.max=function(z,U){return z.cmp(U)>0?z:U},c.min=function(z,U){return z.cmp(U)<0?z:U},c.prototype._init=function(z,U,H){if("number"==typeof z)return this._initNumber(z,U,H);if("object"==typeof z)return this._initArray(z,U,H);"hex"===U&&(U=16),a(U===(0|U)&&U>=2&&U<=36);var J=0;"-"===(z=z.toString().replace(/\s+/g,""))[0]&&(J++,this.negative=1),J<z.length&&(16===U?this._parseHex(z,J,H):(this._parseBase(z,U,J),"le"===H&&this._initArray(this.toArray(),U,H)))},c.prototype._initNumber=function(z,U,H){z<0&&(this.negative=1,z=-z),z<67108864?(this.words=[67108863&z],this.length=1):z<4503599627370496?(this.words=[67108863&z,z/67108864&67108863],this.length=2):(a(z<9007199254740992),this.words=[67108863&z,z/67108864&67108863,1],this.length=3),"le"===H&&this._initArray(this.toArray(),U,H)},c.prototype._initArray=function(z,U,H){if(a("number"==typeof z.length),z.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(z.length/3),this.words=new Array(this.length);for(var J=0;J<this.length;J++)this.words[J]=0;var nt,it,ut=0;if("be"===H)for(J=z.length-1,nt=0;J>=0;J-=3)this.words[nt]|=(it=z[J]|z[J-1]<<8|z[J-2]<<16)<<ut&67108863,this.words[nt+1]=it>>>26-ut&67108863,(ut+=24)>=26&&(ut-=26,nt++);else if("le"===H)for(J=0,nt=0;J<z.length;J+=3)this.words[nt]|=(it=z[J]|z[J+1]<<8|z[J+2]<<16)<<ut&67108863,this.words[nt+1]=it>>>26-ut&67108863,(ut+=24)>=26&&(ut-=26,nt++);return this.strip()},c.prototype._parseHex=function(z,U,H){this.length=Math.ceil((z.length-U)/6),this.words=new Array(this.length);for(var J=0;J<this.length;J++)this.words[J]=0;var ut,nt=0,it=0;if("be"===H)for(J=z.length-1;J>=U;J-=2)ut=h(z,U,J)<<nt,this.words[it]|=67108863&ut,nt>=18?(nt-=18,this.words[it+=1]|=ut>>>26):nt+=8;else for(J=(z.length-U)%2==0?U+1:U;J<z.length;J+=2)ut=h(z,U,J)<<nt,this.words[it]|=67108863&ut,nt>=18?(nt-=18,this.words[it+=1]|=ut>>>26):nt+=8;this.strip()},c.prototype._parseBase=function(z,U,H){this.words=[0],this.length=1;for(var J=0,nt=1;nt<=67108863;nt*=U)J++;J--,nt=nt/U|0;for(var it=z.length-H,ut=it%J,Q=Math.min(it,it-ut)+H,j=0,Z=H;Z<Q;Z+=J)j=w(z,Z,Z+J,U),this.imuln(nt),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j);if(0!==ut){var G=1;for(j=w(z,Z,z.length,U),Z=0;Z<ut;Z++)G*=U;this.imuln(G),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j)}this.strip()},c.prototype.copy=function(z){z.words=new Array(this.length);for(var U=0;U<this.length;U++)z.words[U]=this.words[U];z.length=this.length,z.negative=this.negative,z.red=this.red},c.prototype.clone=function(){var z=new c(null);return this.copy(z),z},c.prototype._expand=function(z){for(;this.length<z;)this.words[this.length++]=0;return this},c.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},c.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},c.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],o=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function b(B,z,U){U.negative=z.negative^B.negative;var H=B.length+z.length|0;U.length=H,H=H-1|0;var J=0|B.words[0],nt=0|z.words[0],it=J*nt,Q=it/67108864|0;U.words[0]=67108863&it;for(var j=1;j<H;j++){for(var Z=Q>>>26,G=67108863&Q,K=Math.min(j,z.length-1),at=Math.max(0,j-B.length+1);at<=K;at++)Z+=(it=(J=0|B.words[j-at|0])*(nt=0|z.words[at])+G)/67108864|0,G=67108863&it;U.words[j]=0|G,Q=0|Z}return 0!==Q?U.words[j]=0|Q:U.length--,U.strip()}c.prototype.toString=function(z,U){var H;if(U=0|U||1,16===(z=z||10)||"hex"===z){H="";for(var J=0,nt=0,it=0;it<this.length;it++){var ut=this.words[it],Q=(16777215&(ut<<J|nt)).toString(16);H=0!=(nt=ut>>>24-J&16777215)||it!==this.length-1?p[6-Q.length]+Q+H:Q+H,(J+=2)>=26&&(J-=26,it--)}for(0!==nt&&(H=nt.toString(16)+H);H.length%U!=0;)H="0"+H;return 0!==this.negative&&(H="-"+H),H}if(z===(0|z)&&z>=2&&z<=36){var j=o[z],Z=v[z];H="";var G=this.clone();for(G.negative=0;!G.isZero();){var K=G.modn(Z).toString(z);H=(G=G.idivn(Z)).isZero()?K+H:p[j-K.length]+K+H}for(this.isZero()&&(H="0"+H);H.length%U!=0;)H="0"+H;return 0!==this.negative&&(H="-"+H),H}a(!1,"Base should be between 2 and 36")},c.prototype.toNumber=function(){var z=this.words[0];return 2===this.length?z+=67108864*this.words[1]:3===this.length&&1===this.words[2]?z+=4503599627370496+67108864*this.words[1]:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-z:z},c.prototype.toJSON=function(){return this.toString(16)},c.prototype.toBuffer=function(z,U){return a(void 0!==f),this.toArrayLike(f,z,U)},c.prototype.toArray=function(z,U){return this.toArrayLike(Array,z,U)},c.prototype.toArrayLike=function(z,U,H){var J=this.byteLength(),nt=H||Math.max(1,J);a(J<=nt,"byte array longer than desired length"),a(nt>0,"Requested array length <= 0"),this.strip();var Q,j,it="le"===U,ut=new z(nt),Z=this.clone();if(it){for(j=0;!Z.isZero();j++)Q=Z.andln(255),Z.iushrn(8),ut[j]=Q;for(;j<nt;j++)ut[j]=0}else{for(j=0;j<nt-J;j++)ut[j]=0;for(j=0;!Z.isZero();j++)Q=Z.andln(255),Z.iushrn(8),ut[nt-j-1]=Q}return ut},c.prototype._countBits=Math.clz32?function(z){return 32-Math.clz32(z)}:function(z){var U=z,H=0;return U>=4096&&(H+=13,U>>>=13),U>=64&&(H+=7,U>>>=7),U>=8&&(H+=4,U>>>=4),U>=2&&(H+=2,U>>>=2),H+U},c.prototype._zeroBits=function(z){if(0===z)return 26;var U=z,H=0;return 0==(8191&U)&&(H+=13,U>>>=13),0==(127&U)&&(H+=7,U>>>=7),0==(15&U)&&(H+=4,U>>>=4),0==(3&U)&&(H+=2,U>>>=2),0==(1&U)&&H++,H},c.prototype.bitLength=function(){var U=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+U},c.prototype.zeroBits=function(){if(this.isZero())return 0;for(var z=0,U=0;U<this.length;U++){var H=this._zeroBits(this.words[U]);if(z+=H,26!==H)break}return z},c.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},c.prototype.toTwos=function(z){return 0!==this.negative?this.abs().inotn(z).iaddn(1):this.clone()},c.prototype.fromTwos=function(z){return this.testn(z-1)?this.notn(z).iaddn(1).ineg():this.clone()},c.prototype.isNeg=function(){return 0!==this.negative},c.prototype.neg=function(){return this.clone().ineg()},c.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},c.prototype.iuor=function(z){for(;this.length<z.length;)this.words[this.length++]=0;for(var U=0;U<z.length;U++)this.words[U]=this.words[U]|z.words[U];return this.strip()},c.prototype.ior=function(z){return a(0==(this.negative|z.negative)),this.iuor(z)},c.prototype.or=function(z){return this.length>z.length?this.clone().ior(z):z.clone().ior(this)},c.prototype.uor=function(z){return this.length>z.length?this.clone().iuor(z):z.clone().iuor(this)},c.prototype.iuand=function(z){var U;U=this.length>z.length?z:this;for(var H=0;H<U.length;H++)this.words[H]=this.words[H]&z.words[H];return this.length=U.length,this.strip()},c.prototype.iand=function(z){return a(0==(this.negative|z.negative)),this.iuand(z)},c.prototype.and=function(z){return this.length>z.length?this.clone().iand(z):z.clone().iand(this)},c.prototype.uand=function(z){return this.length>z.length?this.clone().iuand(z):z.clone().iuand(this)},c.prototype.iuxor=function(z){var U,H;this.length>z.length?(U=this,H=z):(U=z,H=this);for(var J=0;J<H.length;J++)this.words[J]=U.words[J]^H.words[J];if(this!==U)for(;J<U.length;J++)this.words[J]=U.words[J];return this.length=U.length,this.strip()},c.prototype.ixor=function(z){return a(0==(this.negative|z.negative)),this.iuxor(z)},c.prototype.xor=function(z){return this.length>z.length?this.clone().ixor(z):z.clone().ixor(this)},c.prototype.uxor=function(z){return this.length>z.length?this.clone().iuxor(z):z.clone().iuxor(this)},c.prototype.inotn=function(z){a("number"==typeof z&&z>=0);var U=0|Math.ceil(z/26),H=z%26;this._expand(U),H>0&&U--;for(var J=0;J<U;J++)this.words[J]=67108863&~this.words[J];return H>0&&(this.words[J]=~this.words[J]&67108863>>26-H),this.strip()},c.prototype.notn=function(z){return this.clone().inotn(z)},c.prototype.setn=function(z,U){a("number"==typeof z&&z>=0);var H=z/26|0,J=z%26;return this._expand(H+1),this.words[H]=U?this.words[H]|1<<J:this.words[H]&~(1<<J),this.strip()},c.prototype.iadd=function(z){var U,H,J;if(0!==this.negative&&0===z.negative)return this.negative=0,U=this.isub(z),this.negative^=1,this._normSign();if(0===this.negative&&0!==z.negative)return z.negative=0,U=this.isub(z),z.negative=1,U._normSign();this.length>z.length?(H=this,J=z):(H=z,J=this);for(var nt=0,it=0;it<J.length;it++)this.words[it]=67108863&(U=(0|H.words[it])+(0|J.words[it])+nt),nt=U>>>26;for(;0!==nt&&it<H.length;it++)this.words[it]=67108863&(U=(0|H.words[it])+nt),nt=U>>>26;if(this.length=H.length,0!==nt)this.words[this.length]=nt,this.length++;else if(H!==this)for(;it<H.length;it++)this.words[it]=H.words[it];return this},c.prototype.add=function(z){var U;return 0!==z.negative&&0===this.negative?(z.negative=0,U=this.sub(z),z.negative^=1,U):0===z.negative&&0!==this.negative?(this.negative=0,U=z.sub(this),this.negative=1,U):this.length>z.length?this.clone().iadd(z):z.clone().iadd(this)},c.prototype.isub=function(z){if(0!==z.negative){z.negative=0;var U=this.iadd(z);return z.negative=1,U._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(z),this.negative=1,this._normSign();var J,nt,H=this.cmp(z);if(0===H)return this.negative=0,this.length=1,this.words[0]=0,this;H>0?(J=this,nt=z):(J=z,nt=this);for(var it=0,ut=0;ut<nt.length;ut++)it=(U=(0|J.words[ut])-(0|nt.words[ut])+it)>>26,this.words[ut]=67108863&U;for(;0!==it&&ut<J.length;ut++)it=(U=(0|J.words[ut])+it)>>26,this.words[ut]=67108863&U;if(0===it&&ut<J.length&&J!==this)for(;ut<J.length;ut++)this.words[ut]=J.words[ut];return this.length=Math.max(this.length,ut),J!==this&&(this.negative=1),this.strip()},c.prototype.sub=function(z){return this.clone().isub(z)};var L=function(z,U,H){var Q,j,Z,J=z.words,nt=U.words,it=H.words,ut=0,G=0|J[0],K=8191&G,at=G>>>13,$=0|J[1],X=8191&$,rt=$>>>13,et=0|J[2],st=8191&et,dt=et>>>13,bt=0|J[3],gt=8191&bt,Lt=bt>>>13,It=0|J[4],Mt=8191&It,xt=It>>>13,At=0|J[5],Gt=8191&At,Wt=At>>>13,Pt=0|J[6],Vt=8191&Pt,te=Pt>>>13,Qt=0|J[7],Bt=8191&Qt,Ot=Qt>>>13,qt=0|J[8],ie=8191&qt,oe=qt>>>13,pe=0|J[9],de=8191&pe,Fe=pe>>>13,Kt=0|nt[0],Et=8191&Kt,St=Kt>>>13,Dt=0|nt[1],Ft=8191&Dt,Nt=Dt>>>13,Rt=0|nt[2],wt=8191&Rt,ft=Rt>>>13,pt=0|nt[3],kt=8191&pt,Zt=pt>>>13,ee=0|nt[4],se=8191&ee,Be=ee>>>13,Ke=0|nt[5],xe=8191&Ke,Pe=Ke>>>13,Ge=0|nt[6],gr=8191&Ge,ue=Ge>>>13,Ne=0|nt[7],Ye=8191&Ne,xr=Ne>>>13,rr=0|nt[8],ce=8191&rr,re=rr>>>13,ve=0|nt[9],be=8191&ve,Ae=ve>>>13;H.negative=z.negative^U.negative,H.length=19;var Te=(ut+(Q=Math.imul(K,Et))|0)+((8191&(j=(j=Math.imul(K,St))+Math.imul(at,Et)|0))<<13)|0;ut=((Z=Math.imul(at,St))+(j>>>13)|0)+(Te>>>26)|0,Te&=67108863,Q=Math.imul(X,Et),j=(j=Math.imul(X,St))+Math.imul(rt,Et)|0,Z=Math.imul(rt,St);var Re=(ut+(Q=Q+Math.imul(K,Ft)|0)|0)+((8191&(j=(j=j+Math.imul(K,Nt)|0)+Math.imul(at,Ft)|0))<<13)|0;ut=((Z=Z+Math.imul(at,Nt)|0)+(j>>>13)|0)+(Re>>>26)|0,Re&=67108863,Q=Math.imul(st,Et),j=(j=Math.imul(st,St))+Math.imul(dt,Et)|0,Z=Math.imul(dt,St),Q=Q+Math.imul(X,Ft)|0,j=(j=j+Math.imul(X,Nt)|0)+Math.imul(rt,Ft)|0,Z=Z+Math.imul(rt,Nt)|0;var Ie=(ut+(Q=Q+Math.imul(K,wt)|0)|0)+((8191&(j=(j=j+Math.imul(K,ft)|0)+Math.imul(at,wt)|0))<<13)|0;ut=((Z=Z+Math.imul(at,ft)|0)+(j>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,Q=Math.imul(gt,Et),j=(j=Math.imul(gt,St))+Math.imul(Lt,Et)|0,Z=Math.imul(Lt,St),Q=Q+Math.imul(st,Ft)|0,j=(j=j+Math.imul(st,Nt)|0)+Math.imul(dt,Ft)|0,Z=Z+Math.imul(dt,Nt)|0,Q=Q+Math.imul(X,wt)|0,j=(j=j+Math.imul(X,ft)|0)+Math.imul(rt,wt)|0,Z=Z+Math.imul(rt,ft)|0;var Xe=(ut+(Q=Q+Math.imul(K,kt)|0)|0)+((8191&(j=(j=j+Math.imul(K,Zt)|0)+Math.imul(at,kt)|0))<<13)|0;ut=((Z=Z+Math.imul(at,Zt)|0)+(j>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,Q=Math.imul(Mt,Et),j=(j=Math.imul(Mt,St))+Math.imul(xt,Et)|0,Z=Math.imul(xt,St),Q=Q+Math.imul(gt,Ft)|0,j=(j=j+Math.imul(gt,Nt)|0)+Math.imul(Lt,Ft)|0,Z=Z+Math.imul(Lt,Nt)|0,Q=Q+Math.imul(st,wt)|0,j=(j=j+Math.imul(st,ft)|0)+Math.imul(dt,wt)|0,Z=Z+Math.imul(dt,ft)|0,Q=Q+Math.imul(X,kt)|0,j=(j=j+Math.imul(X,Zt)|0)+Math.imul(rt,kt)|0,Z=Z+Math.imul(rt,Zt)|0;var ar=(ut+(Q=Q+Math.imul(K,se)|0)|0)+((8191&(j=(j=j+Math.imul(K,Be)|0)+Math.imul(at,se)|0))<<13)|0;ut=((Z=Z+Math.imul(at,Be)|0)+(j>>>13)|0)+(ar>>>26)|0,ar&=67108863,Q=Math.imul(Gt,Et),j=(j=Math.imul(Gt,St))+Math.imul(Wt,Et)|0,Z=Math.imul(Wt,St),Q=Q+Math.imul(Mt,Ft)|0,j=(j=j+Math.imul(Mt,Nt)|0)+Math.imul(xt,Ft)|0,Z=Z+Math.imul(xt,Nt)|0,Q=Q+Math.imul(gt,wt)|0,j=(j=j+Math.imul(gt,ft)|0)+Math.imul(Lt,wt)|0,Z=Z+Math.imul(Lt,ft)|0,Q=Q+Math.imul(st,kt)|0,j=(j=j+Math.imul(st,Zt)|0)+Math.imul(dt,kt)|0,Z=Z+Math.imul(dt,Zt)|0,Q=Q+Math.imul(X,se)|0,j=(j=j+Math.imul(X,Be)|0)+Math.imul(rt,se)|0,Z=Z+Math.imul(rt,Be)|0;var nr=(ut+(Q=Q+Math.imul(K,xe)|0)|0)+((8191&(j=(j=j+Math.imul(K,Pe)|0)+Math.imul(at,xe)|0))<<13)|0;ut=((Z=Z+Math.imul(at,Pe)|0)+(j>>>13)|0)+(nr>>>26)|0,nr&=67108863,Q=Math.imul(Vt,Et),j=(j=Math.imul(Vt,St))+Math.imul(te,Et)|0,Z=Math.imul(te,St),Q=Q+Math.imul(Gt,Ft)|0,j=(j=j+Math.imul(Gt,Nt)|0)+Math.imul(Wt,Ft)|0,Z=Z+Math.imul(Wt,Nt)|0,Q=Q+Math.imul(Mt,wt)|0,j=(j=j+Math.imul(Mt,ft)|0)+Math.imul(xt,wt)|0,Z=Z+Math.imul(xt,ft)|0,Q=Q+Math.imul(gt,kt)|0,j=(j=j+Math.imul(gt,Zt)|0)+Math.imul(Lt,kt)|0,Z=Z+Math.imul(Lt,Zt)|0,Q=Q+Math.imul(st,se)|0,j=(j=j+Math.imul(st,Be)|0)+Math.imul(dt,se)|0,Z=Z+Math.imul(dt,Be)|0,Q=Q+Math.imul(X,xe)|0,j=(j=j+Math.imul(X,Pe)|0)+Math.imul(rt,xe)|0,Z=Z+Math.imul(rt,Pe)|0;var cr=(ut+(Q=Q+Math.imul(K,gr)|0)|0)+((8191&(j=(j=j+Math.imul(K,ue)|0)+Math.imul(at,gr)|0))<<13)|0;ut=((Z=Z+Math.imul(at,ue)|0)+(j>>>13)|0)+(cr>>>26)|0,cr&=67108863,Q=Math.imul(Bt,Et),j=(j=Math.imul(Bt,St))+Math.imul(Ot,Et)|0,Z=Math.imul(Ot,St),Q=Q+Math.imul(Vt,Ft)|0,j=(j=j+Math.imul(Vt,Nt)|0)+Math.imul(te,Ft)|0,Z=Z+Math.imul(te,Nt)|0,Q=Q+Math.imul(Gt,wt)|0,j=(j=j+Math.imul(Gt,ft)|0)+Math.imul(Wt,wt)|0,Z=Z+Math.imul(Wt,ft)|0,Q=Q+Math.imul(Mt,kt)|0,j=(j=j+Math.imul(Mt,Zt)|0)+Math.imul(xt,kt)|0,Z=Z+Math.imul(xt,Zt)|0,Q=Q+Math.imul(gt,se)|0,j=(j=j+Math.imul(gt,Be)|0)+Math.imul(Lt,se)|0,Z=Z+Math.imul(Lt,Be)|0,Q=Q+Math.imul(st,xe)|0,j=(j=j+Math.imul(st,Pe)|0)+Math.imul(dt,xe)|0,Z=Z+Math.imul(dt,Pe)|0,Q=Q+Math.imul(X,gr)|0,j=(j=j+Math.imul(X,ue)|0)+Math.imul(rt,gr)|0,Z=Z+Math.imul(rt,ue)|0;var Ut=(ut+(Q=Q+Math.imul(K,Ye)|0)|0)+((8191&(j=(j=j+Math.imul(K,xr)|0)+Math.imul(at,Ye)|0))<<13)|0;ut=((Z=Z+Math.imul(at,xr)|0)+(j>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,Q=Math.imul(ie,Et),j=(j=Math.imul(ie,St))+Math.imul(oe,Et)|0,Z=Math.imul(oe,St),Q=Q+Math.imul(Bt,Ft)|0,j=(j=j+Math.imul(Bt,Nt)|0)+Math.imul(Ot,Ft)|0,Z=Z+Math.imul(Ot,Nt)|0,Q=Q+Math.imul(Vt,wt)|0,j=(j=j+Math.imul(Vt,ft)|0)+Math.imul(te,wt)|0,Z=Z+Math.imul(te,ft)|0,Q=Q+Math.imul(Gt,kt)|0,j=(j=j+Math.imul(Gt,Zt)|0)+Math.imul(Wt,kt)|0,Z=Z+Math.imul(Wt,Zt)|0,Q=Q+Math.imul(Mt,se)|0,j=(j=j+Math.imul(Mt,Be)|0)+Math.imul(xt,se)|0,Z=Z+Math.imul(xt,Be)|0,Q=Q+Math.imul(gt,xe)|0,j=(j=j+Math.imul(gt,Pe)|0)+Math.imul(Lt,xe)|0,Z=Z+Math.imul(Lt,Pe)|0,Q=Q+Math.imul(st,gr)|0,j=(j=j+Math.imul(st,ue)|0)+Math.imul(dt,gr)|0,Z=Z+Math.imul(dt,ue)|0,Q=Q+Math.imul(X,Ye)|0,j=(j=j+Math.imul(X,xr)|0)+Math.imul(rt,Ye)|0,Z=Z+Math.imul(rt,xr)|0;var Ht=(ut+(Q=Q+Math.imul(K,ce)|0)|0)+((8191&(j=(j=j+Math.imul(K,re)|0)+Math.imul(at,ce)|0))<<13)|0;ut=((Z=Z+Math.imul(at,re)|0)+(j>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,Q=Math.imul(de,Et),j=(j=Math.imul(de,St))+Math.imul(Fe,Et)|0,Z=Math.imul(Fe,St),Q=Q+Math.imul(ie,Ft)|0,j=(j=j+Math.imul(ie,Nt)|0)+Math.imul(oe,Ft)|0,Z=Z+Math.imul(oe,Nt)|0,Q=Q+Math.imul(Bt,wt)|0,j=(j=j+Math.imul(Bt,ft)|0)+Math.imul(Ot,wt)|0,Z=Z+Math.imul(Ot,ft)|0,Q=Q+Math.imul(Vt,kt)|0,j=(j=j+Math.imul(Vt,Zt)|0)+Math.imul(te,kt)|0,Z=Z+Math.imul(te,Zt)|0,Q=Q+Math.imul(Gt,se)|0,j=(j=j+Math.imul(Gt,Be)|0)+Math.imul(Wt,se)|0,Z=Z+Math.imul(Wt,Be)|0,Q=Q+Math.imul(Mt,xe)|0,j=(j=j+Math.imul(Mt,Pe)|0)+Math.imul(xt,xe)|0,Z=Z+Math.imul(xt,Pe)|0,Q=Q+Math.imul(gt,gr)|0,j=(j=j+Math.imul(gt,ue)|0)+Math.imul(Lt,gr)|0,Z=Z+Math.imul(Lt,ue)|0,Q=Q+Math.imul(st,Ye)|0,j=(j=j+Math.imul(st,xr)|0)+Math.imul(dt,Ye)|0,Z=Z+Math.imul(dt,xr)|0,Q=Q+Math.imul(X,ce)|0,j=(j=j+Math.imul(X,re)|0)+Math.imul(rt,ce)|0,Z=Z+Math.imul(rt,re)|0;var Se=(ut+(Q=Q+Math.imul(K,be)|0)|0)+((8191&(j=(j=j+Math.imul(K,Ae)|0)+Math.imul(at,be)|0))<<13)|0;ut=((Z=Z+Math.imul(at,Ae)|0)+(j>>>13)|0)+(Se>>>26)|0,Se&=67108863,Q=Math.imul(de,Ft),j=(j=Math.imul(de,Nt))+Math.imul(Fe,Ft)|0,Z=Math.imul(Fe,Nt),Q=Q+Math.imul(ie,wt)|0,j=(j=j+Math.imul(ie,ft)|0)+Math.imul(oe,wt)|0,Z=Z+Math.imul(oe,ft)|0,Q=Q+Math.imul(Bt,kt)|0,j=(j=j+Math.imul(Bt,Zt)|0)+Math.imul(Ot,kt)|0,Z=Z+Math.imul(Ot,Zt)|0,Q=Q+Math.imul(Vt,se)|0,j=(j=j+Math.imul(Vt,Be)|0)+Math.imul(te,se)|0,Z=Z+Math.imul(te,Be)|0,Q=Q+Math.imul(Gt,xe)|0,j=(j=j+Math.imul(Gt,Pe)|0)+Math.imul(Wt,xe)|0,Z=Z+Math.imul(Wt,Pe)|0,Q=Q+Math.imul(Mt,gr)|0,j=(j=j+Math.imul(Mt,ue)|0)+Math.imul(xt,gr)|0,Z=Z+Math.imul(xt,ue)|0,Q=Q+Math.imul(gt,Ye)|0,j=(j=j+Math.imul(gt,xr)|0)+Math.imul(Lt,Ye)|0,Z=Z+Math.imul(Lt,xr)|0,Q=Q+Math.imul(st,ce)|0,j=(j=j+Math.imul(st,re)|0)+Math.imul(dt,ce)|0,Z=Z+Math.imul(dt,re)|0;var Ce=(ut+(Q=Q+Math.imul(X,be)|0)|0)+((8191&(j=(j=j+Math.imul(X,Ae)|0)+Math.imul(rt,be)|0))<<13)|0;ut=((Z=Z+Math.imul(rt,Ae)|0)+(j>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,Q=Math.imul(de,wt),j=(j=Math.imul(de,ft))+Math.imul(Fe,wt)|0,Z=Math.imul(Fe,ft),Q=Q+Math.imul(ie,kt)|0,j=(j=j+Math.imul(ie,Zt)|0)+Math.imul(oe,kt)|0,Z=Z+Math.imul(oe,Zt)|0,Q=Q+Math.imul(Bt,se)|0,j=(j=j+Math.imul(Bt,Be)|0)+Math.imul(Ot,se)|0,Z=Z+Math.imul(Ot,Be)|0,Q=Q+Math.imul(Vt,xe)|0,j=(j=j+Math.imul(Vt,Pe)|0)+Math.imul(te,xe)|0,Z=Z+Math.imul(te,Pe)|0,Q=Q+Math.imul(Gt,gr)|0,j=(j=j+Math.imul(Gt,ue)|0)+Math.imul(Wt,gr)|0,Z=Z+Math.imul(Wt,ue)|0,Q=Q+Math.imul(Mt,Ye)|0,j=(j=j+Math.imul(Mt,xr)|0)+Math.imul(xt,Ye)|0,Z=Z+Math.imul(xt,xr)|0,Q=Q+Math.imul(gt,ce)|0,j=(j=j+Math.imul(gt,re)|0)+Math.imul(Lt,ce)|0,Z=Z+Math.imul(Lt,re)|0;var We=(ut+(Q=Q+Math.imul(st,be)|0)|0)+((8191&(j=(j=j+Math.imul(st,Ae)|0)+Math.imul(dt,be)|0))<<13)|0;ut=((Z=Z+Math.imul(dt,Ae)|0)+(j>>>13)|0)+(We>>>26)|0,We&=67108863,Q=Math.imul(de,kt),j=(j=Math.imul(de,Zt))+Math.imul(Fe,kt)|0,Z=Math.imul(Fe,Zt),Q=Q+Math.imul(ie,se)|0,j=(j=j+Math.imul(ie,Be)|0)+Math.imul(oe,se)|0,Z=Z+Math.imul(oe,Be)|0,Q=Q+Math.imul(Bt,xe)|0,j=(j=j+Math.imul(Bt,Pe)|0)+Math.imul(Ot,xe)|0,Z=Z+Math.imul(Ot,Pe)|0,Q=Q+Math.imul(Vt,gr)|0,j=(j=j+Math.imul(Vt,ue)|0)+Math.imul(te,gr)|0,Z=Z+Math.imul(te,ue)|0,Q=Q+Math.imul(Gt,Ye)|0,j=(j=j+Math.imul(Gt,xr)|0)+Math.imul(Wt,Ye)|0,Z=Z+Math.imul(Wt,xr)|0,Q=Q+Math.imul(Mt,ce)|0,j=(j=j+Math.imul(Mt,re)|0)+Math.imul(xt,ce)|0,Z=Z+Math.imul(xt,re)|0;var qe=(ut+(Q=Q+Math.imul(gt,be)|0)|0)+((8191&(j=(j=j+Math.imul(gt,Ae)|0)+Math.imul(Lt,be)|0))<<13)|0;ut=((Z=Z+Math.imul(Lt,Ae)|0)+(j>>>13)|0)+(qe>>>26)|0,qe&=67108863,Q=Math.imul(de,se),j=(j=Math.imul(de,Be))+Math.imul(Fe,se)|0,Z=Math.imul(Fe,Be),Q=Q+Math.imul(ie,xe)|0,j=(j=j+Math.imul(ie,Pe)|0)+Math.imul(oe,xe)|0,Z=Z+Math.imul(oe,Pe)|0,Q=Q+Math.imul(Bt,gr)|0,j=(j=j+Math.imul(Bt,ue)|0)+Math.imul(Ot,gr)|0,Z=Z+Math.imul(Ot,ue)|0,Q=Q+Math.imul(Vt,Ye)|0,j=(j=j+Math.imul(Vt,xr)|0)+Math.imul(te,Ye)|0,Z=Z+Math.imul(te,xr)|0,Q=Q+Math.imul(Gt,ce)|0,j=(j=j+Math.imul(Gt,re)|0)+Math.imul(Wt,ce)|0,Z=Z+Math.imul(Wt,re)|0;var or=(ut+(Q=Q+Math.imul(Mt,be)|0)|0)+((8191&(j=(j=j+Math.imul(Mt,Ae)|0)+Math.imul(xt,be)|0))<<13)|0;ut=((Z=Z+Math.imul(xt,Ae)|0)+(j>>>13)|0)+(or>>>26)|0,or&=67108863,Q=Math.imul(de,xe),j=(j=Math.imul(de,Pe))+Math.imul(Fe,xe)|0,Z=Math.imul(Fe,Pe),Q=Q+Math.imul(ie,gr)|0,j=(j=j+Math.imul(ie,ue)|0)+Math.imul(oe,gr)|0,Z=Z+Math.imul(oe,ue)|0,Q=Q+Math.imul(Bt,Ye)|0,j=(j=j+Math.imul(Bt,xr)|0)+Math.imul(Ot,Ye)|0,Z=Z+Math.imul(Ot,xr)|0,Q=Q+Math.imul(Vt,ce)|0,j=(j=j+Math.imul(Vt,re)|0)+Math.imul(te,ce)|0,Z=Z+Math.imul(te,re)|0;var _e=(ut+(Q=Q+Math.imul(Gt,be)|0)|0)+((8191&(j=(j=j+Math.imul(Gt,Ae)|0)+Math.imul(Wt,be)|0))<<13)|0;ut=((Z=Z+Math.imul(Wt,Ae)|0)+(j>>>13)|0)+(_e>>>26)|0,_e&=67108863,Q=Math.imul(de,gr),j=(j=Math.imul(de,ue))+Math.imul(Fe,gr)|0,Z=Math.imul(Fe,ue),Q=Q+Math.imul(ie,Ye)|0,j=(j=j+Math.imul(ie,xr)|0)+Math.imul(oe,Ye)|0,Z=Z+Math.imul(oe,xr)|0,Q=Q+Math.imul(Bt,ce)|0,j=(j=j+Math.imul(Bt,re)|0)+Math.imul(Ot,ce)|0,Z=Z+Math.imul(Ot,re)|0;var De=(ut+(Q=Q+Math.imul(Vt,be)|0)|0)+((8191&(j=(j=j+Math.imul(Vt,Ae)|0)+Math.imul(te,be)|0))<<13)|0;ut=((Z=Z+Math.imul(te,Ae)|0)+(j>>>13)|0)+(De>>>26)|0,De&=67108863,Q=Math.imul(de,Ye),j=(j=Math.imul(de,xr))+Math.imul(Fe,Ye)|0,Z=Math.imul(Fe,xr),Q=Q+Math.imul(ie,ce)|0,j=(j=j+Math.imul(ie,re)|0)+Math.imul(oe,ce)|0,Z=Z+Math.imul(oe,re)|0;var sr=(ut+(Q=Q+Math.imul(Bt,be)|0)|0)+((8191&(j=(j=j+Math.imul(Bt,Ae)|0)+Math.imul(Ot,be)|0))<<13)|0;ut=((Z=Z+Math.imul(Ot,Ae)|0)+(j>>>13)|0)+(sr>>>26)|0,sr&=67108863,Q=Math.imul(de,ce),j=(j=Math.imul(de,re))+Math.imul(Fe,ce)|0,Z=Math.imul(Fe,re);var yr=(ut+(Q=Q+Math.imul(ie,be)|0)|0)+((8191&(j=(j=j+Math.imul(ie,Ae)|0)+Math.imul(oe,be)|0))<<13)|0;ut=((Z=Z+Math.imul(oe,Ae)|0)+(j>>>13)|0)+(yr>>>26)|0,yr&=67108863;var dr=(ut+(Q=Math.imul(de,be))|0)+((8191&(j=(j=Math.imul(de,Ae))+Math.imul(Fe,be)|0))<<13)|0;return ut=((Z=Math.imul(Fe,Ae))+(j>>>13)|0)+(dr>>>26)|0,dr&=67108863,it[0]=Te,it[1]=Re,it[2]=Ie,it[3]=Xe,it[4]=ar,it[5]=nr,it[6]=cr,it[7]=Ut,it[8]=Ht,it[9]=Se,it[10]=Ce,it[11]=We,it[12]=qe,it[13]=or,it[14]=_e,it[15]=De,it[16]=sr,it[17]=yr,it[18]=dr,0!==ut&&(it[19]=ut,H.length++),H};function S(B,z,U){return(new T).mulp(B,z,U)}function T(B,z){this.x=B,this.y=z}Math.imul||(L=b),c.prototype.mulTo=function(z,U){var J=this.length+z.length;return 10===this.length&&10===z.length?L(this,z,U):J<63?b(this,z,U):J<1024?function x(B,z,U){U.negative=z.negative^B.negative,U.length=B.length+z.length;for(var H=0,J=0,nt=0;nt<U.length-1;nt++){var it=J;J=0;for(var ut=67108863&H,Q=Math.min(nt,z.length-1),j=Math.max(0,nt-B.length+1);j<=Q;j++){var at=(0|B.words[nt-j])*(0|z.words[j]),$=67108863&at;ut=67108863&($=$+ut|0),J+=(it=(it=it+(at/67108864|0)|0)+($>>>26)|0)>>>26,it&=67108863}U.words[nt]=ut,H=it,it=J}return 0!==H?U.words[nt]=H:U.length--,U.strip()}(this,z,U):S(this,z,U)},T.prototype.makeRBT=function(z){for(var U=new Array(z),H=c.prototype._countBits(z)-1,J=0;J<z;J++)U[J]=this.revBin(J,H,z);return U},T.prototype.revBin=function(z,U,H){if(0===z||z===H-1)return z;for(var J=0,nt=0;nt<U;nt++)J|=(1&z)<<U-nt-1,z>>=1;return J},T.prototype.permute=function(z,U,H,J,nt,it){for(var ut=0;ut<it;ut++)J[ut]=U[z[ut]],nt[ut]=H[z[ut]]},T.prototype.transform=function(z,U,H,J,nt,it){this.permute(it,z,U,H,J,nt);for(var ut=1;ut<nt;ut<<=1)for(var Q=ut<<1,j=Math.cos(2*Math.PI/Q),Z=Math.sin(2*Math.PI/Q),G=0;G<nt;G+=Q)for(var K=j,at=Z,$=0;$<ut;$++){var X=H[G+$],rt=J[G+$],et=H[G+$+ut],st=J[G+$+ut],dt=K*et-at*st;st=K*st+at*et,H[G+$]=X+(et=dt),J[G+$]=rt+st,H[G+$+ut]=X-et,J[G+$+ut]=rt-st,$!==Q&&(dt=j*K-Z*at,at=j*at+Z*K,K=dt)}},T.prototype.guessLen13b=function(z,U){var H=1|Math.max(U,z),J=1&H,nt=0;for(H=H/2|0;H;H>>>=1)nt++;return 1<<nt+1+J},T.prototype.conjugate=function(z,U,H){if(!(H<=1))for(var J=0;J<H/2;J++){var nt=z[J];z[J]=z[H-J-1],z[H-J-1]=nt,nt=U[J],U[J]=-U[H-J-1],U[H-J-1]=-nt}},T.prototype.normalize13b=function(z,U){for(var H=0,J=0;J<U/2;J++){var nt=8192*Math.round(z[2*J+1]/U)+Math.round(z[2*J]/U)+H;z[J]=67108863&nt,H=nt<67108864?0:nt/67108864|0}return z},T.prototype.convert13b=function(z,U,H,J){for(var nt=0,it=0;it<U;it++)H[2*it]=8191&(nt+=0|z[it]),H[2*it+1]=8191&(nt>>>=13),nt>>>=13;for(it=2*U;it<J;++it)H[it]=0;a(0===nt),a(0==(-8192&nt))},T.prototype.stub=function(z){for(var U=new Array(z),H=0;H<z;H++)U[H]=0;return U},T.prototype.mulp=function(z,U,H){var J=2*this.guessLen13b(z.length,U.length),nt=this.makeRBT(J),it=this.stub(J),ut=new Array(J),Q=new Array(J),j=new Array(J),Z=new Array(J),G=new Array(J),K=new Array(J),at=H.words;at.length=J,this.convert13b(z.words,z.length,ut,J),this.convert13b(U.words,U.length,Z,J),this.transform(ut,it,Q,j,J,nt),this.transform(Z,it,G,K,J,nt);for(var $=0;$<J;$++){var X=Q[$]*G[$]-j[$]*K[$];j[$]=Q[$]*K[$]+j[$]*G[$],Q[$]=X}return this.conjugate(Q,j,J),this.transform(Q,j,at,it,J,nt),this.conjugate(at,it,J),this.normalize13b(at,J),H.negative=z.negative^U.negative,H.length=z.length+U.length,H.strip()},c.prototype.mul=function(z){var U=new c(null);return U.words=new Array(this.length+z.length),this.mulTo(z,U)},c.prototype.mulf=function(z){var U=new c(null);return U.words=new Array(this.length+z.length),S(this,z,U)},c.prototype.imul=function(z){return this.clone().mulTo(z,this)},c.prototype.imuln=function(z){a("number"==typeof z),a(z<67108864);for(var U=0,H=0;H<this.length;H++){var J=(0|this.words[H])*z,nt=(67108863&J)+(67108863&U);U>>=26,U+=J/67108864|0,U+=nt>>>26,this.words[H]=67108863&nt}return 0!==U&&(this.words[H]=U,this.length++),this},c.prototype.muln=function(z){return this.clone().imuln(z)},c.prototype.sqr=function(){return this.mul(this)},c.prototype.isqr=function(){return this.imul(this.clone())},c.prototype.pow=function(z){var U=function M(B){for(var z=new Array(B.bitLength()),U=0;U<z.length;U++){var J=U%26;z[U]=(B.words[U/26|0]&1<<J)>>>J}return z}(z);if(0===U.length)return new c(1);for(var H=this,J=0;J<U.length&&0===U[J];J++,H=H.sqr());if(++J<U.length)for(var nt=H.sqr();J<U.length;J++,nt=nt.sqr())0!==U[J]&&(H=H.mul(nt));return H},c.prototype.iushln=function(z){a("number"==typeof z&&z>=0);var nt,U=z%26,H=(z-U)/26,J=67108863>>>26-U<<26-U;if(0!==U){var it=0;for(nt=0;nt<this.length;nt++){var ut=this.words[nt]&J;this.words[nt]=(0|this.words[nt])-ut<<U|it,it=ut>>>26-U}it&&(this.words[nt]=it,this.length++)}if(0!==H){for(nt=this.length-1;nt>=0;nt--)this.words[nt+H]=this.words[nt];for(nt=0;nt<H;nt++)this.words[nt]=0;this.length+=H}return this.strip()},c.prototype.ishln=function(z){return a(0===this.negative),this.iushln(z)},c.prototype.iushrn=function(z,U,H){var J;a("number"==typeof z&&z>=0),J=U?(U-U%26)/26:0;var nt=z%26,it=Math.min((z-nt)/26,this.length),ut=67108863^67108863>>>nt<<nt,Q=H;if(J-=it,J=Math.max(0,J),Q){for(var j=0;j<it;j++)Q.words[j]=this.words[j];Q.length=it}if(0!==it)if(this.length>it)for(this.length-=it,j=0;j<this.length;j++)this.words[j]=this.words[j+it];else this.words[0]=0,this.length=1;var Z=0;for(j=this.length-1;j>=0&&(0!==Z||j>=J);j--){var G=0|this.words[j];this.words[j]=Z<<26-nt|G>>>nt,Z=G&ut}return Q&&0!==Z&&(Q.words[Q.length++]=Z),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},c.prototype.ishrn=function(z,U,H){return a(0===this.negative),this.iushrn(z,U,H)},c.prototype.shln=function(z){return this.clone().ishln(z)},c.prototype.ushln=function(z){return this.clone().iushln(z)},c.prototype.shrn=function(z){return this.clone().ishrn(z)},c.prototype.ushrn=function(z){return this.clone().iushrn(z)},c.prototype.testn=function(z){a("number"==typeof z&&z>=0);var U=z%26,H=(z-U)/26;return!(this.length<=H||!(this.words[H]&1<<U))},c.prototype.imaskn=function(z){a("number"==typeof z&&z>=0);var U=z%26,H=(z-U)/26;return a(0===this.negative,"imaskn works only with positive numbers"),this.length<=H?this:(0!==U&&H++,this.length=Math.min(H,this.length),0!==U&&(this.words[this.length-1]&=67108863^67108863>>>U<<U),this.strip())},c.prototype.maskn=function(z){return this.clone().imaskn(z)},c.prototype.iaddn=function(z){return a("number"==typeof z),a(z<67108864),z<0?this.isubn(-z):0!==this.negative?1===this.length&&(0|this.words[0])<z?(this.words[0]=z-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(z),this.negative=1,this):this._iaddn(z)},c.prototype._iaddn=function(z){this.words[0]+=z;for(var U=0;U<this.length&&this.words[U]>=67108864;U++)this.words[U]-=67108864,U===this.length-1?this.words[U+1]=1:this.words[U+1]++;return this.length=Math.max(this.length,U+1),this},c.prototype.isubn=function(z){if(a("number"==typeof z),a(z<67108864),z<0)return this.iaddn(-z);if(0!==this.negative)return this.negative=0,this.iaddn(z),this.negative=1,this;if(this.words[0]-=z,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var U=0;U<this.length&&this.words[U]<0;U++)this.words[U]+=67108864,this.words[U+1]-=1;return this.strip()},c.prototype.addn=function(z){return this.clone().iaddn(z)},c.prototype.subn=function(z){return this.clone().isubn(z)},c.prototype.iabs=function(){return this.negative=0,this},c.prototype.abs=function(){return this.clone().iabs()},c.prototype._ishlnsubmul=function(z,U,H){var nt;this._expand(z.length+H);var it,ut=0;for(nt=0;nt<z.length;nt++){it=(0|this.words[nt+H])+ut;var Q=(0|z.words[nt])*U;ut=((it-=67108863&Q)>>26)-(Q/67108864|0),this.words[nt+H]=67108863&it}for(;nt<this.length-H;nt++)ut=(it=(0|this.words[nt+H])+ut)>>26,this.words[nt+H]=67108863&it;if(0===ut)return this.strip();for(a(-1===ut),ut=0,nt=0;nt<this.length;nt++)ut=(it=-(0|this.words[nt])+ut)>>26,this.words[nt]=67108863&it;return this.negative=1,this.strip()},c.prototype._wordDiv=function(z,U){var H,J=this.clone(),nt=z,it=0|nt.words[nt.length-1];0!=(H=26-this._countBits(it))&&(nt=nt.ushln(H),J.iushln(H),it=0|nt.words[nt.length-1]);var j,Q=J.length-nt.length;if("mod"!==U){(j=new c(null)).length=Q+1,j.words=new Array(j.length);for(var Z=0;Z<j.length;Z++)j.words[Z]=0}var G=J.clone()._ishlnsubmul(nt,1,Q);0===G.negative&&(J=G,j&&(j.words[Q]=1));for(var K=Q-1;K>=0;K--){var at=67108864*(0|J.words[nt.length+K])+(0|J.words[nt.length+K-1]);for(at=Math.min(at/it|0,67108863),J._ishlnsubmul(nt,at,K);0!==J.negative;)at--,J.negative=0,J._ishlnsubmul(nt,1,K),J.isZero()||(J.negative^=1);j&&(j.words[K]=at)}return j&&j.strip(),J.strip(),"div"!==U&&0!==H&&J.iushrn(H),{div:j||null,mod:J}},c.prototype.divmod=function(z,U,H){return a(!z.isZero()),this.isZero()?{div:new c(0),mod:new c(0)}:0!==this.negative&&0===z.negative?(it=this.neg().divmod(z,U),"mod"!==U&&(J=it.div.neg()),"div"!==U&&(nt=it.mod.neg(),H&&0!==nt.negative&&nt.iadd(z)),{div:J,mod:nt}):0===this.negative&&0!==z.negative?(it=this.divmod(z.neg(),U),"mod"!==U&&(J=it.div.neg()),{div:J,mod:it.mod}):0!=(this.negative&z.negative)?(it=this.neg().divmod(z.neg(),U),"div"!==U&&(nt=it.mod.neg(),H&&0!==nt.negative&&nt.isub(z)),{div:it.div,mod:nt}):z.length>this.length||this.cmp(z)<0?{div:new c(0),mod:this}:1===z.length?"div"===U?{div:this.divn(z.words[0]),mod:null}:"mod"===U?{div:null,mod:new c(this.modn(z.words[0]))}:{div:this.divn(z.words[0]),mod:new c(this.modn(z.words[0]))}:this._wordDiv(z,U);var J,nt,it},c.prototype.div=function(z){return this.divmod(z,"div",!1).div},c.prototype.mod=function(z){return this.divmod(z,"mod",!1).mod},c.prototype.umod=function(z){return this.divmod(z,"mod",!0).mod},c.prototype.divRound=function(z){var U=this.divmod(z);if(U.mod.isZero())return U.div;var H=0!==U.div.negative?U.mod.isub(z):U.mod,J=z.ushrn(1),nt=z.andln(1),it=H.cmp(J);return it<0||1===nt&&0===it?U.div:0!==U.div.negative?U.div.isubn(1):U.div.iaddn(1)},c.prototype.modn=function(z){a(z<=67108863);for(var U=(1<<26)%z,H=0,J=this.length-1;J>=0;J--)H=(U*H+(0|this.words[J]))%z;return H},c.prototype.idivn=function(z){a(z<=67108863);for(var U=0,H=this.length-1;H>=0;H--){var J=(0|this.words[H])+67108864*U;this.words[H]=J/z|0,U=J%z}return this.strip()},c.prototype.divn=function(z){return this.clone().idivn(z)},c.prototype.egcd=function(z){a(0===z.negative),a(!z.isZero());var U=this,H=z.clone();U=0!==U.negative?U.umod(z):U.clone();for(var J=new c(1),nt=new c(0),it=new c(0),ut=new c(1),Q=0;U.isEven()&&H.isEven();)U.iushrn(1),H.iushrn(1),++Q;for(var j=H.clone(),Z=U.clone();!U.isZero();){for(var G=0,K=1;0==(U.words[0]&K)&&G<26;++G,K<<=1);if(G>0)for(U.iushrn(G);G-- >0;)(J.isOdd()||nt.isOdd())&&(J.iadd(j),nt.isub(Z)),J.iushrn(1),nt.iushrn(1);for(var at=0,$=1;0==(H.words[0]&$)&&at<26;++at,$<<=1);if(at>0)for(H.iushrn(at);at-- >0;)(it.isOdd()||ut.isOdd())&&(it.iadd(j),ut.isub(Z)),it.iushrn(1),ut.iushrn(1);U.cmp(H)>=0?(U.isub(H),J.isub(it),nt.isub(ut)):(H.isub(U),it.isub(J),ut.isub(nt))}return{a:it,b:ut,gcd:H.iushln(Q)}},c.prototype._invmp=function(z){a(0===z.negative),a(!z.isZero());var G,U=this,H=z.clone();U=0!==U.negative?U.umod(z):U.clone();for(var J=new c(1),nt=new c(0),it=H.clone();U.cmpn(1)>0&&H.cmpn(1)>0;){for(var ut=0,Q=1;0==(U.words[0]&Q)&&ut<26;++ut,Q<<=1);if(ut>0)for(U.iushrn(ut);ut-- >0;)J.isOdd()&&J.iadd(it),J.iushrn(1);for(var j=0,Z=1;0==(H.words[0]&Z)&&j<26;++j,Z<<=1);if(j>0)for(H.iushrn(j);j-- >0;)nt.isOdd()&&nt.iadd(it),nt.iushrn(1);U.cmp(H)>=0?(U.isub(H),J.isub(nt)):(H.isub(U),nt.isub(J))}return(G=0===U.cmpn(1)?J:nt).cmpn(0)<0&&G.iadd(z),G},c.prototype.gcd=function(z){if(this.isZero())return z.abs();if(z.isZero())return this.abs();var U=this.clone(),H=z.clone();U.negative=0,H.negative=0;for(var J=0;U.isEven()&&H.isEven();J++)U.iushrn(1),H.iushrn(1);for(;;){for(;U.isEven();)U.iushrn(1);for(;H.isEven();)H.iushrn(1);var nt=U.cmp(H);if(nt<0){var it=U;U=H,H=it}else if(0===nt||0===H.cmpn(1))break;U.isub(H)}return H.iushln(J)},c.prototype.invm=function(z){return this.egcd(z).a.umod(z)},c.prototype.isEven=function(){return 0==(1&this.words[0])},c.prototype.isOdd=function(){return 1==(1&this.words[0])},c.prototype.andln=function(z){return this.words[0]&z},c.prototype.bincn=function(z){a("number"==typeof z);var U=z%26,H=(z-U)/26,J=1<<U;if(this.length<=H)return this._expand(H+1),this.words[H]|=J,this;for(var nt=J,it=H;0!==nt&&it<this.length;it++){var ut=0|this.words[it];nt=(ut+=nt)>>>26,this.words[it]=ut&=67108863}return 0!==nt&&(this.words[it]=nt,this.length++),this},c.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},c.prototype.cmpn=function(z){var H,U=z<0;if(0!==this.negative&&!U)return-1;if(0===this.negative&&U)return 1;if(this.strip(),this.length>1)H=1;else{U&&(z=-z),a(z<=67108863,"Number is too big");var J=0|this.words[0];H=J===z?0:J<z?-1:1}return 0!==this.negative?0|-H:H},c.prototype.cmp=function(z){if(0!==this.negative&&0===z.negative)return-1;if(0===this.negative&&0!==z.negative)return 1;var U=this.ucmp(z);return 0!==this.negative?0|-U:U},c.prototype.ucmp=function(z){if(this.length>z.length)return 1;if(this.length<z.length)return-1;for(var U=0,H=this.length-1;H>=0;H--){var J=0|this.words[H],nt=0|z.words[H];if(J!==nt){J<nt?U=-1:J>nt&&(U=1);break}}return U},c.prototype.gtn=function(z){return 1===this.cmpn(z)},c.prototype.gt=function(z){return 1===this.cmp(z)},c.prototype.gten=function(z){return this.cmpn(z)>=0},c.prototype.gte=function(z){return this.cmp(z)>=0},c.prototype.ltn=function(z){return-1===this.cmpn(z)},c.prototype.lt=function(z){return-1===this.cmp(z)},c.prototype.lten=function(z){return this.cmpn(z)<=0},c.prototype.lte=function(z){return this.cmp(z)<=0},c.prototype.eqn=function(z){return 0===this.cmpn(z)},c.prototype.eq=function(z){return 0===this.cmp(z)},c.red=function(z){return new k(z)},c.prototype.toRed=function(z){return a(!this.red,"Already a number in reduction context"),a(0===this.negative,"red works only with positives"),z.convertTo(this)._forceRed(z)},c.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},c.prototype._forceRed=function(z){return this.red=z,this},c.prototype.forceRed=function(z){return a(!this.red,"Already a number in reduction context"),this._forceRed(z)},c.prototype.redAdd=function(z){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,z)},c.prototype.redIAdd=function(z){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,z)},c.prototype.redSub=function(z){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,z)},c.prototype.redISub=function(z){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,z)},c.prototype.redShl=function(z){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,z)},c.prototype.redMul=function(z){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,z),this.red.mul(this,z)},c.prototype.redIMul=function(z){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,z),this.red.imul(this,z)},c.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},c.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},c.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},c.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},c.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},c.prototype.redPow=function(z){return a(this.red&&!z.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,z)};var n={k256:null,p224:null,p192:null,p25519:null};function E(B,z){this.name=B,this.p=new c(z,16),this.n=this.p.bitLength(),this.k=new c(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function d(){E.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function F(){E.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function D(){E.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function N(){E.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(B){if("string"==typeof B){var z=c._prime(B);this.m=z.p,this.prime=z}else a(B.gtn(1),"modulus must be greater than 1"),this.m=B,this.prime=null}function O(B){k.call(this,B),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new c(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}E.prototype._tmp=function(){var z=new c(null);return z.words=new Array(Math.ceil(this.n/13)),z},E.prototype.ireduce=function(z){var H,U=z;do{this.split(U,this.tmp),H=(U=(U=this.imulK(U)).iadd(this.tmp)).bitLength()}while(H>this.n);var J=H<this.n?-1:U.ucmp(this.p);return 0===J?(U.words[0]=0,U.length=1):J>0?U.isub(this.p):void 0!==U.strip?U.strip():U._strip(),U},E.prototype.split=function(z,U){z.iushrn(this.n,0,U)},E.prototype.imulK=function(z){return z.imul(this.k)},s(d,E),d.prototype.split=function(z,U){for(var H=4194303,J=Math.min(z.length,9),nt=0;nt<J;nt++)U.words[nt]=z.words[nt];if(U.length=J,z.length<=9)return z.words[0]=0,void(z.length=1);var it=z.words[9];for(U.words[U.length++]=it&H,nt=10;nt<z.length;nt++){var ut=0|z.words[nt];z.words[nt-10]=(ut&H)<<4|it>>>22,it=ut}z.words[nt-10]=it>>>=22,z.length-=0===it&&z.length>10?10:9},d.prototype.imulK=function(z){z.words[z.length]=0,z.words[z.length+1]=0,z.length+=2;for(var U=0,H=0;H<z.length;H++){var J=0|z.words[H];z.words[H]=67108863&(U+=977*J),U=64*J+(U/67108864|0)}return 0===z.words[z.length-1]&&(z.length--,0===z.words[z.length-1]&&z.length--),z},s(F,E),s(D,E),s(N,E),N.prototype.imulK=function(z){for(var U=0,H=0;H<z.length;H++){var J=19*(0|z.words[H])+U,nt=67108863&J;J>>>=26,z.words[H]=nt,U=J}return 0!==U&&(z.words[z.length++]=U),z},c._prime=function(z){if(n[z])return n[z];var U;if("k256"===z)U=new d;else if("p224"===z)U=new F;else if("p192"===z)U=new D;else{if("p25519"!==z)throw new Error("Unknown prime "+z);U=new N}return n[z]=U,U},k.prototype._verify1=function(z){a(0===z.negative,"red works only with positives"),a(z.red,"red works only with red numbers")},k.prototype._verify2=function(z,U){a(0==(z.negative|U.negative),"red works only with positives"),a(z.red&&z.red===U.red,"red works only with red numbers")},k.prototype.imod=function(z){return this.prime?this.prime.ireduce(z)._forceRed(this):z.umod(this.m)._forceRed(this)},k.prototype.neg=function(z){return z.isZero()?z.clone():this.m.sub(z)._forceRed(this)},k.prototype.add=function(z,U){this._verify2(z,U);var H=z.add(U);return H.cmp(this.m)>=0&&H.isub(this.m),H._forceRed(this)},k.prototype.iadd=function(z,U){this._verify2(z,U);var H=z.iadd(U);return H.cmp(this.m)>=0&&H.isub(this.m),H},k.prototype.sub=function(z,U){this._verify2(z,U);var H=z.sub(U);return H.cmpn(0)<0&&H.iadd(this.m),H._forceRed(this)},k.prototype.isub=function(z,U){this._verify2(z,U);var H=z.isub(U);return H.cmpn(0)<0&&H.iadd(this.m),H},k.prototype.shl=function(z,U){return this._verify1(z),this.imod(z.ushln(U))},k.prototype.imul=function(z,U){return this._verify2(z,U),this.imod(z.imul(U))},k.prototype.mul=function(z,U){return this._verify2(z,U),this.imod(z.mul(U))},k.prototype.isqr=function(z){return this.imul(z,z.clone())},k.prototype.sqr=function(z){return this.mul(z,z)},k.prototype.sqrt=function(z){if(z.isZero())return z.clone();var U=this.m.andln(3);if(a(U%2==1),3===U){var H=this.m.add(new c(1)).iushrn(2);return this.pow(z,H)}for(var J=this.m.subn(1),nt=0;!J.isZero()&&0===J.andln(1);)nt++,J.iushrn(1);a(!J.isZero());var it=new c(1).toRed(this),ut=it.redNeg(),Q=this.m.subn(1).iushrn(1),j=this.m.bitLength();for(j=new c(2*j*j).toRed(this);0!==this.pow(j,Q).cmp(ut);)j.redIAdd(ut);for(var Z=this.pow(j,J),G=this.pow(z,J.addn(1).iushrn(1)),K=this.pow(z,J),at=nt;0!==K.cmp(it);){for(var $=K,X=0;0!==$.cmp(it);X++)$=$.redSqr();a(X<at);var rt=this.pow(Z,new c(1).iushln(at-X-1));G=G.redMul(rt),Z=rt.redSqr(),K=K.redMul(Z),at=X}return G},k.prototype.invm=function(z){var U=z._invmp(this.m);return 0!==U.negative?(U.negative=0,this.imod(U).redNeg()):this.imod(U)},k.prototype.pow=function(z,U){if(U.isZero())return new c(1).toRed(this);if(0===U.cmpn(1))return z.clone();var J=new Array(16);J[0]=new c(1).toRed(this),J[1]=z;for(var nt=2;nt<J.length;nt++)J[nt]=this.mul(J[nt-1],z);var it=J[0],ut=0,Q=0,j=U.bitLength()%26;for(0===j&&(j=26),nt=U.length-1;nt>=0;nt--){for(var Z=U.words[nt],G=j-1;G>=0;G--){var K=Z>>G&1;it!==J[0]&&(it=this.sqr(it)),0!==K||0!==ut?(ut<<=1,ut|=K,(4==++Q||0===nt&&0===G)&&(it=this.mul(it,J[ut]),Q=0,ut=0)):Q=0}j=26}return it},k.prototype.convertTo=function(z){var U=z.umod(this.m);return U===z?U.clone():U},k.prototype.convertFrom=function(z){var U=z.clone();return U.red=null,U},c.mont=function(z){return new O(z)},s(O,k),O.prototype.convertTo=function(z){return this.imod(z.ushln(this.shift))},O.prototype.convertFrom=function(z){var U=this.imod(z.mul(this.rinv));return U.red=null,U},O.prototype.imul=function(z,U){if(z.isZero()||U.isZero())return z.words[0]=0,z.length=1,z;var H=z.imul(U),J=H.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),nt=H.isub(J).iushrn(this.shift),it=nt;return nt.cmp(this.m)>=0?it=nt.isub(this.m):nt.cmpn(0)<0&&(it=nt.iadd(this.m)),it._forceRed(this)},O.prototype.mul=function(z,U){if(z.isZero()||U.isZero())return new c(0)._forceRed(this);var H=z.mul(U),J=H.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),nt=H.isub(J).iushrn(this.shift),it=nt;return nt.cmp(this.m)>=0?it=nt.isub(this.m):nt.cmpn(0)<0&&(it=nt.iadd(this.m)),it._forceRed(this)},O.prototype.invm=function(z){return this.imod(z._invmp(this.m).mul(this.r2))._forceRed(this)}}(u=e.nmd(u),this)},2692:function(u){"use strict";u.exports=function y(e){var r,l,a,s=e.length,c=0;for(r=0;r<s;++r)c+=e[r].length;var f=new Array(c),m=0;for(r=0;r<s;++r){var h=e[r],w=h.length;for(l=0;l<w;++l){var p=f[m++]=new Array(w-1),o=0;for(a=0;a<w;++a)a!==l&&(p[o++]=h[a]);if(1&l){var v=p[1];p[1]=p[0],p[0]=v}}}return f}},2569:function(u,y,e){"use strict";u.exports=function o(v,M,b){switch(arguments.length){case 1:return w(v);case 2:return"function"==typeof M?f(v,v,M,!0):p(v,M);case 3:return f(v,M,b,!1);default:throw new Error("box-intersect: Invalid arguments")}};var m,r=e(5306),l=e(1390),a=e(2337);function s(v,M){for(var b=0;b<v;++b)if(!(M[b]<=M[b+v]))return!0;return!1}function c(v,M,b,L){for(var x=0,S=0,T=0,n=v.length;T<n;++T){var E=v[T];if(!s(M,E)){for(var d=0;d<2*M;++d)b[x++]=E[d];L[S++]=T}}return S}function f(v,M,b,L){var x=v.length,S=M.length;if(!(x<=0||S<=0)){var T=v[0].length>>>1;if(!(T<=0)){var n,E=r.mallocDouble(2*T*x),d=r.mallocInt32(x);if((x=c(v,T,E,d))>0){if(1===T&&L)l.init(x),n=l.sweepComplete(T,b,0,x,E,d,0,x,E,d);else{var F=r.mallocDouble(2*T*S),D=r.mallocInt32(S);(S=c(M,T,F,D))>0&&(l.init(x+S),n=1===T?l.sweepBipartite(T,b,0,x,E,d,0,S,F,D):a(T,b,L,x,E,d,S,F,D),r.free(F),r.free(D))}r.free(E),r.free(d)}return n}}}function h(v,M){m.push([v,M])}function w(v){return m=[],f(v,v,h,!0),m}function p(v,M){return m=[],f(v,M,h,!1),m}},7333:function(u,y){"use strict";function l(a){return a?function c(f,m,h,w,p,o,v,M,b,L,x){return p-w>b-M?function a(f,m,h,w,p,o,v,M,b,L,x){for(var S=2*f,T=w,n=S*w;T<p;++T,n+=S){var E=o[m+n],d=o[m+n+f],F=v[T];t:for(var D=M,N=S*M;D<b;++D,N+=S){var B=x[D];if(!(L[m+N+f]<E||d<L[m+N])){for(var z=m+1;z<f;++z)if(o[z+f+n]<L[z+N]||L[z+f+N]<o[z+n])continue t;var it=h(F,B);if(void 0!==it)return it}}}}(f,m,h,w,p,o,v,M,b,L,x):function s(f,m,h,w,p,o,v,M,b,L,x){for(var S=2*f,T=M,n=S*M;T<b;++T,n+=S){var E=L[m+n],d=L[m+n+f],F=x[T];t:for(var D=w,N=S*w;D<p;++D,N+=S){var B=v[D];if(!(d<o[m+N]||o[m+N+f]<E)){for(var z=m+1;z<f;++z)if(o[z+f+N]<L[z+n]||L[z+f+n]<o[z+N])continue t;var it=h(B,F);if(void 0!==it)return it}}}}(f,m,h,w,p,o,v,M,b,L,x)}:function m(h,w,p,o,v,M,b,L,x,S,T,n){return M-v>S-x?o?function a(h,w,p,o,v,M,b,L,x,S,T){for(var n=2*h,E=o,d=n*o;E<v;++E,d+=n){var F=M[w+d],D=M[w+d+h],N=b[E];t:for(var k=L,O=n*L;k<x;++k,O+=n){var B=S[w+O],z=T[k];if(!(B<=F||D<B)){for(var U=w+1;U<h;++U)if(M[U+h+d]<S[U+O]||S[U+h+O]<M[U+d])continue t;var ut=p(z,N);if(void 0!==ut)return ut}}}}(h,w,p,v,M,b,L,x,S,T,n):function s(h,w,p,o,v,M,b,L,x,S,T){for(var n=2*h,E=o,d=n*o;E<v;++E,d+=n){var F=M[w+d],D=M[w+d+h],N=b[E];t:for(var k=L,O=n*L;k<x;++k,O+=n){var B=S[w+O],z=T[k];if(!(B<F||D<B)){for(var U=w+1;U<h;++U)if(M[U+h+d]<S[U+O]||S[U+h+O]<M[U+d])continue t;var ut=p(N,z);if(void 0!==ut)return ut}}}}(h,w,p,v,M,b,L,x,S,T,n):o?function c(h,w,p,o,v,M,b,L,x,S,T){for(var n=2*h,E=L,d=n*L;E<x;++E,d+=n){var F=S[w+d],D=T[E];t:for(var N=o,k=n*o;N<v;++N,k+=n){var z=b[N];if(!(F<=M[w+k]||M[w+k+h]<F)){for(var U=w+1;U<h;++U)if(M[U+h+k]<S[U+d]||S[U+h+d]<M[U+k])continue t;var ut=p(D,z);if(void 0!==ut)return ut}}}}(h,w,p,v,M,b,L,x,S,T,n):function f(h,w,p,o,v,M,b,L,x,S,T){for(var n=2*h,E=L,d=n*L;E<x;++E,d+=n){var F=S[w+d],D=T[E];t:for(var N=o,k=n*o;N<v;++N,k+=n){var z=b[N];if(!(F<M[w+k]||M[w+k+h]<F)){for(var U=w+1;U<h;++U)if(M[U+h+k]<S[U+d]||S[U+h+d]<M[U+k])continue t;var ut=p(z,D);if(void 0!==ut)return ut}}}}(h,w,p,v,M,b,L,x,S,T,n)}}y.partial=l(!1),y.full=l(!0)},2337:function(u,y,e){"use strict";u.exports=function B(z,U,H,J,nt,it,ut,Q,j){!function D(z,U){var H=8*l.log2(U+1)*(z+1)|0,J=l.nextPow2(6*H);d.length<J&&(r.free(d),d=r.mallocInt32(J));var nt=l.nextPow2(2*H);F.length<nt&&(r.free(F),F=r.mallocDouble(nt))}(z,J+ut);var K,Z=0,G=2*z;for(N(Z++,0,0,J,0,ut,H?16:0,-1/0,1/0),H||N(Z++,0,0,ut,0,J,1,-1/0,1/0);Z>0;){var at=6*(Z-=1),$=d[at],X=d[at+1],rt=d[at+2],et=d[at+3],st=d[at+4],dt=d[at+5],bt=2*Z,gt=F[bt],Lt=F[bt+1],It=1&dt,Mt=!!(16&dt),xt=nt,At=it,Gt=Q,Wt=j;if(It&&(xt=Q,At=j,Gt=nt,Wt=it),!(2&dt&&(rt=b(z,$,X,rt,xt,At,Lt),X>=rt)||4&dt&&(X=L(z,$,X,rt,xt,At,gt),X>=rt))){var Pt=rt-X,Vt=st-et;if(Mt){if(z*Pt*(Pt+Vt)<4194304){if(void 0!==(K=f.scanComplete(z,$,U,X,rt,xt,At,et,st,Gt,Wt)))return K;continue}}else{if(z*Math.min(Pt,Vt)<128){if(void 0!==(K=s(z,$,U,It,X,rt,xt,At,et,st,Gt,Wt)))return K;continue}if(z*Pt*Vt<4194304){if(void 0!==(K=f.scanBipartite(z,$,U,It,X,rt,xt,At,et,st,Gt,Wt)))return K;continue}}var te=v(z,$,X,rt,xt,At,gt,Lt);if(X<te)if(z*(te-X)<128){if(void 0!==(K=c(z,$+1,U,X,te,xt,At,et,st,Gt,Wt)))return K}else if($===z-2){if(void 0!==(K=It?f.sweepBipartite(z,U,et,st,Gt,Wt,X,te,xt,At):f.sweepBipartite(z,U,X,te,xt,At,et,st,Gt,Wt)))return K}else N(Z++,$+1,X,te,et,st,It,-1/0,1/0),N(Z++,$+1,et,st,X,te,1^It,-1/0,1/0);if(te<rt){var Qt=m(z,$,et,st,Gt,Wt),Bt=Gt[G*Qt+$],Ot=M(z,$,Qt,st,Gt,Wt,Bt);if(Ot<st&&N(Z++,$,te,rt,Ot,st,(4|It)+(Mt?16:0),Bt,Lt),et<Qt&&N(Z++,$,te,rt,et,Qt,(2|It)+(Mt?16:0),gt,Bt),Qt+1===Ot){if(void 0!==(K=Mt?O(z,$,U,te,rt,xt,At,Qt,Gt,Wt[Qt]):k(z,$,U,It,te,rt,xt,At,Qt,Gt,Wt[Qt])))return K}else if(Qt<Ot){var qt;if(Mt){if(te<(qt=x(z,$,te,rt,xt,At,Bt))){var ie=M(z,$,te,qt,xt,At,Bt);if($===z-2){if(te<ie&&void 0!==(K=f.sweepComplete(z,U,te,ie,xt,At,Qt,Ot,Gt,Wt))||ie<qt&&void 0!==(K=f.sweepBipartite(z,U,ie,qt,xt,At,Qt,Ot,Gt,Wt)))return K}else te<ie&&N(Z++,$+1,te,ie,Qt,Ot,16,-1/0,1/0),ie<qt&&(N(Z++,$+1,ie,qt,Qt,Ot,0,-1/0,1/0),N(Z++,$+1,Qt,Ot,ie,qt,1,-1/0,1/0))}}else te<(qt=It?S(z,$,te,rt,xt,At,Bt):x(z,$,te,rt,xt,At,Bt))&&($===z-2?K=It?f.sweepBipartite(z,U,Qt,Ot,Gt,Wt,te,qt,xt,At):f.sweepBipartite(z,U,te,qt,xt,At,Qt,Ot,Gt,Wt):(N(Z++,$+1,te,qt,Qt,Ot,It,-1/0,1/0),N(Z++,$+1,Qt,Ot,te,qt,1^It,-1/0,1/0)))}}}}};var r=e(5306),l=e(2288),a=e(7333),s=a.partial,c=a.full,f=e(1390),m=e(2464),h=e(122),v=h("!(lo>=p0)&&!(p1>=hi)"),M=h("lo===p0"),b=h("lo<p0"),L=h("hi<=p0"),x=h("lo<=p0&&p0<=hi"),S=h("lo<p0&&p0<=hi"),d=r.mallocInt32(1024),F=r.mallocDouble(1024);function N(z,U,H,J,nt,it,ut,Q,j){var Z=6*z;d[Z]=U,d[Z+1]=H,d[Z+2]=J,d[Z+3]=nt,d[Z+4]=it,d[Z+5]=ut;var G=2*z;F[G]=Q,F[G+1]=j}function k(z,U,H,J,nt,it,ut,Q,j,Z,G){var K=2*z,at=j*K,$=Z[at+U];t:for(var X=nt,rt=nt*K;X<it;++X,rt+=K){var st=ut[rt+U+z];if(!($<(et=ut[rt+U])||st<$||J&&$===et)){for(var dt=Q[X],bt=U+1;bt<z;++bt){var et=ut[rt+bt];if((st=ut[rt+bt+z])<Z[at+bt]||Z[at+bt+z]<et)continue t}var It;if(void 0!==(It=J?H(G,dt):H(dt,G)))return It}}}function O(z,U,H,J,nt,it,ut,Q,j,Z){var G=2*z,K=Q*G,at=j[K+U];t:for(var $=J,X=J*G;$<nt;++$,X+=G){var rt=ut[$];if(rt!==Z){var st=it[X+U+z];if(!(at<(et=it[X+U])||st<at)){for(var dt=U+1;dt<z;++dt){var et=it[X+dt];if((st=it[X+dt+z])<j[K+dt]||j[K+dt+z]<et)continue t}var Lt=H(rt,Z);if(void 0!==Lt)return Lt}}}}},2464:function(u,y,e){"use strict";u.exports=function c(f,m,h,w,p,o){if(w<=h+1)return h;for(var v=h,M=w,b=w+h>>>1,L=2*f,x=b,S=p[L*b+m];v<M;){if(M-v<8){s(f,m,v,M,p,o),S=p[L*b+m];break}var T=M-v,n=Math.random()*T+v|0,E=p[L*n+m],d=Math.random()*T+v|0,F=p[L*d+m],D=Math.random()*T+v|0,N=p[L*D+m];E<=F?N>=F?(x=d,S=F):E>=N?(x=n,S=E):(x=D,S=N):F>=N?(x=d,S=F):N>=E?(x=n,S=E):(x=D,S=N);for(var B=L*(M-1),z=L*x,k=0;k<L;++k,++B,++z){var O=p[B];p[B]=p[z],p[z]=O}var U=o[M-1];for(o[M-1]=o[x],o[x]=U,B=L*(M-1),z=L*(x=l(f,m,v,M-1,p,o,S)),k=0;k<L;++k,++B,++z)O=p[B],p[B]=p[z],p[z]=O;if(U=o[M-1],o[M-1]=o[x],o[x]=U,b<x){for(M=x-1;v<M&&p[L*(M-1)+m]===S;)M-=1;M+=1}else{if(!(x<b))break;for(v=x+1;v<M&&p[L*v+m]===S;)v+=1}}return l(f,m,h,b,p,o,p[L*b+m])};var l=e(122)("lo<p0");function s(f,m,h,w,p,o){for(var v=2*f,M=v*(h+1)+m,b=h+1;b<w;++b,M+=v)for(var L=p[M],x=b,S=v*(b-1);x>h&&p[S+m]>L;--x,S-=v){for(var T=S,n=S+v,E=0;E<v;++E,++T,++n){var d=p[T];p[T]=p[n],p[n]=d}var F=o[x];o[x]=o[x-1],o[x-1]=F}}},122:function(u){"use strict";u.exports=function e(h){return y[h]};var y={"lo===p0":function r(h,w,p,o,v,M,b){for(var L=2*h,x=L*p,S=x,T=p,n=w,d=p;o>d;++d,x+=L)if(v[x+n]===b)if(T===d)T+=1,S+=L;else{for(var D=0;L>D;++D){var N=v[x+D];v[x+D]=v[S],v[S++]=N}var k=M[d];M[d]=M[T],M[T++]=k}return T},"lo<p0":function l(h,w,p,o,v,M,b){for(var L=2*h,x=L*p,S=x,T=p,n=w,d=p;o>d;++d,x+=L)if(v[x+n]<b)if(T===d)T+=1,S+=L;else{for(var D=0;L>D;++D){var N=v[x+D];v[x+D]=v[S],v[S++]=N}var k=M[d];M[d]=M[T],M[T++]=k}return T},"lo<=p0":function a(h,w,p,o,v,M,b){for(var L=2*h,x=L*p,S=x,T=p,E=h+w,d=p;o>d;++d,x+=L)if(v[x+E]<=b)if(T===d)T+=1,S+=L;else{for(var D=0;L>D;++D){var N=v[x+D];v[x+D]=v[S],v[S++]=N}var k=M[d];M[d]=M[T],M[T++]=k}return T},"hi<=p0":function s(h,w,p,o,v,M,b){for(var L=2*h,x=L*p,S=x,T=p,E=h+w,d=p;o>d;++d,x+=L)if(v[x+E]<=b)if(T===d)T+=1,S+=L;else{for(var D=0;L>D;++D){var N=v[x+D];v[x+D]=v[S],v[S++]=N}var k=M[d];M[d]=M[T],M[T++]=k}return T},"lo<p0&&p0<=hi":function f(h,w,p,o,v,M,b){for(var L=2*h,x=L*p,S=x,T=p,n=w,E=h+w,d=p;o>d;++d,x+=L)if(v[x+n]<b&&b<=v[x+E])if(T===d)T+=1,S+=L;else{for(var N=0;L>N;++N){var k=v[x+N];v[x+N]=v[S],v[S++]=k}var O=M[d];M[d]=M[T],M[T++]=O}return T},"lo<=p0&&p0<=hi":function c(h,w,p,o,v,M,b){for(var L=2*h,x=L*p,S=x,T=p,n=w,E=h+w,d=p;o>d;++d,x+=L)if(v[x+n]<=b&&b<=v[x+E])if(T===d)T+=1,S+=L;else{for(var N=0;L>N;++N){var k=v[x+N];v[x+N]=v[S],v[S++]=k}var O=M[d];M[d]=M[T],M[T++]=O}return T},"!(lo>=p0)&&!(p1>=hi)":function m(h,w,p,o,v,M,b,L){for(var x=2*h,S=x*p,T=S,n=p,E=w,d=h+w,F=p;o>F;++F,S+=x)if(!(v[S+E]>=b||L>=v[S+d]))if(n===F)n+=1,T+=x;else{for(var k=0;x>k;++k){var O=v[S+k];v[S+k]=v[T],v[T++]=O}var B=M[F];M[F]=M[n],M[n++]=B}return n}}},309:function(u){"use strict";u.exports=function e(w,p){p<=128?r(0,p-1,w):h(0,p-1,w)};function r(w,p,o){for(var v=2*(w+1),M=w+1;M<=p;++M){for(var b=o[v++],L=o[v++],x=M,S=v-2;x-- >w;){var T=o[S-2],n=o[S-1];if(T<b)break;if(T===b&&n<L)break;o[S]=T,o[S+1]=n,S-=2}o[S]=b,o[S+1]=L}}function l(w,p,o){var v=o[w*=2],M=o[w+1];o[w]=o[p*=2],o[w+1]=o[p+1],o[p]=v,o[p+1]=M}function a(w,p,o){o[w*=2]=o[p*=2],o[w+1]=o[p+1]}function s(w,p,o,v){o*=2;var M=v[w*=2],b=v[w+1];v[w]=v[p*=2],v[w+1]=v[p+1],v[p]=v[o],v[p+1]=v[o+1],v[o]=M,v[o+1]=b}function c(w,p,o,v,M){M[w*=2]=M[p*=2],M[p]=o,M[w+1]=M[p+1],M[p+1]=v}function f(w,p,o){var v=o[w*=2],M=o[p*=2];return!(v<M)&&(v!==M||o[w+1]>o[p+1])}function m(w,p,o,v){var M=v[w*=2];return M<p||M===p&&v[w+1]<o}function h(w,p,o){var v=(p-w+1)/6|0,M=w+v,b=p-v,L=w+p>>1,x=L-v,S=L+v,T=M,n=x,E=L,d=S,F=b,D=w+1,N=p-1,k=0;f(T,n,o)&&(k=T,T=n,n=k),f(d,F,o)&&(k=d,d=F,F=k),f(T,E,o)&&(k=T,T=E,E=k),f(n,E,o)&&(k=n,n=E,E=k),f(T,d,o)&&(k=T,T=d,d=k),f(E,d,o)&&(k=E,E=d,d=k),f(n,F,o)&&(k=n,n=F,F=k),f(n,E,o)&&(k=n,n=E,E=k),f(d,F,o)&&(k=d,d=F,F=k);for(var O=o[2*n],B=o[2*n+1],z=o[2*d],U=o[2*d+1],H=2*T,J=2*E,nt=2*F,it=2*M,ut=2*L,Q=2*b,j=0;j<2;++j){var G=o[J+j],K=o[nt+j];o[it+j]=o[H+j],o[ut+j]=G,o[Q+j]=K}a(x,w,o),a(S,p,o);for(var at=D;at<=N;++at)if(m(at,O,B,o))at!==D&&l(at,D,o),++D;else if(!m(at,z,U,o))for(;;){if(m(N,z,U,o)){m(N,O,B,o)?(s(at,D,N,o),++D,--N):(l(at,N,o),--N);break}if(--N<at)break}c(w,D-1,O,B,o),c(p,N+1,z,U,o),D-2-w<=32?r(w,D-2,o):h(w,D-2,o),p-(N+2)<=32?r(N+2,p,o):h(N+2,p,o),N-D<=32?r(D,N,o):h(D,N,o)}},1390:function(u,y,e){"use strict";u.exports={init:function M(E){var d=l.nextPow2(E);f.length<d&&(r.free(f),f=r.mallocInt32(d)),m.length<d&&(r.free(m),m=r.mallocInt32(d)),h.length<d&&(r.free(h),h=r.mallocInt32(d)),w.length<d&&(r.free(w),w=r.mallocInt32(d)),p.length<d&&(r.free(p),p=r.mallocInt32(d)),o.length<d&&(r.free(o),o=r.mallocInt32(d));var F=8*d;v.length<F&&(r.free(v),v=r.mallocDouble(F))},sweepBipartite:function x(E,d,F,D,N,k,O,B,z,U){for(var H=0,J=2*E,nt=E-1,it=J-1,ut=F;ut<D;++ut){var Q=k[ut],j=J*ut;v[H++]=N[j+nt],v[H++]=-(Q+1),v[H++]=N[j+it],v[H++]=Q}for(ut=O;ut<B;++ut){Q=U[ut]+s;var Z=J*ut;v[H++]=z[Z+nt],v[H++]=-Q,v[H++]=z[Z+it],v[H++]=Q}var G=H>>>1;a(v,G);var K=0,at=0;for(ut=0;ut<G;++ut){var $=0|v[2*ut+1];if($>=s)b(h,w,at--,$=$-s|0);else if($>=0)b(f,m,K--,$);else if($<=-s){$=-$-s|0;for(var X=0;X<K;++X)if(void 0!==(rt=d(f[X],$)))return rt;L(h,w,at++,$)}else{for($=-$-1|0,X=0;X<at;++X){var rt;if(void 0!==(rt=d($,h[X])))return rt}L(f,m,K++,$)}}},sweepComplete:function S(E,d,F,D,N,k,O,B,z,U){for(var H=0,J=2*E,nt=E-1,it=J-1,ut=F;ut<D;++ut){var Q=k[ut]+1<<1,j=J*ut;v[H++]=N[j+nt],v[H++]=-Q,v[H++]=N[j+it],v[H++]=Q}for(ut=O;ut<B;++ut){Q=U[ut]+1<<1;var Z=J*ut;v[H++]=z[Z+nt],v[H++]=1|-Q,v[H++]=z[Z+it],v[H++]=1|Q}var G=H>>>1;a(v,G);var K=0,at=0,$=0;for(ut=0;ut<G;++ut){var X=0|v[2*ut+1],rt=1&X;if(ut<G-1&&X>>1==v[2*ut+3]>>1&&(rt=2,ut+=1),X<0){for(var et=-(X>>1)-1,st=0;st<$;++st)if(void 0!==(dt=d(p[st],et)))return dt;if(0!==rt)for(st=0;st<K;++st)if(void 0!==(dt=d(f[st],et)))return dt;if(1!==rt)for(st=0;st<at;++st){var dt;if(void 0!==(dt=d(h[st],et)))return dt}0===rt?L(f,m,K++,et):1===rt?L(h,w,at++,et):2===rt&&L(p,o,$++,et)}else et=(X>>1)-1,0===rt?b(f,m,K--,et):1===rt?b(h,w,at--,et):2===rt&&b(p,o,$--,et)}},scanBipartite:function T(E,d,F,D,N,k,O,B,z,U,H,J){var nt=0,it=2*E,ut=d,Q=d+E,j=1,Z=1;D?Z=s:j=s;for(var G=N;G<k;++G){var K=G+j,at=it*G;v[nt++]=O[at+ut],v[nt++]=-K,v[nt++]=O[at+Q],v[nt++]=K}for(G=z;G<U;++G)K=G+Z,v[nt++]=H[it*G+ut],v[nt++]=-K;var X=nt>>>1;a(v,X);var rt=0;for(G=0;G<X;++G){var et=0|v[2*G+1];if(et<0){var st=!1;if((K=-et)>=s?(st=!D,K-=s):(st=!!D,K-=1),st)L(f,m,rt++,K);else{var dt=J[K],bt=it*K,gt=H[bt+d+1],Lt=H[bt+d+1+E];t:for(var It=0;It<rt;++It){var Mt=f[It],xt=it*Mt;if(!(Lt<O[xt+d+1]||O[xt+d+1+E]<gt)){for(var At=d+2;At<E;++At)if(H[bt+At+E]<O[xt+At]||O[xt+At+E]<H[bt+At])continue t;var Wt,Gt=B[Mt];if(void 0!==(Wt=D?F(dt,Gt):F(Gt,dt)))return Wt}}}}else b(f,m,rt--,et-j)}},scanComplete:function n(E,d,F,D,N,k,O,B,z,U,H){for(var J=0,nt=2*E,it=d,ut=d+E,Q=D;Q<N;++Q){var j=Q+s,Z=nt*Q;v[J++]=k[Z+it],v[J++]=-j,v[J++]=k[Z+ut],v[J++]=j}for(Q=B;Q<z;++Q)j=Q+1,v[J++]=U[nt*Q+it],v[J++]=-j;var K=J>>>1;a(v,K);var at=0;for(Q=0;Q<K;++Q){var $=0|v[2*Q+1];if($<0)if((j=-$)>=s)f[at++]=j-s;else{var X=H[j-=1],rt=nt*j,et=U[rt+d+1],st=U[rt+d+1+E];t:for(var dt=0;dt<at;++dt){var bt=f[dt],gt=O[bt];if(gt===X)break;var Lt=nt*bt;if(!(st<k[Lt+d+1]||k[Lt+d+1+E]<et)){for(var It=d+2;It<E;++It)if(U[rt+It+E]<k[Lt+It]||k[Lt+It+E]<U[rt+It])continue t;var Mt=F(gt,X);if(void 0!==Mt)return Mt}}}else{for(j=$-s,dt=at-1;dt>=0;--dt)if(f[dt]===j){for(It=dt+1;It<at;++It)f[It-1]=f[It];break}--at}}}};var r=e(5306),l=e(2288),a=e(309),s=1<<28,c=1024,f=r.mallocInt32(c),m=r.mallocInt32(c),h=r.mallocInt32(c),w=r.mallocInt32(c),p=r.mallocInt32(c),o=r.mallocInt32(c),v=r.mallocDouble(8*c);function b(E,d,F,D){var N=d[D],k=E[F-1];E[N]=k,d[k]=N}function L(E,d,F,D){E[F]=D,d[D]=F}},7761:function(u,y,e){"use strict";var r=e(9971),l=e(743),a=e(2161),s=e(7098);function c(p){return[Math.min(p[0],p[1]),Math.max(p[0],p[1])]}function f(p,o){return p[0]-o[0]||p[1]-o[1]}function h(p,o,v){return o in p?p[o]:v}u.exports=function w(p,o,v){Array.isArray(o)?(v=v||{},o=o||[]):(v=o||{},o=[]);var M=!!h(v,"delaunay",!0),b=!!h(v,"interior",!0),L=!!h(v,"exterior",!0),x=!!h(v,"infinity",!1);if(!b&&!L||0===p.length)return[];var S=r(p,o);if(M||b!==L||x){for(var T=l(p.length,function m(p){return p.map(c).sort(f)}(o)),n=0;n<S.length;++n){var E=S[n];T.addTriangle(E[0],E[1],E[2])}return M&&a(p,T),L?b?x?s(T,0,x):T.cells():s(T,1,x):s(T,-1)}return S}},2161:function(u,y,e){"use strict";var r=e(2227)[4];function a(c,f,m,h,w,p){var o=f.opposite(h,w);if(!(o<0)){if(w<h){var v=h;h=w,w=v,v=p,p=o,o=v}f.isConstraint(h,w)||r(c[h],c[w],c[p],c[o])<0&&m.push(h,w)}}e(5070),u.exports=function s(c,f){for(var m=[],h=c.length,w=f.stars,p=0;p<h;++p)for(var o=w[p],v=1;v<o.length;v+=2)if(!((M=o[v])<p||f.isConstraint(p,M))){for(var b=o[v-1],L=-1,x=1;x<o.length;x+=2)if(o[x-1]===M){L=o[x];break}L<0||r(c[p],c[M],c[b],c[L])<0&&m.push(p,M)}for(;m.length>0;){for(var M=m.pop(),S=(b=-1,L=-1,o=w[p=m.pop()],1);S<o.length;S+=2){var T=o[S-1],n=o[S];T===M?L=n:n===M&&(b=T)}b<0||L<0||r(c[p],c[M],c[b],c[L])>=0||(f.flip(p,M),a(c,f,m,b,p,L),a(c,f,m,p,L,b),a(c,f,m,L,M,b),a(c,f,m,M,b,L))}}},7098:function(u,y,e){"use strict";var h,r=e(5070);function l(h,w,p,o,v,M,b){this.cells=h,this.neighbor=w,this.flags=o,this.constraint=p,this.active=v,this.next=M,this.boundary=b}function s(h,w){return h[0]-w[0]||h[1]-w[1]||h[2]-w[2]}u.exports=function m(h,w,p){var o=function c(h,w){for(var p=h.cells(),o=p.length,v=0;v<o;++v){var b=(M=p[v])[0],x=M[2];(L=M[1])<x?L<b&&(M[0]=L,M[1]=x,M[2]=b):x<b&&(M[0]=x,M[1]=b,M[2]=L)}p.sort(s);var S=new Array(o);for(v=0;v<S.length;++v)S[v]=0;var T=[],n=[],E=new Array(3*o),d=new Array(3*o),F=null;w&&(F=[]);var D=new l(p,E,d,S,T,n,F);for(v=0;v<o;++v)for(var M=p[v],N=0;N<3;++N){var L,k=E[3*v+N]=D.locate(L=M[(N+1)%3],b=M[N],h.opposite(L,b)),O=d[3*v+N]=h.isConstraint(b,L);k<0&&(O?n.push(v):(T.push(v),S[v]=1),w&&F.push([L,b,-1]))}return D}(h,p);if(0===w)return p?o.cells.concat(o.boundary):o.cells;for(var v=1,M=o.active,b=o.next,L=o.flags,x=o.cells,S=o.constraint,T=o.neighbor;M.length>0||b.length>0;){for(;M.length>0;){var n=M.pop();if(L[n]!==-v){L[n]=v;for(var d=0;d<3;++d){var F=T[3*n+d];F>=0&&0===L[F]&&(S[3*n+d]?b.push(F):(M.push(F),L[F]=v))}}}var D=b;b=M,M=D,b.length=0,v=-v}var N=function f(h,w,p){for(var o=0,v=0;v<h.length;++v)w[v]===p&&(h[o++]=h[v]);return h.length=o,h}(x,L,w);return p?N.concat(o.boundary):N},l.prototype.locate=(h=[0,0,0],function(w,p,o){var v=w,M=p,b=o;return p<o?p<w&&(v=p,M=o,b=w):o<w&&(v=o,M=w,b=p),v<0?-1:(h[0]=v,h[1]=M,h[2]=b,r.eq(this.cells,h,s))})},9971:function(u,y,e){"use strict";var r=e(5070),l=e(417)[3];function f(L,x,S,T,n){this.a=L,this.b=x,this.idx=S,this.lowerIds=T,this.upperIds=n}function m(L,x,S,T){this.a=L,this.b=x,this.type=S,this.idx=T}function h(L,x){var S=L.a[0]-x.a[0]||L.a[1]-x.a[1]||L.type-x.type;return S||0!==L.type&&(S=l(L.a,L.b,x.b))?S:L.idx-x.idx}function w(L,x){return l(L.a,L.b,x)}function p(L,x,S,T,n){for(var E=r.lt(x,T,w),d=r.gt(x,T,w),F=E;F<d;++F){for(var D=x[F],N=D.lowerIds,O=N.length;O>1&&l(S[N[O-2]],S[N[O-1]],T)>0;)L.push([N[O-1],N[O-2],n]),O-=1;N.length=O,N.push(n);var k=D.upperIds;for(O=k.length;O>1&&l(S[k[O-2]],S[k[O-1]],T)<0;)L.push([k[O-2],k[O-1],n]),O-=1;k.length=O,k.push(n)}}function o(L,x){return(L.a[0]<x.a[0]?l(L.a,L.b,x.a):l(x.b,x.a,L.a))||(x.b[0]<L.b[0]?l(L.a,L.b,x.b):l(x.b,x.a,L.b))||L.idx-x.idx}function v(L,x,S){var T=r.le(L,S,o),n=L[T],E=n.upperIds,d=E[E.length-1];n.upperIds=[d],L.splice(T+1,0,new f(S.a,S.b,S.idx,[d],E))}function M(L,x,S){var T=S.a;S.a=S.b,S.b=T;var n=r.eq(L,S,o);L[n-1].upperIds=L[n].upperIds,L.splice(n,1)}u.exports=function b(L,x){for(var S=L.length,T=x.length,n=[],E=0;E<S;++E)n.push(new m(L[E],null,0,E));for(E=0;E<T;++E){var d=x[E],F=L[d[0]],D=L[d[1]];F[0]<D[0]?n.push(new m(F,D,2,E),new m(D,F,1,E)):F[0]>D[0]&&n.push(new m(D,F,2,E),new m(F,D,1,E))}n.sort(h);for(var N=n[0].a[0]-(1+Math.abs(n[0].a[0]))*Math.pow(2,-52),k=[new f([N,1],[N,0],-1,[],[],[],[])],O=[],B=(E=0,n.length);E<B;++E){var z=n[E],U=z.type;0===U?p(O,k,L,z.a,z.idx):2===U?v(k,0,z):M(k,0,z)}return O}},743:function(u,y,e){"use strict";var r=e(5070);function l(f,m){this.stars=f,this.edges=m}u.exports=function c(f,m){for(var h=new Array(f),w=0;w<f;++w)h[w]=[];return new l(h,m)};var a=l.prototype;function s(f,m,h){for(var w=1,p=f.length;w<p;w+=2)if(f[w-1]===m&&f[w]===h)return f[w-1]=f[p-2],f[w]=f[p-1],void(f.length=p-2)}a.isConstraint=function(){var f=[0,0];function m(h,w){return h[0]-w[0]||h[1]-w[1]}return function(h,w){return f[0]=Math.min(h,w),f[1]=Math.max(h,w),r.eq(this.edges,f,m)>=0}}(),a.removeTriangle=function(f,m,h){var w=this.stars;s(w[f],m,h),s(w[m],h,f),s(w[h],f,m)},a.addTriangle=function(f,m,h){var w=this.stars;w[f].push(m,h),w[m].push(h,f),w[h].push(f,m)},a.opposite=function(f,m){for(var h=this.stars[m],w=1,p=h.length;w<p;w+=2)if(h[w]===f)return h[w-1];return-1},a.flip=function(f,m){var h=this.opposite(f,m),w=this.opposite(m,f);this.removeTriangle(f,m,h),this.removeTriangle(m,f,w),this.addTriangle(f,w,h),this.addTriangle(m,h,w)},a.edges=function(){for(var f=this.stars,m=[],h=0,w=f.length;h<w;++h)for(var p=f[h],o=0,v=p.length;o<v;o+=2)m.push([p[o],p[o+1]]);return m},a.cells=function(){for(var f=this.stars,m=[],h=0,w=f.length;h<w;++h)for(var p=f[h],o=0,v=p.length;o<v;o+=2){var M=p[o],b=p[o+1];h<Math.min(M,b)&&m.push([h,M,b])}return m}},9887:function(u){"use strict";u.exports=function y(e){for(var r=1,l=1;l<e.length;++l)for(var a=0;a<l;++a)if(e[l]<e[a])r=-r;else if(e[a]===e[l])return 0;return r}},9243:function(u,y,e){"use strict";var r=e(3094),l=e(6606);function a(f,m){for(var h=0,w=f.length,p=0;p<w;++p)h+=f[p]*m[p];return h}function s(f){var m=f.length;if(0===m)return[];var w=r([f.length+1,f.length+1],1),p=r([f.length+1],1);w[m][m]=0;for(var o=0;o<m;++o){for(var v=0;v<=o;++v)w[v][o]=w[o][v]=2*a(f[o],f[v]);p[o]=a(f[o],f[o])}var M=l(w,p),b=0,L=M[m+1];for(o=0;o<L.length;++o)b+=L[o];var x=new Array(m);for(o=0;o<m;++o){L=M[o];var S=0;for(v=0;v<L.length;++v)S+=L[v];x[o]=S/b}return x}function c(f){if(0===f.length)return[];for(var m=f[0].length,h=r([m]),w=s(f),p=0;p<f.length;++p)for(var o=0;o<m;++o)h[o]+=f[p][o]*w[p];return h}c.barycenetric=s,u.exports=c},1778:function(u,y,e){u.exports=function l(a){for(var s=r(a),c=0,f=0;f<a.length;++f)for(var m=a[f],h=0;h<s.length;++h)c+=Math.pow(m[h]-s[h],2);return Math.sqrt(c/a.length)};var r=e(9243)},197:function(u,y,e){"use strict";u.exports=function F(D,N,k){var O;if(k){O=N;for(var B=new Array(N.length),z=0;z<N.length;++z)B[z]=[(U=N[z])[0],U[1],k[z]];N=B}for(var H=function E(D,N,k){var O=x(D,[],v(D));return n(N,O,k),!!O}(D,N,!!k);d(D,N,!!k);)H=!0;if(k&&H)for(O.length=0,k.length=0,z=0;z<N.length;++z){var U;O.push([(U=N[z])[0],U[1]]),k.push(U[2])}return H};var r=e(1731),l=e(2569),a=e(4434),s=e(5125),c=e(8846),f=e(7999),m=e(2826),h=e(8551),w=e(5528);function p(D){var N=f(D);return[h(N,-1/0),h(N,1/0)]}function v(D){for(var N=new Array(D.length),k=0;k<D.length;++k){var O=D[k];N[k]=[h(O[0],-1/0),h(O[1],-1/0),h(O[0],1/0),h(O[1],1/0)]}return N}function x(D,N,k){for(var O=N.length,B=new r(O),z=[],U=0;U<N.length;++U){var H=N[U],J=p(H[0]),nt=p(H[1]);z.push([h(J[0],-1/0),h(nt[0],-1/0),h(J[1],1/0),h(nt[1],1/0)])}l(z,function(Z,G){B.link(Z,G)});var it=!0,ut=new Array(O);for(U=0;U<O;++U)(Q=B.find(U))!==U&&(it=!1,D[Q]=[Math.min(D[U][0],D[Q][0]),Math.min(D[U][1],D[Q][1])]);if(it)return null;var j=0;for(U=0;U<O;++U){var Q;(Q=B.find(U))===U?(ut[U]=j,D[j++]=D[U]):ut[U]=-1}for(D.length=j,U=0;U<O;++U)ut[U]<0&&(ut[U]=ut[B.find(U)]);return ut}function S(D,N){return D[0]-N[0]||D[1]-N[1]}function T(D,N){return D[0]-N[0]||D[1]-N[1]||(D[2]<N[2]?-1:D[2]>N[2]?1:0)}function n(D,N,k){if(0!==D.length){if(N)for(var O=0;O<D.length;++O){var z=N[(B=D[O])[0]],U=N[B[1]];B[0]=Math.min(z,U),B[1]=Math.max(z,U)}else for(O=0;O<D.length;++O){var B;z=(B=D[O])[0],U=B[1],B[0]=Math.min(z,U),B[1]=Math.max(z,U)}D.sort(k?T:S);var H=1;for(O=1;O<D.length;++O){var J=D[O-1],nt=D[O];nt[0]===J[0]&&nt[1]===J[1]&&(!k||nt[2]===J[2])||(D[H++]=nt)}D.length=H}}function d(D,N,k){var O=function o(D,N){for(var k=new Array(N.length),O=0;O<N.length;++O){var B=N[O],z=D[B[0]],U=D[B[1]];k[O]=[h(Math.min(z[0],U[0]),-1/0),h(Math.min(z[1],U[1]),-1/0),h(Math.max(z[0],U[0]),1/0),h(Math.max(z[1],U[1]),1/0)]}return k}(D,N),B=function M(D,N,k){var O=[];return l(k,function(B,z){var U=N[B],H=N[z];U[0]!==H[0]&&U[0]!==H[1]&&U[1]!==H[0]&&U[1]!==H[1]&&a(D[U[0]],D[U[1]],D[H[0]],D[H[1]])&&O.push([B,z])}),O}(D,N,O),z=v(D),U=function b(D,N,k,O){var B=[];return l(k,O,function(z,U){var H=N[z];if(H[0]!==U&&H[1]!==U){var J=D[U];a(D[H[0]],D[H[1]],J,J)&&B.push([z,U])}}),B}(D,N,O,z),J=x(D,function L(D,N,k,O,B){var z,U,H=D.map(function(bt){return[s(bt[0]),s(bt[1])]});for(z=0;z<k.length;++z){var J=k[z],nt=J[1],it=N[U=J[0]],ut=N[nt],Q=w(m(D[it[0]]),m(D[it[1]]),m(D[ut[0]]),m(D[ut[1]]));if(Q){var j=D.length;D.push([f(Q[0]),f(Q[1])]),H.push(Q),O.push([U,j],[nt,j])}}for(O.sort(function(bt,gt){if(bt[0]!==gt[0])return bt[0]-gt[0];var Lt=H[bt[1]],It=H[gt[1]];return c(Lt[0],It[0])||c(Lt[1],It[1])}),z=O.length-1;z>=0;--z){var G=N[U=(Z=O[z])[0]],K=G[0],at=G[1],$=D[K],X=D[at];if(($[0]-X[0]||$[1]-X[1])<0){var rt=K;K=at,at=rt}G[0]=K;var st,et=G[1]=Z[1];for(B&&(st=G[2]);z>0&&O[z-1][0]===U;){var Z,dt=(Z=O[--z])[1];N.push(B?[et,dt,st]:[et,dt]),et=dt}N.push(B?[et,at,st]:[et,at])}return H}(D,N,B,U,k));return n(N,J,k),!!J||B.length>0||U.length>0}},5528:function(u,y,e){"use strict";u.exports=function w(p,o,v,M){var b=c(o,p),L=c(M,v),x=h(b,L);if(0===s(x))return null;var T=h(L,c(p,v)),n=l(T,x),E=m(b,n);return f(p,E)};var r=e(3962),l=e(9189),a=e(4354),s=e(4951),c=e(6695),f=e(7584),m=e(4469);function h(p,o){return a(r(p[0],o[1]),r(p[1],o[0]))}},5692:function(u){u.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(u,y,e){"use strict";var r=e(5692),l=e(3578);function s(m){return[m[0]/255,m[1]/255,m[2]/255,m[3]]}function c(m){for(var h,w="#",p=0;p<3;++p)w+=("00"+(h=(h=m[p]).toString(16))).substr(h.length);return w}function f(m){return"rgba("+m.join(",")+")"}u.exports=function a(m){var h,w,p,o,v,M,b,L,x,S;if(m||(m={}),L=(m.nshades||72)-1,b=m.format||"hex",(M=m.colormap)||(M="jet"),"string"==typeof M){if(M=M.toLowerCase(),!r[M])throw Error(M+" not a supported colorscale");v=r[M]}else{if(!Array.isArray(M))throw Error("unsupported colormap option",M);v=M.slice()}if(v.length>L+1)throw new Error(M+" map requires nshades to be at least size "+v.length);x=Array.isArray(m.alpha)?2!==m.alpha.length?[1,1]:m.alpha.slice():"number"==typeof m.alpha?[m.alpha,m.alpha]:[1,1],h=v.map(function(F){return Math.round(F.index*L)}),x[0]=Math.min(Math.max(x[0],0),1),x[1]=Math.min(Math.max(x[1],0),1);var T=v.map(function(F,D){var N=v[D].index,k=v[D].rgb.slice();return 4===k.length&&k[3]>=0&&k[3]<=1||(k[3]=x[0]+(x[1]-x[0])*N),k}),n=[];for(S=0;S<h.length-1;++S){o=h[S+1]-h[S],w=T[S],p=T[S+1];for(var E=0;E<o;E++){var d=E/o;n.push([Math.round(l(w[0],p[0],d)),Math.round(l(w[1],p[1],d)),Math.round(l(w[2],p[2],d)),l(w[3],p[3],d)])}}return n.push(v[v.length-1].rgb.concat(x[1])),"hex"===b?n=n.map(c):"rgbaString"===b?n=n.map(f):"float"===b&&(n=n.map(s)),n}},9398:function(u,y,e){"use strict";u.exports=function m(h,w,p,o){var v=r(w,p,o);if(0===v){var M=l(r(h,w,p)),b=l(r(h,w,o));if(M===b){if(0===M){var L=f(h,w,p);return L===f(h,w,o)?0:L?1:-1}return 0}return 0===b?M>0||f(h,w,o)?-1:1:0===M?b>0||f(h,w,p)?1:-1:l(b-M)}var S=r(h,w,p);return S>0?v>0&&r(h,w,o)>0?1:-1:S<0?v>0||r(h,w,o)>0?1:-1:r(h,w,o)>0||f(h,w,p)?1:-1};var r=e(417),l=e(7538),a=e(87),s=e(2019),c=e(9662);function f(h,w,p){var o=a(h[0],-w[0]),v=a(h[1],-w[1]),M=a(p[0],-w[0]),b=a(p[1],-w[1]),L=c(s(o,M),s(v,b));return L[L.length-1]>=0}},7538:function(u){"use strict";u.exports=function(e){return e<0?-1:e>0?1:0}},9209:function(u){u.exports=function r(l,a){var s=l.length,c=l.length-a.length;if(c)return c;switch(s){case 0:return 0;case 1:return l[0]-a[0];case 2:return l[0]+l[1]-a[0]-a[1]||y(l[0],l[1])-y(a[0],a[1]);case 3:var f=l[0]+l[1],m=a[0]+a[1];if(c=f+l[2]-(m+a[2]))return c;var h=y(l[0],l[1]),w=y(a[0],a[1]);return y(h,l[2])-y(w,a[2])||y(h+l[2],f)-y(w+a[2],m);case 4:var p=l[0],o=l[1],v=l[2],M=l[3],b=a[0],L=a[1],x=a[2],S=a[3];return p+o+v+M-(b+L+x+S)||y(p,o,v,M)-y(b,L,x,S,b)||y(p+o,p+v,p+M,o+v,o+M,v+M)-y(b+L,b+x,b+S,L+x,L+S,x+S)||y(p+o+v,p+o+M,p+v+M,o+v+M)-y(b+L+x,b+L+S,b+x+S,L+x+S);default:for(var T=l.slice().sort(e),n=a.slice().sort(e),E=0;E<s;++E)if(c=T[E]-n[E])return c;return 0}};var y=Math.min;function e(l,a){return l-a}},1284:function(u,y,e){"use strict";var r=e(9209),l=e(9887);u.exports=function a(s,c){return r(s,c)||l(s)-l(c)}},5537:function(u,y,e){"use strict";var r=e(8950),l=e(8722),a=e(3332);u.exports=function s(c){var f=c.length;if(0===f)return[];if(1===f)return[[0]];var m=c[0].length;return 0===m?[]:1===m?r(c):2===m?l(c):a(c,m)}},8950:function(u){"use strict";u.exports=function y(e){for(var r=0,l=0,a=1;a<e.length;++a)e[a][0]<e[r][0]&&(r=a),e[a][0]>e[l][0]&&(l=a);return r<l?[[r],[l]]:r>l?[[l],[r]]:[[r]]}},8722:function(u,y,e){"use strict";u.exports=function l(a){var s=r(a),c=s.length;if(c<=2)return[];for(var f=new Array(c),m=s[c-1],h=0;h<c;++h){var w=s[h];f[h]=[m,w],m=w}return f};var r=e(3266)},3332:function(u,y,e){"use strict";u.exports=function c(f,m){try{return r(f,!0)}catch(o){var h=l(f);if(h.length<=m)return[];var w=function a(f,m){for(var h=f.length,w=new Array(h),p=0;p<m.length;++p)w[p]=f[m[p]];var o=m.length;for(p=0;p<h;++p)m.indexOf(p)<0&&(w[o++]=f[p]);return w}(f,h);return function s(f,m){for(var h=f.length,w=m.length,p=0;p<h;++p)for(var o=f[p],v=0;v<o.length;++v){var M=o[v];if(M<w)o[v]=m[M];else{M-=w;for(var b=0;b<w;++b)M>=m[b]&&(M+=1);o[v]=M}}return f}(r(w,!0),h)}};var r=e(2183),l=e(2153)},9680:function(u){"use strict";u.exports=function e(r,l,a,s,c,f){var m=c-1,h=c*c,w=m*m,p=(1+2*c)*w,o=c*w,v=h*(3-2*c),M=h*m;if(r.length){f||(f=new Array(r.length));for(var b=r.length-1;b>=0;--b)f[b]=p*r[b]+o*l[b]+v*a[b]+M*s[b];return f}return p*r+o*l+v*a+M*s},u.exports.derivative=function y(r,l,a,s,c,f){var m=6*c*c-6*c,h=3*c*c-4*c+1,w=-6*c*c+6*c,p=3*c*c-2*c;if(r.length){f||(f=new Array(r.length));for(var o=r.length-1;o>=0;--o)f[o]=m*r[o]+h*l[o]+w*a[o]+p*s[o];return f}return m*r+h*l+w*a[o]+p*s}},4419:function(u,y,e){"use strict";var r=e(2183),l=e(1215);function a(m,h){this.point=m,this.index=h}function s(m,h){for(var w=m.point,p=h.point,o=w.length,v=0;v<o;++v){var M=p[v]-w[v];if(M)return M}return 0}u.exports=function f(m,h){var w=m.length;if(0===w)return[];var p=m[0].length;if(p<1)return[];if(1===p)return function c(m,h,w){if(1===m)return w?[[-1,0]]:[];var p=h.map(function(L,x){return[L[0],x]});p.sort(function(L,x){return L[0]-x[0]});for(var o=new Array(m-1),v=1;v<m;++v)o[v-1]=[p[v-1][1],p[v][1]];return w&&o.push([-1,o[0][1]],[o[m-1][1],-1]),o}(w,m,h);for(var o=new Array(w),v=1,M=0;M<w;++M){for(var b=m[M],L=new Array(p+1),x=0,S=0;S<p;++S){var T=b[S];L[S]=T,x+=T*T}L[p]=x,o[M]=new a(L,M),v=Math.max(x,v)}l(o,s),w=o.length;var n=new Array(w+p+1),E=new Array(w+p+1),d=(p+1)*(p+1)*v,F=new Array(p+1);for(M=0;M<=p;++M)F[M]=0;for(F[p]=d,n[0]=F.slice(),E[0]=-1,M=0;M<=p;++M)(L=F.slice())[M]=1,n[M+1]=L,E[M+1]=-1;for(M=0;M<w;++M)n[M+p+1]=(D=o[M]).point,E[M+p+1]=D.index;var N=r(n,!1);if(N=N.filter(h?function(k){for(var O=0,B=0;B<=p;++B){var z=E[k[B]];if(z<0&&++O>=2)return!1;k[B]=z}return!0}:function(k){for(var O=0;O<=p;++O){var B=E[k[O]];if(B<0)return!1;k[O]=B}return!0}),1&p)for(M=0;M<N.length;++M){var D;L=(D=N[M])[0],D[0]=D[1],D[1]=L}return N}},8362:function(u){var y=!1;if("undefined"!=typeof Float64Array){var e=new Float64Array(1),r=new Uint32Array(e.buffer);if(e[0]=1,y=!0,1072693248===r[1]){let v=function(L,x){return r[0]=L,r[1]=x,e[0]},M=function(L){return e[0]=L,r[0]},b=function(L){return e[0]=L,r[1]};u.exports=function(x){return e[0]=x,[r[0],r[1]]},u.exports.pack=v,u.exports.lo=M,u.exports.hi=b}else if(1072693248===r[0]){let v=function(L,x){return r[1]=L,r[0]=x,e[0]},M=function(L){return e[0]=L,r[1]},b=function(L){return e[0]=L,r[0]};u.exports=function(x){return e[0]=x,[r[1],r[0]]},u.exports.pack=v,u.exports.lo=M,u.exports.hi=b}else y=!1}if(!y){let v=function(L,x){return l.writeUInt32LE(L,0,!0),l.writeUInt32LE(x,4,!0),l.readDoubleLE(0,!0)},M=function(L){return l.writeDoubleLE(L,0,!0),l.readUInt32LE(0,!0)},b=function(L){return l.writeDoubleLE(L,0,!0),l.readUInt32LE(4,!0)};var l=new Buffer(8);u.exports=function(x){return l.writeDoubleLE(x,0,!0),[l.readUInt32LE(0,!0),l.readUInt32LE(4,!0)]},u.exports.pack=v,u.exports.lo=M,u.exports.hi=b}u.exports.sign=function(v){return u.exports.hi(v)>>>31},u.exports.exponent=function(v){return(u.exports.hi(v)<<1>>>21)-1023},u.exports.fraction=function(v){var M=u.exports.lo(v),b=u.exports.hi(v),L=1048575&b;return 2146435072&b&&(L+=1048576),[M,L]},u.exports.denormalized=function(v){return!(2146435072&u.exports.hi(v))}},3094:function(u){"use strict";function y(l,a,s){var c=0|l[s];if(c<=0)return[];var m,f=new Array(c);if(s===l.length-1)for(m=0;m<c;++m)f[m]=a;else for(m=0;m<c;++m)f[m]=y(l,a,s+1);return f}u.exports=function r(l,a){switch(void 0===a&&(a=0),typeof l){case"number":if(l>0)return function e(l,a){var s,c;for(s=new Array(l),c=0;c<l;++c)s[c]=a;return s}(0|l,a);break;case"object":if("number"==typeof l.length)return y(l,a,0)}return[]}},8348:function(u,y,e){"use strict";u.exports=function l(a,s){var c=a.length;if("number"!=typeof s){s=0;for(var f=0;f<c;++f){var m=a[f];s=Math.max(s,m[0],m[1])}s=1+(0|s)}s|=0;var h=new Array(s);for(f=0;f<s;++f)h[f]=[];for(f=0;f<c;++f)h[(m=a[f])[0]].push(m[1]),h[m[1]].push(m[0]);for(var w=0;w<s;++w)r(h[w],function(p,o){return p-o});return h};var r=e(1215)},5795:function(u){"use strict";u.exports=function y(e,r,l){var a=r||0,s=l||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[a*e[12]+e[8],a*e[13]+e[9],a*e[14]+e[10],a*e[15]+e[11]],[s*e[12]-e[8],s*e[13]-e[9],s*e[14]-e[10],s*e[15]-e[11]]]}},8444:function(u,y,e){"use strict";u.exports=function m(h,w,p){switch(arguments.length){case 0:return new s([0],[0],0);case 1:return"number"==typeof h?new s(o=f(h),o,0):new s(h,f(h.length),0);case 2:var o;if("number"==typeof w)return new s(h,o=f(h.length),+w);p=0;case 3:if(h.length!==w.length)throw new Error("state and velocity lengths must match");return new s(h,w,p)}};var r=e(9680),l=e(5070);function a(h,w,p){return Math.min(w,Math.max(h,p))}function s(h,w,p){this.dimension=h.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var o=0;o<this.dimension;++o)this.bounds[0][o]=-1/0,this.bounds[1][o]=1/0;this._state=h.slice().reverse(),this._velocity=w.slice().reverse(),this._time=[p],this._scratch=[h.slice(),h.slice(),h.slice(),h.slice(),h.slice()]}var c=s.prototype;function f(h){for(var w=new Array(h),p=0;p<h;++p)w[p]=0;return w}c.flush=function(h){var w=l.gt(this._time,h)-1;w<=0||(this._time.splice(0,w),this._state.splice(0,w*this.dimension),this._velocity.splice(0,w*this.dimension))},c.curve=function(h){var w=this._time,p=w.length,o=l.le(w,h),v=this._scratch[0],M=this._state,b=this._velocity,L=this.dimension,x=this.bounds;if(o<0)for(var S=L-1,T=0;T<L;++T,--S)v[T]=M[S];else if(o>=p-1){S=M.length-1;var n=h-w[p-1];for(T=0;T<L;++T,--S)v[T]=M[S]+n*b[S]}else{S=L*(o+1)-1;var E=w[o],F=w[o+1]-E||1,D=this._scratch[1],N=this._scratch[2],k=this._scratch[3],O=this._scratch[4],B=!0;for(T=0;T<L;++T,--S)D[T]=M[S],k[T]=b[S]*F,N[T]=M[S+L],O[T]=b[S+L]*F,B=B&&D[T]===N[T]&&k[T]===O[T]&&0===k[T];if(B)for(T=0;T<L;++T)v[T]=D[T];else r(D,k,N,O,(h-E)/F,v)}var z=x[0],U=x[1];for(T=0;T<L;++T)v[T]=a(z[T],U[T],v[T]);return v},c.dcurve=function(h){var w=this._time,p=w.length,o=l.le(w,h),v=this._scratch[0],M=this._state,b=this._velocity,L=this.dimension;if(o>=p-1)for(var x=M.length-1,T=0;T<L;++T,--x)v[T]=b[x];else{x=L*(o+1)-1;var n=w[o],d=w[o+1]-n||1,F=this._scratch[1],D=this._scratch[2],N=this._scratch[3],k=this._scratch[4],O=!0;for(T=0;T<L;++T,--x)F[T]=M[x],N[T]=b[x]*d,D[T]=M[x+L],k[T]=b[x+L]*d,O=O&&F[T]===D[T]&&N[T]===k[T]&&0===N[T];if(O)for(T=0;T<L;++T)v[T]=0;else for(r.derivative(F,N,D,k,(h-n)/d,v),T=0;T<L;++T)v[T]/=d}return v},c.lastT=function(){var h=this._time;return h[h.length-1]},c.stable=function(){for(var h=this._velocity,w=h.length,p=this.dimension-1;p>=0;--p)if(h[--w])return!1;return!0},c.jump=function(h){var w=this.lastT(),p=this.dimension;if(!(h<w||arguments.length!==p+1)){var o=this._state,v=this._velocity,M=o.length-this.dimension,b=this.bounds,L=b[0],x=b[1];this._time.push(w,h);for(var S=0;S<2;++S)for(var T=0;T<p;++T)o.push(o[M++]),v.push(0);for(this._time.push(h),T=p;T>0;--T)o.push(a(L[T-1],x[T-1],arguments[T])),v.push(0)}},c.push=function(h){var w=this.lastT(),p=this.dimension;if(!(h<w||arguments.length!==p+1)){var o=this._state,v=this._velocity,M=o.length-this.dimension,b=h-w,L=this.bounds,x=L[0],S=L[1],T=b>1e-6?1/b:0;this._time.push(h);for(var n=p;n>0;--n){var E=a(x[n-1],S[n-1],arguments[n]);o.push(E),v.push((E-o[M++])*T)}}},c.set=function(h){var w=this.dimension;if(!(h<this.lastT()||arguments.length!==w+1)){var p=this._state,o=this._velocity,v=this.bounds,M=v[0],b=v[1];this._time.push(h);for(var L=w;L>0;--L)p.push(a(M[L-1],b[L-1],arguments[L])),o.push(0)}},c.move=function(h){var w=this.lastT(),p=this.dimension;if(!(h<=w||arguments.length!==p+1)){var o=this._state,v=this._velocity,M=o.length-this.dimension,b=this.bounds,L=b[0],x=b[1],S=h-w,T=S>1e-6?1/S:0;this._time.push(h);for(var n=p;n>0;--n){var E=arguments[n];o.push(a(L[n-1],x[n-1],o[M++]+E)),v.push(E*T)}}},c.idle=function(h){var w=this.lastT();if(!(h<w)){var p=this.dimension,o=this._state,v=this._velocity,M=o.length-p,b=this.bounds,L=b[0],x=b[1],S=h-w;this._time.push(h);for(var T=p-1;T>=0;--T)o.push(a(L[T],x[T],o[M]+S*v[M])),v.push(0),M+=1}}},7080:function(u){"use strict";u.exports=function L(x){return new c(x||b,null)};function r(x,S,T,n,E,d){this._color=x,this.key=S,this.value=T,this.left=n,this.right=E,this._count=d}function l(x){return new r(x._color,x.key,x.value,x.left,x.right,x._count)}function a(x,S){return new r(x,S.key,S.value,S.left,S.right,S._count)}function s(x){x._count=1+(x.left?x.left._count:0)+(x.right?x.right._count:0)}function c(x,S){this._compare=x,this.root=S}var f=c.prototype;function m(x,S){var T;return S.left&&(T=m(x,S.left))?T:(T=x(S.key,S.value))||(S.right?m(x,S.right):void 0)}function h(x,S,T,n){if(S(x,n.key)<=0){var d;if(n.left&&(d=h(x,S,T,n.left)))return d;if(d=T(n.key,n.value))return d}if(n.right)return h(x,S,T,n.right)}function w(x,S,T,n,E){var D,d=T(x,E.key),F=T(S,E.key);return d<=0&&(E.left&&(D=w(x,S,T,n,E.left))||F>0&&(D=n(E.key,E.value)))?D:F>0&&E.right?w(x,S,T,n,E.right):void 0}function p(x,S){this.tree=x,this._stack=S}Object.defineProperty(f,"keys",{get:function(){var x=[];return this.forEach(function(S,T){x.push(S)}),x}}),Object.defineProperty(f,"values",{get:function(){var x=[];return this.forEach(function(S,T){x.push(T)}),x}}),Object.defineProperty(f,"length",{get:function(){return this.root?this.root._count:0}}),f.insert=function(x,S){for(var T=this._compare,n=this.root,E=[],d=[];n;){var F=T(x,n.key);E.push(n),d.push(F),n=F<=0?n.left:n.right}E.push(new r(0,x,S,null,null,1));for(var D=E.length-2;D>=0;--D)n=E[D],E[D]=d[D]<=0?new r(n._color,n.key,n.value,E[D+1],n.right,n._count+1):new r(n._color,n.key,n.value,n.left,E[D+1],n._count+1);for(D=E.length-1;D>1;--D){var N=E[D-1];if(n=E[D],1===N._color||1===n._color)break;var k=E[D-2];if(k.left===N)if(N.left===n){if(!(O=k.right)||0!==O._color){k._color=0,k.left=N.right,N._color=1,N.right=k,E[D-2]=N,E[D-1]=n,s(k),s(N),D>=3&&((B=E[D-3]).left===k?B.left=N:B.right=N);break}N._color=1,k.right=a(1,O),k._color=0,D-=1}else{if(!(O=k.right)||0!==O._color){N.right=n.left,k._color=0,k.left=n.right,n._color=1,n.left=N,n.right=k,E[D-2]=n,E[D-1]=N,s(k),s(N),s(n),D>=3&&((B=E[D-3]).left===k?B.left=n:B.right=n);break}N._color=1,k.right=a(1,O),k._color=0,D-=1}else if(N.right===n){if(!(O=k.left)||0!==O._color){k._color=0,k.right=N.left,N._color=1,N.left=k,E[D-2]=N,E[D-1]=n,s(k),s(N),D>=3&&((B=E[D-3]).right===k?B.right=N:B.left=N);break}N._color=1,k.left=a(1,O),k._color=0,D-=1}else{var O;if(!(O=k.left)||0!==O._color){var B;N.left=n.right,k._color=0,k.right=n.left,n._color=1,n.right=N,n.left=k,E[D-2]=n,E[D-1]=N,s(k),s(N),s(n),D>=3&&((B=E[D-3]).right===k?B.right=n:B.left=n);break}N._color=1,k.left=a(1,O),k._color=0,D-=1}}return E[0]._color=1,new c(T,E[0])},f.forEach=function(S,T,n){if(this.root)switch(arguments.length){case 1:return m(S,this.root);case 2:return h(T,this._compare,S,this.root);case 3:return this._compare(T,n)>=0?void 0:w(T,n,this._compare,S,this.root)}},Object.defineProperty(f,"begin",{get:function(){for(var x=[],S=this.root;S;)x.push(S),S=S.left;return new p(this,x)}}),Object.defineProperty(f,"end",{get:function(){for(var x=[],S=this.root;S;)x.push(S),S=S.right;return new p(this,x)}}),f.at=function(x){if(x<0)return new p(this,[]);for(var S=this.root,T=[];;){if(T.push(S),S.left){if(x<S.left._count){S=S.left;continue}x-=S.left._count}if(!x)return new p(this,T);if(x-=1,!S.right)break;if(x>=S.right._count)break;S=S.right}return new p(this,[])},f.ge=function(x){for(var S=this._compare,T=this.root,n=[],E=0;T;){var d=S(x,T.key);n.push(T),d<=0&&(E=n.length),T=d<=0?T.left:T.right}return n.length=E,new p(this,n)},f.gt=function(x){for(var S=this._compare,T=this.root,n=[],E=0;T;){var d=S(x,T.key);n.push(T),d<0&&(E=n.length),T=d<0?T.left:T.right}return n.length=E,new p(this,n)},f.lt=function(x){for(var S=this._compare,T=this.root,n=[],E=0;T;){var d=S(x,T.key);n.push(T),d>0&&(E=n.length),T=d<=0?T.left:T.right}return n.length=E,new p(this,n)},f.le=function(x){for(var S=this._compare,T=this.root,n=[],E=0;T;){var d=S(x,T.key);n.push(T),d>=0&&(E=n.length),T=d<0?T.left:T.right}return n.length=E,new p(this,n)},f.find=function(x){for(var S=this._compare,T=this.root,n=[];T;){var E=S(x,T.key);if(n.push(T),0===E)return new p(this,n);T=E<=0?T.left:T.right}return new p(this,[])},f.remove=function(x){var S=this.find(x);return S?S.remove():this},f.get=function(x){for(var S=this._compare,T=this.root;T;){var n=S(x,T.key);if(0===n)return T.value;T=n<=0?T.left:T.right}};var o=p.prototype;function v(x,S){x.key=S.key,x.value=S.value,x.left=S.left,x.right=S.right,x._color=S._color,x._count=S._count}function b(x,S){return x<S?-1:x>S?1:0}Object.defineProperty(o,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(o,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),o.clone=function(){return new p(this.tree,this._stack.slice())},o.remove=function(){var x=this._stack;if(0===x.length)return this.tree;var S=new Array(x.length);S[S.length-1]=new r((T=x[x.length-1])._color,T.key,T.value,T.left,T.right,T._count);for(var n=x.length-2;n>=0;--n){var T;S[n]=(T=x[n]).left===x[n+1]?new r(T._color,T.key,T.value,S[n+1],T.right,T._count):new r(T._color,T.key,T.value,T.left,S[n+1],T._count)}if((T=S[S.length-1]).left&&T.right){var E=S.length;for(T=T.left;T.right;)S.push(T),T=T.right;var d=S[E-1];for(S.push(new r(T._color,d.key,d.value,T.left,T.right,T._count)),S[E-1].key=T.key,S[E-1].value=T.value,n=S.length-2;n>=E;--n)S[n]=new r((T=S[n])._color,T.key,T.value,T.left,S[n+1],T._count);S[E-1].left=S[E]}if(0===(T=S[S.length-1])._color){var F=S[S.length-2];for(F.left===T?F.left=null:F.right===T&&(F.right=null),S.pop(),n=0;n<S.length;++n)S[n]._count--;return new c(this.tree._compare,S[0])}if(T.left||T.right){for(T.left?v(T,T.left):T.right&&v(T,T.right),T._color=1,n=0;n<S.length-1;++n)S[n]._count--;return new c(this.tree._compare,S[0])}if(1===S.length)return new c(this.tree._compare,null);for(n=0;n<S.length;++n)S[n]._count--;var D=S[S.length-2];return function M(x){for(var S,T,n,E,d=x.length-1;d>=0;--d){if(S=x[d],0===d)return void(S._color=1);if((T=x[d-1]).left===S){if((n=T.right).right&&0===n.right._color)return E=(n=T.right=l(n)).right=l(n.right),T.right=n.left,n.left=T,n.right=E,n._color=T._color,S._color=1,T._color=1,E._color=1,s(T),s(n),d>1&&((F=x[d-2]).left===T?F.left=n:F.right=n),void(x[d-1]=n);if(n.left&&0===n.left._color)return E=(n=T.right=l(n)).left=l(n.left),T.right=E.left,n.left=E.right,E.left=T,E.right=n,E._color=T._color,T._color=1,n._color=1,S._color=1,s(T),s(n),s(E),d>1&&((F=x[d-2]).left===T?F.left=E:F.right=E),void(x[d-1]=E);if(1===n._color){if(0===T._color)return T._color=1,void(T.right=a(0,n));T.right=a(0,n);continue}n=l(n),T.right=n.left,n.left=T,n._color=T._color,T._color=0,s(T),s(n),d>1&&((F=x[d-2]).left===T?F.left=n:F.right=n),x[d-1]=n,x[d]=T,d+1<x.length?x[d+1]=S:x.push(S),d+=2}else{if((n=T.left).left&&0===n.left._color)return E=(n=T.left=l(n)).left=l(n.left),T.left=n.right,n.right=T,n.left=E,n._color=T._color,S._color=1,T._color=1,E._color=1,s(T),s(n),d>1&&((F=x[d-2]).right===T?F.right=n:F.left=n),void(x[d-1]=n);if(n.right&&0===n.right._color)return E=(n=T.left=l(n)).right=l(n.right),T.left=E.right,n.right=E.left,E.right=T,E.left=n,E._color=T._color,T._color=1,n._color=1,S._color=1,s(T),s(n),s(E),d>1&&((F=x[d-2]).right===T?F.right=E:F.left=E),void(x[d-1]=E);if(1===n._color){if(0===T._color)return T._color=1,void(T.left=a(0,n));T.left=a(0,n);continue}var F;n=l(n),T.left=n.right,n.right=T,n._color=T._color,T._color=0,s(T),s(n),d>1&&((F=x[d-2]).right===T?F.right=n:F.left=n),x[d-1]=n,x[d]=T,d+1<x.length?x[d+1]=S:x.push(S),d+=2}}}(S),D.left===T?D.left=null:D.right=null,new c(this.tree._compare,S[0])},Object.defineProperty(o,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(o,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(o,"index",{get:function(){var x=0,S=this._stack;if(0===S.length){var T=this.tree.root;return T?T._count:0}S[S.length-1].left&&(x=S[S.length-1].left._count);for(var n=S.length-2;n>=0;--n)S[n+1]===S[n].right&&(++x,S[n].left&&(x+=S[n].left._count));return x},enumerable:!0}),o.next=function(){var x=this._stack;if(0!==x.length){var S=x[x.length-1];if(S.right)for(S=S.right;S;)x.push(S),S=S.left;else for(x.pop();x.length>0&&x[x.length-1].right===S;)S=x[x.length-1],x.pop()}},Object.defineProperty(o,"hasNext",{get:function(){var x=this._stack;if(0===x.length)return!1;if(x[x.length-1].right)return!0;for(var S=x.length-1;S>0;--S)if(x[S-1].left===x[S])return!0;return!1}}),o.update=function(x){var S=this._stack;if(0===S.length)throw new Error("Can't update empty node!");var T=new Array(S.length),n=S[S.length-1];T[T.length-1]=new r(n._color,n.key,x,n.left,n.right,n._count);for(var E=S.length-2;E>=0;--E)T[E]=(n=S[E]).left===S[E+1]?new r(n._color,n.key,n.value,T[E+1],n.right,n._count):new r(n._color,n.key,n.value,n.left,T[E+1],n._count);return new c(this.tree._compare,T[0])},o.prev=function(){var x=this._stack;if(0!==x.length){var S=x[x.length-1];if(S.left)for(S=S.left;S;)x.push(S),S=S.right;else for(x.pop();x.length>0&&x[x.length-1].left===S;)S=x[x.length-1],x.pop()}},Object.defineProperty(o,"hasPrev",{get:function(){var x=this._stack;if(0===x.length)return!1;if(x[x.length-1].left)return!0;for(var S=x.length-1;S>0;--S)if(x[S-1].right===x[S])return!0;return!1}})},7453:function(u,y,e){"use strict";u.exports=function n(E,d){var F=new h(E);return F.update(d),F};var r=e(9557),l=e(1681),a=e(1011),s=e(2864),c=e(8468),f=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function m(E,d){return E[0]=d[0],E[1]=d[1],E[2]=d[2],E}function h(E){this.gl=E,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=a(E)}var w=h.prototype;function p(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}w.update=function(E){function d(it,ut,Q){if(Q in E){var G,j=E[Q],Z=this[Q];this[Q]=G=(it?Array.isArray(j)&&Array.isArray(j[0]):Array.isArray(j))?[ut(j[0]),ut(j[1]),ut(j[2])]:[ut(j),ut(j),ut(j)];for(var K=0;K<3;++K)if(G[K]!==Z[K])return!0}return!1}E=E||{};var O,F=d.bind(this,!1,Number),D=d.bind(this,!1,Boolean),N=d.bind(this,!1,String),k=d.bind(this,!0,function(it){if(Array.isArray(it)){if(3===it.length)return[+it[0],+it[1],+it[2],1];if(4===it.length)return[+it[0],+it[1],+it[2],+it[3]]}return[0,0,0,1]}),B=!1,z=!1;if("bounds"in E)for(var U=E.bounds,H=0;H<2;++H)for(var J=0;J<3;++J)U[H][J]!==this.bounds[H][J]&&(z=!0),this.bounds[H][J]=U[H][J];if("ticks"in E)for(O=E.ticks,B=!0,this.autoTicks=!1,H=0;H<3;++H)this.tickSpacing[H]=0;else F("tickSpacing")&&(this.autoTicks=!0,z=!0);if(this._firstInit&&("ticks"in E||"tickSpacing"in E||(this.autoTicks=!0),z=!0,B=!0,this._firstInit=!1),z&&this.autoTicks&&(O=c.create(this.bounds,this.tickSpacing),B=!0),B){for(H=0;H<3;++H)O[H].sort(function(ut,Q){return ut.x-Q.x});c.equal(O,this.ticks)?B=!1:this.ticks=O}D("tickEnable"),N("tickFont")&&(B=!0),F("tickSize"),F("tickAngle"),F("tickPad"),k("tickColor");var nt=N("labels");N("labelFont")&&(nt=!0),D("labelEnable"),F("labelSize"),F("labelPad"),k("labelColor"),D("lineEnable"),D("lineMirror"),F("lineWidth"),k("lineColor"),D("lineTickEnable"),D("lineTickMirror"),F("lineTickLength"),F("lineTickWidth"),k("lineTickColor"),D("gridEnable"),F("gridWidth"),k("gridColor"),D("zeroEnable"),k("zeroLineColor"),F("zeroLineWidth"),D("backgroundEnable"),k("backgroundColor"),this._text?this._text&&(nt||B)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=r(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&B&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=l(this.gl,this.bounds,this.ticks))};var o=[new p,new p,new p];function v(E,d,F,D,N){for(var k=E.primalOffset,O=E.primalMinor,B=E.mirrorOffset,z=E.mirrorMinor,U=D[d],H=0;H<3;++H)if(d!==H){var J=k,nt=B,it=O,ut=z;U&1<<H&&(J=B,nt=k,it=z,ut=O),J[H]=F[0][H],nt[H]=F[1][H],N[H]>0?(it[H]=-1,ut[H]=0):(it[H]=0,ut[H]=1)}}var M=[0,0,0],b={model:f,view:f,projection:f,_ortho:!1};w.isOpaque=function(){return!0},w.isTransparent=function(){return!1},w.drawTransparent=function(E){};var x=[0,0,0],S=[0,0,0],T=[0,0,0];w.draw=function(E){for(var Z=this.gl,d=(E=E||b).model||f,F=E.view||f,D=E.projection||f,N=this.bounds,k=E._ortho||!1,O=s(d,F,D,N,k),B=O.cubeEdges,z=O.axis,ut=(k?2:1)*this.pixelRatio*(D[3]*F[12]+D[7]*F[13]+D[11]*F[14]+D[15]*F[15])/Z.drawingBufferHeight,Q=0;Q<3;++Q)this.lastCubeProps.cubeEdges[Q]=B[Q],this.lastCubeProps.axis[Q]=z[Q];var j=o;for(Q=0;Q<3;++Q)v(o[Q],Q,this.bounds,B,z);Z=this.gl;var G=M;for(Q=0;Q<3;++Q)G[Q]=this.backgroundEnable[Q]?z[Q]:0;for(this._background.draw(d,F,D,N,G,this.backgroundColor),this._lines.bind(d,F,D,this),Q=0;Q<3;++Q){var K=[0,0,0];K[Q]=z[Q]>0?N[1][Q]:N[0][Q];for(var at=0;at<2;++at){var X=(Q+1+(1^at))%3;this.gridEnable[$=(Q+1+at)%3]&&this._lines.drawGrid($,X,this.bounds,K,this.gridColor[$],this.gridWidth[$]*this.pixelRatio)}for(at=0;at<2;++at){var $=(Q+1+at)%3;this.zeroEnable[X=(Q+1+(1^at))%3]&&Math.min(N[0][X],N[1][X])<=0&&Math.max(N[0][X],N[1][X])>=0&&this._lines.drawZero($,X,this.bounds,K,this.zeroLineColor[X],this.zeroLineWidth[X]*this.pixelRatio)}}for(Q=0;Q<3;++Q){this.lineEnable[Q]&&this._lines.drawAxisLine(Q,this.bounds,j[Q].primalOffset,this.lineColor[Q],this.lineWidth[Q]*this.pixelRatio),this.lineMirror[Q]&&this._lines.drawAxisLine(Q,this.bounds,j[Q].mirrorOffset,this.lineColor[Q],this.lineWidth[Q]*this.pixelRatio);var rt=m(x,j[Q].primalMinor),et=m(S,j[Q].mirrorMinor),st=this.lineTickLength;for(at=0;at<3;++at){var dt=ut/d[5*at];rt[at]*=st[at]*dt,et[at]*=st[at]*dt}this.lineTickEnable[Q]&&this._lines.drawAxisTicks(Q,j[Q].primalOffset,rt,this.lineTickColor[Q],this.lineTickWidth[Q]*this.pixelRatio),this.lineTickMirror[Q]&&this._lines.drawAxisTicks(Q,j[Q].mirrorOffset,et,this.lineTickColor[Q],this.lineTickWidth[Q]*this.pixelRatio)}this._lines.unbind(),this._text.bind(d,F,D,this.pixelRatio);var bt,Lt,It,Vt,te,Qt,Bt,Ot,qt,ie,oe,pe;function Mt(Vt){(It=[0,0,0])[Vt]=1}for(Q=0;Q<3;++Q){var At=j[Q].primalMinor,Gt=j[Q].mirrorMinor,Wt=m(T,j[Q].primalOffset);for(at=0;at<3;++at)this.lineTickEnable[Q]&&(Wt[at]+=ut*At[at]*Math.max(this.lineTickLength[at],0)/d[5*at]);var Pt=[0,0,0];if(Pt[Q]=1,this.tickEnable[Q]){for(-3600===this.tickAngle[Q]?(this.tickAngle[Q]=0,this.tickAlign[Q]="auto"):this.tickAlign[Q]=-1,(bt=[this.tickAlign[Q],.5,Lt=1])[0]="auto"===bt[0]?0:parseInt(""+bt[0]),It=[0,0,0],Bt=void 0,Ot=void 0,qt=void 0,ie=void 0,oe=void 0,pe=void 0,ie=(te=At)[Ot=((Vt=Q)+2)%3],oe=(Qt=Gt)[Bt=(Vt+1)%3],pe=Qt[Ot],(qt=te[Bt])>0&&pe>0||qt>0&&pe<0||qt<0&&pe>0||qt<0&&pe<0?Mt(Bt):(ie>0&&oe>0||ie>0&&oe<0||ie<0&&oe>0||ie<0&&oe<0)&&Mt(Ot),at=0;at<3;++at)Wt[at]+=ut*At[at]*this.tickPad[at]/d[5*at];this._text.drawTicks(Q,this.tickSize[Q],this.tickAngle[Q],Wt,this.tickColor[Q],Pt,It,bt)}if(this.labelEnable[Q]){for(Lt=0,It=[0,0,0],this.labels[Q].length>4&&(Mt(Q),Lt=1),(bt=[this.labelAlign[Q],.5,Lt])[0]="auto"===bt[0]?0:parseInt(""+bt[0]),at=0;at<3;++at)Wt[at]+=ut*At[at]*this.labelPad[at]/d[5*at];Wt[Q]+=.5*(N[0][Q]+N[1][Q]),this._text.drawLabel(Q,this.labelSize[Q],this.labelAngle[Q],Wt,this.labelColor[Q],[0,0,0],It,bt)}}this._text.unbind()},w.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},1011:function(u,y,e){"use strict";u.exports=function f(m){for(var h=[],w=[],p=0,o=0;o<3;++o)for(var v=(o+1)%3,M=(o+2)%3,b=[0,0,0],L=[0,0,0],x=-1;x<=1;x+=2){w.push(p,p+2,p+1,p+1,p+2,p+3),b[o]=x,L[o]=x;for(var S=-1;S<=1;S+=2){b[v]=S;for(var T=-1;T<=1;T+=2)b[M]=T,h.push(b[0],b[1],b[2],L[0],L[1],L[2]),p+=1}var n=v;v=M,M=n}var E=r(m,new Float32Array(h)),d=r(m,new Uint16Array(w),m.ELEMENT_ARRAY_BUFFER),F=l(m,[{buffer:E,type:m.FLOAT,size:3,offset:0,stride:24},{buffer:E,type:m.FLOAT,size:3,offset:12,stride:24}],d),D=a(m);return D.attributes.position.location=0,D.attributes.normal.location=1,new s(m,E,F,D)};var r=e(5827),l=e(2944),a=e(1943).bg;function s(m,h,w,p){this.gl=m,this.buffer=h,this.vao=w,this.shader=p}var c=s.prototype;c.draw=function(m,h,w,p,o,v){for(var M=!1,b=0;b<3;++b)M=M||o[b];if(M){var L=this.gl;L.enable(L.POLYGON_OFFSET_FILL),L.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:m,view:h,projection:w,bounds:p,enable:o,colors:v},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),L.disable(L.POLYGON_OFFSET_FILL)}},c.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},2864:function(u,y,e){"use strict";u.exports=function x(S,T,n,E,d){l(c,T,S),l(c,n,c);for(var F=0,D=0;D<2;++D){h[2]=E[D][2];for(var N=0;N<2;++N){h[1]=E[N][1];for(var k=0;k<2;++k)h[0]=E[k][0],p(f[F],h,c),F+=1}}var O=-1;for(D=0;D<8;++D){for(var B=f[D][3],z=0;z<3;++z)m[D][z]=f[D][z]/B;d&&(m[D][2]*=-1),B<0&&(O<0||m[D][2]<m[O][2])&&(O=D)}if(O<0){O=0;for(var U=0;U<3;++U){for(var H=(U+2)%3,J=(U+1)%3,nt=-1,it=-1,ut=0;ut<2;++ut)s(m[Q=ut<<U],m[Q+(ut<<H)+(1-ut<<J)],m[Q+(1-ut<<H)+(ut<<J)],w)<0||(ut?nt=1:it=1);if(nt<0||it<0)it>nt&&(O|=1<<U);else{for(ut=0;ut<2;++ut){var Q,G=v([f[Q=ut<<U],f[Q+(ut<<H)+(1-ut<<J)],f[Q+(1-ut<<H)+(ut<<J)],f[Q+(1<<H)+(1<<J)]]);ut?nt=G:it=G}it>nt&&(O|=1<<U)}}}var K=7^O,at=-1;for(D=0;D<8;++D)D===O||D===K||(at<0||m[at][1]>m[D][1])&&(at=D);var $=-1;for(D=0;D<3;++D)(X=at^1<<D)!==O&&X!==K&&($<0&&($=X),(J=m[X])[0]<m[$][0]&&($=X));var rt=-1;for(D=0;D<3;++D){var X;(X=at^1<<D)!==O&&X!==K&&X!==$&&(rt<0&&(rt=X),(J=m[X])[0]>m[rt][0]&&(rt=X))}var et=M;et[0]=et[1]=et[2]=0,et[r.log2($^at)]=at&$,et[r.log2(at^rt)]=at&rt;var st=7^rt;st===O||st===K?et[r.log2(rt^(st=7^$))]=st&rt:et[r.log2($^st)]=st&$;var dt=b,bt=O;for(U=0;U<3;++U)dt[U]=bt&1<<U?-1:1;return L};var r=e(2288),l=e(104),a=e(4670),s=e(417),c=new Array(16),f=new Array(8),m=new Array(8),h=new Array(3),w=[0,0,0];function p(S,T,n){for(var E=0;E<4;++E){S[E]=n[12+E];for(var d=0;d<3;++d)S[E]+=T[d]*n[4*d+E]}}!function(){for(var S=0;S<8;++S)f[S]=[1,1,1,1],m[S]=[1,1,1]}();var o=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function v(S){for(var T=0;T<o.length;++T)if((S=a.positive(S,o[T])).length<3)return 0;var n=S[0],E=n[0]/n[3],d=n[1]/n[3],F=0;for(T=1;T+1<S.length;++T){var D=S[T],N=S[T+1];F+=Math.abs((D[0]/D[3]-E)*(N[1]/N[3]-d)-(D[1]/D[3]-d)*(N[0]/N[3]-E))}return F}var M=[1,1,1],b=[0,0,0],L={cubeEdges:M,axis:b}},1681:function(u,y,e){"use strict";u.exports=function M(b,L,x){var S=[],T=[0,0,0],n=[0,0,0],E=[0,0,0],d=[0,0,0];S.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var F=0;F<3;++F){for(var k=S.length/3|0,D=0;D<x[F].length;++D)S.push(N=+x[F][D].x,0,1,N,1,1,N,0,-1,N,0,-1,N,1,1,N,1,-1);var B=S.length/3|0;T[F]=k,n[F]=B-k,k=S.length/3|0;for(var O=0;O<x[F].length;++O){var N;S.push(N=+x[F][O].x,0,1,N,1,1,N,0,-1,N,0,-1,N,1,1,N,1,-1)}B=S.length/3|0,E[F]=k,d[F]=B-k}var z=r(b,new Float32Array(S)),U=l(b,[{buffer:z,type:b.FLOAT,size:3,stride:0,offset:0}]),H=a(b);return H.attributes.position.location=0,new o(b,z,U,H,n,T,d,E)};var r=e(5827),l=e(2944),a=e(1943).j,s=[0,0,0],c=[0,0,0],f=[0,0,0],m=[0,0,0],h=[1,1];function w(b){return b[0]=b[1]=b[2]=0,b}function p(b,L){return b[0]=L[0],b[1]=L[1],b[2]=L[2],b}function o(b,L,x,S,T,n,E,d){this.gl=b,this.vertBuffer=L,this.vao=x,this.shader=S,this.tickCount=T,this.tickOffset=n,this.gridCount=E,this.gridOffset=d}var v=o.prototype;v.bind=function(b,L,x){this.shader.bind(),this.shader.uniforms.model=b,this.shader.uniforms.view=L,this.shader.uniforms.projection=x,h[0]=this.gl.drawingBufferWidth,h[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=h,this.vao.bind()},v.unbind=function(){this.vao.unbind()},v.drawAxisLine=function(b,L,x,S,T){var n=w(c);this.shader.uniforms.majorAxis=c,n[b]=L[1][b]-L[0][b],this.shader.uniforms.minorAxis=n;var d,E=p(m,x);E[b]+=L[0][b],this.shader.uniforms.offset=E,this.shader.uniforms.lineWidth=T,this.shader.uniforms.color=S,(d=w(f))[(b+2)%3]=1,this.shader.uniforms.screenAxis=d,this.vao.draw(this.gl.TRIANGLES,6),(d=w(f))[(b+1)%3]=1,this.shader.uniforms.screenAxis=d,this.vao.draw(this.gl.TRIANGLES,6)},v.drawAxisTicks=function(b,L,x,S,T){if(this.tickCount[b]){var n=w(s);n[b]=1,this.shader.uniforms.majorAxis=n,this.shader.uniforms.offset=L,this.shader.uniforms.minorAxis=x,this.shader.uniforms.color=S,this.shader.uniforms.lineWidth=T;var E=w(f);E[b]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[b],this.tickOffset[b])}},v.drawGrid=function(b,L,x,S,T,n){if(this.gridCount[b]){var E=w(c);E[L]=x[1][L]-x[0][L],this.shader.uniforms.minorAxis=E;var d=p(m,S);d[L]+=x[0][L],this.shader.uniforms.offset=d;var F=w(s);F[b]=1,this.shader.uniforms.majorAxis=F;var D=w(f);D[b]=1,this.shader.uniforms.screenAxis=D,this.shader.uniforms.lineWidth=n,this.shader.uniforms.color=T,this.vao.draw(this.gl.TRIANGLES,this.gridCount[b],this.gridOffset[b])}},v.drawZero=function(b,L,x,S,T,n){var E=w(c);this.shader.uniforms.majorAxis=E,E[b]=x[1][b]-x[0][b],this.shader.uniforms.minorAxis=E;var d=p(m,S);d[b]+=x[0][b],this.shader.uniforms.offset=d;var F=w(f);F[L]=1,this.shader.uniforms.screenAxis=F,this.shader.uniforms.lineWidth=n,this.shader.uniforms.color=T,this.vao.draw(this.gl.TRIANGLES,6)},v.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1943:function(u,y,e){"use strict";var r=e(6832),l=e(5158),a=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);y.j=function(w){return l(w,a,s,null,[{name:"position",type:"vec3"}])};var c=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),f=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);y.f=function(w){return l(w,c,f,null,[{name:"position",type:"vec3"}])};var m=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),h=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);y.bg=function(w){return l(w,m,h,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(u,y,e){"use strict";u.exports=function v(M,b,L,x,S,T){var n=r(M),E=l(M,[{buffer:n,size:3}]),d=s(M);d.attributes.position.location=0;var F=new h(M,d,n,E);return F.update(b,L,x,S,T),F};var r=e(5827),l=e(2944),a=e(875),s=e(1943).f,c=window||A.global||{},f=c.__TEXT_CACHE||{};c.__TEXT_CACHE={};function h(M,b,L,x){this.gl=M,this.shader=b,this.buffer=L,this.vao=x,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var w=h.prototype,p=[0,0];w.bind=function(M,b,L,x){this.vao.bind(),this.shader.bind();var S=this.shader.uniforms;S.model=M,S.view=b,S.projection=L,S.pixelScale=x,p[0]=this.gl.drawingBufferWidth,p[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=p},w.unbind=function(){this.vao.unbind()},w.update=function(M,b,L,x,S){var T=[];function n(z,U,H,J,nt,it){var ut=f[H];ut||(ut=f[H]={});var Q=ut[U];Q||(Q=ut[U]=function o(M,b){try{return a(M,b)}catch(L){return console.warn('error vectorizing text:"'+M+'" error:',L),{cells:[],positions:[]}}}(U,{triangles:!0,font:H,textAlign:"center",textBaseline:"middle",lineSpacing:nt,styletags:it}));for(var j=(J||12)/12,Z=Q.positions,G=Q.cells,K=0,at=G.length;K<at;++K)for(var $=G[K],X=2;X>=0;--X){var rt=Z[$[X]];T.push(j*rt[0],-j*rt[1],z)}}for(var E=[0,0,0],d=[0,0,0],F=[0,0,0],D=[0,0,0],k={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},O=0;O<3;++O){F[O]=T.length/3|0,n(.5*(M[0][O]+M[1][O]),b[O],L[O],12,1.25,k),D[O]=(T.length/3|0)-F[O],E[O]=T.length/3|0;for(var B=0;B<x[O].length;++B)!x[O][B].text||n(x[O][B].x,x[O][B].text,x[O][B].font||S,x[O][B].fontSize||12,1.25,k);d[O]=(T.length/3|0)-E[O]}this.buffer.update(T),this.tickOffset=E,this.tickCount=d,this.labelOffset=F,this.labelCount=D},w.drawTicks=function(M,b,L,x,S,T,n,E){!this.tickCount[M]||(this.shader.uniforms.axis=T,this.shader.uniforms.color=S,this.shader.uniforms.angle=L,this.shader.uniforms.scale=b,this.shader.uniforms.offset=x,this.shader.uniforms.alignDir=n,this.shader.uniforms.alignOpt=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[M],this.tickOffset[M]))},w.drawLabel=function(M,b,L,x,S,T,n,E){!this.labelCount[M]||(this.shader.uniforms.axis=T,this.shader.uniforms.color=S,this.shader.uniforms.angle=L,this.shader.uniforms.scale=b,this.shader.uniforms.offset=x,this.shader.uniforms.alignDir=n,this.shader.uniforms.alignOpt=E,this.vao.draw(this.gl.TRIANGLES,this.labelCount[M],this.labelOffset[M]))},w.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},8468:function(u,y){"use strict";function e(a,s){var c=a+"",f=c.indexOf("."),m=0;f>=0&&(m=c.length-f-1);var h=Math.pow(10,m),w=Math.round(a*s*h),p=w+"";if(p.indexOf("e")>=0)return p;var o=w/h,v=w%h;w<0?(o=0|-Math.ceil(o),v=0|-v):(o=0|Math.floor(o),v|=0);var M=""+o;if(w<0&&(M="-"+M),m){for(var b=""+v;b.length<m;)b="0"+b;return M+"."+b}return M}y.create=function r(a,s){for(var c=[],f=0;f<3;++f){for(var m=[],w=0;w*s[f]<=a[1][f];++w)m.push({x:w*s[f],text:e(s[f],w)});for(w=-1;w*s[f]>=a[0][f];--w)m.push({x:w*s[f],text:e(s[f],w)});c.push(m)}return c},y.equal=function l(a,s){for(var c=0;c<3;++c){if(a[c].length!==s[c].length)return!1;for(var f=0;f<a[c].length;++f){var m=a[c][f],h=s[c][f];if(m.x!==h.x||m.text!==h.text||m.font!==h.font||m.fontColor!==h.fontColor||m.fontSize!==h.fontSize||m.dx!==h.dx||m.dy!==h.dy)return!1}}return!0}},2771:function(u,y,e){"use strict";u.exports=function L(x,S,T,n,O){var d=S.model||m,F=S.view||m,D=S.projection||m,N=S._ortho||!1,k=x.bounds,B=(O=O||a(d,F,D,k,N)).axis;s(h,F,d),s(h,D,h);for(var z=M,U=0;U<3;++U)z[U].lo=1/0,z[U].hi=-1/0,z[U].pixelsPerDataUnit=1/0;var H=r(c(h,h));c(h,h);for(var J=0;J<3;++J){var nt=(J+1)%3,it=(J+2)%3,ut=b;t:for(U=0;U<2;++U){var Q=[];if(B[J]<0!=!!U){ut[J]=k[U][J];for(var j=0;j<2;++j){ut[nt]=k[j^U][nt];for(var Z=0;Z<2;++Z)ut[it]=k[Z^j^U][it],Q.push(ut.slice())}var G=N?5:4;for(j=G;j===G;++j){if(0===Q.length)continue t;Q=l.positive(Q,H[j])}for(j=0;j<Q.length;++j){var K=v(b,h,it=Q[j],T,n);for(Z=0;Z<3;++Z)z[Z].lo=Math.min(z[Z].lo,it[Z]),z[Z].hi=Math.max(z[Z].hi,it[Z]),Z!==J&&(z[Z].pixelsPerDataUnit=Math.min(z[Z].pixelsPerDataUnit,Math.abs(K[Z])))}}}}return z};var r=e(5795),l=e(4670),a=e(2864),s=e(104),c=e(2142),f=e(6342),m=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),h=new Float32Array(16);function w(x,S,T){this.lo=x,this.hi=S,this.pixelsPerDataUnit=T}var p=[0,0,0,1],o=[0,0,0,1];function v(x,S,T,n,E){for(var d=0;d<3;++d){for(var F=p,D=o,N=0;N<3;++N)D[N]=F[N]=T[N];D[3]=F[3]=1,D[d]+=1,f(D,D,S),D[3]<0&&(x[d]=1/0),F[d]-=1,f(F,F,S),F[3]<0&&(x[d]=1/0);var k=(F[0]/F[3]-D[0]/D[3])*n,O=(F[1]/F[3]-D[1]/D[3])*E;x[d]=.25*Math.sqrt(k*k+O*O)}return x}var M=[new w(1/0,-1/0,1/0),new w(1/0,-1/0,1/0),new w(1/0,-1/0,1/0)],b=[0,0,0]},5827:function(u,y,e){"use strict";var r=e(5306),l=e(7498),a=e(5050),s=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function c(o,v,M,b,L){this.gl=o,this.type=v,this.handle=M,this.length=b,this.usage=L}var f=c.prototype;function m(o,v,M,b,L,x){var S=L.length*L.BYTES_PER_ELEMENT;if(x<0)return o.bufferData(v,L,b),S;if(S+x>M)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return o.bufferSubData(v,x,L),M}f.bind=function(){this.gl.bindBuffer(this.type,this.handle)},f.unbind=function(){this.gl.bindBuffer(this.type,null)},f.dispose=function(){this.gl.deleteBuffer(this.handle)},f.update=function(o,v){if("number"!=typeof v&&(v=-1),this.bind(),"object"==typeof o&&void 0!==o.shape){var M=o.dtype;if(s.indexOf(M)<0&&(M="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(M=gl.getExtension("OES_element_index_uint")&&"uint16"!==M?"uint32":"uint16"),M===o.dtype&&function w(o,v){for(var M=1,b=v.length-1;b>=0;--b){if(v[b]!==M)return!1;M*=o[b]}return!0}(o.shape,o.stride))this.length=m(this.gl,this.type,this.length,this.usage,0===o.offset&&o.data.length===o.shape[0]?o.data:o.data.subarray(o.offset,o.shape[0]),v);else{var L=r.malloc(o.size,M),x=a(L,o.shape);l.assign(x,o),this.length=m(this.gl,this.type,this.length,this.usage,v<0?L:L.subarray(0,o.size),v),r.free(L)}}else if(Array.isArray(o)){var S;S=function h(o,v){for(var M=r.malloc(o.length,v),b=o.length,L=0;L<b;++L)M[L]=o[L];return M}(o,this.type===this.gl.ELEMENT_ARRAY_BUFFER?"uint16":"float32"),this.length=m(this.gl,this.type,this.length,this.usage,v<0?S:S.subarray(0,o.length),v),r.free(S)}else if("object"==typeof o&&"number"==typeof o.length)this.length=m(this.gl,this.type,this.length,this.usage,o,v);else{if("number"!=typeof o&&void 0!==o)throw new Error("gl-buffer: Invalid data type");if(v>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(o|=0)<=0&&(o=1),this.gl.bufferData(this.type,0|o,this.usage),this.length=o}},u.exports=function p(o,v,M,b){if(b=b||o.DYNAMIC_DRAW,(M=M||o.ARRAY_BUFFER)!==o.ARRAY_BUFFER&&M!==o.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(b!==o.DYNAMIC_DRAW&&b!==o.STATIC_DRAW&&b!==o.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var L=o.createBuffer(),x=new c(o,M,L,0,b);return x.update(v),x}},1140:function(u,y,e){"use strict";var r=e(2858);u.exports=function(a,s){var c=a.positions,f=a.vectors,m={positions:[],vertexIntensity:[],vertexIntensityBounds:a.vertexIntensityBounds,vectors:[],cells:[],coneOffset:a.coneOffset,colormap:a.colormap};if(0===a.positions.length)return s&&(s[0]=[0,0,0],s[1]=[0,0,0]),m;for(var h=0,w=1/0,p=-1/0,o=1/0,v=-1/0,M=1/0,b=-1/0,L=null,x=null,S=[],T=1/0,n=!1,E=0;E<c.length;E++){var d=c[E];w=Math.min(d[0],w),p=Math.max(d[0],p),o=Math.min(d[1],o),v=Math.max(d[1],v),M=Math.min(d[2],M),b=Math.max(d[2],b);var F=f[E];if(r.length(F)>h&&(h=r.length(F)),E){var D=2*r.distance(L,d)/(r.length(x)+r.length(F));D?(T=Math.min(T,D),n=!1):n=!0}n||(L=d,x=F),S.push(F)}var k=[p,v,b];s&&(s[0]=[w,o,M],s[1]=k),0===h&&(h=1);var O=1/h;isFinite(T)||(T=1),m.vectorScale=T;var B=a.coneSize||.5;a.absoluteConeSize&&(B=a.absoluteConeSize*O),m.coneScale=B,E=0;for(var z=0;E<c.length;E++)for(var U=(d=c[E])[0],H=d[1],J=d[2],nt=S[E],it=r.length(nt)*O,ut=0;ut<8;ut++){m.positions.push([U,H,J,z++]),m.positions.push([U,H,J,z++]),m.positions.push([U,H,J,z++]),m.positions.push([U,H,J,z++]),m.positions.push([U,H,J,z++]),m.positions.push([U,H,J,z++]),m.vectors.push(nt),m.vectors.push(nt),m.vectors.push(nt),m.vectors.push(nt),m.vectors.push(nt),m.vectors.push(nt),m.vertexIntensity.push(it,it,it),m.vertexIntensity.push(it,it,it);var j=m.positions.length;m.cells.push([j-6,j-5,j-4],[j-3,j-2,j-1])}return m};var l=e(7234);u.exports.createMesh=e(5028),u.exports.createConeMesh=function(a,s){return u.exports.createMesh(a,s,{shaders:l,traceType:"cone"})}},5028:function(u,y,e){"use strict";var r=e(5158),l=e(5827),a=e(2944),s=e(8931),c=e(104),f=e(7437),m=e(5050),h=e(9156),w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(S,T,n,E,d,F,D,N,k,O,B){this.gl=S,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=T,this.dirty=!0,this.triShader=n,this.pickShader=E,this.trianglePositions=d,this.triangleVectors=F,this.triangleColors=N,this.triangleUVs=k,this.triangleIds=D,this.triangleVAO=O,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=B,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=w,this._view=w,this._projection=w,this._resolution=[1,1]}var o=p.prototype;function b(S,T){var n=r(S,T.meshShader.vertex,T.meshShader.fragment,null,T.meshShader.attributes);return n.attributes.position.location=0,n.attributes.color.location=2,n.attributes.uv.location=3,n.attributes.vector.location=4,n}function L(S,T){var n=r(S,T.pickShader.vertex,T.pickShader.fragment,null,T.pickShader.attributes);return n.attributes.position.location=0,n.attributes.id.location=1,n.attributes.vector.location=4,n}o.isOpaque=function(){return this.opacity>=1},o.isTransparent=function(){return this.opacity<1},o.pickSlots=1,o.setPickBase=function(S){this.pickId=S},o.update=function(S){S=S||{};var T=this.gl;this.dirty=!0,"lightPosition"in S&&(this.lightPosition=S.lightPosition),"opacity"in S&&(this.opacity=S.opacity),"ambient"in S&&(this.ambientLight=S.ambient),"diffuse"in S&&(this.diffuseLight=S.diffuse),"specular"in S&&(this.specularLight=S.specular),"roughness"in S&&(this.roughness=S.roughness),"fresnel"in S&&(this.fresnel=S.fresnel),void 0!==S.tubeScale&&(this.tubeScale=S.tubeScale),void 0!==S.vectorScale&&(this.vectorScale=S.vectorScale),void 0!==S.coneScale&&(this.coneScale=S.coneScale),void 0!==S.coneOffset&&(this.coneOffset=S.coneOffset),S.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=T.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=T.LINEAR,this.texture.setPixels(function v(S){for(var T=h({colormap:S,nshades:256,format:"rgba"}),n=new Uint8Array(1024),E=0;E<256;++E){for(var d=T[E],F=0;F<3;++F)n[4*E+F]=d[F];n[4*E+3]=255*d[3]}return m(n,[256,256,4],[4,0,1])}(S.colormap)),this.texture.generateMipmap());var n=S.cells,E=S.positions,d=S.vectors;if(E&&n&&d){var F=[],D=[],N=[],k=[],O=[];this.cells=n,this.positions=E,this.vectors=d;var B=S.meshColor||[1,1,1,1],z=S.vertexIntensity,U=1/0,H=-1/0;if(z)if(S.vertexIntensityBounds)U=+S.vertexIntensityBounds[0],H=+S.vertexIntensityBounds[1];else for(var J=0;J<z.length;++J){var nt=z[J];U=Math.min(U,nt),H=Math.max(H,nt)}else for(J=0;J<E.length;++J)nt=E[J][2],U=Math.min(U,nt),H=Math.max(H,nt);for(this.intensity=z||function M(S){for(var T=S.length,n=new Array(T),E=0;E<T;++E)n[E]=S[E][2];return n}(E),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],J=0;J<E.length;++J)for(var it=E[J],ut=0;ut<3;++ut)isNaN(it[ut])||!isFinite(it[ut])||(this.bounds[0][ut]=Math.min(this.bounds[0][ut],it[ut]),this.bounds[1][ut]=Math.max(this.bounds[1][ut],it[ut]));var Q=0;t:for(J=0;J<n.length;++J){var j=n[J];if(3===j.length){for(ut=0;ut<3;++ut){it=E[Z=j[ut]];for(var G=0;G<3;++G)if(isNaN(it[G])||!isFinite(it[G]))continue t}for(ut=0;ut<3;++ut){var Z;F.push((it=E[Z=j[2-ut]])[0],it[1],it[2],it[3]);var K=d[Z];D.push(K[0],K[1],K[2],K[3]||0);var $;N.push(B[0],B[1],B[2],3===B.length?1:B[3]),k.push(($=z?[(z[Z]-U)/(H-U),0]:[(it[2]-U)/(H-U),0])[0],$[1]),O.push(J)}Q+=1}}this.triangleCount=Q,this.trianglePositions.update(F),this.triangleVectors.update(D),this.triangleColors.update(N),this.triangleUVs.update(k),this.triangleIds.update(new Uint32Array(O))}},o.drawTransparent=o.draw=function(S){for(var T=this.gl,n=(S=S||{}).model||w,E=S.view||w,d=S.projection||w,F=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],D=0;D<3;++D)F[0][D]=Math.max(F[0][D],this.clipBounds[0][D]),F[1][D]=Math.min(F[1][D],this.clipBounds[1][D]);var N={model:n,view:E,projection:d,inverseModel:w.slice(),clipBounds:F,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};N.inverseModel=f(N.inverseModel,N.model),T.disable(T.CULL_FACE),this.texture.bind(0);var k=new Array(16);for(c(k,N.view,N.model),c(k,N.projection,k),f(k,k),D=0;D<3;++D)N.eyePosition[D]=k[12+D]/k[15];var O=k[15];for(D=0;D<3;++D)O+=this.lightPosition[D]*k[4*D+3];for(D=0;D<3;++D){for(var B=k[12+D],z=0;z<3;++z)B+=k[4*z+D]*this.lightPosition[z];N.lightPosition[D]=B/O}if(this.triangleCount>0){var U=this.triShader;U.bind(),U.uniforms=N,this.triangleVAO.bind(),T.drawArrays(T.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},o.drawPick=function(S){for(var T=this.gl,n=(S=S||{}).model||w,E=S.view||w,d=S.projection||w,F=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],D=0;D<3;++D)F[0][D]=Math.max(F[0][D],this.clipBounds[0][D]),F[1][D]=Math.min(F[1][D],this.clipBounds[1][D]);this._model=[].slice.call(n),this._view=[].slice.call(E),this._projection=[].slice.call(d),this._resolution=[T.drawingBufferWidth,T.drawingBufferHeight];var N={model:n,view:E,projection:d,clipBounds:F,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},k=this.pickShader;k.bind(),k.uniforms=N,this.triangleCount>0&&(this.triangleVAO.bind(),T.drawArrays(T.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},o.pick=function(S){if(!S||S.id!==this.pickId)return null;var T=S.value[0]+256*S.value[1]+65536*S.value[2],n=this.cells[T],E=this.positions[n[1]].slice(0,3),d={position:E,dataCoordinate:E,index:Math.floor(n[1]/48)};return"cone"===this.traceType?d.index=Math.floor(n[1]/48):"streamtube"===this.traceType&&(d.intensity=this.intensity[n[1]],d.velocity=this.vectors[n[1]].slice(0,3),d.divergence=this.vectors[n[1]][3],d.index=T),d},o.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},u.exports=function x(S,T,n){var E=n.shaders;1===arguments.length&&(S=(T=S).gl);var d=b(S,E),F=L(S,E),D=s(S,m(new Uint8Array([255,255,255,255]),[1,1,4]));D.generateMipmap(),D.minFilter=S.LINEAR_MIPMAP_LINEAR,D.magFilter=S.LINEAR;var N=l(S),k=l(S),O=l(S),B=l(S),z=l(S),H=new p(S,D,d,F,N,k,z,O,B,a(S,[{buffer:N,type:S.FLOAT,size:4},{buffer:z,type:S.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:O,type:S.FLOAT,size:4},{buffer:B,type:S.FLOAT,size:2},{buffer:k,type:S.FLOAT,size:4}]),n.traceType||"cone");return H.update(T),H}},7234:function(u,y,e){var r=e(6832),l=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),a=r(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),s=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),c=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);y.meshShader={vertex:l,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},y.pickShader={vertex:s,fragment:c,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(u){u.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(u,y,e){var r=e(1950);u.exports=function(a){return r[a]}},3110:function(u,y,e){"use strict";u.exports=function p(o){var v=o.gl,M=r(v),b=l(v,[{buffer:M,type:v.FLOAT,size:3,offset:0,stride:40},{buffer:M,type:v.FLOAT,size:4,offset:12,stride:40},{buffer:M,type:v.FLOAT,size:3,offset:28,stride:40}]),L=a(v);L.attributes.position.location=0,L.attributes.color.location=1,L.attributes.offset.location=2;var x=new c(v,M,b,L);return x.update(o),x};var r=e(5827),l=e(2944),a=e(7667),s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(o,v,M,b){this.gl=o,this.shader=b,this.buffer=v,this.vao=M,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var f=c.prototype;function m(o,v){for(var M=0;M<3;++M)o[0][M]=Math.min(o[0][M],v[M]),o[1][M]=Math.max(o[1][M],v[M])}f.isOpaque=function(){return!this.hasAlpha},f.isTransparent=function(){return this.hasAlpha},f.drawTransparent=f.draw=function(o){var v=this.gl,M=this.shader.uniforms;this.shader.bind();var b=M.view=o.view||s,L=M.projection=o.projection||s;M.model=o.model||s,M.clipBounds=this.clipBounds,M.opacity=this.opacity;var F=(o._ortho?2:1)*this.pixelRatio*(L[3]*b[12]+L[7]*b[13]+L[11]*b[14]+L[15]*b[15])/v.drawingBufferHeight;this.vao.bind();for(var D=0;D<3;++D)v.lineWidth(this.lineWidth[D]*this.pixelRatio),M.capSize=this.capSize[D]*F,this.lineCount[D]&&v.drawArrays(v.LINES,this.lineOffset[D],this.lineCount[D]);this.vao.unbind()};var h=function(){for(var o=new Array(3),v=0;v<3;++v){for(var M=[],b=1;b<=2;++b)for(var L=-1;L<=1;L+=2){var S=[0,0,0];S[(b+v)%3]=L,M.push(S)}o[v]=M}return o}();function w(o,v,M,b){for(var L=h[b],x=0;x<L.length;++x){var S=L[x];o.push(v[0],v[1],v[2],M[0],M[1],M[2],M[3],S[0],S[1],S[2])}return L.length}f.update=function(o){"lineWidth"in(o=o||{})&&(this.lineWidth=o.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in o&&(this.capSize=o.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in o&&(this.opacity=+o.opacity,this.opacity<1&&(this.hasAlpha=!0));var v=o.color||[[0,0,0],[0,0,0],[0,0,0]],M=o.position,b=o.error;if(Array.isArray(v[0])||(v=[v,v,v]),M&&b){var L=[],x=M.length,S=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var T=0;T<3;++T){this.lineOffset[T]=S;t:for(var n=0;n<x;++n){for(var E=M[n],d=0;d<3;++d)if(isNaN(E[d])||!isFinite(E[d]))continue t;var N,F=b[n],D=v[T];Array.isArray(D[0])&&(D=v[n]),3===D.length?D=[D[0],D[1],D[2],1]:4===D.length&&(D=[D[0],D[1],D[2],D[3]],!this.hasAlpha&&D[3]<1&&(this.hasAlpha=!0)),isNaN(F[0][T])||isNaN(F[1][T])||(F[0][T]<0&&((N=E.slice())[T]+=F[0][T],L.push(E[0],E[1],E[2],D[0],D[1],D[2],D[3],0,0,0,N[0],N[1],N[2],D[0],D[1],D[2],D[3],0,0,0),m(this.bounds,N),S+=2+w(L,N,D,T)),F[1][T]>0&&((N=E.slice())[T]+=F[1][T],L.push(E[0],E[1],E[2],D[0],D[1],D[2],D[3],0,0,0,N[0],N[1],N[2],D[0],D[1],D[2],D[3],0,0,0),m(this.bounds,N),S+=2+w(L,N,D,T)))}this.lineCount[T]=S-this.lineOffset[T]}this.buffer.update(L)}},f.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},7667:function(u,y,e){"use strict";var r=e(6832),l=e(5158),a=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);u.exports=function(c){return l(c,a,s,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(u,y,e){"use strict";var r=e(8931);u.exports=function S(T,n,E,d){a||(a=T.FRAMEBUFFER_UNSUPPORTED,s=T.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,c=T.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,f=T.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var F=T.getExtension("WEBGL_draw_buffers");if(!l&&F&&function w(T,n){var E=T.getParameter(n.MAX_COLOR_ATTACHMENTS_WEBGL);l=new Array(E+1);for(var d=0;d<=E;++d){for(var F=new Array(E),D=0;D<d;++D)F[D]=T.COLOR_ATTACHMENT0+D;for(D=d;D<E;++D)F[D]=T.NONE;l[d]=F}}(T,F),Array.isArray(n)&&(d=E,E=0|n[1],n=0|n[0]),"number"!=typeof n)throw new Error("gl-fbo: Missing shape parameter");var D=T.getParameter(T.MAX_RENDERBUFFER_SIZE);if(n<0||n>D||E<0||E>D)throw new Error("gl-fbo: Parameters are too large for FBO");var N=1;if("color"in(d=d||{})){if((N=Math.max(0|d.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(N>1){if(!F)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(N>T.getParameter(F.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+N+" draw buffers")}}var k=T.UNSIGNED_BYTE,O=T.getExtension("OES_texture_float");if(d.float&&N>0){if(!O)throw new Error("gl-fbo: Context does not support floating point textures");k=T.FLOAT}else d.preferFloat&&N>0&&O&&(k=T.FLOAT);var B=!0;"depth"in d&&(B=!!d.depth);var z=!1;return"stencil"in d&&(z=!!d.stencil),new b(T,n,E,k,N,B,z,F)};var a,s,c,f,l=null;function m(T){return[T.getParameter(T.FRAMEBUFFER_BINDING),T.getParameter(T.RENDERBUFFER_BINDING),T.getParameter(T.TEXTURE_BINDING_2D)]}function h(T,n){T.bindFramebuffer(T.FRAMEBUFFER,n[0]),T.bindRenderbuffer(T.RENDERBUFFER,n[1]),T.bindTexture(T.TEXTURE_2D,n[2])}function p(T){switch(T){case a:throw new Error("gl-fbo: Framebuffer unsupported");case s:throw new Error("gl-fbo: Framebuffer incomplete attachment");case c:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case f:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function o(T,n,E,d,F,D){if(!d)return null;var N=r(T,n,E,F,d);return N.magFilter=T.NEAREST,N.minFilter=T.NEAREST,N.mipSamples=1,N.bind(),T.framebufferTexture2D(T.FRAMEBUFFER,D,T.TEXTURE_2D,N.handle,0),N}function v(T,n,E,d,F){var D=T.createRenderbuffer();return T.bindRenderbuffer(T.RENDERBUFFER,D),T.renderbufferStorage(T.RENDERBUFFER,d,n,E),T.framebufferRenderbuffer(T.FRAMEBUFFER,F,T.RENDERBUFFER,D),D}function b(T,n,E,d,F,D,N,k){this.gl=T,this._shape=[0|n,0|E],this._destroyed=!1,this._ext=k,this.color=new Array(F);for(var O=0;O<F;++O)this.color[O]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=d,this._useDepth=D,this._useStencil=N;var B=this,z=[0|n,0|E];Object.defineProperties(z,{0:{get:function(){return B._shape[0]},set:function(U){return B.width=U}},1:{get:function(){return B._shape[1]},set:function(U){return B.height=U}}}),this._shapeVector=z,function M(T){var n=m(T.gl),E=T.gl,d=T.handle=E.createFramebuffer(),F=T._shape[0],D=T._shape[1],N=T.color.length,k=T._ext,O=T._useStencil,B=T._useDepth,z=T._colorType;E.bindFramebuffer(E.FRAMEBUFFER,d);for(var U=0;U<N;++U)T.color[U]=o(E,F,D,z,E.RGBA,E.COLOR_ATTACHMENT0+U);0===N?(T._color_rb=v(E,F,D,E.RGBA4,E.COLOR_ATTACHMENT0),k&&k.drawBuffersWEBGL(l[0])):N>1&&k.drawBuffersWEBGL(l[N]);var H=E.getExtension("WEBGL_depth_texture");H?O?T.depth=o(E,F,D,H.UNSIGNED_INT_24_8_WEBGL,E.DEPTH_STENCIL,E.DEPTH_STENCIL_ATTACHMENT):B&&(T.depth=o(E,F,D,E.UNSIGNED_SHORT,E.DEPTH_COMPONENT,E.DEPTH_ATTACHMENT)):B&&O?T._depth_rb=v(E,F,D,E.DEPTH_STENCIL,E.DEPTH_STENCIL_ATTACHMENT):B?T._depth_rb=v(E,F,D,E.DEPTH_COMPONENT16,E.DEPTH_ATTACHMENT):O&&(T._depth_rb=v(E,F,D,E.STENCIL_INDEX,E.STENCIL_ATTACHMENT));var J=E.checkFramebufferStatus(E.FRAMEBUFFER);if(J!==E.FRAMEBUFFER_COMPLETE){for(T._destroyed=!0,E.bindFramebuffer(E.FRAMEBUFFER,null),E.deleteFramebuffer(T.handle),T.handle=null,T.depth&&(T.depth.dispose(),T.depth=null),T._depth_rb&&(E.deleteRenderbuffer(T._depth_rb),T._depth_rb=null),U=0;U<T.color.length;++U)T.color[U].dispose(),T.color[U]=null;T._color_rb&&(E.deleteRenderbuffer(T._color_rb),T._color_rb=null),h(E,n),p(J)}h(E,n)}(this)}var L=b.prototype;function x(T,n,E){if(T._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(T._shape[0]!==n||T._shape[1]!==E){var d=T.gl,F=d.getParameter(d.MAX_RENDERBUFFER_SIZE);if(n<0||n>F||E<0||E>F)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");T._shape[0]=n,T._shape[1]=E;for(var D=m(d),N=0;N<T.color.length;++N)T.color[N].shape=T._shape;T._color_rb&&(d.bindRenderbuffer(d.RENDERBUFFER,T._color_rb),d.renderbufferStorage(d.RENDERBUFFER,d.RGBA4,T._shape[0],T._shape[1])),T.depth&&(T.depth.shape=T._shape),T._depth_rb&&(d.bindRenderbuffer(d.RENDERBUFFER,T._depth_rb),T._useDepth&&T._useStencil?d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_STENCIL,T._shape[0],T._shape[1]):T._useDepth?d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_COMPONENT16,T._shape[0],T._shape[1]):T._useStencil&&d.renderbufferStorage(d.RENDERBUFFER,d.STENCIL_INDEX,T._shape[0],T._shape[1])),d.bindFramebuffer(d.FRAMEBUFFER,T.handle);var k=d.checkFramebufferStatus(d.FRAMEBUFFER);k!==d.FRAMEBUFFER_COMPLETE&&(T.dispose(),h(d,D),p(k)),h(d,D)}}Object.defineProperties(L,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(T){if(Array.isArray(T)||(T=[0|T,0|T]),2!==T.length)throw new Error("gl-fbo: Shape vector must be length 2");var n=0|T[0],E=0|T[1];return x(this,n,E),[n,E]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(T){return x(this,T|=0,this._shape[1]),T},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(T){return x(this,this._shape[0],T|=0),T},enumerable:!1}}),L.bind=function(){if(!this._destroyed){var T=this.gl;T.bindFramebuffer(T.FRAMEBUFFER,this.handle),T.viewport(0,0,this._shape[0],this._shape[1])}},L.dispose=function(){if(!this._destroyed){this._destroyed=!0;var T=this.gl;T.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(T.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var n=0;n<this.color.length;++n)this.color[n].dispose(),this.color[n]=null;this._color_rb&&(T.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},3530:function(u,y,e){var r=e(8974).sprintf,l=e(6603),a=e(9365),s=e(8008);u.exports=function c(f,m,h){"use strict";var w=a(m)||"of unknown name (see npm glsl-shader-name)",p="unknown type";void 0!==h&&(p=h===l.FRAGMENT_SHADER?"fragment":"vertex");for(var o=r("Error compiling %s shader %s:\n",p,w),v=r("%s%s",o,f),M=f.split("\n"),b={},L=0;L<M.length;L++){var x=M[L];if(""!==x&&"\0"!==x){var S=parseInt(x.split(":")[2]);if(isNaN(S))throw new Error(r("Could not parse error: %s",x));b[S]=x}}var T=s(m).split("\n");for(L=0;L<T.length;L++)if((b[L+3]||b[L+2]||b[L+1])&&(o+=T[L]+"\n",b[L+1])){var E=b[L+1];E=E.substr(E.split(":",3).join(":").length+1).trim(),o+=r("^^^ %s\n\n",E)}return{long:o.trim(),short:v.trim()}}},6386:function(u,y,e){"use strict";u.exports=function p(o,v){var M=o.gl,E=new m(o,s(M,f.vertex,f.fragment),s(M,f.pickVertex,f.pickFragment),c(M),c(M),c(M),c(M));return E.update(v),o.addObject(E),E};var r=e(5070),l=e(9560),a=e(5306),s=e(5158),c=e(5827),f=e(1292);function m(o,v,M,b,L,x,S){this.plot=o,this.shader=v,this.pickShader=M,this.positionBuffer=b,this.weightBuffer=L,this.colorBuffer=x,this.idBuffer=S,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var o,h=m.prototype,w=[0,0,1,0,0,1,1,0,1,1,0,1];h.draw=(o=[1,0,0,0,1,0,0,0,1],function(){var v=this.plot,M=this.shader,b=this.bounds,L=this.numVertices;if(!(L<=0)){var x=v.gl,S=v.dataBox,n=b[3]-b[1],E=S[2]-S[0],d=S[3]-S[1];o[0]=2*(b[2]-b[0])/E,o[4]=2*n/d,o[6]=2*(b[0]-S[0])/E-1,o[7]=2*(b[1]-S[1])/d-1,M.bind();var F=M.uniforms;F.viewTransform=o,F.shape=this.shape;var D=M.attributes;this.positionBuffer.bind(),D.position.pointer(),this.weightBuffer.bind(),D.weight.pointer(x.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),D.color.pointer(x.UNSIGNED_BYTE,!0),x.drawArrays(x.TRIANGLES,0,L)}}),h.drawPick=function(){var o=[1,0,0,0,1,0,0,0,1],v=[0,0,0,0];return function(M){var b=this.plot,L=this.pickShader,x=this.bounds,S=this.numVertices;if(!(S<=0)){var T=b.gl,n=b.dataBox,d=x[3]-x[1],F=n[2]-n[0],D=n[3]-n[1];o[0]=2*(x[2]-x[0])/F,o[4]=2*d/D,o[6]=2*(x[0]-n[0])/F-1,o[7]=2*(x[1]-n[1])/D-1;for(var N=0;N<4;++N)v[N]=M>>8*N&255;this.pickOffset=M,L.bind();var k=L.uniforms;k.viewTransform=o,k.pickOffset=v,k.shape=this.shape;var O=L.attributes;return this.positionBuffer.bind(),O.position.pointer(),this.weightBuffer.bind(),O.weight.pointer(T.UNSIGNED_BYTE,!1),this.idBuffer.bind(),O.pickId.pointer(T.UNSIGNED_BYTE,!1),T.drawArrays(T.TRIANGLES,0,S),M+this.shape[0]*this.shape[1]}}}(),h.pick=function(o,v,M){var b=this.pickOffset;if(M<b||M>=b+this.shape[0]*this.shape[1])return null;var x=M-b;return{object:this,pointId:x,dataCoord:[this.xData[x%this.shape[0]],this.yData[x/this.shape[0]|0]]}},h.update=function(o){var v=(o=o||{}).shape||[0,0],M=o.x||l(v[0]),b=o.y||l(v[1]),L=o.z||new Float32Array(v[0]*v[1]),x=!1!==o.zsmooth;this.xData=M,this.yData=b;var d,F,D,N,S=o.colorLevels||[0],T=o.colorValues||[0,0,0,1],n=S.length,E=this.bounds;x?(d=E[0]=M[0],F=E[1]=b[0],D=E[2]=M[M.length-1],N=E[3]=b[b.length-1]):(d=E[0]=M[0]+(M[1]-M[0])/2,F=E[1]=b[0]+(b[1]-b[0])/2,D=E[2]=M[M.length-1]+(M[M.length-1]-M[M.length-2])/2,N=E[3]=b[b.length-1]+(b[b.length-1]-b[b.length-2])/2);var k=1/(D-d),O=1/(N-F),B=v[0],z=v[1];this.shape=[B,z];var U=(x?(B-1)*(z-1):B*z)*(w.length>>>1);this.numVertices=U;for(var H=a.mallocUint8(4*U),J=a.mallocFloat32(2*U),nt=a.mallocUint8(2*U),it=a.mallocUint32(U),ut=0,Q=x?B-1:B,j=x?z-1:z,Z=0;Z<j;++Z){var G,K;x?(G=O*(b[Z]-F),K=O*(b[Z+1]-F)):(G=Z<z-1?O*(b[Z]-(b[Z+1]-b[Z])/2-F):O*(b[Z]-(b[Z]-b[Z-1])/2-F),K=Z<z-1?O*(b[Z]+(b[Z+1]-b[Z])/2-F):O*(b[Z]+(b[Z]-b[Z-1])/2-F));for(var at=0;at<Q;++at){var $,X;x?($=k*(M[at]-d),X=k*(M[at+1]-d)):($=at<B-1?k*(M[at]-(M[at+1]-M[at])/2-d):k*(M[at]-(M[at]-M[at-1])/2-d),X=at<B-1?k*(M[at]+(M[at+1]-M[at])/2-d):k*(M[at]+(M[at]-M[at-1])/2-d));for(var rt=0;rt<w.length;rt+=2){var Lt,It,Mt,xt,et=w[rt],st=w[rt+1],bt=L[x?(Z+st)*B+(at+et):Z*B+at],gt=r.le(S,bt);if(gt<0)Lt=T[0],It=T[1],Mt=T[2],xt=T[3];else if(gt===n-1)Lt=T[4*n-4],It=T[4*n-3],Mt=T[4*n-2],xt=T[4*n-1];else{var At=(bt-S[gt])/(S[gt+1]-S[gt]),Gt=1-At,Wt=4*gt,Pt=4*(gt+1);Lt=Gt*T[Wt]+At*T[Pt],It=Gt*T[Wt+1]+At*T[Pt+1],Mt=Gt*T[Wt+2]+At*T[Pt+2],xt=Gt*T[Wt+3]+At*T[Pt+3]}H[4*ut]=255*Lt,H[4*ut+1]=255*It,H[4*ut+2]=255*Mt,H[4*ut+3]=255*xt,J[2*ut]=.5*$+.5*X,J[2*ut+1]=.5*G+.5*K,nt[2*ut]=et,nt[2*ut+1]=st,it[ut]=Z*B+at,ut+=1}}}this.positionBuffer.update(J),this.weightBuffer.update(nt),this.colorBuffer.update(H),this.idBuffer.update(it),a.free(J),a.free(H),a.free(nt),a.free(it)},h.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},1292:function(u,y,e){"use strict";var r=e(6832);u.exports={fragment:r(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:r(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},248:function(u,y,e){var r=e(6832),l=e(5158),a=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),c=r(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),f=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];y.createShader=function(m){return l(m,a,s,null,f)},y.createPickShader=function(m){return l(m,a,c,null,f)}},6086:function(u,y,e){"use strict";u.exports=function T(n){var E=n.gl||n.scene&&n.scene.gl,d=p(E);d.attributes.position.location=0,d.attributes.nextPosition.location=1,d.attributes.arcLength.location=2,d.attributes.lineWidth.location=3,d.attributes.color.location=4;var F=o(E);F.attributes.position.location=0,F.attributes.nextPosition.location=1,F.attributes.arcLength.location=2,F.attributes.lineWidth.location=3,F.attributes.color.location=4;for(var D=r(E),N=l(E,[{buffer:D,size:3,offset:0,stride:48},{buffer:D,size:3,offset:12,stride:48},{buffer:D,size:1,offset:24,stride:48},{buffer:D,size:1,offset:28,stride:48},{buffer:D,size:4,offset:32,stride:48}]),k=h(new Array(1024),[256,1,4]),O=0;O<1024;++O)k.data[O]=255;var B=a(E,k);B.wrap=E.REPEAT;var z=new x(E,d,F,D,N,B);return z.update(n),z};var r=e(5827),l=e(2944),a=e(8931),s=new Uint8Array(4),c=new Float32Array(s.buffer);var m=e(5070),h=e(5050),w=e(248),p=w.createShader,o=w.createPickShader,v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function M(n,E){for(var d=0,F=0;F<3;++F){var D=n[F]-E[F];d+=D*D}return Math.sqrt(d)}function b(n){for(var E=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],d=0;d<3;++d)E[0][d]=Math.max(n[0][d],E[0][d]),E[1][d]=Math.min(n[1][d],E[1][d]);return E}function L(n,E,d,F){this.arcLength=n,this.position=E,this.index=d,this.dataCoordinate=F}function x(n,E,d,F,D,N){this.gl=n,this.shader=E,this.pickShader=d,this.buffer=F,this.vao=D,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=N,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var S=x.prototype;S.isTransparent=function(){return this.hasAlpha},S.isOpaque=function(){return!this.hasAlpha},S.pickSlots=1,S.setPickBase=function(n){this.pickId=n},S.drawTransparent=S.draw=function(n){if(this.vertexCount){var E=this.gl,d=this.shader,F=this.vao;d.bind(),d.uniforms={model:n.model||v,view:n.view||v,projection:n.projection||v,clipBounds:b(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[E.drawingBufferWidth,E.drawingBufferHeight],pixelRatio:this.pixelRatio},F.bind(),F.draw(E.TRIANGLE_STRIP,this.vertexCount),F.unbind()}},S.drawPick=function(n){if(this.vertexCount){var E=this.gl,d=this.pickShader,F=this.vao;d.bind(),d.uniforms={model:n.model||v,view:n.view||v,projection:n.projection||v,pickId:this.pickId,clipBounds:b(this.clipBounds),screenShape:[E.drawingBufferWidth,E.drawingBufferHeight],pixelRatio:this.pixelRatio},F.bind(),F.draw(E.TRIANGLE_STRIP,this.vertexCount),F.unbind()}},S.update=function(n){var E,d;this.dirty=!0;var F=!!n.connectGaps;"dashScale"in n&&(this.dashScale=n.dashScale),this.hasAlpha=!1,"opacity"in n&&(this.opacity=+n.opacity,this.opacity<1&&(this.hasAlpha=!0));var D=[],N=[],k=[],O=0,B=0,z=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],U=n.position||n.positions;if(U){var H=n.color||n.colors||[0,0,0,1],J=n.lineWidth||1,nt=!1;t:for(E=1;E<U.length;++E){var j,Z,G,it=U[E-1],ut=U[E];for(N.push(O),k.push(it.slice()),d=0;d<3;++d){if(isNaN(it[d])||isNaN(ut[d])||!isFinite(it[d])||!isFinite(ut[d])){if(!F&&D.length>0){for(var Q=0;Q<24;++Q)D.push(D[D.length-12]);B+=2,nt=!0}continue t}z[0][d]=Math.min(z[0][d],it[d],ut[d]),z[1][d]=Math.max(z[1][d],it[d],ut[d])}Array.isArray(H[0])?(j=H.length>E-1?H[E-1]:H.length>0?H[H.length-1]:[0,0,0,1],Z=H.length>E?H[E]:H.length>0?H[H.length-1]:[0,0,0,1]):j=Z=H,3===j.length&&(j=[j[0],j[1],j[2],1]),3===Z.length&&(Z=[Z[0],Z[1],Z[2],1]),!this.hasAlpha&&j[3]<1&&(this.hasAlpha=!0),G=Array.isArray(J)?J.length>E-1?J[E-1]:J.length>0?J[J.length-1]:[0,0,0,1]:J;var K=O;if(O+=M(it,ut),nt){for(d=0;d<2;++d)D.push(it[0],it[1],it[2],ut[0],ut[1],ut[2],K,G,j[0],j[1],j[2],j[3]);B+=2,nt=!1}D.push(it[0],it[1],it[2],ut[0],ut[1],ut[2],K,G,j[0],j[1],j[2],j[3],it[0],it[1],it[2],ut[0],ut[1],ut[2],K,-G,j[0],j[1],j[2],j[3],ut[0],ut[1],ut[2],it[0],it[1],it[2],O,-G,Z[0],Z[1],Z[2],Z[3],ut[0],ut[1],ut[2],it[0],it[1],it[2],O,G,Z[0],Z[1],Z[2],Z[3]),B+=4}}if(this.buffer.update(D),N.push(O),k.push(U[U.length-1].slice()),this.bounds=z,this.vertexCount=B,this.points=k,this.arcLength=N,"dashes"in n){var $=n.dashes.slice();for($.unshift(0),E=1;E<$.length;++E)$[E]=$[E-1]+$[E];var X=h(new Array(1024),[256,1,4]);for(E=0;E<256;++E){for(d=0;d<4;++d)X.set(E,0,d,0);1&m.le($,$[$.length-1]*E/255)?X.set(E,0,0,0):X.set(E,0,0,255)}this.texture.setPixels(X)}},S.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},S.pick=function(n){if(!n||n.id!==this.pickId)return null;var E=function f(n,E,d,F){return s[0]=F,s[1]=d,s[2]=E,s[3]=n,c[0]}(n.value[0],n.value[1],n.value[2],0),d=m.le(this.arcLength,E);if(d<0)return null;if(d===this.arcLength.length-1)return new L(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),d);for(var F=this.points[d],D=this.points[Math.min(d+1,this.points.length-1)],N=(E-this.arcLength[d])/(this.arcLength[d+1]-this.arcLength[d]),k=1-N,O=[0,0,0],B=0;B<3;++B)O[B]=k*F[B]+N*D[B];var z=Math.min(N<.5?d:d+1,this.points.length-1);return new L(E,O,z,this.points[z])}},7332:function(u){u.exports=function y(e){var r=new Float32Array(16);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}},9823:function(u){u.exports=function y(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},7787:function(u){u.exports=function y(e){var r=e[0],l=e[1],a=e[2],s=e[3],c=e[4],f=e[5],m=e[6],h=e[7],w=e[8],p=e[9],o=e[10],v=e[11],M=e[12],b=e[13],L=e[14],x=e[15];return(r*f-l*c)*(o*x-v*L)-(r*m-a*c)*(p*x-v*b)+(r*h-s*c)*(p*L-o*b)+(l*m-a*f)*(w*x-v*M)-(l*h-s*f)*(w*L-o*M)+(a*h-s*m)*(w*b-p*M)}},5950:function(u){u.exports=function y(e,r){var l=r[0],a=r[1],s=r[2],c=r[3],f=l+l,m=a+a,h=s+s,w=l*f,p=a*f,o=a*m,v=s*f,M=s*m,b=s*h,L=c*f,x=c*m,S=c*h;return e[0]=1-o-b,e[1]=p+S,e[2]=v-x,e[3]=0,e[4]=p-S,e[5]=1-w-b,e[6]=M+L,e[7]=0,e[8]=v+x,e[9]=M-L,e[10]=1-w-o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},7280:function(u){u.exports=function y(e,r,l){var a=r[0],s=r[1],c=r[2],f=r[3],m=a+a,h=s+s,w=c+c,p=a*m,o=a*h,v=a*w,M=s*h,b=s*w,L=c*w,x=f*m,S=f*h,T=f*w;return e[0]=1-(M+L),e[1]=o+T,e[2]=v-S,e[3]=0,e[4]=o-T,e[5]=1-(p+L),e[6]=b+x,e[7]=0,e[8]=v+S,e[9]=b-x,e[10]=1-(p+M),e[11]=0,e[12]=l[0],e[13]=l[1],e[14]=l[2],e[15]=1,e}},9947:function(u){u.exports=function y(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},7437:function(u){u.exports=function y(e,r){var l=r[0],a=r[1],s=r[2],c=r[3],f=r[4],m=r[5],h=r[6],w=r[7],p=r[8],o=r[9],v=r[10],M=r[11],b=r[12],L=r[13],x=r[14],S=r[15],T=l*m-a*f,n=l*h-s*f,E=l*w-c*f,d=a*h-s*m,F=a*w-c*m,D=s*w-c*h,N=p*L-o*b,k=p*x-v*b,O=p*S-M*b,B=o*x-v*L,z=o*S-M*L,U=v*S-M*x,H=T*U-n*z+E*B+d*O-F*k+D*N;return H?(e[0]=(m*U-h*z+w*B)*(H=1/H),e[1]=(s*z-a*U-c*B)*H,e[2]=(L*D-x*F+S*d)*H,e[3]=(v*F-o*D-M*d)*H,e[4]=(h*O-f*U-w*k)*H,e[5]=(l*U-s*O+c*k)*H,e[6]=(x*E-b*D-S*n)*H,e[7]=(p*D-v*E+M*n)*H,e[8]=(f*z-m*O+w*N)*H,e[9]=(a*O-l*z-c*N)*H,e[10]=(b*F-L*E+S*T)*H,e[11]=(o*E-p*F-M*T)*H,e[12]=(m*k-f*B-h*N)*H,e[13]=(l*B-a*k+s*N)*H,e[14]=(L*n-b*d-x*T)*H,e[15]=(p*d-o*n+v*T)*H,e):null}},3012:function(u,y,e){var r=e(9947);u.exports=function l(a,s,c,f){var m,h,w,p,o,v,M,b,L,x,S=s[0],T=s[1],n=s[2],E=f[0],d=f[1],F=f[2],D=c[0],N=c[1],k=c[2];return Math.abs(S-D)<1e-6&&Math.abs(T-N)<1e-6&&Math.abs(n-k)<1e-6?r(a):(M=S-D,b=T-N,L=n-k,m=d*(L*=x=1/Math.sqrt(M*M+b*b+L*L))-F*(b*=x),h=F*(M*=x)-E*L,w=E*b-d*M,(x=Math.sqrt(m*m+h*h+w*w))?(m*=x=1/x,h*=x,w*=x):(m=0,h=0,w=0),p=b*w-L*h,o=L*m-M*w,v=M*h-b*m,(x=Math.sqrt(p*p+o*o+v*v))?(p*=x=1/x,o*=x,v*=x):(p=0,o=0,v=0),a[0]=m,a[1]=p,a[2]=M,a[3]=0,a[4]=h,a[5]=o,a[6]=b,a[7]=0,a[8]=w,a[9]=v,a[10]=L,a[11]=0,a[12]=-(m*S+h*T+w*n),a[13]=-(p*S+o*T+v*n),a[14]=-(M*S+b*T+L*n),a[15]=1,a)}},104:function(u){u.exports=function y(e,r,l){var a=r[0],s=r[1],c=r[2],f=r[3],m=r[4],h=r[5],w=r[6],p=r[7],o=r[8],v=r[9],M=r[10],b=r[11],L=r[12],x=r[13],S=r[14],T=r[15],n=l[0],E=l[1],d=l[2],F=l[3];return e[0]=n*a+E*m+d*o+F*L,e[1]=n*s+E*h+d*v+F*x,e[2]=n*c+E*w+d*M+F*S,e[3]=n*f+E*p+d*b+F*T,e[4]=(n=l[4])*a+(E=l[5])*m+(d=l[6])*o+(F=l[7])*L,e[5]=n*s+E*h+d*v+F*x,e[6]=n*c+E*w+d*M+F*S,e[7]=n*f+E*p+d*b+F*T,e[8]=(n=l[8])*a+(E=l[9])*m+(d=l[10])*o+(F=l[11])*L,e[9]=n*s+E*h+d*v+F*x,e[10]=n*c+E*w+d*M+F*S,e[11]=n*f+E*p+d*b+F*T,e[12]=(n=l[12])*a+(E=l[13])*m+(d=l[14])*o+(F=l[15])*L,e[13]=n*s+E*h+d*v+F*x,e[14]=n*c+E*w+d*M+F*S,e[15]=n*f+E*p+d*b+F*T,e}},5268:function(u){u.exports=function y(e,r,l,a,s,c,f){var m=1/(r-l),h=1/(a-s),w=1/(c-f);return e[0]=-2*m,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*h,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*w,e[11]=0,e[12]=(r+l)*m,e[13]=(s+a)*h,e[14]=(f+c)*w,e[15]=1,e}},1120:function(u){u.exports=function y(e,r,l,a,s){var c=1/Math.tan(r/2),f=1/(a-s);return e[0]=c/l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(s+a)*f,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*s*a*f,e[15]=0,e}},4422:function(u){u.exports=function y(e,r,l,a){var h,w,p,o,v,M,b,L,x,S,T,n,E,d,F,D,N,k,O,B,z,U,H,J,s=a[0],c=a[1],f=a[2],m=Math.sqrt(s*s+c*c+f*f);return Math.abs(m)<1e-6?null:(s*=m=1/m,c*=m,f*=m,h=Math.sin(l),w=Math.cos(l),v=r[1],M=r[2],b=r[3],x=r[5],S=r[6],T=r[7],E=r[9],d=r[10],F=r[11],O=s*c*(p=1-w)-f*h,B=c*c*p+w,z=f*c*p+s*h,U=s*f*p+c*h,H=c*f*p-s*h,J=f*f*p+w,e[0]=(o=r[0])*(D=s*s*p+w)+(L=r[4])*(N=c*s*p+f*h)+(n=r[8])*(k=f*s*p-c*h),e[1]=v*D+x*N+E*k,e[2]=M*D+S*N+d*k,e[3]=b*D+T*N+F*k,e[4]=o*O+L*B+n*z,e[5]=v*O+x*B+E*z,e[6]=M*O+S*B+d*z,e[7]=b*O+T*B+F*z,e[8]=o*U+L*H+n*J,e[9]=v*U+x*H+E*J,e[10]=M*U+S*H+d*J,e[11]=b*U+T*H+F*J,r!==e&&(e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e)}},6109:function(u){u.exports=function y(e,r,l){var a=Math.sin(l),s=Math.cos(l),c=r[4],f=r[5],m=r[6],h=r[7],w=r[8],p=r[9],o=r[10],v=r[11];return r!==e&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[4]=c*s+w*a,e[5]=f*s+p*a,e[6]=m*s+o*a,e[7]=h*s+v*a,e[8]=w*s-c*a,e[9]=p*s-f*a,e[10]=o*s-m*a,e[11]=v*s-h*a,e}},7115:function(u){u.exports=function y(e,r,l){var a=Math.sin(l),s=Math.cos(l),c=r[0],f=r[1],m=r[2],h=r[3],w=r[8],p=r[9],o=r[10],v=r[11];return r!==e&&(e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=c*s-w*a,e[1]=f*s-p*a,e[2]=m*s-o*a,e[3]=h*s-v*a,e[8]=c*a+w*s,e[9]=f*a+p*s,e[10]=m*a+o*s,e[11]=h*a+v*s,e}},5240:function(u){u.exports=function y(e,r,l){var a=Math.sin(l),s=Math.cos(l),c=r[0],f=r[1],m=r[2],h=r[3],w=r[4],p=r[5],o=r[6],v=r[7];return r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=c*s+w*a,e[1]=f*s+p*a,e[2]=m*s+o*a,e[3]=h*s+v*a,e[4]=w*s-c*a,e[5]=p*s-f*a,e[6]=o*s-m*a,e[7]=v*s-h*a,e}},3668:function(u){u.exports=function y(e,r,l){var a=l[0],s=l[1],c=l[2];return e[0]=r[0]*a,e[1]=r[1]*a,e[2]=r[2]*a,e[3]=r[3]*a,e[4]=r[4]*s,e[5]=r[5]*s,e[6]=r[6]*s,e[7]=r[7]*s,e[8]=r[8]*c,e[9]=r[9]*c,e[10]=r[10]*c,e[11]=r[11]*c,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}},998:function(u){u.exports=function y(e,r,l){var f,m,h,w,p,o,v,M,b,L,x,S,a=l[0],s=l[1],c=l[2];return r===e?(e[12]=r[0]*a+r[4]*s+r[8]*c+r[12],e[13]=r[1]*a+r[5]*s+r[9]*c+r[13],e[14]=r[2]*a+r[6]*s+r[10]*c+r[14],e[15]=r[3]*a+r[7]*s+r[11]*c+r[15]):(m=r[1],h=r[2],w=r[3],p=r[4],o=r[5],v=r[6],M=r[7],b=r[8],L=r[9],x=r[10],S=r[11],e[0]=f=r[0],e[1]=m,e[2]=h,e[3]=w,e[4]=p,e[5]=o,e[6]=v,e[7]=M,e[8]=b,e[9]=L,e[10]=x,e[11]=S,e[12]=f*a+p*s+b*c+r[12],e[13]=m*a+o*s+L*c+r[13],e[14]=h*a+v*s+x*c+r[14],e[15]=w*a+M*s+S*c+r[15]),e}},2142:function(u){u.exports=function y(e,r){if(e===r){var l=r[1],a=r[2],s=r[3],c=r[6],f=r[7],m=r[11];e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=l,e[6]=r[9],e[7]=r[13],e[8]=a,e[9]=c,e[11]=r[14],e[12]=s,e[13]=f,e[14]=m}else e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=r[1],e[5]=r[5],e[6]=r[9],e[7]=r[13],e[8]=r[2],e[9]=r[6],e[10]=r[10],e[11]=r[14],e[12]=r[3],e[13]=r[7],e[14]=r[11],e[15]=r[15];return e}},4340:function(u,y,e){"use strict";var r=e(957),l=e(7309);function a(h,w){for(var p=[0,0,0,0],o=0;o<4;++o)for(var v=0;v<4;++v)p[v]+=h[4*o+v]*w[o];return p}function s(h,w,p,o,v){for(var M=a(o,a(p,a(w,[h[0],h[1],h[2],1]))),b=0;b<3;++b)M[b]/=M[3];return[.5*v[0]*(1+M[0]),.5*v[1]*(1-M[1])]}function f(h,w){for(var p=[0,0,0],o=0;o<h.length;++o)for(var v=h[o],M=w[o],b=0;b<3;++b)p[b]+=M*v[b];return p}u.exports=function m(h,w,p,o,v,M){if(1===h.length)return[0,h[0].slice()];for(var b=new Array(h.length),L=0;L<h.length;++L)b[L]=s(h[L],p,o,v,M);var x=0,S=1/0;for(L=0;L<b.length;++L){for(var T=0,n=0;n<2;++n)T+=Math.pow(b[L][n]-w[n],2);T<S&&(S=T,x=L)}var E=function c(h,w){if(2===h.length){for(var p=0,o=0,v=0;v<2;++v)p+=Math.pow(w[v]-h[0][v],2),o+=Math.pow(w[v]-h[1][v],2);return(p=Math.sqrt(p))+(o=Math.sqrt(o))<1e-6?[1,0]:[o/(p+o),p/(o+p)]}if(3===h.length){var M=[0,0];return l(h[0],h[1],h[2],w,M),r(h,M)}return[]}(b,w),d=0;for(L=0;L<3;++L){if(E[L]<-.001||E[L]>1.0001)return null;d+=E[L]}return Math.abs(d-1)>.001?null:[x,f(h,E),E]}},2056:function(u,y,e){var r=e(6832),l=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),a=r(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),c=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),f=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),m=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),h=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),w=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),p=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),o=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),v=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);y.meshShader={vertex:l,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},y.wireShader={vertex:s,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},y.pointShader={vertex:f,fragment:m,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},y.pickShader={vertex:h,fragment:w,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},y.pointPickShader={vertex:p,fragment:w,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},y.contourShader={vertex:o,fragment:v,attributes:[{name:"position",type:"vec3"}]}},8116:function(u,y,e){"use strict";var a=e(5158),s=e(5827),c=e(2944),f=e(8931),m=e(115),h=e(104),w=e(7437),p=e(5050),o=e(9156),v=e(7212),M=e(5306),b=e(2056),L=e(4340),x=b.meshShader,S=b.wireShader,T=b.pointShader,n=b.pickShader,E=b.pointPickShader,d=b.contourShader,F=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function D(Q,j,Z,G,K,at,$,X,rt,et,st,dt,bt,gt,Lt,It,Mt,xt,At,Gt,Wt,Pt,Vt,te,Qt,Bt,Ot){this.gl=Q,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=j,this.dirty=!0,this.triShader=Z,this.lineShader=G,this.pointShader=K,this.pickShader=at,this.pointPickShader=$,this.contourShader=X,this.trianglePositions=rt,this.triangleColors=st,this.triangleNormals=bt,this.triangleUVs=dt,this.triangleIds=et,this.triangleVAO=gt,this.triangleCount=0,this.lineWidth=1,this.edgePositions=Lt,this.edgeColors=Mt,this.edgeUVs=xt,this.edgeIds=It,this.edgeVAO=At,this.edgeCount=0,this.pointPositions=Gt,this.pointColors=Pt,this.pointUVs=Vt,this.pointSizes=te,this.pointIds=Wt,this.pointVAO=Qt,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Bt,this.contourVAO=Ot,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=F,this._view=F,this._projection=F,this._resolution=[1,1]}var N=D.prototype;function k(Q,j){if(!j||!j.length)return 1;for(var Z=0;Z<j.length;++Z){if(j.length<2)return 1;if(j[Z][0]===Q)return j[Z][1];if(j[Z][0]>Q&&Z>0){var G=(j[Z][0]-Q)/(j[Z][0]-j[Z-1][0]);return j[Z][1]*(1-G)+G*j[Z-1][1]}}return 1}function z(Q){var j=a(Q,x.vertex,x.fragment);return j.attributes.position.location=0,j.attributes.color.location=2,j.attributes.uv.location=3,j.attributes.normal.location=4,j}function U(Q){var j=a(Q,S.vertex,S.fragment);return j.attributes.position.location=0,j.attributes.color.location=2,j.attributes.uv.location=3,j}function H(Q){var j=a(Q,T.vertex,T.fragment);return j.attributes.position.location=0,j.attributes.color.location=2,j.attributes.uv.location=3,j.attributes.pointSize.location=4,j}function J(Q){var j=a(Q,n.vertex,n.fragment);return j.attributes.position.location=0,j.attributes.id.location=1,j}function nt(Q){var j=a(Q,E.vertex,E.fragment);return j.attributes.position.location=0,j.attributes.id.location=1,j.attributes.pointSize.location=4,j}function it(Q){var j=a(Q,d.vertex,d.fragment);return j.attributes.position.location=0,j}N.isOpaque=function(){return!this.hasAlpha},N.isTransparent=function(){return this.hasAlpha},N.pickSlots=1,N.setPickBase=function(Q){this.pickId=Q},N.highlight=function(Q){if(Q&&this.contourEnable){for(var j=v(this.cells,this.intensity,Q.intensity),Z=j.cells,G=j.vertexIds,K=j.vertexWeights,at=Z.length,$=M.mallocFloat32(6*at),X=0,rt=0;rt<at;++rt)for(var et=Z[rt],st=0;st<2;++st){var dt=et[0];2===et.length&&(dt=et[st]);for(var Lt=K[dt],It=1-Lt,Mt=this.positions[G[dt][0]],xt=this.positions[G[dt][1]],At=0;At<3;++At)$[X++]=Lt*Mt[At]+It*xt[At]}this.contourCount=X/3|0,this.contourPositions.update($.subarray(0,X)),M.free($)}else this.contourCount=0},N.update=function(Q){Q=Q||{};var j=this.gl;this.dirty=!0,"contourEnable"in Q&&(this.contourEnable=Q.contourEnable),"contourColor"in Q&&(this.contourColor=Q.contourColor),"lineWidth"in Q&&(this.lineWidth=Q.lineWidth),"lightPosition"in Q&&(this.lightPosition=Q.lightPosition),this.hasAlpha=!1,"opacity"in Q&&(this.opacity=Q.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in Q&&(this.opacityscale=Q.opacityscale,this.hasAlpha=!0),"ambient"in Q&&(this.ambientLight=Q.ambient),"diffuse"in Q&&(this.diffuseLight=Q.diffuse),"specular"in Q&&(this.specularLight=Q.specular),"roughness"in Q&&(this.roughness=Q.roughness),"fresnel"in Q&&(this.fresnel=Q.fresnel),Q.texture?(this.texture.dispose(),this.texture=f(j,Q.texture)):Q.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=j.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=j.LINEAR,this.texture.setPixels(function O(Q,j){for(var Z=o({colormap:Q,nshades:256,format:"rgba"}),G=new Uint8Array(1024),K=0;K<256;++K){for(var at=Z[K],$=0;$<3;++$)G[4*K+$]=at[$];G[4*K+3]=j?255*k(K/255,j):255*at[3]}return p(G,[256,256,4],[4,0,1])}(Q.colormap,this.opacityscale)),this.texture.generateMipmap());var Z=Q.cells,G=Q.positions;if(G&&Z){var K=[],at=[],$=[],X=[],rt=[],et=[],st=[],dt=[],bt=[],gt=[],Lt=[],It=[],Mt=[],xt=[];this.cells=Z,this.positions=G;var At=Q.vertexNormals,Gt=Q.cellNormals,Wt=void 0===Q.vertexNormalsEpsilon?1e-6:Q.vertexNormalsEpsilon;Q.useFacetNormals&&!Gt&&(Gt=m.faceNormals(Z,G,void 0===Q.faceNormalsEpsilon?1e-6:Q.faceNormalsEpsilon)),!Gt&&!At&&(At=m.vertexNormals(Z,G,Wt));var Vt=Q.vertexColors,te=Q.cellColors,Qt=Q.meshColor||[1,1,1,1],Bt=Q.vertexUVs,Ot=Q.vertexIntensity,qt=Q.cellUVs,ie=Q.cellIntensity,oe=1/0,pe=-1/0;if(!Bt&&!qt)if(Ot)if(Q.vertexIntensityBounds)oe=+Q.vertexIntensityBounds[0],pe=+Q.vertexIntensityBounds[1];else for(var de=0;de<Ot.length;++de){var Fe=Ot[de];oe=Math.min(oe,Fe),pe=Math.max(pe,Fe)}else if(ie)if(Q.cellIntensityBounds)oe=+Q.cellIntensityBounds[0],pe=+Q.cellIntensityBounds[1];else for(de=0;de<ie.length;++de)Fe=ie[de],oe=Math.min(oe,Fe),pe=Math.max(pe,Fe);else for(de=0;de<G.length;++de)Fe=G[de][2],oe=Math.min(oe,Fe),pe=Math.max(pe,Fe);this.intensity=Ot||ie||function B(Q){for(var j=Q.length,Z=new Array(j),G=0;G<j;++G)Z[G]=Q[G][2];return Z}(G),this.pickVertex=!(ie||te);var Kt=Q.pointSizes,Et=Q.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],de=0;de<G.length;++de)for(var St=G[de],Dt=0;Dt<3;++Dt)isNaN(St[Dt])||!isFinite(St[Dt])||(this.bounds[0][Dt]=Math.min(this.bounds[0][Dt],St[Dt]),this.bounds[1][Dt]=Math.max(this.bounds[1][Dt],St[Dt]));var Ft=0,Nt=0,Rt=0;t:for(de=0;de<Z.length;++de){var wt=Z[de];switch(wt.length){case 1:for(St=G[ft=wt[0]],Dt=0;Dt<3;++Dt)if(isNaN(St[Dt])||!isFinite(St[Dt]))continue t;gt.push(St[0],St[1],St[2]),pt=Vt?Vt[ft]:te?te[de]:Qt,this.opacityscale&&Ot?at.push(pt[0],pt[1],pt[2],this.opacity*k((Ot[ft]-oe)/(pe-oe),this.opacityscale)):3===pt.length?Lt.push(pt[0],pt[1],pt[2],this.opacity):(Lt.push(pt[0],pt[1],pt[2],pt[3]*this.opacity),pt[3]<1&&(this.hasAlpha=!0)),It.push((kt=Bt?Bt[ft]:Ot?[(Ot[ft]-oe)/(pe-oe),0]:qt?qt[de]:ie?[(ie[de]-oe)/(pe-oe),0]:[(St[2]-oe)/(pe-oe),0])[0],kt[1]),Mt.push(Kt?Kt[ft]:Et),xt.push(de),Rt+=1;break;case 2:for(Dt=0;Dt<2;++Dt){St=G[ft=wt[Dt]];for(var Zt=0;Zt<3;++Zt)if(isNaN(St[Zt])||!isFinite(St[Zt]))continue t}for(Dt=0;Dt<2;++Dt)et.push((St=G[ft=wt[Dt]])[0],St[1],St[2]),pt=Vt?Vt[ft]:te?te[de]:Qt,this.opacityscale&&Ot?at.push(pt[0],pt[1],pt[2],this.opacity*k((Ot[ft]-oe)/(pe-oe),this.opacityscale)):3===pt.length?st.push(pt[0],pt[1],pt[2],this.opacity):(st.push(pt[0],pt[1],pt[2],pt[3]*this.opacity),pt[3]<1&&(this.hasAlpha=!0)),dt.push((kt=Bt?Bt[ft]:Ot?[(Ot[ft]-oe)/(pe-oe),0]:qt?qt[de]:ie?[(ie[de]-oe)/(pe-oe),0]:[(St[2]-oe)/(pe-oe),0])[0],kt[1]),bt.push(de);Nt+=1;break;case 3:for(Dt=0;Dt<3;++Dt)for(St=G[ft=wt[Dt]],Zt=0;Zt<3;++Zt)if(isNaN(St[Zt])||!isFinite(St[Zt]))continue t;for(Dt=0;Dt<3;++Dt){var ft,pt,kt,ee;K.push((St=G[ft=wt[2-Dt]])[0],St[1],St[2]),(pt=Vt?Vt[ft]:te?te[de]:Qt)?this.opacityscale&&Ot?at.push(pt[0],pt[1],pt[2],this.opacity*k((Ot[ft]-oe)/(pe-oe),this.opacityscale)):3===pt.length?at.push(pt[0],pt[1],pt[2],this.opacity):(at.push(pt[0],pt[1],pt[2],pt[3]*this.opacity),pt[3]<1&&(this.hasAlpha=!0)):at.push(.5,.5,.5,1),X.push((kt=Bt?Bt[ft]:Ot?[(Ot[ft]-oe)/(pe-oe),0]:qt?qt[de]:ie?[(ie[de]-oe)/(pe-oe),0]:[(St[2]-oe)/(pe-oe),0])[0],kt[1]),$.push((ee=At?At[ft]:Gt[de])[0],ee[1],ee[2]),rt.push(de)}Ft+=1}}this.pointCount=Rt,this.edgeCount=Nt,this.triangleCount=Ft,this.pointPositions.update(gt),this.pointColors.update(Lt),this.pointUVs.update(It),this.pointSizes.update(Mt),this.pointIds.update(new Uint32Array(xt)),this.edgePositions.update(et),this.edgeColors.update(st),this.edgeUVs.update(dt),this.edgeIds.update(new Uint32Array(bt)),this.trianglePositions.update(K),this.triangleColors.update(at),this.triangleUVs.update(X),this.triangleNormals.update($),this.triangleIds.update(new Uint32Array(rt))}},N.drawTransparent=N.draw=function(Q){for(var j=this.gl,Z=(Q=Q||{}).model||F,G=Q.view||F,K=Q.projection||F,at=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],$=0;$<3;++$)at[0][$]=Math.max(at[0][$],this.clipBounds[0][$]),at[1][$]=Math.min(at[1][$],this.clipBounds[1][$]);var X={model:Z,view:G,projection:K,inverseModel:F.slice(),clipBounds:at,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};X.inverseModel=w(X.inverseModel,X.model),j.disable(j.CULL_FACE),this.texture.bind(0);var bt,rt=new Array(16);for(h(rt,X.view,X.model),h(rt,X.projection,rt),w(rt,rt),$=0;$<3;++$)X.eyePosition[$]=rt[12+$]/rt[15];var et=rt[15];for($=0;$<3;++$)et+=this.lightPosition[$]*rt[4*$+3];for($=0;$<3;++$){for(var st=rt[12+$],dt=0;dt<3;++dt)st+=rt[4*dt+$]*this.lightPosition[dt];X.lightPosition[$]=st/et}this.triangleCount>0&&((bt=this.triShader).bind(),bt.uniforms=X,this.triangleVAO.bind(),j.drawArrays(j.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((bt=this.lineShader).bind(),bt.uniforms=X,this.edgeVAO.bind(),j.lineWidth(this.lineWidth*this.pixelRatio),j.drawArrays(j.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((bt=this.pointShader).bind(),bt.uniforms=X,this.pointVAO.bind(),j.drawArrays(j.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((bt=this.contourShader).bind(),bt.uniforms=X,this.contourVAO.bind(),j.drawArrays(j.LINES,0,this.contourCount),this.contourVAO.unbind())},N.drawPick=function(Q){for(var j=this.gl,Z=(Q=Q||{}).model||F,G=Q.view||F,K=Q.projection||F,at=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],$=0;$<3;++$)at[0][$]=Math.max(at[0][$],this.clipBounds[0][$]),at[1][$]=Math.min(at[1][$],this.clipBounds[1][$]);this._model=[].slice.call(Z),this._view=[].slice.call(G),this._projection=[].slice.call(K),this._resolution=[j.drawingBufferWidth,j.drawingBufferHeight];var rt,X={model:Z,view:G,projection:K,clipBounds:at,pickId:this.pickId/255};(rt=this.pickShader).bind(),rt.uniforms=X,this.triangleCount>0&&(this.triangleVAO.bind(),j.drawArrays(j.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),j.lineWidth(this.lineWidth*this.pixelRatio),j.drawArrays(j.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((rt=this.pointPickShader).bind(),rt.uniforms=X,this.pointVAO.bind(),j.drawArrays(j.POINTS,0,this.pointCount),this.pointVAO.unbind())},N.pick=function(Q){if(!Q||Q.id!==this.pickId)return null;for(var j=Q.value[0]+256*Q.value[1]+65536*Q.value[2],Z=this.cells[j],G=this.positions,K=new Array(Z.length),at=0;at<Z.length;++at)K[at]=G[Z[at]];var $=Q.coord[0],X=Q.coord[1];if(!this.pickVertex){var rt=this.positions[Z[0]],et=this.positions[Z[1]],st=this.positions[Z[2]];return{_cellCenter:!0,position:[$,X],index:j,cell:Z,cellId:j,intensity:this.intensity[j],dataCoordinate:[(rt[0]+et[0]+st[0])/3,(rt[1]+et[1]+st[1])/3,(rt[2]+et[2]+st[2])/3]}}var bt=L(K,[$*this.pixelRatio,this._resolution[1]-X*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!bt)return null;var gt=bt[2],Lt=0;for(at=0;at<Z.length;++at)Lt+=gt[at]*this.intensity[Z[at]];return{position:bt[1],index:Z[bt[0]],cell:Z,cellId:j,intensity:Lt,dataCoordinate:this.positions[Z[bt[0]]]}},N.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},u.exports=function ut(Q,j){if(1===arguments.length&&(Q=(j=Q).gl),!(Q.getExtension("OES_standard_derivatives")||Q.getExtension("MOZ_OES_standard_derivatives")||Q.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var G=z(Q),K=U(Q),at=H(Q),$=J(Q),X=nt(Q),rt=it(Q),et=f(Q,p(new Uint8Array([255,255,255,255]),[1,1,4]));et.generateMipmap(),et.minFilter=Q.LINEAR_MIPMAP_LINEAR,et.magFilter=Q.LINEAR;var st=s(Q),dt=s(Q),bt=s(Q),gt=s(Q),Lt=s(Q),It=c(Q,[{buffer:st,type:Q.FLOAT,size:3},{buffer:Lt,type:Q.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:dt,type:Q.FLOAT,size:4},{buffer:bt,type:Q.FLOAT,size:2},{buffer:gt,type:Q.FLOAT,size:3}]),Mt=s(Q),xt=s(Q),At=s(Q),Gt=s(Q),Wt=c(Q,[{buffer:Mt,type:Q.FLOAT,size:3},{buffer:Gt,type:Q.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:xt,type:Q.FLOAT,size:4},{buffer:At,type:Q.FLOAT,size:2}]),Pt=s(Q),Vt=s(Q),te=s(Q),Qt=s(Q),Bt=s(Q),Ot=c(Q,[{buffer:Pt,type:Q.FLOAT,size:3},{buffer:Bt,type:Q.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Vt,type:Q.FLOAT,size:4},{buffer:te,type:Q.FLOAT,size:2},{buffer:Qt,type:Q.FLOAT,size:1}]),qt=s(Q),oe=new D(Q,et,G,K,at,$,X,rt,st,Lt,dt,bt,gt,It,Mt,Gt,xt,At,Wt,Pt,Bt,Vt,te,Qt,Ot,qt,c(Q,[{buffer:qt,type:Q.FLOAT,size:3}]));return oe.update(j),oe}},4554:function(u,y,e){"use strict";u.exports=function f(m){var h=m.gl;return new s(m,r(h,[0,0,0,1,1,0,1,1]),l(h,a.boxVert,a.lineFrag))};var r=e(5827),l=e(5158),a=e(2709);function s(m,h,w){this.plot=m,this.vbo=h,this.shader=w}var m,h,c=s.prototype;c.bind=function(){var m=this.shader;this.vbo.bind(),this.shader.bind(),m.attributes.coord.pointer(),m.uniforms.screenBox=this.plot.screenBox},c.drawBox=(m=[0,0],h=[0,0],function(w,p,o,v,M){var L=this.shader,x=this.plot.gl;m[0]=w,m[1]=p,h[0]=o,h[1]=v,L.uniforms.lo=m,L.uniforms.hi=h,L.uniforms.color=M,x.drawArrays(x.TRIANGLE_STRIP,0,4)}),c.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3016:function(u,y,e){"use strict";u.exports=function h(w){var p=w.gl;return new c(w,r(p),l(p,s.gridVert,s.gridFrag),l(p,s.tickVert,s.gridFrag))};var r=e(5827),l=e(5158),a=e(5070),s=e(2709);function c(w,p,o,v){this.plot=w,this.vbo=p,this.shader=o,this.tickShader=v,this.ticks=[[],[]]}function f(w,p){return w-p}var w,p,o,m=c.prototype;m.draw=(w=[0,0],p=[0,0],o=[0,0],function(){for(var v=this.plot,M=this.vbo,b=this.shader,L=this.ticks,x=v.gl,S=v._tickBounds,T=v.dataBox,n=v.viewBox,E=v.gridLineWidth,d=v.gridLineColor,F=v.gridLineEnable,D=v.pixelRatio,N=0;N<2;++N){var k=S[N],z=.5*(T[N+2]+T[N]),U=T[N+2]-T[N];p[N]=2*(S[N+2]-k)/U,w[N]=2*(k-z)/U}b.bind(),M.bind(),b.attributes.dataCoord.pointer(),b.uniforms.dataShift=w,b.uniforms.dataScale=p;var H=0;for(N=0;N<2;++N){o[0]=o[1]=0,o[N]=1,b.uniforms.dataAxis=o,b.uniforms.lineWidth=E[N]/(n[N+2]-n[N])*D,b.uniforms.color=d[N];var J=6*L[N].length;F[N]&&J&&x.drawArrays(x.TRIANGLES,H,J),H+=J}}),m.drawTickMarks=function(){var w=[0,0],p=[0,0],o=[1,0],v=[0,1],M=[0,0],b=[0,0];return function(){for(var L=this.plot,x=this.vbo,S=this.tickShader,T=this.ticks,n=L.gl,E=L._tickBounds,d=L.dataBox,F=L.viewBox,D=L.pixelRatio,N=L.screenBox,k=N[2]-N[0],O=N[3]-N[1],B=F[2]-F[0],z=F[3]-F[1],U=0;U<2;++U){var H=E[U],it=.5*(d[U+2]+d[U]),ut=d[U+2]-d[U];p[U]=2*(E[U+2]-H)/ut,w[U]=2*(H-it)/ut}p[0]*=B/k,w[0]*=B/k,p[1]*=z/O,w[1]*=z/O,S.bind(),x.bind(),S.attributes.dataCoord.pointer();var Q=S.uniforms;Q.dataShift=w,Q.dataScale=p;var j=L.tickMarkLength,Z=L.tickMarkWidth,G=L.tickMarkColor,at=6*T[0].length,$=Math.min(a.ge(T[0],(d[0]-E[0])/(E[2]-E[0]),f),T[0].length),X=Math.min(a.gt(T[0],(d[2]-E[0])/(E[2]-E[0]),f),T[0].length),rt=0+6*$,et=6*Math.max(0,X-$),st=Math.min(a.ge(T[1],(d[1]-E[1])/(E[3]-E[1]),f),T[1].length),dt=Math.min(a.gt(T[1],(d[3]-E[1])/(E[3]-E[1]),f),T[1].length),bt=at+6*st,gt=6*Math.max(0,dt-st);M[0]=2*(F[0]-j[1])/k-1,M[1]=(F[3]+F[1])/O-1,b[0]=j[1]*D/k,b[1]=Z[1]*D/O,gt&&(Q.color=G[1],Q.tickScale=b,Q.dataAxis=v,Q.screenOffset=M,n.drawArrays(n.TRIANGLES,bt,gt)),M[0]=(F[2]+F[0])/k-1,M[1]=2*(F[1]-j[0])/O-1,b[0]=Z[0]*D/k,b[1]=j[0]*D/O,et&&(Q.color=G[0],Q.tickScale=b,Q.dataAxis=o,Q.screenOffset=M,n.drawArrays(n.TRIANGLES,rt,et)),M[0]=2*(F[2]+j[3])/k-1,M[1]=(F[3]+F[1])/O-1,b[0]=j[3]*D/k,b[1]=Z[3]*D/O,gt&&(Q.color=G[3],Q.tickScale=b,Q.dataAxis=v,Q.screenOffset=M,n.drawArrays(n.TRIANGLES,bt,gt)),M[0]=(F[2]+F[0])/k-1,M[1]=2*(F[3]+j[2])/O-1,b[0]=Z[2]*D/k,b[1]=j[2]*D/O,et&&(Q.color=G[2],Q.tickScale=b,Q.dataAxis=o,Q.screenOffset=M,n.drawArrays(n.TRIANGLES,rt,et))}}(),m.update=function(){var w=[1,1,-1,-1,1,-1],p=[1,-1,1,1,-1,-1];return function(o){for(var v=o.ticks,M=o.bounds,b=new Float32Array(18*(v[0].length+v[1].length)),x=0,S=[[],[]],T=0;T<2;++T)for(var n=S[T],E=v[T],d=M[T],F=M[T+2],D=0;D<E.length;++D){var N=(E[D].x-d)/(F-d);n.push(N);for(var k=0;k<6;++k)b[x++]=N,b[x++]=w[k],b[x++]=p[k]}this.ticks=S,this.vbo.update(b)}}(),m.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},1154:function(u,y,e){"use strict";u.exports=function f(m){var h=m.gl;return new s(m,r(h,[-1,-1,-1,1,1,-1,1,1]),l(h,a.lineVert,a.lineFrag))};var r=e(5827),l=e(5158),a=e(2709);function s(m,h,w){this.plot=m,this.vbo=h,this.shader=w}var m,h,c=s.prototype;c.bind=function(){var m=this.shader;this.vbo.bind(),this.shader.bind(),m.attributes.coord.pointer(),m.uniforms.screenBox=this.plot.screenBox},c.drawLine=(m=[0,0],h=[0,0],function(w,p,o,v,M,b){var L=this.plot,x=this.shader,S=L.gl;m[0]=w,m[1]=p,h[0]=o,h[1]=v,x.uniforms.start=m,x.uniforms.end=h,x.uniforms.width=M*L.pixelRatio,x.uniforms.color=b,S.drawArrays(S.TRIANGLE_STRIP,0,4)}),c.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2709:function(u,y,e){"use strict";var r=e(6832),l=r(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);u.exports={lineVert:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:l,textVert:r(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:l,gridVert:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:l,boxVert:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},5613:function(u,y,e){"use strict";u.exports=function h(w){var p=w.gl;return new f(w,r(p),l(p,c.textVert,c.textFrag))};var r=e(5827),l=e(5158),a=e(6946),s=e(5070),c=e(2709);function f(w,p,o){this.plot=w,this.vbo=p,this.shader=o,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var w,p,o,m=f.prototype;m.drawTicks=(w=[0,0],p=[0,0],o=[0,0],function(v){var M=this.plot,b=this.shader,L=this.tickX[v],x=this.tickOffset[v],S=M.gl,T=M.viewBox,n=M.dataBox,E=M.screenBox,d=M.pixelRatio,F=M.tickEnable,D=M.tickPad,N=M.tickColor,k=M.tickAngle,O=M.labelEnable,B=M.labelPad,z=M.labelColor,U=M.labelAngle,H=this.labelOffset[v],J=this.labelCount[v],nt=s.lt(L,n[v]),it=s.le(L,n[v+2]);w[0]=w[1]=0,w[v]=1,p[v]=(T[2+v]+T[v])/(E[2+v]-E[v])-1;var ut=2/E[2+(1^v)]-E[1^v];p[1^v]=ut*T[1^v]-1,F[v]&&(p[1^v]-=ut*d*D[v],nt<it&&x[it]>x[nt]&&(b.uniforms.dataAxis=w,b.uniforms.screenOffset=p,b.uniforms.color=N[v],b.uniforms.angle=k[v],S.drawArrays(S.TRIANGLES,x[nt],x[it]-x[nt]))),O[v]&&J&&(p[1^v]-=ut*d*B[v],b.uniforms.dataAxis=o,b.uniforms.screenOffset=p,b.uniforms.color=z[v],b.uniforms.angle=U[v],S.drawArrays(S.TRIANGLES,H,J)),p[1^v]=ut*T[2+(1^v)]-1,F[v+2]&&(p[1^v]+=ut*d*D[v+2],nt<it&&x[it]>x[nt]&&(b.uniforms.dataAxis=w,b.uniforms.screenOffset=p,b.uniforms.color=N[v+2],b.uniforms.angle=k[v+2],S.drawArrays(S.TRIANGLES,x[nt],x[it]-x[nt]))),O[v+2]&&J&&(p[1^v]+=ut*d*B[v+2],b.uniforms.dataAxis=o,b.uniforms.screenOffset=p,b.uniforms.color=z[v+2],b.uniforms.angle=U[v+2],S.drawArrays(S.TRIANGLES,H,J))}),m.drawTitle=function(){var w=[0,0],p=[0,0];return function(){var o=this.plot,v=this.shader,M=o.gl,b=o.screenBox,L=o.titleCenter,x=o.titleAngle,S=o.titleColor,T=o.pixelRatio;if(this.titleCount){for(var n=0;n<2;++n)p[n]=2*(L[n]*T-b[n])/(b[2+n]-b[n])-1;v.bind(),v.uniforms.dataAxis=w,v.uniforms.screenOffset=p,v.uniforms.angle=x,v.uniforms.color=S,M.drawArrays(M.TRIANGLES,this.titleOffset,this.titleCount)}}}(),m.bind=function(){var w=[0,0],p=[0,0],o=[0,0];return function(){var v=this.plot,M=this.shader,b=v._tickBounds,L=v.dataBox,x=v.screenBox,S=v.viewBox;M.bind();for(var T=0;T<2;++T){var n=b[T],F=.5*(L[T+2]+L[T]),D=L[T+2]-L[T],O=S[T+2]-S[T],U=x[T+2]-x[T];p[T]=2*(b[T+2]-n)/D*O/U,w[T]=2*(n-F)/D*O/U}o[1]=2*v.pixelRatio/(x[3]-x[1]),o[0]=o[1]*(x[3]-x[1])/(x[2]-x[0]),M.uniforms.dataScale=p,M.uniforms.dataShift=w,M.uniforms.textScale=o,this.vbo.bind(),M.attributes.textCoordinate.pointer()}}(),m.update=function(w){var M,b,x,S,T,p=[],o=w.ticks,v=w.bounds;for(T=0;T<2;++T){var n=[Math.floor(p.length/3)],E=[-1/0],d=o[T];for(M=0;M<d.length;++M){var F=d[M],D=F.x,k=F.font||"sans-serif";S=F.fontSize||12;for(var O=1/(v[T+2]-v[T]),B=v[T],z=F.text.split("\n"),U=0;U<z.length;U++)for(x=a(k,z[U]).data,b=0;b<x.length;b+=2)p.push(x[b]*S,-x[b+1]*S-U*S*1.2,(D-B)*O);n.push(Math.floor(p.length/3)),E.push(D)}this.tickOffset[T]=n,this.tickX[T]=E}for(T=0;T<2;++T){for(this.labelOffset[T]=Math.floor(p.length/3),x=a(w.labelFont[T],w.labels[T],{textAlign:"center"}).data,S=w.labelSize[T],M=0;M<x.length;M+=2)p.push(x[M]*S,-x[M+1]*S,0);this.labelCount[T]=Math.floor(p.length/3)-this.labelOffset[T]}for(this.titleOffset=Math.floor(p.length/3),x=a(w.titleFont,w.title).data,S=w.titleSize,M=0;M<x.length;M+=2)p.push(x[M]*S,-x[M+1]*S,0);this.titleCount=Math.floor(p.length/3)-this.titleOffset,this.vbo.update(p)},m.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2117:function(u,y,e){"use strict";u.exports=function o(v){var M=v.gl,L=new f(M,r(M,[M.drawingBufferWidth,M.drawingBufferHeight]));return L.grid=l(L),L.text=a(L),L.line=s(L),L.box=c(L),L.update(v),L};var r=e(2611),l=e(3016),a=e(5613),s=e(1154),c=e(4554);function f(v,M){this.gl=v,this.pickBuffer=M,this.screenBox=[0,0,v.drawingBufferWidth,v.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var m=f.prototype;function w(v){for(var M=v.slice(),b=0;b<M.length;++b)M[b]=M[b].slice();return M}function p(v,M){return v.x-M.x}m.setDirty=function(){this.dirty=this.pickDirty=!0},m.setOverlayDirty=function(){this.dirty=!0},m.nextDepthValue=function(){return this._depthCounter++/65536},m.draw=function(){var M=this.gl,b=this.screenBox,L=this.viewBox,x=this.dataBox,S=this.pixelRatio,T=this.grid,n=this.line,E=this.text,d=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,M.bindFramebuffer(M.FRAMEBUFFER,null),M.enable(M.SCISSOR_TEST),M.disable(M.DEPTH_TEST),M.depthFunc(M.LESS),M.depthMask(!1),M.enable(M.BLEND),M.blendEquation(M.FUNC_ADD,M.FUNC_ADD),M.blendFunc(M.ONE,M.ONE_MINUS_SRC_ALPHA),this.borderColor){M.scissor(b[0],b[1],b[2]-b[0],b[3]-b[1]);var F=this.borderColor;M.clearColor(F[0]*F[3],F[1]*F[3],F[2]*F[3],F[3]),M.clear(M.COLOR_BUFFER_BIT|M.DEPTH_BUFFER_BIT)}M.scissor(L[0],L[1],L[2]-L[0],L[3]-L[1]),M.viewport(L[0],L[1],L[2]-L[0],L[3]-L[1]);var D=this.backgroundColor;M.clearColor(D[0]*D[3],D[1]*D[3],D[2]*D[3],D[3]),M.clear(M.COLOR_BUFFER_BIT),T.draw();var N=this.zeroLineEnable,k=this.zeroLineColor,O=this.zeroLineWidth;if(N[0]||N[1]){n.bind();for(var B=0;B<2;++B)if(N[B]&&x[B]<=0&&x[B+2]>=0){var z=b[B]-x[B]*(b[B+2]-b[B])/(x[B+2]-x[B]);0===B?n.drawLine(z,b[1],z,b[3],O[B],k[B]):n.drawLine(b[0],z,b[2],z,O[B],k[B])}}for(B=0;B<d.length;++B)d[B].draw();M.viewport(b[0],b[1],b[2]-b[0],b[3]-b[1]),M.scissor(b[0],b[1],b[2]-b[0],b[3]-b[1]),this.grid.drawTickMarks(),n.bind();var U=this.borderLineEnable,H=this.borderLineWidth,J=this.borderLineColor;for(U[1]&&n.drawLine(L[0],L[1]-.5*H[1]*S,L[0],L[3]+.5*H[3]*S,H[1],J[1]),U[0]&&n.drawLine(L[0]-.5*H[0]*S,L[1],L[2]+.5*H[2]*S,L[1],H[0],J[0]),U[3]&&n.drawLine(L[2],L[1]-.5*H[1]*S,L[2],L[3]+.5*H[3]*S,H[3],J[3]),U[2]&&n.drawLine(L[0]-.5*H[0]*S,L[3],L[2]+.5*H[2]*S,L[3],H[2],J[2]),E.bind(),B=0;B<2;++B)E.drawTicks(B);this.titleEnable&&E.drawTitle();var nt=this.overlays;for(B=0;B<nt.length;++B)nt[B].draw();M.disable(M.SCISSOR_TEST),M.disable(M.BLEND),M.depthMask(!0)}},m.drawPick=function(){if(!this.static){var v=this.pickBuffer;this._pickTimeout=null,v.begin();for(var b=1,L=this.objects,x=0;x<L.length;++x)b=L[x].drawPick(b);v.end()}},m.pick=function(v,M){if(!this.static){var b=this.pixelRatio,L=this.pickPixelRatio,x=this.viewBox,S=0|Math.round((v-x[0]/b)*L),T=0|Math.round((M-x[1]/b)*L),n=this.pickBuffer.query(S,T,this.pickRadius);if(!n)return null;for(var E=n.id+(n.value[0]<<8)+(n.value[1]<<16)+(n.value[2]<<24),d=this.objects,F=0;F<d.length;++F){var D=d[F].pick(S,T,E);if(D)return D}return null}},m.setScreenBox=function(v){var M=this.screenBox,b=this.pixelRatio;M[0]=0|Math.round(v[0]*b),M[1]=0|Math.round(v[1]*b),M[2]=0|Math.round(v[2]*b),M[3]=0|Math.round(v[3]*b),this.setDirty()},m.setDataBox=function(v){var M=this.dataBox;(M[0]!==v[0]||M[1]!==v[1]||M[2]!==v[2]||M[3]!==v[3])&&(M[0]=v[0],M[1]=v[1],M[2]=v[2],M[3]=v[3],this.setDirty())},m.setViewBox=function(v){var M=this.pixelRatio,b=this.viewBox;b[0]=0|Math.round(v[0]*M),b[1]=0|Math.round(v[1]*M),b[2]=0|Math.round(v[2]*M),b[3]=0|Math.round(v[3]*M);var L=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((v[2]-v[0])*L),0|Math.round((v[3]-v[1])*L)],this.setDirty()},m.update=function(v){var M=this.gl;this.pixelRatio=(v=v||{}).pixelRatio||1;var b=this.pixelRatio;this.pickPixelRatio=Math.max(b,1),this.setScreenBox(v.screenBox||[0,0,M.drawingBufferWidth/b,M.drawingBufferHeight/b]),this.setViewBox(v.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/b,.125*(this.screenBox[3]-this.screenBox[1])/b,.875*(this.screenBox[2]-this.screenBox[0])/b,.875*(this.screenBox[3]-this.screenBox[1])/b]);var x=this.viewBox,S=(x[2]-x[0])/(x[3]-x[1]);this.setDataBox(v.dataBox||[-10,-10/S,10,10/S]),this.borderColor=!1!==v.borderColor&&(v.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(v.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(v.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(v.gridLineWidth||[1,1]).slice(),this.gridLineColor=w(v.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(v.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(v.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=w(v.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(v.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(v.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=w(v.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(v.titleCenter||[.5*(x[0]+x[2])/b,(x[3]+120)/b]).slice(),this.titleEnable=!("titleEnable"in v)||!!v.titleEnable,this.titleAngle=v.titleAngle||0,this.titleColor=(v.titleColor||[0,0,0,1]).slice(),this.labelPad=(v.labelPad||[15,15,15,15]).slice(),this.labelAngle=(v.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(v.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=w(v.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(v.tickPad||[15,15,15,15]).slice(),this.tickAngle=(v.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(v.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=w(v.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(v.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(v.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=w(v.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var T=v.ticks||[[],[]],n=this._tickBounds;n[0]=n[1]=1/0,n[2]=n[3]=-1/0;for(var E=0;E<2;++E){var d=T[E].slice(0);0!==d.length&&(d.sort(p),n[E]=Math.min(n[E],d[0].x),n[E+2]=Math.max(n[E+2],d[d.length-1].x))}this.grid.update({bounds:n,ticks:T}),this.text.update({bounds:n,ticks:T,labels:v.labels||["x","y"],labelSize:v.labelSize||[12,12],labelFont:v.labelFont||["sans-serif","sans-serif"],title:v.title||"",titleSize:v.titleSize||18,titleFont:v.titleFont||"sans-serif"}),this.static=!!v.static,this.setDirty()},m.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var v=this.objects.length-1;v>=0;--v)this.objects[v].dispose();for(this.objects.length=0,v=this.overlays.length-1;v>=0;--v)this.overlays[v].dispose();this.overlays.length=0,this.gl=null},m.addObject=function(v){this.objects.indexOf(v)<0&&(this.objects.push(v),this.setDirty())},m.removeObject=function(v){for(var M=this.objects,b=0;b<M.length;++b)if(M[b]===v){M.splice(b,1),this.setDirty();break}},m.addOverlay=function(v){this.overlays.indexOf(v)<0&&(this.overlays.push(v),this.setOverlayDirty())},m.removeOverlay=function(v){for(var M=this.overlays,b=0;b<M.length;++b)if(M[b]===v){M.splice(b,1),this.setOverlayDirty();break}}},4296:function(u,y,e){"use strict";u.exports=function m(h,w){h=h||document.body;var p=[.01,1/0];"distanceLimits"in(w=w||{})&&(p[0]=w.distanceLimits[0],p[1]=w.distanceLimits[1]),"zoomMin"in w&&(p[0]=w.zoomMin),"zoomMax"in w&&(p[1]=w.zoomMax);var o=l({center:w.center||[0,0,0],up:w.up||[0,1,0],eye:w.eye||[0,0,10],mode:w.mode||"orbit",distanceLimits:p}),v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],M=0,b=h.clientWidth,L=h.clientHeight,x={keyBindingMode:"rotate",enableWheel:!0,view:o,element:h,delay:w.delay||16,rotateSpeed:w.rotateSpeed||1,zoomSpeed:w.zoomSpeed||1,translateSpeed:w.translateSpeed||1,flipX:!!w.flipX,flipY:!!w.flipY,modes:o.modes,_ortho:w._ortho||w.projection&&"orthographic"===w.projection.type||!1,tick:function(){var S=r(),T=this.delay,n=S-2*T;o.idle(S-T),o.recalcMatrix(n),o.flush(S-(100+2*T));for(var E=!0,d=o.computedMatrix,F=0;F<16;++F)E=E&&v[F]===d[F],v[F]=d[F];var D=h.clientWidth===b&&h.clientHeight===L;return b=h.clientWidth,L=h.clientHeight,E?!D:(M=Math.exp(o.computedRadius[0]),!0)},lookAt:function(S,T,n){o.lookAt(o.lastT(),S,T,n)},rotate:function(S,T,n){o.rotate(o.lastT(),S,T,n)},pan:function(S,T,n){o.pan(o.lastT(),S,T,n)},translate:function(S,T,n){o.translate(o.lastT(),S,T,n)}};return Object.defineProperties(x,{matrix:{get:function(){return o.computedMatrix},set:function(S){return o.setMatrix(o.lastT(),S),o.computedMatrix},enumerable:!0},mode:{get:function(){return o.getMode()},set:function(S){var T=o.computedUp.slice(),n=o.computedEye.slice(),E=o.computedCenter.slice();if(o.setMode(S),"turntable"===S){var d=r();o._active.lookAt(d,n,E,T),o._active.lookAt(d+500,n,E,[0,0,1]),o._active.flush(d)}return o.getMode()},enumerable:!0},center:{get:function(){return o.computedCenter},set:function(S){return o.lookAt(o.lastT(),null,S),o.computedCenter},enumerable:!0},eye:{get:function(){return o.computedEye},set:function(S){return o.lookAt(o.lastT(),S),o.computedEye},enumerable:!0},up:{get:function(){return o.computedUp},set:function(S){return o.lookAt(o.lastT(),null,null,S),o.computedUp},enumerable:!0},distance:{get:function(){return M},set:function(S){return o.setDistance(o.lastT(),S),S},enumerable:!0},distanceLimits:{get:function(){return o.getDistanceLimits(p)},set:function(S){return o.setDistanceLimits(S),S},enumerable:!0}}),h.addEventListener("contextmenu",function(S){return S.preventDefault(),!1}),x._lastX=-1,x._lastY=-1,x._lastMods={shift:!1,control:!1,alt:!1,meta:!1},x.enableMouseListeners=function(){function S(T,n,E,d){var F=x.keyBindingMode;if(!1!==F){var D="rotate"===F,N="pan"===F,k="zoom"===F,O=!!d.control,B=!!d.alt,z=!!d.shift,U=!!(1&T),H=!!(2&T),J=!!(4&T),nt=1/h.clientHeight,it=nt*(n-x._lastX),ut=nt*(E-x._lastY),Q=x.flipX?1:-1,j=x.flipY?1:-1,Z=Math.PI*x.rotateSpeed,G=r();if(-1!==x._lastX&&-1!==x._lastY&&((D&&U&&!O&&!B&&!z||U&&!O&&!B&&z)&&o.rotate(G,Q*Z*it,-j*Z*ut,0),(N&&U&&!O&&!B&&!z||H||U&&O&&!B&&!z)&&o.pan(G,-x.translateSpeed*it*M,x.translateSpeed*ut*M,0),k&&U&&!O&&!B&&!z||J||U&&!O&&B&&!z)){var K=-x.zoomSpeed*ut/window.innerHeight*(G-o.lastT())*100;o.pan(G,0,0,M*(Math.exp(K)-1))}return x._lastX=n,x._lastY=E,x._lastMods=d,!0}}x.mouseListener=a(h,S),h.addEventListener("touchstart",function(T){var n=c(T.changedTouches[0],h);S(0,n[0],n[1],x._lastMods),S(1,n[0],n[1],x._lastMods)},!!f&&{passive:!0}),h.addEventListener("touchmove",function(T){var n=c(T.changedTouches[0],h);S(1,n[0],n[1],x._lastMods),T.preventDefault()},!!f&&{passive:!1}),h.addEventListener("touchend",function(T){S(0,x._lastX,x._lastY,x._lastMods)},!!f&&{passive:!0}),x.wheelListener=s(h,function(T,n){if(!1!==x.keyBindingMode&&x.enableWheel){var E=x.flipX?1:-1,d=x.flipY?1:-1,F=r();if(Math.abs(T)>Math.abs(n))o.rotate(F,0,0,-T*E*Math.PI*x.rotateSpeed/window.innerWidth);else if(!x._ortho){var D=-x.zoomSpeed*d*n/window.innerHeight*(F-o.lastT())/20;o.pan(F,0,0,M*(Math.exp(D)-1))}}},!0)},x.enableMouseListeners(),x};var r=e(8161),l=e(1152),a=e(6145),s=e(6475),c=e(2565),f=e(5233)},8245:function(u,y,e){var r=e(6832),l=e(5158),a=r(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),s=r(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);u.exports=function(c){return l(c,a,s,null,[{name:"position",type:"vec2"}])}},1059:function(u,y,e){"use strict";var r=e(4296),l=e(7453),a=e(2771),s=e(6496),c=e(2611),f=e(4234),m=e(8126),h=e(6145),w=e(1120),p=e(5268),o=e(8245),v=e(2321)({tablet:!0,featureDetect:!0});function M(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function L(n){var E=Math.round(Math.log(Math.abs(n))/Math.log(10));if(E<0){var d=Math.round(Math.pow(10,-E));return Math.ceil(n*d)/d}return E>0?(d=Math.round(Math.pow(10,E)),Math.ceil(n/d)*d):Math.ceil(n)}function x(n){return"boolean"!=typeof n||n}u.exports={createScene:function S(n){(n=n||{}).camera=n.camera||{};var E=n.canvas;E||(E=document.createElement("canvas"),n.container?n.container.appendChild(E):document.body.appendChild(E));var F=n.gl;if(F||(n.glOptions&&(v=!!n.glOptions.preserveDrawingBuffer),F=function b(n,E){var d=null;try{(d=n.getContext("webgl",E))||(d=n.getContext("experimental-webgl",E))}catch(F){return null}return d}(E,n.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:v})),!F)throw new Error("webgl not supported");var D=n.bounds||[[-10,-10,-10],[10,10,10]],N=new M,k=f(F,F.drawingBufferWidth,F.drawingBufferHeight,{preferFloat:!v}),O=o(F),B=n.cameraObject&&!0===n.cameraObject._ortho||n.camera.projection&&"orthographic"===n.camera.projection.type||!1,z={eye:n.camera.eye||[2,0,0],center:n.camera.center||[0,0,0],up:n.camera.up||[0,1,0],zoomMin:n.camera.zoomMax||.1,zoomMax:n.camera.zoomMin||100,mode:n.camera.mode||"turntable",_ortho:B},U=n.axes||{},H=l(F,U);H.enable=!U.disable;var nt=s(F,n.spikes||{}),it=[],ut=[],Q=[],j=[],Z=!0,$=!0,at={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},X=($=!0,[F.drawingBufferWidth,F.drawingBufferHeight]),rt=n.cameraObject||r(E,z),et={gl:F,contextLost:!1,pixelRatio:n.pixelRatio||1,canvas:E,selection:N,camera:rt,axes:H,axesPixels:null,spikes:nt,bounds:D,objects:it,shape:X,aspect:n.aspectRatio||[1,1,1],pickRadius:n.pickRadius||10,zNear:n.zNear||.01,zFar:n.zFar||1e3,fovy:n.fovy||Math.PI/4,clearColor:n.clearColor||[0,0,0,0],autoResize:x(n.autoResize),autoBounds:x(n.autoBounds),autoScale:!!n.autoScale,autoCenter:x(n.autoCenter),clipToBounds:x(n.clipToBounds),snapToData:!!n.snapToData,onselect:n.onselect||null,onrender:n.onrender||null,onclick:n.onclick||null,cameraParams:at,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(Gt){this.aspect[0]=Gt.x,this.aspect[1]=Gt.y,this.aspect[2]=Gt.z,$=!0},setBounds:function(Gt,Wt){this.bounds[0][Gt]=Wt.min,this.bounds[1][Gt]=Wt.max},setClearColor:function(Gt){this.clearColor=Gt},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},st=[F.drawingBufferWidth/et.pixelRatio|0,F.drawingBufferHeight/et.pixelRatio|0];function dt(){if(!et._stopped&&et.autoResize){var Gt=E.parentNode,Wt=1,Pt=1;Gt&&Gt!==document.body?(Wt=Gt.clientWidth,Pt=Gt.clientHeight):(Wt=window.innerWidth,Pt=window.innerHeight);var Vt=0|Math.ceil(Wt*et.pixelRatio),te=0|Math.ceil(Pt*et.pixelRatio);if(Vt!==E.width||te!==E.height){E.width=Vt,E.height=te;var Qt=E.style;Qt.position=Qt.position||"absolute",Qt.left="0px",Qt.top="0px",Qt.width=Wt+"px",Qt.height=Pt+"px",Z=!0}}}function bt(){for(var Gt=it.length,Wt=j.length,Pt=0;Pt<Wt;++Pt)Q[Pt]=0;t:for(Pt=0;Pt<Gt;++Pt){var Vt=it[Pt],te=Vt.pickSlots;if(te){for(var Qt=0;Qt<Wt;++Qt)if(Q[Qt]+te<255){ut[Pt]=Qt,Vt.setPickBase(Q[Qt]+1),Q[Qt]+=te;continue t}var Bt=c(F,X);ut[Pt]=Wt,j.push(Bt),Q.push(te),Vt.setPickBase(1),Wt+=1}else ut[Pt]=-1}for(;Wt>0&&0===Q[Wt-1];)Q.pop(),j.pop().dispose()}function gt(){if(et.contextLost)return!0;F.isContextLost()&&(et.contextLost=!0,et.mouseListener.enabled=!1,et.selection.object=null,et.oncontextloss&&et.oncontextloss())}et.autoResize&&dt(),window.addEventListener("resize",dt),et.update=function(Gt){et._stopped||(Gt=Gt||{},Z=!0,$=!0)},et.add=function(Gt){et._stopped||(Gt.axes=H,it.push(Gt),ut.push(-1),Z=!0,$=!0,bt())},et.remove=function(Gt){if(!et._stopped){var Wt=it.indexOf(Gt);Wt<0||(it.splice(Wt,1),ut.pop(),Z=!0,$=!0,bt())}},et.dispose=function(){if(!et._stopped&&(et._stopped=!0,window.removeEventListener("resize",dt),E.removeEventListener("webglcontextlost",gt),et.mouseListener.enabled=!1,!et.contextLost)){H.dispose(),nt.dispose();for(var Gt=0;Gt<it.length;++Gt)it[Gt].dispose();for(k.dispose(),Gt=0;Gt<j.length;++Gt)j[Gt].dispose();O.dispose(),F=null,H=null,nt=null,it=[]}},et._mouseRotating=!1,et._prevButtons=0,et.enableMouseListeners=function(){et.mouseListener=h(E,function(Gt,Wt,Pt){if(!et._stopped){var Vt=j.length,te=it.length,Qt=N.object;N.distance=1/0,N.mouse[0]=Wt,N.mouse[1]=Pt,N.object=null,N.screen=null,N.dataCoordinate=N.dataPosition=null;var Bt=!1;if(Gt&&et._prevButtons)et._mouseRotating=!0;else{et._mouseRotating&&($=!0),et._mouseRotating=!1;for(var Ot=0;Ot<Vt;++Ot){var qt=j[Ot].query(Wt,st[1]-Pt-1,et.pickRadius);if(qt){if(qt.distance>N.distance)continue;for(var ie=0;ie<te;++ie){var oe=it[ie];if(ut[ie]===Ot){var pe=oe.pick(qt);pe&&(N.buttons=Gt,N.screen=qt.coord,N.distance=qt.distance,N.object=oe,N.index=pe.distance,N.dataPosition=pe.position,N.dataCoordinate=pe.dataCoordinate,N.data=pe,Bt=!0)}}}}}Qt&&Qt!==N.object&&(Qt.highlight&&Qt.highlight(null),Z=!0),N.object&&(N.object.highlight&&N.object.highlight(N.data),Z=!0),(Bt=Bt||N.object!==Qt)&&et.onselect&&et.onselect(N),1&Gt&&!(1&et._prevButtons)&&et.onclick&&et.onclick(N),et._prevButtons=Gt}})},E.addEventListener("webglcontextlost",gt);var It=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Mt=[It[0].slice(),It[1].slice()];function xt(){if(!gt()){dt();var Gt=et.camera.tick();at.view=et.camera.matrix,Z=Z||Gt,$=$||Gt,H.pixelRatio=et.pixelRatio,nt.pixelRatio=et.pixelRatio;var Wt=it.length,Pt=It[0],Vt=It[1];Pt[0]=Pt[1]=Pt[2]=1/0,Vt[0]=Vt[1]=Vt[2]=-1/0;for(var te=0;te<Wt;++te){(Qt=it[te]).pixelRatio=et.pixelRatio,Qt.axes=et.axes,Z=Z||!!Qt.dirty,$=$||!!Qt.dirty;var Bt=Qt.bounds;if(Bt)for(var Ot=Bt[0],qt=Bt[1],ie=0;ie<3;++ie)Pt[ie]=Math.min(Pt[ie],Ot[ie]),Vt[ie]=Math.max(Vt[ie],qt[ie])}var oe=et.bounds;if(et.autoBounds)for(ie=0;ie<3;++ie){if(Vt[ie]<Pt[ie])Pt[ie]=-1,Vt[ie]=1;else{Pt[ie]===Vt[ie]&&(Pt[ie]-=1,Vt[ie]+=1);var pe=.05*(Vt[ie]-Pt[ie]);Pt[ie]=Pt[ie]-pe,Vt[ie]=Vt[ie]+pe}oe[0][ie]=Pt[ie],oe[1][ie]=Vt[ie]}var de=!1;for(ie=0;ie<3;++ie)de=de||Mt[0][ie]!==oe[0][ie]||Mt[1][ie]!==oe[1][ie],Mt[0][ie]=oe[0][ie],Mt[1][ie]=oe[1][ie];if($=$||de,Z=Z||de){if(de){var Fe=[0,0,0];for(te=0;te<3;++te)Fe[te]=L((oe[1][te]-oe[0][te])/10);H.update(H.autoTicks?{bounds:oe,tickSpacing:Fe}:{bounds:oe})}var Kt=F.drawingBufferWidth,Et=F.drawingBufferHeight;for(X[0]=Kt,X[1]=Et,st[0]=0|Math.max(Kt/et.pixelRatio,1),st[1]=0|Math.max(Et/et.pixelRatio,1),function T(n,E){var d=n.bounds,F=n.cameraParams,D=F.projection,N=F.model,B=n.zNear,z=n.zFar,U=n.fovy,H=n.gl.drawingBufferWidth/n.gl.drawingBufferHeight;E?(p(D,-H,H,-1,1,B,z),F._ortho=!0):(w(D,U,H,B,z),F._ortho=!1);for(var J=0;J<16;++J)N[J]=0;N[15]=1;var nt=0;for(J=0;J<3;++J)nt=Math.max(nt,d[1][J]-d[0][J]);for(J=0;J<3;++J)N[5*J]=n.autoScale?n.aspect[J]/(d[1][J]-d[0][J]):1/nt,n.autoCenter&&(N[12+J]=.5*-N[5*J]*(d[0][J]+d[1][J]))}(et,B),te=0;te<Wt;++te)(Qt=it[te]).axesBounds=oe,et.clipToBounds&&(Qt.clipBounds=oe);N.object&&(nt.position=et.snapToData?N.dataCoordinate:N.dataPosition,nt.bounds=oe),$&&($=!1,function Lt(){if(!gt()){F.colorMask(!0,!0,!0,!0),F.depthMask(!0),F.disable(F.BLEND),F.enable(F.DEPTH_TEST),F.depthFunc(F.LEQUAL);for(var Gt=it.length,Wt=j.length,Pt=0;Pt<Wt;++Pt){var Vt=j[Pt];Vt.shape=st,Vt.begin();for(var te=0;te<Gt;++te)if(ut[te]===Pt){var Qt=it[te];Qt.drawPick&&(Qt.pixelRatio=1,Qt.drawPick(at))}Vt.end()}}}()),et.axesPixels=a(et.axes,at,Kt,Et),et.onrender&&et.onrender(),F.bindFramebuffer(F.FRAMEBUFFER,null),F.viewport(0,0,Kt,Et),et.clearRGBA(),F.depthMask(!0),F.colorMask(!0,!0,!0,!0),F.enable(F.DEPTH_TEST),F.depthFunc(F.LEQUAL),F.disable(F.BLEND),F.disable(F.CULL_FACE);var St=!1;for(H.enable&&(St=St||H.isTransparent(),H.draw(at)),nt.axes=H,N.object&&nt.draw(at),F.disable(F.CULL_FACE),te=0;te<Wt;++te)(Qt=it[te]).axes=H,Qt.pixelRatio=et.pixelRatio,Qt.isOpaque&&Qt.isOpaque()&&Qt.draw(at),Qt.isTransparent&&Qt.isTransparent()&&(St=!0);if(St){for(k.shape=X,k.bind(),F.clear(F.DEPTH_BUFFER_BIT),F.colorMask(!1,!1,!1,!1),F.depthMask(!0),F.depthFunc(F.LESS),H.enable&&H.isTransparent()&&H.drawTransparent(at),te=0;te<Wt;++te)(Qt=it[te]).isOpaque&&Qt.isOpaque()&&Qt.draw(at);for(F.enable(F.BLEND),F.blendEquation(F.FUNC_ADD),F.blendFunc(F.ONE,F.ONE_MINUS_SRC_ALPHA),F.colorMask(!0,!0,!0,!0),F.depthMask(!1),F.clearColor(0,0,0,0),F.clear(F.COLOR_BUFFER_BIT),H.isTransparent()&&H.drawTransparent(at),te=0;te<Wt;++te){var Qt;(Qt=it[te]).isTransparent&&Qt.isTransparent()&&Qt.drawTransparent(at)}F.bindFramebuffer(F.FRAMEBUFFER,null),F.blendFunc(F.ONE,F.ONE_MINUS_SRC_ALPHA),F.disable(F.DEPTH_TEST),O.bind(),k.color[0].bind(0),O.uniforms.accumBuffer=0,m(F),F.disable(F.BLEND)}for(Z=!1,te=0;te<Wt;++te)it[te].dirty=!1}}}return et.enableMouseListeners(),function At(){et._stopped||et.contextLost||(xt(),requestAnimationFrame(At))}(),et.redraw=function(){et._stopped||(Z=!0,xt())},et},createCamera:r}},8023:function(u,y,e){var r=e(6832);y.pointVertex=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),y.pointFragment=r(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),y.pickVertex=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),y.pickFragment=r(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},8271:function(u,y,e){"use strict";var r=e(5158),l=e(5827),a=e(5306),s=e(8023);function c(w,p,o,v,M){this.plot=w,this.offsetBuffer=p,this.pickBuffer=o,this.shader=v,this.pickShader=M,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}u.exports=function h(w,p){var o=w.gl,x=new c(w,l(o),l(o),r(o,s.pointVertex,s.pointFragment),r(o,s.pickVertex,s.pickFragment));return x.update(p),w.addObject(x),x};var w,p,f=c.prototype;f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},f.update=function(w){var p;function o(T,n){return T in w?w[T]:n}w=w||{},this.sizeMin=o("sizeMin",.5),this.sizeMax=o("sizeMax",20),this.color=o("color",[1,0,0,1]).slice(),this.areaRatio=o("areaRatio",1),this.borderColor=o("borderColor",[0,0,0,1]).slice(),this.blend=o("blend",!1);var v=w.positions.length>>>1,M=w.positions instanceof Float32Array,b=w.idToIndex instanceof Int32Array&&w.idToIndex.length>=v,L=w.positions,x=M?L:a.mallocFloat32(L.length),S=b?w.idToIndex:a.mallocInt32(v);if(M||x.set(L),!b)for(x.set(L),p=0;p<v;p++)S[p]=p;this.points=L,this.offsetBuffer.update(x),this.pickBuffer.update(S),M||a.free(x),b||a.free(S),this.pointCount=v,this.pickOffset=0},f.unifiedDraw=(w=[1,0,0,0,1,0,0,0,1],p=[0,0,0,0],function(o){var v=void 0!==o,M=v?this.pickShader:this.shader,b=this.plot.gl,L=this.plot.dataBox;if(0===this.pointCount)return o;var x=L[2]-L[0],S=L[3]-L[1],T=function m(w,p){var M,o=0,v=w.length>>>1;for(M=0;M<v;M++){var b=w[2*M],L=w[2*M+1];b>=p[0]&&b<=p[2]&&L>=p[1]&&L<=p[3]&&o++}return o}(this.points,L),n=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(T,.33333)));w[0]=2/x,w[4]=2/S,w[6]=-2*L[0]/x-1,w[7]=-2*L[1]/S-1,this.offsetBuffer.bind(),M.bind(),M.attributes.position.pointer(),M.uniforms.matrix=w,M.uniforms.color=this.color,M.uniforms.borderColor=this.borderColor,M.uniforms.pointCloud=n<5,M.uniforms.pointSize=n,M.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),v&&(p[0]=255&o,p[1]=o>>8&255,p[2]=o>>16&255,p[3]=o>>24&255,this.pickBuffer.bind(),M.attributes.pickId.pointer(b.UNSIGNED_BYTE),M.uniforms.pickOffset=p,this.pickOffset=o);var E=b.getParameter(b.BLEND),d=b.getParameter(b.DITHER);return E&&!this.blend&&b.disable(b.BLEND),d&&b.disable(b.DITHER),b.drawArrays(b.POINTS,0,this.pointCount),E&&!this.blend&&b.enable(b.BLEND),d&&b.enable(b.DITHER),o+this.pointCount}),f.draw=f.unifiedDraw,f.drawPick=f.unifiedDraw,f.pick=function(w,p,o){var v=this.pickOffset;if(o<v||o>=v+this.pointCount)return null;var b=o-v,L=this.points;return{object:this,pointId:b,dataCoord:[L[2*b],L[2*b+1]]}}},6093:function(u){u.exports=function y(e,r,l,a){var v,M,b,L,x,s=r[0],c=r[1],f=r[2],m=r[3],h=l[0],w=l[1],p=l[2],o=l[3];return(M=s*h+c*w+f*p+m*o)<0&&(M=-M,h=-h,w=-w,p=-p,o=-o),1-M>1e-6?(v=Math.acos(M),b=Math.sin(v),L=Math.sin((1-a)*v)/b,x=Math.sin(a*v)/b):(L=1-a,x=a),e[0]=L*s+x*h,e[1]=L*c+x*w,e[2]=L*f+x*p,e[3]=L*m+x*o,e}},8240:function(u){"use strict";u.exports=function(y){return y||0===y?y.toString():""}},4123:function(u,y,e){"use strict";var r=e(875);u.exports=function a(s,c,f){var m=l[c];if(m||(m=l[c]={}),s in m)return m[s];var h={textAlign:"center",textBaseline:"middle",lineHeight:1,font:c,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},w=r(s,h);h.triangles=!1;var o,v,p=r(s,h);if(f&&1!==f){for(o=0;o<w.positions.length;++o)for(v=0;v<w.positions[o].length;++v)w.positions[o][v]/=f;for(o=0;o<p.positions.length;++o)for(v=0;v<p.positions[o].length;++v)p.positions[o][v]/=f}var M=[[1/0,1/0],[-1/0,-1/0]],b=p.positions.length;for(o=0;o<b;++o){var L=p.positions[o];for(v=0;v<2;++v)M[0][v]=Math.min(M[0][v],L[v]),M[1][v]=Math.max(M[1][v],L[v])}return m[s]=[w,p,M]};var l={}},9282:function(u,y,e){var r=e(5158),l=e(6832),a=l(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),s=l(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),c=l(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),f=l(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),m=l(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),h=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],w={vertex:a,fragment:f,attributes:h},p={vertex:s,fragment:f,attributes:h},o={vertex:c,fragment:f,attributes:h},v={vertex:a,fragment:m,attributes:h},M={vertex:s,fragment:m,attributes:h},b={vertex:c,fragment:m,attributes:h};function L(x,S){var T=r(x,S),n=T.attributes;return n.position.location=0,n.color.location=1,n.glyph.location=2,n.id.location=3,T}y.createPerspective=function(x){return L(x,w)},y.createOrtho=function(x){return L(x,p)},y.createProject=function(x){return L(x,o)},y.createPickPerspective=function(x){return L(x,v)},y.createPickOrtho=function(x){return L(x,M)},y.createPickProject=function(x){return L(x,b)}},2182:function(u,y,e){"use strict";var r=e(3596),l=e(5827),a=e(2944),s=e(5306),c=e(104),f=e(9282),m=e(4123),h=e(8240),w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(Q,j){var Z=Q[0],G=Q[1],K=Q[2],at=Q[3];return Q[0]=j[0]*Z+j[4]*G+j[8]*K+j[12]*at,Q[1]=j[1]*Z+j[5]*G+j[9]*K+j[13]*at,Q[2]=j[2]*Z+j[6]*G+j[10]*K+j[14]*at,Q[3]=j[3]*Z+j[7]*G+j[11]*K+j[15]*at,Q}function o(Q,j,Z,G){return p(G,G),p(G,G),p(G,G)}function v(Q,j){this.index=Q,this.dataCoordinate=this.position=j}function M(Q){return!0===Q||Q>1?1:Q}function b(Q,j,Z,G,K,at,$,X,rt,et,st,dt){this.gl=Q,this.pixelRatio=1,this.shader=j,this.orthoShader=Z,this.projectShader=G,this.pointBuffer=K,this.colorBuffer=at,this.glyphBuffer=$,this.idBuffer=X,this.vao=rt,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=et,this.pickOrthoShader=st,this.pickProjectShader=dt,this.points=[],this._selectResult=new v(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}u.exports=function ut(Q){var j=Q.gl,Z=f.createPerspective(j),G=f.createOrtho(j),K=f.createProject(j),at=f.createPickPerspective(j),$=f.createPickOrtho(j),X=f.createPickProject(j),rt=l(j),et=l(j),st=l(j),dt=l(j),gt=new b(j,Z,G,K,rt,et,st,dt,a(j,[{buffer:rt,size:3,type:j.FLOAT},{buffer:et,size:4,type:j.FLOAT},{buffer:st,size:2,type:j.FLOAT},{buffer:dt,size:4,type:j.UNSIGNED_BYTE,normalized:!0}]),at,$,X);return gt.update(Q),gt};var L=b.prototype;L.pickSlots=1,L.setPickBase=function(Q){this.pickId=Q},L.isTransparent=function(){if(this.hasAlpha)return!0;for(var Q=0;Q<3;++Q)if(this.axesProject[Q]&&this.projectHasAlpha)return!0;return!1},L.isOpaque=function(){if(!this.hasAlpha)return!0;for(var Q=0;Q<3;++Q)if(this.axesProject[Q]&&!this.projectHasAlpha)return!0;return!1};var x=[0,0],S=[0,0,0],T=[0,0,0],n=[0,0,0,1],E=[0,0,0,1],d=w.slice(),F=[0,0,0],D=[[0,0,0],[0,0,0]];function N(Q){return Q[0]=Q[1]=Q[2]=0,Q}function k(Q,j){return Q[0]=j[0],Q[1]=j[1],Q[2]=j[2],Q[3]=1,Q}function O(Q,j,Z,G){return Q[0]=j[0],Q[1]=j[1],Q[2]=j[2],Q[Z]=G,Q}function z(Q,j,Z,G){var bt,K=j.axesProject,at=j.gl,$=Q.uniforms,X=Z.model||w,rt=Z.view||w,et=Z.projection||w,st=j.axesBounds,dt=function B(Q){for(var j=D,Z=0;Z<2;++Z)for(var G=0;G<3;++G)j[Z][G]=Math.max(Math.min(Q[Z][G],1e8),-1e8);return j}(j.clipBounds);bt=j.axes&&j.axes.lastCubeProps?j.axes.lastCubeProps.axis:[1,1,1],x[0]=2/at.drawingBufferWidth,x[1]=2/at.drawingBufferHeight,Q.bind(),$.view=rt,$.projection=et,$.screenSize=x,$.highlightId=j.highlightId,$.highlightScale=j.highlightScale,$.clipBounds=dt,$.pickGroup=j.pickId/255,$.pixelRatio=G;for(var gt=0;gt<3;++gt)if(K[gt]){$.scale=j.projectScale[gt],$.opacity=j.projectOpacity[gt];for(var Lt=d,It=0;It<16;++It)Lt[It]=0;for(It=0;It<4;++It)Lt[5*It]=1;Lt[5*gt]=0,Lt[12+gt]=bt[gt]<0?st[0][gt]:st[1][gt],c(Lt,X,Lt),$.model=Lt;var Mt=(gt+1)%3,xt=(gt+2)%3,At=N(S),Gt=N(T);At[Mt]=1,Gt[xt]=1;var Wt=o(0,0,0,k(n,At)),Pt=o(0,0,0,k(E,Gt));if(Math.abs(Wt[1])>Math.abs(Pt[1])){var Vt=Wt;Wt=Pt,Pt=Vt,Vt=At,At=Gt,Gt=Vt;var te=Mt;Mt=xt,xt=te}Wt[0]<0&&(At[Mt]=-1),Pt[1]>0&&(Gt[xt]=-1);var Qt=0,Bt=0;for(It=0;It<4;++It)Qt+=Math.pow(X[4*Mt+It],2),Bt+=Math.pow(X[4*xt+It],2);At[Mt]/=Math.sqrt(Qt),Gt[xt]/=Math.sqrt(Bt),$.axes[0]=At,$.axes[1]=Gt,$.fragClipBounds[0]=O(F,dt[0],gt,-1e8),$.fragClipBounds[1]=O(F,dt[1],gt,1e8),j.vao.bind(),j.vao.draw(at.TRIANGLES,j.vertexCount),j.lineWidth>0&&(at.lineWidth(j.lineWidth*G),j.vao.draw(at.LINES,j.lineVertexCount,j.vertexCount)),j.vao.unbind()}}var J=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function nt(Q,j,Z,G,K,at,$){var X=Z.gl;if((at===Z.projectHasAlpha||$)&&z(j,Z,G,K),at===Z.hasAlpha||$){Q.bind();var rt=Q.uniforms;rt.model=G.model||w,rt.view=G.view||w,rt.projection=G.projection||w,x[0]=2/X.drawingBufferWidth,x[1]=2/X.drawingBufferHeight,rt.screenSize=x,rt.highlightId=Z.highlightId,rt.highlightScale=Z.highlightScale,rt.fragClipBounds=J,rt.clipBounds=Z.axes.bounds,rt.opacity=Z.opacity,rt.pickGroup=Z.pickId/255,rt.pixelRatio=K,Z.vao.bind(),Z.vao.draw(X.TRIANGLES,Z.vertexCount),Z.lineWidth>0&&(X.lineWidth(Z.lineWidth*K),Z.vao.draw(X.LINES,Z.lineVertexCount,Z.vertexCount)),Z.vao.unbind()}}function it(Q,j,Z,G){var K;K=Array.isArray(Q)?j<Q.length?Q[j]:void 0:Q,K=h(K);var at=!0;r(K)&&(K="\u25bc",at=!1);var $=m(K,Z,G);return{mesh:$[0],lines:$[1],bounds:$[2],visible:at}}L.draw=function(Q){nt(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,Q,this.pixelRatio,!1,!1)},L.drawTransparent=function(Q){nt(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,Q,this.pixelRatio,!0,!1)},L.drawPick=function(Q){nt(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,Q,1,!0,!0)},L.pick=function(Q){if(!Q||Q.id!==this.pickId)return null;var j=Q.value[2]+(Q.value[1]<<8)+(Q.value[0]<<16);if(j>=this.pointCount||j<0)return null;var Z=this.points[j],G=this._selectResult;G.index=j;for(var K=0;K<3;++K)G.position[K]=G.dataCoordinate[K]=Z[K];return G},L.highlight=function(Q){if(Q){var j=Q.index;this.highlightId=[(255&j)/255,(j>>8&255)/255,(j>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},L.update=function(Q){if("perspective"in(Q=Q||{})&&(this.useOrtho=!Q.perspective),"orthographic"in Q&&(this.useOrtho=!!Q.orthographic),"lineWidth"in Q&&(this.lineWidth=Q.lineWidth),"project"in Q)if(Array.isArray(Q.project))this.axesProject=Q.project;else{var j=!!Q.project;this.axesProject=[j,j,j]}if("projectScale"in Q&&(this.projectScale=Array.isArray(Q.projectScale)?Q.projectScale.slice():[Z=+Q.projectScale,Z,Z]),this.projectHasAlpha=!1,"projectOpacity"in Q){var Z;this.projectOpacity=Array.isArray(Q.projectOpacity)?Q.projectOpacity.slice():[Z=+Q.projectOpacity,Z,Z];for(var G=0;G<3;++G)this.projectOpacity[G]=M(this.projectOpacity[G]),this.projectOpacity[G]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in Q&&(this.opacity=M(Q.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var X,rt,K=Q.position,at=Q.font||"normal",$=Q.alignment||[0,0];if(2===$.length)X=$[0],rt=$[1];else for(X=[],rt=[],G=0;G<$.length;++G)X[G]=$[G][0],rt[G]=$[G][1];var et=[1/0,1/0,1/0],st=[-1/0,-1/0,-1/0],dt=Q.glyph,bt=Q.color,gt=Q.size,Lt=Q.angle,It=Q.lineColor,Mt=-1,xt=0,At=0,Gt=0;if(K.length){Gt=K.length;t:for(G=0;G<Gt;++G){for(var Wt=K[G],Pt=0;Pt<3;++Pt)if(isNaN(Wt[Pt])||!isFinite(Wt[Pt]))continue t;var Bt=(Vt=it(dt,G,at,this.pixelRatio)).bounds;xt+=3*(te=Vt.mesh).cells.length,At+=2*(Qt=Vt.lines).edges.length}}var Ot=xt+At,qt=s.mallocFloat(3*Ot),ie=s.mallocFloat(4*Ot),oe=s.mallocFloat(2*Ot),pe=s.mallocUint32(Ot);if(Ot>0){var de=0,Fe=xt,Kt=[0,0,0,1],Et=[0,0,0,1],St=Array.isArray(bt)&&Array.isArray(bt[0]),Dt=Array.isArray(It)&&Array.isArray(It[0]);t:for(G=0;G<Gt;++G){for(Mt+=1,Wt=K[G],Pt=0;Pt<3;++Pt){if(isNaN(Wt[Pt])||!isFinite(Wt[Pt]))continue t;st[Pt]=Math.max(st[Pt],Wt[Pt]),et[Pt]=Math.min(et[Pt],Wt[Pt])}var Vt,te=(Vt=it(dt,G,at,this.pixelRatio)).mesh,Qt=Vt.lines,Ft=(Bt=Vt.bounds,Vt.visible);if(Ft)if(Array.isArray(bt)){if(3===(Nt=St?G<bt.length?bt[G]:[0,0,0,0]:bt).length){for(Pt=0;Pt<3;++Pt)Kt[Pt]=Nt[Pt];Kt[3]=1}else if(4===Nt.length){for(Pt=0;Pt<4;++Pt)Kt[Pt]=Nt[Pt];!this.hasAlpha&&Nt[3]<1&&(this.hasAlpha=!0)}}else Kt[0]=Kt[1]=Kt[2]=0,Kt[3]=1;else Kt=[1,1,1,0];if(Ft)if(Array.isArray(It)){var Nt;if(3===(Nt=Dt?G<It.length?It[G]:[0,0,0,0]:It).length){for(Pt=0;Pt<3;++Pt)Et[Pt]=Nt[Pt];Et[Pt]=1}else if(4===Nt.length){for(Pt=0;Pt<4;++Pt)Et[Pt]=Nt[Pt];!this.hasAlpha&&Nt[3]<1&&(this.hasAlpha=!0)}}else Et[0]=Et[1]=Et[2]=0,Et[3]=1;else Et=[1,1,1,0];var Rt=.5;Ft?Array.isArray(gt)?Rt=G<gt.length?+gt[G]:12:gt?Rt=+gt:this.useOrtho&&(Rt=12):Rt=0;var wt=0;Array.isArray(Lt)?wt=G<Lt.length?+Lt[G]:0:Lt&&(wt=+Lt);var ft=Math.cos(wt),pt=Math.sin(wt);for(Wt=K[G],Pt=0;Pt<3;++Pt)st[Pt]=Math.max(st[Pt],Wt[Pt]),et[Pt]=Math.min(et[Pt],Wt[Pt]);var kt=X,Zt=rt;kt=0,Array.isArray(X)?kt=G<X.length?X[G]:0:X&&(kt=X),Zt=0,Array.isArray(rt)?Zt=G<rt.length?rt[G]:0:rt&&(Zt=rt);var ee=[kt*=kt>0?1-Bt[0][0]:kt<0?1+Bt[1][0]:1,Zt*=Zt>0?1-Bt[0][1]:Zt<0?1+Bt[1][1]:1],Pe=te.cells||[],Ge=te.positions||[];for(Pt=0;Pt<Pe.length;++Pt)for(var se=Pe[Pt],Be=0;Be<3;++Be){for(var Ke=0;Ke<3;++Ke)qt[3*de+Ke]=Wt[Ke];for(Ke=0;Ke<4;++Ke)ie[4*de+Ke]=Kt[Ke];pe[de]=Mt,oe[2*de]=Rt*(ft*(xe=Ge[se[Be]])[0]-pt*xe[1]+ee[0]),oe[2*de+1]=Rt*(pt*xe[0]+ft*xe[1]+ee[1]),de+=1}for(Pe=Qt.edges,Ge=Qt.positions,Pt=0;Pt<Pe.length;++Pt)for(se=Pe[Pt],Be=0;Be<2;++Be){for(Ke=0;Ke<3;++Ke)qt[3*Fe+Ke]=Wt[Ke];for(Ke=0;Ke<4;++Ke)ie[4*Fe+Ke]=Et[Ke];var xe;pe[Fe]=Mt,oe[2*Fe]=Rt*(ft*(xe=Ge[se[Be]])[0]-pt*xe[1]+ee[0]),oe[2*Fe+1]=Rt*(pt*xe[0]+ft*xe[1]+ee[1]),Fe+=1}}}this.bounds=[et,st],this.points=K,this.pointCount=K.length,this.vertexCount=xt,this.lineVertexCount=At,this.pointBuffer.update(qt),this.colorBuffer.update(ie),this.glyphBuffer.update(oe),this.idBuffer.update(pe),s.free(qt),s.free(ie),s.free(oe),s.free(pe)},L.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},1884:function(u,y,e){"use strict";var r=e(6832);y.boxVertex=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),y.boxFragment=r(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},6623:function(u,y,e){"use strict";var r=e(5158),l=e(5827),a=e(1884);function s(m,h,w){this.plot=m,this.boxBuffer=h,this.boxShader=w,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}u.exports=function f(m,h){var w=m.gl,v=new s(m,l(w,[0,0,0,1,1,0,1,1]),r(w,a.boxVertex,a.boxFragment));return v.update(h),m.addOverlay(v),v};var c=s.prototype;c.draw=function(){if(this.enabled){var m=this.plot,h=this.selectBox,w=this.borderWidth,o=this.innerColor,M=this.outerColor,b=this.borderColor,L=m.box,x=m.screenBox,S=m.dataBox,T=m.viewBox,n=m.pixelRatio,E=(h[0]-S[0])*(T[2]-T[0])/(S[2]-S[0])+T[0],d=(h[1]-S[1])*(T[3]-T[1])/(S[3]-S[1])+T[1],F=(h[2]-S[0])*(T[2]-T[0])/(S[2]-S[0])+T[0],D=(h[3]-S[1])*(T[3]-T[1])/(S[3]-S[1])+T[1];if(E=Math.max(E,T[0]),d=Math.max(d,T[1]),F=Math.min(F,T[2]),D=Math.min(D,T[3]),!(F<E||D<d)){L.bind();var N=x[2]-x[0],k=x[3]-x[1];if(this.outerFill&&(L.drawBox(0,0,N,d,M),L.drawBox(0,d,E,D,M),L.drawBox(0,D,N,k,M),L.drawBox(F,d,N,D,M)),this.innerFill&&L.drawBox(E,d,F,D,o),w>0){var O=w*n;L.drawBox(E-O,d-O,F+O,d+O,b),L.drawBox(E-O,D-O,F+O,D+O,b),L.drawBox(E-O,d-O,E+O,D+O,b),L.drawBox(F-O,d-O,F+O,D+O,b)}}}},c.update=function(m){this.innerFill=!!(m=m||{}).innerFill,this.outerFill=!!m.outerFill,this.innerColor=(m.innerColor||[0,0,0,.5]).slice(),this.outerColor=(m.outerColor||[0,0,0,.5]).slice(),this.borderColor=(m.borderColor||[0,0,0,1]).slice(),this.borderWidth=m.borderWidth||0,this.selectBox=(m.selectBox||this.selectBox).slice()},c.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},2611:function(u,y,e){"use strict";u.exports=function w(p,o){var v=o[0],M=o[1];return new m(p,r(p,v,M,{}),l.mallocUint8(v*M*4))};var r=e(4234),l=e(5306),a=e(5050),s=e(2288).nextPow2;function f(p,o,v,M,b){this.coord=[p,o],this.id=v,this.value=M,this.distance=b}function m(p,o,v){this.gl=p,this.fbo=o,this.buffer=v,this._readTimeout=null;var M=this;this._readCallback=function(){!M.gl||(o.bind(),p.readPixels(0,0,o.shape[0],o.shape[1],p.RGBA,p.UNSIGNED_BYTE,M.buffer),M._readTimeout=null)}}var h=m.prototype;Object.defineProperty(h,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(p){if(this.gl){this.fbo.shape=p;var o=this.fbo.shape[0],v=this.fbo.shape[1];if(v*o*4>this.buffer.length){l.free(this.buffer);for(var M=this.buffer=l.mallocUint8(s(v*o*4)),b=0;b<v*o*4;++b)M[b]=255}return p}}}),h.begin=function(){var p=this.gl;!p||(this.fbo.bind(),p.clearColor(1,1,1,1),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT))},h.end=function(){var p=this.gl;!p||(p.bindFramebuffer(p.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},h.query=function(p,o,v){if(!this.gl)return null;var M=this.fbo.shape.slice();p|=0,o|=0,"number"!=typeof v&&(v=1);var b=0|Math.min(Math.max(p-v,0),M[0]),L=0|Math.min(Math.max(p+v,0),M[0]),x=0|Math.min(Math.max(o-v,0),M[1]),S=0|Math.min(Math.max(o+v,0),M[1]);if(L<=b||S<=x)return null;var T=[L-b,S-x],n=a(this.buffer,[T[0],T[1],4],[4,4*M[0],1],4*(b+M[0]*x)),E=function(p,o,v){for(var M=1e8,b=-1,L=-1,x=p.shape[0],S=p.shape[1],T=0;T<x;T++)for(var n=0;n<S;n++){var E=p.get(T,n,0),d=p.get(T,n,1),F=p.get(T,n,2),D=p.get(T,n,3);if(E<255||d<255||F<255||D<255){var N=o-T,k=v-n,O=N*N+k*k;O<M&&(M=O,b=T,L=n)}}return[b,L,M]}(n.hi(T[0],T[1],1),v,v),d=E[0],F=E[1];return d<0||Math.pow(this.radius,2)<E[2]?null:new f(d+b|0,F+x|0,n.get(d,F,0),[n.get(d,F,1),n.get(d,F,2),n.get(d,F,3)],Math.sqrt(E[2]))},h.dispose=function(){!this.gl||(this.fbo.dispose(),l.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},5158:function(u,y,e){"use strict";var r=e(9016),l=e(4280),a=e(3984),s=e(1628),c=e(2631),f=e(9068);function m(o){this.gl=o,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var h=m.prototype;function w(o,v){return o.name<v.name?-1:1}h.bind=function(){this.program||this._relink();var o,v=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),M=this.gl.lastAttribCount;if(v>M)for(o=M;o<v;o++)this.gl.enableVertexAttribArray(o);else if(M>v)for(o=v;o<M;o++)this.gl.disableVertexAttribArray(o);this.gl.lastAttribCount=v,this.gl.useProgram(this.program)},h.dispose=function(){for(var o=this.gl.lastAttribCount,v=0;v<o;v++)this.gl.disableVertexAttribArray(v);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},h.update=function(o,v,M,b){if(!v||1===arguments.length){var L=o;o=L.vertex,v=L.fragment,M=L.uniforms,b=L.attributes}var x=this,S=x.gl,T=x._vref;x._vref=s.shader(S,S.VERTEX_SHADER,o),T&&T.dispose(),x.vertShader=x._vref.shader;var n=this._fref;if(x._fref=s.shader(S,S.FRAGMENT_SHADER,v),n&&n.dispose(),x.fragShader=x._fref.shader,!M||!b){var E=S.createProgram();if(S.attachShader(E,x.fragShader),S.attachShader(E,x.vertShader),S.linkProgram(E),!S.getProgramParameter(E,S.LINK_STATUS)){var d=S.getProgramInfoLog(E);throw new f(d,"Error linking program:"+d)}M=M||c.uniforms(S,E),b=b||c.attributes(S,E),S.deleteProgram(E)}(b=b.slice()).sort(w);var k,F=[],D=[],N=[];for(k=0;k<b.length;++k){var O=b[k];if(O.type.indexOf("mat")>=0){for(var B=0|O.type.charAt(O.type.length-1),z=new Array(B),U=0;U<B;++U)z[U]=N.length,D.push(O.name+"["+U+"]"),"number"==typeof O.location?N.push(O.location+U):Array.isArray(O.location)&&O.location.length===B&&"number"==typeof O.location[U]?N.push(0|O.location[U]):N.push(-1);F.push({name:O.name,type:O.type,locations:z})}else F.push({name:O.name,type:O.type,locations:[N.length]}),D.push(O.name),N.push("number"==typeof O.location?0|O.location:-1)}var H=0;for(k=0;k<N.length;++k)if(N[k]<0){for(;N.indexOf(H)>=0;)H+=1;N[k]=H}var J=new Array(M.length);function nt(){x.program=s.program(S,x._vref,x._fref,D,N);for(var it=0;it<M.length;++it)J[it]=S.getUniformLocation(x.program,M[it].name)}nt(),x._relink=nt,x.types={uniforms:a(M),attributes:a(b)},x.attributes=l(S,x,F,N),Object.defineProperty(x,"uniforms",r(S,x,M,J))},u.exports=function p(o,v,M,b,L){var x=new m(o);return x.update(v,M,b,L),x}},9068:function(u){function y(e,r,l){this.shortMessage=r||"",this.longMessage=l||"",this.rawError=e||"",this.message="gl-shader: "+(r||e||"")+(l?"\n"+l:""),this.stack=(new Error).stack}(y.prototype=new Error).name="GLError",y.prototype.constructor=y,u.exports=y},4280:function(u,y,e){"use strict";u.exports=function m(h,w,p,o){for(var v={},M=0,b=p.length;M<b;++M){var L=p[M],x=L.name,S=L.type,T=L.locations;switch(S){case"bool":case"int":case"float":c(h,w,T[0],o,1,v,x);break;default:if(S.indexOf("vec")>=0){if((n=S.charCodeAt(S.length-1)-48)<2||n>4)throw new r("","Invalid data type for attribute "+x+": "+S);c(h,w,T[0],o,n,v,x)}else{if(!(S.indexOf("mat")>=0))throw new r("","Unknown data type for attribute "+x+": "+S);var n;if((n=S.charCodeAt(S.length-1)-48)<2||n>4)throw new r("","Invalid data type for attribute "+x+": "+S);f(h,w,T,o,n,v,x)}}}return v};var r=e(9068);function l(h,w,p,o,v,M){this._gl=h,this._wrapper=w,this._index=p,this._locations=o,this._dimension=v,this._constFunc=M}var a=l.prototype;a.pointer=function(w,p,o,v){var M=this,b=M._gl,L=M._locations[M._index];b.vertexAttribPointer(L,M._dimension,w||b.FLOAT,!!p,o||0,v||0),b.enableVertexAttribArray(L)},a.set=function(h,w,p,o){return this._constFunc(this._locations[this._index],h,w,p,o)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(h){return h!==this._locations[this._index]&&(this._locations[this._index]=0|h,this._wrapper.program=null),0|h}});var s=[function(h,w,p){return void 0===p.length?h.vertexAttrib1f(w,p):h.vertexAttrib1fv(w,p)},function(h,w,p,o){return void 0===p.length?h.vertexAttrib2f(w,p,o):h.vertexAttrib2fv(w,p)},function(h,w,p,o,v){return void 0===p.length?h.vertexAttrib3f(w,p,o,v):h.vertexAttrib3fv(w,p)},function(h,w,p,o,v,M){return void 0===p.length?h.vertexAttrib4f(w,p,o,v,M):h.vertexAttrib4fv(w,p)}];function c(h,w,p,o,v,M,b){var L=s[v],x=new l(h,w,p,o,v,L);Object.defineProperty(M,b,{set:function(S){return h.disableVertexAttribArray(o[p]),L(h,o[p],S),S},get:function(){return x},enumerable:!0})}function f(h,w,p,o,v,M,b){for(var L=new Array(v),x=new Array(v),S=0;S<v;++S)c(h,w,p[S],o,v,L,S),x[S]=L[S];Object.defineProperty(L,"location",{set:function(E){if(Array.isArray(E))for(var d=0;d<v;++d)x[d].location=E[d];else for(d=0;d<v;++d)x[d].location=E+d;return E},get:function(){for(var E=new Array(v),d=0;d<v;++d)E[d]=o[p[d]];return E},enumerable:!0}),L.pointer=function(E,d,F,D){E=E||h.FLOAT,d=!!d,F=F||v*v,D=D||0;for(var N=0;N<v;++N){var k=o[p[N]];h.vertexAttribPointer(k,v,E,d,F,D+N*v),h.enableVertexAttribArray(k)}};var T=new Array(v),n=h["vertexAttrib"+v+"fv"];Object.defineProperty(M,b,{set:function(E){for(var d=0;d<v;++d){var F=o[p[d]];if(h.disableVertexAttribArray(F),Array.isArray(E[0]))n.call(h,F,E[d]);else{for(var D=0;D<v;++D)T[D]=E[v*d+D];n.call(h,F,T)}}return E},get:function(){return L},enumerable:!0})}},9016:function(u,y,e){"use strict";var r=e(3984),l=e(9068);function a(f){return function(){return f}}function s(f,m){for(var h=new Array(f),w=0;w<f;++w)h[w]=m;return h}u.exports=function c(f,m,h,w){function p(S){return function(T,n,E){return T.getUniform(n.program,E[S])}}function o(S){return function(n){for(var E=v("",S),d=0;d<E.length;++d){var F=E[d],D=F[0],N=F[1];if(w[N]){var k=n;if("string"==typeof D&&(0===D.indexOf(".")||0===D.indexOf("["))){var O=D;if(0===D.indexOf(".")&&(O=D.slice(1)),O.indexOf("]")===O.length-1){var B=O.indexOf("["),z=O.slice(0,B),U=O.slice(B+1,O.length-1);k=z?n[z][U]:n[U]}else k=n[O]}var J,H=h[N].type;switch(H){case"bool":case"int":case"sampler2D":case"samplerCube":f.uniform1i(w[N],k);break;case"float":f.uniform1f(w[N],k);break;default:var nt=H.indexOf("vec");if(!(0<=nt&&nt<=1&&H.length===4+nt)){if(0===H.indexOf("mat")&&4===H.length){if((J=H.charCodeAt(H.length-1)-48)<2||J>4)throw new l("","Invalid uniform dimension type for matrix "+name+": "+H);f["uniformMatrix"+J+"fv"](w[N],!1,k);break}throw new l("","Unknown uniform data type for "+name+": "+H)}if((J=H.charCodeAt(H.length-1)-48)<2||J>4)throw new l("","Invalid data type");switch(H.charAt(0)){case"b":case"i":f["uniform"+J+"iv"](w[N],k);break;case"v":f["uniform"+J+"fv"](w[N],k);break;default:throw new l("","Unrecognized data type for vector "+name+": "+H)}}}}}}function v(S,T){if("object"!=typeof T)return[[S,T]];var n=[];for(var E in T){var d=T[E],F=S;parseInt(E)+""===E?F+="["+E+"]":F+="."+E,"object"==typeof d?n.push.apply(n,v(F,d)):n.push([F,d])}return n}function b(S,T,n){if("object"==typeof n){var E=L(n);Object.defineProperty(S,T,{get:a(E),set:o(n),enumerable:!0,configurable:!1})}else w[n]?Object.defineProperty(S,T,{get:p(n),set:o(n),enumerable:!0,configurable:!1}):S[T]=function M(S){switch(S){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var T=S.indexOf("vec");if(0<=T&&T<=1&&S.length===4+T){if((n=S.charCodeAt(S.length-1)-48)<2||n>4)throw new l("","Invalid data type");return"b"===S.charAt(0)?s(n,!1):s(n,0)}if(0===S.indexOf("mat")&&4===S.length){var n;if((n=S.charCodeAt(S.length-1)-48)<2||n>4)throw new l("","Invalid uniform dimension type for matrix "+name+": "+S);return s(n*n,0)}throw new l("","Unknown uniform data type for "+name+": "+S)}}(h[n].type)}function L(S){var T;if(Array.isArray(S)){T=new Array(S.length);for(var n=0;n<S.length;++n)b(T,n,S[n])}else for(var E in T={},S)b(T,E,S[E]);return T}var x=r(h,!0);return{get:a(L(x)),set:o(x),enumerable:!0,configurable:!0}}},3984:function(u){"use strict";u.exports=function y(e,r){for(var l={},a=0;a<e.length;++a)for(var c=e[a].name.split("."),f=l,m=0;m<c.length;++m){var h=c[m].split("[");if(h.length>1){h[0]in f||(f[h[0]]=[]),f=f[h[0]];for(var w=1;w<h.length;++w){var p=parseInt(h[w]);w<h.length-1||m<c.length-1?(p in f||(f[p]=w<h.length-1?[]:{}),f=f[p]):f[p]=r?a:e[a].type}}else m<c.length-1?(h[0]in f||(f[h[0]]={}),f=f[h[0]]):f[h[0]]=r?a:e[a].type}return l}},2631:function(u,y){"use strict";y.uniforms=function a(c,f){for(var m=c.getProgramParameter(f,c.ACTIVE_UNIFORMS),h=[],w=0;w<m;++w){var p=c.getActiveUniform(f,w);if(p){var o=l(c,p.type);if(p.size>1)for(var v=0;v<p.size;++v)h.push({name:p.name.replace("[0]","["+v+"]"),type:o});else h.push({name:p.name,type:o})}}return h},y.attributes=function s(c,f){for(var m=c.getProgramParameter(f,c.ACTIVE_ATTRIBUTES),h=[],w=0;w<m;++w){var p=c.getActiveAttrib(f,w);p&&h.push({name:p.name,type:l(c,p.type)})}return h};var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},r=null;function l(c,f){if(!r){var m=Object.keys(e);r={};for(var h=0;h<m.length;++h){var w=m[h];r[c[w]]=e[w]}}return r[f]}},1628:function(u,y,e){"use strict";y.shader=function v(b,L,x){return o(b).getShaderReference(L,x)},y.program=function M(b,L,x,S,T){return o(b).getProgram(L,x,S,T)};var r=e(9068),l=e(3530),s=new("undefined"==typeof WeakMap?e(4037):WeakMap),c=0;function f(b,L,x,S,T,n,E){this.id=b,this.src=L,this.type=x,this.shader=S,this.count=n,this.programs=[],this.cache=E}function m(b){this.gl=b,this.shaders=[{},{}],this.programs={}}f.prototype.dispose=function(){if(0==--this.count){for(var b=this.cache,L=b.gl,x=this.programs,S=0,T=x.length;S<T;++S){var n=b.programs[x[S]];n&&(delete b.programs[S],L.deleteProgram(n))}L.deleteShader(this.shader),delete b.shaders[this.type===L.FRAGMENT_SHADER|0][this.src]}};var h=m.prototype;function o(b){var L=s.get(b);return L||(L=new m(b),s.set(b,L)),L}h.getShaderReference=function(b,L){var x=this.gl,S=this.shaders[b===x.FRAGMENT_SHADER|0],T=S[L];if(T&&x.isShader(T.shader))T.count+=1;else{var n=function w(b,L,x){var S=b.createShader(L);if(b.shaderSource(S,x),b.compileShader(S),!b.getShaderParameter(S,b.COMPILE_STATUS)){var T=b.getShaderInfoLog(S);try{var n=l(T,x,L)}catch(E){throw console.warn("Failed to format compiler error: "+E),new r(T,"Error compiling shader:\n"+T)}throw new r(T,n.short,n.long)}return S}(x,b,L);T=S[L]=new f(c++,L,b,n,[],1,this)}return T},h.getProgram=function(b,L,x,S){var T=[b.id,L.id,x.join(":"),S.join(":")].join("@"),n=this.programs[T];return(!n||!this.gl.isProgram(n))&&(this.programs[T]=n=function p(b,L,x,S,T){var n=b.createProgram();b.attachShader(n,L),b.attachShader(n,x);for(var E=0;E<S.length;++E)b.bindAttribLocation(n,T[E],S[E]);if(b.linkProgram(n),!b.getProgramParameter(n,b.LINK_STATUS)){var d=b.getProgramInfoLog(n);throw new r(d,"Error linking program: "+d)}return n}(this.gl,b.shader,L.shader,x,S),b.programs.push(T),L.programs.push(T)),n}},3050:function(u){"use strict";function y(l){this.plot=l,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}u.exports=function r(l,a){var s=new y(l);return s.update(a),l.addOverlay(s),s};var e=y.prototype;e.update=function(l){this.enable=((l=l||{}).enable||[!0,!0,!1,!1]).slice(),this.width=(l.width||[1,1,1,1]).slice(),this.color=(l.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(a){return a.slice()}),this.center=(l.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},e.draw=function(){var l=this.enable,a=this.width,s=this.color,c=this.center,f=this.plot,m=f.line,h=f.dataBox,w=f.viewBox;if(m.bind(),h[0]<=c[0]&&c[0]<=h[2]&&h[1]<=c[1]&&c[1]<=h[3]){var p=w[0]+(c[0]-h[0])/(h[2]-h[0])*(w[2]-w[0]),o=w[1]+(c[1]-h[1])/(h[3]-h[1])*(w[3]-w[1]);l[0]&&m.drawLine(p,o,w[0],o,a[0],s[0]),l[1]&&m.drawLine(p,o,p,w[1],a[1],s[1]),l[2]&&m.drawLine(p,o,w[2],o,a[2],s[2]),l[3]&&m.drawLine(p,o,p,w[3],a[3],s[3])}},e.dispose=function(){this.plot.removeOverlay(this)}},3540:function(u,y,e){"use strict";var r=e(6832),l=e(5158),a=r(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),s=r(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);u.exports=function(c){return l(c,a,s,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(u,y,e){"use strict";var r=e(5827),l=e(2944),a=e(3540);u.exports=function p(o,v){var M=[];function b(n,E,d,F,D,N){var k=[n,E,d,0,0,0,1];k[F+3]=1,k[F]=D,M.push.apply(M,k),k[6]=-1,M.push.apply(M,k),k[F]=N,M.push.apply(M,k),M.push.apply(M,k),k[6]=1,M.push.apply(M,k),k[F]=D,M.push.apply(M,k)}b(0,0,0,0,0,1),b(0,0,0,1,0,1),b(0,0,0,2,0,1),b(1,0,0,1,-1,1),b(1,0,0,2,-1,1),b(0,1,0,0,-1,1),b(0,1,0,2,-1,1),b(0,0,1,0,-1,1),b(0,0,1,1,-1,1);var L=r(o,M),x=l(o,[{type:o.FLOAT,buffer:L,size:3,offset:0,stride:28},{type:o.FLOAT,buffer:L,size:3,offset:12,stride:28},{type:o.FLOAT,buffer:L,size:1,offset:24,stride:28}]),S=a(o);S.attributes.position.location=0,S.attributes.color.location=1,S.attributes.weight.location=2;var T=new c(o,L,x,S);return T.update(v),T};var s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(o,v,M,b){this.gl=o,this.buffer=v,this.vao=M,this.shader=b,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var f=c.prototype,m=[0,0,0],h=[0,0,0],w=[0,0];f.isTransparent=function(){return!1},f.drawTransparent=function(o){},f.draw=function(o){var v=this.gl,M=this.vao,b=this.shader;M.bind(),b.bind();var T,L=o.model||s,x=o.view||s,S=o.projection||s;this.axes&&(T=this.axes.lastCubeProps.axis);for(var n=m,E=h,d=0;d<3;++d)T&&T[d]<0?(n[d]=this.bounds[0][d],E[d]=this.bounds[1][d]):(n[d]=this.bounds[1][d],E[d]=this.bounds[0][d]);for(w[0]=v.drawingBufferWidth,w[1]=v.drawingBufferHeight,b.uniforms.model=L,b.uniforms.view=x,b.uniforms.projection=S,b.uniforms.coordinates=[this.position,n,E],b.uniforms.colors=this.colors,b.uniforms.screenShape=w,d=0;d<3;++d)b.uniforms.lineWidth=this.lineWidth[d]*this.pixelRatio,this.enabled[d]&&(M.draw(v.TRIANGLES,6,6*d),this.drawSides[d]&&M.draw(v.TRIANGLES,12,18+12*d));M.unbind()},f.update=function(o){!o||("bounds"in o&&(this.bounds=o.bounds),"position"in o&&(this.position=o.position),"lineWidth"in o&&(this.lineWidth=o.lineWidth),"colors"in o&&(this.colors=o.colors),"enabled"in o&&(this.enabled=o.enabled),"drawSides"in o&&(this.drawSides=o.drawSides))},f.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},9578:function(u,y,e){var r=e(6832),l=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),a=r(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),s=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),c=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);y.meshShader={vertex:l,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},y.pickShader={vertex:s,fragment:c,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(u,y,e){"use strict";var r=e(2858),l=e(4020),a=["xyz","xzy","yxz","yzx","zxy","zyx"],c=function(b,L,x,S){for(var T=0,n=0;n<b.length;n++)for(var E=b[n].velocities,d=0;d<E.length;d++)T=Math.max(T,r.length(E[d]));var F=b.map(function(nt){return function(b,L,x,S){for(var T=b.points,n=b.velocities,E=b.divergences,d=[],F=[],D=[],N=[],k=[],O=[],B=0,z=0,U=l.create(),H=l.create(),nt=0;nt<T.length;nt++){var it=T[nt],ut=n[nt],Q=E[nt];0===L&&(Q=.05*x),z=r.length(ut)/S,U=l.create(),r.copy(U,ut),U[3]=Q;for(var j=0;j<8;j++)k[j]=[it[0],it[1],it[2],j];if(N.length>0)for(j=0;j<8;j++){var Z=(j+1)%8;d.push(N[j],k[j],k[Z],k[Z],N[Z],N[j]),D.push(H,U,U,U,H,H),O.push(B,z,z,z,B,B);var G=d.length;F.push([G-6,G-5,G-4],[G-3,G-2,G-1])}var K=N;N=k,k=K;var at=H;H=U,U=at;var $=B;B=z,z=$}return{positions:d,cells:F,vectors:D,vertexIntensity:O}}(nt,x,S,T)}),D=[],N=[],k=[],O=[];for(n=0;n<F.length;n++){var B=F[n],z=D.length;for(D=D.concat(B.positions),k=k.concat(B.vectors),O=O.concat(B.vertexIntensity),d=0;d<B.cells.length;d++){var U=B.cells[d],H=[];N.push(H);for(var J=0;J<U.length;J++)H.push(U[J]+z)}}return{positions:D,cells:N,vectors:k,vertexIntensity:O,colormap:L}},f=function(b,L){var S,x=b.length;for(S=0;S<x;S++){var T=b[S];if(T===L)return S;if(T>L)return S-1}return S},m=function(b,L,x){return b<L?L:b>x?x:b},p=function(b){var L=1/0;b.sort(function(n,E){return n-E});for(var x=b.length,S=1;S<x;S++){var T=Math.abs(b[S]-b[S-1]);T<L&&(L=T)}return L};u.exports=function(b,L){var x=b.startingPositions,S=b.maxLength||1e3,T=b.tubeSize||1,n=b.absoluteTubeSize,E=b.gridFill||"+x+y+z",d={};-1!==E.indexOf("-x")&&(d.reversedX=!0),-1!==E.indexOf("-y")&&(d.reversedY=!0),-1!==E.indexOf("-z")&&(d.reversedZ=!0),d.filled=a.indexOf(E.replace(/-/g,"").replace(/\+/g,""));var Mt,xt,At,Gt,F=b.getVelocity||function(Mt){return function(b,L,x){var S=L.vectors,T=L.meshgrid,n=b[0],E=b[1],d=b[2],F=T[0].length,D=T[1].length,N=T[2].length,k=f(T[0],n),O=f(T[1],E),B=f(T[2],d),z=k+1,U=O+1,H=B+1;if(k=m(k,0,F-1),z=m(z,0,F-1),O=m(O,0,D-1),U=m(U,0,D-1),B=m(B,0,N-1),H=m(H,0,N-1),k<0||O<0||B<0||z>F-1||U>D-1||H>N-1)return r.create();var at,$,X,rt,et,st,J=T[0][k],it=T[1][O],Q=T[2][B],Z=(n-J)/(T[0][z]-J),G=(E-it)/(T[1][U]-it),K=(d-Q)/(T[2][H]-Q);switch(isFinite(Z)||(Z=.5),isFinite(G)||(G=.5),isFinite(K)||(K=.5),x.reversedX&&(k=F-1-k,z=F-1-z),x.reversedY&&(O=D-1-O,U=D-1-U),x.reversedZ&&(B=N-1-B,H=N-1-H),x.filled){case 5:et=B,st=H,X=O*N,rt=U*N,at=k*N*D,$=z*N*D;break;case 4:et=B,st=H,at=k*N,$=z*N,X=O*N*F,rt=U*N*F;break;case 3:X=O,rt=U,et=B*D,st=H*D,at=k*D*N,$=z*D*N;break;case 2:X=O,rt=U,at=k*D,$=z*D,et=B*D*F,st=H*D*F;break;case 1:at=k,$=z,et=B*F,st=H*F,X=O*F*N,rt=U*F*N;break;default:at=k,$=z,X=O*F,rt=U*F,et=B*F*D,st=H*F*D}var dt=S[at+X+et],bt=S[at+X+st],gt=S[at+rt+et],Lt=S[at+rt+st],It=S[$+X+et],Mt=S[$+X+st],xt=S[$+rt+et],At=S[$+rt+st],Gt=r.create(),Wt=r.create(),Pt=r.create(),Vt=r.create();r.lerp(Gt,dt,It,Z),r.lerp(Wt,bt,Mt,Z),r.lerp(Pt,gt,xt,Z),r.lerp(Vt,Lt,At,Z);var te=r.create(),Qt=r.create();r.lerp(te,Gt,Pt,G),r.lerp(Qt,Wt,Vt,G);var Bt=r.create();return r.lerp(Bt,te,Qt,K),Bt}(Mt,b,d)},D=b.getDivergence||function(Mt,xt){var At=r.create(),Gt=1e-4;r.add(At,Mt,[Gt,0,0]);var Wt=F(At);r.subtract(Wt,Wt,xt),r.scale(Wt,Wt,1/Gt),r.add(At,Mt,[0,Gt,0]);var Pt=F(At);r.subtract(Pt,Pt,xt),r.scale(Pt,Pt,1/Gt),r.add(At,Mt,[0,0,Gt]);var Vt=F(At);return r.subtract(Vt,Vt,xt),r.scale(Vt,Vt,1/Gt),r.add(At,Wt,Pt),r.add(At,At,Vt),At},N=[],k=L[0][0],O=L[0][1],B=L[0][2],z=L[1][0],U=L[1][1],H=L[1][2],it=10*r.distance(L[0],L[1])/S,ut=it*it,Q=1,j=0,Z=x.length;Z>1&&(Q=function(b){for(var L=[],x=[],S=[],T={},n={},E={},d=b.length,F=0;F<d;F++){var D=b[F],N=D[0],k=D[1],O=D[2];T[N]||(L.push(N),T[N]=!0),n[k]||(x.push(k),n[k]=!0),E[O]||(S.push(O),E[O]=!0)}var B=p(L),z=p(x),U=p(S),H=Math.min(B,z,U);return isFinite(H)?H:1}(x));for(var G=0;G<Z;G++){var K=r.create();r.copy(K,x[G]);var at=[K],$=[],X=F(K),rt=K;$.push(X);var et=[],st=D(K,X),dt=r.length(st);isFinite(dt)&&dt>j&&(j=dt),et.push(dt),N.push({points:at,velocities:$,divergences:et});for(var bt=0;bt<100*S&&at.length<S&&(xt=void 0,At=void 0,Gt=void 0,At=(Mt=K)[1],Gt=Mt[2],!((xt=Mt[0])<k||xt>z||At<O||At>U||Gt<B||Gt>H));){bt++;var gt=r.clone(X),Lt=r.squaredLength(gt);if(0===Lt)break;Lt>ut&&r.scale(gt,gt,it/Math.sqrt(Lt)),r.add(gt,gt,K),X=F(gt),r.squaredDistance(rt,gt)-ut>-1e-4*ut&&(at.push(gt),rt=gt,$.push(X),st=D(gt,X),dt=r.length(st),isFinite(dt)&&dt>j&&(j=dt),et.push(dt)),K=gt}}var It=c(N,b.colormap,j,Q);return n?It.tubeScale=n:(0===j&&(j=1),It.tubeScale=.5*T*Q/j),It};var v=e(9578),M=e(1140).createMesh;u.exports.createTubeMesh=function(b,L){return M(b,L,{shaders:v,traceType:"streamtube"})}},9054:function(u,y,e){var r=e(5158),l=e(6832),a=l(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),s=l(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),c=l(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),f=l(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);y.createShader=function(m){var h=r(m,a,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h.attributes.normal.location=2,h},y.createPickShader=function(m){var h=r(m,a,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h.attributes.normal.location=2,h},y.createContourShader=function(m){var h=r(m,c,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h},y.createPickContourShader=function(m){var h=r(m,c,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h}},3754:function(u,y,e){"use strict";u.exports=function at($){var X=$.gl,rt=x(X),et=T(X),st=S(X),dt=n(X),bt=l(X),gt=a(X,[{buffer:bt,size:4,stride:40,offset:0},{buffer:bt,size:3,stride:40,offset:16},{buffer:bt,size:3,stride:40,offset:28}]),Lt=l(X),It=a(X,[{buffer:Lt,size:4,stride:20,offset:0},{buffer:Lt,size:1,stride:20,offset:16}]),Mt=l(X),xt=a(X,[{buffer:Mt,size:2,type:X.FLOAT}]),At=s(X,1,256,X.RGBA,X.UNSIGNED_BYTE);At.minFilter=X.LINEAR,At.magFilter=X.LINEAR;var Gt=new O(X,[0,0],[[0,0,0],[0,0,0]],rt,et,bt,gt,At,st,dt,Lt,It,Mt,xt,[0,0,0]),Wt={levels:[[],[],[]]};for(var Pt in $)Wt[Pt]=$[Pt];return Wt.colormap=Wt.colormap||"jet",Gt.update(Wt),Gt};var r=e(2288),l=e(5827),a=e(2944),s=e(8931),c=e(5306),f=e(9156),m=e(7498),h=e(7382),w=e(5050),p=e(4162),o=e(104),v=e(7437),M=e(5070),b=e(9144),L=e(9054),x=L.createShader,S=L.createContourShader,T=L.createPickShader,n=L.createPickContourShader,d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],D=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function N($,X,rt,et,st){this.position=$,this.index=X,this.uv=rt,this.level=et,this.dataCoordinate=st}!function(){for(var $=0;$<3;++$){var X=D[$],et=($+2)%3;X[($+1)%3+0]=1,X[et+3]=1,X[$+6]=1}}();function O($,X,rt,et,st,dt,bt,gt,Lt,It,Mt,xt,At,Gt,Wt){this.gl=$,this.shape=X,this.bounds=rt,this.objectOffset=Wt,this.intensityBounds=[],this._shader=et,this._pickShader=st,this._coordinateBuffer=dt,this._vao=bt,this._colorMap=gt,this._contourShader=Lt,this._contourPickShader=It,this._contourBuffer=Mt,this._contourVAO=xt,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new N([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=At,this._dynamicVAO=Gt,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[w(c.mallocFloat(1024),[0,0]),w(c.mallocFloat(1024),[0,0]),w(c.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var B=O.prototype;B.genColormap=function($,X){var rt=!1,et=h([f({colormap:$,nshades:256,format:"rgba"}).map(function(st,dt){var bt=X?function z($,X){if(!X||!X.length)return 1;for(var rt=0;rt<X.length;++rt){if(X.length<2)return 1;if(X[rt][0]===$)return X[rt][1];if(X[rt][0]>$&&rt>0){var et=(X[rt][0]-$)/(X[rt][0]-X[rt-1][0]);return X[rt][1]*(1-et)+et*X[rt-1][1]}}return 1}(dt/255,X):st[3];return bt<1&&(rt=!0),[st[0],st[1],st[2],255*bt]})]);return m.divseq(et,255),this.hasAlphaScale=rt,et},B.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},B.isOpaque=function(){return!this.isTransparent()},B.pickSlots=1,B.setPickBase=function($){this.pickId=$};var U=[0,0,0],H={showSurface:!1,showContour:!1,projections:[d.slice(),d.slice(),d.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function J($,X){var rt,et,st,dt=X.axes&&X.axes.lastCubeProps.axis||U,bt=X.showSurface,gt=X.showContour;for(rt=0;rt<3;++rt)for(bt=bt||X.surfaceProject[rt],et=0;et<3;++et)gt=gt||X.contourProject[rt][et];for(rt=0;rt<3;++rt){var Lt=H.projections[rt];for(et=0;et<16;++et)Lt[et]=0;for(et=0;et<4;++et)Lt[5*et]=1;Lt[5*rt]=0,Lt[12+rt]=X.axesBounds[+(dt[rt]>0)][rt],o(Lt,$.model,Lt);var It=H.clipBounds[rt];for(st=0;st<2;++st)for(et=0;et<3;++et)It[st][et]=$.clipBounds[st][et];It[0][rt]=-1e8,It[1][rt]=1e8}return H.showSurface=bt,H.showContour=gt,H}var nt={model:d,view:d,projection:d,inverseModel:d.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},it=d.slice(),ut=[1,0,0,0,1,0,0,0,1];function Q($,X){$=$||{};var rt=this.gl;rt.disable(rt.CULL_FACE),this._colorMap.bind(0);var et=nt;et.model=$.model||d,et.view=$.view||d,et.projection=$.projection||d,et.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],et.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],et.objectOffset=this.objectOffset,et.contourColor=this.contourColor[0],et.inverseModel=v(et.inverseModel,et.model);for(var st=0;st<2;++st)for(var dt=et.clipBounds[st],bt=0;bt<3;++bt)dt[bt]=Math.min(Math.max(this.clipBounds[st][bt],-1e8),1e8);et.kambient=this.ambientLight,et.kdiffuse=this.diffuseLight,et.kspecular=this.specularLight,et.roughness=this.roughness,et.fresnel=this.fresnel,et.opacity=this.opacity,et.height=0,et.permutation=ut,et.vertexColor=this.vertexColor;var gt=it;for(o(gt,et.view,et.model),o(gt,et.projection,gt),v(gt,gt),st=0;st<3;++st)et.eyePosition[st]=gt[12+st]/gt[15];var Lt=gt[15];for(st=0;st<3;++st)Lt+=this.lightPosition[st]*gt[4*st+3];for(st=0;st<3;++st){var It=gt[12+st];for(bt=0;bt<3;++bt)It+=gt[4*bt+st]*this.lightPosition[bt];et.lightPosition[st]=It/Lt}var Mt=J(et,this);if(Mt.showSurface){for(this._shader.bind(),this._shader.uniforms=et,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(rt.TRIANGLES,this._vertexCount),st=0;st<3;++st)!this.surfaceProject[st]||!this.vertexCount||(this._shader.uniforms.model=Mt.projections[st],this._shader.uniforms.clipBounds=Mt.clipBounds[st],this._vao.draw(rt.TRIANGLES,this._vertexCount));this._vao.unbind()}if(Mt.showContour){var xt=this._contourShader;et.kambient=1,et.kdiffuse=0,et.kspecular=0,et.opacity=1,xt.bind(),xt.uniforms=et;var At=this._contourVAO;for(At.bind(),st=0;st<3;++st)for(xt.uniforms.permutation=D[st],rt.lineWidth(this.contourWidth[st]*this.pixelRatio),bt=0;bt<this.contourLevels[st].length;++bt)bt===this.highlightLevel[st]?(xt.uniforms.contourColor=this.highlightColor[st],xt.uniforms.contourTint=this.highlightTint[st]):(0===bt||bt-1===this.highlightLevel[st])&&(xt.uniforms.contourColor=this.contourColor[st],xt.uniforms.contourTint=this.contourTint[st]),this._contourCounts[st][bt]&&(xt.uniforms.height=this.contourLevels[st][bt],At.draw(rt.LINES,this._contourCounts[st][bt],this._contourOffsets[st][bt]));for(st=0;st<3;++st)for(xt.uniforms.model=Mt.projections[st],xt.uniforms.clipBounds=Mt.clipBounds[st],bt=0;bt<3;++bt)if(this.contourProject[st][bt]){xt.uniforms.permutation=D[bt],rt.lineWidth(this.contourWidth[bt]*this.pixelRatio);for(var Gt=0;Gt<this.contourLevels[bt].length;++Gt)Gt===this.highlightLevel[bt]?(xt.uniforms.contourColor=this.highlightColor[bt],xt.uniforms.contourTint=this.highlightTint[bt]):(0===Gt||Gt-1===this.highlightLevel[bt])&&(xt.uniforms.contourColor=this.contourColor[bt],xt.uniforms.contourTint=this.contourTint[bt]),this._contourCounts[bt][Gt]&&(xt.uniforms.height=this.contourLevels[bt][Gt],At.draw(rt.LINES,this._contourCounts[bt][Gt],this._contourOffsets[bt][Gt]))}for(At.unbind(),(At=this._dynamicVAO).bind(),st=0;st<3;++st)if(0!==this._dynamicCounts[st])for(xt.uniforms.model=et.model,xt.uniforms.clipBounds=et.clipBounds,xt.uniforms.permutation=D[st],rt.lineWidth(this.dynamicWidth[st]*this.pixelRatio),xt.uniforms.contourColor=this.dynamicColor[st],xt.uniforms.contourTint=this.dynamicTint[st],xt.uniforms.height=this.dynamicLevel[st],At.draw(rt.LINES,this._dynamicCounts[st],this._dynamicOffsets[st]),bt=0;bt<3;++bt)!this.contourProject[bt][st]||(xt.uniforms.model=Mt.projections[bt],xt.uniforms.clipBounds=Mt.clipBounds[bt],At.draw(rt.LINES,this._dynamicCounts[st],this._dynamicOffsets[st]));At.unbind()}}B.draw=function($){return Q.call(this,$,!1)},B.drawTransparent=function($){return Q.call(this,$,!0)};var j={model:d,view:d,projection:d,inverseModel:d,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function Z($,X){return Array.isArray($)?[X($[0]),X($[1]),X($[2])]:[X($),X($),X($)]}function G($){return Array.isArray($)?3===$.length?[$[0],$[1],$[2],1]:[$[0],$[1],$[2],$[3]]:[0,0,0,1]}function K($){if(Array.isArray($)){if(Array.isArray($))return[G($[0]),G($[1]),G($[2])];var X=G($);return[X.slice(),X.slice(),X.slice()]}}B.drawPick=function($){$=$||{};var X=this.gl;X.disable(X.CULL_FACE);var rt=j;rt.model=$.model||d,rt.view=$.view||d,rt.projection=$.projection||d,rt.shape=this._field[2].shape,rt.pickId=this.pickId/255,rt.lowerBound=this.bounds[0],rt.upperBound=this.bounds[1],rt.objectOffset=this.objectOffset,rt.permutation=ut;for(var et=0;et<2;++et)for(var st=rt.clipBounds[et],dt=0;dt<3;++dt)st[dt]=Math.min(Math.max(this.clipBounds[et][dt],-1e8),1e8);var bt=J(rt,this);if(bt.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=rt,this._vao.bind(),this._vao.draw(X.TRIANGLES,this._vertexCount),et=0;et<3;++et)!this.surfaceProject[et]||(this._pickShader.uniforms.model=bt.projections[et],this._pickShader.uniforms.clipBounds=bt.clipBounds[et],this._vao.draw(X.TRIANGLES,this._vertexCount));this._vao.unbind()}if(bt.showContour){var gt=this._contourPickShader;gt.bind(),gt.uniforms=rt;var Lt=this._contourVAO;for(Lt.bind(),dt=0;dt<3;++dt)for(X.lineWidth(this.contourWidth[dt]*this.pixelRatio),gt.uniforms.permutation=D[dt],et=0;et<this.contourLevels[dt].length;++et)this._contourCounts[dt][et]&&(gt.uniforms.height=this.contourLevels[dt][et],Lt.draw(X.LINES,this._contourCounts[dt][et],this._contourOffsets[dt][et]));for(et=0;et<3;++et)for(gt.uniforms.model=bt.projections[et],gt.uniforms.clipBounds=bt.clipBounds[et],dt=0;dt<3;++dt)if(this.contourProject[et][dt]){gt.uniforms.permutation=D[dt],X.lineWidth(this.contourWidth[dt]*this.pixelRatio);for(var It=0;It<this.contourLevels[dt].length;++It)this._contourCounts[dt][It]&&(gt.uniforms.height=this.contourLevels[dt][It],Lt.draw(X.LINES,this._contourCounts[dt][It],this._contourOffsets[dt][It]))}Lt.unbind()}},B.pick=function($){if(!$||$.id!==this.pickId)return null;var X=this._field[2].shape,rt=this._pickResult,et=X[0]*($.value[0]+($.value[2]>>4)/16)/255,st=Math.floor(et),dt=et-st,bt=X[1]*($.value[1]+(15&$.value[2])/16)/255,gt=Math.floor(bt),Lt=bt-gt;st+=1,gt+=1;var It=rt.position;It[0]=It[1]=It[2]=0;for(var Mt=0;Mt<2;++Mt)for(var xt=Mt?dt:1-dt,At=0;At<2;++At)for(var Wt=st+Mt,Pt=gt+At,Vt=xt*(At?Lt:1-Lt),te=0;te<3;++te)It[te]+=this._field[te].get(Wt,Pt)*Vt;for(var Qt=this._pickResult.level,Bt=0;Bt<3;++Bt)if(Qt[Bt]=M.le(this.contourLevels[Bt],It[Bt]),Qt[Bt]<0)this.contourLevels[Bt].length>0&&(Qt[Bt]=0);else if(Qt[Bt]<this.contourLevels[Bt].length-1){var qt=this.contourLevels[Bt][Qt[Bt]+1];Math.abs(this.contourLevels[Bt][Qt[Bt]]-It[Bt])>Math.abs(qt-It[Bt])&&(Qt[Bt]+=1)}for(rt.index[0]=dt<.5?st:st+1,rt.index[1]=Lt<.5?gt:gt+1,rt.uv[0]=et/X[0],rt.uv[1]=bt/X[1],te=0;te<3;++te)rt.dataCoordinate[te]=this._field[te].get(rt.index[0],rt.index[1]);return rt},B.padField=function($,X){var rt=X.shape.slice(),et=$.shape.slice();m.assign($.lo(1,1).hi(rt[0],rt[1]),X),m.assign($.lo(1).hi(rt[0],1),X.hi(rt[0],1)),m.assign($.lo(1,et[1]-1).hi(rt[0],1),X.lo(0,rt[1]-1).hi(rt[0],1)),m.assign($.lo(0,1).hi(1,rt[1]),X.hi(1)),m.assign($.lo(et[0]-1,1).hi(1,rt[1]),X.lo(rt[0]-1)),$.set(0,0,X.get(0,0)),$.set(0,et[1]-1,X.get(0,rt[1]-1)),$.set(et[0]-1,0,X.get(rt[0]-1,0)),$.set(et[0]-1,et[1]-1,X.get(rt[0]-1,rt[1]-1))},B.update=function($){this.objectOffset=($=$||{}).objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in $&&(this.contourWidth=Z($.contourWidth,Number)),"showContour"in $&&(this.showContour=Z($.showContour,Boolean)),"showSurface"in $&&(this.showSurface=!!$.showSurface),"contourTint"in $&&(this.contourTint=Z($.contourTint,Boolean)),"contourColor"in $&&(this.contourColor=K($.contourColor)),"contourProject"in $&&(this.contourProject=Z($.contourProject,function(Ce){return Z(Ce,Boolean)})),"surfaceProject"in $&&(this.surfaceProject=$.surfaceProject),"dynamicColor"in $&&(this.dynamicColor=K($.dynamicColor)),"dynamicTint"in $&&(this.dynamicTint=Z($.dynamicTint,Number)),"dynamicWidth"in $&&(this.dynamicWidth=Z($.dynamicWidth,Number)),"opacity"in $&&(this.opacity=$.opacity),"opacityscale"in $&&(this.opacityscale=$.opacityscale),"colorBounds"in $&&(this.colorBounds=$.colorBounds),"vertexColor"in $&&(this.vertexColor=$.vertexColor?1:0),"colormap"in $&&this._colorMap.setPixels(this.genColormap($.colormap,this.opacityscale));var X=$.field||$.coords&&$.coords[2]||null,rt=!1;if(X||(X=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in $||"coords"in $){var et=(X.shape[0]+2)*(X.shape[1]+2);et>this._field[2].data.length&&(c.freeFloat(this._field[2].data),this._field[2].data=c.mallocFloat(r.nextPow2(et))),this._field[2]=w(this._field[2].data,[X.shape[0]+2,X.shape[1]+2]),this.padField(this._field[2],X),this.shape=X.shape.slice();for(var st=this.shape,dt=0;dt<2;++dt)this._field[2].size>this._field[dt].data.length&&(c.freeFloat(this._field[dt].data),this._field[dt].data=c.mallocFloat(this._field[2].size)),this._field[dt]=w(this._field[dt].data,[st[0]+2,st[1]+2]);if($.coords){var bt=$.coords;if(!Array.isArray(bt)||3!==bt.length)throw new Error("gl-surface: invalid coordinates for x/y");for(dt=0;dt<2;++dt){var gt=bt[dt];for(At=0;At<2;++At)if(gt.shape[At]!==st[At])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[dt],gt)}}else if($.ticks){var Lt=$.ticks;if(!Array.isArray(Lt)||2!==Lt.length)throw new Error("gl-surface: invalid ticks");for(dt=0;dt<2;++dt){var It=Lt[dt];if((Array.isArray(It)||It.length)&&(It=w(It)),It.shape[0]!==st[dt])throw new Error("gl-surface: invalid tick length");var Mt=w(It.data,st);Mt.stride[dt]=It.stride[0],Mt.stride[1^dt]=0,this.padField(this._field[dt],Mt)}}else{for(dt=0;dt<2;++dt){var xt=[0,0];xt[dt]=1,this._field[dt]=w(this._field[dt].data,[st[0]+2,st[1]+2],xt,0)}this._field[0].set(0,0,0);for(var At=0;At<st[0];++At)this._field[0].set(At+1,0,At);for(this._field[0].set(st[0]+1,0,st[0]-1),this._field[1].set(0,0,0),At=0;At<st[1];++At)this._field[1].set(0,At+1,At);this._field[1].set(0,st[1]+1,st[1]-1)}var Gt=this._field,Wt=w(c.mallocFloat(3*Gt[2].size*2),[3,st[0]+2,st[1]+2,2]);for(dt=0;dt<3;++dt)b(Wt.pick(dt),Gt[dt],"mirror");var Pt=w(c.mallocFloat(3*Gt[2].size),[st[0]+2,st[1]+2,3]);for(dt=0;dt<st[0]+2;++dt)for(At=0;At<st[1]+2;++At){var Vt=Wt.get(0,dt,At,0),te=Wt.get(0,dt,At,1),Qt=Wt.get(1,dt,At,0),Bt=Wt.get(1,dt,At,1),Ot=Wt.get(2,dt,At,0),qt=Wt.get(2,dt,At,1),ie=Qt*qt-Bt*Ot,oe=Ot*te-qt*Vt,pe=Vt*Bt-te*Qt,de=Math.sqrt(ie*ie+oe*oe+pe*pe);de<1e-8?(de=Math.max(Math.abs(ie),Math.abs(oe),Math.abs(pe)))<1e-8?(pe=1,oe=ie=0,de=1):de=1/de:de=1/Math.sqrt(de),Pt.set(dt,At,0,ie*de),Pt.set(dt,At,1,oe*de),Pt.set(dt,At,2,pe*de)}c.free(Wt.data);var Fe=[1/0,1/0,1/0],Kt=[-1/0,-1/0,-1/0],Et=1/0,St=-1/0,Ft=c.mallocFloat(r.nextPow2((st[0]-1)*(st[1]-1)*6*10)),Nt=0,Rt=0;for(dt=0;dt<st[0]-1;++dt)t:for(At=0;At<st[1]-1;++At){for(var wt=0;wt<2;++wt)for(var ft=0;ft<2;++ft)for(var pt=0;pt<3;++pt){var kt=this._field[pt].get(1+dt+wt,1+At+ft);if(isNaN(kt)||!isFinite(kt))continue t}for(pt=0;pt<6;++pt){var Zt=dt+F[pt][0],ee=At+F[pt][1],se=this._field[0].get(Zt+1,ee+1),Be=this._field[1].get(Zt+1,ee+1);kt=this._field[2].get(Zt+1,ee+1),ie=Pt.get(Zt+1,ee+1,0),oe=Pt.get(Zt+1,ee+1,1),pe=Pt.get(Zt+1,ee+1,2),$.intensity&&(Ke=$.intensity.get(Zt,ee));var Ke=$.intensity?$.intensity.get(Zt,ee):kt+this.objectOffset[2];Ft[Nt++]=Zt,Ft[Nt++]=ee,Ft[Nt++]=se,Ft[Nt++]=Be,Ft[Nt++]=kt,Ft[Nt++]=0,Ft[Nt++]=Ke,Ft[Nt++]=ie,Ft[Nt++]=oe,Ft[Nt++]=pe,Fe[0]=Math.min(Fe[0],se+this.objectOffset[0]),Fe[1]=Math.min(Fe[1],Be+this.objectOffset[1]),Fe[2]=Math.min(Fe[2],kt+this.objectOffset[2]),Et=Math.min(Et,Ke),Kt[0]=Math.max(Kt[0],se+this.objectOffset[0]),Kt[1]=Math.max(Kt[1],Be+this.objectOffset[1]),Kt[2]=Math.max(Kt[2],kt+this.objectOffset[2]),St=Math.max(St,Ke),Rt+=1}}for($.intensityBounds&&(Et=+$.intensityBounds[0],St=+$.intensityBounds[1]),dt=6;dt<Nt;dt+=10)Ft[dt]=(Ft[dt]-Et)/(St-Et);this._vertexCount=Rt,this._coordinateBuffer.update(Ft.subarray(0,Nt)),c.freeFloat(Ft),c.free(Pt.data),this.bounds=[Fe,Kt],this.intensity=$.intensity||this._field[2],(this.intensityBounds[0]!==Et||this.intensityBounds[1]!==St)&&(rt=!0),this.intensityBounds=[Et,St]}if("levels"in $){var xe=$.levels;for(xe=Array.isArray(xe[0])?xe.slice():[[],[],xe],dt=0;dt<3;++dt)xe[dt]=xe[dt].slice(),xe[dt].sort(function(Ce,We){return Ce-We});for(dt=0;dt<3;++dt)for(At=0;At<xe[dt].length;++At)xe[dt][At]-=this.objectOffset[dt];t:for(dt=0;dt<3;++dt){if(xe[dt].length!==this.contourLevels[dt].length){rt=!0;break}for(At=0;At<xe[dt].length;++At)if(xe[dt][At]!==this.contourLevels[dt][At]){rt=!0;break t}}this.contourLevels=xe}if(rt){Gt=this._field,st=this.shape;for(var Pe=[],Ge=0;Ge<3;++Ge){var gr=this.contourLevels[Ge],ue=[],Ne=[],Ye=[0,0,0];for(dt=0;dt<gr.length;++dt){var xr=p(this._field[Ge],gr[dt]);ue.push(Pe.length/5|0),Rt=0;t:for(At=0;At<xr.cells.length;++At){var rr=xr.cells[At];for(pt=0;pt<2;++pt){var ce=xr.positions[rr[pt]],re=ce[0],ve=0|Math.floor(re),be=re-ve,Ae=ce[1],Te=0|Math.floor(Ae),Re=Ae-Te,Ie=!1;e:for(var Xe=0;Xe<3;++Xe){Ye[Xe]=0;var ar=(Ge+Xe+1)%3;for(wt=0;wt<2;++wt){var nr=wt?be:1-be;for(Zt=0|Math.min(Math.max(ve+wt,0),st[0]),ft=0;ft<2;++ft){var cr=ft?Re:1-Re;if(ee=0|Math.min(Math.max(Te+ft,0),st[1]),kt=Xe<2?this._field[ar].get(Zt,ee):(this.intensity.get(Zt,ee)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(kt)||isNaN(kt)){Ie=!0;break e}Ye[Xe]+=nr*cr*kt}}}if(Ie){if(pt>0){for(var Ht=0;Ht<5;++Ht)Pe.pop();Rt-=1}continue t}Pe.push(Ye[0],Ye[1],ce[0],ce[1],Ye[2]),Rt+=1}}Ne.push(Rt)}this._contourOffsets[Ge]=ue,this._contourCounts[Ge]=Ne}var Se=c.mallocFloat(Pe.length);for(dt=0;dt<Pe.length;++dt)Se[dt]=Pe[dt];this._contourBuffer.update(Se),c.freeFloat(Se)}},B.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var $=0;$<3;++$)c.freeFloat(this._field[$].data)},B.highlight=function($){var X,rt;if(!$)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(X=0;X<3;++X)this.highlightLevel[X]=this.enableHighlight[X]?$.level[X]:-1;for(rt=this.snapToData?$.dataCoordinate:$.position,X=0;X<3;++X)rt[X]-=this.objectOffset[X];if(this.enableDynamic[0]&&rt[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&rt[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&rt[2]!==this.dynamicLevel[2]){for(var et=0,st=this.shape,dt=c.mallocFloat(12*st[0]*st[1]),bt=0;bt<3;++bt)if(this.enableDynamic[bt]){this.dynamicLevel[bt]=rt[bt];var Mt=this._field[(bt+1)%3],xt=this._field[(bt+2)%3],At=p(this._field[bt],rt[bt]),Gt=At.cells,Wt=At.positions;for(this._dynamicOffsets[bt]=et,X=0;X<Gt.length;++X)for(var Pt=Gt[X],Vt=0;Vt<2;++Vt){var te=Wt[Pt[Vt]],Qt=+te[0],Bt=0|Qt,Ot=0|Math.min(Bt+1,st[0]),qt=Qt-Bt,ie=1-qt,oe=+te[1],pe=0|oe,de=0|Math.min(pe+1,st[1]),Fe=oe-pe,Kt=1-Fe,Et=ie*Kt,St=ie*Fe,Dt=qt*Kt,Ft=qt*Fe,Nt=Et*Mt.get(Bt,pe)+St*Mt.get(Bt,de)+Dt*Mt.get(Ot,pe)+Ft*Mt.get(Ot,de),Rt=Et*xt.get(Bt,pe)+St*xt.get(Bt,de)+Dt*xt.get(Ot,pe)+Ft*xt.get(Ot,de);if(isNaN(Nt)||isNaN(Rt)){Vt&&(et-=1);break}dt[2*et+0]=Nt,dt[2*et+1]=Rt,et+=1}this._dynamicCounts[bt]=et-this._dynamicOffsets[bt]}else this.dynamicLevel[bt]=NaN,this._dynamicCounts[bt]=0;this._dynamicBuffer.update(dt.subarray(0,2*et)),c.freeFloat(dt)}}},8931:function(u,y,e){"use strict";var r=e(5050),l=e(7498),a=e(5306);u.exports=function n(E){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(s||m(E),"number"==typeof arguments[1])return x(E,arguments[1],arguments[2],arguments[3]||E.RGBA,arguments[4]||E.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return x(E,0|arguments[1][0],0|arguments[1][1],arguments[2]||E.RGBA,arguments[3]||E.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var d=arguments[1],F=h(d)?d:d.raw;if(F)return S(E,F,0|d.width,0|d.height,arguments[2]||E.RGBA,arguments[3]||E.UNSIGNED_BYTE);if(d.shape&&d.data&&d.stride)return T(E,d)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var s=null,c=null,f=null;function m(E){s=[E.LINEAR,E.NEAREST_MIPMAP_LINEAR,E.LINEAR_MIPMAP_NEAREST,E.LINEAR_MIPMAP_NEAREST],c=[E.NEAREST,E.LINEAR,E.NEAREST_MIPMAP_NEAREST,E.NEAREST_MIPMAP_LINEAR,E.LINEAR_MIPMAP_NEAREST,E.LINEAR_MIPMAP_LINEAR],f=[E.REPEAT,E.CLAMP_TO_EDGE,E.MIRRORED_REPEAT]}function h(E){return"undefined"!=typeof HTMLCanvasElement&&E instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&E instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&E instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&E instanceof ImageData}var w=function(E,d){l.muls(E,d,255)};function p(E,d,F){var D=E.gl,N=D.getParameter(D.MAX_TEXTURE_SIZE);if(d<0||d>N||F<0||F>N)throw new Error("gl-texture2d: Invalid texture size");return E._shape=[d,F],E.bind(),D.texImage2D(D.TEXTURE_2D,0,E.format,d,F,0,E.format,E.type,null),E._mipLevels=[0],E}function o(E,d,F,D,N,k){this.gl=E,this.handle=d,this.format=N,this.type=k,this._shape=[F,D],this._mipLevels=[0],this._magFilter=E.NEAREST,this._minFilter=E.NEAREST,this._wrapS=E.CLAMP_TO_EDGE,this._wrapT=E.CLAMP_TO_EDGE,this._anisoSamples=1;var O=this,B=[this._wrapS,this._wrapT];Object.defineProperties(B,[{get:function(){return O._wrapS},set:function(U){return O.wrapS=U}},{get:function(){return O._wrapT},set:function(U){return O.wrapT=U}}]),this._wrapVector=B;var z=[this._shape[0],this._shape[1]];Object.defineProperties(z,[{get:function(){return O._shape[0]},set:function(U){return O.width=U}},{get:function(){return O._shape[1]},set:function(U){return O.height=U}}]),this._shapeVector=z}var v=o.prototype;function M(E,d){return 3===E.length?1===d[2]&&d[1]===E[0]*E[2]&&d[0]===E[2]:1===d[0]&&d[1]===E[0]}function L(E){var d=E.createTexture();return E.bindTexture(E.TEXTURE_2D,d),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),d}function x(E,d,F,D,N){var k=E.getParameter(E.MAX_TEXTURE_SIZE);if(d<0||d>k||F<0||F>k)throw new Error("gl-texture2d: Invalid texture shape");if(N===E.FLOAT&&!E.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var O=L(E);return E.texImage2D(E.TEXTURE_2D,0,D,d,F,0,D,N,null),new o(E,O,d,F,D,N)}function S(E,d,F,D,N,k){var O=L(E);return E.texImage2D(E.TEXTURE_2D,0,N,N,k,d),new o(E,O,F,D,N,k)}function T(E,d){var F=d.dtype,D=d.shape.slice(),N=E.getParameter(E.MAX_TEXTURE_SIZE);if(D[0]<0||D[0]>N||D[1]<0||D[1]>N)throw new Error("gl-texture2d: Invalid texture size");var k=M(D,d.stride.slice()),O=0;"float32"===F?O=E.FLOAT:"float64"===F?(O=E.FLOAT,k=!1,F="float32"):"uint8"===F?O=E.UNSIGNED_BYTE:(O=E.UNSIGNED_BYTE,k=!1,F="uint8");var B=0;if(2===D.length)B=E.LUMINANCE,d=r(d.data,D=[D[0],D[1],1],[d.stride[0],d.stride[1],1],d.offset);else{if(3!==D.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===D[2])B=E.ALPHA;else if(2===D[2])B=E.LUMINANCE_ALPHA;else if(3===D[2])B=E.RGB;else{if(4!==D[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");B=E.RGBA}}O===E.FLOAT&&!E.getExtension("OES_texture_float")&&(O=E.UNSIGNED_BYTE,k=!1);var z,U,H=d.size;if(k)z=0===d.offset&&d.data.length===H?d.data:d.data.subarray(d.offset,d.offset+H);else{var J=[D[2],D[2]*D[0],1];U=a.malloc(H,F);var nt=r(U,D,J,0);"float32"!==F&&"float64"!==F||O!==E.UNSIGNED_BYTE?l.assign(nt,d):w(nt,d),z=U.subarray(0,H)}var it=L(E);return E.texImage2D(E.TEXTURE_2D,0,B,D[0],D[1],0,B,O,z),k||a.free(U),new o(E,it,D[0],D[1],B,O)}Object.defineProperties(v,{minFilter:{get:function(){return this._minFilter},set:function(E){this.bind();var d=this.gl;if(this.type===d.FLOAT&&s.indexOf(E)>=0&&(d.getExtension("OES_texture_float_linear")||(E=d.NEAREST)),c.indexOf(E)<0)throw new Error("gl-texture2d: Unknown filter mode "+E);return d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,E),this._minFilter=E}},magFilter:{get:function(){return this._magFilter},set:function(E){this.bind();var d=this.gl;if(this.type===d.FLOAT&&s.indexOf(E)>=0&&(d.getExtension("OES_texture_float_linear")||(E=d.NEAREST)),c.indexOf(E)<0)throw new Error("gl-texture2d: Unknown filter mode "+E);return d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,E),this._magFilter=E}},mipSamples:{get:function(){return this._anisoSamples},set:function(E){var d=this._anisoSamples;if(this._anisoSamples=0|Math.max(E,1),d!==this._anisoSamples){var F=this.gl.getExtension("EXT_texture_filter_anisotropic");F&&this.gl.texParameterf(this.gl.TEXTURE_2D,F.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(E){if(this.bind(),f.indexOf(E)<0)throw new Error("gl-texture2d: Unknown wrap mode "+E);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,E),this._wrapS=E}},wrapT:{get:function(){return this._wrapT},set:function(E){if(this.bind(),f.indexOf(E)<0)throw new Error("gl-texture2d: Unknown wrap mode "+E);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,E),this._wrapT=E}},wrap:{get:function(){return this._wrapVector},set:function(E){if(Array.isArray(E)||(E=[E,E]),2!==E.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var d=0;d<2;++d)if(f.indexOf(E[d])<0)throw new Error("gl-texture2d: Unknown wrap mode "+E);this._wrapS=E[0],this._wrapT=E[1];var F=this.gl;return this.bind(),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,this._wrapS),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,this._wrapT),E}},shape:{get:function(){return this._shapeVector},set:function(E){if(Array.isArray(E)){if(2!==E.length)throw new Error("gl-texture2d: Invalid texture shape")}else E=[0|E,0|E];return p(this,0|E[0],0|E[1]),[0|E[0],0|E[1]]}},width:{get:function(){return this._shape[0]},set:function(E){return p(this,E|=0,this._shape[1]),E}},height:{get:function(){return this._shape[1]},set:function(E){return p(this,this._shape[0],E|=0),E}}}),v.bind=function(E){var d=this.gl;return void 0!==E&&d.activeTexture(d.TEXTURE0+(0|E)),d.bindTexture(d.TEXTURE_2D,this.handle),void 0!==E?0|E:d.getParameter(d.ACTIVE_TEXTURE)-d.TEXTURE0},v.dispose=function(){this.gl.deleteTexture(this.handle)},v.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var E=Math.min(this._shape[0],this._shape[1]),d=0;E>0;++d,E>>>=1)this._mipLevels.indexOf(d)<0&&this._mipLevels.push(d)},v.setPixels=function(E,d,F,D){var N=this.gl;this.bind(),Array.isArray(d)?(D=F,F=0|d[1],d=0|d[0]):(d=d||0,F=F||0),D=D||0;var k=h(E)?E:E.raw;if(k)this._mipLevels.indexOf(D)<0?(N.texImage2D(N.TEXTURE_2D,0,this.format,this.format,this.type,k),this._mipLevels.push(D)):N.texSubImage2D(N.TEXTURE_2D,D,d,F,this.format,this.type,k);else{if(!(E.shape&&E.stride&&E.data))throw new Error("gl-texture2d: Unsupported data type");if(E.shape.length<2||d+E.shape[1]>this._shape[1]>>>D||F+E.shape[0]>this._shape[0]>>>D||d<0||F<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function b(E,d,F,D,N,k,O,B){var z=B.dtype,U=B.shape.slice();if(U.length<2||U.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var H=0,J=0,nt=M(U,B.stride.slice());if("float32"===z?H=E.FLOAT:"float64"===z?(H=E.FLOAT,nt=!1,z="float32"):"uint8"===z?H=E.UNSIGNED_BYTE:(H=E.UNSIGNED_BYTE,nt=!1,z="uint8"),2===U.length)J=E.LUMINANCE,B=r(B.data,U=[U[0],U[1],1],[B.stride[0],B.stride[1],1],B.offset);else{if(3!==U.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===U[2])J=E.ALPHA;else if(2===U[2])J=E.LUMINANCE_ALPHA;else if(3===U[2])J=E.RGB;else{if(4!==U[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");J=E.RGBA}}if((J===E.LUMINANCE||J===E.ALPHA)&&(N===E.LUMINANCE||N===E.ALPHA)&&(J=N),J!==N)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var ut=B.size,Q=O.indexOf(D)<0;if(Q&&O.push(D),H===k&&nt)0===B.offset&&B.data.length===ut?Q?E.texImage2D(E.TEXTURE_2D,D,N,U[0],U[1],0,N,k,B.data):E.texSubImage2D(E.TEXTURE_2D,D,d,F,U[0],U[1],N,k,B.data):Q?E.texImage2D(E.TEXTURE_2D,D,N,U[0],U[1],0,N,k,B.data.subarray(B.offset,B.offset+ut)):E.texSubImage2D(E.TEXTURE_2D,D,d,F,U[0],U[1],N,k,B.data.subarray(B.offset,B.offset+ut));else{var j;j=k===E.FLOAT?a.mallocFloat32(ut):a.mallocUint8(ut);var Z=r(j,U,[U[2],U[2]*U[0],1]);H===E.FLOAT&&k===E.UNSIGNED_BYTE?w(Z,B):l.assign(Z,B),Q?E.texImage2D(E.TEXTURE_2D,D,N,U[0],U[1],0,N,k,j.subarray(0,ut)):E.texSubImage2D(E.TEXTURE_2D,D,d,F,U[0],U[1],N,k,j.subarray(0,ut)),k===E.FLOAT?a.freeFloat32(j):a.freeUint8(j)}}(N,d,F,D,this.format,this.type,this._mipLevels,E)}}},3056:function(u){"use strict";u.exports=function y(e,r,l){r?r.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var a=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(l){if(l.length>a)throw new Error("gl-vao: Too many vertex attributes");for(var s=0;s<l.length;++s){var c=l[s];if(c.buffer){var m=c.size||4,h=c.type||e.FLOAT,w=!!c.normalized,p=c.stride||0,o=c.offset||0;c.buffer.bind(),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,m,h,w,p,o)}else{if("number"==typeof c)e.vertexAttrib1f(s,c);else if(1===c.length)e.vertexAttrib1f(s,c[0]);else if(2===c.length)e.vertexAttrib2f(s,c[0],c[1]);else if(3===c.length)e.vertexAttrib3f(s,c[0],c[1],c[2]);else{if(4!==c.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(s,c[0],c[1],c[2],c[3])}e.disableVertexAttribArray(s)}}for(;s<a;++s)e.disableVertexAttribArray(s)}else for(e.bindBuffer(e.ARRAY_BUFFER,null),s=0;s<a;++s)e.disableVertexAttribArray(s)}},7220:function(u,y,e){"use strict";var r=e(3056);function l(s){this.gl=s,this._elements=null,this._attributes=null,this._elementsType=s.UNSIGNED_SHORT}l.prototype.bind=function(){r(this.gl,this._elements,this._attributes)},l.prototype.update=function(s,c,f){this._elements=c,this._attributes=s,this._elementsType=f||this.gl.UNSIGNED_SHORT},l.prototype.dispose=function(){},l.prototype.unbind=function(){},l.prototype.draw=function(s,c,f){f=f||0;var m=this.gl;this._elements?m.drawElements(s,c,this._elementsType,f):m.drawArrays(s,f,c)},u.exports=function a(s){return new l(s)}},3778:function(u,y,e){"use strict";var r=e(3056);function l(c,f,m,h,w,p){this.location=c,this.dimension=f,this.a=m,this.b=h,this.c=w,this.d=p}function a(c,f,m){this.gl=c,this._ext=f,this.handle=m,this._attribs=[],this._useElements=!1,this._elementsType=c.UNSIGNED_SHORT}l.prototype.bind=function(c){switch(this.dimension){case 1:c.vertexAttrib1f(this.location,this.a);break;case 2:c.vertexAttrib2f(this.location,this.a,this.b);break;case 3:c.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:c.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},a.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var c=0;c<this._attribs.length;++c)this._attribs[c].bind(this.gl)},a.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},a.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},a.prototype.update=function(c,f,m){if(this.bind(),r(this.gl,f,c),this.unbind(),this._attribs.length=0,c)for(var h=0;h<c.length;++h){var w=c[h];"number"==typeof w?this._attribs.push(new l(h,1,w)):Array.isArray(w)&&this._attribs.push(new l(h,w.length,w[0],w[1],w[2],w[3]))}this._useElements=!!f,this._elementsType=m||this.gl.UNSIGNED_SHORT},a.prototype.draw=function(c,f,m){m=m||0;var h=this.gl;this._useElements?h.drawElements(c,f,this._elementsType,m):h.drawArrays(c,m,f)},u.exports=function s(c,f){return new a(c,f,f.createVertexArrayOES())}},2944:function(u,y,e){"use strict";var r=e(3778),l=e(7220);function a(c){this.bindVertexArrayOES=c.bindVertexArray.bind(c),this.createVertexArrayOES=c.createVertexArray.bind(c),this.deleteVertexArrayOES=c.deleteVertexArray.bind(c)}u.exports=function s(c,f,m,h){var p,w=c.createVertexArray?new a(c):c.getExtension("OES_vertex_array_object");return(p=w?r(c,w):l(c)).update(f,m,h),p}},2598:function(u){u.exports=function y(e,r,l){return e[0]=r[0]+l[0],e[1]=r[1]+l[1],e[2]=r[2]+l[2],e}},5879:function(u,y,e){u.exports=function s(c,f){var m=r(c[0],c[1],c[2]),h=r(f[0],f[1],f[2]);l(m,m),l(h,h);var w=a(m,h);return w>1?0:Math.acos(w)};var r=e(5415),l=e(899),a=e(9305)},8827:function(u){u.exports=function y(e,r){return e[0]=Math.ceil(r[0]),e[1]=Math.ceil(r[1]),e[2]=Math.ceil(r[2]),e}},7622:function(u){u.exports=function y(e){var r=new Float32Array(3);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}},8782:function(u){u.exports=function y(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}},8501:function(u){u.exports=function y(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},903:function(u){u.exports=function y(e,r,l){var a=r[0],s=r[1],c=r[2],f=l[0],m=l[1],h=l[2];return e[0]=s*h-c*m,e[1]=c*f-a*h,e[2]=a*m-s*f,e}},5981:function(u,y,e){u.exports=e(8288)},8288:function(u){u.exports=function y(e,r){var l=r[0]-e[0],a=r[1]-e[1],s=r[2]-e[2];return Math.sqrt(l*l+a*a+s*s)}},8629:function(u,y,e){u.exports=e(7979)},7979:function(u){u.exports=function y(e,r,l){return e[0]=r[0]/l[0],e[1]=r[1]/l[1],e[2]=r[2]/l[2],e}},9305:function(u){u.exports=function y(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}},154:function(u){u.exports=1e-6},4932:function(u,y,e){u.exports=function l(a,s){var c=a[0],f=a[1],m=a[2],h=s[0],w=s[1],p=s[2];return Math.abs(c-h)<=r*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(f-w)<=r*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(m-p)<=r*Math.max(1,Math.abs(m),Math.abs(p))};var r=e(154)},5777:function(u){u.exports=function y(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]}},3306:function(u){u.exports=function y(e,r){return e[0]=Math.floor(r[0]),e[1]=Math.floor(r[1]),e[2]=Math.floor(r[2]),e}},7447:function(u,y,e){u.exports=function l(a,s,c,f,m,h){var w,p;for(s||(s=3),c||(c=0),p=f?Math.min(f*s+c,a.length):a.length,w=c;w<p;w+=s)r[0]=a[w],r[1]=a[w+1],r[2]=a[w+2],m(r,r,h),a[w]=r[0],a[w+1]=r[1],a[w+2]=r[2];return a};var r=e(8501)()},5415:function(u){u.exports=function y(e,r,l){var a=new Float32Array(3);return a[0]=e,a[1]=r,a[2]=l,a}},2858:function(u,y,e){u.exports={EPSILON:e(154),create:e(8501),clone:e(7622),angle:e(5879),fromValues:e(5415),copy:e(8782),set:e(831),equals:e(4932),exactEquals:e(5777),add:e(2598),subtract:e(911),sub:e(8921),multiply:e(105),mul:e(5733),divide:e(7979),div:e(8629),min:e(3605),max:e(1716),floor:e(3306),ceil:e(8827),round:e(1624),scale:e(5685),scaleAndAdd:e(6722),distance:e(8288),dist:e(5981),squaredDistance:e(6403),sqrDist:e(5294),length:e(4693),len:e(1468),squaredLength:e(4337),sqrLen:e(3303),negate:e(435),inverse:e(2073),normalize:e(899),dot:e(9305),cross:e(903),lerp:e(1868),random:e(6660),transformMat4:e(3255),transformMat3:e(9908),transformQuat:e(6568),rotateX:e(392),rotateY:e(3222),rotateZ:e(3388),forEach:e(7447)}},2073:function(u){u.exports=function y(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e}},1468:function(u,y,e){u.exports=e(4693)},4693:function(u){u.exports=function y(e){var r=e[0],l=e[1],a=e[2];return Math.sqrt(r*r+l*l+a*a)}},1868:function(u){u.exports=function y(e,r,l,a){var s=r[0],c=r[1],f=r[2];return e[0]=s+a*(l[0]-s),e[1]=c+a*(l[1]-c),e[2]=f+a*(l[2]-f),e}},1716:function(u){u.exports=function y(e,r,l){return e[0]=Math.max(r[0],l[0]),e[1]=Math.max(r[1],l[1]),e[2]=Math.max(r[2],l[2]),e}},3605:function(u){u.exports=function y(e,r,l){return e[0]=Math.min(r[0],l[0]),e[1]=Math.min(r[1],l[1]),e[2]=Math.min(r[2],l[2]),e}},5733:function(u,y,e){u.exports=e(105)},105:function(u){u.exports=function y(e,r,l){return e[0]=r[0]*l[0],e[1]=r[1]*l[1],e[2]=r[2]*l[2],e}},435:function(u){u.exports=function y(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e}},899:function(u){u.exports=function y(e,r){var l=r[0],a=r[1],s=r[2],c=l*l+a*a+s*s;return c>0&&(c=1/Math.sqrt(c),e[0]=r[0]*c,e[1]=r[1]*c,e[2]=r[2]*c),e}},6660:function(u){u.exports=function y(e,r){r=r||1;var l=2*Math.random()*Math.PI,a=2*Math.random()-1,s=Math.sqrt(1-a*a)*r;return e[0]=Math.cos(l)*s,e[1]=Math.sin(l)*s,e[2]=a*r,e}},392:function(u){u.exports=function y(e,r,l,a){var s=l[1],c=l[2],f=r[1]-s,m=r[2]-c,h=Math.sin(a),w=Math.cos(a);return e[0]=r[0],e[1]=s+f*w-m*h,e[2]=c+f*h+m*w,e}},3222:function(u){u.exports=function y(e,r,l,a){var s=l[0],c=l[2],f=r[0]-s,m=r[2]-c,h=Math.sin(a),w=Math.cos(a);return e[0]=s+m*h+f*w,e[1]=r[1],e[2]=c+m*w-f*h,e}},3388:function(u){u.exports=function y(e,r,l,a){var s=l[0],c=l[1],f=r[0]-s,m=r[1]-c,h=Math.sin(a),w=Math.cos(a);return e[0]=s+f*w-m*h,e[1]=c+f*h+m*w,e[2]=r[2],e}},1624:function(u){u.exports=function y(e,r){return e[0]=Math.round(r[0]),e[1]=Math.round(r[1]),e[2]=Math.round(r[2]),e}},5685:function(u){u.exports=function y(e,r,l){return e[0]=r[0]*l,e[1]=r[1]*l,e[2]=r[2]*l,e}},6722:function(u){u.exports=function y(e,r,l,a){return e[0]=r[0]+l[0]*a,e[1]=r[1]+l[1]*a,e[2]=r[2]+l[2]*a,e}},831:function(u){u.exports=function y(e,r,l,a){return e[0]=r,e[1]=l,e[2]=a,e}},5294:function(u,y,e){u.exports=e(6403)},3303:function(u,y,e){u.exports=e(4337)},6403:function(u){u.exports=function y(e,r){var l=r[0]-e[0],a=r[1]-e[1],s=r[2]-e[2];return l*l+a*a+s*s}},4337:function(u){u.exports=function y(e){var r=e[0],l=e[1],a=e[2];return r*r+l*l+a*a}},8921:function(u,y,e){u.exports=e(911)},911:function(u){u.exports=function y(e,r,l){return e[0]=r[0]-l[0],e[1]=r[1]-l[1],e[2]=r[2]-l[2],e}},9908:function(u){u.exports=function y(e,r,l){var a=r[0],s=r[1],c=r[2];return e[0]=a*l[0]+s*l[3]+c*l[6],e[1]=a*l[1]+s*l[4]+c*l[7],e[2]=a*l[2]+s*l[5]+c*l[8],e}},3255:function(u){u.exports=function y(e,r,l){var a=r[0],s=r[1],c=r[2],f=l[3]*a+l[7]*s+l[11]*c+l[15];return e[0]=(l[0]*a+l[4]*s+l[8]*c+l[12])/(f=f||1),e[1]=(l[1]*a+l[5]*s+l[9]*c+l[13])/f,e[2]=(l[2]*a+l[6]*s+l[10]*c+l[14])/f,e}},6568:function(u){u.exports=function y(e,r,l){var a=r[0],s=r[1],c=r[2],f=l[0],m=l[1],h=l[2],w=l[3],p=w*a+m*c-h*s,o=w*s+h*a-f*c,v=w*c+f*s-m*a,M=-f*a-m*s-h*c;return e[0]=p*w+M*-f+o*-h-v*-m,e[1]=o*w+M*-m+v*-f-p*-h,e[2]=v*w+M*-h+p*-m-o*-f,e}},3433:function(u){u.exports=function y(e,r,l){return e[0]=r[0]+l[0],e[1]=r[1]+l[1],e[2]=r[2]+l[2],e[3]=r[3]+l[3],e}},1413:function(u){u.exports=function y(e){var r=new Float32Array(4);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}},3470:function(u){u.exports=function y(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}},5313:function(u){u.exports=function y(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},5446:function(u){u.exports=function y(e,r){var l=r[0]-e[0],a=r[1]-e[1],s=r[2]-e[2],c=r[3]-e[3];return Math.sqrt(l*l+a*a+s*s+c*c)}},205:function(u){u.exports=function y(e,r,l){return e[0]=r[0]/l[0],e[1]=r[1]/l[1],e[2]=r[2]/l[2],e[3]=r[3]/l[3],e}},4242:function(u){u.exports=function y(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3]}},5680:function(u){u.exports=function y(e,r,l,a){var s=new Float32Array(4);return s[0]=e,s[1]=r,s[2]=l,s[3]=a,s}},4020:function(u,y,e){u.exports={create:e(5313),clone:e(1413),fromValues:e(5680),copy:e(3470),set:e(6453),add:e(3433),subtract:e(2705),multiply:e(746),divide:e(205),min:e(2170),max:e(3030),scale:e(5510),scaleAndAdd:e(4224),distance:e(5446),squaredDistance:e(1542),length:e(8177),squaredLength:e(9037),negate:e(6459),inverse:e(8057),normalize:e(381),dot:e(4242),lerp:e(8746),random:e(3770),transformMat4:e(6342),transformQuat:e(5022)}},8057:function(u){u.exports=function y(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e[3]=1/r[3],e}},8177:function(u){u.exports=function y(e){var r=e[0],l=e[1],a=e[2],s=e[3];return Math.sqrt(r*r+l*l+a*a+s*s)}},8746:function(u){u.exports=function y(e,r,l,a){var s=r[0],c=r[1],f=r[2],m=r[3];return e[0]=s+a*(l[0]-s),e[1]=c+a*(l[1]-c),e[2]=f+a*(l[2]-f),e[3]=m+a*(l[3]-m),e}},3030:function(u){u.exports=function y(e,r,l){return e[0]=Math.max(r[0],l[0]),e[1]=Math.max(r[1],l[1]),e[2]=Math.max(r[2],l[2]),e[3]=Math.max(r[3],l[3]),e}},2170:function(u){u.exports=function y(e,r,l){return e[0]=Math.min(r[0],l[0]),e[1]=Math.min(r[1],l[1]),e[2]=Math.min(r[2],l[2]),e[3]=Math.min(r[3],l[3]),e}},746:function(u){u.exports=function y(e,r,l){return e[0]=r[0]*l[0],e[1]=r[1]*l[1],e[2]=r[2]*l[2],e[3]=r[3]*l[3],e}},6459:function(u){u.exports=function y(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e[3]=-r[3],e}},381:function(u){u.exports=function y(e,r){var l=r[0],a=r[1],s=r[2],c=r[3],f=l*l+a*a+s*s+c*c;return f>0&&(f=1/Math.sqrt(f),e[0]=l*f,e[1]=a*f,e[2]=s*f,e[3]=c*f),e}},3770:function(u,y,e){var r=e(381),l=e(5510);u.exports=function a(s,c){return c=c||1,s[0]=Math.random(),s[1]=Math.random(),s[2]=Math.random(),s[3]=Math.random(),r(s,s),l(s,s,c),s}},5510:function(u){u.exports=function y(e,r,l){return e[0]=r[0]*l,e[1]=r[1]*l,e[2]=r[2]*l,e[3]=r[3]*l,e}},4224:function(u){u.exports=function y(e,r,l,a){return e[0]=r[0]+l[0]*a,e[1]=r[1]+l[1]*a,e[2]=r[2]+l[2]*a,e[3]=r[3]+l[3]*a,e}},6453:function(u){u.exports=function y(e,r,l,a,s){return e[0]=r,e[1]=l,e[2]=a,e[3]=s,e}},1542:function(u){u.exports=function y(e,r){var l=r[0]-e[0],a=r[1]-e[1],s=r[2]-e[2],c=r[3]-e[3];return l*l+a*a+s*s+c*c}},9037:function(u){u.exports=function y(e){var r=e[0],l=e[1],a=e[2],s=e[3];return r*r+l*l+a*a+s*s}},2705:function(u){u.exports=function y(e,r,l){return e[0]=r[0]-l[0],e[1]=r[1]-l[1],e[2]=r[2]-l[2],e[3]=r[3]-l[3],e}},6342:function(u){u.exports=function y(e,r,l){var a=r[0],s=r[1],c=r[2],f=r[3];return e[0]=l[0]*a+l[4]*s+l[8]*c+l[12]*f,e[1]=l[1]*a+l[5]*s+l[9]*c+l[13]*f,e[2]=l[2]*a+l[6]*s+l[10]*c+l[14]*f,e[3]=l[3]*a+l[7]*s+l[11]*c+l[15]*f,e}},5022:function(u){u.exports=function y(e,r,l){var a=r[0],s=r[1],c=r[2],f=l[0],m=l[1],h=l[2],w=l[3],p=w*a+m*c-h*s,o=w*s+h*a-f*c,v=w*c+f*s-m*a,M=-f*a-m*s-h*c;return e[0]=p*w+M*-f+o*-h-v*-m,e[1]=o*w+M*-m+v*-f-p*-h,e[2]=v*w+M*-h+p*-m-o*-f,e[3]=r[3],e}},9365:function(u,y,e){var r=e(8096),l=e(7896);u.exports=function a(s){for(var c=Array.isArray(s)?s:r(s),f=0;f<c.length;f++){var m=c[f];if("preprocessor"===m.type){var h=m.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(h&&h[2]){var p=h[2];return(h[1]?l(p):p).trim()}}}}},3193:function(u,y,e){u.exports=function d(F){var O,B,G,D=0,N=0,k=f,z=[],U=[],nt=1,it=0,ut=0,Q=!1,j=!1,Z="",K=a,at=r;"300 es"===(F=F||{}).version&&(K=c,at=s);var $={},X={};for(D=0;D<K.length;D++)$[K[D]]=!0;for(D=0;D<at.length;D++)X[at[D]]=!0;return function(Vt){return U=[],null!==Vt?function et(Vt){D=0,Vt.toString&&(Vt=Vt.toString()),Z+=Vt.replace(/\r\n/g,"\n"),G=Z.length;for(var te;O=Z[D],D<G;){switch(te=D,k){case 0:D=It();break;case 1:D=Lt();break;case 2:D=gt();break;case 3:D=Mt();break;case 4:D=Gt();break;case 11:D=At();break;case 5:D=Wt();break;case m:D=Pt();break;case 9:D=bt();break;case f:D=dt()}te!==D&&("\n"===Z[te]?(it=0,++nt):++it)}return N+=D,Z=Z.slice(D),U}(Vt):function st(Vt){return z.length&&rt(z.join("")),k=10,rt("(eof)"),U}()};function rt(Vt){Vt.length&&U.push({type:E[k],data:Vt,position:ut,line:nt,column:it})}function dt(){return z=z.length?[]:z,"/"===B&&"*"===O?(ut=N+D-1,k=0,B=O,D+1):"/"===B&&"/"===O?(ut=N+D-1,k=1,B=O,D+1):"#"===O?(k=2,ut=N+D,D):/\s/.test(O)?(k=9,ut=N+D,D):(Q=/\d/.test(O),j=/[^\w_]/.test(O),ut=N+D,k=Q?4:j?3:m,D)}function bt(){return/[^\s]/g.test(O)?(rt(z.join("")),k=f,D):(z.push(O),B=O,D+1)}function gt(){return"\r"!==O&&"\n"!==O||"\\"===B?(z.push(O),B=O,D+1):(rt(z.join("")),k=f,D)}function Lt(){return gt()}function It(){return"/"===O&&"*"===B?(z.push(O),rt(z.join("")),k=f,D+1):(z.push(O),B=O,D+1)}function Mt(){if("."===B&&/\d/.test(O))return k=5,D;if("/"===B&&"*"===O)return k=0,D;if("/"===B&&"/"===O)return k=1,D;if("."===O&&z.length){for(;xt(z););return k=5,D}if(";"===O||")"===O||"("===O){if(z.length)for(;xt(z););return rt(O),k=f,D+1}var Vt=2===z.length&&"="!==O;if(/[\w_\d\s]/.test(O)||Vt){for(;xt(z););return k=f,D}return z.push(O),B=O,D+1}function xt(Vt){for(var Qt,Bt,te=0;;){if(Qt=l.indexOf(Vt.slice(0,Vt.length+te).join("")),Bt=l[Qt],-1===Qt){if(te--+Vt.length>0)continue;Bt=Vt.slice(0,1).join("")}return rt(Bt),ut+=Bt.length,(z=z.slice(Bt.length)).length}}function At(){return/[^a-fA-F0-9]/.test(O)?(rt(z.join("")),k=f,D):(z.push(O),B=O,D+1)}function Gt(){return"."===O||/[eE]/.test(O)?(z.push(O),k=5,B=O,D+1):"x"===O&&1===z.length&&"0"===z[0]?(k=11,z.push(O),B=O,D+1):/[^\d]/.test(O)?(rt(z.join("")),k=f,D):(z.push(O),B=O,D+1)}function Wt(){return"f"===O&&(z.push(O),B=O,D+=1),/[eE]/.test(O)||("-"===O||"+"===O)&&/[eE]/.test(B)?(z.push(O),B=O,D+1):/[^\d]/.test(O)?(rt(z.join("")),k=f,D):(z.push(O),B=O,D+1)}function Pt(){if(/[^\d\w_]/.test(O)){var Vt=z.join("");return k=X[Vt]?8:$[Vt]?7:6,rt(z.join("")),k=f,D}return z.push(O),B=O,D+1}};var r=e(399),l=e(9746),a=e(9525),s=e(9458),c=e(3585),f=999,m=9999,E=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3585:function(u,y,e){var r=e(9525);r=r.slice().filter(function(l){return!/^(gl\_|texture)/.test(l)}),u.exports=r.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(u){u.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(u,y,e){var r=e(399);u.exports=r.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(u){u.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(u){u.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(u,y,e){var r=e(3193);u.exports=function l(a,s){var c=r(s),f=[];return(f=f.concat(c(a))).concat(c(null))}},6832:function(u){u.exports=function(y){"string"==typeof y&&(y=[y]);for(var e=[].slice.call(arguments,1),r=[],l=0;l<y.length-1;l++)r.push(y[l],e[l]||"");return r.push(y[l]),r.join("")}},5233:function(u,y,e){"use strict";var r=e(4846);u.exports=r&&function l(){var a=!1;try{var s=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,s),window.removeEventListener("test",null,s)}catch(c){a=!1}return a}()},2183:function(u,y,e){"use strict";u.exports=function o(v,M){var b=v.length;if(0===b)throw new Error("Must have at least d+1 points");var L=v[0].length;if(b<=L)throw new Error("Must input at least d+1 points");var x=v.slice(0,L+1),S=r.apply(void 0,x);if(0===S)throw new Error("Input not in general position");for(var T=new Array(L+1),n=0;n<=L;++n)T[n]=n;S<0&&(T[0]=1,T[1]=0);var E=new a(T,new Array(L+1),!1),d=E.adjacent,F=new Array(L+2);for(n=0;n<=L;++n){for(var D=T.slice(),N=0;N<=L;++N)N===n&&(D[N]=-1);var k=D[0];D[0]=D[1],D[1]=k;var O=new a(D,new Array(L+1),!0);d[n]=O,F[n]=O}for(F[L+1]=E,n=0;n<=L;++n){D=d[n].vertices;var B=d[n].adjacent;for(N=0;N<=L;++N){var z=D[N];if(z<0)B[N]=E;else for(var U=0;U<=L;++U)d[U].vertices.indexOf(z)<0&&(B[N]=d[U])}}var H=new w(L,x,F),J=!!M;for(n=L+1;n<b;++n)H.insert(v[n],J);return H.boundary()};var r=e(417),l=e(8211).H;function a(v,M,b){this.vertices=v,this.adjacent=M,this.boundary=b,this.lastVisited=-1}function s(v,M,b){this.vertices=v,this.cell=M,this.index=b}function c(v,M){return l(v.vertices,M.vertices)}a.prototype.flip=function(){var v=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=v;var M=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=M};var h=[];function w(v,M,b){this.dimension=v,this.vertices=M,this.simplices=b,this.interior=b.filter(function(S){return!S.boundary}),this.tuple=new Array(v+1);for(var L=0;L<=v;++L)this.tuple[L]=this.vertices[L];var x=h[v];x||(x=h[v]=function m(v){var M=r[v+1];return M||(M=r),function f(v){return function(){return v.apply(this,this.tuple)}}(M)}(v)),this.orient=x}var p=w.prototype;p.handleBoundaryDegeneracy=function(v,M){var b=this.dimension,L=this.vertices.length-1,x=this.tuple,S=this.vertices,T=[v];for(v.lastVisited=-L;T.length>0;)for(var n=(v=T.pop()).adjacent,E=0;E<=b;++E){var d=n[E];if(d.boundary&&!(d.lastVisited<=-L)){for(var F=d.vertices,D=0;D<=b;++D){var N=F[D];x[D]=N<0?M:S[N]}var k=this.orient();if(k>0)return d;d.lastVisited=-L,0===k&&T.push(d)}}return null},p.walk=function(v,M){var b=this.vertices.length-1,L=this.dimension,x=this.vertices,S=this.tuple,T=M?this.interior.length*Math.random()|0:this.interior.length-1,n=this.interior[T];t:for(;!n.boundary;){for(var E=n.vertices,d=n.adjacent,F=0;F<=L;++F)S[F]=x[E[F]];for(n.lastVisited=b,F=0;F<=L;++F){var D=d[F];if(!(D.lastVisited>=b)){var N=S[F];S[F]=v;var k=this.orient();if(S[F]=N,k<0){n=D;continue t}D.lastVisited=D.boundary?-b:b}}return}return n},p.addPeaks=function(v,M){var b=this.vertices.length-1,L=this.dimension,x=this.vertices,S=this.tuple,T=this.interior,n=this.simplices,E=[M];M.lastVisited=b,M.vertices[M.vertices.indexOf(-1)]=b,M.boundary=!1,T.push(M);for(var d=[];E.length>0;){var F=(M=E.pop()).vertices,D=M.adjacent,N=F.indexOf(b);if(!(N<0))for(var k=0;k<=L;++k)if(k!==N){var O=D[k];if(O.boundary&&!(O.lastVisited>=b)){var B=O.vertices;if(O.lastVisited!==-b){for(var z=0,U=0;U<=L;++U)B[U]<0?(z=U,S[U]=v):S[U]=x[B[U]];if(this.orient()>0){B[z]=b,O.boundary=!1,T.push(O),E.push(O),O.lastVisited=b;continue}O.lastVisited=-b}var J=O.adjacent,nt=F.slice(),it=D.slice(),ut=new a(nt,it,!0);n.push(ut);var Q=J.indexOf(M);if(!(Q<0))for(J[Q]=ut,it[N]=O,nt[k]=-1,it[k]=M,D[k]=ut,ut.flip(),U=0;U<=L;++U){var j=nt[U];if(!(j<0||j===b)){for(var Z=new Array(L-1),G=0,K=0;K<=L;++K){var at=nt[K];at<0||K===U||(Z[G++]=at)}d.push(new s(Z,ut,U))}}}}}for(d.sort(c),k=0;k+1<d.length;k+=2){var $=d[k],X=d[k+1];$.index<0||X.index<0||($.cell.adjacent[$.index]=X.cell,X.cell.adjacent[X.index]=$.cell)}},p.insert=function(v,M){var b=this.vertices;b.push(v);var L=this.walk(v,M);if(L){for(var x=this.dimension,S=this.tuple,T=0;T<=x;++T){var n=L.vertices[T];S[T]=n<0?v:b[n]}var E=this.orient(S);E<0||0===E&&!(L=this.handleBoundaryDegeneracy(L,v))||this.addPeaks(v,L)}},p.boundary=function(){for(var v=this.dimension,M=[],b=this.simplices,L=b.length,x=0;x<L;++x){var S=b[x];if(S.boundary){for(var T=new Array(v),n=S.vertices,E=0,d=0,F=0;F<=v;++F)n[F]>=0?T[E++]=n[F]:d=1&F;if(d===(1&v)){var D=T[0];T[0]=T[1],T[1]=D}M.push(T)}}return M}},9014:function(u,y,e){"use strict";var r=e(5070);function c(d,F,D,N,k){this.mid=d,this.left=F,this.right=D,this.leftPoints=N,this.rightPoints=k,this.count=(F?F.count:0)+(D?D.count:0)+N.length}u.exports=function E(d){return new T(d&&0!==d.length?S(d):null)};var f=c.prototype;function m(d,F){d.mid=F.mid,d.left=F.left,d.right=F.right,d.leftPoints=F.leftPoints,d.rightPoints=F.rightPoints,d.count=F.count}function h(d,F){var D=S(F);d.mid=D.mid,d.left=D.left,d.right=D.right,d.leftPoints=D.leftPoints,d.rightPoints=D.rightPoints,d.count=D.count}function w(d,F){var D=d.intervals([]);D.push(F),h(d,D)}function p(d,F){var D=d.intervals([]),N=D.indexOf(F);return N<0?0:(D.splice(N,1),h(d,D),1)}function o(d,F,D){for(var N=0;N<d.length&&d[N][0]<=F;++N){var k=D(d[N]);if(k)return k}}function v(d,F,D){for(var N=d.length-1;N>=0&&d[N][1]>=F;--N){var k=D(d[N]);if(k)return k}}function M(d,F){for(var D=0;D<d.length;++D){var N=F(d[D]);if(N)return N}}function b(d,F){return d-F}function L(d,F){return d[0]-F[0]||d[1]-F[1]}function x(d,F){return d[1]-F[1]||d[0]-F[0]}function S(d){if(0===d.length)return null;for(var F=[],D=0;D<d.length;++D)F.push(d[D][0],d[D][1]);F.sort(b);var N=F[F.length>>1],k=[],O=[],B=[];for(D=0;D<d.length;++D){var z=d[D];z[1]<N?k.push(z):N<z[0]?O.push(z):B.push(z)}var U=B,H=B.slice();return U.sort(L),H.sort(x),new c(N,S(k),S(O),U,H)}function T(d){this.root=d}f.intervals=function(d){return d.push.apply(d,this.leftPoints),this.left&&this.left.intervals(d),this.right&&this.right.intervals(d),d},f.insert=function(d){var F=this.count-this.leftPoints.length;if(this.count+=1,d[1]<this.mid)this.left?4*(this.left.count+1)>3*(F+1)?w(this,d):this.left.insert(d):this.left=S([d]);else if(d[0]>this.mid)this.right?4*(this.right.count+1)>3*(F+1)?w(this,d):this.right.insert(d):this.right=S([d]);else{var D=r.ge(this.leftPoints,d,L),N=r.ge(this.rightPoints,d,x);this.leftPoints.splice(D,0,d),this.rightPoints.splice(N,0,d)}},f.remove=function(d){var F=this.count-this.leftPoints;if(d[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(F-1)?p(this,d):2===(N=this.left.remove(d))?(this.left=null,this.count-=1,1):(1===N&&(this.count-=1),N):0;if(d[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(F-1)?p(this,d):2===(N=this.right.remove(d))?(this.right=null,this.count-=1,1):(1===N&&(this.count-=1),N):0;if(1===this.count)return this.leftPoints[0]===d?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===d){if(this.left&&this.right){for(var O=this,B=this.left;B.right;)O=B,B=B.right;if(O===this)B.right=this.right;else{var z=this.left,N=this.right;O.count-=B.count,O.right=B.left,B.left=z,B.right=N}m(this,B),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else m(this,this.left?this.left:this.right);return 1}for(z=r.ge(this.leftPoints,d,L);z<this.leftPoints.length&&this.leftPoints[z][0]===d[0];++z)if(this.leftPoints[z]===d)for(this.count-=1,this.leftPoints.splice(z,1),N=r.ge(this.rightPoints,d,x);N<this.rightPoints.length&&this.rightPoints[N][1]===d[1];++N)if(this.rightPoints[N]===d)return this.rightPoints.splice(N,1),1;return 0},f.queryPoint=function(d,F){return d<this.mid?this.left&&(D=this.left.queryPoint(d,F))?D:o(this.leftPoints,d,F):d>this.mid?this.right&&(D=this.right.queryPoint(d,F))?D:v(this.rightPoints,d,F):M(this.leftPoints,F);var D},f.queryInterval=function(d,F,D){var N;return d<this.mid&&this.left&&(N=this.left.queryInterval(d,F,D))||F>this.mid&&this.right&&(N=this.right.queryInterval(d,F,D))?N:F<this.mid?o(this.leftPoints,F,D):d>this.mid?v(this.rightPoints,d,D):M(this.leftPoints,D)};var n=T.prototype;n.insert=function(d){this.root?this.root.insert(d):this.root=new c(d[0],null,null,[d],[d])},n.remove=function(d){if(this.root){var F=this.root.remove(d);return 2===F&&(this.root=null),0!==F}return!1},n.queryPoint=function(d,F){if(this.root)return this.root.queryPoint(d,F)},n.queryInterval=function(d,F,D){if(d<=F&&this.root)return this.root.queryInterval(d,F,D)},Object.defineProperty(n,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(n,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},9560:function(u){"use strict";u.exports=function y(e){for(var r=new Array(e),l=0;l<e;++l)r[l]=l;return r}},4846:function(u){u.exports=!0},4780:function(u){function y(r){return!!r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}u.exports=function(r){return null!=r&&(y(r)||function e(r){return"function"==typeof r.readFloatLE&&"function"==typeof r.slice&&y(r.slice(0,0))}(r)||!!r._isBuffer)}},3596:function(u){"use strict";u.exports=function(y){for(var r,e=y.length,l=0;l<e;l++)if(((r=y.charCodeAt(l))<9||r>13)&&32!==r&&133!==r&&160!==r&&5760!==r&&6158!==r&&(r<8192||r>8205)&&8232!==r&&8233!==r&&8239!==r&&8287!==r&&8288!==r&&12288!==r&&65279!==r)return!1;return!0}},3578:function(u){u.exports=function y(e,r,l){return e*(1-l)+r*l}},7191:function(u,y,e){var r=e(4690),l=e(9823),a=e(7332),s=e(7787),c=e(7437),f=e(2142),m={length:e(4693),normalize:e(899),dot:e(9305),cross:e(903)},h=l(),w=l(),p=[0,0,0,0],o=[[0,0,0],[0,0,0],[0,0,0]],v=[0,0,0];function L(x,S,T,n,E){x[0]=S[0]*n+T[0]*E,x[1]=S[1]*n+T[1]*E,x[2]=S[2]*n+T[2]*E}u.exports=function(S,T,n,E,d,F){if(T||(T=[0,0,0]),n||(n=[0,0,0]),E||(E=[0,0,0]),d||(d=[0,0,0,1]),F||(F=[0,0,0,1]),!r(h,S)||(a(w,h),w[3]=0,w[7]=0,w[11]=0,w[15]=1,Math.abs(s(w)<1e-8)))return!1;var D=h[3],N=h[7],k=h[11],O=h[12],B=h[13],z=h[14],U=h[15];if(0!==D||0!==N||0!==k){if(p[0]=D,p[1]=N,p[2]=k,p[3]=U,!c(w,w))return!1;f(w,w),function M(x,S,T){var n=S[0],E=S[1],d=S[2],F=S[3];return x[0]=T[0]*n+T[4]*E+T[8]*d+T[12]*F,x[1]=T[1]*n+T[5]*E+T[9]*d+T[13]*F,x[2]=T[2]*n+T[6]*E+T[10]*d+T[14]*F,x[3]=T[3]*n+T[7]*E+T[11]*d+T[15]*F,x}(d,p,w)}else d[0]=d[1]=d[2]=0,d[3]=1;if(T[0]=O,T[1]=B,T[2]=z,function b(x,S){x[0][0]=S[0],x[0][1]=S[1],x[0][2]=S[2],x[1][0]=S[4],x[1][1]=S[5],x[1][2]=S[6],x[2][0]=S[8],x[2][1]=S[9],x[2][2]=S[10]}(o,h),n[0]=m.length(o[0]),m.normalize(o[0],o[0]),E[0]=m.dot(o[0],o[1]),L(o[1],o[1],o[0],1,-E[0]),n[1]=m.length(o[1]),m.normalize(o[1],o[1]),E[0]/=n[1],E[1]=m.dot(o[0],o[2]),L(o[2],o[2],o[0],1,-E[1]),E[2]=m.dot(o[1],o[2]),L(o[2],o[2],o[1],1,-E[2]),n[2]=m.length(o[2]),m.normalize(o[2],o[2]),E[1]/=n[2],E[2]/=n[2],m.cross(v,o[1],o[2]),m.dot(o[0],v)<0)for(var J=0;J<3;J++)n[J]*=-1,o[J][0]*=-1,o[J][1]*=-1,o[J][2]*=-1;return F[0]=.5*Math.sqrt(Math.max(1+o[0][0]-o[1][1]-o[2][2],0)),F[1]=.5*Math.sqrt(Math.max(1-o[0][0]+o[1][1]-o[2][2],0)),F[2]=.5*Math.sqrt(Math.max(1-o[0][0]-o[1][1]+o[2][2],0)),F[3]=.5*Math.sqrt(Math.max(1+o[0][0]+o[1][1]+o[2][2],0)),o[2][1]>o[1][2]&&(F[0]=-F[0]),o[0][2]>o[2][0]&&(F[1]=-F[1]),o[1][0]>o[0][1]&&(F[2]=-F[2]),!0}},4690:function(u){u.exports=function(e,r){var l=r[15];if(0===l)return!1;for(var a=1/l,s=0;s<16;s++)e[s]=r[s]*a;return!0}},7649:function(u,y,e){var r=e(1868),l=e(1102),a=e(7191),s=e(7787),c=e(1116),f=p(),m=p(),h=p();function p(){return{translate:o(),scale:o(1),skew:o(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function o(M){return[M||0,M||0,M||0]}u.exports=function w(M,b,L,x){if(0===s(b)||0===s(L))return!1;var S=a(b,f.translate,f.scale,f.skew,f.perspective,f.quaternion),T=a(L,m.translate,m.scale,m.skew,m.perspective,m.quaternion);return!(!S||!T||(r(h.translate,f.translate,m.translate,x),r(h.skew,f.skew,m.skew,x),r(h.scale,f.scale,m.scale,x),r(h.perspective,f.perspective,m.perspective,x),c(h.quaternion,f.quaternion,m.quaternion,x),l(M,h.translate,h.scale,h.skew,h.perspective,h.quaternion),0))}},1102:function(u,y,e){var r={identity:e(9947),translate:e(998),multiply:e(104),create:e(9823),scale:e(3668),fromRotationTranslation:e(7280)},a=(r.create(),r.create());u.exports=function(c,f,m,h,w,p){return r.identity(c),r.fromRotationTranslation(c,p,f),c[3]=w[0],c[7]=w[1],c[11]=w[2],c[15]=w[3],r.identity(a),0!==h[2]&&(a[9]=h[2],r.multiply(c,c,a)),0!==h[1]&&(a[9]=0,a[8]=h[1],r.multiply(c,c,a)),0!==h[0]&&(a[8]=0,a[4]=h[0],r.multiply(c,c,a)),r.scale(c,c,m),c}},9298:function(u,y,e){"use strict";var r=e(5070),l=e(7649),a=e(7437),s=e(6109),c=e(7115),f=e(5240),m=e(3012),h=e(998),p=(e(3668),e(899)),o=[0,0,0];function v(x){this._components=x.slice(),this._time=[0],this.prevMatrix=x.slice(),this.nextMatrix=x.slice(),this.computedMatrix=x.slice(),this.computedInverse=x.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}u.exports=function L(x){return new v((x=x||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var M=v.prototype;M.recalcMatrix=function(x){var S=this._time,T=r.le(S,x),n=this.computedMatrix;if(!(T<0)){var E=this._components;if(T===S.length-1)for(var d=16*T,F=0;F<16;++F)n[F]=E[d++];else{var D=S[T+1]-S[T],N=(d=16*T,this.prevMatrix),k=!0;for(F=0;F<16;++F)N[F]=E[d++];var O=this.nextMatrix;for(F=0;F<16;++F)O[F]=E[d++],k=k&&N[F]===O[F];if(D<1e-6||k)for(F=0;F<16;++F)n[F]=N[F];else l(n,N,O,(x-S[T])/D)}var B=this.computedUp;B[0]=n[1],B[1]=n[5],B[2]=n[9],p(B,B);var z=this.computedInverse;a(z,n);var U=this.computedEye,H=z[15];U[0]=z[12]/H,U[1]=z[13]/H,U[2]=z[14]/H;var J=this.computedCenter,nt=Math.exp(this.computedRadius[0]);for(F=0;F<3;++F)J[F]=U[F]-n[2+4*F]*nt}},M.idle=function(x){if(!(x<this.lastT())){for(var S=this._components,T=S.length-16,n=0;n<16;++n)S.push(S[T++]);this._time.push(x)}},M.flush=function(x){var S=r.gt(this._time,x)-2;S<0||(this._time.splice(0,S),this._components.splice(0,16*S))},M.lastT=function(){return this._time[this._time.length-1]},M.lookAt=function(x,S,T,n){this.recalcMatrix(x),this.setMatrix(x,m(this.computedMatrix,S=S||this.computedEye,T=T||o,n=n||this.computedUp));for(var E=0,d=0;d<3;++d)E+=Math.pow(T[d]-S[d],2);E=Math.log(Math.sqrt(E)),this.computedRadius[0]=E},M.rotate=function(x,S,T,n){this.recalcMatrix(x);var E=this.computedInverse;S&&c(E,E,S),T&&s(E,E,T),n&&f(E,E,n),this.setMatrix(x,a(this.computedMatrix,E))};var b=[0,0,0];M.pan=function(x,S,T,n){b[0]=-(S||0),b[1]=-(T||0),b[2]=-(n||0),this.recalcMatrix(x);var E=this.computedInverse;h(E,E,b),this.setMatrix(x,a(E,E))},M.translate=function(x,S,T,n){b[0]=S||0,b[1]=T||0,b[2]=n||0,this.recalcMatrix(x);var E=this.computedMatrix;h(E,E,b),this.setMatrix(x,E)},M.setMatrix=function(x,S){if(!(x<this.lastT())){this._time.push(x);for(var T=0;T<16;++T)this._components.push(S[T])}},M.setDistance=function(x,S){this.computedRadius[0]=S},M.setDistanceLimits=function(x,S){var T=this._limits;T[0]=x,T[1]=S},M.getDistanceLimits=function(x){var S=this._limits;return x?(x[0]=S[0],x[1]=S[1],x):S}},3266:function(u,y,e){"use strict";u.exports=function l(a){var s=a.length;if(s<3){for(var v=new Array(s),c=0;c<s;++c)v[c]=c;return 2===s&&a[0][0]===a[1][0]&&a[0][1]===a[1][1]?[0]:v}var f=new Array(s);for(c=0;c<s;++c)f[c]=c;f.sort(function(x,S){return a[x][0]-a[S][0]||a[x][1]-a[S][1]});var m=[f[0],f[1]],h=[f[0],f[1]];for(c=2;c<s;++c){for(var w=f[c],p=a[w],o=m.length;o>1&&r(a[m[o-2]],a[m[o-1]],p)<=0;)o-=1,m.pop();for(m.push(w),o=h.length;o>1&&r(a[h[o-2]],a[h[o-1]],p)>=0;)o-=1,h.pop();h.push(w)}v=new Array(h.length+m.length-2);for(var M=0,b=(c=0,m.length);c<b;++c)v[M++]=m[c];for(var L=h.length-2;L>0;--L)v[M++]=h[L];return v};var r=e(417)[3]},6145:function(u,y,e){"use strict";u.exports=function l(a,s){s||(s=a,a=window);var c=0,f=0,m=0,h={shift:!1,alt:!1,control:!1,meta:!1},w=!1;function p(d){var F=!1;return"altKey"in d&&(F=F||d.altKey!==h.alt,h.alt=!!d.altKey),"shiftKey"in d&&(F=F||d.shiftKey!==h.shift,h.shift=!!d.shiftKey),"ctrlKey"in d&&(F=F||d.ctrlKey!==h.control,h.control=!!d.ctrlKey),"metaKey"in d&&(F=F||d.metaKey!==h.meta,h.meta=!!d.metaKey),F}function o(d,F){var D=r.x(F),N=r.y(F);"buttons"in F&&(d=0|F.buttons),(d!==c||D!==f||N!==m||p(F))&&(c=0|d,f=D||0,m=N||0,s&&s(c,f,m,h))}function v(d){o(0,d)}function M(){(c||f||m||h.shift||h.alt||h.meta||h.control)&&(f=m=0,c=0,h.shift=h.alt=h.control=h.meta=!1,s&&s(0,0,0,h))}function b(d){p(d)&&s&&s(c,f,m,h)}function L(d){0===r.buttons(d)?o(0,d):o(c,d)}function x(d){o(c|r.buttons(d),d)}function S(d){o(c&~r.buttons(d),d)}function T(){w||(w=!0,a.addEventListener("mousemove",L),a.addEventListener("mousedown",x),a.addEventListener("mouseup",S),a.addEventListener("mouseleave",v),a.addEventListener("mouseenter",v),a.addEventListener("mouseout",v),a.addEventListener("mouseover",v),a.addEventListener("blur",M),a.addEventListener("keyup",b),a.addEventListener("keydown",b),a.addEventListener("keypress",b),a!==window&&(window.addEventListener("blur",M),window.addEventListener("keyup",b),window.addEventListener("keydown",b),window.addEventListener("keypress",b)))}T();var E={element:a};return Object.defineProperties(E,{enabled:{get:function(){return w},set:function(d){d?T():function n(){!w||(w=!1,a.removeEventListener("mousemove",L),a.removeEventListener("mousedown",x),a.removeEventListener("mouseup",S),a.removeEventListener("mouseleave",v),a.removeEventListener("mouseenter",v),a.removeEventListener("mouseout",v),a.removeEventListener("mouseover",v),a.removeEventListener("blur",M),a.removeEventListener("keyup",b),a.removeEventListener("keydown",b),a.removeEventListener("keypress",b),a!==window&&(window.removeEventListener("blur",M),window.removeEventListener("keyup",b),window.removeEventListener("keydown",b),window.removeEventListener("keypress",b)))}()},enumerable:!0},buttons:{get:function(){return c},enumerable:!0},x:{get:function(){return f},enumerable:!0},y:{get:function(){return m},enumerable:!0},mods:{get:function(){return h},enumerable:!0}}),E};var r=e(4110)},2565:function(u){var y={left:0,top:0};u.exports=function e(l,a,s){a=a||l.currentTarget||l.srcElement,Array.isArray(s)||(s=[0,0]);var c=l.clientX||0,f=l.clientY||0,m=function r(l){return l===window||l===document||l===document.body?y:l.getBoundingClientRect()}(a);return s[0]=c-m.left,s[1]=f-m.top,s}},4110:function(u,y){"use strict";function r(s){return s.target||s.srcElement||window}y.buttons=function e(s){if("object"==typeof s){if("buttons"in s)return s.buttons;if("which"in s){if(2===(c=s.which))return 4;if(3===c)return 2;if(c>0)return 1<<c-1}else if("button"in s){var c;if(1===(c=s.button))return 4;if(2===c)return 2;if(c>=0)return 1<<c}}return 0},y.element=r,y.x=function l(s){if("object"==typeof s){if("offsetX"in s)return s.offsetX;var f=r(s).getBoundingClientRect();return s.clientX-f.left}return 0},y.y=function a(s){if("object"==typeof s){if("offsetY"in s)return s.offsetY;var f=r(s).getBoundingClientRect();return s.clientY-f.top}return 0}},6475:function(u,y,e){"use strict";var r=e(14);u.exports=function l(a,s,c){"function"==typeof a&&(c=!!s,s=a,a=window);var f=r("ex",a),m=function(h){c&&h.preventDefault();var w=h.deltaX||0,p=h.deltaY||0,o=h.deltaZ||0,M=1;switch(h.deltaMode){case 1:M=f;break;case 2:M=window.innerHeight}if(p*=M,o*=M,(w*=M)||p||o)return s(w,p,o,h)};return a.addEventListener("wheel",m),m}},9284:function(u,y,e){"use strict";var r=e(5306);u.exports=function s(c){function f(M){throw new Error("ndarray-extract-contour: "+M)}"object"!=typeof c&&f("Must specify arguments");var m=c.order;Array.isArray(m)||f("Must specify order");var h=c.arrayArguments||1;h<1&&f("Must have at least one array argument");var w=c.scalarArguments||0;w<0&&f("Scalar arg count must be > 0"),"function"!=typeof c.vertex&&f("Must specify vertex creation function"),"function"!=typeof c.cell&&f("Must specify cell creation function"),"function"!=typeof c.phase&&f("Must specify phase function");for(var p=c.getters||[],o=new Array(h),v=0;v<h;++v)o[v]=p.indexOf(v)>=0;return function a(c,f,m,h,w,p){var o=[p,w].join(",");return(0,l[o])(c,f,m,r.mallocUint32,r.freeUint32)}(c.vertex,c.cell,c.phase,0,m,o)};var l={"false,0,1":function(f,m,h,w,p){return function(v,M,b,L){var D,x=0|v.shape[0],S=0|v.shape[1],T=v.data,E=0|v.stride[0],d=0|v.stride[1],F=0|v.offset,N=0|-E,k=0,O=0|-d,B=0,z=-E-d|0,U=0,H=0|E,J=d-E*x|0,nt=0,it=0,ut=0,Q=2*x|0,j=w(Q),Z=w(Q),G=0,K=0,at=-1,$=-1,X=0,rt=0|-x,et=0|x,st=0,dt=-x-1|0,bt=x-1|0,gt=0,Lt=0,It=0;for(nt=0;nt<x;++nt)j[G++]=h(T[F],M,b,L),F+=H;if(F+=J,S>0){if(it=1,j[G++]=h(T[F],M,b,L),F+=H,x>0)for(nt=1,K=j[G]=h(D=T[F],M,b,L),st=j[G+rt],gt=j[G+dt],(K!==(X=j[G+at])||K!==st||K!==gt)&&(f(nt,it,D,k=T[F+N],B=T[F+O],U=T[F+z],K,X,st,gt,M,b,L),Lt=Z[G]=ut++),G+=1,F+=H,nt=2;nt<x;++nt)K=j[G]=h(D=T[F],M,b,L),st=j[G+rt],gt=j[G+dt],(K!==(X=j[G+at])||K!==st||K!==gt)&&(f(nt,it,D,k=T[F+N],B=T[F+O],U=T[F+z],K,X,st,gt,M,b,L),Lt=Z[G]=ut++,gt!==X&&m(Z[G+at],Lt,U,k,gt,X,M,b,L)),G+=1,F+=H;for(F+=J,G=0,It=at,at=$,$=It,It=rt,rt=et,et=It,It=dt,dt=bt,bt=It,it=2;it<S;++it){if(j[G++]=h(T[F],M,b,L),F+=H,x>0)for(nt=1,K=j[G]=h(D=T[F],M,b,L),st=j[G+rt],gt=j[G+dt],(K!==(X=j[G+at])||K!==st||K!==gt)&&(f(nt,it,D,k=T[F+N],B=T[F+O],U=T[F+z],K,X,st,gt,M,b,L),Lt=Z[G]=ut++,gt!==st&&m(Z[G+rt],Lt,B,U,st,gt,M,b,L)),G+=1,F+=H,nt=2;nt<x;++nt)K=j[G]=h(D=T[F],M,b,L),st=j[G+rt],gt=j[G+dt],(K!==(X=j[G+at])||K!==st||K!==gt)&&(f(nt,it,D,k=T[F+N],B=T[F+O],U=T[F+z],K,X,st,gt,M,b,L),Lt=Z[G]=ut++,gt!==st&&m(Z[G+rt],Lt,B,U,st,gt,M,b,L),gt!==X&&m(Z[G+at],Lt,U,k,gt,X,M,b,L)),G+=1,F+=H;1&it&&(G=0),It=at,at=$,$=It,It=rt,rt=et,et=It,It=dt,dt=bt,bt=It,F+=J}}p(Z),p(j)}},"false,1,0":function(f,m,h,w,p){return function(v,M,b,L){var D,x=0|v.shape[0],S=0|v.shape[1],T=v.data,E=0|v.stride[0],d=0|v.stride[1],F=0|v.offset,N=0|-E,k=0,O=0|-d,B=0,z=-E-d|0,U=0,H=0|d,J=E-d*S|0,nt=0,it=0,ut=0,Q=2*S|0,j=w(Q),Z=w(Q),G=0,K=0,at=-1,$=-1,X=0,rt=0|-S,et=0|S,st=0,dt=-S-1|0,bt=S-1|0,gt=0,Lt=0,It=0;for(it=0;it<S;++it)j[G++]=h(T[F],M,b,L),F+=H;if(F+=J,x>0){if(nt=1,j[G++]=h(T[F],M,b,L),F+=H,S>0)for(it=1,K=j[G]=h(D=T[F],M,b,L),X=j[G+at],gt=j[G+dt],(K!==(st=j[G+rt])||K!==X||K!==gt)&&(f(nt,it,D,k=T[F+N],B=T[F+O],U=T[F+z],K,st,X,gt,M,b,L),Lt=Z[G]=ut++),G+=1,F+=H,it=2;it<S;++it)K=j[G]=h(D=T[F],M,b,L),X=j[G+at],gt=j[G+dt],(K!==(st=j[G+rt])||K!==X||K!==gt)&&(f(nt,it,D,k=T[F+N],B=T[F+O],U=T[F+z],K,st,X,gt,M,b,L),Lt=Z[G]=ut++,gt!==X&&m(Z[G+at],Lt,B,U,X,gt,M,b,L)),G+=1,F+=H;for(F+=J,G=0,It=rt,rt=et,et=It,It=at,at=$,$=It,It=dt,dt=bt,bt=It,nt=2;nt<x;++nt){if(j[G++]=h(T[F],M,b,L),F+=H,S>0)for(it=1,K=j[G]=h(D=T[F],M,b,L),X=j[G+at],gt=j[G+dt],(K!==(st=j[G+rt])||K!==X||K!==gt)&&(f(nt,it,D,k=T[F+N],B=T[F+O],U=T[F+z],K,st,X,gt,M,b,L),Lt=Z[G]=ut++,gt!==st&&m(Z[G+rt],Lt,U,k,gt,st,M,b,L)),G+=1,F+=H,it=2;it<S;++it)K=j[G]=h(D=T[F],M,b,L),X=j[G+at],gt=j[G+dt],(K!==(st=j[G+rt])||K!==X||K!==gt)&&(f(nt,it,D,k=T[F+N],B=T[F+O],U=T[F+z],K,st,X,gt,M,b,L),Lt=Z[G]=ut++,gt!==X&&m(Z[G+at],Lt,B,U,X,gt,M,b,L),gt!==st&&m(Z[G+rt],Lt,U,k,gt,st,M,b,L)),G+=1,F+=H;1&nt&&(G=0),It=rt,rt=et,et=It,It=at,at=$,$=It,It=dt,dt=bt,bt=It,F+=J}}p(Z),p(j)}}}},9144:function(u,y,e){"use strict";var r=e(3094),l={zero:function(L,x,S,T){var n=L[0];T|=0;var d=0,F=S[0];for(d=0;d<n;++d)x[T]=0,T+=F},fdTemplate1:function(L,x,S,T,n,E,d){var F=L[0],D=S[0],k=-1*D,O=D;T|=0,d|=0;var B=0,z=D,U=E[0];for(B=0;B<F;++B)n[d]=.5*(x[T+k]-x[T+O]),T+=z,d+=U},fdTemplate2:function(L,x,S,T,n,E,d,F,D,N){var k=L[0],O=L[1],B=S[0],z=S[1],H=E[1],nt=D[1],it=-1*B,ut=B,Q=-1*z,j=z;T|=0,d|=0,N|=0;var Z=0,G=0,K=z,at=B-O*z,$=H,X=E[0]-O*H,rt=nt,et=D[0]-O*nt;for(G=0;G<k;++G){for(Z=0;Z<O;++Z)n[d]=.5*(x[T+it]-x[T+ut]),F[N]=.5*(x[T+Q]-x[T+j]),T+=K,d+=$,N+=rt;T+=at,d+=X,N+=et}}},a={cdiff:function(L){var x={};return function(T,n,E){var d=T.dtype,F=T.order,D=n.dtype,N=n.order,k=E.dtype,O=E.order,B=[d,F.join(),D,N.join(),k,O.join()].join(),z=x[B];return z||(x[B]=z=L([d,F,D,N,k,O])),z(T.shape.slice(0),T.data,T.stride,0|T.offset,n.data,n.stride,0|n.offset,E.data,E.stride,0|E.offset)}},zero:function(L){var x={};return function(T){var n=T.dtype,E=T.order,d=[n,E.join()].join(),F=x[d];return F||(x[d]=F=L([n,E])),F(T.shape.slice(0),T.data,T.stride,0|T.offset)}},fdTemplate1:function(L){var x={};return function(T,n){var E=T.dtype,d=T.order,F=n.dtype,D=n.order,N=[E,d.join(),F,D.join()].join(),k=x[N];return k||(x[N]=k=L([E,d,F,D])),k(T.shape.slice(0),T.data,T.stride,0|T.offset,n.data,n.stride,0|n.offset)}},fdTemplate2:function(L){var x={};return function(T,n,E){var d=T.dtype,F=T.order,D=n.dtype,N=n.order,k=E.dtype,O=E.order,B=[d,F.join(),D,N.join(),k,O.join()].join(),z=x[B];return z||(x[B]=z=L([d,F,D,N,k,O])),z(T.shape.slice(0),T.data,T.stride,0|T.offset,n.data,n.stride,0|n.offset,E.data,E.stride,0|E.offset)}}};function s(L){return(0,a[L.funcName])(c.bind(void 0,L))}function c(L){return l[L.funcName]}function f(L){return s({funcName:L.funcName})}var m={},h={},p=f({funcName:"cdiff"}),o=f({funcName:"zero"});function v(L){return L in m?m[L]:m[L]=f({funcName:"fdTemplate"+L})}function M(L,x,S,T){return function(n,E){var d=E.shape.slice();return d[0]>2&&d[1]>2&&T(E.pick(-1,-1).lo(1,1).hi(d[0]-2,d[1]-2),n.pick(-1,-1,0).lo(1,1).hi(d[0]-2,d[1]-2),n.pick(-1,-1,1).lo(1,1).hi(d[0]-2,d[1]-2)),d[1]>2&&(S(E.pick(0,-1).lo(1).hi(d[1]-2),n.pick(0,-1,1).lo(1).hi(d[1]-2)),x(n.pick(0,-1,0).lo(1).hi(d[1]-2))),d[1]>2&&(S(E.pick(d[0]-1,-1).lo(1).hi(d[1]-2),n.pick(d[0]-1,-1,1).lo(1).hi(d[1]-2)),x(n.pick(d[0]-1,-1,0).lo(1).hi(d[1]-2))),d[0]>2&&(S(E.pick(-1,0).lo(1).hi(d[0]-2),n.pick(-1,0,0).lo(1).hi(d[0]-2)),x(n.pick(-1,0,1).lo(1).hi(d[0]-2))),d[0]>2&&(S(E.pick(-1,d[1]-1).lo(1).hi(d[0]-2),n.pick(-1,d[1]-1,0).lo(1).hi(d[0]-2)),x(n.pick(-1,d[1]-1,1).lo(1).hi(d[0]-2))),n.set(0,0,0,0),n.set(0,0,1,0),n.set(d[0]-1,0,0,0),n.set(d[0]-1,0,1,0),n.set(0,d[1]-1,0,0),n.set(0,d[1]-1,1,0),n.set(d[0]-1,d[1]-1,0,0),n.set(d[0]-1,d[1]-1,1,0),n}}u.exports=function(x,S,T){return Array.isArray(T)||(T=r(S.dimension,"string"==typeof T?T:"clamp")),0===S.size?x:0===S.dimension?(x.set(0),x):function b(L){var x=L.join();if(d=h[x])return d;for(var S=L.length,T=[p,o],n=1;n<=S;++n)T.push(v(n));var d=M.apply(void 0,T);return h[x]=d,d}(T)(x,S)}},3581:function(u){"use strict";function y(s,c){var f=Math.floor(c),m=c-f,w=0<=f+1&&f+1<s.shape[0];return(1-m)*(0<=f&&f<s.shape[0]?+s.get(f):0)+m*(w?+s.get(f+1):0)}function e(s,c,f){var m=Math.floor(c),h=c-m,w=0<=m&&m<s.shape[0],p=0<=m+1&&m+1<s.shape[0],o=Math.floor(f),v=f-o,M=0<=o&&o<s.shape[1],b=0<=o+1&&o+1<s.shape[1],L=w&&M?s.get(m,o):0,x=w&&b?s.get(m,o+1):0;return(1-v)*((1-h)*L+h*(p&&M?s.get(m+1,o):0))+v*((1-h)*x+h*(p&&b?s.get(m+1,o+1):0))}function r(s,c,f,m){var h=Math.floor(c),w=c-h,p=0<=h&&h<s.shape[0],o=0<=h+1&&h+1<s.shape[0],v=Math.floor(f),M=f-v,b=0<=v&&v<s.shape[1],L=0<=v+1&&v+1<s.shape[1],x=Math.floor(m),S=m-x,T=0<=x&&x<s.shape[2],n=0<=x+1&&x+1<s.shape[2],E=p&&b&&T?s.get(h,v,x):0,d=p&&L&&T?s.get(h,v+1,x):0,F=o&&b&&T?s.get(h+1,v,x):0,D=o&&L&&T?s.get(h+1,v+1,x):0,N=p&&b&&n?s.get(h,v,x+1):0,k=p&&L&&n?s.get(h,v+1,x+1):0;return(1-S)*((1-M)*((1-w)*E+w*F)+M*((1-w)*d+w*D))+S*((1-M)*((1-w)*N+w*(o&&b&&n?s.get(h+1,v,x+1):0))+M*((1-w)*k+w*(o&&L&&n?s.get(h+1,v+1,x+1):0)))}function l(s){var p,o,c=0|s.shape.length,f=new Array(c),m=new Array(c),h=new Array(c),w=new Array(c);for(p=0;p<c;++p)o=+arguments[p+1],f[p]=Math.floor(o),m[p]=o-f[p],h[p]=0<=f[p]&&f[p]<s.shape[p],w[p]=0<=f[p]+1&&f[p]+1<s.shape[p];var M,b,L,v=0;t:for(p=0;p<1<<c;++p){for(b=1,L=s.offset,M=0;M<c;++M)if(p&1<<M){if(!w[M])continue t;b*=m[M],L+=s.stride[M]*(f[M]+1)}else{if(!h[M])continue t;b*=1-m[M],L+=s.stride[M]*f[M]}v+=b*s.data[L]}return v}u.exports=function a(s,c,f,m){switch(s.shape.length){case 0:return 0;case 1:return y(s,c);case 2:return e(s,c,f);case 3:return r(s,c,f,m);default:return l.apply(void 0,arguments)}},u.exports.d1=y,u.exports.d2=e,u.exports.d3=r},7498:function(u,y){"use strict";var e={"float64,2,1,0":function(){return function(h,w,p,o,v){var M=h[0],b=h[1],L=h[2],S=p[1],T=p[2];o|=0;var n=0,E=0,d=0,F=T,D=S-L*T,N=p[0]-b*S;for(d=0;d<M;++d){for(E=0;E<b;++E){for(n=0;n<L;++n)w[o]/=v,o+=F;o+=D}o+=N}}},"uint8,2,0,1,float64,2,1,0":function(){return function(h,w,p,o,v,M,b,L){for(var x=h[0],S=h[1],T=h[2],n=p[0],E=p[1],d=p[2],F=M[0],D=M[1],N=M[2],k=o|=0,O=b|=0,B=0|h[0];B>0;){B<64?(x=B,B=0):(x=64,B-=64);for(var z=0|h[1];z>0;){z<64?(S=z,z=0):(S=64,z-=64),o=k+B*n+z*E,b=O+B*F+z*D;var U=0,H=0,J=0,nt=d,it=n-T*d,ut=E-x*n,Q=N,j=F-T*N,Z=D-x*F;for(J=0;J<S;++J){for(H=0;H<x;++H){for(U=0;U<T;++U)w[o]=v[b]*L,o+=nt,b+=Q;o+=it,b+=j}o+=ut,b+=Z}}}}},"float32,1,0,float32,1,0":function(){return function(h,w,p,o,v,M,b){var L=h[0],x=h[1],T=p[1],E=M[1];o|=0,b|=0;var d=0,F=0,D=T,N=p[0]-x*T,k=E,O=M[0]-x*E;for(F=0;F<L;++F){for(d=0;d<x;++d)w[o]=v[b],o+=D,b+=k;o+=N,b+=O}}},"float32,1,0,float32,0,1":function(){return function(h,w,p,o,v,M,b){for(var L=h[0],x=h[1],S=p[0],T=p[1],n=M[0],E=M[1],d=o|=0,F=b|=0,D=0|h[1];D>0;){D<64?(x=D,D=0):(x=64,D-=64);for(var N=0|h[0];N>0;){N<64?(L=N,N=0):(L=64,N-=64),o=d+D*T+N*S,b=F+D*E+N*n;var k=0,O=0,B=T,z=S-x*T,U=E,H=n-x*E;for(O=0;O<L;++O){for(k=0;k<x;++k)w[o]=v[b],o+=B,b+=U;o+=z,b+=H}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(h,w,p,o,v,M,b){for(var L=h[0],x=h[1],S=h[2],T=p[0],n=p[1],E=p[2],d=M[0],F=M[1],D=M[2],N=o|=0,k=b|=0,O=0|h[2];O>0;){O<64?(S=O,O=0):(S=64,O-=64);for(var B=0|h[0];B>0;){B<64?(L=B,B=0):(L=64,B-=64);for(var z=0|h[1];z>0;){z<64?(x=z,z=0):(x=64,z-=64),o=N+O*E+B*T+z*n,b=k+O*D+B*d+z*F;var U=0,H=0,J=0,nt=E,it=T-S*E,ut=n-L*T,Q=D,j=d-S*D,Z=F-L*d;for(J=0;J<x;++J){for(H=0;H<L;++H){for(U=0;U<S;++U)w[o]=v[b],o+=nt,b+=Q;o+=it,b+=j}o+=ut,b+=Z}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(h,w,p,o,v,M,b){var L=h[0],x=h[1],S=h[2],T=p[0],E=p[2],d=M[0],D=M[2];o|=0,b|=0;var N=0,k=0,O=0,B=E,z=T-S*E,U=p[1]-L*T,H=D,J=d-S*D,nt=M[1]-L*d;for(O=0;O<x;++O){for(k=0;k<L;++k){for(N=0;N<S;++N)w[o]=v[b],o+=B,b+=H;o+=z,b+=J}o+=U,b+=nt}}}};var l=function r(m,h){var w=h.join(",");return(0,e[w])()},a={mul:function(m){var h={};return function(p,o,v){var M=p.dtype,b=p.order,L=o.dtype,x=o.order,S=v.dtype,T=v.order,n=[M,b.join(),L,x.join(),S,T.join()].join(),E=h[n];return E||(h[n]=E=m([M,b,L,x,S,T])),E(p.shape.slice(0),p.data,p.stride,0|p.offset,o.data,o.stride,0|o.offset,v.data,v.stride,0|v.offset)}},muls:function(m){var h={};return function(p,o,v){var M=p.dtype,b=p.order,L=o.dtype,x=o.order,S=[M,b.join(),L,x.join()].join(),T=h[S];return T||(h[S]=T=m([M,b,L,x])),T(p.shape.slice(0),p.data,p.stride,0|p.offset,o.data,o.stride,0|o.offset,v)}},mulseq:function(m){var h={};return function(p,o){var v=p.dtype,M=p.order,b=[v,M.join()].join(),L=h[b];return L||(h[b]=L=m([v,M])),L(p.shape.slice(0),p.data,p.stride,0|p.offset,o)}},div:function(m){var h={};return function(p,o,v){var M=p.dtype,b=p.order,L=o.dtype,x=o.order,S=v.dtype,T=v.order,n=[M,b.join(),L,x.join(),S,T.join()].join(),E=h[n];return E||(h[n]=E=m([M,b,L,x,S,T])),E(p.shape.slice(0),p.data,p.stride,0|p.offset,o.data,o.stride,0|o.offset,v.data,v.stride,0|v.offset)}},divs:function(m){var h={};return function(p,o,v){var M=p.dtype,b=p.order,L=o.dtype,x=o.order,S=[M,b.join(),L,x.join()].join(),T=h[S];return T||(h[S]=T=m([M,b,L,x])),T(p.shape.slice(0),p.data,p.stride,0|p.offset,o.data,o.stride,0|o.offset,v)}},divseq:function(m){var h={};return function(p,o){var v=p.dtype,M=p.order,b=[v,M.join()].join(),L=h[b];return L||(h[b]=L=m([v,M])),L(p.shape.slice(0),p.data,p.stride,0|p.offset,o)}},assign:function(m){var h={};return function(p,o){var v=p.dtype,M=p.order,b=o.dtype,L=o.order,x=[v,M.join(),b,L.join()].join(),S=h[x];return S||(h[x]=S=m([v,M,b,L])),S(p.shape.slice(0),p.data,p.stride,0|p.offset,o.data,o.stride,0|o.offset)}}};function c(m){return function s(m){return(0,a[m.funcName])(l.bind(void 0,m))}({funcName:m.funcName})}var f={mul:"*",div:"/"};(function(){for(var m in f)y[m]=c({funcName:m}),y[m+"s"]=c({funcName:m+"s"}),y[m+"seq"]=c({funcName:m+"seq"})})(),y.assign=c({funcName:"assign"})},7382:function(u,y,e){"use strict";var r=e(5050),l=e(9262);u.exports=function(s,c){for(var f=[],m=s,h=1;Array.isArray(m);)f.push(m.length),h*=m.length,m=m[0];return 0===f.length?r():(c||(c=r(new Float64Array(h),f)),l(c,s),c)}},9262:function(u){"use strict";var r=function e(){return function(c,f,m,h,w){var p=c[0],o=c[1],v=c[2],b=m[1],L=m[2],x=[0,0,0];h|=0;var S=0,T=0,n=0,E=L,d=b-v*L,F=m[0]-o*b;for(n=0;n<p;++n){for(T=0;T<o;++T){for(S=0;S<v;++S){var N,D=w;for(N=0;N<x.length-1;++N)D=D[x[N]];f[h]=D[x[x.length-1]],h+=E,++x[2]}h+=d,x[2]-=v,++x[1]}h+=F,x[1]-=o,++x[0]}}};u.exports=function s(c){return function a(c){return function l(c){var f={};return function(h,w){var p=h.dtype,o=h.order,v=[p,o.join()].join(),M=f[v];return M||(f[v]=M=c([p,o])),M(h.shape.slice(0),h.data,h.stride,0|h.offset,w)}}(r.bind(void 0,c))}({funcName:c.funcName})}({funcName:"convert"})},8139:function(u,y,e){"use strict";var r=e(5306);function l(w){return"uint32"===w?[r.mallocUint32,r.freeUint32]:null}var a={"uint32,1,0":function(w,p){return function(v,M,b,L,x,S,T,n,E,d,F){var D,N,k,B,U,H,J,nt,O=v*x+L,z=w(n);for(D=v+1;D<=M;++D){for(N=D,k=O+=x,U=0,H=O,B=0;B<n;++B)z[U++]=b[H],H+=E;t:for(;N-- >v;){U=0,H=k-x;e:for(B=0;B<n;++B){if((J=b[H])<(nt=z[U]))break t;if(J>nt)break e;H+=d,U+=F}for(U=k,H=k-x,B=0;B<n;++B)b[U]=b[H],U+=E,H+=E;k-=x}for(U=k,H=0,B=0;B<n;++B)b[U]=z[H++],U+=E}p(z)}}};var c={"uint32,1,0":function(w,p,o){return function v(M,b,L,x,S,T,n,E,d,F,D){var G,K,$,X,rt,et,st,dt,It,Mt,xt,At,Gt,Wt,Pt,Vt,te,Qt,Bt,Ot,qt,ie,oe,pe,N=(b-M+1)/6|0,k=M+N,O=b-N,B=M+b>>1,z=B-N,U=B+N,H=k,J=z,nt=B,it=U,ut=O,Q=M+1,j=b-1,Z=!0,bt=0,gt=0,Lt=0,de=E,Fe=p(de),Kt=p(de);Mt=S*H,xt=S*J,pe=x;t:for(It=0;It<E;++It){if((Lt=L[et=Mt+pe]-L[st=xt+pe])>0){K=H,H=J,J=K;break t}if(Lt<0)break t;pe+=F}Mt=S*it,xt=S*ut,pe=x;t:for(It=0;It<E;++It){if((Lt=L[et=Mt+pe]-L[st=xt+pe])>0){K=it,it=ut,ut=K;break t}if(Lt<0)break t;pe+=F}Mt=S*H,xt=S*nt,pe=x;t:for(It=0;It<E;++It){if((Lt=L[et=Mt+pe]-L[st=xt+pe])>0){K=H,H=nt,nt=K;break t}if(Lt<0)break t;pe+=F}Mt=S*J,xt=S*nt,pe=x;t:for(It=0;It<E;++It){if((Lt=L[et=Mt+pe]-L[st=xt+pe])>0){K=J,J=nt,nt=K;break t}if(Lt<0)break t;pe+=F}Mt=S*H,xt=S*it,pe=x;t:for(It=0;It<E;++It){if((Lt=L[et=Mt+pe]-L[st=xt+pe])>0){K=H,H=it,it=K;break t}if(Lt<0)break t;pe+=F}Mt=S*nt,xt=S*it,pe=x;t:for(It=0;It<E;++It){if((Lt=L[et=Mt+pe]-L[st=xt+pe])>0){K=nt,nt=it,it=K;break t}if(Lt<0)break t;pe+=F}Mt=S*J,xt=S*ut,pe=x;t:for(It=0;It<E;++It){if((Lt=L[et=Mt+pe]-L[st=xt+pe])>0){K=J,J=ut,ut=K;break t}if(Lt<0)break t;pe+=F}Mt=S*J,xt=S*nt,pe=x;t:for(It=0;It<E;++It){if((Lt=L[et=Mt+pe]-L[st=xt+pe])>0){K=J,J=nt,nt=K;break t}if(Lt<0)break t;pe+=F}Mt=S*it,xt=S*ut,pe=x;t:for(It=0;It<E;++It){if((Lt=L[et=Mt+pe]-L[st=xt+pe])>0){K=it,it=ut,ut=K;break t}if(Lt<0)break t;pe+=F}for(Mt=S*H,xt=S*J,At=S*nt,Gt=S*it,Wt=S*ut,Pt=S*k,Vt=S*B,te=S*O,oe=0,pe=x,It=0;It<E;++It)et=Mt+pe,dt=At+pe,Qt=Gt+pe,Bt=Wt+pe,Ot=Pt+pe,qt=Vt+pe,ie=te+pe,Fe[oe]=L[st=xt+pe],Kt[oe]=L[Qt],Z=Z&&Fe[oe]===Kt[oe],$=L[dt],X=L[Bt],L[Ot]=L[et],L[qt]=$,L[ie]=X,++oe,pe+=d;for(Mt=S*z,xt=S*M,pe=x,It=0;It<E;++It)L[et=Mt+pe]=L[st=xt+pe],pe+=d;for(Mt=S*U,xt=S*b,pe=x,It=0;It<E;++It)L[et=Mt+pe]=L[st=xt+pe],pe+=d;if(Z)for(rt=Q;rt<=j;++rt){for(et=x+rt*S,oe=0,It=0;It<E&&0==(Lt=L[et]-Fe[oe]);++It)oe+=D,et+=F;if(0!==Lt)if(Lt<0){if(rt!==Q)for(Mt=S*rt,xt=S*Q,pe=x,It=0;It<E;++It)G=L[et=Mt+pe],L[et]=L[st=xt+pe],L[st]=G,pe+=d;++Q}else for(;;){for(et=x+j*S,oe=0,It=0;It<E&&0==(Lt=L[et]-Fe[oe]);++It)oe+=D,et+=F;if(!(Lt>0)){if(Lt<0){for(Mt=S*rt,xt=S*Q,At=S*j,pe=x,It=0;It<E;++It)dt=At+pe,G=L[et=Mt+pe],L[et]=L[st=xt+pe],L[st]=L[dt],L[dt]=G,pe+=d;++Q,--j;break}for(Mt=S*rt,xt=S*j,pe=x,It=0;It<E;++It)G=L[et=Mt+pe],L[et]=L[st=xt+pe],L[st]=G,pe+=d;--j;break}j--}}else for(rt=Q;rt<=j;++rt){for(et=x+rt*S,oe=0,It=0;It<E&&0==(bt=L[et]-Fe[oe]);++It)oe+=D,et+=F;if(bt<0){if(rt!==Q)for(Mt=S*rt,xt=S*Q,pe=x,It=0;It<E;++It)G=L[et=Mt+pe],L[et]=L[st=xt+pe],L[st]=G,pe+=d;++Q}else{for(et=x+rt*S,oe=0,It=0;It<E&&0==(gt=L[et]-Kt[oe]);++It)oe+=D,et+=F;if(gt>0)for(;;){for(et=x+j*S,oe=0,It=0;It<E&&0==(Lt=L[et]-Kt[oe]);++It)oe+=D,et+=F;if(!(Lt>0)){for(et=x+j*S,oe=0,It=0;It<E&&0==(Lt=L[et]-Fe[oe]);++It)oe+=D,et+=F;if(Lt<0){for(Mt=S*rt,xt=S*Q,At=S*j,pe=x,It=0;It<E;++It)dt=At+pe,G=L[et=Mt+pe],L[et]=L[st=xt+pe],L[st]=L[dt],L[dt]=G,pe+=d;++Q,--j}else{for(Mt=S*rt,xt=S*j,pe=x,It=0;It<E;++It)G=L[et=Mt+pe],L[et]=L[st=xt+pe],L[st]=G,pe+=d;--j}break}if(--j<rt)break}}}for(Mt=S*M,xt=S*(Q-1),oe=0,pe=x,It=0;It<E;++It)L[et=Mt+pe]=L[st=xt+pe],L[st]=Fe[oe],++oe,pe+=d;for(Mt=S*b,xt=S*(j+1),oe=0,pe=x,It=0;It<E;++It)L[et=Mt+pe]=L[st=xt+pe],L[st]=Kt[oe],++oe,pe+=d;if(Q-2-M<=32?w(M,Q-2,L,x,S,T,n,E,d,F,D):v(M,Q-2,L,x,S,T,n,E,d,F,D),b-(j+2)<=32?w(j+2,b,L,x,S,T,n,E,d,F,D):v(j+2,b,L,x,S,T,n,E,d,F,D),Z)return o(Fe),void o(Kt);if(Q<k&&j>O){t:for(;;){for(et=x+Q*S,oe=0,pe=x,It=0;It<E;++It){if(L[et]!==Fe[oe])break t;++oe,et+=d}++Q}t:for(;;){for(et=x+j*S,oe=0,pe=x,It=0;It<E;++It){if(L[et]!==Kt[oe])break t;++oe,et+=d}--j}for(rt=Q;rt<=j;++rt){for(et=x+rt*S,oe=0,It=0;It<E&&0==(bt=L[et]-Fe[oe]);++It)oe+=D,et+=F;if(0===bt){if(rt!==Q)for(Mt=S*rt,xt=S*Q,pe=x,It=0;It<E;++It)G=L[et=Mt+pe],L[et]=L[st=xt+pe],L[st]=G,pe+=d;++Q}else{for(et=x+rt*S,oe=0,It=0;It<E&&0==(gt=L[et]-Kt[oe]);++It)oe+=D,et+=F;if(0===gt)for(;;){for(et=x+j*S,oe=0,It=0;It<E&&0==(Lt=L[et]-Kt[oe]);++It)oe+=D,et+=F;if(0!==Lt){for(et=x+j*S,oe=0,It=0;It<E&&0==(Lt=L[et]-Fe[oe]);++It)oe+=D,et+=F;if(Lt<0){for(Mt=S*rt,xt=S*Q,At=S*j,pe=x,It=0;It<E;++It)dt=At+pe,G=L[et=Mt+pe],L[et]=L[st=xt+pe],L[st]=L[dt],L[dt]=G,pe+=d;++Q,--j}else{for(Mt=S*rt,xt=S*j,pe=x,It=0;It<E;++It)G=L[et=Mt+pe],L[et]=L[st=xt+pe],L[st]=G,pe+=d;--j}break}if(--j<rt)break}}}}o(Fe),o(Kt),j-Q<=32?w(Q,j,L,x,S,T,n,E,d,F,D):v(Q,j,L,x,S,T,n,E,d,F,D)}}};var m={"uint32,1,0":function(w,p){return function(o){var v=o.data,M=0|o.offset,b=o.shape,L=o.stride,x=0|L[0],S=0|b[0],T=0|L[1],n=0|b[1],E=T,d=T;S<=32?w(0,S-1,v,M,x,T,S,n,E,d,1):p(0,S-1,v,M,x,T,S,n,E,d,1)}}};u.exports=function h(w,p){var o=[p,w].join(","),v=m[o],M=function s(w,p){var o=l(p),v=[p,w].join(","),M=a[v];return o?M(o[0],o[1]):M()}(w,p);return v(M,function f(w,p,o){var v=l(p),M=[p,w].join(","),b=c[M];return w.length>1&&v?b(o,v[0],v[1]):b(o)}(w,p,M))}},8729:function(u,y,e){"use strict";var r=e(8139),l={};u.exports=function a(s){var c=s.order,f=s.dtype,h=[c,f].join(":"),w=l[h];return w||(l[h]=w=r(c,f)),w(s),s}},5050:function(u,y,e){var r=e(4780),l="undefined"!=typeof Float64Array;function a(p,o){return p[0]-o[0]}function s(){var v,p=this.stride,o=new Array(p.length);for(v=0;v<o.length;++v)o[v]=[Math.abs(p[v]),v];o.sort(a);var M=new Array(o.length);for(v=0;v<M.length;++v)M[v]=o[v][1];return M}var c={T:function(p){function o(M){this.data=M}var v=o.prototype;return v.dtype=p,v.index=function(){return-1},v.size=0,v.dimension=-1,v.shape=v.stride=v.order=[],v.lo=v.hi=v.transpose=v.step=function(){return new o(this.data)},v.get=v.set=function(){},v.pick=function(){return null},function(b){return new o(b)}},0:function(p,o){function v(b,L){this.data=b,this.offset=L}var M=v.prototype;return M.dtype=p,M.index=function(){return this.offset},M.dimension=0,M.size=1,M.shape=M.stride=M.order=[],M.lo=M.hi=M.transpose=M.step=function(){return new v(this.data,this.offset)},M.pick=function(){return o(this.data)},M.valueOf=M.get=function(){return"generic"===p?this.data.get(this.offset):this.data[this.offset]},M.set=function(L){return"generic"===p?this.data.set(this.offset,L):this.data[this.offset]=L},function(L,x,S,T){return new v(L,T)}},1:function(p,o,v){function M(L,x,S,T){this.data=L,this.shape=[x],this.stride=[S],this.offset=0|T}var b=M.prototype;return b.dtype=p,b.dimension=1,Object.defineProperty(b,"size",{get:function(){return this.shape[0]}}),b.order=[0],b.set=function(x,S){return"generic"===p?this.data.set(this.offset+this.stride[0]*x,S):this.data[this.offset+this.stride[0]*x]=S},b.get=function(x){return"generic"===p?this.data.get(this.offset+this.stride[0]*x):this.data[this.offset+this.stride[0]*x]},b.index=function(x){return this.offset+this.stride[0]*x},b.hi=function(x){return new M(this.data,"number"!=typeof x||x<0?this.shape[0]:0|x,this.stride[0],this.offset)},b.lo=function(x){var S=this.offset,T=0,n=this.shape[0],E=this.stride[0];return"number"==typeof x&&x>=0&&(S+=E*(T=0|x),n-=T),new M(this.data,n,E,S)},b.step=function(x){var S=this.shape[0],T=this.stride[0],n=this.offset,E=0,d=Math.ceil;return"number"==typeof x&&((E=0|x)<0?(n+=T*(S-1),S=d(-S/E)):S=d(S/E),T*=E),new M(this.data,S,T,n)},b.transpose=function(x){return new M(this.data,this.shape[x=void 0===x?0:0|x],this.stride[x],this.offset)},b.pick=function(x){var S=[],T=[],n=this.offset;return"number"==typeof x&&x>=0?n=n+this.stride[0]*x|0:(S.push(this.shape[0]),T.push(this.stride[0])),(0,o[S.length+1])(this.data,S,T,n)},function(x,S,T,n){return new M(x,S[0],T[0],n)}},2:function(p,o,v){function M(L,x,S,T,n,E){this.data=L,this.shape=[x,S],this.stride=[T,n],this.offset=0|E}var b=M.prototype;return b.dtype=p,b.dimension=2,Object.defineProperty(b,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(b,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),b.set=function(x,S,T){return"generic"===p?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*S,T):this.data[this.offset+this.stride[0]*x+this.stride[1]*S]=T},b.get=function(x,S){return"generic"===p?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*S):this.data[this.offset+this.stride[0]*x+this.stride[1]*S]},b.index=function(x,S){return this.offset+this.stride[0]*x+this.stride[1]*S},b.hi=function(x,S){return new M(this.data,"number"!=typeof x||x<0?this.shape[0]:0|x,"number"!=typeof S||S<0?this.shape[1]:0|S,this.stride[0],this.stride[1],this.offset)},b.lo=function(x,S){var T=this.offset,n=0,E=this.shape[0],d=this.shape[1],F=this.stride[0],D=this.stride[1];return"number"==typeof x&&x>=0&&(T+=F*(n=0|x),E-=n),"number"==typeof S&&S>=0&&(T+=D*(n=0|S),d-=n),new M(this.data,E,d,F,D,T)},b.step=function(x,S){var T=this.shape[0],n=this.shape[1],E=this.stride[0],d=this.stride[1],F=this.offset,D=0,N=Math.ceil;return"number"==typeof x&&((D=0|x)<0?(F+=E*(T-1),T=N(-T/D)):T=N(T/D),E*=D),"number"==typeof S&&((D=0|S)<0?(F+=d*(n-1),n=N(-n/D)):n=N(n/D),d*=D),new M(this.data,T,n,E,d,F)},b.transpose=function(x,S){var T=this.shape,n=this.stride;return new M(this.data,T[x=void 0===x?0:0|x],T[S=void 0===S?1:0|S],n[x],n[S],this.offset)},b.pick=function(x,S){var T=[],n=[],E=this.offset;return"number"==typeof x&&x>=0?E=E+this.stride[0]*x|0:(T.push(this.shape[0]),n.push(this.stride[0])),"number"==typeof S&&S>=0?E=E+this.stride[1]*S|0:(T.push(this.shape[1]),n.push(this.stride[1])),(0,o[T.length+1])(this.data,T,n,E)},function(x,S,T,n){return new M(x,S[0],S[1],T[0],T[1],n)}},3:function(p,o,v){function M(L,x,S,T,n,E,d,F){this.data=L,this.shape=[x,S,T],this.stride=[n,E,d],this.offset=0|F}var b=M.prototype;return b.dtype=p,b.dimension=3,Object.defineProperty(b,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(b,"order",{get:function(){var x=Math.abs(this.stride[0]),S=Math.abs(this.stride[1]),T=Math.abs(this.stride[2]);return x>S?S>T?[2,1,0]:x>T?[1,2,0]:[1,0,2]:x>T?[2,0,1]:T>S?[0,1,2]:[0,2,1]}}),b.set=function(x,S,T,n){return"generic"===p?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*S+this.stride[2]*T,n):this.data[this.offset+this.stride[0]*x+this.stride[1]*S+this.stride[2]*T]=n},b.get=function(x,S,T){return"generic"===p?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*S+this.stride[2]*T):this.data[this.offset+this.stride[0]*x+this.stride[1]*S+this.stride[2]*T]},b.index=function(x,S,T){return this.offset+this.stride[0]*x+this.stride[1]*S+this.stride[2]*T},b.hi=function(x,S,T){return new M(this.data,"number"!=typeof x||x<0?this.shape[0]:0|x,"number"!=typeof S||S<0?this.shape[1]:0|S,"number"!=typeof T||T<0?this.shape[2]:0|T,this.stride[0],this.stride[1],this.stride[2],this.offset)},b.lo=function(x,S,T){var n=this.offset,E=0,d=this.shape[0],F=this.shape[1],D=this.shape[2],N=this.stride[0],k=this.stride[1],O=this.stride[2];return"number"==typeof x&&x>=0&&(n+=N*(E=0|x),d-=E),"number"==typeof S&&S>=0&&(n+=k*(E=0|S),F-=E),"number"==typeof T&&T>=0&&(n+=O*(E=0|T),D-=E),new M(this.data,d,F,D,N,k,O,n)},b.step=function(x,S,T){var n=this.shape[0],E=this.shape[1],d=this.shape[2],F=this.stride[0],D=this.stride[1],N=this.stride[2],k=this.offset,O=0,B=Math.ceil;return"number"==typeof x&&((O=0|x)<0?(k+=F*(n-1),n=B(-n/O)):n=B(n/O),F*=O),"number"==typeof S&&((O=0|S)<0?(k+=D*(E-1),E=B(-E/O)):E=B(E/O),D*=O),"number"==typeof T&&((O=0|T)<0?(k+=N*(d-1),d=B(-d/O)):d=B(d/O),N*=O),new M(this.data,n,E,d,F,D,N,k)},b.transpose=function(x,S,T){var n=this.shape,E=this.stride;return new M(this.data,n[x=void 0===x?0:0|x],n[S=void 0===S?1:0|S],n[T=void 0===T?2:0|T],E[x],E[S],E[T],this.offset)},b.pick=function(x,S,T){var n=[],E=[],d=this.offset;return"number"==typeof x&&x>=0?d=d+this.stride[0]*x|0:(n.push(this.shape[0]),E.push(this.stride[0])),"number"==typeof S&&S>=0?d=d+this.stride[1]*S|0:(n.push(this.shape[1]),E.push(this.stride[1])),"number"==typeof T&&T>=0?d=d+this.stride[2]*T|0:(n.push(this.shape[2]),E.push(this.stride[2])),(0,o[n.length+1])(this.data,n,E,d)},function(x,S,T,n){return new M(x,S[0],S[1],S[2],T[0],T[1],T[2],n)}},4:function(p,o,v){function M(L,x,S,T,n,E,d,F,D,N){this.data=L,this.shape=[x,S,T,n],this.stride=[E,d,F,D],this.offset=0|N}var b=M.prototype;return b.dtype=p,b.dimension=4,Object.defineProperty(b,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(b,"order",{get:v}),b.set=function(x,S,T,n,E){return"generic"===p?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*S+this.stride[2]*T+this.stride[3]*n,E):this.data[this.offset+this.stride[0]*x+this.stride[1]*S+this.stride[2]*T+this.stride[3]*n]=E},b.get=function(x,S,T,n){return"generic"===p?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*S+this.stride[2]*T+this.stride[3]*n):this.data[this.offset+this.stride[0]*x+this.stride[1]*S+this.stride[2]*T+this.stride[3]*n]},b.index=function(x,S,T,n){return this.offset+this.stride[0]*x+this.stride[1]*S+this.stride[2]*T+this.stride[3]*n},b.hi=function(x,S,T,n){return new M(this.data,"number"!=typeof x||x<0?this.shape[0]:0|x,"number"!=typeof S||S<0?this.shape[1]:0|S,"number"!=typeof T||T<0?this.shape[2]:0|T,"number"!=typeof n||n<0?this.shape[3]:0|n,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},b.lo=function(x,S,T,n){var E=this.offset,d=0,F=this.shape[0],D=this.shape[1],N=this.shape[2],k=this.shape[3],O=this.stride[0],B=this.stride[1],z=this.stride[2],U=this.stride[3];return"number"==typeof x&&x>=0&&(E+=O*(d=0|x),F-=d),"number"==typeof S&&S>=0&&(E+=B*(d=0|S),D-=d),"number"==typeof T&&T>=0&&(E+=z*(d=0|T),N-=d),"number"==typeof n&&n>=0&&(E+=U*(d=0|n),k-=d),new M(this.data,F,D,N,k,O,B,z,U,E)},b.step=function(x,S,T,n){var E=this.shape[0],d=this.shape[1],F=this.shape[2],D=this.shape[3],N=this.stride[0],k=this.stride[1],O=this.stride[2],B=this.stride[3],z=this.offset,U=0,H=Math.ceil;return"number"==typeof x&&((U=0|x)<0?(z+=N*(E-1),E=H(-E/U)):E=H(E/U),N*=U),"number"==typeof S&&((U=0|S)<0?(z+=k*(d-1),d=H(-d/U)):d=H(d/U),k*=U),"number"==typeof T&&((U=0|T)<0?(z+=O*(F-1),F=H(-F/U)):F=H(F/U),O*=U),"number"==typeof n&&((U=0|n)<0?(z+=B*(D-1),D=H(-D/U)):D=H(D/U),B*=U),new M(this.data,E,d,F,D,N,k,O,B,z)},b.transpose=function(x,S,T,n){var E=this.shape,d=this.stride;return new M(this.data,E[x=void 0===x?0:0|x],E[S=void 0===S?1:0|S],E[T=void 0===T?2:0|T],E[n=void 0===n?3:0|n],d[x],d[S],d[T],d[n],this.offset)},b.pick=function(x,S,T,n){var E=[],d=[],F=this.offset;return"number"==typeof x&&x>=0?F=F+this.stride[0]*x|0:(E.push(this.shape[0]),d.push(this.stride[0])),"number"==typeof S&&S>=0?F=F+this.stride[1]*S|0:(E.push(this.shape[1]),d.push(this.stride[1])),"number"==typeof T&&T>=0?F=F+this.stride[2]*T|0:(E.push(this.shape[2]),d.push(this.stride[2])),"number"==typeof n&&n>=0?F=F+this.stride[3]*n|0:(E.push(this.shape[3]),d.push(this.stride[3])),(0,o[E.length+1])(this.data,E,d,F)},function(x,S,T,n){return new M(x,S[0],S[1],S[2],S[3],T[0],T[1],T[2],T[3],n)}},5:function(o,v,M){function b(x,S,T,n,E,d,F,D,N,k,O,B){this.data=x,this.shape=[S,T,n,E,d],this.stride=[F,D,N,k,O],this.offset=0|B}var L=b.prototype;return L.dtype=o,L.dimension=5,Object.defineProperty(L,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(L,"order",{get:M}),L.set=function(S,T,n,E,d,F){return"generic"===o?this.data.set(this.offset+this.stride[0]*S+this.stride[1]*T+this.stride[2]*n+this.stride[3]*E+this.stride[4]*d,F):this.data[this.offset+this.stride[0]*S+this.stride[1]*T+this.stride[2]*n+this.stride[3]*E+this.stride[4]*d]=F},L.get=function(S,T,n,E,d){return"generic"===o?this.data.get(this.offset+this.stride[0]*S+this.stride[1]*T+this.stride[2]*n+this.stride[3]*E+this.stride[4]*d):this.data[this.offset+this.stride[0]*S+this.stride[1]*T+this.stride[2]*n+this.stride[3]*E+this.stride[4]*d]},L.index=function(S,T,n,E,d){return this.offset+this.stride[0]*S+this.stride[1]*T+this.stride[2]*n+this.stride[3]*E+this.stride[4]*d},L.hi=function(S,T,n,E,d){return new b(this.data,"number"!=typeof S||S<0?this.shape[0]:0|S,"number"!=typeof T||T<0?this.shape[1]:0|T,"number"!=typeof n||n<0?this.shape[2]:0|n,"number"!=typeof E||E<0?this.shape[3]:0|E,"number"!=typeof d||d<0?this.shape[4]:0|d,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},L.lo=function(S,T,n,E,d){var F=this.offset,D=0,N=this.shape[0],k=this.shape[1],O=this.shape[2],B=this.shape[3],z=this.shape[4],U=this.stride[0],H=this.stride[1],J=this.stride[2],nt=this.stride[3],it=this.stride[4];return"number"==typeof S&&S>=0&&(F+=U*(D=0|S),N-=D),"number"==typeof T&&T>=0&&(F+=H*(D=0|T),k-=D),"number"==typeof n&&n>=0&&(F+=J*(D=0|n),O-=D),"number"==typeof E&&E>=0&&(F+=nt*(D=0|E),B-=D),"number"==typeof d&&d>=0&&(F+=it*(D=0|d),z-=D),new b(this.data,N,k,O,B,z,U,H,J,nt,it,F)},L.step=function(S,T,n,E,d){var F=this.shape[0],D=this.shape[1],N=this.shape[2],k=this.shape[3],O=this.shape[4],B=this.stride[0],z=this.stride[1],U=this.stride[2],H=this.stride[3],J=this.stride[4],nt=this.offset,it=0,ut=Math.ceil;return"number"==typeof S&&((it=0|S)<0?(nt+=B*(F-1),F=ut(-F/it)):F=ut(F/it),B*=it),"number"==typeof T&&((it=0|T)<0?(nt+=z*(D-1),D=ut(-D/it)):D=ut(D/it),z*=it),"number"==typeof n&&((it=0|n)<0?(nt+=U*(N-1),N=ut(-N/it)):N=ut(N/it),U*=it),"number"==typeof E&&((it=0|E)<0?(nt+=H*(k-1),k=ut(-k/it)):k=ut(k/it),H*=it),"number"==typeof d&&((it=0|d)<0?(nt+=J*(O-1),O=ut(-O/it)):O=ut(O/it),J*=it),new b(this.data,F,D,N,k,O,B,z,U,H,J,nt)},L.transpose=function(S,T,n,E,d){var F=this.shape,D=this.stride;return new b(this.data,F[S=void 0===S?0:0|S],F[T=void 0===T?1:0|T],F[n=void 0===n?2:0|n],F[E=void 0===E?3:0|E],F[d=void 0===d?4:0|d],D[S],D[T],D[n],D[E],D[d],this.offset)},L.pick=function(S,T,n,E,d){var F=[],D=[],N=this.offset;return"number"==typeof S&&S>=0?N=N+this.stride[0]*S|0:(F.push(this.shape[0]),D.push(this.stride[0])),"number"==typeof T&&T>=0?N=N+this.stride[1]*T|0:(F.push(this.shape[1]),D.push(this.stride[1])),"number"==typeof n&&n>=0?N=N+this.stride[2]*n|0:(F.push(this.shape[2]),D.push(this.stride[2])),"number"==typeof E&&E>=0?N=N+this.stride[3]*E|0:(F.push(this.shape[3]),D.push(this.stride[3])),"number"==typeof d&&d>=0?N=N+this.stride[4]*d|0:(F.push(this.shape[4]),D.push(this.stride[4])),(0,v[F.length+1])(this.data,F,D,N)},function(S,T,n,E){return new b(S,T[0],T[1],T[2],T[3],T[4],n[0],n[1],n[2],n[3],n[4],E)}}};function f(p,o){var v=-1===o?"T":String(o),M=c[v];return-1===o?M(p):0===o?M(p,h[p][0]):M(p,h[p],s)}var h={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};u.exports=function w(p,o,v,M){if(void 0===p)return(0,h.array[0])([]);"number"==typeof p&&(p=[p]),void 0===o&&(o=[p.length]);var b=o.length;if(void 0===v){v=new Array(b);for(var L=b-1,x=1;L>=0;--L)v[L]=x,x*=o[L]}if(void 0===M)for(M=0,L=0;L<b;++L)v[L]<0&&(M-=(o[L]-1)*v[L]);for(var S=function m(p){if(r(p))return"buffer";if(l)switch(Object.prototype.toString.call(p)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(p)?"array":"generic"}(p),T=h[S];T.length<=b+1;)T.push(f(S,T.length-1));return(0,T[b+1])(p,o,v,M)}},8551:function(u,y,e){"use strict";var r=e(8362),l=Math.pow(2,-1074),a=-1>>>0;u.exports=function s(c,f){if(isNaN(c)||isNaN(f))return NaN;if(c===f)return c;if(0===c)return f<0?-l:l;var m=r.hi(c),h=r.lo(c);return f>c==c>0?h===a?(m+=1,h=0):h+=1:0===h?(h=a,m-=1):h-=1,r.pack(h,m)}},115:function(u,y){y.vertexNormals=function(l,a,s){for(var c=a.length,f=new Array(c),m=void 0===s?1e-6:s,h=0;h<c;++h)f[h]=[0,0,0];for(h=0;h<l.length;++h)for(var w=l[h],o=w[w.length-1],v=w[0],M=0;M<w.length;++M){for(var b=a[o],L=a[o=v],x=a[v=w[(M+1)%w.length]],S=new Array(3),T=0,n=new Array(3),E=0,d=0;d<3;++d)S[d]=b[d]-L[d],T+=S[d]*S[d],n[d]=x[d]-L[d],E+=n[d]*n[d];if(T*E>m){var F=f[o],D=1/Math.sqrt(T*E);for(d=0;d<3;++d){var N=(d+1)%3,k=(d+2)%3;F[d]+=D*(n[N]*S[k]-n[k]*S[N])}}}for(h=0;h<c;++h){F=f[h];var O=0;for(d=0;d<3;++d)O+=F[d]*F[d];if(O>m)for(D=1/Math.sqrt(O),d=0;d<3;++d)F[d]*=D;else for(d=0;d<3;++d)F[d]=0}return f},y.faceNormals=function(l,a,s){for(var c=l.length,f=new Array(c),m=void 0===s?1e-6:s,h=0;h<c;++h){for(var w=l[h],p=new Array(3),o=0;o<3;++o)p[o]=a[w[o]];var v=new Array(3),M=new Array(3);for(o=0;o<3;++o)v[o]=p[1][o]-p[0][o],M[o]=p[2][o]-p[0][o];var b=new Array(3),L=0;for(o=0;o<3;++o){var x=(o+1)%3,S=(o+2)%3;b[o]=v[x]*M[S]-v[S]*M[x],L+=b[o]*b[o]}for(L=L>m?1/Math.sqrt(L):0,o=0;o<3;++o)b[o]*=L;f[h]=b}return f}},567:function(u){"use strict";u.exports=function y(e,r,l,a,s,c,f,m,h,w){var p=r+c+w;if(o>0){var o=Math.sqrt(p+1);e[0]=.5*(f-h)/o,e[1]=.5*(m-a)/o,e[2]=.5*(l-c)/o,e[3]=.5*o}else{var v=Math.max(r,c,w);o=Math.sqrt(2*v-p+1),r>=v?(e[0]=.5*o,e[1]=.5*(s+l)/o,e[2]=.5*(m+a)/o,e[3]=.5*(f-h)/o):c>=v?(e[0]=.5*(l+s)/o,e[1]=.5*o,e[2]=.5*(h+f)/o,e[3]=.5*(m-a)/o):(e[0]=.5*(a+m)/o,e[1]=.5*(f+h)/o,e[2]=.5*o,e[3]=.5*(l-s)/o)}return e}},7774:function(u,y,e){"use strict";u.exports=function o(v){var M=(v=v||{}).center||[0,0,0],b=v.rotation||[0,0,0,1],L=v.radius||1;M=[].slice.call(M,0,3),h(b=[].slice.call(b,0,4),b);var x=new w(b,M,Math.log(L));return x.setDistanceLimits(v.zoomMin,v.zoomMax),("eye"in v||"up"in v)&&x.lookAt(0,v.eye,v.center,v.up),x};var r=e(8444),l=e(3012),a=e(5950),s=e(7437),c=e(567);function f(v,M,b){return Math.sqrt(Math.pow(v,2)+Math.pow(M,2)+Math.pow(b,2))}function m(v,M,b,L){return Math.sqrt(Math.pow(v,2)+Math.pow(M,2)+Math.pow(b,2)+Math.pow(L,2))}function h(v,M){var b=M[0],L=M[1],x=M[2],S=M[3],T=m(b,L,x,S);T>1e-6?(v[0]=b/T,v[1]=L/T,v[2]=x/T,v[3]=S/T):(v[0]=v[1]=v[2]=0,v[3]=1)}function w(v,M,b){this.radius=r([b]),this.center=r(M),this.rotation=r(v),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var p=w.prototype;p.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},p.recalcMatrix=function(v){this.radius.curve(v),this.center.curve(v),this.rotation.curve(v);var M=this.computedRotation;h(M,M);var b=this.computedMatrix;a(b,M);var L=this.computedCenter,x=this.computedEye,S=this.computedUp,T=Math.exp(this.computedRadius[0]);x[0]=L[0]+T*b[2],x[1]=L[1]+T*b[6],x[2]=L[2]+T*b[10],S[0]=b[1],S[1]=b[5],S[2]=b[9];for(var n=0;n<3;++n){for(var E=0,d=0;d<3;++d)E+=b[n+4*d]*x[d];b[12+n]=-E}},p.getMatrix=function(v,M){this.recalcMatrix(v);var b=this.computedMatrix;if(M){for(var L=0;L<16;++L)M[L]=b[L];return M}return b},p.idle=function(v){this.center.idle(v),this.radius.idle(v),this.rotation.idle(v)},p.flush=function(v){this.center.flush(v),this.radius.flush(v),this.rotation.flush(v)},p.pan=function(v,M,b,L){M=M||0,b=b||0,L=L||0,this.recalcMatrix(v);var x=this.computedMatrix,S=x[1],T=x[5],n=x[9],E=f(S,T,n),d=x[0],F=x[4],D=x[8],N=d*(S/=E)+F*(T/=E)+D*(n/=E),k=f(d-=S*N,F-=T*N,D-=n*N),O=x[2],B=x[6],z=x[10],U=O*S+B*T+z*n,H=O*(d/=k)+B*(F/=k)+z*(D/=k),J=f(O-=U*S+H*d,B-=U*T+H*F,z-=U*n+H*D);O/=J,B/=J,z/=J,this.center.move(v,d*M+S*b,F*M+T*b,D*M+n*b);var Q=Math.exp(this.computedRadius[0]);Q=Math.max(1e-4,Q+L),this.radius.set(v,Math.log(Q))},p.rotate=function(v,M,b,L){this.recalcMatrix(v);var x=this.computedMatrix,D=x[2],N=x[6],k=x[10],O=(M=M||0)*x[0]+(b=b||0)*x[1],B=M*x[4]+b*x[5],z=M*x[8]+b*x[9],U=-(N*z-k*B),H=-(k*O-D*z),J=-(D*B-N*O),nt=Math.sqrt(Math.max(0,1-Math.pow(U,2)-Math.pow(H,2)-Math.pow(J,2))),it=m(U,H,J,nt);it>1e-6?(U/=it,H/=it,J/=it,nt/=it):(U=H=J=0,nt=1);var ut=this.computedRotation,Q=ut[0],j=ut[1],Z=ut[2],G=ut[3],K=Q*nt+G*U+j*J-Z*H,at=j*nt+G*H+Z*U-Q*J,$=Z*nt+G*J+Q*H-j*U,X=G*nt-Q*U-j*H-Z*J;if(L){U=D,H=N,J=k;var rt=Math.sin(L)/f(U,H,J);U*=rt,H*=rt,J*=rt,X=X*(nt=Math.cos(M))-(K=K*nt+X*U+at*J-$*H)*U-(at=at*nt+X*H+$*U-K*J)*H-($=$*nt+X*J+K*H-at*U)*J}var et=m(K,at,$,X);et>1e-6?(K/=et,at/=et,$/=et,X/=et):(K=at=$=0,X=1),this.rotation.set(v,K,at,$,X)},p.lookAt=function(v,M,b,L){this.recalcMatrix(v);var x=this.computedMatrix;l(x,M=M||this.computedEye,b=b||this.computedCenter,L=L||this.computedUp);var S=this.computedRotation;c(S,x[0],x[1],x[2],x[4],x[5],x[6],x[8],x[9],x[10]),h(S,S),this.rotation.set(v,S[0],S[1],S[2],S[3]);for(var T=0,n=0;n<3;++n)T+=Math.pow(b[n]-M[n],2);this.radius.set(v,.5*Math.log(Math.max(T,1e-6))),this.center.set(v,b[0],b[1],b[2])},p.translate=function(v,M,b,L){this.center.move(v,M||0,b||0,L||0)},p.setMatrix=function(v,M){var b=this.computedRotation;c(b,M[0],M[1],M[2],M[4],M[5],M[6],M[8],M[9],M[10]),h(b,b),this.rotation.set(v,b[0],b[1],b[2],b[3]);var L=this.computedMatrix;s(L,M);var x=L[15];if(Math.abs(x)>1e-6){var S=L[12]/x,T=L[13]/x,n=L[14]/x;this.recalcMatrix(v);var E=Math.exp(this.computedRadius[0]);this.center.set(v,S-L[2]*E,T-L[6]*E,n-L[10]*E),this.radius.idle(v)}else this.center.idle(v),this.radius.idle(v)},p.setDistance=function(v,M){M>0&&this.radius.set(v,Math.log(M))},p.setDistanceLimits=function(v,M){v=v>0?Math.log(v):-1/0,M=M>0?Math.log(M):1/0,M=Math.max(M,v),this.radius.bounds[0][0]=v,this.radius.bounds[1][0]=M},p.getDistanceLimits=function(v){var M=this.radius.bounds;return v?(v[0]=Math.exp(M[0][0]),v[1]=Math.exp(M[1][0]),v):[Math.exp(M[0][0]),Math.exp(M[1][0])]},p.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},p.fromJSON=function(v){var M=this.lastT(),b=v.center;b&&this.center.set(M,b[0],b[1],b[2]);var L=v.rotation;L&&this.rotation.set(M,L[0],L[1],L[2],L[3]);var x=v.distance;x&&x>0&&this.radius.set(M,Math.log(x)),this.setDistanceLimits(v.zoomMin,v.zoomMax)}},4930:function(u,y,e){"use strict";var r=e(6184);u.exports=function(a,s,c){return r(c=void 0!==c?c+"":" ",s)+a}},4405:function(u){u.exports=function(e,r){r||(r=[0,""]),e=String(e);var l=parseFloat(e,10);return r[0]=l,r[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",r}},4166:function(u,y,e){"use strict";u.exports=function l(a,s){for(var c=0|s.length,f=a.length,m=[new Array(c),new Array(c)],h=0;h<c;++h)m[0][h]=[],m[1][h]=[];for(h=0;h<f;++h){var w=a[h];m[0][w[0]].push(w),m[1][w[1]].push(w)}var p=[];for(h=0;h<c;++h)m[0][h].length+m[1][h].length===0&&p.push([h]);function o(n,E){var d=m[E][n[E]];d.splice(d.indexOf(n),1)}function v(n,E,d){for(var F,D,N,k=0;k<2;++k)if(m[k][E].length>0){F=m[k][E][0],N=k;break}D=F[1^N];for(var O=0;O<2;++O)for(var B=m[O][E],z=0;z<B.length;++z){var U=B[z],H=U[1^O];r(s[n],s[E],s[D],s[H])>0&&(F=U,D=H,N=O)}return d||F&&o(F,N),D}function M(n,E){var d=m[E][n][0],F=[n];o(d,E);for(var D=d[1^E];;){for(;D!==n;)F.push(D),D=v(F[F.length-2],D,!1);if(m[0][n].length+m[1][n].length===0)break;var k=F[F.length-1],O=n,B=F[1],z=v(k,O,!0);if(r(s[k],s[O],s[B],s[z])<0)break;F.push(n),D=v(k,O)}return F}for(h=0;h<c;++h)for(var L=0;L<2;++L){for(var x=[];m[L][h].length>0;){var T=M(h,L);(E=T)[1]===E[E.length-1]?x.push.apply(x,T):(x.length>0&&p.push(x),x=T)}x.length>0&&p.push(x)}var E;return p};var r=e(9398)},3959:function(u,y,e){"use strict";u.exports=function l(a,s){for(var c=r(a,s.length),f=new Array(s.length),m=new Array(s.length),h=[],w=0;w<s.length;++w){var p=c[w].length;m[w]=p,f[w]=!0,p<=1&&h.push(w)}for(;h.length>0;){f[o=h.pop()]=!1;var v=c[o];for(w=0;w<v.length;++w){var M=v[w];0==--m[M]&&h.push(M)}}var b=new Array(s.length),L=[];for(w=0;w<s.length;++w)if(f[w]){var o;b[w]=o=L.length,L.push(s[w])}else b[w]=-1;var x=[];for(w=0;w<a.length;++w){var S=a[w];f[S[0]]&&f[S[1]]&&x.push([b[S[0]],b[S[1]]])}return[x,L]};var r=e(8348)},8040:function(u,y,e){"use strict";u.exports=function p(o,v){o=(rt=m(o,v))[0];for(var M=(v=rt[1]).length,L=r(o,v.length),x=0;x<M;++x)if(L[x].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var S=l(o,v);var n=(S=S.filter(function T(It){for(var Mt=It.length,xt=[0],At=0;At<Mt;++At){var Gt=v[It[At]],Wt=v[It[(At+1)%Mt]],Pt=s(-Gt[0],Gt[1]),Vt=s(-Gt[0],Wt[1]),te=s(Wt[0],Gt[1]),Qt=s(Wt[0],Wt[1]);xt=c(xt,c(c(Pt,Vt),c(te,Qt)))}return xt[xt.length-1]>0})).length,E=new Array(n),d=new Array(n);for(x=0;x<n;++x){E[x]=x;var F=new Array(n),D=S[x].map(function(Mt){return v[Mt]}),N=a([D]),k=0;t:for(var O=0;O<n;++O)if(F[O]=0,x!==O){for(var z=(B=S[O]).length,U=0;U<z;++U){var H=N(v[B[U]]);if(0!==H){H<0&&(F[O]=1,k+=1);continue t}}F[O]=1,k+=1}d[x]=[k,x,F]}for(d.sort(function(It,Mt){return Mt[0]-It[0]}),x=0;x<n;++x){var J=(F=d[x])[1],nt=F[2];for(O=0;O<n;++O)nt[O]&&(E[O]=J)}var it=function w(o){for(var v=new Array(o),M=0;M<o;++M)v[M]=[];return v}(n);for(x=0;x<n;++x)it[x].push(E[x]),it[E[x]].push(x);var ut={},Q=h(M,!1);for(x=0;x<n;++x)for(z=(B=S[x]).length,O=0;O<z;++O){var j=B[O],Z=B[(O+1)%z],G=Math.min(j,Z)+":"+Math.max(j,Z);if(G in ut){var K=ut[G];it[K].push(x),it[x].push(K),Q[j]=Q[Z]=!0}else ut[G]=x}function at(It){for(var Mt=It.length,xt=0;xt<Mt;++xt)if(!Q[It[xt]])return!1;return!0}var $=[],X=h(n,-1);for(x=0;x<n;++x)E[x]!==x||at(S[x])?X[x]=-1:($.push(x),X[x]=0);for(var rt=[];$.length>0;){var et=$.pop(),st=it[et];f(st,function(It,Mt){return It-Mt});var gt,dt=st.length,bt=X[et];for(0===bt&&(gt=[B=S[et]]),x=0;x<dt;++x){var B,Lt=st[x];X[Lt]>=0||(X[Lt]=1^bt,$.push(Lt),0!==bt)||at(B=S[Lt])||(B.reverse(),gt.push(B))}0===bt&&rt.push(gt)}return rt};var r=e(8348),l=e(4166),a=e(211),s=e(9660),c=e(9662),f=e(1215),m=e(3959);function h(o,v){for(var M=new Array(o),b=0;b<o;++b)M[b]=v;return M}},211:function(u,y,e){u.exports=function v(M){for(var b=M.length,L=[],x=[],T=0;T<b;++T)for(var n=M[T],E=n.length,d=E-1,F=0;F<E;d=F++){var D=n[d],N=n[F];D[0]===N[0]?x.push([D,N]):L.push([D,N])}if(0===L.length)return 0===x.length?w:function p(M){return function(L){return M(L[0],L[1])?0:1}}(m(x));var k=l(L),O=function h(M,b){return function(L){var x=s.le(b,L[0]);if(x<0)return 1;var S=M[x];if(!S){if(!(x>0&&b[x]===L[0]))return 1;S=M[x-1]}for(var T=1;S;){var n=S.key,E=r(L,n[0],n[1]);if(n[0][0]<n[1][0])if(E<0)S=S.left;else{if(!(E>0))return 0;T=-1,S=S.right}else if(E>0)S=S.left;else{if(!(E<0))return 0;T=1,S=S.right}}return T}}(k.slabs,k.coordinates);return 0===x.length?O:function o(M,b){return function(x){return M(x[0],x[1])?0:b(x)}}(m(x),O)};var r=e(417)[3],l=e(4385),a=e(9014),s=e(5070);function c(){return!0}function m(M){for(var b={},L=0;L<M.length;++L){var x=M[L],S=x[0][0],T=x[0][1],n=x[1][1],E=[Math.min(T,n),Math.max(T,n)];S in b?b[S].push(E):b[S]=[E]}var d={},F=Object.keys(b);for(L=0;L<F.length;++L)d[F[L]]=a(b[F[L]]);return function f(M){return function(b,L){var x=M[b];return!!x&&!!x.queryPoint(L,c)}}(d)}function w(M){return 1}},7309:function(u){"use strict";var y=new Float64Array(4),e=new Float64Array(4),r=new Float64Array(4);u.exports=function l(a,s,c,f,m){y.length<f.length&&(y=new Float64Array(f.length),e=new Float64Array(f.length),r=new Float64Array(f.length));for(var h=0;h<f.length;++h)y[h]=a[h]-f[h],e[h]=s[h]-a[h],r[h]=c[h]-a[h];var w=0,p=0,o=0,v=0,M=0,b=0;for(h=0;h<f.length;++h){var L=e[h],x=r[h],S=y[h];w+=L*L,p+=L*x,o+=x*x,v+=S*L,M+=S*x,b+=S*S}var d,D,N,k,O,T=Math.abs(w*o-p*p),n=p*M-o*v,E=p*v-w*M;if(n+E<=T)if(n<0)E<0&&v<0?(E=0,-v>=w?(n=1,d=w+2*v+b):d=v*(n=-v/w)+b):(n=0,M>=0?(E=0,d=b):-M>=o?(E=1,d=o+2*M+b):d=M*(E=-M/o)+b);else if(E<0)E=0,v>=0?(n=0,d=b):-v>=w?(n=1,d=w+2*v+b):d=v*(n=-v/w)+b;else{var F=1/T;d=(n*=F)*(w*n+p*(E*=F)+2*v)+E*(p*n+o*E+2*M)+b}else n<0?(N=o+M)>(D=p+v)?(k=N-D)>=(O=w-2*p+o)?(n=1,E=0,d=w+2*v+b):d=(n=k/O)*(w*n+p*(E=1-n)+2*v)+E*(p*n+o*E+2*M)+b:(n=0,N<=0?(E=1,d=o+2*M+b):M>=0?(E=0,d=b):d=M*(E=-M/o)+b):E<0?(N=w+v)>(D=p+M)?(k=N-D)>=(O=w-2*p+o)?(E=1,n=0,d=o+2*M+b):d=(n=1-(E=k/O))*(w*n+p*E+2*v)+E*(p*n+o*E+2*M)+b:(E=0,N<=0?(n=1,d=w+2*v+b):v>=0?(n=0,d=b):d=v*(n=-v/w)+b):(k=o+M-p-v)<=0?(n=0,E=1,d=o+2*M+b):k>=(O=w-2*p+o)?(n=1,E=0,d=w+2*v+b):d=(n=k/O)*(w*n+p*(E=1-n)+2*v)+E*(p*n+o*E+2*M)+b;var B=1-n-E;for(h=0;h<f.length;++h)m[h]=B*a[h]+n*s[h]+E*c[h];return d<0?0:d}},1116:function(u,y,e){u.exports=e(6093)},7584:function(u,y,e){"use strict";var r=e(1539);u.exports=function l(a,s){for(var c=a.length,f=new Array(c),m=0;m<c;++m)f[m]=r(a[m],s[m]);return f}},2826:function(u,y,e){"use strict";u.exports=function l(a){for(var s=new Array(a.length),c=0;c<a.length;++c)s[c]=r(a[c]);return s};var r=e(5125)},4469:function(u,y,e){"use strict";var r=e(5125),l=e(3962);u.exports=function a(s,c){for(var f=r(c),m=s.length,h=new Array(m),w=0;w<m;++w)h[w]=l(s[w],f);return h}},6695:function(u,y,e){"use strict";var r=e(4354);u.exports=function l(a,s){for(var c=a.length,f=new Array(c),m=0;m<c;++m)f[m]=r(a[m],s[m]);return f}},7037:function(u,y,e){"use strict";var r=e(9209),l=e(1284),a=e(9887);u.exports=function s(c){c.sort(l);for(var f=c.length,m=0,h=0;h<f;++h){var w=c[h],p=a(w);if(0!==p){if(m>0){var o=c[m-1];if(0===r(w,o)&&a(o)!==p){m-=1;continue}}c[m++]=w}}return c.length=m,c}},6184:function(u){"use strict";var e,y="";u.exports=function r(l,a){if("string"!=typeof l)throw new TypeError("expected a string");if(1===a)return l;if(2===a)return l+l;var s=l.length*a;if(e!==l||void 0===e)e=l,y="";else if(y.length>=s)return y.substr(0,s);for(;s>y.length&&a>1;)1&a&&(y+=l),a>>=1,l+=l;return y=(y+=l).substr(0,s)}},8161:function(u,y,e){u.exports=e.g.performance&&e.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},402:function(u){"use strict";u.exports=function y(e){for(var r=e.length,l=e[e.length-1],a=r,s=r-2;s>=0;--s)(h=(f=e[s])-((l=(c=l)+f)-c))&&(e[--a]=l,l=h);var w=0;for(s=a;s<r;++s){var c,f,h;(h=(f=l)-((l=(c=e[s])+f)-c))&&(e[w++]=h)}return e[w++]=l,e.length=w,e}},8167:function(u,y,e){"use strict";var r=e(9660),l=e(9662),a=e(8289),s=e(402);function f(b,L,x,S){return function(n){return S(b(x(n[0][0],n[1][1]),x(-n[0][1],n[1][0])))}}function m(b,L,x,S){return function(n){return S(b(L(b(x(n[1][1],n[2][2]),x(-n[1][2],n[2][1])),n[0][0]),b(L(b(x(n[1][0],n[2][2]),x(-n[1][2],n[2][0])),-n[0][1]),L(b(x(n[1][0],n[2][1]),x(-n[1][1],n[2][0])),n[0][2]))))}}function h(b,L,x,S){return function(n){return S(b(b(L(b(L(b(x(n[2][2],n[3][3]),x(-n[2][3],n[3][2])),n[1][1]),b(L(b(x(n[2][1],n[3][3]),x(-n[2][3],n[3][1])),-n[1][2]),L(b(x(n[2][1],n[3][2]),x(-n[2][2],n[3][1])),n[1][3]))),n[0][0]),L(b(L(b(x(n[2][2],n[3][3]),x(-n[2][3],n[3][2])),n[1][0]),b(L(b(x(n[2][0],n[3][3]),x(-n[2][3],n[3][0])),-n[1][2]),L(b(x(n[2][0],n[3][2]),x(-n[2][2],n[3][0])),n[1][3]))),-n[0][1])),b(L(b(L(b(x(n[2][1],n[3][3]),x(-n[2][3],n[3][1])),n[1][0]),b(L(b(x(n[2][0],n[3][3]),x(-n[2][3],n[3][0])),-n[1][1]),L(b(x(n[2][0],n[3][1]),x(-n[2][1],n[3][0])),n[1][3]))),n[0][2]),L(b(L(b(x(n[2][1],n[3][2]),x(-n[2][2],n[3][1])),n[1][0]),b(L(b(x(n[2][0],n[3][2]),x(-n[2][2],n[3][0])),-n[1][1]),L(b(x(n[2][0],n[3][1]),x(-n[2][1],n[3][0])),n[1][2]))),-n[0][3]))))}}function w(b,L,x,S){return function(n){return S(b(b(L(b(b(L(b(L(b(x(n[3][3],n[4][4]),x(-n[3][4],n[4][3])),n[2][2]),b(L(b(x(n[3][2],n[4][4]),x(-n[3][4],n[4][2])),-n[2][3]),L(b(x(n[3][2],n[4][3]),x(-n[3][3],n[4][2])),n[2][4]))),n[1][1]),L(b(L(b(x(n[3][3],n[4][4]),x(-n[3][4],n[4][3])),n[2][1]),b(L(b(x(n[3][1],n[4][4]),x(-n[3][4],n[4][1])),-n[2][3]),L(b(x(n[3][1],n[4][3]),x(-n[3][3],n[4][1])),n[2][4]))),-n[1][2])),b(L(b(L(b(x(n[3][2],n[4][4]),x(-n[3][4],n[4][2])),n[2][1]),b(L(b(x(n[3][1],n[4][4]),x(-n[3][4],n[4][1])),-n[2][2]),L(b(x(n[3][1],n[4][2]),x(-n[3][2],n[4][1])),n[2][4]))),n[1][3]),L(b(L(b(x(n[3][2],n[4][3]),x(-n[3][3],n[4][2])),n[2][1]),b(L(b(x(n[3][1],n[4][3]),x(-n[3][3],n[4][1])),-n[2][2]),L(b(x(n[3][1],n[4][2]),x(-n[3][2],n[4][1])),n[2][3]))),-n[1][4]))),n[0][0]),L(b(b(L(b(L(b(x(n[3][3],n[4][4]),x(-n[3][4],n[4][3])),n[2][2]),b(L(b(x(n[3][2],n[4][4]),x(-n[3][4],n[4][2])),-n[2][3]),L(b(x(n[3][2],n[4][3]),x(-n[3][3],n[4][2])),n[2][4]))),n[1][0]),L(b(L(b(x(n[3][3],n[4][4]),x(-n[3][4],n[4][3])),n[2][0]),b(L(b(x(n[3][0],n[4][4]),x(-n[3][4],n[4][0])),-n[2][3]),L(b(x(n[3][0],n[4][3]),x(-n[3][3],n[4][0])),n[2][4]))),-n[1][2])),b(L(b(L(b(x(n[3][2],n[4][4]),x(-n[3][4],n[4][2])),n[2][0]),b(L(b(x(n[3][0],n[4][4]),x(-n[3][4],n[4][0])),-n[2][2]),L(b(x(n[3][0],n[4][2]),x(-n[3][2],n[4][0])),n[2][4]))),n[1][3]),L(b(L(b(x(n[3][2],n[4][3]),x(-n[3][3],n[4][2])),n[2][0]),b(L(b(x(n[3][0],n[4][3]),x(-n[3][3],n[4][0])),-n[2][2]),L(b(x(n[3][0],n[4][2]),x(-n[3][2],n[4][0])),n[2][3]))),-n[1][4]))),-n[0][1])),b(L(b(b(L(b(L(b(x(n[3][3],n[4][4]),x(-n[3][4],n[4][3])),n[2][1]),b(L(b(x(n[3][1],n[4][4]),x(-n[3][4],n[4][1])),-n[2][3]),L(b(x(n[3][1],n[4][3]),x(-n[3][3],n[4][1])),n[2][4]))),n[1][0]),L(b(L(b(x(n[3][3],n[4][4]),x(-n[3][4],n[4][3])),n[2][0]),b(L(b(x(n[3][0],n[4][4]),x(-n[3][4],n[4][0])),-n[2][3]),L(b(x(n[3][0],n[4][3]),x(-n[3][3],n[4][0])),n[2][4]))),-n[1][1])),b(L(b(L(b(x(n[3][1],n[4][4]),x(-n[3][4],n[4][1])),n[2][0]),b(L(b(x(n[3][0],n[4][4]),x(-n[3][4],n[4][0])),-n[2][1]),L(b(x(n[3][0],n[4][1]),x(-n[3][1],n[4][0])),n[2][4]))),n[1][3]),L(b(L(b(x(n[3][1],n[4][3]),x(-n[3][3],n[4][1])),n[2][0]),b(L(b(x(n[3][0],n[4][3]),x(-n[3][3],n[4][0])),-n[2][1]),L(b(x(n[3][0],n[4][1]),x(-n[3][1],n[4][0])),n[2][3]))),-n[1][4]))),n[0][2]),b(L(b(b(L(b(L(b(x(n[3][2],n[4][4]),x(-n[3][4],n[4][2])),n[2][1]),b(L(b(x(n[3][1],n[4][4]),x(-n[3][4],n[4][1])),-n[2][2]),L(b(x(n[3][1],n[4][2]),x(-n[3][2],n[4][1])),n[2][4]))),n[1][0]),L(b(L(b(x(n[3][2],n[4][4]),x(-n[3][4],n[4][2])),n[2][0]),b(L(b(x(n[3][0],n[4][4]),x(-n[3][4],n[4][0])),-n[2][2]),L(b(x(n[3][0],n[4][2]),x(-n[3][2],n[4][0])),n[2][4]))),-n[1][1])),b(L(b(L(b(x(n[3][1],n[4][4]),x(-n[3][4],n[4][1])),n[2][0]),b(L(b(x(n[3][0],n[4][4]),x(-n[3][4],n[4][0])),-n[2][1]),L(b(x(n[3][0],n[4][1]),x(-n[3][1],n[4][0])),n[2][4]))),n[1][2]),L(b(L(b(x(n[3][1],n[4][2]),x(-n[3][2],n[4][1])),n[2][0]),b(L(b(x(n[3][0],n[4][2]),x(-n[3][2],n[4][0])),-n[2][1]),L(b(x(n[3][0],n[4][1]),x(-n[3][1],n[4][0])),n[2][2]))),-n[1][4]))),-n[0][3]),L(b(b(L(b(L(b(x(n[3][2],n[4][3]),x(-n[3][3],n[4][2])),n[2][1]),b(L(b(x(n[3][1],n[4][3]),x(-n[3][3],n[4][1])),-n[2][2]),L(b(x(n[3][1],n[4][2]),x(-n[3][2],n[4][1])),n[2][3]))),n[1][0]),L(b(L(b(x(n[3][2],n[4][3]),x(-n[3][3],n[4][2])),n[2][0]),b(L(b(x(n[3][0],n[4][3]),x(-n[3][3],n[4][0])),-n[2][2]),L(b(x(n[3][0],n[4][2]),x(-n[3][2],n[4][0])),n[2][3]))),-n[1][1])),b(L(b(L(b(x(n[3][1],n[4][3]),x(-n[3][3],n[4][1])),n[2][0]),b(L(b(x(n[3][0],n[4][3]),x(-n[3][3],n[4][0])),-n[2][1]),L(b(x(n[3][0],n[4][1]),x(-n[3][1],n[4][0])),n[2][3]))),n[1][2]),L(b(L(b(x(n[3][1],n[4][2]),x(-n[3][2],n[4][1])),n[2][0]),b(L(b(x(n[3][0],n[4][2]),x(-n[3][2],n[4][0])),-n[2][1]),L(b(x(n[3][0],n[4][1]),x(-n[3][1],n[4][0])),n[2][2]))),-n[1][3]))),n[0][4])))))}}function p(b){return(2===b?f:3===b?m:4===b?h:5===b?w:void 0)(l,a,r,s)}var o=[function(){return[0]},function(L){return[L[0][0]]}];function v(b,L,x,S,T,n,E,d){return function(D){switch(D.length){case 0:return b(D);case 1:return L(D);case 2:return x(D);case 3:return S(D);case 4:return T(D);case 5:return n(D)}var N=E[D.length];return N||(N=E[D.length]=d(D.length)),N(D)}}!function M(){for(;o.length<6;)o.push(p(o.length));u.exports=v.apply(void 0,o.concat([o,p]));for(var b=0;b<o.length;++b)u.exports[b]=o[b]}()},9130:function(u,y,e){"use strict";var r=e(9660),l=e(9662);u.exports=function a(s,c){for(var f=r(s[0],c[0]),m=1;m<s.length;++m)f=l(f,r(s[m],c[m]));return f}},2227:function(u,y,e){"use strict";var r=e(9660),l=e(9662),a=e(4078),s=e(8289);function f(T){return(3===T?p:4===T?o:5===T?v:M)(l,a,r,s)}function p(T,n,E,d){return function F(D,N,k){var O=E(D[0],D[0]),B=d(O,N[0]),z=d(O,k[0]),U=E(N[0],N[0]),H=d(U,D[0]),J=d(U,k[0]),nt=E(k[0],k[0]),it=d(nt,D[0]),ut=d(nt,N[0]),Q=T(n(ut,J),n(H,B)),j=n(it,z),Z=n(Q,j);return Z[Z.length-1]}}function o(T,n,E,d){return function F(D,N,k,O){var B=T(E(D[0],D[0]),E(D[1],D[1])),z=d(B,N[0]),U=d(B,k[0]),H=d(B,O[0]),J=T(E(N[0],N[0]),E(N[1],N[1])),nt=d(J,D[0]),it=d(J,k[0]),ut=d(J,O[0]),Q=T(E(k[0],k[0]),E(k[1],k[1])),j=d(Q,D[0]),Z=d(Q,N[0]),G=d(Q,O[0]),K=T(E(O[0],O[0]),E(O[1],O[1])),at=d(K,D[0]),$=d(K,N[0]),X=d(K,k[0]),rt=T(T(d(n(X,G),N[1]),T(d(n($,ut),-k[1]),d(n(Z,it),O[1]))),T(d(n($,ut),D[1]),T(d(n(at,H),-N[1]),d(n(nt,z),O[1])))),et=T(T(d(n(X,G),D[1]),T(d(n(at,H),-k[1]),d(n(j,U),O[1]))),T(d(n(Z,it),D[1]),T(d(n(j,U),-N[1]),d(n(nt,z),k[1])))),st=n(rt,et);return st[st.length-1]}}function v(T,n,E,d){return function F(D,N,k,O,B){var z=T(E(D[0],D[0]),T(E(D[1],D[1]),E(D[2],D[2]))),U=d(z,N[0]),H=d(z,k[0]),J=d(z,O[0]),nt=d(z,B[0]),it=T(E(N[0],N[0]),T(E(N[1],N[1]),E(N[2],N[2]))),ut=d(it,D[0]),Q=d(it,k[0]),j=d(it,O[0]),Z=d(it,B[0]),G=T(E(k[0],k[0]),T(E(k[1],k[1]),E(k[2],k[2]))),K=d(G,D[0]),at=d(G,N[0]),$=d(G,O[0]),X=d(G,B[0]),rt=T(E(O[0],O[0]),T(E(O[1],O[1]),E(O[2],O[2]))),et=d(rt,D[0]),st=d(rt,N[0]),dt=d(rt,k[0]),bt=d(rt,B[0]),gt=T(E(B[0],B[0]),T(E(B[1],B[1]),E(B[2],B[2]))),Lt=d(gt,D[0]),It=d(gt,N[0]),Mt=d(gt,k[0]),xt=d(gt,O[0]),At=T(T(T(d(T(d(n(xt,bt),k[1]),T(d(n(Mt,X),-O[1]),d(n(dt,$),B[1]))),N[2]),T(d(T(d(n(xt,bt),N[1]),T(d(n(It,Z),-O[1]),d(n(st,j),B[1]))),-k[2]),d(T(d(n(Mt,X),N[1]),T(d(n(It,Z),-k[1]),d(n(at,Q),B[1]))),O[2]))),T(d(T(d(n(dt,$),N[1]),T(d(n(st,j),-k[1]),d(n(at,Q),O[1]))),-B[2]),T(d(T(d(n(xt,bt),N[1]),T(d(n(It,Z),-O[1]),d(n(st,j),B[1]))),D[2]),d(T(d(n(xt,bt),D[1]),T(d(n(Lt,nt),-O[1]),d(n(et,J),B[1]))),-N[2])))),T(T(d(T(d(n(It,Z),D[1]),T(d(n(Lt,nt),-N[1]),d(n(ut,U),B[1]))),O[2]),T(d(T(d(n(st,j),D[1]),T(d(n(et,J),-N[1]),d(n(ut,U),O[1]))),-B[2]),d(T(d(n(dt,$),N[1]),T(d(n(st,j),-k[1]),d(n(at,Q),O[1]))),D[2]))),T(d(T(d(n(dt,$),D[1]),T(d(n(et,J),-k[1]),d(n(K,H),O[1]))),-N[2]),T(d(T(d(n(st,j),D[1]),T(d(n(et,J),-N[1]),d(n(ut,U),O[1]))),k[2]),d(T(d(n(at,Q),D[1]),T(d(n(K,H),-N[1]),d(n(ut,U),k[1]))),-O[2]))))),Gt=T(T(T(d(T(d(n(xt,bt),k[1]),T(d(n(Mt,X),-O[1]),d(n(dt,$),B[1]))),D[2]),d(T(d(n(xt,bt),D[1]),T(d(n(Lt,nt),-O[1]),d(n(et,J),B[1]))),-k[2])),T(d(T(d(n(Mt,X),D[1]),T(d(n(Lt,nt),-k[1]),d(n(K,H),B[1]))),O[2]),d(T(d(n(dt,$),D[1]),T(d(n(et,J),-k[1]),d(n(K,H),O[1]))),-B[2]))),T(T(d(T(d(n(Mt,X),N[1]),T(d(n(It,Z),-k[1]),d(n(at,Q),B[1]))),D[2]),d(T(d(n(Mt,X),D[1]),T(d(n(Lt,nt),-k[1]),d(n(K,H),B[1]))),-N[2])),T(d(T(d(n(It,Z),D[1]),T(d(n(Lt,nt),-N[1]),d(n(ut,U),B[1]))),k[2]),d(T(d(n(at,Q),D[1]),T(d(n(K,H),-N[1]),d(n(ut,U),k[1]))),-B[2])))),Wt=n(At,Gt);return Wt[Wt.length-1]}}function M(T,n,E,d){return function F(D,N,k,O,B,z){var U=T(T(E(D[0],D[0]),E(D[1],D[1])),T(E(D[2],D[2]),E(D[3],D[3]))),H=d(U,N[0]),J=d(U,k[0]),nt=d(U,O[0]),it=d(U,B[0]),ut=d(U,z[0]),Q=T(T(E(N[0],N[0]),E(N[1],N[1])),T(E(N[2],N[2]),E(N[3],N[3]))),j=d(Q,D[0]),Z=d(Q,k[0]),G=d(Q,O[0]),K=d(Q,B[0]),at=d(Q,z[0]),$=T(T(E(k[0],k[0]),E(k[1],k[1])),T(E(k[2],k[2]),E(k[3],k[3]))),X=d($,D[0]),rt=d($,N[0]),et=d($,O[0]),st=d($,B[0]),dt=d($,z[0]),bt=T(T(E(O[0],O[0]),E(O[1],O[1])),T(E(O[2],O[2]),E(O[3],O[3]))),gt=d(bt,D[0]),Lt=d(bt,N[0]),It=d(bt,k[0]),Mt=d(bt,B[0]),xt=d(bt,z[0]),At=T(T(E(B[0],B[0]),E(B[1],B[1])),T(E(B[2],B[2]),E(B[3],B[3]))),Gt=d(At,D[0]),Wt=d(At,N[0]),Pt=d(At,k[0]),Vt=d(At,O[0]),te=d(At,z[0]),Qt=T(T(E(z[0],z[0]),E(z[1],z[1])),T(E(z[2],z[2]),E(z[3],z[3]))),Bt=d(Qt,D[0]),Ot=d(Qt,N[0]),qt=d(Qt,k[0]),ie=d(Qt,O[0]),oe=d(Qt,B[0]),pe=T(T(T(d(T(T(d(T(d(n(oe,te),O[1]),T(d(n(ie,xt),-B[1]),d(n(Vt,Mt),z[1]))),k[2]),d(T(d(n(oe,te),k[1]),T(d(n(qt,dt),-B[1]),d(n(Pt,st),z[1]))),-O[2])),T(d(T(d(n(ie,xt),k[1]),T(d(n(qt,dt),-O[1]),d(n(It,et),z[1]))),B[2]),d(T(d(n(Vt,Mt),k[1]),T(d(n(Pt,st),-O[1]),d(n(It,et),B[1]))),-z[2]))),N[3]),T(d(T(T(d(T(d(n(oe,te),O[1]),T(d(n(ie,xt),-B[1]),d(n(Vt,Mt),z[1]))),N[2]),d(T(d(n(oe,te),N[1]),T(d(n(Ot,at),-B[1]),d(n(Wt,K),z[1]))),-O[2])),T(d(T(d(n(ie,xt),N[1]),T(d(n(Ot,at),-O[1]),d(n(Lt,G),z[1]))),B[2]),d(T(d(n(Vt,Mt),N[1]),T(d(n(Wt,K),-O[1]),d(n(Lt,G),B[1]))),-z[2]))),-k[3]),d(T(T(d(T(d(n(oe,te),k[1]),T(d(n(qt,dt),-B[1]),d(n(Pt,st),z[1]))),N[2]),d(T(d(n(oe,te),N[1]),T(d(n(Ot,at),-B[1]),d(n(Wt,K),z[1]))),-k[2])),T(d(T(d(n(qt,dt),N[1]),T(d(n(Ot,at),-k[1]),d(n(rt,Z),z[1]))),B[2]),d(T(d(n(Pt,st),N[1]),T(d(n(Wt,K),-k[1]),d(n(rt,Z),B[1]))),-z[2]))),O[3]))),T(T(d(T(T(d(T(d(n(ie,xt),k[1]),T(d(n(qt,dt),-O[1]),d(n(It,et),z[1]))),N[2]),d(T(d(n(ie,xt),N[1]),T(d(n(Ot,at),-O[1]),d(n(Lt,G),z[1]))),-k[2])),T(d(T(d(n(qt,dt),N[1]),T(d(n(Ot,at),-k[1]),d(n(rt,Z),z[1]))),O[2]),d(T(d(n(It,et),N[1]),T(d(n(Lt,G),-k[1]),d(n(rt,Z),O[1]))),-z[2]))),-B[3]),d(T(T(d(T(d(n(Vt,Mt),k[1]),T(d(n(Pt,st),-O[1]),d(n(It,et),B[1]))),N[2]),d(T(d(n(Vt,Mt),N[1]),T(d(n(Wt,K),-O[1]),d(n(Lt,G),B[1]))),-k[2])),T(d(T(d(n(Pt,st),N[1]),T(d(n(Wt,K),-k[1]),d(n(rt,Z),B[1]))),O[2]),d(T(d(n(It,et),N[1]),T(d(n(Lt,G),-k[1]),d(n(rt,Z),O[1]))),-B[2]))),z[3])),T(d(T(T(d(T(d(n(oe,te),O[1]),T(d(n(ie,xt),-B[1]),d(n(Vt,Mt),z[1]))),N[2]),d(T(d(n(oe,te),N[1]),T(d(n(Ot,at),-B[1]),d(n(Wt,K),z[1]))),-O[2])),T(d(T(d(n(ie,xt),N[1]),T(d(n(Ot,at),-O[1]),d(n(Lt,G),z[1]))),B[2]),d(T(d(n(Vt,Mt),N[1]),T(d(n(Wt,K),-O[1]),d(n(Lt,G),B[1]))),-z[2]))),D[3]),d(T(T(d(T(d(n(oe,te),O[1]),T(d(n(ie,xt),-B[1]),d(n(Vt,Mt),z[1]))),D[2]),d(T(d(n(oe,te),D[1]),T(d(n(Bt,ut),-B[1]),d(n(Gt,it),z[1]))),-O[2])),T(d(T(d(n(ie,xt),D[1]),T(d(n(Bt,ut),-O[1]),d(n(gt,nt),z[1]))),B[2]),d(T(d(n(Vt,Mt),D[1]),T(d(n(Gt,it),-O[1]),d(n(gt,nt),B[1]))),-z[2]))),-N[3])))),T(T(T(d(T(T(d(T(d(n(oe,te),N[1]),T(d(n(Ot,at),-B[1]),d(n(Wt,K),z[1]))),D[2]),d(T(d(n(oe,te),D[1]),T(d(n(Bt,ut),-B[1]),d(n(Gt,it),z[1]))),-N[2])),T(d(T(d(n(Ot,at),D[1]),T(d(n(Bt,ut),-N[1]),d(n(j,H),z[1]))),B[2]),d(T(d(n(Wt,K),D[1]),T(d(n(Gt,it),-N[1]),d(n(j,H),B[1]))),-z[2]))),O[3]),d(T(T(d(T(d(n(ie,xt),N[1]),T(d(n(Ot,at),-O[1]),d(n(Lt,G),z[1]))),D[2]),d(T(d(n(ie,xt),D[1]),T(d(n(Bt,ut),-O[1]),d(n(gt,nt),z[1]))),-N[2])),T(d(T(d(n(Ot,at),D[1]),T(d(n(Bt,ut),-N[1]),d(n(j,H),z[1]))),O[2]),d(T(d(n(Lt,G),D[1]),T(d(n(gt,nt),-N[1]),d(n(j,H),O[1]))),-z[2]))),-B[3])),T(d(T(T(d(T(d(n(Vt,Mt),N[1]),T(d(n(Wt,K),-O[1]),d(n(Lt,G),B[1]))),D[2]),d(T(d(n(Vt,Mt),D[1]),T(d(n(Gt,it),-O[1]),d(n(gt,nt),B[1]))),-N[2])),T(d(T(d(n(Wt,K),D[1]),T(d(n(Gt,it),-N[1]),d(n(j,H),B[1]))),O[2]),d(T(d(n(Lt,G),D[1]),T(d(n(gt,nt),-N[1]),d(n(j,H),O[1]))),-B[2]))),z[3]),d(T(T(d(T(d(n(ie,xt),k[1]),T(d(n(qt,dt),-O[1]),d(n(It,et),z[1]))),N[2]),d(T(d(n(ie,xt),N[1]),T(d(n(Ot,at),-O[1]),d(n(Lt,G),z[1]))),-k[2])),T(d(T(d(n(qt,dt),N[1]),T(d(n(Ot,at),-k[1]),d(n(rt,Z),z[1]))),O[2]),d(T(d(n(It,et),N[1]),T(d(n(Lt,G),-k[1]),d(n(rt,Z),O[1]))),-z[2]))),D[3]))),T(T(d(T(T(d(T(d(n(ie,xt),k[1]),T(d(n(qt,dt),-O[1]),d(n(It,et),z[1]))),D[2]),d(T(d(n(ie,xt),D[1]),T(d(n(Bt,ut),-O[1]),d(n(gt,nt),z[1]))),-k[2])),T(d(T(d(n(qt,dt),D[1]),T(d(n(Bt,ut),-k[1]),d(n(X,J),z[1]))),O[2]),d(T(d(n(It,et),D[1]),T(d(n(gt,nt),-k[1]),d(n(X,J),O[1]))),-z[2]))),-N[3]),d(T(T(d(T(d(n(ie,xt),N[1]),T(d(n(Ot,at),-O[1]),d(n(Lt,G),z[1]))),D[2]),d(T(d(n(ie,xt),D[1]),T(d(n(Bt,ut),-O[1]),d(n(gt,nt),z[1]))),-N[2])),T(d(T(d(n(Ot,at),D[1]),T(d(n(Bt,ut),-N[1]),d(n(j,H),z[1]))),O[2]),d(T(d(n(Lt,G),D[1]),T(d(n(gt,nt),-N[1]),d(n(j,H),O[1]))),-z[2]))),k[3])),T(d(T(T(d(T(d(n(qt,dt),N[1]),T(d(n(Ot,at),-k[1]),d(n(rt,Z),z[1]))),D[2]),d(T(d(n(qt,dt),D[1]),T(d(n(Bt,ut),-k[1]),d(n(X,J),z[1]))),-N[2])),T(d(T(d(n(Ot,at),D[1]),T(d(n(Bt,ut),-N[1]),d(n(j,H),z[1]))),k[2]),d(T(d(n(rt,Z),D[1]),T(d(n(X,J),-N[1]),d(n(j,H),k[1]))),-z[2]))),-O[3]),d(T(T(d(T(d(n(It,et),N[1]),T(d(n(Lt,G),-k[1]),d(n(rt,Z),O[1]))),D[2]),d(T(d(n(It,et),D[1]),T(d(n(gt,nt),-k[1]),d(n(X,J),O[1]))),-N[2])),T(d(T(d(n(Lt,G),D[1]),T(d(n(gt,nt),-N[1]),d(n(j,H),O[1]))),k[2]),d(T(d(n(rt,Z),D[1]),T(d(n(X,J),-N[1]),d(n(j,H),k[1]))),-O[2]))),z[3]))))),de=T(T(T(d(T(T(d(T(d(n(oe,te),O[1]),T(d(n(ie,xt),-B[1]),d(n(Vt,Mt),z[1]))),k[2]),d(T(d(n(oe,te),k[1]),T(d(n(qt,dt),-B[1]),d(n(Pt,st),z[1]))),-O[2])),T(d(T(d(n(ie,xt),k[1]),T(d(n(qt,dt),-O[1]),d(n(It,et),z[1]))),B[2]),d(T(d(n(Vt,Mt),k[1]),T(d(n(Pt,st),-O[1]),d(n(It,et),B[1]))),-z[2]))),D[3]),T(d(T(T(d(T(d(n(oe,te),O[1]),T(d(n(ie,xt),-B[1]),d(n(Vt,Mt),z[1]))),D[2]),d(T(d(n(oe,te),D[1]),T(d(n(Bt,ut),-B[1]),d(n(Gt,it),z[1]))),-O[2])),T(d(T(d(n(ie,xt),D[1]),T(d(n(Bt,ut),-O[1]),d(n(gt,nt),z[1]))),B[2]),d(T(d(n(Vt,Mt),D[1]),T(d(n(Gt,it),-O[1]),d(n(gt,nt),B[1]))),-z[2]))),-k[3]),d(T(T(d(T(d(n(oe,te),k[1]),T(d(n(qt,dt),-B[1]),d(n(Pt,st),z[1]))),D[2]),d(T(d(n(oe,te),D[1]),T(d(n(Bt,ut),-B[1]),d(n(Gt,it),z[1]))),-k[2])),T(d(T(d(n(qt,dt),D[1]),T(d(n(Bt,ut),-k[1]),d(n(X,J),z[1]))),B[2]),d(T(d(n(Pt,st),D[1]),T(d(n(Gt,it),-k[1]),d(n(X,J),B[1]))),-z[2]))),O[3]))),T(T(d(T(T(d(T(d(n(ie,xt),k[1]),T(d(n(qt,dt),-O[1]),d(n(It,et),z[1]))),D[2]),d(T(d(n(ie,xt),D[1]),T(d(n(Bt,ut),-O[1]),d(n(gt,nt),z[1]))),-k[2])),T(d(T(d(n(qt,dt),D[1]),T(d(n(Bt,ut),-k[1]),d(n(X,J),z[1]))),O[2]),d(T(d(n(It,et),D[1]),T(d(n(gt,nt),-k[1]),d(n(X,J),O[1]))),-z[2]))),-B[3]),d(T(T(d(T(d(n(Vt,Mt),k[1]),T(d(n(Pt,st),-O[1]),d(n(It,et),B[1]))),D[2]),d(T(d(n(Vt,Mt),D[1]),T(d(n(Gt,it),-O[1]),d(n(gt,nt),B[1]))),-k[2])),T(d(T(d(n(Pt,st),D[1]),T(d(n(Gt,it),-k[1]),d(n(X,J),B[1]))),O[2]),d(T(d(n(It,et),D[1]),T(d(n(gt,nt),-k[1]),d(n(X,J),O[1]))),-B[2]))),z[3])),T(d(T(T(d(T(d(n(oe,te),k[1]),T(d(n(qt,dt),-B[1]),d(n(Pt,st),z[1]))),N[2]),d(T(d(n(oe,te),N[1]),T(d(n(Ot,at),-B[1]),d(n(Wt,K),z[1]))),-k[2])),T(d(T(d(n(qt,dt),N[1]),T(d(n(Ot,at),-k[1]),d(n(rt,Z),z[1]))),B[2]),d(T(d(n(Pt,st),N[1]),T(d(n(Wt,K),-k[1]),d(n(rt,Z),B[1]))),-z[2]))),D[3]),d(T(T(d(T(d(n(oe,te),k[1]),T(d(n(qt,dt),-B[1]),d(n(Pt,st),z[1]))),D[2]),d(T(d(n(oe,te),D[1]),T(d(n(Bt,ut),-B[1]),d(n(Gt,it),z[1]))),-k[2])),T(d(T(d(n(qt,dt),D[1]),T(d(n(Bt,ut),-k[1]),d(n(X,J),z[1]))),B[2]),d(T(d(n(Pt,st),D[1]),T(d(n(Gt,it),-k[1]),d(n(X,J),B[1]))),-z[2]))),-N[3])))),T(T(T(d(T(T(d(T(d(n(oe,te),N[1]),T(d(n(Ot,at),-B[1]),d(n(Wt,K),z[1]))),D[2]),d(T(d(n(oe,te),D[1]),T(d(n(Bt,ut),-B[1]),d(n(Gt,it),z[1]))),-N[2])),T(d(T(d(n(Ot,at),D[1]),T(d(n(Bt,ut),-N[1]),d(n(j,H),z[1]))),B[2]),d(T(d(n(Wt,K),D[1]),T(d(n(Gt,it),-N[1]),d(n(j,H),B[1]))),-z[2]))),k[3]),d(T(T(d(T(d(n(qt,dt),N[1]),T(d(n(Ot,at),-k[1]),d(n(rt,Z),z[1]))),D[2]),d(T(d(n(qt,dt),D[1]),T(d(n(Bt,ut),-k[1]),d(n(X,J),z[1]))),-N[2])),T(d(T(d(n(Ot,at),D[1]),T(d(n(Bt,ut),-N[1]),d(n(j,H),z[1]))),k[2]),d(T(d(n(rt,Z),D[1]),T(d(n(X,J),-N[1]),d(n(j,H),k[1]))),-z[2]))),-B[3])),T(d(T(T(d(T(d(n(Pt,st),N[1]),T(d(n(Wt,K),-k[1]),d(n(rt,Z),B[1]))),D[2]),d(T(d(n(Pt,st),D[1]),T(d(n(Gt,it),-k[1]),d(n(X,J),B[1]))),-N[2])),T(d(T(d(n(Wt,K),D[1]),T(d(n(Gt,it),-N[1]),d(n(j,H),B[1]))),k[2]),d(T(d(n(rt,Z),D[1]),T(d(n(X,J),-N[1]),d(n(j,H),k[1]))),-B[2]))),z[3]),d(T(T(d(T(d(n(Vt,Mt),k[1]),T(d(n(Pt,st),-O[1]),d(n(It,et),B[1]))),N[2]),d(T(d(n(Vt,Mt),N[1]),T(d(n(Wt,K),-O[1]),d(n(Lt,G),B[1]))),-k[2])),T(d(T(d(n(Pt,st),N[1]),T(d(n(Wt,K),-k[1]),d(n(rt,Z),B[1]))),O[2]),d(T(d(n(It,et),N[1]),T(d(n(Lt,G),-k[1]),d(n(rt,Z),O[1]))),-B[2]))),D[3]))),T(T(d(T(T(d(T(d(n(Vt,Mt),k[1]),T(d(n(Pt,st),-O[1]),d(n(It,et),B[1]))),D[2]),d(T(d(n(Vt,Mt),D[1]),T(d(n(Gt,it),-O[1]),d(n(gt,nt),B[1]))),-k[2])),T(d(T(d(n(Pt,st),D[1]),T(d(n(Gt,it),-k[1]),d(n(X,J),B[1]))),O[2]),d(T(d(n(It,et),D[1]),T(d(n(gt,nt),-k[1]),d(n(X,J),O[1]))),-B[2]))),-N[3]),d(T(T(d(T(d(n(Vt,Mt),N[1]),T(d(n(Wt,K),-O[1]),d(n(Lt,G),B[1]))),D[2]),d(T(d(n(Vt,Mt),D[1]),T(d(n(Gt,it),-O[1]),d(n(gt,nt),B[1]))),-N[2])),T(d(T(d(n(Wt,K),D[1]),T(d(n(Gt,it),-N[1]),d(n(j,H),B[1]))),O[2]),d(T(d(n(Lt,G),D[1]),T(d(n(gt,nt),-N[1]),d(n(j,H),O[1]))),-B[2]))),k[3])),T(d(T(T(d(T(d(n(Pt,st),N[1]),T(d(n(Wt,K),-k[1]),d(n(rt,Z),B[1]))),D[2]),d(T(d(n(Pt,st),D[1]),T(d(n(Gt,it),-k[1]),d(n(X,J),B[1]))),-N[2])),T(d(T(d(n(Wt,K),D[1]),T(d(n(Gt,it),-N[1]),d(n(j,H),B[1]))),k[2]),d(T(d(n(rt,Z),D[1]),T(d(n(X,J),-N[1]),d(n(j,H),k[1]))),-B[2]))),-O[3]),d(T(T(d(T(d(n(It,et),N[1]),T(d(n(Lt,G),-k[1]),d(n(rt,Z),O[1]))),D[2]),d(T(d(n(It,et),D[1]),T(d(n(gt,nt),-k[1]),d(n(X,J),O[1]))),-N[2])),T(d(T(d(n(Lt,G),D[1]),T(d(n(gt,nt),-N[1]),d(n(j,H),O[1]))),k[2]),d(T(d(n(rt,Z),D[1]),T(d(n(X,J),-N[1]),d(n(j,H),k[1]))),-O[2]))),B[3]))))),Fe=n(pe,de);return Fe[Fe.length-1]}}var b=[function m(){return 0},function h(){return 0},function w(){return 0}];function L(T){var n=b[T.length];return n||(n=b[T.length]=f(T.length)),n.apply(void 0,T)}function x(T,n,E,d,F,D,N,k){return function O(B,z,U,H,J,nt){switch(arguments.length){case 0:case 1:return 0;case 2:return d(B,z);case 3:return F(B,z,U);case 4:return D(B,z,U,H);case 5:return N(B,z,U,H,J);case 6:return k(B,z,U,H,J,nt)}for(var it=new Array(arguments.length),ut=0;ut<arguments.length;++ut)it[ut]=arguments[ut];return T(it)}}!function S(){for(;b.length<=6;)b.push(f(b.length));u.exports=x.apply(void 0,[L].concat(b));for(var T=0;T<=6;++T)u.exports[T]=b[T]}()},6606:function(u,y,e){"use strict";var r=e(8167);function a(b){return(2===b?f:3===b?m:4===b?h:5===b?w:p)(b<6?r[b]:r)}function f(b){return function(x,S){return[b([[+S[0],+x[0][1]],[+S[1],+x[1][1]]]),b([[+x[0][0],+S[0]],[+x[1][0],+S[1]]]),b(x)]}}function m(b){return function(x,S){return[b([[+S[0],+x[0][1],+x[0][2]],[+S[1],+x[1][1],+x[1][2]],[+S[2],+x[2][1],+x[2][2]]]),b([[+x[0][0],+S[0],+x[0][2]],[+x[1][0],+S[1],+x[1][2]],[+x[2][0],+S[2],+x[2][2]]]),b([[+x[0][0],+x[0][1],+S[0]],[+x[1][0],+x[1][1],+S[1]],[+x[2][0],+x[2][1],+S[2]]]),b(x)]}}function h(b){return function(x,S){return[b([[+S[0],+x[0][1],+x[0][2],+x[0][3]],[+S[1],+x[1][1],+x[1][2],+x[1][3]],[+S[2],+x[2][1],+x[2][2],+x[2][3]],[+S[3],+x[3][1],+x[3][2],+x[3][3]]]),b([[+x[0][0],+S[0],+x[0][2],+x[0][3]],[+x[1][0],+S[1],+x[1][2],+x[1][3]],[+x[2][0],+S[2],+x[2][2],+x[2][3]],[+x[3][0],+S[3],+x[3][2],+x[3][3]]]),b([[+x[0][0],+x[0][1],+S[0],+x[0][3]],[+x[1][0],+x[1][1],+S[1],+x[1][3]],[+x[2][0],+x[2][1],+S[2],+x[2][3]],[+x[3][0],+x[3][1],+S[3],+x[3][3]]]),b([[+x[0][0],+x[0][1],+x[0][2],+S[0]],[+x[1][0],+x[1][1],+x[1][2],+S[1]],[+x[2][0],+x[2][1],+x[2][2],+S[2]],[+x[3][0],+x[3][1],+x[3][2],+S[3]]]),b(x)]}}function w(b){return function(x,S){return[b([[+S[0],+x[0][1],+x[0][2],+x[0][3],+x[0][4]],[+S[1],+x[1][1],+x[1][2],+x[1][3],+x[1][4]],[+S[2],+x[2][1],+x[2][2],+x[2][3],+x[2][4]],[+S[3],+x[3][1],+x[3][2],+x[3][3],+x[3][4]],[+S[4],+x[4][1],+x[4][2],+x[4][3],+x[4][4]]]),b([[+x[0][0],+S[0],+x[0][2],+x[0][3],+x[0][4]],[+x[1][0],+S[1],+x[1][2],+x[1][3],+x[1][4]],[+x[2][0],+S[2],+x[2][2],+x[2][3],+x[2][4]],[+x[3][0],+S[3],+x[3][2],+x[3][3],+x[3][4]],[+x[4][0],+S[4],+x[4][2],+x[4][3],+x[4][4]]]),b([[+x[0][0],+x[0][1],+S[0],+x[0][3],+x[0][4]],[+x[1][0],+x[1][1],+S[1],+x[1][3],+x[1][4]],[+x[2][0],+x[2][1],+S[2],+x[2][3],+x[2][4]],[+x[3][0],+x[3][1],+S[3],+x[3][3],+x[3][4]],[+x[4][0],+x[4][1],+S[4],+x[4][3],+x[4][4]]]),b([[+x[0][0],+x[0][1],+x[0][2],+S[0],+x[0][4]],[+x[1][0],+x[1][1],+x[1][2],+S[1],+x[1][4]],[+x[2][0],+x[2][1],+x[2][2],+S[2],+x[2][4]],[+x[3][0],+x[3][1],+x[3][2],+S[3],+x[3][4]],[+x[4][0],+x[4][1],+x[4][2],+S[4],+x[4][4]]]),b([[+x[0][0],+x[0][1],+x[0][2],+x[0][3],+S[0]],[+x[1][0],+x[1][1],+x[1][2],+x[1][3],+S[1]],[+x[2][0],+x[2][1],+x[2][2],+x[2][3],+S[2]],[+x[3][0],+x[3][1],+x[3][2],+x[3][3],+S[3]],[+x[4][0],+x[4][1],+x[4][2],+x[4][3],+S[4]]]),b(x)]}}function p(b){return function(x,S){return[b([[+S[0],+x[0][1],+x[0][2],+x[0][3],+x[0][4],+x[0][5]],[+S[1],+x[1][1],+x[1][2],+x[1][3],+x[1][4],+x[1][5]],[+S[2],+x[2][1],+x[2][2],+x[2][3],+x[2][4],+x[2][5]],[+S[3],+x[3][1],+x[3][2],+x[3][3],+x[3][4],+x[3][5]],[+S[4],+x[4][1],+x[4][2],+x[4][3],+x[4][4],+x[4][5]],[+S[5],+x[5][1],+x[5][2],+x[5][3],+x[5][4],+x[5][5]]]),b([[+x[0][0],+S[0],+x[0][2],+x[0][3],+x[0][4],+x[0][5]],[+x[1][0],+S[1],+x[1][2],+x[1][3],+x[1][4],+x[1][5]],[+x[2][0],+S[2],+x[2][2],+x[2][3],+x[2][4],+x[2][5]],[+x[3][0],+S[3],+x[3][2],+x[3][3],+x[3][4],+x[3][5]],[+x[4][0],+S[4],+x[4][2],+x[4][3],+x[4][4],+x[4][5]],[+x[5][0],+S[5],+x[5][2],+x[5][3],+x[5][4],+x[5][5]]]),b([[+x[0][0],+x[0][1],+S[0],+x[0][3],+x[0][4],+x[0][5]],[+x[1][0],+x[1][1],+S[1],+x[1][3],+x[1][4],+x[1][5]],[+x[2][0],+x[2][1],+S[2],+x[2][3],+x[2][4],+x[2][5]],[+x[3][0],+x[3][1],+S[3],+x[3][3],+x[3][4],+x[3][5]],[+x[4][0],+x[4][1],+S[4],+x[4][3],+x[4][4],+x[4][5]],[+x[5][0],+x[5][1],+S[5],+x[5][3],+x[5][4],+x[5][5]]]),b([[+x[0][0],+x[0][1],+x[0][2],+S[0],+x[0][4],+x[0][5]],[+x[1][0],+x[1][1],+x[1][2],+S[1],+x[1][4],+x[1][5]],[+x[2][0],+x[2][1],+x[2][2],+S[2],+x[2][4],+x[2][5]],[+x[3][0],+x[3][1],+x[3][2],+S[3],+x[3][4],+x[3][5]],[+x[4][0],+x[4][1],+x[4][2],+S[4],+x[4][4],+x[4][5]],[+x[5][0],+x[5][1],+x[5][2],+S[5],+x[5][4],+x[5][5]]]),b([[+x[0][0],+x[0][1],+x[0][2],+x[0][3],+S[0],+x[0][5]],[+x[1][0],+x[1][1],+x[1][2],+x[1][3],+S[1],+x[1][5]],[+x[2][0],+x[2][1],+x[2][2],+x[2][3],+S[2],+x[2][5]],[+x[3][0],+x[3][1],+x[3][2],+x[3][3],+S[3],+x[3][5]],[+x[4][0],+x[4][1],+x[4][2],+x[4][3],+S[4],+x[4][5]],[+x[5][0],+x[5][1],+x[5][2],+x[5][3],+S[5],+x[5][5]]]),b([[+x[0][0],+x[0][1],+x[0][2],+x[0][3],+x[0][4],+S[0]],[+x[1][0],+x[1][1],+x[1][2],+x[1][3],+x[1][4],+S[1]],[+x[2][0],+x[2][1],+x[2][2],+x[2][3],+x[2][4],+S[2]],[+x[3][0],+x[3][1],+x[3][2],+x[3][3],+x[3][4],+S[3]],[+x[4][0],+x[4][1],+x[4][2],+x[4][3],+x[4][4],+S[4]],[+x[5][0],+x[5][1],+x[5][2],+x[5][3],+x[5][4],+S[5]]]),b(x)]}}var o=[function s(){return[[0]]},function c(b,L){return[[L[0]],[b[0][0]]]}];function v(b,L,x,S,T,n,E,d){return function(D,N){switch(D.length){case 0:return b(D,N);case 1:return L(D,N);case 2:return x(D,N);case 3:return S(D,N);case 4:return T(D,N);case 5:return n(D,N)}var k=E[D.length];return k||(k=E[D.length]=d(D.length)),k(D,N)}}!function M(){for(;o.length<6;)o.push(a(o.length));u.exports=v.apply(void 0,o.concat([o,a]));for(var b=0;b<6;++b)u.exports[b]=o[b]}()},417:function(u,y,e){"use strict";var r=e(9660),l=e(9662),a=e(8289),s=e(4078);function w(n,E,d,F){return function(N,k,O){var B=n(n(E(k[1],O[0]),E(-O[1],k[0])),n(E(N[1],k[0]),E(-k[1],N[0]))),z=n(E(N[1],O[0]),E(-O[1],N[0])),U=F(B,z);return U[U.length-1]}}function p(n,E,d,F){return function(N,k,O,B){var z=n(n(d(n(E(O[1],B[0]),E(-B[1],O[0])),k[2]),n(d(n(E(k[1],B[0]),E(-B[1],k[0])),-O[2]),d(n(E(k[1],O[0]),E(-O[1],k[0])),B[2]))),n(d(n(E(k[1],B[0]),E(-B[1],k[0])),N[2]),n(d(n(E(N[1],B[0]),E(-B[1],N[0])),-k[2]),d(n(E(N[1],k[0]),E(-k[1],N[0])),B[2])))),U=n(n(d(n(E(O[1],B[0]),E(-B[1],O[0])),N[2]),n(d(n(E(N[1],B[0]),E(-B[1],N[0])),-O[2]),d(n(E(N[1],O[0]),E(-O[1],N[0])),B[2]))),n(d(n(E(k[1],O[0]),E(-O[1],k[0])),N[2]),n(d(n(E(N[1],O[0]),E(-O[1],N[0])),-k[2]),d(n(E(N[1],k[0]),E(-k[1],N[0])),O[2])))),H=F(z,U);return H[H.length-1]}}function o(n,E,d,F){return function(N,k,O,B,z){var U=n(n(n(d(n(d(n(E(B[1],z[0]),E(-z[1],B[0])),O[2]),n(d(n(E(O[1],z[0]),E(-z[1],O[0])),-B[2]),d(n(E(O[1],B[0]),E(-B[1],O[0])),z[2]))),k[3]),n(d(n(d(n(E(B[1],z[0]),E(-z[1],B[0])),k[2]),n(d(n(E(k[1],z[0]),E(-z[1],k[0])),-B[2]),d(n(E(k[1],B[0]),E(-B[1],k[0])),z[2]))),-O[3]),d(n(d(n(E(O[1],z[0]),E(-z[1],O[0])),k[2]),n(d(n(E(k[1],z[0]),E(-z[1],k[0])),-O[2]),d(n(E(k[1],O[0]),E(-O[1],k[0])),z[2]))),B[3]))),n(d(n(d(n(E(O[1],B[0]),E(-B[1],O[0])),k[2]),n(d(n(E(k[1],B[0]),E(-B[1],k[0])),-O[2]),d(n(E(k[1],O[0]),E(-O[1],k[0])),B[2]))),-z[3]),n(d(n(d(n(E(B[1],z[0]),E(-z[1],B[0])),k[2]),n(d(n(E(k[1],z[0]),E(-z[1],k[0])),-B[2]),d(n(E(k[1],B[0]),E(-B[1],k[0])),z[2]))),N[3]),d(n(d(n(E(B[1],z[0]),E(-z[1],B[0])),N[2]),n(d(n(E(N[1],z[0]),E(-z[1],N[0])),-B[2]),d(n(E(N[1],B[0]),E(-B[1],N[0])),z[2]))),-k[3])))),n(n(d(n(d(n(E(k[1],z[0]),E(-z[1],k[0])),N[2]),n(d(n(E(N[1],z[0]),E(-z[1],N[0])),-k[2]),d(n(E(N[1],k[0]),E(-k[1],N[0])),z[2]))),B[3]),n(d(n(d(n(E(k[1],B[0]),E(-B[1],k[0])),N[2]),n(d(n(E(N[1],B[0]),E(-B[1],N[0])),-k[2]),d(n(E(N[1],k[0]),E(-k[1],N[0])),B[2]))),-z[3]),d(n(d(n(E(O[1],B[0]),E(-B[1],O[0])),k[2]),n(d(n(E(k[1],B[0]),E(-B[1],k[0])),-O[2]),d(n(E(k[1],O[0]),E(-O[1],k[0])),B[2]))),N[3]))),n(d(n(d(n(E(O[1],B[0]),E(-B[1],O[0])),N[2]),n(d(n(E(N[1],B[0]),E(-B[1],N[0])),-O[2]),d(n(E(N[1],O[0]),E(-O[1],N[0])),B[2]))),-k[3]),n(d(n(d(n(E(k[1],B[0]),E(-B[1],k[0])),N[2]),n(d(n(E(N[1],B[0]),E(-B[1],N[0])),-k[2]),d(n(E(N[1],k[0]),E(-k[1],N[0])),B[2]))),O[3]),d(n(d(n(E(k[1],O[0]),E(-O[1],k[0])),N[2]),n(d(n(E(N[1],O[0]),E(-O[1],N[0])),-k[2]),d(n(E(N[1],k[0]),E(-k[1],N[0])),O[2]))),-B[3]))))),H=n(n(n(d(n(d(n(E(B[1],z[0]),E(-z[1],B[0])),O[2]),n(d(n(E(O[1],z[0]),E(-z[1],O[0])),-B[2]),d(n(E(O[1],B[0]),E(-B[1],O[0])),z[2]))),N[3]),d(n(d(n(E(B[1],z[0]),E(-z[1],B[0])),N[2]),n(d(n(E(N[1],z[0]),E(-z[1],N[0])),-B[2]),d(n(E(N[1],B[0]),E(-B[1],N[0])),z[2]))),-O[3])),n(d(n(d(n(E(O[1],z[0]),E(-z[1],O[0])),N[2]),n(d(n(E(N[1],z[0]),E(-z[1],N[0])),-O[2]),d(n(E(N[1],O[0]),E(-O[1],N[0])),z[2]))),B[3]),d(n(d(n(E(O[1],B[0]),E(-B[1],O[0])),N[2]),n(d(n(E(N[1],B[0]),E(-B[1],N[0])),-O[2]),d(n(E(N[1],O[0]),E(-O[1],N[0])),B[2]))),-z[3]))),n(n(d(n(d(n(E(O[1],z[0]),E(-z[1],O[0])),k[2]),n(d(n(E(k[1],z[0]),E(-z[1],k[0])),-O[2]),d(n(E(k[1],O[0]),E(-O[1],k[0])),z[2]))),N[3]),d(n(d(n(E(O[1],z[0]),E(-z[1],O[0])),N[2]),n(d(n(E(N[1],z[0]),E(-z[1],N[0])),-O[2]),d(n(E(N[1],O[0]),E(-O[1],N[0])),z[2]))),-k[3])),n(d(n(d(n(E(k[1],z[0]),E(-z[1],k[0])),N[2]),n(d(n(E(N[1],z[0]),E(-z[1],N[0])),-k[2]),d(n(E(N[1],k[0]),E(-k[1],N[0])),z[2]))),O[3]),d(n(d(n(E(k[1],O[0]),E(-O[1],k[0])),N[2]),n(d(n(E(N[1],O[0]),E(-O[1],N[0])),-k[2]),d(n(E(N[1],k[0]),E(-k[1],N[0])),O[2]))),-z[3])))),J=F(U,H);return J[J.length-1]}}function v(n){return(3===n?w:4===n?p:o)(l,r,a,s)}var M=v(3),b=v(4),L=[function(){return 0},function(){return 0},function(E,d){return d[0]-E[0]},function(E,d,F){var O,D=(E[1]-F[1])*(d[0]-F[0]),N=(E[0]-F[0])*(d[1]-F[1]),k=D-N;if(D>0){if(N<=0)return k;O=D+N}else{if(!(D<0))return k;if(N>=0)return k;O=-(D+N)}var B=33306690738754716e-32*O;return k>=B||k<=-B?k:M(E,d,F)},function(E,d,F,D){var N=E[0]-D[0],k=d[0]-D[0],O=F[0]-D[0],B=E[1]-D[1],z=d[1]-D[1],U=F[1]-D[1],H=E[2]-D[2],J=d[2]-D[2],nt=F[2]-D[2],it=k*U,ut=O*z,Q=O*B,j=N*U,Z=N*z,G=k*B,K=H*(it-ut)+J*(Q-j)+nt*(Z-G),$=7771561172376103e-31*((Math.abs(it)+Math.abs(ut))*Math.abs(H)+(Math.abs(Q)+Math.abs(j))*Math.abs(J)+(Math.abs(Z)+Math.abs(G))*Math.abs(nt));return K>$||-K>$?K:b(E,d,F,D)}];function x(n){var E=L[n.length];return E||(E=L[n.length]=v(n.length)),E.apply(void 0,n)}function S(n,E,d,F,D,N,k){return function(B,z,U,H,J){switch(arguments.length){case 0:case 1:return 0;case 2:return F(B,z);case 3:return D(B,z,U);case 4:return N(B,z,U,H);case 5:return k(B,z,U,H,J)}for(var nt=new Array(arguments.length),it=0;it<arguments.length;++it)nt[it]=arguments[it];return n(nt)}}!function T(){for(;L.length<=5;)L.push(v(L.length));u.exports=S.apply(void 0,[x].concat(L));for(var n=0;n<=5;++n)u.exports[n]=L[n]}()},2019:function(u,y,e){"use strict";var r=e(9662),l=e(8289);u.exports=function a(s,c){if(1===s.length)return l(c,s[0]);if(1===c.length)return l(s,c[0]);if(0===s.length||0===c.length)return[0];var f=[0];if(s.length<c.length)for(var m=0;m<s.length;++m)f=r(f,l(c,s[m]));else for(m=0;m<c.length;++m)f=r(f,l(s,c[m]));return f}},8289:function(u,y,e){"use strict";var r=e(9660),l=e(87);u.exports=function a(s,c){var f=s.length;if(1===f){var m=r(s[0],c);return m[0]?m:[m[1]]}var h=new Array(2*f),w=[.1,.1],p=[.1,.1],o=0;r(s[0],c,w),w[0]&&(h[o++]=w[0]);for(var v=1;v<f;++v){r(s[v],c,p),l(w[1],p[0],w),w[0]&&(h[o++]=w[0]);var b=p[1],L=w[1],x=b+L,T=L-(x-b);w[1]=x,T&&(h[o++]=T)}return w[1]&&(h[o++]=w[1]),0===o&&(h[o++]=0),h.length=o,h}},4434:function(u,y,e){"use strict";u.exports=function a(s,c,f,m){var h=r(s,f,m),w=r(c,f,m);if(h>0&&w>0||h<0&&w<0)return!1;var p=r(f,s,c),o=r(m,s,c);return!(p>0&&o>0||p<0&&o<0)&&(0!==h||0!==w||0!==p||0!==o||function l(s,c,f,m){for(var h=0;h<2;++h){var w=s[h],p=c[h],o=Math.min(w,p),v=Math.max(w,p),M=f[h],b=m[h],L=Math.min(M,b);if(Math.max(M,b)<o||v<L)return!1}return!0}(s,c,f,m))};var r=e(417)[3]},4078:function(u){"use strict";u.exports=function e(r,l){var a=0|r.length,s=0|l.length;if(1===a&&1===s)return function y(r,l){var a=r+l,s=a-r,h=r-(a-s)+(l-s);return h?[h,a]:[a]}(r[0],-l[0]);var L,x,f=new Array(a+s),m=0,h=0,w=0,p=Math.abs,o=r[h],v=p(o),M=-l[w],b=p(M);v<b?(x=o,(h+=1)<a&&(v=p(o=r[h]))):(x=M,(w+=1)<s&&(b=p(M=-l[w]))),h<a&&v<b||w>=s?(L=o,(h+=1)<a&&(v=p(o=r[h]))):(L=M,(w+=1)<s&&(b=p(M=-l[w])));for(var F,D,S=L+x,T=S-L,n=x-T,E=n,d=S;h<a&&w<s;)v<b?(L=o,(h+=1)<a&&(v=p(o=r[h]))):(L=M,(w+=1)<s&&(b=p(M=-l[w]))),(n=(x=E)-(T=(S=L+x)-L))&&(f[m++]=n),E=d-((F=d+S)-(D=F-d))+(S-D),d=F;for(;h<a;)(n=(x=E)-(T=(S=(L=o)+x)-L))&&(f[m++]=n),E=d-((F=d+S)-(D=F-d))+(S-D),d=F,(h+=1)<a&&(o=r[h]);for(;w<s;)(n=(x=E)-(T=(S=(L=M)+x)-L))&&(f[m++]=n),E=d-((F=d+S)-(D=F-d))+(S-D),d=F,(w+=1)<s&&(M=-l[w]);return E&&(f[m++]=E),d&&(f[m++]=d),m||(f[m++]=0),f.length=m,f}},9662:function(u){"use strict";u.exports=function e(r,l){var a=0|r.length,s=0|l.length;if(1===a&&1===s)return function y(r,l){var a=r+l,s=a-r,h=r-(a-s)+(l-s);return h?[h,a]:[a]}(r[0],l[0]);var L,x,f=new Array(a+s),m=0,h=0,w=0,p=Math.abs,o=r[h],v=p(o),M=l[w],b=p(M);v<b?(x=o,(h+=1)<a&&(v=p(o=r[h]))):(x=M,(w+=1)<s&&(b=p(M=l[w]))),h<a&&v<b||w>=s?(L=o,(h+=1)<a&&(v=p(o=r[h]))):(L=M,(w+=1)<s&&(b=p(M=l[w])));for(var F,D,S=L+x,T=S-L,n=x-T,E=n,d=S;h<a&&w<s;)v<b?(L=o,(h+=1)<a&&(v=p(o=r[h]))):(L=M,(w+=1)<s&&(b=p(M=l[w]))),(n=(x=E)-(T=(S=L+x)-L))&&(f[m++]=n),E=d-((F=d+S)-(D=F-d))+(S-D),d=F;for(;h<a;)(n=(x=E)-(T=(S=(L=o)+x)-L))&&(f[m++]=n),E=d-((F=d+S)-(D=F-d))+(S-D),d=F,(h+=1)<a&&(o=r[h]);for(;w<s;)(n=(x=E)-(T=(S=(L=M)+x)-L))&&(f[m++]=n),E=d-((F=d+S)-(D=F-d))+(S-D),d=F,(w+=1)<s&&(M=l[w]);return E&&(f[m++]=E),d&&(f[m++]=d),m||(f[m++]=0),f.length=m,f}},8691:function(u,y,e){"use strict";u.exports=function a(s){return l(r(s))};var r=e(2692),l=e(7037)},7212:function(u,y,e){"use strict";u.exports=function o(v,M,b,L){if(b=b||0,void 0===L&&(L=function c(v){for(var M=v.length,b=0,L=0;L<M;++L)b=0|Math.max(b,v[L].length);return b-1}(v)),0===v.length||L<1)return{cells:[],vertexIds:[],vertexWeights:[]};var S=function f(v,M){for(var b=v.length,L=l.mallocUint8(b),x=0;x<b;++x)L[x]=v[x]<M|0;return L}(M,+b),T=function m(v,M){for(var b=v.length,x=l.mallocUint32(2*(M*(M+1)/2*b|0)),S=0,T=0;T<b;++T)for(var n=v[T],E=(M=n.length,0);E<M;++E)for(var d=0;d<E;++d){var F=n[d],D=n[E];x[S++]=0|Math.min(F,D),x[S++]=0|Math.max(F,D)}a(r(x,[S/2|0,2]));var k=2;for(T=2;T<S;T+=2)x[T-2]===x[T]&&x[T-1]===x[T+1]||(x[k++]=x[T],x[k++]=x[T+1]);return r(x,[k/2|0,2])}(v,L),n=function h(v,M,b,L){for(var x=v.data,S=v.shape[0],T=l.mallocDouble(S),n=0,E=0;E<S;++E){var d=x[2*E],F=x[2*E+1];if(b[d]!==b[F]){var D=M[d],N=M[F];x[2*n]=d,x[2*n+1]=F,T[n++]=(N-L)/(N-D)}}return v.shape[0]=n,r(T,[n])}(T,M,S,+b),E=function w(v,M){var b=l.mallocInt32(2*M),L=v.shape[0],x=v.data;b[0]=0;for(var S=0,T=0;T<L;++T){var n=x[2*T];if(n!==S){for(b[2*S+1]=T;++S<n;)b[2*S]=T,b[2*S+1]=T;b[2*S]=T}}for(b[2*S+1]=L;++S<M;)b[2*S]=b[2*S+1]=L;return b}(T,0|M.length),d=s(L)(v,T.data,E,S),F=function p(v){for(var M=0|v.shape[0],b=v.data,L=new Array(M),x=0;x<M;++x)L[x]=[b[2*x],b[2*x+1]];return L}(T),D=[].slice.call(n.data,0,n.shape[0]);return l.free(S),l.free(T.data),l.free(n.data),l.free(E),{cells:d,vertexIds:F,vertexWeights:D}};var r=e(5050),l=e(5306),a=e(8729),s=e(1168)},1168:function(u){"use strict";u.exports=function e(r){return y[r]()};var y=[function(){return function a(s,c,f,m){for(var h=s.length,p=0;p<h;++p);return[]}},function(){function l(s,c,f,m){for(var h=0|Math.min(f,m),w=0|Math.max(f,m),p=s[2*h],o=s[2*h+1];p<o;){var v=p+o>>1,M=c[2*v+1];if(M===w)return v;w<M?o=v:p=v+1}return p}return function a(s,c,f,m){for(var h=s.length,w=[],p=0;p<h;++p){var o=s[p];if(2===o.length){var M=(m[o[0]]<<0)+(m[o[1]]<<1);if(0===M||3===M)continue;switch(M){case 0:case 3:break;case 1:w.push([l(f,c,o[0],o[1])]);break;case 2:w.push([l(f,c,o[1],o[0])])}}}return w}},function(){function l(s,c,f,m){for(var h=0|Math.min(f,m),w=0|Math.max(f,m),p=s[2*h],o=s[2*h+1];p<o;){var v=p+o>>1,M=c[2*v+1];if(M===w)return v;w<M?o=v:p=v+1}return p}return function a(s,c,f,m){for(var h=s.length,w=[],p=0;p<h;++p){var o=s[p],v=o.length;if(3===v){if(0==(M=(m[o[0]]<<0)+(m[o[1]]<<1)+(m[o[2]]<<2))||7===M)continue;switch(M){case 0:case 7:break;case 1:w.push([l(f,c,o[0],o[2]),l(f,c,o[0],o[1])]);break;case 2:w.push([l(f,c,o[1],o[0]),l(f,c,o[1],o[2])]);break;case 3:w.push([l(f,c,o[0],o[2]),l(f,c,o[1],o[2])]);break;case 4:w.push([l(f,c,o[2],o[1]),l(f,c,o[2],o[0])]);break;case 5:w.push([l(f,c,o[2],o[1]),l(f,c,o[0],o[1])]);break;case 6:w.push([l(f,c,o[1],o[0]),l(f,c,o[2],o[0])])}}else if(2===v){var M;if(0==(M=(m[o[0]]<<0)+(m[o[1]]<<1))||3===M)continue;switch(M){case 0:case 3:break;case 1:w.push([l(f,c,o[0],o[1])]);break;case 2:w.push([l(f,c,o[1],o[0])])}}}return w}},function(){function l(s,c,f,m){for(var h=0|Math.min(f,m),w=0|Math.max(f,m),p=s[2*h],o=s[2*h+1];p<o;){var v=p+o>>1,M=c[2*v+1];if(M===w)return v;w<M?o=v:p=v+1}return p}return function a(s,c,f,m){for(var h=s.length,w=[],p=0;p<h;++p){var o=s[p],v=o.length;if(4===v){if(0==(M=(m[o[0]]<<0)+(m[o[1]]<<1)+(m[o[2]]<<2)+(m[o[3]]<<3))||15===M)continue;switch(M){case 0:case 15:break;case 1:w.push([l(f,c,o[0],o[1]),l(f,c,o[0],o[2]),l(f,c,o[0],o[3])]);break;case 2:w.push([l(f,c,o[1],o[2]),l(f,c,o[1],o[0]),l(f,c,o[1],o[3])]);break;case 3:w.push([l(f,c,o[1],o[2]),l(f,c,o[0],o[2]),l(f,c,o[0],o[3])],[l(f,c,o[1],o[3]),l(f,c,o[1],o[2]),l(f,c,o[0],o[3])]);break;case 4:w.push([l(f,c,o[2],o[0]),l(f,c,o[2],o[1]),l(f,c,o[2],o[3])]);break;case 5:w.push([l(f,c,o[0],o[1]),l(f,c,o[2],o[1]),l(f,c,o[0],o[3])],[l(f,c,o[2],o[1]),l(f,c,o[2],o[3]),l(f,c,o[0],o[3])]);break;case 6:w.push([l(f,c,o[2],o[0]),l(f,c,o[1],o[0]),l(f,c,o[1],o[3])],[l(f,c,o[2],o[3]),l(f,c,o[2],o[0]),l(f,c,o[1],o[3])]);break;case 7:w.push([l(f,c,o[0],o[3]),l(f,c,o[1],o[3]),l(f,c,o[2],o[3])]);break;case 8:w.push([l(f,c,o[3],o[1]),l(f,c,o[3],o[0]),l(f,c,o[3],o[2])]);break;case 9:w.push([l(f,c,o[3],o[1]),l(f,c,o[0],o[1]),l(f,c,o[0],o[2])],[l(f,c,o[3],o[2]),l(f,c,o[3],o[1]),l(f,c,o[0],o[2])]);break;case 10:w.push([l(f,c,o[1],o[0]),l(f,c,o[3],o[0]),l(f,c,o[1],o[2])],[l(f,c,o[3],o[0]),l(f,c,o[3],o[2]),l(f,c,o[1],o[2])]);break;case 11:w.push([l(f,c,o[1],o[2]),l(f,c,o[0],o[2]),l(f,c,o[3],o[2])]);break;case 12:w.push([l(f,c,o[3],o[0]),l(f,c,o[2],o[0]),l(f,c,o[2],o[1])],[l(f,c,o[3],o[1]),l(f,c,o[3],o[0]),l(f,c,o[2],o[1])]);break;case 13:w.push([l(f,c,o[0],o[1]),l(f,c,o[2],o[1]),l(f,c,o[3],o[1])]);break;case 14:w.push([l(f,c,o[2],o[0]),l(f,c,o[1],o[0]),l(f,c,o[3],o[0])])}}else if(3===v){if(0==(M=(m[o[0]]<<0)+(m[o[1]]<<1)+(m[o[2]]<<2))||7===M)continue;switch(M){case 0:case 7:break;case 1:w.push([l(f,c,o[0],o[2]),l(f,c,o[0],o[1])]);break;case 2:w.push([l(f,c,o[1],o[0]),l(f,c,o[1],o[2])]);break;case 3:w.push([l(f,c,o[0],o[2]),l(f,c,o[1],o[2])]);break;case 4:w.push([l(f,c,o[2],o[1]),l(f,c,o[2],o[0])]);break;case 5:w.push([l(f,c,o[2],o[1]),l(f,c,o[0],o[1])]);break;case 6:w.push([l(f,c,o[1],o[0]),l(f,c,o[2],o[0])])}}else if(2===v){var M;if(0==(M=(m[o[0]]<<0)+(m[o[1]]<<1))||3===M)continue;switch(M){case 0:case 3:break;case 1:w.push([l(f,c,o[0],o[1])]);break;case 2:w.push([l(f,c,o[1],o[0])])}}}return w}}]},8211:function(u,y,e){"use strict";e(2288),e(1731),y.H=function m(E,d){var F=E.length,D=E.length-d.length,N=Math.min;if(D)return D;switch(F){case 0:return 0;case 1:return E[0]-d[0];case 2:return(U=E[0]+E[1]-d[0]-d[1])||N(E[0],E[1])-N(d[0],d[1]);case 3:var k=E[0]+E[1],O=d[0]+d[1];if(U=k+E[2]-(O+d[2]))return U;var U,B=N(E[0],E[1]),z=N(d[0],d[1]);return(U=N(B,E[2])-N(z,d[2]))||N(B+E[2],k)-N(z+d[2],O);default:var H=E.slice(0);H.sort();var J=d.slice(0);J.sort();for(var nt=0;nt<F;++nt)if(D=H[nt]-J[nt])return D;return 0}}},9392:function(u,y){"use strict";function r(a){var s=32;return(a&=-a)&&s--,65535&a&&(s-=16),16711935&a&&(s-=8),252645135&a&&(s-=4),858993459&a&&(s-=2),1431655765&a&&(s-=1),s}y.INT_BITS=32,y.INT_MAX=2147483647,y.INT_MIN=-1<<31,y.sign=function(a){return(a>0)-(a<0)},y.abs=function(a){var s=a>>31;return(a^s)-s},y.min=function(a,s){return s^(a^s)&-(a<s)},y.max=function(a,s){return a^(a^s)&-(a<s)},y.isPow2=function(a){return!(a&a-1||!a)},y.log2=function(a){var s,c;return s=(a>65535)<<4,s|=c=((a>>>=s)>255)<<3,s|=c=((a>>>=c)>15)<<2,(s|=c=((a>>>=c)>3)<<1)|(a>>>=c)>>1},y.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},y.popCount=function(a){return 16843009*((a=(858993459&(a-=a>>>1&1431655765))+(a>>>2&858993459))+(a>>>4)&252645135)>>>24},y.countTrailingZeros=r,y.nextPow2=function(a){return a+=0===a,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,1+((a|=a>>>8)|a>>>16)},y.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,(a|=a>>>16)-(a>>>1)},y.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,27030>>>(a&=15)&1};var l=new Array(256);(function(a){for(var s=0;s<256;++s){var c=s,f=s,m=7;for(c>>>=1;c;c>>>=1)f<<=1,f|=1&c,--m;a[s]=f<<m&255}})(l),y.reverse=function(a){return l[255&a]<<24|l[a>>>8&255]<<16|l[a>>>16&255]<<8|l[a>>>24&255]},y.interleave2=function(a,s){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a&=65535)|a<<8))|a<<4))|a<<2))|a<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s&=65535)|s<<8))|s<<4))|s<<2))|s<<1))<<1},y.deinterleave2=function(a,s){return(a=65535&((a=16711935&((a=252645135&((a=858993459&((a=a>>>s&1431655765)|a>>>1))|a>>>2))|a>>>4))|a>>>16))<<16>>16},y.interleave3=function(a,s,c){return a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2),(a|=(s=1227133513&((s=3272356035&((s=251719695&((s=4278190335&((s&=1023)|s<<16))|s<<8))|s<<4))|s<<2))<<1)|(c=1227133513&((c=3272356035&((c=251719695&((c=4278190335&((c&=1023)|c<<16))|c<<8))|c<<4))|c<<2))<<2},y.deinterleave3=function(a,s){return(a=1023&((a=4278190335&((a=251719695&((a=3272356035&((a=a>>>s&1227133513)|a>>>2))|a>>>4))|a>>>8))|a>>>16))<<22>>22},y.nextCombination=function(a){var s=a|a-1;return s+1|(~s&-~s)-1>>>r(a)+1}},6656:function(u,y,e){"use strict";var r=e(9392),l=e(9521);function f(n,E){var d=n.length,F=n.length-E.length,D=Math.min;if(F)return F;switch(d){case 0:return 0;case 1:return n[0]-E[0];case 2:return(z=n[0]+n[1]-E[0]-E[1])||D(n[0],n[1])-D(E[0],E[1]);case 3:var N=n[0]+n[1],k=E[0]+E[1];if(z=N+n[2]-(k+E[2]))return z;var z,O=D(n[0],n[1]),B=D(E[0],E[1]);return(z=D(O,n[2])-D(B,E[2]))||D(O+n[2],N)-D(B+E[2],k);default:var U=n.slice(0);U.sort();var H=E.slice(0);H.sort();for(var J=0;J<d;++J)if(F=U[J]-H[J])return F;return 0}}function m(n,E){return f(n[0],E[0])}function h(n,E){if(E){for(var d=n.length,F=new Array(d),D=0;D<d;++D)F[D]=[n[D],E[D]];for(F.sort(m),D=0;D<d;++D)n[D]=F[D][0],E[D]=F[D][1];return n}return n.sort(f),n}function w(n){if(0===n.length)return[];for(var E=1,d=n.length,F=1;F<d;++F){var D=n[F];if(f(D,n[F-1])){if(F===E){E++;continue}n[E++]=D}}return n.length=E,n}function p(n,E){for(var d=0,F=n.length-1,D=-1;d<=F;){var N=d+F>>1,k=f(n[N],E);k<=0?(0===k&&(D=N),d=N+1):k>0&&(F=N-1)}return D}function o(n,E){for(var d=new Array(n.length),F=0,D=d.length;F<D;++F)d[F]=[];for(var N=[],k=(F=0,E.length);F<k;++F)for(var O=E[F],B=O.length,z=1,U=1<<B;z<U;++z){N.length=r.popCount(z);for(var H=0,J=0;J<B;++J)z&1<<J&&(N[H++]=O[J]);var nt=p(n,N);if(!(nt<0))for(;d[nt++].push(F),!(nt>=n.length||0!==f(n[nt],N)););}return d}function b(n,E){if(E<0)return[];for(var d=[],F=(1<<E+1)-1,D=0;D<n.length;++D)for(var N=n[D],k=F;k<1<<N.length;k=r.nextCombination(k)){for(var O=new Array(E+1),B=0,z=0;z<N.length;++z)k&1<<z&&(O[B++]=N[z]);d.push(O)}return h(d)}y.dimension=function a(n){for(var E=0,d=Math.max,F=0,D=n.length;F<D;++F)E=d(E,n[F].length);return E-1},y.countVertices=function s(n){for(var E=-1,d=Math.max,F=0,D=n.length;F<D;++F)for(var N=n[F],k=0,O=N.length;k<O;++k)E=d(E,N[k]);return E+1},y.cloneCells=function c(n){for(var E=new Array(n.length),d=0,F=n.length;d<F;++d)E[d]=n[d].slice(0);return E},y.compareCells=f,y.normalize=h,y.unique=w,y.findCell=p,y.incidence=o,y.dual=function v(n,E){if(!E)return o(w(b(n,0)),n);for(var d=new Array(E),F=0;F<E;++F)d[F]=[];F=0;for(var D=n.length;F<D;++F)for(var N=n[F],k=0,O=N.length;k<O;++k)d[N[k]].push(F);return d},y.explode=function M(n){for(var E=[],d=0,F=n.length;d<F;++d)for(var D=n[d],N=0|D.length,k=1,O=1<<N;k<O;++k){for(var B=[],z=0;z<N;++z)k>>>z&1&&B.push(D[z]);E.push(B)}return h(E)},y.skeleton=b,y.boundary=function L(n){for(var E=[],d=0,F=n.length;d<F;++d)for(var D=n[d],N=0,k=D.length;N<k;++N){for(var O=new Array(D.length-1),B=0,z=0;B<k;++B)B!==N&&(O[z++]=D[B]);E.push(O)}return h(E)},y.connectedComponents=function T(n,E){return E?function x(n,E){for(var d=new l(E),F=0;F<n.length;++F)for(var D=n[F],N=0;N<D.length;++N)for(var k=N+1;k<D.length;++k)d.link(D[N],D[k]);var O=[],B=d.ranks;for(F=0;F<B.length;++F)B[F]=-1;for(F=0;F<n.length;++F){var z=d.find(n[F][0]);B[z]<0?(B[z]=O.length,O.push([n[F].slice(0)])):O[B[z]].push(n[F].slice(0))}return O}(n,E):function S(n){for(var E=w(h(b(n,0))),d=new l(E.length),F=0;F<n.length;++F)for(var D=n[F],N=0;N<D.length;++N)for(var k=p(E,[D[N]]),O=N+1;O<D.length;++O)d.link(k,p(E,[D[O]]));var B=[],z=d.ranks;for(F=0;F<z.length;++F)z[F]=-1;for(F=0;F<n.length;++F){var U=d.find(p(E,[n[F][0]]));z[U]<0?(z[U]=B.length,B.push([n[F].slice(0)])):B[z[U]].push(n[F].slice(0))}return B}(n)}},9521:function(u){"use strict";function y(e){this.roots=new Array(e),this.ranks=new Array(e);for(var r=0;r<e;++r)this.roots[r]=r,this.ranks[r]=0}u.exports=y,y.prototype.length=function(){return this.roots.length},y.prototype.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},y.prototype.find=function(e){for(var r=this.roots;r[e]!==e;){var l=r[e];r[e]=r[l],e=l}return e},y.prototype.link=function(e,r){var l=this.find(e),a=this.find(r);if(l!==a){var s=this.ranks,c=this.roots,f=s[l],m=s[a];f<m?c[l]=a:m<f?c[a]=l:(c[a]=l,++s[l])}}},8243:function(u,y,e){"use strict";u.exports=function s(c,f,m){for(var h=f.length,w=c.length,p=new Array(h),o=new Array(h),v=new Array(h),M=new Array(h),b=0;b<h;++b)p[b]=o[b]=-1,v[b]=1/0,M[b]=!1;for(b=0;b<w;++b){var L=c[b];if(2!==L.length)throw new Error("Input must be a graph");var x=L[1],S=L[0];o[S]=-1!==o[S]?-2:x,p[x]=-1!==p[x]?-2:S}function T(j){if(M[j])return 1/0;var Z=p[j],G=o[j];return Z<0||G<0?1/0:function a(c,f,m){return Math.abs(r(c,f,m))/Math.sqrt(Math.pow(f[0]-m[0],2)+Math.pow(f[1]-m[1],2))}(f[j],f[Z],f[G])}function n(j,Z){var G=B[j],K=B[Z];B[j]=K,B[Z]=G,z[G]=Z,z[K]=j}function E(j){return v[B[j]]}function d(j){return 1&j?j-1>>1:(j>>1)-1}function F(j){for(var Z=E(j);;){var G=Z,K=2*j+1,at=2*(j+1),$=j;if(K<H){var X=E(K);X<G&&($=K,G=X)}if(at<H&&E(at)<G&&($=at),$===j)return j;n(j,$),j=$}}function D(j){for(var Z=E(j);j>0;){var G=d(j);if(!(G>=0&&Z<E(G)))return j;n(j,G),j=G}}function N(){if(H>0){var j=B[0];return n(0,H-1),H-=1,F(0),j}return-1}function k(j,Z){var G=B[j];return v[G]===Z?j:(v[G]=-1/0,D(j),N(),v[G]=Z,D((H+=1)-1))}function O(j){if(!M[j]){M[j]=!0;var Z=p[j],G=o[j];p[G]>=0&&(p[G]=Z),o[Z]>=0&&(o[Z]=G),z[Z]>=0&&k(z[Z],T(Z)),z[G]>=0&&k(z[G],T(G))}}var B=[],z=new Array(h);for(b=0;b<h;++b)(v[b]=T(b))<1/0?(z[b]=B.length,B.push(b)):z[b]=-1;var H=B.length;for(b=H>>1;b>=0;--b)F(b);for(;;){var J=N();if(J<0||v[J]>m)break;O(J)}var nt=[];for(b=0;b<h;++b)M[b]||(z[b]=nt.length,nt.push(f[b].slice()));function ut(j,Z){if(j[Z]<0)return Z;var G=Z,K=Z;do{var at=j[K];if(!M[K]||at<0||at===K||(at=j[K=at],!M[K]||at<0||at===K))break;K=at,G=j[G]}while(G!==K);for(var $=Z;$!==K;$=j[$])j[$]=K;return K}var Q=[];return c.forEach(function(j){var Z=ut(p,j[0]),G=ut(o,j[1]);if(Z>=0&&G>=0&&Z!==G){var K=z[Z],at=z[G];K!==at&&Q.push([K,at])}}),l.unique(l.normalize(Q)),{positions:nt,edges:Q}};var r=e(417),l=e(6656)},6638:function(u,y,e){"use strict";u.exports=function a(s,c){var f,m,h,w;if(c[0][0]<c[1][0])f=c[0],m=c[1];else{if(!(c[0][0]>c[1][0]))return l(c,s);f=c[1],m=c[0]}if(s[0][0]<s[1][0])h=s[0],w=s[1];else{if(!(s[0][0]>s[1][0]))return-l(s,c);h=s[1],w=s[0]}var p=r(f,m,w),o=r(f,m,h);if(p<0){if(o<=0)return p}else if(p>0){if(o>=0)return p}else if(o)return o;if(p=r(w,h,m),o=r(w,h,f),p<0){if(o<=0)return p}else if(p>0){if(o>=0)return p}else if(o)return o;return m[0]-w[0]};var r=e(417);function l(s,c){var f,m,v,M;if(c[0][0]<c[1][0])f=c[0],m=c[1];else{if(!(c[0][0]>c[1][0])){var h=Math.min(s[0][1],s[1][1]),w=Math.max(s[0][1],s[1][1]),p=Math.min(c[0][1],c[1][1]),o=Math.max(c[0][1],c[1][1]);return w<p?w-p:h>o?h-o:w-o}f=c[1],m=c[0]}s[0][1]<s[1][1]?(v=s[0],M=s[1]):(v=s[1],M=s[0]);var b=r(m,f,v);return b||(b=r(m,f,M))?b:M-m}},4385:function(u,y,e){"use strict";u.exports=function o(v){for(var M=v.length,b=2*M,L=new Array(b),x=0;x<M;++x){var S=v[x],T=S[0][0]<S[1][0];L[2*x]=new p(S[0][0],S,T,x),L[2*x+1]=new p(S[1][0],S,!T,x)}L.sort(function(B,z){var U=B.x-z.x;return U||(U=B.create-z.create)?U:Math.min(B.segment[0][1],B.segment[1][1])-Math.min(z.segment[0][1],z.segment[1][1])});var n=l(s),E=[],d=[],F=[];for(x=0;x<b;){for(var N=L[x].x,k=[];x<b;){var O=L[x];if(O.x!==N)break;x+=1,O.segment[0][0]===O.x&&O.segment[1][0]===O.x?O.create&&(O.segment[0][1]<O.segment[1][1]?(k.push(new w(O.segment[0][1],O.index,!0,!0)),k.push(new w(O.segment[1][1],O.index,!1,!1))):(k.push(new w(O.segment[1][1],O.index,!0,!1)),k.push(new w(O.segment[0][1],O.index,!1,!0)))):n=O.create?n.insert(O.segment,O.index):n.remove(O.segment)}E.push(n.root),d.push(N),F.push(k)}return new c(E,d,F)};var r=e(5070),l=e(7080),a=e(417),s=e(6638);function c(v,M,b){this.slabs=v,this.coordinates=M,this.horizontal=b}function m(v,M){return v.y-M}function h(v,M){for(var b=null;v;){var x,S,L=v.key;L[0][0]<L[1][0]?(x=L[0],S=L[1]):(x=L[1],S=L[0]);var T=a(x,S,M);if(T<0)v=v.left;else if(T>0)if(M[0]!==L[1][0])b=v,v=v.right;else{if(n=h(v.right,M))return n;v=v.left}else{if(M[0]!==L[1][0])return v;var n;if(n=h(v.right,M))return n;v=v.left}}return b}function w(v,M,b,L){this.y=v,this.index=M,this.start=b,this.closed=L}function p(v,M,b,L){this.x=v,this.segment=M,this.create=b,this.index=L}c.prototype.castUp=function(v){var M=r.le(this.coordinates,v[0]);if(M<0)return-1;var L=h(this.slabs[M],v),x=-1;if(L&&(x=L.value),this.coordinates[M]===v[0]){var S=null;if(L&&(S=L.key),M>0){var T=h(this.slabs[M-1],v);T&&(S?s(T.key,S)>0&&(S=T.key,x=T.value):(x=T.value,S=T.key))}var n=this.horizontal[M];if(n.length>0){var E=r.ge(n,v[1],m);if(E<n.length){var d=n[E];if(v[1]===d.y){if(d.closed)return d.index;for(;E<n.length-1&&n[E+1].y===v[1];)if((d=n[E+=1]).closed)return d.index;if(d.y===v[1]&&!d.start){if((E+=1)>=n.length)return x;d=n[E]}}if(d.start)if(S){var F=a(S[0],S[1],[v[0],d.y]);S[0][0]>S[1][0]&&(F=-F),F>0&&(x=d.index)}else x=d.index;else d.y!==v[1]&&(x=d.index)}}}return x}},4670:function(u,y,e){"use strict";var r=e(9130),l=e(9662);function a(h,w){var p=l(r(h,w),[w[w.length-1]]);return p[p.length-1]}function s(h,w,p,o){var M=-w/(o-w);M<0?M=0:M>1&&(M=1);for(var b=1-M,L=h.length,x=new Array(L),S=0;S<L;++S)x[S]=M*h[S]+b*p[S];return x}u.exports=function c(h,w){for(var p=[],o=[],v=a(h[h.length-1],w),M=h[h.length-1],b=h[0],L=0;L<h.length;++L,M=b){var x=a(b=h[L],w);if(v<0&&x>0||v>0&&x<0){var S=s(M,x,b,v);p.push(S),o.push(S.slice())}x<0?o.push(b.slice()):x>0?p.push(b.slice()):(p.push(b.slice()),o.push(b.slice())),v=x}return{positive:p,negative:o}},u.exports.positive=function f(h,w){for(var p=[],o=a(h[h.length-1],w),v=h[h.length-1],M=h[0],b=0;b<h.length;++b,v=M){var L=a(M=h[b],w);(o<0&&L>0||o>0&&L<0)&&p.push(s(v,L,M,o)),L>=0&&p.push(M.slice()),o=L}return p},u.exports.negative=function m(h,w){for(var p=[],o=a(h[h.length-1],w),v=h[h.length-1],M=h[0],b=0;b<h.length;++b,v=M){var L=a(M=h[b],w);(o<0&&L>0||o>0&&L<0)&&p.push(s(v,L,M,o)),L<=0&&p.push(M.slice()),o=L}return p}},8974:function(u,y,e){var r;!function(){"use strict";var l={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(h){return c(m(h),arguments)}function s(h,w){return a.apply(null,[h].concat(w||[]))}function c(h,w){var v,b,L,x,S,T,n,E,d,p=1,o=h.length,M="";for(b=0;b<o;b++)if("string"==typeof h[b])M+=h[b];else if("object"==typeof h[b]){if((x=h[b]).keys)for(v=w[p],L=0;L<x.keys.length;L++){if(null==v)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',x.keys[L],x.keys[L-1]));v=v[x.keys[L]]}else v=x.param_no?w[x.param_no]:w[p++];if(l.not_type.test(x.type)&&l.not_primitive.test(x.type)&&v instanceof Function&&(v=v()),l.numeric_arg.test(x.type)&&"number"!=typeof v&&isNaN(v))throw new TypeError(a("[sprintf] expecting number but found %T",v));switch(l.number.test(x.type)&&(E=v>=0),x.type){case"b":v=parseInt(v,10).toString(2);break;case"c":v=String.fromCharCode(parseInt(v,10));break;case"d":case"i":v=parseInt(v,10);break;case"j":v=JSON.stringify(v,null,x.width?parseInt(x.width):0);break;case"e":v=x.precision?parseFloat(v).toExponential(x.precision):parseFloat(v).toExponential();break;case"f":v=x.precision?parseFloat(v).toFixed(x.precision):parseFloat(v);break;case"g":v=x.precision?String(Number(v.toPrecision(x.precision))):parseFloat(v);break;case"o":v=(parseInt(v,10)>>>0).toString(8);break;case"s":v=String(v),v=x.precision?v.substring(0,x.precision):v;break;case"t":v=String(!!v),v=x.precision?v.substring(0,x.precision):v;break;case"T":v=Object.prototype.toString.call(v).slice(8,-1).toLowerCase(),v=x.precision?v.substring(0,x.precision):v;break;case"u":v=parseInt(v,10)>>>0;break;case"v":v=v.valueOf(),v=x.precision?v.substring(0,x.precision):v;break;case"x":v=(parseInt(v,10)>>>0).toString(16);break;case"X":v=(parseInt(v,10)>>>0).toString(16).toUpperCase()}l.json.test(x.type)?M+=v:(!l.number.test(x.type)||E&&!x.sign?d="":(d=E?"+":"-",v=v.toString().replace(l.sign,"")),T=x.pad_char?"0"===x.pad_char?"0":x.pad_char.charAt(1):" ",n=x.width-(d+v).length,S=x.width&&n>0?T.repeat(n):"",M+=x.align?d+v+S:"0"===T?d+S+v:S+d+v)}return M}var f=Object.create(null);function m(h){if(f[h])return f[h];for(var p,w=h,o=[],v=0;w;){if(null!==(p=l.text.exec(w)))o.push(p[0]);else if(null!==(p=l.modulo.exec(w)))o.push("%");else{if(null===(p=l.placeholder.exec(w)))throw new SyntaxError("[sprintf] unexpected placeholder");if(p[2]){v|=1;var M=[],b=p[2],L=[];if(null===(L=l.key.exec(b)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(M.push(L[1]);""!==(b=b.substring(L[0].length));)if(null!==(L=l.key_access.exec(b)))M.push(L[1]);else{if(null===(L=l.index_access.exec(b)))throw new SyntaxError("[sprintf] failed to parse named argument key");M.push(L[1])}p[2]=M}else v|=2;if(3===v)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");o.push({placeholder:p[0],param_no:p[1],keys:p[2],sign:p[3],pad_char:p[4],align:p[5],width:p[6],precision:p[7],type:p[8]})}w=w.substring(p[0].length)}return f[h]=o}y.sprintf=a,y.vsprintf=s,"undefined"!=typeof window&&(window.sprintf=a,window.vsprintf=s,void 0!==(r=function(){return{sprintf:a,vsprintf:s}}.call(y,e,y,u))&&(u.exports=r))}()},4162:function(u,y,e){"use strict";u.exports=function m(h,v){if(h.dimension<=0)return{positions:[],cells:[]};if(1===h.dimension)return function c(h,w){for(var p=l(h,w),o=p.length,v=new Array(o),M=new Array(o),b=0;b<o;++b)v[b]=[p[b]],M[b]=[b];return{positions:v,cells:M}}(h,v);var p=h.order.join()+"-"+h.dtype,o=f[p];return v=+v||0,o||(o=f[p]=function s(h,w){var o=a[h.length+"d"];if(o)return o(r,h,w)}(h.order,h.dtype)),o(h,v)};var r=e(9284),l=e(9584),a={"2d":function(h,w,p){var o=h({order:w,scalarArguments:3,getters:"generic"===p?[0]:void 0,phase:function(M,b,L,x){return M>x|0},vertex:function(M,b,L,x,S,T,n,E,d,F,D,N,k){var O=(n<<0)+(E<<1)+(d<<2)+(F<<3)|0;if(0!==O&&15!==O)switch(O){case 0:case 15:D.push([M-.5,b-.5]);break;case 1:D.push([M-.25-.25*(x+L-2*k)/(L-x),b-.25-.25*(S+L-2*k)/(L-S)]);break;case 2:D.push([M-.75-.25*(-x-L+2*k)/(x-L),b-.25-.25*(T+x-2*k)/(x-T)]);break;case 3:D.push([M-.5,b-.5-.5*(S+L+T+x-4*k)/(L-S+x-T)]);break;case 4:D.push([M-.25-.25*(T+S-2*k)/(S-T),b-.75-.25*(-S-L+2*k)/(S-L)]);break;case 5:D.push([M-.5-.5*(x+L+T+S-4*k)/(L-x+S-T),b-.5]);break;case 6:D.push([M-.5-.25*(-x-L+T+S)/(x-L+S-T),b-.5-.25*(-S-L+T+x)/(S-L+x-T)]);break;case 7:D.push([M-.75-.25*(T+S-2*k)/(S-T),b-.75-.25*(T+x-2*k)/(x-T)]);break;case 8:D.push([M-.75-.25*(-T-S+2*k)/(T-S),b-.75-.25*(-T-x+2*k)/(T-x)]);break;case 9:D.push([M-.5-.25*(x+L+-T-S)/(L-x+T-S),b-.5-.25*(S+L+-T-x)/(L-S+T-x)]);break;case 10:D.push([M-.5-.5*(-x-L-T-S+4*k)/(x-L+T-S),b-.5]);break;case 11:D.push([M-.25-.25*(-T-S+2*k)/(T-S),b-.75-.25*(S+L-2*k)/(L-S)]);break;case 12:D.push([M-.5,b-.5-.5*(-S-L-T-x+4*k)/(S-L+T-x)]);break;case 13:D.push([M-.75-.25*(x+L-2*k)/(L-x),b-.25-.25*(-T-x+2*k)/(T-x)]);break;case 14:D.push([M-.25-.25*(-x-L+2*k)/(x-L),b-.25-.25*(-S-L+2*k)/(S-L)])}},cell:function(M,b,L,x,S,T,n,E,d){E.push(S?[M,b]:[b,M])}});return function(v,M){var b=[],L=[];return o(v,b,L,M),{positions:b,cells:L}}}};var f={}},6946:function(u,y,e){"use strict";u.exports=function c(f,m,w){w=w||{};var p=a[f];p||(p=a[f]={" ":{data:new Float32Array(0),shape:.2}});var o=p[m];if(!o)if(m.length<=1||!/\d/.test(m))o=p[m]=function s(f){for(var m=f.cells,h=f.positions,w=new Float32Array(6*m.length),p=0,o=0,v=0;v<m.length;++v)for(var M=m[v],b=0;b<3;++b){var L=h[M[b]];w[p++]=L[0],w[p++]=L[1]+1.4,o=Math.max(L[0],o)}return{data:w,shape:o}}(r(m,{triangles:!0,font:f,textAlign:w.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var v=m.split(/(\d|\s)/),M=new Array(v.length),b=0,L=0,x=0;x<v.length;++x)M[x]=c(f,v[x]),b+=M[x].data.length,L+=M[x].shape,x>0&&(L+=.02);var S=new Float32Array(b),T=0,n=-.5*L;for(x=0;x<M.length;++x){for(var E=M[x].data,d=0;d<E.length;d+=2)S[T++]=E[d]+n,S[T++]=E[d+1];n+=M[x].shape+.02}o=p[m]={data:S,shape:L}}return o};var r=e(875),l=window||A.global||{},a=l.__TEXT_CACHE||{};l.__TEXT_CACHE={}},14:function(u,y,e){"use strict";var r=e(4405);u.exports=c;function a(f,m){var h=r(getComputedStyle(f).getPropertyValue(m));return h[0]*c(h[1],f)}function c(f,m){switch(m=m||document.body,f=(f||"px").trim().toLowerCase(),(m===window||m===document)&&(m=document.body),f){case"%":return m.clientHeight/100;case"ch":case"ex":return function s(f,m){var h=document.createElement("div");h.style["font-size"]="128"+f,m.appendChild(h);var w=a(h,"font-size")/128;return m.removeChild(h),w}(f,m);case"em":return a(m,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}},3440:function(u,y,e){"use strict";u.exports=function M(b){var L=(b=b||{}).center||[0,0,0],x=b.up||[0,1,0],S=b.right||w(x),T=b.radius||1,n=b.theta||0,E=b.phi||0;if(L=[].slice.call(L,0,3),x=[].slice.call(x,0,3),c(x,x),S=[].slice.call(S,0,3),c(S,S),"eye"in b){var d=b.eye,F=[d[0]-L[0],d[1]-L[1],d[2]-L[2]];s(S,F,x),m(S[0],S[1],S[2])<1e-6?S=w(x):c(S,S),T=m(F[0],F[1],F[2]);var D=f(x,F)/T,N=f(S,F)/T;E=Math.acos(D),n=Math.acos(N)}return T=Math.log(T),new p(b.zoomMin,b.zoomMax,L,x,S,T,n,E)};var r=e(8444),l=e(7437),a=e(4422),s=e(903),c=e(899),f=e(9305);function m(b,L,x){return Math.sqrt(Math.pow(b,2)+Math.pow(L,2)+Math.pow(x,2))}function h(b){return Math.min(1,Math.max(-1,b))}function w(b){var L=Math.abs(b[0]),x=Math.abs(b[1]),S=Math.abs(b[2]),T=[0,0,0];L>Math.max(x,S)?T[2]=1:x>Math.max(L,S)?T[0]=1:T[1]=1;for(var n=0,E=0,d=0;d<3;++d)n+=b[d]*b[d],E+=T[d]*b[d];for(d=0;d<3;++d)T[d]-=E/n*b[d];return c(T,T),T}function p(b,L,x,S,T,n,E,d){this.center=r(x),this.up=r(S),this.right=r(T),this.radius=r([n]),this.angle=r([E,d]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(b,L),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var F=0;F<16;++F)this.computedMatrix[F]=.5;this.recalcMatrix(0)}var o=p.prototype;o.setDistanceLimits=function(b,L){b=b>0?Math.log(b):-1/0,L=L>0?Math.log(L):1/0,L=Math.max(L,b),this.radius.bounds[0][0]=b,this.radius.bounds[1][0]=L},o.getDistanceLimits=function(b){var L=this.radius.bounds[0];return b?(b[0]=Math.exp(L[0][0]),b[1]=Math.exp(L[1][0]),b):[Math.exp(L[0][0]),Math.exp(L[1][0])]},o.recalcMatrix=function(b){this.center.curve(b),this.up.curve(b),this.right.curve(b),this.radius.curve(b),this.angle.curve(b);for(var L=this.computedUp,x=this.computedRight,S=0,T=0,n=0;n<3;++n)T+=L[n]*x[n],S+=L[n]*L[n];var E=Math.sqrt(S),d=0;for(n=0;n<3;++n)x[n]-=L[n]*T/S,d+=x[n]*x[n],L[n]/=E;var F=Math.sqrt(d);for(n=0;n<3;++n)x[n]/=F;var D=this.computedToward;s(D,L,x),c(D,D);var N=Math.exp(this.computedRadius[0]),k=this.computedAngle[0],O=this.computedAngle[1],B=Math.cos(k),z=Math.sin(k),U=Math.cos(O),H=Math.sin(O),J=this.computedCenter,nt=B*U,it=z*U,ut=H,Q=-B*H,j=-z*H,Z=U,G=this.computedEye,K=this.computedMatrix;for(n=0;n<3;++n){var at=nt*x[n]+it*D[n]+ut*L[n];K[4*n+1]=Q*x[n]+j*D[n]+Z*L[n],K[4*n+2]=at,K[4*n+3]=0}var $=K[1],X=K[5],rt=K[9],et=K[2],st=K[6],dt=K[10],bt=X*dt-rt*st,gt=rt*et-$*dt,Lt=$*st-X*et,It=m(bt,gt,Lt);for(gt/=It,Lt/=It,K[0]=bt/=It,K[4]=gt,K[8]=Lt,n=0;n<3;++n)G[n]=J[n]+K[2+4*n]*N;for(n=0;n<3;++n){d=0;for(var Mt=0;Mt<3;++Mt)d+=K[n+4*Mt]*G[Mt];K[12+n]=-d}K[15]=1},o.getMatrix=function(b,L){this.recalcMatrix(b);var x=this.computedMatrix;if(L){for(var S=0;S<16;++S)L[S]=x[S];return L}return x};var v=[0,0,0];o.rotate=function(b,L,x,S){if(this.angle.move(b,L,x),S){this.recalcMatrix(b);var T=this.computedMatrix;v[0]=T[2],v[1]=T[6],v[2]=T[10];for(var n=this.computedUp,E=this.computedRight,d=this.computedToward,F=0;F<3;++F)T[4*F]=n[F],T[4*F+1]=E[F],T[4*F+2]=d[F];for(a(T,T,S,v),F=0;F<3;++F)n[F]=T[4*F],E[F]=T[4*F+1];this.up.set(b,n[0],n[1],n[2]),this.right.set(b,E[0],E[1],E[2])}},o.pan=function(b,L,x,S){L=L||0,x=x||0,S=S||0,this.recalcMatrix(b);var T=this.computedMatrix,E=(Math.exp(this.computedRadius[0]),T[1]),d=T[5],F=T[9],D=m(E,d,F),N=T[0],k=T[4],O=T[8],B=N*(E/=D)+k*(d/=D)+O*(F/=D),z=m(N-=E*B,k-=d*B,O-=F*B);this.center.move(b,(N/=z)*L+E*x,(k/=z)*L+d*x,(O/=z)*L+F*x);var nt=Math.exp(this.computedRadius[0]);nt=Math.max(1e-4,nt+S),this.radius.set(b,Math.log(nt))},o.translate=function(b,L,x,S){this.center.move(b,L||0,x||0,S||0)},o.setMatrix=function(b,L,x,S){var T=1;"number"==typeof x&&(T=0|x),(T<0||T>3)&&(T=1);var n=(T+2)%3;L||(this.recalcMatrix(b),L=this.computedMatrix);var d=L[T],F=L[T+4],D=L[T+8];if(S){var k=Math.abs(d),O=Math.abs(F),B=Math.abs(D),z=Math.max(k,O,B);k===z?(d=d<0?-1:1,F=D=0):B===z?(D=D<0?-1:1,d=F=0):(F=F<0?-1:1,d=D=0)}else{var N=m(d,F,D);d/=N,F/=N,D/=N}var G,K,U=L[n],H=L[n+4],J=L[n+8],nt=U*d+H*F+J*D,it=m(U-=d*nt,H-=F*nt,J-=D*nt),ut=F*(J/=it)-D*(H/=it),Q=D*(U/=it)-d*J,j=d*H-F*U,Z=m(ut,Q,j);if(ut/=Z,Q/=Z,j/=Z,this.center.jump(b,Pt,Vt,te),this.radius.idle(b),this.up.jump(b,d,F,D),this.right.jump(b,U,H,J),2===T){var at=L[1],$=L[5],X=L[9];G=gt<0?-Math.PI/2:Math.PI/2,K=Math.atan2(at*ut+$*Q+X*j,at*U+$*H+X*J)}else{var st=L[2],dt=L[6],bt=L[10],gt=st*d+dt*F+bt*D,Lt=st*U+dt*H+bt*J,It=st*ut+dt*Q+bt*j;G=Math.asin(h(gt)),K=Math.atan2(It,Lt)}this.angle.jump(b,K,G),this.recalcMatrix(b);var Mt=L[2],xt=L[6],At=L[10],Gt=this.computedMatrix;l(Gt,L);var Wt=Gt[15],Pt=Gt[12]/Wt,Vt=Gt[13]/Wt,te=Gt[14]/Wt,Qt=Math.exp(this.computedRadius[0]);this.center.jump(b,Pt-Mt*Qt,Vt-xt*Qt,te-At*Qt)},o.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},o.idle=function(b){this.center.idle(b),this.up.idle(b),this.right.idle(b),this.radius.idle(b),this.angle.idle(b)},o.flush=function(b){this.center.flush(b),this.up.flush(b),this.right.flush(b),this.radius.flush(b),this.angle.flush(b)},o.setDistance=function(b,L){L>0&&this.radius.set(b,Math.log(L))},o.lookAt=function(b,L,x,S){this.recalcMatrix(b),L=L||this.computedEye,x=x||this.computedCenter;var T=(S=S||this.computedUp)[0],n=S[1],E=S[2],d=m(T,n,E);if(!(d<1e-6)){T/=d,n/=d,E/=d;var F=L[0]-x[0],D=L[1]-x[1],N=L[2]-x[2],k=m(F,D,N);if(!(k<1e-6)){F/=k,D/=k,N/=k;var O=this.computedRight,B=O[0],z=O[1],U=O[2],H=T*B+n*z+E*U,J=m(B-=H*T,z-=H*n,U-=H*E);if(!(J<.01&&(B=n*N-E*D,z=E*F-T*N,U=T*D-n*F,J=m(B,z,U),J<1e-6))){B/=J,z/=J,U/=J,this.up.set(b,T,n,E),this.right.set(b,B,z,U),this.center.set(b,x[0],x[1],x[2]),this.radius.set(b,Math.log(k));var nt=n*U-E*z,it=E*B-T*U,ut=T*z-n*B,Q=m(nt,it,ut),Z=B*F+z*D+U*N,G=(nt/=Q)*F+(it/=Q)*D+(ut/=Q)*N,K=Math.asin(h(T*F+n*D+E*N)),at=Math.atan2(G,Z),$=this.angle._state,X=$[$.length-1],rt=$[$.length-2];X%=2*Math.PI;var et=Math.abs(X+2*Math.PI-at),st=Math.abs(X-at),dt=Math.abs(X-2*Math.PI-at);et<st&&(X+=2*Math.PI),dt<st&&(X-=2*Math.PI),this.angle.jump(this.angle.lastT(),X,rt),this.angle.set(b,at,K)}}}}},9660:function(u){"use strict";u.exports=function e(r,l,a){var s=r*l,c=y*r,m=c-(c-r),h=r-m,w=y*l,o=w-(w-l),v=l-o,x=h*v-(s-m*o-h*o-m*v);return a?(a[0]=x,a[1]=s,a):[x,s]};var y=+(Math.pow(2,27)+1)},87:function(u){"use strict";u.exports=function y(e,r,l){var a=e+r,s=a-e,f=r-s,m=e-(a-s);return l?(l[0]=m+f,l[1]=a,l):[m+f,a]}},5306:function(u,y,e){"use strict";var r=e(2288),l=e(3094),a=e(2146).lW;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:l([32,0]),UINT16:l([32,0]),UINT32:l([32,0]),BIGUINT64:l([32,0]),INT8:l([32,0]),INT16:l([32,0]),INT32:l([32,0]),BIGINT64:l([32,0]),FLOAT:l([32,0]),DOUBLE:l([32,0]),DATA:l([32,0]),UINT8C:l([32,0]),BUFFER:l([32,0])});var s="undefined"!=typeof Uint8ClampedArray,c="undefined"!=typeof BigUint64Array,f="undefined"!=typeof BigInt64Array,m=e.g.__TYPEDARRAY_POOL;m.UINT8C||(m.UINT8C=l([32,0])),m.BIGUINT64||(m.BIGUINT64=l([32,0])),m.BIGINT64||(m.BIGINT64=l([32,0])),m.BUFFER||(m.BUFFER=l([32,0]));var h=m.DATA,w=m.BUFFER;function p(O){if(O){var z=r.log2(O.length||O.byteLength);h[z].push(O)}}function v(B){B=r.nextPow2(B);var z=r.log2(B),U=h[z];return U.length>0?U.pop():new ArrayBuffer(B)}function M(O){return new Uint8Array(v(O),0,O)}function b(O){return new Uint16Array(v(2*O),0,O)}function L(O){return new Uint32Array(v(4*O),0,O)}function x(O){return new Int8Array(v(O),0,O)}function S(O){return new Int16Array(v(2*O),0,O)}function T(O){return new Int32Array(v(4*O),0,O)}function n(O){return new Float32Array(v(4*O),0,O)}function E(O){return new Float64Array(v(8*O),0,O)}function d(O){return s?new Uint8ClampedArray(v(O),0,O):M(O)}function F(O){return c?new BigUint64Array(v(8*O),0,O):null}function D(O){return f?new BigInt64Array(v(8*O),0,O):null}function N(O){return new DataView(v(O),0,O)}function k(O){O=r.nextPow2(O);var B=r.log2(O),z=w[B];return z.length>0?z.pop():new a(O)}y.free=function(B){if(a.isBuffer(B))w[r.log2(B.length)].push(B);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(B)&&(B=B.buffer),!B)return;var U=0|r.log2(B.length||B.byteLength);h[U].push(B)}},y.freeUint8=y.freeUint16=y.freeUint32=y.freeBigUint64=y.freeInt8=y.freeInt16=y.freeInt32=y.freeBigInt64=y.freeFloat32=y.freeFloat=y.freeFloat64=y.freeDouble=y.freeUint8Clamped=y.freeDataView=function o(O){p(O.buffer)},y.freeArrayBuffer=p,y.freeBuffer=function(B){w[r.log2(B.length)].push(B)},y.malloc=function(B,z){if(void 0===z||"arraybuffer"===z)return v(B);switch(z){case"uint8":return M(B);case"uint16":return b(B);case"uint32":return L(B);case"int8":return x(B);case"int16":return S(B);case"int32":return T(B);case"float":case"float32":return n(B);case"double":case"float64":return E(B);case"uint8_clamped":return d(B);case"bigint64":return D(B);case"biguint64":return F(B);case"buffer":return k(B);case"data":case"dataview":return N(B);default:return null}return null},y.mallocArrayBuffer=v,y.mallocUint8=M,y.mallocUint16=b,y.mallocUint32=L,y.mallocInt8=x,y.mallocInt16=S,y.mallocInt32=T,y.mallocFloat32=y.mallocFloat=n,y.mallocFloat64=y.mallocDouble=E,y.mallocUint8Clamped=d,y.mallocBigUint64=F,y.mallocBigInt64=D,y.mallocDataView=N,y.mallocBuffer=k,y.clearCache=function(){for(var B=0;B<32;++B)m.UINT8[B].length=0,m.UINT16[B].length=0,m.UINT32[B].length=0,m.INT8[B].length=0,m.INT16[B].length=0,m.INT32[B].length=0,m.FLOAT[B].length=0,m.DOUBLE[B].length=0,m.BIGUINT64[B].length=0,m.BIGINT64[B].length=0,m.UINT8C[B].length=0,h[B].length=0,w[B].length=0}},1731:function(u){"use strict";function y(r){this.roots=new Array(r),this.ranks=new Array(r);for(var l=0;l<r;++l)this.roots[l]=l,this.ranks[l]=0}u.exports=y;var e=y.prototype;Object.defineProperty(e,"length",{get:function(){return this.roots.length}}),e.makeSet=function(){var r=this.roots.length;return this.roots.push(r),this.ranks.push(0),r},e.find=function(r){for(var l=r,a=this.roots;a[r]!==r;)r=a[r];for(;a[l]!==r;){var s=a[l];a[l]=r,l=s}return r},e.link=function(r,l){var a=this.find(r),s=this.find(l);if(a!==s){var c=this.ranks,f=this.roots,m=c[a],h=c[s];m<h?f[a]=s:h<m?f[s]=a:(f[s]=a,++c[a])}}},1215:function(u){"use strict";u.exports=function r(l,a,s){return 0===l.length?l:a?(s||l.sort(a),function y(l,a){for(var s=1,c=l.length,f=l[0],m=l[0],h=1;h<c;++h)if(m=f,a(f=l[h],m)){if(h===s){s++;continue}l[s++]=f}return l.length=s,l}(l,a)):(s||l.sort(),function e(l){for(var a=1,s=l.length,c=l[0],f=l[0],m=1;m<s;++m,f=c)if(f=c,(c=l[m])!==f){if(m===a){a++;continue}l[a++]=c}return l.length=a,l}(l))}},875:function(u,y,e){"use strict";u.exports=function s(c,f){return("object"!=typeof f||null===f)&&(f={}),r(c,f.canvas||l,f.context||a,f)};var r=e(712),l=null,a=null;"undefined"!=typeof document&&((l=document.createElement("canvas")).width=8192,l.height=1024,a=l.getContext("2d"))},712:function(u,y,e){u.exports=function D(N,k,O,B){var z=64,U=1.25,H={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return B&&(B.size&&B.size>0&&(z=B.size),B.lineSpacing&&B.lineSpacing>0&&(U=B.lineSpacing),B.styletags&&B.styletags.breaklines&&(H.breaklines=!!B.styletags.breaklines),B.styletags&&B.styletags.bolds&&(H.bolds=!!B.styletags.bolds),B.styletags&&B.styletags.italics&&(H.italics=!!B.styletags.italics),B.styletags&&B.styletags.subscripts&&(H.subscripts=!!B.styletags.subscripts),B.styletags&&B.styletags.superscripts&&(H.superscripts=!!B.styletags.superscripts)),O.font=[B.fontStyle,B.fontVariant,B.fontWeight,z+"px",B.font].filter(function(nt){return nt}).join(" "),O.textAlign="start",O.textBaseline="alphabetic",O.direction="ltr",F(function n(N,k,O,B,z,U){O=(O=O.replace(/\n/g,"")).replace(/\<br\>/g,!0===U.breaklines?"\n":" ");var H="",J=[];for(X=0;X<O.length;++X)J[X]=H;!0===U.bolds&&(J=S("b",h,O,J)),!0===U.italics&&(J=S("i",p,O,J)),!0===U.superscripts&&(J=S("sup","+1",O,J)),!0===U.subscripts&&(J=S("sub","-1",O,J));var nt=[],it="";for(X=0;X<O.length;++X)null!==J[X]&&(it+=O[X],nt.push(J[X]));var ut=it.split("\n"),Q=ut.length,j=Math.round(z*B),Z=B,G=2*B,K=0,at=Q*j+G;N.height<at&&(N.height=at),k.fillStyle="#000",k.fillRect(0,0,N.width,N.height),k.fillStyle="#fff";var $,X,rt,et,st,dt=0,bt="";function gt(){if(""!==bt){var Vt=k.measureText(bt).width;k.fillText(bt,Z+rt,G+et),rt+=Vt}}function Lt(){return Math.round(st)+"px "}function It(Vt,te){var Qt=""+k.font;if(!0===U.subscripts){var Bt=Vt.indexOf(L),Ot=te.indexOf(L),qt=Bt>-1?parseInt(Vt[1+Bt]):0,ie=Ot>-1?parseInt(te[1+Ot]):0;qt!==ie&&(Qt=Qt.replace(Lt(),"?px "),st*=Math.pow(.75,ie-qt),Qt=Qt.replace("?px ",Lt())),et+=.25*j*(ie-qt)}if(!0===U.superscripts){var oe=Vt.indexOf(v),pe=te.indexOf(v),de=oe>-1?parseInt(Vt[1+oe]):0,Fe=pe>-1?parseInt(te[1+pe]):0;de!==Fe&&(Qt=Qt.replace(Lt(),"?px "),st*=Math.pow(.75,Fe-de),Qt=Qt.replace("?px ",Lt())),et-=.25*j*(Fe-de)}if(!0===U.bolds){var Kt=Vt.indexOf(h)>-1,Et=te.indexOf(h)>-1;!Kt&&Et&&(Qt=St?Qt.replace("italic ","italic bold "):"bold "+Qt),Kt&&!Et&&(Qt=Qt.replace("bold ",""))}if(!0===U.italics){var St=Vt.indexOf(p)>-1,Dt=te.indexOf(p)>-1;!St&&Dt&&(Qt="italic "+Qt),St&&!Dt&&(Qt=Qt.replace("italic ",""))}k.font=Qt}for($=0;$<Q;++$){var Mt=ut[$]+"\n";for(rt=0,et=$*j,st=B,bt="",X=0;X<Mt.length;++X){var xt=X+dt<nt.length?nt[X+dt]:nt[nt.length-1];H===xt?bt+=Mt[X]:(gt(),bt=Mt[X],void 0!==xt&&(It(H,xt),H=xt))}gt(),dt+=Mt.length;var At=0|Math.round(rt+2*Z);K<At&&(K=At)}var Gt=K,Wt=G+j*Q;return l(k.getImageData(0,0,Gt,Wt).data,[Wt,Gt,4]).pick(-1,-1,0).transpose(1,0)}(k,O,N,z,U,H),B,z)},u.exports.processPixels=F;var r=e(4162),l=e(5050),a=e(8243),s=e(197),c=e(7761),f=e(8040),h="b|",p="i|",v="+",L="-";function S(N,k,O,B){for(var z="<"+N+">",U="</"+N+">",H=z.length,J=U.length,nt=k[0]===v||k[0]===L,it=0,ut=-J;it>-1&&!(-1===(it=O.indexOf(z,it))||(ut=O.indexOf(U,it+H),-1===ut)||ut<=it);){for(var Q=it;Q<ut+J;++Q)if(Q<it+H||Q>=ut)B[Q]=null,O=O.substr(0,Q)+" "+O.substr(Q+1);else if(null!==B[Q]){var j=B[Q].indexOf(k[0]);-1===j?B[Q]+=k:nt&&(B[Q]=B[Q].substr(0,j+1)+(1+parseInt(B[Q][j+1]))+B[Q].substr(j+2))}var Z=it+H,K=O.substr(Z,ut-Z).indexOf(z);it=-1!==K?K:ut+J}return B}function d(N,k,O,B){var z=function E(N,k){var O=r(N,128);return k?a(O.cells,O.positions,.25):{edges:O.cells,positions:O.positions}}(N,B),U=function T(N,k,O){for(var B=k.textAlign||"start",z=k.textBaseline||"alphabetic",U=[1<<30,1<<30],H=[0,0],J=N.length,nt=0;nt<J;++nt)for(var it=N[nt],ut=0;ut<2;++ut)U[ut]=0|Math.min(U[ut],it[ut]),H[ut]=0|Math.max(H[ut],it[ut]);var Q=0;switch(B){case"center":Q=-.5*(U[0]+H[0]);break;case"right":case"end":Q=-H[0];break;case"left":case"start":Q=-U[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+B+"'")}var j=0;switch(z){case"hanging":case"top":j=-U[1];break;case"middle":j=-.5*(U[1]+H[1]);break;case"alphabetic":case"ideographic":j=-3*O;break;case"bottom":j=-H[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+z+"'")}var Z=1/O;return"lineHeight"in k?Z*=+k.lineHeight:"width"in k?Z=k.width/(H[0]-U[0]):"height"in k&&(Z=k.height/(H[1]-U[1])),N.map(function(G){return[Z*(G[0]+Q),Z*(G[1]+j)]})}(z.positions,k,O),H=z.edges,J="ccw"===k.orientation;if(s(U,H),k.polygons||k.polygon||k.polyline){for(var nt=f(H,U),it=new Array(nt.length),ut=0;ut<nt.length;++ut){for(var Q=nt[ut],j=new Array(Q.length),Z=0;Z<Q.length;++Z){for(var G=Q[Z],K=new Array(G.length),at=0;at<G.length;++at)K[at]=U[G[at]].slice();J&&K.reverse(),j[Z]=K}it[ut]=j}return it}return k.triangles||k.triangulate||k.triangle?{cells:c(U,H,{delaunay:!1,exterior:!1,interior:!0}),positions:U}:{edges:H,positions:U}}function F(N,k,O){try{return d(N,k,O,!0)}catch(B){}try{return d(N,k,O,!1)}catch(B){}return k.polygons||k.polyline||k.polygon?[]:k.triangles||k.triangulate||k.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},5346:function(u){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=e);var r=!1;if("function"==typeof WeakMap){var l=WeakMap;if("undefined"==typeof navigator||!/Firefox/.test(navigator.userAgent)){var a=new l,s=Object.freeze({});if(a.set(s,1),1===a.get(s))return void(u.exports=WeakMap);r=!0}}var f=Object.getOwnPropertyNames,m=Object.defineProperty,h=Object.isExtensible,w="weakmap:",p=w+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var o=new ArrayBuffer(25),v=new Uint8Array(o);crypto.getRandomValues(v),p=w+"rand:"+Array.prototype.map.call(v,function(d){return(d%36).toString(36)}).join("")+"___"}if(m(Object,"getOwnPropertyNames",{value:function(F){return f(F).filter(M)}}),"getPropertyNames"in Object){var b=Object.getPropertyNames;m(Object,"getPropertyNames",{value:function(F){return b(F).filter(M)}})}!function(){var d=Object.freeze;m(Object,"freeze",{value:function(k){return L(k),d(k)}});var F=Object.seal;m(Object,"seal",{value:function(k){return L(k),F(k)}});var D=Object.preventExtensions;m(Object,"preventExtensions",{value:function(k){return L(k),D(k)}})}();var S=!1,n=0,E=function(){this instanceof E||T();var d=[],F=[],D=n++;return Object.create(E.prototype,{get___:{value:x(function N(z,U){var H,J=L(z);return J?D in J?J[D]:U:(H=d.indexOf(z))>=0?F[H]:U})},has___:{value:x(function k(z){var U=L(z);return U?D in U:d.indexOf(z)>=0})},set___:{value:x(function O(z,U){var H,J=L(z);return J?J[D]=U:(H=d.indexOf(z))>=0?F[H]=U:(F[H=d.length]=U,d[H]=z),this})},delete___:{value:x(function B(z){var H,J,U=L(z);return U?D in U&&delete U[D]:!((H=d.indexOf(z))<0||(J=d.length-1,d[H]=void 0,F[H]=F[J],d[H]=d[J],d.length=J,F.length=J,0))})}})};E.prototype=Object.create(Object.prototype,{get:{value:function(F,D){return this.get___(F,D)},writable:!0,configurable:!0},has:{value:function(F){return this.has___(F)},writable:!0,configurable:!0},set:{value:function(F,D){return this.set___(F,D)},writable:!0,configurable:!0},delete:{value:function(F){return this.delete___(F)},writable:!0,configurable:!0}}),"function"==typeof l?function(){function d(){this instanceof E||T();var B,F=new l,D=void 0,N=!1;return B=r?function(U,H){return F.set(U,H),F.has(U)||(D||(D=new E),D.set(U,H)),this}:function(U,H){if(N)try{F.set(U,H)}catch(J){D||(D=new E),D.set___(U,H)}else F.set(U,H);return this},Object.create(E.prototype,{get___:{value:x(function k(U,H){return D?F.has(U)?F.get(U):D.get___(U,H):F.get(U,H)})},has___:{value:x(function O(U){return F.has(U)||!!D&&D.has___(U)})},set___:{value:x(B)},delete___:{value:x(function z(U){var H=!!F.delete(U);return D&&D.delete___(U)||H})},permitHostObjects___:{value:x(function(U){if(U!==e)throw new Error("bogus call to permitHostObjects___");N=!0})}})}r&&"undefined"!=typeof Proxy&&(Proxy=void 0),d.prototype=E.prototype,u.exports=d,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),u.exports=E)}function e(d){d.permitHostObjects___&&d.permitHostObjects___(e)}function M(d){return!(d.substr(0,w.length)==w&&"___"===d.substr(d.length-3))}function L(d){if(d!==Object(d))throw new TypeError("Not an object: "+d);var F=d[p];if(F&&F.key===d)return F;if(h(d)){F={key:d};try{return m(d,p,{value:F,writable:!1,enumerable:!1,configurable:!1}),F}catch(D){return}}}function x(d){return d.prototype=null,Object.freeze(d)}function T(){!S&&"undefined"!=typeof console&&(S=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},9222:function(u,y,e){var r=e(7178);u.exports=function l(){var a={};return function(s){if(("object"!=typeof s||null===s)&&"function"!=typeof s)throw new Error("Weakmap-shim: Key must be object");var c=s.valueOf(a);return c&&c.identity===a?c:r(s,a)}}},7178:function(u){u.exports=function y(e,r){var l={identity:r},a=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(s){return s!==r?a.apply(this,arguments):l},writable:!0}),l}},4037:function(u,y,e){var r=e(9222);u.exports=function l(){var a=r();return{get:function(s,c){var f=a(s);return f.hasOwnProperty("value")?f.value:c},set:function(s,c){return a(s).value=c,this},has:function(s){return"value"in a(s)},delete:function(s){return delete a(s).value}}}},6183:function(u){"use strict";var r=function e(){return function(c,f,m,h,w,p){var o=c[0],v=m[0],M=[0],b=v;h|=0;var L=0,x=v;for(L=0;L<o;++L){var S=f[h]-p,T=f[h+b]-p;S>=0!=T>=0&&w.push(M[0]+.5+.5*(S+T)/(S-T)),h+=x,++M[0]}}};u.exports=function s(c){return function a(c){return function l(c){var f={};return function(h,w,p){var o=h.dtype,v=h.order,M=[o,v.join()].join(),b=f[M];return b||(f[M]=b=c([o,v])),b(h.shape.slice(0),h.data,h.stride,0|h.offset,w,p)}}(r.bind(void 0,c))}({funcName:c.funcName})}({funcName:"zeroCrossings"})},9584:function(u,y,e){"use strict";u.exports=function l(a,s){var c=[];return s=+s||0,r(a.hi(a.shape[0]-1),c,s),c};var r=e(6183)},6601:function(){}},i={};function P(u){var y=i[u];if(void 0!==y)return y.exports;var e=i[u]={id:u,loaded:!1,exports:{}};return g[u].call(e.exports,e,e.exports,P),e.loaded=!0,e.exports}return P.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(u){if("object"==typeof window)return window}}(),P.nmd=function(u){return u.paths=[],u.children||(u.children=[]),u},P(7386)}()},q.exports=P()},12856:function(q,W,t){"use strict";function A(Kt,Et){if(!(Kt instanceof Et))throw new TypeError("Cannot call a class as a function")}function g(Kt,Et){for(var St=0;St<Et.length;St++){var Dt=Et[St];Dt.enumerable=Dt.enumerable||!1,Dt.configurable=!0,"value"in Dt&&(Dt.writable=!0),Object.defineProperty(Kt,P(Dt.key),Dt)}}function P(Kt){var Et=function C(Kt,Et){if("object"!==c(Kt)||null===Kt)return Kt;var St=Kt[Symbol.toPrimitive];if(void 0!==St){var Dt=St.call(Kt,Et||"default");if("object"!==c(Dt))return Dt;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===Et?String:Number)(Kt)}(Kt,"string");return"symbol"===c(Et)?Et:String(Et)}function u(Kt,Et){if("function"!=typeof Et&&null!==Et)throw new TypeError("Super expression must either be null or a function");Kt.prototype=Object.create(Et&&Et.prototype,{constructor:{value:Kt,writable:!0,configurable:!0}}),Object.defineProperty(Kt,"prototype",{writable:!1}),Et&&y(Kt,Et)}function y(Kt,Et){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Dt,Ft){return Dt.__proto__=Ft,Dt})(Kt,Et)}function e(Kt){var Et=function a(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Kt){return!1}}();return function(){var Ft,Dt=s(Kt);if(Et){var Nt=s(this).constructor;Ft=Reflect.construct(Dt,arguments,Nt)}else Ft=Dt.apply(this,arguments);return r(this,Ft)}}function r(Kt,Et){if(Et&&("object"===c(Et)||"function"==typeof Et))return Et;if(void 0!==Et)throw new TypeError("Derived constructors may only return object or undefined");return l(Kt)}function l(Kt){if(void 0===Kt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt}function s(Kt){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(St){return St.__proto__||Object.getPrototypeOf(St)})(Kt)}function c(Kt){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Et){return typeof Et}:function(Et){return Et&&"function"==typeof Symbol&&Et.constructor===Symbol&&Et!==Symbol.prototype?"symbol":typeof Et})(Kt)}var f=t(95341),m=t(95280),h="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;W.Buffer=v,W.SlowBuffer=function D(Kt){return+Kt!=Kt&&(Kt=0),v.alloc(+Kt)},W.INSPECT_MAX_BYTES=50;var w=2147483647;function o(Kt){if(Kt>w)throw new RangeError('The value "'+Kt+'" is invalid for option "size"');var Et=new Uint8Array(Kt);return Object.setPrototypeOf(Et,v.prototype),Et}function v(Kt,Et,St){if("number"==typeof Kt){if("string"==typeof Et)throw new TypeError('The "string" argument must be of type string. Received type number');return x(Kt)}return M(Kt,Et,St)}function M(Kt,Et,St){if("string"==typeof Kt)return function S(Kt,Et){if(("string"!=typeof Et||""===Et)&&(Et="utf8"),!v.isEncoding(Et))throw new TypeError("Unknown encoding: "+Et);var St=0|N(Kt,Et),Dt=o(St),Ft=Dt.write(Kt,Et);return Ft!==St&&(Dt=Dt.slice(0,Ft)),Dt}(Kt,Et);if(ArrayBuffer.isView(Kt))return function n(Kt){if(ie(Kt,Uint8Array)){var Et=new Uint8Array(Kt);return E(Et.buffer,Et.byteOffset,Et.byteLength)}return T(Kt)}(Kt);if(null==Kt)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+c(Kt));if(ie(Kt,ArrayBuffer)||Kt&&ie(Kt.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(ie(Kt,SharedArrayBuffer)||Kt&&ie(Kt.buffer,SharedArrayBuffer)))return E(Kt,Et,St);if("number"==typeof Kt)throw new TypeError('The "value" argument must not be of type number. Received type number');var Dt=Kt.valueOf&&Kt.valueOf();if(null!=Dt&&Dt!==Kt)return v.from(Dt,Et,St);var Ft=function d(Kt){if(v.isBuffer(Kt)){var Et=0|F(Kt.length),St=o(Et);return 0===St.length||Kt.copy(St,0,0,Et),St}return void 0!==Kt.length?"number"!=typeof Kt.length||oe(Kt.length)?o(0):T(Kt):"Buffer"===Kt.type&&Array.isArray(Kt.data)?T(Kt.data):void 0}(Kt);if(Ft)return Ft;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof Kt[Symbol.toPrimitive])return v.from(Kt[Symbol.toPrimitive]("string"),Et,St);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+c(Kt))}function b(Kt){if("number"!=typeof Kt)throw new TypeError('"size" argument must be of type number');if(Kt<0)throw new RangeError('The value "'+Kt+'" is invalid for option "size"')}function x(Kt){return b(Kt),o(Kt<0?0:0|F(Kt))}function T(Kt){for(var Et=Kt.length<0?0:0|F(Kt.length),St=o(Et),Dt=0;Dt<Et;Dt+=1)St[Dt]=255&Kt[Dt];return St}function E(Kt,Et,St){if(Et<0||Kt.byteLength<Et)throw new RangeError('"offset" is outside of buffer bounds');if(Kt.byteLength<Et+(St||0))throw new RangeError('"length" is outside of buffer bounds');var Dt;return Dt=void 0===Et&&void 0===St?new Uint8Array(Kt):void 0===St?new Uint8Array(Kt,Et):new Uint8Array(Kt,Et,St),Object.setPrototypeOf(Dt,v.prototype),Dt}function F(Kt){if(Kt>=w)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");return 0|Kt}function N(Kt,Et){if(v.isBuffer(Kt))return Kt.length;if(ArrayBuffer.isView(Kt)||ie(Kt,ArrayBuffer))return Kt.byteLength;if("string"!=typeof Kt)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+c(Kt));var St=Kt.length,Dt=arguments.length>2&&!0===arguments[2];if(!Dt&&0===St)return 0;for(var Ft=!1;;)switch(Et){case"ascii":case"latin1":case"binary":return St;case"utf8":case"utf-8":return te(Kt).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*St;case"hex":return St>>>1;case"base64":return Ot(Kt).length;default:if(Ft)return Dt?-1:te(Kt).length;Et=(""+Et).toLowerCase(),Ft=!0}}function k(Kt,Et,St){var Dt=!1;if((void 0===Et||Et<0)&&(Et=0),Et>this.length||((void 0===St||St>this.length)&&(St=this.length),St<=0)||(St>>>=0)<=(Et>>>=0))return"";for(Kt||(Kt="utf8");;)switch(Kt){case"hex":return at(this,Et,St);case"utf8":case"utf-8":return Q(this,Et,St);case"ascii":return G(this,Et,St);case"latin1":case"binary":return K(this,Et,St);case"base64":return ut(this,Et,St);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,Et,St);default:if(Dt)throw new TypeError("Unknown encoding: "+Kt);Kt=(Kt+"").toLowerCase(),Dt=!0}}function O(Kt,Et,St){var Dt=Kt[Et];Kt[Et]=Kt[St],Kt[St]=Dt}function B(Kt,Et,St,Dt,Ft){if(0===Kt.length)return-1;if("string"==typeof St?(Dt=St,St=0):St>2147483647?St=2147483647:St<-2147483648&&(St=-2147483648),oe(St=+St)&&(St=Ft?0:Kt.length-1),St<0&&(St=Kt.length+St),St>=Kt.length){if(Ft)return-1;St=Kt.length-1}else if(St<0){if(!Ft)return-1;St=0}if("string"==typeof Et&&(Et=v.from(Et,Dt)),v.isBuffer(Et))return 0===Et.length?-1:z(Kt,Et,St,Dt,Ft);if("number"==typeof Et)return Et&=255,"function"==typeof Uint8Array.prototype.indexOf?Ft?Uint8Array.prototype.indexOf.call(Kt,Et,St):Uint8Array.prototype.lastIndexOf.call(Kt,Et,St):z(Kt,[Et],St,Dt,Ft);throw new TypeError("val must be string, number or Buffer")}function z(Kt,Et,St,Dt,Ft){var pt,Nt=1,Rt=Kt.length,wt=Et.length;if(void 0!==Dt&&("ucs2"===(Dt=String(Dt).toLowerCase())||"ucs-2"===Dt||"utf16le"===Dt||"utf-16le"===Dt)){if(Kt.length<2||Et.length<2)return-1;Nt=2,Rt/=2,wt/=2,St/=2}function ft(se,Be){return 1===Nt?se[Be]:se.readUInt16BE(Be*Nt)}if(Ft){var kt=-1;for(pt=St;pt<Rt;pt++)if(ft(Kt,pt)===ft(Et,-1===kt?0:pt-kt)){if(-1===kt&&(kt=pt),pt-kt+1===wt)return kt*Nt}else-1!==kt&&(pt-=pt-kt),kt=-1}else for(St+wt>Rt&&(St=Rt-wt),pt=St;pt>=0;pt--){for(var Zt=!0,ee=0;ee<wt;ee++)if(ft(Kt,pt+ee)!==ft(Et,ee)){Zt=!1;break}if(Zt)return pt}return-1}function U(Kt,Et,St,Dt){St=Number(St)||0;var Ft=Kt.length-St;Dt?(Dt=Number(Dt))>Ft&&(Dt=Ft):Dt=Ft;var Rt,Nt=Et.length;for(Dt>Nt/2&&(Dt=Nt/2),Rt=0;Rt<Dt;++Rt){var wt=parseInt(Et.substr(2*Rt,2),16);if(oe(wt))return Rt;Kt[St+Rt]=wt}return Rt}function H(Kt,Et,St,Dt){return qt(te(Et,Kt.length-St),Kt,St,Dt)}function J(Kt,Et,St,Dt){return qt(function Qt(Kt){for(var Et=[],St=0;St<Kt.length;++St)Et.push(255&Kt.charCodeAt(St));return Et}(Et),Kt,St,Dt)}function nt(Kt,Et,St,Dt){return qt(Ot(Et),Kt,St,Dt)}function it(Kt,Et,St,Dt){return qt(function Bt(Kt,Et){for(var St,Dt,Nt=[],Rt=0;Rt<Kt.length&&!((Et-=2)<0);++Rt)Dt=(St=Kt.charCodeAt(Rt))>>8,Nt.push(St%256),Nt.push(Dt);return Nt}(Et,Kt.length-St),Kt,St,Dt)}function ut(Kt,Et,St){return f.fromByteArray(0===Et&&St===Kt.length?Kt:Kt.slice(Et,St))}function Q(Kt,Et,St){St=Math.min(Kt.length,St);for(var Dt=[],Ft=Et;Ft<St;){var Nt=Kt[Ft],Rt=null,wt=Nt>239?4:Nt>223?3:Nt>191?2:1;if(Ft+wt<=St){var ft=void 0,pt=void 0,kt=void 0,Zt=void 0;switch(wt){case 1:Nt<128&&(Rt=Nt);break;case 2:128==(192&(ft=Kt[Ft+1]))&&(Zt=(31&Nt)<<6|63&ft)>127&&(Rt=Zt);break;case 3:pt=Kt[Ft+2],128==(192&(ft=Kt[Ft+1]))&&128==(192&pt)&&(Zt=(15&Nt)<<12|(63&ft)<<6|63&pt)>2047&&(Zt<55296||Zt>57343)&&(Rt=Zt);break;case 4:pt=Kt[Ft+2],kt=Kt[Ft+3],128==(192&(ft=Kt[Ft+1]))&&128==(192&pt)&&128==(192&kt)&&(Zt=(15&Nt)<<18|(63&ft)<<12|(63&pt)<<6|63&kt)>65535&&Zt<1114112&&(Rt=Zt)}}null===Rt?(Rt=65533,wt=1):Rt>65535&&(Dt.push((Rt-=65536)>>>10&1023|55296),Rt=56320|1023&Rt),Dt.push(Rt),Ft+=wt}return function Z(Kt){var Et=Kt.length;if(Et<=j)return String.fromCharCode.apply(String,Kt);for(var St="",Dt=0;Dt<Et;)St+=String.fromCharCode.apply(String,Kt.slice(Dt,Dt+=j));return St}(Dt)}W.kMaxLength=w,!(v.TYPED_ARRAY_SUPPORT=function p(){try{var Kt=new Uint8Array(1),Et={foo:function(){return 42}};return Object.setPrototypeOf(Et,Uint8Array.prototype),Object.setPrototypeOf(Kt,Et),42===Kt.foo()}catch(St){return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(v.prototype,"parent",{enumerable:!0,get:function(){if(v.isBuffer(this))return this.buffer}}),Object.defineProperty(v.prototype,"offset",{enumerable:!0,get:function(){if(v.isBuffer(this))return this.byteOffset}}),v.poolSize=8192,v.from=function(Kt,Et,St){return M(Kt,Et,St)},Object.setPrototypeOf(v.prototype,Uint8Array.prototype),Object.setPrototypeOf(v,Uint8Array),v.alloc=function(Kt,Et,St){return function L(Kt,Et,St){return b(Kt),Kt<=0?o(Kt):void 0!==Et?"string"==typeof St?o(Kt).fill(Et,St):o(Kt).fill(Et):o(Kt)}(Kt,Et,St)},v.allocUnsafe=function(Kt){return x(Kt)},v.allocUnsafeSlow=function(Kt){return x(Kt)},v.isBuffer=function(Et){return null!=Et&&!0===Et._isBuffer&&Et!==v.prototype},v.compare=function(Et,St){if(ie(Et,Uint8Array)&&(Et=v.from(Et,Et.offset,Et.byteLength)),ie(St,Uint8Array)&&(St=v.from(St,St.offset,St.byteLength)),!v.isBuffer(Et)||!v.isBuffer(St))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Et===St)return 0;for(var Dt=Et.length,Ft=St.length,Nt=0,Rt=Math.min(Dt,Ft);Nt<Rt;++Nt)if(Et[Nt]!==St[Nt]){Dt=Et[Nt],Ft=St[Nt];break}return Dt<Ft?-1:Ft<Dt?1:0},v.isEncoding=function(Et){switch(String(Et).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.concat=function(Et,St){if(!Array.isArray(Et))throw new TypeError('"list" argument must be an Array of Buffers');if(0===Et.length)return v.alloc(0);var Dt;if(void 0===St)for(St=0,Dt=0;Dt<Et.length;++Dt)St+=Et[Dt].length;var Ft=v.allocUnsafe(St),Nt=0;for(Dt=0;Dt<Et.length;++Dt){var Rt=Et[Dt];if(ie(Rt,Uint8Array))Nt+Rt.length>Ft.length?(v.isBuffer(Rt)||(Rt=v.from(Rt)),Rt.copy(Ft,Nt)):Uint8Array.prototype.set.call(Ft,Rt,Nt);else{if(!v.isBuffer(Rt))throw new TypeError('"list" argument must be an Array of Buffers');Rt.copy(Ft,Nt)}Nt+=Rt.length}return Ft},v.byteLength=N,v.prototype._isBuffer=!0,v.prototype.swap16=function(){var Et=this.length;if(Et%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var St=0;St<Et;St+=2)O(this,St,St+1);return this},v.prototype.swap32=function(){var Et=this.length;if(Et%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var St=0;St<Et;St+=4)O(this,St,St+3),O(this,St+1,St+2);return this},v.prototype.swap64=function(){var Et=this.length;if(Et%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var St=0;St<Et;St+=8)O(this,St,St+7),O(this,St+1,St+6),O(this,St+2,St+5),O(this,St+3,St+4);return this},v.prototype.toLocaleString=v.prototype.toString=function(){var Et=this.length;return 0===Et?"":0===arguments.length?Q(this,0,Et):k.apply(this,arguments)},v.prototype.equals=function(Et){if(!v.isBuffer(Et))throw new TypeError("Argument must be a Buffer");return this===Et||0===v.compare(this,Et)},v.prototype.inspect=function(){var Et="",St=W.INSPECT_MAX_BYTES;return Et=this.toString("hex",0,St).replace(/(.{2})/g,"$1 ").trim(),this.length>St&&(Et+=" ... "),"<Buffer "+Et+">"},h&&(v.prototype[h]=v.prototype.inspect),v.prototype.compare=function(Et,St,Dt,Ft,Nt){if(ie(Et,Uint8Array)&&(Et=v.from(Et,Et.offset,Et.byteLength)),!v.isBuffer(Et))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+c(Et));if(void 0===St&&(St=0),void 0===Dt&&(Dt=Et?Et.length:0),void 0===Ft&&(Ft=0),void 0===Nt&&(Nt=this.length),St<0||Dt>Et.length||Ft<0||Nt>this.length)throw new RangeError("out of range index");if(Ft>=Nt&&St>=Dt)return 0;if(Ft>=Nt)return-1;if(St>=Dt)return 1;if(this===Et)return 0;for(var Rt=(Nt>>>=0)-(Ft>>>=0),wt=(Dt>>>=0)-(St>>>=0),ft=Math.min(Rt,wt),pt=this.slice(Ft,Nt),kt=Et.slice(St,Dt),Zt=0;Zt<ft;++Zt)if(pt[Zt]!==kt[Zt]){Rt=pt[Zt],wt=kt[Zt];break}return Rt<wt?-1:wt<Rt?1:0},v.prototype.includes=function(Et,St,Dt){return-1!==this.indexOf(Et,St,Dt)},v.prototype.indexOf=function(Et,St,Dt){return B(this,Et,St,Dt,!0)},v.prototype.lastIndexOf=function(Et,St,Dt){return B(this,Et,St,Dt,!1)},v.prototype.write=function(Et,St,Dt,Ft){if(void 0===St)Ft="utf8",Dt=this.length,St=0;else if(void 0===Dt&&"string"==typeof St)Ft=St,Dt=this.length,St=0;else{if(!isFinite(St))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");St>>>=0,isFinite(Dt)?(Dt>>>=0,void 0===Ft&&(Ft="utf8")):(Ft=Dt,Dt=void 0)}var Nt=this.length-St;if((void 0===Dt||Dt>Nt)&&(Dt=Nt),Et.length>0&&(Dt<0||St<0)||St>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ft||(Ft="utf8");for(var Rt=!1;;)switch(Ft){case"hex":return U(this,Et,St,Dt);case"utf8":case"utf-8":return H(this,Et,St,Dt);case"ascii":case"latin1":case"binary":return J(this,Et,St,Dt);case"base64":return nt(this,Et,St,Dt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return it(this,Et,St,Dt);default:if(Rt)throw new TypeError("Unknown encoding: "+Ft);Ft=(""+Ft).toLowerCase(),Rt=!0}},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var j=4096;function G(Kt,Et,St){var Dt="";St=Math.min(Kt.length,St);for(var Ft=Et;Ft<St;++Ft)Dt+=String.fromCharCode(127&Kt[Ft]);return Dt}function K(Kt,Et,St){var Dt="";St=Math.min(Kt.length,St);for(var Ft=Et;Ft<St;++Ft)Dt+=String.fromCharCode(Kt[Ft]);return Dt}function at(Kt,Et,St){var Dt=Kt.length;(!Et||Et<0)&&(Et=0),(!St||St<0||St>Dt)&&(St=Dt);for(var Ft="",Nt=Et;Nt<St;++Nt)Ft+=pe[Kt[Nt]];return Ft}function $(Kt,Et,St){for(var Dt=Kt.slice(Et,St),Ft="",Nt=0;Nt<Dt.length-1;Nt+=2)Ft+=String.fromCharCode(Dt[Nt]+256*Dt[Nt+1]);return Ft}function X(Kt,Et,St){if(Kt%1!=0||Kt<0)throw new RangeError("offset is not uint");if(Kt+Et>St)throw new RangeError("Trying to access beyond buffer length")}function rt(Kt,Et,St,Dt,Ft,Nt){if(!v.isBuffer(Kt))throw new TypeError('"buffer" argument must be a Buffer instance');if(Et>Ft||Et<Nt)throw new RangeError('"value" argument is out of bounds');if(St+Dt>Kt.length)throw new RangeError("Index out of range")}function et(Kt,Et,St,Dt,Ft){At(Et,Dt,Ft,Kt,St,7);var Nt=Number(Et&BigInt(4294967295));Kt[St++]=Nt,Kt[St++]=Nt>>=8,Kt[St++]=Nt>>=8,Kt[St++]=Nt>>=8;var Rt=Number(Et>>BigInt(32)&BigInt(4294967295));return Kt[St++]=Rt,Kt[St++]=Rt>>=8,Kt[St++]=Rt>>=8,Kt[St++]=Rt>>=8,St}function st(Kt,Et,St,Dt,Ft){At(Et,Dt,Ft,Kt,St,7);var Nt=Number(Et&BigInt(4294967295));Kt[St+7]=Nt,Kt[St+6]=Nt>>=8,Kt[St+5]=Nt>>=8,Kt[St+4]=Nt>>=8;var Rt=Number(Et>>BigInt(32)&BigInt(4294967295));return Kt[St+3]=Rt,Kt[St+2]=Rt>>=8,Kt[St+1]=Rt>>=8,Kt[St]=Rt>>=8,St+8}function dt(Kt,Et,St,Dt,Ft,Nt){if(St+Dt>Kt.length)throw new RangeError("Index out of range");if(St<0)throw new RangeError("Index out of range")}function bt(Kt,Et,St,Dt,Ft){return Et=+Et,St>>>=0,Ft||dt(Kt,0,St,4),m.write(Kt,Et,St,Dt,23,4),St+4}function gt(Kt,Et,St,Dt,Ft){return Et=+Et,St>>>=0,Ft||dt(Kt,0,St,8),m.write(Kt,Et,St,Dt,52,8),St+8}v.prototype.slice=function(Et,St){var Dt=this.length;(Et=~~Et)<0?(Et+=Dt)<0&&(Et=0):Et>Dt&&(Et=Dt),(St=void 0===St?Dt:~~St)<0?(St+=Dt)<0&&(St=0):St>Dt&&(St=Dt),St<Et&&(St=Et);var Ft=this.subarray(Et,St);return Object.setPrototypeOf(Ft,v.prototype),Ft},v.prototype.readUintLE=v.prototype.readUIntLE=function(Et,St,Dt){Et>>>=0,St>>>=0,Dt||X(Et,St,this.length);for(var Ft=this[Et],Nt=1,Rt=0;++Rt<St&&(Nt*=256);)Ft+=this[Et+Rt]*Nt;return Ft},v.prototype.readUintBE=v.prototype.readUIntBE=function(Et,St,Dt){Et>>>=0,St>>>=0,Dt||X(Et,St,this.length);for(var Ft=this[Et+--St],Nt=1;St>0&&(Nt*=256);)Ft+=this[Et+--St]*Nt;return Ft},v.prototype.readUint8=v.prototype.readUInt8=function(Et,St){return Et>>>=0,St||X(Et,1,this.length),this[Et]},v.prototype.readUint16LE=v.prototype.readUInt16LE=function(Et,St){return Et>>>=0,St||X(Et,2,this.length),this[Et]|this[Et+1]<<8},v.prototype.readUint16BE=v.prototype.readUInt16BE=function(Et,St){return Et>>>=0,St||X(Et,2,this.length),this[Et]<<8|this[Et+1]},v.prototype.readUint32LE=v.prototype.readUInt32LE=function(Et,St){return Et>>>=0,St||X(Et,4,this.length),(this[Et]|this[Et+1]<<8|this[Et+2]<<16)+16777216*this[Et+3]},v.prototype.readUint32BE=v.prototype.readUInt32BE=function(Et,St){return Et>>>=0,St||X(Et,4,this.length),16777216*this[Et]+(this[Et+1]<<16|this[Et+2]<<8|this[Et+3])},v.prototype.readBigUInt64LE=de(function(Et){Gt(Et>>>=0,"offset");var St=this[Et],Dt=this[Et+7];(void 0===St||void 0===Dt)&&Wt(Et,this.length-8);var Ft=St+this[++Et]*Math.pow(2,8)+this[++Et]*Math.pow(2,16)+this[++Et]*Math.pow(2,24),Nt=this[++Et]+this[++Et]*Math.pow(2,8)+this[++Et]*Math.pow(2,16)+Dt*Math.pow(2,24);return BigInt(Ft)+(BigInt(Nt)<<BigInt(32))}),v.prototype.readBigUInt64BE=de(function(Et){Gt(Et>>>=0,"offset");var St=this[Et],Dt=this[Et+7];(void 0===St||void 0===Dt)&&Wt(Et,this.length-8);var Ft=St*Math.pow(2,24)+this[++Et]*Math.pow(2,16)+this[++Et]*Math.pow(2,8)+this[++Et],Nt=this[++Et]*Math.pow(2,24)+this[++Et]*Math.pow(2,16)+this[++Et]*Math.pow(2,8)+Dt;return(BigInt(Ft)<<BigInt(32))+BigInt(Nt)}),v.prototype.readIntLE=function(Et,St,Dt){Et>>>=0,St>>>=0,Dt||X(Et,St,this.length);for(var Ft=this[Et],Nt=1,Rt=0;++Rt<St&&(Nt*=256);)Ft+=this[Et+Rt]*Nt;return Ft>=(Nt*=128)&&(Ft-=Math.pow(2,8*St)),Ft},v.prototype.readIntBE=function(Et,St,Dt){Et>>>=0,St>>>=0,Dt||X(Et,St,this.length);for(var Ft=St,Nt=1,Rt=this[Et+--Ft];Ft>0&&(Nt*=256);)Rt+=this[Et+--Ft]*Nt;return Rt>=(Nt*=128)&&(Rt-=Math.pow(2,8*St)),Rt},v.prototype.readInt8=function(Et,St){return Et>>>=0,St||X(Et,1,this.length),128&this[Et]?-1*(255-this[Et]+1):this[Et]},v.prototype.readInt16LE=function(Et,St){Et>>>=0,St||X(Et,2,this.length);var Dt=this[Et]|this[Et+1]<<8;return 32768&Dt?4294901760|Dt:Dt},v.prototype.readInt16BE=function(Et,St){Et>>>=0,St||X(Et,2,this.length);var Dt=this[Et+1]|this[Et]<<8;return 32768&Dt?4294901760|Dt:Dt},v.prototype.readInt32LE=function(Et,St){return Et>>>=0,St||X(Et,4,this.length),this[Et]|this[Et+1]<<8|this[Et+2]<<16|this[Et+3]<<24},v.prototype.readInt32BE=function(Et,St){return Et>>>=0,St||X(Et,4,this.length),this[Et]<<24|this[Et+1]<<16|this[Et+2]<<8|this[Et+3]},v.prototype.readBigInt64LE=de(function(Et){Gt(Et>>>=0,"offset");var St=this[Et],Dt=this[Et+7];(void 0===St||void 0===Dt)&&Wt(Et,this.length-8);var Ft=this[Et+4]+this[Et+5]*Math.pow(2,8)+this[Et+6]*Math.pow(2,16)+(Dt<<24);return(BigInt(Ft)<<BigInt(32))+BigInt(St+this[++Et]*Math.pow(2,8)+this[++Et]*Math.pow(2,16)+this[++Et]*Math.pow(2,24))}),v.prototype.readBigInt64BE=de(function(Et){Gt(Et>>>=0,"offset");var St=this[Et],Dt=this[Et+7];(void 0===St||void 0===Dt)&&Wt(Et,this.length-8);var Ft=(St<<24)+this[++Et]*Math.pow(2,16)+this[++Et]*Math.pow(2,8)+this[++Et];return(BigInt(Ft)<<BigInt(32))+BigInt(this[++Et]*Math.pow(2,24)+this[++Et]*Math.pow(2,16)+this[++Et]*Math.pow(2,8)+Dt)}),v.prototype.readFloatLE=function(Et,St){return Et>>>=0,St||X(Et,4,this.length),m.read(this,Et,!0,23,4)},v.prototype.readFloatBE=function(Et,St){return Et>>>=0,St||X(Et,4,this.length),m.read(this,Et,!1,23,4)},v.prototype.readDoubleLE=function(Et,St){return Et>>>=0,St||X(Et,8,this.length),m.read(this,Et,!0,52,8)},v.prototype.readDoubleBE=function(Et,St){return Et>>>=0,St||X(Et,8,this.length),m.read(this,Et,!1,52,8)},v.prototype.writeUintLE=v.prototype.writeUIntLE=function(Et,St,Dt,Ft){Et=+Et,St>>>=0,Dt>>>=0,Ft||rt(this,Et,St,Dt,Math.pow(2,8*Dt)-1,0);var Rt=1,wt=0;for(this[St]=255&Et;++wt<Dt&&(Rt*=256);)this[St+wt]=Et/Rt&255;return St+Dt},v.prototype.writeUintBE=v.prototype.writeUIntBE=function(Et,St,Dt,Ft){Et=+Et,St>>>=0,Dt>>>=0,Ft||rt(this,Et,St,Dt,Math.pow(2,8*Dt)-1,0);var Rt=Dt-1,wt=1;for(this[St+Rt]=255&Et;--Rt>=0&&(wt*=256);)this[St+Rt]=Et/wt&255;return St+Dt},v.prototype.writeUint8=v.prototype.writeUInt8=function(Et,St,Dt){return Et=+Et,St>>>=0,Dt||rt(this,Et,St,1,255,0),this[St]=255&Et,St+1},v.prototype.writeUint16LE=v.prototype.writeUInt16LE=function(Et,St,Dt){return Et=+Et,St>>>=0,Dt||rt(this,Et,St,2,65535,0),this[St]=255&Et,this[St+1]=Et>>>8,St+2},v.prototype.writeUint16BE=v.prototype.writeUInt16BE=function(Et,St,Dt){return Et=+Et,St>>>=0,Dt||rt(this,Et,St,2,65535,0),this[St]=Et>>>8,this[St+1]=255&Et,St+2},v.prototype.writeUint32LE=v.prototype.writeUInt32LE=function(Et,St,Dt){return Et=+Et,St>>>=0,Dt||rt(this,Et,St,4,4294967295,0),this[St+3]=Et>>>24,this[St+2]=Et>>>16,this[St+1]=Et>>>8,this[St]=255&Et,St+4},v.prototype.writeUint32BE=v.prototype.writeUInt32BE=function(Et,St,Dt){return Et=+Et,St>>>=0,Dt||rt(this,Et,St,4,4294967295,0),this[St]=Et>>>24,this[St+1]=Et>>>16,this[St+2]=Et>>>8,this[St+3]=255&Et,St+4},v.prototype.writeBigUInt64LE=de(function(Et){return et(this,Et,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),v.prototype.writeBigUInt64BE=de(function(Et){return st(this,Et,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),v.prototype.writeIntLE=function(Et,St,Dt,Ft){if(Et=+Et,St>>>=0,!Ft){var Nt=Math.pow(2,8*Dt-1);rt(this,Et,St,Dt,Nt-1,-Nt)}var Rt=0,wt=1,ft=0;for(this[St]=255&Et;++Rt<Dt&&(wt*=256);)Et<0&&0===ft&&0!==this[St+Rt-1]&&(ft=1),this[St+Rt]=(Et/wt>>0)-ft&255;return St+Dt},v.prototype.writeIntBE=function(Et,St,Dt,Ft){if(Et=+Et,St>>>=0,!Ft){var Nt=Math.pow(2,8*Dt-1);rt(this,Et,St,Dt,Nt-1,-Nt)}var Rt=Dt-1,wt=1,ft=0;for(this[St+Rt]=255&Et;--Rt>=0&&(wt*=256);)Et<0&&0===ft&&0!==this[St+Rt+1]&&(ft=1),this[St+Rt]=(Et/wt>>0)-ft&255;return St+Dt},v.prototype.writeInt8=function(Et,St,Dt){return Et=+Et,St>>>=0,Dt||rt(this,Et,St,1,127,-128),Et<0&&(Et=255+Et+1),this[St]=255&Et,St+1},v.prototype.writeInt16LE=function(Et,St,Dt){return Et=+Et,St>>>=0,Dt||rt(this,Et,St,2,32767,-32768),this[St]=255&Et,this[St+1]=Et>>>8,St+2},v.prototype.writeInt16BE=function(Et,St,Dt){return Et=+Et,St>>>=0,Dt||rt(this,Et,St,2,32767,-32768),this[St]=Et>>>8,this[St+1]=255&Et,St+2},v.prototype.writeInt32LE=function(Et,St,Dt){return Et=+Et,St>>>=0,Dt||rt(this,Et,St,4,2147483647,-2147483648),this[St]=255&Et,this[St+1]=Et>>>8,this[St+2]=Et>>>16,this[St+3]=Et>>>24,St+4},v.prototype.writeInt32BE=function(Et,St,Dt){return Et=+Et,St>>>=0,Dt||rt(this,Et,St,4,2147483647,-2147483648),Et<0&&(Et=4294967295+Et+1),this[St]=Et>>>24,this[St+1]=Et>>>16,this[St+2]=Et>>>8,this[St+3]=255&Et,St+4},v.prototype.writeBigInt64LE=de(function(Et){return et(this,Et,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),v.prototype.writeBigInt64BE=de(function(Et){return st(this,Et,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),v.prototype.writeFloatLE=function(Et,St,Dt){return bt(this,Et,St,!0,Dt)},v.prototype.writeFloatBE=function(Et,St,Dt){return bt(this,Et,St,!1,Dt)},v.prototype.writeDoubleLE=function(Et,St,Dt){return gt(this,Et,St,!0,Dt)},v.prototype.writeDoubleBE=function(Et,St,Dt){return gt(this,Et,St,!1,Dt)},v.prototype.copy=function(Et,St,Dt,Ft){if(!v.isBuffer(Et))throw new TypeError("argument should be a Buffer");if(Dt||(Dt=0),!Ft&&0!==Ft&&(Ft=this.length),St>=Et.length&&(St=Et.length),St||(St=0),Ft>0&&Ft<Dt&&(Ft=Dt),Ft===Dt||0===Et.length||0===this.length)return 0;if(St<0)throw new RangeError("targetStart out of bounds");if(Dt<0||Dt>=this.length)throw new RangeError("Index out of range");if(Ft<0)throw new RangeError("sourceEnd out of bounds");Ft>this.length&&(Ft=this.length),Et.length-St<Ft-Dt&&(Ft=Et.length-St+Dt);var Nt=Ft-Dt;return this===Et&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(St,Dt,Ft):Uint8Array.prototype.set.call(Et,this.subarray(Dt,Ft),St),Nt},v.prototype.fill=function(Et,St,Dt,Ft){if("string"==typeof Et){if("string"==typeof St?(Ft=St,St=0,Dt=this.length):"string"==typeof Dt&&(Ft=Dt,Dt=this.length),void 0!==Ft&&"string"!=typeof Ft)throw new TypeError("encoding must be a string");if("string"==typeof Ft&&!v.isEncoding(Ft))throw new TypeError("Unknown encoding: "+Ft);if(1===Et.length){var Nt=Et.charCodeAt(0);("utf8"===Ft&&Nt<128||"latin1"===Ft)&&(Et=Nt)}}else"number"==typeof Et?Et&=255:"boolean"==typeof Et&&(Et=Number(Et));if(St<0||this.length<St||this.length<Dt)throw new RangeError("Out of range index");if(Dt<=St)return this;var Rt;if(St>>>=0,Dt=void 0===Dt?this.length:Dt>>>0,Et||(Et=0),"number"==typeof Et)for(Rt=St;Rt<Dt;++Rt)this[Rt]=Et;else{var wt=v.isBuffer(Et)?Et:v.from(Et,Ft),ft=wt.length;if(0===ft)throw new TypeError('The value "'+Et+'" is invalid for argument "value"');for(Rt=0;Rt<Dt-St;++Rt)this[Rt+St]=wt[Rt%ft]}return this};var Lt={};function It(Kt,Et,St){Lt[Kt]=function(Dt){u(Nt,Dt);var Ft=e(Nt);function Nt(){var Rt;return A(this,Nt),Rt=Ft.call(this),Object.defineProperty(l(Rt),"message",{value:Et.apply(l(Rt),arguments),writable:!0,configurable:!0}),Rt.name="".concat(Rt.name," [").concat(Kt,"]"),delete Rt.name,Rt}return function i(Kt,Et,St){return Et&&g(Kt.prototype,Et),St&&g(Kt,St),Object.defineProperty(Kt,"prototype",{writable:!1}),Kt}(Nt,[{key:"code",get:function(){return Kt},set:function(wt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:wt,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(Kt,"]: ").concat(this.message)}}]),Nt}(St)}function Mt(Kt){for(var Et="",St=Kt.length,Dt="-"===Kt[0]?1:0;St>=Dt+4;St-=3)Et="_".concat(Kt.slice(St-3,St)).concat(Et);return"".concat(Kt.slice(0,St)).concat(Et)}function At(Kt,Et,St,Dt,Ft,Nt){if(Kt>St||Kt<Et){var wt,Rt="bigint"==typeof Et?"n":"";throw wt=Nt>3?0===Et||Et===BigInt(0)?">= 0".concat(Rt," and < 2").concat(Rt," ** ").concat(8*(Nt+1)).concat(Rt):">= -(2".concat(Rt," ** ").concat(8*(Nt+1)-1).concat(Rt,") and < 2 ** ")+"".concat(8*(Nt+1)-1).concat(Rt):">= ".concat(Et).concat(Rt," and <= ").concat(St).concat(Rt),new Lt.ERR_OUT_OF_RANGE("value",wt,Kt)}!function xt(Kt,Et,St){Gt(Et,"offset"),(void 0===Kt[Et]||void 0===Kt[Et+St])&&Wt(Et,Kt.length-(St+1))}(Dt,Ft,Nt)}function Gt(Kt,Et){if("number"!=typeof Kt)throw new Lt.ERR_INVALID_ARG_TYPE(Et,"number",Kt)}function Wt(Kt,Et,St){throw Math.floor(Kt)!==Kt?(Gt(Kt,St),new Lt.ERR_OUT_OF_RANGE(St||"offset","an integer",Kt)):Et<0?new Lt.ERR_BUFFER_OUT_OF_BOUNDS:new Lt.ERR_OUT_OF_RANGE(St||"offset",">= ".concat(St?1:0," and <= ").concat(Et),Kt)}It("ERR_BUFFER_OUT_OF_BOUNDS",function(Kt){return Kt?"".concat(Kt," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),It("ERR_INVALID_ARG_TYPE",function(Kt,Et){return'The "'.concat(Kt,'" argument must be of type number. Received type ').concat(c(Et))},TypeError),It("ERR_OUT_OF_RANGE",function(Kt,Et,St){var Dt='The value of "'.concat(Kt,'" is out of range.'),Ft=St;return Number.isInteger(St)&&Math.abs(St)>Math.pow(2,32)?Ft=Mt(String(St)):"bigint"==typeof St&&(Ft=String(St),(St>Math.pow(BigInt(2),BigInt(32))||St<-Math.pow(BigInt(2),BigInt(32)))&&(Ft=Mt(Ft)),Ft+="n"),Dt+" It must be ".concat(Et,". Received ").concat(Ft)},RangeError);var Pt=/[^+/0-9A-Za-z-_]/g;function te(Kt,Et){Et=Et||1/0;for(var St,Dt=Kt.length,Ft=null,Nt=[],Rt=0;Rt<Dt;++Rt){if((St=Kt.charCodeAt(Rt))>55295&&St<57344){if(!Ft){if(St>56319){(Et-=3)>-1&&Nt.push(239,191,189);continue}if(Rt+1===Dt){(Et-=3)>-1&&Nt.push(239,191,189);continue}Ft=St;continue}if(St<56320){(Et-=3)>-1&&Nt.push(239,191,189),Ft=St;continue}St=65536+(Ft-55296<<10|St-56320)}else Ft&&(Et-=3)>-1&&Nt.push(239,191,189);if(Ft=null,St<128){if((Et-=1)<0)break;Nt.push(St)}else if(St<2048){if((Et-=2)<0)break;Nt.push(St>>6|192,63&St|128)}else if(St<65536){if((Et-=3)<0)break;Nt.push(St>>12|224,St>>6&63|128,63&St|128)}else{if(!(St<1114112))throw new Error("Invalid code point");if((Et-=4)<0)break;Nt.push(St>>18|240,St>>12&63|128,St>>6&63|128,63&St|128)}}return Nt}function Ot(Kt){return f.toByteArray(function Vt(Kt){if((Kt=(Kt=Kt.split("=")[0]).trim().replace(Pt,"")).length<2)return"";for(;Kt.length%4!=0;)Kt+="=";return Kt}(Kt))}function qt(Kt,Et,St,Dt){var Ft;for(Ft=0;Ft<Dt&&!(Ft+St>=Et.length||Ft>=Kt.length);++Ft)Et[Ft+St]=Kt[Ft];return Ft}function ie(Kt,Et){return Kt instanceof Et||null!=Kt&&null!=Kt.constructor&&null!=Kt.constructor.name&&Kt.constructor.name===Et.name}function oe(Kt){return Kt!=Kt}var pe=function(){for(var Kt="0123456789abcdef",Et=new Array(256),St=0;St<16;++St)for(var Dt=16*St,Ft=0;Ft<16;++Ft)Et[Dt+Ft]=Kt[St]+Kt[Ft];return Et}();function de(Kt){return"undefined"==typeof BigInt?Fe:Kt}function Fe(){throw new Error("BigInt not supported")}},35791:function(q){"use strict";q.exports=g,q.exports.isMobile=g,q.exports.default=g;var W=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/CrOS/,A=/android|ipad|playbook|silk/i;function g(i){i||(i={});var P=i.ua;if(!P&&"undefined"!=typeof navigator&&(P=navigator.userAgent),P&&P.headers&&"string"==typeof P.headers["user-agent"]&&(P=P.headers["user-agent"]),"string"!=typeof P)return!1;var C=W.test(P)&&!t.test(P)||!!i.tablet&&A.test(P);return!C&&i.tablet&&i.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==P.indexOf("Macintosh")&&-1!==P.indexOf("Safari")&&(C=!0),C}},86781:function(q,W,t){"use strict";t.r(W),t.d(W,{sankeyCenter:function(){return l},sankeyCircular:function(){return E},sankeyJustify:function(){return r},sankeyLeft:function(){return y},sankeyRight:function(){return e}});var A=t(33064),g=t(15140),i=t(45879),P=t(2502),C=t.n(P);function u(gt){return gt.target.depth}function y(gt){return gt.depth}function e(gt,Lt){return Lt-1-gt.height}function r(gt,Lt){return gt.sourceLinks.length?gt.depth:Lt-1}function l(gt){return gt.targetLinks.length?gt.depth:gt.sourceLinks.length?(0,A.VV)(gt.sourceLinks,u)-1:0}function a(gt){return function(){return gt}}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(gt){return typeof gt}:function(gt){return gt&&"function"==typeof Symbol&&gt.constructor===Symbol&&gt!==Symbol.prototype?"symbol":typeof gt};function c(gt,Lt){return m(gt.source,Lt.source)||gt.index-Lt.index}function f(gt,Lt){return m(gt.target,Lt.target)||gt.index-Lt.index}function m(gt,Lt){return gt.partOfCycle===Lt.partOfCycle?gt.y0-Lt.y0:"top"===gt.circularLinkType||"bottom"===Lt.circularLinkType?-1:1}function h(gt){return gt.value}function w(gt){return(gt.y0+gt.y1)/2}function p(gt){return w(gt.source)}function o(gt){return w(gt.target)}function v(gt){return gt.index}function M(gt){return gt.nodes}function b(gt){return gt.links}function L(gt,Lt){var It=gt.get(Lt);if(!It)throw new Error("missing: "+Lt);return It}function x(gt,Lt){return Lt(gt)}var S=25,T=10;function E(){var At,Bt,gt=0,Lt=0,It=1,Mt=1,xt=24,Gt=v,Wt=r,Pt=M,Vt=b,te=32,Qt=2,Ot=null;function qt(){var St={nodes:Pt.apply(null,arguments),links:Vt.apply(null,arguments)};ie(St),d(St,0,Ot),oe(St),Fe(St),F(St,Gt),Kt(St,te,Gt),Et(St);for(var Dt=4,Ft=0;Ft<Dt;Ft++)X(St,Mt,Gt),rt(St,0,Gt),K(St,Lt,Mt,Gt),X(St,Mt,Gt),rt(St,0,Gt);return bt(St,Lt,Mt),z(St,Qt,Mt,Gt),St}function ie(St){St.nodes.forEach(function(Ft,Nt){Ft.index=Nt,Ft.sourceLinks=[],Ft.targetLinks=[]});var Dt=(0,g.UI)(St.nodes,Gt);return St.links.forEach(function(Ft,Nt){Ft.index=Nt;var Rt=Ft.source,wt=Ft.target;"object"!==(void 0===Rt?"undefined":s(Rt))&&(Rt=Ft.source=L(Dt,Rt)),"object"!==(void 0===wt?"undefined":s(wt))&&(wt=Ft.target=L(Dt,wt)),Rt.sourceLinks.push(Ft),wt.targetLinks.push(Ft)}),St}function oe(St){St.nodes.forEach(function(Dt){Dt.partOfCycle=!1,Dt.value=Math.max((0,A.Sm)(Dt.sourceLinks,h),(0,A.Sm)(Dt.targetLinks,h)),Dt.sourceLinks.forEach(function(Ft){Ft.circular&&(Dt.partOfCycle=!0,Dt.circularLinkType=Ft.circularLinkType)}),Dt.targetLinks.forEach(function(Ft){Ft.circular&&(Dt.partOfCycle=!0,Dt.circularLinkType=Ft.circularLinkType)})})}function Fe(St){var Dt,Ft,Nt;for(Dt=St.nodes,Ft=[],Nt=0;Dt.length;++Nt,Dt=Ft,Ft=[])Dt.forEach(function(Rt){Rt.depth=Nt,Rt.sourceLinks.forEach(function(wt){Ft.indexOf(wt.target)<0&&!wt.circular&&Ft.push(wt.target)})});for(Dt=St.nodes,Ft=[],Nt=0;Dt.length;++Nt,Dt=Ft,Ft=[])Dt.forEach(function(Rt){Rt.height=Nt,Rt.targetLinks.forEach(function(wt){Ft.indexOf(wt.source)<0&&!wt.circular&&Ft.push(wt.source)})});St.nodes.forEach(function(Rt){Rt.column=Math.floor(Wt.call(null,Rt,Nt))})}function Kt(St,Dt,Ft){var Nt=(0,g.b1)().key(function(Zt){return Zt.column}).sortKeys(A.j2).entries(St.nodes).map(function(Zt){return Zt.values});(function ft(Zt){if(Bt){var ee=1/0;Nt.forEach(function(xe){var Pe=Mt*Bt/(xe.length+1);ee=Pe<ee?Pe:ee}),At=ee}var se=(0,A.VV)(Nt,function(xe){return(Mt-Lt-(xe.length-1)*At)/(0,A.Sm)(xe,h)});se*=.3,St.links.forEach(function(xe){xe.width=xe.value*se});var Be=function pe(St){var Dt=0,Ft=0,Nt=0,Rt=0,wt=(0,A.Fp)(St.nodes,function(ft){return ft.column});return St.links.forEach(function(ft){ft.circular&&("top"==ft.circularLinkType?Dt+=ft.width:Ft+=ft.width,0==ft.target.column&&(Rt+=ft.width),ft.source.column==wt&&(Nt+=ft.width))}),{top:Dt=Dt>0?Dt+S+T:Dt,bottom:Ft=Ft>0?Ft+S+T:Ft,left:Rt=Rt>0?Rt+S+T:Rt,right:Nt=Nt>0?Nt+S+T:Nt}}(St),Ke=function de(St,Dt){var Ft=(0,A.Fp)(St.nodes,function(Zt){return Zt.column}),Nt=It-gt,Rt=Mt-Lt,pt=Nt/(Nt+Dt.right+Dt.left),kt=Rt/(Rt+Dt.top+Dt.bottom);return gt=gt*pt+Dt.left,It=0==Dt.right?It:It*pt,Lt=Lt*kt+Dt.top,Mt*=kt,St.nodes.forEach(function(Zt){Zt.x0=gt+Zt.column*((It-gt-xt)/Ft),Zt.x1=Zt.x0+xt}),kt}(St,Be);se*=Ke,St.links.forEach(function(xe){xe.width=xe.value*se}),Nt.forEach(function(xe){var Pe=xe.length;xe.forEach(function(Ge,gr){Ge.depth==Nt.length-1&&1==Pe||0==Ge.depth&&1==Pe?(Ge.y0=Mt/2-Ge.value*se,Ge.y1=Ge.y0+Ge.value*se):Ge.partOfCycle?0==k(Ge,Zt)?(Ge.y0=Mt/2+gr,Ge.y1=Ge.y0+Ge.value*se):"top"==Ge.circularLinkType?(Ge.y0=Lt+gr,Ge.y1=Ge.y0+Ge.value*se):(Ge.y0=Mt-Ge.value*se-gr,Ge.y1=Ge.y0+Ge.value*se):0==Be.top||0==Be.bottom?(Ge.y0=(Mt-Lt)/Pe*gr,Ge.y1=Ge.y0+Ge.value*se):(Ge.y0=(Mt-Lt)/2-Pe/2+gr,Ge.y1=Ge.y0+Ge.value*se)})})})(Ft),kt();for(var Rt=1,wt=Dt;wt>0;--wt)pt(Rt*=.99,Ft),kt();function pt(Zt,ee){var se=Nt.length;Nt.forEach(function(Be){var Ke=Be.length,xe=Be[0].depth;Be.forEach(function(Pe){var Ge;if((Pe.sourceLinks.length||Pe.targetLinks.length)&&!(Pe.partOfCycle&&k(Pe,ee)>0))if(0==xe&&1==Ke)Pe.y0=Mt/2-(Ge=Pe.y1-Pe.y0)/2,Pe.y1=Mt/2+Ge/2;else if(xe==se-1&&1==Ke)Pe.y0=Mt/2-(Ge=Pe.y1-Pe.y0)/2,Pe.y1=Mt/2+Ge/2;else{var ue=(0,A.J6)(Pe.sourceLinks,o),Ne=(0,A.J6)(Pe.targetLinks,p),Ye=((ue&&Ne?(ue+Ne)/2:ue||Ne)-w(Pe))*Zt;Pe.y0+=Ye,Pe.y1+=Ye}})})}function kt(){Nt.forEach(function(Zt){var ee,se,xe,Be=Lt,Ke=Zt.length;for(Zt.sort(m),xe=0;xe<Ke;++xe)(se=Be-(ee=Zt[xe]).y0)>0&&(ee.y0+=se,ee.y1+=se),Be=ee.y1+At;if((se=Be-At-Mt)>0)for(Be=ee.y0-=se,ee.y1-=se,xe=Ke-2;xe>=0;--xe)(se=(ee=Zt[xe]).y1+At-Be)>0&&(ee.y0-=se,ee.y1-=se),Be=ee.y0})}}function Et(St){St.nodes.forEach(function(Dt){Dt.sourceLinks.sort(f),Dt.targetLinks.sort(c)}),St.nodes.forEach(function(Dt){var Ft=Dt.y0,Nt=Ft,Rt=Dt.y1,wt=Rt;Dt.sourceLinks.forEach(function(ft){ft.circular?(ft.y0=Rt-ft.width/2,Rt-=ft.width):(ft.y0=Ft+ft.width/2,Ft+=ft.width)}),Dt.targetLinks.forEach(function(ft){ft.circular?(ft.y1=wt-ft.width/2,wt-=ft.width):(ft.y1=Nt+ft.width/2,Nt+=ft.width)})})}return qt.nodeId=function(St){return arguments.length?(Gt="function"==typeof St?St:a(St),qt):Gt},qt.nodeAlign=function(St){return arguments.length?(Wt="function"==typeof St?St:a(St),qt):Wt},qt.nodeWidth=function(St){return arguments.length?(xt=+St,qt):xt},qt.nodePadding=function(St){return arguments.length?(At=+St,qt):At},qt.nodes=function(St){return arguments.length?(Pt="function"==typeof St?St:a(St),qt):Pt},qt.links=function(St){return arguments.length?(Vt="function"==typeof St?St:a(St),qt):Vt},qt.size=function(St){return arguments.length?(gt=Lt=0,It=+St[0],Mt=+St[1],qt):[It-gt,Mt-Lt]},qt.extent=function(St){return arguments.length?(gt=+St[0][0],It=+St[1][0],Lt=+St[0][1],Mt=+St[1][1],qt):[[gt,Lt],[It,Mt]]},qt.iterations=function(St){return arguments.length?(te=+St,qt):te},qt.circularLinkGap=function(St){return arguments.length?(Qt=+St,qt):Qt},qt.nodePaddingRatio=function(St){return arguments.length?(Bt=+St,qt):Bt},qt.sortNodes=function(St){return arguments.length?(Ot=St,qt):Ot},qt.update=function(St){return F(St,Gt),Et(St),St.links.forEach(function(Dt){Dt.circular&&(Dt.circularLinkType=Dt.y0+Dt.y1<Mt?"top":"bottom",Dt.source.circularLinkType=Dt.circularLinkType,Dt.target.circularLinkType=Dt.circularLinkType)}),X(St,Mt,Gt,!1),rt(St,0,Gt),z(St,Qt,Mt,Gt),St},qt}function d(gt,Lt,It){var Mt=0;if(null===It){for(var xt=[],At=0;At<gt.links.length;At++){var Gt=gt.links[At],Wt=Gt.source.index,Pt=Gt.target.index;xt[Wt]||(xt[Wt]=[]),xt[Pt]||(xt[Pt]=[]),-1===xt[Wt].indexOf(Pt)&&xt[Wt].push(Pt)}var Vt=C()(xt);Vt.sort(function(Ot,qt){return Ot.length-qt.length});var te={};for(At=0;At<Vt.length;At++){var Bt=Vt[At].slice(-2);te[Bt[0]]||(te[Bt[0]]={}),te[Bt[0]][Bt[1]]=!0}gt.links.forEach(function(Ot){var qt=Ot.target.index,ie=Ot.source.index;qt===ie||te[ie]&&te[ie][qt]?(Ot.circular=!0,Ot.circularLinkID=Mt,Mt+=1):Ot.circular=!1})}else gt.links.forEach(function(Ot){Ot.source[It]<Ot.target[It]?Ot.circular=!1:(Ot.circular=!0,Ot.circularLinkID=Mt,Mt+=1)})}function F(gt,Lt){var It=0,Mt=0;gt.links.forEach(function(xt){xt.circular&&(xt.circularLinkType=xt.source.circularLinkType||xt.target.circularLinkType?xt.source.circularLinkType?xt.source.circularLinkType:xt.target.circularLinkType:It<Mt?"top":"bottom","top"==xt.circularLinkType?It+=1:Mt+=1,gt.nodes.forEach(function(At){(x(At,Lt)==x(xt.source,Lt)||x(At,Lt)==x(xt.target,Lt))&&(At.circularLinkType=xt.circularLinkType)}))}),gt.links.forEach(function(xt){xt.circular&&(xt.source.circularLinkType==xt.target.circularLinkType&&(xt.circularLinkType=xt.source.circularLinkType),dt(xt,Lt)&&(xt.circularLinkType=xt.source.circularLinkType))})}function D(gt){var Lt=Math.abs(gt.y1-gt.y0),It=Math.abs(gt.target.x0-gt.source.x1);return Math.atan(It/Lt)}function N(gt,Lt){return!(gt.source.column<Lt.target.column||gt.target.column>Lt.source.column)}function k(gt,Lt){var It=0;gt.sourceLinks.forEach(function(xt){It=xt.circular&&!dt(xt,Lt)?It+1:It});var Mt=0;return gt.targetLinks.forEach(function(xt){Mt=xt.circular&&!dt(xt,Lt)?Mt+1:Mt}),It+Mt}function O(gt){var It=0;gt.source.sourceLinks.forEach(function(At){It=At.circular?It+1:It});var xt=0;return gt.target.targetLinks.forEach(function(At){xt=At.circular?xt+1:xt}),!(It>1||xt>1)}function B(gt,Lt,It){return gt.sort(H),gt.forEach(function(Mt,xt){var At=0;if(dt(Mt,It)&&O(Mt))Mt.circularPathData.verticalBuffer=At+Mt.width/2;else{for(var Gt=0;Gt<xt;Gt++)if(N(gt[xt],gt[Gt])){var Wt=gt[Gt].circularPathData.verticalBuffer+gt[Gt].width/2+Lt;At=Wt>At?Wt:At}Mt.circularPathData.verticalBuffer=At+Mt.width/2}}),gt}function z(gt,Lt,It,Mt){var At=(0,A.VV)(gt.links,function(Pt){return Pt.source.y0});gt.links.forEach(function(Pt){Pt.circular&&(Pt.circularPathData={})}),B(gt.links.filter(function(Pt){return"top"==Pt.circularLinkType}),Lt,Mt),B(gt.links.filter(function(Pt){return"bottom"==Pt.circularLinkType}),Lt,Mt),gt.links.forEach(function(Pt){if(Pt.circular){if(Pt.circularPathData.arcRadius=Pt.width+T,Pt.circularPathData.leftNodeBuffer=5,Pt.circularPathData.rightNodeBuffer=5,Pt.circularPathData.sourceWidth=Pt.source.x1-Pt.source.x0,Pt.circularPathData.sourceX=Pt.source.x0+Pt.circularPathData.sourceWidth,Pt.circularPathData.targetX=Pt.target.x0,Pt.circularPathData.sourceY=Pt.y0,Pt.circularPathData.targetY=Pt.y1,dt(Pt,Mt)&&O(Pt))Pt.circularPathData.leftSmallArcRadius=T+Pt.width/2,Pt.circularPathData.leftLargeArcRadius=T+Pt.width/2,Pt.circularPathData.rightSmallArcRadius=T+Pt.width/2,Pt.circularPathData.rightLargeArcRadius=T+Pt.width/2,"bottom"==Pt.circularLinkType?(Pt.circularPathData.verticalFullExtent=Pt.source.y1+S+Pt.circularPathData.verticalBuffer,Pt.circularPathData.verticalLeftInnerExtent=Pt.circularPathData.verticalFullExtent-Pt.circularPathData.leftLargeArcRadius,Pt.circularPathData.verticalRightInnerExtent=Pt.circularPathData.verticalFullExtent-Pt.circularPathData.rightLargeArcRadius):(Pt.circularPathData.verticalFullExtent=Pt.source.y0-S-Pt.circularPathData.verticalBuffer,Pt.circularPathData.verticalLeftInnerExtent=Pt.circularPathData.verticalFullExtent+Pt.circularPathData.leftLargeArcRadius,Pt.circularPathData.verticalRightInnerExtent=Pt.circularPathData.verticalFullExtent+Pt.circularPathData.rightLargeArcRadius);else{var Vt=Pt.source.column,te=Pt.circularLinkType,Qt=gt.links.filter(function(qt){return qt.source.column==Vt&&qt.circularLinkType==te});Qt.sort("bottom"==Pt.circularLinkType?nt:J);var Bt=0;Qt.forEach(function(qt,ie){qt.circularLinkID==Pt.circularLinkID&&(Pt.circularPathData.leftSmallArcRadius=T+Pt.width/2+Bt,Pt.circularPathData.leftLargeArcRadius=T+Pt.width/2+ie*Lt+Bt),Bt+=qt.width}),Vt=Pt.target.column,(Qt=gt.links.filter(function(qt){return qt.target.column==Vt&&qt.circularLinkType==te})).sort("bottom"==Pt.circularLinkType?ut:it),Bt=0,Qt.forEach(function(qt,ie){qt.circularLinkID==Pt.circularLinkID&&(Pt.circularPathData.rightSmallArcRadius=T+Pt.width/2+Bt,Pt.circularPathData.rightLargeArcRadius=T+Pt.width/2+ie*Lt+Bt),Bt+=qt.width}),"bottom"==Pt.circularLinkType?(Pt.circularPathData.verticalFullExtent=Math.max(It,Pt.source.y1,Pt.target.y1)+S+Pt.circularPathData.verticalBuffer,Pt.circularPathData.verticalLeftInnerExtent=Pt.circularPathData.verticalFullExtent-Pt.circularPathData.leftLargeArcRadius,Pt.circularPathData.verticalRightInnerExtent=Pt.circularPathData.verticalFullExtent-Pt.circularPathData.rightLargeArcRadius):(Pt.circularPathData.verticalFullExtent=At-S-Pt.circularPathData.verticalBuffer,Pt.circularPathData.verticalLeftInnerExtent=Pt.circularPathData.verticalFullExtent+Pt.circularPathData.leftLargeArcRadius,Pt.circularPathData.verticalRightInnerExtent=Pt.circularPathData.verticalFullExtent+Pt.circularPathData.rightLargeArcRadius)}Pt.circularPathData.leftInnerExtent=Pt.circularPathData.sourceX+Pt.circularPathData.leftNodeBuffer,Pt.circularPathData.rightInnerExtent=Pt.circularPathData.targetX-Pt.circularPathData.rightNodeBuffer,Pt.circularPathData.leftFullExtent=Pt.circularPathData.sourceX+Pt.circularPathData.leftLargeArcRadius+Pt.circularPathData.leftNodeBuffer,Pt.circularPathData.rightFullExtent=Pt.circularPathData.targetX-Pt.circularPathData.rightLargeArcRadius-Pt.circularPathData.rightNodeBuffer}if(Pt.circular)Pt.path=function U(gt){return"top"==gt.circularLinkType?"M"+gt.circularPathData.sourceX+" "+gt.circularPathData.sourceY+" L"+gt.circularPathData.leftInnerExtent+" "+gt.circularPathData.sourceY+" A"+gt.circularPathData.leftLargeArcRadius+" "+gt.circularPathData.leftSmallArcRadius+" 0 0 0 "+gt.circularPathData.leftFullExtent+" "+(gt.circularPathData.sourceY-gt.circularPathData.leftSmallArcRadius)+" L"+gt.circularPathData.leftFullExtent+" "+gt.circularPathData.verticalLeftInnerExtent+" A"+gt.circularPathData.leftLargeArcRadius+" "+gt.circularPathData.leftLargeArcRadius+" 0 0 0 "+gt.circularPathData.leftInnerExtent+" "+gt.circularPathData.verticalFullExtent+" L"+gt.circularPathData.rightInnerExtent+" "+gt.circularPathData.verticalFullExtent+" A"+gt.circularPathData.rightLargeArcRadius+" "+gt.circularPathData.rightLargeArcRadius+" 0 0 0 "+gt.circularPathData.rightFullExtent+" "+gt.circularPathData.verticalRightInnerExtent+" L"+gt.circularPathData.rightFullExtent+" "+(gt.circularPathData.targetY-gt.circularPathData.rightSmallArcRadius)+" A"+gt.circularPathData.rightLargeArcRadius+" "+gt.circularPathData.rightSmallArcRadius+" 0 0 0 "+gt.circularPathData.rightInnerExtent+" "+gt.circularPathData.targetY+" L"+gt.circularPathData.targetX+" "+gt.circularPathData.targetY:"M"+gt.circularPathData.sourceX+" "+gt.circularPathData.sourceY+" L"+gt.circularPathData.leftInnerExtent+" "+gt.circularPathData.sourceY+" A"+gt.circularPathData.leftLargeArcRadius+" "+gt.circularPathData.leftSmallArcRadius+" 0 0 1 "+gt.circularPathData.leftFullExtent+" "+(gt.circularPathData.sourceY+gt.circularPathData.leftSmallArcRadius)+" L"+gt.circularPathData.leftFullExtent+" "+gt.circularPathData.verticalLeftInnerExtent+" A"+gt.circularPathData.leftLargeArcRadius+" "+gt.circularPathData.leftLargeArcRadius+" 0 0 1 "+gt.circularPathData.leftInnerExtent+" "+gt.circularPathData.verticalFullExtent+" L"+gt.circularPathData.rightInnerExtent+" "+gt.circularPathData.verticalFullExtent+" A"+gt.circularPathData.rightLargeArcRadius+" "+gt.circularPathData.rightLargeArcRadius+" 0 0 1 "+gt.circularPathData.rightFullExtent+" "+gt.circularPathData.verticalRightInnerExtent+" L"+gt.circularPathData.rightFullExtent+" "+(gt.circularPathData.targetY+gt.circularPathData.rightSmallArcRadius)+" A"+gt.circularPathData.rightLargeArcRadius+" "+gt.circularPathData.rightSmallArcRadius+" 0 0 1 "+gt.circularPathData.rightInnerExtent+" "+gt.circularPathData.targetY+" L"+gt.circularPathData.targetX+" "+gt.circularPathData.targetY}(Pt);else{var Ot=(0,i.h5)().source(function(qt){return[qt.source.x0+(qt.source.x1-qt.source.x0),qt.y0]}).target(function(qt){return[qt.target.x0,qt.y1]});Pt.path=Ot(Pt)}})}function H(gt,Lt){return Q(gt)==Q(Lt)?"bottom"==gt.circularLinkType?nt(gt,Lt):J(gt,Lt):Q(Lt)-Q(gt)}function J(gt,Lt){return gt.y0-Lt.y0}function nt(gt,Lt){return Lt.y0-gt.y0}function it(gt,Lt){return gt.y1-Lt.y1}function ut(gt,Lt){return Lt.y1-gt.y1}function Q(gt){return gt.target.column-gt.source.column}function j(gt){return gt.target.x0-gt.source.x1}function Z(gt,Lt){var It=D(gt),Mt=j(Lt)/Math.tan(It);return"up"==st(gt)?gt.y1+Mt:gt.y1-Mt}function G(gt,Lt){var It=D(gt),Mt=j(Lt)/Math.tan(It);return"up"==st(gt)?gt.y1-Mt:gt.y1+Mt}function K(gt,Lt,It,Mt){gt.links.forEach(function(xt){if(!xt.circular&&xt.target.column-xt.source.column>1){var At=xt.source.column+1,Gt=xt.target.column-1,Wt=1,Pt=Gt-At+1;for(Wt=1;At<=Gt;At++,Wt++)gt.nodes.forEach(function(Vt){if(Vt.column==At){var de,te=Wt/(Pt+1),Qt=Math.pow(1-te,3),Bt=3*te*Math.pow(1-te,2),Ot=3*Math.pow(te,2)*(1-te),qt=Math.pow(te,3),ie=Qt*xt.y0+Bt*xt.y0+Ot*xt.y1+qt*xt.y1,oe=ie-xt.width/2,pe=ie+xt.width/2;oe>Vt.y0&&oe<Vt.y1?(de=Vt.y1-oe+10,Vt=$(Vt,de="bottom"==Vt.circularLinkType?de:-de,Lt,It),gt.nodes.forEach(function(Fe){x(Fe,Mt)==x(Vt,Mt)||Fe.column!=Vt.column||at(Vt,Fe)&&$(Fe,de,Lt,It)})):(pe>Vt.y0&&pe<Vt.y1||oe<Vt.y0&&pe>Vt.y1)&&(Vt=$(Vt,de=pe-Vt.y0+10,Lt,It),gt.nodes.forEach(function(Fe){x(Fe,Mt)==x(Vt,Mt)||Fe.column!=Vt.column||Fe.y0<Vt.y1&&Fe.y1>Vt.y1&&$(Fe,de,Lt,It)}))}})}})}function at(gt,Lt){return gt.y0>Lt.y0&&gt.y0<Lt.y1||gt.y1>Lt.y0&&gt.y1<Lt.y1||gt.y0<Lt.y0&&gt.y1>Lt.y1}function $(gt,Lt,It,Mt){return gt.y0+Lt>=It&&gt.y1+Lt<=Mt&&(gt.y0=gt.y0+Lt,gt.y1=gt.y1+Lt,gt.targetLinks.forEach(function(xt){xt.y1=xt.y1+Lt}),gt.sourceLinks.forEach(function(xt){xt.y0=xt.y0+Lt})),gt}function X(gt,Lt,It,Mt){gt.nodes.forEach(function(xt){Mt&&xt.y+(xt.y1-xt.y0)>Lt&&(xt.y=xt.y-(xt.y+(xt.y1-xt.y0)-Lt));var At=gt.links.filter(function(Pt){return x(Pt.source,It)==x(xt,It)}),Gt=At.length;Gt>1&&At.sort(function(Pt,Vt){if(!Pt.circular&&!Vt.circular){if(Pt.target.column==Vt.target.column)return Pt.y1-Vt.y1;if(!et(Pt,Vt))return Pt.y1-Vt.y1;if(Pt.target.column>Vt.target.column){var te=G(Vt,Pt);return Pt.y1-te}if(Vt.target.column>Pt.target.column)return G(Pt,Vt)-Vt.y1}return Pt.circular&&!Vt.circular?"top"==Pt.circularLinkType?-1:1:Vt.circular&&!Pt.circular?"top"==Vt.circularLinkType?1:-1:Pt.circular&&Vt.circular?Pt.circularLinkType===Vt.circularLinkType&&"top"==Pt.circularLinkType?Pt.target.column===Vt.target.column?Pt.target.y1-Vt.target.y1:Vt.target.column-Pt.target.column:Pt.circularLinkType===Vt.circularLinkType&&"bottom"==Pt.circularLinkType?Pt.target.column===Vt.target.column?Vt.target.y1-Pt.target.y1:Pt.target.column-Vt.target.column:"top"==Pt.circularLinkType?-1:1:void 0});var Wt=xt.y0;At.forEach(function(Pt){Pt.y0=Wt+Pt.width/2,Wt+=Pt.width}),At.forEach(function(Pt,Vt){if("bottom"==Pt.circularLinkType){for(var te=Vt+1,Qt=0;te<Gt;te++)Qt+=At[te].width;Pt.y0=xt.y1-Qt-Pt.width/2}})})}function rt(gt,Lt,It){gt.nodes.forEach(function(Mt){var xt=gt.links.filter(function(Wt){return x(Wt.target,It)==x(Mt,It)}),At=xt.length;At>1&&xt.sort(function(Wt,Pt){if(!Wt.circular&&!Pt.circular){if(Wt.source.column==Pt.source.column)return Wt.y0-Pt.y0;if(!et(Wt,Pt))return Wt.y0-Pt.y0;if(Pt.source.column<Wt.source.column){var Vt=Z(Pt,Wt);return Wt.y0-Vt}if(Wt.source.column<Pt.source.column)return Z(Wt,Pt)-Pt.y0}return Wt.circular&&!Pt.circular?"top"==Wt.circularLinkType?-1:1:Pt.circular&&!Wt.circular?"top"==Pt.circularLinkType?1:-1:Wt.circular&&Pt.circular?Wt.circularLinkType===Pt.circularLinkType&&"top"==Wt.circularLinkType?Wt.source.column===Pt.source.column?Wt.source.y1-Pt.source.y1:Wt.source.column-Pt.source.column:Wt.circularLinkType===Pt.circularLinkType&&"bottom"==Wt.circularLinkType?Wt.source.column===Pt.source.column?Wt.source.y1-Pt.source.y1:Pt.source.column-Wt.source.column:"top"==Wt.circularLinkType?-1:1:void 0});var Gt=Mt.y0;xt.forEach(function(Wt){Wt.y1=Gt+Wt.width/2,Gt+=Wt.width}),xt.forEach(function(Wt,Pt){if("bottom"==Wt.circularLinkType){for(var Vt=Pt+1,te=0;Vt<At;Vt++)te+=xt[Vt].width;Wt.y1=Mt.y1-te-Wt.width/2}})})}function et(gt,Lt){return st(gt)==st(Lt)}function st(gt){return gt.y0-gt.y1>0?"up":"down"}function dt(gt,Lt){return x(gt.source,Lt)==x(gt.target,Lt)}function bt(gt,Lt,It){var Mt=gt.nodes,xt=gt.links,At=!1,Gt=!1;if(xt.forEach(function(Bt){"top"==Bt.circularLinkType?At=!0:"bottom"==Bt.circularLinkType&&(Gt=!0)}),0==At||0==Gt){var Wt=(0,A.VV)(Mt,function(Bt){return Bt.y0}),Qt=(It-Lt)/((0,A.Fp)(Mt,function(Bt){return Bt.y1})-Wt);Mt.forEach(function(Bt){var Ot=(Bt.y1-Bt.y0)*Qt;Bt.y0=(Bt.y0-Wt)*Qt,Bt.y1=Bt.y0+Ot}),xt.forEach(function(Bt){Bt.y0=(Bt.y0-Wt)*Qt,Bt.y1=(Bt.y1-Wt)*Qt,Bt.width=Bt.width*Qt})}}},30838:function(q,W,t){"use strict";t.r(W),t.d(W,{sankey:function(){return v},sankeyCenter:function(){return y},sankeyJustify:function(){return u},sankeyLeft:function(){return P},sankeyLinkHorizontal:function(){return x},sankeyRight:function(){return C}});var A=t(33064),g=t(15140);function i(S){return S.target.depth}function P(S){return S.depth}function C(S,T){return T-1-S.height}function u(S,T){return S.sourceLinks.length?S.depth:T-1}function y(S){return S.targetLinks.length?S.depth:S.sourceLinks.length?(0,A.VV)(S.sourceLinks,i)-1:0}function e(S){return function(){return S}}function r(S,T){return a(S.source,T.source)||S.index-T.index}function l(S,T){return a(S.target,T.target)||S.index-T.index}function a(S,T){return S.y0-T.y0}function s(S){return S.value}function c(S){return(S.y0+S.y1)/2}function f(S){return c(S.source)*S.value}function m(S){return c(S.target)*S.value}function h(S){return S.index}function w(S){return S.nodes}function p(S){return S.links}function o(S,T){var n=S.get(T);if(!n)throw new Error("missing: "+T);return n}function v(){var S=0,T=0,n=1,E=1,d=24,F=8,D=h,N=u,k=w,O=p,B=32;function U(){var Q={nodes:k.apply(null,arguments),links:O.apply(null,arguments)};return H(Q),J(Q),nt(Q),it(Q),ut(Q),Q}function H(Q){Q.nodes.forEach(function(Z,G){Z.index=G,Z.sourceLinks=[],Z.targetLinks=[]});var j=(0,g.UI)(Q.nodes,D);Q.links.forEach(function(Z,G){Z.index=G;var K=Z.source,at=Z.target;"object"!=typeof K&&(K=Z.source=o(j,K)),"object"!=typeof at&&(at=Z.target=o(j,at)),K.sourceLinks.push(Z),at.targetLinks.push(Z)})}function J(Q){Q.nodes.forEach(function(j){j.value=Math.max((0,A.Sm)(j.sourceLinks,s),(0,A.Sm)(j.targetLinks,s))})}function nt(Q){var j,Z,G;for(j=Q.nodes,Z=[],G=0;j.length;++G,j=Z,Z=[])j.forEach(function(at){at.depth=G,at.sourceLinks.forEach(function($){Z.indexOf($.target)<0&&Z.push($.target)})});for(j=Q.nodes,Z=[],G=0;j.length;++G,j=Z,Z=[])j.forEach(function(at){at.height=G,at.targetLinks.forEach(function($){Z.indexOf($.source)<0&&Z.push($.source)})});var K=(n-S-d)/(G-1);Q.nodes.forEach(function(at){at.x1=(at.x0=S+Math.max(0,Math.min(G-1,Math.floor(N.call(null,at,G))))*K)+d})}function it(Q){var j=(0,g.b1)().key(function(rt){return rt.x0}).sortKeys(A.j2).entries(Q.nodes).map(function(rt){return rt.values});(function K(){var rt=(0,A.Fp)(j,function(dt){return dt.length}),et=.6666666666666666*(E-T)/(rt-1);F>et&&(F=et);var st=(0,A.VV)(j,function(dt){return(E-T-(dt.length-1)*F)/(0,A.Sm)(dt,s)});j.forEach(function(dt){dt.forEach(function(bt,gt){bt.y1=(bt.y0=gt)+bt.value*st})}),Q.links.forEach(function(dt){dt.width=dt.value*st})})(),X();for(var Z=1,G=B;G>0;--G)$(Z*=.99),X(),at(Z),X();function at(rt){j.forEach(function(et){et.forEach(function(st){if(st.targetLinks.length){var dt=((0,A.Sm)(st.targetLinks,f)/(0,A.Sm)(st.targetLinks,s)-c(st))*rt;st.y0+=dt,st.y1+=dt}})})}function $(rt){j.slice().reverse().forEach(function(et){et.forEach(function(st){if(st.sourceLinks.length){var dt=((0,A.Sm)(st.sourceLinks,m)/(0,A.Sm)(st.sourceLinks,s)-c(st))*rt;st.y0+=dt,st.y1+=dt}})})}function X(){j.forEach(function(rt){var et,st,gt,dt=T,bt=rt.length;for(rt.sort(a),gt=0;gt<bt;++gt)(st=dt-(et=rt[gt]).y0)>0&&(et.y0+=st,et.y1+=st),dt=et.y1+F;if((st=dt-F-E)>0)for(dt=et.y0-=st,et.y1-=st,gt=bt-2;gt>=0;--gt)(st=(et=rt[gt]).y1+F-dt)>0&&(et.y0-=st,et.y1-=st),dt=et.y0})}}function ut(Q){Q.nodes.forEach(function(j){j.sourceLinks.sort(l),j.targetLinks.sort(r)}),Q.nodes.forEach(function(j){var Z=j.y0,G=Z;j.sourceLinks.forEach(function(K){K.y0=Z+K.width/2,Z+=K.width}),j.targetLinks.forEach(function(K){K.y1=G+K.width/2,G+=K.width})})}return U.update=function(Q){return ut(Q),Q},U.nodeId=function(Q){return arguments.length?(D="function"==typeof Q?Q:e(Q),U):D},U.nodeAlign=function(Q){return arguments.length?(N="function"==typeof Q?Q:e(Q),U):N},U.nodeWidth=function(Q){return arguments.length?(d=+Q,U):d},U.nodePadding=function(Q){return arguments.length?(F=+Q,U):F},U.nodes=function(Q){return arguments.length?(k="function"==typeof Q?Q:e(Q),U):k},U.links=function(Q){return arguments.length?(O="function"==typeof Q?Q:e(Q),U):O},U.size=function(Q){return arguments.length?(S=T=0,n=+Q[0],E=+Q[1],U):[n-S,E-T]},U.extent=function(Q){return arguments.length?(S=+Q[0][0],n=+Q[1][0],T=+Q[0][1],E=+Q[1][1],U):[[S,T],[n,E]]},U.iterations=function(Q){return arguments.length?(B=+Q,U):B},U}var M=t(45879);function b(S){return[S.source.x1,S.y0]}function L(S){return[S.target.x0,S.y1]}function x(){return(0,M.h5)().source(b).target(L)}},39898:function(q,W,t){var A,g;(function(){var i={version:"3.8.0"},P=[].slice,C=function(ot){return P.call(ot)},u=self.document;function y(ot){return ot&&(ot.ownerDocument||ot.document||ot).documentElement}function e(ot){return ot&&(ot.ownerDocument&&ot.ownerDocument.defaultView||ot.document&&ot||ot.defaultView)}if(u)try{C(u.documentElement.childNodes)}catch(ot){C=function(yt){for(var zt=yt.length,Jt=new Array(zt);zt--;)Jt[zt]=yt[zt];return Jt}}if(Date.now||(Date.now=function(){return+new Date}),u)try{u.createElement("DIV").style.setProperty("opacity",0,"")}catch(ot){var r=this.Element.prototype,l=r.setAttribute,a=r.setAttributeNS,s=this.CSSStyleDeclaration.prototype,c=s.setProperty;r.setAttribute=function(yt,zt){l.call(this,yt,zt+"")},r.setAttributeNS=function(yt,zt,Jt){a.call(this,yt,zt,Jt+"")},s.setProperty=function(yt,zt,Jt){c.call(this,yt,zt+"",Jt)}}function f(ot,yt){return ot<yt?-1:ot>yt?1:ot>=yt?0:NaN}function m(ot){return null===ot?NaN:+ot}function h(ot){return!isNaN(ot)}function w(ot){return{left:function(yt,zt,Jt,$t){for(arguments.length<3&&(Jt=0),arguments.length<4&&($t=yt.length);Jt<$t;){var ne=Jt+$t>>>1;ot(yt[ne],zt)<0?Jt=ne+1:$t=ne}return Jt},right:function(yt,zt,Jt,$t){for(arguments.length<3&&(Jt=0),arguments.length<4&&($t=yt.length);Jt<$t;){var ne=Jt+$t>>>1;ot(yt[ne],zt)>0?$t=ne:Jt=ne+1}return Jt}}}i.ascending=f,i.descending=function(ot,yt){return yt<ot?-1:yt>ot?1:yt>=ot?0:NaN},i.min=function(ot,yt){var $t,ne,zt=-1,Jt=ot.length;if(1===arguments.length){for(;++zt<Jt;)if(null!=(ne=ot[zt])&&ne>=ne){$t=ne;break}for(;++zt<Jt;)null!=(ne=ot[zt])&&$t>ne&&($t=ne)}else{for(;++zt<Jt;)if(null!=(ne=yt.call(ot,ot[zt],zt))&&ne>=ne){$t=ne;break}for(;++zt<Jt;)null!=(ne=yt.call(ot,ot[zt],zt))&&$t>ne&&($t=ne)}return $t},i.max=function(ot,yt){var $t,ne,zt=-1,Jt=ot.length;if(1===arguments.length){for(;++zt<Jt;)if(null!=(ne=ot[zt])&&ne>=ne){$t=ne;break}for(;++zt<Jt;)null!=(ne=ot[zt])&&ne>$t&&($t=ne)}else{for(;++zt<Jt;)if(null!=(ne=yt.call(ot,ot[zt],zt))&&ne>=ne){$t=ne;break}for(;++zt<Jt;)null!=(ne=yt.call(ot,ot[zt],zt))&&ne>$t&&($t=ne)}return $t},i.extent=function(ot,yt){var $t,ne,Ee,zt=-1,Jt=ot.length;if(1===arguments.length){for(;++zt<Jt;)if(null!=(ne=ot[zt])&&ne>=ne){$t=Ee=ne;break}for(;++zt<Jt;)null!=(ne=ot[zt])&&($t>ne&&($t=ne),Ee<ne&&(Ee=ne))}else{for(;++zt<Jt;)if(null!=(ne=yt.call(ot,ot[zt],zt))&&ne>=ne){$t=Ee=ne;break}for(;++zt<Jt;)null!=(ne=yt.call(ot,ot[zt],zt))&&($t>ne&&($t=ne),Ee<ne&&(Ee=ne))}return[$t,Ee]},i.sum=function(ot,yt){var $t,zt=0,Jt=ot.length,ne=-1;if(1===arguments.length)for(;++ne<Jt;)h($t=+ot[ne])&&(zt+=$t);else for(;++ne<Jt;)h($t=+yt.call(ot,ot[ne],ne))&&(zt+=$t);return zt},i.mean=function(ot,yt){var $t,zt=0,Jt=ot.length,ne=-1,Ee=Jt;if(1===arguments.length)for(;++ne<Jt;)h($t=m(ot[ne]))?zt+=$t:--Ee;else for(;++ne<Jt;)h($t=m(yt.call(ot,ot[ne],ne)))?zt+=$t:--Ee;if(Ee)return zt/Ee},i.quantile=function(ot,yt){var zt=(ot.length-1)*yt+1,Jt=Math.floor(zt),$t=+ot[Jt-1],ne=zt-Jt;return ne?$t+ne*(ot[Jt]-$t):$t},i.median=function(ot,yt){var $t,zt=[],Jt=ot.length,ne=-1;if(1===arguments.length)for(;++ne<Jt;)h($t=m(ot[ne]))&&zt.push($t);else for(;++ne<Jt;)h($t=m(yt.call(ot,ot[ne],ne)))&&zt.push($t);if(zt.length)return i.quantile(zt.sort(f),.5)},i.variance=function(ot,yt){var $t,ne,zt=ot.length,Jt=0,Ee=0,me=-1,Oe=0;if(1===arguments.length)for(;++me<zt;)h($t=m(ot[me]))&&(Ee+=(ne=$t-Jt)*($t-(Jt+=ne/++Oe)));else for(;++me<zt;)h($t=m(yt.call(ot,ot[me],me)))&&(Ee+=(ne=$t-Jt)*($t-(Jt+=ne/++Oe)));if(Oe>1)return Ee/(Oe-1)},i.deviation=function(){var ot=i.variance.apply(this,arguments);return ot&&Math.sqrt(ot)};var p=w(f);function o(ot){return ot.length}i.bisectLeft=p.left,i.bisect=i.bisectRight=p.right,i.bisector=function(ot){return w(1===ot.length?function(yt,zt){return f(ot(yt),zt)}:ot)},i.shuffle=function(ot,yt,zt){(Jt=arguments.length)<3&&(zt=ot.length,Jt<2&&(yt=0));for(var $t,ne,Jt=zt-yt;Jt;)ne=Math.random()*Jt--|0,$t=ot[Jt+yt],ot[Jt+yt]=ot[ne+yt],ot[ne+yt]=$t;return ot},i.permute=function(ot,yt){for(var zt=yt.length,Jt=new Array(zt);zt--;)Jt[zt]=ot[yt[zt]];return Jt},i.pairs=function(ot){for(var yt=0,zt=ot.length-1,$t=ot[0],ne=new Array(zt<0?0:zt);yt<zt;)ne[yt]=[$t,$t=ot[++yt]];return ne},i.transpose=function(ot){if(!(ne=ot.length))return[];for(var yt=-1,zt=i.min(ot,o),Jt=new Array(zt);++yt<zt;)for(var ne,$t=-1,Ee=Jt[yt]=new Array(ne);++$t<ne;)Ee[$t]=ot[$t][yt];return Jt},i.zip=function(){return i.transpose(arguments)},i.keys=function(ot){var yt=[];for(var zt in ot)yt.push(zt);return yt},i.values=function(ot){var yt=[];for(var zt in ot)yt.push(ot[zt]);return yt},i.entries=function(ot){var yt=[];for(var zt in ot)yt.push({key:zt,value:ot[zt]});return yt},i.merge=function(ot){for(var zt,ne,Ee,yt=ot.length,Jt=-1,$t=0;++Jt<yt;)$t+=ot[Jt].length;for(ne=new Array($t);--yt>=0;)for(zt=(Ee=ot[yt]).length;--zt>=0;)ne[--$t]=Ee[zt];return ne};var v=Math.abs;function M(ot){for(var yt=1;ot*yt%1;)yt*=10;return yt}function b(ot,yt){for(var zt in yt)Object.defineProperty(ot.prototype,zt,{value:yt[zt],enumerable:!1})}function L(){this._=Object.create(null)}i.range=function(ot,yt,zt){if(arguments.length<3&&(zt=1,arguments.length<2&&(yt=ot,ot=0)),(yt-ot)/zt==1/0)throw new Error("infinite range");var Ee,Jt=[],$t=M(v(zt)),ne=-1;if(ot*=$t,yt*=$t,(zt*=$t)<0)for(;(Ee=ot+zt*++ne)>yt;)Jt.push(Ee/$t);else for(;(Ee=ot+zt*++ne)<yt;)Jt.push(Ee/$t);return Jt},i.map=function(ot,yt){var zt=new L;if(ot instanceof L)ot.forEach(function(me,Oe){zt.set(me,Oe)});else if(Array.isArray(ot)){var ne,Jt=-1,$t=ot.length;if(1===arguments.length)for(;++Jt<$t;)zt.set(Jt,ot[Jt]);else for(;++Jt<$t;)zt.set(yt.call(ot,ne=ot[Jt],Jt),ne)}else for(var Ee in ot)zt.set(Ee,ot[Ee]);return zt};function T(ot){return"__proto__"==(ot+="")||"\0"===ot[0]?"\0"+ot:ot}function n(ot){return"\0"===(ot+="")[0]?ot.slice(1):ot}function E(ot){return T(ot)in this._}function d(ot){return(ot=T(ot))in this._&&delete this._[ot]}function F(){var ot=[];for(var yt in this._)ot.push(n(yt));return ot}function D(){var ot=0;for(var yt in this._)++ot;return ot}function N(){for(var ot in this._)return!1;return!0}function k(){this._=Object.create(null)}function O(ot){return ot}function B(ot,yt,zt){return function(){var Jt=zt.apply(yt,arguments);return Jt===yt?ot:Jt}}function z(ot,yt){if(yt in ot)return yt;yt=yt.charAt(0).toUpperCase()+yt.slice(1);for(var zt=0,Jt=U.length;zt<Jt;++zt){var $t=U[zt]+yt;if($t in ot)return $t}}b(L,{has:E,get:function(ot){return this._[T(ot)]},set:function(ot,yt){return this._[T(ot)]=yt},remove:d,keys:F,values:function(){var ot=[];for(var yt in this._)ot.push(this._[yt]);return ot},entries:function(){var ot=[];for(var yt in this._)ot.push({key:n(yt),value:this._[yt]});return ot},size:D,empty:N,forEach:function(ot){for(var yt in this._)ot.call(this,n(yt),this._[yt])}}),i.nest=function(){var Jt,$t,ot={},yt=[],zt=[];function ne(me,Oe,Qe){if(Qe>=yt.length)return $t?$t.call(ot,Oe):Jt?Oe.sort(Jt):Oe;for(var Qr,rn,Rr,Vr,tr=-1,Cr=Oe.length,Sr=yt[Qe++],kr=new L;++tr<Cr;)(Vr=kr.get(Qr=Sr(rn=Oe[tr])))?Vr.push(rn):kr.set(Qr,[rn]);return me?(rn=me(),Rr=function(on,un){rn.set(on,ne(me,un,Qe))}):(rn={},Rr=function(on,un){rn[on]=ne(me,un,Qe)}),kr.forEach(Rr),rn}function Ee(me,Oe){if(Oe>=yt.length)return me;var Qe=[],tr=zt[Oe++];return me.forEach(function(Cr,Sr){Qe.push({key:Cr,values:Ee(Sr,Oe)})}),tr?Qe.sort(function(Cr,Sr){return tr(Cr.key,Sr.key)}):Qe}return ot.map=function(me,Oe){return ne(Oe,me,0)},ot.entries=function(me){return Ee(ne(i.map,me,0),0)},ot.key=function(me){return yt.push(me),ot},ot.sortKeys=function(me){return zt[yt.length-1]=me,ot},ot.sortValues=function(me){return Jt=me,ot},ot.rollup=function(me){return $t=me,ot},ot},i.set=function(ot){var yt=new k;if(ot)for(var zt=0,Jt=ot.length;zt<Jt;++zt)yt.add(ot[zt]);return yt},b(k,{has:E,add:function(ot){return this._[T(ot+="")]=!0,ot},remove:d,values:F,size:D,empty:N,forEach:function(ot){for(var yt in this._)ot.call(this,n(yt))}}),i.behavior={},i.rebind=function(ot,yt){for(var $t,zt=1,Jt=arguments.length;++zt<Jt;)ot[$t=arguments[zt]]=B(ot,yt,yt[$t]);return ot};var U=["webkit","ms","moz","Moz","o","O"];function H(){}function J(){}function nt(ot){var yt=[],zt=new L;function Jt(){for(var me,$t=yt,ne=-1,Ee=$t.length;++ne<Ee;)(me=$t[ne].on)&&me.apply(this,arguments);return ot}return Jt.on=function($t,ne){var me,Ee=zt.get($t);return arguments.length<2?Ee&&Ee.on:(Ee&&(Ee.on=null,yt=yt.slice(0,me=yt.indexOf(Ee)).concat(yt.slice(me+1)),zt.remove($t)),ne&&yt.push(zt.set($t,{on:ne})),ot)},Jt}function it(){i.event.preventDefault()}function ut(){for(var yt,ot=i.event;yt=ot.sourceEvent;)ot=yt;return ot}function Q(ot){for(var yt=new J,zt=0,Jt=arguments.length;++zt<Jt;)yt[arguments[zt]]=nt(yt);return yt.of=function($t,ne){return function(Ee){try{var me=Ee.sourceEvent=i.event;Ee.target=ot,i.event=Ee,yt[Ee.type].apply($t,ne)}finally{i.event=me}}},yt}i.dispatch=function(){for(var ot=new J,yt=-1,zt=arguments.length;++yt<zt;)ot[arguments[yt]]=nt(ot);return ot},J.prototype.on=function(ot,yt){var zt=ot.indexOf("."),Jt="";if(zt>=0&&(Jt=ot.slice(zt+1),ot=ot.slice(0,zt)),ot)return arguments.length<2?this[ot].on(Jt):this[ot].on(Jt,yt);if(2===arguments.length){if(null==yt)for(ot in this)this.hasOwnProperty(ot)&&this[ot].on(Jt,null);return this}},i.event=null,i.requote=function(ot){return ot.replace(j,"\\$&")};var j=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Z={}.__proto__?function(ot,yt){ot.__proto__=yt}:function(ot,yt){for(var zt in yt)ot[zt]=yt[zt]};function G(ot){return Z(ot,X),ot}var K=function(ot,yt){return yt.querySelector(ot)},at=function(ot,yt){return yt.querySelectorAll(ot)},$=function(ot,yt){var zt=ot.matches||ot[z(ot,"matchesSelector")];return($=function(Jt,$t){return zt.call(Jt,$t)})(ot,yt)};"function"==typeof Sizzle&&(K=function(ot,yt){return Sizzle(ot,yt)[0]||null},at=Sizzle,$=Sizzle.matchesSelector),i.selection=function(){return i.select(u.documentElement)};var X=i.selection.prototype=[];function rt(ot){return"function"==typeof ot?ot:function(){return K(ot,this)}}function et(ot){return"function"==typeof ot?ot:function(){return at(ot,this)}}X.select=function(ot){var zt,Jt,$t,ne,yt=[];ot=rt(ot);for(var Ee=-1,me=this.length;++Ee<me;){yt.push(zt=[]),zt.parentNode=($t=this[Ee]).parentNode;for(var Oe=-1,Qe=$t.length;++Oe<Qe;)(ne=$t[Oe])?(zt.push(Jt=ot.call(ne,ne.__data__,Oe,Ee)),Jt&&"__data__"in ne&&(Jt.__data__=ne.__data__)):zt.push(null)}return G(yt)},X.selectAll=function(ot){var zt,Jt,yt=[];ot=et(ot);for(var $t=-1,ne=this.length;++$t<ne;)for(var Ee=this[$t],me=-1,Oe=Ee.length;++me<Oe;)(Jt=Ee[me])&&(yt.push(zt=C(ot.call(Jt,Jt.__data__,me,$t))),zt.parentNode=Jt);return G(yt)};var st="http://www.w3.org/1999/xhtml",dt={svg:"http://www.w3.org/2000/svg",xhtml:st,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function bt(ot,yt){return ot=i.ns.qualify(ot),null==yt?ot.local?function Jt(){this.removeAttributeNS(ot.space,ot.local)}:function zt(){this.removeAttribute(ot)}:"function"==typeof yt?ot.local?function me(){var Oe=yt.apply(this,arguments);null==Oe?this.removeAttributeNS(ot.space,ot.local):this.setAttributeNS(ot.space,ot.local,Oe)}:function Ee(){var Oe=yt.apply(this,arguments);null==Oe?this.removeAttribute(ot):this.setAttribute(ot,Oe)}:ot.local?function ne(){this.setAttributeNS(ot.space,ot.local,yt)}:function $t(){this.setAttribute(ot,yt)}}function gt(ot){return ot.trim().replace(/\s+/g," ")}function Lt(ot){return new RegExp("(?:^|\\s+)"+i.requote(ot)+"(?:\\s+|$)","g")}function It(ot){return(ot+"").trim().split(/^|\s+/)}function Mt(ot,yt){var zt=(ot=It(ot).map(xt)).length;return"function"==typeof yt?function $t(){for(var ne=-1,Ee=yt.apply(this,arguments);++ne<zt;)ot[ne](this,Ee)}:function Jt(){for(var ne=-1;++ne<zt;)ot[ne](this,yt)}}function xt(ot){var yt=Lt(ot);return function(zt,Jt){if($t=zt.classList)return Jt?$t.add(ot):$t.remove(ot);var $t=zt.getAttribute("class")||"";Jt?(yt.lastIndex=0,yt.test($t)||zt.setAttribute("class",gt($t+" "+ot))):zt.setAttribute("class",gt($t.replace(yt," ")))}}function At(ot,yt,zt){return null==yt?function Jt(){this.style.removeProperty(ot)}:"function"==typeof yt?function ne(){var Ee=yt.apply(this,arguments);null==Ee?this.style.removeProperty(ot):this.style.setProperty(ot,Ee,zt)}:function $t(){this.style.setProperty(ot,yt,zt)}}function Gt(ot,yt){return null==yt?function zt(){delete this[ot]}:"function"==typeof yt?function $t(){var ne=yt.apply(this,arguments);null==ne?delete this[ot]:this[ot]=ne}:function Jt(){this[ot]=yt}}function Wt(ot){return"function"==typeof ot?ot:(ot=i.ns.qualify(ot)).local?function zt(){return this.ownerDocument.createElementNS(ot.space,ot.local)}:function yt(){var Jt=this.ownerDocument,$t=this.namespaceURI;return $t===st&&Jt.documentElement.namespaceURI===st?Jt.createElement(ot):Jt.createElementNS($t,ot)}}function Pt(){var ot=this.parentNode;ot&&ot.removeChild(this)}function Vt(ot){return{__data__:ot}}function te(ot){return function(){return $(this,ot)}}function Qt(ot){return arguments.length||(ot=f),function(yt,zt){return yt&&zt?ot(yt.__data__,zt.__data__):!yt-!zt}}function Bt(ot,yt){for(var zt=0,Jt=ot.length;zt<Jt;zt++)for(var me,$t=ot[zt],ne=0,Ee=$t.length;ne<Ee;ne++)(me=$t[ne])&&yt(me,ne,zt);return ot}function Ot(ot){return Z(ot,qt),ot}i.ns={prefix:dt,qualify:function(ot){var yt=ot.indexOf(":"),zt=ot;return yt>=0&&"xmlns"!==(zt=ot.slice(0,yt))&&(ot=ot.slice(yt+1)),dt.hasOwnProperty(zt)?{space:dt[zt],local:ot}:ot}},X.attr=function(ot,yt){if(arguments.length<2){if("string"==typeof ot){var zt=this.node();return(ot=i.ns.qualify(ot)).local?zt.getAttributeNS(ot.space,ot.local):zt.getAttribute(ot)}for(yt in ot)this.each(bt(yt,ot[yt]));return this}return this.each(bt(ot,yt))},X.classed=function(ot,yt){if(arguments.length<2){if("string"==typeof ot){var zt=this.node(),Jt=(ot=It(ot)).length,$t=-1;if(yt=zt.classList){for(;++$t<Jt;)if(!yt.contains(ot[$t]))return!1}else for(yt=zt.getAttribute("class");++$t<Jt;)if(!Lt(ot[$t]).test(yt))return!1;return!0}for(yt in ot)this.each(Mt(yt,ot[yt]));return this}return this.each(Mt(ot,yt))},X.style=function(ot,yt,zt){var Jt=arguments.length;if(Jt<3){if("string"!=typeof ot){for(zt in Jt<2&&(yt=""),ot)this.each(At(zt,ot[zt],yt));return this}if(Jt<2){var $t=this.node();return e($t).getComputedStyle($t,null).getPropertyValue(ot)}zt=""}return this.each(At(ot,yt,zt))},X.property=function(ot,yt){if(arguments.length<2){if("string"==typeof ot)return this.node()[ot];for(yt in ot)this.each(Gt(yt,ot[yt]));return this}return this.each(Gt(ot,yt))},X.text=function(ot){return arguments.length?this.each("function"==typeof ot?function(){var yt=ot.apply(this,arguments);this.textContent=null==yt?"":yt}:null==ot?function(){this.textContent=""}:function(){this.textContent=ot}):this.node().textContent},X.html=function(ot){return arguments.length?this.each("function"==typeof ot?function(){var yt=ot.apply(this,arguments);this.innerHTML=null==yt?"":yt}:null==ot?function(){this.innerHTML=""}:function(){this.innerHTML=ot}):this.node().innerHTML},X.append=function(ot){return ot=Wt(ot),this.select(function(){return this.appendChild(ot.apply(this,arguments))})},X.insert=function(ot,yt){return ot=Wt(ot),yt=rt(yt),this.select(function(){return this.insertBefore(ot.apply(this,arguments),yt.apply(this,arguments)||null)})},X.remove=function(){return this.each(Pt)},X.data=function(ot,yt){var $t,ne,zt=-1,Jt=this.length;if(!arguments.length){for(ot=new Array(Jt=($t=this[0]).length);++zt<Jt;)(ne=$t[zt])&&(ot[zt]=ne.__data__);return ot}function Ee(tr,Cr){var Sr,un,Xr,Qr=tr.length,rn=Cr.length,Rr=Math.min(Qr,rn),kr=new Array(rn),Vr=new Array(rn),on=new Array(Qr);if(yt){var oa,kn=new L,ta=new Array(Qr);for(Sr=-1;++Sr<Qr;)(un=tr[Sr])&&(kn.has(oa=yt.call(un,un.__data__,Sr))?on[Sr]=un:kn.set(oa,un),ta[Sr]=oa);for(Sr=-1;++Sr<rn;)(un=kn.get(oa=yt.call(Cr,Xr=Cr[Sr],Sr)))?!0!==un&&(kr[Sr]=un,un.__data__=Xr):Vr[Sr]=Vt(Xr),kn.set(oa,!0);for(Sr=-1;++Sr<Qr;)Sr in ta&&!0!==kn.get(ta[Sr])&&(on[Sr]=tr[Sr])}else{for(Sr=-1;++Sr<Rr;)Xr=Cr[Sr],(un=tr[Sr])?(un.__data__=Xr,kr[Sr]=un):Vr[Sr]=Vt(Xr);for(;Sr<rn;++Sr)Vr[Sr]=Vt(Cr[Sr]);for(;Sr<Qr;++Sr)on[Sr]=tr[Sr]}Vr.update=kr,Vr.parentNode=kr.parentNode=on.parentNode=tr.parentNode,me.push(Vr),Oe.push(kr),Qe.push(on)}var me=Ot([]),Oe=G([]),Qe=G([]);if("function"==typeof ot)for(;++zt<Jt;)Ee($t=this[zt],ot.call($t,$t.parentNode.__data__,zt));else for(;++zt<Jt;)Ee($t=this[zt],ot);return Oe.enter=function(){return me},Oe.exit=function(){return Qe},Oe},X.datum=function(ot){return arguments.length?this.property("__data__",ot):this.property("__data__")},X.filter=function(ot){var zt,Jt,$t,yt=[];"function"!=typeof ot&&(ot=te(ot));for(var ne=0,Ee=this.length;ne<Ee;ne++){yt.push(zt=[]),zt.parentNode=(Jt=this[ne]).parentNode;for(var me=0,Oe=Jt.length;me<Oe;me++)($t=Jt[me])&&ot.call($t,$t.__data__,me,ne)&&zt.push($t)}return G(yt)},X.order=function(){for(var ot=-1,yt=this.length;++ot<yt;)for(var ne,zt=this[ot],Jt=zt.length-1,$t=zt[Jt];--Jt>=0;)(ne=zt[Jt])&&($t&&$t!==ne.nextSibling&&$t.parentNode.insertBefore(ne,$t),$t=ne);return this},X.sort=function(ot){ot=Qt.apply(this,arguments);for(var yt=-1,zt=this.length;++yt<zt;)this[yt].sort(ot);return this.order()},X.each=function(ot){return Bt(this,function(yt,zt,Jt){ot.call(yt,yt.__data__,zt,Jt)})},X.call=function(ot){var yt=C(arguments);return ot.apply(yt[0]=this,yt),this},X.empty=function(){return!this.node()},X.node=function(){for(var ot=0,yt=this.length;ot<yt;ot++)for(var zt=this[ot],Jt=0,$t=zt.length;Jt<$t;Jt++){var ne=zt[Jt];if(ne)return ne}return null},X.size=function(){var ot=0;return Bt(this,function(){++ot}),ot};var qt=[];function ie(ot){var yt,zt;return function(Jt,$t,ne){var Oe,Ee=ot[ne].update,me=Ee.length;for(ne!=zt&&(zt=ne,yt=0),$t>=yt&&(yt=$t+1);!(Oe=Ee[yt])&&++yt<me;);return Oe}}function oe(ot,yt,zt){var Jt="__on"+ot,$t=ot.indexOf("."),ne=de;$t>0&&(ot=ot.slice(0,$t));var Ee=pe.get(ot);function me(){var tr=this[Jt];tr&&(this.removeEventListener(ot,tr,tr.$),delete this[Jt])}return Ee&&(ot=Ee,ne=Fe),$t?yt?function Oe(){var tr=ne(yt,C(arguments));me.call(this),this.addEventListener(ot,this[Jt]=tr,tr.$=zt),tr._=yt}:me:yt?H:function Qe(){var Cr,tr=new RegExp("^__on([^.]+)"+i.requote(ot)+"$");for(var Sr in this)if(Cr=Sr.match(tr)){var Qr=this[Sr];this.removeEventListener(Cr[1],Qr,Qr.$),delete this[Sr]}}}i.selection.enter=Ot,i.selection.enter.prototype=qt,qt.append=X.append,qt.empty=X.empty,qt.node=X.node,qt.call=X.call,qt.size=X.size,qt.select=function(ot){for(var zt,Jt,$t,ne,Ee,yt=[],me=-1,Oe=this.length;++me<Oe;){$t=(ne=this[me]).update,yt.push(zt=[]),zt.parentNode=ne.parentNode;for(var Qe=-1,tr=ne.length;++Qe<tr;)(Ee=ne[Qe])?(zt.push($t[Qe]=Jt=ot.call(ne.parentNode,Ee.__data__,Qe,me)),Jt.__data__=Ee.__data__):zt.push(null)}return G(yt)},qt.insert=function(ot,yt){return arguments.length<2&&(yt=ie(this)),X.insert.call(this,ot,yt)},i.select=function(ot){var yt;return"string"==typeof ot?(yt=[K(ot,u)]).parentNode=u.documentElement:(yt=[ot]).parentNode=y(ot),G([yt])},i.selectAll=function(ot){var yt;return"string"==typeof ot?(yt=C(at(ot,u))).parentNode=u.documentElement:(yt=C(ot)).parentNode=null,G([yt])},X.on=function(ot,yt,zt){var Jt=arguments.length;if(Jt<3){if("string"!=typeof ot){for(zt in Jt<2&&(yt=!1),ot)this.each(oe(zt,ot[zt],yt));return this}if(Jt<2)return(Jt=this.node()["__on"+ot])&&Jt._;zt=!1}return this.each(oe(ot,yt,zt))};var pe=i.map({mouseenter:"mouseover",mouseleave:"mouseout"});function de(ot,yt){return function(zt){var Jt=i.event;i.event=zt,yt[0]=this.__data__;try{ot.apply(this,yt)}finally{i.event=Jt}}}function Fe(ot,yt){var zt=de(ot,yt);return function(Jt){var ne=Jt.relatedTarget;(!ne||ne!==this&&!(8&ne.compareDocumentPosition(this)))&&zt.call(this,Jt)}}u&&pe.forEach(function(ot){"on"+ot in u&&pe.remove(ot)});var Kt,Et=0;function St(ot){var yt=".dragsuppress-"+ ++Et,zt="click"+yt,Jt=i.select(e(ot)).on("touchmove"+yt,it).on("dragstart"+yt,it).on("selectstart"+yt,it);if(null==Kt&&(Kt=!("onselectstart"in ot)&&z(ot.style,"userSelect")),Kt){var $t=y(ot).style,ne=$t[Kt];$t[Kt]="none"}return function(Ee){if(Jt.on(yt,null),Kt&&($t[Kt]=ne),Ee){var me=function(){Jt.on(zt,null)};Jt.on(zt,function(){it(),me()},!0),setTimeout(me,0)}}}i.mouse=function(ot){return Ft(ot,ut())};var Dt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ft(ot,yt){yt.changedTouches&&(yt=yt.changedTouches[0]);var zt=ot.ownerSVGElement||ot;if(zt.createSVGPoint){var Jt=zt.createSVGPoint();if(Dt<0){var $t=e(ot);if($t.scrollX||$t.scrollY){var ne=(zt=i.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Dt=!(ne.f||ne.e),zt.remove()}}return Dt?(Jt.x=yt.pageX,Jt.y=yt.pageY):(Jt.x=yt.clientX,Jt.y=yt.clientY),[(Jt=Jt.matrixTransform(ot.getScreenCTM().inverse())).x,Jt.y]}var Ee=ot.getBoundingClientRect();return[yt.clientX-Ee.left-ot.clientLeft,yt.clientY-Ee.top-ot.clientTop]}function Nt(){return i.event.changedTouches[0].identifier}i.touch=function(ot,yt,zt){if(arguments.length<3&&(zt=yt,yt=ut().changedTouches),yt)for(var ne,Jt=0,$t=yt.length;Jt<$t;++Jt)if((ne=yt[Jt]).identifier===zt)return Ft(ot,ne)},i.behavior.drag=function(){var ot=Q($t,"drag","dragstart","dragend"),yt=null,zt=ne(H,i.mouse,e,"mousemove","mouseup"),Jt=ne(Nt,i.touch,O,"touchmove","touchend");function $t(){this.on("mousedown.drag",zt).on("touchstart.drag",Jt)}function ne(Ee,me,Oe,Qe,tr){return function(){var on,Cr=this,Sr=i.event.target.correspondingElement||i.event.target,Qr=Cr.parentNode,rn=ot.of(Cr,arguments),Rr=0,kr=Ee(),Vr=".drag"+(null==kr?"":"-"+kr),un=i.select(Oe(Sr)).on(Qe+Vr,ta).on(tr+Vr,oa),Xr=St(Sr),kn=me(Qr,kr);function ta(){var aa,ma,na=me(Qr,kr);!na||(Rr|=(aa=na[0]-kn[0])|(ma=na[1]-kn[1]),kn=na,rn({type:"drag",x:na[0]+on[0],y:na[1]+on[1],dx:aa,dy:ma}))}function oa(){!me(Qr,kr)||(un.on(Qe+Vr,null).on(tr+Vr,null),Xr(Rr),rn({type:"dragend"}))}on=yt?[(on=yt.apply(Cr,arguments)).x-kn[0],on.y-kn[1]]:[0,0],rn({type:"dragstart"})}}return $t.origin=function(Ee){return arguments.length?(yt=Ee,$t):yt},i.rebind($t,ot,"on")},i.touches=function(ot,yt){return arguments.length<2&&(yt=ut().touches),yt?C(yt).map(function(zt){var Jt=Ft(ot,zt);return Jt.identifier=zt.identifier,Jt}):[]};var Rt=1e-6,ft=Math.PI,pt=2*ft,kt=pt-Rt,Zt=ft/2,ee=ft/180,se=180/ft;function Ke(ot,yt,zt){return(yt[0]-ot[0])*(zt[1]-ot[1])-(yt[1]-ot[1])*(zt[0]-ot[0])}function Pe(ot){return ot>1?Zt:ot<-1?-Zt:Math.asin(ot)}function gr(ot){return((ot=Math.exp(ot))+1/ot)/2}var Ye=Math.SQRT2;i.interpolateZoom=function(ot,yt){var Cr,Sr,zt=ot[0],Jt=ot[1],$t=ot[2],me=yt[2],Oe=yt[0]-zt,Qe=yt[1]-Jt,tr=Oe*Oe+Qe*Qe;if(tr<1e-12)Sr=Math.log(me/$t)/Ye,Cr=function(on){return[zt+on*Oe,Jt+on*Qe,$t*Math.exp(Ye*on*Sr)]};else{var Qr=Math.sqrt(tr),rn=(me*me-$t*$t+4*tr)/(2*$t*2*Qr),Rr=(me*me-$t*$t-4*tr)/(2*me*2*Qr),kr=Math.log(Math.sqrt(rn*rn+1)-rn),Vr=Math.log(Math.sqrt(Rr*Rr+1)-Rr);Sr=(Vr-kr)/Ye,Cr=function(on){var un=on*Sr,Xr=gr(kr),kn=$t/(2*Qr)*(Xr*function ue(ot){return((ot=Math.exp(2*ot))-1)/(ot+1)}(Ye*un+kr)-function Ge(ot){return((ot=Math.exp(ot))-1/ot)/2}(kr));return[zt+kn*Oe,Jt+kn*Qe,$t*Xr/gr(Ye*un+kr)]}}return Cr.duration=1e3*Sr,Cr},i.behavior.zoom=function(){var yt,zt,Jt,Cr,Qr,Rr,kr,Vr,on,ot={x:0,y:0,k:1},$t=[960,500],ne=ce,Ee=250,me=0,Oe="mousedown.zoom",Qe="mousemove.zoom",tr="mouseup.zoom",Sr="touchstart.zoom",rn=Q(un,"zoomstart","zoom","zoomend");function un(Jn){Jn.on(Oe,Sa).on(ve+".zoom",mi).on("dblclick.zoom",ja).on(Sr,Ua)}function Xr(Jn){return[(Jn[0]-ot.x)/ot.k,(Jn[1]-ot.y)/ot.k]}function ta(Jn){ot.k=Math.max(ne[0],Math.min(ne[1],Jn))}function oa(Jn,La){La=function kn(Jn){return[Jn[0]*ot.k+ot.x,Jn[1]*ot.k+ot.y]}(La),ot.x+=Jn[0]-La[0],ot.y+=Jn[1]-La[1]}function na(Jn,La,Ea,Xn){Jn.__chart__={x:ot.x,y:ot.y,k:ot.k},ta(Math.pow(2,Xn)),oa(zt=La,Ea),Jn=i.select(Jn),Ee>0&&(Jn=Jn.transition().duration(Ee)),Jn.call(un.event)}function aa(){kr&&kr.domain(Rr.range().map(function(Jn){return(Jn-ot.x)/ot.k}).map(Rr.invert)),on&&on.domain(Vr.range().map(function(Jn){return(Jn-ot.y)/ot.k}).map(Vr.invert))}function ma(Jn){me++||Jn({type:"zoomstart"})}function da(Jn){aa(),Jn({type:"zoom",scale:ot.k,translate:[ot.x,ot.y]})}function pa(Jn){--me||(Jn({type:"zoomend"}),zt=null)}function Sa(){var Jn=this,La=rn.of(Jn,arguments),Ea=0,Xn=i.select(e(Jn)).on(Qe,di).on(tr,Ai),ca=Xr(i.mouse(Jn)),ii=St(Jn);function di(){Ea=1,oa(i.mouse(Jn),ca),da(La)}function Ai(){Xn.on(Qe,null).on(tr,null),ii(Ea),pa(La)}Fr.call(Jn),ma(La)}function Ua(){var ca,Jn=this,La=rn.of(Jn,arguments),Ea={},Xn=0,ii=".zoom-"+i.event.changedTouches[0].identifier,di="touchmove"+ii,Ai="touchend"+ii,ri=[],Di=i.select(Jn),Mi=St(Jn);function Vi(){var Va=i.touches(Jn);return ca=ot.k,Va.forEach(function(Wa){Wa.identifier in Ea&&(Ea[Wa.identifier]=Xr(Wa))}),Va}function ti(){var Va=i.event.target;i.select(Va).on(di,xl).on(Ai,Ls),ri.push(Va);for(var Wa=i.event.changedTouches,Bo=0,So=Wa.length;Bo<So;++Bo)Ea[Wa[Bo].identifier]=null;var io=Vi(),Eo=Date.now();if(1===io.length)Eo-Qr<500&&(na(Jn,No=io[0],Ea[No.identifier],Math.floor(Math.log(ot.k)/Math.LN2)+1),it()),Qr=Eo;else if(io.length>1){var No,_o=io[1],Ki=(No=io[0])[0]-_o[0],Ps=No[1]-_o[1];Xn=Ki*Ki+Ps*Ps}}function xl(){var Wa,Bo,So,io,Va=i.touches(Jn);Fr.call(Jn);for(var Eo=0,No=Va.length;Eo<No;++Eo,io=null)if(io=Ea[(So=Va[Eo]).identifier]){if(Bo)break;Wa=So,Bo=io}if(io){var _o=(_o=So[0]-Wa[0])*_o+(_o=So[1]-Wa[1])*_o,Ki=Xn&&Math.sqrt(_o/Xn);Wa=[(Wa[0]+So[0])/2,(Wa[1]+So[1])/2],Bo=[(Bo[0]+io[0])/2,(Bo[1]+io[1])/2],ta(Ki*ca)}Qr=null,oa(Wa,Bo),da(La)}function Ls(){if(i.event.touches.length){for(var Va=i.event.changedTouches,Wa=0,Bo=Va.length;Wa<Bo;++Wa)delete Ea[Va[Wa].identifier];for(var So in Ea)return void Vi()}i.selectAll(ri).on(ii,null),Di.on(Oe,Sa).on(Sr,Ua),Mi(),pa(La)}ti(),ma(La),Di.on(Oe,null).on(Sr,ti)}function mi(){var Jn=rn.of(this,arguments);Cr?clearTimeout(Cr):(Fr.call(this),yt=Xr(zt=Jt||i.mouse(this)),ma(Jn)),Cr=setTimeout(function(){Cr=null,pa(Jn)},50),it(),ta(Math.pow(2,.002*re())*ot.k),oa(zt,yt),da(Jn)}function ja(){var Jn=i.mouse(this),La=Math.log(ot.k)/Math.LN2;na(this,Jn,Xr(Jn),i.event.shiftKey?Math.ceil(La)-1:Math.floor(La)+1)}return ve||(ve="onwheel"in u?(re=function(){return-i.event.deltaY*(i.event.deltaMode?120:1)},"wheel"):"onmousewheel"in u?(re=function(){return i.event.wheelDelta},"mousewheel"):(re=function(){return-i.event.detail},"MozMousePixelScroll")),un.event=function(Jn){Jn.each(function(){var La=rn.of(this,arguments),Ea=ot;zn?i.select(this).transition().each("start.zoom",function(){ot=this.__chart__||{x:0,y:0,k:1},ma(La)}).tween("zoom:zoom",function(){var Xn=$t[0],ii=zt?zt[0]:Xn/2,di=zt?zt[1]:$t[1]/2,Ai=i.interpolateZoom([(ii-ot.x)/ot.k,(di-ot.y)/ot.k,Xn/ot.k],[(ii-Ea.x)/Ea.k,(di-Ea.y)/Ea.k,Xn/Ea.k]);return function(ri){var Di=Ai(ri),Mi=Xn/Di[2];this.__chart__=ot={x:ii-Di[0]*Mi,y:di-Di[1]*Mi,k:Mi},da(La)}}).each("interrupt.zoom",function(){pa(La)}).each("end.zoom",function(){pa(La)}):(this.__chart__=ot,ma(La),da(La),pa(La))})},un.translate=function(Jn){return arguments.length?(ot={x:+Jn[0],y:+Jn[1],k:ot.k},aa(),un):[ot.x,ot.y]},un.scale=function(Jn){return arguments.length?(ot={x:ot.x,y:ot.y,k:null},ta(+Jn),aa(),un):ot.k},un.scaleExtent=function(Jn){return arguments.length?(ne=null==Jn?ce:[+Jn[0],+Jn[1]],un):ne},un.center=function(Jn){return arguments.length?(Jt=Jn&&[+Jn[0],+Jn[1]],un):Jt},un.size=function(Jn){return arguments.length?($t=Jn&&[+Jn[0],+Jn[1]],un):$t},un.duration=function(Jn){return arguments.length?(Ee=+Jn,un):Ee},un.x=function(Jn){return arguments.length?(kr=Jn,Rr=Jn.copy(),ot={x:0,y:0,k:1},un):kr},un.y=function(Jn){return arguments.length?(on=Jn,Vr=Jn.copy(),ot={x:0,y:0,k:1},un):on},i.rebind(un,rn,"on")};var re,ve,ce=[0,1/0];function be(){}function Ae(ot,yt,zt){return this instanceof Ae?(this.h=+ot,this.s=+yt,void(this.l=+zt)):arguments.length<2?ot instanceof Ae?new Ae(ot.h,ot.s,ot.l):Mr(""+ot,Wr,Ae):new Ae(ot,yt,zt)}i.color=be,be.prototype.toString=function(){return this.rgb()+""},i.hsl=Ae;var Te=Ae.prototype=new be;function Re(ot,yt,zt){var Jt,$t;function Ee(me){return Math.round(255*function ne(me){return me>360?me-=360:me<0&&(me+=360),me<60?Jt+($t-Jt)*me/60:me<180?$t:me<240?Jt+($t-Jt)*(240-me)/60:Jt}(me))}return ot=isNaN(ot)?0:(ot%=360)<0?ot+360:ot,yt=isNaN(yt)||yt<0?0:yt>1?1:yt,Jt=2*(zt=zt<0?0:zt>1?1:zt)-($t=zt<=.5?zt*(1+yt):zt+yt-zt*yt),new sr(Ee(ot+120),Ee(ot),Ee(ot-120))}function Ie(ot,yt,zt){return this instanceof Ie?(this.h=+ot,this.c=+yt,void(this.l=+zt)):arguments.length<2?ot instanceof Ie?new Ie(ot.h,ot.c,ot.l):qe(ot instanceof nr?ot.l:(ot=nn((ot=i.rgb(ot)).r,ot.g,ot.b)).l,ot.a,ot.b):new Ie(ot,yt,zt)}Te.brighter=function(ot){return ot=Math.pow(.7,arguments.length?ot:1),new Ae(this.h,this.s,this.l/ot)},Te.darker=function(ot){return ot=Math.pow(.7,arguments.length?ot:1),new Ae(this.h,this.s,ot*this.l)},Te.rgb=function(){return Re(this.h,this.s,this.l)},i.hcl=Ie;var Xe=Ie.prototype=new be;function ar(ot,yt,zt){return isNaN(ot)&&(ot=0),isNaN(yt)&&(yt=0),new nr(zt,Math.cos(ot*=ee)*yt,Math.sin(ot)*yt)}function nr(ot,yt,zt){return this instanceof nr?(this.l=+ot,this.a=+yt,void(this.b=+zt)):arguments.length<2?ot instanceof nr?new nr(ot.l,ot.a,ot.b):ot instanceof Ie?ar(ot.h,ot.c,ot.l):nn((ot=sr(ot)).r,ot.g,ot.b):new nr(ot,yt,zt)}Xe.brighter=function(ot){return new Ie(this.h,this.c,Math.min(100,this.l+cr*(arguments.length?ot:1)))},Xe.darker=function(ot){return new Ie(this.h,this.c,Math.max(0,this.l-cr*(arguments.length?ot:1)))},Xe.rgb=function(){return ar(this.h,this.c,this.l).rgb()},i.lab=nr;var cr=18,Ce=nr.prototype=new be;function We(ot,yt,zt){var Jt=(ot+16)/116,$t=Jt+yt/500,ne=Jt-zt/200;return new sr(De(3.2404542*($t=.95047*or($t))-1.5371385*(Jt=1*or(Jt))-.4985314*(ne=1.08883*or(ne))),De(-.969266*$t+1.8760108*Jt+.041556*ne),De(.0556434*$t-.2040259*Jt+1.0572252*ne))}function qe(ot,yt,zt){return ot>0?new Ie(Math.atan2(zt,yt)*se,Math.sqrt(yt*yt+zt*zt),ot):new Ie(NaN,NaN,ot)}function or(ot){return ot>.206893034?ot*ot*ot:(ot-.13793103448275862)/7.787037}function _e(ot){return ot>.008856?Math.pow(ot,.3333333333333333):7.787037*ot+.13793103448275862}function De(ot){return Math.round(255*(ot<=.00304?12.92*ot:1.055*Math.pow(ot,.4166666666666667)-.055))}function sr(ot,yt,zt){return this instanceof sr?(this.r=~~ot,this.g=~~yt,void(this.b=~~zt)):arguments.length<2?ot instanceof sr?new sr(ot.r,ot.g,ot.b):Mr(""+ot,sr,Re):new sr(ot,yt,zt)}function yr(ot){return new sr(ot>>16,ot>>8&255,255&ot)}function dr(ot){return yr(ot)+""}Ce.brighter=function(ot){return new nr(Math.min(100,this.l+cr*(arguments.length?ot:1)),this.a,this.b)},Ce.darker=function(ot){return new nr(Math.max(0,this.l-cr*(arguments.length?ot:1)),this.a,this.b)},Ce.rgb=function(){return We(this.l,this.a,this.b)},i.rgb=sr;var Pr=sr.prototype=new be;function Jr(ot){return ot<16?"0"+Math.max(0,ot).toString(16):Math.min(255,ot).toString(16)}function Mr(ot,yt,zt){var Ee,me,Oe,Jt=0,$t=0,ne=0;if(Ee=/([a-z]+)\((.*)\)/.exec(ot=ot.toLowerCase()))switch(me=Ee[2].split(","),Ee[1]){case"hsl":return zt(parseFloat(me[0]),parseFloat(me[1])/100,parseFloat(me[2])/100);case"rgb":return yt(Dn(me[0]),Dn(me[1]),Dn(me[2]))}return(Oe=hn.get(ot))?yt(Oe.r,Oe.g,Oe.b):(null!=ot&&"#"===ot.charAt(0)&&!isNaN(Oe=parseInt(ot.slice(1),16))&&(4===ot.length?(Jt=(3840&Oe)>>4,Jt|=Jt>>4,$t=240&Oe,$t|=$t>>4,ne=15&Oe,ne|=ne<<4):7===ot.length&&(Jt=(16711680&Oe)>>16,$t=(65280&Oe)>>8,ne=255&Oe)),yt(Jt,$t,ne))}function Wr(ot,yt,zt){var Ee,me,Jt=Math.min(ot/=255,yt/=255,zt/=255),$t=Math.max(ot,yt,zt),ne=$t-Jt,Oe=($t+Jt)/2;return ne?(me=Oe<.5?ne/($t+Jt):ne/(2-$t-Jt),Ee=ot==$t?(yt-zt)/ne+(yt<zt?6:0):yt==$t?(zt-ot)/ne+2:(ot-yt)/ne+4,Ee*=60):(Ee=NaN,me=Oe>0&&Oe<1?0:Ee),new Ae(Ee,me,Oe)}function nn(ot,yt,zt){var Jt=_e((.4124564*(ot=Nr(ot))+.3575761*(yt=Nr(yt))+.1804375*(zt=Nr(zt)))/.95047),$t=_e((.2126729*ot+.7151522*yt+.072175*zt)/1);return nr(116*$t-16,500*(Jt-$t),200*($t-_e((.0193339*ot+.119192*yt+.9503041*zt)/1.08883)))}function Nr(ot){return(ot/=255)<=.04045?ot/12.92:Math.pow((ot+.055)/1.055,2.4)}function Dn(ot){var yt=parseFloat(ot);return"%"===ot.charAt(ot.length-1)?Math.round(2.55*yt):yt}Pr.brighter=function(ot){ot=Math.pow(.7,arguments.length?ot:1);var yt=this.r,zt=this.g,Jt=this.b,$t=30;return yt||zt||Jt?(yt&&yt<$t&&(yt=$t),zt&&zt<$t&&(zt=$t),Jt&&Jt<$t&&(Jt=$t),new sr(Math.min(255,yt/ot),Math.min(255,zt/ot),Math.min(255,Jt/ot))):new sr($t,$t,$t)},Pr.darker=function(ot){return new sr((ot=Math.pow(.7,arguments.length?ot:1))*this.r,ot*this.g,ot*this.b)},Pr.hsl=function(){return Wr(this.r,this.g,this.b)},Pr.toString=function(){return"#"+Jr(this.r)+Jr(this.g)+Jr(this.b)};var hn=i.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function hr(ot){return"function"==typeof ot?ot:function(){return ot}}function Ar(ot){return function(yt,zt,Jt){return 2===arguments.length&&"function"==typeof zt&&(Jt=zt,zt=null),Br(yt,zt,ot,Jt)}}function Br(ot,yt,zt,Jt){var $t={},ne=i.dispatch("beforesend","progress","load","error"),Ee={},me=new XMLHttpRequest,Oe=null;function Qe(){var Cr,tr=me.status;if(!tr&&function an(ot){var yt=ot.responseType;return yt&&"text"!==yt?ot.response:ot.responseText}(me)||tr>=200&&tr<300||304===tr){try{Cr=zt.call($t,me)}catch(Sr){return void ne.error.call($t,Sr)}ne.load.call($t,Cr)}else ne.error.call($t,me)}return self.XDomainRequest&&!("withCredentials"in me)&&/^(http(s)?:)?\/\//.test(ot)&&(me=new XDomainRequest),"onload"in me?me.onload=me.onerror=Qe:me.onreadystatechange=function(){me.readyState>3&&Qe()},me.onprogress=function(tr){var Cr=i.event;i.event=tr;try{ne.progress.call($t,me)}finally{i.event=Cr}},$t.header=function(tr,Cr){return tr=(tr+"").toLowerCase(),arguments.length<2?Ee[tr]:(null==Cr?delete Ee[tr]:Ee[tr]=Cr+"",$t)},$t.mimeType=function(tr){return arguments.length?(yt=null==tr?null:tr+"",$t):yt},$t.responseType=function(tr){return arguments.length?(Oe=tr,$t):Oe},$t.response=function(tr){return zt=tr,$t},["get","post"].forEach(function(tr){$t[tr]=function(){return $t.send.apply($t,[tr].concat(C(arguments)))}}),$t.send=function(tr,Cr,Sr){if(2===arguments.length&&"function"==typeof Cr&&(Sr=Cr,Cr=null),me.open(tr,ot,!0),null!=yt&&!("accept"in Ee)&&(Ee.accept=yt+",*/*"),me.setRequestHeader)for(var Qr in Ee)me.setRequestHeader(Qr,Ee[Qr]);return null!=yt&&me.overrideMimeType&&me.overrideMimeType(yt),null!=Oe&&(me.responseType=Oe),null!=Sr&&$t.on("error",Sr).on("load",function(rn){Sr(null,rn)}),ne.beforesend.call($t,me),me.send(null==Cr?null:Cr),$t},$t.abort=function(){return me.abort(),$t},i.rebind($t,ne,"on"),null==Jt?$t:$t.get(function Or(ot){return 1===ot.length?function(yt,zt){ot(null==yt?zt:null)}:ot}(Jt))}hn.forEach(function(ot,yt){hn.set(ot,yr(yt))}),i.functor=hr,i.xhr=Ar(O),i.dsv=function(ot,yt){var zt=new RegExp('["'+ot+"\n]"),Jt=ot.charCodeAt(0);function $t(Qe,tr,Cr){arguments.length<3&&(Cr=tr,tr=null);var Sr=Br(Qe,yt,null==tr?ne:Ee(tr),Cr);return Sr.row=function(Qr){return arguments.length?Sr.response(null==(tr=Qr)?ne:Ee(Qr)):tr},Sr}function ne(Qe){return $t.parse(Qe.responseText)}function Ee(Qe){return function(tr){return $t.parse(tr.responseText,Qe)}}function me(Qe){return Qe.map(Oe).join(ot)}function Oe(Qe){return zt.test(Qe)?'"'+Qe.replace(/\"/g,'""')+'"':Qe}return $t.parse=function(Qe,tr){var Cr;return $t.parseRows(Qe,function(Sr,Qr){if(Cr)return Cr(Sr,Qr-1);var rn=function(Rr){for(var kr={},Vr=Sr.length,on=0;on<Vr;++on)kr[Sr[on]]=Rr[on];return kr};Cr=tr?function(Rr,kr){return tr(rn(Rr),kr)}:rn})},$t.parseRows=function(Qe,tr){var Vr,on,Cr={},Sr={},Qr=[],rn=Qe.length,Rr=0,kr=0;function un(){if(Rr>=rn)return Sr;if(on)return on=!1,Cr;var kn=Rr;if(34===Qe.charCodeAt(kn)){for(var ta=kn;ta++<rn;)if(34===Qe.charCodeAt(ta)){if(34!==Qe.charCodeAt(ta+1))break;++ta}return Rr=ta+2,13===(oa=Qe.charCodeAt(ta+1))?(on=!0,10===Qe.charCodeAt(ta+2)&&++Rr):10===oa&&(on=!0),Qe.slice(kn+1,ta).replace(/""/g,'"')}for(;Rr<rn;){var oa,na=1;if(10===(oa=Qe.charCodeAt(Rr++)))on=!0;else if(13===oa)on=!0,10===Qe.charCodeAt(Rr)&&(++Rr,++na);else if(oa!==Jt)continue;return Qe.slice(kn,Rr-na)}return Qe.slice(kn)}for(;(Vr=un())!==Sr;){for(var Xr=[];Vr!==Cr&&Vr!==Sr;)Xr.push(Vr),Vr=un();tr&&null==(Xr=tr(Xr,kr++))||Qr.push(Xr)}return Qr},$t.format=function(Qe){if(Array.isArray(Qe[0]))return $t.formatRows(Qe);var tr=new k,Cr=[];return Qe.forEach(function(Sr){for(var Qr in Sr)tr.has(Qr)||Cr.push(tr.add(Qr))}),[Cr.map(Oe).join(ot)].concat(Qe.map(function(Sr){return Cr.map(function(Qr){return Oe(Sr[Qr])}).join(ot)})).join("\n")},$t.formatRows=function(Qe){return Qe.map(me).join("\n")},$t},i.csv=i.dsv(",","text/csv"),i.tsv=i.dsv("\t","text/tab-separated-values");var dn,pn,wn,Ln,Qn=this[z(this,"requestAnimationFrame")]||function(ot){setTimeout(ot,17)};function Nn(ot,yt,zt){var Jt=arguments.length;Jt<2&&(yt=0),Jt<3&&(zt=Date.now());var ne={c:ot,t:zt+yt,n:null};return pn?pn.n=ne:dn=ne,pn=ne,wn||(Ln=clearTimeout(Ln),wn=1,Qn(Zn)),ne}function Zn(){var ot=Bn(),yt=Wn()-ot;yt>24?(isFinite(yt)&&(clearTimeout(Ln),Ln=setTimeout(Zn,yt)),wn=0):(wn=1,Qn(Zn))}function Bn(){for(var ot=Date.now(),yt=dn;yt;)ot>=yt.t&&yt.c(ot-yt.t)&&(yt.c=null),yt=yt.n;return ot}function Wn(){for(var ot,yt=dn,zt=1/0;yt;)yt.c?(yt.t<zt&&(zt=yt.t),yt=(ot=yt).n):yt=ot?ot.n=yt.n:dn=yt.n;return pn=ot,zt}function wr(ot){return ot[0]}function en(ot){return ot[1]}function tn(ot){for(var yt=ot.length,zt=[0,1],Jt=2,$t=2;$t<yt;$t++){for(;Jt>1&&Ke(ot[zt[Jt-2]],ot[zt[Jt-1]],ot[$t])<=0;)--Jt;zt[Jt++]=$t}return zt.slice(0,Jt)}function gn(ot,yt){return ot[0]-yt[0]||ot[1]-yt[1]}i.timer=function(){Nn.apply(this,arguments)},i.timer.flush=function(){Bn(),Wn()},i.round=function(ot,yt){return yt?Math.round(ot*(yt=Math.pow(10,yt)))/yt:Math.round(ot)},i.geom={},i.geom.hull=function(ot){var yt=wr,zt=en;if(arguments.length)return Jt(ot);function Jt($t){if($t.length<3)return[];var me,ne=hr(yt),Ee=hr(zt),Oe=$t.length,Qe=[],tr=[];for(me=0;me<Oe;me++)Qe.push([+ne.call(this,$t[me],me),+Ee.call(this,$t[me],me),me]);for(Qe.sort(gn),me=0;me<Oe;me++)tr.push([Qe[me][0],-Qe[me][1]]);var Cr=tn(Qe),Sr=tn(tr),Qr=Sr[0]===Cr[0],rn=Sr[Sr.length-1]===Cr[Cr.length-1],Rr=[];for(me=Cr.length-1;me>=0;--me)Rr.push($t[Qe[Cr[me]][2]]);for(me=+Qr;me<Sr.length-rn;++me)Rr.push($t[Qe[Sr[me]][2]]);return Rr}return Jt.x=function($t){return arguments.length?(yt=$t,Jt):yt},Jt.y=function($t){return arguments.length?(zt=$t,Jt):zt},Jt},i.geom.polygon=function(ot){return Z(ot,Fn),ot};var Fn=i.geom.polygon.prototype=[];function Tn(ot,yt,zt){return(zt[0]-yt[0])*(ot[1]-yt[1])<(zt[1]-yt[1])*(ot[0]-yt[0])}function Mn(ot,yt,zt,Jt){var $t=ot[0],ne=zt[0],Ee=yt[0]-$t,me=Jt[0]-ne,Oe=ot[1],Qe=zt[1],tr=yt[1]-Oe,Cr=Jt[1]-Qe,Sr=(me*(Oe-Qe)-Cr*($t-ne))/(Cr*Ee-me*tr);return[$t+Sr*Ee,Oe+Sr*tr]}function In(ot){var yt=ot[0],zt=ot[ot.length-1];return!(yt[0]-zt[0]||yt[1]-zt[1])}Fn.area=function(){for(var zt,ot=-1,yt=this.length,Jt=this[yt-1],$t=0;++ot<yt;)$t+=(zt=Jt)[1]*(Jt=this[ot])[0]-zt[0]*Jt[1];return.5*$t},Fn.centroid=function(ot){var ne,me,yt=-1,zt=this.length,Jt=0,$t=0,Ee=this[zt-1];for(arguments.length||(ot=-1/(6*this.area()));++yt<zt;)Jt+=((ne=Ee)[0]+(Ee=this[yt])[0])*(me=ne[0]*Ee[1]-Ee[0]*ne[1]),$t+=(ne[1]+Ee[1])*me;return[Jt*ot,$t*ot]},Fn.clip=function(ot){for(var yt,ne,Ee,Oe,Qe,tr,zt=In(ot),Jt=-1,$t=this.length-In(this),me=this[$t-1];++Jt<$t;){for(yt=ot.slice(),ot.length=0,Oe=this[Jt],Qe=yt[(Ee=yt.length-zt)-1],ne=-1;++ne<Ee;)Tn(tr=yt[ne],me,Oe)?(Tn(Qe,me,Oe)||ot.push(Mn(Qe,tr,me,Oe)),ot.push(tr)):Tn(Qe,me,Oe)&&ot.push(Mn(Qe,tr,me,Oe)),Qe=tr;zt&&ot.push(ot[0]),me=Oe}return ot};var Gn,ua,ka,Tr,_r,Ze=[],fn=[];function sn(){co(this),this.edge=this.site=this.circle=null}function En(ot){var yt=Ze.pop()||new sn;return yt.site=ot,yt}function xn(ot){yn(ot),ka.remove(ot),Ze.push(ot),co(ot)}function vn(ot){var yt=ot.circle,zt=yt.x,Jt=yt.cy,$t={x:zt,y:Jt},ne=ot.P,Ee=ot.N,me=[ot];xn(ot);for(var Oe=ne;Oe.circle&&v(zt-Oe.circle.x)<Rt&&v(Jt-Oe.circle.cy)<Rt;)ne=Oe.P,me.unshift(Oe),xn(Oe),Oe=ne;me.unshift(Oe),yn(Oe);for(var Qe=Ee;Qe.circle&&v(zt-Qe.circle.x)<Rt&&v(Jt-Qe.circle.cy)<Rt;)Ee=Qe.N,me.push(Qe),xn(Qe),Qe=Ee;me.push(Qe),yn(Qe);var Cr,tr=me.length;for(Cr=1;Cr<tr;++Cr)to((Qe=me[Cr]).edge,(Oe=me[Cr-1]).site,Qe.site,$t);(Qe=me[tr-1]).edge=Ei((Oe=me[0]).site,Qe.site,null,$t),Zr(Oe),Zr(Qe)}function Lr(ot){for(var Jt,$t,ne,Ee,yt=ot.x,zt=ot.y,me=ka._;me;)if((ne=Er(me,zt)-yt)>Rt)me=me.L;else{if(!((Ee=yt-He(me,zt))>Rt)){ne>-Rt?(Jt=me.P,$t=me):Ee>-Rt?(Jt=me,$t=me.N):Jt=$t=me;break}if(!me.R){Jt=me;break}me=me.R}var Oe=En(ot);if(ka.insert(Jt,Oe),Jt||$t){if(Jt===$t)return yn(Jt),$t=En(Jt.site),ka.insert(Oe,$t),Oe.edge=$t.edge=Ei(Jt.site,Oe.site),Zr(Jt),void Zr($t);if(!$t)return void(Oe.edge=Ei(Jt.site,Oe.site));yn(Jt),yn($t);var Qe=Jt.site,tr=Qe.x,Cr=Qe.y,Sr=ot.x-tr,Qr=ot.y-Cr,rn=$t.site,Rr=rn.x-tr,kr=rn.y-Cr,Vr=2*(Sr*kr-Qr*Rr),on=Sr*Sr+Qr*Qr,un=Rr*Rr+kr*kr,Xr={x:(kr*on-Qr*un)/Vr+tr,y:(Sr*un-Rr*on)/Vr+Cr};to($t.edge,Qe,rn,Xr),Oe.edge=Ei(Qe,ot,null,Xr),$t.edge=Ei(ot,rn,null,Xr),Zr(Jt),Zr($t)}}function Er(ot,yt){var zt=ot.site,Jt=zt.x,$t=zt.y,ne=$t-yt;if(!ne)return Jt;var Ee=ot.P;if(!Ee)return-1/0;var me=(zt=Ee.site).x,Oe=zt.y,Qe=Oe-yt;if(!Qe)return me;var tr=me-Jt,Cr=1/ne-1/Qe,Sr=tr/Qe;return Cr?(-Sr+Math.sqrt(Sr*Sr-2*Cr*(tr*tr/(-2*Qe)-Oe+Qe/2+$t-ne/2)))/Cr+Jt:(Jt+me)/2}function He(ot,yt){var zt=ot.N;if(zt)return Er(zt,yt);var Jt=ot.site;return Jt.y===yt?Jt.x:1/0}function Dr(ot){this.site=ot,this.edges=[]}function je(ot,yt){return yt.angle-ot.angle}function ir(){co(this),this.x=this.y=this.arc=this.site=this.cy=null}function Zr(ot){var yt=ot.P,zt=ot.N;if(yt&&zt){var Jt=yt.site,$t=ot.site,ne=zt.site;if(Jt!==ne){var Ee=$t.x,me=$t.y,Oe=Jt.x-Ee,Qe=Jt.y-me,tr=ne.x-Ee,Cr=2*(Oe*(kr=ne.y-me)-Qe*tr);if(!(Cr>=-1e-12)){var Sr=Oe*Oe+Qe*Qe,Qr=tr*tr+kr*kr,rn=(kr*Sr-Qe*Qr)/Cr,Rr=(Oe*Qr-tr*Sr)/Cr,kr=Rr+me,Vr=fn.pop()||new ir;Vr.arc=ot,Vr.site=$t,Vr.x=rn+Ee,Vr.y=kr+Math.sqrt(rn*rn+Rr*Rr),Vr.cy=kr,ot.circle=Vr;for(var on=null,un=_r._;un;)if(Vr.y<un.y||Vr.y===un.y&&Vr.x<=un.x){if(!un.L){on=un.P;break}un=un.L}else{if(!un.R){on=un;break}un=un.R}_r.insert(on,Vr),on||(Tr=Vr)}}}}function yn(ot){var yt=ot.circle;yt&&(yt.P||(Tr=yt.N),_r.remove(yt),fn.push(yt),co(yt),ot.circle=null)}function $n(ot,yt){var zt=ot.b;if(zt)return!0;var kr,Vr,Jt=ot.a,$t=yt[0][0],ne=yt[1][0],Ee=yt[0][1],me=yt[1][1],Oe=ot.l,Qe=ot.r,tr=Oe.x,Cr=Oe.y,Sr=Qe.x,Qr=Qe.y,rn=(tr+Sr)/2;if(Qr===Cr){if(rn<$t||rn>=ne)return;if(tr>Sr){if(Jt){if(Jt.y>=me)return}else Jt={x:rn,y:Ee};zt={x:rn,y:me}}else{if(Jt){if(Jt.y<Ee)return}else Jt={x:rn,y:me};zt={x:rn,y:Ee}}}else if(Vr=(Cr+Qr)/2-(kr=(tr-Sr)/(Qr-Cr))*rn,kr<-1||kr>1)if(tr>Sr){if(Jt){if(Jt.y>=me)return}else Jt={x:(Ee-Vr)/kr,y:Ee};zt={x:(me-Vr)/kr,y:me}}else{if(Jt){if(Jt.y<Ee)return}else Jt={x:(me-Vr)/kr,y:me};zt={x:(Ee-Vr)/kr,y:Ee}}else if(Cr<Qr){if(Jt){if(Jt.x>=ne)return}else Jt={x:$t,y:kr*$t+Vr};zt={x:ne,y:kr*ne+Vr}}else{if(Jt){if(Jt.x<$t)return}else Jt={x:ne,y:kr*ne+Vr};zt={x:$t,y:kr*$t+Vr}}return ot.a=Jt,ot.b=zt,!0}function fa(ot,yt){this.l=ot,this.r=yt,this.a=this.b=null}function Ei(ot,yt,zt,Jt){var $t=new fa(ot,yt);return Gn.push($t),zt&&to($t,ot,yt,zt),Jt&&to($t,yt,ot,Jt),ua[ot.i].edges.push(new eo($t,ot,yt)),ua[yt.i].edges.push(new eo($t,yt,ot)),$t}function qi(ot,yt,zt){var Jt=new fa(ot,null);return Jt.a=yt,Jt.b=zt,Gn.push(Jt),Jt}function to(ot,yt,zt,Jt){ot.a||ot.b?ot.l===zt?ot.b=Jt:ot.a=Jt:(ot.a=Jt,ot.l=yt,ot.r=zt)}function eo(ot,yt,zt){var Jt=ot.a,$t=ot.b;this.edge=ot,this.site=yt,this.angle=zt?Math.atan2(zt.y-yt.y,zt.x-yt.x):ot.l===yt?Math.atan2($t.x-Jt.x,Jt.y-$t.y):Math.atan2(Jt.x-$t.x,$t.y-Jt.y)}function Fs(){this._=null}function co(ot){ot.U=ot.C=ot.L=ot.R=ot.P=ot.N=null}function Ga(ot,yt){var zt=yt,Jt=yt.R,$t=zt.U;$t?$t.L===zt?$t.L=Jt:$t.R=Jt:ot._=Jt,Jt.U=$t,zt.U=Jt,zt.R=Jt.L,zt.R&&(zt.R.U=zt),Jt.L=zt}function Yo(ot,yt){var zt=yt,Jt=yt.L,$t=zt.U;$t?$t.L===zt?$t.L=Jt:$t.R=Jt:ot._=Jt,Jt.U=$t,zt.U=Jt,zt.L=Jt.R,zt.L&&(zt.L.U=zt),Jt.R=zt}function El(ot){for(;ot.L;)ot=ot.L;return ot}function Ci(ot,yt){var Jt,$t,ne,zt=ot.sort(ro).pop();for(Gn=[],ua=new Array(ot.length),ka=new Fs,_r=new Fs;;)if(ne=Tr,zt&&(!ne||zt.y<ne.y||zt.y===ne.y&&zt.x<ne.x))(zt.x!==Jt||zt.y!==$t)&&(ua[zt.i]=new Dr(zt),Lr(zt),Jt=zt.x,$t=zt.y),zt=ot.pop();else{if(!ne)break;vn(ne.arc)}yt&&(function ea(ot){for(var $t,yt=Gn,zt=function Kn(ot,yt,zt,Jt){return function($t){var Rr,ne=$t.a,Ee=$t.b,me=ne.x,Oe=ne.y,Cr=0,Sr=1,Qr=Ee.x-me,rn=Ee.y-Oe;if(Rr=ot-me,Qr||!(Rr>0)){if(Rr/=Qr,Qr<0){if(Rr<Cr)return;Rr<Sr&&(Sr=Rr)}else if(Qr>0){if(Rr>Sr)return;Rr>Cr&&(Cr=Rr)}if(Rr=zt-me,Qr||!(Rr<0)){if(Rr/=Qr,Qr<0){if(Rr>Sr)return;Rr>Cr&&(Cr=Rr)}else if(Qr>0){if(Rr<Cr)return;Rr<Sr&&(Sr=Rr)}if(Rr=yt-Oe,rn||!(Rr>0)){if(Rr/=rn,rn<0){if(Rr<Cr)return;Rr<Sr&&(Sr=Rr)}else if(rn>0){if(Rr>Sr)return;Rr>Cr&&(Cr=Rr)}if(Rr=Jt-Oe,rn||!(Rr<0)){if(Rr/=rn,rn<0){if(Rr>Sr)return;Rr>Cr&&(Cr=Rr)}else if(rn>0){if(Rr<Cr)return;Rr<Sr&&(Sr=Rr)}return Cr>0&&($t.a={x:me+Cr*Qr,y:Oe+Cr*rn}),Sr<1&&($t.b={x:me+Sr*Qr,y:Oe+Sr*rn}),$t}}}}}}(ot[0][0],ot[0][1],ot[1][0],ot[1][1]),Jt=yt.length;Jt--;)(!$n($t=yt[Jt],ot)||!zt($t)||v($t.a.x-$t.b.x)<Rt&&v($t.a.y-$t.b.y)<Rt)&&($t.a=$t.b=null,yt.splice(Jt,1))}(yt),function Ve(ot){for(var ne,Ee,me,Oe,Cr,Sr,Qr,rn,Rr,kr,yt=ot[0][0],zt=ot[1][0],Jt=ot[0][1],$t=ot[1][1],Qe=ua,tr=Qe.length;tr--;)if((Cr=Qe[tr])&&Cr.prepare())for(rn=(Qr=Cr.edges).length,Sr=0;Sr<rn;)me=(kr=Qr[Sr].end()).x,Oe=kr.y,Ee=(Rr=Qr[++Sr%rn].start()).y,(v(me-(ne=Rr.x))>Rt||v(Oe-Ee)>Rt)&&(Qr.splice(Sr,0,new eo(qi(Cr.site,kr,v(me-yt)<Rt&&$t-Oe>Rt?{x:yt,y:v(ne-yt)<Rt?Ee:$t}:v(Oe-$t)<Rt&&zt-me>Rt?{x:v(Ee-$t)<Rt?ne:zt,y:$t}:v(me-zt)<Rt&&Oe-Jt>Rt?{x:zt,y:v(ne-zt)<Rt?Ee:Jt}:v(Oe-Jt)<Rt&&me-yt>Rt?{x:v(Ee-Jt)<Rt?ne:yt,y:Jt}:null),Cr.site,null)),++rn)}(yt));var Ee={cells:ua,edges:Gn};return ka=_r=Gn=ua=null,Ee}function ro(ot,yt){return yt.y-ot.y||yt.x-ot.x}Dr.prototype.prepare=function(){for(var zt,ot=this.edges,yt=ot.length;yt--;)(!(zt=ot[yt].edge).b||!zt.a)&&ot.splice(yt,1);return ot.sort(je),ot.length},eo.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Fs.prototype={insert:function(ot,yt){var zt,Jt,$t;if(ot){if(yt.P=ot,yt.N=ot.N,ot.N&&(ot.N.P=yt),ot.N=yt,ot.R){for(ot=ot.R;ot.L;)ot=ot.L;ot.L=yt}else ot.R=yt;zt=ot}else this._?(ot=El(this._),yt.P=null,yt.N=ot,ot.P=ot.L=yt,zt=ot):(yt.P=yt.N=null,this._=yt,zt=null);for(yt.L=yt.R=null,yt.U=zt,yt.C=!0,ot=yt;zt&&zt.C;)zt===(Jt=zt.U).L?($t=Jt.R)&&$t.C?(zt.C=$t.C=!1,Jt.C=!0,ot=Jt):(ot===zt.R&&(Ga(this,zt),zt=(ot=zt).U),zt.C=!1,Jt.C=!0,Yo(this,Jt)):($t=Jt.L)&&$t.C?(zt.C=$t.C=!1,Jt.C=!0,ot=Jt):(ot===zt.L&&(Yo(this,zt),zt=(ot=zt).U),zt.C=!1,Jt.C=!0,Ga(this,Jt)),zt=ot.U;this._.C=!1},remove:function(ot){ot.N&&(ot.N.P=ot.P),ot.P&&(ot.P.N=ot.N),ot.N=ot.P=null;var zt,ne,Ee,yt=ot.U,Jt=ot.L,$t=ot.R;if(ne=Jt?$t?El($t):Jt:$t,yt?yt.L===ot?yt.L=ne:yt.R=ne:this._=ne,Jt&&$t?(Ee=ne.C,ne.C=ot.C,ne.L=Jt,Jt.U=ne,ne!==$t?(yt=ne.U,ne.U=ot.U,yt.L=ot=ne.R,ne.R=$t,$t.U=ne):(ne.U=yt,yt=ne,ot=ne.R)):(Ee=ot.C,ot=ne),ot&&(ot.U=yt),!Ee){if(ot&&ot.C)return void(ot.C=!1);do{if(ot===this._)break;if(ot===yt.L){if((zt=yt.R).C&&(zt.C=!1,yt.C=!0,Ga(this,yt),zt=yt.R),zt.L&&zt.L.C||zt.R&&zt.R.C){(!zt.R||!zt.R.C)&&(zt.L.C=!1,zt.C=!0,Yo(this,zt),zt=yt.R),zt.C=yt.C,yt.C=zt.R.C=!1,Ga(this,yt),ot=this._;break}}else if((zt=yt.L).C&&(zt.C=!1,yt.C=!0,Yo(this,yt),zt=yt.L),zt.L&&zt.L.C||zt.R&&zt.R.C){(!zt.L||!zt.L.C)&&(zt.R.C=!1,zt.C=!0,Ga(this,zt),zt=yt.L),zt.C=yt.C,yt.C=zt.L.C=!1,Yo(this,yt),ot=this._;break}zt.C=!0,ot=yt,yt=yt.U}while(!ot.C);ot&&(ot.C=!1)}}},i.geom.voronoi=function(ot){var yt=wr,zt=en,Jt=yt,$t=zt,ne=tl;if(ot)return Ee(ot);function Ee(Oe){var Qe=new Array(Oe.length),tr=ne[0][0],Cr=ne[0][1],Sr=ne[1][0],Qr=ne[1][1];return Ci(me(Oe),ne).cells.forEach(function(rn,Rr){var kr=rn.edges,Vr=rn.site;(Qe[Rr]=kr.length?kr.map(function(un){var Xr=un.start();return[Xr.x,Xr.y]}):Vr.x>=tr&&Vr.x<=Sr&&Vr.y>=Cr&&Vr.y<=Qr?[[tr,Qr],[Sr,Qr],[Sr,Cr],[tr,Cr]]:[]).point=Oe[Rr]}),Qe}function me(Oe){return Oe.map(function(Qe,tr){return{x:Math.round(Jt(Qe,tr)/Rt)*Rt,y:Math.round($t(Qe,tr)/Rt)*Rt,i:tr}})}return Ee.links=function(Oe){return Ci(me(Oe)).edges.filter(function(Qe){return Qe.l&&Qe.r}).map(function(Qe){return{source:Oe[Qe.l.i],target:Oe[Qe.r.i]}})},Ee.triangles=function(Oe){var Qe=[];return Ci(me(Oe)).cells.forEach(function(tr,Cr){for(var Vr,Sr=tr.site,Qr=tr.edges.sort(je),rn=-1,Rr=Qr.length,on=Qr[Rr-1].edge,un=on.l===Sr?on.r:on.l;++rn<Rr;)Vr=un,un=(on=Qr[rn].edge).l===Sr?on.r:on.l,Cr<Vr.i&&Cr<un.i&&Cl(Sr,Vr,un)<0&&Qe.push([Oe[Cr],Oe[Vr.i],Oe[un.i]])}),Qe},Ee.x=function(Oe){return arguments.length?(Jt=hr(yt=Oe),Ee):yt},Ee.y=function(Oe){return arguments.length?($t=hr(zt=Oe),Ee):zt},Ee.clipExtent=function(Oe){return arguments.length?(ne=null==Oe?tl:Oe,Ee):ne===tl?null:ne},Ee.size=function(Oe){return arguments.length?Ee.clipExtent(Oe&&[[0,0],Oe]):ne===tl?null:ne&&ne[1]},Ee};var tl=[[-1e6,-1e6],[1e6,1e6]];function Cl(ot,yt,zt){return(ot.x-zt.x)*(yt.y-ot.y)-(ot.x-yt.x)*(zt.y-ot.y)}function Li(ot){return ot.x}function el(ot){return ot.y}function bi(ot,yt,zt,Jt,$t,ne){if(!ot(yt,zt,Jt,$t,ne)){var Ee=.5*(zt+$t),me=.5*(Jt+ne),Oe=yt.nodes;Oe[0]&&bi(ot,Oe[0],zt,Jt,Ee,me),Oe[1]&&bi(ot,Oe[1],Ee,Jt,$t,me),Oe[2]&&bi(ot,Oe[2],zt,me,Ee,ne),Oe[3]&&bi(ot,Oe[3],Ee,me,$t,ne)}}function $l(ot,yt,zt,Jt,$t,ne,Ee){var Oe,me=1/0;return function Qe(tr,Cr,Sr,Qr,rn){if(!(Cr>ne||Sr>Ee||Qr<Jt||rn<$t)){if(Rr=tr.point){var Rr,kr=yt-tr.x,Vr=zt-tr.y,on=kr*kr+Vr*Vr;if(on<me){var un=Math.sqrt(me=on);Jt=yt-un,$t=zt-un,ne=yt+un,Ee=zt+un,Oe=Rr}}for(var Xr=tr.nodes,kn=.5*(Cr+Qr),ta=.5*(Sr+rn),aa=(zt>=ta)<<1|yt>=kn,ma=aa+4;aa<ma;++aa)if(tr=Xr[3&aa])switch(3&aa){case 0:Qe(tr,Cr,Sr,kn,ta);break;case 1:Qe(tr,kn,Sr,Qr,ta);break;case 2:Qe(tr,Cr,ta,kn,rn);break;case 3:Qe(tr,kn,ta,Qr,rn)}}}(ot,Jt,$t,ne,Ee),Oe}function Fi(ot,yt){ot=i.rgb(ot),yt=i.rgb(yt);var zt=ot.r,Jt=ot.g,$t=ot.b,ne=yt.r-zt,Ee=yt.g-Jt,me=yt.b-$t;return function(Oe){return"#"+Jr(Math.round(zt+ne*Oe))+Jr(Math.round(Jt+Ee*Oe))+Jr(Math.round($t+me*Oe))}}function Ro(ot,yt){var $t,zt={},Jt={};for($t in ot)$t in yt?zt[$t]=no(ot[$t],yt[$t]):Jt[$t]=ot[$t];for($t in yt)$t in ot||(Jt[$t]=yt[$t]);return function(ne){for($t in zt)Jt[$t]=zt[$t](ne);return Jt}}function Ui(ot,yt){return ot=+ot,yt=+yt,function(zt){return ot*(1-zt)+yt*zt}}function Su(ot,yt){var Jt,$t,ne,zt=Xi.lastIndex=rl.lastIndex=0,Ee=-1,me=[],Oe=[];for(ot+="",yt+="";(Jt=Xi.exec(ot))&&($t=rl.exec(yt));)(ne=$t.index)>zt&&(ne=yt.slice(zt,ne),me[Ee]?me[Ee]+=ne:me[++Ee]=ne),(Jt=Jt[0])===($t=$t[0])?me[Ee]?me[Ee]+=$t:me[++Ee]=$t:(me[++Ee]=null,Oe.push({i:Ee,x:Ui(Jt,$t)})),zt=rl.lastIndex;return zt<yt.length&&(ne=yt.slice(zt),me[Ee]?me[Ee]+=ne:me[++Ee]=ne),me.length<2?Oe[0]?(yt=Oe[0].x,function(Qe){return yt(Qe)+""}):function(){return yt}:(yt=Oe.length,function(Qe){for(var Cr,tr=0;tr<yt;++tr)me[(Cr=Oe[tr]).i]=Cr.x(Qe);return me.join("")})}i.geom.delaunay=function(ot){return i.geom.voronoi().triangles(ot)},i.geom.quadtree=function(ot,yt,zt,Jt,$t){var me,ne=wr,Ee=en;if(me=arguments.length)return ne=Li,Ee=el,3===me&&($t=zt,Jt=yt,zt=yt=0),Oe(ot);function Oe(Qe){var tr,Qr,rn,Rr,kr,Vr,on,un,Xr,Cr=hr(ne),Sr=hr(Ee);if(null!=yt)Vr=yt,on=zt,un=Jt,Xr=$t;else if(un=Xr=-(Vr=on=1/0),Qr=[],rn=[],kr=Qe.length,me)for(Rr=0;Rr<kr;++Rr)(tr=Qe[Rr]).x<Vr&&(Vr=tr.x),tr.y<on&&(on=tr.y),tr.x>un&&(un=tr.x),tr.y>Xr&&(Xr=tr.y),Qr.push(tr.x),rn.push(tr.y);else for(Rr=0;Rr<kr;++Rr){var kn=+Cr(tr=Qe[Rr],Rr),ta=+Sr(tr,Rr);kn<Vr&&(Vr=kn),ta<on&&(on=ta),kn>un&&(un=kn),ta>Xr&&(Xr=ta),Qr.push(kn),rn.push(ta)}var oa=un-Vr,na=Xr-on;function aa(pa,Sa,Ua,mi,ja,Jn,La,Ea){if(!isNaN(Ua)&&!isNaN(mi))if(pa.leaf){var Xn=pa.x,ca=pa.y;if(null!=Xn)if(v(Xn-Ua)+v(ca-mi)<.01)ma(pa,Sa,Ua,mi,ja,Jn,La,Ea);else{var ii=pa.point;pa.x=pa.y=pa.point=null,ma(pa,ii,Xn,ca,ja,Jn,La,Ea),ma(pa,Sa,Ua,mi,ja,Jn,La,Ea)}else pa.x=Ua,pa.y=mi,pa.point=Sa}else ma(pa,Sa,Ua,mi,ja,Jn,La,Ea)}function ma(pa,Sa,Ua,mi,ja,Jn,La,Ea){var Xn=.5*(ja+La),ca=.5*(Jn+Ea),ii=Ua>=Xn,di=mi>=ca,Ai=di<<1|ii;pa.leaf=!1,ii?ja=Xn:La=Xn,di?Jn=ca:Ea=ca,aa(pa=pa.nodes[Ai]||(pa.nodes[Ai]={leaf:!0,nodes:[],point:null,x:null,y:null}),Sa,Ua,mi,ja,Jn,La,Ea)}oa>na?Xr=on+oa:un=Vr+na;var da={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(pa){aa(da,pa,+Cr(pa,++Rr),+Sr(pa,Rr),Vr,on,un,Xr)},visit:function(pa){bi(pa,da,Vr,on,un,Xr)},find:function(pa){return $l(da,pa[0],pa[1],Vr,on,un,Xr)}};if(Rr=-1,null==yt){for(;++Rr<kr;)aa(da,Qe[Rr],Qr[Rr],rn[Rr],Vr,on,un,Xr);--Rr}else Qe.forEach(da.add);return Qr=rn=Qe=tr=null,da}return Oe.x=function(Qe){return arguments.length?(ne=Qe,Oe):ne},Oe.y=function(Qe){return arguments.length?(Ee=Qe,Oe):Ee},Oe.extent=function(Qe){return arguments.length?(null==Qe?yt=zt=Jt=$t=null:(yt=+Qe[0][0],zt=+Qe[0][1],Jt=+Qe[1][0],$t=+Qe[1][1]),Oe):null==yt?null:[[yt,zt],[Jt,$t]]},Oe.size=function(Qe){return arguments.length?(null==Qe?yt=zt=Jt=$t=null:(yt=zt=0,Jt=+Qe[0],$t=+Qe[1]),Oe):null==yt?null:[Jt-yt,$t-zt]},Oe},i.interpolateRgb=Fi,i.interpolateObject=Ro,i.interpolateNumber=Ui,i.interpolateString=Su;var Xi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rl=new RegExp(Xi.source,"g");function no(ot,yt){for(var Jt,zt=i.interpolators.length;--zt>=0&&!(Jt=i.interpolators[zt](ot,yt)););return Jt}function wi(ot,yt){var me,zt=[],Jt=[],$t=ot.length,ne=yt.length,Ee=Math.min(ot.length,yt.length);for(me=0;me<Ee;++me)zt.push(no(ot[me],yt[me]));for(;me<$t;++me)Jt[me]=ot[me];for(;me<ne;++me)Jt[me]=yt[me];return function(Oe){for(me=0;me<Ee;++me)Jt[me]=zt[me](Oe);return Jt}}i.interpolate=no,i.interpolators=[function(ot,yt){var zt=typeof yt;return("string"===zt?hn.has(yt.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(yt)?Fi:Su:yt instanceof be?Fi:Array.isArray(yt)?wi:"object"===zt&&isNaN(yt)?Ro:Ui)(ot,yt)}],i.interpolateArray=wi;var Eu=function(){return O},Io=i.map({linear:Eu,poly:function sf(ot){return function(yt){return Math.pow(yt,ot)}},quad:function(){return Dl},cubic:function(){return Lu},sin:function(){return _l},exp:function(){return lf},circle:function(){return uf},elastic:function Pu(ot,yt){var zt;return arguments.length<2&&(yt=.45),arguments.length?zt=yt/pt*Math.asin(1/ot):(ot=1,zt=yt/4),function(Jt){return 1+ot*Math.pow(2,-10*Jt)*Math.sin((Jt-zt)*pt/yt)}},back:function ff(ot){return ot||(ot=1.70158),function(yt){return yt*yt*((ot+1)*yt-ot)}},bounce:function(){return cf}}),rs=i.map({in:O,out:Cu,"in-out":Pl,"out-in":function(ot){return Pl(Cu(ot))}});function Ll(ot){return function(yt){return yt<=0?0:yt>=1?1:ot(yt)}}function Cu(ot){return function(yt){return 1-ot(1-yt)}}function Pl(ot){return function(yt){return.5*(yt<.5?ot(2*yt):2-ot(2-2*yt))}}function Dl(ot){return ot*ot}function Lu(ot){return ot*ot*ot}function of(ot){if(ot<=0)return 0;if(ot>=1)return 1;var yt=ot*ot,zt=yt*ot;return 4*(ot<.5?zt:3*(ot-yt)+zt-.75)}function _l(ot){return 1-Math.cos(ot*Zt)}function lf(ot){return Math.pow(2,10*(ot-1))}function uf(ot){return 1-Math.sqrt(1-ot*ot)}function cf(ot){return ot<.36363636363636365?7.5625*ot*ot:ot<.7272727272727273?7.5625*(ot-=.5454545454545454)*ot+.75:ot<.9090909090909091?7.5625*(ot-=.8181818181818182)*ot+.9375:7.5625*(ot-=.9545454545454546)*ot+.984375}function ks(ot,yt){return yt-=ot,function(zt){return Math.round(ot+yt*zt)}}function zs(ot){var yt=[ot.a,ot.b],zt=[ot.c,ot.d],Jt=ql(yt),$t=Rl(yt,zt),ne=ql(function Il(ot,yt,zt){return ot[0]+=zt*yt[0],ot[1]+=zt*yt[1],ot}(zt,yt,-$t))||0;yt[0]*zt[1]<zt[0]*yt[1]&&(yt[0]*=-1,yt[1]*=-1,Jt*=-1,$t*=-1),this.rotate=(Jt?Math.atan2(yt[1],yt[0]):Math.atan2(-zt[0],zt[1]))*se,this.translate=[ot.e,ot.f],this.scale=[Jt,ne],this.skew=ne?Math.atan2($t,ne)*se:0}function Rl(ot,yt){return ot[0]*yt[0]+ot[1]*yt[1]}function ql(ot){var yt=Math.sqrt(Rl(ot,ot));return yt&&(ot[0]/=yt,ot[1]/=yt),yt}i.ease=function(ot){var yt=ot.indexOf("-"),zt=yt>=0?ot.slice(0,yt):ot,Jt=yt>=0?ot.slice(yt+1):"in";return zt=Io.get(zt)||Eu,Ll((Jt=rs.get(Jt)||O)(zt.apply(null,P.call(arguments,1))))},i.interpolateHcl=function Du(ot,yt){ot=i.hcl(ot),yt=i.hcl(yt);var zt=ot.h,Jt=ot.c,$t=ot.l,ne=yt.h-zt,Ee=yt.c-Jt,me=yt.l-$t;return isNaN(Ee)&&(Ee=0,Jt=isNaN(Jt)?yt.c:Jt),isNaN(ne)?(ne=0,zt=isNaN(zt)?yt.h:zt):ne>180?ne-=360:ne<-180&&(ne+=360),function(Oe){return ar(zt+ne*Oe,Jt+Ee*Oe,$t+me*Oe)+""}},i.interpolateHsl=function hf(ot,yt){ot=i.hsl(ot),yt=i.hsl(yt);var zt=ot.h,Jt=ot.s,$t=ot.l,ne=yt.h-zt,Ee=yt.s-Jt,me=yt.l-$t;return isNaN(Ee)&&(Ee=0,Jt=isNaN(Jt)?yt.s:Jt),isNaN(ne)?(ne=0,zt=isNaN(zt)?yt.h:zt):ne>180?ne-=360:ne<-180&&(ne+=360),function(Oe){return Re(zt+ne*Oe,Jt+Ee*Oe,$t+me*Oe)+""}},i.interpolateLab=function ns(ot,yt){ot=i.lab(ot),yt=i.lab(yt);var zt=ot.l,Jt=ot.a,$t=ot.b,ne=yt.l-zt,Ee=yt.a-Jt,me=yt.b-$t;return function(Oe){return We(zt+ne*Oe,Jt+Ee*Oe,$t+me*Oe)+""}},i.interpolateRound=ks,i.transform=function(ot){var yt=u.createElementNS(i.ns.prefix.svg,"g");return(i.transform=function(zt){if(null!=zt){yt.setAttribute("transform",zt);var Jt=yt.transform.baseVal.consolidate()}return new zs(Jt?Jt.matrix:vf)})(ot)},zs.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var vf={a:1,b:0,c:0,d:1,e:0,f:0};function as(ot){return ot.length?ot.pop()+",":""}function lo(ot,yt){var zt=[],Jt=[];return ot=i.transform(ot),yt=i.transform(yt),function xo(ot,yt,zt,Jt){if(ot[0]!==yt[0]||ot[1]!==yt[1]){var $t=zt.push("translate(",null,",",null,")");Jt.push({i:$t-4,x:Ui(ot[0],yt[0])},{i:$t-2,x:Ui(ot[1],yt[1])})}else(yt[0]||yt[1])&&zt.push("translate("+yt+")")}(ot.translate,yt.translate,zt,Jt),function nl(ot,yt,zt,Jt){ot!==yt?(ot-yt>180?yt+=360:yt-ot>180&&(ot+=360),Jt.push({i:zt.push(as(zt)+"rotate(",null,")")-2,x:Ui(ot,yt)})):yt&&zt.push(as(zt)+"rotate("+yt+")")}(ot.rotate,yt.rotate,zt,Jt),function ms(ot,yt,zt,Jt){ot!==yt?Jt.push({i:zt.push(as(zt)+"skewX(",null,")")-2,x:Ui(ot,yt)}):yt&&zt.push(as(zt)+"skewX("+yt+")")}(ot.skew,yt.skew,zt,Jt),function Fl(ot,yt,zt,Jt){if(ot[0]!==yt[0]||ot[1]!==yt[1]){var $t=zt.push(as(zt)+"scale(",null,",",null,")");Jt.push({i:$t-4,x:Ui(ot[0],yt[0])},{i:$t-2,x:Ui(ot[1],yt[1])})}else(1!==yt[0]||1!==yt[1])&&zt.push(as(zt)+"scale("+yt+")")}(ot.scale,yt.scale,zt,Jt),ot=yt=null,function($t){for(var me,ne=-1,Ee=Jt.length;++ne<Ee;)zt[(me=Jt[ne]).i]=me.x($t);return zt.join("")}}function is(ot,yt){return yt=(yt-=ot=+ot)||1/yt,function(zt){return(zt-ot)/yt}}function tu(ot,yt){return yt=(yt-=ot=+ot)||1/yt,function(zt){return Math.max(0,Math.min(1,(zt-ot)/yt))}}function kl(ot){for(var yt=ot.source,zt=ot.target,Jt=function Pi(ot,yt){if(ot===yt)return ot;for(var zt=bo(ot),Jt=bo(yt),$t=zt.pop(),ne=Jt.pop(),Ee=null;$t===ne;)Ee=$t,$t=zt.pop(),ne=Jt.pop();return Ee}(yt,zt),$t=[yt];yt!==Jt;)$t.push(yt=yt.parent);for(var ne=$t.length;zt!==Jt;)$t.splice(ne,0,zt),zt=zt.parent;return $t}function bo(ot){for(var yt=[],zt=ot.parent;null!=zt;)yt.push(ot),ot=zt,zt=zt.parent;return yt.push(ot),yt}function eu(ot){ot.fixed|=2}function ru(ot){ot.fixed&=-7}function Os(ot){ot.fixed|=4,ot.px=ot.x,ot.py=ot.y}function zl(ot){ot.fixed&=-5}function nu(ot,yt,zt){var Jt=0,$t=0;if(ot.charge=0,!ot.leaf)for(var Oe,ne=ot.nodes,Ee=ne.length,me=-1;++me<Ee;)null!=(Oe=ne[me])&&(nu(Oe,yt,zt),ot.charge+=Oe.charge,Jt+=Oe.charge*Oe.cx,$t+=Oe.charge*Oe.cy);if(ot.point){ot.leaf||(ot.point.x+=Math.random()-.5,ot.point.y+=Math.random()-.5);var Qe=yt*zt[ot.point.index];ot.charge+=ot.pointCharge=Qe,Jt+=Qe*ot.point.x,$t+=Qe*ot.point.y}ot.cx=Jt/ot.charge,ot.cy=$t/ot.charge}i.interpolateTransform=lo,i.layout={},i.layout.bundle=function(){return function(ot){for(var yt=[],zt=-1,Jt=ot.length;++zt<Jt;)yt.push(kl(ot[zt]));return yt}},i.layout.chord=function(){var yt,zt,Jt,$t,Ee,me,Oe,ot={},ne=0;function Qe(){var Rr,kr,Vr,on,un,Cr={},Sr=[],Qr=i.range($t),rn=[];for(yt=[],zt=[],Rr=0,on=-1;++on<$t;){for(kr=0,un=-1;++un<$t;)kr+=Jt[on][un];Sr.push(kr),rn.push(i.range($t)),Rr+=kr}for(Ee&&Qr.sort(function(da,pa){return Ee(Sr[da],Sr[pa])}),me&&rn.forEach(function(da,pa){da.sort(function(Sa,Ua){return me(Jt[pa][Sa],Jt[pa][Ua])})}),Rr=(pt-ne*$t)/Rr,kr=0,on=-1;++on<$t;){for(Vr=kr,un=-1;++un<$t;){var Xr=Qr[on],kn=rn[Xr][un],ta=Jt[Xr][kn],oa=kr,na=kr+=ta*Rr;Cr[Xr+"-"+kn]={index:Xr,subindex:kn,startAngle:oa,endAngle:na,value:ta}}zt[Xr]={index:Xr,startAngle:Vr,endAngle:kr,value:Sr[Xr]},kr+=ne}for(on=-1;++on<$t;)for(un=on-1;++un<$t;){var aa=Cr[on+"-"+un],ma=Cr[un+"-"+on];(aa.value||ma.value)&&yt.push(aa.value<ma.value?{source:ma,target:aa}:{source:aa,target:ma})}Oe&&tr()}function tr(){yt.sort(function(Cr,Sr){return Oe((Cr.source.value+Cr.target.value)/2,(Sr.source.value+Sr.target.value)/2)})}return ot.matrix=function(Cr){return arguments.length?($t=(Jt=Cr)&&Jt.length,yt=zt=null,ot):Jt},ot.padding=function(Cr){return arguments.length?(ne=Cr,yt=zt=null,ot):ne},ot.sortGroups=function(Cr){return arguments.length?(Ee=Cr,yt=zt=null,ot):Ee},ot.sortSubgroups=function(Cr){return arguments.length?(me=Cr,yt=null,ot):me},ot.sortChords=function(Cr){return arguments.length?(Oe=Cr,yt&&tr(),ot):Oe},ot.chords=function(){return yt||Qe(),yt},ot.groups=function(){return zt||Qe(),zt},ot},i.layout.force=function(){var zt,$t,ne,Rr,kr,Vr,ot={},yt=i.dispatch("start","tick","end"),Jt=[1,1],Ee=.9,me=Ru,Oe=Iu,Qe=-30,tr=Bs,Cr=.1,Sr=.64,Qr=[],rn=[];function on(Xr){return function(kn,ta,oa,na){if(kn.point!==Xr){var Sa,aa=kn.cx-Xr.x,ma=kn.cy-Xr.y,da=na-ta,pa=aa*aa+ma*ma;if(da*da/Sr<pa)return pa<tr&&(Xr.px-=aa*(Sa=kn.charge/pa),Xr.py-=ma*Sa),!0;kn.point&&pa&&pa<tr&&(Xr.px-=aa*(Sa=kn.pointCharge/pa),Xr.py-=ma*Sa)}return!kn.charge}}function un(Xr){Xr.px=i.event.x,Xr.py=i.event.y,ot.resume()}return ot.tick=function(){if((ne*=.99)<.005)return zt=null,yt.end({type:"end",alpha:ne=0}),!0;var ta,oa,na,aa,ma,da,pa,Sa,Ua,Xr=Qr.length,kn=rn.length;for(oa=0;oa<kn;++oa)(da=(Sa=(ma=(na=rn[oa]).target).x-(aa=na.source).x)*Sa+(Ua=ma.y-aa.y)*Ua)&&(Ua*=da=ne*kr[oa]*((da=Math.sqrt(da))-Rr[oa])/da,ma.x-=(Sa*=da)*(pa=aa.weight+ma.weight?aa.weight/(aa.weight+ma.weight):.5),ma.y-=Ua*pa,aa.x+=Sa*(pa=1-pa),aa.y+=Ua*pa);if((pa=ne*Cr)&&(Sa=Jt[0]/2,Ua=Jt[1]/2,oa=-1,pa))for(;++oa<Xr;)(na=Qr[oa]).x+=(Sa-na.x)*pa,na.y+=(Ua-na.y)*pa;if(Qe)for(nu(ta=i.geom.quadtree(Qr),ne,Vr),oa=-1;++oa<Xr;)(na=Qr[oa]).fixed||ta.visit(on(na));for(oa=-1;++oa<Xr;)(na=Qr[oa]).fixed?(na.x=na.px,na.y=na.py):(na.x-=(na.px-(na.px=na.x))*Ee,na.y-=(na.py-(na.py=na.y))*Ee);yt.tick({type:"tick",alpha:ne})},ot.nodes=function(Xr){return arguments.length?(Qr=Xr,ot):Qr},ot.links=function(Xr){return arguments.length?(rn=Xr,ot):rn},ot.size=function(Xr){return arguments.length?(Jt=Xr,ot):Jt},ot.linkDistance=function(Xr){return arguments.length?(me="function"==typeof Xr?Xr:+Xr,ot):me},ot.distance=ot.linkDistance,ot.linkStrength=function(Xr){return arguments.length?(Oe="function"==typeof Xr?Xr:+Xr,ot):Oe},ot.friction=function(Xr){return arguments.length?(Ee=+Xr,ot):Ee},ot.charge=function(Xr){return arguments.length?(Qe="function"==typeof Xr?Xr:+Xr,ot):Qe},ot.chargeDistance=function(Xr){return arguments.length?(tr=Xr*Xr,ot):Math.sqrt(tr)},ot.gravity=function(Xr){return arguments.length?(Cr=+Xr,ot):Cr},ot.theta=function(Xr){return arguments.length?(Sr=Xr*Xr,ot):Math.sqrt(Sr)},ot.alpha=function(Xr){return arguments.length?(Xr=+Xr,ne?Xr>0?ne=Xr:(zt.c=null,zt.t=NaN,zt=null,yt.end({type:"end",alpha:ne=0})):Xr>0&&(yt.start({type:"start",alpha:ne=Xr}),zt=Nn(ot.tick)),ot):ne},ot.start=function(){var Xr,aa,ma,kn=Qr.length,ta=rn.length,oa=Jt[0],na=Jt[1];for(Xr=0;Xr<kn;++Xr)(ma=Qr[Xr]).index=Xr,ma.weight=0;for(Xr=0;Xr<ta;++Xr)"number"==typeof(ma=rn[Xr]).source&&(ma.source=Qr[ma.source]),"number"==typeof ma.target&&(ma.target=Qr[ma.target]),++ma.source.weight,++ma.target.weight;for(Xr=0;Xr<kn;++Xr)ma=Qr[Xr],isNaN(ma.x)&&(ma.x=da("x",oa)),isNaN(ma.y)&&(ma.y=da("y",na)),isNaN(ma.px)&&(ma.px=ma.x),isNaN(ma.py)&&(ma.py=ma.y);if(Rr=[],"function"==typeof me)for(Xr=0;Xr<ta;++Xr)Rr[Xr]=+me.call(this,rn[Xr],Xr);else for(Xr=0;Xr<ta;++Xr)Rr[Xr]=me;if(kr=[],"function"==typeof Oe)for(Xr=0;Xr<ta;++Xr)kr[Xr]=+Oe.call(this,rn[Xr],Xr);else for(Xr=0;Xr<ta;++Xr)kr[Xr]=Oe;if(Vr=[],"function"==typeof Qe)for(Xr=0;Xr<kn;++Xr)Vr[Xr]=+Qe.call(this,Qr[Xr],Xr);else for(Xr=0;Xr<kn;++Xr)Vr[Xr]=Qe;function da(pa,Sa){if(!aa){for(aa=new Array(kn),ja=0;ja<kn;++ja)aa[ja]=[];for(ja=0;ja<ta;++ja){var Ua=rn[ja];aa[Ua.source.index].push(Ua.target),aa[Ua.target.index].push(Ua.source)}}for(var La,mi=aa[Xr],ja=-1,Jn=mi.length;++ja<Jn;)if(!isNaN(La=mi[ja][pa]))return La;return Math.random()*Sa}return ot.resume()},ot.resume=function(){return ot.alpha(.1)},ot.stop=function(){return ot.alpha(0)},ot.drag=function(){if($t||($t=i.behavior.drag().origin(O).on("dragstart.force",eu).on("drag.force",un).on("dragend.force",ru)),!arguments.length)return $t;this.on("mouseover.force",Os).on("mouseout.force",zl).call($t)},i.rebind(ot,yt,"on")};var Ru=20,Iu=1,Bs=1/0;function Zo(ot,yt){return i.rebind(ot,yt,"sort","children","value"),ot.nodes=ot,ot.links=al,ot}function xs(ot,yt){for(var zt=[ot];null!=(ot=zt.pop());)if(yt(ot),($t=ot.children)&&(Jt=$t.length))for(var Jt,$t;--Jt>=0;)zt.push($t[Jt])}function Fo(ot,yt){for(var zt=[ot],Jt=[];null!=(ot=zt.pop());)if(Jt.push(ot),(Ee=ot.children)&&(ne=Ee.length))for(var ne,Ee,$t=-1;++$t<ne;)zt.push(Ee[$t]);for(;null!=(ot=Jt.pop());)yt(ot)}function au(ot){return ot.children}function iu(ot){return ot.value}function ou(ot,yt){return yt.value-ot.value}function al(ot){return i.merge(ot.map(function(yt){return(yt.children||[]).map(function(zt){return{source:yt,target:zt}})}))}i.layout.hierarchy=function(){var ot=ou,yt=au,zt=iu;function Jt($t){var me,ne=[$t],Ee=[];for($t.depth=0;null!=(me=ne.pop());)if(Ee.push(me),(Qe=yt.call(Jt,me,me.depth))&&(Oe=Qe.length)){for(var Oe,Qe,tr;--Oe>=0;)ne.push(tr=Qe[Oe]),tr.parent=me,tr.depth=me.depth+1;zt&&(me.value=0),me.children=Qe}else zt&&(me.value=+zt.call(Jt,me,me.depth)||0),delete me.children;return Fo($t,function(Cr){var Sr,Qr;ot&&(Sr=Cr.children)&&Sr.sort(ot),zt&&(Qr=Cr.parent)&&(Qr.value+=Cr.value)}),Ee}return Jt.sort=function($t){return arguments.length?(ot=$t,Jt):ot},Jt.children=function($t){return arguments.length?(yt=$t,Jt):yt},Jt.value=function($t){return arguments.length?(zt=$t,Jt):zt},Jt.revalue=function($t){return zt&&(xs($t,function(ne){ne.children&&(ne.value=0)}),Fo($t,function(ne){var Ee;ne.children||(ne.value=+zt.call(Jt,ne,ne.depth)||0),(Ee=ne.parent)&&(Ee.value+=ne.value)})),$t},Jt},i.layout.partition=function(){var ot=i.layout.hierarchy(),yt=[1,1];function zt(ne,Ee,me,Oe){var Qe=ne.children;if(ne.x=Ee,ne.y=ne.depth*Oe,ne.dx=me,ne.dy=Oe,Qe&&(Cr=Qe.length)){var Cr,Sr,Qr,tr=-1;for(me=ne.value?me/ne.value:0;++tr<Cr;)zt(Sr=Qe[tr],Ee,Qr=Sr.value*me,Oe),Ee+=Qr}}function Jt(ne){var Ee=ne.children,me=0;if(Ee&&(Qe=Ee.length))for(var Qe,Oe=-1;++Oe<Qe;)me=Math.max(me,Jt(Ee[Oe]));return 1+me}function $t(ne,Ee){var me=ot.call(this,ne,Ee);return zt(me[0],0,yt[0],yt[1]/Jt(me[0])),me}return $t.size=function(ne){return arguments.length?(yt=ne,$t):yt},Zo($t,ot)},i.layout.pie=function(){var ot=Number,yt=Ol,zt=0,Jt=pt,$t=0;function ne(Ee){var Vr,me=Ee.length,Oe=Ee.map(function(on,un){return+ot.call(ne,on,un)}),Qe=+("function"==typeof zt?zt.apply(this,arguments):zt),tr=("function"==typeof Jt?Jt.apply(this,arguments):Jt)-Qe,Cr=Math.min(Math.abs(tr)/me,+("function"==typeof $t?$t.apply(this,arguments):$t)),Sr=Cr*(tr<0?-1:1),Qr=i.sum(Oe),rn=Qr?(tr-me*Sr)/Qr:0,Rr=i.range(me),kr=[];return null!=yt&&Rr.sort(yt===Ol?function(on,un){return Oe[un]-Oe[on]}:function(on,un){return yt(Ee[on],Ee[un])}),Rr.forEach(function(on){kr[on]={data:Ee[on],value:Vr=Oe[on],startAngle:Qe,endAngle:Qe+=Vr*rn+Sr,padAngle:Cr}}),kr}return ne.value=function(Ee){return arguments.length?(ot=Ee,ne):ot},ne.sort=function(Ee){return arguments.length?(yt=Ee,ne):yt},ne.startAngle=function(Ee){return arguments.length?(zt=Ee,ne):zt},ne.endAngle=function(Ee){return arguments.length?(Jt=Ee,ne):Jt},ne.padAngle=function(Ee){return arguments.length?($t=Ee,ne):$t},ne};var Ol={};function Fu(ot){return ot.x}function il(ot){return ot.y}function ku(ot,yt,zt){ot.y0=yt,ot.y=zt}i.layout.stack=function(){var ot=O,yt=Ns,zt=bs,Jt=ku,$t=Fu,ne=il;function Ee(me,Oe){if(!(rn=me.length))return me;var Qe=me.map(function(on,un){return ot.call(Ee,on,un)}),tr=Qe.map(function(on){return on.map(function(un,Xr){return[$t.call(Ee,un,Xr),ne.call(Ee,un,Xr)]})}),Cr=yt.call(Ee,tr,Oe);Qe=i.permute(Qe,Cr),tr=i.permute(tr,Cr);var rn,Rr,kr,Vr,Sr=zt.call(Ee,tr,Oe),Qr=Qe[0].length;for(kr=0;kr<Qr;++kr)for(Jt.call(Ee,Qe[0][kr],Vr=Sr[kr],tr[0][kr][1]),Rr=1;Rr<rn;++Rr)Jt.call(Ee,Qe[Rr][kr],Vr+=tr[Rr-1][kr][1],tr[Rr][kr][1]);return me}return Ee.values=function(me){return arguments.length?(ot=me,Ee):ot},Ee.order=function(me){return arguments.length?(yt="function"==typeof me?me:zu.get(me)||Ns,Ee):yt},Ee.offset=function(me){return arguments.length?(zt="function"==typeof me?me:hi.get(me)||bs,Ee):zt},Ee.x=function(me){return arguments.length?($t=me,Ee):$t},Ee.y=function(me){return arguments.length?(ne=me,Ee):ne},Ee.out=function(me){return arguments.length?(Jt=me,Ee):Jt},Ee};var zu=i.map({"inside-out":function(ot){var zt,Jt,yt=ot.length,$t=ot.map(uo),ne=ot.map(Us),Ee=i.range(yt).sort(function(Cr,Sr){return $t[Cr]-$t[Sr]}),me=0,Oe=0,Qe=[],tr=[];for(zt=0;zt<yt;++zt)Jt=Ee[zt],me<Oe?(me+=ne[Jt],Qe.push(Jt)):(Oe+=ne[Jt],tr.push(Jt));return tr.reverse().concat(Qe)},reverse:function(ot){return i.range(ot.length).reverse()},default:Ns}),hi=i.map({silhouette:function(ot){var ne,Ee,me,yt=ot.length,zt=ot[0].length,Jt=[],$t=0,Oe=[];for(Ee=0;Ee<zt;++Ee){for(ne=0,me=0;ne<yt;ne++)me+=ot[ne][Ee][1];me>$t&&($t=me),Jt.push(me)}for(Ee=0;Ee<zt;++Ee)Oe[Ee]=($t-Jt[Ee])/2;return Oe},wiggle:function(ot){var $t,ne,Ee,me,Oe,Qe,tr,Cr,Sr,yt=ot.length,zt=ot[0],Jt=zt.length,Qr=[];for(Qr[0]=Cr=Sr=0,ne=1;ne<Jt;++ne){for($t=0,me=0;$t<yt;++$t)me+=ot[$t][ne][1];for($t=0,Oe=0,tr=zt[ne][0]-zt[ne-1][0];$t<yt;++$t){for(Ee=0,Qe=(ot[$t][ne][1]-ot[$t][ne-1][1])/(2*tr);Ee<$t;++Ee)Qe+=(ot[Ee][ne][1]-ot[Ee][ne-1][1])/tr;Oe+=Qe*ot[$t][ne][1]}Qr[ne]=Cr-=me?Oe/me*tr:0,Cr<Sr&&(Sr=Cr)}for(ne=0;ne<Jt;++ne)Qr[ne]-=Sr;return Qr},expand:function(ot){var $t,ne,Ee,yt=ot.length,zt=ot[0].length,Jt=1/yt,me=[];for(ne=0;ne<zt;++ne){for($t=0,Ee=0;$t<yt;$t++)Ee+=ot[$t][ne][1];if(Ee)for($t=0;$t<yt;$t++)ot[$t][ne][1]/=Ee;else for($t=0;$t<yt;$t++)ot[$t][ne][1]=Jt}for(ne=0;ne<zt;++ne)me[ne]=0;return me},zero:bs});function Ns(ot){return i.range(ot.length)}function bs(ot){for(var yt=-1,zt=ot[0].length,Jt=[];++yt<zt;)Jt[yt]=0;return Jt}function uo(ot){for(var $t,yt=1,zt=0,Jt=ot[0][1],ne=ot.length;yt<ne;++yt)($t=ot[yt][1])>Jt&&(zt=yt,Jt=$t);return zt}function Us(ot){return ot.reduce(Ou,0)}function Ou(ot,yt){return ot+yt[1]}function ki(ot,yt){return ws(ot,Math.ceil(Math.log(yt.length)/Math.LN2+1))}function ws(ot,yt){for(var zt=-1,Jt=+ot[0],$t=(ot[1]-Jt)/yt,ne=[];++zt<=yt;)ne[zt]=$t*zt+Jt;return ne}function ko(ot){return[i.min(ot),i.max(ot)]}function wo(ot,yt){return ot.value-yt.value}function Xo(ot,yt){var zt=ot._pack_next;ot._pack_next=yt,yt._pack_prev=ot,yt._pack_next=zt,zt._pack_prev=yt}function jo(ot,yt){ot._pack_next=yt,yt._pack_prev=ot}function zo(ot,yt){var zt=yt.x-ot.x,Jt=yt.y-ot.y,$t=ot.r+yt.r;return.999*$t*$t>zt*zt+Jt*Jt}function os(ot){if((yt=ot.children)&&(Sr=yt.length)){var yt,Ee,me,Oe,Qe,tr,Cr,Sr,zt=1/0,Jt=-1/0,$t=1/0,ne=-1/0;if(yt.forEach(ss),(Ee=yt[0]).x=-Ee.r,Ee.y=0,Qr(Ee),Sr>1&&((me=yt[1]).x=me.r,me.y=0,Qr(me),Sr>2))for(lu(Ee,me,Oe=yt[2]),Qr(Oe),Xo(Ee,Oe),Ee._pack_prev=Oe,Xo(Oe,me),me=Ee._pack_next,Qe=3;Qe<Sr;Qe++){lu(Ee,me,Oe=yt[Qe]);var rn=0,Rr=1,kr=1;for(tr=me._pack_next;tr!==me;tr=tr._pack_next,Rr++)if(zo(tr,Oe)){rn=1;break}if(1==rn)for(Cr=Ee._pack_prev;Cr!==tr._pack_prev&&!zo(Cr,Oe);Cr=Cr._pack_prev,kr++);rn?(Rr<kr||Rr==kr&&me.r<Ee.r?jo(Ee,me=tr):jo(Ee=Cr,me),Qe--):(Xo(Ee,Oe),me=Oe,Qr(Oe))}var Vr=(zt+Jt)/2,on=($t+ne)/2,un=0;for(Qe=0;Qe<Sr;Qe++)(Oe=yt[Qe]).x-=Vr,Oe.y-=on,un=Math.max(un,Oe.r+Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y));ot.r=un,yt.forEach(To)}function Qr(Xr){zt=Math.min(Xr.x-Xr.r,zt),Jt=Math.max(Xr.x+Xr.r,Jt),$t=Math.min(Xr.y-Xr.r,$t),ne=Math.max(Xr.y+Xr.r,ne)}}function ss(ot){ot._pack_next=ot._pack_prev=ot}function To(ot){delete ot._pack_next,delete ot._pack_prev}function su(ot,yt,zt,Jt){var $t=ot.children;if(ot.x=yt+=Jt*ot.x,ot.y=zt+=Jt*ot.y,ot.r*=Jt,$t)for(var ne=-1,Ee=$t.length;++ne<Ee;)su($t[ne],yt,zt,Jt)}function lu(ot,yt,zt){var Jt=ot.r+zt.r,$t=yt.x-ot.x,ne=yt.y-ot.y;if(Jt&&($t||ne)){var Ee=yt.r+zt.r,me=$t*$t+ne*ne,Oe=.5+((Jt*=Jt)-(Ee*=Ee))/(2*me),Qe=Math.sqrt(Math.max(0,2*Ee*(Jt+me)-(Jt-=me)*Jt-Ee*Ee))/(2*me);zt.x=ot.x+Oe*$t+Qe*ne,zt.y=ot.y+Oe*ne-Qe*$t}else zt.x=ot.x+Jt,zt.y=ot.y}function Bl(ot,yt){return ot.parent==yt.parent?1:2}function Vs(ot){var yt=ot.children;return yt.length?yt[0]:ot.t}function uu(ot){var zt,yt=ot.children;return(zt=yt.length)?yt[zt-1]:ot.t}function df(ot,yt,zt){var Jt=zt/(yt.i-ot.i);yt.c-=Jt,yt.s+=zt,ot.c+=Jt,yt.z+=zt,yt.m+=zt}function Bu(ot,yt,zt){return ot.a.parent===yt.parent?ot.a:zt}function Nl(ot){var yt=ot.children;return yt&&yt.length?Nl(yt[0]):ot}function Ni(ot){var zt,yt=ot.children;return yt&&(zt=yt.length)?Ni(yt[zt-1]):ot}function vo(ot){return{x:ot.x,y:ot.y,dx:ot.dx,dy:ot.dy}}function ls(ot,yt){var zt=ot.x+yt[3],Jt=ot.y+yt[0],$t=ot.dx-yt[1]-yt[3],ne=ot.dy-yt[0]-yt[2];return $t<0&&(zt+=$t/2,$t=0),ne<0&&(Jt+=ne/2,ne=0),{x:zt,y:Jt,dx:$t,dy:ne}}function ol(ot){var yt=ot[0],zt=ot[ot.length-1];return yt<zt?[yt,zt]:[zt,yt]}function Hs(ot){return ot.rangeExtent?ot.rangeExtent():ol(ot.range())}function fu(ot,yt,zt,Jt){var $t=zt(ot[0],ot[1]),ne=Jt(yt[0],yt[1]);return function(Ee){return ne($t(Ee))}}function cu(ot,yt){var Ee,zt=0,Jt=ot.length-1,$t=ot[zt],ne=ot[Jt];return ne<$t&&(Ee=zt,zt=Jt,Jt=Ee,Ee=$t,$t=ne,ne=Ee),ot[zt]=yt.floor($t),ot[Jt]=yt.ceil(ne),ot}function hu(ot){return ot?{floor:function(yt){return Math.floor(yt/ot)*ot},ceil:function(yt){return Math.ceil(yt/ot)*ot}}:gf}i.layout.histogram=function(){var ot=!0,yt=Number,zt=ko,Jt=ki;function $t(ne,Sr){for(var Cr,kr,me=[],Oe=ne.map(yt,this),Qe=zt.call(this,Oe,Sr),tr=Jt.call(this,Qe,Oe,Sr),Qr=(Sr=-1,Oe.length),rn=tr.length-1,Rr=ot?1:1/Qr;++Sr<rn;)(Cr=me[Sr]=[]).dx=tr[Sr+1]-(Cr.x=tr[Sr]),Cr.y=0;if(rn>0)for(Sr=-1;++Sr<Qr;)(kr=Oe[Sr])>=Qe[0]&&kr<=Qe[1]&&((Cr=me[i.bisect(tr,kr,1,rn)-1]).y+=Rr,Cr.push(ne[Sr]));return me}return $t.value=function(ne){return arguments.length?(yt=ne,$t):yt},$t.range=function(ne){return arguments.length?(zt=hr(ne),$t):zt},$t.bins=function(ne){return arguments.length?(Jt="number"==typeof ne?function(Ee){return ws(Ee,ne)}:hr(ne),$t):Jt},$t.frequency=function(ne){return arguments.length?(ot=!!ne,$t):ot},$t},i.layout.pack=function(){var Jt,ot=i.layout.hierarchy().sort(wo),yt=0,zt=[1,1];function $t(ne,Ee){var me=ot.call(this,ne,Ee),Oe=me[0],Qe=zt[0],tr=zt[1],Cr=null==Jt?Math.sqrt:"function"==typeof Jt?Jt:function(){return Jt};if(Oe.x=Oe.y=0,Fo(Oe,function(Qr){Qr.r=+Cr(Qr.value)}),Fo(Oe,os),yt){var Sr=yt*(Jt?1:Math.max(2*Oe.r/Qe,2*Oe.r/tr))/2;Fo(Oe,function(Qr){Qr.r+=Sr}),Fo(Oe,os),Fo(Oe,function(Qr){Qr.r-=Sr})}return su(Oe,Qe/2,tr/2,Jt?1:1/Math.max(2*Oe.r/Qe,2*Oe.r/tr)),me}return $t.size=function(ne){return arguments.length?(zt=ne,$t):zt},$t.radius=function(ne){return arguments.length?(Jt=null==ne||"function"==typeof ne?ne:+ne,$t):Jt},$t.padding=function(ne){return arguments.length?(yt=+ne,$t):yt},Zo($t,ot)},i.layout.tree=function(){var ot=i.layout.hierarchy().sort(null).value(null),yt=Bl,zt=[1,1],Jt=null;function $t(tr,Cr){var Sr=ot.call(this,tr,Cr),Qr=Sr[0],rn=function ne(tr){for(var Qr,Cr={A:null,children:[tr]},Sr=[Cr];null!=(Qr=Sr.pop());)for(var Rr,rn=Qr.children,kr=0,Vr=rn.length;kr<Vr;++kr)Sr.push((rn[kr]=Rr={_:rn[kr],parent:Qr,children:(Rr=rn[kr].children)&&Rr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:kr}).a=Rr);return Cr.children[0]}(Qr);if(Fo(rn,Ee),rn.parent.m=-rn.z,xs(rn,me),Jt)xs(Qr,Qe);else{var Rr=Qr,kr=Qr,Vr=Qr;xs(Qr,function(kn){kn.x<Rr.x&&(Rr=kn),kn.x>kr.x&&(kr=kn),kn.depth>Vr.depth&&(Vr=kn)});var on=yt(Rr,kr)/2-Rr.x,un=zt[0]/(kr.x+yt(kr,Rr)/2+on),Xr=zt[1]/(Vr.depth||1);xs(Qr,function(kn){kn.x=(kn.x+on)*un,kn.y=kn.depth*Xr})}return Sr}function Ee(tr){var Cr=tr.children,Sr=tr.parent.children,Qr=tr.i?Sr[tr.i-1]:null;if(Cr.length){!function pf(ot){for(var ne,yt=0,zt=0,Jt=ot.children,$t=Jt.length;--$t>=0;)(ne=Jt[$t]).z+=yt,ne.m+=yt,yt+=ne.s+(zt+=ne.c)}(tr);var rn=(Cr[0].z+Cr[Cr.length-1].z)/2;Qr?(tr.z=Qr.z+yt(tr._,Qr._),tr.m=tr.z-rn):tr.z=rn}else Qr&&(tr.z=Qr.z+yt(tr._,Qr._));tr.parent.A=function Oe(tr,Cr,Sr){if(Cr){for(var kn,Qr=tr,rn=tr,Rr=Cr,kr=Qr.parent.children[0],Vr=Qr.m,on=rn.m,un=Rr.m,Xr=kr.m;Rr=uu(Rr),Qr=Vs(Qr),Rr&&Qr;)kr=Vs(kr),(rn=uu(rn)).a=tr,(kn=Rr.z+un-Qr.z-Vr+yt(Rr._,Qr._))>0&&(df(Bu(Rr,tr,Sr),tr,kn),Vr+=kn,on+=kn),un+=Rr.m,Vr+=Qr.m,Xr+=kr.m,on+=rn.m;Rr&&!uu(rn)&&(rn.t=Rr,rn.m+=un-on),Qr&&!Vs(kr)&&(kr.t=Qr,kr.m+=Vr-Xr,Sr=tr)}return Sr}(tr,Qr,tr.parent.A||Sr[0])}function me(tr){tr._.x=tr.z+tr.parent.m,tr.m+=tr.parent.m}function Qe(tr){tr.x*=zt[0],tr.y=tr.depth*zt[1]}return $t.separation=function(tr){return arguments.length?(yt=tr,$t):yt},$t.size=function(tr){return arguments.length?(Jt=null==(zt=tr)?Qe:null,$t):Jt?null:zt},$t.nodeSize=function(tr){return arguments.length?(Jt=null==(zt=tr)?null:Qe,$t):Jt?zt:null},Zo($t,ot)},i.layout.cluster=function(){var ot=i.layout.hierarchy().sort(null).value(null),yt=Bl,zt=[1,1],Jt=!1;function $t(ne,Ee){var Qe,me=ot.call(this,ne,Ee),Oe=me[0],tr=0;Fo(Oe,function(Rr){var kr=Rr.children;kr&&kr.length?(Rr.x=function Uu(ot){return ot.reduce(function(yt,zt){return yt+zt.x},0)/ot.length}(kr),Rr.y=function Nu(ot){return 1+i.max(ot,function(yt){return yt.y})}(kr)):(Rr.x=Qe?tr+=yt(Rr,Qe):0,Rr.y=0,Qe=Rr)});var Cr=Nl(Oe),Sr=Ni(Oe),Qr=Cr.x-yt(Cr,Sr)/2,rn=Sr.x+yt(Sr,Cr)/2;return Fo(Oe,Jt?function(Rr){Rr.x=(Rr.x-Oe.x)*zt[0],Rr.y=(Oe.y-Rr.y)*zt[1]}:function(Rr){Rr.x=(Rr.x-Qr)/(rn-Qr)*zt[0],Rr.y=(1-(Oe.y?Rr.y/Oe.y:1))*zt[1]}),me}return $t.separation=function(ne){return arguments.length?(yt=ne,$t):yt},$t.size=function(ne){return arguments.length?(Jt=null==(zt=ne),$t):Jt?null:zt},$t.nodeSize=function(ne){return arguments.length?(Jt=null!=(zt=ne),$t):Jt?zt:null},Zo($t,ot)},i.layout.treemap=function(){var Ee,ot=i.layout.hierarchy(),yt=Math.round,zt=[1,1],Jt=null,$t=vo,ne=!1,me="squarify",Oe=.5*(1+Math.sqrt(5));function Qe(Rr,kr){for(var un,Xr,Vr=-1,on=Rr.length;++Vr<on;)Xr=(un=Rr[Vr]).value*(kr<0?0:kr),un.area=isNaN(Xr)||Xr<=0?0:Xr}function tr(Rr){var kr=Rr.children;if(kr&&kr.length){var Xr,ta,na,Vr=$t(Rr),on=[],un=kr.slice(),kn=1/0,oa="slice"===me?Vr.dx:"dice"===me?Vr.dy:"slice-dice"===me?1&Rr.depth?Vr.dy:Vr.dx:Math.min(Vr.dx,Vr.dy);for(Qe(un,Vr.dx*Vr.dy/Rr.value),on.area=0;(na=un.length)>0;)on.push(Xr=un[na-1]),on.area+=Xr.area,"squarify"!==me||(ta=Sr(on,oa))<=kn?(un.pop(),kn=ta):(on.area-=on.pop().area,Qr(on,oa,Vr,!1),oa=Math.min(Vr.dx,Vr.dy),on.length=on.area=0,kn=1/0);on.length&&(Qr(on,oa,Vr,!0),on.length=on.area=0),kr.forEach(tr)}}function Cr(Rr){var kr=Rr.children;if(kr&&kr.length){var un,Vr=$t(Rr),on=kr.slice(),Xr=[];for(Qe(on,Vr.dx*Vr.dy/Rr.value),Xr.area=0;un=on.pop();)Xr.push(un),Xr.area+=un.area,null!=un.z&&(Qr(Xr,un.z?Vr.dx:Vr.dy,Vr,!on.length),Xr.length=Xr.area=0);kr.forEach(Cr)}}function Sr(Rr,kr){for(var on,Vr=Rr.area,un=0,Xr=1/0,kn=-1,ta=Rr.length;++kn<ta;)!(on=Rr[kn].area)||(on<Xr&&(Xr=on),on>un&&(un=on));return kr*=kr,(Vr*=Vr)?Math.max(kr*un*Oe/Vr,Vr/(kr*Xr*Oe)):1/0}function Qr(Rr,kr,Vr,on){var na,un=-1,Xr=Rr.length,kn=Vr.x,ta=Vr.y,oa=kr?yt(Rr.area/kr):0;if(kr==Vr.dx){for((on||oa>Vr.dy)&&(oa=Vr.dy);++un<Xr;)(na=Rr[un]).x=kn,na.y=ta,na.dy=oa,kn+=na.dx=Math.min(Vr.x+Vr.dx-kn,oa?yt(na.area/oa):0);na.z=!0,na.dx+=Vr.x+Vr.dx-kn,Vr.y+=oa,Vr.dy-=oa}else{for((on||oa>Vr.dx)&&(oa=Vr.dx);++un<Xr;)(na=Rr[un]).x=kn,na.y=ta,na.dx=oa,ta+=na.dy=Math.min(Vr.y+Vr.dy-ta,oa?yt(na.area/oa):0);na.z=!1,na.dy+=Vr.y+Vr.dy-ta,Vr.x+=oa,Vr.dx-=oa}}function rn(Rr){var kr=Ee||ot(Rr),Vr=kr[0];return Vr.x=Vr.y=0,Vr.value?(Vr.dx=zt[0],Vr.dy=zt[1]):Vr.dx=Vr.dy=0,Ee&&ot.revalue(Vr),Qe([Vr],Vr.dx*Vr.dy/Vr.value),(Ee?Cr:tr)(Vr),ne&&(Ee=kr),kr}return rn.size=function(Rr){return arguments.length?(zt=Rr,rn):zt},rn.padding=function(Rr){if(!arguments.length)return Jt;function kr(un){var Xr=Rr.call(rn,un,un.depth);return null==Xr?vo(un):ls(un,"number"==typeof Xr?[Xr,Xr,Xr,Xr]:Xr)}function Vr(un){return ls(un,Rr)}var on;return $t=null==(Jt=Rr)?vo:"function"==(on=typeof Rr)?kr:("number"===on&&(Rr=[Rr,Rr,Rr,Rr]),Vr),rn},rn.round=function(Rr){return arguments.length?(yt=Rr?Math.round:Number,rn):yt!=Number},rn.sticky=function(Rr){return arguments.length?(ne=Rr,Ee=null,rn):ne},rn.ratio=function(Rr){return arguments.length?(Oe=Rr,rn):Oe},rn.mode=function(Rr){return arguments.length?(me=Rr+"",rn):me},Zo(rn,ot)},i.random={normal:function(ot,yt){var zt=arguments.length;return zt<2&&(yt=1),zt<1&&(ot=0),function(){var Jt,$t,ne;do{ne=(Jt=2*Math.random()-1)*Jt+($t=2*Math.random()-1)*$t}while(!ne||ne>1);return ot+yt*Jt*Math.sqrt(-2*Math.log(ne)/ne)}},logNormal:function(){var ot=i.random.normal.apply(i,arguments);return function(){return Math.exp(ot())}},bates:function(ot){var yt=i.random.irwinHall(ot);return function(){return yt()/ot}},irwinHall:function(ot){return function(){for(var yt=0,zt=0;zt<ot;zt++)yt+=Math.random();return yt}}},i.scale={};var gf={floor:O,ceil:O};function us(ot,yt,zt,Jt){var $t=[],ne=[],Ee=0,me=Math.min(ot.length,yt.length)-1;for(ot[me]<ot[0]&&(ot=ot.slice().reverse(),yt=yt.slice().reverse());++Ee<=me;)$t.push(zt(ot[Ee-1],ot[Ee])),ne.push(Jt(yt[Ee-1],yt[Ee]));return function(Oe){var Qe=i.bisect(ot,Oe,1,me)-1;return ne[Qe]($t[Qe](Oe))}}function fs(ot,yt,zt,Jt){var $t,ne;function Ee(){var Oe=Math.min(ot.length,yt.length)>2?us:fu,Qe=Jt?tu:is;return $t=Oe(ot,yt,Qe,zt),ne=Oe(yt,ot,Qe,no),me}function me(Oe){return $t(Oe)}return me.invert=function(Oe){return ne(Oe)},me.domain=function(Oe){return arguments.length?(ot=Oe.map(Number),Ee()):ot},me.range=function(Oe){return arguments.length?(yt=Oe,Ee()):yt},me.rangeRound=function(Oe){return me.range(Oe).interpolate(ks)},me.clamp=function(Oe){return arguments.length?(Jt=Oe,Ee()):Jt},me.interpolate=function(Oe){return arguments.length?(zt=Oe,Ee()):zt},me.ticks=function(Oe){return Ts(ot,Oe)},me.tickFormat=function(Oe,Qe){return d3_scale_linearTickFormat(ot,Oe,Qe)},me.nice=function(Oe){return sl(ot,Oe),Ee()},me.copy=function(){return fs(ot,yt,zt,Jt)},Ee()}function zi(ot,yt){return i.rebind(ot,yt,"range","rangeRound","interpolate","clamp")}function sl(ot,yt){return cu(ot,hu(Ul(ot,yt)[2])),cu(ot,hu(Ul(ot,yt)[2])),ot}function Ul(ot,yt){null==yt&&(yt=10);var zt=ol(ot),Jt=zt[1]-zt[0],$t=Math.pow(10,Math.floor(Math.log(Jt/yt)/Math.LN10)),ne=yt/Jt*$t;return ne<=.15?$t*=10:ne<=.35?$t*=5:ne<=.75&&($t*=2),zt[0]=Math.ceil(zt[0]/$t)*$t,zt[1]=Math.floor(zt[1]/$t)*$t+.5*$t,zt[2]=$t,zt}function Ts(ot,yt){return i.range.apply(i,Ul(ot,yt))}function Ko(ot,yt,zt,Jt){function $t(me){return(zt?Math.log(me<0?0:me):-Math.log(me>0?0:-me))/Math.log(yt)}function ne(me){return zt?Math.pow(yt,me):-Math.pow(yt,-me)}function Ee(me){return ot($t(me))}return Ee.invert=function(me){return ne(ot.invert(me))},Ee.domain=function(me){return arguments.length?(zt=me[0]>=0,ot.domain((Jt=me.map(Number)).map($t)),Ee):Jt},Ee.base=function(me){return arguments.length?(yt=+me,ot.domain(Jt.map($t)),Ee):yt},Ee.nice=function(){var me=cu(Jt.map($t),zt?Math:Jo);return ot.domain(me),Jt=me.map(ne),Ee},Ee.ticks=function(){var me=ol(Jt),Oe=[],Qe=me[0],tr=me[1],Cr=Math.floor($t(Qe)),Sr=Math.ceil($t(tr)),Qr=yt%1?2:yt;if(isFinite(Sr-Cr)){if(zt){for(;Cr<Sr;Cr++)for(var rn=1;rn<Qr;rn++)Oe.push(ne(Cr)*rn);Oe.push(ne(Cr))}else for(Oe.push(ne(Cr));Cr++<Sr;)for(rn=Qr-1;rn>0;rn--)Oe.push(ne(Cr)*rn);for(Cr=0;Oe[Cr]<Qe;Cr++);for(Sr=Oe.length;Oe[Sr-1]>tr;Sr--);Oe=Oe.slice(Cr,Sr)}return Oe},Ee.copy=function(){return Ko(ot.copy(),yt,zt,Jt)},zi(Ee,ot)}i.scale.linear=function(){return fs([0,1],[0,1],no,!1)},i.scale.log=function(){return Ko(i.scale.linear().domain([0,1]),10,!0,[1,10])};var Jo={floor:function(ot){return-Math.ceil(-ot)},ceil:function(ot){return-Math.floor(-ot)}};function ul(ot,yt,zt){var Jt=As(yt),$t=As(1/yt);function ne(Ee){return ot(Jt(Ee))}return ne.invert=function(Ee){return $t(ot.invert(Ee))},ne.domain=function(Ee){return arguments.length?(ot.domain((zt=Ee.map(Number)).map(Jt)),ne):zt},ne.ticks=function(Ee){return Ts(zt,Ee)},ne.tickFormat=function(Ee,me){return d3_scale_linearTickFormat(zt,Ee,me)},ne.nice=function(Ee){return ne.domain(sl(zt,Ee))},ne.exponent=function(Ee){return arguments.length?(Jt=As(yt=Ee),$t=As(1/yt),ot.domain(zt.map(Jt)),ne):yt},ne.copy=function(){return ul(ot.copy(),yt,zt)},zi(ne,ot)}function As(ot){return function(yt){return yt<0?-Math.pow(-yt,ot):Math.pow(yt,ot)}}function ei(ot,yt){var zt,Jt,$t;function ne(me){return Jt[((zt.get(me)||("range"===yt.t?zt.set(me,ot.push(me)):NaN))-1)%Jt.length]}function Ee(me,Oe){return i.range(ot.length).map(function(Qe){return me+Oe*Qe})}return ne.domain=function(me){if(!arguments.length)return ot;ot=[],zt=new L;for(var tr,Oe=-1,Qe=me.length;++Oe<Qe;)zt.has(tr=me[Oe])||zt.set(tr,ot.push(tr));return ne[yt.t].apply(ne,yt.a)},ne.range=function(me){return arguments.length?(Jt=me,$t=0,yt={t:"range",a:arguments},ne):Jt},ne.rangePoints=function(me,Oe){arguments.length<2&&(Oe=0);var Qe=me[0],tr=me[1],Cr=ot.length<2?(Qe=(Qe+tr)/2,0):(tr-Qe)/(ot.length-1+Oe);return Jt=Ee(Qe+Cr*Oe/2,Cr),$t=0,yt={t:"rangePoints",a:arguments},ne},ne.rangeRoundPoints=function(me,Oe){arguments.length<2&&(Oe=0);var Qe=me[0],tr=me[1],Cr=ot.length<2?(Qe=tr=Math.round((Qe+tr)/2),0):(tr-Qe)/(ot.length-1+Oe)|0;return Jt=Ee(Qe+Math.round(Cr*Oe/2+(tr-Qe-(ot.length-1+Oe)*Cr)/2),Cr),$t=0,yt={t:"rangeRoundPoints",a:arguments},ne},ne.rangeBands=function(me,Oe,Qe){arguments.length<2&&(Oe=0),arguments.length<3&&(Qe=Oe);var tr=me[1]<me[0],Cr=me[tr-0],Qr=(me[1-tr]-Cr)/(ot.length-Oe+2*Qe);return Jt=Ee(Cr+Qr*Qe,Qr),tr&&Jt.reverse(),$t=Qr*(1-Oe),yt={t:"rangeBands",a:arguments},ne},ne.rangeRoundBands=function(me,Oe,Qe){arguments.length<2&&(Oe=0),arguments.length<3&&(Qe=Oe);var tr=me[1]<me[0],Cr=me[tr-0],Sr=me[1-tr],Qr=Math.floor((Sr-Cr)/(ot.length-Oe+2*Qe));return Jt=Ee(Cr+Math.round((Sr-Cr-(ot.length-Oe)*Qr)/2),Qr),tr&&Jt.reverse(),$t=Math.round(Qr*(1-Oe)),yt={t:"rangeRoundBands",a:arguments},ne},ne.rangeBand=function(){return $t},ne.rangeExtent=function(){return ol(yt.a[0])},ne.copy=function(){return ei(ot,yt)},ne.domain(ot)}i.scale.pow=function(){return ul(i.scale.linear(),1,[0,1])},i.scale.sqrt=function(){return i.scale.pow().exponent(.5)},i.scale.ordinal=function(){return ei([],{t:"range",a:[[]]})},i.scale.category10=function(){return i.scale.ordinal().range(Gs)},i.scale.category20=function(){return i.scale.ordinal().range(vu)},i.scale.category20b=function(){return i.scale.ordinal().range(Vl)},i.scale.category20c=function(){return i.scale.ordinal().range(Ms)};var Gs=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(dr),vu=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(dr),Vl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(dr),Ms=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(dr);function Hu(ot,yt){var zt;function Jt(){var ne=0,Ee=yt.length;for(zt=[];++ne<Ee;)zt[ne-1]=i.quantile(ot,ne/Ee);return $t}function $t(ne){if(!isNaN(ne=+ne))return yt[i.bisect(zt,ne)]}return $t.domain=function(ne){return arguments.length?(ot=ne.map(m).filter(h).sort(f),Jt()):ot},$t.range=function(ne){return arguments.length?(yt=ne,Jt()):yt},$t.quantiles=function(){return zt},$t.invertExtent=function(ne){return(ne=yt.indexOf(ne))<0?[NaN,NaN]:[ne>0?zt[ne-1]:ot[0],ne<zt.length?zt[ne]:ot[ot.length-1]]},$t.copy=function(){return Hu(ot,yt)},Jt()}function du(ot,yt,zt){var Jt,$t;function ne(me){return zt[Math.max(0,Math.min($t,Math.floor(Jt*(me-ot))))]}function Ee(){return Jt=zt.length/(yt-ot),$t=zt.length-1,ne}return ne.domain=function(me){return arguments.length?(ot=+me[0],yt=+me[me.length-1],Ee()):[ot,yt]},ne.range=function(me){return arguments.length?(zt=me,Ee()):zt},ne.invertExtent=function(me){return[me=(me=zt.indexOf(me))<0?NaN:me/Jt+ot,me+1/Jt]},ne.copy=function(){return du(ot,yt,zt)},Ee()}function fl(ot,yt){function zt(Jt){if(Jt<=Jt)return yt[i.bisect(ot,Jt)]}return zt.domain=function(Jt){return arguments.length?(ot=Jt,zt):ot},zt.range=function(Jt){return arguments.length?(yt=Jt,zt):yt},zt.invertExtent=function(Jt){return Jt=yt.indexOf(Jt),[ot[Jt-1],ot[Jt]]},zt.copy=function(){return fl(ot,yt)},zt}function Hl(ot){function yt(zt){return+zt}return yt.invert=yt,yt.domain=yt.range=function(zt){return arguments.length?(ot=zt.map(yt),yt):ot},yt.ticks=function(zt){return Ts(ot,zt)},yt.tickFormat=function(zt,Jt){return d3_scale_linearTickFormat(ot,zt,Jt)},yt.copy=function(){return Hl(ot)},yt}function Gu(){return 0}i.scale.quantile=function(){return Hu([],[])},i.scale.quantize=function(){return du(0,1,[0,1])},i.scale.threshold=function(){return fl([.5],[0,1])},i.scale.identity=function(){return Hl([0,1])},i.svg={},i.svg.arc=function(){var ot=cl,yt=hl,zt=Gu,Jt=Qo,$t=$o,ne=Ao,Ee=vl;function me(){var Qe=Math.max(0,+ot.apply(this,arguments)),tr=Math.max(0,+yt.apply(this,arguments)),Cr=$t.apply(this,arguments)-Zt,Sr=ne.apply(this,arguments)-Zt,Qr=Math.abs(Sr-Cr),rn=Cr>Sr?0:1;if(tr<Qe&&(Rr=tr,tr=Qe,Qe=Rr),Qr>=kt)return Oe(tr,rn)+(Qe?Oe(Qe,1-rn):"")+"Z";var Rr,kr,Vr,on,kn,ta,oa,na,aa,ma,da,pa,un=0,Xr=0,Sa=[];if((on=(+Ee.apply(this,arguments)||0)/2)&&(Vr=Jt===Qo?Math.sqrt(Qe*Qe+tr*tr):+Jt.apply(this,arguments),rn||(Xr*=-1),tr&&(Xr=Pe(Vr/tr*Math.sin(on))),Qe&&(un=Pe(Vr/Qe*Math.sin(on)))),tr){kn=tr*Math.cos(Cr+Xr),ta=tr*Math.sin(Cr+Xr),oa=tr*Math.cos(Sr-Xr),na=tr*Math.sin(Sr-Xr);var Ua=Math.abs(Sr-Cr-2*Xr)<=ft?0:1;if(Xr&&hs(kn,ta,oa,na)===rn^Ua){var mi=(Cr+Sr)/2;kn=tr*Math.cos(mi),ta=tr*Math.sin(mi),oa=na=null}}else kn=ta=0;if(Qe){aa=Qe*Math.cos(Sr-un),ma=Qe*Math.sin(Sr-un),da=Qe*Math.cos(Cr+un),pa=Qe*Math.sin(Cr+un);var ja=Math.abs(Cr-Sr+2*un)<=ft?0:1;if(un&&hs(aa,ma,da,pa)===1-rn^ja){var Jn=(Cr+Sr)/2;aa=Qe*Math.cos(Jn),ma=Qe*Math.sin(Jn),da=pa=null}}else aa=ma=0;if(Qr>Rt&&(Rr=Math.min(Math.abs(tr-Qe)/2,+zt.apply(this,arguments)))>.001){kr=Qe<tr^rn?0:1;var La=Rr,Ea=Rr;if(Qr<ft){var Xn=null==da?[aa,ma]:null==oa?[kn,ta]:Mn([kn,ta],[da,pa],[oa,na],[aa,ma]),ca=kn-Xn[0],ii=ta-Xn[1],di=oa-Xn[0],Ai=na-Xn[1],ri=1/Math.sin(Math.acos((ca*di+ii*Ai)/(Math.sqrt(ca*ca+ii*ii)*Math.sqrt(di*di+Ai*Ai)))/2),Di=Math.sqrt(Xn[0]*Xn[0]+Xn[1]*Xn[1]);Ea=Math.min(Rr,(Qe-Di)/(ri-1)),La=Math.min(Rr,(tr-Di)/(ri+1))}if(null!=oa){var Mi=dl(null==da?[aa,ma]:[da,pa],[kn,ta],tr,La,rn),Vi=dl([oa,na],[aa,ma],tr,La,rn);Rr===La?Sa.push("M",Mi[0],"A",La,",",La," 0 0,",kr," ",Mi[1],"A",tr,",",tr," 0 ",1-rn^hs(Mi[1][0],Mi[1][1],Vi[1][0],Vi[1][1]),",",rn," ",Vi[1],"A",La,",",La," 0 0,",kr," ",Vi[0]):Sa.push("M",Mi[0],"A",La,",",La," 0 1,",kr," ",Vi[0])}else Sa.push("M",kn,",",ta);if(null!=da){var ti=dl([kn,ta],[da,pa],Qe,-Ea,rn),xl=dl([aa,ma],null==oa?[kn,ta]:[oa,na],Qe,-Ea,rn);Rr===Ea?Sa.push("L",xl[0],"A",Ea,",",Ea," 0 0,",kr," ",xl[1],"A",Qe,",",Qe," 0 ",rn^hs(xl[1][0],xl[1][1],ti[1][0],ti[1][1]),",",1-rn," ",ti[1],"A",Ea,",",Ea," 0 0,",kr," ",ti[0]):Sa.push("L",xl[0],"A",Ea,",",Ea," 0 0,",kr," ",ti[0])}else Sa.push("L",aa,",",ma)}else Sa.push("M",kn,",",ta),null!=oa&&Sa.push("A",tr,",",tr," 0 ",Ua,",",rn," ",oa,",",na),Sa.push("L",aa,",",ma),null!=da&&Sa.push("A",Qe,",",Qe," 0 ",ja,",",1-rn," ",da,",",pa);return Sa.push("Z"),Sa.join("")}function Oe(Qe,tr){return"M0,"+Qe+"A"+Qe+","+Qe+" 0 1,"+tr+" 0,"+-Qe+"A"+Qe+","+Qe+" 0 1,"+tr+" 0,"+Qe}return me.innerRadius=function(Qe){return arguments.length?(ot=hr(Qe),me):ot},me.outerRadius=function(Qe){return arguments.length?(yt=hr(Qe),me):yt},me.cornerRadius=function(Qe){return arguments.length?(zt=hr(Qe),me):zt},me.padRadius=function(Qe){return arguments.length?(Jt=Qe==Qo?Qo:hr(Qe),me):Jt},me.startAngle=function(Qe){return arguments.length?($t=hr(Qe),me):$t},me.endAngle=function(Qe){return arguments.length?(ne=hr(Qe),me):ne},me.padAngle=function(Qe){return arguments.length?(Ee=hr(Qe),me):Ee},me.centroid=function(){var Qe=(+ot.apply(this,arguments)+ +yt.apply(this,arguments))/2,tr=(+$t.apply(this,arguments)+ +ne.apply(this,arguments))/2-Zt;return[Math.cos(tr)*Qe,Math.sin(tr)*Qe]},me};var Qo="auto";function cl(ot){return ot.innerRadius}function hl(ot){return ot.outerRadius}function $o(ot){return ot.startAngle}function Ao(ot){return ot.endAngle}function vl(ot){return ot&&ot.padAngle}function hs(ot,yt,zt,Jt){return(ot-zt)*yt-(yt-Jt)*ot>0?0:1}function dl(ot,yt,zt,Jt,$t){var ne=ot[0]-yt[0],Ee=ot[1]-yt[1],me=($t?Jt:-Jt)/Math.sqrt(ne*ne+Ee*Ee),Oe=me*Ee,Qe=-me*ne,tr=ot[0]+Oe,Cr=ot[1]+Qe,Sr=yt[0]+Oe,Qr=yt[1]+Qe,rn=(tr+Sr)/2,Rr=(Cr+Qr)/2,kr=Sr-tr,Vr=Qr-Cr,on=kr*kr+Vr*Vr,un=zt-Jt,Xr=tr*Qr-Sr*Cr,kn=(Vr<0?-1:1)*Math.sqrt(Math.max(0,un*un*on-Xr*Xr)),ta=(Xr*Vr-kr*kn)/on,oa=(-Xr*kr-Vr*kn)/on,na=(Xr*Vr+kr*kn)/on,aa=(-Xr*kr+Vr*kn)/on,ma=ta-rn,da=oa-Rr,pa=na-rn,Sa=aa-Rr;return ma*ma+da*da>pa*pa+Sa*Sa&&(ta=na,oa=aa),[[ta-Oe,oa-Qe],[ta*zt/un,oa*zt/un]]}function Ws(){return!0}function Wu(ot){var yt=wr,zt=en,Jt=Ws,$t=Ti,ne=$t.key,Ee=.7;function me(Oe){var Qr,Qe=[],tr=[],Cr=-1,Sr=Oe.length,rn=hr(yt),Rr=hr(zt);function kr(){Qe.push("M",$t(ot(tr),Ee))}for(;++Cr<Sr;)Jt.call(this,Qr=Oe[Cr],Cr)?tr.push([+rn.call(this,Qr,Cr),+Rr.call(this,Qr,Cr)]):tr.length&&(kr(),tr=[]);return tr.length&&kr(),Qe.length?Qe.join(""):null}return me.x=function(Oe){return arguments.length?(yt=Oe,me):yt},me.y=function(Oe){return arguments.length?(zt=Oe,me):zt},me.defined=function(Oe){return arguments.length?(Jt=Oe,me):Jt},me.interpolate=function(Oe){return arguments.length?(ne="function"==typeof Oe?$t=Oe:($t=Gl.get(Oe)||Ti).key,me):ne},me.tension=function(Oe){return arguments.length?(Ee=Oe,me):Ee},me}i.svg.line=function(){return Wu(O)};var Gl=i.map({linear:Ti,"linear-closed":pu,step:function Wl(ot){for(var yt=0,zt=ot.length,Jt=ot[0],$t=[Jt[0],",",Jt[1]];++yt<zt;)$t.push("H",(Jt[0]+(Jt=ot[yt])[0])/2,"V",Jt[1]);return zt>1&&$t.push("H",Jt[0]),$t.join("")},"step-before":Ss,"step-after":vs,basis:yl,"basis-open":function Yu(ot){if(ot.length<4)return Ti(ot);for(var $t,yt=[],zt=-1,Jt=ot.length,ne=[0],Ee=[0];++zt<3;)ne.push(($t=ot[zt])[0]),Ee.push($t[1]);for(yt.push(ao(Oo,ne)+","+ao(Oo,Ee)),--zt;++zt<Jt;)$t=ot[zt],ne.shift(),ne.push($t[0]),Ee.shift(),Ee.push($t[1]),Xs(yt,ne,Ee);return yt.join("")},"basis-closed":function yu(ot){for(var yt,ne,zt=-1,Jt=ot.length,$t=Jt+4,Ee=[],me=[];++zt<4;)Ee.push((ne=ot[zt%Jt])[0]),me.push(ne[1]);for(yt=[ao(Oo,Ee),",",ao(Oo,me)],--zt;++zt<$t;)ne=ot[zt%Jt],Ee.shift(),Ee.push(ne[0]),me.shift(),me.push(ne[1]),Xs(yt,Ee,me);return yt.join("")},bundle:function Es(ot,yt){var zt=ot.length-1;if(zt)for(var Oe,Qe,Jt=ot[0][0],$t=ot[0][1],ne=ot[zt][0]-Jt,Ee=ot[zt][1]-$t,me=-1;++me<=zt;)(Oe=ot[me])[0]=yt*Oe[0]+(1-yt)*(Jt+(Qe=me/zt)*ne),Oe[1]=yt*Oe[1]+(1-yt)*($t+Qe*Ee);return yl(ot)},cardinal:function Ys(ot,yt){return ot.length<3?Ti(ot):ot[0]+Zs(ot,pl(ot,yt))},"cardinal-open":function gu(ot,yt){return ot.length<4?Ti(ot):ot[1]+Zs(ot.slice(1,-1),pl(ot,yt))},"cardinal-closed":function yf(ot,yt){return ot.length<3?pu(ot):ot[0]+Zs((ot.push(ot[0]),ot),pl([ot[ot.length-2]].concat(ot,[ot[1]]),yt))},monotone:function Xu(ot){return ot.length<3?Ti(ot):ot[0]+Zs(ot,function Zl(ot){for(var zt,Jt,$t,ne,yt=[],Ee=function Zu(ot){for(var yt=0,zt=ot.length-1,Jt=[],$t=ot[0],ne=ot[1],Ee=Jt[0]=Cs($t,ne);++yt<zt;)Jt[yt]=(Ee+(Ee=Cs($t=ne,ne=ot[yt+1])))/2;return Jt[yt]=Ee,Jt}(ot),me=-1,Oe=ot.length-1;++me<Oe;)zt=Cs(ot[me],ot[me+1]),v(zt)<Rt?Ee[me]=Ee[me+1]=0:(ne=(Jt=Ee[me]/zt)*Jt+($t=Ee[me+1]/zt)*$t)>9&&(ne=3*zt/Math.sqrt(ne),Ee[me]=ne*Jt,Ee[me+1]=ne*$t);for(me=-1;++me<=Oe;)ne=(ot[Math.min(Oe,me+1)][0]-ot[Math.max(0,me-1)][0])/(6*(1+Ee[me]*Ee[me])),yt.push([ne||0,Ee[me]*ne||0]);return yt}(ot))}});function Ti(ot){return ot.length>1?ot.join("L"):ot+"Z"}function pu(ot){return ot.join("L")+"Z"}function Ss(ot){for(var yt=0,zt=ot.length,Jt=ot[0],$t=[Jt[0],",",Jt[1]];++yt<zt;)$t.push("V",(Jt=ot[yt])[1],"H",Jt[0]);return $t.join("")}function vs(ot){for(var yt=0,zt=ot.length,Jt=ot[0],$t=[Jt[0],",",Jt[1]];++yt<zt;)$t.push("H",(Jt=ot[yt])[0],"V",Jt[1]);return $t.join("")}function Zs(ot,yt){if(yt.length<1||ot.length!=yt.length&&ot.length!=yt.length+2)return Ti(ot);var zt=ot.length!=yt.length,Jt="",$t=ot[0],ne=ot[1],Ee=yt[0],me=Ee,Oe=1;if(zt&&(Jt+="Q"+(ne[0]-2*Ee[0]/3)+","+(ne[1]-2*Ee[1]/3)+","+ne[0]+","+ne[1],$t=ot[1],Oe=2),yt.length>1){ne=ot[Oe],Oe++,Jt+="C"+($t[0]+Ee[0])+","+($t[1]+Ee[1])+","+(ne[0]-(me=yt[1])[0])+","+(ne[1]-me[1])+","+ne[0]+","+ne[1];for(var Qe=2;Qe<yt.length;Qe++,Oe++)Jt+="S"+((ne=ot[Oe])[0]-(me=yt[Qe])[0])+","+(ne[1]-me[1])+","+ne[0]+","+ne[1]}if(zt){var tr=ot[Oe];Jt+="Q"+(ne[0]+2*me[0]/3)+","+(ne[1]+2*me[1]/3)+","+tr[0]+","+tr[1]}return Jt}function pl(ot,yt){for(var $t,zt=[],Jt=(1-yt)/2,ne=ot[0],Ee=ot[1],me=1,Oe=ot.length;++me<Oe;)$t=ne,ne=Ee,zt.push([Jt*((Ee=ot[me])[0]-$t[0]),Jt*(Ee[1]-$t[1])]);return zt}function yl(ot){if(ot.length<3)return Ti(ot);var yt=1,zt=ot.length,Jt=ot[0],$t=Jt[0],ne=Jt[1],Ee=[$t,$t,$t,(Jt=ot[1])[0]],me=[ne,ne,ne,Jt[1]],Oe=[$t,",",ne,"L",ao(Oo,Ee),",",ao(Oo,me)];for(ot.push(ot[zt-1]);++yt<=zt;)Jt=ot[yt],Ee.shift(),Ee.push(Jt[0]),me.shift(),me.push(Jt[1]),Xs(Oe,Ee,me);return ot.pop(),Oe.push("L",Jt),Oe.join("")}function ao(ot,yt){return ot[0]*yt[0]+ot[1]*yt[1]+ot[2]*yt[2]+ot[3]*yt[3]}Gl.forEach(function(ot,yt){yt.key=ot,yt.closed=/-closed$/.test(ot)});var mu=[0,2/3,1/3,0],Yl=[0,1/3,2/3,0],Oo=[0,1/6,2/3,1/6];function Xs(ot,yt,zt){ot.push("C",ao(mu,yt),",",ao(mu,zt),",",ao(Yl,yt),",",ao(Yl,zt),",",ao(Oo,yt),",",ao(Oo,zt))}function Cs(ot,yt){return(yt[1]-ot[1])/(yt[0]-ot[0])}function ml(ot){for(var yt,$t,ne,zt=-1,Jt=ot.length;++zt<Jt;)ne=(yt=ot[zt])[1]-Zt,yt[0]=($t=yt[0])*Math.cos(ne),yt[1]=$t*Math.sin(ne);return ot}function xu(ot){var yt=wr,zt=wr,Jt=0,$t=en,ne=Ws,Ee=Ti,me=Ee.key,Oe=Ee,Qe="L",tr=.7;function Cr(Sr){var on,oa,na,Qr=[],rn=[],Rr=[],kr=-1,Vr=Sr.length,un=hr(yt),Xr=hr(Jt),kn=yt===zt?function(){return oa}:hr(zt),ta=Jt===$t?function(){return na}:hr($t);function aa(){Qr.push("M",Ee(ot(Rr),tr),Qe,Oe(ot(rn.reverse()),tr),"Z")}for(;++kr<Vr;)ne.call(this,on=Sr[kr],kr)?(rn.push([oa=+un.call(this,on,kr),na=+Xr.call(this,on,kr)]),Rr.push([+kn.call(this,on,kr),+ta.call(this,on,kr)])):rn.length&&(aa(),rn=[],Rr=[]);return rn.length&&aa(),Qr.length?Qr.join(""):null}return Cr.x=function(Sr){return arguments.length?(yt=zt=Sr,Cr):zt},Cr.x0=function(Sr){return arguments.length?(yt=Sr,Cr):yt},Cr.x1=function(Sr){return arguments.length?(zt=Sr,Cr):zt},Cr.y=function(Sr){return arguments.length?(Jt=$t=Sr,Cr):$t},Cr.y0=function(Sr){return arguments.length?(Jt=Sr,Cr):Jt},Cr.y1=function(Sr){return arguments.length?($t=Sr,Cr):$t},Cr.defined=function(Sr){return arguments.length?(ne=Sr,Cr):ne},Cr.interpolate=function(Sr){return arguments.length?(me="function"==typeof Sr?Ee=Sr:(Ee=Gl.get(Sr)||Ti).key,Oe=Ee.reverse||Ee,Qe=Ee.closed?"M":"L",Cr):me},Cr.tension=function(Sr){return arguments.length?(tr=Sr,Cr):tr},Cr}function Xt(ot){return ot.source}function _t(ot){return ot.target}function fe(ot){return ot.radius}function he(ot){return[ot.x,ot.y]}function Le(ot){return function(){var yt=ot.apply(this,arguments),zt=yt[0],Jt=yt[1]-Zt;return[zt*Math.cos(Jt),zt*Math.sin(Jt)]}}function Me(){return 64}function ke(){return"circle"}function fr(ot){var yt=Math.sqrt(ot/ft);return"M0,"+yt+"A"+yt+","+yt+" 0 1,1 0,"+-yt+"A"+yt+","+yt+" 0 1,1 0,"+yt+"Z"}i.svg.line.radial=function(){var ot=Wu(ml);return ot.radius=ot.x,delete ot.x,ot.angle=ot.y,delete ot.y,ot},Ss.reverse=vs,vs.reverse=Ss,i.svg.area=function(){return xu(O)},i.svg.area.radial=function(){var ot=xu(ml);return ot.radius=ot.x,delete ot.x,ot.innerRadius=ot.x0,delete ot.x0,ot.outerRadius=ot.x1,delete ot.x1,ot.angle=ot.y,delete ot.y,ot.startAngle=ot.y0,delete ot.y0,ot.endAngle=ot.y1,delete ot.y1,ot},i.svg.chord=function(){var ot=Xt,yt=_t,zt=fe,Jt=$o,$t=Ao;function ne(tr,Cr){var Sr=Ee(this,ot,tr,Cr),Qr=Ee(this,yt,tr,Cr);return"M"+Sr.p0+Oe(Sr.r,Sr.p1,Sr.a1-Sr.a0)+(function me(tr,Cr){return tr.a0==Cr.a0&&tr.a1==Cr.a1}(Sr,Qr)?Qe(0,0,0,Sr.p0):Qe(0,0,0,Qr.p0)+Oe(Qr.r,Qr.p1,Qr.a1-Qr.a0)+Qe(0,0,0,Sr.p0))+"Z"}function Ee(tr,Cr,Sr,Qr){var rn=Cr.call(tr,Sr,Qr),Rr=zt.call(tr,rn,Qr),kr=Jt.call(tr,rn,Qr)-Zt,Vr=$t.call(tr,rn,Qr)-Zt;return{r:Rr,a0:kr,a1:Vr,p0:[Rr*Math.cos(kr),Rr*Math.sin(kr)],p1:[Rr*Math.cos(Vr),Rr*Math.sin(Vr)]}}function Oe(tr,Cr,Sr){return"A"+tr+","+tr+" 0 "+ +(Sr>ft)+",1 "+Cr}function Qe(tr,Cr,Sr,Qr){return"Q 0,0 "+Qr}return ne.radius=function(tr){return arguments.length?(zt=hr(tr),ne):zt},ne.source=function(tr){return arguments.length?(ot=hr(tr),ne):ot},ne.target=function(tr){return arguments.length?(yt=hr(tr),ne):yt},ne.startAngle=function(tr){return arguments.length?(Jt=hr(tr),ne):Jt},ne.endAngle=function(tr){return arguments.length?($t=hr(tr),ne):$t},ne},i.svg.diagonal=function(){var ot=Xt,yt=_t,zt=he;function Jt($t,ne){var Ee=ot.call(this,$t,ne),me=yt.call(this,$t,ne),Oe=(Ee.y+me.y)/2,Qe=[Ee,{x:Ee.x,y:Oe},{x:me.x,y:Oe},me];return"M"+(Qe=Qe.map(zt))[0]+"C"+Qe[1]+" "+Qe[2]+" "+Qe[3]}return Jt.source=function($t){return arguments.length?(ot=hr($t),Jt):ot},Jt.target=function($t){return arguments.length?(yt=hr($t),Jt):yt},Jt.projection=function($t){return arguments.length?(zt=$t,Jt):zt},Jt},i.svg.diagonal.radial=function(){var ot=i.svg.diagonal(),yt=he,zt=ot.projection;return ot.projection=function(Jt){return arguments.length?zt(Le(yt=Jt)):yt},ot},i.svg.symbol=function(){var ot=ke,yt=Me;function zt(Jt,$t){return(pr.get(ot.call(this,Jt,$t))||fr)(yt.call(this,Jt,$t))}return zt.type=function(Jt){return arguments.length?(ot=hr(Jt),zt):ot},zt.size=function(Jt){return arguments.length?(yt=hr(Jt),zt):yt},zt};var pr=i.map({circle:fr,cross:function(ot){var yt=Math.sqrt(ot/5)/2;return"M"+-3*yt+","+-yt+"H"+-yt+"V"+-3*yt+"H"+yt+"V"+-yt+"H"+3*yt+"V"+yt+"H"+yt+"V"+3*yt+"H"+-yt+"V"+yt+"H"+-3*yt+"Z"},diamond:function(ot){var yt=Math.sqrt(ot/(2*vr)),zt=yt*vr;return"M0,"+-yt+"L"+zt+",0 0,"+yt+" "+-zt+",0Z"},square:function(ot){var yt=Math.sqrt(ot)/2;return"M"+-yt+","+-yt+"L"+yt+","+-yt+" "+yt+","+yt+" "+-yt+","+yt+"Z"},"triangle-down":function(ot){var yt=Math.sqrt(ot/lr),zt=yt*lr/2;return"M0,"+zt+"L"+yt+","+-zt+" "+-yt+","+-zt+"Z"},"triangle-up":function(ot){var yt=Math.sqrt(ot/lr),zt=yt*lr/2;return"M0,"+-zt+"L"+yt+","+zt+" "+-yt+","+zt+"Z"}});i.svg.symbolTypes=pr.keys();var lr=Math.sqrt(3),vr=Math.tan(30*ee);X.transition=function(ot){for(var $t,ne,yt=zn||++bn,zt=Aa(ot),Jt=[],Ee=qn||{time:Date.now(),ease:of,delay:0,duration:250},me=-1,Oe=this.length;++me<Oe;){Jt.push($t=[]);for(var Qe=this[me],tr=-1,Cr=Qe.length;++tr<Cr;)(ne=Qe[tr])&&Ra(ne,tr,zt,yt,Ee),$t.push(ne)}return jr(Jt,zt,yt)},X.interrupt=function(ot){return this.each(null==ot?Fr:Hr(Aa(ot)))};var Fr=Hr(Aa());function Hr(ot){return function(){var yt,zt,Jt;(yt=this[ot])&&(Jt=yt[zt=yt.active])&&(Jt.timer.c=null,Jt.timer.t=NaN,--yt.count?delete yt[zt]:delete this[ot],yt.active+=.5,Jt.event&&Jt.event.interrupt.call(this,this.__data__,Jt.index))}}function jr(ot,yt,zt){return Z(ot,$r),ot.namespace=yt,ot.id=zt,ot}var zn,qn,$r=[],bn=0;function xa(ot,yt,zt,Jt){var $t=ot.id,ne=ot.namespace;return Bt(ot,"function"==typeof zt?function(Ee,me,Oe){Ee[ne][$t].tween.set(yt,Jt(zt.call(Ee,Ee.__data__,me,Oe)))}:(zt=Jt(zt),function(Ee){Ee[ne][$t].tween.set(yt,zt)}))}function Ma(ot){return null==ot&&(ot=""),function(){this.textContent=ot}}function Aa(ot){return null==ot?"__transition__":"__transition_"+ot+"__"}function Ra(ot,yt,zt,Jt,$t){var me,Oe,Qe,tr,Cr,ne=ot[zt]||(ot[zt]={active:0,count:0}),Ee=ne[Jt];function Qr(Rr){var kr=ne.active,Vr=ne[kr];for(var on in Vr&&(Vr.timer.c=null,Vr.timer.t=NaN,--ne.count,delete ne[kr],Vr.event&&Vr.event.interrupt.call(ot,ot.__data__,Vr.index)),ne)if(+on<Jt){var un=ne[on];un.timer.c=null,un.timer.t=NaN,--ne.count,delete ne[on]}Oe.c=rn,Nn(function(){return Oe.c&&rn(Rr||1)&&(Oe.c=null,Oe.t=NaN),1},0,me),ne.active=Jt,Ee.event&&Ee.event.start.call(ot,ot.__data__,yt),Cr=[],Ee.tween.forEach(function(Xr,kn){(kn=kn.call(ot,ot.__data__,yt))&&Cr.push(kn)}),tr=Ee.ease,Qe=Ee.duration}function rn(Rr){for(var kr=Rr/Qe,Vr=tr(kr),on=Cr.length;on>0;)Cr[--on].call(ot,Vr);if(kr>=1)return Ee.event&&Ee.event.end.call(ot,ot.__data__,yt),--ne.count?delete ne[Jt]:delete ot[zt],1}Ee||(Oe=Nn(function Sr(Rr){var kr=Ee.delay;if(Oe.t=kr+me,kr<=Rr)return Qr(Rr-kr);Oe.c=Qr},0,me=$t.time),Ee=ne[Jt]={tween:new L,time:me,timer:Oe,delay:$t.delay,duration:$t.duration,ease:$t.ease,index:yt},$t=null,++ne.count)}$r.call=X.call,$r.empty=X.empty,$r.node=X.node,$r.size=X.size,i.transition=function(ot,yt){return ot&&ot.transition?zn?ot.transition(yt):ot:i.selection().transition(ot)},i.transition.prototype=$r,$r.select=function(ot){var $t,ne,Ee,yt=this.id,zt=this.namespace,Jt=[];ot=rt(ot);for(var me=-1,Oe=this.length;++me<Oe;){Jt.push($t=[]);for(var Qe=this[me],tr=-1,Cr=Qe.length;++tr<Cr;)(Ee=Qe[tr])&&(ne=ot.call(Ee,Ee.__data__,tr,me))?("__data__"in Ee&&(ne.__data__=Ee.__data__),Ra(ne,tr,zt,yt,Ee[zt][yt]),$t.push(ne)):$t.push(null)}return jr(Jt,zt,yt)},$r.selectAll=function(ot){var $t,ne,Ee,me,Oe,yt=this.id,zt=this.namespace,Jt=[];ot=et(ot);for(var Qe=-1,tr=this.length;++Qe<tr;)for(var Cr=this[Qe],Sr=-1,Qr=Cr.length;++Sr<Qr;)if(Ee=Cr[Sr]){Oe=Ee[zt][yt],ne=ot.call(Ee,Ee.__data__,Sr,Qe),Jt.push($t=[]);for(var rn=-1,Rr=ne.length;++rn<Rr;)(me=ne[rn])&&Ra(me,rn,zt,yt,Oe),$t.push(me)}return jr(Jt,zt,yt)},$r.filter=function(ot){var zt,$t,yt=[];"function"!=typeof ot&&(ot=te(ot));for(var ne=0,Ee=this.length;ne<Ee;ne++){yt.push(zt=[]);for(var Jt,me=0,Oe=(Jt=this[ne]).length;me<Oe;me++)($t=Jt[me])&&ot.call($t,$t.__data__,me,ne)&&zt.push($t)}return jr(yt,this.namespace,this.id)},$r.tween=function(ot,yt){var zt=this.id,Jt=this.namespace;return arguments.length<2?this.node()[Jt][zt].tween.get(ot):Bt(this,null==yt?function($t){$t[Jt][zt].tween.remove(ot)}:function($t){$t[Jt][zt].tween.set(ot,yt)})},$r.attr=function(ot,yt){if(arguments.length<2){for(yt in ot)this.attr(yt,ot[yt]);return this}var zt="transform"==ot?lo:no,Jt=i.ns.qualify(ot);function $t(){this.removeAttribute(Jt)}function ne(){this.removeAttributeNS(Jt.space,Jt.local)}function Ee(Oe){return null==Oe?$t:(Oe+="",function(){var tr,Qe=this.getAttribute(Jt);return Qe!==Oe&&(tr=zt(Qe,Oe),function(Cr){this.setAttribute(Jt,tr(Cr))})})}function me(Oe){return null==Oe?ne:(Oe+="",function(){var tr,Qe=this.getAttributeNS(Jt.space,Jt.local);return Qe!==Oe&&(tr=zt(Qe,Oe),function(Cr){this.setAttributeNS(Jt.space,Jt.local,tr(Cr))})})}return xa(this,"attr."+ot,yt,Jt.local?me:Ee)},$r.attrTween=function(ot,yt){var zt=i.ns.qualify(ot);return this.tween("attr."+ot,zt.local?function $t(ne,Ee){var me=yt.call(this,ne,Ee,this.getAttributeNS(zt.space,zt.local));return me&&function(Oe){this.setAttributeNS(zt.space,zt.local,me(Oe))}}:function Jt(ne,Ee){var me=yt.call(this,ne,Ee,this.getAttribute(zt));return me&&function(Oe){this.setAttribute(zt,me(Oe))}})},$r.style=function(ot,yt,zt){var Jt=arguments.length;if(Jt<3){if("string"!=typeof ot){for(zt in Jt<2&&(yt=""),ot)this.style(zt,ot[zt],yt);return this}zt=""}function $t(){this.style.removeProperty(ot)}function ne(Ee){return null==Ee?$t:(Ee+="",function(){var Oe,me=e(this).getComputedStyle(this,null).getPropertyValue(ot);return me!==Ee&&(Oe=no(me,Ee),function(Qe){this.style.setProperty(ot,Oe(Qe),zt)})})}return xa(this,"style."+ot,yt,ne)},$r.styleTween=function(ot,yt,zt){function Jt($t,ne){var Ee=yt.call(this,$t,ne,e(this).getComputedStyle(this,null).getPropertyValue(ot));return Ee&&function(me){this.style.setProperty(ot,Ee(me),zt)}}return arguments.length<3&&(zt=""),this.tween("style."+ot,Jt)},$r.text=function(ot){return xa(this,"text",ot,Ma)},$r.remove=function(){var ot=this.namespace;return this.each("end.transition",function(){var yt;this[ot].count<2&&(yt=this.parentNode)&&yt.removeChild(this)})},$r.ease=function(ot){var yt=this.id,zt=this.namespace;return arguments.length<1?this.node()[zt][yt].ease:("function"!=typeof ot&&(ot=i.ease.apply(i,arguments)),Bt(this,function(Jt){Jt[zt][yt].ease=ot}))},$r.delay=function(ot){var yt=this.id,zt=this.namespace;return arguments.length<1?this.node()[zt][yt].delay:Bt(this,"function"==typeof ot?function(Jt,$t,ne){Jt[zt][yt].delay=+ot.call(Jt,Jt.__data__,$t,ne)}:(ot=+ot,function(Jt){Jt[zt][yt].delay=ot}))},$r.duration=function(ot){var yt=this.id,zt=this.namespace;return arguments.length<1?this.node()[zt][yt].duration:Bt(this,"function"==typeof ot?function(Jt,$t,ne){Jt[zt][yt].duration=Math.max(1,ot.call(Jt,Jt.__data__,$t,ne))}:(ot=Math.max(1,ot),function(Jt){Jt[zt][yt].duration=ot}))},$r.each=function(ot,yt){var zt=this.id,Jt=this.namespace;if(arguments.length<2){var $t=qn,ne=zn;try{zn=zt,Bt(this,function(Ee,me,Oe){qn=Ee[Jt][zt],ot.call(Ee,Ee.__data__,me,Oe)})}finally{qn=$t,zn=ne}}else Bt(this,function(Ee){var me=Ee[Jt][zt];(me.event||(me.event=i.dispatch("start","end","interrupt"))).on(ot,yt)});return this},$r.transition=function(){for(var $t,Ee,me,ot=this.id,yt=++bn,zt=this.namespace,Jt=[],Oe=0,Qe=this.length;Oe<Qe;Oe++){Jt.push($t=[]);for(var ne,tr=0,Cr=(ne=this[Oe]).length;tr<Cr;tr++)(Ee=ne[tr])&&Ra(Ee,tr,zt,yt,{time:(me=Ee[zt][ot]).time,ease:me.ease,delay:me.delay+me.duration,duration:me.duration}),$t.push(Ee)}return jr(Jt,zt,yt)},i.svg.axis=function(){var me,ot=i.scale.linear(),yt=qa,zt=6,Jt=6,$t=3,ne=[10],Ee=null;function Oe(Qe){Qe.each(function(){var Xr,tr=i.select(this),Cr=this.__chart__||ot,Sr=this.__chart__=ot.copy(),Qr=null==Ee?Sr.ticks?Sr.ticks.apply(Sr,ne):Sr.domain():Ee,rn=null==me?Sr.tickFormat?Sr.tickFormat.apply(Sr,ne):O:me,Rr=tr.selectAll(".tick").data(Qr,Sr),kr=Rr.enter().insert("g",".domain").attr("class","tick").style("opacity",Rt),Vr=i.transition(Rr.exit()).style("opacity",Rt).remove(),on=i.transition(Rr.order()).style("opacity",1),un=Math.max(zt,0)+$t,kn=Hs(Sr),ta=tr.selectAll(".domain").data([0]),oa=(ta.enter().append("path").attr("class","domain"),i.transition(ta));kr.append("line"),kr.append("text");var Ua,mi,ja,Jn,na=kr.select("line"),aa=on.select("line"),ma=Rr.select("text").text(rn),da=kr.select("text"),pa=on.select("text"),Sa="top"===yt||"left"===yt?-1:1;if("bottom"===yt||"top"===yt?(Xr=ra,Ua="x",ja="y",mi="x2",Jn="y2",ma.attr("dy",Sa<0?"0em":".71em").style("text-anchor","middle"),oa.attr("d","M"+kn[0]+","+Sa*Jt+"V0H"+kn[1]+"V"+Sa*Jt)):(Xr=fi,Ua="y",ja="x",mi="y2",Jn="x2",ma.attr("dy",".32em").style("text-anchor",Sa<0?"end":"start"),oa.attr("d","M"+Sa*Jt+","+kn[0]+"H0V"+kn[1]+"H"+Sa*Jt)),na.attr(Jn,Sa*zt),da.attr(ja,Sa*un),aa.attr(mi,0).attr(Jn,Sa*zt),pa.attr(Ua,0).attr(ja,Sa*un),Sr.rangeBand){var La=Sr,Ea=La.rangeBand()/2;Cr=Sr=function(Xn){return La(Xn)+Ea}}else Cr.rangeBand?Cr=Sr:Vr.call(Xr,Sr,Cr);kr.call(Xr,Cr,Sr),on.call(Xr,Sr,Sr)})}return Oe.scale=function(Qe){return arguments.length?(ot=Qe,Oe):ot},Oe.orient=function(Qe){return arguments.length?(yt=Qe in ai?Qe+"":qa,Oe):yt},Oe.ticks=function(){return arguments.length?(ne=C(arguments),Oe):ne},Oe.tickValues=function(Qe){return arguments.length?(Ee=Qe,Oe):Ee},Oe.tickFormat=function(Qe){return arguments.length?(me=Qe,Oe):me},Oe.tickSize=function(Qe){var tr=arguments.length;return tr?(zt=+Qe,Jt=+arguments[tr-1],Oe):zt},Oe.innerTickSize=function(Qe){return arguments.length?(zt=+Qe,Oe):zt},Oe.outerTickSize=function(Qe){return arguments.length?(Jt=+Qe,Oe):Jt},Oe.tickPadding=function(Qe){return arguments.length?($t=+Qe,Oe):$t},Oe.tickSubdivide=function(){return arguments.length&&Oe},Oe};var qa="bottom",ai={top:1,right:1,bottom:1,left:1};function ra(ot,yt,zt){ot.attr("transform",function(Jt){var $t=yt(Jt);return"translate("+(isFinite($t)?$t:zt(Jt))+",0)"})}function fi(ot,yt,zt){ot.attr("transform",function(Jt){var $t=yt(Jt);return"translate(0,"+(isFinite($t)?$t:zt(Jt))+")"})}i.svg.brush=function(){var ne,Ee,ot=Q(tr,"brushstart","brush","brushend"),yt=null,zt=null,Jt=[0,0],$t=[0,0],me=!0,Oe=!0,Qe=ji[0];function tr(Rr){Rr.each(function(){var kr=i.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",rn).on("touchstart.brush",rn),Vr=kr.selectAll(".background").data([0]);Vr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),kr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var on=kr.selectAll(".resize").data(Qe,O);on.exit().remove(),on.enter().append("g").attr("class",function(ta){return"resize "+ta}).style("cursor",function(ta){return yi[ta]}).append("rect").attr("x",function(ta){return/[ew]$/.test(ta)?-3:null}).attr("y",function(ta){return/^[ns]/.test(ta)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),on.style("display",tr.empty()?"none":null);var kn,un=i.transition(kr),Xr=i.transition(Vr);yt&&(kn=Hs(yt),Xr.attr("x",kn[0]).attr("width",kn[1]-kn[0]),Sr(un)),zt&&(kn=Hs(zt),Xr.attr("y",kn[0]).attr("height",kn[1]-kn[0]),Qr(un)),Cr(un)})}function Cr(Rr){Rr.selectAll(".resize").attr("transform",function(kr){return"translate("+Jt[+/e$/.test(kr)]+","+$t[+/^s/.test(kr)]+")"})}function Sr(Rr){Rr.select(".extent").attr("x",Jt[0]),Rr.selectAll(".extent,.n>rect,.s>rect").attr("width",Jt[1]-Jt[0])}function Qr(Rr){Rr.select(".extent").attr("y",$t[0]),Rr.selectAll(".extent,.e>rect,.w>rect").attr("height",$t[1]-$t[0])}function rn(){var na,ma,Rr=this,kr=i.select(i.event.target),Vr=ot.of(Rr,arguments),on=i.select(Rr),un=kr.datum(),Xr=!/^(n|s)$/.test(un)&&yt,kn=!/^(e|w)$/.test(un)&&zt,ta=kr.classed("extent"),oa=St(Rr),aa=i.mouse(Rr),da=i.select(e(Rr)).on("keydown.brush",Ua).on("keyup.brush",mi);if(i.event.changedTouches?da.on("touchmove.brush",ja).on("touchend.brush",La):da.on("mousemove.brush",ja).on("mouseup.brush",La),on.interrupt().selectAll("*").interrupt(),ta)aa[0]=Jt[0]-aa[0],aa[1]=$t[0]-aa[1];else if(un){var pa=+/w$/.test(un),Sa=+/^n/.test(un);ma=[Jt[1-pa]-aa[0],$t[1-Sa]-aa[1]],aa[0]=Jt[pa],aa[1]=$t[Sa]}else i.event.altKey&&(na=aa.slice());function Ua(){32==i.event.keyCode&&(ta||(na=null,aa[0]-=Jt[1],aa[1]-=$t[1],ta=2),it())}function mi(){32==i.event.keyCode&&2==ta&&(aa[0]+=Jt[1],aa[1]+=$t[1],ta=0,it())}function ja(){var Ea=i.mouse(Rr),Xn=!1;ma&&(Ea[0]+=ma[0],Ea[1]+=ma[1]),ta||(i.event.altKey?(na||(na=[(Jt[0]+Jt[1])/2,($t[0]+$t[1])/2]),aa[0]=Jt[+(Ea[0]<na[0])],aa[1]=$t[+(Ea[1]<na[1])]):na=null),Xr&&Jn(Ea,yt,0)&&(Sr(on),Xn=!0),kn&&Jn(Ea,zt,1)&&(Qr(on),Xn=!0),Xn&&(Cr(on),Vr({type:"brush",mode:ta?"move":"resize"}))}function Jn(Ea,Xn,ca){var Vi,ti,ii=Hs(Xn),di=ii[0],Ai=ii[1],ri=aa[ca],Di=ca?$t:Jt,Mi=Di[1]-Di[0];if(ta&&(di-=ri,Ai-=Mi+ri),Vi=(ca?Oe:me)?Math.max(di,Math.min(Ai,Ea[ca])):Ea[ca],ta?ti=(Vi+=ri)+Mi:(na&&(ri=Math.max(di,Math.min(Ai,2*na[ca]-Vi))),ri<Vi?(ti=Vi,Vi=ri):ti=ri),Di[0]!=Vi||Di[1]!=ti)return ca?Ee=null:ne=null,Di[0]=Vi,Di[1]=ti,!0}function La(){ja(),on.style("pointer-events","all").selectAll(".resize").style("display",tr.empty()?"none":null),i.select("body").style("cursor",null),da.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),oa(),Vr({type:"brushend"})}on.style("pointer-events","none").selectAll(".resize").style("display",null),i.select("body").style("cursor",kr.style("cursor")),Vr({type:"brushstart"}),ja()}return tr.event=function(Rr){Rr.each(function(){var kr=ot.of(this,arguments),Vr={x:Jt,y:$t,i:ne,j:Ee},on=this.__chart__||Vr;this.__chart__=Vr,zn?i.select(this).transition().each("start.brush",function(){ne=on.i,Ee=on.j,Jt=on.x,$t=on.y,kr({type:"brushstart"})}).tween("brush:brush",function(){var un=wi(Jt,Vr.x),Xr=wi($t,Vr.y);return ne=Ee=null,function(kn){Jt=Vr.x=un(kn),$t=Vr.y=Xr(kn),kr({type:"brush",mode:"resize"})}}).each("end.brush",function(){ne=Vr.i,Ee=Vr.j,kr({type:"brush",mode:"resize"}),kr({type:"brushend"})}):(kr({type:"brushstart"}),kr({type:"brush",mode:"resize"}),kr({type:"brushend"}))})},tr.x=function(Rr){return arguments.length?(Qe=ji[!(yt=Rr)<<1|!zt],tr):yt},tr.y=function(Rr){return arguments.length?(Qe=ji[!yt<<1|!(zt=Rr)],tr):zt},tr.clamp=function(Rr){return arguments.length?(yt&&zt?(me=!!Rr[0],Oe=!!Rr[1]):yt?me=!!Rr:zt&&(Oe=!!Rr),tr):yt&&zt?[me,Oe]:yt?me:zt?Oe:null},tr.extent=function(Rr){var kr,Vr,on,un,Xr;return arguments.length?(yt&&(kr=Rr[0],Vr=Rr[1],zt&&(kr=kr[0],Vr=Vr[0]),ne=[kr,Vr],yt.invert&&(kr=yt(kr),Vr=yt(Vr)),Vr<kr&&(Xr=kr,kr=Vr,Vr=Xr),(kr!=Jt[0]||Vr!=Jt[1])&&(Jt=[kr,Vr])),zt&&(on=Rr[0],un=Rr[1],yt&&(on=on[1],un=un[1]),Ee=[on,un],zt.invert&&(on=zt(on),un=zt(un)),un<on&&(Xr=on,on=un,un=Xr),(on!=$t[0]||un!=$t[1])&&($t=[on,un])),tr):(yt&&(ne?(kr=ne[0],Vr=ne[1]):(kr=Jt[0],Vr=Jt[1],yt.invert&&(kr=yt.invert(kr),Vr=yt.invert(Vr)),Vr<kr&&(Xr=kr,kr=Vr,Vr=Xr))),zt&&(Ee?(on=Ee[0],un=Ee[1]):(on=$t[0],un=$t[1],zt.invert&&(on=zt.invert(on),un=zt.invert(un)),un<on&&(Xr=on,on=un,un=Xr))),yt&&zt?[[kr,on],[Vr,un]]:yt?[kr,Vr]:zt&&[on,un])},tr.clear=function(){return tr.empty()||(Jt=[0,0],$t=[0,0],ne=Ee=null),tr},tr.empty=function(){return!!yt&&Jt[0]==Jt[1]||!!zt&&$t[0]==$t[1]},i.rebind(tr,ot,"on")};var yi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ji=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function Mo(ot){return JSON.parse(ot.responseText)}function si(ot){var yt=u.createRange();return yt.selectNode(u.body),yt.createContextualFragment(ot.responseText)}i.text=Ar(function(ot){return ot.responseText}),i.json=function(ot,yt){return Br(ot,"application/json",Mo,yt)},i.html=function(ot,yt){return Br(ot,"text/html",si,yt)},i.xml=Ar(function(ot){return ot.responseXML}),void 0!==(g="function"==typeof(A=i)?A.call(W,t,W,q):A)&&(q.exports=g)}).apply(self)},88294:function(q,W,t){"use strict";q.exports=t(62849)},62849:function(q,W,t){"use strict";var A=t(91358),g=t(53435),i=t(18863),P=t(21527),C=t(71299),u=t(46775),y=t(30120),e=t(64941),r=t(90660),l=t(27084);function s(c,f){for(var m=f[0],h=f[1],o=1/(f[2]-m),v=1/(f[3]-h),M=new Array(c.length),b=0,L=c.length/2;b<L;b++)M[2*b]=g((c[2*b]-m)*o,0,1),M[2*b+1]=g((c[2*b+1]-h)*v,0,1);return M}q.exports=function(f,m){m||(m={}),f=y(f,"float64"),m=C(m,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var h=u(m.maxDepth,255),w=u(m.bounds,P(f,2));w[0]===w[2]&&w[2]++,w[1]===w[3]&&w[3]++;var v,p=s(f,w),o=f.length>>>1;m.dtype||(m.dtype="array"),"string"==typeof m.dtype?v=new(r(m.dtype))(o):m.dtype&&(v=m.dtype,Array.isArray(v)&&(v.length=o));for(var M=0;M<o;++M)v[M]=M;var b=[],L=[],x=[],S=[];!function N(z,U,H,J,nt,it){if(!J.length)return null;var ut=b[nt]||(b[nt]=[]),Q=x[nt]||(x[nt]=[]),j=L[nt]||(L[nt]=[]),Z=ut.length;if(++nt>h||it>1073741824){for(var G=0;G<J.length;G++)ut.push(J[G]),Q.push(it),j.push(null,null,null,null);return Z}if(ut.push(J[0]),Q.push(it),J.length<=1)return j.push(null,null,null,null),Z;for(var K=.5*H,at=z+K,$=U+K,X=[],rt=[],et=[],st=[],dt=1,bt=J.length;dt<bt;dt++){var gt=J[dt],It=p[2*gt+1];p[2*gt]<at?It<$?X.push(gt):rt.push(gt):It<$?et.push(gt):st.push(gt)}return j.push(N(z,U,K,X,nt,it<<=2),N(z,$,K,rt,nt,it+1),N(at,U,K,et,nt,it+2),N(at,$,K,st,nt,it+3)),Z}(0,0,1,v,0,1);for(var T=0,n=0;n<b.length;n++){var E=b[n];if(v.set)v.set(E,T);else for(var d=0,F=E.length;d<F;d++)v[d+T]=E[d];var D=T+b[n].length;S[n]=[T,D],T=D}return v.range=function k(){for(var z=[],U=arguments.length;U--;)z[U]=arguments[U];var H;if(e(z[z.length-1])){var J=z.pop();!z.length&&(null!=J.x||null!=J.l||null!=J.left)&&(z=[J],H={}),H=C(J,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else H={};z.length||(z=w);var et,nt=i.apply(void 0,z),it=[Math.min(nt.x,nt.x+nt.width),Math.min(nt.y,nt.y+nt.height),Math.max(nt.x,nt.x+nt.width),Math.max(nt.y,nt.y+nt.height)],ut=it[0],Q=it[1],j=it[2],Z=it[3],G=s([ut,Q,j,Z],w),K=G[0],at=G[1],$=G[2],X=G[3],rt=u(H.level,b.length);if(null!=H.d&&("number"==typeof H.d?et=[H.d,H.d]:H.d.length&&(et=H.d),rt=Math.min(Math.max(Math.ceil(-l(Math.abs(et[0])/(w[2]-w[0]))),Math.ceil(-l(Math.abs(et[1])/(w[3]-w[1])))),rt)),rt=Math.min(rt,b.length),H.lod)return O(K,at,$,X,rt);var st=[];function dt(gt,Lt,It,Mt,xt,At){if(null!==xt&&null!==At&&!(K>gt+It||at>Lt+It||$<gt||X<Lt||Mt>=rt||xt===At)){var Pt=b[Mt];void 0===At&&(At=Pt.length);for(var Vt=xt;Vt<At;Vt++){var te=Pt[Vt],Qt=f[2*te],Bt=f[2*te+1];Qt>=ut&&Qt<=j&&Bt>=Q&&Bt<=Z&&st.push(te)}var Ot=L[Mt],qt=Ot[4*xt+0],ie=Ot[4*xt+1],oe=Ot[4*xt+2],pe=Ot[4*xt+3],de=bt(Ot,xt+1),Fe=.5*It,Kt=Mt+1;dt(gt,Lt,Fe,Kt,qt,ie||oe||pe||de),dt(gt,Lt+Fe,Fe,Kt,ie,oe||pe||de),dt(gt+Fe,Lt,Fe,Kt,oe,pe||de),dt(gt+Fe,Lt+Fe,Fe,Kt,pe,de)}}function bt(gt,Lt){for(var It=null,Mt=0;null===It;)if(It=gt[4*Lt+Mt],++Mt>gt.length)return null;return It}return dt(0,0,1,0,0,1),st},v;function O(z,U,H,J,nt){for(var it=[],ut=0;ut<nt;ut++){var Q=x[ut],j=S[ut][0],Z=B(z,U,ut),G=B(H,J,ut),K=A.ge(Q,Z),at=A.gt(Q,G,K,Q.length-1);it[ut]=[K+j,at+j]}return it}function B(z,U,H){for(var J=1,nt=.5,it=.5,ut=.5,Q=0;Q<H;Q++)J<<=2,J+=z<nt?U<it?0:1:U<it?2:3,ut*=.5,nt+=z<nt?-ut:ut,it+=U<it?-ut:ut;return J}}},30774:function(q,W,t){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var A=t(60302),g=6378137;function C(e){var r=0;if(e&&e.length>0){r+=Math.abs(u(e[0]));for(var l=1;l<e.length;l++)r-=Math.abs(u(e[l]))}return r}function u(e){var r,l,s,c,f,m,h=0,w=e.length;if(w>2){for(m=0;m<w;m++)m===w-2?(s=w-2,c=w-1,f=0):m===w-1?(s=w-1,c=0,f=1):(s=m,c=m+1,f=m+2),r=e[s],l=e[c],h+=(y(e[f][0])-y(r[0]))*Math.sin(y(l[1]));h=h*g*g/2}return h}function y(e){return e*Math.PI/180}W.default=function i(e){return A.geomReduce(e,function(r,l){return r+function P(e){var l,r=0;switch(e.type){case"Polygon":return C(e.coordinates);case"MultiPolygon":for(l=0;l<e.coordinates.length;l++)r+=C(e.coordinates[l]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(l)},0)}},23132:function(q,W){"use strict";function t(T,n,E){void 0===E&&(E={});var d={type:"Feature"};return(0===E.id||E.id)&&(d.id=E.id),E.bbox&&(d.bbox=E.bbox),d.properties=n||{},d.geometry=T,d}function g(T,n,E){if(void 0===E&&(E={}),!T)throw new Error("coordinates is required");if(!Array.isArray(T))throw new Error("coordinates must be an Array");if(T.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!b(T[0])||!b(T[1]))throw new Error("coordinates must contain numbers");return t({type:"Point",coordinates:T},n,E)}function P(T,n,E){void 0===E&&(E={});for(var d=0,F=T;d<F.length;d++){var D=F[d];if(D.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var N=0;N<D[D.length-1].length;N++)if(D[D.length-1][N]!==D[0][N])throw new Error("First and last Position are not equivalent.")}return t({type:"Polygon",coordinates:T},n,E)}function u(T,n,E){if(void 0===E&&(E={}),T.length<2)throw new Error("coordinates must be an array of two or more positions");return t({type:"LineString",coordinates:T},n,E)}function e(T,n){void 0===n&&(n={});var E={type:"FeatureCollection"};return n.id&&(E.id=n.id),n.bbox&&(E.bbox=n.bbox),E.features=T,E}function r(T,n,E){return void 0===E&&(E={}),t({type:"MultiLineString",coordinates:T},n,E)}function l(T,n,E){return void 0===E&&(E={}),t({type:"MultiPoint",coordinates:T},n,E)}function a(T,n,E){return void 0===E&&(E={}),t({type:"MultiPolygon",coordinates:T},n,E)}function f(T,n){void 0===n&&(n="kilometers");var E=W.factors[n];if(!E)throw new Error(n+" units is invalid");return T*E}function m(T,n){void 0===n&&(n="kilometers");var E=W.factors[n];if(!E)throw new Error(n+" units is invalid");return T/E}function p(T){return T%(2*Math.PI)*180/Math.PI}function b(T){return!isNaN(T)&&null!==T&&!Array.isArray(T)}Object.defineProperty(W,"__esModule",{value:!0}),W.earthRadius=6371008.8,W.factors={centimeters:100*W.earthRadius,centimetres:100*W.earthRadius,degrees:W.earthRadius/111325,feet:3.28084*W.earthRadius,inches:39.37*W.earthRadius,kilometers:W.earthRadius/1e3,kilometres:W.earthRadius/1e3,meters:W.earthRadius,metres:W.earthRadius,miles:W.earthRadius/1609.344,millimeters:1e3*W.earthRadius,millimetres:1e3*W.earthRadius,nauticalmiles:W.earthRadius/1852,radians:1,yards:1.0936*W.earthRadius},W.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/W.earthRadius,yards:1.0936133},W.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},W.feature=t,W.geometry=function A(T,n,E){switch(void 0===E&&(E={}),T){case"Point":return g(n).geometry;case"LineString":return u(n).geometry;case"Polygon":return P(n).geometry;case"MultiPoint":return l(n).geometry;case"MultiLineString":return r(n).geometry;case"MultiPolygon":return a(n).geometry;default:throw new Error(T+" is invalid")}},W.point=g,W.points=function i(T,n,E){return void 0===E&&(E={}),e(T.map(function(d){return g(d,n)}),E)},W.polygon=P,W.polygons=function C(T,n,E){return void 0===E&&(E={}),e(T.map(function(d){return P(d,n)}),E)},W.lineString=u,W.lineStrings=function y(T,n,E){return void 0===E&&(E={}),e(T.map(function(d){return u(d,n)}),E)},W.featureCollection=e,W.multiLineString=r,W.multiPoint=l,W.multiPolygon=a,W.geometryCollection=function s(T,n,E){return void 0===E&&(E={}),t({type:"GeometryCollection",geometries:T},n,E)},W.round=function c(T,n){if(void 0===n&&(n=0),n&&!(n>=0))throw new Error("precision must be a positive number");var E=Math.pow(10,n||0);return Math.round(T*E)/E},W.radiansToLength=f,W.lengthToRadians=m,W.lengthToDegrees=function h(T,n){return p(m(T,n))},W.bearingToAzimuth=function w(T){var n=T%360;return n<0&&(n+=360),n},W.radiansToDegrees=p,W.degreesToRadians=function o(T){return T%360*Math.PI/180},W.convertLength=function v(T,n,E){if(void 0===n&&(n="kilometers"),void 0===E&&(E="kilometers"),!(T>=0))throw new Error("length must be a positive number");return f(m(T,n),E)},W.convertArea=function M(T,n,E){if(void 0===n&&(n="meters"),void 0===E&&(E="kilometers"),!(T>=0))throw new Error("area must be a positive number");var d=W.areaFactors[n];if(!d)throw new Error("invalid original units");var F=W.areaFactors[E];if(!F)throw new Error("invalid final units");return T/d*F},W.isNumber=b,W.isObject=function L(T){return!!T&&T.constructor===Object},W.validateBBox=function x(T){if(!T)throw new Error("bbox is required");if(!Array.isArray(T))throw new Error("bbox must be an Array");if(4!==T.length&&6!==T.length)throw new Error("bbox must be an Array of 4 or 6 numbers");T.forEach(function(n){if(!b(n))throw new Error("bbox must only contain numbers")})},W.validateId=function S(T){if(!T)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof T))throw new Error("id must be a number or a string")}},60302:function(q,W,t){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var A=t(23132);function g(o,v,M){if(null!==o)for(var b,L,x,S,T,n,E,D,d=0,F=0,N=o.type,k="FeatureCollection"===N,O="Feature"===N,B=k?o.features.length:1,z=0;z<B;z++){T=(D=!!(E=k?o.features[z].geometry:O?o.geometry:o)&&"GeometryCollection"===E.type)?E.geometries.length:1;for(var U=0;U<T;U++){var H=0,J=0;if(null!==(S=D?E.geometries[U]:E)){n=S.coordinates;var nt=S.type;switch(d=!M||"Polygon"!==nt&&"MultiPolygon"!==nt?0:1,nt){case null:break;case"Point":if(!1===v(n,F,z,H,J))return!1;F++,H++;break;case"LineString":case"MultiPoint":for(b=0;b<n.length;b++){if(!1===v(n[b],F,z,H,J))return!1;F++,"MultiPoint"===nt&&H++}"LineString"===nt&&H++;break;case"Polygon":case"MultiLineString":for(b=0;b<n.length;b++){for(L=0;L<n[b].length-d;L++){if(!1===v(n[b][L],F,z,H,J))return!1;F++}"MultiLineString"===nt&&H++,"Polygon"===nt&&J++}"Polygon"===nt&&H++;break;case"MultiPolygon":for(b=0;b<n.length;b++){for(J=0,L=0;L<n[b].length;L++){for(x=0;x<n[b][L].length-d;x++){if(!1===v(n[b][L][x],F,z,H,J))return!1;F++}J++}H++}break;case"GeometryCollection":for(b=0;b<S.geometries.length;b++)if(!1===g(S.geometries[b],v,M))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function P(o,v){var M;switch(o.type){case"FeatureCollection":for(M=0;M<o.features.length&&!1!==v(o.features[M].properties,M);M++);break;case"Feature":v(o.properties,0)}}function u(o,v){if("Feature"===o.type)v(o,0);else if("FeatureCollection"===o.type)for(var M=0;M<o.features.length&&!1!==v(o.features[M],M);M++);}function r(o,v){var M,b,L,x,S,T,n,E,d,F,D=0,N="FeatureCollection"===o.type,k="Feature"===o.type,O=N?o.features.length:1;for(M=0;M<O;M++){for(E=N?o.features[M].properties:k?o.properties:{},d=N?o.features[M].bbox:k?o.bbox:void 0,F=N?o.features[M].id:k?o.id:void 0,S=(n=!!(T=N?o.features[M].geometry:k?o.geometry:o)&&"GeometryCollection"===T.type)?T.geometries.length:1,L=0;L<S;L++)if(null!==(x=n?T.geometries[L]:T))switch(x.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===v(x,D,E,d,F))return!1;break;case"GeometryCollection":for(b=0;b<x.geometries.length;b++)if(!1===v(x.geometries[b],D,E,d,F))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===v(null,D,E,d,F))return!1;D++}}function a(o,v){r(o,function(M,b,L,x,S){var n,T=null===M?null:M.type;switch(T){case null:case"Point":case"LineString":case"Polygon":return!1!==v(A.feature(M,L,{bbox:x,id:S}),b,0)&&void 0}switch(T){case"MultiPoint":n="Point";break;case"MultiLineString":n="LineString";break;case"MultiPolygon":n="Polygon"}for(var E=0;E<M.coordinates.length;E++)if(!1===v(A.feature({type:n,coordinates:M.coordinates[E]},L),b,E))return!1})}function c(o,v){a(o,function(M,b,L){var x=0;if(M.geometry){var S=M.geometry.type;if("Point"!==S&&"MultiPoint"!==S){var T,n=0,E=0,d=0;if(!1===g(M,function(F,D,N,k,O){if(void 0===T||b>n||k>E||O>d)return T=F,n=b,E=k,d=O,void(x=0);var B=A.lineString([T,F],M.properties);if(!1===v(B,b,L,O,x))return!1;x++,T=F}))return!1}}})}function m(o,v){if(!o)throw new Error("geojson is required");a(o,function(M,b,L){if(null!==M.geometry){var S=M.geometry.coordinates;switch(M.geometry.type){case"LineString":if(!1===v(M,b,L,0,0))return!1;break;case"Polygon":for(var T=0;T<S.length;T++)if(!1===v(A.lineString(S[T],M.properties),b,L,T))return!1}}})}W.coordEach=g,W.coordReduce=function i(o,v,M,b){var L=M;return g(o,function(x,S,T,n,E){L=0===S&&void 0===M?x:v(L,x,S,T,n,E)},b),L},W.propEach=P,W.propReduce=function C(o,v,M){var b=M;return P(o,function(L,x){b=0===x&&void 0===M?L:v(b,L,x)}),b},W.featureEach=u,W.featureReduce=function y(o,v,M){var b=M;return u(o,function(L,x){b=0===x&&void 0===M?L:v(b,L,x)}),b},W.coordAll=function e(o){var v=[];return g(o,function(M){v.push(M)}),v},W.geomEach=r,W.geomReduce=function l(o,v,M){var b=M;return r(o,function(L,x,S,T,n){b=0===x&&void 0===M?L:v(b,L,x,S,T,n)}),b},W.flattenEach=a,W.flattenReduce=function s(o,v,M){var b=M;return a(o,function(L,x,S){b=0===x&&0===S&&void 0===M?L:v(b,L,x,S)}),b},W.segmentEach=c,W.segmentReduce=function f(o,v,M){var b=M,L=!1;return c(o,function(x,S,T,n,E){b=!1===L&&void 0===M?x:v(b,x,S,T,n,E),L=!0}),b},W.lineEach=m,W.lineReduce=function h(o,v,M){var b=M;return m(o,function(L,x,S,T){b=0===x&&void 0===M?L:v(b,L,x,S,T)}),b},W.findSegment=function w(o,v){if(!A.isObject(v=v||{}))throw new Error("options is invalid");var T,M=v.featureIndex||0,b=v.multiFeatureIndex||0,L=v.geometryIndex||0,x=v.segmentIndex||0,S=v.properties;switch(o.type){case"FeatureCollection":M<0&&(M=o.features.length+M),S=S||o.features[M].properties,T=o.features[M].geometry;break;case"Feature":S=S||o.properties,T=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":T=o;break;default:throw new Error("geojson is invalid")}if(null===T)return null;var n=T.coordinates;switch(T.type){case"Point":case"MultiPoint":return null;case"LineString":return x<0&&(x=n.length+x-1),A.lineString([n[x],n[x+1]],S,v);case"Polygon":return L<0&&(L=n.length+L),x<0&&(x=n[L].length+x-1),A.lineString([n[L][x],n[L][x+1]],S,v);case"MultiLineString":return b<0&&(b=n.length+b),x<0&&(x=n[b].length+x-1),A.lineString([n[b][x],n[b][x+1]],S,v);case"MultiPolygon":return b<0&&(b=n.length+b),L<0&&(L=n[b].length+L),x<0&&(x=n[b][L].length-x-1),A.lineString([n[b][L][x],n[b][L][x+1]],S,v)}throw new Error("geojson is invalid")},W.findPoint=function p(o,v){if(!A.isObject(v=v||{}))throw new Error("options is invalid");var T,M=v.featureIndex||0,b=v.multiFeatureIndex||0,L=v.geometryIndex||0,x=v.coordIndex||0,S=v.properties;switch(o.type){case"FeatureCollection":M<0&&(M=o.features.length+M),S=S||o.features[M].properties,T=o.features[M].geometry;break;case"Feature":S=S||o.properties,T=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":T=o;break;default:throw new Error("geojson is invalid")}if(null===T)return null;var n=T.coordinates;switch(T.type){case"Point":return A.point(n,S,v);case"MultiPoint":return b<0&&(b=n.length+b),A.point(n[b],S,v);case"LineString":return x<0&&(x=n.length+x),A.point(n[x],S,v);case"Polygon":return L<0&&(L=n.length+L),x<0&&(x=n[L].length+x),A.point(n[L][x],S,v);case"MultiLineString":return b<0&&(b=n.length+b),x<0&&(x=n[b].length+x),A.point(n[b][x],S,v);case"MultiPolygon":return b<0&&(b=n.length+b),L<0&&(L=n[b].length+L),x<0&&(x=n[b][L].length-x),A.point(n[b][L][x],S,v)}throw new Error("geojson is invalid")}},85268:function(q,W,t){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var A=t(27138);function g(i){var P=[1/0,1/0,-1/0,-1/0];return A.coordEach(i,function(C){P[0]>C[0]&&(P[0]=C[0]),P[1]>C[1]&&(P[1]=C[1]),P[2]<C[0]&&(P[2]=C[0]),P[3]<C[1]&&(P[3]=C[1])}),P}g.default=g,W.default=g},94228:function(q,W){"use strict";function t(T,n,E){void 0===E&&(E={});var d={type:"Feature"};return(0===E.id||E.id)&&(d.id=E.id),E.bbox&&(d.bbox=E.bbox),d.properties=n||{},d.geometry=T,d}function g(T,n,E){if(void 0===E&&(E={}),!T)throw new Error("coordinates is required");if(!Array.isArray(T))throw new Error("coordinates must be an Array");if(T.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!b(T[0])||!b(T[1]))throw new Error("coordinates must contain numbers");return t({type:"Point",coordinates:T},n,E)}function P(T,n,E){void 0===E&&(E={});for(var d=0,F=T;d<F.length;d++){var D=F[d];if(D.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var N=0;N<D[D.length-1].length;N++)if(D[D.length-1][N]!==D[0][N])throw new Error("First and last Position are not equivalent.")}return t({type:"Polygon",coordinates:T},n,E)}function u(T,n,E){if(void 0===E&&(E={}),T.length<2)throw new Error("coordinates must be an array of two or more positions");return t({type:"LineString",coordinates:T},n,E)}function e(T,n){void 0===n&&(n={});var E={type:"FeatureCollection"};return n.id&&(E.id=n.id),n.bbox&&(E.bbox=n.bbox),E.features=T,E}function r(T,n,E){return void 0===E&&(E={}),t({type:"MultiLineString",coordinates:T},n,E)}function l(T,n,E){return void 0===E&&(E={}),t({type:"MultiPoint",coordinates:T},n,E)}function a(T,n,E){return void 0===E&&(E={}),t({type:"MultiPolygon",coordinates:T},n,E)}function f(T,n){void 0===n&&(n="kilometers");var E=W.factors[n];if(!E)throw new Error(n+" units is invalid");return T*E}function m(T,n){void 0===n&&(n="kilometers");var E=W.factors[n];if(!E)throw new Error(n+" units is invalid");return T/E}function p(T){return T%(2*Math.PI)*180/Math.PI}function b(T){return!isNaN(T)&&null!==T&&!Array.isArray(T)}Object.defineProperty(W,"__esModule",{value:!0}),W.earthRadius=6371008.8,W.factors={centimeters:100*W.earthRadius,centimetres:100*W.earthRadius,degrees:W.earthRadius/111325,feet:3.28084*W.earthRadius,inches:39.37*W.earthRadius,kilometers:W.earthRadius/1e3,kilometres:W.earthRadius/1e3,meters:W.earthRadius,metres:W.earthRadius,miles:W.earthRadius/1609.344,millimeters:1e3*W.earthRadius,millimetres:1e3*W.earthRadius,nauticalmiles:W.earthRadius/1852,radians:1,yards:1.0936*W.earthRadius},W.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/W.earthRadius,yards:1.0936133},W.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},W.feature=t,W.geometry=function A(T,n,E){switch(void 0===E&&(E={}),T){case"Point":return g(n).geometry;case"LineString":return u(n).geometry;case"Polygon":return P(n).geometry;case"MultiPoint":return l(n).geometry;case"MultiLineString":return r(n).geometry;case"MultiPolygon":return a(n).geometry;default:throw new Error(T+" is invalid")}},W.point=g,W.points=function i(T,n,E){return void 0===E&&(E={}),e(T.map(function(d){return g(d,n)}),E)},W.polygon=P,W.polygons=function C(T,n,E){return void 0===E&&(E={}),e(T.map(function(d){return P(d,n)}),E)},W.lineString=u,W.lineStrings=function y(T,n,E){return void 0===E&&(E={}),e(T.map(function(d){return u(d,n)}),E)},W.featureCollection=e,W.multiLineString=r,W.multiPoint=l,W.multiPolygon=a,W.geometryCollection=function s(T,n,E){return void 0===E&&(E={}),t({type:"GeometryCollection",geometries:T},n,E)},W.round=function c(T,n){if(void 0===n&&(n=0),n&&!(n>=0))throw new Error("precision must be a positive number");var E=Math.pow(10,n||0);return Math.round(T*E)/E},W.radiansToLength=f,W.lengthToRadians=m,W.lengthToDegrees=function h(T,n){return p(m(T,n))},W.bearingToAzimuth=function w(T){var n=T%360;return n<0&&(n+=360),n},W.radiansToDegrees=p,W.degreesToRadians=function o(T){return T%360*Math.PI/180},W.convertLength=function v(T,n,E){if(void 0===n&&(n="kilometers"),void 0===E&&(E="kilometers"),!(T>=0))throw new Error("length must be a positive number");return f(m(T,n),E)},W.convertArea=function M(T,n,E){if(void 0===n&&(n="meters"),void 0===E&&(E="kilometers"),!(T>=0))throw new Error("area must be a positive number");var d=W.areaFactors[n];if(!d)throw new Error("invalid original units");var F=W.areaFactors[E];if(!F)throw new Error("invalid final units");return T/d*F},W.isNumber=b,W.isObject=function L(T){return!!T&&T.constructor===Object},W.validateBBox=function x(T){if(!T)throw new Error("bbox is required");if(!Array.isArray(T))throw new Error("bbox must be an Array");if(4!==T.length&&6!==T.length)throw new Error("bbox must be an Array of 4 or 6 numbers");T.forEach(function(n){if(!b(n))throw new Error("bbox must only contain numbers")})},W.validateId=function S(T){if(!T)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof T))throw new Error("id must be a number or a string")}},27138:function(q,W,t){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var A=t(94228);function g(o,v,M){if(null!==o)for(var b,L,x,S,T,n,E,D,d=0,F=0,N=o.type,k="FeatureCollection"===N,O="Feature"===N,B=k?o.features.length:1,z=0;z<B;z++){T=(D=!!(E=k?o.features[z].geometry:O?o.geometry:o)&&"GeometryCollection"===E.type)?E.geometries.length:1;for(var U=0;U<T;U++){var H=0,J=0;if(null!==(S=D?E.geometries[U]:E)){n=S.coordinates;var nt=S.type;switch(d=!M||"Polygon"!==nt&&"MultiPolygon"!==nt?0:1,nt){case null:break;case"Point":if(!1===v(n,F,z,H,J))return!1;F++,H++;break;case"LineString":case"MultiPoint":for(b=0;b<n.length;b++){if(!1===v(n[b],F,z,H,J))return!1;F++,"MultiPoint"===nt&&H++}"LineString"===nt&&H++;break;case"Polygon":case"MultiLineString":for(b=0;b<n.length;b++){for(L=0;L<n[b].length-d;L++){if(!1===v(n[b][L],F,z,H,J))return!1;F++}"MultiLineString"===nt&&H++,"Polygon"===nt&&J++}"Polygon"===nt&&H++;break;case"MultiPolygon":for(b=0;b<n.length;b++){for(J=0,L=0;L<n[b].length;L++){for(x=0;x<n[b][L].length-d;x++){if(!1===v(n[b][L][x],F,z,H,J))return!1;F++}J++}H++}break;case"GeometryCollection":for(b=0;b<S.geometries.length;b++)if(!1===g(S.geometries[b],v,M))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function P(o,v){var M;switch(o.type){case"FeatureCollection":for(M=0;M<o.features.length&&!1!==v(o.features[M].properties,M);M++);break;case"Feature":v(o.properties,0)}}function u(o,v){if("Feature"===o.type)v(o,0);else if("FeatureCollection"===o.type)for(var M=0;M<o.features.length&&!1!==v(o.features[M],M);M++);}function r(o,v){var M,b,L,x,S,T,n,E,d,F,D=0,N="FeatureCollection"===o.type,k="Feature"===o.type,O=N?o.features.length:1;for(M=0;M<O;M++){for(E=N?o.features[M].properties:k?o.properties:{},d=N?o.features[M].bbox:k?o.bbox:void 0,F=N?o.features[M].id:k?o.id:void 0,S=(n=!!(T=N?o.features[M].geometry:k?o.geometry:o)&&"GeometryCollection"===T.type)?T.geometries.length:1,L=0;L<S;L++)if(null!==(x=n?T.geometries[L]:T))switch(x.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===v(x,D,E,d,F))return!1;break;case"GeometryCollection":for(b=0;b<x.geometries.length;b++)if(!1===v(x.geometries[b],D,E,d,F))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===v(null,D,E,d,F))return!1;D++}}function a(o,v){r(o,function(M,b,L,x,S){var n,T=null===M?null:M.type;switch(T){case null:case"Point":case"LineString":case"Polygon":return!1!==v(A.feature(M,L,{bbox:x,id:S}),b,0)&&void 0}switch(T){case"MultiPoint":n="Point";break;case"MultiLineString":n="LineString";break;case"MultiPolygon":n="Polygon"}for(var E=0;E<M.coordinates.length;E++)if(!1===v(A.feature({type:n,coordinates:M.coordinates[E]},L),b,E))return!1})}function c(o,v){a(o,function(M,b,L){var x=0;if(M.geometry){var S=M.geometry.type;if("Point"!==S&&"MultiPoint"!==S){var T,n=0,E=0,d=0;if(!1===g(M,function(F,D,N,k,O){if(void 0===T||b>n||k>E||O>d)return T=F,n=b,E=k,d=O,void(x=0);var B=A.lineString([T,F],M.properties);if(!1===v(B,b,L,O,x))return!1;x++,T=F}))return!1}}})}function m(o,v){if(!o)throw new Error("geojson is required");a(o,function(M,b,L){if(null!==M.geometry){var S=M.geometry.coordinates;switch(M.geometry.type){case"LineString":if(!1===v(M,b,L,0,0))return!1;break;case"Polygon":for(var T=0;T<S.length;T++)if(!1===v(A.lineString(S[T],M.properties),b,L,T))return!1}}})}W.coordEach=g,W.coordReduce=function i(o,v,M,b){var L=M;return g(o,function(x,S,T,n,E){L=0===S&&void 0===M?x:v(L,x,S,T,n,E)},b),L},W.propEach=P,W.propReduce=function C(o,v,M){var b=M;return P(o,function(L,x){b=0===x&&void 0===M?L:v(b,L,x)}),b},W.featureEach=u,W.featureReduce=function y(o,v,M){var b=M;return u(o,function(L,x){b=0===x&&void 0===M?L:v(b,L,x)}),b},W.coordAll=function e(o){var v=[];return g(o,function(M){v.push(M)}),v},W.geomEach=r,W.geomReduce=function l(o,v,M){var b=M;return r(o,function(L,x,S,T,n){b=0===x&&void 0===M?L:v(b,L,x,S,T,n)}),b},W.flattenEach=a,W.flattenReduce=function s(o,v,M){var b=M;return a(o,function(L,x,S){b=0===x&&0===S&&void 0===M?L:v(b,L,x,S)}),b},W.segmentEach=c,W.segmentReduce=function f(o,v,M){var b=M,L=!1;return c(o,function(x,S,T,n,E){b=!1===L&&void 0===M?x:v(b,x,S,T,n,E),L=!0}),b},W.lineEach=m,W.lineReduce=function h(o,v,M){var b=M;return m(o,function(L,x,S,T){b=0===x&&void 0===M?L:v(b,L,x,S,T)}),b},W.findSegment=function w(o,v){if(!A.isObject(v=v||{}))throw new Error("options is invalid");var T,M=v.featureIndex||0,b=v.multiFeatureIndex||0,L=v.geometryIndex||0,x=v.segmentIndex||0,S=v.properties;switch(o.type){case"FeatureCollection":M<0&&(M=o.features.length+M),S=S||o.features[M].properties,T=o.features[M].geometry;break;case"Feature":S=S||o.properties,T=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":T=o;break;default:throw new Error("geojson is invalid")}if(null===T)return null;var n=T.coordinates;switch(T.type){case"Point":case"MultiPoint":return null;case"LineString":return x<0&&(x=n.length+x-1),A.lineString([n[x],n[x+1]],S,v);case"Polygon":return L<0&&(L=n.length+L),x<0&&(x=n[L].length+x-1),A.lineString([n[L][x],n[L][x+1]],S,v);case"MultiLineString":return b<0&&(b=n.length+b),x<0&&(x=n[b].length+x-1),A.lineString([n[b][x],n[b][x+1]],S,v);case"MultiPolygon":return b<0&&(b=n.length+b),L<0&&(L=n[b].length+L),x<0&&(x=n[b][L].length-x-1),A.lineString([n[b][L][x],n[b][L][x+1]],S,v)}throw new Error("geojson is invalid")},W.findPoint=function p(o,v){if(!A.isObject(v=v||{}))throw new Error("options is invalid");var T,M=v.featureIndex||0,b=v.multiFeatureIndex||0,L=v.geometryIndex||0,x=v.coordIndex||0,S=v.properties;switch(o.type){case"FeatureCollection":M<0&&(M=o.features.length+M),S=S||o.features[M].properties,T=o.features[M].geometry;break;case"Feature":S=S||o.properties,T=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":T=o;break;default:throw new Error("geojson is invalid")}if(null===T)return null;var n=T.coordinates;switch(T.type){case"Point":return A.point(n,S,v);case"MultiPoint":return b<0&&(b=n.length+b),A.point(n[b],S,v);case"LineString":return x<0&&(x=n.length+x),A.point(n[x],S,v);case"Polygon":return L<0&&(L=n.length+L),x<0&&(x=n[L].length+x),A.point(n[L][x],S,v);case"MultiLineString":return b<0&&(b=n.length+b),x<0&&(x=n[b].length+x),A.point(n[b][x],S,v);case"MultiPolygon":return b<0&&(b=n.length+b),L<0&&(L=n[b].length+L),x<0&&(x=n[b][L].length-x),A.point(n[b][L][x],S,v)}throw new Error("geojson is invalid")}},29261:function(q,W,t){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var A=t(88553),g=t(64182);W.default=function i(P,C){void 0===C&&(C={});var u=0,y=0,e=0;return A.coordEach(P,function(r){u+=r[0],y+=r[1],e++}),g.point([u/e,y/e],C.properties)}},64182:function(q,W){"use strict";function t(k,O,B){void 0===B&&(B={});var z={type:"Feature"};return(0===B.id||B.id)&&(z.id=B.id),B.bbox&&(z.bbox=B.bbox),z.properties=O||{},z.geometry=k,z}function g(k,O,B){return void 0===B&&(B={}),t({type:"Point",coordinates:k},O,B)}function P(k,O,B){void 0===B&&(B={});for(var z=0,U=k;z<U.length;z++){var H=U[z];if(H.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var J=0;J<H[H.length-1].length;J++)if(H[H.length-1][J]!==H[0][J])throw new Error("First and last Position are not equivalent.")}return t({type:"Polygon",coordinates:k},O,B)}function u(k,O,B){if(void 0===B&&(B={}),k.length<2)throw new Error("coordinates must be an array of two or more positions");return t({type:"LineString",coordinates:k},O,B)}function e(k,O){void 0===O&&(O={});var B={type:"FeatureCollection"};return O.id&&(B.id=O.id),O.bbox&&(B.bbox=O.bbox),B.features=k,B}function r(k,O,B){return void 0===B&&(B={}),t({type:"MultiLineString",coordinates:k},O,B)}function l(k,O,B){return void 0===B&&(B={}),t({type:"MultiPoint",coordinates:k},O,B)}function a(k,O,B){return void 0===B&&(B={}),t({type:"MultiPolygon",coordinates:k},O,B)}function f(k,O){void 0===O&&(O="kilometers");var B=W.factors[O];if(!B)throw new Error(O+" units is invalid");return k*B}function m(k,O){void 0===O&&(O="kilometers");var B=W.factors[O];if(!B)throw new Error(O+" units is invalid");return k/B}function p(k){return k%(2*Math.PI)*180/Math.PI}function b(k){return!isNaN(k)&&null!==k&&!Array.isArray(k)&&!/^\s*$/.test(k)}Object.defineProperty(W,"__esModule",{value:!0}),W.earthRadius=6371008.8,W.factors={centimeters:100*W.earthRadius,centimetres:100*W.earthRadius,degrees:W.earthRadius/111325,feet:3.28084*W.earthRadius,inches:39.37*W.earthRadius,kilometers:W.earthRadius/1e3,kilometres:W.earthRadius/1e3,meters:W.earthRadius,metres:W.earthRadius,miles:W.earthRadius/1609.344,millimeters:1e3*W.earthRadius,millimetres:1e3*W.earthRadius,nauticalmiles:W.earthRadius/1852,radians:1,yards:W.earthRadius/1.0936},W.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/W.earthRadius,yards:.91441111923921},W.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},W.feature=t,W.geometry=function A(k,O,B){switch(void 0===B&&(B={}),k){case"Point":return g(O).geometry;case"LineString":return u(O).geometry;case"Polygon":return P(O).geometry;case"MultiPoint":return l(O).geometry;case"MultiLineString":return r(O).geometry;case"MultiPolygon":return a(O).geometry;default:throw new Error(k+" is invalid")}},W.point=g,W.points=function i(k,O,B){return void 0===B&&(B={}),e(k.map(function(z){return g(z,O)}),B)},W.polygon=P,W.polygons=function C(k,O,B){return void 0===B&&(B={}),e(k.map(function(z){return P(z,O)}),B)},W.lineString=u,W.lineStrings=function y(k,O,B){return void 0===B&&(B={}),e(k.map(function(z){return u(z,O)}),B)},W.featureCollection=e,W.multiLineString=r,W.multiPoint=l,W.multiPolygon=a,W.geometryCollection=function s(k,O,B){return void 0===B&&(B={}),t({type:"GeometryCollection",geometries:k},O,B)},W.round=function c(k,O){if(void 0===O&&(O=0),O&&!(O>=0))throw new Error("precision must be a positive number");var B=Math.pow(10,O||0);return Math.round(k*B)/B},W.radiansToLength=f,W.lengthToRadians=m,W.lengthToDegrees=function h(k,O){return p(m(k,O))},W.bearingToAzimuth=function w(k){var O=k%360;return O<0&&(O+=360),O},W.radiansToDegrees=p,W.degreesToRadians=function o(k){return k%360*Math.PI/180},W.convertLength=function v(k,O,B){if(void 0===O&&(O="kilometers"),void 0===B&&(B="kilometers"),!(k>=0))throw new Error("length must be a positive number");return f(m(k,O),B)},W.convertArea=function M(k,O,B){if(void 0===O&&(O="meters"),void 0===B&&(B="kilometers"),!(k>=0))throw new Error("area must be a positive number");var z=W.areaFactors[O];if(!z)throw new Error("invalid original units");var U=W.areaFactors[B];if(!U)throw new Error("invalid final units");return k/z*U},W.isNumber=b,W.isObject=function L(k){return!!k&&k.constructor===Object},W.validateBBox=function x(k){if(!k)throw new Error("bbox is required");if(!Array.isArray(k))throw new Error("bbox must be an Array");if(4!==k.length&&6!==k.length)throw new Error("bbox must be an Array of 4 or 6 numbers");k.forEach(function(O){if(!b(O))throw new Error("bbox must only contain numbers")})},W.validateId=function S(k){if(!k)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof k))throw new Error("id must be a number or a string")},W.radians2degrees=function T(){throw new Error("method has been renamed to `radiansToDegrees`")},W.degrees2radians=function n(){throw new Error("method has been renamed to `degreesToRadians`")},W.distanceToDegrees=function E(){throw new Error("method has been renamed to `lengthToDegrees`")},W.distanceToRadians=function d(){throw new Error("method has been renamed to `lengthToRadians`")},W.radiansToDistance=function F(){throw new Error("method has been renamed to `radiansToLength`")},W.bearingToAngle=function D(){throw new Error("method has been renamed to `bearingToAzimuth`")},W.convertDistance=function N(){throw new Error("method has been renamed to `convertLength`")}},88553:function(q,W,t){"use strict";Object.defineProperty(W,"__esModule",{value:!0});var A=t(64182);function g(o,v,M){if(null!==o)for(var b,L,x,S,T,n,E,D,d=0,F=0,N=o.type,k="FeatureCollection"===N,O="Feature"===N,B=k?o.features.length:1,z=0;z<B;z++){T=(D=!!(E=k?o.features[z].geometry:O?o.geometry:o)&&"GeometryCollection"===E.type)?E.geometries.length:1;for(var U=0;U<T;U++){var H=0,J=0;if(null!==(S=D?E.geometries[U]:E)){n=S.coordinates;var nt=S.type;switch(d=!M||"Polygon"!==nt&&"MultiPolygon"!==nt?0:1,nt){case null:break;case"Point":if(!1===v(n,F,z,H,J))return!1;F++,H++;break;case"LineString":case"MultiPoint":for(b=0;b<n.length;b++){if(!1===v(n[b],F,z,H,J))return!1;F++,"MultiPoint"===nt&&H++}"LineString"===nt&&H++;break;case"Polygon":case"MultiLineString":for(b=0;b<n.length;b++){for(L=0;L<n[b].length-d;L++){if(!1===v(n[b][L],F,z,H,J))return!1;F++}"MultiLineString"===nt&&H++,"Polygon"===nt&&J++}"Polygon"===nt&&H++;break;case"MultiPolygon":for(b=0;b<n.length;b++){for(J=0,L=0;L<n[b].length;L++){for(x=0;x<n[b][L].length-d;x++){if(!1===v(n[b][L][x],F,z,H,J))return!1;F++}J++}H++}break;case"GeometryCollection":for(b=0;b<S.geometries.length;b++)if(!1===g(S.geometries[b],v,M))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function P(o,v){var M;switch(o.type){case"FeatureCollection":for(M=0;M<o.features.length&&!1!==v(o.features[M].properties,M);M++);break;case"Feature":v(o.properties,0)}}function u(o,v){if("Feature"===o.type)v(o,0);else if("FeatureCollection"===o.type)for(var M=0;M<o.features.length&&!1!==v(o.features[M],M);M++);}function r(o,v){var M,b,L,x,S,T,n,E,d,F,D=0,N="FeatureCollection"===o.type,k="Feature"===o.type,O=N?o.features.length:1;for(M=0;M<O;M++){for(E=N?o.features[M].properties:k?o.properties:{},d=N?o.features[M].bbox:k?o.bbox:void 0,F=N?o.features[M].id:k?o.id:void 0,S=(n=!!(T=N?o.features[M].geometry:k?o.geometry:o)&&"GeometryCollection"===T.type)?T.geometries.length:1,L=0;L<S;L++)if(null!==(x=n?T.geometries[L]:T))switch(x.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===v(x,D,E,d,F))return!1;break;case"GeometryCollection":for(b=0;b<x.geometries.length;b++)if(!1===v(x.geometries[b],D,E,d,F))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===v(null,D,E,d,F))return!1;D++}}function a(o,v){r(o,function(M,b,L,x,S){var n,T=null===M?null:M.type;switch(T){case null:case"Point":case"LineString":case"Polygon":return!1!==v(A.feature(M,L,{bbox:x,id:S}),b,0)&&void 0}switch(T){case"MultiPoint":n="Point";break;case"MultiLineString":n="LineString";break;case"MultiPolygon":n="Polygon"}for(var E=0;E<M.coordinates.length;E++)if(!1===v(A.feature({type:n,coordinates:M.coordinates[E]},L),b,E))return!1})}function c(o,v){a(o,function(M,b,L){var x=0;if(M.geometry){var S=M.geometry.type;if("Point"!==S&&"MultiPoint"!==S){var T,n=0,E=0,d=0;if(!1===g(M,function(F,D,N,k,O){if(void 0===T||b>n||k>E||O>d)return T=F,n=b,E=k,d=O,void(x=0);var B=A.lineString([T,F],M.properties);if(!1===v(B,b,L,O,x))return!1;x++,T=F}))return!1}}})}function m(o,v){if(!o)throw new Error("geojson is required");a(o,function(M,b,L){if(null!==M.geometry){var S=M.geometry.coordinates;switch(M.geometry.type){case"LineString":if(!1===v(M,b,L,0,0))return!1;break;case"Polygon":for(var T=0;T<S.length;T++)if(!1===v(A.lineString(S[T],M.properties),b,L,T))return!1}}})}W.coordEach=g,W.coordReduce=function i(o,v,M,b){var L=M;return g(o,function(x,S,T,n,E){L=0===S&&void 0===M?x:v(L,x,S,T,n,E)},b),L},W.propEach=P,W.propReduce=function C(o,v,M){var b=M;return P(o,function(L,x){b=0===x&&void 0===M?L:v(b,L,x)}),b},W.featureEach=u,W.featureReduce=function y(o,v,M){var b=M;return u(o,function(L,x){b=0===x&&void 0===M?L:v(b,L,x)}),b},W.coordAll=function e(o){var v=[];return g(o,function(M){v.push(M)}),v},W.geomEach=r,W.geomReduce=function l(o,v,M){var b=M;return r(o,function(L,x,S,T,n){b=0===x&&void 0===M?L:v(b,L,x,S,T,n)}),b},W.flattenEach=a,W.flattenReduce=function s(o,v,M){var b=M;return a(o,function(L,x,S){b=0===x&&0===S&&void 0===M?L:v(b,L,x,S)}),b},W.segmentEach=c,W.segmentReduce=function f(o,v,M){var b=M,L=!1;return c(o,function(x,S,T,n,E){b=!1===L&&void 0===M?x:v(b,x,S,T,n,E),L=!0}),b},W.lineEach=m,W.lineReduce=function h(o,v,M){var b=M;return m(o,function(L,x,S,T){b=0===x&&void 0===M?L:v(b,L,x,S,T)}),b},W.findSegment=function w(o,v){if(!A.isObject(v=v||{}))throw new Error("options is invalid");var T,M=v.featureIndex||0,b=v.multiFeatureIndex||0,L=v.geometryIndex||0,x=v.segmentIndex||0,S=v.properties;switch(o.type){case"FeatureCollection":M<0&&(M=o.features.length+M),S=S||o.features[M].properties,T=o.features[M].geometry;break;case"Feature":S=S||o.properties,T=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":T=o;break;default:throw new Error("geojson is invalid")}if(null===T)return null;var n=T.coordinates;switch(T.type){case"Point":case"MultiPoint":return null;case"LineString":return x<0&&(x=n.length+x-1),A.lineString([n[x],n[x+1]],S,v);case"Polygon":return L<0&&(L=n.length+L),x<0&&(x=n[L].length+x-1),A.lineString([n[L][x],n[L][x+1]],S,v);case"MultiLineString":return b<0&&(b=n.length+b),x<0&&(x=n[b].length+x-1),A.lineString([n[b][x],n[b][x+1]],S,v);case"MultiPolygon":return b<0&&(b=n.length+b),L<0&&(L=n[b].length+L),x<0&&(x=n[b][L].length-x-1),A.lineString([n[b][L][x],n[b][L][x+1]],S,v)}throw new Error("geojson is invalid")},W.findPoint=function p(o,v){if(!A.isObject(v=v||{}))throw new Error("options is invalid");var T,M=v.featureIndex||0,b=v.multiFeatureIndex||0,L=v.geometryIndex||0,x=v.coordIndex||0,S=v.properties;switch(o.type){case"FeatureCollection":M<0&&(M=o.features.length+M),S=S||o.features[M].properties,T=o.features[M].geometry;break;case"Feature":S=S||o.properties,T=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":T=o;break;default:throw new Error("geojson is invalid")}if(null===T)return null;var n=T.coordinates;switch(T.type){case"Point":return A.point(n,S,v);case"MultiPoint":return b<0&&(b=n.length+b),A.point(n[b],S,v);case"LineString":return x<0&&(x=n.length+x),A.point(n[x],S,v);case"Polygon":return L<0&&(L=n.length+L),x<0&&(x=n[L].length+x),A.point(n[L][x],S,v);case"MultiLineString":return b<0&&(b=n.length+b),x<0&&(x=n[b].length+x),A.point(n[b][x],S,v);case"MultiPolygon":return b<0&&(b=n.length+b),L<0&&(L=n[b].length+L),x<0&&(x=n[b][L].length-x),A.point(n[b][L][x],S,v)}throw new Error("geojson is invalid")}},65185:function(q){q.exports=function W(t){var A=0,g=0,i=0,P=0;return t.map(function(C){var u=(C=C.slice())[0],y=u.toUpperCase();if(u!=y)switch(C[0]=y,u){case"a":C[6]+=i,C[7]+=P;break;case"v":C[1]+=P;break;case"h":C[1]+=i;break;default:for(var e=1;e<C.length;)C[e++]+=i,C[e++]+=P}switch(y){case"Z":i=A,P=g;break;case"H":i=C[1];break;case"V":P=C[1];break;case"M":i=A=C[1],P=g=C[2];break;default:i=C[C.length-2],P=C[C.length-1]}return C})}},21527:function(q){"use strict";q.exports=function W(t,A){if(!t||null==t.length)throw Error("Argument should be an array");A=null==A?1:Math.floor(A);for(var g=Array(2*A),i=0;i<A;i++){for(var P=-1/0,C=1/0,u=i,y=t.length;u<y;u+=A)t[u]>P&&(P=t[u]),t[u]<C&&(C=t[u]);g[i]=C,g[A+i]=P}return g}},6851:function(q){"use strict";q.exports=function(W,t,A){if("function"==typeof Array.prototype.findIndex)return W.findIndex(t,A);if("function"!=typeof t)throw new TypeError("predicate must be a function");var g=Object(W),i=g.length;if(0===i)return-1;for(var P=0;P<i;P++)if(t.call(A,g[P],P,g))return P;return-1}},54:function(q,W,t){"use strict";var A=t(21527);q.exports=function g(i,P,C){if(!i||null==i.length)throw Error("Argument should be an array");null==P&&(P=1),null==C&&(C=A(i,P));for(var u=0;u<P;u++){var y=C[P+u],e=C[u],r=u,l=i.length;if(y===1/0&&e===-1/0)for(r=u;r<l;r+=P)i[r]=i[r]===y?1:i[r]===e?0:.5;else if(y===1/0)for(r=u;r<l;r+=P)i[r]=i[r]===y?1:0;else if(e===-1/0)for(r=u;r<l;r+=P)i[r]=i[r]===e?0:1;else{var a=y-e;for(r=u;r<l;r+=P)isNaN(i[r])||(i[r]=0===a?.5:(i[r]-e)/a)}}return i}},57471:function(q){q.exports=function(t,A){var g="number"==typeof t,i="number"==typeof A;g&&!i?(A=t,t=0):!g&&!i&&(t=0,A=0);var P=(A|=0)-(t|=0);if(P<0)throw new Error("array length must be positive");for(var C=new Array(P),u=0,y=t;u<P;u++,y++)C[u]=y;return C}},32791:function(q,W,t){"use strict";var A=t(90386);function g(G){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(at){return typeof at}:function(at){return at&&"function"==typeof Symbol&&at.constructor===Symbol&&at!==Symbol.prototype?"symbol":typeof at})(G)}var v,M,C=t(79616).codes,u=C.ERR_AMBIGUOUS_ARGUMENT,y=C.ERR_INVALID_ARG_TYPE,e=C.ERR_INVALID_ARG_VALUE,r=C.ERR_INVALID_RETURN_VALUE,l=C.ERR_MISSING_ARGS,a=t(73894),c=t(43827).inspect,f=t(43827).types,m=f.isPromise,h=f.isRegExp,w=Object.assign?Object.assign:t(73523).assign,p=Object.is?Object.is:t(64003);function S(){var G=t(74061);v=G.isDeepEqual,M=G.isDeepStrictEqual}var d=!1,F=q.exports=B,D={};function N(G){throw G.message instanceof Error?G.message:new a(G)}function O(G,K,at,$){if(!at){var X=!1;if(0===K)X=!0,$="No value argument passed to `assert.ok()`";else if($ instanceof Error)throw $;var rt=new a({actual:at,expected:!0,message:$,operator:"==",stackStartFn:G});throw rt.generatedMessage=X,rt}}function B(){for(var G=arguments.length,K=new Array(G),at=0;at<G;at++)K[at]=arguments[at];O.apply(void 0,[B,K.length].concat(K))}F.fail=function k(G,K,at,$,X){var et,rt=arguments.length;if(0===rt?et="Failed":1===rt?(at=G,G=void 0):(!1===d&&(d=!0,(A.emitWarning?A.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===rt&&($="!=")),at instanceof Error)throw at;var dt={actual:G,expected:K,operator:void 0===$?"fail":$,stackStartFn:X||k};void 0!==at&&(dt.message=at);var bt=new a(dt);throw et&&(bt.message=et,bt.generatedMessage=!0),bt},F.AssertionError=a,F.ok=B,F.equal=function G(K,at,$){if(arguments.length<2)throw new l("actual","expected");K!=at&&N({actual:K,expected:at,message:$,operator:"==",stackStartFn:G})},F.notEqual=function G(K,at,$){if(arguments.length<2)throw new l("actual","expected");K==at&&N({actual:K,expected:at,message:$,operator:"!=",stackStartFn:G})},F.deepEqual=function G(K,at,$){if(arguments.length<2)throw new l("actual","expected");void 0===v&&S(),v(K,at)||N({actual:K,expected:at,message:$,operator:"deepEqual",stackStartFn:G})},F.notDeepEqual=function G(K,at,$){if(arguments.length<2)throw new l("actual","expected");void 0===v&&S(),v(K,at)&&N({actual:K,expected:at,message:$,operator:"notDeepEqual",stackStartFn:G})},F.deepStrictEqual=function G(K,at,$){if(arguments.length<2)throw new l("actual","expected");void 0===v&&S(),M(K,at)||N({actual:K,expected:at,message:$,operator:"deepStrictEqual",stackStartFn:G})},F.notDeepStrictEqual=function z(G,K,at){if(arguments.length<2)throw new l("actual","expected");void 0===v&&S(),M(G,K)&&N({actual:G,expected:K,message:at,operator:"notDeepStrictEqual",stackStartFn:z})},F.strictEqual=function G(K,at,$){if(arguments.length<2)throw new l("actual","expected");p(K,at)||N({actual:K,expected:at,message:$,operator:"strictEqual",stackStartFn:G})},F.notStrictEqual=function G(K,at,$){if(arguments.length<2)throw new l("actual","expected");p(K,at)&&N({actual:K,expected:at,message:$,operator:"notStrictEqual",stackStartFn:G})};var U=function G(K,at,$){var X=this;(function i(G,K){if(!(G instanceof K))throw new TypeError("Cannot call a class as a function")})(this,G),at.forEach(function(rt){rt in K&&(X[rt]=void 0!==$&&"string"==typeof $[rt]&&h(K[rt])&&K[rt].test($[rt])?$[rt]:K[rt])})};function H(G,K,at,$,X,rt){if(!(at in G)||!M(G[at],K[at])){if(!$){var et=new U(G,X),st=new U(K,X,G),dt=new a({actual:et,expected:st,operator:"deepStrictEqual",stackStartFn:rt});throw dt.actual=G,dt.expected=K,dt.operator=rt.name,dt}N({actual:G,expected:K,message:$,operator:rt.name,stackStartFn:rt})}}function J(G,K,at,$){if("function"!=typeof K){if(h(K))return K.test(G);if(2===arguments.length)throw new y("expected",["Function","RegExp"],K);if("object"!==g(G)||null===G){var X=new a({actual:G,expected:K,message:at,operator:"deepStrictEqual",stackStartFn:$});throw X.operator=$.name,X}var rt=Object.keys(K);if(K instanceof Error)rt.push("name","message");else if(0===rt.length)throw new e("error",K,"may not be an empty object");return void 0===v&&S(),rt.forEach(function(et){"string"==typeof G[et]&&h(K[et])&&K[et].test(G[et])||H(G,K,et,at,rt,$)}),!0}return void 0!==K.prototype&&G instanceof K||!Error.isPrototypeOf(K)&&!0===K.call({},G)}function nt(G){if("function"!=typeof G)throw new y("fn","Function",G);try{G()}catch(K){return K}return D}function it(G){return m(G)||null!==G&&"object"===g(G)&&"function"==typeof G.then&&"function"==typeof G.catch}function ut(G){return Promise.resolve().then(function(){var K;if("function"==typeof G){if(!it(K=G()))throw new r("instance of Promise","promiseFn",K)}else{if(!it(G))throw new y("promiseFn",["Function","Promise"],G);K=G}return Promise.resolve().then(function(){return K}).then(function(){return D}).catch(function(at){return at})})}function Q(G,K,at,$){if("string"==typeof at){if(4===arguments.length)throw new y("error",["Object","Error","Function","RegExp"],at);if("object"===g(K)&&null!==K){if(K.message===at)throw new u("error/message",'The error message "'.concat(K.message,'" is identical to the message.'))}else if(K===at)throw new u("error/message",'The error "'.concat(K,'" is identical to the message.'));$=at,at=void 0}else if(null!=at&&"object"!==g(at)&&"function"!=typeof at)throw new y("error",["Object","Error","Function","RegExp"],at);if(K===D){var X="";at&&at.name&&(X+=" (".concat(at.name,")")),X+=$?": ".concat($):".",N({actual:void 0,expected:at,operator:G.name,message:"Missing expected ".concat("rejects"===G.name?"rejection":"exception").concat(X),stackStartFn:G})}if(at&&!J(K,at,$,G))throw K}function j(G,K,at,$){if(K!==D){if("string"==typeof at&&($=at,at=void 0),!at||J(K,at)){var X=$?": ".concat($):".";N({actual:K,expected:at,operator:G.name,message:"Got unwanted ".concat("doesNotReject"===G.name?"rejection":"exception").concat(X,"\n")+'Actual message: "'.concat(K&&K.message,'"'),stackStartFn:G})}throw K}}function Z(){for(var G=arguments.length,K=new Array(G),at=0;at<G;at++)K[at]=arguments[at];O.apply(void 0,[Z,K.length].concat(K))}F.throws=function G(K){for(var at=arguments.length,$=new Array(at>1?at-1:0),X=1;X<at;X++)$[X-1]=arguments[X];Q.apply(void 0,[G,nt(K)].concat($))},F.rejects=function G(K){for(var at=arguments.length,$=new Array(at>1?at-1:0),X=1;X<at;X++)$[X-1]=arguments[X];return ut(K).then(function(rt){return Q.apply(void 0,[G,rt].concat($))})},F.doesNotThrow=function G(K){for(var at=arguments.length,$=new Array(at>1?at-1:0),X=1;X<at;X++)$[X-1]=arguments[X];j.apply(void 0,[G,nt(K)].concat($))},F.doesNotReject=function G(K){for(var at=arguments.length,$=new Array(at>1?at-1:0),X=1;X<at;X++)$[X-1]=arguments[X];return ut(K).then(function(rt){return j.apply(void 0,[G,rt].concat($))})},F.ifError=function G(K){if(null!=K){var at="ifError got unwanted exception: ";"object"===g(K)&&"string"==typeof K.message?at+=0===K.message.length&&K.constructor?K.constructor.name:K.message:at+=c(K);var $=new a({actual:K,expected:null,operator:"ifError",message:at,stackStartFn:G}),X=K.stack;if("string"==typeof X){var rt=X.split("\n");rt.shift();for(var et=$.stack.split("\n"),st=0;st<rt.length;st++){var dt=et.indexOf(rt[st]);if(-1!==dt){et=et.slice(0,dt);break}}$.stack="".concat(et.join("\n"),"\n").concat(rt.join("\n"))}throw $}},F.strict=w(Z,F,{equal:F.strictEqual,deepEqual:F.deepStrictEqual,notEqual:F.notStrictEqual,notDeepEqual:F.notDeepStrictEqual}),F.strict.strict=F.strict},73894:function(q,W,t){"use strict";var A=t(90386);function i(k,O,B){return O in k?Object.defineProperty(k,O,{value:B,enumerable:!0,configurable:!0,writable:!0}):k[O]=B,k}function C(k,O){for(var B=0;B<O.length;B++){var z=O[B];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(k,z.key,z)}}function y(k,O){return!O||"object"!==h(O)&&"function"!=typeof O?e(k):O}function e(k){if(void 0===k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}function l(k){var O="function"==typeof Map?new Map:void 0;return l=function(z){if(null===z||!function c(k){return-1!==Function.toString.call(k).indexOf("[native code]")}(z))return z;if("function"!=typeof z)throw new TypeError("Super expression must either be null or a function");if(void 0!==O){if(O.has(z))return O.get(z);O.set(z,U)}function U(){return s(z,arguments,m(this).constructor)}return U.prototype=Object.create(z.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),f(U,z)},l(k)}function a(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(k){return!1}}function s(k,O,B){return(s=a()?Reflect.construct:function(U,H,J){var nt=[null];nt.push.apply(nt,H);var ut=new(Function.bind.apply(U,nt));return J&&f(ut,J.prototype),ut}).apply(null,arguments)}function f(k,O){return(f=Object.setPrototypeOf||function(z,U){return z.__proto__=U,z})(k,O)}function m(k){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(B){return B.__proto__||Object.getPrototypeOf(B)})(k)}function h(k){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(B){return typeof B}:function(B){return B&&"function"==typeof Symbol&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B})(k)}var p=t(43827).inspect,v=t(79616).codes.ERR_INVALID_ARG_TYPE;function M(k,O,B){return(void 0===B||B>k.length)&&(B=k.length),k.substring(B-O.length,B)===O}var L="",x="",S="",T="",n={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function d(k){var O=Object.keys(k),B=Object.create(Object.getPrototypeOf(k));return O.forEach(function(z){B[z]=k[z]}),Object.defineProperty(B,"message",{value:k.message}),B}function F(k){return p(k,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function D(k,O,B){var z="",U="",H=0,J="",nt=!1,it=F(k),ut=it.split("\n"),Q=F(O).split("\n"),j=0,Z="";if("strictEqual"===B&&"object"===h(k)&&"object"===h(O)&&null!==k&&null!==O&&(B="strictEqualObject"),1===ut.length&&1===Q.length&&ut[0]!==Q[0]){var G=ut[0].length+Q[0].length;if(G<=10){if(!("object"===h(k)&&null!==k||"object"===h(O)&&null!==O||0===k&&0===O))return"".concat(n[B],"\n\n")+"".concat(ut[0]," !== ").concat(Q[0],"\n")}else if("strictEqualObject"!==B&&G<(A.stderr&&A.stderr.isTTY?A.stderr.columns:80)){for(;ut[0][j]===Q[0][j];)j++;j>2&&(Z="\n  ".concat(function b(k,O){if(O=Math.floor(O),0==k.length||0==O)return"";var B=k.length*O;for(O=Math.floor(Math.log(O)/Math.log(2));O;)k+=k,O--;return k+k.substring(0,B-k.length)}(" ",j),"^"),j=0)}}for(var at=ut[ut.length-1],$=Q[Q.length-1];at===$&&(j++<2?J="\n  ".concat(at).concat(J):z=at,ut.pop(),Q.pop(),0!==ut.length&&0!==Q.length);)at=ut[ut.length-1],$=Q[Q.length-1];var X=Math.max(ut.length,Q.length);if(0===X){var rt=it.split("\n");if(rt.length>30)for(rt[26]="".concat(L,"...").concat(T);rt.length>27;)rt.pop();return"".concat(n.notIdentical,"\n\n").concat(rt.join("\n"),"\n")}j>3&&(J="\n".concat(L,"...").concat(T).concat(J),nt=!0),""!==z&&(J="\n  ".concat(z).concat(J),z="");var et=0,st=n[B]+"\n".concat(x,"+ actual").concat(T," ").concat(S,"- expected").concat(T),dt=" ".concat(L,"...").concat(T," Lines skipped");for(j=0;j<X;j++){var bt=j-H;if(ut.length<j+1)bt>1&&j>2&&(bt>4?(U+="\n".concat(L,"...").concat(T),nt=!0):bt>3&&(U+="\n  ".concat(Q[j-2]),et++),U+="\n  ".concat(Q[j-1]),et++),H=j,z+="\n".concat(S,"-").concat(T," ").concat(Q[j]),et++;else if(Q.length<j+1)bt>1&&j>2&&(bt>4?(U+="\n".concat(L,"...").concat(T),nt=!0):bt>3&&(U+="\n  ".concat(ut[j-2]),et++),U+="\n  ".concat(ut[j-1]),et++),H=j,U+="\n".concat(x,"+").concat(T," ").concat(ut[j]),et++;else{var gt=Q[j],Lt=ut[j],It=Lt!==gt&&(!M(Lt,",")||Lt.slice(0,-1)!==gt);It&&M(gt,",")&&gt.slice(0,-1)===Lt&&(It=!1,Lt+=","),It?(bt>1&&j>2&&(bt>4?(U+="\n".concat(L,"...").concat(T),nt=!0):bt>3&&(U+="\n  ".concat(ut[j-2]),et++),U+="\n  ".concat(ut[j-1]),et++),H=j,U+="\n".concat(x,"+").concat(T," ").concat(Lt),z+="\n".concat(S,"-").concat(T," ").concat(gt),et+=2):(U+=z,z="",(1===bt||0===j)&&(U+="\n  ".concat(Lt),et++))}if(et>20&&j<X-2)return"".concat(st).concat(dt,"\n").concat(U,"\n").concat(L,"...").concat(T).concat(z,"\n")+"".concat(L,"...").concat(T)}return"".concat(st).concat(nt?dt:"","\n").concat(U).concat(z).concat(J).concat(Z)}var N=function(k){function O(B){var z;if(function P(k,O){if(!(k instanceof O))throw new TypeError("Cannot call a class as a function")}(this,O),"object"!==h(B)||null===B)throw new v("options","Object",B);var U=B.message,H=B.operator,J=B.stackStartFn,nt=B.actual,it=B.expected,ut=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=U)z=y(this,m(O).call(this,String(U)));else if(A.stderr&&A.stderr.isTTY&&(A.stderr&&A.stderr.getColorDepth&&1!==A.stderr.getColorDepth()?(L="\x1b[34m",x="\x1b[32m",T="\x1b[39m",S="\x1b[31m"):(L="",x="",T="",S="")),"object"===h(nt)&&null!==nt&&"object"===h(it)&&null!==it&&"stack"in nt&&nt instanceof Error&&"stack"in it&&it instanceof Error&&(nt=d(nt),it=d(it)),"deepStrictEqual"===H||"strictEqual"===H)z=y(this,m(O).call(this,D(nt,it,H)));else if("notDeepStrictEqual"===H||"notStrictEqual"===H){var Q=n[H],j=F(nt).split("\n");if("notStrictEqual"===H&&"object"===h(nt)&&null!==nt&&(Q=n.notStrictEqualObject),j.length>30)for(j[26]="".concat(L,"...").concat(T);j.length>27;)j.pop();z=y(this,1===j.length?m(O).call(this,"".concat(Q," ").concat(j[0])):m(O).call(this,"".concat(Q,"\n\n").concat(j.join("\n"),"\n")))}else{var Z=F(nt),G="",K=n[H];"notDeepEqual"===H||"notEqual"===H?(Z="".concat(n[H],"\n\n").concat(Z)).length>1024&&(Z="".concat(Z.slice(0,1021),"...")):(G="".concat(F(it)),Z.length>512&&(Z="".concat(Z.slice(0,509),"...")),G.length>512&&(G="".concat(G.slice(0,509),"...")),"deepEqual"===H||"equal"===H?Z="".concat(K,"\n\n").concat(Z,"\n\nshould equal\n\n"):G=" ".concat(H," ").concat(G)),z=y(this,m(O).call(this,"".concat(Z).concat(G)))}return Error.stackTraceLimit=ut,z.generatedMessage=!U,Object.defineProperty(e(z),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),z.code="ERR_ASSERTION",z.actual=nt,z.expected=it,z.operator=H,Error.captureStackTrace&&Error.captureStackTrace(e(z),J),z.name="AssertionError",y(z)}return function r(k,O){if("function"!=typeof O&&null!==O)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(O&&O.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),O&&f(k,O)}(O,k),function u(k,O,B){return O&&C(k.prototype,O),B&&C(k,B),k}(O,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:p.custom,value:function(z,U){return p(this,function g(k){for(var O=1;O<arguments.length;O++){var B=null!=arguments[O]?arguments[O]:{},z=Object.keys(B);"function"==typeof Object.getOwnPropertySymbols&&(z=z.concat(Object.getOwnPropertySymbols(B).filter(function(U){return Object.getOwnPropertyDescriptor(B,U).enumerable}))),z.forEach(function(U){i(k,U,B[U])})}return k}({},U,{customInspect:!1,depth:0}))}}]),O}(l(Error));q.exports=N},79616:function(q,W,t){"use strict";function A(h){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function i(h,w){return!w||"object"!==A(w)&&"function"!=typeof w?function P(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(h):w}function C(h){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(p){return p.__proto__||Object.getPrototypeOf(p)})(h)}function u(h,w){if("function"!=typeof w&&null!==w)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(w&&w.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),w&&y(h,w)}function y(h,w){return(y=Object.setPrototypeOf||function(o,v){return o.__proto__=v,o})(h,w)}var r,l,e={};function a(h,w,p){p||(p=Error),e[h]=function(M){function b(L,x,S){var T;return function g(h,w){if(!(h instanceof w))throw new TypeError("Cannot call a class as a function")}(this,b),(T=i(this,C(b).call(this,function o(M,b,L){return"string"==typeof w?w:w(M,b,L)}(L,x,S)))).code=h,T}return u(b,M),b}(p)}function s(h,w){if(Array.isArray(h)){var p=h.length;return h=h.map(function(o){return String(o)}),p>2?"one of ".concat(w," ").concat(h.slice(0,p-1).join(", "),", or ")+h[p-1]:2===p?"one of ".concat(w," ").concat(h[0]," or ").concat(h[1]):"of ".concat(w," ").concat(h[0])}return"of ".concat(w," ").concat(String(h))}a("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),a("ERR_INVALID_ARG_TYPE",function(h,w,p){var o,v;if(void 0===r&&(r=t(32791)),r("string"==typeof h,"'name' must be a string"),"string"==typeof w&&function c(h,w,p){return h.substr(!p||p<0?0:+p,w.length)===w}(w,"not ")?(o="must not be",w=w.replace(/^not /,"")):o="must be",function f(h,w,p){return(void 0===p||p>h.length)&&(p=h.length),h.substring(p-w.length,p)===w}(h," argument"))v="The ".concat(h," ").concat(o," ").concat(s(w,"type"));else{var M=function m(h,w,p){return"number"!=typeof p&&(p=0),!(p+w.length>h.length)&&-1!==h.indexOf(w,p)}(h,".")?"property":"argument";v='The "'.concat(h,'" ').concat(M," ").concat(o," ").concat(s(w,"type"))}return v+". Received type ".concat(A(p))},TypeError),a("ERR_INVALID_ARG_VALUE",function(h,w){var p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===l&&(l=t(43827));var o=l.inspect(w);return o.length>128&&(o="".concat(o.slice(0,128),"...")),"The argument '".concat(h,"' ").concat(p,". Received ").concat(o)},TypeError,RangeError),a("ERR_INVALID_RETURN_VALUE",function(h,w,p){var o;return o=p&&p.constructor&&p.constructor.name?"instance of ".concat(p.constructor.name):"type ".concat(A(p)),"Expected ".concat(h,' to be returned from the "').concat(w,'"')+" function but got ".concat(o,".")},TypeError),a("ERR_MISSING_ARGS",function(){for(var h=arguments.length,w=new Array(h),p=0;p<h;p++)w[p]=arguments[p];void 0===r&&(r=t(32791)),r(w.length>0,"At least one arg needs to be specified");var o="The ",v=w.length;switch(w=w.map(function(M){return'"'.concat(M,'"')}),v){case 1:o+="".concat(w[0]," argument");break;case 2:o+="".concat(w[0]," and ").concat(w[1]," arguments");break;default:o+=w.slice(0,v-1).join(", "),o+=", and ".concat(w[v-1]," arguments")}return"".concat(o," must be specified")},TypeError),q.exports.codes=e},74061:function(q,W,t){"use strict";function A(xt,At){return function P(xt){if(Array.isArray(xt))return xt}(xt)||function i(xt,At){var Gt=[],Wt=!0,Pt=!1,Vt=void 0;try{for(var Qt,te=xt[Symbol.iterator]();!(Wt=(Qt=te.next()).done)&&(Gt.push(Qt.value),!At||Gt.length!==At);Wt=!0);}catch(Bt){Pt=!0,Vt=Bt}finally{try{!Wt&&null!=te.return&&te.return()}finally{if(Pt)throw Vt}}return Gt}(xt,At)||function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function C(xt){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Gt){return typeof Gt}:function(Gt){return Gt&&"function"==typeof Symbol&&Gt.constructor===Symbol&&Gt!==Symbol.prototype?"symbol":typeof Gt})(xt)}var u=void 0!==/a/g.flags,y=function(At){var Gt=[];return At.forEach(function(Wt){return Gt.push(Wt)}),Gt},e=function(At){var Gt=[];return At.forEach(function(Wt,Pt){return Gt.push([Pt,Wt])}),Gt},r=Object.is?Object.is:t(64003),l=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},a=Number.isNaN?Number.isNaN:t(15567);function s(xt){return xt.call.bind(xt)}var c=s(Object.prototype.hasOwnProperty),f=s(Object.prototype.propertyIsEnumerable),m=s(Object.prototype.toString),h=t(43827).types,w=h.isAnyArrayBuffer,p=h.isArrayBufferView,o=h.isDate,v=h.isMap,M=h.isRegExp,b=h.isSet,L=h.isNativeError,x=h.isBoxedPrimitive,S=h.isNumberObject,T=h.isStringObject,n=h.isBooleanObject,E=h.isBigIntObject,d=h.isSymbolObject,F=h.isFloat32Array,D=h.isFloat64Array;function N(xt){if(0===xt.length||xt.length>10)return!0;for(var At=0;At<xt.length;At++){var Gt=xt.charCodeAt(At);if(Gt<48||Gt>57)return!0}return 10===xt.length&&xt>=Math.pow(2,32)}function k(xt){return Object.keys(xt).filter(N).concat(l(xt).filter(Object.prototype.propertyIsEnumerable.bind(xt)))}function O(xt,At){if(xt===At)return 0;for(var Gt=xt.length,Wt=At.length,Pt=0,Vt=Math.min(Gt,Wt);Pt<Vt;++Pt)if(xt[Pt]!==At[Pt]){Gt=xt[Pt],Wt=At[Pt];break}return Gt<Wt?-1:Wt<Gt?1:0}function K(xt,At,Gt,Wt){if(xt===At)return 0!==xt||!Gt||r(xt,At);if(Gt){if("object"!==C(xt))return"number"==typeof xt&&a(xt)&&a(At);if("object"!==C(At)||null===xt||null===At||Object.getPrototypeOf(xt)!==Object.getPrototypeOf(At))return!1}else{if(null===xt||"object"!==C(xt))return(null===At||"object"!==C(At))&&xt==At;if(null===At||"object"!==C(At))return!1}var Pt=m(xt);if(Pt!==m(At))return!1;if(Array.isArray(xt)){if(xt.length!==At.length)return!1;var te=k(xt),Qt=k(At);return te.length===Qt.length&&$(xt,At,Gt,Wt,1,te)}if("[object Object]"===Pt&&(!v(xt)&&v(At)||!b(xt)&&b(At)))return!1;if(o(xt)){if(!o(At)||Date.prototype.getTime.call(xt)!==Date.prototype.getTime.call(At))return!1}else if(M(xt)){if(!M(At)||!function ut(xt,At){return u?xt.source===At.source&&xt.flags===At.flags:RegExp.prototype.toString.call(xt)===RegExp.prototype.toString.call(At)}(xt,At))return!1}else if(L(xt)||xt instanceof Error){if(xt.message!==At.message||xt.name!==At.name)return!1}else{if(p(xt)){if(Gt||!F(xt)&&!D(xt)){if(!function j(xt,At){return xt.byteLength===At.byteLength&&0===O(new Uint8Array(xt.buffer,xt.byteOffset,xt.byteLength),new Uint8Array(At.buffer,At.byteOffset,At.byteLength))}(xt,At))return!1}else if(!function Q(xt,At){if(xt.byteLength!==At.byteLength)return!1;for(var Gt=0;Gt<xt.byteLength;Gt++)if(xt[Gt]!==At[Gt])return!1;return!0}(xt,At))return!1;var Bt=k(xt),Ot=k(At);return Bt.length===Ot.length&&$(xt,At,Gt,Wt,0,Bt)}if(b(xt))return!(!b(At)||xt.size!==At.size)&&$(xt,At,Gt,Wt,2);if(v(xt))return!(!v(At)||xt.size!==At.size)&&$(xt,At,Gt,Wt,3);if(w(xt)){if(!function Z(xt,At){return xt.byteLength===At.byteLength&&0===O(new Uint8Array(xt),new Uint8Array(At))}(xt,At))return!1}else if(x(xt)&&!function G(xt,At){return S(xt)?S(At)&&r(Number.prototype.valueOf.call(xt),Number.prototype.valueOf.call(At)):T(xt)?T(At)&&String.prototype.valueOf.call(xt)===String.prototype.valueOf.call(At):n(xt)?n(At)&&Boolean.prototype.valueOf.call(xt)===Boolean.prototype.valueOf.call(At):E(xt)?E(At)&&BigInt.prototype.valueOf.call(xt)===BigInt.prototype.valueOf.call(At):d(At)&&Symbol.prototype.valueOf.call(xt)===Symbol.prototype.valueOf.call(At)}(xt,At))return!1}return $(xt,At,Gt,Wt,0)}function at(xt,At){return At.filter(function(Gt){return f(xt,Gt)})}function $(xt,At,Gt,Wt,Pt,Vt){if(5===arguments.length){Vt=Object.keys(xt);var te=Object.keys(At);if(Vt.length!==te.length)return!1}for(var Qt=0;Qt<Vt.length;Qt++)if(!c(At,Vt[Qt]))return!1;if(Gt&&5===arguments.length){var Bt=l(xt);if(0!==Bt.length){var Ot=0;for(Qt=0;Qt<Bt.length;Qt++){var qt=Bt[Qt];if(f(xt,qt)){if(!f(At,qt))return!1;Vt.push(qt),Ot++}else if(f(At,qt))return!1}var ie=l(At);if(Bt.length!==ie.length&&at(At,ie).length!==Ot)return!1}else{var oe=l(At);if(0!==oe.length&&0!==at(At,oe).length)return!1}}if(0===Vt.length&&(0===Pt||1===Pt&&0===xt.length||0===xt.size))return!0;if(void 0===Wt)Wt={val1:new Map,val2:new Map,position:0};else{var pe=Wt.val1.get(xt);if(void 0!==pe){var de=Wt.val2.get(At);if(void 0!==de)return pe===de}Wt.position++}Wt.val1.set(xt,Wt.position),Wt.val2.set(At,Wt.position);var Fe=Lt(xt,At,Gt,Vt,Wt,Pt);return Wt.val1.delete(xt),Wt.val2.delete(At),Fe}function X(xt,At,Gt,Wt){for(var Pt=y(xt),Vt=0;Vt<Pt.length;Vt++){var te=Pt[Vt];if(K(At,te,Gt,Wt))return xt.delete(te),!0}return!1}function rt(xt){switch(C(xt)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":xt=+xt;case"number":if(a(xt))return!1}return!0}function et(xt,At,Gt){var Wt=rt(Gt);return null!=Wt?Wt:At.has(Wt)&&!xt.has(Wt)}function st(xt,At,Gt,Wt,Pt){var Vt=rt(Gt);if(null!=Vt)return Vt;var te=At.get(Vt);return!(void 0===te&&!At.has(Vt)||!K(Wt,te,!1,Pt))&&!xt.has(Vt)&&K(Wt,te,!1,Pt)}function bt(xt,At,Gt,Wt,Pt,Vt){for(var te=y(xt),Qt=0;Qt<te.length;Qt++){var Bt=te[Qt];if(K(Gt,Bt,Pt,Vt)&&K(Wt,At.get(Bt),Pt,Vt))return xt.delete(Bt),!0}return!1}function Lt(xt,At,Gt,Wt,Pt,Vt){var te=0;if(2===Vt){if(!function dt(xt,At,Gt,Wt){for(var Pt=null,Vt=y(xt),te=0;te<Vt.length;te++){var Qt=Vt[te];if("object"===C(Qt)&&null!==Qt)null===Pt&&(Pt=new Set),Pt.add(Qt);else if(!At.has(Qt)){if(Gt||!et(xt,At,Qt))return!1;null===Pt&&(Pt=new Set),Pt.add(Qt)}}if(null!==Pt){for(var Bt=y(At),Ot=0;Ot<Bt.length;Ot++){var qt=Bt[Ot];if("object"===C(qt)&&null!==qt){if(!X(Pt,qt,Gt,Wt))return!1}else if(!Gt&&!xt.has(qt)&&!X(Pt,qt,Gt,Wt))return!1}return 0===Pt.size}return!0}(xt,At,Gt,Pt))return!1}else if(3===Vt){if(!function gt(xt,At,Gt,Wt){for(var Pt=null,Vt=e(xt),te=0;te<Vt.length;te++){var Qt=A(Vt[te],2),Ot=Qt[1];if("object"===C(Bt=Qt[0])&&null!==Bt)null===Pt&&(Pt=new Set),Pt.add(Bt);else{var qt=At.get(Bt);if(void 0===qt&&!At.has(Bt)||!K(Ot,qt,Gt,Wt)){if(Gt||!st(xt,At,Bt,Ot,Wt))return!1;null===Pt&&(Pt=new Set),Pt.add(Bt)}}}if(null!==Pt){for(var ie=e(At),oe=0;oe<ie.length;oe++){var Bt,pe=A(ie[oe],2),de=pe[1];if("object"===C(Bt=pe[0])&&null!==Bt){if(!bt(Pt,xt,Bt,de,Gt,Wt))return!1}else if(!(Gt||xt.has(Bt)&&K(xt.get(Bt),de,!1,Wt)||bt(Pt,xt,Bt,de,!1,Wt)))return!1}return 0===Pt.size}return!0}(xt,At,Gt,Pt))return!1}else if(1===Vt)for(;te<xt.length;te++){if(!c(xt,te)){if(c(At,te))return!1;for(var Qt=Object.keys(xt);te<Qt.length;te++){var Bt=Qt[te];if(!c(At,Bt)||!K(xt[Bt],At[Bt],Gt,Pt))return!1}return Qt.length===Object.keys(At).length}if(!c(At,te)||!K(xt[te],At[te],Gt,Pt))return!1}for(te=0;te<Wt.length;te++){var Ot=Wt[te];if(!K(xt[Ot],At[Ot],Gt,Pt))return!1}return!0}q.exports={isDeepEqual:function It(xt,At){return K(xt,At,false)},isDeepStrictEqual:function Mt(xt,At){return K(xt,At,true)}}},95341:function(q,W){"use strict";W.byteLength=function y(c){var f=u(c),h=f[1];return 3*(f[0]+h)/4-h},W.toByteArray=function r(c){var f,M,m=u(c),h=m[0],w=m[1],p=new g(function e(c,f,m){return 3*(f+m)/4-m}(0,h,w)),o=0,v=w>0?h-4:h;for(M=0;M<v;M+=4)f=A[c.charCodeAt(M)]<<18|A[c.charCodeAt(M+1)]<<12|A[c.charCodeAt(M+2)]<<6|A[c.charCodeAt(M+3)],p[o++]=f>>16&255,p[o++]=f>>8&255,p[o++]=255&f;return 2===w&&(f=A[c.charCodeAt(M)]<<2|A[c.charCodeAt(M+1)]>>4,p[o++]=255&f),1===w&&(f=A[c.charCodeAt(M)]<<10|A[c.charCodeAt(M+1)]<<4|A[c.charCodeAt(M+2)]>>2,p[o++]=f>>8&255,p[o++]=255&f),p},W.fromByteArray=function s(c){for(var f,m=c.length,h=m%3,w=[],p=16383,o=0,v=m-h;o<v;o+=p)w.push(a(c,o,o+p>v?v:o+p));return 1===h?w.push(t[(f=c[m-1])>>2]+t[f<<4&63]+"=="):2===h&&w.push(t[(f=(c[m-2]<<8)+c[m-1])>>10]+t[f>>4&63]+t[f<<2&63]+"="),w.join("")};for(var t=[],A=[],g="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P=0,C=i.length;P<C;++P)t[P]=i[P],A[i.charCodeAt(P)]=P;function u(c){var f=c.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=c.indexOf("=");return-1===m&&(m=f),[m,m===f?0:4-m%4]}function l(c){return t[c>>18&63]+t[c>>12&63]+t[c>>6&63]+t[63&c]}function a(c,f,m){for(var w=[],p=f;p<m;p+=3)w.push(l((c[p]<<16&16711680)+(c[p+1]<<8&65280)+(255&c[p+2])));return w.join("")}A["-".charCodeAt(0)]=62,A["_".charCodeAt(0)]=63},91358:function(q){"use strict";function W(C,u,y,e,r){for(var l=r+1;e<=r;){var a=e+r>>>1,s=C[a];(void 0!==y?y(s,u):s-u)>=0?(l=a,r=a-1):e=a+1}return l}function t(C,u,y,e,r){for(var l=r+1;e<=r;){var a=e+r>>>1,s=C[a];(void 0!==y?y(s,u):s-u)>0?(l=a,r=a-1):e=a+1}return l}function A(C,u,y,e,r){for(var l=e-1;e<=r;){var a=e+r>>>1,s=C[a];(void 0!==y?y(s,u):s-u)<0?(l=a,e=a+1):r=a-1}return l}function g(C,u,y,e,r){for(var l=e-1;e<=r;){var a=e+r>>>1,s=C[a];(void 0!==y?y(s,u):s-u)<=0?(l=a,e=a+1):r=a-1}return l}function i(C,u,y,e,r){for(;e<=r;){var l=e+r>>>1,a=C[l],s=void 0!==y?y(a,u):a-u;if(0===s)return l;s<=0?e=l+1:r=l-1}return-1}function P(C,u,y,e,r,l){return"function"==typeof y?l(C,u,y,void 0===e?0:0|e,void 0===r?C.length-1:0|r):l(C,u,void 0,void 0===y?0:0|y,void 0===e?C.length-1:0|e)}q.exports={ge:function(C,u,y,e,r){return P(C,u,y,e,r,W)},gt:function(C,u,y,e,r){return P(C,u,y,e,r,t)},lt:function(C,u,y,e,r){return P(C,u,y,e,r,A)},le:function(C,u,y,e,r){return P(C,u,y,e,r,g)},eq:function(C,u,y,e,r){return P(C,u,y,e,r,i)}}},13547:function(q,W){"use strict";function A(i){var P=32;return(i&=-i)&&P--,65535&i&&(P-=16),16711935&i&&(P-=8),252645135&i&&(P-=4),858993459&i&&(P-=2),1431655765&i&&(P-=1),P}W.INT_BITS=32,W.INT_MAX=2147483647,W.INT_MIN=-1<<31,W.sign=function(i){return(i>0)-(i<0)},W.abs=function(i){var P=i>>31;return(i^P)-P},W.min=function(i,P){return P^(i^P)&-(i<P)},W.max=function(i,P){return i^(i^P)&-(i<P)},W.isPow2=function(i){return!(i&i-1||!i)},W.log2=function(i){var P,C;return P=(i>65535)<<4,P|=C=((i>>>=P)>255)<<3,P|=C=((i>>>=C)>15)<<2,(P|=C=((i>>>=C)>3)<<1)|(i>>>=C)>>1},W.log10=function(i){return i>=1e9?9:i>=1e8?8:i>=1e7?7:i>=1e6?6:i>=1e5?5:i>=1e4?4:i>=1e3?3:i>=100?2:i>=10?1:0},W.popCount=function(i){return 16843009*((i=(858993459&(i-=i>>>1&1431655765))+(i>>>2&858993459))+(i>>>4)&252645135)>>>24},W.countTrailingZeros=A,W.nextPow2=function(i){return i+=0===i,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,1+((i|=i>>>8)|i>>>16)},W.prevPow2=function(i){return i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,(i|=i>>>16)-(i>>>1)},W.parity=function(i){return i^=i>>>16,i^=i>>>8,i^=i>>>4,27030>>>(i&=15)&1};var g=new Array(256);(function(i){for(var P=0;P<256;++P){var C=P,u=P,y=7;for(C>>>=1;C;C>>>=1)u<<=1,u|=1&C,--y;i[P]=u<<y&255}})(g),W.reverse=function(i){return g[255&i]<<24|g[i>>>8&255]<<16|g[i>>>16&255]<<8|g[i>>>24&255]},W.interleave2=function(i,P){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i&=65535)|i<<8))|i<<4))|i<<2))|i<<1))|(P=1431655765&((P=858993459&((P=252645135&((P=16711935&((P&=65535)|P<<8))|P<<4))|P<<2))|P<<1))<<1},W.deinterleave2=function(i,P){return(i=65535&((i=16711935&((i=252645135&((i=858993459&((i=i>>>P&1431655765)|i>>>1))|i>>>2))|i>>>4))|i>>>16))<<16>>16},W.interleave3=function(i,P,C){return i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2),(i|=(P=1227133513&((P=3272356035&((P=251719695&((P=4278190335&((P&=1023)|P<<16))|P<<8))|P<<4))|P<<2))<<1)|(C=1227133513&((C=3272356035&((C=251719695&((C=4278190335&((C&=1023)|C<<16))|C<<8))|C<<4))|C<<2))<<2},W.deinterleave3=function(i,P){return(i=1023&((i=4278190335&((i=251719695&((i=3272356035&((i=i>>>P&1227133513)|i>>>2))|i>>>4))|i>>>8))|i>>>16))<<22>>22},W.nextCombination=function(i){var P=i|i-1;return P+1|(~P&-~P)-1>>>A(i)+1}},44781:function(q,W,t){"use strict";var A=t(53435);q.exports=function i(u,y){y||(y={});var a,s,c,f,m,h,p,v,M,e=null==y.cutoff?.25:y.cutoff,r=null==y.radius?8:y.radius,l=y.channel||0;if(ArrayBuffer.isView(u)||Array.isArray(u)){if(!y.width||!y.height)throw Error("For raw data width and height should be provided by options");a=y.width,s=y.height,f=u,h=y.stride?y.stride:Math.floor(u.length/a/s)}else window.HTMLCanvasElement&&u instanceof window.HTMLCanvasElement?(f=(p=u).getContext("2d").getImageData(0,0,a=p.width,s=p.height).data,h=4):window.CanvasRenderingContext2D&&u instanceof window.CanvasRenderingContext2D?(f=u.getImageData(0,0,a=(p=u.canvas).width,s=p.height).data,h=4):window.ImageData&&u instanceof window.ImageData&&(a=u.width,s=u.height,f=u.data,h=4);if(c=Math.max(a,s),window.Uint8ClampedArray&&f instanceof window.Uint8ClampedArray||window.Uint8Array&&f instanceof window.Uint8Array)for(m=f,f=Array(a*s),v=0,M=m.length;v<M;v++)f[v]=m[v*h+l]/255;else if(1!==h)throw Error("Raw data can have only 1 value per pixel");var b=Array(a*s),L=Array(a*s),x=Array(c),S=Array(c),T=Array(c+1),n=Array(c);for(v=0,M=a*s;v<M;v++){var E=f[v];b[v]=1===E?0:0===E?g:Math.pow(Math.max(0,.5-E),2),L[v]=1===E?g:0===E?0:Math.pow(Math.max(0,E-.5),2)}P(b,a,s,x,S,n,T),P(L,a,s,x,S,n,T);var d=window.Float32Array?new Float32Array(a*s):new Array(a*s);for(v=0,M=a*s;v<M;v++)d[v]=A(1-((b[v]-L[v])/r+e),0,1);return d};var g=1e20;function P(u,y,e,r,l,a,s){for(var c=0;c<y;c++){for(var f=0;f<e;f++)r[f]=u[f*y+c];for(C(r,l,a,s,e),f=0;f<e;f++)u[f*y+c]=l[f]}for(f=0;f<e;f++){for(c=0;c<y;c++)r[c]=u[f*y+c];for(C(r,l,a,s,y),c=0;c<y;c++)u[f*y+c]=Math.sqrt(l[c])}}function C(u,y,e,r,l){e[0]=0,r[0]=-g,r[1]=+g;for(var a=1,s=0;a<l;a++){for(var c=(u[a]+a*a-(u[e[s]]+e[s]*e[s]))/(2*a-2*e[s]);c<=r[s];)s--,c=(u[a]+a*a-(u[e[s]]+e[s]*e[s]))/(2*a-2*e[s]);e[++s]=a,r[s]=c,r[s+1]=+g}for(a=0,s=0;a<l;a++){for(;r[s+1]<a;)s++;y[a]=(a-e[s])*(a-e[s])+u[e[s]]}}},6614:function(q,W,t){"use strict";var A=t(68318),g=t(68222),i=g(A("String.prototype.indexOf"));q.exports=function(C,u){var y=A(C,!!u);return"function"==typeof y&&i(C,".prototype.")>-1?g(y):y}},68222:function(q,W,t){"use strict";var A=t(77575),g=t(68318),i=g("%Function.prototype.apply%"),P=g("%Function.prototype.call%"),C=g("%Reflect.apply%",!0)||A.call(P,i),u=g("%Object.getOwnPropertyDescriptor%",!0),y=g("%Object.defineProperty%",!0),e=g("%Math.max%");if(y)try{y({},"a",{value:1})}catch(l){y=null}q.exports=function(a){var s=C(A,P,arguments);return u&&y&&u(s,"length").configurable&&y(s,"length",{value:1+e(0,a.length-(arguments.length-1))}),s};var r=function(){return C(A,i,arguments)};y?y(q.exports,"apply",{value:r}):q.exports.apply=r},53435:function(q){q.exports=function W(t,A,g){return A<g?t<A?A:t>g?g:t:t<g?g:t>A?A:t}},6475:function(q,W,t){"use strict";var A=t(53435);function g(P,C){null==C&&(C=!0);var u=P[0],y=P[1],e=P[2],r=P[3];return null==r&&(r=C?1:255),C&&(u*=255,y*=255,e*=255,r*=255),16777216*(u=255&A(u,0,255))+((y=255&A(y,0,255))<<16)+((e=255&A(e,0,255))<<8)+(255&A(r,0,255))}q.exports=g,q.exports.to=g,q.exports.from=function i(P,C){var u=(P=+P)>>>24,y=(16711680&P)>>>16,e=(65280&P)>>>8,r=255&P;return!1===C?[u,y,e,r]:[u/255,y/255,e/255,r/255]}},76857:function(q){"use strict";q.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},25075:function(q,W,t){"use strict";var A=t(36652),g=t(53435),i=t(90660);q.exports=function(u,y){("float"===y||!y)&&(y="array"),"uint"===y&&(y="uint8"),"uint_clamped"===y&&(y="uint8_clamped");var r=new(i(y))(4),l="uint8"!==y&&"uint8_clamped"!==y;return(!u.length||"string"==typeof u)&&((u=A(u))[0]/=255,u[1]/=255,u[2]/=255),function P(C){return!!(C instanceof Uint8Array||C instanceof Uint8ClampedArray||Array.isArray(C)&&(C[0]>1||0===C[0])&&(C[1]>1||0===C[1])&&(C[2]>1||0===C[2])&&(!C[3]||C[3]>1))}(u)?(r[0]=u[0],r[1]=u[1],r[2]=u[2],r[3]=null!=u[3]?u[3]:255,l&&(r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255),r):(l?(r[0]=u[0],r[1]=u[1],r[2]=u[2],r[3]=null!=u[3]?u[3]:1):(r[0]=g(Math.floor(255*u[0]),0,255),r[1]=g(Math.floor(255*u[1]),0,255),r[2]=g(Math.floor(255*u[2]),0,255),r[3]=null==u[3]?255:g(Math.floor(255*u[3]),0,255)),r)}},90736:function(q,W,t){"use strict";var A=t(76857),g=t(10973),i=t(46775);q.exports=function C(u){var y,l,e=[],r=1;if("string"==typeof u)if(A[u])e=A[u].slice(),l="rgb";else if("transparent"===u)r=0,l="rgb",e=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(u)){var a=u.slice(1);r=1,(s=a.length)<=4?(e=[parseInt(a[0]+a[0],16),parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16)],4===s&&(r=parseInt(a[3]+a[3],16)/255)):(e=[parseInt(a[0]+a[1],16),parseInt(a[2]+a[3],16),parseInt(a[4]+a[5],16)],8===s&&(r=parseInt(a[6]+a[7],16)/255)),e[0]||(e[0]=0),e[1]||(e[1]=0),e[2]||(e[2]=0),l="rgb"}else if(y=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(u)){var f=y[1],m="rgb"===f;l=a=f.replace(/a$/,"");var s="cmyk"===a?4:"gray"===a?1:3;e=y[2].trim().split(/\s*,\s*/).map(function(o,v){if(/%$/.test(o))return v===s?parseFloat(o)/100:"rgb"===a?255*parseFloat(o)/100:parseFloat(o);if("h"===a[v]){if(/deg$/.test(o))return parseFloat(o);if(void 0!==P[o])return P[o]}return parseFloat(o)}),f===a&&e.push(1),r=m||void 0===e[s]?1:e[s],e=e.slice(0,s)}else u.length>10&&/[0-9](?:\s|\/)/.test(u)&&(e=u.match(/([0-9]+)/g).map(function(w){return parseFloat(w)}),l=u.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(u))if(g(u)){var h=i(u.r,u.red,u.R,null);null!==h?(l="rgb",e=[h,i(u.g,u.green,u.G),i(u.b,u.blue,u.B)]):(l="hsl",e=[i(u.h,u.hue,u.H),i(u.s,u.saturation,u.S),i(u.l,u.lightness,u.L,u.b,u.brightness)]),r=i(u.a,u.alpha,u.opacity,1),null!=u.opacity&&(r/=100)}else(Array.isArray(u)||t.g.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(u))&&(e=[u[0],u[1],u[2]],l="rgb",r=4===u.length?u[3]:1);else l="rgb",e=[u>>>16,(65280&u)>>>8,255&u];return{space:l,values:e,alpha:r}};var P={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},36652:function(q,W,t){"use strict";var A=t(90736),g=t(80009),i=t(53435);q.exports=function(C){var u,r=A(C);return r.space?((u=Array(3))[0]=i(r.values[0],0,255),u[1]=i(r.values[1],0,255),u[2]=i(r.values[2],0,255),"h"===r.space[0]&&(u=g.rgb(u)),u.push(i(r.alpha,0,1)),u):[]}},80009:function(q,W,t){"use strict";var A=t(6866);q.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(g){var u,y,e,r,l,i=g[0]/360,P=g[1]/100,C=g[2]/100;if(0===P)return[l=255*C,l,l];u=2*C-(y=C<.5?C*(1+P):C+P-C*P),r=[0,0,0];for(var a=0;a<3;a++)(e=i+.3333333333333333*-(a-1))<0?e++:e>1&&e--,r[a]=255*(l=6*e<1?u+6*(y-u)*e:2*e<1?y:3*e<2?u+(y-u)*(.6666666666666666-e)*6:u);return r}},A.hsl=function(g){var r,a,i=g[0]/255,P=g[1]/255,C=g[2]/255,u=Math.min(i,P,C),y=Math.max(i,P,C),e=y-u;return y===u?r=0:i===y?r=(P-C)/e:P===y?r=2+(C-i)/e:C===y&&(r=4+(i-P)/e),(r=Math.min(60*r,360))<0&&(r+=360),a=(u+y)/2,[r,100*(y===u?0:a<=.5?e/(y+u):e/(2-y-u)),100*a]}},6866:function(q){"use strict";q.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},24138:function(q){q.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},72791:function(q,W,t){"use strict";q.exports={parse:t(41004),stringify:t(53313)}},63625:function(q,W,t){"use strict";var A=t(40402);q.exports={isSize:function(i){return/^[\d\.]/.test(i)||-1!==i.indexOf("/")||-1!==A.indexOf(i)}}},41004:function(q,W,t){"use strict";var A=t(90448),g=t(38732),i=t(41901),P=t(15659),C=t(96209),u=t(83794),y=t(99011),e=t(63625).isSize;q.exports=l;var r=l.cache={};function l(s){if("string"!=typeof s)throw new Error("Font argument must be a string.");if(r[s])return r[s];if(""===s)throw new Error("Cannot parse an empty string.");if(-1!==i.indexOf(s))return r[s]={system:s};for(var m,c={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},f=y(s,/\s+/);m=f.shift();){if(-1!==g.indexOf(m))return["style","variant","weight","stretch"].forEach(function(w){c[w]=m}),r[s]=c;if(-1===C.indexOf(m))if("normal"!==m&&"small-caps"!==m)if(-1===u.indexOf(m)){if(-1===P.indexOf(m)){if(e(m)){var h=y(m,"/");if(c.size=h[0],null!=h[1]?c.lineHeight=a(h[1]):"/"===f[0]&&(f.shift(),c.lineHeight=a(f.shift())),!f.length)throw new Error("Missing required font-family.");return c.family=y(f.join(" "),/\s*,\s*/).map(A),r[s]=c}throw new Error("Unknown or unsupported font token: "+m)}c.weight=m}else c.stretch=m;else c.variant=m;else c.style=m}throw new Error("Missing required font-size.")}function a(s){var c=parseFloat(s);return c.toString()===s?c:s}},53313:function(q,W,t){"use strict";var A=t(71299),g=t(63625).isSize,i=s(t(38732)),P=s(t(41901)),C=s(t(15659)),u=s(t(96209)),y=s(t(83794)),e={normal:1,"small-caps":1},r={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},l_size="1rem",l_family="serif";function a(c,f){if(c&&!f[c]&&!i[c])throw Error("Unknown keyword `"+c+"`");return c}function s(c){for(var f={},m=0;m<c.length;m++)f[c[m]]=1;return f}q.exports=function(f){if((f=A(f,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return f.system&&a(f.system,P),f.system;if(a(f.style,u),a(f.variant,e),a(f.weight,C),a(f.stretch,y),null==f.size&&(f.size=l_size),"number"==typeof f.size&&(f.size+="px"),!g)throw Error("Bad size value `"+f.size+"`");f.family||(f.family=l_family),Array.isArray(f.family)&&(f.family.length||(f.family=[l_family]),f.family=f.family.map(function(h){return r[h]?h:'"'+h+'"'}).join(", "));var m=[];return m.push(f.style),f.variant!==f.style&&m.push(f.variant),f.weight!==f.variant&&f.weight!==f.style&&m.push(f.weight),f.stretch!==f.weight&&f.stretch!==f.variant&&f.stretch!==f.style&&m.push(f.stretch),m.push(f.size+(null==f.lineHeight||"normal"===f.lineHeight||f.lineHeight+""=="1"?"":"/"+f.lineHeight)),m.push(f.family),m.filter(Boolean).join(" ")}},55174:function(q,W,t){"use strict";var l,A=t(24582),g=t(10424),i=t(82527),P=t(19012),C=t(21780),u=t(16906),y=Function.prototype.bind,e=Object.defineProperty,r=Object.prototype.hasOwnProperty;l=function(a,s,c){var m,f=g(s)&&i(s.value);return delete(m=P(s)).writable,delete m.value,m.get=function(){return!c.overwriteDefinition&&r.call(this,a)?f:(s.value=y.call(f,c.resolveContext?c.resolveContext(this):this),e(this,a,s),this[a])},m},q.exports=function(a){var s=C(arguments[1]);return A(s.resolveContext)&&i(s.resolveContext),u(a,function(c,f){return l(f,c,s)})}},62072:function(q,W,t){"use strict";var A=t(24582),g=t(84985),i=t(95879),P=t(21780),C=t(66741),u=q.exports=function(y,e){var r,l,a,s,c;return arguments.length<2||"string"!=typeof y?(s=e,e=y,y=null):s=arguments[2],A(y)?(r=C.call(y,"c"),l=C.call(y,"e"),a=C.call(y,"w")):(r=a=!0,l=!1),c={value:e,configurable:r,enumerable:l,writable:a},s?i(P(s),c):c};u.gs=function(y,e,r){var l,a,s,c;return"string"!=typeof y?(s=r,r=e,e=y,y=null):s=arguments[3],A(e)?g(e)?A(r)?g(r)||(s=r,r=void 0):r=void 0:(s=e,e=r=void 0):e=void 0,A(y)?(l=C.call(y,"c"),a=C.call(y,"e")):(l=!0,a=!1),c={get:e,set:r,configurable:l,enumerable:a},s?i(P(s),c):c}},33064:function(q,W,t){"use strict";function A(T,n){return T<n?-1:T>n?1:T>=n?0:NaN}function o(T,n){var F,D,E=T.length,d=-1;if(null==n){for(;++d<E;)if(null!=(F=T[d])&&F>=F)for(D=F;++d<E;)null!=(F=T[d])&&F>D&&(D=F)}else for(;++d<E;)if(null!=(F=n(T[d],d,T))&&F>=F)for(D=F;++d<E;)null!=(F=n(T[d],d,T))&&F>D&&(D=F);return D}function v(T){return null===T?NaN:+T}function M(T,n){var D,E=T.length,d=E,F=-1,N=0;if(null==n)for(;++F<E;)isNaN(D=v(T[F]))?--d:N+=D;else for(;++F<E;)isNaN(D=v(n(T[F],F,T)))?--d:N+=D;if(d)return N/d}function b(T){for(var E,D,N,n=T.length,d=-1,F=0;++d<n;)F+=T[d].length;for(D=new Array(F);--n>=0;)for(E=(N=T[n]).length;--E>=0;)D[--F]=N[E];return D}function L(T,n){var F,D,E=T.length,d=-1;if(null==n){for(;++d<E;)if(null!=(F=T[d])&&F>=F)for(D=F;++d<E;)null!=(F=T[d])&&D>F&&(D=F)}else for(;++d<E;)if(null!=(F=n(T[d],d,T))&&F>=F)for(D=F;++d<E;)null!=(F=n(T[d],d,T))&&D>F&&(D=F);return D}function x(T,n,E){T=+T,n=+n,E=(F=arguments.length)<2?(n=T,T=0,1):F<3?1:+E;for(var d=-1,F=0|Math.max(0,Math.ceil((n-T)/E)),D=new Array(F);++d<F;)D[d]=T+d*E;return D}function S(T,n){var F,E=T.length,d=-1,D=0;if(null==n)for(;++d<E;)(F=+T[d])&&(D+=F);else for(;++d<E;)(F=+n(T[d],d,T))&&(D+=F);return D}t.d(W,{j2:function(){return A},Fp:function(){return o},J6:function(){return M},TS:function(){return b},VV:function(){return L},w6:function(){return x},Sm:function(){return S}}),function g(T){return 1===T.length&&(T=function i(T){return function(n,E){return A(T(n),E)}}(T)),{left:function(n,E,d,F){for(null==d&&(d=0),null==F&&(F=n.length);d<F;){var D=d+F>>>1;T(n[D],E)<0?d=D+1:F=D}return d},right:function(n,E,d,F){for(null==d&&(d=0),null==F&&(F=n.length);d<F;){var D=d+F>>>1;T(n[D],E)>0?F=D:d=D+1}return d}}}(A),Math.sqrt(50),Math.sqrt(10),Math.sqrt(2)},15140:function(q,W,t){"use strict";t.d(W,{UI:function(){return P},b1:function(){return C}});var A="$";function g(){}function i(f,m){var h=new g;if(f instanceof g)f.each(function(M,b){h.set(b,M)});else if(Array.isArray(f)){var o,w=-1,p=f.length;if(null==m)for(;++w<p;)h.set(w,f[w]);else for(;++w<p;)h.set(m(o=f[w],w,f),o)}else if(f)for(var v in f)h.set(v,f[v]);return h}g.prototype=i.prototype={constructor:g,has:function(f){return A+f in this},get:function(f){return this[A+f]},set:function(f,m){return this[A+f]=m,this},remove:function(f){var m=A+f;return m in this&&delete this[m]},clear:function(){for(var f in this)f[0]===A&&delete this[f]},keys:function(){var f=[];for(var m in this)m[0]===A&&f.push(m.slice(1));return f},values:function(){var f=[];for(var m in this)m[0]===A&&f.push(this[m]);return f},entries:function(){var f=[];for(var m in this)m[0]===A&&f.push({key:m.slice(1),value:this[m]});return f},size:function(){var f=0;for(var m in this)m[0]===A&&++f;return f},empty:function(){for(var f in this)if(f[0]===A)return!1;return!0},each:function(f){for(var m in this)m[0]===A&&f(this[m],m.slice(1),this)}};var P=i;function C(){var h,w,p,f=[],m=[];function o(M,b,L,x){if(b>=f.length)return null!=h&&M.sort(h),null!=w?w(M):M;for(var E,d,D,S=-1,T=M.length,n=f[b++],F=P(),N=L();++S<T;)(D=F.get(E=n(d=M[S])+""))?D.push(d):F.set(E,[d]);return F.each(function(k,O){x(N,O,o(k,b,L,x))}),N}function v(M,b){if(++b>f.length)return M;var L,x=m[b-1];return null!=w&&b>=f.length?L=M.entries():(L=[],M.each(function(S,T){L.push({key:T,values:v(S,b)})})),null!=x?L.sort(function(S,T){return x(S.key,T.key)}):L}return p={object:function(M){return o(M,0,u,y)},map:function(M){return o(M,0,e,r)},entries:function(M){return v(o(M,0,e,r),0)},key:function(M){return f.push(M),p},sortKeys:function(M){return m[f.length-1]=M,p},sortValues:function(M){return h=M,p},rollup:function(M){return w=M,p}}}function u(){return{}}function y(f,m,h){f[m]=h}function e(){return P()}function r(f,m,h){f.set(m,h)}function l(){}var a=P.prototype;l.prototype=function s(f,m){var h=new l;if(f instanceof l)f.each(function(o){h.add(o)});else if(f){var w=-1,p=f.length;if(null==m)for(;++w<p;)h.add(f[w]);else for(;++w<p;)h.add(m(f[w],w,f))}return h}.prototype={constructor:l,has:a.has,add:function(f){return this[A+(f+="")]=f,this},remove:a.remove,clear:a.clear,values:a.keys,size:a.size,empty:a.empty,each:a.each}},49887:function(q,W,t){"use strict";function A(Ot,qt){var ie;function oe(){var pe,Fe,de=ie.length,Kt=0,Et=0;for(pe=0;pe<de;++pe)Kt+=(Fe=ie[pe]).x,Et+=Fe.y;for(Kt=Kt/de-Ot,Et=Et/de-qt,pe=0;pe<de;++pe)(Fe=ie[pe]).x-=Kt,Fe.y-=Et}return null==Ot&&(Ot=0),null==qt&&(qt=0),oe.initialize=function(pe){ie=pe},oe.x=function(pe){return arguments.length?(Ot=+pe,oe):Ot},oe.y=function(pe){return arguments.length?(qt=+pe,oe):qt},oe}function g(Ot){return function(){return Ot}}function i(){return 1e-6*(Math.random()-.5)}function C(Ot,qt,ie,oe){if(isNaN(qt)||isNaN(ie))return Ot;var pe,Ft,Nt,Rt,wt,ft,pt,kt,Zt,de=Ot._root,Fe={data:oe},Kt=Ot._x0,Et=Ot._y0,St=Ot._x1,Dt=Ot._y1;if(!de)return Ot._root=Fe,Ot;for(;de.length;)if((ft=qt>=(Ft=(Kt+St)/2))?Kt=Ft:St=Ft,(pt=ie>=(Nt=(Et+Dt)/2))?Et=Nt:Dt=Nt,pe=de,!(de=de[kt=pt<<1|ft]))return pe[kt]=Fe,Ot;if(Rt=+Ot._x.call(null,de.data),wt=+Ot._y.call(null,de.data),qt===Rt&&ie===wt)return Fe.next=de,pe?pe[kt]=Fe:Ot._root=Fe,Ot;do{pe=pe?pe[kt]=new Array(4):Ot._root=new Array(4),(ft=qt>=(Ft=(Kt+St)/2))?Kt=Ft:St=Ft,(pt=ie>=(Nt=(Et+Dt)/2))?Et=Nt:Dt=Nt}while((kt=pt<<1|ft)==(Zt=(wt>=Nt)<<1|Rt>=Ft));return pe[Zt]=de,pe[kt]=Fe,Ot}function l(Ot,qt,ie,oe,pe){this.node=Ot,this.x0=qt,this.y0=ie,this.x1=oe,this.y1=pe}function p(Ot){return Ot[0]}function v(Ot){return Ot[1]}function b(Ot,qt,ie){var oe=new L(null==qt?p:qt,null==ie?v:ie,NaN,NaN,NaN,NaN);return null==Ot?oe:oe.addAll(Ot)}function L(Ot,qt,ie,oe,pe,de){this._x=Ot,this._y=qt,this._x0=ie,this._y0=oe,this._x1=pe,this._y1=de,this._root=void 0}function x(Ot){for(var qt={data:Ot.data},ie=qt;Ot=Ot.next;)ie=ie.next={data:Ot.data};return qt}t.r(W),t.d(W,{forceCenter:function(){return A},forceCollide:function(){return E},forceLink:function(){return N},forceManyBody:function(){return Vt},forceRadial:function(){return te},forceSimulation:function(){return Pt},forceX:function(){return Qt},forceY:function(){return Bt}});var S=b.prototype=L.prototype;function T(Ot){return Ot.x+Ot.vx}function n(Ot){return Ot.y+Ot.vy}function E(Ot){var qt,ie,oe=1,pe=1;function de(){for(var Et,Dt,Ft,Nt,Rt,wt,ft,St=qt.length,pt=0;pt<pe;++pt)for(Dt=b(qt,T,n).visitAfter(Fe),Et=0;Et<St;++Et)ft=(wt=ie[(Ft=qt[Et]).index])*wt,Nt=Ft.x+Ft.vx,Rt=Ft.y+Ft.vy,Dt.visit(kt);function kt(Zt,ee,se,Be,Ke){var xe=Zt.data,Pe=Zt.r,Ge=wt+Pe;if(!xe)return ee>Nt+Ge||Be<Nt-Ge||se>Rt+Ge||Ke<Rt-Ge;if(xe.index>Ft.index){var gr=Nt-xe.x-xe.vx,ue=Rt-xe.y-xe.vy,Ne=gr*gr+ue*ue;Ne<Ge*Ge&&(0===gr&&(Ne+=(gr=i())*gr),0===ue&&(Ne+=(ue=i())*ue),Ne=(Ge-(Ne=Math.sqrt(Ne)))/Ne*oe,Ft.vx+=(gr*=Ne)*(Ge=(Pe*=Pe)/(ft+Pe)),Ft.vy+=(ue*=Ne)*Ge,xe.vx-=gr*(Ge=1-Ge),xe.vy-=ue*Ge)}}}function Fe(Et){if(Et.data)return Et.r=ie[Et.data.index];for(var St=Et.r=0;St<4;++St)Et[St]&&Et[St].r>Et.r&&(Et.r=Et[St].r)}function Kt(){if(qt){var Et,Dt,St=qt.length;for(ie=new Array(St),Et=0;Et<St;++Et)ie[(Dt=qt[Et]).index]=+Ot(Dt,Et,qt)}}return"function"!=typeof Ot&&(Ot=g(null==Ot?1:+Ot)),de.initialize=function(Et){qt=Et,Kt()},de.iterations=function(Et){return arguments.length?(pe=+Et,de):pe},de.strength=function(Et){return arguments.length?(oe=+Et,de):oe},de.radius=function(Et){return arguments.length?(Ot="function"==typeof Et?Et:g(+Et),Kt(),de):Ot},de}S.copy=function(){var ie,oe,Ot=new L(this._x,this._y,this._x0,this._y0,this._x1,this._y1),qt=this._root;if(!qt)return Ot;if(!qt.length)return Ot._root=x(qt),Ot;for(ie=[{source:qt,target:Ot._root=new Array(4)}];qt=ie.pop();)for(var pe=0;pe<4;++pe)(oe=qt.source[pe])&&(oe.length?ie.push({source:oe,target:qt.target[pe]=new Array(4)}):qt.target[pe]=x(oe));return Ot},S.add=function P(Ot){var qt=+this._x.call(null,Ot),ie=+this._y.call(null,Ot);return C(this.cover(qt,ie),qt,ie,Ot)},S.addAll=function u(Ot){var qt,ie,pe,de,oe=Ot.length,Fe=new Array(oe),Kt=new Array(oe),Et=1/0,St=1/0,Dt=-1/0,Ft=-1/0;for(ie=0;ie<oe;++ie)isNaN(pe=+this._x.call(null,qt=Ot[ie]))||isNaN(de=+this._y.call(null,qt))||(Fe[ie]=pe,Kt[ie]=de,pe<Et&&(Et=pe),pe>Dt&&(Dt=pe),de<St&&(St=de),de>Ft&&(Ft=de));if(Et>Dt||St>Ft)return this;for(this.cover(Et,St).cover(Dt,Ft),ie=0;ie<oe;++ie)C(this,Fe[ie],Kt[ie],Ot[ie]);return this},S.cover=function y(Ot,qt){if(isNaN(Ot=+Ot)||isNaN(qt=+qt))return this;var ie=this._x0,oe=this._y0,pe=this._x1,de=this._y1;if(isNaN(ie))pe=(ie=Math.floor(Ot))+1,de=(oe=Math.floor(qt))+1;else{for(var Et,St,Fe=pe-ie,Kt=this._root;ie>Ot||Ot>=pe||oe>qt||qt>=de;)switch(St=(qt<oe)<<1|Ot<ie,Et=new Array(4),Et[St]=Kt,Kt=Et,Fe*=2,St){case 0:pe=ie+Fe,de=oe+Fe;break;case 1:ie=pe-Fe,de=oe+Fe;break;case 2:pe=ie+Fe,oe=de-Fe;break;case 3:ie=pe-Fe,oe=de-Fe}this._root&&this._root.length&&(this._root=Kt)}return this._x0=ie,this._y0=oe,this._x1=pe,this._y1=de,this},S.data=function e(){var Ot=[];return this.visit(function(qt){if(!qt.length)do{Ot.push(qt.data)}while(qt=qt.next)}),Ot},S.extent=function r(Ot){return arguments.length?this.cover(+Ot[0][0],+Ot[0][1]).cover(+Ot[1][0],+Ot[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},S.find=function a(Ot,qt,ie){var oe,Fe,Kt,Et,St,wt,ft,pe=this._x0,de=this._y0,Dt=this._x1,Ft=this._y1,Nt=[],Rt=this._root;for(Rt&&Nt.push(new l(Rt,pe,de,Dt,Ft)),null==ie?ie=1/0:(pe=Ot-ie,de=qt-ie,Dt=Ot+ie,Ft=qt+ie,ie*=ie);wt=Nt.pop();)if(!(!(Rt=wt.node)||(Fe=wt.x0)>Dt||(Kt=wt.y0)>Ft||(Et=wt.x1)<pe||(St=wt.y1)<de))if(Rt.length){var pt=(Fe+Et)/2,kt=(Kt+St)/2;Nt.push(new l(Rt[3],pt,kt,Et,St),new l(Rt[2],Fe,kt,pt,St),new l(Rt[1],pt,Kt,Et,kt),new l(Rt[0],Fe,Kt,pt,kt)),(ft=(qt>=kt)<<1|Ot>=pt)&&(wt=Nt[Nt.length-1],Nt[Nt.length-1]=Nt[Nt.length-1-ft],Nt[Nt.length-1-ft]=wt)}else{var Zt=Ot-+this._x.call(null,Rt.data),ee=qt-+this._y.call(null,Rt.data),se=Zt*Zt+ee*ee;if(se<ie){var Be=Math.sqrt(ie=se);pe=Ot-Be,de=qt-Be,Dt=Ot+Be,Ft=qt+Be,oe=Rt.data}}return oe},S.remove=function s(Ot){if(isNaN(Dt=+this._x.call(null,Ot))||isNaN(Ft=+this._y.call(null,Ot)))return this;var qt,oe,pe,de,Dt,Ft,Nt,Rt,wt,ft,pt,kt,ie=this._root,Fe=this._x0,Kt=this._y0,Et=this._x1,St=this._y1;if(!ie)return this;if(ie.length)for(;;){if((wt=Dt>=(Nt=(Fe+Et)/2))?Fe=Nt:Et=Nt,(ft=Ft>=(Rt=(Kt+St)/2))?Kt=Rt:St=Rt,qt=ie,!(ie=ie[pt=ft<<1|wt]))return this;if(!ie.length)break;(qt[pt+1&3]||qt[pt+2&3]||qt[pt+3&3])&&(oe=qt,kt=pt)}for(;ie.data!==Ot;)if(pe=ie,!(ie=ie.next))return this;return(de=ie.next)&&delete ie.next,pe?(de?pe.next=de:delete pe.next,this):qt?(de?qt[pt]=de:delete qt[pt],(ie=qt[0]||qt[1]||qt[2]||qt[3])&&ie===(qt[3]||qt[2]||qt[1]||qt[0])&&!ie.length&&(oe?oe[kt]=ie:this._root=ie),this):(this._root=de,this)},S.removeAll=function c(Ot){for(var qt=0,ie=Ot.length;qt<ie;++qt)this.remove(Ot[qt]);return this},S.root=function f(){return this._root},S.size=function m(){var Ot=0;return this.visit(function(qt){if(!qt.length)do{++Ot}while(qt=qt.next)}),Ot},S.visit=function h(Ot){var ie,pe,de,Fe,Kt,Et,qt=[],oe=this._root;for(oe&&qt.push(new l(oe,this._x0,this._y0,this._x1,this._y1));ie=qt.pop();)if(!Ot(oe=ie.node,de=ie.x0,Fe=ie.y0,Kt=ie.x1,Et=ie.y1)&&oe.length){var St=(de+Kt)/2,Dt=(Fe+Et)/2;(pe=oe[3])&&qt.push(new l(pe,St,Dt,Kt,Et)),(pe=oe[2])&&qt.push(new l(pe,de,Dt,St,Et)),(pe=oe[1])&&qt.push(new l(pe,St,Fe,Kt,Dt)),(pe=oe[0])&&qt.push(new l(pe,de,Fe,St,Dt))}return this},S.visitAfter=function w(Ot){var oe,qt=[],ie=[];for(this._root&&qt.push(new l(this._root,this._x0,this._y0,this._x1,this._y1));oe=qt.pop();){var pe=oe.node;if(pe.length){var de,Fe=oe.x0,Kt=oe.y0,Et=oe.x1,St=oe.y1,Dt=(Fe+Et)/2,Ft=(Kt+St)/2;(de=pe[0])&&qt.push(new l(de,Fe,Kt,Dt,Ft)),(de=pe[1])&&qt.push(new l(de,Dt,Kt,Et,Ft)),(de=pe[2])&&qt.push(new l(de,Fe,Ft,Dt,St)),(de=pe[3])&&qt.push(new l(de,Dt,Ft,Et,St))}ie.push(oe)}for(;oe=ie.pop();)Ot(oe.node,oe.x0,oe.y0,oe.x1,oe.y1);return this},S.x=function o(Ot){return arguments.length?(this._x=Ot,this):this._x},S.y=function M(Ot){return arguments.length?(this._y=Ot,this):this._y};var d=t(15140);function F(Ot){return Ot.index}function D(Ot,qt){var ie=Ot.get(qt);if(!ie)throw new Error("missing: "+qt);return ie}function N(Ot){var oe,de,Fe,Kt,Et,qt=F,ie=function Dt(ft){return 1/Math.min(Kt[ft.source.index],Kt[ft.target.index])},pe=g(30),St=1;function Ft(ft){for(var pt=0,kt=Ot.length;pt<St;++pt)for(var ee,se,Be,Ke,xe,Pe,Ge,Zt=0;Zt<kt;++Zt)Ke=(Be=(ee=Ot[Zt]).target).x+Be.vx-(se=ee.source).x-se.vx||i(),xe=Be.y+Be.vy-se.y-se.vy||i(),xe*=Pe=((Pe=Math.sqrt(Ke*Ke+xe*xe))-de[Zt])/Pe*ft*oe[Zt],Be.vx-=(Ke*=Pe)*(Ge=Et[Zt]),Be.vy-=xe*Ge,se.vx+=Ke*(Ge=1-Ge),se.vy+=xe*Ge}function Nt(){if(Fe){var ft,ee,pt=Fe.length,kt=Ot.length,Zt=(0,d.UI)(Fe,qt);for(ft=0,Kt=new Array(pt);ft<kt;++ft)(ee=Ot[ft]).index=ft,"object"!=typeof ee.source&&(ee.source=D(Zt,ee.source)),"object"!=typeof ee.target&&(ee.target=D(Zt,ee.target)),Kt[ee.source.index]=(Kt[ee.source.index]||0)+1,Kt[ee.target.index]=(Kt[ee.target.index]||0)+1;for(ft=0,Et=new Array(kt);ft<kt;++ft)Et[ft]=Kt[(ee=Ot[ft]).source.index]/(Kt[ee.source.index]+Kt[ee.target.index]);oe=new Array(kt),Rt(),de=new Array(kt),wt()}}function Rt(){if(Fe)for(var ft=0,pt=Ot.length;ft<pt;++ft)oe[ft]=+ie(Ot[ft],ft,Ot)}function wt(){if(Fe)for(var ft=0,pt=Ot.length;ft<pt;++ft)de[ft]=+pe(Ot[ft],ft,Ot)}return null==Ot&&(Ot=[]),Ft.initialize=function(ft){Fe=ft,Nt()},Ft.links=function(ft){return arguments.length?(Ot=ft,Nt(),Ft):Ot},Ft.id=function(ft){return arguments.length?(qt=ft,Ft):qt},Ft.iterations=function(ft){return arguments.length?(St=+ft,Ft):St},Ft.strength=function(ft){return arguments.length?(ie="function"==typeof ft?ft:g(+ft),Rt(),Ft):ie},Ft.distance=function(ft){return arguments.length?(pe="function"==typeof ft?ft:g(+ft),wt(),Ft):pe},Ft}var k={value:function(){}};function O(){for(var oe,Ot=0,qt=arguments.length,ie={};Ot<qt;++Ot){if(!(oe=arguments[Ot]+"")||oe in ie||/[\s.]/.test(oe))throw new Error("illegal type: "+oe);ie[oe]=[]}return new B(ie)}function B(Ot){this._=Ot}function z(Ot,qt){return Ot.trim().split(/^|\s+/).map(function(ie){var oe="",pe=ie.indexOf(".");if(pe>=0&&(oe=ie.slice(pe+1),ie=ie.slice(0,pe)),ie&&!qt.hasOwnProperty(ie))throw new Error("unknown type: "+ie);return{type:ie,name:oe}})}function U(Ot,qt){for(var pe,ie=0,oe=Ot.length;ie<oe;++ie)if((pe=Ot[ie]).name===qt)return pe.value}function H(Ot,qt,ie){for(var oe=0,pe=Ot.length;oe<pe;++oe)if(Ot[oe].name===qt){Ot[oe]=k,Ot=Ot.slice(0,oe).concat(Ot.slice(oe+1));break}return null!=ie&&Ot.push({name:qt,value:ie}),Ot}B.prototype=O.prototype={constructor:B,on:function(Ot,qt){var pe,ie=this._,oe=z(Ot+"",ie),de=-1,Fe=oe.length;if(!(arguments.length<2)){if(null!=qt&&"function"!=typeof qt)throw new Error("invalid callback: "+qt);for(;++de<Fe;)if(pe=(Ot=oe[de]).type)ie[pe]=H(ie[pe],Ot.name,qt);else if(null==qt)for(pe in ie)ie[pe]=H(ie[pe],Ot.name,null);return this}for(;++de<Fe;)if((pe=(Ot=oe[de]).type)&&(pe=U(ie[pe],Ot.name)))return pe},copy:function(){var Ot={},qt=this._;for(var ie in qt)Ot[ie]=qt[ie].slice();return new B(Ot)},call:function(Ot,qt){if((pe=arguments.length-2)>0)for(var pe,de,ie=new Array(pe),oe=0;oe<pe;++oe)ie[oe]=arguments[oe+2];if(!this._.hasOwnProperty(Ot))throw new Error("unknown type: "+Ot);for(oe=0,pe=(de=this._[Ot]).length;oe<pe;++oe)de[oe].value.apply(qt,ie)},apply:function(Ot,qt,ie){if(!this._.hasOwnProperty(Ot))throw new Error("unknown type: "+Ot);for(var oe=this._[Ot],pe=0,de=oe.length;pe<de;++pe)oe[pe].value.apply(qt,ie)}};var j,Z,J=O,nt=0,it=0,ut=0,G=0,K=0,at=0,$="object"==typeof performance&&performance.now?performance:Date,X="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(Ot){setTimeout(Ot,17)};function rt(){return K||(X(et),K=$.now()+at)}function et(){K=0}function st(){this._call=this._time=this._next=null}function dt(Ot,qt,ie){var oe=new st;return oe.restart(Ot,qt,ie),oe}function gt(){K=(G=$.now())+at,nt=it=0;try{!function bt(){rt(),++nt;for(var qt,Ot=j;Ot;)(qt=K-Ot._time)>=0&&Ot._call.call(null,qt),Ot=Ot._next;--nt}()}finally{nt=0,function It(){for(var Ot,ie,qt=j,oe=1/0;qt;)qt._call?(oe>qt._time&&(oe=qt._time),Ot=qt,qt=qt._next):(ie=qt._next,qt._next=null,qt=Ot?Ot._next=ie:j=ie);Z=Ot,Mt(oe)}(),K=0}}function Lt(){var Ot=$.now(),qt=Ot-G;qt>1e3&&(at-=qt,G=Ot)}function Mt(Ot){nt||(it&&(it=clearTimeout(it)),Ot-K>24?(Ot<1/0&&(it=setTimeout(gt,Ot-$.now()-at)),ut&&(ut=clearInterval(ut))):(ut||(G=$.now(),ut=setInterval(Lt,1e3)),nt=1,X(gt)))}function xt(Ot){return Ot.x}function At(Ot){return Ot.y}st.prototype=dt.prototype={constructor:st,restart:function(Ot,qt,ie){if("function"!=typeof Ot)throw new TypeError("callback is not a function");ie=(null==ie?rt():+ie)+(null==qt?0:+qt),!this._next&&Z!==this&&(Z?Z._next=this:j=this,Z=this),this._call=Ot,this._time=ie,Mt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Mt())}};var Wt=Math.PI*(3-Math.sqrt(5));function Pt(Ot){var qt,ie=1,oe=.001,pe=1-Math.pow(oe,1/300),de=0,Fe=.6,Kt=(0,d.UI)(),Et=dt(Dt),St=J("tick","end");function Dt(){Ft(),St.call("tick",qt),ie<oe&&(Et.stop(),St.call("end",qt))}function Ft(wt){var ft,kt,pt=Ot.length;void 0===wt&&(wt=1);for(var Zt=0;Zt<wt;++Zt)for(ie+=(de-ie)*pe,Kt.each(function(ee){ee(ie)}),ft=0;ft<pt;++ft)null==(kt=Ot[ft]).fx?kt.x+=kt.vx*=Fe:(kt.x=kt.fx,kt.vx=0),null==kt.fy?kt.y+=kt.vy*=Fe:(kt.y=kt.fy,kt.vy=0);return qt}function Nt(){for(var pt,wt=0,ft=Ot.length;wt<ft;++wt){if((pt=Ot[wt]).index=wt,null!=pt.fx&&(pt.x=pt.fx),null!=pt.fy&&(pt.y=pt.fy),isNaN(pt.x)||isNaN(pt.y)){var kt=10*Math.sqrt(wt),Zt=wt*Wt;pt.x=kt*Math.cos(Zt),pt.y=kt*Math.sin(Zt)}(isNaN(pt.vx)||isNaN(pt.vy))&&(pt.vx=pt.vy=0)}}function Rt(wt){return wt.initialize&&wt.initialize(Ot),wt}return null==Ot&&(Ot=[]),Nt(),qt={tick:Ft,restart:function(){return Et.restart(Dt),qt},stop:function(){return Et.stop(),qt},nodes:function(wt){return arguments.length?(Ot=wt,Nt(),Kt.each(Rt),qt):Ot},alpha:function(wt){return arguments.length?(ie=+wt,qt):ie},alphaMin:function(wt){return arguments.length?(oe=+wt,qt):oe},alphaDecay:function(wt){return arguments.length?(pe=+wt,qt):+pe},alphaTarget:function(wt){return arguments.length?(de=+wt,qt):de},velocityDecay:function(wt){return arguments.length?(Fe=1-wt,qt):1-Fe},force:function(wt,ft){return arguments.length>1?(null==ft?Kt.remove(wt):Kt.set(wt,Rt(ft)),qt):Kt.get(wt)},find:function(wt,ft,pt){var ee,se,Be,Ke,xe,kt=0,Zt=Ot.length;for(null==pt?pt=1/0:pt*=pt,kt=0;kt<Zt;++kt)(Be=(ee=wt-(Ke=Ot[kt]).x)*ee+(se=ft-Ke.y)*se)<pt&&(xe=Ke,pt=Be);return xe},on:function(wt,ft){return arguments.length>1?(St.on(wt,ft),qt):St.on(wt)}}}function Vt(){var Ot,qt,ie,pe,oe=g(-30),de=1,Fe=1/0,Kt=.81;function Et(Nt){var Rt,wt=Ot.length,ft=b(Ot,xt,At).visitAfter(Dt);for(ie=Nt,Rt=0;Rt<wt;++Rt)qt=Ot[Rt],ft.visit(Ft)}function St(){if(Ot){var Nt,wt,Rt=Ot.length;for(pe=new Array(Rt),Nt=0;Nt<Rt;++Nt)pe[(wt=Ot[Nt]).index]=+oe(wt,Nt,Ot)}}function Dt(Nt){var wt,ft,kt,Zt,ee,Rt=0,pt=0;if(Nt.length){for(kt=Zt=ee=0;ee<4;++ee)(wt=Nt[ee])&&(ft=Math.abs(wt.value))&&(Rt+=wt.value,pt+=ft,kt+=ft*wt.x,Zt+=ft*wt.y);Nt.x=kt/pt,Nt.y=Zt/pt}else{(wt=Nt).x=wt.data.x,wt.y=wt.data.y;do{Rt+=pe[wt.data.index]}while(wt=wt.next)}Nt.value=Rt}function Ft(Nt,Rt,wt,ft){if(!Nt.value)return!0;var pt=Nt.x-qt.x,kt=Nt.y-qt.y,Zt=ft-Rt,ee=pt*pt+kt*kt;if(Zt*Zt/Kt<ee)return ee<Fe&&(0===pt&&(ee+=(pt=i())*pt),0===kt&&(ee+=(kt=i())*kt),ee<de&&(ee=Math.sqrt(de*ee)),qt.vx+=pt*Nt.value*ie/ee,qt.vy+=kt*Nt.value*ie/ee),!0;if(!(Nt.length||ee>=Fe)){(Nt.data!==qt||Nt.next)&&(0===pt&&(ee+=(pt=i())*pt),0===kt&&(ee+=(kt=i())*kt),ee<de&&(ee=Math.sqrt(de*ee)));do{Nt.data!==qt&&(qt.vx+=pt*(Zt=pe[Nt.data.index]*ie/ee),qt.vy+=kt*Zt)}while(Nt=Nt.next)}}return Et.initialize=function(Nt){Ot=Nt,St()},Et.strength=function(Nt){return arguments.length?(oe="function"==typeof Nt?Nt:g(+Nt),St(),Et):oe},Et.distanceMin=function(Nt){return arguments.length?(de=Nt*Nt,Et):Math.sqrt(de)},Et.distanceMax=function(Nt){return arguments.length?(Fe=Nt*Nt,Et):Math.sqrt(Fe)},Et.theta=function(Nt){return arguments.length?(Kt=Nt*Nt,Et):Math.sqrt(Kt)},Et}function te(Ot,qt,ie){var oe,de,Fe,pe=g(.1);function Kt(St){for(var Dt=0,Ft=oe.length;Dt<Ft;++Dt){var Nt=oe[Dt],Rt=Nt.x-qt||1e-6,wt=Nt.y-ie||1e-6,ft=Math.sqrt(Rt*Rt+wt*wt),pt=(Fe[Dt]-ft)*de[Dt]*St/ft;Nt.vx+=Rt*pt,Nt.vy+=wt*pt}}function Et(){if(oe){var St,Dt=oe.length;for(de=new Array(Dt),Fe=new Array(Dt),St=0;St<Dt;++St)Fe[St]=+Ot(oe[St],St,oe),de[St]=isNaN(Fe[St])?0:+pe(oe[St],St,oe)}}return"function"!=typeof Ot&&(Ot=g(+Ot)),null==qt&&(qt=0),null==ie&&(ie=0),Kt.initialize=function(St){oe=St,Et()},Kt.strength=function(St){return arguments.length?(pe="function"==typeof St?St:g(+St),Et(),Kt):pe},Kt.radius=function(St){return arguments.length?(Ot="function"==typeof St?St:g(+St),Et(),Kt):Ot},Kt.x=function(St){return arguments.length?(qt=+St,Kt):qt},Kt.y=function(St){return arguments.length?(ie=+St,Kt):ie},Kt}function Qt(Ot){var ie,oe,pe,qt=g(.1);function de(Kt){for(var Dt,Et=0,St=ie.length;Et<St;++Et)(Dt=ie[Et]).vx+=(pe[Et]-Dt.x)*oe[Et]*Kt}function Fe(){if(ie){var Kt,Et=ie.length;for(oe=new Array(Et),pe=new Array(Et),Kt=0;Kt<Et;++Kt)oe[Kt]=isNaN(pe[Kt]=+Ot(ie[Kt],Kt,ie))?0:+qt(ie[Kt],Kt,ie)}}return"function"!=typeof Ot&&(Ot=g(null==Ot?0:+Ot)),de.initialize=function(Kt){ie=Kt,Fe()},de.strength=function(Kt){return arguments.length?(qt="function"==typeof Kt?Kt:g(+Kt),Fe(),de):qt},de.x=function(Kt){return arguments.length?(Ot="function"==typeof Kt?Kt:g(+Kt),Fe(),de):Ot},de}function Bt(Ot){var ie,oe,pe,qt=g(.1);function de(Kt){for(var Dt,Et=0,St=ie.length;Et<St;++Et)(Dt=ie[Et]).vy+=(pe[Et]-Dt.y)*oe[Et]*Kt}function Fe(){if(ie){var Kt,Et=ie.length;for(oe=new Array(Et),pe=new Array(Et),Kt=0;Kt<Et;++Kt)oe[Kt]=isNaN(pe[Kt]=+Ot(ie[Kt],Kt,ie))?0:+qt(ie[Kt],Kt,ie)}}return"function"!=typeof Ot&&(Ot=g(null==Ot?0:+Ot)),de.initialize=function(Kt){ie=Kt,Fe()},de.strength=function(Kt){return arguments.length?(qt="function"==typeof Kt?Kt:g(+Kt),Fe(),de):qt},de.y=function(Kt){return arguments.length?(Ot="function"==typeof Kt?Kt:g(+Kt),Fe(),de):Ot},de}},60721:function(q,W,t){"use strict";function g(b,L){if((x=(b=L?b.toExponential(L-1):b.toExponential()).indexOf("e"))<0)return null;var x,S=b.slice(0,x);return[S.length>1?S[0]+S.slice(2):S,+b.slice(x+1)]}t.d(W,{WU:function(){return o},FF:function(){return w}});var l,u=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function y(b){if(!(L=u.exec(b)))throw new Error("invalid format: "+b);var L;return new e({fill:L[1],align:L[2],sign:L[3],symbol:L[4],zero:L[5],width:L[6],comma:L[7],precision:L[8]&&L[8].slice(1),trim:L[9],type:L[10]})}function e(b){this.fill=void 0===b.fill?" ":b.fill+"",this.align=void 0===b.align?">":b.align+"",this.sign=void 0===b.sign?"-":b.sign+"",this.symbol=void 0===b.symbol?"":b.symbol+"",this.zero=!!b.zero,this.width=void 0===b.width?void 0:+b.width,this.comma=!!b.comma,this.precision=void 0===b.precision?void 0:+b.precision,this.trim=!!b.trim,this.type=void 0===b.type?"":b.type+""}function s(b,L){var x=g(b,L);if(!x)return b+"";var S=x[0],T=x[1];return T<0?"0."+new Array(-T).join("0")+S:S.length>T+1?S.slice(0,T+1)+"."+S.slice(T+1):S+new Array(T-S.length+2).join("0")}y.prototype=e.prototype,e.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var c={"%":function(b,L){return(100*b).toFixed(L)},b:function(b){return Math.round(b).toString(2)},c:function(b){return b+""},d:function A(b){return Math.abs(b=Math.round(b))>=1e21?b.toLocaleString("en").replace(/,/g,""):b.toString(10)},e:function(b,L){return b.toExponential(L)},f:function(b,L){return b.toFixed(L)},g:function(b,L){return b.toPrecision(L)},o:function(b){return Math.round(b).toString(8)},p:function(b,L){return s(100*b,L)},r:s,s:function a(b,L){var x=g(b,L);if(!x)return b+"";var S=x[0],T=x[1],n=T-(l=3*Math.max(-8,Math.min(8,Math.floor(T/3))))+1,E=S.length;return n===E?S:n>E?S+new Array(n-E+1).join("0"):n>0?S.slice(0,n)+"."+S.slice(n):"0."+new Array(1-n).join("0")+g(b,Math.max(0,L+n-1))[0]},X:function(b){return Math.round(b).toString(16).toUpperCase()},x:function(b){return Math.round(b).toString(16)}};function f(b){return b}var p,o,m=Array.prototype.map,h=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function w(b){var L=void 0===b.grouping||void 0===b.thousands?f:function P(b,L){return function(x,S){for(var T=x.length,n=[],E=0,d=b[0],F=0;T>0&&d>0&&(F+d+1>S&&(d=Math.max(1,S-F)),n.push(x.substring(T-=d,T+d)),!((F+=d+1)>S));)d=b[E=(E+1)%b.length];return n.reverse().join(L)}}(m.call(b.grouping,Number),b.thousands+""),x=void 0===b.currency?"":b.currency[0]+"",S=void 0===b.currency?"":b.currency[1]+"",T=void 0===b.decimal?".":b.decimal+"",n=void 0===b.numerals?f:function C(b){return function(L){return L.replace(/[0-9]/g,function(x){return b[+x]})}}(m.call(b.numerals,String)),E=void 0===b.percent?"%":b.percent+"",d=void 0===b.minus?"-":b.minus+"",F=void 0===b.nan?"NaN":b.nan+"";function D(k){var O=(k=y(k)).fill,B=k.align,z=k.sign,U=k.symbol,H=k.zero,J=k.width,nt=k.comma,it=k.precision,ut=k.trim,Q=k.type;"n"===Q?(nt=!0,Q="g"):c[Q]||(void 0===it&&(it=12),ut=!0,Q="g"),(H||"0"===O&&"="===B)&&(H=!0,O="0",B="=");var j="$"===U?x:"#"===U&&/[boxX]/.test(Q)?"0"+Q.toLowerCase():"",Z="$"===U?S:/[%p]/.test(Q)?E:"",G=c[Q],K=/[defgprs%]/.test(Q);function at($){var et,st,dt,X=j,rt=Z;if("c"===Q)rt=G($)+rt,$="";else{var bt=($=+$)<0||1/$<0;if($=isNaN($)?F:G(Math.abs($),it),ut&&($=function r(b){t:for(var T,L=b.length,x=1,S=-1;x<L;++x)switch(b[x]){case".":S=T=x;break;case"0":0===S&&(S=x),T=x;break;default:if(!+b[x])break t;S>0&&(S=0)}return S>0?b.slice(0,S)+b.slice(T+1):b}($)),bt&&0==+$&&"+"!==z&&(bt=!1),X=(bt?"("===z?z:d:"-"===z||"("===z?"":z)+X,rt=("s"===Q?h[8+l/3]:"")+rt+(bt&&"("===z?")":""),K)for(et=-1,st=$.length;++et<st;)if(48>(dt=$.charCodeAt(et))||dt>57){rt=(46===dt?T+$.slice(et+1):$.slice(et))+rt,$=$.slice(0,et);break}}nt&&!H&&($=L($,1/0));var gt=X.length+$.length+rt.length,Lt=gt<J?new Array(J-gt+1).join(O):"";switch(nt&&H&&($=L(Lt+$,Lt.length?J-rt.length:1/0),Lt=""),B){case"<":$=X+$+rt+Lt;break;case"=":$=X+Lt+$+rt;break;case"^":$=Lt.slice(0,gt=Lt.length>>1)+X+$+rt+Lt.slice(gt);break;default:$=Lt+X+$+rt}return n($)}return it=void 0===it?6:/[gprs]/.test(Q)?Math.max(1,Math.min(21,it)):Math.max(0,Math.min(20,it)),at.toString=function(){return k+""},at}return{format:D,formatPrefix:function N(k,O){var B=D(((k=y(k)).type="f",k)),z=3*Math.max(-8,Math.min(8,Math.floor(function i(b){return(b=g(Math.abs(b)))?b[1]:NaN}(O)/3))),U=Math.pow(10,-z),H=h[8+z/3];return function(J){return B(U*J)+H}}}}!function M(b){return p=w(b),o=p.format,p}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"})},65704:function(q,W,t){"use strict";t.r(W),t.d(W,{geoAiry:function(){return H},geoAiryRaw:function(){return U},geoAitoff:function(){return nt},geoAitoffRaw:function(){return J},geoArmadillo:function(){return ut},geoArmadilloRaw:function(){return it},geoAugust:function(){return j},geoAugustRaw:function(){return Q},geoBaker:function(){return at},geoBakerRaw:function(){return K},geoBerghaus:function(){return rt},geoBerghausRaw:function(){return X},geoBertin1953:function(){return Mt},geoBertin1953Raw:function(){return It},geoBoggs:function(){return Qt},geoBoggsRaw:function(){return te},geoBonne:function(){return oe},geoBonneRaw:function(){return ie},geoBottomley:function(){return de},geoBottomleyRaw:function(){return pe},geoBromley:function(){return Kt},geoBromleyRaw:function(){return Fe},geoChamberlin:function(){return pt},geoChamberlinAfrica:function(){return ft},geoChamberlinRaw:function(){return Rt},geoCollignon:function(){return Zt},geoCollignonRaw:function(){return kt},geoCraig:function(){return se},geoCraigRaw:function(){return ee},geoCraster:function(){return xe},geoCrasterRaw:function(){return Ke},geoCylindricalEqualArea:function(){return Ge},geoCylindricalEqualAreaRaw:function(){return Pe},geoCylindricalStereographic:function(){return ue},geoCylindricalStereographicRaw:function(){return gr},geoEckert1:function(){return Ye},geoEckert1Raw:function(){return Ne},geoEckert2:function(){return rr},geoEckert2Raw:function(){return xr},geoEckert3:function(){return re},geoEckert3Raw:function(){return ce},geoEckert4:function(){return be},geoEckert4Raw:function(){return ve},geoEckert5:function(){return Te},geoEckert5Raw:function(){return Ae},geoEckert6:function(){return Ie},geoEckert6Raw:function(){return Re},geoEisenlohr:function(){return nr},geoEisenlohrRaw:function(){return ar},geoFahey:function(){return Ht},geoFaheyRaw:function(){return Ut},geoFoucaut:function(){return Ce},geoFoucautRaw:function(){return Se},geoFoucautSinusoidal:function(){return qe},geoFoucautSinusoidalRaw:function(){return We},geoGilbert:function(){return yr},geoGingery:function(){return Mr},geoGingeryRaw:function(){return dr},geoGinzburg4:function(){return Nr},geoGinzburg4Raw:function(){return nn},geoGinzburg5:function(){return hn},geoGinzburg5Raw:function(){return Dn},geoGinzburg6:function(){return Ar},geoGinzburg6Raw:function(){return hr},geoGinzburg8:function(){return Or},geoGinzburg8Raw:function(){return Br},geoGinzburg9:function(){return dn},geoGinzburg9Raw:function(){return an},geoGringorten:function(){return Nn},geoGringortenQuincuncial:function(){return cu},geoGringortenRaw:function(){return wn},geoGuyou:function(){return Fn},geoGuyouRaw:function(){return en},geoHammer:function(){return bt},geoHammerRaw:function(){return st},geoHammerRetroazimuthal:function(){return Gn},geoHammerRetroazimuthalRaw:function(){return Mn},geoHealpix:function(){return Lr},geoHealpixRaw:function(){return fn},geoHill:function(){return He},geoHillRaw:function(){return Er},geoHomolosine:function(){return yn},geoHomolosineRaw:function(){return Zr},geoHufnagel:function(){return ea},geoHufnagelRaw:function(){return Kn},geoHyperelliptical:function(){return qi},geoHyperellipticalRaw:function(){return Ei},geoInterrupt:function(){return co},geoInterruptedBoggs:function(){return Yo},geoInterruptedHomolosine:function(){return Ci},geoInterruptedMollweide:function(){return tl},geoInterruptedMollweideHemispheres:function(){return Li},geoInterruptedQuarticAuthalic:function(){return kl},geoInterruptedSinuMollweide:function(){return ho},geoInterruptedSinusoidal:function(){return $l},geoKavrayskiy7:function(){return Ro},geoKavrayskiy7Raw:function(){return Fi},geoLagrange:function(){return Su},geoLagrangeRaw:function(){return Ui},geoLarrivee:function(){return no},geoLarriveeRaw:function(){return rl},geoLaskowski:function(){return Eu},geoLaskowskiRaw:function(){return wi},geoLittrow:function(){return rs},geoLittrowRaw:function(){return Io},geoLoximuthal:function(){return Cu},geoLoximuthalRaw:function(){return Ll},geoMiller:function(){return Dl},geoMillerRaw:function(){return Pl},geoModifiedStereographic:function(){return ns},geoModifiedStereographicAlaska:function(){return Pu},geoModifiedStereographicGs48:function(){return ff},geoModifiedStereographicGs50:function(){return cf},geoModifiedStereographicLee:function(){return hf},geoModifiedStereographicMiller:function(){return Du},geoModifiedStereographicRaw:function(){return Lu},geoMollweide:function(){return Wt},geoMollweideRaw:function(){return Gt},geoMtFlatPolarParabolic:function(){return ql},geoMtFlatPolarParabolicRaw:function(){return Rl},geoMtFlatPolarQuartic:function(){return vf},geoMtFlatPolarQuarticRaw:function(){return Il},geoMtFlatPolarSinusoidal:function(){return xo},geoMtFlatPolarSinusoidalRaw:function(){return as},geoNaturalEarth:function(){return nl.Z},geoNaturalEarth2:function(){return Fl},geoNaturalEarth2Raw:function(){return ms},geoNaturalEarthRaw:function(){return nl.K},geoNellHammer:function(){return is},geoNellHammerRaw:function(){return lo},geoNicolosi:function(){return Pi},geoNicolosiRaw:function(){return bo},geoPatterson:function(){return Fo},geoPattersonRaw:function(){return xs},geoPeirceQuincuncial:function(){return hu},geoPierceQuincuncial:function(){return hu},geoPolyconic:function(){return iu},geoPolyconicRaw:function(){return au},geoPolyhedral:function(){return Ns},geoPolyhedralButterfly:function(){return Xo},geoPolyhedralCollignon:function(){return os},geoPolyhedralWaterman:function(){return ss},geoProject:function(){return pf},geoQuantize:function(){return gf},geoQuincuncial:function(){return fu},geoRectangularPolyconic:function(){return fs},geoRectangularPolyconicRaw:function(){return us},geoRobinson:function(){return Ul},geoRobinsonRaw:function(){return sl},geoSatellite:function(){return cs},geoSatelliteRaw:function(){return Vu},geoSinuMollweide:function(){return ir},geoSinuMollweideRaw:function(){return je},geoSinusoidal:function(){return qt},geoSinusoidalRaw:function(){return Ot},geoStitch:function(){return Ao},geoTimes:function(){return hs},geoTimesRaw:function(){return vl},geoTwoPointAzimuthal:function(){return Gl},geoTwoPointAzimuthalRaw:function(){return Ws},geoTwoPointAzimuthalUsa:function(){return Wu},geoTwoPointEquidistant:function(){return Wl},geoTwoPointEquidistantRaw:function(){return Ti},geoTwoPointEquidistantUsa:function(){return pu},geoVanDerGrinten:function(){return vs},geoVanDerGrinten2:function(){return yf},geoVanDerGrinten2Raw:function(){return gu},geoVanDerGrinten3:function(){return Zs},geoVanDerGrinten3Raw:function(){return Ys},geoVanDerGrinten4:function(){return yl},geoVanDerGrinten4Raw:function(){return pl},geoVanDerGrintenRaw:function(){return Ss},geoWagner:function(){return Es},geoWagner4:function(){return Xs},geoWagner4Raw:function(){return Oo},geoWagner6:function(){return Zu},geoWagner6Raw:function(){return Cs},geoWagner7:function(){return ao},geoWagnerRaw:function(){return yu},geoWiechel:function(){return Xu},geoWiechelRaw:function(){return Zl},geoWinkel3:function(){return xu},geoWinkel3Raw:function(){return ml}});var A=t(15002),g=Math.abs,i=Math.atan,P=Math.atan2,u=(Math,Math.cos),y=Math.exp,e=Math.floor,r=Math.log,l=Math.max,a=Math.min,s=Math.pow,c=Math.round,f=Math.sign||function(Xt){return Xt>0?1:Xt<0?-1:0},m=Math.sin,h=Math.tan,w=1e-6,p=1e-12,o=Math.PI,v=o/2,M=o/4,b=Math.SQRT1_2,L=D(2),x=D(o),S=2*o,T=180/o,n=o/180;function d(Xt){return Xt>1?v:Xt<-1?-v:Math.asin(Xt)}function F(Xt){return Xt>1?0:Xt<-1?o:Math.acos(Xt)}function D(Xt){return Xt>0?Math.sqrt(Xt):0}function N(Xt){return((Xt=y(2*Xt))-1)/(Xt+1)}function k(Xt){return(y(Xt)-y(-Xt))/2}function O(Xt){return(y(Xt)+y(-Xt))/2}function U(Xt){var _t=h(Xt/2),fe=2*r(u(Xt/2))/(_t*_t);function he(Le,Me){var ke=u(Le),fr=u(Me),pr=m(Me),lr=fr*ke,vr=-((1-lr?r((1+lr)/2)/(1-lr):-.5)+fe/(1+lr));return[vr*fr*m(Le),vr*pr]}return he.invert=function(Le,Me){var lr,ke=D(Le*Le+Me*Me),fr=-Xt/2,pr=50;if(!ke)return[0,0];do{var vr=fr/2,Fr=u(vr),Hr=m(vr),jr=Hr/Fr,$r=-r(g(Fr));fr-=lr=(2/jr*$r-fe*jr-ke)/(-$r/(Hr*Hr)+1-fe/(2*Fr*Fr))*(Fr<0?.7:1)}while(g(lr)>w&&--pr>0);var bn=m(fr);return[P(Le*bn,ke*u(fr)),d(Me*bn/ke)]},he}function H(){var Xt=v,_t=(0,A.r)(U),fe=_t(Xt);return fe.radius=function(he){return arguments.length?_t(Xt=he*n):Xt*T},fe.scale(179.976).clipAngle(147)}function J(Xt,_t){var fe=u(_t),he=function E(Xt){return Xt?Xt/Math.sin(Xt):1}(F(fe*u(Xt/=2)));return[2*fe*m(Xt)*he,m(_t)*he]}function nt(){return(0,A.Z)(J).scale(152.63)}function it(Xt){var _t=m(Xt),fe=u(Xt),he=Xt>=0?1:-1,Le=h(he*Xt),Me=(1+_t-fe)/2;function ke(fr,pr){var lr=u(pr),vr=u(fr/=2);return[(1+lr)*m(fr),(he*pr>-P(vr,Le)-.001?0:10*-he)+Me+m(pr)*fe-(1+lr)*_t*vr]}return ke.invert=function(fr,pr){var lr=0,vr=0,Fr=50;do{var Hr=u(lr),jr=m(lr),$r=u(vr),bn=m(vr),zn=1+$r,qn=zn*jr-fr,xa=Me+bn*fe-zn*_t*Hr-pr,Ma=zn*Hr/2,Aa=-jr*bn,Ra=_t*zn*jr/2,qa=fe*$r+_t*Hr*bn,ai=Aa*Ra-qa*Ma,ra=(xa*Aa-qn*qa)/ai/2,fi=(qn*Ra-xa*Ma)/ai;g(fi)>2&&(fi/=2),lr-=ra,vr-=fi}while((g(ra)>w||g(fi)>w)&&--Fr>0);return he*vr>-P(u(lr),Le)-.001?[2*lr,vr]:null},ke}function ut(){var Xt=20*n,_t=Xt>=0?1:-1,fe=h(_t*Xt),he=(0,A.r)(it),Le=he(Xt),Me=Le.stream;return Le.parallel=function(ke){return arguments.length?(fe=h((_t=(Xt=ke*n)>=0?1:-1)*Xt),he(Xt)):Xt*T},Le.stream=function(ke){var fr=Le.rotate(),pr=Me(ke),lr=(Le.rotate([0,0]),Me(ke)),vr=Le.precision();return Le.rotate(fr),pr.sphere=function(){lr.polygonStart(),lr.lineStart();for(var Fr=-180*_t;_t*Fr<180;Fr+=90*_t)lr.point(Fr,90*_t);if(Xt)for(;_t*(Fr-=3*_t*vr)>=-180;)lr.point(Fr,_t*-P(u(Fr*n/2),fe)*T);lr.lineEnd(),lr.polygonEnd()},pr},Le.scale(218.695).center([0,28.0974])}function Q(Xt,_t){var fe=h(_t/2),he=D(1-fe*fe),Le=1+he*u(Xt/=2),Me=m(Xt)*he/Le,ke=fe/Le,fr=Me*Me,pr=ke*ke;return[1.3333333333333333*Me*(3+fr-3*pr),1.3333333333333333*ke*(3+3*fr-pr)]}function j(){return(0,A.Z)(Q).scale(66.1603)}J.invert=function(Xt,_t){if(!(Xt*Xt+4*_t*_t>o*o+w)){var fe=Xt,he=_t,Le=25;do{var zn,Me=m(fe),ke=m(fe/2),fr=u(fe/2),pr=m(he),lr=u(he),vr=m(2*he),Fr=pr*pr,Hr=lr*lr,jr=ke*ke,$r=1-Hr*fr*fr,bn=$r?F(lr*fr)*D(zn=1/$r):zn=0,qn=2*bn*lr*ke-Xt,xa=bn*pr-_t,Ma=zn*(Hr*jr+bn*lr*fr*Fr),Aa=zn*(.5*Me*vr-2*bn*pr*ke),Ra=.25*zn*(vr*ke-bn*pr*Hr*Me),qa=zn*(Fr*fr+bn*jr*lr),ai=Aa*Ra-qa*Ma;if(!ai)break;var ra=(xa*Aa-qn*qa)/ai,fi=(qn*Ra-xa*Ma)/ai;fe-=ra,he-=fi}while((g(ra)>w||g(fi)>w)&&--Le>0);return[fe,he]}},Q.invert=function(Xt,_t){if(_t*=.375,!(Xt*=.375)&&g(_t)>1)return null;var Le=1+Xt*Xt+_t*_t,Me=D((Le-D(Le*Le-4*_t*_t))/2),ke=d(Me)/3,fr=Me?function z(Xt){return r(Xt+D(Xt*Xt-1))}(g(_t/Me))/3:function B(Xt){return r(Xt+D(Xt*Xt+1))}(g(Xt))/3,pr=u(ke),lr=O(fr),vr=lr*lr-pr*pr;return[2*f(Xt)*P(k(fr)*pr,.25-vr),2*f(_t)*P(lr*m(ke),.25+vr)]};var Z=D(8),G=r(1+L);function K(Xt,_t){var fe=g(_t);return fe<M?[Xt,r(h(M+_t/2))]:[Xt*u(fe)*(2*L-1/m(fe)),f(_t)*(2*L*(fe-M)-r(h(fe/2)))]}function at(){return(0,A.Z)(K).scale(112.314)}K.invert=function(Xt,_t){if((Me=g(_t))<G)return[Xt,2*i(y(_t))-v];var Le,Me,fe=M,he=25;do{var ke=u(fe/2),fr=h(fe/2);fe-=Le=(Z*(fe-M)-r(fr)-Me)/(Z-ke*ke/(2*fr))}while(g(Le)>p&&--he>0);return[Xt/(u(fe)*(Z-1/m(fe))),f(_t)*fe]};var $=t(17889);function X(Xt){var _t=2*o/Xt;function fe(he,Le){var Me=(0,$.N)(he,Le);if(g(he)>v){var ke=P(Me[1],Me[0]),fr=D(Me[0]*Me[0]+Me[1]*Me[1]),pr=_t*c((ke-v)/_t)+v,lr=P(m(ke-=pr),2-u(ke));ke=pr+d(o/fr*m(lr))-lr,Me[0]=fr*u(ke),Me[1]=fr*m(ke)}return Me}return fe.invert=function(he,Le){var Me=D(he*he+Le*Le);if(Me>v){var ke=P(Le,he),fr=_t*c((ke-v)/_t)+v,pr=ke>fr?-1:1,lr=Me*u(fr-ke),vr=1/h(pr*F((lr-o)/D(o*(o-2*lr)+Me*Me)));ke=fr+2*i((vr+pr*D(vr*vr-3))/3),he=Me*u(ke),Le=Me*m(ke)}return $.N.invert(he,Le)},fe}function rt(){var Xt=5,_t=(0,A.r)(X),fe=_t(Xt),he=fe.stream,Le=.01,Me=-u(Le*n),ke=m(Le*n);return fe.lobes=function(fr){return arguments.length?_t(Xt=+fr):Xt},fe.stream=function(fr){var pr=fe.rotate(),lr=he(fr),vr=(fe.rotate([0,0]),he(fr));return fe.rotate(pr),lr.sphere=function(){vr.polygonStart(),vr.lineStart();for(var Fr=0,Hr=360/Xt,jr=2*o/Xt,$r=90-180/Xt,bn=v;Fr<Xt;++Fr,$r-=Hr,bn-=jr)vr.point(P(ke*u(bn),Me)*T,d(ke*m(bn))*T),$r<-90?(vr.point(-90,-180-$r-Le),vr.point(-90,-180-$r+Le)):(vr.point(90,$r+Le),vr.point(90,$r-Le));vr.lineEnd(),vr.polygonEnd()},lr},fe.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var et=t(12956);function st(Xt,_t){if(arguments.length<2&&(_t=Xt),1===_t)return et.l;if(_t===1/0)return dt;function fe(he,Le){var Me=(0,et.l)(he/_t,Le);return Me[0]*=Xt,Me}return fe.invert=function(he,Le){var Me=et.l.invert(he/Xt,Le);return Me[0]*=_t,Me},fe}function dt(Xt,_t){return[Xt*u(_t)/u(_t/=2),2*m(_t)]}function bt(){var Xt=2,_t=(0,A.r)(st),fe=_t(Xt);return fe.coefficient=function(he){return arguments.length?_t(Xt=+he):Xt},fe.scale(169.529)}function gt(Xt,_t,fe){var Le,Me,ke,he=100;fe=void 0===fe?0:+fe,_t=+_t;do{(Me=Xt(fe))===(ke=Xt(fe+w))&&(ke=Me+w),fe-=Le=-1*w*(Me-_t)/(Me-ke)}while(he-- >0&&g(Le)>w);return he<0?NaN:fe}function Lt(Xt,_t,fe){return void 0===_t&&(_t=40),void 0===fe&&(fe=p),function(he,Le,Me,ke){var fr,pr,lr;Me=void 0===Me?0:+Me,ke=void 0===ke?0:+ke;for(var vr=0;vr<_t;vr++){var Fr=Xt(Me,ke),Hr=Fr[0]-he,jr=Fr[1]-Le;if(g(Hr)<fe&&g(jr)<fe)break;var $r=Hr*Hr+jr*jr;if($r>fr)Me-=pr/=2,ke-=lr/=2;else{fr=$r;var bn=(Me>0?-1:1)*fe,zn=(ke>0?-1:1)*fe,qn=Xt(Me+bn,ke),xa=Xt(Me,ke+zn),Ma=(qn[0]-Fr[0])/bn,Aa=(qn[1]-Fr[1])/bn,Ra=(xa[0]-Fr[0])/zn,qa=(xa[1]-Fr[1])/zn,ai=qa*Ma-Aa*Ra,ra=(g(ai)<.5?.5:1)/ai;if(Me+=pr=(jr*Ra-Hr*qa)*ra,ke+=lr=(Hr*Aa-jr*Ma)*ra,g(pr)<fe&&g(lr)<fe)break}}return[Me,ke]}}function It(){var Xt=st(1.68,2);function he(Le,Me){if(Le+Me<-1.4){var ke=(Le-Me+1.6)*(Le+Me+1.4)/8;Le+=ke,Me-=.8*ke*m(Me+o/2)}var fr=Xt(Le,Me),pr=(1-u(Le*Me))/12;return fr[1]<0&&(fr[0]*=1+pr),fr[1]>0&&(fr[1]*=1+pr/1.5*fr[0]*fr[0]),fr}return he.invert=Lt(he),he}function Mt(){return(0,A.Z)(It()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function xt(Xt,_t){var Le,fe=Xt*m(_t),he=30;do{_t-=Le=(_t+m(_t)-fe)/(1+u(_t))}while(g(Le)>w&&--he>0);return _t/2}function At(Xt,_t,fe){function he(Le,Me){return[Xt*Le*u(Me=xt(fe,Me)),_t*m(Me)]}return he.invert=function(Le,Me){return Me=d(Me/_t),[Le/(Xt*u(Me)),d((2*Me+m(2*Me))/fe)]},he}dt.invert=function(Xt,_t){var fe=2*d(_t/2);return[Xt*u(fe/2)/u(fe),fe]};var Gt=At(L/v,L,o);function Wt(){return(0,A.Z)(Gt).scale(169.529)}var Pt=2.00276;function te(Xt,_t){var fe=xt(o,_t);return[Pt*Xt/(1/u(_t)+1.11072/u(fe)),(_t+L*m(fe))/Pt]}function Qt(){return(0,A.Z)(te).scale(160.857)}function Bt(Xt){var _t=0,fe=(0,A.r)(Xt),he=fe(_t);return he.parallel=function(Le){return arguments.length?fe(_t=Le*n):_t*T},he}function Ot(Xt,_t){return[Xt*u(_t),_t]}function qt(){return(0,A.Z)(Ot).scale(152.63)}function ie(Xt){if(!Xt)return Ot;var _t=1/h(Xt);function fe(he,Le){var Me=_t+Xt-Le,ke=Me&&he*u(Le)/Me;return[Me*m(ke),_t-Me*u(ke)]}return fe.invert=function(he,Le){var Me=D(he*he+(Le=_t-Le)*Le),ke=_t+Xt-Me;return[Me/u(ke)*P(he,Le),ke]},fe}function oe(){return Bt(ie).scale(123.082).center([0,26.1441]).parallel(45)}function pe(Xt){function _t(fe,he){var Le=v-he,Me=Le&&fe*Xt*m(Le)/Le;return[Le*m(Me)/Xt,v-Le*u(Me)]}return _t.invert=function(fe,he){var Le=fe*Xt,Me=v-he,ke=D(Le*Le+Me*Me),fr=P(Le,Me);return[(ke?ke/m(ke):1)*fr/Xt,v-ke]},_t}function de(){var Xt=.5,_t=(0,A.r)(pe),fe=_t(Xt);return fe.fraction=function(he){return arguments.length?_t(Xt=+he):Xt},fe.scale(158.837)}te.invert=function(Xt,_t){var Me,ke,fe=Pt*_t,he=_t<0?-M:M,Le=25;do{ke=fe-L*m(he),he-=Me=(m(2*he)+2*he-o*m(ke))/(2*u(2*he)+2+o*u(ke)*L*u(he))}while(g(Me)>w&&--Le>0);return ke=fe-L*m(he),[Xt*(1/u(ke)+1.11072/u(he))/Pt,ke]},Ot.invert=function(Xt,_t){return[Xt/u(_t),_t]};var Fe=At(1,4/o,o);function Kt(){return(0,A.Z)(Fe).scale(152.63)}var Et=t(66624),St=t(49386);function Dt(Xt,_t,fe,he,Le,Me){var fr,ke=u(Me);if(g(Xt)>1||g(Me)>1)fr=F(fe*Le+_t*he*ke);else{var pr=m(Xt/2),lr=m(Me/2);fr=2*d(D(pr*pr+_t*he*lr*lr))}return g(fr)>w?[fr,P(he*m(Me),_t*Le-fe*he*ke)]:[0,0]}function Ft(Xt,_t,fe){return F((Xt*Xt+_t*_t-fe*fe)/(2*Xt*_t))}function Nt(Xt){return Xt-2*o*e((Xt+o)/(2*o))}function Rt(Xt,_t,fe){for(var Me,he=[[Xt[0],Xt[1],m(Xt[1]),u(Xt[1])],[_t[0],_t[1],m(_t[1]),u(_t[1])],[fe[0],fe[1],m(fe[1]),u(fe[1])]],Le=he[2],ke=0;ke<3;++ke,Le=Me)Le.v=Dt((Me=he[ke])[1]-Le[1],Le[3],Le[2],Me[3],Me[2],Me[0]-Le[0]),Le.point=[0,0];var fr=Ft(he[0].v[0],he[2].v[0],he[1].v[0]),pr=Ft(he[0].v[0],he[1].v[0],he[2].v[0]),lr=o-fr;he[2].point[1]=0,he[0].point[0]=-(he[1].point[0]=he[0].v[0]/2);var vr=[he[2].point[0]=he[0].point[0]+he[2].v[0]*u(fr),2*(he[0].point[1]=he[1].point[1]=he[2].v[0]*m(fr))];return function Fr(Hr,jr){var qn,$r=m(jr),bn=u(jr),zn=new Array(3);for(qn=0;qn<3;++qn){var xa=he[qn];if(zn[qn]=Dt(jr-xa[1],xa[3],xa[2],bn,$r,Hr-xa[0]),!zn[qn][0])return xa.point;zn[qn][1]=Nt(zn[qn][1]-xa.v[1])}var Ma=vr.slice();for(qn=0;qn<3;++qn){var Ra=Ft(he[qn].v[0],zn[qn][0],zn[2==qn?0:qn+1][0]);zn[qn][1]<0&&(Ra=-Ra),qn?1==qn?(Ma[0]-=zn[qn][0]*u(Ra=pr-Ra),Ma[1]-=zn[qn][0]*m(Ra)):(Ma[0]+=zn[qn][0]*u(Ra=lr-Ra),Ma[1]+=zn[qn][0]*m(Ra)):(Ma[0]+=zn[qn][0]*u(Ra),Ma[1]-=zn[qn][0]*m(Ra))}return Ma[0]/=3,Ma[1]/=3,Ma}}function wt(Xt){return Xt[0]*=n,Xt[1]*=n,Xt}function ft(){return pt([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function pt(Xt,_t,fe){var he=(0,Et.Z)({type:"MultiPoint",coordinates:[Xt,_t,fe]}),Le=[-he[0],-he[1]],Me=(0,St.Z)(Le),ke=Rt(wt(Me(Xt)),wt(Me(_t)),wt(Me(fe)));ke.invert=Lt(ke);var fr=(0,A.Z)(ke).rotate(Le),pr=fr.center;return delete fr.rotate,fr.center=function(lr){return arguments.length?pr(Me(lr)):Me.invert(pr())},fr.clipAngle(90)}function kt(Xt,_t){var fe=D(1-m(_t));return[2/x*Xt*fe,x*(1-fe)]}function Zt(){return(0,A.Z)(kt).scale(95.6464).center([0,30])}function ee(Xt){var _t=h(Xt);function fe(he,Le){return[he,(he?he/m(he):1)*(m(Le)*u(he)-_t*u(Le))]}return fe.invert=_t?function(he,Le){he&&(Le*=m(he)/he);var Me=u(he);return[he,2*P(D(Me*Me+_t*_t-Le*Le)-Me,_t-Le)]}:function(he,Le){return[he,d(he?Le*h(he)/he:Le)]},fe}function se(){return Bt(ee).scale(249.828).clipAngle(90)}kt.invert=function(Xt,_t){var fe=(fe=_t/x-1)*fe;return[fe>0?Xt*D(o/fe)/2:0,d(1-fe)]};var Be=D(3);function Ke(Xt,_t){return[Be*Xt*(2*u(2*_t/3)-1)/x,Be*x*m(_t/3)]}function xe(){return(0,A.Z)(Ke).scale(156.19)}function Pe(Xt){var _t=u(Xt);function fe(he,Le){return[he*_t,m(Le)/_t]}return fe.invert=function(he,Le){return[he/_t,d(Le*_t)]},fe}function Ge(){return Bt(Pe).parallel(38.58).scale(195.044)}function gr(Xt){var _t=u(Xt);function fe(he,Le){return[he*_t,(1+_t)*h(Le/2)]}return fe.invert=function(he,Le){return[he/_t,2*i(Le/(1+_t))]},fe}function ue(){return Bt(gr).scale(124.75)}function Ne(Xt,_t){var fe=D(8/(3*o));return[fe*Xt*(1-g(_t)/o),fe*_t]}function Ye(){return(0,A.Z)(Ne).scale(165.664)}function xr(Xt,_t){var fe=D(4-3*m(g(_t)));return[2/D(6*o)*Xt*fe,f(_t)*D(2*o/3)*(2-fe)]}function rr(){return(0,A.Z)(xr).scale(165.664)}function ce(Xt,_t){var fe=D(o*(4+o));return[2/fe*Xt*(1+D(1-4*_t*_t/(o*o))),4/fe*_t]}function re(){return(0,A.Z)(ce).scale(180.739)}function ve(Xt,_t){var fe=(2+v)*m(_t);_t/=2;for(var he=0,Le=1/0;he<10&&g(Le)>w;he++){var Me=u(_t);_t-=Le=(_t+m(_t)*(Me+2)-fe)/(2*Me*(1+Me))}return[2/D(o*(4+o))*Xt*(1+u(_t)),2*D(o/(4+o))*m(_t)]}function be(){return(0,A.Z)(ve).scale(180.739)}function Ae(Xt,_t){return[Xt*(1+u(_t))/D(2+o),2*_t/D(2+o)]}function Te(){return(0,A.Z)(Ae).scale(173.044)}function Re(Xt,_t){for(var fe=(1+v)*m(_t),he=0,Le=1/0;he<10&&g(Le)>w;he++)_t-=Le=(_t+m(_t)-fe)/(1+u(_t));return fe=D(2+o),[Xt*(1+u(_t))/fe,2*_t/fe]}function Ie(){return(0,A.Z)(Re).scale(173.044)}Ke.invert=function(Xt,_t){var fe=3*d(_t/(Be*x));return[x*Xt/(Be*(2*u(2*fe/3)-1)),fe]},Ne.invert=function(Xt,_t){var fe=D(8/(3*o)),he=_t/fe;return[Xt/(fe*(1-g(he)/o)),he]},xr.invert=function(Xt,_t){var fe=2-g(_t)/D(2*o/3);return[Xt*D(6*o)/(2*fe),f(_t)*d((4-fe*fe)/3)]},ce.invert=function(Xt,_t){var fe=D(o*(4+o))/2;return[Xt*fe/(1+D(1-_t*_t*(4+o)/(4*o))),_t*fe/2]},ve.invert=function(Xt,_t){var fe=_t*D((4+o)/o)/2,he=d(fe),Le=u(he);return[Xt/(2/D(o*(4+o))*(1+Le)),d((he+fe*(Le+2))/(2+v))]},Ae.invert=function(Xt,_t){var fe=D(2+o),he=_t*fe/2;return[fe*Xt/(1+u(he)),he]},Re.invert=function(Xt,_t){var fe=1+v,he=D(fe/2);return[2*Xt*he/(1+u(_t*=he)),d((_t+m(_t))/fe)]};var Xe=3+2*L;function ar(Xt,_t){var fe=m(Xt/=2),he=u(Xt),Le=D(u(_t)),Me=u(_t/=2),ke=m(_t)/(Me+L*he*Le),fr=D(2/(1+ke*ke)),pr=D((L*Me+(he+fe)*Le)/(L*Me+(he-fe)*Le));return[Xe*(fr*(pr-1/pr)-2*r(pr)),Xe*(fr*ke*(pr+1/pr)-2*i(ke))]}function nr(){return(0,A.Z)(ar).scale(62.5271)}ar.invert=function(Xt,_t){if(!(Me=Q.invert(Xt/1.2,1.065*_t)))return null;var Me,fe=Me[0],he=Me[1],Le=20;Xt/=Xe,_t/=Xe;do{var ke=fe/2,fr=he/2,pr=m(ke),lr=u(ke),vr=m(fr),Fr=u(fr),Hr=u(he),jr=D(Hr),$r=vr/(Fr+L*lr*jr),bn=$r*$r,zn=D(2/(1+bn)),Ma=(L*Fr+(lr+pr)*jr)/(L*Fr+(lr-pr)*jr),Aa=D(Ma),Ra=Aa-1/Aa,qa=Aa+1/Aa,ai=zn*Ra-2*r(Aa)-Xt,ra=zn*$r*qa-2*i($r)-_t,fi=vr&&b*jr*pr*bn/vr,yi=(L*lr*Fr+jr)/(2*(Fr+L*lr*jr)*(Fr+L*lr*jr)*jr),ji=-.5*$r*zn*zn*zn,Mo=ji*fi,si=ji*yi,ot=(ot=2*Fr+L*jr*(lr-pr))*ot*Aa,yt=(L*lr*Fr*jr+Hr)/ot,zt=-L*pr*vr/(jr*ot),Jt=Ra*Mo-2*yt/Aa+zn*(yt+yt/Ma),$t=Ra*si-2*zt/Aa+zn*(zt+zt/Ma),ne=$r*qa*Mo-2*fi/(1+bn)+zn*qa*fi+zn*$r*(yt-yt/Ma),Ee=$r*qa*si-2*yi/(1+bn)+zn*qa*yi+zn*$r*(zt-zt/Ma),me=$t*ne-Ee*Jt;if(!me)break;var Oe=(ra*$t-ai*Ee)/me,Qe=(ai*ne-ra*Jt)/me;fe-=Oe,he=l(-v,a(v,he-Qe))}while((g(Oe)>w||g(Qe)>w)&&--Le>0);return g(g(he)-v)<w?[0,he]:Le&&[fe,he]};var cr=u(35*n);function Ut(Xt,_t){var fe=h(_t/2);return[Xt*cr*D(1-fe*fe),(1+cr)*fe]}function Ht(){return(0,A.Z)(Ut).scale(137.152)}function Se(Xt,_t){var fe=_t/2,he=u(fe);return[2*Xt/x*u(_t)*he*he,x*h(fe)]}function Ce(){return(0,A.Z)(Se).scale(135.264)}function We(Xt){var _t=1-Xt,fe=Me(o,0)[0]-Me(-o,0)[0],Le=D(2*(Me(0,v)[1]-Me(0,-v)[1])/fe);function Me(pr,lr){var vr=u(lr),Fr=m(lr);return[vr/(_t+Xt*vr)*pr,_t*lr+Xt*Fr]}function ke(pr,lr){var vr=Me(pr,lr);return[vr[0]*Le,vr[1]/Le]}function fr(pr){return ke(0,pr)[1]}return ke.invert=function(pr,lr){var vr=gt(fr,lr);return[pr/Le*(Xt+_t/u(vr)),vr]},ke}function qe(){var Xt=.5,_t=(0,A.r)(We),fe=_t(Xt);return fe.alpha=function(he){return arguments.length?_t(Xt=+he):Xt},fe.scale(168.725)}Ut.invert=function(Xt,_t){var fe=_t/(1+cr);return[Xt&&Xt/(cr*D(1-fe*fe)),2*i(fe)]},Se.invert=function(Xt,_t){var fe=i(_t/x),he=u(fe),Le=2*fe;return[Xt*x/2/(u(Le)*he*he),Le]};var or=t(57962),_e=t(97492);function De(Xt){return[Xt[0]/2,d(h(Xt[1]/2*n))*T]}function sr(Xt){return[2*Xt[0],2*i(m(Xt[1]*n))*T]}function yr(Xt){null==Xt&&(Xt=or.Z);var _t=Xt(),fe=(0,_e.Z)().scale(T).precision(0).clipAngle(null).translate([0,0]);function he(Me){return _t(De(Me))}function Le(Me){he[Me]=function(){return arguments.length?(_t[Me].apply(_t,arguments),he):_t[Me]()}}return _t.invert&&(he.invert=function(Me){return sr(_t.invert(Me))}),he.stream=function(Me){var ke=_t.stream(Me),fr=fe.stream({point:function(pr,lr){ke.point(pr/2,d(h(-lr/2*n))*T)},lineStart:function(){ke.lineStart()},lineEnd:function(){ke.lineEnd()},polygonStart:function(){ke.polygonStart()},polygonEnd:function(){ke.polygonEnd()}});return fr.sphere=ke.sphere,fr},he.rotate=function(Me){return arguments.length?(fe.rotate(Me),he):fe.rotate()},he.center=function(Me){return arguments.length?(_t.center(De(Me)),he):sr(_t.center())},Le("angle"),Le("clipAngle"),Le("clipExtent"),Le("fitExtent"),Le("fitHeight"),Le("fitSize"),Le("fitWidth"),Le("scale"),Le("translate"),Le("precision"),he.scale(249.5)}function dr(Xt,_t){var fe=2*o/_t,he=Xt*Xt;function Le(Me,ke){var fr=(0,$.N)(Me,ke),pr=fr[0],lr=fr[1],vr=pr*pr+lr*lr;if(vr>he){var Fr=D(vr),Hr=P(lr,pr),jr=fe*c(Hr/fe),$r=Hr-jr,bn=Xt*u($r),zn=(Xt*m($r)-$r*m(bn))/(v-bn),qn=Pr($r,zn),xa=(o-Xt)/Jr(qn,bn,o);pr=Fr;var Aa,Ma=50;do{pr-=Aa=(Xt+Jr(qn,bn,pr)*xa-Fr)/(qn(pr)*xa)}while(g(Aa)>w&&--Ma>0);lr=$r*m(pr),pr<v&&(lr-=zn*(pr-v));var Ra=m(jr),qa=u(jr);fr[0]=pr*qa-lr*Ra,fr[1]=pr*Ra+lr*qa}return fr}return Le.invert=function(Me,ke){var fr=Me*Me+ke*ke;if(fr>he){var pr=D(fr),lr=P(ke,Me),vr=fe*c(lr/fe),Fr=lr-vr;Me=pr*u(Fr),ke=pr*m(Fr);for(var Hr=Me-v,jr=m(Me),$r=ke/jr,bn=Me<v?1/0:0,zn=10;;){var qn=Xt*m($r),xa=Xt*u($r),Ma=m(xa),Aa=v-xa,Ra=(qn-$r*Ma)/Aa,qa=Pr($r,Ra);if(g(bn)<p||!--zn)break;$r-=bn=($r*jr-Ra*Hr-ke)/(jr-2*Hr*(Aa*(xa+$r*qn*u(xa)-Ma)-qn*(qn-$r*Ma))/(Aa*Aa))}Me=(pr=Xt+Jr(qa,xa,Me)*(o-Xt)/Jr(qa,xa,o))*u(lr=vr+$r),ke=pr*m(lr)}return $.N.invert(Me,ke)},Le}function Pr(Xt,_t){return function(fe){var he=Xt*u(fe);return fe<v&&(he-=_t),D(1+he*he)}}function Jr(Xt,_t,fe){for(var Le=(fe-_t)/50,Me=Xt(_t)+Xt(fe),ke=1,fr=_t;ke<50;++ke)Me+=2*Xt(fr+=Le);return.5*Me*Le}function Mr(){var Xt=6,_t=30*n,fe=u(_t),he=m(_t),Le=(0,A.r)(dr),Me=Le(_t,Xt),ke=Me.stream,pr=-u(.01*n),lr=m(.01*n);return Me.radius=function(vr){return arguments.length?(fe=u(_t=vr*n),he=m(_t),Le(_t,Xt)):_t*T},Me.lobes=function(vr){return arguments.length?Le(_t,Xt=+vr):Xt},Me.stream=function(vr){var Fr=Me.rotate(),Hr=ke(vr),jr=(Me.rotate([0,0]),ke(vr));return Me.rotate(Fr),Hr.sphere=function(){jr.polygonStart(),jr.lineStart();for(var $r=0,bn=2*o/Xt,zn=0;$r<Xt;++$r,zn-=bn)jr.point(P(lr*u(zn),pr)*T,d(lr*m(zn))*T),jr.point(P(he*u(zn-bn/2),fe)*T,d(he*m(zn-bn/2))*T);jr.lineEnd(),jr.polygonEnd()},Hr},Me.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function Wr(Xt,_t,fe,he,Le,Me,ke,fr){function pr(lr,vr){if(!vr)return[Xt*lr/o,0];var Fr=vr*vr,Hr=Xt+Fr*(_t+Fr*(fe+Fr*he)),jr=vr*(Le-1+Fr*(Me-fr+Fr*ke)),$r=(Hr*Hr+jr*jr)/(2*jr),bn=lr*d(Hr/$r)/o;return[$r*m(bn),vr*(1+Fr*fr)+$r*(1-u(bn))]}return arguments.length<8&&(fr=0),pr.invert=function(lr,vr){var jr,$r,Fr=o*lr/Xt,Hr=vr,bn=50;do{var zn=Hr*Hr,qn=Xt+zn*(_t+zn*(fe+zn*he)),xa=Hr*(Le-1+zn*(Me-fr+zn*ke)),Ma=qn*qn+xa*xa,Aa=2*xa,Ra=Ma/Aa,qa=Ra*Ra,ai=d(qn/Ra)/o,ra=Fr*ai,fi=qn*qn,yi=(2*_t+zn*(4*fe+6*zn*he))*Hr,ji=Le+zn*(3*Me+5*zn*ke),ot=(2*(qn*yi+xa*(ji-1))*Aa-Ma*(2*(ji-1)))/(Aa*Aa),yt=u(ra),zt=m(ra),Jt=Ra*yt,$t=Ra*zt,ne=Fr/o*(1/D(1-fi/qa))*(yi*Ra-qn*ot)/qa,Ee=$t-lr,me=Hr*(1+zn*fr)+Ra-Jt-vr,Oe=ot*zt+Jt*ne,Qe=Jt*ai,tr=1+ot-(ot*yt-$t*ne),Cr=$t*ai,Sr=Oe*Cr-tr*Qe;if(!Sr)break;Fr-=jr=(me*Oe-Ee*tr)/Sr,Hr-=$r=(Ee*Cr-me*Qe)/Sr}while((g(jr)>w||g($r)>w)&&--bn>0);return[Fr,Hr]},pr}var nn=Wr(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function Nr(){return(0,A.Z)(nn).scale(149.995)}var Dn=Wr(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function hn(){return(0,A.Z)(Dn).scale(153.93)}var hr=Wr(5/6*o,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Ar(){return(0,A.Z)(hr).scale(130.945)}function Br(Xt,_t){var fe=Xt*Xt,he=_t*_t;return[Xt*(1-.162388*he)*(.87-952426e-9*fe*fe),_t*(1+he/12)]}function Or(){return(0,A.Z)(Br).scale(131.747)}Br.invert=function(Xt,_t){var Me,fe=Xt,he=_t,Le=50;do{var ke=he*he;he-=Me=(he*(1+ke/12)-_t)/(1+ke/4)}while(g(Me)>w&&--Le>0);Le=50,Xt/=1-.162388*ke;do{var fr=(fr=fe*fe)*fr;fe-=Me=(fe*(.87-952426e-9*fr)-Xt)/(.87-.00476213*fr)}while(g(Me)>w&&--Le>0);return[fe,he]};var an=Wr(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function dn(){return(0,A.Z)(an).scale(131.087)}function pn(Xt){var _t=Xt(v,0)[0]-Xt(-v,0)[0];function fe(he,Le){var Me=he>0?-.5:.5,ke=Xt(he+Me*o,Le);return ke[0]-=Me*_t,ke}return Xt.invert&&(fe.invert=function(he,Le){var Me=he>0?-.5:.5,ke=Xt.invert(he+Me*_t,Le),fr=ke[0]-Me*o;return fr<-o?fr+=2*o:fr>o&&(fr-=2*o),ke[0]=fr,ke}),fe}function wn(Xt,_t){var fe=f(Xt),he=f(_t),Le=u(_t),Me=u(Xt)*Le,ke=m(Xt)*Le,fr=m(he*_t);Xt=g(P(ke,fr)),_t=d(Me),g(Xt-v)>w&&(Xt%=v);var pr=function Ln(Xt,_t){if(_t===v)return[0,0];var bn,zn,fe=m(_t),he=fe*fe,Le=he*he,Me=1+Le,ke=1+3*Le,fr=1-Le,pr=d(1/D(Me)),lr=fr+he*Me*pr,vr=(1-fe)/lr,Fr=D(vr),Hr=vr*Me,jr=D(Hr),$r=Fr*fr;if(0===Xt)return[0,-($r+he*jr)];var si,qn=u(_t),xa=1/qn,Ma=2*fe*qn,Ra=(-lr*qn-(-3*he+pr*ke)*Ma*(1-fe))/(lr*lr),fi=-xa*Ma,yi=-xa*(he*Me*Ra+vr*ke*Ma),ji=-2*xa*(fr*(.5*Ra/Fr)-2*he*Fr*Ma),Mo=4*Xt/o;if(Xt>.222*o||_t<o/4&&Xt>.175*o){if(bn=($r+he*D(Hr*(1+Le)-$r*$r))/(1+Le),Xt>o/4)return[bn,bn];var ot=bn,yt=.5*bn;bn=.5*(yt+ot),zn=50;do{var Jt=bn*(ji+fi*D(Hr-bn*bn))+yi*d(bn/jr)-Mo;if(!Jt)break;Jt<0?yt=bn:ot=bn,bn=.5*(yt+ot)}while(g(ot-yt)>w&&--zn>0)}else{bn=w,zn=25;do{var $t=bn*bn,ne=D(Hr-$t),Ee=ji+fi*ne,me=bn*Ee+yi*d(bn/jr)-Mo;bn-=si=ne?me/(Ee+(yi-fi*$t)/ne):0}while(g(si)>w&&--zn>0)}return[bn,-$r-he*D(Hr-bn*bn)]}(Xt>o/4?v-Xt:Xt,_t);return Xt>o/4&&(fr=pr[0],pr[0]=-pr[1],pr[1]=-fr),pr[0]*=fe,pr[1]*=-he,pr}function Nn(){return(0,A.Z)(pn(wn)).scale(239.75)}function Bn(Xt,_t){var fe,he,Le,Me,ke;if(_t<w)return[(Me=m(Xt))-(fe=_t*(Xt-Me*(he=u(Xt)))/4)*he,he+fe*Me,1-_t*Me*Me/2,Xt-fe];if(_t>=1-w)return fe=(1-_t)/4,Le=1/(he=O(Xt)),[(Me=N(Xt))+fe*((ke=he*k(Xt))-Xt)/(he*he),Le-fe*Me*Le*(ke-Xt),Le+fe*Me*Le*(ke+Xt),2*i(y(Xt))-v+fe*(ke-Xt)/he];var fr=[1,0,0,0,0,0,0,0,0],pr=[D(_t),0,0,0,0,0,0,0,0],lr=0;for(he=D(1-_t),ke=1;g(pr[lr]/fr[lr])>w&&lr<8;)fe=fr[lr++],pr[lr]=(fe-he)/2,fr[lr]=(fe+he)/2,he=D(fe*he),ke*=2;Le=ke*fr[lr]*Xt;do{Le=(d(Me=pr[lr]*m(he=Le)/fr[lr])+Le)/2}while(--lr);return[m(Le),Me=u(Le),Me/u(Le-he),Le]}function wr(Xt,_t){if(!_t)return Xt;if(1===_t)return r(h(Xt/2+M));for(var fe=1,he=D(1-_t),Le=D(_t),Me=0;g(Le)>w;Me++){if(Xt%o){var ke=i(he*h(Xt)/fe);ke<0&&(ke+=o),Xt+=ke+~~(Xt/o)*o}else Xt+=Xt;Le=(fe+he)/2,he=D(fe*he),Le=((fe=Le)-he)/2}return Xt/(s(2,Me)*fe)}function en(Xt,_t){var fe=(L-1)/(L+1),he=D(1-fe*fe),Le=wr(v,he*he),ke=r(h(o/4+g(_t)/2)),fr=y(-1*ke)/D(fe),pr=function tn(Xt,_t){var fe=Xt*Xt,he=_t+1,Le=1-fe-_t*_t;return[.5*((Xt>=0?v:-v)-P(Le,2*Xt)),-.25*r(Le*Le+4*fe)+.5*r(he*he+fe)]}(fr*u(-1*Xt),fr*m(-1*Xt)),lr=function Wn(Xt,_t,fe){var he=g(Xt),Me=k(g(_t));if(he){var ke=1/m(he),fr=1/(h(he)*h(he)),pr=-(fr+fe*(Me*Me*ke*ke)-1+fe),vr=(-pr+D(pr*pr-(fe-1)*fr*4))/2;return[wr(i(1/D(vr)),fe)*f(Xt),wr(i(D((vr/fr-1)/fe)),1-fe)*f(_t)]}return[0,wr(i(Me),1-fe)*f(_t)]}(pr[0],pr[1],he*he);return[-lr[1],(_t>=0?1:-1)*(.5*Le-lr[0])]}function Fn(){return(0,A.Z)(pn(en)).scale(151.496)}wn.invert=function(Xt,_t){g(Xt)>1&&(Xt=2*f(Xt)-Xt),g(_t)>1&&(_t=2*f(_t)-_t);var fe=f(Xt),he=f(_t),Le=-fe*Xt,Me=-he*_t,ke=Me/Le<1,fr=function Qn(Xt,_t){for(var fe=0,he=1,Le=.5,Me=50;;){var ke=Le*Le,fr=D(Le),pr=d(1/D(1+ke)),lr=1-ke+Le*(1+ke)*pr,vr=(1-fr)/lr,Fr=D(vr),Hr=vr*(1+ke),jr=Fr*(1-ke),bn=D(Hr-Xt*Xt),zn=_t+jr+Le*bn;if(g(he-fe)<p||0==--Me||0===zn)break;zn>0?fe=Le:he=Le,Le=.5*(fe+he)}if(!Me)return null;var qn=d(fr),xa=u(qn),Ma=1/xa,Aa=2*fr*xa,qa=(-lr*xa-(-3*Le+pr*(1+3*ke))*Aa*(1-fr))/(lr*lr);return[o/4*(Xt*(-2*Ma*(.5*qa/Fr*(1-ke)-2*Le*Fr*Aa)+-Ma*Aa*bn)+-Ma*(Le*(1+ke)*qa+vr*(1+3*ke)*Aa)*d(Xt/D(Hr))),qn]}(ke?Me:Le,ke?Le:Me),pr=fr[0],lr=fr[1],vr=u(lr);return ke&&(pr=-v-pr),[fe*(P(m(pr)*vr,-m(lr))+o),he*d(u(pr)*vr)]},en.invert=function(Xt,_t){var fe=(L-1)/(L+1),he=D(1-fe*fe),ke=function Zn(Xt,_t,fe){var he,Le,Me;return Xt?(he=Bn(Xt,fe),_t?(Le=Bn(_t,1-fe),[[he[0]*Le[2]/(Me=Le[1]*Le[1]+fe*he[0]*he[0]*Le[0]*Le[0]),he[1]*he[2]*Le[0]*Le[1]/Me],[he[1]*Le[1]/Me,-he[0]*he[2]*Le[0]*Le[2]/Me],[he[2]*Le[1]*Le[2]/Me,-fe*he[0]*he[1]*Le[0]/Me]]):[[he[0],0],[he[1],0],[he[2],0]]):[[0,(Le=Bn(_t,1-fe))[0]/Le[1]],[1/Le[1],0],[Le[2]/Le[1],0]]}(.5*wr(v,he*he)-_t,-Xt,he*he),fr=function gn(Xt,_t){var fe=_t[0]*_t[0]+_t[1]*_t[1];return[(Xt[0]*_t[0]+Xt[1]*_t[1])/fe,(Xt[1]*_t[0]-Xt[0]*_t[1])/fe]}(ke[0],ke[1]);return[P(fr[1],fr[0])/-1,2*i(y(-.5*r(fe*fr[0]*fr[0]+fe*fr[1]*fr[1])))-v]};var Tn=t(7613);function Mn(Xt){var _t=m(Xt),fe=u(Xt),he=In(Xt);function Le(Me,ke){var fr=he(Me,ke);Me=fr[0];var pr=m(ke=fr[1]),lr=u(ke),vr=u(Me),Fr=F(_t*pr+fe*lr*vr),Hr=m(Fr),jr=g(Hr)>w?Fr/Hr:1;return[jr*fe*m(Me),(g(Me)>v?jr:-jr)*(_t*lr-fe*pr*vr)]}return he.invert=In(-Xt),Le.invert=function(Me,ke){var fr=D(Me*Me+ke*ke),pr=-m(fr),lr=u(fr),vr=fr*lr,Fr=-ke*pr,Hr=fr*_t,jr=D(vr*vr+Fr*Fr-Hr*Hr),$r=P(vr*Hr+Fr*jr,Fr*Hr-vr*jr),bn=(fr>v?-1:1)*P(Me*pr,fr*u($r)*lr+ke*m($r)*pr);return he.invert(bn,$r)},Le}function In(Xt){var _t=m(Xt),fe=u(Xt);return function(he,Le){var Me=u(Le),ke=u(he)*Me,fr=m(he)*Me,pr=m(Le);return[P(fr,ke*fe-pr*_t),d(pr*fe+ke*_t)]}}function Gn(){var Xt=0,_t=(0,A.r)(Mn),fe=_t(Xt),he=fe.rotate,Le=fe.stream,Me=(0,Tn.Z)();return fe.parallel=function(ke){if(!arguments.length)return Xt*T;var fr=fe.rotate();return _t(Xt=ke*n).rotate(fr)},fe.rotate=function(ke){return arguments.length?(he.call(fe,[ke[0],ke[1]-Xt*T]),Me.center([-ke[0],-ke[1]]),fe):((ke=he.call(fe))[1]+=Xt*T,ke)},fe.stream=function(ke){return(ke=Le(ke)).sphere=function(){ke.polygonStart();var Fr,pr=Me.radius(89.99)().coordinates[0],lr=pr.length-1,vr=-1;for(ke.lineStart();++vr<lr;)ke.point((Fr=pr[vr])[0],Fr[1]);for(ke.lineEnd(),lr=(pr=Me.radius(90.01)().coordinates[0]).length-1,ke.lineStart();--vr>=0;)ke.point((Fr=pr[vr])[0],Fr[1]);ke.lineEnd(),ke.polygonEnd()},ke},fe.scale(79.4187).parallel(45).clipAngle(179.999)}var ua=t(33064),ka=t(72736),Tr=d(1-1/3)*T,_r=Pe(0);function fn(Xt){var _t=Tr*n,fe=kt(o,_t)[0]-kt(-o,_t)[0],he=_r(0,_t)[1],Le=kt(0,_t)[1],Me=x-Le,ke=S/Xt,fr=4/S,pr=he+Me*Me*4/S;function lr(vr,Fr){var Hr,jr=g(Fr);if(jr>_t){var $r=a(Xt-1,l(0,e((vr+o)/ke)));(Hr=kt(vr+=o*(Xt-1)/Xt-$r*ke,jr))[0]=Hr[0]*S/fe-S*(Xt-1)/(2*Xt)+$r*S/Xt,Hr[1]=he+4*(Hr[1]-Le)*Me/S,Fr<0&&(Hr[1]=-Hr[1])}else Hr=_r(vr,Fr);return Hr[0]*=fr,Hr[1]/=pr,Hr}return lr.invert=function(vr,Fr){vr/=fr;var Hr=g(Fr*=pr);if(Hr>he){var jr=a(Xt-1,l(0,e((vr+o)/ke))),$r=kt.invert(vr=(vr+o*(Xt-1)/Xt-jr*ke)*fe/S,.25*(Hr-he)*S/Me+Le);return $r[0]-=o*(Xt-1)/Xt-jr*ke,Fr<0&&($r[1]=-$r[1]),$r}return _r.invert(vr,Fr)},lr}function sn(Xt,_t){return[Xt,1&_t?90-w:Tr]}function En(Xt,_t){return[Xt,1&_t?-90+w:-Tr]}function xn(Xt){return[Xt[0]*(1-w),Xt[1]]}function Lr(){var Xt=4,_t=(0,A.r)(fn),fe=_t(Xt),he=fe.stream;return fe.lobes=function(Le){return arguments.length?_t(Xt=+Le):Xt},fe.stream=function(Le){var Me=fe.rotate(),ke=he(Le),fr=(fe.rotate([0,0]),he(Le));return fe.rotate(Me),ke.sphere=function(){(0,ka.Z)(function vn(Xt){var _t=[].concat((0,ua.w6)(-180,180+Xt/2,Xt).map(sn),(0,ua.w6)(180,-180-Xt/2,-Xt).map(En));return{type:"Polygon",coordinates:[180===Xt?_t.map(xn):_t]}}(180/Xt),fr)},ke},fe.scale(239.75)}function Er(Xt){var Me,_t=1+Xt,he=d(m(1/_t)),Le=2*D(o/(Me=o+4*he*_t)),ke=.5*Le*(_t+D(Xt*(2+Xt))),fr=Xt*Xt,pr=_t*_t;function lr(vr,Fr){var jr,$r,Hr=1-m(Fr);if(Hr&&Hr<2){var qn,bn=v-Fr,zn=25;do{var xa=m(bn),Ma=u(bn),Aa=he+P(xa,_t-Ma),Ra=1+pr-2*_t*Ma;bn-=qn=(bn-fr*he-_t*xa+Ra*Aa-.5*Hr*Me)/(2*_t*xa*Aa)}while(g(qn)>p&&--zn>0);jr=Le*D(Ra),$r=vr*Aa/o}else jr=Le*(Xt+Hr),$r=vr*he/o;return[jr*m($r),ke-jr*u($r)]}return lr.invert=function(vr,Fr){var Hr=vr*vr+(Fr-=ke)*Fr,jr=(1+pr-Hr/(Le*Le))/(2*_t),$r=F(jr),bn=m($r),zn=he+P(bn,_t-jr);return[d(vr/D(Hr))*o/zn,d(1-2*($r-fr*he-_t*bn+(1+pr-2*_t*jr)*zn)/Me)]},lr}function He(){var Xt=1,_t=(0,A.r)(Er),fe=_t(Xt);return fe.ratio=function(he){return arguments.length?_t(Xt=+he):Xt},fe.scale(167.774).center([0,18.67])}var Dr=.7109889596207567,Ve=.0528035274542;function je(Xt,_t){return _t>-Dr?((Xt=Gt(Xt,_t))[1]+=Ve,Xt):Ot(Xt,_t)}function ir(){return(0,A.Z)(je).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function Zr(Xt,_t){return g(_t)>Dr?((Xt=Gt(Xt,_t))[1]-=_t>0?Ve:-Ve,Xt):Ot(Xt,_t)}function yn(){return(0,A.Z)(Zr).scale(152.63)}function Kn(Xt,_t,fe,he){var Le=D(4*o/(2*fe+(1+Xt-_t/2)*m(2*fe)+(Xt+_t)/2*m(4*fe)+_t/2*m(6*fe))),Me=D(he*m(fe)*D((1+Xt*u(2*fe)+_t*u(4*fe))/(1+Xt+_t))),ke=fe*pr(1);function fr(Fr){return D(1+Xt*u(2*Fr)+_t*u(4*Fr))}function pr(Fr){var Hr=Fr*fe;return(2*Hr+(1+Xt-_t/2)*m(2*Hr)+(Xt+_t)/2*m(4*Hr)+_t/2*m(6*Hr))/fe}function lr(Fr){return fr(Fr)*m(Fr)}var vr=function(Fr,Hr){var jr=fe*gt(pr,ke*m(Hr)/fe,Hr/o);isNaN(jr)&&(jr=fe*f(Hr));var $r=Le*fr(jr);return[$r*Me*Fr/o*u(jr),$r/Me*m(jr)]};return vr.invert=function(Fr,Hr){var jr=gt(lr,Hr*Me/Le);return[Fr*o/(u(jr)*Le*Me*fr(jr)),d(fe*pr(jr/fe)/ke)]},0===fe&&(Le=D(he/o),(vr=function(Fr,Hr){return[Fr*Le,m(Hr)/Le]}).invert=function(Fr,Hr){return[Fr/Le,d(Hr*Le)]}),vr}function ea(){var Xt=1,_t=0,fe=45*n,he=2,Le=(0,A.r)(Kn),Me=Le(Xt,_t,fe,he);return Me.a=function(ke){return arguments.length?Le(Xt=+ke,_t,fe,he):Xt},Me.b=function(ke){return arguments.length?Le(Xt,_t=+ke,fe,he):_t},Me.psiMax=function(ke){return arguments.length?Le(Xt,_t,fe=+ke*n,he):fe*T},Me.ratio=function(ke){return arguments.length?Le(Xt,_t,fe,he=+ke):he},Me.scale(180.739)}function $n(Xt,_t,fe,he,Le,Me,ke,fr,pr,lr,vr){if(vr.nanEncountered)return NaN;var Fr,Hr,jr,$r,bn,zn,qn,xa,Ma,Aa;if(Hr=Xt(_t+.25*(Fr=fe-_t)),jr=Xt(fe-.25*Fr),isNaN(Hr))vr.nanEncountered=!0;else{if(!isNaN(jr))return Aa=((zn=($r=Fr*(he+4*Hr+Le)/12)+(bn=Fr*(Le+4*jr+Me)/12))-ke)/15,lr>pr?(vr.maxDepthCount++,zn+Aa):Math.abs(Aa)<fr?zn+Aa:(xa=$n(Xt,_t,qn=_t+.5*Fr,he,Hr,Le,$r,.5*fr,pr,lr+1,vr),isNaN(xa)?(vr.nanEncountered=!0,NaN):(Ma=$n(Xt,qn,fe,Le,jr,Me,bn,.5*fr,pr,lr+1,vr),isNaN(Ma)?(vr.nanEncountered=!0,NaN):xa+Ma));vr.nanEncountered=!0}}function fa(Xt,_t,fe,he,Le){void 0===he&&(he=1e-8),void 0===Le&&(Le=20);var ke=Xt(_t),fr=Xt(.5*(_t+fe)),pr=Xt(fe);return $n(Xt,_t,fe,ke,fr,pr,(ke+4*fr+pr)*(fe-_t)/6,he,Le,1,{maxDepthCount:0,nanEncountered:!1})}function Ei(Xt,_t,fe){function he(jr){return Xt+(1-Xt)*s(1-s(jr,_t),1/_t)}function Le(jr){return fa(he,0,jr,1e-4)}for(var Me=1/Le(1),ke=1e3,fr=(1+1e-8)*Me,pr=[],lr=0;lr<=ke;lr++)pr.push(Le(lr/ke)*fr);function vr(jr){var $r=0,bn=ke,zn=500;do{pr[zn]>jr?bn=zn:$r=zn,zn=$r+bn>>1}while(zn>$r);var qn=pr[zn+1]-pr[zn];return qn&&(qn=(jr-pr[zn+1])/qn),(zn+1+qn)/ke}var Fr=2*vr(1)/o*Me/fe,Hr=function(jr,$r){var bn=vr(g(m($r))),zn=he(bn)*jr;return bn/=Fr,[zn,$r>=0?bn:-bn]};return Hr.invert=function(jr,$r){var bn;return g($r*=Fr)<1&&(bn=f($r)*d(Le(g($r))*Me)),[jr/he(g($r)),bn]},Hr}function qi(){var Xt=0,_t=2.5,fe=1.183136,he=(0,A.r)(Ei),Le=he(Xt,_t,fe);return Le.alpha=function(Me){return arguments.length?he(Xt=+Me,_t,fe):Xt},Le.k=function(Me){return arguments.length?he(Xt,_t=+Me,fe):_t},Le.gamma=function(Me){return arguments.length?he(Xt,_t,fe=+Me):fe},Le.scale(152.63)}function to(Xt,_t){return g(Xt[0]-_t[0])<w&&g(Xt[1]-_t[1])<w}function eo(Xt,_t){for(var Me,ke,fr,fe=-1,he=Xt.length,Le=Xt[0],pr=[];++fe<he;){ke=((Me=Xt[fe])[0]-Le[0])/_t,fr=(Me[1]-Le[1])/_t;for(var lr=0;lr<_t;++lr)pr.push([Le[0]+lr*ke,Le[1]+lr*fr]);Le=Me}return pr.push(Me),pr}function Fs(Xt){var fe,he,Me,ke,pr,_t=[],lr=Xt[0].length;for(pr=0;pr<lr;++pr)_t.push(eo([[(he=(fe=Xt[0][pr])[0][0])+w,fe[0][1]+w],[he+w,(Me=fe[1][1])-w],[(ke=fe[2][0])-w,Me-w],[ke-w,fe[2][1]+w]],30));for(pr=Xt[1].length-1;pr>=0;--pr)_t.push(eo([[(ke=(fe=Xt[1][pr])[2][0])-w,fe[2][1]-w],[ke-w,(Me=fe[1][1])+w],[(he=fe[0][0])+w,Me+w],[he+w,fe[0][1]-w]],30));return{type:"Polygon",coordinates:[(0,ua.TS)(_t)]}}function co(Xt,_t,fe){var he,Le;function Me(pr,lr){for(var vr=lr<0?-1:1,Fr=_t[+(lr<0)],Hr=0,jr=Fr.length-1;Hr<jr&&pr>Fr[Hr][2][0];++Hr);var $r=Xt(pr-Fr[Hr][1][0],lr);return $r[0]+=Xt(Fr[Hr][1][0],vr*lr>vr*Fr[Hr][0][1]?Fr[Hr][0][1]:lr)[0],$r}fe?Me.invert=fe(Me):Xt.invert&&(Me.invert=function(pr,lr){for(var vr=Le[+(lr<0)],Fr=_t[+(lr<0)],Hr=0,jr=vr.length;Hr<jr;++Hr){var $r=vr[Hr];if($r[0][0]<=pr&&pr<$r[1][0]&&$r[0][1]<=lr&&lr<$r[1][1]){var bn=Xt.invert(pr-Xt(Fr[Hr][1][0],0)[0],lr);return bn[0]+=Fr[Hr][1][0],to(Me(bn[0],bn[1]),[pr,lr])?bn:null}}});var ke=(0,A.Z)(Me),fr=ke.stream;return ke.stream=function(pr){var lr=ke.rotate(),vr=fr(pr),Fr=(ke.rotate([0,0]),fr(pr));return ke.rotate(lr),vr.sphere=function(){(0,ka.Z)(he,Fr)},vr},ke.lobes=function(pr){return arguments.length?(he=Fs(pr),_t=pr.map(function(lr){return lr.map(function(vr){return[[vr[0][0]*n,vr[0][1]*n],[vr[1][0]*n,vr[1][1]*n],[vr[2][0]*n,vr[2][1]*n]]})}),Le=_t.map(function(lr){return lr.map(function(vr){var bn,Fr=Xt(vr[0][0],vr[0][1])[0],Hr=Xt(vr[2][0],vr[2][1])[0],jr=Xt(vr[1][0],vr[0][1])[1],$r=Xt(vr[1][0],vr[1][1])[1];return jr>$r&&(bn=jr,jr=$r,$r=bn),[[Fr,jr],[Hr,$r]]})}),ke):_t.map(function(lr){return lr.map(function(vr){return[[vr[0][0]*T,vr[0][1]*T],[vr[1][0]*T,vr[1][1]*T],[vr[2][0]*T,vr[2][1]*T]]})})},null!=_t&&ke.lobes(_t),ke}je.invert=function(Xt,_t){return _t>-Dr?Gt.invert(Xt,_t-Ve):Ot.invert(Xt,_t)},Zr.invert=function(Xt,_t){return g(_t)>Dr?Gt.invert(Xt,_t+(_t>0?Ve:-Ve)):Ot.invert(Xt,_t)};var Ga=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Yo(){return co(te,Ga).scale(160.857)}var El=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ci(){return co(Zr,El).scale(152.63)}var ro=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function tl(){return co(Gt,ro).scale(169.529)}var Cl=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Li(){return co(Gt,Cl).scale(169.529).rotate([20,0])}var el=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function ho(){return co(je,el,Lt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var bi=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function $l(){return co(Ot,bi).scale(152.63).rotate([-20,0])}function Fi(Xt,_t){return[3/S*Xt*D(o*o/3-_t*_t),_t]}function Ro(){return(0,A.Z)(Fi).scale(158.837)}function Ui(Xt){function _t(fe,he){if(g(g(he)-v)<w)return[0,he<0?-2:2];var Le=m(he),Me=s((1+Le)/(1-Le),Xt/2),ke=.5*(Me+1/Me)+u(fe*=Xt);return[2*m(fe)/ke,(Me-1/Me)/ke]}return _t.invert=function(fe,he){var Le=g(he);if(g(Le-2)<w)return fe?null:[0,f(he)*v];if(Le>2)return null;var Me=(fe/=2)*fe,ke=(he/=2)*he,fr=2*he/(1+Me+ke);return fr=s((1+fr)/(1-fr),1/Xt),[P(2*fe,1-Me-ke)/Xt,d((fr-1)/(fr+1))]},_t}function Su(){var Xt=.5,_t=(0,A.r)(Ui),fe=_t(Xt);return fe.spacing=function(he){return arguments.length?_t(Xt=+he):Xt},fe.scale(124.75)}Fi.invert=function(Xt,_t){return[S/3*Xt/D(o*o/3-_t*_t),_t]};var Xi=o/L;function rl(Xt,_t){return[Xt*(1+D(u(_t)))/2,_t/(u(_t/2)*u(Xt/6))]}function no(){return(0,A.Z)(rl).scale(97.2672)}function wi(Xt,_t){var fe=Xt*Xt,he=_t*_t;return[Xt*(.975534+he*(-.0143059*fe-.119161+-.0547009*he)),_t*(1.00384+fe*(.0802894+-.02855*he+199025e-9*fe)+he*(.0998909+-.0491032*he))]}function Eu(){return(0,A.Z)(wi).scale(139.98)}function Io(Xt,_t){return[m(Xt)/u(_t),h(_t)*u(Xt)]}function rs(){return(0,A.Z)(Io).scale(144.049).clipAngle(89.999)}function Ll(Xt){var _t=u(Xt),fe=h(M+Xt/2);function he(Le,Me){var ke=Me-Xt,fr=g(ke)<w?Le*_t:g(fr=M+Me/2)<w||g(g(fr)-v)<w?0:Le*ke/r(h(fr)/fe);return[fr,ke]}return he.invert=function(Le,Me){var ke,fr=Me+Xt;return[g(Me)<w?Le/_t:g(ke=M+fr/2)<w||g(g(ke)-v)<w?0:Le*r(h(ke)/fe)/Me,fr]},he}function Cu(){return Bt(Ll).parallel(40).scale(158.837)}function Pl(Xt,_t){return[Xt,1.25*r(h(M+.4*_t))]}function Dl(){return(0,A.Z)(Pl).scale(108.318)}function Lu(Xt){var _t=Xt.length-1;function fe(he,Le){for(var jr,Me=u(Le),ke=2/(1+Me*u(he)),fr=ke*Me*m(he),pr=ke*m(Le),lr=_t,vr=Xt[lr],Fr=vr[0],Hr=vr[1];--lr>=0;)Fr=(vr=Xt[lr])[0]+fr*(jr=Fr)-pr*Hr,Hr=vr[1]+fr*Hr+pr*jr;return[Fr=fr*(jr=Fr)-pr*Hr,Hr=fr*Hr+pr*jr]}return fe.invert=function(he,Le){var Me=20,ke=he,fr=Le;do{for(var $r,pr=_t,lr=Xt[pr],vr=lr[0],Fr=lr[1],Hr=0,jr=0;--pr>=0;)Hr=vr+ke*($r=Hr)-fr*jr,jr=Fr+ke*jr+fr*$r,vr=(lr=Xt[pr])[0]+ke*($r=vr)-fr*Fr,Fr=lr[1]+ke*Fr+fr*$r;var zn,qn,bn=(Hr=vr+ke*($r=Hr)-fr*jr)*Hr+(jr=Fr+ke*jr+fr*$r)*jr;ke-=zn=((vr=ke*($r=vr)-fr*Fr-he)*Hr+(Fr=ke*Fr+fr*$r-Le)*jr)/bn,fr-=qn=(Fr*Hr-vr*jr)/bn}while(g(zn)+g(qn)>w*w&&--Me>0);if(Me){var xa=D(ke*ke+fr*fr),Ma=2*i(.5*xa),Aa=m(Ma);return[P(ke*Aa,xa*u(Ma)),xa?d(fr*Aa/xa):0]}},fe}rl.invert=function(Xt,_t){var fe=g(Xt),he=g(_t),Le=w,Me=v;he<Xi?Me*=he/Xi:Le+=6*F(Xi/he);for(var ke=0;ke<25;ke++){var fr=m(Me),pr=D(u(Me)),lr=m(Me/2),vr=u(Me/2),Fr=m(Le/6),Hr=u(Le/6),jr=.5*Le*(1+pr)-fe,$r=Me/(vr*Hr)-he,bn=pr?-.25*Le*fr/pr:0,zn=.5*(1+pr),qn=(1+.5*Me*lr/vr)/(vr*Hr),xa=Me/vr*(Fr/6)/(Hr*Hr),Ma=bn*xa-qn*zn,Aa=(jr*xa-$r*zn)/Ma,Ra=($r*bn-jr*qn)/Ma;if(Me-=Aa,Le-=Ra,g(Aa)<w&&g(Ra)<w)break}return[Xt<0?-Le:Le,_t<0?-Me:Me]},wi.invert=function(Xt,_t){var fe=f(Xt)*o,he=_t/2,Le=50;do{var Me=fe*fe,ke=he*he,fr=fe*he,pr=fe*(.975534+ke*(-.0143059*Me-.119161+-.0547009*ke))-Xt,lr=he*(1.00384+Me*(.0802894+-.02855*ke+199025e-9*Me)+ke*(.0998909+-.0491032*ke))-_t,vr=.975534-ke*(.119161+3*Me*.0143059+.0547009*ke),Fr=-fr*(.238322+.2188036*ke+.0286118*Me),Hr=fr*(.1605788+7961e-7*Me+-.0571*ke),jr=1.00384+Me*(.0802894+199025e-9*Me)+ke*(3*(.0998909-.02855*Me)-.245516*ke),$r=Fr*Hr-jr*vr,bn=(lr*Fr-pr*jr)/$r,zn=(pr*Hr-lr*vr)/$r;fe-=bn,he-=zn}while((g(bn)>w||g(zn)>w)&&--Le>0);return Le&&[fe,he]},Io.invert=function(Xt,_t){var fe=Xt*Xt,Le=_t*_t+1,Me=fe+Le,ke=Xt?b*D((Me-D(Me*Me-4*fe))/fe):1/D(Le);return[d(Xt*ke),f(_t)*F(ke)]},Pl.invert=function(Xt,_t){return[Xt,2.5*i(y(.8*_t))-.625*o]};var of=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],sf=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],_l=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],lf=[[.9245,0],[0,0],[.01943,0]],uf=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Pu(){return ns(of,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function ff(){return ns(sf,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function cf(){return ns(_l,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Du(){return ns(lf,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function hf(){return ns(uf,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function ns(Xt,_t){var fe=(0,A.Z)(Lu(Xt)).rotate(_t).clipAngle(90),he=(0,St.Z)(_t),Le=fe.center;return delete fe.rotate,fe.center=function(Me){return arguments.length?Le(he(Me)):he.invert(Le())},fe}var ks=D(6),zs=D(7);function Rl(Xt,_t){var fe=d(7*m(_t)/(3*ks));return[ks*Xt*(2*u(2*fe/3)-1)/zs,9*m(fe/3)/zs]}function ql(){return(0,A.Z)(Rl).scale(164.859)}function Il(Xt,_t){for(var Me,fe=(1+b)*m(_t),he=_t,Le=0;Le<25&&(he-=Me=(m(he/2)+m(he)-fe)/(.5*u(he/2)+u(he)),!(g(Me)<w));Le++);return[Xt*(1+2*u(he)/u(he/2))/(3*L),2*D(3)*m(he/2)/D(2+L)]}function vf(){return(0,A.Z)(Il).scale(188.209)}function as(Xt,_t){for(var ke,fe=D(6/(4+o)),he=(1+o/4)*m(_t),Le=_t/2,Me=0;Me<25&&(Le-=ke=(Le/2+m(Le)-he)/(.5+u(Le)),!(g(ke)<w));Me++);return[fe*(.5+u(Le))*Xt/1.5,fe*Le]}function xo(){return(0,A.Z)(as).scale(166.518)}Rl.invert=function(Xt,_t){var fe=3*d(_t*zs/9);return[Xt*zs/(ks*(2*u(2*fe/3)-1)),d(3*m(fe)*ks/7)]},Il.invert=function(Xt,_t){var fe=_t*D(2+L)/(2*D(3)),he=2*d(fe);return[3*L*Xt/(1+2*u(he)/u(he/2)),d((fe+m(he))/(1+b))]},as.invert=function(Xt,_t){var fe=D(6/(4+o)),he=_t/fe;return g(g(he)-v)<w&&(he=he<0?-v:v),[1.5*Xt/(fe*(.5+u(he))),d((he/2+m(he))/(1+o/4))]};var nl=t(26867);function ms(Xt,_t){var fe=_t*_t,he=fe*fe,Le=fe*he;return[Xt*(.84719-.13063*fe+Le*Le*(.05494*fe-.04515-.02326*he+.00331*Le)),_t*(1.01183+he*he*(.01926*fe-.02625-.00396*he))]}function Fl(){return(0,A.Z)(ms).scale(175.295)}function lo(Xt,_t){return[Xt*(1+u(_t))/2,2*(_t-h(_t/2))]}function is(){return(0,A.Z)(lo).scale(152.63)}ms.invert=function(Xt,_t){var Le,Me,ke,fr,fe=_t,he=25;do{fe-=Le=(fe*(1.01183+(ke=(Me=fe*fe)*Me)*ke*(.01926*Me-.02625-.00396*ke))-_t)/(1.01183+ke*ke*(.21186*Me-.23625+-.05148*ke))}while(g(Le)>p&&--he>0);return[Xt/(.84719-.13063*(Me=fe*fe)+(fr=Me*(ke=Me*Me))*fr*(.05494*Me-.04515-.02326*ke+.00331*fr)),fe]},lo.invert=function(Xt,_t){for(var fe=_t/2,he=0,Le=1/0;he<10&&g(Le)>w;++he){var Me=u(_t/2);_t-=Le=(_t-h(_t/2)-fe)/(1-.5/(Me*Me))}return[2*Xt/(1+u(_t)),_t]};var tu=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function kl(){return co(st(1/0),tu).rotate([20,0]).scale(152.63)}function bo(Xt,_t){var fe=m(_t),he=u(_t),Le=f(Xt);if(0===Xt||g(_t)===v)return[0,_t];if(0===_t)return[Xt,0];if(g(Xt)===v)return[Xt*he,v*fe];var Me=o/(2*Xt)-2*Xt/o,ke=2*_t/o,fr=(1-ke*ke)/(fe-ke),pr=Me*Me,lr=fr*fr,vr=1+pr/lr,Fr=1+lr/pr,Hr=(Me*fe/fr-Me/2)/vr,jr=(lr*fe/pr+fr/2)/Fr,bn=jr*jr-(lr*fe*fe/pr+fr*fe-1)/Fr;return[v*(Hr+D(Hr*Hr+he*he/vr)*Le),v*(jr+D(bn<0?0:bn)*f(-_t*Me)*Le)]}function Pi(){return(0,A.Z)(bo).scale(127.267)}bo.invert=function(Xt,_t){var fe=(Xt/=v)*Xt,Le=fe+(_t/=v)*_t,Me=o*o;return[Xt?(Le-1+D((1-Le)*(1-Le)+4*fe))/(2*Xt)*v:0,gt(function(ke){return Le*(o*m(ke)-2*ke)*o+4*ke*ke*(_t-m(ke))+2*o*ke-Me*_t},0)]};var eu=1.0148,ru=.23185,Os=-.14499,zl=.02406,Zo=1.790857183;function xs(Xt,_t){var fe=_t*_t;return[Xt,_t*(eu+fe*fe*(ru+fe*(Os+zl*fe)))]}function Fo(){return(0,A.Z)(xs).scale(139.319)}function au(Xt,_t){if(g(_t)<w)return[Xt,0];var fe=h(_t),he=Xt*m(_t);return[m(he)/fe,_t+(1-u(he))/fe]}function iu(){return(0,A.Z)(au).scale(103.74)}xs.invert=function(Xt,_t){_t>Zo?_t=Zo:_t<-Zo&&(_t=-Zo);var he,fe=_t;do{var Le=fe*fe;fe-=he=(fe*(eu+Le*Le*(ru+Le*(Os+zl*Le)))-_t)/(1.0148+Le*Le*(1.1592500000000001+Le*(.21654*Le-1.01493)))}while(g(he)>w);return[Xt,fe]},au.invert=function(Xt,_t){if(g(_t)<w)return[Xt,0];var Me,fe=Xt*Xt+_t*_t,he=.5*_t,Le=10;do{var ke=h(he),fr=1/u(he),pr=fe-2*_t*he+he*he;he-=Me=(ke*pr+2*(he-_t))/(2+pr*fr*fr+2*(he-_t)*ke)}while(g(Me)>w&&--Le>0);return ke=h(he),[(g(_t)<g(he+1/ke)?d(Xt*ke):f(_t)*f(Xt)*(F(g(Xt*ke))+v))/m(he),he]};var ou=t(77338),al=t(83074);function Ol(Xt,_t){var fe=ku(Xt[1],Xt[0]),he=ku(_t[1],_t[0]),Le=function hi(Xt,_t){return P(Xt[0]*_t[1]-Xt[1]*_t[0],Xt[0]*_t[0]+Xt[1]*_t[1])}(fe,he),Me=zu(fe)/zu(he);return il([1,0,Xt[0][0],0,1,Xt[0][1]],il([Me,0,0,0,Me,0],il([u(Le),m(Le),0,-m(Le),u(Le),0],[1,0,-_t[0][0],0,1,-_t[0][1]])))}function Fu(Xt){var _t=1/(Xt[0]*Xt[4]-Xt[1]*Xt[3]);return[_t*Xt[4],-_t*Xt[1],_t*(Xt[1]*Xt[5]-Xt[2]*Xt[4]),-_t*Xt[3],_t*Xt[0],_t*(Xt[2]*Xt[3]-Xt[0]*Xt[5])]}function il(Xt,_t){return[Xt[0]*_t[0]+Xt[1]*_t[3],Xt[0]*_t[1]+Xt[1]*_t[4],Xt[0]*_t[2]+Xt[1]*_t[5]+Xt[2],Xt[3]*_t[0]+Xt[4]*_t[3],Xt[3]*_t[1]+Xt[4]*_t[4],Xt[3]*_t[2]+Xt[4]*_t[5]+Xt[5]]}function ku(Xt,_t){return[Xt[0]-_t[0],Xt[1]-_t[1]]}function zu(Xt){return D(Xt[0]*Xt[0]+Xt[1]*Xt[1])}function Ns(Xt,_t,fe){function Le(lr,vr){var jr,Fr=_t(lr,vr),Hr=Fr.project([lr*T,vr*T]);return(jr=Fr.transform)?[jr[0]*Hr[0]+jr[1]*Hr[1]+jr[2],-(jr[3]*Hr[0]+jr[4]*Hr[1]+jr[5])]:(Hr[1]=-Hr[1],Hr)}function Me(lr,vr){var Fr=lr.project.invert,Hr=lr.transform,jr=vr;if(Hr&&(jr=[(Hr=Fu(Hr))[0]*jr[0]+Hr[1]*jr[1]+Hr[2],Hr[3]*jr[0]+Hr[4]*jr[1]+Hr[5]]),Fr&&lr===function ke(lr){return _t(lr[0]*n,lr[1]*n)}($r=Fr(jr)))return $r;for(var $r,bn=lr.children,zn=0,qn=bn&&bn.length;zn<qn;++zn)if($r=Me(bn[zn],vr))return $r}(function he(lr,vr){if(lr.edges=function Ou(Xt){for(var _t=Xt.length,fe=[],he=Xt[_t-1],Le=0;Le<_t;++Le)fe.push([he,he=Xt[Le]]);return fe}(lr.face),vr.face){var Fr=lr.shared=function Us(Xt,_t){for(var fe,he,Le=Xt.length,Me=null,ke=0;ke<Le;++ke){fe=Xt[ke];for(var fr=_t.length;--fr>=0;)if(fe[0]===(he=_t[fr])[0]&&fe[1]===he[1]){if(Me)return[Me,fe];Me=fe}}}(lr.face,vr.face),Hr=Ol(Fr.map(vr.project),Fr.map(lr.project));lr.transform=vr.transform?il(vr.transform,Hr):Hr;for(var jr=vr.edges,$r=0,bn=jr.length;$r<bn;++$r)uo(Fr[0],jr[$r][1])&&uo(Fr[1],jr[$r][0])&&(jr[$r]=lr),uo(Fr[0],jr[$r][0])&&uo(Fr[1],jr[$r][1])&&(jr[$r]=lr);for($r=0,bn=(jr=lr.edges).length;$r<bn;++$r)uo(Fr[0],jr[$r][0])&&uo(Fr[1],jr[$r][1])&&(jr[$r]=vr),uo(Fr[0],jr[$r][1])&&uo(Fr[1],jr[$r][0])&&(jr[$r]=vr)}else lr.transform=vr.transform;return lr.children&&lr.children.forEach(function(zn){he(zn,lr)}),lr})(Xt,{transform:null}),ki(Xt)&&(Le.invert=function(lr,vr){var Fr=Me(Xt,[lr,-vr]);return Fr&&(Fr[0]*=n,Fr[1]*=n,Fr)});var fr=(0,A.Z)(Le),pr=fr.stream;return fr.stream=function(lr){var vr=fr.rotate(),Fr=pr(lr),Hr=(fr.rotate([0,0]),pr(lr));return fr.rotate(vr),Fr.sphere=function(){Hr.polygonStart(),Hr.lineStart(),bs(Hr,Xt),Hr.lineEnd(),Hr.polygonEnd()},Fr},fr.angle(null==fe?-30:fe*T)}function bs(Xt,_t,fe){var he,ke,Le=_t.edges,Me=Le.length,fr={type:"MultiPoint",coordinates:_t.face},pr=_t.face.filter(function(bn){return 90!==g(bn[1])}),lr=(0,ou.Z)({type:"MultiPoint",coordinates:pr}),vr=!1,Fr=-1,Hr=lr[1][0]-lr[0][0],jr=180===Hr||360===Hr?[(lr[0][0]+lr[1][0])/2,(lr[0][1]+lr[1][1])/2]:(0,Et.Z)(fr);if(fe)for(;++Fr<Me&&Le[Fr]!==fe;);++Fr;for(var $r=0;$r<Me;++$r)ke=Le[($r+Fr)%Me],Array.isArray(ke)?(vr||(Xt.point((he=(0,al.Z)(ke[0],jr)(w))[0],he[1]),vr=!0),Xt.point((he=(0,al.Z)(ke[1],jr)(w))[0],he[1])):(vr=!1,ke!==fe&&bs(Xt,ke,_t))}function uo(Xt,_t){return Xt&&_t&&Xt[0]===_t[0]&&Xt[1]===_t[1]}function ki(Xt){return Xt.project.invert||Xt.children&&Xt.children.some(ki)}var ws=t(98936),ko=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],wo=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Xt){return Xt.map(function(_t){return ko[_t]})});function Xo(Xt){Xt=Xt||function(fe){var he=(0,Et.Z)({type:"MultiPoint",coordinates:fe});return(0,ws.Z)().scale(1).translate([0,0]).rotate([-he[0],-he[1]])};var _t=wo.map(function(fe){return{face:fe,project:Xt(fe)}});return[-1,0,0,1,0,1,4,5].forEach(function(fe,he){var Le=_t[fe];Le&&(Le.children||(Le.children=[])).push(_t[he])}),Ns(_t[0],function(fe,he){return _t[fe<-o/2?he<0?6:4:fe<0?he<0?2:0:fe<o/2?he<0?3:1:he<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var jo=2/D(3);function zo(Xt,_t){var fe=kt(Xt,_t);return[fe[0]*jo,fe[1]]}function os(Xt){Xt=Xt||function(fe){var he=(0,Et.Z)({type:"MultiPoint",coordinates:fe});return(0,A.Z)(zo).translate([0,0]).scale(1).rotate(he[1]>0?[-he[0],0]:[180-he[0],180])};var _t=wo.map(function(fe){return{face:fe,project:Xt(fe)}});return[-1,0,0,1,0,1,4,5].forEach(function(fe,he){var Le=_t[fe];Le&&(Le.children||(Le.children=[])).push(_t[he])}),Ns(_t[0],function(fe,he){return _t[fe<-o/2?he<0?6:4:fe<0?he<0?2:0:fe<o/2?he<0?3:1:he<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function ss(Xt){Xt=Xt||function(ke){var fr=6===ke.length?(0,Et.Z)({type:"MultiPoint",coordinates:ke}):ke[0];return(0,ws.Z)().scale(1).translate([0,0]).rotate([-fr[0],-fr[1]])};var _t=wo.map(function(ke){for(var vr,fr=ke.map(Bl),pr=fr.length,lr=fr[pr-1],Fr=[],Hr=0;Hr<pr;++Hr)Fr.push(lu([.9486832980505138*lr[0]+.31622776601683794*(vr=fr[Hr])[0],.9486832980505138*lr[1]+.31622776601683794*vr[1],.9486832980505138*lr[2]+.31622776601683794*vr[2]]),lu([.9486832980505138*vr[0]+.31622776601683794*lr[0],.9486832980505138*vr[1]+.31622776601683794*lr[1],.9486832980505138*vr[2]+.31622776601683794*lr[2]])),lr=vr;return Fr}),fe=[],he=[-1,0,0,1,0,1,4,5];_t.forEach(function(ke,fr){for(var pr=wo[fr],lr=pr.length,vr=fe[fr]=[],Fr=0;Fr<lr;++Fr)_t.push([pr[Fr],ke[(2*Fr+2)%(2*lr)],ke[(2*Fr+1)%(2*lr)]]),he.push(fr),vr.push(su(Bl(ke[(2*Fr+2)%(2*lr)]),Bl(ke[(2*Fr+1)%(2*lr)])))});var Le=_t.map(function(ke){return{project:Xt(ke),face:ke}});return he.forEach(function(ke,fr){var pr=Le[ke];pr&&(pr.children||(pr.children=[])).push(Le[fr])}),Ns(Le[0],function Me(ke,fr){var pr=u(fr),lr=[pr*u(ke),pr*m(ke),m(fr)],vr=ke<-o/2?fr<0?6:4:ke<0?fr<0?2:0:ke<o/2?fr<0?3:1:fr<0?7:5,Fr=fe[vr];return Le[To(Fr[0],lr)<0?8+3*vr:To(Fr[1],lr)<0?8+3*vr+1:To(Fr[2],lr)<0?8+3*vr+2:vr]}).angle(-30).scale(110.625).center([0,45])}function To(Xt,_t){for(var fe=0,he=Xt.length,Le=0;fe<he;++fe)Le+=Xt[fe]*_t[fe];return Le}function su(Xt,_t){return[Xt[1]*_t[2]-Xt[2]*_t[1],Xt[2]*_t[0]-Xt[0]*_t[2],Xt[0]*_t[1]-Xt[1]*_t[0]]}function lu(Xt){return[P(Xt[1],Xt[0])*T,d(l(-1,a(1,Xt[2])))*T]}function Bl(Xt){var _t=Xt[0]*n,fe=Xt[1]*n,he=u(fe);return[he*u(_t),he*m(_t),m(fe)]}function Vs(){}function pf(Xt,_t){var he,fe=_t.stream;if(!fe)throw new Error("invalid projection");switch(Xt&&Xt.type){case"Feature":he=Nu;break;case"FeatureCollection":he=Bu;break;default:he=Nl}return he(Xt,fe)}function Bu(Xt,_t){return{type:"FeatureCollection",features:Xt.features.map(function(fe){return Nu(fe,_t)})}}function Nu(Xt,_t){return{type:"Feature",id:Xt.id,properties:Xt.properties,geometry:Nl(Xt.geometry,_t)}}function Nl(Xt,_t){if(!Xt)return null;if("GeometryCollection"===Xt.type)return function Uu(Xt,_t){return{type:"GeometryCollection",geometries:Xt.geometries.map(function(fe){return Nl(fe,_t)})}}(Xt,_t);var fe;switch(Xt.type){case"Point":case"MultiPoint":fe=ls;break;case"LineString":case"MultiLineString":fe=ol;break;case"Polygon":case"MultiPolygon":case"Sphere":fe=Hs;break;default:return null}return(0,ka.Z)(Xt,_t(fe)),fe.result()}zo.invert=function(Xt,_t){return kt.invert(Xt/jo,_t)};var Ni=[],vo=[],ls={point:function(Xt,_t){Ni.push([Xt,_t])},result:function(){var Xt=Ni.length?Ni.length<2?{type:"Point",coordinates:Ni[0]}:{type:"MultiPoint",coordinates:Ni}:null;return Ni=[],Xt}},ol={lineStart:Vs,point:function(Xt,_t){Ni.push([Xt,_t])},lineEnd:function(){Ni.length&&(vo.push(Ni),Ni=[])},result:function(){var Xt=vo.length?vo.length<2?{type:"LineString",coordinates:vo[0]}:{type:"MultiLineString",coordinates:vo}:null;return vo=[],Xt}},Hs={polygonStart:Vs,lineStart:Vs,point:function(Xt,_t){Ni.push([Xt,_t])},lineEnd:function(){var Xt=Ni.length;if(Xt){do{Ni.push(Ni[0].slice())}while(++Xt<4);vo.push(Ni),Ni=[]}},polygonEnd:Vs,result:function(){if(!vo.length)return null;var Xt=[],_t=[];return vo.forEach(function(fe){!function uu(Xt){if((fe=Xt.length)<4)return!1;for(var fe,_t=0,he=Xt[fe-1][1]*Xt[0][0]-Xt[fe-1][0]*Xt[0][1];++_t<fe;)he+=Xt[_t-1][1]*Xt[_t][0]-Xt[_t-1][0]*Xt[_t][1];return he<=0}(fe)?_t.push(fe):Xt.push([fe])}),_t.forEach(function(fe){var he=fe[0];Xt.some(function(Le){if(function df(Xt,_t){for(var fe=_t[0],he=_t[1],Le=!1,Me=0,ke=Xt.length,fr=ke-1;Me<ke;fr=Me++){var pr=Xt[Me],lr=pr[0],vr=pr[1],Fr=Xt[fr],jr=Fr[1];vr>he^jr>he&&fe<(Fr[0]-lr)*(he-vr)/(jr-vr)+lr&&(Le=!Le)}return Le}(Le[0],he))return Le.push(fe),!0})||Xt.push([fe])}),vo=[],Xt.length?Xt.length>1?{type:"MultiPolygon",coordinates:Xt}:{type:"Polygon",coordinates:Xt[0]}:null}};function fu(Xt){var _t=Xt(v,0)[0]-Xt(-v,0)[0];function fe(he,Le){var Me=g(he)<v,ke=Xt(Me?he:he>0?he-o:he+o,Le),fr=(ke[0]-ke[1])*b,pr=(ke[0]+ke[1])*b;if(Me)return[fr,pr];var lr=_t*b,vr=fr>0^pr>0?-1:1;return[vr*fr-f(pr)*lr,vr*pr-f(fr)*lr]}return Xt.invert&&(fe.invert=function(he,Le){var Me=(he+Le)*b,ke=(Le-he)*b,fr=g(Me)<.5*_t&&g(ke)<.5*_t;if(!fr){var pr=_t*b,lr=Me>0^ke>0?-1:1,vr=-lr*he+(ke>0?1:-1)*pr,Fr=-lr*Le+(Me>0?1:-1)*pr;Me=(-vr-Fr)*b,ke=(vr-Fr)*b}var Hr=Xt.invert(Me,ke);return fr||(Hr[0]+=Me>0?o:-o),Hr}),(0,A.Z)(fe).rotate([-90,-90,45]).clipAngle(179.999)}function cu(){return fu(wn).scale(176.423)}function hu(){return fu(en).scale(111.48)}function gf(Xt,_t){if(!(0<=(_t=+_t)&&_t<=20))throw new Error("invalid digits");function fe(lr){var vr=lr.length,Fr=2,Hr=new Array(vr);for(Hr[0]=+lr[0].toFixed(_t),Hr[1]=+lr[1].toFixed(_t);Fr<vr;)Hr[Fr]=lr[Fr],++Fr;return Hr}function he(lr){return lr.map(fe)}function Le(lr){for(var vr=fe(lr[0]),Fr=[vr],Hr=1;Hr<lr.length;Hr++){var jr=fe(lr[Hr]);(jr.length>2||jr[0]!=vr[0]||jr[1]!=vr[1])&&(Fr.push(jr),vr=jr)}return 1===Fr.length&&lr.length>1&&Fr.push(fe(lr[lr.length-1])),Fr}function Me(lr){return lr.map(Le)}function ke(lr){if(null==lr)return lr;var vr;switch(lr.type){case"GeometryCollection":vr={type:"GeometryCollection",geometries:lr.geometries.map(ke)};break;case"Point":vr={type:"Point",coordinates:fe(lr.coordinates)};break;case"MultiPoint":vr={type:lr.type,coordinates:he(lr.coordinates)};break;case"LineString":vr={type:lr.type,coordinates:Le(lr.coordinates)};break;case"MultiLineString":case"Polygon":vr={type:lr.type,coordinates:Me(lr.coordinates)};break;case"MultiPolygon":vr={type:"MultiPolygon",coordinates:lr.coordinates.map(Me)};break;default:return lr}return null!=lr.bbox&&(vr.bbox=lr.bbox),vr}function fr(lr){var vr={type:"Feature",properties:lr.properties,geometry:ke(lr.geometry)};return null!=lr.id&&(vr.id=lr.id),null!=lr.bbox&&(vr.bbox=lr.bbox),vr}if(null!=Xt)switch(Xt.type){case"Feature":return fr(Xt);case"FeatureCollection":var pr={type:"FeatureCollection",features:Xt.features.map(fr)};return null!=Xt.bbox&&(pr.bbox=Xt.bbox),pr;default:return ke(Xt)}return Xt}function us(Xt){var _t=m(Xt);function fe(he,Le){var Me=_t?h(he*_t/2)/_t:he/2;if(!Le)return[2*Me,-Xt];var ke=2*i(Me*m(Le)),fr=1/h(Le);return[m(ke)*fr,Le+(1-u(ke))*fr-Xt]}return fe.invert=function(he,Le){if(g(Le+=Xt)<w)return[_t?2*i(_t*he/2)/_t:he,0];var pr,Me=he*he+Le*Le,ke=0,fr=10;do{var lr=h(ke),vr=1/u(ke),Fr=Me-2*Le*ke+ke*ke;ke-=pr=(lr*Fr+2*(ke-Le))/(2+Fr*vr*vr+2*(ke-Le)*lr)}while(g(pr)>w&&--fr>0);var Hr=he*(lr=h(ke)),jr=h(g(Le)<g(ke+1/lr)?.5*d(Hr):.5*F(Hr)+o/4)/m(ke);return[_t?2*i(_t*jr)/_t:2*jr,ke]},fe}function fs(){return Bt(us).scale(131.215)}var zi=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function sl(Xt,_t){var Fr,fe=a(18,36*g(_t)/o),he=e(fe),Le=fe-he,Me=(Fr=zi[he])[0],ke=Fr[1],fr=(Fr=zi[++he])[0],pr=Fr[1],lr=(Fr=zi[a(19,++he)])[0],vr=Fr[1];return[Xt*(fr+Le*(lr-Me)/2+Le*Le*(lr-2*fr+Me)/2),(_t>0?v:-v)*(pr+Le*(vr-ke)/2+Le*Le*(vr-2*pr+ke)/2)]}function Ul(){return(0,A.Z)(sl).scale(152.63)}function Vu(Xt,_t){var fe=function Ts(Xt){function _t(fe,he){var Le=u(he),Me=(Xt-1)/(Xt-Le*u(fe));return[Me*Le*m(fe),Me*m(he)]}return _t.invert=function(fe,he){var Le=fe*fe+he*he,Me=D(Le),ke=(Xt-D(1-Le*(Xt+1)/(Xt-1)))/((Xt-1)/Me+Me/(Xt-1));return[P(fe*ke,Me*D(1-ke*ke)),Me?d(he*ke/Me):0]},_t}(Xt);if(!_t)return fe;var he=u(_t),Le=m(_t);function Me(ke,fr){var pr=fe(ke,fr),lr=pr[1],vr=lr*Le/(Xt-1)+he;return[pr[0]*he/vr,lr/vr]}return Me.invert=function(ke,fr){var pr=(Xt-1)/(Xt-1-fr*Le);return fe.invert(pr*ke,pr*fr*he)},Me}function cs(){var Xt=2,_t=0,fe=(0,A.r)(Vu),he=fe(Xt,_t);return he.distance=function(Le){return arguments.length?fe(Xt=+Le,_t):Xt},he.tilt=function(Le){return arguments.length?fe(Xt,_t=Le*n):_t*T},he.scale(432.147).clipAngle(F(1/Xt)*T-1e-6)}zi.forEach(function(Xt){Xt[1]*=1.0144}),sl.invert=function(Xt,_t){var fe=_t/v,he=90*fe,Le=a(18,g(he/5)),Me=l(0,e(Le));do{var ke=zi[Me][1],fr=zi[Me+1][1],pr=zi[a(19,Me+2)][1],lr=pr-ke,vr=pr-2*fr+ke,Fr=2*(g(fe)-fr)/lr,Hr=vr/lr,jr=Fr*(1-Hr*Fr*(1-2*Hr*Fr));if(jr>=0||1===Me){he=(_t>=0?5:-5)*(jr+Le);var bn,$r=50;do{jr=(Le=a(18,g(he)/5))-(Me=e(Le)),ke=zi[Me][1],fr=zi[Me+1][1],pr=zi[a(19,Me+2)][1],he-=(bn=(_t>=0?v:-v)*(fr+jr*(pr-ke)/2+jr*jr*(pr-2*fr+ke)/2)-_t)*T}while(g(bn)>p&&--$r>0);break}}while(--Me>=0);var zn=zi[Me][0],qn=zi[Me+1][0],xa=zi[a(19,Me+2)][0];return[Xt/(qn+jr*(xa-zn)/2+jr*jr*(xa-2*qn+zn)/2),he*n]};var ll=1e-4,ul=-180+ll,ei=180-ll,vu=-90+ll,Ms=90-ll;function Hu(Xt){return Xt.length>0}function du(Xt){return Math.floor(1e4*Xt)/1e4}function fl(Xt){return-90===Xt||90===Xt?[0,Xt]:[-180,du(Xt)]}function Hl(Xt){var _t=Xt[0],fe=Xt[1],he=!1;return _t<=ul?(_t=-180,he=!0):_t>=ei&&(_t=180,he=!0),fe<=vu?(fe=-90,he=!0):fe>=Ms&&(fe=90,he=!0),he?[_t,fe]:Xt}function Gu(Xt){return Xt.map(Hl)}function Qo(Xt,_t,fe){for(var he=0,Le=Xt.length;he<Le;++he){var Me=Xt[he].slice();fe.push({index:-1,polygon:_t,ring:Me});for(var ke=0,fr=Me.length;ke<fr;++ke){var pr=Me[ke],lr=pr[0],vr=pr[1];if(lr<=ul||lr>=ei||vr<=vu||vr>=Ms){Me[ke]=Hl(pr);for(var Fr=ke+1;Fr<fr;++Fr){var Hr=Me[Fr],jr=Hr[0],$r=Hr[1];if(jr>ul&&jr<ei&&$r>vu&&$r<Ms)break}if(Fr===ke+1)continue;if(ke){var bn={index:-1,polygon:_t,ring:Me.slice(0,ke+1)};bn.ring[bn.ring.length-1]=fl(vr),fe[fe.length-1]=bn}else fe.pop();if(Fr>=fr)break;fe.push({index:-1,polygon:_t,ring:Me=Me.slice(Fr-1)}),Me[0]=fl(Me[0][1]),ke=-1,fr=Me.length}}}}function cl(Xt){var _t,Me,ke,fr,pr,lr,fe=Xt.length,he={},Le={};for(_t=0;_t<fe;++_t)(ke=(Me=Xt[_t]).ring[0])[0]!==(pr=Me.ring[Me.ring.length-1])[0]||ke[1]!==pr[1]?(Me.index=_t,he[ke]=Le[pr]=Me):(Me.polygon.push(Me.ring),Xt[_t]=null);for(_t=0;_t<fe;++_t)if(Me=Xt[_t]){if(fr=Le[ke=Me.ring[0]],lr=he[pr=Me.ring[Me.ring.length-1]],delete he[ke],delete Le[pr],ke[0]===pr[0]&&ke[1]===pr[1]){Me.polygon.push(Me.ring);continue}fr?(delete Le[ke],delete he[fr.ring[0]],fr.ring.pop(),Xt[fr.index]=null,Me={index:-1,polygon:fr.polygon,ring:fr.ring.concat(Me.ring)},fr===lr?Me.polygon.push(Me.ring):(Me.index=fe++,Xt.push(he[Me.ring[0]]=Le[Me.ring[Me.ring.length-1]]=Me))):lr?(delete he[pr],delete Le[lr.ring[lr.ring.length-1]],Me.ring.pop(),Me={index:fe++,polygon:lr.polygon,ring:Me.ring.concat(lr.ring)},Xt[lr.index]=null,Xt.push(he[Me.ring[0]]=Le[Me.ring[Me.ring.length-1]]=Me)):(Me.ring.push(Me.ring[0]),Me.polygon.push(Me.ring))}}function hl(Xt){var _t={type:"Feature",geometry:$o(Xt.geometry)};return null!=Xt.id&&(_t.id=Xt.id),null!=Xt.bbox&&(_t.bbox=Xt.bbox),null!=Xt.properties&&(_t.properties=Xt.properties),_t}function $o(Xt){if(null==Xt)return Xt;var _t,fe,he,Le;switch(Xt.type){case"GeometryCollection":_t={type:"GeometryCollection",geometries:Xt.geometries.map($o)};break;case"Point":_t={type:"Point",coordinates:Hl(Xt.coordinates)};break;case"MultiPoint":case"LineString":_t={type:Xt.type,coordinates:Gu(Xt.coordinates)};break;case"MultiLineString":_t={type:"MultiLineString",coordinates:Xt.coordinates.map(Gu)};break;case"Polygon":var Me=[];Qo(Xt.coordinates,Me,fe=[]),cl(fe),_t={type:"Polygon",coordinates:Me};break;case"MultiPolygon":fe=[],he=-1,Le=Xt.coordinates.length;for(var ke=new Array(Le);++he<Le;)Qo(Xt.coordinates[he],ke[he]=[],fe);cl(fe),_t={type:"MultiPolygon",coordinates:ke.filter(Hu)};break;default:return Xt}return null!=Xt.bbox&&(_t.bbox=Xt.bbox),_t}function Ao(Xt){if(null==Xt)return Xt;switch(Xt.type){case"Feature":return hl(Xt);case"FeatureCollection":var _t={type:"FeatureCollection",features:Xt.features.map(hl)};return null!=Xt.bbox&&(_t.bbox=Xt.bbox),_t;default:return $o(Xt)}}function vl(Xt,_t){var fe=h(_t/2),he=m(M*fe);return[Xt*(.74482-.34588*he*he),1.70711*fe]}function hs(){return(0,A.Z)(vl).scale(146.153)}function dl(Xt,_t,fe){var he=(0,al.Z)(_t,fe),Le=he(.5),Me=(0,St.Z)([-Le[0],-Le[1]])(_t),ke=he.distance/2,fr=-d(m(Me[1]*n)/m(ke)),pr=[-Le[0],-Le[1],-(Me[0]>0?o-fr:fr)*T],lr=(0,A.Z)(Xt(ke)).rotate(pr),vr=(0,St.Z)(pr),Fr=lr.center;return delete lr.rotate,lr.center=function(Hr){return arguments.length?Fr(vr(Hr)):vr.invert(Fr())},lr.clipAngle(90)}function Ws(Xt){var _t=u(Xt);function fe(he,Le){var Me=(0,ws.M)(he,Le);return Me[0]*=_t,Me}return fe.invert=function(he,Le){return ws.M.invert(he/_t,Le)},fe}function Wu(){return Gl([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Gl(Xt,_t){return dl(Ws,Xt,_t)}function Ti(Xt){if(!(Xt*=2))return $.N;var _t=-Xt/2,fe=-_t,he=Xt*Xt,Le=h(fe),Me=.5/m(fe);function ke(fr,pr){var lr=F(u(pr)*u(fr-_t)),vr=F(u(pr)*u(fr-fe));return[((lr*=lr)-(vr*=vr))/(2*Xt),(pr<0?-1:1)*D(4*he*vr-(he-lr+vr)*(he-lr+vr))/(2*Xt)]}return ke.invert=function(fr,pr){var Hr,jr,lr=pr*pr,vr=u(D(lr+(Hr=fr+_t)*Hr)),Fr=u(D(lr+(Hr=fr+fe)*Hr));return[P(jr=vr-Fr,Hr=(vr+Fr)*Le),(pr<0?-1:1)*F(D(Hr*Hr+jr*jr)*Me)]},ke}function pu(){return Wl([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Wl(Xt,_t){return dl(Ti,Xt,_t)}function Ss(Xt,_t){if(g(_t)<w)return[Xt,0];var fe=g(_t/v),he=d(fe);if(g(Xt)<w||g(g(_t)-v)<w)return[0,f(_t)*o*h(he/2)];var Le=u(he),Me=g(o/Xt-Xt/o)/2,ke=Me*Me,fr=Le/(fe+Le-1),pr=fr*(2/fe-1),lr=pr*pr,vr=lr+ke,Fr=fr-lr,Hr=ke+fr;return[f(Xt)*o*(Me*Fr+D(ke*Fr*Fr-vr*(fr*fr-lr)))/vr,f(_t)*o*(pr*Hr-Me*D((ke+1)*vr-Hr*Hr))/vr]}function vs(){return(0,A.Z)(Ss).scale(79.4183)}function gu(Xt,_t){if(g(_t)<w)return[Xt,0];var fe=g(_t/v),he=d(fe);if(g(Xt)<w||g(g(_t)-v)<w)return[0,f(_t)*o*h(he/2)];var Le=u(he),Me=g(o/Xt-Xt/o)/2,ke=Me*Me,fr=Le*(D(1+ke)-Me*Le)/(1+ke*fe*fe);return[f(Xt)*o*fr,f(_t)*o*D(1-fr*(2*Me+fr))]}function yf(){return(0,A.Z)(gu).scale(79.4183)}function Ys(Xt,_t){if(g(_t)<w)return[Xt,0];var fe=_t/v,he=d(fe);if(g(Xt)<w||g(g(_t)-v)<w)return[0,o*h(he/2)];var Le=(o/Xt-Xt/o)/2,Me=fe/(1+u(he));return[o*(f(Xt)*D(Le*Le+1-Me*Me)-Le),o*Me]}function Zs(){return(0,A.Z)(Ys).scale(79.4183)}function pl(Xt,_t){if(!_t)return[Xt,0];var fe=g(_t);if(!Xt||fe===v)return[0,_t];var he=fe/v,Le=he*he,Me=(8*he-Le*(Le+2)-5)/(2*Le*(he-1)),ke=Me*Me,fr=he*Me,pr=Le+ke+2*fr,lr=he+3*Me,vr=Xt/v,Fr=vr+1/vr,Hr=f(g(Xt)-v)*D(Fr*Fr-4),jr=Hr*Hr,bn=(Hr*(pr+ke-1)+2*D(pr*(Le+ke*jr-1)+(1-Le)*(Le*(lr*lr+4*ke)+12*fr*ke+4*ke*ke)))/(4*pr+jr);return[f(Xt)*v*bn,f(_t)*v*D(1+Hr*g(bn)-bn*bn)]}function yl(){return(0,A.Z)(pl).scale(127.16)}function yu(Xt,_t,fe,he){var Le=o/3;Xt=l(Xt,w),_t=l(_t,w),Xt=a(Xt,v),_t=a(_t,o-w),fe=l(fe,0),fe=a(fe,100-w);var ke=(he=l(he,w))/100,fr=F((fe/100+1)*u(Le))/Le,pr=m(Xt)/m(fr*v),lr=_t/o,vr=D(ke*m(Xt/2)/m(_t/2));return function Yu(Xt,_t,fe,he,Le){function Me(ke,fr){var pr=fe*m(he*fr),lr=D(1-pr*pr),vr=D(2/(1+lr*u(ke*=Le)));return[Xt*lr*vr*m(ke),_t*pr*vr]}return Me.invert=function(ke,fr){var pr=ke/Xt,lr=fr/_t,vr=D(pr*pr+lr*lr),Fr=2*d(vr/2);return[P(ke*h(Fr),Xt*vr)/Le,vr&&d(fr*m(Fr)/(_t*fe*vr))/he]},Me}(vr/D(lr*pr*fr),1/(vr*D(lr*pr*fr)),pr,fr,lr)}function Es(){var Xt=65*n,_t=60*n,fe=20,he=200,Le=(0,A.r)(yu),Me=Le(Xt,_t,fe,he);return Me.poleline=function(ke){return arguments.length?Le(Xt=+ke*n,_t,fe,he):Xt*T},Me.parallels=function(ke){return arguments.length?Le(Xt,_t=+ke*n,fe,he):_t*T},Me.inflation=function(ke){return arguments.length?Le(Xt,_t,fe=+ke,he):fe},Me.ratio=function(ke){return arguments.length?Le(Xt,_t,fe,he=+ke):he},Me.scale(163.775)}function ao(){return Es().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}vl.invert=function(Xt,_t){var fe=_t/1.70711,he=m(M*fe);return[Xt/(.74482-.34588*he*he),2*i(fe)]},Ss.invert=function(Xt,_t){if(g(_t)<w)return[Xt,0];if(g(Xt)<w)return[0,v*m(2*i(_t/o))];var fe=(Xt/=o)*Xt,he=(_t/=o)*_t,Le=fe+he,Me=Le*Le,ke=-g(_t)*(1+Le),fr=ke-2*he+fe,pr=-2*ke+1+2*he+Me,lr=he/pr+(2*fr*fr*fr/(pr*pr*pr)-9*ke*fr/(pr*pr))/27,vr=(ke-fr*fr/(3*pr))/pr,Fr=2*D(-vr/3),Hr=F(3*lr/(vr*Fr))/3;return[o*(Le-1+D(1+2*(fe-he)+Me))/(2*Xt),f(_t)*o*(-Fr*u(Hr+o/3)-fr/(3*pr))]},gu.invert=function(Xt,_t){if(!Xt)return[0,v*m(2*i(_t/o))];var fe=g(Xt/o),he=(1-fe*fe-(_t/=o)*_t)/(2*fe),Me=D(he*he+1);return[f(Xt)*o*(Me-he),f(_t)*v*m(2*P(D((1-2*he*fe)*(he+Me)-fe),D(Me+he+fe)))]},Ys.invert=function(Xt,_t){if(!_t)return[Xt,0];var fe=_t/o,he=(o*o*(1-fe*fe)-Xt*Xt)/(2*o*Xt);return[Xt?o*(f(Xt)*D(he*he+1)-he):0,v*m(2*i(fe))]},pl.invert=function(Xt,_t){var fe;if(!Xt||!_t)return[Xt,_t];_t/=o;var he=f(Xt)*Xt/v,Le=(he*he-1+4*_t*_t)/g(he),Me=Le*Le,ke=2*_t,fr=50;do{var pr=ke*ke,lr=(8*ke-pr*(pr+2)-5)/(2*pr*(ke-1)),vr=(3*ke-pr*ke-10)/(2*pr*ke),Fr=lr*lr,Hr=ke*lr,jr=ke+lr,$r=jr*jr,bn=ke+3*lr,qn=-2*jr*(4*Hr*Fr+(1-4*pr+3*pr*pr)*(1+vr)+Fr*(14*pr-6-Me+(8*pr-8-2*Me)*vr)+Hr*(12*pr-8+(10*pr-10-Me)*vr)),xa=D($r*(pr+Fr*Me-1)+(1-pr)*(pr*(bn*bn+4*Fr)+Fr*(12*Hr+4*Fr)));ke-=fe=(Le*($r+Fr-1)+2*xa-he*(4*$r+Me))/(Le*(2*lr*vr+2*jr*(1+vr))+qn/xa-8*jr*(Le*(-1+Fr+$r)+2*xa)*(1+vr)/(Me+4*$r))}while(fe>w&&--fr>0);return[f(Xt)*(D(Le*Le+4)+Le)*o/4,v*ke]};var mu=4*o+3*D(3),Yl=2*D(2*o*D(3)/mu),Oo=At(Yl*D(3)/o,Yl,mu/6);function Xs(){return(0,A.Z)(Oo).scale(176.84)}function Cs(Xt,_t){return[Xt*D(1-3*_t*_t/(o*o)),_t]}function Zu(){return(0,A.Z)(Cs).scale(152.63)}function Zl(Xt,_t){var fe=u(_t),he=u(Xt)*fe,Le=1-he,Me=u(Xt=P(m(Xt)*fe,-m(_t))),ke=m(Xt);return[ke*(fe=D(1-he*he))-Me*Le,-Me*fe-ke*Le]}function Xu(){return(0,A.Z)(Zl).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function ml(Xt,_t){var fe=J(Xt,_t);return[(fe[0]+Xt/v)/2,(fe[1]+_t)/2]}function xu(){return(0,A.Z)(ml).scale(158.837)}Cs.invert=function(Xt,_t){return[Xt/D(1-3*_t*_t/(o*o)),_t]},Zl.invert=function(Xt,_t){var fe=(Xt*Xt+_t*_t)/-2,he=D(-fe*(2+fe)),Le=_t*fe+Xt*he,Me=Xt*fe-_t*he,ke=D(Me*Me+Le*Le);return[P(he*Le,ke*(1+fe)),ke?-d(he*Me/ke):0]},ml.invert=function(Xt,_t){var fe=Xt,he=_t,Le=25;do{var zn,Me=u(he),ke=m(he),fr=m(2*he),pr=ke*ke,lr=Me*Me,vr=m(fe),Fr=u(fe/2),Hr=m(fe/2),jr=Hr*Hr,$r=1-lr*Fr*Fr,bn=$r?F(Me*Fr)*D(zn=1/$r):zn=0,qn=.5*(2*bn*Me*Hr+fe/v)-Xt,xa=.5*(bn*ke+he)-_t,Ma=.5*zn*(lr*jr+bn*Me*Fr*pr)+.5/v,Aa=zn*(vr*fr/4-bn*ke*Hr),Ra=.125*zn*(fr*Hr-bn*ke*lr*vr),qa=.5*zn*(pr*Fr+bn*jr*Me)+.5,ai=Aa*Ra-qa*Ma,ra=(xa*Aa-qn*qa)/ai,fi=(qn*Ra-xa*Ma)/ai;fe-=ra,he-=fi}while((g(ra)>w||g(fi)>w)&&--Le>0);return[fe,he]}},33940:function(q,W,t){"use strict";function A(){return new g}function g(){this.reset()}t.d(W,{Z:function(){return A}}),g.prototype={constructor:g,reset:function(){this.s=this.t=0},add:function(C){P(i,C,this.t),P(this,i.s,this.s),this.s?this.t+=i.t:this.s=i.t},valueOf:function(){return this.s}};var i=new g;function P(C,u,y){var e=C.s=u+y,r=e-u;C.t=u-(e-r)+(y-r)}},97860:function(q,W,t){"use strict";t.d(W,{L9:function(){return C},ZP:function(){return w},gL:function(){return s}});var y,e,r,l,a,A=t(33940),g=t(39695),i=t(73182),P=t(72736),C=(0,A.Z)(),u=(0,A.Z)(),s={point:i.Z,lineStart:i.Z,lineEnd:i.Z,polygonStart:function(){C.reset(),s.lineStart=c,s.lineEnd=f},polygonEnd:function(){var p=+C;u.add(p<0?g.BZ+p:p),this.lineStart=this.lineEnd=this.point=i.Z},sphere:function(){u.add(g.BZ)}};function c(){s.point=m}function f(){h(y,e)}function m(p,o){s.point=h,y=p,e=o,r=p*=g.uR,l=(0,g.mC)(o=(o*=g.uR)/2+g.pu),a=(0,g.O$)(o)}function h(p,o){var v=(p*=g.uR)-r,M=v>=0?1:-1,b=M*v,L=(0,g.mC)(o=(o*=g.uR)/2+g.pu),x=(0,g.O$)(o),S=a*x,T=l*L+S*(0,g.mC)(b),n=S*M*(0,g.O$)(b);C.add((0,g.fv)(n,T)),r=p,l=L,a=x}function w(p){return u.reset(),(0,P.Z)(p,s),2*u}},77338:function(q,W,t){"use strict";t.d(W,{Z:function(){return E}});var u,y,e,r,l,a,s,c,m,h,A=t(33940),g=t(97860),i=t(7620),P=t(39695),C=t(72736),f=(0,A.Z)(),w={point:p,lineStart:v,lineEnd:M,polygonStart:function(){w.point=b,w.lineStart=L,w.lineEnd=x,f.reset(),g.gL.polygonStart()},polygonEnd:function(){g.gL.polygonEnd(),w.point=p,w.lineStart=v,w.lineEnd=M,g.L9<0?(u=-(e=180),y=-(r=90)):f>P.Ho?r=90:f<-P.Ho&&(y=-90),h[0]=u,h[1]=e},sphere:function(){u=-(e=180),y=-(r=90)}};function p(d,F){m.push(h=[u=d,e=d]),F<y&&(y=F),F>r&&(r=F)}function o(d,F){var D=(0,i.Og)([d*P.uR,F*P.uR]);if(c){var N=(0,i.T5)(c,D),O=(0,i.T5)([N[1],-N[0],0],N);(0,i.iJ)(O),O=(0,i.Y1)(O);var H,B=d-l,z=B>0?1:-1,U=O[0]*P.RW*z,J=(0,P.Wn)(B)>180;J^(z*l<U&&U<z*d)?(H=O[1]*P.RW)>r&&(r=H):J^(z*l<(U=(U+360)%360-180)&&U<z*d)?(H=-O[1]*P.RW)<y&&(y=H):(F<y&&(y=F),F>r&&(r=F)),J?d<l?S(u,d)>S(u,e)&&(e=d):S(d,e)>S(u,e)&&(u=d):e>=u?(d<u&&(u=d),d>e&&(e=d)):d>l?S(u,d)>S(u,e)&&(e=d):S(d,e)>S(u,e)&&(u=d)}else m.push(h=[u=d,e=d]);F<y&&(y=F),F>r&&(r=F),c=D,l=d}function v(){w.point=o}function M(){h[0]=u,h[1]=e,w.point=p,c=null}function b(d,F){if(c){var D=d-l;f.add((0,P.Wn)(D)>180?D+(D>0?360:-360):D)}else a=d,s=F;g.gL.point(d,F),o(d,F)}function L(){g.gL.lineStart()}function x(){b(a,s),g.gL.lineEnd(),(0,P.Wn)(f)>P.Ho&&(u=-(e=180)),h[0]=u,h[1]=e,c=null}function S(d,F){return(F-=d)<0?F+360:F}function T(d,F){return d[0]-F[0]}function n(d,F){return d[0]<=d[1]?d[0]<=F&&F<=d[1]:F<d[0]||d[1]<F}function E(d){var F,D,N,k,O,B,z;if(r=e=-(u=y=1/0),m=[],(0,C.Z)(d,w),D=m.length){for(m.sort(T),F=1,O=[N=m[0]];F<D;++F)n(N,(k=m[F])[0])||n(N,k[1])?(S(N[0],k[1])>S(N[0],N[1])&&(N[1]=k[1]),S(k[0],N[1])>S(N[0],N[1])&&(N[0]=k[0])):O.push(N=k);for(B=-1/0,F=0,N=O[D=O.length-1];F<=D;N=k,++F)(z=S(N[1],(k=O[F])[0]))>B&&(B=z,u=k[0],e=N[1])}return m=h=null,u===1/0||y===1/0?[[NaN,NaN],[NaN,NaN]]:[[u,y],[e,r]]}},7620:function(q,W,t){"use strict";t.d(W,{Og:function(){return i},T:function(){return y},T5:function(){return C},Y1:function(){return g},iJ:function(){return e},j9:function(){return P},s0:function(){return u}});var A=t(39695);function g(r){return[(0,A.fv)(r[1],r[0]),(0,A.ZR)(r[2])]}function i(r){var l=r[0],a=r[1],s=(0,A.mC)(a);return[s*(0,A.mC)(l),s*(0,A.O$)(l),(0,A.O$)(a)]}function P(r,l){return r[0]*l[0]+r[1]*l[1]+r[2]*l[2]}function C(r,l){return[r[1]*l[2]-r[2]*l[1],r[2]*l[0]-r[0]*l[2],r[0]*l[1]-r[1]*l[0]]}function u(r,l){r[0]+=l[0],r[1]+=l[1],r[2]+=l[2]}function y(r,l){return[r[0]*l,r[1]*l,r[2]*l]}function e(r){var l=(0,A._b)(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);r[0]/=l,r[1]/=l,r[2]/=l}},66624:function(q,W,t){"use strict";t.d(W,{Z:function(){return D}});var P,C,u,y,e,r,l,a,s,c,f,m,h,w,p,o,A=t(39695),g=t(73182),i=t(72736),v={sphere:g.Z,point:M,lineStart:L,lineEnd:T,polygonStart:function(){v.lineStart=n,v.lineEnd=E},polygonEnd:function(){v.lineStart=L,v.lineEnd=T}};function M(N,k){N*=A.uR;var O=(0,A.mC)(k*=A.uR);b(O*(0,A.mC)(N),O*(0,A.O$)(N),(0,A.O$)(k))}function b(N,k,O){++P,u+=(N-u)/P,y+=(k-y)/P,e+=(O-e)/P}function L(){v.point=x}function x(N,k){N*=A.uR;var O=(0,A.mC)(k*=A.uR);w=O*(0,A.mC)(N),p=O*(0,A.O$)(N),o=(0,A.O$)(k),v.point=S,b(w,p,o)}function S(N,k){N*=A.uR;var O=(0,A.mC)(k*=A.uR),B=O*(0,A.mC)(N),z=O*(0,A.O$)(N),U=(0,A.O$)(k),H=(0,A.fv)((0,A._b)((H=p*U-o*z)*H+(H=o*B-w*U)*H+(H=w*z-p*B)*H),w*B+p*z+o*U);C+=H,r+=H*(w+(w=B)),l+=H*(p+(p=z)),a+=H*(o+(o=U)),b(w,p,o)}function T(){v.point=M}function n(){v.point=d}function E(){F(m,h),v.point=M}function d(N,k){m=N,h=k,N*=A.uR,k*=A.uR,v.point=F;var O=(0,A.mC)(k);w=O*(0,A.mC)(N),p=O*(0,A.O$)(N),o=(0,A.O$)(k),b(w,p,o)}function F(N,k){N*=A.uR;var O=(0,A.mC)(k*=A.uR),B=O*(0,A.mC)(N),z=O*(0,A.O$)(N),U=(0,A.O$)(k),H=p*U-o*z,J=o*B-w*U,nt=w*z-p*B,it=(0,A._b)(H*H+J*J+nt*nt),ut=(0,A.ZR)(it),Q=it&&-ut/it;s+=Q*H,c+=Q*J,f+=Q*nt,C+=ut,r+=ut*(w+(w=B)),l+=ut*(p+(p=z)),a+=ut*(o+(o=U)),b(w,p,o)}function D(N){P=C=u=y=e=r=l=a=s=c=f=0,(0,i.Z)(N,v);var k=s,O=c,B=f,z=k*k+O*O+B*B;return z<A.aW&&(k=r,O=l,B=a,C<A.Ho&&(k=u,O=y,B=e),(z=k*k+O*O+B*B)<A.aW)?[NaN,NaN]:[(0,A.fv)(O,k)*A.RW,(0,A.ZR)(B/(0,A._b)(z))*A.RW]}},7613:function(q,W,t){"use strict";t.d(W,{m:function(){return C},Z:function(){return y}});var A=t(7620);function g(e){return function(){return e}}var i=t(39695),P=t(49386);function C(e,r,l,a,s,c){if(l){var f=(0,i.mC)(r),m=(0,i.O$)(r),h=a*l;null==s?(s=r+a*i.BZ,c=r-h/2):(s=u(f,s),c=u(f,c),(a>0?s<c:s>c)&&(s+=a*i.BZ));for(var w,p=s;a>0?p>c:p<c;p-=h)w=(0,A.Y1)([f,-m*(0,i.mC)(p),-m*(0,i.O$)(p)]),e.point(w[0],w[1])}}function u(e,r){(r=(0,A.Og)(r))[0]-=e,(0,A.iJ)(r);var l=(0,i.Kh)(-r[1]);return((-r[2]<0?-l:l)+i.BZ-i.Ho)%i.BZ}function y(){var a,s,e=g([0,0]),r=g(90),l=g(6),c={point:function f(h,w){a.push(h=s(h,w)),h[0]*=i.RW,h[1]*=i.RW}};function m(){var h=e.apply(this,arguments),w=r.apply(this,arguments)*i.uR,p=l.apply(this,arguments)*i.uR;return a=[],s=(0,P.I)(-h[0]*i.uR,-h[1]*i.uR,0).invert,C(c,w,p,1),h={type:"Polygon",coordinates:[a]},a=s=null,h}return m.center=function(h){return arguments.length?(e="function"==typeof h?h:g([+h[0],+h[1]]),m):e},m.radius=function(h){return arguments.length?(r="function"==typeof h?h:g(+h),m):r},m.precision=function(h){return arguments.length?(l="function"==typeof h?h:g(+h),m):l},m}},87070:function(q,W,t){"use strict";var A=t(97023),g=t(39695);W.Z=(0,A.Z)(function(){return!0},function i(u){var l,y=NaN,e=NaN,r=NaN;return{lineStart:function(){u.lineStart(),l=1},point:function(a,s){var c=a>0?g.pi:-g.pi,f=(0,g.Wn)(a-y);(0,g.Wn)(f-g.pi)<g.Ho?(u.point(y,e=(e+s)/2>0?g.ou:-g.ou),u.point(r,e),u.lineEnd(),u.lineStart(),u.point(c,e),u.point(a,e),l=0):r!==c&&f>=g.pi&&((0,g.Wn)(y-r)<g.Ho&&(y-=r*g.Ho),(0,g.Wn)(a-c)<g.Ho&&(a-=c*g.Ho),e=function P(u,y,e,r){var l,a,s=(0,g.O$)(u-e);return(0,g.Wn)(s)>g.Ho?(0,g.z4)(((0,g.O$)(y)*(a=(0,g.mC)(r))*(0,g.O$)(e)-(0,g.O$)(r)*(l=(0,g.mC)(y))*(0,g.O$)(u))/(l*a*s)):(y+r)/2}(y,e,a,s),u.point(r,e),u.lineEnd(),u.lineStart(),u.point(c,e),l=0),u.point(y=a,e=s),r=c},lineEnd:function(){u.lineEnd(),y=e=NaN},clean:function(){return 2-l}}},function C(u,y,e,r){var l;if(null==u)r.point(-g.pi,l=e*g.ou),r.point(0,l),r.point(g.pi,l),r.point(g.pi,0),r.point(g.pi,-l),r.point(0,-l),r.point(-g.pi,-l),r.point(-g.pi,0),r.point(-g.pi,l);else if((0,g.Wn)(u[0]-y[0])>g.Ho){var a=u[0]<y[0]?g.pi:-g.pi;r.point(-a,l=e*a/2),r.point(0,l),r.point(a,l)}else r.point(y[0],y[1])},[-g.pi,-g.ou])},85272:function(q,W,t){"use strict";t.d(W,{Z:function(){return g}});var A=t(73182);function g(){var P,i=[];return{point:function(C,u,y){P.push([C,u,y])},lineStart:function(){i.push(P=[])},lineEnd:A.Z,rejoin:function(){i.length>1&&i.push(i.pop().concat(i.shift()))},result:function(){var C=i;return i=[],P=null,C}}}},1457:function(q,W,t){"use strict";t.d(W,{Z:function(){return u}});var A=t(7620),g=t(7613),i=t(39695),P=t(67108),C=t(97023);function u(y){var e=(0,i.mC)(y),r=6*i.uR,l=e>0,a=(0,i.Wn)(e)>i.Ho;function c(w,p){return(0,i.mC)(w)*(0,i.mC)(p)>e}function m(w,p,o){var v=(0,A.Og)(w),M=(0,A.Og)(p),b=[1,0,0],L=(0,A.T5)(v,M),x=(0,A.j9)(L,L),S=L[0],T=x-S*S;if(!T)return!o&&w;var n=e*x/T,E=-e*S/T,d=(0,A.T5)(b,L),F=(0,A.T)(b,n),D=(0,A.T)(L,E);(0,A.s0)(F,D);var N=d,k=(0,A.j9)(F,N),O=(0,A.j9)(N,N),B=k*k-O*((0,A.j9)(F,F)-1);if(!(B<0)){var z=(0,i._b)(B),U=(0,A.T)(N,(-k-z)/O);if((0,A.s0)(U,F),U=(0,A.Y1)(U),!o)return U;var ut,H=w[0],J=p[0],nt=w[1],it=p[1];J<H&&(ut=H,H=J,J=ut);var Q=J-H,j=(0,i.Wn)(Q-i.pi)<i.Ho;if(!j&&it<nt&&(ut=nt,nt=it,it=ut),j||Q<i.Ho?j?nt+it>0^U[1]<((0,i.Wn)(U[0]-H)<i.Ho?nt:it):nt<=U[1]&&U[1]<=it:Q>i.pi^(H<=U[0]&&U[0]<=J)){var G=(0,A.T)(N,(-k+z)/O);return(0,A.s0)(G,F),[U,(0,A.Y1)(G)]}}}function h(w,p){var o=l?y:i.pi-y,v=0;return w<-o?v|=1:w>o&&(v|=2),p<-o?v|=4:p>o&&(v|=8),v}return(0,C.Z)(c,function f(w){var p,o,v,M,b;return{lineStart:function(){M=v=!1,b=1},point:function(L,x){var T,S=[L,x],n=c(L,x),E=l?n?0:h(L,x):n?h(L+(L<0?i.pi:-i.pi),x):0;if(!p&&(M=v=n)&&w.lineStart(),n!==v&&(!(T=m(p,S))||(0,P.Z)(p,T)||(0,P.Z)(S,T))&&(S[2]=1),n!==v)b=0,n?(w.lineStart(),T=m(S,p),w.point(T[0],T[1])):(T=m(p,S),w.point(T[0],T[1],2),w.lineEnd()),p=T;else if(a&&p&&l^n){var d;!(E&o)&&(d=m(S,p,!0))&&(b=0,l?(w.lineStart(),w.point(d[0][0],d[0][1]),w.point(d[1][0],d[1][1]),w.lineEnd()):(w.point(d[1][0],d[1][1]),w.lineEnd(),w.lineStart(),w.point(d[0][0],d[0][1],3)))}n&&(!p||!(0,P.Z)(p,S))&&w.point(S[0],S[1]),p=S,v=n,o=E},lineEnd:function(){v&&w.lineEnd(),p=null},clean:function(){return b|(M&&v)<<1}}},function s(w,p,o,v){(0,g.m)(v,y,r,o,w,p)},l?[0,-y]:[-i.pi,y-i.pi])}},97023:function(q,W,t){"use strict";t.d(W,{Z:function(){return u}});var A=t(85272),g=t(46225),i=t(39695),P=t(23071),C=t(33064);function u(r,l,a,s){return function(c){var p,o,v,f=l(c),m=(0,A.Z)(),h=l(m),w=!1,M={point:b,lineStart:x,lineEnd:S,polygonStart:function(){M.point=T,M.lineStart=n,M.lineEnd=E,o=[],p=[]},polygonEnd:function(){M.point=b,M.lineStart=x,M.lineEnd=S,o=(0,C.TS)(o);var d=(0,P.Z)(p,s);o.length?(w||(c.polygonStart(),w=!0),(0,g.Z)(o,e,d,a,c)):d&&(w||(c.polygonStart(),w=!0),c.lineStart(),a(null,null,1,c),c.lineEnd()),w&&(c.polygonEnd(),w=!1),o=p=null},sphere:function(){c.polygonStart(),c.lineStart(),a(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function b(d,F){r(d,F)&&c.point(d,F)}function L(d,F){f.point(d,F)}function x(){M.point=L,f.lineStart()}function S(){M.point=b,f.lineEnd()}function T(d,F){v.push([d,F]),h.point(d,F)}function n(){h.lineStart(),v=[]}function E(){T(v[0][0],v[0][1]),h.lineEnd();var D,k,O,B,d=h.clean(),F=m.result(),N=F.length;if(v.pop(),p.push(v),v=null,N){if(1&d){if((k=(O=F[0]).length-1)>0){for(w||(c.polygonStart(),w=!0),c.lineStart(),D=0;D<k;++D)c.point((B=O[D])[0],B[1]);c.lineEnd()}return}N>1&&2&d&&F.push(F.pop().concat(F.shift())),o.push(F.filter(y))}}return M}}function y(r){return r.length>1}function e(r,l){return((r=r.x)[0]<0?r[1]-i.ou-i.Ho:i.ou-r[1])-((l=l.x)[0]<0?l[1]-i.ou-i.Ho:i.ou-l[1])}},87605:function(q,W,t){"use strict";t.d(W,{Z:function(){return e}});var A=t(39695),g=t(85272);var P=t(46225),C=t(33064),u=1e9,y=-u;function e(r,l,a,s){function c(p,o){return r<=p&&p<=a&&l<=o&&o<=s}function f(p,o,v,M){var b=0,L=0;if(null==p||(b=m(p,v))!==(L=m(o,v))||w(p,o)<0^v>0)do{M.point(0===b||3===b?r:a,b>1?s:l)}while((b=(b+v+4)%4)!==L);else M.point(o[0],o[1])}function m(p,o){return(0,A.Wn)(p[0]-r)<A.Ho?o>0?0:3:(0,A.Wn)(p[0]-a)<A.Ho?o>0?2:1:(0,A.Wn)(p[1]-l)<A.Ho?o>0?1:0:o>0?3:2}function h(p,o){return w(p.x,o.x)}function w(p,o){var v=m(p,1),M=m(o,1);return v!==M?v-M:0===v?o[1]-p[1]:1===v?p[0]-o[0]:2===v?p[1]-o[1]:o[0]-p[0]}return function(p){var M,b,L,x,S,T,n,E,d,F,D,o=p,v=(0,g.Z)(),N={point:k,lineStart:function U(){N.point=J,b&&b.push(L=[]),F=!0,d=!1,n=E=NaN},lineEnd:function H(){M&&(J(x,S),T&&d&&v.rejoin(),M.push(v.result())),N.point=k,d&&o.lineEnd()},polygonStart:function B(){o=v,M=[],b=[],D=!0},polygonEnd:function z(){var nt=function O(){for(var nt=0,it=0,ut=b.length;it<ut;++it)for(var K,at,Q=b[it],j=1,Z=Q.length,G=Q[0],$=G[0],X=G[1];j<Z;++j)K=$,at=X,$=(G=Q[j])[0],X=G[1],at<=s?X>s&&($-K)*(s-at)>(X-at)*(r-K)&&++nt:X<=s&&($-K)*(s-at)<(X-at)*(r-K)&&--nt;return nt}(),it=D&&nt,ut=(M=(0,C.TS)(M)).length;(it||ut)&&(p.polygonStart(),it&&(p.lineStart(),f(null,null,1,p),p.lineEnd()),ut&&(0,P.Z)(M,h,nt,f,p),p.polygonEnd()),o=p,M=b=L=null}};function k(nt,it){c(nt,it)&&o.point(nt,it)}function J(nt,it){var ut=c(nt,it);if(b&&L.push([nt,it]),F)x=nt,S=it,T=ut,F=!1,ut&&(o.lineStart(),o.point(nt,it));else if(ut&&d)o.point(nt,it);else{var Q=[n=Math.max(y,Math.min(u,n)),E=Math.max(y,Math.min(u,E))],j=[nt=Math.max(y,Math.min(u,nt)),it=Math.max(y,Math.min(u,it))];!function i(r,l,a,s,c,f){var L,m=r[0],h=r[1],o=0,v=1,M=l[0]-m,b=l[1]-h;if(L=a-m,M||!(L>0)){if(L/=M,M<0){if(L<o)return;L<v&&(v=L)}else if(M>0){if(L>v)return;L>o&&(o=L)}if(L=c-m,M||!(L<0)){if(L/=M,M<0){if(L>v)return;L>o&&(o=L)}else if(M>0){if(L<o)return;L<v&&(v=L)}if(L=s-h,b||!(L>0)){if(L/=b,b<0){if(L<o)return;L<v&&(v=L)}else if(b>0){if(L>v)return;L>o&&(o=L)}if(L=f-h,b||!(L<0)){if(L/=b,b<0){if(L>v)return;L>o&&(o=L)}else if(b>0){if(L<o)return;L<v&&(v=L)}return o>0&&(r[0]=m+o*M,r[1]=h+o*b),v<1&&(l[0]=m+v*M,l[1]=h+v*b),!0}}}}}(Q,j,r,l,a,s)?ut&&(o.lineStart(),o.point(nt,it),D=!1):(d||(o.lineStart(),o.point(Q[0],Q[1])),o.point(j[0],j[1]),ut||o.lineEnd(),D=!1)}n=nt,E=it,d=ut}return N}}},46225:function(q,W,t){"use strict";t.d(W,{Z:function(){return P}});var A=t(67108),g=t(39695);function i(u,y,e,r){this.x=u,this.z=y,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function P(u,y,e,r,l){var c,f,a=[],s=[];if(u.forEach(function(v){if(!((M=v.length-1)<=0)){var M,x,b=v[0],L=v[M];if((0,A.Z)(b,L)){if(!b[2]&&!L[2]){for(l.lineStart(),c=0;c<M;++c)l.point((b=v[c])[0],b[1]);return void l.lineEnd()}L[0]+=2*g.Ho}a.push(x=new i(b,v,null,!0)),s.push(x.o=new i(b,null,x,!1)),a.push(x=new i(L,v,null,!1)),s.push(x.o=new i(L,null,x,!0))}}),a.length){for(s.sort(y),C(a),C(s),c=0,f=s.length;c<f;++c)s[c].e=e=!e;for(var h,w,m=a[0];;){for(var p=m,o=!0;p.v;)if((p=p.n)===m)return;h=p.z,l.lineStart();do{if(p.v=p.o.v=!0,p.e){if(o)for(c=0,f=h.length;c<f;++c)l.point((w=h[c])[0],w[1]);else r(p.x,p.n.x,1,l);p=p.n}else{if(o)for(c=(h=p.p.z).length-1;c>=0;--c)l.point((w=h[c])[0],w[1]);else r(p.x,p.p.x,-1,l);p=p.p}h=(p=p.o).z,o=!o}while(!p.v);l.lineEnd()}}}function C(u){if(y=u.length){for(var y,l,e=0,r=u[0];++e<y;)r.n=l=u[e],l.p=r,r=l;r.n=l=u[0],l.p=r}}},96059:function(q,W,t){"use strict";function A(g,i){function P(C,u){return C=g(C,u),i(C[0],C[1])}return g.invert&&i.invert&&(P.invert=function(C,u){return(C=i.invert(C,u))&&g.invert(C[0],C[1])}),P}t.d(W,{Z:function(){return A}})},8593:function(q,W,t){"use strict";function A(g){return g}t.d(W,{Z:function(){return A}})},27362:function(q,W,t){"use strict";t.r(W),t.d(W,{geoAlbers:function(){return xr},geoAlbersUsa:function(){return re},geoArea:function(){return A.ZP},geoAzimuthalEqualArea:function(){return ve.Z},geoAzimuthalEqualAreaRaw:function(){return ve.l},geoAzimuthalEquidistant:function(){return be.Z},geoAzimuthalEquidistantRaw:function(){return be.N},geoBounds:function(){return g.Z},geoCentroid:function(){return i.Z},geoCircle:function(){return P.Z},geoClipAntimeridian:function(){return C.Z},geoClipCircle:function(){return u.Z},geoClipExtent:function(){return e},geoClipRectangle:function(){return y.Z},geoConicConformal:function(){return nr},geoConicConformalRaw:function(){return ar},geoConicEqualArea:function(){return Ye},geoConicEqualAreaRaw:function(){return Ne},geoConicEquidistant:function(){return Ht},geoConicEquidistantRaw:function(){return Ut},geoContains:function(){return B},geoDistance:function(){return T},geoEqualEarth:function(){return sr},geoEqualEarthRaw:function(){return De},geoEquirectangular:function(){return cr.Z},geoEquirectangularRaw:function(){return cr.k},geoGnomonic:function(){return yr.Z},geoGnomonicRaw:function(){return yr.M},geoGraticule:function(){return J},geoGraticule10:function(){return nt},geoIdentity:function(){return Pr},geoInterpolate:function(){return it.Z},geoLength:function(){return L},geoMercator:function(){return Re},geoMercatorRaw:function(){return Te},geoNaturalEarth1:function(){return Jr.Z},geoNaturalEarth1Raw:function(){return Jr.K},geoOrthographic:function(){return Mr.Z},geoOrthographicRaw:function(){return Mr.I},geoPath:function(){return Pe},geoProjection:function(){return Ge.Z},geoProjectionMutator:function(){return Ge.r},geoRotation:function(){return Ae.Z},geoStereographic:function(){return Nr},geoStereographicRaw:function(){return nn},geoStream:function(){return c.Z},geoTransform:function(){return dr.Z},geoTransverseMercator:function(){return hn},geoTransverseMercatorRaw:function(){return Dn}});var A=t(97860),g=t(77338),i=t(66624),P=t(7613),C=t(87070),u=t(1457),y=t(87605);function e(){var an,dn,pn,hr=0,Ar=0,Br=960,Or=500;return pn={stream:function(wn){return an&&dn===wn?an:an=(0,y.Z)(hr,Ar,Br,Or)(dn=wn)},extent:function(wn){return arguments.length?(hr=+wn[0][0],Ar=+wn[0][1],Br=+wn[1][0],Or=+wn[1][1],an=dn=null,pn):[[hr,Ar],[Br,Or]]}}}var m,h,w,r=t(23071),l=t(33940),a=t(39695),s=t(73182),c=t(72736),f=(0,l.Z)(),p={sphere:s.Z,point:s.Z,lineStart:function o(){p.point=M,p.lineEnd=v},lineEnd:s.Z,polygonStart:s.Z,polygonEnd:s.Z};function v(){p.point=p.lineEnd=s.Z}function M(hr,Ar){m=hr*=a.uR,h=(0,a.O$)(Ar*=a.uR),w=(0,a.mC)(Ar),p.point=b}function b(hr,Ar){hr*=a.uR;var Br=(0,a.O$)(Ar*=a.uR),Or=(0,a.mC)(Ar),an=(0,a.Wn)(hr-m),dn=(0,a.mC)(an),wn=Or*(0,a.O$)(an),Ln=w*Br-h*Or*dn,Qn=h*Br+w*Or*dn;f.add((0,a.fv)((0,a._b)(wn*wn+Ln*Ln),Qn)),m=hr,h=Br,w=Or}function L(hr){return f.reset(),(0,c.Z)(hr,p),+f}var x=[null,null],S={type:"LineString",coordinates:x};function T(hr,Ar){return x[0]=hr,x[1]=Ar,L(S)}var n={Feature:function(hr,Ar){return d(hr.geometry,Ar)},FeatureCollection:function(hr,Ar){for(var Br=hr.features,Or=-1,an=Br.length;++Or<an;)if(d(Br[Or].geometry,Ar))return!0;return!1}},E={Sphere:function(){return!0},Point:function(hr,Ar){return F(hr.coordinates,Ar)},MultiPoint:function(hr,Ar){for(var Br=hr.coordinates,Or=-1,an=Br.length;++Or<an;)if(F(Br[Or],Ar))return!0;return!1},LineString:function(hr,Ar){return D(hr.coordinates,Ar)},MultiLineString:function(hr,Ar){for(var Br=hr.coordinates,Or=-1,an=Br.length;++Or<an;)if(D(Br[Or],Ar))return!0;return!1},Polygon:function(hr,Ar){return N(hr.coordinates,Ar)},MultiPolygon:function(hr,Ar){for(var Br=hr.coordinates,Or=-1,an=Br.length;++Or<an;)if(N(Br[Or],Ar))return!0;return!1},GeometryCollection:function(hr,Ar){for(var Br=hr.geometries,Or=-1,an=Br.length;++Or<an;)if(d(Br[Or],Ar))return!0;return!1}};function d(hr,Ar){return!(!hr||!E.hasOwnProperty(hr.type))&&E[hr.type](hr,Ar)}function F(hr,Ar){return 0===T(hr,Ar)}function D(hr,Ar){for(var Br,Or,an,dn=0,pn=hr.length;dn<pn;dn++){if(0===(Or=T(hr[dn],Ar))||dn>0&&(an=T(hr[dn],hr[dn-1]))>0&&Br<=an&&Or<=an&&(Br+Or-an)*(1-Math.pow((Br-Or)/an,2))<a.aW*an)return!0;Br=Or}return!1}function N(hr,Ar){return!!(0,r.Z)(hr.map(k),O(Ar))}function k(hr){return(hr=hr.map(O)).pop(),hr}function O(hr){return[hr[0]*a.uR,hr[1]*a.uR]}function B(hr,Ar){return(hr&&n.hasOwnProperty(hr.type)?n[hr.type]:d)(hr,Ar)}var z=t(33064);function U(hr,Ar,Br){var Or=(0,z.w6)(hr,Ar-a.Ho,Br).concat(Ar);return function(an){return Or.map(function(dn){return[an,dn]})}}function H(hr,Ar,Br){var Or=(0,z.w6)(hr,Ar-a.Ho,Br).concat(Ar);return function(an){return Or.map(function(dn){return[dn,an]})}}function J(){var hr,Ar,Br,Or,an,dn,pn,wn,Bn,Wn,wr,en,Ln=10,Qn=Ln,Nn=90,Zn=360,tn=2.5;function gn(){return{type:"MultiLineString",coordinates:Fn()}}function Fn(){return(0,z.w6)((0,a.mD)(Or/Nn)*Nn,Br,Nn).map(wr).concat((0,z.w6)((0,a.mD)(wn/Zn)*Zn,pn,Zn).map(en)).concat((0,z.w6)((0,a.mD)(Ar/Ln)*Ln,hr,Ln).filter(function(Tn){return(0,a.Wn)(Tn%Nn)>a.Ho}).map(Bn)).concat((0,z.w6)((0,a.mD)(dn/Qn)*Qn,an,Qn).filter(function(Tn){return(0,a.Wn)(Tn%Zn)>a.Ho}).map(Wn))}return gn.lines=function(){return Fn().map(function(Tn){return{type:"LineString",coordinates:Tn}})},gn.outline=function(){return{type:"Polygon",coordinates:[wr(Or).concat(en(pn).slice(1),wr(Br).reverse().slice(1),en(wn).reverse().slice(1))]}},gn.extent=function(Tn){return arguments.length?gn.extentMajor(Tn).extentMinor(Tn):gn.extentMinor()},gn.extentMajor=function(Tn){return arguments.length?(wn=+Tn[0][1],pn=+Tn[1][1],(Or=+Tn[0][0])>(Br=+Tn[1][0])&&(Tn=Or,Or=Br,Br=Tn),wn>pn&&(Tn=wn,wn=pn,pn=Tn),gn.precision(tn)):[[Or,wn],[Br,pn]]},gn.extentMinor=function(Tn){return arguments.length?(dn=+Tn[0][1],an=+Tn[1][1],(Ar=+Tn[0][0])>(hr=+Tn[1][0])&&(Tn=Ar,Ar=hr,hr=Tn),dn>an&&(Tn=dn,dn=an,an=Tn),gn.precision(tn)):[[Ar,dn],[hr,an]]},gn.step=function(Tn){return arguments.length?gn.stepMajor(Tn).stepMinor(Tn):gn.stepMinor()},gn.stepMajor=function(Tn){return arguments.length?(Nn=+Tn[0],Zn=+Tn[1],gn):[Nn,Zn]},gn.stepMinor=function(Tn){return arguments.length?(Ln=+Tn[0],Qn=+Tn[1],gn):[Ln,Qn]},gn.precision=function(Tn){return arguments.length?(tn=+Tn,Bn=U(dn,an,90),Wn=H(Ar,hr,tn),wr=U(wn,pn,90),en=H(Or,Br,tn),gn):tn},gn.extentMajor([[-180,-90+a.Ho],[180,90-a.Ho]]).extentMinor([[-180,-80-a.Ho],[180,80+a.Ho]])}function nt(){return J()()}var Z,G,K,at,it=t(83074),ut=t(8593),Q=(0,l.Z)(),j=(0,l.Z)(),$={point:s.Z,lineStart:s.Z,lineEnd:s.Z,polygonStart:function(){$.lineStart=X,$.lineEnd=st},polygonEnd:function(){$.lineStart=$.lineEnd=$.point=s.Z,Q.add((0,a.Wn)(j)),j.reset()},result:function(){var hr=Q/2;return Q.reset(),hr}};function X(){$.point=rt}function rt(hr,Ar){$.point=et,Z=K=hr,G=at=Ar}function et(hr,Ar){j.add(at*hr-K*Ar),K=hr,at=Ar}function st(){et(Z,G)}var Vt,te,Qt,Bt,dt=$,bt=t(3559),gt=0,Lt=0,It=0,Mt=0,xt=0,At=0,Gt=0,Wt=0,Pt=0,Ot={point:qt,lineStart:ie,lineEnd:de,polygonStart:function(){Ot.lineStart=Fe,Ot.lineEnd=Kt},polygonEnd:function(){Ot.point=qt,Ot.lineStart=ie,Ot.lineEnd=de},result:function(){var hr=Pt?[Gt/Pt,Wt/Pt]:At?[Mt/At,xt/At]:It?[gt/It,Lt/It]:[NaN,NaN];return gt=Lt=It=Mt=xt=At=Gt=Wt=Pt=0,hr}};function qt(hr,Ar){gt+=hr,Lt+=Ar,++It}function ie(){Ot.point=oe}function oe(hr,Ar){Ot.point=pe,qt(Qt=hr,Bt=Ar)}function pe(hr,Ar){var Br=hr-Qt,Or=Ar-Bt,an=(0,a._b)(Br*Br+Or*Or);Mt+=an*(Qt+hr)/2,xt+=an*(Bt+Ar)/2,At+=an,qt(Qt=hr,Bt=Ar)}function de(){Ot.point=qt}function Fe(){Ot.point=Et}function Kt(){St(Vt,te)}function Et(hr,Ar){Ot.point=St,qt(Vt=Qt=hr,te=Bt=Ar)}function St(hr,Ar){var Br=hr-Qt,Or=Ar-Bt,an=(0,a._b)(Br*Br+Or*Or);Mt+=an*(Qt+hr)/2,xt+=an*(Bt+Ar)/2,At+=an,Gt+=(an=Bt*hr-Qt*Ar)*(Qt+hr),Wt+=an*(Bt+Ar),Pt+=3*an,qt(Qt=hr,Bt=Ar)}var Dt=Ot;function Ft(hr){this._context=hr}Ft.prototype={_radius:4.5,pointRadius:function(hr){return this._radius=hr,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(hr,Ar){switch(this._point){case 0:this._context.moveTo(hr,Ar),this._point=1;break;case 1:this._context.lineTo(hr,Ar);break;default:this._context.moveTo(hr+this._radius,Ar),this._context.arc(hr,Ar,this._radius,0,a.BZ)}},result:s.Z};var Rt,wt,ft,pt,kt,Nt=(0,l.Z)(),Zt={point:s.Z,lineStart:function(){Zt.point=ee},lineEnd:function(){Rt&&se(wt,ft),Zt.point=s.Z},polygonStart:function(){Rt=!0},polygonEnd:function(){Rt=null},result:function(){var hr=+Nt;return Nt.reset(),hr}};function ee(hr,Ar){Zt.point=se,wt=pt=hr,ft=kt=Ar}function se(hr,Ar){Nt.add((0,a._b)((pt-=hr)*pt+(kt-=Ar)*kt)),pt=hr,kt=Ar}var Be=Zt;function Ke(){this._string=[]}function xe(hr){return"m0,"+hr+"a"+hr+","+hr+" 0 1,1 0,"+-2*hr+"a"+hr+","+hr+" 0 1,1 0,"+2*hr+"z"}function Pe(hr,Ar){var Or,an,Br=4.5;function dn(pn){return pn&&("function"==typeof Br&&an.pointRadius(+Br.apply(this,arguments)),(0,c.Z)(pn,Or(an))),an.result()}return dn.area=function(pn){return(0,c.Z)(pn,Or(dt)),dt.result()},dn.measure=function(pn){return(0,c.Z)(pn,Or(Be)),Be.result()},dn.bounds=function(pn){return(0,c.Z)(pn,Or(bt.Z)),bt.Z.result()},dn.centroid=function(pn){return(0,c.Z)(pn,Or(Dt)),Dt.result()},dn.projection=function(pn){return arguments.length?(Or=null==pn?(hr=null,ut.Z):(hr=pn).stream,dn):hr},dn.context=function(pn){return arguments.length?(an=null==pn?(Ar=null,new Ke):new Ft(Ar=pn),"function"!=typeof Br&&an.pointRadius(Br),dn):Ar},dn.pointRadius=function(pn){return arguments.length?(Br="function"==typeof pn?pn:(an.pointRadius(+pn),+pn),dn):Br},dn.projection(hr).context(Ar)}Ke.prototype={_radius:4.5,_circle:xe(4.5),pointRadius:function(hr){return(hr=+hr)!==this._radius&&(this._radius=hr,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(hr,Ar){switch(this._point){case 0:this._string.push("M",hr,",",Ar),this._point=1;break;case 1:this._string.push("L",hr,",",Ar);break;default:null==this._circle&&(this._circle=xe(this._radius)),this._string.push("M",hr,",",Ar,this._circle)}},result:function(){if(this._string.length){var hr=this._string.join("");return this._string=[],hr}return null}};var Ge=t(15002);function gr(hr){var Ar=0,Br=a.pi/3,Or=(0,Ge.r)(hr),an=Or(Ar,Br);return an.parallels=function(dn){return arguments.length?Or(Ar=dn[0]*a.uR,Br=dn[1]*a.uR):[Ar*a.RW,Br*a.RW]},an}function Ne(hr,Ar){var Br=(0,a.O$)(hr),Or=(Br+(0,a.O$)(Ar))/2;if((0,a.Wn)(Or)<a.Ho)return function ue(hr){var Ar=(0,a.mC)(hr);function Br(Or,an){return[Or*Ar,(0,a.O$)(an)/Ar]}return Br.invert=function(Or,an){return[Or/Ar,(0,a.ZR)(an*Ar)]},Br}(hr);var an=1+Br*(2*Or-Br),dn=(0,a._b)(an)/Or;function pn(wn,Ln){var Qn=(0,a._b)(an-2*Or*(0,a.O$)(Ln))/Or;return[Qn*(0,a.O$)(wn*=Or),dn-Qn*(0,a.mC)(wn)]}return pn.invert=function(wn,Ln){var Qn=dn-Ln,Nn=(0,a.fv)(wn,(0,a.Wn)(Qn))*(0,a.Xx)(Qn);return Qn*Or<0&&(Nn-=a.pi*(0,a.Xx)(wn)*(0,a.Xx)(Qn)),[Nn/Or,(0,a.ZR)((an-(wn*wn+Qn*Qn)*Or*Or)/(2*Or))]},pn}function Ye(){return gr(Ne).scale(155.424).center([0,33.6442])}function xr(){return Ye().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var rr=t(47589);function re(){var hr,Ar,Or,dn,wn,Ln,Br=xr(),an=Ye().rotate([154,0]).center([-2,58.5]).parallels([55,65]),pn=Ye().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Qn={point:function(Bn,Wn){Ln=[Bn,Wn]}};function Nn(Bn){var Wn=Bn[0],wr=Bn[1];return Ln=null,Or.point(Wn,wr),Ln||(dn.point(Wn,wr),Ln)||(wn.point(Wn,wr),Ln)}function Zn(){return hr=Ar=null,Nn}return Nn.invert=function(Bn){var Wn=Br.scale(),wr=Br.translate(),en=(Bn[0]-wr[0])/Wn,tn=(Bn[1]-wr[1])/Wn;return(tn>=.12&&tn<.234&&en>=-.425&&en<-.214?an:tn>=.166&&tn<.234&&en>=-.214&&en<-.115?pn:Br).invert(Bn)},Nn.stream=function(Bn){return hr&&Ar===Bn?hr:hr=function ce(hr){var Ar=hr.length;return{point:function(Br,Or){for(var an=-1;++an<Ar;)hr[an].point(Br,Or)},sphere:function(){for(var Br=-1;++Br<Ar;)hr[Br].sphere()},lineStart:function(){for(var Br=-1;++Br<Ar;)hr[Br].lineStart()},lineEnd:function(){for(var Br=-1;++Br<Ar;)hr[Br].lineEnd()},polygonStart:function(){for(var Br=-1;++Br<Ar;)hr[Br].polygonStart()},polygonEnd:function(){for(var Br=-1;++Br<Ar;)hr[Br].polygonEnd()}}}([Br.stream(Ar=Bn),an.stream(Bn),pn.stream(Bn)])},Nn.precision=function(Bn){return arguments.length?(Br.precision(Bn),an.precision(Bn),pn.precision(Bn),Zn()):Br.precision()},Nn.scale=function(Bn){return arguments.length?(Br.scale(Bn),an.scale(.35*Bn),pn.scale(Bn),Nn.translate(Br.translate())):Br.scale()},Nn.translate=function(Bn){if(!arguments.length)return Br.translate();var Wn=Br.scale(),wr=+Bn[0],en=+Bn[1];return Or=Br.translate(Bn).clipExtent([[wr-.455*Wn,en-.238*Wn],[wr+.455*Wn,en+.238*Wn]]).stream(Qn),dn=an.translate([wr-.307*Wn,en+.201*Wn]).clipExtent([[wr-.425*Wn+a.Ho,en+.12*Wn+a.Ho],[wr-.214*Wn-a.Ho,en+.234*Wn-a.Ho]]).stream(Qn),wn=pn.translate([wr-.205*Wn,en+.212*Wn]).clipExtent([[wr-.214*Wn+a.Ho,en+.166*Wn+a.Ho],[wr-.115*Wn-a.Ho,en+.234*Wn-a.Ho]]).stream(Qn),Zn()},Nn.fitExtent=function(Bn,Wn){return(0,rr.qg)(Nn,Bn,Wn)},Nn.fitSize=function(Bn,Wn){return(0,rr.mF)(Nn,Bn,Wn)},Nn.fitWidth=function(Bn,Wn){return(0,rr.V6)(Nn,Bn,Wn)},Nn.fitHeight=function(Bn,Wn){return(0,rr.rf)(Nn,Bn,Wn)},Nn.scale(1070)}var ve=t(12956),be=t(17889),Ae=t(49386);function Te(hr,Ar){return[hr,(0,a.cM)((0,a.OR)((a.ou+Ar)/2))]}function Re(){return Ie(Te).scale(961/a.BZ)}function Ie(hr){var wn,Ln,Qn,Ar=(0,Ge.Z)(hr),Br=Ar.center,Or=Ar.scale,an=Ar.translate,dn=Ar.clipExtent,pn=null;function Nn(){var Zn=a.pi*Or(),Bn=Ar((0,Ae.Z)(Ar.rotate()).invert([0,0]));return dn(null==pn?[[Bn[0]-Zn,Bn[1]-Zn],[Bn[0]+Zn,Bn[1]+Zn]]:hr===Te?[[Math.max(Bn[0]-Zn,pn),wn],[Math.min(Bn[0]+Zn,Ln),Qn]]:[[pn,Math.max(Bn[1]-Zn,wn)],[Ln,Math.min(Bn[1]+Zn,Qn)]])}return Ar.scale=function(Zn){return arguments.length?(Or(Zn),Nn()):Or()},Ar.translate=function(Zn){return arguments.length?(an(Zn),Nn()):an()},Ar.center=function(Zn){return arguments.length?(Br(Zn),Nn()):Br()},Ar.clipExtent=function(Zn){return arguments.length?(null==Zn?pn=wn=Ln=Qn=null:(pn=+Zn[0][0],wn=+Zn[0][1],Ln=+Zn[1][0],Qn=+Zn[1][1]),Nn()):null==pn?null:[[pn,wn],[Ln,Qn]]},Nn()}function Xe(hr){return(0,a.OR)((a.ou+hr)/2)}function ar(hr,Ar){var Br=(0,a.mC)(hr),Or=hr===Ar?(0,a.O$)(hr):(0,a.cM)(Br/(0,a.mC)(Ar))/(0,a.cM)(Xe(Ar)/Xe(hr)),an=Br*(0,a.sQ)(Xe(hr),Or)/Or;if(!Or)return Te;function dn(pn,wn){an>0?wn<-a.ou+a.Ho&&(wn=-a.ou+a.Ho):wn>a.ou-a.Ho&&(wn=a.ou-a.Ho);var Ln=an/(0,a.sQ)(Xe(wn),Or);return[Ln*(0,a.O$)(Or*pn),an-Ln*(0,a.mC)(Or*pn)]}return dn.invert=function(pn,wn){var Ln=an-wn,Qn=(0,a.Xx)(Or)*(0,a._b)(pn*pn+Ln*Ln),Nn=(0,a.fv)(pn,(0,a.Wn)(Ln))*(0,a.Xx)(Ln);return Ln*Or<0&&(Nn-=a.pi*(0,a.Xx)(pn)*(0,a.Xx)(Ln)),[Nn/Or,2*(0,a.z4)((0,a.sQ)(an/Qn,1/Or))-a.ou]},dn}function nr(){return gr(ar).scale(109.5).parallels([30,30])}Te.invert=function(hr,Ar){return[hr,2*(0,a.z4)((0,a.Qq)(Ar))-a.ou]};var cr=t(97492);function Ut(hr,Ar){var Br=(0,a.mC)(hr),Or=hr===Ar?(0,a.O$)(hr):(Br-(0,a.mC)(Ar))/(Ar-hr),an=Br/Or+hr;if((0,a.Wn)(Or)<a.Ho)return cr.k;function dn(pn,wn){var Ln=an-wn,Qn=Or*pn;return[Ln*(0,a.O$)(Qn),an-Ln*(0,a.mC)(Qn)]}return dn.invert=function(pn,wn){var Ln=an-wn,Qn=(0,a.fv)(pn,(0,a.Wn)(Ln))*(0,a.Xx)(Ln);return Ln*Or<0&&(Qn-=a.pi*(0,a.Xx)(pn)*(0,a.Xx)(Ln)),[Qn/Or,an-(0,a.Xx)(Or)*(0,a._b)(pn*pn+Ln*Ln)]},dn}function Ht(){return gr(Ut).scale(131.154).center([0,13.9389])}var Se=1.340264,Ce=-.081106,We=893e-6,qe=.003796,or=(0,a._b)(3)/2;function De(hr,Ar){var Br=(0,a.ZR)(or*(0,a.O$)(Ar)),Or=Br*Br,an=Or*Or*Or;return[hr*(0,a.mC)(Br)/(or*(Se+3*Ce*Or+an*(7*We+9*qe*Or))),Br*(Se+Ce*Or+an*(We+qe*Or))]}function sr(){return(0,Ge.Z)(De).scale(177.158)}De.invert=function(hr,Ar){for(var pn,Br=Ar,Or=Br*Br,an=Or*Or*Or,dn=0;dn<12&&(an=(Or=(Br-=pn=(Br*(Se+Ce*Or+an*(We+qe*Or))-Ar)/(Se+3*Ce*Or+an*(7*We+9*qe*Or)))*Br)*Or*Or,!((0,a.Wn)(pn)<a.aW));++dn);return[or*hr*(Se+3*Ce*Or+an*(7*We+9*qe*Or))/(0,a.mC)(Br),(0,a.ZR)((0,a.O$)(Br)/or)]};var yr=t(98936),dr=t(64684);function Pr(){var pn,wn,Qn,Nn,Zn,tn,gn,hr=1,Ar=0,Br=0,Or=1,an=1,dn=0,Ln=null,Bn=1,Wn=1,wr=(0,dr.l)({point:function(Mn,In){var Gn=Tn([Mn,In]);this.stream.point(Gn[0],Gn[1])}}),en=ut.Z;function Fn(){return Bn=hr*Or,Wn=hr*an,tn=gn=null,Tn}function Tn(Mn){var In=Mn[0]*Bn,Gn=Mn[1]*Wn;if(dn){var ua=Gn*pn-In*wn;In=In*pn+Gn*wn,Gn=ua}return[In+Ar,Gn+Br]}return Tn.invert=function(Mn){var In=Mn[0]-Ar,Gn=Mn[1]-Br;if(dn){var ua=Gn*pn+In*wn;In=In*pn-Gn*wn,Gn=ua}return[In/Bn,Gn/Wn]},Tn.stream=function(Mn){return tn&&gn===Mn?tn:tn=wr(en(gn=Mn))},Tn.postclip=function(Mn){return arguments.length?(en=Mn,Ln=Qn=Nn=Zn=null,Fn()):en},Tn.clipExtent=function(Mn){return arguments.length?(en=null==Mn?(Ln=Qn=Nn=Zn=null,ut.Z):(0,y.Z)(Ln=+Mn[0][0],Qn=+Mn[0][1],Nn=+Mn[1][0],Zn=+Mn[1][1]),Fn()):null==Ln?null:[[Ln,Qn],[Nn,Zn]]},Tn.scale=function(Mn){return arguments.length?(hr=+Mn,Fn()):hr},Tn.translate=function(Mn){return arguments.length?(Ar=+Mn[0],Br=+Mn[1],Fn()):[Ar,Br]},Tn.angle=function(Mn){return arguments.length?(wn=(0,a.O$)(dn=Mn%360*a.uR),pn=(0,a.mC)(dn),Fn()):dn*a.RW},Tn.reflectX=function(Mn){return arguments.length?(Or=Mn?-1:1,Fn()):Or<0},Tn.reflectY=function(Mn){return arguments.length?(an=Mn?-1:1,Fn()):an<0},Tn.fitExtent=function(Mn,In){return(0,rr.qg)(Tn,Mn,In)},Tn.fitSize=function(Mn,In){return(0,rr.mF)(Tn,Mn,In)},Tn.fitWidth=function(Mn,In){return(0,rr.V6)(Tn,Mn,In)},Tn.fitHeight=function(Mn,In){return(0,rr.rf)(Tn,Mn,In)},Tn}var Jr=t(26867),Mr=t(57962),Wr=t(25382);function nn(hr,Ar){var Br=(0,a.mC)(Ar),Or=1+(0,a.mC)(hr)*Br;return[Br*(0,a.O$)(hr)/Or,(0,a.O$)(Ar)/Or]}function Nr(){return(0,Ge.Z)(nn).scale(250).clipAngle(142)}function Dn(hr,Ar){return[(0,a.cM)((0,a.OR)((a.ou+Ar)/2)),-hr]}function hn(){var hr=Ie(Dn),Ar=hr.center,Br=hr.rotate;return hr.center=function(Or){return arguments.length?Ar([-Or[1],Or[0]]):[(Or=Ar())[1],-Or[0]]},hr.rotate=function(Or){return arguments.length?Br([Or[0],Or[1],Or.length>2?Or[2]+90:90]):[(Or=Br())[0],Or[1],Or[2]-90]},Br([0,0,90]).scale(159.155)}nn.invert=(0,Wr.O)(function(hr){return 2*(0,a.z4)(hr)}),Dn.invert=function(hr,Ar){return[-Ar,2*(0,a.z4)((0,a.Qq)(hr))-a.ou]}},83074:function(q,W,t){"use strict";t.d(W,{Z:function(){return g}});var A=t(39695);function g(i,P){var C=i[0]*A.uR,u=i[1]*A.uR,y=P[0]*A.uR,e=P[1]*A.uR,r=(0,A.mC)(u),l=(0,A.O$)(u),a=(0,A.mC)(e),s=(0,A.O$)(e),c=r*(0,A.mC)(C),f=r*(0,A.O$)(C),m=a*(0,A.mC)(y),h=a*(0,A.O$)(y),w=2*(0,A.ZR)((0,A._b)((0,A.Jy)(e-u)+r*a*(0,A.Jy)(y-C))),p=(0,A.O$)(w),o=w?function(v){var M=(0,A.O$)(v*=w)/p,b=(0,A.O$)(w-v)/p,L=b*c+M*m,x=b*f+M*h,S=b*l+M*s;return[(0,A.fv)(x,L)*A.RW,(0,A.fv)(S,(0,A._b)(L*L+x*x))*A.RW]}:function(){return[C*A.RW,u*A.RW]};return o.distance=w,o}},39695:function(q,W,t){"use strict";t.d(W,{BZ:function(){return u},Ho:function(){return A},Jy:function(){return x},Kh:function(){return b},O$:function(){return p},OR:function(){return M},Qq:function(){return f},RW:function(){return y},Wn:function(){return r},Xx:function(){return o},ZR:function(){return L},_b:function(){return v},aW:function(){return g},cM:function(){return h},fv:function(){return a},mC:function(){return s},mD:function(){return c},ou:function(){return P},pi:function(){return i},pu:function(){return C},sQ:function(){return w},uR:function(){return e},z4:function(){return l}});var A=1e-6,g=1e-12,i=Math.PI,P=i/2,C=i/4,u=2*i,y=180/i,e=i/180,r=Math.abs,l=Math.atan,a=Math.atan2,s=Math.cos,c=Math.ceil,f=Math.exp,h=(Math,Math.log),w=Math.pow,p=Math.sin,o=Math.sign||function(S){return S>0?1:S<0?-1:0},v=Math.sqrt,M=Math.tan;function b(S){return S>1?0:S<-1?i:Math.acos(S)}function L(S){return S>1?P:S<-1?-P:Math.asin(S)}function x(S){return(S=p(S/2))*S}},73182:function(q,W,t){"use strict";function A(){}t.d(W,{Z:function(){return A}})},3559:function(q,W,t){"use strict";var A=t(73182),g=1/0,i=g,P=-g,C=P;W.Z={point:function y(e,r){e<g&&(g=e),e>P&&(P=e),r<i&&(i=r),r>C&&(C=r)},lineStart:A.Z,lineEnd:A.Z,polygonStart:A.Z,polygonEnd:A.Z,result:function(){var e=[[g,i],[P,C]];return P=C=-(i=g=1/0),e}}},67108:function(q,W,t){"use strict";t.d(W,{Z:function(){return g}});var A=t(39695);function g(i,P){return(0,A.Wn)(i[0]-P[0])<A.Ho&&(0,A.Wn)(i[1]-P[1])<A.Ho}},23071:function(q,W,t){"use strict";t.d(W,{Z:function(){return u}});var A=t(33940),g=t(7620),i=t(39695),P=(0,A.Z)();function C(y){return(0,i.Wn)(y[0])<=i.pi?y[0]:(0,i.Xx)(y[0])*(((0,i.Wn)(y[0])+i.pi)%i.BZ-i.pi)}function u(y,e){var r=C(e),l=e[1],a=(0,i.O$)(l),s=[(0,i.O$)(r),-(0,i.mC)(r),0],c=0,f=0;P.reset(),1===a?l=i.ou+i.Ho:-1===a&&(l=-i.ou-i.Ho);for(var m=0,h=y.length;m<h;++m)if(p=(w=y[m]).length)for(var w,p,o=w[p-1],v=C(o),M=o[1]/2+i.pu,b=(0,i.O$)(M),L=(0,i.mC)(M),x=0;x<p;++x,v=T,b=E,L=d,o=S){var S=w[x],T=C(S),n=S[1]/2+i.pu,E=(0,i.O$)(n),d=(0,i.mC)(n),F=T-v,D=F>=0?1:-1,N=D*F,k=N>i.pi,O=b*E;if(P.add((0,i.fv)(O*D*(0,i.O$)(N),L*d+O*(0,i.mC)(N))),c+=k?F+D*i.BZ:F,k^v>=r^T>=r){var B=(0,g.T5)((0,g.Og)(o),(0,g.Og)(S));(0,g.iJ)(B);var z=(0,g.T5)(s,B);(0,g.iJ)(z);var U=(k^F>=0?-1:1)*(0,i.ZR)(z[2]);(l>U||l===U&&(B[0]||B[1]))&&(f+=k^F>=0?1:-1)}}return(c<-i.Ho||c<i.Ho&&P<-i.Ho)^1&f}},25382:function(q,W,t){"use strict";t.d(W,{O:function(){return i},W:function(){return g}});var A=t(39695);function g(P){return function(C,u){var y=(0,A.mC)(C),e=(0,A.mC)(u),r=P(y*e);return[r*e*(0,A.O$)(C),r*(0,A.O$)(u)]}}function i(P){return function(C,u){var y=(0,A._b)(C*C+u*u),e=P(y),r=(0,A.O$)(e),l=(0,A.mC)(e);return[(0,A.fv)(C*r,y*l),(0,A.ZR)(y&&u*r/y)]}}},12956:function(q,W,t){"use strict";t.d(W,{Z:function(){return C},l:function(){return P}});var A=t(39695),g=t(25382),i=t(15002),P=(0,g.W)(function(u){return(0,A._b)(2/(1+u))});function C(){return(0,i.Z)(P).scale(124.75).clipAngle(179.999)}P.invert=(0,g.O)(function(u){return 2*(0,A.ZR)(u/2)})},17889:function(q,W,t){"use strict";t.d(W,{N:function(){return P},Z:function(){return C}});var A=t(39695),g=t(25382),i=t(15002),P=(0,g.W)(function(u){return(u=(0,A.Kh)(u))&&u/(0,A.O$)(u)});function C(){return(0,i.Z)(P).scale(79.4188).clipAngle(179.999)}P.invert=(0,g.O)(function(u){return u})},97492:function(q,W,t){"use strict";t.d(W,{Z:function(){return i},k:function(){return g}});var A=t(15002);function g(P,C){return[P,C]}function i(){return(0,A.Z)(g).scale(152.63)}g.invert=g},47589:function(q,W,t){"use strict";t.d(W,{V6:function(){return u},mF:function(){return C},qg:function(){return P},rf:function(){return y}});var A=t(72736),g=t(3559);function i(e,r,l){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=a&&e.clipExtent(null),(0,A.Z)(l,e.stream(g.Z)),r(g.Z.result()),null!=a&&e.clipExtent(a),e}function P(e,r,l){return i(e,function(a){var s=r[1][0]-r[0][0],c=r[1][1]-r[0][1],f=Math.min(s/(a[1][0]-a[0][0]),c/(a[1][1]-a[0][1])),m=+r[0][0]+(s-f*(a[1][0]+a[0][0]))/2,h=+r[0][1]+(c-f*(a[1][1]+a[0][1]))/2;e.scale(150*f).translate([m,h])},l)}function C(e,r,l){return P(e,[[0,0],r],l)}function u(e,r,l){return i(e,function(a){var s=+r,c=s/(a[1][0]-a[0][0]),f=(s-c*(a[1][0]+a[0][0]))/2,m=-c*a[0][1];e.scale(150*c).translate([f,m])},l)}function y(e,r,l){return i(e,function(a){var s=+r,c=s/(a[1][1]-a[0][1]),f=-c*a[0][0],m=(s-c*(a[1][1]+a[0][1]))/2;e.scale(150*c).translate([f,m])},l)}},98936:function(q,W,t){"use strict";t.d(W,{M:function(){return P},Z:function(){return C}});var A=t(39695),g=t(25382),i=t(15002);function P(u,y){var e=(0,A.mC)(y),r=(0,A.mC)(u)*e;return[e*(0,A.O$)(u)/r,(0,A.O$)(y)/r]}function C(){return(0,i.Z)(P).scale(144.049).clipAngle(60)}P.invert=(0,g.O)(A.z4)},15002:function(q,W,t){"use strict";t.d(W,{Z:function(){return v},r:function(){return M}});var A=t(87070),g=t(1457),i=t(87605),P=t(96059),C=t(8593),u=t(39695),y=t(49386),e=t(64684),r=t(47589),l=t(7620),s=(0,u.mC)(30*u.uR);function c(b,L){return+L?function m(b,L){function x(S,T,n,E,d,F,D,N,k,O,B,z,U,H){var J=D-S,nt=N-T,it=J*J+nt*nt;if(it>4*L&&U--){var ut=E+O,Q=d+B,j=F+z,Z=(0,u._b)(ut*ut+Q*Q+j*j),G=(0,u.ZR)(j/=Z),K=(0,u.Wn)((0,u.Wn)(j)-1)<u.Ho||(0,u.Wn)(n-k)<u.Ho?(n+k)/2:(0,u.fv)(Q,ut),at=b(K,G),$=at[0],X=at[1],rt=$-S,et=X-T,st=nt*rt-J*et;(st*st/it>L||(0,u.Wn)((J*rt+nt*et)/it-.5)>.3||E*O+d*B+F*z<s)&&(x(S,T,n,E,d,F,$,X,K,ut/=Z,Q/=Z,j,U,H),H.point($,X),x($,X,K,ut,Q,j,D,N,k,O,B,z,U,H))}}return function(S){var T,n,E,d,F,D,N,k,O,B,z,U,H={point:J,lineStart:nt,lineEnd:ut,polygonStart:function(){S.polygonStart(),H.lineStart=Q},polygonEnd:function(){S.polygonEnd(),H.lineStart=nt}};function J(G,K){G=b(G,K),S.point(G[0],G[1])}function nt(){k=NaN,H.point=it,S.lineStart()}function it(G,K){var at=(0,l.Og)([G,K]),$=b(G,K);x(k,O,N,B,z,U,k=$[0],O=$[1],N=G,B=at[0],z=at[1],U=at[2],16,S),S.point(k,O)}function ut(){H.point=J,S.lineEnd()}function Q(){nt(),H.point=j,H.lineEnd=Z}function j(G,K){it(T=G,K),n=k,E=O,d=B,F=z,D=U,H.point=it}function Z(){x(k,O,N,B,z,U,n,E,T,d,F,D,16,S),H.lineEnd=ut,ut()}return H}}(b,L):function f(b){return(0,e.l)({point:function(L,x){L=b(L,x),this.stream.point(L[0],L[1])}})}(b)}var h=(0,e.l)({point:function(b,L){this.stream.point(b*u.uR,L*u.uR)}});function p(b,L,x,S,T){function n(E,d){return[L+b*(E*=S),x-b*(d*=T)]}return n.invert=function(E,d){return[(E-L)/b*S,(x-d)/b*T]},n}function o(b,L,x,S,T,n){var E=(0,u.mC)(n),d=(0,u.O$)(n),F=E*b,D=d*b,N=E/b,k=d/b,O=(d*x-E*L)/b,B=(d*L+E*x)/b;function z(U,H){return[F*(U*=S)-D*(H*=T)+L,x-D*U-F*H]}return z.invert=function(U,H){return[S*(N*U-k*H+O),T*(B-k*U-N*H)]},z}function v(b){return M(function(){return b})()}function M(b){var L,N,J,nt,it,j,Z,G,K,at,x=150,S=480,T=250,n=0,E=0,d=0,F=0,D=0,k=0,O=1,B=1,z=null,U=A.Z,H=null,ut=C.Z,Q=.5;function $(st){return G(st[0]*u.uR,st[1]*u.uR)}function X(st){return(st=G.invert(st[0],st[1]))&&[st[0]*u.RW,st[1]*u.RW]}function rt(){var st=o(x,0,0,O,B,k).apply(null,L(n,E)),dt=(k?o:p)(x,S-st[0],T-st[1],O,B,k);return N=(0,y.I)(d,F,D),Z=(0,P.Z)(L,dt),G=(0,P.Z)(N,Z),j=c(Z,Q),et()}function et(){return K=at=null,$}return $.stream=function(st){return K&&at===st?K:K=h(function w(b){return(0,e.l)({point:function(L,x){var S=b(L,x);return this.stream.point(S[0],S[1])}})}(N)(U(j(ut(at=st)))))},$.preclip=function(st){return arguments.length?(U=st,z=void 0,et()):U},$.postclip=function(st){return arguments.length?(ut=st,H=J=nt=it=null,et()):ut},$.clipAngle=function(st){return arguments.length?(U=+st?(0,g.Z)(z=st*u.uR):(z=null,A.Z),et()):z*u.RW},$.clipExtent=function(st){return arguments.length?(ut=null==st?(H=J=nt=it=null,C.Z):(0,i.Z)(H=+st[0][0],J=+st[0][1],nt=+st[1][0],it=+st[1][1]),et()):null==H?null:[[H,J],[nt,it]]},$.scale=function(st){return arguments.length?(x=+st,rt()):x},$.translate=function(st){return arguments.length?(S=+st[0],T=+st[1],rt()):[S,T]},$.center=function(st){return arguments.length?(n=st[0]%360*u.uR,E=st[1]%360*u.uR,rt()):[n*u.RW,E*u.RW]},$.rotate=function(st){return arguments.length?(d=st[0]%360*u.uR,F=st[1]%360*u.uR,D=st.length>2?st[2]%360*u.uR:0,rt()):[d*u.RW,F*u.RW,D*u.RW]},$.angle=function(st){return arguments.length?(k=st%360*u.uR,rt()):k*u.RW},$.reflectX=function(st){return arguments.length?(O=st?-1:1,rt()):O<0},$.reflectY=function(st){return arguments.length?(B=st?-1:1,rt()):B<0},$.precision=function(st){return arguments.length?(j=c(Z,Q=st*st),et()):(0,u._b)(Q)},$.fitExtent=function(st,dt){return(0,r.qg)($,st,dt)},$.fitSize=function(st,dt){return(0,r.mF)($,st,dt)},$.fitWidth=function(st,dt){return(0,r.V6)($,st,dt)},$.fitHeight=function(st,dt){return(0,r.rf)($,st,dt)},function(){return L=b.apply(this,arguments),$.invert=L.invert&&X,rt()}}},26867:function(q,W,t){"use strict";t.d(W,{K:function(){return i},Z:function(){return P}});var A=t(15002),g=t(39695);function i(C,u){var y=u*u,e=y*y;return[C*(.8707-.131979*y+e*(e*(.003971*y-.001529*e)-.013791)),u*(1.007226+y*(.015085+e*(.028874*y-.044475-.005916*e)))]}function P(){return(0,A.Z)(i).scale(175.295)}i.invert=function(C,u){var r,y=u,e=25;do{var l=y*y,a=l*l;y-=r=(y*(1.007226+l*(.015085+a*(.028874*l-.044475-.005916*a)))-u)/(1.007226+l*(.045255+a*(.259866*l-.311325-.06507600000000001*a)))}while((0,g.Wn)(r)>g.Ho&&--e>0);return[C/(.8707+(l=y*y)*(l*(l*l*l*(.003971-.001529*l)-.013791)-.131979)),y]}},57962:function(q,W,t){"use strict";t.d(W,{I:function(){return P},Z:function(){return C}});var A=t(39695),g=t(25382),i=t(15002);function P(u,y){return[(0,A.mC)(y)*(0,A.O$)(u),(0,A.O$)(y)]}function C(){return(0,i.Z)(P).scale(249.5).clipAngle(90+A.Ho)}P.invert=(0,g.O)(A.ZR)},49386:function(q,W,t){"use strict";t.d(W,{I:function(){return P},Z:function(){return e}});var A=t(96059),g=t(39695);function i(r,l){return[(0,g.Wn)(r)>g.pi?r+Math.round(-r/g.BZ)*g.BZ:r,l]}function P(r,l,a){return(r%=g.BZ)?l||a?(0,A.Z)(u(r),y(l,a)):u(r):l||a?y(l,a):i}function C(r){return function(l,a){return[(l+=r)>g.pi?l-g.BZ:l<-g.pi?l+g.BZ:l,a]}}function u(r){var l=C(r);return l.invert=C(-r),l}function y(r,l){var a=(0,g.mC)(r),s=(0,g.O$)(r),c=(0,g.mC)(l),f=(0,g.O$)(l);function m(h,w){var p=(0,g.mC)(w),o=(0,g.mC)(h)*p,v=(0,g.O$)(h)*p,M=(0,g.O$)(w),b=M*a+o*s;return[(0,g.fv)(v*c-b*f,o*a-M*s),(0,g.ZR)(b*c+v*f)]}return m.invert=function(h,w){var p=(0,g.mC)(w),o=(0,g.mC)(h)*p,v=(0,g.O$)(h)*p,M=(0,g.O$)(w),b=M*c-v*f;return[(0,g.fv)(v*c+M*f,o*a+b*s),(0,g.ZR)(b*a-o*s)]},m}function e(r){function l(a){return(a=r(a[0]*g.uR,a[1]*g.uR))[0]*=g.RW,a[1]*=g.RW,a}return r=P(r[0]*g.uR,r[1]*g.uR,r.length>2?r[2]*g.uR:0),l.invert=function(a){return(a=r.invert(a[0]*g.uR,a[1]*g.uR))[0]*=g.RW,a[1]*=g.RW,a},l}i.invert=i},72736:function(q,W,t){"use strict";function A(y,e){y&&i.hasOwnProperty(y.type)&&i[y.type](y,e)}t.d(W,{Z:function(){return u}});var g={Feature:function(y,e){A(y.geometry,e)},FeatureCollection:function(y,e){for(var r=y.features,l=-1,a=r.length;++l<a;)A(r[l].geometry,e)}},i={Sphere:function(y,e){e.sphere()},Point:function(y,e){e.point((y=y.coordinates)[0],y[1],y[2])},MultiPoint:function(y,e){for(var r=y.coordinates,l=-1,a=r.length;++l<a;)e.point((y=r[l])[0],y[1],y[2])},LineString:function(y,e){P(y.coordinates,e,0)},MultiLineString:function(y,e){for(var r=y.coordinates,l=-1,a=r.length;++l<a;)P(r[l],e,0)},Polygon:function(y,e){C(y.coordinates,e)},MultiPolygon:function(y,e){for(var r=y.coordinates,l=-1,a=r.length;++l<a;)C(r[l],e)},GeometryCollection:function(y,e){for(var r=y.geometries,l=-1,a=r.length;++l<a;)A(r[l],e)}};function P(y,e,r){var s,l=-1,a=y.length-r;for(e.lineStart();++l<a;)e.point((s=y[l])[0],s[1],s[2]);e.lineEnd()}function C(y,e){var r=-1,l=y.length;for(e.polygonStart();++r<l;)P(y[r],e,1);e.polygonEnd()}function u(y,e){y&&g.hasOwnProperty(y.type)?g[y.type](y,e):A(y,e)}},64684:function(q,W,t){"use strict";function A(P){return{stream:g(P)}}function g(P){return function(C){var u=new i;for(var y in P)u[y]=P[y];return u.stream=C,u}}function i(){}t.d(W,{Z:function(){return A},l:function(){return g}}),i.prototype={constructor:i,point:function(P,C){this.stream.point(P,C)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},674:function(q,W,t){"use strict";function A(Ft,Nt){return Ft.parent===Nt.parent?1:2}function i(Ft,Nt){return Ft+Nt.x}function C(Ft,Nt){return Math.max(Ft,Nt.y)}function e(){var Ft=A,Nt=1,Rt=1,wt=!1;function ft(pt){var kt,Zt=0;pt.eachAfter(function(xe){var Pe=xe.children;Pe?(xe.x=function g(Ft){return Ft.reduce(i,0)/Ft.length}(Pe),xe.y=function P(Ft){return 1+Ft.reduce(C,0)}(Pe)):(xe.x=kt?Zt+=Ft(xe,kt):0,xe.y=0,kt=xe)});var ee=function u(Ft){for(var Nt;Nt=Ft.children;)Ft=Nt[0];return Ft}(pt),se=function y(Ft){for(var Nt;Nt=Ft.children;)Ft=Nt[Nt.length-1];return Ft}(pt),Be=ee.x-Ft(ee,se)/2,Ke=se.x+Ft(se,ee)/2;return pt.eachAfter(wt?function(xe){xe.x=(xe.x-pt.x)*Nt,xe.y=(pt.y-xe.y)*Rt}:function(xe){xe.x=(xe.x-Be)/(Ke-Be)*Nt,xe.y=(1-(pt.y?xe.y/pt.y:1))*Rt})}return ft.separation=function(pt){return arguments.length?(Ft=pt,ft):Ft},ft.size=function(pt){return arguments.length?(wt=!1,Nt=+pt[0],Rt=+pt[1],ft):wt?null:[Nt,Rt]},ft.nodeSize=function(pt){return arguments.length?(wt=!0,Nt=+pt[0],Rt=+pt[1],ft):wt?[Nt,Rt]:null},ft}function r(Ft){var Nt=0,Rt=Ft.children,wt=Rt&&Rt.length;if(wt)for(;--wt>=0;)Nt+=Rt[wt].value;else Nt=1;Ft.value=Nt}function b(Ft,Nt){var ft,kt,Zt,ee,se,Rt=new n(Ft),wt=+Ft.value&&(Rt.value=Ft.value),pt=[Rt];for(null==Nt&&(Nt=x);ft=pt.pop();)if(wt&&(ft.value=+ft.data.value),(Zt=Nt(ft.data))&&(se=Zt.length))for(ft.children=new Array(se),ee=se-1;ee>=0;--ee)pt.push(kt=ft.children[ee]=new n(Zt[ee])),kt.parent=ft,kt.depth=ft.depth+1;return Rt.eachBefore(T)}function x(Ft){return Ft.children}function S(Ft){Ft.data=Ft.data.data}function T(Ft){var Nt=0;do{Ft.height=Nt}while((Ft=Ft.parent)&&Ft.height<++Nt)}function n(Ft){this.data=Ft,this.depth=this.height=0,this.parent=null}t.r(W),t.d(W,{cluster:function(){return e},hierarchy:function(){return b},pack:function(){return X},packEnclose:function(){return F},packSiblings:function(){return j},partition:function(){return gt},stratify:function(){return Gt},tree:function(){return ie},treemap:function(){return Kt},treemapBinary:function(){return Et},treemapDice:function(){return bt},treemapResquarify:function(){return Dt},treemapSlice:function(){return oe},treemapSliceDice:function(){return St},treemapSquarify:function(){return Fe}}),n.prototype=b.prototype={constructor:n,count:function l(){return this.eachAfter(r)},each:function a(Ft){var Rt,ft,pt,kt,Nt=this,wt=[Nt];do{for(Rt=wt.reverse(),wt=[];Nt=Rt.pop();)if(Ft(Nt),ft=Nt.children)for(pt=0,kt=ft.length;pt<kt;++pt)wt.push(ft[pt])}while(wt.length);return this},eachAfter:function c(Ft){for(var ft,pt,kt,Nt=this,Rt=[Nt],wt=[];Nt=Rt.pop();)if(wt.push(Nt),ft=Nt.children)for(pt=0,kt=ft.length;pt<kt;++pt)Rt.push(ft[pt]);for(;Nt=wt.pop();)Ft(Nt);return this},eachBefore:function s(Ft){for(var wt,ft,Nt=this,Rt=[Nt];Nt=Rt.pop();)if(Ft(Nt),wt=Nt.children)for(ft=wt.length-1;ft>=0;--ft)Rt.push(wt[ft]);return this},sum:function f(Ft){return this.eachAfter(function(Nt){for(var Rt=+Ft(Nt.data)||0,wt=Nt.children,ft=wt&&wt.length;--ft>=0;)Rt+=wt[ft].value;Nt.value=Rt})},sort:function m(Ft){return this.eachBefore(function(Nt){Nt.children&&Nt.children.sort(Ft)})},path:function h(Ft){for(var Nt=this,Rt=function w(Ft,Nt){if(Ft===Nt)return Ft;var Rt=Ft.ancestors(),wt=Nt.ancestors(),ft=null;for(Ft=Rt.pop(),Nt=wt.pop();Ft===Nt;)ft=Ft,Ft=Rt.pop(),Nt=wt.pop();return ft}(Nt,Ft),wt=[Nt];Nt!==Rt;)wt.push(Nt=Nt.parent);for(var ft=wt.length;Ft!==Rt;)wt.splice(ft,0,Ft),Ft=Ft.parent;return wt},ancestors:function p(){for(var Ft=this,Nt=[Ft];Ft=Ft.parent;)Nt.push(Ft);return Nt},descendants:function o(){var Ft=[];return this.each(function(Nt){Ft.push(Nt)}),Ft},leaves:function v(){var Ft=[];return this.eachBefore(function(Nt){Nt.children||Ft.push(Nt)}),Ft},links:function M(){var Ft=this,Nt=[];return Ft.each(function(Rt){Rt!==Ft&&Nt.push({source:Rt.parent,target:Rt})}),Nt},copy:function L(){return b(this).eachBefore(S)}};var E=Array.prototype.slice;function F(Ft){for(var ft,pt,Nt=0,Rt=(Ft=function d(Ft){for(var Rt,wt,Nt=Ft.length;Nt;)wt=Math.random()*Nt--|0,Rt=Ft[Nt],Ft[Nt]=Ft[wt],Ft[wt]=Rt;return Ft}(E.call(Ft))).length,wt=[];Nt<Rt;)ft=Ft[Nt],pt&&k(pt,ft)?++Nt:(pt=B(wt=D(wt,ft)),Nt=0);return pt}function D(Ft,Nt){var Rt,wt;if(O(Nt,Ft))return[Nt];for(Rt=0;Rt<Ft.length;++Rt)if(N(Nt,Ft[Rt])&&O(U(Ft[Rt],Nt),Ft))return[Ft[Rt],Nt];for(Rt=0;Rt<Ft.length-1;++Rt)for(wt=Rt+1;wt<Ft.length;++wt)if(N(U(Ft[Rt],Ft[wt]),Nt)&&N(U(Ft[Rt],Nt),Ft[wt])&&N(U(Ft[wt],Nt),Ft[Rt])&&O(H(Ft[Rt],Ft[wt],Nt),Ft))return[Ft[Rt],Ft[wt],Nt];throw new Error}function N(Ft,Nt){var Rt=Ft.r-Nt.r,wt=Nt.x-Ft.x,ft=Nt.y-Ft.y;return Rt<0||Rt*Rt<wt*wt+ft*ft}function k(Ft,Nt){var Rt=Ft.r-Nt.r+1e-6,wt=Nt.x-Ft.x,ft=Nt.y-Ft.y;return Rt>0&&Rt*Rt>wt*wt+ft*ft}function O(Ft,Nt){for(var Rt=0;Rt<Nt.length;++Rt)if(!k(Ft,Nt[Rt]))return!1;return!0}function B(Ft){switch(Ft.length){case 1:return function z(Ft){return{x:Ft.x,y:Ft.y,r:Ft.r}}(Ft[0]);case 2:return U(Ft[0],Ft[1]);case 3:return H(Ft[0],Ft[1],Ft[2])}}function U(Ft,Nt){var Rt=Ft.x,wt=Ft.y,ft=Ft.r,pt=Nt.x,kt=Nt.y,Zt=Nt.r,ee=pt-Rt,se=kt-wt,Be=Zt-ft,Ke=Math.sqrt(ee*ee+se*se);return{x:(Rt+pt+ee/Ke*Be)/2,y:(wt+kt+se/Ke*Be)/2,r:(Ke+ft+Zt)/2}}function H(Ft,Nt,Rt){var wt=Ft.x,ft=Ft.y,pt=Ft.r,kt=Nt.x,Zt=Nt.y,ee=Nt.r,se=Rt.x,Be=Rt.y,Ke=Rt.r,xe=wt-kt,Pe=wt-se,Ge=ft-Zt,gr=ft-Be,ue=ee-pt,Ne=Ke-pt,Ye=wt*wt+ft*ft-pt*pt,xr=Ye-kt*kt-Zt*Zt+ee*ee,rr=Ye-se*se-Be*Be+Ke*Ke,ce=Pe*Ge-xe*gr,re=(Ge*rr-gr*xr)/(2*ce)-wt,ve=(gr*ue-Ge*Ne)/ce,be=(Pe*xr-xe*rr)/(2*ce)-ft,Ae=(xe*Ne-Pe*ue)/ce,Te=ve*ve+Ae*Ae-1,Re=2*(pt+re*ve+be*Ae),Ie=re*re+be*be-pt*pt,Xe=-(Te?(Re+Math.sqrt(Re*Re-4*Te*Ie))/(2*Te):Ie/Re);return{x:wt+re+ve*Xe,y:ft+be+Ae*Xe,r:Xe}}function J(Ft,Nt,Rt){var ft,pt,Zt,ee,wt=Ft.x-Nt.x,kt=Ft.y-Nt.y,se=wt*wt+kt*kt;se?(pt=Nt.r+Rt.r,ee=Ft.r+Rt.r,(pt*=pt)>(ee*=ee)?(ft=(se+ee-pt)/(2*se),Zt=Math.sqrt(Math.max(0,ee/se-ft*ft)),Rt.x=Ft.x-ft*wt-Zt*kt,Rt.y=Ft.y-ft*kt+Zt*wt):(ft=(se+pt-ee)/(2*se),Zt=Math.sqrt(Math.max(0,pt/se-ft*ft)),Rt.x=Nt.x+ft*wt-Zt*kt,Rt.y=Nt.y+ft*kt+Zt*wt)):(Rt.x=Nt.x+Rt.r,Rt.y=Nt.y)}function nt(Ft,Nt){var Rt=Ft.r+Nt.r-1e-6,wt=Nt.x-Ft.x,ft=Nt.y-Ft.y;return Rt>0&&Rt*Rt>wt*wt+ft*ft}function it(Ft){var Nt=Ft._,Rt=Ft.next._,wt=Nt.r+Rt.r,ft=(Nt.x*Rt.r+Rt.x*Nt.r)/wt,pt=(Nt.y*Rt.r+Rt.y*Nt.r)/wt;return ft*ft+pt*pt}function ut(Ft){this._=Ft,this.next=null,this.previous=null}function Q(Ft){if(!(ft=Ft.length))return 0;var Nt,Rt,wt,ft,pt,kt,Zt,ee,se,Be,Ke;if((Nt=Ft[0]).x=0,Nt.y=0,!(ft>1))return Nt.r;if(Nt.x=-(Rt=Ft[1]).r,Rt.x=Nt.r,Rt.y=0,!(ft>2))return Nt.r+Rt.r;J(Rt,Nt,wt=Ft[2]),Nt=new ut(Nt),Rt=new ut(Rt),wt=new ut(wt),Nt.next=wt.previous=Rt,Rt.next=Nt.previous=wt,wt.next=Rt.previous=Nt;t:for(Zt=3;Zt<ft;++Zt){J(Nt._,Rt._,wt=Ft[Zt]),wt=new ut(wt),ee=Rt.next,se=Nt.previous,Be=Rt._.r,Ke=Nt._.r;do{if(Be<=Ke){if(nt(ee._,wt._)){Nt.next=Rt=ee,Rt.previous=Nt,--Zt;continue t}Be+=ee._.r,ee=ee.next}else{if(nt(se._,wt._)){(Nt=se).next=Rt,Rt.previous=Nt,--Zt;continue t}Ke+=se._.r,se=se.previous}}while(ee!==se.next);for(wt.previous=Nt,wt.next=Rt,Nt.next=Rt.previous=Rt=wt,pt=it(Nt);(wt=wt.next)!==Rt;)(kt=it(wt))<pt&&(Nt=wt,pt=kt);Rt=Nt.next}for(Nt=[Rt._],wt=Rt;(wt=wt.next)!==Rt;)Nt.push(wt._);for(wt=F(Nt),Zt=0;Zt<ft;++Zt)(Nt=Ft[Zt]).x-=wt.x,Nt.y-=wt.y;return wt.r}function j(Ft){return Q(Ft),Ft}function Z(Ft){return null==Ft?null:G(Ft)}function G(Ft){if("function"!=typeof Ft)throw new Error;return Ft}function K(){return 0}function at(Ft){return function(){return Ft}}function $(Ft){return Math.sqrt(Ft.value)}function X(){var Ft=null,Nt=1,Rt=1,wt=K;function ft(pt){return pt.x=Nt/2,pt.y=Rt/2,Ft?pt.eachBefore(rt(Ft)).eachAfter(et(wt,.5)).eachBefore(st(1)):pt.eachBefore(rt($)).eachAfter(et(K,1)).eachAfter(et(wt,pt.r/Math.min(Nt,Rt))).eachBefore(st(Math.min(Nt,Rt)/(2*pt.r))),pt}return ft.radius=function(pt){return arguments.length?(Ft=Z(pt),ft):Ft},ft.size=function(pt){return arguments.length?(Nt=+pt[0],Rt=+pt[1],ft):[Nt,Rt]},ft.padding=function(pt){return arguments.length?(wt="function"==typeof pt?pt:at(+pt),ft):wt},ft}function rt(Ft){return function(Nt){Nt.children||(Nt.r=Math.max(0,+Ft(Nt)||0))}}function et(Ft,Nt){return function(Rt){if(wt=Rt.children){var wt,ft,Zt,pt=wt.length,kt=Ft(Rt)*Nt||0;if(kt)for(ft=0;ft<pt;++ft)wt[ft].r+=kt;if(Zt=Q(wt),kt)for(ft=0;ft<pt;++ft)wt[ft].r-=kt;Rt.r=Zt+kt}}}function st(Ft){return function(Nt){var Rt=Nt.parent;Nt.r*=Ft,Rt&&(Nt.x=Rt.x+Ft*Nt.x,Nt.y=Rt.y+Ft*Nt.y)}}function dt(Ft){Ft.x0=Math.round(Ft.x0),Ft.y0=Math.round(Ft.y0),Ft.x1=Math.round(Ft.x1),Ft.y1=Math.round(Ft.y1)}function bt(Ft,Nt,Rt,wt,ft){for(var kt,pt=Ft.children,Zt=-1,ee=pt.length,se=Ft.value&&(wt-Nt)/Ft.value;++Zt<ee;)(kt=pt[Zt]).y0=Rt,kt.y1=ft,kt.x0=Nt,kt.x1=Nt+=kt.value*se}function gt(){var Ft=1,Nt=1,Rt=0,wt=!1;function ft(kt){var Zt=kt.height+1;return kt.x0=kt.y0=Rt,kt.x1=Ft,kt.y1=Nt/Zt,kt.eachBefore(function pt(kt,Zt){return function(ee){ee.children&&bt(ee,ee.x0,kt*(ee.depth+1)/Zt,ee.x1,kt*(ee.depth+2)/Zt);var se=ee.x0,Be=ee.y0,Ke=ee.x1-Rt,xe=ee.y1-Rt;Ke<se&&(se=Ke=(se+Ke)/2),xe<Be&&(Be=xe=(Be+xe)/2),ee.x0=se,ee.y0=Be,ee.x1=Ke,ee.y1=xe}}(Nt,Zt)),wt&&kt.eachBefore(dt),kt}return ft.round=function(kt){return arguments.length?(wt=!!kt,ft):wt},ft.size=function(kt){return arguments.length?(Ft=+kt[0],Nt=+kt[1],ft):[Ft,Nt]},ft.padding=function(kt){return arguments.length?(Rt=+kt,ft):Rt},ft}var It={depth:-1},Mt={};function xt(Ft){return Ft.id}function At(Ft){return Ft.parentId}function Gt(){var Ft=xt,Nt=At;function Rt(wt){var ft,pt,Zt,ee,se,Ke,xe,kt=wt.length,Be=new Array(kt),Pe={};for(pt=0;pt<kt;++pt)se=Be[pt]=new n(ft=wt[pt]),null!=(Ke=Ft(ft,pt,wt))&&(Ke+="")&&(Pe[xe="$"+(se.id=Ke)]=xe in Pe?Mt:se);for(pt=0;pt<kt;++pt)if(se=Be[pt],null!=(Ke=Nt(wt[pt],pt,wt))&&(Ke+="")){if(!(ee=Pe["$"+Ke]))throw new Error("missing: "+Ke);if(ee===Mt)throw new Error("ambiguous: "+Ke);ee.children?ee.children.push(se):ee.children=[se],se.parent=ee}else{if(Zt)throw new Error("multiple roots");Zt=se}if(!Zt)throw new Error("no root");if(Zt.parent=It,Zt.eachBefore(function(Ge){Ge.depth=Ge.parent.depth+1,--kt}).eachBefore(T),Zt.parent=null,kt>0)throw new Error("cycle");return Zt}return Rt.id=function(wt){return arguments.length?(Ft=G(wt),Rt):Ft},Rt.parentId=function(wt){return arguments.length?(Nt=G(wt),Rt):Nt},Rt}function Wt(Ft,Nt){return Ft.parent===Nt.parent?1:2}function Pt(Ft){var Nt=Ft.children;return Nt?Nt[0]:Ft.t}function Vt(Ft){var Nt=Ft.children;return Nt?Nt[Nt.length-1]:Ft.t}function te(Ft,Nt,Rt){var wt=Rt/(Nt.i-Ft.i);Nt.c-=wt,Nt.s+=Rt,Ft.c+=wt,Nt.z+=Rt,Nt.m+=Rt}function Bt(Ft,Nt,Rt){return Ft.a.parent===Nt.parent?Ft.a:Rt}function Ot(Ft,Nt){this._=Ft,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Nt}function ie(){var Ft=Wt,Nt=1,Rt=1,wt=null;function ft(se){var Be=function qt(Ft){for(var Rt,ft,pt,kt,Zt,Nt=new Ot(Ft,0),wt=[Nt];Rt=wt.pop();)if(pt=Rt._.children)for(Rt.children=new Array(Zt=pt.length),kt=Zt-1;kt>=0;--kt)wt.push(ft=Rt.children[kt]=new Ot(pt[kt],kt)),ft.parent=Rt;return(Nt.parent=new Ot(null,0)).children=[Nt],Nt}(se);if(Be.eachAfter(pt),Be.parent.m=-Be.z,Be.eachBefore(kt),wt)se.eachBefore(ee);else{var Ke=se,xe=se,Pe=se;se.eachBefore(function(Ye){Ye.x<Ke.x&&(Ke=Ye),Ye.x>xe.x&&(xe=Ye),Ye.depth>Pe.depth&&(Pe=Ye)});var Ge=Ke===xe?1:Ft(Ke,xe)/2,gr=Ge-Ke.x,ue=Nt/(xe.x+Ge+gr),Ne=Rt/(Pe.depth||1);se.eachBefore(function(Ye){Ye.x=(Ye.x+gr)*ue,Ye.y=Ye.depth*Ne})}return se}function pt(se){var Be=se.children,Ke=se.parent.children,xe=se.i?Ke[se.i-1]:null;if(Be){!function Qt(Ft){for(var pt,Nt=0,Rt=0,wt=Ft.children,ft=wt.length;--ft>=0;)(pt=wt[ft]).z+=Nt,pt.m+=Nt,Nt+=pt.s+(Rt+=pt.c)}(se);var Pe=(Be[0].z+Be[Be.length-1].z)/2;xe?(se.z=xe.z+Ft(se._,xe._),se.m=se.z-Pe):se.z=Pe}else xe&&(se.z=xe.z+Ft(se._,xe._));se.parent.A=function Zt(se,Be,Ke){if(Be){for(var rr,xe=se,Pe=se,Ge=Be,gr=xe.parent.children[0],ue=xe.m,Ne=Pe.m,Ye=Ge.m,xr=gr.m;Ge=Vt(Ge),xe=Pt(xe),Ge&&xe;)gr=Pt(gr),(Pe=Vt(Pe)).a=se,(rr=Ge.z+Ye-xe.z-ue+Ft(Ge._,xe._))>0&&(te(Bt(Ge,se,Ke),se,rr),ue+=rr,Ne+=rr),Ye+=Ge.m,ue+=xe.m,xr+=gr.m,Ne+=Pe.m;Ge&&!Vt(Pe)&&(Pe.t=Ge,Pe.m+=Ye-Ne),xe&&!Pt(gr)&&(gr.t=xe,gr.m+=ue-xr,Ke=se)}return Ke}(se,xe,se.parent.A||Ke[0])}function kt(se){se._.x=se.z+se.parent.m,se.m+=se.parent.m}function ee(se){se.x*=Nt,se.y=se.depth*Rt}return ft.separation=function(se){return arguments.length?(Ft=se,ft):Ft},ft.size=function(se){return arguments.length?(wt=!1,Nt=+se[0],Rt=+se[1],ft):wt?null:[Nt,Rt]},ft.nodeSize=function(se){return arguments.length?(wt=!0,Nt=+se[0],Rt=+se[1],ft):wt?[Nt,Rt]:null},ft}function oe(Ft,Nt,Rt,wt,ft){for(var kt,pt=Ft.children,Zt=-1,ee=pt.length,se=Ft.value&&(ft-Rt)/Ft.value;++Zt<ee;)(kt=pt[Zt]).x0=Nt,kt.x1=wt,kt.y0=Rt,kt.y1=Rt+=kt.value*se}Ot.prototype=Object.create(n.prototype);var pe=(1+Math.sqrt(5))/2;function de(Ft,Nt,Rt,wt,ft,pt){for(var ee,se,Pe,Ge,ue,Ne,Ye,xr,rr,ce,re,kt=[],Zt=Nt.children,Be=0,Ke=0,xe=Zt.length,gr=Nt.value;Be<xe;){Pe=ft-Rt,Ge=pt-wt;do{ue=Zt[Ke++].value}while(!ue&&Ke<xe);for(Ne=Ye=ue,re=ue*ue*(ce=Math.max(Ge/Pe,Pe/Ge)/(gr*Ft)),rr=Math.max(Ye/re,re/Ne);Ke<xe;++Ke){if(ue+=se=Zt[Ke].value,se<Ne&&(Ne=se),se>Ye&&(Ye=se),re=ue*ue*ce,(xr=Math.max(Ye/re,re/Ne))>rr){ue-=se;break}rr=xr}kt.push(ee={value:ue,dice:Pe<Ge,children:Zt.slice(Be,Ke)}),ee.dice?bt(ee,Rt,wt,ft,gr?wt+=Ge*ue/gr:pt):oe(ee,Rt,wt,gr?Rt+=Pe*ue/gr:ft,pt),gr-=ue,Be=Ke}return kt}var Fe=function Ft(Nt){function Rt(wt,ft,pt,kt,Zt){de(Nt,wt,ft,pt,kt,Zt)}return Rt.ratio=function(wt){return Ft((wt=+wt)>1?wt:1)},Rt}(pe);function Kt(){var Ft=Fe,Nt=!1,Rt=1,wt=1,ft=[0],pt=K,kt=K,Zt=K,ee=K,se=K;function Be(xe){return xe.x0=xe.y0=0,xe.x1=Rt,xe.y1=wt,xe.eachBefore(Ke),ft=[0],Nt&&xe.eachBefore(dt),xe}function Ke(xe){var Pe=ft[xe.depth],Ge=xe.x0+Pe,gr=xe.y0+Pe,ue=xe.x1-Pe,Ne=xe.y1-Pe;ue<Ge&&(Ge=ue=(Ge+ue)/2),Ne<gr&&(gr=Ne=(gr+Ne)/2),xe.x0=Ge,xe.y0=gr,xe.x1=ue,xe.y1=Ne,xe.children&&(Pe=ft[xe.depth+1]=pt(xe)/2,Ge+=se(xe)-Pe,gr+=kt(xe)-Pe,(ue-=Zt(xe)-Pe)<Ge&&(Ge=ue=(Ge+ue)/2),(Ne-=ee(xe)-Pe)<gr&&(gr=Ne=(gr+Ne)/2),Ft(xe,Ge,gr,ue,Ne))}return Be.round=function(xe){return arguments.length?(Nt=!!xe,Be):Nt},Be.size=function(xe){return arguments.length?(Rt=+xe[0],wt=+xe[1],Be):[Rt,wt]},Be.tile=function(xe){return arguments.length?(Ft=G(xe),Be):Ft},Be.padding=function(xe){return arguments.length?Be.paddingInner(xe).paddingOuter(xe):Be.paddingInner()},Be.paddingInner=function(xe){return arguments.length?(pt="function"==typeof xe?xe:at(+xe),Be):pt},Be.paddingOuter=function(xe){return arguments.length?Be.paddingTop(xe).paddingRight(xe).paddingBottom(xe).paddingLeft(xe):Be.paddingTop()},Be.paddingTop=function(xe){return arguments.length?(kt="function"==typeof xe?xe:at(+xe),Be):kt},Be.paddingRight=function(xe){return arguments.length?(Zt="function"==typeof xe?xe:at(+xe),Be):Zt},Be.paddingBottom=function(xe){return arguments.length?(ee="function"==typeof xe?xe:at(+xe),Be):ee},Be.paddingLeft=function(xe){return arguments.length?(se="function"==typeof xe?xe:at(+xe),Be):se},Be}function Et(Ft,Nt,Rt,wt,ft){var kt,ee,pt=Ft.children,Zt=pt.length,se=new Array(Zt+1);for(se[0]=ee=kt=0;kt<Zt;++kt)se[kt+1]=ee+=pt[kt].value;!function Be(Ke,xe,Pe,Ge,gr,ue,Ne){if(Ke>=xe-1){var Ye=pt[Ke];return Ye.x0=Ge,Ye.y0=gr,Ye.x1=ue,void(Ye.y1=Ne)}for(var xr=se[Ke],rr=Pe/2+xr,ce=Ke+1,re=xe-1;ce<re;){var ve=ce+re>>>1;se[ve]<rr?ce=ve+1:re=ve}rr-se[ce-1]<se[ce]-rr&&Ke+1<ce&&--ce;var be=se[ce]-xr,Ae=Pe-be;if(ue-Ge>Ne-gr){var Te=(Ge*Ae+ue*be)/Pe;Be(Ke,ce,be,Ge,gr,Te,Ne),Be(ce,xe,Ae,Te,gr,ue,Ne)}else{var Re=(gr*Ae+Ne*be)/Pe;Be(Ke,ce,be,Ge,gr,ue,Re),Be(ce,xe,Ae,Ge,Re,ue,Ne)}}(0,Zt,Ft.value,Nt,Rt,wt,ft)}function St(Ft,Nt,Rt,wt,ft){(1&Ft.depth?oe:bt)(Ft,Nt,Rt,wt,ft)}var Dt=function Ft(Nt){function Rt(wt,ft,pt,kt,Zt){if((ee=wt._squarify)&&ee.ratio===Nt)for(var ee,se,Be,Ke,Pe,xe=-1,Ge=ee.length,gr=wt.value;++xe<Ge;){for(Be=(se=ee[xe]).children,Ke=se.value=0,Pe=Be.length;Ke<Pe;++Ke)se.value+=Be[Ke].value;se.dice?bt(se,ft,pt,kt,pt+=(Zt-pt)*se.value/gr):oe(se,ft,pt,ft+=(kt-ft)*se.value/gr,Zt),gr-=se.value}else wt._squarify=ee=de(Nt,wt,ft,pt,kt,Zt),ee.ratio=Nt}return Rt.ratio=function(wt){return Ft((wt=+wt)>1?wt:1)},Rt}(pe)},45879:function(q,W,t){"use strict";t.d(W,{h5:function(){return p}});var A=Math.PI,g=2*A,i=1e-6,P=g-i;function C(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function u(){return new C}C.prototype=u.prototype={constructor:C,moveTo:function(M,b){this._+="M"+(this._x0=this._x1=+M)+","+(this._y0=this._y1=+b)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(M,b){this._+="L"+(this._x1=+M)+","+(this._y1=+b)},quadraticCurveTo:function(M,b,L,x){this._+="Q"+ +M+","+ +b+","+(this._x1=+L)+","+(this._y1=+x)},bezierCurveTo:function(M,b,L,x,S,T){this._+="C"+ +M+","+ +b+","+ +L+","+ +x+","+(this._x1=+S)+","+(this._y1=+T)},arcTo:function(M,b,L,x,S){var T=this._x1,n=this._y1,E=(L=+L)-(M=+M),d=(x=+x)-(b=+b),F=T-M,D=n-b,N=F*F+D*D;if((S=+S)<0)throw new Error("negative radius: "+S);if(null===this._x1)this._+="M"+(this._x1=M)+","+(this._y1=b);else if(N>i)if(Math.abs(D*E-d*F)>i&&S){var k=L-T,O=x-n,B=E*E+d*d,z=k*k+O*O,U=Math.sqrt(B),H=Math.sqrt(N),J=S*Math.tan((A-Math.acos((B+N-z)/(2*U*H)))/2),nt=J/H,it=J/U;Math.abs(nt-1)>i&&(this._+="L"+(M+nt*F)+","+(b+nt*D)),this._+="A"+S+","+S+",0,0,"+ +(D*k>F*O)+","+(this._x1=M+it*E)+","+(this._y1=b+it*d)}else this._+="L"+(this._x1=M)+","+(this._y1=b)},arc:function(M,b,L,x,S,T){M=+M,b=+b,T=!!T;var n=(L=+L)*Math.cos(x),E=L*Math.sin(x),d=M+n,F=b+E,D=1^T,N=T?x-S:S-x;if(L<0)throw new Error("negative radius: "+L);null===this._x1?this._+="M"+d+","+F:(Math.abs(this._x1-d)>i||Math.abs(this._y1-F)>i)&&(this._+="L"+d+","+F),L&&(N<0&&(N=N%g+g),N>P?this._+="A"+L+","+L+",0,1,"+D+","+(M-n)+","+(b-E)+"A"+L+","+L+",0,1,"+D+","+(this._x1=d)+","+(this._y1=F):N>i&&(this._+="A"+L+","+L+",0,"+ +(N>=A)+","+D+","+(this._x1=M+L*Math.cos(S))+","+(this._y1=b+L*Math.sin(S))))},rect:function(M,b,L,x){this._+="M"+(this._x0=this._x1=+M)+","+(this._y0=this._y1=+b)+"h"+ +L+"v"+ +x+"h"+-L+"Z"},toString:function(){return this._}};var y=u,e=Array.prototype.slice;function r(M){return function(){return M}}function l(M){return M[0]}function a(M){return M[1]}function s(M){return M.source}function c(M){return M.target}function m(M,b,L,x,S){M.moveTo(b,L),M.bezierCurveTo(b=(b+x)/2,L,b,S,x,S)}function p(){return function f(M){var b=s,L=c,x=l,S=a,T=null;function n(){var E,d=e.call(arguments),F=b.apply(this,d),D=L.apply(this,d);if(T||(T=E=y()),M(T,+x.apply(this,(d[0]=F,d)),+S.apply(this,d),+x.apply(this,(d[0]=D,d)),+S.apply(this,d)),E)return T=null,E+""||null}return n.source=function(E){return arguments.length?(b=E,n):b},n.target=function(E){return arguments.length?(L=E,n):L},n.x=function(E){return arguments.length?(x="function"==typeof E?E:r(+E),n):x},n.y=function(E){return arguments.length?(S="function"==typeof E?E:r(+E),n):S},n.context=function(E){return arguments.length?(T=null==E?null:E,n):T},n}(m)}},84096:function(q,W,t){"use strict";t.d(W,{i$:function(){return Et},Dq:function(){return l},g0:function(){return Dt}});var A=t(58176),g=t(48480),i=t(59879),P=t(82301),C=t(34823),u=t(79791);function y(Rt){if(0<=Rt.y&&Rt.y<100){var wt=new Date(-1,Rt.m,Rt.d,Rt.H,Rt.M,Rt.S,Rt.L);return wt.setFullYear(Rt.y),wt}return new Date(Rt.y,Rt.m,Rt.d,Rt.H,Rt.M,Rt.S,Rt.L)}function e(Rt){if(0<=Rt.y&&Rt.y<100){var wt=new Date(Date.UTC(-1,Rt.m,Rt.d,Rt.H,Rt.M,Rt.S,Rt.L));return wt.setUTCFullYear(Rt.y),wt}return new Date(Date.UTC(Rt.y,Rt.m,Rt.d,Rt.H,Rt.M,Rt.S,Rt.L))}function r(Rt,wt,ft){return{y:Rt,m:wt,d:ft,H:0,M:0,S:0,L:0}}function l(Rt){var wt=Rt.dateTime,ft=Rt.date,pt=Rt.time,kt=Rt.periods,Zt=Rt.days,ee=Rt.shortDays,se=Rt.months,Be=Rt.shortMonths,Ke=w(kt),xe=p(kt),Pe=w(Zt),Ge=p(Zt),gr=w(ee),ue=p(ee),Ne=w(se),Ye=p(se),xr=w(Be),rr=p(Be),ce={a:function Se(Mr){return ee[Mr.getDay()]},A:function Ce(Mr){return Zt[Mr.getDay()]},b:function We(Mr){return Be[Mr.getMonth()]},B:function qe(Mr){return se[Mr.getMonth()]},c:null,d:J,e:J,f:j,H:nt,I:it,j:ut,L:Q,m:Z,M:G,p:function or(Mr){return kt[+(Mr.getHours()>=12)]},q:function _e(Mr){return 1+~~(Mr.getMonth()/3)},Q:de,s:Fe,S:K,u:at,U:$,V:X,w:rt,W:et,x:null,X:null,y:st,Y:dt,Z:bt,"%":pe},re={a:function De(Mr){return ee[Mr.getUTCDay()]},A:function sr(Mr){return Zt[Mr.getUTCDay()]},b:function yr(Mr){return Be[Mr.getUTCMonth()]},B:function dr(Mr){return se[Mr.getUTCMonth()]},c:null,d:gt,e:gt,f:At,H:Lt,I:It,j:Mt,L:xt,m:Gt,M:Wt,p:function Pr(Mr){return kt[+(Mr.getUTCHours()>=12)]},q:function Jr(Mr){return 1+~~(Mr.getUTCMonth()/3)},Q:de,s:Fe,S:Pt,u:Vt,U:te,V:Qt,w:Bt,W:Ot,x:null,X:null,y:qt,Y:ie,Z:oe,"%":pe},ve={a:function Ie(Mr,Wr,nn){var Nr=gr.exec(Wr.slice(nn));return Nr?(Mr.w=ue[Nr[0].toLowerCase()],nn+Nr[0].length):-1},A:function Xe(Mr,Wr,nn){var Nr=Pe.exec(Wr.slice(nn));return Nr?(Mr.w=Ge[Nr[0].toLowerCase()],nn+Nr[0].length):-1},b:function ar(Mr,Wr,nn){var Nr=xr.exec(Wr.slice(nn));return Nr?(Mr.m=rr[Nr[0].toLowerCase()],nn+Nr[0].length):-1},B:function nr(Mr,Wr,nn){var Nr=Ne.exec(Wr.slice(nn));return Nr?(Mr.m=Ye[Nr[0].toLowerCase()],nn+Nr[0].length):-1},c:function cr(Mr,Wr,nn){return Te(Mr,wt,Wr,nn)},d,e:d,f:B,H:D,I:D,j:F,L:O,m:E,M:N,p:function Re(Mr,Wr,nn){var Nr=Ke.exec(Wr.slice(nn));return Nr?(Mr.p=xe[Nr[0].toLowerCase()],nn+Nr[0].length):-1},q:n,Q:U,s:H,S:k,u:v,U:M,V:b,w:o,W:L,x:function Ut(Mr,Wr,nn){return Te(Mr,ft,Wr,nn)},X:function Ht(Mr,Wr,nn){return Te(Mr,pt,Wr,nn)},y:S,Y:x,Z:T,"%":z};function be(Mr,Wr){return function(nn){var Ar,Br,Or,Nr=[],Dn=-1,hn=0,hr=Mr.length;for(nn instanceof Date||(nn=new Date(+nn));++Dn<hr;)37===Mr.charCodeAt(Dn)&&(Nr.push(Mr.slice(hn,Dn)),null!=(Br=a[Ar=Mr.charAt(++Dn)])?Ar=Mr.charAt(++Dn):Br="e"===Ar?" ":"0",(Or=Wr[Ar])&&(Ar=Or(nn,Br)),Nr.push(Ar),hn=Dn+1);return Nr.push(Mr.slice(hn,Dn)),Nr.join("")}}function Ae(Mr,Wr){return function(nn){var hn,hr,Nr=r(1900,void 0,1);if(Te(Nr,Mr,nn+="",0)!=nn.length)return null;if("Q"in Nr)return new Date(Nr.Q);if("s"in Nr)return new Date(1e3*Nr.s+("L"in Nr?Nr.L:0));if(Wr&&!("Z"in Nr)&&(Nr.Z=0),"p"in Nr&&(Nr.H=Nr.H%12+12*Nr.p),void 0===Nr.m&&(Nr.m="q"in Nr?Nr.q:0),"V"in Nr){if(Nr.V<1||Nr.V>53)return null;"w"in Nr||(Nr.w=1),"Z"in Nr?(hr=(hn=e(r(Nr.y,0,1))).getUTCDay(),hn=hr>4||0===hr?A.l6.ceil(hn):(0,A.l6)(hn),hn=g.Z.offset(hn,7*(Nr.V-1)),Nr.y=hn.getUTCFullYear(),Nr.m=hn.getUTCMonth(),Nr.d=hn.getUTCDate()+(Nr.w+6)%7):(hr=(hn=y(r(Nr.y,0,1))).getDay(),hn=hr>4||0===hr?i.wA.ceil(hn):(0,i.wA)(hn),hn=P.Z.offset(hn,7*(Nr.V-1)),Nr.y=hn.getFullYear(),Nr.m=hn.getMonth(),Nr.d=hn.getDate()+(Nr.w+6)%7)}else("W"in Nr||"U"in Nr)&&("w"in Nr||(Nr.w="u"in Nr?Nr.u%7:"W"in Nr?1:0),hr="Z"in Nr?e(r(Nr.y,0,1)).getUTCDay():y(r(Nr.y,0,1)).getDay(),Nr.m=0,Nr.d="W"in Nr?(Nr.w+6)%7+7*Nr.W-(hr+5)%7:Nr.w+7*Nr.U-(hr+6)%7);return"Z"in Nr?(Nr.H+=Nr.Z/100|0,Nr.M+=Nr.Z%100,e(Nr)):y(Nr)}}function Te(Mr,Wr,nn,Nr){for(var Ar,Br,Dn=0,hn=Wr.length,hr=nn.length;Dn<hn;){if(Nr>=hr)return-1;if(37===(Ar=Wr.charCodeAt(Dn++))){if(Ar=Wr.charAt(Dn++),!(Br=ve[Ar in a?Wr.charAt(Dn++):Ar])||(Nr=Br(Mr,nn,Nr))<0)return-1}else if(Ar!=nn.charCodeAt(Nr++))return-1}return Nr}return ce.x=be(ft,ce),ce.X=be(pt,ce),ce.c=be(wt,ce),re.x=be(ft,re),re.X=be(pt,re),re.c=be(wt,re),{format:function(Mr){var Wr=be(Mr+="",ce);return Wr.toString=function(){return Mr},Wr},parse:function(Mr){var Wr=Ae(Mr+="",!1);return Wr.toString=function(){return Mr},Wr},utcFormat:function(Mr){var Wr=be(Mr+="",re);return Wr.toString=function(){return Mr},Wr},utcParse:function(Mr){var Wr=Ae(Mr+="",!0);return Wr.toString=function(){return Mr},Wr}}}var Kt,Et,Dt,a={"-":"",_:" ",0:"0"},s=/^\s*\d+/,c=/^%/,f=/[\\^$*+?|[\]().{}]/g;function m(Rt,wt,ft){var pt=Rt<0?"-":"",kt=(pt?-Rt:Rt)+"",Zt=kt.length;return pt+(Zt<ft?new Array(ft-Zt+1).join(wt)+kt:kt)}function h(Rt){return Rt.replace(f,"\\$&")}function w(Rt){return new RegExp("^(?:"+Rt.map(h).join("|")+")","i")}function p(Rt){for(var wt={},ft=-1,pt=Rt.length;++ft<pt;)wt[Rt[ft].toLowerCase()]=ft;return wt}function o(Rt,wt,ft){var pt=s.exec(wt.slice(ft,ft+1));return pt?(Rt.w=+pt[0],ft+pt[0].length):-1}function v(Rt,wt,ft){var pt=s.exec(wt.slice(ft,ft+1));return pt?(Rt.u=+pt[0],ft+pt[0].length):-1}function M(Rt,wt,ft){var pt=s.exec(wt.slice(ft,ft+2));return pt?(Rt.U=+pt[0],ft+pt[0].length):-1}function b(Rt,wt,ft){var pt=s.exec(wt.slice(ft,ft+2));return pt?(Rt.V=+pt[0],ft+pt[0].length):-1}function L(Rt,wt,ft){var pt=s.exec(wt.slice(ft,ft+2));return pt?(Rt.W=+pt[0],ft+pt[0].length):-1}function x(Rt,wt,ft){var pt=s.exec(wt.slice(ft,ft+4));return pt?(Rt.y=+pt[0],ft+pt[0].length):-1}function S(Rt,wt,ft){var pt=s.exec(wt.slice(ft,ft+2));return pt?(Rt.y=+pt[0]+(+pt[0]>68?1900:2e3),ft+pt[0].length):-1}function T(Rt,wt,ft){var pt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(wt.slice(ft,ft+6));return pt?(Rt.Z=pt[1]?0:-(pt[2]+(pt[3]||"00")),ft+pt[0].length):-1}function n(Rt,wt,ft){var pt=s.exec(wt.slice(ft,ft+1));return pt?(Rt.q=3*pt[0]-3,ft+pt[0].length):-1}function E(Rt,wt,ft){var pt=s.exec(wt.slice(ft,ft+2));return pt?(Rt.m=pt[0]-1,ft+pt[0].length):-1}function d(Rt,wt,ft){var pt=s.exec(wt.slice(ft,ft+2));return pt?(Rt.d=+pt[0],ft+pt[0].length):-1}function F(Rt,wt,ft){var pt=s.exec(wt.slice(ft,ft+3));return pt?(Rt.m=0,Rt.d=+pt[0],ft+pt[0].length):-1}function D(Rt,wt,ft){var pt=s.exec(wt.slice(ft,ft+2));return pt?(Rt.H=+pt[0],ft+pt[0].length):-1}function N(Rt,wt,ft){var pt=s.exec(wt.slice(ft,ft+2));return pt?(Rt.M=+pt[0],ft+pt[0].length):-1}function k(Rt,wt,ft){var pt=s.exec(wt.slice(ft,ft+2));return pt?(Rt.S=+pt[0],ft+pt[0].length):-1}function O(Rt,wt,ft){var pt=s.exec(wt.slice(ft,ft+3));return pt?(Rt.L=+pt[0],ft+pt[0].length):-1}function B(Rt,wt,ft){var pt=s.exec(wt.slice(ft,ft+6));return pt?(Rt.L=Math.floor(pt[0]/1e3),ft+pt[0].length):-1}function z(Rt,wt,ft){var pt=c.exec(wt.slice(ft,ft+1));return pt?ft+pt[0].length:-1}function U(Rt,wt,ft){var pt=s.exec(wt.slice(ft));return pt?(Rt.Q=+pt[0],ft+pt[0].length):-1}function H(Rt,wt,ft){var pt=s.exec(wt.slice(ft));return pt?(Rt.s=+pt[0],ft+pt[0].length):-1}function J(Rt,wt){return m(Rt.getDate(),wt,2)}function nt(Rt,wt){return m(Rt.getHours(),wt,2)}function it(Rt,wt){return m(Rt.getHours()%12||12,wt,2)}function ut(Rt,wt){return m(1+P.Z.count((0,C.Z)(Rt),Rt),wt,3)}function Q(Rt,wt){return m(Rt.getMilliseconds(),wt,3)}function j(Rt,wt){return Q(Rt,wt)+"000"}function Z(Rt,wt){return m(Rt.getMonth()+1,wt,2)}function G(Rt,wt){return m(Rt.getMinutes(),wt,2)}function K(Rt,wt){return m(Rt.getSeconds(),wt,2)}function at(Rt){var wt=Rt.getDay();return 0===wt?7:wt}function $(Rt,wt){return m(i.OM.count((0,C.Z)(Rt)-1,Rt),wt,2)}function X(Rt,wt){var ft=Rt.getDay();return Rt=ft>=4||0===ft?(0,i.bL)(Rt):i.bL.ceil(Rt),m(i.bL.count((0,C.Z)(Rt),Rt)+(4===(0,C.Z)(Rt).getDay()),wt,2)}function rt(Rt){return Rt.getDay()}function et(Rt,wt){return m(i.wA.count((0,C.Z)(Rt)-1,Rt),wt,2)}function st(Rt,wt){return m(Rt.getFullYear()%100,wt,2)}function dt(Rt,wt){return m(Rt.getFullYear()%1e4,wt,4)}function bt(Rt){var wt=Rt.getTimezoneOffset();return(wt>0?"-":(wt*=-1,"+"))+m(wt/60|0,"0",2)+m(wt%60,"0",2)}function gt(Rt,wt){return m(Rt.getUTCDate(),wt,2)}function Lt(Rt,wt){return m(Rt.getUTCHours(),wt,2)}function It(Rt,wt){return m(Rt.getUTCHours()%12||12,wt,2)}function Mt(Rt,wt){return m(1+g.Z.count((0,u.Z)(Rt),Rt),wt,3)}function xt(Rt,wt){return m(Rt.getUTCMilliseconds(),wt,3)}function At(Rt,wt){return xt(Rt,wt)+"000"}function Gt(Rt,wt){return m(Rt.getUTCMonth()+1,wt,2)}function Wt(Rt,wt){return m(Rt.getUTCMinutes(),wt,2)}function Pt(Rt,wt){return m(Rt.getUTCSeconds(),wt,2)}function Vt(Rt){var wt=Rt.getUTCDay();return 0===wt?7:wt}function te(Rt,wt){return m(A.Ox.count((0,u.Z)(Rt)-1,Rt),wt,2)}function Qt(Rt,wt){var ft=Rt.getUTCDay();return Rt=ft>=4||0===ft?(0,A.hB)(Rt):A.hB.ceil(Rt),m(A.hB.count((0,u.Z)(Rt),Rt)+(4===(0,u.Z)(Rt).getUTCDay()),wt,2)}function Bt(Rt){return Rt.getUTCDay()}function Ot(Rt,wt){return m(A.l6.count((0,u.Z)(Rt)-1,Rt),wt,2)}function qt(Rt,wt){return m(Rt.getUTCFullYear()%100,wt,2)}function ie(Rt,wt){return m(Rt.getUTCFullYear()%1e4,wt,4)}function oe(){return"+0000"}function pe(){return"%"}function de(Rt){return+Rt}function Fe(Rt){return Math.floor(+Rt/1e3)}!function Nt(Rt){return Kt=l(Rt),Et=Kt.format,Dt=Kt.utcFormat,Kt}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})},82301:function(q,W,t){"use strict";t.d(W,{a:function(){return P}});var A=t(30052),g=t(54263),i=(0,A.Z)(function(C){C.setHours(0,0,0,0)},function(C,u){C.setDate(C.getDate()+u)},function(C,u){return(u-C-(u.getTimezoneOffset()-C.getTimezoneOffset())*g.yB)/g.UD},function(C){return C.getDate()-1});W.Z=i;var P=i.range},54263:function(q,W,t){"use strict";t.d(W,{UD:function(){return P},Y2:function(){return i},Ym:function(){return A},iM:function(){return C},yB:function(){return g}});var A=1e3,g=6e4,i=36e5,P=864e5,C=6048e5},81041:function(q,W,t){"use strict";t.r(W),t.d(W,{timeDay:function(){return m.Z},timeDays:function(){return m.a},timeFriday:function(){return h.mC},timeFridays:function(){return h.b$},timeHour:function(){return c},timeHours:function(){return f},timeInterval:function(){return A.Z},timeMillisecond:function(){return i},timeMilliseconds:function(){return P},timeMinute:function(){return l},timeMinutes:function(){return a},timeMonday:function(){return h.wA},timeMondays:function(){return h.bJ},timeMonth:function(){return p},timeMonths:function(){return o},timeSaturday:function(){return h.EY},timeSaturdays:function(){return h.Ff},timeSecond:function(){return y},timeSeconds:function(){return e},timeSunday:function(){return h.OM},timeSundays:function(){return h.vm},timeThursday:function(){return h.bL},timeThursdays:function(){return h.$t},timeTuesday:function(){return h.sy},timeTuesdays:function(){return h.aU},timeWednesday:function(){return h.zg},timeWednesdays:function(){return h.Ld},timeWeek:function(){return h.OM},timeWeeks:function(){return h.vm},timeYear:function(){return v.Z},timeYears:function(){return v.g},utcDay:function(){return n.Z},utcDays:function(){return n.y},utcFriday:function(){return E.QQ},utcFridays:function(){return E.fz},utcHour:function(){return S},utcHours:function(){return T},utcMillisecond:function(){return i},utcMilliseconds:function(){return P},utcMinute:function(){return b},utcMinutes:function(){return L},utcMonday:function(){return E.l6},utcMondays:function(){return E.$3},utcMonth:function(){return F},utcMonths:function(){return D},utcSaturday:function(){return E.g4},utcSaturdays:function(){return E.Q_},utcSecond:function(){return y},utcSeconds:function(){return e},utcSunday:function(){return E.Ox},utcSundays:function(){return E.SU},utcThursday:function(){return E.hB},utcThursdays:function(){return E.xj},utcTuesday:function(){return E.J1},utcTuesdays:function(){return E.DK},utcWednesday:function(){return E.b3},utcWednesdays:function(){return E.uy},utcWeek:function(){return E.Ox},utcWeeks:function(){return E.SU},utcYear:function(){return N.Z},utcYears:function(){return N.D}});var A=t(30052),g=(0,A.Z)(function(){},function(k,O){k.setTime(+k+O)},function(k,O){return O-k});g.every=function(k){return k=Math.floor(k),isFinite(k)&&k>0?k>1?(0,A.Z)(function(O){O.setTime(Math.floor(O/k)*k)},function(O,B){O.setTime(+O+B*k)},function(O,B){return(B-O)/k}):g:null};var i=g,P=g.range,C=t(54263),u=(0,A.Z)(function(k){k.setTime(k-k.getMilliseconds())},function(k,O){k.setTime(+k+O*C.Ym)},function(k,O){return(O-k)/C.Ym},function(k){return k.getUTCSeconds()}),y=u,e=u.range,r=(0,A.Z)(function(k){k.setTime(k-k.getMilliseconds()-k.getSeconds()*C.Ym)},function(k,O){k.setTime(+k+O*C.yB)},function(k,O){return(O-k)/C.yB},function(k){return k.getMinutes()}),l=r,a=r.range,s=(0,A.Z)(function(k){k.setTime(k-k.getMilliseconds()-k.getSeconds()*C.Ym-k.getMinutes()*C.yB)},function(k,O){k.setTime(+k+O*C.Y2)},function(k,O){return(O-k)/C.Y2},function(k){return k.getHours()}),c=s,f=s.range,m=t(82301),h=t(59879),w=(0,A.Z)(function(k){k.setDate(1),k.setHours(0,0,0,0)},function(k,O){k.setMonth(k.getMonth()+O)},function(k,O){return O.getMonth()-k.getMonth()+12*(O.getFullYear()-k.getFullYear())},function(k){return k.getMonth()}),p=w,o=w.range,v=t(34823),M=(0,A.Z)(function(k){k.setUTCSeconds(0,0)},function(k,O){k.setTime(+k+O*C.yB)},function(k,O){return(O-k)/C.yB},function(k){return k.getUTCMinutes()}),b=M,L=M.range,x=(0,A.Z)(function(k){k.setUTCMinutes(0,0,0)},function(k,O){k.setTime(+k+O*C.Y2)},function(k,O){return(O-k)/C.Y2},function(k){return k.getUTCHours()}),S=x,T=x.range,n=t(48480),E=t(58176),d=(0,A.Z)(function(k){k.setUTCDate(1),k.setUTCHours(0,0,0,0)},function(k,O){k.setUTCMonth(k.getUTCMonth()+O)},function(k,O){return O.getUTCMonth()-k.getUTCMonth()+12*(O.getUTCFullYear()-k.getUTCFullYear())},function(k){return k.getUTCMonth()}),F=d,D=d.range,N=t(79791)},30052:function(q,W,t){"use strict";t.d(W,{Z:function(){return i}});var A=new Date,g=new Date;function i(P,C,u,y){function e(r){return P(r=0===arguments.length?new Date:new Date(+r)),r}return e.floor=function(r){return P(r=new Date(+r)),r},e.ceil=function(r){return P(r=new Date(r-1)),C(r,1),P(r),r},e.round=function(r){var l=e(r),a=e.ceil(r);return r-l<a-r?l:a},e.offset=function(r,l){return C(r=new Date(+r),null==l?1:Math.floor(l)),r},e.range=function(r,l,a){var c,s=[];if(r=e.ceil(r),a=null==a?1:Math.floor(a),!(r<l&&a>0))return s;do{s.push(c=new Date(+r)),C(r,a),P(r)}while(c<r&&r<l);return s},e.filter=function(r){return i(function(l){if(l>=l)for(;P(l),!r(l);)l.setTime(l-1)},function(l,a){if(l>=l)if(a<0)for(;++a<=0;)for(;C(l,-1),!r(l););else for(;--a>=0;)for(;C(l,1),!r(l););})},u&&(e.count=function(r,l){return A.setTime(+r),g.setTime(+l),P(A),P(g),Math.floor(u(A,g))},e.every=function(r){return r=Math.floor(r),isFinite(r)&&r>0?r>1?e.filter(y?function(l){return y(l)%r==0}:function(l){return e.count(0,l)%r==0}):e:null}),e}},48480:function(q,W,t){"use strict";t.d(W,{y:function(){return P}});var A=t(30052),g=t(54263),i=(0,A.Z)(function(C){C.setUTCHours(0,0,0,0)},function(C,u){C.setUTCDate(C.getUTCDate()+u)},function(C,u){return(u-C)/g.UD},function(C){return C.getUTCDate()-1});W.Z=i;var P=i.range},58176:function(q,W,t){"use strict";t.d(W,{$3:function(){return s},DK:function(){return c},J1:function(){return u},Ox:function(){return P},QQ:function(){return r},Q_:function(){return w},SU:function(){return a},b3:function(){return y},fz:function(){return h},g4:function(){return l},hB:function(){return e},l6:function(){return C},uy:function(){return f},xj:function(){return m}});var A=t(30052),g=t(54263);function i(p){return(0,A.Z)(function(o){o.setUTCDate(o.getUTCDate()-(o.getUTCDay()+7-p)%7),o.setUTCHours(0,0,0,0)},function(o,v){o.setUTCDate(o.getUTCDate()+7*v)},function(o,v){return(v-o)/g.iM})}var P=i(0),C=i(1),u=i(2),y=i(3),e=i(4),r=i(5),l=i(6),a=P.range,s=C.range,c=u.range,f=y.range,m=e.range,h=r.range,w=l.range},79791:function(q,W,t){"use strict";t.d(W,{D:function(){return i}});var A=t(30052),g=(0,A.Z)(function(P){P.setUTCMonth(0,1),P.setUTCHours(0,0,0,0)},function(P,C){P.setUTCFullYear(P.getUTCFullYear()+C)},function(P,C){return C.getUTCFullYear()-P.getUTCFullYear()},function(P){return P.getUTCFullYear()});g.every=function(P){return isFinite(P=Math.floor(P))&&P>0?(0,A.Z)(function(C){C.setUTCFullYear(Math.floor(C.getUTCFullYear()/P)*P),C.setUTCMonth(0,1),C.setUTCHours(0,0,0,0)},function(C,u){C.setUTCFullYear(C.getUTCFullYear()+u*P)}):null},W.Z=g;var i=g.range},59879:function(q,W,t){"use strict";t.d(W,{$t:function(){return m},EY:function(){return l},Ff:function(){return w},Ld:function(){return f},OM:function(){return P},aU:function(){return c},b$:function(){return h},bJ:function(){return s},bL:function(){return e},mC:function(){return r},sy:function(){return u},vm:function(){return a},wA:function(){return C},zg:function(){return y}});var A=t(30052),g=t(54263);function i(p){return(0,A.Z)(function(o){o.setDate(o.getDate()-(o.getDay()+7-p)%7),o.setHours(0,0,0,0)},function(o,v){o.setDate(o.getDate()+7*v)},function(o,v){return(v-o-(v.getTimezoneOffset()-o.getTimezoneOffset())*g.yB)/g.iM})}var P=i(0),C=i(1),u=i(2),y=i(3),e=i(4),r=i(5),l=i(6),a=P.range,s=C.range,c=u.range,f=y.range,m=e.range,h=r.range,w=l.range},34823:function(q,W,t){"use strict";t.d(W,{g:function(){return i}});var A=t(30052),g=(0,A.Z)(function(P){P.setMonth(0,1),P.setHours(0,0,0,0)},function(P,C){P.setFullYear(P.getFullYear()+C)},function(P,C){return C.getFullYear()-P.getFullYear()},function(P){return P.getFullYear()});g.every=function(P){return isFinite(P=Math.floor(P))&&P>0?(0,A.Z)(function(C){C.setFullYear(Math.floor(C.getFullYear()/P)*P),C.setMonth(0,1),C.setHours(0,0,0,0)},function(C,u){C.setFullYear(C.getFullYear()+u*P)}):null},W.Z=g;var i=g.range},17045:function(q,W,t){"use strict";var A=t(8709),g="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),i=Object.prototype.toString,P=Array.prototype.concat,C=Object.defineProperty,y=t(55622)(),e=C&&y,r=function(a,s,c,f){if(s in a)if(!0===f){if(a[s]===c)return}else if(!function(a){return"function"==typeof a&&"[object Function]"===i.call(a)}(f)||!f())return;e?C(a,s,{configurable:!0,enumerable:!1,value:c,writable:!0}):a[s]=c},l=function(a,s){var c=arguments.length>2?arguments[2]:{},f=A(s);g&&(f=P.call(f,Object.getOwnPropertySymbols(s)));for(var m=0;m<f.length;m+=1)r(a,f[m],s[f[m]],c[f[m]])};l.supportsDescriptors=!!e,q.exports=l},46775:function(q){q.exports=function(){for(var W=0;W<arguments.length;W++)if(void 0!==arguments[W])return arguments[W]}},53545:function(q){"use strict";q.exports=g;var t=(g.canvas=document.createElement("canvas")).getContext("2d"),A=i([32,126]);function g(P,C){Array.isArray(P)&&(P=P.join(", "));var y,u={},e=16,r=.05;C&&(2===C.length&&"number"==typeof C[0]?y=i(C):Array.isArray(C)?y=C:(C.o?y=i(C.o):C.pairs&&(y=C.pairs),C.fontSize&&(e=C.fontSize),null!=C.threshold&&(r=C.threshold))),y||(y=A),t.font=e+"px "+P;for(var l=0;l<y.length;l++){var a=y[l],s=t.measureText(a[0]).width+t.measureText(a[1]).width,c=t.measureText(a).width;Math.abs(s-c)>e*r&&(u[a]=(c-s)/e*1e3)}return u}function i(P){for(var C=[],u=P[0];u<=P[1];u++)for(var y=String.fromCharCode(u),e=P[0];e<P[1];e++){var r=String.fromCharCode(e);C.push(y+r)}return C}g.createPairs=i,g.ascii=A},31457:function(q,W,t){var A=t(65185),g=t(18625),i={M:"moveTo",C:"bezierCurveTo"};q.exports=function(P,C){P.beginPath(),g(A(C)).forEach(function(u){var y=u[0],e=u.slice(1);P[i[y]].apply(P,e)}),P.closePath()}},90660:function(q){q.exports=function(W){switch(W){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},12129:function(q){"use strict";function W(g,i,P){var C=0|g[P];if(C<=0)return[];var y,u=new Array(C);if(P===g.length-1)for(y=0;y<C;++y)u[y]=i;else for(y=0;y<C;++y)u[y]=W(g,i,P+1);return u}q.exports=function A(g,i){switch(void 0===i&&(i=0),typeof g){case"number":if(g>0)return function t(g,i){var P,C;for(P=new Array(g),C=0;C<g;++C)P[C]=i;return P}(0|g,i);break;case"object":if("number"==typeof g.length)return W(g,i,0)}return[]}},11474:function(q){"use strict";function W(D,N,k){k=k||2;var H,J,nt,it,ut,Q,j,O=N&&N.length,B=O?N[0]*k:D.length,z=t(D,0,B,k,!0),U=[];if(!z||z.next===z.prev)return U;if(O&&(z=function y(D,N,k,O){var z,U,nt,B=[];for(z=0,U=N.length;z<U;z++)(nt=t(D,N[z]*O,z<U-1?N[z+1]*O:D.length,O,!1))===nt.next&&(nt.steiner=!0),B.push(m(nt));for(B.sort(e),z=0;z<B.length;z++)r(B[z],k),k=A(k,k.next);return k}(D,N,z,k)),D.length>80*k){H=nt=D[0],J=it=D[1];for(var Z=k;Z<B;Z+=k)(ut=D[Z])<H&&(H=ut),(Q=D[Z+1])<J&&(J=Q),ut>nt&&(nt=ut),Q>it&&(it=Q);j=0!==(j=Math.max(nt-H,it-J))?1/j:0}return g(z,U,k,H,J,j),U}function t(D,N,k,O,B){var z,U;if(B===F(D,N,k,O)>0)for(z=N;z<k;z+=O)U=n(z,D[z],D[z+1],U);else for(z=k-O;z>=N;z-=O)U=n(z,D[z],D[z+1],U);return U&&o(U,U.next)&&(E(U),U=U.next),U}function A(D,N){if(!D)return D;N||(N=D);var O,k=D;do{if(O=!1,k.steiner||!o(k,k.next)&&0!==p(k.prev,k,k.next))k=k.next;else{if(E(k),(k=N=k.prev)===k.next)break;O=!0}}while(O||k!==N);return N}function g(D,N,k,O,B,z,U){if(D){!U&&z&&function s(D,N,k,O){var B=D;do{null===B.z&&(B.z=f(B.x,B.y,N,k,O)),B.prevZ=B.prev,B.nextZ=B.next,B=B.next}while(B!==D);B.prevZ.nextZ=null,B.prevZ=null,function c(D){var N,k,O,B,z,U,H,J,nt=1;do{for(k=D,D=null,z=null,U=0;k;){for(U++,O=k,H=0,N=0;N<nt&&(H++,O=O.nextZ);N++);for(J=nt;H>0||J>0&&O;)0!==H&&(0===J||!O||k.z<=O.z)?(B=k,k=k.nextZ,H--):(B=O,O=O.nextZ,J--),z?z.nextZ=B:D=B,B.prevZ=z,z=B;k=O}z.nextZ=null,nt*=2}while(U>1);return D}(B)}(D,O,B,z);for(var J,nt,H=D;D.prev!==D.next;)if(J=D.prev,nt=D.next,z?P(D,O,B,z):i(D))N.push(J.i/k),N.push(D.i/k),N.push(nt.i/k),E(D),D=nt.next,H=nt.next;else if((D=nt)===H){U?1===U?g(D=C(A(D),N,k),N,k,O,B,z,2):2===U&&u(D,N,k,O,B,z):g(A(D),N,k,O,B,z,1);break}}}function i(D){var N=D.prev,k=D,O=D.next;if(p(N,k,O)>=0)return!1;for(var B=D.next.next;B!==D.prev;){if(h(N.x,N.y,k.x,k.y,O.x,O.y,B.x,B.y)&&p(B.prev,B,B.next)>=0)return!1;B=B.next}return!0}function P(D,N,k,O){var B=D.prev,z=D,U=D.next;if(p(B,z,U)>=0)return!1;for(var nt=B.x>z.x?B.x>U.x?B.x:U.x:z.x>U.x?z.x:U.x,it=B.y>z.y?B.y>U.y?B.y:U.y:z.y>U.y?z.y:U.y,ut=f(B.x<z.x?B.x<U.x?B.x:U.x:z.x<U.x?z.x:U.x,B.y<z.y?B.y<U.y?B.y:U.y:z.y<U.y?z.y:U.y,N,k,O),Q=f(nt,it,N,k,O),j=D.prevZ,Z=D.nextZ;j&&j.z>=ut&&Z&&Z.z<=Q;){if(j!==D.prev&&j!==D.next&&h(B.x,B.y,z.x,z.y,U.x,U.y,j.x,j.y)&&p(j.prev,j,j.next)>=0||(j=j.prevZ,Z!==D.prev&&Z!==D.next&&h(B.x,B.y,z.x,z.y,U.x,U.y,Z.x,Z.y)&&p(Z.prev,Z,Z.next)>=0))return!1;Z=Z.nextZ}for(;j&&j.z>=ut;){if(j!==D.prev&&j!==D.next&&h(B.x,B.y,z.x,z.y,U.x,U.y,j.x,j.y)&&p(j.prev,j,j.next)>=0)return!1;j=j.prevZ}for(;Z&&Z.z<=Q;){if(Z!==D.prev&&Z!==D.next&&h(B.x,B.y,z.x,z.y,U.x,U.y,Z.x,Z.y)&&p(Z.prev,Z,Z.next)>=0)return!1;Z=Z.nextZ}return!0}function C(D,N,k){var O=D;do{var B=O.prev,z=O.next.next;!o(B,z)&&v(B,O,O.next,z)&&x(B,z)&&x(z,B)&&(N.push(B.i/k),N.push(O.i/k),N.push(z.i/k),E(O),E(O.next),O=D=z),O=O.next}while(O!==D);return A(O)}function u(D,N,k,O,B,z){var U=D;do{for(var H=U.next.next;H!==U.prev;){if(U.i!==H.i&&w(U,H)){var J=T(U,H);return U=A(U,U.next),J=A(J,J.next),g(U,N,k,O,B,z),void g(J,N,k,O,B,z)}H=H.next}U=U.next}while(U!==D)}function e(D,N){return D.x-N.x}function r(D,N){if(N=function l(D,N){var U,k=N,O=D.x,B=D.y,z=-1/0;do{if(B<=k.y&&B>=k.next.y&&k.next.y!==k.y){var H=k.x+(B-k.y)*(k.next.x-k.x)/(k.next.y-k.y);if(H<=O&&H>z){if(z=H,H===O){if(B===k.y)return k;if(B===k.next.y)return k.next}U=k.x<k.next.x?k:k.next}}k=k.next}while(k!==N);if(!U)return null;if(O===z)return U;var Q,J=U,nt=U.x,it=U.y,ut=1/0;k=U;do{O>=k.x&&k.x>=nt&&O!==k.x&&h(B<it?O:z,B,nt,it,B<it?z:O,B,k.x,k.y)&&(Q=Math.abs(B-k.y)/(O-k.x),x(k,D)&&(Q<ut||Q===ut&&(k.x>U.x||k.x===U.x&&a(U,k)))&&(U=k,ut=Q)),k=k.next}while(k!==J);return U}(D,N)){var k=T(N,D);A(N,N.next),A(k,k.next)}}function a(D,N){return p(D.prev,D,N.prev)<0&&p(N.next,D,D.next)<0}function f(D,N,k,O,B){return(D=1431655765&((D=858993459&((D=252645135&((D=16711935&((D=32767*(D-k)*B)|D<<8))|D<<4))|D<<2))|D<<1))|(N=1431655765&((N=858993459&((N=252645135&((N=16711935&((N=32767*(N-O)*B)|N<<8))|N<<4))|N<<2))|N<<1))<<1}function m(D){var N=D,k=D;do{(N.x<k.x||N.x===k.x&&N.y<k.y)&&(k=N),N=N.next}while(N!==D);return k}function h(D,N,k,O,B,z,U,H){return(B-U)*(N-H)-(D-U)*(z-H)>=0&&(D-U)*(O-H)-(k-U)*(N-H)>=0&&(k-U)*(z-H)-(B-U)*(O-H)>=0}function w(D,N){return D.next.i!==N.i&&D.prev.i!==N.i&&!function L(D,N){var k=D;do{if(k.i!==D.i&&k.next.i!==D.i&&k.i!==N.i&&k.next.i!==N.i&&v(k,k.next,D,N))return!0;k=k.next}while(k!==D);return!1}(D,N)&&(x(D,N)&&x(N,D)&&function S(D,N){var k=D,O=!1,B=(D.x+N.x)/2,z=(D.y+N.y)/2;do{k.y>z!=k.next.y>z&&k.next.y!==k.y&&B<(k.next.x-k.x)*(z-k.y)/(k.next.y-k.y)+k.x&&(O=!O),k=k.next}while(k!==D);return O}(D,N)&&(p(D.prev,D,N.prev)||p(D,N.prev,N))||o(D,N)&&p(D.prev,D,D.next)>0&&p(N.prev,N,N.next)>0)}function p(D,N,k){return(N.y-D.y)*(k.x-N.x)-(N.x-D.x)*(k.y-N.y)}function o(D,N){return D.x===N.x&&D.y===N.y}function v(D,N,k,O){var B=b(p(D,N,k)),z=b(p(D,N,O)),U=b(p(k,O,D)),H=b(p(k,O,N));return!!(B!==z&&U!==H||0===B&&M(D,k,N)||0===z&&M(D,O,N)||0===U&&M(k,D,O)||0===H&&M(k,N,O))}function M(D,N,k){return N.x<=Math.max(D.x,k.x)&&N.x>=Math.min(D.x,k.x)&&N.y<=Math.max(D.y,k.y)&&N.y>=Math.min(D.y,k.y)}function b(D){return D>0?1:D<0?-1:0}function x(D,N){return p(D.prev,D,D.next)<0?p(D,N,D.next)>=0&&p(D,D.prev,N)>=0:p(D,N,D.prev)<0||p(D,D.next,N)<0}function T(D,N){var k=new d(D.i,D.x,D.y),O=new d(N.i,N.x,N.y),B=D.next,z=N.prev;return D.next=N,N.prev=D,k.next=B,B.prev=k,O.next=k,k.prev=O,z.next=O,O.prev=z,O}function n(D,N,k,O){var B=new d(D,N,k);return O?(B.next=O.next,B.prev=O,O.next.prev=B,O.next=B):(B.prev=B,B.next=B),B}function E(D){D.next.prev=D.prev,D.prev.next=D.next,D.prevZ&&(D.prevZ.nextZ=D.nextZ),D.nextZ&&(D.nextZ.prevZ=D.prevZ)}function d(D,N,k){this.i=D,this.x=N,this.y=k,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function F(D,N,k,O){for(var B=0,z=N,U=k-O;z<k;z+=O)B+=(D[U]-D[z])*(D[z+1]+D[U+1]),U=z;return B}q.exports=W,q.exports.default=W,W.deviation=function(D,N,k,O){var B=N&&N.length,U=Math.abs(F(D,0,B?N[0]*k:D.length,k));if(B)for(var H=0,J=N.length;H<J;H++)U-=Math.abs(F(D,N[H]*k,H<J-1?N[H+1]*k:D.length,k));var ut=0;for(H=0;H<O.length;H+=3){var Q=O[H]*k,j=O[H+1]*k,Z=O[H+2]*k;ut+=Math.abs((D[Q]-D[Z])*(D[j+1]-D[Q+1])-(D[Q]-D[j])*(D[Z+1]-D[Q+1]))}return 0===U&&0===ut?0:Math.abs((ut-U)/U)},W.flatten=function(D){for(var N=D[0][0].length,k={vertices:[],holes:[],dimensions:N},O=0,B=0;B<D.length;B++){for(var z=0;z<D[B].length;z++)for(var U=0;U<N;U++)k.vertices.push(D[B][z][U]);B>0&&k.holes.push(O+=D[B-1].length)}return k}},2502:function(q,W,t){var A=t(68664);q.exports=function(i,P){var l,C=[],u=[],y=[],e={},r=[];function a(M){y[M]=!1,e.hasOwnProperty(M)&&Object.keys(e[M]).forEach(function(b){delete e[M][b],y[b]&&a(b)})}function s(M){var L,x,b=!1;for(u.push(M),y[M]=!0,L=0;L<r[M].length;L++)(x=r[M][L])===l?(c(l,u),b=!0):y[x]||(b=s(x));if(b)a(M);else for(L=0;L<r[M].length;L++){var S=e[x=r[M][L]];S||(e[x]=S={}),S[x]=!0}return u.pop(),b}function c(M,b){var L=[].concat(b).concat(M);P?P(s):C.push(L)}function m(M){!function f(M){for(var b=0;b<i.length;b++)b<M&&(i[b]=[]),i[b]=i[b].filter(function(L){return L>=M})}(M);for(var T,x=A(i).components.filter(function(D){return D.length>1}),S=1/0,n=0;n<x.length;n++)for(var E=0;E<x[n].length;E++)x[n][E]<S&&(S=x[n][E],T=n);var d=x[T];return!!d&&{leastVertex:S,adjList:i.map(function(D,N){return-1===d.indexOf(N)?[]:D.filter(function(k){return-1!==d.indexOf(k)})})}}l=0;for(var h=i.length;l<h;){var w=m(l);if(l=w.leastVertex,r=w.adjList){for(var p=0;p<r.length;p++)for(var o=0;o<r[p].length;o++){var v=r[p][o];y[+v]=!1,e[v]={}}s(l),l+=1}else l=h}if(!P)return C}},16134:function(q,W,t){"use strict";var A=t(36672);q.exports=function(){return A(this).length=0,this}},4892:function(q,W,t){"use strict";q.exports=t(64404)()?Array.from:t(49441)},64404:function(q){"use strict";q.exports=function(){var t,A,W=Array.from;return"function"==typeof W&&(A=W(t=["raz","dwa"]),Boolean(A&&A!==t&&"dwa"===A[1]))}},49441:function(q,W,t){"use strict";var A=t(8260).iterator,g=t(73051),i=t(33717),P=t(35976),C=t(78513),u=t(36672),y=t(95296),e=t(87963),r=Array.isArray,l=Function.prototype.call,a={configurable:!0,enumerable:!0,writable:!0,value:null},s=Object.defineProperty;q.exports=function(c){var h,w,p,o,v,M,b,L,x,S,f=arguments[1],m=arguments[2];if(c=Object(u(c)),y(f)&&C(f),this&&this!==Array&&i(this))h=this;else{if(!f){if(g(c))return 1!==(v=c.length)?Array.apply(null,c):((o=new Array(1))[0]=c[0],o);if(r(c)){for(o=new Array(v=c.length),w=0;w<v;++w)o[w]=c[w];return o}}o=[]}if(!r(c))if(void 0!==(x=c[A])){for(b=C(x).call(c),h&&(o=new h),L=b.next(),w=0;!L.done;)S=f?l.call(f,m,L.value,w):L.value,h?(a.value=S,s(o,w,a)):o[w]=S,L=b.next(),++w;v=w}else if(e(c)){for(v=c.length,h&&(o=new h),w=0,p=0;w<v;++w)S=c[w],w+1<v&&(M=S.charCodeAt(0))>=55296&&M<=56319&&(S+=c[++w]),S=f?l.call(f,m,S,p):S,h?(a.value=S,s(o,p,a)):o[p]=S,++p;v=p}if(void 0===v)for(v=P(c.length),h&&(o=new h(v)),w=0;w<v;++w)S=f?l.call(f,m,c[w],w):c[w],h?(a.value=S,s(o,w,a)):o[w]=S;return h&&(a.value=null,o.length=v),o}},73051:function(q){"use strict";var W=Object.prototype.toString,t=W.call(function(){return arguments}());q.exports=function(A){return W.call(A)===t}},33717:function(q){"use strict";var W=Object.prototype.toString,t=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);q.exports=function(A){return"function"==typeof A&&t(W.call(A))}},52345:function(q){"use strict";q.exports=function(){}},9953:function(q,W,t){"use strict";q.exports=t(90436)()?Math.sign:t(6069)},90436:function(q){"use strict";q.exports=function(){var W=Math.sign;return"function"==typeof W&&1===W(10)&&-1===W(-20)}},6069:function(q){"use strict";q.exports=function(W){return W=Number(W),isNaN(W)||0===W?W:W>0?1:-1}},56247:function(q,W,t){"use strict";var A=t(9953),g=Math.abs,i=Math.floor;q.exports=function(P){return isNaN(P)?0:0!==(P=Number(P))&&isFinite(P)?A(P)*i(g(P)):P}},35976:function(q,W,t){"use strict";var A=t(56247),g=Math.max;q.exports=function(i){return g(0,A(i))}},67260:function(q,W,t){"use strict";var A=t(78513),g=t(36672),i=Function.prototype.bind,P=Function.prototype.call,C=Object.keys,u=Object.prototype.propertyIsEnumerable;q.exports=function(y,e){return function(r,l){var a,s=arguments[2],c=arguments[3];return r=Object(g(r)),A(l),a=C(r),c&&a.sort("function"==typeof c?i.call(c,r):void 0),"function"!=typeof y&&(y=a[y]),P.call(y,a,function(f,m){return u.call(r,f)?P.call(l,s,r[f],f,r,m):e})}}},95879:function(q,W,t){"use strict";q.exports=t(73583)()?Object.assign:t(34205)},73583:function(q){"use strict";q.exports=function(){var t,W=Object.assign;return"function"==typeof W&&(W(t={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},34205:function(q,W,t){"use strict";var A=t(68700),g=t(36672),i=Math.max;q.exports=function(P,C){var u,y,r,e=i(arguments.length,2);for(P=Object(g(P)),r=function(l){try{P[l]=C[l]}catch(a){u||(u=a)}},y=1;y<e;++y)A(C=arguments[y]).forEach(r);if(void 0!==u)throw u;return P}},19012:function(q,W,t){"use strict";var A=t(4892),g=t(95879),i=t(36672);q.exports=function(P){var C=Object(i(P)),u=arguments[1],y=Object(arguments[2]);if(C!==P&&!u)return C;var e={};return u?A(u,function(r){(y.ensure||r in P)&&(e[r]=P[r])}):g(e,P),e}},52818:function(q,W,t){"use strict";var g,i,P,C,A=Object.create;t(33247)()||(g=t(51882)),q.exports=g&&1===g.level?(i={},P={},C={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(u){P[u]="__proto__"!==u?C:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(i,P),Object.defineProperty(g,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:i}),function(u,y){return A(null===u?i:u,y)}):A},96437:function(q,W,t){"use strict";q.exports=t(67260)("forEach")},99611:function(q,W,t){"use strict";var A=t(95296),g={function:!0,object:!0};q.exports=function(i){return A(i)&&g[typeof i]||!1}},95296:function(q,W,t){"use strict";var A=t(52345)();q.exports=function(g){return g!==A&&null!==g}},68700:function(q,W,t){"use strict";q.exports=t(13895)()?Object.keys:t(25217)},13895:function(q){"use strict";q.exports=function(){try{return Object.keys("primitive"),!0}catch(W){return!1}}},25217:function(q,W,t){"use strict";var A=t(95296),g=Object.keys;q.exports=function(i){return g(A(i)?Object(i):i)}},16906:function(q,W,t){"use strict";var A=t(78513),g=t(96437),i=Function.prototype.call;q.exports=function(P,C){var u={},y=arguments[2];return A(C),g(P,function(e,r,l,a){u[r]=i.call(C,y,e,r,l,a)}),u}},21780:function(q,W,t){"use strict";var A=t(95296),g=Array.prototype.forEach,i=Object.create,P=function(C,u){var y;for(y in C)u[y]=C[y]};q.exports=function(C){var u=i(null);return g.call(arguments,function(y){!A(y)||P(Object(y),u)}),u}},1496:function(q,W,t){"use strict";q.exports=t(33247)()?Object.setPrototypeOf:t(51882)},33247:function(q){"use strict";var W=Object.create,t=Object.getPrototypeOf,A={};q.exports=function(){var g=Object.setPrototypeOf;return"function"==typeof g&&t(g((arguments[0]||W)(null),A))===A}},51882:function(q,W,t){"use strict";var u,y,e,r,A=t(99611),g=t(36672),i=Object.prototype.isPrototypeOf,P=Object.defineProperty,C={configurable:!0,enumerable:!1,writable:!0,value:void 0};u=function(y,e){if(g(y),null===e||A(e))return y;throw new TypeError("Prototype must be null or an object")},q.exports=(y=function(){var r,y=Object.create(null),e={},l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(l){try{(r=l.set).call(y,e)}catch(a){}if(Object.getPrototypeOf(y)===e)return{set:r,level:2}}return y.__proto__=e,Object.getPrototypeOf(y)===e?{level:2}:((y={}).__proto__=e,Object.getPrototypeOf(y)===e&&{level:1})}(),y?(2===y.level?y.set?(r=y.set,e=function(l,a){return r.call(u(l,a),a),l}):e=function(l,a){return u(l,a).__proto__=a,l}:e=function l(a,s){var c;return u(a,s),(c=i.call(l.nullPolyfill,a))&&delete l.nullPolyfill.__proto__,null===s&&(s=l.nullPolyfill),a.__proto__=s,c&&P(l.nullPolyfill,"__proto__",C),a},Object.defineProperty(e,"level",{configurable:!1,enumerable:!1,writable:!1,value:y.level})):null),t(52818)},78513:function(q){"use strict";q.exports=function(W){if("function"!=typeof W)throw new TypeError(W+" is not a function");return W}},98976:function(q,W,t){"use strict";var A=t(99611);q.exports=function(g){if(!A(g))throw new TypeError(g+" is not an Object");return g}},36672:function(q,W,t){"use strict";var A=t(95296);q.exports=function(g){if(!A(g))throw new TypeError("Cannot use null or undefined");return g}},66741:function(q,W,t){"use strict";q.exports=t(17557)()?String.prototype.contains:t(60381)},17557:function(q){"use strict";var W="razdwatrzy";q.exports=function(){return"function"==typeof W.contains&&!0===W.contains("dwa")&&!1===W.contains("foo")}},60381:function(q){"use strict";var W=String.prototype.indexOf;q.exports=function(t){return W.call(this,t,arguments[1])>-1}},87963:function(q){"use strict";var W=Object.prototype.toString,t=W.call("");q.exports=function(A){return"string"==typeof A||A&&"object"==typeof A&&(A instanceof String||W.call(A)===t)||!1}},43043:function(q){"use strict";var W=Object.create(null),t=Math.random;q.exports=function(){var A;do{A=t().toString(36).slice(2)}while(W[A]);return A}},32411:function(q,W,t){"use strict";var y,A=t(1496),g=t(66741),i=t(62072),P=t(8260),C=t(95426),u=Object.defineProperty;y=q.exports=function(e,r){if(!(this instanceof y))throw new TypeError("Constructor requires 'new'");C.call(this,e),r=r?g.call(r,"key+value")?"key+value":g.call(r,"key")?"key":"value":"value",u(this,"__kind__",i("",r))},A&&A(y,C),delete y.prototype.constructor,y.prototype=Object.create(C.prototype,{_resolve:i(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e})}),u(y.prototype,P.toStringTag,i("c","Array Iterator"))},27515:function(q,W,t){"use strict";var A=t(73051),g=t(78513),i=t(87963),P=t(66661),C=Array.isArray,u=Function.prototype.call,y=Array.prototype.some;q.exports=function(e,r){var l,s,c,f,m,h,w,p,a=arguments[2];if(C(e)||A(e)?l="array":i(e)?l="string":e=P(e),g(r),c=function(){f=!0},"array"!==l)if("string"!==l)for(s=e.next();!s.done;){if(u.call(r,a,s.value,c),f)return;s=e.next()}else for(h=e.length,m=0;m<h&&(w=e[m],m+1<h&&(p=w.charCodeAt(0))>=55296&&p<=56319&&(w+=e[++m]),u.call(r,a,w,c),!f);++m);else y.call(e,function(o){return u.call(r,a,o,c),f})}},66661:function(q,W,t){"use strict";var A=t(73051),g=t(87963),i=t(32411),P=t(259),C=t(58095),u=t(8260).iterator;q.exports=function(y){return"function"==typeof C(y)[u]?y[u]():A(y)?new i(y):g(y)?new P(y):new i(y)}},95426:function(q,W,t){"use strict";var l,A=t(16134),g=t(95879),i=t(78513),P=t(36672),C=t(62072),u=t(55174),y=t(8260),e=Object.defineProperty,r=Object.defineProperties;q.exports=l=function(a,s){if(!(this instanceof l))throw new TypeError("Constructor requires 'new'");r(this,{__list__:C("w",P(a)),__context__:C("w",s),__nextIndex__:C("w",0)}),s&&(i(s.on),s.on("_add",this._onAdd),s.on("_delete",this._onDelete),s.on("_clear",this._onClear))},delete l.prototype.constructor,r(l.prototype,g({_next:C(function(){var a;if(this.__list__){if(this.__redo__&&void 0!==(a=this.__redo__.shift()))return a;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:C(function(){return this._createResult(this._next())}),_createResult:C(function(a){return void 0===a?{done:!0,value:void 0}:{done:!1,value:this._resolve(a)}}),_resolve:C(function(a){return this.__list__[a]}),_unBind:C(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:C(function(){return"[object "+(this[y.toStringTag]||"Object")+"]"})},u({_onAdd:C(function(a){if(!(a>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void e(this,"__redo__",C("c",[a]));this.__redo__.forEach(function(s,c){s>=a&&(this.__redo__[c]=++s)},this),this.__redo__.push(a)}}),_onDelete:C(function(a){var s;a>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(s=this.__redo__.indexOf(a))&&this.__redo__.splice(s,1),this.__redo__.forEach(function(c,f){c>a&&(this.__redo__[f]=--c)},this)))}),_onClear:C(function(){this.__redo__&&A.call(this.__redo__),this.__nextIndex__=0})}))),e(l.prototype,y.iterator,C(function(){return this}))},35940:function(q,W,t){"use strict";var A=t(73051),g=t(95296),i=t(87963),P=t(8260).iterator,C=Array.isArray;q.exports=function(u){return!(!g(u)||!(C(u)||i(u)||A(u))&&"function"!=typeof u[P])}},259:function(q,W,t){"use strict";var u,A=t(1496),g=t(62072),i=t(8260),P=t(95426),C=Object.defineProperty;u=q.exports=function(y){if(!(this instanceof u))throw new TypeError("Constructor requires 'new'");y=String(y),P.call(this,y),C(this,"__length__",g("",y.length))},A&&A(u,P),delete u.prototype.constructor,u.prototype=Object.create(P.prototype,{_next:g(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:g(function(y){var r,e=this.__list__[y];return this.__nextIndex__===this.__length__?e:(r=e.charCodeAt(0))>=55296&&r<=56319?e+this.__list__[this.__nextIndex__++]:e})}),C(u.prototype,i.toStringTag,g("c","String Iterator"))},58095:function(q,W,t){"use strict";var A=t(35940);q.exports=function(g){if(!A(g))throw new TypeError(g+" is not iterable");return g}},73523:function(q){"use strict";function W(A,g){if(null==A)throw new TypeError("Cannot convert first argument to object");for(var i=Object(A),P=1;P<arguments.length;P++){var C=arguments[P];if(null!=C)for(var u=Object.keys(Object(C)),y=0,e=u.length;y<e;y++){var r=u[y],l=Object.getOwnPropertyDescriptor(C,r);void 0!==l&&l.enumerable&&(i[r]=C[r])}}return i}q.exports={assign:W,polyfill:function t(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:W})}}},8260:function(q,W,t){"use strict";q.exports=t(69711)()?t(94908).Symbol:t(18415)},69711:function(q,W,t){"use strict";var A=t(94908),g={object:!0,symbol:!0};q.exports=function(){var P,i=A.Symbol;if("function"!=typeof i)return!1;P=i("test symbol");try{String(P)}catch(C){return!1}return!(!g[typeof i.iterator]||!g[typeof i.toPrimitive]||!g[typeof i.toStringTag])}},82276:function(q){"use strict";q.exports=function(W){return!(!W||"symbol"!=typeof W&&(!W.constructor||"Symbol"!==W.constructor.name||"Symbol"!==W[W.constructor.toStringTag]))}},29366:function(q,W,t){"use strict";var A=t(62072),i=Object.defineProperty,P=Object.prototype,C=(0,Object.create)(null);q.exports=function(u){for(var e,r,y=0;C[u+(y||"")];)++y;return C[u+=y||""]=!0,i(P,e="@@"+u,A.gs(null,function(l){r||(r=!0,i(this,e,A(l)),r=!1)})),e}},92842:function(q,W,t){"use strict";var A=t(62072),g=t(94908).Symbol;q.exports=function(i){return Object.defineProperties(i,{hasInstance:A("",g&&g.hasInstance||i("hasInstance")),isConcatSpreadable:A("",g&&g.isConcatSpreadable||i("isConcatSpreadable")),iterator:A("",g&&g.iterator||i("iterator")),match:A("",g&&g.match||i("match")),replace:A("",g&&g.replace||i("replace")),search:A("",g&&g.search||i("search")),species:A("",g&&g.species||i("species")),split:A("",g&&g.split||i("split")),toPrimitive:A("",g&&g.toPrimitive||i("toPrimitive")),toStringTag:A("",g&&g.toStringTag||i("toStringTag")),unscopables:A("",g&&g.unscopables||i("unscopables"))})}},13304:function(q,W,t){"use strict";var A=t(62072),g=t(53308),i=Object.create(null);q.exports=function(P){return Object.defineProperties(P,{for:A(function(C){return i[C]?i[C]:i[C]=P(String(C))}),keyFor:A(function(C){var u;for(u in g(C),i)if(i[u]===C)return u})})}},18415:function(q,W,t){"use strict";var l,a,s,A=t(62072),g=t(53308),i=t(94908).Symbol,P=t(29366),C=t(92842),u=t(13304),y=Object.create,e=Object.defineProperties,r=Object.defineProperty;if("function"==typeof i)try{String(i()),s=!0}catch(c){}else i=null;a=function(f){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return l(f)},q.exports=l=function c(f){var m;if(this instanceof c)throw new TypeError("Symbol is not a constructor");return s?i(f):(m=y(a.prototype),f=void 0===f?"":String(f),e(m,{__description__:A("",f),__name__:A("",P(f))}))},C(l),u(l),e(a.prototype,{constructor:A(l),toString:A("",function(){return this.__name__})}),e(l.prototype,{toString:A(function(){return"Symbol ("+g(this).__description__+")"}),valueOf:A(function(){return g(this)})}),r(l.prototype,l.toPrimitive,A("",function(){var c=g(this);return"symbol"==typeof c?c:c.toString()})),r(l.prototype,l.toStringTag,A("c","Symbol")),r(a.prototype,l.toStringTag,A("c",l.prototype[l.toStringTag])),r(a.prototype,l.toPrimitive,A("c",l.prototype[l.toPrimitive]))},53308:function(q,W,t){"use strict";var A=t(82276);q.exports=function(g){if(!A(g))throw new TypeError(g+" is not a symbol");return g}},83522:function(q,W,t){"use strict";q.exports=t(96402)()?WeakMap:t(329)},96402:function(q){"use strict";q.exports=function(){var W,t;if("function"!=typeof WeakMap)return!1;try{W=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch(A){return!1}return!("[object WeakMap]"!==String(W)||"function"!=typeof W.set||W.set({},1)!==W||"function"!=typeof W.delete||"function"!=typeof W.has||"one"!==W.get(t))}},96416:function(q){"use strict";q.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},329:function(q,W,t){"use strict";var m,A=t(95296),g=t(1496),i=t(98976),P=t(36672),C=t(43043),u=t(62072),y=t(66661),e=t(27515),r=t(8260).toStringTag,l=t(96416),a=Array.isArray,s=Object.defineProperty,c=Object.prototype.hasOwnProperty,f=Object.getPrototypeOf;q.exports=m=function(){var w,h=arguments[0];if(!(this instanceof m))throw new TypeError("Constructor requires 'new'");return w=l&&g&&WeakMap!==m?g(new WeakMap,f(this)):this,A(h)&&(a(h)||(h=y(h))),s(w,"__weakMapData__",u("c","$weakMap$"+C())),h&&e(h,function(p){P(p),w.set(p[0],p[1])}),w},l&&(g&&g(m,WeakMap),m.prototype=Object.create(WeakMap.prototype,{constructor:u(m)})),Object.defineProperties(m.prototype,{delete:u(function(h){return!!c.call(i(h),this.__weakMapData__)&&(delete h[this.__weakMapData__],!0)}),get:u(function(h){if(c.call(i(h),this.__weakMapData__))return h[this.__weakMapData__]}),has:u(function(h){return c.call(i(h),this.__weakMapData__)}),set:u(function(h,w){return s(i(h),this.__weakMapData__,u("c",w)),this}),toString:u(function(){return"[object WeakMap]"})}),s(m.prototype,r,u("c","WeakMap"))},15398:function(q){"use strict";var A,W="object"==typeof Reflect?Reflect:null,t=W&&"function"==typeof W.apply?W.apply:function(v,M,b){return Function.prototype.apply.call(v,M,b)};A=W&&"function"==typeof W.ownKeys?W.ownKeys:Object.getOwnPropertySymbols?function(v){return Object.getOwnPropertyNames(v).concat(Object.getOwnPropertySymbols(v))}:function(v){return Object.getOwnPropertyNames(v)};var i=Number.isNaN||function(v){return v!=v};function P(){P.init.call(this)}q.exports=P,q.exports.once=function h(o,v){return new Promise(function(M,b){function L(S){o.removeListener(v,x),b(S)}function x(){"function"==typeof o.removeListener&&o.removeListener("error",L),M([].slice.call(arguments))}p(o,v,x,{once:!0}),"error"!==v&&function w(o,v,M){"function"==typeof o.on&&p(o,"error",v,M)}(o,L,{once:!0})})},P.EventEmitter=P,P.prototype._events=void 0,P.prototype._eventsCount=0,P.prototype._maxListeners=void 0;var C=10;function u(o){if("function"!=typeof o)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof o)}function y(o){return void 0===o._maxListeners?P.defaultMaxListeners:o._maxListeners}function e(o,v,M,b){var L,x,S;if(u(M),void 0===(x=o._events)?(x=o._events=Object.create(null),o._eventsCount=0):(void 0!==x.newListener&&(o.emit("newListener",v,M.listener?M.listener:M),x=o._events),S=x[v]),void 0===S)S=x[v]=M,++o._eventsCount;else if("function"==typeof S?S=x[v]=b?[M,S]:[S,M]:b?S.unshift(M):S.push(M),(L=y(o))>0&&S.length>L&&!S.warned){S.warned=!0;var T=new Error("Possible EventEmitter memory leak detected. "+S.length+" "+String(v)+" listeners added. Use emitter.setMaxListeners() to increase limit");T.name="MaxListenersExceededWarning",T.emitter=o,T.type=v,T.count=S.length,function g(o){console&&console.warn&&console.warn(o)}(T)}return o}function r(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(o,v,M){var b={fired:!1,wrapFn:void 0,target:o,type:v,listener:M},L=r.bind(b);return L.listener=M,b.wrapFn=L,L}function a(o,v,M){var b=o._events;if(void 0===b)return[];var L=b[v];return void 0===L?[]:"function"==typeof L?M?[L.listener||L]:[L]:M?function m(o){for(var v=new Array(o.length),M=0;M<v.length;++M)v[M]=o[M].listener||o[M];return v}(L):c(L,L.length)}function s(o){var v=this._events;if(void 0!==v){var M=v[o];if("function"==typeof M)return 1;if(void 0!==M)return M.length}return 0}function c(o,v){for(var M=new Array(v),b=0;b<v;++b)M[b]=o[b];return M}function p(o,v,M,b){if("function"==typeof o.on)b.once?o.once(v,M):o.on(v,M);else{if("function"!=typeof o.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof o);o.addEventListener(v,function L(x){b.once&&o.removeEventListener(v,L),M(x)})}}Object.defineProperty(P,"defaultMaxListeners",{enumerable:!0,get:function(){return C},set:function(o){if("number"!=typeof o||o<0||i(o))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+o+".");C=o}}),P.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},P.prototype.setMaxListeners=function(v){if("number"!=typeof v||v<0||i(v))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+v+".");return this._maxListeners=v,this},P.prototype.getMaxListeners=function(){return y(this)},P.prototype.emit=function(v){for(var M=[],b=1;b<arguments.length;b++)M.push(arguments[b]);var L="error"===v,x=this._events;if(void 0!==x)L=L&&void 0===x.error;else if(!L)return!1;if(L){var S;if(M.length>0&&(S=M[0]),S instanceof Error)throw S;var T=new Error("Unhandled error."+(S?" ("+S.message+")":""));throw T.context=S,T}var n=x[v];if(void 0===n)return!1;if("function"==typeof n)t(n,this,M);else{var E=n.length,d=c(n,E);for(b=0;b<E;++b)t(d[b],this,M)}return!0},P.prototype.on=P.prototype.addListener=function(v,M){return e(this,v,M,!1)},P.prototype.prependListener=function(v,M){return e(this,v,M,!0)},P.prototype.once=function(v,M){return u(M),this.on(v,l(this,v,M)),this},P.prototype.prependOnceListener=function(v,M){return u(M),this.prependListener(v,l(this,v,M)),this},P.prototype.off=P.prototype.removeListener=function(v,M){var b,L,x,S,T;if(u(M),void 0===(L=this._events))return this;if(void 0===(b=L[v]))return this;if(b===M||b.listener===M)0==--this._eventsCount?this._events=Object.create(null):(delete L[v],L.removeListener&&this.emit("removeListener",v,b.listener||M));else if("function"!=typeof b){for(x=-1,S=b.length-1;S>=0;S--)if(b[S]===M||b[S].listener===M){T=b[S].listener,x=S;break}if(x<0)return this;0===x?b.shift():function f(o,v){for(;v+1<o.length;v++)o[v]=o[v+1];o.pop()}(b,x),1===b.length&&(L[v]=b[0]),void 0!==L.removeListener&&this.emit("removeListener",v,T||M)}return this},P.prototype.removeAllListeners=function(v){var M,b,L;if(void 0===(b=this._events))return this;if(void 0===b.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==b[v]&&(0==--this._eventsCount?this._events=Object.create(null):delete b[v]),this;if(0===arguments.length){var S,x=Object.keys(b);for(L=0;L<x.length;++L)"removeListener"!==(S=x[L])&&this.removeAllListeners(S);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(M=b[v]))this.removeListener(v,M);else if(void 0!==M)for(L=M.length-1;L>=0;L--)this.removeListener(v,M[L]);return this},P.prototype.listeners=function(v){return a(this,v,!0)},P.prototype.rawListeners=function(v){return a(this,v,!1)},P.listenerCount=function(o,v){return"function"==typeof o.listenerCount?o.listenerCount(v):s.call(o,v)},P.prototype.listenerCount=s,P.prototype.eventNames=function(){return this._eventsCount>0?A(this._events):[]}},60774:function(q){var W=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};q.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(t){return W()}try{return __global__||W()}finally{delete Object.prototype.__global__}}()},94908:function(q,W,t){"use strict";q.exports=t(51152)()?globalThis:t(60774)},51152:function(q){"use strict";q.exports=function(){return!("object"!=typeof globalThis||!globalThis)&&globalThis.Array===Array}},92770:function(q,W,t){"use strict";var A=t(18546);q.exports=function(g){var i=typeof g;if("string"===i){var P=g;if(0==(g=+g)&&A(P))return!1}else if("number"!==i)return!1;return g-g<1}},30120:function(q,W,t){var A=t(90660);q.exports=function g(i,P,C){if(!i)throw new TypeError("must specify data as first parameter");if(C=0|+(C||0),Array.isArray(i)&&i[0]&&"number"==typeof i[0][0]){var e,r,l,a,u=i[0].length,y=i.length*u;(!P||"string"==typeof P)&&(P=new(A(P||"float32"))(y+C));var s=P.length-C;if(y!==s)throw new Error("source length "+y+" ("+u+"x"+i.length+") does not match destination length "+s);for(e=0,l=C;e<i.length;e++)for(r=0;r<u;r++)P[l++]=null===i[e][r]?NaN:i[e][r]}else if(P&&"string"!=typeof P)P.set(i,C);else{var c=A(P||"float32");if(Array.isArray(i)||"array"===P)for(e=0,l=C,a=(P=new c(i.length+C)).length;l<a;l++,e++)P[l]=null===i[e]?NaN:i[e];else 0===C?P=new c(i):(P=new c(i.length+C)).set(i,C)}return P}},68016:function(q,W,t){"use strict";var A=t(53313),g=[32,126];q.exports=function i(P){var C=(P=P||{}).shape?P.shape:P.canvas?[P.canvas.width,P.canvas.height]:[512,512],u=P.canvas||document.createElement("canvas"),y=P.font,e="number"==typeof P.step?[P.step,P.step]:P.step||[32,32],r=P.chars||g;if(y&&"string"!=typeof y&&(y=A(y)),Array.isArray(r)){if(2===r.length&&"number"==typeof r[0]&&"number"==typeof r[1]){for(var l=[],a=r[0],s=0;a<=r[1];a++)l[s++]=String.fromCharCode(a);r=l}}else r=String(r).split("");C=C.slice(),u.width=C[0],u.height=C[1];var c=u.getContext("2d");c.fillStyle="#000",c.fillRect(0,0,u.width,u.height),c.font=y,c.textAlign="center",c.textBaseline="middle",c.fillStyle="#fff";var f=e[0]/2,m=e[1]/2;for(a=0;a<r.length;a++)c.fillText(r[a],f,m),(f+=e[0])>C[0]-e[0]/2&&(f=e[0]/2,m+=e[1]);return u}},32879:function(q){"use strict";function W(r,P){P||(P={}),("string"==typeof r||Array.isArray(r))&&(P.family=r);var C=Array.isArray(P.family)?P.family.join(", "):P.family;if(!C)throw Error("`family` must be defined");var u=P.size||P.fontSize||P.em||48,l=(r=[P.style||P.fontStyle||"",P.weight||P.fontWeight||"",u].join(" ")+"px "+C,P.origin||"top");if(W.cache[C]&&u<=W.cache[C].em)return t(W.cache[C],l);var a=P.canvas||W.canvas,s=a.getContext("2d"),c={upper:void 0!==P.upper?P.upper:"H",lower:void 0!==P.lower?P.lower:"x",descent:void 0!==P.descent?P.descent:"p",ascent:void 0!==P.ascent?P.ascent:"h",tittle:void 0!==P.tittle?P.tittle:"i",overshoot:void 0!==P.overshoot?P.overshoot:"O"},f=Math.ceil(1.5*u);a.height=f,a.width=.5*f,s.font=r;var m="H",h={top:0};s.clearRect(0,0,f,f),s.textBaseline="top",s.fillStyle="black",s.fillText(m,0,0);var w=A(s.getImageData(0,0,f,f));s.clearRect(0,0,f,f),s.textBaseline="bottom",s.fillText(m,0,f);var p=A(s.getImageData(0,0,f,f));h.lineHeight=h.bottom=f-p+w,s.clearRect(0,0,f,f),s.textBaseline="alphabetic",s.fillText(m,0,f);var v=f-A(s.getImageData(0,0,f,f))-1+w;h.baseline=h.alphabetic=v,s.clearRect(0,0,f,f),s.textBaseline="middle",s.fillText(m,0,.5*f);var M=A(s.getImageData(0,0,f,f));h.median=h.middle=f-M-1+w-.5*f,s.clearRect(0,0,f,f),s.textBaseline="hanging",s.fillText(m,0,.5*f);var b=A(s.getImageData(0,0,f,f));h.hanging=f-b-1+w-.5*f,s.clearRect(0,0,f,f),s.textBaseline="ideographic",s.fillText(m,0,f);var L=A(s.getImageData(0,0,f,f));if(h.ideographic=f-L-1+w,c.upper&&(s.clearRect(0,0,f,f),s.textBaseline="top",s.fillText(c.upper,0,0),h.upper=A(s.getImageData(0,0,f,f)),h.capHeight=h.baseline-h.upper),c.lower&&(s.clearRect(0,0,f,f),s.textBaseline="top",s.fillText(c.lower,0,0),h.lower=A(s.getImageData(0,0,f,f)),h.xHeight=h.baseline-h.lower),c.tittle&&(s.clearRect(0,0,f,f),s.textBaseline="top",s.fillText(c.tittle,0,0),h.tittle=A(s.getImageData(0,0,f,f))),c.ascent&&(s.clearRect(0,0,f,f),s.textBaseline="top",s.fillText(c.ascent,0,0),h.ascent=A(s.getImageData(0,0,f,f))),c.descent&&(s.clearRect(0,0,f,f),s.textBaseline="top",s.fillText(c.descent,0,0),h.descent=g(s.getImageData(0,0,f,f))),c.overshoot){s.clearRect(0,0,f,f),s.textBaseline="top",s.fillText(c.overshoot,0,0);var x=g(s.getImageData(0,0,f,f));h.overshoot=x-v}for(var S in h)h[S]/=u;return h.em=u,W.cache[C]=h,t(h,l)}function t(i,P){var C={};for(var u in"string"==typeof P&&(P=i[P]),i)"em"!==u&&(C[u]=i[u]-P);return C}function A(i){for(var P=i.height,C=i.data,u=3;u<C.length;u+=4)if(0!==C[u])return Math.floor(.25*(u-3)/P)}function g(i){for(var P=i.height,C=i.data,u=C.length-1;u>0;u-=4)if(0!==C[u])return Math.floor(.25*(u-3)/P)}q.exports=W,W.canvas=document.createElement("canvas"),W.cache={}},31353:function(q,W,t){"use strict";var A=t(85395),g=Object.prototype.toString,i=Object.prototype.hasOwnProperty,P=function(r,l,a){for(var s=0,c=r.length;s<c;s++)i.call(r,s)&&(null==a?l(r[s],s,r):l.call(a,r[s],s,r))},C=function(r,l,a){for(var s=0,c=r.length;s<c;s++)null==a?l(r.charAt(s),s,r):l.call(a,r.charAt(s),s,r)},u=function(r,l,a){for(var s in r)i.call(r,s)&&(null==a?l(r[s],s,r):l.call(a,r[s],s,r))};q.exports=function(r,l,a){if(!A(l))throw new TypeError("iterator must be a function");var s;arguments.length>=3&&(s=a),"[object Array]"===g.call(r)?P(r,l,s):"string"==typeof r?C(r,l,s):u(r,l,s)}},73047:function(q){"use strict";var W="Function.prototype.bind called on incompatible ",t=Array.prototype.slice,A=Object.prototype.toString,g="[object Function]";q.exports=function(P){var C=this;if("function"!=typeof C||A.call(C)!==g)throw new TypeError(W+C);for(var y,u=t.call(arguments,1),e=function(){if(this instanceof y){var c=C.apply(this,u.concat(t.call(arguments)));return Object(c)===c?c:this}return C.apply(P,u.concat(t.call(arguments)))},r=Math.max(0,C.length-u.length),l=[],a=0;a<r;a++)l.push("$"+a);if(y=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(e),C.prototype){var s=function(){};s.prototype=C.prototype,y.prototype=new s,s.prototype=null}return y}},77575:function(q,W,t){"use strict";var A=t(73047);q.exports=Function.prototype.bind||A},86249:function(q){q.exports=function W(t,A){if("string"!=typeof t)throw new TypeError("must specify type string");if(A=A||{},"undefined"==typeof document&&!A.canvas)return null;var g=A.canvas||document.createElement("canvas");"number"==typeof A.width&&(g.width=A.width),"number"==typeof A.height&&(g.height=A.height);var P,i=A;try{var C=[t];0===t.indexOf("webgl")&&C.push("experimental-"+t);for(var u=0;u<C.length;u++)if(P=g.getContext(C[u],i))return P}catch(y){P=null}return P||null}},68318:function(q,W,t){"use strict";var A,g=SyntaxError,i=Function,P=TypeError,C=function(E){try{return i('"use strict"; return ('+E+").constructor;")()}catch(d){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(E){u=null}var y=function(){throw new P},e=u?function(){try{return y}catch(E){try{return u(arguments,"callee").get}catch(d){return y}}}():y,r=t(57877)(),l=Object.getPrototypeOf||function(E){return E.__proto__},a={},s="undefined"==typeof Uint8Array?A:l(Uint8Array),c={"%AggregateError%":"undefined"==typeof AggregateError?A:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?A:ArrayBuffer,"%ArrayIteratorPrototype%":r?l([][Symbol.iterator]()):A,"%AsyncFromSyncIteratorPrototype%":A,"%AsyncFunction%":a,"%AsyncGenerator%":a,"%AsyncGeneratorFunction%":a,"%AsyncIteratorPrototype%":a,"%Atomics%":"undefined"==typeof Atomics?A:Atomics,"%BigInt%":"undefined"==typeof BigInt?A:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?A:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?A:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?A:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?A:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?A:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?A:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":a,"%Int8Array%":"undefined"==typeof Int8Array?A:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?A:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?A:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":r?l(l([][Symbol.iterator]())):A,"%JSON%":"object"==typeof JSON?JSON:A,"%Map%":"undefined"==typeof Map?A:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&r?l((new Map)[Symbol.iterator]()):A,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?A:Promise,"%Proxy%":"undefined"==typeof Proxy?A:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?A:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?A:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&r?l((new Set)[Symbol.iterator]()):A,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?A:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":r?l(""[Symbol.iterator]()):A,"%Symbol%":r?Symbol:A,"%SyntaxError%":g,"%ThrowTypeError%":e,"%TypedArray%":s,"%TypeError%":P,"%Uint8Array%":"undefined"==typeof Uint8Array?A:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?A:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?A:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?A:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?A:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?A:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?A:WeakSet};try{null.error}catch(E){var f=l(l(E));c["%Error.prototype%"]=f}var m=function E(d){var F;if("%AsyncFunction%"===d)F=C("async function () {}");else if("%GeneratorFunction%"===d)F=C("function* () {}");else if("%AsyncGeneratorFunction%"===d)F=C("async function* () {}");else if("%AsyncGenerator%"===d){var D=E("%AsyncGeneratorFunction%");D&&(F=D.prototype)}else if("%AsyncIteratorPrototype%"===d){var N=E("%AsyncGenerator%");N&&(F=l(N.prototype))}return c[d]=F,F},h={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},w=t(77575),p=t(35065),o=w.call(Function.call,Array.prototype.concat),v=w.call(Function.apply,Array.prototype.splice),M=w.call(Function.call,String.prototype.replace),b=w.call(Function.call,String.prototype.slice),L=w.call(Function.call,RegExp.prototype.exec),x=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,S=/\\(\\)?/g,T=function(d){var F=b(d,0,1),D=b(d,-1);if("%"===F&&"%"!==D)throw new g("invalid intrinsic syntax, expected closing `%`");if("%"===D&&"%"!==F)throw new g("invalid intrinsic syntax, expected opening `%`");var N=[];return M(d,x,function(k,O,B,z){N[N.length]=B?M(z,S,"$1"):O||k}),N},n=function(d,F){var N,D=d;if(p(h,D)&&(D="%"+(N=h[D])[0]+"%"),p(c,D)){var k=c[D];if(k===a&&(k=m(D)),void 0===k&&!F)throw new P("intrinsic "+d+" exists, but is not available. Please file an issue!");return{alias:N,name:D,value:k}}throw new g("intrinsic "+d+" does not exist!")};q.exports=function(d,F){if("string"!=typeof d||0===d.length)throw new P("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof F)throw new P('"allowMissing" argument must be a boolean');if(null===L(/^%?[^%]*%?$/,d))throw new g("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var D=T(d),N=D.length>0?D[0]:"",k=n("%"+N+"%",F),O=k.name,B=k.value,z=!1,U=k.alias;U&&(N=U[0],v(D,o([0,1],U)));for(var H=1,J=!0;H<D.length;H+=1){var nt=D[H],it=b(nt,0,1),ut=b(nt,-1);if(('"'===it||"'"===it||"`"===it||'"'===ut||"'"===ut||"`"===ut)&&it!==ut)throw new g("property names with quotes must have matching quotes");if(("constructor"===nt||!J)&&(z=!0),p(c,O="%"+(N+="."+nt)+"%"))B=c[O];else if(null!=B){if(!(nt in B)){if(!F)throw new P("base intrinsic for "+d+" exists, but the property is not available.");return}if(u&&H+1>=D.length){var Q=u(B,nt);B=(J=!!Q)&&"get"in Q&&!("originalValue"in Q.get)?Q.get:B[nt]}else J=p(B,nt),B=B[nt];J&&!z&&(c[O]=B)}}return B}},85400:function(q){q.exports=function W(t,A){var g=A[0],i=A[1],P=A[2],C=A[3],u=A[4],y=A[5],e=A[6],r=A[7],l=A[8],a=A[9],s=A[10],c=A[11],f=A[12],m=A[13],h=A[14],w=A[15];return t[0]=y*(s*w-c*h)-a*(e*w-r*h)+m*(e*c-r*s),t[1]=-(i*(s*w-c*h)-a*(P*w-C*h)+m*(P*c-C*s)),t[2]=i*(e*w-r*h)-y*(P*w-C*h)+m*(P*r-C*e),t[3]=-(i*(e*c-r*s)-y*(P*c-C*s)+a*(P*r-C*e)),t[4]=-(u*(s*w-c*h)-l*(e*w-r*h)+f*(e*c-r*s)),t[5]=g*(s*w-c*h)-l*(P*w-C*h)+f*(P*c-C*s),t[6]=-(g*(e*w-r*h)-u*(P*w-C*h)+f*(P*r-C*e)),t[7]=g*(e*c-r*s)-u*(P*c-C*s)+l*(P*r-C*e),t[8]=u*(a*w-c*m)-l*(y*w-r*m)+f*(y*c-r*a),t[9]=-(g*(a*w-c*m)-l*(i*w-C*m)+f*(i*c-C*a)),t[10]=g*(y*w-r*m)-u*(i*w-C*m)+f*(i*r-C*y),t[11]=-(g*(y*c-r*a)-u*(i*c-C*a)+l*(i*r-C*y)),t[12]=-(u*(a*h-s*m)-l*(y*h-e*m)+f*(y*s-e*a)),t[13]=g*(a*h-s*m)-l*(i*h-P*m)+f*(i*s-P*a),t[14]=-(g*(y*h-e*m)-u*(i*h-P*m)+f*(i*e-P*y)),t[15]=g*(y*s-e*a)-u*(i*s-P*a)+l*(i*e-P*y),t}},42331:function(q){q.exports=function W(t){var A=new Float32Array(16);return A[0]=t[0],A[1]=t[1],A[2]=t[2],A[3]=t[3],A[4]=t[4],A[5]=t[5],A[6]=t[6],A[7]=t[7],A[8]=t[8],A[9]=t[9],A[10]=t[10],A[11]=t[11],A[12]=t[12],A[13]=t[13],A[14]=t[14],A[15]=t[15],A}},31042:function(q){q.exports=function W(t,A){return t[0]=A[0],t[1]=A[1],t[2]=A[2],t[3]=A[3],t[4]=A[4],t[5]=A[5],t[6]=A[6],t[7]=A[7],t[8]=A[8],t[9]=A[9],t[10]=A[10],t[11]=A[11],t[12]=A[12],t[13]=A[13],t[14]=A[14],t[15]=A[15],t}},11902:function(q){q.exports=function W(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},89887:function(q){q.exports=function W(t){var A=t[0],g=t[1],i=t[2],P=t[3],C=t[4],u=t[5],y=t[6],e=t[7],r=t[8],l=t[9],a=t[10],s=t[11],c=t[12],f=t[13],m=t[14],h=t[15];return(A*u-g*C)*(a*h-s*m)-(A*y-i*C)*(l*h-s*f)+(A*e-P*C)*(l*m-a*f)+(g*y-i*u)*(r*h-s*c)-(g*e-P*u)*(r*m-a*c)+(i*e-P*y)*(r*f-l*c)}},27812:function(q){q.exports=function W(t,A){var g=A[0],i=A[1],P=A[2],C=A[3],u=g+g,y=i+i,e=P+P,r=g*u,l=i*u,a=i*y,s=P*u,c=P*y,f=P*e,m=C*u,h=C*y,w=C*e;return t[0]=1-a-f,t[1]=l+w,t[2]=s-h,t[3]=0,t[4]=l-w,t[5]=1-r-f,t[6]=c+m,t[7]=0,t[8]=s+h,t[9]=c-m,t[10]=1-r-a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},34045:function(q){q.exports=function W(t,A,g){var i,P,C,u=g[0],y=g[1],e=g[2],r=Math.sqrt(u*u+y*y+e*e);return Math.abs(r)<1e-6?null:(u*=r=1/r,y*=r,e*=r,i=Math.sin(A),P=Math.cos(A),t[0]=u*u*(C=1-P)+P,t[1]=y*u*C+e*i,t[2]=e*u*C-y*i,t[3]=0,t[4]=u*y*C-e*i,t[5]=y*y*C+P,t[6]=e*y*C+u*i,t[7]=0,t[8]=u*e*C+y*i,t[9]=y*e*C-u*i,t[10]=e*e*C+P,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}},45973:function(q){q.exports=function W(t,A,g){var i=A[0],P=A[1],C=A[2],u=A[3],y=i+i,e=P+P,r=C+C,l=i*y,a=i*e,s=i*r,c=P*e,f=P*r,m=C*r,h=u*y,w=u*e,p=u*r;return t[0]=1-(c+m),t[1]=a+p,t[2]=s-w,t[3]=0,t[4]=a-p,t[5]=1-(l+m),t[6]=f+h,t[7]=0,t[8]=s+w,t[9]=f-h,t[10]=1-(l+c),t[11]=0,t[12]=g[0],t[13]=g[1],t[14]=g[2],t[15]=1,t}},81472:function(q){q.exports=function W(t,A){return t[0]=A[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=A[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=A[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},14669:function(q){q.exports=function W(t,A){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=A[0],t[13]=A[1],t[14]=A[2],t[15]=1,t}},75262:function(q){q.exports=function W(t,A){var g=Math.sin(A),i=Math.cos(A);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=g,t[7]=0,t[8]=0,t[9]=-g,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},331:function(q){q.exports=function W(t,A){var g=Math.sin(A),i=Math.cos(A);return t[0]=i,t[1]=0,t[2]=-g,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=g,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},11049:function(q){q.exports=function W(t,A){var g=Math.sin(A),i=Math.cos(A);return t[0]=i,t[1]=g,t[2]=0,t[3]=0,t[4]=-g,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},75195:function(q){q.exports=function W(t,A,g,i,P,C,u){var y=1/(g-A),e=1/(P-i),r=1/(C-u);return t[0]=2*C*y,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*C*e,t[6]=0,t[7]=0,t[8]=(g+A)*y,t[9]=(P+i)*e,t[10]=(u+C)*r,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*C*2*r,t[15]=0,t}},71551:function(q){q.exports=function W(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},79576:function(q,W,t){q.exports={create:t(11902),clone:t(42331),copy:t(31042),identity:t(71551),transpose:t(88654),invert:t(95874),adjoint:t(85400),determinant:t(89887),multiply:t(91362),translate:t(31283),scale:t(10789),rotate:t(65074),rotateX:t(35545),rotateY:t(94918),rotateZ:t(15692),fromRotation:t(34045),fromRotationTranslation:t(45973),fromScaling:t(81472),fromTranslation:t(14669),fromXRotation:t(75262),fromYRotation:t(331),fromZRotation:t(11049),fromQuat:t(27812),frustum:t(75195),perspective:t(7864),perspectiveFromFieldOfView:t(35279),ortho:t(60378),lookAt:t(65551),str:t(6726)}},95874:function(q){q.exports=function W(t,A){var g=A[0],i=A[1],P=A[2],C=A[3],u=A[4],y=A[5],e=A[6],r=A[7],l=A[8],a=A[9],s=A[10],c=A[11],f=A[12],m=A[13],h=A[14],w=A[15],p=g*y-i*u,o=g*e-P*u,v=g*r-C*u,M=i*e-P*y,b=i*r-C*y,L=P*r-C*e,x=l*m-a*f,S=l*h-s*f,T=l*w-c*f,n=a*h-s*m,E=a*w-c*m,d=s*w-c*h,F=p*d-o*E+v*n+M*T-b*S+L*x;return F?(t[0]=(y*d-e*E+r*n)*(F=1/F),t[1]=(P*E-i*d-C*n)*F,t[2]=(m*L-h*b+w*M)*F,t[3]=(s*b-a*L-c*M)*F,t[4]=(e*T-u*d-r*S)*F,t[5]=(g*d-P*T+C*S)*F,t[6]=(h*v-f*L-w*o)*F,t[7]=(l*L-s*v+c*o)*F,t[8]=(u*E-y*T+r*x)*F,t[9]=(i*T-g*E-C*x)*F,t[10]=(f*b-m*v+w*p)*F,t[11]=(a*v-l*b-c*p)*F,t[12]=(y*S-u*n-e*x)*F,t[13]=(g*n-i*S+P*x)*F,t[14]=(m*o-f*M-h*p)*F,t[15]=(l*M-a*o+s*p)*F,t):null}},65551:function(q,W,t){var A=t(71551);q.exports=function g(i,P,C,u){var y,e,r,l,a,s,c,f,m,h,w=P[0],p=P[1],o=P[2],v=u[0],M=u[1],b=u[2],L=C[0],x=C[1],S=C[2];return Math.abs(w-L)<1e-6&&Math.abs(p-x)<1e-6&&Math.abs(o-S)<1e-6?A(i):(c=w-L,f=p-x,m=o-S,y=M*(m*=h=1/Math.sqrt(c*c+f*f+m*m))-b*(f*=h),e=b*(c*=h)-v*m,r=v*f-M*c,(h=Math.sqrt(y*y+e*e+r*r))?(y*=h=1/h,e*=h,r*=h):(y=0,e=0,r=0),l=f*r-m*e,a=m*y-c*r,s=c*e-f*y,(h=Math.sqrt(l*l+a*a+s*s))?(l*=h=1/h,a*=h,s*=h):(l=0,a=0,s=0),i[0]=y,i[1]=l,i[2]=c,i[3]=0,i[4]=e,i[5]=a,i[6]=f,i[7]=0,i[8]=r,i[9]=s,i[10]=m,i[11]=0,i[12]=-(y*w+e*p+r*o),i[13]=-(l*w+a*p+s*o),i[14]=-(c*w+f*p+m*o),i[15]=1,i)}},91362:function(q){q.exports=function W(t,A,g){var i=A[0],P=A[1],C=A[2],u=A[3],y=A[4],e=A[5],r=A[6],l=A[7],a=A[8],s=A[9],c=A[10],f=A[11],m=A[12],h=A[13],w=A[14],p=A[15],o=g[0],v=g[1],M=g[2],b=g[3];return t[0]=o*i+v*y+M*a+b*m,t[1]=o*P+v*e+M*s+b*h,t[2]=o*C+v*r+M*c+b*w,t[3]=o*u+v*l+M*f+b*p,t[4]=(o=g[4])*i+(v=g[5])*y+(M=g[6])*a+(b=g[7])*m,t[5]=o*P+v*e+M*s+b*h,t[6]=o*C+v*r+M*c+b*w,t[7]=o*u+v*l+M*f+b*p,t[8]=(o=g[8])*i+(v=g[9])*y+(M=g[10])*a+(b=g[11])*m,t[9]=o*P+v*e+M*s+b*h,t[10]=o*C+v*r+M*c+b*w,t[11]=o*u+v*l+M*f+b*p,t[12]=(o=g[12])*i+(v=g[13])*y+(M=g[14])*a+(b=g[15])*m,t[13]=o*P+v*e+M*s+b*h,t[14]=o*C+v*r+M*c+b*w,t[15]=o*u+v*l+M*f+b*p,t}},60378:function(q){q.exports=function W(t,A,g,i,P,C,u){var y=1/(A-g),e=1/(i-P),r=1/(C-u);return t[0]=-2*y,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*r,t[11]=0,t[12]=(A+g)*y,t[13]=(P+i)*e,t[14]=(u+C)*r,t[15]=1,t}},7864:function(q){q.exports=function W(t,A,g,i,P){var C=1/Math.tan(A/2),u=1/(i-P);return t[0]=C/g,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=C,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(P+i)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*P*i*u,t[15]=0,t}},35279:function(q){q.exports=function W(t,A,g,i){var P=Math.tan(A.upDegrees*Math.PI/180),C=Math.tan(A.downDegrees*Math.PI/180),u=Math.tan(A.leftDegrees*Math.PI/180),y=Math.tan(A.rightDegrees*Math.PI/180),e=2/(u+y),r=2/(P+C);return t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=-(u-y)*e*.5,t[9]=(P-C)*r*.5,t[10]=i/(g-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*g/(g-i),t[15]=0,t}},65074:function(q){q.exports=function W(t,A,g,i){var e,r,l,a,s,c,f,m,h,w,p,o,v,M,b,L,x,S,T,n,E,d,F,D,P=i[0],C=i[1],u=i[2],y=Math.sqrt(P*P+C*C+u*u);return Math.abs(y)<1e-6?null:(P*=y=1/y,C*=y,u*=y,e=Math.sin(g),r=Math.cos(g),s=A[1],c=A[2],f=A[3],h=A[5],w=A[6],p=A[7],v=A[9],M=A[10],b=A[11],T=P*C*(l=1-r)-u*e,n=C*C*l+r,E=u*C*l+P*e,d=P*u*l+C*e,F=C*u*l-P*e,D=u*u*l+r,t[0]=(a=A[0])*(L=P*P*l+r)+(m=A[4])*(x=C*P*l+u*e)+(o=A[8])*(S=u*P*l-C*e),t[1]=s*L+h*x+v*S,t[2]=c*L+w*x+M*S,t[3]=f*L+p*x+b*S,t[4]=a*T+m*n+o*E,t[5]=s*T+h*n+v*E,t[6]=c*T+w*n+M*E,t[7]=f*T+p*n+b*E,t[8]=a*d+m*F+o*D,t[9]=s*d+h*F+v*D,t[10]=c*d+w*F+M*D,t[11]=f*d+p*F+b*D,A!==t&&(t[12]=A[12],t[13]=A[13],t[14]=A[14],t[15]=A[15]),t)}},35545:function(q){q.exports=function W(t,A,g){var i=Math.sin(g),P=Math.cos(g),C=A[4],u=A[5],y=A[6],e=A[7],r=A[8],l=A[9],a=A[10],s=A[11];return A!==t&&(t[0]=A[0],t[1]=A[1],t[2]=A[2],t[3]=A[3],t[12]=A[12],t[13]=A[13],t[14]=A[14],t[15]=A[15]),t[4]=C*P+r*i,t[5]=u*P+l*i,t[6]=y*P+a*i,t[7]=e*P+s*i,t[8]=r*P-C*i,t[9]=l*P-u*i,t[10]=a*P-y*i,t[11]=s*P-e*i,t}},94918:function(q){q.exports=function W(t,A,g){var i=Math.sin(g),P=Math.cos(g),C=A[0],u=A[1],y=A[2],e=A[3],r=A[8],l=A[9],a=A[10],s=A[11];return A!==t&&(t[4]=A[4],t[5]=A[5],t[6]=A[6],t[7]=A[7],t[12]=A[12],t[13]=A[13],t[14]=A[14],t[15]=A[15]),t[0]=C*P-r*i,t[1]=u*P-l*i,t[2]=y*P-a*i,t[3]=e*P-s*i,t[8]=C*i+r*P,t[9]=u*i+l*P,t[10]=y*i+a*P,t[11]=e*i+s*P,t}},15692:function(q){q.exports=function W(t,A,g){var i=Math.sin(g),P=Math.cos(g),C=A[0],u=A[1],y=A[2],e=A[3],r=A[4],l=A[5],a=A[6],s=A[7];return A!==t&&(t[8]=A[8],t[9]=A[9],t[10]=A[10],t[11]=A[11],t[12]=A[12],t[13]=A[13],t[14]=A[14],t[15]=A[15]),t[0]=C*P+r*i,t[1]=u*P+l*i,t[2]=y*P+a*i,t[3]=e*P+s*i,t[4]=r*P-C*i,t[5]=l*P-u*i,t[6]=a*P-y*i,t[7]=s*P-e*i,t}},10789:function(q){q.exports=function W(t,A,g){var i=g[0],P=g[1],C=g[2];return t[0]=A[0]*i,t[1]=A[1]*i,t[2]=A[2]*i,t[3]=A[3]*i,t[4]=A[4]*P,t[5]=A[5]*P,t[6]=A[6]*P,t[7]=A[7]*P,t[8]=A[8]*C,t[9]=A[9]*C,t[10]=A[10]*C,t[11]=A[11]*C,t[12]=A[12],t[13]=A[13],t[14]=A[14],t[15]=A[15],t}},6726:function(q){q.exports=function W(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}},31283:function(q){q.exports=function W(t,A,g){var u,y,e,r,l,a,s,c,f,m,h,w,i=g[0],P=g[1],C=g[2];return A===t?(t[12]=A[0]*i+A[4]*P+A[8]*C+A[12],t[13]=A[1]*i+A[5]*P+A[9]*C+A[13],t[14]=A[2]*i+A[6]*P+A[10]*C+A[14],t[15]=A[3]*i+A[7]*P+A[11]*C+A[15]):(y=A[1],e=A[2],r=A[3],l=A[4],a=A[5],s=A[6],c=A[7],f=A[8],m=A[9],h=A[10],w=A[11],t[0]=u=A[0],t[1]=y,t[2]=e,t[3]=r,t[4]=l,t[5]=a,t[6]=s,t[7]=c,t[8]=f,t[9]=m,t[10]=h,t[11]=w,t[12]=u*i+l*P+f*C+A[12],t[13]=y*i+a*P+m*C+A[13],t[14]=e*i+s*P+h*C+A[14],t[15]=r*i+c*P+w*C+A[15]),t}},88654:function(q){q.exports=function W(t,A){if(t===A){var g=A[1],i=A[2],P=A[3],C=A[6],u=A[7],y=A[11];t[1]=A[4],t[2]=A[8],t[3]=A[12],t[4]=g,t[6]=A[9],t[7]=A[13],t[8]=i,t[9]=C,t[11]=A[14],t[12]=P,t[13]=u,t[14]=y}else t[0]=A[0],t[1]=A[4],t[2]=A[8],t[3]=A[12],t[4]=A[1],t[5]=A[5],t[6]=A[9],t[7]=A[13],t[8]=A[2],t[9]=A[6],t[10]=A[10],t[11]=A[14],t[12]=A[3],t[13]=A[7],t[14]=A[11],t[15]=A[15];return t}},42505:function(q,W,t){"use strict";var A=t(72791),g=t(71299),i=t(98580),P=t(12018),C=t(83522),u=t(25075),y=t(68016),e=t(58404),r=t(18863),l=t(10973),a=t(25677),s=t(75686),c=t(53545),f=t(56131),m=t(32879),h=t(30120),p=t(13547).nextPow2,o=new C,v=!1;if(document.body){var M=document.body.appendChild(document.createElement("div"));M.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(M).fontStretch&&(v=!0),document.body.removeChild(M)}var b=function(S){this.gl=function L(x){return"function"==typeof x&&x._gl&&x.prop&&x.texture&&x.buffer}(S)?(S={regl:S}).regl._gl:P(S),this.shader=o.get(this.gl),this.regl=this.shader?this.shader.regl:S.regl||i({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),o.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(l(S)?S:{})};b.prototype.createShader=function(){var S=this.regl,T=S({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:S.prop("count"),offset:S.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:S.this("sizeBuffer")},width:{offset:0,stride:8,buffer:S.this("sizeBuffer")},char:S.this("charBuffer"),position:S.this("position")},uniforms:{atlasSize:function(E,d){return[d.atlas.width,d.atlas.height]},atlasDim:function(E,d){return[d.atlas.cols,d.atlas.rows]},atlas:function(E,d){return d.atlas.texture},charStep:function(E,d){return d.atlas.step},em:function(E,d){return d.atlas.em},color:S.prop("color"),opacity:S.prop("opacity"),viewport:S.this("viewportArray"),scale:S.this("scale"),align:S.prop("align"),baseline:S.prop("baseline"),translate:S.this("translate"),positionOffset:S.prop("positionOffset")},primitive:"points",viewport:S.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:S,draw:T,atlas:{}}},b.prototype.update=function(S){var T=this;if("string"==typeof S)S={text:S};else if(!S)return;null!=(S=g(S,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(this.opacity=Array.isArray(S.opacity)?S.opacity.map(function(Pt){return parseFloat(Pt)}):parseFloat(S.opacity)),null!=S.viewport&&(this.viewport=r(S.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=S.kerning&&(this.kerning=S.kerning),null!=S.offset&&("number"==typeof S.offset&&(S.offset=[S.offset,0]),this.positionOffset=h(S.offset)),S.direction&&(this.direction=S.direction),S.range&&(this.range=S.range,this.scale=[1/(S.range[2]-S.range[0]),1/(S.range[3]-S.range[1])],this.translate=[-S.range[0],-S.range[1]]),S.scale&&(this.scale=S.scale),S.translate&&(this.translate=S.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!S.font&&(S.font=b.baseFontSize+"px sans-serif");var D,n=!1,E=!1;if(S.font&&(Array.isArray(S.font)?S.font:[S.font]).forEach(function(Pt,Vt){if("string"==typeof Pt)try{Pt=A.parse(Pt)}catch(ie){Pt=A.parse(b.baseFontSize+"px "+Pt)}else Pt=A.parse(A.stringify(Pt));var te=A.stringify({size:b.baseFontSize,family:Pt.family,stretch:v?Pt.stretch:void 0,variant:Pt.variant,weight:Pt.weight,style:Pt.style}),Qt=a(Pt.size),Bt=Math.round(Qt[0]*s(Qt[1]));if(Bt!==T.fontSize[Vt]&&(E=!0,T.fontSize[Vt]=Bt),!(T.font[Vt]&&te==T.font[Vt].baseString||(n=!0,T.font[Vt]=b.fonts[te],T.font[Vt]))){var Ot=Pt.family.join(", "),qt=[Pt.style];Pt.style!=Pt.variant&&qt.push(Pt.variant),Pt.variant!=Pt.weight&&qt.push(Pt.weight),v&&Pt.weight!=Pt.stretch&&qt.push(Pt.stretch),T.font[Vt]={baseString:te,family:Ot,weight:Pt.weight,stretch:Pt.stretch,style:Pt.style,variant:Pt.variant,width:{},kerning:{},metrics:m(Ot,{origin:"top",fontSize:b.baseFontSize,fontStyle:qt.join(" ")})},b.fonts[te]=T.font[Vt]}}),(n||E)&&this.font.forEach(function(Pt,Vt){var te=A.stringify({size:T.fontSize[Vt],family:Pt.family,stretch:v?Pt.stretch:void 0,variant:Pt.variant,weight:Pt.weight,style:Pt.style});T.fontAtlas[Vt]=T.shader.atlas[te],T.fontAtlas[Vt]||(T.shader.atlas[te]=T.fontAtlas[Vt]={fontString:te,step:2*Math.ceil(T.fontSize[Vt]*Pt.metrics.bottom*.5),em:T.fontSize[Vt],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:T.regl.texture()}),null==S.text&&(S.text=T.text)}),"string"==typeof S.text&&S.position&&S.position.length>2){for(var d=Array(.5*S.position.length),F=0;F<d.length;F++)d[F]=S.text;S.text=d}if(null!=S.text||n){if(this.textOffsets=[0],Array.isArray(S.text)){this.count=S.text[0].length,this.counts=[this.count];for(var N=1;N<S.text.length;N++)this.textOffsets[N]=this.textOffsets[N-1]+S.text[N-1].length,this.count+=S.text[N].length,this.counts.push(S.text[N].length);this.text=S.text.join("")}else this.text=S.text,this.count=this.text.length,this.counts=[this.count];D=[],this.font.forEach(function(Pt,Vt){b.atlasContext.font=Pt.baseString;for(var te=T.fontAtlas[Vt],Qt=0;Qt<T.text.length;Qt++){var Bt=T.text.charAt(Qt);if(null==te.ids[Bt]&&(te.ids[Bt]=te.chars.length,te.chars.push(Bt),D.push(Bt)),null==Pt.width[Bt]&&(Pt.width[Bt]=b.atlasContext.measureText(Bt).width/b.baseFontSize,T.kerning)){var Ot=[];for(var qt in Pt.width)Ot.push(qt+Bt,Bt+qt);f(Pt.kerning,c(Pt.family,{pairs:Ot}))}}})}if(S.position)if(S.position.length>2){for(var k=!S.position[0].length,O=e.mallocFloat(2*this.count),B=0,z=0;B<this.counts.length;B++){var U=this.counts[B];if(k)for(var H=0;H<U;H++)O[z++]=S.position[2*B],O[z++]=S.position[2*B+1];else for(var J=0;J<U;J++)O[z++]=S.position[B][0],O[z++]=S.position[B][1]}this.position.call?this.position({type:"float",data:O}):this.position=this.regl.buffer({type:"float",data:O}),e.freeFloat(O)}else this.position.destroy&&this.position.destroy(),this.position={constant:S.position};if(S.text||n){var nt=e.mallocUint8(this.count),it=e.mallocFloat(2*this.count);this.textWidth=[];for(var ut=0,Q=0;ut<this.counts.length;ut++){for(var j=this.counts[ut],Z=this.font[ut]||this.font[0],G=this.fontAtlas[ut]||this.fontAtlas[0],K=0;K<j;K++){var at=this.text.charAt(Q),$=this.text.charAt(Q-1);if(nt[Q]=G.ids[at],it[2*Q]=Z.width[at],K){var st=it[2*Q-1]+.5*it[2*Q-2]+.5*it[2*Q];if(this.kerning){var dt=Z.kerning[$+at];dt&&(st+=.001*dt)}it[2*Q+1]=st}else it[2*Q+1]=.5*it[2*Q];Q++}this.textWidth.push(it.length?.5*it[2*Q-2]+it[2*Q-1]:0)}S.align||(S.align=this.align),this.charBuffer({data:nt,type:"uint8",usage:"stream"}),this.sizeBuffer({data:it,type:"float",usage:"stream"}),e.freeUint8(nt),e.freeFloat(it),D.length&&this.font.forEach(function(Pt,Vt){var te=T.fontAtlas[Vt],Qt=te.step,Bt=Math.floor(b.maxAtlasSize/Qt),Ot=Math.min(Bt,te.chars.length),qt=Math.ceil(te.chars.length/Ot),ie=p(Ot*Qt),oe=p(qt*Qt);te.width=ie,te.height=oe,te.rows=qt,te.cols=Ot,te.em&&te.texture({data:y({canvas:b.atlasCanvas,font:te.fontString,chars:te.chars,shape:[ie,oe],step:[Qt,Qt]})})})}if(S.align&&(this.align=S.align,this.alignOffset=this.textWidth.map(function(Pt,Vt){var te=Array.isArray(T.align)?T.align.length>1?T.align[Vt]:T.align[0]:T.align;if("number"==typeof te)return te;switch(te){case"right":case"end":return-Pt;case"center":case"centre":case"middle":return.5*-Pt}return 0})),null==this.baseline&&null==S.baseline&&(S.baseline=0),null!=S.baseline&&(this.baseline=S.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Pt,Vt){var te=(T.font[Vt]||T.font[0]).metrics,Qt=0;return Qt+=.5*te.bottom,-1*(Qt+="number"==typeof Pt?Pt-te.baseline:-te[Pt])})),null!=S.color)if(S.color||(S.color="transparent"),"string"!=typeof S.color&&isNaN(S.color)){var bt;if("number"==typeof S.color[0]&&S.color.length>this.counts.length){var gt=S.color.length;bt=e.mallocUint8(gt);for(var Lt=(S.color.subarray||S.color.slice).bind(S.color),It=0;It<gt;It+=4)bt.set(u(Lt(It,It+4),"uint8"),It)}else{var Mt=S.color.length;bt=e.mallocUint8(4*Mt);for(var xt=0;xt<Mt;xt++)bt.set(u(S.color[xt]||0,"uint8"),4*xt)}this.color=bt}else this.color=u(S.color,"uint8");if(S.position||S.text||S.color||S.baseline||S.align||S.font||S.offset||S.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var Gt=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(Gt);for(var Wt=0;Wt<this.batch.length;Wt++)this.batch[Wt]={count:this.counts.length>1?this.counts[Wt]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Wt]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*Wt,4*Wt+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Wt]:this.opacity,baseline:null!=this.baselineOffset[Wt]?this.baselineOffset[Wt]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[Wt]?this.alignOffset[Wt]:this.alignOffset[0]:0,atlas:this.fontAtlas[Wt]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*Wt,2*Wt+2):this.positionOffset}}else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]},b.prototype.destroy=function(){},b.prototype.kerning=!0,b.prototype.position={constant:new Float32Array(2)},b.prototype.translate=null,b.prototype.scale=null,b.prototype.font=null,b.prototype.text="",b.prototype.positionOffset=[0,0],b.prototype.opacity=1,b.prototype.color=new Uint8Array([0,0,0,255]),b.prototype.alignOffset=[0,0],b.maxAtlasSize=1024,b.atlasCanvas=document.createElement("canvas"),b.atlasContext=b.atlasCanvas.getContext("2d",{alpha:!1}),b.baseFontSize=64,b.fonts={},q.exports=b},12018:function(q,W,t){"use strict";var A=t(71299);function g(y){if(y.container)if(y.container==document.body)document.body.style.width||(y.canvas.width=y.width||y.pixelRatio*t.g.innerWidth),document.body.style.height||(y.canvas.height=y.height||y.pixelRatio*t.g.innerHeight);else{var e=y.container.getBoundingClientRect();y.canvas.width=y.width||e.right-e.left,y.canvas.height=y.height||e.bottom-e.top}}function i(y){return"function"==typeof y.getContext&&"width"in y&&"height"in y}function u(){var y=document.createElement("canvas");return y.style.position="absolute",y.style.top=0,y.style.left=0,y}q.exports=function(e){if(e?"string"==typeof e&&(e={container:e}):e={},(e=i(e)||function P(y){return"string"==typeof y.nodeName&&"function"==typeof y.appendChild&&"function"==typeof y.getBoundingClientRect}(e)?{container:e}:function C(y){return"function"==typeof y.drawArrays||"function"==typeof y.drawElements}(e)?{gl:e}:A(e,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(e.pixelRatio=t.g.pixelRatio||1),e.gl)return e.gl;if(e.canvas&&(e.container=e.canvas.parentNode),e.container){if("string"==typeof e.container){var r=document.querySelector(e.container);if(!r)throw Error("Element "+e.container+" is not found");e.container=r}i(e.container)?(e.canvas=e.container,e.container=e.canvas.parentNode):e.canvas||(e.canvas=u(),e.container.appendChild(e.canvas),g(e))}else if(!e.canvas){if("undefined"==typeof document)throw Error("Not DOM environment. Use headless-gl.");e.container=document.body||document.documentElement,e.canvas=u(),e.container.appendChild(e.canvas),g(e)}return e.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(l){try{e.gl=e.canvas.getContext(l,e.attrs)}catch(a){}return e.gl}),e.gl}},56068:function(q){q.exports=function(W){"string"==typeof W&&(W=[W]);for(var t=[].slice.call(arguments,1),A=[],g=0;g<W.length-1;g++)A.push(W[g],t[g]||"");return A.push(W[g]),A.join("")}},40383:function(q,W,t){"use strict";var g=t(68318)("%Object.getOwnPropertyDescriptor%",!0);if(g)try{g([],"length")}catch(i){g=null}q.exports=g},57035:function(q,W,t){"use strict";var g,A=t(54404);g="function"==typeof t.g.matchMedia?!t.g.matchMedia("(hover: none)").matches:A,q.exports=g},38520:function(q,W,t){"use strict";var A=t(54404);q.exports=A&&function g(){var i=!1;try{var P=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,P),window.removeEventListener("test",null,P)}catch(C){i=!1}return i}()},55622:function(q,W,t){"use strict";var g=t(68318)("%Object.defineProperty%",!0),i=function(){if(g)try{return g({},"a",{value:1}),!0}catch(C){return!1}return!1};i.hasArrayLengthDefineBug=function(){if(!i())return null;try{return 1!==g([],"length",{value:1}).length}catch(C){return!0}},q.exports=i},57877:function(q,W,t){"use strict";var A="undefined"!=typeof Symbol&&Symbol,g=t(35638);q.exports=function(){return"function"==typeof A&&"function"==typeof Symbol&&"symbol"==typeof A("foo")&&"symbol"==typeof Symbol("bar")&&g()}},35638:function(q){"use strict";q.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},A=Symbol("test"),g=Object(A);if("string"==typeof A||"[object Symbol]"!==Object.prototype.toString.call(A)||"[object Symbol]"!==Object.prototype.toString.call(g))return!1;for(A in t[A]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var P=Object.getOwnPropertySymbols(t);if(1!==P.length||P[0]!==A||!Object.prototype.propertyIsEnumerable.call(t,A))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var C=Object.getOwnPropertyDescriptor(t,A);if(42!==C.value||!0!==C.enumerable)return!1}return!0}},84543:function(q,W,t){"use strict";var A=t(35638);q.exports=function(){return A()&&!!Symbol.toStringTag}},35065:function(q,W,t){"use strict";var A=t(77575);q.exports=A.call(Function.call,Object.prototype.hasOwnProperty)},95280:function(q,W){W.read=function(t,A,g,i,P){var C,u,y=8*P-i-1,e=(1<<y)-1,r=e>>1,l=-7,a=g?P-1:0,s=g?-1:1,c=t[A+a];for(a+=s,C=c&(1<<-l)-1,c>>=-l,l+=y;l>0;C=256*C+t[A+a],a+=s,l-=8);for(u=C&(1<<-l)-1,C>>=-l,l+=i;l>0;u=256*u+t[A+a],a+=s,l-=8);if(0===C)C=1-r;else{if(C===e)return u?NaN:1/0*(c?-1:1);u+=Math.pow(2,i),C-=r}return(c?-1:1)*u*Math.pow(2,C-i)},W.write=function(t,A,g,i,P,C){var u,y,e,r=8*C-P-1,l=(1<<r)-1,a=l>>1,s=23===P?Math.pow(2,-24)-Math.pow(2,-77):0,c=i?0:C-1,f=i?1:-1,m=A<0||0===A&&1/A<0?1:0;for(A=Math.abs(A),isNaN(A)||A===1/0?(y=isNaN(A)?1:0,u=l):(u=Math.floor(Math.log(A)/Math.LN2),A*(e=Math.pow(2,-u))<1&&(u--,e*=2),(A+=u+a>=1?s/e:s*Math.pow(2,1-a))*e>=2&&(u++,e/=2),u+a>=l?(y=0,u=l):u+a>=1?(y=(A*e-1)*Math.pow(2,P),u+=a):(y=A*Math.pow(2,a-1)*Math.pow(2,P),u=0));P>=8;t[g+c]=255&y,c+=f,y/=256,P-=8);for(u=u<<P|y,r+=P;r>0;t[g+c]=255&u,c+=f,u/=256,r-=8);t[g+c-f]|=128*m}},42018:function(q){q.exports="function"==typeof Object.create?function(t,A){A&&(t.super_=A,t.prototype=Object.create(A.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:function(t,A){if(A){t.super_=A;var g=function(){};g.prototype=A.prototype,t.prototype=new g,t.prototype.constructor=t}}},47216:function(q,W,t){"use strict";var A=t(84543)(),i=t(6614)("Object.prototype.toString"),P=function(e){return!(A&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},C=function(e){return!!P(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"[object Function]"===i(e.callee)},u=function(){return P(arguments)}();P.isLegacyArguments=C,q.exports=u?P:C},54404:function(q){q.exports=!0},85395:function(q){"use strict";var A,g,W=Function.prototype.toString,t="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof t&&"function"==typeof Object.defineProperty)try{A=Object.defineProperty({},"length",{get:function(){throw g}}),g={},t(function(){throw 42},null,A)}catch(w){w!==g&&(t=null)}else t=null;var i=/^\s*class\b/,P=function(p){try{var o=W.call(p);return i.test(o)}catch(v){return!1}},C=function(p){try{return!P(p)&&(W.call(p),!0)}catch(o){return!1}},u=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,f=!(0 in[,]),m=function(){return!1};if("object"==typeof document){var h=document.all;u.call(h)===u.call(document.all)&&(m=function(p){if((f||!p)&&(void 0===p||"object"==typeof p))try{var o=u.call(p);return("[object HTMLAllCollection]"===o||"[object HTML document.all class]"===o||"[object HTMLCollection]"===o||"[object Object]"===o)&&null==p("")}catch(v){}return!1})}q.exports=t?function(p){if(m(p))return!0;if(!p||"function"!=typeof p&&"object"!=typeof p)return!1;try{t(p,null,A)}catch(o){if(o!==g)return!1}return!P(p)&&C(p)}:function(p){if(m(p))return!0;if(!p||"function"!=typeof p&&"object"!=typeof p)return!1;if(c)return C(p);if(P(p))return!1;var o=u.call(p);return!("[object Function]"!==o&&"[object GeneratorFunction]"!==o&&!/^\[object HTML/.test(o))&&C(p)}},65481:function(q,W,t){"use strict";var y,A=Object.prototype.toString,g=Function.prototype.toString,i=/^\s*(?:function)?\*/,P=t(84543)(),C=Object.getPrototypeOf;q.exports=function(r){if("function"!=typeof r)return!1;if(i.test(g.call(r)))return!0;if(!P)return"[object GeneratorFunction]"===A.call(r);if(!C)return!1;if(void 0===y){var a=function(){if(!P)return!1;try{return Function("return function*() {}")()}catch(e){}}();y=!!a&&C(a)}return C(r)===y}},62683:function(q){"use strict";q.exports="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},64274:function(q){"use strict";q.exports=function(t){return t!=t}},15567:function(q,W,t){"use strict";var A=t(68222),g=t(17045),i=t(64274),P=t(14922),C=t(22442),u=A(P(),Number);g(u,{getPolyfill:P,implementation:i,shim:C}),q.exports=u},14922:function(q,W,t){"use strict";var A=t(64274);q.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:A}},22442:function(q,W,t){"use strict";var A=t(17045),g=t(14922);q.exports=function(){var P=g();return A(Number,{isNaN:P},{isNaN:function(){return Number.isNaN!==P}}),P}},64941:function(q){"use strict";q.exports=function(W){var t=typeof W;return null!==W&&("object"===t||"function"===t)}},10973:function(q){"use strict";var W=Object.prototype.toString;q.exports=function(t){var A;return"[object Object]"===W.call(t)&&(null===(A=Object.getPrototypeOf(t))||A===Object.getPrototypeOf({}))}},18546:function(q){"use strict";q.exports=function(W){for(var A,t=W.length,g=0;g<t;g++)if(((A=W.charCodeAt(g))<9||A>13)&&32!==A&&133!==A&&160!==A&&5760!==A&&6158!==A&&(A<8192||A>8205)&&8232!==A&&8233!==A&&8239!==A&&8287!==A&&8288!==A&&12288!==A&&65279!==A)return!1;return!0}},89546:function(q){"use strict";q.exports=function(t){return"string"==typeof t&&(t=t.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(t)&&/[\dz]$/i.test(t)&&t.length>4))}},9187:function(q,W,t){"use strict";var A=t(31353),g=t(72077),i=t(6614),P=i("Object.prototype.toString"),C=t(84543)(),u=t(40383),y="undefined"==typeof globalThis?t.g:globalThis,e=g(),r=i("Array.prototype.indexOf",!0)||function(m,h){for(var w=0;w<m.length;w+=1)if(m[w]===h)return w;return-1},l=i("String.prototype.slice"),a={},s=Object.getPrototypeOf;C&&u&&s&&A(e,function(f){var m=new y[f];if(Symbol.toStringTag in m){var h=s(m),w=u(h,Symbol.toStringTag);if(!w){var p=s(h);w=u(p,Symbol.toStringTag)}a[f]=w.get}});q.exports=function(m){if(!m||"object"!=typeof m)return!1;if(!C||!(Symbol.toStringTag in m)){var h=l(P(m),8,-1);return r(e,h)>-1}return!!u&&function(m){var h=!1;return A(a,function(w,p){if(!h)try{h=w.call(m)===p}catch(o){}}),h}(m)}},44517:function(q){var t;t=function(){"use strict";var W,t,A;function g(i,P){if(W)if(t){var C="var sharedChunk = {}; ("+W+")(sharedChunk); ("+t+")(sharedChunk);",u={};W(u),(A=P(u)).workerUrl=window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))}else t=P;else W=P}return g(0,function(i){function P(R,I){return R(I={exports:{}},I.exports),I.exports}var C="1.10.1",u=y;function y(R,I,V,tt){this.cx=3*R,this.bx=3*(V-R)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*I,this.by=3*(tt-I)-this.cy,this.ay=1-this.cy-this.by,this.p1x=R,this.p1y=tt,this.p2x=V,this.p2y=tt}y.prototype.sampleCurveX=function(R){return((this.ax*R+this.bx)*R+this.cx)*R},y.prototype.sampleCurveY=function(R){return((this.ay*R+this.by)*R+this.cy)*R},y.prototype.sampleCurveDerivativeX=function(R){return(3*this.ax*R+2*this.bx)*R+this.cx},y.prototype.solveCurveX=function(R,I){var V,tt,ct,mt,Tt;for(void 0===I&&(I=1e-6),ct=R,Tt=0;Tt<8;Tt++){if(mt=this.sampleCurveX(ct)-R,Math.abs(mt)<I)return ct;var jt=this.sampleCurveDerivativeX(ct);if(Math.abs(jt)<1e-6)break;ct-=mt/jt}if((ct=R)<(V=0))return V;if(ct>(tt=1))return tt;for(;V<tt;){if(mt=this.sampleCurveX(ct),Math.abs(mt-R)<I)return ct;R>mt?V=ct:tt=ct,ct=.5*(tt-V)+V}return ct},y.prototype.solve=function(R,I){return this.sampleCurveY(this.solveCurveX(R,I))};var e=r;function r(R,I){this.x=R,this.y=I}function s(R,I,V,tt){var ct=new u(R,I,V,tt);return function(mt){return ct.solve(mt)}}r.prototype={clone:function(){return new r(this.x,this.y)},add:function(R){return this.clone()._add(R)},sub:function(R){return this.clone()._sub(R)},multByPoint:function(R){return this.clone()._multByPoint(R)},divByPoint:function(R){return this.clone()._divByPoint(R)},mult:function(R){return this.clone()._mult(R)},div:function(R){return this.clone()._div(R)},rotate:function(R){return this.clone()._rotate(R)},rotateAround:function(R,I){return this.clone()._rotateAround(R,I)},matMult:function(R){return this.clone()._matMult(R)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(R){return this.x===R.x&&this.y===R.y},dist:function(R){return Math.sqrt(this.distSqr(R))},distSqr:function(R){var I=R.x-this.x,V=R.y-this.y;return I*I+V*V},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(R){return Math.atan2(this.y-R.y,this.x-R.x)},angleWith:function(R){return this.angleWithSep(R.x,R.y)},angleWithSep:function(R,I){return Math.atan2(this.x*I-this.y*R,this.x*R+this.y*I)},_matMult:function(R){var V=R[2]*this.x+R[3]*this.y;return this.x=R[0]*this.x+R[1]*this.y,this.y=V,this},_add:function(R){return this.x+=R.x,this.y+=R.y,this},_sub:function(R){return this.x-=R.x,this.y-=R.y,this},_mult:function(R){return this.x*=R,this.y*=R,this},_div:function(R){return this.x/=R,this.y/=R,this},_multByPoint:function(R){return this.x*=R.x,this.y*=R.y,this},_divByPoint:function(R){return this.x/=R.x,this.y/=R.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var R=this.y;return this.y=this.x,this.x=-R,this},_rotate:function(R){var I=Math.cos(R),V=Math.sin(R),ct=V*this.x+I*this.y;return this.x=I*this.x-V*this.y,this.y=ct,this},_rotateAround:function(R,I){var V=Math.cos(R),tt=Math.sin(R),mt=I.y+tt*(this.x-I.x)+V*(this.y-I.y);return this.x=I.x+V*(this.x-I.x)-tt*(this.y-I.y),this.y=mt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(R){return R instanceof r?R:Array.isArray(R)?new r(R[0],R[1]):R};var c=s(.25,.1,.25,1);function f(R,I,V){return Math.min(V,Math.max(I,R))}function m(R,I,V){var tt=V-I,ct=((R-I)%tt+tt)%tt+I;return ct===I?V:ct}function o(R){for(var I=[],V=arguments.length-1;V-- >0;)I[V]=arguments[V+1];for(var tt=0,ct=I;tt<ct.length;tt+=1){var mt=ct[tt];for(var Tt in mt)R[Tt]=mt[Tt]}return R}var M=1;function b(){return M++}function L(){return function R(I){return I?(I^16*Math.random()>>I/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,R)}()}function x(R){return!!R&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(R)}function S(R,I){R.forEach(function(V){!I[V]||(I[V]=I[V].bind(I))})}function T(R,I){return-1!==R.indexOf(I,R.length-I.length)}function n(R,I,V){var tt={};for(var ct in R)tt[ct]=I.call(V||this,R[ct],ct,R);return tt}function E(R,I,V){var tt={};for(var ct in R)I.call(V||this,R[ct],ct,R)&&(tt[ct]=R[ct]);return tt}function d(R){return Array.isArray(R)?R.map(d):"object"==typeof R&&R?n(R,d):R}var D={};function N(R){D[R]||("undefined"!=typeof console&&console.warn(R),D[R]=!0)}function k(R,I,V){return(V.y-R.y)*(I.x-R.x)>(I.y-R.y)*(V.x-R.x)}function O(R){for(var I=0,V=0,tt=R.length,ct=tt-1,mt=void 0,Tt=void 0;V<tt;ct=V++)I+=((Tt=R[ct]).x-(mt=R[V]).x)*(mt.y+Tt.y);return I}function z(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function U(R){var V={};if(R.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ct,mt,Tt,jt){var le=Tt||jt;return V[mt]=!le||le.toLowerCase(),""}),V["max-age"]){var tt=parseInt(V["max-age"],10);isNaN(tt)?delete V["max-age"]:V["max-age"]=tt}return V}var H=null;function J(R){if(null==H){var I=R.navigator?R.navigator.userAgent:null;H=!!R.safari||!(!I||!(/\b(iPad|iPhone|iPod)\b/.test(I)||I.match("Safari")&&!I.match("Chrome")))}return H}function nt(R){try{var I=self[R];return I.setItem("_mapbox_test_",1),I.removeItem("_mapbox_test_"),!0}catch(V){return!1}}var G,K,rt,st,Q=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),j=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,Z=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,at={now:Q,frame:function(I){var V=j(I);return{cancel:function(){return Z(V)}}},getImageData:function(I,V){void 0===V&&(V=0);var tt=self.document.createElement("canvas"),ct=tt.getContext("2d");if(!ct)throw new Error("failed to create canvas 2d context");return tt.width=I.width,tt.height=I.height,ct.drawImage(I,0,0,I.width,I.height),ct.getImageData(-V,-V,I.width+2*V,I.height+2*V)},resolveURL:function(I){return G||(G=self.document.createElement("a")),G.href=I,G.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==K&&(K=self.matchMedia("(prefers-reduced-motion: reduce)")),K.matches)}},$={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},X={supported:!1,testSupport:function bt(R){et||!st||(dt?gt(R):rt=R)}},et=!1,dt=!1;function gt(R){var I=R.createTexture();R.bindTexture(R.TEXTURE_2D,I);try{if(R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,st),R.isContextLost())return;X.supported=!0}catch(V){}R.deleteTexture(I),et=!0}self.document&&((st=self.document.createElement("img")).onload=function(){rt&&gt(rt),rt=null,dt=!0},st.onerror=function(){et=!0,rt=null},st.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Lt="01";var Mt=function(I,V){this._transformRequestFn=I,this._customAccessToken=V,this._createSkuToken()};function xt(R){return 0===R.indexOf("mapbox:")}Mt.prototype._createSkuToken=function(){var I=function It(){for(var V="",tt=0;tt<10;tt++)V+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Lt,V].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=I.token,this._skuTokenExpiresAt=I.tokenExpiresAt},Mt.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Mt.prototype.transformRequest=function(I,V){return this._transformRequestFn&&this._transformRequestFn(I,V)||{url:I}},Mt.prototype.normalizeStyleURL=function(I,V){if(!xt(I))return I;var tt=te(I);return tt.path="/styles/v1"+tt.path,this._makeAPIURL(tt,this._customAccessToken||V)},Mt.prototype.normalizeGlyphsURL=function(I,V){if(!xt(I))return I;var tt=te(I);return tt.path="/fonts/v1"+tt.path,this._makeAPIURL(tt,this._customAccessToken||V)},Mt.prototype.normalizeSourceURL=function(I,V){if(!xt(I))return I;var tt=te(I);return tt.path="/v4/"+tt.authority+".json",tt.params.push("secure"),this._makeAPIURL(tt,this._customAccessToken||V)},Mt.prototype.normalizeSpriteURL=function(I,V,tt,ct){var mt=te(I);return xt(I)?(mt.path="/styles/v1"+mt.path+"/sprite"+V+tt,this._makeAPIURL(mt,this._customAccessToken||ct)):(mt.path+=""+V+tt,Qt(mt))},Mt.prototype.normalizeTileURL=function(I,V){if(this._isSkuTokenExpired()&&this._createSkuToken(),I&&!xt(I))return I;var tt=te(I);tt.path=tt.path.replace(/(\.(png|jpg)\d*)(?=$)/,(at.devicePixelRatio>=2||512===V?"@2x":"")+(X.supported?".webp":"$1")),tt.path=tt.path.replace(/^.+\/v4\//,"/"),tt.path="/v4"+tt.path;var le=this._customAccessToken||function Pt(R){for(var I=0,V=R;I<V.length;I+=1){var ct=V[I].match(/^access_token=(.*)$/);if(ct)return ct[1]}return null}(tt.params)||$.ACCESS_TOKEN;return $.REQUIRE_ACCESS_TOKEN&&le&&this._skuToken&&tt.params.push("sku="+this._skuToken),this._makeAPIURL(tt,le)},Mt.prototype.canonicalizeTileURL=function(I,V){var mt=te(I);if(!mt.path.match(/(^\/v4\/)/)||!mt.path.match(/\.[\w]+$/))return I;var Tt="mapbox://tiles/";Tt+=mt.path.replace("/v4/","");var jt=mt.params;return V&&(jt=jt.filter(function(le){return!le.match(/^access_token=/)})),jt.length&&(Tt+="?"+jt.join("&")),Tt},Mt.prototype.canonicalizeTileset=function(I,V){for(var tt=!!V&&xt(V),ct=[],mt=0,Tt=I.tiles||[];mt<Tt.length;mt+=1){var jt=Tt[mt];Gt(jt)?ct.push(this.canonicalizeTileURL(jt,tt)):ct.push(jt)}return ct},Mt.prototype._makeAPIURL=function(I,V){var tt="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ct=te($.API_URL);if(I.protocol=ct.protocol,I.authority=ct.authority,"/"!==ct.path&&(I.path=""+ct.path+I.path),!$.REQUIRE_ACCESS_TOKEN)return Qt(I);if(!(V=V||$.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+tt);if("s"===V[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+tt);return I.params=I.params.filter(function(mt){return-1===mt.indexOf("access_token")}),I.params.push("access_token="+V),Qt(I)};var At=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Gt(R){return At.test(R)}var Vt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function te(R){var I=R.match(Vt);if(!I)throw new Error("Unable to parse URL object");return{protocol:I[1],authority:I[2],path:I[3]||"/",params:I[4]?I[4].split("&"):[]}}function Qt(R){var I=R.params.length?"?"+R.params.join("&"):"";return R.protocol+"://"+R.authority+R.path+I}var Bt="mapbox.eventData";function Ot(R){if(!R)return null;var I=R.split(".");if(!I||3!==I.length)return null;try{return JSON.parse(function ut(R){return decodeURIComponent(self.atob(R).split("").map(function(I){return"%"+("00"+I.charCodeAt(0).toString(16)).slice(-2)}).join(""))}(I[1]))}catch(tt){return null}}var qt=function(I){this.type=I,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};qt.prototype.getStorageKey=function(I){var tt,V=Ot($.ACCESS_TOKEN);return tt=V&&V.u?function it(R){return self.btoa(encodeURIComponent(R).replace(/%([0-9A-F]{2})/g,function(I,V){return String.fromCharCode(Number("0x"+V))}))}(V.u):$.ACCESS_TOKEN||"",I?Bt+"."+I+":"+tt:Bt+":"+tt},qt.prototype.fetchEventData=function(){var I=nt("localStorage"),V=this.getStorageKey(),tt=this.getStorageKey("uuid");if(I)try{var ct=self.localStorage.getItem(V);ct&&(this.eventData=JSON.parse(ct));var mt=self.localStorage.getItem(tt);mt&&(this.anonId=mt)}catch(Tt){N("Unable to read from LocalStorage")}},qt.prototype.saveEventData=function(){var I=nt("localStorage"),V=this.getStorageKey(),tt=this.getStorageKey("uuid");if(I)try{self.localStorage.setItem(tt,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(V,JSON.stringify(this.eventData))}catch(ct){N("Unable to write to LocalStorage")}},qt.prototype.processRequests=function(I){},qt.prototype.postEvent=function(I,V,tt,ct){var mt=this;if($.EVENTS_URL){var Tt=te($.EVENTS_URL);Tt.params.push("access_token="+(ct||$.ACCESS_TOKEN||""));var jt={event:this.type,created:new Date(I).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:C,skuId:Lt,userId:this.anonId},le=V?o(jt,V):jt,ye={url:Qt(Tt),headers:{"Content-Type":"text/plain"},body:JSON.stringify([le])};this.pendingRequest=Ae(ye,function(we){mt.pendingRequest=null,tt(we),mt.saveEventData(),mt.processRequests(ct)})}},qt.prototype.queueRequest=function(I,V){this.queue.push(I),this.processRequests(V)};var Nt,wt,ie=function(R){function I(){R.call(this,"map.load"),this.success={},this.skuToken=""}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.postMapLoadEvent=function(tt,ct,mt,Tt){this.skuToken=mt,($.EVENTS_URL&&Tt||$.ACCESS_TOKEN&&Array.isArray(tt)&&tt.some(function(jt){return xt(jt)||Gt(jt)}))&&this.queueRequest({id:ct,timestamp:Date.now()},Tt)},I.prototype.processRequests=function(tt){var ct=this;if(!this.pendingRequest&&0!==this.queue.length){var mt=this.queue.shift(),Tt=mt.id,jt=mt.timestamp;Tt&&this.success[Tt]||(this.anonId||this.fetchEventData(),x(this.anonId)||(this.anonId=L()),this.postEvent(jt,{skuToken:this.skuToken},function(le){le||Tt&&(ct.success[Tt]=!0)},tt))}},I}(qt),pe=new(function(R){function I(V){R.call(this,"appUserTurnstile"),this._customAccessToken=V}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.postTurnstileEvent=function(tt,ct){$.EVENTS_URL&&$.ACCESS_TOKEN&&Array.isArray(tt)&&tt.some(function(mt){return xt(mt)||Gt(mt)})&&this.queueRequest(Date.now(),ct)},I.prototype.processRequests=function(tt){var ct=this;if(!this.pendingRequest&&0!==this.queue.length){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var mt=Ot($.ACCESS_TOKEN),Tt=mt?mt.u:$.ACCESS_TOKEN,jt=Tt!==this.eventData.tokenU;x(this.anonId)||(this.anonId=L(),jt=!0);var le=this.queue.shift();if(this.eventData.lastSuccess){var ye=new Date(this.eventData.lastSuccess),we=new Date(le),Ue=(le-this.eventData.lastSuccess)/864e5;jt=jt||Ue>=1||Ue<-1||ye.getDate()!==we.getDate()}else jt=!0;if(!jt)return this.processRequests();this.postEvent(le,{"enabled.telemetry":!1},function(er){er||(ct.eventData.lastSuccess=le,ct.eventData.tokenU=Tt)},tt)}},I}(qt)),de=pe.postTurnstileEvent.bind(pe),Fe=new ie,Kt=Fe.postMapLoadEvent.bind(Fe),Et="mapbox-tiles",St=500,Dt=50;function Rt(){self.caches&&!Nt&&(Nt=self.caches.open(Et))}function pt(R,I,V){if(Rt(),Nt){var tt={status:I.status,statusText:I.statusText,headers:new self.Headers};I.headers.forEach(function(Tt,jt){return tt.headers.set(jt,Tt)});var ct=U(I.headers.get("Cache-Control")||"");ct["no-store"]||(ct["max-age"]&&tt.headers.set("Expires",new Date(V+1e3*ct["max-age"]).toUTCString()),new Date(tt.headers.get("Expires")).getTime()-V<42e4||function ft(R,I){if(void 0===wt)try{new Response(new ReadableStream),wt=!0}catch(V){wt=!1}wt?I(R.body):R.blob().then(I)}(I,function(Tt){var jt=new self.Response(Tt,tt);Rt(),Nt&&Nt.then(function(le){return le.put(kt(R.url),jt)}).catch(function(le){return N(le.message)})}))}}function kt(R){var I=R.indexOf("?");return I<0?R:R.slice(0,I)}function Zt(R,I){if(Rt(),!Nt)return I(null);var V=kt(R.url);Nt.then(function(tt){tt.match(V).then(function(ct){var mt=function ee(R){if(!R)return!1;var I=new Date(R.headers.get("Expires")||0),V=U(R.headers.get("Cache-Control")||"");return I>Date.now()&&!V["no-cache"]}(ct);tt.delete(V),mt&&tt.put(V,ct.clone()),I(null,ct,mt)}).catch(I)}).catch(I)}var Ge,se=1/0;function gr(){return null==Ge&&(Ge=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),Ge}var ue={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ue);var Ne=function(R){function I(V,tt,ct){401===tt&&Gt(ct)&&(V+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),R.call(this,V),this.status=tt,this.url=ct,this.name=this.constructor.name,this.message=V}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},I}(Error),Ye=z()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};function rr(R,I){var V=new self.AbortController,tt=new self.Request(R.url,{method:R.method||"GET",body:R.body,credentials:R.credentials,headers:R.headers,referrer:Ye(),signal:V.signal}),ct=!1,mt=!1,Tt=function Wt(R){return R.indexOf("sku=")>0&&Gt(R)}(tt.url);"json"===R.type&&tt.headers.set("Accept","application/json");var jt=function(ye,we,Ue){if(!mt){if(ye&&"SecurityError"!==ye.message&&N(ye),we&&Ue)return le(we);var er=Date.now();self.fetch(tt).then(function($e){if($e.ok){var br=Tt?$e.clone():null;return le($e,br,er)}return I(new Ne($e.statusText,$e.status,R.url))}).catch(function($e){20!==$e.code&&I(new Error($e.message))})}},le=function(ye,we,Ue){("arrayBuffer"===R.type?ye.arrayBuffer():"json"===R.type?ye.json():ye.text()).then(function(er){mt||(we&&Ue&&pt(tt,we,Ue),ct=!0,I(null,er,ye.headers.get("Cache-Control"),ye.headers.get("Expires")))}).catch(function(er){mt||I(new Error(er.message))})};return Tt?Zt(tt,jt):jt(null,null),{cancel:function(){mt=!0,ct||V.abort()}}}var re=function(R,I){if(!function(R){return/^file:/.test(R)||/^file:/.test(Ye())&&!/^\w+:/.test(R)}(R.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return rr(R,I);if(z()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",R,I,void 0,!0)}return function ce(R,I){var V=new self.XMLHttpRequest;for(var tt in V.open(R.method||"GET",R.url,!0),"arrayBuffer"===R.type&&(V.responseType="arraybuffer"),R.headers)V.setRequestHeader(tt,R.headers[tt]);return"json"===R.type&&(V.responseType="text",V.setRequestHeader("Accept","application/json")),V.withCredentials="include"===R.credentials,V.onerror=function(){I(new Error(V.statusText))},V.onload=function(){if((V.status>=200&&V.status<300||0===V.status)&&null!==V.response){var ct=V.response;if("json"===R.type)try{ct=JSON.parse(V.response)}catch(mt){return I(mt)}I(null,ct,V.getResponseHeader("Cache-Control"),V.getResponseHeader("Expires"))}else I(new Ne(V.statusText,V.status,R.url))},V.send(R.body),{cancel:function(){return V.abort()}}}(R,I)},be=function(R,I){return re(o(R,{type:"arrayBuffer"}),I)},Ae=function(R,I){return re(o(R,{method:"POST"}),I)};function Te(R){var I=self.document.createElement("a");return I.href=R,I.protocol===self.document.location.protocol&&I.host===self.document.location.host}var ar,nr;ar=[],nr=0;var Ut=function(R,I){if(X.supported&&(R.headers||(R.headers={}),R.headers.accept="image/webp,*/*"),nr>=$.MAX_PARALLEL_IMAGE_REQUESTS){var V={requestParameters:R,callback:I,cancelled:!1,cancel:function(){this.cancelled=!0}};return ar.push(V),V}nr++;var tt=!1,ct=function(){if(!tt)for(tt=!0,nr--;ar.length&&nr<$.MAX_PARALLEL_IMAGE_REQUESTS;){var Tt=ar.shift();Tt.cancelled||(Tt.cancel=Ut(Tt.requestParameters,Tt.callback).cancel)}},mt=be(R,function(Tt,jt,le,ye){ct(),Tt?I(Tt):jt&&(gr()?function Xe(R,I){var V=new self.Blob([new Uint8Array(R)],{type:"image/png"});self.createImageBitmap(V).then(function(tt){I(null,tt)}).catch(function(tt){I(new Error("Could not load image because of "+tt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(jt,I):function Ie(R,I,V,tt){var ct=new self.Image,mt=self.URL;ct.onload=function(){I(null,ct),mt.revokeObjectURL(ct.src)},ct.onerror=function(){return I(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Tt=new self.Blob([new Uint8Array(R)],{type:"image/png"});ct.cacheControl=V,ct.expires=tt,ct.src=R.byteLength?mt.createObjectURL(Tt):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(jt,I,le,ye))});return{cancel:function(){mt.cancel(),ct()}}};function Se(R,I,V){V[R]&&-1!==V[R].indexOf(I)||(V[R]=V[R]||[],V[R].push(I))}function Ce(R,I,V){if(V&&V[R]){var tt=V[R].indexOf(I);-1!==tt&&V[R].splice(tt,1)}}var We=function(I,V){void 0===V&&(V={}),o(this,V),this.type=I},qe=function(R){function I(V,tt){void 0===tt&&(tt={}),R.call(this,"error",o({error:V},tt))}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I}(We),or=function(){};or.prototype.on=function(I,V){return this._listeners=this._listeners||{},Se(I,V,this._listeners),this},or.prototype.off=function(I,V){return Ce(I,V,this._listeners),Ce(I,V,this._oneTimeListeners),this},or.prototype.once=function(I,V){return this._oneTimeListeners=this._oneTimeListeners||{},Se(I,V,this._oneTimeListeners),this},or.prototype.fire=function(I,V){"string"==typeof I&&(I=new We(I,V||{}));var tt=I.type;if(this.listens(tt)){I.target=this;for(var mt=0,Tt=this._listeners&&this._listeners[tt]?this._listeners[tt].slice():[];mt<Tt.length;mt+=1)Tt[mt].call(this,I);for(var ye=0,we=this._oneTimeListeners&&this._oneTimeListeners[tt]?this._oneTimeListeners[tt].slice():[];ye<we.length;ye+=1){var Ue=we[ye];Ce(tt,Ue,this._oneTimeListeners),Ue.call(this,I)}var er=this._eventedParent;er&&(o(I,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),er.fire(I))}else I instanceof qe&&console.error(I.error);return this},or.prototype.listens=function(I){return this._listeners&&this._listeners[I]&&this._listeners[I].length>0||this._oneTimeListeners&&this._oneTimeListeners[I]&&this._oneTimeListeners[I].length>0||this._eventedParent&&this._eventedParent.listens(I)},or.prototype.setEventedParent=function(I,V){return this._eventedParent=I,this._eventedParentData=V,this};var Ze={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Tr=function(I,V,tt,ct){this.message=(I?I+": ":"")+tt,ct&&(this.identifier=ct),null!=V&&V.__line__&&(this.line=V.__line__)};function _r(R){var V=R.value;return V?[new Tr(R.key,V,"constants have been deprecated as of v8")]:[]}function fn(R){for(var I=[],V=arguments.length-1;V-- >0;)I[V]=arguments[V+1];for(var tt=0,ct=I;tt<ct.length;tt+=1){var mt=ct[tt];for(var Tt in mt)R[Tt]=mt[Tt]}return R}function sn(R){return R instanceof Number||R instanceof String||R instanceof Boolean?R.valueOf():R}function En(R){if(Array.isArray(R))return R.map(En);if(R instanceof Object&&!(R instanceof Number||R instanceof String||R instanceof Boolean)){var I={};for(var V in R)I[V]=En(R[V]);return I}return sn(R)}var xn=function(R){function I(V,tt){R.call(this,tt),this.message=tt,this.key=V}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I}(Error),vn=function(I,V){void 0===V&&(V=[]),this.parent=I,this.bindings={};for(var tt=0,ct=V;tt<ct.length;tt+=1){var mt=ct[tt];this.bindings[mt[0]]=mt[1]}};vn.prototype.concat=function(I){return new vn(this,I)},vn.prototype.get=function(I){if(this.bindings[I])return this.bindings[I];if(this.parent)return this.parent.get(I);throw new Error(I+" not found in scope.")},vn.prototype.has=function(I){return!!this.bindings[I]||!!this.parent&&this.parent.has(I)};var Lr={kind:"null"},Er={kind:"number"},He={kind:"string"},Dr={kind:"boolean"},Ve={kind:"color"},je={kind:"object"},ir={kind:"value"},yn={kind:"collator"},Kn={kind:"formatted"},ea={kind:"resolvedImage"};function $n(R,I){return{kind:"array",itemType:R,N:I}}function fa(R){if("array"===R.kind){var I=fa(R.itemType);return"number"==typeof R.N?"array<"+I+", "+R.N+">":"value"===R.itemType.kind?"array":"array<"+I+">"}return R.kind}var Ei=[Lr,Er,He,Dr,Ve,Kn,je,$n(ir),ea];function qi(R,I){if("error"===I.kind)return null;if("array"===R.kind){if("array"===I.kind&&(0===I.N&&"value"===I.itemType.kind||!qi(R.itemType,I.itemType))&&("number"!=typeof R.N||R.N===I.N))return null}else{if(R.kind===I.kind)return null;if("value"===R.kind)for(var V=0,tt=Ei;V<tt.length;V+=1)if(!qi(tt[V],I))return null}return"Expected "+fa(R)+" but found "+fa(I)+" instead."}function to(R,I){return I.some(function(V){return V.kind===R.kind})}function eo(R,I){return I.some(function(V){return"null"===V?null===R:"array"===V?Array.isArray(R):"object"===V?R&&!Array.isArray(R)&&"object"==typeof R:V===typeof R})}var co=P(function(R,I){var V={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function tt(ye){return(ye=Math.round(ye))<0?0:ye>255?255:ye}function mt(ye){return tt("%"===ye[ye.length-1]?parseFloat(ye)/100*255:parseInt(ye))}function Tt(ye){return function ct(ye){return ye<0?0:ye>1?1:ye}("%"===ye[ye.length-1]?parseFloat(ye)/100:parseFloat(ye))}function jt(ye,we,Ue){return Ue<0?Ue+=1:Ue>1&&(Ue-=1),6*Ue<1?ye+(we-ye)*Ue*6:2*Ue<1?we:3*Ue<2?ye+(we-ye)*(2/3-Ue)*6:ye}try{I.parseCSSColor=function le(ye){var Ue,we=ye.replace(/ /g,"").toLowerCase();if(we in V)return V[we].slice();if("#"===we[0])return 4===we.length?(Ue=parseInt(we.substr(1),16))>=0&&Ue<=4095?[(3840&Ue)>>4|(3840&Ue)>>8,240&Ue|(240&Ue)>>4,15&Ue|(15&Ue)<<4,1]:null:7===we.length&&(Ue=parseInt(we.substr(1),16))>=0&&Ue<=16777215?[(16711680&Ue)>>16,(65280&Ue)>>8,255&Ue,1]:null;var er=we.indexOf("("),$e=we.indexOf(")");if(-1!==er&&$e+1===we.length){var br=we.substr(0,er),zr=we.substr(er+1,$e-(er+1)).split(","),ln=1;switch(br){case"rgba":if(4!==zr.length)return null;ln=Tt(zr.pop());case"rgb":return 3!==zr.length?null:[mt(zr[0]),mt(zr[1]),mt(zr[2]),ln];case"hsla":if(4!==zr.length)return null;ln=Tt(zr.pop());case"hsl":if(3!==zr.length)return null;var qr=(parseFloat(zr[0])%360+360)%360/360,Sn=Tt(zr[1]),mn=Tt(zr[2]),An=mn<=.5?mn*(Sn+1):mn+Sn-mn*Sn,Pn=2*mn-An;return[tt(255*jt(Pn,An,qr+1/3)),tt(255*jt(Pn,An,qr)),tt(255*jt(Pn,An,qr-1/3)),ln];default:return null}}return null}}catch(ye){}}).parseCSSColor,Ga=function(I,V,tt,ct){void 0===ct&&(ct=1),this.r=I,this.g=V,this.b=tt,this.a=ct};Ga.parse=function(I){if(I){if(I instanceof Ga)return I;if("string"==typeof I){var V=co(I);if(V)return new Ga(V[0]/255*V[3],V[1]/255*V[3],V[2]/255*V[3],V[3])}}},Ga.prototype.toString=function(){var I=this.toArray(),tt=I[1],ct=I[2],mt=I[3];return"rgba("+Math.round(I[0])+","+Math.round(tt)+","+Math.round(ct)+","+mt+")"},Ga.prototype.toArray=function(){var I=this,mt=I.a;return 0===mt?[0,0,0,0]:[255*I.r/mt,255*I.g/mt,255*I.b/mt,mt]},Ga.black=new Ga(0,0,0,1),Ga.white=new Ga(1,1,1,1),Ga.transparent=new Ga(0,0,0,0),Ga.red=new Ga(1,0,0,1);var Yo=function(I,V,tt){this.sensitivity=I?V?"variant":"case":V?"accent":"base",this.locale=tt,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Yo.prototype.compare=function(I,V){return this.collator.compare(I,V)},Yo.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var El=function(I,V,tt,ct,mt){this.text=I,this.image=V,this.scale=tt,this.fontStack=ct,this.textColor=mt},Ci=function(I){this.sections=I};Ci.fromString=function(I){return new Ci([new El(I,null,null,null,null)])},Ci.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(I){return 0!==I.text.length||I.image&&0!==I.image.name.length})},Ci.factory=function(I){return I instanceof Ci?I:Ci.fromString(I)},Ci.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(I){return I.text}).join("")},Ci.prototype.serialize=function(){for(var I=["format"],V=0,tt=this.sections;V<tt.length;V+=1){var ct=tt[V];if(ct.image)I.push(["image",ct.image.name]);else{I.push(ct.text);var mt={};ct.fontStack&&(mt["text-font"]=["literal",ct.fontStack.split(",")]),ct.scale&&(mt["font-scale"]=ct.scale),ct.textColor&&(mt["text-color"]=["rgba"].concat(ct.textColor.toArray())),I.push(mt)}}return I};var ro=function(I){this.name=I.name,this.available=I.available};function tl(R,I,V,tt){return"number"==typeof R&&R>=0&&R<=255&&"number"==typeof I&&I>=0&&I<=255&&"number"==typeof V&&V>=0&&V<=255?void 0===tt||"number"==typeof tt&&tt>=0&&tt<=1?null:"Invalid rgba value ["+[R,I,V,tt].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof tt?[R,I,V,tt]:[R,I,V]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Cl(R){if(null===R)return!0;if("string"==typeof R)return!0;if("boolean"==typeof R)return!0;if("number"==typeof R)return!0;if(R instanceof Ga)return!0;if(R instanceof Yo)return!0;if(R instanceof Ci)return!0;if(R instanceof ro)return!0;if(Array.isArray(R)){for(var I=0,V=R;I<V.length;I+=1)if(!Cl(V[I]))return!1;return!0}if("object"==typeof R){for(var ct in R)if(!Cl(R[ct]))return!1;return!0}return!1}function Li(R){if(null===R)return Lr;if("string"==typeof R)return He;if("boolean"==typeof R)return Dr;if("number"==typeof R)return Er;if(R instanceof Ga)return Ve;if(R instanceof Yo)return yn;if(R instanceof Ci)return Kn;if(R instanceof ro)return ea;if(Array.isArray(R)){for(var V,I=R.length,tt=0,ct=R;tt<ct.length;tt+=1){var Tt=Li(ct[tt]);if(V){if(V===Tt)continue;V=ir;break}V=Tt}return $n(V||ir,I)}return je}function el(R){var I=typeof R;return null===R?"":"string"===I||"number"===I||"boolean"===I?String(R):R instanceof Ga||R instanceof Ci||R instanceof ro?R.toString():JSON.stringify(R)}ro.prototype.toString=function(){return this.name},ro.fromString=function(I){return I?new ro({name:I,available:!1}):null},ro.prototype.serialize=function(){return["image",this.name]};var ho=function(I,V){this.type=I,this.value=V};ho.parse=function(I,V){if(2!==I.length)return V.error("'literal' expression requires exactly one argument, but found "+(I.length-1)+" instead.");if(!Cl(I[1]))return V.error("invalid value");var tt=I[1],ct=Li(tt),mt=V.expectedType;return"array"===ct.kind&&0===ct.N&&mt&&"array"===mt.kind&&("number"!=typeof mt.N||0===mt.N)&&(ct=mt),new ho(ct,tt)},ho.prototype.evaluate=function(){return this.value},ho.prototype.eachChild=function(){},ho.prototype.outputDefined=function(){return!0},ho.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ga?["rgba"].concat(this.value.toArray()):this.value instanceof Ci?this.value.serialize():this.value};var bi=function(I){this.name="ExpressionEvaluationError",this.message=I};bi.prototype.toJSON=function(){return this.message};var $l={string:He,number:Er,boolean:Dr,object:je},Fi=function(I,V){this.type=I,this.args=V};Fi.parse=function(I,V){if(I.length<2)return V.error("Expected at least one argument.");var ct,tt=1,mt=I[0];if("array"===mt){var Tt,le;if(I.length>2){var jt=I[1];if("string"!=typeof jt||!(jt in $l)||"object"===jt)return V.error('The item type argument of "array" must be one of string, number, boolean',1);Tt=$l[jt],tt++}else Tt=ir;if(I.length>3){if(null!==I[2]&&("number"!=typeof I[2]||I[2]<0||I[2]!==Math.floor(I[2])))return V.error('The length argument to "array" must be a positive integer literal',2);le=I[2],tt++}ct=$n(Tt,le)}else ct=$l[mt];for(var ye=[];tt<I.length;tt++){var we=V.parse(I[tt],tt,ir);if(!we)return null;ye.push(we)}return new Fi(ct,ye)},Fi.prototype.evaluate=function(I){for(var V=0;V<this.args.length;V++){var tt=this.args[V].evaluate(I);if(!qi(this.type,Li(tt)))return tt;if(V===this.args.length-1)throw new bi("Expected value to be of type "+fa(this.type)+", but found "+fa(Li(tt))+" instead.")}return null},Fi.prototype.eachChild=function(I){this.args.forEach(I)},Fi.prototype.outputDefined=function(){return this.args.every(function(I){return I.outputDefined()})},Fi.prototype.serialize=function(){var I=this.type,V=[I.kind];if("array"===I.kind){var tt=I.itemType;if("string"===tt.kind||"number"===tt.kind||"boolean"===tt.kind){V.push(tt.kind);var ct=I.N;("number"==typeof ct||this.args.length>1)&&V.push(ct)}}return V.concat(this.args.map(function(mt){return mt.serialize()}))};var Ro=function(I){this.type=Kn,this.sections=I};Ro.parse=function(I,V){if(I.length<2)return V.error("Expected at least one argument.");var tt=I[1];if(!Array.isArray(tt)&&"object"==typeof tt)return V.error("First argument must be an image or text section.");for(var ct=[],mt=!1,Tt=1;Tt<=I.length-1;++Tt){var jt=I[Tt];if(mt&&"object"==typeof jt&&!Array.isArray(jt)){mt=!1;var le=null;if(jt["font-scale"]&&!(le=V.parse(jt["font-scale"],1,Er)))return null;var ye=null;if(jt["text-font"]&&!(ye=V.parse(jt["text-font"],1,$n(He))))return null;var we=null;if(jt["text-color"]&&!(we=V.parse(jt["text-color"],1,Ve)))return null;var Ue=ct[ct.length-1];Ue.scale=le,Ue.font=ye,Ue.textColor=we}else{var er=V.parse(I[Tt],1,ir);if(!er)return null;var $e=er.type.kind;if("string"!==$e&&"value"!==$e&&"null"!==$e&&"resolvedImage"!==$e)return V.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");mt=!0,ct.push({content:er,scale:null,font:null,textColor:null})}}return new Ro(ct)},Ro.prototype.evaluate=function(I){return new Ci(this.sections.map(function(tt){var ct=tt.content.evaluate(I);return Li(ct)===ea?new El("",ct,null,null,null):new El(el(ct),null,tt.scale?tt.scale.evaluate(I):null,tt.font?tt.font.evaluate(I).join(","):null,tt.textColor?tt.textColor.evaluate(I):null)}))},Ro.prototype.eachChild=function(I){for(var V=0,tt=this.sections;V<tt.length;V+=1){var ct=tt[V];I(ct.content),ct.scale&&I(ct.scale),ct.font&&I(ct.font),ct.textColor&&I(ct.textColor)}},Ro.prototype.outputDefined=function(){return!1},Ro.prototype.serialize=function(){for(var I=["format"],V=0,tt=this.sections;V<tt.length;V+=1){var ct=tt[V];I.push(ct.content.serialize());var mt={};ct.scale&&(mt["font-scale"]=ct.scale.serialize()),ct.font&&(mt["text-font"]=ct.font.serialize()),ct.textColor&&(mt["text-color"]=ct.textColor.serialize()),I.push(mt)}return I};var Ui=function(I){this.type=ea,this.input=I};Ui.parse=function(I,V){if(2!==I.length)return V.error("Expected two arguments.");var tt=V.parse(I[1],1,He);return tt?new Ui(tt):V.error("No image name provided.")},Ui.prototype.evaluate=function(I){var V=this.input.evaluate(I),tt=ro.fromString(V);return tt&&I.availableImages&&(tt.available=I.availableImages.indexOf(V)>-1),tt},Ui.prototype.eachChild=function(I){I(this.input)},Ui.prototype.outputDefined=function(){return!1},Ui.prototype.serialize=function(){return["image",this.input.serialize()]};var Su={"to-boolean":Dr,"to-color":Ve,"to-number":Er,"to-string":He},Xi=function(I,V){this.type=I,this.args=V};Xi.parse=function(I,V){if(I.length<2)return V.error("Expected at least one argument.");var tt=I[0];if(("to-boolean"===tt||"to-string"===tt)&&2!==I.length)return V.error("Expected one argument.");for(var ct=Su[tt],mt=[],Tt=1;Tt<I.length;Tt++){var jt=V.parse(I[Tt],Tt,ir);if(!jt)return null;mt.push(jt)}return new Xi(ct,mt)},Xi.prototype.evaluate=function(I){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(I));if("color"===this.type.kind){for(var V,tt,ct=0,mt=this.args;ct<mt.length;ct+=1){if(tt=null,(V=mt[ct].evaluate(I))instanceof Ga)return V;if("string"==typeof V){var jt=I.parseColor(V);if(jt)return jt}else if(Array.isArray(V)&&!(tt=V.length<3||V.length>4?"Invalid rbga value "+JSON.stringify(V)+": expected an array containing either three or four numeric values.":tl(V[0],V[1],V[2],V[3])))return new Ga(V[0]/255,V[1]/255,V[2]/255,V[3])}throw new bi(tt||"Could not parse color from value '"+("string"==typeof V?V:String(JSON.stringify(V)))+"'")}if("number"===this.type.kind){for(var le=null,ye=0,we=this.args;ye<we.length;ye+=1){if(null===(le=we[ye].evaluate(I)))return 0;var er=Number(le);if(!isNaN(er))return er}throw new bi("Could not convert "+JSON.stringify(le)+" to number.")}return"formatted"===this.type.kind?Ci.fromString(el(this.args[0].evaluate(I))):"resolvedImage"===this.type.kind?ro.fromString(el(this.args[0].evaluate(I))):el(this.args[0].evaluate(I))},Xi.prototype.eachChild=function(I){this.args.forEach(I)},Xi.prototype.outputDefined=function(){return this.args.every(function(I){return I.outputDefined()})},Xi.prototype.serialize=function(){if("formatted"===this.type.kind)return new Ro([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ui(this.args[0]).serialize();var I=["to-"+this.type.kind];return this.eachChild(function(V){I.push(V.serialize())}),I};var rl=["Unknown","Point","LineString","Polygon"],no=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};no.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},no.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?rl[this.feature.type]:this.feature.type:null},no.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},no.prototype.canonicalID=function(){return this.canonical},no.prototype.properties=function(){return this.feature&&this.feature.properties||{}},no.prototype.parseColor=function(I){var V=this._parseColorCache[I];return V||(V=this._parseColorCache[I]=Ga.parse(I)),V};var wi=function(I,V,tt,ct){this.name=I,this.type=V,this._evaluate=tt,this.args=ct};wi.prototype.evaluate=function(I){return this._evaluate(I,this.args)},wi.prototype.eachChild=function(I){this.args.forEach(I)},wi.prototype.outputDefined=function(){return!1},wi.prototype.serialize=function(){return[this.name].concat(this.args.map(function(I){return I.serialize()}))},wi.parse=function(I,V){var tt,ct=I[0],mt=wi.definitions[ct];if(!mt)return V.error('Unknown expression "'+ct+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Tt=Array.isArray(mt)?mt[0]:mt.type,jt=Array.isArray(mt)?[[mt[1],mt[2]]]:mt.overloads,le=jt.filter(function(ya){var ba=ya[0];return!Array.isArray(ba)||ba.length===I.length-1}),ye=null,we=0,Ue=le;we<Ue.length;we+=1){var er=Ue[we],$e=er[0],br=er[1];ye=new is(V.registry,V.path,null,V.scope);for(var zr=[],ln=!1,qr=1;qr<I.length;qr++){var Sn=I[qr],mn=Array.isArray($e)?$e[qr-1]:$e.type,An=ye.parse(Sn,1+zr.length,mn);if(!An){ln=!0;break}zr.push(An)}if(!ln){if(Array.isArray($e)&&$e.length!==zr.length){ye.error("Expected "+$e.length+" arguments, but found "+zr.length+" instead.");continue}for(var Pn=0;Pn<zr.length;Pn++){var On=Array.isArray($e)?$e[Pn]:$e.type,jn=zr[Pn];ye.concat(Pn+1).checkSubtype(On,jn.type)}if(0===ye.errors.length)return new wi(ct,Tt,br,zr)}}if(1===le.length)(tt=V.errors).push.apply(tt,ye.errors);else{for(var wa=(le.length?le:jt).map(function(ya){return function Eu(R){return Array.isArray(R)?"("+R.map(fa).join(", ")+")":"("+fa(R.type)+"...)"}(ya[0])}).join(" | "),la=[],va=1;va<I.length;va++){var Ia=V.parse(I[va],1+la.length);if(!Ia)return null;la.push(fa(Ia.type))}V.error("Expected arguments of type "+wa+", but found ("+la.join(", ")+") instead.")}return null},wi.register=function(I,V){for(var tt in wi.definitions=V,V)I[tt]=wi};var Io=function(I,V,tt){this.type=yn,this.locale=tt,this.caseSensitive=I,this.diacriticSensitive=V};Io.parse=function(I,V){if(2!==I.length)return V.error("Expected one argument.");var tt=I[1];if("object"!=typeof tt||Array.isArray(tt))return V.error("Collator options argument must be an object.");var ct=V.parse(void 0!==tt["case-sensitive"]&&tt["case-sensitive"],1,Dr);if(!ct)return null;var mt=V.parse(void 0!==tt["diacritic-sensitive"]&&tt["diacritic-sensitive"],1,Dr);if(!mt)return null;var Tt=null;return tt.locale&&!(Tt=V.parse(tt.locale,1,He))?null:new Io(ct,mt,Tt)},Io.prototype.evaluate=function(I){return new Yo(this.caseSensitive.evaluate(I),this.diacriticSensitive.evaluate(I),this.locale?this.locale.evaluate(I):null)},Io.prototype.eachChild=function(I){I(this.caseSensitive),I(this.diacriticSensitive),this.locale&&I(this.locale)},Io.prototype.outputDefined=function(){return!1},Io.prototype.serialize=function(){var I={};return I["case-sensitive"]=this.caseSensitive.serialize(),I["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(I.locale=this.locale.serialize()),["collator",I]};var rs=8192;function Ll(R,I){R[0]=Math.min(R[0],I[0]),R[1]=Math.min(R[1],I[1]),R[2]=Math.max(R[2],I[0]),R[3]=Math.max(R[3],I[1])}function Dl(R,I){return!(R[0]<=I[0]||R[2]>=I[2]||R[1]<=I[1]||R[3]>=I[3])}function Lu(R,I){var V=function Cu(R){return(180+R)/360}(R[0]),tt=function Pl(R){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+R*Math.PI/360)))/360}(R[1]),ct=Math.pow(2,I.z);return[Math.round(V*ct*rs),Math.round(tt*ct*rs)]}function of(R,I,V){var tt=R[0]-I[0],ct=R[1]-I[1],mt=R[0]-V[0],Tt=R[1]-V[1];return tt*Tt-mt*ct==0&&tt*mt<=0&&ct*Tt<=0}function sf(R,I,V){return I[1]>R[1]!=V[1]>R[1]&&R[0]<(V[0]-I[0])*(R[1]-I[1])/(V[1]-I[1])+I[0]}function _l(R,I){for(var V=!1,tt=0,ct=I.length;tt<ct;tt++)for(var mt=I[tt],Tt=0,jt=mt.length;Tt<jt-1;Tt++){if(of(R,mt[Tt],mt[Tt+1]))return!1;sf(R,mt[Tt],mt[Tt+1])&&(V=!V)}return V}function lf(R,I){for(var V=0;V<I.length;V++)if(_l(R,I[V]))return!0;return!1}function Pu(R,I,V,tt){var le=tt[0]-V[0],ye=tt[1]-V[1],we=(R[0]-V[0])*ye-le*(R[1]-V[1]),Ue=(I[0]-V[0])*ye-le*(I[1]-V[1]);return we>0&&Ue<0||we<0&&Ue>0}function ff(R,I,V,tt){return 0!==function uf(R,I){return R[0]*I[1]-R[1]*I[0]}([tt[0]-V[0],tt[1]-V[1]],[I[0]-R[0],I[1]-R[1]])&&!(!Pu(R,I,V,tt)||!Pu(V,tt,R,I))}function cf(R,I,V){for(var tt=0,ct=V;tt<ct.length;tt+=1)for(var mt=ct[tt],Tt=0;Tt<mt.length-1;++Tt)if(ff(R,I,mt[Tt],mt[Tt+1]))return!0;return!1}function Du(R,I){for(var V=0;V<R.length;++V)if(!_l(R[V],I))return!1;for(var tt=0;tt<R.length-1;++tt)if(cf(R[tt],R[tt+1],I))return!1;return!0}function hf(R,I){for(var V=0;V<I.length;V++)if(Du(R,I[V]))return!0;return!1}function ns(R,I,V){for(var tt=[],ct=0;ct<R.length;ct++){for(var mt=[],Tt=0;Tt<R[ct].length;Tt++){var jt=Lu(R[ct][Tt],V);Ll(I,jt),mt.push(jt)}tt.push(mt)}return tt}function ks(R,I,V){for(var tt=[],ct=0;ct<R.length;ct++){var mt=ns(R[ct],I,V);tt.push(mt)}return tt}function zs(R,I,V,tt){if(R[0]<V[0]||R[0]>V[2]){var ct=.5*tt,mt=R[0]-V[0]>ct?-tt:V[0]-R[0]>ct?tt:0;0===mt&&(mt=R[0]-V[2]>ct?-tt:V[2]-R[0]>ct?tt:0),R[0]+=mt}Ll(I,R)}function ql(R,I,V,tt){for(var ct=Math.pow(2,tt.z)*rs,mt=[tt.x*rs,tt.y*rs],Tt=[],jt=0,le=R;jt<le.length;jt+=1)for(var we=0,Ue=le[jt];we<Ue.length;we+=1){var er=Ue[we],$e=[er.x+mt[0],er.y+mt[1]];zs($e,I,V,ct),Tt.push($e)}return Tt}function Il(R,I,V,tt){for(var ct=Math.pow(2,tt.z)*rs,mt=[tt.x*rs,tt.y*rs],Tt=[],jt=0,le=R;jt<le.length;jt+=1){for(var we=[],Ue=0,er=le[jt];Ue<er.length;Ue+=1){var $e=er[Ue],br=[$e.x+mt[0],$e.y+mt[1]];Ll(I,br),we.push(br)}Tt.push(we)}if(I[2]-I[0]<=ct/2){!function Rl(R){R[0]=R[1]=1/0,R[2]=R[3]=-1/0}(I);for(var zr=0,ln=Tt;zr<ln.length;zr+=1)for(var Sn=0,mn=ln[zr];Sn<mn.length;Sn+=1)zs(mn[Sn],I,V,ct)}return Tt}var xo=function(I,V){this.type=Dr,this.geojson=I,this.geometries=V};function nl(R){if(R instanceof wi){if("get"===R.name&&1===R.args.length)return!1;if("feature-state"===R.name)return!1;if("has"===R.name&&1===R.args.length)return!1;if("properties"===R.name||"geometry-type"===R.name||"id"===R.name)return!1;if(/^filter-/.test(R.name))return!1}if(R instanceof xo)return!1;var I=!0;return R.eachChild(function(V){I&&!nl(V)&&(I=!1)}),I}function ms(R){if(R instanceof wi&&"feature-state"===R.name)return!1;var I=!0;return R.eachChild(function(V){I&&!ms(V)&&(I=!1)}),I}function Fl(R,I){if(R instanceof wi&&I.indexOf(R.name)>=0)return!1;var V=!0;return R.eachChild(function(tt){V&&!Fl(tt,I)&&(V=!1)}),V}xo.parse=function(I,V){if(2!==I.length)return V.error("'within' expression requires exactly one argument, but found "+(I.length-1)+" instead.");if(Cl(I[1])){var tt=I[1];if("FeatureCollection"===tt.type)for(var ct=0;ct<tt.features.length;++ct){var mt=tt.features[ct].geometry.type;if("Polygon"===mt||"MultiPolygon"===mt)return new xo(tt,tt.features[ct].geometry)}else if("Feature"===tt.type){var Tt=tt.geometry.type;if("Polygon"===Tt||"MultiPolygon"===Tt)return new xo(tt,tt.geometry)}else if("Polygon"===tt.type||"MultiPolygon"===tt.type)return new xo(tt,tt)}return V.error("'within' expression requires valid geojson object that contains polygon geometry type.")},xo.prototype.evaluate=function(I){if(null!=I.geometry()&&null!=I.canonicalID()){if("Point"===I.geometryType())return function vf(R,I){var V=[1/0,1/0,-1/0,-1/0],tt=[1/0,1/0,-1/0,-1/0],ct=R.canonicalID();if("Polygon"===I.type){var mt=ns(I.coordinates,tt,ct),Tt=ql(R.geometry(),V,tt,ct);if(!Dl(V,tt))return!1;for(var jt=0,le=Tt;jt<le.length;jt+=1)if(!_l(le[jt],mt))return!1}if("MultiPolygon"===I.type){var we=ks(I.coordinates,tt,ct),Ue=ql(R.geometry(),V,tt,ct);if(!Dl(V,tt))return!1;for(var er=0,$e=Ue;er<$e.length;er+=1)if(!lf($e[er],we))return!1}return!0}(I,this.geometries);if("LineString"===I.geometryType())return function as(R,I){var V=[1/0,1/0,-1/0,-1/0],tt=[1/0,1/0,-1/0,-1/0],ct=R.canonicalID();if("Polygon"===I.type){var mt=ns(I.coordinates,tt,ct),Tt=Il(R.geometry(),V,tt,ct);if(!Dl(V,tt))return!1;for(var jt=0,le=Tt;jt<le.length;jt+=1)if(!Du(le[jt],mt))return!1}if("MultiPolygon"===I.type){var we=ks(I.coordinates,tt,ct),Ue=Il(R.geometry(),V,tt,ct);if(!Dl(V,tt))return!1;for(var er=0,$e=Ue;er<$e.length;er+=1)if(!hf($e[er],we))return!1}return!0}(I,this.geometries)}return!1},xo.prototype.eachChild=function(){},xo.prototype.outputDefined=function(){return!0},xo.prototype.serialize=function(){return["within",this.geojson]};var lo=function(I,V){this.type=V.type,this.name=I,this.boundExpression=V};lo.parse=function(I,V){if(2!==I.length||"string"!=typeof I[1])return V.error("'var' expression requires exactly one string literal argument.");var tt=I[1];return V.scope.has(tt)?new lo(tt,V.scope.get(tt)):V.error('Unknown variable "'+tt+'". Make sure "'+tt+'" has been bound in an enclosing "let" expression before using it.',1)},lo.prototype.evaluate=function(I){return this.boundExpression.evaluate(I)},lo.prototype.eachChild=function(){},lo.prototype.outputDefined=function(){return!1},lo.prototype.serialize=function(){return["var",this.name]};var is=function(I,V,tt,ct,mt){void 0===V&&(V=[]),void 0===ct&&(ct=new vn),void 0===mt&&(mt=[]),this.registry=I,this.path=V,this.key=V.map(function(Tt){return"["+Tt+"]"}).join(""),this.scope=ct,this.errors=mt,this.expectedType=tt};function tu(R){if(R instanceof lo)return tu(R.boundExpression);if(R instanceof wi&&"error"===R.name)return!1;if(R instanceof Io)return!1;if(R instanceof xo)return!1;var I=R instanceof Xi||R instanceof Fi,V=!0;return R.eachChild(function(tt){V=I?V&&tu(tt):V&&tt instanceof ho}),!!V&&nl(R)&&Fl(R,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function kl(R,I){for(var Tt,V=R.length-1,tt=0,ct=V,mt=0;tt<=ct;)if((Tt=R[mt=Math.floor((tt+ct)/2)])<=I){if(mt===V||I<R[mt+1])return mt;tt=mt+1}else{if(!(Tt>I))throw new bi("Input is not a number.");ct=mt-1}return 0}is.prototype.parse=function(I,V,tt,ct,mt){return void 0===mt&&(mt={}),V?this.concat(V,tt,ct)._parse(I,mt):this._parse(I,mt)},is.prototype._parse=function(I,V){function tt(we,Ue,er){return"assert"===er?new Fi(Ue,[we]):"coerce"===er?new Xi(Ue,[we]):we}if((null===I||"string"==typeof I||"boolean"==typeof I||"number"==typeof I)&&(I=["literal",I]),Array.isArray(I)){if(0===I.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ct=I[0];if("string"!=typeof ct)return this.error("Expression name must be a string, but found "+typeof ct+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var mt=this.registry[ct];if(mt){var Tt=mt.parse(I,this);if(!Tt)return null;if(this.expectedType){var jt=this.expectedType,le=Tt.type;if("string"!==jt.kind&&"number"!==jt.kind&&"boolean"!==jt.kind&&"object"!==jt.kind&&"array"!==jt.kind||"value"!==le.kind)if("color"!==jt.kind&&"formatted"!==jt.kind&&"resolvedImage"!==jt.kind||"value"!==le.kind&&"string"!==le.kind){if(this.checkSubtype(jt,le))return null}else Tt=tt(Tt,jt,V.typeAnnotation||"coerce");else Tt=tt(Tt,jt,V.typeAnnotation||"assert")}if(!(Tt instanceof ho)&&"resolvedImage"!==Tt.type.kind&&tu(Tt)){var ye=new no;try{Tt=new ho(Tt.type,Tt.evaluate(ye))}catch(we){return this.error(we.message),null}}return Tt}return this.error('Unknown expression "'+ct+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===I?"'undefined' value invalid. Use null instead.":"object"==typeof I?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof I+" instead.")},is.prototype.concat=function(I,V,tt){var ct="number"==typeof I?this.path.concat(I):this.path,mt=tt?this.scope.concat(tt):this.scope;return new is(this.registry,ct,V||null,mt,this.errors)},is.prototype.error=function(I){for(var V=[],tt=arguments.length-1;tt-- >0;)V[tt]=arguments[tt+1];var ct=""+this.key+V.map(function(mt){return"["+mt+"]"}).join("");this.errors.push(new xn(ct,I))},is.prototype.checkSubtype=function(I,V){var tt=qi(I,V);return tt&&this.error(tt),tt};var bo=function(I,V,tt){this.type=I,this.input=V,this.labels=[],this.outputs=[];for(var ct=0,mt=tt;ct<mt.length;ct+=1){var Tt=mt[ct],le=Tt[1];this.labels.push(Tt[0]),this.outputs.push(le)}};function Pi(R,I,V){return R*(1-V)+I*V}bo.parse=function(I,V){if(I.length-1<4)return V.error("Expected at least 4 arguments, but found only "+(I.length-1)+".");if((I.length-1)%2!=0)return V.error("Expected an even number of arguments.");var tt=V.parse(I[1],1,Er);if(!tt)return null;var ct=[],mt=null;V.expectedType&&"value"!==V.expectedType.kind&&(mt=V.expectedType);for(var Tt=1;Tt<I.length;Tt+=2){var jt=1===Tt?-1/0:I[Tt],le=I[Tt+1],ye=Tt,we=Tt+1;if("number"!=typeof jt)return V.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ye);if(ct.length&&ct[ct.length-1][0]>=jt)return V.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ye);var Ue=V.parse(le,we,mt);if(!Ue)return null;mt=mt||Ue.type,ct.push([jt,Ue])}return new bo(mt,tt,ct)},bo.prototype.evaluate=function(I){var V=this.labels,tt=this.outputs;if(1===V.length)return tt[0].evaluate(I);var ct=this.input.evaluate(I);if(ct<=V[0])return tt[0].evaluate(I);var mt=V.length;return ct>=V[mt-1]?tt[mt-1].evaluate(I):tt[kl(V,ct)].evaluate(I)},bo.prototype.eachChild=function(I){I(this.input);for(var V=0,tt=this.outputs;V<tt.length;V+=1)I(tt[V])},bo.prototype.outputDefined=function(){return this.outputs.every(function(I){return I.outputDefined()})},bo.prototype.serialize=function(){for(var I=["step",this.input.serialize()],V=0;V<this.labels.length;V++)V>0&&I.push(this.labels[V]),I.push(this.outputs[V].serialize());return I};var Os=Object.freeze({__proto__:null,number:Pi,color:function eu(R,I,V){return new Ga(Pi(R.r,I.r,V),Pi(R.g,I.g,V),Pi(R.b,I.b,V),Pi(R.a,I.a,V))},array:function ru(R,I,V){return R.map(function(tt,ct){return Pi(tt,I[ct],V)})}}),Iu=4/29,Bs=6/29,Zo=3*Bs*Bs,Fo=Math.PI/180,au=180/Math.PI;function iu(R){return R>.008856451679035631?Math.pow(R,.3333333333333333):R/Zo+Iu}function ou(R){return R>Bs?R*R*R:Zo*(R-Iu)}function al(R){return 255*(R<=.0031308?12.92*R:1.055*Math.pow(R,.4166666666666667)-.055)}function Ol(R){return(R/=255)<=.04045?R/12.92:Math.pow((R+.055)/1.055,2.4)}function Fu(R){var I=Ol(R.r),V=Ol(R.g),tt=Ol(R.b),ct=iu((.4124564*I+.3575761*V+.1804375*tt)/.95047),mt=iu((.2126729*I+.7151522*V+.072175*tt)/1);return{l:116*mt-16,a:500*(ct-mt),b:200*(mt-iu((.0193339*I+.119192*V+.9503041*tt)/1.08883)),alpha:R.a}}function il(R){var I=(R.l+16)/116,V=isNaN(R.a)?I:I+R.a/500,tt=isNaN(R.b)?I:I-R.b/200;return I=1*ou(I),V=.95047*ou(V),tt=1.08883*ou(tt),new Ga(al(3.2404542*V-1.5371385*I-.4985314*tt),al(-.969266*V+1.8760108*I+.041556*tt),al(.0556434*V-.2040259*I+1.0572252*tt),R.alpha)}function Ns(R,I,V){var tt=I-R;return R+V*(tt>180||tt<-180?tt-360*Math.round(tt/360):tt)}var uo={forward:Fu,reverse:il,interpolate:function ku(R,I,V){return{l:Pi(R.l,I.l,V),a:Pi(R.a,I.a,V),b:Pi(R.b,I.b,V),alpha:Pi(R.alpha,I.alpha,V)}}},Us={forward:function zu(R){var I=Fu(R),V=I.l,tt=I.a,ct=I.b,mt=Math.atan2(ct,tt)*au;return{h:mt<0?mt+360:mt,c:Math.sqrt(tt*tt+ct*ct),l:V,alpha:R.a}},reverse:function hi(R){var I=R.h*Fo,V=R.c;return il({l:R.l,a:Math.cos(I)*V,b:Math.sin(I)*V,alpha:R.alpha})},interpolate:function bs(R,I,V){return{h:Ns(R.h,I.h,V),c:Pi(R.c,I.c,V),l:Pi(R.l,I.l,V),alpha:Pi(R.alpha,I.alpha,V)}}},Ou=Object.freeze({__proto__:null,lab:uo,hcl:Us}),ki=function(I,V,tt,ct,mt){this.type=I,this.operator=V,this.interpolation=tt,this.input=ct,this.labels=[],this.outputs=[];for(var Tt=0,jt=mt;Tt<jt.length;Tt+=1){var le=jt[Tt],we=le[1];this.labels.push(le[0]),this.outputs.push(we)}};function ws(R,I,V,tt){var ct=tt-V,mt=R-V;return 0===ct?0:1===I?mt/ct:(Math.pow(I,mt)-1)/(Math.pow(I,ct)-1)}ki.interpolationFactor=function(I,V,tt,ct){var mt=0;if("exponential"===I.name)mt=ws(V,I.base,tt,ct);else if("linear"===I.name)mt=ws(V,1,tt,ct);else if("cubic-bezier"===I.name){var Tt=I.controlPoints;mt=new u(Tt[0],Tt[1],Tt[2],Tt[3]).solve(ws(V,1,tt,ct))}return mt},ki.parse=function(I,V){var tt=I[0],ct=I[1],mt=I[2],Tt=I.slice(3);if(!Array.isArray(ct)||0===ct.length)return V.error("Expected an interpolation type expression.",1);if("linear"===ct[0])ct={name:"linear"};else if("exponential"===ct[0]){var jt=ct[1];if("number"!=typeof jt)return V.error("Exponential interpolation requires a numeric base.",1,1);ct={name:"exponential",base:jt}}else{if("cubic-bezier"!==ct[0])return V.error("Unknown interpolation type "+String(ct[0]),1,0);var le=ct.slice(1);if(4!==le.length||le.some(function(qr){return"number"!=typeof qr||qr<0||qr>1}))return V.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ct={name:"cubic-bezier",controlPoints:le}}if(I.length-1<4)return V.error("Expected at least 4 arguments, but found only "+(I.length-1)+".");if((I.length-1)%2!=0)return V.error("Expected an even number of arguments.");if(!(mt=V.parse(mt,2,Er)))return null;var ye=[],we=null;"interpolate-hcl"===tt||"interpolate-lab"===tt?we=Ve:V.expectedType&&"value"!==V.expectedType.kind&&(we=V.expectedType);for(var Ue=0;Ue<Tt.length;Ue+=2){var er=Tt[Ue],$e=Tt[Ue+1],br=Ue+3,zr=Ue+4;if("number"!=typeof er)return V.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',br);if(ye.length&&ye[ye.length-1][0]>=er)return V.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',br);var ln=V.parse($e,zr,we);if(!ln)return null;we=we||ln.type,ye.push([er,ln])}return"number"===we.kind||"color"===we.kind||"array"===we.kind&&"number"===we.itemType.kind&&"number"==typeof we.N?new ki(we,tt,ct,mt,ye):V.error("Type "+fa(we)+" is not interpolatable.")},ki.prototype.evaluate=function(I){var V=this.labels,tt=this.outputs;if(1===V.length)return tt[0].evaluate(I);var ct=this.input.evaluate(I);if(ct<=V[0])return tt[0].evaluate(I);var mt=V.length;if(ct>=V[mt-1])return tt[mt-1].evaluate(I);var Tt=kl(V,ct),ye=ki.interpolationFactor(this.interpolation,ct,V[Tt],V[Tt+1]),we=tt[Tt].evaluate(I),Ue=tt[Tt+1].evaluate(I);return"interpolate"===this.operator?Os[this.type.kind.toLowerCase()](we,Ue,ye):"interpolate-hcl"===this.operator?Us.reverse(Us.interpolate(Us.forward(we),Us.forward(Ue),ye)):uo.reverse(uo.interpolate(uo.forward(we),uo.forward(Ue),ye))},ki.prototype.eachChild=function(I){I(this.input);for(var V=0,tt=this.outputs;V<tt.length;V+=1)I(tt[V])},ki.prototype.outputDefined=function(){return this.outputs.every(function(I){return I.outputDefined()})},ki.prototype.serialize=function(){var I;I="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var V=[this.operator,I,this.input.serialize()],tt=0;tt<this.labels.length;tt++)V.push(this.labels[tt],this.outputs[tt].serialize());return V};var ko=function(I,V){this.type=I,this.args=V};ko.parse=function(I,V){if(I.length<2)return V.error("Expectected at least one argument.");var tt=null,ct=V.expectedType;ct&&"value"!==ct.kind&&(tt=ct);for(var mt=[],Tt=0,jt=I.slice(1);Tt<jt.length;Tt+=1){var ye=V.parse(jt[Tt],1+mt.length,tt,void 0,{typeAnnotation:"omit"});if(!ye)return null;tt=tt||ye.type,mt.push(ye)}var we=ct&&mt.some(function(Ue){return qi(ct,Ue.type)});return new ko(we?ir:tt,mt)},ko.prototype.evaluate=function(I){for(var ct,V=null,tt=0,mt=0,Tt=this.args;mt<Tt.length&&(tt++,(V=Tt[mt].evaluate(I))&&V instanceof ro&&!V.available&&(ct||(ct=V.name),V=null,tt===this.args.length&&(V=ct)),null===V);mt+=1);return V},ko.prototype.eachChild=function(I){this.args.forEach(I)},ko.prototype.outputDefined=function(){return this.args.every(function(I){return I.outputDefined()})},ko.prototype.serialize=function(){var I=["coalesce"];return this.eachChild(function(V){I.push(V.serialize())}),I};var wo=function(I,V){this.type=V.type,this.bindings=[].concat(I),this.result=V};wo.prototype.evaluate=function(I){return this.result.evaluate(I)},wo.prototype.eachChild=function(I){for(var V=0,tt=this.bindings;V<tt.length;V+=1)I(tt[V][1]);I(this.result)},wo.parse=function(I,V){if(I.length<4)return V.error("Expected at least 3 arguments, but found "+(I.length-1)+" instead.");for(var tt=[],ct=1;ct<I.length-1;ct+=2){var mt=I[ct];if("string"!=typeof mt)return V.error("Expected string, but found "+typeof mt+" instead.",ct);if(/[^a-zA-Z0-9_]/.test(mt))return V.error("Variable names must contain only alphanumeric characters or '_'.",ct);var Tt=V.parse(I[ct+1],ct+1);if(!Tt)return null;tt.push([mt,Tt])}var jt=V.parse(I[I.length-1],I.length-1,V.expectedType,tt);return jt?new wo(tt,jt):null},wo.prototype.outputDefined=function(){return this.result.outputDefined()},wo.prototype.serialize=function(){for(var I=["let"],V=0,tt=this.bindings;V<tt.length;V+=1){var ct=tt[V];I.push(ct[0],ct[1].serialize())}return I.push(this.result.serialize()),I};var Xo=function(I,V,tt){this.type=I,this.index=V,this.input=tt};Xo.parse=function(I,V){if(3!==I.length)return V.error("Expected 2 arguments, but found "+(I.length-1)+" instead.");var tt=V.parse(I[1],1,Er),ct=V.parse(I[2],2,$n(V.expectedType||ir));return tt&&ct?new Xo(ct.type.itemType,tt,ct):null},Xo.prototype.evaluate=function(I){var V=this.index.evaluate(I),tt=this.input.evaluate(I);if(V<0)throw new bi("Array index out of bounds: "+V+" < 0.");if(V>=tt.length)throw new bi("Array index out of bounds: "+V+" > "+(tt.length-1)+".");if(V!==Math.floor(V))throw new bi("Array index must be an integer, but found "+V+" instead.");return tt[V]},Xo.prototype.eachChild=function(I){I(this.index),I(this.input)},Xo.prototype.outputDefined=function(){return!1},Xo.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var jo=function(I,V){this.type=Dr,this.needle=I,this.haystack=V};jo.parse=function(I,V){if(3!==I.length)return V.error("Expected 2 arguments, but found "+(I.length-1)+" instead.");var tt=V.parse(I[1],1,ir),ct=V.parse(I[2],2,ir);return tt&&ct?to(tt.type,[Dr,He,Er,Lr,ir])?new jo(tt,ct):V.error("Expected first argument to be of type boolean, string, number or null, but found "+fa(tt.type)+" instead"):null},jo.prototype.evaluate=function(I){var V=this.needle.evaluate(I),tt=this.haystack.evaluate(I);if(!tt)return!1;if(!eo(V,["boolean","string","number","null"]))throw new bi("Expected first argument to be of type boolean, string, number or null, but found "+fa(Li(V))+" instead.");if(!eo(tt,["string","array"]))throw new bi("Expected second argument to be of type array or string, but found "+fa(Li(tt))+" instead.");return tt.indexOf(V)>=0},jo.prototype.eachChild=function(I){I(this.needle),I(this.haystack)},jo.prototype.outputDefined=function(){return!0},jo.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var zo=function(I,V,tt){this.type=Er,this.needle=I,this.haystack=V,this.fromIndex=tt};zo.parse=function(I,V){if(I.length<=2||I.length>=5)return V.error("Expected 3 or 4 arguments, but found "+(I.length-1)+" instead.");var tt=V.parse(I[1],1,ir),ct=V.parse(I[2],2,ir);if(!tt||!ct)return null;if(!to(tt.type,[Dr,He,Er,Lr,ir]))return V.error("Expected first argument to be of type boolean, string, number or null, but found "+fa(tt.type)+" instead");if(4===I.length){var mt=V.parse(I[3],3,Er);return mt?new zo(tt,ct,mt):null}return new zo(tt,ct)},zo.prototype.evaluate=function(I){var V=this.needle.evaluate(I),tt=this.haystack.evaluate(I);if(!eo(V,["boolean","string","number","null"]))throw new bi("Expected first argument to be of type boolean, string, number or null, but found "+fa(Li(V))+" instead.");if(!eo(tt,["string","array"]))throw new bi("Expected second argument to be of type array or string, but found "+fa(Li(tt))+" instead.");if(this.fromIndex){var ct=this.fromIndex.evaluate(I);return tt.indexOf(V,ct)}return tt.indexOf(V)},zo.prototype.eachChild=function(I){I(this.needle),I(this.haystack),this.fromIndex&&I(this.fromIndex)},zo.prototype.outputDefined=function(){return!1},zo.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var I=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),I]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var os=function(I,V,tt,ct,mt,Tt){this.inputType=I,this.type=V,this.input=tt,this.cases=ct,this.outputs=mt,this.otherwise=Tt};os.parse=function(I,V){if(I.length<5)return V.error("Expected at least 4 arguments, but found only "+(I.length-1)+".");if(I.length%2!=1)return V.error("Expected an even number of arguments.");var tt,ct;V.expectedType&&"value"!==V.expectedType.kind&&(ct=V.expectedType);for(var mt={},Tt=[],jt=2;jt<I.length-1;jt+=2){var le=I[jt],ye=I[jt+1];Array.isArray(le)||(le=[le]);var we=V.concat(jt);if(0===le.length)return we.error("Expected at least one branch label.");for(var Ue=0,er=le;Ue<er.length;Ue+=1){var $e=er[Ue];if("number"!=typeof $e&&"string"!=typeof $e)return we.error("Branch labels must be numbers or strings.");if("number"==typeof $e&&Math.abs($e)>Number.MAX_SAFE_INTEGER)return we.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof $e&&Math.floor($e)!==$e)return we.error("Numeric branch labels must be integer values.");if(tt){if(we.checkSubtype(tt,Li($e)))return null}else tt=Li($e);if(void 0!==mt[String($e)])return we.error("Branch labels must be unique.");mt[String($e)]=Tt.length}var br=V.parse(ye,jt,ct);if(!br)return null;ct=ct||br.type,Tt.push(br)}var zr=V.parse(I[1],1,ir);if(!zr)return null;var ln=V.parse(I[I.length-1],I.length-1,ct);return!ln||"value"!==zr.type.kind&&V.concat(1).checkSubtype(tt,zr.type)?null:new os(tt,ct,zr,mt,Tt,ln)},os.prototype.evaluate=function(I){var V=this.input.evaluate(I);return(Li(V)===this.inputType&&this.outputs[this.cases[V]]||this.otherwise).evaluate(I)},os.prototype.eachChild=function(I){I(this.input),this.outputs.forEach(I),I(this.otherwise)},os.prototype.outputDefined=function(){return this.outputs.every(function(I){return I.outputDefined()})&&this.otherwise.outputDefined()},os.prototype.serialize=function(){for(var I=this,V=["match",this.input.serialize()],ct=[],mt={},Tt=0,jt=Object.keys(this.cases).sort();Tt<jt.length;Tt+=1){var le=jt[Tt];void 0===(ye=mt[this.cases[le]])?(mt[this.cases[le]]=ct.length,ct.push([this.cases[le],[le]])):ct[ye][1].push(le)}for(var we=function(zr){return"number"===I.inputType.kind?Number(zr):zr},Ue=0,er=ct;Ue<er.length;Ue+=1){var $e=er[Ue],ye=$e[0],br=$e[1];V.push(1===br.length?we(br[0]):br.map(we)),V.push(this.outputs[outputIndex$1].serialize())}return V.push(this.otherwise.serialize()),V};var ss=function(I,V,tt){this.type=I,this.branches=V,this.otherwise=tt};ss.parse=function(I,V){if(I.length<4)return V.error("Expected at least 3 arguments, but found only "+(I.length-1)+".");if(I.length%2!=0)return V.error("Expected an odd number of arguments.");var tt;V.expectedType&&"value"!==V.expectedType.kind&&(tt=V.expectedType);for(var ct=[],mt=1;mt<I.length-1;mt+=2){var Tt=V.parse(I[mt],mt,Dr);if(!Tt)return null;var jt=V.parse(I[mt+1],mt+1,tt);if(!jt)return null;ct.push([Tt,jt]),tt=tt||jt.type}var le=V.parse(I[I.length-1],I.length-1,tt);return le?new ss(tt,ct,le):null},ss.prototype.evaluate=function(I){for(var V=0,tt=this.branches;V<tt.length;V+=1){var ct=tt[V],Tt=ct[1];if(ct[0].evaluate(I))return Tt.evaluate(I)}return this.otherwise.evaluate(I)},ss.prototype.eachChild=function(I){for(var V=0,tt=this.branches;V<tt.length;V+=1){var ct=tt[V],Tt=ct[1];I(ct[0]),I(Tt)}I(this.otherwise)},ss.prototype.outputDefined=function(){return this.branches.every(function(I){return I[1].outputDefined()})&&this.otherwise.outputDefined()},ss.prototype.serialize=function(){var I=["case"];return this.eachChild(function(V){I.push(V.serialize())}),I};var To=function(I,V,tt,ct){this.type=I,this.input=V,this.beginIndex=tt,this.endIndex=ct};function su(R,I){return"=="===R||"!="===R?"boolean"===I.kind||"string"===I.kind||"number"===I.kind||"null"===I.kind||"value"===I.kind:"string"===I.kind||"number"===I.kind||"value"===I.kind}function Bu(R,I,V,tt){return 0===tt.compare(I,V)}function ls(R,I,V){var tt="=="!==R&&"!="!==R;return function(){function ct(mt,Tt,jt){this.type=Dr,this.lhs=mt,this.rhs=Tt,this.collator=jt,this.hasUntypedArgument="value"===mt.type.kind||"value"===Tt.type.kind}return ct.parse=function(Tt,jt){if(3!==Tt.length&&4!==Tt.length)return jt.error("Expected two or three arguments.");var le=Tt[0],ye=jt.parse(Tt[1],1,ir);if(!ye)return null;if(!su(le,ye.type))return jt.concat(1).error('"'+le+"\" comparisons are not supported for type '"+fa(ye.type)+"'.");var we=jt.parse(Tt[2],2,ir);if(!we)return null;if(!su(le,we.type))return jt.concat(2).error('"'+le+"\" comparisons are not supported for type '"+fa(we.type)+"'.");if(ye.type.kind!==we.type.kind&&"value"!==ye.type.kind&&"value"!==we.type.kind)return jt.error("Cannot compare types '"+fa(ye.type)+"' and '"+fa(we.type)+"'.");tt&&("value"===ye.type.kind&&"value"!==we.type.kind?ye=new Fi(we.type,[ye]):"value"!==ye.type.kind&&"value"===we.type.kind&&(we=new Fi(ye.type,[we])));var Ue=null;if(4===Tt.length){if("string"!==ye.type.kind&&"string"!==we.type.kind&&"value"!==ye.type.kind&&"value"!==we.type.kind)return jt.error("Cannot use collator to compare non-string types.");if(!(Ue=jt.parse(Tt[3],3,yn)))return null}return new ct(ye,we,Ue)},ct.prototype.evaluate=function(Tt){var jt=this.lhs.evaluate(Tt),le=this.rhs.evaluate(Tt);if(tt&&this.hasUntypedArgument){var ye=Li(jt),we=Li(le);if(ye.kind!==we.kind||"string"!==ye.kind&&"number"!==ye.kind)throw new bi('Expected arguments for "'+R+'" to be (string, string) or (number, number), but found ('+ye.kind+", "+we.kind+") instead.")}if(this.collator&&!tt&&this.hasUntypedArgument){var Ue=Li(jt),er=Li(le);if("string"!==Ue.kind||"string"!==er.kind)return I(Tt,jt,le)}return this.collator?V(Tt,jt,le,this.collator.evaluate(Tt)):I(Tt,jt,le)},ct.prototype.eachChild=function(Tt){Tt(this.lhs),Tt(this.rhs),this.collator&&Tt(this.collator)},ct.prototype.outputDefined=function(){return!0},ct.prototype.serialize=function(){var Tt=[R];return this.eachChild(function(jt){Tt.push(jt.serialize())}),Tt},ct}()}To.parse=function(I,V){if(I.length<=2||I.length>=5)return V.error("Expected 3 or 4 arguments, but found "+(I.length-1)+" instead.");var tt=V.parse(I[1],1,ir),ct=V.parse(I[2],2,Er);if(!tt||!ct)return null;if(!to(tt.type,[$n(ir),He,ir]))return V.error("Expected first argument to be of type array or string, but found "+fa(tt.type)+" instead");if(4===I.length){var mt=V.parse(I[3],3,Er);return mt?new To(tt.type,tt,ct,mt):null}return new To(tt.type,tt,ct)},To.prototype.evaluate=function(I){var V=this.input.evaluate(I),tt=this.beginIndex.evaluate(I);if(!eo(V,["string","array"]))throw new bi("Expected first argument to be of type array or string, but found "+fa(Li(V))+" instead.");if(this.endIndex){var ct=this.endIndex.evaluate(I);return V.slice(tt,ct)}return V.slice(tt)},To.prototype.eachChild=function(I){I(this.input),I(this.beginIndex),this.endIndex&&I(this.endIndex)},To.prototype.outputDefined=function(){return!1},To.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var I=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),I]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var ol=ls("==",function lu(R,I,V){return I===V},Bu),Hs=ls("!=",function Bl(R,I,V){return I!==V},function Nu(R,I,V,tt){return!Bu(0,I,V,tt)}),fu=ls("<",function Vs(R,I,V){return I<V},function Uu(R,I,V,tt){return tt.compare(I,V)<0}),cu=ls(">",function uu(R,I,V){return I>V},function Nl(R,I,V,tt){return tt.compare(I,V)>0}),hu=ls("<=",function df(R,I,V){return I<=V},function Ni(R,I,V,tt){return tt.compare(I,V)<=0}),gf=ls(">=",function pf(R,I,V){return I>=V},function vo(R,I,V,tt){return tt.compare(I,V)>=0}),us=function(I,V,tt,ct,mt){this.type=He,this.number=I,this.locale=V,this.currency=tt,this.minFractionDigits=ct,this.maxFractionDigits=mt};us.parse=function(I,V){if(3!==I.length)return V.error("Expected two arguments.");var tt=V.parse(I[1],1,Er);if(!tt)return null;var ct=I[2];if("object"!=typeof ct||Array.isArray(ct))return V.error("NumberFormat options argument must be an object.");var mt=null;if(ct.locale&&!(mt=V.parse(ct.locale,1,He)))return null;var Tt=null;if(ct.currency&&!(Tt=V.parse(ct.currency,1,He)))return null;var jt=null;if(ct["min-fraction-digits"]&&!(jt=V.parse(ct["min-fraction-digits"],1,Er)))return null;var le=null;return ct["max-fraction-digits"]&&!(le=V.parse(ct["max-fraction-digits"],1,Er))?null:new us(tt,mt,Tt,jt,le)},us.prototype.evaluate=function(I){return new Intl.NumberFormat(this.locale?this.locale.evaluate(I):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(I):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(I):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(I):void 0}).format(this.number.evaluate(I))},us.prototype.eachChild=function(I){I(this.number),this.locale&&I(this.locale),this.currency&&I(this.currency),this.minFractionDigits&&I(this.minFractionDigits),this.maxFractionDigits&&I(this.maxFractionDigits)},us.prototype.outputDefined=function(){return!1},us.prototype.serialize=function(){var I={};return this.locale&&(I.locale=this.locale.serialize()),this.currency&&(I.currency=this.currency.serialize()),this.minFractionDigits&&(I["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(I["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),I]};var fs=function(I){this.type=Er,this.input=I};fs.parse=function(I,V){if(2!==I.length)return V.error("Expected 1 argument, but found "+(I.length-1)+" instead.");var tt=V.parse(I[1],1);return tt?"array"!==tt.type.kind&&"string"!==tt.type.kind&&"value"!==tt.type.kind?V.error("Expected argument of type string or array, but found "+fa(tt.type)+" instead."):new fs(tt):null},fs.prototype.evaluate=function(I){var V=this.input.evaluate(I);if("string"==typeof V)return V.length;if(Array.isArray(V))return V.length;throw new bi("Expected value to be of type string or array, but found "+fa(Li(V))+" instead.")},fs.prototype.eachChild=function(I){I(this.input)},fs.prototype.outputDefined=function(){return!1},fs.prototype.serialize=function(){var I=["length"];return this.eachChild(function(V){I.push(V.serialize())}),I};var zi={"==":ol,"!=":Hs,">":cu,"<":fu,">=":gf,"<=":hu,array:Fi,at:Xo,boolean:Fi,case:ss,coalesce:ko,collator:Io,format:Ro,image:Ui,in:jo,"index-of":zo,interpolate:ki,"interpolate-hcl":ki,"interpolate-lab":ki,length:fs,let:wo,literal:ho,match:os,number:Fi,"number-format":us,object:Fi,slice:To,step:bo,string:Fi,"to-boolean":Xi,"to-color":Xi,"to-number":Xi,"to-string":Xi,var:lo,within:xo};function sl(R,I){var V=I[0],tt=I[1],ct=I[2],mt=I[3];V=V.evaluate(R),tt=tt.evaluate(R),ct=ct.evaluate(R);var Tt=mt?mt.evaluate(R):1,jt=tl(V,tt,ct,Tt);if(jt)throw new bi(jt);return new Ga(V/255*Tt,tt/255*Tt,ct/255*Tt,Tt)}function Ul(R,I){return R in I}function Ts(R,I){var V=I[R];return void 0===V?null:V}function cs(R){return{type:R}}function ll(R){return{result:"success",value:R}}function Ko(R){return{result:"error",value:R}}function Jo(R){return"data-driven"===R["property-type"]||"cross-faded-data-driven"===R["property-type"]}function ul(R){return!!R.expression&&R.expression.parameters.indexOf("zoom")>-1}function As(R){return!!R.expression&&R.expression.interpolated}function ei(R){return R instanceof Number?"number":R instanceof String?"string":R instanceof Boolean?"boolean":Array.isArray(R)?"array":null===R?"null":typeof R}function Gs(R){return"object"==typeof R&&null!==R&&!Array.isArray(R)}function vu(R){return R}function Vl(R,I){var jt,le,ye,V="color"===I.type,tt=R.stops&&"object"==typeof R.stops[0][0],mt=tt||!(tt||void 0!==R.property),Tt=R.type||(As(I)?"exponential":"interval");if(V&&((R=fn({},R)).stops&&(R.stops=R.stops.map(function(Yn){return[Yn[0],Ga.parse(Yn[1])]})),R.default=Ga.parse(R.default?R.default:I.default)),R.colorSpace&&"rgb"!==R.colorSpace&&!Ou[R.colorSpace])throw new Error("Unknown color space: "+R.colorSpace);if("exponential"===Tt)jt=fl;else if("interval"===Tt)jt=du;else if("categorical"===Tt){jt=Hu,le=Object.create(null);for(var we=0,Ue=R.stops;we<Ue.length;we+=1){var er=Ue[we];le[er[0]]=er[1]}ye=typeof R.stops[0][0]}else{if("identity"!==Tt)throw new Error('Unknown function type "'+Tt+'"');jt=Hl}if(tt){for(var $e={},br=[],zr=0;zr<R.stops.length;zr++){var ln=R.stops[zr],qr=ln[0].zoom;void 0===$e[qr]&&($e[qr]={zoom:qr,type:R.type,property:R.property,default:R.default,stops:[]},br.push(qr)),$e[qr].stops.push([ln[0].value,ln[1]])}for(var Sn=[],mn=0,An=br;mn<An.length;mn+=1){var Pn=An[mn];Sn.push([$e[Pn].zoom,Vl($e[Pn],I)])}var On={name:"linear"};return{kind:"composite",interpolationType:On,interpolationFactor:ki.interpolationFactor.bind(void 0,On),zoomStops:Sn.map(function(Yn){return Yn[0]}),evaluate:function(wa,la){var va=wa.zoom;return fl({stops:Sn,base:R.base},I,va).evaluate(va,la)}}}if(mt){var jn="exponential"===Tt?{name:"exponential",base:void 0!==R.base?R.base:1}:null;return{kind:"camera",interpolationType:jn,interpolationFactor:ki.interpolationFactor.bind(void 0,jn),zoomStops:R.stops.map(function(Yn){return Yn[0]}),evaluate:function(Yn){return jt(R,I,Yn.zoom,le,ye)}}}return{kind:"source",evaluate:function(wa,la){var va=la&&la.properties?la.properties[R.property]:void 0;return void 0===va?Ms(R.default,I.default):jt(R,I,va,le,ye)}}}function Ms(R,I,V){return void 0!==R?R:void 0!==I?I:void 0!==V?V:void 0}function Hu(R,I,V,tt,ct){return Ms(typeof V===ct?tt[V]:void 0,R.default,I.default)}function du(R,I,V){if("number"!==ei(V))return Ms(R.default,I.default);var tt=R.stops.length;if(1===tt||V<=R.stops[0][0])return R.stops[0][1];if(V>=R.stops[tt-1][0])return R.stops[tt-1][1];var ct=kl(R.stops.map(function(mt){return mt[0]}),V);return R.stops[ct][1]}function fl(R,I,V){var tt=void 0!==R.base?R.base:1;if("number"!==ei(V))return Ms(R.default,I.default);var ct=R.stops.length;if(1===ct||V<=R.stops[0][0])return R.stops[0][1];if(V>=R.stops[ct-1][0])return R.stops[ct-1][1];var mt=kl(R.stops.map(function(Ue){return Ue[0]}),V),Tt=function Gu(R,I,V,tt){var ct=tt-V,mt=R-V;return 0===ct?0:1===I?mt/ct:(Math.pow(I,mt)-1)/(Math.pow(I,ct)-1)}(V,tt,R.stops[mt][0],R.stops[mt+1][0]),jt=R.stops[mt][1],le=R.stops[mt+1][1],ye=Os[I.type]||vu;if(R.colorSpace&&"rgb"!==R.colorSpace){var we=Ou[R.colorSpace];ye=function(Ue,er){return we.reverse(we.interpolate(we.forward(Ue),we.forward(er),Tt))}}return"function"==typeof jt.evaluate?{evaluate:function(){for(var er=[],$e=arguments.length;$e--;)er[$e]=arguments[$e];var br=jt.evaluate.apply(void 0,er),zr=le.evaluate.apply(void 0,er);if(void 0!==br&&void 0!==zr)return ye(br,zr,Tt)}}:ye(jt,le,Tt)}function Hl(R,I,V){return"color"===I.type?V=Ga.parse(V):"formatted"===I.type?V=Ci.fromString(V.toString()):"resolvedImage"===I.type?V=ro.fromString(V.toString()):ei(V)!==I.type&&("enum"!==I.type||!I.values[V])&&(V=void 0),Ms(V,R.default,I.default)}wi.register(zi,{error:[{kind:"error"},[He],function(R,I){throw new bi(I[0].evaluate(R))}],typeof:[He,[ir],function(R,I){return fa(Li(I[0].evaluate(R)))}],"to-rgba":[$n(Er,4),[Ve],function(R,I){return I[0].evaluate(R).toArray()}],rgb:[Ve,[Er,Er,Er],sl],rgba:[Ve,[Er,Er,Er,Er],sl],has:{type:Dr,overloads:[[[He],function(R,I){return Ul(I[0].evaluate(R),R.properties())}],[[He,je],function(R,I){var tt=I[1];return Ul(I[0].evaluate(R),tt.evaluate(R))}]]},get:{type:ir,overloads:[[[He],function(R,I){return Ts(I[0].evaluate(R),R.properties())}],[[He,je],function(R,I){var tt=I[1];return Ts(I[0].evaluate(R),tt.evaluate(R))}]]},"feature-state":[ir,[He],function(R,I){return Ts(I[0].evaluate(R),R.featureState||{})}],properties:[je,[],function(R){return R.properties()}],"geometry-type":[He,[],function(R){return R.geometryType()}],id:[ir,[],function(R){return R.id()}],zoom:[Er,[],function(R){return R.globals.zoom}],"heatmap-density":[Er,[],function(R){return R.globals.heatmapDensity||0}],"line-progress":[Er,[],function(R){return R.globals.lineProgress||0}],accumulated:[ir,[],function(R){return void 0===R.globals.accumulated?null:R.globals.accumulated}],"+":[Er,cs(Er),function(R,I){for(var V=0,tt=0,ct=I;tt<ct.length;tt+=1)V+=ct[tt].evaluate(R);return V}],"*":[Er,cs(Er),function(R,I){for(var V=1,tt=0,ct=I;tt<ct.length;tt+=1)V*=ct[tt].evaluate(R);return V}],"-":{type:Er,overloads:[[[Er,Er],function(R,I){var tt=I[1];return I[0].evaluate(R)-tt.evaluate(R)}],[[Er],function(R,I){return-I[0].evaluate(R)}]]},"/":[Er,[Er,Er],function(R,I){var tt=I[1];return I[0].evaluate(R)/tt.evaluate(R)}],"%":[Er,[Er,Er],function(R,I){var tt=I[1];return I[0].evaluate(R)%tt.evaluate(R)}],ln2:[Er,[],function(){return Math.LN2}],pi:[Er,[],function(){return Math.PI}],e:[Er,[],function(){return Math.E}],"^":[Er,[Er,Er],function(R,I){var tt=I[1];return Math.pow(I[0].evaluate(R),tt.evaluate(R))}],sqrt:[Er,[Er],function(R,I){return Math.sqrt(I[0].evaluate(R))}],log10:[Er,[Er],function(R,I){return Math.log(I[0].evaluate(R))/Math.LN10}],ln:[Er,[Er],function(R,I){return Math.log(I[0].evaluate(R))}],log2:[Er,[Er],function(R,I){return Math.log(I[0].evaluate(R))/Math.LN2}],sin:[Er,[Er],function(R,I){return Math.sin(I[0].evaluate(R))}],cos:[Er,[Er],function(R,I){return Math.cos(I[0].evaluate(R))}],tan:[Er,[Er],function(R,I){return Math.tan(I[0].evaluate(R))}],asin:[Er,[Er],function(R,I){return Math.asin(I[0].evaluate(R))}],acos:[Er,[Er],function(R,I){return Math.acos(I[0].evaluate(R))}],atan:[Er,[Er],function(R,I){return Math.atan(I[0].evaluate(R))}],min:[Er,cs(Er),function(R,I){return Math.min.apply(Math,I.map(function(V){return V.evaluate(R)}))}],max:[Er,cs(Er),function(R,I){return Math.max.apply(Math,I.map(function(V){return V.evaluate(R)}))}],abs:[Er,[Er],function(R,I){return Math.abs(I[0].evaluate(R))}],round:[Er,[Er],function(R,I){var tt=I[0].evaluate(R);return tt<0?-Math.round(-tt):Math.round(tt)}],floor:[Er,[Er],function(R,I){return Math.floor(I[0].evaluate(R))}],ceil:[Er,[Er],function(R,I){return Math.ceil(I[0].evaluate(R))}],"filter-==":[Dr,[He,ir],function(R,I){var V=I[0],tt=I[1];return R.properties()[V.value]===tt.value}],"filter-id-==":[Dr,[ir],function(R,I){var V=I[0];return R.id()===V.value}],"filter-type-==":[Dr,[He],function(R,I){var V=I[0];return R.geometryType()===V.value}],"filter-<":[Dr,[He,ir],function(R,I){var V=I[0],tt=I[1],ct=R.properties()[V.value],mt=tt.value;return typeof ct==typeof mt&&ct<mt}],"filter-id-<":[Dr,[ir],function(R,I){var V=I[0],tt=R.id(),ct=V.value;return typeof tt==typeof ct&&tt<ct}],"filter->":[Dr,[He,ir],function(R,I){var V=I[0],tt=I[1],ct=R.properties()[V.value],mt=tt.value;return typeof ct==typeof mt&&ct>mt}],"filter-id->":[Dr,[ir],function(R,I){var V=I[0],tt=R.id(),ct=V.value;return typeof tt==typeof ct&&tt>ct}],"filter-<=":[Dr,[He,ir],function(R,I){var V=I[0],tt=I[1],ct=R.properties()[V.value],mt=tt.value;return typeof ct==typeof mt&&ct<=mt}],"filter-id-<=":[Dr,[ir],function(R,I){var V=I[0],tt=R.id(),ct=V.value;return typeof tt==typeof ct&&tt<=ct}],"filter->=":[Dr,[He,ir],function(R,I){var V=I[0],tt=I[1],ct=R.properties()[V.value],mt=tt.value;return typeof ct==typeof mt&&ct>=mt}],"filter-id->=":[Dr,[ir],function(R,I){var V=I[0],tt=R.id(),ct=V.value;return typeof tt==typeof ct&&tt>=ct}],"filter-has":[Dr,[ir],function(R,I){return I[0].value in R.properties()}],"filter-has-id":[Dr,[],function(R){return null!==R.id()&&void 0!==R.id()}],"filter-type-in":[Dr,[$n(He)],function(R,I){return I[0].value.indexOf(R.geometryType())>=0}],"filter-id-in":[Dr,[$n(ir)],function(R,I){return I[0].value.indexOf(R.id())>=0}],"filter-in-small":[Dr,[He,$n(ir)],function(R,I){var V=I[0];return I[1].value.indexOf(R.properties()[V.value])>=0}],"filter-in-large":[Dr,[He,$n(ir)],function(R,I){var V=I[0],tt=I[1];return function Vu(R,I,V,tt){for(;V<=tt;){var ct=V+tt>>1;if(I[ct]===R)return!0;I[ct]>R?tt=ct-1:V=ct+1}return!1}(R.properties()[V.value],tt.value,0,tt.value.length-1)}],all:{type:Dr,overloads:[[[Dr,Dr],function(R,I){var tt=I[1];return I[0].evaluate(R)&&tt.evaluate(R)}],[cs(Dr),function(R,I){for(var V=0,tt=I;V<tt.length;V+=1)if(!tt[V].evaluate(R))return!1;return!0}]]},any:{type:Dr,overloads:[[[Dr,Dr],function(R,I){var tt=I[1];return I[0].evaluate(R)||tt.evaluate(R)}],[cs(Dr),function(R,I){for(var V=0,tt=I;V<tt.length;V+=1)if(tt[V].evaluate(R))return!0;return!1}]]},"!":[Dr,[Dr],function(R,I){return!I[0].evaluate(R)}],"is-supported-script":[Dr,[He],function(R,I){var tt=R.globals&&R.globals.isSupportedScript;return!tt||tt(I[0].evaluate(R))}],upcase:[He,[He],function(R,I){return I[0].evaluate(R).toUpperCase()}],downcase:[He,[He],function(R,I){return I[0].evaluate(R).toLowerCase()}],concat:[He,cs(ir),function(R,I){return I.map(function(V){return el(V.evaluate(R))}).join("")}],"resolved-locale":[He,[yn],function(R,I){return I[0].evaluate(R).resolvedLocale()}]});var Qo=function(I,V){this.expression=I,this._warningHistory={},this._evaluator=new no,this._defaultValue=V?function Gl(R){return"color"===R.type&&Gs(R.default)?new Ga(0,0,0,0):"color"===R.type?Ga.parse(R.default)||null:void 0===R.default?null:R.default}(V):null,this._enumValues=V&&"enum"===V.type?V.values:null};function cl(R){return Array.isArray(R)&&R.length>0&&"string"==typeof R[0]&&R[0]in zi}function hl(R,I){var V=new is(zi,[],I?function Wu(R){var I={color:Ve,string:He,number:Er,enum:He,boolean:Dr,formatted:Kn,resolvedImage:ea};return"array"===R.type?$n(I[R.value]||ir,R.length):I[R.type]}(I):void 0),tt=V.parse(R,void 0,void 0,void 0,I&&"string"===I.type?{typeAnnotation:"coerce"}:void 0);return tt?ll(new Qo(tt,I)):Ko(V.errors)}Qo.prototype.evaluateWithoutErrorHandling=function(I,V,tt,ct,mt,Tt){return this._evaluator.globals=I,this._evaluator.feature=V,this._evaluator.featureState=tt,this._evaluator.canonical=ct,this._evaluator.availableImages=mt||null,this._evaluator.formattedSection=Tt,this.expression.evaluate(this._evaluator)},Qo.prototype.evaluate=function(I,V,tt,ct,mt,Tt){this._evaluator.globals=I,this._evaluator.feature=V||null,this._evaluator.featureState=tt||null,this._evaluator.canonical=ct,this._evaluator.availableImages=mt||null,this._evaluator.formattedSection=Tt||null;try{var jt=this.expression.evaluate(this._evaluator);if(null==jt||"number"==typeof jt&&jt!=jt)return this._defaultValue;if(this._enumValues&&!(jt in this._enumValues))throw new bi("Expected value to be one of "+Object.keys(this._enumValues).map(function(le){return JSON.stringify(le)}).join(", ")+", but found "+JSON.stringify(jt)+" instead.");return jt}catch(le){return this._warningHistory[le.message]||(this._warningHistory[le.message]=!0,"undefined"!=typeof console&&console.warn(le.message)),this._defaultValue}};var $o=function(I,V){this.kind=I,this._styleExpression=V,this.isStateDependent="constant"!==I&&!ms(V.expression)};$o.prototype.evaluateWithoutErrorHandling=function(I,V,tt,ct,mt,Tt){return this._styleExpression.evaluateWithoutErrorHandling(I,V,tt,ct,mt,Tt)},$o.prototype.evaluate=function(I,V,tt,ct,mt,Tt){return this._styleExpression.evaluate(I,V,tt,ct,mt,Tt)};var Ao=function(I,V,tt,ct){this.kind=I,this.zoomStops=tt,this._styleExpression=V,this.isStateDependent="camera"!==I&&!ms(V.expression),this.interpolationType=ct};function vl(R,I){if("error"===(R=hl(R,I)).result)return R;var V=R.value.expression,tt=nl(V);if(!tt&&!Jo(I))return Ko([new xn("","data expressions not supported")]);var ct=Fl(V,["zoom"]);if(!ct&&!ul(I))return Ko([new xn("","zoom expressions not supported")]);var mt=Ws(V);return mt||ct?mt instanceof xn?Ko([mt]):mt instanceof ki&&!As(I)?Ko([new xn("",'"interpolate" expressions cannot be used with this property')]):ll(mt?new Ao(tt?"camera":"composite",R.value,mt.labels,mt instanceof ki?mt.interpolation:void 0):new $o(tt?"constant":"source",R.value)):Ko([new xn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Ao.prototype.evaluateWithoutErrorHandling=function(I,V,tt,ct,mt,Tt){return this._styleExpression.evaluateWithoutErrorHandling(I,V,tt,ct,mt,Tt)},Ao.prototype.evaluate=function(I,V,tt,ct,mt,Tt){return this._styleExpression.evaluate(I,V,tt,ct,mt,Tt)},Ao.prototype.interpolationFactor=function(I,V,tt){return this.interpolationType?ki.interpolationFactor(this.interpolationType,I,V,tt):0};var hs=function(I,V){this._parameters=I,this._specification=V,fn(this,Vl(this._parameters,this._specification))};function Ws(R){var I=null;if(R instanceof wo)I=Ws(R.result);else if(R instanceof ko)for(var V=0,tt=R.args;V<tt.length&&!(I=Ws(tt[V]));V+=1);else(R instanceof bo||R instanceof ki)&&R.input instanceof wi&&"zoom"===R.input.name&&(I=R);return I instanceof xn||R.eachChild(function(mt){var Tt=Ws(mt);Tt instanceof xn?I=Tt:!I&&Tt?I=new xn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):I&&Tt&&I!==Tt&&(I=new xn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),I}function Ti(R){var I=R.key,V=R.value,tt=R.valueSpec||{},ct=R.objectElementValidators||{},mt=R.style,Tt=R.styleSpec,jt=[],le=ei(V);if("object"!==le)return[new Tr(I,V,"object expected, "+le+" found")];for(var ye in V){var we=ye.split(".")[0],Ue=tt[we]||tt["*"],er=void 0;if(ct[we])er=ct[we];else if(tt[we])er=pr;else if(ct["*"])er=ct["*"];else{if(!tt["*"]){jt.push(new Tr(I,V[ye],'unknown property "'+ye+'"'));continue}er=pr}jt=jt.concat(er({key:(I&&I+".")+ye,value:V[ye],valueSpec:Ue,style:mt,styleSpec:Tt,object:V,objectKey:ye},V))}for(var $e in tt)ct[$e]||tt[$e].required&&void 0===tt[$e].default&&void 0===V[$e]&&jt.push(new Tr(I,V,'missing required property "'+$e+'"'));return jt}function pu(R){var I=R.value,V=R.valueSpec,tt=R.style,ct=R.styleSpec,mt=R.key,Tt=R.arrayElementValidator||pr;if("array"!==ei(I))return[new Tr(mt,I,"array expected, "+ei(I)+" found")];if(V.length&&I.length!==V.length)return[new Tr(mt,I,"array length "+V.length+" expected, length "+I.length+" found")];if(V["min-length"]&&I.length<V["min-length"])return[new Tr(mt,I,"array length at least "+V["min-length"]+" expected, length "+I.length+" found")];var jt={type:V.value,values:V.values};ct.$version<7&&(jt.function=V.function),"object"===ei(V.value)&&(jt=V.value);for(var le=[],ye=0;ye<I.length;ye++)le=le.concat(Tt({array:I,arrayIndex:ye,value:I[ye],valueSpec:jt,style:tt,styleSpec:ct,key:mt+"["+ye+"]"}));return le}function Wl(R){var I=R.key,V=R.value,tt=R.valueSpec,ct=ei(V);return"number"===ct&&V!=V&&(ct="NaN"),"number"!==ct?[new Tr(I,V,"number expected, "+ct+" found")]:"minimum"in tt&&V<tt.minimum?[new Tr(I,V,V+" is less than the minimum value "+tt.minimum)]:"maximum"in tt&&V>tt.maximum?[new Tr(I,V,V+" is greater than the maximum value "+tt.maximum)]:[]}function Ss(R){var tt,mt,Tt,I=R.valueSpec,V=sn(R.value.type),ct={},jt="categorical"!==V&&void 0===R.value.property,le=!jt,ye="array"===ei(R.value.stops)&&"array"===ei(R.value.stops[0])&&"object"===ei(R.value.stops[0][0]),we=Ti({key:R.key,value:R.value,valueSpec:R.styleSpec.function,style:R.style,styleSpec:R.styleSpec,objectElementValidators:{stops:function Ue(zr){if("identity"===V)return[new Tr(zr.key,zr.value,'identity function may not have a "stops" property')];var ln=[],qr=zr.value;return ln=ln.concat(pu({key:zr.key,value:qr,valueSpec:zr.valueSpec,style:zr.style,styleSpec:zr.styleSpec,arrayElementValidator:er})),"array"===ei(qr)&&0===qr.length&&ln.push(new Tr(zr.key,qr,"array must have at least one stop")),ln},default:function br(zr){return pr({key:zr.key,value:zr.value,valueSpec:I,style:zr.style,styleSpec:zr.styleSpec})}}});return"identity"===V&&jt&&we.push(new Tr(R.key,R.value,'missing required property "property"')),"identity"!==V&&!R.value.stops&&we.push(new Tr(R.key,R.value,'missing required property "stops"')),"exponential"===V&&R.valueSpec.expression&&!As(R.valueSpec)&&we.push(new Tr(R.key,R.value,"exponential functions not supported")),R.styleSpec.$version>=8&&(le&&!Jo(R.valueSpec)?we.push(new Tr(R.key,R.value,"property functions not supported")):jt&&!ul(R.valueSpec)&&we.push(new Tr(R.key,R.value,"zoom functions not supported"))),("categorical"===V||ye)&&void 0===R.value.property&&we.push(new Tr(R.key,R.value,'"property" property is required')),we;function er(zr){var ln=[],qr=zr.value,Sn=zr.key;if("array"!==ei(qr))return[new Tr(Sn,qr,"array expected, "+ei(qr)+" found")];if(2!==qr.length)return[new Tr(Sn,qr,"array length 2 expected, length "+qr.length+" found")];if(ye){if("object"!==ei(qr[0]))return[new Tr(Sn,qr,"object expected, "+ei(qr[0])+" found")];if(void 0===qr[0].zoom)return[new Tr(Sn,qr,"object stop key must have zoom")];if(void 0===qr[0].value)return[new Tr(Sn,qr,"object stop key must have value")];if(Tt&&Tt>sn(qr[0].zoom))return[new Tr(Sn,qr[0].zoom,"stop zoom values must appear in ascending order")];sn(qr[0].zoom)!==Tt&&(Tt=sn(qr[0].zoom),mt=void 0,ct={}),ln=ln.concat(Ti({key:Sn+"[0]",value:qr[0],valueSpec:{zoom:{}},style:zr.style,styleSpec:zr.styleSpec,objectElementValidators:{zoom:Wl,value:$e}}))}else ln=ln.concat($e({key:Sn+"[0]",value:qr[0],valueSpec:{},style:zr.style,styleSpec:zr.styleSpec},qr));return cl(En(qr[1]))?ln.concat([new Tr(Sn+"[1]",qr[1],"expressions are not allowed in function stops.")]):ln.concat(pr({key:Sn+"[1]",value:qr[1],valueSpec:I,style:zr.style,styleSpec:zr.styleSpec}))}function $e(zr,ln){var qr=ei(zr.value),Sn=sn(zr.value),mn=null!==zr.value?zr.value:ln;if(tt){if(qr!==tt)return[new Tr(zr.key,mn,qr+" stop domain type must match previous stop domain type "+tt)]}else tt=qr;if("number"!==qr&&"string"!==qr&&"boolean"!==qr)return[new Tr(zr.key,mn,"stop domain value must be a number, string, or boolean")];if("number"!==qr&&"categorical"!==V){var An="number expected, "+qr+" found";return Jo(I)&&void 0===V&&(An+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Tr(zr.key,mn,An)]}return"categorical"!==V||"number"!==qr||isFinite(Sn)&&Math.floor(Sn)===Sn?"categorical"!==V&&"number"===qr&&void 0!==mt&&Sn<mt?[new Tr(zr.key,mn,"stop domain values must appear in ascending order")]:(mt=Sn,"categorical"===V&&Sn in ct?[new Tr(zr.key,mn,"stop domain values must be unique")]:(ct[Sn]=!0,[])):[new Tr(zr.key,mn,"integer expected, found "+Sn)]}}function vs(R){var I=("property"===R.expressionContext?vl:hl)(En(R.value),R.valueSpec);if("error"===I.result)return I.value.map(function(tt){return new Tr(""+R.key+tt.key,R.value,tt.message)});var V=I.value.expression||I.value._styleExpression.expression;if("property"===R.expressionContext&&"text-font"===R.propertyKey&&!V.outputDefined())return[new Tr(R.key,R.value,'Invalid data expression for "'+R.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===R.expressionContext&&"layout"===R.propertyType&&!ms(V))return[new Tr(R.key,R.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===R.expressionContext&&!ms(V))return[new Tr(R.key,R.value,'"feature-state" data expressions are not supported with filters.')];if(R.expressionContext&&0===R.expressionContext.indexOf("cluster")){if(!Fl(V,["zoom","feature-state"]))return[new Tr(R.key,R.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===R.expressionContext&&!nl(V))return[new Tr(R.key,R.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ys(R){var I=R.key,V=R.value,tt=R.valueSpec,ct=[];return Array.isArray(tt.values)?-1===tt.values.indexOf(sn(V))&&ct.push(new Tr(I,V,"expected one of ["+tt.values.join(", ")+"], "+JSON.stringify(V)+" found")):-1===Object.keys(tt.values).indexOf(sn(V))&&ct.push(new Tr(I,V,"expected one of ["+Object.keys(tt.values).join(", ")+"], "+JSON.stringify(V)+" found")),ct}function Zs(R){if(!0===R||!1===R)return!0;if(!Array.isArray(R)||0===R.length)return!1;switch(R[0]){case"has":return R.length>=2&&"$id"!==R[1]&&"$type"!==R[1];case"in":return R.length>=3&&("string"!=typeof R[1]||Array.isArray(R[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==R.length||Array.isArray(R[1])||Array.isArray(R[2]);case"any":case"all":for(var I=0,V=R.slice(1);I<V.length;I+=1){var tt=V[I];if(!Zs(tt)&&"boolean"!=typeof tt)return!1}return!0;default:return!0}}hs.deserialize=function(I){return new hs(I._parameters,I._specification)},hs.serialize=function(I){return{_parameters:I._parameters,_specification:I._specification}};var pl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function yl(R){if(null==R)return{filter:function(){return!0},needGeometry:!1};Zs(R)||(R=Es(R));var I=hl(R,pl);if("error"===I.result)throw new Error(I.value.map(function(tt){return tt.key+": "+tt.message}).join(", "));return{filter:function(tt,ct,mt){return I.value.evaluate(tt,ct,{},mt)},needGeometry:yu(R)}}function Yu(R,I){return R<I?-1:R>I?1:0}function yu(R){if(!Array.isArray(R))return!1;if("within"===R[0])return!0;for(var I=1;I<R.length;I++)if(yu(R[I]))return!0;return!1}function Es(R){if(!R)return!0;var I=R[0];return R.length<=1?"any"!==I:"=="===I?ao(R[1],R[2],"=="):"!="===I?Xs(ao(R[1],R[2],"==")):"<"===I||">"===I||"<="===I||">="===I?ao(R[1],R[2],I):"any"===I?function mu(R){return["any"].concat(R.map(Es))}(R.slice(1)):"all"===I?["all"].concat(R.slice(1).map(Es)):"none"===I?["all"].concat(R.slice(1).map(Es).map(Xs)):"in"===I?Yl(R[1],R.slice(2)):"!in"===I?Xs(Yl(R[1],R.slice(2))):"has"===I?Oo(R[1]):"!has"===I?Xs(Oo(R[1])):"within"!==I||R}function ao(R,I,V){switch(R){case"$type":return["filter-type-"+V,I];case"$id":return["filter-id-"+V,I];default:return["filter-"+V,R,I]}}function Yl(R,I){if(0===I.length)return!1;switch(R){case"$type":return["filter-type-in",["literal",I]];case"$id":return["filter-id-in",["literal",I]];default:return I.length>200&&!I.some(function(V){return typeof V!=typeof I[0]})?["filter-in-large",R,["literal",I.sort(Yu)]]:["filter-in-small",R,["literal",I]]}}function Oo(R){switch(R){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",R]}}function Xs(R){return["!",R]}function Cs(R){return Zs(En(R.value))?vs(fn({},R,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Zu(R)}function Zu(R){var I=R.value,V=R.key;if("array"!==ei(I))return[new Tr(V,I,"array expected, "+ei(I)+" found")];var ct,tt=R.styleSpec,mt=[];if(I.length<1)return[new Tr(V,I,"filter array must have at least 1 element")];switch(mt=mt.concat(Ys({key:V+"[0]",value:I[0],valueSpec:tt.filter_operator,style:R.style,styleSpec:R.styleSpec})),sn(I[0])){case"<":case"<=":case">":case">=":I.length>=2&&"$type"===sn(I[1])&&mt.push(new Tr(V,I,'"$type" cannot be use with operator "'+I[0]+'"'));case"==":case"!=":3!==I.length&&mt.push(new Tr(V,I,'filter array for operator "'+I[0]+'" must have 3 elements'));case"in":case"!in":I.length>=2&&"string"!==(ct=ei(I[1]))&&mt.push(new Tr(V+"[1]",I[1],"string expected, "+ct+" found"));for(var Tt=2;Tt<I.length;Tt++)ct=ei(I[Tt]),"$type"===sn(I[1])?mt=mt.concat(Ys({key:V+"["+Tt+"]",value:I[Tt],valueSpec:tt.geometry_type,style:R.style,styleSpec:R.styleSpec})):"string"!==ct&&"number"!==ct&&"boolean"!==ct&&mt.push(new Tr(V+"["+Tt+"]",I[Tt],"string, number, or boolean expected, "+ct+" found"));break;case"any":case"all":case"none":for(var jt=1;jt<I.length;jt++)mt=mt.concat(Zu({key:V+"["+jt+"]",value:I[jt],style:R.style,styleSpec:R.styleSpec}));break;case"has":case"!has":ct=ei(I[1]),2!==I.length?mt.push(new Tr(V,I,'filter array for "'+I[0]+'" operator must have 2 elements')):"string"!==ct&&mt.push(new Tr(V+"[1]",I[1],"string expected, "+ct+" found"));break;case"within":ct=ei(I[1]),2!==I.length?mt.push(new Tr(V,I,'filter array for "'+I[0]+'" operator must have 2 elements')):"object"!==ct&&mt.push(new Tr(V+"[1]",I[1],"object expected, "+ct+" found"))}return mt}function Zl(R,I){var V=R.key,tt=R.style,ct=R.styleSpec,mt=R.value,Tt=R.objectKey,jt=ct[I+"_"+R.layerType];if(!jt)return[];var le=Tt.match(/^(.*)-transition$/);if("paint"===I&&le&&jt[le[1]]&&jt[le[1]].transition)return pr({key:V,value:mt,valueSpec:ct.transition,style:tt,styleSpec:ct});var we,ye=R.valueSpec||jt[Tt];if(!ye)return[new Tr(V,mt,'unknown property "'+Tt+'"')];if("string"===ei(mt)&&Jo(ye)&&!ye.tokens&&(we=/^{([^}]+)}$/.exec(mt)))return[new Tr(V,mt,'"'+Tt+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(we[1])+" }`.")];var Ue=[];return"symbol"===R.layerType&&("text-field"===Tt&&tt&&!tt.glyphs&&Ue.push(new Tr(V,mt,'use of "text-field" requires a style "glyphs" property')),"text-font"===Tt&&Gs(En(mt))&&"identity"===sn(mt.type)&&Ue.push(new Tr(V,mt,'"text-font" does not support identity functions'))),Ue.concat(pr({key:R.key,value:mt,valueSpec:ye,style:tt,styleSpec:ct,expressionContext:"property",propertyType:I,propertyKey:Tt}))}function Xu(R){return Zl(R,"paint")}function ml(R){return Zl(R,"layout")}function xu(R){var I=[],V=R.value,tt=R.key,ct=R.style,mt=R.styleSpec;!V.type&&!V.ref&&I.push(new Tr(tt,V,'either "type" or "ref" is required'));var Ue,Tt=sn(V.type),jt=sn(V.ref);if(V.id)for(var le=sn(V.id),ye=0;ye<R.arrayIndex;ye++){var we=ct.layers[ye];sn(we.id)===le&&I.push(new Tr(tt,V.id,'duplicate layer id "'+V.id+'", previously used at line '+we.id.__line__))}if("ref"in V)["type","source","source-layer","filter","layout"].forEach(function(br){br in V&&I.push(new Tr(tt,V[br],'"'+br+'" is prohibited for ref layers'))}),ct.layers.forEach(function(br){sn(br.id)===jt&&(Ue=br)}),Ue?Ue.ref?I.push(new Tr(tt,V.ref,"ref cannot reference another ref layer")):Tt=sn(Ue.type):I.push(new Tr(tt,V.ref,'ref layer "'+jt+'" not found'));else if("background"!==Tt)if(V.source){var er=ct.sources&&ct.sources[V.source],$e=er&&sn(er.type);er?"vector"===$e&&"raster"===Tt?I.push(new Tr(tt,V.source,'layer "'+V.id+'" requires a raster source')):"raster"===$e&&"raster"!==Tt?I.push(new Tr(tt,V.source,'layer "'+V.id+'" requires a vector source')):"vector"!==$e||V["source-layer"]?"raster-dem"===$e&&"hillshade"!==Tt?I.push(new Tr(tt,V.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"===Tt&&V.paint&&V.paint["line-gradient"]&&("geojson"!==$e||!er.lineMetrics)&&I.push(new Tr(tt,V,'layer "'+V.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):I.push(new Tr(tt,V,'layer "'+V.id+'" must specify a "source-layer"')):I.push(new Tr(tt,V.source,'source "'+V.source+'" not found'))}else I.push(new Tr(tt,V,'missing required property "source"'));return I=I.concat(Ti({key:tt,value:V,valueSpec:mt.layer,style:R.style,styleSpec:R.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return pr({key:tt+".type",value:V.type,valueSpec:mt.layer.type,style:R.style,styleSpec:R.styleSpec,object:V,objectKey:"type"})},filter:Cs,layout:function(zr){return Ti({layer:V,key:zr.key,value:zr.value,style:zr.style,styleSpec:zr.styleSpec,objectElementValidators:{"*":function(qr){return ml(fn({layerType:Tt},qr))}}})},paint:function(zr){return Ti({layer:V,key:zr.key,value:zr.value,style:zr.style,styleSpec:zr.styleSpec,objectElementValidators:{"*":function(qr){return Xu(fn({layerType:Tt},qr))}}})}}}))}function Xt(R){var I=R.value,V=R.key,tt=ei(I);return"string"!==tt?[new Tr(V,I,"string expected, "+tt+" found")]:[]}var _t={promoteId:function he(R){var I=R.key,V=R.value;if("string"===ei(V))return Xt({key:I,value:V});var tt=[];for(var ct in V)tt.push.apply(tt,Xt({key:I+"."+ct,value:V[ct]}));return tt}};function fe(R){var I=R.value,V=R.key,tt=R.styleSpec,ct=R.style;if(!I.type)return[new Tr(V,I,'"type" is required')];var Tt,mt=sn(I.type);switch(mt){case"vector":case"raster":case"raster-dem":return Ti({key:V,value:I,valueSpec:tt["source_"+mt.replace("-","_")],style:R.style,styleSpec:tt,objectElementValidators:_t});case"geojson":if(Tt=Ti({key:V,value:I,valueSpec:tt.source_geojson,style:ct,styleSpec:tt,objectElementValidators:_t}),I.cluster)for(var jt in I.clusterProperties){var le=I.clusterProperties[jt],ye=le[0],Ue="string"==typeof ye?[ye,["accumulated"],["get",jt]]:ye;Tt.push.apply(Tt,vs({key:V+"."+jt+".map",value:le[1],expressionContext:"cluster-map"})),Tt.push.apply(Tt,vs({key:V+"."+jt+".reduce",value:Ue,expressionContext:"cluster-reduce"}))}return Tt;case"video":return Ti({key:V,value:I,valueSpec:tt.source_video,style:ct,styleSpec:tt});case"image":return Ti({key:V,value:I,valueSpec:tt.source_image,style:ct,styleSpec:tt});case"canvas":return[new Tr(V,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ys({key:V+".type",value:I.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:ct,styleSpec:tt})}}function Le(R){var I=R.value,V=R.styleSpec,tt=V.light,ct=R.style,mt=[],Tt=ei(I);if(void 0===I)return mt;if("object"!==Tt)return mt.concat([new Tr("light",I,"object expected, "+Tt+" found")]);for(var jt in I){var le=jt.match(/^(.*)-transition$/);mt=mt.concat(le&&tt[le[1]]&&tt[le[1]].transition?pr({key:jt,value:I[jt],valueSpec:V.transition,style:ct,styleSpec:V}):tt[jt]?pr({key:jt,value:I[jt],valueSpec:tt[jt],style:ct,styleSpec:V}):[new Tr(jt,I[jt],'unknown property "'+jt+'"')])}return mt}var fr={"*":function(){return[]},array:pu,boolean:function gu(R){var I=R.value,V=R.key,tt=ei(I);return"boolean"!==tt?[new Tr(V,I,"boolean expected, "+tt+" found")]:[]},number:Wl,color:function yf(R){var I=R.key,V=R.value,tt=ei(V);return"string"!==tt?[new Tr(I,V,"color expected, "+tt+" found")]:null===co(V)?[new Tr(I,V,'color expected, "'+V+'" found')]:[]},constants:_r,enum:Ys,filter:Cs,function:Ss,layer:xu,object:Ti,source:fe,light:Le,string:Xt,formatted:function Me(R){return 0===Xt(R).length?[]:vs(R)},resolvedImage:function ke(R){return 0===Xt(R).length?[]:vs(R)}};function pr(R){var I=R.value,V=R.valueSpec,tt=R.styleSpec;return V.expression&&Gs(sn(I))?Ss(R):V.expression&&cl(En(I))?vs(R):V.type&&fr[V.type]?fr[V.type](R):Ti(fn({},R,{valueSpec:V.type?tt[V.type]:V}))}function lr(R){var I=R.value,V=R.key,tt=Xt(R);return tt.length||(-1===I.indexOf("{fontstack}")&&tt.push(new Tr(V,I,'"glyphs" url must include a "{fontstack}" token')),-1===I.indexOf("{range}")&&tt.push(new Tr(V,I,'"glyphs" url must include a "{range}" token'))),tt}function vr(R,I){void 0===I&&(I=Ze);var V=[];return V=V.concat(pr({key:"",value:R,valueSpec:I.$root,styleSpec:I,style:R,objectElementValidators:{glyphs:lr,"*":function(){return[]}}})),R.constants&&(V=V.concat(_r({key:"constants",value:R.constants,style:R,styleSpec:I}))),Fr(V)}function Fr(R){return[].concat(R).sort(function(I,V){return I.line-V.line})}function Hr(R){return function(){for(var I=[],V=arguments.length;V--;)I[V]=arguments[V];return Fr(R.apply(this,I))}}vr.source=Hr(fe),vr.light=Hr(Le),vr.layer=Hr(xu),vr.filter=Hr(Cs),vr.paintProperty=Hr(Xu),vr.layoutProperty=Hr(ml);var jr=vr,$r=jr.light,bn=jr.paintProperty,zn=jr.layoutProperty;function qn(R,I){var V=!1;if(I&&I.length)for(var tt=0,ct=I;tt<ct.length;tt+=1)R.fire(new qe(new Error(ct[tt].message))),V=!0;return V}var xa=Aa;function Aa(R,I,V){var tt=this.cells=[];if(R instanceof ArrayBuffer){this.arrayBuffer=R;var ct=new Int32Array(this.arrayBuffer);R=ct[0],this.d=(I=ct[1])+2*(V=ct[2]);for(var mt=0;mt<this.d*this.d;mt++){var Tt=ct[3+mt],jt=ct[3+mt+1];tt.push(Tt===jt?null:ct.subarray(Tt,jt))}var ye=ct[3+tt.length+1];this.keys=ct.subarray(ct[3+tt.length],ye),this.bboxes=ct.subarray(ye),this.insert=this._insertReadonly}else{this.d=I+2*V;for(var we=0;we<this.d*this.d;we++)tt.push([]);this.keys=[],this.bboxes=[]}this.n=I,this.extent=R,this.padding=V,this.scale=I/R,this.uid=0;var Ue=V/I*R;this.min=-Ue,this.max=R+Ue}Aa.prototype.insert=function(R,I,V,tt,ct){this._forEachCell(I,V,tt,ct,this._insertCell,this.uid++),this.keys.push(R),this.bboxes.push(I),this.bboxes.push(V),this.bboxes.push(tt),this.bboxes.push(ct)},Aa.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Aa.prototype._insertCell=function(R,I,V,tt,ct,mt){this.cells[ct].push(mt)},Aa.prototype.query=function(R,I,V,tt,ct){var mt=this.min,Tt=this.max;if(R<=mt&&I<=mt&&Tt<=V&&Tt<=tt&&!ct)return Array.prototype.slice.call(this.keys);var jt=[];return this._forEachCell(R,I,V,tt,this._queryCell,jt,{},ct),jt},Aa.prototype._queryCell=function(R,I,V,tt,ct,mt,Tt,jt){var le=this.cells[ct];if(null!==le)for(var ye=this.keys,we=this.bboxes,Ue=0;Ue<le.length;Ue++){var er=le[Ue];if(void 0===Tt[er]){var $e=4*er;(jt?jt(we[$e+0],we[$e+1],we[$e+2],we[$e+3]):R<=we[$e+2]&&I<=we[$e+3]&&V>=we[$e+0]&&tt>=we[$e+1])?(Tt[er]=!0,mt.push(ye[er])):Tt[er]=!1}}},Aa.prototype._forEachCell=function(R,I,V,tt,ct,mt,Tt,jt){for(var le=this._convertToCellCoord(R),ye=this._convertToCellCoord(I),we=this._convertToCellCoord(V),Ue=this._convertToCellCoord(tt),er=le;er<=we;er++)for(var $e=ye;$e<=Ue;$e++){var br=this.d*$e+er;if((!jt||jt(this._convertFromCellCoord(er),this._convertFromCellCoord($e),this._convertFromCellCoord(er+1),this._convertFromCellCoord($e+1)))&&ct.call(this,R,I,V,tt,br,mt,Tt,jt))return}},Aa.prototype._convertFromCellCoord=function(R){return(R-this.padding)/this.scale},Aa.prototype._convertToCellCoord=function(R){return Math.max(0,Math.min(this.d-1,Math.floor(R*this.scale)+this.padding))},Aa.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var R=this.cells,I=3+this.cells.length+1+1,V=0,tt=0;tt<this.cells.length;tt++)V+=this.cells[tt].length;var ct=new Int32Array(I+V+this.keys.length+this.bboxes.length);ct[0]=this.extent,ct[1]=this.n,ct[2]=this.padding;for(var mt=I,Tt=0;Tt<R.length;Tt++){var jt=R[Tt];ct[3+Tt]=mt,ct.set(jt,mt),mt+=jt.length}return ct[3+R.length]=mt,ct.set(this.keys,mt),ct[3+R.length+1]=mt+=this.keys.length,ct.set(this.bboxes,mt),mt+=this.bboxes.length,ct.buffer};var Ra=self.ImageData,qa=self.ImageBitmap,ai={};function ra(R,I,V){void 0===V&&(V={}),Object.defineProperty(I,"_classRegistryKey",{value:R,writeable:!1}),ai[R]={klass:I,omit:V.omit||[],shallow:V.shallow||[]}}for(var fi in ra("Object",Object),xa.serialize=function(I,V){var tt=I.toArrayBuffer();return V&&V.push(tt),{buffer:tt}},xa.deserialize=function(I){return new xa(I.buffer)},ra("Grid",xa),ra("Color",Ga),ra("Error",Error),ra("ResolvedImage",ro),ra("StylePropertyFunction",hs),ra("StyleExpression",Qo,{omit:["_evaluator"]}),ra("ZoomDependentExpression",Ao),ra("ZoomConstantExpression",$o),ra("CompoundExpression",wi,{omit:["_evaluate"]}),zi)zi[fi]._classRegistryKey||ra("Expression_"+fi,zi[fi]);function yi(R){return R&&"undefined"!=typeof ArrayBuffer&&(R instanceof ArrayBuffer||R.constructor&&"ArrayBuffer"===R.constructor.name)}function ji(R){return qa&&R instanceof qa}function Mo(R,I){if(null==R||"boolean"==typeof R||"number"==typeof R||"string"==typeof R||R instanceof Boolean||R instanceof Number||R instanceof String||R instanceof Date||R instanceof RegExp)return R;if(yi(R)||ji(R))return I&&I.push(R),R;if(ArrayBuffer.isView(R)){var V=R;return I&&I.push(V.buffer),V}if(R instanceof Ra)return I&&I.push(R.data.buffer),R;if(Array.isArray(R)){for(var tt=[],ct=0,mt=R;ct<mt.length;ct+=1)tt.push(Mo(mt[ct],I));return tt}if("object"==typeof R){var jt=R.constructor,le=jt._classRegistryKey;if(!le)throw new Error("can't serialize object of unregistered class");var ye=jt.serialize?jt.serialize(R,I):{};if(!jt.serialize){for(var we in R)if(R.hasOwnProperty(we)&&!(ai[le].omit.indexOf(we)>=0)){var Ue=R[we];ye[we]=ai[le].shallow.indexOf(we)>=0?Ue:Mo(Ue,I)}R instanceof Error&&(ye.message=R.message)}if(ye.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==le&&(ye.$name=le),ye}throw new Error("can't serialize object of type "+typeof R)}function si(R){if(null==R||"boolean"==typeof R||"number"==typeof R||"string"==typeof R||R instanceof Boolean||R instanceof Number||R instanceof String||R instanceof Date||R instanceof RegExp||yi(R)||ji(R)||ArrayBuffer.isView(R)||R instanceof Ra)return R;if(Array.isArray(R))return R.map(si);if("object"==typeof R){var I=R.$name||"Object",tt=ai[I].klass;if(!tt)throw new Error("can't deserialize unregistered class "+I);if(tt.deserialize)return tt.deserialize(R);for(var ct=Object.create(tt.prototype),mt=0,Tt=Object.keys(R);mt<Tt.length;mt+=1){var jt=Tt[mt];if("$name"!==jt){var le=R[jt];ct[jt]=ai[I].shallow.indexOf(jt)>=0?le:si(le)}}return ct}throw new Error("can't deserialize object of type "+typeof R)}var ot=function(){this.first=!0};ot.prototype.update=function(I,V){var tt=Math.floor(I);return this.first?(this.first=!1,this.lastIntegerZoom=tt,this.lastIntegerZoomTime=0,this.lastZoom=I,this.lastFloorZoom=tt,!0):(this.lastFloorZoom>tt?(this.lastIntegerZoom=tt+1,this.lastIntegerZoomTime=V):this.lastFloorZoom<tt&&(this.lastIntegerZoom=tt,this.lastIntegerZoomTime=V),I!==this.lastZoom&&(this.lastZoom=I,this.lastFloorZoom=tt,!0))};var yt={"Latin-1 Supplement":function(R){return R>=128&&R<=255},Arabic:function(R){return R>=1536&&R<=1791},"Arabic Supplement":function(R){return R>=1872&&R<=1919},"Arabic Extended-A":function(R){return R>=2208&&R<=2303},"Hangul Jamo":function(R){return R>=4352&&R<=4607},"Unified Canadian Aboriginal Syllabics":function(R){return R>=5120&&R<=5759},Khmer:function(R){return R>=6016&&R<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(R){return R>=6320&&R<=6399},"General Punctuation":function(R){return R>=8192&&R<=8303},"Letterlike Symbols":function(R){return R>=8448&&R<=8527},"Number Forms":function(R){return R>=8528&&R<=8591},"Miscellaneous Technical":function(R){return R>=8960&&R<=9215},"Control Pictures":function(R){return R>=9216&&R<=9279},"Optical Character Recognition":function(R){return R>=9280&&R<=9311},"Enclosed Alphanumerics":function(R){return R>=9312&&R<=9471},"Geometric Shapes":function(R){return R>=9632&&R<=9727},"Miscellaneous Symbols":function(R){return R>=9728&&R<=9983},"Miscellaneous Symbols and Arrows":function(R){return R>=11008&&R<=11263},"CJK Radicals Supplement":function(R){return R>=11904&&R<=12031},"Kangxi Radicals":function(R){return R>=12032&&R<=12255},"Ideographic Description Characters":function(R){return R>=12272&&R<=12287},"CJK Symbols and Punctuation":function(R){return R>=12288&&R<=12351},Hiragana:function(R){return R>=12352&&R<=12447},Katakana:function(R){return R>=12448&&R<=12543},Bopomofo:function(R){return R>=12544&&R<=12591},"Hangul Compatibility Jamo":function(R){return R>=12592&&R<=12687},Kanbun:function(R){return R>=12688&&R<=12703},"Bopomofo Extended":function(R){return R>=12704&&R<=12735},"CJK Strokes":function(R){return R>=12736&&R<=12783},"Katakana Phonetic Extensions":function(R){return R>=12784&&R<=12799},"Enclosed CJK Letters and Months":function(R){return R>=12800&&R<=13055},"CJK Compatibility":function(R){return R>=13056&&R<=13311},"CJK Unified Ideographs Extension A":function(R){return R>=13312&&R<=19903},"Yijing Hexagram Symbols":function(R){return R>=19904&&R<=19967},"CJK Unified Ideographs":function(R){return R>=19968&&R<=40959},"Yi Syllables":function(R){return R>=40960&&R<=42127},"Yi Radicals":function(R){return R>=42128&&R<=42191},"Hangul Jamo Extended-A":function(R){return R>=43360&&R<=43391},"Hangul Syllables":function(R){return R>=44032&&R<=55215},"Hangul Jamo Extended-B":function(R){return R>=55216&&R<=55295},"Private Use Area":function(R){return R>=57344&&R<=63743},"CJK Compatibility Ideographs":function(R){return R>=63744&&R<=64255},"Arabic Presentation Forms-A":function(R){return R>=64336&&R<=65023},"Vertical Forms":function(R){return R>=65040&&R<=65055},"CJK Compatibility Forms":function(R){return R>=65072&&R<=65103},"Small Form Variants":function(R){return R>=65104&&R<=65135},"Arabic Presentation Forms-B":function(R){return R>=65136&&R<=65279},"Halfwidth and Fullwidth Forms":function(R){return R>=65280&&R<=65519}};function zt(R){for(var I=0,V=R;I<V.length;I+=1)if(Ee(V[I].charCodeAt(0)))return!0;return!1}function $t(R){return!(yt.Arabic(R)||yt["Arabic Supplement"](R)||yt["Arabic Extended-A"](R)||yt["Arabic Presentation Forms-A"](R)||yt["Arabic Presentation Forms-B"](R))}function ne(R){return!(R<11904||!(yt["Bopomofo Extended"](R)||yt.Bopomofo(R)||yt["CJK Compatibility Forms"](R)||yt["CJK Compatibility Ideographs"](R)||yt["CJK Compatibility"](R)||yt["CJK Radicals Supplement"](R)||yt["CJK Strokes"](R)||yt["CJK Symbols and Punctuation"](R)||yt["CJK Unified Ideographs Extension A"](R)||yt["CJK Unified Ideographs"](R)||yt["Enclosed CJK Letters and Months"](R)||yt["Halfwidth and Fullwidth Forms"](R)||yt.Hiragana(R)||yt["Ideographic Description Characters"](R)||yt["Kangxi Radicals"](R)||yt["Katakana Phonetic Extensions"](R)||yt.Katakana(R)||yt["Vertical Forms"](R)||yt["Yi Radicals"](R)||yt["Yi Syllables"](R)))}function Ee(R){return 746===R||747===R||!(R<4352)&&!!(yt["Bopomofo Extended"](R)||yt.Bopomofo(R)||yt["CJK Compatibility Forms"](R)&&!(R>=65097&&R<=65103)||yt["CJK Compatibility Ideographs"](R)||yt["CJK Compatibility"](R)||yt["CJK Radicals Supplement"](R)||yt["CJK Strokes"](R)||yt["CJK Symbols and Punctuation"](R)&&!(R>=12296&&R<=12305)&&!(R>=12308&&R<=12319)&&12336!==R||yt["CJK Unified Ideographs Extension A"](R)||yt["CJK Unified Ideographs"](R)||yt["Enclosed CJK Letters and Months"](R)||yt["Hangul Compatibility Jamo"](R)||yt["Hangul Jamo Extended-A"](R)||yt["Hangul Jamo Extended-B"](R)||yt["Hangul Jamo"](R)||yt["Hangul Syllables"](R)||yt.Hiragana(R)||yt["Ideographic Description Characters"](R)||yt.Kanbun(R)||yt["Kangxi Radicals"](R)||yt["Katakana Phonetic Extensions"](R)||yt.Katakana(R)&&12540!==R||!(!yt["Halfwidth and Fullwidth Forms"](R)||65288===R||65289===R||65293===R||R>=65306&&R<=65310||65339===R||65341===R||65343===R||R>=65371&&R<=65503||65507===R||R>=65512&&R<=65519)||!(!yt["Small Form Variants"](R)||R>=65112&&R<=65118||R>=65123&&R<=65126)||yt["Unified Canadian Aboriginal Syllabics"](R)||yt["Unified Canadian Aboriginal Syllabics Extended"](R)||yt["Vertical Forms"](R)||yt["Yijing Hexagram Symbols"](R)||yt["Yi Syllables"](R)||yt["Yi Radicals"](R))}function Oe(R){return!(Ee(R)||function me(R){return!!(yt["Latin-1 Supplement"](R)&&(167===R||169===R||174===R||177===R||188===R||189===R||190===R||215===R||247===R)||yt["General Punctuation"](R)&&(8214===R||8224===R||8225===R||8240===R||8241===R||8251===R||8252===R||8258===R||8263===R||8264===R||8265===R||8273===R)||yt["Letterlike Symbols"](R)||yt["Number Forms"](R)||yt["Miscellaneous Technical"](R)&&(R>=8960&&R<=8967||R>=8972&&R<=8991||R>=8996&&R<=9e3||9003===R||R>=9085&&R<=9114||R>=9150&&R<=9165||9167===R||R>=9169&&R<=9179||R>=9186&&R<=9215)||yt["Control Pictures"](R)&&9251!==R||yt["Optical Character Recognition"](R)||yt["Enclosed Alphanumerics"](R)||yt["Geometric Shapes"](R)||yt["Miscellaneous Symbols"](R)&&!(R>=9754&&R<=9759)||yt["Miscellaneous Symbols and Arrows"](R)&&(R>=11026&&R<=11055||R>=11088&&R<=11097||R>=11192&&R<=11243)||yt["CJK Symbols and Punctuation"](R)||yt.Katakana(R)||yt["Private Use Area"](R)||yt["CJK Compatibility Forms"](R)||yt["Small Form Variants"](R)||yt["Halfwidth and Fullwidth Forms"](R)||8734===R||8756===R||8757===R||R>=9984&&R<=10087||R>=10102&&R<=10131||65532===R||65533===R)}(R))}function Qe(R){return yt.Arabic(R)||yt["Arabic Supplement"](R)||yt["Arabic Extended-A"](R)||yt["Arabic Presentation Forms-A"](R)||yt["Arabic Presentation Forms-B"](R)}function tr(R){return R>=1424&&R<=2303||yt["Arabic Presentation Forms-A"](R)||yt["Arabic Presentation Forms-B"](R)}function Cr(R,I){return!(!I&&tr(R)||R>=2304&&R<=3583||R>=3840&&R<=4255||yt.Khmer(R))}function Sr(R){for(var I=0,V=R;I<V.length;I+=1)if(tr(V[I].charCodeAt(0)))return!0;return!1}var rn_deferred="deferred",rn_loading="loading",rn_loaded="loaded",rn_error="error",Rr=null,kr="unavailable",Vr=null,on=function(R){R&&"string"==typeof R&&R.indexOf("NetworkError")>-1&&(kr=rn_error),Rr&&Rr(R)};function un(){Xr.fire(new We("pluginStateChange",{pluginStatus:kr,pluginURL:Vr}))}var Xr=new or,kn=function(){return kr},na=function(){if(kr!==rn_deferred||!Vr)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");kr=rn_loading,un(),Vr&&be({url:Vr},function(R){R?on(R):(kr=rn_loaded,un())})},aa={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return kr===rn_loaded||null!=aa.applyArabicShaping},isLoading:function(){return kr===rn_loading},setState:function(I){kr=I.pluginStatus,Vr=I.pluginURL},isParsed:function(){return null!=aa.applyArabicShaping&&null!=aa.processBidirectionalText&&null!=aa.processStyledBidirectionalText},getPluginURL:function(){return Vr}},da=function(I,V){this.zoom=I,V?(this.now=V.now,this.fadeDuration=V.fadeDuration,this.zoomHistory=V.zoomHistory,this.transition=V.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ot,this.transition={})};da.prototype.isSupportedScript=function(I){return function Qr(R,I){for(var V=0,tt=R;V<tt.length;V+=1)if(!Cr(tt[V].charCodeAt(0),I))return!1;return!0}(I,aa.isLoaded())},da.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},da.prototype.getCrossfadeParameters=function(){var I=this.zoom,V=I-Math.floor(I),tt=this.crossFadingFactor();return I>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:V+(1-V)*tt}:{fromScale:.5,toScale:1,t:1-(1-tt)*V}};var pa=function(I,V){this.property=I,this.value=V,this.expression=function dl(R,I){if(Gs(R))return new hs(R,I);if(cl(R)){var V=vl(R,I);if("error"===V.result)throw new Error(V.value.map(function(ct){return ct.key+": "+ct.message}).join(", "));return V.value}var tt=R;return"string"==typeof R&&"color"===I.type&&(tt=Ga.parse(R)),{kind:"constant",evaluate:function(){return tt}}}(void 0===V?I.specification.default:V,I.specification)};pa.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},pa.prototype.possiblyEvaluate=function(I,V,tt){return this.property.possiblyEvaluate(this,I,V,tt)};var Sa=function(I){this.property=I,this.value=new pa(I,void 0)};Sa.prototype.transitioned=function(I,V){return new mi(this.property,this.value,V,o({},I.transition,this.transition),I.now)},Sa.prototype.untransitioned=function(){return new mi(this.property,this.value,null,{},0)};var Ua=function(I){this._properties=I,this._values=Object.create(I.defaultTransitionablePropertyValues)};Ua.prototype.getValue=function(I){return d(this._values[I].value.value)},Ua.prototype.setValue=function(I,V){this._values.hasOwnProperty(I)||(this._values[I]=new Sa(this._values[I].property)),this._values[I].value=new pa(this._values[I].property,null===V?void 0:d(V))},Ua.prototype.getTransition=function(I){return d(this._values[I].transition)},Ua.prototype.setTransition=function(I,V){this._values.hasOwnProperty(I)||(this._values[I]=new Sa(this._values[I].property)),this._values[I].transition=d(V)||void 0},Ua.prototype.serialize=function(){for(var I={},V=0,tt=Object.keys(this._values);V<tt.length;V+=1){var ct=tt[V],mt=this.getValue(ct);void 0!==mt&&(I[ct]=mt);var Tt=this.getTransition(ct);void 0!==Tt&&(I[ct+"-transition"]=Tt)}return I},Ua.prototype.transitioned=function(I,V){for(var tt=new ja(this._properties),ct=0,mt=Object.keys(this._values);ct<mt.length;ct+=1){var Tt=mt[ct];tt._values[Tt]=this._values[Tt].transitioned(I,V._values[Tt])}return tt},Ua.prototype.untransitioned=function(){for(var I=new ja(this._properties),V=0,tt=Object.keys(this._values);V<tt.length;V+=1){var ct=tt[V];I._values[ct]=this._values[ct].untransitioned()}return I};var mi=function(I,V,tt,ct,mt){this.property=I,this.value=V,this.begin=mt+ct.delay||0,this.end=this.begin+ct.duration||0,I.specification.transition&&(ct.delay||ct.duration)&&(this.prior=tt)};mi.prototype.possiblyEvaluate=function(I,V,tt){var ct=I.now||0,mt=this.value.possiblyEvaluate(I,V,tt),Tt=this.prior;if(Tt){if(ct>this.end)return this.prior=null,mt;if(this.value.isDataDriven())return this.prior=null,mt;if(ct<this.begin)return Tt.possiblyEvaluate(I,V,tt);var jt=(ct-this.begin)/(this.end-this.begin);return this.property.interpolate(Tt.possiblyEvaluate(I,V,tt),mt,function a(R){if(R<=0)return 0;if(R>=1)return 1;var I=R*R,V=I*R;return 4*(R<.5?V:3*(R-I)+V-.75)}(jt))}return mt};var ja=function(I){this._properties=I,this._values=Object.create(I.defaultTransitioningPropertyValues)};ja.prototype.possiblyEvaluate=function(I,V,tt){for(var ct=new Ea(this._properties),mt=0,Tt=Object.keys(this._values);mt<Tt.length;mt+=1){var jt=Tt[mt];ct._values[jt]=this._values[jt].possiblyEvaluate(I,V,tt)}return ct},ja.prototype.hasTransition=function(){for(var I=0,V=Object.keys(this._values);I<V.length;I+=1)if(this._values[V[I]].prior)return!0;return!1};var Jn=function(I){this._properties=I,this._values=Object.create(I.defaultPropertyValues)};Jn.prototype.getValue=function(I){return d(this._values[I].value)},Jn.prototype.setValue=function(I,V){this._values[I]=new pa(this._values[I].property,null===V?void 0:d(V))},Jn.prototype.serialize=function(){for(var I={},V=0,tt=Object.keys(this._values);V<tt.length;V+=1){var ct=tt[V],mt=this.getValue(ct);void 0!==mt&&(I[ct]=mt)}return I},Jn.prototype.possiblyEvaluate=function(I,V,tt){for(var ct=new Ea(this._properties),mt=0,Tt=Object.keys(this._values);mt<Tt.length;mt+=1){var jt=Tt[mt];ct._values[jt]=this._values[jt].possiblyEvaluate(I,V,tt)}return ct};var La=function(I,V,tt){this.property=I,this.value=V,this.parameters=tt};La.prototype.isConstant=function(){return"constant"===this.value.kind},La.prototype.constantOr=function(I){return"constant"===this.value.kind?this.value.value:I},La.prototype.evaluate=function(I,V,tt,ct){return this.property.evaluate(this.value,this.parameters,I,V,tt,ct)};var Ea=function(I){this._properties=I,this._values=Object.create(I.defaultPossiblyEvaluatedValues)};Ea.prototype.get=function(I){return this._values[I]};var Xn=function(I){this.specification=I};Xn.prototype.possiblyEvaluate=function(I,V){return I.expression.evaluate(V)},Xn.prototype.interpolate=function(I,V,tt){var ct=Os[this.specification.type];return ct?ct(I,V,tt):I};var ca=function(I,V){this.specification=I,this.overrides=V};ca.prototype.possiblyEvaluate=function(I,V,tt,ct){return new La(this,"constant"===I.expression.kind||"camera"===I.expression.kind?{kind:"constant",value:I.expression.evaluate(V,null,{},tt,ct)}:I.expression,V)},ca.prototype.interpolate=function(I,V,tt){if("constant"!==I.value.kind||"constant"!==V.value.kind)return I;if(void 0===I.value.value||void 0===V.value.value)return new La(this,{kind:"constant",value:void 0},I.parameters);var ct=Os[this.specification.type];return ct?new La(this,{kind:"constant",value:ct(I.value.value,V.value.value,tt)},I.parameters):I},ca.prototype.evaluate=function(I,V,tt,ct,mt,Tt){return"constant"===I.kind?I.value:I.evaluate(V,tt,ct,mt,Tt)};var ii=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.possiblyEvaluate=function(tt,ct,mt,Tt){if(void 0===tt.value)return new La(this,{kind:"constant",value:void 0},ct);if("constant"===tt.expression.kind){var jt=tt.expression.evaluate(ct,null,{},mt,Tt),ye="resolvedImage"===tt.property.specification.type&&"string"!=typeof jt?jt.name:jt,we=this._calculate(ye,ye,ye,ct);return new La(this,{kind:"constant",value:we},ct)}if("camera"===tt.expression.kind){var Ue=this._calculate(tt.expression.evaluate({zoom:ct.zoom-1}),tt.expression.evaluate({zoom:ct.zoom}),tt.expression.evaluate({zoom:ct.zoom+1}),ct);return new La(this,{kind:"constant",value:Ue},ct)}return new La(this,tt.expression,ct)},I.prototype.evaluate=function(tt,ct,mt,Tt,jt,le){if("source"===tt.kind){var ye=tt.evaluate(ct,mt,Tt,jt,le);return this._calculate(ye,ye,ye,ct)}return"composite"===tt.kind?this._calculate(tt.evaluate({zoom:Math.floor(ct.zoom)-1},mt,Tt),tt.evaluate({zoom:Math.floor(ct.zoom)},mt,Tt),tt.evaluate({zoom:Math.floor(ct.zoom)+1},mt,Tt),ct):tt.value},I.prototype._calculate=function(tt,ct,mt,Tt){return Tt.zoom>Tt.zoomHistory.lastIntegerZoom?{from:tt,to:ct}:{from:mt,to:ct}},I.prototype.interpolate=function(tt){return tt},I}(ca),di=function(I){this.specification=I};di.prototype.possiblyEvaluate=function(I,V,tt,ct){if(void 0!==I.value){if("constant"===I.expression.kind){var mt=I.expression.evaluate(V,null,{},tt,ct);return this._calculate(mt,mt,mt,V)}return this._calculate(I.expression.evaluate(new da(Math.floor(V.zoom-1),V)),I.expression.evaluate(new da(Math.floor(V.zoom),V)),I.expression.evaluate(new da(Math.floor(V.zoom+1),V)),V)}},di.prototype._calculate=function(I,V,tt,ct){return ct.zoom>ct.zoomHistory.lastIntegerZoom?{from:I,to:V}:{from:tt,to:V}},di.prototype.interpolate=function(I){return I};var Ai=function(I){this.specification=I};Ai.prototype.possiblyEvaluate=function(I,V,tt,ct){return!!I.expression.evaluate(V,null,{},tt,ct)},Ai.prototype.interpolate=function(){return!1};var ri=function(I){for(var V in this.properties=I,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],I){var tt=I[V];tt.specification.overridable&&this.overridableProperties.push(V);var ct=this.defaultPropertyValues[V]=new pa(tt,void 0),mt=this.defaultTransitionablePropertyValues[V]=new Sa(tt);this.defaultTransitioningPropertyValues[V]=mt.untransitioned(),this.defaultPossiblyEvaluatedValues[V]=ct.possiblyEvaluate({})}};ra("DataDrivenProperty",ca),ra("DataConstantProperty",Xn),ra("CrossFadedDataDrivenProperty",ii),ra("CrossFadedProperty",di),ra("ColorRampProperty",Ai);var Di="-transition",Mi=function(R){function I(V,tt){if(R.call(this),this.id=V.id,this.type=V.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==V.type&&(this.metadata=V.metadata,this.minzoom=V.minzoom,this.maxzoom=V.maxzoom,"background"!==V.type&&(this.source=V.source,this.sourceLayer=V["source-layer"],this.filter=V.filter),tt.layout&&(this._unevaluatedLayout=new Jn(tt.layout)),tt.paint)){for(var ct in this._transitionablePaint=new Ua(tt.paint),V.paint)this.setPaintProperty(ct,V.paint[ct],{validate:!1});for(var mt in V.layout)this.setLayoutProperty(mt,V.layout[mt],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ea(tt.paint)}}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},I.prototype.getLayoutProperty=function(tt){return"visibility"===tt?this.visibility:this._unevaluatedLayout.getValue(tt)},I.prototype.setLayoutProperty=function(tt,ct,mt){void 0===mt&&(mt={}),null!=ct&&this._validate(zn,"layers."+this.id+".layout."+tt,tt,ct,mt)||("visibility"!==tt?this._unevaluatedLayout.setValue(tt,ct):this.visibility=ct)},I.prototype.getPaintProperty=function(tt){return T(tt,Di)?this._transitionablePaint.getTransition(tt.slice(0,-Di.length)):this._transitionablePaint.getValue(tt)},I.prototype.setPaintProperty=function(tt,ct,mt){if(void 0===mt&&(mt={}),null!=ct&&this._validate(bn,"layers."+this.id+".paint."+tt,tt,ct,mt))return!1;if(T(tt,Di))return this._transitionablePaint.setTransition(tt.slice(0,-Di.length),ct||void 0),!1;var jt=this._transitionablePaint._values[tt],le="cross-faded-data-driven"===jt.property.specification["property-type"],ye=jt.value.isDataDriven(),we=jt.value;this._transitionablePaint.setValue(tt,ct),this._handleSpecialPaintPropertyUpdate(tt);var Ue=this._transitionablePaint._values[tt].value;return Ue.isDataDriven()||ye||le||this._handleOverridablePaintPropertyUpdate(tt,we,Ue)},I.prototype._handleSpecialPaintPropertyUpdate=function(tt){},I.prototype._handleOverridablePaintPropertyUpdate=function(tt,ct,mt){return!1},I.prototype.isHidden=function(tt){return!!(this.minzoom&&tt<this.minzoom||this.maxzoom&&tt>=this.maxzoom)||"none"===this.visibility},I.prototype.updateTransitions=function(tt){this._transitioningPaint=this._transitionablePaint.transitioned(tt,this._transitioningPaint)},I.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},I.prototype.recalculate=function(tt,ct){tt.getCrossfadeParameters&&(this._crossfadeParameters=tt.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(tt,void 0,ct)),this.paint=this._transitioningPaint.possiblyEvaluate(tt,void 0,ct)},I.prototype.serialize=function(){var tt={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(tt.layout=tt.layout||{},tt.layout.visibility=this.visibility),E(tt,function(ct,mt){return!(void 0===ct||"layout"===mt&&!Object.keys(ct).length||"paint"===mt&&!Object.keys(ct).length)})},I.prototype._validate=function(tt,ct,mt,Tt,jt){return void 0===jt&&(jt={}),(!jt||!1!==jt.validate)&&qn(this,tt.call(jr,{key:ct,layerType:this.type,objectKey:mt,value:Tt,styleSpec:Ze,style:{glyphs:!0,sprite:!0}}))},I.prototype.is3D=function(){return!1},I.prototype.isTileClipped=function(){return!1},I.prototype.hasOffscreenPass=function(){return!1},I.prototype.resize=function(){},I.prototype.isStateDependent=function(){for(var tt in this.paint._values){var ct=this.paint.get(tt);if(ct instanceof La&&Jo(ct.property.specification)&&("source"===ct.value.kind||"composite"===ct.value.kind)&&ct.value.isStateDependent)return!0}return!1},I}(or),Vi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ti=function(I,V){this._structArray=I,this._pos1=V*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Va=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Wa(R,I){void 0===I&&(I=1);var V=0,tt=0;return{members:R.map(function(Tt){var jt=function Bo(R){return Vi[R].BYTES_PER_ELEMENT}(Tt.type),le=V=So(V,Math.max(I,jt)),ye=Tt.components||1;return tt=Math.max(tt,jt),V+=jt*ye,{name:Tt.name,type:Tt.type,components:ye,offset:le}}),size:So(V,Math.max(tt,I)),alignment:I}}function So(R,I){return Math.ceil(R/I)*I}Va.serialize=function(I,V){return I._trim(),V&&(I.isTransferred=!0,V.push(I.arrayBuffer)),{length:I.length,arrayBuffer:I.arrayBuffer}},Va.deserialize=function(I){var V=Object.create(this.prototype);return V.arrayBuffer=I.arrayBuffer,V.length=I.length,V.capacity=I.arrayBuffer.byteLength/V.bytesPerElement,V._refreshViews(),V},Va.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Va.prototype.clear=function(){this.length=0},Va.prototype.resize=function(I){this.reserve(I),this.length=I},Va.prototype.reserve=function(I){if(I>this.capacity){this.capacity=Math.max(I,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var V=this.uint8;this._refreshViews(),V&&this.uint8.set(V)}},Va.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var io=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(tt,ct){var mt=this.length;return this.resize(mt+1),this.emplace(mt,tt,ct)},I.prototype.emplace=function(tt,ct,mt){var Tt=2*tt;return this.int16[Tt+0]=ct,this.int16[Tt+1]=mt,tt},I}(Va);io.prototype.bytesPerElement=4,ra("StructArrayLayout2i4",io);var Eo=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(tt,ct,mt,Tt){var jt=this.length;return this.resize(jt+1),this.emplace(jt,tt,ct,mt,Tt)},I.prototype.emplace=function(tt,ct,mt,Tt,jt){var le=4*tt;return this.int16[le+0]=ct,this.int16[le+1]=mt,this.int16[le+2]=Tt,this.int16[le+3]=jt,tt},I}(Va);Eo.prototype.bytesPerElement=8,ra("StructArrayLayout4i8",Eo);var No=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(tt,ct,mt,Tt,jt,le){var ye=this.length;return this.resize(ye+1),this.emplace(ye,tt,ct,mt,Tt,jt,le)},I.prototype.emplace=function(tt,ct,mt,Tt,jt,le,ye){var we=6*tt;return this.int16[we+0]=ct,this.int16[we+1]=mt,this.int16[we+2]=Tt,this.int16[we+3]=jt,this.int16[we+4]=le,this.int16[we+5]=ye,tt},I}(Va);No.prototype.bytesPerElement=12,ra("StructArrayLayout2i4i12",No);var _o=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(tt,ct,mt,Tt,jt,le){var ye=this.length;return this.resize(ye+1),this.emplace(ye,tt,ct,mt,Tt,jt,le)},I.prototype.emplace=function(tt,ct,mt,Tt,jt,le,ye){var we=4*tt,Ue=8*tt;return this.int16[we+0]=ct,this.int16[we+1]=mt,this.uint8[Ue+4]=Tt,this.uint8[Ue+5]=jt,this.uint8[Ue+6]=le,this.uint8[Ue+7]=ye,tt},I}(Va);_o.prototype.bytesPerElement=8,ra("StructArrayLayout2i4ub8",_o);var Ki=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(tt,ct,mt,Tt,jt,le,ye,we,Ue,er){var $e=this.length;return this.resize($e+1),this.emplace($e,tt,ct,mt,Tt,jt,le,ye,we,Ue,er)},I.prototype.emplace=function(tt,ct,mt,Tt,jt,le,ye,we,Ue,er,$e){var br=9*tt,zr=18*tt;return this.uint16[br+0]=ct,this.uint16[br+1]=mt,this.uint16[br+2]=Tt,this.uint16[br+3]=jt,this.uint16[br+4]=le,this.uint16[br+5]=ye,this.uint16[br+6]=we,this.uint16[br+7]=Ue,this.uint8[zr+16]=er,this.uint8[zr+17]=$e,tt},I}(Va);Ki.prototype.bytesPerElement=18,ra("StructArrayLayout8ui2ub18",Ki);var Ps=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(tt,ct,mt,Tt,jt,le,ye,we,Ue,er,$e,br){var zr=this.length;return this.resize(zr+1),this.emplace(zr,tt,ct,mt,Tt,jt,le,ye,we,Ue,er,$e,br)},I.prototype.emplace=function(tt,ct,mt,Tt,jt,le,ye,we,Ue,er,$e,br,zr){var ln=12*tt;return this.int16[ln+0]=ct,this.int16[ln+1]=mt,this.int16[ln+2]=Tt,this.int16[ln+3]=jt,this.uint16[ln+4]=le,this.uint16[ln+5]=ye,this.uint16[ln+6]=we,this.uint16[ln+7]=Ue,this.int16[ln+8]=er,this.int16[ln+9]=$e,this.int16[ln+10]=br,this.int16[ln+11]=zr,tt},I}(Va);Ps.prototype.bytesPerElement=24,ra("StructArrayLayout4i4ui4i24",Ps);var qf=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(tt,ct,mt){var Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,tt,ct,mt)},I.prototype.emplace=function(tt,ct,mt,Tt){var jt=3*tt;return this.float32[jt+0]=ct,this.float32[jt+1]=mt,this.float32[jt+2]=Tt,tt},I}(Va);qf.prototype.bytesPerElement=12,ra("StructArrayLayout3f12",qf);var tc=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(tt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,tt)},I.prototype.emplace=function(tt,ct){return this.uint32[1*tt+0]=ct,tt},I}(Va);tc.prototype.bytesPerElement=4,ra("StructArrayLayout1ul4",tc);var mf=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(tt,ct,mt,Tt,jt,le,ye,we,Ue){var er=this.length;return this.resize(er+1),this.emplace(er,tt,ct,mt,Tt,jt,le,ye,we,Ue)},I.prototype.emplace=function(tt,ct,mt,Tt,jt,le,ye,we,Ue,er){var $e=10*tt,br=5*tt;return this.int16[$e+0]=ct,this.int16[$e+1]=mt,this.int16[$e+2]=Tt,this.int16[$e+3]=jt,this.int16[$e+4]=le,this.int16[$e+5]=ye,this.uint32[br+3]=we,this.uint16[$e+8]=Ue,this.uint16[$e+9]=er,tt},I}(Va);mf.prototype.bytesPerElement=20,ra("StructArrayLayout6i1ul2ui20",mf);var Lf=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(tt,ct,mt,Tt,jt,le){var ye=this.length;return this.resize(ye+1),this.emplace(ye,tt,ct,mt,Tt,jt,le)},I.prototype.emplace=function(tt,ct,mt,Tt,jt,le,ye){var we=6*tt;return this.int16[we+0]=ct,this.int16[we+1]=mt,this.int16[we+2]=Tt,this.int16[we+3]=jt,this.int16[we+4]=le,this.int16[we+5]=ye,tt},I}(Va);Lf.prototype.bytesPerElement=12,ra("StructArrayLayout2i2i2i12",Lf);var bl=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(tt,ct,mt,Tt,jt){var le=this.length;return this.resize(le+1),this.emplace(le,tt,ct,mt,Tt,jt)},I.prototype.emplace=function(tt,ct,mt,Tt,jt,le){var ye=4*tt,we=8*tt;return this.float32[ye+0]=ct,this.float32[ye+1]=mt,this.float32[ye+2]=Tt,this.int16[we+6]=jt,this.int16[we+7]=le,tt},I}(Va);bl.prototype.bytesPerElement=16,ra("StructArrayLayout2f1f2i16",bl);var Uo=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(tt,ct,mt,Tt){var jt=this.length;return this.resize(jt+1),this.emplace(jt,tt,ct,mt,Tt)},I.prototype.emplace=function(tt,ct,mt,Tt,jt){var le=12*tt,ye=3*tt;return this.uint8[le+0]=ct,this.uint8[le+1]=mt,this.float32[ye+1]=Tt,this.float32[ye+2]=jt,tt},I}(Va);Uo.prototype.bytesPerElement=12,ra("StructArrayLayout2ub2f12",Uo);var wl=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(tt,ct,mt){var Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,tt,ct,mt)},I.prototype.emplace=function(tt,ct,mt,Tt){var jt=3*tt;return this.uint16[jt+0]=ct,this.uint16[jt+1]=mt,this.uint16[jt+2]=Tt,tt},I}(Va);wl.prototype.bytesPerElement=6,ra("StructArrayLayout3ui6",wl);var xf=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(tt,ct,mt,Tt,jt,le,ye,we,Ue,er,$e,br,zr,ln,qr,Sn,mn){var An=this.length;return this.resize(An+1),this.emplace(An,tt,ct,mt,Tt,jt,le,ye,we,Ue,er,$e,br,zr,ln,qr,Sn,mn)},I.prototype.emplace=function(tt,ct,mt,Tt,jt,le,ye,we,Ue,er,$e,br,zr,ln,qr,Sn,mn,An){var Pn=24*tt,On=12*tt,jn=48*tt;return this.int16[Pn+0]=ct,this.int16[Pn+1]=mt,this.uint16[Pn+2]=Tt,this.uint16[Pn+3]=jt,this.uint32[On+2]=le,this.uint32[On+3]=ye,this.uint32[On+4]=we,this.uint16[Pn+10]=Ue,this.uint16[Pn+11]=er,this.uint16[Pn+12]=$e,this.float32[On+7]=br,this.float32[On+8]=zr,this.uint8[jn+36]=ln,this.uint8[jn+37]=qr,this.uint8[jn+38]=Sn,this.uint32[On+10]=mn,this.int16[Pn+22]=An,tt},I}(Va);xf.prototype.bytesPerElement=48,ra("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",xf);var Pf=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(tt,ct,mt,Tt,jt,le,ye,we,Ue,er,$e,br,zr,ln,qr,Sn,mn,An,Pn,On,jn,Yn,wa,la,va,Ia,ya,ba){var Na=this.length;return this.resize(Na+1),this.emplace(Na,tt,ct,mt,Tt,jt,le,ye,we,Ue,er,$e,br,zr,ln,qr,Sn,mn,An,Pn,On,jn,Yn,wa,la,va,Ia,ya,ba)},I.prototype.emplace=function(tt,ct,mt,Tt,jt,le,ye,we,Ue,er,$e,br,zr,ln,qr,Sn,mn,An,Pn,On,jn,Yn,wa,la,va,Ia,ya,ba,Na){var Da=34*tt,Ka=17*tt;return this.int16[Da+0]=ct,this.int16[Da+1]=mt,this.int16[Da+2]=Tt,this.int16[Da+3]=jt,this.int16[Da+4]=le,this.int16[Da+5]=ye,this.int16[Da+6]=we,this.int16[Da+7]=Ue,this.uint16[Da+8]=er,this.uint16[Da+9]=$e,this.uint16[Da+10]=br,this.uint16[Da+11]=zr,this.uint16[Da+12]=ln,this.uint16[Da+13]=qr,this.uint16[Da+14]=Sn,this.uint16[Da+15]=mn,this.uint16[Da+16]=An,this.uint16[Da+17]=Pn,this.uint16[Da+18]=On,this.uint16[Da+19]=jn,this.uint16[Da+20]=Yn,this.uint16[Da+21]=wa,this.uint16[Da+22]=la,this.uint32[Ka+12]=va,this.float32[Ka+13]=Ia,this.float32[Ka+14]=ya,this.float32[Ka+15]=ba,this.float32[Ka+16]=Na,tt},I}(Va);Pf.prototype.bytesPerElement=68,ra("StructArrayLayout8i15ui1ul4f68",Pf);var ju=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(tt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,tt)},I.prototype.emplace=function(tt,ct){return this.float32[1*tt+0]=ct,tt},I}(Va);ju.prototype.bytesPerElement=4,ra("StructArrayLayout1f4",ju);var ec=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(tt,ct,mt){var Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,tt,ct,mt)},I.prototype.emplace=function(tt,ct,mt,Tt){var jt=3*tt;return this.int16[jt+0]=ct,this.int16[jt+1]=mt,this.int16[jt+2]=Tt,tt},I}(Va);ec.prototype.bytesPerElement=6,ra("StructArrayLayout3i6",ec);var Xl=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(tt,ct,mt){var Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,tt,ct,mt)},I.prototype.emplace=function(tt,ct,mt,Tt){var le=4*tt;return this.uint32[2*tt+0]=ct,this.uint16[le+2]=mt,this.uint16[le+3]=Tt,tt},I}(Va);Xl.prototype.bytesPerElement=8,ra("StructArrayLayout1ul2ui8",Xl);var bf=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(tt,ct){var mt=this.length;return this.resize(mt+1),this.emplace(mt,tt,ct)},I.prototype.emplace=function(tt,ct,mt){var Tt=2*tt;return this.uint16[Tt+0]=ct,this.uint16[Tt+1]=mt,tt},I}(Va);bf.prototype.bytesPerElement=4,ra("StructArrayLayout2ui4",bf);var Ku=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(tt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,tt)},I.prototype.emplace=function(tt,ct){return this.uint16[1*tt+0]=ct,tt},I}(Va);Ku.prototype.bytesPerElement=2,ra("StructArrayLayout1ui2",Ku);var jl=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(tt,ct){var mt=this.length;return this.resize(mt+1),this.emplace(mt,tt,ct)},I.prototype.emplace=function(tt,ct,mt){var Tt=2*tt;return this.float32[Tt+0]=ct,this.float32[Tt+1]=mt,tt},I}(Va);jl.prototype.bytesPerElement=8,ra("StructArrayLayout2f8",jl);var rc=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(tt,ct,mt,Tt){var jt=this.length;return this.resize(jt+1),this.emplace(jt,tt,ct,mt,Tt)},I.prototype.emplace=function(tt,ct,mt,Tt,jt){var le=4*tt;return this.float32[le+0]=ct,this.float32[le+1]=mt,this.float32[le+2]=Tt,this.float32[le+3]=jt,tt},I}(Va);rc.prototype.bytesPerElement=16,ra("StructArrayLayout4f16",rc);var wc=function(R){function I(){R.apply(this,arguments)}R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I;var V={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return V.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},V.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},V.x1.get=function(){return this._structArray.int16[this._pos2+2]},V.y1.get=function(){return this._structArray.int16[this._pos2+3]},V.x2.get=function(){return this._structArray.int16[this._pos2+4]},V.y2.get=function(){return this._structArray.int16[this._pos2+5]},V.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},V.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},V.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},V.anchorPoint.get=function(){return new e(this.anchorPointX,this.anchorPointY)},Object.defineProperties(I.prototype,V),I}(ti);wc.prototype.size=20;var Kl=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.get=function(tt){return new wc(this,tt)},I}(mf);ra("CollisionBoxArray",Kl);var nc=function(R){function I(){R.apply(this,arguments)}R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I;var V={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return V.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},V.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},V.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},V.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},V.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},V.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},V.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},V.segment.get=function(){return this._structArray.uint16[this._pos2+10]},V.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},V.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},V.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},V.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},V.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},V.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},V.placedOrientation.set=function(tt){this._structArray.uint8[this._pos1+37]=tt},V.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},V.hidden.set=function(tt){this._structArray.uint8[this._pos1+38]=tt},V.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},V.crossTileID.set=function(tt){this._structArray.uint32[this._pos4+10]=tt},V.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(I.prototype,V),I}(ti);nc.prototype.size=48;var Ju=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.get=function(tt){return new nc(this,tt)},I}(xf);ra("PlacedSymbolArray",Ju);var Tc=function(R){function I(){R.apply(this,arguments)}R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I;var V={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return V.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},V.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},V.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},V.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},V.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},V.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},V.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},V.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},V.key.get=function(){return this._structArray.uint16[this._pos2+8]},V.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},V.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},V.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},V.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},V.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},V.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},V.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},V.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},V.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},V.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},V.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},V.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},V.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},V.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},V.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},V.crossTileID.set=function(tt){this._structArray.uint32[this._pos4+12]=tt},V.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},V.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},V.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},V.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(I.prototype,V),I}(ti);Tc.prototype.size=68;var Ac=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.get=function(tt){return new Tc(this,tt)},I}(Pf);ra("SymbolInstanceArray",Ac);var Ds=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.getoffsetX=function(tt){return this.float32[1*tt+0]},I}(ju);ra("GlyphOffsetArray",Ds);var Mc=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.getx=function(tt){return this.int16[3*tt+0]},I.prototype.gety=function(tt){return this.int16[3*tt+1]},I.prototype.gettileUnitDistanceFromAnchor=function(tt){return this.int16[3*tt+2]},I}(ec);ra("SymbolLineVertexArray",Mc);var Sc=function(R){function I(){R.apply(this,arguments)}R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I;var V={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return V.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},V.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},V.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(I.prototype,V),I}(ti);Sc.prototype.size=8;var ac=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.get=function(tt){return new Sc(this,tt)},I}(Xl);ra("FeatureIndexArray",ac);var lt=Wa([{name:"a_pos",components:2,type:"Int16"}],4).members,Y=function(I){void 0===I&&(I=[]),this.segments=I};function ht(R,I){return 256*(R=f(Math.floor(R),0,255))+f(Math.floor(I),0,255)}Y.prototype.prepareSegment=function(I,V,tt,ct){var mt=this.segments[this.segments.length-1];return I>Y.MAX_VERTEX_ARRAY_LENGTH&&N("Max vertices per segment is "+Y.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+I),(!mt||mt.vertexLength+I>Y.MAX_VERTEX_ARRAY_LENGTH||mt.sortKey!==ct)&&(mt={vertexOffset:V.length,primitiveOffset:tt.length,vertexLength:0,primitiveLength:0},void 0!==ct&&(mt.sortKey=ct),this.segments.push(mt)),mt},Y.prototype.get=function(){return this.segments},Y.prototype.destroy=function(){for(var I=0,V=this.segments;I<V.length;I+=1){var tt=V[I];for(var ct in tt.vaos)tt.vaos[ct].destroy()}},Y.simpleSegment=function(I,V,tt,ct){return new Y([{vertexOffset:I,primitiveOffset:V,vertexLength:tt,primitiveLength:ct,vaos:{},sortKey:0}])},Y.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ra("SegmentVector",Y);var _=Wa([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),vt=P(function(R){R.exports=function I(V,tt){var ct,mt,Tt,jt,le,ye,we,Ue;for(mt=V.length-(ct=3&V.length),Tt=tt,le=3432918353,ye=461845907,Ue=0;Ue<mt;)we=255&V.charCodeAt(Ue)|(255&V.charCodeAt(++Ue))<<8|(255&V.charCodeAt(++Ue))<<16|(255&V.charCodeAt(++Ue))<<24,++Ue,Tt=27492+(65535&(jt=5*(65535&(Tt=(Tt^=we=(65535&(we=(we=(65535&we)*le+(((we>>>16)*le&65535)<<16)&4294967295)<<15|we>>>17))*ye+(((we>>>16)*ye&65535)<<16)&4294967295)<<13|Tt>>>19))+((5*(Tt>>>16)&65535)<<16)&4294967295))+((58964+(jt>>>16)&65535)<<16);switch(we=0,ct){case 3:we^=(255&V.charCodeAt(Ue+2))<<16;case 2:we^=(255&V.charCodeAt(Ue+1))<<8;case 1:Tt^=we=(65535&(we=(we=(65535&(we^=255&V.charCodeAt(Ue)))*le+(((we>>>16)*le&65535)<<16)&4294967295)<<15|we>>>17))*ye+(((we>>>16)*ye&65535)<<16)&4294967295}return Tt^=V.length,Tt=2246822507*(65535&(Tt^=Tt>>>16))+((2246822507*(Tt>>>16)&65535)<<16)&4294967295,Tt=3266489909*(65535&(Tt^=Tt>>>13))+((3266489909*(Tt>>>16)&65535)<<16)&4294967295,(Tt^=Tt>>>16)>>>0}}),Ct=P(function(R){R.exports=function I(V,tt){for(var jt,ct=V.length,mt=tt^ct,Tt=0;ct>=4;)jt=1540483477*(65535&(jt=255&V.charCodeAt(Tt)|(255&V.charCodeAt(++Tt))<<8|(255&V.charCodeAt(++Tt))<<16|(255&V.charCodeAt(++Tt))<<24))+((1540483477*(jt>>>16)&65535)<<16),mt=1540483477*(65535&mt)+((1540483477*(mt>>>16)&65535)<<16)^(jt=1540483477*(65535&(jt^=jt>>>24))+((1540483477*(jt>>>16)&65535)<<16)),ct-=4,++Tt;switch(ct){case 3:mt^=(255&V.charCodeAt(Tt+2))<<16;case 2:mt^=(255&V.charCodeAt(Tt+1))<<8;case 1:mt=1540483477*(65535&(mt^=255&V.charCodeAt(Tt)))+((1540483477*(mt>>>16)&65535)<<16)}return mt=1540483477*(65535&(mt^=mt>>>13))+((1540483477*(mt>>>16)&65535)<<16),(mt^=mt>>>15)>>>0}}),Yt=vt,ge=Ct;Yt.murmur3=vt,Yt.murmur2=ge;var ze=function(){this.ids=[],this.positions=[],this.indexed=!1};ze.prototype.add=function(I,V,tt,ct){this.ids.push(ur(I)),this.positions.push(V,tt,ct)},ze.prototype.getPositions=function(I){for(var V=ur(I),tt=0,ct=this.ids.length-1;tt<ct;){var mt=tt+ct>>1;this.ids[mt]>=V?ct=mt:tt=mt+1}for(var Tt=[];this.ids[tt]===V;)Tt.push({index:this.positions[3*tt],start:this.positions[3*tt+1],end:this.positions[3*tt+2]}),tt++;return Tt},ze.serialize=function(I,V){var tt=new Float64Array(I.ids),ct=new Uint32Array(I.positions);return mr(tt,ct,0,tt.length-1),V&&V.push(tt.buffer,ct.buffer),{ids:tt,positions:ct}},ze.deserialize=function(I){var V=new ze;return V.ids=I.ids,V.positions=I.positions,V.indexed=!0,V};var Je=Math.pow(2,53)-1;function ur(R){var I=+R;return!isNaN(I)&&I<=Je?I:Yt(String(R))}function mr(R,I,V,tt){for(;V<tt;){for(var ct=R[V+tt>>1],mt=V-1,Tt=tt+1;;){do{mt++}while(R[mt]<ct);do{Tt--}while(R[Tt]>ct);if(mt>=Tt)break;Ir(R,mt,Tt),Ir(I,3*mt,3*Tt),Ir(I,3*mt+1,3*Tt+1),Ir(I,3*mt+2,3*Tt+2)}Tt-V<tt-Tt?(mr(R,I,V,Tt),V=Tt+1):(mr(R,I,Tt+1,tt),tt=Tt)}}function Ir(R,I,V){var tt=R[I];R[I]=R[V],R[V]=tt}ra("FeaturePositionMap",ze);var Gr=function(I,V){this.gl=I.gl,this.location=V},Yr=function(R){function I(V,tt){R.call(this,V,tt),this.current=0}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.set=function(tt){this.current!==tt&&(this.current=tt,this.gl.uniform1i(this.location,tt))},I}(Gr),Ur=function(R){function I(V,tt){R.call(this,V,tt),this.current=0}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.set=function(tt){this.current!==tt&&(this.current=tt,this.gl.uniform1f(this.location,tt))},I}(Gr),Kr=function(R){function I(V,tt){R.call(this,V,tt),this.current=[0,0]}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.set=function(tt){(tt[0]!==this.current[0]||tt[1]!==this.current[1])&&(this.current=tt,this.gl.uniform2f(this.location,tt[0],tt[1]))},I}(Gr),cn=function(R){function I(V,tt){R.call(this,V,tt),this.current=[0,0,0]}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.set=function(tt){(tt[0]!==this.current[0]||tt[1]!==this.current[1]||tt[2]!==this.current[2])&&(this.current=tt,this.gl.uniform3f(this.location,tt[0],tt[1],tt[2]))},I}(Gr),Cn=function(R){function I(V,tt){R.call(this,V,tt),this.current=[0,0,0,0]}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.set=function(tt){(tt[0]!==this.current[0]||tt[1]!==this.current[1]||tt[2]!==this.current[2]||tt[3]!==this.current[3])&&(this.current=tt,this.gl.uniform4f(this.location,tt[0],tt[1],tt[2],tt[3]))},I}(Gr),Rn=function(R){function I(V,tt){R.call(this,V,tt),this.current=Ga.transparent}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.set=function(tt){(tt.r!==this.current.r||tt.g!==this.current.g||tt.b!==this.current.b||tt.a!==this.current.a)&&(this.current=tt,this.gl.uniform4f(this.location,tt.r,tt.g,tt.b,tt.a))},I}(Gr),Un=new Float32Array(16),Hn=function(R){function I(V,tt){R.call(this,V,tt),this.current=Un}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.set=function(tt){if(tt[12]!==this.current[12]||tt[0]!==this.current[0])return this.current=tt,void this.gl.uniformMatrix4fv(this.location,!1,tt);for(var ct=1;ct<16;ct++)if(tt[ct]!==this.current[ct]){this.current=tt,this.gl.uniformMatrix4fv(this.location,!1,tt);break}},I}(Gr);function Vn(R){return[ht(255*R.r,255*R.g),ht(255*R.b,255*R.a)]}var _n=function(I,V,tt){this.value=I,this.uniformNames=V.map(function(ct){return"u_"+ct}),this.type=tt};_n.prototype.setUniform=function(I,V,tt){I.set(tt.constantOr(this.value))},_n.prototype.getBinding=function(I,V,tt){return"color"===this.type?new Rn(I,V):new Ur(I,V)};var sa=function(I,V){this.uniformNames=V.map(function(tt){return"u_"+tt}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};sa.prototype.setConstantPatternPositions=function(I,V){this.pixelRatioFrom=V.pixelRatio,this.pixelRatioTo=I.pixelRatio,this.patternFrom=V.tlbr,this.patternTo=I.tlbr},sa.prototype.setUniform=function(I,V,tt,ct){var mt="u_pattern_to"===ct?this.patternTo:"u_pattern_from"===ct?this.patternFrom:"u_pixel_ratio_to"===ct?this.pixelRatioTo:"u_pixel_ratio_from"===ct?this.pixelRatioFrom:null;mt&&I.set(mt)},sa.prototype.getBinding=function(I,V,tt){return"u_pattern"===tt.substr(0,9)?new Cn(I,V):new Ur(I,V)};var ia=function(I,V,tt,ct){this.expression=I,this.type=tt,this.maxValue=0,this.paintVertexAttributes=V.map(function(mt){return{name:"a_"+mt,type:"Float32",components:"color"===tt?2:1,offset:0}}),this.paintVertexArray=new ct};ia.prototype.populatePaintArray=function(I,V,tt,ct,mt){var Tt=this.paintVertexArray.length,jt=this.expression.evaluate(new da(0),V,{},ct,[],mt);this.paintVertexArray.resize(I),this._setPaintValue(Tt,I,jt)},ia.prototype.updatePaintArray=function(I,V,tt,ct){var mt=this.expression.evaluate({zoom:0},tt,ct);this._setPaintValue(I,V,mt)},ia.prototype._setPaintValue=function(I,V,tt){if("color"===this.type)for(var ct=Vn(tt),mt=I;mt<V;mt++)this.paintVertexArray.emplace(mt,ct[0],ct[1]);else{for(var Tt=I;Tt<V;Tt++)this.paintVertexArray.emplace(Tt,tt);this.maxValue=Math.max(this.maxValue,Math.abs(tt))}},ia.prototype.upload=function(I){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=I.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ia.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var ha=function(I,V,tt,ct,mt,Tt){this.expression=I,this.uniformNames=V.map(function(jt){return"u_"+jt+"_t"}),this.type=tt,this.useIntegerZoom=ct,this.zoom=mt,this.maxValue=0,this.paintVertexAttributes=V.map(function(jt){return{name:"a_"+jt,type:"Float32",components:"color"===tt?4:2,offset:0}}),this.paintVertexArray=new Tt};ha.prototype.populatePaintArray=function(I,V,tt,ct,mt){var Tt=this.expression.evaluate(new da(this.zoom),V,{},ct,[],mt),jt=this.expression.evaluate(new da(this.zoom+1),V,{},ct,[],mt),le=this.paintVertexArray.length;this.paintVertexArray.resize(I),this._setPaintValue(le,I,Tt,jt)},ha.prototype.updatePaintArray=function(I,V,tt,ct){var mt=this.expression.evaluate({zoom:this.zoom},tt,ct),Tt=this.expression.evaluate({zoom:this.zoom+1},tt,ct);this._setPaintValue(I,V,mt,Tt)},ha.prototype._setPaintValue=function(I,V,tt,ct){if("color"===this.type)for(var mt=Vn(tt),Tt=Vn(ct),jt=I;jt<V;jt++)this.paintVertexArray.emplace(jt,mt[0],mt[1],Tt[0],Tt[1]);else{for(var le=I;le<V;le++)this.paintVertexArray.emplace(le,tt,ct);this.maxValue=Math.max(this.maxValue,Math.abs(tt),Math.abs(ct))}},ha.prototype.upload=function(I){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=I.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ha.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ha.prototype.setUniform=function(I,V){var tt=this.useIntegerZoom?Math.floor(V.zoom):V.zoom,ct=f(this.expression.interpolationFactor(tt,this.zoom,this.zoom+1),0,1);I.set(ct)},ha.prototype.getBinding=function(I,V,tt){return new Ur(I,V)};var ga=function(I,V,tt,ct,mt,Tt){this.expression=I,this.type=V,this.useIntegerZoom=tt,this.zoom=ct,this.layerId=Tt,this.zoomInPaintVertexArray=new mt,this.zoomOutPaintVertexArray=new mt};ga.prototype.populatePaintArray=function(I,V,tt){var ct=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(I),this.zoomOutPaintVertexArray.resize(I),this._setPaintValues(ct,I,V.patterns&&V.patterns[this.layerId],tt)},ga.prototype.updatePaintArray=function(I,V,tt,ct,mt){this._setPaintValues(I,V,tt.patterns&&tt.patterns[this.layerId],mt)},ga.prototype._setPaintValues=function(I,V,tt,ct){if(ct&&tt){var le=ct[tt.min],ye=ct[tt.mid],we=ct[tt.max];if(le&&ye&&we)for(var Ue=I;Ue<V;Ue++)this.zoomInPaintVertexArray.emplace(Ue,ye.tl[0],ye.tl[1],ye.br[0],ye.br[1],le.tl[0],le.tl[1],le.br[0],le.br[1],ye.pixelRatio,le.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ue,ye.tl[0],ye.tl[1],ye.br[0],ye.br[1],we.tl[0],we.tl[1],we.br[0],we.br[1],ye.pixelRatio,we.pixelRatio)}},ga.prototype.upload=function(I){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=I.createVertexBuffer(this.zoomInPaintVertexArray,_.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=I.createVertexBuffer(this.zoomOutPaintVertexArray,_.members,this.expression.isStateDependent))},ga.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ca=function(I,V,tt,ct){this.binders={},this.layoutAttributes=ct,this._buffers=[];var mt=[];for(var Tt in I.paint._values)if(tt(Tt)){var jt=I.paint.get(Tt);if(jt instanceof La&&Jo(jt.property.specification)){var le=$a(Tt,I.type),ye=jt.value,we=jt.property.specification.type,Ue=jt.property.useIntegerZoom,er=jt.property.specification["property-type"],$e="cross-faded"===er||"cross-faded-data-driven"===er;if("constant"===ye.kind)this.binders[Tt]=$e?new sa(ye.value,le):new _n(ye.value,le,we),mt.push("/u_"+Tt);else if("source"===ye.kind||$e){var br=Ha(Tt,we,"source");this.binders[Tt]=$e?new ga(ye,we,Ue,V,br,I.id):new ia(ye,le,we,br),mt.push("/a_"+Tt)}else{var zr=Ha(Tt,we,"composite");this.binders[Tt]=new ha(ye,le,we,Ue,V,zr),mt.push("/z_"+Tt)}}}this.cacheKey=mt.sort().join("")};Ca.prototype.getMaxValue=function(I){var V=this.binders[I];return V instanceof ia||V instanceof ha?V.maxValue:0},Ca.prototype.populatePaintArrays=function(I,V,tt,ct,mt){for(var Tt in this.binders){var jt=this.binders[Tt];(jt instanceof ia||jt instanceof ha||jt instanceof ga)&&jt.populatePaintArray(I,V,tt,ct,mt)}},Ca.prototype.setConstantPatternPositions=function(I,V){for(var tt in this.binders){var ct=this.binders[tt];ct instanceof sa&&ct.setConstantPatternPositions(I,V)}},Ca.prototype.updatePaintArrays=function(I,V,tt,ct,mt){var Tt=!1;for(var jt in I)for(var ye=0,we=V.getPositions(jt);ye<we.length;ye+=1){var Ue=we[ye],er=tt.feature(Ue.index);for(var $e in this.binders){var br=this.binders[$e];if((br instanceof ia||br instanceof ha||br instanceof ga)&&!0===br.expression.isStateDependent){var zr=ct.paint.get($e);br.expression=zr.value,br.updatePaintArray(Ue.start,Ue.end,er,I[jt],mt),Tt=!0}}}return Tt},Ca.prototype.defines=function(){var I=[];for(var V in this.binders){var tt=this.binders[V];(tt instanceof _n||tt instanceof sa)&&I.push.apply(I,tt.uniformNames.map(function(ct){return"#define HAS_UNIFORM_"+ct}))}return I},Ca.prototype.getPaintVertexBuffers=function(){return this._buffers},Ca.prototype.getUniforms=function(I,V){var tt=[];for(var ct in this.binders){var mt=this.binders[ct];if(mt instanceof _n||mt instanceof sa||mt instanceof ha)for(var Tt=0,jt=mt.uniformNames;Tt<jt.length;Tt+=1){var le=jt[Tt];if(V[le]){var ye=mt.getBinding(I,V[le],le);tt.push({name:le,property:ct,binding:ye})}}}return tt},Ca.prototype.setUniforms=function(I,V,tt,ct){for(var mt=0,Tt=V;mt<Tt.length;mt+=1){var jt=Tt[mt],le=jt.name,ye=jt.property;this.binders[ye].setUniform(jt.binding,ct,tt.get(ye),le)}},Ca.prototype.updatePaintBuffers=function(I){for(var V in this._buffers=[],this.binders){var tt=this.binders[V];if(I&&tt instanceof ga){var ct=2===I.fromScale?tt.zoomInPaintVertexBuffer:tt.zoomOutPaintVertexBuffer;ct&&this._buffers.push(ct)}else(tt instanceof ia||tt instanceof ha)&&tt.paintVertexBuffer&&this._buffers.push(tt.paintVertexBuffer)}},Ca.prototype.upload=function(I){for(var V in this.binders){var tt=this.binders[V];(tt instanceof ia||tt instanceof ha||tt instanceof ga)&&tt.upload(I)}this.updatePaintBuffers()},Ca.prototype.destroy=function(){for(var I in this.binders){var V=this.binders[I];(V instanceof ia||V instanceof ha||V instanceof ga)&&V.destroy()}};var Fa=function(I,V,tt,ct){void 0===ct&&(ct=function(){return!0}),this.programConfigurations={};for(var mt=0,Tt=V;mt<Tt.length;mt+=1){var jt=Tt[mt];this.programConfigurations[jt.id]=new Ca(jt,tt,ct,I)}this.needsUpload=!1,this._featureMap=new ze,this._bufferOffset=0};function $a(R,I){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[R]||[R.replace(I+"-","").replace(/-/g,"_")]}function Ha(R,I,V){var tt={color:{source:jl,composite:rc},number:{source:ju,composite:jl}},ct=function Oa(R){return{"line-pattern":{source:Ki,composite:Ki},"fill-pattern":{source:Ki,composite:Ki},"fill-extrusion-pattern":{source:Ki,composite:Ki}}[R]}(R);return ct&&ct[V]||tt[I][V]}Fa.prototype.populatePaintArrays=function(I,V,tt,ct,mt,Tt){for(var jt in this.programConfigurations)this.programConfigurations[jt].populatePaintArrays(I,V,ct,mt,Tt);void 0!==V.id&&this._featureMap.add(V.id,tt,this._bufferOffset,I),this._bufferOffset=I,this.needsUpload=!0},Fa.prototype.updatePaintArrays=function(I,V,tt,ct){for(var mt=0,Tt=tt;mt<Tt.length;mt+=1){var jt=Tt[mt];this.needsUpload=this.programConfigurations[jt.id].updatePaintArrays(I,this._featureMap,V,jt,ct)||this.needsUpload}},Fa.prototype.get=function(I){return this.programConfigurations[I]},Fa.prototype.upload=function(I){if(this.needsUpload){for(var V in this.programConfigurations)this.programConfigurations[V].upload(I);this.needsUpload=!1}},Fa.prototype.destroy=function(){for(var I in this.programConfigurations)this.programConfigurations[I].destroy()},ra("ConstantBinder",_n),ra("CrossFadedConstantBinder",sa),ra("SourceExpressionBinder",ia),ra("CrossFadedCompositeBinder",ga),ra("CompositeExpressionBinder",ha),ra("ProgramConfiguration",Ca,{omit:["_buffers"]}),ra("ProgramConfigurationSet",Fa);var Ta=8192;var ni=function _a(R){return{min:-1*Math.pow(2,R-1),max:Math.pow(2,R-1)-1}}(15);function oi(R){for(var I=Ta/R.extent,V=R.loadGeometry(),tt=0;tt<V.length;tt++)for(var ct=V[tt],mt=0;mt<ct.length;mt++){var Tt=ct[mt];Tt.x=Math.round(Tt.x*I),Tt.y=Math.round(Tt.y*I),(Tt.x<ni.min||Tt.x>ni.max||Tt.y<ni.min||Tt.y>ni.max)&&(N("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Tt.x=f(Tt.x,ni.min,ni.max),Tt.y=f(Tt.y,ni.min,ni.max))}return V}function Ya(R,I,V,tt,ct){R.emplaceBack(2*I+(tt+1)/2,2*V+(ct+1)/2)}var ci=function(I){this.zoom=I.zoom,this.overscaling=I.overscaling,this.layers=I.layers,this.layerIds=this.layers.map(function(V){return V.id}),this.index=I.index,this.hasPattern=!1,this.layoutVertexArray=new io,this.indexArray=new wl,this.segments=new Y,this.programConfigurations=new Fa(lt,I.layers,I.zoom),this.stateDependentLayerIds=this.layers.filter(function(V){return V.isStateDependent()}).map(function(V){return V.id})};function za(R,I){for(var V=0;V<R.length;V++)if(Co(I,R[V]))return!0;for(var tt=0;tt<I.length;tt++)if(Co(R,I[tt]))return!0;return!!ps(R,I)}function Za(R,I,V){return!(!Co(R,I)&&!Ks(I,R,V))}function Ri(R,I){if(1===R.length)return Js(I,R[0]);for(var V=0;V<I.length;V++)for(var tt=I[V],ct=0;ct<tt.length;ct++)if(Co(R,tt[ct]))return!0;for(var mt=0;mt<R.length;mt++)if(Js(I,R[mt]))return!0;for(var Tt=0;Tt<I.length;Tt++)if(ps(R,I[Tt]))return!0;return!1}function ds(R,I,V){if(R.length>1){if(ps(R,I))return!0;for(var tt=0;tt<I.length;tt++)if(Ks(I[tt],R,V))return!0}for(var ct=0;ct<R.length;ct++)if(Ks(R[ct],I,V))return!0;return!1}function ps(R,I){if(0===R.length||0===I.length)return!1;for(var V=0;V<R.length-1;V++)for(var tt=R[V],ct=R[V+1],mt=0;mt<I.length-1;mt++)if(js(tt,ct,I[mt],I[mt+1]))return!0;return!1}function js(R,I,V,tt){return k(R,V,tt)!==k(I,V,tt)&&k(R,I,V)!==k(R,I,tt)}function Ks(R,I,V){var tt=V*V;if(1===I.length)return R.distSqr(I[0])<tt;for(var ct=1;ct<I.length;ct++)if(Tl(R,I[ct-1],I[ct])<tt)return!0;return!1}function Tl(R,I,V){var tt=I.distSqr(V);if(0===tt)return R.distSqr(I);var ct=((R.x-I.x)*(V.x-I.x)+(R.y-I.y)*(V.y-I.y))/tt;return R.distSqr(ct<0?I:ct>1?V:V.sub(I)._mult(ct)._add(I))}function Js(R,I){for(var tt,ct,mt,V=!1,Tt=0;Tt<R.length;Tt++)for(var jt=0,le=(tt=R[Tt]).length-1;jt<tt.length;le=jt++)(ct=tt[jt]).y>I.y!=(mt=tt[le]).y>I.y&&I.x<(mt.x-ct.x)*(I.y-ct.y)/(mt.y-ct.y)+ct.x&&(V=!V);return V}function Co(R,I){for(var V=!1,tt=0,ct=R.length-1;tt<R.length;ct=tt++){var mt=R[tt],Tt=R[ct];mt.y>I.y!=Tt.y>I.y&&I.x<(Tt.x-mt.x)*(I.y-mt.y)/(Tt.y-mt.y)+mt.x&&(V=!V)}return V}function fo(R,I,V){var tt=V[0],ct=V[2];if(R.x<tt.x&&I.x<tt.x||R.x>ct.x&&I.x>ct.x||R.y<tt.y&&I.y<tt.y||R.y>ct.y&&I.y>ct.y)return!1;var mt=k(R,I,V[0]);return mt!==k(R,I,V[1])||mt!==k(R,I,V[2])||mt!==k(R,I,V[3])}function qo(R,I,V){var tt=I.paint.get(R).value;return"constant"===tt.kind?tt.value:V.programConfigurations.get(I.id).getMaxValue(R)}function Qs(R){return Math.sqrt(R[0]*R[0]+R[1]*R[1])}function Rs(R,I,V,tt,ct){if(!I[0]&&!I[1])return R;var mt=e.convert(I)._mult(ct);"viewport"===V&&mt._rotate(-tt);for(var Tt=[],jt=0;jt<R.length;jt++)Tt.push(R[jt].sub(mt));return Tt}ci.prototype.populate=function(I,V,tt){var ct=this.layers[0],mt=[],Tt=null;"circle"===ct.type&&(Tt=ct.layout.get("circle-sort-key"));for(var jt=0,le=I;jt<le.length;jt+=1){var ye=le[jt],we=ye.feature,Ue=ye.id,er=ye.index,$e=ye.sourceLayerIndex,br=this.layers[0]._featureFilter.needGeometry,zr={type:we.type,id:Ue,properties:we.properties,geometry:br?oi(we):[]};if(this.layers[0]._featureFilter.filter(new da(this.zoom),zr,tt)){br||(zr.geometry=oi(we));var ln=Tt?Tt.evaluate(zr,{},tt):void 0;mt.push({id:Ue,properties:we.properties,type:we.type,sourceLayerIndex:$e,index:er,geometry:zr.geometry,patterns:{},sortKey:ln})}}Tt&&mt.sort(function(la,va){return la.sortKey-va.sortKey});for(var Sn=0,mn=mt;Sn<mn.length;Sn+=1){var An=mn[Sn],On=An.geometry,jn=An.index,Yn=An.sourceLayerIndex,wa=I[jn].feature;this.addFeature(An,On,jn,tt),V.featureIndex.insert(wa,On,jn,Yn,this.index)}},ci.prototype.update=function(I,V,tt){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(I,V,this.stateDependentLayers,tt)},ci.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ci.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ci.prototype.upload=function(I){this.uploaded||(this.layoutVertexBuffer=I.createVertexBuffer(this.layoutVertexArray,lt),this.indexBuffer=I.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(I),this.uploaded=!0},ci.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ci.prototype.addFeature=function(I,V,tt,ct){for(var mt=0,Tt=V;mt<Tt.length;mt+=1)for(var le=0,ye=Tt[mt];le<ye.length;le+=1){var we=ye[le],Ue=we.x,er=we.y;if(!(Ue<0||Ue>=Ta||er<0||er>=Ta)){var $e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,I.sortKey),br=$e.vertexLength;Ya(this.layoutVertexArray,Ue,er,-1,-1),Ya(this.layoutVertexArray,Ue,er,1,-1),Ya(this.layoutVertexArray,Ue,er,1,1),Ya(this.layoutVertexArray,Ue,er,-1,1),this.indexArray.emplaceBack(br,br+1,br+2),this.indexArray.emplaceBack(br,br+3,br+2),$e.vertexLength+=4,$e.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,I,tt,{},ct)},ra("CircleBucket",ci,{omit:["layers"]});var $s=new ri({"circle-sort-key":new ca(Ze.layout_circle["circle-sort-key"])}),bu={paint:new ri({"circle-radius":new ca(Ze.paint_circle["circle-radius"]),"circle-color":new ca(Ze.paint_circle["circle-color"]),"circle-blur":new ca(Ze.paint_circle["circle-blur"]),"circle-opacity":new ca(Ze.paint_circle["circle-opacity"]),"circle-translate":new Xn(Ze.paint_circle["circle-translate"]),"circle-translate-anchor":new Xn(Ze.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Xn(Ze.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Xn(Ze.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ca(Ze.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ca(Ze.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ca(Ze.paint_circle["circle-stroke-opacity"])}),layout:$s},oo="undefined"!=typeof Float32Array?Float32Array:Array;function Ff(R){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}function $u(R,I,V){var tt=I[0],ct=I[1],mt=I[2],Tt=I[3],jt=I[4],le=I[5],ye=I[6],we=I[7],Ue=I[8],er=I[9],$e=I[10],br=I[11],zr=I[12],ln=I[13],qr=I[14],Sn=I[15],mn=V[0],An=V[1],Pn=V[2],On=V[3];return R[0]=mn*tt+An*jt+Pn*Ue+On*zr,R[1]=mn*ct+An*le+Pn*er+On*ln,R[2]=mn*mt+An*ye+Pn*$e+On*qr,R[3]=mn*Tt+An*we+Pn*br+On*Sn,R[4]=(mn=V[4])*tt+(An=V[5])*jt+(Pn=V[6])*Ue+(On=V[7])*zr,R[5]=mn*ct+An*le+Pn*er+On*ln,R[6]=mn*mt+An*ye+Pn*$e+On*qr,R[7]=mn*Tt+An*we+Pn*br+On*Sn,R[8]=(mn=V[8])*tt+(An=V[9])*jt+(Pn=V[10])*Ue+(On=V[11])*zr,R[9]=mn*ct+An*le+Pn*er+On*ln,R[10]=mn*mt+An*ye+Pn*$e+On*qr,R[11]=mn*Tt+An*we+Pn*br+On*Sn,R[12]=(mn=V[12])*tt+(An=V[13])*jt+(Pn=V[14])*Ue+(On=V[15])*zr,R[13]=mn*ct+An*le+Pn*er+On*ln,R[14]=mn*mt+An*ye+Pn*$e+On*qr,R[15]=mn*Tt+An*we+Pn*br+On*Sn,R}Math.hypot||(Math.hypot=function(){for(var R=arguments,I=0,V=arguments.length;V--;)I+=R[V]*R[V];return Math.sqrt(I)});var Qc=$u;var Uv=function _c(R,I,V){return R[0]=I[0]-V[0],R[1]=I[1]-V[1],R[2]=I[2]-V[2],R};function Lc(R,I,V){var tt=I[0],ct=I[1],mt=I[2],Tt=I[3];return R[0]=V[0]*tt+V[4]*ct+V[8]*mt+V[12]*Tt,R[1]=V[1]*tt+V[5]*ct+V[9]*mt+V[13]*Tt,R[2]=V[2]*tt+V[6]*ct+V[10]*mt+V[14]*Tt,R[3]=V[3]*tt+V[7]*ct+V[11]*mt+V[15]*Tt,R}(function Af(){var R=new oo(3);return oo!=Float32Array&&(R[0]=0,R[1]=0,R[2]=0),R})(),function Vv(){var R=new oo(4);return oo!=Float32Array&&(R[0]=0,R[1]=0,R[2]=0,R[3]=0),R}();var Zv=function Yv(R){var I=R[0],V=R[1];return I*I+V*V},Xv=(function Wv(){var R=new oo(2);return oo!=Float32Array&&(R[0]=0,R[1]=0),R}(),function(R){function I(V){R.call(this,V,bu)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.createBucket=function(tt){return new ci(tt)},I.prototype.queryRadius=function(tt){var ct=tt;return qo("circle-radius",this,ct)+qo("circle-stroke-width",this,ct)+Qs(this.paint.get("circle-translate"))},I.prototype.queryIntersectsFeature=function(tt,ct,mt,Tt,jt,le,ye,we){for(var Ue=Rs(tt,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),le.angle,ye),br=this.paint.get("circle-radius").evaluate(ct,mt)+this.paint.get("circle-stroke-width").evaluate(ct,mt),zr="map"===this.paint.get("circle-pitch-alignment"),ln=zr?Ue:function jv(R,I){return R.map(function(V){return Sh(V,I)})}(Ue,we),qr=zr?br*ye:br,Sn=0,mn=Tt;Sn<mn.length;Sn+=1)for(var Pn=0,On=mn[Sn];Pn<On.length;Pn+=1){var jn=On[Pn],Yn=zr?jn:Sh(jn,we),wa=qr,la=Lc([],[jn.x,jn.y,0,1],we);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?wa*=la[3]/le.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(wa*=le.cameraToCenterDistance/la[3]),Za(ln,Yn,wa))return!0}return!1},I}(Mi));function Sh(R,I){var V=Lc([],[R.x,R.y,0,1],I);return new e(V[0]/V[3],V[1]/V[3])}var Eh=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I}(ci);function th(R,I,V,tt){var ct=I.width,mt=I.height;if(tt){if(tt instanceof Uint8ClampedArray)tt=new Uint8Array(tt.buffer);else if(tt.length!==ct*mt*V)throw new RangeError("mismatched image size")}else tt=new Uint8Array(ct*mt*V);return R.width=ct,R.height=mt,R.data=tt,R}function Ch(R,I,V){var tt=I.width,ct=I.height;if(tt!==R.width||ct!==R.height){var mt=th({},{width:tt,height:ct},V);eh(R,mt,{x:0,y:0},{x:0,y:0},{width:Math.min(R.width,tt),height:Math.min(R.height,ct)},V),R.width=tt,R.height=ct,R.data=mt.data}}function eh(R,I,V,tt,ct,mt){if(0===ct.width||0===ct.height)return I;if(ct.width>R.width||ct.height>R.height||V.x>R.width-ct.width||V.y>R.height-ct.height)throw new RangeError("out of range source coordinates for image copy");if(ct.width>I.width||ct.height>I.height||tt.x>I.width-ct.width||tt.y>I.height-ct.height)throw new RangeError("out of range destination coordinates for image copy");for(var Tt=R.data,jt=I.data,le=0;le<ct.height;le++)for(var ye=((V.y+le)*R.width+V.x)*mt,we=((tt.y+le)*I.width+tt.x)*mt,Ue=0;Ue<ct.width*mt;Ue++)jt[we+Ue]=Tt[ye+Ue];return I}ra("HeatmapBucket",Eh,{omit:["layers"]});var Mf=function(I,V){th(this,I,1,V)};Mf.prototype.resize=function(I){Ch(this,I,1)},Mf.prototype.clone=function(){return new Mf({width:this.width,height:this.height},new Uint8Array(this.data))},Mf.copy=function(I,V,tt,ct,mt){eh(I,V,tt,ct,mt,1)};var Go=function(I,V){th(this,I,4,V)};Go.prototype.resize=function(I){Ch(this,I,4)},Go.prototype.replace=function(I,V){V?this.data.set(I):this.data=I instanceof Uint8ClampedArray?new Uint8Array(I.buffer):I},Go.prototype.clone=function(){return new Go({width:this.width,height:this.height},new Uint8Array(this.data))},Go.copy=function(I,V,tt,ct,mt){eh(I,V,tt,ct,mt,4)},ra("AlphaImage",Mf),ra("RGBAImage",Go);var Jv={paint:new ri({"heatmap-radius":new ca(Ze.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ca(Ze.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Xn(Ze.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ai(Ze.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Xn(Ze.paint_heatmap["heatmap-opacity"])})};function Lh(R,I){for(var V=new Uint8Array(1024),tt={},ct=0,mt=0;ct<256;ct++,mt+=4){tt[I]=ct/255;var Tt=R.evaluate(tt);V[mt+0]=Math.floor(255*Tt.r/Tt.a),V[mt+1]=Math.floor(255*Tt.g/Tt.a),V[mt+2]=Math.floor(255*Tt.b/Tt.a),V[mt+3]=Math.floor(255*Tt.a)}return new Go({width:256,height:1},V)}var Qv=function(R){function I(V){R.call(this,V,Jv),this._updateColorRamp()}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.createBucket=function(tt){return new Eh(tt)},I.prototype._handleSpecialPaintPropertyUpdate=function(tt){"heatmap-color"===tt&&this._updateColorRamp()},I.prototype._updateColorRamp=function(){this.colorRamp=Lh(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},I.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},I.prototype.queryRadius=function(){return 0},I.prototype.queryIntersectsFeature=function(){return!1},I.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},I}(Mi),_v={paint:new ri({"hillshade-illumination-direction":new Xn(Ze.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Xn(Ze.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Xn(Ze.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Xn(Ze.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Xn(Ze.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Xn(Ze.paint_hillshade["hillshade-accent-color"])})},qv=function(R){function I(V){R.call(this,V,_v)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},I}(Mi),Ph=Wa([{name:"a_pos",components:2,type:"Int16"}],4).members,rh=Pc,ed=Pc;function Pc(R,I,V){V=V||2;var jt,le,ye,we,Ue,er,$e,tt=I&&I.length,ct=tt?I[0]*V:R.length,mt=Dh(R,0,ct,V,!0),Tt=[];if(!mt||mt.next===mt.prev)return Tt;if(tt&&(mt=function od(R,I,V,tt){var mt,Tt,ye,ct=[];for(mt=0,Tt=I.length;mt<Tt;mt++)(ye=Dh(R,I[mt]*tt,mt<Tt-1?I[mt+1]*tt:R.length,tt,!1))===ye.next&&(ye.steiner=!0),ct.push(vd(ye));for(ct.sort(sd),mt=0;mt<ct.length;mt++)ld(ct[mt],V),V=_u(V,V.next);return V}(R,I,mt,V)),R.length>80*V){jt=ye=R[0],le=we=R[1];for(var br=V;br<ct;br+=V)(Ue=R[br])<jt&&(jt=Ue),(er=R[br+1])<le&&(le=er),Ue>ye&&(ye=Ue),er>we&&(we=er);$e=0!==($e=Math.max(ye-jt,we-le))?1/$e:0}return sc(mt,Tt,V,jt,le,$e),Tt}function Dh(R,I,V,tt,ct){var mt,Tt;if(ct===ih(R,I,V,tt)>0)for(mt=I;mt<V;mt+=tt)Tt=Fh(mt,R[mt],R[mt+1],Tt);else for(mt=V-tt;mt>=I;mt-=tt)Tt=Fh(mt,R[mt],R[mt+1],Tt);return Tt&&Dc(Tt,Tt.next)&&(uc(Tt),Tt=Tt.next),Tt}function _u(R,I){if(!R)return R;I||(I=R);var tt,V=R;do{if(tt=!1,V.steiner||!Dc(V,V.next)&&0!==Gi(V.prev,V,V.next))V=V.next;else{if(uc(V),(V=I=V.prev)===V.next)break;tt=!0}}while(tt||V!==I);return I}function sc(R,I,V,tt,ct,mt,Tt){if(R){!Tt&&mt&&function cd(R,I,V,tt){var ct=R;do{null===ct.z&&(ct.z=nh(ct.x,ct.y,I,V,tt)),ct.prevZ=ct.prev,ct.nextZ=ct.next,ct=ct.next}while(ct!==R);ct.prevZ.nextZ=null,ct.prevZ=null,function hd(R){var I,V,tt,ct,mt,Tt,jt,le,ye=1;do{for(V=R,R=null,mt=null,Tt=0;V;){for(Tt++,tt=V,jt=0,I=0;I<ye&&(jt++,tt=tt.nextZ);I++);for(le=ye;jt>0||le>0&&tt;)0!==jt&&(0===le||!tt||V.z<=tt.z)?(ct=V,V=V.nextZ,jt--):(ct=tt,tt=tt.nextZ,le--),mt?mt.nextZ=ct:R=ct,ct.prevZ=mt,mt=ct;V=tt}mt.nextZ=null,ye*=2}while(Tt>1);return R}(ct)}(R,tt,ct,mt);for(var le,ye,jt=R;R.prev!==R.next;)if(le=R.prev,ye=R.next,mt?nd(R,tt,ct,mt):rd(R))I.push(le.i/V),I.push(R.i/V),I.push(ye.i/V),uc(R),R=ye.next,jt=ye.next;else if((R=ye)===jt){Tt?1===Tt?sc(R=ad(_u(R),I,V),I,V,tt,ct,mt,2):2===Tt&&id(R,I,V,tt,ct,mt):sc(_u(R),I,V,tt,ct,mt,1);break}}}function rd(R){var I=R.prev,V=R,tt=R.next;if(Gi(I,V,tt)>=0)return!1;for(var ct=R.next.next;ct!==R.prev;){if(Of(I.x,I.y,V.x,V.y,tt.x,tt.y,ct.x,ct.y)&&Gi(ct.prev,ct,ct.next)>=0)return!1;ct=ct.next}return!0}function nd(R,I,V,tt){var ct=R.prev,mt=R,Tt=R.next;if(Gi(ct,mt,Tt)>=0)return!1;for(var ye=ct.x>mt.x?ct.x>Tt.x?ct.x:Tt.x:mt.x>Tt.x?mt.x:Tt.x,we=ct.y>mt.y?ct.y>Tt.y?ct.y:Tt.y:mt.y>Tt.y?mt.y:Tt.y,Ue=nh(ct.x<mt.x?ct.x<Tt.x?ct.x:Tt.x:mt.x<Tt.x?mt.x:Tt.x,ct.y<mt.y?ct.y<Tt.y?ct.y:Tt.y:mt.y<Tt.y?mt.y:Tt.y,I,V,tt),er=nh(ye,we,I,V,tt),$e=R.prevZ,br=R.nextZ;$e&&$e.z>=Ue&&br&&br.z<=er;){if($e!==R.prev&&$e!==R.next&&Of(ct.x,ct.y,mt.x,mt.y,Tt.x,Tt.y,$e.x,$e.y)&&Gi($e.prev,$e,$e.next)>=0||($e=$e.prevZ,br!==R.prev&&br!==R.next&&Of(ct.x,ct.y,mt.x,mt.y,Tt.x,Tt.y,br.x,br.y)&&Gi(br.prev,br,br.next)>=0))return!1;br=br.nextZ}for(;$e&&$e.z>=Ue;){if($e!==R.prev&&$e!==R.next&&Of(ct.x,ct.y,mt.x,mt.y,Tt.x,Tt.y,$e.x,$e.y)&&Gi($e.prev,$e,$e.next)>=0)return!1;$e=$e.prevZ}for(;br&&br.z<=er;){if(br!==R.prev&&br!==R.next&&Of(ct.x,ct.y,mt.x,mt.y,Tt.x,Tt.y,br.x,br.y)&&Gi(br.prev,br,br.next)>=0)return!1;br=br.nextZ}return!0}function ad(R,I,V){var tt=R;do{var ct=tt.prev,mt=tt.next.next;!Dc(ct,mt)&&Rh(ct,tt,tt.next,mt)&&lc(ct,mt)&&lc(mt,ct)&&(I.push(ct.i/V),I.push(tt.i/V),I.push(mt.i/V),uc(tt),uc(tt.next),tt=R=mt),tt=tt.next}while(tt!==R);return _u(tt)}function id(R,I,V,tt,ct,mt){var Tt=R;do{for(var jt=Tt.next.next;jt!==Tt.prev;){if(Tt.i!==jt.i&&dd(Tt,jt)){var le=Ih(Tt,jt);return Tt=_u(Tt,Tt.next),le=_u(le,le.next),sc(Tt,I,V,tt,ct,mt),void sc(le,I,V,tt,ct,mt)}jt=jt.next}Tt=Tt.next}while(Tt!==R)}function sd(R,I){return R.x-I.x}function ld(R,I){if(I=function ud(R,I){var Tt,V=I,tt=R.x,ct=R.y,mt=-1/0;do{if(ct<=V.y&&ct>=V.next.y&&V.next.y!==V.y){var jt=V.x+(ct-V.y)*(V.next.x-V.x)/(V.next.y-V.y);if(jt<=tt&&jt>mt){if(mt=jt,jt===tt){if(ct===V.y)return V;if(ct===V.next.y)return V.next}Tt=V.x<V.next.x?V:V.next}}V=V.next}while(V!==I);if(!Tt)return null;if(tt===mt)return Tt;var er,le=Tt,ye=Tt.x,we=Tt.y,Ue=1/0;V=Tt;do{tt>=V.x&&V.x>=ye&&tt!==V.x&&Of(ct<we?tt:mt,ct,ye,we,ct<we?mt:tt,ct,V.x,V.y)&&(er=Math.abs(ct-V.y)/(tt-V.x),lc(V,R)&&(er<Ue||er===Ue&&(V.x>Tt.x||V.x===Tt.x&&fd(Tt,V)))&&(Tt=V,Ue=er)),V=V.next}while(V!==le);return Tt}(R,I)){var V=Ih(I,R);_u(I,I.next),_u(V,V.next)}}function fd(R,I){return Gi(R.prev,R,I.prev)<0&&Gi(I.next,R,R.next)<0}function nh(R,I,V,tt,ct){return(R=1431655765&((R=858993459&((R=252645135&((R=16711935&((R=32767*(R-V)*ct)|R<<8))|R<<4))|R<<2))|R<<1))|(I=1431655765&((I=858993459&((I=252645135&((I=16711935&((I=32767*(I-tt)*ct)|I<<8))|I<<4))|I<<2))|I<<1))<<1}function vd(R){var I=R,V=R;do{(I.x<V.x||I.x===V.x&&I.y<V.y)&&(V=I),I=I.next}while(I!==R);return V}function Of(R,I,V,tt,ct,mt,Tt,jt){return(ct-Tt)*(I-jt)-(R-Tt)*(mt-jt)>=0&&(R-Tt)*(tt-jt)-(V-Tt)*(I-jt)>=0&&(V-Tt)*(mt-jt)-(ct-Tt)*(tt-jt)>=0}function dd(R,I){return R.next.i!==I.i&&R.prev.i!==I.i&&!function pd(R,I){var V=R;do{if(V.i!==R.i&&V.next.i!==R.i&&V.i!==I.i&&V.next.i!==I.i&&Rh(V,V.next,R,I))return!0;V=V.next}while(V!==R);return!1}(R,I)&&(lc(R,I)&&lc(I,R)&&function gd(R,I){var V=R,tt=!1,ct=(R.x+I.x)/2,mt=(R.y+I.y)/2;do{V.y>mt!=V.next.y>mt&&V.next.y!==V.y&&ct<(V.next.x-V.x)*(mt-V.y)/(V.next.y-V.y)+V.x&&(tt=!tt),V=V.next}while(V!==R);return tt}(R,I)&&(Gi(R.prev,R,I.prev)||Gi(R,I.prev,I))||Dc(R,I)&&Gi(R.prev,R,R.next)>0&&Gi(I.prev,I,I.next)>0)}function Gi(R,I,V){return(I.y-R.y)*(V.x-I.x)-(I.x-R.x)*(V.y-I.y)}function Dc(R,I){return R.x===I.x&&R.y===I.y}function Rh(R,I,V,tt){var ct=Ic(Gi(R,I,V)),mt=Ic(Gi(R,I,tt)),Tt=Ic(Gi(V,tt,R)),jt=Ic(Gi(V,tt,I));return!!(ct!==mt&&Tt!==jt||0===ct&&Rc(R,V,I)||0===mt&&Rc(R,tt,I)||0===Tt&&Rc(V,R,tt)||0===jt&&Rc(V,I,tt))}function Rc(R,I,V){return I.x<=Math.max(R.x,V.x)&&I.x>=Math.min(R.x,V.x)&&I.y<=Math.max(R.y,V.y)&&I.y>=Math.min(R.y,V.y)}function Ic(R){return R>0?1:R<0?-1:0}function lc(R,I){return Gi(R.prev,R,R.next)<0?Gi(R,I,R.next)>=0&&Gi(R,R.prev,I)>=0:Gi(R,I,R.prev)<0||Gi(R,R.next,I)<0}function Ih(R,I){var V=new ah(R.i,R.x,R.y),tt=new ah(I.i,I.x,I.y),ct=R.next,mt=I.prev;return R.next=I,I.prev=R,V.next=ct,ct.prev=V,tt.next=V,V.prev=tt,mt.next=tt,tt.prev=mt,tt}function Fh(R,I,V,tt){var ct=new ah(R,I,V);return tt?(ct.next=tt.next,ct.prev=tt,tt.next.prev=ct,tt.next=ct):(ct.prev=ct,ct.next=ct),ct}function uc(R){R.next.prev=R.prev,R.prev.next=R.next,R.prevZ&&(R.prevZ.nextZ=R.nextZ),R.nextZ&&(R.nextZ.prevZ=R.prevZ)}function ah(R,I,V){this.i=R,this.x=I,this.y=V,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ih(R,I,V,tt){for(var ct=0,mt=I,Tt=V-tt;mt<V;mt+=tt)ct+=(R[Tt]-R[mt])*(R[mt+1]+R[Tt+1]),Tt=mt;return ct}function yd(R,I,V,tt,ct){kh(R,I,V||0,tt||R.length-1,ct||md)}function kh(R,I,V,tt,ct){for(;tt>V;){if(tt-V>600){var mt=tt-V+1,Tt=I-V+1,jt=Math.log(mt),le=.5*Math.exp(2*jt/3),ye=.5*Math.sqrt(jt*le*(mt-le)/mt)*(Tt-mt/2<0?-1:1);kh(R,I,Math.max(V,Math.floor(I-Tt*le/mt+ye)),Math.min(tt,Math.floor(I+(mt-Tt)*le/mt+ye)),ct)}var er=R[I],$e=V,br=tt;for(fc(R,V,I),ct(R[tt],er)>0&&fc(R,V,tt);$e<br;){for(fc(R,$e,br),$e++,br--;ct(R[$e],er)<0;)$e++;for(;ct(R[br],er)>0;)br--}0===ct(R[V],er)?fc(R,V,br):fc(R,++br,tt),br<=I&&(V=br+1),I<=br&&(tt=br-1)}}function fc(R,I,V){var tt=R[I];R[I]=R[V],R[V]=tt}function md(R,I){return R<I?-1:R>I?1:0}function oh(R,I){var V=R.length;if(V<=1)return[R];for(var ct,mt,tt=[],Tt=0;Tt<V;Tt++){var jt=O(R[Tt]);0!==jt&&(R[Tt].area=Math.abs(jt),void 0===mt&&(mt=jt<0),mt===jt<0?(ct&&tt.push(ct),ct=[R[Tt]]):ct.push(R[Tt]))}if(ct&&tt.push(ct),I>1)for(var le=0;le<tt.length;le++)tt[le].length<=I||(yd(tt[le],I,1,tt[le].length-1,xd),tt[le]=tt[le].slice(0,I));return tt}function xd(R,I){return I.area-R.area}function sh(R,I,V){for(var tt=V.patternDependencies,ct=!1,mt=0,Tt=I;mt<Tt.length;mt+=1){var le=Tt[mt].paint.get(R+"-pattern");le.isConstant()||(ct=!0);var ye=le.constantOr(null);ye&&(ct=!0,tt[ye.to]=!0,tt[ye.from]=!0)}return ct}function lh(R,I,V,tt,ct){for(var mt=ct.patternDependencies,Tt=0,jt=I;Tt<jt.length;Tt+=1){var le=jt[Tt],we=le.paint.get(R+"-pattern").value;if("constant"!==we.kind){var Ue=we.evaluate({zoom:tt-1},V,{},ct.availableImages),er=we.evaluate({zoom:tt},V,{},ct.availableImages),$e=we.evaluate({zoom:tt+1},V,{},ct.availableImages);er=er&&er.name?er.name:er,$e=$e&&$e.name?$e.name:$e,mt[Ue=Ue&&Ue.name?Ue.name:Ue]=!0,mt[er]=!0,mt[$e]=!0,V.patterns[le.id]={min:Ue,mid:er,max:$e}}}return V}Pc.deviation=function(R,I,V,tt){var ct=I&&I.length,Tt=Math.abs(ih(R,0,ct?I[0]*V:R.length,V));if(ct)for(var jt=0,le=I.length;jt<le;jt++)Tt-=Math.abs(ih(R,I[jt]*V,jt<le-1?I[jt+1]*V:R.length,V));var Ue=0;for(jt=0;jt<tt.length;jt+=3){var er=tt[jt]*V,$e=tt[jt+1]*V,br=tt[jt+2]*V;Ue+=Math.abs((R[er]-R[br])*(R[$e+1]-R[er+1])-(R[er]-R[$e])*(R[br+1]-R[er+1]))}return 0===Tt&&0===Ue?0:Math.abs((Ue-Tt)/Tt)},Pc.flatten=function(R){for(var I=R[0][0].length,V={vertices:[],holes:[],dimensions:I},tt=0,ct=0;ct<R.length;ct++){for(var mt=0;mt<R[ct].length;mt++)for(var Tt=0;Tt<I;Tt++)V.vertices.push(R[ct][mt][Tt]);ct>0&&V.holes.push(tt+=R[ct-1].length)}return V},rh.default=ed;var Al=function(I){this.zoom=I.zoom,this.overscaling=I.overscaling,this.layers=I.layers,this.layerIds=this.layers.map(function(V){return V.id}),this.index=I.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new io,this.indexArray=new wl,this.indexArray2=new bf,this.programConfigurations=new Fa(Ph,I.layers,I.zoom),this.segments=new Y,this.segments2=new Y,this.stateDependentLayerIds=this.layers.filter(function(V){return V.isStateDependent()}).map(function(V){return V.id})};Al.prototype.populate=function(I,V,tt){this.hasPattern=sh("fill",this.layers,V);for(var ct=this.layers[0].layout.get("fill-sort-key"),mt=[],Tt=0,jt=I;Tt<jt.length;Tt+=1){var le=jt[Tt],ye=le.feature,we=le.id,Ue=le.index,er=le.sourceLayerIndex,$e=this.layers[0]._featureFilter.needGeometry,br={type:ye.type,id:we,properties:ye.properties,geometry:$e?oi(ye):[]};if(this.layers[0]._featureFilter.filter(new da(this.zoom),br,tt)){$e||(br.geometry=oi(ye));var zr=ct?ct.evaluate(br,{},tt,V.availableImages):void 0;mt.push({id:we,properties:ye.properties,type:ye.type,sourceLayerIndex:er,index:Ue,geometry:br.geometry,patterns:{},sortKey:zr})}}ct&&mt.sort(function(la,va){return la.sortKey-va.sortKey});for(var qr=0,Sn=mt;qr<Sn.length;qr+=1){var mn=Sn[qr],Pn=mn.geometry,On=mn.index,jn=mn.sourceLayerIndex;if(this.hasPattern){var Yn=lh("fill",this.layers,mn,this.zoom,V);this.patternFeatures.push(Yn)}else this.addFeature(mn,Pn,On,tt,{});V.featureIndex.insert(I[On].feature,Pn,On,jn,this.index)}},Al.prototype.update=function(I,V,tt){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(I,V,this.stateDependentLayers,tt)},Al.prototype.addFeatures=function(I,V,tt){for(var ct=0,mt=this.patternFeatures;ct<mt.length;ct+=1){var Tt=mt[ct];this.addFeature(Tt,Tt.geometry,Tt.index,V,tt)}},Al.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Al.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Al.prototype.upload=function(I){this.uploaded||(this.layoutVertexBuffer=I.createVertexBuffer(this.layoutVertexArray,Ph),this.indexBuffer=I.createIndexBuffer(this.indexArray),this.indexBuffer2=I.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(I),this.uploaded=!0},Al.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Al.prototype.addFeature=function(I,V,tt,ct,mt){for(var Tt=0,jt=oh(V,500);Tt<jt.length;Tt+=1){for(var le=jt[Tt],ye=0,we=0,Ue=le;we<Ue.length;we+=1)ye+=Ue[we].length;for(var $e=this.segments.prepareSegment(ye,this.layoutVertexArray,this.indexArray),br=$e.vertexLength,zr=[],ln=[],qr=0,Sn=le;qr<Sn.length;qr+=1){var mn=Sn[qr];if(0!==mn.length){mn!==le[0]&&ln.push(zr.length/2);var An=this.segments2.prepareSegment(mn.length,this.layoutVertexArray,this.indexArray2),Pn=An.vertexLength;this.layoutVertexArray.emplaceBack(mn[0].x,mn[0].y),this.indexArray2.emplaceBack(Pn+mn.length-1,Pn),zr.push(mn[0].x),zr.push(mn[0].y);for(var On=1;On<mn.length;On++)this.layoutVertexArray.emplaceBack(mn[On].x,mn[On].y),this.indexArray2.emplaceBack(Pn+On-1,Pn+On),zr.push(mn[On].x),zr.push(mn[On].y);An.vertexLength+=mn.length,An.primitiveLength+=mn.length}}for(var jn=rh(zr,ln),Yn=0;Yn<jn.length;Yn+=3)this.indexArray.emplaceBack(br+jn[Yn],br+jn[Yn+1],br+jn[Yn+2]);$e.vertexLength+=ye,$e.primitiveLength+=jn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,I,tt,mt,ct)},ra("FillBucket",Al,{omit:["layers","patternFeatures"]});var wd=new ri({"fill-sort-key":new ca(Ze.layout_fill["fill-sort-key"])}),Ad={paint:new ri({"fill-antialias":new Xn(Ze.paint_fill["fill-antialias"]),"fill-opacity":new ca(Ze.paint_fill["fill-opacity"]),"fill-color":new ca(Ze.paint_fill["fill-color"]),"fill-outline-color":new ca(Ze.paint_fill["fill-outline-color"]),"fill-translate":new Xn(Ze.paint_fill["fill-translate"]),"fill-translate-anchor":new Xn(Ze.paint_fill["fill-translate-anchor"]),"fill-pattern":new ii(Ze.paint_fill["fill-pattern"])}),layout:wd},Md=function(R){function I(V){R.call(this,V,Ad)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.recalculate=function(tt,ct){R.prototype.recalculate.call(this,tt,ct);var mt=this.paint._values["fill-outline-color"];"constant"===mt.value.kind&&void 0===mt.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},I.prototype.createBucket=function(tt){return new Al(tt)},I.prototype.queryRadius=function(){return Qs(this.paint.get("fill-translate"))},I.prototype.queryIntersectsFeature=function(tt,ct,mt,Tt,jt,le,ye){return Ri(Rs(tt,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),le.angle,ye),Tt)},I.prototype.isTileClipped=function(){return!0},I}(Mi),zh=Wa([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Oh=Bf;function Bf(R,I,V,tt,ct){this.properties={},this.extent=V,this.type=0,this._pbf=R,this._geometry=-1,this._keys=tt,this._values=ct,R.readFields(Ed,this,I)}function Ed(R,I,V){1==R?I.id=V.readVarint():2==R?function Cd(R,I){for(var V=R.readVarint()+R.pos;R.pos<V;){var tt=I._keys[R.readVarint()],ct=I._values[R.readVarint()];I.properties[tt]=ct}}(V,I):3==R?I.type=V.readVarint():4==R&&(I._geometry=V.pos)}function Pd(R){for(var mt,Tt,I=0,V=0,tt=R.length,ct=tt-1;V<tt;ct=V++)I+=((Tt=R[ct]).x-(mt=R[V]).x)*(mt.y+Tt.y);return I}Bf.types=["Unknown","Point","LineString","Polygon"],Bf.prototype.loadGeometry=function(){var R=this._pbf;R.pos=this._geometry;for(var jt,I=R.readVarint()+R.pos,V=1,tt=0,ct=0,mt=0,Tt=[];R.pos<I;){if(tt<=0){var le=R.readVarint();V=7&le,tt=le>>3}if(tt--,1===V||2===V)ct+=R.readSVarint(),mt+=R.readSVarint(),1===V&&(jt&&Tt.push(jt),jt=[]),jt.push(new e(ct,mt));else{if(7!==V)throw new Error("unknown command "+V);jt&&jt.push(jt[0].clone())}}return jt&&Tt.push(jt),Tt},Bf.prototype.bbox=function(){var R=this._pbf;R.pos=this._geometry;for(var I=R.readVarint()+R.pos,V=1,tt=0,ct=0,mt=0,Tt=1/0,jt=-1/0,le=1/0,ye=-1/0;R.pos<I;){if(tt<=0){var we=R.readVarint();V=7&we,tt=we>>3}if(tt--,1===V||2===V)(ct+=R.readSVarint())<Tt&&(Tt=ct),ct>jt&&(jt=ct),(mt+=R.readSVarint())<le&&(le=mt),mt>ye&&(ye=mt);else if(7!==V)throw new Error("unknown command "+V)}return[Tt,le,jt,ye]},Bf.prototype.toGeoJSON=function(R,I,V){var le,ye,tt=this.extent*Math.pow(2,V),ct=this.extent*R,mt=this.extent*I,Tt=this.loadGeometry(),jt=Bf.types[this.type];function we($e){for(var br=0;br<$e.length;br++){var zr=$e[br];$e[br]=[360*(zr.x+ct)/tt-180,360/Math.PI*Math.atan(Math.exp((180-360*(zr.y+mt)/tt)*Math.PI/180))-90]}}switch(this.type){case 1:var Ue=[];for(le=0;le<Tt.length;le++)Ue[le]=Tt[le][0];we(Tt=Ue);break;case 2:for(le=0;le<Tt.length;le++)we(Tt[le]);break;case 3:for(Tt=function Ld(R){var I=R.length;if(I<=1)return[R];for(var tt,ct,V=[],mt=0;mt<I;mt++){var Tt=Pd(R[mt]);0!==Tt&&(void 0===ct&&(ct=Tt<0),ct===Tt<0?(tt&&V.push(tt),tt=[R[mt]]):tt.push(R[mt]))}return tt&&V.push(tt),V}(Tt),le=0;le<Tt.length;le++)for(ye=0;ye<Tt[le].length;ye++)we(Tt[le][ye])}1===Tt.length?Tt=Tt[0]:jt="Multi"+jt;var er={type:"Feature",geometry:{type:jt,coordinates:Tt},properties:this.properties};return"id"in this&&(er.id=this.id),er};var Bh=Nh;function Nh(R,I){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=R,this._keys=[],this._values=[],this._features=[],R.readFields(Dd,this,I),this.length=this._features.length}function Dd(R,I,V){15===R?I.version=V.readVarint():1===R?I.name=V.readString():5===R?I.extent=V.readVarint():2===R?I._features.push(V.pos):3===R?I._keys.push(V.readString()):4===R&&I._values.push(function Rd(R){for(var I=null,V=R.readVarint()+R.pos;R.pos<V;){var tt=R.readVarint()>>3;I=1===tt?R.readString():2===tt?R.readFloat():3===tt?R.readDouble():4===tt?R.readVarint64():5===tt?R.readVarint():6===tt?R.readSVarint():7===tt?R.readBoolean():null}return I}(V))}function kd(R,I,V){if(3===R){var tt=new Bh(V,V.readVarint()+V.pos);tt.length&&(I[tt.name]=tt)}}Nh.prototype.feature=function(R){if(R<0||R>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[R];var I=this._pbf.readVarint()+this._pbf.pos;return new Oh(this._pbf,I,this.extent,this._keys,this._values)};var Nf={VectorTile:function Fd(R,I){this.layers=R.readFields(kd,{},I)},VectorTileFeature:Oh,VectorTileLayer:Bh},Nd=Nf.VectorTileFeature.types,uh=Math.pow(2,13);function cc(R,I,V,tt,ct,mt,Tt,jt){R.emplaceBack(I,V,2*Math.floor(tt*uh)+Tt,ct*uh*2,mt*uh*2,Math.round(jt))}var Ml=function(I){this.zoom=I.zoom,this.overscaling=I.overscaling,this.layers=I.layers,this.layerIds=this.layers.map(function(V){return V.id}),this.index=I.index,this.hasPattern=!1,this.layoutVertexArray=new No,this.indexArray=new wl,this.programConfigurations=new Fa(zh,I.layers,I.zoom),this.segments=new Y,this.stateDependentLayerIds=this.layers.filter(function(V){return V.isStateDependent()}).map(function(V){return V.id})};function Vd(R,I){return R.x===I.x&&(R.x<0||R.x>Ta)||R.y===I.y&&(R.y<0||R.y>Ta)}Ml.prototype.populate=function(I,V,tt){this.features=[],this.hasPattern=sh("fill-extrusion",this.layers,V);for(var ct=0,mt=I;ct<mt.length;ct+=1){var Tt=mt[ct],jt=Tt.feature,le=Tt.id,ye=Tt.index,we=Tt.sourceLayerIndex,Ue=this.layers[0]._featureFilter.needGeometry,er={type:jt.type,id:le,properties:jt.properties,geometry:Ue?oi(jt):[]};if(this.layers[0]._featureFilter.filter(new da(this.zoom),er,tt)){var $e={id:le,sourceLayerIndex:we,index:ye,geometry:Ue?er.geometry:oi(jt),properties:jt.properties,type:jt.type,patterns:{}};void 0!==jt.id&&($e.id=jt.id),this.hasPattern?this.features.push(lh("fill-extrusion",this.layers,$e,this.zoom,V)):this.addFeature($e,$e.geometry,ye,tt,{}),V.featureIndex.insert(jt,$e.geometry,ye,we,this.index,!0)}}},Ml.prototype.addFeatures=function(I,V,tt){for(var ct=0,mt=this.features;ct<mt.length;ct+=1){var Tt=mt[ct];this.addFeature(Tt,Tt.geometry,Tt.index,V,tt)}},Ml.prototype.update=function(I,V,tt){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(I,V,this.stateDependentLayers,tt)},Ml.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ml.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ml.prototype.upload=function(I){this.uploaded||(this.layoutVertexBuffer=I.createVertexBuffer(this.layoutVertexArray,zh),this.indexBuffer=I.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(I),this.uploaded=!0},Ml.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ml.prototype.addFeature=function(I,V,tt,ct,mt){for(var Tt=0,jt=oh(V,500);Tt<jt.length;Tt+=1){for(var le=jt[Tt],ye=0,we=0,Ue=le;we<Ue.length;we+=1)ye+=Ue[we].length;for(var $e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),br=0,zr=le;br<zr.length;br+=1){var ln=zr[br];if(0!==ln.length&&!((R=ln).every(function(I){return I.x<0})||R.every(function(I){return I.x>Ta})||R.every(function(I){return I.y<0})||R.every(function(I){return I.y>Ta})))for(var qr=0,Sn=0;Sn<ln.length;Sn++){var mn=ln[Sn];if(Sn>=1){var An=ln[Sn-1];if(!Vd(mn,An)){$e.vertexLength+4>Y.MAX_VERTEX_ARRAY_LENGTH&&($e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Pn=mn.sub(An)._perp()._unit(),On=An.dist(mn);qr+On>32768&&(qr=0),cc(this.layoutVertexArray,mn.x,mn.y,Pn.x,Pn.y,0,0,qr),cc(this.layoutVertexArray,mn.x,mn.y,Pn.x,Pn.y,0,1,qr),cc(this.layoutVertexArray,An.x,An.y,Pn.x,Pn.y,0,0,qr+=On),cc(this.layoutVertexArray,An.x,An.y,Pn.x,Pn.y,0,1,qr);var jn=$e.vertexLength;this.indexArray.emplaceBack(jn,jn+2,jn+1),this.indexArray.emplaceBack(jn+1,jn+2,jn+3),$e.vertexLength+=4,$e.primitiveLength+=2}}}}if($e.vertexLength+ye>Y.MAX_VERTEX_ARRAY_LENGTH&&($e=this.segments.prepareSegment(ye,this.layoutVertexArray,this.indexArray)),"Polygon"===Nd[I.type]){for(var Yn=[],wa=[],la=$e.vertexLength,va=0,Ia=le;va<Ia.length;va+=1){var ya=Ia[va];if(0!==ya.length){ya!==le[0]&&wa.push(Yn.length/2);for(var ba=0;ba<ya.length;ba++){var Na=ya[ba];cc(this.layoutVertexArray,Na.x,Na.y,0,0,1,1,0),Yn.push(Na.x),Yn.push(Na.y)}}}for(var Da=rh(Yn,wa),Ka=0;Ka<Da.length;Ka+=3)this.indexArray.emplaceBack(la+Da[Ka],la+Da[Ka+2],la+Da[Ka+1]);$e.primitiveLength+=Da.length/3,$e.vertexLength+=ye}}var R;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,I,tt,mt,ct)},ra("FillExtrusionBucket",Ml,{omit:["layers","features"]});var Wd={paint:new ri({"fill-extrusion-opacity":new Xn(Ze["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ca(Ze["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Xn(Ze["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Xn(Ze["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ii(Ze["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ca(Ze["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ca(Ze["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Xn(Ze["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Yd=function(R){function I(V){R.call(this,V,Wd)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.createBucket=function(tt){return new Ml(tt)},I.prototype.queryRadius=function(){return Qs(this.paint.get("fill-extrusion-translate"))},I.prototype.is3D=function(){return!0},I.prototype.queryIntersectsFeature=function(tt,ct,mt,Tt,jt,le,ye,we){var Ue=Rs(tt,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),le.angle,ye),er=this.paint.get("fill-extrusion-height").evaluate(ct,mt),$e=this.paint.get("fill-extrusion-base").evaluate(ct,mt),br=function jd(R,I,V,tt){for(var ct=[],mt=0,Tt=R;mt<Tt.length;mt+=1){var jt=Tt[mt],le=[jt.x,jt.y,tt,1];Lc(le,le,I),ct.push(new e(le[0]/le[3],le[1]/le[3]))}return ct}(Ue,we,0,0),zr=function Xd(R,I,V,tt){for(var ct=[],mt=[],Tt=tt[8]*I,jt=tt[9]*I,le=tt[10]*I,ye=tt[11]*I,we=tt[8]*V,Ue=tt[9]*V,er=tt[10]*V,$e=tt[11]*V,br=0,zr=R;br<zr.length;br+=1){for(var qr=[],Sn=[],mn=0,An=zr[br];mn<An.length;mn+=1){var Pn=An[mn],On=Pn.x,jn=Pn.y,Yn=tt[0]*On+tt[4]*jn+tt[12],wa=tt[1]*On+tt[5]*jn+tt[13],la=tt[2]*On+tt[6]*jn+tt[14],va=tt[3]*On+tt[7]*jn+tt[15],ba=la+le,Na=va+ye,Da=Yn+we,Ka=wa+Ue,ui=la+er,Ja=va+$e,Qa=new e((Yn+Tt)/Na,(wa+jt)/Na);Qa.z=ba/Na,qr.push(Qa);var Xa=new e(Da/Ja,Ka/Ja);Xa.z=ui/Ja,Sn.push(Xa)}ct.push(qr),mt.push(Sn)}return[ct,mt]}(Tt,$e,er,we);return function Zd(R,I,V){var tt=1/0;Ri(V,I)&&(tt=Uh(V,I[0]));for(var ct=0;ct<I.length;ct++)for(var mt=I[ct],Tt=R[ct],jt=0;jt<mt.length-1;jt++){var le=mt[jt],er=[le,mt[jt+1],Tt[jt+1],Tt[jt],le];za(V,er)&&(tt=Math.min(tt,Uh(V,er)))}return tt!==1/0&&tt}(zr[0],zr[1],br)},I}(Mi);function hc(R,I){return R.x*I.x+R.y*I.y}function Uh(R,I){if(1===R.length){for(var ct,V=0,tt=I[V++];!ct||tt.equals(ct);)if(!(ct=I[V++]))return 1/0;for(;V<I.length;V++){var mt=I[V],Tt=R[0],jt=ct.sub(tt),le=mt.sub(tt),ye=Tt.sub(tt),we=hc(jt,jt),Ue=hc(jt,le),er=hc(le,le),$e=hc(ye,jt),br=hc(ye,le),zr=we*er-Ue*Ue,ln=(er*$e-Ue*br)/zr,qr=(we*br-Ue*$e)/zr,mn=tt.z*(1-ln-qr)+ct.z*ln+mt.z*qr;if(isFinite(mn))return mn}return 1/0}for(var An=1/0,Pn=0,On=I;Pn<On.length;Pn+=1)An=Math.min(An,On[Pn].z);return An}var Vh=Wa([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Jd=Nf.VectorTileFeature.types,Qd=Math.cos(Math.PI/180*37.5),Wh=Math.pow(2,14)/.5,Wo=function(I){this.zoom=I.zoom,this.overscaling=I.overscaling,this.layers=I.layers,this.layerIds=this.layers.map(function(V){return V.id}),this.index=I.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new _o,this.indexArray=new wl,this.programConfigurations=new Fa(Vh,I.layers,I.zoom),this.segments=new Y,this.stateDependentLayerIds=this.layers.filter(function(V){return V.isStateDependent()}).map(function(V){return V.id})};Wo.prototype.populate=function(I,V,tt){this.hasPattern=sh("line",this.layers,V);for(var ct=this.layers[0].layout.get("line-sort-key"),mt=[],Tt=0,jt=I;Tt<jt.length;Tt+=1){var le=jt[Tt],ye=le.feature,we=le.id,Ue=le.index,er=le.sourceLayerIndex,$e=this.layers[0]._featureFilter.needGeometry,br={type:ye.type,id:we,properties:ye.properties,geometry:$e?oi(ye):[]};if(this.layers[0]._featureFilter.filter(new da(this.zoom),br,tt)){$e||(br.geometry=oi(ye));var zr=ct?ct.evaluate(br,{},tt):void 0;mt.push({id:we,properties:ye.properties,type:ye.type,sourceLayerIndex:er,index:Ue,geometry:br.geometry,patterns:{},sortKey:zr})}}ct&&mt.sort(function(la,va){return la.sortKey-va.sortKey});for(var qr=0,Sn=mt;qr<Sn.length;qr+=1){var mn=Sn[qr],Pn=mn.geometry,On=mn.index,jn=mn.sourceLayerIndex;if(this.hasPattern){var Yn=lh("line",this.layers,mn,this.zoom,V);this.patternFeatures.push(Yn)}else this.addFeature(mn,Pn,On,tt,{});V.featureIndex.insert(I[On].feature,Pn,On,jn,this.index)}},Wo.prototype.update=function(I,V,tt){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(I,V,this.stateDependentLayers,tt)},Wo.prototype.addFeatures=function(I,V,tt){for(var ct=0,mt=this.patternFeatures;ct<mt.length;ct+=1){var Tt=mt[ct];this.addFeature(Tt,Tt.geometry,Tt.index,V,tt)}},Wo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Wo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Wo.prototype.upload=function(I){this.uploaded||(this.layoutVertexBuffer=I.createVertexBuffer(this.layoutVertexArray,Vh),this.indexBuffer=I.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(I),this.uploaded=!0},Wo.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Wo.prototype.addFeature=function(I,V,tt,ct,mt){for(var Tt=this.layers[0].layout,jt=Tt.get("line-join").evaluate(I,{}),le=Tt.get("line-cap"),ye=Tt.get("line-miter-limit"),we=Tt.get("line-round-limit"),Ue=0,er=V;Ue<er.length;Ue+=1)this.addLine(er[Ue],I,jt,le,ye,we);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,I,tt,mt,ct)},Wo.prototype.addLine=function(I,V,tt,ct,mt,Tt){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,V.properties&&V.properties.hasOwnProperty("mapbox_clip_start")&&V.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+V.properties.mapbox_clip_start,this.clipEnd=+V.properties.mapbox_clip_end;for(var jt=0;jt<I.length-1;jt++)this.totalDistance+=I[jt].dist(I[jt+1]);this.updateScaledDistance()}for(var le="Polygon"===Jd[V.type],ye=I.length;ye>=2&&I[ye-1].equals(I[ye-2]);)ye--;for(var we=0;we<ye-1&&I[we].equals(I[we+1]);)we++;if(!(ye<(le?3:2))){"bevel"===tt&&(mt=1.05);var $e,Ue=this.overscaling<=16?15*Ta/(512*this.overscaling):0,er=this.segments.prepareSegment(10*ye,this.layoutVertexArray,this.indexArray),br=void 0,zr=void 0,ln=void 0,qr=void 0;this.e1=this.e2=-1,le&&(qr=I[we].sub($e=I[ye-2])._unit()._perp());for(var Sn=we;Sn<ye;Sn++)if(!(zr=Sn===ye-1?le?I[we+1]:void 0:I[Sn+1])||!I[Sn].equals(zr)){qr&&(ln=qr),$e&&(br=$e),$e=I[Sn],qr=zr?zr.sub($e)._unit()._perp():ln;var mn=(ln=ln||qr).add(qr);(0!==mn.x||0!==mn.y)&&mn._unit();var An=ln.x*qr.x+ln.y*qr.y,Pn=mn.x*qr.x+mn.y*qr.y,On=0!==Pn?1/Pn:1/0,jn=2*Math.sqrt(2-2*Pn),Yn=Pn<Qd&&br&&zr,wa=ln.x*qr.y-ln.y*qr.x>0;if(Yn&&Sn>we){var la=$e.dist(br);if(la>2*Ue){var va=$e.sub($e.sub(br)._mult(Ue/la)._round());this.updateDistance(br,va),this.addCurrentVertex(va,ln,0,0,er),br=va}}var Ia=br&&zr,ya=Ia?tt:le?"butt":ct;if(Ia&&"round"===ya&&(On<Tt?ya="miter":On<=2&&(ya="fakeround")),"miter"===ya&&On>mt&&(ya="bevel"),"bevel"===ya&&(On>2&&(ya="flipbevel"),On<mt&&(ya="miter")),br&&this.updateDistance(br,$e),"miter"===ya)mn._mult(On),this.addCurrentVertex($e,mn,0,0,er);else if("flipbevel"===ya){if(On>100)mn=qr.mult(-1);else{var ba=On*ln.add(qr).mag()/ln.sub(qr).mag();mn._perp()._mult(ba*(wa?-1:1))}this.addCurrentVertex($e,mn,0,0,er),this.addCurrentVertex($e,mn.mult(-1),0,0,er)}else if("bevel"===ya||"fakeround"===ya){var Na=-Math.sqrt(On*On-1),Da=wa?Na:0,Ka=wa?0:Na;if(br&&this.addCurrentVertex($e,ln,Da,Ka,er),"fakeround"===ya)for(var ui=Math.round(180*jn/Math.PI/20),Ja=1;Ja<ui;Ja++){var Qa=Ja/ui;if(.5!==Qa){var Xa=Qa-.5;Qa+=Qa*Xa*(Qa-1)*((1.0904+An*(An*(3.55645-1.43519*An)-3.2452))*Xa*Xa+(.848013+An*(.215638*An-1.06021)))}var Ii=qr.sub(ln)._mult(Qa)._add(ln)._unit()._mult(wa?-1:1);this.addHalfVertex($e,Ii.x,Ii.y,!1,wa,0,er)}zr&&this.addCurrentVertex($e,qr,-Da,-Ka,er)}else if("butt"===ya)this.addCurrentVertex($e,mn,0,0,er);else if("square"===ya){var Bi=br?1:-1;this.addCurrentVertex($e,mn,Bi,Bi,er)}else"round"===ya&&(br&&(this.addCurrentVertex($e,ln,0,0,er),this.addCurrentVertex($e,ln,1,1,er,!0)),zr&&(this.addCurrentVertex($e,qr,-1,-1,er,!0),this.addCurrentVertex($e,qr,0,0,er)));if(Yn&&Sn<ye-1){var $i=$e.dist(zr);if($i>2*Ue){var Zi=$e.add(zr.sub($e)._mult(Ue/$i)._round());this.updateDistance($e,Zi),this.addCurrentVertex(Zi,qr,0,0,er),$e=Zi}}}}},Wo.prototype.addCurrentVertex=function(I,V,tt,ct,mt,Tt){void 0===Tt&&(Tt=!1);var ye=V.y*ct-V.x,we=-V.y-V.x*ct;this.addHalfVertex(I,V.x+V.y*tt,V.y-V.x*tt,Tt,!1,tt,mt),this.addHalfVertex(I,ye,we,Tt,!0,-ct,mt),this.distance>Wh/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(I,V,tt,ct,mt,Tt))},Wo.prototype.addHalfVertex=function(I,V,tt,ct,mt,Tt,jt){var we=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((I.x<<1)+(ct?1:0),(I.y<<1)+(mt?1:0),Math.round(63*V)+128,Math.round(63*tt)+128,1+(0===Tt?0:Tt<0?-1:1)|(63&we)<<2,we>>6);var Ue=jt.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ue),jt.primitiveLength++),mt?this.e2=Ue:this.e1=Ue},Wo.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Wh-1):this.distance},Wo.prototype.updateDistance=function(I,V){this.distance+=I.dist(V),this.updateScaledDistance()},ra("LineBucket",Wo,{omit:["layers","patternFeatures"]});var tp=new ri({"line-cap":new Xn(Ze.layout_line["line-cap"]),"line-join":new ca(Ze.layout_line["line-join"]),"line-miter-limit":new Xn(Ze.layout_line["line-miter-limit"]),"line-round-limit":new Xn(Ze.layout_line["line-round-limit"]),"line-sort-key":new ca(Ze.layout_line["line-sort-key"])}),Yh={paint:new ri({"line-opacity":new ca(Ze.paint_line["line-opacity"]),"line-color":new ca(Ze.paint_line["line-color"]),"line-translate":new Xn(Ze.paint_line["line-translate"]),"line-translate-anchor":new Xn(Ze.paint_line["line-translate-anchor"]),"line-width":new ca(Ze.paint_line["line-width"]),"line-gap-width":new ca(Ze.paint_line["line-gap-width"]),"line-offset":new ca(Ze.paint_line["line-offset"]),"line-blur":new ca(Ze.paint_line["line-blur"]),"line-dasharray":new di(Ze.paint_line["line-dasharray"]),"line-pattern":new ii(Ze.paint_line["line-pattern"]),"line-gradient":new Ai(Ze.paint_line["line-gradient"])}),layout:tp},rp=function(R){function I(){R.apply(this,arguments)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.possiblyEvaluate=function(tt,ct){return ct=new da(Math.floor(ct.zoom),{now:ct.now,fadeDuration:ct.fadeDuration,zoomHistory:ct.zoomHistory,transition:ct.transition}),R.prototype.possiblyEvaluate.call(this,tt,ct)},I.prototype.evaluate=function(tt,ct,mt,Tt){return ct=o({},ct,{zoom:Math.floor(ct.zoom)}),R.prototype.evaluate.call(this,tt,ct,mt,Tt)},I}(ca),Zh=new rp(Yh.paint.properties["line-width"].specification);Zh.useIntegerZoom=!0;var np=function(R){function I(V){R.call(this,V,Yh)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype._handleSpecialPaintPropertyUpdate=function(tt){"line-gradient"===tt&&this._updateGradient()},I.prototype._updateGradient=function(){this.gradient=Lh(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},I.prototype.recalculate=function(tt,ct){R.prototype.recalculate.call(this,tt,ct),this.paint._values["line-floorwidth"]=Zh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,tt)},I.prototype.createBucket=function(tt){return new Wo(tt)},I.prototype.queryRadius=function(tt){var ct=tt,mt=Xh(qo("line-width",this,ct),qo("line-gap-width",this,ct)),Tt=qo("line-offset",this,ct);return mt/2+Math.abs(Tt)+Qs(this.paint.get("line-translate"))},I.prototype.queryIntersectsFeature=function(tt,ct,mt,Tt,jt,le,ye){var we=Rs(tt,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),le.angle,ye),Ue=ye/2*Xh(this.paint.get("line-width").evaluate(ct,mt),this.paint.get("line-gap-width").evaluate(ct,mt)),er=this.paint.get("line-offset").evaluate(ct,mt);return er&&(Tt=function ap(R,I){for(var V=[],tt=new e(0,0),ct=0;ct<R.length;ct++){for(var mt=R[ct],Tt=[],jt=0;jt<mt.length;jt++){var ye=mt[jt],we=mt[jt+1],Ue=0===jt?tt:ye.sub(mt[jt-1])._unit()._perp(),er=jt===mt.length-1?tt:we.sub(ye)._unit()._perp(),$e=Ue._add(er)._unit();$e._mult(1/($e.x*er.x+$e.y*er.y)),Tt.push($e._mult(I)._add(ye))}V.push(Tt)}return V}(Tt,er*ye)),function Hi(R,I,V){for(var tt=0;tt<I.length;tt++){var ct=I[tt];if(R.length>=3)for(var mt=0;mt<ct.length;mt++)if(Co(R,ct[mt]))return!0;if(ds(R,ct,V))return!0}return!1}(we,Tt,Ue)},I.prototype.isTileClipped=function(){return!0},I}(Mi);function Xh(R,I){return I>0?I+2*R:R}var fh=Wa([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ip=Wa([{name:"a_projected_pos",components:3,type:"Float32"}],4),op=(Wa([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Wa([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),jh=(Wa([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Wa([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),sp=Wa([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function up(R,I,V){return R.sections.forEach(function(tt){tt.text=function lp(R,I,V){var tt=I.layout.get("text-transform").evaluate(V,{});return"uppercase"===tt?R=R.toLocaleUpperCase():"lowercase"===tt&&(R=R.toLocaleLowerCase()),aa.applyArabicShaping&&(R=aa.applyArabicShaping(R)),R}(tt.text,I,V)}),R}Wa([{name:"triangle",components:3,type:"Uint16"}]),Wa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Wa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Wa([{type:"Float32",name:"offsetX"}]),Wa([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var vc={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var Fc_read=function(R,I,V,tt,ct){var mt,Tt,jt=8*ct-tt-1,le=(1<<jt)-1,ye=le>>1,we=-7,Ue=V?ct-1:0,er=V?-1:1,$e=R[I+Ue];for(Ue+=er,mt=$e&(1<<-we)-1,$e>>=-we,we+=jt;we>0;mt=256*mt+R[I+Ue],Ue+=er,we-=8);for(Tt=mt&(1<<-we)-1,mt>>=-we,we+=tt;we>0;Tt=256*Tt+R[I+Ue],Ue+=er,we-=8);if(0===mt)mt=1-ye;else{if(mt===le)return Tt?NaN:1/0*($e?-1:1);Tt+=Math.pow(2,tt),mt-=ye}return($e?-1:1)*Tt*Math.pow(2,mt-tt)},Fc_write=function(R,I,V,tt,ct,mt){var Tt,jt,le,ye=8*mt-ct-1,we=(1<<ye)-1,Ue=we>>1,er=23===ct?Math.pow(2,-24)-Math.pow(2,-77):0,$e=tt?0:mt-1,br=tt?1:-1,zr=I<0||0===I&&1/I<0?1:0;for(I=Math.abs(I),isNaN(I)||I===1/0?(jt=isNaN(I)?1:0,Tt=we):(Tt=Math.floor(Math.log(I)/Math.LN2),I*(le=Math.pow(2,-Tt))<1&&(Tt--,le*=2),(I+=Tt+Ue>=1?er/le:er*Math.pow(2,1-Ue))*le>=2&&(Tt++,le/=2),Tt+Ue>=we?(jt=0,Tt=we):Tt+Ue>=1?(jt=(I*le-1)*Math.pow(2,ct),Tt+=Ue):(jt=I*Math.pow(2,Ue-1)*Math.pow(2,ct),Tt=0));ct>=8;R[V+$e]=255&jt,$e+=br,jt/=256,ct-=8);for(Tt=Tt<<ct|jt,ye+=ct;ye>0;R[V+$e]=255&Tt,$e+=br,Tt/=256,ye-=8);R[V+$e-br]|=128*zr},kc=pi;function pi(R){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(R)?R:new Uint8Array(R||0),this.pos=0,this.type=0,this.length=this.buf.length}pi.Varint=0,pi.Fixed64=1,pi.Bytes=2,pi.Fixed32=5;var ch=4294967296,Kh=1/ch,Jh="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function wu(R){return R.type===pi.Bytes?R.readVarint()+R.pos:R.pos+1}function Qh(R,I,V){var tt=I<=16383?1:I<=2097151?2:I<=268435455?3:Math.floor(Math.log(I)/(7*Math.LN2));V.realloc(tt);for(var ct=V.pos-1;ct>=R;ct--)V.buf[ct+tt]=V.buf[ct]}function xp(R,I){for(var V=0;V<R.length;V++)I.writeVarint(R[V])}function bp(R,I){for(var V=0;V<R.length;V++)I.writeSVarint(R[V])}function wp(R,I){for(var V=0;V<R.length;V++)I.writeFloat(R[V])}function Tp(R,I){for(var V=0;V<R.length;V++)I.writeDouble(R[V])}function Ap(R,I){for(var V=0;V<R.length;V++)I.writeBoolean(R[V])}function Mp(R,I){for(var V=0;V<R.length;V++)I.writeFixed32(R[V])}function Sp(R,I){for(var V=0;V<R.length;V++)I.writeSFixed32(R[V])}function Ep(R,I){for(var V=0;V<R.length;V++)I.writeFixed64(R[V])}function Cp(R,I){for(var V=0;V<R.length;V++)I.writeSFixed64(R[V])}function zc(R,I){return(R[I]|R[I+1]<<8|R[I+2]<<16)+16777216*R[I+3]}function Vf(R,I,V){R[V]=I,R[V+1]=I>>>8,R[V+2]=I>>>16,R[V+3]=I>>>24}function $h(R,I){return(R[I]|R[I+1]<<8|R[I+2]<<16)+(R[I+3]<<24)}pi.prototype={destroy:function(){this.buf=null},readFields:function(R,I,V){for(V=V||this.length;this.pos<V;){var tt=this.readVarint(),ct=tt>>3,mt=this.pos;this.type=7&tt,R(ct,I,this),this.pos===mt&&this.skip(tt)}return I},readMessage:function(R,I){return this.readFields(R,I,this.readVarint()+this.pos)},readFixed32:function(){var R=zc(this.buf,this.pos);return this.pos+=4,R},readSFixed32:function(){var R=$h(this.buf,this.pos);return this.pos+=4,R},readFixed64:function(){var R=zc(this.buf,this.pos)+zc(this.buf,this.pos+4)*ch;return this.pos+=8,R},readSFixed64:function(){var R=zc(this.buf,this.pos)+$h(this.buf,this.pos+4)*ch;return this.pos+=8,R},readFloat:function(){var R=Fc_read(this.buf,this.pos,!0,23,4);return this.pos+=4,R},readDouble:function(){var R=Fc_read(this.buf,this.pos,!0,52,8);return this.pos+=8,R},readVarint:function(R){var V,tt,I=this.buf;return V=127&(tt=I[this.pos++]),tt<128||(V|=(127&(tt=I[this.pos++]))<<7,tt<128)||(V|=(127&(tt=I[this.pos++]))<<14,tt<128)||(V|=(127&(tt=I[this.pos++]))<<21,tt<128)?V:function pp(R,I,V){var ct,mt,tt=V.buf;if(ct=(112&(mt=tt[V.pos++]))>>4,mt<128||(ct|=(127&(mt=tt[V.pos++]))<<3,mt<128)||(ct|=(127&(mt=tt[V.pos++]))<<10,mt<128)||(ct|=(127&(mt=tt[V.pos++]))<<17,mt<128)||(ct|=(127&(mt=tt[V.pos++]))<<24,mt<128)||(ct|=(1&(mt=tt[V.pos++]))<<31,mt<128))return function Uf(R,I,V){return V?4294967296*I+(R>>>0):4294967296*(I>>>0)+(R>>>0)}(R,ct,I);throw new Error("Expected varint not more than 10 bytes")}(V|=(15&(tt=I[this.pos]))<<28,R,this)},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var R=this.readVarint();return R%2==1?(R+1)/-2:R/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var R=this.readVarint()+this.pos,I=this.pos;return this.pos=R,R-I>=12&&Jh?function Pp(R,I,V){return Jh.decode(R.subarray(I,V))}(this.buf,I,R):function Lp(R,I,V){for(var tt="",ct=I;ct<V;){var le,ye,we,mt=R[ct],Tt=null,jt=mt>239?4:mt>223?3:mt>191?2:1;if(ct+jt>V)break;1===jt?mt<128&&(Tt=mt):2===jt?128==(192&(le=R[ct+1]))&&(Tt=(31&mt)<<6|63&le)<=127&&(Tt=null):3===jt?(ye=R[ct+2],128==(192&(le=R[ct+1]))&&128==(192&ye)&&((Tt=(15&mt)<<12|(63&le)<<6|63&ye)<=2047||Tt>=55296&&Tt<=57343)&&(Tt=null)):4===jt&&(ye=R[ct+2],we=R[ct+3],128==(192&(le=R[ct+1]))&&128==(192&ye)&&128==(192&we)&&((Tt=(15&mt)<<18|(63&le)<<12|(63&ye)<<6|63&we)<=65535||Tt>=1114112)&&(Tt=null)),null===Tt?(Tt=65533,jt=1):Tt>65535&&(Tt-=65536,tt+=String.fromCharCode(Tt>>>10&1023|55296),Tt=56320|1023&Tt),tt+=String.fromCharCode(Tt),ct+=jt}return tt}(this.buf,I,R)},readBytes:function(){var R=this.readVarint()+this.pos,I=this.buf.subarray(this.pos,R);return this.pos=R,I},readPackedVarint:function(R,I){if(this.type!==pi.Bytes)return R.push(this.readVarint(I));var V=wu(this);for(R=R||[];this.pos<V;)R.push(this.readVarint(I));return R},readPackedSVarint:function(R){if(this.type!==pi.Bytes)return R.push(this.readSVarint());var I=wu(this);for(R=R||[];this.pos<I;)R.push(this.readSVarint());return R},readPackedBoolean:function(R){if(this.type!==pi.Bytes)return R.push(this.readBoolean());var I=wu(this);for(R=R||[];this.pos<I;)R.push(this.readBoolean());return R},readPackedFloat:function(R){if(this.type!==pi.Bytes)return R.push(this.readFloat());var I=wu(this);for(R=R||[];this.pos<I;)R.push(this.readFloat());return R},readPackedDouble:function(R){if(this.type!==pi.Bytes)return R.push(this.readDouble());var I=wu(this);for(R=R||[];this.pos<I;)R.push(this.readDouble());return R},readPackedFixed32:function(R){if(this.type!==pi.Bytes)return R.push(this.readFixed32());var I=wu(this);for(R=R||[];this.pos<I;)R.push(this.readFixed32());return R},readPackedSFixed32:function(R){if(this.type!==pi.Bytes)return R.push(this.readSFixed32());var I=wu(this);for(R=R||[];this.pos<I;)R.push(this.readSFixed32());return R},readPackedFixed64:function(R){if(this.type!==pi.Bytes)return R.push(this.readFixed64());var I=wu(this);for(R=R||[];this.pos<I;)R.push(this.readFixed64());return R},readPackedSFixed64:function(R){if(this.type!==pi.Bytes)return R.push(this.readSFixed64());var I=wu(this);for(R=R||[];this.pos<I;)R.push(this.readSFixed64());return R},skip:function(R){var I=7&R;if(I===pi.Varint)for(;this.buf[this.pos++]>127;);else if(I===pi.Bytes)this.pos=this.readVarint()+this.pos;else if(I===pi.Fixed32)this.pos+=4;else{if(I!==pi.Fixed64)throw new Error("Unimplemented type: "+I);this.pos+=8}},writeTag:function(R,I){this.writeVarint(R<<3|I)},realloc:function(R){for(var I=this.length||16;I<this.pos+R;)I*=2;if(I!==this.length){var V=new Uint8Array(I);V.set(this.buf),this.buf=V,this.length=I}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(R){this.realloc(4),Vf(this.buf,R,this.pos),this.pos+=4},writeSFixed32:function(R){this.realloc(4),Vf(this.buf,R,this.pos),this.pos+=4},writeFixed64:function(R){this.realloc(8),Vf(this.buf,-1&R,this.pos),Vf(this.buf,Math.floor(R*Kh),this.pos+4),this.pos+=8},writeSFixed64:function(R){this.realloc(8),Vf(this.buf,-1&R,this.pos),Vf(this.buf,Math.floor(R*Kh),this.pos+4),this.pos+=8},writeVarint:function(R){(R=+R||0)>268435455||R<0?function gp(R,I){var V,tt;if(R>=0?(V=R%4294967296|0,tt=R/4294967296|0):(tt=~(-R/4294967296),4294967295^(V=~(-R%4294967296))?V=V+1|0:(V=0,tt=tt+1|0)),R>=0x10000000000000000||R<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");I.realloc(10),function yp(R,I,V){V.buf[V.pos++]=127&R|128,R>>>=7,V.buf[V.pos++]=127&R|128,R>>>=7,V.buf[V.pos++]=127&R|128,R>>>=7,V.buf[V.pos++]=127&R|128,V.buf[V.pos]=127&(R>>>=7)}(V,0,I),function mp(R,I){var V=(7&R)<<4;I.buf[I.pos++]|=V|((R>>>=3)?128:0),R&&(I.buf[I.pos++]=127&R|((R>>>=7)?128:0),R&&(I.buf[I.pos++]=127&R|((R>>>=7)?128:0),R&&(I.buf[I.pos++]=127&R|((R>>>=7)?128:0),R&&(I.buf[I.pos++]=127&R|((R>>>=7)?128:0),R&&(I.buf[I.pos++]=127&R)))))}(tt,I)}(R,this):(this.realloc(4),this.buf[this.pos++]=127&R|(R>127?128:0),!(R<=127)&&(this.buf[this.pos++]=127&(R>>>=7)|(R>127?128:0),!(R<=127)&&(this.buf[this.pos++]=127&(R>>>=7)|(R>127?128:0),!(R<=127)&&(this.buf[this.pos++]=R>>>7&127))))},writeSVarint:function(R){this.writeVarint(R<0?2*-R-1:2*R)},writeBoolean:function(R){this.writeVarint(Boolean(R))},writeString:function(R){R=String(R),this.realloc(4*R.length),this.pos++;var I=this.pos;this.pos=function Dp(R,I,V){for(var ct,mt,tt=0;tt<I.length;tt++){if((ct=I.charCodeAt(tt))>55295&&ct<57344){if(!mt){ct>56319||tt+1===I.length?(R[V++]=239,R[V++]=191,R[V++]=189):mt=ct;continue}if(ct<56320){R[V++]=239,R[V++]=191,R[V++]=189,mt=ct;continue}ct=mt-55296<<10|ct-56320|65536,mt=null}else mt&&(R[V++]=239,R[V++]=191,R[V++]=189,mt=null);ct<128?R[V++]=ct:(ct<2048?R[V++]=ct>>6|192:(ct<65536?R[V++]=ct>>12|224:(R[V++]=ct>>18|240,R[V++]=ct>>12&63|128),R[V++]=ct>>6&63|128),R[V++]=63&ct|128)}return V}(this.buf,R,this.pos);var V=this.pos-I;V>=128&&Qh(I,V,this),this.pos=I-1,this.writeVarint(V),this.pos+=V},writeFloat:function(R){this.realloc(4),Fc_write(this.buf,R,this.pos,!0,23,4),this.pos+=4},writeDouble:function(R){this.realloc(8),Fc_write(this.buf,R,this.pos,!0,52,8),this.pos+=8},writeBytes:function(R){var I=R.length;this.writeVarint(I),this.realloc(I);for(var V=0;V<I;V++)this.buf[this.pos++]=R[V]},writeRawMessage:function(R,I){this.pos++;var V=this.pos;R(I,this);var tt=this.pos-V;tt>=128&&Qh(V,tt,this),this.pos=V-1,this.writeVarint(tt),this.pos+=tt},writeMessage:function(R,I,V){this.writeTag(R,pi.Bytes),this.writeRawMessage(I,V)},writePackedVarint:function(R,I){I.length&&this.writeMessage(R,xp,I)},writePackedSVarint:function(R,I){I.length&&this.writeMessage(R,bp,I)},writePackedBoolean:function(R,I){I.length&&this.writeMessage(R,Ap,I)},writePackedFloat:function(R,I){I.length&&this.writeMessage(R,wp,I)},writePackedDouble:function(R,I){I.length&&this.writeMessage(R,Tp,I)},writePackedFixed32:function(R,I){I.length&&this.writeMessage(R,Mp,I)},writePackedSFixed32:function(R,I){I.length&&this.writeMessage(R,Sp,I)},writePackedFixed64:function(R,I){I.length&&this.writeMessage(R,Ep,I)},writePackedSFixed64:function(R,I){I.length&&this.writeMessage(R,Cp,I)},writeBytesField:function(R,I){this.writeTag(R,pi.Bytes),this.writeBytes(I)},writeFixed32Field:function(R,I){this.writeTag(R,pi.Fixed32),this.writeFixed32(I)},writeSFixed32Field:function(R,I){this.writeTag(R,pi.Fixed32),this.writeSFixed32(I)},writeFixed64Field:function(R,I){this.writeTag(R,pi.Fixed64),this.writeFixed64(I)},writeSFixed64Field:function(R,I){this.writeTag(R,pi.Fixed64),this.writeSFixed64(I)},writeVarintField:function(R,I){this.writeTag(R,pi.Varint),this.writeVarint(I)},writeSVarintField:function(R,I){this.writeTag(R,pi.Varint),this.writeSVarint(I)},writeStringField:function(R,I){this.writeTag(R,pi.Bytes),this.writeString(I)},writeFloatField:function(R,I){this.writeTag(R,pi.Fixed32),this.writeFloat(I)},writeDoubleField:function(R,I){this.writeTag(R,pi.Fixed64),this.writeDouble(I)},writeBooleanField:function(R,I){this.writeVarintField(R,Boolean(I))}};function Rp(R,I,V){1===R&&V.readMessage(Ip,I)}function Ip(R,I,V){if(3===R){var tt=V.readMessage(Fp,{}),Tt=tt.width,jt=tt.height,le=tt.left,ye=tt.top,we=tt.advance;I.push({id:tt.id,bitmap:new Mf({width:Tt+6,height:jt+6},tt.bitmap),metrics:{width:Tt,height:jt,left:le,top:ye,advance:we}})}}function Fp(R,I,V){1===R?I.id=V.readVarint():2===R?I.bitmap=V.readBytes():3===R?I.width=V.readVarint():4===R?I.height=V.readVarint():5===R?I.left=V.readSVarint():6===R?I.top=V.readSVarint():7===R&&(I.advance=V.readVarint())}function qh(R){for(var I=0,V=0,tt=0,ct=R;tt<ct.length;tt+=1){var mt=ct[tt];I+=mt.w*mt.h,V=Math.max(V,mt.w)}R.sort(function(ln,qr){return qr.h-ln.h});for(var jt=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(I/.95)),V),h:1/0}],le=0,ye=0,we=0,Ue=R;we<Ue.length;we+=1)for(var er=Ue[we],$e=jt.length-1;$e>=0;$e--){var br=jt[$e];if(!(er.w>br.w||er.h>br.h)){if(er.x=br.x,er.y=br.y,ye=Math.max(ye,er.y+er.h),le=Math.max(le,er.x+er.w),er.w===br.w&&er.h===br.h){var zr=jt.pop();$e<jt.length&&(jt[$e]=zr)}else er.h===br.h?(br.x+=er.w,br.w-=er.w):er.w===br.w?(br.y+=er.h,br.h-=er.h):(jt.push({x:br.x+er.w,y:br.y,w:br.w-er.w,h:er.h}),br.y+=er.h,br.h-=er.h);break}}return{w:le,h:ye,fill:I/(le*ye)||0}}var Oc=function(I,V){var tt=V.pixelRatio,ct=V.version,mt=V.stretchX,Tt=V.stretchY,jt=V.content;this.paddedRect=I,this.pixelRatio=tt,this.stretchX=mt,this.stretchY=Tt,this.content=jt,this.version=ct},dc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};dc.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},dc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},dc.tlbr.get=function(){return this.tl.concat(this.br)},dc.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Oc.prototype,dc);var pc=function(I,V){var tt={},ct={};this.haveRenderCallbacks=[];var mt=[];this.addImages(I,tt,mt),this.addImages(V,ct,mt);var Tt=qh(mt),ye=new Go({width:Tt.w||1,height:Tt.h||1});for(var we in I){var Ue=I[we],er=tt[we].paddedRect;Go.copy(Ue.data,ye,{x:0,y:0},{x:er.x+1,y:er.y+1},Ue.data)}for(var $e in V){var br=V[$e],zr=ct[$e].paddedRect,ln=zr.x+1,qr=zr.y+1,Sn=br.data.width,mn=br.data.height;Go.copy(br.data,ye,{x:0,y:0},{x:ln,y:qr},br.data),Go.copy(br.data,ye,{x:0,y:mn-1},{x:ln,y:qr-1},{width:Sn,height:1}),Go.copy(br.data,ye,{x:0,y:0},{x:ln,y:qr+mn},{width:Sn,height:1}),Go.copy(br.data,ye,{x:Sn-1,y:0},{x:ln-1,y:qr},{width:1,height:mn}),Go.copy(br.data,ye,{x:0,y:0},{x:ln+Sn,y:qr},{width:1,height:mn})}this.image=ye,this.iconPositions=tt,this.patternPositions=ct};pc.prototype.addImages=function(I,V,tt){for(var ct in I){var mt=I[ct],Tt={x:0,y:0,w:mt.data.width+2,h:mt.data.height+2};tt.push(Tt),V[ct]=new Oc(Tt,mt),mt.hasRenderCallback&&this.haveRenderCallbacks.push(ct)}},pc.prototype.patchUpdatedImages=function(I,V){for(var tt in I.dispatchRenderCallbacks(this.haveRenderCallbacks),I.updatedImages)this.patchUpdatedImage(this.iconPositions[tt],I.getImage(tt),V),this.patchUpdatedImage(this.patternPositions[tt],I.getImage(tt),V)},pc.prototype.patchUpdatedImage=function(I,V,tt){if(I&&V&&I.version!==V.version){I.version=V.version;var ct=I.tl;tt.update(V.data,void 0,{x:ct[0],y:ct[1]})}},ra("ImagePosition",Oc),ra("ImageAtlas",pc);var gs={horizontal:1,vertical:2,horizontalOnly:3},gc=-17;var Hf=function(){this.scale=1,this.fontStack="",this.imageName=null};Hf.forText=function(I,V){var tt=new Hf;return tt.scale=I||1,tt.fontStack=V,tt},Hf.forImage=function(I){var V=new Hf;return V.imageName=I,V};var go=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Bc(R,I,V,tt,ct,mt,Tt,jt,le,ye,we,Ue,er,$e,br,zr){var ln=go.fromFeature(R,ct);Ue===gs.vertical&&ln.verticalizePunctuation();var qr,Sn=aa.processBidirectionalText,mn=aa.processStyledBidirectionalText;if(Sn&&1===ln.sections.length){qr=[];for(var Pn=0,On=Sn(ln.toString(),vh(ln,ye,mt,I,tt,$e,br));Pn<On.length;Pn+=1){var jn=On[Pn],Yn=new go;Yn.text=jn,Yn.sections=ln.sections;for(var wa=0;wa<jn.length;wa++)Yn.sectionIndex.push(0);qr.push(Yn)}}else if(mn){qr=[];for(var va=0,Ia=mn(ln.text,ln.sectionIndex,vh(ln,ye,mt,I,tt,$e,br));va<Ia.length;va+=1){var ya=Ia[va],ba=new go;ba.text=ya[0],ba.sectionIndex=ya[1],ba.sections=ln.sections,qr.push(ba)}}else qr=function Op(R,I){for(var V=[],tt=R.text,ct=0,mt=0,Tt=I;mt<Tt.length;mt+=1){var jt=Tt[mt];V.push(R.substring(ct,jt)),ct=jt}return ct<tt.length&&V.push(R.substring(ct,tt.length)),V}(ln,vh(ln,ye,mt,I,tt,$e,br));var Na=[],Da={positionedLines:Na,text:ln.toString(),top:we[1],bottom:we[1],left:we[0],right:we[0],writingMode:Ue,iconsInText:!1,verticalizable:!1};return function Up(R,I,V,tt,ct,mt,Tt,jt,le,ye,we,Ue){for(var er=0,$e=-17,br=0,zr=0,ln="right"===jt?1:"left"===jt?0:.5,qr=0,Sn=0,mn=ct;Sn<mn.length;Sn+=1){var An=mn[Sn];An.trim();var Pn=An.getMaxScale(),On=24*(Pn-1),jn={positionedGlyphs:[],lineOffset:0};R.positionedLines[qr]=jn;var Yn=jn.positionedGlyphs,wa=0;if(An.length()){for(var la=0;la<An.length();la++){var va=An.getSection(la),Ia=An.getSectionIndex(la),ya=An.getCharCode(la),ba=0,Na=null,Da=null,Ka=null,ui=24,Ja=!(le===gs.horizontal||!we&&!Ee(ya)||we&&(Ql[ya]||Qe(ya)));if(va.imageName){var Ii=tt[va.imageName];if(!Ii)continue;Ka=va.imageName,R.iconsInText=R.iconsInText||!0,Da=Ii.paddedRect;var Bi=Ii.displaySize;va.scale=24*va.scale/Ue,ba=On+(24-Bi[1]*va.scale),ui=(Na={width:Bi[0],height:Bi[1],left:1,top:-3,advance:Ja?Bi[1]:Bi[0]}).advance;var Zi=Ja?Bi[0]*va.scale-24*Pn:Bi[1]*va.scale-24*Pn;Zi>0&&Zi>wa&&(wa=Zi)}else{var Qa=V[va.fontStack],Xa=Qa&&Qa[ya];if(Xa&&Xa.rect)Da=Xa.rect,Na=Xa.metrics;else{var vi=I[va.fontStack],gi=vi&&vi[ya];if(!gi)continue;Na=gi.metrics}ba=24*(Pn-va.scale)}Ja?(R.verticalizable=!0,Yn.push({glyph:ya,imageName:Ka,x:er,y:$e+ba,vertical:Ja,scale:va.scale,fontStack:va.fontStack,sectionIndex:Ia,metrics:Na,rect:Da}),er+=ui*va.scale+ye):(Yn.push({glyph:ya,imageName:Ka,x:er,y:$e+ba,vertical:Ja,scale:va.scale,fontStack:va.fontStack,sectionIndex:Ia,metrics:Na,rect:Da}),er+=Na.advance*va.scale+ye)}0!==Yn.length&&(br=Math.max(er-ye,br),Vp(Yn,0,Yn.length-1,ln,wa)),er=0;var mo=mt*Pn+wa;jn.lineOffset=Math.max(wa,On),$e+=mo,zr=Math.max(mo,zr),++qr}else $e+=mt,++qr}var _i=$e- -17,Lo=dh(Tt),Po=Lo.horizontalAlign,Ji=Lo.verticalAlign;(function Hp(R,I,V,tt,ct,mt,Tt,jt,le){var ye=(I-V)*ct,we=0;we=mt!==Tt?-jt*tt-gc:(-tt*le+.5)*Tt;for(var Ue=0,er=R;Ue<er.length;Ue+=1)for(var br=0,zr=er[Ue].positionedGlyphs;br<zr.length;br+=1){var ln=zr[br];ln.x+=ye,ln.y+=we}})(R.positionedLines,ln,Po,Ji,br,zr,mt,_i,ct.length),R.top+=-Ji*_i,R.bottom=R.top+_i,R.left+=-Po*br,R.right=R.left+br}(Da,I,V,tt,qr,Tt,jt,le,Ue,ye,er,zr),!function zp(R){for(var I=0,V=R;I<V.length;I+=1)if(0!==V[I].positionedGlyphs.length)return!1;return!0}(Na)&&Da}go.fromFeature=function(I,V){for(var tt=new go,ct=0;ct<I.sections.length;ct++){var mt=I.sections[ct];mt.image?tt.addImageSection(mt):tt.addTextSection(mt,V)}return tt},go.prototype.length=function(){return this.text.length},go.prototype.getSection=function(I){return this.sections[this.sectionIndex[I]]},go.prototype.getSectionIndex=function(I){return this.sectionIndex[I]},go.prototype.getCharCode=function(I){return this.text.charCodeAt(I)},go.prototype.verticalizePunctuation=function(){this.text=function cp(R){for(var I="",V=0;V<R.length;V++){var tt=R.charCodeAt(V+1)||null,ct=R.charCodeAt(V-1)||null;I+=tt&&Oe(tt)&&!vc[R[V+1]]||ct&&Oe(ct)&&!vc[R[V-1]]||!vc[R[V]]?R[V]:vc[R[V]]}return I}(this.text)},go.prototype.trim=function(){for(var I=0,V=0;V<this.text.length&&Ql[this.text.charCodeAt(V)];V++)I++;for(var tt=this.text.length,ct=this.text.length-1;ct>=0&&ct>=I&&Ql[this.text.charCodeAt(ct)];ct--)tt--;this.text=this.text.substring(I,tt),this.sectionIndex=this.sectionIndex.slice(I,tt)},go.prototype.substring=function(I,V){var tt=new go;return tt.text=this.text.substring(I,V),tt.sectionIndex=this.sectionIndex.slice(I,V),tt.sections=this.sections,tt},go.prototype.toString=function(){return this.text},go.prototype.getMaxScale=function(){var I=this;return this.sectionIndex.reduce(function(V,tt){return Math.max(V,I.sections[tt].scale)},0)},go.prototype.addTextSection=function(I,V){this.text+=I.text,this.sections.push(Hf.forText(I.scale,I.fontStack||V));for(var tt=this.sections.length-1,ct=0;ct<I.text.length;++ct)this.sectionIndex.push(tt)},go.prototype.addImageSection=function(I){var V=I.image?I.image.name:"";if(0!==V.length){var tt=this.getNextImageSectionCharCode();tt?(this.text+=String.fromCharCode(tt),this.sections.push(Hf.forImage(V)),this.sectionIndex.push(this.sections.length-1)):N("Reached maximum number of images 6401")}else N("Can't add FormattedSection with an empty image.")},go.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Ql={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},es={};function rv(R,I,V,tt,ct,mt){if(I.imageName){var le=tt[I.imageName];return le?le.displaySize[0]*I.scale*24/mt+ct:0}var Tt=V[I.fontStack],jt=Tt&&Tt[R];return jt?jt.metrics.advance*I.scale+ct:0}function nv(R,I,V,tt){var ct=Math.pow(R-I,2);return tt?R<I?ct/2:2*ct:ct+Math.abs(V)*V}function Np(R,I,V){var tt=0;return 10===R&&(tt-=1e4),V&&(tt+=150),(40===R||65288===R)&&(tt+=50),(41===I||65289===I)&&(tt+=50),tt}function av(R,I,V,tt,ct,mt){for(var Tt=null,jt=nv(I,V,ct,mt),le=0,ye=tt;le<ye.length;le+=1){var we=ye[le],er=nv(I-we.x,V,ct,mt)+we.badness;er<=jt&&(Tt=we,jt=er)}return{index:R,x:I,priorBreak:Tt,badness:jt}}function iv(R){return R?iv(R.priorBreak).concat(R.index):[]}function vh(R,I,V,tt,ct,mt,Tt){if("point"!==mt)return[];if(!R)return[];for(var jt=[],le=function Bp(R,I,V,tt,ct,mt){for(var Tt=0,jt=0;jt<R.length();jt++){var le=R.getSection(jt);Tt+=rv(R.getCharCode(jt),le,tt,ct,I,mt)}return Tt/Math.max(1,Math.ceil(Tt/V))}(R,I,V,tt,ct,Tt),ye=R.text.indexOf("\u200b")>=0,we=0,Ue=0;Ue<R.length();Ue++){var er=R.getSection(Ue),$e=R.getCharCode(Ue);if(Ql[$e]||(we+=rv($e,er,tt,ct,I,Tt)),Ue<R.length()-1){var br=ne($e);(es[$e]||br||er.imageName)&&jt.push(av(Ue+1,we,le,jt,Np($e,R.getCharCode(Ue+1),br&&ye),!1))}}return iv(av(R.length(),we,le,jt,0,!0))}function dh(R){var I=.5,V=.5;switch(R){case"right":case"top-right":case"bottom-right":I=1;break;case"left":case"top-left":case"bottom-left":I=0}switch(R){case"bottom":case"bottom-right":case"bottom-left":V=1;break;case"top":case"top-right":case"top-left":V=0}return{horizontalAlign:I,verticalAlign:V}}function Vp(R,I,V,tt,ct){if(tt||ct)for(var mt=R[V],jt=(R[V].x+mt.metrics.advance*mt.scale)*tt,le=I;le<=V;le++)R[le].x-=jt,R[le].y+=ct}function ov(R,I,V,tt,ct,mt){var jt,Tt=R.image;if(Tt.content){var le=Tt.content,ye=Tt.pixelRatio||1;jt=[le[0]/ye,le[1]/ye,Tt.displaySize[0]-le[2]/ye,Tt.displaySize[1]-le[3]/ye]}var er,$e,br,zr,we=I.left*mt,Ue=I.right*mt;"width"===V||"both"===V?(zr=ct[0]+we-tt[3],$e=ct[0]+Ue+tt[1]):$e=(zr=ct[0]+(we+Ue-Tt.displaySize[0])/2)+Tt.displaySize[0];var ln=I.top*mt,qr=I.bottom*mt;return"height"===V||"both"===V?(er=ct[1]+ln-tt[0],br=ct[1]+qr+tt[2]):br=(er=ct[1]+(ln+qr-Tt.displaySize[1])/2)+Tt.displaySize[1],{image:Tt,top:er,right:$e,bottom:br,left:zr,collisionPadding:jt}}es[10]=!0,es[32]=!0,es[38]=!0,es[40]=!0,es[41]=!0,es[43]=!0,es[45]=!0,es[47]=!0,es[173]=!0,es[183]=!0,es[8203]=!0,es[8208]=!0,es[8211]=!0,es[8231]=!0;var Gf=function(R){function I(V,tt,ct,mt){R.call(this,V,tt),this.angle=ct,void 0!==mt&&(this.segment=mt)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.clone=function(){return new I(this.x,this.y,this.angle,this.segment)},I}(e);ra("Anchor",Gf);var Sl=128;function ph(R,I){var V=I.expression;if("constant"===V.kind)return{kind:"constant",layoutSize:V.evaluate(new da(R+1))};if("source"===V.kind)return{kind:"source"};for(var ct=V.zoomStops,mt=V.interpolationType,Tt=0;Tt<ct.length&&ct[Tt]<=R;)Tt++;for(var jt=Tt=Math.max(0,Tt-1);jt<ct.length&&ct[jt]<R+1;)jt++;jt=Math.min(ct.length-1,jt);var le=ct[Tt],ye=ct[jt];return"composite"===V.kind?{kind:"composite",minZoom:le,maxZoom:ye,interpolationType:mt}:{kind:"camera",minZoom:le,maxZoom:ye,minSize:V.evaluate(new da(le)),maxSize:V.evaluate(new da(ye)),interpolationType:mt}}function sv(R,I,V){var tt=I.uSize,mt=V.lowerSize;return"source"===R.kind?mt/Sl:"composite"===R.kind?Pi(mt/Sl,V.upperSize/Sl,I.uSizeT):tt}function lv(R,I){var V=0,tt=0;if("constant"===R.kind)tt=R.layoutSize;else if("source"!==R.kind){var ct=R.interpolationType,jt=ct?f(ki.interpolationFactor(ct,I,R.minZoom,R.maxZoom),0,1):0;"camera"===R.kind?tt=Pi(R.minSize,R.maxSize,jt):V=jt}return{uSizeT:V,uSize:tt}}var Wp=Object.freeze({__proto__:null,getSizeData:ph,evaluateSizeForFeature:sv,evaluateSizeForZoom:lv,SIZE_PACK_FACTOR:Sl});function uv(R,I,V,tt,ct){if(void 0===I.segment)return!0;for(var mt=I,Tt=I.segment+1,jt=0;jt>-V/2;){if(--Tt<0)return!1;jt-=R[Tt].dist(mt),mt=R[Tt]}jt+=R[Tt].dist(R[Tt+1]),Tt++;for(var le=[],ye=0;jt<V/2;){var Ue=R[Tt],er=R[Tt+1];if(!er)return!1;var $e=R[Tt-1].angleTo(Ue)-Ue.angleTo(er);for($e=Math.abs(($e+3*Math.PI)%(2*Math.PI)-Math.PI),le.push({distance:jt,angleDelta:$e}),ye+=$e;jt-le[0].distance>tt;)ye-=le.shift().angleDelta;if(ye>ct)return!1;Tt++,jt+=Ue.dist(er)}return!0}function fv(R){for(var I=0,V=0;V<R.length-1;V++)I+=R[V].dist(R[V+1]);return I}function cv(R,I,V){return R?.6*I*V:0}function hv(R,I){return Math.max(R?R.right-R.left:0,I?I.right-I.left:0)}function Yp(R,I,V,tt,ct,mt){for(var Tt=cv(V,ct,mt),jt=hv(V,tt)*mt,le=0,ye=fv(R)/2,we=0;we<R.length-1;we++){var Ue=R[we],er=R[we+1],$e=Ue.dist(er);if(le+$e>ye){var br=(ye-le)/$e,zr=Pi(Ue.x,er.x,br),ln=Pi(Ue.y,er.y,br),qr=new Gf(zr,ln,er.angleTo(Ue),we);return qr._round(),!Tt||uv(R,qr,jt,Tt,I)?qr:void 0}le+=$e}}function Zp(R,I,V,tt,ct,mt,Tt,jt,le){var ye=cv(tt,mt,Tt),we=hv(tt,ct),Ue=we*Tt,er=0===R[0].x||R[0].x===le||0===R[0].y||R[0].y===le;return I-Ue<I/4&&(I=Ue+I/4),vv(R,er?I/2*jt%I:(we/2+2*mt)*Tt*jt%I,I,ye,V,Ue,er,!1,le)}function vv(R,I,V,tt,ct,mt,Tt,jt,le){for(var ye=mt/2,we=fv(R),Ue=0,er=I-V,$e=[],br=0;br<R.length-1;br++){for(var zr=R[br],ln=R[br+1],qr=zr.dist(ln),Sn=ln.angleTo(zr);er+V<Ue+qr;){var mn=((er+=V)-Ue)/qr,An=Pi(zr.x,ln.x,mn),Pn=Pi(zr.y,ln.y,mn);if(An>=0&&An<le&&Pn>=0&&Pn<le&&er-ye>=0&&er+ye<=we){var On=new Gf(An,Pn,Sn,br);On._round(),(!tt||uv(R,On,mt,tt,ct))&&$e.push(On)}}Ue+=qr}return!jt&&!$e.length&&!Tt&&($e=vv(R,Ue/2,V,tt,ct,mt,Tt,!0,le)),$e}function dv(R,I,V,tt,ct){for(var mt=[],Tt=0;Tt<R.length;Tt++)for(var jt=R[Tt],le=void 0,ye=0;ye<jt.length-1;ye++){var we=jt[ye],Ue=jt[ye+1];we.x<I&&Ue.x<I||(we.x<I?we=new e(I,we.y+(I-we.x)/(Ue.x-we.x)*(Ue.y-we.y))._round():Ue.x<I&&(Ue=new e(I,we.y+(I-we.x)/(Ue.x-we.x)*(Ue.y-we.y))._round()),!(we.y<V&&Ue.y<V)&&(we.y<V?we=new e(we.x+(V-we.y)/(Ue.y-we.y)*(Ue.x-we.x),V)._round():Ue.y<V&&(Ue=new e(we.x+(V-we.y)/(Ue.y-we.y)*(Ue.x-we.x),V)._round()),!(we.x>=tt&&Ue.x>=tt)&&(we.x>=tt?we=new e(tt,we.y+(tt-we.x)/(Ue.x-we.x)*(Ue.y-we.y))._round():Ue.x>=tt&&(Ue=new e(tt,we.y+(tt-we.x)/(Ue.x-we.x)*(Ue.y-we.y))._round()),!(we.y>=ct&&Ue.y>=ct)&&(we.y>=ct?we=new e(we.x+(ct-we.y)/(Ue.y-we.y)*(Ue.x-we.x),ct)._round():Ue.y>=ct&&(Ue=new e(we.x+(ct-we.y)/(Ue.y-we.y)*(Ue.x-we.x),ct)._round()),(!le||!we.equals(le[le.length-1]))&&mt.push(le=[we]),le.push(Ue)))))}return mt}function pv(R,I,V,tt){var ct=[],mt=R.image,Tt=mt.pixelRatio,jt=mt.paddedRect.w-2,le=mt.paddedRect.h-2,ye=R.right-R.left,we=R.bottom-R.top,Ue=mt.stretchX||[[0,jt]],er=mt.stretchY||[[0,le]],$e=function(Qa,Xa){return Qa+Xa[1]-Xa[0]},br=Ue.reduce($e,0),zr=er.reduce($e,0),ln=jt-br,qr=le-zr,Sn=0,mn=br,An=0,Pn=zr,On=0,jn=ln,Yn=0,wa=qr;if(mt.content&&tt){var la=mt.content;Sn=Nc(Ue,0,la[0]),An=Nc(er,0,la[1]),mn=Nc(Ue,la[0],la[2]),Pn=Nc(er,la[1],la[3]),On=la[0]-Sn,Yn=la[1]-An,jn=la[2]-la[0]-mn,wa=la[3]-la[1]-Pn}var va=function(Qa,Xa,vi,gi){var Ii=Uc(Qa.stretch-Sn,mn,ye,R.left),Bi=Vc(Qa.fixed-On,jn,Qa.stretch,br),$i=Uc(Xa.stretch-An,Pn,we,R.top),Zi=Vc(Xa.fixed-Yn,wa,Xa.stretch,zr),yo=Uc(vi.stretch-Sn,mn,ye,R.left),mo=Vc(vi.fixed-On,jn,vi.stretch,br),_i=Uc(gi.stretch-An,Pn,we,R.top),Lo=Vc(gi.fixed-Yn,wa,gi.stretch,zr),Po=new e(Ii,$i),Ji=new e(yo,$i),Do=new e(yo,_i),ys=new e(Ii,_i),Mu=new e(Bi/Tt,Zi/Tt),ef=new e(mo/Tt,Lo/Tt),rf=I*Math.PI/180;if(rf){var nf=Math.sin(rf),$f=Math.cos(rf),_s=[$f,-nf,nf,$f];Po._matMult(_s),Ji._matMult(_s),ys._matMult(_s),Do._matMult(_s)}var Xc=Qa.stretch+Qa.fixed,jc=Xa.stretch+Xa.fixed;return{tl:Po,tr:Ji,bl:ys,br:Do,tex:{x:mt.paddedRect.x+1+Xc,y:mt.paddedRect.y+1+jc,w:vi.stretch+vi.fixed-Xc,h:gi.stretch+gi.fixed-jc},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Mu,pixelOffsetBR:ef,minFontScaleX:jn/Tt/ye,minFontScaleY:wa/Tt/we,isSDF:V}};if(tt&&(mt.stretchX||mt.stretchY))for(var Ia=gv(Ue,ln,br),ya=gv(er,qr,zr),ba=0;ba<Ia.length-1;ba++)for(var Na=Ia[ba],Da=Ia[ba+1],Ka=0;Ka<ya.length-1;Ka++)ct.push(va(Na,ya[Ka],Da,ya[Ka+1]));else ct.push(va({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:jt+1},{fixed:0,stretch:le+1}));return ct}function Nc(R,I,V){for(var tt=0,ct=0,mt=R;ct<mt.length;ct+=1){var Tt=mt[ct];tt+=Math.max(I,Math.min(V,Tt[1]))-Math.max(I,Math.min(V,Tt[0]))}return tt}function gv(R,I,V){for(var tt=[{fixed:-1,stretch:0}],ct=0,mt=R;ct<mt.length;ct+=1){var Tt=mt[ct],jt=Tt[0],le=Tt[1],ye=tt[tt.length-1];tt.push({fixed:jt-ye.stretch,stretch:ye.stretch}),tt.push({fixed:jt-ye.stretch,stretch:ye.stretch+(le-jt)})}return tt.push({fixed:I+1,stretch:V}),tt}function Uc(R,I,V,tt){return R/I*V+tt}function Vc(R,I,V,tt){return R-I*V/tt}var Hc=function(I,V,tt,ct,mt,Tt,jt,le,ye,we){if(this.boxStartIndex=I.length,ye){var Ue=Tt.top,er=Tt.bottom,$e=Tt.collisionPadding;$e&&(Ue-=$e[1],er+=$e[3]);var br=er-Ue;br>0&&(br=Math.max(10,br),this.circleDiameter=br)}else{var zr=Tt.top*jt-le,ln=Tt.bottom*jt+le,qr=Tt.left*jt-le,Sn=Tt.right*jt+le,mn=Tt.collisionPadding;if(mn&&(qr-=mn[0]*jt,zr-=mn[1]*jt,Sn+=mn[2]*jt,ln+=mn[3]*jt),we){var An=new e(qr,zr),Pn=new e(Sn,zr),On=new e(qr,ln),jn=new e(Sn,ln),Yn=we*Math.PI/180;An._rotate(Yn),Pn._rotate(Yn),On._rotate(Yn),jn._rotate(Yn),qr=Math.min(An.x,Pn.x,On.x,jn.x),Sn=Math.max(An.x,Pn.x,On.x,jn.x),zr=Math.min(An.y,Pn.y,On.y,jn.y),ln=Math.max(An.y,Pn.y,On.y,jn.y)}I.emplaceBack(V.x,V.y,qr,zr,Sn,ln,tt,ct,mt)}this.boxEndIndex=I.length},Yf=function(I,V){if(void 0===I&&(I=[]),void 0===V&&(V=jp),this.data=I,this.length=this.data.length,this.compare=V,this.length>0)for(var tt=(this.length>>1)-1;tt>=0;tt--)this._down(tt)};function jp(R,I){return R<I?-1:R>I?1:0}function Kp(R,I,V){void 0===I&&(I=1),void 0===V&&(V=!1);for(var tt=1/0,ct=1/0,mt=-1/0,Tt=-1/0,jt=R[0],le=0;le<jt.length;le++){var ye=jt[le];(!le||ye.x<tt)&&(tt=ye.x),(!le||ye.y<ct)&&(ct=ye.y),(!le||ye.x>mt)&&(mt=ye.x),(!le||ye.y>Tt)&&(Tt=ye.y)}var er=Math.min(mt-tt,Tt-ct),$e=er/2,br=new Yf([],Jp);if(0===er)return new e(tt,ct);for(var zr=tt;zr<mt;zr+=er)for(var ln=ct;ln<Tt;ln+=er)br.push(new Zf(zr+$e,ln+$e,$e,R));for(var qr=function $p(R){for(var I=0,V=0,tt=0,ct=R[0],mt=0,Tt=ct.length,jt=Tt-1;mt<Tt;jt=mt++){var le=ct[mt],ye=ct[jt],we=le.x*ye.y-ye.x*le.y;V+=(le.x+ye.x)*we,tt+=(le.y+ye.y)*we,I+=3*we}return new Zf(V/I,tt/I,0,R)}(R),Sn=br.length;br.length;){var mn=br.pop();(mn.d>qr.d||!qr.d)&&(qr=mn,V&&console.log("found best %d after %d probes",Math.round(1e4*mn.d)/1e4,Sn)),!(mn.max-qr.d<=I)&&(br.push(new Zf(mn.p.x-($e=mn.h/2),mn.p.y-$e,$e,R)),br.push(new Zf(mn.p.x+$e,mn.p.y-$e,$e,R)),br.push(new Zf(mn.p.x-$e,mn.p.y+$e,$e,R)),br.push(new Zf(mn.p.x+$e,mn.p.y+$e,$e,R)),Sn+=4)}return V&&(console.log("num probes: "+Sn),console.log("best distance: "+qr.d)),qr.p}function Jp(R,I){return I.max-R.max}function Zf(R,I,V,tt){this.p=new e(R,I),this.h=V,this.d=function Qp(R,I){for(var V=!1,tt=1/0,ct=0;ct<I.length;ct++)for(var mt=I[ct],Tt=0,jt=mt.length,le=jt-1;Tt<jt;le=Tt++){var ye=mt[Tt],we=mt[le];ye.y>R.y!=we.y>R.y&&R.x<(we.x-ye.x)*(R.y-ye.y)/(we.y-ye.y)+ye.x&&(V=!V),tt=Math.min(tt,Tl(R,ye,we))}return(V?1:-1)*Math.sqrt(tt)}(this.p,tt),this.max=this.d+this.h*Math.SQRT2}Yf.prototype.push=function(I){this.data.push(I),this.length++,this._up(this.length-1)},Yf.prototype.pop=function(){if(0!==this.length){var I=this.data[0],V=this.data.pop();return this.length--,this.length>0&&(this.data[0]=V,this._down(0)),I}},Yf.prototype.peek=function(){return this.data[0]},Yf.prototype._up=function(I){for(var tt=this.data,ct=this.compare,mt=tt[I];I>0;){var Tt=I-1>>1,jt=tt[Tt];if(ct(mt,jt)>=0)break;tt[I]=jt,I=Tt}tt[I]=mt},Yf.prototype._down=function(I){for(var tt=this.data,ct=this.compare,mt=this.length>>1,Tt=tt[I];I<mt;){var jt=1+(I<<1),le=tt[jt],ye=jt+1;if(ye<this.length&&ct(tt[ye],le)<0&&(jt=ye,le=tt[ye]),ct(le,Tt)>=0)break;tt[I]=le,I=jt}tt[I]=Tt};var gh=Number.POSITIVE_INFINITY;function yv(R,I){return I[1]!==gh?function tt(ct,mt,Tt){var jt=0,le=0;switch(mt=Math.abs(mt),Tt=Math.abs(Tt),ct){case"top-right":case"top-left":case"top":le=Tt-7;break;case"bottom-right":case"bottom-left":case"bottom":le=7-Tt}switch(ct){case"top-right":case"bottom-right":case"right":jt=-mt;break;case"top-left":case"bottom-left":case"left":jt=mt}return[jt,le]}(R,I[0],I[1]):function V(ct,mt){var Tt=0,jt=0;mt<0&&(mt=0);var le=mt/Math.sqrt(2);switch(ct){case"top-right":case"top-left":jt=le-7;break;case"bottom-right":case"bottom-left":jt=7-le;break;case"bottom":jt=7-mt;break;case"top":jt=mt-7}switch(ct){case"top-right":case"bottom-right":Tt=-le;break;case"top-left":case"bottom-left":Tt=le;break;case"left":Tt=mt;break;case"right":Tt=-mt}return[Tt,jt]}(R,I[0])}function yh(R){switch(R){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var qu=32640;function mv(R,I,V,tt,ct,mt,Tt,jt,le,ye,we,Ue,er,$e,br){var zr=function Xp(R,I,V,tt,ct,mt,Tt,jt){for(var le=tt.layout.get("text-rotate").evaluate(mt,{})*Math.PI/180,ye=[],we=0,Ue=I.positionedLines;we<Ue.length;we+=1)for(var er=Ue[we],$e=0,br=er.positionedGlyphs;$e<br.length;$e+=1){var zr=br[$e];if(zr.rect){var ln=zr.rect||{},Sn=4,mn=!0,An=1,Pn=0,On=(ct||jt)&&zr.vertical,jn=zr.metrics.advance*zr.scale/2;if(jt&&I.verticalizable&&(Pn=er.lineOffset/2-(zr.imageName?-(24-zr.metrics.width*zr.scale)/2:24*(zr.scale-1))),zr.imageName){var la=Tt[zr.imageName];mn=la.sdf,Sn=1/(An=la.pixelRatio)}var va=ct?[zr.x+jn,zr.y]:[0,0],Ia=ct?[0,0]:[zr.x+jn+V[0],zr.y+V[1]-Pn],ya=[0,0];On&&(ya=Ia,Ia=[0,0]);var ba=(zr.metrics.left-Sn)*zr.scale-jn+Ia[0],Na=(-zr.metrics.top-Sn)*zr.scale+Ia[1],Da=ba+ln.w*zr.scale/An,Ka=Na+ln.h*zr.scale/An,ui=new e(ba,Na),Ja=new e(Da,Na),Qa=new e(ba,Ka),Xa=new e(Da,Ka);if(On){var vi=new e(-jn,jn-gc),gi=-Math.PI/2,Ii=12-jn,$i=new e(22-Ii,-(zr.imageName?Ii:0)),Zi=new(Function.prototype.bind.apply(e,[null].concat(ya)));ui._rotateAround(gi,vi)._add($i)._add(Zi),Ja._rotateAround(gi,vi)._add($i)._add(Zi),Qa._rotateAround(gi,vi)._add($i)._add(Zi),Xa._rotateAround(gi,vi)._add($i)._add(Zi)}if(le){var yo=Math.sin(le),mo=Math.cos(le),_i=[mo,-yo,yo,mo];ui._matMult(_i),Ja._matMult(_i),Qa._matMult(_i),Xa._matMult(_i)}var Lo=new e(0,0),Po=new e(0,0);ye.push({tl:ui,tr:Ja,bl:Qa,br:Xa,tex:ln,writingMode:I.writingMode,glyphOffset:va,sectionIndex:zr.sectionIndex,isSDF:mn,pixelOffsetTL:Lo,pixelOffsetBR:Po,minFontScaleX:0,minFontScaleY:0})}}return ye}(0,V,jt,ct,mt,Tt,tt,R.allowVerticalPlacement),ln=R.textSizeData,qr=null;"source"===ln.kind?(qr=[Sl*ct.layout.get("text-size").evaluate(Tt,{})])[0]>qu&&N(R.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===ln.kind&&((qr=[Sl*$e.compositeTextSizes[0].evaluate(Tt,{},br),Sl*$e.compositeTextSizes[1].evaluate(Tt,{},br)])[0]>qu||qr[1]>qu)&&N(R.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),R.addSymbols(R.text,zr,qr,jt,mt,Tt,ye,I,le.lineStartIndex,le.lineLength,er,br);for(var Sn=0,mn=we;Sn<mn.length;Sn+=1)Ue[mn[Sn]]=R.text.placedSymbolArray.length-1;return 4*zr.length}function xv(R){for(var I in R)return R[I];return null}function e0(R,I,V,tt){var ct=R.compareText;if(I in ct){for(var mt=ct[I],Tt=mt.length-1;Tt>=0;Tt--)if(tt.dist(mt[Tt])<V)return!0}else ct[I]=[];return ct[I].push(tt),!1}var r0=Nf.VectorTileFeature.types,n0=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Gc(R,I,V,tt,ct,mt,Tt,jt,le,ye,we,Ue,er){var $e=jt?Math.min(qu,Math.round(jt[0])):0,br=jt?Math.min(qu,Math.round(jt[1])):0;R.emplaceBack(I,V,Math.round(32*tt),Math.round(32*ct),mt,Tt,($e<<1)+(le?1:0),br,16*ye,16*we,256*Ue,256*er)}function mh(R,I,V){R.emplaceBack(I.x,I.y,V),R.emplaceBack(I.x,I.y,V),R.emplaceBack(I.x,I.y,V),R.emplaceBack(I.x,I.y,V)}function a0(R){for(var I=0,V=R.sections;I<V.length;I+=1)if(Sr(V[I].text))return!0;return!1}var jf=function(I){this.layoutVertexArray=new Ps,this.indexArray=new wl,this.programConfigurations=I,this.segments=new Y,this.dynamicLayoutVertexArray=new qf,this.opacityVertexArray=new tc,this.placedSymbolArray=new Ju};jf.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},jf.prototype.upload=function(I,V,tt,ct){this.isEmpty()||(tt&&(this.layoutVertexBuffer=I.createVertexBuffer(this.layoutVertexArray,fh.members),this.indexBuffer=I.createIndexBuffer(this.indexArray,V),this.dynamicLayoutVertexBuffer=I.createVertexBuffer(this.dynamicLayoutVertexArray,ip.members,!0),this.opacityVertexBuffer=I.createVertexBuffer(this.opacityVertexArray,n0,!0),this.opacityVertexBuffer.itemSize=1),(tt||ct)&&this.programConfigurations.upload(I))},jf.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ra("SymbolBuffers",jf);var mc=function(I,V,tt){this.layoutVertexArray=new I,this.layoutAttributes=V,this.indexArray=new tt,this.segments=new Y,this.collisionVertexArray=new Uo};mc.prototype.upload=function(I){this.layoutVertexBuffer=I.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=I.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=I.createVertexBuffer(this.collisionVertexArray,op.members,!0)},mc.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ra("CollisionBuffers",mc);var li=function(I){this.collisionBoxArray=I.collisionBoxArray,this.zoom=I.zoom,this.overscaling=I.overscaling,this.layers=I.layers,this.layerIds=this.layers.map(function(le){return le.id}),this.index=I.index,this.pixelRatio=I.pixelRatio,this.sourceLayerIndex=I.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ff([]),this.placementViewportMatrix=Ff([]);var tt=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ph(this.zoom,tt["text-size"]),this.iconSizeData=ph(this.zoom,tt["icon-size"]);var ct=this.layers[0].layout,mt=ct.get("symbol-sort-key"),Tt=ct.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==Tt&&void 0!==mt.constantOr(1),this.sortFeaturesByY=("viewport-y"===Tt||"auto"===Tt&&!this.sortFeaturesByKey)&&(ct.get("text-allow-overlap")||ct.get("icon-allow-overlap")||ct.get("text-ignore-placement")||ct.get("icon-ignore-placement")),"point"===ct.get("symbol-placement")&&(this.writingModes=ct.get("text-writing-mode").map(function(le){return gs[le]})),this.stateDependentLayerIds=this.layers.filter(function(le){return le.isStateDependent()}).map(function(le){return le.id}),this.sourceID=I.sourceID};li.prototype.createArrays=function(){this.text=new jf(new Fa(fh.members,this.layers,this.zoom,function(I){return/^text/.test(I)})),this.icon=new jf(new Fa(fh.members,this.layers,this.zoom,function(I){return/^icon/.test(I)})),this.glyphOffsetArray=new Ds,this.lineVertexArray=new Mc,this.symbolInstances=new Ac},li.prototype.calculateGlyphDependencies=function(I,V,tt,ct,mt){for(var Tt=0;Tt<I.length;Tt++)if(V[I.charCodeAt(Tt)]=!0,(tt||ct)&&mt){var jt=vc[I.charAt(Tt)];jt&&(V[jt.charCodeAt(0)]=!0)}},li.prototype.populate=function(I,V,tt){var ct=this.layers[0],mt=ct.layout,Tt=mt.get("text-font"),jt=mt.get("text-field"),le=mt.get("icon-image"),ye=("constant"!==jt.value.kind||jt.value.value instanceof Ci&&!jt.value.value.isEmpty()||jt.value.value.toString().length>0)&&("constant"!==Tt.value.kind||Tt.value.value.length>0),we="constant"!==le.value.kind||!!le.value.value||Object.keys(le.parameters).length>0,Ue=mt.get("symbol-sort-key");if(this.features=[],ye||we){for(var er=V.iconDependencies,$e=V.glyphDependencies,br=V.availableImages,zr=new da(this.zoom),ln=0,qr=I;ln<qr.length;ln+=1){var Sn=qr[ln],mn=Sn.feature,An=Sn.id,Pn=Sn.index,On=Sn.sourceLayerIndex,jn=ct._featureFilter.needGeometry,Yn={type:mn.type,id:An,properties:mn.properties,geometry:jn?oi(mn):[]};if(ct._featureFilter.filter(zr,Yn,tt)){jn||(Yn.geometry=oi(mn));var wa=void 0;if(ye){var la=ct.getValueAndResolveTokens("text-field",Yn,tt,br),va=Ci.factory(la);a0(va)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===kn()||this.hasRTLText&&aa.isParsed())&&(wa=up(va,ct,Yn))}var Ia=void 0;if(we){var ya=ct.getValueAndResolveTokens("icon-image",Yn,tt,br);Ia=ya instanceof ro?ya:ro.fromString(ya)}if(wa||Ia){var ba=this.sortFeaturesByKey?Ue.evaluate(Yn,{},tt):void 0,Na={id:An,text:wa,icon:Ia,index:Pn,sourceLayerIndex:On,geometry:oi(mn),properties:mn.properties,type:r0[mn.type],sortKey:ba};if(this.features.push(Na),Ia&&(er[Ia.name]=!0),wa){var Da=Tt.evaluate(Yn,{},tt).join(","),Ka="map"===mt.get("text-rotation-alignment")&&"point"!==mt.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(gs.vertical)>=0;for(var ui=0,Ja=wa.sections;ui<Ja.length;ui+=1){var Qa=Ja[ui];if(Qa.image)er[Qa.image.name]=!0;else{var Xa=zt(wa.toString()),vi=Qa.fontStack||Da,gi=$e[vi]=$e[vi]||{};this.calculateGlyphDependencies(Qa.text,gi,Ka,this.allowVerticalPlacement,Xa)}}}}}}"line"===mt.get("symbol-placement")&&(this.features=function fp(R){var I={},V={},tt=[],ct=0;function mt(qr){tt.push(R[qr]),ct++}function Tt(qr,Sn,mn){var An=V[qr];return delete V[qr],V[Sn]=An,tt[An].geometry[0].pop(),tt[An].geometry[0]=tt[An].geometry[0].concat(mn[0]),An}function jt(qr,Sn,mn){var An=I[Sn];return delete I[Sn],I[qr]=An,tt[An].geometry[0].shift(),tt[An].geometry[0]=mn[0].concat(tt[An].geometry[0]),An}function le(qr,Sn,mn){var An=mn?Sn[0][Sn[0].length-1]:Sn[0][0];return qr+":"+An.x+":"+An.y}for(var ye=0;ye<R.length;ye++){var we=R[ye],Ue=we.geometry,er=we.text?we.text.toString():null;if(er){var $e=le(er,Ue),br=le(er,Ue,!0);if($e in V&&br in I&&V[$e]!==I[br]){var zr=jt($e,br,Ue),ln=Tt($e,br,tt[zr].geometry);delete I[$e],delete V[br],V[le(er,tt[ln].geometry,!0)]=ln,tt[zr].geometry=null}else $e in V?Tt($e,br,Ue):br in I?jt($e,br,Ue):(mt(ye),I[$e]=ct-1,V[br]=ct-1)}else mt(ye)}return tt.filter(function(qr){return qr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Ii,Bi){return Ii.sortKey-Bi.sortKey})}},li.prototype.update=function(I,V,tt){!this.stateDependentLayers.length||(this.text.programConfigurations.updatePaintArrays(I,V,this.layers,tt),this.icon.programConfigurations.updatePaintArrays(I,V,this.layers,tt))},li.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},li.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},li.prototype.upload=function(I){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(I),this.iconCollisionBox.upload(I)),this.text.upload(I,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(I,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},li.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},li.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},li.prototype.addToLineVertexArray=function(I,V){var tt=this.lineVertexArray.length;if(void 0!==I.segment){for(var ct=I.dist(V[I.segment+1]),mt=I.dist(V[I.segment]),Tt={},jt=I.segment+1;jt<V.length;jt++)Tt[jt]={x:V[jt].x,y:V[jt].y,tileUnitDistanceFromAnchor:ct},jt<V.length-1&&(ct+=V[jt+1].dist(V[jt]));for(var le=I.segment||0;le>=0;le--)Tt[le]={x:V[le].x,y:V[le].y,tileUnitDistanceFromAnchor:mt},le>0&&(mt+=V[le-1].dist(V[le]));for(var ye=0;ye<V.length;ye++){var we=Tt[ye];this.lineVertexArray.emplaceBack(we.x,we.y,we.tileUnitDistanceFromAnchor)}}return{lineStartIndex:tt,lineLength:this.lineVertexArray.length-tt}},li.prototype.addSymbols=function(I,V,tt,ct,mt,Tt,jt,le,ye,we,Ue,er){for(var $e=I.indexArray,br=I.layoutVertexArray,zr=I.segments.prepareSegment(4*V.length,br,$e,Tt.sortKey),ln=this.glyphOffsetArray.length,qr=zr.vertexLength,Sn=this.allowVerticalPlacement&&jt===gs.vertical?Math.PI/2:0,mn=Tt.text&&Tt.text.sections,An=0;An<V.length;An++){var Pn=V[An],On=Pn.tl,jn=Pn.tr,Yn=Pn.bl,wa=Pn.br,la=Pn.tex,va=Pn.pixelOffsetTL,Ia=Pn.pixelOffsetBR,ya=Pn.minFontScaleX,ba=Pn.minFontScaleY,Na=Pn.glyphOffset,Da=Pn.isSDF,Ka=Pn.sectionIndex,ui=zr.vertexLength,Ja=Na[1];Gc(br,le.x,le.y,On.x,Ja+On.y,la.x,la.y,tt,Da,va.x,va.y,ya,ba),Gc(br,le.x,le.y,jn.x,Ja+jn.y,la.x+la.w,la.y,tt,Da,Ia.x,va.y,ya,ba),Gc(br,le.x,le.y,Yn.x,Ja+Yn.y,la.x,la.y+la.h,tt,Da,va.x,Ia.y,ya,ba),Gc(br,le.x,le.y,wa.x,Ja+wa.y,la.x+la.w,la.y+la.h,tt,Da,Ia.x,Ia.y,ya,ba),mh(I.dynamicLayoutVertexArray,le,Sn),$e.emplaceBack(ui,ui+1,ui+2),$e.emplaceBack(ui+1,ui+2,ui+3),zr.vertexLength+=4,zr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Na[0]),(An===V.length-1||Ka!==V[An+1].sectionIndex)&&I.programConfigurations.populatePaintArrays(br.length,Tt,Tt.index,{},er,mn&&mn[Ka])}I.placedSymbolArray.emplaceBack(le.x,le.y,ln,this.glyphOffsetArray.length-ln,qr,ye,we,le.segment,tt?tt[0]:0,tt?tt[1]:0,ct[0],ct[1],jt,0,!1,0,Ue)},li.prototype._addCollisionDebugVertex=function(I,V,tt,ct,mt,Tt){return V.emplaceBack(0,0),I.emplaceBack(tt.x,tt.y,ct,mt,Math.round(Tt.x),Math.round(Tt.y))},li.prototype.addCollisionDebugVertices=function(I,V,tt,ct,mt,Tt,jt){var le=mt.segments.prepareSegment(4,mt.layoutVertexArray,mt.indexArray),ye=le.vertexLength,we=mt.layoutVertexArray,Ue=mt.collisionVertexArray,er=jt.anchorX,$e=jt.anchorY;this._addCollisionDebugVertex(we,Ue,Tt,er,$e,new e(I,V)),this._addCollisionDebugVertex(we,Ue,Tt,er,$e,new e(tt,V)),this._addCollisionDebugVertex(we,Ue,Tt,er,$e,new e(tt,ct)),this._addCollisionDebugVertex(we,Ue,Tt,er,$e,new e(I,ct)),le.vertexLength+=4;var br=mt.indexArray;br.emplaceBack(ye,ye+1),br.emplaceBack(ye+1,ye+2),br.emplaceBack(ye+2,ye+3),br.emplaceBack(ye+3,ye),le.primitiveLength+=4},li.prototype.addDebugCollisionBoxes=function(I,V,tt,ct){for(var mt=I;mt<V;mt++){var Tt=this.collisionBoxArray.get(mt);this.addCollisionDebugVertices(Tt.x1,Tt.y1,Tt.x2,Tt.y2,ct?this.textCollisionBox:this.iconCollisionBox,Tt.anchorPoint,tt)}},li.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new mc(Lf,jh.members,bf),this.iconCollisionBox=new mc(Lf,jh.members,bf);for(var I=0;I<this.symbolInstances.length;I++){var V=this.symbolInstances.get(I);this.addDebugCollisionBoxes(V.textBoxStartIndex,V.textBoxEndIndex,V,!0),this.addDebugCollisionBoxes(V.verticalTextBoxStartIndex,V.verticalTextBoxEndIndex,V,!0),this.addDebugCollisionBoxes(V.iconBoxStartIndex,V.iconBoxEndIndex,V,!1),this.addDebugCollisionBoxes(V.verticalIconBoxStartIndex,V.verticalIconBoxEndIndex,V,!1)}},li.prototype._deserializeCollisionBoxesForSymbol=function(I,V,tt,ct,mt,Tt,jt,le,ye){for(var we={},Ue=V;Ue<tt;Ue++){var er=I.get(Ue);we.textBox={x1:er.x1,y1:er.y1,x2:er.x2,y2:er.y2,anchorPointX:er.anchorPointX,anchorPointY:er.anchorPointY},we.textFeatureIndex=er.featureIndex;break}for(var $e=ct;$e<mt;$e++){var br=I.get($e);we.verticalTextBox={x1:br.x1,y1:br.y1,x2:br.x2,y2:br.y2,anchorPointX:br.anchorPointX,anchorPointY:br.anchorPointY},we.verticalTextFeatureIndex=br.featureIndex;break}for(var zr=Tt;zr<jt;zr++){var ln=I.get(zr);we.iconBox={x1:ln.x1,y1:ln.y1,x2:ln.x2,y2:ln.y2,anchorPointX:ln.anchorPointX,anchorPointY:ln.anchorPointY},we.iconFeatureIndex=ln.featureIndex;break}for(var qr=le;qr<ye;qr++){var Sn=I.get(qr);we.verticalIconBox={x1:Sn.x1,y1:Sn.y1,x2:Sn.x2,y2:Sn.y2,anchorPointX:Sn.anchorPointX,anchorPointY:Sn.anchorPointY},we.verticalIconFeatureIndex=Sn.featureIndex;break}return we},li.prototype.deserializeCollisionBoxes=function(I){this.collisionArrays=[];for(var V=0;V<this.symbolInstances.length;V++){var tt=this.symbolInstances.get(V);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(I,tt.textBoxStartIndex,tt.textBoxEndIndex,tt.verticalTextBoxStartIndex,tt.verticalTextBoxEndIndex,tt.iconBoxStartIndex,tt.iconBoxEndIndex,tt.verticalIconBoxStartIndex,tt.verticalIconBoxEndIndex))}},li.prototype.hasTextData=function(){return this.text.segments.get().length>0},li.prototype.hasIconData=function(){return this.icon.segments.get().length>0},li.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},li.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},li.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},li.prototype.addIndicesForPlacedSymbol=function(I,V){for(var tt=I.placedSymbolArray.get(V),ct=tt.vertexStartIndex+4*tt.numGlyphs,mt=tt.vertexStartIndex;mt<ct;mt+=4)I.indexArray.emplaceBack(mt,mt+1,mt+2),I.indexArray.emplaceBack(mt+1,mt+2,mt+3)},li.prototype.getSortedSymbolIndexes=function(I){if(this.sortedAngle===I&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var V=Math.sin(I),tt=Math.cos(I),ct=[],mt=[],Tt=[],jt=0;jt<this.symbolInstances.length;++jt){Tt.push(jt);var le=this.symbolInstances.get(jt);ct.push(0|Math.round(V*le.anchorX+tt*le.anchorY)),mt.push(le.featureIndex)}return Tt.sort(function(ye,we){return ct[ye]-ct[we]||mt[we]-mt[ye]}),Tt},li.prototype.addToSortKeyRanges=function(I,V){var tt=this.sortKeyRanges[this.sortKeyRanges.length-1];tt&&tt.sortKey===V?tt.symbolInstanceEnd=I+1:this.sortKeyRanges.push({sortKey:V,symbolInstanceStart:I,symbolInstanceEnd:I+1})},li.prototype.sortFeatures=function(I){var V=this;if(this.sortFeaturesByY&&this.sortedAngle!==I&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(I),this.sortedAngle=I,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var tt=0,ct=this.symbolInstanceIndexes;tt<ct.length;tt+=1){var Tt=this.symbolInstances.get(ct[tt]);this.featureSortOrder.push(Tt.featureIndex),[Tt.rightJustifiedTextSymbolIndex,Tt.centerJustifiedTextSymbolIndex,Tt.leftJustifiedTextSymbolIndex].forEach(function(jt,le,ye){jt>=0&&ye.indexOf(jt)===le&&V.addIndicesForPlacedSymbol(V.text,jt)}),Tt.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Tt.verticalPlacedTextSymbolIndex),Tt.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Tt.placedIconSymbolIndex),Tt.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Tt.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ra("SymbolBucket",li,{omit:["layers","collisionBoxArray","features","compareText"]}),li.MAX_GLYPHS=65535,li.addDynamicAttributes=mh;var o0=new ri({"symbol-placement":new Xn(Ze.layout_symbol["symbol-placement"]),"symbol-spacing":new Xn(Ze.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Xn(Ze.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ca(Ze.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Xn(Ze.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Xn(Ze.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Xn(Ze.layout_symbol["icon-ignore-placement"]),"icon-optional":new Xn(Ze.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Xn(Ze.layout_symbol["icon-rotation-alignment"]),"icon-size":new ca(Ze.layout_symbol["icon-size"]),"icon-text-fit":new Xn(Ze.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Xn(Ze.layout_symbol["icon-text-fit-padding"]),"icon-image":new ca(Ze.layout_symbol["icon-image"]),"icon-rotate":new ca(Ze.layout_symbol["icon-rotate"]),"icon-padding":new Xn(Ze.layout_symbol["icon-padding"]),"icon-keep-upright":new Xn(Ze.layout_symbol["icon-keep-upright"]),"icon-offset":new ca(Ze.layout_symbol["icon-offset"]),"icon-anchor":new ca(Ze.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Xn(Ze.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Xn(Ze.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Xn(Ze.layout_symbol["text-rotation-alignment"]),"text-field":new ca(Ze.layout_symbol["text-field"]),"text-font":new ca(Ze.layout_symbol["text-font"]),"text-size":new ca(Ze.layout_symbol["text-size"]),"text-max-width":new ca(Ze.layout_symbol["text-max-width"]),"text-line-height":new Xn(Ze.layout_symbol["text-line-height"]),"text-letter-spacing":new ca(Ze.layout_symbol["text-letter-spacing"]),"text-justify":new ca(Ze.layout_symbol["text-justify"]),"text-radial-offset":new ca(Ze.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Xn(Ze.layout_symbol["text-variable-anchor"]),"text-anchor":new ca(Ze.layout_symbol["text-anchor"]),"text-max-angle":new Xn(Ze.layout_symbol["text-max-angle"]),"text-writing-mode":new Xn(Ze.layout_symbol["text-writing-mode"]),"text-rotate":new ca(Ze.layout_symbol["text-rotate"]),"text-padding":new Xn(Ze.layout_symbol["text-padding"]),"text-keep-upright":new Xn(Ze.layout_symbol["text-keep-upright"]),"text-transform":new ca(Ze.layout_symbol["text-transform"]),"text-offset":new ca(Ze.layout_symbol["text-offset"]),"text-allow-overlap":new Xn(Ze.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Xn(Ze.layout_symbol["text-ignore-placement"]),"text-optional":new Xn(Ze.layout_symbol["text-optional"])}),xh={paint:new ri({"icon-opacity":new ca(Ze.paint_symbol["icon-opacity"]),"icon-color":new ca(Ze.paint_symbol["icon-color"]),"icon-halo-color":new ca(Ze.paint_symbol["icon-halo-color"]),"icon-halo-width":new ca(Ze.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ca(Ze.paint_symbol["icon-halo-blur"]),"icon-translate":new Xn(Ze.paint_symbol["icon-translate"]),"icon-translate-anchor":new Xn(Ze.paint_symbol["icon-translate-anchor"]),"text-opacity":new ca(Ze.paint_symbol["text-opacity"]),"text-color":new ca(Ze.paint_symbol["text-color"],{runtimeType:Ve,getOverride:function(R){return R.textColor},hasOverride:function(R){return!!R.textColor}}),"text-halo-color":new ca(Ze.paint_symbol["text-halo-color"]),"text-halo-width":new ca(Ze.paint_symbol["text-halo-width"]),"text-halo-blur":new ca(Ze.paint_symbol["text-halo-blur"]),"text-translate":new Xn(Ze.paint_symbol["text-translate"]),"text-translate-anchor":new Xn(Ze.paint_symbol["text-translate-anchor"])}),layout:o0},Kf=function(I){this.type=I.property.overrides?I.property.overrides.runtimeType:Lr,this.defaultValue=I};Kf.prototype.evaluate=function(I){if(I.formattedSection){var V=this.defaultValue.property.overrides;if(V&&V.hasOverride(I.formattedSection))return V.getOverride(I.formattedSection)}return I.feature&&I.featureState?this.defaultValue.evaluate(I.feature,I.featureState):this.defaultValue.property.specification.default},Kf.prototype.eachChild=function(I){this.defaultValue.isConstant()||I(this.defaultValue.value._styleExpression.expression)},Kf.prototype.outputDefined=function(){return!1},Kf.prototype.serialize=function(){return null},ra("FormatSectionOverride",Kf,{omit:["defaultValue"]});var l0=function(R){function I(V){R.call(this,V,xh)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.recalculate=function(tt,ct){if(R.prototype.recalculate.call(this,tt,ct),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var mt=this.layout.get("text-writing-mode");if(mt){for(var Tt=[],jt=0,le=mt;jt<le.length;jt+=1){var ye=le[jt];Tt.indexOf(ye)<0&&Tt.push(ye)}this.layout._values["text-writing-mode"]=Tt}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},I.prototype.getValueAndResolveTokens=function(tt,ct,mt,Tt){var jt=this.layout.get(tt).evaluate(ct,{},mt,Tt),le=this._unevaluatedLayout._values[tt];return le.isDataDriven()||cl(le.value)||!jt?jt:function i0(R,I){return I.replace(/{([^{}]+)}/g,function(V,tt){return tt in R?String(R[tt]):""})}(ct.properties,jt)},I.prototype.createBucket=function(tt){return new li(tt)},I.prototype.queryRadius=function(){return 0},I.prototype.queryIntersectsFeature=function(){return!1},I.prototype._setPaintOverrides=function(){for(var tt=0,ct=xh.paint.overridableProperties;tt<ct.length;tt+=1){var mt=ct[tt];if(I.hasPaintOverride(this.layout,mt)){var ye,Tt=this.paint.get(mt),jt=new Kf(Tt),le=new Qo(jt,Tt.property.specification);ye="constant"===Tt.value.kind||"source"===Tt.value.kind?new $o("source",le):new Ao("composite",le,Tt.value.zoomStops,Tt.value._interpolationType),this.paint._values[mt]=new La(Tt.property,ye,Tt.parameters)}}},I.prototype._handleOverridablePaintPropertyUpdate=function(tt,ct,mt){return!(!this.layout||ct.isDataDriven()||mt.isDataDriven())&&I.hasPaintOverride(this.layout,tt)},I.hasPaintOverride=function(tt,ct){var mt=tt.get("text-field"),Tt=xh.paint.properties[ct],jt=!1,le=function(Ue){for(var er=0,$e=Ue;er<$e.length;er+=1)if(Tt.overrides&&Tt.overrides.hasOverride($e[er]))return void(jt=!0)};if("constant"===mt.value.kind&&mt.value.value instanceof Ci)le(mt.value.value.sections);else if("source"===mt.value.kind){var ye=function(Ue){jt||(Ue instanceof ho&&Li(Ue.value)===Kn?le(Ue.value.sections):Ue instanceof Ro?le(Ue.sections):Ue.eachChild(ye))},we=mt.value;we._styleExpression&&ye(we._styleExpression.expression)}return jt},I}(Mi),f0={paint:new ri({"background-color":new Xn(Ze.paint_background["background-color"]),"background-pattern":new di(Ze.paint_background["background-pattern"]),"background-opacity":new Xn(Ze.paint_background["background-opacity"])})},c0=function(R){function I(V){R.call(this,V,f0)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I}(Mi),v0={paint:new ri({"raster-opacity":new Xn(Ze.paint_raster["raster-opacity"]),"raster-hue-rotate":new Xn(Ze.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Xn(Ze.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Xn(Ze.paint_raster["raster-brightness-max"]),"raster-saturation":new Xn(Ze.paint_raster["raster-saturation"]),"raster-contrast":new Xn(Ze.paint_raster["raster-contrast"]),"raster-resampling":new Xn(Ze.paint_raster["raster-resampling"]),"raster-fade-duration":new Xn(Ze.paint_raster["raster-fade-duration"])})},d0=function(R){function I(V){R.call(this,V,v0)}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I}(Mi);var g0=function(R){function I(V){R.call(this,V,{}),this.implementation=V}return R&&(I.__proto__=R),(I.prototype=Object.create(R&&R.prototype)).constructor=I,I.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},I.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},I.prototype.recalculate=function(){},I.prototype.updateTransitions=function(){},I.prototype.hasTransition=function(){},I.prototype.serialize=function(){},I.prototype.onAdd=function(tt){this.implementation.onAdd&&this.implementation.onAdd(tt,tt.painter.context.gl)},I.prototype.onRemove=function(tt){this.implementation.onRemove&&this.implementation.onRemove(tt,tt.painter.context.gl)},I}(Mi),y0={circle:Xv,heatmap:Qv,hillshade:qv,fill:Md,"fill-extrusion":Yd,line:np,symbol:l0,background:c0,raster:d0};var bv=self.HTMLImageElement,wv=self.HTMLCanvasElement,Tv=self.HTMLVideoElement,Av=self.ImageData,Wc=self.ImageBitmap,Sf=function(I,V,tt,ct){this.context=I,this.format=tt,this.texture=I.gl.createTexture(),this.update(V,ct)};Sf.prototype.update=function(I,V,tt){var ct=I.width,mt=I.height,Tt=!(this.size&&this.size[0]===ct&&this.size[1]===mt||tt),le=this.context,ye=le.gl;if(this.useMipmap=Boolean(V&&V.useMipmap),ye.bindTexture(ye.TEXTURE_2D,this.texture),le.pixelStoreUnpackFlipY.set(!1),le.pixelStoreUnpack.set(1),le.pixelStoreUnpackPremultiplyAlpha.set(this.format===ye.RGBA&&(!V||!1!==V.premultiply)),Tt)this.size=[ct,mt],I instanceof bv||I instanceof wv||I instanceof Tv||I instanceof Av||Wc&&I instanceof Wc?ye.texImage2D(ye.TEXTURE_2D,0,this.format,this.format,ye.UNSIGNED_BYTE,I):ye.texImage2D(ye.TEXTURE_2D,0,this.format,ct,mt,0,this.format,ye.UNSIGNED_BYTE,I.data);else{var we=tt||{x:0,y:0},Ue=we.x,er=we.y;I instanceof bv||I instanceof wv||I instanceof Tv||I instanceof Av||Wc&&I instanceof Wc?ye.texSubImage2D(ye.TEXTURE_2D,0,Ue,er,ye.RGBA,ye.UNSIGNED_BYTE,I):ye.texSubImage2D(ye.TEXTURE_2D,0,Ue,er,ct,mt,ye.RGBA,ye.UNSIGNED_BYTE,I.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ye.generateMipmap(ye.TEXTURE_2D)},Sf.prototype.bind=function(I,V,tt){var Tt=this.context.gl;Tt.bindTexture(Tt.TEXTURE_2D,this.texture),tt===Tt.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(tt=Tt.LINEAR),I!==this.filter&&(Tt.texParameteri(Tt.TEXTURE_2D,Tt.TEXTURE_MAG_FILTER,I),Tt.texParameteri(Tt.TEXTURE_2D,Tt.TEXTURE_MIN_FILTER,tt||I),this.filter=I),V!==this.wrap&&(Tt.texParameteri(Tt.TEXTURE_2D,Tt.TEXTURE_WRAP_S,V),Tt.texParameteri(Tt.TEXTURE_2D,Tt.TEXTURE_WRAP_T,V),this.wrap=V)},Sf.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Sf.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var bh=function(I){var V=this;this._callback=I,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){V._triggered=!1,V._callback()})};bh.prototype.trigger=function(){var I=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){I._triggered=!1,I._callback()},0))},bh.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Jf=function(I,V,tt){this.target=I,this.parent=V,this.mapId=tt,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},S(["receive","process"],this),this.invoker=new bh(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=z()?I:self};function Mv(R,I,V){var tt=2*Math.PI*6378137/256/Math.pow(2,V);return[R*tt-2*Math.PI*6378137/2,I*tt-2*Math.PI*6378137/2]}Jf.prototype.send=function(I,V,tt,ct,mt){var Tt=this;void 0===mt&&(mt=!1);var jt=Math.round(1e18*Math.random()).toString(36).substring(0,10);tt&&(this.callbacks[jt]=tt);var le=J(this.globalScope)?void 0:[];return this.target.postMessage({id:jt,type:I,hasCallback:!!tt,targetMapId:ct,mustQueue:mt,sourceMapId:this.mapId,data:Mo(V,le)},le),{cancel:function(){tt&&delete Tt.callbacks[jt],Tt.target.postMessage({id:jt,type:"<cancel>",targetMapId:ct,sourceMapId:Tt.mapId})}}},Jf.prototype.receive=function(I){var V=I.data,tt=V.id;if(tt&&(!V.targetMapId||this.mapId===V.targetMapId))if("<cancel>"===V.type){delete this.tasks[tt];var ct=this.cancelCallbacks[tt];delete this.cancelCallbacks[tt],ct&&ct()}else z()||V.mustQueue?(this.tasks[tt]=V,this.taskQueue.push(tt),this.invoker.trigger()):this.processTask(tt,V)},Jf.prototype.process=function(){if(this.taskQueue.length){var I=this.taskQueue.shift(),V=this.tasks[I];delete this.tasks[I],this.taskQueue.length&&this.invoker.trigger(),V&&this.processTask(I,V)}},Jf.prototype.processTask=function(I,V){var tt=this;if("<response>"===V.type){var ct=this.callbacks[I];delete this.callbacks[I],ct&&(V.error?ct(si(V.error)):ct(null,si(V.data)))}else{var mt=!1,Tt=J(this.globalScope)?void 0:[],jt=V.hasCallback?function(er,$e){mt=!0,delete tt.cancelCallbacks[I],tt.target.postMessage({id:I,type:"<response>",sourceMapId:tt.mapId,error:er?Mo(er):null,data:Mo($e,Tt)},Tt)}:function(er){mt=!0},le=null,ye=si(V.data);if(this.parent[V.type])le=this.parent[V.type](V.sourceMapId,ye,jt);else if(this.parent.getWorkerSource){var we=V.type.split(".");le=this.parent.getWorkerSource(V.sourceMapId,we[0],ye.source)[we[1]](ye,jt)}else jt(new Error("Could not find function "+V.type));!mt&&le&&le.cancel&&(this.cancelCallbacks[I]=le.cancel)}},Jf.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Wi=function(I,V){I&&(V?this.setSouthWest(I).setNorthEast(V):4===I.length?this.setSouthWest([I[0],I[1]]).setNorthEast([I[2],I[3]]):this.setSouthWest(I[0]).setNorthEast(I[1]))};Wi.prototype.setNorthEast=function(I){return this._ne=I instanceof xi?new xi(I.lng,I.lat):xi.convert(I),this},Wi.prototype.setSouthWest=function(I){return this._sw=I instanceof xi?new xi(I.lng,I.lat):xi.convert(I),this},Wi.prototype.extend=function(I){var ct,mt,V=this._sw,tt=this._ne;if(I instanceof xi)ct=I,mt=I;else{if(!(I instanceof Wi))return Array.isArray(I)?4===I.length||I.every(Array.isArray)?this.extend(Wi.convert(I)):this.extend(xi.convert(I)):this;if(mt=I._ne,!(ct=I._sw)||!mt)return this}return V||tt?(V.lng=Math.min(ct.lng,V.lng),V.lat=Math.min(ct.lat,V.lat),tt.lng=Math.max(mt.lng,tt.lng),tt.lat=Math.max(mt.lat,tt.lat)):(this._sw=new xi(ct.lng,ct.lat),this._ne=new xi(mt.lng,mt.lat)),this},Wi.prototype.getCenter=function(){return new xi((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Wi.prototype.getSouthWest=function(){return this._sw},Wi.prototype.getNorthEast=function(){return this._ne},Wi.prototype.getNorthWest=function(){return new xi(this.getWest(),this.getNorth())},Wi.prototype.getSouthEast=function(){return new xi(this.getEast(),this.getSouth())},Wi.prototype.getWest=function(){return this._sw.lng},Wi.prototype.getSouth=function(){return this._sw.lat},Wi.prototype.getEast=function(){return this._ne.lng},Wi.prototype.getNorth=function(){return this._ne.lat},Wi.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Wi.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Wi.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Wi.prototype.contains=function(I){var V=xi.convert(I),tt=V.lng,ct=V.lat,Tt=this._sw.lng<=tt&&tt<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Tt=this._sw.lng>=tt&&tt>=this._ne.lng),this._sw.lat<=ct&&ct<=this._ne.lat&&Tt},Wi.convert=function(I){return!I||I instanceof Wi?I:new Wi(I)};var Sv=6371008.8,xi=function(I,V){if(isNaN(I)||isNaN(V))throw new Error("Invalid LngLat object: ("+I+", "+V+")");if(this.lng=+I,this.lat=+V,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};xi.prototype.wrap=function(){return new xi(m(this.lng,-180,180),this.lat)},xi.prototype.toArray=function(){return[this.lng,this.lat]},xi.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},xi.prototype.distanceTo=function(I){var V=Math.PI/180,tt=this.lat*V,ct=I.lat*V,mt=Math.sin(tt)*Math.sin(ct)+Math.cos(tt)*Math.cos(ct)*Math.cos((I.lng-this.lng)*V);return Sv*Math.acos(Math.min(mt,1))},xi.prototype.toBounds=function(I){void 0===I&&(I=0);var tt=360*I/40075017,ct=tt/Math.cos(Math.PI/180*this.lat);return new Wi(new xi(this.lng-ct,this.lat-tt),new xi(this.lng+ct,this.lat+tt))},xi.convert=function(I){if(I instanceof xi)return I;if(Array.isArray(I)&&(2===I.length||3===I.length))return new xi(Number(I[0]),Number(I[1]));if(!Array.isArray(I)&&"object"==typeof I&&null!==I)return new xi(Number("lng"in I?I.lng:I.lon),Number(I.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Ev=2*Math.PI*Sv;function Cv(R){return Ev*Math.cos(R*Math.PI/180)}function Lv(R){return(180+R)/360}function Pv(R){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+R*Math.PI/360)))/360}function Dv(R,I){return R/Cv(I)}function wh(R){return 360/Math.PI*Math.atan(Math.exp((180-360*R)*Math.PI/180))-90}var Ef=function(I,V,tt){void 0===tt&&(tt=0),this.x=+I,this.y=+V,this.z=+tt};Ef.fromLngLat=function(I,V){void 0===V&&(V=0);var tt=xi.convert(I);return new Ef(Lv(tt.lng),Pv(tt.lat),Dv(V,tt.lat))},Ef.prototype.toLngLat=function(){return new xi(function b0(R){return 360*R-180}(this.x),wh(this.y))},Ef.prototype.toAltitude=function(){return function w0(R,I){return R*Cv(wh(I))}(this.z,this.y)},Ef.prototype.meterInMercatorCoordinateUnits=function(){return 1/Ev*function T0(R){return 1/Math.cos(R*Math.PI/180)}(wh(this.y))};var Cf=function(I,V,tt){this.z=I,this.x=V,this.y=tt,this.key=xc(0,I,I,V,tt)};Cf.prototype.equals=function(I){return this.z===I.z&&this.x===I.x&&this.y===I.y},Cf.prototype.url=function(I,V){var tt=function x0(R,I,V){var tt=Mv(256*R,256*(I=Math.pow(2,V)-I-1),V),ct=Mv(256*(R+1),256*(I+1),V);return tt[0]+","+tt[1]+","+ct[0]+","+ct[1]}(this.x,this.y,this.z),ct=function A0(R,I,V){for(var ct,tt="",mt=R;mt>0;mt--)tt+=(I&(ct=1<<mt-1)?1:0)+(V&ct?2:0);return tt}(this.z,this.x,this.y);return I[(this.x+this.y)%I.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===V?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ct).replace("{bbox-epsg-3857}",tt)},Cf.prototype.getTilePoint=function(I){var V=Math.pow(2,this.z);return new e((I.x*V-this.x)*Ta,(I.y*V-this.y)*Ta)},Cf.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Rv=function(I,V){this.wrap=I,this.canonical=V,this.key=xc(I,V.z,V.z,V.x,V.y)},Yi=function(I,V,tt,ct,mt){this.overscaledZ=I,this.wrap=V,this.canonical=new Cf(tt,+ct,+mt),this.key=xc(V,I,tt,ct,mt)};function xc(R,I,V,tt,ct){(R*=2)<0&&(R=-1*R-1);var mt=1<<V;return(mt*mt*R+mt*ct+tt).toString(36)+V.toString(36)+I.toString(36)}Yi.prototype.equals=function(I){return this.overscaledZ===I.overscaledZ&&this.wrap===I.wrap&&this.canonical.equals(I.canonical)},Yi.prototype.scaledTo=function(I){var V=this.canonical.z-I;return I>this.canonical.z?new Yi(I,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Yi(I,this.wrap,I,this.canonical.x>>V,this.canonical.y>>V)},Yi.prototype.calculateScaledKey=function(I,V){var tt=this.canonical.z-I;return I>this.canonical.z?xc(this.wrap*+V,I,this.canonical.z,this.canonical.x,this.canonical.y):xc(this.wrap*+V,I,I,this.canonical.x>>tt,this.canonical.y>>tt)},Yi.prototype.isChildOf=function(I){if(I.wrap!==this.wrap)return!1;var V=this.canonical.z-I.canonical.z;return 0===I.overscaledZ||I.overscaledZ<this.overscaledZ&&I.canonical.x===this.canonical.x>>V&&I.canonical.y===this.canonical.y>>V},Yi.prototype.children=function(I){if(this.overscaledZ>=I)return[new Yi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var V=this.canonical.z+1,tt=2*this.canonical.x,ct=2*this.canonical.y;return[new Yi(V,this.wrap,V,tt,ct),new Yi(V,this.wrap,V,tt+1,ct),new Yi(V,this.wrap,V,tt,ct+1),new Yi(V,this.wrap,V,tt+1,ct+1)]},Yi.prototype.isLessThan=function(I){return this.wrap<I.wrap||!(this.wrap>I.wrap)&&(this.overscaledZ<I.overscaledZ||!(this.overscaledZ>I.overscaledZ)&&(this.canonical.x<I.canonical.x||!(this.canonical.x>I.canonical.x)&&this.canonical.y<I.canonical.y))},Yi.prototype.wrapped=function(){return new Yi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Yi.prototype.unwrapTo=function(I){return new Yi(this.overscaledZ,I,this.canonical.z,this.canonical.x,this.canonical.y)},Yi.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Yi.prototype.toUnwrapped=function(){return new Rv(this.wrap,this.canonical)},Yi.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Yi.prototype.getTilePoint=function(I){return this.canonical.getTilePoint(new Ef(I.x-this.wrap,I.y))},ra("CanonicalTileID",Cf),ra("OverscaledTileID",Yi,{omit:["posMatrix"]});var Tu=function(I,V,tt){if(this.uid=I,V.height!==V.width)throw new RangeError("DEM tiles must be square");if(tt&&"mapbox"!==tt&&"terrarium"!==tt)return N('"'+tt+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=V.height;var ct=this.dim=V.height-2;this.data=new Uint32Array(V.data.buffer),this.encoding=tt||"mapbox";for(var mt=0;mt<ct;mt++)this.data[this._idx(-1,mt)]=this.data[this._idx(0,mt)],this.data[this._idx(ct,mt)]=this.data[this._idx(ct-1,mt)],this.data[this._idx(mt,-1)]=this.data[this._idx(mt,0)],this.data[this._idx(mt,ct)]=this.data[this._idx(mt,ct-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ct,-1)]=this.data[this._idx(ct-1,0)],this.data[this._idx(-1,ct)]=this.data[this._idx(0,ct-1)],this.data[this._idx(ct,ct)]=this.data[this._idx(ct-1,ct-1)]};Tu.prototype.get=function(I,V){var tt=new Uint8Array(this.data.buffer),ct=4*this._idx(I,V);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(tt[ct],tt[ct+1],tt[ct+2])},Tu.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},Tu.prototype._idx=function(I,V){if(I<-1||I>=this.dim+1||V<-1||V>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(V+1)*this.stride+(I+1)},Tu.prototype._unpackMapbox=function(I,V,tt){return(256*I*256+256*V+tt)/10-1e4},Tu.prototype._unpackTerrarium=function(I,V,tt){return 256*I+V+tt/256-32768},Tu.prototype.getPixels=function(){return new Go({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Tu.prototype.backfillBorder=function(I,V,tt){if(this.dim!==I.dim)throw new Error("dem dimension mismatch");var ct=V*this.dim,mt=V*this.dim+this.dim,Tt=tt*this.dim,jt=tt*this.dim+this.dim;switch(V){case-1:ct=mt-1;break;case 1:mt=ct+1}switch(tt){case-1:Tt=jt-1;break;case 1:jt=Tt+1}for(var le=-V*this.dim,ye=-tt*this.dim,we=Tt;we<jt;we++)for(var Ue=ct;Ue<mt;Ue++)this.data[this._idx(Ue,we)]=I.data[this._idx(Ue+le,we+ye)]},ra("DEMData",Tu);var Yc=function(I){this._stringToNumber={},this._numberToString=[];for(var V=0;V<I.length;V++){var tt=I[V];this._stringToNumber[tt]=V,this._numberToString[V]=tt}};Yc.prototype.encode=function(I){return this._stringToNumber[I]},Yc.prototype.decode=function(I){return this._numberToString[I]};var Zc=function(I,V,tt,ct,mt){this.type="Feature",this._vectorTileFeature=I,I._z=V,I._x=tt,I._y=ct,this.properties=I.properties,this.id=mt},Th={geometry:{configurable:!0}};Th.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Th.geometry.set=function(R){this._geometry=R},Zc.prototype.toJSON=function(){var I={geometry:this.geometry};for(var V in this)"_geometry"===V||"_vectorTileFeature"===V||(I[V]=this[V]);return I},Object.defineProperties(Zc.prototype,Th);var Qf=function(){this.state={},this.stateChanges={},this.deletedStates={}};Qf.prototype.updateState=function(I,V,tt){var ct=String(V);if(this.stateChanges[I]=this.stateChanges[I]||{},this.stateChanges[I][ct]=this.stateChanges[I][ct]||{},o(this.stateChanges[I][ct],tt),null===this.deletedStates[I])for(var mt in this.deletedStates[I]={},this.state[I])mt!==ct&&(this.deletedStates[I][mt]=null);else if(this.deletedStates[I]&&null===this.deletedStates[I][ct])for(var jt in this.deletedStates[I][ct]={},this.state[I][ct])tt[jt]||(this.deletedStates[I][ct][jt]=null);else for(var le in tt)this.deletedStates[I]&&this.deletedStates[I][ct]&&null===this.deletedStates[I][ct][le]&&delete this.deletedStates[I][ct][le]},Qf.prototype.removeFeatureState=function(I,V,tt){if(null!==this.deletedStates[I]){var mt=String(V);if(this.deletedStates[I]=this.deletedStates[I]||{},tt&&void 0!==V)null!==this.deletedStates[I][mt]&&(this.deletedStates[I][mt]=this.deletedStates[I][mt]||{},this.deletedStates[I][mt][tt]=null);else if(void 0!==V)if(this.stateChanges[I]&&this.stateChanges[I][mt])for(tt in this.deletedStates[I][mt]={},this.stateChanges[I][mt])this.deletedStates[I][mt][tt]=null;else this.deletedStates[I][mt]=null;else this.deletedStates[I]=null}},Qf.prototype.getState=function(I,V){var tt=String(V),Tt=o({},(this.state[I]||{})[tt],(this.stateChanges[I]||{})[tt]);if(null===this.deletedStates[I])return{};if(this.deletedStates[I]){var jt=this.deletedStates[I][V];if(null===jt)return{};for(var le in jt)delete Tt[le]}return Tt},Qf.prototype.initializeTileState=function(I,V){I.setFeatureState(this.state,V)},Qf.prototype.coalesceChanges=function(I,V){var tt={};for(var ct in this.stateChanges){this.state[ct]=this.state[ct]||{};var mt={};for(var Tt in this.stateChanges[ct])this.state[ct][Tt]||(this.state[ct][Tt]={}),o(this.state[ct][Tt],this.stateChanges[ct][Tt]),mt[Tt]=this.state[ct][Tt];tt[ct]=mt}for(var jt in this.deletedStates){this.state[jt]=this.state[jt]||{};var le={};if(null===this.deletedStates[jt])for(var ye in this.state[jt])le[ye]={},this.state[jt][ye]={};else for(var we in this.deletedStates[jt]){if(null===this.deletedStates[jt][we])this.state[jt][we]={};else for(var er=0,$e=Object.keys(this.deletedStates[jt][we]);er<$e.length;er+=1)delete this.state[jt][we][$e[er]];le[we]=this.state[jt][we]}tt[jt]=tt[jt]||{},o(tt[jt],le)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(tt).length)for(var zr in I)I[zr].setFeatureState(tt,V)};var Au=function(I,V){this.tileID=I,this.x=I.canonical.x,this.y=I.canonical.y,this.z=I.canonical.z,this.grid=new xa(Ta,16,0),this.grid3D=new xa(Ta,16,0),this.featureIndexArray=new ac,this.promoteId=V};function Iv(R,I,V,tt,ct){return n(R,function(mt,Tt){var jt=I instanceof Ea?I.get(Tt):null;return jt&&jt.evaluate?jt.evaluate(V,tt,ct):jt})}function Fv(R){for(var I=1/0,V=1/0,tt=-1/0,ct=-1/0,mt=0,Tt=R;mt<Tt.length;mt+=1){var jt=Tt[mt];I=Math.min(I,jt.x),V=Math.min(V,jt.y),tt=Math.max(tt,jt.x),ct=Math.max(ct,jt.y)}return{minX:I,minY:V,maxX:tt,maxY:ct}}function S0(R,I){return I-R}Au.prototype.insert=function(I,V,tt,ct,mt,Tt){var jt=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(tt,ct,mt);for(var le=Tt?this.grid3D:this.grid,ye=0;ye<V.length;ye++){for(var we=V[ye],Ue=[1/0,1/0,-1/0,-1/0],er=0;er<we.length;er++){var $e=we[er];Ue[0]=Math.min(Ue[0],$e.x),Ue[1]=Math.min(Ue[1],$e.y),Ue[2]=Math.max(Ue[2],$e.x),Ue[3]=Math.max(Ue[3],$e.y)}Ue[0]<Ta&&Ue[1]<Ta&&Ue[2]>=0&&Ue[3]>=0&&le.insert(jt,Ue[0],Ue[1],Ue[2],Ue[3])}},Au.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Nf.VectorTile(new kc(this.rawTileData)).layers,this.sourceLayerCoder=new Yc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Au.prototype.query=function(I,V,tt,ct){var mt=this;this.loadVTLayers();for(var Tt=I.params||{},jt=Ta/I.tileSize/I.scale,le=yl(Tt.filter),ye=I.queryGeometry,we=I.queryPadding*jt,Ue=Fv(ye),er=this.grid.query(Ue.minX-we,Ue.minY-we,Ue.maxX+we,Ue.maxY+we),$e=Fv(I.cameraQueryGeometry),zr=0,ln=this.grid3D.query($e.minX-we,$e.minY-we,$e.maxX+we,$e.maxY+we,function(On,jn,Yn,wa){return function Jl(R,I,V,tt,ct){for(var mt=0,Tt=R;mt<Tt.length;mt+=1){var jt=Tt[mt];if(I<=jt.x&&V<=jt.y&&tt>=jt.x&&ct>=jt.y)return!0}var le=[new e(I,V),new e(I,ct),new e(tt,ct),new e(tt,V)];if(R.length>2)for(var ye=0,we=le;ye<we.length;ye+=1)if(Co(R,we[ye]))return!0;for(var er=0;er<R.length-1;er++)if(fo(R[er],R[er+1],le))return!0;return!1}(I.cameraQueryGeometry,On-we,jn-we,Yn+we,wa+we)});zr<ln.length;zr+=1)er.push(ln[zr]);er.sort(S0);for(var mn,Sn={},An=function(On){var jn=er[On];if(jn!==mn){mn=jn;var Yn=mt.featureIndexArray.get(jn),wa=null;mt.loadMatchingFeature(Sn,Yn.bucketIndex,Yn.sourceLayerIndex,Yn.featureIndex,le,Tt.layers,Tt.availableImages,V,tt,ct,function(la,va,Ia){return wa||(wa=oi(la)),va.queryIntersectsFeature(ye,la,Ia,wa,mt.z,I.transform,jt,I.pixelPosMatrix)})}},Pn=0;Pn<er.length;Pn++)An(Pn);return Sn},Au.prototype.loadMatchingFeature=function(I,V,tt,ct,mt,Tt,jt,le,ye,we,Ue){var er=this.bucketLayerIDs[V];if(!Tt||function F(R,I){for(var V=0;V<R.length;V++)if(I.indexOf(R[V])>=0)return!0;return!1}(Tt,er)){var $e=this.sourceLayerCoder.decode(tt),zr=this.vtLayers[$e].feature(ct);if(mt.filter(new da(this.tileID.overscaledZ),zr))for(var ln=this.getId(zr,$e),qr=0;qr<er.length;qr++){var Sn=er[qr];if(!(Tt&&Tt.indexOf(Sn)<0)){var mn=le[Sn];if(mn){var An={};void 0!==ln&&we&&(An=we.getState(mn.sourceLayer||"_geojsonTileLayer",ln));var Pn=ye[Sn];Pn.paint=Iv(Pn.paint,mn.paint,zr,An,jt),Pn.layout=Iv(Pn.layout,mn.layout,zr,An,jt);var On=!Ue||Ue(zr,mn,An);if(On){var jn=new Zc(zr,this.z,this.x,this.y,ln);jn.layer=Pn;var Yn=I[Sn];void 0===Yn&&(Yn=I[Sn]=[]),Yn.push({featureIndex:ct,feature:jn,intersectionZ:On})}}}}}},Au.prototype.lookupSymbolFeatures=function(I,V,tt,ct,mt,Tt,jt,le){var ye={};this.loadVTLayers();for(var we=yl(mt),Ue=0,er=I;Ue<er.length;Ue+=1)this.loadMatchingFeature(ye,tt,ct,er[Ue],we,Tt,jt,le,V);return ye},Au.prototype.hasLayer=function(I){for(var V=0,tt=this.bucketLayerIDs;V<tt.length;V+=1)for(var mt=0,Tt=tt[V];mt<Tt.length;mt+=1)if(I===Tt[mt])return!0;return!1},Au.prototype.getId=function(I,V){var tt=I.id;return this.promoteId&&"boolean"==typeof(tt=I.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[V]])&&(tt=Number(tt)),tt},ra("FeatureIndex",Au,{omit:["rawTileData","sourceLayerCoder"]});var Qi=function(I,V){this.tileID=I,this.uid=b(),this.uses=0,this.tileSize=V,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Qi.prototype.registerFadeDuration=function(I){var V=I+this.timeAdded;V<at.now()||this.fadeEndTime&&V<this.fadeEndTime||(this.fadeEndTime=V)},Qi.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Qi.prototype.loadVectorData=function(I,V,tt){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",I){for(var ct in I.featureIndex&&(this.latestFeatureIndex=I.featureIndex,I.rawTileData?(this.latestRawTileData=I.rawTileData,this.latestFeatureIndex.rawTileData=I.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=I.collisionBoxArray,this.buckets=function M0(R,I){var V={};if(!I)return V;for(var tt=function(){var Tt=mt[ct],jt=Tt.layerIds.map(function(Ue){return I.getLayer(Ue)}).filter(Boolean);if(0!==jt.length){Tt.layers=jt,Tt.stateDependentLayerIds&&(Tt.stateDependentLayers=Tt.stateDependentLayerIds.map(function(Ue){return jt.filter(function(er){return er.id===Ue})[0]}));for(var le=0,ye=jt;le<ye.length;le+=1)V[ye[le].id]=Tt}},ct=0,mt=R;ct<mt.length;ct+=1)tt();return V}(I.buckets,V.style),this.hasSymbolBuckets=!1,this.buckets){var mt=this.buckets[ct];if(mt instanceof li){if(this.hasSymbolBuckets=!0,!tt)break;mt.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Tt in this.buckets){var jt=this.buckets[Tt];if(jt instanceof li&&jt.hasRTLText){this.hasRTLText=!0,!aa.isLoading()&&!aa.isLoaded()&&"deferred"===kn()&&na();break}}for(var le in this.queryPadding=0,this.buckets){var ye=this.buckets[le];this.queryPadding=Math.max(this.queryPadding,V.style.getLayer(le).queryRadius(ye))}I.imageAtlas&&(this.imageAtlas=I.imageAtlas),I.glyphAtlasImage&&(this.glyphAtlasImage=I.glyphAtlasImage)}else this.collisionBoxArray=new Kl},Qi.prototype.unloadVectorData=function(){for(var I in this.buckets)this.buckets[I].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Qi.prototype.getBucket=function(I){return this.buckets[I.id]},Qi.prototype.upload=function(I){for(var V in this.buckets){var tt=this.buckets[V];tt.uploadPending()&&tt.upload(I)}var ct=I.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Sf(I,this.imageAtlas.image,ct.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Sf(I,this.glyphAtlasImage,ct.ALPHA),this.glyphAtlasImage=null)},Qi.prototype.prepare=function(I){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(I,this.imageAtlasTexture)},Qi.prototype.queryRenderedFeatures=function(I,V,tt,ct,mt,Tt,jt,le,ye,we){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ct,cameraQueryGeometry:mt,scale:Tt,tileSize:this.tileSize,pixelPosMatrix:we,transform:le,params:jt,queryPadding:this.queryPadding*ye},I,V,tt):{}},Qi.prototype.querySourceFeatures=function(I,V){var tt=this.latestFeatureIndex;if(tt&&tt.rawTileData){var ct=tt.loadVTLayers(),mt=V?V.sourceLayer:"",Tt=ct._geojsonTileLayer||ct[mt];if(Tt)for(var jt=yl(V&&V.filter),le=this.tileID.canonical,ye=le.z,we=le.x,Ue=le.y,er={z:ye,x:we,y:Ue},$e=0;$e<Tt.length;$e++){var br=Tt.feature($e);if(jt.filter(new da(this.tileID.overscaledZ),br)){var zr=tt.getId(br,mt),ln=new Zc(br,ye,we,Ue,zr);ln.tile=er,I.push(ln)}}}},Qi.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Qi.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Qi.prototype.setExpiryData=function(I){var V=this.expirationTime;if(I.cacheControl){var tt=U(I.cacheControl);tt["max-age"]&&(this.expirationTime=Date.now()+1e3*tt["max-age"])}else I.expires&&(this.expirationTime=new Date(I.expires).getTime());if(this.expirationTime){var ct=Date.now(),mt=!1;if(this.expirationTime>ct)mt=!1;else if(V)if(this.expirationTime<V)mt=!0;else{var Tt=this.expirationTime-V;Tt?this.expirationTime=ct+Math.max(Tt,3e4):mt=!0}else mt=!0;mt?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Qi.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Qi.prototype.setFeatureState=function(I,V){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(I).length){var tt=this.latestFeatureIndex.loadVTLayers();for(var ct in this.buckets)if(V.style.hasLayer(ct)){var mt=this.buckets[ct],Tt=mt.layers[0].sourceLayer||"_geojsonTileLayer",jt=tt[Tt],le=I[Tt];if(jt&&le&&0!==Object.keys(le).length){mt.update(le,jt,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ye=V&&V.style&&V.style.getLayer(ct);ye&&(this.queryPadding=Math.max(this.queryPadding,ye.queryRadius(mt)))}}}},Qi.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Qi.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<at.now()},Qi.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Qi.prototype.setHoldDuration=function(I){this.symbolFadeHoldUntil=at.now()+I},Qi.prototype.setDependencies=function(I,V){for(var tt={},ct=0,mt=V;ct<mt.length;ct+=1)tt[mt[ct]]=!0;this.dependencies[I]=tt},Qi.prototype.hasDependency=function(I,V){for(var tt=0,ct=I;tt<ct.length;tt+=1){var Tt=this.dependencies[ct[tt]];if(Tt)for(var jt=0,le=V;jt<le.length;jt+=1)if(Tt[le[jt]])return!0}return!1};var tf=self.performance,kv=function(I){this._marks={start:[I.url,"start"].join("#"),end:[I.url,"end"].join("#"),measure:I.url.toString()},tf.mark(this._marks.start)};kv.prototype.finish=function(){tf.mark(this._marks.end);var I=tf.getEntriesByName(this._marks.measure);return 0===I.length&&(tf.measure(this._marks.measure,this._marks.start,this._marks.end),I=tf.getEntriesByName(this._marks.measure),tf.clearMarks(this._marks.start),tf.clearMarks(this._marks.end),tf.clearMeasures(this._marks.measure)),I},i.Actor=Jf,i.AlphaImage=Mf,i.CanonicalTileID=Cf,i.CollisionBoxArray=Kl,i.Color=Ga,i.DEMData=Tu,i.DataConstantProperty=Xn,i.DictionaryCoder=Yc,i.EXTENT=Ta,i.ErrorEvent=qe,i.EvaluationParameters=da,i.Event=We,i.Evented=or,i.FeatureIndex=Au,i.FillBucket=Al,i.FillExtrusionBucket=Ml,i.ImageAtlas=pc,i.ImagePosition=Oc,i.LineBucket=Wo,i.LngLat=xi,i.LngLatBounds=Wi,i.MercatorCoordinate=Ef,i.ONE_EM=24,i.OverscaledTileID=Yi,i.Point=e,i.Point$1=e,i.Properties=ri,i.Protobuf=kc,i.RGBAImage=Go,i.RequestManager=Mt,i.RequestPerformance=kv,i.ResourceType=ue,i.SegmentVector=Y,i.SourceFeatureState=Qf,i.StructArrayLayout1ui2=Ku,i.StructArrayLayout2f1f2i16=bl,i.StructArrayLayout2i4=io,i.StructArrayLayout3ui6=wl,i.StructArrayLayout4i8=Eo,i.SymbolBucket=li,i.Texture=Sf,i.Tile=Qi,i.Transitionable=Ua,i.Uniform1f=Ur,i.Uniform1i=Yr,i.Uniform2f=Kr,i.Uniform3f=cn,i.Uniform4f=Cn,i.UniformColor=Rn,i.UniformMatrix4f=Hn,i.UnwrappedTileID=Rv,i.ValidationError=Tr,i.WritingMode=gs,i.ZoomHistory=ot,i.add=function zf(R,I,V){return R[0]=I[0]+V[0],R[1]=I[1]+V[1],R[2]=I[2]+V[2],R},i.addDynamicAttributes=mh,i.asyncAll=function h(R,I,V){if(!R.length)return V(null,[]);var tt=R.length,ct=new Array(R.length),mt=null;R.forEach(function(Tt,jt){I(Tt,function(le,ye){le&&(mt=le),ct[jt]=ye,0==--tt&&V(mt,ct)})})},i.bezier=s,i.bindAll=S,i.browser=at,i.cacheEntryPossiblyAdded=function Be(R){++se>Dt&&(R.getActor().send("enforceCacheSizeLimit",St),se=0)},i.clamp=f,i.clearTileCache=function xe(R){var I=self.caches.delete(Et);R&&I.catch(R).then(function(){return R()})},i.clipLine=dv,i.clone=function Cc(R){var I=new oo(16);return I[0]=R[0],I[1]=R[1],I[2]=R[2],I[3]=R[3],I[4]=R[4],I[5]=R[5],I[6]=R[6],I[7]=R[7],I[8]=R[8],I[9]=R[9],I[10]=R[10],I[11]=R[11],I[12]=R[12],I[13]=R[13],I[14]=R[14],I[15]=R[15],I},i.clone$1=d,i.clone$2=function $c(R){var I=new oo(3);return I[0]=R[0],I[1]=R[1],I[2]=R[2],I},i.collisionCircleLayout=sp,i.config=$,i.create=function If(){var R=new oo(16);return oo!=Float32Array&&(R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[11]=0,R[12]=0,R[13]=0,R[14]=0),R[0]=1,R[5]=1,R[10]=1,R[15]=1,R},i.create$1=function Tf(){var R=new oo(9);return oo!=Float32Array&&(R[1]=0,R[2]=0,R[3]=0,R[5]=0,R[6]=0,R[7]=0),R[0]=1,R[4]=1,R[8]=1,R},i.create$2=function wf(){var R=new oo(4);return oo!=Float32Array&&(R[1]=0,R[2]=0),R[0]=1,R[3]=1,R},i.createCommonjsModule=P,i.createExpression=hl,i.createLayout=Wa,i.createStyleLayer=function m0(R){return"custom"===R.type?new g0(R):new y0[R.type](R)},i.cross=function Bv(R,I,V){var tt=I[0],ct=I[1],mt=I[2],Tt=V[0],jt=V[1],le=V[2];return R[0]=ct*le-mt*jt,R[1]=mt*Tt-tt*le,R[2]=tt*jt-ct*Tt,R},i.deepEqual=function l(R,I){if(Array.isArray(R)){if(!Array.isArray(I)||R.length!==I.length)return!1;for(var V=0;V<R.length;V++)if(!l(R[V],I[V]))return!1;return!0}if("object"==typeof R&&null!==R&&null!==I){if("object"!=typeof I)return!1;if(Object.keys(R).length!==Object.keys(I).length)return!1;for(var ct in R)if(!l(R[ct],I[ct]))return!1;return!0}return R===I},i.dot=function Ov(R,I){return R[0]*I[0]+R[1]*I[1]+R[2]*I[2]},i.dot$1=function Gv(R,I){return R[0]*I[0]+R[1]*I[1]+R[2]*I[2]+R[3]*I[3]},i.ease=c,i.emitValidationErrors=qn,i.endsWith=T,i.enforceCacheSizeLimit=function Ke(R){Rt(),Nt&&Nt.then(function(I){I.keys().then(function(V){for(var tt=0;tt<V.length-R;tt++)I.delete(V[tt])})})},i.evaluateSizeForFeature=sv,i.evaluateSizeForZoom=lv,i.evaluateVariableOffset=yv,i.evented=Xr,i.extend=o,i.featureFilter=yl,i.filterObject=E,i.fromRotation=function Rf(R,I){var V=Math.sin(I),tt=Math.cos(I);return R[0]=tt,R[1]=V,R[2]=0,R[3]=-V,R[4]=tt,R[5]=0,R[6]=0,R[7]=0,R[8]=1,R},i.getAnchorAlignment=dh,i.getAnchorJustification=yh,i.getArrayBuffer=be,i.getImage=Ut,i.getJSON=function(R,I){return re(o(R,{type:"json"}),I)},i.getRTLTextPluginStatus=kn,i.getReferrer=Ye,i.getVideo=function(R,I){var V=self.document.createElement("video");V.muted=!0,V.onloadstart=function(){I(null,V)};for(var tt=0;tt<R.length;tt++){var ct=self.document.createElement("source");Te(R[tt])||(V.crossOrigin="Anonymous"),ct.src=R[tt],V.appendChild(ct)}return{cancel:function(){}}},i.identity=Ff,i.invert=function Qu(R,I){var V=I[0],tt=I[1],ct=I[2],mt=I[3],Tt=I[4],jt=I[5],le=I[6],ye=I[7],we=I[8],Ue=I[9],er=I[10],$e=I[11],br=I[12],zr=I[13],ln=I[14],qr=I[15],Sn=V*jt-tt*Tt,mn=V*le-ct*Tt,An=V*ye-mt*Tt,Pn=tt*le-ct*jt,On=tt*ye-mt*jt,jn=ct*ye-mt*le,Yn=we*zr-Ue*br,wa=we*ln-er*br,la=we*qr-$e*br,va=Ue*ln-er*zr,Ia=Ue*qr-$e*zr,ya=er*qr-$e*ln,ba=Sn*ya-mn*Ia+An*va+Pn*la-On*wa+jn*Yn;return ba?(R[0]=(jt*ya-le*Ia+ye*va)*(ba=1/ba),R[1]=(ct*Ia-tt*ya-mt*va)*ba,R[2]=(zr*jn-ln*On+qr*Pn)*ba,R[3]=(er*On-Ue*jn-$e*Pn)*ba,R[4]=(le*la-Tt*ya-ye*wa)*ba,R[5]=(V*ya-ct*la+mt*wa)*ba,R[6]=(ln*An-br*jn-qr*mn)*ba,R[7]=(we*jn-er*An+$e*mn)*ba,R[8]=(Tt*Ia-jt*la+ye*Yn)*ba,R[9]=(tt*la-V*Ia-mt*Yn)*ba,R[10]=(br*On-zr*An+qr*Sn)*ba,R[11]=(Ue*An-we*On-$e*Sn)*ba,R[12]=(jt*wa-Tt*va-le*Yn)*ba,R[13]=(V*va-tt*wa+ct*Yn)*ba,R[14]=(zr*mn-br*Pn-ln*Sn)*ba,R[15]=(we*Pn-Ue*mn+er*Sn)*ba,R):null},i.isChar=yt,i.isMapboxURL=xt,i.keysDifference=function p(R,I){var V=[];for(var tt in R)tt in I||V.push(tt);return V},i.makeRequest=re,i.mapObject=n,i.mercatorXfromLng=Lv,i.mercatorYfromLat=Pv,i.mercatorZfromAltitude=Dv,i.mul=Qc,i.multiply=$u,i.mvt=Nf,i.normalize=function oc(R,I){var V=I[0],tt=I[1],ct=I[2],mt=V*V+tt*tt+ct*ct;return mt>0&&(mt=1/Math.sqrt(mt)),R[0]=I[0]*mt,R[1]=I[1]*mt,R[2]=I[2]*mt,R},i.number=Pi,i.offscreenCanvasSupported=gr,i.ortho=function Jc(R,I,V,tt,ct,mt,Tt){var jt=1/(I-V),le=1/(tt-ct),ye=1/(mt-Tt);return R[0]=-2*jt,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=-2*le,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=2*ye,R[11]=0,R[12]=(I+V)*jt,R[13]=(ct+tt)*le,R[14]=(Tt+mt)*ye,R[15]=1,R},i.parseGlyphPBF=function kp(R){return new kc(R).readFields(Rp,[])},i.pbf=kc,i.performSymbolLayout=function _p(R,I,V,tt,ct,mt,Tt){R.createArrays(),R.tilePixelRatio=Ta/(512*R.overscaling),R.compareText={},R.iconsNeedLinear=!1;var le=R.layers[0].layout,ye=R.layers[0]._unevaluatedLayout._values,we={};if("composite"===R.textSizeData.kind){var Ue=R.textSizeData,$e=Ue.maxZoom;we.compositeTextSizes=[ye["text-size"].possiblyEvaluate(new da(Ue.minZoom),Tt),ye["text-size"].possiblyEvaluate(new da($e),Tt)]}if("composite"===R.iconSizeData.kind){var br=R.iconSizeData,ln=br.maxZoom;we.compositeIconSizes=[ye["icon-size"].possiblyEvaluate(new da(br.minZoom),Tt),ye["icon-size"].possiblyEvaluate(new da(ln),Tt)]}we.layoutTextSize=ye["text-size"].possiblyEvaluate(new da(R.zoom+1),Tt),we.layoutIconSize=ye["icon-size"].possiblyEvaluate(new da(R.zoom+1),Tt),we.textMaxSize=ye["text-size"].possiblyEvaluate(new da(18));for(var qr=24*le.get("text-line-height"),Sn="map"===le.get("text-rotation-alignment")&&"point"!==le.get("symbol-placement"),mn=le.get("text-keep-upright"),An=le.get("text-size"),Pn=function(){var Yn=jn[On],wa=le.get("text-font").evaluate(Yn,{},Tt).join(","),la=An.evaluate(Yn,{},Tt),va=we.layoutTextSize.evaluate(Yn,{},Tt),Ia=we.layoutIconSize.evaluate(Yn,{},Tt),ya={horizontal:{},vertical:void 0},ba=Yn.text,Na=[0,0];if(ba){var Da=ba.toString(),Ka=24*le.get("text-letter-spacing").evaluate(Yn,{},Tt),ui=function Jt(R){for(var I=0,V=R;I<V.length;I+=1)if(!$t(V[I].charCodeAt(0)))return!1;return!0}(Da)?Ka:0,Ja=le.get("text-anchor").evaluate(Yn,{},Tt),Qa=le.get("text-variable-anchor");if(!Qa){var Xa=le.get("text-radial-offset").evaluate(Yn,{},Tt);Na=Xa?yv(Ja,[24*Xa,gh]):le.get("text-offset").evaluate(Yn,{},Tt).map(function(Mu){return 24*Mu})}var vi=Sn?"center":le.get("text-justify").evaluate(Yn,{},Tt),gi=le.get("symbol-placement"),Ii="point"===gi?24*le.get("text-max-width").evaluate(Yn,{},Tt):0,Bi=function(){R.allowVerticalPlacement&&zt(Da)&&(ya.vertical=Bc(ba,I,V,ct,wa,Ii,qr,Ja,"left",ui,Na,gs.vertical,!0,gi,va,la))};if(!Sn&&Qa){for(var $i="auto"===vi?Qa.map(function(Mu){return yh(Mu)}):[vi],Zi=!1,yo=0;yo<$i.length;yo++){var mo=$i[yo];if(!ya.horizontal[mo])if(Zi)ya.horizontal[mo]=ya.horizontal[0];else{var _i=Bc(ba,I,V,ct,wa,Ii,qr,"center",mo,ui,Na,gs.horizontal,!1,gi,va,la);_i&&(ya.horizontal[mo]=_i,Zi=1===_i.positionedLines.length)}}Bi()}else{"auto"===vi&&(vi=yh(Ja));var Lo=Bc(ba,I,V,ct,wa,Ii,qr,Ja,vi,ui,Na,gs.horizontal,!1,gi,va,la);Lo&&(ya.horizontal[vi]=Lo),Bi(),zt(Da)&&Sn&&mn&&(ya.vertical=Bc(ba,I,V,ct,wa,Ii,qr,Ja,vi,ui,Na,gs.vertical,!1,gi,va,la))}}var Po=void 0,Ji=!1;if(Yn.icon&&Yn.icon.name){var Do=tt[Yn.icon.name];Do&&(Po=function Gp(R,I,V){var tt=dh(V),le=I[0]-R.displaySize[0]*tt.horizontalAlign,we=I[1]-R.displaySize[1]*tt.verticalAlign;return{image:R,top:we,bottom:we+R.displaySize[1],left:le,right:le+R.displaySize[0]}}(ct[Yn.icon.name],le.get("icon-offset").evaluate(Yn,{},Tt),le.get("icon-anchor").evaluate(Yn,{},Tt)),Ji=Do.sdf,void 0===R.sdfIcons?R.sdfIcons=Do.sdf:R.sdfIcons!==Do.sdf&&N("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Do.pixelRatio!==R.pixelRatio||0!==le.get("icon-rotate").constantOr(1))&&(R.iconsNeedLinear=!0))}var ys=xv(ya.horizontal)||ya.vertical;R.iconsInText=!!ys&&ys.iconsInText,(ys||Po)&&function qp(R,I,V,tt,ct,mt,Tt,jt,le,ye,we){var Ue=mt.textMaxSize.evaluate(I,{});void 0===Ue&&(Ue=Tt);var ya,er=R.layers[0].layout,$e=er.get("icon-offset").evaluate(I,{},we),br=xv(V.horizontal),zr=24,ln=Tt/zr,qr=R.tilePixelRatio*ln,Sn=R.tilePixelRatio*Ue/zr,mn=R.tilePixelRatio*jt,An=R.tilePixelRatio*er.get("symbol-spacing"),Pn=er.get("text-padding")*R.tilePixelRatio,On=er.get("icon-padding")*R.tilePixelRatio,jn=er.get("text-max-angle")/180*Math.PI,Yn="map"===er.get("text-rotation-alignment")&&"point"!==er.get("symbol-placement"),wa="map"===er.get("icon-rotation-alignment")&&"point"!==er.get("symbol-placement"),la=er.get("symbol-placement"),va=An/2,Ia=er.get("icon-text-fit");tt&&"none"!==Ia&&(R.allowVerticalPlacement&&V.vertical&&(ya=ov(tt,V.vertical,Ia,er.get("icon-text-fit-padding"),$e,ln)),br&&(tt=ov(tt,br,Ia,er.get("icon-text-fit-padding"),$e,ln)));var ba=function($f,_s){_s.x<0||_s.x>=Ta||_s.y<0||_s.y>=Ta||function t0(R,I,V,tt,ct,mt,Tt,jt,le,ye,we,Ue,er,$e,br,zr,ln,qr,Sn,mn,An,Pn,On,jn,Yn){var wa,va,Ia,ya,ba,la=R.addToLineVertexArray(I,V),Na=0,Da=0,Ka=0,ui=0,Ja=-1,Qa=-1,Xa={},vi=Yt(""),gi=0,Ii=0;if(void 0===jt._unevaluatedLayout.getValue("text-radial-offset")?(gi=(wa=jt.layout.get("text-offset").evaluate(An,{},jn).map(function(bc){return 24*bc}))[0],Ii=wa[1]):(gi=24*jt.layout.get("text-radial-offset").evaluate(An,{},jn),Ii=gh),R.allowVerticalPlacement&&tt.vertical){var $i=jt.layout.get("text-rotate").evaluate(An,{},jn)+90;ya=new Hc(le,I,ye,we,Ue,tt.vertical,er,$e,br,$i),Tt&&(ba=new Hc(le,I,ye,we,Ue,Tt,ln,qr,br,$i))}if(ct){var yo=jt.layout.get("icon-rotate").evaluate(An,{}),mo="none"!==jt.layout.get("icon-text-fit"),_i=pv(ct,yo,On,mo),Lo=Tt?pv(Tt,yo,On,mo):void 0;Ia=new Hc(le,I,ye,we,Ue,ct,ln,qr,!1,yo),Na=4*_i.length;var Po=R.iconSizeData,Ji=null;"source"===Po.kind?(Ji=[Sl*jt.layout.get("icon-size").evaluate(An,{})])[0]>qu&&N(R.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===Po.kind&&((Ji=[Sl*Pn.compositeIconSizes[0].evaluate(An,{},jn),Sl*Pn.compositeIconSizes[1].evaluate(An,{},jn)])[0]>qu||Ji[1]>qu)&&N(R.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),R.addSymbols(R.icon,_i,Ji,mn,Sn,An,!1,I,la.lineStartIndex,la.lineLength,-1,jn),Ja=R.icon.placedSymbolArray.length-1,Lo&&(Da=4*Lo.length,R.addSymbols(R.icon,Lo,Ji,mn,Sn,An,gs.vertical,I,la.lineStartIndex,la.lineLength,-1,jn),Qa=R.icon.placedSymbolArray.length-1)}for(var Do in tt.horizontal){var ys=tt.horizontal[Do];if(!va){vi=Yt(ys.text);var Mu=jt.layout.get("text-rotate").evaluate(An,{},jn);va=new Hc(le,I,ye,we,Ue,ys,er,$e,br,Mu)}var ef=1===ys.positionedLines.length;if(Ka+=mv(R,I,ys,mt,jt,br,An,zr,la,tt.vertical?gs.horizontal:gs.horizontalOnly,ef?Object.keys(tt.horizontal):[Do],Xa,Ja,Pn,jn),ef)break}tt.vertical&&(ui+=mv(R,I,tt.vertical,mt,jt,br,An,zr,la,gs.vertical,["vertical"],Xa,Qa,Pn,jn));var rf=va?va.boxStartIndex:R.collisionBoxArray.length,nf=va?va.boxEndIndex:R.collisionBoxArray.length,$f=ya?ya.boxStartIndex:R.collisionBoxArray.length,_s=ya?ya.boxEndIndex:R.collisionBoxArray.length,Xc=Ia?Ia.boxStartIndex:R.collisionBoxArray.length,Ah=Ia?Ia.boxEndIndex:R.collisionBoxArray.length,jc=ba?ba.boxStartIndex:R.collisionBoxArray.length,Mh=ba?ba.boxEndIndex:R.collisionBoxArray.length,Is=-1,_f=function(bc,zv){return bc&&bc.circleDiameter?Math.max(bc.circleDiameter,zv):zv};Is=_f(va,Is),Is=_f(ya,Is),Is=_f(Ia,Is);var Kc=(Is=_f(ba,Is))>-1?1:0;Kc&&(Is*=Yn/24),R.glyphOffsetArray.length>=li.MAX_GLYPHS&&N("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==An.sortKey&&R.addToSortKeyRanges(R.symbolInstances.length,An.sortKey),R.symbolInstances.emplaceBack(I.x,I.y,Xa.right>=0?Xa.right:-1,Xa.center>=0?Xa.center:-1,Xa.left>=0?Xa.left:-1,Xa.vertical||-1,Ja,Qa,vi,rf,nf,$f,_s,Xc,Ah,jc,Mh,ye,Ka,ui,Na,Da,Kc,0,er,gi,Ii,Is)}(R,_s,$f,V,tt,ct,ya,R.layers[0],R.collisionBoxArray,I.index,I.sourceLayerIndex,R.index,qr,Pn,Yn,le,mn,On,wa,$e,I,mt,ye,we,Tt)};if("line"===la)for(var Na=0,Da=dv(I.geometry,0,0,Ta,Ta);Na<Da.length;Na+=1)for(var Ka=Da[Na],Ja=0,Qa=Zp(Ka,An,jn,V.vertical||br,tt,zr,Sn,R.overscaling,Ta);Ja<Qa.length;Ja+=1){var Xa=Qa[Ja];(!br||!e0(R,br.text,va,Xa))&&ba(Ka,Xa)}else if("line-center"===la)for(var gi=0,Ii=I.geometry;gi<Ii.length;gi+=1){var Bi=Ii[gi];if(Bi.length>1){var $i=Yp(Bi,jn,V.vertical||br,tt,zr,Sn);$i&&ba(Bi,$i)}}else if("Polygon"===I.type)for(var Zi=0,yo=oh(I.geometry,0);Zi<yo.length;Zi+=1){var mo=yo[Zi],_i=Kp(mo,16);ba(mo[0],new Gf(_i.x,_i.y,0))}else if("LineString"===I.type)for(var Lo=0,Po=I.geometry;Lo<Po.length;Lo+=1){var Ji=Po[Lo];ba(Ji,new Gf(Ji[0].x,Ji[0].y,0))}else if("Point"===I.type)for(var Do=0,ys=I.geometry;Do<ys.length;Do+=1)for(var ef=0,rf=ys[Do];ef<rf.length;ef+=1){var nf=rf[ef];ba([nf],new Gf(nf.x,nf.y,0))}}(R,Yn,ya,Po,tt,we,va,Ia,Na,Ji,Tt)},On=0,jn=R.features;On<jn.length;On+=1)Pn();mt&&R.generateCollisionDebugBuffers()},i.perspective=function ic(R,I,V,tt,ct){var Tt,mt=1/Math.tan(I/2);return R[0]=mt/V,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=mt,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[11]=-1,R[12]=0,R[13]=0,R[15]=0,null!=ct&&ct!==1/0?(R[10]=(ct+tt)*(Tt=1/(tt-ct)),R[14]=2*ct*tt*Tt):(R[10]=-1,R[14]=-2*tt),R},i.pick=function v(R,I){for(var V={},tt=0;tt<I.length;tt++){var ct=I[tt];ct in R&&(V[ct]=R[ct])}return V},i.plugin=aa,i.polygonIntersectsPolygon=za,i.postMapLoadEvent=Kt,i.postTurnstileEvent=de,i.potpack=qh,i.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],i.register=ra,i.registerForPluginStateChange=function(R){return R({pluginStatus:kr,pluginURL:Vr}),Xr.on("pluginStateChange",R),R},i.rotate=function po(R,I,V){var tt=I[0],ct=I[1],mt=I[2],Tt=I[3],jt=Math.sin(V),le=Math.cos(V);return R[0]=tt*le+mt*jt,R[1]=ct*le+Tt*jt,R[2]=tt*-jt+mt*le,R[3]=ct*-jt+Tt*le,R},i.rotateX=function Ho(R,I,V){var tt=Math.sin(V),ct=Math.cos(V),mt=I[4],Tt=I[5],jt=I[6],le=I[7],ye=I[8],we=I[9],Ue=I[10],er=I[11];return I!==R&&(R[0]=I[0],R[1]=I[1],R[2]=I[2],R[3]=I[3],R[12]=I[12],R[13]=I[13],R[14]=I[14],R[15]=I[15]),R[4]=mt*ct+ye*tt,R[5]=Tt*ct+we*tt,R[6]=jt*ct+Ue*tt,R[7]=le*ct+er*tt,R[8]=ye*ct-mt*tt,R[9]=we*ct-Tt*tt,R[10]=Ue*ct-jt*tt,R[11]=er*ct-le*tt,R},i.rotateZ=function kf(R,I,V){var tt=Math.sin(V),ct=Math.cos(V),mt=I[0],Tt=I[1],jt=I[2],le=I[3],ye=I[4],we=I[5],Ue=I[6],er=I[7];return I!==R&&(R[8]=I[8],R[9]=I[9],R[10]=I[10],R[11]=I[11],R[12]=I[12],R[13]=I[13],R[14]=I[14],R[15]=I[15]),R[0]=mt*ct+ye*tt,R[1]=Tt*ct+we*tt,R[2]=jt*ct+Ue*tt,R[3]=le*ct+er*tt,R[4]=ye*ct-mt*tt,R[5]=we*ct-Tt*tt,R[6]=Ue*ct-jt*tt,R[7]=er*ct-le*tt,R},i.scale=function Vo(R,I,V){var tt=V[0],ct=V[1],mt=V[2];return R[0]=I[0]*tt,R[1]=I[1]*tt,R[2]=I[2]*tt,R[3]=I[3]*tt,R[4]=I[4]*ct,R[5]=I[5]*ct,R[6]=I[6]*ct,R[7]=I[7]*ct,R[8]=I[8]*mt,R[9]=I[9]*mt,R[10]=I[10]*mt,R[11]=I[11]*mt,R[12]=I[12],R[13]=I[13],R[14]=I[14],R[15]=I[15],R},i.scale$1=function Hv(R,I,V){return R[0]=I[0]*V,R[1]=I[1]*V,R[2]=I[2]*V,R[3]=I[3]*V,R},i.scale$2=function qc(R,I,V){return R[0]=I[0]*V,R[1]=I[1]*V,R[2]=I[2]*V,R},i.setCacheLimits=function Pe(R,I){St=R,Dt=I},i.setRTLTextPlugin=function(R,I,V){if(void 0===V&&(V=!1),kr===rn_deferred||kr===rn_loading||kr===rn_loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");Vr=at.resolveURL(R),kr=rn_deferred,Rr=I,un(),V||na()},i.sphericalToCartesian=function B(R){var I=R[0],V=R[1],tt=R[2];return V+=90,V*=Math.PI/180,tt*=Math.PI/180,{x:I*Math.cos(V)*Math.sin(tt),y:I*Math.sin(V)*Math.sin(tt),z:I*Math.cos(tt)}},i.sqrLen=Zv,i.styleSpec=Ze,i.sub=Uv,i.symbolSize=Wp,i.transformMat3=function Nv(R,I,V){var tt=I[0],ct=I[1],mt=I[2];return R[0]=tt*V[0]+ct*V[3]+mt*V[6],R[1]=tt*V[1]+ct*V[4]+mt*V[7],R[2]=tt*V[2]+ct*V[5]+mt*V[8],R},i.transformMat4=Lc,i.translate=function Oi(R,I,V){var Tt,jt,le,ye,we,Ue,er,$e,br,zr,ln,qr,tt=V[0],ct=V[1],mt=V[2];return I===R?(R[12]=I[0]*tt+I[4]*ct+I[8]*mt+I[12],R[13]=I[1]*tt+I[5]*ct+I[9]*mt+I[13],R[14]=I[2]*tt+I[6]*ct+I[10]*mt+I[14],R[15]=I[3]*tt+I[7]*ct+I[11]*mt+I[15]):(jt=I[1],le=I[2],ye=I[3],we=I[4],Ue=I[5],er=I[6],$e=I[7],br=I[8],zr=I[9],ln=I[10],qr=I[11],R[0]=Tt=I[0],R[1]=jt,R[2]=le,R[3]=ye,R[4]=we,R[5]=Ue,R[6]=er,R[7]=$e,R[8]=br,R[9]=zr,R[10]=ln,R[11]=qr,R[12]=Tt*tt+we*ct+br*mt+I[12],R[13]=jt*tt+Ue*ct+zr*mt+I[13],R[14]=le*tt+er*ct+ln*mt+I[14],R[15]=ye*tt+$e*ct+qr*mt+I[15]),R},i.triggerPluginCompletionEvent=on,i.uniqueId=b,i.validateCustomStyleLayer=function p0(R){var I=[],V=R.id;return void 0===V&&I.push({message:"layers."+V+': missing required property "id"'}),void 0===R.render&&I.push({message:"layers."+V+': missing required method "render"'}),R.renderingMode&&"2d"!==R.renderingMode&&"3d"!==R.renderingMode&&I.push({message:"layers."+V+': property "renderingMode" must be either "2d" or "3d"'}),I},i.validateLight=$r,i.validateStyle=jr,i.values=function w(R){var I=[];for(var V in R)I.push(R[V]);return I},i.vectorTile=Nf,i.version=C,i.warnOnce=N,i.webpSupported=X,i.window=self,i.wrap=m}),g(0,function(i){function P(ce){var re=typeof ce;if("number"===re||"boolean"===re||"string"===re||null==ce)return JSON.stringify(ce);if(Array.isArray(ce)){for(var ve="[",be=0,Ae=ce;be<Ae.length;be+=1)ve+=P(Ae[be])+",";return ve+"]"}for(var Re=Object.keys(ce).sort(),Ie="{",Xe=0;Xe<Re.length;Xe++)Ie+=JSON.stringify(Re[Xe])+":"+P(ce[Re[Xe]])+",";return Ie+"}"}function C(ce){for(var re="",ve=0,be=i.refProperties;ve<be.length;ve+=1)re+="/"+P(ce[be[ve]]);return re}var y=function(re){this.keyCache={},re&&this.replace(re)};y.prototype.replace=function(re){this._layerConfigs={},this._layers={},this.update(re,[])},y.prototype.update=function(re,ve){for(var be=this,Ae=0,Te=re;Ae<Te.length;Ae+=1){var Re=Te[Ae];this._layerConfigs[Re.id]=Re;var Ie=this._layers[Re.id]=i.createStyleLayer(Re);Ie._featureFilter=i.featureFilter(Ie.filter),this.keyCache[Re.id]&&delete this.keyCache[Re.id]}for(var Xe=0,ar=ve;Xe<ar.length;Xe+=1){var nr=ar[Xe];delete this.keyCache[nr],delete this._layerConfigs[nr],delete this._layers[nr]}this.familiesBySource={};for(var Ut=0,Ht=function u(ce,re){for(var ve={},be=0;be<ce.length;be++){var Ae=re&&re[ce[be].id]||C(ce[be]);re&&(re[ce[be].id]=Ae);var Te=ve[Ae];Te||(Te=ve[Ae]=[]),Te.push(ce[be])}var Re=[];for(var Ie in ve)Re.push(ve[Ie]);return Re}(i.values(this._layerConfigs),this.keyCache);Ut<Ht.length;Ut+=1){var Ce=Ht[Ut].map(function(sr){return be._layers[sr.id]}),We=Ce[0];if("none"!==We.visibility){var qe=We.source||"",or=this.familiesBySource[qe];or||(or=this.familiesBySource[qe]={});var _e=We.sourceLayer||"_geojsonTileLayer",De=or[_e];De||(De=or[_e]=[]),De.push(Ce)}}};var r=function(re){var ve={},be=[];for(var Ae in re){var Te=re[Ae],Re=ve[Ae]={};for(var Ie in Te){var Xe=Te[+Ie];if(Xe&&0!==Xe.bitmap.width&&0!==Xe.bitmap.height){var ar={x:0,y:0,w:Xe.bitmap.width+2,h:Xe.bitmap.height+2};be.push(ar),Re[Ie]={rect:ar,metrics:Xe.metrics}}}}var nr=i.potpack(be),Ht=new i.AlphaImage({width:nr.w||1,height:nr.h||1});for(var Se in re){var Ce=re[Se];for(var We in Ce){var qe=Ce[+We];if(qe&&0!==qe.bitmap.width&&0!==qe.bitmap.height){var or=ve[Se][We].rect;i.AlphaImage.copy(qe.bitmap,Ht,{x:0,y:0},{x:or.x+1,y:or.y+1},qe.bitmap)}}}this.image=Ht,this.positions=ve};i.register("GlyphAtlas",r);var l=function(re){this.tileID=new i.OverscaledTileID(re.tileID.overscaledZ,re.tileID.wrap,re.tileID.canonical.z,re.tileID.canonical.x,re.tileID.canonical.y),this.uid=re.uid,this.zoom=re.zoom,this.pixelRatio=re.pixelRatio,this.tileSize=re.tileSize,this.source=re.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=re.showCollisionBoxes,this.collectResourceTiming=!!re.collectResourceTiming,this.returnDependencies=!!re.returnDependencies,this.promoteId=re.promoteId};function a(ce,re,ve){for(var be=new i.EvaluationParameters(re),Ae=0,Te=ce;Ae<Te.length;Ae+=1)Te[Ae].recalculate(be,ve)}function s(ce,re){var ve=i.getArrayBuffer(ce.request,function(be,Ae,Te,Re){be?re(be):Ae&&re(null,{vectorTile:new i.vectorTile.VectorTile(new i.pbf(Ae)),rawData:Ae,cacheControl:Te,expires:Re})});return function(){ve.cancel(),re()}}l.prototype.parse=function(re,ve,be,Ae,Te){var Re=this;this.status="parsing",this.data=re,this.collisionBoxArray=new i.CollisionBoxArray;var Ie=new i.DictionaryCoder(Object.keys(re.layers).sort()),Xe=new i.FeatureIndex(this.tileID,this.promoteId);Xe.bucketLayerIDs=[];var ar={},nr={featureIndex:Xe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:be},cr=ve.familiesBySource[this.source];for(var Ut in cr){var Ht=re.layers[Ut];if(Ht){1===Ht.version&&i.warnOnce('Vector tile source "'+this.source+'" layer "'+Ut+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Se=Ie.encode(Ut),Ce=[],We=0;We<Ht.length;We++){var qe=Ht.feature(We),or=Xe.getId(qe,Ut);Ce.push({feature:qe,id:or,index:We,sourceLayerIndex:Se})}for(var _e=0,De=cr[Ut];_e<De.length;_e+=1){var sr=De[_e],yr=sr[0];yr.minzoom&&this.zoom<Math.floor(yr.minzoom)||yr.maxzoom&&this.zoom>=yr.maxzoom||"none"===yr.visibility||(a(sr,this.zoom,be),(ar[yr.id]=yr.createBucket({index:Xe.bucketLayerIDs.length,layers:sr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Se,sourceID:this.source})).populate(Ce,nr,this.tileID.canonical),Xe.bucketLayerIDs.push(sr.map(function(hr){return hr.id})))}}}var Pr,Jr,Mr,Wr,nn=i.mapObject(nr.glyphDependencies,function(hr){return Object.keys(hr).map(Number)});Object.keys(nn).length?Ae.send("getGlyphs",{uid:this.uid,stacks:nn},function(hr,Ar){Pr||(Pr=hr,Jr=Ar,hn.call(Re))}):Jr={};var Nr=Object.keys(nr.iconDependencies);Nr.length?Ae.send("getImages",{icons:Nr,source:this.source,tileID:this.tileID,type:"icons"},function(hr,Ar){Pr||(Pr=hr,Mr=Ar,hn.call(Re))}):Mr={};var Dn=Object.keys(nr.patternDependencies);function hn(){if(Pr)return Te(Pr);if(Jr&&Mr&&Wr){var hr=new r(Jr),Ar=new i.ImageAtlas(Mr,Wr);for(var Br in ar){var Or=ar[Br];Or instanceof i.SymbolBucket?(a(Or.layers,this.zoom,be),i.performSymbolLayout(Or,Jr,hr.positions,Mr,Ar.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Or.hasPattern&&(Or instanceof i.LineBucket||Or instanceof i.FillBucket||Or instanceof i.FillExtrusionBucket)&&(a(Or.layers,this.zoom,be),Or.addFeatures(nr,this.tileID.canonical,Ar.patternPositions))}this.status="done",Te(null,{buckets:i.values(ar).filter(function(an){return!an.isEmpty()}),featureIndex:Xe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:hr.image,imageAtlas:Ar,glyphMap:this.returnDependencies?Jr:null,iconMap:this.returnDependencies?Mr:null,glyphPositions:this.returnDependencies?hr.positions:null})}}Dn.length?Ae.send("getImages",{icons:Dn,source:this.source,tileID:this.tileID,type:"patterns"},function(hr,Ar){Pr||(Pr=hr,Wr=Ar,hn.call(Re))}):Wr={},hn.call(this)};var c=function(re,ve,be,Ae){this.actor=re,this.layerIndex=ve,this.availableImages=be,this.loadVectorData=Ae||s,this.loading={},this.loaded={}};c.prototype.loadTile=function(re,ve){var be=this,Ae=re.uid;this.loading||(this.loading={});var Te=!!(re&&re.request&&re.request.collectResourceTiming)&&new i.RequestPerformance(re.request),Re=this.loading[Ae]=new l(re);Re.abort=this.loadVectorData(re,function(Ie,Xe){if(delete be.loading[Ae],Ie||!Xe)return Re.status="done",be.loaded[Ae]=Re,ve(Ie);var ar=Xe.rawData,nr={};Xe.expires&&(nr.expires=Xe.expires),Xe.cacheControl&&(nr.cacheControl=Xe.cacheControl);var cr={};if(Te){var Ut=Te.finish();Ut&&(cr.resourceTiming=JSON.parse(JSON.stringify(Ut)))}Re.vectorTile=Xe.vectorTile,Re.parse(Xe.vectorTile,be.layerIndex,be.availableImages,be.actor,function(Ht,Se){if(Ht||!Se)return ve(Ht);ve(null,i.extend({rawTileData:ar.slice(0)},Se,nr,cr))}),be.loaded=be.loaded||{},be.loaded[Ae]=Re})},c.prototype.reloadTile=function(re,ve){var be=this,Ae=this.loaded,Te=re.uid,Re=this;if(Ae&&Ae[Te]){var Ie=Ae[Te];Ie.showCollisionBoxes=re.showCollisionBoxes;var Xe=function(ar,nr){var cr=Ie.reloadCallback;cr&&(delete Ie.reloadCallback,Ie.parse(Ie.vectorTile,Re.layerIndex,be.availableImages,Re.actor,cr)),ve(ar,nr)};"parsing"===Ie.status?Ie.reloadCallback=Xe:"done"===Ie.status&&(Ie.vectorTile?Ie.parse(Ie.vectorTile,this.layerIndex,this.availableImages,this.actor,Xe):Xe())}},c.prototype.abortTile=function(re,ve){var be=this.loading,Ae=re.uid;be&&be[Ae]&&be[Ae].abort&&(be[Ae].abort(),delete be[Ae]),ve()},c.prototype.removeTile=function(re,ve){var be=this.loaded,Ae=re.uid;be&&be[Ae]&&delete be[Ae],ve()};var f=i.window.ImageBitmap,m=function(){this.loaded={}};m.prototype.loadTile=function(re,ve){var be=re.uid,Ae=re.encoding,Te=re.rawImageData,Re=f&&Te instanceof f?this.getImageData(Te):Te,Ie=new i.DEMData(be,Re,Ae);this.loaded=this.loaded||{},this.loaded[be]=Ie,ve(null,Ie)},m.prototype.getImageData=function(re){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(re.width,re.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=re.width,this.offscreenCanvas.height=re.height,this.offscreenCanvasContext.drawImage(re,0,0,re.width,re.height);var ve=this.offscreenCanvasContext.getImageData(-1,-1,re.width+2,re.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new i.RGBAImage({width:ve.width,height:ve.height},ve.data)},m.prototype.removeTile=function(re){var ve=this.loaded,be=re.uid;ve&&ve[be]&&delete ve[be]};var h=function w(ce,re){var be,ve=ce&&ce.type;if("FeatureCollection"===ve)for(be=0;be<ce.features.length;be++)w(ce.features[be],re);else if("GeometryCollection"===ve)for(be=0;be<ce.geometries.length;be++)w(ce.geometries[be],re);else if("Feature"===ve)w(ce.geometry,re);else if("Polygon"===ve)p(ce.coordinates,re);else if("MultiPolygon"===ve)for(be=0;be<ce.coordinates.length;be++)p(ce.coordinates[be],re);return ce};function p(ce,re){if(0!==ce.length){o(ce[0],re);for(var ve=1;ve<ce.length;ve++)o(ce[ve],!re)}}function o(ce,re){for(var ve=0,be=0,Ae=ce.length,Te=Ae-1;be<Ae;Te=be++)ve+=(ce[be][0]-ce[Te][0])*(ce[Te][1]+ce[be][1]);ve>=0!=!!re&&ce.reverse()}var v=i.vectorTile.VectorTileFeature.prototype.toGeoJSON,M=function(re){this._feature=re,this.extent=i.EXTENT,this.type=re.type,this.properties=re.tags,"id"in re&&!isNaN(re.id)&&(this.id=parseInt(re.id,10))};M.prototype.loadGeometry=function(){if(1===this._feature.type){for(var re=[],ve=0,be=this._feature.geometry;ve<be.length;ve+=1){var Ae=be[ve];re.push([new i.Point$1(Ae[0],Ae[1])])}return re}for(var Te=[],Re=0,Ie=this._feature.geometry;Re<Ie.length;Re+=1){for(var ar=[],nr=0,cr=Ie[Re];nr<cr.length;nr+=1){var Ut=cr[nr];ar.push(new i.Point$1(Ut[0],Ut[1]))}Te.push(ar)}return Te},M.prototype.toGeoJSON=function(re,ve,be){return v.call(this,re,ve,be)};var b=function(re){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.EXTENT,this.length=re.length,this._features=re};b.prototype.feature=function(re){return new M(this._features[re])};var L=i.vectorTile.VectorTileFeature,x=S;function S(ce,re){this.options=re||{},this.features=ce,this.length=ce.length}function T(ce,re){this.id="number"==typeof ce.id?ce.id:void 0,this.type=ce.type,this.rawGeometry=1===ce.type?[ce.geometry]:ce.geometry,this.properties=ce.tags,this.extent=re||4096}S.prototype.feature=function(ce){return new T(this.features[ce],this.options.extent)},T.prototype.loadGeometry=function(){var ce=this.rawGeometry;this.geometry=[];for(var re=0;re<ce.length;re++){for(var ve=ce[re],be=[],Ae=0;Ae<ve.length;Ae++)be.push(new i.Point$1(ve[Ae][0],ve[Ae][1]));this.geometry.push(be)}return this.geometry},T.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ce=this.geometry,re=1/0,ve=-1/0,be=1/0,Ae=-1/0,Te=0;Te<ce.length;Te++)for(var Re=ce[Te],Ie=0;Ie<Re.length;Ie++){var Xe=Re[Ie];re=Math.min(re,Xe.x),ve=Math.max(ve,Xe.x),be=Math.min(be,Xe.y),Ae=Math.max(Ae,Xe.y)}return[re,be,ve,Ae]},T.prototype.toGeoJSON=L.prototype.toGeoJSON;var n=D,d=function N(ce,re){re=re||{};var ve={};for(var be in ce)ve[be]=new x(ce[be].features,re),ve[be].name=be,ve[be].version=re.version,ve[be].extent=re.extent;return D({layers:ve})},F=x;function D(ce){var re=new i.pbf;return function k(ce,re){for(var ve in ce.layers)re.writeMessage(3,O,ce.layers[ve])}(ce,re),re.finish()}function O(ce,re){re.writeVarintField(15,ce.version||1),re.writeStringField(1,ce.name||""),re.writeVarintField(5,ce.extent||4096);var ve,be={keys:[],values:[],keycache:{},valuecache:{}};for(ve=0;ve<ce.length;ve++)be.feature=ce.feature(ve),re.writeMessage(2,B,be);var Ae=be.keys;for(ve=0;ve<Ae.length;ve++)re.writeStringField(3,Ae[ve]);var Te=be.values;for(ve=0;ve<Te.length;ve++)re.writeMessage(4,nt,Te[ve])}function B(ce,re){var ve=ce.feature;void 0!==ve.id&&re.writeVarintField(1,ve.id),re.writeMessage(2,z,ce),re.writeVarintField(3,ve.type),re.writeMessage(4,J,ve)}function z(ce,re){var ve=ce.feature,be=ce.keys,Ae=ce.values,Te=ce.keycache,Re=ce.valuecache;for(var Ie in ve.properties){var Xe=Te[Ie];void 0===Xe&&(be.push(Ie),Te[Ie]=Xe=be.length-1),re.writeVarint(Xe);var ar=ve.properties[Ie],nr=typeof ar;"string"!==nr&&"boolean"!==nr&&"number"!==nr&&(ar=JSON.stringify(ar));var cr=nr+":"+ar,Ut=Re[cr];void 0===Ut&&(Ae.push(ar),Re[cr]=Ut=Ae.length-1),re.writeVarint(Ut)}}function U(ce,re){return(re<<3)+(7&ce)}function H(ce){return ce<<1^ce>>31}function J(ce,re){for(var ve=ce.loadGeometry(),be=ce.type,Ae=0,Te=0,Re=ve.length,Ie=0;Ie<Re;Ie++){var Xe=ve[Ie],ar=1;1===be&&(ar=Xe.length),re.writeVarint(U(1,ar));for(var nr=3===be?Xe.length-1:Xe.length,cr=0;cr<nr;cr++){1===cr&&1!==be&&re.writeVarint(U(2,nr-1));var Ut=Xe[cr].x-Ae,Ht=Xe[cr].y-Te;re.writeVarint(H(Ut)),re.writeVarint(H(Ht)),Ae+=Ut,Te+=Ht}3===be&&re.writeVarint(U(7,1))}}function nt(ce,re){var ve=typeof ce;"string"===ve?re.writeStringField(1,ce):"boolean"===ve?re.writeBooleanField(7,ce):"number"===ve&&(ce%1!=0?re.writeDoubleField(3,ce):ce<0?re.writeSVarintField(6,ce):re.writeVarintField(5,ce))}function it(ce,re,ve,be,Ae,Te){if(!(Ae-be<=ve)){var Re=be+Ae>>1;ut(ce,re,Re,be,Ae,Te%2),it(ce,re,ve,be,Re-1,Te+1),it(ce,re,ve,Re+1,Ae,Te+1)}}function ut(ce,re,ve,be,Ae,Te){for(;Ae>be;){if(Ae-be>600){var Re=Ae-be+1,Ie=ve-be+1,Xe=Math.log(Re),ar=.5*Math.exp(2*Xe/3),nr=.5*Math.sqrt(Xe*ar*(Re-ar)/Re)*(Ie-Re/2<0?-1:1);ut(ce,re,ve,Math.max(be,Math.floor(ve-Ie*ar/Re+nr)),Math.min(Ae,Math.floor(ve+(Re-Ie)*ar/Re+nr)),Te)}var Ht=re[2*ve+Te],Se=be,Ce=Ae;for(Q(ce,re,be,ve),re[2*Ae+Te]>Ht&&Q(ce,re,be,Ae);Se<Ce;){for(Q(ce,re,Se,Ce),Se++,Ce--;re[2*Se+Te]<Ht;)Se++;for(;re[2*Ce+Te]>Ht;)Ce--}re[2*be+Te]===Ht?Q(ce,re,be,Ce):Q(ce,re,++Ce,Ae),Ce<=ve&&(be=Ce+1),ve<=Ce&&(Ae=Ce-1)}}function Q(ce,re,ve,be){j(ce,ve,be),j(re,2*ve,2*be),j(re,2*ve+1,2*be+1)}function j(ce,re,ve){var be=ce[re];ce[re]=ce[ve],ce[ve]=be}function K(ce,re,ve,be){var Ae=ce-ve,Te=re-be;return Ae*Ae+Te*Te}n.fromVectorTileJs=D,n.fromGeojsonVt=d,n.GeoJSONWrapper=F;var at=function(ce){return ce[0]},$=function(ce){return ce[1]},X=function(re,ve,be,Ae,Te){void 0===ve&&(ve=at),void 0===be&&(be=$),void 0===Ae&&(Ae=64),void 0===Te&&(Te=Float64Array),this.nodeSize=Ae,this.points=re;for(var Re=re.length<65536?Uint16Array:Uint32Array,Ie=this.ids=new Re(re.length),Xe=this.coords=new Te(2*re.length),ar=0;ar<re.length;ar++)Ie[ar]=ar,Xe[2*ar]=ve(re[ar]),Xe[2*ar+1]=be(re[ar]);it(Ie,Xe,Ae,0,Ie.length-1,0)};X.prototype.range=function(re,ve,be,Ae){return function Z(ce,re,ve,be,Ae,Te,Re){for(var ar,nr,Ie=[0,ce.length-1,0],Xe=[];Ie.length;){var cr=Ie.pop(),Ut=Ie.pop(),Ht=Ie.pop();if(Ut-Ht<=Re)for(var Se=Ht;Se<=Ut;Se++)nr=re[2*Se+1],(ar=re[2*Se])>=ve&&ar<=Ae&&nr>=be&&nr<=Te&&Xe.push(ce[Se]);else{var Ce=Math.floor((Ht+Ut)/2);nr=re[2*Ce+1],(ar=re[2*Ce])>=ve&&ar<=Ae&&nr>=be&&nr<=Te&&Xe.push(ce[Ce]);var We=(cr+1)%2;(0===cr?ve<=ar:be<=nr)&&(Ie.push(Ht),Ie.push(Ce-1),Ie.push(We)),(0===cr?Ae>=ar:Te>=nr)&&(Ie.push(Ce+1),Ie.push(Ut),Ie.push(We))}}return Xe}(this.ids,this.coords,re,ve,be,Ae,this.nodeSize)},X.prototype.within=function(re,ve,be){return function G(ce,re,ve,be,Ae,Te){for(var Re=[0,ce.length-1,0],Ie=[],Xe=Ae*Ae;Re.length;){var ar=Re.pop(),nr=Re.pop(),cr=Re.pop();if(nr-cr<=Te)for(var Ut=cr;Ut<=nr;Ut++)K(re[2*Ut],re[2*Ut+1],ve,be)<=Xe&&Ie.push(ce[Ut]);else{var Ht=Math.floor((cr+nr)/2),Se=re[2*Ht],Ce=re[2*Ht+1];K(Se,Ce,ve,be)<=Xe&&Ie.push(ce[Ht]);var We=(ar+1)%2;(0===ar?ve-Ae<=Se:be-Ae<=Ce)&&(Re.push(cr),Re.push(Ht-1),Re.push(We)),(0===ar?ve+Ae>=Se:be+Ae>=Ce)&&(Re.push(Ht+1),Re.push(nr),Re.push(We))}}return Ie}(this.ids,this.coords,re,ve,be,this.nodeSize)};var rt={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(ce){return ce}},et=function(re){this.options=At(Object.create(rt),re),this.trees=new Array(this.options.maxZoom+1)};function st(ce,re,ve,be,Ae){return{x:ce,y:re,zoom:1/0,id:ve,parentId:-1,numPoints:be,properties:Ae}}function dt(ce,re){var ve=ce.geometry.coordinates,Ae=ve[1];return{x:Lt(ve[0]),y:It(Ae),zoom:1/0,index:re,parentId:-1}}function bt(ce){return{type:"Feature",id:ce.id,properties:gt(ce),geometry:{type:"Point",coordinates:[Mt(ce.x),xt(ce.y)]}}}function gt(ce){var re=ce.numPoints,ve=re>=1e4?Math.round(re/1e3)+"k":re>=1e3?Math.round(re/100)/10+"k":re;return At(At({},ce.properties),{cluster:!0,cluster_id:ce.id,point_count:re,point_count_abbreviated:ve})}function Lt(ce){return ce/360+.5}function It(ce){var re=Math.sin(ce*Math.PI/180),ve=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return ve<0?0:ve>1?1:ve}function Mt(ce){return 360*(ce-.5)}function xt(ce){var re=(180-360*ce)*Math.PI/180;return 360*Math.atan(Math.exp(re))/Math.PI-90}function At(ce,re){for(var ve in re)ce[ve]=re[ve];return ce}function Gt(ce){return ce.x}function Wt(ce){return ce.y}function Pt(ce,re,ve,be){for(var Ie,Ae=be,Te=ve-re>>1,Re=ve-re,Xe=ce[re],ar=ce[re+1],nr=ce[ve],cr=ce[ve+1],Ut=re+3;Ut<ve;Ut+=3){var Ht=Vt(ce[Ut],ce[Ut+1],Xe,ar,nr,cr);if(Ht>Ae)Ie=Ut,Ae=Ht;else if(Ht===Ae){var Se=Math.abs(Ut-Te);Se<Re&&(Ie=Ut,Re=Se)}}Ae>be&&(Ie-re>3&&Pt(ce,re,Ie,be),ce[Ie+2]=Ae,ve-Ie>3&&Pt(ce,Ie,ve,be))}function Vt(ce,re,ve,be,Ae,Te){var Re=Ae-ve,Ie=Te-be;if(0!==Re||0!==Ie){var Xe=((ce-ve)*Re+(re-be)*Ie)/(Re*Re+Ie*Ie);Xe>1?(ve=Ae,be=Te):Xe>0&&(ve+=Re*Xe,be+=Ie*Xe)}return(Re=ce-ve)*Re+(Ie=re-be)*Ie}function te(ce,re,ve,be){var Ae={id:void 0===ce?null:ce,type:re,geometry:ve,tags:be,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function Qt(ce){var re=ce.geometry,ve=ce.type;if("Point"===ve||"MultiPoint"===ve||"LineString"===ve)Bt(ce,re);else if("Polygon"===ve||"MultiLineString"===ve)for(var be=0;be<re.length;be++)Bt(ce,re[be]);else if("MultiPolygon"===ve)for(be=0;be<re.length;be++)for(var Ae=0;Ae<re[be].length;Ae++)Bt(ce,re[be][Ae])}(Ae),Ae}function Bt(ce,re){for(var ve=0;ve<re.length;ve+=3)ce.minX=Math.min(ce.minX,re[ve]),ce.minY=Math.min(ce.minY,re[ve+1]),ce.maxX=Math.max(ce.maxX,re[ve]),ce.maxY=Math.max(ce.maxY,re[ve+1])}function qt(ce,re,ve,be){if(re.geometry){var Ae=re.geometry.coordinates,Te=re.geometry.type,Re=Math.pow(ve.tolerance/((1<<ve.maxZoom)*ve.extent),2),Ie=[],Xe=re.id;if(ve.promoteId?Xe=re.properties[ve.promoteId]:ve.generateId&&(Xe=be||0),"Point"===Te)ie(Ae,Ie);else if("MultiPoint"===Te)for(var ar=0;ar<Ae.length;ar++)ie(Ae[ar],Ie);else if("LineString"===Te)oe(Ae,Ie,Re,!1);else if("MultiLineString"===Te){if(ve.lineMetrics){for(ar=0;ar<Ae.length;ar++)oe(Ae[ar],Ie=[],Re,!1),ce.push(te(Xe,"LineString",Ie,re.properties));return}pe(Ae,Ie,Re,!1)}else if("Polygon"===Te)pe(Ae,Ie,Re,!0);else{if("MultiPolygon"!==Te){if("GeometryCollection"===Te){for(ar=0;ar<re.geometry.geometries.length;ar++)qt(ce,{id:Xe,geometry:re.geometry.geometries[ar],properties:re.properties},ve,be);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ar=0;ar<Ae.length;ar++){var nr=[];pe(Ae[ar],nr,Re,!0),Ie.push(nr)}}ce.push(te(Xe,Te,Ie,re.properties))}}function ie(ce,re){re.push(de(ce[0])),re.push(Fe(ce[1])),re.push(0)}function oe(ce,re,ve,be){for(var Ae,Te,Re=0,Ie=0;Ie<ce.length;Ie++){var Xe=de(ce[Ie][0]),ar=Fe(ce[Ie][1]);re.push(Xe),re.push(ar),re.push(0),Ie>0&&(Re+=be?(Ae*ar-Xe*Te)/2:Math.sqrt(Math.pow(Xe-Ae,2)+Math.pow(ar-Te,2))),Ae=Xe,Te=ar}var nr=re.length-3;re[2]=1,Pt(re,0,nr,ve),re[nr+2]=1,re.size=Math.abs(Re),re.start=0,re.end=re.size}function pe(ce,re,ve,be){for(var Ae=0;Ae<ce.length;Ae++){var Te=[];oe(ce[Ae],Te,ve,be),re.push(Te)}}function de(ce){return ce/360+.5}function Fe(ce){var re=Math.sin(ce*Math.PI/180),ve=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return ve<0?0:ve>1?1:ve}function Kt(ce,re,ve,be,Ae,Te,Re,Ie){if(be/=re,Te>=(ve/=re)&&Re<be)return ce;if(Re<ve||Te>=be)return null;for(var Xe=[],ar=0;ar<ce.length;ar++){var nr=ce[ar],cr=nr.geometry,Ut=nr.type,Ht=0===Ae?nr.minX:nr.minY,Se=0===Ae?nr.maxX:nr.maxY;if(Ht>=ve&&Se<be)Xe.push(nr);else if(!(Se<ve||Ht>=be)){var Ce=[];if("Point"===Ut||"MultiPoint"===Ut)Et(cr,Ce,ve,be,Ae);else if("LineString"===Ut)St(cr,Ce,ve,be,Ae,!1,Ie.lineMetrics);else if("MultiLineString"===Ut)Ft(cr,Ce,ve,be,Ae,!1);else if("Polygon"===Ut)Ft(cr,Ce,ve,be,Ae,!0);else if("MultiPolygon"===Ut)for(var We=0;We<cr.length;We++){var qe=[];Ft(cr[We],qe,ve,be,Ae,!0),qe.length&&Ce.push(qe)}if(Ce.length){if(Ie.lineMetrics&&"LineString"===Ut){for(We=0;We<Ce.length;We++)Xe.push(te(nr.id,Ut,Ce[We],nr.tags));continue}("LineString"===Ut||"MultiLineString"===Ut)&&(1===Ce.length?(Ut="LineString",Ce=Ce[0]):Ut="MultiLineString"),("Point"===Ut||"MultiPoint"===Ut)&&(Ut=3===Ce.length?"Point":"MultiPoint"),Xe.push(te(nr.id,Ut,Ce,nr.tags))}}}return Xe.length?Xe:null}function Et(ce,re,ve,be,Ae){for(var Te=0;Te<ce.length;Te+=3){var Re=ce[Te+Ae];Re>=ve&&Re<=be&&(re.push(ce[Te]),re.push(ce[Te+1]),re.push(ce[Te+2]))}}function St(ce,re,ve,be,Ae,Te,Re){for(var nr,cr,Ie=Dt(ce),Xe=0===Ae?Rt:wt,ar=ce.start,Ut=0;Ut<ce.length-3;Ut+=3){var Ht=ce[Ut],Se=ce[Ut+1],Ce=ce[Ut+2],We=ce[Ut+3],qe=ce[Ut+4],or=0===Ae?Ht:Se,_e=0===Ae?We:qe,De=!1;Re&&(nr=Math.sqrt(Math.pow(Ht-We,2)+Math.pow(Se-qe,2))),or<ve?_e>ve&&(cr=Xe(Ie,Ht,Se,We,qe,ve),Re&&(Ie.start=ar+nr*cr)):or>be?_e<be&&(cr=Xe(Ie,Ht,Se,We,qe,be),Re&&(Ie.start=ar+nr*cr)):Nt(Ie,Ht,Se,Ce),_e<ve&&or>=ve&&(cr=Xe(Ie,Ht,Se,We,qe,ve),De=!0),_e>be&&or<=be&&(cr=Xe(Ie,Ht,Se,We,qe,be),De=!0),!Te&&De&&(Re&&(Ie.end=ar+nr*cr),re.push(Ie),Ie=Dt(ce)),Re&&(ar+=nr)}var sr=ce.length-3;Ht=ce[sr],Se=ce[sr+1],Ce=ce[sr+2],(or=0===Ae?Ht:Se)>=ve&&or<=be&&Nt(Ie,Ht,Se,Ce),sr=Ie.length-3,Te&&sr>=3&&(Ie[sr]!==Ie[0]||Ie[sr+1]!==Ie[1])&&Nt(Ie,Ie[0],Ie[1],Ie[2]),Ie.length&&re.push(Ie)}function Dt(ce){var re=[];return re.size=ce.size,re.start=ce.start,re.end=ce.end,re}function Ft(ce,re,ve,be,Ae,Te){for(var Re=0;Re<ce.length;Re++)St(ce[Re],re,ve,be,Ae,Te,!1)}function Nt(ce,re,ve,be){ce.push(re),ce.push(ve),ce.push(be)}function Rt(ce,re,ve,be,Ae,Te){var Re=(Te-re)/(be-re);return ce.push(Te),ce.push(ve+(Ae-ve)*Re),ce.push(1),Re}function wt(ce,re,ve,be,Ae,Te){var Re=(Te-ve)/(Ae-ve);return ce.push(re+(be-re)*Re),ce.push(Te),ce.push(1),Re}function pt(ce,re){for(var ve=[],be=0;be<ce.length;be++){var Re,Ae=ce[be],Te=Ae.type;if("Point"===Te||"MultiPoint"===Te||"LineString"===Te)Re=kt(Ae.geometry,re);else if("MultiLineString"===Te||"Polygon"===Te){Re=[];for(var Ie=0;Ie<Ae.geometry.length;Ie++)Re.push(kt(Ae.geometry[Ie],re))}else if("MultiPolygon"===Te)for(Re=[],Ie=0;Ie<Ae.geometry.length;Ie++){for(var Xe=[],ar=0;ar<Ae.geometry[Ie].length;ar++)Xe.push(kt(Ae.geometry[Ie][ar],re));Re.push(Xe)}ve.push(te(Ae.id,Te,Re,Ae.tags))}return ve}function kt(ce,re){var ve=[];ve.size=ce.size,void 0!==ce.start&&(ve.start=ce.start,ve.end=ce.end);for(var be=0;be<ce.length;be+=3)ve.push(ce[be]+re,ce[be+1],ce[be+2]);return ve}function Zt(ce,re){if(ce.transformed)return ce;var Te,Re,Ie,ve=1<<ce.z,be=ce.x,Ae=ce.y;for(Te=0;Te<ce.features.length;Te++){var Xe=ce.features[Te],ar=Xe.geometry,nr=Xe.type;if(Xe.geometry=[],1===nr)for(Re=0;Re<ar.length;Re+=2)Xe.geometry.push(ee(ar[Re],ar[Re+1],re,ve,be,Ae));else for(Re=0;Re<ar.length;Re++){var cr=[];for(Ie=0;Ie<ar[Re].length;Ie+=2)cr.push(ee(ar[Re][Ie],ar[Re][Ie+1],re,ve,be,Ae));Xe.geometry.push(cr)}}return ce.transformed=!0,ce}function ee(ce,re,ve,be,Ae,Te){return[Math.round(ve*(ce*be-Ae)),Math.round(ve*(re*be-Te))]}function se(ce,re,ve,be,Ae){for(var Te=re===Ae.maxZoom?0:Ae.tolerance/((1<<re)*Ae.extent),Re={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ve,y:be,z:re,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ie=0;Ie<ce.length;Ie++){Re.numFeatures++,Be(Re,ce[Ie],Te,Ae);var Xe=ce[Ie].minX,ar=ce[Ie].minY,nr=ce[Ie].maxX,cr=ce[Ie].maxY;Xe<Re.minX&&(Re.minX=Xe),ar<Re.minY&&(Re.minY=ar),nr>Re.maxX&&(Re.maxX=nr),cr>Re.maxY&&(Re.maxY=cr)}return Re}function Be(ce,re,ve,be){var Ae=re.geometry,Te=re.type,Re=[];if("Point"===Te||"MultiPoint"===Te)for(var Ie=0;Ie<Ae.length;Ie+=3)Re.push(Ae[Ie]),Re.push(Ae[Ie+1]),ce.numPoints++,ce.numSimplified++;else if("LineString"===Te)Ke(Re,Ae,ce,ve,!1,!1);else if("MultiLineString"===Te||"Polygon"===Te)for(Ie=0;Ie<Ae.length;Ie++)Ke(Re,Ae[Ie],ce,ve,"Polygon"===Te,0===Ie);else if("MultiPolygon"===Te)for(var Xe=0;Xe<Ae.length;Xe++){var ar=Ae[Xe];for(Ie=0;Ie<ar.length;Ie++)Ke(Re,ar[Ie],ce,ve,!0,0===Ie)}if(Re.length){var nr=re.tags||null;if("LineString"===Te&&be.lineMetrics){for(var cr in nr={},re.tags)nr[cr]=re.tags[cr];nr.mapbox_clip_start=Ae.start/Ae.size,nr.mapbox_clip_end=Ae.end/Ae.size}var Ut={geometry:Re,type:"Polygon"===Te||"MultiPolygon"===Te?3:"LineString"===Te||"MultiLineString"===Te?2:1,tags:nr};null!==re.id&&(Ut.id=re.id),ce.features.push(Ut)}}function Ke(ce,re,ve,be,Ae,Te){var Re=be*be;if(be>0&&re.size<(Ae?Re:be))ve.numPoints+=re.length/3;else{for(var Ie=[],Xe=0;Xe<re.length;Xe+=3)(0===be||re[Xe+2]>Re)&&(ve.numSimplified++,Ie.push(re[Xe]),Ie.push(re[Xe+1])),ve.numPoints++;Ae&&function xe(ce,re){for(var ve=0,be=0,Ae=ce.length,Te=Ae-2;be<Ae;Te=be,be+=2)ve+=(ce[be]-ce[Te])*(ce[be+1]+ce[Te+1]);if(ve>0===re)for(be=0,Ae=ce.length;be<Ae/2;be+=2){var Re=ce[be],Ie=ce[be+1];ce[be]=ce[Ae-2-be],ce[be+1]=ce[Ae-1-be],ce[Ae-2-be]=Re,ce[Ae-1-be]=Ie}}(Ie,Te),ce.push(Ie)}}function Ge(ce,re){var ve=(re=this.options=function ue(ce,re){for(var ve in re)ce[ve]=re[ve];return ce}(Object.create(this.options),re)).debug;if(ve&&console.time("preprocess data"),re.maxZoom<0||re.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(re.promoteId&&re.generateId)throw new Error("promoteId and generateId cannot be used together.");var be=function Ot(ce,re){var ve=[];if("FeatureCollection"===ce.type)for(var be=0;be<ce.features.length;be++)qt(ve,ce.features[be],re,be);else qt(ve,"Feature"===ce.type?ce:{geometry:ce},re);return ve}(ce,re);this.tiles={},this.tileCoords=[],ve&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",re.indexMaxZoom,re.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(be=function ft(ce,re){var ve=re.buffer/re.extent,be=ce,Ae=Kt(ce,1,-1-ve,ve,0,-1,2,re),Te=Kt(ce,1,1-ve,2+ve,0,-1,2,re);return(Ae||Te)&&(be=Kt(ce,1,-ve,1+ve,0,-1,2,re)||[],Ae&&(be=pt(Ae,1).concat(be)),Te&&(be=be.concat(pt(Te,-1)))),be}(be,re)).length&&this.splitTile(be,0,0,0),ve&&(be.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function gr(ce,re,ve){return 32*((1<<ce)*ve+re)+ce}function Ne(ce,re){var ve=ce.tileID.canonical;if(!this._geoJSONIndex)return re(null,null);var be=this._geoJSONIndex.getTile(ve.z,ve.x,ve.y);if(!be)return re(null,null);var Ae=new b(be.features),Te=n(Ae);(0!==Te.byteOffset||Te.byteLength!==Te.buffer.byteLength)&&(Te=new Uint8Array(Te)),re(null,{vectorTile:Ae,rawData:Te.buffer})}et.prototype.load=function(re){var ve=this.options,be=ve.log,Ae=ve.minZoom,Te=ve.maxZoom,Re=ve.nodeSize;be&&console.time("total time");var Ie="prepare "+re.length+" points";be&&console.time(Ie),this.points=re;for(var Xe=[],ar=0;ar<re.length;ar++)!re[ar].geometry||Xe.push(dt(re[ar],ar));this.trees[Te+1]=new X(Xe,Gt,Wt,Re,Float32Array),be&&console.timeEnd(Ie);for(var nr=Te;nr>=Ae;nr--){var cr=+Date.now();Xe=this._cluster(Xe,nr),this.trees[nr]=new X(Xe,Gt,Wt,Re,Float32Array),be&&console.log("z%d: %d clusters in %dms",nr,Xe.length,+Date.now()-cr)}return be&&console.timeEnd("total time"),this},et.prototype.getClusters=function(re,ve){var be=((re[0]+180)%360+360)%360-180,Ae=Math.max(-90,Math.min(90,re[1])),Te=180===re[2]?180:((re[2]+180)%360+360)%360-180,Re=Math.max(-90,Math.min(90,re[3]));if(re[2]-re[0]>=360)be=-180,Te=180;else if(be>Te){var Ie=this.getClusters([be,Ae,180,Re],ve),Xe=this.getClusters([-180,Ae,Te,Re],ve);return Ie.concat(Xe)}for(var ar=this.trees[this._limitZoom(ve)],cr=[],Ut=0,Ht=ar.range(Lt(be),It(Re),Lt(Te),It(Ae));Ut<Ht.length;Ut+=1){var Ce=ar.points[Ht[Ut]];cr.push(Ce.numPoints?bt(Ce):this.points[Ce.index])}return cr},et.prototype.getChildren=function(re){var ve=this._getOriginId(re),be=this._getOriginZoom(re),Ae="No cluster with the specified id.",Te=this.trees[be];if(!Te)throw new Error(Ae);var Re=Te.points[ve];if(!Re)throw new Error(Ae);for(var Ie=this.options.radius/(this.options.extent*Math.pow(2,be-1)),ar=[],nr=0,cr=Te.within(Re.x,Re.y,Ie);nr<cr.length;nr+=1){var Ht=Te.points[cr[nr]];Ht.parentId===re&&ar.push(Ht.numPoints?bt(Ht):this.points[Ht.index])}if(0===ar.length)throw new Error(Ae);return ar},et.prototype.getLeaves=function(re,ve,be){var Ae=[];return this._appendLeaves(Ae,re,ve=ve||10,be=be||0,0),Ae},et.prototype.getTile=function(re,ve,be){var Ae=this.trees[this._limitZoom(re)],Te=Math.pow(2,re),Re=this.options,ar=Re.radius/Re.extent,nr=(be-ar)/Te,cr=(be+1+ar)/Te,Ut={features:[]};return this._addTileFeatures(Ae.range((ve-ar)/Te,nr,(ve+1+ar)/Te,cr),Ae.points,ve,be,Te,Ut),0===ve&&this._addTileFeatures(Ae.range(1-ar/Te,nr,1,cr),Ae.points,Te,be,Te,Ut),ve===Te-1&&this._addTileFeatures(Ae.range(0,nr,ar/Te,cr),Ae.points,-1,be,Te,Ut),Ut.features.length?Ut:null},et.prototype.getClusterExpansionZoom=function(re){for(var ve=this._getOriginZoom(re)-1;ve<=this.options.maxZoom;){var be=this.getChildren(re);if(ve++,1!==be.length)break;re=be[0].properties.cluster_id}return ve},et.prototype._appendLeaves=function(re,ve,be,Ae,Te){for(var Ie=0,Xe=this.getChildren(ve);Ie<Xe.length;Ie+=1){var ar=Xe[Ie],nr=ar.properties;if(nr&&nr.cluster?Te+nr.point_count<=Ae?Te+=nr.point_count:Te=this._appendLeaves(re,nr.cluster_id,be,Ae,Te):Te<Ae?Te++:re.push(ar),re.length===be)break}return Te},et.prototype._addTileFeatures=function(re,ve,be,Ae,Te,Re){for(var Ie=0,Xe=re;Ie<Xe.length;Ie+=1){var nr=ve[Xe[Ie]],cr=nr.numPoints,Ut={type:1,geometry:[[Math.round(this.options.extent*(nr.x*Te-be)),Math.round(this.options.extent*(nr.y*Te-Ae))]],tags:cr?gt(nr):this.points[nr.index].properties},Ht=void 0;cr?Ht=nr.id:this.options.generateId?Ht=nr.index:this.points[nr.index].id&&(Ht=this.points[nr.index].id),void 0!==Ht&&(Ut.id=Ht),Re.features.push(Ut)}},et.prototype._limitZoom=function(re){return Math.max(this.options.minZoom,Math.min(re,this.options.maxZoom+1))},et.prototype._cluster=function(re,ve){for(var be=[],Ae=this.options,Ie=Ae.reduce,Xe=Ae.radius/(Ae.extent*Math.pow(2,ve)),ar=0;ar<re.length;ar++){var nr=re[ar];if(!(nr.zoom<=ve)){nr.zoom=ve;for(var cr=this.trees[ve+1],Ut=cr.within(nr.x,nr.y,Xe),Ht=nr.numPoints||1,Se=nr.x*Ht,Ce=nr.y*Ht,We=Ie&&Ht>1?this._map(nr,!0):null,qe=(ar<<5)+(ve+1)+this.points.length,or=0,_e=Ut;or<_e.length;or+=1){var sr=cr.points[_e[or]];if(!(sr.zoom<=ve)){sr.zoom=ve;var yr=sr.numPoints||1;Se+=sr.x*yr,Ce+=sr.y*yr,Ht+=yr,sr.parentId=qe,Ie&&(We||(We=this._map(nr,!0)),Ie(We,this._map(sr)))}}1===Ht?be.push(nr):(nr.parentId=qe,be.push(st(Se/Ht,Ce/Ht,qe,Ht,We)))}}return be},et.prototype._getOriginId=function(re){return re-this.points.length>>5},et.prototype._getOriginZoom=function(re){return(re-this.points.length)%32},et.prototype._map=function(re,ve){if(re.numPoints)return ve?At({},re.properties):re.properties;var be=this.points[re.index].properties,Ae=this.options.map(be);return ve&&Ae===be?At({},Ae):Ae},Ge.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ge.prototype.splitTile=function(ce,re,ve,be,Ae,Te,Re){for(var Ie=[ce,re,ve,be],Xe=this.options,ar=Xe.debug;Ie.length;){be=Ie.pop(),ve=Ie.pop(),re=Ie.pop(),ce=Ie.pop();var nr=1<<re,cr=gr(re,ve,be),Ut=this.tiles[cr];if(!Ut&&(ar>1&&console.time("creation"),Ut=this.tiles[cr]=se(ce,re,ve,be,Xe),this.tileCoords.push({z:re,x:ve,y:be}),ar)){ar>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",re,ve,be,Ut.numFeatures,Ut.numPoints,Ut.numSimplified),console.timeEnd("creation"));var Ht="z"+re;this.stats[Ht]=(this.stats[Ht]||0)+1,this.total++}if(Ut.source=ce,Ae){if(re===Xe.maxZoom||re===Ae)continue;var Se=1<<Ae-re;if(ve!==Math.floor(Te/Se)||be!==Math.floor(Re/Se))continue}else if(re===Xe.indexMaxZoom||Ut.numPoints<=Xe.indexMaxPoints)continue;if(Ut.source=null,0!==ce.length){ar>1&&console.time("clipping");var _e,De,sr,yr,dr,Pr,Ce=.5*Xe.buffer/Xe.extent,We=.5-Ce,qe=.5+Ce,or=1+Ce;_e=De=sr=yr=null,dr=Kt(ce,nr,ve-Ce,ve+qe,0,Ut.minX,Ut.maxX,Xe),Pr=Kt(ce,nr,ve+We,ve+or,0,Ut.minX,Ut.maxX,Xe),ce=null,dr&&(_e=Kt(dr,nr,be-Ce,be+qe,1,Ut.minY,Ut.maxY,Xe),De=Kt(dr,nr,be+We,be+or,1,Ut.minY,Ut.maxY,Xe),dr=null),Pr&&(sr=Kt(Pr,nr,be-Ce,be+qe,1,Ut.minY,Ut.maxY,Xe),yr=Kt(Pr,nr,be+We,be+or,1,Ut.minY,Ut.maxY,Xe),Pr=null),ar>1&&console.timeEnd("clipping"),Ie.push(_e||[],re+1,2*ve,2*be),Ie.push(De||[],re+1,2*ve,2*be+1),Ie.push(sr||[],re+1,2*ve+1,2*be),Ie.push(yr||[],re+1,2*ve+1,2*be+1)}}},Ge.prototype.getTile=function(ce,re,ve){var be=this.options,Ae=be.extent,Te=be.debug;if(ce<0||ce>24)return null;var Re=1<<ce,Ie=gr(ce,re=(re%Re+Re)%Re,ve);if(this.tiles[Ie])return Zt(this.tiles[Ie],Ae);Te>1&&console.log("drilling down to z%d-%d-%d",ce,re,ve);for(var cr,Xe=ce,ar=re,nr=ve;!cr&&Xe>0;)Xe--,ar=Math.floor(ar/2),nr=Math.floor(nr/2),cr=this.tiles[gr(Xe,ar,nr)];return cr&&cr.source?(Te>1&&console.log("found parent tile z%d-%d-%d",Xe,ar,nr),Te>1&&console.time("drilling down"),this.splitTile(cr.source,Xe,ar,nr,ce,re,ve),Te>1&&console.timeEnd("drilling down"),this.tiles[Ie]?Zt(this.tiles[Ie],Ae):null):null};var Ye=function(ce){function re(ve,be,Ae,Te){ce.call(this,ve,be,Ae,Ne),Te&&(this.loadGeoJSON=Te)}return ce&&(re.__proto__=ce),(re.prototype=Object.create(ce&&ce.prototype)).constructor=re,re.prototype.loadData=function(be,Ae){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ae,this._pendingLoadDataParams=be,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},re.prototype._loadData=function(){var be=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Ae=this._pendingCallback,Te=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Re=!!(Te&&Te.request&&Te.request.collectResourceTiming)&&new i.RequestPerformance(Te.request);this.loadGeoJSON(Te,function(Ie,Xe){if(Ie||!Xe)return Ae(Ie);if("object"!=typeof Xe)return Ae(new Error("Input data given to '"+Te.source+"' is not a valid GeoJSON object."));h(Xe,!0);try{be._geoJSONIndex=Te.cluster?new et(function xr(ce){var re=ce.superclusterOptions,ve=ce.clusterProperties;if(!ve||!re)return re;for(var be={},Ae={},Te={accumulated:null,zoom:0},Re={properties:null},Ie=Object.keys(ve),Xe=0,ar=Ie;Xe<ar.length;Xe+=1){var nr=ar[Xe],cr=ve[nr],Ut=cr[0],Se=i.createExpression(cr[1]),Ce=i.createExpression("string"==typeof Ut?[Ut,["accumulated"],["get",nr]]:Ut);be[nr]=Se.value,Ae[nr]=Ce.value}return re.map=function(We){Re.properties=We;for(var qe={},or=0,_e=Ie;or<_e.length;or+=1){var De=_e[or];qe[De]=be[De].evaluate(Te,Re)}return qe},re.reduce=function(We,qe){Re.properties=qe;for(var or=0,_e=Ie;or<_e.length;or+=1){var De=_e[or];Te.accumulated=We[De],We[De]=Ae[De].evaluate(Te,Re)}},re}(Te)).load(Xe.features):function Pe(ce,re){return new Ge(ce,re)}(Xe,Te.geojsonVtOptions)}catch(cr){return Ae(cr)}be.loaded={};var ar={};if(Re){var nr=Re.finish();nr&&(ar.resourceTiming={},ar.resourceTiming[Te.source]=JSON.parse(JSON.stringify(nr)))}Ae(null,ar)})}},re.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},re.prototype.reloadTile=function(be,Ae){var Te=this.loaded;return Te&&Te[be.uid]?ce.prototype.reloadTile.call(this,be,Ae):this.loadTile(be,Ae)},re.prototype.loadGeoJSON=function(be,Ae){if(be.request)i.getJSON(be.request,Ae);else{if("string"!=typeof be.data)return Ae(new Error("Input data given to '"+be.source+"' is not a valid GeoJSON object."));try{return Ae(null,JSON.parse(be.data))}catch(Te){return Ae(new Error("Input data given to '"+be.source+"' is not a valid GeoJSON object."))}}},re.prototype.removeSource=function(be,Ae){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ae()},re.prototype.getClusterExpansionZoom=function(be,Ae){try{Ae(null,this._geoJSONIndex.getClusterExpansionZoom(be.clusterId))}catch(Te){Ae(Te)}},re.prototype.getClusterChildren=function(be,Ae){try{Ae(null,this._geoJSONIndex.getChildren(be.clusterId))}catch(Te){Ae(Te)}},re.prototype.getClusterLeaves=function(be,Ae){try{Ae(null,this._geoJSONIndex.getLeaves(be.clusterId,be.limit,be.offset))}catch(Te){Ae(Te)}},re}(c);var rr=function(re){var ve=this;this.self=re,this.actor=new i.Actor(re,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:c,geojson:Ye},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(be,Ae){if(ve.workerSourceTypes[be])throw new Error('Worker source with name "'+be+'" already registered.');ve.workerSourceTypes[be]=Ae},this.self.registerRTLTextPlugin=function(be){if(i.plugin.isParsed())throw new Error("RTL text plugin already registered.");i.plugin.applyArabicShaping=be.applyArabicShaping,i.plugin.processBidirectionalText=be.processBidirectionalText,i.plugin.processStyledBidirectionalText=be.processStyledBidirectionalText}};return rr.prototype.setReferrer=function(re,ve){this.referrer=ve},rr.prototype.setImages=function(re,ve,be){for(var Ae in this.availableImages[re]=ve,this.workerSources[re]){var Te=this.workerSources[re][Ae];for(var Re in Te)Te[Re].availableImages=ve}be()},rr.prototype.setLayers=function(re,ve,be){this.getLayerIndex(re).replace(ve),be()},rr.prototype.updateLayers=function(re,ve,be){this.getLayerIndex(re).update(ve.layers,ve.removedIds),be()},rr.prototype.loadTile=function(re,ve,be){this.getWorkerSource(re,ve.type,ve.source).loadTile(ve,be)},rr.prototype.loadDEMTile=function(re,ve,be){this.getDEMWorkerSource(re,ve.source).loadTile(ve,be)},rr.prototype.reloadTile=function(re,ve,be){this.getWorkerSource(re,ve.type,ve.source).reloadTile(ve,be)},rr.prototype.abortTile=function(re,ve,be){this.getWorkerSource(re,ve.type,ve.source).abortTile(ve,be)},rr.prototype.removeTile=function(re,ve,be){this.getWorkerSource(re,ve.type,ve.source).removeTile(ve,be)},rr.prototype.removeDEMTile=function(re,ve){this.getDEMWorkerSource(re,ve.source).removeTile(ve)},rr.prototype.removeSource=function(re,ve,be){if(this.workerSources[re]&&this.workerSources[re][ve.type]&&this.workerSources[re][ve.type][ve.source]){var Ae=this.workerSources[re][ve.type][ve.source];delete this.workerSources[re][ve.type][ve.source],void 0!==Ae.removeSource?Ae.removeSource(ve,be):be()}},rr.prototype.loadWorkerSource=function(re,ve,be){try{this.self.importScripts(ve.url),be()}catch(Ae){be(Ae.toString())}},rr.prototype.syncRTLPluginState=function(re,ve,be){try{i.plugin.setState(ve);var Ae=i.plugin.getPluginURL();if(i.plugin.isLoaded()&&!i.plugin.isParsed()&&null!=Ae){this.self.importScripts(Ae);var Te=i.plugin.isParsed();be(Te?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ae),Te)}}catch(Ie){be(Ie.toString())}},rr.prototype.getAvailableImages=function(re){var ve=this.availableImages[re];return ve||(ve=[]),ve},rr.prototype.getLayerIndex=function(re){var ve=this.layerIndexes[re];return ve||(ve=this.layerIndexes[re]=new y),ve},rr.prototype.getWorkerSource=function(re,ve,be){var Ae=this;return this.workerSources[re]||(this.workerSources[re]={}),this.workerSources[re][ve]||(this.workerSources[re][ve]={}),this.workerSources[re][ve][be]||(this.workerSources[re][ve][be]=new this.workerSourceTypes[ve]({send:function(Re,Ie,Xe){Ae.actor.send(Re,Ie,Xe,re)}},this.getLayerIndex(re),this.getAvailableImages(re))),this.workerSources[re][ve][be]},rr.prototype.getDEMWorkerSource=function(re,ve){return this.demWorkerSources[re]||(this.demWorkerSources[re]={}),this.demWorkerSources[re][ve]||(this.demWorkerSources[re][ve]=new m),this.demWorkerSources[re][ve]},rr.prototype.enforceCacheSizeLimit=function(re,ve){i.enforceCacheSizeLimit(ve)},"undefined"!=typeof WorkerGlobalScope&&void 0!==i.window&&i.window instanceof WorkerGlobalScope&&(i.window.worker=new rr(i.window)),rr}),g(0,function(i){var P=i.createCommonjsModule(function(lt){function Y(Ur){return!ht(Ur)}function ht(Ur){return function _(){return"undefined"!=typeof window&&"undefined"!=typeof document}()?function vt(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}()?function Ct(){return Function.prototype&&Function.prototype.bind}()?function Yt(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}()?function ae(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}()?function ge(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var cn,Cn,Ur=new Blob([""],{type:"text/javascript"}),Kr=URL.createObjectURL(Ur);try{Cn=new Worker(Kr),cn=!0}catch(Rn){cn=!1}return Cn&&Cn.terminate(),URL.revokeObjectURL(Kr),cn}()?function ze(){return"Uint8ClampedArray"in window}()?function Je(){return ArrayBuffer.isView}()?function ur(){var Ur=document.createElement("canvas");Ur.width=Ur.height=1;var Kr=Ur.getContext("2d");if(!Kr)return!1;var cn=Kr.getImageData(0,0,1,1);return cn&&cn.width===Ur.width}()?function Ir(Ur){return void 0===mr[Ur]&&(mr[Ur]=function Yr(Ur){var Kr=function Gr(Ur){var Kr=document.createElement("canvas"),cn=Object.create(Y.webGLContextAttributes);return cn.failIfMajorPerformanceCaveat=Ur,Kr.probablySupportsContext?Kr.probablySupportsContext("webgl",cn)||Kr.probablySupportsContext("experimental-webgl",cn):Kr.supportsContext?Kr.supportsContext("webgl",cn)||Kr.supportsContext("experimental-webgl",cn):Kr.getContext("webgl",cn)||Kr.getContext("experimental-webgl",cn)}(Ur);if(!Kr)return!1;var cn=Kr.createShader(Kr.VERTEX_SHADER);return!(!cn||Kr.isContextLost())&&(Kr.shaderSource(cn,"void main() {}"),Kr.compileShader(cn),!0===Kr.getShaderParameter(cn,Kr.COMPILE_STATUS))}(Ur)),mr[Ur]}(Ur&&Ur.failIfMajorPerformanceCaveat)?void 0:"insufficient WebGL support":"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser"}lt.exports?lt.exports=Y:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=Y,window.mapboxgl.notSupportedReason=ht);var mr={};Y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),C={create:function(lt,Y,ht){var _=i.window.document.createElement(lt);return void 0!==Y&&(_.className=Y),ht&&ht.appendChild(_),_},createNS:function(lt,Y){return i.window.document.createElementNS(lt,Y)}},u=i.window.document.documentElement.style;function y(lt){if(!u)return lt[0];for(var Y=0;Y<lt.length;Y++)if(lt[Y]in u)return lt[Y];return lt[0]}var r,e=y(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);C.disableDrag=function(){u&&e&&(r=u[e],u[e]="none")},C.enableDrag=function(){u&&e&&(u[e]=r)};var l=y(["transform","WebkitTransform"]);C.setTransform=function(lt,Y){lt.style[l]=Y};var a=!1;try{var s=Object.defineProperty({},"passive",{get:function(){a=!0}});i.window.addEventListener("test",s,s),i.window.removeEventListener("test",s,s)}catch(lt){a=!1}C.addEventListener=function(lt,Y,ht,_){void 0===_&&(_={}),lt.addEventListener(Y,ht,"passive"in _&&a?_:_.capture)},C.removeEventListener=function(lt,Y,ht,_){void 0===_&&(_={}),lt.removeEventListener(Y,ht,"passive"in _&&a?_:_.capture)};var c=function(lt){lt.preventDefault(),lt.stopPropagation(),i.window.removeEventListener("click",c,!0)};function m(lt){var Y=lt.userImage;return!!(Y&&Y.render&&Y.render())&&(lt.data.replace(new Uint8Array(Y.data.buffer)),!0)}C.suppressClick=function(){i.window.addEventListener("click",c,!0),i.window.setTimeout(function(){i.window.removeEventListener("click",c,!0)},0)},C.mousePos=function(lt,Y){var ht=lt.getBoundingClientRect();return new i.Point(Y.clientX-ht.left-lt.clientLeft,Y.clientY-ht.top-lt.clientTop)},C.touchPos=function(lt,Y){for(var ht=lt.getBoundingClientRect(),_=[],vt=0;vt<Y.length;vt++)_.push(new i.Point(Y[vt].clientX-ht.left-lt.clientLeft,Y[vt].clientY-ht.top-lt.clientTop));return _},C.mouseButton=function(lt){return void 0!==i.window.InstallTrigger&&2===lt.button&&lt.ctrlKey&&i.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:lt.button},C.remove=function(lt){lt.parentNode&&lt.parentNode.removeChild(lt)};var w=function(lt){function Y(){lt.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new i.RGBAImage({width:1,height:1}),this.dirty=!0}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.isLoaded=function(){return this.loaded},Y.prototype.setLoaded=function(_){if(this.loaded!==_&&(this.loaded=_,_)){for(var vt=0,Ct=this.requestors;vt<Ct.length;vt+=1){var Yt=Ct[vt];this._notify(Yt.ids,Yt.callback)}this.requestors=[]}},Y.prototype.getImage=function(_){return this.images[_]},Y.prototype.addImage=function(_,vt){this._validate(_,vt)&&(this.images[_]=vt)},Y.prototype._validate=function(_,vt){var Ct=!0;return this._validateStretch(vt.stretchX,vt.data&&vt.data.width)||(this.fire(new i.ErrorEvent(new Error('Image "'+_+'" has invalid "stretchX" value'))),Ct=!1),this._validateStretch(vt.stretchY,vt.data&&vt.data.height)||(this.fire(new i.ErrorEvent(new Error('Image "'+_+'" has invalid "stretchY" value'))),Ct=!1),this._validateContent(vt.content,vt)||(this.fire(new i.ErrorEvent(new Error('Image "'+_+'" has invalid "content" value'))),Ct=!1),Ct},Y.prototype._validateStretch=function(_,vt){if(!_)return!0;for(var Ct=0,Yt=0,ae=_;Yt<ae.length;Yt+=1){var ge=ae[Yt];if(ge[0]<Ct||ge[1]<ge[0]||vt<ge[1])return!1;Ct=ge[1]}return!0},Y.prototype._validateContent=function(_,vt){return!_||!(4!==_.length||_[0]<0||vt.data.width<_[0]||_[1]<0||vt.data.height<_[1]||_[2]<0||vt.data.width<_[2]||_[3]<0||vt.data.height<_[3]||_[2]<_[0]||_[3]<_[1])},Y.prototype.updateImage=function(_,vt){vt.version=this.images[_].version+1,this.images[_]=vt,this.updatedImages[_]=!0},Y.prototype.removeImage=function(_){var vt=this.images[_];delete this.images[_],delete this.patterns[_],vt.userImage&&vt.userImage.onRemove&&vt.userImage.onRemove()},Y.prototype.listImages=function(){return Object.keys(this.images)},Y.prototype.getImages=function(_,vt){var Ct=!0;if(!this.isLoaded())for(var Yt=0,ae=_;Yt<ae.length;Yt+=1)this.images[ae[Yt]]||(Ct=!1);this.isLoaded()||Ct?this._notify(_,vt):this.requestors.push({ids:_,callback:vt})},Y.prototype._notify=function(_,vt){for(var Ct={},Yt=0,ae=_;Yt<ae.length;Yt+=1){var ge=ae[Yt];this.images[ge]||this.fire(new i.Event("styleimagemissing",{id:ge}));var ze=this.images[ge];ze?Ct[ge]={data:ze.data.clone(),pixelRatio:ze.pixelRatio,sdf:ze.sdf,version:ze.version,stretchX:ze.stretchX,stretchY:ze.stretchY,content:ze.content,hasRenderCallback:Boolean(ze.userImage&&ze.userImage.render)}:i.warnOnce('Image "'+ge+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}vt(null,Ct)},Y.prototype.getPixelSize=function(){var _=this.atlasImage;return{width:_.width,height:_.height}},Y.prototype.getPattern=function(_){var vt=this.patterns[_],Ct=this.getImage(_);if(!Ct)return null;if(vt&&vt.position.version===Ct.version)return vt.position;if(vt)vt.position.version=Ct.version;else{var ge={w:Ct.data.width+2,h:Ct.data.height+2,x:0,y:0},ze=new i.ImagePosition(ge,Ct);this.patterns[_]={bin:ge,position:ze}}return this._updatePatternAtlas(),this.patterns[_].position},Y.prototype.bind=function(_){var vt=_.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new i.Texture(_,this.atlasImage,vt.RGBA),this.atlasTexture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE)},Y.prototype._updatePatternAtlas=function(){var _=[];for(var vt in this.patterns)_.push(this.patterns[vt].bin);var Ct=i.potpack(_),Yt=Ct.w,ae=Ct.h,ge=this.atlasImage;for(var ze in ge.resize({width:Yt||1,height:ae||1}),this.patterns){var ur=this.patterns[ze].bin,mr=ur.x+1,Ir=ur.y+1,Gr=this.images[ze].data,Yr=Gr.width,Ur=Gr.height;i.RGBAImage.copy(Gr,ge,{x:0,y:0},{x:mr,y:Ir},{width:Yr,height:Ur}),i.RGBAImage.copy(Gr,ge,{x:0,y:Ur-1},{x:mr,y:Ir-1},{width:Yr,height:1}),i.RGBAImage.copy(Gr,ge,{x:0,y:0},{x:mr,y:Ir+Ur},{width:Yr,height:1}),i.RGBAImage.copy(Gr,ge,{x:Yr-1,y:0},{x:mr-1,y:Ir},{width:1,height:Ur}),i.RGBAImage.copy(Gr,ge,{x:0,y:0},{x:mr+Yr,y:Ir},{width:1,height:Ur})}this.dirty=!0},Y.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},Y.prototype.dispatchRenderCallbacks=function(_){for(var vt=0,Ct=_;vt<Ct.length;vt+=1){var Yt=Ct[vt];if(!this.callbackDispatchedThisFrame[Yt]){this.callbackDispatchedThisFrame[Yt]=!0;var ae=this.images[Yt];m(ae)&&this.updateImage(Yt,ae)}}},Y}(i.Evented);var o=b,v=b,M=1e20;function b(lt,Y,ht,_,vt,Ct){this.fontSize=lt||24,this.buffer=void 0===Y?3:Y,this.cutoff=_||.25,this.fontFamily=vt||"sans-serif",this.fontWeight=Ct||"normal",this.radius=ht||8;var Yt=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Yt,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Yt*Yt),this.gridInner=new Float64Array(Yt*Yt),this.f=new Float64Array(Yt),this.d=new Float64Array(Yt),this.z=new Float64Array(Yt+1),this.v=new Int16Array(Yt),this.middle=Math.round(Yt/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function L(lt,Y,ht,_,vt,Ct,Yt){for(var ae=0;ae<Y;ae++){for(var ge=0;ge<ht;ge++)_[ge]=lt[ge*Y+ae];for(x(_,vt,Ct,Yt,ht),ge=0;ge<ht;ge++)lt[ge*Y+ae]=vt[ge]}for(ge=0;ge<ht;ge++){for(ae=0;ae<Y;ae++)_[ae]=lt[ge*Y+ae];for(x(_,vt,Ct,Yt,Y),ae=0;ae<Y;ae++)lt[ge*Y+ae]=Math.sqrt(vt[ae])}}function x(lt,Y,ht,_,vt){ht[0]=0,_[0]=-M,_[1]=+M;for(var Ct=1,Yt=0;Ct<vt;Ct++){for(var ae=(lt[Ct]+Ct*Ct-(lt[ht[Yt]]+ht[Yt]*ht[Yt]))/(2*Ct-2*ht[Yt]);ae<=_[Yt];)Yt--,ae=(lt[Ct]+Ct*Ct-(lt[ht[Yt]]+ht[Yt]*ht[Yt]))/(2*Ct-2*ht[Yt]);ht[++Yt]=Ct,_[Yt]=ae,_[Yt+1]=+M}for(Ct=0,Yt=0;Ct<vt;Ct++){for(;_[Yt+1]<Ct;)Yt++;Y[Ct]=(Ct-ht[Yt])*(Ct-ht[Yt])+lt[ht[Yt]]}}b.prototype.draw=function(lt){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(lt,this.buffer,this.middle);for(var Y=this.ctx.getImageData(0,0,this.size,this.size),ht=new Uint8ClampedArray(this.size*this.size),_=0;_<this.size*this.size;_++){var vt=Y.data[4*_+3]/255;this.gridOuter[_]=1===vt?0:0===vt?M:Math.pow(Math.max(0,.5-vt),2),this.gridInner[_]=1===vt?M:0===vt?0:Math.pow(Math.max(0,vt-.5),2)}for(L(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),L(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),_=0;_<this.size*this.size;_++)ht[_]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[_]-this.gridInner[_])/this.radius+this.cutoff))));return ht},o.default=v;var S=function(Y,ht){this.requestManager=Y,this.localIdeographFontFamily=ht,this.entries={}};S.prototype.setURL=function(Y){this.url=Y},S.prototype.getGlyphs=function(Y,ht){var _=this,vt=[];for(var Ct in Y)for(var Yt=0,ae=Y[Ct];Yt<ae.length;Yt+=1)vt.push({stack:Ct,id:ae[Yt]});i.asyncAll(vt,function(ze,Je){var ur=ze.stack,mr=ze.id,Ir=_.entries[ur];Ir||(Ir=_.entries[ur]={glyphs:{},requests:{},ranges:{}});var Gr=Ir.glyphs[mr];if(void 0===Gr){if(Gr=_._tinySDF(Ir,ur,mr))return Ir.glyphs[mr]=Gr,void Je(null,{stack:ur,id:mr,glyph:Gr});var Yr=Math.floor(mr/256);if(256*Yr>65535)Je(new Error("glyphs > 65535 not supported"));else if(Ir.ranges[Yr])Je(null,{stack:ur,id:mr,glyph:Gr});else{var Ur=Ir.requests[Yr];Ur||(Ur=Ir.requests[Yr]=[],S.loadGlyphRange(ur,Yr,_.url,_.requestManager,function(Kr,cn){if(cn){for(var Cn in cn)_._doesCharSupportLocalGlyph(+Cn)||(Ir.glyphs[+Cn]=cn[+Cn]);Ir.ranges[Yr]=!0}for(var Rn=0,Un=Ur;Rn<Un.length;Rn+=1)(0,Un[Rn])(Kr,cn);delete Ir.requests[Yr]})),Ur.push(function(Kr,cn){Kr?Je(Kr):cn&&Je(null,{stack:ur,id:mr,glyph:cn[mr]||null})})}}else Je(null,{stack:ur,id:mr,glyph:Gr})},function(ze,Je){if(ze)ht(ze);else if(Je){for(var ur={},mr=0,Ir=Je;mr<Ir.length;mr+=1){var Gr=Ir[mr],Yr=Gr.stack,Ur=Gr.id,Kr=Gr.glyph;(ur[Yr]||(ur[Yr]={}))[Ur]=Kr&&{id:Kr.id,bitmap:Kr.bitmap.clone(),metrics:Kr.metrics}}ht(null,ur)}})},S.prototype._doesCharSupportLocalGlyph=function(Y){return!!this.localIdeographFontFamily&&(i.isChar["CJK Unified Ideographs"](Y)||i.isChar["Hangul Syllables"](Y)||i.isChar.Hiragana(Y)||i.isChar.Katakana(Y))},S.prototype._tinySDF=function(Y,ht,_){var vt=this.localIdeographFontFamily;if(vt&&this._doesCharSupportLocalGlyph(_)){var Ct=Y.tinySDF;if(!Ct){var Yt="400";/bold/i.test(ht)?Yt="900":/medium/i.test(ht)?Yt="500":/light/i.test(ht)&&(Yt="200"),Ct=Y.tinySDF=new S.TinySDF(24,3,8,.25,vt,Yt)}return{id:_,bitmap:new i.AlphaImage({width:30,height:30},Ct.draw(String.fromCharCode(_))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},S.loadGlyphRange=function p(lt,Y,ht,_,vt){var Ct=256*Y,Yt=Ct+255,ae=_.transformRequest(_.normalizeGlyphsURL(ht).replace("{fontstack}",lt).replace("{range}",Ct+"-"+Yt),i.ResourceType.Glyphs);i.getArrayBuffer(ae,function(ge,ze){if(ge)vt(ge);else if(ze){for(var Je={},ur=0,mr=i.parseGlyphPBF(ze);ur<mr.length;ur+=1){var Ir=mr[ur];Je[Ir.id]=Ir}vt(null,Je)}})},S.TinySDF=o;var T=function(){this.specification=i.styleSpec.light.position};T.prototype.possiblyEvaluate=function(Y,ht){return i.sphericalToCartesian(Y.expression.evaluate(ht))},T.prototype.interpolate=function(Y,ht,_){return{x:i.number(Y.x,ht.x,_),y:i.number(Y.y,ht.y,_),z:i.number(Y.z,ht.z,_)}};var n=new i.Properties({anchor:new i.DataConstantProperty(i.styleSpec.light.anchor),position:new T,color:new i.DataConstantProperty(i.styleSpec.light.color),intensity:new i.DataConstantProperty(i.styleSpec.light.intensity)}),E="-transition",d=function(lt){function Y(ht){lt.call(this),this._transitionable=new i.Transitionable(n),this.setLight(ht),this._transitioning=this._transitionable.untransitioned()}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getLight=function(){return this._transitionable.serialize()},Y.prototype.setLight=function(_,vt){if(void 0===vt&&(vt={}),!this._validate(i.validateLight,_,vt))for(var Ct in _){var Yt=_[Ct];i.endsWith(Ct,E)?this._transitionable.setTransition(Ct.slice(0,-E.length),Yt):this._transitionable.setValue(Ct,Yt)}},Y.prototype.updateTransitions=function(_){this._transitioning=this._transitionable.transitioned(_,this._transitioning)},Y.prototype.hasTransition=function(){return this._transitioning.hasTransition()},Y.prototype.recalculate=function(_){this.properties=this._transitioning.possiblyEvaluate(_)},Y.prototype._validate=function(_,vt,Ct){return(!Ct||!1!==Ct.validate)&&i.emitValidationErrors(this,_.call(i.validateStyle,i.extend({value:vt,style:{glyphs:!0,sprite:!0},styleSpec:i.styleSpec})))},Y}(i.Evented),F=function(Y,ht){this.width=Y,this.height=ht,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};F.prototype.getDash=function(Y,ht){var _=Y.join(",")+String(ht);return this.dashEntry[_]||(this.dashEntry[_]=this.addDash(Y,ht)),this.dashEntry[_]},F.prototype.getDashRanges=function(Y,ht,_){var Ct=[],Yt=Y.length%2==1?-Y[Y.length-1]*_:0,ae=Y[0]*_,ge=!0;Ct.push({left:Yt,right:ae,isDash:ge,zeroLength:0===Y[0]});for(var ze=Y[0],Je=1;Je<Y.length;Je++){var ur=Y[Je];Ct.push({left:Yt=ze*_,right:ae=(ze+=ur)*_,isDash:ge=!ge,zeroLength:0===ur})}return Ct},F.prototype.addRoundDash=function(Y,ht,_){for(var vt=ht/2,Ct=-_;Ct<=_;Ct++)for(var ae=this.width*(this.nextRow+_+Ct),ge=0,ze=Y[ge],Je=0;Je<this.width;Je++){Je/ze.right>1&&(ze=Y[++ge]);var ur=Math.abs(Je-ze.left),mr=Math.abs(Je-ze.right),Ir=Math.min(ur,mr),Gr=void 0,Yr=Ct/_*(vt+1);if(ze.isDash){var Ur=vt-Math.abs(Yr);Gr=Math.sqrt(Ir*Ir+Ur*Ur)}else Gr=vt-Math.sqrt(Ir*Ir+Yr*Yr);this.data[ae+Je]=Math.max(0,Math.min(255,Gr+128))}},F.prototype.addRegularDash=function(Y){for(var ht=Y.length-1;ht>=0;--ht){var _=Y[ht],vt=Y[ht+1];_.zeroLength?Y.splice(ht,1):vt&&vt.isDash===_.isDash&&(vt.left=_.left,Y.splice(ht,1))}var Ct=Y[0],Yt=Y[Y.length-1];Ct.isDash===Yt.isDash&&(Ct.left=Yt.left-this.width,Yt.right=Ct.right+this.width);for(var ae=this.width*this.nextRow,ge=0,ze=Y[ge],Je=0;Je<this.width;Je++){Je/ze.right>1&&(ze=Y[++ge]);var ur=Math.abs(Je-ze.left),mr=Math.abs(Je-ze.right),Ir=Math.min(ur,mr);this.data[ae+Je]=Math.max(0,Math.min(255,(ze.isDash?Ir:-Ir)+128))}},F.prototype.addDash=function(Y,ht){var _=ht?7:0,vt=2*_+1;if(this.nextRow+vt>this.height)return i.warnOnce("LineAtlas out of space"),null;for(var Ct=0,Yt=0;Yt<Y.length;Yt++)Ct+=Y[Yt];if(0!==Ct){var ae=this.width/Ct,ge=this.getDashRanges(Y,this.width,ae);ht?this.addRoundDash(ge,ae,_):this.addRegularDash(ge)}var ze={y:(this.nextRow+_+.5)/this.height,height:2*_/this.height,width:Ct};return this.nextRow+=vt,this.dirty=!0,ze},F.prototype.bind=function(Y){var ht=Y.gl;this.texture?(ht.bindTexture(ht.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,ht.texSubImage2D(ht.TEXTURE_2D,0,0,0,this.width,this.height,ht.ALPHA,ht.UNSIGNED_BYTE,this.data))):(this.texture=ht.createTexture(),ht.bindTexture(ht.TEXTURE_2D,this.texture),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_WRAP_S,ht.REPEAT),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_WRAP_T,ht.REPEAT),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_MIN_FILTER,ht.LINEAR),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_MAG_FILTER,ht.LINEAR),ht.texImage2D(ht.TEXTURE_2D,0,ht.ALPHA,this.width,this.height,0,ht.ALPHA,ht.UNSIGNED_BYTE,this.data))};var D=function lt(Y,ht){this.workerPool=Y,this.actors=[],this.currentActor=0,this.id=i.uniqueId();for(var _=this.workerPool.acquire(this.id),vt=0;vt<_.length;vt++){var Yt=new lt.Actor(_[vt],ht,this.id);Yt.name="Worker "+vt,this.actors.push(Yt)}};function N(lt,Y,ht){var _=function(vt,Ct){if(vt)return ht(vt);if(Ct){var Yt=i.pick(i.extend(Ct,lt),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Ct.vector_layers&&(Yt.vectorLayers=Ct.vector_layers,Yt.vectorLayerIds=Yt.vectorLayers.map(function(ae){return ae.id})),Yt.tiles=Y.canonicalizeTileset(Yt,lt.url),ht(null,Yt)}};return lt.url?i.getJSON(Y.transformRequest(Y.normalizeSourceURL(lt.url),i.ResourceType.Source),_):i.browser.frame(function(){return _(null,lt)})}D.prototype.broadcast=function(Y,ht,_){i.asyncAll(this.actors,function(vt,Ct){vt.send(Y,ht,Ct)},_=_||function(){})},D.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},D.prototype.remove=function(){this.actors.forEach(function(Y){Y.remove()}),this.actors=[],this.workerPool.release(this.id)},D.Actor=i.Actor;var k=function(Y,ht,_){this.bounds=i.LngLatBounds.convert(this.validateBounds(Y)),this.minzoom=ht||0,this.maxzoom=_||24};k.prototype.validateBounds=function(Y){return Array.isArray(Y)&&4===Y.length?[Math.max(-180,Y[0]),Math.max(-90,Y[1]),Math.min(180,Y[2]),Math.min(90,Y[3])]:[-180,-90,180,90]},k.prototype.contains=function(Y){var ht=Math.pow(2,Y.z),__minX=Math.floor(i.mercatorXfromLng(this.bounds.getWest())*ht),__minY=Math.floor(i.mercatorYfromLat(this.bounds.getNorth())*ht),__maxX=Math.ceil(i.mercatorXfromLng(this.bounds.getEast())*ht),__maxY=Math.ceil(i.mercatorYfromLat(this.bounds.getSouth())*ht);return Y.x>=__minX&&Y.x<__maxX&&Y.y>=__minY&&Y.y<__maxY};var O=function(lt){function Y(ht,_,vt,Ct){if(lt.call(this),this.id=ht,this.dispatcher=vt,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.extend(this,i.pick(_,["url","scheme","tileSize","promoteId"])),this._options=i.extend({type:"vector"},_),this._collectResourceTiming=_.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Ct)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.load=function(){var _=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=N(this._options,this.map._requestManager,function(vt,Ct){_._tileJSONRequest=null,_._loaded=!0,vt?_.fire(new i.ErrorEvent(vt)):Ct&&(i.extend(_,Ct),Ct.bounds&&(_.tileBounds=new k(Ct.bounds,_.minzoom,_.maxzoom)),i.postTurnstileEvent(Ct.tiles,_.map._requestManager._customAccessToken),i.postMapLoadEvent(Ct.tiles,_.map._getMapId(),_.map._requestManager._skuToken,_.map._requestManager._customAccessToken),_.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),_.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.hasTile=function(_){return!this.tileBounds||this.tileBounds.contains(_.canonical)},Y.prototype.onAdd=function(_){this.map=_,this.load()},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return i.extend({},this._options)},Y.prototype.loadTile=function(_,vt){var Ct=this.map._requestManager.normalizeTileURL(_.tileID.canonical.url(this.tiles,this.scheme)),Yt={request:this.map._requestManager.transformRequest(Ct,i.ResourceType.Tile),uid:_.uid,tileID:_.tileID,zoom:_.tileID.overscaledZ,tileSize:this.tileSize*_.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:i.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function ae(ge,ze){return delete _.request,_.aborted?vt(null):ge&&404!==ge.status?vt(ge):(ze&&ze.resourceTiming&&(_.resourceTiming=ze.resourceTiming),this.map._refreshExpiredTiles&&ze&&_.setExpiryData(ze),_.loadVectorData(ze,this.map.painter),i.cacheEntryPossiblyAdded(this.dispatcher),vt(null),void(_.reloadCallback&&(this.loadTile(_,_.reloadCallback),_.reloadCallback=null)))}Yt.request.collectResourceTiming=this._collectResourceTiming,_.actor&&"expired"!==_.state?"loading"===_.state?_.reloadCallback=vt:_.request=_.actor.send("reloadTile",Yt,ae.bind(this)):(_.actor=this.dispatcher.getActor(),_.request=_.actor.send("loadTile",Yt,ae.bind(this)))},Y.prototype.abortTile=function(_){_.request&&(_.request.cancel(),delete _.request),_.actor&&_.actor.send("abortTile",{uid:_.uid,type:this.type,source:this.id},void 0)},Y.prototype.unloadTile=function(_){_.unloadVectorData(),_.actor&&_.actor.send("removeTile",{uid:_.uid,type:this.type,source:this.id},void 0)},Y.prototype.hasTransition=function(){return!1},Y}(i.Evented),B=function(lt){function Y(ht,_,vt,Ct){lt.call(this),this.id=ht,this.dispatcher=vt,this.setEventedParent(Ct),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.extend({type:"raster"},_),i.extend(this,i.pick(_,["url","scheme","tileSize"]))}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.load=function(){var _=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=N(this._options,this.map._requestManager,function(vt,Ct){_._tileJSONRequest=null,_._loaded=!0,vt?_.fire(new i.ErrorEvent(vt)):Ct&&(i.extend(_,Ct),Ct.bounds&&(_.tileBounds=new k(Ct.bounds,_.minzoom,_.maxzoom)),i.postTurnstileEvent(Ct.tiles),i.postMapLoadEvent(Ct.tiles,_.map._getMapId(),_.map._requestManager._skuToken),_.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),_.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.onAdd=function(_){this.map=_,this.load()},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return i.extend({},this._options)},Y.prototype.hasTile=function(_){return!this.tileBounds||this.tileBounds.contains(_.canonical)},Y.prototype.loadTile=function(_,vt){var Ct=this,Yt=this.map._requestManager.normalizeTileURL(_.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);_.request=i.getImage(this.map._requestManager.transformRequest(Yt,i.ResourceType.Tile),function(ae,ge){if(delete _.request,_.aborted)_.state="unloaded",vt(null);else if(ae)_.state="errored",vt(ae);else if(ge){Ct.map._refreshExpiredTiles&&_.setExpiryData(ge),delete ge.cacheControl,delete ge.expires;var ze=Ct.map.painter.context,Je=ze.gl;_.texture=Ct.map.painter.getTileTexture(ge.width),_.texture?_.texture.update(ge,{useMipmap:!0}):(_.texture=new i.Texture(ze,ge,Je.RGBA,{useMipmap:!0}),_.texture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE,Je.LINEAR_MIPMAP_NEAREST),ze.extTextureFilterAnisotropic&&Je.texParameterf(Je.TEXTURE_2D,ze.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ze.extTextureFilterAnisotropicMax)),_.state="loaded",i.cacheEntryPossiblyAdded(Ct.dispatcher),vt(null)}})},Y.prototype.abortTile=function(_,vt){_.request&&(_.request.cancel(),delete _.request),vt()},Y.prototype.unloadTile=function(_,vt){_.texture&&this.map.painter.saveTileTexture(_.texture),vt()},Y.prototype.hasTransition=function(){return!1},Y}(i.Evented),z=function(lt){function Y(ht,_,vt,Ct){lt.call(this,ht,_,vt,Ct),this.type="raster-dem",this.maxzoom=22,this._options=i.extend({type:"raster-dem"},_),this.encoding=_.encoding||"mapbox"}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},Y.prototype.loadTile=function(_,vt){var Ct=this.map._requestManager.normalizeTileURL(_.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function ae(ge,ze){ge&&(_.state="errored",vt(ge)),ze&&(_.dem=ze,_.needsHillshadePrepare=!0,_.state="loaded",vt(null))}_.request=i.getImage(this.map._requestManager.transformRequest(Ct,i.ResourceType.Tile),function Yt(ge,ze){if(delete _.request,_.aborted)_.state="unloaded",vt(null);else if(ge)_.state="errored",vt(ge);else if(ze){this.map._refreshExpiredTiles&&_.setExpiryData(ze),delete ze.cacheControl,delete ze.expires;var ur=i.window.ImageBitmap&&ze instanceof i.window.ImageBitmap&&i.offscreenCanvasSupported()?ze:i.browser.getImageData(ze,1),mr={uid:_.uid,coord:_.tileID,source:this.id,rawImageData:ur,encoding:this.encoding};(!_.actor||"expired"===_.state)&&(_.actor=this.dispatcher.getActor(),_.actor.send("loadDEMTile",mr,ae.bind(this)))}}.bind(this)),_.neighboringTiles=this._getNeighboringTiles(_.tileID)},Y.prototype._getNeighboringTiles=function(_){var vt=_.canonical,Ct=Math.pow(2,vt.z),Yt=(vt.x-1+Ct)%Ct,ae=0===vt.x?_.wrap-1:_.wrap,ge=(vt.x+1+Ct)%Ct,ze=vt.x+1===Ct?_.wrap+1:_.wrap,Je={};return Je[new i.OverscaledTileID(_.overscaledZ,ae,vt.z,Yt,vt.y).key]={backfilled:!1},Je[new i.OverscaledTileID(_.overscaledZ,ze,vt.z,ge,vt.y).key]={backfilled:!1},vt.y>0&&(Je[new i.OverscaledTileID(_.overscaledZ,ae,vt.z,Yt,vt.y-1).key]={backfilled:!1},Je[new i.OverscaledTileID(_.overscaledZ,_.wrap,vt.z,vt.x,vt.y-1).key]={backfilled:!1},Je[new i.OverscaledTileID(_.overscaledZ,ze,vt.z,ge,vt.y-1).key]={backfilled:!1}),vt.y+1<Ct&&(Je[new i.OverscaledTileID(_.overscaledZ,ae,vt.z,Yt,vt.y+1).key]={backfilled:!1},Je[new i.OverscaledTileID(_.overscaledZ,_.wrap,vt.z,vt.x,vt.y+1).key]={backfilled:!1},Je[new i.OverscaledTileID(_.overscaledZ,ze,vt.z,ge,vt.y+1).key]={backfilled:!1}),Je},Y.prototype.unloadTile=function(_){_.demTexture&&this.map.painter.saveTileTexture(_.demTexture),_.fbo&&(_.fbo.destroy(),delete _.fbo),_.dem&&delete _.dem,delete _.neighboringTiles,_.state="unloaded",_.actor&&_.actor.send("removeDEMTile",{uid:_.uid,source:this.id})},Y}(B),U=function(lt){function Y(ht,_,vt,Ct){lt.call(this),this.id=ht,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=vt.getActor(),this.setEventedParent(Ct),this._data=_.data,this._options=i.extend({},_),this._collectResourceTiming=_.collectResourceTiming,this._resourceTiming=[],void 0!==_.maxzoom&&(this.maxzoom=_.maxzoom),_.type&&(this.type=_.type),_.attribution&&(this.attribution=_.attribution),this.promoteId=_.promoteId;var Yt=i.EXTENT/this.tileSize;this.workerOptions=i.extend({source:this.id,cluster:_.cluster||!1,geojsonVtOptions:{buffer:(void 0!==_.buffer?_.buffer:128)*Yt,tolerance:(void 0!==_.tolerance?_.tolerance:.375)*Yt,extent:i.EXTENT,maxZoom:this.maxzoom,lineMetrics:_.lineMetrics||!1,generateId:_.generateId||!1},superclusterOptions:{maxZoom:void 0!==_.clusterMaxZoom?Math.min(_.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:i.EXTENT,radius:(_.clusterRadius||50)*Yt,log:!1,generateId:_.generateId||!1},clusterProperties:_.clusterProperties},_.workerOptions)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.load=function(){var _=this;this.fire(new i.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(vt){if(vt)_.fire(new i.ErrorEvent(vt));else{var Ct={dataType:"source",sourceDataType:"metadata"};_._collectResourceTiming&&_._resourceTiming&&_._resourceTiming.length>0&&(Ct.resourceTiming=_._resourceTiming,_._resourceTiming=[]),_.fire(new i.Event("data",Ct))}})},Y.prototype.onAdd=function(_){this.map=_,this.load()},Y.prototype.setData=function(_){var vt=this;return this._data=_,this.fire(new i.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Ct){if(Ct)vt.fire(new i.ErrorEvent(Ct));else{var Yt={dataType:"source",sourceDataType:"content"};vt._collectResourceTiming&&vt._resourceTiming&&vt._resourceTiming.length>0&&(Yt.resourceTiming=vt._resourceTiming,vt._resourceTiming=[]),vt.fire(new i.Event("data",Yt))}}),this},Y.prototype.getClusterExpansionZoom=function(_,vt){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:_,source:this.id},vt),this},Y.prototype.getClusterChildren=function(_,vt){return this.actor.send("geojson.getClusterChildren",{clusterId:_,source:this.id},vt),this},Y.prototype.getClusterLeaves=function(_,vt,Ct,Yt){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:_,limit:vt,offset:Ct},Yt),this},Y.prototype._updateWorkerData=function(_){var vt=this;this._loaded=!1;var Ct=i.extend({},this.workerOptions),Yt=this._data;"string"==typeof Yt?(Ct.request=this.map._requestManager.transformRequest(i.browser.resolveURL(Yt),i.ResourceType.Source),Ct.request.collectResourceTiming=this._collectResourceTiming):Ct.data=JSON.stringify(Yt),this.actor.send(this.type+".loadData",Ct,function(ae,ge){vt._removed||ge&&ge.abandoned||(vt._loaded=!0,ge&&ge.resourceTiming&&ge.resourceTiming[vt.id]&&(vt._resourceTiming=ge.resourceTiming[vt.id].slice(0)),vt.actor.send(vt.type+".coalesce",{source:Ct.source},null),_(ae))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.loadTile=function(_,vt){var Ct=this,Yt=_.actor?"reloadTile":"loadTile";_.actor=this.actor,_.request=this.actor.send(Yt,{type:this.type,uid:_.uid,tileID:_.tileID,zoom:_.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:i.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(ge,ze){return delete _.request,_.unloadVectorData(),_.aborted?vt(null):ge?vt(ge):(_.loadVectorData(ze,Ct.map.painter,"reloadTile"===Yt),vt(null))})},Y.prototype.abortTile=function(_){_.request&&(_.request.cancel(),delete _.request),_.aborted=!0},Y.prototype.unloadTile=function(_){_.unloadVectorData(),this.actor.send("removeTile",{uid:_.uid,type:this.type,source:this.id})},Y.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},Y.prototype.serialize=function(){return i.extend({},this._options,{type:this.type,data:this._data})},Y.prototype.hasTransition=function(){return!1},Y}(i.Evented),H=i.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),J=function(lt){function Y(ht,_,vt,Ct){lt.call(this),this.id=ht,this.dispatcher=vt,this.coordinates=_.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Ct),this.options=_}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.load=function(_,vt){var Ct=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this.url=this.options.url,i.getImage(this.map._requestManager.transformRequest(this.url,i.ResourceType.Image),function(Yt,ae){Ct._loaded=!0,Yt?Ct.fire(new i.ErrorEvent(Yt)):ae&&(Ct.image=ae,_&&(Ct.coordinates=_),vt&&vt(),Ct._finishLoading())})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.updateImage=function(_){var vt=this;return this.image&&_.url?(this.options.url=_.url,this.load(_.coordinates,function(){vt.texture=null}),this):this},Y.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})))},Y.prototype.onAdd=function(_){this.map=_,this.load()},Y.prototype.setCoordinates=function(_){var vt=this;this.coordinates=_;var Ct=_.map(i.MercatorCoordinate.fromLngLat);this.tileID=function nt(lt){for(var Y=1/0,ht=1/0,_=-1/0,vt=-1/0,Ct=0,Yt=lt;Ct<Yt.length;Ct+=1){var ae=Yt[Ct];Y=Math.min(Y,ae.x),ht=Math.min(ht,ae.y),_=Math.max(_,ae.x),vt=Math.max(vt,ae.y)}var Je=Math.max(_-Y,vt-ht),ur=Math.max(0,Math.floor(-Math.log(Je)/Math.LN2)),mr=Math.pow(2,ur);return new i.CanonicalTileID(ur,Math.floor((Y+_)/2*mr),Math.floor((ht+vt)/2*mr))}(Ct),this.minzoom=this.maxzoom=this.tileID.z;var Yt=Ct.map(function(ae){return vt.tileID.getTilePoint(ae)._round()});return this._boundsArray=new i.StructArrayLayout4i8,this._boundsArray.emplaceBack(Yt[0].x,Yt[0].y,0,0),this._boundsArray.emplaceBack(Yt[1].x,Yt[1].y,i.EXTENT,0),this._boundsArray.emplaceBack(Yt[3].x,Yt[3].y,0,i.EXTENT),this._boundsArray.emplaceBack(Yt[2].x,Yt[2].y,i.EXTENT,i.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})),this},Y.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var _=this.map.painter.context,vt=_.gl;for(var Ct in this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,H.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new i.Texture(_,this.image,vt.RGBA),this.texture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE)),this.tiles){var Yt=this.tiles[Ct];"loaded"!==Yt.state&&(Yt.state="loaded",Yt.texture=this.texture)}}},Y.prototype.loadTile=function(_,vt){this.tileID&&this.tileID.equals(_.tileID.canonical)?(this.tiles[String(_.tileID.wrap)]=_,_.buckets={},vt(null)):(_.state="errored",vt(null))},Y.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return!1},Y}(i.Evented);var it=function(lt){function Y(ht,_,vt,Ct){lt.call(this,ht,_,vt,Ct),this.roundZoom=!0,this.type="video",this.options=_}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.load=function(){var _=this;this._loaded=!1;var vt=this.options;this.urls=[];for(var Ct=0,Yt=vt.urls;Ct<Yt.length;Ct+=1)this.urls.push(this.map._requestManager.transformRequest(Yt[Ct],i.ResourceType.Source).url);i.getVideo(this.urls,function(ge,ze){_._loaded=!0,ge?_.fire(new i.ErrorEvent(ge)):ze&&(_.video=ze,_.video.loop=!0,_.video.addEventListener("playing",function(){_.map.triggerRepaint()}),_.map&&_.video.play(),_._finishLoading())})},Y.prototype.pause=function(){this.video&&this.video.pause()},Y.prototype.play=function(){this.video&&this.video.play()},Y.prototype.seek=function(_){if(this.video){var vt=this.video.seekable;_<vt.start(0)||_>vt.end(0)?this.fire(new i.ErrorEvent(new i.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+vt.start(0)+" and "+vt.end(0)+"-second mark."))):this.video.currentTime=_}},Y.prototype.getVideo=function(){return this.video},Y.prototype.onAdd=function(_){this.map||(this.map=_,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},Y.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var _=this.map.painter.context,vt=_.gl;for(var Ct in this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,H.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE),vt.texSubImage2D(vt.TEXTURE_2D,0,0,0,vt.RGBA,vt.UNSIGNED_BYTE,this.video)):(this.texture=new i.Texture(_,this.video,vt.RGBA),this.texture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE)),this.tiles){var Yt=this.tiles[Ct];"loaded"!==Yt.state&&(Yt.state="loaded",Yt.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this.video&&!this.video.paused},Y}(J),ut=function(lt){function Y(ht,_,vt,Ct){lt.call(this,ht,_,vt,Ct),_.coordinates?(!Array.isArray(_.coordinates)||4!==_.coordinates.length||_.coordinates.some(function(Yt){return!Array.isArray(Yt)||2!==Yt.length||Yt.some(function(ae){return"number"!=typeof ae})}))&&this.fire(new i.ErrorEvent(new i.ValidationError("sources."+ht,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new i.ErrorEvent(new i.ValidationError("sources."+ht,null,'missing required property "coordinates"'))),_.animate&&"boolean"!=typeof _.animate&&this.fire(new i.ErrorEvent(new i.ValidationError("sources."+ht,null,'optional "animate" property must be a boolean value'))),_.canvas?"string"!=typeof _.canvas&&!(_.canvas instanceof i.window.HTMLCanvasElement)&&this.fire(new i.ErrorEvent(new i.ValidationError("sources."+ht,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new i.ErrorEvent(new i.ValidationError("sources."+ht,null,'missing required property "canvas"'))),this.options=_,this.animate=void 0===_.animate||_.animate}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof i.window.HTMLCanvasElement?this.options.canvas:i.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new i.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},Y.prototype.getCanvas=function(){return this.canvas},Y.prototype.onAdd=function(_){this.map=_,this.load(),this.canvas&&this.animate&&this.play()},Y.prototype.onRemove=function(){this.pause()},Y.prototype.prepare=function(){var _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var vt=this.map.painter.context,Ct=vt.gl;for(var Yt in this.boundsBuffer||(this.boundsBuffer=vt.createVertexBuffer(this._boundsArray,H.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new i.Texture(vt,this.canvas,Ct.RGBA,{premultiply:!0}),this.tiles){var ae=this.tiles[Yt];"loaded"!==ae.state&&(ae.state="loaded",ae.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this._playing},Y.prototype._hasInvalidDimensions=function(){for(var _=0,vt=[this.canvas.width,this.canvas.height];_<vt.length;_+=1){var Ct=vt[_];if(isNaN(Ct)||Ct<=0)return!0}return!1},Y}(J),Q={vector:O,raster:B,"raster-dem":z,geojson:U,video:it,image:J,canvas:ut};function K(lt,Y){var ht=i.identity([]);return i.translate(ht,ht,[1,1,0]),i.scale(ht,ht,[.5*lt.width,.5*lt.height,1]),i.multiply(ht,ht,lt.calculatePosMatrix(Y.toUnwrapped()))}function $(lt,Y,ht,_,vt,Ct){var Yt=function at(lt,Y,ht){if(lt)for(var _=0,vt=lt;_<vt.length;_+=1){var Yt=Y[vt[_]];if(Yt&&Yt.source===ht&&"fill-extrusion"===Yt.type)return!0}else for(var ae in Y){var ge=Y[ae];if(ge.source===ht&&"fill-extrusion"===ge.type)return!0}return!1}(vt&&vt.layers,Y,lt.id),ae=Ct.maxPitchScaleFactor(),ge=lt.tilesIn(_,ae,Yt);ge.sort(et);for(var ze=[],Je=0,ur=ge;Je<ur.length;Je+=1){var mr=ur[Je];ze.push({wrappedTileID:mr.tileID.wrapped().key,queryResults:mr.tile.queryRenderedFeatures(Y,ht,lt._state,mr.queryGeometry,mr.cameraQueryGeometry,mr.scale,vt,Ct,ae,K(lt.transform,mr.tileID))})}var Ir=function st(lt){for(var Y={},ht={},_=0,vt=lt;_<vt.length;_+=1){var Ct=vt[_],Yt=Ct.queryResults,ae=Ct.wrappedTileID,ge=ht[ae]=ht[ae]||{};for(var ze in Yt)for(var Je=Yt[ze],ur=ge[ze]=ge[ze]||{},mr=Y[ze]=Y[ze]||[],Ir=0,Gr=Je;Ir<Gr.length;Ir+=1){var Yr=Gr[Ir];ur[Yr.featureIndex]||(ur[Yr.featureIndex]=!0,mr.push(Yr))}}return Y}(ze);for(var Gr in Ir)Ir[Gr].forEach(function(Yr){var Ur=Yr.feature,Kr=lt.getFeatureState(Ur.layer["source-layer"],Ur.id);Ur.source=Ur.layer.source,Ur.layer["source-layer"]&&(Ur.sourceLayer=Ur.layer["source-layer"]),Ur.state=Kr});return Ir}function et(lt,Y){var ht=lt.tileID,_=Y.tileID;return ht.overscaledZ-_.overscaledZ||ht.canonical.y-_.canonical.y||ht.wrap-_.wrap||ht.canonical.x-_.canonical.x}var dt=function(Y,ht){this.max=Y,this.onRemove=ht,this.reset()};dt.prototype.reset=function(){for(var Y in this.data)for(var ht=0,_=this.data[Y];ht<_.length;ht+=1){var vt=_[ht];vt.timeout&&clearTimeout(vt.timeout),this.onRemove(vt.value)}return this.data={},this.order=[],this},dt.prototype.add=function(Y,ht,_){var vt=this,Ct=Y.wrapped().key;void 0===this.data[Ct]&&(this.data[Ct]=[]);var Yt={value:ht,timeout:void 0};if(void 0!==_&&(Yt.timeout=setTimeout(function(){vt.remove(Y,Yt)},_)),this.data[Ct].push(Yt),this.order.push(Ct),this.order.length>this.max){var ae=this._getAndRemoveByKey(this.order[0]);ae&&this.onRemove(ae)}return this},dt.prototype.has=function(Y){return Y.wrapped().key in this.data},dt.prototype.getAndRemove=function(Y){return this.has(Y)?this._getAndRemoveByKey(Y.wrapped().key):null},dt.prototype._getAndRemoveByKey=function(Y){var ht=this.data[Y].shift();return ht.timeout&&clearTimeout(ht.timeout),0===this.data[Y].length&&delete this.data[Y],this.order.splice(this.order.indexOf(Y),1),ht.value},dt.prototype.getByKey=function(Y){var ht=this.data[Y];return ht?ht[0].value:null},dt.prototype.get=function(Y){return this.has(Y)?this.data[Y.wrapped().key][0].value:null},dt.prototype.remove=function(Y,ht){if(!this.has(Y))return this;var _=Y.wrapped().key,vt=void 0===ht?0:this.data[_].indexOf(ht),Ct=this.data[_][vt];return this.data[_].splice(vt,1),Ct.timeout&&clearTimeout(Ct.timeout),0===this.data[_].length&&delete this.data[_],this.onRemove(Ct.value),this.order.splice(this.order.indexOf(_),1),this},dt.prototype.setMaxSize=function(Y){for(this.max=Y;this.order.length>this.max;){var ht=this._getAndRemoveByKey(this.order[0]);ht&&this.onRemove(ht)}return this},dt.prototype.filter=function(Y){var ht=[];for(var _ in this.data)for(var vt=0,Ct=this.data[_];vt<Ct.length;vt+=1){var Yt=Ct[vt];Y(Yt.value)||ht.push(Yt)}for(var ae=0,ge=ht;ae<ge.length;ae+=1){var ze=ge[ae];this.remove(ze.value.tileID,ze)}};var bt=function(Y,ht,_){this.context=Y;var vt=Y.gl;this.buffer=vt.createBuffer(),this.dynamicDraw=Boolean(_),this.context.unbindVAO(),Y.bindElementBuffer.set(this.buffer),vt.bufferData(vt.ELEMENT_ARRAY_BUFFER,ht.arrayBuffer,this.dynamicDraw?vt.DYNAMIC_DRAW:vt.STATIC_DRAW),this.dynamicDraw||delete ht.arrayBuffer};bt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},bt.prototype.updateData=function(Y){var ht=this.context.gl;this.context.unbindVAO(),this.bind(),ht.bufferSubData(ht.ELEMENT_ARRAY_BUFFER,0,Y.arrayBuffer)},bt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var gt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Lt=function(Y,ht,_,vt){this.length=ht.length,this.attributes=_,this.itemSize=ht.bytesPerElement,this.dynamicDraw=vt,this.context=Y;var Ct=Y.gl;this.buffer=Ct.createBuffer(),Y.bindVertexBuffer.set(this.buffer),Ct.bufferData(Ct.ARRAY_BUFFER,ht.arrayBuffer,this.dynamicDraw?Ct.DYNAMIC_DRAW:Ct.STATIC_DRAW),this.dynamicDraw||delete ht.arrayBuffer};Lt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Lt.prototype.updateData=function(Y){var ht=this.context.gl;this.bind(),ht.bufferSubData(ht.ARRAY_BUFFER,0,Y.arrayBuffer)},Lt.prototype.enableAttributes=function(Y,ht){for(var _=0;_<this.attributes.length;_++){var Ct=ht.attributes[this.attributes[_].name];void 0!==Ct&&Y.enableVertexAttribArray(Ct)}},Lt.prototype.setVertexAttribPointers=function(Y,ht,_){for(var vt=0;vt<this.attributes.length;vt++){var Ct=this.attributes[vt],Yt=ht.attributes[Ct.name];void 0!==Yt&&Y.vertexAttribPointer(Yt,Ct.components,Y[gt[Ct.type]],!1,this.itemSize,Ct.offset+this.itemSize*(_||0))}},Lt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var It=function(Y){this.gl=Y.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};It.prototype.get=function(){return this.current},It.prototype.set=function(Y){},It.prototype.getDefault=function(){return this.default},It.prototype.setDefault=function(){this.set(this.default)};var Mt=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return i.Color.transparent},Y.prototype.set=function(_){var vt=this.current;_.r===vt.r&&_.g===vt.g&&_.b===vt.b&&_.a===vt.a&&!this.dirty||(this.gl.clearColor(_.r,_.g,_.b,_.a),this.current=_,this.dirty=!1)},Y}(It),xt=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return 1},Y.prototype.set=function(_){_===this.current&&!this.dirty||(this.gl.clearDepth(_),this.current=_,this.dirty=!1)},Y}(It),At=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return 0},Y.prototype.set=function(_){_===this.current&&!this.dirty||(this.gl.clearStencil(_),this.current=_,this.dirty=!1)},Y}(It),Gt=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return[!0,!0,!0,!0]},Y.prototype.set=function(_){var vt=this.current;_[0]===vt[0]&&_[1]===vt[1]&&_[2]===vt[2]&&_[3]===vt[3]&&!this.dirty||(this.gl.colorMask(_[0],_[1],_[2],_[3]),this.current=_,this.dirty=!1)},Y}(It),Wt=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!0},Y.prototype.set=function(_){_===this.current&&!this.dirty||(this.gl.depthMask(_),this.current=_,this.dirty=!1)},Y}(It),Pt=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return 255},Y.prototype.set=function(_){_===this.current&&!this.dirty||(this.gl.stencilMask(_),this.current=_,this.dirty=!1)},Y}(It),Vt=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},Y.prototype.set=function(_){var vt=this.current;_.func===vt.func&&_.ref===vt.ref&&_.mask===vt.mask&&!this.dirty||(this.gl.stencilFunc(_.func,_.ref,_.mask),this.current=_,this.dirty=!1)},Y}(It),te=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){var _=this.gl;return[_.KEEP,_.KEEP,_.KEEP]},Y.prototype.set=function(_){var vt=this.current;_[0]===vt[0]&&_[1]===vt[1]&&_[2]===vt[2]&&!this.dirty||(this.gl.stencilOp(_[0],_[1],_[2]),this.current=_,this.dirty=!1)},Y}(It),Qt=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(_){if(_!==this.current||this.dirty){var vt=this.gl;_?vt.enable(vt.STENCIL_TEST):vt.disable(vt.STENCIL_TEST),this.current=_,this.dirty=!1}},Y}(It),Bt=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return[0,1]},Y.prototype.set=function(_){var vt=this.current;_[0]===vt[0]&&_[1]===vt[1]&&!this.dirty||(this.gl.depthRange(_[0],_[1]),this.current=_,this.dirty=!1)},Y}(It),Ot=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(_){if(_!==this.current||this.dirty){var vt=this.gl;_?vt.enable(vt.DEPTH_TEST):vt.disable(vt.DEPTH_TEST),this.current=_,this.dirty=!1}},Y}(It),qt=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.LESS},Y.prototype.set=function(_){_===this.current&&!this.dirty||(this.gl.depthFunc(_),this.current=_,this.dirty=!1)},Y}(It),ie=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(_){if(_!==this.current||this.dirty){var vt=this.gl;_?vt.enable(vt.BLEND):vt.disable(vt.BLEND),this.current=_,this.dirty=!1}},Y}(It),oe=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){var _=this.gl;return[_.ONE,_.ZERO]},Y.prototype.set=function(_){var vt=this.current;_[0]===vt[0]&&_[1]===vt[1]&&!this.dirty||(this.gl.blendFunc(_[0],_[1]),this.current=_,this.dirty=!1)},Y}(It),pe=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return i.Color.transparent},Y.prototype.set=function(_){var vt=this.current;_.r===vt.r&&_.g===vt.g&&_.b===vt.b&&_.a===vt.a&&!this.dirty||(this.gl.blendColor(_.r,_.g,_.b,_.a),this.current=_,this.dirty=!1)},Y}(It),de=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.FUNC_ADD},Y.prototype.set=function(_){_===this.current&&!this.dirty||(this.gl.blendEquation(_),this.current=_,this.dirty=!1)},Y}(It),Fe=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(_){if(_!==this.current||this.dirty){var vt=this.gl;_?vt.enable(vt.CULL_FACE):vt.disable(vt.CULL_FACE),this.current=_,this.dirty=!1}},Y}(It),Kt=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.BACK},Y.prototype.set=function(_){_===this.current&&!this.dirty||(this.gl.cullFace(_),this.current=_,this.dirty=!1)},Y}(It),Et=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.CCW},Y.prototype.set=function(_){_===this.current&&!this.dirty||(this.gl.frontFace(_),this.current=_,this.dirty=!1)},Y}(It),St=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(_){_===this.current&&!this.dirty||(this.gl.useProgram(_),this.current=_,this.dirty=!1)},Y}(It),Dt=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.TEXTURE0},Y.prototype.set=function(_){_===this.current&&!this.dirty||(this.gl.activeTexture(_),this.current=_,this.dirty=!1)},Y}(It),Ft=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){var _=this.gl;return[0,0,_.drawingBufferWidth,_.drawingBufferHeight]},Y.prototype.set=function(_){var vt=this.current;_[0]===vt[0]&&_[1]===vt[1]&&_[2]===vt[2]&&_[3]===vt[3]&&!this.dirty||(this.gl.viewport(_[0],_[1],_[2],_[3]),this.current=_,this.dirty=!1)},Y}(It),Nt=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(_){if(_!==this.current||this.dirty){var vt=this.gl;vt.bindFramebuffer(vt.FRAMEBUFFER,_),this.current=_,this.dirty=!1}},Y}(It),Rt=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(_){if(_!==this.current||this.dirty){var vt=this.gl;vt.bindRenderbuffer(vt.RENDERBUFFER,_),this.current=_,this.dirty=!1}},Y}(It),wt=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(_){if(_!==this.current||this.dirty){var vt=this.gl;vt.bindTexture(vt.TEXTURE_2D,_),this.current=_,this.dirty=!1}},Y}(It),ft=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(_){if(_!==this.current||this.dirty){var vt=this.gl;vt.bindBuffer(vt.ARRAY_BUFFER,_),this.current=_,this.dirty=!1}},Y}(It),pt=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(_){var vt=this.gl;vt.bindBuffer(vt.ELEMENT_ARRAY_BUFFER,_),this.current=_,this.dirty=!1},Y}(It),kt=function(lt){function Y(ht){lt.call(this,ht),this.vao=ht.extVertexArrayObject}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(_){!this.vao||_===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(_),this.current=_,this.dirty=!1)},Y}(It),Zt=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return 4},Y.prototype.set=function(_){if(_!==this.current||this.dirty){var vt=this.gl;vt.pixelStorei(vt.UNPACK_ALIGNMENT,_),this.current=_,this.dirty=!1}},Y}(It),ee=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(_){if(_!==this.current||this.dirty){var vt=this.gl;vt.pixelStorei(vt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_),this.current=_,this.dirty=!1}},Y}(It),se=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(_){if(_!==this.current||this.dirty){var vt=this.gl;vt.pixelStorei(vt.UNPACK_FLIP_Y_WEBGL,_),this.current=_,this.dirty=!1}},Y}(It),Be=function(lt){function Y(ht,_){lt.call(this,ht),this.context=ht,this.parent=_}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y}(It),Ke=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.setDirty=function(){this.dirty=!0},Y.prototype.set=function(_){if(_!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var vt=this.gl;vt.framebufferTexture2D(vt.FRAMEBUFFER,vt.COLOR_ATTACHMENT0,vt.TEXTURE_2D,_,0),this.current=_,this.dirty=!1}},Y}(Be),xe=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.set=function(_){if(_!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var vt=this.gl;vt.framebufferRenderbuffer(vt.FRAMEBUFFER,vt.DEPTH_ATTACHMENT,vt.RENDERBUFFER,_),this.current=_,this.dirty=!1}},Y}(Be),Pe=function(Y,ht,_,vt){this.context=Y,this.width=ht,this.height=_;var Yt=this.framebuffer=Y.gl.createFramebuffer();this.colorAttachment=new Ke(Y,Yt),vt&&(this.depthAttachment=new xe(Y,Yt))};Pe.prototype.destroy=function(){var Y=this.context.gl,ht=this.colorAttachment.get();if(ht&&Y.deleteTexture(ht),this.depthAttachment){var _=this.depthAttachment.get();_&&Y.deleteRenderbuffer(_)}Y.deleteFramebuffer(this.framebuffer)};var gr=function(Y,ht,_){this.func=Y,this.mask=ht,this.range=_};gr.ReadOnly=!1,gr.ReadWrite=!0,gr.disabled=new gr(519,gr.ReadOnly,[0,1]);var Ye=function(Y,ht,_,vt,Ct,Yt){this.test=Y,this.ref=ht,this.mask=_,this.fail=vt,this.depthFail=Ct,this.pass=Yt};Ye.disabled=new Ye({func:519,mask:0},0,0,7680,7680,7680);var re=function(Y,ht,_){this.blendFunction=Y,this.blendColor=ht,this.mask=_};re.disabled=new re(re.Replace=[1,0],i.Color.transparent,[!1,!1,!1,!1]),re.unblended=new re(re.Replace,i.Color.transparent,[!0,!0,!0,!0]),re.alphaBlended=new re([1,771],i.Color.transparent,[!0,!0,!0,!0]);var Ae=function(Y,ht,_){this.enable=Y,this.mode=ht,this.frontFace=_};Ae.disabled=new Ae(!1,1029,2305),Ae.backCCW=new Ae(!0,1029,2305);var Te=function(Y){this.gl=Y,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Mt(this),this.clearDepth=new xt(this),this.clearStencil=new At(this),this.colorMask=new Gt(this),this.depthMask=new Wt(this),this.stencilMask=new Pt(this),this.stencilFunc=new Vt(this),this.stencilOp=new te(this),this.stencilTest=new Qt(this),this.depthRange=new Bt(this),this.depthTest=new Ot(this),this.depthFunc=new qt(this),this.blend=new ie(this),this.blendFunc=new oe(this),this.blendColor=new pe(this),this.blendEquation=new de(this),this.cullFace=new Fe(this),this.cullFaceSide=new Kt(this),this.frontFace=new Et(this),this.program=new St(this),this.activeTexture=new Dt(this),this.viewport=new Ft(this),this.bindFramebuffer=new Nt(this),this.bindRenderbuffer=new Rt(this),this.bindTexture=new wt(this),this.bindVertexBuffer=new ft(this),this.bindElementBuffer=new pt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new kt(this),this.pixelStoreUnpack=new Zt(this),this.pixelStoreUnpackPremultiplyAlpha=new ee(this),this.pixelStoreUnpackFlipY=new se(this),this.extTextureFilterAnisotropic=Y.getExtension("EXT_texture_filter_anisotropic")||Y.getExtension("MOZ_EXT_texture_filter_anisotropic")||Y.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=Y.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=Y.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(Y.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=Y.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=Y.getExtension("EXT_disjoint_timer_query")};Te.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Te.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Te.prototype.createIndexBuffer=function(Y,ht){return new bt(this,Y,ht)},Te.prototype.createVertexBuffer=function(Y,ht,_){return new Lt(this,Y,ht,_)},Te.prototype.createRenderbuffer=function(Y,ht,_){var vt=this.gl,Ct=vt.createRenderbuffer();return this.bindRenderbuffer.set(Ct),vt.renderbufferStorage(vt.RENDERBUFFER,Y,ht,_),this.bindRenderbuffer.set(null),Ct},Te.prototype.createFramebuffer=function(Y,ht,_){return new Pe(this,Y,ht,_)},Te.prototype.clear=function(Y){var ht=Y.color,_=Y.depth,vt=this.gl,Ct=0;ht&&(Ct|=vt.COLOR_BUFFER_BIT,this.clearColor.set(ht),this.colorMask.set([!0,!0,!0,!0])),void 0!==_&&(Ct|=vt.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(_),this.depthMask.set(!0)),vt.clear(Ct)},Te.prototype.setCullFace=function(Y){!1===Y.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(Y.mode),this.frontFace.set(Y.frontFace))},Te.prototype.setDepthMode=function(Y){Y.func!==this.gl.ALWAYS||Y.mask?(this.depthTest.set(!0),this.depthFunc.set(Y.func),this.depthMask.set(Y.mask),this.depthRange.set(Y.range)):this.depthTest.set(!1)},Te.prototype.setStencilMode=function(Y){Y.test.func!==this.gl.ALWAYS||Y.mask?(this.stencilTest.set(!0),this.stencilMask.set(Y.mask),this.stencilOp.set([Y.fail,Y.depthFail,Y.pass]),this.stencilFunc.set({func:Y.test.func,ref:Y.ref,mask:Y.test.mask})):this.stencilTest.set(!1)},Te.prototype.setColorMode=function(Y){i.deepEqual(Y.blendFunction,re.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(Y.blendFunction),this.blendColor.set(Y.blendColor)),this.colorMask.set(Y.mask)},Te.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Re=function(lt){function Y(ht,_,vt){var Ct=this;lt.call(this),this.id=ht,this.dispatcher=vt,this.on("data",function(Yt){"source"===Yt.dataType&&"metadata"===Yt.sourceDataType&&(Ct._sourceLoaded=!0),Ct._sourceLoaded&&!Ct._paused&&"source"===Yt.dataType&&"content"===Yt.sourceDataType&&(Ct.reload(),Ct.transform&&Ct.update(Ct.transform))}),this.on("error",function(){Ct._sourceErrored=!0}),this._source=function(lt,Y,ht,_){var vt=new Q[Y.type](lt,Y,ht,_);if(vt.id!==lt)throw new Error("Expected Source id to be "+lt+" instead of "+vt.id);return i.bindAll(["load","abort","unload","serialize","prepare"],vt),vt}(ht,_,vt,this),this._tiles={},this._cache=new dt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new i.SourceFeatureState}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.onAdd=function(_){this.map=_,this._maxTileCacheSize=_?_._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(_)},Y.prototype.onRemove=function(_){this._source&&this._source.onRemove&&this._source.onRemove(_)},Y.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var _ in this._tiles){var vt=this._tiles[_];if("loaded"!==vt.state&&"errored"!==vt.state)return!1}return!0},Y.prototype.getSource=function(){return this._source},Y.prototype.pause=function(){this._paused=!0},Y.prototype.resume=function(){if(this._paused){var _=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,_&&this.reload(),this.transform&&this.update(this.transform)}},Y.prototype._loadTile=function(_,vt){return this._source.loadTile(_,vt)},Y.prototype._unloadTile=function(_){if(this._source.unloadTile)return this._source.unloadTile(_,function(){})},Y.prototype._abortTile=function(_){if(this._source.abortTile)return this._source.abortTile(_,function(){})},Y.prototype.serialize=function(){return this._source.serialize()},Y.prototype.prepare=function(_){for(var vt in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var Ct=this._tiles[vt];Ct.upload(_),Ct.prepare(this.map.style.imageManager)}},Y.prototype.getIds=function(){return i.values(this._tiles).map(function(_){return _.tileID}).sort(Ie).map(function(_){return _.key})},Y.prototype.getRenderableIds=function(_){var vt=this,Ct=[];for(var Yt in this._tiles)this._isIdRenderable(Yt,_)&&Ct.push(this._tiles[Yt]);return _?Ct.sort(function(ae,ge){var ze=ae.tileID,Je=ge.tileID,ur=new i.Point(ze.canonical.x,ze.canonical.y)._rotate(vt.transform.angle),mr=new i.Point(Je.canonical.x,Je.canonical.y)._rotate(vt.transform.angle);return ze.overscaledZ-Je.overscaledZ||mr.y-ur.y||mr.x-ur.x}).map(function(ae){return ae.tileID.key}):Ct.map(function(ae){return ae.tileID}).sort(Ie).map(function(ae){return ae.key})},Y.prototype.hasRenderableParent=function(_){var vt=this.findLoadedParent(_,0);return!!vt&&this._isIdRenderable(vt.tileID.key)},Y.prototype._isIdRenderable=function(_,vt){return this._tiles[_]&&this._tiles[_].hasData()&&!this._coveredTiles[_]&&(vt||!this._tiles[_].holdingForFade())},Y.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var _ in this._cache.reset(),this._tiles)"errored"!==this._tiles[_].state&&this._reloadTile(_,"reloading")},Y.prototype._reloadTile=function(_,vt){var Ct=this._tiles[_];!Ct||("loading"!==Ct.state&&(Ct.state=vt),this._loadTile(Ct,this._tileLoaded.bind(this,Ct,_,vt)))},Y.prototype._tileLoaded=function(_,vt,Ct,Yt){if(Yt)return _.state="errored",void(404!==Yt.status?this._source.fire(new i.ErrorEvent(Yt,{tile:_})):this.update(this.transform));_.timeAdded=i.browser.now(),"expired"===Ct&&(_.refreshedUponExpiration=!0),this._setTileReloadTimer(vt,_),"raster-dem"===this.getSource().type&&_.dem&&this._backfillDEM(_),this._state.initializeTileState(_,this.map?this.map.painter:null),this._source.fire(new i.Event("data",{dataType:"source",tile:_,coord:_.tileID}))},Y.prototype._backfillDEM=function(_){for(var vt=this.getRenderableIds(),Ct=0;Ct<vt.length;Ct++){var Yt=vt[Ct];if(_.neighboringTiles&&_.neighboringTiles[Yt]){var ae=this.getTileByID(Yt);ge(_,ae),ge(ae,_)}}function ge(ze,Je){ze.needsHillshadePrepare=!0;var ur=Je.tileID.canonical.x-ze.tileID.canonical.x,mr=Je.tileID.canonical.y-ze.tileID.canonical.y,Ir=Math.pow(2,ze.tileID.canonical.z),Gr=Je.tileID.key;0===ur&&0===mr||Math.abs(mr)>1||(Math.abs(ur)>1&&(1===Math.abs(ur+Ir)?ur+=Ir:1===Math.abs(ur-Ir)&&(ur-=Ir)),Je.dem&&ze.dem&&(ze.dem.backfillBorder(Je.dem,ur,mr),ze.neighboringTiles&&ze.neighboringTiles[Gr]&&(ze.neighboringTiles[Gr].backfilled=!0)))}},Y.prototype.getTile=function(_){return this.getTileByID(_.key)},Y.prototype.getTileByID=function(_){return this._tiles[_]},Y.prototype._retainLoadedChildren=function(_,vt,Ct,Yt){for(var ae in this._tiles){var ge=this._tiles[ae];if(!(Yt[ae]||!ge.hasData()||ge.tileID.overscaledZ<=vt||ge.tileID.overscaledZ>Ct)){for(var ze=ge.tileID;ge&&ge.tileID.overscaledZ>vt+1;){var Je=ge.tileID.scaledTo(ge.tileID.overscaledZ-1);(ge=this._tiles[Je.key])&&ge.hasData()&&(ze=Je)}for(var ur=ze;ur.overscaledZ>vt;)if(_[(ur=ur.scaledTo(ur.overscaledZ-1)).key]){Yt[ze.key]=ze;break}}}},Y.prototype.findLoadedParent=function(_,vt){if(_.key in this._loadedParentTiles){var Ct=this._loadedParentTiles[_.key];return Ct&&Ct.tileID.overscaledZ>=vt?Ct:null}for(var Yt=_.overscaledZ-1;Yt>=vt;Yt--){var ae=_.scaledTo(Yt),ge=this._getLoadedTile(ae);if(ge)return ge}},Y.prototype._getLoadedTile=function(_){var vt=this._tiles[_.key];return vt&&vt.hasData()?vt:this._cache.getByKey(_.wrapped().key)},Y.prototype.updateCacheSize=function(_){var vt=Math.ceil(_.width/this._source.tileSize)+1,Ct=Math.ceil(_.height/this._source.tileSize)+1,ge=Math.floor(vt*Ct*5),ze="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,ge):ge;this._cache.setMaxSize(ze)},Y.prototype.handleWrapJump=function(_){var ae=Math.round((_-(void 0===this._prevLng?_:this._prevLng))/360);if(this._prevLng=_,ae){var ge={};for(var ze in this._tiles){var Je=this._tiles[ze];Je.tileID=Je.tileID.unwrapTo(Je.tileID.wrap+ae),ge[Je.tileID.key]=Je}for(var ur in this._tiles=ge,this._timers)clearTimeout(this._timers[ur]),delete this._timers[ur];for(var mr in this._tiles)this._setTileReloadTimer(mr,this._tiles[mr])}},Y.prototype.update=function(_){var vt=this;if(this.transform=_,this._sourceLoaded&&!this._paused){var Ct;this.updateCacheSize(_),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?Ct=_.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(ia){return new i.OverscaledTileID(ia.canonical.z,ia.wrap,ia.canonical.z,ia.canonical.x,ia.canonical.y)}):(Ct=_.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Ct=Ct.filter(function(ia){return vt._source.hasTile(ia)}))):Ct=[];var Yt=_.coveringZoomLevel(this._source),ae=Math.max(Yt-Y.maxOverzooming,this._source.minzoom),ge=Math.max(Yt+Y.maxUnderzooming,this._source.minzoom),ze=this._updateRetainedTiles(Ct,Yt);if(Xe(this._source.type)){for(var Je={},ur={},Ir=0,Gr=Object.keys(ze);Ir<Gr.length;Ir+=1){var Yr=Gr[Ir],Ur=ze[Yr],Kr=this._tiles[Yr];if(Kr&&!(Kr.fadeEndTime&&Kr.fadeEndTime<=i.browser.now())){var cn=this.findLoadedParent(Ur,ae);cn&&(this._addTile(cn.tileID),Je[cn.tileID.key]=cn.tileID),ur[Yr]=Ur}}for(var Cn in this._retainLoadedChildren(ur,Yt,ge,ze),Je)ze[Cn]||(this._coveredTiles[Cn]=!0,ze[Cn]=Je[Cn])}for(var Rn in ze)this._tiles[Rn].clearFadeHold();for(var Hn=0,Vn=i.keysDifference(this._tiles,ze);Hn<Vn.length;Hn+=1){var _n=Vn[Hn],sa=this._tiles[_n];sa.hasSymbolBuckets&&!sa.holdingForFade()?sa.setHoldDuration(this.map._fadeDuration):(!sa.hasSymbolBuckets||sa.symbolFadeFinished())&&this._removeTile(_n)}this._updateLoadedParentTileCache()}},Y.prototype.releaseSymbolFadeTiles=function(){for(var _ in this._tiles)this._tiles[_].holdingForFade()&&this._removeTile(_)},Y.prototype._updateRetainedTiles=function(_,vt){for(var Ct={},Yt={},ae=Math.max(vt-Y.maxOverzooming,this._source.minzoom),ge=Math.max(vt+Y.maxUnderzooming,this._source.minzoom),ze={},Je=0,ur=_;Je<ur.length;Je+=1){var mr=ur[Je],Ir=this._addTile(mr);Ct[mr.key]=mr,!Ir.hasData()&&vt<this._source.maxzoom&&(ze[mr.key]=mr)}this._retainLoadedChildren(ze,vt,ge,Ct);for(var Gr=0,Yr=_;Gr<Yr.length;Gr+=1){var Ur=Yr[Gr],Kr=this._tiles[Ur.key];if(!Kr.hasData()){if(vt+1>this._source.maxzoom){var cn=Ur.children(this._source.maxzoom)[0],Cn=this.getTile(cn);if(Cn&&Cn.hasData()){Ct[cn.key]=cn;continue}}else{var Rn=Ur.children(this._source.maxzoom);if(Ct[Rn[0].key]&&Ct[Rn[1].key]&&Ct[Rn[2].key]&&Ct[Rn[3].key])continue}for(var Un=Kr.wasRequested(),Hn=Ur.overscaledZ-1;Hn>=ae;--Hn){var Vn=Ur.scaledTo(Hn);if(Yt[Vn.key]||(Yt[Vn.key]=!0,!(Kr=this.getTile(Vn))&&Un&&(Kr=this._addTile(Vn)),Kr&&(Ct[Vn.key]=Vn,Un=Kr.wasRequested(),Kr.hasData())))break}}}return Ct},Y.prototype._updateLoadedParentTileCache=function(){for(var _ in this._loadedParentTiles={},this._tiles){for(var vt=[],Ct=void 0,Yt=this._tiles[_].tileID;Yt.overscaledZ>0;){if(Yt.key in this._loadedParentTiles){Ct=this._loadedParentTiles[Yt.key];break}vt.push(Yt.key);var ae=Yt.scaledTo(Yt.overscaledZ-1);if(Ct=this._getLoadedTile(ae))break;Yt=ae}for(var ge=0,ze=vt;ge<ze.length;ge+=1)this._loadedParentTiles[ze[ge]]=Ct}},Y.prototype._addTile=function(_){var vt=this._tiles[_.key];if(vt)return vt;(vt=this._cache.getAndRemove(_))&&(this._setTileReloadTimer(_.key,vt),vt.tileID=_,this._state.initializeTileState(vt,this.map?this.map.painter:null),this._cacheTimers[_.key]&&(clearTimeout(this._cacheTimers[_.key]),delete this._cacheTimers[_.key],this._setTileReloadTimer(_.key,vt)));var Ct=Boolean(vt);return Ct||(vt=new i.Tile(_,this._source.tileSize*_.overscaleFactor()),this._loadTile(vt,this._tileLoaded.bind(this,vt,_.key,vt.state))),vt?(vt.uses++,this._tiles[_.key]=vt,Ct||this._source.fire(new i.Event("dataloading",{tile:vt,coord:vt.tileID,dataType:"source"})),vt):null},Y.prototype._setTileReloadTimer=function(_,vt){var Ct=this;_ in this._timers&&(clearTimeout(this._timers[_]),delete this._timers[_]);var Yt=vt.getExpiryTimeout();Yt&&(this._timers[_]=setTimeout(function(){Ct._reloadTile(_,"expired"),delete Ct._timers[_]},Yt))},Y.prototype._removeTile=function(_){var vt=this._tiles[_];!vt||(vt.uses--,delete this._tiles[_],this._timers[_]&&(clearTimeout(this._timers[_]),delete this._timers[_]),!(vt.uses>0)&&(vt.hasData()&&"reloading"!==vt.state?this._cache.add(vt.tileID,vt,vt.getExpiryTimeout()):(vt.aborted=!0,this._abortTile(vt),this._unloadTile(vt))))},Y.prototype.clearTiles=function(){for(var _ in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(_);this._cache.reset()},Y.prototype.tilesIn=function(_,vt,Ct){var Yt=this,ae=[],ge=this.transform;if(!ge)return ae;for(var ze=Ct?ge.getCameraQueryGeometry(_):_,Je=_.map(function(Hn){return ge.pointCoordinate(Hn)}),ur=ze.map(function(Hn){return ge.pointCoordinate(Hn)}),mr=this.getIds(),Ir=1/0,Gr=1/0,Yr=-1/0,Ur=-1/0,Kr=0,cn=ur;Kr<cn.length;Kr+=1){var Cn=cn[Kr];Ir=Math.min(Ir,Cn.x),Gr=Math.min(Gr,Cn.y),Yr=Math.max(Yr,Cn.x),Ur=Math.max(Ur,Cn.y)}for(var Rn=function(Hn){var Vn=Yt._tiles[mr[Hn]];if(!Vn.holdingForFade()){var _n=Vn.tileID,sa=Math.pow(2,ge.zoom-Vn.tileID.overscaledZ),ia=vt*Vn.queryPadding*i.EXTENT/Vn.tileSize/sa,ha=[_n.getTilePoint(new i.MercatorCoordinate(Ir,Gr)),_n.getTilePoint(new i.MercatorCoordinate(Yr,Ur))];if(ha[0].x-ia<i.EXTENT&&ha[0].y-ia<i.EXTENT&&ha[1].x+ia>=0&&ha[1].y+ia>=0){var ga=Je.map(function(Fa){return _n.getTilePoint(Fa)}),Ca=ur.map(function(Fa){return _n.getTilePoint(Fa)});ae.push({tile:Vn,tileID:_n,queryGeometry:ga,cameraQueryGeometry:Ca,scale:sa})}}},Un=0;Un<mr.length;Un++)Rn(Un);return ae},Y.prototype.getVisibleCoordinates=function(_){for(var vt=this,Ct=this.getRenderableIds(_).map(function(ze){return vt._tiles[ze].tileID}),Yt=0,ae=Ct;Yt<ae.length;Yt+=1){var ge=ae[Yt];ge.posMatrix=this.transform.calculatePosMatrix(ge.toUnwrapped())}return Ct},Y.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Xe(this._source.type))for(var _ in this._tiles){var vt=this._tiles[_];if(void 0!==vt.fadeEndTime&&vt.fadeEndTime>=i.browser.now())return!0}return!1},Y.prototype.setFeatureState=function(_,vt,Ct){this._state.updateState(_=_||"_geojsonTileLayer",vt,Ct)},Y.prototype.removeFeatureState=function(_,vt,Ct){this._state.removeFeatureState(_=_||"_geojsonTileLayer",vt,Ct)},Y.prototype.getFeatureState=function(_,vt){return this._state.getState(_=_||"_geojsonTileLayer",vt)},Y.prototype.setDependencies=function(_,vt,Ct){var Yt=this._tiles[_];Yt&&Yt.setDependencies(vt,Ct)},Y.prototype.reloadTilesForDependencies=function(_,vt){for(var Ct in this._tiles)this._tiles[Ct].hasDependency(_,vt)&&this._reloadTile(Ct,"reloading");this._cache.filter(function(ae){return!ae.hasDependency(_,vt)})},Y}(i.Evented);function Ie(lt,Y){var ht=Math.abs(2*lt.wrap)-+(lt.wrap<0),_=Math.abs(2*Y.wrap)-+(Y.wrap<0);return lt.overscaledZ-Y.overscaledZ||_-ht||Y.canonical.y-lt.canonical.y||Y.canonical.x-lt.canonical.x}function Xe(lt){return"raster"===lt||"image"===lt||"video"===lt}function ar(){return new i.window.Worker(Ec.workerUrl)}Re.maxOverzooming=10,Re.maxUnderzooming=3;var nr="mapboxgl_preloaded_worker_pool",cr=function(){this.active={}};cr.prototype.acquire=function(Y){if(!this.workers)for(this.workers=[];this.workers.length<cr.workerCount;)this.workers.push(new ar);return this.active[Y]=!0,this.workers.slice()},cr.prototype.release=function(Y){delete this.active[Y],0===this.numActive()&&(this.workers.forEach(function(ht){ht.terminate()}),this.workers=null)},cr.prototype.isPreloaded=function(){return!!this.active[nr]},cr.prototype.numActive=function(){return Object.keys(this.active).length};var Ht,Ut=Math.floor(i.browser.hardwareConcurrency/2);function Se(){return Ht||(Ht=new cr),Ht}function qe(lt,Y){var ht={};for(var _ in lt)"ref"!==_&&(ht[_]=lt[_]);return i.refProperties.forEach(function(vt){vt in Y&&(ht[vt]=Y[vt])}),ht}function or(lt){lt=lt.slice();for(var Y=Object.create(null),ht=0;ht<lt.length;ht++)Y[lt[ht].id]=lt[ht];for(var _=0;_<lt.length;_++)"ref"in lt[_]&&(lt[_]=qe(lt[_],Y[lt[_].ref]));return lt}cr.workerCount=Math.max(Math.min(Ut,6),1);var De={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function sr(lt,Y,ht){ht.push({command:De.addSource,args:[lt,Y[lt]]})}function yr(lt,Y,ht){Y.push({command:De.removeSource,args:[lt]}),ht[lt]=!0}function dr(lt,Y,ht,_){yr(lt,ht,_),sr(lt,Y,ht)}function Pr(lt,Y,ht){var _;for(_ in lt[ht])if(lt[ht].hasOwnProperty(_)&&"data"!==_&&!i.deepEqual(lt[ht][_],Y[ht][_]))return!1;for(_ in Y[ht])if(Y[ht].hasOwnProperty(_)&&"data"!==_&&!i.deepEqual(lt[ht][_],Y[ht][_]))return!1;return!0}function Mr(lt,Y,ht,_,vt,Ct){var Yt;for(Yt in Y=Y||{},lt=lt||{})!lt.hasOwnProperty(Yt)||i.deepEqual(lt[Yt],Y[Yt])||ht.push({command:Ct,args:[_,Yt,Y[Yt],vt]});for(Yt in Y)!Y.hasOwnProperty(Yt)||lt.hasOwnProperty(Yt)||i.deepEqual(lt[Yt],Y[Yt])||ht.push({command:Ct,args:[_,Yt,Y[Yt],vt]})}function Wr(lt){return lt.id}function nn(lt,Y){return lt[Y.id]=Y,lt}function Dn(lt,Y){if(!lt)return[{command:De.setStyle,args:[Y]}];var ht=[];try{if(!i.deepEqual(lt.version,Y.version))return[{command:De.setStyle,args:[Y]}];i.deepEqual(lt.center,Y.center)||ht.push({command:De.setCenter,args:[Y.center]}),i.deepEqual(lt.zoom,Y.zoom)||ht.push({command:De.setZoom,args:[Y.zoom]}),i.deepEqual(lt.bearing,Y.bearing)||ht.push({command:De.setBearing,args:[Y.bearing]}),i.deepEqual(lt.pitch,Y.pitch)||ht.push({command:De.setPitch,args:[Y.pitch]}),i.deepEqual(lt.sprite,Y.sprite)||ht.push({command:De.setSprite,args:[Y.sprite]}),i.deepEqual(lt.glyphs,Y.glyphs)||ht.push({command:De.setGlyphs,args:[Y.glyphs]}),i.deepEqual(lt.transition,Y.transition)||ht.push({command:De.setTransition,args:[Y.transition]}),i.deepEqual(lt.light,Y.light)||ht.push({command:De.setLight,args:[Y.light]});var _={},vt=[];!function Jr(lt,Y,ht,_){var vt;for(vt in Y=Y||{},lt=lt||{})!lt.hasOwnProperty(vt)||Y.hasOwnProperty(vt)||yr(vt,ht,_);for(vt in Y)!Y.hasOwnProperty(vt)||(lt.hasOwnProperty(vt)?i.deepEqual(lt[vt],Y[vt])||("geojson"===lt[vt].type&&"geojson"===Y[vt].type&&Pr(lt,Y,vt)?ht.push({command:De.setGeoJSONSourceData,args:[vt,Y[vt].data]}):dr(vt,Y,ht,_)):sr(vt,Y,ht))}(lt.sources,Y.sources,vt,_);var Ct=[];lt.layers&&lt.layers.forEach(function(Yt){_[Yt.source]?ht.push({command:De.removeLayer,args:[Yt.id]}):Ct.push(Yt)}),ht=ht.concat(vt),function Nr(lt,Y,ht){Y=Y||[];var ze,Je,ur,mr,Ir,Gr,Yr,_=(lt=lt||[]).map(Wr),vt=Y.map(Wr),Ct=lt.reduce(nn,{}),Yt=Y.reduce(nn,{}),ae=_.slice(),ge=Object.create(null);for(ze=0,Je=0;ze<_.length;ze++)Yt.hasOwnProperty(ur=_[ze])?Je++:(ht.push({command:De.removeLayer,args:[ur]}),ae.splice(ae.indexOf(ur,Je),1));for(ze=0,Je=0;ze<vt.length;ze++)ae[ae.length-1-ze]!==(ur=vt[vt.length-1-ze])&&(Ct.hasOwnProperty(ur)?(ht.push({command:De.removeLayer,args:[ur]}),ae.splice(ae.lastIndexOf(ur,ae.length-Je),1)):Je++,ht.push({command:De.addLayer,args:[Yt[ur],Gr=ae[ae.length-ze]]}),ae.splice(ae.length-ze,0,ur),ge[ur]=!0);for(ze=0;ze<vt.length;ze++)if(mr=Ct[ur=vt[ze]],Ir=Yt[ur],!ge[ur]&&!i.deepEqual(mr,Ir)){if(!i.deepEqual(mr.source,Ir.source)||!i.deepEqual(mr["source-layer"],Ir["source-layer"])||!i.deepEqual(mr.type,Ir.type)){ht.push({command:De.removeLayer,args:[ur]}),Gr=ae[ae.lastIndexOf(ur)+1],ht.push({command:De.addLayer,args:[Ir,Gr]});continue}for(Yr in Mr(mr.layout,Ir.layout,ht,ur,null,De.setLayoutProperty),Mr(mr.paint,Ir.paint,ht,ur,null,De.setPaintProperty),i.deepEqual(mr.filter,Ir.filter)||ht.push({command:De.setFilter,args:[ur,Ir.filter]}),(!i.deepEqual(mr.minzoom,Ir.minzoom)||!i.deepEqual(mr.maxzoom,Ir.maxzoom))&&ht.push({command:De.setLayerZoomRange,args:[ur,Ir.minzoom,Ir.maxzoom]}),mr)!mr.hasOwnProperty(Yr)||"layout"===Yr||"paint"===Yr||"filter"===Yr||"metadata"===Yr||"minzoom"===Yr||"maxzoom"===Yr||(0===Yr.indexOf("paint.")?Mr(mr[Yr],Ir[Yr],ht,ur,Yr.slice(6),De.setPaintProperty):i.deepEqual(mr[Yr],Ir[Yr])||ht.push({command:De.setLayerProperty,args:[ur,Yr,Ir[Yr]]}));for(Yr in Ir)!Ir.hasOwnProperty(Yr)||mr.hasOwnProperty(Yr)||"layout"===Yr||"paint"===Yr||"filter"===Yr||"metadata"===Yr||"minzoom"===Yr||"maxzoom"===Yr||(0===Yr.indexOf("paint.")?Mr(mr[Yr],Ir[Yr],ht,ur,Yr.slice(6),De.setPaintProperty):i.deepEqual(mr[Yr],Ir[Yr])||ht.push({command:De.setLayerProperty,args:[ur,Yr,Ir[Yr]]}))}}(Ct,Y.layers,ht)}catch(Yt){console.warn("Unable to compute style diff:",Yt),ht=[{command:De.setStyle,args:[Y]}]}return ht}var hn=function(Y,ht){this.reset(Y,ht)};hn.prototype.reset=function(Y,ht){this.points=Y||[],this._distances=[0];for(var _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(ht||0,.5*this.length),this.paddedLength=this.length-2*this.padding},hn.prototype.lerp=function(Y){if(1===this.points.length)return this.points[0];Y=i.clamp(Y,0,1);for(var ht=1,_=this._distances[ht],vt=Y*this.paddedLength+this.padding;_<vt&&ht<this._distances.length;)_=this._distances[++ht];var Ct=ht-1,Yt=this._distances[Ct],ae=_-Yt,ge=ae>0?(vt-Yt)/ae:0;return this.points[Ct].mult(1-ge).add(this.points[ht].mult(ge))};var hr=function(Y,ht,_){var vt=this.boxCells=[],Ct=this.circleCells=[];this.xCellCount=Math.ceil(Y/_),this.yCellCount=Math.ceil(ht/_);for(var Yt=0;Yt<this.xCellCount*this.yCellCount;Yt++)vt.push([]),Ct.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=Y,this.height=ht,this.xScale=this.xCellCount/Y,this.yScale=this.yCellCount/ht,this.boxUid=0,this.circleUid=0};function Ar(lt,Y,ht,_,vt){var Ct=i.create();return Y?(i.scale(Ct,Ct,[1/vt,1/vt,1]),ht||i.rotateZ(Ct,Ct,_.angle)):i.multiply(Ct,_.labelPlaneMatrix,lt),Ct}function Br(lt,Y,ht,_,vt){if(Y){var Ct=i.clone(lt);return i.scale(Ct,Ct,[vt,vt,1]),ht||i.rotateZ(Ct,Ct,-_.angle),Ct}return _.glCoordMatrix}function Or(lt,Y){var ht=[lt.x,lt.y,0,1];wr(ht,ht,Y);var _=ht[3];return{point:new i.Point(ht[0]/_,ht[1]/_),signedDistanceFromCamera:_}}function an(lt,Y){return.5+lt/Y*.5}function dn(lt,Y){var ht=lt[0]/lt[3],_=lt[1]/lt[3];return ht>=-Y[0]&&ht<=Y[0]&&_>=-Y[1]&&_<=Y[1]}function pn(lt,Y,ht,_,vt,Ct,Yt,ae){var ge=_?lt.textSizeData:lt.iconSizeData,ze=i.evaluateSizeForZoom(ge,ht.transform.zoom),Je=[256/ht.width*2+1,256/ht.height*2+1],ur=_?lt.text.dynamicLayoutVertexArray:lt.icon.dynamicLayoutVertexArray;ur.clear();for(var mr=lt.lineVertexArray,Ir=_?lt.text.placedSymbolArray:lt.icon.placedSymbolArray,Gr=ht.transform.width/ht.transform.height,Yr=!1,Ur=0;Ur<Ir.length;Ur++){var Kr=Ir.get(Ur);if(Kr.hidden||Kr.writingMode===i.WritingMode.vertical&&!Yr)Wn(Kr.numGlyphs,ur);else{Yr=!1;var cn=[Kr.anchorX,Kr.anchorY,0,1];if(i.transformMat4(cn,cn,Y),dn(cn,Je)){var Rn=an(ht.transform.cameraToCenterDistance,cn[3]),Un=i.evaluateSizeForFeature(ge,ze,Kr),Hn=Yt?Un/Rn:Un*Rn,Vn=new i.Point(Kr.anchorX,Kr.anchorY),_n=Or(Vn,vt).point,sa={},ia=Qn(Kr,Hn,!1,ae,Y,vt,Ct,lt.glyphOffsetArray,mr,ur,_n,Vn,sa,Gr);Yr=ia.useVertical,(ia.notEnoughRoom||Yr||ia.needsFlipping&&Qn(Kr,Hn,!0,ae,Y,vt,Ct,lt.glyphOffsetArray,mr,ur,_n,Vn,sa,Gr).notEnoughRoom)&&Wn(Kr.numGlyphs,ur)}else Wn(Kr.numGlyphs,ur)}}_?lt.text.dynamicLayoutVertexBuffer.updateData(ur):lt.icon.dynamicLayoutVertexBuffer.updateData(ur)}function wn(lt,Y,ht,_,vt,Ct,Yt,ae,ge,ze,Je){var ur=ae.glyphStartIndex+ae.numGlyphs,mr=ae.lineStartIndex,Ir=ae.lineStartIndex+ae.lineLength,Gr=Y.getoffsetX(ae.glyphStartIndex),Yr=Y.getoffsetX(ur-1),Ur=Zn(lt*Gr,ht,_,vt,Ct,Yt,ae.segment,mr,Ir,ge,ze,Je);if(!Ur)return null;var Kr=Zn(lt*Yr,ht,_,vt,Ct,Yt,ae.segment,mr,Ir,ge,ze,Je);return Kr?{first:Ur,last:Kr}:null}function Ln(lt,Y,ht,_){return lt===i.WritingMode.horizontal&&Math.abs(ht.y-Y.y)>Math.abs(ht.x-Y.x)*_?{useVertical:!0}:(lt===i.WritingMode.vertical?Y.y<ht.y:Y.x>ht.x)?{needsFlipping:!0}:null}function Qn(lt,Y,ht,_,vt,Ct,Yt,ae,ge,ze,Je,ur,mr,Ir){var Kr,Gr=Y/24,Yr=lt.lineOffsetX*Gr,Ur=lt.lineOffsetY*Gr;if(lt.numGlyphs>1){var cn=lt.glyphStartIndex+lt.numGlyphs,Cn=lt.lineStartIndex,Rn=lt.lineStartIndex+lt.lineLength,Un=wn(Gr,ae,Yr,Ur,ht,Je,ur,lt,ge,Ct,mr);if(!Un)return{notEnoughRoom:!0};var Hn=Or(Un.first.point,Yt).point,Vn=Or(Un.last.point,Yt).point;if(_&&!ht){var _n=Ln(lt.writingMode,Hn,Vn,Ir);if(_n)return _n}Kr=[Un.first];for(var sa=lt.glyphStartIndex+1;sa<cn-1;sa++)Kr.push(Zn(Gr*ae.getoffsetX(sa),Yr,Ur,ht,Je,ur,lt.segment,Cn,Rn,ge,Ct,mr));Kr.push(Un.last)}else{if(_&&!ht){var ia=Or(ur,vt).point,ha=lt.lineStartIndex+lt.segment+1,ga=new i.Point(ge.getx(ha),ge.gety(ha)),Ca=Or(ga,vt),Fa=Ca.signedDistanceFromCamera>0?Ca.point:Nn(ur,ga,ia,1,vt),$a=Ln(lt.writingMode,ia,Fa,Ir);if($a)return $a}var Oa=Zn(Gr*ae.getoffsetX(lt.glyphStartIndex),Yr,Ur,ht,Je,ur,lt.segment,lt.lineStartIndex,lt.lineStartIndex+lt.lineLength,ge,Ct,mr);if(!Oa)return{notEnoughRoom:!0};Kr=[Oa]}for(var Ha=0,Ta=Kr;Ha<Ta.length;Ha+=1){var _a=Ta[Ha];i.addDynamicAttributes(ze,_a.point,_a.angle)}return{}}function Nn(lt,Y,ht,_,vt){var Ct=Or(lt.add(lt.sub(Y)._unit()),vt).point,Yt=ht.sub(Ct);return ht.add(Yt._mult(_/Yt.mag()))}function Zn(lt,Y,ht,_,vt,Ct,Yt,ae,ge,ze,Je,ur){var mr=_?lt-Y:lt+Y,Ir=mr>0?1:-1,Gr=0;_&&(Ir*=-1,Gr=Math.PI),Ir<0&&(Gr+=Math.PI);for(var Yr=Ir>0?ae+Yt:ae+Yt+1,Ur=vt,Kr=vt,cn=0,Cn=0,Rn=Math.abs(mr),Un=[];cn+Cn<=Rn;){if((Yr+=Ir)<ae||Yr>=ge)return null;if(Kr=Ur,Un.push(Ur),void 0===(Ur=ur[Yr])){var Hn=new i.Point(ze.getx(Yr),ze.gety(Yr)),Vn=Or(Hn,Je);if(Vn.signedDistanceFromCamera>0)Ur=ur[Yr]=Vn.point;else{var _n=Yr-Ir;Ur=Nn(0===cn?Ct:new i.Point(ze.getx(_n),ze.gety(_n)),Hn,Kr,Rn-cn+1,Je)}}cn+=Cn,Cn=Kr.dist(Ur)}var ia=(Rn-cn)/Cn,ha=Ur.sub(Kr),ga=ha.mult(ia)._add(Kr);ga._add(ha._unit()._perp()._mult(ht*Ir));var Ca=Gr+Math.atan2(Ur.y-Kr.y,Ur.x-Kr.x);return Un.push(ga),{point:ga,angle:Ca,path:Un}}hr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},hr.prototype.insert=function(Y,ht,_,vt,Ct){this._forEachCell(ht,_,vt,Ct,this._insertBoxCell,this.boxUid++),this.boxKeys.push(Y),this.bboxes.push(ht),this.bboxes.push(_),this.bboxes.push(vt),this.bboxes.push(Ct)},hr.prototype.insertCircle=function(Y,ht,_,vt){this._forEachCell(ht-vt,_-vt,ht+vt,_+vt,this._insertCircleCell,this.circleUid++),this.circleKeys.push(Y),this.circles.push(ht),this.circles.push(_),this.circles.push(vt)},hr.prototype._insertBoxCell=function(Y,ht,_,vt,Ct,Yt){this.boxCells[Ct].push(Yt)},hr.prototype._insertCircleCell=function(Y,ht,_,vt,Ct,Yt){this.circleCells[Ct].push(Yt)},hr.prototype._query=function(Y,ht,_,vt,Ct,Yt){if(_<0||Y>this.width||vt<0||ht>this.height)return!Ct&&[];var ae=[];if(Y<=0&&ht<=0&&this.width<=_&&this.height<=vt){if(Ct)return!0;for(var ge=0;ge<this.boxKeys.length;ge++)ae.push({key:this.boxKeys[ge],x1:this.bboxes[4*ge],y1:this.bboxes[4*ge+1],x2:this.bboxes[4*ge+2],y2:this.bboxes[4*ge+3]});for(var ze=0;ze<this.circleKeys.length;ze++){var Je=this.circles[3*ze],ur=this.circles[3*ze+1],mr=this.circles[3*ze+2];ae.push({key:this.circleKeys[ze],x1:Je-mr,y1:ur-mr,x2:Je+mr,y2:ur+mr})}return Yt?ae.filter(Yt):ae}return this._forEachCell(Y,ht,_,vt,this._queryCell,ae,{hitTest:Ct,seenUids:{box:{},circle:{}}},Yt),Ct?ae.length>0:ae},hr.prototype._queryCircle=function(Y,ht,_,vt,Ct){var Yt=Y-_,ae=Y+_,ge=ht-_,ze=ht+_;if(ae<0||Yt>this.width||ze<0||ge>this.height)return!vt&&[];var Je=[];return this._forEachCell(Yt,ge,ae,ze,this._queryCellCircle,Je,{hitTest:vt,circle:{x:Y,y:ht,radius:_},seenUids:{box:{},circle:{}}},Ct),vt?Je.length>0:Je},hr.prototype.query=function(Y,ht,_,vt,Ct){return this._query(Y,ht,_,vt,!1,Ct)},hr.prototype.hitTest=function(Y,ht,_,vt,Ct){return this._query(Y,ht,_,vt,!0,Ct)},hr.prototype.hitTestCircle=function(Y,ht,_,vt){return this._queryCircle(Y,ht,_,!0,vt)},hr.prototype._queryCell=function(Y,ht,_,vt,Ct,Yt,ae,ge){var ze=ae.seenUids,Je=this.boxCells[Ct];if(null!==Je)for(var ur=this.bboxes,mr=0,Ir=Je;mr<Ir.length;mr+=1){var Gr=Ir[mr];if(!ze.box[Gr]){ze.box[Gr]=!0;var Yr=4*Gr;if(Y<=ur[Yr+2]&&ht<=ur[Yr+3]&&_>=ur[Yr+0]&&vt>=ur[Yr+1]&&(!ge||ge(this.boxKeys[Gr]))){if(ae.hitTest)return Yt.push(!0),!0;Yt.push({key:this.boxKeys[Gr],x1:ur[Yr],y1:ur[Yr+1],x2:ur[Yr+2],y2:ur[Yr+3]})}}}var Ur=this.circleCells[Ct];if(null!==Ur)for(var Kr=this.circles,cn=0,Cn=Ur;cn<Cn.length;cn+=1){var Rn=Cn[cn];if(!ze.circle[Rn]){ze.circle[Rn]=!0;var Un=3*Rn;if(this._circleAndRectCollide(Kr[Un],Kr[Un+1],Kr[Un+2],Y,ht,_,vt)&&(!ge||ge(this.circleKeys[Rn]))){if(ae.hitTest)return Yt.push(!0),!0;var Hn=Kr[Un],Vn=Kr[Un+1],_n=Kr[Un+2];Yt.push({key:this.circleKeys[Rn],x1:Hn-_n,y1:Vn-_n,x2:Hn+_n,y2:Vn+_n})}}}},hr.prototype._queryCellCircle=function(Y,ht,_,vt,Ct,Yt,ae,ge){var ze=ae.circle,Je=ae.seenUids,ur=this.boxCells[Ct];if(null!==ur)for(var mr=this.bboxes,Ir=0,Gr=ur;Ir<Gr.length;Ir+=1){var Yr=Gr[Ir];if(!Je.box[Yr]){Je.box[Yr]=!0;var Ur=4*Yr;if(this._circleAndRectCollide(ze.x,ze.y,ze.radius,mr[Ur+0],mr[Ur+1],mr[Ur+2],mr[Ur+3])&&(!ge||ge(this.boxKeys[Yr])))return Yt.push(!0),!0}}var Kr=this.circleCells[Ct];if(null!==Kr)for(var cn=this.circles,Cn=0,Rn=Kr;Cn<Rn.length;Cn+=1){var Un=Rn[Cn];if(!Je.circle[Un]){Je.circle[Un]=!0;var Hn=3*Un;if(this._circlesCollide(cn[Hn],cn[Hn+1],cn[Hn+2],ze.x,ze.y,ze.radius)&&(!ge||ge(this.circleKeys[Un])))return Yt.push(!0),!0}}},hr.prototype._forEachCell=function(Y,ht,_,vt,Ct,Yt,ae,ge){for(var ze=this._convertToXCellCoord(Y),Je=this._convertToYCellCoord(ht),ur=this._convertToXCellCoord(_),mr=this._convertToYCellCoord(vt),Ir=ze;Ir<=ur;Ir++)for(var Gr=Je;Gr<=mr;Gr++)if(Ct.call(this,Y,ht,_,vt,this.xCellCount*Gr+Ir,Yt,ae,ge))return},hr.prototype._convertToXCellCoord=function(Y){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(Y*this.xScale)))},hr.prototype._convertToYCellCoord=function(Y){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(Y*this.yScale)))},hr.prototype._circlesCollide=function(Y,ht,_,vt,Ct,Yt){var ae=vt-Y,ge=Ct-ht,ze=_+Yt;return ze*ze>ae*ae+ge*ge},hr.prototype._circleAndRectCollide=function(Y,ht,_,vt,Ct,Yt,ae){var ge=(Yt-vt)/2,ze=Math.abs(Y-(vt+ge));if(ze>ge+_)return!1;var Je=(ae-Ct)/2,ur=Math.abs(ht-(Ct+Je));if(ur>Je+_)return!1;if(ze<=ge||ur<=Je)return!0;var mr=ze-ge,Ir=ur-Je;return mr*mr+Ir*Ir<=_*_};var Bn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Wn(lt,Y){for(var ht=0;ht<lt;ht++){var _=Y.length;Y.resize(_+4),Y.float32.set(Bn,3*_)}}function wr(lt,Y,ht){var _=Y[0],vt=Y[1];return lt[0]=ht[0]*_+ht[4]*vt+ht[12],lt[1]=ht[1]*_+ht[5]*vt+ht[13],lt[3]=ht[3]*_+ht[7]*vt+ht[15],lt}var en=100,tn=function(Y,ht,_){void 0===ht&&(ht=new hr(Y.width+200,Y.height+200,25)),void 0===_&&(_=new hr(Y.width+200,Y.height+200,25)),this.transform=Y,this.grid=ht,this.ignoredGrid=_,this.pitchfactor=Math.cos(Y._pitch)*Y.cameraToCenterDistance,this.screenRightBoundary=Y.width+en,this.screenBottomBoundary=Y.height+en,this.gridRightBoundary=Y.width+200,this.gridBottomBoundary=Y.height+200};function gn(lt,Y,ht){return Y*(i.EXTENT/(lt.tileSize*Math.pow(2,ht-lt.tileID.overscaledZ)))}tn.prototype.placeCollisionBox=function(Y,ht,_,vt,Ct){var Yt=this.projectAndGetPerspectiveRatio(vt,Y.anchorPointX,Y.anchorPointY),ae=_*Yt.perspectiveRatio,ge=Y.x1*ae+Yt.point.x,ze=Y.y1*ae+Yt.point.y,Je=Y.x2*ae+Yt.point.x,ur=Y.y2*ae+Yt.point.y;return!this.isInsideGrid(ge,ze,Je,ur)||!ht&&this.grid.hitTest(ge,ze,Je,ur,Ct)?{box:[],offscreen:!1}:{box:[ge,ze,Je,ur],offscreen:this.isOffscreen(ge,ze,Je,ur)}},tn.prototype.placeCollisionCircles=function(Y,ht,_,vt,Ct,Yt,ae,ge,ze,Je,ur,mr,Ir){var Gr=[],Yr=new i.Point(ht.anchorX,ht.anchorY),Ur=Or(Yr,Yt),Kr=an(this.transform.cameraToCenterDistance,Ur.signedDistanceFromCamera),Cn=(Je?Ct/Kr:Ct*Kr)/i.ONE_EM,Rn=Or(Yr,ae).point,_n=wn(Cn,vt,ht.lineOffsetX*Cn,ht.lineOffsetY*Cn,!1,Rn,Yr,ht,_,ae,{}),sa=!1,ia=!1,ha=!0;if(_n){for(var ga=.5*mr*Kr+Ir,Ca=new i.Point(-en,-en),Fa=new i.Point(this.screenRightBoundary,this.screenBottomBoundary),$a=new hn,Oa=_n.first,Ha=_n.last,Ta=[],_a=Oa.path.length-1;_a>=1;_a--)Ta.push(Oa.path[_a]);for(var ni=1;ni<Ha.path.length;ni++)Ta.push(Ha.path[ni]);var oi=2.5*ga;if(ge){var Ya=Ta.map(function($s){return Or($s,ge)});Ta=Ya.some(function($s){return $s.signedDistanceFromCamera<=0})?[]:Ya.map(function($s){return $s.point})}var ci=[];if(Ta.length>0){for(var za=Ta[0].clone(),Za=Ta[0].clone(),Ri=1;Ri<Ta.length;Ri++)za.x=Math.min(za.x,Ta[Ri].x),za.y=Math.min(za.y,Ta[Ri].y),Za.x=Math.max(Za.x,Ta[Ri].x),Za.y=Math.max(Za.y,Ta[Ri].y);ci=za.x>=Ca.x&&Za.x<=Fa.x&&za.y>=Ca.y&&Za.y<=Fa.y?[Ta]:Za.x<Ca.x||za.x>Fa.x||Za.y<Ca.y||za.y>Fa.y?[]:i.clipLine([Ta],Ca.x,Ca.y,Fa.x,Fa.y)}for(var Hi=0,ds=ci;Hi<ds.length;Hi+=1){$a.reset(ds[Hi],.25*ga);var js;js=$a.length<=.5*ga?1:Math.ceil($a.paddedLength/oi)+1;for(var Ks=0;Ks<js;Ks++){var Tl=Ks/Math.max(js-1,1),Js=$a.lerp(Tl),Co=Js.x+en,Jl=Js.y+en;Gr.push(Co,Jl,ga,0);var fo=Co-ga,qo=Jl-ga,Qs=Co+ga,Rs=Jl+ga;if(ha=ha&&this.isOffscreen(fo,qo,Qs,Rs),ia=ia||this.isInsideGrid(fo,qo,Qs,Rs),!Y&&this.grid.hitTestCircle(Co,Jl,ga,ur)&&(sa=!0,!ze))return{circles:[],offscreen:!1,collisionDetected:sa}}}}return{circles:!ze&&sa||!ia?[]:Gr,offscreen:ha,collisionDetected:sa}},tn.prototype.queryRenderedSymbols=function(Y){if(0===Y.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var ht=[],_=1/0,vt=1/0,Ct=-1/0,Yt=-1/0,ae=0,ge=Y;ae<ge.length;ae+=1){var ze=ge[ae],Je=new i.Point(ze.x+en,ze.y+en);_=Math.min(_,Je.x),vt=Math.min(vt,Je.y),Ct=Math.max(Ct,Je.x),Yt=Math.max(Yt,Je.y),ht.push(Je)}for(var mr={},Ir={},Gr=0,Yr=this.grid.query(_,vt,Ct,Yt).concat(this.ignoredGrid.query(_,vt,Ct,Yt));Gr<Yr.length;Gr+=1){var Ur=Yr[Gr],Kr=Ur.key;if(void 0===mr[Kr.bucketInstanceId]&&(mr[Kr.bucketInstanceId]={}),!mr[Kr.bucketInstanceId][Kr.featureIndex]){var cn=[new i.Point(Ur.x1,Ur.y1),new i.Point(Ur.x2,Ur.y1),new i.Point(Ur.x2,Ur.y2),new i.Point(Ur.x1,Ur.y2)];!i.polygonIntersectsPolygon(ht,cn)||(mr[Kr.bucketInstanceId][Kr.featureIndex]=!0,void 0===Ir[Kr.bucketInstanceId]&&(Ir[Kr.bucketInstanceId]=[]),Ir[Kr.bucketInstanceId].push(Kr.featureIndex))}}return Ir},tn.prototype.insertCollisionBox=function(Y,ht,_,vt,Ct){(ht?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:vt,collisionGroupID:Ct},Y[0],Y[1],Y[2],Y[3])},tn.prototype.insertCollisionCircles=function(Y,ht,_,vt,Ct){for(var Yt=ht?this.ignoredGrid:this.grid,ae={bucketInstanceId:_,featureIndex:vt,collisionGroupID:Ct},ge=0;ge<Y.length;ge+=4)Yt.insertCircle(ae,Y[ge],Y[ge+1],Y[ge+2])},tn.prototype.projectAndGetPerspectiveRatio=function(Y,ht,_){var vt=[ht,_,0,1];return wr(vt,vt,Y),{point:new i.Point((vt[0]/vt[3]+1)/2*this.transform.width+en,(-vt[1]/vt[3]+1)/2*this.transform.height+en),perspectiveRatio:.5+this.transform.cameraToCenterDistance/vt[3]*.5}},tn.prototype.isOffscreen=function(Y,ht,_,vt){return _<en||Y>=this.screenRightBoundary||vt<en||ht>this.screenBottomBoundary},tn.prototype.isInsideGrid=function(Y,ht,_,vt){return _>=0&&Y<this.gridRightBoundary&&vt>=0&&ht<this.gridBottomBoundary},tn.prototype.getViewportMatrix=function(){var Y=i.identity([]);return i.translate(Y,Y,[-en,-en,0]),Y};var Fn=function(Y,ht,_,vt){this.opacity=Y?Math.max(0,Math.min(1,Y.opacity+(Y.placed?ht:-ht))):vt&&_?1:0,this.placed=_};Fn.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Tn=function(Y,ht,_,vt,Ct){this.text=new Fn(Y?Y.text:null,ht,_,Ct),this.icon=new Fn(Y?Y.icon:null,ht,vt,Ct)};Tn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Mn=function(Y,ht,_){this.text=Y,this.icon=ht,this.skipFade=_},In=function(){this.invProjMatrix=i.create(),this.viewportMatrix=i.create(),this.circles=[]},Gn=function(Y,ht,_,vt,Ct){this.bucketInstanceId=Y,this.featureIndex=ht,this.sourceLayerIndex=_,this.bucketIndex=vt,this.tileID=Ct},ua=function(Y){this.crossSourceCollisions=Y,this.maxGroupID=0,this.collisionGroups={}};function ka(lt,Y,ht,_,vt){var Ct=i.getAnchorAlignment(lt),ge=-(Ct.horizontalAlign-.5)*Y,ze=-(Ct.verticalAlign-.5)*ht,Je=i.evaluateVariableOffset(lt,_);return new i.Point(ge+Je[0]*vt,ze+Je[1]*vt)}function Ze(lt,Y,ht,_,vt,Ct){var Yt=lt.x1,ae=lt.x2,ge=lt.y1,ze=lt.y2,Je=lt.anchorPointX,ur=lt.anchorPointY,mr=new i.Point(Y,ht);return _&&mr._rotate(vt?Ct:-Ct),{x1:Yt+mr.x,y1:ge+mr.y,x2:ae+mr.x,y2:ze+mr.y,anchorPointX:Je,anchorPointY:ur}}ua.prototype.get=function(Y){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[Y]){var ht=++this.maxGroupID;this.collisionGroups[Y]={ID:ht,predicate:function(_){return _.collisionGroupID===ht}}}return this.collisionGroups[Y]};var Tr=function(Y,ht,_,vt){this.transform=Y.clone(),this.collisionIndex=new tn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=ht,this.retainedQueryData={},this.collisionGroups=new ua(_),this.collisionCircleArrays={},this.prevPlacement=vt,vt&&(vt.prevPlacement=void 0),this.placedOrientations={}};function _r(lt,Y,ht,_,vt){lt.emplaceBack(Y?1:0,ht?1:0,_||0,vt||0),lt.emplaceBack(Y?1:0,ht?1:0,_||0,vt||0),lt.emplaceBack(Y?1:0,ht?1:0,_||0,vt||0),lt.emplaceBack(Y?1:0,ht?1:0,_||0,vt||0)}Tr.prototype.getBucketParts=function(Y,ht,_,vt){var Ct=_.getBucket(ht),Yt=_.latestFeatureIndex;if(Ct&&Yt&&ht.id===Ct.layerIds[0]){var ae=_.collisionBoxArray,ge=Ct.layers[0].layout,ze=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),Je=_.tileSize/i.EXTENT,ur=this.transform.calculatePosMatrix(_.tileID.toUnwrapped()),mr="map"===ge.get("text-pitch-alignment"),Ir="map"===ge.get("text-rotation-alignment"),Gr=gn(_,1,this.transform.zoom),Yr=Ar(ur,mr,Ir,this.transform,Gr),Ur=null;if(mr){var Kr=Br(ur,mr,Ir,this.transform,Gr);Ur=i.multiply([],this.transform.labelPlaneMatrix,Kr)}this.retainedQueryData[Ct.bucketInstanceId]=new Gn(Ct.bucketInstanceId,Yt,Ct.sourceLayerIndex,Ct.index,_.tileID);var cn={bucket:Ct,layout:ge,posMatrix:ur,textLabelPlaneMatrix:Yr,labelToScreenMatrix:Ur,scale:ze,textPixelRatio:Je,holdingForFade:_.holdingForFade(),collisionBoxArray:ae,partiallyEvaluatedTextSize:i.evaluateSizeForZoom(Ct.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Ct.sourceID)};if(vt)for(var Cn=0,Rn=Ct.sortKeyRanges;Cn<Rn.length;Cn+=1){var Un=Rn[Cn];Y.push({sortKey:Un.sortKey,symbolInstanceStart:Un.symbolInstanceStart,symbolInstanceEnd:Un.symbolInstanceEnd,parameters:cn})}else Y.push({symbolInstanceStart:0,symbolInstanceEnd:Ct.symbolInstances.length,parameters:cn})}},Tr.prototype.attemptAnchorPlacement=function(Y,ht,_,vt,Ct,Yt,ae,ge,ze,Je,ur,mr,Ir,Gr,Yr){var Rn,Ur=[mr.textOffset0,mr.textOffset1],Kr=ka(Y,_,vt,Ur,Ct),cn=this.collisionIndex.placeCollisionBox(Ze(ht,Kr.x,Kr.y,Yt,ae,this.transform.angle),ur,ge,ze,Je.predicate);if(!Yr||0!==this.collisionIndex.placeCollisionBox(Ze(Yr,Kr.x,Kr.y,Yt,ae,this.transform.angle),ur,ge,ze,Je.predicate).box.length)return cn.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[mr.crossTileID]&&this.prevPlacement.placements[mr.crossTileID]&&this.prevPlacement.placements[mr.crossTileID].text&&(Rn=this.prevPlacement.variableOffsets[mr.crossTileID].anchor),this.variableOffsets[mr.crossTileID]={textOffset:Ur,width:_,height:vt,anchor:Y,textBoxScale:Ct,prevAnchor:Rn},this.markUsedJustification(Ir,Y,mr,Gr),Ir.allowVerticalPlacement&&(this.markUsedOrientation(Ir,Gr,mr),this.placedOrientations[mr.crossTileID]=Gr),{shift:Kr,placedGlyphBoxes:cn}):void 0},Tr.prototype.placeLayerBucketPart=function(Y,ht,_){var vt=this,Ct=Y.parameters,Yt=Ct.bucket,ae=Ct.layout,ge=Ct.posMatrix,ze=Ct.textLabelPlaneMatrix,Je=Ct.labelToScreenMatrix,ur=Ct.textPixelRatio,mr=Ct.holdingForFade,Ir=Ct.collisionBoxArray,Gr=Ct.partiallyEvaluatedTextSize,Yr=Ct.collisionGroup,Ur=ae.get("text-optional"),Kr=ae.get("icon-optional"),cn=ae.get("text-allow-overlap"),Cn=ae.get("icon-allow-overlap"),Rn="map"===ae.get("text-rotation-alignment"),Un="map"===ae.get("text-pitch-alignment"),Hn="none"!==ae.get("icon-text-fit"),Vn="viewport-y"===ae.get("symbol-z-order"),_n=cn&&(Cn||!Yt.hasIconData()||Kr),sa=Cn&&(cn||!Yt.hasTextData()||Ur);!Yt.collisionArrays&&Ir&&Yt.deserializeCollisionBoxes(Ir);var ia=function(Oa,Ha){if(!ht[Oa.crossTileID]){if(mr)return void(vt.placements[Oa.crossTileID]=new Mn(!1,!1,!1));var za,Ta=!1,_a=!1,ni=!0,oi=null,Ya={box:null,offscreen:null},ci={box:null,offscreen:null},Za=null,Ri=null,Hi=0,ds=0,ps=0;Ha.textFeatureIndex?Hi=Ha.textFeatureIndex:Oa.useRuntimeCollisionCircles&&(Hi=Oa.featureIndex),Ha.verticalTextFeatureIndex&&(ds=Ha.verticalTextFeatureIndex);var js=Ha.textBox;if(js){var Ks=function(Oi){var Vo=i.WritingMode.horizontal;if(Yt.allowVerticalPlacement&&!Oi&&vt.prevPlacement){var Ho=vt.prevPlacement.placedOrientations[Oa.crossTileID];Ho&&(vt.placedOrientations[Oa.crossTileID]=Ho,vt.markUsedOrientation(Yt,Vo=Ho,Oa))}return Vo},Tl=function(Oi,Vo){if(Yt.allowVerticalPlacement&&Oa.numVerticalGlyphVertices>0&&Ha.verticalTextBox)for(var Ho=0,kf=Yt.writingModes;Ho<kf.length&&(kf[Ho]===i.WritingMode.vertical?(Ya=Vo(),ci=Ya):Ya=Oi(),!(Ya&&Ya.box&&Ya.box.length));Ho+=1);else Ya=Oi()};if(ae.get("text-variable-anchor")){var fo=ae.get("text-variable-anchor");if(vt.prevPlacement&&vt.prevPlacement.variableOffsets[Oa.crossTileID]){var qo=vt.prevPlacement.variableOffsets[Oa.crossTileID];fo.indexOf(qo.anchor)>0&&(fo=fo.filter(function(Oi){return Oi!==qo.anchor})).unshift(qo.anchor)}var Qs=function(Oi,Vo,Ho){for(var kf=Oi.x2-Oi.x1,ic=Oi.y2-Oi.y1,Jc=Oa.textBoxScale,Qc=Hn&&!Cn?Vo:null,Af={box:[],offscreen:!1},$c=cn?2*fo.length:fo.length,zf=0;zf<$c;++zf){var oc=vt.attemptAnchorPlacement(fo[zf%fo.length],Oi,kf,ic,Jc,Rn,Un,ur,ge,Yr,zf>=fo.length,Oa,Yt,Ho,Qc);if(oc&&(Af=oc.placedGlyphBoxes)&&Af.box&&Af.box.length){Ta=!0,oi=oc.shift;break}}return Af};Tl(function(){return Qs(js,Ha.iconBox,i.WritingMode.horizontal)},function(){var Oi=Ha.verticalTextBox;return Yt.allowVerticalPlacement&&!(Ya&&Ya.box&&Ya.box.length)&&Oa.numVerticalGlyphVertices>0&&Oi?Qs(Oi,Ha.verticalIconBox,i.WritingMode.vertical):{box:null,offscreen:null}}),Ya&&(Ta=Ya.box,ni=Ya.offscreen);var Df=Ks(Ya&&Ya.box);if(!Ta&&vt.prevPlacement){var bu=vt.prevPlacement.variableOffsets[Oa.crossTileID];bu&&(vt.variableOffsets[Oa.crossTileID]=bu,vt.markUsedJustification(Yt,bu.anchor,Oa,Df))}}else{var Js=function(Oi,Vo){var Ho=vt.collisionIndex.placeCollisionBox(Oi,cn,ur,ge,Yr.predicate);return Ho&&Ho.box&&Ho.box.length&&(vt.markUsedOrientation(Yt,Vo,Oa),vt.placedOrientations[Oa.crossTileID]=Vo),Ho};Tl(function(){return Js(js,i.WritingMode.horizontal)},function(){var Oi=Ha.verticalTextBox;return Yt.allowVerticalPlacement&&Oa.numVerticalGlyphVertices>0&&Oi?Js(Oi,i.WritingMode.vertical):{box:null,offscreen:null}}),Ks(Ya&&Ya.box&&Ya.box.length)}}if(Ta=(za=Ya)&&za.box&&za.box.length>0,ni=za&&za.offscreen,Oa.useRuntimeCollisionCircles){var oo=Yt.text.placedSymbolArray.get(Oa.centerJustifiedTextSymbolIndex),wf=i.evaluateSizeForFeature(Yt.textSizeData,Gr,oo),po=ae.get("text-padding");Za=vt.collisionIndex.placeCollisionCircles(cn,oo,Yt.lineVertexArray,Yt.glyphOffsetArray,wf,ge,ze,Je,_,Un,Yr.predicate,Oa.collisionCircleDiameter,po),Ta=cn||Za.circles.length>0&&!Za.collisionDetected,ni=ni&&Za.offscreen}if(Ha.iconFeatureIndex&&(ps=Ha.iconFeatureIndex),Ha.iconBox){var Rf=function(Oi){var Vo=Hn&&oi?Ze(Oi,oi.x,oi.y,Rn,Un,vt.transform.angle):Oi;return vt.collisionIndex.placeCollisionBox(Vo,Cn,ur,ge,Yr.predicate)};_a=ci&&ci.box&&ci.box.length&&Ha.verticalIconBox?(Ri=Rf(Ha.verticalIconBox)).box.length>0:(Ri=Rf(Ha.iconBox)).box.length>0,ni=ni&&Ri.offscreen}var If=Ur||0===Oa.numHorizontalGlyphVertices&&0===Oa.numVerticalGlyphVertices,Cc=Kr||0===Oa.numIconVertices;if(If||Cc?Cc?If||(_a=_a&&Ta):Ta=_a&&Ta:_a=Ta=_a&&Ta,Ta&&za&&za.box&&vt.collisionIndex.insertCollisionBox(za.box,ae.get("text-ignore-placement"),Yt.bucketInstanceId,ci&&ci.box&&ds?ds:Hi,Yr.ID),_a&&Ri&&vt.collisionIndex.insertCollisionBox(Ri.box,ae.get("icon-ignore-placement"),Yt.bucketInstanceId,ps,Yr.ID),Za&&(Ta&&vt.collisionIndex.insertCollisionCircles(Za.circles,ae.get("text-ignore-placement"),Yt.bucketInstanceId,Hi,Yr.ID),_)){var Ff=Yt.bucketInstanceId,Qu=vt.collisionCircleArrays[Ff];void 0===Qu&&(Qu=vt.collisionCircleArrays[Ff]=new In);for(var $u=0;$u<Za.circles.length;$u+=4)Qu.circles.push(Za.circles[$u+0]),Qu.circles.push(Za.circles[$u+1]),Qu.circles.push(Za.circles[$u+2]),Qu.circles.push(Za.collisionDetected?1:0)}vt.placements[Oa.crossTileID]=new Mn(Ta||_n,_a||sa,ni||Yt.justReloaded),ht[Oa.crossTileID]=!0}};if(Vn)for(var ha=Yt.getSortedSymbolIndexes(this.transform.angle),ga=ha.length-1;ga>=0;--ga){var Ca=ha[ga];ia(Yt.symbolInstances.get(Ca),Yt.collisionArrays[Ca])}else for(var Fa=Y.symbolInstanceStart;Fa<Y.symbolInstanceEnd;Fa++)ia(Yt.symbolInstances.get(Fa),Yt.collisionArrays[Fa]);if(_&&Yt.bucketInstanceId in this.collisionCircleArrays){var $a=this.collisionCircleArrays[Yt.bucketInstanceId];i.invert($a.invProjMatrix,ge),$a.viewportMatrix=this.collisionIndex.getViewportMatrix()}Yt.justReloaded=!1},Tr.prototype.markUsedJustification=function(Y,ht,_,vt){var Yt;Yt=vt===i.WritingMode.vertical?_.verticalPlacedTextSymbolIndex:{left:_.leftJustifiedTextSymbolIndex,center:_.centerJustifiedTextSymbolIndex,right:_.rightJustifiedTextSymbolIndex}[i.getAnchorJustification(ht)];for(var ge=0,ze=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex,_.verticalPlacedTextSymbolIndex];ge<ze.length;ge+=1){var Je=ze[ge];Je>=0&&(Y.text.placedSymbolArray.get(Je).crossTileID=Yt>=0&&Je!==Yt?0:_.crossTileID)}},Tr.prototype.markUsedOrientation=function(Y,ht,_){for(var vt=ht===i.WritingMode.horizontal||ht===i.WritingMode.horizontalOnly?ht:0,Ct=ht===i.WritingMode.vertical?ht:0,ae=0,ge=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex];ae<ge.length;ae+=1)Y.text.placedSymbolArray.get(ge[ae]).placedOrientation=vt;_.verticalPlacedTextSymbolIndex&&(Y.text.placedSymbolArray.get(_.verticalPlacedTextSymbolIndex).placedOrientation=Ct)},Tr.prototype.commit=function(Y){this.commitTime=Y,this.zoomAtLastRecencyCheck=this.transform.zoom;var ht=this.prevPlacement,_=!1;this.prevZoomAdjustment=ht?ht.zoomAdjustment(this.transform.zoom):0;var vt=ht?ht.symbolFadeChange(Y):1,Ct=ht?ht.opacities:{},Yt=ht?ht.variableOffsets:{},ae=ht?ht.placedOrientations:{};for(var ge in this.placements){var ze=this.placements[ge],Je=Ct[ge];Je?(this.opacities[ge]=new Tn(Je,vt,ze.text,ze.icon),_=_||ze.text!==Je.text.placed||ze.icon!==Je.icon.placed):(this.opacities[ge]=new Tn(null,vt,ze.text,ze.icon,ze.skipFade),_=_||ze.text||ze.icon)}for(var ur in Ct){var mr=Ct[ur];if(!this.opacities[ur]){var Ir=new Tn(mr,vt,!1,!1);Ir.isHidden()||(this.opacities[ur]=Ir,_=_||mr.text.placed||mr.icon.placed)}}for(var Gr in Yt)!this.variableOffsets[Gr]&&this.opacities[Gr]&&!this.opacities[Gr].isHidden()&&(this.variableOffsets[Gr]=Yt[Gr]);for(var Yr in ae)!this.placedOrientations[Yr]&&this.opacities[Yr]&&!this.opacities[Yr].isHidden()&&(this.placedOrientations[Yr]=ae[Yr]);_?this.lastPlacementChangeTime=Y:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=ht?ht.lastPlacementChangeTime:Y)},Tr.prototype.updateLayerOpacities=function(Y,ht){for(var _={},vt=0,Ct=ht;vt<Ct.length;vt+=1){var Yt=Ct[vt],ae=Yt.getBucket(Y);ae&&Yt.latestFeatureIndex&&Y.id===ae.layerIds[0]&&this.updateBucketOpacities(ae,_,Yt.collisionBoxArray)}},Tr.prototype.updateBucketOpacities=function(Y,ht,_){var vt=this;Y.hasTextData()&&Y.text.opacityVertexArray.clear(),Y.hasIconData()&&Y.icon.opacityVertexArray.clear(),Y.hasIconCollisionBoxData()&&Y.iconCollisionBox.collisionVertexArray.clear(),Y.hasTextCollisionBoxData()&&Y.textCollisionBox.collisionVertexArray.clear();var Ct=Y.layers[0].layout,Yt=new Tn(null,0,!1,!1,!0),ae=Ct.get("text-allow-overlap"),ge=Ct.get("icon-allow-overlap"),ze=Ct.get("text-variable-anchor"),Je="map"===Ct.get("text-rotation-alignment"),ur="map"===Ct.get("text-pitch-alignment"),mr="none"!==Ct.get("icon-text-fit"),Ir=new Tn(null,0,ae&&(ge||!Y.hasIconData()||Ct.get("icon-optional")),ge&&(ae||!Y.hasTextData()||Ct.get("text-optional")),!0);!Y.collisionArrays&&_&&(Y.hasIconCollisionBoxData()||Y.hasTextCollisionBoxData())&&Y.deserializeCollisionBoxes(_);for(var Gr=function(cn,Cn,Rn){for(var Un=0;Un<Cn/4;Un++)cn.opacityVertexArray.emplaceBack(Rn)},Yr=function(cn){var Cn=Y.symbolInstances.get(cn),Rn=Cn.numHorizontalGlyphVertices,Un=Cn.numVerticalGlyphVertices,Hn=Cn.crossTileID,_n=vt.opacities[Hn];ht[Hn]?_n=Yt:_n||(vt.opacities[Hn]=_n=Ir),ht[Hn]=!0;var ia=Cn.numIconVertices>0,ha=vt.placedOrientations[Cn.crossTileID],ga=ha===i.WritingMode.vertical,Ca=ha===i.WritingMode.horizontal||ha===i.WritingMode.horizontalOnly;if(Rn>0||Un>0){var Fa=He(_n.text);Gr(Y.text,Rn,ga?Dr:Fa),Gr(Y.text,Un,Ca?Dr:Fa);var Ha=_n.text.isHidden();[Cn.rightJustifiedTextSymbolIndex,Cn.centerJustifiedTextSymbolIndex,Cn.leftJustifiedTextSymbolIndex].forEach(function(ps){ps>=0&&(Y.text.placedSymbolArray.get(ps).hidden=Ha||ga?1:0)}),Cn.verticalPlacedTextSymbolIndex>=0&&(Y.text.placedSymbolArray.get(Cn.verticalPlacedTextSymbolIndex).hidden=Ha||Ca?1:0);var Ta=vt.variableOffsets[Cn.crossTileID];Ta&&vt.markUsedJustification(Y,Ta.anchor,Cn,ha);var _a=vt.placedOrientations[Cn.crossTileID];_a&&(vt.markUsedJustification(Y,"left",Cn,_a),vt.markUsedOrientation(Y,_a,Cn))}if(ia){var ni=He(_n.icon),oi=!(mr&&Cn.verticalPlacedIconSymbolIndex&&ga);Cn.placedIconSymbolIndex>=0&&(Gr(Y.icon,Cn.numIconVertices,oi?ni:Dr),Y.icon.placedSymbolArray.get(Cn.placedIconSymbolIndex).hidden=_n.icon.isHidden()),Cn.verticalPlacedIconSymbolIndex>=0&&(Gr(Y.icon,Cn.numVerticalIconVertices,oi?Dr:ni),Y.icon.placedSymbolArray.get(Cn.verticalPlacedIconSymbolIndex).hidden=_n.icon.isHidden())}if(Y.hasIconCollisionBoxData()||Y.hasTextCollisionBoxData()){var za=Y.collisionArrays[cn];if(za){var Za=new i.Point(0,0);if(za.textBox||za.verticalTextBox){var Ri=!0;if(ze){var Hi=vt.variableOffsets[Hn];Hi?(Za=ka(Hi.anchor,Hi.width,Hi.height,Hi.textOffset,Hi.textBoxScale),Je&&Za._rotate(ur?vt.transform.angle:-vt.transform.angle)):Ri=!1}za.textBox&&_r(Y.textCollisionBox.collisionVertexArray,_n.text.placed,!Ri||ga,Za.x,Za.y),za.verticalTextBox&&_r(Y.textCollisionBox.collisionVertexArray,_n.text.placed,!Ri||Ca,Za.x,Za.y)}var ds=Boolean(!Ca&&za.verticalIconBox);za.iconBox&&_r(Y.iconCollisionBox.collisionVertexArray,_n.icon.placed,ds,mr?Za.x:0,mr?Za.y:0),za.verticalIconBox&&_r(Y.iconCollisionBox.collisionVertexArray,_n.icon.placed,!ds,mr?Za.x:0,mr?Za.y:0)}}},Ur=0;Ur<Y.symbolInstances.length;Ur++)Yr(Ur);if(Y.sortFeatures(this.transform.angle),this.retainedQueryData[Y.bucketInstanceId]&&(this.retainedQueryData[Y.bucketInstanceId].featureSortOrder=Y.featureSortOrder),Y.hasTextData()&&Y.text.opacityVertexBuffer&&Y.text.opacityVertexBuffer.updateData(Y.text.opacityVertexArray),Y.hasIconData()&&Y.icon.opacityVertexBuffer&&Y.icon.opacityVertexBuffer.updateData(Y.icon.opacityVertexArray),Y.hasIconCollisionBoxData()&&Y.iconCollisionBox.collisionVertexBuffer&&Y.iconCollisionBox.collisionVertexBuffer.updateData(Y.iconCollisionBox.collisionVertexArray),Y.hasTextCollisionBoxData()&&Y.textCollisionBox.collisionVertexBuffer&&Y.textCollisionBox.collisionVertexBuffer.updateData(Y.textCollisionBox.collisionVertexArray),Y.bucketInstanceId in this.collisionCircleArrays){var Kr=this.collisionCircleArrays[Y.bucketInstanceId];Y.placementInvProjMatrix=Kr.invProjMatrix,Y.placementViewportMatrix=Kr.viewportMatrix,Y.collisionCircleArray=Kr.circles,delete this.collisionCircleArrays[Y.bucketInstanceId]}},Tr.prototype.symbolFadeChange=function(Y){return 0===this.fadeDuration?1:(Y-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Tr.prototype.zoomAdjustment=function(Y){return Math.max(0,(this.transform.zoom-Y)/1.5)},Tr.prototype.hasTransitions=function(Y){return this.stale||Y-this.lastPlacementChangeTime<this.fadeDuration},Tr.prototype.stillRecent=function(Y,ht){var _=this.zoomAtLastRecencyCheck===ht?1-this.zoomAdjustment(ht):1;return this.zoomAtLastRecencyCheck=ht,this.commitTime+this.fadeDuration*_>Y},Tr.prototype.setStale=function(){this.stale=!0};var fn=Math.pow(2,25),sn=Math.pow(2,24),En=Math.pow(2,17),xn=Math.pow(2,16),vn=Math.pow(2,9),Lr=Math.pow(2,8),Er=Math.pow(2,1);function He(lt){if(0===lt.opacity&&!lt.placed)return 0;if(1===lt.opacity&&lt.placed)return 4294967295;var Y=lt.placed?1:0,ht=Math.floor(127*lt.opacity);return ht*fn+Y*sn+ht*En+Y*xn+ht*vn+Y*Lr+ht*Er+Y}var Dr=0,Ve=function(Y){this._sortAcrossTiles="viewport-y"!==Y.layout.get("symbol-z-order")&&void 0!==Y.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Ve.prototype.continuePlacement=function(Y,ht,_,vt,Ct){for(var Yt=this._bucketParts;this._currentTileIndex<Y.length;)if(ht.getBucketParts(Yt,vt,Y[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,Ct())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Yt.sort(function(ze,Je){return ze.sortKey-Je.sortKey}));this._currentPartIndex<Yt.length;)if(ht.placeLayerBucketPart(Yt[this._currentPartIndex],this._seenCrossTileIDs,_),this._currentPartIndex++,Ct())return!0;return!1};var je=function(Y,ht,_,vt,Ct,Yt,ae){this.placement=new Tr(Y,Ct,Yt,ae),this._currentPlacementIndex=ht.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=vt,this._done=!1};je.prototype.isDone=function(){return this._done},je.prototype.continuePlacement=function(Y,ht,_){for(var vt=this,Ct=i.browser.now(),Yt=function(){var ur=i.browser.now()-Ct;return!vt._forceFullPlacement&&ur>2};this._currentPlacementIndex>=0;){var ge=ht[Y[this._currentPlacementIndex]],ze=this.placement.collisionIndex.transform.zoom;if("symbol"===ge.type&&(!ge.minzoom||ge.minzoom<=ze)&&(!ge.maxzoom||ge.maxzoom>ze)){if(this._inProgressLayer||(this._inProgressLayer=new Ve(ge)),this._inProgressLayer.continuePlacement(_[ge.source],this.placement,this._showCollisionBoxes,ge,Yt))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},je.prototype.commit=function(Y){return this.placement.commit(Y),this.placement};var ir=512/i.EXTENT/2,Zr=function(Y,ht,_){this.tileID=Y,this.indexedSymbolInstances={},this.bucketInstanceId=_;for(var vt=0;vt<ht.length;vt++){var Ct=ht.get(vt),Yt=Ct.key;this.indexedSymbolInstances[Yt]||(this.indexedSymbolInstances[Yt]=[]),this.indexedSymbolInstances[Yt].push({crossTileID:Ct.crossTileID,coord:this.getScaledCoordinates(Ct,Y)})}};Zr.prototype.getScaledCoordinates=function(Y,ht){var vt=ir/Math.pow(2,ht.canonical.z-this.tileID.canonical.z);return{x:Math.floor((ht.canonical.x*i.EXTENT+Y.anchorX)*vt),y:Math.floor((ht.canonical.y*i.EXTENT+Y.anchorY)*vt)}},Zr.prototype.findMatches=function(Y,ht,_){for(var vt=this.tileID.canonical.z<ht.canonical.z?1:Math.pow(2,this.tileID.canonical.z-ht.canonical.z),Ct=0;Ct<Y.length;Ct++){var Yt=Y.get(Ct);if(!Yt.crossTileID){var ae=this.indexedSymbolInstances[Yt.key];if(ae)for(var ge=this.getScaledCoordinates(Yt,ht),ze=0,Je=ae;ze<Je.length;ze+=1){var ur=Je[ze];if(Math.abs(ur.coord.x-ge.x)<=vt&&Math.abs(ur.coord.y-ge.y)<=vt&&!_[ur.crossTileID]){_[ur.crossTileID]=!0,Yt.crossTileID=ur.crossTileID;break}}}}};var yn=function(){this.maxCrossTileID=0};yn.prototype.generate=function(){return++this.maxCrossTileID};var Kn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Kn.prototype.handleWrapJump=function(Y){var ht=Math.round((Y-this.lng)/360);if(0!==ht)for(var _ in this.indexes){var vt=this.indexes[_],Ct={};for(var Yt in vt){var ae=vt[Yt];ae.tileID=ae.tileID.unwrapTo(ae.tileID.wrap+ht),Ct[ae.tileID.key]=ae}this.indexes[_]=Ct}this.lng=Y},Kn.prototype.addBucket=function(Y,ht,_){if(this.indexes[Y.overscaledZ]&&this.indexes[Y.overscaledZ][Y.key]){if(this.indexes[Y.overscaledZ][Y.key].bucketInstanceId===ht.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(Y.overscaledZ,this.indexes[Y.overscaledZ][Y.key])}for(var vt=0;vt<ht.symbolInstances.length;vt++)ht.symbolInstances.get(vt).crossTileID=0;this.usedCrossTileIDs[Y.overscaledZ]||(this.usedCrossTileIDs[Y.overscaledZ]={});var Yt=this.usedCrossTileIDs[Y.overscaledZ];for(var ae in this.indexes){var ge=this.indexes[ae];if(Number(ae)>Y.overscaledZ)for(var ze in ge){var Je=ge[ze];Je.tileID.isChildOf(Y)&&Je.findMatches(ht.symbolInstances,Y,Yt)}else{var mr=ge[Y.scaledTo(Number(ae)).key];mr&&mr.findMatches(ht.symbolInstances,Y,Yt)}}for(var Ir=0;Ir<ht.symbolInstances.length;Ir++){var Gr=ht.symbolInstances.get(Ir);Gr.crossTileID||(Gr.crossTileID=_.generate(),Yt[Gr.crossTileID]=!0)}return void 0===this.indexes[Y.overscaledZ]&&(this.indexes[Y.overscaledZ]={}),this.indexes[Y.overscaledZ][Y.key]=new Zr(Y,ht.symbolInstances,ht.bucketInstanceId),!0},Kn.prototype.removeBucketCrossTileIDs=function(Y,ht){for(var _ in ht.indexedSymbolInstances)for(var vt=0,Ct=ht.indexedSymbolInstances[_];vt<Ct.length;vt+=1)delete this.usedCrossTileIDs[Y][Ct[vt].crossTileID]},Kn.prototype.removeStaleBuckets=function(Y){var ht=!1;for(var _ in this.indexes){var vt=this.indexes[_];for(var Ct in vt)Y[vt[Ct].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,vt[Ct]),delete vt[Ct],ht=!0)}return ht};var ea=function(){this.layerIndexes={},this.crossTileIDs=new yn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ea.prototype.addLayer=function(Y,ht,_){var vt=this.layerIndexes[Y.id];void 0===vt&&(vt=this.layerIndexes[Y.id]=new Kn);var Ct=!1,Yt={};vt.handleWrapJump(_);for(var ae=0,ge=ht;ae<ge.length;ae+=1){var ze=ge[ae],Je=ze.getBucket(Y);!Je||Y.id!==Je.layerIds[0]||(Je.bucketInstanceId||(Je.bucketInstanceId=++this.maxBucketInstanceId),vt.addBucket(ze.tileID,Je,this.crossTileIDs)&&(Ct=!0),Yt[Je.bucketInstanceId]=!0)}return vt.removeStaleBuckets(Yt)&&(Ct=!0),Ct},ea.prototype.pruneUnusedLayers=function(Y){var ht={};for(var _ in Y.forEach(function(vt){ht[vt]=!0}),this.layerIndexes)ht[_]||delete this.layerIndexes[_]};var $n=function(lt,Y){return i.emitValidationErrors(lt,Y&&Y.filter(function(ht){return"source.canvas"!==ht.identifier}))},fa=i.pick(De,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ei=i.pick(De,["setCenter","setZoom","setBearing","setPitch"]),qi=function _e(){var lt={},Y=i.styleSpec.$version;for(var ht in i.styleSpec.$root){var _=i.styleSpec.$root[ht];if(_.required){var vt;null!=(vt="version"===ht?Y:"array"===_.type?[]:{})&&(lt[ht]=vt)}}return lt}(),to=function(lt){function Y(ht,_){var vt=this;void 0===_&&(_={}),lt.call(this),this.map=ht,this.dispatcher=new D(Se(),this),this.imageManager=new w,this.imageManager.setEventedParent(this),this.glyphManager=new S(ht._requestManager,_.localIdeographFontFamily),this.lineAtlas=new F(256,512),this.crossTileSymbolIndex=new ea,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new i.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",i.getReferrer());var Ct=this;this._rtlTextPluginCallback=Y.registerForPluginStateChange(function(Yt){Ct.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Yt.pluginStatus,pluginURL:Yt.pluginURL},function(ge,ze){if(i.triggerPluginCompletionEvent(ge),ze&&ze.every(function(mr){return mr}))for(var ur in Ct.sourceCaches)Ct.sourceCaches[ur].reload()})}),this.on("data",function(Yt){if("source"===Yt.dataType&&"metadata"===Yt.sourceDataType){var ae=vt.sourceCaches[Yt.sourceId];if(ae){var ge=ae.getSource();if(ge&&ge.vectorLayerIds)for(var ze in vt._layers){var Je=vt._layers[ze];Je.source===ge.id&&vt._validateLayer(Je)}}}})}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.loadURL=function(_,vt){var Ct=this;void 0===vt&&(vt={}),this.fire(new i.Event("dataloading",{dataType:"style"}));var Yt="boolean"==typeof vt.validate?vt.validate:!i.isMapboxURL(_);_=this.map._requestManager.normalizeStyleURL(_,vt.accessToken);var ae=this.map._requestManager.transformRequest(_,i.ResourceType.Style);this._request=i.getJSON(ae,function(ge,ze){Ct._request=null,ge?Ct.fire(new i.ErrorEvent(ge)):ze&&Ct._load(ze,Yt)})},Y.prototype.loadJSON=function(_,vt){var Ct=this;void 0===vt&&(vt={}),this.fire(new i.Event("dataloading",{dataType:"style"})),this._request=i.browser.frame(function(){Ct._request=null,Ct._load(_,!1!==vt.validate)})},Y.prototype.loadEmpty=function(){this.fire(new i.Event("dataloading",{dataType:"style"})),this._load(qi,!1)},Y.prototype._load=function(_,vt){if(!vt||!$n(this,i.validateStyle(_))){for(var Ct in this._loaded=!0,this.stylesheet=_,_.sources)this.addSource(Ct,_.sources[Ct],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs);var Yt=or(this.stylesheet.layers);this._order=Yt.map(function(Je){return Je.id}),this._layers={},this._serializedLayers={};for(var ae=0,ge=Yt;ae<ge.length;ae+=1){var ze=ge[ae];(ze=i.createStyleLayer(ze)).setEventedParent(this,{layer:{id:ze.id}}),this._layers[ze.id]=ze,this._serializedLayers[ze.id]=ze.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new d(this.stylesheet.light),this.fire(new i.Event("data",{dataType:"style"})),this.fire(new i.Event("style.load"))}},Y.prototype._loadSprite=function(_){var vt=this;this._spriteRequest=function f(lt,Y,ht){var _,vt,Ct,Yt=i.browser.devicePixelRatio>1?"@2x":"",ae=i.getJSON(Y.transformRequest(Y.normalizeSpriteURL(lt,Yt,".json"),i.ResourceType.SpriteJSON),function(Je,ur){ae=null,Ct||(Ct=Je,_=ur,ze())}),ge=i.getImage(Y.transformRequest(Y.normalizeSpriteURL(lt,Yt,".png"),i.ResourceType.SpriteImage),function(Je,ur){ge=null,Ct||(Ct=Je,vt=ur,ze())});function ze(){if(Ct)ht(Ct);else if(_&&vt){var Je=i.browser.getImageData(vt),ur={};for(var mr in _){var Ir=_[mr],Gr=Ir.width,Yr=Ir.height,Ur=Ir.x,Kr=Ir.y,cn=Ir.sdf,Cn=Ir.pixelRatio,Rn=Ir.stretchX,Un=Ir.stretchY,Hn=Ir.content,Vn=new i.RGBAImage({width:Gr,height:Yr});i.RGBAImage.copy(Je,Vn,{x:Ur,y:Kr},{x:0,y:0},{width:Gr,height:Yr}),ur[mr]={data:Vn,pixelRatio:Cn,sdf:cn,stretchX:Rn,stretchY:Un,content:Hn}}ht(null,ur)}}return{cancel:function(){ae&&(ae.cancel(),ae=null),ge&&(ge.cancel(),ge=null)}}}(_,this.map._requestManager,function(Ct,Yt){if(vt._spriteRequest=null,Ct)vt.fire(new i.ErrorEvent(Ct));else if(Yt)for(var ae in Yt)vt.imageManager.addImage(ae,Yt[ae]);vt.imageManager.setLoaded(!0),vt._availableImages=vt.imageManager.listImages(),vt.dispatcher.broadcast("setImages",vt._availableImages),vt.fire(new i.Event("data",{dataType:"style"}))})},Y.prototype._validateLayer=function(_){var vt=this.sourceCaches[_.source];if(vt){var Ct=_.sourceLayer;if(Ct){var Yt=vt.getSource();("geojson"===Yt.type||Yt.vectorLayerIds&&-1===Yt.vectorLayerIds.indexOf(Ct))&&this.fire(new i.ErrorEvent(new Error('Source layer "'+Ct+'" does not exist on source "'+Yt.id+'" as specified by style layer "'+_.id+'"')))}}},Y.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var _ in this.sourceCaches)if(!this.sourceCaches[_].loaded())return!1;return!!this.imageManager.isLoaded()},Y.prototype._serializeLayers=function(_){for(var vt=[],Ct=0,Yt=_;Ct<Yt.length;Ct+=1){var ge=this._layers[Yt[Ct]];"custom"!==ge.type&&vt.push(ge.serialize())}return vt},Y.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var _ in this.sourceCaches)if(this.sourceCaches[_].hasTransition())return!0;for(var vt in this._layers)if(this._layers[vt].hasTransition())return!0;return!1},Y.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},Y.prototype.update=function(_){if(this._loaded){var vt=this._changed;if(this._changed){var Ct=Object.keys(this._updatedLayers),Yt=Object.keys(this._removedLayers);for(var ae in(Ct.length||Yt.length)&&this._updateWorkerLayers(Ct,Yt),this._updatedSources){var ge=this._updatedSources[ae];"reload"===ge?this._reloadSource(ae):"clear"===ge&&this._clearSource(ae)}for(var ze in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[ze].updateTransitions(_);this.light.updateTransitions(_),this._resetUpdates()}for(var Je in this.sourceCaches)this.sourceCaches[Je].used=!1;for(var ur=0,mr=this._order;ur<mr.length;ur+=1){var Gr=this._layers[mr[ur]];Gr.recalculate(_,this._availableImages),!Gr.isHidden(_.zoom)&&Gr.source&&(this.sourceCaches[Gr.source].used=!0)}this.light.recalculate(_),this.z=_.zoom,vt&&this.fire(new i.Event("data",{dataType:"style"}))}},Y.prototype._updateTilesForChangedImages=function(){var _=Object.keys(this._changedImages);if(_.length){for(var vt in this.sourceCaches)this.sourceCaches[vt].reloadTilesForDependencies(["icons","patterns"],_);this._changedImages={}}},Y.prototype._updateWorkerLayers=function(_,vt){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(_),removedIds:vt})},Y.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},Y.prototype.setState=function(_){var vt=this;if(this._checkLoaded(),$n(this,i.validateStyle(_)))return!1;(_=i.clone$1(_)).layers=or(_.layers);var Ct=Dn(this.serialize(),_).filter(function(ae){return!(ae.command in Ei)});if(0===Ct.length)return!1;var Yt=Ct.filter(function(ae){return!(ae.command in fa)});if(Yt.length>0)throw new Error("Unimplemented: "+Yt.map(function(ae){return ae.command}).join(", ")+".");return Ct.forEach(function(ae){"setTransition"!==ae.command&&vt[ae.command].apply(vt,ae.args)}),this.stylesheet=_,!0},Y.prototype.addImage=function(_,vt){if(this.getImage(_))return this.fire(new i.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(_,vt),this._availableImages=this.imageManager.listImages(),this._changedImages[_]=!0,this._changed=!0,this.fire(new i.Event("data",{dataType:"style"}))},Y.prototype.updateImage=function(_,vt){this.imageManager.updateImage(_,vt)},Y.prototype.getImage=function(_){return this.imageManager.getImage(_)},Y.prototype.removeImage=function(_){if(!this.getImage(_))return this.fire(new i.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(_),this._availableImages=this.imageManager.listImages(),this._changedImages[_]=!0,this._changed=!0,this.fire(new i.Event("data",{dataType:"style"}))},Y.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},Y.prototype.addSource=function(_,vt,Ct){var Yt=this;if(void 0===Ct&&(Ct={}),this._checkLoaded(),void 0!==this.sourceCaches[_])throw new Error("There is already a source with this ID");if(!vt.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(vt).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(vt.type)>=0&&this._validate(i.validateStyle.source,"sources."+_,vt,null,Ct))){this.map&&this.map._collectResourceTiming&&(vt.collectResourceTiming=!0);var ze=this.sourceCaches[_]=new Re(_,vt,this.dispatcher);ze.style=this,ze.setEventedParent(this,function(){return{isSourceLoaded:Yt.loaded(),source:ze.serialize(),sourceId:_}}),ze.onAdd(this.map),this._changed=!0}},Y.prototype.removeSource=function(_){if(this._checkLoaded(),void 0===this.sourceCaches[_])throw new Error("There is no source with this ID");for(var vt in this._layers)if(this._layers[vt].source===_)return this.fire(new i.ErrorEvent(new Error('Source "'+_+'" cannot be removed while layer "'+vt+'" is using it.')));var Ct=this.sourceCaches[_];delete this.sourceCaches[_],delete this._updatedSources[_],Ct.fire(new i.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:_})),Ct.setEventedParent(null),Ct.clearTiles(),Ct.onRemove&&Ct.onRemove(this.map),this._changed=!0},Y.prototype.setGeoJSONSourceData=function(_,vt){this._checkLoaded(),this.sourceCaches[_].getSource().setData(vt),this._changed=!0},Y.prototype.getSource=function(_){return this.sourceCaches[_]&&this.sourceCaches[_].getSource()},Y.prototype.addLayer=function(_,vt,Ct){void 0===Ct&&(Ct={}),this._checkLoaded();var Yt=_.id;if(this.getLayer(Yt))this.fire(new i.ErrorEvent(new Error('Layer with id "'+Yt+'" already exists on this map')));else{var ae;if("custom"===_.type){if($n(this,i.validateCustomStyleLayer(_)))return;ae=i.createStyleLayer(_)}else{if("object"==typeof _.source&&(this.addSource(Yt,_.source),_=i.clone$1(_),_=i.extend(_,{source:Yt})),this._validate(i.validateStyle.layer,"layers."+Yt,_,{arrayIndex:-1},Ct))return;ae=i.createStyleLayer(_),this._validateLayer(ae),ae.setEventedParent(this,{layer:{id:Yt}}),this._serializedLayers[ae.id]=ae.serialize()}var ge=vt?this._order.indexOf(vt):this._order.length;if(vt&&-1===ge)this.fire(new i.ErrorEvent(new Error('Layer with id "'+vt+'" does not exist on this map.')));else{if(this._order.splice(ge,0,Yt),this._layerOrderChanged=!0,this._layers[Yt]=ae,this._removedLayers[Yt]&&ae.source&&"custom"!==ae.type){var ze=this._removedLayers[Yt];delete this._removedLayers[Yt],ze.type!==ae.type?this._updatedSources[ae.source]="clear":(this._updatedSources[ae.source]="reload",this.sourceCaches[ae.source].pause())}this._updateLayer(ae),ae.onAdd&&ae.onAdd(this.map)}}},Y.prototype.moveLayer=function(_,vt){if(this._checkLoaded(),this._changed=!0,this._layers[_]){if(_!==vt){var Yt=this._order.indexOf(_);this._order.splice(Yt,1);var ae=vt?this._order.indexOf(vt):this._order.length;if(vt&&-1===ae)return void this.fire(new i.ErrorEvent(new Error('Layer with id "'+vt+'" does not exist on this map.')));this._order.splice(ae,0,_),this._layerOrderChanged=!0}}else this.fire(new i.ErrorEvent(new Error("The layer '"+_+"' does not exist in the map's style and cannot be moved.")))},Y.prototype.removeLayer=function(_){this._checkLoaded();var vt=this._layers[_];if(vt){vt.setEventedParent(null);var Ct=this._order.indexOf(_);this._order.splice(Ct,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[_]=vt,delete this._layers[_],delete this._serializedLayers[_],delete this._updatedLayers[_],delete this._updatedPaintProps[_],vt.onRemove&&vt.onRemove(this.map)}else this.fire(new i.ErrorEvent(new Error("The layer '"+_+"' does not exist in the map's style and cannot be removed.")))},Y.prototype.getLayer=function(_){return this._layers[_]},Y.prototype.hasLayer=function(_){return _ in this._layers},Y.prototype.setLayerZoomRange=function(_,vt,Ct){this._checkLoaded();var Yt=this.getLayer(_);Yt?Yt.minzoom===vt&&Yt.maxzoom===Ct||(null!=vt&&(Yt.minzoom=vt),null!=Ct&&(Yt.maxzoom=Ct),this._updateLayer(Yt)):this.fire(new i.ErrorEvent(new Error("The layer '"+_+"' does not exist in the map's style and cannot have zoom extent.")))},Y.prototype.setFilter=function(_,vt,Ct){void 0===Ct&&(Ct={}),this._checkLoaded();var Yt=this.getLayer(_);if(Yt){if(!i.deepEqual(Yt.filter,vt)){if(null==vt)return Yt.filter=void 0,void this._updateLayer(Yt);this._validate(i.validateStyle.filter,"layers."+Yt.id+".filter",vt,null,Ct)||(Yt.filter=i.clone$1(vt),this._updateLayer(Yt))}}else this.fire(new i.ErrorEvent(new Error("The layer '"+_+"' does not exist in the map's style and cannot be filtered.")))},Y.prototype.getFilter=function(_){return i.clone$1(this.getLayer(_).filter)},Y.prototype.setLayoutProperty=function(_,vt,Ct,Yt){void 0===Yt&&(Yt={}),this._checkLoaded();var ae=this.getLayer(_);ae?i.deepEqual(ae.getLayoutProperty(vt),Ct)||(ae.setLayoutProperty(vt,Ct,Yt),this._updateLayer(ae)):this.fire(new i.ErrorEvent(new Error("The layer '"+_+"' does not exist in the map's style and cannot be styled.")))},Y.prototype.getLayoutProperty=function(_,vt){var Ct=this.getLayer(_);if(Ct)return Ct.getLayoutProperty(vt);this.fire(new i.ErrorEvent(new Error("The layer '"+_+"' does not exist in the map's style.")))},Y.prototype.setPaintProperty=function(_,vt,Ct,Yt){void 0===Yt&&(Yt={}),this._checkLoaded();var ae=this.getLayer(_);ae?i.deepEqual(ae.getPaintProperty(vt),Ct)||(ae.setPaintProperty(vt,Ct,Yt)&&this._updateLayer(ae),this._changed=!0,this._updatedPaintProps[_]=!0):this.fire(new i.ErrorEvent(new Error("The layer '"+_+"' does not exist in the map's style and cannot be styled.")))},Y.prototype.getPaintProperty=function(_,vt){return this.getLayer(_).getPaintProperty(vt)},Y.prototype.setFeatureState=function(_,vt){this._checkLoaded();var Ct=_.source,Yt=_.sourceLayer,ae=this.sourceCaches[Ct];if(void 0!==ae){var ge=ae.getSource().type;"geojson"===ge&&Yt?this.fire(new i.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==ge||Yt?(void 0===_.id&&this.fire(new i.ErrorEvent(new Error("The feature id parameter must be provided."))),ae.setFeatureState(Yt,_.id,vt)):this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new i.ErrorEvent(new Error("The source '"+Ct+"' does not exist in the map's style.")))},Y.prototype.removeFeatureState=function(_,vt){this._checkLoaded();var Ct=_.source,Yt=this.sourceCaches[Ct];if(void 0!==Yt){var ae=Yt.getSource().type,ge="vector"===ae?_.sourceLayer:void 0;"vector"!==ae||ge?vt&&"string"!=typeof _.id&&"number"!=typeof _.id?this.fire(new i.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):Yt.removeFeatureState(ge,_.id,vt):this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new i.ErrorEvent(new Error("The source '"+Ct+"' does not exist in the map's style.")))},Y.prototype.getFeatureState=function(_){this._checkLoaded();var vt=_.source,Ct=_.sourceLayer,Yt=this.sourceCaches[vt];if(void 0!==Yt){if("vector"!==Yt.getSource().type||Ct)return void 0===_.id&&this.fire(new i.ErrorEvent(new Error("The feature id parameter must be provided."))),Yt.getFeatureState(Ct,_.id);this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new i.ErrorEvent(new Error("The source '"+vt+"' does not exist in the map's style.")))},Y.prototype.getTransition=function(){return i.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},Y.prototype.serialize=function(){return i.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:i.mapObject(this.sourceCaches,function(_){return _.serialize()}),layers:this._serializeLayers(this._order)},function(_){return void 0!==_})},Y.prototype._updateLayer=function(_){this._updatedLayers[_.id]=!0,_.source&&!this._updatedSources[_.source]&&"raster"!==this.sourceCaches[_.source].getSource().type&&(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause()),this._changed=!0},Y.prototype._flattenAndSortRenderedFeatures=function(_){for(var vt=this,Ct=function(Ca){return"fill-extrusion"===vt._layers[Ca].type},Yt={},ae=[],ge=this._order.length-1;ge>=0;ge--){var ze=this._order[ge];if(Ct(ze)){Yt[ze]=ge;for(var Je=0,ur=_;Je<ur.length;Je+=1){var Ir=ur[Je][ze];if(Ir)for(var Gr=0,Yr=Ir;Gr<Yr.length;Gr+=1)ae.push(Yr[Gr])}}}ae.sort(function(Ca,Fa){return Fa.intersectionZ-Ca.intersectionZ});for(var Kr=[],cn=this._order.length-1;cn>=0;cn--){var Cn=this._order[cn];if(Ct(Cn))for(var Rn=ae.length-1;Rn>=0;Rn--){var Un=ae[Rn].feature;if(Yt[Un.layer.id]<cn)break;Kr.push(Un),ae.pop()}else for(var Hn=0,Vn=_;Hn<Vn.length;Hn+=1){var sa=Vn[Hn][Cn];if(sa)for(var ia=0,ha=sa;ia<ha.length;ia+=1)Kr.push(ha[ia].feature)}}return Kr},Y.prototype.queryRenderedFeatures=function(_,vt,Ct){vt&&vt.filter&&this._validate(i.validateStyle.filter,"queryRenderedFeatures.filter",vt.filter,null,vt);var Yt={};if(vt&&vt.layers){if(!Array.isArray(vt.layers))return this.fire(new i.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var ae=0,ge=vt.layers;ae<ge.length;ae+=1){var ze=ge[ae],Je=this._layers[ze];if(!Je)return this.fire(new i.ErrorEvent(new Error("The layer '"+ze+"' does not exist in the map's style and cannot be queried for features."))),[];Yt[Je.source]=!0}}var ur=[];for(var mr in vt.availableImages=this._availableImages,this.sourceCaches)vt.layers&&!Yt[mr]||ur.push($(this.sourceCaches[mr],this._layers,this._serializedLayers,_,vt,Ct));return this.placement&&ur.push(function X(lt,Y,ht,_,vt,Ct,Yt){for(var ae={},ge=Ct.queryRenderedSymbols(_),ze=[],Je=0,ur=Object.keys(ge).map(Number);Je<ur.length;Je+=1)ze.push(Yt[ur[Je]]);ze.sort(et);for(var Ir=function(){var cn=Yr[Gr],Cn=cn.featureIndex.lookupSymbolFeatures(ge[cn.bucketInstanceId],Y,cn.bucketIndex,cn.sourceLayerIndex,vt.filter,vt.layers,vt.availableImages,lt);for(var Rn in Cn){var Un=ae[Rn]=ae[Rn]||[],Hn=Cn[Rn];Hn.sort(function(ia,ha){var ga=cn.featureSortOrder;if(ga){var Ca=ga.indexOf(ia.featureIndex);return ga.indexOf(ha.featureIndex)-Ca}return ha.featureIndex-ia.featureIndex});for(var Vn=0,_n=Hn;Vn<_n.length;Vn+=1)Un.push(_n[Vn])}},Gr=0,Yr=ze;Gr<Yr.length;Gr+=1)Ir();var Ur=function(cn){ae[cn].forEach(function(Cn){var Rn=Cn.feature,Vn=ht[lt[cn].source].getFeatureState(Rn.layer["source-layer"],Rn.id);Rn.source=Rn.layer.source,Rn.layer["source-layer"]&&(Rn.sourceLayer=Rn.layer["source-layer"]),Rn.state=Vn})};for(var Kr in ae)Ur(Kr);return ae}(this._layers,this._serializedLayers,this.sourceCaches,_,vt,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ur)},Y.prototype.querySourceFeatures=function(_,vt){vt&&vt.filter&&this._validate(i.validateStyle.filter,"querySourceFeatures.filter",vt.filter,null,vt);var Ct=this.sourceCaches[_];return Ct?function rt(lt,Y){for(var ht=lt.getRenderableIds().map(function(ge){return lt.getTileByID(ge)}),_=[],vt={},Ct=0;Ct<ht.length;Ct++){var Yt=ht[Ct],ae=Yt.tileID.canonical.key;vt[ae]||(vt[ae]=!0,Yt.querySourceFeatures(_,Y))}return _}(Ct,vt):[]},Y.prototype.addSourceType=function(_,vt,Ct){return Y.getSourceType(_)?Ct(new Error('A source type called "'+_+'" already exists.')):(Y.setSourceType(_,vt),vt.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:_,url:vt.workerSourceURL},Ct):Ct(null,null))},Y.prototype.getLight=function(){return this.light.getLight()},Y.prototype.setLight=function(_,vt){void 0===vt&&(vt={}),this._checkLoaded();var Ct=this.light.getLight(),Yt=!1;for(var ae in _)if(!i.deepEqual(_[ae],Ct[ae])){Yt=!0;break}if(Yt){var ge={now:i.browser.now(),transition:i.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(_,vt),this.light.updateTransitions(ge)}},Y.prototype._validate=function(_,vt,Ct,Yt,ae){return void 0===ae&&(ae={}),(!ae||!1!==ae.validate)&&$n(this,_.call(i.validateStyle,i.extend({key:vt,style:this.serialize(),value:Ct,styleSpec:i.styleSpec},Yt)))},Y.prototype._remove=function(){for(var _ in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),i.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[_].setEventedParent(null);for(var Ct in this.sourceCaches)this.sourceCaches[Ct].clearTiles(),this.sourceCaches[Ct].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},Y.prototype._clearSource=function(_){this.sourceCaches[_].clearTiles()},Y.prototype._reloadSource=function(_){this.sourceCaches[_].resume(),this.sourceCaches[_].reload()},Y.prototype._updateSources=function(_){for(var vt in this.sourceCaches)this.sourceCaches[vt].update(_)},Y.prototype._generateCollisionBoxes=function(){for(var _ in this.sourceCaches)this._reloadSource(_)},Y.prototype._updatePlacement=function(_,vt,Ct,Yt,ae){void 0===ae&&(ae=!1);for(var ge=!1,ze=!1,Je={},ur=0,mr=this._order;ur<mr.length;ur+=1){var Gr=this._layers[mr[ur]];if("symbol"===Gr.type){if(!Je[Gr.source]){var Yr=this.sourceCaches[Gr.source];Je[Gr.source]=Yr.getRenderableIds(!0).map(function(Hn){return Yr.getTileByID(Hn)}).sort(function(Hn,Vn){return Vn.tileID.overscaledZ-Hn.tileID.overscaledZ||(Hn.tileID.isLessThan(Vn.tileID)?-1:1)})}var Ur=this.crossTileSymbolIndex.addLayer(Gr,Je[Gr.source],_.center.lng);ge=ge||Ur}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((ae=ae||this._layerOrderChanged||0===Ct)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(i.browser.now(),_.zoom))&&(this.pauseablePlacement=new je(_,this._order,ae,vt,Ct,Yt,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Je),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(i.browser.now()),ze=!0),ge&&this.pauseablePlacement.placement.setStale()),ze||ge)for(var Kr=0,cn=this._order;Kr<cn.length;Kr+=1){var Rn=this._layers[cn[Kr]];"symbol"===Rn.type&&this.placement.updateLayerOpacities(Rn,Je[Rn.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(i.browser.now())},Y.prototype._releaseSymbolFadeTiles=function(){for(var _ in this.sourceCaches)this.sourceCaches[_].releaseSymbolFadeTiles()},Y.prototype.getImages=function(_,vt,Ct){this.imageManager.getImages(vt.icons,Ct),this._updateTilesForChangedImages();var Yt=this.sourceCaches[vt.source];Yt&&Yt.setDependencies(vt.tileID.key,vt.type,vt.icons)},Y.prototype.getGlyphs=function(_,vt,Ct){this.glyphManager.getGlyphs(vt.stacks,Ct)},Y.prototype.getResource=function(_,vt,Ct){return i.makeRequest(vt,Ct)},Y}(i.Evented);to.getSourceType=function(lt){return Q[lt]},to.setSourceType=function(lt,Y){Q[lt]=Y},to.registerForPluginStateChange=i.registerForPluginStateChange;var eo=i.createLayout([{name:"a_pos",type:"Int16",components:2}]),lo=hi("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),is=hi("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),tu=hi("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),kl=hi("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),bo=hi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Pi=hi("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),eu=hi("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),ru=hi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Os=hi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),zl=hi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),nu=hi("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Ru=hi("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Iu=hi("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Bs=hi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Zo=hi("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),xs=hi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Fo=hi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),au=hi("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),iu=hi("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ou=hi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),al=hi("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Ol=hi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),Fu=hi("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),il=hi("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),ku=hi("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),zu=hi("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function hi(lt,Y){var ht=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_={};return{fragmentSource:lt=lt.replace(ht,function(vt,Ct,Yt,ae,ge){return _[ge]=!0,"define"===Ct?"\n#ifndef HAS_UNIFORM_u_"+ge+"\nvarying "+Yt+" "+ae+" "+ge+";\n#else\nuniform "+Yt+" "+ae+" u_"+ge+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+ge+"\n    "+Yt+" "+ae+" "+ge+" = u_"+ge+";\n#endif\n"}),vertexSource:Y=Y.replace(ht,function(vt,Ct,Yt,ae,ge){var ze="float"===ae?"vec2":"vec4",Je=ge.match(/color/)?"color":ze;return _[ge]?"define"===Ct?"\n#ifndef HAS_UNIFORM_u_"+ge+"\nuniform lowp float u_"+ge+"_t;\nattribute "+Yt+" "+ze+" a_"+ge+";\nvarying "+Yt+" "+ae+" "+ge+";\n#else\nuniform "+Yt+" "+ae+" u_"+ge+";\n#endif\n":"vec4"===Je?"\n#ifndef HAS_UNIFORM_u_"+ge+"\n    "+ge+" = a_"+ge+";\n#else\n    "+Yt+" "+ae+" "+ge+" = u_"+ge+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+ge+"\n    "+ge+" = unpack_mix_"+Je+"(a_"+ge+", u_"+ge+"_t);\n#else\n    "+Yt+" "+ae+" "+ge+" = u_"+ge+";\n#endif\n":"define"===Ct?"\n#ifndef HAS_UNIFORM_u_"+ge+"\nuniform lowp float u_"+ge+"_t;\nattribute "+Yt+" "+ze+" a_"+ge+";\n#else\nuniform "+Yt+" "+ae+" u_"+ge+";\n#endif\n":"vec4"===Je?"\n#ifndef HAS_UNIFORM_u_"+ge+"\n    "+Yt+" "+ae+" "+ge+" = a_"+ge+";\n#else\n    "+Yt+" "+ae+" "+ge+" = u_"+ge+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+ge+"\n    "+Yt+" "+ae+" "+ge+" = unpack_mix_"+Je+"(a_"+ge+", u_"+ge+"_t);\n#else\n    "+Yt+" "+ae+" "+ge+" = u_"+ge+";\n#endif\n"})}}var Ns=Object.freeze({__proto__:null,prelude:lo,background:is,backgroundPattern:tu,circle:kl,clippingMask:bo,heatmap:Pi,heatmapTexture:eu,collisionBox:ru,collisionCircle:Os,debug:zl,fill:nu,fillOutline:Ru,fillOutlinePattern:Iu,fillPattern:Bs,fillExtrusion:Zo,fillExtrusionPattern:xs,hillshadePrepare:Fo,hillshade:au,line:iu,lineGradient:ou,linePattern:al,lineSDF:Ol,raster:Fu,symbolIcon:il,symbolSDF:ku,symbolTextAndIcon:zu}),bs=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};bs.prototype.bind=function(Y,ht,_,vt,Ct,Yt,ae,ge){this.context=Y;for(var ze=this.boundPaintVertexBuffers.length!==vt.length,Je=0;!ze&&Je<vt.length;Je++)this.boundPaintVertexBuffers[Je]!==vt[Je]&&(ze=!0);Y.extVertexArrayObject&&this.vao&&this.boundProgram===ht&&this.boundLayoutVertexBuffer===_&&!ze&&this.boundIndexBuffer===Ct&&this.boundVertexOffset===Yt&&this.boundDynamicVertexBuffer===ae&&this.boundDynamicVertexBuffer2===ge?(Y.bindVertexArrayOES.set(this.vao),ae&&ae.bind(),Ct&&Ct.dynamicDraw&&Ct.bind(),ge&&ge.bind()):this.freshBind(ht,_,vt,Ct,Yt,ae,ge)},bs.prototype.freshBind=function(Y,ht,_,vt,Ct,Yt,ae){var ge,ze=Y.numAttributes,Je=this.context,ur=Je.gl;if(Je.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Je.extVertexArrayObject.createVertexArrayOES(),Je.bindVertexArrayOES.set(this.vao),ge=0,this.boundProgram=Y,this.boundLayoutVertexBuffer=ht,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=vt,this.boundVertexOffset=Ct,this.boundDynamicVertexBuffer=Yt,this.boundDynamicVertexBuffer2=ae;else{ge=Je.currentNumAttributes||0;for(var mr=ze;mr<ge;mr++)ur.disableVertexAttribArray(mr)}ht.enableAttributes(ur,Y);for(var Ir=0,Gr=_;Ir<Gr.length;Ir+=1)Gr[Ir].enableAttributes(ur,Y);Yt&&Yt.enableAttributes(ur,Y),ae&&ae.enableAttributes(ur,Y),ht.bind(),ht.setVertexAttribPointers(ur,Y,Ct);for(var Ur=0,Kr=_;Ur<Kr.length;Ur+=1){var cn=Kr[Ur];cn.bind(),cn.setVertexAttribPointers(ur,Y,Ct)}Yt&&(Yt.bind(),Yt.setVertexAttribPointers(ur,Y,Ct)),vt&&vt.bind(),ae&&(ae.bind(),ae.setVertexAttribPointers(ur,Y,Ct)),Je.currentNumAttributes=ze},bs.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var uo=function(Y,ht,_,vt,Ct){var Yt=Y.gl;this.program=Yt.createProgram();var ae=_?_.defines():[];Ct&&ae.push("#define OVERDRAW_INSPECTOR;");var ge=ae.concat(lo.fragmentSource,ht.fragmentSource).join("\n"),ze=ae.concat(lo.vertexSource,ht.vertexSource).join("\n"),Je=Yt.createShader(Yt.FRAGMENT_SHADER);if(Yt.isContextLost())this.failedToCreate=!0;else{Yt.shaderSource(Je,ge),Yt.compileShader(Je),Yt.attachShader(this.program,Je);var ur=Yt.createShader(Yt.VERTEX_SHADER);if(Yt.isContextLost())this.failedToCreate=!0;else{Yt.shaderSource(ur,ze),Yt.compileShader(ur),Yt.attachShader(this.program,ur);for(var mr=_?_.layoutAttributes:[],Ir=0;Ir<mr.length;Ir++)Yt.bindAttribLocation(this.program,Ir,mr[Ir].name);Yt.linkProgram(this.program),Yt.deleteShader(ur),Yt.deleteShader(Je),this.numAttributes=Yt.getProgramParameter(this.program,Yt.ACTIVE_ATTRIBUTES),this.attributes={};for(var Gr={},Yr=0;Yr<this.numAttributes;Yr++){var Ur=Yt.getActiveAttrib(this.program,Yr);Ur&&(this.attributes[Ur.name]=Yt.getAttribLocation(this.program,Ur.name))}for(var Kr=Yt.getProgramParameter(this.program,Yt.ACTIVE_UNIFORMS),cn=0;cn<Kr;cn++){var Cn=Yt.getActiveUniform(this.program,cn);Cn&&(Gr[Cn.name]=Yt.getUniformLocation(this.program,Cn.name))}this.fixedUniforms=vt(Y,Gr),this.binderUniforms=_?_.getUniforms(Y,Gr):[]}}};function Us(lt,Y,ht){var _=1/gn(ht,1,Y.transform.tileZoom),vt=Math.pow(2,ht.tileID.overscaledZ),Ct=ht.tileSize*Math.pow(2,Y.transform.tileZoom)/vt,Yt=Ct*(ht.tileID.canonical.x+ht.tileID.wrap*vt),ae=Ct*ht.tileID.canonical.y;return{u_image:0,u_texsize:ht.imageAtlasTexture.size,u_scale:[_,lt.fromScale,lt.toScale],u_fade:lt.t,u_pixel_coord_upper:[Yt>>16,ae>>16],u_pixel_coord_lower:[65535&Yt,65535&ae]}}uo.prototype.draw=function(Y,ht,_,vt,Ct,Yt,ae,ge,ze,Je,ur,mr,Ir,Gr,Yr,Ur){var Kr,cn=Y.gl;if(!this.failedToCreate){for(var Cn in Y.program.set(this.program),Y.setDepthMode(_),Y.setStencilMode(vt),Y.setColorMode(Ct),Y.setCullFace(Yt),this.fixedUniforms)this.fixedUniforms[Cn].set(ae[Cn]);Gr&&Gr.setUniforms(Y,this.binderUniforms,mr,{zoom:Ir});for(var Rn=(Kr={},Kr[cn.LINES]=2,Kr[cn.TRIANGLES]=3,Kr[cn.LINE_STRIP]=1,Kr)[ht],Un=0,Hn=ur.get();Un<Hn.length;Un+=1){var Vn=Hn[Un],_n=Vn.vaos||(Vn.vaos={});(_n[ge]||(_n[ge]=new bs)).bind(Y,this,ze,Gr?Gr.getPaintVertexBuffers():[],Je,Vn.vertexOffset,Yr,Ur),cn.drawElements(ht,Vn.primitiveLength*Rn,cn.UNSIGNED_SHORT,Vn.primitiveOffset*Rn*2)}}};var ko=function(lt,Y,ht,_){var vt=Y.style.light,Ct=vt.properties.get("position"),Yt=[Ct.x,Ct.y,Ct.z],ae=i.create$1();"viewport"===vt.properties.get("anchor")&&i.fromRotation(ae,-Y.transform.angle),i.transformMat3(Yt,Yt,ae);var ge=vt.properties.get("color");return{u_matrix:lt,u_lightpos:Yt,u_lightintensity:vt.properties.get("intensity"),u_lightcolor:[ge.r,ge.g,ge.b],u_vertical_gradient:+ht,u_opacity:_}},wo=function(lt,Y,ht,_,vt,Ct,Yt){return i.extend(ko(lt,Y,ht,_),Us(Ct,Y,Yt),{u_height_factor:-Math.pow(2,vt.overscaledZ)/Yt.tileSize/8})},ss=function(lt){return{u_matrix:lt}},To=function(lt,Y,ht,_){return i.extend(ss(lt),Us(ht,Y,_))},su=function(lt,Y){return{u_matrix:lt,u_world:Y}},lu=function(lt,Y,ht,_,vt){return i.extend(To(lt,Y,ht,_),{u_world:vt})},Vs=function(lt,Y,ht,_){var Ct,Yt,vt=lt.transform;if("map"===_.paint.get("circle-pitch-alignment")){var ae=gn(ht,1,vt.zoom);Ct=!0,Yt=[ae,ae]}else Ct=!1,Yt=vt.pixelsToGLUnits;return{u_camera_to_center_distance:vt.cameraToCenterDistance,u_scale_with_map:+("map"===_.paint.get("circle-pitch-scale")),u_matrix:lt.translatePosMatrix(Y.posMatrix,ht,_.paint.get("circle-translate"),_.paint.get("circle-translate-anchor")),u_pitch_with_map:+Ct,u_device_pixel_ratio:i.browser.devicePixelRatio,u_extrude_scale:Yt}},pf=function(lt,Y,ht){var _=gn(ht,1,Y.zoom),vt=Math.pow(2,Y.zoom-ht.tileID.overscaledZ),Ct=ht.tileID.overscaleFactor();return{u_matrix:lt,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pixels_to_tile_units:_,u_extrude_scale:[Y.pixelsToGLUnits[0]/(_*vt),Y.pixelsToGLUnits[1]/(_*vt)],u_overscale_factor:Ct}},Bu=function(lt,Y,ht){return{u_matrix:lt,u_inv_matrix:Y,u_camera_to_center_distance:ht.cameraToCenterDistance,u_viewport_size:[ht.width,ht.height]}},Uu=function(lt,Y,ht){return void 0===ht&&(ht=1),{u_matrix:lt,u_color:Y,u_overlay:0,u_overlay_scale:ht}},Ni=function(lt){return{u_matrix:lt}},ol=function(lt,Y,ht,_){return{u_matrix:lt,u_extrude_scale:gn(Y,1,ht),u_intensity:_}};function us(lt,Y){var ht=Math.pow(2,Y.canonical.z),_=Y.canonical.y;return[new i.MercatorCoordinate(0,_/ht).toLngLat().lat,new i.MercatorCoordinate(0,(_+1)/ht).toLngLat().lat]}var Ts=function(lt,Y,ht){var _=lt.transform;return{u_matrix:Jo(lt,Y,ht),u_ratio:1/gn(Y,1,_.zoom),u_device_pixel_ratio:i.browser.devicePixelRatio,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Vu=function(lt,Y,ht){return i.extend(Ts(lt,Y,ht),{u_image:0})},cs=function(lt,Y,ht,_){var vt=lt.transform,Ct=Ko(Y,vt);return{u_matrix:Jo(lt,Y,ht),u_texsize:Y.imageAtlasTexture.size,u_ratio:1/gn(Y,1,vt.zoom),u_device_pixel_ratio:i.browser.devicePixelRatio,u_image:0,u_scale:[Ct,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/vt.pixelsToGLUnits[0],1/vt.pixelsToGLUnits[1]]}},ll=function(lt,Y,ht,_,vt){var Yt=lt.lineAtlas,ae=Ko(Y,lt.transform),ge="round"===ht.layout.get("line-cap"),ze=Yt.getDash(_.from,ge),Je=Yt.getDash(_.to,ge),ur=ze.width*vt.fromScale,mr=Je.width*vt.toScale;return i.extend(Ts(lt,Y,ht),{u_patternscale_a:[ae/ur,-ze.height/2],u_patternscale_b:[ae/mr,-Je.height/2],u_sdfgamma:Yt.width/(256*Math.min(ur,mr)*i.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:ze.y,u_tex_y_b:Je.y,u_mix:vt.t})};function Ko(lt,Y){return 1/gn(lt,1,Y.tileZoom)}function Jo(lt,Y,ht){return lt.translatePosMatrix(Y.tileID.posMatrix,Y,ht.paint.get("line-translate"),ht.paint.get("line-translate-anchor"))}var As=function(lt,Y,ht,_,vt){return{u_matrix:lt,u_tl_parent:Y,u_scale_parent:ht,u_buffer_scale:1,u_fade_t:_.mix,u_opacity:_.opacity*vt.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:vt.paint.get("raster-brightness-min"),u_brightness_high:vt.paint.get("raster-brightness-max"),u_saturation_factor:vu(vt.paint.get("raster-saturation")),u_contrast_factor:Gs(vt.paint.get("raster-contrast")),u_spin_weights:ei(vt.paint.get("raster-hue-rotate"))}};function ei(lt){lt*=Math.PI/180;var Y=Math.sin(lt),ht=Math.cos(lt);return[(2*ht+1)/3,(-Math.sqrt(3)*Y-ht+1)/3,(Math.sqrt(3)*Y-ht+1)/3]}function Gs(lt){return lt>0?1/(1-lt):1+lt}function vu(lt){return lt>0?1-1/(1.001-lt):-lt}var Ao,du=function(lt,Y,ht,_,vt,Ct,Yt,ae,ge,ze){var Je=vt.transform;return{u_is_size_zoom_constant:+("constant"===lt||"source"===lt),u_is_size_feature_constant:+("constant"===lt||"camera"===lt),u_size_t:Y?Y.uSizeT:0,u_size:Y?Y.uSize:0,u_camera_to_center_distance:Je.cameraToCenterDistance,u_pitch:Je.pitch/360*2*Math.PI,u_rotate_symbol:+ht,u_aspect_ratio:Je.width/Je.height,u_fade_change:vt.options.fadeDuration?vt.symbolFadeChange:1,u_matrix:Ct,u_label_plane_matrix:Yt,u_coord_matrix:ae,u_is_text:+ge,u_pitch_with_map:+_,u_texsize:ze,u_texture:0}},fl=function(lt,Y,ht,_,vt,Ct,Yt,ae,ge,ze,Je){var ur=vt.transform;return i.extend(du(lt,Y,ht,_,vt,Ct,Yt,ae,ge,ze),{u_gamma_scale:_?Math.cos(ur._pitch)*ur.cameraToCenterDistance:1,u_device_pixel_ratio:i.browser.devicePixelRatio,u_is_halo:+Je})},Hl=function(lt,Y,ht,_,vt,Ct,Yt,ae,ge,ze){return i.extend(fl(lt,Y,ht,_,vt,Ct,Yt,ae,!0,ge,!0),{u_texsize_icon:ze,u_texture_icon:1})},cl=function(lt,Y,ht){return{u_matrix:lt,u_opacity:Y,u_color:ht}},hl=function(lt,Y,ht,_,vt,Ct){return i.extend(function Ou(lt,Y,ht,_){var vt=ht.imageManager.getPattern(lt.from.toString()),Ct=ht.imageManager.getPattern(lt.to.toString()),Yt=ht.imageManager.getPixelSize(),ae=Yt.width,ge=Yt.height,ze=Math.pow(2,_.tileID.overscaledZ),Je=_.tileSize*Math.pow(2,ht.transform.tileZoom)/ze,ur=Je*(_.tileID.canonical.x+_.tileID.wrap*ze),mr=Je*_.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:vt.tl,u_pattern_br_a:vt.br,u_pattern_tl_b:Ct.tl,u_pattern_br_b:Ct.br,u_texsize:[ae,ge],u_mix:Y.t,u_pattern_size_a:vt.displaySize,u_pattern_size_b:Ct.displaySize,u_scale_a:Y.fromScale,u_scale_b:Y.toScale,u_tile_units_to_pixels:1/gn(_,1,ht.transform.tileZoom),u_pixel_coord_upper:[ur>>16,mr>>16],u_pixel_coord_lower:[65535&ur,65535&mr]}}(_,Ct,ht,vt),{u_matrix:lt,u_opacity:Y})},$o={fillExtrusion:function(lt,Y){return{u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix),u_lightpos:new i.Uniform3f(lt,Y.u_lightpos),u_lightintensity:new i.Uniform1f(lt,Y.u_lightintensity),u_lightcolor:new i.Uniform3f(lt,Y.u_lightcolor),u_vertical_gradient:new i.Uniform1f(lt,Y.u_vertical_gradient),u_opacity:new i.Uniform1f(lt,Y.u_opacity)}},fillExtrusionPattern:function(lt,Y){return{u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix),u_lightpos:new i.Uniform3f(lt,Y.u_lightpos),u_lightintensity:new i.Uniform1f(lt,Y.u_lightintensity),u_lightcolor:new i.Uniform3f(lt,Y.u_lightcolor),u_vertical_gradient:new i.Uniform1f(lt,Y.u_vertical_gradient),u_height_factor:new i.Uniform1f(lt,Y.u_height_factor),u_image:new i.Uniform1i(lt,Y.u_image),u_texsize:new i.Uniform2f(lt,Y.u_texsize),u_pixel_coord_upper:new i.Uniform2f(lt,Y.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(lt,Y.u_pixel_coord_lower),u_scale:new i.Uniform3f(lt,Y.u_scale),u_fade:new i.Uniform1f(lt,Y.u_fade),u_opacity:new i.Uniform1f(lt,Y.u_opacity)}},fill:function(lt,Y){return{u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix)}},fillPattern:function(lt,Y){return{u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix),u_image:new i.Uniform1i(lt,Y.u_image),u_texsize:new i.Uniform2f(lt,Y.u_texsize),u_pixel_coord_upper:new i.Uniform2f(lt,Y.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(lt,Y.u_pixel_coord_lower),u_scale:new i.Uniform3f(lt,Y.u_scale),u_fade:new i.Uniform1f(lt,Y.u_fade)}},fillOutline:function(lt,Y){return{u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix),u_world:new i.Uniform2f(lt,Y.u_world)}},fillOutlinePattern:function(lt,Y){return{u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix),u_world:new i.Uniform2f(lt,Y.u_world),u_image:new i.Uniform1i(lt,Y.u_image),u_texsize:new i.Uniform2f(lt,Y.u_texsize),u_pixel_coord_upper:new i.Uniform2f(lt,Y.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(lt,Y.u_pixel_coord_lower),u_scale:new i.Uniform3f(lt,Y.u_scale),u_fade:new i.Uniform1f(lt,Y.u_fade)}},circle:function(lt,Y){return{u_camera_to_center_distance:new i.Uniform1f(lt,Y.u_camera_to_center_distance),u_scale_with_map:new i.Uniform1i(lt,Y.u_scale_with_map),u_pitch_with_map:new i.Uniform1i(lt,Y.u_pitch_with_map),u_extrude_scale:new i.Uniform2f(lt,Y.u_extrude_scale),u_device_pixel_ratio:new i.Uniform1f(lt,Y.u_device_pixel_ratio),u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix)}},collisionBox:function(lt,Y){return{u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix),u_camera_to_center_distance:new i.Uniform1f(lt,Y.u_camera_to_center_distance),u_pixels_to_tile_units:new i.Uniform1f(lt,Y.u_pixels_to_tile_units),u_extrude_scale:new i.Uniform2f(lt,Y.u_extrude_scale),u_overscale_factor:new i.Uniform1f(lt,Y.u_overscale_factor)}},collisionCircle:function(lt,Y){return{u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix),u_inv_matrix:new i.UniformMatrix4f(lt,Y.u_inv_matrix),u_camera_to_center_distance:new i.Uniform1f(lt,Y.u_camera_to_center_distance),u_viewport_size:new i.Uniform2f(lt,Y.u_viewport_size)}},debug:function(lt,Y){return{u_color:new i.UniformColor(lt,Y.u_color),u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix),u_overlay:new i.Uniform1i(lt,Y.u_overlay),u_overlay_scale:new i.Uniform1f(lt,Y.u_overlay_scale)}},clippingMask:function(lt,Y){return{u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix)}},heatmap:function(lt,Y){return{u_extrude_scale:new i.Uniform1f(lt,Y.u_extrude_scale),u_intensity:new i.Uniform1f(lt,Y.u_intensity),u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix)}},heatmapTexture:function(lt,Y){return{u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix),u_world:new i.Uniform2f(lt,Y.u_world),u_image:new i.Uniform1i(lt,Y.u_image),u_color_ramp:new i.Uniform1i(lt,Y.u_color_ramp),u_opacity:new i.Uniform1f(lt,Y.u_opacity)}},hillshade:function(lt,Y){return{u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix),u_image:new i.Uniform1i(lt,Y.u_image),u_latrange:new i.Uniform2f(lt,Y.u_latrange),u_light:new i.Uniform2f(lt,Y.u_light),u_shadow:new i.UniformColor(lt,Y.u_shadow),u_highlight:new i.UniformColor(lt,Y.u_highlight),u_accent:new i.UniformColor(lt,Y.u_accent)}},hillshadePrepare:function(lt,Y){return{u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix),u_image:new i.Uniform1i(lt,Y.u_image),u_dimension:new i.Uniform2f(lt,Y.u_dimension),u_zoom:new i.Uniform1f(lt,Y.u_zoom),u_maxzoom:new i.Uniform1f(lt,Y.u_maxzoom),u_unpack:new i.Uniform4f(lt,Y.u_unpack)}},line:function(lt,Y){return{u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix),u_ratio:new i.Uniform1f(lt,Y.u_ratio),u_device_pixel_ratio:new i.Uniform1f(lt,Y.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(lt,Y.u_units_to_pixels)}},lineGradient:function(lt,Y){return{u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix),u_ratio:new i.Uniform1f(lt,Y.u_ratio),u_device_pixel_ratio:new i.Uniform1f(lt,Y.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(lt,Y.u_units_to_pixels),u_image:new i.Uniform1i(lt,Y.u_image)}},linePattern:function(lt,Y){return{u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix),u_texsize:new i.Uniform2f(lt,Y.u_texsize),u_ratio:new i.Uniform1f(lt,Y.u_ratio),u_device_pixel_ratio:new i.Uniform1f(lt,Y.u_device_pixel_ratio),u_image:new i.Uniform1i(lt,Y.u_image),u_units_to_pixels:new i.Uniform2f(lt,Y.u_units_to_pixels),u_scale:new i.Uniform3f(lt,Y.u_scale),u_fade:new i.Uniform1f(lt,Y.u_fade)}},lineSDF:function(lt,Y){return{u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix),u_ratio:new i.Uniform1f(lt,Y.u_ratio),u_device_pixel_ratio:new i.Uniform1f(lt,Y.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(lt,Y.u_units_to_pixels),u_patternscale_a:new i.Uniform2f(lt,Y.u_patternscale_a),u_patternscale_b:new i.Uniform2f(lt,Y.u_patternscale_b),u_sdfgamma:new i.Uniform1f(lt,Y.u_sdfgamma),u_image:new i.Uniform1i(lt,Y.u_image),u_tex_y_a:new i.Uniform1f(lt,Y.u_tex_y_a),u_tex_y_b:new i.Uniform1f(lt,Y.u_tex_y_b),u_mix:new i.Uniform1f(lt,Y.u_mix)}},raster:function(lt,Y){return{u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix),u_tl_parent:new i.Uniform2f(lt,Y.u_tl_parent),u_scale_parent:new i.Uniform1f(lt,Y.u_scale_parent),u_buffer_scale:new i.Uniform1f(lt,Y.u_buffer_scale),u_fade_t:new i.Uniform1f(lt,Y.u_fade_t),u_opacity:new i.Uniform1f(lt,Y.u_opacity),u_image0:new i.Uniform1i(lt,Y.u_image0),u_image1:new i.Uniform1i(lt,Y.u_image1),u_brightness_low:new i.Uniform1f(lt,Y.u_brightness_low),u_brightness_high:new i.Uniform1f(lt,Y.u_brightness_high),u_saturation_factor:new i.Uniform1f(lt,Y.u_saturation_factor),u_contrast_factor:new i.Uniform1f(lt,Y.u_contrast_factor),u_spin_weights:new i.Uniform3f(lt,Y.u_spin_weights)}},symbolIcon:function(lt,Y){return{u_is_size_zoom_constant:new i.Uniform1i(lt,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(lt,Y.u_is_size_feature_constant),u_size_t:new i.Uniform1f(lt,Y.u_size_t),u_size:new i.Uniform1f(lt,Y.u_size),u_camera_to_center_distance:new i.Uniform1f(lt,Y.u_camera_to_center_distance),u_pitch:new i.Uniform1f(lt,Y.u_pitch),u_rotate_symbol:new i.Uniform1i(lt,Y.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(lt,Y.u_aspect_ratio),u_fade_change:new i.Uniform1f(lt,Y.u_fade_change),u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(lt,Y.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(lt,Y.u_coord_matrix),u_is_text:new i.Uniform1i(lt,Y.u_is_text),u_pitch_with_map:new i.Uniform1i(lt,Y.u_pitch_with_map),u_texsize:new i.Uniform2f(lt,Y.u_texsize),u_texture:new i.Uniform1i(lt,Y.u_texture)}},symbolSDF:function(lt,Y){return{u_is_size_zoom_constant:new i.Uniform1i(lt,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(lt,Y.u_is_size_feature_constant),u_size_t:new i.Uniform1f(lt,Y.u_size_t),u_size:new i.Uniform1f(lt,Y.u_size),u_camera_to_center_distance:new i.Uniform1f(lt,Y.u_camera_to_center_distance),u_pitch:new i.Uniform1f(lt,Y.u_pitch),u_rotate_symbol:new i.Uniform1i(lt,Y.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(lt,Y.u_aspect_ratio),u_fade_change:new i.Uniform1f(lt,Y.u_fade_change),u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(lt,Y.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(lt,Y.u_coord_matrix),u_is_text:new i.Uniform1i(lt,Y.u_is_text),u_pitch_with_map:new i.Uniform1i(lt,Y.u_pitch_with_map),u_texsize:new i.Uniform2f(lt,Y.u_texsize),u_texture:new i.Uniform1i(lt,Y.u_texture),u_gamma_scale:new i.Uniform1f(lt,Y.u_gamma_scale),u_device_pixel_ratio:new i.Uniform1f(lt,Y.u_device_pixel_ratio),u_is_halo:new i.Uniform1i(lt,Y.u_is_halo)}},symbolTextAndIcon:function(lt,Y){return{u_is_size_zoom_constant:new i.Uniform1i(lt,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(lt,Y.u_is_size_feature_constant),u_size_t:new i.Uniform1f(lt,Y.u_size_t),u_size:new i.Uniform1f(lt,Y.u_size),u_camera_to_center_distance:new i.Uniform1f(lt,Y.u_camera_to_center_distance),u_pitch:new i.Uniform1f(lt,Y.u_pitch),u_rotate_symbol:new i.Uniform1i(lt,Y.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(lt,Y.u_aspect_ratio),u_fade_change:new i.Uniform1f(lt,Y.u_fade_change),u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(lt,Y.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(lt,Y.u_coord_matrix),u_is_text:new i.Uniform1i(lt,Y.u_is_text),u_pitch_with_map:new i.Uniform1i(lt,Y.u_pitch_with_map),u_texsize:new i.Uniform2f(lt,Y.u_texsize),u_texsize_icon:new i.Uniform2f(lt,Y.u_texsize_icon),u_texture:new i.Uniform1i(lt,Y.u_texture),u_texture_icon:new i.Uniform1i(lt,Y.u_texture_icon),u_gamma_scale:new i.Uniform1f(lt,Y.u_gamma_scale),u_device_pixel_ratio:new i.Uniform1f(lt,Y.u_device_pixel_ratio),u_is_halo:new i.Uniform1i(lt,Y.u_is_halo)}},background:function(lt,Y){return{u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix),u_opacity:new i.Uniform1f(lt,Y.u_opacity),u_color:new i.UniformColor(lt,Y.u_color)}},backgroundPattern:function(lt,Y){return{u_matrix:new i.UniformMatrix4f(lt,Y.u_matrix),u_opacity:new i.Uniform1f(lt,Y.u_opacity),u_image:new i.Uniform1i(lt,Y.u_image),u_pattern_tl_a:new i.Uniform2f(lt,Y.u_pattern_tl_a),u_pattern_br_a:new i.Uniform2f(lt,Y.u_pattern_br_a),u_pattern_tl_b:new i.Uniform2f(lt,Y.u_pattern_tl_b),u_pattern_br_b:new i.Uniform2f(lt,Y.u_pattern_br_b),u_texsize:new i.Uniform2f(lt,Y.u_texsize),u_mix:new i.Uniform1f(lt,Y.u_mix),u_pattern_size_a:new i.Uniform2f(lt,Y.u_pattern_size_a),u_pattern_size_b:new i.Uniform2f(lt,Y.u_pattern_size_b),u_scale_a:new i.Uniform1f(lt,Y.u_scale_a),u_scale_b:new i.Uniform1f(lt,Y.u_scale_b),u_pixel_coord_upper:new i.Uniform2f(lt,Y.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(lt,Y.u_pixel_coord_lower),u_tile_units_to_pixels:new i.Uniform1f(lt,Y.u_tile_units_to_pixels)}}};function vl(lt,Y,ht,_,vt,Ct,Yt){for(var ae=lt.context,ge=ae.gl,ze=lt.useProgram("collisionBox"),Je=[],ur=0,mr=0,Ir=0;Ir<_.length;Ir++){var Gr=_[Ir],Yr=Y.getTile(Gr),Ur=Yr.getBucket(ht);if(Ur){var Kr=Gr.posMatrix;(0!==vt[0]||0!==vt[1])&&(Kr=lt.translatePosMatrix(Gr.posMatrix,Yr,vt,Ct));var cn=Yt?Ur.textCollisionBox:Ur.iconCollisionBox,Cn=Ur.collisionCircleArray;if(Cn.length>0){var Rn=i.create(),Un=Kr;i.mul(Rn,Ur.placementInvProjMatrix,lt.transform.glCoordMatrix),i.mul(Rn,Rn,Ur.placementViewportMatrix),Je.push({circleArray:Cn,circleOffset:mr,transform:Un,invTransform:Rn}),mr=ur+=Cn.length/4}!cn||ze.draw(ae,ge.LINES,gr.disabled,Ye.disabled,lt.colorModeForRenderPass(),Ae.disabled,pf(Kr,lt.transform,Yr),ht.id,cn.layoutVertexBuffer,cn.indexBuffer,cn.segments,null,lt.transform.zoom,null,null,cn.collisionVertexBuffer)}}if(Yt&&Je.length){var Hn=lt.useProgram("collisionCircle"),Vn=new i.StructArrayLayout2f1f2i16;Vn.resize(4*ur),Vn._trim();for(var _n=0,sa=0,ia=Je;sa<ia.length;sa+=1)for(var ha=ia[sa],ga=0;ga<ha.circleArray.length/4;ga++){var Ca=4*ga,Fa=ha.circleArray[Ca+0],$a=ha.circleArray[Ca+1],Oa=ha.circleArray[Ca+2],Ha=ha.circleArray[Ca+3];Vn.emplace(_n++,Fa,$a,Oa,Ha,0),Vn.emplace(_n++,Fa,$a,Oa,Ha,1),Vn.emplace(_n++,Fa,$a,Oa,Ha,2),Vn.emplace(_n++,Fa,$a,Oa,Ha,3)}(!Ao||Ao.length<2*ur)&&(Ao=function hs(lt){var Y=2*lt,ht=new i.StructArrayLayout3ui6;ht.resize(Y),ht._trim();for(var _=0;_<Y;_++){var vt=6*_;ht.uint16[vt+0]=4*_+0,ht.uint16[vt+1]=4*_+1,ht.uint16[vt+2]=4*_+2,ht.uint16[vt+3]=4*_+2,ht.uint16[vt+4]=4*_+3,ht.uint16[vt+5]=4*_+0}return ht}(ur));for(var Ta=ae.createIndexBuffer(Ao,!0),_a=ae.createVertexBuffer(Vn,i.collisionCircleLayout.members,!0),ni=0,oi=Je;ni<oi.length;ni+=1){var Ya=oi[ni],ci=Bu(Ya.transform,Ya.invTransform,lt.transform);Hn.draw(ae,ge.TRIANGLES,gr.disabled,Ye.disabled,lt.colorModeForRenderPass(),Ae.disabled,ci,ht.id,_a,Ta,i.SegmentVector.simpleSegment(0,2*Ya.circleOffset,Ya.circleArray.length,Ya.circleArray.length/2),null,lt.transform.zoom,null,null,null)}_a.destroy(),Ta.destroy()}}var dl=i.identity(new Float32Array(16));function Wu(lt,Y,ht,_,vt,Ct){var Yt=i.getAnchorAlignment(lt),ze=-(Yt.horizontalAlign-.5)*Y,Je=-(Yt.verticalAlign-.5)*ht,ur=i.evaluateVariableOffset(lt,_);return new i.Point((ze/vt+ur[0])*Ct,(Je/vt+ur[1])*Ct)}function Ti(lt,Y,ht,_,vt,Ct,Yt,ae,ge,ze,Je){var ur=lt.text.placedSymbolArray,mr=lt.text.dynamicLayoutVertexArray,Ir=lt.icon.dynamicLayoutVertexArray,Gr={};mr.clear();for(var Yr=0;Yr<ur.length;Yr++){var Ur=ur.get(Yr),cn=Ur.hidden||!Ur.crossTileID||lt.allowVerticalPlacement&&!Ur.placedOrientation?null:_[Ur.crossTileID];if(cn){var Cn=new i.Point(Ur.anchorX,Ur.anchorY),Rn=Or(Cn,ht?ae:Yt),Un=an(Ct.cameraToCenterDistance,Rn.signedDistanceFromCamera),Hn=vt.evaluateSizeForFeature(lt.textSizeData,ze,Ur)*Un/i.ONE_EM;ht&&(Hn*=lt.tilePixelRatio/ge);for(var ga=Wu(cn.anchor,cn.width,cn.height,cn.textOffset,cn.textBoxScale,Hn),Ca=ht?Or(Cn.add(ga),Yt).point:Rn.point.add(Y?ga.rotate(-Ct.angle):ga),Fa=lt.allowVerticalPlacement&&Ur.placedOrientation===i.WritingMode.vertical?Math.PI/2:0,$a=0;$a<Ur.numGlyphs;$a++)i.addDynamicAttributes(mr,Ca,Fa);Je&&Ur.associatedIconIndex>=0&&(Gr[Ur.associatedIconIndex]={shiftedAnchor:Ca,angle:Fa})}else Wn(Ur.numGlyphs,mr)}if(Je){Ir.clear();for(var Oa=lt.icon.placedSymbolArray,Ha=0;Ha<Oa.length;Ha++){var Ta=Oa.get(Ha);if(Ta.hidden)Wn(Ta.numGlyphs,Ir);else{var _a=Gr[Ha];if(_a)for(var ni=0;ni<Ta.numGlyphs;ni++)i.addDynamicAttributes(Ir,_a.shiftedAnchor,_a.angle);else Wn(Ta.numGlyphs,Ir)}}lt.icon.dynamicLayoutVertexBuffer.updateData(Ir)}lt.text.dynamicLayoutVertexBuffer.updateData(mr)}function pu(lt,Y,ht){return ht.iconsInText&&Y?"symbolTextAndIcon":lt?"symbolSDF":"symbolIcon"}function Wl(lt,Y,ht,_,vt,Ct,Yt,ae,ge,ze,Je,ur){for(var mr=lt.context,Ir=mr.gl,Gr=lt.transform,Yr="map"===ae,Ur="map"===ge,Kr=Yr&&"point"!==ht.layout.get("symbol-placement"),cn=Yr&&!Ur&&!Kr,Cn=void 0!==ht.layout.get("symbol-sort-key").constantOr(1),Rn=lt.depthModeForSublayer(0,gr.ReadOnly),Un=ht.layout.get("text-variable-anchor"),Hn=[],Vn=0,_n=_;Vn<_n.length;Vn+=1){var sa=_n[Vn],ia=Y.getTile(sa),ha=ia.getBucket(ht);if(ha){var ga=vt?ha.text:ha.icon;if(ga&&ga.segments.get().length){var Ca=ga.programConfigurations.get(ht.id),Fa=vt||ha.sdfIcons,$a=vt?ha.textSizeData:ha.iconSizeData,Oa=Ur||0!==Gr.pitch,Ha=lt.useProgram(pu(Fa,vt,ha),Ca),Ta=i.evaluateSizeForZoom($a,Gr.zoom),_a=void 0,ni=[0,0],oi=void 0,Ya=void 0,ci=null,za=void 0;if(vt)oi=ia.glyphAtlasTexture,Ya=Ir.LINEAR,_a=ia.glyphAtlasTexture.size,ha.iconsInText&&(ni=ia.imageAtlasTexture.size,ci=ia.imageAtlasTexture,za=Oa||lt.options.rotating||lt.options.zooming||"composite"===$a.kind||"camera"===$a.kind?Ir.LINEAR:Ir.NEAREST);else{var Ri=1!==ht.layout.get("icon-size").constantOr(0)||ha.iconsNeedLinear;oi=ia.imageAtlasTexture,Ya=Fa||lt.options.rotating||lt.options.zooming||Ri||Oa?Ir.LINEAR:Ir.NEAREST,_a=ia.imageAtlasTexture.size}var Hi=gn(ia,1,lt.transform.zoom),ds=Ar(sa.posMatrix,Ur,Yr,lt.transform,Hi),ps=Br(sa.posMatrix,Ur,Yr,lt.transform,Hi),js=Un&&ha.hasTextData(),Ks="none"!==ht.layout.get("icon-text-fit")&&js&&ha.hasIconData();Kr&&pn(ha,sa.posMatrix,lt,vt,ds,ps,Ur,ze);var Tl=lt.translatePosMatrix(sa.posMatrix,ia,Ct,Yt),Js=Kr||vt&&Un||Ks?dl:ds,Co=lt.translatePosMatrix(ps,ia,Ct,Yt,!0),Jl=Fa&&0!==ht.paint.get(vt?"text-halo-width":"icon-halo-width").constantOr(1),qo={program:Ha,buffers:ga,uniformValues:Fa?ha.iconsInText?Hl($a.kind,Ta,cn,Ur,lt,Tl,Js,Co,_a,ni):fl($a.kind,Ta,cn,Ur,lt,Tl,Js,Co,vt,_a,!0):du($a.kind,Ta,cn,Ur,lt,Tl,Js,Co,vt,_a),atlasTexture:oi,atlasTextureIcon:ci,atlasInterpolation:Ya,atlasInterpolationIcon:za,isSDF:Fa,hasHalo:Jl};if(Cn)for(var Rs=0,$s=ga.segments.get();Rs<$s.length;Rs+=1){var Df=$s[Rs];Hn.push({segments:new i.SegmentVector([Df]),sortKey:Df.sortKey,state:qo})}else Hn.push({segments:ga.segments,sortKey:0,state:qo})}}}Cn&&Hn.sort(function(Rf,If){return Rf.sortKey-If.sortKey});for(var bu=0,oo=Hn;bu<oo.length;bu+=1){var wf=oo[bu],po=wf.state;if(mr.activeTexture.set(Ir.TEXTURE0),po.atlasTexture.bind(po.atlasInterpolation,Ir.CLAMP_TO_EDGE),po.atlasTextureIcon&&(mr.activeTexture.set(Ir.TEXTURE1),po.atlasTextureIcon&&po.atlasTextureIcon.bind(po.atlasInterpolationIcon,Ir.CLAMP_TO_EDGE)),po.isSDF){var Tf=po.uniformValues;po.hasHalo&&(Tf.u_is_halo=1,Ss(po.buffers,wf.segments,ht,lt,po.program,Rn,Je,ur,Tf)),Tf.u_is_halo=0}Ss(po.buffers,wf.segments,ht,lt,po.program,Rn,Je,ur,po.uniformValues)}}function Ss(lt,Y,ht,_,vt,Ct,Yt,ae,ge){var ze=_.context;vt.draw(ze,ze.gl.TRIANGLES,Ct,Yt,ae,Ae.disabled,ge,ht.id,lt.layoutVertexBuffer,lt.indexBuffer,Y,ht.paint,_.transform.zoom,lt.programConfigurations.get(ht.id),lt.dynamicLayoutVertexBuffer,lt.opacityVertexBuffer)}function Yu(lt,Y,ht,_,vt,Ct,Yt){var ur,mr,Ir,Gr,Yr,ae=lt.context.gl,ge=ht.paint.get("fill-pattern"),ze=ge&&ge.constantOr(1),Je=ht.getCrossfadeParameters();Yt?(mr=ze&&!ht.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ur=ae.LINES):(mr=ze?"fillPattern":"fill",ur=ae.TRIANGLES);for(var Ur=0,Kr=_;Ur<Kr.length;Ur+=1){var cn=Kr[Ur],Cn=Y.getTile(cn);if(!ze||Cn.patternsLoaded()){var Rn=Cn.getBucket(ht);if(Rn){var Un=Rn.programConfigurations.get(ht.id),Hn=lt.useProgram(mr,Un);ze&&(lt.context.activeTexture.set(ae.TEXTURE0),Cn.imageAtlasTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),Un.updatePaintBuffers(Je));var Vn=ge.constantOr(null);if(Vn&&Cn.imageAtlas){var _n=Cn.imageAtlas,sa=_n.patternPositions[Vn.to.toString()],ia=_n.patternPositions[Vn.from.toString()];sa&&ia&&Un.setConstantPatternPositions(sa,ia)}var ha=lt.translatePosMatrix(cn.posMatrix,Cn,ht.paint.get("fill-translate"),ht.paint.get("fill-translate-anchor"));if(Yt){Gr=Rn.indexBuffer2,Yr=Rn.segments2;var ga=[ae.drawingBufferWidth,ae.drawingBufferHeight];Ir="fillOutlinePattern"===mr&&ze?lu(ha,lt,Je,Cn,ga):su(ha,ga)}else Gr=Rn.indexBuffer,Yr=Rn.segments,Ir=ze?To(ha,lt,Je,Cn):ss(ha);Hn.draw(lt.context,ur,vt,lt.stencilModeForClipping(cn),Ct,Ae.disabled,Ir,ht.id,Rn.layoutVertexBuffer,Gr,Yr,ht.paint,lt.transform.zoom,Un)}}}}function Es(lt,Y,ht,_,vt,Ct,Yt){for(var ae=lt.context,ge=ae.gl,ze=ht.paint.get("fill-extrusion-pattern"),Je=ze.constantOr(1),ur=ht.getCrossfadeParameters(),mr=ht.paint.get("fill-extrusion-opacity"),Ir=0,Gr=_;Ir<Gr.length;Ir+=1){var Yr=Gr[Ir],Ur=Y.getTile(Yr),Kr=Ur.getBucket(ht);if(Kr){var cn=Kr.programConfigurations.get(ht.id),Cn=lt.useProgram(Je?"fillExtrusionPattern":"fillExtrusion",cn);Je&&(lt.context.activeTexture.set(ge.TEXTURE0),Ur.imageAtlasTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),cn.updatePaintBuffers(ur));var Rn=ze.constantOr(null);if(Rn&&Ur.imageAtlas){var Un=Ur.imageAtlas,Hn=Un.patternPositions[Rn.to.toString()],Vn=Un.patternPositions[Rn.from.toString()];Hn&&Vn&&cn.setConstantPatternPositions(Hn,Vn)}var _n=lt.translatePosMatrix(Yr.posMatrix,Ur,ht.paint.get("fill-extrusion-translate"),ht.paint.get("fill-extrusion-translate-anchor")),sa=ht.paint.get("fill-extrusion-vertical-gradient"),ia=Je?wo(_n,lt,sa,mr,Yr,ur,Ur):ko(_n,lt,sa,mr);Cn.draw(ae,ae.gl.TRIANGLES,vt,Ct,Yt,Ae.backCCW,ia,ht.id,Kr.layoutVertexBuffer,Kr.indexBuffer,Kr.segments,ht.paint,lt.transform.zoom,cn)}}}function mu(lt,Y,ht,_,vt,Ct){var Yt=lt.context,ae=Yt.gl,ge=Y.fbo;if(ge){var ze=lt.useProgram("hillshade");Yt.activeTexture.set(ae.TEXTURE0),ae.bindTexture(ae.TEXTURE_2D,ge.colorAttachment.get());var Je=function(lt,Y,ht){var _=ht.paint.get("hillshade-shadow-color"),vt=ht.paint.get("hillshade-highlight-color"),Ct=ht.paint.get("hillshade-accent-color"),Yt=ht.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===ht.paint.get("hillshade-illumination-anchor")&&(Yt-=lt.transform.angle);var ae=!lt.options.moving;return{u_matrix:lt.transform.calculatePosMatrix(Y.tileID.toUnwrapped(),ae),u_image:0,u_latrange:us(0,Y.tileID),u_light:[ht.paint.get("hillshade-exaggeration"),Yt],u_shadow:_,u_highlight:vt,u_accent:Ct}}(lt,Y,ht);ze.draw(Yt,ae.TRIANGLES,_,vt,Ct,Ae.disabled,Je,ht.id,lt.rasterBoundsBuffer,lt.quadTriangleIndexBuffer,lt.rasterBoundsSegments)}}function Yl(lt,Y,ht,_,vt,Ct,Yt){var ae=lt.context,ge=ae.gl,ze=Y.dem;if(ze&&ze.data){var Je=ze.dim,ur=ze.stride,mr=ze.getPixels();if(ae.activeTexture.set(ge.TEXTURE1),ae.pixelStoreUnpackPremultiplyAlpha.set(!1),Y.demTexture=Y.demTexture||lt.getTileTexture(ur),Y.demTexture){var Ir=Y.demTexture;Ir.update(mr,{premultiply:!1}),Ir.bind(ge.NEAREST,ge.CLAMP_TO_EDGE)}else Y.demTexture=new i.Texture(ae,mr,ge.RGBA,{premultiply:!1}),Y.demTexture.bind(ge.NEAREST,ge.CLAMP_TO_EDGE);ae.activeTexture.set(ge.TEXTURE0);var Gr=Y.fbo;if(!Gr){var Yr=new i.Texture(ae,{width:Je,height:Je,data:null},ge.RGBA);Yr.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),(Gr=Y.fbo=ae.createFramebuffer(Je,Je,!0)).colorAttachment.set(Yr.texture)}ae.bindFramebuffer.set(Gr.framebuffer),ae.viewport.set([0,0,Je,Je]),lt.useProgram("hillshadePrepare").draw(ae,ge.TRIANGLES,vt,Ct,Yt,Ae.disabled,function(lt,Y,ht){var _=Y.stride,vt=i.create();return i.ortho(vt,0,i.EXTENT,-i.EXTENT,0,0,1),i.translate(vt,vt,[0,-i.EXTENT,0]),{u_matrix:vt,u_image:1,u_dimension:[_,_],u_zoom:lt.overscaledZ,u_maxzoom:ht,u_unpack:Y.getUnpackVector()}}(Y.tileID,ze,_),ht.id,lt.rasterBoundsBuffer,lt.quadTriangleIndexBuffer,lt.rasterBoundsSegments),Y.needsHillshadePrepare=!1}}function Xs(lt,Y,ht,_,vt){var Ct=_.paint.get("raster-fade-duration");if(Ct>0){var Yt=i.browser.now(),ae=(Yt-lt.timeAdded)/Ct,ge=Y?(Yt-Y.timeAdded)/Ct:-1,ze=ht.getSource(),Je=vt.coveringZoomLevel({tileSize:ze.tileSize,roundZoom:ze.roundZoom}),ur=!Y||Math.abs(Y.tileID.overscaledZ-Je)>Math.abs(lt.tileID.overscaledZ-Je),mr=ur&&lt.refreshedUponExpiration?1:i.clamp(ur?ae:1-ge,0,1);return lt.refreshedUponExpiration&&ae>=1&&(lt.refreshedUponExpiration=!1),Y?{opacity:1,mix:1-mr}:{opacity:mr,mix:0}}return{opacity:1,mix:0}}var Zu=new i.Color(1,0,0,1),Zl=new i.Color(0,1,0,1),Xu=new i.Color(0,0,1,1),ml=new i.Color(1,0,1,1),xu=new i.Color(0,1,1,1);function Xt(lt){var Y=lt.transform.padding;fe(lt,lt.transform.height-(Y.top||0),3,Zu),fe(lt,Y.bottom||0,3,Zl),he(lt,Y.left||0,3,Xu),he(lt,lt.transform.width-(Y.right||0),3,ml);var _=lt.transform.centerPoint;!function _t(lt,Y,ht,_){var vt=20,Ct=2;Le(lt,Y-Ct/2,ht-vt/2,Ct,vt,_),Le(lt,Y-vt/2,ht-Ct/2,vt,Ct,_)}(lt,_.x,lt.transform.height-_.y,xu)}function fe(lt,Y,ht,_){Le(lt,0,Y+ht/2,lt.transform.width,ht,_)}function he(lt,Y,ht,_){Le(lt,Y-ht/2,0,ht,lt.transform.height,_)}function Le(lt,Y,ht,_,vt,Ct){var Yt=lt.context,ae=Yt.gl;ae.enable(ae.SCISSOR_TEST),ae.scissor(Y*i.browser.devicePixelRatio,ht*i.browser.devicePixelRatio,_*i.browser.devicePixelRatio,vt*i.browser.devicePixelRatio),Yt.clear({color:Ct}),ae.disable(ae.SCISSOR_TEST)}function ke(lt,Y,ht){var _=lt.context,vt=_.gl,Ct=ht.posMatrix,Yt=lt.useProgram("debug"),ae=gr.disabled,ge=Ye.disabled,ze=lt.colorModeForRenderPass();_.activeTexture.set(vt.TEXTURE0),lt.emptyTexture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE),Yt.draw(_,vt.LINE_STRIP,ae,ge,ze,Ae.disabled,Uu(Ct,i.Color.red),"$debug",lt.debugBuffer,lt.tileBorderIndexBuffer,lt.debugSegments);var ur=Y.getTileByID(ht.key).latestRawTileData,Ir=Math.floor((ur&&ur.byteLength||0)/1024),Gr=Y.getTile(ht).tileSize,Yr=512/Math.min(Gr,512)*(ht.overscaledZ/lt.transform.zoom)*.5,Ur=ht.canonical.toString();ht.overscaledZ!==ht.canonical.z&&(Ur+=" => "+ht.overscaledZ),function fr(lt,Y){lt.initDebugOverlayCanvas();var ht=lt.debugOverlayCanvas,_=lt.context.gl,vt=lt.debugOverlayCanvas.getContext("2d");vt.clearRect(0,0,ht.width,ht.height),vt.shadowColor="white",vt.shadowBlur=2,vt.lineWidth=1.5,vt.strokeStyle="white",vt.textBaseline="top",vt.font="bold 36px Open Sans, sans-serif",vt.fillText(Y,5,5),vt.strokeText(Y,5,5),lt.debugOverlayTexture.update(ht),lt.debugOverlayTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE)}(lt,Ur+" "+Ir+"kb"),Yt.draw(_,vt.TRIANGLES,ae,ge,re.alphaBlended,Ae.disabled,Uu(Ct,i.Color.transparent,Yr),"$debug",lt.debugBuffer,lt.quadTriangleIndexBuffer,lt.debugSegments)}var lr={symbol:function Ws(lt,Y,ht,_,vt){if("translucent"===lt.renderPass){var Ct=Ye.disabled,Yt=lt.colorModeForRenderPass();ht.layout.get("text-variable-anchor")&&function Gl(lt,Y,ht,_,vt,Ct,Yt){for(var ae=Y.transform,ge="map"===vt,ze="map"===Ct,Je=0,ur=lt;Je<ur.length;Je+=1){var mr=ur[Je],Ir=_.getTile(mr),Gr=Ir.getBucket(ht);if(Gr&&Gr.text&&Gr.text.segments.get().length){var Ur=i.evaluateSizeForZoom(Gr.textSizeData,ae.zoom),Kr=gn(Ir,1,Y.transform.zoom),cn=Ar(mr.posMatrix,ze,ge,Y.transform,Kr),Cn="none"!==ht.layout.get("icon-text-fit")&&Gr.hasIconData();if(Ur){var Rn=Math.pow(2,ae.zoom-Ir.tileID.overscaledZ);Ti(Gr,ge,ze,Yt,i.symbolSize,ae,cn,mr.posMatrix,Rn,Ur,Cn)}}}}(_,lt,ht,Y,ht.layout.get("text-rotation-alignment"),ht.layout.get("text-pitch-alignment"),vt),0!==ht.paint.get("icon-opacity").constantOr(1)&&Wl(lt,Y,ht,_,!1,ht.paint.get("icon-translate"),ht.paint.get("icon-translate-anchor"),ht.layout.get("icon-rotation-alignment"),ht.layout.get("icon-pitch-alignment"),ht.layout.get("icon-keep-upright"),Ct,Yt),0!==ht.paint.get("text-opacity").constantOr(1)&&Wl(lt,Y,ht,_,!0,ht.paint.get("text-translate"),ht.paint.get("text-translate-anchor"),ht.layout.get("text-rotation-alignment"),ht.layout.get("text-pitch-alignment"),ht.layout.get("text-keep-upright"),Ct,Yt),Y.map.showCollisionBoxes&&(vl(lt,Y,ht,_,ht.paint.get("text-translate"),ht.paint.get("text-translate-anchor"),!0),vl(lt,Y,ht,_,ht.paint.get("icon-translate"),ht.paint.get("icon-translate-anchor"),!1))}},circle:function vs(lt,Y,ht,_){if("translucent"===lt.renderPass){var vt=ht.paint.get("circle-opacity"),Ct=ht.paint.get("circle-stroke-width"),Yt=ht.paint.get("circle-stroke-opacity"),ae=void 0!==ht.layout.get("circle-sort-key").constantOr(1);if(0!==vt.constantOr(1)||0!==Ct.constantOr(1)&&0!==Yt.constantOr(1)){for(var ge=lt.context,ze=ge.gl,Je=lt.depthModeForSublayer(0,gr.ReadOnly),ur=Ye.disabled,mr=lt.colorModeForRenderPass(),Ir=[],Gr=0;Gr<_.length;Gr++){var Yr=_[Gr],Ur=Y.getTile(Yr),Kr=Ur.getBucket(ht);if(Kr){var cn=Kr.programConfigurations.get(ht.id),Vn={programConfiguration:cn,program:lt.useProgram("circle",cn),layoutVertexBuffer:Kr.layoutVertexBuffer,indexBuffer:Kr.indexBuffer,uniformValues:Vs(lt,Yr,Ur,ht)};if(ae)for(var sa=0,ia=Kr.segments.get();sa<ia.length;sa+=1){var ha=ia[sa];Ir.push({segments:new i.SegmentVector([ha]),sortKey:ha.sortKey,state:Vn})}else Ir.push({segments:Kr.segments,sortKey:0,state:Vn})}}ae&&Ir.sort(function(Ya,ci){return Ya.sortKey-ci.sortKey});for(var ga=0,Ca=Ir;ga<Ca.length;ga+=1){var Fa=Ca[ga],$a=Fa.state;$a.program.draw(ge,ze.TRIANGLES,Je,ur,mr,Ae.disabled,$a.uniformValues,ht.id,$a.layoutVertexBuffer,$a.indexBuffer,Fa.segments,ht.paint,lt.transform.zoom,$a.programConfiguration)}}}},heatmap:function gu(lt,Y,ht,_){if(0!==ht.paint.get("heatmap-opacity"))if("offscreen"===lt.renderPass){var vt=lt.context,Ct=vt.gl,Yt=Ye.disabled,ae=new re([Ct.ONE,Ct.ONE],i.Color.transparent,[!0,!0,!0,!0]);(function yf(lt,Y,ht){var _=lt.gl;lt.activeTexture.set(_.TEXTURE1),lt.viewport.set([0,0,Y.width/4,Y.height/4]);var vt=ht.heatmapFbo;if(vt)_.bindTexture(_.TEXTURE_2D,vt.colorAttachment.get()),lt.bindFramebuffer.set(vt.framebuffer);else{var Ct=_.createTexture();_.bindTexture(_.TEXTURE_2D,Ct),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.LINEAR),vt=ht.heatmapFbo=lt.createFramebuffer(Y.width/4,Y.height/4,!1),function Ys(lt,Y,ht,_){var vt=lt.gl;vt.texImage2D(vt.TEXTURE_2D,0,vt.RGBA,Y.width/4,Y.height/4,0,vt.RGBA,lt.extRenderToTextureHalfFloat?lt.extTextureHalfFloat.HALF_FLOAT_OES:vt.UNSIGNED_BYTE,null),_.colorAttachment.set(ht)}(lt,Y,Ct,vt)}})(vt,lt,ht),vt.clear({color:i.Color.transparent});for(var ge=0;ge<_.length;ge++){var ze=_[ge];if(!Y.hasRenderableParent(ze)){var Je=Y.getTile(ze),ur=Je.getBucket(ht);if(ur){var mr=ur.programConfigurations.get(ht.id);lt.useProgram("heatmap",mr).draw(vt,Ct.TRIANGLES,gr.disabled,Yt,ae,Ae.disabled,ol(ze.posMatrix,Je,lt.transform.zoom,ht.paint.get("heatmap-intensity")),ht.id,ur.layoutVertexBuffer,ur.indexBuffer,ur.segments,ht.paint,lt.transform.zoom,mr)}}}vt.viewport.set([0,0,lt.width,lt.height])}else"translucent"===lt.renderPass&&(lt.context.setColorMode(lt.colorModeForRenderPass()),function Zs(lt,Y){var ht=lt.context,_=ht.gl,vt=Y.heatmapFbo;if(vt){ht.activeTexture.set(_.TEXTURE0),_.bindTexture(_.TEXTURE_2D,vt.colorAttachment.get()),ht.activeTexture.set(_.TEXTURE1);var Ct=Y.colorRampTexture;Ct||(Ct=Y.colorRampTexture=new i.Texture(ht,Y.colorRamp,_.RGBA)),Ct.bind(_.LINEAR,_.CLAMP_TO_EDGE),lt.useProgram("heatmapTexture").draw(ht,_.TRIANGLES,gr.disabled,Ye.disabled,lt.colorModeForRenderPass(),Ae.disabled,function(lt,Y,ht,_){var vt=i.create();i.ortho(vt,0,lt.width,lt.height,0,0,1);var Ct=lt.context.gl;return{u_matrix:vt,u_world:[Ct.drawingBufferWidth,Ct.drawingBufferHeight],u_image:ht,u_color_ramp:_,u_opacity:Y.paint.get("heatmap-opacity")}}(lt,Y,0,1),Y.id,lt.viewportBuffer,lt.quadTriangleIndexBuffer,lt.viewportSegments,Y.paint,lt.transform.zoom)}}(lt,ht))},line:function pl(lt,Y,ht,_){if("translucent"===lt.renderPass){var vt=ht.paint.get("line-opacity"),Ct=ht.paint.get("line-width");if(0!==vt.constantOr(1)&&0!==Ct.constantOr(1)){var Yt=lt.depthModeForSublayer(0,gr.ReadOnly),ae=lt.colorModeForRenderPass(),ge=ht.paint.get("line-dasharray"),ze=ht.paint.get("line-pattern"),Je=ze.constantOr(1),ur=ht.paint.get("line-gradient"),mr=ht.getCrossfadeParameters(),Ir=Je?"linePattern":ge?"lineSDF":ur?"lineGradient":"line",Gr=lt.context,Yr=Gr.gl,Ur=!0;if(ur){Gr.activeTexture.set(Yr.TEXTURE0);var Kr=ht.gradientTexture;if(!ht.gradient)return;Kr||(Kr=ht.gradientTexture=new i.Texture(Gr,ht.gradient,Yr.RGBA)),Kr.bind(Yr.LINEAR,Yr.CLAMP_TO_EDGE)}for(var cn=0,Cn=_;cn<Cn.length;cn+=1){var Rn=Cn[cn],Un=Y.getTile(Rn);if(!Je||Un.patternsLoaded()){var Hn=Un.getBucket(ht);if(Hn){var Vn=Hn.programConfigurations.get(ht.id),_n=lt.context.program.get(),sa=lt.useProgram(Ir,Vn),ia=Ur||sa.program!==_n,ha=ze.constantOr(null);if(ha&&Un.imageAtlas){var ga=Un.imageAtlas,Ca=ga.patternPositions[ha.to.toString()],Fa=ga.patternPositions[ha.from.toString()];Ca&&Fa&&Vn.setConstantPatternPositions(Ca,Fa)}var $a=Je?cs(lt,Un,ht,mr):ge?ll(lt,Un,ht,ge,mr):ur?Vu(lt,Un,ht):Ts(lt,Un,ht);Je?(Gr.activeTexture.set(Yr.TEXTURE0),Un.imageAtlasTexture.bind(Yr.LINEAR,Yr.CLAMP_TO_EDGE),Vn.updatePaintBuffers(mr)):ge&&(ia||lt.lineAtlas.dirty)&&(Gr.activeTexture.set(Yr.TEXTURE0),lt.lineAtlas.bind(Gr)),sa.draw(Gr,Yr.TRIANGLES,Yt,lt.stencilModeForClipping(Rn),ae,Ae.disabled,$a,ht.id,Hn.layoutVertexBuffer,Hn.indexBuffer,Hn.segments,ht.paint,lt.transform.zoom,Vn),Ur=!1}}}}}},fill:function yl(lt,Y,ht,_){var vt=ht.paint.get("fill-color"),Ct=ht.paint.get("fill-opacity");if(0!==Ct.constantOr(1)){var Yt=lt.colorModeForRenderPass(),ae=ht.paint.get("fill-pattern"),ge=lt.opaquePassEnabledForLayer()&&!ae.constantOr(1)&&1===vt.constantOr(i.Color.transparent).a&&1===Ct.constantOr(0)?"opaque":"translucent";if(lt.renderPass===ge){var ze=lt.depthModeForSublayer(1,"opaque"===lt.renderPass?gr.ReadWrite:gr.ReadOnly);Yu(lt,Y,ht,_,ze,Yt,!1)}if("translucent"===lt.renderPass&&ht.paint.get("fill-antialias")){var Je=lt.depthModeForSublayer(ht.getPaintProperty("fill-outline-color")?2:0,gr.ReadOnly);Yu(lt,Y,ht,_,Je,Yt,!0)}}},"fill-extrusion":function yu(lt,Y,ht,_){var vt=ht.paint.get("fill-extrusion-opacity");if(0!==vt&&"translucent"===lt.renderPass){var Ct=new gr(lt.context.gl.LEQUAL,gr.ReadWrite,lt.depthRangeFor3D);if(1!==vt||ht.paint.get("fill-extrusion-pattern").constantOr(1))Es(lt,Y,ht,_,Ct,Ye.disabled,re.disabled),Es(lt,Y,ht,_,Ct,lt.stencilModeFor3D(),lt.colorModeForRenderPass());else{var Yt=lt.colorModeForRenderPass();Es(lt,Y,ht,_,Ct,Ye.disabled,Yt)}}},hillshade:function ao(lt,Y,ht,_){if("offscreen"===lt.renderPass||"translucent"===lt.renderPass){for(var vt=lt.context,Ct=Y.getSource().maxzoom,Yt=lt.depthModeForSublayer(0,gr.ReadOnly),ae=lt.colorModeForRenderPass(),ge="translucent"===lt.renderPass?lt.stencilConfigForOverlap(_):[{},_],ze=ge[0],ur=0,mr=ge[1];ur<mr.length;ur+=1){var Ir=mr[ur],Gr=Y.getTile(Ir);Gr.needsHillshadePrepare&&"offscreen"===lt.renderPass?Yl(lt,Gr,ht,Ct,Yt,Ye.disabled,ae):"translucent"===lt.renderPass&&mu(lt,Gr,ht,Yt,ze[Ir.overscaledZ],ae)}vt.viewport.set([0,0,lt.width,lt.height])}},raster:function Oo(lt,Y,ht,_){if("translucent"===lt.renderPass&&0!==ht.paint.get("raster-opacity")&&_.length)for(var vt=lt.context,Ct=vt.gl,Yt=Y.getSource(),ae=lt.useProgram("raster"),ge=lt.colorModeForRenderPass(),ze=Yt instanceof J?[{},_]:lt.stencilConfigForOverlap(_),Je=ze[0],ur=ze[1],mr=ur[ur.length-1].overscaledZ,Ir=!lt.options.moving,Gr=0,Yr=ur;Gr<Yr.length;Gr+=1){var Ur=Yr[Gr],Kr=lt.depthModeForSublayer(Ur.overscaledZ-mr,1===ht.paint.get("raster-opacity")?gr.ReadWrite:gr.ReadOnly,Ct.LESS),cn=Y.getTile(Ur),Cn=lt.transform.calculatePosMatrix(Ur.toUnwrapped(),Ir);cn.registerFadeDuration(ht.paint.get("raster-fade-duration"));var Rn=Y.findLoadedParent(Ur,0),Un=Xs(cn,Rn,Y,ht,lt.transform),Hn=void 0,Vn=void 0,_n="nearest"===ht.paint.get("raster-resampling")?Ct.NEAREST:Ct.LINEAR;vt.activeTexture.set(Ct.TEXTURE0),cn.texture.bind(_n,Ct.CLAMP_TO_EDGE,Ct.LINEAR_MIPMAP_NEAREST),vt.activeTexture.set(Ct.TEXTURE1),Rn?(Rn.texture.bind(_n,Ct.CLAMP_TO_EDGE,Ct.LINEAR_MIPMAP_NEAREST),Hn=Math.pow(2,Rn.tileID.overscaledZ-cn.tileID.overscaledZ),Vn=[cn.tileID.canonical.x*Hn%1,cn.tileID.canonical.y*Hn%1]):cn.texture.bind(_n,Ct.CLAMP_TO_EDGE,Ct.LINEAR_MIPMAP_NEAREST);var sa=As(Cn,Vn||[0,0],Hn||1,Un,ht);Yt instanceof J?ae.draw(vt,Ct.TRIANGLES,Kr,Ye.disabled,ge,Ae.disabled,sa,ht.id,Yt.boundsBuffer,lt.quadTriangleIndexBuffer,Yt.boundsSegments):ae.draw(vt,Ct.TRIANGLES,Kr,Je[Ur.overscaledZ],ge,Ae.disabled,sa,ht.id,lt.rasterBoundsBuffer,lt.quadTriangleIndexBuffer,lt.rasterBoundsSegments)}},background:function Cs(lt,Y,ht){var _=ht.paint.get("background-color"),vt=ht.paint.get("background-opacity");if(0!==vt){var Ct=lt.context,Yt=Ct.gl,ae=lt.transform,ge=ae.tileSize,ze=ht.paint.get("background-pattern");if(!lt.isPatternMissing(ze)){var Je=!ze&&1===_.a&&1===vt&&lt.opaquePassEnabledForLayer()?"opaque":"translucent";if(lt.renderPass===Je){var ur=Ye.disabled,mr=lt.depthModeForSublayer(0,"opaque"===Je?gr.ReadWrite:gr.ReadOnly),Ir=lt.colorModeForRenderPass(),Gr=lt.useProgram(ze?"backgroundPattern":"background"),Yr=ae.coveringTiles({tileSize:ge});ze&&(Ct.activeTexture.set(Yt.TEXTURE0),lt.imageManager.bind(lt.context));for(var Ur=ht.getCrossfadeParameters(),Kr=0,cn=Yr;Kr<cn.length;Kr+=1){var Cn=cn[Kr],Rn=lt.transform.calculatePosMatrix(Cn.toUnwrapped()),Un=ze?hl(Rn,vt,lt,ze,{tileID:Cn,tileSize:ge},Ur):cl(Rn,vt,_);Gr.draw(Ct,Yt.TRIANGLES,mr,ur,Ir,Ae.disabled,Un,ht.id,lt.tileExtentBuffer,lt.quadTriangleIndexBuffer,lt.tileExtentSegments)}}}}},debug:function Me(lt,Y,ht){for(var _=0;_<ht.length;_++)ke(lt,Y,ht[_])},custom:function pr(lt,Y,ht){var _=lt.context,vt=ht.implementation;if("offscreen"===lt.renderPass){var Ct=vt.prerender;Ct&&(lt.setCustomLayerDefaults(),_.setColorMode(lt.colorModeForRenderPass()),Ct.call(vt,_.gl,lt.transform.customLayerMatrix()),_.setDirty(),lt.setBaseState())}else if("translucent"===lt.renderPass){lt.setCustomLayerDefaults(),_.setColorMode(lt.colorModeForRenderPass()),_.setStencilMode(Ye.disabled);var Yt="3d"===vt.renderingMode?new gr(lt.context.gl.LEQUAL,gr.ReadWrite,lt.depthRangeFor3D):lt.depthModeForSublayer(0,gr.ReadOnly);_.setDepthMode(Yt),vt.render(_.gl,lt.transform.customLayerMatrix()),_.setDirty(),lt.setBaseState(),_.bindFramebuffer.set(null)}}},vr=function(Y,ht){this.context=new Te(Y),this.transform=ht,this._tileTextures={},this.setup(),this.numSublayers=Re.maxUnderzooming+Re.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ea,this.gpuTimers={}};vr.prototype.resize=function(Y,ht){if(this.width=Y*i.browser.devicePixelRatio,this.height=ht*i.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var _=0,vt=this.style._order;_<vt.length;_+=1)this.style._layers[vt[_]].resize()},vr.prototype.setup=function(){var Y=this.context,ht=new i.StructArrayLayout2i4;ht.emplaceBack(0,0),ht.emplaceBack(i.EXTENT,0),ht.emplaceBack(0,i.EXTENT),ht.emplaceBack(i.EXTENT,i.EXTENT),this.tileExtentBuffer=Y.createVertexBuffer(ht,eo.members),this.tileExtentSegments=i.SegmentVector.simpleSegment(0,0,4,2);var _=new i.StructArrayLayout2i4;_.emplaceBack(0,0),_.emplaceBack(i.EXTENT,0),_.emplaceBack(0,i.EXTENT),_.emplaceBack(i.EXTENT,i.EXTENT),this.debugBuffer=Y.createVertexBuffer(_,eo.members),this.debugSegments=i.SegmentVector.simpleSegment(0,0,4,5);var vt=new i.StructArrayLayout4i8;vt.emplaceBack(0,0,0,0),vt.emplaceBack(i.EXTENT,0,i.EXTENT,0),vt.emplaceBack(0,i.EXTENT,0,i.EXTENT),vt.emplaceBack(i.EXTENT,i.EXTENT,i.EXTENT,i.EXTENT),this.rasterBoundsBuffer=Y.createVertexBuffer(vt,H.members),this.rasterBoundsSegments=i.SegmentVector.simpleSegment(0,0,4,2);var Ct=new i.StructArrayLayout2i4;Ct.emplaceBack(0,0),Ct.emplaceBack(1,0),Ct.emplaceBack(0,1),Ct.emplaceBack(1,1),this.viewportBuffer=Y.createVertexBuffer(Ct,eo.members),this.viewportSegments=i.SegmentVector.simpleSegment(0,0,4,2);var Yt=new i.StructArrayLayout1ui2;Yt.emplaceBack(0),Yt.emplaceBack(1),Yt.emplaceBack(3),Yt.emplaceBack(2),Yt.emplaceBack(0),this.tileBorderIndexBuffer=Y.createIndexBuffer(Yt);var ae=new i.StructArrayLayout3ui6;ae.emplaceBack(0,1,2),ae.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=Y.createIndexBuffer(ae),this.emptyTexture=new i.Texture(Y,{width:1,height:1,data:new Uint8Array([0,0,0,0])},Y.gl.RGBA);var ge=this.context.gl;this.stencilClearMode=new Ye({func:ge.ALWAYS,mask:0},0,255,ge.ZERO,ge.ZERO,ge.ZERO)},vr.prototype.clearStencil=function(){var Y=this.context,ht=Y.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var _=i.create();i.ortho(_,0,this.width,this.height,0,0,1),i.scale(_,_,[ht.drawingBufferWidth,ht.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(Y,ht.TRIANGLES,gr.disabled,this.stencilClearMode,re.disabled,Ae.disabled,Ni(_),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},vr.prototype._renderTileClippingMasks=function(Y,ht){if(this.currentStencilSource!==Y.source&&Y.isTileClipped()&&ht&&ht.length){this.currentStencilSource=Y.source;var _=this.context,vt=_.gl;this.nextStencilID+ht.length>256&&this.clearStencil(),_.setColorMode(re.disabled),_.setDepthMode(gr.disabled);var Ct=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Yt=0,ae=ht;Yt<ae.length;Yt+=1){var ge=ae[Yt],ze=this._tileClippingMaskIDs[ge.key]=this.nextStencilID++;Ct.draw(_,vt.TRIANGLES,gr.disabled,new Ye({func:vt.ALWAYS,mask:0},ze,255,vt.KEEP,vt.KEEP,vt.REPLACE),re.disabled,Ae.disabled,Ni(ge.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},vr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var Y=this.nextStencilID++,ht=this.context.gl;return new Ye({func:ht.NOTEQUAL,mask:255},Y,255,ht.KEEP,ht.KEEP,ht.REPLACE)},vr.prototype.stencilModeForClipping=function(Y){var ht=this.context.gl;return new Ye({func:ht.EQUAL,mask:255},this._tileClippingMaskIDs[Y.key],0,ht.KEEP,ht.KEEP,ht.REPLACE)},vr.prototype.stencilConfigForOverlap=function(Y){var ht,_=this.context.gl,vt=Y.sort(function(ze,Je){return Je.overscaledZ-ze.overscaledZ}),Ct=vt[vt.length-1].overscaledZ,Yt=vt[0].overscaledZ-Ct+1;if(Yt>1){this.currentStencilSource=void 0,this.nextStencilID+Yt>256&&this.clearStencil();for(var ae={},ge=0;ge<Yt;ge++)ae[ge+Ct]=new Ye({func:_.GEQUAL,mask:255},ge+this.nextStencilID,255,_.KEEP,_.KEEP,_.REPLACE);return this.nextStencilID+=Yt,[ae,vt]}return[(ht={},ht[Ct]=Ye.disabled,ht),vt]},vr.prototype.colorModeForRenderPass=function(){var Y=this.context.gl;if(this._showOverdrawInspector){var _=1/8;return new re([Y.CONSTANT_COLOR,Y.ONE],new i.Color(_,_,_,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?re.unblended:re.alphaBlended},vr.prototype.depthModeForSublayer=function(Y,ht,_){if(!this.opaquePassEnabledForLayer())return gr.disabled;var vt=1-((1+this.currentLayer)*this.numSublayers+Y)*this.depthEpsilon;return new gr(_||this.context.gl.LEQUAL,ht,[vt,vt])},vr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},vr.prototype.render=function(Y,ht){var _=this;this.style=Y,this.options=ht,this.lineAtlas=Y.lineAtlas,this.imageManager=Y.imageManager,this.glyphManager=Y.glyphManager,this.symbolFadeChange=Y.placement.symbolFadeChange(i.browser.now()),this.imageManager.beginFrame();var vt=this.style._order,Ct=this.style.sourceCaches;for(var Yt in Ct){var ae=Ct[Yt];ae.used&&ae.prepare(this.context)}var ia,ha,ge={},ze={},Je={};for(var ur in Ct){var mr=Ct[ur];ge[ur]=mr.getVisibleCoordinates(),ze[ur]=ge[ur].slice().reverse(),Je[ur]=mr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Ir=0;Ir<vt.length;Ir++)if(this.style._layers[vt[Ir]].is3D()){this.opaquePassCutoff=Ir;break}this.renderPass="offscreen";for(var Yr=0,Ur=vt;Yr<Ur.length;Yr+=1){var cn=this.style._layers[Ur[Yr]];if(cn.hasOffscreenPass()&&!cn.isHidden(this.transform.zoom)){var Cn=ze[cn.source];"custom"!==cn.type&&!Cn.length||this.renderLayer(this,Ct[cn.source],cn,Cn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:ht.showOverdrawInspector?i.Color.black:i.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=ht.showOverdrawInspector,this.depthRangeFor3D=[0,1-(Y._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=vt.length-1;this.currentLayer>=0;this.currentLayer--){var Rn=this.style._layers[vt[this.currentLayer]],Un=Ct[Rn.source],Hn=ge[Rn.source];this._renderTileClippingMasks(Rn,Hn),this.renderLayer(this,Un,Rn,Hn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<vt.length;this.currentLayer++){var Vn=this.style._layers[vt[this.currentLayer]],_n=Ct[Vn.source],sa=("symbol"===Vn.type?Je:ze)[Vn.source];this._renderTileClippingMasks(Vn,ge[Vn.source]),this.renderLayer(this,_n,Vn,sa)}this.options.showTileBoundaries&&(i.values(this.style._layers).forEach(function(Ca){Ca.source&&!Ca.isHidden(_.transform.zoom)&&(Ca.source!==(ha&&ha.id)&&(ha=_.style.sourceCaches[Ca.source]),(!ia||ia.getSource().maxzoom<ha.getSource().maxzoom)&&(ia=ha))}),ia&&lr.debug(this,ia,ia.getVisibleCoordinates())),this.options.showPadding&&Xt(this),this.context.setDefault()},vr.prototype.renderLayer=function(Y,ht,_,vt){_.isHidden(this.transform.zoom)||"background"!==_.type&&"custom"!==_.type&&!vt.length||(this.id=_.id,this.gpuTimingStart(_),lr[_.type](Y,ht,_,vt,this.style.placement.variableOffsets),this.gpuTimingEnd())},vr.prototype.gpuTimingStart=function(Y){if(this.options.gpuTiming){var ht=this.context.extTimerQuery,_=this.gpuTimers[Y.id];_||(_=this.gpuTimers[Y.id]={calls:0,cpuTime:0,query:ht.createQueryEXT()}),_.calls++,ht.beginQueryEXT(ht.TIME_ELAPSED_EXT,_.query)}},vr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var Y=this.context.extTimerQuery;Y.endQueryEXT(Y.TIME_ELAPSED_EXT)}},vr.prototype.collectGpuTimers=function(){var Y=this.gpuTimers;return this.gpuTimers={},Y},vr.prototype.queryGpuTimers=function(Y){var ht={};for(var _ in Y){var vt=Y[_],Ct=this.context.extTimerQuery,Yt=Ct.getQueryObjectEXT(vt.query,Ct.QUERY_RESULT_EXT)/1e6;Ct.deleteQueryEXT(vt.query),ht[_]=Yt}return ht},vr.prototype.translatePosMatrix=function(Y,ht,_,vt,Ct){if(!_[0]&&!_[1])return Y;var Yt=Ct?"map"===vt?this.transform.angle:0:"viewport"===vt?-this.transform.angle:0;if(Yt){var ae=Math.sin(Yt),ge=Math.cos(Yt);_=[_[0]*ge-_[1]*ae,_[0]*ae+_[1]*ge]}var ze=[Ct?_[0]:gn(ht,_[0],this.transform.zoom),Ct?_[1]:gn(ht,_[1],this.transform.zoom),0],Je=new Float32Array(16);return i.translate(Je,Y,ze),Je},vr.prototype.saveTileTexture=function(Y){var ht=this._tileTextures[Y.size[0]];ht?ht.push(Y):this._tileTextures[Y.size[0]]=[Y]},vr.prototype.getTileTexture=function(Y){var ht=this._tileTextures[Y];return ht&&ht.length>0?ht.pop():null},vr.prototype.isPatternMissing=function(Y){if(!Y)return!1;if(!Y.from||!Y.to)return!0;var ht=this.imageManager.getPattern(Y.from.toString()),_=this.imageManager.getPattern(Y.to.toString());return!ht||!_},vr.prototype.useProgram=function(Y,ht){this.cache=this.cache||{};var _=""+Y+(ht?ht.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[_]||(this.cache[_]=new uo(this.context,Ns[Y],ht,$o[Y],this._showOverdrawInspector)),this.cache[_]},vr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},vr.prototype.setBaseState=function(){var Y=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(Y.FUNC_ADD)},vr.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=i.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new i.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},vr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Fr=function(Y,ht){this.points=Y,this.planes=ht};Fr.fromInvProjectionMatrix=function(Y,ht,_){var Ct=Math.pow(2,_),Yt=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(ze){return i.transformMat4([],ze,Y)}).map(function(ze){return i.scale$1([],ze,1/ze[3]/ht*Ct)}),ge=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(ze){var Je=i.sub([],Yt[ze[0]],Yt[ze[1]]),ur=i.sub([],Yt[ze[2]],Yt[ze[1]]),mr=i.normalize([],i.cross([],Je,ur)),Ir=-i.dot(mr,Yt[ze[1]]);return mr.concat(Ir)});return new Fr(Yt,ge)};var Hr=function(Y,ht){this.min=Y,this.max=ht,this.center=i.scale$2([],i.add([],this.min,this.max),.5)};Hr.prototype.quadrant=function(Y){for(var ht=[Y%2==0,Y<2],_=i.clone$2(this.min),vt=i.clone$2(this.max),Ct=0;Ct<ht.length;Ct++)_[Ct]=ht[Ct]?this.min[Ct]:this.center[Ct],vt[Ct]=ht[Ct]?this.center[Ct]:this.max[Ct];return vt[2]=this.max[2],new Hr(_,vt)},Hr.prototype.distanceX=function(Y){return Math.max(Math.min(this.max[0],Y[0]),this.min[0])-Y[0]},Hr.prototype.distanceY=function(Y){return Math.max(Math.min(this.max[1],Y[1]),this.min[1])-Y[1]},Hr.prototype.intersects=function(Y){for(var ht=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],_=!0,vt=0;vt<Y.planes.length;vt++){for(var Ct=Y.planes[vt],Yt=0,ae=0;ae<ht.length;ae++)Yt+=i.dot$1(Ct,ht[ae])>=0;if(0===Yt)return 0;Yt!==ht.length&&(_=!1)}if(_)return 2;for(var ge=0;ge<3;ge++){for(var ze=Number.MAX_VALUE,Je=-Number.MAX_VALUE,ur=0;ur<Y.points.length;ur++){var mr=Y.points[ur][ge]-this.min[ge];ze=Math.min(ze,mr),Je=Math.max(Je,mr)}if(Je<0||ze>this.max[ge]-this.min[ge])return 0}return 1};var jr=function(Y,ht,_,vt){if(void 0===Y&&(Y=0),void 0===ht&&(ht=0),void 0===_&&(_=0),void 0===vt&&(vt=0),isNaN(Y)||Y<0||isNaN(ht)||ht<0||isNaN(_)||_<0||isNaN(vt)||vt<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=Y,this.bottom=ht,this.left=_,this.right=vt};jr.prototype.interpolate=function(Y,ht,_){return null!=ht.top&&null!=Y.top&&(this.top=i.number(Y.top,ht.top,_)),null!=ht.bottom&&null!=Y.bottom&&(this.bottom=i.number(Y.bottom,ht.bottom,_)),null!=ht.left&&null!=Y.left&&(this.left=i.number(Y.left,ht.left,_)),null!=ht.right&&null!=Y.right&&(this.right=i.number(Y.right,ht.right,_)),this},jr.prototype.getCenter=function(Y,ht){var _=i.clamp((this.left+Y-this.right)/2,0,Y),vt=i.clamp((this.top+ht-this.bottom)/2,0,ht);return new i.Point(_,vt)},jr.prototype.equals=function(Y){return this.top===Y.top&&this.bottom===Y.bottom&&this.left===Y.left&&this.right===Y.right},jr.prototype.clone=function(){return new jr(this.top,this.bottom,this.left,this.right)},jr.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var $r=function(Y,ht,_,vt,Ct){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===Ct||Ct,this._minZoom=Y||0,this._maxZoom=ht||22,this._minPitch=null==_?0:_,this._maxPitch=null==vt?60:vt,this.setMaxBounds(),this.width=0,this.height=0,this._center=new i.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new jr,this._posMatrixCache={},this._alignedPosMatrixCache={}},bn={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};$r.prototype.clone=function(){var Y=new $r(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return Y.tileSize=this.tileSize,Y.latRange=this.latRange,Y.width=this.width,Y.height=this.height,Y._center=this._center,Y.zoom=this.zoom,Y.angle=this.angle,Y._fov=this._fov,Y._pitch=this._pitch,Y._unmodified=this._unmodified,Y._edgeInsets=this._edgeInsets.clone(),Y._calcMatrices(),Y},bn.minZoom.get=function(){return this._minZoom},bn.minZoom.set=function(lt){this._minZoom!==lt&&(this._minZoom=lt,this.zoom=Math.max(this.zoom,lt))},bn.maxZoom.get=function(){return this._maxZoom},bn.maxZoom.set=function(lt){this._maxZoom!==lt&&(this._maxZoom=lt,this.zoom=Math.min(this.zoom,lt))},bn.minPitch.get=function(){return this._minPitch},bn.minPitch.set=function(lt){this._minPitch!==lt&&(this._minPitch=lt,this.pitch=Math.max(this.pitch,lt))},bn.maxPitch.get=function(){return this._maxPitch},bn.maxPitch.set=function(lt){this._maxPitch!==lt&&(this._maxPitch=lt,this.pitch=Math.min(this.pitch,lt))},bn.renderWorldCopies.get=function(){return this._renderWorldCopies},bn.renderWorldCopies.set=function(lt){void 0===lt?lt=!0:null===lt&&(lt=!1),this._renderWorldCopies=lt},bn.worldSize.get=function(){return this.tileSize*this.scale},bn.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},bn.size.get=function(){return new i.Point(this.width,this.height)},bn.bearing.get=function(){return-this.angle/Math.PI*180},bn.bearing.set=function(lt){var Y=-i.wrap(lt,-180,180)*Math.PI/180;this.angle!==Y&&(this._unmodified=!1,this.angle=Y,this._calcMatrices(),this.rotationMatrix=i.create$2(),i.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},bn.pitch.get=function(){return this._pitch/Math.PI*180},bn.pitch.set=function(lt){var Y=i.clamp(lt,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==Y&&(this._unmodified=!1,this._pitch=Y,this._calcMatrices())},bn.fov.get=function(){return this._fov/Math.PI*180},bn.fov.set=function(lt){lt=Math.max(.01,Math.min(60,lt)),this._fov!==lt&&(this._unmodified=!1,this._fov=lt/180*Math.PI,this._calcMatrices())},bn.zoom.get=function(){return this._zoom},bn.zoom.set=function(lt){var Y=Math.min(Math.max(lt,this.minZoom),this.maxZoom);this._zoom!==Y&&(this._unmodified=!1,this._zoom=Y,this.scale=this.zoomScale(Y),this.tileZoom=Math.floor(Y),this.zoomFraction=Y-this.tileZoom,this._constrain(),this._calcMatrices())},bn.center.get=function(){return this._center},bn.center.set=function(lt){lt.lat===this._center.lat&&lt.lng===this._center.lng||(this._unmodified=!1,this._center=lt,this._constrain(),this._calcMatrices())},bn.padding.get=function(){return this._edgeInsets.toJSON()},bn.padding.set=function(lt){this._edgeInsets.equals(lt)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,lt,1),this._calcMatrices())},bn.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},$r.prototype.isPaddingEqual=function(Y){return this._edgeInsets.equals(Y)},$r.prototype.interpolatePadding=function(Y,ht,_){this._unmodified=!1,this._edgeInsets.interpolate(Y,ht,_),this._constrain(),this._calcMatrices()},$r.prototype.coveringZoomLevel=function(Y){var ht=(Y.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/Y.tileSize));return Math.max(0,ht)},$r.prototype.getVisibleUnwrappedCoordinates=function(Y){var ht=[new i.UnwrappedTileID(0,Y)];if(this._renderWorldCopies)for(var _=this.pointCoordinate(new i.Point(0,0)),vt=this.pointCoordinate(new i.Point(this.width,0)),Ct=this.pointCoordinate(new i.Point(this.width,this.height)),Yt=this.pointCoordinate(new i.Point(0,this.height)),ae=Math.floor(Math.min(_.x,vt.x,Ct.x,Yt.x)),ge=Math.floor(Math.max(_.x,vt.x,Ct.x,Yt.x)),Je=ae-1;Je<=ge+1;Je++)0!==Je&&ht.push(new i.UnwrappedTileID(Je,Y));return ht},$r.prototype.coveringTiles=function(Y){var ht=this.coveringZoomLevel(Y),_=ht;if(void 0!==Y.minzoom&&ht<Y.minzoom)return[];void 0!==Y.maxzoom&&ht>Y.maxzoom&&(ht=Y.maxzoom);var vt=i.MercatorCoordinate.fromLngLat(this.center),Ct=Math.pow(2,ht),Yt=[Ct*vt.x,Ct*vt.y,0],ae=Fr.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,ht),ge=Y.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ge=ht);var Je=function(ga){return{aabb:new Hr([ga*Ct,0,0],[(ga+1)*Ct,Ct,0]),zoom:0,x:0,y:0,wrap:ga,fullyVisible:!1}},ur=[],mr=[],Ir=ht,Gr=Y.reparseOverscaled?_:ht;if(this._renderWorldCopies)for(var Yr=1;Yr<=3;Yr++)ur.push(Je(-Yr)),ur.push(Je(Yr));for(ur.push(Je(0));ur.length>0;){var Ur=ur.pop(),Kr=Ur.x,cn=Ur.y,Cn=Ur.fullyVisible;if(!Cn){var Rn=Ur.aabb.intersects(ae);if(0===Rn)continue;Cn=2===Rn}var Un=Ur.aabb.distanceX(Yt),Hn=Ur.aabb.distanceY(Yt),Vn=Math.max(Math.abs(Un),Math.abs(Hn));if(Ur.zoom===Ir||Vn>3+(1<<Ir-Ur.zoom)-2&&Ur.zoom>=ge)mr.push({tileID:new i.OverscaledTileID(Ur.zoom===Ir?Gr:Ur.zoom,Ur.wrap,Ur.zoom,Kr,cn),distanceSq:i.sqrLen([Yt[0]-.5-Kr,Yt[1]-.5-cn])});else for(var sa=0;sa<4;sa++){var ia=(Kr<<1)+sa%2,ha=(cn<<1)+(sa>>1);ur.push({aabb:Ur.aabb.quadrant(sa),zoom:Ur.zoom+1,x:ia,y:ha,wrap:Ur.wrap,fullyVisible:Cn})}}return mr.sort(function(ga,Ca){return ga.distanceSq-Ca.distanceSq}).map(function(ga){return ga.tileID})},$r.prototype.resize=function(Y,ht){this.width=Y,this.height=ht,this.pixelsToGLUnits=[2/Y,-2/ht],this._constrain(),this._calcMatrices()},bn.unmodified.get=function(){return this._unmodified},$r.prototype.zoomScale=function(Y){return Math.pow(2,Y)},$r.prototype.scaleZoom=function(Y){return Math.log(Y)/Math.LN2},$r.prototype.project=function(Y){var ht=i.clamp(Y.lat,-this.maxValidLatitude,this.maxValidLatitude);return new i.Point(i.mercatorXfromLng(Y.lng)*this.worldSize,i.mercatorYfromLat(ht)*this.worldSize)},$r.prototype.unproject=function(Y){return new i.MercatorCoordinate(Y.x/this.worldSize,Y.y/this.worldSize).toLngLat()},bn.point.get=function(){return this.project(this.center)},$r.prototype.setLocationAtPoint=function(Y,ht){var _=this.pointCoordinate(ht),vt=this.pointCoordinate(this.centerPoint),Ct=this.locationCoordinate(Y),Yt=new i.MercatorCoordinate(Ct.x-(_.x-vt.x),Ct.y-(_.y-vt.y));this.center=this.coordinateLocation(Yt),this._renderWorldCopies&&(this.center=this.center.wrap())},$r.prototype.locationPoint=function(Y){return this.coordinatePoint(this.locationCoordinate(Y))},$r.prototype.pointLocation=function(Y){return this.coordinateLocation(this.pointCoordinate(Y))},$r.prototype.locationCoordinate=function(Y){return i.MercatorCoordinate.fromLngLat(Y)},$r.prototype.coordinateLocation=function(Y){return Y.toLngLat()},$r.prototype.pointCoordinate=function(Y){var _=[Y.x,Y.y,0,1],vt=[Y.x,Y.y,1,1];i.transformMat4(_,_,this.pixelMatrixInverse),i.transformMat4(vt,vt,this.pixelMatrixInverse);var Ct=_[3],Yt=vt[3],ze=_[1]/Ct,Je=vt[1]/Yt,ur=_[2]/Ct,mr=vt[2]/Yt,Ir=ur===mr?0:(0-ur)/(mr-ur);return new i.MercatorCoordinate(i.number(_[0]/Ct,vt[0]/Yt,Ir)/this.worldSize,i.number(ze,Je,Ir)/this.worldSize)},$r.prototype.coordinatePoint=function(Y){var ht=[Y.x*this.worldSize,Y.y*this.worldSize,0,1];return i.transformMat4(ht,ht,this.pixelMatrix),new i.Point(ht[0]/ht[3],ht[1]/ht[3])},$r.prototype.getBounds=function(){return(new i.LngLatBounds).extend(this.pointLocation(new i.Point(0,0))).extend(this.pointLocation(new i.Point(this.width,0))).extend(this.pointLocation(new i.Point(this.width,this.height))).extend(this.pointLocation(new i.Point(0,this.height)))},$r.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new i.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},$r.prototype.setMaxBounds=function(Y){Y?(this.lngRange=[Y.getWest(),Y.getEast()],this.latRange=[Y.getSouth(),Y.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},$r.prototype.calculatePosMatrix=function(Y,ht){void 0===ht&&(ht=!1);var _=Y.key,vt=ht?this._alignedPosMatrixCache:this._posMatrixCache;if(vt[_])return vt[_];var Ct=Y.canonical,Yt=this.worldSize/this.zoomScale(Ct.z),ae=Ct.x+Math.pow(2,Ct.z)*Y.wrap,ge=i.identity(new Float64Array(16));return i.translate(ge,ge,[ae*Yt,Ct.y*Yt,0]),i.scale(ge,ge,[Yt/i.EXTENT,Yt/i.EXTENT,1]),i.multiply(ge,ht?this.alignedProjMatrix:this.projMatrix,ge),vt[_]=new Float32Array(ge),vt[_]},$r.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},$r.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var Ct,Yt,ae,ge,Y=-90,ht=90,_=-180,vt=180,ze=this.size,Je=this._unmodified;if(this.latRange){var ur=this.latRange;Y=i.mercatorYfromLat(ur[1])*this.worldSize,Ct=(ht=i.mercatorYfromLat(ur[0])*this.worldSize)-Y<ze.y?ze.y/(ht-Y):0}if(this.lngRange){var mr=this.lngRange;_=i.mercatorXfromLng(mr[0])*this.worldSize,Yt=(vt=i.mercatorXfromLng(mr[1])*this.worldSize)-_<ze.x?ze.x/(vt-_):0}var Ir=this.point,Gr=Math.max(Yt||0,Ct||0);if(Gr)return this.center=this.unproject(new i.Point(Yt?(vt+_)/2:Ir.x,Ct?(ht+Y)/2:Ir.y)),this.zoom+=this.scaleZoom(Gr),this._unmodified=Je,void(this._constraining=!1);if(this.latRange){var Yr=Ir.y,Ur=ze.y/2;Yr-Ur<Y&&(ge=Y+Ur),Yr+Ur>ht&&(ge=ht-Ur)}if(this.lngRange){var Kr=Ir.x,cn=ze.x/2;Kr-cn<_&&(ae=_+cn),Kr+cn>vt&&(ae=vt-cn)}(void 0!==ae||void 0!==ge)&&(this.center=this.unproject(new i.Point(void 0!==ae?ae:Ir.x,void 0!==ge?ge:Ir.y))),this._unmodified=Je,this._constraining=!1}},$r.prototype._calcMatrices=function(){if(this.height){var ht=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var _=Math.PI/2+this._pitch,vt=this._fov*(.5+ht.y/this.height),Ct=Math.sin(vt)*this.cameraToCenterDistance/Math.sin(i.clamp(Math.PI-_-vt,.01,Math.PI-.01)),Yt=this.point,ae=Yt.x,ge=Yt.y,Je=1.01*(Math.cos(Math.PI/2-this._pitch)*Ct+this.cameraToCenterDistance),ur=this.height/50,mr=new Float64Array(16);i.perspective(mr,this._fov,this.width/this.height,ur,Je),mr[8]=2*-ht.x/this.width,mr[9]=2*ht.y/this.height,i.scale(mr,mr,[1,-1,1]),i.translate(mr,mr,[0,0,-this.cameraToCenterDistance]),i.rotateX(mr,mr,this._pitch),i.rotateZ(mr,mr,this.angle),i.translate(mr,mr,[-ae,-ge,0]),this.mercatorMatrix=i.scale([],mr,[this.worldSize,this.worldSize,this.worldSize]),i.scale(mr,mr,[1,1,i.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=mr,this.invProjMatrix=i.invert([],this.projMatrix);var Ir=this.width%2/2,Gr=this.height%2/2,Yr=Math.cos(this.angle),Ur=Math.sin(this.angle),Kr=ae-Math.round(ae)+Yr*Ir+Ur*Gr,cn=ge-Math.round(ge)+Yr*Gr+Ur*Ir,Cn=new Float64Array(mr);if(i.translate(Cn,Cn,[Kr>.5?Kr-1:Kr,cn>.5?cn-1:cn,0]),this.alignedProjMatrix=Cn,mr=i.create(),i.scale(mr,mr,[this.width/2,-this.height/2,1]),i.translate(mr,mr,[1,-1,0]),this.labelPlaneMatrix=mr,mr=i.create(),i.scale(mr,mr,[1,-1,1]),i.translate(mr,mr,[-1,-1,0]),i.scale(mr,mr,[2/this.width,2/this.height,1]),this.glCoordMatrix=mr,this.pixelMatrix=i.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(mr=i.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=mr,this._posMatrixCache={},this._alignedPosMatrixCache={}}},$r.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var Y=this.pointCoordinate(new i.Point(0,0)),ht=[Y.x*this.worldSize,Y.y*this.worldSize,0,1];return i.transformMat4(ht,ht,this.pixelMatrix)[3]/this.cameraToCenterDistance},$r.prototype.getCameraPoint=function(){var ht=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.Point(0,ht))},$r.prototype.getCameraQueryGeometry=function(Y){var ht=this.getCameraPoint();if(1===Y.length)return[Y[0],ht];for(var _=ht.x,vt=ht.y,Ct=ht.x,Yt=ht.y,ae=0,ge=Y;ae<ge.length;ae+=1){var ze=ge[ae];_=Math.min(_,ze.x),vt=Math.min(vt,ze.y),Ct=Math.max(Ct,ze.x),Yt=Math.max(Yt,ze.y)}return[new i.Point(_,vt),new i.Point(Ct,vt),new i.Point(Ct,Yt),new i.Point(_,Yt),new i.Point(_,vt)]},Object.defineProperties($r.prototype,bn);var qn=function(Y){this._hashName=Y&&encodeURIComponent(Y),i.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function zn(lt,Y){var ht=!1,_=null,vt=function(){_=null,ht&&(lt(),_=setTimeout(vt,Y),ht=!1)};return function(){return ht=!0,_||vt(),_}}(this._updateHashUnthrottled.bind(this),300)};qn.prototype.addTo=function(Y){return this._map=Y,i.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},qn.prototype.remove=function(){return i.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},qn.prototype.getHashString=function(Y){var ht=this._map.getCenter(),_=Math.round(100*this._map.getZoom())/100,vt=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),Ct=Math.pow(10,vt),Yt=Math.round(ht.lng*Ct)/Ct,ae=Math.round(ht.lat*Ct)/Ct,ge=this._map.getBearing(),ze=this._map.getPitch(),Je="";if(Je+=Y?"/"+Yt+"/"+ae+"/"+_:_+"/"+ae+"/"+Yt,(ge||ze)&&(Je+="/"+Math.round(10*ge)/10),ze&&(Je+="/"+Math.round(ze)),this._hashName){var ur=this._hashName,mr=!1,Ir=i.window.location.hash.slice(1).split("&").map(function(Gr){var Yr=Gr.split("=")[0];return Yr===ur?(mr=!0,Yr+"="+Je):Gr}).filter(function(Gr){return Gr});return mr||Ir.push(ur+"="+Je),"#"+Ir.join("&")}return"#"+Je},qn.prototype._getCurrentHash=function(){var _,Y=this,ht=i.window.location.hash.replace("#","");return this._hashName?(ht.split("&").map(function(vt){return vt.split("=")}).forEach(function(vt){vt[0]===Y._hashName&&(_=vt)}),(_&&_[1]||"").split("/")):ht.split("/")},qn.prototype._onHashChange=function(){var Y=this._getCurrentHash();if(Y.length>=3&&!Y.some(function(_){return isNaN(_)})){var ht=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(Y[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+Y[2],+Y[1]],zoom:+Y[0],bearing:ht,pitch:+(Y[4]||0)}),!0}return!1},qn.prototype._updateHashUnthrottled=function(){var Y=this.getHashString();try{i.window.history.replaceState(i.window.history.state,"",Y)}catch(ht){}};var xa={linearity:.3,easing:i.bezier(0,0,.3,1)},Ma=i.extend({deceleration:2500,maxSpeed:1400},xa),Aa=i.extend({deceleration:20,maxSpeed:1400},xa),Ra=i.extend({deceleration:1e3,maxSpeed:360},xa),qa=i.extend({deceleration:1e3,maxSpeed:90},xa),ai=function(Y){this._map=Y,this.clear()};function ra(lt,Y){(!lt.duration||lt.duration<Y.duration)&&(lt.duration=Y.duration,lt.easing=Y.easing)}function fi(lt,Y,ht){var _=ht.maxSpeed,vt=ht.linearity,Ct=ht.deceleration,Yt=i.clamp(lt*vt/(Y/1e3),-_,_),ae=Math.abs(Yt)/(Ct*vt);return{easing:ht.easing,duration:1e3*ae,amount:Yt*(ae/2)}}ai.prototype.clear=function(){this._inertiaBuffer=[]},ai.prototype.record=function(Y){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:i.browser.now(),settings:Y})},ai.prototype._drainInertiaBuffer=function(){for(var Y=this._inertiaBuffer,ht=i.browser.now();Y.length>0&&ht-Y[0].time>160;)Y.shift()},ai.prototype._onMoveEnd=function(Y){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var ht={zoom:0,bearing:0,pitch:0,pan:new i.Point(0,0),pinchAround:void 0,around:void 0},_=0,vt=this._inertiaBuffer;_<vt.length;_+=1){var Yt=vt[_].settings;ht.zoom+=Yt.zoomDelta||0,ht.bearing+=Yt.bearingDelta||0,ht.pitch+=Yt.pitchDelta||0,Yt.panDelta&&ht.pan._add(Yt.panDelta),Yt.around&&(ht.around=Yt.around),Yt.pinchAround&&(ht.pinchAround=Yt.pinchAround)}var ge=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,ze={};if(ht.pan.mag()){var Je=fi(ht.pan.mag(),ge,i.extend({},Ma,Y||{}));ze.offset=ht.pan.mult(Je.amount/ht.pan.mag()),ze.center=this._map.transform.center,ra(ze,Je)}if(ht.zoom){var ur=fi(ht.zoom,ge,Aa);ze.zoom=this._map.transform.zoom+ur.amount,ra(ze,ur)}if(ht.bearing){var mr=fi(ht.bearing,ge,Ra);ze.bearing=this._map.transform.bearing+i.clamp(mr.amount,-179,179),ra(ze,mr)}if(ht.pitch){var Ir=fi(ht.pitch,ge,qa);ze.pitch=this._map.transform.pitch+Ir.amount,ra(ze,Ir)}if(ze.zoom||ze.bearing){var Gr=void 0===ht.pinchAround?ht.around:ht.pinchAround;ze.around=Gr?this._map.unproject(Gr):this._map.getCenter()}return this.clear(),i.extend(ze,{noMoveStart:!0})}};var yi=function(lt){function Y(_,vt,Ct,Yt){void 0===Yt&&(Yt={});var ae=C.mousePos(vt.getCanvasContainer(),Ct),ge=vt.unproject(ae);lt.call(this,_,i.extend({point:ae,lngLat:ge,originalEvent:Ct},Yt)),this._defaultPrevented=!1,this.target=vt}lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y;var ht={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},ht.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,ht),Y}(i.Event),ji=function(lt){function Y(_,vt,Ct){var Yt="touchend"===_?Ct.changedTouches:Ct.touches,ae=C.touchPos(vt.getCanvasContainer(),Yt),ge=ae.map(function(ur){return vt.unproject(ur)}),ze=ae.reduce(function(ur,mr,Ir,Gr){return ur.add(mr.div(Gr.length))},new i.Point(0,0)),Je=vt.unproject(ze);lt.call(this,_,{points:ae,point:ze,lngLats:ge,lngLat:Je,originalEvent:Ct}),this._defaultPrevented=!1}lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y;var ht={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},ht.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,ht),Y}(i.Event),Mo=function(lt){function Y(_,vt,Ct){lt.call(this,_,{originalEvent:Ct}),this._defaultPrevented=!1}lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y;var ht={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},ht.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,ht),Y}(i.Event),si=function(Y,ht){this._map=Y,this._clickTolerance=ht.clickTolerance};si.prototype.reset=function(){delete this._mousedownPos},si.prototype.wheel=function(Y){return this._firePreventable(new Mo(Y.type,this._map,Y))},si.prototype.mousedown=function(Y,ht){return this._mousedownPos=ht,this._firePreventable(new yi(Y.type,this._map,Y))},si.prototype.mouseup=function(Y){this._map.fire(new yi(Y.type,this._map,Y))},si.prototype.click=function(Y,ht){this._mousedownPos&&this._mousedownPos.dist(ht)>=this._clickTolerance||this._map.fire(new yi(Y.type,this._map,Y))},si.prototype.dblclick=function(Y){return this._firePreventable(new yi(Y.type,this._map,Y))},si.prototype.mouseover=function(Y){this._map.fire(new yi(Y.type,this._map,Y))},si.prototype.mouseout=function(Y){this._map.fire(new yi(Y.type,this._map,Y))},si.prototype.touchstart=function(Y){return this._firePreventable(new ji(Y.type,this._map,Y))},si.prototype.touchmove=function(Y){this._map.fire(new ji(Y.type,this._map,Y))},si.prototype.touchend=function(Y){this._map.fire(new ji(Y.type,this._map,Y))},si.prototype.touchcancel=function(Y){this._map.fire(new ji(Y.type,this._map,Y))},si.prototype._firePreventable=function(Y){if(this._map.fire(Y),Y.defaultPrevented)return{}},si.prototype.isEnabled=function(){return!0},si.prototype.isActive=function(){return!1},si.prototype.enable=function(){},si.prototype.disable=function(){};var ot=function(Y){this._map=Y};ot.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ot.prototype.mousemove=function(Y){this._map.fire(new yi(Y.type,this._map,Y))},ot.prototype.mousedown=function(){this._delayContextMenu=!0},ot.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new yi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ot.prototype.contextmenu=function(Y){this._delayContextMenu?this._contextMenuEvent=Y:this._map.fire(new yi(Y.type,this._map,Y)),this._map.listens("contextmenu")&&Y.preventDefault()},ot.prototype.isEnabled=function(){return!0},ot.prototype.isActive=function(){return!1},ot.prototype.enable=function(){},ot.prototype.disable=function(){};var yt=function(Y,ht){this._map=Y,this._el=Y.getCanvasContainer(),this._container=Y.getContainer(),this._clickTolerance=ht.clickTolerance||1};function zt(lt,Y){for(var ht={},_=0;_<lt.length;_++)ht[lt[_].identifier]=Y[_];return ht}yt.prototype.isEnabled=function(){return!!this._enabled},yt.prototype.isActive=function(){return!!this._active},yt.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},yt.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},yt.prototype.mousedown=function(Y,ht){!this.isEnabled()||!Y.shiftKey||0!==Y.button||(C.disableDrag(),this._startPos=this._lastPos=ht,this._active=!0)},yt.prototype.mousemoveWindow=function(Y,ht){if(this._active){var _=ht;if(!(this._lastPos.equals(_)||!this._box&&_.dist(this._startPos)<this._clickTolerance)){var vt=this._startPos;this._lastPos=_,this._box||(this._box=C.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",Y));var Ct=Math.min(vt.x,_.x),Yt=Math.max(vt.x,_.x),ae=Math.min(vt.y,_.y),ge=Math.max(vt.y,_.y);C.setTransform(this._box,"translate("+Ct+"px,"+ae+"px)"),this._box.style.width=Yt-Ct+"px",this._box.style.height=ge-ae+"px"}}},yt.prototype.mouseupWindow=function(Y,ht){var _=this;if(this._active&&0===Y.button){var vt=this._startPos,Ct=ht;if(this.reset(),C.suppressClick(),vt.x!==Ct.x||vt.y!==Ct.y)return this._map.fire(new i.Event("boxzoomend",{originalEvent:Y})),{cameraAnimation:function(Yt){return Yt.fitScreenCoordinates(vt,Ct,_._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",Y)}},yt.prototype.keydown=function(Y){!this._active||27===Y.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",Y))},yt.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(C.remove(this._box),this._box=null),C.enableDrag(),delete this._startPos,delete this._lastPos},yt.prototype._fireEvent=function(Y,ht){return this._map.fire(new i.Event(Y,{originalEvent:ht}))};var me=function(Y){this.reset(),this.numTouches=Y.numTouches};me.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},me.prototype.touchstart=function(Y,ht,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(void 0===this.startTime&&(this.startTime=Y.timeStamp),_.length===this.numTouches&&(this.centroid=function Jt(lt){for(var Y=new i.Point(0,0),ht=0,_=lt;ht<_.length;ht+=1)Y._add(_[ht]);return Y.div(lt.length)}(ht),this.touches=zt(_,ht)))},me.prototype.touchmove=function(Y,ht,_){if(!this.aborted&&this.centroid){var vt=zt(_,ht);for(var Ct in this.touches){var ae=vt[Ct];(!ae||ae.dist(this.touches[Ct])>30)&&(this.aborted=!0)}}},me.prototype.touchend=function(Y,ht,_){if((!this.centroid||Y.timeStamp-this.startTime>500)&&(this.aborted=!0),0===_.length){var vt=!this.aborted&&this.centroid;if(this.reset(),vt)return vt}};var Oe=function(Y){this.singleTap=new me(Y),this.numTaps=Y.numTaps,this.reset()};Oe.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Oe.prototype.touchstart=function(Y,ht,_){this.singleTap.touchstart(Y,ht,_)},Oe.prototype.touchmove=function(Y,ht,_){this.singleTap.touchmove(Y,ht,_)},Oe.prototype.touchend=function(Y,ht,_){var vt=this.singleTap.touchend(Y,ht,_);if(vt){var Ct=Y.timeStamp-this.lastTime<500,Yt=!this.lastTap||this.lastTap.dist(vt)<30;if((!Ct||!Yt)&&this.reset(),this.count++,this.lastTime=Y.timeStamp,this.lastTap=vt,this.count===this.numTaps)return this.reset(),vt}};var Qe=function(){this._zoomIn=new Oe({numTouches:1,numTaps:2}),this._zoomOut=new Oe({numTouches:2,numTaps:1}),this.reset()};Qe.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Qe.prototype.touchstart=function(Y,ht,_){this._zoomIn.touchstart(Y,ht,_),this._zoomOut.touchstart(Y,ht,_)},Qe.prototype.touchmove=function(Y,ht,_){this._zoomIn.touchmove(Y,ht,_),this._zoomOut.touchmove(Y,ht,_)},Qe.prototype.touchend=function(Y,ht,_){var vt=this,Ct=this._zoomIn.touchend(Y,ht,_),Yt=this._zoomOut.touchend(Y,ht,_);return Ct?(this._active=!0,Y.preventDefault(),setTimeout(function(){return vt.reset()},0),{cameraAnimation:function(ae){return ae.easeTo({duration:300,zoom:ae.getZoom()+1,around:ae.unproject(Ct)},{originalEvent:Y})}}):Yt?(this._active=!0,Y.preventDefault(),setTimeout(function(){return vt.reset()},0),{cameraAnimation:function(ae){return ae.easeTo({duration:300,zoom:ae.getZoom()-1,around:ae.unproject(Yt)},{originalEvent:Y})}}):void 0},Qe.prototype.touchcancel=function(){this.reset()},Qe.prototype.enable=function(){this._enabled=!0},Qe.prototype.disable=function(){this._enabled=!1,this.reset()},Qe.prototype.isEnabled=function(){return this._enabled},Qe.prototype.isActive=function(){return this._active};var Sr=function(Y){this.reset(),this._clickTolerance=Y.clickTolerance||1};Sr.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Sr.prototype._correctButton=function(Y,ht){return!1},Sr.prototype._move=function(Y,ht){return{}},Sr.prototype.mousedown=function(Y,ht){if(!this._lastPoint){var _=C.mouseButton(Y);!this._correctButton(Y,_)||(this._lastPoint=ht,this._eventButton=_)}},Sr.prototype.mousemoveWindow=function(Y,ht){var _=this._lastPoint;if(_&&(Y.preventDefault(),this._moved||!(ht.dist(_)<this._clickTolerance)))return this._moved=!0,this._lastPoint=ht,this._move(_,ht)},Sr.prototype.mouseupWindow=function(Y){C.mouseButton(Y)===this._eventButton&&(this._moved&&C.suppressClick(),this.reset())},Sr.prototype.enable=function(){this._enabled=!0},Sr.prototype.disable=function(){this._enabled=!1,this.reset()},Sr.prototype.isEnabled=function(){return this._enabled},Sr.prototype.isActive=function(){return this._active};var Qr=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.mousedown=function(_,vt){lt.prototype.mousedown.call(this,_,vt),this._lastPoint&&(this._active=!0)},Y.prototype._correctButton=function(_,vt){return 0===vt&&!_.ctrlKey},Y.prototype._move=function(_,vt){return{around:vt,panDelta:vt.sub(_)}},Y}(Sr),rn=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype._correctButton=function(_,vt){return 0===vt&&_.ctrlKey||2===vt},Y.prototype._move=function(_,vt){var Yt=.8*(vt.x-_.x);if(Yt)return this._active=!0,{bearingDelta:Yt}},Y.prototype.contextmenu=function(_){_.preventDefault()},Y}(Sr),Rr=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype._correctButton=function(_,vt){return 0===vt&&_.ctrlKey||2===vt},Y.prototype._move=function(_,vt){var Yt=-.5*(vt.y-_.y);if(Yt)return this._active=!0,{pitchDelta:Yt}},Y.prototype.contextmenu=function(_){_.preventDefault()},Y}(Sr),kr=function(Y){this._minTouches=1,this._clickTolerance=Y.clickTolerance||1,this.reset()};kr.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new i.Point(0,0)},kr.prototype.touchstart=function(Y,ht,_){return this._calculateTransform(Y,ht,_)},kr.prototype.touchmove=function(Y,ht,_){if(this._active)return Y.preventDefault(),this._calculateTransform(Y,ht,_)},kr.prototype.touchend=function(Y,ht,_){this._calculateTransform(Y,ht,_),this._active&&_.length<this._minTouches&&this.reset()},kr.prototype.touchcancel=function(){this.reset()},kr.prototype._calculateTransform=function(Y,ht,_){_.length>0&&(this._active=!0);var vt=zt(_,ht),Ct=new i.Point(0,0),Yt=new i.Point(0,0),ae=0;for(var ge in vt){var ze=vt[ge],Je=this._touches[ge];Je&&(Ct._add(ze),Yt._add(ze.sub(Je)),ae++,vt[ge]=ze)}if(this._touches=vt,!(ae<this._minTouches)&&Yt.mag()){var ur=Yt.div(ae);if(this._sum._add(ur),!(this._sum.mag()<this._clickTolerance))return{around:Ct.div(ae),panDelta:ur}}},kr.prototype.enable=function(){this._enabled=!0},kr.prototype.disable=function(){this._enabled=!1,this.reset()},kr.prototype.isEnabled=function(){return this._enabled},kr.prototype.isActive=function(){return this._active};var Vr=function(){this.reset()};function on(lt,Y,ht){for(var _=0;_<lt.length;_++)if(lt[_].identifier===ht)return Y[_]}Vr.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Vr.prototype._start=function(Y){},Vr.prototype._move=function(Y,ht,_){return{}},Vr.prototype.touchstart=function(Y,ht,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([ht[0],ht[1]]))},Vr.prototype.touchmove=function(Y,ht,_){if(this._firstTwoTouches){Y.preventDefault();var vt=this._firstTwoTouches,Yt=vt[1],ae=on(_,ht,vt[0]),ge=on(_,ht,Yt);if(ae&&ge){var ze=this._aroundCenter?null:ae.add(ge).div(2);return this._move([ae,ge],ze,Y)}}},Vr.prototype.touchend=function(Y,ht,_){if(this._firstTwoTouches){var vt=this._firstTwoTouches,Yt=vt[1],ae=on(_,ht,vt[0]),ge=on(_,ht,Yt);ae&&ge||(this._active&&C.suppressClick(),this.reset())}},Vr.prototype.touchcancel=function(){this.reset()},Vr.prototype.enable=function(Y){this._enabled=!0,this._aroundCenter=!!Y&&"center"===Y.around},Vr.prototype.disable=function(){this._enabled=!1,this.reset()},Vr.prototype.isEnabled=function(){return this._enabled},Vr.prototype.isActive=function(){return this._active};function Xr(lt,Y){return Math.log(lt/Y)/Math.LN2}var kn=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.reset=function(){lt.prototype.reset.call(this),delete this._distance,delete this._startDistance},Y.prototype._start=function(_){this._startDistance=this._distance=_[0].dist(_[1])},Y.prototype._move=function(_,vt){var Ct=this._distance;if(this._distance=_[0].dist(_[1]),this._active||!(Math.abs(Xr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Xr(this._distance,Ct),pinchAround:vt}},Y}(Vr);function oa(lt,Y){return 180*lt.angleWith(Y)/Math.PI}var na=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.reset=function(){lt.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},Y.prototype._start=function(_){this._startVector=this._vector=_[0].sub(_[1]),this._minDiameter=_[0].dist(_[1])},Y.prototype._move=function(_,vt){var Ct=this._vector;if(this._vector=_[0].sub(_[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:oa(this._vector,Ct),pinchAround:vt}},Y.prototype._isBelowThreshold=function(_){this._minDiameter=Math.min(this._minDiameter,_.mag());var Ct=25/(Math.PI*this._minDiameter)*360,Yt=oa(_,this._startVector);return Math.abs(Yt)<Ct},Y}(Vr);function aa(lt){return Math.abs(lt.y)>Math.abs(lt.x)}var da=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.reset=function(){lt.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},Y.prototype._start=function(_){this._lastPoints=_,aa(_[0].sub(_[1]))&&(this._valid=!1)},Y.prototype._move=function(_,vt,Ct){var Yt=_[0].sub(this._lastPoints[0]),ae=_[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Yt,ae,Ct.timeStamp),this._valid)return this._lastPoints=_,this._active=!0,{pitchDelta:(Yt.y+ae.y)/2*-.5}},Y.prototype.gestureBeginsVertically=function(_,vt,Ct){if(void 0!==this._valid)return this._valid;var ae=_.mag()>=2,ge=vt.mag()>=2;if(ae||ge){if(!ae||!ge)return void 0===this._firstMove&&(this._firstMove=Ct),Ct-this._firstMove<100&&void 0;var ze=_.y>0==vt.y>0;return aa(_)&&aa(vt)&&ze}},Y}(Vr),pa={panStep:100,bearingStep:15,pitchStep:10},Sa=function(){var Y=pa;this._panStep=Y.panStep,this._bearingStep=Y.bearingStep,this._pitchStep=Y.pitchStep};function Ua(lt){return lt*(2-lt)}Sa.prototype.reset=function(){this._active=!1},Sa.prototype.keydown=function(Y){var ht=this;if(!(Y.altKey||Y.ctrlKey||Y.metaKey)){var _=0,vt=0,Ct=0,Yt=0,ae=0;switch(Y.keyCode){case 61:case 107:case 171:case 187:_=1;break;case 189:case 109:case 173:_=-1;break;case 37:Y.shiftKey?vt=-1:(Y.preventDefault(),Yt=-1);break;case 39:Y.shiftKey?vt=1:(Y.preventDefault(),Yt=1);break;case 38:Y.shiftKey?Ct=1:(Y.preventDefault(),ae=-1);break;case 40:Y.shiftKey?Ct=-1:(Y.preventDefault(),ae=1);break;default:return}return{cameraAnimation:function(ge){var ze=ge.getZoom();ge.easeTo({duration:300,easeId:"keyboardHandler",easing:Ua,zoom:_?Math.round(ze)+_*(Y.shiftKey?2:1):ze,bearing:ge.getBearing()+vt*ht._bearingStep,pitch:ge.getPitch()+Ct*ht._pitchStep,offset:[-Yt*ht._panStep,-ae*ht._panStep],center:ge.getCenter()},{originalEvent:Y})}}}},Sa.prototype.enable=function(){this._enabled=!0},Sa.prototype.disable=function(){this._enabled=!1,this.reset()},Sa.prototype.isEnabled=function(){return this._enabled},Sa.prototype.isActive=function(){return this._active};var mi=4.000244140625,Ea=function(Y,ht){this._map=Y,this._el=Y.getCanvasContainer(),this._handler=ht,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,i.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Ea.prototype.setZoomRate=function(Y){this._defaultZoomRate=Y},Ea.prototype.setWheelZoomRate=function(Y){this._wheelZoomRate=Y},Ea.prototype.isEnabled=function(){return!!this._enabled},Ea.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},Ea.prototype.isZooming=function(){return!!this._zooming},Ea.prototype.enable=function(Y){this.isEnabled()||(this._enabled=!0,this._aroundCenter=Y&&"center"===Y.around)},Ea.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},Ea.prototype.wheel=function(Y){if(this.isEnabled()){var ht=Y.deltaMode===i.window.WheelEvent.DOM_DELTA_LINE?40*Y.deltaY:Y.deltaY,_=i.browser.now(),vt=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,0!==ht&&ht%mi==0?this._type="wheel":0!==ht&&Math.abs(ht)<4?this._type="trackpad":vt>400?(this._type=null,this._lastValue=ht,this._timeout=setTimeout(this._onTimeout,40,Y)):this._type||(this._type=Math.abs(vt*ht)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,ht+=this._lastValue)),Y.shiftKey&&ht&&(ht/=4),this._type&&(this._lastWheelEvent=Y,this._delta-=ht,this._active||this._start(Y)),Y.preventDefault()}},Ea.prototype._onTimeout=function(Y){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(Y)},Ea.prototype._start=function(Y){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var ht=C.mousePos(this._el,Y);this._around=i.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(ht)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Ea.prototype.renderFrame=function(){return this._onScrollFrame()},Ea.prototype._onScrollFrame=function(){var Y=this;if(this._frameId&&(this._frameId=null,this.isActive())){var ht=this._map.transform;if(0!==this._delta){var _="wheel"===this._type&&Math.abs(this._delta)>mi?this._wheelZoomRate:this._defaultZoomRate,vt=2/(1+Math.exp(-Math.abs(this._delta*_)));this._delta<0&&0!==vt&&(vt=1/vt);var Ct="number"==typeof this._targetZoom?ht.zoomScale(this._targetZoom):ht.scale;this._targetZoom=Math.min(ht.maxZoom,Math.max(ht.minZoom,ht.scaleZoom(Ct*vt))),"wheel"===this._type&&(this._startZoom=ht.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Je,Yt="number"==typeof this._targetZoom?this._targetZoom:ht.zoom,ae=this._startZoom,ge=this._easing,ze=!1;if("wheel"===this._type&&ae&&ge){var ur=Math.min((i.browser.now()-this._lastWheelEventTime)/200,1),mr=ge(ur);Je=i.number(ae,Yt,mr),ur<1?this._frameId||(this._frameId=!0):ze=!0}else Je=Yt,ze=!0;return this._active=!0,ze&&(this._active=!1,this._finishTimeout=setTimeout(function(){Y._zooming=!1,Y._handler._triggerRenderFrame(),delete Y._targetZoom,delete Y._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ze,zoomDelta:Je-ht.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ea.prototype._smoothOutEasing=function(Y){var ht=i.ease;if(this._prevEase){var _=this._prevEase,vt=(i.browser.now()-_.start)/_.duration,Ct=_.easing(vt+.01)-_.easing(vt),Yt=.27/Math.sqrt(Ct*Ct+1e-4)*.01,ae=Math.sqrt(.0729-Yt*Yt);ht=i.bezier(Yt,ae,.25,1)}return this._prevEase={start:i.browser.now(),duration:Y,easing:ht},ht},Ea.prototype.reset=function(){this._active=!1};var Xn=function(Y,ht){this._clickZoom=Y,this._tapZoom=ht};Xn.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Xn.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Xn.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Xn.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ca=function(){this.reset()};ca.prototype.reset=function(){this._active=!1},ca.prototype.dblclick=function(Y,ht){return Y.preventDefault(),{cameraAnimation:function(_){_.easeTo({duration:300,zoom:_.getZoom()+(Y.shiftKey?-1:1),around:_.unproject(ht)},{originalEvent:Y})}}},ca.prototype.enable=function(){this._enabled=!0},ca.prototype.disable=function(){this._enabled=!1,this.reset()},ca.prototype.isEnabled=function(){return this._enabled},ca.prototype.isActive=function(){return this._active};var ii=function(){this._tap=new Oe({numTouches:1,numTaps:1}),this.reset()};ii.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ii.prototype.touchstart=function(Y,ht,_){this._swipePoint||(this._tapTime&&Y.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?_.length>0&&(this._swipePoint=ht[0],this._swipeTouch=_[0].identifier):this._tap.touchstart(Y,ht,_))},ii.prototype.touchmove=function(Y,ht,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;var vt=ht[0],Ct=vt.y-this._swipePoint.y;return this._swipePoint=vt,Y.preventDefault(),this._active=!0,{zoomDelta:Ct/128}}}else this._tap.touchmove(Y,ht,_)},ii.prototype.touchend=function(Y,ht,_){this._tapTime?this._swipePoint&&0===_.length&&this.reset():this._tap.touchend(Y,ht,_)&&(this._tapTime=Y.timeStamp)},ii.prototype.touchcancel=function(){this.reset()},ii.prototype.enable=function(){this._enabled=!0},ii.prototype.disable=function(){this._enabled=!1,this.reset()},ii.prototype.isEnabled=function(){return this._enabled},ii.prototype.isActive=function(){return this._active};var di=function(Y,ht,_){this._el=Y,this._mousePan=ht,this._touchPan=_};di.prototype.enable=function(Y){this._inertiaOptions=Y||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},di.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},di.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},di.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Ai=function(Y,ht,_){this._pitchWithRotate=Y.pitchWithRotate,this._mouseRotate=ht,this._mousePitch=_};Ai.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Ai.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Ai.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Ai.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ri=function(Y,ht,_,vt){this._el=Y,this._touchZoom=ht,this._touchRotate=_,this._tapDragZoom=vt,this._rotationDisabled=!1,this._enabled=!0};ri.prototype.enable=function(Y){this._touchZoom.enable(Y),this._rotationDisabled||this._touchRotate.enable(Y),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},ri.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},ri.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ri.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ri.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ri.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Di=function(lt){return lt.zoom||lt.drag||lt.pitch||lt.rotate},Mi=function(lt){function Y(){lt.apply(this,arguments)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y}(i.Event);function Vi(lt){return lt.panDelta&&lt.panDelta.mag()||lt.zoomDelta||lt.bearingDelta||lt.pitchDelta}var ti=function(Y,ht){this._map=Y,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ai(Y),this._bearingSnap=ht.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(ht),i.bindAll(["handleEvent","handleWindowEvent"],this);var _=this._el;this._listeners=[[_,"touchstart",{passive:!1}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[i.window.document,"mousemove",{capture:!0}],[i.window.document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[i.window,"blur",void 0]];for(var vt=0,Ct=this._listeners;vt<Ct.length;vt+=1){var Yt=Ct[vt],ae=Yt[0];C.addEventListener(ae,Yt[1],ae===i.window.document?this.handleWindowEvent:this.handleEvent,Yt[2])}};ti.prototype.destroy=function(){for(var Y=0,ht=this._listeners;Y<ht.length;Y+=1){var _=ht[Y],vt=_[0];C.removeEventListener(vt,_[1],vt===i.window.document?this.handleWindowEvent:this.handleEvent,_[2])}},ti.prototype._addDefaultHandlers=function(Y){var ht=this._map,_=ht.getCanvasContainer();this._add("mapEvent",new si(ht,Y));var vt=ht.boxZoom=new yt(ht,Y);this._add("boxZoom",vt);var Ct=new Qe,Yt=new ca;ht.doubleClickZoom=new Xn(Yt,Ct),this._add("tapZoom",Ct),this._add("clickZoom",Yt);var ae=new ii;this._add("tapDragZoom",ae);var ge=ht.touchPitch=new da;this._add("touchPitch",ge);var ze=new rn(Y),Je=new Rr(Y);ht.dragRotate=new Ai(Y,ze,Je),this._add("mouseRotate",ze,["mousePitch"]),this._add("mousePitch",Je,["mouseRotate"]);var ur=new Qr(Y),mr=new kr(Y);ht.dragPan=new di(_,ur,mr),this._add("mousePan",ur),this._add("touchPan",mr,["touchZoom","touchRotate"]);var Ir=new na,Gr=new kn;ht.touchZoomRotate=new ri(_,Gr,Ir,ae),this._add("touchRotate",Ir,["touchPan","touchZoom"]),this._add("touchZoom",Gr,["touchPan","touchRotate"]);var Yr=ht.scrollZoom=new Ea(ht,this);this._add("scrollZoom",Yr,["mousePan"]);var Ur=ht.keyboard=new Sa;this._add("keyboard",Ur),this._add("blockableMapEvent",new ot(ht));for(var Kr=0,cn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Kr<cn.length;Kr+=1){var Cn=cn[Kr];Y.interactive&&Y[Cn]&&ht[Cn].enable(Y[Cn])}},ti.prototype._add=function(Y,ht,_){this._handlers.push({handlerName:Y,handler:ht,allowed:_}),this._handlersById[Y]=ht},ti.prototype.stop=function(){if(!this._updatingCamera){for(var Y=0,ht=this._handlers;Y<ht.length;Y+=1)ht[Y].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},ti.prototype.isActive=function(){for(var Y=0,ht=this._handlers;Y<ht.length;Y+=1)if(ht[Y].handler.isActive())return!0;return!1},ti.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ti.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ti.prototype.isMoving=function(){return Boolean(Di(this._eventsInProgress))||this.isZooming()},ti.prototype._blockedByActive=function(Y,ht,_){for(var vt in Y)if(vt!==_&&(!ht||ht.indexOf(vt)<0))return!0;return!1},ti.prototype.handleWindowEvent=function(Y){this.handleEvent(Y,Y.type+"Window")},ti.prototype._getMapTouches=function(Y){for(var ht=[],_=0,vt=Y;_<vt.length;_+=1){var Ct=vt[_];this._el.contains(Ct.target)&&ht.push(Ct)}return ht},ti.prototype.handleEvent=function(Y,ht){if("blur"!==Y.type){this._updatingCamera=!0;for(var _="renderFrame"===Y.type?void 0:Y,vt={needsRenderFrame:!1},Ct={},Yt={},ae=Y.touches?this._getMapTouches(Y.touches):void 0,ge=ae?C.touchPos(this._el,ae):C.mousePos(this._el,Y),ze=0,Je=this._handlers;ze<Je.length;ze+=1){var ur=Je[ze],mr=ur.handlerName,Ir=ur.handler,Gr=ur.allowed;if(Ir.isEnabled()){var Yr=void 0;this._blockedByActive(Yt,Gr,mr)?Ir.reset():Ir[ht||Y.type]&&(Yr=Ir[ht||Y.type](Y,ge,ae),this.mergeHandlerResult(vt,Ct,Yr,mr,_),Yr&&Yr.needsRenderFrame&&this._triggerRenderFrame()),(Yr||Ir.isActive())&&(Yt[mr]=Ir)}}var Ur={};for(var Kr in this._previousActiveHandlers)Yt[Kr]||(Ur[Kr]=_);this._previousActiveHandlers=Yt,(Object.keys(Ur).length||Vi(vt))&&(this._changes.push([vt,Ct,Ur]),this._triggerRenderFrame()),(Object.keys(Yt).length||Vi(vt))&&this._map._stop(!0),this._updatingCamera=!1;var cn=vt.cameraAnimation;cn&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],cn(this._map))}else this.stop()},ti.prototype.mergeHandlerResult=function(Y,ht,_,vt,Ct){if(_){i.extend(Y,_);var Yt={handlerName:vt,originalEvent:_.originalEvent||Ct};void 0!==_.zoomDelta&&(ht.zoom=Yt),void 0!==_.panDelta&&(ht.drag=Yt),void 0!==_.pitchDelta&&(ht.pitch=Yt),void 0!==_.bearingDelta&&(ht.rotate=Yt)}},ti.prototype._applyChanges=function(){for(var Y={},ht={},_={},vt=0,Ct=this._changes;vt<Ct.length;vt+=1){var Yt=Ct[vt],ae=Yt[0],ge=Yt[1],ze=Yt[2];ae.panDelta&&(Y.panDelta=(Y.panDelta||new i.Point(0,0))._add(ae.panDelta)),ae.zoomDelta&&(Y.zoomDelta=(Y.zoomDelta||0)+ae.zoomDelta),ae.bearingDelta&&(Y.bearingDelta=(Y.bearingDelta||0)+ae.bearingDelta),ae.pitchDelta&&(Y.pitchDelta=(Y.pitchDelta||0)+ae.pitchDelta),void 0!==ae.around&&(Y.around=ae.around),void 0!==ae.pinchAround&&(Y.pinchAround=ae.pinchAround),ae.noInertia&&(Y.noInertia=ae.noInertia),i.extend(ht,ge),i.extend(_,ze)}this._updateMapTransform(Y,ht,_),this._changes=[]},ti.prototype._updateMapTransform=function(Y,ht,_){var vt=this._map,Ct=vt.transform;if(!Vi(Y))return this._fireEvents(ht,_);var Yt=Y.panDelta,ae=Y.zoomDelta,ge=Y.bearingDelta,ze=Y.pitchDelta,Je=Y.around,ur=Y.pinchAround;void 0!==ur&&(Je=ur),vt._stop(!0),Je=Je||vt.transform.centerPoint;var mr=Ct.pointLocation(Yt?Je.sub(Yt):Je);ge&&(Ct.bearing+=ge),ze&&(Ct.pitch+=ze),ae&&(Ct.zoom+=ae),Ct.setLocationAtPoint(mr,Je),this._map._update(),Y.noInertia||this._inertia.record(Y),this._fireEvents(ht,_)},ti.prototype._fireEvents=function(Y,ht){var _=this,vt=Di(this._eventsInProgress),Ct=Di(Y),Yt={};for(var ae in Y)this._eventsInProgress[ae]||(Yt[ae+"start"]=Y[ae].originalEvent),this._eventsInProgress[ae]=Y[ae];for(var Je in!vt&&Ct&&this._fireEvent("movestart",Ct.originalEvent),Yt)this._fireEvent(Je,Yt[Je]);for(var ur in Y.rotate&&(this._bearingChanged=!0),Ct&&this._fireEvent("move",Ct.originalEvent),Y)this._fireEvent(ur,Y[ur].originalEvent);var Yr,Gr={};for(var Ur in this._eventsInProgress){var Kr=this._eventsInProgress[Ur],cn=Kr.handlerName,Cn=Kr.originalEvent;this._handlersById[cn].isActive()||(delete this._eventsInProgress[Ur],Gr[Ur+"end"]=Yr=ht[cn]||Cn)}for(var Rn in Gr)this._fireEvent(Rn,Gr[Rn]);var Un=Di(this._eventsInProgress);if((vt||Ct)&&!Un){this._updatingCamera=!0;var Hn=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Vn=function(_n){return 0!==_n&&-_._bearingSnap<_n&&_n<_._bearingSnap};Hn?(Vn(Hn.bearing||this._map.getBearing())&&(Hn.bearing=0),this._map.easeTo(Hn,{originalEvent:Yr})):(this._map.fire(new i.Event("moveend",{originalEvent:Yr})),Vn(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},ti.prototype._fireEvent=function(Y,ht){this._map.fire(new i.Event(Y,ht?{originalEvent:ht}:{}))},ti.prototype._triggerRenderFrame=function(){var Y=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(ht){delete Y._frameId,Y.handleEvent(new Mi("renderFrame",{timeStamp:ht})),Y._applyChanges()}))};var xl=function(lt){function Y(ht,_){lt.call(this),this._moving=!1,this._zooming=!1,this.transform=ht,this._bearingSnap=_.bearingSnap,i.bindAll(["_renderFrameCallback"],this)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.getCenter=function(){return new i.LngLat(this.transform.center.lng,this.transform.center.lat)},Y.prototype.setCenter=function(_,vt){return this.jumpTo({center:_},vt)},Y.prototype.panBy=function(_,vt,Ct){return _=i.Point.convert(_).mult(-1),this.panTo(this.transform.center,i.extend({offset:_},vt),Ct)},Y.prototype.panTo=function(_,vt,Ct){return this.easeTo(i.extend({center:_},vt),Ct)},Y.prototype.getZoom=function(){return this.transform.zoom},Y.prototype.setZoom=function(_,vt){return this.jumpTo({zoom:_},vt),this},Y.prototype.zoomTo=function(_,vt,Ct){return this.easeTo(i.extend({zoom:_},vt),Ct)},Y.prototype.zoomIn=function(_,vt){return this.zoomTo(this.getZoom()+1,_,vt),this},Y.prototype.zoomOut=function(_,vt){return this.zoomTo(this.getZoom()-1,_,vt),this},Y.prototype.getBearing=function(){return this.transform.bearing},Y.prototype.setBearing=function(_,vt){return this.jumpTo({bearing:_},vt),this},Y.prototype.getPadding=function(){return this.transform.padding},Y.prototype.setPadding=function(_,vt){return this.jumpTo({padding:_},vt),this},Y.prototype.rotateTo=function(_,vt,Ct){return this.easeTo(i.extend({bearing:_},vt),Ct)},Y.prototype.resetNorth=function(_,vt){return this.rotateTo(0,i.extend({duration:1e3},_),vt),this},Y.prototype.resetNorthPitch=function(_,vt){return this.easeTo(i.extend({bearing:0,pitch:0,duration:1e3},_),vt),this},Y.prototype.snapToNorth=function(_,vt){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(_,vt):this},Y.prototype.getPitch=function(){return this.transform.pitch},Y.prototype.setPitch=function(_,vt){return this.jumpTo({pitch:_},vt),this},Y.prototype.cameraForBounds=function(_,vt){return _=i.LngLatBounds.convert(_),this._cameraForBoxAndBearing(_.getNorthWest(),_.getSouthEast(),0,vt)},Y.prototype._cameraForBoxAndBearing=function(_,vt,Ct,Yt){var ae={top:0,bottom:0,right:0,left:0};if("number"==typeof(Yt=i.extend({padding:ae,offset:[0,0],maxZoom:this.transform.maxZoom},Yt)).padding){var ge=Yt.padding;Yt.padding={top:ge,bottom:ge,right:ge,left:ge}}Yt.padding=i.extend(ae,Yt.padding);var ze=this.transform,Je=ze.padding,ur=ze.project(i.LngLat.convert(_)),mr=ze.project(i.LngLat.convert(vt)),Ir=ur.rotate(-Ct*Math.PI/180),Gr=mr.rotate(-Ct*Math.PI/180),Yr=new i.Point(Math.max(Ir.x,Gr.x),Math.max(Ir.y,Gr.y)),Ur=new i.Point(Math.min(Ir.x,Gr.x),Math.min(Ir.y,Gr.y)),Kr=Yr.sub(Ur),cn=(ze.width-(Je.left+Je.right+Yt.padding.left+Yt.padding.right))/Kr.x,Cn=(ze.height-(Je.top+Je.bottom+Yt.padding.top+Yt.padding.bottom))/Kr.y;if(!(Cn<0||cn<0)){var Rn=Math.min(ze.scaleZoom(ze.scale*Math.min(cn,Cn)),Yt.maxZoom),Un=i.Point.convert(Yt.offset),sa=new i.Point(Un.x+(Yt.padding.left-Yt.padding.right)/2,Un.y+(Yt.padding.top-Yt.padding.bottom)/2).mult(ze.scale/ze.zoomScale(Rn));return{center:ze.unproject(ur.add(mr).div(2).sub(sa)),zoom:Rn,bearing:Ct}}i.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},Y.prototype.fitBounds=function(_,vt,Ct){return this._fitInternal(this.cameraForBounds(_,vt),vt,Ct)},Y.prototype.fitScreenCoordinates=function(_,vt,Ct,Yt,ae){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(i.Point.convert(_)),this.transform.pointLocation(i.Point.convert(vt)),Ct,Yt),Yt,ae)},Y.prototype._fitInternal=function(_,vt,Ct){return _?(delete(vt=i.extend(_,vt)).padding,vt.linear?this.easeTo(vt,Ct):this.flyTo(vt,Ct)):this},Y.prototype.jumpTo=function(_,vt){this.stop();var Ct=this.transform,Yt=!1,ae=!1,ge=!1;return"zoom"in _&&Ct.zoom!==+_.zoom&&(Yt=!0,Ct.zoom=+_.zoom),void 0!==_.center&&(Ct.center=i.LngLat.convert(_.center)),"bearing"in _&&Ct.bearing!==+_.bearing&&(ae=!0,Ct.bearing=+_.bearing),"pitch"in _&&Ct.pitch!==+_.pitch&&(ge=!0,Ct.pitch=+_.pitch),null!=_.padding&&!Ct.isPaddingEqual(_.padding)&&(Ct.padding=_.padding),this.fire(new i.Event("movestart",vt)).fire(new i.Event("move",vt)),Yt&&this.fire(new i.Event("zoomstart",vt)).fire(new i.Event("zoom",vt)).fire(new i.Event("zoomend",vt)),ae&&this.fire(new i.Event("rotatestart",vt)).fire(new i.Event("rotate",vt)).fire(new i.Event("rotateend",vt)),ge&&this.fire(new i.Event("pitchstart",vt)).fire(new i.Event("pitch",vt)).fire(new i.Event("pitchend",vt)),this.fire(new i.Event("moveend",vt))},Y.prototype.easeTo=function(_,vt){var Ct=this;this._stop(!1,_.easeId),(!1===(_=i.extend({offset:[0,0],duration:500,easing:i.ease},_)).animate||!_.essential&&i.browser.prefersReducedMotion)&&(_.duration=0);var Yt=this.transform,ae=this.getZoom(),ge=this.getBearing(),ze=this.getPitch(),Je=this.getPadding(),ur="zoom"in _?+_.zoom:ae,mr="bearing"in _?this._normalizeBearing(_.bearing,ge):ge,Ir="pitch"in _?+_.pitch:ze,Gr="padding"in _?_.padding:Yt.padding,Yr=i.Point.convert(_.offset),Ur=Yt.centerPoint.add(Yr),Kr=Yt.pointLocation(Ur),cn=i.LngLat.convert(_.center||Kr);this._normalizeCenter(cn);var Hn,Vn,Cn=Yt.project(Kr),Rn=Yt.project(cn).sub(Cn),Un=Yt.zoomScale(ur-ae);_.around&&(Hn=i.LngLat.convert(_.around),Vn=Yt.locationPoint(Hn));var _n={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ur!==ae,this._rotating=this._rotating||ge!==mr,this._pitching=this._pitching||Ir!==ze,this._padding=!Yt.isPaddingEqual(Gr),this._easeId=_.easeId,this._prepareEase(vt,_.noMoveStart,_n),clearTimeout(this._easeEndTimeoutID),this._ease(function(sa){if(Ct._zooming&&(Yt.zoom=i.number(ae,ur,sa)),Ct._rotating&&(Yt.bearing=i.number(ge,mr,sa)),Ct._pitching&&(Yt.pitch=i.number(ze,Ir,sa)),Ct._padding&&(Yt.interpolatePadding(Je,Gr,sa),Ur=Yt.centerPoint.add(Yr)),Hn)Yt.setLocationAtPoint(Hn,Vn);else{var ia=Yt.zoomScale(Yt.zoom-ae),ha=ur>ae?Math.min(2,Un):Math.max(.5,Un),ga=Math.pow(ha,1-sa),Ca=Yt.unproject(Cn.add(Rn.mult(sa*ga)).mult(ia));Yt.setLocationAtPoint(Yt.renderWorldCopies?Ca.wrap():Ca,Ur)}Ct._fireMoveEvents(vt)},function(sa){Ct._afterEase(vt,sa)},_),this},Y.prototype._prepareEase=function(_,vt,Ct){void 0===Ct&&(Ct={}),this._moving=!0,!vt&&!Ct.moving&&this.fire(new i.Event("movestart",_)),this._zooming&&!Ct.zooming&&this.fire(new i.Event("zoomstart",_)),this._rotating&&!Ct.rotating&&this.fire(new i.Event("rotatestart",_)),this._pitching&&!Ct.pitching&&this.fire(new i.Event("pitchstart",_))},Y.prototype._fireMoveEvents=function(_){this.fire(new i.Event("move",_)),this._zooming&&this.fire(new i.Event("zoom",_)),this._rotating&&this.fire(new i.Event("rotate",_)),this._pitching&&this.fire(new i.Event("pitch",_))},Y.prototype._afterEase=function(_,vt){if(!this._easeId||!vt||this._easeId!==vt){delete this._easeId;var Ct=this._zooming,Yt=this._rotating,ae=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Ct&&this.fire(new i.Event("zoomend",_)),Yt&&this.fire(new i.Event("rotateend",_)),ae&&this.fire(new i.Event("pitchend",_)),this.fire(new i.Event("moveend",_))}},Y.prototype.flyTo=function(_,vt){var Ct=this;if(!_.essential&&i.browser.prefersReducedMotion){var Yt=i.pick(_,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Yt,vt)}this.stop(),_=i.extend({offset:[0,0],speed:1.2,curve:1.42,easing:i.ease},_);var ae=this.transform,ge=this.getZoom(),ze=this.getBearing(),Je=this.getPitch(),ur=this.getPadding(),mr="zoom"in _?i.clamp(+_.zoom,ae.minZoom,ae.maxZoom):ge,Ir="bearing"in _?this._normalizeBearing(_.bearing,ze):ze,Gr="pitch"in _?+_.pitch:Je,Yr="padding"in _?_.padding:ae.padding,Ur=ae.zoomScale(mr-ge),Kr=i.Point.convert(_.offset),cn=ae.centerPoint.add(Kr),Cn=ae.pointLocation(cn),Rn=i.LngLat.convert(_.center||Cn);this._normalizeCenter(Rn);var Un=ae.project(Cn),Hn=ae.project(Rn).sub(Un),Vn=_.curve,_n=Math.max(ae.width,ae.height),sa=_n/Ur,ia=Hn.mag();if("minZoom"in _){var ha=i.clamp(Math.min(_.minZoom,ge,mr),ae.minZoom,ae.maxZoom),ga=_n/ae.zoomScale(ha-ge);Vn=Math.sqrt(ga/ia*2)}var Ca=Vn*Vn;function Fa(za){var Za=(sa*sa-_n*_n+(za?-1:1)*Ca*Ca*ia*ia)/(2*(za?sa:_n)*Ca*ia);return Math.log(Math.sqrt(Za*Za+1)-Za)}function $a(za){return(Math.exp(za)-Math.exp(-za))/2}function Oa(za){return(Math.exp(za)+Math.exp(-za))/2}var Ta=Fa(0),_a=function(za){return Oa(Ta)/Oa(Ta+Vn*za)},ni=function(za){return _n*((Oa(Ta)*function Ha(za){return $a(za)/Oa(za)}(Ta+Vn*za)-$a(Ta))/Ca)/ia},oi=(Fa(1)-Ta)/Vn;if(Math.abs(ia)<1e-6||!isFinite(oi)){if(Math.abs(_n-sa)<1e-6)return this.easeTo(_,vt);var Ya=sa<_n?-1:1;oi=Math.abs(Math.log(sa/_n))/Vn,ni=function(){return 0},_a=function(za){return Math.exp(Ya*Vn*za)}}return _.duration="duration"in _?+_.duration:1e3*oi/("screenSpeed"in _?+_.screenSpeed/Vn:+_.speed),_.maxDuration&&_.duration>_.maxDuration&&(_.duration=0),this._zooming=!0,this._rotating=ze!==Ir,this._pitching=Gr!==Je,this._padding=!ae.isPaddingEqual(Yr),this._prepareEase(vt,!1),this._ease(function(za){var Za=za*oi,Ri=1/_a(Za);ae.zoom=1===za?mr:ge+ae.scaleZoom(Ri),Ct._rotating&&(ae.bearing=i.number(ze,Ir,za)),Ct._pitching&&(ae.pitch=i.number(Je,Gr,za)),Ct._padding&&(ae.interpolatePadding(ur,Yr,za),cn=ae.centerPoint.add(Kr));var Hi=1===za?Rn:ae.unproject(Un.add(Hn.mult(ni(Za))).mult(Ri));ae.setLocationAtPoint(ae.renderWorldCopies?Hi.wrap():Hi,cn),Ct._fireMoveEvents(vt)},function(){return Ct._afterEase(vt)},_),this},Y.prototype.isEasing=function(){return!!this._easeFrameId},Y.prototype.stop=function(){return this._stop()},Y.prototype._stop=function(_,vt){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Ct=this._onEaseEnd;delete this._onEaseEnd,Ct.call(this,vt)}if(!_){var Yt=this.handlers;Yt&&Yt.stop()}return this},Y.prototype._ease=function(_,vt,Ct){!1===Ct.animate||0===Ct.duration?(_(1),vt()):(this._easeStart=i.browser.now(),this._easeOptions=Ct,this._onEaseFrame=_,this._onEaseEnd=vt,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},Y.prototype._renderFrameCallback=function(){var _=Math.min((i.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(_)),_<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Y.prototype._normalizeBearing=function(_,vt){_=i.wrap(_,-180,180);var Ct=Math.abs(_-vt);return Math.abs(_-360-vt)<Ct&&(_-=360),Math.abs(_+360-vt)<Ct&&(_+=360),_},Y.prototype._normalizeCenter=function(_){var vt=this.transform;if(vt.renderWorldCopies&&!vt.lngRange){var Ct=_.lng-vt.center.lng;_.lng+=Ct>180?-360:Ct<-180?360:0}},Y}(i.Evented),Ls=function(Y){void 0===Y&&(Y={}),this.options=Y,i.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Ls.prototype.getDefaultPosition=function(){return"bottom-right"},Ls.prototype.onAdd=function(Y){var ht=this.options&&this.options.compact;return this._map=Y,this._container=C.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=C.create("div","mapboxgl-ctrl-attrib-inner",this._container),ht&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===ht&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ls.prototype.onRemove=function(){C.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ls.prototype._updateEditLink=function(){var Y=this._editLink;Y||(Y=this._editLink=this._container.querySelector(".mapbox-improve-map"));var ht=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||i.config.ACCESS_TOKEN}];if(Y){var _=ht.reduce(function(vt,Ct,Yt){return Ct.value&&(vt+=Ct.key+"="+Ct.value+(Yt<ht.length-1?"&":"")),vt},"?");Y.href=i.config.FEEDBACK_URL+"/"+_+(this._map._hash?this._map._hash.getHashString(!0):""),Y.rel="noopener nofollow"}},Ls.prototype._updateData=function(Y){Y&&("metadata"===Y.sourceDataType||"style"===Y.dataType)&&(this._updateAttributions(),this._updateEditLink())},Ls.prototype._updateAttributions=function(){if(this._map.style){var Y=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?Y=Y.concat(this.options.customAttribution.map(function(ge){return"string"!=typeof ge?"":ge})):"string"==typeof this.options.customAttribution&&Y.push(this.options.customAttribution)),this._map.style.stylesheet){var ht=this._map.style.stylesheet;this.styleOwner=ht.owner,this.styleId=ht.id}var _=this._map.style.sourceCaches;for(var vt in _){var Ct=_[vt];if(Ct.used){var Yt=Ct.getSource();Yt.attribution&&Y.indexOf(Yt.attribution)<0&&Y.push(Yt.attribution)}}Y.sort(function(ge,ze){return ge.length-ze.length});var ae=(Y=Y.filter(function(ge,ze){for(var Je=ze+1;Je<Y.length;Je++)if(Y[Je].indexOf(ge)>=0)return!1;return!0})).join(" | ");ae!==this._attribHTML&&(this._attribHTML=ae,Y.length?(this._innerContainer.innerHTML=ae,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ls.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Va=function(){i.bindAll(["_updateLogo"],this),i.bindAll(["_updateCompact"],this)};Va.prototype.onAdd=function(Y){this._map=Y,this._container=C.create("div","mapboxgl-ctrl");var ht=C.create("a","mapboxgl-ctrl-logo");return ht.target="_blank",ht.rel="noopener nofollow",ht.href="https://www.mapbox.com/",ht.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),ht.setAttribute("rel","noopener nofollow"),this._container.appendChild(ht),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Va.prototype.onRemove=function(){C.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Va.prototype.getDefaultPosition=function(){return"bottom-left"},Va.prototype._updateLogo=function(Y){(!Y||"metadata"===Y.sourceDataType)&&(this._container.style.display=this._logoRequired()?"block":"none")},Va.prototype._logoRequired=function(){if(this._map.style){var Y=this._map.style.sourceCaches;for(var ht in Y)if(Y[ht].getSource().mapbox_logo)return!0;return!1}},Va.prototype._updateCompact=function(){var Y=this._container.children;if(Y.length){var ht=Y[0];this._map.getCanvasContainer().offsetWidth<250?ht.classList.add("mapboxgl-compact"):ht.classList.remove("mapboxgl-compact")}};var Wa=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Wa.prototype.add=function(Y){var ht=++this._id;return this._queue.push({callback:Y,id:ht,cancelled:!1}),ht},Wa.prototype.remove=function(Y){for(var ht=this._currentlyRunning,vt=0,Ct=ht?this._queue.concat(ht):this._queue;vt<Ct.length;vt+=1){var Yt=Ct[vt];if(Yt.id===Y)return void(Yt.cancelled=!0)}},Wa.prototype.run=function(Y){void 0===Y&&(Y=0);var ht=this._currentlyRunning=this._queue;this._queue=[];for(var _=0,vt=ht;_<vt.length;_+=1){var Ct=vt[_];if(!Ct.cancelled&&(Ct.callback(Y),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Wa.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Bo={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},So=i.window.HTMLImageElement,io=i.window.HTMLElement,Eo=i.window.ImageBitmap,qf={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},tc=function(lt){function Y(_){var vt=this;if(null!=(_=i.extend({},qf,_)).minZoom&&null!=_.maxZoom&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=_.minPitch&&null!=_.maxPitch&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=_.minPitch&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=_.maxPitch&&_.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var Ct=new $r(_.minZoom,_.maxZoom,_.minPitch,_.maxPitch,_.renderWorldCopies);if(lt.call(this,Ct,_),this._interactive=_.interactive,this._maxTileCacheSize=_.maxTileCacheSize,this._failIfMajorPerformanceCaveat=_.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=_.preserveDrawingBuffer,this._antialias=_.antialias,this._trackResize=_.trackResize,this._bearingSnap=_.bearingSnap,this._refreshExpiredTiles=_.refreshExpiredTiles,this._fadeDuration=_.fadeDuration,this._crossSourceCollisions=_.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=_.collectResourceTiming,this._renderTaskQueue=new Wa,this._controls=[],this._mapId=i.uniqueId(),this._locale=i.extend({},Bo,_.locale),this._requestManager=new i.RequestManager(_.transformRequest,_.accessToken),"string"==typeof _.container){if(this._container=i.window.document.getElementById(_.container),!this._container)throw new Error("Container '"+_.container+"' not found.")}else{if(!(_.container instanceof io))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(_.maxBounds&&this.setMaxBounds(_.maxBounds),i.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return vt._update(!1)}),this.on("moveend",function(){return vt._update(!1)}),this.on("zoom",function(){return vt._update(!0)}),void 0!==i.window&&(i.window.addEventListener("online",this._onWindowOnline,!1),i.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new ti(this,_),this._hash=_.hash&&new qn("string"==typeof _.hash&&_.hash||void 0).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,i.extend({},_.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=_.localIdeographFontFamily,_.style&&this.setStyle(_.style,{localIdeographFontFamily:_.localIdeographFontFamily}),_.attributionControl&&this.addControl(new Ls({customAttribution:_.customAttribution})),this.addControl(new Va,_.logoPosition),this.on("style.load",function(){vt.transform.unmodified&&vt.jumpTo(vt.style.stylesheet)}),this.on("data",function(ae){vt._update("style"===ae.dataType),vt.fire(new i.Event(ae.dataType+"data",ae))}),this.on("dataloading",function(ae){vt.fire(new i.Event(ae.dataType+"dataloading",ae))})}lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y;var ht={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return Y.prototype._getMapId=function(){return this._mapId},Y.prototype.addControl=function(vt,Ct){if(void 0===Ct&&vt.getDefaultPosition&&(Ct=vt.getDefaultPosition()),void 0===Ct&&(Ct="top-right"),!vt||!vt.onAdd)return this.fire(new i.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Yt=vt.onAdd(this);this._controls.push(vt);var ae=this._controlPositions[Ct];return-1!==Ct.indexOf("bottom")?ae.insertBefore(Yt,ae.firstChild):ae.appendChild(Yt),this},Y.prototype.removeControl=function(vt){if(!vt||!vt.onRemove)return this.fire(new i.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Ct=this._controls.indexOf(vt);return Ct>-1&&this._controls.splice(Ct,1),vt.onRemove(this),this},Y.prototype.resize=function(vt){var Ct=this._containerDimensions(),Yt=Ct[0],ae=Ct[1];this._resizeCanvas(Yt,ae),this.transform.resize(Yt,ae),this.painter.resize(Yt,ae);var ge=!this._moving;return ge&&(this.stop(),this.fire(new i.Event("movestart",vt)).fire(new i.Event("move",vt))),this.fire(new i.Event("resize",vt)),ge&&this.fire(new i.Event("moveend",vt)),this},Y.prototype.getBounds=function(){return this.transform.getBounds()},Y.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},Y.prototype.setMaxBounds=function(vt){return this.transform.setMaxBounds(i.LngLatBounds.convert(vt)),this._update()},Y.prototype.setMinZoom=function(vt){if((vt=null==vt?-2:vt)>=-2&&vt<=this.transform.maxZoom)return this.transform.minZoom=vt,this._update(),this.getZoom()<vt&&this.setZoom(vt),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},Y.prototype.getMinZoom=function(){return this.transform.minZoom},Y.prototype.setMaxZoom=function(vt){if((vt=null==vt?22:vt)>=this.transform.minZoom)return this.transform.maxZoom=vt,this._update(),this.getZoom()>vt&&this.setZoom(vt),this;throw new Error("maxZoom must be greater than the current minZoom")},Y.prototype.getMaxZoom=function(){return this.transform.maxZoom},Y.prototype.setMinPitch=function(vt){if((vt=null==vt?0:vt)<0)throw new Error("minPitch must be greater than or equal to 0");if(vt>=0&&vt<=this.transform.maxPitch)return this.transform.minPitch=vt,this._update(),this.getPitch()<vt&&this.setPitch(vt),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},Y.prototype.getMinPitch=function(){return this.transform.minPitch},Y.prototype.setMaxPitch=function(vt){if((vt=null==vt?60:vt)>60)throw new Error("maxPitch must be less than or equal to 60");if(vt>=this.transform.minPitch)return this.transform.maxPitch=vt,this._update(),this.getPitch()>vt&&this.setPitch(vt),this;throw new Error("maxPitch must be greater than the current minPitch")},Y.prototype.getMaxPitch=function(){return this.transform.maxPitch},Y.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},Y.prototype.setRenderWorldCopies=function(vt){return this.transform.renderWorldCopies=vt,this._update()},Y.prototype.project=function(vt){return this.transform.locationPoint(i.LngLat.convert(vt))},Y.prototype.unproject=function(vt){return this.transform.pointLocation(i.Point.convert(vt))},Y.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},Y.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},Y.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},Y.prototype._createDelegatedListener=function(vt,Ct,Yt){var ge,ae=this;if("mouseenter"===vt||"mouseover"===vt){var ze=!1;return{layer:Ct,listener:Yt,delegates:{mousemove:function(Ur){var Kr=ae.getLayer(Ct)?ae.queryRenderedFeatures(Ur.point,{layers:[Ct]}):[];Kr.length?ze||(ze=!0,Yt.call(ae,new yi(vt,ae,Ur.originalEvent,{features:Kr}))):ze=!1},mouseout:function(){ze=!1}}}}if("mouseleave"===vt||"mouseout"===vt){var mr=!1;return{layer:Ct,listener:Yt,delegates:{mousemove:function(Ur){(ae.getLayer(Ct)?ae.queryRenderedFeatures(Ur.point,{layers:[Ct]}):[]).length?mr=!0:mr&&(mr=!1,Yt.call(ae,new yi(vt,ae,Ur.originalEvent)))},mouseout:function(Ur){mr&&(mr=!1,Yt.call(ae,new yi(vt,ae,Ur.originalEvent)))}}}}return{layer:Ct,listener:Yt,delegates:(ge={},ge[vt]=function(Ur){var Kr=ae.getLayer(Ct)?ae.queryRenderedFeatures(Ur.point,{layers:[Ct]}):[];Kr.length&&(Ur.features=Kr,Yt.call(ae,Ur),delete Ur.features)},ge)}},Y.prototype.on=function(vt,Ct,Yt){if(void 0===Yt)return lt.prototype.on.call(this,vt,Ct);var ae=this._createDelegatedListener(vt,Ct,Yt);for(var ge in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[vt]=this._delegatedListeners[vt]||[],this._delegatedListeners[vt].push(ae),ae.delegates)this.on(ge,ae.delegates[ge]);return this},Y.prototype.once=function(vt,Ct,Yt){if(void 0===Yt)return lt.prototype.once.call(this,vt,Ct);var ae=this._createDelegatedListener(vt,Ct,Yt);for(var ge in ae.delegates)this.once(ge,ae.delegates[ge]);return this},Y.prototype.off=function(vt,Ct,Yt){var ae=this;return void 0===Yt?lt.prototype.off.call(this,vt,Ct):(this._delegatedListeners&&this._delegatedListeners[vt]&&function(ze){for(var Je=ze[vt],ur=0;ur<Je.length;ur++){var mr=Je[ur];if(mr.layer===Ct&&mr.listener===Yt){for(var Ir in mr.delegates)ae.off(Ir,mr.delegates[Ir]);return Je.splice(ur,1),ae}}}(this._delegatedListeners),this)},Y.prototype.queryRenderedFeatures=function(vt,Ct){if(!this.style)return[];var Yt;if(void 0===Ct&&void 0!==vt&&!(vt instanceof i.Point)&&!Array.isArray(vt)&&(Ct=vt,vt=void 0),Ct=Ct||{},(vt=vt||[[0,0],[this.transform.width,this.transform.height]])instanceof i.Point||"number"==typeof vt[0])Yt=[i.Point.convert(vt)];else{var ae=i.Point.convert(vt[0]),ge=i.Point.convert(vt[1]);Yt=[ae,new i.Point(ge.x,ae.y),ge,new i.Point(ae.x,ge.y),ae]}return this.style.queryRenderedFeatures(Yt,Ct,this.transform)},Y.prototype.querySourceFeatures=function(vt,Ct){return this.style.querySourceFeatures(vt,Ct)},Y.prototype.setStyle=function(vt,Ct){return!1!==(Ct=i.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Ct)).diff&&Ct.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&vt?(this._diffStyle(vt,Ct),this):(this._localIdeographFontFamily=Ct.localIdeographFontFamily,this._updateStyle(vt,Ct))},Y.prototype._getUIString=function(vt){var Ct=this._locale[vt];if(null==Ct)throw new Error("Missing UI string '"+vt+"'");return Ct},Y.prototype._updateStyle=function(vt,Ct){return this.style&&(this.style.setEventedParent(null),this.style._remove()),vt?(this.style=new to(this,Ct||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof vt?this.style.loadURL(vt):this.style.loadJSON(vt),this):(delete this.style,this)},Y.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new to(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},Y.prototype._diffStyle=function(vt,Ct){var Yt=this;if("string"==typeof vt){var ae=this._requestManager.normalizeStyleURL(vt),ge=this._requestManager.transformRequest(ae,i.ResourceType.Style);i.getJSON(ge,function(ze,Je){ze?Yt.fire(new i.ErrorEvent(ze)):Je&&Yt._updateDiff(Je,Ct)})}else"object"==typeof vt&&this._updateDiff(vt,Ct)},Y.prototype._updateDiff=function(vt,Ct){try{this.style.setState(vt)&&this._update(!0)}catch(Yt){i.warnOnce("Unable to perform style diff: "+(Yt.message||Yt.error||Yt)+".  Rebuilding the style from scratch."),this._updateStyle(vt,Ct)}},Y.prototype.getStyle=function(){if(this.style)return this.style.serialize()},Y.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():i.warnOnce("There is no style added to the map.")},Y.prototype.addSource=function(vt,Ct){return this._lazyInitEmptyStyle(),this.style.addSource(vt,Ct),this._update(!0)},Y.prototype.isSourceLoaded=function(vt){var Ct=this.style&&this.style.sourceCaches[vt];if(void 0!==Ct)return Ct.loaded();this.fire(new i.ErrorEvent(new Error("There is no source with ID '"+vt+"'")))},Y.prototype.areTilesLoaded=function(){var vt=this.style&&this.style.sourceCaches;for(var Ct in vt){var ae=vt[Ct]._tiles;for(var ge in ae){var ze=ae[ge];if("loaded"!==ze.state&&"errored"!==ze.state)return!1}}return!0},Y.prototype.addSourceType=function(vt,Ct,Yt){return this._lazyInitEmptyStyle(),this.style.addSourceType(vt,Ct,Yt)},Y.prototype.removeSource=function(vt){return this.style.removeSource(vt),this._update(!0)},Y.prototype.getSource=function(vt){return this.style.getSource(vt)},Y.prototype.addImage=function(vt,Ct,Yt){void 0===Yt&&(Yt={});var ae=Yt.pixelRatio;void 0===ae&&(ae=1);var ge=Yt.sdf;void 0===ge&&(ge=!1);var ze=Yt.stretchX,Je=Yt.stretchY,ur=Yt.content;this._lazyInitEmptyStyle();if(Ct instanceof So||Eo&&Ct instanceof Eo){var Ir=i.browser.getImageData(Ct);this.style.addImage(vt,{data:new i.RGBAImage({width:Ir.width,height:Ir.height},Ir.data),pixelRatio:ae,stretchX:ze,stretchY:Je,content:ur,sdf:ge,version:0})}else{if(void 0===Ct.width||void 0===Ct.height)return this.fire(new i.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Rn=Ct;this.style.addImage(vt,{data:new i.RGBAImage({width:Ct.width,height:Ct.height},new Uint8Array(Ct.data)),pixelRatio:ae,stretchX:ze,stretchY:Je,content:ur,sdf:ge,version:0,userImage:Rn}),Rn.onAdd&&Rn.onAdd(this,vt)}},Y.prototype.updateImage=function(vt,Ct){var Yt=this.style.getImage(vt);if(!Yt)return this.fire(new i.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var ae=Ct instanceof So||Eo&&Ct instanceof Eo?i.browser.getImageData(Ct):Ct,ge=ae.width,ze=ae.height,Je=ae.data;return void 0===ge||void 0===ze?this.fire(new i.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):ge!==Yt.data.width||ze!==Yt.data.height?this.fire(new i.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(Yt.data.replace(Je,!(Ct instanceof So||Eo&&Ct instanceof Eo)),void this.style.updateImage(vt,Yt))},Y.prototype.hasImage=function(vt){return vt?!!this.style.getImage(vt):(this.fire(new i.ErrorEvent(new Error("Missing required image id"))),!1)},Y.prototype.removeImage=function(vt){this.style.removeImage(vt)},Y.prototype.loadImage=function(vt,Ct){i.getImage(this._requestManager.transformRequest(vt,i.ResourceType.Image),Ct)},Y.prototype.listImages=function(){return this.style.listImages()},Y.prototype.addLayer=function(vt,Ct){return this._lazyInitEmptyStyle(),this.style.addLayer(vt,Ct),this._update(!0)},Y.prototype.moveLayer=function(vt,Ct){return this.style.moveLayer(vt,Ct),this._update(!0)},Y.prototype.removeLayer=function(vt){return this.style.removeLayer(vt),this._update(!0)},Y.prototype.getLayer=function(vt){return this.style.getLayer(vt)},Y.prototype.setLayerZoomRange=function(vt,Ct,Yt){return this.style.setLayerZoomRange(vt,Ct,Yt),this._update(!0)},Y.prototype.setFilter=function(vt,Ct,Yt){return void 0===Yt&&(Yt={}),this.style.setFilter(vt,Ct,Yt),this._update(!0)},Y.prototype.getFilter=function(vt){return this.style.getFilter(vt)},Y.prototype.setPaintProperty=function(vt,Ct,Yt,ae){return void 0===ae&&(ae={}),this.style.setPaintProperty(vt,Ct,Yt,ae),this._update(!0)},Y.prototype.getPaintProperty=function(vt,Ct){return this.style.getPaintProperty(vt,Ct)},Y.prototype.setLayoutProperty=function(vt,Ct,Yt,ae){return void 0===ae&&(ae={}),this.style.setLayoutProperty(vt,Ct,Yt,ae),this._update(!0)},Y.prototype.getLayoutProperty=function(vt,Ct){return this.style.getLayoutProperty(vt,Ct)},Y.prototype.setLight=function(vt,Ct){return void 0===Ct&&(Ct={}),this._lazyInitEmptyStyle(),this.style.setLight(vt,Ct),this._update(!0)},Y.prototype.getLight=function(){return this.style.getLight()},Y.prototype.setFeatureState=function(vt,Ct){return this.style.setFeatureState(vt,Ct),this._update()},Y.prototype.removeFeatureState=function(vt,Ct){return this.style.removeFeatureState(vt,Ct),this._update()},Y.prototype.getFeatureState=function(vt){return this.style.getFeatureState(vt)},Y.prototype.getContainer=function(){return this._container},Y.prototype.getCanvasContainer=function(){return this._canvasContainer},Y.prototype.getCanvas=function(){return this._canvas},Y.prototype._containerDimensions=function(){var vt=0,Ct=0;return this._container&&(vt=this._container.clientWidth||400,Ct=this._container.clientHeight||300),[vt,Ct]},Y.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==i.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&i.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},Y.prototype._setupContainer=function(){var vt=this._container;vt.classList.add("mapboxgl-map"),(this._missingCSSCanary=C.create("div","mapboxgl-canary",vt)).style.visibility="hidden",this._detectMissingCSS();var Yt=this._canvasContainer=C.create("div","mapboxgl-canvas-container",vt);this._interactive&&Yt.classList.add("mapboxgl-interactive"),this._canvas=C.create("canvas","mapboxgl-canvas",Yt),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var ae=this._containerDimensions();this._resizeCanvas(ae[0],ae[1]);var ge=this._controlContainer=C.create("div","mapboxgl-control-container",vt),ze=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Je){ze[Je]=C.create("div","mapboxgl-ctrl-"+Je,ge)})},Y.prototype._resizeCanvas=function(vt,Ct){var Yt=i.browser.devicePixelRatio||1;this._canvas.width=Yt*vt,this._canvas.height=Yt*Ct,this._canvas.style.width=vt+"px",this._canvas.style.height=Ct+"px"},Y.prototype._setupPainter=function(){var vt=i.extend({},P.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Ct=this._canvas.getContext("webgl",vt)||this._canvas.getContext("experimental-webgl",vt);Ct?(this.painter=new vr(Ct,this.transform),i.webpSupported.testSupport(Ct)):this.fire(new i.ErrorEvent(new Error("Failed to initialize WebGL")))},Y.prototype._contextLost=function(vt){vt.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new i.Event("webglcontextlost",{originalEvent:vt}))},Y.prototype._contextRestored=function(vt){this._setupPainter(),this.resize(),this._update(),this.fire(new i.Event("webglcontextrestored",{originalEvent:vt}))},Y.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},Y.prototype._update=function(vt){return this.style?(this._styleDirty=this._styleDirty||vt,this._sourcesDirty=!0,this.triggerRepaint(),this):this},Y.prototype._requestRenderFrame=function(vt){return this._update(),this._renderTaskQueue.add(vt)},Y.prototype._cancelRenderFrame=function(vt){this._renderTaskQueue.remove(vt)},Y.prototype._render=function(vt){var Yt,Ct=this,ae=0,ge=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Yt=ge.createQueryEXT(),ge.beginQueryEXT(ge.TIME_ELAPSED_EXT,Yt),ae=i.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(vt),!this._removed){var ze=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Je=this.transform.zoom,ur=i.browser.now();this.style.zoomHistory.update(Je,ur);var mr=new i.EvaluationParameters(Je,{now:ur,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ir=mr.crossFadingFactor();(1!==Ir||Ir!==this._crossFadingFactor)&&(ze=!0,this._crossFadingFactor=Ir),this.style.update(mr)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new i.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new i.Event("load"))),this.style&&(this.style.hasTransitions()||ze)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Gr=i.browser.now()-ae;ge.endQueryEXT(ge.TIME_ELAPSED_EXT,Yt),setTimeout(function(){var Kr=ge.getQueryObjectEXT(Yt,ge.QUERY_RESULT_EXT)/1e6;ge.deleteQueryEXT(Yt),Ct.fire(new i.Event("gpu-timing-frame",{cpuTime:Gr,gpuTime:Kr}))},50)}if(this.listens("gpu-timing-layer")){var Yr=this.painter.collectGpuTimers();setTimeout(function(){var Kr=Ct.painter.queryGpuTimers(Yr);Ct.fire(new i.Event("gpu-timing-layer",{layerTimes:Kr}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new i.Event("idle"))),this}},Y.prototype.remove=function(){this._hash&&this._hash.remove();for(var vt=0,Ct=this._controls;vt<Ct.length;vt+=1)Ct[vt].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==i.window&&(i.window.removeEventListener("resize",this._onWindowResize,!1),i.window.removeEventListener("online",this._onWindowOnline,!1));var ae=this.painter.context.gl.getExtension("WEBGL_lose_context");ae&&ae.loseContext(),mf(this._canvasContainer),mf(this._controlContainer),mf(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new i.Event("remove"))},Y.prototype.triggerRepaint=function(){var vt=this;this.style&&!this._frame&&(this._frame=i.browser.frame(function(Ct){vt._frame=null,vt._render(Ct)}))},Y.prototype._onWindowOnline=function(){this._update()},Y.prototype._onWindowResize=function(vt){this._trackResize&&this.resize({originalEvent:vt})._update()},ht.showTileBoundaries.get=function(){return!!this._showTileBoundaries},ht.showTileBoundaries.set=function(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())},ht.showPadding.get=function(){return!!this._showPadding},ht.showPadding.set=function(_){this._showPadding!==_&&(this._showPadding=_,this._update())},ht.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},ht.showCollisionBoxes.set=function(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())},ht.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},ht.showOverdrawInspector.set=function(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())},ht.repaint.get=function(){return!!this._repaint},ht.repaint.set=function(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())},ht.vertices.get=function(){return!!this._vertices},ht.vertices.set=function(_){this._vertices=_,this._update()},Y.prototype._setCacheLimits=function(vt,Ct){i.setCacheLimits(vt,Ct)},ht.version.get=function(){return i.version},Object.defineProperties(Y.prototype,ht),Y}(xl);function mf(lt){lt.parentNode&&lt.parentNode.removeChild(lt)}var Lf={showCompass:!0,showZoom:!0,visualizePitch:!1},bl=function(Y){var ht=this;this.options=i.extend({},Lf,Y),this._container=C.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(_){return _.preventDefault()}),this.options.showZoom&&(i.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(_){return ht._map.zoomIn({},{originalEvent:_})}),C.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(_){return ht._map.zoomOut({},{originalEvent:_})}),C.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(i.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(_){ht.options.visualizePitch?ht._map.resetNorthPitch({},{originalEvent:_}):ht._map.resetNorth({},{originalEvent:_})}),this._compassIcon=C.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};bl.prototype._updateZoomButtons=function(){var Y=this._map.getZoom();this._zoomInButton.disabled=Y===this._map.getMaxZoom(),this._zoomOutButton.disabled=Y===this._map.getMinZoom()},bl.prototype._rotateCompassArrow=function(){var Y=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=Y},bl.prototype.onAdd=function(Y){return this._map=Y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Uo(this._map,this._compass,this.options.visualizePitch)),this._container},bl.prototype.onRemove=function(){C.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},bl.prototype._createButton=function(Y,ht){var _=C.create("button",Y,this._container);return _.type="button",_.addEventListener("click",ht),_},bl.prototype._setButtonTitle=function(Y,ht){var _=this._map._getUIString("NavigationControl."+ht);Y.title=_,Y.setAttribute("aria-label",_)};var Uo=function(Y,ht,_){void 0===_&&(_=!1),this._clickTolerance=10,this.element=ht,this.mouseRotate=new rn({clickTolerance:Y.dragRotate._mouseRotate._clickTolerance}),this.map=Y,_&&(this.mousePitch=new Rr({clickTolerance:Y.dragRotate._mousePitch._clickTolerance})),i.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),C.addEventListener(ht,"mousedown",this.mousedown),C.addEventListener(ht,"touchstart",this.touchstart,{passive:!1}),C.addEventListener(ht,"touchmove",this.touchmove),C.addEventListener(ht,"touchend",this.touchend),C.addEventListener(ht,"touchcancel",this.reset)};function wl(lt,Y,ht){if(lt=new i.LngLat(lt.lng,lt.lat),Y){var _=new i.LngLat(lt.lng-360,lt.lat),vt=new i.LngLat(lt.lng+360,lt.lat),Ct=ht.locationPoint(lt).distSqr(Y);ht.locationPoint(_).distSqr(Y)<Ct?lt=_:ht.locationPoint(vt).distSqr(Y)<Ct&&(lt=vt)}for(;Math.abs(lt.lng-ht.center.lng)>180;){var Yt=ht.locationPoint(lt);if(Yt.x>=0&&Yt.y>=0&&Yt.x<=ht.width&&Yt.y<=ht.height)break;lt.lng>ht.center.lng?lt.lng-=360:lt.lng+=360}return lt}Uo.prototype.down=function(Y,ht){this.mouseRotate.mousedown(Y,ht),this.mousePitch&&this.mousePitch.mousedown(Y,ht),C.disableDrag()},Uo.prototype.move=function(Y,ht){var _=this.map,vt=this.mouseRotate.mousemoveWindow(Y,ht);if(vt&&vt.bearingDelta&&_.setBearing(_.getBearing()+vt.bearingDelta),this.mousePitch){var Ct=this.mousePitch.mousemoveWindow(Y,ht);Ct&&Ct.pitchDelta&&_.setPitch(_.getPitch()+Ct.pitchDelta)}},Uo.prototype.off=function(){var Y=this.element;C.removeEventListener(Y,"mousedown",this.mousedown),C.removeEventListener(Y,"touchstart",this.touchstart,{passive:!1}),C.removeEventListener(Y,"touchmove",this.touchmove),C.removeEventListener(Y,"touchend",this.touchend),C.removeEventListener(Y,"touchcancel",this.reset),this.offTemp()},Uo.prototype.offTemp=function(){C.enableDrag(),C.removeEventListener(i.window,"mousemove",this.mousemove),C.removeEventListener(i.window,"mouseup",this.mouseup)},Uo.prototype.mousedown=function(Y){this.down(i.extend({},Y,{ctrlKey:!0,preventDefault:function(){return Y.preventDefault()}}),C.mousePos(this.element,Y)),C.addEventListener(i.window,"mousemove",this.mousemove),C.addEventListener(i.window,"mouseup",this.mouseup)},Uo.prototype.mousemove=function(Y){this.move(Y,C.mousePos(this.element,Y))},Uo.prototype.mouseup=function(Y){this.mouseRotate.mouseupWindow(Y),this.mousePitch&&this.mousePitch.mouseupWindow(Y),this.offTemp()},Uo.prototype.touchstart=function(Y){1!==Y.targetTouches.length?this.reset():(this._startPos=this._lastPos=C.touchPos(this.element,Y.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return Y.preventDefault()}},this._startPos))},Uo.prototype.touchmove=function(Y){1!==Y.targetTouches.length?this.reset():(this._lastPos=C.touchPos(this.element,Y.targetTouches)[0],this.move({preventDefault:function(){return Y.preventDefault()}},this._lastPos))},Uo.prototype.touchend=function(Y){0===Y.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Uo.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var xf={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Pf(lt,Y,ht){var _=lt.classList;for(var vt in xf)_.remove("mapboxgl-"+ht+"-anchor-"+vt);_.add("mapboxgl-"+ht+"-anchor-"+Y)}var Xl,ju=function(lt){function Y(ht,_){var vt=this;if(lt.call(this),(ht instanceof i.window.HTMLElement||_)&&(ht=i.extend({element:ht},_)),i.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=ht&&ht.anchor||"center",this._color=ht&&ht.color||"#3FB1CE",this._draggable=ht&&ht.draggable||!1,this._state="inactive",this._rotation=ht&&ht.rotation||0,this._rotationAlignment=ht&&ht.rotationAlignment||"auto",this._pitchAlignment=ht&&ht.pitchAlignment&&"auto"!==ht.pitchAlignment?ht.pitchAlignment:this._rotationAlignment,ht&&ht.element)this._element=ht.element,this._offset=i.Point.convert(ht&&ht.offset||[0,0]);else{this._defaultMarker=!0,this._element=C.create("div"),this._element.setAttribute("aria-label","Map marker");var Ct=C.createNS("http://www.w3.org/2000/svg","svg");Ct.setAttributeNS(null,"display","block"),Ct.setAttributeNS(null,"height","41px"),Ct.setAttributeNS(null,"width","27px"),Ct.setAttributeNS(null,"viewBox","0 0 27 41");var Yt=C.createNS("http://www.w3.org/2000/svg","g");Yt.setAttributeNS(null,"stroke","none"),Yt.setAttributeNS(null,"stroke-width","1"),Yt.setAttributeNS(null,"fill","none"),Yt.setAttributeNS(null,"fill-rule","evenodd");var ae=C.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"fill-rule","nonzero");var ge=C.createNS("http://www.w3.org/2000/svg","g");ge.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ge.setAttributeNS(null,"fill","#000000");for(var Je=0,ur=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Je<ur.length;Je+=1){var mr=ur[Je],Ir=C.createNS("http://www.w3.org/2000/svg","ellipse");Ir.setAttributeNS(null,"opacity","0.04"),Ir.setAttributeNS(null,"cx","10.5"),Ir.setAttributeNS(null,"cy","5.80029008"),Ir.setAttributeNS(null,"rx",mr.rx),Ir.setAttributeNS(null,"ry",mr.ry),ge.appendChild(Ir)}var Gr=C.createNS("http://www.w3.org/2000/svg","g");Gr.setAttributeNS(null,"fill",this._color);var Yr=C.createNS("http://www.w3.org/2000/svg","path");Yr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Gr.appendChild(Yr);var Ur=C.createNS("http://www.w3.org/2000/svg","g");Ur.setAttributeNS(null,"opacity","0.25"),Ur.setAttributeNS(null,"fill","#000000");var Kr=C.createNS("http://www.w3.org/2000/svg","path");Kr.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ur.appendChild(Kr);var cn=C.createNS("http://www.w3.org/2000/svg","g");cn.setAttributeNS(null,"transform","translate(6.0, 7.0)"),cn.setAttributeNS(null,"fill","#FFFFFF");var Cn=C.createNS("http://www.w3.org/2000/svg","g");Cn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Rn=C.createNS("http://www.w3.org/2000/svg","circle");Rn.setAttributeNS(null,"fill","#000000"),Rn.setAttributeNS(null,"opacity","0.25"),Rn.setAttributeNS(null,"cx","5.5"),Rn.setAttributeNS(null,"cy","5.5"),Rn.setAttributeNS(null,"r","5.4999962");var Un=C.createNS("http://www.w3.org/2000/svg","circle");Un.setAttributeNS(null,"fill","#FFFFFF"),Un.setAttributeNS(null,"cx","5.5"),Un.setAttributeNS(null,"cy","5.5"),Un.setAttributeNS(null,"r","5.4999962"),Cn.appendChild(Rn),Cn.appendChild(Un),ae.appendChild(ge),ae.appendChild(Gr),ae.appendChild(Ur),ae.appendChild(cn),ae.appendChild(Cn),Ct.appendChild(ae),this._element.appendChild(Ct),this._offset=i.Point.convert(ht&&ht.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Hn){Hn.preventDefault()}),this._element.addEventListener("mousedown",function(Hn){Hn.preventDefault()}),this._element.addEventListener("focus",function(){var Hn=vt._map.getContainer();Hn.scrollTop=0,Hn.scrollLeft=0}),Pf(this._element,this._anchor,"marker"),this._popup=null}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.addTo=function(_){return this.remove(),this._map=_,_.getCanvasContainer().appendChild(this._element),_.on("move",this._update),_.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},Y.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),C.remove(this._element),this._popup&&this._popup.remove(),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function(_){return this._lngLat=i.LngLat.convert(_),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},Y.prototype.getElement=function(){return this._element},Y.prototype.setPopup=function(_){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),_){if(!("offset"in _.options)){var vt=38.1,Ct=13.5,Yt=Math.sqrt(Math.pow(Ct,2)/2);_.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-vt],"bottom-left":[Yt,-1*(24.6+Yt)],"bottom-right":[-Yt,-1*(24.6+Yt)],left:[Ct,-24.6],right:[-Ct,-24.6]}:this._offset}this._popup=_,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},Y.prototype._onKeyPress=function(_){var vt=_.code,Ct=_.charCode||_.keyCode;("Space"===vt||"Enter"===vt||32===Ct||13===Ct)&&this.togglePopup()},Y.prototype._onMapClick=function(_){var vt=_.originalEvent.target,Ct=this._element;this._popup&&(vt===Ct||Ct.contains(vt))&&this.togglePopup()},Y.prototype.getPopup=function(){return this._popup},Y.prototype.togglePopup=function(){var _=this._popup;return _?(_.isOpen()?_.remove():_.addTo(this._map),this):this},Y.prototype._update=function(_){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=wl(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var vt="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?vt="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(vt="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Ct="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?Ct="rotateX(0deg)":"map"===this._pitchAlignment&&(Ct="rotateX("+this._map.getPitch()+"deg)"),(!_||"moveend"===_.type)&&(this._pos=this._pos.round()),C.setTransform(this._element,xf[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Ct+" "+vt)}},Y.prototype.getOffset=function(){return this._offset},Y.prototype.setOffset=function(_){return this._offset=i.Point.convert(_),this._update(),this},Y.prototype._onMove=function(_){this._pos=_.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new i.Event("dragstart"))),this.fire(new i.Event("drag"))},Y.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new i.Event("dragend")),this._state="inactive"},Y.prototype._addDragHandler=function(_){this._element.contains(_.originalEvent.target)&&(_.preventDefault(),this._positionDelta=_.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},Y.prototype.setDraggable=function(_){return this._draggable=!!_,this._map&&(_?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},Y.prototype.isDraggable=function(){return this._draggable},Y.prototype.setRotation=function(_){return this._rotation=_||0,this._update(),this},Y.prototype.getRotation=function(){return this._rotation},Y.prototype.setRotationAlignment=function(_){return this._rotationAlignment=_||"auto",this._update(),this},Y.prototype.getRotationAlignment=function(){return this._rotationAlignment},Y.prototype.setPitchAlignment=function(_){return this._pitchAlignment=_&&"auto"!==_?_:this._rotationAlignment,this._update(),this},Y.prototype.getPitchAlignment=function(){return this._pitchAlignment},Y}(i.Evented),ec={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};var Ku=0,jl=!1,rc=function(lt){function Y(ht){lt.call(this),this.options=i.extend({},ec,ht),i.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.onAdd=function(_){return this._map=_,this._container=C.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),function bf(lt){void 0!==Xl?lt(Xl):void 0!==i.window.navigator.permissions?i.window.navigator.permissions.query({name:"geolocation"}).then(function(Y){lt(Xl="denied"!==Y.state)}):lt(Xl=!!i.window.navigator.geolocation)}(this._setupUI),this._container},Y.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(i.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),C.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ku=0,jl=!1},Y.prototype._isOutOfMapMaxBounds=function(_){var vt=this._map.getMaxBounds(),Ct=_.coords;return vt&&(Ct.longitude<vt.getWest()||Ct.longitude>vt.getEast()||Ct.latitude<vt.getSouth()||Ct.latitude>vt.getNorth())},Y.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},Y.prototype._onSuccess=function(_){if(this._map){if(this._isOutOfMapMaxBounds(_))return this._setErrorState(),this.fire(new i.Event("outofmaxbounds",_)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=_,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(_),(!this.options.trackUserLocation||"ACTIVE_LOCK"===this._watchState)&&this._updateCamera(_),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new i.Event("geolocate",_)),this._finish()}},Y.prototype._updateCamera=function(_){var vt=new i.LngLat(_.coords.longitude,_.coords.latitude),Ct=_.coords.accuracy,Yt=this._map.getBearing(),ae=i.extend({bearing:Yt},this.options.fitBoundsOptions);this._map.fitBounds(vt.toBounds(Ct),ae,{geolocateSource:!0})},Y.prototype._updateMarker=function(_){if(_){var vt=new i.LngLat(_.coords.longitude,_.coords.latitude);this._accuracyCircleMarker.setLngLat(vt).addTo(this._map),this._userLocationDotMarker.setLngLat(vt).addTo(this._map),this._accuracy=_.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},Y.prototype._updateCircleRadius=function(){var _=this._map._container.clientHeight/2,vt=this._map.unproject([0,_]),Ct=this._map.unproject([1,_]),Yt=vt.distanceTo(Ct),ae=Math.ceil(2*this._accuracy/Yt);this._circleElement.style.width=ae+"px",this._circleElement.style.height=ae+"px"},Y.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},Y.prototype._onError=function(_){if(this._map){if(this.options.trackUserLocation)if(1===_.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var vt=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=vt,this._geolocateButton.setAttribute("aria-label",vt),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===_.code&&jl)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new i.Event("error",_)),this._finish()}},Y.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},Y.prototype._setupUI=function(_){var vt=this;if(this._container.addEventListener("contextmenu",function(ae){return ae.preventDefault()}),this._geolocateButton=C.create("button","mapboxgl-ctrl-geolocate",this._container),C.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===_){i.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Ct=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Ct,this._geolocateButton.setAttribute("aria-label",Ct)}else{var Yt=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Yt,this._geolocateButton.setAttribute("aria-label",Yt)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=C.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ju(this._dotElement),this._circleElement=C.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ju({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(ae){!ae.geolocateSource&&"ACTIVE_LOCK"===vt._watchState&&(!ae.originalEvent||"resize"!==ae.originalEvent.type)&&(vt._watchState="BACKGROUND",vt._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),vt._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),vt.fire(new i.Event("trackuserlocationend")))})},Y.prototype.trigger=function(){if(!this._setup)return i.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ku--,jl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new i.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var _;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Ku>1?(_={maximumAge:6e5,timeout:0},jl=!0):(_=this.options.positionOptions,jl=!1),this._geolocationWatchID=i.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else i.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},Y.prototype._clearWatch=function(){i.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},Y}(i.Evented),wc={maxWidth:100,unit:"metric"},Kl=function(Y){this.options=i.extend({},wc,Y),i.bindAll(["_onMove","setUnit"],this)};function nc(lt,Y,ht){var _=ht&&ht.maxWidth||100,vt=lt._container.clientHeight/2,Ct=lt.unproject([0,vt]),Yt=lt.unproject([_,vt]),ae=Ct.distanceTo(Yt);if(ht&&"imperial"===ht.unit){var ge=3.2808*ae;ge>5280?Ju(Y,_,ge/5280,lt._getUIString("ScaleControl.Miles")):Ju(Y,_,ge,lt._getUIString("ScaleControl.Feet"))}else ht&&"nautical"===ht.unit?Ju(Y,_,ae/1852,lt._getUIString("ScaleControl.NauticalMiles")):ae>=1e3?Ju(Y,_,ae/1e3,lt._getUIString("ScaleControl.Kilometers")):Ju(Y,_,ae,lt._getUIString("ScaleControl.Meters"))}function Ju(lt,Y,ht,_){var vt=function Ac(lt){var Y=Math.pow(10,(""+Math.floor(lt)).length-1),ht=lt/Y;return Y*(ht>=10?10:ht>=5?5:ht>=3?3:ht>=2?2:ht>=1?1:function Tc(lt){var Y=Math.pow(10,Math.ceil(-Math.log(lt)/Math.LN10));return Math.round(lt*Y)/Y}(ht))}(ht);lt.style.width=Y*(vt/ht)+"px",lt.innerHTML=vt+"&nbsp;"+_}Kl.prototype.getDefaultPosition=function(){return"bottom-left"},Kl.prototype._onMove=function(){nc(this._map,this._container,this.options)},Kl.prototype.onAdd=function(Y){return this._map=Y,this._container=C.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",Y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Kl.prototype.onRemove=function(){C.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Kl.prototype.setUnit=function(Y){this.options.unit=Y,nc(this._map,this._container,this.options)};var Ds=function(Y){this._fullscreen=!1,Y&&Y.container&&(Y.container instanceof i.window.HTMLElement?this._container=Y.container:i.warnOnce("Full screen control 'container' must be a DOM element.")),i.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in i.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in i.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in i.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in i.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ds.prototype.onAdd=function(Y){return this._map=Y,this._container||(this._container=this._map.getContainer()),this._controlContainer=C.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",i.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ds.prototype.onRemove=function(){C.remove(this._controlContainer),this._map=null,i.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ds.prototype._checkFullscreenSupport=function(){return!!(i.window.document.fullscreenEnabled||i.window.document.mozFullScreenEnabled||i.window.document.msFullscreenEnabled||i.window.document.webkitFullscreenEnabled)},Ds.prototype._setupUI=function(){var Y=this._fullscreenButton=C.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);C.create("span","mapboxgl-ctrl-icon",Y).setAttribute("aria-hidden",!0),Y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),i.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ds.prototype._updateTitle=function(){var Y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",Y),this._fullscreenButton.title=Y},Ds.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ds.prototype._isFullscreen=function(){return this._fullscreen},Ds.prototype._changeIcon=function(){(i.window.document.fullscreenElement||i.window.document.mozFullScreenElement||i.window.document.webkitFullscreenElement||i.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ds.prototype._onClickFullscreen=function(){this._isFullscreen()?i.window.document.exitFullscreen?i.window.document.exitFullscreen():i.window.document.mozCancelFullScreen?i.window.document.mozCancelFullScreen():i.window.document.msExitFullscreen?i.window.document.msExitFullscreen():i.window.document.webkitCancelFullScreen&&i.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Mc={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Sc=function(lt){function Y(ht){lt.call(this),this.options=i.extend(Object.create(Mc),ht),i.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return lt&&(Y.__proto__=lt),(Y.prototype=Object.create(lt&&lt.prototype)).constructor=Y,Y.prototype.addTo=function(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new i.Event("open")),this},Y.prototype.isOpen=function(){return!!this._map},Y.prototype.remove=function(){return this._content&&C.remove(this._content),this._container&&(C.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new i.Event("close")),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function(_){return this._lngLat=i.LngLat.convert(_),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},Y.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},Y.prototype.getElement=function(){return this._container},Y.prototype.setText=function(_){return this.setDOMContent(i.window.document.createTextNode(_))},Y.prototype.setHTML=function(_){var Yt,vt=i.window.document.createDocumentFragment(),Ct=i.window.document.createElement("body");for(Ct.innerHTML=_;Yt=Ct.firstChild;)vt.appendChild(Yt);return this.setDOMContent(vt)},Y.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},Y.prototype.setMaxWidth=function(_){return this.options.maxWidth=_,this._update(),this},Y.prototype.setDOMContent=function(_){return this._createContent(),this._content.appendChild(_),this._update(),this},Y.prototype.addClassName=function(_){this._container&&this._container.classList.add(_)},Y.prototype.removeClassName=function(_){this._container&&this._container.classList.remove(_)},Y.prototype.toggleClassName=function(_){if(this._container)return this._container.classList.toggle(_)},Y.prototype._createContent=function(){this._content&&C.remove(this._content),this._content=C.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=C.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},Y.prototype._onMouseUp=function(_){this._update(_.point)},Y.prototype._onMouseMove=function(_){this._update(_.point)},Y.prototype._onDrag=function(_){this._update(_.point)},Y.prototype._update=function(_){var vt=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=C.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=C.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Ir){return vt._container.classList.add(Ir)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=wl(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||_)){var Yt=this._pos=this._trackPointer&&_?_:this._map.project(this._lngLat),ae=this.options.anchor,ge=ac(this.options.offset);if(!ae){var ur,ze=this._container.offsetWidth,Je=this._container.offsetHeight;ur=Yt.y+ge.bottom.y<Je?["top"]:Yt.y>this._map.transform.height-Je?["bottom"]:[],Yt.x<ze/2?ur.push("left"):Yt.x>this._map.transform.width-ze/2&&ur.push("right"),ae=0===ur.length?"bottom":ur.join("-")}var mr=Yt.add(ge[ae]).round();C.setTransform(this._container,xf[ae]+" translate("+mr.x+"px,"+mr.y+"px)"),Pf(this._container,ae,"popup")}},Y.prototype._onClose=function(){this.remove()},Y}(i.Evented);function ac(lt){if(lt){if("number"==typeof lt){var Y=Math.round(Math.sqrt(.5*Math.pow(lt,2)));return{center:new i.Point(0,0),top:new i.Point(0,lt),"top-left":new i.Point(Y,Y),"top-right":new i.Point(-Y,Y),bottom:new i.Point(0,-lt),"bottom-left":new i.Point(Y,-Y),"bottom-right":new i.Point(-Y,-Y),left:new i.Point(lt,0),right:new i.Point(-lt,0)}}if(lt instanceof i.Point||Array.isArray(lt)){var ht=i.Point.convert(lt);return{center:ht,top:ht,"top-left":ht,"top-right":ht,bottom:ht,"bottom-left":ht,"bottom-right":ht,left:ht,right:ht}}return{center:i.Point.convert(lt.center||[0,0]),top:i.Point.convert(lt.top||[0,0]),"top-left":i.Point.convert(lt["top-left"]||[0,0]),"top-right":i.Point.convert(lt["top-right"]||[0,0]),bottom:i.Point.convert(lt.bottom||[0,0]),"bottom-left":i.Point.convert(lt["bottom-left"]||[0,0]),"bottom-right":i.Point.convert(lt["bottom-right"]||[0,0]),left:i.Point.convert(lt.left||[0,0]),right:i.Point.convert(lt.right||[0,0])}}return ac(new i.Point(0,0))}var Ec={version:i.version,supported:P,setRTLTextPlugin:i.setRTLTextPlugin,getRTLTextPluginStatus:i.getRTLTextPluginStatus,Map:tc,NavigationControl:bl,GeolocateControl:rc,AttributionControl:Ls,ScaleControl:Kl,FullscreenControl:Ds,Popup:Sc,Marker:ju,Style:to,LngLat:i.LngLat,LngLatBounds:i.LngLatBounds,Point:i.Point,MercatorCoordinate:i.MercatorCoordinate,Evented:i.Evented,config:i.config,prewarm:function Ce(){Se().acquire(nr)},clearPrewarmedResources:function We(){var lt=Ht;lt&&(lt.isPreloaded()&&1===lt.numActive()?(lt.release(nr),Ht=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return i.config.ACCESS_TOKEN},set accessToken(lt){i.config.ACCESS_TOKEN=lt},get baseApiUrl(){return i.config.API_URL},set baseApiUrl(lt){i.config.API_URL=lt},get workerCount(){return cr.workerCount},set workerCount(lt){cr.workerCount=lt},get maxParallelImageRequests(){return i.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(lt){i.config.MAX_PARALLEL_IMAGE_REQUESTS=lt},clearStorage:function(Y){i.clearTileCache(Y)},workerUrl:""};return Ec}),A},q.exports=t()},27084:function(q){"use strict";q.exports=Math.log2||function(W){return Math.log(W)*Math.LOG2E}},16825:function(q,W,t){"use strict";q.exports=function g(i,P){P||(P=i,i=window);var C=0,u=0,y=0,e={shift:!1,alt:!1,control:!1,meta:!1},r=!1;function l(M){var b=!1;return"altKey"in M&&(b=b||M.altKey!==e.alt,e.alt=!!M.altKey),"shiftKey"in M&&(b=b||M.shiftKey!==e.shift,e.shift=!!M.shiftKey),"ctrlKey"in M&&(b=b||M.ctrlKey!==e.control,e.control=!!M.ctrlKey),"metaKey"in M&&(b=b||M.metaKey!==e.meta,e.meta=!!M.metaKey),b}function a(M,b){var L=A.x(b),x=A.y(b);"buttons"in b&&(M=0|b.buttons),(M!==C||L!==u||x!==y||l(b))&&(C=0|M,u=L||0,y=x||0,P&&P(C,u,y,e))}function s(M){a(0,M)}function c(){(C||u||y||e.shift||e.alt||e.meta||e.control)&&(u=y=0,C=0,e.shift=e.alt=e.control=e.meta=!1,P&&P(0,0,0,e))}function f(M){l(M)&&P&&P(C,u,y,e)}function m(M){0===A.buttons(M)?a(0,M):a(C,M)}function h(M){a(C|A.buttons(M),M)}function w(M){a(C&~A.buttons(M),M)}function p(){r||(r=!0,i.addEventListener("mousemove",m),i.addEventListener("mousedown",h),i.addEventListener("mouseup",w),i.addEventListener("mouseleave",s),i.addEventListener("mouseenter",s),i.addEventListener("mouseout",s),i.addEventListener("mouseover",s),i.addEventListener("blur",c),i.addEventListener("keyup",f),i.addEventListener("keydown",f),i.addEventListener("keypress",f),i!==window&&(window.addEventListener("blur",c),window.addEventListener("keyup",f),window.addEventListener("keydown",f),window.addEventListener("keypress",f)))}p();var v={element:i};return Object.defineProperties(v,{enabled:{get:function(){return r},set:function(M){M?p():function o(){!r||(r=!1,i.removeEventListener("mousemove",m),i.removeEventListener("mousedown",h),i.removeEventListener("mouseup",w),i.removeEventListener("mouseleave",s),i.removeEventListener("mouseenter",s),i.removeEventListener("mouseout",s),i.removeEventListener("mouseover",s),i.removeEventListener("blur",c),i.removeEventListener("keyup",f),i.removeEventListener("keydown",f),i.removeEventListener("keypress",f),i!==window&&(window.removeEventListener("blur",c),window.removeEventListener("keyup",f),window.removeEventListener("keydown",f),window.removeEventListener("keypress",f)))}()},enumerable:!0},buttons:{get:function(){return C},enumerable:!0},x:{get:function(){return u},enumerable:!0},y:{get:function(){return y},enumerable:!0},mods:{get:function(){return e},enumerable:!0}}),v};var A=t(74311)},48956:function(q){var W={left:0,top:0};q.exports=function t(g,i,P){i=i||g.currentTarget||g.srcElement,Array.isArray(P)||(P=[0,0]);var C=g.clientX||0,u=g.clientY||0,y=function A(g){return g===window||g===document||g===document.body?W:g.getBoundingClientRect()}(i);return P[0]=C-y.left,P[1]=u-y.top,P}},74311:function(q,W){"use strict";function A(P){return P.target||P.srcElement||window}W.buttons=function t(P){if("object"==typeof P){if("buttons"in P)return P.buttons;if("which"in P){if(2===(C=P.which))return 4;if(3===C)return 2;if(C>0)return 1<<C-1}else if("button"in P){var C;if(1===(C=P.button))return 4;if(2===C)return 2;if(C>=0)return 1<<C}}return 0},W.element=A,W.x=function g(P){if("object"==typeof P){if("offsetX"in P)return P.offsetX;var u=A(P).getBoundingClientRect();return P.clientX-u.left}return 0},W.y=function i(P){if("object"==typeof P){if("offsetY"in P)return P.offsetY;var u=A(P).getBoundingClientRect();return P.clientY-u.top}return 0}},1195:function(q,W,t){"use strict";var A=t(75686);q.exports=function g(i,P,C){"function"==typeof i&&(C=!!P,P=i,i=window);var u=A("ex",i),y=function(e){C&&e.preventDefault();var r=e.deltaX||0,l=e.deltaY||0,a=e.deltaZ||0,c=1;switch(e.deltaMode){case 1:c=u;break;case 2:c=window.innerHeight}if(l*=c,a*=c,(r*=c)||l||a)return P(r,l,a,e)};return i.addEventListener("wheel",y),y}},7417:function(q,W,t){var A,i,P,C;C=function(){"use strict";var i,P,C,u=Object.prototype.toString,y="undefined"!=typeof setImmediate?function(v){return setImmediate(v)}:setTimeout;try{Object.defineProperty({},"x",{}),i=function(v,M,b,L){return Object.defineProperty(v,M,{value:b,writable:!0,configurable:!1!==L})}}catch(o){i=function(M,b,L){return M[b]=L,M}}function e(o,v){C.add(o,v),P||(P=y(C.drain))}function r(o){var v,M=typeof o;return null!=o&&("object"==M||"function"==M)&&(v=o.then),"function"==typeof v&&v}function l(){for(var o=0;o<this.chain.length;o++)a(this,1===this.state?this.chain[o].success:this.chain[o].failure,this.chain[o]);this.chain.length=0}function a(o,v,M){var b,L;try{!1===v?M.reject(o.msg):(b=!0===v?o.msg:v.call(void 0,o.msg))===M.promise?M.reject(TypeError("Promise-chain cycle")):(L=r(b))?L.call(b,M.resolve,M.reject):M.resolve(b)}catch(x){M.reject(x)}}function s(o){var v,M=this;if(!M.triggered){M.triggered=!0,M.def&&(M=M.def);try{(v=r(o))?e(function(){var b=new m(M);try{v.call(o,function(){s.apply(b,arguments)},function(){c.apply(b,arguments)})}catch(L){c.call(b,L)}}):(M.msg=o,M.state=1,M.chain.length>0&&e(l,M))}catch(b){c.call(new m(M),b)}}}function c(o){var v=this;v.triggered||(v.triggered=!0,v.def&&(v=v.def),v.msg=o,v.state=2,v.chain.length>0&&e(l,v))}function f(o,v,M,b){for(var L=0;L<v.length;L++)!function(S){o.resolve(v[S]).then(function(n){M(S,n)},b)}(L)}function m(o){this.def=o,this.triggered=!1}function h(o){this.promise=o,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function w(o){if("function"!=typeof o)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var v=new h(this);this.then=function(b,L){var x={success:"function"!=typeof b||b,failure:"function"==typeof L&&L};return x.promise=new this.constructor(function(T,n){if("function"!=typeof T||"function"!=typeof n)throw TypeError("Not a function");x.resolve=T,x.reject=n}),v.chain.push(x),0!==v.state&&e(l,v),x.promise},this.catch=function(b){return this.then(void 0,b)};try{o.call(void 0,function(b){s.call(v,b)},function(b){c.call(v,b)})}catch(M){c.call(v,M)}}C=function(){var v,M,b;function L(x,S){this.fn=x,this.self=S,this.next=void 0}return{add:function(S,T){b=new L(S,T),M?M.next=b:v=b,M=b,b=void 0},drain:function(){var S=v;for(v=M=P=void 0;S;)S.fn.call(S.self),S=S.next}}}();var p=i({},"constructor",w,!1);return w.prototype=p,i(p,"__NPO__",0,!1),i(w,"resolve",function(v){return v&&"object"==typeof v&&1===v.__NPO__?v:new this(function(L,x){if("function"!=typeof L||"function"!=typeof x)throw TypeError("Not a function");L(v)})}),i(w,"reject",function(v){return new this(function(b,L){if("function"!=typeof b||"function"!=typeof L)throw TypeError("Not a function");L(v)})}),i(w,"all",function(v){var M=this;return"[object Array]"!=u.call(v)?M.reject(TypeError("Not an array")):0===v.length?M.resolve([]):new M(function(L,x){if("function"!=typeof L||"function"!=typeof x)throw TypeError("Not a function");var S=v.length,T=Array(S),n=0;f(M,v,function(d,F){T[d]=F,++n===S&&L(T)},x)})}),i(w,"race",function(v){var M=this;return"[object Array]"!=u.call(v)?M.reject(TypeError("Not an array")):new M(function(L,x){if("function"!=typeof L||"function"!=typeof x)throw TypeError("Not a function");f(M,v,function(T,n){L(n)},x)})}),w},(P=void 0!==t.g?t.g:this)[i="Promise"]=P[i]||C(),q.exports?q.exports=P[i]:void 0!==(A=function(){return P[i]}.call(W,t,W,q))&&(q.exports=A)},18625:function(q){var W=Math.PI,t=u(120);function g(y,e,r,l){return["C",y,e,r,l,r,l]}function i(y,e,r,l,a,s){return["C",y/3+.6666666666666666*r,e/3+.6666666666666666*l,a/3+.6666666666666666*r,s/3+.6666666666666666*l,a,s]}function P(y,e,r,l,a,s,c,f,m,h){if(h)T=h[0],n=h[1],x=h[2],S=h[3];else{var w=C(y,e,-a);e=w.y;var p=((y=w.x)-(f=(w=C(f,m,-a)).x))/2,o=(e-(m=w.y))/2,v=p*p/(r*r)+o*o/(l*l);v>1&&(r*=v=Math.sqrt(v),l*=v);var M=r*r,b=l*l,L=(s==c?-1:1)*Math.sqrt(Math.abs((M*b-M*o*o-b*p*p)/(M*o*o+b*p*p)));L==1/0&&(L=1);var x=L*r*o/l+(y+f)/2,S=L*-l*p/r+(e+m)/2,T=Math.asin(((e-S)/l).toFixed(9)),n=Math.asin(((m-S)/l).toFixed(9));(T=y<x?W-T:T)<0&&(T=2*W+T),(n=f<x?W-n:n)<0&&(n=2*W+n),c&&T>n&&(T-=2*W),!c&&n>T&&(n-=2*W)}if(Math.abs(n-T)>t){var E=n,d=f,F=m;n=T+t*(c&&n>T?1:-1);var D=P(f=x+r*Math.cos(n),m=S+l*Math.sin(n),r,l,a,0,c,d,F,[n,E,x,S])}var N=Math.tan((n-T)/4),k=4/3*r*N,O=4/3*l*N,B=[2*y-(y+k*Math.sin(T)),2*e-(e-O*Math.cos(T)),f+k*Math.sin(n),m-O*Math.cos(n),f,m];if(h)return B;D&&(B=B.concat(D));for(var z=0;z<B.length;){var U=C(B[z],B[z+1],a);B[z++]=U.x,B[z++]=U.y}return B}function C(y,e,r){return{x:y*Math.cos(r)-e*Math.sin(r),y:y*Math.sin(r)+e*Math.cos(r)}}function u(y){return y*(W/180)}q.exports=function A(y){for(var e,r=[],l=0,a=0,s=0,c=0,f=null,m=null,h=0,w=0,p=0,o=y.length;p<o;p++){var v=y[p],M=v[0];switch(M){case"M":s=v[1],c=v[2];break;case"A":(v=P(h,w,v[1],v[2],u(v[3]),v[4],v[5],v[6],v[7])).unshift("C"),v.length>7&&(r.push(v.splice(0,7)),v.unshift("C"));break;case"S":var b=h,L=w;("C"==e||"S"==e)&&(b+=b-l,L+=L-a),v=["C",b,L,v[1],v[2],v[3],v[4]];break;case"T":"Q"==e||"T"==e?(f=2*h-f,m=2*w-m):(f=h,m=w),v=i(h,w,f,m,v[1],v[2]);break;case"Q":f=v[1],m=v[2],v=i(h,w,v[1],v[2],v[3],v[4]);break;case"L":v=g(h,w,v[1],v[2]);break;case"H":v=g(h,w,v[1],w);break;case"V":v=g(h,w,h,v[1]);break;case"Z":v=g(h,w,s,c)}e=M,h=v[v.length-2],w=v[v.length-1],v.length>4?(l=v[v.length-4],a=v[v.length-3]):(l=h,a=w),r.push(v)}return r}},56131:function(q){"use strict";var W=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;function g(P){if(null==P)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(P)}q.exports=function i(){try{if(!Object.assign)return!1;var P=new String("abc");if(P[5]="de","5"===Object.getOwnPropertyNames(P)[0])return!1;for(var C={},u=0;u<10;u++)C["_"+String.fromCharCode(u)]=u;if("0123456789"!==Object.getOwnPropertyNames(C).map(function(r){return C[r]}).join(""))return!1;var e={};return"abcdefghijklmnopqrst".split("").forEach(function(r){e[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},e)).join("")}catch(r){return!1}}()?Object.assign:function(P,C){for(var u,e,y=g(P),r=1;r<arguments.length;r++){for(var l in u=Object(arguments[r]))t.call(u,l)&&(y[l]=u[l]);if(W){e=W(u);for(var a=0;a<e.length;a++)A.call(u,e[a])&&(y[e[a]]=u[e[a]])}}return y}},65848:function(q){"use strict";var W=function(t){return t!=t};q.exports=function(A,g){return 0===A&&0===g?1/A==1/g:!!(A===g||W(A)&&W(g))}},64003:function(q,W,t){"use strict";var A=t(17045),g=t(68222),i=t(65848),P=t(27015),C=t(55572),u=g(P(),Object);A(u,{getPolyfill:P,implementation:i,shim:C}),q.exports=u},27015:function(q,W,t){"use strict";var A=t(65848);q.exports=function(){return"function"==typeof Object.is?Object.is:A}},55572:function(q,W,t){"use strict";var A=t(27015),g=t(17045);q.exports=function(){var P=A();return g(Object,{is:P},{is:function(){return Object.is!==P}}),P}},99019:function(q,W,t){"use strict";var A;if(!Object.keys){var g=Object.prototype.hasOwnProperty,i=Object.prototype.toString,P=t(64178),C=Object.prototype.propertyIsEnumerable,u=!C.call({toString:null},"toString"),y=C.call(function(){},"prototype"),e=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=function(c){var f=c.constructor;return f&&f.prototype===c},l={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},a=function(){if("undefined"==typeof window)return!1;for(var c in window)try{if(!l["$"+c]&&g.call(window,c)&&null!==window[c]&&"object"==typeof window[c])try{r(window[c])}catch(f){return!0}}catch(f){return!0}return!1}();A=function(f){var m=null!==f&&"object"==typeof f,h="[object Function]"===i.call(f),w=P(f),p=m&&"[object String]"===i.call(f),o=[];if(!m&&!h&&!w)throw new TypeError("Object.keys called on a non-object");var v=y&&h;if(p&&f.length>0&&!g.call(f,0))for(var M=0;M<f.length;++M)o.push(String(M));if(w&&f.length>0)for(var b=0;b<f.length;++b)o.push(String(b));else for(var L in f)(!v||"prototype"!==L)&&g.call(f,L)&&o.push(String(L));if(u)for(var x=function(c){if("undefined"==typeof window||!a)return r(c);try{return r(c)}catch(f){return!1}}(f),S=0;S<e.length;++S)(!x||"constructor"!==e[S])&&g.call(f,e[S])&&o.push(e[S]);return o}}q.exports=A},8709:function(q,W,t){"use strict";var A=Array.prototype.slice,g=t(64178),i=Object.keys,P=i?function(y){return i(y)}:t(99019),C=Object.keys;P.shim=function(){if(Object.keys){var y=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);y||(Object.keys=function(r){return g(r)?C(A.call(r)):C(r)})}else Object.keys=P;return Object.keys||P},q.exports=P},64178:function(q){"use strict";var W=Object.prototype.toString;q.exports=function(A){var g=W.call(A),i="[object Arguments]"===g;return i||(i="[object Array]"!==g&&null!==A&&"object"==typeof A&&"number"==typeof A.length&&A.length>=0&&"[object Function]"===W.call(A.callee)),i}},88641:function(q){"use strict";function W(g,i){if("string"!=typeof g)return[g];var P=[g];"string"==typeof i||Array.isArray(i)?i={brackets:i}:i||(i={});var C=i.brackets?Array.isArray(i.brackets)?i.brackets:[i.brackets]:["{}","[]","()"],u=i.escape||"___",y=!!i.flat;C.forEach(function(l){var a=new RegExp(["\\",l[0],"[^\\",l[0],"\\",l[1],"]*\\",l[1]].join("")),s=[];function c(f,m,h){var w=P.push(f.slice(l[0].length,-l[1].length))-1;return s.push(w),u+w+u}P.forEach(function(f,m){for(var h,w=0;f!=h;)if(h=f,f=f.replace(a,c),w++>1e4)throw Error("References have circular dependency. Please, check them.");P[m]=f}),s=s.reverse(),P=P.map(function(f){return s.forEach(function(m){f=f.replace(new RegExp("(\\"+u+m+"\\"+u+")","g"),l[0]+"$1"+l[1])}),f})});var e=new RegExp("\\"+u+"([0-9]+)\\"+u);return y?P:function r(l,a,s){for(var f,c=[],m=0;f=e.exec(l);){if(m++>1e4)throw Error("Circular references in parenthesis");c.push(l.slice(0,f.index)),c.push(r(a[f[1]],a)),l=l.slice(f.index+f[0].length)}return c.push(l),c}(P[0],P)}function t(g,i){if(i&&i.flat){var u,P=i&&i.escape||"___",C=g[0];if(!C)return"";for(var y=new RegExp("\\"+P+"([0-9]+)\\"+P),e=0;C!=u;){if(e++>1e4)throw Error("Circular references in "+g);u=C,C=C.replace(y,r)}return C}return g.reduce(function l(a,s){return Array.isArray(s)&&(s=s.reduce(l,"")),a+s},"");function r(l,a){if(null==g[a])throw Error("Reference "+a+"is undefined");return g[a]}}function A(g,i){return Array.isArray(g)?t(g,i):W(g,i)}A.parse=W,A.stringify=t,q.exports=A},18863:function(q,W,t){"use strict";var A=t(71299);q.exports=function g(i){var P;return arguments.length>1&&(i=arguments),"string"==typeof i?i=i.split(/\s/).map(parseFloat):"number"==typeof i&&(i=[i]),i.length&&"number"==typeof i[0]?P=1===i.length?{width:i[0],height:i[0],x:0,y:0}:2===i.length?{width:i[0],height:i[1],x:0,y:0}:{x:i[0],y:i[1],width:i[2]-i[0]||0,height:i[3]-i[1]||0}:i&&((P={x:(i=A(i,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:i.top||0}).width=null==i.width?i.right?i.right-P.x:0:i.width,P.height=null==i.height?i.bottom?i.bottom-P.y:0:i.height),P}},95616:function(q){q.exports=function A(P){var C=[];return P.replace(t,function(u,y,e){var r=y.toLowerCase();for(e=function i(P){var C=P.match(g);return C?C.map(Number):[]}(e),"m"==r&&e.length>2&&(C.push([y].concat(e.splice(0,2))),r="l",y="m"==y?"l":"L");;){if(e.length==W[r])return e.unshift(y),C.push(e);if(e.length<W[r])throw new Error("malformed path data");C.push([y].concat(e.splice(0,W[r])))}}),C};var W={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var g=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},25677:function(q){q.exports=function(t,A){A||(A=[0,""]),t=String(t);var g=parseFloat(t,10);return A[0]=g,A[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",A}},9748:function(q,W,t){var A=t(90386);(function(){var g,i,P,C,u,y;"undefined"!=typeof performance&&null!==performance&&performance.now?q.exports=function(){return performance.now()}:null!=A&&A.hrtime?(q.exports=function(){return(g()-u)/1e6},i=A.hrtime,C=(g=function(){var e;return 1e9*(e=i())[0]+e[1]})(),y=1e9*A.uptime(),u=C-y):Date.now?(q.exports=function(){return Date.now()-P},P=Date.now()):(q.exports=function(){return(new Date).getTime()-P},P=(new Date).getTime())}).call(this)},71299:function(q){"use strict";q.exports=function(g,i,P){var u,y,C={};if("string"==typeof i&&(i=t(i)),Array.isArray(i)){var e={};for(y=0;y<i.length;y++)e[i[y]]=!0;i=e}for(u in i)i[u]=t(i[u]);var r={};for(u in i){var l=i[u];if(Array.isArray(l))for(y=0;y<l.length;y++){var a=l[y];if(P&&(r[a]=!0),a in g){if(C[u]=g[a],P)for(var s=y;s<l.length;s++)r[l[s]]=!0;break}}else u in g&&(i[u]&&(C[u]=g[u]),P&&(r[u]=!0))}if(P)for(u in g)r[u]||(C[u]=g[u]);return C};var W={};function t(A){return W[A]?W[A]:("string"==typeof A&&(A=W[A]=A.split(/\s*,\s*|\s+/)),A)}},38258:function(q){q.exports=function(t,A,g,i){var P=t[0],C=t[1],u=!1;void 0===g&&(g=0),void 0===i&&(i=A.length);for(var y=i-g,e=0,r=y-1;e<y;r=e++){var l=A[e+g][0],a=A[e+g][1],c=A[r+g][1];a>C!=c>C&&P<(A[r+g][0]-l)*(C-a)/(c-a)+l&&(u=!u)}return u}},52142:function(q,W,t){var r,A=t(69444),g=t(29023),i=t(87263),P=t(11328),C=t(55968),u=t(10670),y=!1,e=g();function l(a,s,c){var f=r.segments(a),m=r.segments(s),w=c(r.combine(f,m));return r.polygon(w)}r={buildLog:function(a){return!0===a?y=A():!1===a&&(y=!1),!1!==y&&y.list},epsilon:function(a){return e.epsilon(a)},segments:function(a){var s=i(!0,e,y);return a.regions.forEach(s.addRegion),{segments:s.calculate(a.inverted),inverted:a.inverted}},combine:function(a,s){return{combined:i(!1,e,y).calculate(a.segments,a.inverted,s.segments,s.inverted),inverted1:a.inverted,inverted2:s.inverted}},selectUnion:function(a){return{segments:C.union(a.combined,y),inverted:a.inverted1||a.inverted2}},selectIntersect:function(a){return{segments:C.intersect(a.combined,y),inverted:a.inverted1&&a.inverted2}},selectDifference:function(a){return{segments:C.difference(a.combined,y),inverted:a.inverted1&&!a.inverted2}},selectDifferenceRev:function(a){return{segments:C.differenceRev(a.combined,y),inverted:!a.inverted1&&a.inverted2}},selectXor:function(a){return{segments:C.xor(a.combined,y),inverted:a.inverted1!==a.inverted2}},polygon:function(a){return{regions:P(a.segments,e,y),inverted:a.inverted}},polygonFromGeoJSON:function(a){return u.toPolygon(r,a)},polygonToGeoJSON:function(a){return u.fromPolygon(r,e,a)},union:function(a,s){return l(a,s,r.selectUnion)},intersect:function(a,s){return l(a,s,r.selectIntersect)},difference:function(a,s){return l(a,s,r.selectDifference)},differenceRev:function(a,s){return l(a,s,r.selectDifferenceRev)},xor:function(a,s){return l(a,s,r.selectXor)}},"object"==typeof window&&(window.PolyBool=r),q.exports=r},69444:function(q){q.exports=function W(){var t,A=0,g=!1;function i(P,C){return t.list.push({type:P,data:C?JSON.parse(JSON.stringify(C)):void 0}),t}return t={list:[],segmentId:function(){return A++},checkIntersection:function(P,C){return i("check",{seg1:P,seg2:C})},segmentChop:function(P,C){return i("div_seg",{seg:P,pt:C}),i("chop",{seg:P,pt:C})},statusRemove:function(P){return i("pop_seg",{seg:P})},segmentUpdate:function(P){return i("seg_update",{seg:P})},segmentNew:function(P,C){return i("new_seg",{seg:P,primary:C})},segmentRemove:function(P){return i("rem_seg",{seg:P})},tempStatus:function(P,C,u){return i("temp_status",{seg:P,above:C,below:u})},rewind:function(P){return i("rewind",{seg:P})},status:function(P,C,u){return i("status",{seg:P,above:C,below:u})},vert:function(P){return P===g?t:(g=P,i("vert",{x:P}))},log:function(P){return"string"!=typeof P&&(P=JSON.stringify(P,!1,"  ")),i("log",{txt:P})},reset:function(){return i("reset")},selected:function(P){return i("selected",{segs:P})},chainStart:function(P){return i("chain_start",{seg:P})},chainRemoveHead:function(P,C){return i("chain_rem_head",{index:P,pt:C})},chainRemoveTail:function(P,C){return i("chain_rem_tail",{index:P,pt:C})},chainNew:function(P,C){return i("chain_new",{pt1:P,pt2:C})},chainMatch:function(P){return i("chain_match",{index:P})},chainClose:function(P){return i("chain_close",{index:P})},chainAddHead:function(P,C){return i("chain_add_head",{index:P,pt:C})},chainAddTail:function(P,C){return i("chain_add_tail",{index:P,pt:C})},chainConnect:function(P,C){return i("chain_con",{index1:P,index2:C})},chainReverse:function(P){return i("chain_rev",{index:P})},chainJoin:function(P,C){return i("chain_join",{index1:P,index2:C})},done:function(){return i("done")}}}},29023:function(q){q.exports=function W(t){"number"!=typeof t&&(t=1e-10);var A={epsilon:function(g){return"number"==typeof g&&(t=g),t},pointAboveOrOnLine:function(g,i,P){var C=i[0],u=i[1];return(P[0]-C)*(g[1]-u)-(P[1]-u)*(g[0]-C)>=-t},pointBetween:function(g,i,P){var u=P[0]-i[0],e=P[1]-i[1],r=(g[0]-i[0])*u+(g[1]-i[1])*e;return!(r<t||r-(u*u+e*e)>-t)},pointsSameX:function(g,i){return Math.abs(g[0]-i[0])<t},pointsSameY:function(g,i){return Math.abs(g[1]-i[1])<t},pointsSame:function(g,i){return A.pointsSameX(g,i)&&A.pointsSameY(g,i)},pointsCompare:function(g,i){return A.pointsSameX(g,i)?A.pointsSameY(g,i)?0:g[1]<i[1]?-1:1:g[0]<i[0]?-1:1},pointsCollinear:function(g,i,P){return Math.abs((g[0]-i[0])*(i[1]-P[1])-(i[0]-P[0])*(g[1]-i[1]))<t},linesIntersect:function(g,i,P,C){var u=i[0]-g[0],y=i[1]-g[1],e=C[0]-P[0],r=C[1]-P[1],l=u*r-y*e;if(Math.abs(l)<t)return!1;var a=g[0]-P[0],s=g[1]-P[1],c=(e*s-r*a)/l,f=(u*s-y*a)/l,m={alongA:0,alongB:0,pt:[g[0]+c*u,g[1]+c*y]};return m.alongA=c<=-t?-2:c<t?-1:c-1<=-t?0:c-1<t?1:2,m.alongB=f<=-t?-2:f<t?-1:f-1<=-t?0:f-1<t?1:2,m},pointInsideRegion:function(g,i){for(var P=g[0],C=g[1],u=i[i.length-1][0],y=i[i.length-1][1],e=!1,r=0;r<i.length;r++){var l=i[r][0],a=i[r][1];a-C>t!=y-C>t&&(u-l)*(C-a)/(y-a)+l-P>t&&(e=!e),u=l,y=a}return e}};return A}},10670:function(q){q.exports={toPolygon:function(t,A){function g(C){if(C.length<=0)return t.segments({inverted:!1,regions:[]});function u(r){var l=r.slice(0,r.length-1);return t.segments({inverted:!1,regions:[l]})}for(var y=u(C[0]),e=1;e<C.length;e++)y=t.selectDifference(t.combine(y,u(C[e])));return y}if("Polygon"===A.type)return t.polygon(g(A.coordinates));if("MultiPolygon"===A.type){for(var i=t.segments({inverted:!1,regions:[]}),P=0;P<A.coordinates.length;P++)i=t.selectUnion(t.combine(i,g(A.coordinates[P])));return t.polygon(i)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(t,A,g){function i(c,f){return A.pointInsideRegion([.5*(c[0][0]+c[1][0]),.5*(c[0][1]+c[1][1])],f)}function P(c){return{region:c,children:[]}}g=t.polygon(t.segments(g));var C=P(null);function u(c,f){for(var m=0;m<c.children.length;m++)if(i(f,(h=c.children[m]).region))return void u(h,f);var w=P(f);for(m=0;m<c.children.length;m++){var h;i((h=c.children[m]).region,f)&&(w.children.push(h),c.children.splice(m,1),m--)}c.children.push(w)}for(var y=0;y<g.regions.length;y++){var e=g.regions[y];e.length<3||u(C,e)}function r(c,f){for(var m=0,h=c[c.length-1][0],w=c[c.length-1][1],p=[],o=0;o<c.length;o++){var v=c[o][0],M=c[o][1];p.push([v,M]),m+=M*h-v*w,h=v,w=M}return m<0!==f&&p.reverse(),p.push([p[0][0],p[0][1]]),p}var l=[];function a(c){var f=[r(c.region,!1)];l.push(f);for(var m=0;m<c.children.length;m++)f.push(s(c.children[m]))}function s(c){for(var f=0;f<c.children.length;f++)a(c.children[f]);return r(c.region,!0)}for(y=0;y<C.children.length;y++)a(C.children[y]);return l.length<=0?{type:"Polygon",coordinates:[]}:1==l.length?{type:"Polygon",coordinates:l[0]}:{type:"MultiPolygon",coordinates:l}}}},87263:function(q,W,t){var A=t(26859);q.exports=function g(i,P,C){function u(w,p){return{id:C?C.segmentId():-1,start:w,end:p,myFill:{above:null,below:null},otherFill:null}}function y(w,p,o){return{id:C?C.segmentId():-1,start:w,end:p,myFill:{above:o.myFill.above,below:o.myFill.below},otherFill:null}}var e=A.create();function l(w,p){e.insertBefore(w,function(o){return function r(w,p,o,v,M,b){var L=P.pointsCompare(p,M);return 0!==L?L:P.pointsSame(o,b)?0:w!==v?w?1:-1:P.pointAboveOrOnLine(o,v?M:b,v?b:M)?1:-1}(w.isStart,w.pt,p,o.isStart,o.pt,o.other.pt)<0})}function c(w,p){var o=function a(w,p){var o=A.node({isStart:!0,pt:w.start,seg:w,primary:p,other:null,status:null});return l(o,w.end),o}(w,p);return function s(w,p,o){var v=A.node({isStart:!1,pt:p.end,seg:p,primary:o,other:w,status:null});w.other=v,l(v,w.pt)}(o,w,p),o}function m(w,p){var o=y(p,w.seg.end,w.seg);return function f(w,p){C&&C.segmentChop(w.seg,p),w.other.remove(),w.seg.end=p,w.other.pt=p,l(w.other,w.pt)}(w,p),c(o,w.primary)}function h(w,p){var o=A.create();function M(O){return o.findTransition(function(B){return function v(O,B){var z=O.seg.start,U=O.seg.end,H=B.seg.start,J=B.seg.end;return P.pointsCollinear(z,H,J)?P.pointsCollinear(U,H,J)||P.pointAboveOrOnLine(U,H,J)?1:-1:P.pointAboveOrOnLine(z,H,J)?1:-1}(O,B.ev)>0})}function b(O,B){var z=O.seg,U=B.seg,H=z.start,J=z.end,nt=U.start,it=U.end;C&&C.checkIntersection(z,U);var ut=P.linesIntersect(H,J,nt,it);if(!1===ut){if(!P.pointsCollinear(H,J,nt)||P.pointsSame(H,it)||P.pointsSame(J,nt))return!1;var Q=P.pointsSame(H,nt),j=P.pointsSame(J,it);if(Q&&j)return B;var Z=!Q&&P.pointBetween(H,nt,it),G=!j&&P.pointBetween(J,nt,it);if(Q)return G?m(B,J):m(O,it),B;Z&&(j||(G?m(B,J):m(O,it)),m(B,H))}else 0===ut.alongA&&(-1===ut.alongB?m(O,nt):0===ut.alongB?m(O,ut.pt):1===ut.alongB&&m(O,it)),0===ut.alongB&&(-1===ut.alongA?m(B,H):0===ut.alongA?m(B,ut.pt):1===ut.alongA&&m(B,J));return!1}for(var L=[];!e.isEmpty();){var x=e.getHead();if(C&&C.vert(x.pt[0]),x.isStart){let O=function(){if(T){var B=b(x,T);if(B)return B}return!!n&&b(x,n)};C&&C.segmentNew(x.seg,x.primary);var S=M(x),T=S.before?S.before.ev:null,n=S.after?S.after.ev:null;C&&C.tempStatus(x.seg,!!T&&T.seg,!!n&&n.seg);var d,E=O();if(E&&(i?(d=null===x.seg.myFill.below||x.seg.myFill.above!==x.seg.myFill.below)&&(E.seg.myFill.above=!E.seg.myFill.above):E.seg.otherFill=x.seg.myFill,C&&C.segmentUpdate(E.seg),x.other.remove(),x.remove()),e.getHead()!==x){C&&C.rewind(x.seg);continue}if(i)d=null===x.seg.myFill.below||x.seg.myFill.above!==x.seg.myFill.below,x.seg.myFill.below=n?n.seg.myFill.above:w,x.seg.myFill.above=d?!x.seg.myFill.below:x.seg.myFill.below;else if(null===x.seg.otherFill){var F;x.seg.otherFill={above:F=n?x.primary===n.primary?n.seg.otherFill.above:n.seg.myFill.above:x.primary?p:w,below:F}}C&&C.status(x.seg,!!T&&T.seg,!!n&&n.seg),x.other.status=S.insert(A.node({ev:x}))}else{var D=x.status;if(null===D)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(o.exists(D.prev)&&o.exists(D.next)&&b(D.prev.ev,D.next.ev),C&&C.statusRemove(D.ev.seg),D.remove(),!x.primary){var N=x.seg.myFill;x.seg.myFill=x.seg.otherFill,x.seg.otherFill=N}L.push(x.seg)}e.getHead().remove()}return C&&C.done(),L}return i?{addRegion:function(w){for(var p,o=w[w.length-1],v=0;v<w.length;v++){var M=P.pointsCompare(p=o,o=w[v]);0!==M&&c(u(M<0?p:o,M<0?o:p),!0)}},calculate:function(w){return h(w,!1)}}:{calculate:function(w,p,o,v){return w.forEach(function(M){c(y(M.start,M.end,M),!0)}),o.forEach(function(M){c(y(M.start,M.end,M),!1)}),h(p,v)}}}},26859:function(q){q.exports={create:function(){var t={root:{root:!0,next:null},exists:function(A){return!(null===A||A===t.root)},isEmpty:function(){return null===t.root.next},getHead:function(){return t.root.next},insertBefore:function(A,g){for(var i=t.root,P=t.root.next;null!==P;){if(g(P))return A.prev=P.prev,A.next=P,P.prev.next=A,void(P.prev=A);i=P,P=P.next}i.next=A,A.prev=i,A.next=null},findTransition:function(A){for(var g=t.root,i=t.root.next;null!==i&&!A(i);)g=i,i=i.next;return{before:g===t.root?null:g,after:i,insert:function(P){return P.prev=g,P.next=i,g.next=P,null!==i&&(i.prev=P),P}}}};return t},node:function(t){return t.prev=null,t.next=null,t.remove=function(){t.prev.next=t.next,t.next&&(t.next.prev=t.prev),t.prev=null,t.next=null},t}}},11328:function(q){q.exports=function W(t,A,g){var i=[],P=[];return t.forEach(function(C){var u=C.start,y=C.end;if(A.pointsSame(u,y))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{g&&g.chainStart(C);for(var e={index:0,matches_head:!1,matches_pt1:!1},r={index:0,matches_head:!1,matches_pt1:!1},l=e,s=0;s<i.length;s++){var f=(c=i[s])[0],h=c[c.length-1];if(A.pointsSame(f,u)){if(a(s,!0,!0))break}else if(A.pointsSame(f,y)){if(a(s,!0,!1))break}else if(A.pointsSame(h,u)){if(a(s,!1,!0))break}else if(A.pointsSame(h,y)&&a(s,!1,!1))break}if(l===e)return i.push([u,y]),void(g&&g.chainNew(u,y));if(l===r){g&&g.chainMatch(e.index);var p=e.index,o=e.matches_pt1?y:u,v=e.matches_head,c=i[p],M=v?c[0]:c[c.length-1],b=v?c[1]:c[c.length-2],L=v?c[c.length-1]:c[0],x=v?c[c.length-2]:c[1];return A.pointsCollinear(b,M,o)&&(v?(g&&g.chainRemoveHead(e.index,o),c.shift()):(g&&g.chainRemoveTail(e.index,o),c.pop()),M=b),A.pointsSame(L,o)?(i.splice(p,1),A.pointsCollinear(x,L,M)&&(v?(g&&g.chainRemoveTail(e.index,M),c.pop()):(g&&g.chainRemoveHead(e.index,M),c.shift())),g&&g.chainClose(e.index),void P.push(c)):void(v?(g&&g.chainAddHead(e.index,o),c.unshift(o)):(g&&g.chainAddTail(e.index,o),c.push(o)))}var n=e.index,E=r.index;g&&g.chainConnect(n,E);var d=i[n].length<i[E].length;e.matches_head?r.matches_head?d?(S(n),T(n,E)):(S(E),T(E,n)):T(E,n):r.matches_head?T(n,E):d?(S(n),T(E,n)):(S(E),T(n,E))}function a(F,D,N){return l.index=F,l.matches_head=D,l.matches_pt1=N,l===e?(l=r,!1):(l=null,!0)}function S(F){g&&g.chainReverse(F),i[F].reverse()}function T(F,D){var N=i[F],k=i[D],O=N[N.length-1],B=N[N.length-2],z=k[0],U=k[1];A.pointsCollinear(B,O,z)&&(g&&g.chainRemoveTail(F,O),N.pop(),O=B),A.pointsCollinear(O,z,U)&&(g&&g.chainRemoveHead(D,z),k.shift()),g&&g.chainJoin(F,D),i[F]=N.concat(k),i.splice(D,1)}}),P}},55968:function(q){function W(A,g,i){var P=[];return A.forEach(function(C){var u=(C.myFill.above?8:0)+(C.myFill.below?4:0)+(C.otherFill&&C.otherFill.above?2:0)+(C.otherFill&&C.otherFill.below?1:0);0!==g[u]&&P.push({id:i?i.segmentId():-1,start:C.start,end:C.end,myFill:{above:1===g[u],below:2===g[u]},otherFill:null})}),i&&i.selected(P),P}q.exports={union:function(A,g){return W(A,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],g)},intersect:function(A,g){return W(A,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],g)},difference:function(A,g){return W(A,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],g)},differenceRev:function(A,g){return W(A,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],g)},xor:function(A,g){return W(A,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],g)}}},14847:function(q,W,t){"use strict";var g=t(21630).Transform,i=t(90715);function P(){g.call(this,{readableObjectMode:!0})}function C(u,y,e){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name=this.constructor.name,this.message=u,y&&(this.code=y),e&&(this.statusCode=e)}(P.prototype=Object.create(g.prototype)).constructor=P,i(P.prototype),W.OF=function(u,y,e){for(var r=y,l=0;l<e.length;)if(u[r++]!==e[l++])return!1;return!0},W.eG=function(u,y){var e=[],r=0;if(y&&"hex"===y)for(;r<u.length;)e.push(parseInt(u.slice(r,r+2),16)),r+=2;else for(;r<u.length;r++)e.push(255&u.charCodeAt(r));return e},W.mP=function(u,y){return u[y]|u[y+1]<<8},W.n8=function(u,y){return u[y+1]|u[y]<<8},W.nm=function(u,y){return u[y]|u[y+1]<<8|u[y+2]<<16|16777216*u[y+3]},W.Ag=function(u,y){return u[y+3]|u[y+2]<<8|u[y+1]<<16|16777216*u[y]},(C.prototype=Object.create(Error.prototype)).constructor=C},71371:function(q){"use strict";function W(g,i){var P=new Error(g);return P.code=i,P}function t(g){try{return decodeURIComponent(escape(g))}catch(i){return g}}function A(g,i,P){this.input=g.subarray(i,P),this.start=i;var C=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==C&&"MM\0*"!==C)throw W("invalid TIFF signature","EBADDATA");this.big_endian="M"===C[0]}A.prototype.each=function(g){this.aborted=!1;var i=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:i}];this.ifds_to_read.length>0&&!this.aborted;){var P=this.ifds_to_read.shift();!P.offset||this.scan_ifd(P.id,P.offset,g)}},A.prototype.read_uint16=function(g){var i=this.input;if(g+2>i.length)throw W("unexpected EOF","EBADDATA");return this.big_endian?256*i[g]+i[g+1]:i[g]+256*i[g+1]},A.prototype.read_uint32=function(g){var i=this.input;if(g+4>i.length)throw W("unexpected EOF","EBADDATA");return this.big_endian?16777216*i[g]+65536*i[g+1]+256*i[g+2]+i[g+3]:i[g]+256*i[g+1]+65536*i[g+2]+16777216*i[g+3]},A.prototype.is_subifd_link=function(g,i){return 0===g&&34665===i||0===g&&34853===i||34665===g&&40965===i},A.prototype.exif_format_length=function(g){switch(g){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},A.prototype.exif_format_read=function(g,i){var P;switch(g){case 1:case 2:return this.input[i];case 6:return(P=this.input[i])|33554430*(128&P);case 3:return this.read_uint16(i);case 8:return(P=this.read_uint16(i))|131070*(32768&P);case 4:return this.read_uint32(i);case 9:return 0|this.read_uint32(i);default:return null}},A.prototype.scan_ifd=function(g,i,P){var C=this.read_uint16(i);i+=2;for(var u=0;u<C;u++){var y=this.read_uint16(i),e=this.read_uint16(i+2),r=this.read_uint32(i+4),l=this.exif_format_length(e),a=r*l,s=a<=4?i+8:this.read_uint32(i+8),c=!1;if(s+a>this.input.length)throw W("unexpected EOF","EBADDATA");for(var f=[],m=s,h=0;h<r;h++,m+=l){var w=this.exif_format_read(e,m);if(null===w){f=null;break}f.push(w)}if(Array.isArray(f)&&2===e&&(f=t(String.fromCharCode.apply(null,f)))&&"\0"===f[f.length-1]&&(f=f.slice(0,-1)),this.is_subifd_link(g,y)&&Array.isArray(f)&&Number.isInteger(f[0])&&f[0]>0&&(this.ifds_to_read.push({id:y,offset:f[0]}),c=!0),!1===P({is_big_endian:this.big_endian,ifd:g,tag:y,format:e,count:r,entry_offset:i+this.start,data_length:a,data_offset:s+this.start,value:f,is_subifd_link:c}))return void(this.aborted=!0);i+=12}0===g&&this.ifds_to_read.push({id:1,offset:this.read_uint32(i)})},q.exports.ExifParser=A,q.exports.get_orientation=function(g){var i=0;try{return new A(g,0,g.length).each(function(P){if(0===P.ifd&&274===P.tag&&Array.isArray(P.value))return i=P.value[0],!1}),i}catch(P){return-1}}},76767:function(q,W,t){"use strict";var A=t(14847).n8,g=t(14847).Ag;function i(a,s){if(a.length<4+s)return null;var c=g(a,s);return a.length<c+s||c<8?null:{boxtype:String.fromCharCode.apply(null,a.slice(s+4,s+8)),data:a.slice(s+8,s+c),end:s+c}}function P(a,s){for(var c=0;;){var f=i(a,c);if(!f)break;switch(f.boxtype){case"ispe":s.sizes.push({width:g(f.data,4),height:g(f.data,8)});break;case"irot":s.transforms.push({type:"irot",value:3&f.data[0]});break;case"imir":s.transforms.push({type:"imir",value:1&f.data[0]})}c=f.end}}function C(a,s,c){for(var f=0,m=0;m<c;m++)f=256*f+(a[s+m]||0);return f}function u(a,s){for(var c=a[4]>>4&15,f=15&a[4],m=a[5]>>4&15,h=A(a,6),w=8,p=0;p<h;p++){var o=A(a,w),v=A(a,w+=2),M=C(a,w+=2,m),b=A(a,w+=m);if(w+=2,0===v&&1===b){var L=C(a,w,c),x=C(a,w+c,f);s.item_loc[o]={length:x,offset:L+M}}w+=b*(c+f)}}function y(a,s){for(var c=A(a,4),f=6,m=0;m<c;m++){var h=i(a,f);if(!h)break;if("infe"===h.boxtype){for(var w=A(h.data,4),p="",o=8;o<h.data.length&&h.data[o];o++)p+=String.fromCharCode(h.data[o]);s.item_inf[p]=w}f=h.end}}function e(a,s){for(var c=0;;){var f=i(a,c);if(!f)break;"ipco"===f.boxtype&&P(f.data,s),c=f.end}}q.exports.unbox=i,q.exports.readSizeFromMeta=function(a){var s={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function r(a,s){for(var c=4;;){var f=i(a,c);if(!f)break;"iprp"===f.boxtype&&e(f.data,s),"iloc"===f.boxtype&&u(f.data,s),"iinf"===f.boxtype&&y(f.data,s),c=f.end}}(a,s),s.sizes.length){var c=function l(a){var s=a.reduce(function(m,h){return m.width>h.width||m.width===h.width&&m.height>h.height?m:h}),c=a.reduce(function(m,h){return m.height>h.height||m.height===h.height&&m.width>h.width?m:h});return s.width>c.height||s.width===c.height&&s.height>c.width?s:c}(s.sizes),f=1;s.transforms.forEach(function(h){var w={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},p={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===h.type&&(f=0===h.value?p[f]:w[f=w[f=p[f]]]),"irot"===h.type)for(var o=0;o<h.value;o++)f=w[f]});var m=null;return s.item_inf.Exif&&(m=s.item_loc[s.item_inf.Exif]),{width:c.width,height:c.height,orientation:s.transforms.length?f:null,variants:s.sizes,exif_location:m}}},q.exports.getMimeType=function(a){var s=String.fromCharCode.apply(null,a.slice(0,4)),c={};c[s]=!0;for(var f=8;f<a.length;f+=4)c[String.fromCharCode.apply(null,a.slice(f,f+4))]=!0;if(c.mif1||c.msf1||c.miaf)return"avif"===s||"avis"===s||"avio"===s?{type:"avif",mime:"image/avif"}:"heic"===s||"heix"===s?{type:"heic",mime:"image/heic"}:"hevc"===s||"hevx"===s?{type:"heic",mime:"image/heic-sequence"}:c.avif||c.avis?{type:"avif",mime:"image/avif"}:c.heic||c.heix||c.hevc||c.hevx||c.heis?c.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},24461:function(q,W,t){"use strict";var A=t(14847).eG,g=t(14847).OF,i=t(14847).Ag,P=t(76767),C=t(71371),u=A("ftyp");q.exports=function(y){if(g(y,4,u)){var e=P.unbox(y,0);if(e){var r=P.getMimeType(e.data);if(r){for(var l,a=e.end;;){var s=P.unbox(y,a);if(!s)break;if(a=s.end,"mdat"===s.boxtype)return;if("meta"===s.boxtype){l=s.data;break}}if(l){var c=P.readSizeFromMeta(l);if(c){var f={width:c.width,height:c.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"};if(c.variants.length>1&&(f.variants=c.variants),c.orientation&&(f.orientation=c.orientation),c.exif_location&&c.exif_location.offset+c.exif_location.length<=y.length){var m=i(y,c.exif_location.offset),h=y.slice(c.exif_location.offset+m+4,c.exif_location.offset+c.exif_location.length),w=C.get_orientation(h);w>0&&(f.orientation=w)}return f}}}}}}},2504:function(q,W,t){"use strict";var A=t(14847).eG,g=t(14847).OF,i=t(14847).mP,P=A("BM");q.exports=function(C){if(!(C.length<26)&&g(C,0,P))return{width:i(C,18),height:i(C,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},47342:function(q,W,t){"use strict";var A=t(14847).eG,g=t(14847).OF,i=t(14847).mP,P=A("GIF87a"),C=A("GIF89a");q.exports=function(u){if(!(u.length<10)&&(g(u,0,P)||g(u,0,C)))return{width:i(u,6),height:i(u,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},31355:function(q,W,t){"use strict";var A=t(14847).mP;q.exports=function(C){var u=A(C,0),y=A(C,2),e=A(C,4);if(0===u&&1===y&&e){for(var r=[],l={width:0,height:0},a=0;a<e;a++){var s=C[6+16*a]||256,c=C[6+16*a+1]||256,f={width:s,height:c};r.push(f),(s>l.width||c>l.height)&&(l=f)}return{width:l.width,height:l.height,variants:r,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},54261:function(q,W,t){"use strict";var A=t(14847).n8,g=t(14847).eG,i=t(14847).OF,P=t(71371),C=g("Exif\0\0");q.exports=function(u){if(!(u.length<2)&&255===u[0]&&216===u[1]&&255===u[2])for(var y=2;;){for(;;){if(u.length-y<2)return;if(255===u[y++])break}for(var r,e=u[y++];255===e;)e=u[y++];if(208<=e&&e<=217||1===e)r=0;else{if(!(192<=e&&e<=254))return;if(u.length-y<2)return;r=A(u,y)-2,y+=2}if(217===e||218===e)return;var l;if(225===e&&r>=10&&i(u,y,C)&&(l=P.get_orientation(u.slice(y+6,y+r))),r>=5&&192<=e&&e<=207&&196!==e&&200!==e&&204!==e){if(u.length-y<r)return;var a={width:A(u,y+3),height:A(u,y+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return l>0&&(a.orientation=l),a}y+=r}}},6303:function(q,W,t){"use strict";var A=t(14847).eG,g=t(14847).OF,i=t(14847).Ag,P=A("\x89PNG\r\n\x1a\n"),C=A("IHDR");q.exports=function(u){if(!(u.length<24)&&g(u,0,P)&&g(u,12,C))return{width:i(u,16),height:i(u,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},38689:function(q,W,t){"use strict";var A=t(14847).eG,g=t(14847).OF,i=t(14847).Ag,P=A("8BPS\0\x01");q.exports=function(C){if(!(C.length<22)&&g(C,0,P))return{width:i(C,18),height:i(C,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},6881:function(q){"use strict";function W(l){return 32===l||9===l||13===l||10===l}function t(l){return"number"==typeof l&&isFinite(l)&&l>0}var g=/<[-_.:a-zA-Z0-9][^>]*>/,i=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,P=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,C=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,u=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,y=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function r(l){return y.test(l)?l.match(y)[0]:"px"}q.exports=function(l){if(function A(l){var a=0,s=l.length;for(239===l[0]&&187===l[1]&&191===l[2]&&(a=3);a<s&&W(l[a]);)a++;return a!==s&&60===l[a]}(l)){for(var a="",s=0;s<l.length;s++)a+=String.fromCharCode(l[s]);var c=(a.match(g)||[""])[0];if(i.test(c)){var f=function e(l){var a=l.match(P),s=l.match(C),c=l.match(u);return{width:a&&(a[1]||a[2]),height:s&&(s[1]||s[2]),viewbox:c&&(c[1]||c[2])}}(c),m=parseFloat(f.width),h=parseFloat(f.height);if(f.width&&f.height)return t(m)&&t(h)?{width:m,height:h,type:"svg",mime:"image/svg+xml",wUnits:r(f.width),hUnits:r(f.height)}:void 0;var w=(f.viewbox||"").split(" "),p={width:w[2],height:w[3]},o=parseFloat(p.width),v=parseFloat(p.height);if(t(o)&&t(v)&&r(p.width)===r(p.height)){var M=o/v;return f.width?t(m)?{width:m,height:m/M,type:"svg",mime:"image/svg+xml",wUnits:r(f.width),hUnits:r(f.width)}:void 0:f.height?t(h)?{width:h*M,height:h,type:"svg",mime:"image/svg+xml",wUnits:r(f.height),hUnits:r(f.height)}:void 0:{width:o,height:v,type:"svg",mime:"image/svg+xml",wUnits:r(p.width),hUnits:r(p.height)}}}}}},66278:function(q,W,t){"use strict";var A=t(14847).eG,g=t(14847).OF,i=t(14847).mP,P=t(14847).n8,C=t(14847).nm,u=t(14847).Ag,y=A("II*\0"),e=A("MM\0*");function r(s,c,f){return f?P(s,c):i(s,c)}function l(s,c,f){return f?u(s,c):C(s,c)}function a(s,c,f){var m=r(s,c+2,f);return 1!==l(s,c+4,f)||3!==m&&4!==m?null:3===m?r(s,c+8,f):l(s,c+8,f)}q.exports=function(s){if(!(s.length<8)&&(g(s,0,y)||g(s,0,e))){var c=77===s[0],f=l(s,4,c)-8;if(!(f<0)){var m=f+8;if(!(s.length-m<2)){var h=12*r(s,m+0,c);if(!(h<=0||(m+=2,s.length-m<h))){var w,p,o,v;for(w=0;w<h;w+=12)256===(v=r(s,m+w,c))?p=a(s,m+w,c):257===v&&(o=a(s,m+w,c));if(p&&o)return{width:p,height:o,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},90784:function(q,W,t){"use strict";var A=t(14847).eG,g=t(14847).OF,i=t(14847).mP,P=t(14847).nm,C=t(71371),u=A("RIFF"),y=A("WEBP");function e(a,s){if(157===a[s+3]&&1===a[s+4]&&42===a[s+5])return{width:16383&i(a,s+6),height:16383&i(a,s+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function r(a,s){if(47===a[s]){var c=P(a,s+1);return{width:1+(16383&c),height:1+(c>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function l(a,s){return{width:1+(a[s+6]<<16|a[s+5]<<8|a[s+4]),height:1+(a[s+9]<<s|a[s+8]<<8|a[s+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}q.exports=function(a){if(!(a.length<16)&&(g(a,0,u)||g(a,8,y))){var s=12,c=null,f=0,m=P(a,4)+8;if(!(m>a.length)){for(;s+8<m;)if(0!==a[s]){var h=String.fromCharCode.apply(null,a.slice(s,s+4)),w=P(a,s+4);"VP8 "===h&&w>=10?c=c||e(a,s+8):"VP8L"===h&&w>=9?c=c||r(a,s+8):"VP8X"===h&&w>=10?c=c||l(a,s+8):"EXIF"===h&&(f=C.get_orientation(a.slice(s+8,s+8+w)),s=1/0),s+=8+w}else s++;if(c)return f>0&&(c.orientation=f),c}}}},91497:function(q,W,t){"use strict";q.exports={avif:t(24461),bmp:t(2504),gif:t(47342),ico:t(31355),jpeg:t(54261),png:t(6303),psd:t(38689),svg:t(6881),tiff:t(66278),webp:t(90784)}},33575:function(q,W,t){"use strict";var A=t(91497);q.exports=function(P){return function g(i){for(var P=Object.keys(A),C=0;C<P.length;C++){var u=A[P[C]](i);if(u)return u}return null}(P)},q.exports.parsers=A},90386:function(q){var t,A,W=q.exports={};function g(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function P(f){if(t===setTimeout)return setTimeout(f,0);if((t===g||!t)&&setTimeout)return t=setTimeout,setTimeout(f,0);try{return t(f,0)}catch(m){try{return t.call(null,f,0)}catch(h){return t.call(this,f,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:g}catch(f){t=g}try{A="function"==typeof clearTimeout?clearTimeout:i}catch(f){A=i}}();var e,u=[],y=!1,r=-1;function l(){!y||!e||(y=!1,e.length?u=e.concat(u):r=-1,u.length&&a())}function a(){if(!y){var f=P(l);y=!0;for(var m=u.length;m;){for(e=u,u=[];++r<m;)e&&e[r].run();r=-1,m=u.length}e=null,y=!1,function C(f){if(A===clearTimeout)return clearTimeout(f);if((A===i||!A)&&clearTimeout)return A=clearTimeout,clearTimeout(f);try{return A(f)}catch(m){try{return A.call(null,f)}catch(h){return A.call(this,f)}}}(f)}}function s(f,m){this.fun=f,this.array=m}function c(){}W.nextTick=function(f){var m=new Array(arguments.length-1);if(arguments.length>1)for(var h=1;h<arguments.length;h++)m[h-1]=arguments[h];u.push(new s(f,m)),1===u.length&&!y&&P(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},W.title="browser",W.browser=!0,W.env={},W.argv=[],W.version="",W.versions={},W.on=c,W.addListener=c,W.once=c,W.off=c,W.removeListener=c,W.removeAllListeners=c,W.emit=c,W.prependListener=c,W.prependOnceListener=c,W.listeners=function(f){return[]},W.binding=function(f){throw new Error("process.binding is not supported")},W.cwd=function(){return"/"},W.chdir=function(f){throw new Error("process.chdir is not supported")},W.umask=function(){return 0}},5877:function(q,W,t){for(var A=t(9748),g="undefined"==typeof window?t.g:window,i=["moz","webkit"],P="AnimationFrame",C=g["request"+P],u=g["cancel"+P]||g["cancelRequest"+P],y=0;!C&&y<i.length;y++)C=g[i[y]+"Request"+P],u=g[i[y]+"Cancel"+P]||g[i[y]+"CancelRequest"+P];if(!C||!u){var e=0,r=0,l=[];C=function(s){if(0===l.length){var c=A(),f=Math.max(0,16.666666666666668-(c-e));e=f+c,setTimeout(function(){var m=l.slice(0);l.length=0;for(var h=0;h<m.length;h++)if(!m[h].cancelled)try{m[h].callback(e)}catch(w){setTimeout(function(){throw w},0)}},Math.round(f))}return l.push({handle:++r,callback:s,cancelled:!1}),r},u=function(s){for(var c=0;c<l.length;c++)l[c].handle===s&&(l[c].cancelled=!0)}}q.exports=function(s){return C.call(g,s)},q.exports.cancel=function(){u.apply(g,arguments)},q.exports.polyfill=function(s){s||(s=g),s.requestAnimationFrame=C,s.cancelAnimationFrame=u}},3593:function(q,W,t){"use strict";var A=t(21527),g=t(25075),i=t(93447),P=t(71299),C=t(56131),u=t(30120),y=t(57060),e=y.float32,r=y.fract32;q.exports=function a(s,c){if("function"==typeof s?(c||(c={}),c.regl=s):c=s,c.length&&(c.positions=c),!(s=c.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var m,h,w,p,o,v,f=s._gl,M={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},b=[];return p=s.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),h=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),w=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),o=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),v=s.buffer({usage:"static",type:"float",data:l}),T(c),m=s({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:s.prop("range"),lineWidth:s.prop("lineWidth"),capSize:s.prop("capSize"),opacity:s.prop("opacity"),scale:s.prop("scale"),translate:s.prop("translate"),scaleFract:s.prop("scaleFract"),translateFract:s.prop("translateFract"),viewport:function(E,d){return[d.viewport.x,d.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:p,offset:function(E,d){return 4*d.offset},divisor:1},position:{buffer:h,offset:function(E,d){return 8*d.offset},divisor:1},positionFract:{buffer:w,offset:function(E,d){return 8*d.offset},divisor:1},error:{buffer:o,offset:function(E,d){return 16*d.offset},divisor:1},direction:{buffer:v,stride:24,offset:0},lineOffset:{buffer:v,stride:24,offset:8},capOffset:{buffer:v,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:s.prop("viewport")},viewport:s.prop("viewport"),stencil:!1,instances:s.prop("count"),count:l.length}),C(L,{update:T,draw:x,destroy:n,regl:s,gl:f,canvas:f.canvas,groups:b}),L;function L(E){E?T(E):null===E&&n(),x()}function x(E){if("number"==typeof E)return S(E);E&&!Array.isArray(E)&&(E=[E]),s._refresh(),b.forEach(function(d,F){if(d){if(E&&(d.draw=!!E[F]),!d.draw)return void(d.draw=!0);S(F)}})}function S(E){"number"==typeof E&&(E=b[E]),null!=E&&(!(E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1)||(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],m(E),E.after&&E.after(E)))}function T(E){if(E){null!=E.length?"number"==typeof E[0]&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var d=0,F=0;if(L.groups=b=E.map(function(U,H){var J=b[H];return U?("function"==typeof U?U={after:U}:"number"==typeof U[0]&&(U={positions:U}),U=P(U,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),J||(b[H]=J={id:H,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},U=C({},M,U)),i(J,U,[{lineWidth:function(nt){return.5*+nt},capSize:function(nt){return.5*+nt},opacity:parseFloat,errors:function(nt){return nt=u(nt),F+=nt.length,nt},positions:function(nt,it){return nt=u(nt,"float64"),it.count=Math.floor(nt.length/2),it.bounds=A(nt,2),it.offset=d,d+=it.count,nt}},{color:function(nt,it){var ut=it.count;if(nt||(nt="transparent"),!Array.isArray(nt)||"number"==typeof nt[0]){var Q=nt;nt=Array(ut);for(var j=0;j<ut;j++)nt[j]=Q}if(nt.length<ut)throw Error("Not enough colors");for(var Z=new Uint8Array(4*ut),G=0;G<ut;G++){var K=g(nt[G],"uint8");Z.set(K,4*G)}return Z},range:function(nt,it,ut){return nt||(nt=it.bounds),it.scale=[1/(nt[2]-nt[0]),1/(nt[3]-nt[1])],it.translate=[-nt[0],-nt[1]],it.scaleFract=r(it.scale),it.translateFract=r(it.translate),nt},viewport:function(nt){var it;return Array.isArray(nt)?it={x:nt[0],y:nt[1],width:nt[2]-nt[0],height:nt[3]-nt[1]}:nt?((it={x:nt.x||nt.left||0,y:nt.y||nt.top||0}).width=nt.right?nt.right-it.x:nt.w||nt.width||0,it.height=nt.bottom?nt.bottom-it.y:nt.h||nt.height||0):it={x:0,y:0,width:f.drawingBufferWidth,height:f.drawingBufferHeight},it}}]),J):J}),d||F){var D=b.reduce(function(U,H,J){return U+(H?H.count:0)},0),N=new Float64Array(2*D),k=new Uint8Array(4*D),O=new Float32Array(4*D);b.forEach(function(U,H){if(U){var J=U.positions,it=U.offset,Q=U.errors;!U.count||(k.set(U.color,4*it),O.set(Q,4*it),N.set(J,2*it))}});var B=e(N);h(B);var z=r(N,B);w(z),p(k),o(O)}}}function n(){h.destroy(),w.destroy(),p.destroy(),o.destroy(),v.destroy()}};var l=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},46075:function(q,W,t){"use strict";var A=t(25075),g=t(21527),i=t(56131),P=t(56068),C=t(71299),u=t(30120),y=t(11474),e=t(54),r=t(57060),l=r.float32,a=r.fract32,s=t(83522),c=t(18863),f=t(6851);function m(h,w){if(!(this instanceof m))return new m(h,w);if("function"==typeof h?(w||(w={}),w.regl=h):w=h,w.length&&(w.positions=w),!(h=w.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=h._gl,this.regl=h,this.passes=[],this.shaders=m.shaders.has(h)?m.shaders.get(h):m.shaders.set(h,m.createShaders(h)).get(h),this.update(w)}q.exports=m,m.dashMult=2,m.maxPatternLength=256,m.precisionThreshold=3e6,m.maxPoints=1e4,m.maxLines=2048,m.shaders=new s,m.createShaders=function(h){var v,w=h.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),p={primitive:"triangle strip",instances:h.prop("count"),count:4,offset:0,uniforms:{miterMode:function(b,L){return"round"===L.join?2:1},miterLimit:h.prop("miterLimit"),scale:h.prop("scale"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),translate:h.prop("translate"),thickness:h.prop("thickness"),dashTexture:h.prop("dashTexture"),opacity:h.prop("opacity"),pixelRatio:h.context("pixelRatio"),id:h.prop("id"),dashLength:h.prop("dashLength"),viewport:function(b,L){return[L.viewport.x,L.viewport.y,b.viewportWidth,b.viewportHeight]},depth:h.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(b,L){return!L.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:h.prop("viewport")},viewport:h.prop("viewport")},o=h(i({vert:P(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:P(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:w,divisor:0,stride:8,offset:0},lineTop:{buffer:w,divisor:0,stride:8,offset:4},aCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:h.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},p));try{v=h(i({cull:{enable:!0,face:"back"},vert:P(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:P(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:w,divisor:0,stride:8,offset:0},lineTop:{buffer:w,divisor:0,stride:8,offset:4},aColor:{buffer:h.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:h.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},p))}catch(b){v=o}return{fill:h({primitive:"triangle",elements:function(b,L){return L.triangles},offset:0,vert:P(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:P(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:h.prop("scale"),color:h.prop("fill"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),translate:h.prop("translate"),opacity:h.prop("opacity"),pixelRatio:h.context("pixelRatio"),id:h.prop("id"),viewport:function(b,L){return[L.viewport.x,L.viewport.y,b.viewportWidth,b.viewportHeight]}},attributes:{position:{buffer:h.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:8}},blend:p.blend,depth:{enable:!1},scissor:p.scissor,stencil:p.stencil,viewport:p.viewport}),rect:o,miter:v}},m.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},m.prototype.render=function(){for(var h,w=[],p=arguments.length;p--;)w[p]=arguments[p];w.length&&(h=this).update.apply(h,w),this.draw()},m.prototype.draw=function(){for(var h=this,w=[],p=arguments.length;p--;)w[p]=arguments[p];return(w.length?w:this.passes).forEach(function(o,v){var M;if(o&&Array.isArray(o))return(M=h).draw.apply(M,o);"number"==typeof o&&(o=h.passes[o]),o&&o.count>1&&o.opacity&&(h.regl._refresh(),o.fill&&o.triangles&&o.triangles.length>2&&h.shaders.fill(o),o.thickness&&(o.scale[0]*o.viewport.width>m.precisionThreshold||o.scale[1]*o.viewport.height>m.precisionThreshold||"rect"===o.join||!o.join&&(o.thickness<=2||o.count>=m.maxPoints)?h.shaders.rect(o):h.shaders.miter(o)))}),this},m.prototype.update=function(h){var w=this;if(h){null!=h.length?"number"==typeof h[0]&&(h=[{positions:h}]):Array.isArray(h)||(h=[h]);var o=this.regl,v=this.gl;if(h.forEach(function(S,T){var n=w.passes[T];if(void 0!==S){if(null===S)return void(w.passes[T]=null);if("number"==typeof S[0]&&(S={positions:S}),S=C(S,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),n||(w.passes[T]=n={id:T,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:o.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:o.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:o.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:o.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},S=i({},m.defaults,S)),null!=S.thickness&&(n.thickness=parseFloat(S.thickness)),null!=S.opacity&&(n.opacity=parseFloat(S.opacity)),null!=S.miterLimit&&(n.miterLimit=parseFloat(S.miterLimit)),null!=S.overlay&&(n.overlay=!!S.overlay,T<m.maxLines&&(n.depth=2*(m.maxLines-1-T%m.maxLines)/m.maxLines-1)),null!=S.join&&(n.join=S.join),null!=S.hole&&(n.hole=S.hole),null!=S.fill&&(n.fill=S.fill?A(S.fill,"uint8"):null),null!=S.viewport&&(n.viewport=c(S.viewport)),n.viewport||(n.viewport=c([v.drawingBufferWidth,v.drawingBufferHeight])),null!=S.close&&(n.close=S.close),null===S.positions&&(S.positions=[]),S.positions){var E,d;if(S.positions.x&&S.positions.y){var F=S.positions.x,D=S.positions.y;d=n.count=Math.max(F.length,D.length),E=new Float64Array(2*d);for(var N=0;N<d;N++)E[2*N]=F[N],E[2*N+1]=D[N]}else E=u(S.positions,"float64"),d=n.count=Math.floor(E.length/2);var k=n.bounds=g(E,2);if(n.fill){for(var O=[],B={},z=0,U=0,H=0,J=n.count;U<J;U++){var nt=E[2*U],it=E[2*U+1];isNaN(nt)||isNaN(it)||null==nt||null==it?(nt=E[2*z],it=E[2*z+1],B[U]=z):z=U,O[H++]=nt,O[H++]=it}if(S.splitNull){n.count-1 in B||(B[n.count]=n.count-1);var ut=Object.keys(B).map(Number).sort(function(Dt,Ft){return Dt-Ft}),Q=[],j=0,Z=null!=n.hole?n.hole[0]:null;if(null!=Z){var G=f(ut,function(Dt){return Dt>=Z});(ut=ut.slice(0,G)).push(Z)}for(var K=function(Dt){var Ft=O.slice(2*j,2*ut[Dt]).concat(Z?O.slice(2*Z):[]),Nt=(n.hole||[]).map(function(wt){return wt-Z+(ut[Dt]-j)}),Rt=y(Ft,Nt);Rt=Rt.map(function(wt){return wt+j+(wt+j<ut[Dt]?0:Z-ut[Dt])}),Q.push.apply(Q,Rt),j=ut[Dt]+1},at=0;at<ut.length;at++)K(at);for(var $=0,X=Q.length;$<X;$++)null!=B[Q[$]]&&(Q[$]=B[Q[$]]);n.triangles=Q}else{for(var rt=y(O,n.hole||[]),et=0,st=rt.length;et<st;et++)null!=B[rt[et]]&&(rt[et]=B[rt[et]]);n.triangles=rt}}var dt=new Float64Array(E);e(dt,2,k);var bt=new Float64Array(2*d+6);n.close?E[0]===E[2*d-2]&&E[1]===E[2*d-1]?(bt[0]=dt[2*d-4],bt[1]=dt[2*d-3]):(bt[0]=dt[2*d-2],bt[1]=dt[2*d-1]):(bt[0]=dt[0],bt[1]=dt[1]),bt.set(dt,2),n.close?E[0]===E[2*d-2]&&E[1]===E[2*d-1]?(bt[2*d+2]=dt[2],bt[2*d+3]=dt[3],n.count-=1):(bt[2*d+2]=dt[0],bt[2*d+3]=dt[1],bt[2*d+4]=dt[2],bt[2*d+5]=dt[3]):(bt[2*d+2]=dt[2*d-2],bt[2*d+3]=dt[2*d-1],bt[2*d+4]=dt[2*d-2],bt[2*d+5]=dt[2*d-1]);var gt=l(bt);n.positionBuffer(gt);var Lt=a(bt,gt);n.positionFractBuffer(Lt)}if(S.range?n.range=S.range:n.range||(n.range=n.bounds),(S.range||S.positions)&&n.count){var It=n.bounds,At=n.range[2]-n.range[0],Gt=n.range[3]-n.range[1];n.scale=[(It[2]-It[0])/At,(It[3]-It[1])/Gt],n.translate=[-n.range[0]/At+It[0]/At||0,-n.range[1]/Gt+It[1]/Gt||0],n.scaleFract=a(n.scale),n.translateFract=a(n.translate)}if(S.dashes){var Pt,Wt=0;if(!S.dashes||S.dashes.length<2)Wt=1,Pt=new Uint8Array([255,255,255,255,255,255,255,255]);else{Wt=0;for(var Vt=0;Vt<S.dashes.length;++Vt)Wt+=S.dashes[Vt];Pt=new Uint8Array(Wt*m.dashMult);for(var te=0,Qt=255,Bt=0;Bt<2;Bt++)for(var Ot=0;Ot<S.dashes.length;++Ot){for(var qt=0,ie=S.dashes[Ot]*m.dashMult*.5;qt<ie;++qt)Pt[te++]=Qt;Qt^=255}}n.dashLength=Wt,n.dashTexture({channels:1,data:Pt,width:Pt.length,height:1,mag:"linear",min:"linear"},0,0)}if(S.color){var oe=n.count,pe=S.color;pe||(pe="transparent");var de=new Uint8Array(4*oe+4);if(Array.isArray(pe)&&"number"!=typeof pe[0]){for(var Et=0;Et<oe;Et++){var St=A(pe[Et],"uint8");de.set(St,4*Et)}de.set(A(pe[0],"uint8"),4*oe)}else for(var Fe=A(pe,"uint8"),Kt=0;Kt<oe+1;Kt++)de.set(Fe,4*Kt);n.colorBuffer({usage:"dynamic",type:"uint8",data:de})}}}),h.length<this.passes.length){for(var M=h.length;M<this.passes.length;M++){var b=this.passes[M];!b||(b.colorBuffer.destroy(),b.positionBuffer.destroy(),b.dashTexture.destroy())}this.passes.length=h.length}for(var L=[],x=0;x<this.passes.length;x++)null!==this.passes[x]&&L.push(this.passes[x]);return this.passes=L,this}},m.prototype.destroy=function(){return this.passes.forEach(function(h){h.colorBuffer.destroy(),h.positionBuffer.destroy(),h.dashTexture.destroy()}),this.passes.length=0,this}},11870:function(q,W,t){"use strict";function g(n,E){return function C(n){if(Array.isArray(n))return n}(n)||function A(n,E){var d=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=d){var F,D,N,k,O=[],B=!0,z=!1;try{if(N=(d=d.call(n)).next,0===E){if(Object(d)!==d)return;B=!1}else for(;!(B=(F=N.call(d)).done)&&(O.push(F.value),O.length!==E);B=!0);}catch(U){z=!0,D=U}finally{try{if(!B&&null!=d.return&&(k=d.return(),Object(k)!==k))return}finally{if(z)throw D}}return O}}(n,E)||y(n,E)||function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(n){return function P(n){if(Array.isArray(n))return e(n)}(n)||function u(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||y(n)||function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(n,E){if(n){if("string"==typeof n)return e(n,E);var d=Object.prototype.toString.call(n).slice(8,-1);if("Object"===d&&n.constructor&&(d=n.constructor.name),"Map"===d||"Set"===d)return Array.from(n);if("Arguments"===d||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return e(n,E)}}function e(n,E){(null==E||E>n.length)&&(E=n.length);for(var d=0,F=new Array(E);d<E;d++)F[d]=n[d];return F}var a=t(25075),s=t(21527),c=t(6475),f=t(88294),m=t(56131),h=t(56068),w=t(71299),p=t(93447),o=t(30120),v=t(62683),M=t(57060),b=t(18863),L=x;function x(n,E){var d=this;if(!(this instanceof x))return new x(n,E);"function"==typeof n?(E||(E={}),E.regl=n):(E=n,n=null),E&&E.length&&(E.positions=E);var D,F=(n=E.regl)._gl,N=[],U=255;this.tooManyColors=v,D=n.texture({data:new Uint8Array(4*U),width:U,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),m(this,{regl:n,gl:F,groups:[],markerCache:[null],markerTextures:[null],palette:N,paletteIds:{},paletteTexture:D,maxColors:U,maxSize:100,canvas:F.canvas}),this.update(E);var J={uniforms:{constPointSize:!!E.constPointSize,opacity:n.prop("opacity"),paletteSize:function(Q,j){return[d.tooManyColors?0:U,D.height]},pixelRatio:n.context("pixelRatio"),scale:n.prop("scale"),scaleFract:n.prop("scaleFract"),translate:n.prop("translate"),translateFract:n.prop("translateFract"),markerTexture:n.prop("markerTexture"),paletteTexture:D},attributes:{x:function(Q,j){return j.xAttr||{buffer:j.positionBuffer,stride:8,offset:0}},y:function(Q,j){return j.yAttr||{buffer:j.positionBuffer,stride:8,offset:4}},xFract:function(Q,j){return j.xAttr?{constant:[0,0]}:{buffer:j.positionFractBuffer,stride:8,offset:0}},yFract:function(Q,j){return j.yAttr?{constant:[0,0]}:{buffer:j.positionFractBuffer,stride:8,offset:4}},size:function(Q,j){return j.size.length?{buffer:j.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*j.size/d.maxSize)]}},borderSize:function(Q,j){return j.borderSize.length?{buffer:j.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*j.borderSize/d.maxSize)]}},colorId:function(Q,j){return j.color.length?{buffer:j.colorBuffer,stride:d.tooManyColors?8:4,offset:0}:{constant:d.tooManyColors?N.slice(4*j.color,4*j.color+4):[j.color]}},borderColorId:function(Q,j){return j.borderColor.length?{buffer:j.colorBuffer,stride:d.tooManyColors?8:4,offset:d.tooManyColors?4:2}:{constant:d.tooManyColors?N.slice(4*j.borderColor,4*j.borderColor+4):[j.borderColor]}},isActive:function(Q,j){return!0===j.activation?{constant:[1]}:j.activation?j.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:n.prop("viewport")},viewport:n.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:n.prop("elements"),count:n.prop("count"),offset:n.prop("offset"),primitive:"points"},nt=m({},J);nt.frag=h(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),nt.vert=h(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=n(nt);var it=m({},J);it.frag=h(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),it.vert=h(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),v&&(it.frag=it.frag.replace("smoothstep","smoothStep"),nt.frag=nt.frag.replace("smoothstep","smoothStep")),this.drawCircle=n(it)}x.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},x.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},x.prototype.draw=function(){for(var n=this,E=arguments.length,d=new Array(E),F=0;F<E;F++)d[F]=arguments[F];var D=this.groups;if(1===d.length&&Array.isArray(d[0])&&(null===d[0][0]||Array.isArray(d[0][0]))&&(d=d[0]),this.regl._refresh(),d.length)for(var N=0;N<d.length;N++)this.drawItem(N,d[N]);else D.forEach(function(k,O){n.drawItem(O)});return this},x.prototype.drawItem=function(n,E){var d=this.groups,F=d[n];if("number"==typeof E&&(n=E,F=d[E],E=null),F&&F.count&&F.opacity){F.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,F,E));for(var D=[],N=1;N<F.activation.length;N++)!F.activation[N]||!0!==F.activation[N]&&!F.activation[N].data.length||D.push.apply(D,i(this.getMarkerDrawOptions(N,F,E)));D.length&&this.drawMarker(D)}},x.prototype.getMarkerDrawOptions=function(n,E,d){var F=E.range,D=E.tree,N=E.viewport,k=E.activation,O=E.selectionBuffer,B=E.count;if(!D)return d?[m({},E,{markerTexture:this.markerTextures[n],activation:k[n],count:d.length,elements:d,offset:0})]:[m({},E,{markerTexture:this.markerTextures[n],activation:k[n],offset:0})];var U=[],H=D.range(F,{lod:!0,px:[(F[2]-F[0])/N.width,(F[3]-F[1])/N.height]});if(d){for(var nt=k[n].data,it=new Uint8Array(B),ut=0;ut<d.length;ut++){var Q=d[ut];it[Q]=nt?nt[Q]:1}O.subdata(it)}for(var j=H.length;j--;){var Z=g(H[j],2),G=Z[0];U.push(m({},E,{markerTexture:this.markerTextures[n],activation:d?O:k[n],offset:G,count:Z[1]-G}))}return U},x.prototype.update=function(){for(var n=this,E=arguments.length,d=new Array(E),F=0;F<E;F++)d[F]=arguments[F];if(d.length){1===d.length&&Array.isArray(d[0])&&(d=d[0]);var D=this.groups,N=this.gl,k=this.regl,O=this.maxSize,B=this.maxColors,z=this.palette;this.groups=D=d.map(function(U,H){var J=D[H];if(void 0===U)return J;null===U?U={positions:null}:"function"==typeof U?U={ondraw:U}:"number"==typeof U[0]&&(U={positions:U}),null===(U=w(U,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(U.positions=[]),null!=U.tooManyColors&&(n.tooManyColors=U.tooManyColors),J||(D[H]=J={id:H,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:k.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:k.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:k.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:k.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:k.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},U=m({},x.defaults,U)),U.positions&&!("marker"in U)&&(U.marker=J.marker,delete J.marker),U.marker&&!("positions"in U)&&(U.positions=J.positions,delete J.positions);var nt=0,it=0;if(p(J,U,[{snap:!0,size:function(xt,At){return null==xt&&(xt=x.defaults.size),nt+=xt&&xt.length?1:0,xt},borderSize:function(xt,At){return null==xt&&(xt=x.defaults.borderSize),nt+=xt&&xt.length?1:0,xt},opacity:parseFloat,color:function(xt,At){return null==xt&&(xt=x.defaults.color),xt=n.updateColor(xt),it++,xt},borderColor:function(xt,At){return null==xt&&(xt=x.defaults.borderColor),xt=n.updateColor(xt),it++,xt},bounds:function(xt,At,Gt){return"range"in Gt||(Gt.range=null),xt},positions:function(xt,At,Gt){var Wt=At.snap,Pt=At.positionBuffer,Vt=At.positionFractBuffer,te=At.selectionBuffer;if(xt.x||xt.y)return At.xAttr=xt.x.length?{buffer:k.buffer(xt.x),offset:0,stride:4,count:xt.x.length}:{buffer:xt.x.buffer,offset:4*xt.x.offset||0,stride:4*(xt.x.stride||1),count:xt.x.count},At.yAttr=xt.y.length?{buffer:k.buffer(xt.y),offset:0,stride:4,count:xt.y.length}:{buffer:xt.y.buffer,offset:4*xt.y.offset||0,stride:4*(xt.y.stride||1),count:xt.y.count},At.count=Math.max(At.xAttr.count,At.yAttr.count),xt;xt=o(xt,"float64");var Qt=At.count=Math.floor(xt.length/2),Bt=At.bounds=Qt?s(xt,2):null;if(!Gt.range&&!At.range&&(delete At.range,Gt.range=Bt),!Gt.marker&&!At.marker&&(delete At.marker,Gt.marker=null),Wt&&(!0===Wt||Qt>Wt)?At.tree=f(xt,{bounds:Bt}):Wt&&Wt.length&&(At.tree=Wt),At.tree){var Ot={primitive:"points",usage:"static",data:At.tree,type:"uint32"};At.elements?At.elements(Ot):At.elements=k.elements(Ot)}var qt=M.float32(xt);return Pt({data:qt,usage:"dynamic"}),Vt({data:M.fract32(xt,qt),usage:"dynamic"}),te({data:new Uint8Array(Qt),type:"uint8",usage:"stream"}),xt}},{marker:function(xt,At,Gt){var Wt=At.activation;if(Wt.forEach(function(ie){return ie&&ie.destroy&&ie.destroy()}),Wt.length=0,xt&&"number"!=typeof xt[0]){for(var Vt=[],te=0,Qt=Math.min(xt.length,At.count);te<Qt;te++){var Bt=n.addMarker(xt[te]);Vt[Bt]||(Vt[Bt]=new Uint8Array(At.count)),Vt[Bt][te]=1}for(var Ot=0;Ot<Vt.length;Ot++)if(Vt[Ot]){var qt={data:Vt[Ot],type:"uint8",usage:"static"};Wt[Ot]?Wt[Ot](qt):Wt[Ot]=k.buffer(qt),Wt[Ot].data=Vt[Ot]}}else Wt[n.addMarker(xt)]=!0;return xt},range:function(xt,At,Gt){var Wt=At.bounds;if(Wt)return xt||(xt=Wt),At.scale=[1/(xt[2]-xt[0]),1/(xt[3]-xt[1])],At.translate=[-xt[0],-xt[1]],At.scaleFract=M.fract(At.scale),At.translateFract=M.fract(At.translate),xt},viewport:function(xt){return b(xt||[N.drawingBufferWidth,N.drawingBufferHeight])}}]),nt){var Q=J.count,j=J.size,Z=J.borderSize,G=J.sizeBuffer,K=new Uint8Array(2*Q);if(j.length||Z.length)for(var at=0;at<Q;at++)K[2*at]=Math.round(255*(null==j[at]?j:j[at])/O),K[2*at+1]=Math.round(255*(null==Z[at]?Z:Z[at])/O);G({data:K,usage:"dynamic"})}if(it){var dt,X=J.count,rt=J.color,et=J.borderColor,st=J.colorBuffer;if(n.tooManyColors){if(rt.length||et.length){dt=new Uint8Array(8*X);for(var bt=0;bt<X;bt++){var gt=rt[bt];dt[8*bt]=z[4*gt],dt[8*bt+1]=z[4*gt+1],dt[8*bt+2]=z[4*gt+2],dt[8*bt+3]=z[4*gt+3];var Lt=et[bt];dt[8*bt+4]=z[4*Lt],dt[8*bt+5]=z[4*Lt+1],dt[8*bt+6]=z[4*Lt+2],dt[8*bt+7]=z[4*Lt+3]}}}else if(rt.length||et.length){dt=new Uint8Array(4*X+2);for(var It=0;It<X;It++)null!=rt[It]&&(dt[4*It]=rt[It]%B,dt[4*It+1]=Math.floor(rt[It]/B)),null!=et[It]&&(dt[4*It+2]=et[It]%B,dt[4*It+3]=Math.floor(et[It]/B))}st({data:dt||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return J})}},x.prototype.addMarker=function(n){var N,E=this.markerTextures,d=this.regl,F=this.markerCache,D=null==n?0:F.indexOf(n);if(D>=0)return D;if(n instanceof Uint8Array||n instanceof Uint8ClampedArray)N=n;else{N=new Uint8Array(n.length);for(var k=0,O=n.length;k<O;k++)N[k]=255*n[k]}var B=Math.floor(Math.sqrt(N.length));return D=E.length,F.push(n),E.push(d.texture({channels:1,data:N,radius:B,mag:"linear",min:"linear"})),D},x.prototype.updateColor=function(n){var E=this.paletteIds,d=this.palette,F=this.maxColors;Array.isArray(n)||(n=[n]);var D=[];if("number"==typeof n[0]){var N=[];if(Array.isArray(n))for(var k=0;k<n.length;k+=4)N.push(n.slice(k,k+4));else for(var O=0;O<n.length;O+=4)N.push(n.subarray(O,O+4));n=N}for(var B=0;B<n.length;B++){var z=n[B];z=a(z,"uint8");var U=c(z,!1);if(null==E[U]){var H=d.length;E[U]=Math.floor(H/4),d[H]=z[0],d[H+1]=z[1],d[H+2]=z[2],d[H+3]=z[3]}D[B]=E[U]}return!this.tooManyColors&&d.length>4*F&&(this.tooManyColors=!0),this.updatePalette(d),1===D.length?D[0]:D},x.prototype.updatePalette=function(n){if(!this.tooManyColors){var E=this.maxColors,d=this.paletteTexture,F=Math.ceil(.25*n.length/E);if(F>1)for(var D=.25*(n=n.slice()).length%E;D<F*E;D++)n.push(0,0,0,0);d.height<F&&d.resize(E,F),d.subimage({width:Math.min(.25*n.length,E),height:F,data:n},0,0)}},x.prototype.destroy=function(){return this.groups.forEach(function(n){n.sizeBuffer.destroy(),n.positionBuffer.destroy(),n.positionFractBuffer.destroy(),n.colorBuffer.destroy(),n.activation.forEach(function(E){return E&&E.destroy&&E.destroy()}),n.selectionBuffer.destroy(),n.elements&&n.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(n){return n&&n.destroy&&n.destroy()}),this};var S=t(56131);q.exports=function(E,d){var F=new L(E,d),D=F.render.bind(F);return S(D,{render:D,update:F.update.bind(F),draw:F.draw.bind(F),destroy:F.destroy.bind(F),regl:F.regl,gl:F.gl,canvas:F.gl.canvas,groups:F.groups,markers:F.markerCache,palette:F.palette}),D}},60487:function(q,W,t){"use strict";var A=t(11870),g=t(71299),i=t(21527),P=t(5877),C=t(57471),u=t(18863),y=t(30120);function e(s,c){if(!(this instanceof e))return new e(s,c);this.traces=[],this.passes={},this.regl=s,this.scatter=A(s),this.canvas=this.scatter.canvas}function r(s,c,f){return(null!=s.id?s.id:s)<<16|(255&c)<<8|255&f}function l(s,c,f){var h,p,o,M,L=s[c],x=s[f];return L.length>2?(h=L[1],p=L[3]):L.length?(h=L[0],p=L[1]):(h=L.y,p=L.y+L.height),x.length>2?(o=x[0],M=x[2]):x.length?(o=x[0],M=x[1]):(o=x.x,M=x.x+x.width),[o,h,M,p]}function a(s){if("number"==typeof s)return[s,s,s,s];if(2===s.length)return[s[0],s[1],s[0],s[1]];var c=u(s);return[c.x,c.y,c.x+c.width,c.y+c.height]}q.exports=e,e.prototype.render=function(){for(var c,s=this,f=[],m=arguments.length;m--;)f[m]=arguments[m];return f.length&&(c=this).update.apply(c,f),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=P(function(){s.draw(),s.dirty=!0,s.planned=null})):(this.draw(),this.dirty=!0,P(function(){s.dirty=!1})),this)},e.prototype.update=function(){for(var s,c=[],f=arguments.length;f--;)c[f]=arguments[f];if(c.length){for(var m=0;m<c.length;m++)this.updateItem(m,c[m]);this.traces=this.traces.filter(Boolean);for(var h=[],w=0,p=0;p<this.traces.length;p++){for(var o=this.traces[p],v=this.traces[p].passes,M=0;M<v.length;M++)h.push(this.passes[v[M]]);o.passOffset=w,w+=o.passes.length}return(s=this.scatter).update.apply(s,h),this}},e.prototype.updateItem=function(s,c){var m=this.regl;if(null===c)return this.traces[s]=null,this;if(!c)return this;var o,h=g(c,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),w=this.traces[s]||(this.traces[s]={id:s,buffer:m.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:u([m._gl.drawingBufferWidth,m._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=h.color&&(w.color=h.color),null!=h.size&&(w.size=h.size),null!=h.marker&&(w.marker=h.marker),null!=h.borderColor&&(w.borderColor=h.borderColor),null!=h.borderSize&&(w.borderSize=h.borderSize),null!=h.opacity&&(w.opacity=h.opacity),h.viewport&&(w.viewport=u(h.viewport)),null!=h.diagonal&&(w.diagonal=h.diagonal),null!=h.upper&&(w.upper=h.upper),null!=h.lower&&(w.lower=h.lower),h.data){w.buffer(y(h.data)),w.columns=h.data.length,w.count=h.data[0].length,w.bounds=[];for(var p=0;p<w.columns;p++)w.bounds[p]=i(h.data[p],1)}h.range&&(w.range=h.range,o=w.range&&"number"!=typeof w.range[0]),h.domain&&(w.domain=h.domain);var v=!1;null!=h.padding&&(Array.isArray(h.padding)&&h.padding.length===w.columns&&"number"==typeof h.padding[h.padding.length-1]?(w.padding=h.padding.map(a),v=!0):w.padding=a(h.padding));var M=w.columns,b=w.count,L=w.viewport.width,x=w.viewport.height,S=w.viewport.x,T=w.viewport.y,n=L/M,E=x/M;w.passes=[];for(var d=0;d<M;d++)for(var F=0;F<M;F++)if((w.diagonal||F!==d)&&(w.upper||!(d>F))&&(w.lower||!(d<F))){var D=r(w.id,d,F),N=this.passes[D]||(this.passes[D]={});if(h.data&&(N.positions=h.transpose?{x:{buffer:w.buffer,offset:F,count:b,stride:M},y:{buffer:w.buffer,offset:d,count:b,stride:M}}:{x:{buffer:w.buffer,offset:F*b,count:b},y:{buffer:w.buffer,offset:d*b,count:b}},N.bounds=l(w.bounds,d,F)),h.domain||h.viewport||h.data){var k=v?l(w.padding,d,F):w.padding;if(w.domain){var O=l(w.domain,d,F);N.viewport=[S+O[0]*L+k[0],T+O[1]*x+k[1],S+O[2]*L-k[2],T+O[3]*x-k[3]]}else N.viewport=[S+F*n+n*k[0],T+d*E+E*k[1],S+(F+1)*n-n*k[2],T+(d+1)*E-E*k[3]]}h.color&&(N.color=w.color),h.size&&(N.size=w.size),h.marker&&(N.marker=w.marker),h.borderSize&&(N.borderSize=w.borderSize),h.borderColor&&(N.borderColor=w.borderColor),h.opacity&&(N.opacity=w.opacity),h.range&&(N.range=o?l(w.range,d,F):w.range||N.bounds),w.passes.push(D)}return this},e.prototype.draw=function(){for(var s,c=[],f=arguments.length;f--;)c[f]=arguments[f];if(c.length){for(var m=[],h=0;h<c.length;h++)if("number"==typeof c[h]){var w=this.traces[c[h]],o=w.passOffset;m.push.apply(m,C(o,o+w.passes.length))}else if(c[h].length){var v=c[h],M=this.traces[h],b=M.passes,L=M.passOffset;b=b.map(function(x,S){m[L+S]=v})}(s=this.scatter).draw.apply(s,m)}else this.scatter.draw();return this},e.prototype.destroy=function(){return this.traces.forEach(function(s){s.buffer&&s.buffer.destroy&&s.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},98580:function(q){var t;t=function(){function W(ue,Ne){this.id=st++,this.type=ue,this.data=Ne}function t(ue){if(0===ue.length)return[];var Ne=ue.charAt(0),Ye=ue.charAt(ue.length-1);if(1<ue.length&&Ne===Ye&&('"'===Ne||"'"===Ne))return['"'+ue.substr(1,ue.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Ne=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(ue))return t(ue.substr(0,Ne.index)).concat(t(Ne[1])).concat(t(ue.substr(Ne.index+Ne[0].length)));if(1===(Ne=ue.split(".")).length)return['"'+ue.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(ue=[],Ye=0;Ye<Ne.length;++Ye)ue=ue.concat(t(Ne[Ye]));return ue}function A(ue){return"["+t(ue).join("][")+"]"}function u(ue){return"string"==typeof ue?ue.split():ue}function y(ue){return"string"==typeof ue?document.querySelector(ue):ue}function e(ue){var Ye,xr,rr,ce,Ne=ue||{};ue={};var re=[],ve=[],be="undefined"==typeof window?1:window.devicePixelRatio,Ae=!1,Te={},Re=function(Xe){},Ie=function(){};if("string"==typeof Ne?Ye=document.querySelector(Ne):"object"==typeof Ne&&("string"==typeof Ne.nodeName&&"function"==typeof Ne.appendChild&&"function"==typeof Ne.getBoundingClientRect?Ye=Ne:"function"==typeof Ne.drawArrays||"function"==typeof Ne.drawElements?rr=(ce=Ne).canvas:("gl"in Ne?ce=Ne.gl:"canvas"in Ne?rr=y(Ne.canvas):"container"in Ne&&(xr=y(Ne.container)),"attributes"in Ne&&(ue=Ne.attributes),"extensions"in Ne&&(re=u(Ne.extensions)),"optionalExtensions"in Ne&&(ve=u(Ne.optionalExtensions)),"onDone"in Ne&&(Re=Ne.onDone),"profile"in Ne&&(Ae=!!Ne.profile),"pixelRatio"in Ne&&(be=+Ne.pixelRatio),"cachedCode"in Ne&&(Te=Ne.cachedCode))),Ye&&("canvas"===Ye.nodeName.toLowerCase()?rr=Ye:xr=Ye),!ce){if(!rr){if(!(Ye=function P(ue,Ne,Ye){function xr(){var re=window.innerWidth,ve=window.innerHeight;ue!==document.body&&(re=(ve=rr.getBoundingClientRect()).right-ve.left,ve=ve.bottom-ve.top),rr.width=Ye*re,rr.height=Ye*ve}var ce,rr=document.createElement("canvas");return et(rr.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),ue.appendChild(rr),ue===document.body&&(rr.style.position="absolute",et(ue.style,{margin:0,padding:0})),ue!==document.body&&"function"==typeof ResizeObserver?(ce=new ResizeObserver(function(){setTimeout(xr)})).observe(ue):window.addEventListener("resize",xr,!1),xr(),{canvas:rr,onDestroy:function(){ce?ce.disconnect():window.removeEventListener("resize",xr),ue.removeChild(rr)}}}(xr||document.body,0,be)))return null;rr=Ye.canvas,Ie=Ye.onDestroy}void 0===ue.premultipliedAlpha&&(ue.premultipliedAlpha=!0),ce=function C(ue,Ne){function Ye(xr){try{return ue.getContext(xr,Ne)}catch(rr){return null}}return Ye("webgl")||Ye("experimental-webgl")||Ye("webgl-experimental")}(rr,ue)}return ce?{gl:ce,canvas:rr,container:xr,extensions:re,optionalExtensions:ve,pixelRatio:be,profile:Ae,cachedCode:Te,onDone:Re,onDestroy:Ie}:(Ie(),Re("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function l(ue,Ne){for(var Ye=Array(ue),xr=0;xr<ue;++xr)Ye[xr]=Ne(xr);return Ye}function a(ue){var Ne,Ye;return Ne=(65535<ue)<<4,Ne|=Ye=(255<(ue>>>=Ne))<<3,(Ne|=Ye=(15<(ue>>>=Ye))<<2)|(Ye=(3<(ue>>>=Ye))<<1)|ue>>>Ye>>1}function s(){function ue(xr){t:{for(var rr=16;268435456>=rr;rr*=16)if(xr<=rr){xr=rr;break t}xr=0}return 0<(rr=Ye[a(xr)>>2]).length?rr.pop():new ArrayBuffer(xr)}function Ne(xr){Ye[a(xr.byteLength)>>2].push(xr)}var Ye=l(8,function(){return[]});return{alloc:ue,free:Ne,allocType:function(xr,rr){var ce=null;switch(xr){case 5120:ce=new Int8Array(ue(rr),0,rr);break;case 5121:ce=new Uint8Array(ue(rr),0,rr);break;case 5122:ce=new Int16Array(ue(2*rr),0,rr);break;case 5123:ce=new Uint16Array(ue(2*rr),0,rr);break;case 5124:ce=new Int32Array(ue(4*rr),0,rr);break;case 5125:ce=new Uint32Array(ue(4*rr),0,rr);break;case 5126:ce=new Float32Array(ue(4*rr),0,rr);break;default:return null}return ce.length!==rr?ce.subarray(0,rr):ce},freeType:function(xr){Ne(xr.buffer)}}}function c(ue){return!!ue&&"object"==typeof ue&&Array.isArray(ue.shape)&&Array.isArray(ue.stride)&&"number"==typeof ue.offset&&ue.shape.length===ue.stride.length&&(Array.isArray(ue.data)||Mt(ue.data))}function f(ue,Ne,Ye,xr,rr,ce){for(var re=0;re<Ne;++re)for(var ve=ue[re],be=0;be<Ye;++be)for(var Ae=ve[be],Te=0;Te<xr;++Te)rr[ce++]=Ae[Te]}function m(ue,Ne,Ye,xr,rr){for(var ce=1,re=Ye+1;re<Ne.length;++re)ce*=Ne[re];var ve=Ne[Ye];if(Ne.length-Ye==4){var be=Ne[Ye+1],Ae=Ne[Ye+2];for(Ne=Ne[Ye+3],re=0;re<ve;++re)f(ue[re],be,Ae,Ne,xr,rr),rr+=ce}else for(re=0;re<ve;++re)m(ue[re],Ne,Ye+1,xr,rr),rr+=ce}function h(ue){return 0|Gt[Object.prototype.toString.call(ue)]}function w(ue,Ne){for(var Ye=0;Ye<Ne.length;++Ye)ue[Ye]=Ne[Ye]}function p(ue,Ne,Ye,xr,rr,ce,re){for(var ve=0,be=0;be<Ye;++be)for(var Ae=0;Ae<xr;++Ae)ue[ve++]=Ne[rr*be+ce*Ae+re]}function M(ue){for(var Ne=Lt.allocType(5123,ue.length),Ye=0;Ye<ue.length;++Ye)if(isNaN(ue[Ye]))Ne[Ye]=65535;else if(ue[Ye]===1/0)Ne[Ye]=31744;else if(ue[Ye]===-1/0)Ne[Ye]=64512;else{Ot[0]=ue[Ye];var xr=(ce=qt[0])>>>31<<15,rr=(ce<<1>>>24)-127,ce=ce>>13&1023;Ne[Ye]=-24>rr?xr:-14>rr?xr+(ce+1024>>-14-rr):15<rr?xr+31744:xr+(rr+15<<10)+ce}return Ne}function b(ue){return Array.isArray(ue)||Mt(ue)}function L(ue){return"[object "+ue+"]"}function x(ue){return Array.isArray(ue)&&(0===ue.length||"number"==typeof ue[0])}function S(ue){return!(!Array.isArray(ue)||0===ue.length||!b(ue[0]))}function T(ue){return Object.prototype.toString.call(ue)}function n(ue){if(!ue)return!1;var Ne=T(ue);return 0<=Ft.indexOf(Ne)||x(ue)||S(ue)||c(ue)}function E(ue,Ne){36193===ue.type?(ue.data=M(Ne),Lt.freeType(Ne)):ue.data=Ne}function d(ue,Ne,Ye,xr,rr,ce){if(ue=void 0!==Rt[ue]?Rt[ue]:pe[ue]*Nt[Ne],ce&&(ue*=6),rr){for(xr=0;1<=Ye;)xr+=ue*Ye*Ye,Ye/=2;return xr}return ue*Ye*xr}function N(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function B(ue,Ne,Ye,xr,rr,ce,re){function ve(Ae){var Te;Te=null===Ne.next?5121:Ne.next.colorAttachments[0].texture._texture.type;var Re=0,Ie=0,Xe=xr.framebufferWidth,ar=xr.framebufferHeight,nr=null;return Mt(Ae)?nr=Ae:Ae&&(Re=0|Ae.x,Ie=0|Ae.y,Xe=0|(Ae.width||xr.framebufferWidth-Re),ar=0|(Ae.height||xr.framebufferHeight-Ie),nr=Ae.data||null),Ye(),Ae=Xe*ar*4,nr||(5121===Te?nr=new Uint8Array(Ae):5126===Te&&(nr=nr||new Float32Array(Ae))),ue.pixelStorei(3333,4),ue.readPixels(Re,Ie,Xe,ar,6408,Te,nr),nr}return function(Ae){return Ae&&"framebuffer"in Ae?function be(Ae){var Te;return Ne.setFBO({framebuffer:Ae.framebuffer},function(){Te=ve(Ae)}),Te}(Ae):ve(Ae)}}function J(ue,Ne){return ue>>>Ne|ue<<32-Ne}function nt(ue,Ne){var Ye=(65535&ue)+(65535&Ne);return(ue>>16)+(Ne>>16)+(Ye>>16)<<16|65535&Ye}function it(ue){return Array.prototype.slice.call(ue)}function ut(ue){return it(ue).join("")}function Q(ue){function Ne(){var Te=[],Re=[];return et(function(){Te.push.apply(Te,it(arguments))},{def:function(){var Ie="v"+rr++;return Re.push(Ie),0<arguments.length&&(Te.push(Ie,"="),Te.push.apply(Te,it(arguments)),Te.push(";")),Ie},toString:function(){return ut([0<Re.length?"var "+Re.join(",")+";":"",ut(Te)])}})}function Ye(){function Te(nr,cr){Ie(nr,cr,"=",Re.def(nr,cr),";")}var Re=Ne(),Ie=Ne(),Xe=Re.toString,ar=Ie.toString;return et(function(){Re.apply(Re,it(arguments))},{def:Re.def,entry:Re,exit:Ie,save:Te,set:function(nr,cr,Ut){Te(nr,cr),Re(nr,cr,"=",Ut,";")},toString:function(){return Xe()+ar()}})}var xr=ue&&ue.cache,rr=0,ce=[],re=[],ve=[],be=Ne(),Ae={};return{global:be,link:function(Te,Re){var Ie=Re&&Re.stable;if(!Ie)for(var Xe=0;Xe<re.length;++Xe)if(re[Xe]===Te&&!ve[Xe])return ce[Xe];return Xe="g"+rr++,ce.push(Xe),re.push(Te),ve.push(Ie),Xe},block:Ne,proc:function(Te,Re){function Ie(){var cr="a"+Xe.length;return Xe.push(cr),cr}var Xe=[];Re=Re||0;for(var ar=0;ar<Re;++ar)Ie();var nr=(ar=Ye()).toString;return Ae[Te]=et(ar,{arg:Ie,toString:function(){return ut(["function(",Xe.join(),"){",nr(),"}"])}})},scope:Ye,cond:function(){var Te=ut(arguments),Re=Ye(),Ie=Ye(),Xe=Re.toString,ar=Ie.toString;return et(Re,{then:function(){return Re.apply(Re,it(arguments)),this},else:function(){return Ie.apply(Ie,it(arguments)),this},toString:function(){var nr=ar();return nr&&(nr="else{"+nr+"}"),ut(["if(",Te,"){",Xe(),"}",nr])}})},compile:function(){var Te=['"use strict";',be,"return {"];Object.keys(Ae).forEach(function(Xe){Te.push('"',Xe,'":',Ae[Xe].toString(),",")}),Te.push("}");var Ie,Re=ut(Te).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return xr&&(Ie=function U(ue){for(var Ye,Ne="",xr=0;xr<ue.length;xr++)Ye=ue.charCodeAt(xr),Ne+="0123456789abcdef".charAt(Ye>>>4&15)+"0123456789abcdef".charAt(15&Ye);return Ne}(function z(ue){for(var Ne=Array(ue.length>>2),xr=0;xr<Ne.length;xr++)Ne[xr]=0;for(xr=0;xr<8*ue.length;xr+=8)Ne[xr>>5]|=(255&ue.charCodeAt(xr/8))<<24-xr%32;var rr,ce,re,ve,be,Ae,Te,Re,Ie,Xe,ar,Ye=8*ue.length;for(ue=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],xr=Array(64),Ne[Ye>>5]|=128<<24-Ye%32,Ne[15+(Ye+64>>9<<4)]=Ye,Re=0;Re<Ne.length;Re+=16){for(Ye=ue[0],rr=ue[1],ce=ue[2],re=ue[3],ve=ue[4],be=ue[5],Ae=ue[6],Te=ue[7],Ie=0;64>Ie;Ie++){var nr;16>Ie?xr[Ie]=Ne[Ie+Re]:(Xe=Ie,ar=nt(ar=J(ar=xr[Ie-2],17)^J(ar,19)^ar>>>10,xr[Ie-7]),nr=J(nr=xr[Ie-15],7)^J(nr,18)^nr>>>3,xr[Xe]=nt(nt(ar,nr),xr[Ie-16])),Xe=nt(nt(nt(nt(Te,Xe=J(Xe=ve,6)^J(Xe,11)^J(Xe,25)),ve&be^~ve&Ae),Zt[Ie]),xr[Ie]),ar=nt(Te=J(Te=Ye,2)^J(Te,13)^J(Te,22),Ye&rr^Ye&ce^rr&ce),Te=Ae,Ae=be,be=ve,ve=nt(re,Xe),re=ce,ce=rr,rr=Ye,Ye=nt(Xe,ar)}ue[0]=nt(Ye,ue[0]),ue[1]=nt(rr,ue[1]),ue[2]=nt(ce,ue[2]),ue[3]=nt(re,ue[3]),ue[4]=nt(ve,ue[4]),ue[5]=nt(be,ue[5]),ue[6]=nt(Ae,ue[6]),ue[7]=nt(Te,ue[7])}for(Ne="",xr=0;xr<32*ue.length;xr+=8)Ne+=String.fromCharCode(ue[xr>>5]>>>24-xr%32&255);return Ne}(function H(ue){for(var xr,rr,Ne="",Ye=-1;++Ye<ue.length;)xr=ue.charCodeAt(Ye),rr=Ye+1<ue.length?ue.charCodeAt(Ye+1):0,55296<=xr&&56319>=xr&&56320<=rr&&57343>=rr&&(xr=65536+((1023&xr)<<10)+(1023&rr),Ye++),127>=xr?Ne+=String.fromCharCode(xr):2047>=xr?Ne+=String.fromCharCode(192|xr>>>6&31,128|63&xr):65535>=xr?Ne+=String.fromCharCode(224|xr>>>12&15,128|xr>>>6&63,128|63&xr):2097151>=xr&&(Ne+=String.fromCharCode(240|xr>>>18&7,128|xr>>>12&63,128|xr>>>6&63,128|63&xr));return Ne}(Re))),xr[Ie])?xr[Ie].apply(null,re):(Re=Function.apply(null,ce.concat(Re)),xr&&(xr[Ie]=Re),Re.apply(null,re))}}}function j(ue){return Array.isArray(ue)||Mt(ue)||c(ue)}function Z(ue){return ue.sort(function(Ne,Ye){return"viewport"===Ne?-1:"viewport"===Ye?1:Ne<Ye?-1:1})}function G(ue,Ne,Ye,xr){this.thisDep=ue,this.contextDep=Ne,this.propDep=Ye,this.append=xr}function K(ue){return ue&&!(ue.thisDep||ue.contextDep||ue.propDep)}function at(ue){return new G(!1,!1,!1,ue)}function $(ue,Ne){var Ye=ue.type;if(0===Ye)return new G(!0,1<=(Ye=ue.data.length),2<=Ye,Ne);if(4===Ye)return new G((Ye=ue.data).thisDep,Ye.contextDep,Ye.propDep,Ne);if(5===Ye)return new G(!1,!1,!1,Ne);if(6===Ye){for(var xr=Ye=!1,rr=!1,ce=0;ce<ue.data.length;++ce){var re=ue.data[ce];1===re.type?rr=!0:2===re.type?xr=!0:3===re.type?Ye=!0:0===re.type?(Ye=!0,1<=(re=re.data)&&(xr=!0),2<=re&&(rr=!0)):4===re.type&&(Ye=Ye||re.data.thisDep,xr=xr||re.data.contextDep,rr=rr||re.data.propDep)}return new G(Ye,xr,rr,Ne)}return new G(3===Ye,2===Ye,1===Ye,Ne)}function X(ue,Ne,Ye,xr,rr,ce,re,ve,be,Ae,Te,Re,Ie,Xe,ar,nr){function cr(Ze){return Ze.replace(".","_")}function Ut(Ze,Tr,_r){var fn=cr(Ze);Tn.push(Ze),Fn[fn]=gn[fn]=!!_r,Mn[fn]=Tr}function Ht(Ze,Tr,_r){var fn=cr(Ze);Tn.push(Ze),Array.isArray(_r)?(gn[fn]=_r.slice(),Fn[fn]=_r.slice()):gn[fn]=Fn[fn]=_r,In[fn]=Tr}function Se(){var Ze=Q({cache:ar}),Tr=Ze.link,_r=Ze.global;Ze.id=ka++,Ze.batchId="0";var fn=Tr(Gn),sn=Ze.shared={props:"a0"};Object.keys(Gn).forEach(function(Er){sn[Er]=_r.def(fn,".",Er)});var En=Ze.next={},xn=Ze.current={};Object.keys(In).forEach(function(Er){Array.isArray(gn[Er])&&(En[Er]=_r.def(sn.next,".",Er),xn[Er]=_r.def(sn.current,".",Er))});var vn=Ze.constants={};Object.keys(ua).forEach(function(Er){vn[Er]=_r.def(JSON.stringify(ua[Er]))}),Ze.invoke=function(Er,He){switch(He.type){case 0:var Dr=["this",sn.context,sn.props,Ze.batchId];return Er.def(Tr(He.data),".call(",Dr.slice(0,Math.max(He.data.length+1,4)),")");case 1:return Er.def(sn.props,He.data);case 2:return Er.def(sn.context,He.data);case 3:return Er.def("this",He.data);case 4:return He.data.append(Ze,Er),He.data.ref;case 5:return He.data.toString();case 6:return He.data.map(function(Ve){return Ze.invoke(Er,Ve)})}},Ze.attribCache={};var Lr={};return Ze.scopeAttrib=function(Er){if((Er=Ne.id(Er))in Lr)return Lr[Er];var He=Ae.scope[Er];return He||(He=Ae.scope[Er]=new Bn),Lr[Er]=Tr(He)},Ze}function Jr(Ze,Tr,_r,fn,sn){function En(Zr){var yn=vn[Zr];yn&&(Er[Zr]=yn)}var xn=function or(Ze,Tr){if("string"==typeof(_r=Ze.static).frag&&"string"==typeof _r.vert){if(0<Object.keys(Tr.dynamic).length)return null;var _r=Tr.static,fn=Object.keys(_r);if(0<fn.length&&"number"==typeof _r[fn[0]]){for(var sn=[],En=0;En<fn.length;++En)sn.push([0|_r[fn[En]],fn[En]]);return sn}}return null}(Ze,Tr),vn=function qe(Ze,Tr,_r){function fn(vn){if(vn in sn){var Lr=sn[vn];vn=!0;var Dr,Ve,Er=0|Lr.x,He=0|Lr.y;return"width"in Lr?Dr=0|Lr.width:vn=!1,"height"in Lr?Ve=0|Lr.height:vn=!1,new G(!vn&&Tr&&Tr.thisDep,!vn&&Tr&&Tr.contextDep,!vn&&Tr&&Tr.propDep,function(ir,Zr){var yn=ir.shared.context,Kn=Dr;"width"in Lr||(Kn=Zr.def(yn,".","framebufferWidth","-",Er));var ea=Ve;return"height"in Lr||(ea=Zr.def(yn,".","framebufferHeight","-",He)),[Er,He,Kn,ea]})}if(vn in En){var je=En[vn];return vn=$(je,function(ir,Zr){var fa=ir.invoke(Zr,je),yn=ir.shared.context,Kn=Zr.def(fa,".x|0"),ea=Zr.def(fa,".y|0");return[Kn,ea,Zr.def('"width" in ',fa,"?",fa,".width|0:","(",yn,".","framebufferWidth","-",Kn,")"),fa=Zr.def('"height" in ',fa,"?",fa,".height|0:","(",yn,".","framebufferHeight","-",ea,")")]}),Tr&&(vn.thisDep=vn.thisDep||Tr.thisDep,vn.contextDep=vn.contextDep||Tr.contextDep,vn.propDep=vn.propDep||Tr.propDep),vn}return Tr?new G(Tr.thisDep,Tr.contextDep,Tr.propDep,function(ir,Zr){var yn=ir.shared.context;return[0,0,Zr.def(yn,".","framebufferWidth"),Zr.def(yn,".","framebufferHeight")]}):null}var sn=Ze.static,En=Ze.dynamic;if(Ze=fn("viewport")){var xn=Ze;Ze=new G(Ze.thisDep,Ze.contextDep,Ze.propDep,function(vn,Lr){var Er=xn.append(vn,Lr),He=vn.shared.context;return Lr.set(He,".viewportWidth",Er[2]),Lr.set(He,".viewportHeight",Er[3]),Er})}return{viewport:Ze,scissor_box:fn("scissor.box")}}(Ze,Ve=function We(Ze,Tr){var _r=Ze.static,fn=Ze.dynamic;if("framebuffer"in _r){var sn=_r.framebuffer;return sn?(sn=ve.getFramebuffer(sn),at(function(xn,vn){var Lr=xn.link(sn),Er=xn.shared;return vn.set(Er.framebuffer,".next",Lr),vn.set(Er=Er.context,".framebufferWidth",Lr+".width"),vn.set(Er,".framebufferHeight",Lr+".height"),Lr})):at(function(xn,vn){var Lr=xn.shared;return vn.set(Lr.framebuffer,".next","null"),vn.set(Lr=Lr.context,".framebufferWidth",Lr+".drawingBufferWidth"),vn.set(Lr,".framebufferHeight",Lr+".drawingBufferHeight"),"null"})}if("framebuffer"in fn){var En=fn.framebuffer;return $(En,function(xn,vn){var He=xn.invoke(vn,En),Lr=xn.shared,Er=Lr.framebuffer;return He=vn.def(Er,".getFramebuffer(",He,")"),vn.set(Er,".next",He),vn.set(Lr=Lr.context,".framebufferWidth",He+"?"+He+".width:"+Lr+".drawingBufferWidth"),vn.set(Lr,".framebufferHeight",He+"?"+He+".height:"+Lr+".drawingBufferHeight"),He})}return null}(Ze)),Lr=function De(Ze,Tr){function _r(ir,Zr){if(ir in fn){var yn=0|fn[ir];return Zr?En.offset=yn:En.instances=yn,at(function(ea,$n){return Zr&&(ea.OFFSET=yn),yn})}if(ir in sn){var Kn=sn[ir];return $(Kn,function(ea,$n){var fa=ea.invoke($n,Kn);return Zr&&(ea.OFFSET=fa),fa})}if(Zr){if(Lr)return at(function(ea,$n){return ea.OFFSET=0});if(xn)return new G(vn.thisDep,vn.contextDep,vn.propDep,function(ea,$n){return $n.def(ea.shared.vao+".currentVAO?"+ea.shared.vao+".currentVAO.offset:0")})}else if(xn)return new G(vn.thisDep,vn.contextDep,vn.propDep,function(ea,$n){return $n.def(ea.shared.vao+".currentVAO?"+ea.shared.vao+".currentVAO.instances:-1")});return null}var fn=Ze.static,sn=Ze.dynamic,En={},xn=!1,vn=function(){if("vao"in fn){var ir=fn.vao;return null!==ir&&null===Ae.getVAO(ir)&&(ir=Ae.createVAO(ir)),xn=!0,En.vao=ir,at(function(yn){var Kn=Ae.getVAO(ir);return Kn?yn.link(Kn):"null"})}if("vao"in sn){xn=!0;var Zr=sn.vao;return $(Zr,function(yn,Kn){var ea=yn.invoke(Kn,Zr);return Kn.def(yn.shared.vao+".getVAO("+ea+")")})}return null}(),Lr=!1,Er=function(){if("elements"in fn){if(En.elements=ir=fn.elements,j(ir)){var Zr=En.elements=ce.create(ir,!0),ir=ce.getElements(Zr);Lr=!0}else ir&&(ir=ce.getElements(ir),Lr=!0);return(Zr=at(function(Kn,ea){if(ir){var $n=Kn.link(ir);return Kn.ELEMENTS=$n}return Kn.ELEMENTS=null})).value=ir,Zr}if("elements"in sn){Lr=!0;var yn=sn.elements;return $(yn,function(Kn,ea){var Ei=($n=Kn.shared).isBufferArgs,$n=$n.elements,qi=Kn.invoke(ea,yn),fa=ea.def("null");return Ei=ea.def(Ei,"(",qi,")"),qi=Kn.cond(Ei).then(fa,"=",$n,".createStream(",qi,");").else(fa,"=",$n,".getElements(",qi,");"),ea.entry(qi),ea.exit(Kn.cond(Ei).then($n,".destroyStream(",fa,");")),Kn.ELEMENTS=fa})}return xn?new G(vn.thisDep,vn.contextDep,vn.propDep,function(Kn,ea){return ea.def(Kn.shared.vao+".currentVAO?"+Kn.shared.elements+".getElements("+Kn.shared.vao+".currentVAO.elements):null")}):null}(),He=_r("offset",!0),Dr=function(){if("primitive"in fn){var ir=fn.primitive;return En.primitive=ir,at(function(yn,Kn){return Bt[ir]})}if("primitive"in sn){var Zr=sn.primitive;return $(Zr,function(yn,Kn){var ea=yn.constants.primTypes,$n=yn.invoke(Kn,Zr);return Kn.def(ea,"[",$n,"]")})}return Lr?K(Er)?at(Er.value?function(yn,Kn){return Kn.def(yn.ELEMENTS,".primType")}:function(){return 4}):new G(Er.thisDep,Er.contextDep,Er.propDep,function(yn,Kn){var ea=yn.ELEMENTS;return Kn.def(ea,"?",ea,".primType:",4)}):xn?new G(vn.thisDep,vn.contextDep,vn.propDep,function(yn,Kn){return Kn.def(yn.shared.vao+".currentVAO?"+yn.shared.vao+".currentVAO.primitive:4")}):null}(),Ve=function(){if("count"in fn){var ir=0|fn.count;return En.count=ir,at(function(){return ir})}if("count"in sn){var Zr=sn.count;return $(Zr,function(yn,Kn){return yn.invoke(Kn,Zr)})}return Lr?K(Er)?Er?He?new G(He.thisDep,He.contextDep,He.propDep,function(yn,Kn){return Kn.def(yn.ELEMENTS,".vertCount-",yn.OFFSET)}):at(function(yn,Kn){return Kn.def(yn.ELEMENTS,".vertCount")}):at(function(){return-1}):new G(Er.thisDep||He.thisDep,Er.contextDep||He.contextDep,Er.propDep||He.propDep,function(yn,Kn){var ea=yn.ELEMENTS;return yn.OFFSET?Kn.def(ea,"?",ea,".vertCount-",yn.OFFSET,":-1"):Kn.def(ea,"?",ea,".vertCount:-1")}):xn?new G(vn.thisDep,vn.contextDep,vn.propDep,function(yn,Kn){return Kn.def(yn.shared.vao,".currentVAO?",yn.shared.vao,".currentVAO.count:-1")}):null}(),je=_r("instances",!1);return{elements:Er,primitive:Dr,count:Ve,instances:je,offset:He,vao:vn,vaoActive:xn,elementsActive:Lr,static:En}}(Ze),Er=function sr(Ze,Tr){var _r=Ze.static,fn=Ze.dynamic,sn={};return Tn.forEach(function(En){function xn(Lr,Er){if(En in _r){var He=Lr(_r[En]);sn[vn]=at(function(){return He})}else if(En in fn){var Dr=fn[En];sn[vn]=$(Dr,function(Ve,je){return Er(Ve,je,Ve.invoke(je,Dr))})}}var vn=cr(En);switch(En){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return xn(function(Lr){return Lr},function(Lr,Er,He){return He});case"depth.func":return xn(function(Lr){return Ke[Lr]},function(Lr,Er,He){return Er.def(Lr.constants.compareFuncs,"[",He,"]")});case"depth.range":return xn(function(Lr){return Lr},function(Lr,Er,He){return[Er.def("+",He,"[0]"),Er=Er.def("+",He,"[1]")]});case"blend.func":return xn(function(Lr){return[Be["srcRGB"in Lr?Lr.srcRGB:Lr.src],Be["dstRGB"in Lr?Lr.dstRGB:Lr.dst],Be["srcAlpha"in Lr?Lr.srcAlpha:Lr.src],Be["dstAlpha"in Lr?Lr.dstAlpha:Lr.dst]]},function(Lr,Er,He){function Dr(Zr,yn){return Er.def('"',Zr,yn,'" in ',He,"?",He,".",Zr,yn,":",He,".",Zr)}Lr=Lr.constants.blendFuncs;var Ve=Dr("src","RGB"),ir=Dr("dst","RGB"),je=(Ve=Er.def(Lr,"[",Ve,"]"),Er.def(Lr,"[",Dr("src","Alpha"),"]"));return[Ve,ir=Er.def(Lr,"[",ir,"]"),je,Lr=Er.def(Lr,"[",Dr("dst","Alpha"),"]")]});case"blend.equation":return xn(function(Lr){return"string"==typeof Lr?[Wn[Lr],Wn[Lr]]:"object"==typeof Lr?[Wn[Lr.rgb],Wn[Lr.alpha]]:void 0},function(Lr,Er,He){var Dr=Lr.constants.blendEquations,Ve=Er.def(),je=Er.def();return(Lr=Lr.cond("typeof ",He,'==="string"')).then(Ve,"=",je,"=",Dr,"[",He,"];"),Lr.else(Ve,"=",Dr,"[",He,".rgb];",je,"=",Dr,"[",He,".alpha];"),Er(Lr),[Ve,je]});case"blend.color":return xn(function(Lr){return l(4,function(Er){return+Lr[Er]})},function(Lr,Er,He){return l(4,function(Dr){return Er.def("+",He,"[",Dr,"]")})});case"stencil.mask":return xn(function(Lr){return 0|Lr},function(Lr,Er,He){return Er.def(He,"|0")});case"stencil.func":return xn(function(Lr){return[Ke[Lr.cmp||"keep"],Lr.ref||0,"mask"in Lr?Lr.mask:-1]},function(Lr,Er,He){return[Lr=Er.def('"cmp" in ',He,"?",Lr.constants.compareFuncs,"[",He,".cmp]",":",7680),Er.def(He,".ref|0"),Er=Er.def('"mask" in ',He,"?",He,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return xn(function(Lr){return["stencil.opBack"===En?1029:1028,xe[Lr.fail||"keep"],xe[Lr.zfail||"keep"],xe[Lr.zpass||"keep"]]},function(Lr,Er,He){function Dr(je){return Er.def('"',je,'" in ',He,"?",Ve,"[",He,".",je,"]:",7680)}var Ve=Lr.constants.stencilOps;return["stencil.opBack"===En?1029:1028,Dr("fail"),Dr("zfail"),Dr("zpass")]});case"polygonOffset.offset":return xn(function(Lr){return[0|Lr.factor,0|Lr.units]},function(Lr,Er,He){return[Er.def(He,".factor|0"),Er=Er.def(He,".units|0")]});case"cull.face":return xn(function(Lr){var Er=0;return"front"===Lr?Er=1028:"back"===Lr&&(Er=1029),Er},function(Lr,Er,He){return Er.def(He,'==="front"?',1028,":",1029)});case"frontFace":return xn(function(Lr){return Pe[Lr]},function(Lr,Er,He){return Er.def(He+'==="cw"?2304:2305')});case"colorMask":return xn(function(Lr){return Lr.map(function(Er){return!!Er})},function(Lr,Er,He){return l(4,function(Dr){return"!!"+He+"["+Dr+"]"})});case"sample.coverage":return xn(function(Lr){return["value"in Lr?Lr.value:1,!!Lr.invert]},function(Lr,Er,He){return[Er.def('"value" in ',He,"?+",He,".value:1"),Er=Er.def("!!",He,".invert")]})}}),sn}(Ze),He=function _e(Ze,Tr,_r){function fn(Er){if(Er in sn){var He=Ne.id(sn[Er]);return(Er=at(function(){return He})).id=He,Er}if(Er in En){var Dr=En[Er];return $(Dr,function(Ve,je){var ir=Ve.invoke(je,Dr);return je.def(Ve.shared.strings,".id(",ir,")")})}return null}var sn=Ze.static,En=Ze.dynamic,xn=fn("frag"),vn=fn("vert"),Lr=null;return K(xn)&&K(vn)?(Lr=Te.program(vn.id,xn.id,null,_r),Ze=at(function(Er,He){return Er.link(Lr)})):Ze=new G(xn&&xn.thisDep||vn&&vn.thisDep,xn&&xn.contextDep||vn&&vn.contextDep,xn&&xn.propDep||vn&&vn.propDep,function(Er,He){var Ve,je,Dr=Er.shared.shader;return Ve=xn?xn.append(Er,He):He.def(Dr,".","frag"),je=vn?vn.append(Er,He):He.def(Dr,".","vert"),He.def(Dr+".program("+je+","+Ve+")")}),{frag:xn,vert:vn,progVar:Ze,program:Lr}}(Ze,0,xn);En("viewport"),En(cr("scissor.box"));var Ve,Dr=0<Object.keys(Er).length;if((Ve={framebuffer:Ve,draw:Lr,shader:He,state:Er,dirty:Dr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function Ce(Ze){var _r,Tr=Ze.static;if(Ze=Ze.dynamic,"profile"in Tr){var fn=!!Tr.profile;(_r=at(function(En,xn){return fn})).enable=fn}else if("profile"in Ze){var sn=Ze.profile;_r=$(sn,function(En,xn){return En.invoke(xn,sn)})}return _r}(Ze),Ve.uniforms=function yr(Ze,Tr){var _r=Ze.static,fn=Ze.dynamic,sn={};return Object.keys(_r).forEach(function(En){var vn,xn=_r[En];if("number"==typeof xn||"boolean"==typeof xn)vn=at(function(){return xn});else if("function"==typeof xn){var Lr=xn._reglType;"texture2d"===Lr||"textureCube"===Lr?vn=at(function(Er){return Er.link(xn)}):("framebuffer"===Lr||"framebufferCube"===Lr)&&(vn=at(function(Er){return Er.link(xn.color[0])}))}else b(xn)&&(vn=at(function(Er){return Er.global.def("[",l(xn.length,function(He){return xn[He]}),"]")}));vn.value=xn,sn[En]=vn}),Object.keys(fn).forEach(function(En){var xn=fn[En];sn[En]=$(xn,function(vn,Lr){return vn.invoke(Lr,xn)})}),sn}(_r),Ve.drawVAO=Ve.scopeVAO=Lr.vao,!Ve.drawVAO&&He.program&&!xn&&Ye.angle_instanced_arrays&&Lr.static.elements){var je=!0;if(Ze=He.program.attributes.map(function(Zr){return Zr=Tr.static[Zr],je=je&&!!Zr,Zr}),je&&0<Ze.length){var ir=Ae.getVAO(Ae.createVAO({attributes:Ze,elements:Lr.static.elements}));Ve.drawVAO=new G(null,null,null,function(Zr,yn){return Zr.link(ir)}),Ve.useVAO=!0}}return xn?Ve.useVAO=!0:Ve.attributes=function dr(Ze,Tr){var _r=Ze.static,fn=Ze.dynamic,sn={};return Object.keys(_r).forEach(function(En){var xn=_r[En],vn=Ne.id(En),Lr=new Bn;if(j(xn))Lr.state=1,Lr.buffer=rr.getBuffer(rr.create(xn,34962,!1,!0)),Lr.type=0;else if(Er=rr.getBuffer(xn))Lr.state=1,Lr.buffer=Er,Lr.type=0;else if("constant"in xn){var He=xn.constant;Lr.buffer="null",Lr.state=2,"number"==typeof He?Lr.x=He:ee.forEach(function(yn,Kn){Kn<He.length&&(Lr[yn]=He[Kn])})}else{var Er=j(xn.buffer)?rr.getBuffer(rr.create(xn.buffer,34962,!1,!0)):rr.getBuffer(xn.buffer),Dr=0|xn.offset,Ve=0|xn.stride,je=0|xn.size,ir=!!xn.normalized,Zr=0;"type"in xn&&(Zr=Wt[xn.type]),xn=0|xn.divisor,Lr.buffer=Er,Lr.state=1,Lr.size=je,Lr.normalized=ir,Lr.type=Zr||Er.dtype,Lr.offset=Dr,Lr.stride=Ve,Lr.divisor=xn}sn[En]=at(function(yn,Kn){var ea=yn.attribCache;if(vn in ea)return ea[vn];var $n={isStream:!1};return Object.keys(Lr).forEach(function(fa){$n[fa]=Lr[fa]}),Lr.buffer&&($n.buffer=yn.link(Lr.buffer),$n.type=$n.type||$n.buffer+".dtype"),ea[vn]=$n})}),Object.keys(fn).forEach(function(En){var xn=fn[En];sn[En]=$(xn,function(vn,Lr){function Er(ea){Lr(ir[ea],"=",He,".",ea,"|0;")}var He=vn.invoke(Lr,xn),Dr=vn.constants,Ve=(je=vn.shared).isBufferArgs,je=je.buffer,ir={isStream:Lr.def(!1)},Zr=new Bn;Zr.state=1,Object.keys(Zr).forEach(function(ea){ir[ea]=Lr.def(""+Zr[ea])});var yn=ir.buffer,Kn=ir.type;return Lr("if(",Ve,"(",He,")){",ir.isStream,"=true;",yn,"=",je,".createStream(",34962,",",He,");",Kn,"=",yn,".dtype;","}else{",yn,"=",je,".getBuffer(",He,");","if(",yn,"){",Kn,"=",yn,".dtype;",'}else if("constant" in ',He,"){",ir.state,"=",2,";","if(typeof "+He+'.constant === "number"){',ir[ee[0]],"=",He,".constant;",ee.slice(1).map(function(ea){return ir[ea]}).join("="),"=0;","}else{",ee.map(function(ea,$n){return ir[ea]+"="+He+".constant.length>"+$n+"?"+He+".constant["+$n+"]:0;"}).join(""),"}}else{","if(",Ve,"(",He,".buffer)){",yn,"=",je,".createStream(",34962,",",He,".buffer);","}else{",yn,"=",je,".getBuffer(",He,".buffer);","}",Kn,'="type" in ',He,"?",Dr.glTypes,"[",He,".type]:",yn,".dtype;",ir.normalized,"=!!",He,".normalized;"),Er("size"),Er("offset"),Er("stride"),Er("divisor"),Lr("}}"),Lr.exit("if(",ir.isStream,"){",je,".destroyStream(",yn,");","}"),ir})}),sn}(Tr),Ve.context=function Pr(Ze){var Tr=Ze.static,_r=Ze.dynamic,fn={};return Object.keys(Tr).forEach(function(sn){var En=Tr[sn];fn[sn]=at(function(xn,vn){return"number"==typeof En||"boolean"==typeof En?""+En:xn.link(En)})}),Object.keys(_r).forEach(function(sn){var En=_r[sn];fn[sn]=$(En,function(xn,vn){return xn.invoke(vn,En)})}),fn}(fn),Ve}function Mr(Ze,Tr,_r){var fn=Ze.shared.context,sn=Ze.scope();Object.keys(_r).forEach(function(En){Tr.save(fn,"."+En);var xn=_r[En].append(Ze,Tr);Array.isArray(xn)?sn(fn,".",En,"=[",xn.join(),"];"):sn(fn,".",En,"=",xn,";")}),Tr(sn)}function Wr(Ze,Tr,_r,fn){var xn,sn=(vn=Ze.shared).gl,En=vn.framebuffer;en&&(xn=Tr.def(vn.extensions,".webgl_draw_buffers"));var vn=(Lr=Ze.constants).drawBuffer,Lr=Lr.backBuffer;Ze=_r?_r.append(Ze,Tr):Tr.def(En,".next"),fn||Tr("if(",Ze,"!==",En,".cur){"),Tr("if(",Ze,"){",sn,".bindFramebuffer(",36160,",",Ze,".framebuffer);"),en&&Tr(xn,".drawBuffersWEBGL(",vn,"[",Ze,".colorAttachments.length]);"),Tr("}else{",sn,".bindFramebuffer(",36160,",null);"),en&&Tr(xn,".drawBuffersWEBGL(",Lr,");"),Tr("}",En,".cur=",Ze,";"),fn||Tr("}")}function nn(Ze,Tr,_r){var fn=Ze.shared,sn=fn.gl,En=Ze.current,xn=Ze.next,vn=fn.current,Lr=fn.next,Er=Ze.cond(vn,".dirty");Tn.forEach(function(He){var Dr,Ve;if(!((He=cr(He))in _r.state))if(He in xn){Dr=xn[He],Ve=En[He];var je=l(gn[He].length,function(ir){return Er.def(Dr,"[",ir,"]")});Er(Ze.cond(je.map(function(ir,Zr){return ir+"!=="+Ve+"["+Zr+"]"}).join("||")).then(sn,".",In[He],"(",je,");",je.map(function(ir,Zr){return Ve+"["+Zr+"]="+ir}).join(";"),";"))}else Dr=Er.def(Lr,".",He),je=Ze.cond(Dr,"!==",vn,".",He),Er(je),He in Mn?je(Ze.cond(Dr).then(sn,".enable(",Mn[He],");").else(sn,".disable(",Mn[He],");"),vn,".",He,"=",Dr,";"):je(sn,".",In[He],"(",Dr,");",vn,".",He,"=",Dr,";")}),0===Object.keys(_r.state).length&&Er(vn,".dirty=false;"),Tr(Er)}function Nr(Ze,Tr,_r,fn){var Lr,sn=Ze.shared,En=Ze.current,xn=sn.current,vn=sn.gl;Z(Object.keys(_r)).forEach(function(Er){var He=_r[Er];if(!fn||fn(He)){var Dr=He.append(Ze,Tr);if(Mn[Er]){var Ve=Mn[Er];K(He)?(Lr=Ze.link(Dr,{stable:!0}),Tr(Ze.cond(Lr).then(vn,".enable(",Ve,");").else(vn,".disable(",Ve,");")),Tr(xn,".",Er,"=",Lr,";")):(Tr(Ze.cond(Dr).then(vn,".enable(",Ve,");").else(vn,".disable(",Ve,");")),Tr(xn,".",Er,"=",Dr,";"))}else if(b(Dr)){var je=En[Er];Tr(vn,".",In[Er],"(",Dr,");",Dr.map(function(ir,Zr){return je+"["+Zr+"]="+ir}).join(";"),";")}else K(He)?(Lr=Ze.link(Dr,{stable:!0}),Tr(vn,".",In[Er],"(",Lr,");",xn,".",Er,"=",Lr,";")):Tr(vn,".",In[Er],"(",Dr,");",xn,".",Er,"=",Dr,";")}})}function Dn(Ze,Tr){wr&&(Ze.instancing=Tr.def(Ze.shared.extensions,".angle_instanced_arrays"))}function hn(Ze,Tr,_r,fn,sn){function En(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function xn(Zr){Zr(je=Tr.def(),"=",En(),";"),"string"==typeof sn?Zr(He,".count+=",sn,";"):Zr(He,".count++;"),Xe&&(fn?Zr(ir=Tr.def(),"=",Ve,".getNumPendingQueries();"):Zr(Ve,".beginQuery(",He,");"))}function vn(Zr){Zr(He,".cpuTime+=",En(),"-",je,";"),Xe&&(fn?Zr(Ve,".pushScopeStats(",ir,",",Ve,".getNumPendingQueries(),",He,");"):Zr(Ve,".endQuery();"))}function Lr(Zr){var yn=Tr.def(Dr,".profile");Tr(Dr,".profile=",Zr,";"),Tr.exit(Dr,".profile=",yn,";")}var je,ir,Er=Ze.shared,He=Ze.stats,Dr=Er.current,Ve=Er.timer;if(_r=_r.profile){if(K(_r))return void(_r.enable?(xn(Tr),vn(Tr.exit),Lr("true")):Lr("false"));Lr(_r=_r.append(Ze,Tr))}else _r=Tr.def(Dr,".profile");xn(Er=Ze.block()),Tr("if(",_r,"){",Er,"}"),vn(Ze=Ze.block()),Tr.exit("if(",_r,"){",Ze,"}")}function hr(Ze,Tr,_r,fn,sn){var vn=Ze.shared;fn.forEach(function(Lr){var Dr,Er=Lr.name,He=_r.attributes[Er];if(He){if(!sn(He))return;Dr=He.append(Ze,Tr)}else{if(!sn(Ge))return;var Ve=Ze.scopeAttrib(Er);Dr={},Object.keys(new Bn).forEach(function(je){Dr[je]=Tr.def(Ve,".",je)})}!function xn(Lr,Er,He){function Dr(){Tr("if(!",Zr,".buffer){",je,".enableVertexAttribArray(",ir,");}");var fa,$n=He.type;fa=He.size?Tr.def(He.size,"||",Er):Er,Tr("if(",Zr,".type!==",$n,"||",Zr,".size!==",fa,"||",ea.map(function(Ei){return Zr+"."+Ei+"!=="+He[Ei]}).join("||"),"){",je,".bindBuffer(",34962,",",yn,".buffer);",je,".vertexAttribPointer(",[ir,fa,$n,He.normalized,He.stride,He.offset],");",Zr,".type=",$n,";",Zr,".size=",fa,";",ea.map(function(Ei){return Zr+"."+Ei+"="+He[Ei]+";"}).join(""),"}"),wr&&Tr("if(",Zr,".divisor!==",$n=He.divisor,"){",Ze.instancing,".vertexAttribDivisorANGLE(",[ir,$n],");",Zr,".divisor=",$n,";}")}function Ve(){Tr("if(",Zr,".buffer){",je,".disableVertexAttribArray(",ir,");",Zr,".buffer=null;","}if(",ee.map(function($n,fa){return Zr+"."+$n+"!=="+Kn[fa]}).join("||"),"){",je,".vertexAttrib4f(",ir,",",Kn,");",ee.map(function($n,fa){return Zr+"."+$n+"="+Kn[fa]+";"}).join(""),"}")}var je=vn.gl,ir=Tr.def(Lr,".location"),Zr=Tr.def(vn.attributes,"[",ir,"]"),yn=He.buffer,Kn=[He.x,He.y,He.z,He.w],ea=["buffer","normalized","offset","stride"];1===(Lr=He.state)?Dr():2===Lr?Ve():(Tr("if(",Lr,"===",1,"){"),Dr(),Tr("}else{"),Ve(),Tr("}"))}(Ze.link(Lr),function En(Lr){switch(Lr){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Lr.info.type),Dr)})}function Ar(Ze,Tr,_r,fn,sn,En){for(var Lr,xn=Ze.shared,vn=xn.gl,Er=0;Er<fn.length;++Er){var ir,He=(je=fn[Er]).name,Dr=je.info.type,Ve=_r.uniforms[He],je=Ze.link(je)+".location";if(Ve){if(!sn(Ve))continue;if(K(Ve)){if(He=Ve.value,35678===Dr||35680===Dr)Tr(vn,".uniform1i(",je,",",(Dr=Ze.link(He._texture||He.color[0]._texture))+".bind());"),Tr.exit(Dr,".unbind();");else if(35674===Dr||35675===Dr||35676===Dr)Ve=2,35675===Dr?Ve=3:35676===Dr&&(Ve=4),Tr(vn,".uniformMatrix",Ve,"fv(",je,",false,",He=Ze.global.def("new Float32Array(["+Array.prototype.slice.call(He)+"])"),");");else{switch(Dr){case 5126:Lr="1f";break;case 35664:Lr="2f";break;case 35665:Lr="3f";break;case 35666:Lr="4f";break;case 35670:case 5124:Lr="1i";break;case 35671:case 35667:Lr="2i";break;case 35672:case 35668:Lr="3i";break;case 35673:case 35669:Lr="4i"}Tr(vn,".uniform",Lr,"(",je,",",b(He)?Array.prototype.slice.call(He):He,");")}continue}ir=Ve.append(Ze,Tr)}else{if(!sn(Ge))continue;ir=Tr.def(xn.uniforms,"[",Ne.id(He),"]")}switch(35678===Dr?Tr("if(",ir,"&&",ir,'._reglType==="framebuffer"){',ir,"=",ir,".color[0];","}"):35680===Dr&&Tr("if(",ir,"&&",ir,'._reglType==="framebufferCube"){',ir,"=",ir,".color[0];","}"),He=1,Dr){case 35678:case 35680:Dr=Tr.def(ir,"._texture"),Tr(vn,".uniform1i(",je,",",Dr,".bind());"),Tr.exit(Dr,".unbind();");continue;case 5124:case 35670:Lr="1i";break;case 35667:case 35671:Lr="2i",He=2;break;case 35668:case 35672:Lr="3i",He=3;break;case 35669:case 35673:Lr="4i",He=4;break;case 5126:Lr="1f";break;case 35664:Lr="2f",He=2;break;case 35665:Lr="3f",He=3;break;case 35666:Lr="4f",He=4;break;case 35674:Lr="Matrix2fv";break;case 35675:Lr="Matrix3fv";break;case 35676:Lr="Matrix4fv"}if("M"===Lr.charAt(0)){Tr(vn,".uniform",Lr,"(",je,","),je=Math.pow(Dr-35674+2,2);var Zr=Ze.global.def("new Float32Array(",je,")");Array.isArray(ir)?Tr("false,(",l(je,function(ea){return Zr+"["+ea+"]="+ir[ea]}),",",Zr,")"):Tr("false,(Array.isArray(",ir,")||",ir," instanceof Float32Array)?",ir,":(",l(je,function(ea){return Zr+"["+ea+"]="+ir+"["+ea+"]"}),",",Zr,")"),Tr(");")}else{if(1<He){Dr=[];var yn=[];for(Ve=0;Ve<He;++Ve)Array.isArray(ir)?yn.push(ir[Ve]):yn.push(Tr.def(ir+"["+Ve+"]")),En&&Dr.push(Tr.def());En&&Tr("if(!",Ze.batchId,"||",Dr.map(function(Kn,ea){return Kn+"!=="+yn[ea]}).join("||"),"){",Dr.map(function(Kn,ea){return Kn+"="+yn[ea]+";"}).join("")),Tr(vn,".uniform",Lr,"(",je,",",yn.join(","),");")}else En&&(Dr=Tr.def(),Tr("if(!",Ze.batchId,"||",Dr,"!==",ir,"){",Dr,"=",ir,";")),Tr(vn,".uniform",Lr,"(",je,",",ir,");");En&&Tr("}")}}}function Br(Ze,Tr,_r,fn){function sn($n){var fa=He[$n];return fa?fa.append(Ze,fa.contextDep&&fn.contextDynamic||fa.propDep?_r:Tr):Tr.def(Er,".",$n)}function En(){function $n(){_r(yn,".drawElementsInstancedANGLE(",[Ve,ir,Kn,je+"<<(("+Kn+"-5121)>>1)",Zr],");")}function fa(){_r(yn,".drawArraysInstancedANGLE(",[Ve,je,ir,Zr],");")}Dr&&"null"!==Dr?ea?$n():(_r("if(",Dr,"){"),$n(),_r("}else{"),fa(),_r("}")):fa()}function xn(){function $n(){_r(Lr+".drawElements("+[Ve,ir,Kn,je+"<<(("+Kn+"-5121)>>1)"]+");")}function fa(){_r(Lr+".drawArrays("+[Ve,je,ir]+");")}Dr&&"null"!==Dr?ea?$n():(_r("if(",Dr,"){"),$n(),_r("}else{"),fa(),_r("}")):fa()}var $n,fa,Zr,yn,vn=Ze.shared,Lr=vn.gl,Er=vn.draw,He=fn.draw,Dr=(fa=Tr,($n=He.elements)?(($n.contextDep&&fn.contextDynamic||$n.propDep)&&(fa=_r),$n=$n.append(Ze,fa),He.elementsActive&&fa("if("+$n+")"+Lr+".bindBuffer(34963,"+$n+".buffer.buffer);")):($n=fa.def(),fa($n,"=",Er,".","elements",";","if(",$n,"){",Lr,".bindBuffer(",34963,",",$n,".buffer.buffer);}","else if(",vn.vao,".currentVAO){",$n,"=",Ze.shared.elements+".getElements("+vn.vao,".currentVAO.elements);",tn?"":"if("+$n+")"+Lr+".bindBuffer(34963,"+$n+".buffer.buffer);","}")),$n),Ve=sn("primitive"),je=sn("offset"),ir=function(){var $n=He.count,fa=Tr;return $n?(($n.contextDep&&fn.contextDynamic||$n.propDep)&&(fa=_r),$n=$n.append(Ze,fa)):$n=fa.def(Er,".","count"),$n}();if("number"==typeof ir){if(0===ir)return}else _r("if(",ir,"){"),_r.exit("}");wr&&(Zr=sn("instances"),yn=Ze.instancing);var Kn=Dr+".type",ea=He.elements&&K(He.elements)&&!He.vaoActive;wr&&("number"!=typeof Zr||0<=Zr)?"string"==typeof Zr?(_r("if(",Zr,">0){"),En(),_r("}else if(",Zr,"<0){"),xn(),_r("}")):En():xn()}function Or(Ze,Tr,_r,fn,sn){return sn=(Tr=Se()).proc("body",sn),wr&&(Tr.instancing=sn.def(Tr.shared.extensions,".angle_instanced_arrays")),Ze(Tr,sn,_r,fn),Tr.compile().body}function an(Ze,Tr,_r,fn){Dn(Ze,Tr),_r.useVAO?_r.drawVAO?Tr(Ze.shared.vao,".setVAO(",_r.drawVAO.append(Ze,Tr),");"):Tr(Ze.shared.vao,".setVAO(",Ze.shared.vao,".targetVAO);"):(Tr(Ze.shared.vao,".setVAO(null);"),hr(Ze,Tr,_r,fn.attributes,function(){return!0})),Ar(Ze,Tr,_r,fn.uniforms,function(){return!0},!1),Br(Ze,Tr,Tr,_r)}function pn(Ze,Tr,_r,fn){function sn(){return!0}Ze.batchId="a1",Dn(Ze,Tr),hr(Ze,Tr,_r,fn.attributes,sn),Ar(Ze,Tr,_r,fn.uniforms,sn,!1),Br(Ze,Tr,Tr,_r)}function wn(Ze,Tr,_r,fn){function sn(Dr){return Dr.contextDep&&xn||Dr.propDep}function En(Dr){return!sn(Dr)}Dn(Ze,Tr);var xn=_r.contextDep,vn=Tr.def(),Lr=Tr.def();Ze.shared.props=Lr,Ze.batchId=vn;var Er=Ze.scope(),He=Ze.scope();Tr(Er.entry,"for(",vn,"=0;",vn,"<","a1",";++",vn,"){",Lr,"=","a0","[",vn,"];",He,"}",Er.exit),_r.needsContext&&Mr(Ze,He,_r.context),_r.needsFramebuffer&&Wr(Ze,He,_r.framebuffer),Nr(Ze,He,_r.state,sn),_r.profile&&sn(_r.profile)&&hn(Ze,He,_r,!1,!0),fn?(_r.useVAO?_r.drawVAO?sn(_r.drawVAO)?He(Ze.shared.vao,".setVAO(",_r.drawVAO.append(Ze,He),");"):Er(Ze.shared.vao,".setVAO(",_r.drawVAO.append(Ze,Er),");"):Er(Ze.shared.vao,".setVAO(",Ze.shared.vao,".targetVAO);"):(Er(Ze.shared.vao,".setVAO(null);"),hr(Ze,Er,_r,fn.attributes,En),hr(Ze,He,_r,fn.attributes,sn)),Ar(Ze,Er,_r,fn.uniforms,En,!1),Ar(Ze,He,_r,fn.uniforms,sn,!0),Br(Ze,Er,He,_r)):(Tr=Ze.global.def("{}"),fn=_r.shader.progVar.append(Ze,He),Lr=He.def(fn,".id"),Er=He.def(Tr,"[",Lr,"]"),He(Ze.shared.gl,".useProgram(",fn,".program);","if(!",Er,"){",Er,"=",Tr,"[",Lr,"]=",Ze.link(function(Dr){return Or(pn,Ze,_r,Dr,2)}),"(",fn,");}",Er,".call(this,a0[",vn,"],",vn,");"))}function Zn(Ze,Tr,_r){var sn=Tr.static[_r];if(sn&&function Nn(Ze){if("object"==typeof Ze&&!b(Ze)){for(var Tr=Object.keys(Ze),_r=0;_r<Tr.length;++_r)if(dt.isDynamic(Ze[Tr[_r]]))return!0;return!1}}(sn)){var En=Ze.global,xn=Object.keys(sn),vn=!1,Lr=!1,Er=!1,He=Ze.global.def("{}");xn.forEach(function(Dr){var Ve=sn[Dr];if(dt.isDynamic(Ve))"function"==typeof Ve&&(Ve=sn[Dr]=dt.unbox(Ve)),Dr=$(Ve,null),vn=vn||Dr.thisDep,Er=Er||Dr.propDep,Lr=Lr||Dr.contextDep;else{switch(En(He,".",Dr,"="),typeof Ve){case"number":En(Ve);break;case"string":En('"',Ve,'"');break;case"object":Array.isArray(Ve)&&En("[",Ve.join(),"]");break;default:En(Ze.link(Ve))}En(";")}}),Tr.dynamic[_r]=new dt.DynamicVariable(4,{thisDep:vn,contextDep:Lr,propDep:Er,ref:He,append:function fn(Dr,Ve){xn.forEach(function(je){var ir=sn[je];dt.isDynamic(ir)&&(ir=Dr.invoke(Ve,ir),Ve(He,".",je,"=",ir,";"))})}}),delete Tr.static[_r]}}var Bn=Ae.Record,Wn={add:32774,subtract:32778,"reverse subtract":32779};Ye.ext_blend_minmax&&(Wn.min=32775,Wn.max=32776);var wr=Ye.angle_instanced_arrays,en=Ye.webgl_draw_buffers,tn=Ye.oes_vertex_array_object,gn={dirty:!0,profile:nr.profile},Fn={},Tn=[],Mn={},In={};Ut("dither",3024),Ut("blend.enable",3042),Ht("blend.color","blendColor",[0,0,0,0]),Ht("blend.equation","blendEquationSeparate",[32774,32774]),Ht("blend.func","blendFuncSeparate",[1,0,1,0]),Ut("depth.enable",2929,!0),Ht("depth.func","depthFunc",513),Ht("depth.range","depthRange",[0,1]),Ht("depth.mask","depthMask",!0),Ht("colorMask","colorMask",[!0,!0,!0,!0]),Ut("cull.enable",2884),Ht("cull.face","cullFace",1029),Ht("frontFace","frontFace",2305),Ht("lineWidth","lineWidth",1),Ut("polygonOffset.enable",32823),Ht("polygonOffset.offset","polygonOffset",[0,0]),Ut("sample.alpha",32926),Ut("sample.enable",32928),Ht("sample.coverage","sampleCoverage",[1,!1]),Ut("stencil.enable",2960),Ht("stencil.mask","stencilMask",-1),Ht("stencil.func","stencilFunc",[519,0,-1]),Ht("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Ht("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Ut("scissor.enable",3089),Ht("scissor.box","scissor",[0,0,ue.drawingBufferWidth,ue.drawingBufferHeight]),Ht("viewport","viewport",[0,0,ue.drawingBufferWidth,ue.drawingBufferHeight]);var Gn={gl:ue,context:Ie,strings:Ne,next:Fn,current:gn,draw:Re,elements:ce,buffer:rr,shader:Te,attributes:Ae.state,vao:Ae,uniforms:be,framebuffer:ve,extensions:Ye,timer:Xe,isBufferArgs:j},ua={primTypes:Bt,compareFuncs:Ke,blendFuncs:Be,blendEquations:Wn,stencilOps:xe,glTypes:Wt,orientationType:Pe};en&&(ua.backBuffer=[1029],ua.drawBuffer=l(xr.maxDrawbuffers,function(Ze){return 0===Ze?[0]:l(Ze,function(Tr){return 36064+Tr})}));var ka=0;return{next:Fn,current:gn,procs:function(){var Ze=Se(),Tr=Ze.proc("poll"),_r=Ze.proc("refresh"),fn=Ze.block();Tr(fn),_r(fn);var vn,sn=(Lr=Ze.shared).gl,En=Lr.next,xn=Lr.current;fn(xn,".dirty=false;"),Wr(Ze,Tr),Wr(Ze,_r,null,!0),wr&&(vn=Ze.link(wr)),Ye.oes_vertex_array_object&&_r(Ze.link(Ye.oes_vertex_array_object),".bindVertexArrayOES(null);");var Lr=_r.def(Lr.attributes),Er=_r.def(0),He=Ze.cond(Er,".buffer");He.then(sn,".enableVertexAttribArray(i);",sn,".bindBuffer(",34962,",",Er,".buffer.buffer);",sn,".vertexAttribPointer(i,",Er,".size,",Er,".type,",Er,".normalized,",Er,".stride,",Er,".offset);").else(sn,".disableVertexAttribArray(i);",sn,".vertexAttrib4f(i,",Er,".x,",Er,".y,",Er,".z,",Er,".w);",Er,".buffer=null;");var Dr=Ze.link(xr.maxAttributes,{stable:!0});return _r("for(var i=0;i<",Dr,";++i){",Er,"=",Lr,"[i];",He,"}"),wr&&_r("for(var i=0;i<",Dr,";++i){",vn,".vertexAttribDivisorANGLE(i,",Lr,"[i].divisor);","}"),_r(Ze.shared.vao,".currentVAO=null;",Ze.shared.vao,".setVAO(",Ze.shared.vao,".targetVAO);"),Object.keys(Mn).forEach(function(Ve){var je=Mn[Ve],ir=fn.def(En,".",Ve),Zr=Ze.block();Zr("if(",ir,"){",sn,".enable(",je,")}else{",sn,".disable(",je,")}",xn,".",Ve,"=",ir,";"),_r(Zr),Tr("if(",ir,"!==",xn,".",Ve,"){",Zr,"}")}),Object.keys(In).forEach(function(Ve){var Zr,yn,je=In[Ve],ir=gn[Ve],Kn=Ze.block();Kn(sn,".",je,"("),b(ir)?(je=ir.length,Zr=Ze.global.def(En,".",Ve),yn=Ze.global.def(xn,".",Ve),Kn(l(je,function(ea){return Zr+"["+ea+"]"}),");",l(je,function(ea){return yn+"["+ea+"]="+Zr+"["+ea+"];"}).join("")),Tr("if(",l(je,function(ea){return Zr+"["+ea+"]!=="+yn+"["+ea+"]"}).join("||"),"){",Kn,"}")):(Zr=fn.def(En,".",Ve),yn=fn.def(xn,".",Ve),Kn(Zr,");",xn,".",Ve,"=",Zr,";"),Tr("if(",Zr,"!==",yn,"){",Kn,"}")),_r(Kn)}),Ze.compile()}(),compile:function(Ze,Tr,_r,fn,sn){var En=Se();En.stats=En.link(sn),Object.keys(Tr.static).forEach(function(vn){Zn(En,Tr,vn)}),se.forEach(function(vn){Zn(En,Ze,vn)});var xn=Jr(Ze,Tr,_r,fn);return xn.shader.program&&(xn.shader.program.attributes.sort(function(vn,Lr){return vn.name<Lr.name?-1:1}),xn.shader.program.uniforms.sort(function(vn,Lr){return vn.name<Lr.name?-1:1})),function dn(Ze,Tr){var _r=Ze.proc("draw",1);Dn(Ze,_r),Mr(Ze,_r,Tr.context),Wr(Ze,_r,Tr.framebuffer),nn(Ze,_r,Tr),Nr(Ze,_r,Tr.state),hn(Ze,_r,Tr,!1,!0);var fn=Tr.shader.progVar.append(Ze,_r);if(_r(Ze.shared.gl,".useProgram(",fn,".program);"),Tr.shader.program)an(Ze,_r,Tr,Tr.shader.program);else{_r(Ze.shared.vao,".setVAO(null);");var sn=Ze.global.def("{}"),En=_r.def(fn,".id"),xn=_r.def(sn,"[",En,"]");_r(Ze.cond(xn).then(xn,".call(this,a0);").else(xn,"=",sn,"[",En,"]=",Ze.link(function(vn){return Or(an,Ze,Tr,vn,1)}),"(",fn,");",xn,".call(this,a0);"))}0<Object.keys(Tr.state).length&&_r(Ze.shared.current,".dirty=true;"),Ze.shared.vao&&_r(Ze.shared.vao,".setVAO(null);")}(En,xn),function Qn(Ze,Tr){function _r(vn){var Lr=Tr.shader[vn];Lr&&(Lr=Lr.append(Ze,fn),isNaN(Lr)?fn.set(sn.shader,"."+vn,Lr):fn.set(sn.shader,"."+vn,Ze.link(Lr,{stable:!0})))}var fn=Ze.proc("scope",3);Ze.batchId="a2";var sn=Ze.shared,En=sn.current;if(Mr(Ze,fn,Tr.context),Tr.framebuffer&&Tr.framebuffer.append(Ze,fn),Z(Object.keys(Tr.state)).forEach(function(vn){var Lr=Tr.state[vn],Er=Lr.append(Ze,fn);b(Er)?Er.forEach(function(He,Dr){isNaN(He)?fn.set(Ze.next[vn],"["+Dr+"]",He):fn.set(Ze.next[vn],"["+Dr+"]",Ze.link(He,{stable:!0}))}):K(Lr)?fn.set(sn.next,"."+vn,Ze.link(Er,{stable:!0})):fn.set(sn.next,"."+vn,Er)}),hn(Ze,fn,Tr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(vn){var Lr=Tr.draw[vn];Lr&&(Lr=Lr.append(Ze,fn),isNaN(Lr)?fn.set(sn.draw,"."+vn,Lr):fn.set(sn.draw,"."+vn,Ze.link(Lr),{stable:!0}))}),Object.keys(Tr.uniforms).forEach(function(vn){var Lr=Tr.uniforms[vn].append(Ze,fn);Array.isArray(Lr)&&(Lr="["+Lr.map(function(Er){return isNaN(Er)?Er:Ze.link(Er,{stable:!0})})+"]"),fn.set(sn.uniforms,"["+Ze.link(Ne.id(vn),{stable:!0})+"]",Lr)}),Object.keys(Tr.attributes).forEach(function(vn){var Lr=Tr.attributes[vn].append(Ze,fn),Er=Ze.scopeAttrib(vn);Object.keys(new Bn).forEach(function(He){fn.set(Er,"."+He,Lr[He])})}),Tr.scopeVAO){var xn=Tr.scopeVAO.append(Ze,fn);isNaN(xn)?fn.set(sn.vao,".targetVAO",xn):fn.set(sn.vao,".targetVAO",Ze.link(xn,{stable:!0}))}_r("vert"),_r("frag"),0<Object.keys(Tr.state).length&&(fn(En,".dirty=true;"),fn.exit(En,".dirty=true;")),fn("a1(",Ze.shared.context,",a0,",Ze.batchId,");")}(En,xn),function Ln(Ze,Tr){function _r(Er){return Er.contextDep&&sn||Er.propDep}var fn=Ze.proc("batch",2);Ze.batchId="0",Dn(Ze,fn);var sn=!1,En=!0;Object.keys(Tr.context).forEach(function(Er){sn=sn||Tr.context[Er].propDep}),sn||(Mr(Ze,fn,Tr.context),En=!1);var vn=!1;if((xn=Tr.framebuffer)?(xn.propDep?sn=vn=!0:xn.contextDep&&sn&&(vn=!0),vn||Wr(Ze,fn,xn)):Wr(Ze,fn,null),Tr.state.viewport&&Tr.state.viewport.propDep&&(sn=!0),nn(Ze,fn,Tr),Nr(Ze,fn,Tr.state,function(Er){return!_r(Er)}),Tr.profile&&_r(Tr.profile)||hn(Ze,fn,Tr,!1,"a1"),Tr.contextDep=sn,Tr.needsContext=En,Tr.needsFramebuffer=vn,(En=Tr.shader.progVar).contextDep&&sn||En.propDep)wn(Ze,fn,Tr,null);else if(En=En.append(Ze,fn),fn(Ze.shared.gl,".useProgram(",En,".program);"),Tr.shader.program)wn(Ze,fn,Tr,Tr.shader.program);else{fn(Ze.shared.vao,".setVAO(null);");var xn=Ze.global.def("{}"),Lr=(vn=fn.def(En,".id"),fn.def(xn,"[",vn,"]"));fn(Ze.cond(Lr).then(Lr,".call(this,a0,a1);").else(Lr,"=",xn,"[",vn,"]=",Ze.link(function(Dr){return Or(wn,Ze,Tr,Dr,2)}),"(",En,");",Lr,".call(this,a0,a1);"))}0<Object.keys(Tr.state).length&&fn(Ze.shared.current,".dirty=true;"),Ze.shared.vao&&fn(Ze.shared.vao,".setVAO(null);")}(En,xn),et(En.compile(),{destroy:function(){xn.shader.program.destroy()}})}}}function rt(ue,Ne){for(var Ye=0;Ye<ue.length;++Ye)if(ue[Ye]===Ne)return Ye;return-1}var et=function(ue,Ne){for(var Ye=Object.keys(Ne),xr=0;xr<Ye.length;++xr)ue[Ye[xr]]=Ne[Ye[xr]];return ue},st=0,dt={DynamicVariable:W,define:function(ue,Ne){return new W(ue,A(Ne+""))},isDynamic:function(ue){return"function"==typeof ue&&!ue._reglType||ue instanceof W},unbox:function g(ue,Ne){return"function"==typeof ue?new W(0,ue):"number"==typeof ue||"boolean"==typeof ue?new W(5,ue):Array.isArray(ue)?new W(6,ue.map(function(Ye,xr){return g(Ye,Ne+"["+xr+"]")})):ue instanceof W?ue:void 0},accessor:A},bt={next:"function"==typeof requestAnimationFrame?function(ue){return requestAnimationFrame(ue)}:function(ue){return setTimeout(ue,16)},cancel:"function"==typeof cancelAnimationFrame?function(ue){return cancelAnimationFrame(ue)}:clearTimeout},gt="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},Lt=s();Lt.zero=s();var Mt=function(ue){return ue instanceof Uint8Array||ue instanceof Uint16Array||ue instanceof Uint32Array||ue instanceof Int8Array||ue instanceof Int16Array||ue instanceof Int32Array||ue instanceof Float32Array||ue instanceof Float64Array||ue instanceof Uint8ClampedArray},xt=function(ue){return Object.keys(ue).map(function(Ne){return ue[Ne]})},At={shape:function(ue){for(var Ne=[];ue.length;ue=ue[0])Ne.push(ue.length);return Ne},flatten:function(ue,Ne,Ye,xr){var rr=1;if(Ne.length)for(var ce=0;ce<Ne.length;++ce)rr*=Ne[ce];else rr=0;switch(Ye=xr||Lt.allocType(Ye,rr),Ne.length){case 0:break;case 1:for(xr=Ne[0],Ne=0;Ne<xr;++Ne)Ye[Ne]=ue[Ne];break;case 2:for(xr=Ne[0],Ne=Ne[1],ce=rr=0;ce<xr;++ce)for(var re=ue[ce],ve=0;ve<Ne;++ve)Ye[rr++]=re[ve];break;case 3:f(ue,Ne[0],Ne[1],Ne[2],Ye,0);break;default:m(ue,Ne,0,Ye,0)}return Ye}},Gt={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Wt={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Pt={dynamic:35048,stream:35040,static:35044},Vt=At.flatten,te=At.shape,Qt=[];Qt[5120]=1,Qt[5122]=2,Qt[5124]=4,Qt[5121]=1,Qt[5123]=2,Qt[5125]=4,Qt[5126]=4;var Bt={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ot=new Float32Array(1),qt=new Uint32Array(Ot.buffer),ie=[9984,9986,9985,9987],oe=[0,6409,6410,6407,6408],pe={};pe[6409]=pe[6406]=pe[6402]=1,pe[34041]=pe[6410]=2,pe[6407]=pe[35904]=3,pe[6408]=pe[35906]=4;var de=L("HTMLCanvasElement"),Fe=L("OffscreenCanvas"),Kt=L("CanvasRenderingContext2D"),Et=L("ImageBitmap"),St=L("HTMLImageElement"),Dt=L("HTMLVideoElement"),Ft=Object.keys(Gt).concat([de,Fe,Kt,Et,St,Dt]),Nt=[];Nt[5121]=1,Nt[5126]=4,Nt[36193]=2,Nt[5123]=2,Nt[5125]=4;var Rt=[];Rt[32854]=2,Rt[32855]=2,Rt[36194]=2,Rt[34041]=4,Rt[33776]=.5,Rt[33777]=.5,Rt[33778]=1,Rt[33779]=1,Rt[35986]=.5,Rt[35987]=1,Rt[34798]=1,Rt[35840]=.5,Rt[35841]=.25,Rt[35842]=.5,Rt[35843]=.25,Rt[36196]=.5;var wt=[];wt[32854]=2,wt[32855]=2,wt[36194]=2,wt[33189]=2,wt[36168]=1,wt[34041]=4,wt[35907]=4,wt[34836]=16,wt[34842]=8,wt[34843]=6;var pt=[];pt[6408]=4,pt[6407]=3;var kt=[];kt[5121]=1,kt[5126]=4,kt[36193]=2;var Zt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],ee=["x","y","z","w"],se="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Be={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ke={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},xe={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Pe={cw:2304,ccw:2305},Ge=new G(!1,!1,!1,function(){});return function(ue){function Ne(){if(0===hn.length)Se&&Se.update(),Or=null;else{Or=bt.next(Ne),Te();for(var dn=hn.length-1;0<=dn;--dn){var pn=hn[dn];pn&&pn(qe,null,0)}Xe.flush(),Se&&Se.update()}}function Ye(){!Or&&0<hn.length&&(Or=bt.next(Ne))}function xr(){Or&&(bt.cancel(Ne),Or=null)}function rr(dn){dn.preventDefault(),xr(),hr.forEach(function(pn){pn()})}function ce(dn){Xe.getError(),nr.restore(),dr.restore(),De.restore(),Pr.restore(),Jr.restore(),Mr.restore(),yr.restore(),Se&&Se.restore(),Wr.procs.refresh(),Ye(),Ar.forEach(function(pn){pn()})}function re(dn){function pn(gn,Fn){var Tn={},Mn={};return Object.keys(gn).forEach(function(In){var Gn=gn[In];if(dt.isDynamic(Gn))Mn[In]=dt.unbox(Gn,In);else{if(Fn&&Array.isArray(Gn))for(var ua=0;ua<Gn.length;++ua)if(dt.isDynamic(Gn[ua]))return void(Mn[In]=dt.unbox(Gn,In));Tn[In]=Gn}}),{dynamic:Mn,static:Tn}}var Ln=pn(dn.context||{},!0),Qn=pn(dn.uniforms||{},!0),Nn=pn(dn.attributes||{},!1);dn=pn(function(gn){function Fn(Mn){if(Mn in Tn){var In=Tn[Mn];delete Tn[Mn],Object.keys(In).forEach(function(Gn){Tn[Mn+"."+Gn]=In[Gn]})}}var Tn=et({},gn);return delete Tn.uniforms,delete Tn.attributes,delete Tn.context,delete Tn.vao,"stencil"in Tn&&Tn.stencil.op&&(Tn.stencil.opBack=Tn.stencil.opFront=Tn.stencil.op,delete Tn.stencil.op),Fn("blend"),Fn("depth"),Fn("cull"),Fn("stencil"),Fn("polygonOffset"),Fn("scissor"),Fn("sample"),"vao"in gn&&(Tn.vao=gn.vao),Tn}(dn),!1);var Zn={gpuTime:0,cpuTime:0,count:0},Bn=Wr.compile(dn,Nn,Qn,Ln,Zn),Wn=Bn.draw,wr=Bn.batch,en=Bn.scope,tn=[];return et(function(gn,Fn){var Tn;if("function"==typeof gn)return en.call(this,null,gn,0);if("function"==typeof Fn)if("number"==typeof gn)for(Tn=0;Tn<gn;++Tn)en.call(this,null,Fn,Tn);else{if(!Array.isArray(gn))return en.call(this,gn,Fn,0);for(Tn=0;Tn<gn.length;++Tn)en.call(this,gn[Tn],Fn,Tn)}else if("number"==typeof gn){if(0<gn)return wr.call(this,function wn(gn){for(;tn.length<gn;)tn.push(null);return tn}(0|gn),0|gn)}else{if(!Array.isArray(gn))return Wn.call(this,gn);if(gn.length)return wr.call(this,gn,gn.length)}},{stats:Zn,destroy:function(){Bn.destroy()}})}function ve(dn,pn){var wn=0;Wr.procs.poll();var Ln=pn.color;Ln&&(Xe.clearColor(+Ln[0]||0,+Ln[1]||0,+Ln[2]||0,+Ln[3]||0),wn|=16384),"depth"in pn&&(Xe.clearDepth(+pn.depth),wn|=256),"stencil"in pn&&(Xe.clearStencil(0|pn.stencil),wn|=1024),Xe.clear(wn)}function be(dn){return hn.push(dn),Ye(),{cancel:function(){var wn=rt(hn,dn);hn[wn]=function pn(){var Ln=rt(hn,pn);hn[Ln]=hn[hn.length-1],--hn.length,0>=hn.length&&xr()}}}}function Ae(){var dn=Nr.viewport,pn=Nr.scissor_box;dn[0]=dn[1]=pn[0]=pn[1]=0,qe.viewportWidth=qe.framebufferWidth=qe.drawingBufferWidth=dn[2]=pn[2]=Xe.drawingBufferWidth,qe.viewportHeight=qe.framebufferHeight=qe.drawingBufferHeight=dn[3]=pn[3]=Xe.drawingBufferHeight}function Te(){qe.tick+=1,qe.time=Ie(),Ae(),Wr.procs.poll()}function Re(){Pr.refresh(),Ae(),Wr.procs.refresh(),Se&&Se.update()}function Ie(){return(gt()-Ce)/1e3}if(!(ue=e(ue)))return null;var Xe=ue.gl,ar=Xe.getContextAttributes();Xe.isContextLost();var nr=function r(ue,Ne){function Ye(re){var ve;re=re.toLowerCase();try{ve=xr[re]=ue.getExtension(re)}catch(be){}return!!ve}for(var xr={},rr=0;rr<Ne.extensions.length;++rr){var ce=Ne.extensions[rr];if(!Ye(ce))return Ne.onDestroy(),Ne.onDone('"'+ce+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Ne.optionalExtensions.forEach(Ye),{extensions:xr,restore:function(){Object.keys(xr).forEach(function(re){if(xr[re]&&!Ye(re))throw Error("(regl): error restoring extension "+re)})}}}(Xe,ue);if(!nr)return null;var nn=function i(){var ue={"":0},Ne=[""];return{id:function(Ye){var xr=ue[Ye];return xr||(xr=ue[Ye]=Ne.length,Ne.push(Ye),xr)},str:function(Ye){return Ne[Ye]}}}(),cr={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Ut=ue.cachedCode||{},Ht=nr.extensions,Se=function(ue,Ne){function Ye(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function xr(Te,Re,Ie){var Xe=re.pop()||new Ye;Xe.startQueryIndex=Te,Xe.endQueryIndex=Re,Xe.sum=0,Xe.stats=Ie,ve.push(Xe)}if(!Ne.ext_disjoint_timer_query)return null;var rr=[],ce=[],re=[],ve=[],be=[],Ae=[];return{beginQuery:function(Te){var Re=rr.pop()||Ne.ext_disjoint_timer_query.createQueryEXT();Ne.ext_disjoint_timer_query.beginQueryEXT(35007,Re),ce.push(Re),xr(ce.length-1,ce.length,Te)},endQuery:function(){Ne.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:xr,update:function(){var Te,Re;if(0!==(Te=ce.length)){Ae.length=Math.max(Ae.length,Te+1),be.length=Math.max(be.length,Te+1),be[0]=0;var Ie=Ae[0]=0;for(Re=Te=0;Re<ce.length;++Re)Ne.ext_disjoint_timer_query.getQueryObjectEXT(Xe=ce[Re],34919)?(Ie+=Ne.ext_disjoint_timer_query.getQueryObjectEXT(Xe,34918),rr.push(Xe)):ce[Te++]=Xe,be[Re+1]=Ie,Ae[Re+1]=Te;for(ce.length=Te,Re=Te=0;Re<ve.length;++Re){var Xe,ar=(Ie=ve[Re]).startQueryIndex;Ie.sum+=be[Xe=Ie.endQueryIndex]-be[ar],(Xe=Ae[Xe])===(ar=Ae[ar])?(Ie.stats.gpuTime+=Ie.sum/1e6,re.push(Ie)):(Ie.startQueryIndex=ar,Ie.endQueryIndex=Xe,ve[Te++]=Ie)}ve.length=Te}},getNumPendingQueries:function(){return ce.length},clear:function(){rr.push.apply(rr,ce);for(var Te=0;Te<rr.length;Te++)Ne.ext_disjoint_timer_query.deleteQueryEXT(rr[Te]);ce.length=0,rr.length=0},restore:function(){ce.length=0,rr.length=0}}}(0,Ht),Ce=gt(),We=Xe.drawingBufferHeight,qe={tick:0,time:0,viewportWidth:or=Xe.drawingBufferWidth,viewportHeight:We,framebufferWidth:or,framebufferHeight:We,drawingBufferWidth:or,drawingBufferHeight:We,pixelRatio:ue.pixelRatio},or={elements:null,primitive:4,count:-1,offset:0,instances:-1},_e=function(ue,Ne){var Ye=1;Ne.ext_texture_filter_anisotropic&&(Ye=ue.getParameter(34047));var xr=1,rr=1;Ne.webgl_draw_buffers&&(xr=ue.getParameter(34852),rr=ue.getParameter(36063));var ce=!!Ne.oes_texture_float;if(ce){ce=ue.createTexture(),ue.bindTexture(3553,ce),ue.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var re=ue.createFramebuffer();if(ue.bindFramebuffer(36160,re),ue.framebufferTexture2D(36160,36064,3553,ce,0),ue.bindTexture(3553,null),36053!==ue.checkFramebufferStatus(36160))ce=!1;else{ue.viewport(0,0,1,1),ue.clearColor(1,0,0,1),ue.clear(16384);var ve=Lt.allocType(5126,4);ue.readPixels(0,0,1,1,6408,5126,ve),ue.getError()?ce=!1:(ue.deleteFramebuffer(re),ue.deleteTexture(ce),ce=1===ve[0]),Lt.freeType(ve)}}return ve=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(ve=ue.createTexture(),re=Lt.allocType(5121,36),ue.activeTexture(33984),ue.bindTexture(34067,ve),ue.texImage2D(34069,0,6408,3,3,0,6408,5121,re),Lt.freeType(re),ue.bindTexture(34067,null),ue.deleteTexture(ve),ve=!ue.getError()),{colorBits:[ue.getParameter(3410),ue.getParameter(3411),ue.getParameter(3412),ue.getParameter(3413)],depthBits:ue.getParameter(3414),stencilBits:ue.getParameter(3415),subpixelBits:ue.getParameter(3408),extensions:Object.keys(Ne).filter(function(be){return!!Ne[be]}),maxAnisotropic:Ye,maxDrawbuffers:xr,maxColorAttachments:rr,pointSizeDims:ue.getParameter(33901),lineWidthDims:ue.getParameter(33902),maxViewportDims:ue.getParameter(3386),maxCombinedTextureUnits:ue.getParameter(35661),maxCubeMapSize:ue.getParameter(34076),maxRenderbufferSize:ue.getParameter(34024),maxTextureUnits:ue.getParameter(34930),maxTextureSize:ue.getParameter(3379),maxAttributes:ue.getParameter(34921),maxVertexUniforms:ue.getParameter(36347),maxVertexTextureUnits:ue.getParameter(35660),maxVaryingVectors:ue.getParameter(36348),maxFragmentUniforms:ue.getParameter(36349),glsl:ue.getParameter(35724),renderer:ue.getParameter(7937),vendor:ue.getParameter(7936),version:ue.getParameter(7938),readFloat:ce,npotTextureCube:ve}}(Xe,Ht),De=function o(ue,Ne,Ye,xr){function rr(Re){this.id=be++,this.buffer=ue.createBuffer(),this.type=Re,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Ye.profile&&(this.stats={size:0})}function ce(Re,Ie,Xe){Re.byteLength=Ie.byteLength,ue.bufferData(Re.type,Ie,Xe)}function re(Re,Ie,Xe,ar,nr,cr){if(Re.usage=Xe,Array.isArray(Ie)){if(Re.dtype=ar||5126,0<Ie.length)if(Array.isArray(Ie[0])){nr=te(Ie);for(var Ut=ar=1;Ut<nr.length;++Ut)ar*=nr[Ut];Re.dimension=ar,ce(Re,Ie=Vt(Ie,nr,Re.dtype),Xe),cr?Re.persistentData=Ie:Lt.freeType(Ie)}else"number"==typeof Ie[0]?(Re.dimension=nr,w(nr=Lt.allocType(Re.dtype,Ie.length),Ie),ce(Re,nr,Xe),cr?Re.persistentData=nr:Lt.freeType(nr)):Mt(Ie[0])&&(Re.dimension=Ie[0].length,Re.dtype=ar||h(Ie[0])||5126,ce(Re,Ie=Vt(Ie,[Ie.length,Ie[0].length],Re.dtype),Xe),cr?Re.persistentData=Ie:Lt.freeType(Ie))}else if(Mt(Ie))Re.dtype=ar||h(Ie),Re.dimension=nr,ce(Re,Ie,Xe),cr&&(Re.persistentData=new Uint8Array(new Uint8Array(Ie.buffer)));else if(c(Ie)){var Ht=Ie.stride,Se=(Ut=Ie.offset,0),Ce=0,We=0,qe=0;1===(nr=Ie.shape).length?(Se=nr[0],Ce=1,We=Ht[0],qe=0):2===nr.length&&(Se=nr[0],Ce=nr[1],We=Ht[0],qe=Ht[1]),Re.dtype=ar||h(Ie.data)||5126,Re.dimension=Ce,p(nr=Lt.allocType(Re.dtype,Se*Ce),Ie.data,Se,Ce,We,qe,Ut),ce(Re,nr,Xe),cr?Re.persistentData=nr:Lt.freeType(nr)}else Ie instanceof ArrayBuffer&&(Re.dtype=5121,Re.dimension=nr,ce(Re,Ie,Xe),cr&&(Re.persistentData=new Uint8Array(new Uint8Array(Ie))))}function ve(Re){Ne.bufferCount--,xr(Re),ue.deleteBuffer(Re.buffer),Re.buffer=null,delete Ae[Re.id]}var be=0,Ae={};rr.prototype.bind=function(){ue.bindBuffer(this.type,this.buffer)},rr.prototype.destroy=function(){ve(this)};var Te=[];return Ye.profile&&(Ne.getTotalBufferSize=function(){var Re=0;return Object.keys(Ae).forEach(function(Ie){Re+=Ae[Ie].stats.size}),Re}),{create:function(Re,Ie,Xe,ar){function nr(Ut){var Ht=35044,Se=null,Ce=0,We=0,qe=1;return Array.isArray(Ut)||Mt(Ut)||c(Ut)||Ut instanceof ArrayBuffer?Se=Ut:"number"==typeof Ut?Ce=0|Ut:Ut&&("data"in Ut&&(Se=Ut.data),"usage"in Ut&&(Ht=Pt[Ut.usage]),"type"in Ut&&(We=Wt[Ut.type]),"dimension"in Ut&&(qe=0|Ut.dimension),"length"in Ut&&(Ce=0|Ut.length)),cr.bind(),Se?re(cr,Se,Ht,We,qe,ar):(Ce&&ue.bufferData(cr.type,Ce,Ht),cr.dtype=We||5121,cr.usage=Ht,cr.dimension=qe,cr.byteLength=Ce),Ye.profile&&(cr.stats.size=cr.byteLength*Qt[cr.dtype]),nr}Ne.bufferCount++;var cr=new rr(Ie);return Ae[cr.id]=cr,Xe||nr(Re),nr._reglType="buffer",nr._buffer=cr,nr.subdata=function(Ut,Ht){var Ce,Se=0|(Ht||0);if(cr.bind(),Mt(Ut)||Ut instanceof ArrayBuffer)ue.bufferSubData(cr.type,Se,Ut);else if(Array.isArray(Ut)){if(0<Ut.length)if("number"==typeof Ut[0]){var We=Lt.allocType(cr.dtype,Ut.length);w(We,Ut),ue.bufferSubData(cr.type,Se,We),Lt.freeType(We)}else(Array.isArray(Ut[0])||Mt(Ut[0]))&&(Ce=te(Ut),We=Vt(Ut,Ce,cr.dtype),ue.bufferSubData(cr.type,Se,We),Lt.freeType(We))}else if(c(Ut)){var qe=Ut.stride,or=We=0,_e=0,De=0;1===(Ce=Ut.shape).length?(We=Ce[0],or=1,_e=qe[0],De=0):2===Ce.length&&(We=Ce[0],or=Ce[1],_e=qe[0],De=qe[1]),Ce=Array.isArray(Ut.data)?cr.dtype:h(Ut.data),p(Ce=Lt.allocType(Ce,We*or),Ut.data,We,or,_e,De,Ut.offset),ue.bufferSubData(cr.type,Se,Ce),Lt.freeType(Ce)}return nr},Ye.profile&&(nr.stats=cr.stats),nr.destroy=function(){ve(cr)},nr},createStream:function(Re,Ie){var Xe=Te.pop();return Xe||(Xe=new rr(Re)),Xe.bind(),re(Xe,Ie,35040,0,1,!1),Xe},destroyStream:function(Re){Te.push(Re)},clear:function(){xt(Ae).forEach(ve),Te.forEach(ve)},getBuffer:function(Re){return Re&&Re._buffer instanceof rr?Re._buffer:null},restore:function(){xt(Ae).forEach(function(Re){Re.buffer=ue.createBuffer(),ue.bindBuffer(Re.type,Re.buffer),ue.bufferData(Re.type,Re.persistentData||Re.byteLength,Re.usage)})},_initBuffer:re}}(Xe,cr,ue,function(dn){return yr.destroyBuffer(dn)}),sr=function v(ue,Ne,Ye,xr){function rr(Re){this.id=be++,ve[this.id]=this,this.buffer=Re,this.primType=4,this.type=this.vertCount=0}function ce(Re,Ie,Xe,ar,nr,cr,Ut){var Ht;if(Re.buffer.bind(),Ie?((Ht=Ut)||Mt(Ie)&&(!c(Ie)||Mt(Ie.data))||(Ht=Ne.oes_element_index_uint?5125:5123),Ye._initBuffer(Re.buffer,Ie,Xe,Ht,3)):(ue.bufferData(34963,cr,Xe),Re.buffer.dtype=Ht||5121,Re.buffer.usage=Xe,Re.buffer.dimension=3,Re.buffer.byteLength=cr),Ht=Ut,!Ut){switch(Re.buffer.dtype){case 5121:case 5120:Ht=5121;break;case 5123:case 5122:Ht=5123;break;case 5125:case 5124:Ht=5125}Re.buffer.dtype=Ht}Re.type=Ht,0>(Ie=nr)&&(Ie=Re.buffer.byteLength,5123===Ht?Ie>>=1:5125===Ht&&(Ie>>=2)),Re.vertCount=Ie,Ie=ar,0>ar&&(Ie=4,1===(ar=Re.buffer.dimension)&&(Ie=0),2===ar&&(Ie=1),3===ar&&(Ie=4)),Re.primType=Ie}function re(Re){xr.elementsCount--,delete ve[Re.id],Re.buffer.destroy(),Re.buffer=null}var ve={},be=0,Ae={uint8:5121,uint16:5123};Ne.oes_element_index_uint&&(Ae.uint32=5125),rr.prototype.bind=function(){this.buffer.bind()};var Te=[];return{create:function(Re,Ie){function Xe(cr){if(cr)if("number"==typeof cr)ar(cr),nr.primType=4,nr.vertCount=0|cr,nr.type=5121;else{var Ut=null,Ht=35044,Se=-1,Ce=-1,We=0,qe=0;Array.isArray(cr)||Mt(cr)||c(cr)?Ut=cr:("data"in cr&&(Ut=cr.data),"usage"in cr&&(Ht=Pt[cr.usage]),"primitive"in cr&&(Se=Bt[cr.primitive]),"count"in cr&&(Ce=0|cr.count),"type"in cr&&(qe=Ae[cr.type]),"length"in cr?We=0|cr.length:(We=Ce,5123===qe||5122===qe?We*=2:(5125===qe||5124===qe)&&(We*=4))),ce(nr,Ut,Ht,Se,Ce,We,qe)}else ar(),nr.primType=4,nr.vertCount=0,nr.type=5121;return Xe}var ar=Ye.create(null,34963,!0),nr=new rr(ar._buffer);return xr.elementsCount++,Xe(Re),Xe._reglType="elements",Xe._elements=nr,Xe.subdata=function(cr,Ut){return ar.subdata(cr,Ut),Xe},Xe.destroy=function(){re(nr)},Xe},createStream:function(Re){var Ie=Te.pop();return Ie||(Ie=new rr(Ye.create(null,34963,!0,!1)._buffer)),ce(Ie,Re,35040,-1,-1,0,0),Ie},destroyStream:function(Re){Te.push(Re)},getElements:function(Re){return"function"==typeof Re&&Re._elements instanceof rr?Re._elements:null},clear:function(){xt(ve).forEach(re)}}}(Xe,Ht,De,cr),yr=function k(ue,Ne,Ye,xr,rr,ce,re){function Te(){this.id=++ar,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var Ut=Ne.oes_vertex_array_object;this.vao=Ut?Ut.createVertexArrayOES():null,nr[this.id]=this,this.buffers=[]}var Ie=Ye.maxAttributes,Xe=Array(Ie);for(Ye=0;Ye<Ie;++Ye)Xe[Ye]=new N;var ar=0,nr={},cr={Record:N,scope:{},state:Xe,currentVAO:null,targetVAO:null,restore:Ne.oes_vertex_array_object?function Re(){Ne.oes_vertex_array_object&&xt(nr).forEach(function(Ut){Ut.refresh()})}:function(){},createVAO:function(Ut){function Ht(Ce){var We;Array.isArray(Ce)?(We=Ce,Se.elements&&Se.ownsElements&&Se.elements.destroy(),Se.elements=null,Se.ownsElements=!1,Se.offset=0,Se.count=0,Se.instances=-1,Se.primitive=4):(Ce.elements?(We=Ce.elements,Se.ownsElements?("function"==typeof We&&"elements"===We._reglType?Se.elements.destroy():Se.elements(We),Se.ownsElements=!1):ce.getElements(Ce.elements)?(Se.elements=Ce.elements,Se.ownsElements=!1):(Se.elements=ce.create(Ce.elements),Se.ownsElements=!0)):(Se.elements=null,Se.ownsElements=!1),We=Ce.attributes,Se.offset=0,Se.count=-1,Se.instances=-1,Se.primitive=4,Se.elements&&(Se.count=Se.elements._elements.vertCount,Se.primitive=Se.elements._elements.primType),"offset"in Ce&&(Se.offset=0|Ce.offset),"count"in Ce&&(Se.count=0|Ce.count),"instances"in Ce&&(Se.instances=0|Ce.instances),"primitive"in Ce&&(Se.primitive=Bt[Ce.primitive])),Ce={};var qe=Se.attributes;qe.length=We.length;for(var or=0;or<We.length;++or){var yr,_e=We[or],De=qe[or]=new N,sr=_e.data||_e;Array.isArray(sr)||Mt(sr)||c(sr)?(Se.buffers[or]&&(yr=Se.buffers[or],Mt(sr)&&yr._buffer.byteLength>=sr.byteLength?yr.subdata(sr):(yr.destroy(),Se.buffers[or]=null)),Se.buffers[or]||(yr=Se.buffers[or]=rr.create(_e,34962,!1,!0)),De.buffer=rr.getBuffer(yr),De.size=0|De.buffer.dimension,De.normalized=!1,De.type=De.buffer.dtype,De.offset=0,De.stride=0,De.divisor=0,De.state=1,Ce[or]=1):rr.getBuffer(_e)?(De.buffer=rr.getBuffer(_e),De.size=0|De.buffer.dimension,De.normalized=!1,De.type=De.buffer.dtype,De.offset=0,De.stride=0,De.divisor=0,De.state=1):rr.getBuffer(_e.buffer)?(De.buffer=rr.getBuffer(_e.buffer),De.size=0|(+_e.size||De.buffer.dimension),De.normalized=!!_e.normalized||!1,De.type="type"in _e?Wt[_e.type]:De.buffer.dtype,De.offset=0|(_e.offset||0),De.stride=0|(_e.stride||0),De.divisor=0|(_e.divisor||0),De.state=1):"x"in _e&&(De.x=+_e.x||0,De.y=+_e.y||0,De.z=+_e.z||0,De.w=+_e.w||0,De.state=2)}for(yr=0;yr<Se.buffers.length;++yr)!Ce[yr]&&Se.buffers[yr]&&(Se.buffers[yr].destroy(),Se.buffers[yr]=null);return Se.refresh(),Ht}var Se=new Te;return xr.vaoCount+=1,Ht.destroy=function(){for(var Ce=0;Ce<Se.buffers.length;++Ce)Se.buffers[Ce]&&Se.buffers[Ce].destroy();Se.buffers.length=0,Se.ownsElements&&(Se.elements.destroy(),Se.elements=null,Se.ownsElements=!1),Se.destroy()},Ht._vao=Se,Ht._reglType="vao",Ht(Ut)},getVAO:function(Ut){return"function"==typeof Ut&&Ut._vao?Ut._vao:null},destroyBuffer:function(Ut){for(var Ht=0;Ht<Xe.length;++Ht){var Se=Xe[Ht];Se.buffer===Ut&&(ue.disableVertexAttribArray(Ht),Se.buffer=null)}},setVAO:Ne.oes_vertex_array_object?function ve(Ut){Ut!==cr.currentVAO&&(Ne.oes_vertex_array_object.bindVertexArrayOES(Ut?Ut.vao:null),cr.currentVAO=Ut)}:function be(Ut){if(Ut!==cr.currentVAO){if(Ut)Ut.bindAttrs();else{for(var Ht=Ne.angle_instanced_arrays,Se=0;Se<Xe.length;++Se){var Ce=Xe[Se];Ce.buffer?(ue.enableVertexAttribArray(Se),Ce.buffer.bind(),ue.vertexAttribPointer(Se,Ce.size,Ce.type,Ce.normalized,Ce.stride,Ce.offfset),Ht&&Ce.divisor&&Ht.vertexAttribDivisorANGLE(Se,Ce.divisor)):(ue.disableVertexAttribArray(Se),ue.vertexAttrib4f(Se,Ce.x,Ce.y,Ce.z,Ce.w))}ue.bindBuffer(34963,re.elements?re.elements.buffer.buffer:null)}cr.currentVAO=Ut}},clear:Ne.oes_vertex_array_object?function Ae(){xt(nr).forEach(function(Ut){Ut.destroy()})}:function(){}};return Te.prototype.bindAttrs=function(){for(var Ut=Ne.angle_instanced_arrays,Ht=this.attributes,Se=0;Se<Ht.length;++Se){var Ce=Ht[Se];Ce.buffer?(ue.enableVertexAttribArray(Se),ue.bindBuffer(34962,Ce.buffer.buffer),ue.vertexAttribPointer(Se,Ce.size,Ce.type,Ce.normalized,Ce.stride,Ce.offset),Ut&&Ce.divisor&&Ut.vertexAttribDivisorANGLE(Se,Ce.divisor)):(ue.disableVertexAttribArray(Se),ue.vertexAttrib4f(Se,Ce.x,Ce.y,Ce.z,Ce.w))}for(Ut=Ht.length;Ut<Ie;++Ut)ue.disableVertexAttribArray(Ut);(Ut=ce.getElements(this.elements))?ue.bindBuffer(34963,Ut.buffer.buffer):ue.bindBuffer(34963,null)},Te.prototype.refresh=function(){var Ut=Ne.oes_vertex_array_object;Ut&&(Ut.bindVertexArrayOES(this.vao),this.bindAttrs(),cr.currentVAO=null,Ut.bindVertexArrayOES(null))},Te.prototype.destroy=function(){if(this.vao){var Ut=Ne.oes_vertex_array_object;this===cr.currentVAO&&(cr.currentVAO=null,Ut.bindVertexArrayOES(null)),Ut.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),nr[this.id]&&(delete nr[this.id],--xr.vaoCount)},cr}(Xe,Ht,_e,cr,De,sr,or),dr=function O(ue,Ne,Ye,xr){function rr(ar,nr,cr,Ut){this.name=ar,this.id=nr,this.location=cr,this.info=Ut}function ce(ar,nr){for(var cr=0;cr<ar.length;++cr)if(ar[cr].id===nr.id)return void(ar[cr].location=nr.location);ar.push(nr)}function re(ar,nr,cr){if(!(Ut=(cr=35632===ar?Ae:Te)[nr])){var Ht=Ne.str(nr),Ut=ue.createShader(ar);ue.shaderSource(Ut,Ht),ue.compileShader(Ut),cr[nr]=Ut}return Ut}function ve(ar,nr){this.id=Xe++,this.fragId=ar,this.vertId=nr,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,xr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function be(ar,nr,cr){var Ut;Ut=re(35632,ar.fragId);var Ht=re(35633,ar.vertId);if(nr=ar.program=ue.createProgram(),ue.attachShader(nr,Ut),ue.attachShader(nr,Ht),cr)for(Ut=0;Ut<cr.length;++Ut)ue.bindAttribLocation(nr,(Ht=cr[Ut])[0],Ht[1]);ue.linkProgram(nr),Ht=ue.getProgramParameter(nr,35718),xr.profile&&(ar.stats.uniformsCount=Ht);var Se=ar.uniforms;for(Ut=0;Ut<Ht;++Ut)if(cr=ue.getActiveUniform(nr,Ut))if(1<cr.size)for(var Ce=0;Ce<cr.size;++Ce){var We=cr.name.replace("[0]","["+Ce+"]");ce(Se,new rr(We,Ne.id(We),ue.getUniformLocation(nr,We),cr))}else ce(Se,new rr(cr.name,Ne.id(cr.name),ue.getUniformLocation(nr,cr.name),cr));for(Ht=ue.getProgramParameter(nr,35721),xr.profile&&(ar.stats.attributesCount=Ht),ar=ar.attributes,Ut=0;Ut<Ht;++Ut)(cr=ue.getActiveAttrib(nr,Ut))&&ce(ar,new rr(cr.name,Ne.id(cr.name),ue.getAttribLocation(nr,cr.name),cr))}var Ae={},Te={},Re={},Ie=[],Xe=0;return xr.profile&&(Ye.getMaxUniformsCount=function(){var ar=0;return Ie.forEach(function(nr){nr.stats.uniformsCount>ar&&(ar=nr.stats.uniformsCount)}),ar},Ye.getMaxAttributesCount=function(){var ar=0;return Ie.forEach(function(nr){nr.stats.attributesCount>ar&&(ar=nr.stats.attributesCount)}),ar}),{clear:function(){var ar=ue.deleteShader.bind(ue);xt(Ae).forEach(ar),Ae={},xt(Te).forEach(ar),Te={},Ie.forEach(function(nr){ue.deleteProgram(nr.program)}),Ie.length=0,Re={},Ye.shaderCount=0},program:function(ar,nr,cr,Ut){var Ht=Re[nr];Ht||(Ht=Re[nr]={});var Se=Ht[ar];if(Se&&(Se.refCount++,!Ut))return Se;var Ce=new ve(nr,ar);return Ye.shaderCount++,be(Ce,cr,Ut),Se||(Ht[ar]=Ce),Ie.push(Ce),et(Ce,{destroy:function(){if(Ce.refCount--,0>=Ce.refCount){ue.deleteProgram(Ce.program);var We=Ie.indexOf(Ce);Ie.splice(We,1),Ye.shaderCount--}0>=Ht[Ce.vertId].refCount&&(ue.deleteShader(Te[Ce.vertId]),delete Te[Ce.vertId],delete Re[Ce.fragId][Ce.vertId]),Object.keys(Re[Ce.fragId]).length||(ue.deleteShader(Ae[Ce.fragId]),delete Ae[Ce.fragId],delete Re[Ce.fragId])}})},restore:function(){Ae={},Te={};for(var ar=0;ar<Ie.length;++ar)be(Ie[ar],null,Ie[ar].attributes.map(function(nr){return[nr.location,nr.name]}))},shader:re,frag:-1,vert:-1}}(Xe,nn,cr,ue),Pr=function F(ue,Ne,Ye,xr,rr,ce,re){function ve(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function be(wr,en){wr.internalformat=en.internalformat,wr.format=en.format,wr.type=en.type,wr.compressed=en.compressed,wr.premultiplyAlpha=en.premultiplyAlpha,wr.flipY=en.flipY,wr.unpackAlignment=en.unpackAlignment,wr.colorSpace=en.colorSpace,wr.width=en.width,wr.height=en.height,wr.channels=en.channels}function Ae(wr,en){if("object"==typeof en&&en){"premultiplyAlpha"in en&&(wr.premultiplyAlpha=en.premultiplyAlpha),"flipY"in en&&(wr.flipY=en.flipY),"alignment"in en&&(wr.unpackAlignment=en.alignment),"colorSpace"in en&&(wr.colorSpace=nn[en.colorSpace]),"type"in en&&(wr.type=Nr[en.type]);var tn=wr.width,gn=wr.height,Fn=wr.channels,Tn=!1;"shape"in en?(tn=en.shape[0],gn=en.shape[1],3===en.shape.length&&(Fn=en.shape[2],Tn=!0)):("radius"in en&&(tn=gn=en.radius),"width"in en&&(tn=en.width),"height"in en&&(gn=en.height),"channels"in en&&(Fn=en.channels,Tn=!0)),wr.width=0|tn,wr.height=0|gn,wr.channels=0|Fn,tn=!1,"format"in en&&(gn=wr.internalformat=Dn[tn=en.format],wr.format=wn[gn],tn in Nr&&!("type"in en)&&(wr.type=Nr[tn]),tn in hn&&(wr.compressed=!0),tn=!0),!Tn&&tn?wr.channels=pe[wr.format]:Tn&&!tn&&wr.channels!==oe[wr.format]&&(wr.format=wr.internalformat=oe[wr.channels])}}function Te(wr){ue.pixelStorei(37440,wr.flipY),ue.pixelStorei(37441,wr.premultiplyAlpha),ue.pixelStorei(37443,wr.colorSpace),ue.pixelStorei(3317,wr.unpackAlignment)}function Re(){ve.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ie(wr,en){var tn=null;if(n(en)?tn=en:en&&(Ae(wr,en),"x"in en&&(wr.xOffset=0|en.x),"y"in en&&(wr.yOffset=0|en.y),n(en.data)&&(tn=en.data)),en.copy){var gn=rr.viewportWidth,Fn=rr.viewportHeight;wr.width=wr.width||gn-wr.xOffset,wr.height=wr.height||Fn-wr.yOffset,wr.needsCopy=!0}else if(tn){if(Mt(tn))wr.channels=wr.channels||4,wr.data=tn,"type"in en||5121!==wr.type||(wr.type=0|Gt[Object.prototype.toString.call(tn)]);else if(x(tn)){switch(wr.channels=wr.channels||4,Fn=(gn=tn).length,wr.type){case 5121:case 5123:case 5125:case 5126:(Fn=Lt.allocType(wr.type,Fn)).set(gn),wr.data=Fn;break;case 36193:wr.data=M(gn)}wr.alignment=1,wr.needsFree=!0}else if(c(tn)){gn=tn.data,Array.isArray(gn)||5121!==wr.type||(wr.type=0|Gt[Object.prototype.toString.call(gn)]);var Mn,In,Gn,ua,Tn=tn.stride;3===(Fn=tn.shape).length?(Gn=Fn[2],ua=Tn[2]):ua=Gn=1,Mn=Fn[0],In=Fn[1],Fn=Tn[0],Tn=Tn[1],wr.alignment=1,wr.width=Mn,wr.height=In,wr.channels=Gn,wr.format=wr.internalformat=oe[Gn],wr.needsFree=!0,Mn=ua,tn=tn.offset;for(var ka=Lt.allocType(36193===wr.type?5126:wr.type,(Gn=wr.width)*(ua=wr.height)*(In=wr.channels)),Ze=0,Tr=0;Tr<ua;++Tr)for(var _r=0;_r<Gn;++_r)for(var fn=0;fn<In;++fn)ka[Ze++]=gn[Fn*_r+Tn*Tr+Mn*fn+tn];E(wr,ka)}else if(T(tn)===de||T(tn)===Fe||T(tn)===Kt)wr.element=T(tn)===de||T(tn)===Fe?tn:tn.canvas,wr.width=wr.element.width,wr.height=wr.element.height,wr.channels=4;else if(T(tn)===Et)wr.element=tn,wr.width=tn.width,wr.height=tn.height,wr.channels=4;else if(T(tn)===St)wr.element=tn,wr.width=tn.naturalWidth,wr.height=tn.naturalHeight,wr.channels=4;else if(T(tn)===Dt)wr.element=tn,wr.width=tn.videoWidth,wr.height=tn.videoHeight,wr.channels=4;else if(S(tn)){for(gn=wr.width||tn[0].length,Fn=wr.height||tn.length,Tn=wr.channels,Tn=b(tn[0][0])?Tn||tn[0][0].length:Tn||1,Mn=At.shape(tn),Gn=1,ua=0;ua<Mn.length;++ua)Gn*=Mn[ua];Gn=Lt.allocType(36193===wr.type?5126:wr.type,Gn),At.flatten(tn,Mn,"",Gn),E(wr,Gn),wr.alignment=1,wr.width=gn,wr.height=Fn,wr.channels=Tn,wr.format=wr.internalformat=oe[Tn],wr.needsFree=!0}}else wr.width=wr.width||1,wr.height=wr.height||1,wr.channels=wr.channels||4}function Xe(wr,en,tn,gn,Fn){var Tn=wr.element,Mn=wr.data,In=wr.internalformat,Gn=wr.format,ua=wr.type,ka=wr.width,Ze=wr.height;Te(wr),Tn?ue.texSubImage2D(en,Fn,tn,gn,Gn,ua,Tn):wr.compressed?ue.compressedTexSubImage2D(en,Fn,tn,gn,In,ka,Ze,Mn):wr.needsCopy?(xr(),ue.copyTexSubImage2D(en,Fn,tn,gn,wr.xOffset,wr.yOffset,ka,Ze)):ue.texSubImage2D(en,Fn,tn,gn,ka,Ze,Gn,ua,Mn)}function ar(){return Ln.pop()||new Re}function nr(wr){wr.needsFree&&Lt.freeType(wr.data),Re.call(wr),Ln.push(wr)}function cr(){ve.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Ut(wr,en,tn){var gn=wr.images[0]=ar();wr.mipmask=1,gn.width=wr.width=en,gn.height=wr.height=tn,gn.channels=wr.channels=4}function Ht(wr,en){var tn=null;if(n(en))be(tn=wr.images[0]=ar(),wr),Ie(tn,en),wr.mipmask=1;else if(Ae(wr,en),Array.isArray(en.mipmap))for(var gn=en.mipmap,Fn=0;Fn<gn.length;++Fn)be(tn=wr.images[Fn]=ar(),wr),tn.width>>=Fn,tn.height>>=Fn,Ie(tn,gn[Fn]),wr.mipmask|=1<<Fn;else be(tn=wr.images[0]=ar(),wr),Ie(tn,en),wr.mipmask=1;be(wr,wr.images[0])}function Se(wr,en){for(var tn=wr.images,gn=0;gn<tn.length&&tn[gn];++gn){var Fn=tn[gn],Tn=en,Mn=gn,In=Fn.element,Gn=Fn.data,ua=Fn.internalformat,ka=Fn.format,Ze=Fn.type,Tr=Fn.width,_r=Fn.height;Te(Fn),In?ue.texImage2D(Tn,Mn,ka,ka,Ze,In):Fn.compressed?ue.compressedTexImage2D(Tn,Mn,ua,Tr,_r,0,Gn):Fn.needsCopy?(xr(),ue.copyTexImage2D(Tn,Mn,ka,Fn.xOffset,Fn.yOffset,Tr,_r,0)):ue.texImage2D(Tn,Mn,ka,Tr,_r,0,ka,Ze,Gn||null)}}function Ce(){var wr=Qn.pop()||new cr;ve.call(wr);for(var en=wr.mipmask=0;16>en;++en)wr.images[en]=null;return wr}function We(wr){for(var en=wr.images,tn=0;tn<en.length;++tn)en[tn]&&nr(en[tn]),en[tn]=null;Qn.push(wr)}function qe(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function or(wr,en){"min"in en&&(wr.minFilter=Wr[en.min],0<=ie.indexOf(wr.minFilter)&&!("faces"in en)&&(wr.genMipmaps=!0)),"mag"in en&&(wr.magFilter=Mr[en.mag]);var tn=wr.wrapS,gn=wr.wrapT;if("wrap"in en){var Fn=en.wrap;"string"==typeof Fn?tn=gn=Jr[Fn]:Array.isArray(Fn)&&(tn=Jr[Fn[0]],gn=Jr[Fn[1]])}else"wrapS"in en&&(tn=Jr[en.wrapS]),"wrapT"in en&&(gn=Jr[en.wrapT]);if(wr.wrapS=tn,wr.wrapT=gn,"anisotropic"in en&&(wr.anisotropic=en.anisotropic),"mipmap"in en){switch(tn=!1,typeof en.mipmap){case"string":wr.mipmapHint=Pr[en.mipmap],tn=wr.genMipmaps=!0;break;case"boolean":tn=wr.genMipmaps=en.mipmap;break;case"object":wr.genMipmaps=!1,tn=!0}!tn||"min"in en||(wr.minFilter=9984)}}function _e(wr,en){ue.texParameteri(en,10241,wr.minFilter),ue.texParameteri(en,10240,wr.magFilter),ue.texParameteri(en,10242,wr.wrapS),ue.texParameteri(en,10243,wr.wrapT),Ne.ext_texture_filter_anisotropic&&ue.texParameteri(en,34046,wr.anisotropic),wr.genMipmaps&&(ue.hint(33170,wr.mipmapHint),ue.generateMipmap(en))}function De(wr){ve.call(this),this.mipmask=0,this.internalformat=6408,this.id=Nn++,this.refCount=1,this.target=wr,this.texture=ue.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new qe,re.profile&&(this.stats={size:0})}function sr(wr){ue.activeTexture(33984),ue.bindTexture(wr.target,wr.texture)}function yr(){var wr=Wn[0];wr?ue.bindTexture(wr.target,wr.texture):ue.bindTexture(3553,null)}function dr(wr){var en=wr.texture,tn=wr.unit,gn=wr.target;0<=tn&&(ue.activeTexture(33984+tn),ue.bindTexture(gn,null),Wn[tn]=null),ue.deleteTexture(en),wr.texture=null,wr.params=null,wr.pixels=null,wr.refCount=0,delete Zn[wr.id],ce.textureCount--}var Pr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Jr={repeat:10497,clamp:33071,mirror:33648},Mr={nearest:9728,linear:9729},Wr=et({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Mr),nn={none:0,browser:37444},Nr={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Dn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},hn={};Ne.ext_srgb&&(Dn.srgb=35904,Dn.srgba=35906),Ne.oes_texture_float&&(Nr.float32=Nr.float=5126),Ne.oes_texture_half_float&&(Nr.float16=Nr["half float"]=36193),Ne.webgl_depth_texture&&(et(Dn,{depth:6402,"depth stencil":34041}),et(Nr,{uint16:5123,uint32:5125,"depth stencil":34042})),Ne.webgl_compressed_texture_s3tc&&et(hn,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Ne.webgl_compressed_texture_atc&&et(hn,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Ne.webgl_compressed_texture_pvrtc&&et(hn,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Ne.webgl_compressed_texture_etc1&&(hn["rgb etc1"]=36196);var hr=Array.prototype.slice.call(ue.getParameter(34467));Object.keys(hn).forEach(function(wr){var en=hn[wr];0<=hr.indexOf(en)&&(Dn[wr]=en)});var Ar=Object.keys(Dn);Ye.textureFormats=Ar;var Br=[];Object.keys(Dn).forEach(function(wr){Br[Dn[wr]]=wr});var Or=[];Object.keys(Nr).forEach(function(wr){Or[Nr[wr]]=wr});var an=[];Object.keys(Mr).forEach(function(wr){an[Mr[wr]]=wr});var dn=[];Object.keys(Wr).forEach(function(wr){dn[Wr[wr]]=wr});var pn=[];Object.keys(Jr).forEach(function(wr){pn[Jr[wr]]=wr});var wn=Ar.reduce(function(wr,en){var tn=Dn[en];return wr[tn]=6409===tn||6406===tn||6409===tn||6410===tn||6402===tn||34041===tn||Ne.ext_srgb&&(35904===tn||35906===tn)?tn:32855===tn||0<=en.indexOf("rgba")?6408:6407,wr},{}),Ln=[],Qn=[],Nn=0,Zn={},Bn=Ye.maxTextureUnits,Wn=Array(Bn).map(function(){return null});return et(De.prototype,{bind:function(){this.bindCount+=1;var wr=this.unit;if(0>wr){for(var en=0;en<Bn;++en){var tn=Wn[en];if(tn){if(0<tn.bindCount)continue;tn.unit=-1}Wn[en]=this,wr=en;break}re.profile&&ce.maxTextureUnits<wr+1&&(ce.maxTextureUnits=wr+1),this.unit=wr,ue.activeTexture(33984+wr),ue.bindTexture(this.target,this.texture)}return wr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&dr(this)}}),re.profile&&(ce.getTotalTextureSize=function(){var wr=0;return Object.keys(Zn).forEach(function(en){wr+=Zn[en].stats.size}),wr}),{create2D:function(wr,en){function tn(Fn,Tn){var Mn=gn.texInfo;qe.call(Mn);var In=Ce();return"number"==typeof Fn?Ut(In,0|Fn,"number"==typeof Tn?0|Tn:0|Fn):Fn?(or(Mn,Fn),Ht(In,Fn)):Ut(In,1,1),Mn.genMipmaps&&(In.mipmask=(In.width<<1)-1),gn.mipmask=In.mipmask,be(gn,In),gn.internalformat=In.internalformat,tn.width=In.width,tn.height=In.height,sr(gn),Se(In,3553),_e(Mn,3553),yr(),We(In),re.profile&&(gn.stats.size=d(gn.internalformat,gn.type,In.width,In.height,Mn.genMipmaps,!1)),tn.format=Br[gn.internalformat],tn.type=Or[gn.type],tn.mag=an[Mn.magFilter],tn.min=dn[Mn.minFilter],tn.wrapS=pn[Mn.wrapS],tn.wrapT=pn[Mn.wrapT],tn}var gn=new De(3553);return Zn[gn.id]=gn,ce.textureCount++,tn(wr,en),tn.subimage=function(Fn,Tn,Mn,In){Tn|=0,Mn|=0,In|=0;var Gn=ar();return be(Gn,gn),Gn.width=0,Gn.height=0,Ie(Gn,Fn),Gn.width=Gn.width||(gn.width>>In)-Tn,Gn.height=Gn.height||(gn.height>>In)-Mn,sr(gn),Xe(Gn,3553,Tn,Mn,In),yr(),nr(Gn),tn},tn.resize=function(Fn,Tn){var Mn=0|Fn,In=0|Tn||Mn;if(Mn===gn.width&&In===gn.height)return tn;tn.width=gn.width=Mn,tn.height=gn.height=In,sr(gn);for(var Gn=0;gn.mipmask>>Gn;++Gn){var ua=Mn>>Gn,ka=In>>Gn;if(!ua||!ka)break;ue.texImage2D(3553,Gn,gn.format,ua,ka,0,gn.format,gn.type,null)}return yr(),re.profile&&(gn.stats.size=d(gn.internalformat,gn.type,Mn,In,!1,!1)),tn},tn._reglType="texture2d",tn._texture=gn,re.profile&&(tn.stats=gn.stats),tn.destroy=function(){gn.decRef()},tn},createCube:function(wr,en,tn,gn,Fn,Tn){function Mn(ua,ka,Ze,Tr,_r,fn){var sn,En=In.texInfo;for(qe.call(En),sn=0;6>sn;++sn)Gn[sn]=Ce();if("number"!=typeof ua&&ua){if("object"==typeof ua)if(ka)Ht(Gn[0],ua),Ht(Gn[1],ka),Ht(Gn[2],Ze),Ht(Gn[3],Tr),Ht(Gn[4],_r),Ht(Gn[5],fn);else if(or(En,ua),Ae(In,ua),"faces"in ua)for(ua=ua.faces,sn=0;6>sn;++sn)be(Gn[sn],In),Ht(Gn[sn],ua[sn]);else for(sn=0;6>sn;++sn)Ht(Gn[sn],ua)}else for(ua=0|ua||1,sn=0;6>sn;++sn)Ut(Gn[sn],ua,ua);for(be(In,Gn[0]),In.mipmask=En.genMipmaps?(Gn[0].width<<1)-1:Gn[0].mipmask,In.internalformat=Gn[0].internalformat,Mn.width=Gn[0].width,Mn.height=Gn[0].height,sr(In),sn=0;6>sn;++sn)Se(Gn[sn],34069+sn);for(_e(En,34067),yr(),re.profile&&(In.stats.size=d(In.internalformat,In.type,Mn.width,Mn.height,En.genMipmaps,!0)),Mn.format=Br[In.internalformat],Mn.type=Or[In.type],Mn.mag=an[En.magFilter],Mn.min=dn[En.minFilter],Mn.wrapS=pn[En.wrapS],Mn.wrapT=pn[En.wrapT],sn=0;6>sn;++sn)We(Gn[sn]);return Mn}var In=new De(34067);Zn[In.id]=In,ce.cubeCount++;var Gn=Array(6);return Mn(wr,en,tn,gn,Fn,Tn),Mn.subimage=function(ua,ka,Ze,Tr,_r){Ze|=0,Tr|=0,_r|=0;var fn=ar();return be(fn,In),fn.width=0,fn.height=0,Ie(fn,ka),fn.width=fn.width||(In.width>>_r)-Ze,fn.height=fn.height||(In.height>>_r)-Tr,sr(In),Xe(fn,34069+ua,Ze,Tr,_r),yr(),nr(fn),Mn},Mn.resize=function(ua){if((ua|=0)!==In.width){Mn.width=In.width=ua,Mn.height=In.height=ua,sr(In);for(var ka=0;6>ka;++ka)for(var Ze=0;In.mipmask>>Ze;++Ze)ue.texImage2D(34069+ka,Ze,In.format,ua>>Ze,ua>>Ze,0,In.format,In.type,null);return yr(),re.profile&&(In.stats.size=d(In.internalformat,In.type,Mn.width,Mn.height,!1,!0)),Mn}},Mn._reglType="textureCube",Mn._texture=In,re.profile&&(Mn.stats=In.stats),Mn.destroy=function(){In.decRef()},Mn},clear:function(){for(var wr=0;wr<Bn;++wr)ue.activeTexture(33984+wr),ue.bindTexture(3553,null),Wn[wr]=null;xt(Zn).forEach(dr),ce.cubeCount=0,ce.textureCount=0},getTexture:function(wr){return null},restore:function(){for(var wr=0;wr<Bn;++wr){var en=Wn[wr];en&&(en.bindCount=0,en.unit=-1,Wn[wr]=null)}xt(Zn).forEach(function(tn){tn.texture=ue.createTexture(),ue.bindTexture(tn.target,tn.texture);for(var gn=0;32>gn;++gn)if(0!=(tn.mipmask&1<<gn))if(3553===tn.target)ue.texImage2D(3553,gn,tn.internalformat,tn.width>>gn,tn.height>>gn,0,tn.internalformat,tn.type,null);else for(var Fn=0;6>Fn;++Fn)ue.texImage2D(34069+Fn,gn,tn.internalformat,tn.width>>gn,tn.height>>gn,0,tn.internalformat,tn.type,null);_e(tn.texInfo,tn.target)})},refresh:function(){for(var wr=0;wr<Bn;++wr){var en=Wn[wr];en&&(en.bindCount=0,en.unit=-1,Wn[wr]=null),ue.activeTexture(33984+wr),ue.bindTexture(3553,null),ue.bindTexture(34067,null)}}}}(Xe,Ht,_e,function(){Wr.procs.poll()},qe,cr,ue),Jr=function(ue,Ne,Ye,xr,rr){function ce(Re){this.id=Ae++,this.refCount=1,this.renderbuffer=Re,this.format=32854,this.height=this.width=0,rr.profile&&(this.stats={size:0})}function re(Re){var Ie=Re.renderbuffer;ue.bindRenderbuffer(36161,null),ue.deleteRenderbuffer(Ie),Re.renderbuffer=null,Re.refCount=0,delete Te[Re.id],xr.renderbufferCount--}var ve={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Ne.ext_srgb&&(ve.srgba=35907),Ne.ext_color_buffer_half_float&&(ve.rgba16f=34842,ve.rgb16f=34843),Ne.webgl_color_buffer_float&&(ve.rgba32f=34836);var be=[];Object.keys(ve).forEach(function(Re){be[ve[Re]]=Re});var Ae=0,Te={};return ce.prototype.decRef=function(){0>=--this.refCount&&re(this)},rr.profile&&(xr.getTotalRenderbufferSize=function(){var Re=0;return Object.keys(Te).forEach(function(Ie){Re+=Te[Ie].stats.size}),Re}),{create:function(Re,Ie){function Xe(nr,cr){var Ut=0,Ht=0,Se=32854;if("object"==typeof nr&&nr?("shape"in nr?(Ut=0|(Ht=nr.shape)[0],Ht=0|Ht[1]):("radius"in nr&&(Ut=Ht=0|nr.radius),"width"in nr&&(Ut=0|nr.width),"height"in nr&&(Ht=0|nr.height)),"format"in nr&&(Se=ve[nr.format])):"number"==typeof nr?(Ut=0|nr,Ht="number"==typeof cr?0|cr:Ut):nr||(Ut=Ht=1),Ut!==ar.width||Ht!==ar.height||Se!==ar.format)return Xe.width=ar.width=Ut,Xe.height=ar.height=Ht,ar.format=Se,ue.bindRenderbuffer(36161,ar.renderbuffer),ue.renderbufferStorage(36161,Se,Ut,Ht),rr.profile&&(ar.stats.size=wt[ar.format]*ar.width*ar.height),Xe.format=be[ar.format],Xe}var ar=new ce(ue.createRenderbuffer());return Te[ar.id]=ar,xr.renderbufferCount++,Xe(Re,Ie),Xe.resize=function(nr,cr){var Ut=0|nr,Ht=0|cr||Ut;return Ut===ar.width&&Ht===ar.height||(Xe.width=ar.width=Ut,Xe.height=ar.height=Ht,ue.bindRenderbuffer(36161,ar.renderbuffer),ue.renderbufferStorage(36161,ar.format,Ut,Ht),rr.profile&&(ar.stats.size=wt[ar.format]*ar.width*ar.height)),Xe},Xe._reglType="renderbuffer",Xe._renderbuffer=ar,rr.profile&&(Xe.stats=ar.stats),Xe.destroy=function(){ar.decRef()},Xe},clear:function(){xt(Te).forEach(re)},restore:function(){xt(Te).forEach(function(Re){Re.renderbuffer=ue.createRenderbuffer(),ue.bindRenderbuffer(36161,Re.renderbuffer),ue.renderbufferStorage(36161,Re.format,Re.width,Re.height)}),ue.bindRenderbuffer(36161,null)}}}(Xe,Ht,0,cr,ue),Mr=function D(ue,Ne,Ye,xr,rr,ce){function re(De,sr,yr){this.target=De,this.texture=sr,this.renderbuffer=yr;var dr=De=0;sr?(De=sr.width,dr=sr.height):yr&&(De=yr.width,dr=yr.height),this.width=De,this.height=dr}function ve(De){De&&(De.texture&&De.texture._texture.decRef(),De.renderbuffer&&De.renderbuffer._renderbuffer.decRef())}function be(De,sr,yr){De&&(De.texture?De.texture._texture.refCount+=1:De.renderbuffer._renderbuffer.refCount+=1)}function Ae(De,sr){sr&&(sr.texture?ue.framebufferTexture2D(36160,De,sr.target,sr.texture._texture.texture,0):ue.framebufferRenderbuffer(36160,De,36161,sr.renderbuffer._renderbuffer.renderbuffer))}function Te(De){var sr=3553,yr=null,dr=null,Pr=De;return"object"==typeof De&&(Pr=De.data,"target"in De&&(sr=0|De.target)),"texture2d"===(De=Pr._reglType)||"textureCube"===De?yr=Pr:"renderbuffer"===De&&(dr=Pr,sr=36161),new re(sr,yr,dr)}function Re(De,sr,yr,dr,Pr){return yr?((De=xr.create2D({width:De,height:sr,format:dr,type:Pr}))._texture.refCount=0,new re(3553,De,null)):((De=rr.create({width:De,height:sr,format:dr}))._renderbuffer.refCount=0,new re(36161,null,De))}function Ie(De){return De&&(De.texture||De.renderbuffer)}function Xe(De,sr,yr){De&&(De.texture?De.texture.resize(sr,yr):De.renderbuffer&&De.renderbuffer.resize(sr,yr),De.width=sr,De.height=yr)}function ar(){this.id=or++,_e[this.id]=this,this.framebuffer=ue.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function nr(De){De.colorAttachments.forEach(ve),ve(De.depthAttachment),ve(De.stencilAttachment),ve(De.depthStencilAttachment)}function cr(De){ue.deleteFramebuffer(De.framebuffer),De.framebuffer=null,ce.framebufferCount--,delete _e[De.id]}function Ut(De){var sr;ue.bindFramebuffer(36160,De.framebuffer);var yr=De.colorAttachments;for(sr=0;sr<yr.length;++sr)Ae(36064+sr,yr[sr]);for(sr=yr.length;sr<Ye.maxColorAttachments;++sr)ue.framebufferTexture2D(36160,36064+sr,3553,null,0);ue.framebufferTexture2D(36160,33306,3553,null,0),ue.framebufferTexture2D(36160,36096,3553,null,0),ue.framebufferTexture2D(36160,36128,3553,null,0),Ae(36096,De.depthAttachment),Ae(36128,De.stencilAttachment),Ae(33306,De.depthStencilAttachment),ue.checkFramebufferStatus(36160),ue.isContextLost(),ue.bindFramebuffer(36160,Se.next?Se.next.framebuffer:null),Se.cur=Se.next,ue.getError()}function Ht(De,sr){function yr(Pr,Jr){var Mr,Wr=0,nn=0,Nr=!0,Dn=!0;Mr=null;var hn=!0,hr="rgba",Ar="uint8",Br=1,Or=null,an=null,dn=null,pn=!1;"number"==typeof Pr?(Wr=0|Pr,nn=0|Jr||Wr):Pr?("shape"in Pr?(Wr=(nn=Pr.shape)[0],nn=nn[1]):("radius"in Pr&&(Wr=nn=Pr.radius),"width"in Pr&&(Wr=Pr.width),"height"in Pr&&(nn=Pr.height)),("color"in Pr||"colors"in Pr)&&(Mr=Pr.color||Pr.colors,Array.isArray(Mr)),Mr||("colorCount"in Pr&&(Br=0|Pr.colorCount),"colorTexture"in Pr&&(hn=!!Pr.colorTexture,hr="rgba4"),"colorType"in Pr&&(Ar=Pr.colorType,!hn)&&("half float"===Ar||"float16"===Ar?hr="rgba16f":("float"===Ar||"float32"===Ar)&&(hr="rgba32f")),"colorFormat"in Pr&&(0<=Ce.indexOf(hr=Pr.colorFormat)?hn=!0:0<=We.indexOf(hr)&&(hn=!1))),("depthTexture"in Pr||"depthStencilTexture"in Pr)&&(pn=!(!Pr.depthTexture&&!Pr.depthStencilTexture)),"depth"in Pr&&("boolean"==typeof Pr.depth?Nr=Pr.depth:(Or=Pr.depth,Dn=!1)),"stencil"in Pr&&("boolean"==typeof Pr.stencil?Dn=Pr.stencil:(an=Pr.stencil,Nr=!1)),"depthStencil"in Pr&&("boolean"==typeof Pr.depthStencil?Nr=Dn=Pr.depthStencil:(dn=Pr.depthStencil,Dn=Nr=!1))):Wr=nn=1;var wn=null,Ln=null,Qn=null,Nn=null;if(Array.isArray(Mr))wn=Mr.map(Te);else if(Mr)wn=[Te(Mr)];else for(wn=Array(Br),Mr=0;Mr<Br;++Mr)wn[Mr]=Re(Wr,nn,hn,hr,Ar);for(Wr=Wr||wn[0].width,nn=nn||wn[0].height,Or?Ln=Te(Or):Nr&&!Dn&&(Ln=Re(Wr,nn,pn,"depth","uint32")),an?Qn=Te(an):Dn&&!Nr&&(Qn=Re(Wr,nn,!1,"stencil","uint8")),dn?Nn=Te(dn):!Or&&!an&&Dn&&Nr&&(Nn=Re(Wr,nn,pn,"depth stencil","depth stencil")),Nr=null,Mr=0;Mr<wn.length;++Mr)be(wn[Mr]),wn[Mr]&&wn[Mr].texture&&(Dn=pt[wn[Mr].texture._texture.format]*kt[wn[Mr].texture._texture.type],null===Nr&&(Nr=Dn));return be(Ln),be(Qn),be(Nn),nr(dr),dr.width=Wr,dr.height=nn,dr.colorAttachments=wn,dr.depthAttachment=Ln,dr.stencilAttachment=Qn,dr.depthStencilAttachment=Nn,yr.color=wn.map(Ie),yr.depth=Ie(Ln),yr.stencil=Ie(Qn),yr.depthStencil=Ie(Nn),yr.width=dr.width,yr.height=dr.height,Ut(dr),yr}var dr=new ar;return ce.framebufferCount++,yr(De,sr),et(yr,{resize:function(Pr,Jr){var Mr=Math.max(0|Pr,1),Wr=Math.max(0|Jr||Mr,1);if(Mr===dr.width&&Wr===dr.height)return yr;for(var nn=dr.colorAttachments,Nr=0;Nr<nn.length;++Nr)Xe(nn[Nr],Mr,Wr);return Xe(dr.depthAttachment,Mr,Wr),Xe(dr.stencilAttachment,Mr,Wr),Xe(dr.depthStencilAttachment,Mr,Wr),dr.width=yr.width=Mr,dr.height=yr.height=Wr,Ut(dr),yr},_reglType:"framebuffer",_framebuffer:dr,destroy:function(){cr(dr),nr(dr)},use:function(Pr){Se.setFBO({framebuffer:yr},Pr)}})}var Se={cur:null,next:null,dirty:!1,setFBO:null},Ce=["rgba"],We=["rgba4","rgb565","rgb5 a1"];Ne.ext_srgb&&We.push("srgba"),Ne.ext_color_buffer_half_float&&We.push("rgba16f","rgb16f"),Ne.webgl_color_buffer_float&&We.push("rgba32f");var qe=["uint8"];Ne.oes_texture_half_float&&qe.push("half float","float16"),Ne.oes_texture_float&&qe.push("float","float32");var or=0,_e={};return et(Se,{getFramebuffer:function(De){return"function"==typeof De&&"framebuffer"===De._reglType&&(De=De._framebuffer)instanceof ar?De:null},create:Ht,createCube:function(De){function sr(dr){var Pr,Jr={color:null},Mr=0,Wr=null;Pr="rgba";var nn="uint8",Nr=1;if("number"==typeof dr?Mr=0|dr:dr?("shape"in dr?Mr=dr.shape[0]:("radius"in dr&&(Mr=0|dr.radius),"width"in dr?Mr=0|dr.width:"height"in dr&&(Mr=0|dr.height)),("color"in dr||"colors"in dr)&&(Wr=dr.color||dr.colors,Array.isArray(Wr)),Wr||("colorCount"in dr&&(Nr=0|dr.colorCount),"colorType"in dr&&(nn=dr.colorType),"colorFormat"in dr&&(Pr=dr.colorFormat)),"depth"in dr&&(Jr.depth=dr.depth),"stencil"in dr&&(Jr.stencil=dr.stencil),"depthStencil"in dr&&(Jr.depthStencil=dr.depthStencil)):Mr=1,Wr)if(Array.isArray(Wr))for(dr=[],Pr=0;Pr<Wr.length;++Pr)dr[Pr]=Wr[Pr];else dr=[Wr];else for(dr=Array(Nr),Wr={radius:Mr,format:Pr,type:nn},Pr=0;Pr<Nr;++Pr)dr[Pr]=xr.createCube(Wr);for(Jr.color=Array(dr.length),Pr=0;Pr<dr.length;++Pr)Nr=dr[Pr],Mr=Mr||Nr.width,Jr.color[Pr]={target:34069,data:dr[Pr]};for(Pr=0;6>Pr;++Pr){for(Nr=0;Nr<dr.length;++Nr)Jr.color[Nr].target=34069+Pr;0<Pr&&(Jr.depth=yr[0].depth,Jr.stencil=yr[0].stencil,Jr.depthStencil=yr[0].depthStencil),yr[Pr]?yr[Pr](Jr):yr[Pr]=Ht(Jr)}return et(sr,{width:Mr,height:Mr,color:dr})}var yr=Array(6);return sr(De),et(sr,{faces:yr,resize:function(dr){var Pr=0|dr;if(Pr===sr.width)return sr;var Jr=sr.color;for(dr=0;dr<Jr.length;++dr)Jr[dr].resize(Pr);for(dr=0;6>dr;++dr)yr[dr].resize(Pr);return sr.width=sr.height=Pr,sr},_reglType:"framebufferCube",destroy:function(){yr.forEach(function(dr){dr.destroy()})}})},clear:function(){xt(_e).forEach(cr)},restore:function(){Se.cur=null,Se.next=null,Se.dirty=!0,xt(_e).forEach(function(De){De.framebuffer=ue.createFramebuffer(),Ut(De)})}})}(Xe,Ht,_e,Pr,Jr,cr),Wr=X(Xe,nn,Ht,_e,De,sr,0,Mr,{},yr,dr,or,qe,Se,Ut,ue),Nr=(nn=B(Xe,Mr,Wr.procs.poll,qe),Wr.next),Dn=Xe.canvas,hn=[],hr=[],Ar=[],Br=[ue.onDestroy],Or=null;Dn&&(Dn.addEventListener("webglcontextlost",rr,!1),Dn.addEventListener("webglcontextrestored",ce,!1));var an=Mr.setFBO=re({framebuffer:dt.define.call(null,1,"framebuffer")});return Re(),ar=et(re,{clear:function(dn){if("framebuffer"in dn)if(dn.framebuffer&&"framebufferCube"===dn.framebuffer_reglType)for(var pn=0;6>pn;++pn)an(et({framebuffer:dn.framebuffer.faces[pn]},dn),ve);else an(dn,ve);else ve(0,dn)},prop:dt.define.bind(null,1),context:dt.define.bind(null,2),this:dt.define.bind(null,3),draw:re({}),buffer:function(dn){return De.create(dn,34962,!1,!1)},elements:function(dn){return sr.create(dn,!1)},texture:Pr.create2D,cube:Pr.createCube,renderbuffer:Jr.create,framebuffer:Mr.create,framebufferCube:Mr.createCube,vao:yr.createVAO,attributes:ar,frame:be,on:function(dn,pn){var wn;switch(dn){case"frame":return be(pn);case"lost":wn=hr;break;case"restore":wn=Ar;break;case"destroy":wn=Br}return wn.push(pn),{cancel:function(){for(var Ln=0;Ln<wn.length;++Ln)if(wn[Ln]===pn){wn[Ln]=wn[wn.length-1],wn.pop();break}}}},limits:_e,hasExtension:function(dn){return 0<=_e.extensions.indexOf(dn.toLowerCase())},read:nn,destroy:function(){hn.length=0,xr(),Dn&&(Dn.removeEventListener("webglcontextlost",rr),Dn.removeEventListener("webglcontextrestored",ce)),dr.clear(),Mr.clear(),Jr.clear(),yr.clear(),Pr.clear(),sr.clear(),De.clear(),Se&&Se.clear(),Br.forEach(function(dn){dn()})},_gl:Xe,_refresh:Re,poll:function(){Te(),Se&&Se.update()},now:Ie,stats:cr,getCachedCode:function(){return Ut},preloadCachedCode:function(dn){Object.entries(dn).forEach(function(pn){Ut[pn[0]]=pn[1]})}}),ue.onDone(null,ar),ar}},q.exports=t()},71665:function(q,W,t){var A=t(12856),g=A.Buffer;function i(C,u){for(var y in C)u[y]=C[y]}function P(C,u,y){return g(C,u,y)}g.from&&g.alloc&&g.allocUnsafe&&g.allocUnsafeSlow?q.exports=A:(i(A,W),W.Buffer=P),P.prototype=Object.create(g.prototype),i(g,P),P.from=function(C,u,y){if("number"==typeof C)throw new TypeError("Argument must not be a number");return g(C,u,y)},P.alloc=function(C,u,y){if("number"!=typeof C)throw new TypeError("Argument must be a number");var e=g(C);return void 0!==u?"string"==typeof y?e.fill(u,y):e.fill(u):e.fill(0),e},P.allocUnsafe=function(C){if("number"!=typeof C)throw new TypeError("Argument must be a number");return g(C)},P.allocUnsafeSlow=function(C){if("number"!=typeof C)throw new TypeError("Argument must be a number");return A.SlowBuffer(C)}},21630:function(q,W,t){q.exports=i;var A=t(15398).EventEmitter;function i(){A.call(this)}t(42018)(i,A),i.Readable=t(40410),i.Writable=t(37493),i.Duplex=t(37865),i.Transform=t(74308),i.PassThrough=t(66897),i.finished=t(12726),i.pipeline=t(10168),i.Stream=i,i.prototype.pipe=function(P,C){var u=this;function y(f){P.writable&&!1===P.write(f)&&u.pause&&u.pause()}function e(){u.readable&&u.resume&&u.resume()}u.on("data",y),P.on("drain",e),!P._isStdio&&(!C||!1!==C.end)&&(u.on("end",l),u.on("close",a));var r=!1;function l(){r||(r=!0,P.end())}function a(){r||(r=!0,"function"==typeof P.destroy&&P.destroy())}function s(f){if(c(),0===A.listenerCount(this,"error"))throw f}function c(){u.removeListener("data",y),P.removeListener("drain",e),u.removeListener("end",l),u.removeListener("close",a),u.removeListener("error",s),P.removeListener("error",s),u.removeListener("end",c),u.removeListener("close",c),P.removeListener("close",c)}return u.on("error",s),P.on("error",s),u.on("end",c),u.on("close",c),P.on("close",c),P.emit("pipe",u),P}},74322:function(q){"use strict";var t={};function A(u,y,e){e||(e=Error);var l=function(a){function s(c,f,m){return a.call(this,function r(a,s,c){return"string"==typeof y?y:y(a,s,c)}(c,f,m))||this}return function W(u,y){u.prototype=Object.create(y.prototype),u.prototype.constructor=u,u.__proto__=y}(s,a),s}(e);l.prototype.name=e.name,l.prototype.code=u,t[u]=l}function g(u,y){if(Array.isArray(u)){var e=u.length;return u=u.map(function(r){return String(r)}),e>2?"one of ".concat(y," ").concat(u.slice(0,e-1).join(", "),", or ")+u[e-1]:2===e?"one of ".concat(y," ").concat(u[0]," or ").concat(u[1]):"of ".concat(y," ").concat(u[0])}return"of ".concat(y," ").concat(String(u))}A("ERR_INVALID_OPT_VALUE",function(u,y){return'The value "'+y+'" is invalid for option "'+u+'"'},TypeError),A("ERR_INVALID_ARG_TYPE",function(u,y,e){var r,l;if("string"==typeof y&&function i(u,y,e){return u.substr(!e||e<0?0:+e,y.length)===y}(y,"not ")?(r="must not be",y=y.replace(/^not /,"")):r="must be",function P(u,y,e){return(void 0===e||e>u.length)&&(e=u.length),u.substring(e-y.length,e)===y}(u," argument"))l="The ".concat(u," ").concat(r," ").concat(g(y,"type"));else{var a=function C(u,y,e){return"number"!=typeof e&&(e=0),!(e+y.length>u.length)&&-1!==u.indexOf(y,e)}(u,".")?"property":"argument";l='The "'.concat(u,'" ').concat(a," ").concat(r," ").concat(g(y,"type"))}return l+". Received type ".concat(typeof e)},TypeError),A("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),A("ERR_METHOD_NOT_IMPLEMENTED",function(u){return"The "+u+" method is not implemented"}),A("ERR_STREAM_PREMATURE_CLOSE","Premature close"),A("ERR_STREAM_DESTROYED",function(u){return"Cannot call "+u+" after a stream was destroyed"}),A("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),A("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),A("ERR_STREAM_WRITE_AFTER_END","write after end"),A("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),A("ERR_UNKNOWN_ENCODING",function(u){return"Unknown encoding: "+u},TypeError),A("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),q.exports.q=t},37865:function(q,W,t){"use strict";var A=t(90386),g=Object.keys||function(a){var s=[];for(var c in a)s.push(c);return s};q.exports=e;var i=t(40410),P=t(37493);t(42018)(e,i);for(var C=g(P.prototype),u=0;u<C.length;u++){var y=C[u];e.prototype[y]||(e.prototype[y]=P.prototype[y])}function e(a){if(!(this instanceof e))return new e(a);i.call(this,a),P.call(this,a),this.allowHalfOpen=!0,a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",r)))}function r(){this._writableState.ended||A.nextTick(l,this)}function l(a){a.end()}Object.defineProperty(e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(e.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(s){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=s,this._writableState.destroyed=s)}})},66897:function(q,W,t){"use strict";q.exports=g;var A=t(74308);function g(i){if(!(this instanceof g))return new g(i);A.call(this,i)}t(42018)(g,A),g.prototype._transform=function(i,P,C){C(null,i)}},40410:function(q,W,t){"use strict";var g,A=t(90386);q.exports=E,E.ReadableState=n,t(15398);var P=function(rt,et){return rt.listeners(et).length},C=t(71405),u=t(12856).Buffer,y=t.g.Uint8Array||function(){};var a,l=t(40964);a=l&&l.debuglog?l.debuglog("stream"):function(){};var M,b,L,s=t(31125),c=t(65756),m=t(56306).getHighWaterMark,h=t(74322).q,w=h.ERR_INVALID_ARG_TYPE,p=h.ERR_STREAM_PUSH_AFTER_EOF,o=h.ERR_METHOD_NOT_IMPLEMENTED,v=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t(42018)(E,C);var x=c.errorOrDestroy,S=["error","close","destroy","pause","resume"];function n(X,rt,et){g=g||t(37865),"boolean"!=typeof et&&(et=rt instanceof g),this.objectMode=!!(X=X||{}).objectMode,et&&(this.objectMode=this.objectMode||!!X.readableObjectMode),this.highWaterMark=m(this,X,"readableHighWaterMark",et),this.buffer=new s,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==X.emitClose,this.autoDestroy=!!X.autoDestroy,this.destroyed=!1,this.defaultEncoding=X.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,X.encoding&&(M||(M=t(68019).s),this.decoder=new M(X.encoding),this.encoding=X.encoding)}function E(X){if(g=g||t(37865),!(this instanceof E))return new E(X);this._readableState=new n(X,this,this instanceof g),this.readable=!0,X&&("function"==typeof X.read&&(this._read=X.read),"function"==typeof X.destroy&&(this._destroy=X.destroy)),C.call(this)}function d(X,rt,et,st,dt){a("readableAddChunk",rt);var gt,bt=X._readableState;if(null===rt)bt.reading=!1,function B(X,rt){if(a("onEofChunk"),!rt.ended){if(rt.decoder){var et=rt.decoder.end();et&&et.length&&(rt.buffer.push(et),rt.length+=rt.objectMode?1:et.length)}rt.ended=!0,rt.sync?z(X):(rt.needReadable=!1,rt.emittedReadable||(rt.emittedReadable=!0,U(X)))}}(X,bt);else if(dt||(gt=function D(X,rt){var et;return!function r(X){return u.isBuffer(X)||X instanceof y}(rt)&&"string"!=typeof rt&&void 0!==rt&&!X.objectMode&&(et=new w("chunk",["string","Buffer","Uint8Array"],rt)),et}(bt,rt)),gt)x(X,gt);else if(bt.objectMode||rt&&rt.length>0)if("string"!=typeof rt&&!bt.objectMode&&Object.getPrototypeOf(rt)!==u.prototype&&(rt=function e(X){return u.from(X)}(rt)),st)bt.endEmitted?x(X,new v):F(X,bt,rt,!0);else if(bt.ended)x(X,new p);else{if(bt.destroyed)return!1;bt.reading=!1,bt.decoder&&!et?(rt=bt.decoder.write(rt),bt.objectMode||0!==rt.length?F(X,bt,rt,!1):H(X,bt)):F(X,bt,rt,!1)}else st||(bt.reading=!1,H(X,bt));return!bt.ended&&(bt.length<bt.highWaterMark||0===bt.length)}function F(X,rt,et,st){rt.flowing&&0===rt.length&&!rt.sync?(rt.awaitDrain=0,X.emit("data",et)):(rt.length+=rt.objectMode?1:et.length,st?rt.buffer.unshift(et):rt.buffer.push(et),rt.needReadable&&z(X)),H(X,rt)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(rt){!this._readableState||(this._readableState.destroyed=rt)}}),E.prototype.destroy=c.destroy,E.prototype._undestroy=c.undestroy,E.prototype._destroy=function(X,rt){rt(X)},E.prototype.push=function(X,rt){var st,et=this._readableState;return et.objectMode?st=!0:"string"==typeof X&&((rt=rt||et.defaultEncoding)!==et.encoding&&(X=u.from(X,rt),rt=""),st=!0),d(this,X,rt,!1,st)},E.prototype.unshift=function(X){return d(this,X,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(X){M||(M=t(68019).s);var rt=new M(X);this._readableState.decoder=rt,this._readableState.encoding=this._readableState.decoder.encoding;for(var et=this._readableState.buffer.head,st="";null!==et;)st+=rt.write(et.data),et=et.next;return this._readableState.buffer.clear(),""!==st&&this._readableState.buffer.push(st),this._readableState.length=st.length,this};var N=1073741824;function O(X,rt){return X<=0||0===rt.length&&rt.ended?0:rt.objectMode?1:X!=X?rt.flowing&&rt.length?rt.buffer.head.data.length:rt.length:(X>rt.highWaterMark&&(rt.highWaterMark=function k(X){return X>=N?X=N:(X--,X|=X>>>1,X|=X>>>2,X|=X>>>4,X|=X>>>8,X|=X>>>16,X++),X}(X)),X<=rt.length?X:rt.ended?rt.length:(rt.needReadable=!0,0))}function z(X){var rt=X._readableState;a("emitReadable",rt.needReadable,rt.emittedReadable),rt.needReadable=!1,rt.emittedReadable||(a("emitReadable",rt.flowing),rt.emittedReadable=!0,A.nextTick(U,X))}function U(X){var rt=X._readableState;a("emitReadable_",rt.destroyed,rt.length,rt.ended),!rt.destroyed&&(rt.length||rt.ended)&&(X.emit("readable"),rt.emittedReadable=!1),rt.needReadable=!rt.flowing&&!rt.ended&&rt.length<=rt.highWaterMark,Z(X)}function H(X,rt){rt.readingMore||(rt.readingMore=!0,A.nextTick(J,X,rt))}function J(X,rt){for(;!rt.reading&&!rt.ended&&(rt.length<rt.highWaterMark||rt.flowing&&0===rt.length);){var et=rt.length;if(a("maybeReadMore read 0"),X.read(0),et===rt.length)break}rt.readingMore=!1}function it(X){var rt=X._readableState;rt.readableListening=X.listenerCount("readable")>0,rt.resumeScheduled&&!rt.paused?rt.flowing=!0:X.listenerCount("data")>0&&X.resume()}function ut(X){a("readable nexttick read 0"),X.read(0)}function j(X,rt){a("resume",rt.reading),rt.reading||X.read(0),rt.resumeScheduled=!1,X.emit("resume"),Z(X),rt.flowing&&!rt.reading&&X.read(0)}function Z(X){var rt=X._readableState;for(a("flow",rt.flowing);rt.flowing&&null!==X.read(););}function G(X,rt){return 0===rt.length?null:(rt.objectMode?et=rt.buffer.shift():!X||X>=rt.length?(et=rt.decoder?rt.buffer.join(""):1===rt.buffer.length?rt.buffer.first():rt.buffer.concat(rt.length),rt.buffer.clear()):et=rt.buffer.consume(X,rt.decoder),et);var et}function K(X){var rt=X._readableState;a("endReadable",rt.endEmitted),rt.endEmitted||(rt.ended=!0,A.nextTick(at,rt,X))}function at(X,rt){if(a("endReadableNT",X.endEmitted,X.length),!X.endEmitted&&0===X.length&&(X.endEmitted=!0,rt.readable=!1,rt.emit("end"),X.autoDestroy)){var et=rt._writableState;(!et||et.autoDestroy&&et.finished)&&rt.destroy()}}function $(X,rt){for(var et=0,st=X.length;et<st;et++)if(X[et]===rt)return et;return-1}E.prototype.read=function(X){a("read",X),X=parseInt(X,10);var rt=this._readableState,et=X;if(0!==X&&(rt.emittedReadable=!1),0===X&&rt.needReadable&&((0!==rt.highWaterMark?rt.length>=rt.highWaterMark:rt.length>0)||rt.ended))return a("read: emitReadable",rt.length,rt.ended),0===rt.length&&rt.ended?K(this):z(this),null;if(0===(X=O(X,rt))&&rt.ended)return 0===rt.length&&K(this),null;var dt,st=rt.needReadable;return a("need readable",st),(0===rt.length||rt.length-X<rt.highWaterMark)&&a("length less than watermark",st=!0),rt.ended||rt.reading?a("reading or ended",st=!1):st&&(a("do read"),rt.reading=!0,rt.sync=!0,0===rt.length&&(rt.needReadable=!0),this._read(rt.highWaterMark),rt.sync=!1,rt.reading||(X=O(et,rt))),null===(dt=X>0?G(X,rt):null)?(rt.needReadable=rt.length<=rt.highWaterMark,X=0):(rt.length-=X,rt.awaitDrain=0),0===rt.length&&(rt.ended||(rt.needReadable=!0),et!==X&&rt.ended&&K(this)),null!==dt&&this.emit("data",dt),dt},E.prototype._read=function(X){x(this,new o("_read()"))},E.prototype.pipe=function(X,rt){var et=this,st=this._readableState;switch(st.pipesCount){case 0:st.pipes=X;break;case 1:st.pipes=[st.pipes,X];break;default:st.pipes.push(X)}st.pipesCount+=1,a("pipe count=%d opts=%j",st.pipesCount,rt);var bt=rt&&!1===rt.end||X===A.stdout||X===A.stderr?Vt:Lt;function gt(te,Qt){a("onunpipe"),te===et&&Qt&&!1===Qt.hasUnpiped&&(Qt.hasUnpiped=!0,function xt(){a("cleanup"),X.removeListener("close",Wt),X.removeListener("finish",Pt),X.removeListener("drain",It),X.removeListener("error",Gt),X.removeListener("unpipe",gt),et.removeListener("end",Lt),et.removeListener("end",Vt),et.removeListener("data",At),Mt=!0,st.awaitDrain&&(!X._writableState||X._writableState.needDrain)&&It()}())}function Lt(){a("onend"),X.end()}st.endEmitted?A.nextTick(bt):et.once("end",bt),X.on("unpipe",gt);var It=function nt(X){return function(){var et=X._readableState;a("pipeOnDrain",et.awaitDrain),et.awaitDrain&&et.awaitDrain--,0===et.awaitDrain&&P(X,"data")&&(et.flowing=!0,Z(X))}}(et);X.on("drain",It);var Mt=!1;function At(te){a("ondata");var Qt=X.write(te);a("dest.write",Qt),!1===Qt&&((1===st.pipesCount&&st.pipes===X||st.pipesCount>1&&-1!==$(st.pipes,X))&&!Mt&&(a("false write response, pause",st.awaitDrain),st.awaitDrain++),et.pause())}function Gt(te){a("onerror",te),Vt(),X.removeListener("error",Gt),0===P(X,"error")&&x(X,te)}function Wt(){X.removeListener("finish",Pt),Vt()}function Pt(){a("onfinish"),X.removeListener("close",Wt),Vt()}function Vt(){a("unpipe"),et.unpipe(X)}return et.on("data",At),function T(X,rt,et){if("function"==typeof X.prependListener)return X.prependListener(rt,et);X._events&&X._events[rt]?Array.isArray(X._events[rt])?X._events[rt].unshift(et):X._events[rt]=[et,X._events[rt]]:X.on(rt,et)}(X,"error",Gt),X.once("close",Wt),X.once("finish",Pt),X.emit("pipe",et),st.flowing||(a("pipe resume"),et.resume()),X},E.prototype.unpipe=function(X){var rt=this._readableState,et={hasUnpiped:!1};if(0===rt.pipesCount)return this;if(1===rt.pipesCount)return X&&X!==rt.pipes||(X||(X=rt.pipes),rt.pipes=null,rt.pipesCount=0,rt.flowing=!1,X&&X.emit("unpipe",this,et)),this;if(!X){var st=rt.pipes,dt=rt.pipesCount;rt.pipes=null,rt.pipesCount=0,rt.flowing=!1;for(var bt=0;bt<dt;bt++)st[bt].emit("unpipe",this,{hasUnpiped:!1});return this}var gt=$(rt.pipes,X);return-1===gt||(rt.pipes.splice(gt,1),rt.pipesCount-=1,1===rt.pipesCount&&(rt.pipes=rt.pipes[0]),X.emit("unpipe",this,et)),this},E.prototype.addListener=E.prototype.on=function(X,rt){var et=C.prototype.on.call(this,X,rt),st=this._readableState;return"data"===X?(st.readableListening=this.listenerCount("readable")>0,!1!==st.flowing&&this.resume()):"readable"===X&&!st.endEmitted&&!st.readableListening&&(st.readableListening=st.needReadable=!0,st.flowing=!1,st.emittedReadable=!1,a("on readable",st.length,st.reading),st.length?z(this):st.reading||A.nextTick(ut,this)),et},E.prototype.removeListener=function(X,rt){var et=C.prototype.removeListener.call(this,X,rt);return"readable"===X&&A.nextTick(it,this),et},E.prototype.removeAllListeners=function(X){var rt=C.prototype.removeAllListeners.apply(this,arguments);return("readable"===X||void 0===X)&&A.nextTick(it,this),rt},E.prototype.resume=function(){var X=this._readableState;return X.flowing||(a("resume"),X.flowing=!X.readableListening,function Q(X,rt){rt.resumeScheduled||(rt.resumeScheduled=!0,A.nextTick(j,X,rt))}(this,X)),X.paused=!1,this},E.prototype.pause=function(){return a("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(a("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(X){var rt=this,et=this._readableState,st=!1;for(var dt in X.on("end",function(){if(a("wrapped end"),et.decoder&&!et.ended){var gt=et.decoder.end();gt&&gt.length&&rt.push(gt)}rt.push(null)}),X.on("data",function(gt){a("wrapped data"),et.decoder&&(gt=et.decoder.write(gt)),et.objectMode&&null==gt||!(et.objectMode||gt&&gt.length)||rt.push(gt)||(st=!0,X.pause())}),X)void 0===this[dt]&&"function"==typeof X[dt]&&(this[dt]=function(Lt){return function(){return X[Lt].apply(X,arguments)}}(dt));for(var bt=0;bt<S.length;bt++)X.on(S[bt],this.emit.bind(this,S[bt]));return this._read=function(gt){a("wrapped _read",gt),st&&(st=!1,X.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===b&&(b=t(68221)),b(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(rt){this._readableState&&(this._readableState.flowing=rt)}}),E._fromList=G,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(X,rt){return void 0===L&&(L=t(31748)),L(E,X,rt)})},74308:function(q,W,t){"use strict";q.exports=e;var A=t(74322).q,g=A.ERR_METHOD_NOT_IMPLEMENTED,i=A.ERR_MULTIPLE_CALLBACK,P=A.ERR_TRANSFORM_ALREADY_TRANSFORMING,C=A.ERR_TRANSFORM_WITH_LENGTH_0,u=t(37865);function y(a,s){var c=this._transformState;c.transforming=!1;var f=c.writecb;if(null===f)return this.emit("error",new i);c.writechunk=null,c.writecb=null,null!=s&&this.push(s),f(a);var m=this._readableState;m.reading=!1,(m.needReadable||m.length<m.highWaterMark)&&this._read(m.highWaterMark)}function e(a){if(!(this instanceof e))return new e(a);u.call(this,a),this._transformState={afterTransform:y.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,a&&("function"==typeof a.transform&&(this._transform=a.transform),"function"==typeof a.flush&&(this._flush=a.flush)),this.on("prefinish",r)}function r(){var a=this;"function"!=typeof this._flush||this._readableState.destroyed?l(this,null,null):this._flush(function(s,c){l(a,s,c)})}function l(a,s,c){if(s)return a.emit("error",s);if(null!=c&&a.push(c),a._writableState.length)throw new C;if(a._transformState.transforming)throw new P;return a.push(null)}t(42018)(e,u),e.prototype.push=function(a,s){return this._transformState.needTransform=!1,u.prototype.push.call(this,a,s)},e.prototype._transform=function(a,s,c){c(new g("_transform()"))},e.prototype._write=function(a,s,c){var f=this._transformState;if(f.writecb=c,f.writechunk=a,f.writeencoding=s,!f.transforming){var m=this._readableState;(f.needTransform||m.needReadable||m.length<m.highWaterMark)&&this._read(m.highWaterMark)}},e.prototype._read=function(a){var s=this._transformState;null===s.writechunk||s.transforming?s.needTransform=!0:(s.transforming=!0,this._transform(s.writechunk,s.writeencoding,s.afterTransform))},e.prototype._destroy=function(a,s){u.prototype._destroy.call(this,a,function(c){s(c)})}},37493:function(q,W,t){"use strict";var P,A=t(90386);function i(Z){var G=this;this.next=null,this.entry=null,this.finish=function(){!function j(Z,G,K){var at=Z.entry;for(Z.entry=null;at;){var $=at.callback;G.pendingcb--,$(K),at=at.next}G.corkedRequestsFree.next=Z}(G,Z)}}q.exports=n,n.WritableState=S;var C={deprecate:t(20588)},u=t(71405),y=t(12856).Buffer,e=t.g.Uint8Array||function(){};var T,a=t(65756),c=t(56306).getHighWaterMark,f=t(74322).q,m=f.ERR_INVALID_ARG_TYPE,h=f.ERR_METHOD_NOT_IMPLEMENTED,w=f.ERR_MULTIPLE_CALLBACK,p=f.ERR_STREAM_CANNOT_PIPE,o=f.ERR_STREAM_DESTROYED,v=f.ERR_STREAM_NULL_VALUES,M=f.ERR_STREAM_WRITE_AFTER_END,b=f.ERR_UNKNOWN_ENCODING,L=a.errorOrDestroy;function x(){}function S(Z,G,K){P=P||t(37865),"boolean"!=typeof K&&(K=G instanceof P),this.objectMode=!!(Z=Z||{}).objectMode,K&&(this.objectMode=this.objectMode||!!Z.writableObjectMode),this.highWaterMark=c(this,Z,"writableHighWaterMark",K),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===Z.decodeStrings),this.defaultEncoding=Z.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function($){!function B(Z,G){var K=Z._writableState,at=K.sync,$=K.writecb;if("function"!=typeof $)throw new w;if(function O(Z){Z.writing=!1,Z.writecb=null,Z.length-=Z.writelen,Z.writelen=0}(K),G)!function k(Z,G,K,at,$){--G.pendingcb,K?(A.nextTick($,at),A.nextTick(ut,Z,G),Z._writableState.errorEmitted=!0,L(Z,at)):($(at),Z._writableState.errorEmitted=!0,L(Z,at),ut(Z,G))}(Z,K,at,G,$);else{var X=J(K)||Z.destroyed;!X&&!K.corked&&!K.bufferProcessing&&K.bufferedRequest&&H(Z,K),at?A.nextTick(z,Z,K,X,$):z(Z,K,X,$)}}(G,$)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==Z.emitClose,this.autoDestroy=!!Z.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function n(Z){var G=this instanceof(P=P||t(37865));if(!G&&!T.call(n,this))return new n(Z);this._writableState=new S(Z,this,G),this.writable=!0,Z&&("function"==typeof Z.write&&(this._write=Z.write),"function"==typeof Z.writev&&(this._writev=Z.writev),"function"==typeof Z.destroy&&(this._destroy=Z.destroy),"function"==typeof Z.final&&(this._final=Z.final)),u.call(this)}function D(Z,G,K,at,$,X){if(!K){var rt=function F(Z,G,K){return!Z.objectMode&&!1!==Z.decodeStrings&&"string"==typeof G&&(G=y.from(G,K)),G}(G,at,$);at!==rt&&(K=!0,$="buffer",at=rt)}var et=G.objectMode?1:at.length;G.length+=et;var st=G.length<G.highWaterMark;if(st||(G.needDrain=!0),G.writing||G.corked){var dt=G.lastBufferedRequest;G.lastBufferedRequest={chunk:at,encoding:$,isBuf:K,callback:X,next:null},dt?dt.next=G.lastBufferedRequest:G.bufferedRequest=G.lastBufferedRequest,G.bufferedRequestCount+=1}else N(Z,G,!1,et,at,$,X);return st}function N(Z,G,K,at,$,X,rt){G.writelen=at,G.writecb=rt,G.writing=!0,G.sync=!0,G.destroyed?G.onwrite(new o("write")):K?Z._writev($,G.onwrite):Z._write($,X,G.onwrite),G.sync=!1}function z(Z,G,K,at){K||function U(Z,G){0===G.length&&G.needDrain&&(G.needDrain=!1,Z.emit("drain"))}(Z,G),G.pendingcb--,at(),ut(Z,G)}function H(Z,G){G.bufferProcessing=!0;var K=G.bufferedRequest;if(Z._writev&&K&&K.next){var $=new Array(G.bufferedRequestCount),X=G.corkedRequestsFree;X.entry=K;for(var rt=0,et=!0;K;)$[rt]=K,K.isBuf||(et=!1),K=K.next,rt+=1;$.allBuffers=et,N(Z,G,!0,G.length,$,"",X.finish),G.pendingcb++,G.lastBufferedRequest=null,X.next?(G.corkedRequestsFree=X.next,X.next=null):G.corkedRequestsFree=new i(G),G.bufferedRequestCount=0}else{for(;K;){var st=K.chunk;if(N(Z,G,!1,G.objectMode?1:st.length,st,K.encoding,K.callback),K=K.next,G.bufferedRequestCount--,G.writing)break}null===K&&(G.lastBufferedRequest=null)}G.bufferedRequest=K,G.bufferProcessing=!1}function J(Z){return Z.ending&&0===Z.length&&null===Z.bufferedRequest&&!Z.finished&&!Z.writing}function nt(Z,G){Z._final(function(K){G.pendingcb--,K&&L(Z,K),G.prefinished=!0,Z.emit("prefinish"),ut(Z,G)})}function ut(Z,G){var K=J(G);if(K&&(function it(Z,G){!G.prefinished&&!G.finalCalled&&("function"!=typeof Z._final||G.destroyed?(G.prefinished=!0,Z.emit("prefinish")):(G.pendingcb++,G.finalCalled=!0,A.nextTick(nt,Z,G)))}(Z,G),0===G.pendingcb&&(G.finished=!0,Z.emit("finish"),G.autoDestroy))){var at=Z._readableState;(!at||at.autoDestroy&&at.endEmitted)&&Z.destroy()}return K}t(42018)(n,u),S.prototype.getBuffer=function(){for(var G=this.bufferedRequest,K=[];G;)K.push(G),G=G.next;return K},function(){try{Object.defineProperty(S.prototype,"buffer",{get:C.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(Z){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(T=Function.prototype[Symbol.hasInstance],Object.defineProperty(n,Symbol.hasInstance,{value:function(G){return!!T.call(this,G)||this===n&&G&&G._writableState instanceof S}})):T=function(G){return G instanceof this},n.prototype.pipe=function(){L(this,new p)},n.prototype.write=function(Z,G,K){var at=this._writableState,$=!1,X=!at.objectMode&&function l(Z){return y.isBuffer(Z)||Z instanceof e}(Z);return X&&!y.isBuffer(Z)&&(Z=function r(Z){return y.from(Z)}(Z)),"function"==typeof G&&(K=G,G=null),X?G="buffer":G||(G=at.defaultEncoding),"function"!=typeof K&&(K=x),at.ending?function E(Z,G){var K=new M;L(Z,K),A.nextTick(G,K)}(this,K):(X||function d(Z,G,K,at){var $;return null===K?$=new v:"string"!=typeof K&&!G.objectMode&&($=new m("chunk",["string","Buffer"],K)),!$||(L(Z,$),A.nextTick(at,$),!1)}(this,at,Z,K))&&(at.pendingcb++,$=D(this,at,X,Z,G,K)),$},n.prototype.cork=function(){this._writableState.corked++},n.prototype.uncork=function(){var Z=this._writableState;Z.corked&&(Z.corked--,!Z.writing&&!Z.corked&&!Z.bufferProcessing&&Z.bufferedRequest&&H(this,Z))},n.prototype.setDefaultEncoding=function(G){if("string"==typeof G&&(G=G.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((G+"").toLowerCase())>-1))throw new b(G);return this._writableState.defaultEncoding=G,this},Object.defineProperty(n.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(n.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),n.prototype._write=function(Z,G,K){K(new h("_write()"))},n.prototype._writev=null,n.prototype.end=function(Z,G,K){var at=this._writableState;return"function"==typeof Z?(K=Z,Z=null,G=null):"function"==typeof G&&(K=G,G=null),null!=Z&&this.write(Z,G),at.corked&&(at.corked=1,this.uncork()),at.ending||function Q(Z,G,K){G.ending=!0,ut(Z,G),K&&(G.finished?A.nextTick(K):Z.once("finish",K)),G.ended=!0,Z.writable=!1}(this,at,K),this},Object.defineProperty(n.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(n.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(G){!this._writableState||(this._writableState.destroyed=G)}}),n.prototype.destroy=a.destroy,n.prototype._undestroy=a.undestroy,n.prototype._destroy=function(Z,G){G(Z)}},68221:function(q,W,t){"use strict";var g,A=t(90386);function i(o,v,M){return v in o?Object.defineProperty(o,v,{value:M,enumerable:!0,configurable:!0,writable:!0}):o[v]=M,o}var P=t(12726),C=Symbol("lastResolve"),u=Symbol("lastReject"),y=Symbol("error"),e=Symbol("ended"),r=Symbol("lastPromise"),l=Symbol("handlePromise"),a=Symbol("stream");function s(o,v){return{value:o,done:v}}function c(o){var v=o[C];if(null!==v){var M=o[a].read();null!==M&&(o[r]=null,o[C]=null,o[u]=null,v(s(M,!1)))}}function f(o){A.nextTick(c,o)}var h=Object.getPrototypeOf(function(){}),w=Object.setPrototypeOf((i(g={get stream(){return this[a]},next:function(){var v=this,M=this[y];if(null!==M)return Promise.reject(M);if(this[e])return Promise.resolve(s(void 0,!0));if(this[a].destroyed)return new Promise(function(S,T){A.nextTick(function(){v[y]?T(v[y]):S(s(void 0,!0))})});var L,b=this[r];if(b)L=new Promise(function m(o,v){return function(M,b){o.then(function(){v[e]?M(s(void 0,!0)):v[l](M,b)},b)}}(b,this));else{var x=this[a].read();if(null!==x)return Promise.resolve(s(x,!1));L=new Promise(this[l])}return this[r]=L,L}},Symbol.asyncIterator,function(){return this}),i(g,"return",function(){var v=this;return new Promise(function(M,b){v[a].destroy(null,function(L){L?b(L):M(s(void 0,!0))})})}),g),h);q.exports=function(v){var M,b=Object.create(w,(i(M={},a,{value:v,writable:!0}),i(M,C,{value:null,writable:!0}),i(M,u,{value:null,writable:!0}),i(M,y,{value:null,writable:!0}),i(M,e,{value:v._readableState.endEmitted,writable:!0}),i(M,l,{value:function(x,S){var T=b[a].read();T?(b[r]=null,b[C]=null,b[u]=null,x(s(T,!1))):(b[C]=x,b[u]=S)},writable:!0}),M));return b[r]=null,P(v,function(L){if(L&&"ERR_STREAM_PREMATURE_CLOSE"!==L.code){var x=b[u];return null!==x&&(b[r]=null,b[C]=null,b[u]=null,x(L)),void(b[y]=L)}var S=b[C];null!==S&&(b[r]=null,b[C]=null,b[u]=null,S(s(void 0,!0))),b[e]=!0}),v.on("readable",f.bind(null,b)),b}},31125:function(q,W,t){"use strict";function A(c,f){var m=Object.keys(c);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(c);f&&(h=h.filter(function(w){return Object.getOwnPropertyDescriptor(c,w).enumerable})),m.push.apply(m,h)}return m}function i(c,f,m){return f in c?Object.defineProperty(c,f,{value:m,enumerable:!0,configurable:!0,writable:!0}):c[f]=m,c}function C(c,f){for(var m=0;m<f.length;m++){var h=f[m];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(c,h.key,h)}}var e=t(12856).Buffer,l=t(69862).inspect,a=l&&l.custom||"inspect";function s(c,f,m){e.prototype.copy.call(c,f,m)}q.exports=function(){function c(){(function P(c,f){if(!(c instanceof f))throw new TypeError("Cannot call a class as a function")})(this,c),this.head=null,this.tail=null,this.length=0}return function u(c,f,m){return f&&C(c.prototype,f),m&&C(c,m),c}(c,[{key:"push",value:function(m){var h={data:m,next:null};this.length>0?this.tail.next=h:this.head=h,this.tail=h,++this.length}},{key:"unshift",value:function(m){var h={data:m,next:this.head};0===this.length&&(this.tail=h),this.head=h,++this.length}},{key:"shift",value:function(){if(0!==this.length){var m=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,m}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(m){if(0===this.length)return"";for(var h=this.head,w=""+h.data;h=h.next;)w+=m+h.data;return w}},{key:"concat",value:function(m){if(0===this.length)return e.alloc(0);for(var h=e.allocUnsafe(m>>>0),w=this.head,p=0;w;)s(w.data,h,p),p+=w.data.length,w=w.next;return h}},{key:"consume",value:function(m,h){var w;return m<this.head.data.length?(w=this.head.data.slice(0,m),this.head.data=this.head.data.slice(m)):w=m===this.head.data.length?this.shift():h?this._getString(m):this._getBuffer(m),w}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(m){var h=this.head,w=1,p=h.data;for(m-=p.length;h=h.next;){var o=h.data,v=m>o.length?o.length:m;if(p+=v===o.length?o:o.slice(0,m),0==(m-=v)){v===o.length?(++w,this.head=h.next?h.next:this.tail=null):(this.head=h,h.data=o.slice(v));break}++w}return this.length-=w,p}},{key:"_getBuffer",value:function(m){var h=e.allocUnsafe(m),w=this.head,p=1;for(w.data.copy(h),m-=w.data.length;w=w.next;){var o=w.data,v=m>o.length?o.length:m;if(o.copy(h,h.length-m,0,v),0==(m-=v)){v===o.length?(++p,this.head=w.next?w.next:this.tail=null):(this.head=w,w.data=o.slice(v));break}++p}return this.length-=p,h}},{key:a,value:function(m,h){return l(this,function g(c){for(var f=1;f<arguments.length;f++){var m=null!=arguments[f]?arguments[f]:{};f%2?A(Object(m),!0).forEach(function(h){i(c,h,m[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(m)):A(Object(m)).forEach(function(h){Object.defineProperty(c,h,Object.getOwnPropertyDescriptor(m,h))})}return c}({},h,{depth:0,customInspect:!1}))}}]),c}()},65756:function(q,W,t){"use strict";var A=t(90386);function i(e,r){u(e,r),P(e)}function P(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function u(e,r){e.emit("error",r)}q.exports={destroy:function g(e,r){var l=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(r?r(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,A.nextTick(u,this,e)):A.nextTick(u,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(c){!r&&c?l._writableState?l._writableState.errorEmitted?A.nextTick(P,l):(l._writableState.errorEmitted=!0,A.nextTick(i,l,c)):A.nextTick(i,l,c):r?(A.nextTick(P,l),r(c)):A.nextTick(P,l)}),this)},undestroy:function C(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function y(e,r){var l=e._readableState,a=e._writableState;l&&l.autoDestroy||a&&a.autoDestroy?e.destroy(r):e.emit("error",r)}}},12726:function(q,W,t){"use strict";var A=t(74322).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}q.exports=function C(u,y,e){if("function"==typeof y)return C(u,null,y);y||(y={}),e=function g(u){var y=!1;return function(){if(!y){y=!0;for(var e=arguments.length,r=new Array(e),l=0;l<e;l++)r[l]=arguments[l];u.apply(this,r)}}}(e||i);var r=y.readable||!1!==y.readable&&u.readable,l=y.writable||!1!==y.writable&&u.writable,a=function(){u.writable||c()},s=u._writableState&&u._writableState.finished,c=function(){l=!1,s=!0,r||e.call(u)},f=u._readableState&&u._readableState.endEmitted,m=function(){r=!1,f=!0,l||e.call(u)},h=function(v){e.call(u,v)},w=function(){var v;return r&&!f?((!u._readableState||!u._readableState.ended)&&(v=new A),e.call(u,v)):l&&!s?((!u._writableState||!u._writableState.ended)&&(v=new A),e.call(u,v)):void 0},p=function(){u.req.on("finish",c)};return function P(u){return u.setHeader&&"function"==typeof u.abort}(u)?(u.on("complete",c),u.on("abort",w),u.req?p():u.on("request",p)):l&&!u._writableState&&(u.on("end",a),u.on("close",a)),u.on("end",m),u.on("finish",c),!1!==y.error&&u.on("error",h),u.on("close",w),function(){u.removeListener("complete",c),u.removeListener("abort",w),u.removeListener("request",p),u.req&&u.req.removeListener("finish",c),u.removeListener("end",a),u.removeListener("close",a),u.removeListener("finish",c),u.removeListener("end",m),u.removeListener("error",h),u.removeListener("close",w)}}},31748:function(q){q.exports=function(){throw new Error("Readable.from is not available in the browser")}},10168:function(q,W,t){"use strict";var A;var i=t(74322).q,P=i.ERR_MISSING_ARGS,C=i.ERR_STREAM_DESTROYED;function u(c){if(c)throw c}function e(c,f,m,h){h=function g(c){var f=!1;return function(){f||(f=!0,c.apply(void 0,arguments))}}(h);var w=!1;c.on("close",function(){w=!0}),void 0===A&&(A=t(12726)),A(c,{readable:f,writable:m},function(o){if(o)return h(o);w=!0,h()});var p=!1;return function(o){if(!w&&!p){if(p=!0,function y(c){return c.setHeader&&"function"==typeof c.abort}(c))return c.abort();if("function"==typeof c.destroy)return c.destroy();h(o||new C("pipe"))}}}function r(c){c()}function l(c,f){return c.pipe(f)}function a(c){return c.length&&"function"==typeof c[c.length-1]?c.pop():u}q.exports=function s(){for(var c=arguments.length,f=new Array(c),m=0;m<c;m++)f[m]=arguments[m];var h=a(f);if(Array.isArray(f[0])&&(f=f[0]),f.length<2)throw new P("streams");var w,p=f.map(function(o,v){var M=v<f.length-1;return e(o,M,v>0,function(L){w||(w=L),L&&p.forEach(r),!M&&(p.forEach(r),h(w))})});return f.reduce(l)}},56306:function(q,W,t){"use strict";var A=t(74322).q.ERR_INVALID_OPT_VALUE;q.exports={getHighWaterMark:function i(P,C,u,y){var e=function g(P,C,u){return null!=P.highWaterMark?P.highWaterMark:C?P[u]:null}(C,y,u);if(null!=e){if(!isFinite(e)||Math.floor(e)!==e||e<0)throw new A(y?u:"highWaterMark",e);return Math.floor(e)}return P.objectMode?16:16384}}},71405:function(q,W,t){q.exports=t(15398).EventEmitter},68019:function(q,W,t){"use strict";var A=t(71665).Buffer,g=A.isEncoding||function(p){switch((p=""+p)&&p.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function C(p){var o;switch(this.encoding=function P(p){var o=function i(p){if(!p)return"utf8";for(var o;;)switch(p){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return p;default:if(o)return;p=(""+p).toLowerCase(),o=!0}}(p);if("string"!=typeof o&&(A.isEncoding===g||!g(p)))throw new Error("Unknown encoding: "+p);return o||p}(p),this.encoding){case"utf16le":this.text=s,this.end=c,o=4;break;case"utf8":this.fillLast=r,o=4;break;case"base64":this.text=f,this.end=m,o=3;break;default:return this.write=h,void(this.end=w)}this.lastNeed=0,this.lastTotal=0,this.lastChar=A.allocUnsafe(o)}function u(p){return p<=127?0:p>>5==6?2:p>>4==14?3:p>>3==30?4:p>>6==2?-1:-2}function r(p){var o=this.lastTotal-this.lastNeed,v=function e(p,o,v){if(128!=(192&o[0]))return p.lastNeed=0,"\ufffd";if(p.lastNeed>1&&o.length>1){if(128!=(192&o[1]))return p.lastNeed=1,"\ufffd";if(p.lastNeed>2&&o.length>2&&128!=(192&o[2]))return p.lastNeed=2,"\ufffd"}}(this,p);return void 0!==v?v:this.lastNeed<=p.length?(p.copy(this.lastChar,o,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(p.copy(this.lastChar,o,0,p.length),void(this.lastNeed-=p.length))}function s(p,o){if((p.length-o)%2==0){var v=p.toString("utf16le",o);if(v){var M=v.charCodeAt(v.length-1);if(M>=55296&&M<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1],v.slice(0,-1)}return v}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=p[p.length-1],p.toString("utf16le",o,p.length-1)}function c(p){var o=p&&p.length?this.write(p):"";return this.lastNeed?o+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):o}function f(p,o){var v=(p.length-o)%3;return 0===v?p.toString("base64",o):(this.lastNeed=3-v,this.lastTotal=3,1===v?this.lastChar[0]=p[p.length-1]:(this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1]),p.toString("base64",o,p.length-v))}function m(p){var o=p&&p.length?this.write(p):"";return this.lastNeed?o+this.lastChar.toString("base64",0,3-this.lastNeed):o}function h(p){return p.toString(this.encoding)}function w(p){return p&&p.length?this.write(p):""}W.s=C,C.prototype.write=function(p){if(0===p.length)return"";var o,v;if(this.lastNeed){if(void 0===(o=this.fillLast(p)))return"";v=this.lastNeed,this.lastNeed=0}else v=0;return v<p.length?o?o+this.text(p,v):this.text(p,v):o||""},C.prototype.end=function a(p){var o=p&&p.length?this.write(p):"";return this.lastNeed?o+"\ufffd":o},C.prototype.text=function l(p,o){var v=function y(p,o,v){var M=o.length-1;if(M<v)return 0;var b=u(o[M]);return b>=0?(b>0&&(p.lastNeed=b-1),b):--M<v||-2===b?0:(b=u(o[M]))>=0?(b>0&&(p.lastNeed=b-2),b):--M<v||-2===b?0:(b=u(o[M]))>=0?(b>0&&(2===b?b=0:p.lastNeed=b-3),b):0}(this,p,o);if(!this.lastNeed)return p.toString("utf8",o);this.lastTotal=v;var M=p.length-(v-this.lastNeed);return p.copy(this.lastChar,0,M),p.toString("utf8",o,M)},C.prototype.fillLast=function(p){if(this.lastNeed<=p.length)return p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,p.length),this.lastNeed-=p.length}},90715:function(q,W,t){var A=t(32791),g=t(41633)("stream-parser");q.exports=function y(p){var o=p&&"function"==typeof p._transform;if(!(o||p&&"function"==typeof p._write))throw new Error("must pass a Writable or Transform stream in");g("extending Parser into stream"),p._bytes=r,p._skipBytes=l,o&&(p._passthrough=a),o?p._transform=c:p._write=s};function e(p){g("initializing parser stream"),p._parserBytesLeft=0,p._parserBuffers=[],p._parserBuffered=0,p._parserState=-1,p._parserCallback=null,"function"==typeof p.push&&(p._parserOutput=p.push.bind(p)),p._parserInit=!0}function r(p,o){A(!this._parserCallback,'there is already a "callback" set!'),A(isFinite(p)&&p>0,'can only buffer a finite number of bytes > 0, got "'+p+'"'),this._parserInit||e(this),g("buffering %o bytes",p),this._parserBytesLeft=p,this._parserCallback=o,this._parserState=0}function l(p,o){A(!this._parserCallback,'there is already a "callback" set!'),A(p>0,'can only skip > 0 bytes, got "'+p+'"'),this._parserInit||e(this),g("skipping %o bytes",p),this._parserBytesLeft=p,this._parserCallback=o,this._parserState=1}function a(p,o){A(!this._parserCallback,'There is already a "callback" set!'),A(p>0,'can only pass through > 0 bytes, got "'+p+'"'),this._parserInit||e(this),g("passing through %o bytes",p),this._parserBytesLeft=p,this._parserCallback=o,this._parserState=2}function s(p,o,v){this._parserInit||e(this),g("write(%o bytes)",p.length),"function"==typeof o&&(v=o),h(this,p,null,v)}function c(p,o,v){this._parserInit||e(this),g("transform(%o bytes)",p.length),"function"!=typeof o&&(o=this._parserOutput),h(this,p,o,v)}function m(p,o,v,M){if(p._parserBytesLeft-=o.length,g("%o bytes left for stream piece",p._parserBytesLeft),0===p._parserState?(p._parserBuffers.push(o),p._parserBuffered+=o.length):2===p._parserState&&v(o),0!==p._parserBytesLeft)return M;var b=p._parserCallback;if(b&&0===p._parserState&&p._parserBuffers.length>1&&(o=Buffer.concat(p._parserBuffers,p._parserBuffered)),0!==p._parserState&&(o=null),p._parserCallback=null,p._parserBuffered=0,p._parserState=-1,p._parserBuffers.splice(0),b){var L=[];o&&L.push(o),v&&L.push(v);var x=b.length>L.length;x&&L.push(w(M));var S=b.apply(p,L);if(!x||M===S)return M}}var h=w(function f(p,o,v,M){return p._parserBytesLeft<=0?M(new Error("got data but not currently parsing anything")):o.length<=p._parserBytesLeft?function(){return m(p,o,v,M)}:function(){var b=o.slice(0,p._parserBytesLeft);return m(p,b,v,function(L){return L?M(L):o.length>b.length?function(){return f(p,o.slice(b.length),v,M)}:void 0})}});function w(p){return function(){for(var o=p.apply(this,arguments);"function"==typeof o;)o=o();return o}}},41633:function(q,W,t){var A=t(90386);function u(){var e;try{e=W.storage.debug}catch(r){}return!e&&void 0!==A&&"env"in A&&(e=A.env.DEBUG),e}(W=q.exports=t(74469)).log=function P(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},W.formatArgs=function i(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+W.humanize(this.diff),r){var l="color: "+this.color;e.splice(1,0,l,"color: inherit");var a=0,s=0;e[0].replace(/%[a-zA-Z%]/g,function(c){"%%"!==c&&(a++,"%c"===c&&(s=a))}),e.splice(s,0,l)}},W.save=function C(e){try{null==e?W.storage.removeItem("debug"):W.storage.debug=e}catch(r){}},W.load=u,W.useColors=function g(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},W.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function y(){try{return window.localStorage}catch(e){}}(),W.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],W.formatters.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}},W.enable(u())},74469:function(q,W,t){var A;function i(e){function r(){if(r.enabled){var l=r,a=+new Date;l.diff=a-(A||a),l.prev=A,l.curr=a,A=a;for(var c=new Array(arguments.length),f=0;f<c.length;f++)c[f]=arguments[f];c[0]=W.coerce(c[0]),"string"!=typeof c[0]&&c.unshift("%O");var m=0;c[0]=c[0].replace(/%([a-zA-Z%])/g,function(w,p){if("%%"===w)return w;m++;var o=W.formatters[p];return"function"==typeof o&&(w=o.call(l,c[m]),c.splice(m,1),m--),w}),W.formatArgs.call(l,c),(r.log||W.log||console.log.bind(console)).apply(l,c)}}return r.namespace=e,r.enabled=W.enabled(e),r.useColors=W.useColors(),r.color=function g(e){var l,r=0;for(l in e)r=(r<<5)-r+e.charCodeAt(l),r|=0;return W.colors[Math.abs(r)%W.colors.length]}(e),"function"==typeof W.init&&W.init(r),r}(W=q.exports=i.debug=i.default=i).coerce=function y(e){return e instanceof Error?e.stack||e.message:e},W.disable=function C(){W.enable("")},W.enable=function P(e){W.save(e),W.names=[],W.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),l=r.length,a=0;a<l;a++)!r[a]||("-"===(e=r[a].replace(/\*/g,".*?"))[0]?W.skips.push(new RegExp("^"+e.substr(1)+"$")):W.names.push(new RegExp("^"+e+"$")))},W.enabled=function u(e){var r,l;for(r=0,l=W.skips.length;r<l;r++)if(W.skips[r].test(e))return!1;for(r=0,l=W.names.length;r<l;r++)if(W.names[r].test(e))return!0;return!1},W.humanize=t(11375),W.names=[],W.skips=[],W.formatters={}},11375:function(q){var W=1e3,t=60*W,A=60*t,g=24*A;function y(e,r,l){if(!(e<r))return e<1.5*r?Math.floor(e/r)+" "+l:Math.ceil(e/r)+" "+l+"s"}q.exports=function(e,r){r=r||{};var l=typeof e;if("string"===l&&e.length>0)return function P(e){if(!((e=String(e)).length>100)){var r=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(r){var l=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*l;case"days":case"day":case"d":return l*g;case"hours":case"hour":case"hrs":case"hr":case"h":return l*A;case"minutes":case"minute":case"mins":case"min":case"m":return l*t;case"seconds":case"second":case"secs":case"sec":case"s":return l*W;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}(e);if("number"===l&&!1===isNaN(e))return r.long?function u(e){return y(e,g,"day")||y(e,A,"hour")||y(e,t,"minute")||y(e,W,"second")||e+" ms"}(e):function C(e){return e>=g?Math.round(e/g)+"d":e>=A?Math.round(e/A)+"h":e>=t?Math.round(e/t)+"m":e>=W?Math.round(e/W)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},99011:function(q,W,t){"use strict";var A=t(88641);q.exports=function(i,P,C){if(null==i)throw Error("First argument should be a string");if(null==P)throw Error("Separator should be a string or a RegExp");C?("string"==typeof C||Array.isArray(C))&&(C={ignore:C}):C={},null==C.escape&&(C.escape=!0),null==C.ignore?C.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"]:("string"==typeof C.ignore&&(C.ignore=[C.ignore]),C.ignore=C.ignore.map(function(c){return 1===c.length&&(c+=c),c}));var u=A.parse(i,{flat:!0,brackets:C.ignore}),e=u[0].split(P);if(C.escape){for(var r=[],l=0;l<e.length;l++){var a=e[l];"\\"===a[a.length-1]&&"\\"!==a[a.length-2]?(r.push(a+P+e[l+1]),l++):r.push(a)}e=r}for(l=0;l<e.length;l++)u[0]=e[l],e[l]=A.stringify(u,{flat:!0});return e}},68664:function(q){"use strict";q.exports=function W(t){for(var A=t.length,g=new Array(A),i=new Array(A),P=new Array(A),C=new Array(A),u=new Array(A),y=new Array(A),e=0;e<A;++e)g[e]=-1,i[e]=0,P[e]=!1,C[e]=0,u[e]=-1,y[e]=[];var c,r=0,l=[],a=[];function s(h){var w=[h],p=[h];for(g[h]=i[h]=r,P[h]=!0,r+=1;p.length>0;){var o=t[h=p[p.length-1]];if(C[h]<o.length){for(var v=C[h];v<o.length;++v){var M=o[v];if(g[M]<0){g[M]=i[M]=r,P[M]=!0,r+=1,w.push(M),p.push(M);break}P[M]&&(i[h]=0|Math.min(i[h],i[M])),u[M]>=0&&y[h].push(u[M])}C[h]=v}else{if(i[h]===g[h]){var b=[],L=[],x=0;for(v=w.length-1;v>=0;--v){var S=w[v];if(P[S]=!1,b.push(S),L.push(y[S]),x+=y[S].length,u[S]=l.length,S===h){w.length=v;break}}l.push(b);var T=new Array(x);for(v=0;v<L.length;v++)for(var n=0;n<L[v].length;n++)T[--x]=L[v][n];a.push(T)}p.pop()}}}for(e=0;e<A;++e)g[e]<0&&s(e);for(e=0;e<a.length;e++){var f=a[e];if(0!==f.length){f.sort(function(w,p){return w-p}),c=[f[0]];for(var m=1;m<f.length;m++)f[m]!==f[m-1]&&c.push(f[m]);a[e]=c}}return{components:l,adjacencyList:a}}},7095:function(q,W,t){"use strict";t.r(W);var A=function(r,l){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function e(r,l){var a=[],s=!0,c=!1,f=void 0;try{for(var h,m=r[Symbol.iterator]();!(s=(h=m.next()).done)&&(a.push(h.value),!l||a.length!==l);s=!0);}catch(w){c=!0,f=w}finally{try{!s&&m.return&&m.return()}finally{if(c)throw f}}return a}(r,l);throw new TypeError("Invalid attempt to destructure non-iterable instance")},g=2*Math.PI,i=function(r,l,a,s,c,f,m){var h=r.x,w=r.y;return{x:s*(h*=l)-c*(w*=a)+f,y:c*h+s*w+m}},P=function(r,l){var a=1.5707963267948966===l?.551915024494:-1.5707963267948966===l?-.551915024494:1.3333333333333333*Math.tan(l/4),s=Math.cos(r),c=Math.sin(r),f=Math.cos(r+l),m=Math.sin(r+l);return[{x:s-c*a,y:c+s*a},{x:f+m*a,y:m-f*a},{x:f,y:m}]},C=function(r,l,a,s){var f=r*a+l*s;return f>1&&(f=1),f<-1&&(f=-1),(r*s-l*a<0?-1:1)*Math.acos(f)};W.default=function(r){var l=r.px,a=r.py,s=r.cx,c=r.cy,f=r.rx,m=r.ry,h=r.xAxisRotation,w=void 0===h?0:h,p=r.largeArcFlag,o=void 0===p?0:p,v=r.sweepFlag,M=void 0===v?0:v,b=[];if(0===f||0===m)return[];var L=Math.sin(w*g/360),x=Math.cos(w*g/360),S=x*(l-s)/2+L*(a-c)/2,T=-L*(l-s)/2+x*(a-c)/2;if(0===S&&0===T)return[];f=Math.abs(f),m=Math.abs(m);var n=Math.pow(S,2)/Math.pow(f,2)+Math.pow(T,2)/Math.pow(m,2);n>1&&(f*=Math.sqrt(n),m*=Math.sqrt(n));var E=function(r,l,a,s,c,f,m,h,w,p,o,v){var M=Math.pow(c,2),b=Math.pow(f,2),L=Math.pow(o,2),x=Math.pow(v,2),S=M*b-M*x-b*L;S<0&&(S=0),S/=M*x+b*L;var T=(S=Math.sqrt(S)*(m===h?-1:1))*c/f*v,n=S*-f/c*o,E=p*T-w*n+(r+a)/2,d=w*T+p*n+(l+s)/2,F=(o-T)/c,D=(v-n)/f,N=(-o-T)/c,k=(-v-n)/f,O=C(1,0,F,D),B=C(F,D,N,k);return 0===h&&B>0&&(B-=g),1===h&&B<0&&(B+=g),[E,d,O,B]}(l,a,s,c,f,m,o,M,L,x,S,T),d=A(E,4),F=d[0],D=d[1],N=d[2],k=d[3],O=Math.abs(k)/(g/4);Math.abs(1-O)<1e-7&&(O=1);var B=Math.max(Math.ceil(O),1);k/=B;for(var z=0;z<B;z++)b.push(P(N,k)),N+=k;return b.map(function(U){var H=i(U[0],f,m,x,L,F,D),J=H.x,nt=H.y,it=i(U[1],f,m,x,L,F,D),ut=it.x,Q=it.y,j=i(U[2],f,m,x,L,F,D);return{x1:J,y1:nt,x2:ut,y2:Q,x:j.x,y:j.y}})}},1750:function(q,W,t){"use strict";var A=t(95616),g=t(65185),i=t(29988),P=t(89546),C=t(32791);q.exports=function u(y){if(Array.isArray(y)&&1===y.length&&"string"==typeof y[0]&&(y=y[0]),"string"==typeof y&&(C(P(y),"String is not an SVG path."),y=A(y)),C(Array.isArray(y),"Argument should be a string or an array of path segments."),y=g(y),!(y=i(y)).length)return[0,0,0,0];for(var e=[1/0,1/0,-1/0,-1/0],r=0,l=y.length;r<l;r++)for(var a=y[r].slice(1),s=0;s<a.length;s+=2)a[s+0]<e[0]&&(e[0]=a[s+0]),a[s+1]<e[1]&&(e[1]=a[s+1]),a[s+0]>e[2]&&(e[2]=a[s+0]),a[s+1]>e[3]&&(e[3]=a[s+1]);return e}},29988:function(q,W,t){"use strict";q.exports=function g(C){for(var u,y=[],e=0,r=0,l=0,a=0,s=null,c=null,f=0,m=0,h=0,w=C.length;h<w;h++){var p=C[h],o=p[0];switch(o){case"M":l=p[1],a=p[2];break;case"A":var v=A({px:f,py:m,cx:p[6],cy:p[7],rx:p[1],ry:p[2],xAxisRotation:p[3],largeArcFlag:p[4],sweepFlag:p[5]});if(!v.length)continue;for(var b,M=0;M<v.length;M++)p=["C",(b=v[M]).x1,b.y1,b.x2,b.y2,b.x,b.y],M<v.length-1&&y.push(p);break;case"S":var L=f,x=m;("C"==u||"S"==u)&&(L+=L-e,x+=x-r),p=["C",L,x,p[1],p[2],p[3],p[4]];break;case"T":"Q"==u||"T"==u?(s=2*f-s,c=2*m-c):(s=f,c=m),p=P(f,m,s,c,p[1],p[2]);break;case"Q":s=p[1],c=p[2],p=P(f,m,p[1],p[2],p[3],p[4]);break;case"L":p=i(f,m,p[1],p[2]);break;case"H":p=i(f,m,p[1],m);break;case"V":p=i(f,m,f,p[1]);break;case"Z":p=i(f,m,l,a)}u=o,f=p[p.length-2],m=p[p.length-1],p.length>4?(e=p[p.length-4],r=p[p.length-3]):(e=f,r=m),y.push(p)}return y};var A=t(7095);function i(C,u,y,e){return["C",C,u,y,e,y,e]}function P(C,u,y,e,r,l){return["C",C/3+.6666666666666666*y,u/3+.6666666666666666*e,r/3+.6666666666666666*y,l/3+.6666666666666666*e,r,l]}},82019:function(q,W,t){"use strict";var r,A=t(1750),g=t(95616),i=t(31457),P=t(89546),C=t(44781),u=document.createElement("canvas"),y=u.getContext("2d");q.exports=function e(a,s){if(!P(a))throw Error("Argument should be valid svg path string");var c,f;s||(s={}),s.shape?(c=s.shape[0],f=s.shape[1]):(c=u.width=s.w||s.width||200,f=u.height=s.h||s.height||200);var m=Math.min(c,f),h=s.stroke||0,w=s.viewbox||s.viewBox||A(a),p=[c/(w[2]-w[0]),f/(w[3]-w[1])],o=Math.min(p[0]||0,p[1]||0)/2;if(y.fillStyle="black",y.fillRect(0,0,c,f),y.fillStyle="white",h&&("number"!=typeof h&&(h=1),y.strokeStyle=h>0?"white":"black",y.lineWidth=Math.abs(h)),y.translate(.5*c,.5*f),y.scale(o,o),function l(){if(null!=r)return r;var a=document.createElement("canvas").getContext("2d");if(a.canvas.width=a.canvas.height=1,!window.Path2D)return r=!1;var s=new Path2D("M0,0h1v1h-1v-1Z");a.fillStyle="black",a.fill(s);var c=a.getImageData(0,0,1,1);return r=c&&c.data&&255===c.data[3]}()){var v=new Path2D(a);y.fill(v),h&&y.stroke(v)}else{var M=g(a);i(y,M),y.fill(),h&&y.stroke()}return y.setTransform(1,0,0,1,0,0),C(y,{cutoff:null!=s.cutoff?s.cutoff:.5,radius:null!=s.radius?s.radius:.5*m})}},84267:function(q,W,t){var A;!function(g){var i=/^\s+/,P=/\s+$/,C=0,u=g.round,y=g.min,e=g.max,r=g.random;function l(X,rt){if(rt=rt||{},(X=X||"")instanceof l)return X;if(!(this instanceof l))return new l(X,rt);var et=function a(X){var rt={r:0,g:0,b:0},et=1,st=null,dt=null,bt=null,gt=!1,Lt=!1;return"string"==typeof X&&(X=function at(X){X=X.replace(i,"").replace(P,"").toLowerCase();var et,rt=!1;if(k[X])X=k[X],rt=!0;else if("transparent"==X)return{r:0,g:0,b:0,a:0,format:"name"};return(et=G.rgb.exec(X))?{r:et[1],g:et[2],b:et[3]}:(et=G.rgba.exec(X))?{r:et[1],g:et[2],b:et[3],a:et[4]}:(et=G.hsl.exec(X))?{h:et[1],s:et[2],l:et[3]}:(et=G.hsla.exec(X))?{h:et[1],s:et[2],l:et[3],a:et[4]}:(et=G.hsv.exec(X))?{h:et[1],s:et[2],v:et[3]}:(et=G.hsva.exec(X))?{h:et[1],s:et[2],v:et[3],a:et[4]}:(et=G.hex8.exec(X))?{r:J(et[1]),g:J(et[2]),b:J(et[3]),a:Z(et[4]),format:rt?"name":"hex8"}:(et=G.hex6.exec(X))?{r:J(et[1]),g:J(et[2]),b:J(et[3]),format:rt?"name":"hex"}:(et=G.hex4.exec(X))?{r:J(et[1]+""+et[1]),g:J(et[2]+""+et[2]),b:J(et[3]+""+et[3]),a:Z(et[4]+""+et[4]),format:rt?"name":"hex8"}:!!(et=G.hex3.exec(X))&&{r:J(et[1]+""+et[1]),g:J(et[2]+""+et[2]),b:J(et[3]+""+et[3]),format:rt?"name":"hex"}}(X)),"object"==typeof X&&(K(X.r)&&K(X.g)&&K(X.b)?(rt=function s(X,rt,et){return{r:255*U(X,255),g:255*U(rt,255),b:255*U(et,255)}}(X.r,X.g,X.b),gt=!0,Lt="%"===String(X.r).substr(-1)?"prgb":"rgb"):K(X.h)&&K(X.s)&&K(X.v)?(st=Q(X.s),dt=Q(X.v),rt=function h(X,rt,et){X=6*U(X,360),rt=U(rt,100),et=U(et,100);var st=g.floor(X),dt=X-st,bt=et*(1-rt),gt=et*(1-dt*rt),Lt=et*(1-(1-dt)*rt),It=st%6;return{r:255*[et,gt,bt,bt,Lt,et][It],g:255*[Lt,et,et,gt,bt,bt][It],b:255*[bt,bt,Lt,et,et,gt][It]}}(X.h,st,dt),gt=!0,Lt="hsv"):K(X.h)&&K(X.s)&&K(X.l)&&(st=Q(X.s),bt=Q(X.l),rt=function f(X,rt,et){var st,dt,bt;function gt(Mt,xt,At){return At<0&&(At+=1),At>1&&(At-=1),At<.16666666666666666?Mt+6*(xt-Mt)*At:At<.5?xt:At<.6666666666666666?Mt+(xt-Mt)*(.6666666666666666-At)*6:Mt}if(X=U(X,360),rt=U(rt,100),et=U(et,100),0===rt)st=dt=bt=et;else{var Lt=et<.5?et*(1+rt):et+rt-et*rt,It=2*et-Lt;st=gt(It,Lt,X+.3333333333333333),dt=gt(It,Lt,X),bt=gt(It,Lt,X-.3333333333333333)}return{r:255*st,g:255*dt,b:255*bt}}(X.h,st,bt),gt=!0,Lt="hsl"),X.hasOwnProperty("a")&&(et=X.a)),et=z(et),{ok:gt,format:X.format||Lt,r:y(255,e(rt.r,0)),g:y(255,e(rt.g,0)),b:y(255,e(rt.b,0)),a:et}}(X);this._originalInput=X,this._r=et.r,this._g=et.g,this._b=et.b,this._a=et.a,this._roundA=u(100*this._a)/100,this._format=rt.format||et.format,this._gradientType=rt.gradientType,this._r<1&&(this._r=u(this._r)),this._g<1&&(this._g=u(this._g)),this._b<1&&(this._b=u(this._b)),this._ok=et.ok,this._tc_id=C++}function c(X,rt,et){X=U(X,255),rt=U(rt,255),et=U(et,255);var bt,gt,st=e(X,rt,et),dt=y(X,rt,et),Lt=(st+dt)/2;if(st==dt)bt=gt=0;else{var It=st-dt;switch(gt=Lt>.5?It/(2-st-dt):It/(st+dt),st){case X:bt=(rt-et)/It+(rt<et?6:0);break;case rt:bt=(et-X)/It+2;break;case et:bt=(X-rt)/It+4}bt/=6}return{h:bt,s:gt,l:Lt}}function m(X,rt,et){X=U(X,255),rt=U(rt,255),et=U(et,255);var bt,gt,st=e(X,rt,et),dt=y(X,rt,et),Lt=st,It=st-dt;if(gt=0===st?0:It/st,st==dt)bt=0;else{switch(st){case X:bt=(rt-et)/It+(rt<et?6:0);break;case rt:bt=(et-X)/It+2;break;case et:bt=(X-rt)/It+4}bt/=6}return{h:bt,s:gt,v:Lt}}function w(X,rt,et,st){var dt=[ut(u(X).toString(16)),ut(u(rt).toString(16)),ut(u(et).toString(16))];return st&&dt[0].charAt(0)==dt[0].charAt(1)&&dt[1].charAt(0)==dt[1].charAt(1)&&dt[2].charAt(0)==dt[2].charAt(1)?dt[0].charAt(0)+dt[1].charAt(0)+dt[2].charAt(0):dt.join("")}function o(X,rt,et,st){return[ut(j(st)),ut(u(X).toString(16)),ut(u(rt).toString(16)),ut(u(et).toString(16))].join("")}function v(X,rt){rt=0===rt?0:rt||10;var et=l(X).toHsl();return et.s-=rt/100,et.s=H(et.s),l(et)}function M(X,rt){rt=0===rt?0:rt||10;var et=l(X).toHsl();return et.s+=rt/100,et.s=H(et.s),l(et)}function b(X){return l(X).desaturate(100)}function L(X,rt){rt=0===rt?0:rt||10;var et=l(X).toHsl();return et.l+=rt/100,et.l=H(et.l),l(et)}function x(X,rt){rt=0===rt?0:rt||10;var et=l(X).toRgb();return et.r=e(0,y(255,et.r-u(-rt/100*255))),et.g=e(0,y(255,et.g-u(-rt/100*255))),et.b=e(0,y(255,et.b-u(-rt/100*255))),l(et)}function S(X,rt){rt=0===rt?0:rt||10;var et=l(X).toHsl();return et.l-=rt/100,et.l=H(et.l),l(et)}function T(X,rt){var et=l(X).toHsl(),st=(et.h+rt)%360;return et.h=st<0?360+st:st,l(et)}function n(X){var rt=l(X).toHsl();return rt.h=(rt.h+180)%360,l(rt)}function E(X){var rt=l(X).toHsl(),et=rt.h;return[l(X),l({h:(et+120)%360,s:rt.s,l:rt.l}),l({h:(et+240)%360,s:rt.s,l:rt.l})]}function d(X){var rt=l(X).toHsl(),et=rt.h;return[l(X),l({h:(et+90)%360,s:rt.s,l:rt.l}),l({h:(et+180)%360,s:rt.s,l:rt.l}),l({h:(et+270)%360,s:rt.s,l:rt.l})]}function F(X){var rt=l(X).toHsl(),et=rt.h;return[l(X),l({h:(et+72)%360,s:rt.s,l:rt.l}),l({h:(et+216)%360,s:rt.s,l:rt.l})]}function D(X,rt,et){rt=rt||6,et=et||30;var st=l(X).toHsl(),dt=360/et,bt=[l(X)];for(st.h=(st.h-(dt*rt>>1)+720)%360;--rt;)st.h=(st.h+dt)%360,bt.push(l(st));return bt}function N(X,rt){rt=rt||6;for(var et=l(X).toHsv(),st=et.h,dt=et.s,bt=et.v,gt=[],Lt=1/rt;rt--;)gt.push(l({h:st,s:dt,v:bt})),bt=(bt+Lt)%1;return gt}l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var X=this.toRgb();return(299*X.r+587*X.g+114*X.b)/1e3},getLuminance:function(){var rt,et,st,X=this.toRgb();return et=X.g/255,st=X.b/255,.2126*((rt=X.r/255)<=.03928?rt/12.92:g.pow((rt+.055)/1.055,2.4))+.7152*(et<=.03928?et/12.92:g.pow((et+.055)/1.055,2.4))+.0722*(st<=.03928?st/12.92:g.pow((st+.055)/1.055,2.4))},setAlpha:function(X){return this._a=z(X),this._roundA=u(100*this._a)/100,this},toHsv:function(){var X=m(this._r,this._g,this._b);return{h:360*X.h,s:X.s,v:X.v,a:this._a}},toHsvString:function(){var X=m(this._r,this._g,this._b),rt=u(360*X.h),et=u(100*X.s),st=u(100*X.v);return 1==this._a?"hsv("+rt+", "+et+"%, "+st+"%)":"hsva("+rt+", "+et+"%, "+st+"%, "+this._roundA+")"},toHsl:function(){var X=c(this._r,this._g,this._b);return{h:360*X.h,s:X.s,l:X.l,a:this._a}},toHslString:function(){var X=c(this._r,this._g,this._b),rt=u(360*X.h),et=u(100*X.s),st=u(100*X.l);return 1==this._a?"hsl("+rt+", "+et+"%, "+st+"%)":"hsla("+rt+", "+et+"%, "+st+"%, "+this._roundA+")"},toHex:function(X){return w(this._r,this._g,this._b,X)},toHexString:function(X){return"#"+this.toHex(X)},toHex8:function(X){return function p(X,rt,et,st,dt){var bt=[ut(u(X).toString(16)),ut(u(rt).toString(16)),ut(u(et).toString(16)),ut(j(st))];return dt&&bt[0].charAt(0)==bt[0].charAt(1)&&bt[1].charAt(0)==bt[1].charAt(1)&&bt[2].charAt(0)==bt[2].charAt(1)&&bt[3].charAt(0)==bt[3].charAt(1)?bt[0].charAt(0)+bt[1].charAt(0)+bt[2].charAt(0)+bt[3].charAt(0):bt.join("")}(this._r,this._g,this._b,this._a,X)},toHex8String:function(X){return"#"+this.toHex8(X)},toRgb:function(){return{r:u(this._r),g:u(this._g),b:u(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+u(this._r)+", "+u(this._g)+", "+u(this._b)+")":"rgba("+u(this._r)+", "+u(this._g)+", "+u(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:u(100*U(this._r,255))+"%",g:u(100*U(this._g,255))+"%",b:u(100*U(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+u(100*U(this._r,255))+"%, "+u(100*U(this._g,255))+"%, "+u(100*U(this._b,255))+"%)":"rgba("+u(100*U(this._r,255))+"%, "+u(100*U(this._g,255))+"%, "+u(100*U(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(O[w(this._r,this._g,this._b,!0)]||!1)},toFilter:function(X){var rt="#"+o(this._r,this._g,this._b,this._a),et=rt,st=this._gradientType?"GradientType = 1, ":"";if(X){var dt=l(X);et="#"+o(dt._r,dt._g,dt._b,dt._a)}return"progid:DXImageTransform.Microsoft.gradient("+st+"startColorstr="+rt+",endColorstr="+et+")"},toString:function(X){var rt=!!X;X=X||this._format;var et=!1;return!rt&&this._a<1&&this._a>=0&&("hex"===X||"hex6"===X||"hex3"===X||"hex4"===X||"hex8"===X||"name"===X)?"name"===X&&0===this._a?this.toName():this.toRgbString():("rgb"===X&&(et=this.toRgbString()),"prgb"===X&&(et=this.toPercentageRgbString()),("hex"===X||"hex6"===X)&&(et=this.toHexString()),"hex3"===X&&(et=this.toHexString(!0)),"hex4"===X&&(et=this.toHex8String(!0)),"hex8"===X&&(et=this.toHex8String()),"name"===X&&(et=this.toName()),"hsl"===X&&(et=this.toHslString()),"hsv"===X&&(et=this.toHsvString()),et||this.toHexString())},clone:function(){return l(this.toString())},_applyModification:function(X,rt){var et=X.apply(null,[this].concat([].slice.call(rt)));return this._r=et._r,this._g=et._g,this._b=et._b,this.setAlpha(et._a),this},lighten:function(){return this._applyModification(L,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(S,arguments)},desaturate:function(){return this._applyModification(v,arguments)},saturate:function(){return this._applyModification(M,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(T,arguments)},_applyCombination:function(X,rt){return X.apply(null,[this].concat([].slice.call(rt)))},analogous:function(){return this._applyCombination(D,arguments)},complement:function(){return this._applyCombination(n,arguments)},monochromatic:function(){return this._applyCombination(N,arguments)},splitcomplement:function(){return this._applyCombination(F,arguments)},triad:function(){return this._applyCombination(E,arguments)},tetrad:function(){return this._applyCombination(d,arguments)}},l.fromRatio=function(X,rt){if("object"==typeof X){var et={};for(var st in X)X.hasOwnProperty(st)&&(et[st]="a"===st?X[st]:Q(X[st]));X=et}return l(X,rt)},l.equals=function(X,rt){return!(!X||!rt)&&l(X).toRgbString()==l(rt).toRgbString()},l.random=function(){return l.fromRatio({r:r(),g:r(),b:r()})},l.mix=function(X,rt,et){et=0===et?0:et||50;var st=l(X).toRgb(),dt=l(rt).toRgb(),bt=et/100;return l({r:(dt.r-st.r)*bt+st.r,g:(dt.g-st.g)*bt+st.g,b:(dt.b-st.b)*bt+st.b,a:(dt.a-st.a)*bt+st.a})},l.readability=function(X,rt){var et=l(X),st=l(rt);return(g.max(et.getLuminance(),st.getLuminance())+.05)/(g.min(et.getLuminance(),st.getLuminance())+.05)},l.isReadable=function(X,rt,et){var dt,bt,st=l.readability(X,rt);switch(bt=!1,(dt=function $(X){var rt,et;return"AA"!==(rt=((X=X||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==rt&&(rt="AA"),"small"!==(et=(X.size||"small").toLowerCase())&&"large"!==et&&(et="small"),{level:rt,size:et}}(et)).level+dt.size){case"AAsmall":case"AAAlarge":bt=st>=4.5;break;case"AAlarge":bt=st>=3;break;case"AAAsmall":bt=st>=7}return bt},l.mostReadable=function(X,rt,et){var bt,gt,Lt,It,st=null,dt=0;gt=(et=et||{}).includeFallbackColors,Lt=et.level,It=et.size;for(var Mt=0;Mt<rt.length;Mt++)(bt=l.readability(X,rt[Mt]))>dt&&(dt=bt,st=l(rt[Mt]));return l.isReadable(X,st,{level:Lt,size:It})||!gt?st:(et.includeFallbackColors=!1,l.mostReadable(X,["#fff","#000"],et))};var k=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},O=l.hexNames=function B(X){var rt={};for(var et in X)X.hasOwnProperty(et)&&(rt[X[et]]=et);return rt}(k);function z(X){return X=parseFloat(X),(isNaN(X)||X<0||X>1)&&(X=1),X}function U(X,rt){(function nt(X){return"string"==typeof X&&-1!=X.indexOf(".")&&1===parseFloat(X)})(X)&&(X="100%");var et=function it(X){return"string"==typeof X&&-1!=X.indexOf("%")}(X);return X=y(rt,e(0,parseFloat(X))),et&&(X=parseInt(X*rt,10)/100),g.abs(X-rt)<1e-6?1:X%rt/parseFloat(rt)}function H(X){return y(1,e(0,X))}function J(X){return parseInt(X,16)}function ut(X){return 1==X.length?"0"+X:""+X}function Q(X){return X<=1&&(X=100*X+"%"),X}function j(X){return g.round(255*parseFloat(X)).toString(16)}function Z(X){return J(X)/255}var et,st,dt,G=(st="[\\s|\\(]+("+(et="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+et+")[,|\\s]+("+et+")\\s*\\)?",dt="[\\s|\\(]+("+et+")[,|\\s]+("+et+")[,|\\s]+("+et+")[,|\\s]+("+et+")\\s*\\)?",{CSS_UNIT:new RegExp(et),rgb:new RegExp("rgb"+st),rgba:new RegExp("rgba"+dt),hsl:new RegExp("hsl"+st),hsla:new RegExp("hsla"+dt),hsv:new RegExp("hsv"+st),hsva:new RegExp("hsva"+dt),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function K(X){return!!G.CSS_UNIT.exec(X)}q.exports?q.exports=l:void 0!==(A=function(){return l}.call(W,t,W,q))&&(q.exports=A)}(Math)},57060:function(q){"use strict";q.exports=A,q.exports.float32=q.exports.float=A,q.exports.fract32=q.exports.fract=function t(g,i){if(g.length){if(g instanceof Float32Array)return new Float32Array(g.length);i instanceof Float32Array||(i=A(g));for(var P=0,C=i.length;P<C;P++)i[P]=g[P]-i[P];return i}return A(g-A(g))};var W=new Float32Array(1);function A(g){return g.length?g instanceof Float32Array?g:new Float32Array(g):(W[0]=g,W[0])}},75686:function(q,W,t){"use strict";var A=t(25677);q.exports=C;function i(u,y){var e=A(getComputedStyle(u).getPropertyValue(y));return e[0]*C(e[1],u)}function C(u,y){switch(y=y||document.body,u=(u||"px").trim().toLowerCase(),(y===window||y===document)&&(y=document.body),u){case"%":return y.clientHeight/100;case"ch":case"ex":return function P(u,y){var e=document.createElement("div");e.style["font-size"]="128"+u,y.appendChild(e);var r=i(e,"font-size")/128;return y.removeChild(e),r}(u,y);case"em":return i(y,"font-size");case"rem":return i(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}},96892:function(q,W,t){"use strict";function g(y){return y}function P(y,e){return"string"==typeof e&&(e=y.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(r){return C(y,r)})}:C(y,e)}function C(y,e){var r=e.id,l=e.bbox,a=null==e.properties?{}:e.properties,s=function u(y,e){var r=function i(y){if(null==y)return g;var e,r,l=y.scale[0],a=y.scale[1],s=y.translate[0],c=y.translate[1];return function(f,m){m||(e=r=0);var h=2,w=f.length,p=new Array(w);for(p[0]=(e+=f[0])*l+s,p[1]=(r+=f[1])*a+c;h<w;)p[h]=f[h],++h;return p}}(y.transform),l=y.arcs;function a(w,p){p.length&&p.pop();for(var o=l[w<0?~w:w],v=0,M=o.length;v<M;++v)p.push(r(o[v],v));w<0&&function A(y,e){for(var r,l=y.length,a=l-e;a<--l;)r=y[a],y[a++]=y[l],y[l]=r}(p,M)}function s(w){return r(w)}function c(w){for(var p=[],o=0,v=w.length;o<v;++o)a(w[o],p);return p.length<2&&p.push(p[0]),p}function f(w){for(var p=c(w);p.length<4;)p.push(p[0]);return p}function m(w){return w.map(f)}function h(w){var o,p=w.type;switch(p){case"GeometryCollection":return{type:p,geometries:w.geometries.map(h)};case"Point":o=s(w.coordinates);break;case"MultiPoint":o=w.coordinates.map(s);break;case"LineString":o=c(w.arcs);break;case"MultiLineString":o=w.arcs.map(c);break;case"Polygon":o=m(w.arcs);break;case"MultiPolygon":o=w.arcs.map(m);break;default:return null}return{type:p,coordinates:o}}return h(e)}(y,e);return null==r&&null==l?{type:"Feature",properties:a,geometry:s}:null==l?{type:"Feature",id:r,properties:a,geometry:s}:{type:"Feature",id:r,bbox:l,properties:a,geometry:s}}t.d(W,{zL:function(){return P}})},73116:function(q,W,t){"use strict";var A=t(24511);q.exports=function(g){if("function"!=typeof g||!hasOwnProperty.call(g,"length"))return!1;try{if("number"!=typeof g.length||"function"!=typeof g.call||"function"!=typeof g.apply)return!1}catch(i){return!1}return!A(g)}},69190:function(q,W,t){"use strict";var A=t(24582),g=t(47403),i=t(9234),P=t(6048),C=function(u,y){return u.replace("%v",P(y))};q.exports=function(u,y,e){if(!g(e))throw new TypeError(C(y,u));if(!A(u)){if("default"in e)return e.default;if(e.isOptional)return null}var r=i(e.errorMessage);throw A(r)||(r=y),new TypeError(C(r,u))}},18497:function(q){"use strict";q.exports=function(W){try{return W.toString()}catch(t){try{return String(W)}catch(A){return null}}}},6048:function(q,W,t){"use strict";var A=t(18497),g=/[\n\r\u2028\u2029]/g;q.exports=function(i){var P=A(i);return null===P?"<Non-coercible to string value>":(P.length>100&&(P=P.slice(0,99)+"\u2026"),P=P.replace(g,function(C){switch(C){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},47403:function(q,W,t){"use strict";var A=t(24582),g={object:!0,function:!0,undefined:!0};q.exports=function(i){return!!A(i)&&hasOwnProperty.call(g,typeof i)}},82527:function(q,W,t){"use strict";var A=t(69190),g=t(84985);q.exports=function(i){return g(i)?i:A(i,"%v is not a plain function",arguments[1])}},84985:function(q,W,t){"use strict";var A=t(73116),g=/^\s*class[\s{/}]/,i=Function.prototype.toString;q.exports=function(P){return!(!A(P)||g.test(i.call(P)))}},24511:function(q,W,t){"use strict";var A=t(47403);q.exports=function(g){if(!A(g))return!1;try{return!!g.constructor&&g.constructor.prototype===g}catch(i){return!1}}},9234:function(q,W,t){"use strict";var A=t(24582),g=t(47403),i=Object.prototype.toString;q.exports=function(P){if(!A(P))return null;if(g(P)){var C=P.toString;if("function"!=typeof C||C===i)return null}try{return""+P}catch(u){return null}}},10424:function(q,W,t){"use strict";var A=t(69190),g=t(24582);q.exports=function(i){return g(i)?i:A(i,"Cannot use %v",arguments[1])}},24582:function(q){"use strict";q.exports=function(t){return null!=t}},58404:function(q,W,t){"use strict";var A=t(13547),g=t(12129),i=t(12856).Buffer;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:g([32,0]),UINT16:g([32,0]),UINT32:g([32,0]),BIGUINT64:g([32,0]),INT8:g([32,0]),INT16:g([32,0]),INT32:g([32,0]),BIGINT64:g([32,0]),FLOAT:g([32,0]),DOUBLE:g([32,0]),DATA:g([32,0]),UINT8C:g([32,0]),BUFFER:g([32,0])});var P="undefined"!=typeof Uint8ClampedArray,C="undefined"!=typeof BigUint64Array,u="undefined"!=typeof BigInt64Array,y=t.g.__TYPEDARRAY_POOL;y.UINT8C||(y.UINT8C=g([32,0])),y.BIGUINT64||(y.BIGUINT64=g([32,0])),y.BIGINT64||(y.BIGINT64=g([32,0])),y.BUFFER||(y.BUFFER=g([32,0]));var e=y.DATA,r=y.BUFFER;function l(T){if(T){var E=A.log2(T.length||T.byteLength);e[E].push(T)}}function s(n){n=A.nextPow2(n);var E=A.log2(n),d=e[E];return d.length>0?d.pop():new ArrayBuffer(n)}function c(T){return new Uint8Array(s(T),0,T)}function f(T){return new Uint16Array(s(2*T),0,T)}function m(T){return new Uint32Array(s(4*T),0,T)}function h(T){return new Int8Array(s(T),0,T)}function w(T){return new Int16Array(s(2*T),0,T)}function p(T){return new Int32Array(s(4*T),0,T)}function o(T){return new Float32Array(s(4*T),0,T)}function v(T){return new Float64Array(s(8*T),0,T)}function M(T){return P?new Uint8ClampedArray(s(T),0,T):c(T)}function b(T){return C?new BigUint64Array(s(8*T),0,T):null}function L(T){return u?new BigInt64Array(s(8*T),0,T):null}function x(T){return new DataView(s(T),0,T)}function S(T){T=A.nextPow2(T);var n=A.log2(T),E=r[n];return E.length>0?E.pop():new i(T)}W.free=function(n){if(i.isBuffer(n))r[A.log2(n.length)].push(n);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(n)&&(n=n.buffer),!n)return;var d=0|A.log2(n.length||n.byteLength);e[d].push(n)}},W.freeUint8=W.freeUint16=W.freeUint32=W.freeBigUint64=W.freeInt8=W.freeInt16=W.freeInt32=W.freeBigInt64=W.freeFloat32=W.freeFloat=W.freeFloat64=W.freeDouble=W.freeUint8Clamped=W.freeDataView=function a(T){l(T.buffer)},W.freeArrayBuffer=l,W.freeBuffer=function(n){r[A.log2(n.length)].push(n)},W.malloc=function(n,E){if(void 0===E||"arraybuffer"===E)return s(n);switch(E){case"uint8":return c(n);case"uint16":return f(n);case"uint32":return m(n);case"int8":return h(n);case"int16":return w(n);case"int32":return p(n);case"float":case"float32":return o(n);case"double":case"float64":return v(n);case"uint8_clamped":return M(n);case"bigint64":return L(n);case"biguint64":return b(n);case"buffer":return S(n);case"data":case"dataview":return x(n);default:return null}return null},W.mallocArrayBuffer=s,W.mallocUint8=c,W.mallocUint16=f,W.mallocUint32=m,W.mallocInt8=h,W.mallocInt16=w,W.mallocInt32=p,W.mallocFloat32=W.mallocFloat=o,W.mallocFloat64=W.mallocDouble=v,W.mallocUint8Clamped=M,W.mallocBigUint64=b,W.mallocBigInt64=L,W.mallocDataView=x,W.mallocBuffer=S,W.clearCache=function(){for(var n=0;n<32;++n)y.UINT8[n].length=0,y.UINT16[n].length=0,y.UINT32[n].length=0,y.INT8[n].length=0,y.INT16[n].length=0,y.INT32[n].length=0,y.FLOAT[n].length=0,y.DOUBLE[n].length=0,y.BIGUINT64[n].length=0,y.BIGINT64[n].length=0,y.UINT8C[n].length=0,e[n].length=0,r[n].length=0}},90448:function(q){var W=/[\'\"]/;q.exports=function(A){return A?(W.test(A.charAt(0))&&(A=A.substr(1)),W.test(A.charAt(A.length-1))&&(A=A.substr(0,A.length-1)),A):""}},93447:function(q){"use strict";q.exports=function(t,A,g){Array.isArray(g)||(g=[].slice.call(arguments,2));for(var i=0,P=g.length;i<P;i++){var C=g[i];for(var u in C)if((void 0===A[u]||Array.isArray(A[u])||t[u]!==A[u])&&u in A){var y;if(!0===C[u])y=A[u];else{if(!1===C[u])continue;if("function"==typeof C[u]&&void 0===(y=C[u](A[u],t,A)))continue}t[u]=y}}return t}},20588:function(q,W,t){function g(i){try{if(!t.g.localStorage)return!1}catch(C){return!1}var P=t.g.localStorage[i];return null!=P&&"true"===String(P).toLowerCase()}q.exports=function A(i,P){if(g("noDeprecation"))return i;var C=!1;return function u(){if(!C){if(g("throwDeprecation"))throw new Error(P);g("traceDeprecation")?console.trace(P):console.warn(P),C=!0}return i.apply(this,arguments)}}},45920:function(q){q.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},4936:function(q,W,t){"use strict";var A=t(47216),g=t(65481),i=t(21099),P=t(9187);function C(bt){return bt.call.bind(bt)}var u="undefined"!=typeof BigInt,y="undefined"!=typeof Symbol,e=C(Object.prototype.toString),r=C(Number.prototype.valueOf),l=C(String.prototype.valueOf),a=C(Boolean.prototype.valueOf);if(u)var s=C(BigInt.prototype.valueOf);if(y)var c=C(Symbol.prototype.valueOf);function f(bt,gt){if("object"!=typeof bt)return!1;try{return gt(bt),!0}catch(Lt){return!1}}function E(bt){return"[object Map]"===e(bt)}function F(bt){return"[object Set]"===e(bt)}function N(bt){return"[object WeakMap]"===e(bt)}function O(bt){return"[object WeakSet]"===e(bt)}function z(bt){return"[object ArrayBuffer]"===e(bt)}function U(bt){return"undefined"!=typeof ArrayBuffer&&(z.working?z(bt):bt instanceof ArrayBuffer)}function H(bt){return"[object DataView]"===e(bt)}function J(bt){return"undefined"!=typeof DataView&&(H.working?H(bt):bt instanceof DataView)}W.isArgumentsObject=A,W.isGeneratorFunction=g,W.isTypedArray=P,W.isPromise=function m(bt){return"undefined"!=typeof Promise&&bt instanceof Promise||null!==bt&&"object"==typeof bt&&"function"==typeof bt.then&&"function"==typeof bt.catch},W.isArrayBufferView=function h(bt){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(bt):P(bt)||J(bt)},W.isUint8Array=function w(bt){return"Uint8Array"===i(bt)},W.isUint8ClampedArray=function p(bt){return"Uint8ClampedArray"===i(bt)},W.isUint16Array=function o(bt){return"Uint16Array"===i(bt)},W.isUint32Array=function v(bt){return"Uint32Array"===i(bt)},W.isInt8Array=function M(bt){return"Int8Array"===i(bt)},W.isInt16Array=function b(bt){return"Int16Array"===i(bt)},W.isInt32Array=function L(bt){return"Int32Array"===i(bt)},W.isFloat32Array=function x(bt){return"Float32Array"===i(bt)},W.isFloat64Array=function S(bt){return"Float64Array"===i(bt)},W.isBigInt64Array=function T(bt){return"BigInt64Array"===i(bt)},W.isBigUint64Array=function n(bt){return"BigUint64Array"===i(bt)},E.working="undefined"!=typeof Map&&E(new Map),W.isMap=function d(bt){return"undefined"!=typeof Map&&(E.working?E(bt):bt instanceof Map)},F.working="undefined"!=typeof Set&&F(new Set),W.isSet=function D(bt){return"undefined"!=typeof Set&&(F.working?F(bt):bt instanceof Set)},N.working="undefined"!=typeof WeakMap&&N(new WeakMap),W.isWeakMap=function k(bt){return"undefined"!=typeof WeakMap&&(N.working?N(bt):bt instanceof WeakMap)},O.working="undefined"!=typeof WeakSet&&O(new WeakSet),W.isWeakSet=function B(bt){return O(bt)},z.working="undefined"!=typeof ArrayBuffer&&z(new ArrayBuffer),W.isArrayBuffer=U,H.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&H(new DataView(new ArrayBuffer(1),0,1)),W.isDataView=J;var nt="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function it(bt){return"[object SharedArrayBuffer]"===e(bt)}function ut(bt){return void 0!==nt&&(void 0===it.working&&(it.working=it(new nt)),it.working?it(bt):bt instanceof nt)}function at(bt){return f(bt,r)}function $(bt){return f(bt,l)}function X(bt){return f(bt,a)}function rt(bt){return u&&f(bt,s)}function et(bt){return y&&f(bt,c)}W.isSharedArrayBuffer=ut,W.isAsyncFunction=function Q(bt){return"[object AsyncFunction]"===e(bt)},W.isMapIterator=function j(bt){return"[object Map Iterator]"===e(bt)},W.isSetIterator=function Z(bt){return"[object Set Iterator]"===e(bt)},W.isGeneratorObject=function G(bt){return"[object Generator]"===e(bt)},W.isWebAssemblyCompiledModule=function K(bt){return"[object WebAssembly.Module]"===e(bt)},W.isNumberObject=at,W.isStringObject=$,W.isBooleanObject=X,W.isBigIntObject=rt,W.isSymbolObject=et,W.isBoxedPrimitive=function st(bt){return at(bt)||$(bt)||X(bt)||rt(bt)||et(bt)},W.isAnyArrayBuffer=function dt(bt){return"undefined"!=typeof Uint8Array&&(U(bt)||ut(bt))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(bt){Object.defineProperty(W,bt,{enumerable:!1,value:function(){throw new Error(bt+" is not supported in userland")}})})},43827:function(q,W,t){var A=t(90386),g=Object.getOwnPropertyDescriptors||function(nt){for(var it=Object.keys(nt),ut={},Q=0;Q<it.length;Q++)ut[it[Q]]=Object.getOwnPropertyDescriptor(nt,it[Q]);return ut},i=/%[sdj%]/g;W.format=function(J){if(!b(J)){for(var nt=[],it=0;it<arguments.length;it++)nt.push(y(arguments[it]));return nt.join(" ")}it=1;for(var ut=arguments,Q=ut.length,j=String(J).replace(i,function(G){if("%%"===G)return"%";if(it>=Q)return G;switch(G){case"%s":return String(ut[it++]);case"%d":return Number(ut[it++]);case"%j":try{return JSON.stringify(ut[it++])}catch(K){return"[Circular]"}default:return G}}),Z=ut[it];it<Q;Z=ut[++it])o(Z)||!T(Z)?j+=" "+Z:j+=" "+y(Z);return j},W.deprecate=function(J,nt){if(void 0!==A&&!0===A.noDeprecation)return J;if(void 0===A)return function(){return W.deprecate(J,nt).apply(this,arguments)};var it=!1;return function ut(){if(!it){if(A.throwDeprecation)throw new Error(nt);A.traceDeprecation?console.trace(nt):console.error(nt),it=!0}return J.apply(this,arguments)}};var P={},C=/^$/;if(A.env.NODE_DEBUG){var u=A.env.NODE_DEBUG;u=u.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),C=new RegExp("^"+u+"$","i")}function y(J,nt){var it={seen:[],stylize:r};return arguments.length>=3&&(it.depth=arguments[2]),arguments.length>=4&&(it.colors=arguments[3]),p(nt)?it.showHidden=nt:nt&&W._extend(it,nt),x(it.showHidden)&&(it.showHidden=!1),x(it.depth)&&(it.depth=2),x(it.colors)&&(it.colors=!1),x(it.customInspect)&&(it.customInspect=!0),it.colors&&(it.stylize=e),a(it,J,it.depth)}function e(J,nt){var it=y.styles[nt];return it?"\x1b["+y.colors[it][0]+"m"+J+"\x1b["+y.colors[it][1]+"m":J}function r(J,nt){return J}function a(J,nt,it){if(J.customInspect&&nt&&d(nt.inspect)&&nt.inspect!==W.inspect&&(!nt.constructor||nt.constructor.prototype!==nt)){var ut=nt.inspect(it,J);return b(ut)||(ut=a(J,ut,it)),ut}var Q=function s(J,nt){if(x(nt))return J.stylize("undefined","undefined");if(b(nt)){var it="'"+JSON.stringify(nt).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return J.stylize(it,"string")}return M(nt)?J.stylize(""+nt,"number"):p(nt)?J.stylize(""+nt,"boolean"):o(nt)?J.stylize("null","null"):void 0}(J,nt);if(Q)return Q;var j=Object.keys(nt),Z=function l(J){var nt={};return J.forEach(function(it,ut){nt[it]=!0}),nt}(j);if(J.showHidden&&(j=Object.getOwnPropertyNames(nt)),E(nt)&&(j.indexOf("message")>=0||j.indexOf("description")>=0))return c(nt);if(0===j.length){if(d(nt))return J.stylize("[Function"+(nt.name?": "+nt.name:"")+"]","special");if(S(nt))return J.stylize(RegExp.prototype.toString.call(nt),"regexp");if(n(nt))return J.stylize(Date.prototype.toString.call(nt),"date");if(E(nt))return c(nt)}var rt,K="",at=!1,$=["{","}"];return w(nt)&&(at=!0,$=["[","]"]),d(nt)&&(K=" [Function"+(nt.name?": "+nt.name:"")+"]"),S(nt)&&(K=" "+RegExp.prototype.toString.call(nt)),n(nt)&&(K=" "+Date.prototype.toUTCString.call(nt)),E(nt)&&(K=" "+c(nt)),0!==j.length||at&&0!=nt.length?it<0?S(nt)?J.stylize(RegExp.prototype.toString.call(nt),"regexp"):J.stylize("[Object]","special"):(J.seen.push(nt),rt=at?function f(J,nt,it,ut,Q){for(var j=[],Z=0,G=nt.length;Z<G;++Z)B(nt,String(Z))?j.push(m(J,nt,it,ut,String(Z),!0)):j.push("");return Q.forEach(function(K){K.match(/^\d+$/)||j.push(m(J,nt,it,ut,K,!0))}),j}(J,nt,it,Z,j):j.map(function(et){return m(J,nt,it,Z,et,at)}),J.seen.pop(),function h(J,nt,it){return J.reduce(function(j,Z){return Z.indexOf("\n"),j+Z.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?it[0]+(""===nt?"":nt+"\n ")+" "+J.join(",\n  ")+" "+it[1]:it[0]+nt+" "+J.join(", ")+" "+it[1]}(rt,K,$)):$[0]+K+$[1]}function c(J){return"["+Error.prototype.toString.call(J)+"]"}function m(J,nt,it,ut,Q,j){var Z,G,K;if((K=Object.getOwnPropertyDescriptor(nt,Q)||{value:nt[Q]}).get?G=J.stylize(K.set?"[Getter/Setter]":"[Getter]","special"):K.set&&(G=J.stylize("[Setter]","special")),B(ut,Q)||(Z="["+Q+"]"),G||(J.seen.indexOf(K.value)<0?(G=o(it)?a(J,K.value,null):a(J,K.value,it-1)).indexOf("\n")>-1&&(G=j?G.split("\n").map(function(at){return"  "+at}).join("\n").slice(2):"\n"+G.split("\n").map(function(at){return"   "+at}).join("\n")):G=J.stylize("[Circular]","special")),x(Z)){if(j&&Q.match(/^\d+$/))return G;(Z=JSON.stringify(""+Q)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Z=Z.slice(1,-1),Z=J.stylize(Z,"name")):(Z=Z.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Z=J.stylize(Z,"string"))}return Z+": "+G}function w(J){return Array.isArray(J)}function p(J){return"boolean"==typeof J}function o(J){return null===J}function M(J){return"number"==typeof J}function b(J){return"string"==typeof J}function x(J){return void 0===J}function S(J){return T(J)&&"[object RegExp]"===D(J)}function T(J){return"object"==typeof J&&null!==J}function n(J){return T(J)&&"[object Date]"===D(J)}function E(J){return T(J)&&("[object Error]"===D(J)||J instanceof Error)}function d(J){return"function"==typeof J}function D(J){return Object.prototype.toString.call(J)}function N(J){return J<10?"0"+J.toString(10):J.toString(10)}W.debuglog=function(J){if(J=J.toUpperCase(),!P[J])if(C.test(J)){var nt=A.pid;P[J]=function(){var it=W.format.apply(W,arguments);console.error("%s %d: %s",J,nt,it)}}else P[J]=function(){};return P[J]},W.inspect=y,y.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},y.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},W.types=t(4936),W.isArray=w,W.isBoolean=p,W.isNull=o,W.isNullOrUndefined=function v(J){return null==J},W.isNumber=M,W.isString=b,W.isSymbol=function L(J){return"symbol"==typeof J},W.isUndefined=x,W.isRegExp=S,W.types.isRegExp=S,W.isObject=T,W.isDate=n,W.types.isDate=n,W.isError=E,W.types.isNativeError=E,W.isFunction=d,W.isPrimitive=function F(J){return null===J||"boolean"==typeof J||"number"==typeof J||"string"==typeof J||"symbol"==typeof J||void 0===J},W.isBuffer=t(45920);var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(){var J=new Date,nt=[N(J.getHours()),N(J.getMinutes()),N(J.getSeconds())].join(":");return[J.getDate(),k[J.getMonth()],nt].join(" ")}function B(J,nt){return Object.prototype.hasOwnProperty.call(J,nt)}W.log=function(){console.log("%s - %s",O(),W.format.apply(W,arguments))},W.inherits=t(42018),W._extend=function(J,nt){if(!nt||!T(nt))return J;for(var it=Object.keys(nt),ut=it.length;ut--;)J[it[ut]]=nt[it[ut]];return J};var z="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function U(J,nt){if(!J){var it=new Error("Promise was rejected with a falsy value");it.reason=J,J=it}return nt(J)}W.promisify=function(nt){if("function"!=typeof nt)throw new TypeError('The "original" argument must be of type Function');if(z&&nt[z]){var it;if("function"!=typeof(it=nt[z]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(it,z,{value:it,enumerable:!1,writable:!1,configurable:!0}),it}function it(){for(var ut,Q,j=new Promise(function(K,at){ut=K,Q=at}),Z=[],G=0;G<arguments.length;G++)Z.push(arguments[G]);Z.push(function(K,at){K?Q(K):ut(at)});try{nt.apply(this,Z)}catch(K){Q(K)}return j}return Object.setPrototypeOf(it,Object.getPrototypeOf(nt)),z&&Object.defineProperty(it,z,{value:it,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(it,g(nt))},W.promisify.custom=z,W.callbackify=function H(J){if("function"!=typeof J)throw new TypeError('The "original" argument must be of type Function');function nt(){for(var it=[],ut=0;ut<arguments.length;ut++)it.push(arguments[ut]);var Q=it.pop();if("function"!=typeof Q)throw new TypeError("The last argument must be of type Function");var j=this,Z=function(){return Q.apply(j,arguments)};J.apply(this,it).then(function(G){A.nextTick(Z.bind(null,null,G))},function(G){A.nextTick(U.bind(null,G,Z))})}return Object.setPrototypeOf(nt,Object.getPrototypeOf(J)),Object.defineProperties(nt,g(J)),nt}},40372:function(q,W,t){var A=t(86249);q.exports=function(i){return A("webgl",i)}},21099:function(q,W,t){"use strict";var A=t(31353),g=t(72077),i=t(6614),P=t(40383),C=i("Object.prototype.toString"),u=t(84543)(),y="undefined"==typeof globalThis?t.g:globalThis,e=g(),r=i("String.prototype.slice"),l={},a=Object.getPrototypeOf;u&&P&&a&&A(e,function(f){if("function"==typeof y[f]){var m=new y[f];if(Symbol.toStringTag in m){var h=a(m),w=P(h,Symbol.toStringTag);if(!w){var p=a(h);w=P(p,Symbol.toStringTag)}l[f]=w.get}}});var c=t(9187);q.exports=function(m){return!!c(m)&&(u&&Symbol.toStringTag in m?function(m){var h=!1;return A(l,function(w,p){if(!h)try{var o=w.call(m);o===p&&(h=o)}catch(v){}}),h}(m):r(C(m),8,-1))}},3961:function(q,W,t){var A=t(63489),g=t(56131),i=A.instance();function P(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}g(P.prototype=new A.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(c,f){if("string"==typeof c){var m=c.match(u);return m?m[0]:""}var h=this._validateYear(c),w=c.month(),p=""+this.toChineseMonth(h,w);return f&&p.length<2&&(p="0"+p),this.isIntercalaryMonth(h,w)&&(p+="i"),p},monthNames:function(c){if("string"==typeof c){var f=c.match(y);return f?f[0]:""}var m=this._validateYear(c),h=c.month(),p=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(m,h)-1];return this.isIntercalaryMonth(m,h)&&(p="\u95f0"+p),p},monthNamesShort:function(c){if("string"==typeof c){var f=c.match(e);return f?f[0]:""}var m=this._validateYear(c),h=c.month(),p=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(m,h)-1];return this.isIntercalaryMonth(m,h)&&(p="\u95f0"+p),p},parseMonth:function(c,f){c=this._validateYear(c);var h,m=parseInt(f);if(isNaN(m))"\u95f0"===f[0]&&(h=!0,f=f.substring(1)),"\u6708"===f[f.length-1]&&(f=f.substring(0,f.length-1)),m=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(f);else{var w=f[f.length-1];h="i"===w||"I"===w}return this.toMonthIndex(c,m,h)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(c,f){if(c.year&&(c=c.year()),"number"!=typeof c||c<1888||c>2111)throw f.replace(/\{0\}/,this.local.name);return c},toMonthIndex:function(c,f,m){var h=this.intercalaryMonth(c);if(m&&f!==h||f<1||f>12)throw A.local.invalidMonth.replace(/\{0\}/,this.local.name);return h?!m&&f<=h?f-1:f:f-1},toChineseMonth:function(c,f){c.year&&(f=(c=c.year()).month());var m=this.intercalaryMonth(c);if(f<0||f>(m?12:11))throw A.local.invalidMonth.replace(/\{0\}/,this.local.name);return m?f<m?f+1:f:f+1},intercalaryMonth:function(c){return c=this._validateYear(c),r[c-r[0]]>>13},isIntercalaryMonth:function(c,f){c.year&&(f=(c=c.year()).month());var m=this.intercalaryMonth(c);return!!m&&m===f},leapYear:function(c){return 0!==this.intercalaryMonth(c)},weekOfYear:function(c,f,m){var M,h=this._validateYear(c,A.local.invalidyear),w=l[h-l[0]];(M=i.newDate(w>>9&4095,w>>5&15,31&w)).add(4-(M.dayOfWeek()||7),"d");var b=this.toJD(c,f,m)-M.toJD();return 1+Math.floor(b/7)},monthsInYear:function(c){return this.leapYear(c)?13:12},daysInMonth:function(c,f){c.year&&(f=c.month(),c=c.year()),c=this._validateYear(c);var m=r[c-r[0]];if(f>(m>>13?12:11))throw A.local.invalidMonth.replace(/\{0\}/,this.local.name);return m&1<<12-f?30:29},weekDay:function(c,f,m){return(this.dayOfWeek(c,f,m)||7)<6},toJD:function(c,f,m){var h=this._validate(c,p,m,A.local.invalidDate);c=this._validateYear(h.year()),f=h.month(),m=h.day();var w=this.isIntercalaryMonth(c,f),p=this.toChineseMonth(c,f),o=function s(c,f,m,h,w){var p,o,x;if("object"==typeof c)o=c,p=f||{};else{var L;if(!("number"==typeof c&&c>=1888&&c<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof f&&f>=1&&f<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof m&&m>=1&&m<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof h?(L=!1,p=h):(L=!!h,p=w||{}),o={year:c,month:f,day:m,isIntercalary:L}}x=o.day-1;var n,S=r[o.year-r[0]],T=S>>13;n=T&&(o.month>T||o.isIntercalary)?o.month:o.month-1;for(var E=0;E<n;E++)x+=S&1<<12-E?30:29;var F=l[o.year-l[0]],O=new Date(F>>9&4095,(F>>5&15)-1,(31&F)+x);return p.year=O.getFullYear(),p.month=1+O.getMonth(),p.day=O.getDate(),p}(c,p,m,w);return i.toJD(o.year,o.month,o.day)},fromJD:function(c){var f=i.fromJD(c),m=function a(c,f,m,h){var w,p;if("object"==typeof c)w=c,p=f||{};else{if(!("number"==typeof c&&c>=1888&&c<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof f&&f>=1&&f<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof m&&m>=1&&m<=31))throw new Error("Solar day outside range 1 - 31");w={year:c,month:f,day:m},p=h||{}}var b=l[w.year-l[0]];p.year=(w.year<<9|w.month<<5|w.day)>=b?w.year:w.year-1,b=l[p.year-l[0]];var n,E=new Date(b>>9&4095,(b>>5&15)-1,31&b),d=new Date(w.year,w.month-1,w.day);n=Math.round((d-E)/864e5);var D,F=r[p.year-r[0]];for(D=0;D<13;D++){var N=F&1<<12-D?30:29;if(n<N)break;n-=N}var k=F>>13;return!k||D<k?(p.isIntercalary=!1,p.month=1+D):D===k?(p.isIntercalary=!0,p.month=D):(p.isIntercalary=!1,p.month=D),p.day=1+n,p}(f.year(),f.month(),f.day()),h=this.toMonthIndex(m.year,m.month,m.isIntercalary);return this.newDate(m.year,h,m.day)},fromString:function(c){var f=c.match(C),m=this._validateYear(+f[1]),p=this.toMonthIndex(m,+f[2],!!f[3]);return this.newDate(m,p,+f[4])},add:function(c,f,m){var h=c.year(),w=c.month(),p=this.isIntercalaryMonth(h,w),o=this.toChineseMonth(h,w),v=Object.getPrototypeOf(P.prototype).add.call(this,c,f,m);if("y"===m){var M=v.year(),b=v.month(),L=this.isIntercalaryMonth(M,o),x=this.toMonthIndex(M,o,!(!p||!L));x!==b&&v.month(x)}return v}});var C=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,u=/^\d?\d[iI]?/m,y=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,e=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;A.calendars.chinese=P;var r=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],l=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},38751:function(q,W,t){var A=t(63489);function i(P){this.local=this.regionalOptions[P||""]||this.regionalOptions[""]}t(56131)(i.prototype=new A.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(u){var C=this._validate(u,this.minMonth,this.minDay,A.local.invalidYear);return(u=C.year()+(C.year()<0?1:0))%4==3||u%4==-1},monthsInYear:function(P){return this._validate(P,this.minMonth,this.minDay,A.local.invalidYear||A.regionalOptions[""].invalidYear),13},weekOfYear:function(P,C,u){var y=this.newDate(P,C,u);return y.add(-y.dayOfWeek(),"d"),Math.floor((y.dayOfYear()-1)/7)+1},daysInMonth:function(P,C){var u=this._validate(P,C,this.minDay,A.local.invalidMonth);return this.daysPerMonth[u.month()-1]+(13===u.month()&&this.leapYear(u.year())?1:0)},weekDay:function(P,C,u){return(this.dayOfWeek(P,C,u)||7)<6},toJD:function(P,C,u){var y=this._validate(P,C,u,A.local.invalidDate);return(P=y.year())<0&&P++,y.day()+30*(y.month()-1)+365*(P-1)+Math.floor(P/4)+this.jdEpoch-1},fromJD:function(P){var C=Math.floor(P)+.5-this.jdEpoch,u=Math.floor((C-Math.floor((C+366)/1461))/365)+1;u<=0&&u--,C=Math.floor(P)+.5-this.newDate(u,1,1).toJD();var y=Math.floor(C/30)+1;return this.newDate(u,y,C-30*(y-1)+1)}}),A.calendars.coptic=i},86825:function(q,W,t){var A=t(63489);function i(C){this.local=this.regionalOptions[C||""]||this.regionalOptions[""]}t(56131)(i.prototype=new A.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(C){return this._validate(C,this.minMonth,this.minDay,A.local.invalidYear),!1},monthsInYear:function(C){return this._validate(C,this.minMonth,this.minDay,A.local.invalidYear),13},daysInYear:function(C){return this._validate(C,this.minMonth,this.minDay,A.local.invalidYear),400},weekOfYear:function(C,u,y){var e=this.newDate(C,u,y);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/8)+1},daysInMonth:function(C,u){var y=this._validate(C,u,this.minDay,A.local.invalidMonth);return this.daysPerMonth[y.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(C,u,y){return(this._validate(C,u,y,A.local.invalidDate).day()+1)%8},weekDay:function(C,u,y){var e=this.dayOfWeek(C,u,y);return e>=2&&e<=6},extraInfo:function(C,u,y){var e=this._validate(C,u,y,A.local.invalidDate);return{century:P[Math.floor((e.year()-1)/100)+1]||""}},toJD:function(C,u,y){var e=this._validate(C,u,y,A.local.invalidDate);return C=e.year()+(e.year()<0?1:0),u=e.month(),(y=e.day())+(u>1?16:0)+(u>2?32*(u-2):0)+400*(C-1)+this.jdEpoch-1},fromJD:function(C){C=Math.floor(C+.5)-Math.floor(this.jdEpoch)-1;var u=Math.floor(C/400)+1;C-=400*(u-1),C+=C>15?16:0;var y=Math.floor(C/32)+1;return this.newDate(u<=0?u-1:u,y,C-32*(y-1)+1)}});var P={20:"Fruitbat",21:"Anchovy"};A.calendars.discworld=i},37715:function(q,W,t){var A=t(63489);function i(P){this.local=this.regionalOptions[P||""]||this.regionalOptions[""]}t(56131)(i.prototype=new A.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(u){var C=this._validate(u,this.minMonth,this.minDay,A.local.invalidYear);return(u=C.year()+(C.year()<0?1:0))%4==3||u%4==-1},monthsInYear:function(P){return this._validate(P,this.minMonth,this.minDay,A.local.invalidYear||A.regionalOptions[""].invalidYear),13},weekOfYear:function(P,C,u){var y=this.newDate(P,C,u);return y.add(-y.dayOfWeek(),"d"),Math.floor((y.dayOfYear()-1)/7)+1},daysInMonth:function(P,C){var u=this._validate(P,C,this.minDay,A.local.invalidMonth);return this.daysPerMonth[u.month()-1]+(13===u.month()&&this.leapYear(u.year())?1:0)},weekDay:function(P,C,u){return(this.dayOfWeek(P,C,u)||7)<6},toJD:function(P,C,u){var y=this._validate(P,C,u,A.local.invalidDate);return(P=y.year())<0&&P++,y.day()+30*(y.month()-1)+365*(P-1)+Math.floor(P/4)+this.jdEpoch-1},fromJD:function(P){var C=Math.floor(P)+.5-this.jdEpoch,u=Math.floor((C-Math.floor((C+366)/1461))/365)+1;u<=0&&u--,C=Math.floor(P)+.5-this.newDate(u,1,1).toJD();var y=Math.floor(C/30)+1;return this.newDate(u,y,C-30*(y-1)+1)}}),A.calendars.ethiopian=i},99384:function(q,W,t){var A=t(63489);function i(C){this.local=this.regionalOptions[C||""]||this.regionalOptions[""]}function P(C,u){return C-u*Math.floor(C/u)}t(56131)(i.prototype=new A.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(C){var u=this._validate(C,this.minMonth,this.minDay,A.local.invalidYear);return this._leapYear(u.year())},_leapYear:function(C){return P(7*(C=C<0?C+1:C)+1,19)<7},monthsInYear:function(C){return this._validate(C,this.minMonth,this.minDay,A.local.invalidYear),this._leapYear(C.year?C.year():C)?13:12},weekOfYear:function(C,u,y){var e=this.newDate(C,u,y);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInYear:function(C){return C=this._validate(C,this.minMonth,this.minDay,A.local.invalidYear).year(),this.toJD(-1===C?1:C+1,7,1)-this.toJD(C,7,1)},daysInMonth:function(C,u){return C.year&&(u=C.month(),C=C.year()),this._validate(C,u,this.minDay,A.local.invalidMonth),12===u&&this.leapYear(C)||8===u&&5===P(this.daysInYear(C),10)?30:9===u&&3===P(this.daysInYear(C),10)?29:this.daysPerMonth[u-1]},weekDay:function(C,u,y){return 6!==this.dayOfWeek(C,u,y)},extraInfo:function(C,u,y){var e=this._validate(C,u,y,A.local.invalidDate);return{yearType:(this.leapYear(e)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(e)%10-3]}},toJD:function(C,u,y){var e=this._validate(C,u,y,A.local.invalidDate);C=e.year(),u=e.month(),y=e.day();var r=C<=0?C+1:C,l=this.jdEpoch+this._delay1(r)+this._delay2(r)+y+1;if(u<7){for(var a=7;a<=this.monthsInYear(C);a++)l+=this.daysInMonth(C,a);for(a=1;a<u;a++)l+=this.daysInMonth(C,a)}else for(a=7;a<u;a++)l+=this.daysInMonth(C,a);return l},_delay1:function(C){var u=Math.floor((235*C-234)/19),e=29*u+Math.floor((12084+13753*u)/25920);return P(3*(e+1),7)<3&&e++,e},_delay2:function(C){var u=this._delay1(C-1),y=this._delay1(C);return this._delay1(C+1)-y==356?2:y-u==382?1:0},fromJD:function(C){C=Math.floor(C)+.5;for(var u=Math.floor(98496*(C-this.jdEpoch)/35975351)-1;C>=this.toJD(-1===u?1:u+1,7,1);)u++;for(var y=C<this.toJD(u,1,1)?7:1;C>this.toJD(u,y,this.daysInMonth(u,y));)y++;var e=C-this.toJD(u,y,1)+1;return this.newDate(u,y,e)}}),A.calendars.hebrew=i},43805:function(q,W,t){var A=t(63489);function i(P){this.local=this.regionalOptions[P||""]||this.regionalOptions[""]}t(56131)(i.prototype=new A.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(P){return(11*this._validate(P,this.minMonth,this.minDay,A.local.invalidYear).year()+14)%30<11},weekOfYear:function(P,C,u){var y=this.newDate(P,C,u);return y.add(-y.dayOfWeek(),"d"),Math.floor((y.dayOfYear()-1)/7)+1},daysInYear:function(P){return this.leapYear(P)?355:354},daysInMonth:function(P,C){var u=this._validate(P,C,this.minDay,A.local.invalidMonth);return this.daysPerMonth[u.month()-1]+(12===u.month()&&this.leapYear(u.year())?1:0)},weekDay:function(P,C,u){return 5!==this.dayOfWeek(P,C,u)},toJD:function(P,C,u){var y=this._validate(P,C,u,A.local.invalidDate);return P=y.year(),C=y.month(),P=P<=0?P+1:P,(u=y.day())+Math.ceil(29.5*(C-1))+354*(P-1)+Math.floor((3+11*P)/30)+this.jdEpoch-1},fromJD:function(P){P=Math.floor(P)+.5;var C=Math.floor((30*(P-this.jdEpoch)+10646)/10631);C=C<=0?C-1:C;var u=Math.min(12,Math.ceil((P-29-this.toJD(C,1,1))/29.5)+1),y=P-this.toJD(C,u,1)+1;return this.newDate(C,u,y)}}),A.calendars.islamic=i},88874:function(q,W,t){var A=t(63489);function i(P){this.local=this.regionalOptions[P||""]||this.regionalOptions[""]}t(56131)(i.prototype=new A.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(u){var C=this._validate(u,this.minMonth,this.minDay,A.local.invalidYear);return(u=C.year()<0?C.year()+1:C.year())%4==0},weekOfYear:function(P,C,u){var y=this.newDate(P,C,u);return y.add(4-(y.dayOfWeek()||7),"d"),Math.floor((y.dayOfYear()-1)/7)+1},daysInMonth:function(P,C){var u=this._validate(P,C,this.minDay,A.local.invalidMonth);return this.daysPerMonth[u.month()-1]+(2===u.month()&&this.leapYear(u.year())?1:0)},weekDay:function(P,C,u){return(this.dayOfWeek(P,C,u)||7)<6},toJD:function(P,C,u){var y=this._validate(P,C,u,A.local.invalidDate);return P=y.year(),C=y.month(),u=y.day(),P<0&&P++,C<=2&&(P--,C+=12),Math.floor(365.25*(P+4716))+Math.floor(30.6001*(C+1))+u-1524.5},fromJD:function(P){var u=Math.floor(P+.5)+1524,y=Math.floor((u-122.1)/365.25),e=Math.floor(365.25*y),r=Math.floor((u-e)/30.6001),l=r-Math.floor(r<14?1:13),a=y-Math.floor(l>2?4716:4715),s=u-e-Math.floor(30.6001*r);return a<=0&&a--,this.newDate(a,l,s)}}),A.calendars.julian=i},83290:function(q,W,t){var A=t(63489);function i(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}function P(u,y){return u-y*Math.floor(u/y)}function C(u,y){return P(u-1,y)+1}t(56131)(i.prototype=new A.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(u){return this._validate(u,this.minMonth,this.minDay,A.local.invalidYear),!1},formatYear:function(u){u=this._validate(u,this.minMonth,this.minDay,A.local.invalidYear).year();var e=Math.floor(u/400);return u%=400,u+=u<0?400:0,e+"."+Math.floor(u/20)+"."+u%20},forYear:function(u){if((u=u.split(".")).length<3)throw"Invalid Mayan year";for(var y=0,e=0;e<u.length;e++){var r=parseInt(u[e],10);if(Math.abs(r)>19||e>0&&r<0)throw"Invalid Mayan year";y=20*y+r}return y},monthsInYear:function(u){return this._validate(u,this.minMonth,this.minDay,A.local.invalidYear),18},weekOfYear:function(u,y,e){return this._validate(u,y,e,A.local.invalidDate),0},daysInYear:function(u){return this._validate(u,this.minMonth,this.minDay,A.local.invalidYear),360},daysInMonth:function(u,y){return this._validate(u,y,this.minDay,A.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(u,y,e){return this._validate(u,y,e,A.local.invalidDate).day()},weekDay:function(u,y,e){return this._validate(u,y,e,A.local.invalidDate),!0},extraInfo:function(u,y,e){var l=this._validate(u,y,e,A.local.invalidDate).toJD(),a=this._toHaab(l),s=this._toTzolkin(l);return{haabMonthName:this.local.haabMonths[a[0]-1],haabMonth:a[0],haabDay:a[1],tzolkinDayName:this.local.tzolkinMonths[s[0]-1],tzolkinDay:s[0],tzolkinTrecena:s[1]}},_toHaab:function(u){var y=P(8+(u-=this.jdEpoch)+340,365);return[Math.floor(y/20)+1,P(y,20)]},_toTzolkin:function(u){return[C(20+(u-=this.jdEpoch),20),C(u+4,13)]},toJD:function(u,y,e){var r=this._validate(u,y,e,A.local.invalidDate);return r.day()+20*r.month()+360*r.year()+this.jdEpoch},fromJD:function(u){u=Math.floor(u)+.5-this.jdEpoch;var y=Math.floor(u/360);u%=360,u+=u<0?360:0;var e=Math.floor(u/20);return this.newDate(y,e,u%20)}}),A.calendars.mayan=i},29108:function(q,W,t){var A=t(63489),g=t(56131);function i(C){this.local=this.regionalOptions[C||""]||this.regionalOptions[""]}i.prototype=new A.baseCalendar;var P=A.instance("gregorian");g(i.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(C){var u=this._validate(C,this.minMonth,this.minDay,A.local.invalidYear||A.regionalOptions[""].invalidYear);return P.leapYear(u.year()+(u.year()<1?1:0)+1469)},weekOfYear:function(C,u,y){var e=this.newDate(C,u,y);return e.add(1-(e.dayOfWeek()||7),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(C,u){var y=this._validate(C,u,this.minDay,A.local.invalidMonth);return this.daysPerMonth[y.month()-1]+(12===y.month()&&this.leapYear(y.year())?1:0)},weekDay:function(C,u,y){return(this.dayOfWeek(C,u,y)||7)<6},toJD:function(r,u,y){var e=this._validate(r,u,y,A.local.invalidMonth);(r=e.year())<0&&r++;for(var l=e.day(),a=1;a<e.month();a++)l+=this.daysPerMonth[a-1];return l+P.toJD(r+1468,3,13)},fromJD:function(C){C=Math.floor(C+.5);for(var u=Math.floor((C-(this.jdEpoch-1))/366);C>=this.toJD(u+1,1,1);)u++;for(var y=C-Math.floor(this.toJD(u,1,1)+.5)+1,e=1;y>this.daysInMonth(u,e);)y-=this.daysInMonth(u,e),e++;return this.newDate(u,e,y)}}),A.calendars.nanakshahi=i},55422:function(q,W,t){var A=t(63489);function i(P){this.local=this.regionalOptions[P||""]||this.regionalOptions[""]}t(56131)(i.prototype=new A.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(P){return this.daysInYear(P)!==this.daysPerYear},weekOfYear:function(P,C,u){var y=this.newDate(P,C,u);return y.add(-y.dayOfWeek(),"d"),Math.floor((y.dayOfYear()-1)/7)+1},daysInYear:function(P){if(P=this._validate(P,this.minMonth,this.minDay,A.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[P])return this.daysPerYear;for(var u=0,y=this.minMonth;y<=12;y++)u+=this.NEPALI_CALENDAR_DATA[P][y];return u},daysInMonth:function(P,C){return P.year&&(C=P.month(),P=P.year()),this._validate(P,C,this.minDay,A.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[P]?this.daysPerMonth[C-1]:this.NEPALI_CALENDAR_DATA[P][C]},weekDay:function(P,C,u){return 6!==this.dayOfWeek(P,C,u)},toJD:function(P,C,u){var y=this._validate(P,C,u,A.local.invalidDate);P=y.year(),C=y.month(),u=y.day();var e=A.instance(),r=0,l=C,a=P;this._createMissingCalendarData(P);var s=P-(l>9||9===l&&u>=this.NEPALI_CALENDAR_DATA[a][0]?56:57);for(9!==C&&(r=u,l--);9!==l;)l<=0&&(l=12,a--),r+=this.NEPALI_CALENDAR_DATA[a][l],l--;return 9===C?(r+=u-this.NEPALI_CALENDAR_DATA[a][0])<0&&(r+=e.daysInYear(s)):r+=this.NEPALI_CALENDAR_DATA[a][9]-this.NEPALI_CALENDAR_DATA[a][0],e.newDate(s,1,1).add(r,"d").toJD()},fromJD:function(P){var u=A.instance().fromJD(P),y=u.year(),e=u.dayOfYear(),r=y+56;this._createMissingCalendarData(r);for(var l=9,s=this.NEPALI_CALENDAR_DATA[r][l]-this.NEPALI_CALENDAR_DATA[r][0]+1;e>s;)++l>12&&(l=1,r++),s+=this.NEPALI_CALENDAR_DATA[r][l];return this.newDate(r,l,this.NEPALI_CALENDAR_DATA[r][l]-(s-e))},_createMissingCalendarData:function(P){var C=this.daysPerMonth.slice(0);C.unshift(17);for(var u=P-1;u<P+2;u++)void 0===this.NEPALI_CALENDAR_DATA[u]&&(this.NEPALI_CALENDAR_DATA[u]=C)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),A.calendars.nepali=i},94320:function(q,W,t){var A=t(63489);function i(C){this.local=this.regionalOptions[C||""]||this.regionalOptions[""]}function P(C,u){return C-u*Math.floor(C/u)}t(56131)(i.prototype=new A.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(C){var u=this._validate(C,this.minMonth,this.minDay,A.local.invalidYear);return 682*((u.year()-(u.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(C,u,y){var e=this.newDate(C,u,y);return e.add(-(e.dayOfWeek()+1)%7,"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(C,u){var y=this._validate(C,u,this.minDay,A.local.invalidMonth);return this.daysPerMonth[y.month()-1]+(12===y.month()&&this.leapYear(y.year())?1:0)},weekDay:function(C,u,y){return 5!==this.dayOfWeek(C,u,y)},toJD:function(C,u,y){var e=this._validate(C,u,y,A.local.invalidDate);C=e.year(),u=e.month(),y=e.day();var r=C-(C>=0?474:473),l=474+P(r,2820);return y+(u<=7?31*(u-1):30*(u-1)+6)+Math.floor((682*l-110)/2816)+365*(l-1)+1029983*Math.floor(r/2820)+this.jdEpoch-1},fromJD:function(C){var u=(C=Math.floor(C)+.5)-this.toJD(475,1,1),y=Math.floor(u/1029983),e=P(u,1029983),r=2820;if(1029982!==e){var l=Math.floor(e/366),a=P(e,366);r=Math.floor((2134*l+2816*a+2815)/1028522)+l+1}var s=r+2820*y+474,c=C-this.toJD(s=s<=0?s-1:s,1,1)+1,f=c<=186?Math.ceil(c/31):Math.ceil((c-6)/30),m=C-this.toJD(s,f,1)+1;return this.newDate(s,f,m)}}),A.calendars.persian=i,A.calendars.jalali=i},31320:function(q,W,t){var A=t(63489),g=t(56131),i=A.instance();function P(C){this.local=this.regionalOptions[C||""]||this.regionalOptions[""]}g(P.prototype=new A.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(y){var u=this._validate(y,this.minMonth,this.minDay,A.local.invalidYear);return y=this._t2gYear(u.year()),i.leapYear(y)},weekOfYear:function(r,u,y){var e=this._validate(r,this.minMonth,this.minDay,A.local.invalidYear);return r=this._t2gYear(e.year()),i.weekOfYear(r,e.month(),e.day())},daysInMonth:function(C,u){var y=this._validate(C,u,this.minDay,A.local.invalidMonth);return this.daysPerMonth[y.month()-1]+(2===y.month()&&this.leapYear(y.year())?1:0)},weekDay:function(C,u,y){return(this.dayOfWeek(C,u,y)||7)<6},toJD:function(r,u,y){var e=this._validate(r,u,y,A.local.invalidDate);return r=this._t2gYear(e.year()),i.toJD(r,e.month(),e.day())},fromJD:function(C){var u=i.fromJD(C),y=this._g2tYear(u.year());return this.newDate(y,u.month(),u.day())},_t2gYear:function(C){return C+this.yearsOffset+(C>=-this.yearsOffset&&C<=-1?1:0)},_g2tYear:function(C){return C-this.yearsOffset-(C>=1&&C<=this.yearsOffset?1:0)}}),A.calendars.taiwan=P},51367:function(q,W,t){var A=t(63489),g=t(56131),i=A.instance();function P(C){this.local=this.regionalOptions[C||""]||this.regionalOptions[""]}g(P.prototype=new A.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(y){var u=this._validate(y,this.minMonth,this.minDay,A.local.invalidYear);return y=this._t2gYear(u.year()),i.leapYear(y)},weekOfYear:function(r,u,y){var e=this._validate(r,this.minMonth,this.minDay,A.local.invalidYear);return r=this._t2gYear(e.year()),i.weekOfYear(r,e.month(),e.day())},daysInMonth:function(C,u){var y=this._validate(C,u,this.minDay,A.local.invalidMonth);return this.daysPerMonth[y.month()-1]+(2===y.month()&&this.leapYear(y.year())?1:0)},weekDay:function(C,u,y){return(this.dayOfWeek(C,u,y)||7)<6},toJD:function(r,u,y){var e=this._validate(r,u,y,A.local.invalidDate);return r=this._t2gYear(e.year()),i.toJD(r,e.month(),e.day())},fromJD:function(C){var u=i.fromJD(C),y=this._g2tYear(u.year());return this.newDate(y,u.month(),u.day())},_t2gYear:function(C){return C-this.yearsOffset-(C>=1&&C<=this.yearsOffset?1:0)},_g2tYear:function(C){return C+this.yearsOffset+(C>=-this.yearsOffset&&C<=-1?1:0)}}),A.calendars.thai=P},21457:function(q,W,t){var A=t(63489);function i(C){this.local=this.regionalOptions[C||""]||this.regionalOptions[""]}t(56131)(i.prototype=new A.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(C){var u=this._validate(C,this.minMonth,this.minDay,A.local.invalidYear);return 355===this.daysInYear(u.year())},weekOfYear:function(C,u,y){var e=this.newDate(C,u,y);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInYear:function(C){for(var u=0,y=1;y<=12;y++)u+=this.daysInMonth(C,y);return u},daysInMonth:function(C,u){for(var e=this._validate(C,u,this.minDay,A.local.invalidMonth).toJD()-24e5+.5,r=0,l=0;l<P.length;l++){if(P[l]>e)return P[r]-P[r-1];r++}return 30},weekDay:function(C,u,y){return 5!==this.dayOfWeek(C,u,y)},toJD:function(C,u,y){var e=this._validate(C,u,y,A.local.invalidDate),r=12*(e.year()-1)+e.month()-15292;return e.day()+P[r-1]-1+24e5-.5},fromJD:function(C){for(var u=C-24e5+.5,y=0,e=0;e<P.length&&!(P[e]>u);e++)y++;var r=y+15292,l=Math.floor((r-1)/12);return this.newDate(l+1,r-12*l,u-P[y-1]+1)},isValid:function(C,u,y){var e=A.baseCalendar.prototype.isValid.apply(this,arguments);return e&&(e=(C=null!=C.year?C.year:C)>=1276&&C<=1500),e},_validate:function(C,u,y,e){var r=A.baseCalendar.prototype._validate.apply(this,arguments);if(r.year<1276||r.year>1500)throw e.replace(/\{0\}/,this.local.name);return r}}),A.calendars.ummalqura=i;var P=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},63489:function(q,W,t){var A=t(56131);function g(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function i(e,r,l,a){if(this._calendar=e,this._year=r,this._month=l,this._day=a,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(y.local.invalidDate||y.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function P(e,r){return"000000".substring(0,r-(e=""+e).length)+e}function C(){this.shortYearCutoff="+10"}function u(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}A(g.prototype,{instance:function(e,r){e=(e||"gregorian").toLowerCase();var l=this._localCals[e+"-"+(r=r||"")];if(!l&&this.calendars[e]&&(l=new this.calendars[e](r),this._localCals[e+"-"+r]=l),!l)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return l},newDate:function(e,r,l,a,s){return(a=(null!=e&&e.year?e.calendar():"string"==typeof a?this.instance(a,s):a)||this.instance()).newDate(e,r,l)},substituteDigits:function(e){return function(r){return(r+"").replace(/[0-9]/g,function(l){return e[l]})}},substituteChineseDigits:function(e,r){return function(l){for(var a="",s=0;l>0;){var c=l%10;a=(0===c?"":e[c]+r[s])+a,s++,l=Math.floor(l/10)}return 0===a.indexOf(e[1]+r[1])&&(a=a.substr(1)),a||e[0]}}}),A(i.prototype,{newDate:function(e,r,l){return this._calendar.newDate(null==e?this:e,r,l)},year:function(e){return 0===arguments.length?this._year:this.set(e,"y")},month:function(e){return 0===arguments.length?this._month:this.set(e,"m")},day:function(e){return 0===arguments.length?this._day:this.set(e,"d")},date:function(e,r,l){if(!this._calendar.isValid(e,r,l))throw(y.local.invalidDate||y.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=e,this._month=r,this._day=l,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,r){return this._calendar.add(this,e,r)},set:function(e,r){return this._calendar.set(this,e,r)},compareTo:function(e){if(this._calendar.name!==e._calendar.name)throw(y.local.differentCalendars||y.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);var r=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return 0===r?0:r<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+P(Math.abs(this.year()),4)+"-"+P(this.month(),2)+"-"+P(this.day(),2)}}),A(C.prototype,{_validateLevel:0,newDate:function(e,r,l){return null==e?this.today():(e.year&&(this._validate(e,r,l,y.local.invalidDate||y.regionalOptions[""].invalidDate),l=e.day(),r=e.month(),e=e.year()),new i(this,e,r,l))},today:function(){return this.fromJSDate(new Date)},epoch:function(e){return this._validate(e,this.minMonth,this.minDay,y.local.invalidYear||y.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear||y.regionalOptions[""].invalidYear);return(r.year()<0?"-":"")+P(Math.abs(r.year()),4)},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,y.local.invalidYear||y.regionalOptions[""].invalidYear),12},monthOfYear:function(e,r){var l=this._validate(e,r,this.minDay,y.local.invalidMonth||y.regionalOptions[""].invalidMonth);return(l.month()+this.monthsInYear(l)-this.firstMonth)%this.monthsInYear(l)+this.minMonth},fromMonthOfYear:function(e,r){var l=(r+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;return this._validate(e,l,this.minDay,y.local.invalidMonth||y.regionalOptions[""].invalidMonth),l},daysInYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear||y.regionalOptions[""].invalidYear);return this.leapYear(r)?366:365},dayOfYear:function(e,r,l){var a=this._validate(e,r,l,y.local.invalidDate||y.regionalOptions[""].invalidDate);return a.toJD()-this.newDate(a.year(),this.fromMonthOfYear(a.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,r,l){var a=this._validate(e,r,l,y.local.invalidDate||y.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(a))+2)%this.daysInWeek()},extraInfo:function(e,r,l){return this._validate(e,r,l,y.local.invalidDate||y.regionalOptions[""].invalidDate),{}},add:function(e,r,l){return this._validate(e,this.minMonth,this.minDay,y.local.invalidDate||y.regionalOptions[""].invalidDate),this._correctAdd(e,this._add(e,r,l),r,l)},_add:function(e,r,l){if(this._validateLevel++,"d"===l||"w"===l){var a=e.toJD()+r*("w"===l?this.daysInWeek():1),s=e.calendar().fromJD(a);return this._validateLevel--,[s.year(),s.month(),s.day()]}try{var c=e.year()+("y"===l?r:0),f=e.monthOfYear()+("m"===l?r:0),m=(s=e.day(),function(p){for(;f<p.minMonth;)c--,f+=p.monthsInYear(c);for(var o=p.monthsInYear(c);f>o-1+p.minMonth;)c++,f-=o,o=p.monthsInYear(c)});"y"===l?(e.month()!==this.fromMonthOfYear(c,f)&&(f=this.newDate(c,e.month(),this.minDay).monthOfYear()),f=Math.min(f,this.monthsInYear(c)),s=Math.min(s,this.daysInMonth(c,this.fromMonthOfYear(c,f)))):"m"===l&&(m(this),s=Math.min(s,this.daysInMonth(c,this.fromMonthOfYear(c,f))));var h=[c,this.fromMonthOfYear(c,f),s];return this._validateLevel--,h}catch(w){throw this._validateLevel--,w}},_correctAdd:function(e,r,l,a){if(!(this.hasYearZero||"y"!==a&&"m"!==a||0!==r[0]&&e.year()>0==r[0]>0)){var s={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[a];r=this._add(e,l*s[0]+(l<0?-1:1)*s[1],s[2])}return e.date(r[0],r[1],r[2])},set:function(e,r,l){this._validate(e,this.minMonth,this.minDay,y.local.invalidDate||y.regionalOptions[""].invalidDate);var a="y"===l?r:e.year(),s="m"===l?r:e.month(),c="d"===l?r:e.day();return("y"===l||"m"===l)&&(c=Math.min(c,this.daysInMonth(a,s))),e.date(a,s,c)},isValid:function(e,r,l){this._validateLevel++;var a=this.hasYearZero||0!==e;if(a){var s=this.newDate(e,r,this.minDay);a=r>=this.minMonth&&r-this.minMonth<this.monthsInYear(s)&&l>=this.minDay&&l-this.minDay<this.daysInMonth(s)}return this._validateLevel--,a},toJSDate:function(e,r,l){var a=this._validate(e,r,l,y.local.invalidDate||y.regionalOptions[""].invalidDate);return y.instance().fromJD(this.toJD(a)).toJSDate()},fromJSDate:function(e){return this.fromJD(y.instance().fromJSDate(e).toJD())},_validate:function(e,r,l,a){if(e.year){if(0===this._validateLevel&&this.name!==e.calendar().name)throw(y.local.differentCalendars||y.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(e,r,l))throw a.replace(/\{0\}/,this.local.name);var s=this.newDate(e,r,l);return this._validateLevel--,s}catch(c){throw this._validateLevel--,c}}}),A(u.prototype=new C,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(l){var r=this._validate(l,this.minMonth,this.minDay,y.local.invalidYear||y.regionalOptions[""].invalidYear);return(l=r.year()+(r.year()<0?1:0))%4==0&&(l%100!=0||l%400==0)},weekOfYear:function(e,r,l){var a=this.newDate(e,r,l);return a.add(4-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,r){var l=this._validate(e,r,this.minDay,y.local.invalidMonth||y.regionalOptions[""].invalidMonth);return this.daysPerMonth[l.month()-1]+(2===l.month()&&this.leapYear(l.year())?1:0)},weekDay:function(e,r,l){return(this.dayOfWeek(e,r,l)||7)<6},toJD:function(e,r,l){var a=this._validate(e,r,l,y.local.invalidDate||y.regionalOptions[""].invalidDate);e=a.year(),r=a.month(),l=a.day(),e<0&&e++,r<3&&(r+=12,e--);var s=Math.floor(e/100),c=2-s+Math.floor(s/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(r+1))+l+c-1524.5},fromJD:function(e){var r=Math.floor(e+.5),l=Math.floor((r-1867216.25)/36524.25),a=1524+(l=r+1+l-Math.floor(l/4)),s=Math.floor((a-122.1)/365.25),c=Math.floor(365.25*s),f=Math.floor((a-c)/30.6001),m=a-c-Math.floor(30.6001*f),h=f-(f>13.5?13:1),w=s-(h>2.5?4716:4715);return w<=0&&w--,this.newDate(w,h,m)},toJSDate:function(e,r,l){var a=this._validate(e,r,l,y.local.invalidDate||y.regionalOptions[""].invalidDate),s=new Date(a.year(),a.month()-1,a.day());return s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0),s.setHours(s.getHours()>12?s.getHours()+2:0),s},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var y=q.exports=new g;y.cdate=i,y.baseCalendar=C,y.calendars.gregorian=u},94338:function(q,W,t){var A=t(56131),g=t(63489);A(g.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),g.local=g.regionalOptions[""],A(g.cdate.prototype,{formatDate:function(i,P){return"string"!=typeof i&&(P=i,i=""),this._calendar.formatDate(i||"",this,P)}}),A(g.baseCalendar.prototype,{UNIX_EPOCH:g.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:g.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(i,P,C){if("string"!=typeof i&&(C=P,P=i,i=""),!P)return"";if(P.calendar()!==this)throw g.local.invalidFormat||g.regionalOptions[""].invalidFormat;i=i||this.local.dateFormat;for(var u=(C=C||{}).dayNamesShort||this.local.dayNamesShort,y=C.dayNames||this.local.dayNames,e=C.monthNumbers||this.local.monthNumbers,r=C.monthNamesShort||this.local.monthNamesShort,l=C.monthNames||this.local.monthNames,s=function(L,x){for(var S=1;b+S<i.length&&i.charAt(b+S)===L;)S++;return b+=S-1,Math.floor(S/(x||1))>1},c=function(L,x,S,T){var n=""+x;if(s(L,T))for(;n.length<S;)n="0"+n;return n},m=this,h=function(L){return"function"==typeof e?e.call(m,L,s("m")):o(c("m",L.month(),2))},w=function(L,x){return x?"function"==typeof l?l.call(m,L):l[L.month()-m.minMonth]:"function"==typeof r?r.call(m,L):r[L.month()-m.minMonth]},p=this.local.digits,o=function(L){return C.localNumbers&&p?p(L):L},v="",M=!1,b=0;b<i.length;b++)if(M)"'"!==i.charAt(b)||s("'")?v+=i.charAt(b):M=!1;else switch(i.charAt(b)){case"d":v+=o(c("d",P.day(),2));break;case"D":v+=(L="D",x=P.dayOfWeek(),S=u,T=y,s(L)?T[x]:S[x]);break;case"o":v+=c("o",P.dayOfYear(),3);break;case"w":v+=c("w",P.weekOfYear(),2);break;case"m":v+=h(P);break;case"M":v+=w(P,s("M"));break;case"y":v+=s("y",2)?P.year():(P.year()%100<10?"0":"")+P.year()%100;break;case"Y":s("Y",2),v+=P.formatYear();break;case"J":v+=P.toJD();break;case"@":v+=(P.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":v+=(P.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":s("'")?v+="'":M=!0;break;default:v+=i.charAt(b)}var L,x,S,T;return v},parseDate:function(i,P,C){if(null==P)throw g.local.invalidArguments||g.regionalOptions[""].invalidArguments;if(""===(P="object"==typeof P?P.toString():P+""))return null;i=i||this.local.dateFormat;var u=(C=C||{}).shortYearCutoff||this.shortYearCutoff;u="string"!=typeof u?u:this.today().year()%100+parseInt(u,10);for(var y=C.dayNamesShort||this.local.dayNamesShort,e=C.dayNames||this.local.dayNames,r=C.parseMonth||this.local.parseMonth,l=C.monthNumbers||this.local.monthNumbers,a=C.monthNamesShort||this.local.monthNamesShort,s=C.monthNames||this.local.monthNames,c=-1,f=-1,m=-1,h=-1,w=-1,p=!1,o=!1,v=function(D,N){for(var k=1;E+k<i.length&&i.charAt(E+k)===D;)k++;return E+=k-1,Math.floor(k/(N||1))>1},M=function(D,N){var k=v(D,N),O=[2,3,k?4:2,k?4:2,10,11,20]["oyYJ@!".indexOf(D)+1],B=new RegExp("^-?\\d{1,"+O+"}"),z=P.substring(n).match(B);if(!z)throw(g.local.missingNumberAt||g.regionalOptions[""].missingNumberAt).replace(/\{0\}/,n);return n+=z[0].length,parseInt(z[0],10)},b=this,L=function(){if("function"==typeof l){v("m");var D=l.call(b,P.substring(n));return n+=D.length,D}return M("m")},x=function(D,N,k,O){for(var B=v(D,O)?k:N,z=0;z<B.length;z++)if(P.substr(n,B[z].length).toLowerCase()===B[z].toLowerCase())return n+=B[z].length,z+b.minMonth;throw(g.local.unknownNameAt||g.regionalOptions[""].unknownNameAt).replace(/\{0\}/,n)},S=function(){if("function"==typeof s){var D=v("M")?s.call(b,P.substring(n)):a.call(b,P.substring(n));return n+=D.length,D}return x("M",a,s)},T=function(){if(P.charAt(n)!==i.charAt(E))throw(g.local.unexpectedLiteralAt||g.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,n);n++},n=0,E=0;E<i.length;E++)if(o)"'"!==i.charAt(E)||v("'")?T():o=!1;else switch(i.charAt(E)){case"d":h=M("d");break;case"D":x("D",y,e);break;case"o":w=M("o");break;case"w":M("w");break;case"m":m=L();break;case"M":m=S();break;case"y":var d=E;p=!v("y",2),E=d,f=M("y",2);break;case"Y":f=M("Y",2);break;case"J":c=M("J")+.5,"."===P.charAt(n)&&(n++,M("J"));break;case"@":c=M("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":c=M("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":n=P.length;break;case"'":v("'")?T():o=!0;break;default:T()}if(n<P.length)throw g.local.unexpectedText||g.regionalOptions[""].unexpectedText;if(-1===f?f=this.today().year():f<100&&p&&(f+=-1===u?1900:this.today().year()-this.today().year()%100-(f<=u?0:100)),"string"==typeof m&&(m=r.call(this,f,m)),w>-1){h=w;for(var F=this.daysInMonth(f,m=1);h>F;F=this.daysInMonth(f,m))m++,h-=F}return c>-1?this.fromJD(c):this.newDate(f,m,h)},determineDate:function(i,P,C,u,y){C&&"object"!=typeof C&&(y=u,u=C,C=null),"string"!=typeof u&&(y=u,u="");var e=this;return P=P?P.newDate():null,null==i?P:"string"==typeof i?function(l){try{return e.parseDate(u,l,y)}catch(f){}for(var a=((l=l.toLowerCase()).match(/^c/)&&C?C.newDate():null)||e.today(),s=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,c=s.exec(l);c;)a.add(parseInt(c[1],10),c[2]||"d"),c=s.exec(l);return a}(i):"number"==typeof i?isNaN(i)||i===1/0||i===-1/0?P:e.today().add(i,"d"):e.newDate(i)}})},69862:function(){},40964:function(){},72077:function(q,W,t){"use strict";var A=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],g="undefined"==typeof globalThis?t.g:globalThis;q.exports=function(){for(var P=[],C=0;C<A.length;C++)"function"==typeof g[A[C]]&&(P[P.length]=A[C]);return P}},81684:function(q,W,t){"use strict";function A(Bt,Ot,qt){Bt.prototype=Ot.prototype=qt,qt.constructor=Bt}function g(Bt,Ot){var qt=Object.create(Bt.prototype);for(var ie in Ot)qt[ie]=Ot[ie];return qt}function i(){}t.d(W,{sX:function(){return Qt},k4:function(){return gt}});var P=.7,C=1/P,u="\\s*([+-]?\\d+)\\s*",y="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",r=/^#([0-9a-f]{3,8})$/,l=new RegExp("^rgb\\(".concat(u,",").concat(u,",").concat(u,"\\)$")),a=new RegExp("^rgb\\(".concat(e,",").concat(e,",").concat(e,"\\)$")),s=new RegExp("^rgba\\(".concat(u,",").concat(u,",").concat(u,",").concat(y,"\\)$")),c=new RegExp("^rgba\\(".concat(e,",").concat(e,",").concat(e,",").concat(y,"\\)$")),f=new RegExp("^hsl\\(".concat(y,",").concat(e,",").concat(e,"\\)$")),m=new RegExp("^hsla\\(".concat(y,",").concat(e,",").concat(e,",").concat(y,"\\)$")),h={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function w(){return this.rgb().formatHex()}function v(){return this.rgb().formatRgb()}function M(Bt){var Ot,qt;return Bt=(Bt+"").trim().toLowerCase(),(Ot=r.exec(Bt))?(qt=Ot[1].length,Ot=parseInt(Ot[1],16),6===qt?b(Ot):3===qt?new T(Ot>>8&15|Ot>>4&240,Ot>>4&15|240&Ot,(15&Ot)<<4|15&Ot,1):8===qt?L(Ot>>24&255,Ot>>16&255,Ot>>8&255,(255&Ot)/255):4===qt?L(Ot>>12&15|Ot>>8&240,Ot>>8&15|Ot>>4&240,Ot>>4&15|240&Ot,((15&Ot)<<4|15&Ot)/255):null):(Ot=l.exec(Bt))?new T(Ot[1],Ot[2],Ot[3],1):(Ot=a.exec(Bt))?new T(255*Ot[1]/100,255*Ot[2]/100,255*Ot[3]/100,1):(Ot=s.exec(Bt))?L(Ot[1],Ot[2],Ot[3],Ot[4]):(Ot=c.exec(Bt))?L(255*Ot[1]/100,255*Ot[2]/100,255*Ot[3]/100,Ot[4]):(Ot=f.exec(Bt))?k(Ot[1],Ot[2]/100,Ot[3]/100,1):(Ot=m.exec(Bt))?k(Ot[1],Ot[2]/100,Ot[3]/100,Ot[4]):h.hasOwnProperty(Bt)?b(h[Bt]):"transparent"===Bt?new T(NaN,NaN,NaN,0):null}function b(Bt){return new T(Bt>>16&255,Bt>>8&255,255&Bt,1)}function L(Bt,Ot,qt,ie){return ie<=0&&(Bt=Ot=qt=NaN),new T(Bt,Ot,qt,ie)}function x(Bt){return Bt instanceof i||(Bt=M(Bt)),Bt?new T((Bt=Bt.rgb()).r,Bt.g,Bt.b,Bt.opacity):new T}function S(Bt,Ot,qt,ie){return 1===arguments.length?x(Bt):new T(Bt,Ot,qt,null==ie?1:ie)}function T(Bt,Ot,qt,ie){this.r=+Bt,this.g=+Ot,this.b=+qt,this.opacity=+ie}function n(){return"#".concat(N(this.r)).concat(N(this.g)).concat(N(this.b))}function d(){var Bt=F(this.opacity);return"".concat(1===Bt?"rgb(":"rgba(").concat(D(this.r),", ").concat(D(this.g),", ").concat(D(this.b)).concat(1===Bt?")":", ".concat(Bt,")"))}function F(Bt){return isNaN(Bt)?1:Math.max(0,Math.min(1,Bt))}function D(Bt){return Math.max(0,Math.min(255,Math.round(Bt)||0))}function N(Bt){return((Bt=D(Bt))<16?"0":"")+Bt.toString(16)}function k(Bt,Ot,qt,ie){return ie<=0?Bt=Ot=qt=NaN:qt<=0||qt>=1?Bt=Ot=NaN:Ot<=0&&(Bt=NaN),new z(Bt,Ot,qt,ie)}function O(Bt){if(Bt instanceof z)return new z(Bt.h,Bt.s,Bt.l,Bt.opacity);if(Bt instanceof i||(Bt=M(Bt)),!Bt)return new z;if(Bt instanceof z)return Bt;var Ot=(Bt=Bt.rgb()).r/255,qt=Bt.g/255,ie=Bt.b/255,oe=Math.min(Ot,qt,ie),pe=Math.max(Ot,qt,ie),de=NaN,Fe=pe-oe,Kt=(pe+oe)/2;return Fe?(de=Ot===pe?(qt-ie)/Fe+6*(qt<ie):qt===pe?(ie-Ot)/Fe+2:(Ot-qt)/Fe+4,Fe/=Kt<.5?pe+oe:2-pe-oe,de*=60):Fe=Kt>0&&Kt<1?0:de,new z(de,Fe,Kt,Bt.opacity)}function z(Bt,Ot,qt,ie){this.h=+Bt,this.s=+Ot,this.l=+qt,this.opacity=+ie}function U(Bt){return(Bt=(Bt||0)%360)<0?Bt+360:Bt}function H(Bt){return Math.max(0,Math.min(1,Bt||0))}function J(Bt,Ot,qt){return 255*(Bt<60?Ot+(qt-Ot)*Bt/60:Bt<180?qt:Bt<240?Ot+(qt-Ot)*(240-Bt)/60:Ot)}function nt(Bt,Ot,qt,ie,oe){var pe=Bt*Bt,de=pe*Bt;return((1-3*Bt+3*pe-de)*Ot+(4-6*pe+3*de)*qt+(1+3*Bt+3*pe-3*de)*ie+de*oe)/6}A(i,M,{copy:function(Ot){return Object.assign(new this.constructor,this,Ot)},displayable:function(){return this.rgb().displayable()},hex:w,formatHex:w,formatHex8:function p(){return this.rgb().formatHex8()},formatHsl:function o(){return O(this).formatHsl()},formatRgb:v,toString:v}),A(T,S,g(i,{brighter:function(Ot){return Ot=null==Ot?C:Math.pow(C,Ot),new T(this.r*Ot,this.g*Ot,this.b*Ot,this.opacity)},darker:function(Ot){return Ot=null==Ot?P:Math.pow(P,Ot),new T(this.r*Ot,this.g*Ot,this.b*Ot,this.opacity)},rgb:function(){return this},clamp:function(){return new T(D(this.r),D(this.g),D(this.b),F(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:n,formatHex:n,formatHex8:function E(){return"#".concat(N(this.r)).concat(N(this.g)).concat(N(this.b)).concat(N(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:d,toString:d})),A(z,function B(Bt,Ot,qt,ie){return 1===arguments.length?O(Bt):new z(Bt,Ot,qt,null==ie?1:ie)},g(i,{brighter:function(Ot){return Ot=null==Ot?C:Math.pow(C,Ot),new z(this.h,this.s,this.l*Ot,this.opacity)},darker:function(Ot){return Ot=null==Ot?P:Math.pow(P,Ot),new z(this.h,this.s,this.l*Ot,this.opacity)},rgb:function(){var Ot=this.h%360+360*(this.h<0),qt=isNaN(Ot)||isNaN(this.s)?0:this.s,ie=this.l,oe=ie+(ie<.5?ie:1-ie)*qt,pe=2*ie-oe;return new T(J(Ot>=240?Ot-240:Ot+120,pe,oe),J(Ot,pe,oe),J(Ot<120?Ot+240:Ot-120,pe,oe),this.opacity)},clamp:function(){return new z(U(this.h),H(this.s),H(this.l),F(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Ot=F(this.opacity);return"".concat(1===Ot?"hsl(":"hsla(").concat(U(this.h),", ").concat(100*H(this.s),"%, ").concat(100*H(this.l),"%").concat(1===Ot?")":", ".concat(Ot,")"))}}));var Q=function(Bt){return function(){return Bt}};function K(Bt){return 1==(Bt=+Bt)?at:function(Ot,qt){return qt-Ot?function Z(Bt,Ot,qt){return Bt=Math.pow(Bt,qt),Ot=Math.pow(Ot,qt)-Bt,qt=1/qt,function(ie){return Math.pow(Bt+ie*Ot,qt)}}(Ot,qt,Bt):Q(isNaN(Ot)?qt:Ot)}}function at(Bt,Ot){var qt=Ot-Bt;return qt?function j(Bt,Ot){return function(qt){return Bt+qt*Ot}}(Bt,qt):Q(isNaN(Bt)?Ot:Bt)}var $=function Bt(Ot){var qt=K(Ot);function ie(oe,pe){var de=qt((oe=S(oe)).r,(pe=S(pe)).r),Fe=qt(oe.g,pe.g),Kt=qt(oe.b,pe.b),Et=at(oe.opacity,pe.opacity);return function(St){return oe.r=de(St),oe.g=Fe(St),oe.b=Kt(St),oe.opacity=Et(St),oe+""}}return ie.gamma=Bt,ie}(1);function X(Bt){return function(Ot){var de,Fe,qt=Ot.length,ie=new Array(qt),oe=new Array(qt),pe=new Array(qt);for(de=0;de<qt;++de)Fe=S(Ot[de]),ie[de]=Fe.r||0,oe[de]=Fe.g||0,pe[de]=Fe.b||0;return ie=Bt(ie),oe=Bt(oe),pe=Bt(pe),Fe.opacity=1,function(Kt){return Fe.r=ie(Kt),Fe.g=oe(Kt),Fe.b=pe(Kt),Fe+""}}}function dt(Bt,Ot){var de,qt=Ot?Ot.length:0,ie=Bt?Math.min(qt,Bt.length):0,oe=new Array(ie),pe=new Array(qt);for(de=0;de<ie;++de)oe[de]=Qt(Bt[de],Ot[de]);for(;de<qt;++de)pe[de]=Ot[de];return function(Fe){for(de=0;de<ie;++de)pe[de]=oe[de](Fe);return pe}}function bt(Bt,Ot){var qt=new Date;return Bt=+Bt,Ot=+Ot,function(ie){return qt.setTime(Bt*(1-ie)+Ot*ie),qt}}function gt(Bt,Ot){return Bt=+Bt,Ot=+Ot,function(qt){return Bt*(1-qt)+Ot*qt}}function Lt(Bt){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Ot){return typeof Ot}:function(Ot){return Ot&&"function"==typeof Symbol&&Ot.constructor===Symbol&&Ot!==Symbol.prototype?"symbol":typeof Ot})(Bt)}function It(Bt,Ot){var oe,qt={},ie={};for(oe in(null===Bt||"object"!==Lt(Bt))&&(Bt={}),(null===Ot||"object"!==Lt(Ot))&&(Ot={}),Ot)oe in Bt?qt[oe]=Qt(Bt[oe],Ot[oe]):ie[oe]=Ot[oe];return function(pe){for(oe in qt)ie[oe]=qt[oe](pe);return ie}}X(function it(Bt){var Ot=Bt.length-1;return function(qt){var ie=qt<=0?qt=0:qt>=1?(qt=1,Ot-1):Math.floor(qt*Ot),oe=Bt[ie],pe=Bt[ie+1];return nt((qt-ie/Ot)*Ot,ie>0?Bt[ie-1]:2*oe-pe,oe,pe,ie<Ot-1?Bt[ie+2]:2*pe-oe)}}),X(function ut(Bt){var Ot=Bt.length;return function(qt){var ie=Math.floor(((qt%=1)<0?++qt:qt)*Ot);return nt((qt-ie/Ot)*Ot,Bt[(ie+Ot-1)%Ot],Bt[ie%Ot],Bt[(ie+1)%Ot],Bt[(ie+2)%Ot])}});var Mt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xt=new RegExp(Mt.source,"g");function Wt(Bt,Ot){var ie,oe,pe,qt=Mt.lastIndex=xt.lastIndex=0,de=-1,Fe=[],Kt=[];for(Bt+="",Ot+="";(ie=Mt.exec(Bt))&&(oe=xt.exec(Ot));)(pe=oe.index)>qt&&(pe=Ot.slice(qt,pe),Fe[de]?Fe[de]+=pe:Fe[++de]=pe),(ie=ie[0])===(oe=oe[0])?Fe[de]?Fe[de]+=oe:Fe[++de]=oe:(Fe[++de]=null,Kt.push({i:de,x:gt(ie,oe)})),qt=xt.lastIndex;return qt<Ot.length&&(pe=Ot.slice(qt),Fe[de]?Fe[de]+=pe:Fe[++de]=pe),Fe.length<2?Kt[0]?function Gt(Bt){return function(Ot){return Bt(Ot)+""}}(Kt[0].x):function At(Bt){return function(){return Bt}}(Ot):(Ot=Kt.length,function(Et){for(var Dt,St=0;St<Ot;++St)Fe[(Dt=Kt[St]).i]=Dt.x(Et);return Fe.join("")})}function Pt(Bt,Ot){Ot||(Ot=[]);var oe,qt=Bt?Math.min(Ot.length,Bt.length):0,ie=Ot.slice();return function(pe){for(oe=0;oe<qt;++oe)ie[oe]=Bt[oe]*(1-pe)+Ot[oe]*pe;return ie}}function te(Bt){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Ot){return typeof Ot}:function(Ot){return Ot&&"function"==typeof Symbol&&Ot.constructor===Symbol&&Ot!==Symbol.prototype?"symbol":typeof Ot})(Bt)}function Qt(Bt,Ot){var ie,qt=te(Ot);return null==Ot||"boolean"===qt?Q(Ot):("number"===qt?gt:"string"===qt?(ie=M(Ot))?(Ot=ie,$):Wt:Ot instanceof M?$:Ot instanceof Date?bt:function Vt(Bt){return ArrayBuffer.isView(Bt)&&!(Bt instanceof DataView)}(Ot)?Pt:Array.isArray(Ot)?dt:"function"!=typeof Ot.valueOf&&"function"!=typeof Ot.toString||isNaN(Ot)?It:gt)(Bt,Ot)}},40402:function(q){"use strict";q.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},83794:function(q){"use strict";q.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},96209:function(q){"use strict";q.exports=JSON.parse('["normal","italic","oblique"]')},15659:function(q){"use strict";q.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},38732:function(q){"use strict";q.exports=JSON.parse('["inherit","initial","unset"]')},41901:function(q){"use strict";q.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},Pa={};function Ba(q){var W=Pa[q];if(void 0!==W)return W.exports;var t=Pa[q]={exports:{}};return qs[q].call(t.exports,t,t.exports,Ba),t.exports}return Ba.n=function(q){var W=q&&q.__esModule?function(){return q.default}:function(){return q};return Ba.d(W,{a:W}),W},Ba.d=function(q,W){for(var t in W)Ba.o(W,t)&&!Ba.o(q,t)&&Object.defineProperty(q,t,{enumerable:!0,get:W[t]})},Ba.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(q){if("object"==typeof window)return window}}(),Ba.o=function(q,W){return Object.prototype.hasOwnProperty.call(q,W)},Ba.r=function(q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(q,"__esModule",{value:!0})},Ba(27909)}()}}]);