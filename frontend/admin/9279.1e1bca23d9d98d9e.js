"use strict";(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[9279],{59279:(U,u,r)=>{r.r(u),r.d(u,{BlogCategoriesModule:()=>R});var c=r(69808),d=r(93075),p=r(99291),y=r(92340),f=r(9819),t=r(5e3),h=r(22071),C=r(10518),v=r(22290),b=r(22313),m=r(84218);const x=["paginator"];function I(o,s){1&o&&(t.\u0275\u0275elementStart(0,"div",11),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"marketplace.Errors.Titleisrequired")," "))}function S(o,s){1&o&&(t.\u0275\u0275elementStart(0,"div",11),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"catalog.Error.categoryNameMaxlength")," "))}const B=function(o){return{validationcolor:o}};function L(o,s){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",7),t.\u0275\u0275element(1,"input",8),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementStart(3,"button",9),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().categoryAdd()}),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,I,3,3,"div",10),t.\u0275\u0275template(6,S,3,3,"div",10),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(2,6,"placeholder.EnterBlogCategories")),t.\u0275\u0275property("formControl",e.categoryTitle)("ngClass",t.\u0275\u0275pureFunction1(8,B,e.categoryTitle.errors&&e.submitted)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.buttonName),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.categoryTitle.hasError("required")&&e.submitted),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.categoryTitle.hasError("maxlength"))}}function T(o,s){1&o&&(t.\u0275\u0275elementStart(0,"thead")(1,"tr")(2,"th"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(5,"th"),t.\u0275\u0275elementStart(6,"th",12),t.\u0275\u0275text(7),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementEnd()()()),2&o&&(t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,2,"common.Category Name")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(8,4,"common.Action")))}function A(o,s){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tr")(1,"td"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"td")(4,"div",14)(5,"input",15),t.\u0275\u0275listener("change",function(i){const l=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275nextContext(2).statusChange(i.target.checked,l.blogCategoryId)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(6,"label",16),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"td",17)(8,"button",18),t.\u0275\u0275listener("click",function(){const n=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275nextContext(2).editCategory(n.blogCategoryId)}),t.\u0275\u0275element(9,"img",19),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"button",18),t.\u0275\u0275listener("click",function(){const n=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275nextContext(2).deleteCategory(n.blogCategoryId)}),t.\u0275\u0275element(11,"img",20),t.\u0275\u0275elementEnd()()()}if(2&o){const e=s.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.name),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("id",e.blogCategoryId),t.\u0275\u0275property("checked",e.isActive),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("for",e.blogCategoryId)}}function E(o,s){if(1&o&&(t.\u0275\u0275elementStart(0,"tbody"),t.\u0275\u0275template(1,A,12,4,"tr",13),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(2,1,e.categorySandbox.blogCategoryList$))}}function D(o,s){1&o&&(t.\u0275\u0275elementStart(0,"div",21)(1,"div",22),t.\u0275\u0275element(2,"img",23),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",24)(4,"h3"),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"p"),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"h4"),t.\u0275\u0275text(11),t.\u0275\u0275pipe(12,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"h5")(14,"i"),t.\u0275\u0275text(15),t.\u0275\u0275pipe(16,"translate"),t.\u0275\u0275elementStart(17,"a",25),t.\u0275\u0275text(18),t.\u0275\u0275pipe(19,"translate"),t.\u0275\u0275elementEnd()()()()()),2&o&&(t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(6,5,"common.Blog Category")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(9,7,"common.This feature is currently not active for you")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(12,9,"common.To activate this feature")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(16,11,"common.Goto")," : "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(19,13,"common.Settings menu > AddOns > Blog")," "))}const N=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class o{constructor(e,a,i,n,l,g){this.categorySandbox=e,this.route=a,this.router=i,this.modalService=n,this.toastr=l,this.titleService=g,this.categoryImage=[],this.offset=0,this.pageSize="10",this.keyword="",this.status="",this.buttonCheck=!0,this.subscriptions=[],this.queryData={},this.filterData=[],this.filterDataId=[],this.selectAllValues=!1,this.submitted=!1,this.buttonName="Add",this.title="Blog Category"}ngOnInit(){this.titleService.setTitle(this.title),this.categoryTitle=new d.FormControl("",d.Validators.compose([d.Validators.required,d.Validators.maxLength(255)])),this.imageUrl=y.N.imageUrl,this.pageSize=sessionStorage.getItem("itemsPerPage")?sessionStorage.getItem("itemsPerPage"):this.pageSize,this.offset=this.router.snapshot.queryParamMap.get("offset")||0,this.index=this.router.snapshot.queryParamMap.get("index"),this.categoryList(),this.getCategoryListCount()}subscribe(){this.categorySandbox.blogCategoryAddLoaded$.subscribe(e=>{e&&(this.submitted=!1,this.categoryList(),this.categoryTitle.setValue(""))})}categoryAdd(){if(this.submitted=!0,!this.categoryTitle.valid)return;const e={};e.name=this.categoryTitle.value,"Add"==this.buttonName&&(this.categorySandbox.getBlogAdd(e),this.subscribe()),"Update"==this.buttonName&&(e.blogCategoryId=this.blogId,this.categorySandbox.getBlogUpdate(e),this.categorySandbox.blogCategoryUpdateLoaded$.subscribe(a=>{a&&(this.blogId="",this.submitted=!1,this.categoryList(),this.categoryTitle.setValue(""),this.buttonName="Add")}))}categoryList(){const e={};e.limit=this.pageSize,e.offset=this.offset,e.keyword=this.keyword,e.status=this.status,this.categorySandbox.getBlogList(e),this.queryData.offset=this.offset||0,this.queryData.index=this.index||0,this.route.navigate([],{relativeTo:this.router,queryParams:this.queryData,queryParamsHandling:"merge"})}getCategoryListCount(){const e={limit:0,offset:0};e.keyword=this.keyword,e.status=this.status,e.count=1,this.categorySandbox.getBlogCount(e)}addCategories(){this.route.navigate(["/cms/manage-blogs/blog_category/add"],{queryParams:this.queryData})}changeFilter(e){this.buttonCheck=e.target.checked}onPageChange(e){this.currentPage=e.offset,this.pageSize=e.pageSize,this.index=e.pageIndex,this.offset=e.pageSize*e.pageIndex,this.selectedAll=!1,this.filterDataId=[],this.categoryList()}deleteCategory(e){if(e==this.blogId)return void this.toastr.error("Update the category first");const a=this.modalService.open(f.j,{size:"sm",windowClass:"delete-confirm",backdrop:"static",modalDialogClass:"modal-dialog-centered",backdropClass:"createcr"});a.componentInstance.key="",a.componentInstance.id="",a.componentInstance.deleteMessage="Blog Category",a.result.then(i=>{if("deleted"===i){const n={};n.blogCategoryId=e,this.categorySandbox.getBlogDelete(n),this.subscriptions.push(this.categorySandbox.blogCategoryDeleteLoaded$.subscribe(l=>{l&&(this.categoryList(),this.getCategoryListCount())}))}})}receiveProgress(e){this.index=0,this.keyword=e.keyword,this.status=e.status?e.status:"",this.offset=0,this.paginator.firstPage(),this.categoryList(),this.getCategoryListCount()}categoryImageLoading(e){this.categoryImage[e]=!0}selectAll(){for(let e=0;e<this.productListArray.length;e++)this.productListArray[e].selected=this.selectedAll;this.filterDataList()}filterDataList(){this.filterData=this.productListArray.filter(e=>{if(!0===e.selected)return e}),this.filterDataId=this.filterData.map(e=>e.categoryId)}checkIfAllSelected(){this.selectedAll=this.productListArray.every(function(e){return!0===e.selected}),this.filterDataList()}editCategory(e){if(e){this.buttonName="Update";const a={};a.blogCategoryId=e,this.blogId=e,this.categorySandbox.getBlogDetail(a),this.categorySandbox.blogCategoryDetail$.subscribe(i=>{i&&this.categoryTitle.setValue(i.name)})}}statusChange(e,a){const i={};i.blogCategoryId=a,i.status=1==e?1:0,this.categorySandbox.getBlogStatus(i)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(h.H),t.\u0275\u0275directiveInject(p.F0),t.\u0275\u0275directiveInject(p.gz),t.\u0275\u0275directiveInject(C.FF),t.\u0275\u0275directiveInject(v._W),t.\u0275\u0275directiveInject(b.Dx))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-spurt-blog-catalog-categories-list"]],viewQuery:function(e,a){if(1&e&&t.\u0275\u0275viewQuery(x,5),2&e){let i;t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(a.paginator=i.first)}},decls:12,vars:12,consts:[[1,"blog-cat-add-wrapper"],["class","bcaw-add-row flex",4,"ngIf"],[1,"product-table"],[1,"table-responsive"],[1,"table"],[4,"ngIf"],["class","cash-on-delivery flex",4,"ngIf"],[1,"bcaw-add-row","flex"],["type","text",1,"form-control",2,"font-size","14px",3,"formControl","ngClass","placeholder"],[1,"button-reg","primary",3,"click"],["class","validation-error",4,"ngIf"],[1,"validation-error"],[1,"text-right"],[4,"ngFor","ngForOf"],[1,"toggle"],["type","checkbox",1,"tgl","tgl-light",3,"id","checked","change"],[1,"tgl-btn",3,"for"],[1,"action-btn","text-right"],[3,"click"],["src","assets/img/edit.png","alt",""],["src","assets/img/delete-new.png","alt",""],[1,"cash-on-delivery","flex"],[1,"cod-img"],["src","assets/img/circles-three-plus.svg","alt",""],[1,"cod-content"],["href","#/settings/add-on"]],template:function(e,a){if(1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,L,7,10,"div",1),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementStart(3,"div",2)(4,"div",3)(5,"table",4),t.\u0275\u0275template(6,T,9,6,"thead",5),t.\u0275\u0275pipe(7,"async"),t.\u0275\u0275template(8,E,3,3,"tbody",5),t.\u0275\u0275pipe(9,"async"),t.\u0275\u0275template(10,D,20,15,"div",6),t.\u0275\u0275pipe(11,"async"),t.\u0275\u0275elementEnd()()()()),2&e){let i,n,l,g;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","you dont have access for it, please enable addon"!=(null==(i=t.\u0275\u0275pipeBind1(2,4,a.categorySandbox.blogCategoryActive$))?null:i.message)),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf","you dont have access for it, please enable addon"!=(null==(n=t.\u0275\u0275pipeBind1(7,6,a.categorySandbox.blogCategoryActive$))?null:n.message)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf","you dont have access for it, please enable addon"!=(null==(l=t.\u0275\u0275pipeBind1(9,8,a.categorySandbox.blogCategoryActive$))?null:l.message)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf","you dont have access for it, please enable addon"==(null==(g=t.\u0275\u0275pipeBind1(11,10,a.categorySandbox.blogCategoryActive$))?null:g.message))}},directives:[c.NgIf,d.DefaultValueAccessor,d.NgControlStatus,d.FormControlDirective,c.NgClass,c.NgForOf],pipes:[c.AsyncPipe,m.X$],styles:[""]}),o})(),canActivate:[r(8300).a],data:{permission:"list-category",urls:[{title:"breadcrumbs.CMS",url:""},{title:"breadcrumbs.Manage Blogs",url:""},{title:"breadcrumbs.Blog Category",url:""},{title:"breadcrumbs.List",url:""}]}}];let P=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=t.\u0275\u0275defineInjector({imports:[[p.Bz.forChild(N)],p.Bz]}),o})();var V=r(47769),_=r(40520),$=r(49876),k=r(34303),w=r(78374),z=r(36642),j=r(60067);let R=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=t.\u0275\u0275defineInjector({providers:[h.H,w.P],imports:[[c.CommonModule,d.FormsModule,d.ReactiveFormsModule,P,$.dF,z.sQ.forFeature([j.N]),m.aw.forChild({loader:{provide:m.Zw,useFactory:V.g,deps:[_.eN]}}),k.m]]}),o})()}}]);