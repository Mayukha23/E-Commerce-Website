"use strict";(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[3085],{3085:(k,g,i)=>{i.r(g),i.d(g,{AccessPermissionModule:()=>Z});var p=i(9808),a=i(9291),l=i(8300),t=i(5e3),m=i(9113);const u=function(){return["/settings/access-and-permission/role/list"]},h=function(){return["/settings/access-and-permission/user/list"]},f=function(){return{exact:!0}};let x=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-access-layout"]],decls:14,vars:9,consts:[[1,"setup-wrapper"],[1,"setup-container","localization-container"],[1,"loc-lay-title"],[1,"page-title"],[1,"text14"],[1,"card","ap-general","ap-info","set-loc-card"],[1,"localize-tab"],["routerLinkActive","'active'","routerLinkActive","active","ariaCurrentWhenActive","edit-role-permission",1,"tablinks",3,"appHideIfUnauthorized","routerLink"],["routerLinkActive","'active'","routerLinkActive","active",1,"tablinks",3,"appHideIfUnauthorized","routerLink","routerLinkActiveOptions"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4,"Access and permission"),t.qZA(),t.TgZ(5,"p",4),t._uU(6,"In this section the admin can create and maintain different admin roles and permissions. Then, permissions can be assigned for the roles there of. Based on the permission assigned, different roles can access modules for which they have permission. Then, the admin can create users and assign the user to a role and the user will have only those permissions that will be assigned to that role."),t.qZA()(),t.TgZ(7,"div",5)(8,"div",6)(9,"button",7),t._uU(10,"Roles"),t.qZA(),t.TgZ(11,"button",8),t._uU(12,"Users"),t.qZA()()()()(),t._UZ(13,"router-outlet")),2&n&&(t.xp6(9),t.Q6J("appHideIfUnauthorized","settings-role")("appHideIfUnauthorized","edit-role-permission")("routerLink",t.DdM(6,u)),t.xp6(2),t.Q6J("appHideIfUnauthorized","settings-user")("routerLink",t.DdM(7,h))("routerLinkActiveOptions",t.DdM(8,f)))},directives:[a.Od,m.E,a.rH,a.lC],styles:[".setup-wrapper[_ngcontent-%COMP%]{padding:16px;margin-bottom:0!important}.tabcontent[_ngcontent-%COMP%]{display:none;padding:6px 12px;border:1px solid #ccc;border-top:none}.back-buttons[_ngcontent-%COMP%]{background:#f20a6d!important;border:solid thin #dddddd!important;color:#fff!important;padding:4px 16px!important;float:right!important;margin-top:-45px;margin-right:10px}[_nghost-%COMP%]{width:calc(100% - 250px)}.active[_ngcontent-%COMP%]{background-color:transparent;border-bottom:solid green}"]}),e})();var C=i(3593),d=i(3075);function P(e,s){if(1&e&&(t.TgZ(0,"span",9),t._uU(1,"USER - "),t.TgZ(2,"b"),t._uU(3),t.ALo(4,"uppercase"),t.qZA()()),2&e){const n=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,1,null==n.detail?null:n.detail.name))}}function M(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div",2)(1,"input",19),t.NdJ("ngModelChange",function(r){return t.CHM(n).$implicit.selected=r})("change",function(){return t.CHM(n),t.oxw(3).statusChange()}),t.qZA(),t.TgZ(2,"label",20),t._uU(3),t.qZA()()}if(2&e){const n=s.$implicit;t.xp6(1),t.s9C("id",n.moduleId),t.Q6J("value",n.moduleId)("ngModel",n.selected)("checked",n.selected),t.xp6(1),t.s9C("for",n.moduleId),t.xp6(1),t.hij(" ",null==n?null:n.name," ")}}function b(e,s){if(1&e&&(t.TgZ(0,"div",16)(1,"h3"),t._uU(2),t.qZA(),t.TgZ(3,"div",17),t.YNc(4,M,4,6,"div",18),t.qZA()()),2&e){const n=s.$implicit;t.xp6(2),t.Oqu(null==n?null:n.name),t.xp6(2),t.Q6J("ngForOf",null==n?null:n.permissionModule)}}function _(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div",10),t.YNc(1,b,5,2,"div",11),t.ALo(2,"async"),t.TgZ(3,"div",12)(4,"div",13)(5,"button",14),t.NdJ("click",function(){return t.CHM(n),t.oxw().cancel()}),t._uU(6," Cancel "),t.qZA(),t.TgZ(7,"button",15),t.NdJ("click",function(){return t.CHM(n),t.oxw().save()}),t._uU(8,"Save"),t.qZA()()()()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,n.sandbox.getPermissionsList$))}}const w=[{path:"",redirectTo:"role",pathMatch:"full"},{path:"",component:x,children:[{path:"",redirectTo:"role",pathMatch:"full"},{path:"role",loadChildren:()=>Promise.all([i.e(8592),i.e(1382)]).then(i.bind(i,1382)).then(e=>e.RoleModule),canActivate:[l.a],data:{permission:"list-role,edit-role-permission"}},{path:"user",loadChildren:()=>i.e(1629).then(i.bind(i,1629)).then(e=>e.UserModule),canActivate:[l.a],data:{permission:"list-user"}},{path:"permission",component:(()=>{class e{constructor(n,o,r,c){this.route=n,this.sandbox=o,this.changeDetect=r,this.router=c,this.subscriptions=[],this.selectAllPermission=!1}ngOnInit(){this.detail=JSON.parse(this.route.snapshot.queryParams.user),this.type=this.detail.type,this.id=this.detail.id,this.getPermissionList(),this.subscribeList()}subscribeList(){this.subscriptions.push(this.sandbox.getPermissionsList$.subscribe(n=>{n&&(this.permissionList=n,this.id&&this.getPermission())}))}getStatus(){let n=!0;this.permissionList.forEach(o=>{!n||(n=o.permissionModule.every(r=>!0===r.selected))}),this.selectAllPermission=n}getPermissionList(){this.sandbox.getPermissionlist({})}getPermission(){const n={};n.refType="user"===this.type?2:1,n.refId=this.id,this.sandbox.getPermission(n),this.subscriptions.push(this.sandbox.permissionLoaded$.subscribe(o=>{o&&this.getStatus()}))}save(){const n=[];this.permissionList.forEach(r=>{r.permissionModule&&r.permissionModule.forEach(c=>{!0===c.selected&&n.push(c.slugName)})});const o={};o.refId=this.id,o.refType="user"===this.type?2:1,o.permission=JSON.stringify(n),this.sandbox.addPermission(o),this.sandbox.permissionAddLoaded$.subscribe(r=>{!0===r&&this.router.navigate(["/settings/access-and-permission"])})}selectAll(n){this.sandbox.selectAllPermission(n)}cancel(){this.router.navigate(["/settings/access-and-permission"])}statusChange(){this.getStatus()}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(a.gz),t.Y36(C.O),t.Y36(t.sBO),t.Y36(a.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-permission"]],decls:18,vars:10,consts:[[1,"flex","main-header"],[1,"form-group"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","checkbox22",1,"custom-control-input",3,"ngModel","ngModelChange","change"],["for","checkbox22",1,"custom-control-label","cursor-pointer"],[1,"permission-wrap"],["class","user",4,"ngIf"],[1,"user-role",2,"margin-left","10px"],["class","pw-row",4,"ngIf"],[1,"user"],[1,"pw-row"],["class","pw-wrap-row",4,"ngFor","ngForOf"],[1,"col-12"],[1,"flex","srbtn"],[1,"button-reg","secondary",3,"click"],["type","submit",1,"button-reg","primary",3,"click"],[1,"pw-wrap-row"],[1,"form-group","pw-row-full","flex"],["class","custom-control custom-checkbox",4,"ngFor","ngForOf"],["type","checkbox",1,"custom-control-input",3,"value","ngModel","checked","id","ngModelChange","change"],[1,"custom-control-label","cursor-pointer",3,"for"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2,"Permission Status"),t.qZA(),t.TgZ(3,"div",1)(4,"div",2)(5,"input",3),t.NdJ("ngModelChange",function(c){return o.selectAllPermission=c})("change",function(c){return o.selectAll(c.target.checked)}),t.qZA(),t.TgZ(6,"label",4),t._uU(7," Select All "),t.qZA()()()(),t.TgZ(8,"div",5),t.YNc(9,P,5,3,"span",6),t.TgZ(10,"span",7),t._uU(11,"ROLE - "),t.TgZ(12,"b"),t._uU(13),t.ALo(14,"uppercase"),t.qZA()(),t.YNc(15,_,9,3,"div",8),t.ALo(16,"async"),t.ALo(17,"async"),t.qZA()),2&n&&(t.xp6(5),t.Q6J("ngModel",o.selectAllPermission),t.xp6(4),t.Q6J("ngIf","user"===o.type),t.xp6(4),t.Oqu(t.lcZ(14,4,null==o.detail?null:o.detail.role)),t.xp6(2),t.Q6J("ngIf",t.lcZ(16,6,o.sandbox.permissionListLoaded$)&&t.lcZ(17,8,o.sandbox.permissionLoaded$)))},directives:[d.Wl,d.JJ,d.On,p.O5,p.sg],pipes:[p.gd,p.Ov],styles:['.main-header[_ngcontent-%COMP%]{justify-content:space-between;margin-bottom:0;padding:8px 16px}.main-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:inline-flex;font-size:18px;color:#222;margin-bottom:0;font-weight:500;padding-left:0}.main-header[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin:0}.main-header[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]{font-size:12px;font-weight:400;color:#393939}.main-header[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:before{width:12px!important;height:12px!important;left:-1rem!important}.main-header[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:after{width:4px!important;height:9px!important;top:5px!important;left:4px!important}.permission-wrap[_ngcontent-%COMP%]{padding:0 16px}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]{padding:16px 0 0;border-bottom:solid 1px #ececec}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#3d3d3d;line-height:1.19;margin-bottom:10px}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;align-items:flex-start}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-control[_ngcontent-%COMP%]{padding-left:0;margin:0 32px 12px 0}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]{font-size:12px;font-weight:400;color:#393939;padding-left:20px}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:before{width:12px!important;height:12px!important;left:0rem!important}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:after{width:4px!important;height:9px!important;top:5px!important;left:4px!important}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%]:checked ~ .custom-control-label[_ngcontent-%COMP%]:before{background-color:#239323!important}.main[_ngcontent-%COMP%]{display:block;background:white;padding:15px 30px 100px}.main[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{float:right;margin-top:10px;width:70px;padding:5px;background-color:#f2086d;border:none;color:#fff}.main[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.main[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .user-role[_ngcontent-%COMP%]{color:#f2086d;margin-bottom:5px;font-size:14px}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px;font-weight:800;letter-spacing:.5px}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{box-shadow:0 0 2px 1px #cacaca;margin-top:8px;padding:20px 20px 20px 30px;flex-flow:row wrap;box-sizing:border-box;display:flex;height:500px;overflow-y:auto;justify-content:space-between}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]{height:auto;margin-right:1.33%;margin-bottom:30px;flex:1 1 33%;width:30%;box-sizing:border-box;max-width:30%;display:block}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]   .role-head[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding-bottom:9px;letter-spacing:.5px;border-bottom:2px solid #dadada}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]   .role-head[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:8px}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]   .role-list[_ngcontent-%COMP%]   .roles[_ngcontent-%COMP%]{margin-top:20px}.save[_ngcontent-%COMP%]{background:#f2086d;border:solid thin transparent;color:#fff;padding:5px 20px;font-size:14px;margin:30px;float:right}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:35px;height:18px;margin-right:10px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:15px;width:15px;left:-8px;bottom:2px;background-color:#fff;transition:.4s;border:1px solid #fde0d5}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:15px;width:15px;left:3px;bottom:2px;background-color:#fff;transition:.4s;border:1px solid #fde0d5}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#f2086d}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #f2086d}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.slider.toggle-slide[_ngcontent-%COMP%]{border-radius:34px}.slider.toggle-slide[_ngcontent-%COMP%]:before{border-radius:50%}.pw-wrap-row[_ngcontent-%COMP%]{width:100%;border-radius:4px;box-shadow:0 2px 4px #00000013;border:solid 1px #eeeded;padding:15px;margin-bottom:16px}']}),e})(),canActivate:[l.a],data:{permission:"edit-role-permission"}}]}];let v=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[a.Bz.forChild(w)],a.Bz]}),e})();var y=i(6393),A=i(2476);let Z=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.ez,v,y.IJ,A.K]]}),e})()}}]);