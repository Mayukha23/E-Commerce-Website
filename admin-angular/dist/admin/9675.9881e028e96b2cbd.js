"use strict";(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[9675],{9675:(V,P,l)=>{l.r(P),l.d(P,{ImportModule:()=>K});var m=l(9808),Z=l(3675),s=l(3075),C=l(9291),t=l(5e3),c=l(2890),g=l(5775),u=l(4633);const f=o=>o.import,y=(0,g.P1)(f,u.cT),U=(0,g.P1)(f,u.UT),k=((0,g.P1)(f,u.QM),(0,g.P1)(f,u.HZ),(0,g.P1)(f,u.lJ));var z=l(7319);let M=(()=>{class o{constructor(n){this.appState=n,this.uploadFile$=this.appState.select(y),this.downloadFileLoading$=this.appState.select(k),this.uploadFileLoading$=this.appState.select(U)}downloadFile({}){this.appState.dispatch(new c.C1({}))}uploadFile(n){this.appState.dispatch(new c.xM(n))}}return o.\u0275fac=function(n){return new(n||o)(t.LFG(z.yh))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();var I=l(2290),A=l(2313),x=l(4218);const T=["fileInput"];function L(o,a){1&o&&(t.TgZ(0,"div",9),t._UZ(1,"img",10),t.qZA())}function S(o,a){if(1&o){const n=t.EpF();t.TgZ(0,"div",11),t._UZ(1,"img",12),t.TgZ(2,"h5"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"ul",13)(6,"li",13),t._UZ(7,"img",14),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"li",13),t._UZ(11,"img",15),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"li",13),t._UZ(15,"img",16),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"button",17),t.NdJ("click",function(){return t.CHM(n),t.oxw().uploadZip()}),t._uU(19),t.ALo(20,"translate"),t.qZA()()}2&o&&(t.xp6(3),t.Oqu(t.lcZ(4,5,"catalog.product.YourBulkProductUpdatepageisempty")),t.xp6(5),t.hij("",t.lcZ(9,7,"catalog.product.DownloadZIPFile")," "),t.xp6(4),t.hij(" ",t.lcZ(13,9,"catalog.product.UpdateProduct")," "),t.xp6(4),t.hij(" ",t.lcZ(17,11,"catalog.product.UploadupdatedFile")," "),t.xp6(3),t.hij("",t.lcZ(20,13,"catalog.product.UploadZIPFile")," "))}function B(o,a){1&o&&(t.TgZ(0,"div",30),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"catalog.product.Nofilechosen"),""))}function j(o,a){if(1&o){const n=t.EpF();t.TgZ(0,"div",18)(1,"h3"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",19)(5,"div",20)(6,"p"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"div",21)(10,"input",22,23),t.NdJ("ngModelChange",function(i){return t.CHM(n),t.oxw().uploadFile=i})("change",function(i){return t.CHM(n),t.oxw().onUpload(i)}),t.qZA(),t.TgZ(12,"a",24),t._uU(13),t.ALo(14,"translate"),t.qZA()(),t.YNc(15,B,3,3,"div",25),t.TgZ(16,"div",26),t._uU(17),t.qZA()()(),t.TgZ(18,"div",27)(19,"button",28),t.NdJ("click",function(){return t.CHM(n),t.oxw().uploadSuccess()}),t.TgZ(20,"span"),t._uU(21),t.ALo(22,"translate"),t.qZA()(),t.TgZ(23,"button",29),t.NdJ("click",function(){t.CHM(n);const i=t.MAs(11);return t.oxw().reset(i)}),t._uU(24),t.ALo(25,"translate"),t.qZA()()()}if(2&o){const n=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,8,"catalog.product.FileUpload")),t.xp6(5),t.Oqu(t.lcZ(8,10,"catalog.product.* Only .ZIP files accepted")),t.xp6(3),t.Q6J("ngModel",n.uploadFile),t.xp6(3),t.Oqu(t.lcZ(14,12,"catalog.product.BrowseanduploadFiles")),t.xp6(2),t.Q6J("ngIf",!n.zipFile&&n.uploadSubmit),t.xp6(2),t.Oqu(n.zipFileName),t.xp6(4),t.Oqu(t.lcZ(22,14,"catalog.product.Upload")),t.xp6(3),t.Oqu(t.lcZ(25,16,"catalog.product.Reset"))}}const $=[{path:"",redirectTo:"import-products",pathMatch:"full"},{path:"import-products",component:(()=>{class o{constructor(n,e,i,r){this.sandbox=n,this.toastr=e,this.titleService=i,this.cd=r,this.zipFileError="",this.Title="Bulk Products",this.multipleFile=[],this.zipFileSelected=!1,this.subscriptions=[],this.initialPage=!0,this.uploadPage=!1,this.uploadSubmit=!1}ngOnInit(){this.titleService.setTitle(this.Title)}downloadFile(){this.sandbox.downloadFile({})}uploadZip(){this.initialPage=!1,this.uploadPage=!0}onUpload(n){this.zipFile=n.target.files[0],this.zipFileName=n.target.files[0].name}reset(n){this.zipFileName="",this.zipFile=void 0,this.uploadSubmit=!1,this.fileInput.nativeElement.value=""}uploadSuccess(){if(this.uploadSubmit=!0,!this.zipFile)return;const n=/^.+\.([^.]+)$/.exec(this.zipFile.name);if(!n||n&&"zip"!==n[1])return this.toastr.error("Please choose the zip file"),this.zipFile=void 0,void(this.zipFileName="");const e={};e.file=this.zipFile,this.sandbox.uploadFile(e),this.subscriptions.push(this.sandbox.uploadFile$.subscribe(i=>{i&&1===i.status&&(this.uploadPage=!1,this.initialPage=!0,this.zipFileSelected=!1,this.zipFileName="",this.cd.detectChanges())}))}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(M),t.Y36(I._W),t.Y36(A.Dx),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-bulk-product-upload"]],viewQuery:function(n,e){if(1&n&&t.Gf(T,5),2&n){let i;t.iGM(i=t.CRH())&&(e.fileInput=i.first)}},decls:13,vars:10,consts:[["class","loading-data",4,"ngIf"],[1,"col-12"],[1,"breadcrumbs-row","noborder"],[1,"bc-col"],[1,"bc-col-btn","ap-col-btn","flex","search-exp","bulk-header"],[1,"ripple","flex",3,"click"],["src","assets/img/download-white.svg","alt","download"],["class","bulk-update-price flex",4,"ngIf"],["class","bup-file-upload",4,"ngIf"],[1,"loading-data"],["src","./assets/loader/Spurt-commerce-Loader-2.1.gif",2,"height","10vh"],[1,"bulk-update-price","flex"],["src","assets/img/bulk-img.svg"],[1,"flex"],["src","assets/img/csv.svg","alt","download"],["src","assets/img/csv.svg","alt","update"],["src","assets/img/csv.svg","alt","upload"],[1,"ripple","cursor",3,"click"],[1,"bup-file-upload"],[1,"csv-upload","flex"],[1,"browse-upload"],[1,"bu-box","flex","cursor"],["type","file","accept",".zip",1,"cursor",3,"ngModel","ngModelChange","change"],["fileInput",""],["href","javascript:void(0)"],["class","error",4,"ngIf"],[1,"fil-name"],[1,"all-btn","flex"],["type","submit",1,"ripple","allocate",3,"click"],[1,"ripple",3,"click"],[1,"error"]],template:function(n,e){1&n&&(t.YNc(0,L,2,0,"div",0),t.ALo(1,"async"),t.ALo(2,"async"),t.TgZ(3,"div",1)(4,"div",2),t._UZ(5,"div",3),t.TgZ(6,"div",4)(7,"button",5),t.NdJ("click",function(){return e.downloadFile()}),t._UZ(8,"img",6),t._uU(9),t.ALo(10,"translate"),t.qZA()()()(),t.YNc(11,S,21,15,"div",7),t.YNc(12,j,26,18,"div",8)),2&n&&(t.Q6J("ngIf",t.lcZ(1,4,e.sandbox.downloadFileLoading$)||t.lcZ(2,6,e.sandbox.uploadFileLoading$)),t.xp6(9),t.hij(" ",t.lcZ(10,8,"catalog.product.Download Zip File"),""),t.xp6(2),t.Q6J("ngIf",e.initialPage),t.xp6(1),t.Q6J("ngIf",e.uploadPage))},directives:[m.O5,s.Fj,s.JJ,s.On],pipes:[m.Ov,x.X$],styles:['.breadcrumbs-row[_ngcontent-%COMP%]{background:transparent;justify-content:space-between;padding:16px}.breadcrumbs-row[_ngcontent-%COMP%]   .bc-col-btn[_ngcontent-%COMP%]{width:auto}.fil-name[_ngcontent-%COMP%]{text-align:center;color:#ed571f}.btn-group[_ngcontent-%COMP%]{white-space:nowrap}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{float:none;display:inline-block}.btn[_ngcontent-%COMP%] + .dropdown-toggle[_ngcontent-%COMP%]{margin-left:-4px}.modal-title[_ngcontent-%COMP%]{font-family:Poppins,sans-serif!important}  .modal-footer{display:flex}  .modal-footer button{font-size:14px}  .modal-title{font-size:14px}.popover-body[_ngcontent-%COMP%]{padding:0!important}.bulk-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:500;color:#121111;margin:0}.bulk-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{justify-content:center;align-items:center;height:50px;background-color:#ed571f;padding:0 11px;line-height:50px;font-size:14px;font-weight:600;color:#fff;border:0}.bulk-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:5px}.error-field[_ngcontent-%COMP%]{border:1px solid red!important}.error[_ngcontent-%COMP%]{color:red!important;margin-top:2px}.product-list-wrap[_ngcontent-%COMP%]{padding:0;margin:20px 10px;background:white;width:calc(100% - 20px)}.product-list-wrap[_ngcontent-%COMP%]   .recent-price-header[_ngcontent-%COMP%]{padding:20px;justify-content:space-between;align-items:center}.product-list-wrap[_ngcontent-%COMP%]   .recent-price-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:15px;font-weight:500;color:#121111}.product-list-wrap[_ngcontent-%COMP%]   .recent-price-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{justify-content:center;align-items:center;height:45px;border:solid 1px #e8efff;background-color:#f5f8ff;padding:0 11px;line-height:45px;font-size:15px;font-weight:600;color:#ed571f;border:0}i[_ngcontent-%COMP%]{font-size:22px;margin-right:10px}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-bottom:5rem!important}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:0}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button.dload[_ngcontent-%COMP%]{justify-content:center;align-items:center;width:50px;height:50px;background-color:#f5f8ff}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button.delete[_ngcontent-%COMP%]{width:73px;height:28px;border:solid 1px #e4edff;background-color:#fff;justify-content:center;align-items:center;font-size:14px;font-weight:500;color:#6f91e4}.pagination[_ngcontent-%COMP%]{justify-content:flex-end;padding-right:20px}.pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .prev[_ngcontent-%COMP%]{font-size:14px;font-weight:600;font-stretch:normal;font-style:normal;line-height:normal;letter-spacing:normal;color:#a2a2a2;margin:5px}.pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .next[_ngcontent-%COMP%]{font-size:14px;font-weight:600;font-stretch:normal;font-style:normal;line-height:normal;letter-spacing:normal;color:#000;margin:5px}.pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#d8d8d8;margin:8px}.pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .pages[_ngcontent-%COMP%]{background-color:#fff;margin:5px;font-size:14px;font-weight:700;font-stretch:normal;font-style:normal;line-height:normal;letter-spacing:normal;padding:6px 10px;color:#8c8c8c;border-radius:2px;border:solid 1px #d5d5d5}.pagination[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .pages[_ngcontent-%COMP%]{border-radius:2px;background-color:#1bc316;margin:5px;font-size:14px;font-weight:700;font-stretch:normal;font-style:normal;line-height:normal;letter-spacing:normal;padding:6px 10px;color:#fff}.bulk-update-price[_ngcontent-%COMP%]{justify-content:center;align-items:center;height:450px;flex-direction:column;background:white;margin:20px 10px;width:calc(100% - 20px);box-shadow:0 1px 11px #00000012}.bulk-update-price[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:#ed571f;margin:20px 0}.bulk-update-price[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:550px;justify-content:center;align-items:center}.bulk-update-price[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;padding:50px 15px 20px;justify-content:center;align-items:center;font-size:12px;font-weight:500;color:#adadad;width:33%}.bulk-update-price[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:5px}.bulk-update-price[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(1):before{content:"";position:absolute;left:50%;width:50%;height:1px;background:#d8d8d8;top:20px}.bulk-update-price[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2):before{content:"";position:absolute;left:0%;width:100%;height:1px;background:#d8d8d8;top:20px}.bulk-update-price[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3):before{content:"";position:absolute;left:0;width:50%;height:1px;background:#d8d8d8;top:20px}.bulk-update-price[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:after{content:"";width:12px;height:12px;background-color:#d8d8d8;border-radius:50%;left:0;right:0;top:15px;margin:auto;position:absolute}.bulk-update-price[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:143px;height:45px;border:solid 1px #e8efff;background-color:#f5f8ff;line-height:45px;padding:0 13px;font-size:15px;font-weight:600;color:#ed571f;margin-top:20px}.bup-file-upload[_ngcontent-%COMP%]{box-shadow:0 1px 11px #00000012;background:white;padding:25px 20px;margin:20px 10px;width:calc(100% - 20px)}.bup-file-upload[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:15px;font-weight:500;color:#121111;margin-bottom:40px}.bup-file-upload[_ngcontent-%COMP%]   .csv-upload[_ngcontent-%COMP%]{justify-content:space-between;margin-bottom:20px}.bup-file-upload[_ngcontent-%COMP%]   .csv-upload[_ngcontent-%COMP%]   .browse-upload[_ngcontent-%COMP%]{width:100%;position:relative}.bup-file-upload[_ngcontent-%COMP%]   .csv-upload[_ngcontent-%COMP%]   .browse-upload[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#ed571f;margin:0 0 10px}.bup-file-upload[_ngcontent-%COMP%]   .csv-upload[_ngcontent-%COMP%]   .browse-upload[_ngcontent-%COMP%]   .bu-box[_ngcontent-%COMP%]{width:100%;height:151px;background-color:#f1f6ff;justify-content:center;align-items:center;position:relative}.bup-file-upload[_ngcontent-%COMP%]   .csv-upload[_ngcontent-%COMP%]   .browse-upload[_ngcontent-%COMP%]   .bu-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;position:absolute;top:0;height:100%;left:0;width:100%}.bup-file-upload[_ngcontent-%COMP%]   .csv-upload[_ngcontent-%COMP%]   .browse-upload[_ngcontent-%COMP%]   .bu-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#ed571f;text-decoration:underline}.bup-file-upload[_ngcontent-%COMP%]   .csv-upload[_ngcontent-%COMP%]   .browse-upload[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{position:absolute}.bup-file-upload[_ngcontent-%COMP%]   .csv-upload[_ngcontent-%COMP%]   .csv-title[_ngcontent-%COMP%]{width:55%}.bup-file-upload[_ngcontent-%COMP%]   .csv-upload[_ngcontent-%COMP%]   .csv-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;font-weight:500;color:#a4a4a4;margin:0 0 9px}.bup-file-upload[_ngcontent-%COMP%]   .csv-upload[_ngcontent-%COMP%]   .csv-title[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:solid 1px #e5e5e5;background:white;padding:12px 14px;font-size:14px;font-weight:400;color:#959595;width:100%}.bup-file-upload[_ngcontent-%COMP%]   .csv-upload[_ngcontent-%COMP%]   .csv-title[_ngcontent-%COMP%]   .csvname[_ngcontent-%COMP%]{font-size:13px;font-weight:400;color:#ed571f;justify-content:flex-start;align-items:center;margin-top:20px}.all-btn[_ngcontent-%COMP%]{justify-content:flex-end;align-items:center;padding:10px;width:100%;background:white}.all-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:43px;border:solid 1px #ed571f;background-color:#fff;line-height:43px;padding:0 20px;font-size:14px;font-weight:400;color:#ed571f}.all-btn[_ngcontent-%COMP%]   button.allocate[_ngcontent-%COMP%]{background-color:#ed571f;font-weight:600;color:#fff;margin-right:10px}']}),o})(),canActivate:[l(8300).a],data:{urls:[{title:"Catalog",url:""},{title:"Import",url:""},{title:"Bulk Upload",url:""}]}}];let Q=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[C.Bz.forChild($)],C.Bz]}),o})();var O=l(655),d=l(2596),b=l(9646),_=l(4004),h=l(3900),Y=l(8505),E=l(4327),v=l(262),D=l(9900),w=l(520);let F=(()=>{class o extends D.V{constructor(){super(...arguments),this.url=this.getBaseUrl()}downloadFile(n){const e={responseType:"arraybuffer"};if(n){e.params=new w.LE;for(const i in n)i&&(e.params=e.params.set(i,n[i]))}return this.http.get(this.url+"/product/download-product-sample",e)}uploadFile(n){const e=new FormData;return e.append("file",n.file,n.file.name),this.http.post(this.url+"/product/import-product-data",e)}}return o.\u0275fac=function(){let a;return function(e){return(a||(a=t.n5z(o)))(e||o)}}(),o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();class p{constructor(a,n){this.action$=a,this.apiCli=n,this.downloadFile$=this.action$.pipe((0,d.l4)(c.MF.DOWNLOAD_FILE),(0,_.U)(e=>e.payload),(0,h.w)(e=>this.apiCli.downloadFile(e).pipe((0,Y.b)(i=>{const r=new Blob([i],{type:"application/zip"});(0,E.saveAs)(r,"products.zip")}),(0,h.w)(i=>[new c.hH(i)]),(0,v.K)(i=>(0,b.of)(new c.sM(i)))))),this.uploadFile$=this.action$.pipe((0,d.l4)(c.MF.UPLOAD_FILE),(0,_.U)(e=>e.payload),(0,h.w)(e=>this.apiCli.uploadFile(e).pipe((0,h.w)(i=>[new c.vP(i)]),(0,v.K)(i=>(0,b.of)(new c.wQ(i))))))}}p.\u0275fac=function(a){return new(a||p)(t.LFG(d.eX),t.LFG(F))},p.\u0275prov=t.Yz7({token:p,factory:p.\u0275fac}),(0,O.gn)([(0,d.Qm)()],p.prototype,"downloadFile$",void 0),(0,O.gn)([(0,d.Qm)()],p.prototype,"uploadFile$",void 0);var H=l(6693),R=l(8384),G=l(7829),X=l(2476);let K=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[F,M],imports:[[m.ez,Z.o,s.u5,s.UX,H.q,x.aw.forChild({loader:{provide:x.Zw,useFactory:G.gS,deps:[w.eN]}}),R.F,X.K,Q,d.sQ.forFeature([p])]]}),o})()}}]);