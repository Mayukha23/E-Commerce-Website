"use strict";(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[1629],{1629:(x,h,i)=>{i.r(h),i.d(h,{UserModule:()=>Ue});var a=i(9808),U=i(3675),o=i(3075),m=i(2596),_=i(5518),p=i(6431),g=i(8451),c=i(9291),f=i(3604),e=i(5e3),v=i(6393),T=i(4376),M=i(6836),C=i(4218);function N(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Settings.User.Error.FirstNameisrequired")))}function O(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Settings.User.Error.Mustbeatleast3characterslong")))}function L(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Settings.User.Error.Mustbemax32characterslong")))}function q(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Settings.User.Error.Mustbestring")))}function S(t,r){if(1&t&&(e.TgZ(0,"div",26),e.YNc(1,N,3,3,"div",27),e.YNc(2,O,3,3,"div",27),e.YNc(3,L,3,3,"div",27),e.YNc(4,q,3,3,"div",27),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.firstName.errors.required),e.xp6(1),e.Q6J("ngIf",n.user.controls.firstName.hasError("minlength")),e.xp6(1),e.Q6J("ngIf",n.user.controls.firstName.hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",n.user.controls.firstName.hasError("pattern"))}}function w(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Settings.User.Error.LastNameisrequired")))}function P(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Settings.User.Error.Mustbemax32characterslong")))}function y(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Settings.User.Error.Mustbestring")))}function J(t,r){if(1&t&&(e.TgZ(0,"div",26),e.YNc(1,w,3,3,"div",27),e.YNc(2,P,3,3,"div",27),e.YNc(3,y,3,3,"div",27),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.lastName.errors.required),e.xp6(1),e.Q6J("ngIf",n.user.controls.lastName.hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",n.user.controls.lastName.hasError("pattern"))}}function k(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Settings.User.Error.Emailisrequired")))}function E(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Settings.User.Error.Emailmustbeavalidemailaddress")))}function D(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Settings.User.Error.Mustbemax96characterslong")))}function Y(t,r){if(1&t&&(e.TgZ(0,"div",26),e.YNc(1,k,3,3,"div",27),e.YNc(2,E,3,3,"div",27),e.YNc(3,D,3,3,"div",27),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.email.errors.required),e.xp6(1),e.Q6J("ngIf",n.f.email.errors),e.xp6(1),e.Q6J("ngIf",n.user.controls.email.hasError("maxlength"))}}function Q(t,r){if(1&t&&(e.TgZ(0,"ng-option",28),e._uU(1),e.qZA()),2&t){const n=r.$implicit;e.Q6J("value",n.groupId),e.xp6(1),e.Oqu(n.name)}}function z(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Settings.User.Error.Roleisrequired")))}function F(t,r){if(1&t&&(e.TgZ(0,"div",26),e.YNc(1,z,3,3,"div",27),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.email.errors.required)}}function V(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij("",e.lcZ(2,1,"Settings.User.Error.UserNameEmailisrequired")," "))}function j(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Settings.User.Error.UserNameEmailmustbeavalidemailaddress")))}function H(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Settings.User.Error.Mustbemax32characterslong")))}function R(t,r){if(1&t&&(e.TgZ(0,"div",26),e.YNc(1,V,3,3,"div",27),e.YNc(2,j,3,3,"div",27),e.YNc(3,H,3,3,"div",27),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.username.errors.required),e.xp6(1),e.Q6J("ngIf",n.f.username.errors),e.xp6(1),e.Q6J("ngIf",n.user.controls.username.hasError("maxlength"))}}function K(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij("",e.lcZ(2,1,"Settings.User.Error.Passwordisrequired")," "))}function G(t,r){if(1&t&&(e.TgZ(0,"div",26),e.YNc(1,K,3,3,"div",27),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.password.errors.required)}}function $(t,r){1&t&&(e.TgZ(0,"div",26),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Settings.User.Error.Mustbeatleast8characters")," "))}function B(t,r){1&t&&(e.TgZ(0,"div",26),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Settings.User.Error.Musthaveatleast1numberorSymbol")," "))}function W(t,r){1&t&&(e.TgZ(0,"div",26),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Settings.User.Error.Mustcontainatleast1inCapitalCase")," "))}function X(t,r){1&t&&(e.TgZ(0,"div",26),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Settings.User.Error.Mustcontainatleast1inSmallCase")," "))}function ee(t,r){1&t&&(e.TgZ(0,"div",26),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Settings.User.Error.Mustbemax50characters")," "))}const Z=function(t){return{"is-invalid":t}},te=function(t){return{"error-fields":t}};let A=(()=>{class t{constructor(n,s,l,d,u,Ze){this.fb=n,this.route=s,this.sandbox=l,this.router=d,this.service=u,this.modalService=Ze,this.submitted=!1,this.pageSize=10,this.keyword="",this.userInfo=[],this.editUserId="",this.enteredPassword="",this.subscriptions=[],this.groupList=[]}ngOnInit(){this.initForm(),this.getUserGroupList(this.offset,this.keyword),this.subscribe(),this.userInfo=[],this.updateUserId=!1,this.userInfo&&this.userInfo[0]&&(this.updateUserId=!0)}subscribe(){this.sandbox.getUserGroupList({}),this.subscriptions.push(this.sandbox.getGroupRoleList$.subscribe(n=>{n&&n.length>0&&"edit"===this.edit&&this.editUserList()}))}beforeChange(n){"preventchange-2"===n.panelId&&n.preventDefault(),"preventchange-3"===n.panelId&&!1===n.nextState&&n.preventDefault()}close(){this.modalService.close("close")}initForm(){const n="^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$",s="[a-zA-Z '-,;.]*";this.user=this.fb.group({firstName:["",o.kI.compose([o.kI.required,o.kI.pattern(s),o.kI.minLength(3),o.kI.maxLength(32)])],lastName:["",o.kI.compose([o.kI.required,o.kI.pattern(s),o.kI.maxLength(32)])],email:["",o.kI.compose([o.kI.required,o.kI.pattern(n),o.kI.email,o.kI.maxLength(96)])],username:["",o.kI.compose([o.kI.required,o.kI.pattern(n),o.kI.maxLength(32)])],role:[null,o.kI.required],password:["",o.kI.compose([o.kI.required,f.d.patternValidator(/((?=.*\d)|(?=.*[#$^+=!*()@%&]))/,{hasNumber:!0}),f.d.patternValidator(/[A-Z]/,{hasCapitalCase:!0}),f.d.patternValidator(/[a-z]/,{hasSmallCase:!0}),o.kI.minLength(8),o.kI.maxLength(50)])]})}conditionalValidator(n,s){return l=>n()?s(l):null}onSubmit(n){if(this.submitted=!0,"edit"===this.edit&&(""!==this.enteredPassword?(this.user.controls.password.setValidators(o.kI.compose([o.kI.required,f.d.patternValidator(/((?=.*\d)|(?=.*[#$^+=!*()@%&]))/,{hasNumber:!0}),f.d.patternValidator(/[A-Z]/,{hasCapitalCase:!0}),f.d.patternValidator(/[a-z]/,{hasSmallCase:!0}),o.kI.minLength(8),o.kI.maxLength(50)])),this.user.controls.password.updateValueAndValidity()):(this.user.controls.password.clearValidators(),this.user.controls.password.updateValueAndValidity())),this.user.invalid)return;const s={};s.firstName=this.user.value.firstName,s.lastName=this.user.value.lastName,s.email=this.user.value.email,s.role=this.user.value.role,s.username=this.user.value.username,s.password=this.user.value.password,this.userInfo&&this.userInfo[0]&&this.userInfo[0].userId?(s.userID=this.userInfo[0].userId,this.sandbox.updateUser(s),this.modalService.close("close"),this.service.setdata("")):(this.sandbox.addUser(s),this.modalService.close("close"))}enterPassword(n){this.enteredPassword=n}getUserGroupList(n=0,s){const l={limit:0};l.offset=n,l.keyword=this.keyword,l.count=0,l.status=1,this.service.userGrouplist(l).subscribe(d=>{null!=d&&(this.groupList=d.data)})}UserCancle(){this.userInfo=" ",this.service.setdata(this.userInfo),this.modalService.close("close")}editUserList(){if(this.serviceData=this.service.getdata(),this.serviceData&&(this.userInfo.push(this.serviceData),this.updateUserId=!1),this.userInfo&&this.userInfo[0]&&(this.updateUserId=!1,"edit"===this.edit))for(let n=0;n<this.userInfo.length;n++)this.updateTitle=1,this.firstName=this.userInfo[0].firstName,this.lastName=this.userInfo[0].lastName,this.email=this.userInfo[0].email,this.username=this.userInfo[0].username,this.userInfo[0]&&this.userInfo[0].usergroup&&(this.role=this.userInfo[0].usergroup.groupId)}get f(){return this.user.controls}ngOnDestroy(){this.sandbox.clearVariable(),this.subscriptions.forEach(n=>n.unsubscribe())}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(o.qu),e.Y36(c.gz),e.Y36(g.M),e.Y36(c.F0),e.Y36(p.K),e.Y36(v.Kz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-spurt-settings-user-add"]],inputs:{userlist:"userlist",edit:"edit",id:"id"},decls:83,vars:79,consts:[[1,"flex","setting2-inner-header"],[1,"modal-header__title"],[1,"close-modal",3,"click"],["src","assets/img/modal-close.svg"],[1,"settings-right-wrapper","addnewuser"],[1,"new-user"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-12","col-xs-12"],[1,"form-group"],[1,"supvalidation"],["type","text","formControlName","firstName",1,"form-control",3,"ngModel","placeholder","ngClass","ngModelChange"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","lastName",1,"form-control",3,"ngModel","placeholder","ngClass","ngModelChange"],["type","email","formControlName","email","placeholder","Email",1,"form-control",3,"ngModel","ngClass","ngModelChange"],[1,"control-label"],["formControlName","role",3,"placeholder","ngModel","searchable","ngClass","clearable","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","email","formControlName","username",1,"form-control",3,"ngModel","placeholder","ngClass","ngModelChange"],[1,"form-group","form-group-pwd",2,"position","relative"],["passwordshow","","type","password","formControlName","password",1,"form-control",3,"ngModel","placeholder","ngClass","keyup","ngModelChange","keydown.space"],["pwd",""],[1,"col-12"],[1,"modal-action-btns","flex"],["type","submit"],[1,"cancel",3,"click"],[1,"invalid-feedback"],[4,"ngIf"],[3,"value"]],template:function(n,s){if(1&n){const l=e.EpF();e.TgZ(0,"div",0)(1,"h3",1),e._uU(2),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return s.close()}),e._UZ(4,"img",3),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5)(7,"form",6),e.NdJ("ngSubmit",function(){return s.onSubmit(s.user.value)}),e.TgZ(8,"div",7)(9,"div",8)(10,"div",9)(11,"label"),e._uU(12),e.ALo(13,"translate"),e.TgZ(14,"sup",10),e._uU(15,"*"),e.qZA()(),e.TgZ(16,"input",11),e.NdJ("ngModelChange",function(u){return s.firstName=u}),e.ALo(17,"translate"),e.qZA(),e.YNc(18,S,5,4,"div",12),e.qZA()(),e.TgZ(19,"div",8)(20,"div",9)(21,"label"),e._uU(22),e.ALo(23,"translate"),e.TgZ(24,"sup",10),e._uU(25,"*"),e.qZA()(),e.TgZ(26,"input",13),e.NdJ("ngModelChange",function(u){return s.lastName=u}),e.ALo(27,"translate"),e.qZA(),e.YNc(28,J,4,3,"div",12),e.qZA()(),e.TgZ(29,"div",8)(30,"div",9)(31,"label"),e._uU(32),e.ALo(33,"translate"),e.TgZ(34,"sup",10),e._uU(35,"*"),e.qZA()(),e.TgZ(36,"input",14),e.NdJ("ngModelChange",function(u){return s.email=u}),e.qZA(),e.YNc(37,Y,4,3,"div",12),e.qZA()(),e.TgZ(38,"div",8)(39,"div",9)(40,"label",15),e._uU(41),e.ALo(42,"translate"),e.TgZ(43,"sup",10),e._uU(44,"*"),e.qZA()(),e.TgZ(45,"ng-select",16),e.NdJ("ngModelChange",function(u){return s.role=u}),e.ALo(46,"translate"),e.YNc(47,Q,2,2,"ng-option",17),e.qZA(),e.YNc(48,F,2,1,"div",12),e.qZA()(),e.TgZ(49,"div",8)(50,"div",9)(51,"label"),e._uU(52),e.ALo(53,"translate"),e.TgZ(54,"sup",10),e._uU(55,"*"),e.qZA()(),e.TgZ(56,"input",18),e.NdJ("ngModelChange",function(u){return s.username=u}),e.ALo(57,"translate"),e.qZA(),e.YNc(58,R,4,3,"div",12),e.qZA()(),e.TgZ(59,"div",8)(60,"div",19)(61,"label"),e._uU(62),e.ALo(63,"translate"),e.TgZ(64,"sup",10),e._uU(65,"*"),e.qZA()(),e.TgZ(66,"input",20,21),e.NdJ("keyup",function(){e.CHM(l);const u=e.MAs(67);return s.enterPassword(u.value)})("ngModelChange",function(u){return s.password=u})("keydown.space",function(u){return u.preventDefault()}),e.ALo(68,"translate"),e.qZA(),e.YNc(69,G,2,1,"div",12),e.YNc(70,$,3,3,"div",12),e.YNc(71,B,3,3,"div",12),e.YNc(72,W,3,3,"div",12),e.YNc(73,X,3,3,"div",12),e.YNc(74,ee,3,3,"div",12),e.qZA()(),e.TgZ(75,"div",22)(76,"div",23)(77,"button",24),e._uU(78),e.ALo(79,"translate"),e.qZA(),e.TgZ(80,"button",25),e.NdJ("click",function(){return s.UserCancle()}),e._uU(81),e.ALo(82,"translate"),e.qZA()()()()()()()}2&n&&(e.xp6(2),e.hij(" ",s.updateTitle?"Update User":"Add User"," "),e.xp6(5),e.Q6J("formGroup",s.user),e.xp6(5),e.Oqu(e.lcZ(13,41,"Settings.User.FirstName")),e.xp6(4),e.s9C("placeholder",e.lcZ(17,43,"Settings.User.FirstName")),e.Q6J("ngModel",s.firstName)("ngClass",e.VKq(67,Z,s.submitted&&s.f.firstName.errors)),e.xp6(2),e.Q6J("ngIf",s.submitted&&s.f.firstName.errors),e.xp6(4),e.Oqu(e.lcZ(23,45,"Settings.User.LastName")),e.xp6(4),e.s9C("placeholder",e.lcZ(27,47,"Settings.User.LastName")),e.Q6J("ngModel",s.lastName)("ngClass",e.VKq(69,Z,s.submitted&&s.f.lastName.errors)),e.xp6(2),e.Q6J("ngIf",s.submitted&&s.f.lastName.errors),e.xp6(4),e.Oqu(e.lcZ(33,49,"Settings.User.Email")),e.xp6(4),e.Q6J("ngModel",s.email)("ngClass",e.VKq(71,Z,s.submitted&&s.f.email.errors)),e.xp6(1),e.Q6J("ngIf",s.submitted&&s.f.email.errors),e.xp6(4),e.Oqu(e.lcZ(42,51,"Settings.User.Role")),e.xp6(4),e.s9C("placeholder",e.lcZ(46,53,"Settings.User.Select")),e.Q6J("ngModel",s.role)("searchable",!0)("ngClass",e.VKq(73,te,s.submitted&&s.f.role.errors))("clearable",!1),e.xp6(2),e.Q6J("ngForOf",s.groupList),e.xp6(1),e.Q6J("ngIf",s.submitted&&s.f.email.errors),e.xp6(4),e.Oqu(e.lcZ(53,55,"Settings.User.UserName")),e.xp6(4),e.s9C("placeholder",e.lcZ(57,57,"Settings.User.UserName")),e.Q6J("ngModel",s.username)("ngClass",e.VKq(75,Z,s.submitted&&s.f.username.errors)),e.xp6(2),e.Q6J("ngIf",s.submitted&&s.f.username.errors),e.xp6(4),e.Oqu(e.lcZ(63,59,"Settings.User.Password")),e.xp6(4),e.s9C("placeholder",e.lcZ(68,61,"Settings.User.Password")),e.Q6J("ngModel",s.password)("ngClass",e.VKq(77,Z,s.submitted&&s.f.password.errors)),e.xp6(3),e.Q6J("ngIf",s.submitted&&s.f.password.errors),e.xp6(1),e.Q6J("ngIf",s.user.controls.password.hasError("minlength")),e.xp6(1),e.Q6J("ngIf",s.user.controls.password.hasError("hasNumber")),e.xp6(1),e.Q6J("ngIf",s.user.controls.password.hasError("hasCapitalCase")),e.xp6(1),e.Q6J("ngIf",s.user.controls.password.hasError("hasSmallCase")),e.xp6(1),e.Q6J("ngIf",s.user.controls.password.hasError("maxlength")),e.xp6(4),e.hij("",s.updateTitle?"Update User":e.lcZ(79,63,"Save")," "),e.xp6(3),e.Oqu(e.lcZ(82,65,"Settings.User.Cancle")))},directives:[o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,a.mk,a.O5,T.w9,a.sg,T.jq,M.m],pipes:[C.X$],styles:[".form-group-pwd span{position:absolute;right:5px;top:8px}\n",".settings-right-wrapper{margin-top:0!important}.setting1-inner-header{margin-top:40px!important}\n"],encapsulation:2}),t})();var ne=i(9819),se=i(2290),oe=i(9113),re=i(3052),ie=i(6642);const ae=function(t){return{"hide-permission":t}};function le(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"a",26),e.NdJ("click",function(){e.CHM(n);const l=e.oxw().$implicit;return e.oxw().goToPermission(l)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&t){const n=e.oxw().$implicit;e.Q6J("appHideIfUnauthorized","edit-role-permission")("ngClass",e.VKq(5,ae,1===(null==n||null==n.usergroup?null:n.usergroup.groupId))),e.xp6(1),e.hij(" ",e.lcZ(2,3,"Settings.Local.Permission"),"")}}const I=function(){return["edit-role-permission","edit-user","delete-user"]};function de(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td",17)(8,"div",20),e._UZ(9,"i",21),e.TgZ(10,"div",22),e.YNc(11,le,3,7,"a",23),e.TgZ(12,"a",24),e.NdJ("click",function(){const d=e.CHM(n).$implicit;return e.oxw().addNewUser(d,"edit")}),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"a",25),e.NdJ("click",function(){const d=e.CHM(n).$implicit;return e.oxw().deleteUser(d.userId)}),e._uU(16),e.ALo(17,"translate"),e.qZA()()()()()}if(2&t){const n=r.$implicit,s=e.oxw();e.xp6(2),e.AsE("",n.firstName," ",n.lastName,""),e.xp6(2),e.Oqu(n.email),e.xp6(2),e.Oqu(n.usergroup.name),e.xp6(1),e.Q6J("multipleHide",e.DdM(14,I)),e.xp6(4),e.Q6J("ngIf",1!==(null==s.Rolelist?null:s.Rolelist.groupId)),e.xp6(1),e.Q6J("appHideIfUnauthorized","edit-user"),e.xp6(1),e.hij(" ",e.lcZ(14,10,"Settings.Local.Edit")," "),e.xp6(2),e.Q6J("appHideIfUnauthorized","delete-user"),e.xp6(1),e.hij(" ",e.lcZ(17,12,"Settings.Local.Delete")," ")}}const ue=function(t){return[t]};let ce=(()=>{class t{constructor(n,s,l,d,u){this.router=n,this.sandbox=s,this.service=l,this.toastr=d,this.modalService=u,this.userdetails={},this.pageSize="5",this.keyword="",this.id="",this.type="edit",this.pagination=1,this.addnewuser=!1,this.subscriptions=[],this.regSubscribeEvents()}ngOnInit(){this.pageSize=sessionStorage.getItem("itemsPerPage"),this.getUserList(this.offset,this.keyword),this.sandbox.userAddLoaded$.subscribe(n=>{!0===n&&this.getUserList(this.offset,this.keyword)}),this.sandbox.userUpdateLoaded$.subscribe(n=>{!0===n&&this.getUserList(this.offset,this.keyword)})}beforeChange(n){"preventchange-2"===n.panelId&&n.preventDefault(),"preventchange-3"===n.panelId&&!1===n.nextState&&n.preventDefault()}addNewUser(n,s){this.userdetails=null,this.service.setdata(this.userdetails);const l=this.modalService.open(A,{windowClass:"add-local",backdrop:"static",centered:!1,animation:!1});"edit"===s&&(this.userdetails=n,this.service.setdata(this.userdetails),l.componentInstance.edit=this.type,l.componentInstance.id=n),l.result.then(d=>{})}getUserList(n=0,s){const l={};l.limit=this.pageSize,l.offset=n,l.keyword=this.keyword,this.sandbox.getUserList(l),this.pagination&&(l.count="true",this.sandbox.getUserPagination(l))}editUser(n){JSON.parse(sessionStorage.getItem("adminUserdetail")).userdetails.userId!==n.userId?(this.userdetails=n,this.service.setdata(this.userdetails),this.router.navigate(["/settings/user/edit",this.userdetails.userId])):this.toastr.error("You cannot edit current logged in user")}onPageChange(n){this.currentPage=n.offset,this.pageSize=n.pageSize,this.index=n.pageIndex,this.getUserList(n.pageSize*n.pageIndex,this.pageSize)}goToPermission(n){JSON.parse(sessionStorage.getItem("adminUserdetail")).userdetails.userId!==n.userId?this.router.navigate(["/settings/access-and-permission/permission"],{queryParams:{user:JSON.stringify({id:n.userId,name:n.firstName+" "+n.lastName,type:"user",role:n.usergroup.name})}}):this.toastr.error("You cannot set permission for current logged in user")}deleteUser(n){const s=this.modalService.open(ne.j,{size:"sm",windowClass:"delete-confirm",backdrop:"static",backdropClass:"createcr"});s.componentInstance.key="",s.componentInstance.id="",s.result.then(l=>{if("deleted"===l){const d={};d.id=n,this.sandbox.deleteUser(d),this.sandbox.userDelate$.subscribe(u=>{u&&1===u.status&&this.getUserList(this.offset,this.pageSize)})}})}regSubscribeEvents(){this.subscriptions.push(this.sandbox.userDelate$.subscribe(n=>{n&&1===n.status&&this.getUserList(this.offset,"")}))}ngOnDestroy(){this.subscriptions.forEach(n=>{n.unsubscribe()})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(c.F0),e.Y36(g.M),e.Y36(p.K),e.Y36(se._W),e.Y36(v.FF))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-settings-user-list"]],decls:42,vars:31,consts:[[1,"set-lay-notes","flex",2,"padding","0 10px 10px 10px"],[1,"setup-wrapper","set-loc-wrapper"],[1,"setup-container","localization-container"],[1,"card","ap-general","ap-info"],[1,"flex","ap-body"],[1,"settings-right-wrapper"],[1,"localize-header","flex"],[1,"loc-hdr-lft"],[1,"button-reg","primary",3,"appHideIfUnauthorized","click"],["src","assets/img/add-white-ico.png","alt","add"],[1,"setup-right"],[1,"spinner-wrapper",2,"display","flex","justify-content","center","justify-items","center"],[2,"transform","translate(58%, 18%)","position","absolute",3,"isShow"],[1,"product-table"],[1,"table-responsive"],[1,"table"],["width","20%"],[1,"text-right",3,"appHideIfUnauthorized","multipleHide"],[4,"ngFor","ngForOf"],[3,"length","pageSize","pageSizeOptions","page"],["ngbDropdown","",1,"dropdown"],["ngbDropdownToggle","",1,"fa","fa-ellipsis-v","cursor",2,"padding","0 15px"],["ngbDropdownMenu","",1,"dropdown-menu",2,"min-width","88px"],["class","dropdown-item","ngbDropdownItem","","style","cursor: pointer;",3,"appHideIfUnauthorized","ngClass","click",4,"ngIf"],["ngbDropdownItem","","href","javascript:void(0)",1,"dropdown-item",3,"appHideIfUnauthorized","click"],[1,"dropdown-item",2,"margin-left","15px","cursor","pointer",3,"appHideIfUnauthorized","click"],["ngbDropdownItem","",1,"dropdown-item",2,"cursor","pointer",3,"appHideIfUnauthorized","ngClass","click"]],template:function(n,s){1&n&&(e.TgZ(0,"div",0)(1,"h4"),e._uU(2,"Note :"),e.qZA(),e.TgZ(3,"p"),e._uU(4,"The super admin can add different users and assign the users to a particular role. The users will be able to access only those modules to which they are granted the permission to access. "),e.qZA()(),e.TgZ(5,"div",1)(6,"div",2)(7,"div",3)(8,"div",4)(9,"div",5)(10,"div",6),e._UZ(11,"div",7),e.TgZ(12,"button",8),e.NdJ("click",function(){return s.addNewUser("","add")}),e._UZ(13,"img",9),e._uU(14),e.ALo(15,"translate"),e.qZA()()(),e.TgZ(16,"div",10)(17,"div",11),e._UZ(18,"app-global-loader",12),e.ALo(19,"async"),e.qZA(),e.TgZ(20,"div",13)(21,"div",14)(22,"table",15)(23,"thead")(24,"tr")(25,"th",16),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"th"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"th"),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"th",17),e._uU(35),e.ALo(36,"translate"),e.qZA()()(),e.TgZ(37,"tbody"),e.YNc(38,de,18,15,"tr",18),e.ALo(39,"async"),e.qZA()()()(),e.TgZ(40,"mat-paginator",19),e.NdJ("page",function(d){return s.onPageChange(d)}),e.ALo(41,"async"),e.qZA()()()()()()),2&n&&(e.xp6(12),e.Q6J("appHideIfUnauthorized","create-user"),e.xp6(2),e.Oqu(e.lcZ(15,12,"Settings.User.AddNewUser")),e.xp6(4),e.Q6J("isShow",e.lcZ(19,14,s.sandbox.userListLoading$)),e.xp6(8),e.Oqu(e.lcZ(27,16,"Settings.User.UserName")),e.xp6(3),e.Oqu(e.lcZ(30,18,"Settings.User.EmailId")),e.xp6(3),e.Oqu(e.lcZ(33,20,"Settings.User.Role")),e.xp6(2),e.Q6J("multipleHide",e.DdM(28,I)),e.xp6(1),e.Oqu(e.lcZ(36,22,"Settings.User.Action")),e.xp6(3),e.Q6J("ngForOf",e.lcZ(39,24,s.sandbox.getUsersList$)),e.xp6(2),e.Q6J("length",e.lcZ(41,26,s.sandbox.userPagination$))("pageSize",s.pageSize)("pageSizeOptions",e.VKq(29,ue,s.pageSize)))},directives:[oe.E,re.A,a.sg,v.jt,v.iD,v.Vi,a.O5,v.TH,a.mk,ie.NW],pipes:[C.X$,a.Ov],styles:[""]}),t})();var b=i(8300);const pe=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:ce,data:{permission:"list-user"},canActivate:[b.a]},{path:"add",component:A,canActivate:[b.a],data:{permission:"create-user"}},{path:"edit/:id",component:A,canActivate:[b.a],data:{permission:"edit-user"}}];let ge=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[c.Bz.forChild(pe)],c.Bz]}),t})();var me=i(6693),fe=i(5979),he=i(520),_e=i(2476),ve=i(1944);let Ue=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[p.K,g.M],imports:[[a.ez,U.o,o.u5,o.UX,me.q,ge,_e.K,ve._,m.sQ.forFeature([_.n]),C.aw.forChild({loader:{provide:C.Zw,useFactory:fe.gS,deps:[he.eN]}})]]}),t})()},3052:(x,h,i)=>{i.d(h,{A:()=>_});var a=i(5e3),U=i(9932),o=i(9808);function m(p,g){1&p&&(a.TgZ(0,"div",1)(1,"div",2),a._UZ(2,"img",3),a.qZA()())}let _=(()=>{class p{constructor(c){this.httpStatus=c,this.subscriptions=[],this.loader=!1,this.getHttpResponse()}ngOnInit(){}getHttpResponse(){this.subscriptions.push(this.httpStatus.getHttpStatus().subscribe(c=>{this.loader=c}))}ngOnDestroy(){this.subscriptions.forEach(c=>c.unsubscribe())}}return p.\u0275fac=function(c){return new(c||p)(a.Y36(U.Z))},p.\u0275cmp=a.Xpm({type:p,selectors:[["app-global-loader"]],inputs:{isShow:"isShow"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"row"],["width","80px","height","80px","src","./assets/loader/Spurt-commerce-Loader-2.1.gif"]],template:function(c,f){1&c&&a.YNc(0,m,3,0,"div",0),2&c&&a.Q6J("ngIf",f.isShow)},directives:[o.O5],styles:['#loader[_ngcontent-%COMP%]{bottom:0;height:175px;left:0;margin:auto;position:absolute;right:0;top:0;width:175px}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{bottom:0;height:100%;left:0;margin:auto;position:absolute;right:0;top:0;width:87.5px}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:before{border-radius:100%;content:"";height:87.5px;left:0;position:absolute;right:0;top:0;transform:scale(0);width:87.5px}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+1){transform:rotate(45deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+1):before{animation:.8s linear .1s normal none infinite running load;background:#00ff80 none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+2){transform:rotate(90deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+2):before{animation:.8s linear .2s normal none infinite running load;background:#00ffea none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+3){transform:rotate(135deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+3):before{animation:.8s linear .3s normal none infinite running load;background:#00aaff none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+4){transform:rotate(180deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+4):before{animation:.8s linear .4s normal none infinite running load;background:#0040ff none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+5){transform:rotate(225deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+5):before{animation:.8s linear .5s normal none infinite running load;background:#2a00ff none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+6){transform:rotate(270deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+6):before{animation:.8s linear .6s normal none infinite running load;background:#9500ff none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+7){transform:rotate(315deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+7):before{animation:.8s linear .7s normal none infinite running load;background:magenta none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+8){transform:rotate(360deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+8):before{animation:.8s linear .8s normal none infinite running load;background:#ff0095 none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{background-position:50% 50%;background-repeat:no-repeat;bottom:-40px;height:20px;left:0;position:absolute;right:0;width:180px}@keyframes load{to{opacity:0;transform:scale(1)}}.spinner-message[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{text-align:center}']}),p})()},9819:(x,h,i)=>{i.d(h,{j:()=>o});var a=i(5e3),U=i(6393);let o=(()=>{class m{constructor(p){this.activeModal=p}ngOnInit(){}close(){this.activeModal.close()}deleteContent(){"vendor"===this.key||"product"===this.key||this.activeModal.close("deleted")}}return m.\u0275fac=function(p){return new(p||m)(a.Y36(U.Kz))},m.\u0275cmp=a.Xpm({type:m,selectors:[["app-delete-confirmation-dialog"]],decls:12,vars:0,consts:[[1,"modal-body"],["type","button",1,"close",3,"click"],["aria-hidden","true",2,"background-color","white"],["src","assets/img/info-triangle.svg"],[1,"delete-btns","flex"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(p,g){1&p&&(a.TgZ(0,"div",0)(1,"button",1),a.NdJ("click",function(){return g.close()}),a.TgZ(2,"span",2),a._uU(3,"\xd7"),a.qZA()(),a.TgZ(4,"h4"),a._UZ(5,"img",3),a._uU(6," Do You Want To Delete? "),a.qZA(),a.TgZ(7,"div",4)(8,"button",5),a.NdJ("click",function(){return g.close()}),a._uU(9," No "),a.qZA(),a.TgZ(10,"button",6),a.NdJ("click",function(){return g.deleteContent()}),a._uU(11," Yes "),a.qZA()()())},styles:[".modal-title[_ngcontent-%COMP%]{padding:30px 30px 5px;border-bottom:1px solid #eeeeee}.modal-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-align:center;font-size:.875rem}.close[_ngcontent-%COMP%]{padding:10px;border:none}.close[_ngcontent-%COMP%]:focus{outline:none!important}.modal-footer[_ngcontent-%COMP%]{justify-content:center!important}"]}),m})()}}]);