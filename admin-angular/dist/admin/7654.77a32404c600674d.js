"use strict";(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[7654],{7654:(te,C,t)=>{t.r(C),t.d(C,{ChangePasswordModule:()=>re});var m=t(9808),y=t(6393),u=t(2596),T=t(655),x=t(9646),L=t(4004),v=t(3900),f=t(9582),M=t(262);class W{constructor(r){this.user={},this.user=r||""}}var e=t(5e3),U=t(9900);let S=(()=>{class s extends U.V{constructor(){super(...arguments),this.URL=this.getBaseUrl()}changePassword(o){return this.http.put(this.URL+"/auth/change-password",o)}}return s.\u0275fac=function(){let r;return function(n){return(r||(r=e.n5z(s)))(n||s)}}(),s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();class l{constructor(r,o){this.action$=r,this.service=o,this.doChangePassword$=this.action$.pipe((0,u.l4)(f.MF.DO_CHANGE_PASWORD),(0,L.U)(n=>n.payload),(0,v.w)(n=>this.service.changePassword(n).pipe((0,v.w)(i=>[new f.Ip(new W(i))]),(0,M.K)(i=>(0,x.of)(new f.MS(i))))))}}l.\u0275fac=function(r){return new(r||l)(e.LFG(u.eX),e.LFG(S))},l.\u0275prov=e.Yz7({token:l,factory:l.\u0275fac}),(0,T.gn)([(0,u.Qm)()],l.prototype,"doChangePassword$",void 0);class J{constructor(r){this.oldPassword=r.oldpsw||"",this.newPassword=r.newpsw||""}}var p=t(5775),g=t(29);const h=s=>s.changepassword,q=(0,p.P1)(h,g.pn),N=(0,p.P1)(h,g.wT),I=(0,p.P1)(h,g.PA),F=(0,p.P1)(h,g.y$),Q=(0,p.P1)(h,g.uk);var j=t(7319),c=t(9291);let Z=(()=>{class s{constructor(o,n){this.appState=o,this.router=n,this.getChangePassword$=this.appState.select(q),this.getChangePasswordResponse$=this.appState.select(N),this.getChangePasswordRequestLoading$=this.appState.select(I),this.getChangePasswordRequestLoade$=this.appState.select(F),this.getChangePasswordRequestFailed$=this.appState.select(Q),this.subscriptions=[],this.subscribe()}changePSW(o){this.appState.dispatch(new f.Pv(new J(o)))}subscribe(){this.subscriptions.push(this.getChangePassword$.subscribe(o=>{o&&o.user&&1===o.user.status&&this.router.navigate(["/dashboard"])}))}}return s.\u0275fac=function(o){return new(o||s)(e.LFG(j.yh),e.LFG(c.F0))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();var a=t(3075),w=t(3604),E=t(6731),_=t(6836),A=t(4218);function R(s,r){1&s&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij("",e.lcZ(2,1,"Profile.Error.OldPasswordisrequired")," "))}function Y(s,r){if(1&s&&(e.TgZ(0,"div",22),e.YNc(1,R,3,3,"div",23),e.qZA()),2&s){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.f.oldPSW.errors.required)}}function O(s,r){1&s&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Settings.User.Error.Passwordisrequired")," "))}function $(s,r){1&s&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Settings.User.Error.Mustbeatleast8characters")," "))}function k(s,r){1&s&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Settings.User.Error.Musthaveatleast1numberorSymbol")," "))}function z(s,r){1&s&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Settings.User.Error.Mustcontainatleast1inCapitalCase")," "))}function D(s,r){1&s&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Settings.User.Error.Mustcontainatleast1inSmallCase")," "))}function G(s,r){1&s&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij("",e.lcZ(2,1,"Profile.Error.ConfirmPassword")," "))}function V(s,r){1&s&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij("",e.lcZ(2,1,"Customers.Error.ConfirmpasswordIsMismatch")," "))}function B(s,r){if(1&s&&(e.TgZ(0,"div",22),e.YNc(1,G,3,3,"div",23),e.YNc(2,V,3,3,"div",23),e.qZA()),2&s){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.f.confirmPSW.errors.required),e.xp6(1),e.Q6J("ngIf",o.f.confirmPSW.errors.mismatchedPasswords)}}const K=function(){return["/../../editprofile"]},X=function(){return["/../../change-password"]},P=function(s){return{"is-invalid":s}},H=function(){return["/dashboard"]},ee=[{path:"",component:(()=>{class s{constructor(o,n){this.fb=o,this.sandbox=n,this.submitted=!1}ngOnInit(){this.initChangePswForm()}initChangePswForm(){this.changePassword=this.fb.group({oldPSW:["",a.kI.required],newPSW:["",a.kI.compose([a.kI.required,w.d.patternValidator(/((?=.*\d)|(?=.*[#$^+=!*()@%&]))/,{hasNumber:!0}),w.d.patternValidator(/[A-Z]/,{hasCapitalCase:!0}),w.d.patternValidator(/[a-z]/,{hasSmallCase:!0}),a.kI.minLength(8)])],confirmPSW:["",a.kI.required]},{validator:this.matchingPasswords("newPSW","confirmPSW")})}matchingPasswords(o,n){return i=>{const b=i.controls[n];if(i.controls[o].value!==b.value)return b.setErrors({mismatchedPasswords:!0})}}onSubmit(o){if(this.submitted=!0,this.changePassword.invalid)return;const n={};n.oldpsw=this.changePassword.value.oldPSW,n.newpsw=this.changePassword.value.newPSW,this.sandbox.changePSW(n)}get f(){return this.changePassword.controls}}return s.\u0275fac=function(o){return new(o||s)(e.Y36(a.qu),e.Y36(Z))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-spurt-changepassword"]],decls:58,vars:47,consts:[[1,"setup-wrapper"],[1,"setup-container","localization-container","editprofile-container",2,"padding","16px"],[1,"setup-right"],[1,"flex","edit-profile-nav"],["href","javascript:void(0)",3,"routerLink"],["href","javascript:void(0)",1,"active",3,"routerLink"],[1,"set-lay-notes","flex"],[1,"flex","editprofilerow"],["novalidate","",1,"form-horizontal","epr-frm-pwd",3,"formGroup","ngSubmit"],[1,"epr-frm"],[1,"suprs-form"],[1,"suprs-form-row","form-group","flex"],["href","javascript:void(0)"],[1,"suprs-form-col",2,"position","relative"],["required","","minlength","8","type","password","formControlName","oldPSW","placeholder","Current Password","aria-label","Current Password","aria-describedby","basic-addon1","passwordshow","",1,"form-control",3,"ngModel","ngClass","ngModelChange","keydown.space"],["class","invalid-feedback",4,"ngIf"],[1,"suprs-form-row","form-group"],["required","","minlength","5","type","password","formControlName","newPSW","placeholder","New Password","aria-label","New Password","aria-describedby","basic-addon2","passwordshow","",1,"form-control",3,"ngModel","ngClass","ngModelChange","keydown.space"],["required","","minlength","5","type","password","formControlName","confirmPSW","placeholder","Confirm Password","aria-label","Confirm Password","aria-describedby","basic-addon2","passwordshow","",1,"form-control",3,"ngModel","ngClass","ngModelChange","keydown.space"],[1,"flex","srbtn"],[1,"button-reg","primary"],["routerLinkActive","router-link-active",1,"button-reg","secondary",3,"routerLink"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"app-breadcrumb"),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"a",4),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"a",5),e._uU(9),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"div",6)(12,"h4"),e._uU(13,"Note :"),e.qZA(),e.TgZ(14,"p"),e._uU(15,"Here, the admin can change the password as per the password policies. It is recommended that the admin changes password time to time in order keep their panel secured, without giving any room for guessing by any third party."),e.qZA()(),e.TgZ(16,"form")(17,"div",7)(18,"form",8),e.NdJ("ngSubmit",function(){return n.onSubmit(n.changePassword.value)}),e.TgZ(19,"div",9)(20,"div",10)(21,"div",11)(22,"label"),e._uU(23),e.ALo(24,"translate"),e._UZ(25,"a",12),e.qZA(),e.TgZ(26,"div",13)(27,"input",14),e.NdJ("ngModelChange",function(d){return n.oldPSW=d})("keydown.space",function(d){return d.preventDefault()}),e.qZA(),e.YNc(28,Y,2,1,"div",15),e.qZA()()(),e.TgZ(29,"div",10)(30,"div",16)(31,"label"),e._uU(32),e.ALo(33,"translate"),e._UZ(34,"a",12),e.qZA(),e.TgZ(35,"div",13)(36,"input",17),e.NdJ("ngModelChange",function(d){return n.newPSW=d})("keydown.space",function(d){return d.preventDefault()}),e.qZA(),e.YNc(37,O,3,3,"div",15),e.YNc(38,$,3,3,"div",15),e.YNc(39,k,3,3,"div",15),e.YNc(40,z,3,3,"div",15),e.YNc(41,D,3,3,"div",15),e.qZA()()(),e.TgZ(42,"div",10)(43,"div",16)(44,"label"),e._uU(45),e.ALo(46,"translate"),e._UZ(47,"a",12),e.qZA(),e.TgZ(48,"div",13)(49,"input",18),e.NdJ("ngModelChange",function(d){return n.confirmPSW=d})("keydown.space",function(d){return d.preventDefault()}),e.qZA(),e.YNc(50,B,3,2,"div",15),e.qZA()()(),e.TgZ(51,"div",19)(52,"button",20),e._uU(53),e.ALo(54,"translate"),e.qZA(),e.TgZ(55,"button",21),e._uU(56),e.ALo(57,"translate"),e.qZA()()()()()()()()()),2&o&&(e.xp6(5),e.Q6J("routerLink",e.DdM(38,K)),e.xp6(1),e.hij(" ",e.lcZ(7,24,"Profile.user.Profile")," "),e.xp6(2),e.Q6J("routerLink",e.DdM(39,X)),e.xp6(1),e.hij(" ",e.lcZ(10,26,"Profile.user.Password")," "),e.xp6(9),e.Q6J("formGroup",n.changePassword),e.xp6(5),e.hij("",e.lcZ(24,28,"Profile.user.CurrentPassword")," "),e.xp6(4),e.Q6J("ngModel",n.oldPSW)("ngClass",e.VKq(40,P,n.submitted&&n.f.oldPSW.errors)),e.xp6(1),e.Q6J("ngIf",n.submitted&&n.f.oldPSW.errors),e.xp6(4),e.hij("",e.lcZ(33,30,"Profile.user.NewPassword")," "),e.xp6(4),e.Q6J("ngModel",n.newPSW)("ngClass",e.VKq(42,P,n.submitted&&n.f.newPSW.errors)),e.xp6(1),e.Q6J("ngIf",n.submitted&&n.changePassword.controls.newPSW.hasError("required")),e.xp6(1),e.Q6J("ngIf",n.changePassword.controls.newPSW.hasError("minlength")),e.xp6(1),e.Q6J("ngIf",n.changePassword.controls.newPSW.hasError("hasNumber")),e.xp6(1),e.Q6J("ngIf",n.changePassword.controls.newPSW.hasError("hasCapitalCase")),e.xp6(1),e.Q6J("ngIf",n.changePassword.controls.newPSW.hasError("hasSmallCase")),e.xp6(4),e.hij("",e.lcZ(46,32,"Profile.user.ConfirmPassword")," "),e.xp6(4),e.Q6J("ngModel",n.confirmPSW)("ngClass",e.VKq(44,P,n.submitted&&n.f.confirmPSW.errors)),e.xp6(1),e.Q6J("ngIf",n.submitted&&n.f.confirmPSW.errors),e.xp6(3),e.Oqu(e.lcZ(54,34,"Settings.Local.Save")),e.xp6(2),e.Q6J("routerLink",e.DdM(46,H)),e.xp6(1),e.Oqu(e.lcZ(57,36,"Settings.Local.Country.Cancel")))},directives:[E.L,c.yS,a._Y,a.JL,a.F,a.sg,a.Fj,a.Q7,a.wO,a.JJ,a.u,_.m,m.mk,m.O5,c.Od,c.rH],pipes:[A.X$],styles:[".auth-wrapper[_ngcontent-%COMP%]   .auth-box[_ngcontent-%COMP%]   .changePswform[_ngcontent-%COMP%]   .float-left[_ngcontent-%COMP%]{line-height:2;font-weight:800;background:#1e313e;border-radius:30px;width:130px;margin-left:unset!important}[_nghost-%COMP%]     .fa, .fas[_ngcontent-%COMP%]{margin-top:-24px!important}"]}),s})(),data:{urls:[{title:"Settings",url:""},{title:"Change Password",url:""}]}}];let se=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[c.Bz.forChild(ee)],c.Bz]}),s})();var ne=t(2476),oe=t(1944);let re=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Z,S],imports:[[m.ez,y.IJ,u.sQ.forFeature([l]),se,A.aw,a.UX,a.u5,ne.K,oe._]]}),s})()}}]);