(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[7314],{7314:(Jf,Ra,Ai)=>{"use strict";Ai.r(Ra),Ai.d(Ra,{DashboardModule:()=>ln});var Ko=Ai(9808),v=Ai(3675),ie=Ai(3075),ae=Ai(2596),_=Ai(520),k=Ai(9900),m=Ai(5e3);let E=(()=>{class or extends k.V{constructor(){super(...arguments),this.params={},this.URL=this.getBaseUrl()}getTopSellingProducts(Rt){const Lt={},Pt=Object.getOwnPropertyNames(Rt).reduce((Wt,hr)=>Wt.set(hr,Rt[hr]),new _.LE);return Lt.params=Pt,this.http.get(this.URL+"/product/top-performing-products",Lt)}getSalesOrders(Rt){const Lt={},Pt=Object.getOwnPropertyNames(Rt).reduce((Wt,hr)=>Wt.set(hr,Rt[hr]),new _.LE);return Lt.params=Pt,this.http.get(this.URL+"/admin-customer/customer-visit-list",Lt)}getVisitorsList(Rt){const Lt={},Pt=Object.getOwnPropertyNames(Rt).reduce((Wt,hr)=>Wt.set(hr,Rt[hr]),new _.LE);return Lt.params=Pt,this.http.get(this.URL+"/order/transaction-list",Lt)}getRecentVisitorsList(Rt){const Lt={},Pt=Object.getOwnPropertyNames(Rt).reduce((Wt,hr)=>Wt.set(hr,Rt[hr]),new _.LE);return Lt.params=Pt,this.http.get(this.URL+"/product/top-five-repeatedly-purchased-customers",Lt)}getRecentSellingProductList(Rt){const Lt={},Pt=Object.getOwnPropertyNames(Rt).reduce((Wt,hr)=>Wt.set(hr,Rt[hr]),new _.LE);return Lt.params=Pt,this.http.get(this.URL+"/product/recent-selling-product",Lt)}getItemsPerPageCount(){return this.http.get(this.URL+"/settings/get-settings")}getDashboardCount(){return this.http.get(this.URL+"/product/dashboard-admin-totalvendor-totalproduct-count")}averageOrderValue(Rt){const Lt={},Pt=Object.getOwnPropertyNames(Rt).reduce((Wt,hr)=>Wt.set(hr,Rt[hr]),new _.LE);return Lt.params=Pt,this.http.get(this.URL+"/product/dashboard-average-order-value",Lt)}totalCustomersList(Rt){const Lt={},Pt=Object.getOwnPropertyNames(Rt).reduce((Wt,hr)=>Wt.set(hr,Rt[hr]),new _.LE);return Lt.params=Pt,this.http.get(this.URL+"/product/dashboard/admin-customers-count",Lt)}getTopSellingProductListCount(Rt){const Lt={},Pt=Object.getOwnPropertyNames(Rt).reduce((Wt,hr)=>Wt.set(hr,Rt[hr]),new _.LE);return Lt.params=Pt,this.http.get(this.URL+"/product/top-performing-products",Lt)}totalRevenue(Rt){const Lt={},Pt=Object.getOwnPropertyNames(Rt).reduce((Wt,hr)=>Wt.set(hr,Rt[hr]),new _.LE);return Lt.params=Pt,this.http.get(this.URL+"/product/dashboard-total-revenue",Lt)}totalOrders(Rt){const Lt={},Pt=Object.getOwnPropertyNames(Rt).reduce((Wt,hr)=>Wt.set(hr,Rt[hr]),new _.LE);return Lt.params=Pt,this.http.get(this.URL+"/product/dashboard-admin/orders-count",Lt)}newCustomers(Rt){const Lt={},Pt=Object.getOwnPropertyNames(Rt).reduce((Wt,hr)=>Wt.set(hr,Rt[hr]),new _.LE);return Lt.params=Pt,this.http.get(this.URL+"/product/dashboard/admin-customers-count",Lt)}averageConversionRatio(Rt){const Lt={},Pt=Object.getOwnPropertyNames(Rt).reduce((Wt,hr)=>Wt.set(hr,Rt[hr]),new _.LE);return Lt.params=Pt,this.http.get(this.URL+"/product/dashboard-average-conversion-ratio",Lt)}transactionValues(Rt){const Lt={},Pt=Object.getOwnPropertyNames(Rt).reduce((Wt,hr)=>Wt.set(hr,Rt[hr]),new _.LE);return Lt.params=Pt,this.http.get(this.URL+"/order/transaction-list",Lt)}vendor(Rt){const Lt={},Pt=Object.getOwnPropertyNames(Rt).reduce((Wt,hr)=>Wt.set(hr,Rt[hr]),new _.LE);return Lt.params=Pt,this.http.get(this.URL+"/admin-customer/vendor-graph-list",Lt)}salesgraph(Rt){const Lt={},Pt=Object.getOwnPropertyNames(Rt).reduce((Wt,hr)=>Wt.set(hr,Rt[hr]),new _.LE);return Lt.params=Pt,this.http.get(this.URL+"/order/sales-graph-list",Lt)}weeklysalesproduct(Rt){const Lt={},Pt=Object.getOwnPropertyNames(Rt).reduce((Wt,hr)=>Wt.set(hr,Rt[hr]),new _.LE);return Lt.params=Pt,this.http.get(this.URL+"/product/dashboard/graph-weekly-saleslist",Lt)}toptenweeklyproducts(Rt){const Lt={},Pt=Object.getOwnPropertyNames(Rt).reduce((Wt,hr)=>Wt.set(hr,Rt[hr]),new _.LE);return Lt.params=Pt,this.http.get(this.URL+"/product/top-performing-products",Lt)}}return or.\u0275fac=function(){let Br;return function(Lt){return(Br||(Br=m.n5z(or)))(Lt||or)}}(),or.\u0275prov=m.Yz7({token:or,factory:or.\u0275fac}),or})();var e=Ai(5762),c=Ai(5775),d=Ai(3492);const n=or=>or.dashboard,t=(0,c.P1)(n,d.Z5),i=(0,c.P1)(n,d.Xe),a=(0,c.P1)(n,d.Ps),g=((0,c.P1)(n,d.wZ),(0,c.P1)(n,d.gE)),s=(0,c.P1)(n,d.Lp),b=(0,c.P1)(n,d.yS),S=((0,c.P1)(n,d.W3),(0,c.P1)(n,d.B9)),p=(0,c.P1)(n,d.kh),w=(0,c.P1)(n,d._1),y=((0,c.P1)(n,d.OF),(0,c.P1)(n,d.DE)),A=(0,c.P1)(n,d.AZ),T=(0,c.P1)(n,d.P0),f=((0,c.P1)(n,d.$),(0,c.P1)(n,d.CB)),u=(0,c.P1)(n,d.SP),h=(0,c.P1)(n,d.or),C=((0,c.P1)(n,d.gf),(0,c.P1)(n,d.Bm)),R=(0,c.P1)(n,d.Q7),z=(0,c.P1)(n,d.G3),I=((0,c.P1)(n,d.zR),(0,c.P1)(n,d.bh)),F=(0,c.P1)(n,d.$_),D=(0,c.P1)(n,d.Pj),U=((0,c.P1)(n,d.d8),(0,c.P1)(n,d.KL)),X=(0,c.P1)(n,d.Ek),oe=(0,c.P1)(n,d.zp),ne=((0,c.P1)(n,d.aq),(0,c.P1)(n,d.pH)),W=(0,c.P1)(n,d.jB),G=(0,c.P1)(n,d.NJ),V=((0,c.P1)(n,d.rr),(0,c.P1)(n,d.C4)),H=(0,c.P1)(n,d.mW),q=(0,c.P1)(n,d.y$),Y=((0,c.P1)(n,d.OV),(0,c.P1)(n,d.XO)),te=(0,c.P1)(n,d.Tb),J=(0,c.P1)(n,d.eB),re=((0,c.P1)(n,d.TB),(0,c.P1)(n,d.if)),le=(0,c.P1)(n,d.f4),ge=(0,c.P1)(n,d.AE),xe=((0,c.P1)(n,d.ie),(0,c.P1)(n,d.R1)),ke=(0,c.P1)(n,d.dq),we=(0,c.P1)(n,d.Wf),be=((0,c.P1)(n,d.FO),(0,c.P1)(n,d.BN)),Le=(0,c.P1)(n,d.$P),De=(0,c.P1)(n,d.o9),Ce=((0,c.P1)(n,d.Mw),(0,c.P1)(n,d.Hx)),Fe=(0,c.P1)(n,d.eo),Ke=(0,c.P1)(n,d.dl),Be=((0,c.P1)(n,d.xB),(0,c.P1)(n,d.XX)),Ie=(0,c.P1)(n,d.OC),nt=(0,c.P1)(n,d.ZU),Nt=((0,c.P1)(n,d.y3),(0,c.P1)(n,d.fq)),St=(0,c.P1)(n,d.q1),Bt=(0,c.P1)(n,d._7),Et=((0,c.P1)(n,d.vf),(0,c.P1)(n,d.UZ)),wt=(0,c.P1)(n,d.dB),at=(0,c.P1)(n,d.l2),Qe=((0,c.P1)(n,d.p9),(0,c.P1)(n,d.Kl)),Pe=(0,c.P1)(n,d.rU),Ze=(0,c.P1)(n,d.h0),rt=((0,c.P1)(n,d.tv),(0,c.P1)(n,d.cV)),kt=(0,c.P1)(n,d.D_),Tt=(0,c.P1)(n,d.M7),ar=((0,c.P1)(n,d.vR),(0,c.P1)(n,d.eD)),Ut=(0,c.P1)(n,d.sv),Jt=(0,c.P1)(n,d.CV);(0,c.P1)(n,d.pb);var rr=Ai(7319);let br=(()=>{class or{constructor(Rt){this.appState=Rt,this.OrderCount$=this.appState.select(t),this.OrderCountLoading$=this.appState.select(a),this.OrderCountLoaded$=this.appState.select(i),this.productCount$=this.appState.select(g),this.productCountLoading$=this.appState.select(b),this.productCountLoaded$=this.appState.select(s),this.customerCount$=this.appState.select(S),this.customerCountLoading$=this.appState.select(w),this.customerCountLoaded$=this.appState.select(p),this.topSellingProducts$=this.appState.select(y),this.topSellingProductsLoading$=this.appState.select(T),this.topSellingProductsLoaded$=this.appState.select(A),this.salesOrderList$=this.appState.select(f),this.salesOrderListLoading$=this.appState.select(h),this.salesOrderListLoaded$=this.appState.select(u),this.recentVisitorList$=this.appState.select(I),this.recentVisitorListLoading$=this.appState.select(D),this.recentVisitorListLoaded$=this.appState.select(F),this.visitorLogList$=this.appState.select(C),this.visitorLogListLoading$=this.appState.select(z),this.visitorLogListLoaded$=this.appState.select(R),this.recentSellingProduct$=this.appState.select(U),this.recentSellingProductLoading$=this.appState.select(oe),this.recentSellingProductLoaded$=this.appState.select(X),this.dashboardCount$=this.appState.select(ne),this.dashboardCountLoading$=this.appState.select(W),this.dashboardCountLoaded$=this.appState.select(G),this.averageOrderValue$=this.appState.select(V),this.averageOrderValueLoading$=this.appState.select(H),this.averageOrderValueLoaded$=this.appState.select(q),this.totalCustomersList$=this.appState.select(Y),this.totalCustomersListLoading$=this.appState.select(te),this.totalCustomersListLoaded$=this.appState.select(J),this.getTopSellingProductListCount$=this.appState.select(re),this.getTopSellingProductListCountLoading$=this.appState.select(le),this.getTopSellingProductListCountLoaded$=this.appState.select(ge),this.totalRevenue$=this.appState.select(xe),this.totalRevenueLoading$=this.appState.select(ke),this.totalRevenueLoaded$=this.appState.select(we),this.totalOrders$=this.appState.select(be),this.totalOrdersLoading$=this.appState.select(Le),this.totalOrdersLoaded$=this.appState.select(De),this.newCustomers$=this.appState.select(Ce),this.newCustomersLoading$=this.appState.select(Fe),this.newCustomersLoaded$=this.appState.select(Ke),this.averageConversionRatio$=this.appState.select(Be),this.averageConversionRatioLoading$=this.appState.select(Ie),this.averageConversionRatioLoaded$=this.appState.select(nt),this.transactionValues$=this.appState.select(Nt),this.transactionValuesLoading$=this.appState.select(St),this.transactionValuesLoaded$=this.appState.select(Bt),this.vendor$=this.appState.select(Et),this.vendorLoading$=this.appState.select(wt),this.vendorLoaded$=this.appState.select(at),this.salesgraph$=this.appState.select(Qe),this.salesgraphLoading$=this.appState.select(Pe),this.salesgraphLoaded$=this.appState.select(Ze),this.weeklysalesproduct$=this.appState.select(rt),this.weeklysalesproductLoading$=this.appState.select(kt),this.weeklysalesproductLoaded$=this.appState.select(Tt),this.toptenweeklyproducts$=this.appState.select(ar),this.toptenweeklyproductsLoading$=this.appState.select(Ut),this.toptenweeklyproductsLoaded$=this.appState.select(Jt)}getTopSellingProductList(Rt){this.appState.dispatch(new e._U(Rt))}getSalesOrderList(Rt={}){this.appState.dispatch(new e.zR(Rt))}getVisitorLogsList(Rt={}){this.appState.dispatch(new e.oM(Rt))}getRecentVisitorList(Rt={}){this.appState.dispatch(new e.Ns(Rt))}getRecentSellingProductList(Rt={}){this.appState.dispatch(new e.ch(Rt))}getItemPerPageCount(Rt={}){this.appState.dispatch(new e.UY(Rt))}getDashboardCount(){this.appState.dispatch(new e.wh)}averageOrderValue(Rt){this.appState.dispatch(new e.mN(Rt))}totalCustomersList(Rt){this.appState.dispatch(new e.Dr(Rt))}getTopSellingProductListCount(Rt){this.appState.dispatch(new e.WR(Rt))}totalRevenue(Rt){this.appState.dispatch(new e.c7(Rt))}totalOrders(Rt){this.appState.dispatch(new e.AA(Rt))}newCustomers(Rt){this.appState.dispatch(new e.$y(Rt))}averageConversionRatio(Rt){this.appState.dispatch(new e.qj(Rt))}transactionValues(Rt){this.appState.dispatch(new e.j(Rt))}vendor(Rt){this.appState.dispatch(new e.QA(Rt))}salesgraph(Rt){this.appState.dispatch(new e.KJ(Rt))}weeklysalesproduct(Rt){this.appState.dispatch(new e.vs(Rt))}toptenweeklyproducts(Rt){this.appState.dispatch(new e.gF(Rt))}}return or.\u0275fac=function(Rt){return new(Rt||or)(m.LFG(rr.yh))},or.\u0275prov=m.Yz7({token:or,factory:or.\u0275fac}),or})();var Hr=Ai(655),on=Ai(9646),jr=Ai(4004),et=Ai(3900),Yt=Ai(262),qt=Ai(8505);class Vt{constructor(Br,Rt){this.action$=Br,this.dashboardService=Rt,this.doTopSellingProducts$=this.action$.pipe((0,ae.l4)(e.MF.GET_TOP_SELLING_PRODUCTS),(0,jr.U)(Lt=>Lt.payload),(0,et.w)(Lt=>this.dashboardService.getTopSellingProducts(Lt).pipe((0,et.w)(Pt=>[new e.eG(Pt)]),(0,Yt.K)(Pt=>(0,on.of)(new e.yZ(Pt)))))),this.doSalesOrderList$=this.action$.pipe((0,ae.l4)(e.MF.GET_SALES_ORDER_LIST),(0,jr.U)(Lt=>Lt.payload),(0,et.w)(Lt=>this.dashboardService.getSalesOrders(Lt).pipe((0,et.w)(Pt=>[new e.ki(Pt)]),(0,Yt.K)(Pt=>(0,on.of)(new e.nH(Pt)))))),this.doVisitorLogs$=this.action$.pipe((0,ae.l4)(e.MF.GET_VISITOR_LOG_LIST),(0,jr.U)(Lt=>Lt.payload),(0,et.w)(Lt=>this.dashboardService.getVisitorsList(Lt).pipe((0,et.w)(Pt=>[new e.nK(Pt)]),(0,Yt.K)(Pt=>(0,on.of)(new e.Um(Pt)))))),this.doRecentVisitorList$=this.action$.pipe((0,ae.l4)(e.MF.GET_RECENT_VISITOR_LIST),(0,jr.U)(Lt=>Lt.payload),(0,et.w)(Lt=>this.dashboardService.getRecentVisitorsList(Lt).pipe((0,et.w)(Pt=>[new e.mZ(Pt)]),(0,Yt.K)(Pt=>(0,on.of)(new e.WO(Pt)))))),this.doRecentSellingProducts$=this.action$.pipe((0,ae.l4)(e.MF.GET_RECENT_SELLING_PRODUCT),(0,jr.U)(Lt=>Lt.payload),(0,et.w)(Lt=>this.dashboardService.getRecentSellingProductList(Lt).pipe((0,et.w)(Pt=>[new e.f_(Pt)]),(0,Yt.K)(Pt=>(0,on.of)(new e.IQ(Pt)))))),this.doItemPageCount$=this.action$.pipe((0,ae.l4)(e.MF.GET_ITEMS_PAGECOUNT),(0,jr.U)(Lt=>Lt.payload),(0,et.w)(()=>this.dashboardService.getItemsPerPageCount().pipe((0,qt.b)(Lt=>{sessionStorage.setItem("itemsPerPage",Lt.data[0].itemsPerPage)}),(0,et.w)(Lt=>[new e.wZ(Lt)]),(0,Yt.K)(Lt=>(0,on.of)(new e.zF(Lt)))))),this.dashboardCount$=this.action$.pipe((0,ae.l4)(e.MF.GET_DASHBOARD_COUNT),(0,jr.U)(Lt=>Lt.payload),(0,et.w)(Lt=>this.dashboardService.getDashboardCount().pipe((0,et.w)(Pt=>[new e.j_(Pt)]),(0,Yt.K)(Pt=>(0,on.of)(new e.SS(Pt)))))),this.averageOrderValue$=this.action$.pipe((0,ae.l4)(e.MF.AVERAGE_ORDER_VALUE),(0,jr.U)(Lt=>Lt.payload),(0,et.w)(Lt=>this.dashboardService.averageOrderValue(Lt).pipe((0,et.w)(Pt=>[new e.l6(Pt)]),(0,Yt.K)(Pt=>(0,on.of)(new e.UO(Pt)))))),this.totalCustomersList$=this.action$.pipe((0,ae.l4)(e.MF.TOTAL_CUSTOMERS_LIST),(0,jr.U)(Lt=>Lt.payload),(0,et.w)(Lt=>this.dashboardService.totalCustomersList(Lt).pipe((0,et.w)(Pt=>[new e.Ue(Pt)]),(0,Yt.K)(Pt=>(0,on.of)(new e.x4(Pt)))))),this.getTopSellingProductListCount$=this.action$.pipe((0,ae.l4)(e.MF.TOP_SELLING_PRODUCT_COUNT),(0,jr.U)(Lt=>Lt.payload),(0,et.w)(Lt=>this.dashboardService.getTopSellingProductListCount(Lt).pipe((0,et.w)(Pt=>[new e.zD(Pt)]),(0,Yt.K)(Pt=>(0,on.of)(new e.mX(Pt)))))),this.totalRevenue$=this.action$.pipe((0,ae.l4)(e.MF.TOTAL_REVENUE),(0,jr.U)(Lt=>Lt.payload),(0,et.w)(Lt=>this.dashboardService.totalRevenue(Lt).pipe((0,et.w)(Pt=>[new e._2(Pt)]),(0,Yt.K)(Pt=>(0,on.of)(new e.C4(Pt)))))),this.totalOrders$=this.action$.pipe((0,ae.l4)(e.MF.TOTAL_ORDERS),(0,jr.U)(Lt=>Lt.payload),(0,et.w)(Lt=>this.dashboardService.totalOrders(Lt).pipe((0,et.w)(Pt=>[new e.EI(Pt)]),(0,Yt.K)(Pt=>(0,on.of)(new e.Mw(Pt)))))),this.newCustomers$=this.action$.pipe((0,ae.l4)(e.MF.NEW_CUSTOMERS),(0,jr.U)(Lt=>Lt.payload),(0,et.w)(Lt=>this.dashboardService.newCustomers(Lt).pipe((0,et.w)(Pt=>[new e.De(Pt)]),(0,Yt.K)(Pt=>(0,on.of)(new e.Qt(Pt)))))),this.averageConversionRatio$=this.action$.pipe((0,ae.l4)(e.MF.AVERAGE_CONVERSION_RATIO),(0,jr.U)(Lt=>Lt.payload),(0,et.w)(Lt=>this.dashboardService.averageConversionRatio(Lt).pipe((0,et.w)(Pt=>[new e.p0(Pt)]),(0,Yt.K)(Pt=>(0,on.of)(new e.XE(Pt)))))),this.transactionValues$=this.action$.pipe((0,ae.l4)(e.MF.TRANSACTION_VALUES),(0,jr.U)(Lt=>Lt.payload),(0,et.w)(Lt=>this.dashboardService.transactionValues(Lt).pipe((0,et.w)(Pt=>[new e.J2(Pt)]),(0,Yt.K)(Pt=>(0,on.of)(new e.ti(Pt)))))),this.vendor$=this.action$.pipe((0,ae.l4)(e.MF.VENDOR),(0,jr.U)(Lt=>Lt.payload),(0,et.w)(Lt=>this.dashboardService.vendor(Lt).pipe((0,et.w)(Pt=>[new e.Gb(Pt)]),(0,Yt.K)(Pt=>(0,on.of)(new e.eB(Pt)))))),this.salesgraph$=this.action$.pipe((0,ae.l4)(e.MF.SALESGRAPH),(0,jr.U)(Lt=>Lt.payload),(0,et.w)(Lt=>this.dashboardService.salesgraph(Lt).pipe((0,et.w)(Pt=>[new e.X0(Pt)]),(0,Yt.K)(Pt=>(0,on.of)(new e.fn(Pt)))))),this.weeklysalesproduct$=this.action$.pipe((0,ae.l4)(e.MF.WEEKLYSALESPRODUCT),(0,jr.U)(Lt=>Lt.payload),(0,et.w)(Lt=>this.dashboardService.weeklysalesproduct(Lt).pipe((0,et.w)(Pt=>[new e.Xg(Pt)]),(0,Yt.K)(Pt=>(0,on.of)(new e.FG(Pt)))))),this.toptenweeklyproducts$=this.action$.pipe((0,ae.l4)(e.MF.TOPTENWEEKLYPRODUCTS),(0,jr.U)(Lt=>Lt.payload),(0,et.w)(Lt=>this.dashboardService.toptenweeklyproducts(Lt).pipe((0,et.w)(Pt=>[new e.p$(Pt)]),(0,Yt.K)(Pt=>(0,on.of)(new e.qs(Pt))))))}}Vt.\u0275fac=function(Br){return new(Br||Vt)(m.LFG(ae.eX),m.LFG(E))},Vt.\u0275prov=m.Yz7({token:Vt,factory:Vt.\u0275fac}),(0,Hr.gn)([(0,ae.Qm)()],Vt.prototype,"doTopSellingProducts$",void 0),(0,Hr.gn)([(0,ae.Qm)()],Vt.prototype,"doSalesOrderList$",void 0),(0,Hr.gn)([(0,ae.Qm)()],Vt.prototype,"doVisitorLogs$",void 0),(0,Hr.gn)([(0,ae.Qm)()],Vt.prototype,"doRecentVisitorList$",void 0),(0,Hr.gn)([(0,ae.Qm)()],Vt.prototype,"doRecentSellingProducts$",void 0),(0,Hr.gn)([(0,ae.Qm)()],Vt.prototype,"doItemPageCount$",void 0),(0,Hr.gn)([(0,ae.Qm)()],Vt.prototype,"dashboardCount$",void 0),(0,Hr.gn)([(0,ae.Qm)()],Vt.prototype,"averageOrderValue$",void 0),(0,Hr.gn)([(0,ae.Qm)()],Vt.prototype,"totalCustomersList$",void 0),(0,Hr.gn)([(0,ae.Qm)()],Vt.prototype,"getTopSellingProductListCount$",void 0),(0,Hr.gn)([(0,ae.Qm)()],Vt.prototype,"totalRevenue$",void 0),(0,Hr.gn)([(0,ae.Qm)()],Vt.prototype,"totalOrders$",void 0),(0,Hr.gn)([(0,ae.Qm)()],Vt.prototype,"newCustomers$",void 0),(0,Hr.gn)([(0,ae.Qm)()],Vt.prototype,"averageConversionRatio$",void 0),(0,Hr.gn)([(0,ae.Qm)()],Vt.prototype,"transactionValues$",void 0),(0,Hr.gn)([(0,ae.Qm)()],Vt.prototype,"vendor$",void 0),(0,Hr.gn)([(0,ae.Qm)()],Vt.prototype,"salesgraph$",void 0),(0,Hr.gn)([(0,ae.Qm)()],Vt.prototype,"weeklysalesproduct$",void 0),(0,Hr.gn)([(0,ae.Qm)()],Vt.prototype,"toptenweeklyproducts$",void 0);var Tr=Ai(9291),tt=Ai(3056),je=Ai(2313),ct=Ai(7941),ht=Ai(2290),Me=Ai(3845),Se=Ai(4376),Je=Ai(3052);const We=["plot"],st=["*"];class lt{static setModuleName(Br){lt.moduleName=Br}static getModuleName(){return lt.moduleName}static setPlotly(Br){if("object"==typeof Br&&"function"!=typeof Br.react)throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");lt.plotly=Br}static insert(Br){return-1===lt.instances.indexOf(Br)&&lt.instances.push(Br),Br}static remove(Br){const Rt=lt.instances.indexOf(Br);Rt>=0&&(lt.instances.splice(Rt,1),lt.plotly.purge(Br))}getInstanceByDivId(Br){for(const Rt of lt.instances)if(Rt&&Rt.id===Br)return Rt}getPlotly(){return(0,Hr.mG)(this,void 0,void 0,function*(){return yield this.waitFor(()=>"waiting"!==this._getPlotly()),this._getPlotly()})}_getPlotly(){if(void 0===lt.plotly)throw new Error("ViaCDN"===lt.moduleName?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed");return lt.plotly}waitFor(Br){return new Promise(Rt=>{const Lt=()=>{Br()?Rt():setTimeout(Lt,10)};Lt()})}newPlot(Br,Rt,Lt,Pt,Wt){return(0,Hr.mG)(this,void 0,void 0,function*(){if(yield this.waitFor(()=>"waiting"!==this._getPlotly()),Wt){const hr={data:Rt,layout:Lt,config:Pt,frames:Wt};return this._getPlotly().newPlot(Br,hr).then(()=>lt.insert(Br))}return this._getPlotly().newPlot(Br,Rt,Lt,Pt).then(()=>lt.insert(Br))})}plot(Br,Rt,Lt,Pt,Wt){if(Wt){const hr={data:Rt,layout:Lt,config:Pt,frames:Wt};return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(Br,hr):this._getPlotly().newPlot(Br,hr)}return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(Br,Rt,Lt,Pt):this._getPlotly().newPlot(Br,Rt,Lt,Pt)}update(Br,Rt,Lt,Pt,Wt){if(Wt){const hr={data:Rt,layout:Lt,config:Pt,frames:Wt};return this._getPlotly().react(Br,hr)}return this._getPlotly().react(Br,Rt,Lt,Pt)}resize(Br){return this._getPlotly().Plots.resize(Br)}}lt.\u0275fac=function(Br){return new(Br||lt)},lt.instances=[],lt.plotly=void 0,lt.moduleName=void 0,lt.\u0275prov=m.Yz7({factory:function(){return new lt},token:lt,providedIn:"root"});let pt=(()=>{class or{constructor(Rt,Lt,Pt){this.plotly=Rt,this.iterableDiffers=Lt,this.keyValueDiffers=Pt,this.defaultClassName="js-plotly-plot",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!1,this.initialized=new m.vpe,this.update=new m.vpe,this.purge=new m.vpe,this.error=new m.vpe,this.afterExport=new m.vpe,this.afterPlot=new m.vpe,this.animated=new m.vpe,this.animatingFrame=new m.vpe,this.animationInterrupted=new m.vpe,this.autoSize=new m.vpe,this.beforeExport=new m.vpe,this.buttonClicked=new m.vpe,this.click=new m.vpe,this.plotlyClick=new m.vpe,this.clickAnnotation=new m.vpe,this.deselect=new m.vpe,this.doubleClick=new m.vpe,this.framework=new m.vpe,this.hover=new m.vpe,this.legendClick=new m.vpe,this.legendDoubleClick=new m.vpe,this.react=new m.vpe,this.relayout=new m.vpe,this.restyle=new m.vpe,this.redraw=new m.vpe,this.selected=new m.vpe,this.selecting=new m.vpe,this.sliderChange=new m.vpe,this.sliderEnd=new m.vpe,this.sliderStart=new m.vpe,this.transitioning=new m.vpe,this.transitionInterrupted=new m.vpe,this.unhover=new m.vpe,this.relayouting=new m.vpe,this.treemapclick=new m.vpe,this.sunburstclick=new m.vpe,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","buttonClicked","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","react","relayout","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","transitioning","transitionInterrupted","unhover","relayouting","treemapclick","sunburstclick"]}ngOnInit(){this.createPlot().then(()=>{const Rt=this.createFigure();this.initialized.emit(Rt)}),this.click.observers.length>0&&console.error("DEPRECATED: Reconsider using `(plotlyClick)` instead of `(click)` to avoid event conflict. Please check https://github.com/plotly/angular-plotly.js#FAQ")}ngOnDestroy(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0);const Rt=this.createFigure();this.purge.emit(Rt),lt.remove(this.plotlyInstance)}ngOnChanges(Rt){let Lt=!1;const Pt=Rt.revision;Pt&&!Pt.isFirstChange()&&(Lt=!0);const Wt=Rt.debug;Wt&&!Wt.isFirstChange()&&(Lt=!0),Lt&&this.updatePlot(),this.updateWindowResizeHandler()}ngDoCheck(){if(this.updateOnlyWithRevision)return!1;let Rt=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(Rt=!0):this.layoutDiffer=this.layout?this.keyValueDiffers.find(this.layout).create():void 0),this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(Rt=!0):this.dataDiffer=Array.isArray(this.data)?this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):void 0),Rt&&this.plotlyInstance&&this.updatePlot()}getWindow(){return window}getClassName(){let Rt=[this.defaultClassName];return Array.isArray(this.className)?Rt=Rt.concat(this.className):this.className&&Rt.push(this.className),Rt.join(" ")}createPlot(){return this.plotly.newPlot(this.plotEl.nativeElement,this.data,this.layout,this.config,this.frames).then(Rt=>{this.plotlyInstance=Rt,this.getWindow().gd=this.debug?Rt:void 0,this.eventNames.forEach(Lt=>{const Pt=`plotly_${Lt.toLowerCase()}`;Rt.on(Pt,Wt=>this[Lt].emit(Wt))}),Rt.on("plotly_click",Lt=>{this.click.emit(Lt),this.plotlyClick.emit(Lt)}),this.updateWindowResizeHandler()},Rt=>{console.error("Error while plotting:",Rt),this.error.emit(Rt)})}createFigure(){const Rt=this.plotlyInstance;return{data:Rt.data,layout:Rt.layout,frames:Rt._transitionData?Rt._transitionData._frames:null}}updatePlot(){if(!this.plotlyInstance){const Lt=new Error("Plotly component wasn't initialized");throw this.error.emit(Lt),Lt}const Rt=Object.assign({},this.layout);return this.plotly.update(this.plotlyInstance,this.data,Rt,this.config,this.frames).then(()=>{const Lt=this.createFigure();this.update.emit(Lt)},Lt=>{console.error("Error while updating plot:",Lt),this.error.emit(Lt)})}updateWindowResizeHandler(){this.useResizeHandler?void 0===this.resizeHandler&&(this.resizeHandler=()=>this.plotly.resize(this.plotlyInstance),this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)}dataDifferTrackBy(Rt,Lt){const Pt=Object.assign({},Lt,{uid:""});return JSON.stringify(Pt)}}return or.\u0275fac=function(Rt){return new(Rt||or)(m.Y36(lt),m.Y36(m.ZZ4),m.Y36(m.aQg))},or.\u0275cmp=m.Xpm({type:or,selectors:[["plotly-plot"]],viewQuery:function(Rt,Lt){if(1&Rt&&m.Gf(We,7),2&Rt){let Pt;m.iGM(Pt=m.CRH())&&(Lt.plotEl=Pt.first)}},inputs:{revision:"revision",debug:"debug",useResizeHandler:"useResizeHandler",updateOnLayoutChange:"updateOnLayoutChange",updateOnDataChange:"updateOnDataChange",updateOnlyWithRevision:"updateOnlyWithRevision",data:"data",layout:"layout",config:"config",frames:"frames",style:"style",divId:"divId",className:"className"},outputs:{initialized:"initialized",update:"update",purge:"purge",error:"error",afterExport:"afterExport",afterPlot:"afterPlot",animated:"animated",animatingFrame:"animatingFrame",animationInterrupted:"animationInterrupted",autoSize:"autoSize",beforeExport:"beforeExport",buttonClicked:"buttonClicked",click:"click",plotlyClick:"plotlyClick",clickAnnotation:"clickAnnotation",deselect:"deselect",doubleClick:"doubleClick",framework:"framework",hover:"hover",legendClick:"legendClick",legendDoubleClick:"legendDoubleClick",react:"react",relayout:"relayout",restyle:"restyle",redraw:"redraw",selected:"selected",selecting:"selecting",sliderChange:"sliderChange",sliderEnd:"sliderEnd",sliderStart:"sliderStart",transitioning:"transitioning",transitionInterrupted:"transitionInterrupted",unhover:"unhover",relayouting:"relayouting",treemapclick:"treemapclick",sunburstclick:"sunburstclick"},features:[m._Bn([lt]),m.TTD],ngContentSelectors:st,decls:3,vars:3,consts:[[3,"ngClass","ngStyle"],["plot",""]],template:function(Rt,Lt){1&Rt&&(m.F$t(),m.TgZ(0,"div",0,1),m.Hsn(2),m.qZA()),2&Rt&&(m.Q6J("ngClass",Lt.getClassName())("ngStyle",Lt.style),m.uIk("id",Lt.divId))},directives:[Ko.mk,Ko.PC],encapsulation:2}),or})(),Ct=(()=>{class or{constructor(){}}return or.\u0275fac=function(Rt){return new(Rt||or)},or.\u0275mod=m.oAB({type:or}),or.\u0275inj=m.cJS({providers:[lt],imports:[[Ko.ez]]}),or})(),Dt=(()=>{class or{constructor(){if(!this.isValid())throw new Error("Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.");lt.setPlotly(or.plotlyjs)}isValid(){return void 0!==or.plotlyjs&&("function"==typeof or.plotlyjs.plot||"function"==typeof or.plotlyjs.newPlot)}}return or.\u0275fac=function(Rt){return new(Rt||or)},or.\u0275mod=m.oAB({type:or}),or.\u0275inj=m.cJS({providers:[lt],imports:[[Ko.ez,Ct],Ct]}),or.plotlyjs={},or})(),Gt=(()=>{class or{constructor(Rt){this.plotlyService=Rt,lt.setModuleName("ViaCDN")}static setPlotlyVersion(Rt){if("latest"!==Rt&&!/^\d\.\d{1,2}\.\d{1,2}$/.test(Rt))throw new Error("Invalid plotly version. Please set 'latest' or version number (i.e.: 1.4.3)");or.loadViaCDN(),or.plotlyVersion=Rt}static setPlotlyBundle(Rt){if(!(null===Rt||or.plotlyBundleNames.indexOf(Rt)>=0)){const Pt=or.plotlyBundleNames.map(Wt=>`"${Wt}"`).join(", ");throw new Error(`Invalid plotly bundle. Please set to null for full or ${Pt} for a partial bundle.`)}or.plotlyBundle=Rt}static loadViaCDN(){lt.setPlotly("waiting"),setTimeout(()=>{const Lt=null==or.plotlyBundle?`https://cdn.plot.ly/plotly-${or.plotlyVersion}.min.js`:`https://cdn.plot.ly/plotly-${or.plotlyBundle}-${or.plotlyVersion}.min.js`,Pt=document.createElement("script");Pt.type="text/javascript",Pt.src=Lt,Pt.onerror=()=>console.error(`Error loading plotly.js library from ${Lt}`),document.getElementsByTagName("head")[0].appendChild(Pt);let hr=200;const vn=()=>{const Fn=window.Plotly;if(Fn)lt.setPlotly(Fn);else{if(!(hr>0))throw new Error(`Error loading plotly.js library from ${Lt}. Timeout.`);hr--,setTimeout(vn,50)}};vn()})}}return or.\u0275fac=function(Rt){return new(Rt||or)(m.LFG(lt))},or.\u0275mod=m.oAB({type:or}),or.\u0275inj=m.cJS({providers:[lt],imports:[[Ko.ez,Ct],Ct]}),or.plotlyBundle=null,or.plotlyVersion="latest",or.plotlyBundleNames=["basic","cartesian","geo","gl3d","gl2d","mapbox","finance"],or})();var pr=Ai(2539),Jr=Ai(6393),Lr=Ai(483),Ar=Ai(4218),en=Ai(6400);function mr(or,Br){1&or&&m._UZ(0,"span",70)}function wr(or,Br){1&or&&m._UZ(0,"span",70)}function Wr(or,Br){1&or&&m._UZ(0,"span",70)}function Kr(or,Br){1&or&&m._UZ(0,"span",70)}function Cr(or,Br){1&or&&m._UZ(0,"span",71)}function it(or,Br){if(1&or){const Rt=m.EpF();m.TgZ(0,"img",79),m.NdJ("load",function(){m.CHM(Rt);const Pt=m.oxw().$implicit;return m.oxw().topSellingImageLoading(Pt.productId)}),m.qZA()}if(2&or){const Rt=m.oxw().$implicit,Lt=m.oxw();m.Q6J("src",Lt.imageURL+"?path="+Rt.containerName+"&name="+Rt.image+"&width=40&height=40",m.LSH)("alt",Rt.productName)("hidden",!Lt.topSellingImage[Rt.productId])}}function It(or,Br){1&or&&(m.TgZ(0,"span",80),m._uU(1,"..."),m.qZA())}function Qt(or,Br){if(1&or&&(m.TgZ(0,"div",72)(1,"div",73)(2,"div",74),m.YNc(3,it,1,3,"img",75),m._UZ(4,"img",76),m.qZA(),m.TgZ(5,"div",77)(6,"h3"),m._uU(7),m.ALo(8,"slice"),m.YNc(9,It,2,0,"span",78),m.qZA()()(),m.TgZ(10,"h2"),m._uU(11),m.ALo(12,"translate"),m.qZA()()),2&or){const Rt=Br.$implicit,Lt=m.oxw();m.xp6(3),m.Q6J("ngIf",Rt),m.xp6(1),m.Q6J("hidden",Lt.topSellingImage[Rt.productId]),m.xp6(3),m.hij("",m.Dn7(8,6,Rt.productName,0,51)," "),m.xp6(2),m.Q6J("ngIf",(null==Rt.productName?null:Rt.productName.length)>51),m.xp6(2),m.AsE("",Rt.topPerformingProductCount," ",m.lcZ(12,10,"Dashboard.nos"),"")}}function ir(or,Br){1&or&&(m.TgZ(0,"h2",81),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&or&&(m.xp6(1),m.Oqu(m.lcZ(2,1,"marketplace.product.NoProductsfound")))}function Or(or,Br){1&or&&m._UZ(0,"span",82)}function qr(or,Br){if(1&or&&(m.TgZ(0,"div",83)(1,"div",84),m._UZ(2,"img",85),m.TgZ(3,"span"),m._uU(4),m.qZA()(),m.TgZ(5,"div",86)(6,"h4",87),m._uU(7),m.qZA(),m.TgZ(8,"p"),m._uU(9),m.qZA()()()),2&or){const Rt=Br.$implicit,Lt=m.oxw();m.xp6(2),m.Q6J("src",Lt.imageURL+"?path="+Rt.avatarPath+"&name="+Rt.avatar+"&width=50&height=50",m.LSH),m.xp6(2),m.Oqu(Rt.orderCount),m.xp6(3),m.Oqu(Rt.firstName),m.xp6(2),m.Oqu(Rt.paymentCity)}}function Ir(or,Br){1&or&&m._UZ(0,"span",88)}function kr(or,Br){1&or&&m._UZ(0,"span",70)}function Zr(or,Br){1&or&&m._UZ(0,"span",70)}function An(or,Br){if(1&or&&(m.TgZ(0,"ng-option",89),m._uU(1),m.qZA()),2&or){const Rt=Br.$implicit;m.s9C("value",Rt.Values),m.xp6(1),m.Oqu(Rt.name)}}function wn(or,Br){if(1&or&&(m.TgZ(0,"ng-option",89),m._uU(1),m.qZA()),2&or){const Rt=Br.$implicit;m.s9C("value",Rt.Values),m.xp6(1),m.Oqu(Rt.name)}}function Zn(or,Br){if(1&or&&m._UZ(0,"plotly-plot",90),2&or){const Rt=m.oxw();m.Q6J("config",Rt.salesconfig)("data",Rt.salesdata)("layout",Rt.saleslayout)}}function Ln(or,Br){1&or&&(m.TgZ(0,"p",91),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&or&&(m.xp6(1),m.Oqu(m.lcZ(2,1,"Dashboard.NoDatafound")))}function Wn(or,Br){if(1&or&&(m.TgZ(0,"ng-option",89),m._uU(1),m.qZA()),2&or){const Rt=Br.$implicit;m.s9C("value",Rt.Values),m.xp6(1),m.Oqu(Rt.name)}}function $n(or,Br){if(1&or&&(m.TgZ(0,"ng-option",89),m._uU(1),m.qZA()),2&or){const Rt=Br.$implicit;m.s9C("value",Rt.Values),m.xp6(1),m.Oqu(Rt.name)}}function wa(or,Br){if(1&or&&m._UZ(0,"plotly-plot",90),2&or){const Rt=m.oxw();m.Q6J("config",Rt.config)("data",Rt.data)("layout",Rt.layout)}}function ma(or,Br){1&or&&(m.TgZ(0,"p",91),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&or&&(m.xp6(1),m.Oqu(m.lcZ(2,1,"Dashboard.NoMonthlysalesfound")))}function $a(or,Br){if(1&or&&(m.TgZ(0,"ng-option",89),m._uU(1),m.qZA()),2&or){const Rt=Br.$implicit;m.s9C("value",Rt.vendorId),m.xp6(1),m.Oqu(Rt.firstName)}}function Ja(or,Br){if(1&or&&(m.TgZ(0,"ng-option",89),m._uU(1),m.qZA()),2&or){const Rt=Br.$implicit;m.s9C("value",Rt.Values),m.xp6(1),m.Oqu(Rt.name)}}function Va(or,Br){if(1&or&&(m.TgZ(0,"div",92)(1,"div",93)(2,"h3"),m._uU(3),m.qZA(),m.TgZ(4,"p"),m._uU(5),m.ALo(6,"translate"),m.qZA(),m.TgZ(7,"p"),m._uU(8),m.ALo(9,"translate"),m.qZA(),m.TgZ(10,"p"),m._uU(11),m.ALo(12,"translate"),m.qZA(),m.TgZ(13,"p"),m._uU(14),m.ALo(15,"translate"),m.qZA()(),m.TgZ(16,"div",94),m._UZ(17,"ngx-charts-pie-chart",95),m.qZA()()),2&or){const Rt=m.oxw();m.xp6(3),m.Oqu(null==Rt.vendorDetails?null:Rt.vendorDetails.companyName),m.xp6(2),m.AsE("",m.lcZ(6,19,"Sales.Orders.Products")," -",null==Rt.vendorDetails?null:Rt.vendorDetails.productCount,""),m.xp6(3),m.AsE("",m.lcZ(9,21,"Dashboard.productsSold")," -",null==Rt.vendorDetails?null:Rt.vendorDetails.productSoldCount,""),m.xp6(3),m.AsE("",m.lcZ(12,23,"Dashboard.outofStock")," -",null==Rt.vendorDetails?null:Rt.vendorDetails.outOfStockCount,""),m.xp6(3),m.AsE("",m.lcZ(15,25,"Dashboard.delivered")," -",null==Rt.vendorDetails?null:Rt.vendorDetails.deliveryCount,""),m.xp6(3),m.Q6J("results",Rt.vendors)("view",Rt.view)("scheme",Rt.colorScheme)("gradient",Rt.gradient)("legend",!1)("legendPosition",Rt.legendPosition)("labels",Rt.showLabels)("doughnut",Rt.isDoughnut)("trimLabels",!1)("arcWidth",-.4)}}function ai(or,Br){1&or&&(m.TgZ(0,"div",91),m._uU(1,"No Data Found"),m.qZA())}function Er(or,Br){if(1&or){const Rt=m.EpF();m.TgZ(0,"p",96)(1,"input",97),m.NdJ("ngModelChange",function(Pt){return m.CHM(Rt).$implicit.checked=Pt})("change",function(Pt){const Wt=m.CHM(Rt),hr=Wt.$implicit,vn=Wt.index;return m.oxw().checkboxweekly(Pt,hr,vn)}),m.qZA(),m.TgZ(2,"span",98),m._uU(3),m.qZA()()}if(2&or){const Rt=Br.$implicit;m.xp6(1),m.Q6J("ngModel",Rt.checked),m.xp6(1),m.s9C("ngbTooltip",Rt.productName),m.xp6(1),m.hij("",Rt.productName," ")}}function gn(or,Br){if(1&or&&m._UZ(0,"canvas",99),2&or){const Rt=m.oxw();m.Q6J("datasets",Rt.toptenweeklysalesdata)("labels",Rt.demoradarChartLabels)("type","radar")("options",Rt.optionsradar)("legend",!1)}}function dn(or,Br){1&or&&(m.TgZ(0,"div",91),m._uU(1,"No Data Found"),m.qZA())}function kn(or,Br){if(1&or&&(m.TgZ(0,"ng-option",89),m._uU(1),m.qZA()),2&or){const Rt=Br.$implicit;m.s9C("value",Rt.Values),m.xp6(1),m.Oqu(Rt.name)}}function Un(or,Br){1&or&&m._UZ(0,"span",100)}function ra(or,Br){if(1&or&&m._UZ(0,"plotly-plot",101),2&or){const Rt=m.oxw();m.Q6J("data",Rt.data1)("layout",Rt.layout1)("config",Rt.config1)}}function Gn(or,Br){1&or&&(m.TgZ(0,"p",91),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&or&&(m.xp6(1),m.Oqu(m.lcZ(2,1,"Dashboard.NoDatafound")))}const Xn=[{path:"",component:(()=>{class or{constructor(Rt,Lt,Pt,Wt,hr,vn,Fn){this.dashboardSandbox=Rt,this.router=Lt,this.configService=Pt,this.titleService=Wt,this.layoutSandbox=hr,this.toastr=vn,this.configs=Fn,this.view=[300,300],this.imageURL=this.configs.imageUrl,this.showXAxis=!0,this.showYAxis=!0,this.gradient=!1,this.showLegend=!0,this.topSellingImage={},this.recentSellingImage={},this.colorScheme={domain:["#704FC4","#4B852C","#B67A3D","#5B6FC8","#25706F"]},this.topProducts="4",this.averagevalue="4",this.newcustomerscount="4",this.totalorderscount="4",this.totalRevenues="4",this.averageConvertionRatios="4",this.customersVisitmonth="3",this.customersVisityear="2020",this.year=[],this.transactionlistyear="2021",this.vendors=[],this.vendorsyear="2020",this.vendorID=null,this.vendorDetails={},this.top10weeklyproductlist=[],this.xvalue=[],this.yvalue=[],this.title="demo",this.xvalue1=[],this.yvalue1=["Jan","Feb","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],this.title1="demo",this.showLabels=!0,this.isDoughnut=!0,this.legendPosition="below",this.salesgraphyear=2021,this.salesgraphmonth="8",this.salesxvalue=[],this.salesyvalue=[],this.resultValue=[],this.toptenweeklysalesdata=[],this.top10weeklycheckeddata=[],this.demoradarChartLabels=["SUN","MON","TUE","WED","THU","FRI","SAT"],this.demoradarChartData=[{data:[46,46,46,46,46,46],label:"Company A"},{data:[48,48,48,48,48,48],label:"Company B"},{data:[52,52,52,52,52,52],label:"Company c"},{data:[30,30,30,30,30,30],label:"Company D"},{data:[30,30,30,30,30,30],label:"Company E"}],this.radarChartType="radar",this.optionsradar={responsive:!1,maintainAspectRatio:!1,legend:{position:"left",responsive:!0,maintainAspectRatio:!0,labels:{boxWidth:15}},scale:{pointLabels:{fontStyle:"bold"}}},this.subscriptions=[],this.currentDate={year:(new Date).getFullYear(),month:(new Date).getMonth()+1,day:(new Date).getDate()},this.salesgraphyear=this.currentDate.year.toString(),this.customersVisityear=this.currentDate.year.toString(),this.transactionlistyear=this.currentDate.year.toString(),this.vendorsyear=this.currentDate.year.toString(),this.salesgraphmonth=this.currentDate.month.toString(),this.customersVisitmonth=this.currentDate.month.toString();for(let Jn=2010;Jn<=this.currentDate.year;Jn++)this.year.push({name:Jn.toString(),Values:Jn.toString()});this.month=[{name:"Jan",Values:"1"},{name:"Feb",Values:"2"},{name:"Mar",Values:"3"},{name:"Apr",Values:"4"},{name:"May",Values:"5"},{name:"June",Values:"6"},{name:"July",Values:"7"},{name:"Aug",Values:"8"},{name:"Sep",Values:"9"},{name:"Oct",Values:"10"},{name:"Nov",Values:"11"},{name:"Dec",Values:"12"}]}ngOnInit(){this.dashboardSandbox.getDashboardCount(),this.titleService.setTitle("Dashboard"),this.dashboardSandbox.getRecentVisitorList(),this.dashboardSandbox.getRecentSellingProductList(),this.dashboardSandbox.getItemPerPageCount(),this.productUrl=this.configs.productUrl,this.averageOrderValue(),this.getTopSellingProductList(),this.totalRevenue(),this.totalOrders(),this.newCustomers(),this.averageConversionRatio(),this.getSalesOrderList(),this.transactionValues(),this.sellerList(),this.salesgraph(),this.toptenweeklyproducts()}viewProduct(Rt){window.open(this.productUrl+"products/productdetails/"+Rt)}viewOrder(Rt){this.router.navigate(["/sales/orders/vieworder",Rt])}topSellingImageLoading(Rt){this.topSellingImage[Rt]=!0}recentSellingImageLoading(Rt){this.recentSellingImage[Rt]=!0}averageOrderValue(){let Rt={limit:10,offset:0,count:0};Rt.duration=this.averagevalue,this.dashboardSandbox.averageOrderValue(Rt)}getTopSellingProductList(){let Rt={limit:10,offset:0,count:0};Rt.duration=this.topProducts,this.dashboardSandbox.getTopSellingProductList(Rt),this.subscriptions.push(this.dashboardSandbox.topSellingProducts$.subscribe(Lt=>{})),Rt.count=!0,this.dashboardSandbox.getTopSellingProductListCount(Rt)}totalRevenue(){let Rt={};Rt.duration=this.totalRevenues,this.dashboardSandbox.totalRevenue(Rt)}totalOrders(){let Rt={};Rt.duration=this.totalorderscount,this.dashboardSandbox.totalOrders(Rt)}newCustomers(){let Rt={};Rt.duration=this.newcustomerscount,this.dashboardSandbox.newCustomers(Rt)}averageConversionRatio(){let Rt={};Rt.duration=this.averageConvertionRatios,this.dashboardSandbox.averageConversionRatio(Rt)}getSalesOrderList(){this.xvalue=[],this.yvalue=[],this.data=[];let Rt={};Rt.month=this.customersVisitmonth,Rt.year=this.customersVisityear,this.dashboardSandbox.getSalesOrderList(Rt),this.subscriptions.push(this.dashboardSandbox.salesOrderList$.subscribe(Lt=>{Lt&&0===this.xvalue.length&&0===this.yvalue.length&&(this.customervisits=Lt,this.customervisits.forEach(Pt=>{this.xvalue.push(Pt.dayOfMonth),this.yvalue.push(JSON.parse(Pt.visitCount))}))})),this.trace1={type:"bar",x:this.xvalue,y:this.yvalue,marker:{color:"blue"}},this.data=[this.trace1],this.layout={height:300,autosize:!0,xaxis:{title:"Days",autorange:!0,showgrid:!1,zeroline:!1,showline:!0,showticklabels:!0},yaxis:{title:"Customer Visits",autorange:!0,showgrid:!1,zeroline:!1,showline:!0},annotations:[{xref:"x1",yref:"y1",x:[1,2,3,4],y:[1,2,3,4],text:"",font:{family:"Arial",size:12,color:"rgb(50, 171, 96)"}}],showticklabels:!1,margin:{l:40,r:20,b:40,t:20,pad:4}},this.config={responsive:!0,displayModeBar:!1}}transactionValues(){this.xvalue1=[],this.layout1={},this.data1=[],this.yvalue1=[];let Lt={};Lt.year=this.transactionlistyear,this.dashboardSandbox.transactionValues(Lt),this.resultValue=[],this.subscriptions.push(this.dashboardSandbox.transactionValues$.subscribe(Pt=>{Pt&&0===this.xvalue1.length&&(this.transactionslist=Pt,this.transactionslist.forEach(Wt=>{Wt&&(this.xvalue1.push(JSON.parse(Wt.ordercount)),this.yvalue1.push(function Rt(Pt){return["January","February","March","April","May","June","July","August","September","October","November","December"][Pt-1]}(Wt.month)),this.resultValue.push(Wt.ordercount+", $ "+Wt.orderAmount))}),this.layout1={height:300,autosize:!0,xaxis:{showgrid:!1,zeroline:!1,showline:!1,showticklabels:!1,fixedrange:!0},yaxis:{showgrid:!1,zeroline:!1,showline:!1,showticklabels:!0,fixedrange:!0},barmode:"stack",annotations:[{xref:"paper",yref:"paper",x:this.xvalue1,y:[""],text:"",font:{family:"Arial",size:12,color:"blue"}}],margin:{l:90,r:60,b:40,t:10,pad:10},bargap:.83},this.layout1.annotations=[],this.config1={responsive:!0,displayModeBar:!1},this.xvalue1.forEach((Wt,hr)=>{let vn={};vn={xref:"x1",yref:"y1",x:this.xvalue1[hr],y:hr,text:Array(30).fill("\xa0").join("")+this.resultValue[hr],font:{family:"Arial",size:12,color:"black"},showarrow:!1},this.layout1.annotations.push(vn)}))})),this.trace11={type:"bar",x:this.xvalue1.reverse(),y:this.yvalue1.reverse(),orientation:"h",text:this.yvalue1.map(String),constrainoutsidetext:!0,textposition:"top center",insidetextanchor:"start",mode:"markers+text",marker:{color:"#14BAE1"}},this.data1=[this.trace11]}sellerList(){}vendor(){let Rt={};Rt.vendorId=this.vendorID,Rt.duration=this.vendorsyear,this.dashboardSandbox.vendor(Rt),this.subscriptions.push(this.dashboardSandbox.vendor$.subscribe(Lt=>{(null==Lt?void 0:Lt.array)&&(this.vendors=Lt.array,this.vendorDetails=Lt.val)}))}salesgraph(){this.salesxvalue=[],this.saleslayout={},this.salesyvalue=[],this.salesdata=[];let Rt={};Rt.year=this.salesgraphyear,Rt.month=this.salesgraphmonth,this.dashboardSandbox.salesgraph(Rt),this.subscriptions.push(this.dashboardSandbox.salesgraph$.subscribe(Lt=>{Lt&&0===this.salesxvalue.length&&0===this.salesyvalue.length&&(this.salesgraphdata=Lt,this.salesgraphdata.forEach(Pt=>{this.salesxvalue.push(Pt.dayOfMonth),this.salesyvalue.push(JSON.parse(Pt.productCount))}))})),this.salestrace={type:"scatter",x:this.salesxvalue,y:this.salesyvalue,mode:"lines",marker:{color:"#FDA677"}},this.salesdata=[this.salestrace],this.saleslayout={height:300,xaxis:{title:"Days",autorange:!0,showgrid:!1,zeroline:!1,showline:!0,showticklabels:!0},yaxis:{title:"Products Sold",autorange:!0,showgrid:!1,zeroline:!1,showline:!0},annotations:[{xref:"x1",yref:"y1",x:[1,2,3,4],y:[1,2,3,4],text:"",font:{family:"Arial",size:12,color:"rgb(50, 171, 96)"}}],showticklabels:!1,margin:{l:40,r:20,b:40,t:20,pad:4}},this.salesconfig={responsive:!0,displayModeBar:!1}}toptenweeklyproducts(){this.dashboardSandbox.toptenweeklyproducts({limit:10,offset:0,count:0,duration:2}),this.subscriptions.push(this.dashboardSandbox.toptenweeklyproducts$.subscribe(Lt=>{if(Lt&&Lt.length>0){let Pt=Lt.map(Wt=>Object.assign(Object.assign({},Wt),{checked:!1}));this.top10weeklyproductlist=Pt,this.top10weeklyproductlist.forEach((Wt,hr)=>{hr<3&&(Wt.checked=!0)}),this.top10weeklyproductdatalist=this.top10weeklyproductlist.filter(Wt=>Wt.checked),this.top10weeklycheckeddata=this.top10weeklyproductdatalist.filter(Wt=>Wt.productId),this.weeklysalesproduct()}}))}checkboxweekly(Rt,Lt){if(1==Rt.target.checked){if(this.top10weeklyproductdatalist.length>2)return this.toastr.error("Please select only three items"),this.top10weeklyproductlist.forEach(Pt=>{Pt.id==Lt.id&&(Lt.checked=!1)}),Rt.target.checked=!1;this.top10weeklyproductdatalist=this.top10weeklyproductlist.filter(Pt=>{if(!0===Pt.checked)return Pt})}else 0==Rt.target.checked&&this.top10weeklyproductdatalist.forEach((Pt,Wt)=>{Pt.id==Lt.id&&this.top10weeklyproductdatalist.splice(Wt,1)});this.weeklysalesproduct()}weeklysalesproduct(){let Rt={};this.top10weeklyproductdatalist=this.top10weeklyproductlist.filter(Lt=>Lt.checked),this.top10weeklycheckeddata=this.top10weeklyproductdatalist.map(Lt=>Lt.productId),Rt.productId=this.top10weeklycheckeddata,this.dashboardSandbox.weeklysalesproduct(Rt),this.subscriptions.push(this.dashboardSandbox.weeklysalesproduct$.subscribe(Lt=>{Lt&&(this.toptenweeklysalesdata=Lt.map((Pt,Wt)=>{let hr={};return hr.label=Pt.productName,hr.data={},hr.data=Pt.value.map(vn=>vn.value),hr}))}))}ngOnDestroy(){this.subscriptions.forEach(Rt=>Rt.unsubscribe())}}return or.\u0275fac=function(Rt){return new(Rt||or)(m.Y36(br),m.Y36(Tr.F0),m.Y36(tt.E),m.Y36(je.Dx),m.Y36(ct.b),m.Y36(ht._W),m.Y36(Me._))},or.\u0275cmp=m.Xpm({type:or,selectors:[["app-dashboard"]],decls:280,vars:281,consts:[[1,"dashboard-wrapper"],[1,"dash-topper","flex"],[1,"dast-col"],[1,"dastc-top","flex"],["name","","id","",1,"ng-sel-width",3,"searchable","clearable","ngModel","ngModelChange","change"],["value","1"],["value","2"],["value","3"],["value","4"],[1,"flex","dastc-vtm"],[1,"dastcbtm-ig"],["src","assets/img/total-revenue.png","alt",""],["class","spinner-border spinner-border-sm ","style","margin-left:20px","aria-hidden","true",4,"ngIf"],["name","","id","",1,"ng-sel-width",3,"searchable","clearable","ngModel","change","ngModelChange"],["src","assets/img/total-orders.png","alt",""],["src","assets/img/new-customers.png","alt",""],[2,"margin-top","8px"],[1,"flex","dastc-vtm",2,"margin-top","23px"],["src","assets/img/total-customers.png","alt",""],[1,"dashboard-main","flex"],[1,"dm-lft"],[1,"dml-top","flex"],[1,"dmlt-roe","flex"],[1,"dmlt-lft-img"],["src","assets/img/top-performing.png","alt",""],[1,"dmlt-lft-cont"],["name","","id","",1,"ng-sel-width",2,"margin-left","7px",3,"searchable","clearable","ngModel","ngModelChange","change"],[1,"dmlt-prd-list"],["class","spinner-border","style","position:absolute; margin-left: 130px; margin-top: 110px;","aria-hidden","true",4,"ngIf"],["class","dmltprdlist-row flex",4,"ngFor","ngForOf"],["style","font-size: 16px;width: 139px;margin: auto;margin-top: 31%;",4,"ngIf"],[1,"dml-btm"],[1,"dml-btm-row","flex"],["class","spinner-border spinner-border-sm ","style","margin-left:120px;margin:auto","aria-hidden","true",4,"ngIf"],["class","dml-btm-col flex",4,"ngFor","ngForOf"],[1,"dm-rht"],[1,"dmr-top","flex"],[1,"dmrt-col"],["class","spinner-border spinner-border-sm ","aria-hidden","true",4,"ngIf"],[1,"flex","dmrtc-rw"],[1,"dmr-btm","flex"],[1,"dmr-btm-lft"],[1,"tabset"],["type","radio","name","tabset","id","tab1","aria-controls","marzen","checked","",3,"click"],["for","tab1"],["type","radio","name","tabset","id","tab2","aria-controls","rauchbier",3,"click"],["for","tab2"],["type","radio","name","tabset","id","tab4","aria-controls","sales",3,"click"],["for","tab4"],[1,"tab-panels"],["id","marzen",1,"tab-panel"],[1,"dmrbtop","flex"],[3,"value",4,"ngFor","ngForOf"],[1,"spinner-wrapper"],[3,"isShow"],[3,"config","data","layout",4,"ngIf"],["class","no-data",4,"ngIf"],["id","rauchbier",1,"tab-panel"],["id","dunkles",1,"tab-panel","dmrtab-vendor"],["name","","id","","placeholder","Choose Vendor",1,"ng-sel-width",3,"searchable","clearable","ngModel","ngModelChange","change"],["class","flex dmrtabvenrow",4,"ngIf"],["id","sales",1,"tab-panel","dmrb-sales"],[1,"rad-chart"],[1,"rad-chart-left"],["class","checkbox-data","style","display: flex;",4,"ngFor","ngForOf"],[1,"rad-chart-right"],["baseChart","","width","300","height","300",3,"datasets","labels","type","options","legend",4,"ngIf"],[1,"dmr-btm-rht"],["class","spinner-border","style","position:absolute; margin-left: 150px; margin-top: 110px;","aria-hidden","true",4,"ngIf"],[3,"data","layout","config",4,"ngIf"],["aria-hidden","true",1,"spinner-border","spinner-border-sm",2,"margin-left","20px"],["aria-hidden","true",1,"spinner-border",2,"position","absolute","margin-left","130px","margin-top","110px"],[1,"dmltprdlist-row","flex"],[1,"dmltprdlist-lft","flex"],[1,"dmltprdlist-lft-img"],["onError","this.src='assets/error-images/Load-icon-Products.png';",3,"src","alt","hidden","load",4,"ngIf"],["src","./assets/error-images/Load-icon-Products.png","alt","error-img",3,"hidden"],[1,"dmltprdlist-lft-cont"],["style","margin-left: -2px",4,"ngIf"],["onError","this.src='assets/error-images/Load-icon-Products.png';",3,"src","alt","hidden","load"],[2,"margin-left","-2px"],[2,"font-size","16px","width","139px","margin","auto","margin-top","31%"],["aria-hidden","true",1,"spinner-border","spinner-border-sm",2,"margin-left","120px","margin","auto"],[1,"dml-btm-col","flex"],[1,"dmlbtmc-img"],["onError","this.src='assets/error-images/Load-icon-Products.png';",2,"border-radius","50%","width","24px","height","24px",3,"src"],[1,"dmlbtmc-content"],[2,"overflow","hidden"],["aria-hidden","true",1,"spinner-border","spinner-border-sm"],[3,"value"],[3,"config","data","layout"],[1,"no-data"],[1,"flex","dmrtabvenrow"],[1,"dmrtabvenlft"],[1,"dashboard-card-content"],[3,"results","view","scheme","gradient","legend","legendPosition","labels","doughnut","trimLabels","arcWidth"],[1,"checkbox-data",2,"display","flex"],["type","checkbox",2,"cursor","pointer","position","relative","top","7px",3,"ngModel","ngModelChange","change"],["placement","top-left",1,"product-name",3,"ngbTooltip"],["baseChart","","width","300","height","300",3,"datasets","labels","type","options","legend"],["aria-hidden","true",1,"spinner-border",2,"position","absolute","margin-left","150px","margin-top","110px"],[3,"data","layout","config"]],template:function(Rt,Lt){if(1&Rt&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4"),m._uU(5),m.ALo(6,"translate"),m.qZA(),m.TgZ(7,"ng-select",4),m.NdJ("ngModelChange",function(Wt){return Lt.totalRevenues=Wt})("change",function(){return Lt.totalRevenue()}),m.TgZ(8,"ng-option",5),m._uU(9),m.ALo(10,"translate"),m.qZA(),m.TgZ(11,"ng-option",6),m._uU(12),m.ALo(13,"translate"),m.qZA(),m.TgZ(14,"ng-option",7),m._uU(15),m.ALo(16,"translate"),m.qZA(),m.TgZ(17,"ng-option",8),m._uU(18),m.ALo(19,"translate"),m.qZA()()(),m._UZ(20,"p"),m.TgZ(21,"div",9)(22,"span",10),m._UZ(23,"img",11),m.qZA(),m.YNc(24,mr,1,0,"span",12),m.ALo(25,"async"),m.TgZ(26,"h2"),m._uU(27),m.ALo(28,"async"),m.ALo(29,"async"),m.ALo(30,"number"),m.ALo(31,"async"),m.qZA()()(),m.TgZ(32,"div",2)(33,"div",3)(34,"h4"),m._uU(35),m.ALo(36,"translate"),m.qZA(),m.TgZ(37,"ng-select",13),m.NdJ("change",function(){return Lt.totalOrders()})("ngModelChange",function(Wt){return Lt.totalorderscount=Wt}),m.TgZ(38,"ng-option",5),m._uU(39),m.ALo(40,"translate"),m.qZA(),m.TgZ(41,"ng-option",6),m._uU(42),m.ALo(43,"translate"),m.qZA(),m.TgZ(44,"ng-option",7),m._uU(45),m.ALo(46,"translate"),m.qZA(),m.TgZ(47,"ng-option",8),m._uU(48),m.ALo(49,"translate"),m.qZA()()(),m.TgZ(50,"div",9)(51,"span",10),m._UZ(52,"img",14),m.qZA(),m.YNc(53,wr,1,0,"span",12),m.ALo(54,"async"),m.TgZ(55,"h2"),m._uU(56),m.ALo(57,"async"),m.qZA()()(),m.TgZ(58,"div",2)(59,"div",3)(60,"h4"),m._uU(61),m.ALo(62,"translate"),m.qZA(),m.TgZ(63,"ng-select",4),m.NdJ("ngModelChange",function(Wt){return Lt.newcustomerscount=Wt})("change",function(){return Lt.newCustomers()}),m.TgZ(64,"ng-option",5),m._uU(65),m.ALo(66,"translate"),m.qZA(),m.TgZ(67,"ng-option",6),m._uU(68),m.ALo(69,"translate"),m.qZA(),m.TgZ(70,"ng-option",7),m._uU(71),m.ALo(72,"translate"),m.qZA(),m.TgZ(73,"ng-option",8),m._uU(74),m.ALo(75,"translate"),m.qZA()()(),m.TgZ(76,"div",9)(77,"span",10),m._UZ(78,"img",15),m.qZA(),m.YNc(79,Wr,1,0,"span",12),m.ALo(80,"async"),m.TgZ(81,"h2"),m._uU(82),m.ALo(83,"async"),m.qZA()()(),m.TgZ(84,"div",2)(85,"div",3)(86,"h4",16),m._uU(87),m.ALo(88,"translate"),m.qZA()(),m.TgZ(89,"div",17)(90,"span",10),m._UZ(91,"img",18),m.qZA(),m.YNc(92,Kr,1,0,"span",12),m.ALo(93,"async"),m.TgZ(94,"h2"),m._uU(95),m.ALo(96,"async"),m.qZA()()()(),m.TgZ(97,"div",19)(98,"div",20)(99,"div",21)(100,"div",22)(101,"div",23),m._UZ(102,"img",24),m.qZA(),m.TgZ(103,"div",25)(104,"h3"),m._uU(105),m.ALo(106,"translate"),m.qZA(),m.TgZ(107,"h4"),m._uU(108),m.ALo(109,"async"),m.ALo(110,"translate"),m.qZA()(),m.TgZ(111,"ng-select",26),m.NdJ("ngModelChange",function(Wt){return Lt.topProducts=Wt})("change",function(){return Lt.getTopSellingProductList()}),m.TgZ(112,"ng-option",5),m._uU(113),m.ALo(114,"translate"),m.qZA(),m.TgZ(115,"ng-option",6),m._uU(116),m.ALo(117,"translate"),m.qZA(),m.TgZ(118,"ng-option",7),m._uU(119),m.ALo(120,"translate"),m.qZA(),m.TgZ(121,"ng-option",8),m._uU(122),m.ALo(123,"translate"),m.qZA()()(),m.TgZ(124,"div",27),m.YNc(125,Cr,1,0,"span",28),m.ALo(126,"async"),m.YNc(127,Qt,13,12,"div",29),m.ALo(128,"async"),m.YNc(129,ir,3,3,"h2",30),m.ALo(130,"async"),m.qZA()(),m.TgZ(131,"div",31)(132,"h3"),m._uU(133),m.ALo(134,"translate"),m.qZA(),m.TgZ(135,"div",32),m.YNc(136,Or,1,0,"span",33),m.ALo(137,"async"),m.YNc(138,qr,10,4,"div",34),m.ALo(139,"async"),m.qZA()()(),m.TgZ(140,"div",35)(141,"div",36)(142,"div",37)(143,"h4"),m._uU(144),m.ALo(145,"translate"),m.qZA(),m.YNc(146,Ir,1,0,"span",38),m.ALo(147,"async"),m.TgZ(148,"div",39)(149,"h2"),m._uU(150),m.ALo(151,"async"),m.qZA()()(),m.TgZ(152,"div",37)(153,"h4"),m._uU(154),m.ALo(155,"translate"),m.qZA(),m.TgZ(156,"div",39),m.YNc(157,kr,1,0,"span",12),m.ALo(158,"async"),m.TgZ(159,"h2"),m._uU(160),m.ALo(161,"currencysymbol"),m.ALo(162,"async"),m.ALo(163,"async"),m.qZA(),m.TgZ(164,"ng-select",13),m.NdJ("change",function(){return Lt.averageOrderValue()})("ngModelChange",function(Wt){return Lt.averagevalue=Wt}),m.TgZ(165,"ng-option",5),m._uU(166),m.ALo(167,"translate"),m.qZA(),m.TgZ(168,"ng-option",6),m._uU(169),m.ALo(170,"translate"),m.qZA(),m.TgZ(171,"ng-option",7),m._uU(172),m.ALo(173,"translate"),m.qZA(),m.TgZ(174,"ng-option",8),m._uU(175),m.ALo(176,"translate"),m.qZA()()()(),m.TgZ(177,"div",37)(178,"h4"),m._uU(179),m.ALo(180,"translate"),m.qZA(),m.TgZ(181,"div",39),m.YNc(182,Zr,1,0,"span",12),m.ALo(183,"async"),m.TgZ(184,"h2"),m._uU(185),m.ALo(186,"async"),m.qZA(),m.TgZ(187,"ng-select",4),m.NdJ("ngModelChange",function(Wt){return Lt.averageConvertionRatios=Wt})("change",function(){return Lt.averageConversionRatio()}),m.TgZ(188,"ng-option",5),m._uU(189),m.ALo(190,"translate"),m.qZA(),m.TgZ(191,"ng-option",6),m._uU(192),m.ALo(193,"translate"),m.qZA(),m.TgZ(194,"ng-option",7),m._uU(195),m.ALo(196,"translate"),m.qZA(),m.TgZ(197,"ng-option",8),m._uU(198),m.ALo(199,"translate"),m.qZA()()()()(),m.TgZ(200,"div",40)(201,"div",41)(202,"div",42)(203,"input",43),m.NdJ("click",function(){return Lt.salesgraph()}),m.qZA(),m.TgZ(204,"label",44),m._uU(205),m.ALo(206,"translate"),m.qZA(),m.TgZ(207,"input",45),m.NdJ("click",function(){return Lt.getSalesOrderList()}),m.qZA(),m.TgZ(208,"label",46),m._uU(209),m.ALo(210,"translate"),m.qZA(),m.TgZ(211,"input",47),m.NdJ("click",function(){return Lt.weeklysalesproduct()}),m.qZA(),m.TgZ(212,"label",48),m._uU(213),m.ALo(214,"translate"),m.qZA(),m.TgZ(215,"div",49)(216,"section",50)(217,"div",51)(218,"ng-select",4),m.NdJ("ngModelChange",function(Wt){return Lt.salesgraphyear=Wt})("change",function(){return Lt.salesgraph()}),m.YNc(219,An,2,2,"ng-option",52),m.qZA(),m.TgZ(220,"ng-select",4),m.NdJ("ngModelChange",function(Wt){return Lt.salesgraphmonth=Wt})("change",function(){return Lt.salesgraph()}),m.YNc(221,wn,2,2,"ng-option",52),m.qZA()(),m.TgZ(222,"div",53),m._UZ(223,"app-global-loader",54),m.ALo(224,"async"),m.qZA(),m.YNc(225,Zn,1,3,"plotly-plot",55),m.ALo(226,"async"),m.ALo(227,"async"),m.YNc(228,Ln,3,3,"p",56),m.ALo(229,"async"),m.ALo(230,"async"),m.qZA(),m.TgZ(231,"section",57)(232,"div",51)(233,"ng-select",4),m.NdJ("ngModelChange",function(Wt){return Lt.customersVisityear=Wt})("change",function(){return Lt.getSalesOrderList()}),m.YNc(234,Wn,2,2,"ng-option",52),m.qZA(),m.TgZ(235,"ng-select",4),m.NdJ("ngModelChange",function(Wt){return Lt.customersVisitmonth=Wt})("change",function(){return Lt.getSalesOrderList()}),m.YNc(236,$n,2,2,"ng-option",52),m.qZA()(),m.TgZ(237,"div",53),m._UZ(238,"app-global-loader",54),m.ALo(239,"async"),m.qZA(),m.YNc(240,wa,1,3,"plotly-plot",55),m.ALo(241,"async"),m.ALo(242,"async"),m.YNc(243,ma,3,3,"p",56),m.ALo(244,"async"),m.ALo(245,"async"),m.qZA(),m.TgZ(246,"section",58)(247,"div",51)(248,"ng-select",59),m.NdJ("ngModelChange",function(Wt){return Lt.vendorID=Wt})("change",function(){return Lt.vendor()}),m.YNc(249,$a,2,2,"ng-option",52),m.qZA(),m.TgZ(250,"ng-select",4),m.NdJ("ngModelChange",function(Wt){return Lt.vendorsyear=Wt})("change",function(){return Lt.vendor()}),m.YNc(251,Ja,2,2,"ng-option",52),m.qZA()(),m.TgZ(252,"div",53),m._UZ(253,"app-global-loader",54),m.ALo(254,"async"),m.qZA(),m.YNc(255,Va,18,27,"div",60),m.ALo(256,"async"),m.YNc(257,ai,2,0,"div",56),m.qZA(),m.TgZ(258,"section",61)(259,"div",62)(260,"div",63),m.YNc(261,Er,4,3,"p",64),m.qZA(),m.TgZ(262,"div",65),m.YNc(263,gn,1,5,"canvas",66),m.qZA()(),m.YNc(264,dn,2,0,"div",56),m.qZA()()()(),m.TgZ(265,"div",67)(266,"div",51)(267,"h3"),m._uU(268),m.ALo(269,"translate"),m.qZA(),m.TgZ(270,"ng-select",4),m.NdJ("ngModelChange",function(Wt){return Lt.transactionlistyear=Wt})("change",function(){return Lt.transactionValues()}),m.YNc(271,kn,2,2,"ng-option",52),m.qZA()(),m.YNc(272,Un,1,0,"span",68),m.ALo(273,"async"),m.YNc(274,ra,1,3,"plotly-plot",69),m.ALo(275,"async"),m.ALo(276,"async"),m.YNc(277,Gn,3,3,"p",56),m.ALo(278,"async"),m.ALo(279,"async"),m.qZA()()()()()),2&Rt){let Pt;m.xp6(5),m.Oqu(m.lcZ(6,119,"Dashboard.totalRevenue")),m.xp6(2),m.Q6J("searchable",!1)("clearable",!1)("ngModel",Lt.totalRevenues),m.xp6(2),m.Oqu(m.lcZ(10,121,"Dashboard.today")),m.xp6(3),m.Oqu(m.lcZ(13,123,"Dashboard.thisWeek")),m.xp6(3),m.Oqu(m.lcZ(16,125,"Dashboard.thisMonth")),m.xp6(3),m.Oqu(m.lcZ(19,127,"Dashboard.thisYear")),m.xp6(6),m.Q6J("ngIf",m.lcZ(25,129,Lt.dashboardSandbox.totalRevenueLoading$)),m.xp6(3),m.Oqu(m.lcZ(28,131,Lt.dashboardSandbox.totalRevenue$).toString()<0?-1*m.lcZ(29,133,Lt.dashboardSandbox.totalRevenue$).toString():m.xi3(30,135,m.lcZ(31,138,Lt.dashboardSandbox.totalRevenue$).toString(),"1.0-0")),m.xp6(8),m.hij("",m.lcZ(36,140,"Dashboard.totalOrders")," "),m.xp6(2),m.Q6J("searchable",!1)("clearable",!1)("ngModel",Lt.totalorderscount),m.xp6(2),m.Oqu(m.lcZ(40,142,"Dashboard.today")),m.xp6(3),m.Oqu(m.lcZ(43,144,"Dashboard.thisWeek")),m.xp6(3),m.Oqu(m.lcZ(46,146,"Dashboard.thisMonth")),m.xp6(3),m.Oqu(m.lcZ(49,148,"Dashboard.thisYear")),m.xp6(5),m.Q6J("ngIf",m.lcZ(54,150,Lt.dashboardSandbox.totalOrdersLoading$)),m.xp6(3),m.Oqu(null==(Pt=m.lcZ(57,152,Lt.dashboardSandbox.totalOrders$))?null:Pt.ordersCount),m.xp6(5),m.Oqu(m.lcZ(62,154,"Dashboard.newCustomers")),m.xp6(2),m.Q6J("searchable",!1)("clearable",!1)("ngModel",Lt.newcustomerscount),m.xp6(2),m.Oqu(m.lcZ(66,156,"Dashboard.today")),m.xp6(3),m.Oqu(m.lcZ(69,158,"Dashboard.thisWeek")),m.xp6(3),m.Oqu(m.lcZ(72,160,"Dashboard.thisMonth")),m.xp6(3),m.Oqu(m.lcZ(75,162,"Dashboard.thisYear")),m.xp6(5),m.Q6J("ngIf",m.lcZ(80,164,Lt.dashboardSandbox.newCustomersLoading$)),m.xp6(3),m.Oqu(m.lcZ(83,166,Lt.dashboardSandbox.newCustomers$)),m.xp6(5),m.Oqu(m.lcZ(88,168,"Dashboard.totalCustomers")),m.xp6(5),m.Q6J("ngIf",m.lcZ(93,170,Lt.dashboardSandbox.dashboardCountLoading$)),m.xp6(3),m.Oqu(m.lcZ(96,172,Lt.dashboardSandbox.dashboardCount$).customers),m.xp6(10),m.Oqu(m.lcZ(106,174,"Dashboard.TopPerformingProducts")),m.xp6(3),m.AsE("",m.lcZ(109,176,Lt.dashboardSandbox.getTopSellingProductListCount$)," ",m.lcZ(110,178,"Dashboard.products"),""),m.xp6(3),m.Q6J("searchable",!1)("clearable",!1)("ngModel",Lt.topProducts),m.xp6(2),m.Oqu(m.lcZ(114,180,"Dashboard.today")),m.xp6(3),m.Oqu(m.lcZ(117,182,"Dashboard.thisWeek")),m.xp6(3),m.Oqu(m.lcZ(120,184,"Dashboard.thisMonth")),m.xp6(3),m.Oqu(m.lcZ(123,186,"Dashboard.thisYear")),m.xp6(3),m.Q6J("ngIf",m.lcZ(126,188,Lt.dashboardSandbox.topSellingProductsLoading$)),m.xp6(2),m.Q6J("ngForOf",m.lcZ(128,190,Lt.dashboardSandbox.topSellingProducts$)),m.xp6(2),m.Q6J("ngIf",0===m.lcZ(130,192,Lt.dashboardSandbox.getTopSellingProductListCount$)),m.xp6(4),m.hij("",m.lcZ(134,194,"Dashboard.repeatedCustomers")," "),m.xp6(3),m.Q6J("ngIf",m.lcZ(137,196,Lt.dashboardSandbox.recentVisitorListLoading$)),m.xp6(2),m.Q6J("ngForOf",m.lcZ(139,198,Lt.dashboardSandbox.recentVisitorList$)),m.xp6(6),m.Oqu(m.lcZ(145,200,"catalog.categories.TotalProduct")),m.xp6(2),m.Q6J("ngIf",m.lcZ(147,202,Lt.dashboardSandbox.dashboardCountLoading$)),m.xp6(4),m.Oqu(m.lcZ(151,204,Lt.dashboardSandbox.dashboardCount$).products),m.xp6(4),m.Oqu(m.lcZ(155,206,"Dashboard.averageorderValue")),m.xp6(3),m.Q6J("ngIf",m.lcZ(158,208,Lt.dashboardSandbox.averageOrderValueLoading$)),m.xp6(3),m.Oqu(m.xi3(161,210,m.lcZ(162,213,Lt.dashboardSandbox.averageOrderValue$),m.lcZ(163,215,Lt.layoutSandbox.settings$))),m.xp6(4),m.Q6J("searchable",!1)("clearable",!1)("ngModel",Lt.averagevalue),m.xp6(2),m.Oqu(m.lcZ(167,217,"Dashboard.today")),m.xp6(3),m.Oqu(m.lcZ(170,219,"Dashboard.thisWeek")),m.xp6(3),m.Oqu(m.lcZ(173,221,"Dashboard.thisMonth")),m.xp6(3),m.Oqu(m.lcZ(176,223,"Dashboard.thisYear")),m.xp6(4),m.Oqu(m.lcZ(180,225,"Dashboard.averageConversionRatio")),m.xp6(3),m.Q6J("ngIf",m.lcZ(183,227,Lt.dashboardSandbox.averageConversionRatioLoading$)),m.xp6(3),m.hij("",m.lcZ(186,229,Lt.dashboardSandbox.averageConversionRatio$),"%"),m.xp6(2),m.Q6J("searchable",!1)("clearable",!1)("ngModel",Lt.averageConvertionRatios),m.xp6(2),m.Oqu(m.lcZ(190,231,"Dashboard.today")),m.xp6(3),m.Oqu(m.lcZ(193,233,"Dashboard.thisWeek")),m.xp6(3),m.Oqu(m.lcZ(196,235,"Dashboard.thisMonth")),m.xp6(3),m.Oqu(m.lcZ(199,237,"Dashboard.thisYear")),m.xp6(7),m.Oqu(m.lcZ(206,239,"Sales.Orders.Sales")),m.xp6(4),m.Oqu(m.lcZ(210,241,"Dashboard.customerVisits")),m.xp6(4),m.Oqu(m.lcZ(214,243,"Dashboard.10weeklySales")),m.xp6(5),m.Q6J("searchable",!1)("clearable",!1)("ngModel",Lt.salesgraphyear),m.xp6(1),m.Q6J("ngForOf",Lt.year),m.xp6(1),m.Q6J("searchable",!1)("clearable",!1)("ngModel",Lt.salesgraphmonth),m.xp6(1),m.Q6J("ngForOf",Lt.month),m.xp6(2),m.Q6J("isShow",m.lcZ(224,245,Lt.dashboardSandbox.salesgraphLoading$)),m.xp6(2),m.Q6J("ngIf",m.lcZ(226,247,Lt.dashboardSandbox.salesgraph$).length>0&&m.lcZ(227,249,Lt.dashboardSandbox.salesgraphLoaded$)),m.xp6(3),m.Q6J("ngIf",0==m.lcZ(229,251,Lt.dashboardSandbox.salesgraph$).length&&m.lcZ(230,253,Lt.dashboardSandbox.salesgraphLoaded$)),m.xp6(5),m.Q6J("searchable",!1)("clearable",!1)("ngModel",Lt.customersVisityear),m.xp6(1),m.Q6J("ngForOf",Lt.year),m.xp6(1),m.Q6J("searchable",!1)("clearable",!1)("ngModel",Lt.customersVisitmonth),m.xp6(1),m.Q6J("ngForOf",Lt.month),m.xp6(2),m.Q6J("isShow",m.lcZ(239,255,Lt.dashboardSandbox.salesOrderListLoading$)),m.xp6(2),m.Q6J("ngIf",m.lcZ(241,257,Lt.dashboardSandbox.salesOrderList$).length>0&&m.lcZ(242,259,Lt.dashboardSandbox.salesOrderListLoaded$)),m.xp6(3),m.Q6J("ngIf",0===m.lcZ(244,261,Lt.dashboardSandbox.salesOrderList$).length&&m.lcZ(245,263,Lt.dashboardSandbox.salesOrderListLoaded$)),m.xp6(5),m.Q6J("searchable",!1)("clearable",!1)("ngModel",Lt.vendorID),m.xp6(1),m.Q6J("ngForOf",Lt.vendorList),m.xp6(1),m.Q6J("searchable",!1)("clearable",!1)("ngModel",Lt.vendorsyear),m.xp6(1),m.Q6J("ngForOf",Lt.year),m.xp6(2),m.Q6J("isShow",m.lcZ(254,265,Lt.dashboardSandbox.vendorLoading$)),m.xp6(2),m.Q6J("ngIf",Lt.vendorDetails.productCount>0&&!m.lcZ(256,267,Lt.dashboardSandbox.vendorLoading$)),m.xp6(2),m.Q6J("ngIf",0===Lt.vendorDetails.productCount),m.xp6(4),m.Q6J("ngForOf",Lt.top10weeklyproductlist),m.xp6(2),m.Q6J("ngIf",Lt.top10weeklyproductlist.length>0),m.xp6(1),m.Q6J("ngIf",0===Lt.top10weeklyproductlist.length),m.xp6(4),m.Oqu(m.lcZ(269,269,"Dashboard.transaction")),m.xp6(2),m.Q6J("searchable",!1)("clearable",!1)("ngModel",Lt.transactionlistyear),m.xp6(1),m.Q6J("ngForOf",Lt.year),m.xp6(1),m.Q6J("ngIf",m.lcZ(273,271,Lt.dashboardSandbox.transactionValuesLoading$)),m.xp6(2),m.Q6J("ngIf",m.lcZ(275,273,Lt.dashboardSandbox.transactionValues$).length>0&&m.lcZ(276,275,Lt.dashboardSandbox.transactionValuesLoaded$)),m.xp6(3),m.Q6J("ngIf",0==m.lcZ(278,277,Lt.dashboardSandbox.transactionValues$).length&&m.lcZ(279,279,Lt.dashboardSandbox.transactionValuesLoaded$))}},directives:[Se.w9,ie.JJ,ie.On,Se.jq,Ko.O5,Ko.sg,Je.A,pt,pr.JU,ie.Wl,Jr._L,Lr.jh],pipes:[Ar.X$,Ko.Ov,Ko.JJ,Ko.OU,en.G],styles:["[_nghost-%COMP%]     .ng-select.ng-select-single{width:106px;font-size:12px;font-weight:600}[_nghost-%COMP%]     .ng-select .ng-option{font-size:small}[_nghost-%COMP%]     .ng-select .ng-dropdown-panel.ng-select-bottom{margin-left:0;width:-moz-fit-content;width:fit-content;width:100%}[_nghost-%COMP%]     .ng-select .ng-dropdown-panel.ng-select-top{margin-left:0;width:-moz-fit-content;width:fit-content;width:100%}.dashboard-card-content[_ngcontent-%COMP%]{width:calc(100% - 150px);height:calc(100% - 30px);display:flex;flex-flow:column;justify-content:center;align-items:center;box-sizing:border-box}.no-data[_ngcontent-%COMP%]{padding:20px;text-align:center}.checkbox-data[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.checkbox-data[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:5px;font-size:12px;color:#000}.no-data[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:30px}.rad-chart[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.rad-chart-left[_ngcontent-%COMP%]{width:200px}.rad-chart-right[_ngcontent-%COMP%]{width:calc(100% - 150px);display:flex;justify-content:center}.product-name[_ngcontent-%COMP%]{text-overflow:ellipsis;width:100px;overflow:hidden;white-space:nowrap}.spinner-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;justify-items:center}"]}),or})()}];let pa=(()=>{class or{}return or.\u0275fac=function(Rt){return new(Rt||or)},or.\u0275mod=m.oAB({type:or}),or.\u0275inj=m.cJS({imports:[[Tr.Bz.forChild(Xn)],Tr.Bz]}),or})();var oi=Ai(6693),Ht=Ai(7829),dr=Ai(2476),rn=Ai(7638);Dt.plotlyjs=rn,Gt.setPlotlyVersion("1.55.2"),Gt.setPlotlyBundle("basic");let ln=(()=>{class or{}return or.\u0275fac=function(Rt){return new(Rt||or)},or.\u0275mod=m.oAB({type:or}),or.\u0275inj=m.cJS({providers:[E,br],imports:[[Ko.ez,dr.K,v.o,ie.u5,ie.UX,oi.q,pa,pr.a4,Lr.vQ,ae.sQ.forFeature([Vt]),Ar.aw.forChild({loader:{provide:Ar.Zw,useFactory:Ht.gS,deps:[_.eN]}}),Dt]]}),or})()},3052:(Jf,Ra,Ai)=>{"use strict";Ai.d(Ra,{A:()=>_});var Ko=Ai(5e3),v=Ai(9932),ie=Ai(9808);function ae(k,m){1&k&&(Ko.TgZ(0,"div",1)(1,"div",2),Ko._UZ(2,"img",3),Ko.qZA()())}let _=(()=>{class k{constructor(E){this.httpStatus=E,this.subscriptions=[],this.loader=!1,this.getHttpResponse()}ngOnInit(){}getHttpResponse(){this.subscriptions.push(this.httpStatus.getHttpStatus().subscribe(E=>{this.loader=E}))}ngOnDestroy(){this.subscriptions.forEach(E=>E.unsubscribe())}}return k.\u0275fac=function(E){return new(E||k)(Ko.Y36(v.Z))},k.\u0275cmp=Ko.Xpm({type:k,selectors:[["app-global-loader"]],inputs:{isShow:"isShow"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"row"],["width","80px","height","80px","src","./assets/loader/Spurt-commerce-Loader-2.1.gif"]],template:function(E,e){1&E&&Ko.YNc(0,ae,3,0,"div",0),2&E&&Ko.Q6J("ngIf",e.isShow)},directives:[ie.O5],styles:['#loader[_ngcontent-%COMP%]{bottom:0;height:175px;left:0;margin:auto;position:absolute;right:0;top:0;width:175px}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{bottom:0;height:100%;left:0;margin:auto;position:absolute;right:0;top:0;width:87.5px}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:before{border-radius:100%;content:"";height:87.5px;left:0;position:absolute;right:0;top:0;transform:scale(0);width:87.5px}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+1){transform:rotate(45deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+1):before{animation:.8s linear .1s normal none infinite running load;background:#00ff80 none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+2){transform:rotate(90deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+2):before{animation:.8s linear .2s normal none infinite running load;background:#00ffea none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+3){transform:rotate(135deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+3):before{animation:.8s linear .3s normal none infinite running load;background:#00aaff none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+4){transform:rotate(180deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+4):before{animation:.8s linear .4s normal none infinite running load;background:#0040ff none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+5){transform:rotate(225deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+5):before{animation:.8s linear .5s normal none infinite running load;background:#2a00ff none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+6){transform:rotate(270deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+6):before{animation:.8s linear .6s normal none infinite running load;background:#9500ff none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+7){transform:rotate(315deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+7):before{animation:.8s linear .7s normal none infinite running load;background:magenta none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+8){transform:rotate(360deg)}#loader[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-child(7n+8):before{animation:.8s linear .8s normal none infinite running load;background:#ff0095 none repeat scroll 0 0}#loader[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{background-position:50% 50%;background-repeat:no-repeat;bottom:-40px;height:20px;left:0;position:absolute;right:0;width:180px}@keyframes load{to{opacity:0;transform:scale(1)}}.spinner-message[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{text-align:center}']}),k})()},7638:Jf=>{Jf.exports=function v(ie,ae,_){function k(e,c){if(!ae[e]){if(!ie[e]){if(m)return m(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var t=ae[e]={exports:{}};ie[e][0].call(t.exports,function(i){return k(ie[e][1][i]||i)},t,t.exports,v,ie,ae,_)}return ae[e].exports}for(var m=void 0,E=0;E<_.length;E++)k(_[E]);return k}({1:[function(v,ie,ae){"use strict";var _=v("../src/lib"),k={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var m in k){var E=m.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");_.addStyleRule(E,k[m])}},{"../src/lib":503}],2:[function(v,ie,ae){"use strict";ie.exports=v("../src/transforms/aggregate")},{"../src/transforms/aggregate":1118}],3:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/bar")},{"../src/traces/bar":656}],4:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/barpolar")},{"../src/traces/barpolar":669}],5:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/box")},{"../src/traces/box":679}],6:[function(v,ie,ae){"use strict";ie.exports=v("../src/components/calendars")},{"../src/components/calendars":364}],7:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/candlestick")},{"../src/traces/candlestick":688}],8:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/carpet")},{"../src/traces/carpet":707}],9:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/choropleth")},{"../src/traces/choropleth":721}],10:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":728}],11:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/cone")},{"../src/traces/cone":734}],12:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/contour")},{"../src/traces/contour":749}],13:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":760}],14:[function(v,ie,ae){"use strict";ie.exports=v("../src/core")},{"../src/core":481}],15:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":768}],16:[function(v,ie,ae){"use strict";ie.exports=v("../src/transforms/filter")},{"../src/transforms/filter":1119}],17:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/funnel")},{"../src/traces/funnel":778}],18:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/funnelarea")},{"../src/traces/funnelarea":787}],19:[function(v,ie,ae){"use strict";ie.exports=v("../src/transforms/groupby")},{"../src/transforms/groupby":1120}],20:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/heatmap")},{"../src/traces/heatmap":800}],21:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":811}],22:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/histogram")},{"../src/traces/histogram":823}],23:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/histogram2d")},{"../src/traces/histogram2d":829}],24:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":833}],25:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/icicle")},{"../src/traces/icicle":839}],26:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/image")},{"../src/traces/image":852}],27:[function(v,ie,ae){"use strict";var _=v("./core");_.register([v("./bar"),v("./box"),v("./heatmap"),v("./histogram"),v("./histogram2d"),v("./histogram2dcontour"),v("./contour"),v("./scatterternary"),v("./violin"),v("./funnel"),v("./waterfall"),v("./image"),v("./pie"),v("./sunburst"),v("./treemap"),v("./icicle"),v("./funnelarea"),v("./scatter3d"),v("./surface"),v("./isosurface"),v("./volume"),v("./mesh3d"),v("./cone"),v("./streamtube"),v("./scattergeo"),v("./choropleth"),v("./scattergl"),v("./splom"),v("./pointcloud"),v("./heatmapgl"),v("./parcoords"),v("./parcats"),v("./scattermapbox"),v("./choroplethmapbox"),v("./densitymapbox"),v("./sankey"),v("./indicator"),v("./table"),v("./carpet"),v("./scattercarpet"),v("./contourcarpet"),v("./ohlc"),v("./candlestick"),v("./scatterpolar"),v("./scatterpolargl"),v("./barpolar"),v("./scattersmith"),v("./aggregate"),v("./filter"),v("./groupby"),v("./sort"),v("./calendars")]),ie.exports=_},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/indicator")},{"../src/traces/indicator":860}],29:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/isosurface")},{"../src/traces/isosurface":866}],30:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/mesh3d")},{"../src/traces/mesh3d":871}],31:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/ohlc")},{"../src/traces/ohlc":876}],32:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/parcats")},{"../src/traces/parcats":885}],33:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/parcoords")},{"../src/traces/parcoords":896}],34:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/pie")},{"../src/traces/pie":907}],35:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/pointcloud")},{"../src/traces/pointcloud":916}],36:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/sankey")},{"../src/traces/sankey":922}],37:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/scatter3d")},{"../src/traces/scatter3d":960}],38:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":967}],39:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/scattergeo")},{"../src/traces/scattergeo":975}],40:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/scattergl")},{"../src/traces/scattergl":989}],41:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":999}],42:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1007}],43:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1015}],44:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/scattersmith")},{"../src/traces/scattersmith":1022}],45:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/scatterternary")},{"../src/traces/scatterternary":1030}],46:[function(v,ie,ae){"use strict";ie.exports=v("../src/transforms/sort")},{"../src/transforms/sort":1122}],47:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/splom")},{"../src/traces/splom":1040}],48:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/streamtube")},{"../src/traces/streamtube":1048}],49:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/sunburst")},{"../src/traces/sunburst":1056}],50:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/surface")},{"../src/traces/surface":1065}],51:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/table")},{"../src/traces/table":1073}],52:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/treemap")},{"../src/traces/treemap":1084}],53:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/violin")},{"../src/traces/violin":1097}],54:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/volume")},{"../src/traces/volume":1105}],55:[function(v,ie,ae){"use strict";ie.exports=v("../src/traces/waterfall")},{"../src/traces/waterfall":1113}],56:[function(v,ie,ae){var _,k;_=this,k=function(_,k,m,E,e){"use strict";function c(pe){return pe.target.depth}function t(pe,xe){return pe.sourceLinks.length?pe.depth:xe-1}function a(pe){return function(){return pe}}e=e&&e.hasOwnProperty("default")?e.default:e;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(pe){return typeof pe}:function(pe){return pe&&"function"==typeof Symbol&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe};function g(pe,xe){return b(pe.source,xe.source)||pe.index-xe.index}function s(pe,xe){return b(pe.target,xe.target)||pe.index-xe.index}function b(pe,xe){return pe.partOfCycle===xe.partOfCycle?pe.y0-xe.y0:"top"===pe.circularLinkType||"bottom"===xe.circularLinkType?-1:1}function x(pe){return pe.value}function S(pe){return(pe.y0+pe.y1)/2}function p(pe){return S(pe.source)}function w(pe){return S(pe.target)}function l(pe){return pe.index}function y(pe){return pe.nodes}function A(pe){return pe.links}function T(pe,xe){var ke=pe.get(xe);if(!ke)throw new Error("missing: "+xe);return ke}function M(pe,xe){return xe(pe)}var f=25,u=10;function C(pe,xe,ke){var we=0;if(null===ke){for(var de=[],be=0;be<pe.links.length;be++){var Le=pe.links[be],De=Le.source.index,ye=Le.target.index;de[De]||(de[De]=[]),de[ye]||(de[ye]=[]),-1===de[De].indexOf(ye)&&de[De].push(ye)}var Ce=e(de);Ce.sort(function(Be,Ie){return Be.length-Ie.length});var Fe={};for(be=0;be<Ce.length;be++){var Ue=Ce[be].slice(-2);Fe[Ue[0]]||(Fe[Ue[0]]={}),Fe[Ue[0]][Ue[1]]=!0}pe.links.forEach(function(Be){var Ie=Be.target.index,nt=Be.source.index;Ie===nt||Fe[nt]&&Fe[nt][Ie]?(Be.circular=!0,Be.circularLinkID=we,we+=1):Be.circular=!1})}else pe.links.forEach(function(Be){Be.source[ke]<Be.target[ke]?Be.circular=!1:(Be.circular=!0,Be.circularLinkID=we,we+=1)})}function R(pe,xe){var ke=0,we=0;pe.links.forEach(function(de){de.circular&&(de.circularLinkType=de.source.circularLinkType||de.target.circularLinkType?de.source.circularLinkType?de.source.circularLinkType:de.target.circularLinkType:ke<we?"top":"bottom","top"==de.circularLinkType?ke+=1:we+=1,pe.nodes.forEach(function(be){(M(be,xe)==M(de.source,xe)||M(be,xe)==M(de.target,xe))&&(be.circularLinkType=de.circularLinkType)}))}),pe.links.forEach(function(de){de.circular&&(de.source.circularLinkType==de.target.circularLinkType&&(de.circularLinkType=de.source.circularLinkType),le(de,xe)&&(de.circularLinkType=de.source.circularLinkType))})}function z(pe){var xe=Math.abs(pe.y1-pe.y0),ke=Math.abs(pe.target.x0-pe.source.x1);return Math.atan(ke/xe)}function O(pe,xe){return!(pe.source.column<xe.target.column||pe.target.column>xe.source.column)}function I(pe,xe){var ke=0;pe.sourceLinks.forEach(function(de){ke=de.circular&&!le(de,xe)?ke+1:ke});var we=0;return pe.targetLinks.forEach(function(de){we=de.circular&&!le(de,xe)?we+1:we}),ke+we}function F(pe){var ke=0;pe.source.sourceLinks.forEach(function(be){ke=be.circular?ke+1:ke});var de=0;return pe.target.targetLinks.forEach(function(be){de=be.circular?de+1:de}),!(ke>1||de>1)}function D(pe,xe,ke){return pe.sort(X),pe.forEach(function(we,de){var be=0;if(le(we,ke)&&F(we))we.circularPathData.verticalBuffer=be+we.width/2;else{for(var Le=0;Le<de;Le++)if(O(pe[de],pe[Le])){var De=pe[Le].circularPathData.verticalBuffer+pe[Le].width/2+xe;be=De>be?De:be}we.circularPathData.verticalBuffer=be+we.width/2}}),pe}function N(pe,xe,ke,we){var be=k.min(pe.links,function(ye){return ye.source.y0});pe.links.forEach(function(ye){ye.circular&&(ye.circularPathData={})}),D(pe.links.filter(function(ye){return"top"==ye.circularLinkType}),xe,we),D(pe.links.filter(function(ye){return"bottom"==ye.circularLinkType}),xe,we),pe.links.forEach(function(ye){if(ye.circular){if(ye.circularPathData.arcRadius=ye.width+u,ye.circularPathData.leftNodeBuffer=5,ye.circularPathData.rightNodeBuffer=5,ye.circularPathData.sourceWidth=ye.source.x1-ye.source.x0,ye.circularPathData.sourceX=ye.source.x0+ye.circularPathData.sourceWidth,ye.circularPathData.targetX=ye.target.x0,ye.circularPathData.sourceY=ye.y0,ye.circularPathData.targetY=ye.y1,le(ye,we)&&F(ye))ye.circularPathData.leftSmallArcRadius=u+ye.width/2,ye.circularPathData.leftLargeArcRadius=u+ye.width/2,ye.circularPathData.rightSmallArcRadius=u+ye.width/2,ye.circularPathData.rightLargeArcRadius=u+ye.width/2,"bottom"==ye.circularLinkType?(ye.circularPathData.verticalFullExtent=ye.source.y1+f+ye.circularPathData.verticalBuffer,ye.circularPathData.verticalLeftInnerExtent=ye.circularPathData.verticalFullExtent-ye.circularPathData.leftLargeArcRadius,ye.circularPathData.verticalRightInnerExtent=ye.circularPathData.verticalFullExtent-ye.circularPathData.rightLargeArcRadius):(ye.circularPathData.verticalFullExtent=ye.source.y0-f-ye.circularPathData.verticalBuffer,ye.circularPathData.verticalLeftInnerExtent=ye.circularPathData.verticalFullExtent+ye.circularPathData.leftLargeArcRadius,ye.circularPathData.verticalRightInnerExtent=ye.circularPathData.verticalFullExtent+ye.circularPathData.rightLargeArcRadius);else{var Ce=ye.source.column,Fe=ye.circularLinkType,Ke=pe.links.filter(function(Ie){return Ie.source.column==Ce&&Ie.circularLinkType==Fe});Ke.sort("bottom"==ye.circularLinkType?se:oe);var Ue=0;Ke.forEach(function(Ie,nt){Ie.circularLinkID==ye.circularLinkID&&(ye.circularPathData.leftSmallArcRadius=u+ye.width/2+Ue,ye.circularPathData.leftLargeArcRadius=u+ye.width/2+nt*xe+Ue),Ue+=Ie.width}),Ce=ye.target.column,(Ke=pe.links.filter(function(Ie){return Ie.target.column==Ce&&Ie.circularLinkType==Fe})).sort("bottom"==ye.circularLinkType?W:ne),Ue=0,Ke.forEach(function(Ie,nt){Ie.circularLinkID==ye.circularLinkID&&(ye.circularPathData.rightSmallArcRadius=u+ye.width/2+Ue,ye.circularPathData.rightLargeArcRadius=u+ye.width/2+nt*xe+Ue),Ue+=Ie.width}),"bottom"==ye.circularLinkType?(ye.circularPathData.verticalFullExtent=Math.max(ke,ye.source.y1,ye.target.y1)+f+ye.circularPathData.verticalBuffer,ye.circularPathData.verticalLeftInnerExtent=ye.circularPathData.verticalFullExtent-ye.circularPathData.leftLargeArcRadius,ye.circularPathData.verticalRightInnerExtent=ye.circularPathData.verticalFullExtent-ye.circularPathData.rightLargeArcRadius):(ye.circularPathData.verticalFullExtent=be-f-ye.circularPathData.verticalBuffer,ye.circularPathData.verticalLeftInnerExtent=ye.circularPathData.verticalFullExtent+ye.circularPathData.leftLargeArcRadius,ye.circularPathData.verticalRightInnerExtent=ye.circularPathData.verticalFullExtent+ye.circularPathData.rightLargeArcRadius)}ye.circularPathData.leftInnerExtent=ye.circularPathData.sourceX+ye.circularPathData.leftNodeBuffer,ye.circularPathData.rightInnerExtent=ye.circularPathData.targetX-ye.circularPathData.rightNodeBuffer,ye.circularPathData.leftFullExtent=ye.circularPathData.sourceX+ye.circularPathData.leftLargeArcRadius+ye.circularPathData.leftNodeBuffer,ye.circularPathData.rightFullExtent=ye.circularPathData.targetX-ye.circularPathData.rightLargeArcRadius-ye.circularPathData.rightNodeBuffer}if(ye.circular)ye.path=function U(pe){return"top"==pe.circularLinkType?"M"+pe.circularPathData.sourceX+" "+pe.circularPathData.sourceY+" L"+pe.circularPathData.leftInnerExtent+" "+pe.circularPathData.sourceY+" A"+pe.circularPathData.leftLargeArcRadius+" "+pe.circularPathData.leftSmallArcRadius+" 0 0 0 "+pe.circularPathData.leftFullExtent+" "+(pe.circularPathData.sourceY-pe.circularPathData.leftSmallArcRadius)+" L"+pe.circularPathData.leftFullExtent+" "+pe.circularPathData.verticalLeftInnerExtent+" A"+pe.circularPathData.leftLargeArcRadius+" "+pe.circularPathData.leftLargeArcRadius+" 0 0 0 "+pe.circularPathData.leftInnerExtent+" "+pe.circularPathData.verticalFullExtent+" L"+pe.circularPathData.rightInnerExtent+" "+pe.circularPathData.verticalFullExtent+" A"+pe.circularPathData.rightLargeArcRadius+" "+pe.circularPathData.rightLargeArcRadius+" 0 0 0 "+pe.circularPathData.rightFullExtent+" "+pe.circularPathData.verticalRightInnerExtent+" L"+pe.circularPathData.rightFullExtent+" "+(pe.circularPathData.targetY-pe.circularPathData.rightSmallArcRadius)+" A"+pe.circularPathData.rightLargeArcRadius+" "+pe.circularPathData.rightSmallArcRadius+" 0 0 0 "+pe.circularPathData.rightInnerExtent+" "+pe.circularPathData.targetY+" L"+pe.circularPathData.targetX+" "+pe.circularPathData.targetY:"M"+pe.circularPathData.sourceX+" "+pe.circularPathData.sourceY+" L"+pe.circularPathData.leftInnerExtent+" "+pe.circularPathData.sourceY+" A"+pe.circularPathData.leftLargeArcRadius+" "+pe.circularPathData.leftSmallArcRadius+" 0 0 1 "+pe.circularPathData.leftFullExtent+" "+(pe.circularPathData.sourceY+pe.circularPathData.leftSmallArcRadius)+" L"+pe.circularPathData.leftFullExtent+" "+pe.circularPathData.verticalLeftInnerExtent+" A"+pe.circularPathData.leftLargeArcRadius+" "+pe.circularPathData.leftLargeArcRadius+" 0 0 1 "+pe.circularPathData.leftInnerExtent+" "+pe.circularPathData.verticalFullExtent+" L"+pe.circularPathData.rightInnerExtent+" "+pe.circularPathData.verticalFullExtent+" A"+pe.circularPathData.rightLargeArcRadius+" "+pe.circularPathData.rightLargeArcRadius+" 0 0 1 "+pe.circularPathData.rightFullExtent+" "+pe.circularPathData.verticalRightInnerExtent+" L"+pe.circularPathData.rightFullExtent+" "+(pe.circularPathData.targetY+pe.circularPathData.rightSmallArcRadius)+" A"+pe.circularPathData.rightLargeArcRadius+" "+pe.circularPathData.rightSmallArcRadius+" 0 0 1 "+pe.circularPathData.rightInnerExtent+" "+pe.circularPathData.targetY+" L"+pe.circularPathData.targetX+" "+pe.circularPathData.targetY}(ye);else{var Be=E.linkHorizontal().source(function(Ie){return[Ie.source.x0+(Ie.source.x1-Ie.source.x0),Ie.y0]}).target(function(Ie){return[Ie.target.x0,Ie.y1]});ye.path=Be(ye)}})}function X(pe,xe){return G(pe)==G(xe)?"bottom"==pe.circularLinkType?se(pe,xe):oe(pe,xe):G(xe)-G(pe)}function oe(pe,xe){return pe.y0-xe.y0}function se(pe,xe){return xe.y0-pe.y0}function ne(pe,xe){return pe.y1-xe.y1}function W(pe,xe){return xe.y1-pe.y1}function G(pe){return pe.target.column-pe.source.column}function $(pe){return pe.target.x0-pe.source.x1}function V(pe,xe){var ke=z(pe),we=$(xe)/Math.tan(ke);return"up"==re(pe)?pe.y1+we:pe.y1-we}function H(pe,xe){var ke=z(pe),we=$(xe)/Math.tan(ke);return"up"==re(pe)?pe.y1-we:pe.y1+we}function q(pe,xe,ke,we){pe.links.forEach(function(de){if(!de.circular&&de.target.column-de.source.column>1){var be=de.source.column+1,Le=de.target.column-1,De=1,ye=Le-be+1;for(De=1;be<=Le;be++,De++)pe.nodes.forEach(function(Ce){if(Ce.column==be){var St,Fe=De/(ye+1),Ke=Math.pow(1-Fe,3),Ue=3*Fe*Math.pow(1-Fe,2),Be=3*Math.pow(Fe,2)*(1-Fe),Ie=Math.pow(Fe,3),nt=Ke*de.y0+Ue*de.y0+Be*de.y1+Ie*de.y1,gt=nt-de.width/2,Nt=nt+de.width/2;gt>Ce.y0&&gt<Ce.y1?(St=Ce.y1-gt+10,Ce=Y(Ce,St="bottom"==Ce.circularLinkType?St:-St,xe,ke),pe.nodes.forEach(function(Bt){M(Bt,we)==M(Ce,we)||Bt.column!=Ce.column||K(Ce,Bt)&&Y(Bt,St,xe,ke)})):(Nt>Ce.y0&&Nt<Ce.y1||gt<Ce.y0&&Nt>Ce.y1)&&(Ce=Y(Ce,St=Nt-Ce.y0+10,xe,ke),pe.nodes.forEach(function(Bt){M(Bt,we)==M(Ce,we)||Bt.column!=Ce.column||Bt.y0<Ce.y1&&Bt.y1>Ce.y1&&Y(Bt,St,xe,ke)}))}})}})}function K(pe,xe){return pe.y0>xe.y0&&pe.y0<xe.y1||pe.y1>xe.y0&&pe.y1<xe.y1||pe.y0<xe.y0&&pe.y1>xe.y1}function Y(pe,xe,ke,we){return pe.y0+xe>=ke&&pe.y1+xe<=we&&(pe.y0=pe.y0+xe,pe.y1=pe.y1+xe,pe.targetLinks.forEach(function(de){de.y1=de.y1+xe}),pe.sourceLinks.forEach(function(de){de.y0=de.y0+xe})),pe}function te(pe,xe,ke,we){pe.nodes.forEach(function(de){we&&de.y+(de.y1-de.y0)>xe&&(de.y=de.y-(de.y+(de.y1-de.y0)-xe));var be=pe.links.filter(function(ye){return M(ye.source,ke)==M(de,ke)}),Le=be.length;Le>1&&be.sort(function(ye,Ce){if(!ye.circular&&!Ce.circular){if(ye.target.column==Ce.target.column)return ye.y1-Ce.y1;if(!j(ye,Ce))return ye.y1-Ce.y1;if(ye.target.column>Ce.target.column){var Fe=H(Ce,ye);return ye.y1-Fe}if(Ce.target.column>ye.target.column)return H(ye,Ce)-Ce.y1}return ye.circular&&!Ce.circular?"top"==ye.circularLinkType?-1:1:Ce.circular&&!ye.circular?"top"==Ce.circularLinkType?1:-1:ye.circular&&Ce.circular?ye.circularLinkType===Ce.circularLinkType&&"top"==ye.circularLinkType?ye.target.column===Ce.target.column?ye.target.y1-Ce.target.y1:Ce.target.column-ye.target.column:ye.circularLinkType===Ce.circularLinkType&&"bottom"==ye.circularLinkType?ye.target.column===Ce.target.column?Ce.target.y1-ye.target.y1:ye.target.column-Ce.target.column:"top"==ye.circularLinkType?-1:1:void 0});var De=de.y0;be.forEach(function(ye){ye.y0=De+ye.width/2,De+=ye.width}),be.forEach(function(ye,Ce){if("bottom"==ye.circularLinkType){for(var Fe=Ce+1,Ke=0;Fe<Le;Fe++)Ke+=be[Fe].width;ye.y0=de.y1-Ke-ye.width/2}})})}function J(pe,xe,ke){pe.nodes.forEach(function(we){var de=pe.links.filter(function(De){return M(De.target,ke)==M(we,ke)}),be=de.length;be>1&&de.sort(function(De,ye){if(!De.circular&&!ye.circular){if(De.source.column==ye.source.column)return De.y0-ye.y0;if(!j(De,ye))return De.y0-ye.y0;if(ye.source.column<De.source.column){var Ce=V(ye,De);return De.y0-Ce}if(De.source.column<ye.source.column)return V(De,ye)-ye.y0}return De.circular&&!ye.circular?"top"==De.circularLinkType?-1:1:ye.circular&&!De.circular?"top"==ye.circularLinkType?1:-1:De.circular&&ye.circular?De.circularLinkType===ye.circularLinkType&&"top"==De.circularLinkType?De.source.column===ye.source.column?De.source.y1-ye.source.y1:De.source.column-ye.source.column:De.circularLinkType===ye.circularLinkType&&"bottom"==De.circularLinkType?De.source.column===ye.source.column?De.source.y1-ye.source.y1:ye.source.column-De.source.column:"top"==De.circularLinkType?-1:1:void 0});var Le=we.y0;de.forEach(function(De){De.y1=Le+De.width/2,Le+=De.width}),de.forEach(function(De,ye){if("bottom"==De.circularLinkType){for(var Ce=ye+1,Fe=0;Ce<be;Ce++)Fe+=de[Ce].width;De.y1=we.y1-Fe-De.width/2}})})}function j(pe,xe){return re(pe)==re(xe)}function re(pe){return pe.y0-pe.y1>0?"up":"down"}function le(pe,xe){return M(pe.source,xe)==M(pe.target,xe)}function ge(pe,xe,ke){var we=pe.nodes,de=pe.links,be=!1,Le=!1;if(de.forEach(function(Ue){"top"==Ue.circularLinkType?be=!0:"bottom"==Ue.circularLinkType&&(Le=!0)}),0==be||0==Le){var De=k.min(we,function(Ue){return Ue.y0}),Ke=(ke-xe)/(k.max(we,function(Ue){return Ue.y1})-De);we.forEach(function(Ue){var Be=(Ue.y1-Ue.y0)*Ke;Ue.y0=(Ue.y0-De)*Ke,Ue.y1=Ue.y0+Be}),de.forEach(function(Ue){Ue.y0=(Ue.y0-De)*Ke,Ue.y1=(Ue.y1-De)*Ke,Ue.width=Ue.width*Ke})}}_.sankeyCircular=function o(){var be,Ue,pe=0,xe=0,ke=1,we=1,de=24,Le=l,De=t,ye=y,Ce=A,Fe=32,Ke=2,Be=null;function Ie(){var wt={nodes:ye.apply(null,arguments),links:Ce.apply(null,arguments)};nt(wt),C(wt,0,Be),gt(wt),Bt(wt),R(wt,Le),Zt(wt,Fe,Le),Et(wt);for(var at=4,vt=0;vt<at;vt++)te(wt,we,Le),J(wt,0,Le),q(wt,xe,we,Le),te(wt,we,Le),J(wt,0,Le);return ge(wt,xe,we),N(wt,Ke,we,Le),wt}function nt(wt){wt.nodes.forEach(function(vt,Qe){vt.index=Qe,vt.sourceLinks=[],vt.targetLinks=[]});var at=m.map(wt.nodes,Le);return wt.links.forEach(function(vt,Qe){vt.index=Qe;var Pe=vt.source,Ze=vt.target;"object"!==(void 0===Pe?"undefined":r(Pe))&&(Pe=vt.source=T(at,Pe)),"object"!==(void 0===Ze?"undefined":r(Ze))&&(Ze=vt.target=T(at,Ze)),Pe.sourceLinks.push(vt),Ze.targetLinks.push(vt)}),wt}function gt(wt){wt.nodes.forEach(function(at){at.partOfCycle=!1,at.value=Math.max(k.sum(at.sourceLinks,x),k.sum(at.targetLinks,x)),at.sourceLinks.forEach(function(vt){vt.circular&&(at.partOfCycle=!0,at.circularLinkType=vt.circularLinkType)}),at.targetLinks.forEach(function(vt){vt.circular&&(at.partOfCycle=!0,at.circularLinkType=vt.circularLinkType)})})}function Bt(wt){var at,vt,Qe;for(at=wt.nodes,vt=[],Qe=0;at.length;++Qe,at=vt,vt=[])at.forEach(function(Pe){Pe.depth=Qe,Pe.sourceLinks.forEach(function(Ze){vt.indexOf(Ze.target)<0&&!Ze.circular&&vt.push(Ze.target)})});for(at=wt.nodes,vt=[],Qe=0;at.length;++Qe,at=vt,vt=[])at.forEach(function(Pe){Pe.height=Qe,Pe.targetLinks.forEach(function(Ze){vt.indexOf(Ze.source)<0&&!Ze.circular&&vt.push(Ze.source)})});wt.nodes.forEach(function(Pe){Pe.column=Math.floor(De.call(null,Pe,Qe))})}function Zt(wt,at,vt){var Qe=m.nest().key(function(Tt){return Tt.column}).sortKeys(k.ascending).entries(wt.nodes).map(function(Tt){return Tt.values});(function Xe(Tt){if(Ue){var Xt=1/0;Qe.forEach(function(nr){var rr=we*Ue/(nr.length+1);Xt=rr<Xt?rr:Xt}),be=Xt}var ar=k.min(Qe,function(nr){return(we-xe-(nr.length-1)*be)/k.sum(nr,x)});ar*=.3,wt.links.forEach(function(nr){nr.width=nr.value*ar});var Ut=function Nt(wt){var at=0,vt=0,Qe=0,Pe=0,Ze=k.max(wt.nodes,function(Xe){return Xe.column});return wt.links.forEach(function(Xe){Xe.circular&&("top"==Xe.circularLinkType?at+=Xe.width:vt+=Xe.width,0==Xe.target.column&&(Pe+=Xe.width),Xe.source.column==Ze&&(Qe+=Xe.width))}),{top:at=at>0?at+f+u:at,bottom:vt=vt>0?vt+f+u:vt,left:Pe=Pe>0?Pe+f+u:Pe,right:Qe=Qe>0?Qe+f+u:Qe}}(wt),Jt=function St(wt,at){var vt=k.max(wt.nodes,function(Tt){return Tt.column}),Qe=ke-pe,Pe=we-xe,rt=Qe/(Qe+at.right+at.left),kt=Pe/(Pe+at.top+at.bottom);return pe=pe*rt+at.left,ke=0==at.right?ke:ke*rt,xe=xe*kt+at.top,we*=kt,wt.nodes.forEach(function(Tt){Tt.x0=pe+Tt.column*((ke-pe-de)/vt),Tt.x1=Tt.x0+de}),kt}(wt,Ut);ar*=Jt,wt.links.forEach(function(nr){nr.width=nr.value*ar}),Qe.forEach(function(nr){var rr=nr.length;nr.forEach(function(br,Hr){br.depth==Qe.length-1&&1==rr||0==br.depth&&1==rr?(br.y0=we/2-br.value*ar,br.y1=br.y0+br.value*ar):br.partOfCycle?0==I(br,Tt)?(br.y0=we/2+Hr,br.y1=br.y0+br.value*ar):"top"==br.circularLinkType?(br.y0=xe+Hr,br.y1=br.y0+br.value*ar):(br.y0=we-br.value*ar-Hr,br.y1=br.y0+br.value*ar):0==Ut.top||0==Ut.bottom?(br.y0=(we-xe)/rr*Hr,br.y1=br.y0+br.value*ar):(br.y0=(we-xe)/2-rr/2+Hr,br.y1=br.y0+br.value*ar)})})})(vt),kt();for(var Pe=1,Ze=at;Ze>0;--Ze)rt(Pe*=.99,vt),kt();function rt(Tt,Xt){var ar=Qe.length;Qe.forEach(function(Ut){var Jt=Ut.length,nr=Ut[0].depth;Ut.forEach(function(rr){var br;if((rr.sourceLinks.length||rr.targetLinks.length)&&!(rr.partOfCycle&&I(rr,Xt)>0))if(0==nr&&1==Jt)rr.y0=we/2-(br=rr.y1-rr.y0)/2,rr.y1=we/2+br/2;else if(nr==ar-1&&1==Jt)rr.y0=we/2-(br=rr.y1-rr.y0)/2,rr.y1=we/2+br/2;else{var on=k.mean(rr.sourceLinks,w),jr=k.mean(rr.targetLinks,p),et=((on&&jr?(on+jr)/2:on||jr)-S(rr))*Tt;rr.y0+=et,rr.y1+=et}})})}function kt(){Qe.forEach(function(Tt){var Xt,ar,nr,Ut=xe,Jt=Tt.length;for(Tt.sort(b),nr=0;nr<Jt;++nr)(ar=Ut-(Xt=Tt[nr]).y0)>0&&(Xt.y0+=ar,Xt.y1+=ar),Ut=Xt.y1+be;if((ar=Ut-be-we)>0)for(Ut=Xt.y0-=ar,Xt.y1-=ar,nr=Jt-2;nr>=0;--nr)(ar=(Xt=Tt[nr]).y1+be-Ut)>0&&(Xt.y0-=ar,Xt.y1-=ar),Ut=Xt.y0})}}function Et(wt){wt.nodes.forEach(function(at){at.sourceLinks.sort(s),at.targetLinks.sort(g)}),wt.nodes.forEach(function(at){var vt=at.y0,Qe=vt,Pe=at.y1,Ze=Pe;at.sourceLinks.forEach(function(Xe){Xe.circular?(Xe.y0=Pe-Xe.width/2,Pe-=Xe.width):(Xe.y0=vt+Xe.width/2,vt+=Xe.width)}),at.targetLinks.forEach(function(Xe){Xe.circular?(Xe.y1=Ze-Xe.width/2,Ze-=Xe.width):(Xe.y1=Qe+Xe.width/2,Qe+=Xe.width)})})}return Ie.nodeId=function(wt){return arguments.length?(Le="function"==typeof wt?wt:a(wt),Ie):Le},Ie.nodeAlign=function(wt){return arguments.length?(De="function"==typeof wt?wt:a(wt),Ie):De},Ie.nodeWidth=function(wt){return arguments.length?(de=+wt,Ie):de},Ie.nodePadding=function(wt){return arguments.length?(be=+wt,Ie):be},Ie.nodes=function(wt){return arguments.length?(ye="function"==typeof wt?wt:a(wt),Ie):ye},Ie.links=function(wt){return arguments.length?(Ce="function"==typeof wt?wt:a(wt),Ie):Ce},Ie.size=function(wt){return arguments.length?(pe=xe=0,ke=+wt[0],we=+wt[1],Ie):[ke-pe,we-xe]},Ie.extent=function(wt){return arguments.length?(pe=+wt[0][0],ke=+wt[1][0],xe=+wt[0][1],we=+wt[1][1],Ie):[[pe,xe],[ke,we]]},Ie.iterations=function(wt){return arguments.length?(Fe=+wt,Ie):Fe},Ie.circularLinkGap=function(wt){return arguments.length?(Ke=+wt,Ie):Ke},Ie.nodePaddingRatio=function(wt){return arguments.length?(Ue=+wt,Ie):Ue},Ie.sortNodes=function(wt){return arguments.length?(Be=wt,Ie):Be},Ie.update=function(wt){return R(wt,Le),Et(wt),wt.links.forEach(function(at){at.circular&&(at.circularLinkType=at.y0+at.y1<we?"top":"bottom",at.source.circularLinkType=at.circularLinkType,at.target.circularLinkType=at.circularLinkType)}),te(wt,we,Le,!1),J(wt,0,Le),N(wt,Ke,we,Le),wt},Ie},_.sankeyCenter=function i(pe){return pe.targetLinks.length?pe.depth:pe.sourceLinks.length?k.min(pe.sourceLinks,c)-1:0},_.sankeyLeft=function d(pe){return pe.depth},_.sankeyRight=function n(pe,xe){return xe-1-pe.height},_.sankeyJustify=t,Object.defineProperty(_,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==ie?k(ae,v("d3-array"),v("d3-collection"),v("d3-shape"),v("elementary-circuits-directed-graph")):k(_.d3=_.d3||{},_.d3,_.d3,_.d3,null)},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(v,ie,ae){var _,k;_=this,k=function(_,k,m,E){"use strict";function e(u){return u.target.depth}function n(u,h){return u.sourceLinks.length?u.depth:h-1}function i(u){return function(){return u}}function a(u,h){return g(u.source,h.source)||u.index-h.index}function r(u,h){return g(u.target,h.target)||u.index-h.index}function g(u,h){return u.y0-h.y0}function s(u){return u.value}function b(u){return(u.y0+u.y1)/2}function x(u){return b(u.source)*u.value}function S(u){return b(u.target)*u.value}function p(u){return u.index}function w(u){return u.nodes}function l(u){return u.links}function y(u,h){var o=u.get(h);if(!o)throw new Error("missing: "+h);return o}function T(u){return[u.source.x1,u.y0]}function M(u){return[u.target.x0,u.y1]}_.sankey=function(){var u=0,h=0,o=1,C=1,R=24,z=8,O=p,I=n,F=w,D=l,N=32;function X(){var $={nodes:F.apply(null,arguments),links:D.apply(null,arguments)};return oe($),se($),ne($),W($),G($),$}function oe($){$.nodes.forEach(function(H,q){H.index=q,H.sourceLinks=[],H.targetLinks=[]});var V=m.map($.nodes,O);$.links.forEach(function(H,q){H.index=q;var K=H.source,Y=H.target;"object"!=typeof K&&(K=H.source=y(V,K)),"object"!=typeof Y&&(Y=H.target=y(V,Y)),K.sourceLinks.push(H),Y.targetLinks.push(H)})}function se($){$.nodes.forEach(function(V){V.value=Math.max(k.sum(V.sourceLinks,s),k.sum(V.targetLinks,s))})}function ne($){var V,H,q;for(V=$.nodes,H=[],q=0;V.length;++q,V=H,H=[])V.forEach(function(Y){Y.depth=q,Y.sourceLinks.forEach(function(te){H.indexOf(te.target)<0&&H.push(te.target)})});for(V=$.nodes,H=[],q=0;V.length;++q,V=H,H=[])V.forEach(function(Y){Y.height=q,Y.targetLinks.forEach(function(te){H.indexOf(te.source)<0&&H.push(te.source)})});var K=(o-u-R)/(q-1);$.nodes.forEach(function(Y){Y.x1=(Y.x0=u+Math.max(0,Math.min(q-1,Math.floor(I.call(null,Y,q))))*K)+R})}function W($){var V=m.nest().key(function(j){return j.x0}).sortKeys(k.ascending).entries($.nodes).map(function(j){return j.values});(function K(){var j=k.max(V,function(ge){return ge.length}),re=.6666666666666666*(C-h)/(j-1);z>re&&(z=re);var le=k.min(V,function(ge){return(C-h-(ge.length-1)*z)/k.sum(ge,s)});V.forEach(function(ge){ge.forEach(function(pe,xe){pe.y1=(pe.y0=xe)+pe.value*le})}),$.links.forEach(function(ge){ge.width=ge.value*le})})(),J();for(var H=1,q=N;q>0;--q)te(H*=.99),J(),Y(H),J();function Y(j){V.forEach(function(re){re.forEach(function(le){if(le.targetLinks.length){var ge=(k.sum(le.targetLinks,x)/k.sum(le.targetLinks,s)-b(le))*j;le.y0+=ge,le.y1+=ge}})})}function te(j){V.slice().reverse().forEach(function(re){re.forEach(function(le){if(le.sourceLinks.length){var ge=(k.sum(le.sourceLinks,S)/k.sum(le.sourceLinks,s)-b(le))*j;le.y0+=ge,le.y1+=ge}})})}function J(){V.forEach(function(j){var re,le,xe,ge=h,pe=j.length;for(j.sort(g),xe=0;xe<pe;++xe)(le=ge-(re=j[xe]).y0)>0&&(re.y0+=le,re.y1+=le),ge=re.y1+z;if((le=ge-z-C)>0)for(ge=re.y0-=le,re.y1-=le,xe=pe-2;xe>=0;--xe)(le=(re=j[xe]).y1+z-ge)>0&&(re.y0-=le,re.y1-=le),ge=re.y0})}}function G($){$.nodes.forEach(function(V){V.sourceLinks.sort(r),V.targetLinks.sort(a)}),$.nodes.forEach(function(V){var H=V.y0,q=H;V.sourceLinks.forEach(function(K){K.y0=H+K.width/2,H+=K.width}),V.targetLinks.forEach(function(K){K.y1=q+K.width/2,q+=K.width})})}return X.update=function($){return G($),$},X.nodeId=function($){return arguments.length?(O="function"==typeof $?$:i($),X):O},X.nodeAlign=function($){return arguments.length?(I="function"==typeof $?$:i($),X):I},X.nodeWidth=function($){return arguments.length?(R=+$,X):R},X.nodePadding=function($){return arguments.length?(z=+$,X):z},X.nodes=function($){return arguments.length?(F="function"==typeof $?$:i($),X):F},X.links=function($){return arguments.length?(D="function"==typeof $?$:i($),X):D},X.size=function($){return arguments.length?(u=h=0,o=+$[0],C=+$[1],X):[o-u,C-h]},X.extent=function($){return arguments.length?(u=+$[0][0],o=+$[1][0],h=+$[0][1],C=+$[1][1],X):[[u,h],[o,C]]},X.iterations=function($){return arguments.length?(N=+$,X):N},X},_.sankeyCenter=function t(u){return u.targetLinks.length?u.depth:u.sourceLinks.length?k.min(u.sourceLinks,e)-1:0},_.sankeyLeft=function c(u){return u.depth},_.sankeyRight=function d(u,h){return h-1-u.height},_.sankeyJustify=n,_.sankeyLinkHorizontal=function(){return E.linkHorizontal().source(T).target(M)},Object.defineProperty(_,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==ie?k(ae,v("d3-array"),v("d3-collection"),v("d3-shape")):k(_.d3=_.d3||{},_.d3,_.d3,_.d3)},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(v,ie,ae){(function(){var _={version:"3.8.0"},k=[].slice,m=function(ue){return k.call(ue)},E=self.document;function e(ue){return ue&&(ue.ownerDocument||ue.document||ue).documentElement}function c(ue){return ue&&(ue.ownerDocument&&ue.ownerDocument.defaultView||ue.document&&ue||ue.defaultView)}if(E)try{m(E.documentElement.childNodes)}catch(ue){m=function(_e){for(var Ee=_e.length,Ne=new Array(Ee);Ee--;)Ne[Ee]=_e[Ee];return Ne}}if(Date.now||(Date.now=function(){return+new Date}),E)try{E.createElement("DIV").style.setProperty("opacity",0,"")}catch(ue){var d=this.Element.prototype,n=d.setAttribute,t=d.setAttributeNS,i=this.CSSStyleDeclaration.prototype,a=i.setProperty;d.setAttribute=function(_e,Ee){n.call(this,_e,Ee+"")},d.setAttributeNS=function(_e,Ee,Ne){t.call(this,_e,Ee,Ne+"")},i.setProperty=function(_e,Ee,Ne){a.call(this,_e,Ee+"",Ne)}}function r(ue,_e){return ue<_e?-1:ue>_e?1:ue>=_e?0:NaN}function g(ue){return null===ue?NaN:+ue}function s(ue){return!isNaN(ue)}function b(ue){return{left:function(_e,Ee,Ne,He){for(arguments.length<3&&(Ne=0),arguments.length<4&&(He=_e.length);Ne<He;){var Ve=Ne+He>>>1;ue(_e[Ve],Ee)<0?Ne=Ve+1:He=Ve}return Ne},right:function(_e,Ee,Ne,He){for(arguments.length<3&&(Ne=0),arguments.length<4&&(He=_e.length);Ne<He;){var Ve=Ne+He>>>1;ue(_e[Ve],Ee)>0?He=Ve:Ne=Ve+1}return Ne}}}_.ascending=r,_.descending=function(ue,_e){return _e<ue?-1:_e>ue?1:_e>=ue?0:NaN},_.min=function(ue,_e){var He,Ve,Ee=-1,Ne=ue.length;if(1===arguments.length){for(;++Ee<Ne;)if(null!=(Ve=ue[Ee])&&Ve>=Ve){He=Ve;break}for(;++Ee<Ne;)null!=(Ve=ue[Ee])&&He>Ve&&(He=Ve)}else{for(;++Ee<Ne;)if(null!=(Ve=_e.call(ue,ue[Ee],Ee))&&Ve>=Ve){He=Ve;break}for(;++Ee<Ne;)null!=(Ve=_e.call(ue,ue[Ee],Ee))&&He>Ve&&(He=Ve)}return He},_.max=function(ue,_e){var He,Ve,Ee=-1,Ne=ue.length;if(1===arguments.length){for(;++Ee<Ne;)if(null!=(Ve=ue[Ee])&&Ve>=Ve){He=Ve;break}for(;++Ee<Ne;)null!=(Ve=ue[Ee])&&Ve>He&&(He=Ve)}else{for(;++Ee<Ne;)if(null!=(Ve=_e.call(ue,ue[Ee],Ee))&&Ve>=Ve){He=Ve;break}for(;++Ee<Ne;)null!=(Ve=_e.call(ue,ue[Ee],Ee))&&Ve>He&&(He=Ve)}return He},_.extent=function(ue,_e){var He,Ve,_t,Ee=-1,Ne=ue.length;if(1===arguments.length){for(;++Ee<Ne;)if(null!=(Ve=ue[Ee])&&Ve>=Ve){He=_t=Ve;break}for(;++Ee<Ne;)null!=(Ve=ue[Ee])&&(He>Ve&&(He=Ve),_t<Ve&&(_t=Ve))}else{for(;++Ee<Ne;)if(null!=(Ve=_e.call(ue,ue[Ee],Ee))&&Ve>=Ve){He=_t=Ve;break}for(;++Ee<Ne;)null!=(Ve=_e.call(ue,ue[Ee],Ee))&&(He>Ve&&(He=Ve),_t<Ve&&(_t=Ve))}return[He,_t]},_.sum=function(ue,_e){var He,Ee=0,Ne=ue.length,Ve=-1;if(1===arguments.length)for(;++Ve<Ne;)s(He=+ue[Ve])&&(Ee+=He);else for(;++Ve<Ne;)s(He=+_e.call(ue,ue[Ve],Ve))&&(Ee+=He);return Ee},_.mean=function(ue,_e){var He,Ee=0,Ne=ue.length,Ve=-1,_t=Ne;if(1===arguments.length)for(;++Ve<Ne;)s(He=g(ue[Ve]))?Ee+=He:--_t;else for(;++Ve<Ne;)s(He=g(_e.call(ue,ue[Ve],Ve)))?Ee+=He:--_t;if(_t)return Ee/_t},_.quantile=function(ue,_e){var Ee=(ue.length-1)*_e+1,Ne=Math.floor(Ee),He=+ue[Ne-1],Ve=Ee-Ne;return Ve?He+Ve*(ue[Ne]-He):He},_.median=function(ue,_e){var He,Ee=[],Ne=ue.length,Ve=-1;if(1===arguments.length)for(;++Ve<Ne;)s(He=g(ue[Ve]))&&Ee.push(He);else for(;++Ve<Ne;)s(He=g(_e.call(ue,ue[Ve],Ve)))&&Ee.push(He);if(Ee.length)return _.quantile(Ee.sort(r),.5)},_.variance=function(ue,_e){var He,Ve,Ee=ue.length,Ne=0,_t=0,dt=-1,zt=0;if(1===arguments.length)for(;++dt<Ee;)s(He=g(ue[dt]))&&(_t+=(Ve=He-Ne)*(He-(Ne+=Ve/++zt)));else for(;++dt<Ee;)s(He=g(_e.call(ue,ue[dt],dt)))&&(_t+=(Ve=He-Ne)*(He-(Ne+=Ve/++zt)));if(zt>1)return _t/(zt-1)},_.deviation=function(){var ue=_.variance.apply(this,arguments);return ue&&Math.sqrt(ue)};var x=b(r);function S(ue){return ue.length}_.bisectLeft=x.left,_.bisect=_.bisectRight=x.right,_.bisector=function(ue){return b(1===ue.length?function(_e,Ee){return r(ue(_e),Ee)}:ue)},_.shuffle=function(ue,_e,Ee){(Ne=arguments.length)<3&&(Ee=ue.length,Ne<2&&(_e=0));for(var He,Ve,Ne=Ee-_e;Ne;)Ve=Math.random()*Ne--|0,He=ue[Ne+_e],ue[Ne+_e]=ue[Ve+_e],ue[Ve+_e]=He;return ue},_.permute=function(ue,_e){for(var Ee=_e.length,Ne=new Array(Ee);Ee--;)Ne[Ee]=ue[_e[Ee]];return Ne},_.pairs=function(ue){for(var _e=0,Ee=ue.length-1,He=ue[0],Ve=new Array(Ee<0?0:Ee);_e<Ee;)Ve[_e]=[He,He=ue[++_e]];return Ve},_.transpose=function(ue){if(!(Ve=ue.length))return[];for(var _e=-1,Ee=_.min(ue,S),Ne=new Array(Ee);++_e<Ee;)for(var Ve,He=-1,_t=Ne[_e]=new Array(Ve);++He<Ve;)_t[He]=ue[He][_e];return Ne},_.zip=function(){return _.transpose(arguments)},_.keys=function(ue){var _e=[];for(var Ee in ue)_e.push(Ee);return _e},_.values=function(ue){var _e=[];for(var Ee in ue)_e.push(ue[Ee]);return _e},_.entries=function(ue){var _e=[];for(var Ee in ue)_e.push({key:Ee,value:ue[Ee]});return _e},_.merge=function(ue){for(var Ee,Ve,_t,_e=ue.length,Ne=-1,He=0;++Ne<_e;)He+=ue[Ne].length;for(Ve=new Array(He);--_e>=0;)for(Ee=(_t=ue[_e]).length;--Ee>=0;)Ve[--He]=_t[Ee];return Ve};var p=Math.abs;function w(ue){for(var _e=1;ue*_e%1;)_e*=10;return _e}function l(ue,_e){for(var Ee in _e)Object.defineProperty(ue.prototype,Ee,{value:_e[Ee],enumerable:!1})}function y(){this._=Object.create(null)}_.range=function(ue,_e,Ee){if(arguments.length<3&&(Ee=1,arguments.length<2&&(_e=ue,ue=0)),(_e-ue)/Ee==1/0)throw new Error("infinite range");var _t,Ne=[],He=w(p(Ee)),Ve=-1;if(ue*=He,_e*=He,(Ee*=He)<0)for(;(_t=ue+Ee*++Ve)>_e;)Ne.push(_t/He);else for(;(_t=ue+Ee*++Ve)<_e;)Ne.push(_t/He);return Ne},_.map=function(ue,_e){var Ee=new y;if(ue instanceof y)ue.forEach(function(dt,zt){Ee.set(dt,zt)});else if(Array.isArray(ue)){var Ve,Ne=-1,He=ue.length;if(1===arguments.length)for(;++Ne<He;)Ee.set(Ne,ue[Ne]);else for(;++Ne<He;)Ee.set(_e.call(ue,Ve=ue[Ne],Ne),Ve)}else for(var _t in ue)Ee.set(_t,ue[_t]);return Ee};function M(ue){return"__proto__"==(ue+="")||"\0"===ue[0]?"\0"+ue:ue}function f(ue){return"\0"===(ue+="")[0]?ue.slice(1):ue}function u(ue){return M(ue)in this._}function h(ue){return(ue=M(ue))in this._&&delete this._[ue]}function o(){var ue=[];for(var _e in this._)ue.push(f(_e));return ue}function C(){var ue=0;for(var _e in this._)++ue;return ue}function R(){for(var ue in this._)return!1;return!0}function z(){this._=Object.create(null)}function O(ue){return ue}function I(ue,_e,Ee){return function(){var Ne=Ee.apply(_e,arguments);return Ne===_e?ue:Ne}}function F(ue,_e){if(_e in ue)return _e;_e=_e.charAt(0).toUpperCase()+_e.slice(1);for(var Ee=0,Ne=D.length;Ee<Ne;++Ee){var He=D[Ee]+_e;if(He in ue)return He}}l(y,{has:u,get:function(ue){return this._[M(ue)]},set:function(ue,_e){return this._[M(ue)]=_e},remove:h,keys:o,values:function(){var ue=[];for(var _e in this._)ue.push(this._[_e]);return ue},entries:function(){var ue=[];for(var _e in this._)ue.push({key:f(_e),value:this._[_e]});return ue},size:C,empty:R,forEach:function(ue){for(var _e in this._)ue.call(this,f(_e),this._[_e])}}),_.nest=function(){var Ne,He,ue={},_e=[],Ee=[];function Ve(dt,zt,$t){if($t>=_e.length)return He?He.call(ue,zt):Ne?zt.sort(Ne):zt;for(var Qr,cn,Dr,$r,er=-1,Sr=zt.length,Mr=_e[$t++],Nr=new y;++er<Sr;)($r=Nr.get(Qr=Mr(cn=zt[er])))?$r.push(cn):Nr.set(Qr,[cn]);return dt?(cn=dt(),Dr=function(sn,hn){cn.set(sn,Ve(dt,hn,$t))}):(cn={},Dr=function(sn,hn){cn[sn]=Ve(dt,hn,$t)}),Nr.forEach(Dr),cn}function _t(dt,zt){if(zt>=_e.length)return dt;var $t=[],er=Ee[zt++];return dt.forEach(function(Sr,Mr){$t.push({key:Sr,values:_t(Mr,zt)})}),er?$t.sort(function(Sr,Mr){return er(Sr.key,Mr.key)}):$t}return ue.map=function(dt,zt){return Ve(zt,dt,0)},ue.entries=function(dt){return _t(Ve(_.map,dt,0),0)},ue.key=function(dt){return _e.push(dt),ue},ue.sortKeys=function(dt){return Ee[_e.length-1]=dt,ue},ue.sortValues=function(dt){return Ne=dt,ue},ue.rollup=function(dt){return He=dt,ue},ue},_.set=function(ue){var _e=new z;if(ue)for(var Ee=0,Ne=ue.length;Ee<Ne;++Ee)_e.add(ue[Ee]);return _e},l(z,{has:u,add:function(ue){return this._[M(ue+="")]=!0,ue},remove:h,values:o,size:C,empty:R,forEach:function(ue){for(var _e in this._)ue.call(this,f(_e))}}),_.behavior={},_.rebind=function(ue,_e){for(var He,Ee=1,Ne=arguments.length;++Ee<Ne;)ue[He=arguments[Ee]]=I(ue,_e,_e[He]);return ue};var D=["webkit","ms","moz","Moz","o","O"];function N(){}function U(){}function X(ue){var _e=[],Ee=new y;function Ne(){for(var dt,He=_e,Ve=-1,_t=He.length;++Ve<_t;)(dt=He[Ve].on)&&dt.apply(this,arguments);return ue}return Ne.on=function(He,Ve){var dt,_t=Ee.get(He);return arguments.length<2?_t&&_t.on:(_t&&(_t.on=null,_e=_e.slice(0,dt=_e.indexOf(_t)).concat(_e.slice(dt+1)),Ee.remove(He)),Ve&&_e.push(Ee.set(He,{on:Ve})),ue)},Ne}function oe(){_.event.preventDefault()}function se(){for(var _e,ue=_.event;_e=ue.sourceEvent;)ue=_e;return ue}function ne(ue){for(var _e=new U,Ee=0,Ne=arguments.length;++Ee<Ne;)_e[arguments[Ee]]=X(_e);return _e.of=function(He,Ve){return function(_t){try{var dt=_t.sourceEvent=_.event;_t.target=ue,_.event=_t,_e[_t.type].apply(He,Ve)}finally{_.event=dt}}},_e}_.dispatch=function(){for(var ue=new U,_e=-1,Ee=arguments.length;++_e<Ee;)ue[arguments[_e]]=X(ue);return ue},U.prototype.on=function(ue,_e){var Ee=ue.indexOf("."),Ne="";if(Ee>=0&&(Ne=ue.slice(Ee+1),ue=ue.slice(0,Ee)),ue)return arguments.length<2?this[ue].on(Ne):this[ue].on(Ne,_e);if(2===arguments.length){if(null==_e)for(ue in this)this.hasOwnProperty(ue)&&this[ue].on(Ne,null);return this}},_.event=null,_.requote=function(ue){return ue.replace(W,"\\$&")};var W=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,G={}.__proto__?function(ue,_e){ue.__proto__=_e}:function(ue,_e){for(var Ee in _e)ue[Ee]=_e[Ee]};function $(ue){return G(ue,K),ue}var V=function(ue,_e){return _e.querySelector(ue)},H=function(ue,_e){return _e.querySelectorAll(ue)},q=function(ue,_e){var Ee=ue.matches||ue[F(ue,"matchesSelector")];return(q=function(Ne,He){return Ee.call(Ne,He)})(ue,_e)};"function"==typeof Sizzle&&(V=function(ue,_e){return Sizzle(ue,_e)[0]||null},H=Sizzle,q=Sizzle.matchesSelector),_.selection=function(){return _.select(E.documentElement)};var K=_.selection.prototype=[];function Y(ue){return"function"==typeof ue?ue:function(){return V(ue,this)}}function te(ue){return"function"==typeof ue?ue:function(){return H(ue,this)}}K.select=function(ue){var Ee,Ne,He,Ve,_e=[];ue=Y(ue);for(var _t=-1,dt=this.length;++_t<dt;){_e.push(Ee=[]),Ee.parentNode=(He=this[_t]).parentNode;for(var zt=-1,$t=He.length;++zt<$t;)(Ve=He[zt])?(Ee.push(Ne=ue.call(Ve,Ve.__data__,zt,_t)),Ne&&"__data__"in Ve&&(Ne.__data__=Ve.__data__)):Ee.push(null)}return $(_e)},K.selectAll=function(ue){var Ee,Ne,_e=[];ue=te(ue);for(var He=-1,Ve=this.length;++He<Ve;)for(var _t=this[He],dt=-1,zt=_t.length;++dt<zt;)(Ne=_t[dt])&&(_e.push(Ee=m(ue.call(Ne,Ne.__data__,dt,He))),Ee.parentNode=Ne);return $(_e)};var J="http://www.w3.org/1999/xhtml",j={svg:"http://www.w3.org/2000/svg",xhtml:J,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function re(ue,_e){return ue=_.ns.qualify(ue),null==_e?ue.local?function Ne(){this.removeAttributeNS(ue.space,ue.local)}:function Ee(){this.removeAttribute(ue)}:"function"==typeof _e?ue.local?function dt(){var zt=_e.apply(this,arguments);null==zt?this.removeAttributeNS(ue.space,ue.local):this.setAttributeNS(ue.space,ue.local,zt)}:function _t(){var zt=_e.apply(this,arguments);null==zt?this.removeAttribute(ue):this.setAttribute(ue,zt)}:ue.local?function Ve(){this.setAttributeNS(ue.space,ue.local,_e)}:function He(){this.setAttribute(ue,_e)}}function le(ue){return ue.trim().replace(/\s+/g," ")}function ge(ue){return new RegExp("(?:^|\\s+)"+_.requote(ue)+"(?:\\s+|$)","g")}function pe(ue){return(ue+"").trim().split(/^|\s+/)}function xe(ue,_e){var Ee=(ue=pe(ue).map(ke)).length;return"function"==typeof _e?function He(){for(var Ve=-1,_t=_e.apply(this,arguments);++Ve<Ee;)ue[Ve](this,_t)}:function Ne(){for(var Ve=-1;++Ve<Ee;)ue[Ve](this,_e)}}function ke(ue){var _e=ge(ue);return function(Ee,Ne){if(He=Ee.classList)return Ne?He.add(ue):He.remove(ue);var He=Ee.getAttribute("class")||"";Ne?(_e.lastIndex=0,_e.test(He)||Ee.setAttribute("class",le(He+" "+ue))):Ee.setAttribute("class",le(He.replace(_e," ")))}}function we(ue,_e,Ee){return null==_e?function Ne(){this.style.removeProperty(ue)}:"function"==typeof _e?function Ve(){var _t=_e.apply(this,arguments);null==_t?this.style.removeProperty(ue):this.style.setProperty(ue,_t,Ee)}:function He(){this.style.setProperty(ue,_e,Ee)}}function de(ue,_e){return null==_e?function Ee(){delete this[ue]}:"function"==typeof _e?function He(){var Ve=_e.apply(this,arguments);null==Ve?delete this[ue]:this[ue]=Ve}:function Ne(){this[ue]=_e}}function be(ue){return"function"==typeof ue?ue:(ue=_.ns.qualify(ue)).local?function Ee(){return this.ownerDocument.createElementNS(ue.space,ue.local)}:function _e(){var Ne=this.ownerDocument,He=this.namespaceURI;return He===J&&Ne.documentElement.namespaceURI===J?Ne.createElement(ue):Ne.createElementNS(He,ue)}}function Le(){var ue=this.parentNode;ue&&ue.removeChild(this)}function De(ue){return{__data__:ue}}function ye(ue){return function(){return q(this,ue)}}function Ce(ue){return arguments.length||(ue=r),function(_e,Ee){return _e&&Ee?ue(_e.__data__,Ee.__data__):!_e-!Ee}}function Fe(ue,_e){for(var Ee=0,Ne=ue.length;Ee<Ne;Ee++)for(var dt,He=ue[Ee],Ve=0,_t=He.length;Ve<_t;Ve++)(dt=He[Ve])&&_e(dt,Ve,Ee);return ue}function Ke(ue){return G(ue,Ue),ue}_.ns={prefix:j,qualify:function(ue){var _e=ue.indexOf(":"),Ee=ue;return _e>=0&&"xmlns"!==(Ee=ue.slice(0,_e))&&(ue=ue.slice(_e+1)),j.hasOwnProperty(Ee)?{space:j[Ee],local:ue}:ue}},K.attr=function(ue,_e){if(arguments.length<2){if("string"==typeof ue){var Ee=this.node();return(ue=_.ns.qualify(ue)).local?Ee.getAttributeNS(ue.space,ue.local):Ee.getAttribute(ue)}for(_e in ue)this.each(re(_e,ue[_e]));return this}return this.each(re(ue,_e))},K.classed=function(ue,_e){if(arguments.length<2){if("string"==typeof ue){var Ee=this.node(),Ne=(ue=pe(ue)).length,He=-1;if(_e=Ee.classList){for(;++He<Ne;)if(!_e.contains(ue[He]))return!1}else for(_e=Ee.getAttribute("class");++He<Ne;)if(!ge(ue[He]).test(_e))return!1;return!0}for(_e in ue)this.each(xe(_e,ue[_e]));return this}return this.each(xe(ue,_e))},K.style=function(ue,_e,Ee){var Ne=arguments.length;if(Ne<3){if("string"!=typeof ue){for(Ee in Ne<2&&(_e=""),ue)this.each(we(Ee,ue[Ee],_e));return this}if(Ne<2){var He=this.node();return c(He).getComputedStyle(He,null).getPropertyValue(ue)}Ee=""}return this.each(we(ue,_e,Ee))},K.property=function(ue,_e){if(arguments.length<2){if("string"==typeof ue)return this.node()[ue];for(_e in ue)this.each(de(_e,ue[_e]));return this}return this.each(de(ue,_e))},K.text=function(ue){return arguments.length?this.each("function"==typeof ue?function(){var _e=ue.apply(this,arguments);this.textContent=null==_e?"":_e}:null==ue?function(){this.textContent=""}:function(){this.textContent=ue}):this.node().textContent},K.html=function(ue){return arguments.length?this.each("function"==typeof ue?function(){var _e=ue.apply(this,arguments);this.innerHTML=null==_e?"":_e}:null==ue?function(){this.innerHTML=""}:function(){this.innerHTML=ue}):this.node().innerHTML},K.append=function(ue){return ue=be(ue),this.select(function(){return this.appendChild(ue.apply(this,arguments))})},K.insert=function(ue,_e){return ue=be(ue),_e=Y(_e),this.select(function(){return this.insertBefore(ue.apply(this,arguments),_e.apply(this,arguments)||null)})},K.remove=function(){return this.each(Le)},K.data=function(ue,_e){var He,Ve,Ee=-1,Ne=this.length;if(!arguments.length){for(ue=new Array(Ne=(He=this[0]).length);++Ee<Ne;)(Ve=He[Ee])&&(ue[Ee]=Ve.__data__);return ue}function _t(er,Sr){var Mr,hn,Vr,Qr=er.length,cn=Sr.length,Dr=Math.min(Qr,cn),Nr=new Array(cn),$r=new Array(cn),sn=new Array(Qr);if(_e){var da,Rn=new y,la=new Array(Qr);for(Mr=-1;++Mr<Qr;)(hn=er[Mr])&&(Rn.has(da=_e.call(hn,hn.__data__,Mr))?sn[Mr]=hn:Rn.set(da,hn),la[Mr]=da);for(Mr=-1;++Mr<cn;)(hn=Rn.get(da=_e.call(Sr,Vr=Sr[Mr],Mr)))?!0!==hn&&(Nr[Mr]=hn,hn.__data__=Vr):$r[Mr]=De(Vr),Rn.set(da,!0);for(Mr=-1;++Mr<Qr;)Mr in la&&!0!==Rn.get(la[Mr])&&(sn[Mr]=er[Mr])}else{for(Mr=-1;++Mr<Dr;)Vr=Sr[Mr],(hn=er[Mr])?(hn.__data__=Vr,Nr[Mr]=hn):$r[Mr]=De(Vr);for(;Mr<cn;++Mr)$r[Mr]=De(Sr[Mr]);for(;Mr<Qr;++Mr)sn[Mr]=er[Mr]}$r.update=Nr,$r.parentNode=Nr.parentNode=sn.parentNode=er.parentNode,dt.push($r),zt.push(Nr),$t.push(sn)}var dt=Ke([]),zt=$([]),$t=$([]);if("function"==typeof ue)for(;++Ee<Ne;)_t(He=this[Ee],ue.call(He,He.parentNode.__data__,Ee));else for(;++Ee<Ne;)_t(He=this[Ee],ue);return zt.enter=function(){return dt},zt.exit=function(){return $t},zt},K.datum=function(ue){return arguments.length?this.property("__data__",ue):this.property("__data__")},K.filter=function(ue){var Ee,Ne,He,_e=[];"function"!=typeof ue&&(ue=ye(ue));for(var Ve=0,_t=this.length;Ve<_t;Ve++){_e.push(Ee=[]),Ee.parentNode=(Ne=this[Ve]).parentNode;for(var dt=0,zt=Ne.length;dt<zt;dt++)(He=Ne[dt])&&ue.call(He,He.__data__,dt,Ve)&&Ee.push(He)}return $(_e)},K.order=function(){for(var ue=-1,_e=this.length;++ue<_e;)for(var Ve,Ee=this[ue],Ne=Ee.length-1,He=Ee[Ne];--Ne>=0;)(Ve=Ee[Ne])&&(He&&He!==Ve.nextSibling&&He.parentNode.insertBefore(Ve,He),He=Ve);return this},K.sort=function(ue){ue=Ce.apply(this,arguments);for(var _e=-1,Ee=this.length;++_e<Ee;)this[_e].sort(ue);return this.order()},K.each=function(ue){return Fe(this,function(_e,Ee,Ne){ue.call(_e,_e.__data__,Ee,Ne)})},K.call=function(ue){var _e=m(arguments);return ue.apply(_e[0]=this,_e),this},K.empty=function(){return!this.node()},K.node=function(){for(var ue=0,_e=this.length;ue<_e;ue++)for(var Ee=this[ue],Ne=0,He=Ee.length;Ne<He;Ne++){var Ve=Ee[Ne];if(Ve)return Ve}return null},K.size=function(){var ue=0;return Fe(this,function(){++ue}),ue};var Ue=[];function Be(ue){var _e,Ee;return function(Ne,He,Ve){var zt,_t=ue[Ve].update,dt=_t.length;for(Ve!=Ee&&(Ee=Ve,_e=0),He>=_e&&(_e=He+1);!(zt=_t[_e])&&++_e<dt;);return zt}}function Ie(ue,_e,Ee){var Ne="__on"+ue,He=ue.indexOf("."),Ve=gt;He>0&&(ue=ue.slice(0,He));var _t=nt.get(ue);function dt(){var er=this[Ne];er&&(this.removeEventListener(ue,er,er.$),delete this[Ne])}return _t&&(ue=_t,Ve=Nt),He?_e?function zt(){var er=Ve(_e,m(arguments));dt.call(this),this.addEventListener(ue,this[Ne]=er,er.$=Ee),er._=_e}:dt:_e?N:function $t(){var Sr,er=new RegExp("^__on([^.]+)"+_.requote(ue)+"$");for(var Mr in this)if(Sr=Mr.match(er)){var Qr=this[Mr];this.removeEventListener(Sr[1],Qr,Qr.$),delete this[Mr]}}}_.selection.enter=Ke,_.selection.enter.prototype=Ue,Ue.append=K.append,Ue.empty=K.empty,Ue.node=K.node,Ue.call=K.call,Ue.size=K.size,Ue.select=function(ue){for(var Ee,Ne,He,Ve,_t,_e=[],dt=-1,zt=this.length;++dt<zt;){He=(Ve=this[dt]).update,_e.push(Ee=[]),Ee.parentNode=Ve.parentNode;for(var $t=-1,er=Ve.length;++$t<er;)(_t=Ve[$t])?(Ee.push(He[$t]=Ne=ue.call(Ve.parentNode,_t.__data__,$t,dt)),Ne.__data__=_t.__data__):Ee.push(null)}return $(_e)},Ue.insert=function(ue,_e){return arguments.length<2&&(_e=Be(this)),K.insert.call(this,ue,_e)},_.select=function(ue){var _e;return"string"==typeof ue?(_e=[V(ue,E)]).parentNode=E.documentElement:(_e=[ue]).parentNode=e(ue),$([_e])},_.selectAll=function(ue){var _e;return"string"==typeof ue?(_e=m(H(ue,E))).parentNode=E.documentElement:(_e=m(ue)).parentNode=null,$([_e])},K.on=function(ue,_e,Ee){var Ne=arguments.length;if(Ne<3){if("string"!=typeof ue){for(Ee in Ne<2&&(_e=!1),ue)this.each(Ie(Ee,ue[Ee],_e));return this}if(Ne<2)return(Ne=this.node()["__on"+ue])&&Ne._;Ee=!1}return this.each(Ie(ue,_e,Ee))};var nt=_.map({mouseenter:"mouseover",mouseleave:"mouseout"});function gt(ue,_e){return function(Ee){var Ne=_.event;_.event=Ee,_e[0]=this.__data__;try{ue.apply(this,_e)}finally{_.event=Ne}}}function Nt(ue,_e){var Ee=gt(ue,_e);return function(Ne){var Ve=Ne.relatedTarget;(!Ve||Ve!==this&&!(8&Ve.compareDocumentPosition(this)))&&Ee.call(this,Ne)}}E&&nt.forEach(function(ue){"on"+ue in E&&nt.remove(ue)});var St,Bt=0;function Zt(ue){var _e=".dragsuppress-"+ ++Bt,Ee="click"+_e,Ne=_.select(c(ue)).on("touchmove"+_e,oe).on("dragstart"+_e,oe).on("selectstart"+_e,oe);if(null==St&&(St=!("onselectstart"in ue)&&F(ue.style,"userSelect")),St){var He=e(ue).style,Ve=He[St];He[St]="none"}return function(_t){if(Ne.on(_e,null),St&&(He[St]=Ve),_t){var dt=function(){Ne.on(Ee,null)};Ne.on(Ee,function(){oe(),dt()},!0),setTimeout(dt,0)}}}_.mouse=function(ue){return wt(ue,se())};var Et=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function wt(ue,_e){_e.changedTouches&&(_e=_e.changedTouches[0]);var Ee=ue.ownerSVGElement||ue;if(Ee.createSVGPoint){var Ne=Ee.createSVGPoint();if(Et<0){var He=c(ue);if(He.scrollX||He.scrollY){var Ve=(Ee=_.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Et=!(Ve.f||Ve.e),Ee.remove()}}return Et?(Ne.x=_e.pageX,Ne.y=_e.pageY):(Ne.x=_e.clientX,Ne.y=_e.clientY),[(Ne=Ne.matrixTransform(ue.getScreenCTM().inverse())).x,Ne.y]}var _t=ue.getBoundingClientRect();return[_e.clientX-_t.left-ue.clientLeft,_e.clientY-_t.top-ue.clientTop]}function at(){return _.event.changedTouches[0].identifier}_.touch=function(ue,_e,Ee){if(arguments.length<3&&(Ee=_e,_e=se().changedTouches),_e)for(var Ve,Ne=0,He=_e.length;Ne<He;++Ne)if((Ve=_e[Ne]).identifier===Ee)return wt(ue,Ve)},_.behavior.drag=function(){var ue=ne(He,"drag","dragstart","dragend"),_e=null,Ee=Ve(N,_.mouse,c,"mousemove","mouseup"),Ne=Ve(at,_.touch,O,"touchmove","touchend");function He(){this.on("mousedown.drag",Ee).on("touchstart.drag",Ne)}function Ve(_t,dt,zt,$t,er){return function(){var sn,Sr=this,Mr=_.event.target.correspondingElement||_.event.target,Qr=Sr.parentNode,cn=ue.of(Sr,arguments),Dr=0,Nr=_t(),$r=".drag"+(null==Nr?"":"-"+Nr),hn=_.select(zt(Mr)).on($t+$r,la).on(er+$r,da),Vr=Zt(Mr),Rn=dt(Qr,Nr);function la(){var Ca,Da,ha=dt(Qr,Nr);!ha||(Dr|=(Ca=ha[0]-Rn[0])|(Da=ha[1]-Rn[1]),Rn=ha,cn({type:"drag",x:ha[0]+sn[0],y:ha[1]+sn[1],dx:Ca,dy:Da}))}function da(){!dt(Qr,Nr)||(hn.on($t+$r,null).on(er+$r,null),Vr(Dr),cn({type:"dragend"}))}sn=_e?[(sn=_e.apply(Sr,arguments)).x-Rn[0],sn.y-Rn[1]]:[0,0],cn({type:"dragstart"})}}return He.origin=function(_t){return arguments.length?(_e=_t,He):_e},_.rebind(He,ue,"on")},_.touches=function(ue,_e){return arguments.length<2&&(_e=se().touches),_e?m(_e).map(function(Ee){var Ne=wt(ue,Ee);return Ne.identifier=Ee.identifier,Ne}):[]};var vt=1e-6,Pe=Math.PI,Ze=2*Pe,Xe=Ze-vt,rt=Pe/2,kt=Pe/180,Tt=180/Pe;function ar(ue,_e,Ee){return(_e[0]-ue[0])*(Ee[1]-ue[1])-(_e[1]-ue[1])*(Ee[0]-ue[0])}function Jt(ue){return ue>1?rt:ue<-1?-rt:Math.asin(ue)}function rr(ue){return((ue=Math.exp(ue))+1/ue)/2}var on=Math.SQRT2;_.interpolateZoom=function(ue,_e){var Sr,Mr,Ee=ue[0],Ne=ue[1],He=ue[2],dt=_e[2],zt=_e[0]-Ee,$t=_e[1]-Ne,er=zt*zt+$t*$t;if(er<1e-12)Mr=Math.log(dt/He)/on,Sr=function(sn){return[Ee+sn*zt,Ne+sn*$t,He*Math.exp(on*sn*Mr)]};else{var Qr=Math.sqrt(er),cn=(dt*dt-He*He+4*er)/(2*He*2*Qr),Dr=(dt*dt-He*He-4*er)/(2*dt*2*Qr),Nr=Math.log(Math.sqrt(cn*cn+1)-cn),$r=Math.log(Math.sqrt(Dr*Dr+1)-Dr);Mr=($r-Nr)/on,Sr=function(sn){var hn=sn*Mr,Vr=rr(Nr),Rn=He/(2*Qr)*(Vr*function br(ue){return((ue=Math.exp(2*ue))-1)/(ue+1)}(on*hn+Nr)-function nr(ue){return((ue=Math.exp(ue))-1/ue)/2}(Nr));return[Ee+Rn*zt,Ne+Rn*$t,He*Vr/rr(on*hn+Nr)]}}return Sr.duration=1e3*Mr,Sr},_.behavior.zoom=function(){var _e,Ee,Ne,Sr,Qr,Dr,Nr,$r,sn,ue={x:0,y:0,k:1},He=[960,500],Ve=Yt,_t=250,dt=0,zt="mousedown.zoom",$t="mousemove.zoom",er="mouseup.zoom",Mr="touchstart.zoom",cn=ne(hn,"zoomstart","zoom","zoomend");function hn(na){na.on(zt,Ya).on(Vt+".zoom",hi).on("dblclick.zoom",Si).on(Mr,Ri)}function Vr(na){return[(na[0]-ue.x)/ue.k,(na[1]-ue.y)/ue.k]}function la(na){ue.k=Math.max(Ve[0],Math.min(Ve[1],na))}function da(na,Qa){Qa=function Rn(na){return[na[0]*ue.k+ue.x,na[1]*ue.k+ue.y]}(Qa),ue.x+=na[0]-Qa[0],ue.y+=na[1]-Qa[1]}function ha(na,Qa,ui,Ti){na.__chart__={x:ue.x,y:ue.y,k:ue.k},la(Math.pow(2,Ti)),da(Ee=Qa,ui),na=_.select(na),_t>0&&(na=na.transition().duration(_t)),na.call(hn.event)}function Ca(){Nr&&Nr.domain(Dr.range().map(function(na){return(na-ue.x)/ue.k}).map(Dr.invert)),sn&&sn.domain($r.range().map(function(na){return(na-ue.y)/ue.k}).map($r.invert))}function Da(na){dt++||na({type:"zoomstart"})}function si(na){Ca(),na({type:"zoom",scale:ue.k,translate:[ue.x,ue.y]})}function Oa(na){--dt||(na({type:"zoomend"}),Ee=null)}function Ya(){var na=this,Qa=cn.of(na,arguments),ui=0,Ti=_.select(c(na)).on($t,Oi).on(er,Ma),Ki=Vr(_.mouse(na)),Vi=Zt(na);function Oi(){ui=1,da(_.mouse(na),Ki),si(Qa)}function Ma(){Ti.on($t,null).on(er,null),Vi(ui),Oa(Qa)}ri.call(na),Da(Qa)}function Ri(){var Ki,na=this,Qa=cn.of(na,arguments),ui={},Ti=0,Vi=".zoom-"+_.event.changedTouches[0].identifier,Oi="touchmove"+Vi,Ma="touchend"+Vi,Ia=[],qi=_.select(na),mo=Zt(na);function po(){var Fs=_.touches(na);return Ki=ue.k,Fs.forEach(function(ki){ki.identifier in ui&&(ui[ki.identifier]=Vr(ki))}),Fs}function Gi(){var Fs=_.event.target;_.select(Fs).on(Oi,zs).on(Ma,Ll),Ia.push(Fs);for(var ki=_.event.changedTouches,$s=0,jo=ki.length;$s<jo;++$s)ui[ki[$s].identifier]=null;var pi=po(),oo=Date.now();if(1===pi.length)oo-Qr<500&&(ha(na,bu=pi[0],ui[bu.identifier],Math.floor(Math.log(ue.k)/Math.LN2)+1),oe()),Qr=oo;else if(pi.length>1){var bu,ml=pi[1],su=(bu=pi[0])[0]-ml[0],Yl=bu[1]-ml[1];Ti=su*su+Yl*Yl}}function zs(){var ki,$s,jo,pi,Fs=_.touches(na);ri.call(na);for(var oo=0,bu=Fs.length;oo<bu;++oo,pi=null)if(pi=ui[(jo=Fs[oo]).identifier]){if($s)break;ki=jo,$s=pi}if(pi){var ml=(ml=jo[0]-ki[0])*ml+(ml=jo[1]-ki[1])*ml,su=Ti&&Math.sqrt(ml/Ti);ki=[(ki[0]+jo[0])/2,(ki[1]+jo[1])/2],$s=[($s[0]+pi[0])/2,($s[1]+pi[1])/2],la(su*Ki)}Qr=null,da(ki,$s),si(Qa)}function Ll(){if(_.event.touches.length){for(var Fs=_.event.changedTouches,ki=0,$s=Fs.length;ki<$s;++ki)delete ui[Fs[ki].identifier];for(var jo in ui)return void po()}_.selectAll(Ia).on(Vi,null),qi.on(zt,Ya).on(Mr,Ri),mo(),Oa(Qa)}Gi(),Da(Qa),qi.on(zt,null).on(Mr,Gi)}function hi(){var na=cn.of(this,arguments);Sr?clearTimeout(Sr):(ri.call(this),_e=Vr(Ee=Ne||_.mouse(this)),Da(na)),Sr=setTimeout(function(){Sr=null,Oa(na)},50),oe(),la(Math.pow(2,.002*qt())*ue.k),da(Ee,_e),si(na)}function Si(){var na=_.mouse(this),Qa=Math.log(ue.k)/Math.LN2;ha(this,na,Vr(na),_.event.shiftKey?Math.ceil(Qa)-1:Math.floor(Qa)+1)}return Vt||(Vt="onwheel"in E?(qt=function(){return-_.event.deltaY*(_.event.deltaMode?120:1)},"wheel"):"onmousewheel"in E?(qt=function(){return _.event.wheelDelta},"mousewheel"):(qt=function(){return-_.event.detail},"MozMousePixelScroll")),hn.event=function(na){na.each(function(){var Qa=cn.of(this,arguments),ui=ue;Wi?_.select(this).transition().each("start.zoom",function(){ue=this.__chart__||{x:0,y:0,k:1},Da(Qa)}).tween("zoom:zoom",function(){var Ti=He[0],Vi=Ee?Ee[0]:Ti/2,Oi=Ee?Ee[1]:He[1]/2,Ma=_.interpolateZoom([(Vi-ue.x)/ue.k,(Oi-ue.y)/ue.k,Ti/ue.k],[(Vi-ui.x)/ui.k,(Oi-ui.y)/ui.k,Ti/ui.k]);return function(Ia){var qi=Ma(Ia),mo=Ti/qi[2];this.__chart__=ue={x:Vi-qi[0]*mo,y:Oi-qi[1]*mo,k:mo},si(Qa)}}).each("interrupt.zoom",function(){Oa(Qa)}).each("end.zoom",function(){Oa(Qa)}):(this.__chart__=ue,Da(Qa),si(Qa),Oa(Qa))})},hn.translate=function(na){return arguments.length?(ue={x:+na[0],y:+na[1],k:ue.k},Ca(),hn):[ue.x,ue.y]},hn.scale=function(na){return arguments.length?(ue={x:ue.x,y:ue.y,k:null},la(+na),Ca(),hn):ue.k},hn.scaleExtent=function(na){return arguments.length?(Ve=null==na?Yt:[+na[0],+na[1]],hn):Ve},hn.center=function(na){return arguments.length?(Ne=na&&[+na[0],+na[1]],hn):Ne},hn.size=function(na){return arguments.length?(He=na&&[+na[0],+na[1]],hn):He},hn.duration=function(na){return arguments.length?(_t=+na,hn):_t},hn.x=function(na){return arguments.length?(Nr=na,Dr=na.copy(),ue={x:0,y:0,k:1},hn):Nr},hn.y=function(na){return arguments.length?(sn=na,$r=na.copy(),ue={x:0,y:0,k:1},hn):sn},_.rebind(hn,cn,"on")};var qt,Vt,Yt=[0,1/0];function Tr(){}function tt(ue,_e,Ee){return this instanceof tt?(this.h=+ue,this.s=+_e,void(this.l=+Ee)):arguments.length<2?ue instanceof tt?new tt(ue.h,ue.s,ue.l):Wr(""+ue,Kr,tt):new tt(ue,_e,Ee)}_.color=Tr,Tr.prototype.toString=function(){return this.rgb()+""},_.hsl=tt;var je=tt.prototype=new Tr;function ct(ue,_e,Ee){var Ne,He;function _t(dt){return Math.round(255*function Ve(dt){return dt>360?dt-=360:dt<0&&(dt+=360),dt<60?Ne+(He-Ne)*dt/60:dt<180?He:dt<240?Ne+(He-Ne)*(240-dt)/60:Ne}(dt))}return ue=isNaN(ue)?0:(ue%=360)<0?ue+360:ue,_e=isNaN(_e)||_e<0?0:_e>1?1:_e,Ne=2*(Ee=Ee<0?0:Ee>1?1:Ee)-(He=Ee<=.5?Ee*(1+_e):Ee+_e-Ee*_e),new Lr(_t(ue+120),_t(ue),_t(ue-120))}function ht(ue,_e,Ee){return this instanceof ht?(this.h=+ue,this.c=+_e,void(this.l=+Ee)):arguments.length<2?ue instanceof ht?new ht(ue.h,ue.c,ue.l):Gt(ue instanceof Je?ue.l:(ue=Cr((ue=_.rgb(ue)).r,ue.g,ue.b)).l,ue.a,ue.b):new ht(ue,_e,Ee)}je.brighter=function(ue){return ue=Math.pow(.7,arguments.length?ue:1),new tt(this.h,this.s,this.l/ue)},je.darker=function(ue){return ue=Math.pow(.7,arguments.length?ue:1),new tt(this.h,this.s,ue*this.l)},je.rgb=function(){return ct(this.h,this.s,this.l)},_.hcl=ht;var Me=ht.prototype=new Tr;function Se(ue,_e,Ee){return isNaN(ue)&&(ue=0),isNaN(_e)&&(_e=0),new Je(Ee,Math.cos(ue*=kt)*_e,Math.sin(ue)*_e)}function Je(ue,_e,Ee){return this instanceof Je?(this.l=+ue,this.a=+_e,void(this.b=+Ee)):arguments.length<2?ue instanceof Je?new Je(ue.l,ue.a,ue.b):ue instanceof ht?Se(ue.h,ue.c,ue.l):Cr((ue=Lr(ue)).r,ue.g,ue.b):new Je(ue,_e,Ee)}Me.brighter=function(ue){return new ht(this.h,this.c,Math.min(100,this.l+We*(arguments.length?ue:1)))},Me.darker=function(ue){return new ht(this.h,this.c,Math.max(0,this.l-We*(arguments.length?ue:1)))},Me.rgb=function(){return Se(this.h,this.c,this.l).rgb()},_.lab=Je;var We=18,Ct=Je.prototype=new Tr;function Dt(ue,_e,Ee){var Ne=(ue+16)/116,He=Ne+_e/500,Ve=Ne-Ee/200;return new Lr(Jr(3.2404542*(He=.95047*fr(He))-1.5371385*(Ne=1*fr(Ne))-.4985314*(Ve=1.08883*fr(Ve))),Jr(-.969266*He+1.8760108*Ne+.041556*Ve),Jr(.0556434*He-.2040259*Ne+1.0572252*Ve))}function Gt(ue,_e,Ee){return ue>0?new ht(Math.atan2(Ee,_e)*Tt,Math.sqrt(_e*_e+Ee*Ee),ue):new ht(NaN,NaN,ue)}function fr(ue){return ue>.206893034?ue*ue*ue:(ue-4/29)/7.787037}function pr(ue){return ue>.008856?Math.pow(ue,1/3):7.787037*ue+4/29}function Jr(ue){return Math.round(255*(ue<=.00304?12.92*ue:1.055*Math.pow(ue,1/2.4)-.055))}function Lr(ue,_e,Ee){return this instanceof Lr?(this.r=~~ue,this.g=~~_e,void(this.b=~~Ee)):arguments.length<2?ue instanceof Lr?new Lr(ue.r,ue.g,ue.b):Wr(""+ue,Lr,ct):new Lr(ue,_e,Ee)}function Ar(ue){return new Lr(ue>>16,ue>>8&255,255&ue)}function en(ue){return Ar(ue)+""}Ct.brighter=function(ue){return new Je(Math.min(100,this.l+We*(arguments.length?ue:1)),this.a,this.b)},Ct.darker=function(ue){return new Je(Math.max(0,this.l-We*(arguments.length?ue:1)),this.a,this.b)},Ct.rgb=function(){return Dt(this.l,this.a,this.b)},_.rgb=Lr;var mr=Lr.prototype=new Tr;function wr(ue){return ue<16?"0"+Math.max(0,ue).toString(16):Math.min(255,ue).toString(16)}function Wr(ue,_e,Ee){var _t,dt,zt,Ne=0,He=0,Ve=0;if(_t=/([a-z]+)\((.*)\)/.exec(ue=ue.toLowerCase()))switch(dt=_t[2].split(","),_t[1]){case"hsl":return Ee(parseFloat(dt[0]),parseFloat(dt[1])/100,parseFloat(dt[2])/100);case"rgb":return _e(It(dt[0]),It(dt[1]),It(dt[2]))}return(zt=Qt.get(ue))?_e(zt.r,zt.g,zt.b):(null!=ue&&"#"===ue.charAt(0)&&!isNaN(zt=parseInt(ue.slice(1),16))&&(4===ue.length?(Ne=(3840&zt)>>4,Ne|=Ne>>4,He=240&zt,He|=He>>4,Ve=15&zt,Ve|=Ve<<4):7===ue.length&&(Ne=(16711680&zt)>>16,He=(65280&zt)>>8,Ve=255&zt)),_e(Ne,He,Ve))}function Kr(ue,_e,Ee){var _t,dt,Ne=Math.min(ue/=255,_e/=255,Ee/=255),He=Math.max(ue,_e,Ee),Ve=He-Ne,zt=(He+Ne)/2;return Ve?(dt=zt<.5?Ve/(He+Ne):Ve/(2-He-Ne),_t=ue==He?(_e-Ee)/Ve+(_e<Ee?6:0):_e==He?(Ee-ue)/Ve+2:(ue-_e)/Ve+4,_t*=60):(_t=NaN,dt=zt>0&&zt<1?0:_t),new tt(_t,dt,zt)}function Cr(ue,_e,Ee){var Ne=pr((.4124564*(ue=it(ue))+.3575761*(_e=it(_e))+.1804375*(Ee=it(Ee)))/.95047),He=pr((.2126729*ue+.7151522*_e+.072175*Ee)/1);return Je(116*He-16,500*(Ne-He),200*(He-pr((.0193339*ue+.119192*_e+.9503041*Ee)/1.08883)))}function it(ue){return(ue/=255)<=.04045?ue/12.92:Math.pow((ue+.055)/1.055,2.4)}function It(ue){var _e=parseFloat(ue);return"%"===ue.charAt(ue.length-1)?Math.round(2.55*_e):_e}mr.brighter=function(ue){ue=Math.pow(.7,arguments.length?ue:1);var _e=this.r,Ee=this.g,Ne=this.b,He=30;return _e||Ee||Ne?(_e&&_e<He&&(_e=He),Ee&&Ee<He&&(Ee=He),Ne&&Ne<He&&(Ne=He),new Lr(Math.min(255,_e/ue),Math.min(255,Ee/ue),Math.min(255,Ne/ue))):new Lr(He,He,He)},mr.darker=function(ue){return new Lr((ue=Math.pow(.7,arguments.length?ue:1))*this.r,ue*this.g,ue*this.b)},mr.hsl=function(){return Kr(this.r,this.g,this.b)},mr.toString=function(){return"#"+wr(this.r)+wr(this.g)+wr(this.b)};var Qt=_.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function ir(ue){return"function"==typeof ue?ue:function(){return ue}}function Or(ue){return function(_e,Ee,Ne){return 2===arguments.length&&"function"==typeof Ee&&(Ne=Ee,Ee=null),qr(_e,Ee,ue,Ne)}}function qr(ue,_e,Ee,Ne){var He={},Ve=_.dispatch("beforesend","progress","load","error"),_t={},dt=new XMLHttpRequest,zt=null;function $t(){var Sr,er=dt.status;if(!er&&function kr(ue){var _e=ue.responseType;return _e&&"text"!==_e?ue.response:ue.responseText}(dt)||er>=200&&er<300||304===er){try{Sr=Ee.call(He,dt)}catch(Mr){return void Ve.error.call(He,Mr)}Ve.load.call(He,Sr)}else Ve.error.call(He,dt)}return self.XDomainRequest&&!("withCredentials"in dt)&&/^(http(s)?:)?\/\//.test(ue)&&(dt=new XDomainRequest),"onload"in dt?dt.onload=dt.onerror=$t:dt.onreadystatechange=function(){dt.readyState>3&&$t()},dt.onprogress=function(er){var Sr=_.event;_.event=er;try{Ve.progress.call(He,dt)}finally{_.event=Sr}},He.header=function(er,Sr){return er=(er+"").toLowerCase(),arguments.length<2?_t[er]:(null==Sr?delete _t[er]:_t[er]=Sr+"",He)},He.mimeType=function(er){return arguments.length?(_e=null==er?null:er+"",He):_e},He.responseType=function(er){return arguments.length?(zt=er,He):zt},He.response=function(er){return Ee=er,He},["get","post"].forEach(function(er){He[er]=function(){return He.send.apply(He,[er].concat(m(arguments)))}}),He.send=function(er,Sr,Mr){if(2===arguments.length&&"function"==typeof Sr&&(Mr=Sr,Sr=null),dt.open(er,ue,!0),null!=_e&&!("accept"in _t)&&(_t.accept=_e+",*/*"),dt.setRequestHeader)for(var Qr in _t)dt.setRequestHeader(Qr,_t[Qr]);return null!=_e&&dt.overrideMimeType&&dt.overrideMimeType(_e),null!=zt&&(dt.responseType=zt),null!=Mr&&He.on("error",Mr).on("load",function(cn){Mr(null,cn)}),Ve.beforesend.call(He,dt),dt.send(null==Sr?null:Sr),He},He.abort=function(){return dt.abort(),He},_.rebind(He,Ve,"on"),null==Ne?He:He.get(function Ir(ue){return 1===ue.length?function(_e,Ee){ue(null==_e?Ee:null)}:ue}(Ne))}Qt.forEach(function(ue,_e){Qt.set(ue,Ar(_e))}),_.functor=ir,_.xhr=Or(O),_.dsv=function(ue,_e){var Ee=new RegExp('["'+ue+"\n]"),Ne=ue.charCodeAt(0);function He($t,er,Sr){arguments.length<3&&(Sr=er,er=null);var Mr=qr($t,_e,null==er?Ve:_t(er),Sr);return Mr.row=function(Qr){return arguments.length?Mr.response(null==(er=Qr)?Ve:_t(Qr)):er},Mr}function Ve($t){return He.parse($t.responseText)}function _t($t){return function(er){return He.parse(er.responseText,$t)}}function dt($t){return $t.map(zt).join(ue)}function zt($t){return Ee.test($t)?'"'+$t.replace(/\"/g,'""')+'"':$t}return He.parse=function($t,er){var Sr;return He.parseRows($t,function(Mr,Qr){if(Sr)return Sr(Mr,Qr-1);var cn=function(Dr){for(var Nr={},$r=Mr.length,sn=0;sn<$r;++sn)Nr[Mr[sn]]=Dr[sn];return Nr};Sr=er?function(Dr,Nr){return er(cn(Dr),Nr)}:cn})},He.parseRows=function($t,er){var $r,sn,Sr={},Mr={},Qr=[],cn=$t.length,Dr=0,Nr=0;function hn(){if(Dr>=cn)return Mr;if(sn)return sn=!1,Sr;var Rn=Dr;if(34===$t.charCodeAt(Rn)){for(var la=Rn;la++<cn;)if(34===$t.charCodeAt(la)){if(34!==$t.charCodeAt(la+1))break;++la}return Dr=la+2,13===(da=$t.charCodeAt(la+1))?(sn=!0,10===$t.charCodeAt(la+2)&&++Dr):10===da&&(sn=!0),$t.slice(Rn+1,la).replace(/""/g,'"')}for(;Dr<cn;){var da,ha=1;if(10===(da=$t.charCodeAt(Dr++)))sn=!0;else if(13===da)sn=!0,10===$t.charCodeAt(Dr)&&(++Dr,++ha);else if(da!==Ne)continue;return $t.slice(Rn,Dr-ha)}return $t.slice(Rn)}for(;($r=hn())!==Mr;){for(var Vr=[];$r!==Sr&&$r!==Mr;)Vr.push($r),$r=hn();er&&null==(Vr=er(Vr,Nr++))||Qr.push(Vr)}return Qr},He.format=function($t){if(Array.isArray($t[0]))return He.formatRows($t);var er=new z,Sr=[];return $t.forEach(function(Mr){for(var Qr in Mr)er.has(Qr)||Sr.push(er.add(Qr))}),[Sr.map(zt).join(ue)].concat($t.map(function(Mr){return Sr.map(function(Qr){return zt(Mr[Qr])}).join(ue)})).join("\n")},He.formatRows=function($t){return $t.map(dt).join("\n")},He},_.csv=_.dsv(",","text/csv"),_.tsv=_.dsv("\t","text/tab-separated-values");var Zr,An,wn,Zn,Ln=this[F(this,"requestAnimationFrame")]||function(ue){setTimeout(ue,17)};function Wn(ue,_e,Ee){var Ne=arguments.length;Ne<2&&(_e=0),Ne<3&&(Ee=Date.now());var Ve={c:ue,t:Ee+_e,n:null};return An?An.n=Ve:Zr=Ve,An=Ve,wn||(Zn=clearTimeout(Zn),wn=1,Ln($n)),Ve}function $n(){var ue=wa(),_e=ma()-ue;_e>24?(isFinite(_e)&&(clearTimeout(Zn),Zn=setTimeout($n,_e)),wn=0):(wn=1,Ln($n))}function wa(){for(var ue=Date.now(),_e=Zr;_e;)ue>=_e.t&&_e.c(ue-_e.t)&&(_e.c=null),_e=_e.n;return ue}function ma(){for(var ue,_e=Zr,Ee=1/0;_e;)_e.c?(_e.t<Ee&&(Ee=_e.t),_e=(ue=_e).n):_e=ue?ue.n=_e.n:Zr=_e.n;return An=ue,Ee}function $a(ue){return ue[0]}function Ja(ue){return ue[1]}function Va(ue){for(var _e=ue.length,Ee=[0,1],Ne=2,He=2;He<_e;He++){for(;Ne>1&&ar(ue[Ee[Ne-2]],ue[Ee[Ne-1]],ue[He])<=0;)--Ne;Ee[Ne++]=He}return Ee.slice(0,Ne)}function ai(ue,_e){return ue[0]-_e[0]||ue[1]-_e[1]}_.timer=function(){Wn.apply(this,arguments)},_.timer.flush=function(){wa(),ma()},_.round=function(ue,_e){return _e?Math.round(ue*(_e=Math.pow(10,_e)))/_e:Math.round(ue)},_.geom={},_.geom.hull=function(ue){var _e=$a,Ee=Ja;if(arguments.length)return Ne(ue);function Ne(He){if(He.length<3)return[];var dt,Ve=ir(_e),_t=ir(Ee),zt=He.length,$t=[],er=[];for(dt=0;dt<zt;dt++)$t.push([+Ve.call(this,He[dt],dt),+_t.call(this,He[dt],dt),dt]);for($t.sort(ai),dt=0;dt<zt;dt++)er.push([$t[dt][0],-$t[dt][1]]);var Sr=Va($t),Mr=Va(er),Qr=Mr[0]===Sr[0],cn=Mr[Mr.length-1]===Sr[Sr.length-1],Dr=[];for(dt=Sr.length-1;dt>=0;--dt)Dr.push(He[$t[Sr[dt]][2]]);for(dt=+Qr;dt<Mr.length-cn;++dt)Dr.push(He[$t[Mr[dt]][2]]);return Dr}return Ne.x=function(He){return arguments.length?(_e=He,Ne):_e},Ne.y=function(He){return arguments.length?(Ee=He,Ne):Ee},Ne},_.geom.polygon=function(ue){return G(ue,Er),ue};var Er=_.geom.polygon.prototype=[];function gn(ue,_e,Ee){return(Ee[0]-_e[0])*(ue[1]-_e[1])<(Ee[1]-_e[1])*(ue[0]-_e[0])}function dn(ue,_e,Ee,Ne){var He=ue[0],Ve=Ee[0],_t=_e[0]-He,dt=Ne[0]-Ve,zt=ue[1],$t=Ee[1],er=_e[1]-zt,Sr=Ne[1]-$t,Mr=(dt*(zt-$t)-Sr*(He-Ve))/(Sr*_t-dt*er);return[He+Mr*_t,zt+Mr*er]}function kn(ue){var _e=ue[0],Ee=ue[ue.length-1];return!(_e[0]-Ee[0]||_e[1]-Ee[1])}Er.area=function(){for(var Ee,ue=-1,_e=this.length,Ne=this[_e-1],He=0;++ue<_e;)He+=(Ee=Ne)[1]*(Ne=this[ue])[0]-Ee[0]*Ne[1];return.5*He},Er.centroid=function(ue){var Ve,dt,_e=-1,Ee=this.length,Ne=0,He=0,_t=this[Ee-1];for(arguments.length||(ue=-1/(6*this.area()));++_e<Ee;)Ne+=((Ve=_t)[0]+(_t=this[_e])[0])*(dt=Ve[0]*_t[1]-_t[0]*Ve[1]),He+=(Ve[1]+_t[1])*dt;return[Ne*ue,He*ue]},Er.clip=function(ue){for(var _e,Ve,_t,zt,$t,er,Ee=kn(ue),Ne=-1,He=this.length-kn(this),dt=this[He-1];++Ne<He;){for(_e=ue.slice(),ue.length=0,zt=this[Ne],$t=_e[(_t=_e.length-Ee)-1],Ve=-1;++Ve<_t;)gn(er=_e[Ve],dt,zt)?(gn($t,dt,zt)||ue.push(dn($t,er,dt,zt)),ue.push(er)):gn($t,dt,zt)&&ue.push(dn($t,er,dt,zt)),$t=er;Ee&&ue.push(ue[0]),dt=zt}return ue};var Un,ra,Gn,Xn,pa,On=[],oi=[];function Ht(){Ao(this),this.edge=this.site=this.circle=null}function dr(ue){var _e=On.pop()||new Ht;return _e.site=ue,_e}function rn(ue){Fn(ue),Gn.remove(ue),On.push(ue),Ao(ue)}function ln(ue){var _e=ue.circle,Ee=_e.x,Ne=_e.cy,He={x:Ee,y:Ne},Ve=ue.P,_t=ue.N,dt=[ue];rn(ue);for(var zt=Ve;zt.circle&&p(Ee-zt.circle.x)<vt&&p(Ne-zt.circle.cy)<vt;)Ve=zt.P,dt.unshift(zt),rn(zt),zt=Ve;dt.unshift(zt),Fn(zt);for(var $t=_t;$t.circle&&p(Ee-$t.circle.x)<vt&&p(Ne-$t.circle.cy)<vt;)_t=$t.N,dt.push($t),rn($t),$t=_t;dt.push($t),Fn($t);var Sr,er=dt.length;for(Sr=1;Sr<er;++Sr)sa(($t=dt[Sr]).edge,(zt=dt[Sr-1]).site,$t.site,He);($t=dt[er-1]).edge=va((zt=dt[0]).site,$t.site,null,He),vn(zt),vn($t)}function or(ue){for(var Ne,He,Ve,_t,_e=ue.x,Ee=ue.y,dt=Gn._;dt;)if((Ve=Br(dt,Ee)-_e)>vt)dt=dt.L;else{if(!((_t=_e-Rt(dt,Ee))>vt)){Ve>-vt?(Ne=dt.P,He=dt):_t>-vt?(Ne=dt,He=dt.N):Ne=He=dt;break}if(!dt.R){Ne=dt;break}dt=dt.R}var zt=dr(ue);if(Gn.insert(Ne,zt),Ne||He){if(Ne===He)return Fn(Ne),He=dr(Ne.site),Gn.insert(zt,He),zt.edge=He.edge=va(Ne.site,zt.site),vn(Ne),void vn(He);if(!He)return void(zt.edge=va(Ne.site,zt.site));Fn(Ne),Fn(He);var $t=Ne.site,er=$t.x,Sr=$t.y,Mr=ue.x-er,Qr=ue.y-Sr,cn=He.site,Dr=cn.x-er,Nr=cn.y-Sr,$r=2*(Mr*Nr-Qr*Dr),sn=Mr*Mr+Qr*Qr,hn=Dr*Dr+Nr*Nr,Vr={x:(Nr*sn-Qr*hn)/$r+er,y:(Mr*hn-Dr*sn)/$r+Sr};sa(He.edge,$t,cn,Vr),zt.edge=va($t,ue,null,Vr),He.edge=va(ue,cn,null,Vr),vn(Ne),vn(He)}}function Br(ue,_e){var Ee=ue.site,Ne=Ee.x,He=Ee.y,Ve=He-_e;if(!Ve)return Ne;var _t=ue.P;if(!_t)return-1/0;var dt=(Ee=_t.site).x,zt=Ee.y,$t=zt-_e;if(!$t)return dt;var er=dt-Ne,Sr=1/Ve-1/$t,Mr=er/$t;return Sr?(-Mr+Math.sqrt(Mr*Mr-2*Sr*(er*er/(-2*$t)-zt+$t/2+He-Ve/2)))/Sr+Ne:(Ne+dt)/2}function Rt(ue,_e){var Ee=ue.N;if(Ee)return Br(Ee,_e);var Ne=ue.site;return Ne.y===_e?Ne.x:1/0}function Lt(ue){this.site=ue,this.edges=[]}function Wt(ue,_e){return _e.angle-ue.angle}function hr(){Ao(this),this.x=this.y=this.arc=this.site=this.cy=null}function vn(ue){var _e=ue.P,Ee=ue.N;if(_e&&Ee){var Ne=_e.site,He=ue.site,Ve=Ee.site;if(Ne!==Ve){var _t=He.x,dt=He.y,zt=Ne.x-_t,$t=Ne.y-dt,er=Ve.x-_t,Sr=2*(zt*(Nr=Ve.y-dt)-$t*er);if(!(Sr>=-1e-12)){var Mr=zt*zt+$t*$t,Qr=er*er+Nr*Nr,cn=(Nr*Mr-$t*Qr)/Sr,Dr=(zt*Qr-er*Mr)/Sr,Nr=Dr+dt,$r=oi.pop()||new hr;$r.arc=ue,$r.site=He,$r.x=cn+_t,$r.y=Nr+Math.sqrt(cn*cn+Dr*Dr),$r.cy=Nr,ue.circle=$r;for(var sn=null,hn=pa._;hn;)if($r.y<hn.y||$r.y===hn.y&&$r.x<=hn.x){if(!hn.L){sn=hn.P;break}hn=hn.L}else{if(!hn.R){sn=hn;break}hn=hn.R}pa.insert(sn,$r),sn||(Xn=$r)}}}}function Fn(ue){var _e=ue.circle;_e&&(_e.P||(Xn=_e.N),pa.remove(_e),oi.push(_e),Ao(_e),ue.circle=null)}function jn(ue,_e){var Ee=ue.b;if(Ee)return!0;var Nr,$r,Ne=ue.a,He=_e[0][0],Ve=_e[1][0],_t=_e[0][1],dt=_e[1][1],zt=ue.l,$t=ue.r,er=zt.x,Sr=zt.y,Mr=$t.x,Qr=$t.y,cn=(er+Mr)/2;if(Qr===Sr){if(cn<He||cn>=Ve)return;if(er>Mr){if(Ne){if(Ne.y>=dt)return}else Ne={x:cn,y:_t};Ee={x:cn,y:dt}}else{if(Ne){if(Ne.y<_t)return}else Ne={x:cn,y:dt};Ee={x:cn,y:_t}}}else if($r=(Sr+Qr)/2-(Nr=(er-Mr)/(Qr-Sr))*cn,Nr<-1||Nr>1)if(er>Mr){if(Ne){if(Ne.y>=dt)return}else Ne={x:(_t-$r)/Nr,y:_t};Ee={x:(dt-$r)/Nr,y:dt}}else{if(Ne){if(Ne.y<_t)return}else Ne={x:(dt-$r)/Nr,y:dt};Ee={x:(_t-$r)/Nr,y:_t}}else if(Sr<Qr){if(Ne){if(Ne.x>=Ve)return}else Ne={x:He,y:Nr*He+$r};Ee={x:Ve,y:Nr*Ve+$r}}else{if(Ne){if(Ne.x<He)return}else Ne={x:Ve,y:Nr*Ve+$r};Ee={x:He,y:Nr*He+$r}}return ue.a=Ne,ue.b=Ee,!0}function ia(ue,_e){this.l=ue,this.r=_e,this.a=this.b=null}function va(ue,_e,Ee,Ne){var He=new ia(ue,_e);return Un.push(He),Ee&&sa(He,ue,_e,Ee),Ne&&sa(He,_e,ue,Ne),ra[ue.i].edges.push(new Aa(He,ue,_e)),ra[_e.i].edges.push(new Aa(He,_e,ue)),He}function _a(ue,_e,Ee){var Ne=new ia(ue,null);return Ne.a=_e,Ne.b=Ee,Un.push(Ne),Ne}function sa(ue,_e,Ee,Ne){ue.a||ue.b?ue.l===Ee?ue.b=Ne:ue.a=Ne:(ue.a=Ne,ue.l=_e,ue.r=Ee)}function Aa(ue,_e,Ee){var Ne=ue.a,He=ue.b;this.edge=ue,this.site=_e,this.angle=Ee?Math.atan2(Ee.y-_e.y,Ee.x-_e.x):ue.l===_e?Math.atan2(He.x-Ne.x,Ne.y-He.y):Math.atan2(Ne.x-He.x,He.y-Ne.y)}function xo(){this._=null}function Ao(ue){ue.U=ue.C=ue.L=ue.R=ue.P=ue.N=null}function Io(ue,_e){var Ee=_e,Ne=_e.R,He=Ee.U;He?He.L===Ee?He.L=Ne:He.R=Ne:ue._=Ne,Ne.U=He,Ee.U=Ne,Ee.R=Ne.L,Ee.R&&(Ee.R.U=Ee),Ne.L=Ee}function cs(ue,_e){var Ee=_e,Ne=_e.L,He=Ee.U;He?He.L===Ee?He.L=Ne:He.R=Ne:ue._=Ne,Ne.U=He,Ee.U=Ne,Ee.L=Ne.R,Ee.L&&(Ee.L.U=Ee),Ne.R=Ee}function Jl(ue){for(;ue.L;)ue=ue.L;return ue}function wl(ue,_e){var Ne,He,Ve,Ee=ue.sort(gi).pop();for(Un=[],ra=new Array(ue.length),Gn=new xo,pa=new xo;;)if(Ve=Xn,Ee&&(!Ve||Ee.y<Ve.y||Ee.y===Ve.y&&Ee.x<Ve.x))(Ee.x!==Ne||Ee.y!==He)&&(ra[Ee.i]=new Lt(Ee),or(Ee),Ne=Ee.x,He=Ee.y),Ee=ue.pop();else{if(!Ve)break;ln(Ve.arc)}_e&&(function _n(ue){for(var He,_e=Un,Ee=function Jn(ue,_e,Ee,Ne){return function(He){var Dr,Ve=He.a,_t=He.b,dt=Ve.x,zt=Ve.y,Sr=0,Mr=1,Qr=_t.x-dt,cn=_t.y-zt;if(Dr=ue-dt,Qr||!(Dr>0)){if(Dr/=Qr,Qr<0){if(Dr<Sr)return;Dr<Mr&&(Mr=Dr)}else if(Qr>0){if(Dr>Mr)return;Dr>Sr&&(Sr=Dr)}if(Dr=Ee-dt,Qr||!(Dr<0)){if(Dr/=Qr,Qr<0){if(Dr>Mr)return;Dr>Sr&&(Sr=Dr)}else if(Qr>0){if(Dr<Sr)return;Dr<Mr&&(Mr=Dr)}if(Dr=_e-zt,cn||!(Dr>0)){if(Dr/=cn,cn<0){if(Dr<Sr)return;Dr<Mr&&(Mr=Dr)}else if(cn>0){if(Dr>Mr)return;Dr>Sr&&(Sr=Dr)}if(Dr=Ne-zt,cn||!(Dr<0)){if(Dr/=cn,cn<0){if(Dr>Mr)return;Dr>Sr&&(Sr=Dr)}else if(cn>0){if(Dr<Sr)return;Dr<Mr&&(Mr=Dr)}return Sr>0&&(He.a={x:dt+Sr*Qr,y:zt+Sr*cn}),Mr<1&&(He.b={x:dt+Mr*Qr,y:zt+Mr*cn}),He}}}}}}(ue[0][0],ue[0][1],ue[1][0],ue[1][1]),Ne=_e.length;Ne--;)(!jn(He=_e[Ne],ue)||!Ee(He)||p(He.a.x-He.b.x)<vt&&p(He.a.y-He.b.y)<vt)&&(He.a=He.b=null,_e.splice(Ne,1))}(_e),function Pt(ue){for(var Ve,_t,dt,zt,Sr,Mr,Qr,cn,Dr,Nr,_e=ue[0][0],Ee=ue[1][0],Ne=ue[0][1],He=ue[1][1],$t=ra,er=$t.length;er--;)if((Sr=$t[er])&&Sr.prepare())for(cn=(Qr=Sr.edges).length,Mr=0;Mr<cn;)dt=(Nr=Qr[Mr].end()).x,zt=Nr.y,_t=(Dr=Qr[++Mr%cn].start()).y,(p(dt-(Ve=Dr.x))>vt||p(zt-_t)>vt)&&(Qr.splice(Mr,0,new Aa(_a(Sr.site,Nr,p(dt-_e)<vt&&He-zt>vt?{x:_e,y:p(Ve-_e)<vt?_t:He}:p(zt-He)<vt&&Ee-dt>vt?{x:p(_t-He)<vt?Ve:Ee,y:He}:p(dt-Ee)<vt&&zt-Ne>vt?{x:Ee,y:p(Ve-Ee)<vt?_t:Ne}:p(zt-Ne)<vt&&dt-_e>vt?{x:p(_t-Ne)<vt?Ve:_e,y:Ne}:null),Sr.site,null)),++cn)}(_e));var _t={cells:ra,edges:Un};return Gn=pa=Un=ra=null,_t}function gi(ue,_e){return _e.y-ue.y||_e.x-ue.x}Lt.prototype.prepare=function(){for(var Ee,ue=this.edges,_e=ue.length;_e--;)(!(Ee=ue[_e].edge).b||!Ee.a)&&ue.splice(_e,1);return ue.sort(Wt),ue.length},Aa.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},xo.prototype={insert:function(ue,_e){var Ee,Ne,He;if(ue){if(_e.P=ue,_e.N=ue.N,ue.N&&(ue.N.P=_e),ue.N=_e,ue.R){for(ue=ue.R;ue.L;)ue=ue.L;ue.L=_e}else ue.R=_e;Ee=ue}else this._?(ue=Jl(this._),_e.P=null,_e.N=ue,ue.P=ue.L=_e,Ee=ue):(_e.P=_e.N=null,this._=_e,Ee=null);for(_e.L=_e.R=null,_e.U=Ee,_e.C=!0,ue=_e;Ee&&Ee.C;)Ee===(Ne=Ee.U).L?(He=Ne.R)&&He.C?(Ee.C=He.C=!1,Ne.C=!0,ue=Ne):(ue===Ee.R&&(Io(this,Ee),Ee=(ue=Ee).U),Ee.C=!1,Ne.C=!0,cs(this,Ne)):(He=Ne.L)&&He.C?(Ee.C=He.C=!1,Ne.C=!0,ue=Ne):(ue===Ee.L&&(cs(this,Ee),Ee=(ue=Ee).U),Ee.C=!1,Ne.C=!0,Io(this,Ne)),Ee=ue.U;this._.C=!1},remove:function(ue){ue.N&&(ue.N.P=ue.P),ue.P&&(ue.P.N=ue.N),ue.N=ue.P=null;var Ee,Ve,_t,_e=ue.U,Ne=ue.L,He=ue.R;if(Ve=Ne?He?Jl(He):Ne:He,_e?_e.L===ue?_e.L=Ve:_e.R=Ve:this._=Ve,Ne&&He?(_t=Ve.C,Ve.C=ue.C,Ve.L=Ne,Ne.U=Ve,Ve!==He?(_e=Ve.U,Ve.U=ue.U,_e.L=ue=Ve.R,Ve.R=He,He.U=Ve):(Ve.U=_e,_e=Ve,ue=Ve.R)):(_t=ue.C,ue=Ve),ue&&(ue.U=_e),!_t){if(ue&&ue.C)return void(ue.C=!1);do{if(ue===this._)break;if(ue===_e.L){if((Ee=_e.R).C&&(Ee.C=!1,_e.C=!0,Io(this,_e),Ee=_e.R),Ee.L&&Ee.L.C||Ee.R&&Ee.R.C){(!Ee.R||!Ee.R.C)&&(Ee.L.C=!1,Ee.C=!0,cs(this,Ee),Ee=_e.R),Ee.C=_e.C,_e.C=Ee.R.C=!1,Io(this,_e),ue=this._;break}}else if((Ee=_e.L).C&&(Ee.C=!1,_e.C=!0,cs(this,_e),Ee=_e.L),Ee.L&&Ee.L.C||Ee.R&&Ee.R.C){(!Ee.L||!Ee.L.C)&&(Ee.R.C=!1,Ee.C=!0,Io(this,Ee),Ee=_e.L),Ee.C=_e.C,_e.C=Ee.L.C=!1,cs(this,_e),ue=this._;break}Ee.C=!0,ue=_e,_e=_e.U}while(!ue.C);ue&&(ue.C=!1)}}},_.geom.voronoi=function(ue){var _e=$a,Ee=Ja,Ne=_e,He=Ee,Ve=fs;if(ue)return _t(ue);function _t(zt){var $t=new Array(zt.length),er=Ve[0][0],Sr=Ve[0][1],Mr=Ve[1][0],Qr=Ve[1][1];return wl(dt(zt),Ve).cells.forEach(function(cn,Dr){var Nr=cn.edges,$r=cn.site;($t[Dr]=Nr.length?Nr.map(function(hn){var Vr=hn.start();return[Vr.x,Vr.y]}):$r.x>=er&&$r.x<=Mr&&$r.y>=Sr&&$r.y<=Qr?[[er,Qr],[Mr,Qr],[Mr,Sr],[er,Sr]]:[]).point=zt[Dr]}),$t}function dt(zt){return zt.map(function($t,er){return{x:Math.round(Ne($t,er)/vt)*vt,y:Math.round(He($t,er)/vt)*vt,i:er}})}return _t.links=function(zt){return wl(dt(zt)).edges.filter(function($t){return $t.l&&$t.r}).map(function($t){return{source:zt[$t.l.i],target:zt[$t.r.i]}})},_t.triangles=function(zt){var $t=[];return wl(dt(zt)).cells.forEach(function(er,Sr){for(var $r,Mr=er.site,Qr=er.edges.sort(Wt),cn=-1,Dr=Qr.length,sn=Qr[Dr-1].edge,hn=sn.l===Mr?sn.r:sn.l;++cn<Dr;)$r=hn,hn=(sn=Qr[cn].edge).l===Mr?sn.r:sn.l,Sr<$r.i&&Sr<hn.i&&Hs(Mr,$r,hn)<0&&$t.push([zt[Sr],zt[$r.i],zt[hn.i]])}),$t},_t.x=function(zt){return arguments.length?(Ne=ir(_e=zt),_t):_e},_t.y=function(zt){return arguments.length?(He=ir(Ee=zt),_t):Ee},_t.clipExtent=function(zt){return arguments.length?(Ve=null==zt?fs:zt,_t):Ve===fs?null:Ve},_t.size=function(zt){return arguments.length?_t.clipExtent(zt&&[[0,0],zt]):Ve===fs?null:Ve&&Ve[1]},_t};var fs=[[-1e6,-1e6],[1e6,1e6]];function Hs(ue,_e,Ee){return(ue.x-Ee.x)*(_e.y-ue.y)-(ue.x-_e.x)*(Ee.y-ue.y)}function to(ue){return ue.x}function Mo(ue){return ue.y}function Uo(ue,_e,Ee,Ne,He,Ve){if(!ue(_e,Ee,Ne,He,Ve)){var _t=.5*(Ee+He),dt=.5*(Ne+Ve),zt=_e.nodes;zt[0]&&Uo(ue,zt[0],Ee,Ne,_t,dt),zt[1]&&Uo(ue,zt[1],_t,Ne,He,dt),zt[2]&&Uo(ue,zt[2],Ee,dt,_t,Ve),zt[3]&&Uo(ue,zt[3],_t,dt,He,Ve)}}function ro(ue,_e,Ee,Ne,He,Ve,_t){var zt,dt=1/0;return function $t(er,Sr,Mr,Qr,cn){if(!(Sr>Ve||Mr>_t||Qr<Ne||cn<He)){if(Dr=er.point){var Dr,Nr=_e-er.x,$r=Ee-er.y,sn=Nr*Nr+$r*$r;if(sn<dt){var hn=Math.sqrt(dt=sn);Ne=_e-hn,He=Ee-hn,Ve=_e+hn,_t=Ee+hn,zt=Dr}}for(var Vr=er.nodes,Rn=.5*(Sr+Qr),la=.5*(Mr+cn),Ca=(Ee>=la)<<1|_e>=Rn,Da=Ca+4;Ca<Da;++Ca)if(er=Vr[3&Ca])switch(3&Ca){case 0:$t(er,Sr,Mr,Rn,la);break;case 1:$t(er,Rn,Mr,Qr,la);break;case 2:$t(er,Sr,la,Rn,cn);break;case 3:$t(er,Rn,la,Qr,cn)}}}(ue,Ne,He,Ve,_t),zt}function Gs(ue,_e){ue=_.rgb(ue),_e=_.rgb(_e);var Ee=ue.r,Ne=ue.g,He=ue.b,Ve=_e.r-Ee,_t=_e.g-Ne,dt=_e.b-He;return function(zt){return"#"+wr(Math.round(Ee+Ve*zt))+wr(Math.round(Ne+_t*zt))+wr(Math.round(He+dt*zt))}}function no(ue,_e){var He,Ee={},Ne={};for(He in ue)He in _e?Ee[He]=Vo(ue[He],_e[He]):Ne[He]=ue[He];for(He in _e)He in ue||(Ne[He]=_e[He]);return function(Ve){for(He in Ee)Ne[He]=Ee[He](Ve);return Ne}}function Mi(ue,_e){return ue=+ue,_e=+_e,function(Ee){return ue*(1-Ee)+_e*Ee}}function So(ue,_e){var Ne,He,Ve,Ee=ao.lastIndex=Qo.lastIndex=0,_t=-1,dt=[],zt=[];for(ue+="",_e+="";(Ne=ao.exec(ue))&&(He=Qo.exec(_e));)(Ve=He.index)>Ee&&(Ve=_e.slice(Ee,Ve),dt[_t]?dt[_t]+=Ve:dt[++_t]=Ve),(Ne=Ne[0])===(He=He[0])?dt[_t]?dt[_t]+=He:dt[++_t]=He:(dt[++_t]=null,zt.push({i:_t,x:Mi(Ne,He)})),Ee=Qo.lastIndex;return Ee<_e.length&&(Ve=_e.slice(Ee),dt[_t]?dt[_t]+=Ve:dt[++_t]=Ve),dt.length<2?zt[0]?(_e=zt[0].x,function($t){return _e($t)+""}):function(){return _e}:(_e=zt.length,function($t){for(var Sr,er=0;er<_e;++er)dt[(Sr=zt[er]).i]=Sr.x($t);return dt.join("")})}_.geom.delaunay=function(ue){return _.geom.voronoi().triangles(ue)},_.geom.quadtree=function(ue,_e,Ee,Ne,He){var dt,Ve=$a,_t=Ja;if(dt=arguments.length)return Ve=to,_t=Mo,3===dt&&(He=Ee,Ne=_e,Ee=_e=0),zt(ue);function zt($t){var er,Qr,cn,Dr,Nr,$r,sn,hn,Vr,Sr=ir(Ve),Mr=ir(_t);if(null!=_e)$r=_e,sn=Ee,hn=Ne,Vr=He;else if(hn=Vr=-($r=sn=1/0),Qr=[],cn=[],Nr=$t.length,dt)for(Dr=0;Dr<Nr;++Dr)(er=$t[Dr]).x<$r&&($r=er.x),er.y<sn&&(sn=er.y),er.x>hn&&(hn=er.x),er.y>Vr&&(Vr=er.y),Qr.push(er.x),cn.push(er.y);else for(Dr=0;Dr<Nr;++Dr){var Rn=+Sr(er=$t[Dr],Dr),la=+Mr(er,Dr);Rn<$r&&($r=Rn),la<sn&&(sn=la),Rn>hn&&(hn=Rn),la>Vr&&(Vr=la),Qr.push(Rn),cn.push(la)}var da=hn-$r,ha=Vr-sn;function Ca(Oa,Ya,Ri,hi,Si,na,Qa,ui){if(!isNaN(Ri)&&!isNaN(hi))if(Oa.leaf){var Ti=Oa.x,Ki=Oa.y;if(null!=Ti)if(p(Ti-Ri)+p(Ki-hi)<.01)Da(Oa,Ya,Ri,hi,Si,na,Qa,ui);else{var Vi=Oa.point;Oa.x=Oa.y=Oa.point=null,Da(Oa,Vi,Ti,Ki,Si,na,Qa,ui),Da(Oa,Ya,Ri,hi,Si,na,Qa,ui)}else Oa.x=Ri,Oa.y=hi,Oa.point=Ya}else Da(Oa,Ya,Ri,hi,Si,na,Qa,ui)}function Da(Oa,Ya,Ri,hi,Si,na,Qa,ui){var Ti=.5*(Si+Qa),Ki=.5*(na+ui),Vi=Ri>=Ti,Oi=hi>=Ki,Ma=Oi<<1|Vi;Oa.leaf=!1,Vi?Si=Ti:Qa=Ti,Oi?na=Ki:ui=Ki,Ca(Oa=Oa.nodes[Ma]||(Oa.nodes[Ma]={leaf:!0,nodes:[],point:null,x:null,y:null}),Ya,Ri,hi,Si,na,Qa,ui)}da>ha?Vr=sn+da:hn=$r+ha;var si={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(Oa){Ca(si,Oa,+Sr(Oa,++Dr),+Mr(Oa,Dr),$r,sn,hn,Vr)},visit:function(Oa){Uo(Oa,si,$r,sn,hn,Vr)},find:function(Oa){return ro(si,Oa[0],Oa[1],$r,sn,hn,Vr)}};if(Dr=-1,null==_e){for(;++Dr<Nr;)Ca(si,$t[Dr],Qr[Dr],cn[Dr],$r,sn,hn,Vr);--Dr}else $t.forEach(si.add);return Qr=cn=$t=er=null,si}return zt.x=function($t){return arguments.length?(Ve=$t,zt):Ve},zt.y=function($t){return arguments.length?(_t=$t,zt):_t},zt.extent=function($t){return arguments.length?(null==$t?_e=Ee=Ne=He=null:(_e=+$t[0][0],Ee=+$t[0][1],Ne=+$t[1][0],He=+$t[1][1]),zt):null==_e?null:[[_e,Ee],[Ne,He]]},zt.size=function($t){return arguments.length?(null==$t?_e=Ee=Ne=He=null:(_e=Ee=0,Ne=+$t[0],He=+$t[1]),zt):null==_e?null:[Ne-_e,He-Ee]},zt},_.interpolateRgb=Gs,_.interpolateObject=no,_.interpolateNumber=Mi,_.interpolateString=So;var ao=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qo=new RegExp(ao.source,"g");function Vo(ue,_e){for(var Ne,Ee=_.interpolators.length;--Ee>=0&&!(Ne=_.interpolators[Ee](ue,_e)););return Ne}function Tl(ue,_e){var dt,Ee=[],Ne=[],He=ue.length,Ve=_e.length,_t=Math.min(ue.length,_e.length);for(dt=0;dt<_t;++dt)Ee.push(Vo(ue[dt],_e[dt]));for(;dt<He;++dt)Ne[dt]=ue[dt];for(;dt<Ve;++dt)Ne[dt]=_e[dt];return function(zt){for(dt=0;dt<_t;++dt)Ne[dt]=Ee[dt](zt);return Ne}}_.interpolate=Vo,_.interpolators=[function(ue,_e){var Ee=typeof _e;return("string"===Ee?Qt.has(_e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(_e)?Gs:So:_e instanceof Tr?Gs:Array.isArray(_e)?Tl:"object"===Ee&&isNaN(_e)?no:Mi)(ue,_e)}],_.interpolateArray=Tl;var Ho=function(){return O},ku=_.map({linear:Ho,poly:function Eu(ue){return function(_e){return Math.pow(_e,ue)}},quad:function(){return _s},cubic:function(){return Fl},sin:function(){return Ys},exp:function(){return Ol},circle:function(){return ws},elastic:function Kl(ue,_e){var Ee;return arguments.length<2&&(_e=.45),arguments.length?Ee=_e/Ze*Math.asin(1/ue):(ue=1,Ee=_e/4),function(Ne){return 1+ue*Math.pow(2,-10*Ne)*Math.sin((Ne-Ee)*Ze/_e)}},back:function al(ue){return ue||(ue=1.70158),function(_e){return _e*_e*((ue+1)*_e-ue)}},bounce:function(){return Ql}}),Zs=_.map({in:O,out:pu,"in-out":bs,"out-in":function(ue){return bs(pu(ue))}});function ko(ue){return function(_e){return _e<=0?0:_e>=1?1:ue(_e)}}function pu(ue){return function(_e){return 1-ue(1-_e)}}function bs(ue){return function(_e){return.5*(_e<.5?ue(2*_e):2-ue(2-2*_e))}}function _s(ue){return ue*ue}function Fl(ue){return ue*ue*ue}function Cu(ue){if(ue<=0)return 0;if(ue>=1)return 1;var _e=ue*ue,Ee=_e*ue;return 4*(ue<.5?Ee:3*(ue-_e)+Ee-.75)}function Ys(ue){return 1-Math.cos(ue*rt)}function Ol(ue){return Math.pow(2,10*(ue-1))}function ws(ue){return 1-Math.sqrt(1-ue*ue)}function Ql(ue){return ue<1/2.75?7.5625*ue*ue:ue<2/2.75?7.5625*(ue-=1.5/2.75)*ue+.75:ue<2.5/2.75?7.5625*(ue-=2.25/2.75)*ue+.9375:7.5625*(ue-=2.625/2.75)*ue+.984375}function Ws(ue,_e){return _e-=ue,function(Ee){return Math.round(ue+_e*Ee)}}function Nl(ue){var _e=[ue.a,ue.b],Ee=[ue.c,ue.d],Ne=il(_e),He=Al(_e,Ee),Ve=il(function Ml(ue,_e,Ee){return ue[0]+=Ee*_e[0],ue[1]+=Ee*_e[1],ue}(Ee,_e,-He))||0;_e[0]*Ee[1]<Ee[0]*_e[1]&&(_e[0]*=-1,_e[1]*=-1,Ne*=-1,He*=-1),this.rotate=(Ne?Math.atan2(_e[1],_e[0]):Math.atan2(-Ee[0],Ee[1]))*Tt,this.translate=[ue.e,ue.f],this.scale=[Ne,Ve],this.skew=Ve?Math.atan2(He,Ve)*Tt:0}function Al(ue,_e){return ue[0]*_e[0]+ue[1]*_e[1]}function il(ue){var _e=Math.sqrt(Al(ue,ue));return _e&&(ue[0]/=_e,ue[1]/=_e),_e}_.ease=function(ue){var _e=ue.indexOf("-"),Ee=_e>=0?ue.slice(0,_e):ue,Ne=_e>=0?ue.slice(_e+1):"in";return Ee=ku.get(Ee)||Ho,ko((Ne=Zs.get(Ne)||O)(Ee.apply(null,k.call(arguments,1))))},_.interpolateHcl=function Lu(ue,_e){ue=_.hcl(ue),_e=_.hcl(_e);var Ee=ue.h,Ne=ue.c,He=ue.l,Ve=_e.h-Ee,_t=_e.c-Ne,dt=_e.l-He;return isNaN(_t)&&(_t=0,Ne=isNaN(Ne)?_e.c:Ne),isNaN(Ve)?(Ve=0,Ee=isNaN(Ee)?_e.h:Ee):Ve>180?Ve-=360:Ve<-180&&(Ve+=360),function(zt){return Se(Ee+Ve*zt,Ne+_t*zt,He+dt*zt)+""}},_.interpolateHsl=function $l(ue,_e){ue=_.hsl(ue),_e=_.hsl(_e);var Ee=ue.h,Ne=ue.s,He=ue.l,Ve=_e.h-Ee,_t=_e.s-Ne,dt=_e.l-He;return isNaN(_t)&&(_t=0,Ne=isNaN(Ne)?_e.s:Ne),isNaN(Ve)?(Ve=0,Ee=isNaN(Ee)?_e.h:Ee):Ve>180?Ve-=360:Ve<-180&&(Ve+=360),function(zt){return ct(Ee+Ve*zt,Ne+_t*zt,He+dt*zt)+""}},_.interpolateLab=function Wu(ue,_e){ue=_.lab(ue),_e=_.lab(_e);var Ee=ue.l,Ne=ue.a,He=ue.b,Ve=_e.l-Ee,_t=_e.a-Ne,dt=_e.b-He;return function(zt){return Dt(Ee+Ve*zt,Ne+_t*zt,He+dt*zt)+""}},_.interpolateRound=Ws,_.transform=function(ue){var _e=E.createElementNS(_.ns.prefix.svg,"g");return(_.transform=function(Ee){if(null!=Ee){_e.setAttribute("transform",Ee);var Ne=_e.transform.baseVal.consolidate()}return new Nl(Ne?Ne.matrix:ql)})(ue)},Nl.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ql={a:1,b:0,c:0,d:1,e:0,f:0};function Xs(ue){return ue.length?ue.pop()+",":""}function Go(ue,_e){var Ee=[],Ne=[];return ue=_.transform(ue),_e=_.transform(_e),function du(ue,_e,Ee,Ne){if(ue[0]!==_e[0]||ue[1]!==_e[1]){var He=Ee.push("translate(",null,",",null,")");Ne.push({i:He-4,x:Mi(ue[0],_e[0])},{i:He-2,x:Mi(ue[1],_e[1])})}else(_e[0]||_e[1])&&Ee.push("translate("+_e+")")}(ue.translate,_e.translate,Ee,Ne),function eu(ue,_e,Ee,Ne){ue!==_e?(ue-_e>180?_e+=360:_e-ue>180&&(ue+=360),Ne.push({i:Ee.push(Xs(Ee)+"rotate(",null,")")-2,x:Mi(ue,_e)})):_e&&Ee.push(Xs(Ee)+"rotate("+_e+")")}(ue.rotate,_e.rotate,Ee,Ne),function Pu(ue,_e,Ee,Ne){ue!==_e?Ne.push({i:Ee.push(Xs(Ee)+"skewX(",null,")")-2,x:Mi(ue,_e)}):_e&&Ee.push(Xs(Ee)+"skewX("+_e+")")}(ue.skew,_e.skew,Ee,Ne),function gu(ue,_e,Ee,Ne){if(ue[0]!==_e[0]||ue[1]!==_e[1]){var He=Ee.push(Xs(Ee)+"scale(",null,",",null,")");Ne.push({i:He-4,x:Mi(ue[0],_e[0])},{i:He-2,x:Mi(ue[1],_e[1])})}else(1!==_e[0]||1!==_e[1])&&Ee.push(Xs(Ee)+"scale("+_e+")")}(ue.scale,_e.scale,Ee,Ne),ue=_e=null,function(He){for(var dt,Ve=-1,_t=Ne.length;++Ve<_t;)Ee[(dt=Ne[Ve]).i]=dt.x(He);return Ee.join("")}}function Sl(ue,_e){return _e=(_e-=ue=+ue)||1/_e,function(Ee){return(Ee-ue)/_e}}function ol(ue,_e){return _e=(_e-=ue=+ue)||1/_e,function(Ee){return Math.max(0,Math.min(1,(Ee-ue)/_e))}}function tu(ue){for(var _e=ue.source,Ee=ue.target,Ne=function Co(ue,_e){if(ue===_e)return ue;for(var Ee=ns(ue),Ne=ns(_e),He=Ee.pop(),Ve=Ne.pop(),_t=null;He===Ve;)_t=He,He=Ee.pop(),Ve=Ne.pop();return _t}(_e,Ee),He=[_e];_e!==Ne;)He.push(_e=_e.parent);for(var Ve=He.length;Ee!==Ne;)He.splice(Ve,0,Ee),Ee=Ee.parent;return He}function ns(ue){for(var _e=[],Ee=ue.parent;null!=Ee;)_e.push(ue),ue=Ee,Ee=Ee.parent;return _e.push(ue),_e}function Bl(ue){ue.fixed|=2}function Ls(ue){ue.fixed&=-7}function Ts(ue){ue.fixed|=4,ue.px=ue.x,ue.py=ue.y}function co(ue){ue.fixed&=-5}function sl(ue,_e,Ee){var Ne=0,He=0;if(ue.charge=0,!ue.leaf)for(var zt,Ve=ue.nodes,_t=Ve.length,dt=-1;++dt<_t;)null!=(zt=Ve[dt])&&(sl(zt,_e,Ee),ue.charge+=zt.charge,Ne+=zt.charge*zt.cx,He+=zt.charge*zt.cy);if(ue.point){ue.leaf||(ue.point.x+=Math.random()-.5,ue.point.y+=Math.random()-.5);var $t=_e*Ee[ue.point.index];ue.charge+=ue.pointCharge=$t,Ne+=$t*ue.point.x,He+=$t*ue.point.y}ue.cx=Ne/ue.charge,ue.cy=He/ue.charge}_.interpolateTransform=Go,_.layout={},_.layout.bundle=function(){return function(ue){for(var _e=[],Ee=-1,Ne=ue.length;++Ee<Ne;)_e.push(tu(ue[Ee]));return _e}},_.layout.chord=function(){var _e,Ee,Ne,He,_t,dt,zt,ue={},Ve=0;function $t(){var Dr,Nr,$r,sn,hn,Sr={},Mr=[],Qr=_.range(He),cn=[];for(_e=[],Ee=[],Dr=0,sn=-1;++sn<He;){for(Nr=0,hn=-1;++hn<He;)Nr+=Ne[sn][hn];Mr.push(Nr),cn.push(_.range(He)),Dr+=Nr}for(_t&&Qr.sort(function(si,Oa){return _t(Mr[si],Mr[Oa])}),dt&&cn.forEach(function(si,Oa){si.sort(function(Ya,Ri){return dt(Ne[Oa][Ya],Ne[Oa][Ri])})}),Dr=(Ze-Ve*He)/Dr,Nr=0,sn=-1;++sn<He;){for($r=Nr,hn=-1;++hn<He;){var Vr=Qr[sn],Rn=cn[Vr][hn],la=Ne[Vr][Rn],da=Nr,ha=Nr+=la*Dr;Sr[Vr+"-"+Rn]={index:Vr,subindex:Rn,startAngle:da,endAngle:ha,value:la}}Ee[Vr]={index:Vr,startAngle:$r,endAngle:Nr,value:Mr[Vr]},Nr+=Ve}for(sn=-1;++sn<He;)for(hn=sn-1;++hn<He;){var Ca=Sr[sn+"-"+hn],Da=Sr[hn+"-"+sn];(Ca.value||Da.value)&&_e.push(Ca.value<Da.value?{source:Da,target:Ca}:{source:Ca,target:Da})}zt&&er()}function er(){_e.sort(function(Sr,Mr){return zt((Sr.source.value+Sr.target.value)/2,(Mr.source.value+Mr.target.value)/2)})}return ue.matrix=function(Sr){return arguments.length?(He=(Ne=Sr)&&Ne.length,_e=Ee=null,ue):Ne},ue.padding=function(Sr){return arguments.length?(Ve=Sr,_e=Ee=null,ue):Ve},ue.sortGroups=function(Sr){return arguments.length?(_t=Sr,_e=Ee=null,ue):_t},ue.sortSubgroups=function(Sr){return arguments.length?(dt=Sr,_e=null,ue):dt},ue.sortChords=function(Sr){return arguments.length?(zt=Sr,_e&&er(),ue):zt},ue.chords=function(){return _e||$t(),_e},ue.groups=function(){return Ee||$t(),Ee},ue},_.layout.force=function(){var Ee,He,Ve,Dr,Nr,$r,ue={},_e=_.dispatch("start","tick","end"),Ne=[1,1],_t=.9,dt=Du,zt=ru,$t=-30,er=Ru,Sr=.1,Mr=.64,Qr=[],cn=[];function sn(Vr){return function(Rn,la,da,ha){if(Rn.point!==Vr){var Ya,Ca=Rn.cx-Vr.x,Da=Rn.cy-Vr.y,si=ha-la,Oa=Ca*Ca+Da*Da;if(si*si/Mr<Oa)return Oa<er&&(Vr.px-=Ca*(Ya=Rn.charge/Oa),Vr.py-=Da*Ya),!0;Rn.point&&Oa&&Oa<er&&(Vr.px-=Ca*(Ya=Rn.pointCharge/Oa),Vr.py-=Da*Ya)}return!Rn.charge}}function hn(Vr){Vr.px=_.event.x,Vr.py=_.event.y,ue.resume()}return ue.tick=function(){if((Ve*=.99)<.005)return Ee=null,_e.end({type:"end",alpha:Ve=0}),!0;var la,da,ha,Ca,Da,si,Oa,Ya,Ri,Vr=Qr.length,Rn=cn.length;for(da=0;da<Rn;++da)(si=(Ya=(Da=(ha=cn[da]).target).x-(Ca=ha.source).x)*Ya+(Ri=Da.y-Ca.y)*Ri)&&(Ri*=si=Ve*Nr[da]*((si=Math.sqrt(si))-Dr[da])/si,Da.x-=(Ya*=si)*(Oa=Ca.weight+Da.weight?Ca.weight/(Ca.weight+Da.weight):.5),Da.y-=Ri*Oa,Ca.x+=Ya*(Oa=1-Oa),Ca.y+=Ri*Oa);if((Oa=Ve*Sr)&&(Ya=Ne[0]/2,Ri=Ne[1]/2,da=-1,Oa))for(;++da<Vr;)(ha=Qr[da]).x+=(Ya-ha.x)*Oa,ha.y+=(Ri-ha.y)*Oa;if($t)for(sl(la=_.geom.quadtree(Qr),Ve,$r),da=-1;++da<Vr;)(ha=Qr[da]).fixed||la.visit(sn(ha));for(da=-1;++da<Vr;)(ha=Qr[da]).fixed?(ha.x=ha.px,ha.y=ha.py):(ha.x-=(ha.px-(ha.px=ha.x))*_t,ha.y-=(ha.py-(ha.py=ha.y))*_t);_e.tick({type:"tick",alpha:Ve})},ue.nodes=function(Vr){return arguments.length?(Qr=Vr,ue):Qr},ue.links=function(Vr){return arguments.length?(cn=Vr,ue):cn},ue.size=function(Vr){return arguments.length?(Ne=Vr,ue):Ne},ue.linkDistance=function(Vr){return arguments.length?(dt="function"==typeof Vr?Vr:+Vr,ue):dt},ue.distance=ue.linkDistance,ue.linkStrength=function(Vr){return arguments.length?(zt="function"==typeof Vr?Vr:+Vr,ue):zt},ue.friction=function(Vr){return arguments.length?(_t=+Vr,ue):_t},ue.charge=function(Vr){return arguments.length?($t="function"==typeof Vr?Vr:+Vr,ue):$t},ue.chargeDistance=function(Vr){return arguments.length?(er=Vr*Vr,ue):Math.sqrt(er)},ue.gravity=function(Vr){return arguments.length?(Sr=+Vr,ue):Sr},ue.theta=function(Vr){return arguments.length?(Mr=Vr*Vr,ue):Math.sqrt(Mr)},ue.alpha=function(Vr){return arguments.length?(Vr=+Vr,Ve?Vr>0?Ve=Vr:(Ee.c=null,Ee.t=NaN,Ee=null,_e.end({type:"end",alpha:Ve=0})):Vr>0&&(_e.start({type:"start",alpha:Ve=Vr}),Ee=Wn(ue.tick)),ue):Ve},ue.start=function(){var Vr,Ca,Da,Rn=Qr.length,la=cn.length,da=Ne[0],ha=Ne[1];for(Vr=0;Vr<Rn;++Vr)(Da=Qr[Vr]).index=Vr,Da.weight=0;for(Vr=0;Vr<la;++Vr)"number"==typeof(Da=cn[Vr]).source&&(Da.source=Qr[Da.source]),"number"==typeof Da.target&&(Da.target=Qr[Da.target]),++Da.source.weight,++Da.target.weight;for(Vr=0;Vr<Rn;++Vr)Da=Qr[Vr],isNaN(Da.x)&&(Da.x=si("x",da)),isNaN(Da.y)&&(Da.y=si("y",ha)),isNaN(Da.px)&&(Da.px=Da.x),isNaN(Da.py)&&(Da.py=Da.y);if(Dr=[],"function"==typeof dt)for(Vr=0;Vr<la;++Vr)Dr[Vr]=+dt.call(this,cn[Vr],Vr);else for(Vr=0;Vr<la;++Vr)Dr[Vr]=dt;if(Nr=[],"function"==typeof zt)for(Vr=0;Vr<la;++Vr)Nr[Vr]=+zt.call(this,cn[Vr],Vr);else for(Vr=0;Vr<la;++Vr)Nr[Vr]=zt;if($r=[],"function"==typeof $t)for(Vr=0;Vr<Rn;++Vr)$r[Vr]=+$t.call(this,Qr[Vr],Vr);else for(Vr=0;Vr<Rn;++Vr)$r[Vr]=$t;function si(Oa,Ya){if(!Ca){for(Ca=new Array(Rn),Si=0;Si<Rn;++Si)Ca[Si]=[];for(Si=0;Si<la;++Si){var Ri=cn[Si];Ca[Ri.source.index].push(Ri.target),Ca[Ri.target.index].push(Ri.source)}}for(var Qa,hi=Ca[Vr],Si=-1,na=hi.length;++Si<na;)if(!isNaN(Qa=hi[Si][Oa]))return Qa;return Math.random()*Ya}return ue.resume()},ue.resume=function(){return ue.alpha(.1)},ue.stop=function(){return ue.alpha(0)},ue.drag=function(){if(He||(He=_.behavior.drag().origin(O).on("dragstart.force",Bl).on("drag.force",hn).on("dragend.force",Ls)),!arguments.length)return He;this.on("mouseover.force",Ts).on("mouseout.force",co).call(He)},_.rebind(ue,_e,"on")};var Du=20,ru=1,Ru=1/0;function As(ue,_e){return _.rebind(ue,_e,"sort","children","value"),ue.nodes=ue,ue.links=as,ue}function hs(ue,_e){for(var Ee=[ue];null!=(ue=Ee.pop());)if(_e(ue),(He=ue.children)&&(Ne=He.length))for(var Ne,He;--Ne>=0;)Ee.push(He[Ne])}function Zo(ue,_e){for(var Ee=[ue],Ne=[];null!=(ue=Ee.pop());)if(Ne.push(ue),(_t=ue.children)&&(Ve=_t.length))for(var Ve,_t,He=-1;++He<Ve;)Ee.push(_t[He]);for(;null!=(ue=Ne.pop());)_e(ue)}function kl(ue){return ue.children}function ll(ue){return ue.value}function Iu(ue,_e){return _e.value-ue.value}function as(ue){return _.merge(ue.map(function(_e){return(_e.children||[]).map(function(Ee){return{source:_e,target:Ee}})}))}_.layout.hierarchy=function(){var ue=Iu,_e=kl,Ee=ll;function Ne(He){var dt,Ve=[He],_t=[];for(He.depth=0;null!=(dt=Ve.pop());)if(_t.push(dt),($t=_e.call(Ne,dt,dt.depth))&&(zt=$t.length)){for(var zt,$t,er;--zt>=0;)Ve.push(er=$t[zt]),er.parent=dt,er.depth=dt.depth+1;Ee&&(dt.value=0),dt.children=$t}else Ee&&(dt.value=+Ee.call(Ne,dt,dt.depth)||0),delete dt.children;return Zo(He,function(Sr){var Mr,Qr;ue&&(Mr=Sr.children)&&Mr.sort(ue),Ee&&(Qr=Sr.parent)&&(Qr.value+=Sr.value)}),_t}return Ne.sort=function(He){return arguments.length?(ue=He,Ne):ue},Ne.children=function(He){return arguments.length?(_e=He,Ne):_e},Ne.value=function(He){return arguments.length?(Ee=He,Ne):Ee},Ne.revalue=function(He){return Ee&&(hs(He,function(Ve){Ve.children&&(Ve.value=0)}),Zo(He,function(Ve){var _t;Ve.children||(Ve.value=+Ee.call(Ne,Ve,Ve.depth)||0),(_t=Ve.parent)&&(_t.value+=Ve.value)})),He},Ne},_.layout.partition=function(){var ue=_.layout.hierarchy(),_e=[1,1];function Ee(Ve,_t,dt,zt){var $t=Ve.children;if(Ve.x=_t,Ve.y=Ve.depth*zt,Ve.dx=dt,Ve.dy=zt,$t&&(Sr=$t.length)){var Sr,Mr,Qr,er=-1;for(dt=Ve.value?dt/Ve.value:0;++er<Sr;)Ee(Mr=$t[er],_t,Qr=Mr.value*dt,zt),_t+=Qr}}function Ne(Ve){var _t=Ve.children,dt=0;if(_t&&($t=_t.length))for(var $t,zt=-1;++zt<$t;)dt=Math.max(dt,Ne(_t[zt]));return 1+dt}function He(Ve,_t){var dt=ue.call(this,Ve,_t);return Ee(dt[0],0,_e[0],_e[1]/Ne(dt[0])),dt}return He.size=function(Ve){return arguments.length?(_e=Ve,He):_e},As(He,ue)},_.layout.pie=function(){var ue=Number,_e=zu,Ee=0,Ne=Ze,He=0;function Ve(_t){var $r,dt=_t.length,zt=_t.map(function(sn,hn){return+ue.call(Ve,sn,hn)}),$t=+("function"==typeof Ee?Ee.apply(this,arguments):Ee),er=("function"==typeof Ne?Ne.apply(this,arguments):Ne)-$t,Sr=Math.min(Math.abs(er)/dt,+("function"==typeof He?He.apply(this,arguments):He)),Mr=Sr*(er<0?-1:1),Qr=_.sum(zt),cn=Qr?(er-dt*Mr)/Qr:0,Dr=_.range(dt),Nr=[];return null!=_e&&Dr.sort(_e===zu?function(sn,hn){return zt[hn]-zt[sn]}:function(sn,hn){return _e(_t[sn],_t[hn])}),Dr.forEach(function(sn){Nr[sn]={data:_t[sn],value:$r=zt[sn],startAngle:$t,endAngle:$t+=$r*cn+Mr,padAngle:Sr}}),Nr}return Ve.value=function(_t){return arguments.length?(ue=_t,Ve):ue},Ve.sort=function(_t){return arguments.length?(_e=_t,Ve):_e},Ve.startAngle=function(_t){return arguments.length?(Ee=_t,Ve):Ee},Ve.endAngle=function(_t){return arguments.length?(Ne=_t,Ve):Ne},Ve.padAngle=function(_t){return arguments.length?(He=_t,Ve):He},Ve};var zu={};function nu(ue){return ue.x}function ul(ue){return ue.y}function au(ue,_e,Ee){ue.y0=_e,ue.y=Ee}_.layout.stack=function(){var ue=O,_e=Ul,Ee=Vl,Ne=au,He=nu,Ve=ul;function _t(dt,zt){if(!(cn=dt.length))return dt;var $t=dt.map(function(sn,hn){return ue.call(_t,sn,hn)}),er=$t.map(function(sn){return sn.map(function(hn,Vr){return[He.call(_t,hn,Vr),Ve.call(_t,hn,Vr)]})}),Sr=_e.call(_t,er,zt);$t=_.permute($t,Sr),er=_.permute(er,Sr);var cn,Dr,Nr,$r,Mr=Ee.call(_t,er,zt),Qr=$t[0].length;for(Nr=0;Nr<Qr;++Nr)for(Ne.call(_t,$t[0][Nr],$r=Mr[Nr],er[0][Nr][1]),Dr=1;Dr<cn;++Dr)Ne.call(_t,$t[Dr][Nr],$r+=er[Dr-1][Nr][1],er[Dr][Nr][1]);return dt}return _t.values=function(dt){return arguments.length?(ue=dt,_t):ue},_t.order=function(dt){return arguments.length?(_e="function"==typeof dt?dt:Cl.get(dt)||Ul,_t):_e},_t.offset=function(dt){return arguments.length?(Ee="function"==typeof dt?dt:El.get(dt)||Vl,_t):Ee},_t.x=function(dt){return arguments.length?(He=dt,_t):He},_t.y=function(dt){return arguments.length?(Ve=dt,_t):Ve},_t.out=function(dt){return arguments.length?(Ne=dt,_t):Ne},_t};var Cl=_.map({"inside-out":function(ue){var Ee,Ne,_e=ue.length,He=ue.map(Xu),Ve=ue.map(Ui),_t=_.range(_e).sort(function(Sr,Mr){return He[Sr]-He[Mr]}),dt=0,zt=0,$t=[],er=[];for(Ee=0;Ee<_e;++Ee)Ne=_t[Ee],dt<zt?(dt+=Ve[Ne],$t.push(Ne)):(zt+=Ve[Ne],er.push(Ne));return er.reverse().concat($t)},reverse:function(ue){return _.range(ue.length).reverse()},default:Ul}),El=_.map({silhouette:function(ue){var Ve,_t,dt,_e=ue.length,Ee=ue[0].length,Ne=[],He=0,zt=[];for(_t=0;_t<Ee;++_t){for(Ve=0,dt=0;Ve<_e;Ve++)dt+=ue[Ve][_t][1];dt>He&&(He=dt),Ne.push(dt)}for(_t=0;_t<Ee;++_t)zt[_t]=(He-Ne[_t])/2;return zt},wiggle:function(ue){var He,Ve,_t,dt,zt,$t,er,Sr,Mr,_e=ue.length,Ee=ue[0],Ne=Ee.length,Qr=[];for(Qr[0]=Sr=Mr=0,Ve=1;Ve<Ne;++Ve){for(He=0,dt=0;He<_e;++He)dt+=ue[He][Ve][1];for(He=0,zt=0,er=Ee[Ve][0]-Ee[Ve-1][0];He<_e;++He){for(_t=0,$t=(ue[He][Ve][1]-ue[He][Ve-1][1])/(2*er);_t<He;++_t)$t+=(ue[_t][Ve][1]-ue[_t][Ve-1][1])/er;zt+=$t*ue[He][Ve][1]}Qr[Ve]=Sr-=dt?zt/dt*er:0,Sr<Mr&&(Mr=Sr)}for(Ve=0;Ve<Ne;++Ve)Qr[Ve]-=Mr;return Qr},expand:function(ue){var He,Ve,_t,_e=ue.length,Ee=ue[0].length,Ne=1/_e,dt=[];for(Ve=0;Ve<Ee;++Ve){for(He=0,_t=0;He<_e;He++)_t+=ue[He][Ve][1];if(_t)for(He=0;He<_e;He++)ue[He][Ve][1]/=_t;else for(He=0;He<_e;He++)ue[He][Ve][1]=Ne}for(Ve=0;Ve<Ee;++Ve)dt[Ve]=0;return dt},zero:Vl});function Ul(ue){return _.range(ue.length)}function Vl(ue){for(var _e=-1,Ee=ue[0].length,Ne=[];++_e<Ee;)Ne[_e]=0;return Ne}function Xu(ue){for(var He,_e=1,Ee=0,Ne=ue[0][1],Ve=ue.length;_e<Ve;++_e)(He=ue[_e][1])>Ne&&(Ee=_e,Ne=He);return Ee}function Ui(ue){return ue.reduce(cl,0)}function cl(ue,_e){return ue+_e[1]}function js(ue,_e){return is(ue,Math.ceil(Math.log(_e.length)/Math.LN2+1))}function is(ue,_e){for(var Ee=-1,Ne=+ue[0],He=(ue[1]-Ne)/_e,Ve=[];++Ee<=_e;)Ve[Ee]=He*Ee+Ne;return Ve}function vs(ue){return[_.min(ue),_.max(ue)]}function Hl(ue,_e){return ue.value-_e.value}function uo(ue,_e){var Ee=ue._pack_next;ue._pack_next=_e,_e._pack_prev=ue,_e._pack_next=Ee,Ee._pack_prev=_e}function iu(ue,_e){ue._pack_next=_e,_e._pack_prev=ue}function $o(ue,_e){var Ee=_e.x-ue.x,Ne=_e.y-ue.y,He=ue.r+_e.r;return.999*He*He>Ee*Ee+Ne*Ne}function Ps(ue){if((_e=ue.children)&&(Mr=_e.length)){var _e,_t,dt,zt,$t,er,Sr,Mr,Ee=1/0,Ne=-1/0,He=1/0,Ve=-1/0;if(_e.forEach(Js),(_t=_e[0]).x=-_t.r,_t.y=0,Qr(_t),Mr>1&&((dt=_e[1]).x=dt.r,dt.y=0,Qr(dt),Mr>2))for(Ji(_t,dt,zt=_e[2]),Qr(zt),uo(_t,zt),_t._pack_prev=zt,uo(zt,dt),dt=_t._pack_next,$t=3;$t<Mr;$t++){Ji(_t,dt,zt=_e[$t]);var cn=0,Dr=1,Nr=1;for(er=dt._pack_next;er!==dt;er=er._pack_next,Dr++)if($o(er,zt)){cn=1;break}if(1==cn)for(Sr=_t._pack_prev;Sr!==er._pack_prev&&!$o(Sr,zt);Sr=Sr._pack_prev,Nr++);cn?(Dr<Nr||Dr==Nr&&dt.r<_t.r?iu(_t,dt=er):iu(_t=Sr,dt),$t--):(uo(_t,zt),dt=zt,Qr(zt))}var $r=(Ee+Ne)/2,sn=(He+Ve)/2,hn=0;for($t=0;$t<Mr;$t++)(zt=_e[$t]).x-=$r,zt.y-=sn,hn=Math.max(hn,zt.r+Math.sqrt(zt.x*zt.x+zt.y*zt.y));ue.r=hn,_e.forEach(Ds)}function Qr(Vr){Ee=Math.min(Vr.x-Vr.r,Ee),Ne=Math.max(Vr.x+Vr.r,Ne),He=Math.min(Vr.y-Vr.r,He),Ve=Math.max(Vr.y+Vr.r,Ve)}}function Js(ue){ue._pack_next=ue._pack_prev=ue}function Ds(ue){delete ue._pack_next,delete ue._pack_prev}function ps(ue,_e,Ee,Ne){var He=ue.children;if(ue.x=_e+=Ne*ue.x,ue.y=Ee+=Ne*ue.y,ue.r*=Ne,He)for(var Ve=-1,_t=He.length;++Ve<_t;)ps(He[Ve],_e,Ee,Ne)}function Ji(ue,_e,Ee){var Ne=ue.r+Ee.r,He=_e.x-ue.x,Ve=_e.y-ue.y;if(Ne&&(He||Ve)){var _t=_e.r+Ee.r,dt=He*He+Ve*Ve,zt=.5+((Ne*=Ne)-(_t*=_t))/(2*dt),$t=Math.sqrt(Math.max(0,2*_t*(Ne+dt)-(Ne-=dt)*Ne-_t*_t))/(2*dt);Ee.x=ue.x+zt*He+$t*Ve,Ee.y=ue.y+zt*Ve-$t*He}else Ee.x=ue.x+Ne,Ee.y=ue.y}function bo(ue,_e){return ue.parent==_e.parent?1:2}function Yo(ue){var _e=ue.children;return _e.length?_e[0]:ue.t}function Gl(ue){var Ee,_e=ue.children;return(Ee=_e.length)?_e[Ee-1]:ue.t}function Zl(ue,_e,Ee){var Ne=Ee/(_e.i-ue.i);_e.c-=Ne,_e.s+=Ee,ue.c+=Ne,_e.z+=Ee,_e.m+=Ee}function mt(ue,_e,Ee){return ue.a.parent===_e.parent?ue.a:Ee}function sr(ue){var _e=ue.children;return _e&&_e.length?sr(_e[0]):ue}function zr(ue){var Ee,_e=ue.children;return _e&&(Ee=_e.length)?zr(_e[Ee-1]):ue}function un(ue){return{x:ue.x,y:ue.y,dx:ue.dx,dy:ue.dy}}function yn(ue,_e){var Ee=ue.x+_e[3],Ne=ue.y+_e[0],He=ue.dx-_e[1]-_e[3],Ve=ue.dy-_e[0]-_e[2];return He<0&&(Ee+=He/2,He=0),Ve<0&&(Ne+=Ve/2,Ve=0),{x:Ee,y:Ne,dx:He,dy:Ve}}function Tn(ue){var _e=ue[0],Ee=ue[ue.length-1];return _e<Ee?[_e,Ee]:[Ee,_e]}function En(ue){return ue.rangeExtent?ue.rangeExtent():Tn(ue.range())}function Bn(ue,_e,Ee,Ne){var He=Ee(ue[0],ue[1]),Ve=Ne(_e[0],_e[1]);return function(_t){return Ve(He(_t))}}function mn(ue,_e){var _t,Ee=0,Ne=ue.length-1,He=ue[Ee],Ve=ue[Ne];return Ve<He&&(_t=Ee,Ee=Ne,Ne=_t,_t=He,He=Ve,Ve=_t),ue[Ee]=_e.floor(He),ue[Ne]=_e.ceil(Ve),ue}function zn(ue){return ue?{floor:function(_e){return Math.floor(_e/ue)*ue},ceil:function(_e){return Math.ceil(_e/ue)*ue}}:Pn}_.layout.histogram=function(){var ue=!0,_e=Number,Ee=vs,Ne=js;function He(Ve,Mr){for(var Sr,Nr,dt=[],zt=Ve.map(_e,this),$t=Ee.call(this,zt,Mr),er=Ne.call(this,$t,zt,Mr),Qr=(Mr=-1,zt.length),cn=er.length-1,Dr=ue?1:1/Qr;++Mr<cn;)(Sr=dt[Mr]=[]).dx=er[Mr+1]-(Sr.x=er[Mr]),Sr.y=0;if(cn>0)for(Mr=-1;++Mr<Qr;)(Nr=zt[Mr])>=$t[0]&&Nr<=$t[1]&&((Sr=dt[_.bisect(er,Nr,1,cn)-1]).y+=Dr,Sr.push(Ve[Mr]));return dt}return He.value=function(Ve){return arguments.length?(_e=Ve,He):_e},He.range=function(Ve){return arguments.length?(Ee=ir(Ve),He):Ee},He.bins=function(Ve){return arguments.length?(Ne="number"==typeof Ve?function(_t){return is(_t,Ve)}:ir(Ve),He):Ne},He.frequency=function(Ve){return arguments.length?(ue=!!Ve,He):ue},He},_.layout.pack=function(){var Ne,ue=_.layout.hierarchy().sort(Hl),_e=0,Ee=[1,1];function He(Ve,_t){var dt=ue.call(this,Ve,_t),zt=dt[0],$t=Ee[0],er=Ee[1],Sr=null==Ne?Math.sqrt:"function"==typeof Ne?Ne:function(){return Ne};if(zt.x=zt.y=0,Zo(zt,function(Qr){Qr.r=+Sr(Qr.value)}),Zo(zt,Ps),_e){var Mr=_e*(Ne?1:Math.max(2*zt.r/$t,2*zt.r/er))/2;Zo(zt,function(Qr){Qr.r+=Mr}),Zo(zt,Ps),Zo(zt,function(Qr){Qr.r-=Mr})}return ps(zt,$t/2,er/2,Ne?1:1/Math.max(2*zt.r/$t,2*zt.r/er)),dt}return He.size=function(Ve){return arguments.length?(Ee=Ve,He):Ee},He.radius=function(Ve){return arguments.length?(Ne=null==Ve||"function"==typeof Ve?Ve:+Ve,He):Ne},He.padding=function(Ve){return arguments.length?(_e=+Ve,He):_e},As(He,ue)},_.layout.tree=function(){var ue=_.layout.hierarchy().sort(null).value(null),_e=bo,Ee=[1,1],Ne=null;function He(er,Sr){var Mr=ue.call(this,er,Sr),Qr=Mr[0],cn=function Ve(er){for(var Qr,Sr={A:null,children:[er]},Mr=[Sr];null!=(Qr=Mr.pop());)for(var Dr,cn=Qr.children,Nr=0,$r=cn.length;Nr<$r;++Nr)Mr.push((cn[Nr]=Dr={_:cn[Nr],parent:Qr,children:(Dr=cn[Nr].children)&&Dr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Nr}).a=Dr);return Sr.children[0]}(Qr);if(Zo(cn,_t),cn.parent.m=-cn.z,hs(cn,dt),Ne)hs(Qr,$t);else{var Dr=Qr,Nr=Qr,$r=Qr;hs(Qr,function(Rn){Rn.x<Dr.x&&(Dr=Rn),Rn.x>Nr.x&&(Nr=Rn),Rn.depth>$r.depth&&($r=Rn)});var sn=_e(Dr,Nr)/2-Dr.x,hn=Ee[0]/(Nr.x+_e(Nr,Dr)/2+sn),Vr=Ee[1]/($r.depth||1);hs(Qr,function(Rn){Rn.x=(Rn.x+sn)*hn,Rn.y=Rn.depth*Vr})}return Mr}function _t(er){var Sr=er.children,Mr=er.parent.children,Qr=er.i?Mr[er.i-1]:null;if(Sr.length){!function yu(ue){for(var Ve,_e=0,Ee=0,Ne=ue.children,He=Ne.length;--He>=0;)(Ve=Ne[He]).z+=_e,Ve.m+=_e,_e+=Ve.s+(Ee+=Ve.c)}(er);var cn=(Sr[0].z+Sr[Sr.length-1].z)/2;Qr?(er.z=Qr.z+_e(er._,Qr._),er.m=er.z-cn):er.z=cn}else Qr&&(er.z=Qr.z+_e(er._,Qr._));er.parent.A=function zt(er,Sr,Mr){if(Sr){for(var Rn,Qr=er,cn=er,Dr=Sr,Nr=Qr.parent.children[0],$r=Qr.m,sn=cn.m,hn=Dr.m,Vr=Nr.m;Dr=Gl(Dr),Qr=Yo(Qr),Dr&&Qr;)Nr=Yo(Nr),(cn=Gl(cn)).a=er,(Rn=Dr.z+hn-Qr.z-$r+_e(Dr._,Qr._))>0&&(Zl(mt(Dr,er,Mr),er,Rn),$r+=Rn,sn+=Rn),hn+=Dr.m,$r+=Qr.m,Vr+=Nr.m,sn+=cn.m;Dr&&!Gl(cn)&&(cn.t=Dr,cn.m+=hn-sn),Qr&&!Yo(Nr)&&(Nr.t=Qr,Nr.m+=$r-Vr,Mr=er)}return Mr}(er,Qr,er.parent.A||Mr[0])}function dt(er){er._.x=er.z+er.parent.m,er.m+=er.parent.m}function $t(er){er.x*=Ee[0],er.y=er.depth*Ee[1]}return He.separation=function(er){return arguments.length?(_e=er,He):_e},He.size=function(er){return arguments.length?(Ne=null==(Ee=er)?$t:null,He):Ne?null:Ee},He.nodeSize=function(er){return arguments.length?(Ne=null==(Ee=er)?null:$t,He):Ne?Ee:null},As(He,ue)},_.layout.cluster=function(){var ue=_.layout.hierarchy().sort(null).value(null),_e=bo,Ee=[1,1],Ne=!1;function He(Ve,_t){var $t,dt=ue.call(this,Ve,_t),zt=dt[0],er=0;Zo(zt,function(Dr){var Nr=Dr.children;Nr&&Nr.length?(Dr.x=function vr(ue){return ue.reduce(function(_e,Ee){return _e+Ee.x},0)/ue.length}(Nr),Dr.y=function Ot(ue){return 1+_.max(ue,function(_e){return _e.y})}(Nr)):(Dr.x=$t?er+=_e(Dr,$t):0,Dr.y=0,$t=Dr)});var Sr=sr(zt),Mr=zr(zt),Qr=Sr.x-_e(Sr,Mr)/2,cn=Mr.x+_e(Mr,Sr)/2;return Zo(zt,Ne?function(Dr){Dr.x=(Dr.x-zt.x)*Ee[0],Dr.y=(zt.y-Dr.y)*Ee[1]}:function(Dr){Dr.x=(Dr.x-Qr)/(cn-Qr)*Ee[0],Dr.y=(1-(zt.y?Dr.y/zt.y:1))*Ee[1]}),dt}return He.separation=function(Ve){return arguments.length?(_e=Ve,He):_e},He.size=function(Ve){return arguments.length?(Ne=null==(Ee=Ve),He):Ne?null:Ee},He.nodeSize=function(Ve){return arguments.length?(Ne=null!=(Ee=Ve),He):Ne?Ee:null},As(He,ue)},_.layout.treemap=function(){var _t,ue=_.layout.hierarchy(),_e=Math.round,Ee=[1,1],Ne=null,He=un,Ve=!1,dt="squarify",zt=.5*(1+Math.sqrt(5));function $t(Dr,Nr){for(var hn,Vr,$r=-1,sn=Dr.length;++$r<sn;)Vr=(hn=Dr[$r]).value*(Nr<0?0:Nr),hn.area=isNaN(Vr)||Vr<=0?0:Vr}function er(Dr){var Nr=Dr.children;if(Nr&&Nr.length){var Vr,la,ha,$r=He(Dr),sn=[],hn=Nr.slice(),Rn=1/0,da="slice"===dt?$r.dx:"dice"===dt?$r.dy:"slice-dice"===dt?1&Dr.depth?$r.dy:$r.dx:Math.min($r.dx,$r.dy);for($t(hn,$r.dx*$r.dy/Dr.value),sn.area=0;(ha=hn.length)>0;)sn.push(Vr=hn[ha-1]),sn.area+=Vr.area,"squarify"!==dt||(la=Mr(sn,da))<=Rn?(hn.pop(),Rn=la):(sn.area-=sn.pop().area,Qr(sn,da,$r,!1),da=Math.min($r.dx,$r.dy),sn.length=sn.area=0,Rn=1/0);sn.length&&(Qr(sn,da,$r,!0),sn.length=sn.area=0),Nr.forEach(er)}}function Sr(Dr){var Nr=Dr.children;if(Nr&&Nr.length){var hn,$r=He(Dr),sn=Nr.slice(),Vr=[];for($t(sn,$r.dx*$r.dy/Dr.value),Vr.area=0;hn=sn.pop();)Vr.push(hn),Vr.area+=hn.area,null!=hn.z&&(Qr(Vr,hn.z?$r.dx:$r.dy,$r,!sn.length),Vr.length=Vr.area=0);Nr.forEach(Sr)}}function Mr(Dr,Nr){for(var sn,$r=Dr.area,hn=0,Vr=1/0,Rn=-1,la=Dr.length;++Rn<la;)!(sn=Dr[Rn].area)||(sn<Vr&&(Vr=sn),sn>hn&&(hn=sn));return Nr*=Nr,($r*=$r)?Math.max(Nr*hn*zt/$r,$r/(Nr*Vr*zt)):1/0}function Qr(Dr,Nr,$r,sn){var ha,hn=-1,Vr=Dr.length,Rn=$r.x,la=$r.y,da=Nr?_e(Dr.area/Nr):0;if(Nr==$r.dx){for((sn||da>$r.dy)&&(da=$r.dy);++hn<Vr;)(ha=Dr[hn]).x=Rn,ha.y=la,ha.dy=da,Rn+=ha.dx=Math.min($r.x+$r.dx-Rn,da?_e(ha.area/da):0);ha.z=!0,ha.dx+=$r.x+$r.dx-Rn,$r.y+=da,$r.dy-=da}else{for((sn||da>$r.dx)&&(da=$r.dx);++hn<Vr;)(ha=Dr[hn]).x=Rn,ha.y=la,ha.dx=da,la+=ha.dy=Math.min($r.y+$r.dy-la,da?_e(ha.area/da):0);ha.z=!1,ha.dy+=$r.y+$r.dy-la,$r.x+=da,$r.dx-=da}}function cn(Dr){var Nr=_t||ue(Dr),$r=Nr[0];return $r.x=$r.y=0,$r.value?($r.dx=Ee[0],$r.dy=Ee[1]):$r.dx=$r.dy=0,_t&&ue.revalue($r),$t([$r],$r.dx*$r.dy/$r.value),(_t?Sr:er)($r),Ve&&(_t=Nr),Nr}return cn.size=function(Dr){return arguments.length?(Ee=Dr,cn):Ee},cn.padding=function(Dr){if(!arguments.length)return Ne;function Nr(hn){var Vr=Dr.call(cn,hn,hn.depth);return null==Vr?un(hn):yn(hn,"number"==typeof Vr?[Vr,Vr,Vr,Vr]:Vr)}function $r(hn){return yn(hn,Dr)}var sn;return He=null==(Ne=Dr)?un:"function"==(sn=typeof Dr)?Nr:("number"===sn&&(Dr=[Dr,Dr,Dr,Dr]),$r),cn},cn.round=function(Dr){return arguments.length?(_e=Dr?Math.round:Number,cn):_e!=Number},cn.sticky=function(Dr){return arguments.length?(Ve=Dr,_t=null,cn):Ve},cn.ratio=function(Dr){return arguments.length?(zt=Dr,cn):zt},cn.mode=function(Dr){return arguments.length?(dt=Dr+"",cn):dt},As(cn,ue)},_.random={normal:function(ue,_e){var Ee=arguments.length;return Ee<2&&(_e=1),Ee<1&&(ue=0),function(){var Ne,He,Ve;do{Ve=(Ne=2*Math.random()-1)*Ne+(He=2*Math.random()-1)*He}while(!Ve||Ve>1);return ue+_e*Ne*Math.sqrt(-2*Math.log(Ve)/Ve)}},logNormal:function(){var ue=_.random.normal.apply(_,arguments);return function(){return Math.exp(ue())}},bates:function(ue){var _e=_.random.irwinHall(ue);return function(){return _e()/ue}},irwinHall:function(ue){return function(){for(var _e=0,Ee=0;Ee<ue;Ee++)_e+=Math.random();return _e}}},_.scale={};var Pn={floor:O,ceil:O};function Vn(ue,_e,Ee,Ne){var He=[],Ve=[],_t=0,dt=Math.min(ue.length,_e.length)-1;for(ue[dt]<ue[0]&&(ue=ue.slice().reverse(),_e=_e.slice().reverse());++_t<=dt;)He.push(Ee(ue[_t-1],ue[_t])),Ve.push(Ne(_e[_t-1],_e[_t]));return function(zt){var $t=_.bisect(ue,zt,1,dt)-1;return Ve[$t](He[$t](zt))}}function ea(ue,_e,Ee,Ne){var He,Ve;function _t(){var zt=Math.min(ue.length,_e.length)>2?Vn:Bn,$t=Ne?ol:Sl;return He=zt(ue,_e,$t,Ee),Ve=zt(_e,ue,$t,Vo),dt}function dt(zt){return He(zt)}return dt.invert=function(zt){return Ve(zt)},dt.domain=function(zt){return arguments.length?(ue=zt.map(Number),_t()):ue},dt.range=function(zt){return arguments.length?(_e=zt,_t()):_e},dt.rangeRound=function(zt){return dt.range(zt).interpolate(Ws)},dt.clamp=function(zt){return arguments.length?(Ne=zt,_t()):Ne},dt.interpolate=function(zt){return arguments.length?(Ee=zt,_t()):Ee},dt.ticks=function(zt){return Ba(ue,zt)},dt.tickFormat=function(zt,$t){return d3_scale_linearTickFormat(ue,zt,$t)},dt.nice=function(zt){return Ea(ue,zt),_t()},dt.copy=function(){return ea(ue,_e,Ee,Ne)},_t()}function Ha(ue,_e){return _.rebind(ue,_e,"range","rangeRound","interpolate","clamp")}function Ea(ue,_e){return mn(ue,zn(Fa(ue,_e)[2])),mn(ue,zn(Fa(ue,_e)[2])),ue}function Fa(ue,_e){null==_e&&(_e=10);var Ee=Tn(ue),Ne=Ee[1]-Ee[0],He=Math.pow(10,Math.floor(Math.log(Ne/_e)/Math.LN10)),Ve=_e/Ne*He;return Ve<=.15?He*=10:Ve<=.35?He*=5:Ve<=.75&&(He*=2),Ee[0]=Math.ceil(Ee[0]/He)*He,Ee[1]=Math.floor(Ee[1]/He)*He+.5*He,Ee[2]=He,Ee}function Ba(ue,_e){return _.range.apply(_,Fa(ue,_e))}function qa(ue,_e,Ee,Ne){function He(dt){return(Ee?Math.log(dt<0?0:dt):-Math.log(dt>0?0:-dt))/Math.log(_e)}function Ve(dt){return Ee?Math.pow(_e,dt):-Math.pow(_e,-dt)}function _t(dt){return ue(He(dt))}return _t.invert=function(dt){return Ve(ue.invert(dt))},_t.domain=function(dt){return arguments.length?(Ee=dt[0]>=0,ue.domain((Ne=dt.map(Number)).map(He)),_t):Ne},_t.base=function(dt){return arguments.length?(_e=+dt,ue.domain(Ne.map(He)),_t):_e},_t.nice=function(){var dt=mn(Ne.map(He),Ee?Math:_i);return ue.domain(dt),Ne=dt.map(Ve),_t},_t.ticks=function(){var dt=Tn(Ne),zt=[],$t=dt[0],er=dt[1],Sr=Math.floor(He($t)),Mr=Math.ceil(He(er)),Qr=_e%1?2:_e;if(isFinite(Mr-Sr)){if(Ee){for(;Sr<Mr;Sr++)for(var cn=1;cn<Qr;cn++)zt.push(Ve(Sr)*cn);zt.push(Ve(Sr))}else for(zt.push(Ve(Sr));Sr++<Mr;)for(cn=Qr-1;cn>0;cn--)zt.push(Ve(Sr)*cn);for(Sr=0;zt[Sr]<$t;Sr++);for(Mr=zt.length;zt[Mr-1]>er;Mr--);zt=zt.slice(Sr,Mr)}return zt},_t.copy=function(){return qa(ue.copy(),_e,Ee,Ne)},Ha(_t,ue)}_.scale.linear=function(){return ea([0,1],[0,1],Vo,!1)},_.scale.log=function(){return qa(_.scale.linear().domain([0,1]),10,!0,[1,10])};var _i={floor:function(ue){return-Math.ceil(-ue)},ceil:function(ue){return-Math.floor(-ue)}};function yi(ue,_e,Ee){var Ne=mi(_e),He=mi(1/_e);function Ve(_t){return ue(Ne(_t))}return Ve.invert=function(_t){return He(ue.invert(_t))},Ve.domain=function(_t){return arguments.length?(ue.domain((Ee=_t.map(Number)).map(Ne)),Ve):Ee},Ve.ticks=function(_t){return Ba(Ee,_t)},Ve.tickFormat=function(_t,dt){return d3_scale_linearTickFormat(Ee,_t,dt)},Ve.nice=function(_t){return Ve.domain(Ea(Ee,_t))},Ve.exponent=function(_t){return arguments.length?(Ne=mi(_e=_t),He=mi(1/_e),ue.domain(Ee.map(Ne)),Ve):_e},Ve.copy=function(){return yi(ue.copy(),_e,Ee)},Ha(Ve,ue)}function mi(ue){return function(_e){return _e<0?-Math.pow(-_e,ue):Math.pow(_e,ue)}}function Pi(ue,_e){var Ee,Ne,He;function Ve(dt){return Ne[((Ee.get(dt)||("range"===_e.t?Ee.set(dt,ue.push(dt)):NaN))-1)%Ne.length]}function _t(dt,zt){return _.range(ue.length).map(function($t){return dt+zt*$t})}return Ve.domain=function(dt){if(!arguments.length)return ue;ue=[],Ee=new y;for(var er,zt=-1,$t=dt.length;++zt<$t;)Ee.has(er=dt[zt])||Ee.set(er,ue.push(er));return Ve[_e.t].apply(Ve,_e.a)},Ve.range=function(dt){return arguments.length?(Ne=dt,He=0,_e={t:"range",a:arguments},Ve):Ne},Ve.rangePoints=function(dt,zt){arguments.length<2&&(zt=0);var $t=dt[0],er=dt[1],Sr=ue.length<2?($t=($t+er)/2,0):(er-$t)/(ue.length-1+zt);return Ne=_t($t+Sr*zt/2,Sr),He=0,_e={t:"rangePoints",a:arguments},Ve},Ve.rangeRoundPoints=function(dt,zt){arguments.length<2&&(zt=0);var $t=dt[0],er=dt[1],Sr=ue.length<2?($t=er=Math.round(($t+er)/2),0):(er-$t)/(ue.length-1+zt)|0;return Ne=_t($t+Math.round(Sr*zt/2+(er-$t-(ue.length-1+zt)*Sr)/2),Sr),He=0,_e={t:"rangeRoundPoints",a:arguments},Ve},Ve.rangeBands=function(dt,zt,$t){arguments.length<2&&(zt=0),arguments.length<3&&($t=zt);var er=dt[1]<dt[0],Sr=dt[er-0],Qr=(dt[1-er]-Sr)/(ue.length-zt+2*$t);return Ne=_t(Sr+Qr*$t,Qr),er&&Ne.reverse(),He=Qr*(1-zt),_e={t:"rangeBands",a:arguments},Ve},Ve.rangeRoundBands=function(dt,zt,$t){arguments.length<2&&(zt=0),arguments.length<3&&($t=zt);var er=dt[1]<dt[0],Sr=dt[er-0],Mr=dt[1-er],Qr=Math.floor((Mr-Sr)/(ue.length-zt+2*$t));return Ne=_t(Sr+Math.round((Mr-Sr-(ue.length-zt)*Qr)/2),Qr),er&&Ne.reverse(),He=Math.round(Qr*(1-zt)),_e={t:"rangeRoundBands",a:arguments},Ve},Ve.rangeBand=function(){return He},Ve.rangeExtent=function(){return Tn(_e.a[0])},Ve.copy=function(){return Pi(ue,_e)},Ve.domain(ue)}_.scale.pow=function(){return yi(_.scale.linear(),1,[0,1])},_.scale.sqrt=function(){return _.scale.pow().exponent(.5)},_.scale.ordinal=function(){return Pi([],{t:"range",a:[[]]})},_.scale.category10=function(){return _.scale.ordinal().range(ci)},_.scale.category20=function(){return _.scale.ordinal().range(_o)},_.scale.category20b=function(){return _.scale.ordinal().range(io)},_.scale.category20c=function(){return _.scale.ordinal().range(ti)};var ci=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(en),_o=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(en),io=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(en),ti=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(en);function fa(ue,_e){var Ee;function Ne(){var Ve=0,_t=_e.length;for(Ee=[];++Ve<_t;)Ee[Ve-1]=_.quantile(ue,Ve/_t);return He}function He(Ve){if(!isNaN(Ve=+Ve))return _e[_.bisect(Ee,Ve)]}return He.domain=function(Ve){return arguments.length?(ue=Ve.map(g).filter(s).sort(r),Ne()):ue},He.range=function(Ve){return arguments.length?(_e=Ve,Ne()):_e},He.quantiles=function(){return Ee},He.invertExtent=function(Ve){return(Ve=_e.indexOf(Ve))<0?[NaN,NaN]:[Ve>0?Ee[Ve-1]:ue[0],Ve<Ee.length?Ee[Ve]:ue[ue.length-1]]},He.copy=function(){return fa(ue,_e)},Ne()}function wi(ue,_e,Ee){var Ne,He;function Ve(dt){return Ee[Math.max(0,Math.min(He,Math.floor(Ne*(dt-ue))))]}function _t(){return Ne=Ee.length/(_e-ue),He=Ee.length-1,Ve}return Ve.domain=function(dt){return arguments.length?(ue=+dt[0],_e=+dt[dt.length-1],_t()):[ue,_e]},Ve.range=function(dt){return arguments.length?(Ee=dt,_t()):Ee},Ve.invertExtent=function(dt){return[dt=(dt=Ee.indexOf(dt))<0?NaN:dt/Ne+ue,dt+1/Ne]},Ve.copy=function(){return wi(ue,_e,Ee)},_t()}function fo(ue,_e){function Ee(Ne){if(Ne<=Ne)return _e[_.bisect(ue,Ne)]}return Ee.domain=function(Ne){return arguments.length?(ue=Ne,Ee):ue},Ee.range=function(Ne){return arguments.length?(_e=Ne,Ee):_e},Ee.invertExtent=function(Ne){return Ne=_e.indexOf(Ne),[ue[Ne-1],ue[Ne]]},Ee.copy=function(){return fo(ue,_e)},Ee}function yo(ue){function _e(Ee){return+Ee}return _e.invert=_e,_e.domain=_e.range=function(Ee){return arguments.length?(ue=Ee.map(_e),_e):ue},_e.ticks=function(Ee){return Ba(ue,Ee)},_e.tickFormat=function(Ee,Ne){return d3_scale_linearTickFormat(ue,Ee,Ne)},_e.copy=function(){return yo(ue)},_e}function os(){return 0}_.scale.quantile=function(){return fa([],[])},_.scale.quantize=function(){return wi(0,1,[0,1])},_.scale.threshold=function(){return fo([.5],[0,1])},_.scale.identity=function(){return yo([0,1])},_.svg={},_.svg.arc=function(){var ue=ss,_e=fl,Ee=os,Ne=Ms,He=ds,Ve=gs,_t=Rs;function dt(){var $t=Math.max(0,+ue.apply(this,arguments)),er=Math.max(0,+_e.apply(this,arguments)),Sr=He.apply(this,arguments)-rt,Mr=Ve.apply(this,arguments)-rt,Qr=Math.abs(Mr-Sr),cn=Sr>Mr?0:1;if(er<$t&&(Dr=er,er=$t,$t=Dr),Qr>=Xe)return zt(er,cn)+($t?zt($t,1-cn):"")+"Z";var Dr,Nr,$r,sn,Rn,la,da,ha,Ca,Da,si,Oa,hn=0,Vr=0,Ya=[];if((sn=(+_t.apply(this,arguments)||0)/2)&&($r=Ne===Ms?Math.sqrt($t*$t+er*er):+Ne.apply(this,arguments),cn||(Vr*=-1),er&&(Vr=Jt($r/er*Math.sin(sn))),$t&&(hn=Jt($r/$t*Math.sin(sn)))),er){Rn=er*Math.cos(Sr+Vr),la=er*Math.sin(Sr+Vr),da=er*Math.cos(Mr-Vr),ha=er*Math.sin(Mr-Vr);var Ri=Math.abs(Mr-Sr-2*Vr)<=Pe?0:1;if(Vr&&hl(Rn,la,da,ha)===cn^Ri){var hi=(Sr+Mr)/2;Rn=er*Math.cos(hi),la=er*Math.sin(hi),da=ha=null}}else Rn=la=0;if($t){Ca=$t*Math.cos(Mr-hn),Da=$t*Math.sin(Mr-hn),si=$t*Math.cos(Sr+hn),Oa=$t*Math.sin(Sr+hn);var Si=Math.abs(Sr-Mr+2*hn)<=Pe?0:1;if(hn&&hl(Ca,Da,si,Oa)===1-cn^Si){var na=(Sr+Mr)/2;Ca=$t*Math.cos(na),Da=$t*Math.sin(na),si=Oa=null}}else Ca=Da=0;if(Qr>vt&&(Dr=Math.min(Math.abs(er-$t)/2,+Ee.apply(this,arguments)))>.001){Nr=$t<er^cn?0:1;var Qa=Dr,ui=Dr;if(Qr<Pe){var Ti=null==si?[Ca,Da]:null==da?[Rn,la]:dn([Rn,la],[si,Oa],[da,ha],[Ca,Da]),Ki=Rn-Ti[0],Vi=la-Ti[1],Oi=da-Ti[0],Ma=ha-Ti[1],Ia=1/Math.sin(Math.acos((Ki*Oi+Vi*Ma)/(Math.sqrt(Ki*Ki+Vi*Vi)*Math.sqrt(Oi*Oi+Ma*Ma)))/2),qi=Math.sqrt(Ti[0]*Ti[0]+Ti[1]*Ti[1]);ui=Math.min(Dr,($t-qi)/(Ia-1)),Qa=Math.min(Dr,(er-qi)/(Ia+1))}if(null!=da){var mo=vl(null==si?[Ca,Da]:[si,Oa],[Rn,la],er,Qa,cn),po=vl([da,ha],[Ca,Da],er,Qa,cn);Dr===Qa?Ya.push("M",mo[0],"A",Qa,",",Qa," 0 0,",Nr," ",mo[1],"A",er,",",er," 0 ",1-cn^hl(mo[1][0],mo[1][1],po[1][0],po[1][1]),",",cn," ",po[1],"A",Qa,",",Qa," 0 0,",Nr," ",po[0]):Ya.push("M",mo[0],"A",Qa,",",Qa," 0 1,",Nr," ",po[0])}else Ya.push("M",Rn,",",la);if(null!=si){var Gi=vl([Rn,la],[si,Oa],$t,-ui,cn),zs=vl([Ca,Da],null==da?[Rn,la]:[da,ha],$t,-ui,cn);Dr===ui?Ya.push("L",zs[0],"A",ui,",",ui," 0 0,",Nr," ",zs[1],"A",$t,",",$t," 0 ",cn^hl(zs[1][0],zs[1][1],Gi[1][0],Gi[1][1]),",",1-cn," ",Gi[1],"A",ui,",",ui," 0 0,",Nr," ",Gi[0]):Ya.push("L",zs[0],"A",ui,",",ui," 0 0,",Nr," ",Gi[0])}else Ya.push("L",Ca,",",Da)}else Ya.push("M",Rn,",",la),null!=da&&Ya.push("A",er,",",er," 0 ",Ri,",",cn," ",da,",",ha),Ya.push("L",Ca,",",Da),null!=si&&Ya.push("A",$t,",",$t," 0 ",Si,",",1-cn," ",si,",",Oa);return Ya.push("Z"),Ya.join("")}function zt($t,er){return"M0,"+$t+"A"+$t+","+$t+" 0 1,"+er+" 0,"+-$t+"A"+$t+","+$t+" 0 1,"+er+" 0,"+$t}return dt.innerRadius=function($t){return arguments.length?(ue=ir($t),dt):ue},dt.outerRadius=function($t){return arguments.length?(_e=ir($t),dt):_e},dt.cornerRadius=function($t){return arguments.length?(Ee=ir($t),dt):Ee},dt.padRadius=function($t){return arguments.length?(Ne=$t==Ms?Ms:ir($t),dt):Ne},dt.startAngle=function($t){return arguments.length?(He=ir($t),dt):He},dt.endAngle=function($t){return arguments.length?(Ve=ir($t),dt):Ve},dt.padAngle=function($t){return arguments.length?(_t=ir($t),dt):_t},dt.centroid=function(){var $t=(+ue.apply(this,arguments)+ +_e.apply(this,arguments))/2,er=(+He.apply(this,arguments)+ +Ve.apply(this,arguments))/2-rt;return[Math.cos(er)*$t,Math.sin(er)*$t]},dt};var Ms="auto";function ss(ue){return ue.innerRadius}function fl(ue){return ue.outerRadius}function ds(ue){return ue.startAngle}function gs(ue){return ue.endAngle}function Rs(ue){return ue&&ue.padAngle}function hl(ue,_e,Ee,Ne){return(ue-Ee)*_e-(_e-Ne)*ue>0?0:1}function vl(ue,_e,Ee,Ne,He){var Ve=ue[0]-_e[0],_t=ue[1]-_e[1],dt=(He?Ne:-Ne)/Math.sqrt(Ve*Ve+_t*_t),zt=dt*_t,$t=-dt*Ve,er=ue[0]+zt,Sr=ue[1]+$t,Mr=_e[0]+zt,Qr=_e[1]+$t,cn=(er+Mr)/2,Dr=(Sr+Qr)/2,Nr=Mr-er,$r=Qr-Sr,sn=Nr*Nr+$r*$r,hn=Ee-Ne,Vr=er*Qr-Mr*Sr,Rn=($r<0?-1:1)*Math.sqrt(Math.max(0,hn*hn*sn-Vr*Vr)),la=(Vr*$r-Nr*Rn)/sn,da=(-Vr*Nr-$r*Rn)/sn,ha=(Vr*$r+Nr*Rn)/sn,Ca=(-Vr*Nr+$r*Rn)/sn,Da=la-cn,si=da-Dr,Oa=ha-cn,Ya=Ca-Dr;return Da*Da+si*si>Oa*Oa+Ya*Ya&&(la=ha,da=Ca),[[la-zt,da-$t],[la*Ee/hn,da*Ee/hn]]}function ys(){return!0}function Fu(ue){var _e=$a,Ee=Ja,Ne=ys,He=Is,Ve=He.key,_t=.7;function dt(zt){var Qr,$t=[],er=[],Sr=-1,Mr=zt.length,cn=ir(_e),Dr=ir(Ee);function Nr(){$t.push("M",He(ue(er),_t))}for(;++Sr<Mr;)Ne.call(this,Qr=zt[Sr],Sr)?er.push([+cn.call(this,Qr,Sr),+Dr.call(this,Qr,Sr)]):er.length&&(Nr(),er=[]);return er.length&&Nr(),$t.length?$t.join(""):null}return dt.x=function(zt){return arguments.length?(_e=zt,dt):_e},dt.y=function(zt){return arguments.length?(Ee=zt,dt):Ee},dt.defined=function(zt){return arguments.length?(Ne=zt,dt):Ne},dt.interpolate=function(zt){return arguments.length?(Ve="function"==typeof zt?He=zt:(He=pl.get(zt)||Is).key,dt):Ve},dt.tension=function(zt){return arguments.length?(_t=zt,dt):_t},dt}_.svg.line=function(){return Fu(O)};var pl=_.map({linear:Is,"linear-closed":mu,step:function rc(ue){for(var _e=0,Ee=ue.length,Ne=ue[0],He=[Ne[0],",",Ne[1]];++_e<Ee;)He.push("H",(Ne[0]+(Ne=ue[_e])[0])/2,"V",Ne[1]);return Ee>1&&He.push("H",Ne[0]),He.join("")},"step-before":Ou,"step-after":ms,basis:nc,"basis-open":function ou(ue){if(ue.length<4)return Is(ue);for(var He,_e=[],Ee=-1,Ne=ue.length,Ve=[0],_t=[0];++Ee<3;)Ve.push((He=ue[Ee])[0]),_t.push(He[1]);for(_e.push(qo(qe,Ve)+","+qo(qe,_t)),--Ee;++Ee<Ne;)He=ue[Ee],Ve.shift(),Ve.push(He[0]),_t.shift(),_t.push(He[1]),ot(_e,Ve,_t);return _e.join("")},"basis-closed":function Ju(ue){for(var _e,Ve,Ee=-1,Ne=ue.length,He=Ne+4,_t=[],dt=[];++Ee<4;)_t.push((Ve=ue[Ee%Ne])[0]),dt.push(Ve[1]);for(_e=[qo(qe,_t),",",qo(qe,dt)],--Ee;++Ee<He;)Ve=ue[Ee%Ne],_t.shift(),_t.push(Ve[0]),dt.shift(),dt.push(Ve[1]),ot(_e,_t,dt);return _e.join("")},bundle:function Ku(ue,_e){var Ee=ue.length-1;if(Ee)for(var zt,$t,Ne=ue[0][0],He=ue[0][1],Ve=ue[Ee][0]-Ne,_t=ue[Ee][1]-He,dt=-1;++dt<=Ee;)(zt=ue[dt])[0]=_e*zt[0]+(1-_e)*(Ne+($t=dt/Ee)*Ve),zt[1]=_e*zt[1]+(1-_e)*(He+$t*_t);return nc(ue)},cardinal:function Bu(ue,_e){return ue.length<3?Is(ue):ue[0]+dl(ue,xu(ue,_e))},"cardinal-open":function ju(ue,_e){return ue.length<4?Is(ue):ue[1]+dl(ue.slice(1,-1),xu(ue,_e))},"cardinal-closed":function Nu(ue,_e){return ue.length<3?mu(ue):ue[0]+dl((ue.push(ue[0]),ue),xu([ue[ue.length-2]].concat(ue,[ue[1]]),_e))},monotone:function cr(ue){return ue.length<3?Is(ue):ue[0]+dl(ue,function At(ue){for(var Ee,Ne,He,Ve,_e=[],_t=function xt(ue){for(var _e=0,Ee=ue.length-1,Ne=[],He=ue[0],Ve=ue[1],_t=Ne[0]=bt(He,Ve);++_e<Ee;)Ne[_e]=(_t+(_t=bt(He=Ve,Ve=ue[_e+1])))/2;return Ne[_e]=_t,Ne}(ue),dt=-1,zt=ue.length-1;++dt<zt;)Ee=bt(ue[dt],ue[dt+1]),p(Ee)<vt?_t[dt]=_t[dt+1]=0:(Ve=(Ne=_t[dt]/Ee)*Ne+(He=_t[dt+1]/Ee)*He)>9&&(Ve=3*Ee/Math.sqrt(Ve),_t[dt]=Ve*Ne,_t[dt+1]=Ve*He);for(dt=-1;++dt<=zt;)Ve=(ue[Math.min(zt,dt+1)][0]-ue[Math.max(0,dt-1)][0])/(6*(1+_t[dt]*_t[dt])),_e.push([Ve||0,_t[dt]*Ve||0]);return _e}(ue))}});function Is(ue){return ue.length>1?ue.join("L"):ue+"Z"}function mu(ue){return ue.join("L")+"Z"}function Ou(ue){for(var _e=0,Ee=ue.length,Ne=ue[0],He=[Ne[0],",",Ne[1]];++_e<Ee;)He.push("V",(Ne=ue[_e])[1],"H",Ne[0]);return He.join("")}function ms(ue){for(var _e=0,Ee=ue.length,Ne=ue[0],He=[Ne[0],",",Ne[1]];++_e<Ee;)He.push("H",(Ne=ue[_e])[0],"V",Ne[1]);return He.join("")}function dl(ue,_e){if(_e.length<1||ue.length!=_e.length&&ue.length!=_e.length+2)return Is(ue);var Ee=ue.length!=_e.length,Ne="",He=ue[0],Ve=ue[1],_t=_e[0],dt=_t,zt=1;if(Ee&&(Ne+="Q"+(Ve[0]-2*_t[0]/3)+","+(Ve[1]-2*_t[1]/3)+","+Ve[0]+","+Ve[1],He=ue[1],zt=2),_e.length>1){Ve=ue[zt],zt++,Ne+="C"+(He[0]+_t[0])+","+(He[1]+_t[1])+","+(Ve[0]-(dt=_e[1])[0])+","+(Ve[1]-dt[1])+","+Ve[0]+","+Ve[1];for(var $t=2;$t<_e.length;$t++,zt++)Ne+="S"+((Ve=ue[zt])[0]-(dt=_e[$t])[0])+","+(Ve[1]-dt[1])+","+Ve[0]+","+Ve[1]}if(Ee){var er=ue[zt];Ne+="Q"+(Ve[0]+2*dt[0]/3)+","+(Ve[1]+2*dt[1]/3)+","+er[0]+","+er[1]}return Ne}function xu(ue,_e){for(var He,Ee=[],Ne=(1-_e)/2,Ve=ue[0],_t=ue[1],dt=1,zt=ue.length;++dt<zt;)He=Ve,Ve=_t,Ee.push([Ne*((_t=ue[dt])[0]-He[0]),Ne*(_t[1]-He[1])]);return Ee}function nc(ue){if(ue.length<3)return Is(ue);var _e=1,Ee=ue.length,Ne=ue[0],He=Ne[0],Ve=Ne[1],_t=[He,He,He,(Ne=ue[1])[0]],dt=[Ve,Ve,Ve,Ne[1]],zt=[He,",",Ve,"L",qo(qe,_t),",",qo(qe,dt)];for(ue.push(ue[Ee-1]);++_e<=Ee;)Ne=ue[_e],_t.shift(),_t.push(Ne[0]),dt.shift(),dt.push(Ne[1]),ot(zt,_t,dt);return ue.pop(),zt.push("L",Ne),zt.join("")}function qo(ue,_e){return ue[0]*_e[0]+ue[1]*_e[1]+ue[2]*_e[2]+ue[3]*_e[3]}pl.forEach(function(ue,_e){_e.key=ue,_e.closed=/-closed$/.test(ue)});var ze=[0,2/3,1/3,0],Ge=[0,1/3,2/3,0],qe=[0,1/6,2/3,1/6];function ot(ue,_e,Ee){ue.push("C",qo(ze,_e),",",qo(ze,Ee),",",qo(Ge,_e),",",qo(Ge,Ee),",",qo(qe,_e),",",qo(qe,Ee))}function bt(ue,_e){return(_e[1]-ue[1])/(_e[0]-ue[0])}function yr(ue){for(var _e,He,Ve,Ee=-1,Ne=ue.length;++Ee<Ne;)Ve=(_e=ue[Ee])[1]-rt,_e[0]=(He=_e[0])*Math.cos(Ve),_e[1]=He*Math.sin(Ve);return ue}function lr(ue){var _e=$a,Ee=$a,Ne=0,He=Ja,Ve=ys,_t=Is,dt=_t.key,zt=_t,$t="L",er=.7;function Sr(Mr){var sn,da,ha,Qr=[],cn=[],Dr=[],Nr=-1,$r=Mr.length,hn=ir(_e),Vr=ir(Ne),Rn=_e===Ee?function(){return da}:ir(Ee),la=Ne===He?function(){return ha}:ir(He);function Ca(){Qr.push("M",_t(ue(Dr),er),$t,zt(ue(cn.reverse()),er),"Z")}for(;++Nr<$r;)Ve.call(this,sn=Mr[Nr],Nr)?(cn.push([da=+hn.call(this,sn,Nr),ha=+Vr.call(this,sn,Nr)]),Dr.push([+Rn.call(this,sn,Nr),+la.call(this,sn,Nr)])):cn.length&&(Ca(),cn=[],Dr=[]);return cn.length&&Ca(),Qr.length?Qr.join(""):null}return Sr.x=function(Mr){return arguments.length?(_e=Ee=Mr,Sr):Ee},Sr.x0=function(Mr){return arguments.length?(_e=Mr,Sr):_e},Sr.x1=function(Mr){return arguments.length?(Ee=Mr,Sr):Ee},Sr.y=function(Mr){return arguments.length?(Ne=He=Mr,Sr):He},Sr.y0=function(Mr){return arguments.length?(Ne=Mr,Sr):Ne},Sr.y1=function(Mr){return arguments.length?(He=Mr,Sr):He},Sr.defined=function(Mr){return arguments.length?(Ve=Mr,Sr):Ve},Sr.interpolate=function(Mr){return arguments.length?(dt="function"==typeof Mr?_t=Mr:(_t=pl.get(Mr)||Is).key,zt=_t.reverse||_t,$t=_t.closed?"M":"L",Sr):dt},Sr.tension=function(Mr){return arguments.length?(er=Mr,Sr):er},Sr}function _r(ue){return ue.source}function Rr(ue){return ue.target}function Xr(ue){return ue.radius}function an(ue){return[ue.x,ue.y]}function bn(ue){return function(){var _e=ue.apply(this,arguments),Ee=_e[0],Ne=_e[1]-rt;return[Ee*Math.cos(Ne),Ee*Math.sin(Ne)]}}function Dn(){return 64}function Yn(){return"circle"}function xa(ue){var _e=Math.sqrt(ue/Pe);return"M0,"+_e+"A"+_e+","+_e+" 0 1,1 0,"+-_e+"A"+_e+","+_e+" 0 1,1 0,"+_e+"Z"}_.svg.line.radial=function(){var ue=Fu(yr);return ue.radius=ue.x,delete ue.x,ue.angle=ue.y,delete ue.y,ue},Ou.reverse=ms,ms.reverse=Ou,_.svg.area=function(){return lr(O)},_.svg.area.radial=function(){var ue=lr(yr);return ue.radius=ue.x,delete ue.x,ue.innerRadius=ue.x0,delete ue.x0,ue.outerRadius=ue.x1,delete ue.x1,ue.angle=ue.y,delete ue.y,ue.startAngle=ue.y0,delete ue.y0,ue.endAngle=ue.y1,delete ue.y1,ue},_.svg.chord=function(){var ue=_r,_e=Rr,Ee=Xr,Ne=ds,He=gs;function Ve(er,Sr){var Mr=_t(this,ue,er,Sr),Qr=_t(this,_e,er,Sr);return"M"+Mr.p0+zt(Mr.r,Mr.p1,Mr.a1-Mr.a0)+(function dt(er,Sr){return er.a0==Sr.a0&&er.a1==Sr.a1}(Mr,Qr)?$t(0,0,0,Mr.p0):$t(0,0,0,Qr.p0)+zt(Qr.r,Qr.p1,Qr.a1-Qr.a0)+$t(0,0,0,Mr.p0))+"Z"}function _t(er,Sr,Mr,Qr){var cn=Sr.call(er,Mr,Qr),Dr=Ee.call(er,cn,Qr),Nr=Ne.call(er,cn,Qr)-rt,$r=He.call(er,cn,Qr)-rt;return{r:Dr,a0:Nr,a1:$r,p0:[Dr*Math.cos(Nr),Dr*Math.sin(Nr)],p1:[Dr*Math.cos($r),Dr*Math.sin($r)]}}function zt(er,Sr,Mr){return"A"+er+","+er+" 0 "+ +(Mr>Pe)+",1 "+Sr}function $t(er,Sr,Mr,Qr){return"Q 0,0 "+Qr}return Ve.radius=function(er){return arguments.length?(Ee=ir(er),Ve):Ee},Ve.source=function(er){return arguments.length?(ue=ir(er),Ve):ue},Ve.target=function(er){return arguments.length?(_e=ir(er),Ve):_e},Ve.startAngle=function(er){return arguments.length?(Ne=ir(er),Ve):Ne},Ve.endAngle=function(er){return arguments.length?(He=ir(er),Ve):He},Ve},_.svg.diagonal=function(){var ue=_r,_e=Rr,Ee=an;function Ne(He,Ve){var _t=ue.call(this,He,Ve),dt=_e.call(this,He,Ve),zt=(_t.y+dt.y)/2,$t=[_t,{x:_t.x,y:zt},{x:dt.x,y:zt},dt];return"M"+($t=$t.map(Ee))[0]+"C"+$t[1]+" "+$t[2]+" "+$t[3]}return Ne.source=function(He){return arguments.length?(ue=ir(He),Ne):ue},Ne.target=function(He){return arguments.length?(_e=ir(He),Ne):_e},Ne.projection=function(He){return arguments.length?(Ee=He,Ne):Ee},Ne},_.svg.diagonal.radial=function(){var ue=_.svg.diagonal(),_e=an,Ee=ue.projection;return ue.projection=function(Ne){return arguments.length?Ee(bn(_e=Ne)):_e},ue},_.svg.symbol=function(){var ue=Yn,_e=Dn;function Ee(Ne,He){return(Za.get(ue.call(this,Ne,He))||xa)(_e.call(this,Ne,He))}return Ee.type=function(Ne){return arguments.length?(ue=ir(Ne),Ee):ue},Ee.size=function(Ne){return arguments.length?(_e=ir(Ne),Ee):_e},Ee};var Za=_.map({circle:xa,cross:function(ue){var _e=Math.sqrt(ue/5)/2;return"M"+-3*_e+","+-_e+"H"+-_e+"V"+-3*_e+"H"+_e+"V"+-_e+"H"+3*_e+"V"+_e+"H"+_e+"V"+3*_e+"H"+-_e+"V"+_e+"H"+-3*_e+"Z"},diamond:function(ue){var _e=Math.sqrt(ue/(2*Ka)),Ee=_e*Ka;return"M0,"+-_e+"L"+Ee+",0 0,"+_e+" "+-Ee+",0Z"},square:function(ue){var _e=Math.sqrt(ue)/2;return"M"+-_e+","+-_e+"L"+_e+","+-_e+" "+_e+","+_e+" "+-_e+","+_e+"Z"},"triangle-down":function(ue){var _e=Math.sqrt(ue/ja),Ee=_e*ja/2;return"M0,"+Ee+"L"+_e+","+-Ee+" "+-_e+","+-Ee+"Z"},"triangle-up":function(ue){var _e=Math.sqrt(ue/ja),Ee=_e*ja/2;return"M0,"+-Ee+"L"+_e+","+Ee+" "+-_e+","+Ee+"Z"}});_.svg.symbolTypes=Za.keys();var ja=Math.sqrt(3),Ka=Math.tan(30*kt);K.transition=function(ue){for(var He,Ve,_e=Wi||++$i,Ee=Wo(ue),Ne=[],_t=ho||{time:Date.now(),ease:Cu,delay:0,duration:250},dt=-1,zt=this.length;++dt<zt;){Ne.push(He=[]);for(var $t=this[dt],er=-1,Sr=$t.length;++er<Sr;)(Ve=$t[er])&&vo(Ve,er,Ee,_e,_t),He.push(Ve)}return Yi(Ne,Ee,_e)},K.interrupt=function(ue){return this.each(null==ue?ri:di(Wo(ue)))};var ri=di(Wo());function di(ue){return function(){var _e,Ee,Ne;(_e=this[ue])&&(Ne=_e[Ee=_e.active])&&(Ne.timer.c=null,Ne.timer.t=NaN,--_e.count?delete _e[Ee]:delete this[ue],_e.active+=.5,Ne.event&&Ne.event.interrupt.call(this,this.__data__,Ne.index))}}function Yi(ue,_e,Ee){return G(ue,Ga),ue.namespace=_e,ue.id=Ee,ue}var Wi,ho,Ga=[],$i=0;function xi(ue,_e,Ee,Ne){var He=ue.id,Ve=ue.namespace;return Fe(ue,"function"==typeof Ee?function(_t,dt,zt){_t[Ve][He].tween.set(_e,Ne(Ee.call(_t,_t.__data__,dt,zt)))}:(Ee=Ne(Ee),function(_t){_t[Ve][He].tween.set(_e,Ee)}))}function Di(ue){return null==ue&&(ue=""),function(){this.textContent=ue}}function Wo(ue){return null==ue?"__transition__":"__transition_"+ue+"__"}function vo(ue,_e,Ee,Ne,He){var dt,zt,$t,er,Sr,Ve=ue[Ee]||(ue[Ee]={active:0,count:0}),_t=Ve[Ne];function Qr(Dr){var Nr=Ve.active,$r=Ve[Nr];for(var sn in $r&&($r.timer.c=null,$r.timer.t=NaN,--Ve.count,delete Ve[Nr],$r.event&&$r.event.interrupt.call(ue,ue.__data__,$r.index)),Ve)if(+sn<Ne){var hn=Ve[sn];hn.timer.c=null,hn.timer.t=NaN,--Ve.count,delete Ve[sn]}zt.c=cn,Wn(function(){return zt.c&&cn(Dr||1)&&(zt.c=null,zt.t=NaN),1},0,dt),Ve.active=Ne,_t.event&&_t.event.start.call(ue,ue.__data__,_e),Sr=[],_t.tween.forEach(function(Vr,Rn){(Rn=Rn.call(ue,ue.__data__,_e))&&Sr.push(Rn)}),er=_t.ease,$t=_t.duration}function cn(Dr){for(var Nr=Dr/$t,$r=er(Nr),sn=Sr.length;sn>0;)Sr[--sn].call(ue,$r);if(Nr>=1)return _t.event&&_t.event.end.call(ue,ue.__data__,_e),--Ve.count?delete Ve[Ne]:delete ue[Ee],1}_t||(zt=Wn(function Mr(Dr){var Nr=_t.delay;if(zt.t=Nr+dt,Nr<=Dr)return Qr(Dr-Nr);zt.c=Qr},0,dt=He.time),_t=Ve[Ne]={tween:new y,time:dt,timer:zt,delay:He.delay,duration:He.duration,ease:He.ease,index:_e},He=null,++Ve.count)}Ga.call=K.call,Ga.empty=K.empty,Ga.node=K.node,Ga.size=K.size,_.transition=function(ue,_e){return ue&&ue.transition?Wi?ue.transition(_e):ue:_.selection().transition(ue)},_.transition.prototype=Ga,Ga.select=function(ue){var He,Ve,_t,_e=this.id,Ee=this.namespace,Ne=[];ue=Y(ue);for(var dt=-1,zt=this.length;++dt<zt;){Ne.push(He=[]);for(var $t=this[dt],er=-1,Sr=$t.length;++er<Sr;)(_t=$t[er])&&(Ve=ue.call(_t,_t.__data__,er,dt))?("__data__"in _t&&(Ve.__data__=_t.__data__),vo(Ve,er,Ee,_e,_t[Ee][_e]),He.push(Ve)):He.push(null)}return Yi(Ne,Ee,_e)},Ga.selectAll=function(ue){var He,Ve,_t,dt,zt,_e=this.id,Ee=this.namespace,Ne=[];ue=te(ue);for(var $t=-1,er=this.length;++$t<er;)for(var Sr=this[$t],Mr=-1,Qr=Sr.length;++Mr<Qr;)if(_t=Sr[Mr]){zt=_t[Ee][_e],Ve=ue.call(_t,_t.__data__,Mr,$t),Ne.push(He=[]);for(var cn=-1,Dr=Ve.length;++cn<Dr;)(dt=Ve[cn])&&vo(dt,cn,Ee,_e,zt),He.push(dt)}return Yi(Ne,Ee,_e)},Ga.filter=function(ue){var Ee,He,_e=[];"function"!=typeof ue&&(ue=ye(ue));for(var Ve=0,_t=this.length;Ve<_t;Ve++){_e.push(Ee=[]);for(var Ne,dt=0,zt=(Ne=this[Ve]).length;dt<zt;dt++)(He=Ne[dt])&&ue.call(He,He.__data__,dt,Ve)&&Ee.push(He)}return Yi(_e,this.namespace,this.id)},Ga.tween=function(ue,_e){var Ee=this.id,Ne=this.namespace;return arguments.length<2?this.node()[Ne][Ee].tween.get(ue):Fe(this,null==_e?function(He){He[Ne][Ee].tween.remove(ue)}:function(He){He[Ne][Ee].tween.set(ue,_e)})},Ga.attr=function(ue,_e){if(arguments.length<2){for(_e in ue)this.attr(_e,ue[_e]);return this}var Ee="transform"==ue?Go:Vo,Ne=_.ns.qualify(ue);function He(){this.removeAttribute(Ne)}function Ve(){this.removeAttributeNS(Ne.space,Ne.local)}function _t(zt){return null==zt?He:(zt+="",function(){var er,$t=this.getAttribute(Ne);return $t!==zt&&(er=Ee($t,zt),function(Sr){this.setAttribute(Ne,er(Sr))})})}function dt(zt){return null==zt?Ve:(zt+="",function(){var er,$t=this.getAttributeNS(Ne.space,Ne.local);return $t!==zt&&(er=Ee($t,zt),function(Sr){this.setAttributeNS(Ne.space,Ne.local,er(Sr))})})}return xi(this,"attr."+ue,_e,Ne.local?dt:_t)},Ga.attrTween=function(ue,_e){var Ee=_.ns.qualify(ue);return this.tween("attr."+ue,Ee.local?function He(Ve,_t){var dt=_e.call(this,Ve,_t,this.getAttributeNS(Ee.space,Ee.local));return dt&&function(zt){this.setAttributeNS(Ee.space,Ee.local,dt(zt))}}:function Ne(Ve,_t){var dt=_e.call(this,Ve,_t,this.getAttribute(Ee));return dt&&function(zt){this.setAttribute(Ee,dt(zt))}})},Ga.style=function(ue,_e,Ee){var Ne=arguments.length;if(Ne<3){if("string"!=typeof ue){for(Ee in Ne<2&&(_e=""),ue)this.style(Ee,ue[Ee],_e);return this}Ee=""}function He(){this.style.removeProperty(ue)}function Ve(_t){return null==_t?He:(_t+="",function(){var zt,dt=c(this).getComputedStyle(this,null).getPropertyValue(ue);return dt!==_t&&(zt=Vo(dt,_t),function($t){this.style.setProperty(ue,zt($t),Ee)})})}return xi(this,"style."+ue,_e,Ve)},Ga.styleTween=function(ue,_e,Ee){function Ne(He,Ve){var _t=_e.call(this,He,Ve,c(this).getComputedStyle(this,null).getPropertyValue(ue));return _t&&function(dt){this.style.setProperty(ue,_t(dt),Ee)}}return arguments.length<3&&(Ee=""),this.tween("style."+ue,Ne)},Ga.text=function(ue){return xi(this,"text",ue,Di)},Ga.remove=function(){var ue=this.namespace;return this.each("end.transition",function(){var _e;this[ue].count<2&&(_e=this.parentNode)&&_e.removeChild(this)})},Ga.ease=function(ue){var _e=this.id,Ee=this.namespace;return arguments.length<1?this.node()[Ee][_e].ease:("function"!=typeof ue&&(ue=_.ease.apply(_,arguments)),Fe(this,function(Ne){Ne[Ee][_e].ease=ue}))},Ga.delay=function(ue){var _e=this.id,Ee=this.namespace;return arguments.length<1?this.node()[Ee][_e].delay:Fe(this,"function"==typeof ue?function(Ne,He,Ve){Ne[Ee][_e].delay=+ue.call(Ne,Ne.__data__,He,Ve)}:(ue=+ue,function(Ne){Ne[Ee][_e].delay=ue}))},Ga.duration=function(ue){var _e=this.id,Ee=this.namespace;return arguments.length<1?this.node()[Ee][_e].duration:Fe(this,"function"==typeof ue?function(Ne,He,Ve){Ne[Ee][_e].duration=Math.max(1,ue.call(Ne,Ne.__data__,He,Ve))}:(ue=Math.max(1,ue),function(Ne){Ne[Ee][_e].duration=ue}))},Ga.each=function(ue,_e){var Ee=this.id,Ne=this.namespace;if(arguments.length<2){var He=ho,Ve=Wi;try{Wi=Ee,Fe(this,function(_t,dt,zt){ho=_t[Ne][Ee],ue.call(_t,_t.__data__,dt,zt)})}finally{ho=He,Wi=Ve}}else Fe(this,function(_t){var dt=_t[Ne][Ee];(dt.event||(dt.event=_.dispatch("start","end","interrupt"))).on(ue,_e)});return this},Ga.transition=function(){for(var He,_t,dt,ue=this.id,_e=++$i,Ee=this.namespace,Ne=[],zt=0,$t=this.length;zt<$t;zt++){Ne.push(He=[]);for(var Ve,er=0,Sr=(Ve=this[zt]).length;er<Sr;er++)(_t=Ve[er])&&vo(_t,er,Ee,_e,{time:(dt=_t[Ee][ue]).time,ease:dt.ease,delay:dt.delay+dt.duration,duration:dt.duration}),He.push(_t)}return Yi(Ne,Ee,_e)},_.svg.axis=function(){var dt,ue=_.scale.linear(),_e=Eo,Ee=6,Ne=6,He=3,Ve=[10],_t=null;function zt($t){$t.each(function(){var Vr,er=_.select(this),Sr=this.__chart__||ue,Mr=this.__chart__=ue.copy(),Qr=null==_t?Mr.ticks?Mr.ticks.apply(Mr,Ve):Mr.domain():_t,cn=null==dt?Mr.tickFormat?Mr.tickFormat.apply(Mr,Ve):O:dt,Dr=er.selectAll(".tick").data(Qr,Mr),Nr=Dr.enter().insert("g",".domain").attr("class","tick").style("opacity",vt),$r=_.transition(Dr.exit()).style("opacity",vt).remove(),sn=_.transition(Dr.order()).style("opacity",1),hn=Math.max(Ee,0)+He,Rn=En(Mr),la=er.selectAll(".domain").data([0]),da=(la.enter().append("path").attr("class","domain"),_.transition(la));Nr.append("line"),Nr.append("text");var Ri,hi,Si,na,ha=Nr.select("line"),Ca=sn.select("line"),Da=Dr.select("text").text(cn),si=Nr.select("text"),Oa=sn.select("text"),Ya="top"===_e||"left"===_e?-1:1;if("bottom"===_e||"top"===_e?(Vr=Do,Ri="x",Si="y",hi="x2",na="y2",Da.attr("dy",Ya<0?"0em":".71em").style("text-anchor","middle"),da.attr("d","M"+Rn[0]+","+Ya*Ne+"V0H"+Rn[1]+"V"+Ya*Ne)):(Vr=Ks,Ri="y",Si="x",hi="y2",na="x2",Da.attr("dy",".32em").style("text-anchor",Ya<0?"end":"start"),da.attr("d","M"+Ya*Ne+","+Rn[0]+"H0V"+Rn[1]+"H"+Ya*Ne)),ha.attr(na,Ya*Ee),si.attr(Si,Ya*hn),Ca.attr(hi,0).attr(na,Ya*Ee),Oa.attr(Ri,0).attr(Si,Ya*hn),Mr.rangeBand){var Qa=Mr,ui=Qa.rangeBand()/2;Sr=Mr=function(Ti){return Qa(Ti)+ui}}else Sr.rangeBand?Sr=Mr:$r.call(Vr,Mr,Sr);Nr.call(Vr,Sr,Mr),sn.call(Vr,Mr,Mr)})}return zt.scale=function($t){return arguments.length?(ue=$t,zt):ue},zt.orient=function($t){return arguments.length?(_e=$t in Xo?$t+"":Eo,zt):_e},zt.ticks=function(){return arguments.length?(Ve=m(arguments),zt):Ve},zt.tickValues=function($t){return arguments.length?(_t=$t,zt):_t},zt.tickFormat=function($t){return arguments.length?(dt=$t,zt):dt},zt.tickSize=function($t){var er=arguments.length;return er?(Ee=+$t,Ne=+arguments[er-1],zt):Ee},zt.innerTickSize=function($t){return arguments.length?(Ee=+$t,zt):Ee},zt.outerTickSize=function($t){return arguments.length?(Ne=+$t,zt):Ne},zt.tickPadding=function($t){return arguments.length?(He=+$t,zt):He},zt.tickSubdivide=function(){return arguments.length&&zt},zt};var Eo="bottom",Xo={top:1,right:1,bottom:1,left:1};function Do(ue,_e,Ee){ue.attr("transform",function(Ne){var He=_e(Ne);return"translate("+(isFinite(He)?He:Ee(Ne))+",0)"})}function Ks(ue,_e,Ee){ue.attr("transform",function(Ne){var He=_e(Ne);return"translate(0,"+(isFinite(He)?He:Ee(Ne))+")"})}_.svg.brush=function(){var Ve,_t,ue=ne(er,"brushstart","brush","brushend"),_e=null,Ee=null,Ne=[0,0],He=[0,0],dt=!0,zt=!0,$t=Ro[0];function er(Dr){Dr.each(function(){var Nr=_.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",cn).on("touchstart.brush",cn),$r=Nr.selectAll(".background").data([0]);$r.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Nr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var sn=Nr.selectAll(".resize").data($t,O);sn.exit().remove(),sn.enter().append("g").attr("class",function(la){return"resize "+la}).style("cursor",function(la){return yl[la]}).append("rect").attr("x",function(la){return/[ew]$/.test(la)?-3:null}).attr("y",function(la){return/^[ns]/.test(la)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),sn.style("display",er.empty()?"none":null);var Rn,hn=_.transition(Nr),Vr=_.transition($r);_e&&(Rn=En(_e),Vr.attr("x",Rn[0]).attr("width",Rn[1]-Rn[0]),Mr(hn)),Ee&&(Rn=En(Ee),Vr.attr("y",Rn[0]).attr("height",Rn[1]-Rn[0]),Qr(hn)),Sr(hn)})}function Sr(Dr){Dr.selectAll(".resize").attr("transform",function(Nr){return"translate("+Ne[+/e$/.test(Nr)]+","+He[+/^s/.test(Nr)]+")"})}function Mr(Dr){Dr.select(".extent").attr("x",Ne[0]),Dr.selectAll(".extent,.n>rect,.s>rect").attr("width",Ne[1]-Ne[0])}function Qr(Dr){Dr.select(".extent").attr("y",He[0]),Dr.selectAll(".extent,.e>rect,.w>rect").attr("height",He[1]-He[0])}function cn(){var ha,Da,Dr=this,Nr=_.select(_.event.target),$r=ue.of(Dr,arguments),sn=_.select(Dr),hn=Nr.datum(),Vr=!/^(n|s)$/.test(hn)&&_e,Rn=!/^(e|w)$/.test(hn)&&Ee,la=Nr.classed("extent"),da=Zt(Dr),Ca=_.mouse(Dr),si=_.select(c(Dr)).on("keydown.brush",Ri).on("keyup.brush",hi);if(_.event.changedTouches?si.on("touchmove.brush",Si).on("touchend.brush",Qa):si.on("mousemove.brush",Si).on("mouseup.brush",Qa),sn.interrupt().selectAll("*").interrupt(),la)Ca[0]=Ne[0]-Ca[0],Ca[1]=He[0]-Ca[1];else if(hn){var Oa=+/w$/.test(hn),Ya=+/^n/.test(hn);Da=[Ne[1-Oa]-Ca[0],He[1-Ya]-Ca[1]],Ca[0]=Ne[Oa],Ca[1]=He[Ya]}else _.event.altKey&&(ha=Ca.slice());function Ri(){32==_.event.keyCode&&(la||(ha=null,Ca[0]-=Ne[1],Ca[1]-=He[1],la=2),oe())}function hi(){32==_.event.keyCode&&2==la&&(Ca[0]+=Ne[1],Ca[1]+=He[1],la=0,oe())}function Si(){var ui=_.mouse(Dr),Ti=!1;Da&&(ui[0]+=Da[0],ui[1]+=Da[1]),la||(_.event.altKey?(ha||(ha=[(Ne[0]+Ne[1])/2,(He[0]+He[1])/2]),Ca[0]=Ne[+(ui[0]<ha[0])],Ca[1]=He[+(ui[1]<ha[1])]):ha=null),Vr&&na(ui,_e,0)&&(Mr(sn),Ti=!0),Rn&&na(ui,Ee,1)&&(Qr(sn),Ti=!0),Ti&&(Sr(sn),$r({type:"brush",mode:la?"move":"resize"}))}function na(ui,Ti,Ki){var po,Gi,Vi=En(Ti),Oi=Vi[0],Ma=Vi[1],Ia=Ca[Ki],qi=Ki?He:Ne,mo=qi[1]-qi[0];if(la&&(Oi-=Ia,Ma-=mo+Ia),po=(Ki?zt:dt)?Math.max(Oi,Math.min(Ma,ui[Ki])):ui[Ki],la?Gi=(po+=Ia)+mo:(ha&&(Ia=Math.max(Oi,Math.min(Ma,2*ha[Ki]-po))),Ia<po?(Gi=po,po=Ia):Gi=Ia),qi[0]!=po||qi[1]!=Gi)return Ki?_t=null:Ve=null,qi[0]=po,qi[1]=Gi,!0}function Qa(){Si(),sn.style("pointer-events","all").selectAll(".resize").style("display",er.empty()?"none":null),_.select("body").style("cursor",null),si.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),da(),$r({type:"brushend"})}sn.style("pointer-events","none").selectAll(".resize").style("display",null),_.select("body").style("cursor",Nr.style("cursor")),$r({type:"brushstart"}),Si()}return er.event=function(Dr){Dr.each(function(){var Nr=ue.of(this,arguments),$r={x:Ne,y:He,i:Ve,j:_t},sn=this.__chart__||$r;this.__chart__=$r,Wi?_.select(this).transition().each("start.brush",function(){Ve=sn.i,_t=sn.j,Ne=sn.x,He=sn.y,Nr({type:"brushstart"})}).tween("brush:brush",function(){var hn=Tl(Ne,$r.x),Vr=Tl(He,$r.y);return Ve=_t=null,function(Rn){Ne=$r.x=hn(Rn),He=$r.y=Vr(Rn),Nr({type:"brush",mode:"resize"})}}).each("end.brush",function(){Ve=$r.i,_t=$r.j,Nr({type:"brush",mode:"resize"}),Nr({type:"brushend"})}):(Nr({type:"brushstart"}),Nr({type:"brush",mode:"resize"}),Nr({type:"brushend"}))})},er.x=function(Dr){return arguments.length?($t=Ro[!(_e=Dr)<<1|!Ee],er):_e},er.y=function(Dr){return arguments.length?($t=Ro[!_e<<1|!(Ee=Dr)],er):Ee},er.clamp=function(Dr){return arguments.length?(_e&&Ee?(dt=!!Dr[0],zt=!!Dr[1]):_e?dt=!!Dr:Ee&&(zt=!!Dr),er):_e&&Ee?[dt,zt]:_e?dt:Ee?zt:null},er.extent=function(Dr){var Nr,$r,sn,hn,Vr;return arguments.length?(_e&&(Nr=Dr[0],$r=Dr[1],Ee&&(Nr=Nr[0],$r=$r[0]),Ve=[Nr,$r],_e.invert&&(Nr=_e(Nr),$r=_e($r)),$r<Nr&&(Vr=Nr,Nr=$r,$r=Vr),(Nr!=Ne[0]||$r!=Ne[1])&&(Ne=[Nr,$r])),Ee&&(sn=Dr[0],hn=Dr[1],_e&&(sn=sn[1],hn=hn[1]),_t=[sn,hn],Ee.invert&&(sn=Ee(sn),hn=Ee(hn)),hn<sn&&(Vr=sn,sn=hn,hn=Vr),(sn!=He[0]||hn!=He[1])&&(He=[sn,hn])),er):(_e&&(Ve?(Nr=Ve[0],$r=Ve[1]):(Nr=Ne[0],$r=Ne[1],_e.invert&&(Nr=_e.invert(Nr),$r=_e.invert($r)),$r<Nr&&(Vr=Nr,Nr=$r,$r=Vr))),Ee&&(_t?(sn=_t[0],hn=_t[1]):(sn=He[0],hn=He[1],Ee.invert&&(sn=Ee.invert(sn),hn=Ee.invert(hn)),hn<sn&&(Vr=sn,sn=hn,hn=Vr))),_e&&Ee?[[Nr,sn],[$r,hn]]:_e?[Nr,$r]:Ee&&[sn,hn])},er.clear=function(){return er.empty()||(Ne=[0,0],He=[0,0],Ve=_t=null),er},er.empty=function(){return!!_e&&Ne[0]==Ne[1]||!!Ee&&He[0]==He[1]},_.rebind(er,ue,"on")};var yl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ro=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function ka(ue){return JSON.parse(ue.responseText)}function Qs(ue){var _e=E.createRange();return _e.selectNode(E.body),_e.createContextualFragment(ue.responseText)}_.text=Or(function(ue){return ue.responseText}),_.json=function(ue,_e){return qr(ue,"application/json",ka,_e)},_.html=function(ue,_e){return qr(ue,"text/html",Qs,_e)},_.xml=Or(function(ue){return ue.responseXML}),"object"==typeof ie&&ie.exports?ie.exports=_:this.d3=_}).apply(self)},{}],59:[function(v,ie,ae){"use strict";ie.exports=v("./quad")},{"./quad":60}],60:[function(v,ie,ae){"use strict";var _=v("binary-search-bounds"),k=v("clamp"),m=v("parse-rect"),E=v("array-bounds"),e=v("pick-by-alias"),c=v("defined"),d=v("flatten-vertex-data"),n=v("is-obj"),t=v("dtype"),i=v("math-log2");function r(g,s){for(var b=s[0],x=s[1],w=1/(s[2]-b),l=1/(s[3]-x),y=new Array(g.length),A=0,T=g.length/2;A<T;A++)y[2*A]=k((g[2*A]-b)*w,0,1),y[2*A+1]=k((g[2*A+1]-x)*l,0,1);return y}ie.exports=function(s,b){b||(b={}),s=d(s,"float64"),b=e(b,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var x=c(b.maxDepth,255),S=c(b.bounds,E(s,2));S[0]===S[2]&&S[2]++,S[1]===S[3]&&S[3]++;var l,p=r(s,S),w=s.length>>>1;b.dtype||(b.dtype="array"),"string"==typeof b.dtype?l=new(t(b.dtype))(w):b.dtype&&(l=b.dtype,Array.isArray(l)&&(l.length=w));for(var y=0;y<w;++y)l[y]=y;var A=[],T=[],M=[],f=[];!function O(N,U,X,oe,se,ne){if(!oe.length)return null;var W=A[se]||(A[se]=[]),G=M[se]||(M[se]=[]),$=T[se]||(T[se]=[]),V=W.length;if(++se>x||ne>1073741824){for(var H=0;H<oe.length;H++)W.push(oe[H]),G.push(ne),$.push(null,null,null,null);return V}if(W.push(oe[0]),G.push(ne),oe.length<=1)return $.push(null,null,null,null),V;for(var q=.5*X,K=N+q,Y=U+q,te=[],J=[],j=[],re=[],le=1,ge=oe.length;le<ge;le++){var pe=oe[le],ke=p[2*pe+1];p[2*pe]<K?ke<Y?te.push(pe):J.push(pe):ke<Y?j.push(pe):re.push(pe)}return $.push(O(N,U,q,te,se,ne<<=2),O(N,Y,q,J,se,ne+1),O(K,U,q,j,se,ne+2),O(K,Y,q,re,se,ne+3)),V}(0,0,1,l,0,1);for(var u=0,h=0;h<A.length;h++){var o=A[h];if(l.set)l.set(o,u);else for(var C=0,R=o.length;C<R;C++)l[C+u]=o[C];var z=u+A[h].length;f[h]=[u,z],u=z}return l.range=function I(){for(var N=[],U=arguments.length;U--;)N[U]=arguments[U];var X;if(n(N[N.length-1])){var oe=N.pop();!N.length&&(null!=oe.x||null!=oe.l||null!=oe.left)&&(N=[oe],X={}),X=e(oe,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else X={};N.length||(N=S);var j,se=m.apply(void 0,N),ne=[Math.min(se.x,se.x+se.width),Math.min(se.y,se.y+se.height),Math.max(se.x,se.x+se.width),Math.max(se.y,se.y+se.height)],W=ne[0],G=ne[1],$=ne[2],V=ne[3],H=r([W,G,$,V],S),q=H[0],K=H[1],Y=H[2],te=H[3],J=c(X.level,A.length);if(null!=X.d&&("number"==typeof X.d?j=[X.d,X.d]:X.d.length&&(j=X.d),J=Math.min(Math.max(Math.ceil(-i(Math.abs(j[0])/(S[2]-S[0]))),Math.ceil(-i(Math.abs(j[1])/(S[3]-S[1])))),J)),J=Math.min(J,A.length),X.lod)return F(q,K,Y,te,J);var re=[];function le(pe,xe,ke,we,de,be){if(null!==de&&null!==be&&!(q>pe+ke||K>xe+ke||Y<pe||te<xe||we>=J||de===be)){var ye=A[we];void 0===be&&(be=ye.length);for(var Ce=de;Ce<be;Ce++){var Fe=ye[Ce],Ke=s[2*Fe],Ue=s[2*Fe+1];Ke>=W&&Ke<=$&&Ue>=G&&Ue<=V&&re.push(Fe)}var Be=T[we],Ie=Be[4*de+0],nt=Be[4*de+1],gt=Be[4*de+2],Nt=Be[4*de+3],St=ge(Be,de+1),Bt=.5*ke,Zt=we+1;le(pe,xe,Bt,Zt,Ie,nt||gt||Nt||St),le(pe,xe+Bt,Bt,Zt,nt,gt||Nt||St),le(pe+Bt,xe,Bt,Zt,gt,Nt||St),le(pe+Bt,xe+Bt,Bt,Zt,Nt,St)}}function ge(pe,xe){for(var ke=null,we=0;null===ke;)if(ke=pe[4*xe+we],++we>pe.length)return null;return ke}return le(0,0,1,0,0,1),re},l;function F(N,U,X,oe,se){for(var ne=[],W=0;W<se;W++){var G=M[W],$=f[W][0],V=D(N,U,W),H=D(X,oe,W),q=_.ge(G,V),K=_.gt(G,H,q,G.length-1);ne[W]=[q+$,K+$]}return ne}function D(N,U,X){for(var oe=1,se=.5,ne=.5,W=.5,G=0;G<X;G++)oe<<=2,oe+=N<se?U<ne?0:1:U<ne?2:3,W*=.5,se+=N<se?-W:W,ne+=U<ne?-W:W;return oe}}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(v,ie,ae){"use strict";Object.defineProperty(ae,"__esModule",{value:!0});var _=v("@turf/meta"),k=6378137;function e(n){var t=0;if(n&&n.length>0){t+=Math.abs(c(n[0]));for(var i=1;i<n.length;i++)t-=Math.abs(c(n[i]))}return t}function c(n){var t,i,r,g,s,b,x=0,S=n.length;if(S>2){for(b=0;b<S;b++)b===S-2?(r=S-2,g=S-1,s=0):b===S-1?(r=S-1,g=0,s=1):(r=b,g=b+1,s=b+2),t=n[r],i=n[g],x+=(d(n[s][0])-d(t[0]))*Math.sin(d(i[1]));x=x*k*k/2}return x}function d(n){return n*Math.PI/180}ae.default=function m(n){return _.geomReduce(n,function(t,i){return t+function E(n){var i,t=0;switch(n.type){case"Polygon":return e(n.coordinates);case"MultiPolygon":for(i=0;i<n.coordinates.length;i++)t+=e(n.coordinates[i]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(i)},0)}},{"@turf/meta":63}],62:[function(v,ie,ae){"use strict";function _(h,o,C){void 0===C&&(C={});var R={type:"Feature"};return(0===C.id||C.id)&&(R.id=C.id),C.bbox&&(R.bbox=C.bbox),R.properties=o||{},R.geometry=h,R}function m(h,o,C){if(void 0===C&&(C={}),!h)throw new Error("coordinates is required");if(!Array.isArray(h))throw new Error("coordinates must be an Array");if(h.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!T(h[0])||!T(h[1]))throw new Error("coordinates must contain numbers");return _({type:"Point",coordinates:h},o,C)}function e(h,o,C){void 0===C&&(C={});for(var R=0,z=h;R<z.length;R++){var O=z[R];if(O.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var I=0;I<O[O.length-1].length;I++)if(O[O.length-1][I]!==O[0][I])throw new Error("First and last Position are not equivalent.")}return _({type:"Polygon",coordinates:h},o,C)}function d(h,o,C){if(void 0===C&&(C={}),h.length<2)throw new Error("coordinates must be an array of two or more positions");return _({type:"LineString",coordinates:h},o,C)}function t(h,o){void 0===o&&(o={});var C={type:"FeatureCollection"};return o.id&&(C.id=o.id),o.bbox&&(C.bbox=o.bbox),C.features=h,C}function i(h,o,C){return void 0===C&&(C={}),_({type:"MultiLineString",coordinates:h},o,C)}function a(h,o,C){return void 0===C&&(C={}),_({type:"MultiPoint",coordinates:h},o,C)}function r(h,o,C){return void 0===C&&(C={}),_({type:"MultiPolygon",coordinates:h},o,C)}function b(h,o){void 0===o&&(o="kilometers");var C=ae.factors[o];if(!C)throw new Error(o+" units is invalid");return h*C}function x(h,o){void 0===o&&(o="kilometers");var C=ae.factors[o];if(!C)throw new Error(o+" units is invalid");return h/C}function w(h){return h%(2*Math.PI)*180/Math.PI}function T(h){return!isNaN(h)&&null!==h&&!Array.isArray(h)}Object.defineProperty(ae,"__esModule",{value:!0}),ae.earthRadius=6371008.8,ae.factors={centimeters:100*ae.earthRadius,centimetres:100*ae.earthRadius,degrees:ae.earthRadius/111325,feet:3.28084*ae.earthRadius,inches:39.37*ae.earthRadius,kilometers:ae.earthRadius/1e3,kilometres:ae.earthRadius/1e3,meters:ae.earthRadius,metres:ae.earthRadius,miles:ae.earthRadius/1609.344,millimeters:1e3*ae.earthRadius,millimetres:1e3*ae.earthRadius,nauticalmiles:ae.earthRadius/1852,radians:1,yards:1.0936*ae.earthRadius},ae.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ae.earthRadius,yards:1.0936133},ae.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},ae.feature=_,ae.geometry=function k(h,o,C){switch(void 0===C&&(C={}),h){case"Point":return m(o).geometry;case"LineString":return d(o).geometry;case"Polygon":return e(o).geometry;case"MultiPoint":return a(o).geometry;case"MultiLineString":return i(o).geometry;case"MultiPolygon":return r(o).geometry;default:throw new Error(h+" is invalid")}},ae.point=m,ae.points=function E(h,o,C){return void 0===C&&(C={}),t(h.map(function(R){return m(R,o)}),C)},ae.polygon=e,ae.polygons=function c(h,o,C){return void 0===C&&(C={}),t(h.map(function(R){return e(R,o)}),C)},ae.lineString=d,ae.lineStrings=function n(h,o,C){return void 0===C&&(C={}),t(h.map(function(R){return d(R,o)}),C)},ae.featureCollection=t,ae.multiLineString=i,ae.multiPoint=a,ae.multiPolygon=r,ae.geometryCollection=function g(h,o,C){return void 0===C&&(C={}),_({type:"GeometryCollection",geometries:h},o,C)},ae.round=function s(h,o){if(void 0===o&&(o=0),o&&!(o>=0))throw new Error("precision must be a positive number");var C=Math.pow(10,o||0);return Math.round(h*C)/C},ae.radiansToLength=b,ae.lengthToRadians=x,ae.lengthToDegrees=function S(h,o){return w(x(h,o))},ae.bearingToAzimuth=function p(h){var o=h%360;return o<0&&(o+=360),o},ae.radiansToDegrees=w,ae.degreesToRadians=function l(h){return h%360*Math.PI/180},ae.convertLength=function y(h,o,C){if(void 0===o&&(o="kilometers"),void 0===C&&(C="kilometers"),!(h>=0))throw new Error("length must be a positive number");return b(x(h,o),C)},ae.convertArea=function A(h,o,C){if(void 0===o&&(o="meters"),void 0===C&&(C="kilometers"),!(h>=0))throw new Error("area must be a positive number");var R=ae.areaFactors[o];if(!R)throw new Error("invalid original units");var z=ae.areaFactors[C];if(!z)throw new Error("invalid final units");return h/R*z},ae.isNumber=T,ae.isObject=function M(h){return!!h&&h.constructor===Object},ae.validateBBox=function f(h){if(!h)throw new Error("bbox is required");if(!Array.isArray(h))throw new Error("bbox must be an Array");if(4!==h.length&&6!==h.length)throw new Error("bbox must be an Array of 4 or 6 numbers");h.forEach(function(o){if(!T(o))throw new Error("bbox must only contain numbers")})},ae.validateId=function u(h){if(!h)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof h))throw new Error("id must be a number or a string")}},{}],63:[function(v,ie,ae){"use strict";Object.defineProperty(ae,"__esModule",{value:!0});var _=v("@turf/helpers");function k(w,l,y){if(null!==w)for(var A,T,M,f,u,h,o,z,C=0,R=0,O=w.type,I="FeatureCollection"===O,F="Feature"===O,D=I?w.features.length:1,N=0;N<D;N++){u=(z=!!(o=I?w.features[N].geometry:F?w.geometry:w)&&"GeometryCollection"===o.type)?o.geometries.length:1;for(var U=0;U<u;U++){var X=0,oe=0;if(null!==(f=z?o.geometries[U]:o)){h=f.coordinates;var se=f.type;switch(C=!y||"Polygon"!==se&&"MultiPolygon"!==se?0:1,se){case null:break;case"Point":if(!1===l(h,R,N,X,oe))return!1;R++,X++;break;case"LineString":case"MultiPoint":for(A=0;A<h.length;A++){if(!1===l(h[A],R,N,X,oe))return!1;R++,"MultiPoint"===se&&X++}"LineString"===se&&X++;break;case"Polygon":case"MultiLineString":for(A=0;A<h.length;A++){for(T=0;T<h[A].length-C;T++){if(!1===l(h[A][T],R,N,X,oe))return!1;R++}"MultiLineString"===se&&X++,"Polygon"===se&&oe++}"Polygon"===se&&X++;break;case"MultiPolygon":for(A=0;A<h.length;A++){for(oe=0,T=0;T<h[A].length;T++){for(M=0;M<h[A][T].length-C;M++){if(!1===l(h[A][T][M],R,N,X,oe))return!1;R++}oe++}X++}break;case"GeometryCollection":for(A=0;A<f.geometries.length;A++)if(!1===k(f.geometries[A],l,y))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function E(w,l){var y;switch(w.type){case"FeatureCollection":for(y=0;y<w.features.length&&!1!==l(w.features[y].properties,y);y++);break;case"Feature":l(w.properties,0)}}function c(w,l){if("Feature"===w.type)l(w,0);else if("FeatureCollection"===w.type)for(var y=0;y<w.features.length&&!1!==l(w.features[y],y);y++);}function t(w,l){var y,A,T,M,f,u,h,o,C,R,z=0,O="FeatureCollection"===w.type,I="Feature"===w.type,F=O?w.features.length:1;for(y=0;y<F;y++){for(o=O?w.features[y].properties:I?w.properties:{},C=O?w.features[y].bbox:I?w.bbox:void 0,R=O?w.features[y].id:I?w.id:void 0,f=(h=!!(u=O?w.features[y].geometry:I?w.geometry:w)&&"GeometryCollection"===u.type)?u.geometries.length:1,T=0;T<f;T++)if(null!==(M=h?u.geometries[T]:u))switch(M.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===l(M,z,o,C,R))return!1;break;case"GeometryCollection":for(A=0;A<M.geometries.length;A++)if(!1===l(M.geometries[A],z,o,C,R))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===l(null,z,o,C,R))return!1;z++}}function a(w,l){t(w,function(y,A,T,M,f){var h,u=null===y?null:y.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==l(_.feature(y,T,{bbox:M,id:f}),A,0)&&void 0}switch(u){case"MultiPoint":h="Point";break;case"MultiLineString":h="LineString";break;case"MultiPolygon":h="Polygon"}for(var o=0;o<y.coordinates.length;o++)if(!1===l(_.feature({type:h,coordinates:y.coordinates[o]},T),A,o))return!1})}function g(w,l){a(w,function(y,A,T){var M=0;if(y.geometry){var f=y.geometry.type;if("Point"!==f&&"MultiPoint"!==f){var u,h=0,o=0,C=0;if(!1===k(y,function(R,z,O,I,F){if(void 0===u||A>h||I>o||F>C)return u=R,h=A,o=I,C=F,void(M=0);var D=_.lineString([u,R],y.properties);if(!1===l(D,A,T,F,M))return!1;M++,u=R}))return!1}}})}function b(w,l){if(!w)throw new Error("geojson is required");a(w,function(y,A,T){if(null!==y.geometry){var f=y.geometry.coordinates;switch(y.geometry.type){case"LineString":if(!1===l(y,A,T,0,0))return!1;break;case"Polygon":for(var u=0;u<f.length;u++)if(!1===l(_.lineString(f[u],y.properties),A,T,u))return!1}}})}ae.coordEach=k,ae.coordReduce=function m(w,l,y,A){var T=y;return k(w,function(M,f,u,h,o){T=0===f&&void 0===y?M:l(T,M,f,u,h,o)},A),T},ae.propEach=E,ae.propReduce=function e(w,l,y){var A=y;return E(w,function(T,M){A=0===M&&void 0===y?T:l(A,T,M)}),A},ae.featureEach=c,ae.featureReduce=function d(w,l,y){var A=y;return c(w,function(T,M){A=0===M&&void 0===y?T:l(A,T,M)}),A},ae.coordAll=function n(w){var l=[];return k(w,function(y){l.push(y)}),l},ae.geomEach=t,ae.geomReduce=function i(w,l,y){var A=y;return t(w,function(T,M,f,u,h){A=0===M&&void 0===y?T:l(A,T,M,f,u,h)}),A},ae.flattenEach=a,ae.flattenReduce=function r(w,l,y){var A=y;return a(w,function(T,M,f){A=0===M&&0===f&&void 0===y?T:l(A,T,M,f)}),A},ae.segmentEach=g,ae.segmentReduce=function s(w,l,y){var A=y,T=!1;return g(w,function(M,f,u,h,o){A=!1===T&&void 0===y?M:l(A,M,f,u,h,o),T=!0}),A},ae.lineEach=b,ae.lineReduce=function x(w,l,y){var A=y;return b(w,function(T,M,f,u){A=0===M&&void 0===y?T:l(A,T,M,f,u)}),A},ae.findSegment=function S(w,l){if(!_.isObject(l=l||{}))throw new Error("options is invalid");var u,y=l.featureIndex||0,A=l.multiFeatureIndex||0,T=l.geometryIndex||0,M=l.segmentIndex||0,f=l.properties;switch(w.type){case"FeatureCollection":y<0&&(y=w.features.length+y),f=f||w.features[y].properties,u=w.features[y].geometry;break;case"Feature":f=f||w.properties,u=w.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=w;break;default:throw new Error("geojson is invalid")}if(null===u)return null;var h=u.coordinates;switch(u.type){case"Point":case"MultiPoint":return null;case"LineString":return M<0&&(M=h.length+M-1),_.lineString([h[M],h[M+1]],f,l);case"Polygon":return T<0&&(T=h.length+T),M<0&&(M=h[T].length+M-1),_.lineString([h[T][M],h[T][M+1]],f,l);case"MultiLineString":return A<0&&(A=h.length+A),M<0&&(M=h[A].length+M-1),_.lineString([h[A][M],h[A][M+1]],f,l);case"MultiPolygon":return A<0&&(A=h.length+A),T<0&&(T=h[A].length+T),M<0&&(M=h[A][T].length-M-1),_.lineString([h[A][T][M],h[A][T][M+1]],f,l)}throw new Error("geojson is invalid")},ae.findPoint=function p(w,l){if(!_.isObject(l=l||{}))throw new Error("options is invalid");var u,y=l.featureIndex||0,A=l.multiFeatureIndex||0,T=l.geometryIndex||0,M=l.coordIndex||0,f=l.properties;switch(w.type){case"FeatureCollection":y<0&&(y=w.features.length+y),f=f||w.features[y].properties,u=w.features[y].geometry;break;case"Feature":f=f||w.properties,u=w.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=w;break;default:throw new Error("geojson is invalid")}if(null===u)return null;var h=u.coordinates;switch(u.type){case"Point":return _.point(h,f,l);case"MultiPoint":return A<0&&(A=h.length+A),_.point(h[A],f,l);case"LineString":return M<0&&(M=h.length+M),_.point(h[M],f,l);case"Polygon":return T<0&&(T=h.length+T),M<0&&(M=h[T].length+M),_.point(h[T][M],f,l);case"MultiLineString":return A<0&&(A=h.length+A),M<0&&(M=h[A].length+M),_.point(h[A][M],f,l);case"MultiPolygon":return A<0&&(A=h.length+A),T<0&&(T=h[A].length+T),M<0&&(M=h[A][T].length-M),_.point(h[A][T][M],f,l)}throw new Error("geojson is invalid")}},{"@turf/helpers":62}],64:[function(v,ie,ae){"use strict";Object.defineProperty(ae,"__esModule",{value:!0});var _=v("@turf/meta");function k(m){var E=[1/0,1/0,-1/0,-1/0];return _.coordEach(m,function(e){E[0]>e[0]&&(E[0]=e[0]),E[1]>e[1]&&(E[1]=e[1]),E[2]<e[0]&&(E[2]=e[0]),E[3]<e[1]&&(E[3]=e[1])}),E}k.default=k,ae.default=k},{"@turf/meta":66}],65:[function(v,ie,ae){arguments[4][62][0].apply(ae,arguments)},{dup:62}],66:[function(v,ie,ae){arguments[4][63][0].apply(ae,arguments)},{"@turf/helpers":65,dup:63}],67:[function(v,ie,ae){"use strict";Object.defineProperty(ae,"__esModule",{value:!0});var _=v("@turf/meta"),k=v("@turf/helpers");ae.default=function m(E,e){void 0===e&&(e={});var c=0,d=0,n=0;return _.coordEach(E,function(t){c+=t[0],d+=t[1],n++}),k.point([c/n,d/n],e.properties)}},{"@turf/helpers":68,"@turf/meta":69}],68:[function(v,ie,ae){"use strict";function _(F,D,N){void 0===N&&(N={});var U={type:"Feature"};return(0===N.id||N.id)&&(U.id=N.id),N.bbox&&(U.bbox=N.bbox),U.properties=D||{},U.geometry=F,U}function m(F,D,N){return void 0===N&&(N={}),_({type:"Point",coordinates:F},D,N)}function e(F,D,N){void 0===N&&(N={});for(var U=0,X=F;U<X.length;U++){var oe=X[U];if(oe.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var se=0;se<oe[oe.length-1].length;se++)if(oe[oe.length-1][se]!==oe[0][se])throw new Error("First and last Position are not equivalent.")}return _({type:"Polygon",coordinates:F},D,N)}function d(F,D,N){if(void 0===N&&(N={}),F.length<2)throw new Error("coordinates must be an array of two or more positions");return _({type:"LineString",coordinates:F},D,N)}function t(F,D){void 0===D&&(D={});var N={type:"FeatureCollection"};return D.id&&(N.id=D.id),D.bbox&&(N.bbox=D.bbox),N.features=F,N}function i(F,D,N){return void 0===N&&(N={}),_({type:"MultiLineString",coordinates:F},D,N)}function a(F,D,N){return void 0===N&&(N={}),_({type:"MultiPoint",coordinates:F},D,N)}function r(F,D,N){return void 0===N&&(N={}),_({type:"MultiPolygon",coordinates:F},D,N)}function b(F,D){void 0===D&&(D="kilometers");var N=ae.factors[D];if(!N)throw new Error(D+" units is invalid");return F*N}function x(F,D){void 0===D&&(D="kilometers");var N=ae.factors[D];if(!N)throw new Error(D+" units is invalid");return F/N}function w(F){return F%(2*Math.PI)*180/Math.PI}function T(F){return!isNaN(F)&&null!==F&&!Array.isArray(F)&&!/^\s*$/.test(F)}Object.defineProperty(ae,"__esModule",{value:!0}),ae.earthRadius=6371008.8,ae.factors={centimeters:100*ae.earthRadius,centimetres:100*ae.earthRadius,degrees:ae.earthRadius/111325,feet:3.28084*ae.earthRadius,inches:39.37*ae.earthRadius,kilometers:ae.earthRadius/1e3,kilometres:ae.earthRadius/1e3,meters:ae.earthRadius,metres:ae.earthRadius,miles:ae.earthRadius/1609.344,millimeters:1e3*ae.earthRadius,millimetres:1e3*ae.earthRadius,nauticalmiles:ae.earthRadius/1852,radians:1,yards:ae.earthRadius/1.0936},ae.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ae.earthRadius,yards:1/1.0936},ae.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},ae.feature=_,ae.geometry=function k(F,D,N){switch(void 0===N&&(N={}),F){case"Point":return m(D).geometry;case"LineString":return d(D).geometry;case"Polygon":return e(D).geometry;case"MultiPoint":return a(D).geometry;case"MultiLineString":return i(D).geometry;case"MultiPolygon":return r(D).geometry;default:throw new Error(F+" is invalid")}},ae.point=m,ae.points=function E(F,D,N){return void 0===N&&(N={}),t(F.map(function(U){return m(U,D)}),N)},ae.polygon=e,ae.polygons=function c(F,D,N){return void 0===N&&(N={}),t(F.map(function(U){return e(U,D)}),N)},ae.lineString=d,ae.lineStrings=function n(F,D,N){return void 0===N&&(N={}),t(F.map(function(U){return d(U,D)}),N)},ae.featureCollection=t,ae.multiLineString=i,ae.multiPoint=a,ae.multiPolygon=r,ae.geometryCollection=function g(F,D,N){return void 0===N&&(N={}),_({type:"GeometryCollection",geometries:F},D,N)},ae.round=function s(F,D){if(void 0===D&&(D=0),D&&!(D>=0))throw new Error("precision must be a positive number");var N=Math.pow(10,D||0);return Math.round(F*N)/N},ae.radiansToLength=b,ae.lengthToRadians=x,ae.lengthToDegrees=function S(F,D){return w(x(F,D))},ae.bearingToAzimuth=function p(F){var D=F%360;return D<0&&(D+=360),D},ae.radiansToDegrees=w,ae.degreesToRadians=function l(F){return F%360*Math.PI/180},ae.convertLength=function y(F,D,N){if(void 0===D&&(D="kilometers"),void 0===N&&(N="kilometers"),!(F>=0))throw new Error("length must be a positive number");return b(x(F,D),N)},ae.convertArea=function A(F,D,N){if(void 0===D&&(D="meters"),void 0===N&&(N="kilometers"),!(F>=0))throw new Error("area must be a positive number");var U=ae.areaFactors[D];if(!U)throw new Error("invalid original units");var X=ae.areaFactors[N];if(!X)throw new Error("invalid final units");return F/U*X},ae.isNumber=T,ae.isObject=function M(F){return!!F&&F.constructor===Object},ae.validateBBox=function f(F){if(!F)throw new Error("bbox is required");if(!Array.isArray(F))throw new Error("bbox must be an Array");if(4!==F.length&&6!==F.length)throw new Error("bbox must be an Array of 4 or 6 numbers");F.forEach(function(D){if(!T(D))throw new Error("bbox must only contain numbers")})},ae.validateId=function u(F){if(!F)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof F))throw new Error("id must be a number or a string")},ae.radians2degrees=function h(){throw new Error("method has been renamed to `radiansToDegrees`")},ae.degrees2radians=function o(){throw new Error("method has been renamed to `degreesToRadians`")},ae.distanceToDegrees=function C(){throw new Error("method has been renamed to `lengthToDegrees`")},ae.distanceToRadians=function R(){throw new Error("method has been renamed to `lengthToRadians`")},ae.radiansToDistance=function z(){throw new Error("method has been renamed to `radiansToLength`")},ae.bearingToAngle=function O(){throw new Error("method has been renamed to `bearingToAzimuth`")},ae.convertDistance=function I(){throw new Error("method has been renamed to `convertLength`")}},{}],69:[function(v,ie,ae){"use strict";Object.defineProperty(ae,"__esModule",{value:!0});var _=v("@turf/helpers");function k(w,l,y){if(null!==w)for(var A,T,M,f,u,h,o,z,C=0,R=0,O=w.type,I="FeatureCollection"===O,F="Feature"===O,D=I?w.features.length:1,N=0;N<D;N++){u=(z=!!(o=I?w.features[N].geometry:F?w.geometry:w)&&"GeometryCollection"===o.type)?o.geometries.length:1;for(var U=0;U<u;U++){var X=0,oe=0;if(null!==(f=z?o.geometries[U]:o)){h=f.coordinates;var se=f.type;switch(C=!y||"Polygon"!==se&&"MultiPolygon"!==se?0:1,se){case null:break;case"Point":if(!1===l(h,R,N,X,oe))return!1;R++,X++;break;case"LineString":case"MultiPoint":for(A=0;A<h.length;A++){if(!1===l(h[A],R,N,X,oe))return!1;R++,"MultiPoint"===se&&X++}"LineString"===se&&X++;break;case"Polygon":case"MultiLineString":for(A=0;A<h.length;A++){for(T=0;T<h[A].length-C;T++){if(!1===l(h[A][T],R,N,X,oe))return!1;R++}"MultiLineString"===se&&X++,"Polygon"===se&&oe++}"Polygon"===se&&X++;break;case"MultiPolygon":for(A=0;A<h.length;A++){for(oe=0,T=0;T<h[A].length;T++){for(M=0;M<h[A][T].length-C;M++){if(!1===l(h[A][T][M],R,N,X,oe))return!1;R++}oe++}X++}break;case"GeometryCollection":for(A=0;A<f.geometries.length;A++)if(!1===k(f.geometries[A],l,y))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function E(w,l){var y;switch(w.type){case"FeatureCollection":for(y=0;y<w.features.length&&!1!==l(w.features[y].properties,y);y++);break;case"Feature":l(w.properties,0)}}function c(w,l){if("Feature"===w.type)l(w,0);else if("FeatureCollection"===w.type)for(var y=0;y<w.features.length&&!1!==l(w.features[y],y);y++);}function t(w,l){var y,A,T,M,f,u,h,o,C,R,z=0,O="FeatureCollection"===w.type,I="Feature"===w.type,F=O?w.features.length:1;for(y=0;y<F;y++){for(o=O?w.features[y].properties:I?w.properties:{},C=O?w.features[y].bbox:I?w.bbox:void 0,R=O?w.features[y].id:I?w.id:void 0,f=(h=!!(u=O?w.features[y].geometry:I?w.geometry:w)&&"GeometryCollection"===u.type)?u.geometries.length:1,T=0;T<f;T++)if(null!==(M=h?u.geometries[T]:u))switch(M.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===l(M,z,o,C,R))return!1;break;case"GeometryCollection":for(A=0;A<M.geometries.length;A++)if(!1===l(M.geometries[A],z,o,C,R))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===l(null,z,o,C,R))return!1;z++}}function a(w,l){t(w,function(y,A,T,M,f){var h,u=null===y?null:y.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==l(_.feature(y,T,{bbox:M,id:f}),A,0)&&void 0}switch(u){case"MultiPoint":h="Point";break;case"MultiLineString":h="LineString";break;case"MultiPolygon":h="Polygon"}for(var o=0;o<y.coordinates.length;o++)if(!1===l(_.feature({type:h,coordinates:y.coordinates[o]},T),A,o))return!1})}function g(w,l){a(w,function(y,A,T){var M=0;if(y.geometry){var f=y.geometry.type;if("Point"!==f&&"MultiPoint"!==f){var u,h=0,o=0,C=0;if(!1===k(y,function(R,z,O,I,F){if(void 0===u||A>h||I>o||F>C)return u=R,h=A,o=I,C=F,void(M=0);var D=_.lineString([u,R],y.properties);if(!1===l(D,A,T,F,M))return!1;M++,u=R}))return!1}}})}function b(w,l){if(!w)throw new Error("geojson is required");a(w,function(y,A,T){if(null!==y.geometry){var f=y.geometry.coordinates;switch(y.geometry.type){case"LineString":if(!1===l(y,A,T,0,0))return!1;break;case"Polygon":for(var u=0;u<f.length;u++)if(!1===l(_.lineString(f[u],y.properties),A,T,u))return!1}}})}ae.coordEach=k,ae.coordReduce=function m(w,l,y,A){var T=y;return k(w,function(M,f,u,h,o){T=0===f&&void 0===y?M:l(T,M,f,u,h,o)},A),T},ae.propEach=E,ae.propReduce=function e(w,l,y){var A=y;return E(w,function(T,M){A=0===M&&void 0===y?T:l(A,T,M)}),A},ae.featureEach=c,ae.featureReduce=function d(w,l,y){var A=y;return c(w,function(T,M){A=0===M&&void 0===y?T:l(A,T,M)}),A},ae.coordAll=function n(w){var l=[];return k(w,function(y){l.push(y)}),l},ae.geomEach=t,ae.geomReduce=function i(w,l,y){var A=y;return t(w,function(T,M,f,u,h){A=0===M&&void 0===y?T:l(A,T,M,f,u,h)}),A},ae.flattenEach=a,ae.flattenReduce=function r(w,l,y){var A=y;return a(w,function(T,M,f){A=0===M&&0===f&&void 0===y?T:l(A,T,M,f)}),A},ae.segmentEach=g,ae.segmentReduce=function s(w,l,y){var A=y,T=!1;return g(w,function(M,f,u,h,o){A=!1===T&&void 0===y?M:l(A,M,f,u,h,o),T=!0}),A},ae.lineEach=b,ae.lineReduce=function x(w,l,y){var A=y;return b(w,function(T,M,f,u){A=0===M&&void 0===y?T:l(A,T,M,f,u)}),A},ae.findSegment=function S(w,l){if(!_.isObject(l=l||{}))throw new Error("options is invalid");var u,y=l.featureIndex||0,A=l.multiFeatureIndex||0,T=l.geometryIndex||0,M=l.segmentIndex||0,f=l.properties;switch(w.type){case"FeatureCollection":y<0&&(y=w.features.length+y),f=f||w.features[y].properties,u=w.features[y].geometry;break;case"Feature":f=f||w.properties,u=w.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=w;break;default:throw new Error("geojson is invalid")}if(null===u)return null;var h=u.coordinates;switch(u.type){case"Point":case"MultiPoint":return null;case"LineString":return M<0&&(M=h.length+M-1),_.lineString([h[M],h[M+1]],f,l);case"Polygon":return T<0&&(T=h.length+T),M<0&&(M=h[T].length+M-1),_.lineString([h[T][M],h[T][M+1]],f,l);case"MultiLineString":return A<0&&(A=h.length+A),M<0&&(M=h[A].length+M-1),_.lineString([h[A][M],h[A][M+1]],f,l);case"MultiPolygon":return A<0&&(A=h.length+A),T<0&&(T=h[A].length+T),M<0&&(M=h[A][T].length-M-1),_.lineString([h[A][T][M],h[A][T][M+1]],f,l)}throw new Error("geojson is invalid")},ae.findPoint=function p(w,l){if(!_.isObject(l=l||{}))throw new Error("options is invalid");var u,y=l.featureIndex||0,A=l.multiFeatureIndex||0,T=l.geometryIndex||0,M=l.coordIndex||0,f=l.properties;switch(w.type){case"FeatureCollection":y<0&&(y=w.features.length+y),f=f||w.features[y].properties,u=w.features[y].geometry;break;case"Feature":f=f||w.properties,u=w.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=w;break;default:throw new Error("geojson is invalid")}if(null===u)return null;var h=u.coordinates;switch(u.type){case"Point":return _.point(h,f,l);case"MultiPoint":return A<0&&(A=h.length+A),_.point(h[A],f,l);case"LineString":return M<0&&(M=h.length+M),_.point(h[M],f,l);case"Polygon":return T<0&&(T=h.length+T),M<0&&(M=h[T].length+M),_.point(h[T][M],f,l);case"MultiLineString":return A<0&&(A=h.length+A),M<0&&(M=h[A].length+M),_.point(h[A][M],f,l);case"MultiPolygon":return A<0&&(A=h.length+A),T<0&&(T=h[A].length+T),M<0&&(M=h[A][T].length-M),_.point(h[A][T][M],f,l)}throw new Error("geojson is invalid")}},{"@turf/helpers":68}],70:[function(v,ie,ae){ie.exports=function _(k){var m=0,E=0,e=0,c=0;return k.map(function(d){var n=(d=d.slice())[0],t=n.toUpperCase();if(n!=t)switch(d[0]=t,n){case"a":d[6]+=e,d[7]+=c;break;case"v":d[1]+=c;break;case"h":d[1]+=e;break;default:for(var i=1;i<d.length;)d[i++]+=e,d[i++]+=c}switch(t){case"Z":e=m,c=E;break;case"H":e=d[1];break;case"V":c=d[1];break;case"M":e=m=d[1],c=E=d[2];break;default:e=d[d.length-2],c=d[d.length-1]}return d})}},{}],71:[function(v,ie,ae){"use strict";ie.exports=function _(k,m){if(!k||null==k.length)throw Error("Argument should be an array");m=null==m?1:Math.floor(m);for(var E=Array(2*m),e=0;e<m;e++){for(var c=-1/0,d=1/0,n=e,t=k.length;n<t;n+=m)k[n]>c&&(c=k[n]),k[n]<d&&(d=k[n]);E[e]=d,E[m+e]=c}return E}},{}],72:[function(v,ie,ae){"use strict";ie.exports=function(_,k,m){if("function"==typeof Array.prototype.findIndex)return _.findIndex(k,m);if("function"!=typeof k)throw new TypeError("predicate must be a function");var E=Object(_),e=E.length;if(0===e)return-1;for(var c=0;c<e;c++)if(k.call(m,E[c],c,E))return c;return-1}},{}],73:[function(v,ie,ae){"use strict";var _=v("array-bounds");ie.exports=function k(m,E,e){if(!m||null==m.length)throw Error("Argument should be an array");null==E&&(E=1),null==e&&(e=_(m,E));for(var c=0;c<E;c++){var d=e[E+c],n=e[c],t=c,i=m.length;if(d===1/0&&n===-1/0)for(t=c;t<i;t+=E)m[t]=m[t]===d?1:m[t]===n?0:.5;else if(d===1/0)for(t=c;t<i;t+=E)m[t]=m[t]===d?1:0;else if(n===-1/0)for(t=c;t<i;t+=E)m[t]=m[t]===n?0:1;else{var a=d-n;for(t=c;t<i;t+=E)isNaN(m[t])||(m[t]=0===a?.5:(m[t]-n)/a)}}return m}},{"array-bounds":71}],74:[function(v,ie,ae){ie.exports=function(k,m){var E="number"==typeof k,e="number"==typeof m;E&&!e?(m=k,k=0):!E&&!e&&(k=0,m=0);var c=(m|=0)-(k|=0);if(c<0)throw new Error("array length must be positive");for(var d=new Array(c),n=0,t=k;n<c;n++,t++)d[n]=t;return d}},{}],75:[function(v,ie,ae){(function(_){(function(){"use strict";var k=v("object-assign");function m(o,C){if(o===C)return 0;for(var R=o.length,z=C.length,O=0,I=Math.min(R,z);O<I;++O)if(o[O]!==C[O]){R=o[O],z=C[O];break}return R<z?-1:z<R?1:0}function E(o){return _.Buffer&&"function"==typeof _.Buffer.isBuffer?_.Buffer.isBuffer(o):!(null==o||!o._isBuffer)}var e=v("util/"),c=Object.prototype.hasOwnProperty,d=Array.prototype.slice,n="foo"===function(){}.name;function t(o){return Object.prototype.toString.call(o)}function i(o){return!E(o)&&"function"==typeof _.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(o):!!o&&!!(o instanceof DataView||o.buffer&&o.buffer instanceof ArrayBuffer))}var a=ie.exports=p,r=/\s*function\s+([^\(\s]*)\s*/;function g(o){if(e.isFunction(o)){if(n)return o.name;var R=o.toString().match(r);return R&&R[1]}}function s(o,C){return"string"==typeof o?o.length<C?o:o.slice(0,C):o}function b(o){if(n||!e.isFunction(o))return e.inspect(o);var C=g(o);return"[Function"+(C?": "+C:"")+"]"}function S(o,C,R,z,O){throw new a.AssertionError({message:R,actual:o,expected:C,operator:z,stackStartFunction:O})}function p(o,C){o||S(o,!0,C,"==",a.ok)}function w(o,C,R,z){if(o===C)return!0;if(E(o)&&E(C))return 0===m(o,C);if(e.isDate(o)&&e.isDate(C))return o.getTime()===C.getTime();if(e.isRegExp(o)&&e.isRegExp(C))return o.source===C.source&&o.global===C.global&&o.multiline===C.multiline&&o.lastIndex===C.lastIndex&&o.ignoreCase===C.ignoreCase;if(!(null!==o&&"object"==typeof o||null!==C&&"object"==typeof C))return R?o===C:o==C;if(i(o)&&i(C)&&t(o)===t(C)&&!(o instanceof Float32Array||o instanceof Float64Array))return 0===m(new Uint8Array(o.buffer),new Uint8Array(C.buffer));if(E(o)!==E(C))return!1;var O=(z=z||{actual:[],expected:[]}).actual.indexOf(o);return-1!==O&&O===z.expected.indexOf(C)||(z.actual.push(o),z.expected.push(C),function y(o,C,R,z){if(null==o||null==C)return!1;if(e.isPrimitive(o)||e.isPrimitive(C))return o===C;if(R&&Object.getPrototypeOf(o)!==Object.getPrototypeOf(C))return!1;var O=l(o),I=l(C);if(O&&!I||!O&&I)return!1;if(O)return w(o=d.call(o),C=d.call(C),R);var N,U,F=h(o),D=h(C);if(F.length!==D.length)return!1;for(F.sort(),D.sort(),U=F.length-1;U>=0;U--)if(F[U]!==D[U])return!1;for(U=F.length-1;U>=0;U--)if(!w(o[N=F[U]],C[N],R,z))return!1;return!0}(o,C,R,z))}function l(o){return"[object Arguments]"==Object.prototype.toString.call(o)}function T(o,C){if(!o||!C)return!1;if("[object RegExp]"==Object.prototype.toString.call(C))return C.test(o);try{if(o instanceof C)return!0}catch(R){}return!Error.isPrototypeOf(C)&&!0===C.call({},o)}function f(o,C,R,z){var O;if("function"!=typeof C)throw new TypeError('"block" argument must be a function');"string"==typeof R&&(z=R,R=null),O=function M(o){var C;try{o()}catch(R){C=R}return C}(C),z=(R&&R.name?" ("+R.name+").":".")+(z?" "+z:"."),o&&!O&&S(O,R,"Missing expected exception"+z);var I="string"==typeof z,D=!o&&O&&!R;if((!o&&e.isError(O)&&I&&T(O,R)||D)&&S(O,R,"Got unwanted exception"+z),o&&O&&R&&!T(O,R)||!o&&O)throw O}a.AssertionError=function(C){this.name="AssertionError",this.actual=C.actual,this.expected=C.expected,this.operator=C.operator,C.message?(this.message=C.message,this.generatedMessage=!1):(this.message=function x(o){return s(b(o.actual),128)+" "+o.operator+" "+s(b(o.expected),128)}(this),this.generatedMessage=!0);var R=C.stackStartFunction||S;if(Error.captureStackTrace)Error.captureStackTrace(this,R);else{var z=new Error;if(z.stack){var O=z.stack,I=g(R),F=O.indexOf("\n"+I);if(F>=0){var D=O.indexOf("\n",F+1);O=O.substring(D+1)}this.stack=O}}},e.inherits(a.AssertionError,Error),a.fail=S,a.ok=p,a.equal=function(C,R,z){C!=R&&S(C,R,z,"==",a.equal)},a.notEqual=function(C,R,z){C==R&&S(C,R,z,"!=",a.notEqual)},a.deepEqual=function(C,R,z){w(C,R,!1)||S(C,R,z,"deepEqual",a.deepEqual)},a.deepStrictEqual=function(C,R,z){w(C,R,!0)||S(C,R,z,"deepStrictEqual",a.deepStrictEqual)},a.notDeepEqual=function(C,R,z){w(C,R,!1)&&S(C,R,z,"notDeepEqual",a.notDeepEqual)},a.notDeepStrictEqual=function A(o,C,R){w(o,C,!0)&&S(o,C,R,"notDeepStrictEqual",A)},a.strictEqual=function(C,R,z){C!==R&&S(C,R,z,"===",a.strictEqual)},a.notStrictEqual=function(C,R,z){C===R&&S(C,R,z,"!==",a.notStrictEqual)},a.throws=function(o,C,R){f(!0,o,C,R)},a.doesNotThrow=function(o,C,R){f(!1,o,C,R)},a.ifError=function(o){if(o)throw o},a.strict=k(function u(o,C){o||S(o,!0,C,"==",u)},a,{equal:a.strictEqual,deepEqual:a.deepStrictEqual,notEqual:a.notStrictEqual,notDeepEqual:a.notDeepStrictEqual}),a.strict.strict=a.strict;var h=Object.keys||function(o){var C=[];for(var R in o)c.call(o,R)&&C.push(R);return C}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":247,"util/":78}],76:[function(v,ie,ae){ie.exports="function"==typeof Object.create?function(k,m){k.super_=m,k.prototype=Object.create(m.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}})}:function(k,m){k.super_=m;var E=function(){};E.prototype=m.prototype,k.prototype=new E,k.prototype.constructor=k}},{}],77:[function(v,ie,ae){ie.exports=function(k){return k&&"object"==typeof k&&"function"==typeof k.copy&&"function"==typeof k.fill&&"function"==typeof k.readUInt8}},{}],78:[function(v,ie,ae){(function(_,k){(function(){var m=/%[sdj%]/g;ae.format=function(D){if(!y(D)){for(var N=[],U=0;U<arguments.length;U++)N.push(c(arguments[U]));return N.join(" ")}U=1;for(var X=arguments,oe=X.length,se=String(D).replace(m,function(W){if("%%"===W)return"%";if(U>=oe)return W;switch(W){case"%s":return String(X[U++]);case"%d":return Number(X[U++]);case"%j":try{return JSON.stringify(X[U++])}catch(G){return"[Circular]"}default:return W}}),ne=X[U];U<oe;ne=X[++U])p(ne)||!f(ne)?se+=" "+ne:se+=" "+c(ne);return se},ae.deprecate=function(D,N){if(T(k.process))return function(){return ae.deprecate(D,N).apply(this,arguments)};if(!0===_.noDeprecation)return D;var U=!1;return function X(){if(!U){if(_.throwDeprecation)throw new Error(N);_.traceDeprecation?console.trace(N):console.error(N),U=!0}return D.apply(this,arguments)}};var e,E={};function c(D,N){var U={seen:[],stylize:n};return arguments.length>=3&&(U.depth=arguments[2]),arguments.length>=4&&(U.colors=arguments[3]),S(N)?U.showHidden=N:N&&ae._extend(U,N),T(U.showHidden)&&(U.showHidden=!1),T(U.depth)&&(U.depth=2),T(U.colors)&&(U.colors=!1),T(U.customInspect)&&(U.customInspect=!0),U.colors&&(U.stylize=d),i(U,D,U.depth)}function d(D,N){var U=c.styles[N];return U?"\x1b["+c.colors[U][0]+"m"+D+"\x1b["+c.colors[U][1]+"m":D}function n(D,N){return D}function i(D,N,U){if(D.customInspect&&N&&o(N.inspect)&&N.inspect!==ae.inspect&&(!N.constructor||N.constructor.prototype!==N)){var X=N.inspect(U,D);return y(X)||(X=i(D,X,U)),X}var oe=function a(D,N){if(T(N))return D.stylize("undefined","undefined");if(y(N)){var U="'"+JSON.stringify(N).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return D.stylize(U,"string")}return l(N)?D.stylize(""+N,"number"):S(N)?D.stylize(""+N,"boolean"):p(N)?D.stylize("null","null"):void 0}(D,N);if(oe)return oe;var se=Object.keys(N),ne=function t(D){var N={};return D.forEach(function(U,X){N[U]=!0}),N}(se);if(D.showHidden&&(se=Object.getOwnPropertyNames(N)),h(N)&&(se.indexOf("message")>=0||se.indexOf("description")>=0))return r(N);if(0===se.length){if(o(N))return D.stylize("[Function"+(N.name?": "+N.name:"")+"]","special");if(M(N))return D.stylize(RegExp.prototype.toString.call(N),"regexp");if(u(N))return D.stylize(Date.prototype.toString.call(N),"date");if(h(N))return r(N)}var q,G="",$=!1,V=["{","}"];return x(N)&&($=!0,V=["[","]"]),o(N)&&(G=" [Function"+(N.name?": "+N.name:"")+"]"),M(N)&&(G=" "+RegExp.prototype.toString.call(N)),u(N)&&(G=" "+Date.prototype.toUTCString.call(N)),h(N)&&(G=" "+r(N)),0!==se.length||$&&0!=N.length?U<0?M(N)?D.stylize(RegExp.prototype.toString.call(N),"regexp"):D.stylize("[Object]","special"):(D.seen.push(N),q=$?function g(D,N,U,X,oe){for(var se=[],ne=0,W=N.length;ne<W;++ne)F(N,String(ne))?se.push(s(D,N,U,X,String(ne),!0)):se.push("");return oe.forEach(function(G){G.match(/^\d+$/)||se.push(s(D,N,U,X,G,!0))}),se}(D,N,U,ne,se):se.map(function(K){return s(D,N,U,ne,K,$)}),D.seen.pop(),function b(D,N,U){return D.reduce(function(se,ne){return ne.indexOf("\n"),se+ne.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?U[0]+(""===N?"":N+"\n ")+" "+D.join(",\n  ")+" "+U[1]:U[0]+N+" "+D.join(", ")+" "+U[1]}(q,G,V)):V[0]+G+V[1]}function r(D){return"["+Error.prototype.toString.call(D)+"]"}function s(D,N,U,X,oe,se){var ne,W,G;if((G=Object.getOwnPropertyDescriptor(N,oe)||{value:N[oe]}).get?W=D.stylize(G.set?"[Getter/Setter]":"[Getter]","special"):G.set&&(W=D.stylize("[Setter]","special")),F(X,oe)||(ne="["+oe+"]"),W||(D.seen.indexOf(G.value)<0?(W=p(U)?i(D,G.value,null):i(D,G.value,U-1)).indexOf("\n")>-1&&(W=se?W.split("\n").map(function($){return"  "+$}).join("\n").substr(2):"\n"+W.split("\n").map(function($){return"   "+$}).join("\n")):W=D.stylize("[Circular]","special")),T(ne)){if(se&&oe.match(/^\d+$/))return W;(ne=JSON.stringify(""+oe)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ne=ne.substr(1,ne.length-2),ne=D.stylize(ne,"name")):(ne=ne.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ne=D.stylize(ne,"string"))}return ne+": "+W}function x(D){return Array.isArray(D)}function S(D){return"boolean"==typeof D}function p(D){return null===D}function l(D){return"number"==typeof D}function y(D){return"string"==typeof D}function T(D){return void 0===D}function M(D){return f(D)&&"[object RegExp]"===R(D)}function f(D){return"object"==typeof D&&null!==D}function u(D){return f(D)&&"[object Date]"===R(D)}function h(D){return f(D)&&("[object Error]"===R(D)||D instanceof Error)}function o(D){return"function"==typeof D}function R(D){return Object.prototype.toString.call(D)}function z(D){return D<10?"0"+D.toString(10):D.toString(10)}ae.debuglog=function(D){if(T(e)&&(e=_.env.NODE_DEBUG||""),D=D.toUpperCase(),!E[D])if(new RegExp("\\b"+D+"\\b","i").test(e)){var N=_.pid;E[D]=function(){var U=ae.format.apply(ae,arguments);console.error("%s %d: %s",D,N,U)}}else E[D]=function(){};return E[D]},ae.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},ae.isArray=x,ae.isBoolean=S,ae.isNull=p,ae.isNullOrUndefined=function w(D){return null==D},ae.isNumber=l,ae.isString=y,ae.isSymbol=function A(D){return"symbol"==typeof D},ae.isUndefined=T,ae.isRegExp=M,ae.isObject=f,ae.isDate=u,ae.isError=h,ae.isFunction=o,ae.isPrimitive=function C(D){return null===D||"boolean"==typeof D||"number"==typeof D||"string"==typeof D||"symbol"==typeof D||void 0===D},ae.isBuffer=v("./support/isBuffer");var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(){var D=new Date,N=[z(D.getHours()),z(D.getMinutes()),z(D.getSeconds())].join(":");return[D.getDate(),O[D.getMonth()],N].join(" ")}function F(D,N){return Object.prototype.hasOwnProperty.call(D,N)}ae.log=function(){console.log("%s - %s",I(),ae.format.apply(ae,arguments))},ae.inherits=v("inherits"),ae._extend=function(D,N){if(!N||!f(N))return D;for(var U=Object.keys(N),X=U.length;X--;)D[U[X]]=N[U[X]];return D}}).call(this)}).call(this,v("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":77,_process:277,inherits:76}],79:[function(v,ie,ae){"use strict";ae.byteLength=function n(s){var b=d(s),S=b[1];return 3*(b[0]+S)/4-S},ae.toByteArray=function i(s){var b,A,x=d(s),S=x[0],p=x[1],w=new m(function t(s,b,x){return 3*(b+x)/4-x}(0,S,p)),l=0,y=p>0?S-4:S;for(A=0;A<y;A+=4)b=k[s.charCodeAt(A)]<<18|k[s.charCodeAt(A+1)]<<12|k[s.charCodeAt(A+2)]<<6|k[s.charCodeAt(A+3)],w[l++]=b>>16&255,w[l++]=b>>8&255,w[l++]=255&b;return 2===p&&(b=k[s.charCodeAt(A)]<<2|k[s.charCodeAt(A+1)]>>4,w[l++]=255&b),1===p&&(b=k[s.charCodeAt(A)]<<10|k[s.charCodeAt(A+1)]<<4|k[s.charCodeAt(A+2)]>>2,w[l++]=b>>8&255,w[l++]=255&b),w},ae.fromByteArray=function g(s){for(var b,x=s.length,S=x%3,p=[],w=16383,l=0,y=x-S;l<y;l+=w)p.push(r(s,l,l+w>y?y:l+w));return 1===S?p.push(_[(b=s[x-1])>>2]+_[b<<4&63]+"=="):2===S&&p.push(_[(b=(s[x-2]<<8)+s[x-1])>>10]+_[b>>4&63]+_[b<<2&63]+"="),p.join("")};for(var _=[],k=[],m="undefined"!=typeof Uint8Array?Uint8Array:Array,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,c=E.length;e<c;++e)_[e]=E[e],k[E.charCodeAt(e)]=e;function d(s){var b=s.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=s.indexOf("=");return-1===x&&(x=b),[x,x===b?0:4-x%4]}function a(s){return _[s>>18&63]+_[s>>12&63]+_[s>>6&63]+_[63&s]}function r(s,b,x){for(var p=[],w=b;w<x;w+=3)p.push(a((s[w]<<16&16711680)+(s[w+1]<<8&65280)+(255&s[w+2])));return p.join("")}k["-".charCodeAt(0)]=62,k["_".charCodeAt(0)]=63},{}],80:[function(v,ie,ae){"use strict";function _(d,n,t,i,a){for(var r=a+1;i<=a;){var g=i+a>>>1,s=d[g];(void 0!==t?t(s,n):s-n)>=0?(r=g,a=g-1):i=g+1}return r}function k(d,n,t,i,a){for(var r=a+1;i<=a;){var g=i+a>>>1,s=d[g];(void 0!==t?t(s,n):s-n)>0?(r=g,a=g-1):i=g+1}return r}function m(d,n,t,i,a){for(var r=i-1;i<=a;){var g=i+a>>>1,s=d[g];(void 0!==t?t(s,n):s-n)<0?(r=g,i=g+1):a=g-1}return r}function E(d,n,t,i,a){for(var r=i-1;i<=a;){var g=i+a>>>1,s=d[g];(void 0!==t?t(s,n):s-n)<=0?(r=g,i=g+1):a=g-1}return r}function e(d,n,t,i,a){for(;i<=a;){var r=i+a>>>1,g=d[r],s=void 0!==t?t(g,n):g-n;if(0===s)return r;s<=0?i=r+1:a=r-1}return-1}function c(d,n,t,i,a,r){return"function"==typeof t?r(d,n,t,void 0===i?0:0|i,void 0===a?d.length-1:0|a):r(d,n,void 0,void 0===t?0:0|t,void 0===i?d.length-1:0|i)}ie.exports={ge:function(d,n,t,i,a){return c(d,n,t,i,a,_)},gt:function(d,n,t,i,a){return c(d,n,t,i,a,k)},lt:function(d,n,t,i,a){return c(d,n,t,i,a,m)},le:function(d,n,t,i,a){return c(d,n,t,i,a,E)},eq:function(d,n,t,i,a){return c(d,n,t,i,a,e)}}},{}],81:[function(v,ie,ae){"use strict";function k(E){var e=32;return(E&=-E)&&e--,65535&E&&(e-=16),16711935&E&&(e-=8),252645135&E&&(e-=4),858993459&E&&(e-=2),1431655765&E&&(e-=1),e}ae.INT_BITS=32,ae.INT_MAX=2147483647,ae.INT_MIN=-1<<31,ae.sign=function(E){return(E>0)-(E<0)},ae.abs=function(E){var e=E>>31;return(E^e)-e},ae.min=function(E,e){return e^(E^e)&-(E<e)},ae.max=function(E,e){return E^(E^e)&-(E<e)},ae.isPow2=function(E){return!(E&E-1||!E)},ae.log2=function(E){var e,c;return e=(E>65535)<<4,e|=c=((E>>>=e)>255)<<3,e|=c=((E>>>=c)>15)<<2,(e|=c=((E>>>=c)>3)<<1)|(E>>>=c)>>1},ae.log10=function(E){return E>=1e9?9:E>=1e8?8:E>=1e7?7:E>=1e6?6:E>=1e5?5:E>=1e4?4:E>=1e3?3:E>=100?2:E>=10?1:0},ae.popCount=function(E){return 16843009*((E=(858993459&(E-=E>>>1&1431655765))+(E>>>2&858993459))+(E>>>4)&252645135)>>>24},ae.countTrailingZeros=k,ae.nextPow2=function(E){return E+=0===E,--E,E|=E>>>1,E|=E>>>2,E|=E>>>4,1+((E|=E>>>8)|E>>>16)},ae.prevPow2=function(E){return E|=E>>>1,E|=E>>>2,E|=E>>>4,E|=E>>>8,(E|=E>>>16)-(E>>>1)},ae.parity=function(E){return E^=E>>>16,E^=E>>>8,E^=E>>>4,27030>>>(E&=15)&1};var m=new Array(256);(function(E){for(var e=0;e<256;++e){var c=e,d=e,n=7;for(c>>>=1;c;c>>>=1)d<<=1,d|=1&c,--n;E[e]=d<<n&255}})(m),ae.reverse=function(E){return m[255&E]<<24|m[E>>>8&255]<<16|m[E>>>16&255]<<8|m[E>>>24&255]},ae.interleave2=function(E,e){return(E=1431655765&((E=858993459&((E=252645135&((E=16711935&((E&=65535)|E<<8))|E<<4))|E<<2))|E<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},ae.deinterleave2=function(E,e){return(E=65535&((E=16711935&((E=252645135&((E=858993459&((E=E>>>e&1431655765)|E>>>1))|E>>>2))|E>>>4))|E>>>16))<<16>>16},ae.interleave3=function(E,e,c){return E=1227133513&((E=3272356035&((E=251719695&((E=4278190335&((E&=1023)|E<<16))|E<<8))|E<<4))|E<<2),(E|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(c=1227133513&((c=3272356035&((c=251719695&((c=4278190335&((c&=1023)|c<<16))|c<<8))|c<<4))|c<<2))<<2},ae.deinterleave3=function(E,e){return(E=1023&((E=4278190335&((E=251719695&((E=3272356035&((E=E>>>e&1227133513)|E>>>2))|E>>>4))|E>>>8))|E>>>16))<<22>>22},ae.nextCombination=function(E){var e=E|E-1;return e+1|(~e&-~e)-1>>>k(E)+1}},{}],82:[function(v,ie,ae){"use strict";var _=v("clamp");ie.exports=function m(c,d){d||(d={});var a,r,g,s,b,x,p,l,y,n=null==d.cutoff?.25:d.cutoff,t=null==d.radius?8:d.radius,i=d.channel||0;if(ArrayBuffer.isView(c)||Array.isArray(c)){if(!d.width||!d.height)throw Error("For raw data width and height should be provided by options");a=d.width,r=d.height,s=c,x=d.stride?d.stride:Math.floor(c.length/a/r)}else window.HTMLCanvasElement&&c instanceof window.HTMLCanvasElement?(s=(p=c).getContext("2d").getImageData(0,0,a=p.width,r=p.height).data,x=4):window.CanvasRenderingContext2D&&c instanceof window.CanvasRenderingContext2D?(s=c.getImageData(0,0,a=(p=c.canvas).width,r=p.height).data,x=4):window.ImageData&&c instanceof window.ImageData&&(a=c.width,r=c.height,s=c.data,x=4);if(g=Math.max(a,r),window.Uint8ClampedArray&&s instanceof window.Uint8ClampedArray||window.Uint8Array&&s instanceof window.Uint8Array)for(b=s,s=Array(a*r),l=0,y=b.length;l<y;l++)s[l]=b[l*x+i]/255;else if(1!==x)throw Error("Raw data can have only 1 value per pixel");var A=Array(a*r),T=Array(a*r),M=Array(g),f=Array(g),u=Array(g+1),h=Array(g);for(l=0,y=a*r;l<y;l++){var o=s[l];A[l]=1===o?0:0===o?k:Math.pow(Math.max(0,.5-o),2),T[l]=1===o?k:0===o?0:Math.pow(Math.max(0,o-.5),2)}E(A,a,r,M,f,h,u),E(T,a,r,M,f,h,u);var C=window.Float32Array?new Float32Array(a*r):new Array(a*r);for(l=0,y=a*r;l<y;l++)C[l]=_(1-((A[l]-T[l])/t+n),0,1);return C};var k=1e20;function E(c,d,n,t,i,a,r){for(var g=0;g<d;g++){for(var s=0;s<n;s++)t[s]=c[s*d+g];for(e(t,i,a,r,n),s=0;s<n;s++)c[s*d+g]=i[s]}for(s=0;s<n;s++){for(g=0;g<d;g++)t[g]=c[s*d+g];for(e(t,i,a,r,d),g=0;g<d;g++)c[s*d+g]=Math.sqrt(i[g])}}function e(c,d,n,t,i){n[0]=0,t[0]=-k,t[1]=+k;for(var a=1,r=0;a<i;a++){for(var g=(c[a]+a*a-(c[n[r]]+n[r]*n[r]))/(2*a-2*n[r]);g<=t[r];)r--,g=(c[a]+a*a-(c[n[r]]+n[r]*n[r]))/(2*a-2*n[r]);n[++r]=a,t[r]=g,t[r+1]=+k}for(a=0,r=0;a<i;a++){for(;t[r+1]<a;)r++;d[a]=(a-n[r])*(a-n[r])+c[n[r]]}}},{clamp:86}],83:[function(v,ie,ae){},{}],84:[function(v,ie,ae){"use strict";var m,_="object"==typeof Reflect?Reflect:null,k=_&&"function"==typeof _.apply?_.apply:function(l,y,A){return Function.prototype.apply.call(l,y,A)};m=_&&"function"==typeof _.ownKeys?_.ownKeys:Object.getOwnPropertySymbols?function(l){return Object.getOwnPropertyNames(l).concat(Object.getOwnPropertySymbols(l))}:function(l){return Object.getOwnPropertyNames(l)};var e=Number.isNaN||function(l){return l!=l};function c(){c.init.call(this)}ie.exports=c,ie.exports.once=function p(w,l){return new Promise(function(y,A){function T(){void 0!==M&&w.removeListener("error",M),y([].slice.call(arguments))}var M;"error"!==l&&(M=function(u){w.removeListener(l,T),A(u)},w.once("error",M)),w.once(l,T)})},c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var d=10;function n(w){if("function"!=typeof w)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof w)}function t(w){return void 0===w._maxListeners?c.defaultMaxListeners:w._maxListeners}function i(w,l,y,A){var T,M,f;if(n(y),void 0===(M=w._events)?(M=w._events=Object.create(null),w._eventsCount=0):(void 0!==M.newListener&&(w.emit("newListener",l,y.listener?y.listener:y),M=w._events),f=M[l]),void 0===f)f=M[l]=y,++w._eventsCount;else if("function"==typeof f?f=M[l]=A?[y,f]:[f,y]:A?f.unshift(y):f.push(y),(T=t(w))>0&&f.length>T&&!f.warned){f.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+f.length+" "+String(l)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=w,u.type=l,u.count=f.length,function E(w){console&&console.warn&&console.warn(w)}(u)}return w}function a(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function r(w,l,y){var A={fired:!1,wrapFn:void 0,target:w,type:l,listener:y},T=a.bind(A);return T.listener=y,A.wrapFn=T,T}function g(w,l,y){var A=w._events;if(void 0===A)return[];var T=A[l];return void 0===T?[]:"function"==typeof T?y?[T.listener||T]:[T]:y?function S(w){for(var l=new Array(w.length),y=0;y<l.length;++y)l[y]=w[y].listener||w[y];return l}(T):b(T,T.length)}function s(w){var l=this._events;if(void 0!==l){var y=l[w];if("function"==typeof y)return 1;if(void 0!==y)return y.length}return 0}function b(w,l){for(var y=new Array(l),A=0;A<l;++A)y[A]=w[A];return y}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(w){if("number"!=typeof w||w<0||e(w))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+w+".");d=w}}),c.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(l){if("number"!=typeof l||l<0||e(l))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+l+".");return this._maxListeners=l,this},c.prototype.getMaxListeners=function(){return t(this)},c.prototype.emit=function(l){for(var y=[],A=1;A<arguments.length;A++)y.push(arguments[A]);var T="error"===l,M=this._events;if(void 0!==M)T=T&&void 0===M.error;else if(!T)return!1;if(T){var f;if(y.length>0&&(f=y[0]),f instanceof Error)throw f;var u=new Error("Unhandled error."+(f?" ("+f.message+")":""));throw u.context=f,u}var h=M[l];if(void 0===h)return!1;if("function"==typeof h)k(h,this,y);else{var o=h.length,C=b(h,o);for(A=0;A<o;++A)k(C[A],this,y)}return!0},c.prototype.on=c.prototype.addListener=function(l,y){return i(this,l,y,!1)},c.prototype.prependListener=function(l,y){return i(this,l,y,!0)},c.prototype.once=function(l,y){return n(y),this.on(l,r(this,l,y)),this},c.prototype.prependOnceListener=function(l,y){return n(y),this.prependListener(l,r(this,l,y)),this},c.prototype.off=c.prototype.removeListener=function(l,y){var A,T,M,f,u;if(n(y),void 0===(T=this._events))return this;if(void 0===(A=T[l]))return this;if(A===y||A.listener===y)0==--this._eventsCount?this._events=Object.create(null):(delete T[l],T.removeListener&&this.emit("removeListener",l,A.listener||y));else if("function"!=typeof A){for(M=-1,f=A.length-1;f>=0;f--)if(A[f]===y||A[f].listener===y){u=A[f].listener,M=f;break}if(M<0)return this;0===M?A.shift():function x(w,l){for(;l+1<w.length;l++)w[l]=w[l+1];w.pop()}(A,M),1===A.length&&(T[l]=A[0]),void 0!==T.removeListener&&this.emit("removeListener",l,u||y)}return this},c.prototype.removeAllListeners=function(l){var y,A,T;if(void 0===(A=this._events))return this;if(void 0===A.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==A[l]&&(0==--this._eventsCount?this._events=Object.create(null):delete A[l]),this;if(0===arguments.length){var f,M=Object.keys(A);for(T=0;T<M.length;++T)"removeListener"!==(f=M[T])&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(y=A[l]))this.removeListener(l,y);else if(void 0!==y)for(T=y.length-1;T>=0;T--)this.removeListener(l,y[T]);return this},c.prototype.listeners=function(l){return g(this,l,!0)},c.prototype.rawListeners=function(l){return g(this,l,!1)},c.listenerCount=function(w,l){return"function"==typeof w.listenerCount?w.listenerCount(l):s.call(w,l)},c.prototype.listenerCount=s,c.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]}},{}],85:[function(v,ie,ae){(function(_){(function(){"use strict";var k=v("base64-js"),m=v("ieee754");ae.Buffer=d,ae.SlowBuffer=function S(j){return+j!=j&&(j=0),d.alloc(+j)},ae.INSPECT_MAX_BYTES=50;var E=2147483647;function c(j){if(j>E)throw new RangeError('The value "'+j+'" is invalid for option "size"');var re=new Uint8Array(j);return re.__proto__=d.prototype,re}function d(j,re,le){if("number"==typeof j){if("string"==typeof re)throw new TypeError('The "string" argument must be of type string. Received type number');return a(j)}return n(j,re,le)}function n(j,re,le){if("string"==typeof j)return function r(j,re){if(("string"!=typeof re||""===re)&&(re="utf8"),!d.isEncoding(re))throw new TypeError("Unknown encoding: "+re);var le=0|p(j,re),ge=c(le),pe=ge.write(j,re);return pe!==le&&(ge=ge.slice(0,pe)),ge}(j,re);if(ArrayBuffer.isView(j))return g(j);if(null==j)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(te(j,ArrayBuffer)||j&&te(j.buffer,ArrayBuffer))return function s(j,re,le){if(re<0||j.byteLength<re)throw new RangeError('"offset" is outside of buffer bounds');if(j.byteLength<re+(le||0))throw new RangeError('"length" is outside of buffer bounds');var ge;return(ge=void 0===re&&void 0===le?new Uint8Array(j):void 0===le?new Uint8Array(j,re):new Uint8Array(j,re,le)).__proto__=d.prototype,ge}(j,re,le);if("number"==typeof j)throw new TypeError('The "value" argument must not be of type number. Received type number');var ge=j.valueOf&&j.valueOf();if(null!=ge&&ge!==j)return d.from(ge,re,le);var pe=function b(j){if(d.isBuffer(j)){var re=0|x(j.length),le=c(re);return 0===le.length||j.copy(le,0,0,re),le}return void 0!==j.length?"number"!=typeof j.length||J(j.length)?c(0):g(j):"Buffer"===j.type&&Array.isArray(j.data)?g(j.data):void 0}(j);if(pe)return pe;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof j[Symbol.toPrimitive])return d.from(j[Symbol.toPrimitive]("string"),re,le);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}function t(j){if("number"!=typeof j)throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function a(j){return t(j),c(j<0?0:0|x(j))}function g(j){for(var re=j.length<0?0:0|x(j.length),le=c(re),ge=0;ge<re;ge+=1)le[ge]=255&j[ge];return le}function x(j){if(j>=E)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+E.toString(16)+" bytes");return 0|j}function p(j,re){if(d.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||te(j,ArrayBuffer))return j.byteLength;if("string"!=typeof j)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);var le=j.length,ge=arguments.length>2&&!0===arguments[2];if(!ge&&0===le)return 0;for(var pe=!1;;)switch(re){case"ascii":case"latin1":case"binary":return le;case"utf8":case"utf-8":return V(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*le;case"hex":return le>>>1;case"base64":return K(j).length;default:if(pe)return ge?-1:V(j).length;re=(""+re).toLowerCase(),pe=!0}}function w(j,re,le){var ge=!1;if((void 0===re||re<0)&&(re=0),re>this.length||((void 0===le||le>this.length)&&(le=this.length),le<=0)||(le>>>=0)<=(re>>>=0))return"";for(j||(j="utf8");;)switch(j){case"hex":return D(this,re,le);case"utf8":case"utf-8":return R(this,re,le);case"ascii":return I(this,re,le);case"latin1":case"binary":return F(this,re,le);case"base64":return C(this,re,le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,re,le);default:if(ge)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),ge=!0}}function l(j,re,le){var ge=j[re];j[re]=j[le],j[le]=ge}function y(j,re,le,ge,pe){if(0===j.length)return-1;if("string"==typeof le?(ge=le,le=0):le>2147483647?le=2147483647:le<-2147483648&&(le=-2147483648),J(le=+le)&&(le=pe?0:j.length-1),le<0&&(le=j.length+le),le>=j.length){if(pe)return-1;le=j.length-1}else if(le<0){if(!pe)return-1;le=0}if("string"==typeof re&&(re=d.from(re,ge)),d.isBuffer(re))return 0===re.length?-1:A(j,re,le,ge,pe);if("number"==typeof re)return re&=255,"function"==typeof Uint8Array.prototype.indexOf?pe?Uint8Array.prototype.indexOf.call(j,re,le):Uint8Array.prototype.lastIndexOf.call(j,re,le):A(j,[re],le,ge,pe);throw new TypeError("val must be string, number or Buffer")}function A(j,re,le,ge,pe){var be,xe=1,ke=j.length,we=re.length;if(void 0!==ge&&("ucs2"===(ge=String(ge).toLowerCase())||"ucs-2"===ge||"utf16le"===ge||"utf-16le"===ge)){if(j.length<2||re.length<2)return-1;xe=2,ke/=2,we/=2,le/=2}function de(Ce,Fe){return 1===xe?Ce[Fe]:Ce.readUInt16BE(Fe*xe)}if(pe){var Le=-1;for(be=le;be<ke;be++)if(de(j,be)===de(re,-1===Le?0:be-Le)){if(-1===Le&&(Le=be),be-Le+1===we)return Le*xe}else-1!==Le&&(be-=be-Le),Le=-1}else for(le+we>ke&&(le=ke-we),be=le;be>=0;be--){for(var De=!0,ye=0;ye<we;ye++)if(de(j,be+ye)!==de(re,ye)){De=!1;break}if(De)return be}return-1}function T(j,re,le,ge){le=Number(le)||0;var pe=j.length-le;ge?(ge=Number(ge))>pe&&(ge=pe):ge=pe;var xe=re.length;ge>xe/2&&(ge=xe/2);for(var ke=0;ke<ge;++ke){var we=parseInt(re.substr(2*ke,2),16);if(J(we))return ke;j[le+ke]=we}return ke}function M(j,re,le,ge){return Y(V(re,j.length-le),j,le,ge)}function f(j,re,le,ge){return Y(function H(j){for(var re=[],le=0;le<j.length;++le)re.push(255&j.charCodeAt(le));return re}(re),j,le,ge)}function u(j,re,le,ge){return f(j,re,le,ge)}function h(j,re,le,ge){return Y(K(re),j,le,ge)}function o(j,re,le,ge){return Y(function q(j,re){for(var le,ge,xe=[],ke=0;ke<j.length&&!((re-=2)<0);++ke)ge=(le=j.charCodeAt(ke))>>8,xe.push(le%256),xe.push(ge);return xe}(re,j.length-le),j,le,ge)}function C(j,re,le){return k.fromByteArray(0===re&&le===j.length?j:j.slice(re,le))}function R(j,re,le){le=Math.min(j.length,le);for(var ge=[],pe=re;pe<le;){var de,be,Le,De,xe=j[pe],ke=null,we=xe>239?4:xe>223?3:xe>191?2:1;if(pe+we<=le)switch(we){case 1:xe<128&&(ke=xe);break;case 2:128==(192&(de=j[pe+1]))&&(De=(31&xe)<<6|63&de)>127&&(ke=De);break;case 3:be=j[pe+2],128==(192&(de=j[pe+1]))&&128==(192&be)&&(De=(15&xe)<<12|(63&de)<<6|63&be)>2047&&(De<55296||De>57343)&&(ke=De);break;case 4:be=j[pe+2],Le=j[pe+3],128==(192&(de=j[pe+1]))&&128==(192&be)&&128==(192&Le)&&(De=(15&xe)<<18|(63&de)<<12|(63&be)<<6|63&Le)>65535&&De<1114112&&(ke=De)}null===ke?(ke=65533,we=1):ke>65535&&(ge.push((ke-=65536)>>>10&1023|55296),ke=56320|1023&ke),ge.push(ke),pe+=we}return function O(j){var re=j.length;if(re<=z)return String.fromCharCode.apply(String,j);for(var le="",ge=0;ge<re;)le+=String.fromCharCode.apply(String,j.slice(ge,ge+=z));return le}(ge)}ae.kMaxLength=E,!(d.TYPED_ARRAY_SUPPORT=function e(){try{var j=new Uint8Array(1);return j.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===j.foo()}catch(re){return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),d.poolSize=8192,d.from=function(j,re,le){return n(j,re,le)},d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,d.alloc=function(j,re,le){return function i(j,re,le){return t(j),j<=0?c(j):void 0!==re?"string"==typeof le?c(j).fill(re,le):c(j).fill(re):c(j)}(j,re,le)},d.allocUnsafe=function(j){return a(j)},d.allocUnsafeSlow=function(j){return a(j)},d.isBuffer=function(re){return null!=re&&!0===re._isBuffer&&re!==d.prototype},d.compare=function(re,le){if(te(re,Uint8Array)&&(re=d.from(re,re.offset,re.byteLength)),te(le,Uint8Array)&&(le=d.from(le,le.offset,le.byteLength)),!d.isBuffer(re)||!d.isBuffer(le))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(re===le)return 0;for(var ge=re.length,pe=le.length,xe=0,ke=Math.min(ge,pe);xe<ke;++xe)if(re[xe]!==le[xe]){ge=re[xe],pe=le[xe];break}return ge<pe?-1:pe<ge?1:0},d.isEncoding=function(re){switch(String(re).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(re,le){if(!Array.isArray(re))throw new TypeError('"list" argument must be an Array of Buffers');if(0===re.length)return d.alloc(0);var ge;if(void 0===le)for(le=0,ge=0;ge<re.length;++ge)le+=re[ge].length;var pe=d.allocUnsafe(le),xe=0;for(ge=0;ge<re.length;++ge){var ke=re[ge];if(te(ke,Uint8Array)&&(ke=d.from(ke)),!d.isBuffer(ke))throw new TypeError('"list" argument must be an Array of Buffers');ke.copy(pe,xe),xe+=ke.length}return pe},d.byteLength=p,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var re=this.length;if(re%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var le=0;le<re;le+=2)l(this,le,le+1);return this},d.prototype.swap32=function(){var re=this.length;if(re%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var le=0;le<re;le+=4)l(this,le,le+3),l(this,le+1,le+2);return this},d.prototype.swap64=function(){var re=this.length;if(re%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var le=0;le<re;le+=8)l(this,le,le+7),l(this,le+1,le+6),l(this,le+2,le+5),l(this,le+3,le+4);return this},d.prototype.toLocaleString=d.prototype.toString=function(){var re=this.length;return 0===re?"":0===arguments.length?R(this,0,re):w.apply(this,arguments)},d.prototype.equals=function(re){if(!d.isBuffer(re))throw new TypeError("Argument must be a Buffer");return this===re||0===d.compare(this,re)},d.prototype.inspect=function(){var re="",le=ae.INSPECT_MAX_BYTES;return re=this.toString("hex",0,le).replace(/(.{2})/g,"$1 ").trim(),this.length>le&&(re+=" ... "),"<Buffer "+re+">"},d.prototype.compare=function(re,le,ge,pe,xe){if(te(re,Uint8Array)&&(re=d.from(re,re.offset,re.byteLength)),!d.isBuffer(re))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof re);if(void 0===le&&(le=0),void 0===ge&&(ge=re?re.length:0),void 0===pe&&(pe=0),void 0===xe&&(xe=this.length),le<0||ge>re.length||pe<0||xe>this.length)throw new RangeError("out of range index");if(pe>=xe&&le>=ge)return 0;if(pe>=xe)return-1;if(le>=ge)return 1;if(this===re)return 0;for(var ke=(xe>>>=0)-(pe>>>=0),we=(ge>>>=0)-(le>>>=0),de=Math.min(ke,we),be=this.slice(pe,xe),Le=re.slice(le,ge),De=0;De<de;++De)if(be[De]!==Le[De]){ke=be[De],we=Le[De];break}return ke<we?-1:we<ke?1:0},d.prototype.includes=function(re,le,ge){return-1!==this.indexOf(re,le,ge)},d.prototype.indexOf=function(re,le,ge){return y(this,re,le,ge,!0)},d.prototype.lastIndexOf=function(re,le,ge){return y(this,re,le,ge,!1)},d.prototype.write=function(re,le,ge,pe){if(void 0===le)pe="utf8",ge=this.length,le=0;else if(void 0===ge&&"string"==typeof le)pe=le,ge=this.length,le=0;else{if(!isFinite(le))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");le>>>=0,isFinite(ge)?(ge>>>=0,void 0===pe&&(pe="utf8")):(pe=ge,ge=void 0)}var xe=this.length-le;if((void 0===ge||ge>xe)&&(ge=xe),re.length>0&&(ge<0||le<0)||le>this.length)throw new RangeError("Attempt to write outside buffer bounds");pe||(pe="utf8");for(var ke=!1;;)switch(pe){case"hex":return T(this,re,le,ge);case"utf8":case"utf-8":return M(this,re,le,ge);case"ascii":return f(this,re,le,ge);case"latin1":case"binary":return u(this,re,le,ge);case"base64":return h(this,re,le,ge);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o(this,re,le,ge);default:if(ke)throw new TypeError("Unknown encoding: "+pe);pe=(""+pe).toLowerCase(),ke=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var z=4096;function I(j,re,le){var ge="";le=Math.min(j.length,le);for(var pe=re;pe<le;++pe)ge+=String.fromCharCode(127&j[pe]);return ge}function F(j,re,le){var ge="";le=Math.min(j.length,le);for(var pe=re;pe<le;++pe)ge+=String.fromCharCode(j[pe]);return ge}function D(j,re,le){var ge=j.length;(!re||re<0)&&(re=0),(!le||le<0||le>ge)&&(le=ge);for(var pe="",xe=re;xe<le;++xe)pe+=$(j[xe]);return pe}function N(j,re,le){for(var ge=j.slice(re,le),pe="",xe=0;xe<ge.length;xe+=2)pe+=String.fromCharCode(ge[xe]+256*ge[xe+1]);return pe}function U(j,re,le){if(j%1!=0||j<0)throw new RangeError("offset is not uint");if(j+re>le)throw new RangeError("Trying to access beyond buffer length")}function X(j,re,le,ge,pe,xe){if(!d.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(re>pe||re<xe)throw new RangeError('"value" argument is out of bounds');if(le+ge>j.length)throw new RangeError("Index out of range")}function oe(j,re,le,ge,pe,xe){if(le+ge>j.length)throw new RangeError("Index out of range");if(le<0)throw new RangeError("Index out of range")}function se(j,re,le,ge,pe){return re=+re,le>>>=0,pe||oe(j,0,le,4),m.write(j,re,le,ge,23,4),le+4}function ne(j,re,le,ge,pe){return re=+re,le>>>=0,pe||oe(j,0,le,8),m.write(j,re,le,ge,52,8),le+8}d.prototype.slice=function(re,le){var ge=this.length;(re=~~re)<0?(re+=ge)<0&&(re=0):re>ge&&(re=ge),(le=void 0===le?ge:~~le)<0?(le+=ge)<0&&(le=0):le>ge&&(le=ge),le<re&&(le=re);var pe=this.subarray(re,le);return pe.__proto__=d.prototype,pe},d.prototype.readUIntLE=function(re,le,ge){re>>>=0,le>>>=0,ge||U(re,le,this.length);for(var pe=this[re],xe=1,ke=0;++ke<le&&(xe*=256);)pe+=this[re+ke]*xe;return pe},d.prototype.readUIntBE=function(re,le,ge){re>>>=0,le>>>=0,ge||U(re,le,this.length);for(var pe=this[re+--le],xe=1;le>0&&(xe*=256);)pe+=this[re+--le]*xe;return pe},d.prototype.readUInt8=function(re,le){return re>>>=0,le||U(re,1,this.length),this[re]},d.prototype.readUInt16LE=function(re,le){return re>>>=0,le||U(re,2,this.length),this[re]|this[re+1]<<8},d.prototype.readUInt16BE=function(re,le){return re>>>=0,le||U(re,2,this.length),this[re]<<8|this[re+1]},d.prototype.readUInt32LE=function(re,le){return re>>>=0,le||U(re,4,this.length),(this[re]|this[re+1]<<8|this[re+2]<<16)+16777216*this[re+3]},d.prototype.readUInt32BE=function(re,le){return re>>>=0,le||U(re,4,this.length),16777216*this[re]+(this[re+1]<<16|this[re+2]<<8|this[re+3])},d.prototype.readIntLE=function(re,le,ge){re>>>=0,le>>>=0,ge||U(re,le,this.length);for(var pe=this[re],xe=1,ke=0;++ke<le&&(xe*=256);)pe+=this[re+ke]*xe;return pe>=(xe*=128)&&(pe-=Math.pow(2,8*le)),pe},d.prototype.readIntBE=function(re,le,ge){re>>>=0,le>>>=0,ge||U(re,le,this.length);for(var pe=le,xe=1,ke=this[re+--pe];pe>0&&(xe*=256);)ke+=this[re+--pe]*xe;return ke>=(xe*=128)&&(ke-=Math.pow(2,8*le)),ke},d.prototype.readInt8=function(re,le){return re>>>=0,le||U(re,1,this.length),128&this[re]?-1*(255-this[re]+1):this[re]},d.prototype.readInt16LE=function(re,le){re>>>=0,le||U(re,2,this.length);var ge=this[re]|this[re+1]<<8;return 32768&ge?4294901760|ge:ge},d.prototype.readInt16BE=function(re,le){re>>>=0,le||U(re,2,this.length);var ge=this[re+1]|this[re]<<8;return 32768&ge?4294901760|ge:ge},d.prototype.readInt32LE=function(re,le){return re>>>=0,le||U(re,4,this.length),this[re]|this[re+1]<<8|this[re+2]<<16|this[re+3]<<24},d.prototype.readInt32BE=function(re,le){return re>>>=0,le||U(re,4,this.length),this[re]<<24|this[re+1]<<16|this[re+2]<<8|this[re+3]},d.prototype.readFloatLE=function(re,le){return re>>>=0,le||U(re,4,this.length),m.read(this,re,!0,23,4)},d.prototype.readFloatBE=function(re,le){return re>>>=0,le||U(re,4,this.length),m.read(this,re,!1,23,4)},d.prototype.readDoubleLE=function(re,le){return re>>>=0,le||U(re,8,this.length),m.read(this,re,!0,52,8)},d.prototype.readDoubleBE=function(re,le){return re>>>=0,le||U(re,8,this.length),m.read(this,re,!1,52,8)},d.prototype.writeUIntLE=function(re,le,ge,pe){re=+re,le>>>=0,ge>>>=0,pe||X(this,re,le,ge,Math.pow(2,8*ge)-1,0);var ke=1,we=0;for(this[le]=255&re;++we<ge&&(ke*=256);)this[le+we]=re/ke&255;return le+ge},d.prototype.writeUIntBE=function(re,le,ge,pe){re=+re,le>>>=0,ge>>>=0,pe||X(this,re,le,ge,Math.pow(2,8*ge)-1,0);var ke=ge-1,we=1;for(this[le+ke]=255&re;--ke>=0&&(we*=256);)this[le+ke]=re/we&255;return le+ge},d.prototype.writeUInt8=function(re,le,ge){return re=+re,le>>>=0,ge||X(this,re,le,1,255,0),this[le]=255&re,le+1},d.prototype.writeUInt16LE=function(re,le,ge){return re=+re,le>>>=0,ge||X(this,re,le,2,65535,0),this[le]=255&re,this[le+1]=re>>>8,le+2},d.prototype.writeUInt16BE=function(re,le,ge){return re=+re,le>>>=0,ge||X(this,re,le,2,65535,0),this[le]=re>>>8,this[le+1]=255&re,le+2},d.prototype.writeUInt32LE=function(re,le,ge){return re=+re,le>>>=0,ge||X(this,re,le,4,4294967295,0),this[le+3]=re>>>24,this[le+2]=re>>>16,this[le+1]=re>>>8,this[le]=255&re,le+4},d.prototype.writeUInt32BE=function(re,le,ge){return re=+re,le>>>=0,ge||X(this,re,le,4,4294967295,0),this[le]=re>>>24,this[le+1]=re>>>16,this[le+2]=re>>>8,this[le+3]=255&re,le+4},d.prototype.writeIntLE=function(re,le,ge,pe){if(re=+re,le>>>=0,!pe){var xe=Math.pow(2,8*ge-1);X(this,re,le,ge,xe-1,-xe)}var ke=0,we=1,de=0;for(this[le]=255&re;++ke<ge&&(we*=256);)re<0&&0===de&&0!==this[le+ke-1]&&(de=1),this[le+ke]=(re/we>>0)-de&255;return le+ge},d.prototype.writeIntBE=function(re,le,ge,pe){if(re=+re,le>>>=0,!pe){var xe=Math.pow(2,8*ge-1);X(this,re,le,ge,xe-1,-xe)}var ke=ge-1,we=1,de=0;for(this[le+ke]=255&re;--ke>=0&&(we*=256);)re<0&&0===de&&0!==this[le+ke+1]&&(de=1),this[le+ke]=(re/we>>0)-de&255;return le+ge},d.prototype.writeInt8=function(re,le,ge){return re=+re,le>>>=0,ge||X(this,re,le,1,127,-128),re<0&&(re=255+re+1),this[le]=255&re,le+1},d.prototype.writeInt16LE=function(re,le,ge){return re=+re,le>>>=0,ge||X(this,re,le,2,32767,-32768),this[le]=255&re,this[le+1]=re>>>8,le+2},d.prototype.writeInt16BE=function(re,le,ge){return re=+re,le>>>=0,ge||X(this,re,le,2,32767,-32768),this[le]=re>>>8,this[le+1]=255&re,le+2},d.prototype.writeInt32LE=function(re,le,ge){return re=+re,le>>>=0,ge||X(this,re,le,4,2147483647,-2147483648),this[le]=255&re,this[le+1]=re>>>8,this[le+2]=re>>>16,this[le+3]=re>>>24,le+4},d.prototype.writeInt32BE=function(re,le,ge){return re=+re,le>>>=0,ge||X(this,re,le,4,2147483647,-2147483648),re<0&&(re=4294967295+re+1),this[le]=re>>>24,this[le+1]=re>>>16,this[le+2]=re>>>8,this[le+3]=255&re,le+4},d.prototype.writeFloatLE=function(re,le,ge){return se(this,re,le,!0,ge)},d.prototype.writeFloatBE=function(re,le,ge){return se(this,re,le,!1,ge)},d.prototype.writeDoubleLE=function(re,le,ge){return ne(this,re,le,!0,ge)},d.prototype.writeDoubleBE=function(re,le,ge){return ne(this,re,le,!1,ge)},d.prototype.copy=function(re,le,ge,pe){if(!d.isBuffer(re))throw new TypeError("argument should be a Buffer");if(ge||(ge=0),!pe&&0!==pe&&(pe=this.length),le>=re.length&&(le=re.length),le||(le=0),pe>0&&pe<ge&&(pe=ge),pe===ge||0===re.length||0===this.length)return 0;if(le<0)throw new RangeError("targetStart out of bounds");if(ge<0||ge>=this.length)throw new RangeError("Index out of range");if(pe<0)throw new RangeError("sourceEnd out of bounds");pe>this.length&&(pe=this.length),re.length-le<pe-ge&&(pe=re.length-le+ge);var xe=pe-ge;if(this===re&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(le,ge,pe);else if(this===re&&ge<le&&le<pe)for(var ke=xe-1;ke>=0;--ke)re[ke+le]=this[ke+ge];else Uint8Array.prototype.set.call(re,this.subarray(ge,pe),le);return xe},d.prototype.fill=function(re,le,ge,pe){if("string"==typeof re){if("string"==typeof le?(pe=le,le=0,ge=this.length):"string"==typeof ge&&(pe=ge,ge=this.length),void 0!==pe&&"string"!=typeof pe)throw new TypeError("encoding must be a string");if("string"==typeof pe&&!d.isEncoding(pe))throw new TypeError("Unknown encoding: "+pe);if(1===re.length){var xe=re.charCodeAt(0);("utf8"===pe&&xe<128||"latin1"===pe)&&(re=xe)}}else"number"==typeof re&&(re&=255);if(le<0||this.length<le||this.length<ge)throw new RangeError("Out of range index");if(ge<=le)return this;var ke;if(le>>>=0,ge=void 0===ge?this.length:ge>>>0,re||(re=0),"number"==typeof re)for(ke=le;ke<ge;++ke)this[ke]=re;else{var we=d.isBuffer(re)?re:d.from(re,pe),de=we.length;if(0===de)throw new TypeError('The value "'+re+'" is invalid for argument "value"');for(ke=0;ke<ge-le;++ke)this[ke+le]=we[ke%de]}return this};var W=/[^+/0-9A-Za-z-_]/g;function $(j){return j<16?"0"+j.toString(16):j.toString(16)}function V(j,re){re=re||1/0;for(var le,ge=j.length,pe=null,xe=[],ke=0;ke<ge;++ke){if((le=j.charCodeAt(ke))>55295&&le<57344){if(!pe){if(le>56319){(re-=3)>-1&&xe.push(239,191,189);continue}if(ke+1===ge){(re-=3)>-1&&xe.push(239,191,189);continue}pe=le;continue}if(le<56320){(re-=3)>-1&&xe.push(239,191,189),pe=le;continue}le=65536+(pe-55296<<10|le-56320)}else pe&&(re-=3)>-1&&xe.push(239,191,189);if(pe=null,le<128){if((re-=1)<0)break;xe.push(le)}else if(le<2048){if((re-=2)<0)break;xe.push(le>>6|192,63&le|128)}else if(le<65536){if((re-=3)<0)break;xe.push(le>>12|224,le>>6&63|128,63&le|128)}else{if(!(le<1114112))throw new Error("Invalid code point");if((re-=4)<0)break;xe.push(le>>18|240,le>>12&63|128,le>>6&63|128,63&le|128)}}return xe}function K(j){return k.toByteArray(function G(j){if((j=(j=j.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;j.length%4!=0;)j+="=";return j}(j))}function Y(j,re,le,ge){for(var pe=0;pe<ge&&!(pe+le>=re.length||pe>=j.length);++pe)re[pe+le]=j[pe];return pe}function te(j,re){return j instanceof re||null!=j&&null!=j.constructor&&null!=j.constructor.name&&j.constructor.name===re.name}function J(j){return j!=j}}).call(this)}).call(this,v("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(v,ie,ae){ie.exports=function _(k,m,E){return m<E?k<m?m:k>E?E:k:k<E?E:k>m?m:k}},{}],87:[function(v,ie,ae){"use strict";var _=v("clamp");function k(E,e){null==e&&(e=!0);var c=E[0],d=E[1],n=E[2],t=E[3];return null==t&&(t=e?1:255),e&&(c*=255,d*=255,n*=255,t*=255),16777216*(c=255&_(c,0,255))+((d=255&_(d,0,255))<<16)+((n=255&_(n,0,255))<<8)+(255&_(t,0,255))}ie.exports=k,ie.exports.to=k,ie.exports.from=function m(E,e){var c=(E=+E)>>>24,d=(16711680&E)>>>16,n=(65280&E)>>>8,t=255&E;return!1===e?[c,d,n,t]:[c/255,d/255,n/255,t/255]}},{clamp:86}],88:[function(v,ie,ae){"use strict";ie.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(v,ie,ae){"use strict";var _=v("color-rgba"),k=v("clamp"),m=v("dtype");ie.exports=function(c,d){("float"===d||!d)&&(d="array"),"uint"===d&&(d="uint8"),"uint_clamped"===d&&(d="uint8_clamped");var t=new(m(d))(4),i="uint8"!==d&&"uint8_clamped"!==d;return(!c.length||"string"==typeof c)&&((c=_(c))[0]/=255,c[1]/=255,c[2]/=255),function E(e){return!!(e instanceof Uint8Array||e instanceof Uint8ClampedArray||Array.isArray(e)&&(e[0]>1||0===e[0])&&(e[1]>1||0===e[1])&&(e[2]>1||0===e[2])&&(!e[3]||e[3]>1))}(c)?(t[0]=c[0],t[1]=c[1],t[2]=c[2],t[3]=null!=c[3]?c[3]:255,i&&(t[0]/=255,t[1]/=255,t[2]/=255,t[3]/=255),t):(i?(t[0]=c[0],t[1]=c[1],t[2]=c[2],t[3]=null!=c[3]?c[3]:1):(t[0]=k(Math.floor(255*c[0]),0,255),t[1]=k(Math.floor(255*c[1]),0,255),t[2]=k(Math.floor(255*c[2]),0,255),t[3]=null==c[3]?255:k(Math.floor(255*c[3]),0,255)),t)}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(v,ie,ae){(function(_){(function(){"use strict";var k=v("color-name"),m=v("is-plain-obj"),E=v("defined");ie.exports=function c(d){var n,a,t=[],i=1;if("string"==typeof d)if(k[d])t=k[d].slice(),a="rgb";else if("transparent"===d)i=0,a="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(d)){var r=d.slice(1);i=1,(g=r.length)<=4?(t=[parseInt(r[0]+r[0],16),parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16)],4===g&&(i=parseInt(r[3]+r[3],16)/255)):(t=[parseInt(r[0]+r[1],16),parseInt(r[2]+r[3],16),parseInt(r[4]+r[5],16)],8===g&&(i=parseInt(r[6]+r[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),a="rgb"}else if(n=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(d)){var b=n[1],x="rgb"===b;a=r=b.replace(/a$/,"");var g="cmyk"===r?4:"gray"===r?1:3;t=n[2].trim().split(/\s*,\s*/).map(function(l,y){if(/%$/.test(l))return y===g?parseFloat(l)/100:"rgb"===r?255*parseFloat(l)/100:parseFloat(l);if("h"===r[y]){if(/deg$/.test(l))return parseFloat(l);if(void 0!==e[l])return e[l]}return parseFloat(l)}),b===r&&t.push(1),i=x||void 0===t[g]?1:t[g],t=t.slice(0,g)}else d.length>10&&/[0-9](?:\s|\/)/.test(d)&&(t=d.match(/([0-9]+)/g).map(function(p){return parseFloat(p)}),a=d.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(d))if(m(d)){var S=E(d.r,d.red,d.R,null);null!==S?(a="rgb",t=[S,E(d.g,d.green,d.G),E(d.b,d.blue,d.B)]):(a="hsl",t=[E(d.h,d.hue,d.H),E(d.s,d.saturation,d.S),E(d.l,d.lightness,d.L,d.b,d.brightness)]),i=E(d.a,d.alpha,d.opacity,1),null!=d.opacity&&(i/=100)}else(Array.isArray(d)||_.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(d))&&(t=[d[0],d[1],d[2]],a="rgb",i=4===d.length?d[3]:1);else a="rgb",t=[d>>>16,(65280&d)>>>8,255&d];return{space:a,values:t,alpha:i}};var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(v,ie,ae){"use strict";var _=v("color-parse"),k=v("color-space/hsl"),m=v("clamp");ie.exports=function(e){var c,t=_(e);return t.space?((c=Array(3))[0]=m(t.values[0],0,255),c[1]=m(t.values[1],0,255),c[2]=m(t.values[2],0,255),"h"===t.space[0]&&(c=k.rgb(c)),c.push(m(t.alpha,0,1)),c):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(v,ie,ae){"use strict";var _=v("./rgb");ie.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(k){var c,d,n,t,i,m=k[0]/360,E=k[1]/100,e=k[2]/100;if(0===E)return[i=255*e,i,i];c=2*e-(d=e<.5?e*(1+E):e+E-e*E),t=[0,0,0];for(var a=0;a<3;a++)(n=m+1/3*-(a-1))<0?n++:n>1&&n--,t[a]=255*(i=6*n<1?c+6*(d-c)*n:2*n<1?d:3*n<2?c+(d-c)*(2/3-n)*6:c);return t}},_.hsl=function(k){var t,a,m=k[0]/255,E=k[1]/255,e=k[2]/255,c=Math.min(m,E,e),d=Math.max(m,E,e),n=d-c;return d===c?t=0:m===d?t=(E-e)/n:E===d?t=2+(e-m)/n:e===d&&(t=4+(m-E)/n),(t=Math.min(60*t,360))<0&&(t+=360),a=(c+d)/2,[t,100*(d===c?0:a<=.5?n/(d+c):n/(2-d-c)),100*a]}},{"./rgb":93}],93:[function(v,ie,ae){"use strict";ie.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(v,ie,ae){ie.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(v,ie,ae){ie.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(v,ie,ae){ie.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(v,ie,ae){ie.exports=["normal","italic","oblique"]},{}],98:[function(v,ie,ae){ie.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(v,ie,ae){"use strict";ie.exports={parse:v("./parse"),stringify:v("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(v,ie,ae){"use strict";var _=v("css-font-size-keywords");ie.exports={isSize:function(m){return/^[\d\.]/.test(m)||-1!==m.indexOf("/")||-1!==_.indexOf(m)}}},{"css-font-size-keywords":95}],101:[function(v,ie,ae){"use strict";var _=v("unquote"),k=v("css-global-keywords"),m=v("css-system-font-keywords"),E=v("css-font-weight-keywords"),e=v("css-font-style-keywords"),c=v("css-font-stretch-keywords"),d=v("string-split-by"),n=v("./lib/util").isSize;ie.exports=i;var t=i.cache={};function i(r){if("string"!=typeof r)throw new Error("Font argument must be a string.");if(t[r])return t[r];if(""===r)throw new Error("Cannot parse an empty string.");if(-1!==m.indexOf(r))return t[r]={system:r};for(var b,g={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},s=d(r,/\s+/);b=s.shift();){if(-1!==k.indexOf(b))return["style","variant","weight","stretch"].forEach(function(S){g[S]=b}),t[r]=g;if(-1===e.indexOf(b))if("normal"!==b&&"small-caps"!==b)if(-1===c.indexOf(b)){if(-1===E.indexOf(b)){if(n(b)){var x=d(b,"/");if(g.size=x[0],null!=x[1]?g.lineHeight=a(x[1]):"/"===s[0]&&(s.shift(),g.lineHeight=a(s.shift())),!s.length)throw new Error("Missing required font-family.");return g.family=d(s.join(" "),/\s*,\s*/).map(_),t[r]=g}throw new Error("Unknown or unsupported font token: "+b)}g.weight=b}else g.stretch=b;else g.variant=b;else g.style=b}throw new Error("Missing required font-size.")}function a(r){var g=parseFloat(r);return g.toString()===r?g:r}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":305,unquote:328}],102:[function(v,ie,ae){"use strict";var _=v("pick-by-alias"),k=v("./lib/util").isSize,m=r(v("css-global-keywords")),E=r(v("css-system-font-keywords")),e=r(v("css-font-weight-keywords")),c=r(v("css-font-style-keywords")),d=r(v("css-font-stretch-keywords")),n={normal:1,"small-caps":1},t={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},i_size="1rem",i_family="serif";function a(g,s){if(g&&!s[g]&&!m[g])throw Error("Unknown keyword `"+g+"`");return g}function r(g){for(var s={},b=0;b<g.length;b++)s[g[b]]=1;return s}ie.exports=function(s){if((s=_(s,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return s.system&&a(s.system,E),s.system;if(a(s.style,c),a(s.variant,n),a(s.weight,e),a(s.stretch,d),null==s.size&&(s.size=i_size),"number"==typeof s.size&&(s.size+="px"),!k)throw Error("Bad size value `"+s.size+"`");s.family||(s.family=i_family),Array.isArray(s.family)&&(s.family.length||(s.family=[i_family]),s.family=s.family.map(function(x){return t[x]?x:'"'+x+'"'}).join(", "));var b=[];return b.push(s.style),s.variant!==s.style&&b.push(s.variant),s.weight!==s.variant&&s.weight!==s.style&&b.push(s.weight),s.stretch!==s.weight&&s.stretch!==s.variant&&s.stretch!==s.style&&b.push(s.stretch),b.push(s.size+(null==s.lineHeight||"normal"===s.lineHeight||s.lineHeight+""=="1"?"":"/"+s.lineHeight)),b.push(s.family),b.filter(Boolean).join(" ")}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(v,ie,ae){ie.exports=["inherit","initial","unset"]},{}],104:[function(v,ie,ae){ie.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(v,ie,ae){"use strict";var i,_=v("type/value/is"),k=v("type/value/ensure"),m=v("type/plain-function/ensure"),E=v("es5-ext/object/copy"),e=v("es5-ext/object/normalize-options"),c=v("es5-ext/object/map"),d=Function.prototype.bind,n=Object.defineProperty,t=Object.prototype.hasOwnProperty;i=function(a,r,g){var b,s=k(r)&&m(r.value);return delete(b=E(r)).writable,delete b.value,b.get=function(){return!g.overwriteDefinition&&t.call(this,a)?s:(r.value=d.call(s,g.resolveContext?g.resolveContext(this):this),n(this,a,r),this[a])},b},ie.exports=function(a){var r=e(arguments[1]);return _(r.resolveContext)&&m(r.resolveContext),c(a,function(g,s){return i(s,g,r)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":321,"type/value/ensure":325,"type/value/is":326}],106:[function(v,ie,ae){"use strict";var _=v("type/value/is"),k=v("type/plain-function/is"),m=v("es5-ext/object/assign"),E=v("es5-ext/object/normalize-options"),e=v("es5-ext/string/#/contains"),c=ie.exports=function(d,n){var t,i,a,r,g;return arguments.length<2||"string"!=typeof d?(r=n,n=d,d=null):r=arguments[2],_(d)?(t=e.call(d,"c"),i=e.call(d,"e"),a=e.call(d,"w")):(t=a=!0,i=!1),g={value:n,configurable:t,enumerable:i,writable:a},r?m(E(r),g):g};c.gs=function(d,n,t){var i,a,r,g;return"string"!=typeof d?(r=t,t=n,n=d,d=null):r=arguments[3],_(n)?k(n)?_(t)?k(t)||(r=t,t=void 0):t=void 0:(r=n,n=t=void 0):n=void 0,_(d)?(i=e.call(d,"c"),a=e.call(d,"e")):(i=!0,a=!1),g={get:n,set:t,configurable:i,enumerable:a},r?m(E(r),g):g}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":322,"type/value/is":326}],107:[function(v,ie,ae){var k;k=function(_){"use strict";function k(V,H){return V<H?-1:V>H?1:V>=H?0:NaN}function m(V){return 1===V.length&&(V=function E(V){return function(H,q){return k(V(H),q)}}(V)),{left:function(H,q,K,Y){for(null==K&&(K=0),null==Y&&(Y=H.length);K<Y;){var te=K+Y>>>1;V(H[te],q)<0?K=te+1:Y=te}return K},right:function(H,q,K,Y){for(null==K&&(K=0),null==Y&&(Y=H.length);K<Y;){var te=K+Y>>>1;V(H[te],q)>0?Y=te:K=te+1}return K}}}var e=m(k),c=e.right,d=e.left;function t(V,H){return[V,H]}function r(V){return null===V?NaN:+V}function g(V,H){var J,j,q=V.length,K=0,Y=-1,te=0,re=0;if(null==H)for(;++Y<q;)isNaN(J=r(V[Y]))||(re+=(j=J-te)*(J-(te+=j/++K)));else for(;++Y<q;)isNaN(J=r(H(V[Y],Y,V)))||(re+=(j=J-te)*(J-(te+=j/++K)));if(K>1)return re/(K-1)}function s(V,H){var q=g(V,H);return q&&Math.sqrt(q)}function b(V,H){var Y,te,J,q=V.length,K=-1;if(null==H){for(;++K<q;)if(null!=(Y=V[K])&&Y>=Y)for(te=J=Y;++K<q;)null!=(Y=V[K])&&(te>Y&&(te=Y),J<Y&&(J=Y))}else for(;++K<q;)if(null!=(Y=H(V[K],K,V))&&Y>=Y)for(te=J=Y;++K<q;)null!=(Y=H(V[K],K,V))&&(te>Y&&(te=Y),J<Y&&(J=Y));return[te,J]}var x=Array.prototype,S=x.slice,p=x.map;function w(V){return function(){return V}}function l(V){return V}function y(V,H,q){V=+V,H=+H,q=(Y=arguments.length)<2?(H=V,V=0,1):Y<3?1:+q;for(var K=-1,Y=0|Math.max(0,Math.ceil((H-V)/q)),te=new Array(Y);++K<Y;)te[K]=V+K*q;return te}var A=Math.sqrt(50),T=Math.sqrt(10),M=Math.sqrt(2);function u(V,H,q){var K=(H-V)/Math.max(0,q),Y=Math.floor(Math.log(K)/Math.LN10),te=K/Math.pow(10,Y);return Y>=0?(te>=A?10:te>=T?5:te>=M?2:1)*Math.pow(10,Y):-Math.pow(10,-Y)/(te>=A?10:te>=T?5:te>=M?2:1)}function h(V,H,q){var K=Math.abs(H-V)/Math.max(0,q),Y=Math.pow(10,Math.floor(Math.log(K)/Math.LN10)),te=K/Y;return te>=A?Y*=10:te>=T?Y*=5:te>=M&&(Y*=2),H<V?-Y:Y}function o(V){return Math.ceil(Math.log(V.length)/Math.LN2)+1}function R(V,H,q){if(null==q&&(q=r),K=V.length){if((H=+H)<=0||K<2)return+q(V[0],0,V);if(H>=1)return+q(V[K-1],K-1,V);var K,Y=(K-1)*H,te=Math.floor(Y),J=+q(V[te],te,V);return J+(+q(V[te+1],te+1,V)-J)*(Y-te)}}function U(V,H){var Y,te,q=V.length,K=-1;if(null==H){for(;++K<q;)if(null!=(Y=V[K])&&Y>=Y)for(te=Y;++K<q;)null!=(Y=V[K])&&te>Y&&(te=Y)}else for(;++K<q;)if(null!=(Y=H(V[K],K,V))&&Y>=Y)for(te=Y;++K<q;)null!=(Y=H(V[K],K,V))&&te>Y&&(te=Y);return te}function W(V){if(!(te=V.length))return[];for(var H=-1,q=U(V,G),K=new Array(q);++H<q;)for(var te,Y=-1,J=K[H]=new Array(te);++Y<te;)J[Y]=V[Y][H];return K}function G(V){return V.length}_.bisect=c,_.bisectRight=c,_.bisectLeft=d,_.ascending=k,_.bisector=m,_.cross=function i(V,H,q){var J,j,re,le,K=V.length,Y=H.length,te=new Array(K*Y);for(null==q&&(q=t),J=re=0;J<K;++J)for(le=V[J],j=0;j<Y;++j,++re)te[re]=q(le,H[j]);return te},_.descending=function a(V,H){return H<V?-1:H>V?1:H>=V?0:NaN},_.deviation=s,_.extent=b,_.histogram=function C(){var V=l,H=b,q=o;function K(Y){var te,j,J=Y.length,re=new Array(J);for(te=0;te<J;++te)re[te]=V(Y[te],te,Y);var le=H(re),ge=le[0],pe=le[1],xe=q(re,ge,pe);Array.isArray(xe)||(xe=h(ge,pe,xe),xe=y(Math.ceil(ge/xe)*xe,pe,xe));for(var ke=xe.length;xe[0]<=ge;)xe.shift(),--ke;for(;xe[ke-1]>pe;)xe.pop(),--ke;var de,we=new Array(ke+1);for(te=0;te<=ke;++te)(de=we[te]=[]).x0=te>0?xe[te-1]:ge,de.x1=te<ke?xe[te]:pe;for(te=0;te<J;++te)ge<=(j=re[te])&&j<=pe&&we[c(xe,j,0,ke)].push(Y[te]);return we}return K.value=function(Y){return arguments.length?(V="function"==typeof Y?Y:w(Y),K):V},K.domain=function(Y){return arguments.length?(H="function"==typeof Y?Y:w([Y[0],Y[1]]),K):H},K.thresholds=function(Y){return arguments.length?(q="function"==typeof Y?Y:Array.isArray(Y)?w(S.call(Y)):w(Y),K):q},K},_.thresholdFreedmanDiaconis=function z(V,H,q){return V=p.call(V,r).sort(k),Math.ceil((q-H)/(2*(R(V,.75)-R(V,.25))*Math.pow(V.length,-1/3)))},_.thresholdScott=function O(V,H,q){return Math.ceil((q-H)/(3.5*s(V)*Math.pow(V.length,-1/3)))},_.thresholdSturges=o,_.max=function I(V,H){var Y,te,q=V.length,K=-1;if(null==H){for(;++K<q;)if(null!=(Y=V[K])&&Y>=Y)for(te=Y;++K<q;)null!=(Y=V[K])&&Y>te&&(te=Y)}else for(;++K<q;)if(null!=(Y=H(V[K],K,V))&&Y>=Y)for(te=Y;++K<q;)null!=(Y=H(V[K],K,V))&&Y>te&&(te=Y);return te},_.mean=function F(V,H){var te,q=V.length,K=q,Y=-1,J=0;if(null==H)for(;++Y<q;)isNaN(te=r(V[Y]))?--K:J+=te;else for(;++Y<q;)isNaN(te=r(H(V[Y],Y,V)))?--K:J+=te;if(K)return J/K},_.median=function D(V,H){var Y,q=V.length,K=-1,te=[];if(null==H)for(;++K<q;)isNaN(Y=r(V[K]))||te.push(Y);else for(;++K<q;)isNaN(Y=r(H(V[K],K,V)))||te.push(Y);return R(te.sort(k),.5)},_.merge=function N(V){for(var q,te,J,H=V.length,K=-1,Y=0;++K<H;)Y+=V[K].length;for(te=new Array(Y);--H>=0;)for(q=(J=V[H]).length;--q>=0;)te[--Y]=J[q];return te},_.min=U,_.pairs=function n(V,H){null==H&&(H=t);for(var q=0,K=V.length-1,Y=V[0],te=new Array(K<0?0:K);q<K;)te[q]=H(Y,Y=V[++q]);return te},_.permute=function X(V,H){for(var q=H.length,K=new Array(q);q--;)K[q]=V[H[q]];return K},_.quantile=R,_.range=y,_.scan=function oe(V,H){if(q=V.length){var q,te,K=0,Y=0,J=V[Y];for(null==H&&(H=k);++K<q;)(H(te=V[K],J)<0||0!==H(J,J))&&(J=te,Y=K);if(0===H(J,J))return Y}},_.shuffle=function se(V,H,q){for(var Y,te,K=(null==q?V.length:q)-(H=null==H?0:+H);K;)te=Math.random()*K--|0,Y=V[K+H],V[K+H]=V[te+H],V[te+H]=Y;return V},_.sum=function ne(V,H){var Y,q=V.length,K=-1,te=0;if(null==H)for(;++K<q;)(Y=+V[K])&&(te+=Y);else for(;++K<q;)(Y=+H(V[K],K,V))&&(te+=Y);return te},_.ticks=function f(V,H,q){var K,te,J,j,Y=-1;if(q=+q,(V=+V)==(H=+H)&&q>0)return[V];if((K=H<V)&&(te=V,V=H,H=te),0===(j=u(V,H,q))||!isFinite(j))return[];if(j>0)for(V=Math.ceil(V/j),H=Math.floor(H/j),J=new Array(te=Math.ceil(H-V+1));++Y<te;)J[Y]=(V+Y)*j;else for(V=Math.floor(V*j),H=Math.ceil(H*j),J=new Array(te=Math.ceil(V-H+1));++Y<te;)J[Y]=(V-Y)/j;return K&&J.reverse(),J},_.tickIncrement=u,_.tickStep=h,_.transpose=W,_.variance=g,_.zip=function $(){return W(arguments)},Object.defineProperty(_,"__esModule",{value:!0})},k("object"==typeof ae&&void 0!==ie?ae:this.d3=this.d3||{})},{}],108:[function(v,ie,ae){var k;k=function(_){"use strict";var k="$";function m(){}function E(x,S){var p=new m;if(x instanceof m)x.each(function(T,M){p.set(M,T)});else if(Array.isArray(x)){var y,w=-1,l=x.length;if(null==S)for(;++w<l;)p.set(w,x[w]);else for(;++w<l;)p.set(S(y=x[w],w,x),y)}else if(x)for(var A in x)p.set(A,x[A]);return p}function c(){return{}}function d(x,S,p){x[S]=p}function n(){return E()}function t(x,S,p){x.set(S,p)}function i(){}m.prototype=E.prototype={constructor:m,has:function(x){return k+x in this},get:function(x){return this[k+x]},set:function(x,S){return this[k+x]=S,this},remove:function(x){var S=k+x;return S in this&&delete this[S]},clear:function(){for(var x in this)x[0]===k&&delete this[x]},keys:function(){var x=[];for(var S in this)S[0]===k&&x.push(S.slice(1));return x},values:function(){var x=[];for(var S in this)S[0]===k&&x.push(this[S]);return x},entries:function(){var x=[];for(var S in this)S[0]===k&&x.push({key:S.slice(1),value:this[S]});return x},size:function(){var x=0;for(var S in this)S[0]===k&&++x;return x},empty:function(){for(var x in this)if(x[0]===k)return!1;return!0},each:function(x){for(var S in this)S[0]===k&&x(this[S],S.slice(1),this)}};var a=E.prototype;function r(x,S){var p=new i;if(x instanceof i)x.each(function(y){p.add(y)});else if(x){var w=-1,l=x.length;if(null==S)for(;++w<l;)p.add(x[w]);else for(;++w<l;)p.add(S(x[w],w,x))}return p}i.prototype=r.prototype={constructor:i,has:a.has,add:function(x){return this[k+(x+="")]=x,this},remove:a.remove,clear:a.clear,values:a.keys,size:a.size,empty:a.empty,each:a.each},_.nest=function e(){var p,w,l,x=[],S=[];function y(T,M,f,u){if(M>=x.length)return null!=p&&T.sort(p),null!=w?w(T):T;for(var R,z,I,h=-1,o=T.length,C=x[M++],O=E(),F=f();++h<o;)(I=O.get(R=C(z=T[h])+""))?I.push(z):O.set(R,[z]);return O.each(function(D,N){u(F,N,y(D,M,f,u))}),F}function A(T,M){if(++M>x.length)return T;var f,u=S[M-1];return null!=w&&M>=x.length?f=T.entries():(f=[],T.each(function(h,o){f.push({key:o,values:A(h,M)})})),null!=u?f.sort(function(h,o){return u(h.key,o.key)}):f}return l={object:function(T){return y(T,0,c,d)},map:function(T){return y(T,0,n,t)},entries:function(T){return A(y(T,0,n,t),0)},key:function(T){return x.push(T),l},sortKeys:function(T){return S[x.length-1]=T,l},sortValues:function(T){return p=T,l},rollup:function(T){return w=T,l}}},_.set=r,_.map=E,_.keys=function g(x){var S=[];for(var p in x)S.push(p);return S},_.values=function s(x){var S=[];for(var p in x)S.push(x[p]);return S},_.entries=function b(x){var S=[];for(var p in x)S.push({key:p,value:x[p]});return S},Object.defineProperty(_,"__esModule",{value:!0})},k("object"==typeof ae&&void 0!==ie?ae:this.d3=this.d3||{})},{}],109:[function(v,ie,ae){var _,k;_=this,k=function(_){"use strict";function k(Be,Ie,nt){Be.prototype=Ie.prototype=nt,nt.constructor=Be}function m(Be,Ie){var nt=Object.create(Be.prototype);for(var gt in Ie)nt[gt]=Ie[gt];return nt}function E(){}var e=.7,c=1/e,d="\\s*([+-]?\\d+)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",i=/^#([0-9a-f]{3,8})$/,a=new RegExp("^rgb\\("+[d,d,d]+"\\)$"),r=new RegExp("^rgb\\("+[t,t,t]+"\\)$"),g=new RegExp("^rgba\\("+[d,d,d,n]+"\\)$"),s=new RegExp("^rgba\\("+[t,t,t,n]+"\\)$"),b=new RegExp("^hsl\\("+[n,t,t]+"\\)$"),x=new RegExp("^hsla\\("+[n,t,t,n]+"\\)$"),S={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function p(){return this.rgb().formatHex()}function l(){return this.rgb().formatRgb()}function y(Be){var Ie,nt;return Be=(Be+"").trim().toLowerCase(),(Ie=i.exec(Be))?(nt=Ie[1].length,Ie=parseInt(Ie[1],16),6===nt?A(Ie):3===nt?new u(Ie>>8&15|Ie>>4&240,Ie>>4&15|240&Ie,(15&Ie)<<4|15&Ie,1):8===nt?T(Ie>>24&255,Ie>>16&255,Ie>>8&255,(255&Ie)/255):4===nt?T(Ie>>12&15|Ie>>8&240,Ie>>8&15|Ie>>4&240,Ie>>4&15|240&Ie,((15&Ie)<<4|15&Ie)/255):null):(Ie=a.exec(Be))?new u(Ie[1],Ie[2],Ie[3],1):(Ie=r.exec(Be))?new u(255*Ie[1]/100,255*Ie[2]/100,255*Ie[3]/100,1):(Ie=g.exec(Be))?T(Ie[1],Ie[2],Ie[3],Ie[4]):(Ie=s.exec(Be))?T(255*Ie[1]/100,255*Ie[2]/100,255*Ie[3]/100,Ie[4]):(Ie=b.exec(Be))?R(Ie[1],Ie[2]/100,Ie[3]/100,1):(Ie=x.exec(Be))?R(Ie[1],Ie[2]/100,Ie[3]/100,Ie[4]):S.hasOwnProperty(Be)?A(S[Be]):"transparent"===Be?new u(NaN,NaN,NaN,0):null}function A(Be){return new u(Be>>16&255,Be>>8&255,255&Be,1)}function T(Be,Ie,nt,gt){return gt<=0&&(Be=Ie=nt=NaN),new u(Be,Ie,nt,gt)}function M(Be){return Be instanceof E||(Be=y(Be)),Be?new u((Be=Be.rgb()).r,Be.g,Be.b,Be.opacity):new u}function f(Be,Ie,nt,gt){return 1===arguments.length?M(Be):new u(Be,Ie,nt,null==gt?1:gt)}function u(Be,Ie,nt,gt){this.r=+Be,this.g=+Ie,this.b=+nt,this.opacity=+gt}function h(){return"#"+C(this.r)+C(this.g)+C(this.b)}function o(){var Be=this.opacity;return(1===(Be=isNaN(Be)?1:Math.max(0,Math.min(1,Be)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===Be?")":", "+Be+")")}function C(Be){return((Be=Math.max(0,Math.min(255,Math.round(Be)||0)))<16?"0":"")+Be.toString(16)}function R(Be,Ie,nt,gt){return gt<=0?Be=Ie=nt=NaN:nt<=0||nt>=1?Be=Ie=NaN:Ie<=0&&(Be=NaN),new I(Be,Ie,nt,gt)}function z(Be){if(Be instanceof I)return new I(Be.h,Be.s,Be.l,Be.opacity);if(Be instanceof E||(Be=y(Be)),!Be)return new I;if(Be instanceof I)return Be;var Ie=(Be=Be.rgb()).r/255,nt=Be.g/255,gt=Be.b/255,Nt=Math.min(Ie,nt,gt),St=Math.max(Ie,nt,gt),Bt=NaN,Zt=St-Nt,Et=(St+Nt)/2;return Zt?(Bt=Ie===St?(nt-gt)/Zt+6*(nt<gt):nt===St?(gt-Ie)/Zt+2:(Ie-nt)/Zt+4,Zt/=Et<.5?St+Nt:2-St-Nt,Bt*=60):Zt=Et>0&&Et<1?0:Bt,new I(Bt,Zt,Et,Be.opacity)}function O(Be,Ie,nt,gt){return 1===arguments.length?z(Be):new I(Be,Ie,nt,null==gt?1:gt)}function I(Be,Ie,nt,gt){this.h=+Be,this.s=+Ie,this.l=+nt,this.opacity=+gt}function F(Be,Ie,nt){return 255*(Be<60?Ie+(nt-Ie)*Be/60:Be<180?nt:Be<240?Ie+(nt-Ie)*(240-Be)/60:Ie)}k(E,y,{copy:function(Be){return Object.assign(new this.constructor,this,Be)},displayable:function(){return this.rgb().displayable()},hex:p,formatHex:p,formatHsl:function w(){return z(this).formatHsl()},formatRgb:l,toString:l}),k(u,f,m(E,{brighter:function(Be){return Be=null==Be?c:Math.pow(c,Be),new u(this.r*Be,this.g*Be,this.b*Be,this.opacity)},darker:function(Be){return Be=null==Be?e:Math.pow(e,Be),new u(this.r*Be,this.g*Be,this.b*Be,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:h,formatHex:h,formatRgb:o,toString:o})),k(I,O,m(E,{brighter:function(Be){return Be=null==Be?c:Math.pow(c,Be),new I(this.h,this.s,this.l*Be,this.opacity)},darker:function(Be){return Be=null==Be?e:Math.pow(e,Be),new I(this.h,this.s,this.l*Be,this.opacity)},rgb:function(){var Be=this.h%360+360*(this.h<0),Ie=isNaN(Be)||isNaN(this.s)?0:this.s,nt=this.l,gt=nt+(nt<.5?nt:1-nt)*Ie,Nt=2*nt-gt;return new u(F(Be>=240?Be-240:Be+120,Nt,gt),F(Be,Nt,gt),F(Be<120?Be+240:Be-120,Nt,gt),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Be=this.opacity;return(1===(Be=isNaN(Be)?1:Math.max(0,Math.min(1,Be)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===Be?")":", "+Be+")")}}));var D=Math.PI/180,N=180/Math.PI,X=.96422,ne=4/29,W=6/29,G=3*W*W;function V(Be){if(Be instanceof K)return new K(Be.l,Be.a,Be.b,Be.opacity);if(Be instanceof pe)return xe(Be);Be instanceof u||(Be=M(Be));var St,Bt,Ie=j(Be.r),nt=j(Be.g),gt=j(Be.b),Nt=Y((.2225045*Ie+.7168786*nt+.0606169*gt)/1);return Ie===nt&&nt===gt?St=Bt=Nt:(St=Y((.4360747*Ie+.3850649*nt+.1430804*gt)/X),Bt=Y((.0139322*Ie+.0971045*nt+.7141733*gt)/.82521)),new K(116*Nt-16,500*(St-Nt),200*(Nt-Bt),Be.opacity)}function q(Be,Ie,nt,gt){return 1===arguments.length?V(Be):new K(Be,Ie,nt,null==gt?1:gt)}function K(Be,Ie,nt,gt){this.l=+Be,this.a=+Ie,this.b=+nt,this.opacity=+gt}function Y(Be){return Be>.008856451679035631?Math.pow(Be,1/3):Be/G+ne}function te(Be){return Be>W?Be*Be*Be:G*(Be-ne)}function J(Be){return 255*(Be<=.0031308?12.92*Be:1.055*Math.pow(Be,1/2.4)-.055)}function j(Be){return(Be/=255)<=.04045?Be/12.92:Math.pow((Be+.055)/1.055,2.4)}function re(Be){if(Be instanceof pe)return new pe(Be.h,Be.c,Be.l,Be.opacity);if(Be instanceof K||(Be=V(Be)),0===Be.a&&0===Be.b)return new pe(NaN,0<Be.l&&Be.l<100?0:NaN,Be.l,Be.opacity);var Ie=Math.atan2(Be.b,Be.a)*N;return new pe(Ie<0?Ie+360:Ie,Math.sqrt(Be.a*Be.a+Be.b*Be.b),Be.l,Be.opacity)}function ge(Be,Ie,nt,gt){return 1===arguments.length?re(Be):new pe(Be,Ie,nt,null==gt?1:gt)}function pe(Be,Ie,nt,gt){this.h=+Be,this.c=+Ie,this.l=+nt,this.opacity=+gt}function xe(Be){if(isNaN(Be.h))return new K(Be.l,0,0,Be.opacity);var Ie=Be.h*D;return new K(Be.l,Math.cos(Ie)*Be.c,Math.sin(Ie)*Be.c,Be.opacity)}k(K,q,m(E,{brighter:function(Be){return new K(this.l+18*(null==Be?1:Be),this.a,this.b,this.opacity)},darker:function(Be){return new K(this.l-18*(null==Be?1:Be),this.a,this.b,this.opacity)},rgb:function(){var Be=(this.l+16)/116,Ie=isNaN(this.a)?Be:Be+this.a/500,nt=isNaN(this.b)?Be:Be-this.b/200;return new u(J(3.1338561*(Ie=X*te(Ie))-1.6168667*(Be=1*te(Be))-.4906146*(nt=.82521*te(nt))),J(-.9787684*Ie+1.9161415*Be+.033454*nt),J(.0719453*Ie-.2289914*Be+1.4052427*nt),this.opacity)}})),k(pe,ge,m(E,{brighter:function(Be){return new pe(this.h,this.c,this.l+18*(null==Be?1:Be),this.opacity)},darker:function(Be){return new pe(this.h,this.c,this.l-18*(null==Be?1:Be),this.opacity)},rgb:function(){return xe(this).rgb()}}));var we=1.78277,de=-.29227,be=-.90649,Le=1.97294,De=Le*be,ye=Le*we,Ce=we*de- -.14861*be;function Fe(Be){if(Be instanceof Ue)return new Ue(Be.h,Be.s,Be.l,Be.opacity);Be instanceof u||(Be=M(Be));var nt=Be.g/255,gt=Be.b/255,Nt=(Ce*gt+De*(Be.r/255)-ye*nt)/(Ce+De-ye),St=gt-Nt,Bt=(Le*(nt-Nt)-de*St)/be,Zt=Math.sqrt(Bt*Bt+St*St)/(Le*Nt*(1-Nt)),Et=Zt?Math.atan2(Bt,St)*N-120:NaN;return new Ue(Et<0?Et+360:Et,Zt,Nt,Be.opacity)}function Ke(Be,Ie,nt,gt){return 1===arguments.length?Fe(Be):new Ue(Be,Ie,nt,null==gt?1:gt)}function Ue(Be,Ie,nt,gt){this.h=+Be,this.s=+Ie,this.l=+nt,this.opacity=+gt}k(Ue,Ke,m(E,{brighter:function(Be){return Be=null==Be?c:Math.pow(c,Be),new Ue(this.h,this.s,this.l*Be,this.opacity)},darker:function(Be){return Be=null==Be?e:Math.pow(e,Be),new Ue(this.h,this.s,this.l*Be,this.opacity)},rgb:function(){var Be=isNaN(this.h)?0:(this.h+120)*D,Ie=+this.l,nt=isNaN(this.s)?0:this.s*Ie*(1-Ie),gt=Math.cos(Be),Nt=Math.sin(Be);return new u(255*(Ie+nt*(-.14861*gt+we*Nt)),255*(Ie+nt*(de*gt+be*Nt)),255*(Ie+nt*(Le*gt)),this.opacity)}})),_.color=y,_.cubehelix=Ke,_.gray=function H(Be,Ie){return new K(Be,0,0,null==Ie?1:Ie)},_.hcl=ge,_.hsl=O,_.lab=q,_.lch=function le(Be,Ie,nt,gt){return 1===arguments.length?re(Be):new pe(nt,Ie,Be,null==gt?1:gt)},_.rgb=f,Object.defineProperty(_,"__esModule",{value:!0})},k("object"==typeof ae&&void 0!==ie?ae:(_=_||self).d3=_.d3||{})},{}],110:[function(v,ie,ae){var _,k;_=this,k=function(_){"use strict";var k={value:function(){}};function m(){for(var a,n=0,t=arguments.length,i={};n<t;++n){if(!(a=arguments[n]+"")||a in i||/[\s.]/.test(a))throw new Error("illegal type: "+a);i[a]=[]}return new E(i)}function E(n){this._=n}function e(n,t){return n.trim().split(/^|\s+/).map(function(i){var a="",r=i.indexOf(".");if(r>=0&&(a=i.slice(r+1),i=i.slice(0,r)),i&&!t.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:a}})}function c(n,t){for(var r,i=0,a=n.length;i<a;++i)if((r=n[i]).name===t)return r.value}function d(n,t,i){for(var a=0,r=n.length;a<r;++a)if(n[a].name===t){n[a]=k,n=n.slice(0,a).concat(n.slice(a+1));break}return null!=i&&n.push({name:t,value:i}),n}E.prototype=m.prototype={constructor:E,on:function(n,t){var r,i=this._,a=e(n+"",i),g=-1,s=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++g<s;)if(r=(n=a[g]).type)i[r]=d(i[r],n.name,t);else if(null==t)for(r in i)i[r]=d(i[r],n.name,null);return this}for(;++g<s;)if((r=(n=a[g]).type)&&(r=c(i[r],n.name)))return r},copy:function(){var n={},t=this._;for(var i in t)n[i]=t[i].slice();return new E(n)},call:function(n,t){if((r=arguments.length-2)>0)for(var r,g,i=new Array(r),a=0;a<r;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(a=0,r=(g=this._[n]).length;a<r;++a)g[a].value.apply(t,i)},apply:function(n,t,i){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var a=this._[n],r=0,g=a.length;r<g;++r)a[r].value.apply(t,i)}},_.dispatch=m,Object.defineProperty(_,"__esModule",{value:!0})},k("object"==typeof ae&&void 0!==ie?ae:(_=_||self).d3=_.d3||{})},{}],111:[function(v,ie,ae){var _,k;_=this,k=function(_,k,m,E,e){"use strict";function d(M){return function(){return M}}function n(){return 1e-6*(Math.random()-.5)}function t(M){return M.x+M.vx}function i(M){return M.y+M.vy}function r(M){return M.index}function g(M,f){var u=M.get(f);if(!u)throw new Error("missing: "+f);return u}function b(M){return M.x}function x(M){return M.y}var p=Math.PI*(3-Math.sqrt(5));_.forceCenter=function c(M,f){var u;function h(){var o,R,C=u.length,z=0,O=0;for(o=0;o<C;++o)z+=(R=u[o]).x,O+=R.y;for(z=z/C-M,O=O/C-f,o=0;o<C;++o)(R=u[o]).x-=z,R.y-=O}return null==M&&(M=0),null==f&&(f=0),h.initialize=function(o){u=o},h.x=function(o){return arguments.length?(M=+o,h):M},h.y=function(o){return arguments.length?(f=+o,h):f},h},_.forceCollide=function a(M){var f,u,h=1,o=1;function C(){for(var O,F,D,N,U,X,oe,I=f.length,se=0;se<o;++se)for(F=k.quadtree(f,t,i).visitAfter(R),O=0;O<I;++O)oe=(X=u[(D=f[O]).index])*X,N=D.x+D.vx,U=D.y+D.vy,F.visit(ne);function ne(W,G,$,V,H){var q=W.data,K=W.r,Y=X+K;if(!q)return G>N+Y||V<N-Y||$>U+Y||H<U-Y;if(q.index>D.index){var te=N-q.x-q.vx,J=U-q.y-q.vy,j=te*te+J*J;j<Y*Y&&(0===te&&(j+=(te=n())*te),0===J&&(j+=(J=n())*J),j=(Y-(j=Math.sqrt(j)))/j*h,D.vx+=(te*=j)*(Y=(K*=K)/(oe+K)),D.vy+=(J*=j)*Y,q.vx-=te*(Y=1-Y),q.vy-=J*Y)}}}function R(O){if(O.data)return O.r=u[O.data.index];for(var I=O.r=0;I<4;++I)O[I]&&O[I].r>O.r&&(O.r=O[I].r)}function z(){if(f){var O,F,I=f.length;for(u=new Array(I),O=0;O<I;++O)u[(F=f[O]).index]=+M(F,O,f)}}return"function"!=typeof M&&(M=d(null==M?1:+M)),C.initialize=function(O){f=O,z()},C.iterations=function(O){return arguments.length?(o=+O,C):o},C.strength=function(O){return arguments.length?(h=+O,C):h},C.radius=function(O){return arguments.length?(M="function"==typeof O?O:d(+O),z(),C):M},C},_.forceLink=function s(M){var h,C,R,z,O,f=r,u=function F(oe){return 1/Math.min(z[oe.source.index],z[oe.target.index])},o=d(30),I=1;function D(oe){for(var se=0,ne=M.length;se<I;++se)for(var G,$,V,H,q,K,Y,W=0;W<ne;++W)H=(V=(G=M[W]).target).x+V.vx-($=G.source).x-$.vx||n(),q=V.y+V.vy-$.y-$.vy||n(),q*=K=((K=Math.sqrt(H*H+q*q))-C[W])/K*oe*h[W],V.vx-=(H*=K)*(Y=O[W]),V.vy-=q*Y,$.vx+=H*(Y=1-Y),$.vy+=q*Y}function N(){if(R){var oe,G,se=R.length,ne=M.length,W=m.map(R,f);for(oe=0,z=new Array(se);oe<ne;++oe)(G=M[oe]).index=oe,"object"!=typeof G.source&&(G.source=g(W,G.source)),"object"!=typeof G.target&&(G.target=g(W,G.target)),z[G.source.index]=(z[G.source.index]||0)+1,z[G.target.index]=(z[G.target.index]||0)+1;for(oe=0,O=new Array(ne);oe<ne;++oe)O[oe]=z[(G=M[oe]).source.index]/(z[G.source.index]+z[G.target.index]);h=new Array(ne),U(),C=new Array(ne),X()}}function U(){if(R)for(var oe=0,se=M.length;oe<se;++oe)h[oe]=+u(M[oe],oe,M)}function X(){if(R)for(var oe=0,se=M.length;oe<se;++oe)C[oe]=+o(M[oe],oe,M)}return null==M&&(M=[]),D.initialize=function(oe){R=oe,N()},D.links=function(oe){return arguments.length?(M=oe,N(),D):M},D.id=function(oe){return arguments.length?(f=oe,D):f},D.iterations=function(oe){return arguments.length?(I=+oe,D):I},D.strength=function(oe){return arguments.length?(u="function"==typeof oe?oe:d(+oe),U(),D):u},D.distance=function(oe){return arguments.length?(o="function"==typeof oe?oe:d(+oe),X(),D):o},D},_.forceManyBody=function l(){var M,f,u,o,h=d(-30),C=1,R=1/0,z=.81;function O(N){var U,X=M.length,oe=k.quadtree(M,b,x).visitAfter(F);for(u=N,U=0;U<X;++U)f=M[U],oe.visit(D)}function I(){if(M){var N,X,U=M.length;for(o=new Array(U),N=0;N<U;++N)o[(X=M[N]).index]=+h(X,N,M)}}function F(N){var X,oe,ne,W,G,U=0,se=0;if(N.length){for(ne=W=G=0;G<4;++G)(X=N[G])&&(oe=Math.abs(X.value))&&(U+=X.value,se+=oe,ne+=oe*X.x,W+=oe*X.y);N.x=ne/se,N.y=W/se}else{(X=N).x=X.data.x,X.y=X.data.y;do{U+=o[X.data.index]}while(X=X.next)}N.value=U}function D(N,U,X,oe){if(!N.value)return!0;var se=N.x-f.x,ne=N.y-f.y,W=oe-U,G=se*se+ne*ne;if(W*W/z<G)return G<R&&(0===se&&(G+=(se=n())*se),0===ne&&(G+=(ne=n())*ne),G<C&&(G=Math.sqrt(C*G)),f.vx+=se*N.value*u/G,f.vy+=ne*N.value*u/G),!0;if(!(N.length||G>=R)){(N.data!==f||N.next)&&(0===se&&(G+=(se=n())*se),0===ne&&(G+=(ne=n())*ne),G<C&&(G=Math.sqrt(C*G)));do{N.data!==f&&(f.vx+=se*(W=o[N.data.index]*u/G),f.vy+=ne*W)}while(N=N.next)}}return O.initialize=function(N){M=N,I()},O.strength=function(N){return arguments.length?(h="function"==typeof N?N:d(+N),I(),O):h},O.distanceMin=function(N){return arguments.length?(C=N*N,O):Math.sqrt(C)},O.distanceMax=function(N){return arguments.length?(R=N*N,O):Math.sqrt(R)},O.theta=function(N){return arguments.length?(z=N*N,O):Math.sqrt(z)},O},_.forceRadial=function y(M,f,u){var h,C,R,o=d(.1);function z(I){for(var F=0,D=h.length;F<D;++F){var N=h[F],U=N.x-f||1e-6,X=N.y-u||1e-6,oe=Math.sqrt(U*U+X*X),se=(R[F]-oe)*C[F]*I/oe;N.vx+=U*se,N.vy+=X*se}}function O(){if(h){var I,F=h.length;for(C=new Array(F),R=new Array(F),I=0;I<F;++I)R[I]=+M(h[I],I,h),C[I]=isNaN(R[I])?0:+o(h[I],I,h)}}return"function"!=typeof M&&(M=d(+M)),null==f&&(f=0),null==u&&(u=0),z.initialize=function(I){h=I,O()},z.strength=function(I){return arguments.length?(o="function"==typeof I?I:d(+I),O(),z):o},z.radius=function(I){return arguments.length?(M="function"==typeof I?I:d(+I),O(),z):M},z.x=function(I){return arguments.length?(f=+I,z):f},z.y=function(I){return arguments.length?(u=+I,z):u},z},_.forceSimulation=function w(M){var f,u=1,h=.001,o=1-Math.pow(h,1/300),C=0,R=.6,z=m.map(),O=e.timer(F),I=E.dispatch("tick","end");function F(){D(),I.call("tick",f),u<h&&(O.stop(),I.call("end",f))}function D(X){var oe,ne,se=M.length;void 0===X&&(X=1);for(var W=0;W<X;++W)for(u+=(C-u)*o,z.each(function(G){G(u)}),oe=0;oe<se;++oe)null==(ne=M[oe]).fx?ne.x+=ne.vx*=R:(ne.x=ne.fx,ne.vx=0),null==ne.fy?ne.y+=ne.vy*=R:(ne.y=ne.fy,ne.vy=0);return f}function N(){for(var se,X=0,oe=M.length;X<oe;++X){if((se=M[X]).index=X,null!=se.fx&&(se.x=se.fx),null!=se.fy&&(se.y=se.fy),isNaN(se.x)||isNaN(se.y)){var ne=10*Math.sqrt(X),W=X*p;se.x=ne*Math.cos(W),se.y=ne*Math.sin(W)}(isNaN(se.vx)||isNaN(se.vy))&&(se.vx=se.vy=0)}}function U(X){return X.initialize&&X.initialize(M),X}return null==M&&(M=[]),N(),f={tick:D,restart:function(){return O.restart(F),f},stop:function(){return O.stop(),f},nodes:function(X){return arguments.length?(M=X,N(),z.each(U),f):M},alpha:function(X){return arguments.length?(u=+X,f):u},alphaMin:function(X){return arguments.length?(h=+X,f):h},alphaDecay:function(X){return arguments.length?(o=+X,f):+o},alphaTarget:function(X){return arguments.length?(C=+X,f):C},velocityDecay:function(X){return arguments.length?(R=1-X,f):1-R},force:function(X,oe){return arguments.length>1?(null==oe?z.remove(X):z.set(X,U(oe)),f):z.get(X)},find:function(X,oe,se){var G,$,V,H,q,ne=0,W=M.length;for(null==se?se=1/0:se*=se,ne=0;ne<W;++ne)(V=(G=X-(H=M[ne]).x)*G+($=oe-H.y)*$)<se&&(q=H,se=V);return q},on:function(X,oe){return arguments.length>1?(I.on(X,oe),f):I.on(X)}}},_.forceX=function A(M){var u,h,o,f=d(.1);function C(z){for(var F,O=0,I=u.length;O<I;++O)(F=u[O]).vx+=(o[O]-F.x)*h[O]*z}function R(){if(u){var z,O=u.length;for(h=new Array(O),o=new Array(O),z=0;z<O;++z)h[z]=isNaN(o[z]=+M(u[z],z,u))?0:+f(u[z],z,u)}}return"function"!=typeof M&&(M=d(null==M?0:+M)),C.initialize=function(z){u=z,R()},C.strength=function(z){return arguments.length?(f="function"==typeof z?z:d(+z),R(),C):f},C.x=function(z){return arguments.length?(M="function"==typeof z?z:d(+z),R(),C):M},C},_.forceY=function T(M){var u,h,o,f=d(.1);function C(z){for(var F,O=0,I=u.length;O<I;++O)(F=u[O]).vy+=(o[O]-F.y)*h[O]*z}function R(){if(u){var z,O=u.length;for(h=new Array(O),o=new Array(O),z=0;z<O;++z)h[z]=isNaN(o[z]=+M(u[z],z,u))?0:+f(u[z],z,u)}}return"function"!=typeof M&&(M=d(null==M?0:+M)),C.initialize=function(z){u=z,R()},C.strength=function(z){return arguments.length?(f="function"==typeof z?z:d(+z),R(),C):f},C.y=function(z){return arguments.length?(M="function"==typeof z?z:d(+z),R(),C):M},C},Object.defineProperty(_,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==ie?k(ae,v("d3-quadtree"),v("d3-collection"),v("d3-dispatch"),v("d3-timer")):k(_.d3=_.d3||{},_.d3,_.d3,_.d3,_.d3)},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(v,ie,ae){var _,k;_=this,k=function(_){"use strict";function m(M,f){if((u=(M=f?M.toExponential(f-1):M.toExponential()).indexOf("e"))<0)return null;var u,h=M.slice(0,u);return[h.length>1?h[0]+h.slice(2):h,+M.slice(u+1)]}function E(M){return(M=m(Math.abs(M)))?M[1]:NaN}var a,d=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function n(M){if(!(f=d.exec(M)))throw new Error("invalid format: "+M);var f;return new t({fill:f[1],align:f[2],sign:f[3],symbol:f[4],zero:f[5],width:f[6],comma:f[7],precision:f[8]&&f[8].slice(1),trim:f[9],type:f[10]})}function t(M){this.fill=void 0===M.fill?" ":M.fill+"",this.align=void 0===M.align?">":M.align+"",this.sign=void 0===M.sign?"-":M.sign+"",this.symbol=void 0===M.symbol?"":M.symbol+"",this.zero=!!M.zero,this.width=void 0===M.width?void 0:+M.width,this.comma=!!M.comma,this.precision=void 0===M.precision?void 0:+M.precision,this.trim=!!M.trim,this.type=void 0===M.type?"":M.type+""}function g(M,f){var u=m(M,f);if(!u)return M+"";var h=u[0],o=u[1];return o<0?"0."+new Array(-o).join("0")+h:h.length>o+1?h.slice(0,o+1)+"."+h.slice(o+1):h+new Array(o-h.length+2).join("0")}n.prototype=t.prototype,t.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s={"%":function(M,f){return(100*M).toFixed(f)},b:function(M){return Math.round(M).toString(2)},c:function(M){return M+""},d:function k(M){return Math.abs(M=Math.round(M))>=1e21?M.toLocaleString("en").replace(/,/g,""):M.toString(10)},e:function(M,f){return M.toExponential(f)},f:function(M,f){return M.toFixed(f)},g:function(M,f){return M.toPrecision(f)},o:function(M){return Math.round(M).toString(8)},p:function(M,f){return g(100*M,f)},r:g,s:function r(M,f){var u=m(M,f);if(!u)return M+"";var h=u[0],o=u[1],C=o-(a=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,R=h.length;return C===R?h:C>R?h+new Array(C-R+1).join("0"):C>0?h.slice(0,C)+"."+h.slice(C):"0."+new Array(1-C).join("0")+m(M,Math.max(0,f+C-1))[0]},X:function(M){return Math.round(M).toString(16).toUpperCase()},x:function(M){return Math.round(M).toString(16)}};function b(M){return M}var w,x=Array.prototype.map,S=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function p(M){var f=void 0===M.grouping||void 0===M.thousands?b:function e(M,f){return function(u,h){for(var o=u.length,C=[],R=0,z=M[0],O=0;o>0&&z>0&&(O+z+1>h&&(z=Math.max(1,h-O)),C.push(u.substring(o-=z,o+z)),!((O+=z+1)>h));)z=M[R=(R+1)%M.length];return C.reverse().join(f)}}(x.call(M.grouping,Number),M.thousands+""),u=void 0===M.currency?"":M.currency[0]+"",h=void 0===M.currency?"":M.currency[1]+"",o=void 0===M.decimal?".":M.decimal+"",C=void 0===M.numerals?b:function c(M){return function(f){return f.replace(/[0-9]/g,function(u){return M[+u]})}}(x.call(M.numerals,String)),R=void 0===M.percent?"%":M.percent+"",z=void 0===M.minus?"-":M.minus+"",O=void 0===M.nan?"NaN":M.nan+"";function I(D){var N=(D=n(D)).fill,U=D.align,X=D.sign,oe=D.symbol,se=D.zero,ne=D.width,W=D.comma,G=D.precision,$=D.trim,V=D.type;"n"===V?(W=!0,V="g"):s[V]||(void 0===G&&(G=12),$=!0,V="g"),(se||"0"===N&&"="===U)&&(se=!0,N="0",U="=");var H="$"===oe?u:"#"===oe&&/[boxX]/.test(V)?"0"+V.toLowerCase():"",q="$"===oe?h:/[%p]/.test(V)?R:"",K=s[V],Y=/[defgprs%]/.test(V);function te(J){var le,ge,pe,j=H,re=q;if("c"===V)re=K(J)+re,J="";else{var xe=(J=+J)<0||1/J<0;if(J=isNaN(J)?O:K(Math.abs(J),G),$&&(J=function i(M){e:for(var o,f=M.length,u=1,h=-1;u<f;++u)switch(M[u]){case".":h=o=u;break;case"0":0===h&&(h=u),o=u;break;default:if(!+M[u])break e;h>0&&(h=0)}return h>0?M.slice(0,h)+M.slice(o+1):M}(J)),xe&&0==+J&&"+"!==X&&(xe=!1),j=(xe?"("===X?X:z:"-"===X||"("===X?"":X)+j,re=("s"===V?S[8+a/3]:"")+re+(xe&&"("===X?")":""),Y)for(le=-1,ge=J.length;++le<ge;)if(48>(pe=J.charCodeAt(le))||pe>57){re=(46===pe?o+J.slice(le+1):J.slice(le))+re,J=J.slice(0,le);break}}W&&!se&&(J=f(J,1/0));var ke=j.length+J.length+re.length,we=ke<ne?new Array(ne-ke+1).join(N):"";switch(W&&se&&(J=f(we+J,we.length?ne-re.length:1/0),we=""),U){case"<":J=j+J+re+we;break;case"=":J=j+we+J+re;break;case"^":J=we.slice(0,ke=we.length>>1)+j+J+re+we.slice(ke);break;default:J=we+j+J+re}return C(J)}return G=void 0===G?6:/[gprs]/.test(V)?Math.max(1,Math.min(21,G)):Math.max(0,Math.min(20,G)),te.toString=function(){return D+""},te}return{format:I,formatPrefix:function F(D,N){var U=I(((D=n(D)).type="f",D)),X=3*Math.max(-8,Math.min(8,Math.floor(E(N)/3))),oe=Math.pow(10,-X),se=S[8+X/3];return function(ne){return U(oe*ne)+se}}}}function l(M){return w=p(M),_.format=w.format,_.formatPrefix=w.formatPrefix,w}l({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),_.FormatSpecifier=t,_.formatDefaultLocale=l,_.formatLocale=p,_.formatSpecifier=n,_.precisionFixed=function y(M){return Math.max(0,-E(Math.abs(M)))},_.precisionPrefix=function A(M,f){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(E(f)/3)))-E(Math.abs(M)))},_.precisionRound=function T(M,f){return M=Math.abs(M),f=Math.abs(f)-M,Math.max(0,E(f)-E(M))+1},Object.defineProperty(_,"__esModule",{value:!0})},k("object"==typeof ae&&void 0!==ie?ae:(_="undefined"!=typeof globalThis?globalThis:_||self).d3=_.d3||{})},{}],113:[function(v,ie,ae){var _,k;_=this,k=function(_,k,m){"use strict";var E=Math.abs,e=Math.atan,c=Math.atan2,d=Math.cos,n=Math.exp,t=Math.floor,i=Math.log,a=Math.max,r=Math.min,g=Math.pow,s=Math.round,b=Math.sign||function(ze){return ze>0?1:ze<0?-1:0},x=Math.sin,S=Math.tan,p=1e-6,w=1e-12,l=Math.PI,y=l/2,A=l/4,T=Math.SQRT1_2,M=O(2),f=O(l),u=2*l,h=180/l,o=l/180;function R(ze){return ze>1?y:ze<-1?-y:Math.asin(ze)}function z(ze){return ze>1?0:ze<-1?l:Math.acos(ze)}function O(ze){return ze>0?Math.sqrt(ze):0}function I(ze){return((ze=n(2*ze))-1)/(ze+1)}function F(ze){return(n(ze)-n(-ze))/2}function D(ze){return(n(ze)+n(-ze))/2}function X(ze){var Ge=S(ze/2),qe=2*i(d(ze/2))/(Ge*Ge);function ot(bt,xt){var At=d(bt),cr=d(xt),yr=x(xt),lr=cr*At,_r=-((1-lr?i((1+lr)/2)/(1-lr):-.5)+qe/(1+lr));return[_r*cr*x(bt),_r*yr]}return ot.invert=function(bt,xt){var lr,At=O(bt*bt+xt*xt),cr=-ze/2,yr=50;if(!At)return[0,0];do{var _r=cr/2,Rr=d(_r),Xr=x(_r),an=Xr/Rr,bn=-i(E(Rr));cr-=lr=(2/an*bn-qe*an-At)/(-bn/(Xr*Xr)+1-qe/(2*Rr*Rr))*(Rr<0?.7:1)}while(E(lr)>p&&--yr>0);var Dn=x(cr);return[c(bt*Dn,At*d(cr)),R(xt*Dn/At)]},ot}function se(ze,Ge){var qe=d(Ge),ot=function C(ze){return ze?ze/Math.sin(ze):1}(z(qe*d(ze/=2)));return[2*qe*x(ze)*ot,x(Ge)*ot]}function W(ze){var Ge=x(ze),qe=d(ze),ot=ze>=0?1:-1,bt=S(ot*ze),xt=(1+Ge-qe)/2;function At(cr,yr){var lr=d(yr),_r=d(cr/=2);return[(1+lr)*x(cr),(ot*yr>-c(_r,bt)-.001?0:10*-ot)+xt+x(yr)*qe-(1+lr)*Ge*_r]}return At.invert=function(cr,yr){var lr=0,_r=0,Rr=50;do{var Xr=d(lr),an=x(lr),bn=d(_r),Dn=x(_r),Yn=1+bn,xa=Yn*an-cr,Za=xt+Dn*qe-Yn*Ge*Xr-yr,ja=Yn*Xr/2,Ka=-an*Dn,ri=Ge*Yn*an/2,di=qe*bn+Ge*Xr*Dn,Yi=Ka*ri-di*ja,Ga=(Za*Ka-xa*di)/Yi/2,$i=(xa*ri-Za*ja)/Yi;E($i)>2&&($i/=2),lr-=Ga,_r-=$i}while((E(Ga)>p||E($i)>p)&&--Rr>0);return ot*_r>-c(d(lr),bt)-.001?[2*lr,_r]:null},At}function $(ze,Ge){var qe=S(Ge/2),ot=O(1-qe*qe),bt=1+ot*d(ze/=2),xt=x(ze)*ot/bt,At=qe/bt,cr=xt*xt,yr=At*At;return[4/3*xt*(3+cr-3*yr),4/3*At*(3+3*cr-yr)]}se.invert=function(ze,Ge){if(!(ze*ze+4*Ge*Ge>l*l+p)){var qe=ze,ot=Ge,bt=25;do{var Yn,xt=x(qe),At=x(qe/2),cr=d(qe/2),yr=x(ot),lr=d(ot),_r=x(2*ot),Rr=yr*yr,Xr=lr*lr,an=At*At,bn=1-Xr*cr*cr,Dn=bn?z(lr*cr)*O(Yn=1/bn):Yn=0,xa=2*Dn*lr*At-ze,Za=Dn*yr-Ge,ja=Yn*(Xr*an+Dn*lr*cr*Rr),Ka=Yn*(.5*xt*_r-2*Dn*yr*At),ri=.25*Yn*(_r*At-Dn*yr*Xr*xt),di=Yn*(Rr*cr+Dn*an*lr),Yi=Ka*ri-di*ja;if(!Yi)break;var Ga=(Za*Ka-xa*di)/Yi,$i=(xa*ri-Za*ja)/Yi;qe-=Ga,ot-=$i}while((E(Ga)>p||E($i)>p)&&--bt>0);return[qe,ot]}},$.invert=function(ze,Ge){if(Ge*=3/8,!(ze*=3/8)&&E(Ge)>1)return null;var bt=1+ze*ze+Ge*Ge,xt=O((bt-O(bt*bt-4*Ge*Ge))/2),At=R(xt)/3,cr=xt?function U(ze){return i(ze+O(ze*ze-1))}(E(Ge/xt))/3:function N(ze){return i(ze+O(ze*ze+1))}(E(ze))/3,yr=d(At),lr=D(cr),_r=lr*lr-yr*yr;return[2*b(ze)*c(F(cr)*yr,.25-_r),2*b(Ge)*c(lr*x(At),.25+_r)]};var H=O(8),q=i(1+M);function K(ze,Ge){var qe=E(Ge);return qe<A?[ze,i(S(A+Ge/2))]:[ze*d(qe)*(2*M-1/x(qe)),b(Ge)*(2*M*(qe-A)-i(S(qe/2)))]}function te(ze){var Ge=2*l/ze;function qe(ot,bt){var xt=k.geoAzimuthalEquidistantRaw(ot,bt);if(E(ot)>y){var At=c(xt[1],xt[0]),cr=O(xt[0]*xt[0]+xt[1]*xt[1]),yr=Ge*s((At-y)/Ge)+y,lr=c(x(At-=yr),2-d(At));At=yr+R(l/cr*x(lr))-lr,xt[0]=cr*d(At),xt[1]=cr*x(At)}return xt}return qe.invert=function(ot,bt){var xt=O(ot*ot+bt*bt);if(xt>y){var At=c(bt,ot),cr=Ge*s((At-y)/Ge)+y,yr=At>cr?-1:1,lr=xt*d(cr-At),_r=1/S(yr*z((lr-l)/O(l*(l-2*lr)+xt*xt)));At=cr+2*e((_r+yr*O(_r*_r-3))/3),ot=xt*d(At),bt=xt*x(At)}return k.geoAzimuthalEquidistantRaw.invert(ot,bt)},qe}function j(ze,Ge){if(arguments.length<2&&(Ge=ze),1===Ge)return k.geoAzimuthalEqualAreaRaw;if(Ge===1/0)return re;function qe(ot,bt){var xt=k.geoAzimuthalEqualAreaRaw(ot/Ge,bt);return xt[0]*=ze,xt}return qe.invert=function(ot,bt){var xt=k.geoAzimuthalEqualAreaRaw.invert(ot/ze,bt);return xt[0]*=Ge,xt},qe}function re(ze,Ge){return[ze*d(Ge)/d(Ge/=2),2*x(Ge)]}function ge(ze,Ge,qe){var bt,xt,At,ot=100;qe=void 0===qe?0:+qe,Ge=+Ge;do{(xt=ze(qe))===(At=ze(qe+p))&&(At=xt+p),qe-=bt=-1*p*(xt-Ge)/(xt-At)}while(ot-- >0&&E(bt)>p);return ot<0?NaN:qe}function pe(ze,Ge,qe){return void 0===Ge&&(Ge=40),void 0===qe&&(qe=w),function(ot,bt,xt,At){var cr,yr,lr;xt=void 0===xt?0:+xt,At=void 0===At?0:+At;for(var _r=0;_r<Ge;_r++){var Rr=ze(xt,At),Xr=Rr[0]-ot,an=Rr[1]-bt;if(E(Xr)<qe&&E(an)<qe)break;var bn=Xr*Xr+an*an;if(bn>cr)xt-=yr/=2,At-=lr/=2;else{cr=bn;var Dn=(xt>0?-1:1)*qe,Yn=(At>0?-1:1)*qe,xa=ze(xt+Dn,At),Za=ze(xt,At+Yn),ja=(xa[0]-Rr[0])/Dn,Ka=(xa[1]-Rr[1])/Dn,ri=(Za[0]-Rr[0])/Yn,di=(Za[1]-Rr[1])/Yn,Yi=di*ja-Ka*ri,Ga=(E(Yi)<.5?.5:1)/Yi;if(xt+=yr=(an*ri-Xr*di)*Ga,At+=lr=(Xr*Ka-an*ja)*Ga,E(yr)<qe&&E(lr)<qe)break}}return[xt,At]}}function xe(){var ze=j(1.68,2);function ot(bt,xt){if(bt+xt<-1.4){var At=(bt-xt+1.6)*(bt+xt+1.4)/8;bt+=At,xt-=.8*At*x(xt+l/2)}var cr=ze(bt,xt),yr=(1-d(bt*xt))/12;return cr[1]<0&&(cr[0]*=1+yr),cr[1]>0&&(cr[1]*=1+yr/1.5*cr[0]*cr[0]),cr}return ot.invert=pe(ot),ot}function we(ze,Ge){var bt,qe=ze*x(Ge),ot=30;do{Ge-=bt=(Ge+x(Ge)-qe)/(1+d(Ge))}while(E(bt)>p&&--ot>0);return Ge/2}function de(ze,Ge,qe){function ot(bt,xt){return[ze*bt*d(xt=we(qe,xt)),Ge*x(xt)]}return ot.invert=function(bt,xt){return xt=R(xt/Ge),[bt/(ze*d(xt)),R((2*xt+x(2*xt))/qe)]},ot}K.invert=function(ze,Ge){if((xt=E(Ge))<q)return[ze,2*e(n(Ge))-y];var bt,xt,qe=A,ot=25;do{var At=d(qe/2),cr=S(qe/2);qe-=bt=(H*(qe-A)-i(cr)-xt)/(H-At*At/(2*cr))}while(E(bt)>w&&--ot>0);return[ze/(d(qe)*(H-1/x(qe))),b(Ge)*qe]},re.invert=function(ze,Ge){var qe=2*R(Ge/2);return[ze*d(qe/2)/d(qe),qe]};var be=de(M/y,M,l);var De=2.00276;function Ce(ze,Ge){var qe=we(l,Ge);return[De*ze/(1/d(Ge)+1.11072/d(qe)),(Ge+M*x(qe))/De]}function Ke(ze){var Ge=0,qe=k.geoProjectionMutator(ze),ot=qe(Ge);return ot.parallel=function(bt){return arguments.length?qe(Ge=bt*o):Ge*h},ot}function Ue(ze,Ge){return[ze*d(Ge),Ge]}function Ie(ze){if(!ze)return Ue;var Ge=1/S(ze);function qe(ot,bt){var xt=Ge+ze-bt,At=xt&&ot*d(bt)/xt;return[xt*x(At),Ge-xt*d(At)]}return qe.invert=function(ot,bt){var xt=O(ot*ot+(bt=Ge-bt)*bt),At=Ge+ze-xt;return[xt/d(At)*c(ot,bt),At]},qe}function gt(ze){function Ge(qe,ot){var bt=y-ot,xt=bt&&qe*ze*x(bt)/bt;return[bt*x(xt)/ze,y-bt*d(xt)]}return Ge.invert=function(qe,ot){var bt=qe*ze,xt=y-ot,At=O(bt*bt+xt*xt),cr=c(bt,xt);return[(At?At/x(At):1)*cr/ze,y-At]},Ge}Ce.invert=function(ze,Ge){var xt,At,qe=De*Ge,ot=Ge<0?-A:A,bt=25;do{At=qe-M*x(ot),ot-=xt=(x(2*ot)+2*ot-l*x(At))/(2*d(2*ot)+2+l*d(At)*M*d(ot))}while(E(xt)>p&&--bt>0);return At=qe-M*x(ot),[ze*(1/d(At)+1.11072/d(ot))/De,At]},Ue.invert=function(ze,Ge){return[ze/d(Ge),Ge]};var St=de(1,4/l,l);function Zt(ze,Ge,qe,ot,bt,xt){var cr,At=d(xt);if(E(ze)>1||E(xt)>1)cr=z(qe*bt+Ge*ot*At);else{var yr=x(ze/2),lr=x(xt/2);cr=2*R(O(yr*yr+Ge*ot*lr*lr))}return E(cr)>p?[cr,c(ot*x(xt),Ge*bt-qe*ot*At)]:[0,0]}function Et(ze,Ge,qe){return z((ze*ze+Ge*Ge-qe*qe)/(2*ze*Ge))}function wt(ze){return ze-2*l*t((ze+l)/(2*l))}function at(ze,Ge,qe){for(var xt,ot=[[ze[0],ze[1],x(ze[1]),d(ze[1])],[Ge[0],Ge[1],x(Ge[1]),d(Ge[1])],[qe[0],qe[1],x(qe[1]),d(qe[1])]],bt=ot[2],At=0;At<3;++At,bt=xt)bt.v=Zt((xt=ot[At])[1]-bt[1],bt[3],bt[2],xt[3],xt[2],xt[0]-bt[0]),bt.point=[0,0];var cr=Et(ot[0].v[0],ot[2].v[0],ot[1].v[0]),yr=Et(ot[0].v[0],ot[1].v[0],ot[2].v[0]),lr=l-cr;ot[2].point[1]=0,ot[0].point[0]=-(ot[1].point[0]=ot[0].v[0]/2);var _r=[ot[2].point[0]=ot[0].point[0]+ot[2].v[0]*d(cr),2*(ot[0].point[1]=ot[1].point[1]=ot[2].v[0]*x(cr))];return function Rr(Xr,an){var xa,bn=x(an),Dn=d(an),Yn=new Array(3);for(xa=0;xa<3;++xa){var Za=ot[xa];if(Yn[xa]=Zt(an-Za[1],Za[3],Za[2],Dn,bn,Xr-Za[0]),!Yn[xa][0])return Za.point;Yn[xa][1]=wt(Yn[xa][1]-Za.v[1])}var ja=_r.slice();for(xa=0;xa<3;++xa){var ri=Et(ot[xa].v[0],Yn[xa][0],Yn[2==xa?0:xa+1][0]);Yn[xa][1]<0&&(ri=-ri),xa?1==xa?(ja[0]-=Yn[xa][0]*d(ri=yr-ri),ja[1]-=Yn[xa][0]*x(ri)):(ja[0]+=Yn[xa][0]*d(ri=lr-ri),ja[1]+=Yn[xa][0]*x(ri)):(ja[0]+=Yn[xa][0]*d(ri),ja[1]-=Yn[xa][0]*x(ri))}return ja[0]/=3,ja[1]/=3,ja}}function vt(ze){return ze[0]*=o,ze[1]*=o,ze}function Pe(ze,Ge,qe){var ot=k.geoCentroid({type:"MultiPoint",coordinates:[ze,Ge,qe]}),bt=[-ot[0],-ot[1]],xt=k.geoRotation(bt),At=at(vt(xt(ze)),vt(xt(Ge)),vt(xt(qe)));At.invert=pe(At);var cr=k.geoProjection(At).rotate(bt),yr=cr.center;return delete cr.rotate,cr.center=function(lr){return arguments.length?yr(xt(lr)):xt.invert(yr())},cr.clipAngle(90)}function Ze(ze,Ge){var qe=O(1-x(Ge));return[2/f*ze*qe,f*(1-qe)]}function rt(ze){var Ge=S(ze);function qe(ot,bt){return[ot,(ot?ot/x(ot):1)*(x(bt)*d(ot)-Ge*d(bt))]}return qe.invert=Ge?function(ot,bt){ot&&(bt*=x(ot)/ot);var xt=d(ot);return[ot,2*c(O(xt*xt+Ge*Ge-bt*bt)-xt,Ge-bt)]}:function(ot,bt){return[ot,R(ot?bt*S(ot)/ot:bt)]},qe}Ze.invert=function(ze,Ge){var qe=(qe=Ge/f-1)*qe;return[qe>0?ze*O(l/qe)/2:0,R(1-qe)]};var Tt=O(3);function Xt(ze,Ge){return[Tt*ze*(2*d(2*Ge/3)-1)/f,Tt*f*x(Ge/3)]}function Ut(ze){var Ge=d(ze);function qe(ot,bt){return[ot*Ge,x(bt)/Ge]}return qe.invert=function(ot,bt){return[ot/Ge,R(bt*Ge)]},qe}function nr(ze){var Ge=d(ze);function qe(ot,bt){return[ot*Ge,(1+Ge)*S(bt/2)]}return qe.invert=function(ot,bt){return[ot/Ge,2*e(bt/(1+Ge))]},qe}function br(ze,Ge){var qe=O(8/(3*l));return[qe*ze*(1-E(Ge)/l),qe*Ge]}function on(ze,Ge){var qe=O(4-3*x(E(Ge)));return[2/O(6*l)*ze*qe,b(Ge)*O(2*l/3)*(2-qe)]}function et(ze,Ge){var qe=O(l*(4+l));return[2/qe*ze*(1+O(1-4*Ge*Ge/(l*l))),4/qe*Ge]}function qt(ze,Ge){var qe=(2+y)*x(Ge);Ge/=2;for(var ot=0,bt=1/0;ot<10&&E(bt)>p;ot++){var xt=d(Ge);Ge-=bt=(Ge+x(Ge)*(xt+2)-qe)/(2*xt*(1+xt))}return[2/O(l*(4+l))*ze*(1+d(Ge)),2*O(l/(4+l))*x(Ge)]}function Tr(ze,Ge){return[ze*(1+d(Ge))/O(2+l),2*Ge/O(2+l)]}function je(ze,Ge){for(var qe=(1+y)*x(Ge),ot=0,bt=1/0;ot<10&&E(bt)>p;ot++)Ge-=bt=(Ge+x(Ge)-qe)/(1+d(Ge));return qe=O(2+l),[ze*(1+d(Ge))/qe,2*Ge/qe]}Xt.invert=function(ze,Ge){var qe=3*R(Ge/(Tt*f));return[f*ze/(Tt*(2*d(2*qe/3)-1)),qe]},br.invert=function(ze,Ge){var qe=O(8/(3*l)),ot=Ge/qe;return[ze/(qe*(1-E(ot)/l)),ot]},on.invert=function(ze,Ge){var qe=2-E(Ge)/O(2*l/3);return[ze*O(6*l)/(2*qe),b(Ge)*R((4-qe*qe)/3)]},et.invert=function(ze,Ge){var qe=O(l*(4+l))/2;return[ze*qe/(1+O(1-Ge*Ge*(4+l)/(4*l))),Ge*qe/2]},qt.invert=function(ze,Ge){var qe=Ge*O((4+l)/l)/2,ot=R(qe),bt=d(ot);return[ze/(2/O(l*(4+l))*(1+bt)),R((ot+qe*(bt+2))/(2+y))]},Tr.invert=function(ze,Ge){var qe=O(2+l),ot=Ge*qe/2;return[qe*ze/(1+d(ot)),ot]},je.invert=function(ze,Ge){var qe=1+y,ot=O(qe/2);return[2*ze*ot/(1+d(Ge*=ot)),R((Ge+x(Ge))/qe)]};var ht=3+2*M;function Me(ze,Ge){var qe=x(ze/=2),ot=d(ze),bt=O(d(Ge)),xt=d(Ge/=2),At=x(Ge)/(xt+M*ot*bt),cr=O(2/(1+At*At)),yr=O((M*xt+(ot+qe)*bt)/(M*xt+(ot-qe)*bt));return[ht*(cr*(yr-1/yr)-2*i(yr)),ht*(cr*At*(yr+1/yr)-2*e(At))]}Me.invert=function(ze,Ge){if(!(xt=$.invert(ze/1.2,1.065*Ge)))return null;var xt,qe=xt[0],ot=xt[1],bt=20;ze/=ht,Ge/=ht;do{var At=qe/2,cr=ot/2,yr=x(At),lr=d(At),_r=x(cr),Rr=d(cr),Xr=d(ot),an=O(Xr),bn=_r/(Rr+M*lr*an),Dn=bn*bn,Yn=O(2/(1+Dn)),ja=(M*Rr+(lr+yr)*an)/(M*Rr+(lr-yr)*an),Ka=O(ja),ri=Ka-1/Ka,di=Ka+1/Ka,Yi=Yn*ri-2*i(Ka)-ze,Ga=Yn*bn*di-2*e(bn)-Ge,$i=_r&&T*an*yr*Dn/_r,Wi=(M*lr*Rr+an)/(2*(Rr+M*lr*an)*(Rr+M*lr*an)*an),ho=-.5*bn*Yn*Yn*Yn,xi=ho*$i,Di=ho*Wi,Wo=(Wo=2*Rr+M*an*(lr-yr))*Wo*Ka,vo=(M*lr*Rr*an+Xr)/Wo,Eo=-M*yr*_r/(an*Wo),Xo=ri*xi-2*vo/Ka+Yn*(vo+vo/ja),Do=ri*Di-2*Eo/Ka+Yn*(Eo+Eo/ja),Ks=bn*di*xi-2*$i/(1+Dn)+Yn*di*$i+Yn*bn*(vo-vo/ja),yl=bn*di*Di-2*Wi/(1+Dn)+Yn*di*Wi+Yn*bn*(Eo-Eo/ja),Ro=Do*Ks-yl*Xo;if(!Ro)break;var ka=(Ga*Do-Yi*yl)/Ro,Qs=(Yi*Ks-Ga*Xo)/Ro;qe-=ka,ot=a(-y,r(y,ot-Qs))}while((E(ka)>p||E(Qs)>p)&&--bt>0);return E(E(ot)-y)<p?[0,ot]:bt&&[qe,ot]};var Je=d(35*o);function We(ze,Ge){var qe=S(Ge/2);return[ze*Je*O(1-qe*qe),(1+Je)*qe]}function lt(ze,Ge){var qe=Ge/2,ot=d(qe);return[2*ze/f*d(Ge)*ot*ot,f*S(qe)]}function Ct(ze){var Ge=1-ze,qe=xt(l,0)[0]-xt(-l,0)[0],bt=O(2*(xt(0,y)[1]-xt(0,-y)[1])/qe);function xt(yr,lr){var _r=d(lr),Rr=x(lr);return[_r/(Ge+ze*_r)*yr,Ge*lr+ze*Rr]}function At(yr,lr){var _r=xt(yr,lr);return[_r[0]*bt,_r[1]/bt]}function cr(yr){return At(0,yr)[1]}return At.invert=function(yr,lr){var _r=ge(cr,lr);return[yr/bt*(ze+Ge/d(_r)),_r]},At}function Gt(ze){return[ze[0]/2,R(S(ze[1]/2*o))*h]}function fr(ze){return[2*ze[0],2*e(x(ze[1]*o))*h]}function Jr(ze,Ge){var qe=2*l/Ge,ot=ze*ze;function bt(xt,At){var cr=k.geoAzimuthalEquidistantRaw(xt,At),yr=cr[0],lr=cr[1],_r=yr*yr+lr*lr;if(_r>ot){var Rr=O(_r),Xr=c(lr,yr),an=qe*s(Xr/qe),bn=Xr-an,Dn=ze*d(bn),Yn=(ze*x(bn)-bn*x(Dn))/(y-Dn),xa=Lr(bn,Yn),Za=(l-ze)/Ar(xa,Dn,l);yr=Rr;var Ka,ja=50;do{yr-=Ka=(ze+Ar(xa,Dn,yr)*Za-Rr)/(xa(yr)*Za)}while(E(Ka)>p&&--ja>0);lr=bn*x(yr),yr<y&&(lr-=Yn*(yr-y));var ri=x(an),di=d(an);cr[0]=yr*di-lr*ri,cr[1]=yr*ri+lr*di}return cr}return bt.invert=function(xt,At){var cr=xt*xt+At*At;if(cr>ot){var yr=O(cr),lr=c(At,xt),_r=qe*s(lr/qe),Rr=lr-_r;xt=yr*d(Rr),At=yr*x(Rr);for(var Xr=xt-y,an=x(xt),bn=At/an,Dn=xt<y?1/0:0,Yn=10;;){var xa=ze*x(bn),Za=ze*d(bn),ja=x(Za),Ka=y-Za,ri=(xa-bn*ja)/Ka,di=Lr(bn,ri);if(E(Dn)<w||!--Yn)break;bn-=Dn=(bn*an-ri*Xr-At)/(an-2*Xr*(Ka*(Za+bn*xa*d(Za)-ja)-xa*(xa-bn*ja))/(Ka*Ka))}xt=(yr=ze+Ar(di,Za,xt)*(l-ze)/Ar(di,Za,l))*d(lr=_r+bn),At=yr*x(lr)}return k.geoAzimuthalEquidistantRaw.invert(xt,At)},bt}function Lr(ze,Ge){return function(qe){var ot=ze*d(qe);return qe<y&&(ot-=Ge),O(1+ot*ot)}}function Ar(ze,Ge,qe){for(var bt=(qe-Ge)/50,xt=ze(Ge)+ze(qe),At=1,cr=Ge;At<50;++At)xt+=2*ze(cr+=bt);return.5*xt*bt}function mr(ze,Ge,qe,ot,bt,xt,At,cr){function yr(lr,_r){if(!_r)return[ze*lr/l,0];var Rr=_r*_r,Xr=ze+Rr*(Ge+Rr*(qe+Rr*ot)),an=_r*(bt-1+Rr*(xt-cr+Rr*At)),bn=(Xr*Xr+an*an)/(2*an),Dn=lr*R(Xr/bn)/l;return[bn*x(Dn),_r*(1+Rr*cr)+bn*(1-d(Dn))]}return arguments.length<8&&(cr=0),yr.invert=function(lr,_r){var an,bn,Rr=l*lr/ze,Xr=_r,Dn=50;do{var Yn=Xr*Xr,xa=ze+Yn*(Ge+Yn*(qe+Yn*ot)),Za=Xr*(bt-1+Yn*(xt-cr+Yn*At)),ja=xa*xa+Za*Za,Ka=2*Za,ri=ja/Ka,di=ri*ri,Yi=R(xa/ri)/l,Ga=Rr*Yi,$i=xa*xa,Wi=(2*Ge+Yn*(4*qe+6*Yn*ot))*Xr,ho=bt+Yn*(3*xt+5*Yn*At),Wo=(2*(xa*Wi+Za*(ho-1))*Ka-ja*(2*(ho-1)))/(Ka*Ka),vo=d(Ga),Eo=x(Ga),Xo=ri*vo,Do=ri*Eo,Ks=Rr/l*(1/O(1-$i/di))*(Wi*ri-xa*Wo)/di,yl=Do-lr,Ro=Xr*(1+Yn*cr)+ri-Xo-_r,ka=Wo*Eo+Xo*Ks,Qs=Xo*Yi,ue=1+Wo-(Wo*vo-Do*Ks),_e=Do*Yi,Ee=ka*_e-ue*Qs;if(!Ee)break;Rr-=an=(Ro*ka-yl*ue)/Ee,Xr-=bn=(yl*_e-Ro*Qs)/Ee}while((E(an)>p||E(bn)>p)&&--Dn>0);return[Rr,Xr]},yr}We.invert=function(ze,Ge){var qe=Ge/(1+Je);return[ze&&ze/(Je*O(1-qe*qe)),2*e(qe)]},lt.invert=function(ze,Ge){var qe=e(Ge/f),ot=d(qe),bt=2*qe;return[ze*f/2/(d(bt)*ot*ot),bt]};var wr=mr(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);var Kr=mr(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);var it=mr(5/6*l,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Qt(ze,Ge){var qe=ze*ze,ot=Ge*Ge;return[ze*(1-.162388*ot)*(.87-952426e-9*qe*qe),Ge*(1+ot/12)]}Qt.invert=function(ze,Ge){var xt,qe=ze,ot=Ge,bt=50;do{var At=ot*ot;ot-=xt=(ot*(1+At/12)-Ge)/(1+At/4)}while(E(xt)>p&&--bt>0);bt=50,ze/=1-.162388*At;do{var cr=(cr=qe*qe)*cr;qe-=xt=(qe*(.87-952426e-9*cr)-ze)/(.87-.00476213*cr)}while(E(xt)>p&&--bt>0);return[qe,ot]};var Or=mr(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Ir(ze){var Ge=ze(y,0)[0]-ze(-y,0)[0];function qe(ot,bt){var xt=ot>0?-.5:.5,At=ze(ot+xt*l,bt);return At[0]-=xt*Ge,At}return ze.invert&&(qe.invert=function(ot,bt){var xt=ot>0?-.5:.5,At=ze.invert(ot+xt*Ge,bt),cr=At[0]-xt*l;return cr<-l?cr+=2*l:cr>l&&(cr-=2*l),At[0]=cr,At}),qe}function kr(ze,Ge){var qe=b(ze),ot=b(Ge),bt=d(Ge),xt=d(ze)*bt,At=x(ze)*bt,cr=x(ot*Ge);ze=E(c(At,cr)),Ge=R(xt),E(ze-y)>p&&(ze%=y);var yr=function Zr(ze,Ge){if(Ge===y)return[0,0];var Dn,Yn,qe=x(Ge),ot=qe*qe,bt=ot*ot,xt=1+bt,At=1+3*bt,cr=1-bt,yr=R(1/O(xt)),lr=cr+ot*xt*yr,_r=(1-qe)/lr,Rr=O(_r),Xr=_r*xt,an=O(Xr),bn=Rr*cr;if(0===ze)return[0,-(bn+ot*an)];var Di,xa=d(Ge),Za=1/xa,ja=2*qe*xa,ri=(-lr*xa-(-3*ot+yr*At)*ja*(1-qe))/(lr*lr),$i=-Za*ja,Wi=-Za*(ot*xt*ri+_r*At*ja),ho=-2*Za*(cr*(.5*ri/Rr)-2*ot*Rr*ja),xi=4*ze/l;if(ze>.222*l||Ge<l/4&&ze>.175*l){if(Dn=(bn+ot*O(Xr*(1+bt)-bn*bn))/(1+bt),ze>l/4)return[Dn,Dn];var Wo=Dn,vo=.5*Dn;Dn=.5*(vo+Wo),Yn=50;do{var Xo=Dn*(ho+$i*O(Xr-Dn*Dn))+Wi*R(Dn/an)-xi;if(!Xo)break;Xo<0?vo=Dn:Wo=Dn,Dn=.5*(vo+Wo)}while(E(Wo-vo)>p&&--Yn>0)}else{Dn=p,Yn=25;do{var Do=Dn*Dn,Ks=O(Xr-Do),yl=ho+$i*Ks,Ro=Dn*yl+Wi*R(Dn/an)-xi;Dn-=Di=Ks?Ro/(yl+(Wi-$i*Do)/Ks):0}while(E(Di)>p&&--Yn>0)}return[Dn,-bn-ot*O(Xr-Dn*Dn)]}(ze>l/4?y-ze:ze,Ge);return ze>l/4&&(cr=yr[0],yr[0]=-yr[1],yr[1]=-cr),yr[0]*=qe,yr[1]*=-ot,yr}function Ln(ze,Ge){var qe,ot,bt,xt,At;if(Ge<p)return[(xt=x(ze))-(qe=Ge*(ze-xt*(ot=d(ze)))/4)*ot,ot+qe*xt,1-Ge*xt*xt/2,ze-qe];if(Ge>=1-p)return qe=(1-Ge)/4,bt=1/(ot=D(ze)),[(xt=I(ze))+qe*((At=ot*F(ze))-ze)/(ot*ot),bt-qe*xt*bt*(At-ze),bt+qe*xt*bt*(At+ze),2*e(n(ze))-y+qe*(At-ze)/ot];var cr=[1,0,0,0,0,0,0,0,0],yr=[O(Ge),0,0,0,0,0,0,0,0],lr=0;for(ot=O(1-Ge),At=1;E(yr[lr]/cr[lr])>p&&lr<8;)qe=cr[lr++],yr[lr]=(qe-ot)/2,cr[lr]=(qe+ot)/2,ot=O(qe*ot),At*=2;bt=At*cr[lr]*ze;do{bt=(R(xt=yr[lr]*x(ot=bt)/cr[lr])+bt)/2}while(--lr);return[x(bt),xt=d(bt),xt/d(bt-ot),bt]}function $n(ze,Ge){if(!Ge)return ze;if(1===Ge)return i(S(ze/2+A));for(var qe=1,ot=O(1-Ge),bt=O(Ge),xt=0;E(bt)>p;xt++){if(ze%l){var At=e(ot*S(ze)/qe);At<0&&(At+=l),ze+=At+~~(ze/l)*l}else ze+=ze;bt=(qe+ot)/2,ot=O(qe*ot),bt=((qe=bt)-ot)/2}return ze/(g(2,xt)*qe)}function wa(ze,Ge){var qe=(M-1)/(M+1),ot=O(1-qe*qe),bt=$n(y,ot*ot),At=i(S(l/4+E(Ge)/2)),cr=n(-1*At)/O(qe),yr=function ma(ze,Ge){var qe=ze*ze,ot=Ge+1,bt=1-qe-Ge*Ge;return[.5*((ze>=0?y:-y)-c(bt,2*ze)),-.25*i(bt*bt+4*qe)+.5*i(ot*ot+qe)]}(cr*d(-1*ze),cr*x(-1*ze)),lr=function Wn(ze,Ge,qe){var ot=E(ze),xt=F(E(Ge));if(ot){var At=1/x(ot),cr=1/(S(ot)*S(ot)),yr=-(cr+qe*(xt*xt*At*At)-1+qe),_r=(-yr+O(yr*yr-(qe-1)*cr*4))/2;return[$n(e(1/O(_r)),qe)*b(ze),$n(e(O((_r/cr-1)/qe)),1-qe)*b(Ge)]}return[0,$n(e(xt),1-qe)*b(Ge)]}(yr[0],yr[1],ot*ot);return[-lr[1],(Ge>=0?1:-1)*(.5*bt-lr[0])]}function Va(ze){var Ge=x(ze),qe=d(ze),ot=ai(ze);function bt(xt,At){var cr=ot(xt,At);xt=cr[0];var yr=x(At=cr[1]),lr=d(At),_r=d(xt),Rr=z(Ge*yr+qe*lr*_r),Xr=x(Rr),an=E(Xr)>p?Rr/Xr:1;return[an*qe*x(xt),(E(xt)>y?an:-an)*(Ge*lr-qe*yr*_r)]}return ot.invert=ai(-ze),bt.invert=function(xt,At){var cr=O(xt*xt+At*At),yr=-x(cr),lr=d(cr),_r=cr*lr,Rr=-At*yr,Xr=cr*Ge,an=O(_r*_r+Rr*Rr-Xr*Xr),bn=c(_r*Xr+Rr*an,Rr*Xr-_r*an),Dn=(cr>y?-1:1)*c(xt*yr,cr*d(bn)*lr+At*x(bn)*yr);return ot.invert(Dn,bn)},bt}function ai(ze){var Ge=x(ze),qe=d(ze);return function(ot,bt){var xt=d(bt),At=d(ot)*xt,cr=x(ot)*xt,yr=x(bt);return[c(cr,At*qe-yr*Ge),R(yr*qe+At*Ge)]}}kr.invert=function(ze,Ge){E(ze)>1&&(ze=2*b(ze)-ze),E(Ge)>1&&(Ge=2*b(Ge)-Ge);var qe=b(ze),ot=b(Ge),bt=-qe*ze,xt=-ot*Ge,At=xt/bt<1,cr=function An(ze,Ge){for(var qe=0,ot=1,bt=.5,xt=50;;){var At=bt*bt,cr=O(bt),yr=R(1/O(1+At)),lr=1-At+bt*(1+At)*yr,_r=(1-cr)/lr,Rr=O(_r),Xr=_r*(1+At),an=Rr*(1-At),Dn=O(Xr-ze*ze),Yn=Ge+an+bt*Dn;if(E(ot-qe)<w||0==--xt||0===Yn)break;Yn>0?qe=bt:ot=bt,bt=.5*(qe+ot)}if(!xt)return null;var xa=R(cr),Za=d(xa),ja=1/Za,Ka=2*cr*Za,di=(-lr*Za-(-3*bt+yr*(1+3*At))*Ka*(1-cr))/(lr*lr);return[l/4*(ze*(-2*ja*(.5*di/Rr*(1-At)-2*bt*Rr*Ka)+-ja*Ka*Dn)+-ja*(bt*(1+At)*di+_r*(1+3*At)*Ka)*R(ze/O(Xr))),xa]}(At?xt:bt,At?bt:xt),yr=cr[0],lr=cr[1],_r=d(lr);return At&&(yr=-y-yr),[qe*(c(x(yr)*_r,-x(lr))+l),ot*R(d(yr)*_r)]},wa.invert=function(ze,Ge){var qe=(M-1)/(M+1),ot=O(1-qe*qe),At=function Zn(ze,Ge,qe){var ot,bt,xt;return ze?(ot=Ln(ze,qe),Ge?(bt=Ln(Ge,1-qe),[[ot[0]*bt[2]/(xt=bt[1]*bt[1]+qe*ot[0]*ot[0]*bt[0]*bt[0]),ot[1]*ot[2]*bt[0]*bt[1]/xt],[ot[1]*bt[1]/xt,-ot[0]*ot[2]*bt[0]*bt[2]/xt],[ot[2]*bt[1]*bt[2]/xt,-qe*ot[0]*ot[1]*bt[0]/xt]]):[[ot[0],0],[ot[1],0],[ot[2],0]]):[[0,(bt=Ln(Ge,1-qe))[0]/bt[1]],[1/bt[1],0],[bt[2]/bt[1],0]]}(.5*$n(y,ot*ot)-Ge,-ze,ot*ot),cr=function $a(ze,Ge){var qe=Ge[0]*Ge[0]+Ge[1]*Ge[1];return[(ze[0]*Ge[0]+ze[1]*Ge[1])/qe,(ze[1]*Ge[0]-ze[0]*Ge[1])/qe]}(At[0],At[1]);return[c(cr[1],cr[0])/-1,2*e(n(-.5*i(qe*cr[0]*cr[0]+qe*cr[1]*cr[1])))-y]};var dn=R(1-1/3)*h,kn=Ut(0);function Un(ze){var Ge=dn*o,qe=Ze(l,Ge)[0]-Ze(-l,Ge)[0],ot=kn(0,Ge)[1],bt=Ze(0,Ge)[1],xt=f-bt,At=u/ze,cr=4/u,yr=ot+xt*xt*4/u;function lr(_r,Rr){var Xr,an=E(Rr);if(an>Ge){var bn=r(ze-1,a(0,t((_r+l)/At)));(Xr=Ze(_r+=l*(ze-1)/ze-bn*At,an))[0]=Xr[0]*u/qe-u*(ze-1)/(2*ze)+bn*u/ze,Xr[1]=ot+4*(Xr[1]-bt)*xt/u,Rr<0&&(Xr[1]=-Xr[1])}else Xr=kn(_r,Rr);return Xr[0]*=cr,Xr[1]/=yr,Xr}return lr.invert=function(_r,Rr){_r/=cr;var Xr=E(Rr*=yr);if(Xr>ot){var an=r(ze-1,a(0,t((_r+l)/At))),bn=Ze.invert(_r=(_r+l*(ze-1)/ze-an*At)*qe/u,.25*(Xr-ot)*u/xt+bt);return bn[0]-=l*(ze-1)/ze-an*At,Rr<0&&(bn[1]=-bn[1]),bn}return kn.invert(_r,Rr)},lr}function ra(ze,Ge){return[ze,1&Ge?90-p:dn]}function Gn(ze,Ge){return[ze,1&Ge?-90+p:-dn]}function On(ze){return[ze[0]*(1-p),ze[1]]}function oi(ze){var xt,Ge=1+ze,ot=R(x(1/Ge)),bt=2*O(l/(xt=l+4*ot*Ge)),At=.5*bt*(Ge+O(ze*(2+ze))),cr=ze*ze,yr=Ge*Ge;function lr(_r,Rr){var an,bn,Xr=1-x(Rr);if(Xr&&Xr<2){var xa,Dn=y-Rr,Yn=25;do{var Za=x(Dn),ja=d(Dn),Ka=ot+c(Za,Ge-ja),ri=1+yr-2*Ge*ja;Dn-=xa=(Dn-cr*ot-Ge*Za+ri*Ka-.5*Xr*xt)/(2*Ge*Za*Ka)}while(E(xa)>w&&--Yn>0);an=bt*O(ri),bn=_r*Ka/l}else an=bt*(ze+Xr),bn=_r*ot/l;return[an*x(bn),At-an*d(bn)]}return lr.invert=function(_r,Rr){var Xr=_r*_r+(Rr-=At)*Rr,an=(1+yr-Xr/(bt*bt))/(2*Ge),bn=z(an),Dn=x(bn),Yn=ot+c(Dn,Ge-an);return[R(_r/O(Xr))*l/Yn,R(1-2*(bn-cr*ot-Ge*Dn+(1+yr-2*Ge*an)*Yn)/xt)]},lr}var dr=.7109889596207567,rn=.0528035274542;function ln(ze,Ge){return Ge>-dr?((ze=be(ze,Ge))[1]+=rn,ze):Ue(ze,Ge)}function Br(ze,Ge){return E(Ge)>dr?((ze=be(ze,Ge))[1]-=Ge>0?rn:-rn,ze):Ue(ze,Ge)}function Lt(ze,Ge,qe,ot){var bt=O(4*l/(2*qe+(1+ze-Ge/2)*x(2*qe)+(ze+Ge)/2*x(4*qe)+Ge/2*x(6*qe))),xt=O(ot*x(qe)*O((1+ze*d(2*qe)+Ge*d(4*qe))/(1+ze+Ge))),At=qe*yr(1);function cr(Rr){return O(1+ze*d(2*Rr)+Ge*d(4*Rr))}function yr(Rr){var Xr=Rr*qe;return(2*Xr+(1+ze-Ge/2)*x(2*Xr)+(ze+Ge)/2*x(4*Xr)+Ge/2*x(6*Xr))/qe}function lr(Rr){return cr(Rr)*x(Rr)}var _r=function(Rr,Xr){var an=qe*ge(yr,At*x(Xr)/qe,Xr/l);isNaN(an)&&(an=qe*b(Xr));var bn=bt*cr(an);return[bn*xt*Rr/l*d(an),bn/xt*x(an)]};return _r.invert=function(Rr,Xr){var an=ge(lr,Xr*xt/bt);return[Rr*l/(d(an)*bt*xt*cr(an)),R(qe*yr(an/qe)/At)]},0===qe&&(bt=O(ot/l),(_r=function(Rr,Xr){return[Rr*bt,x(Xr)/bt]}).invert=function(Rr,Xr){return[Rr/bt,R(Xr*bt)]}),_r}function Wt(ze,Ge,qe,ot,bt,xt,At,cr,yr,lr,_r){if(_r.nanEncountered)return NaN;var Rr,Xr,an,bn,Dn,Yn,xa,Za,ja,Ka;if(Xr=ze(Ge+.25*(Rr=qe-Ge)),an=ze(qe-.25*Rr),isNaN(Xr))_r.nanEncountered=!0;else{if(!isNaN(an))return Ka=((Yn=(bn=Rr*(ot+4*Xr+bt)/12)+(Dn=Rr*(bt+4*an+xt)/12))-At)/15,lr>yr?(_r.maxDepthCount++,Yn+Ka):Math.abs(Ka)<cr?Yn+Ka:(Za=Wt(ze,Ge,xa=Ge+.5*Rr,ot,Xr,bt,bn,.5*cr,yr,lr+1,_r),isNaN(Za)?(_r.nanEncountered=!0,NaN):(ja=Wt(ze,xa,qe,bt,an,xt,Dn,.5*cr,yr,lr+1,_r),isNaN(ja)?(_r.nanEncountered=!0,NaN):Za+ja));_r.nanEncountered=!0}}function hr(ze,Ge,qe,ot,bt){void 0===ot&&(ot=1e-8),void 0===bt&&(bt=20);var At=ze(Ge),cr=ze(.5*(Ge+qe)),yr=ze(qe);return Wt(ze,Ge,qe,At,cr,yr,(At+4*cr+yr)*(qe-Ge)/6,ot,bt,1,{maxDepthCount:0,nanEncountered:!1})}function vn(ze,Ge,qe){function ot(an){return ze+(1-ze)*g(1-g(an,Ge),1/Ge)}function bt(an){return hr(ot,0,an,1e-4)}for(var xt=1/bt(1),At=1e3,cr=(1+1e-8)*xt,yr=[],lr=0;lr<=At;lr++)yr.push(bt(lr/At)*cr);function _r(an){var bn=0,Dn=At,Yn=500;do{yr[Yn]>an?Dn=Yn:bn=Yn,Yn=bn+Dn>>1}while(Yn>bn);var xa=yr[Yn+1]-yr[Yn];return xa&&(xa=(an-yr[Yn+1])/xa),(Yn+1+xa)/At}var Rr=2*_r(1)/l*xt/qe,Xr=function(an,bn){var Dn=_r(E(x(bn))),Yn=ot(Dn)*an;return Dn/=Rr,[Yn,bn>=0?Dn:-Dn]};return Xr.invert=function(an,bn){var Dn;return E(bn*=Rr)<1&&(Dn=b(bn)*R(bt(E(bn))*xt)),[an/ot(E(bn)),Dn]},Xr}function Jn(ze,Ge){return E(ze[0]-Ge[0])<p&&E(ze[1]-Ge[1])<p}function _n(ze,Ge){for(var xt,At,cr,qe=-1,ot=ze.length,bt=ze[0],yr=[];++qe<ot;){At=((xt=ze[qe])[0]-bt[0])/Ge,cr=(xt[1]-bt[1])/Ge;for(var lr=0;lr<Ge;++lr)yr.push([bt[0]+lr*At,bt[1]+lr*cr]);bt=xt}return yr.push(xt),yr}function jn(ze){var qe,ot,xt,At,yr,Ge=[],lr=ze[0].length;for(yr=0;yr<lr;++yr)Ge.push(_n([[(ot=(qe=ze[0][yr])[0][0])+p,qe[0][1]+p],[ot+p,(xt=qe[1][1])-p],[(At=qe[2][0])-p,xt-p],[At-p,qe[2][1]+p]],30));for(yr=ze[1].length-1;yr>=0;--yr)Ge.push(_n([[(At=(qe=ze[1][yr])[2][0])-p,qe[2][1]-p],[At-p,(xt=qe[1][1])+p],[(ot=qe[0][0])+p,xt+p],[ot+p,qe[0][1]-p]],30));return{type:"Polygon",coordinates:[m.merge(Ge)]}}function ia(ze,Ge,qe){var ot,bt;function xt(yr,lr){for(var _r=lr<0?-1:1,Rr=Ge[+(lr<0)],Xr=0,an=Rr.length-1;Xr<an&&yr>Rr[Xr][2][0];++Xr);var bn=ze(yr-Rr[Xr][1][0],lr);return bn[0]+=ze(Rr[Xr][1][0],_r*lr>_r*Rr[Xr][0][1]?Rr[Xr][0][1]:lr)[0],bn}qe?xt.invert=qe(xt):ze.invert&&(xt.invert=function(yr,lr){for(var _r=bt[+(lr<0)],Rr=Ge[+(lr<0)],Xr=0,an=_r.length;Xr<an;++Xr){var bn=_r[Xr];if(bn[0][0]<=yr&&yr<bn[1][0]&&bn[0][1]<=lr&&lr<bn[1][1]){var Dn=ze.invert(yr-ze(Rr[Xr][1][0],0)[0],lr);return Dn[0]+=Rr[Xr][1][0],Jn(xt(Dn[0],Dn[1]),[yr,lr])?Dn:null}}});var At=k.geoProjection(xt),cr=At.stream;return At.stream=function(yr){var lr=At.rotate(),_r=cr(yr),Rr=(At.rotate([0,0]),cr(yr));return At.rotate(lr),_r.sphere=function(){k.geoStream(ot,Rr)},_r},At.lobes=function(yr){return arguments.length?(ot=jn(yr),Ge=yr.map(function(lr){return lr.map(function(_r){return[[_r[0][0]*o,_r[0][1]*o],[_r[1][0]*o,_r[1][1]*o],[_r[2][0]*o,_r[2][1]*o]]})}),bt=Ge.map(function(lr){return lr.map(function(_r){var Dn,Rr=ze(_r[0][0],_r[0][1])[0],Xr=ze(_r[2][0],_r[2][1])[0],an=ze(_r[1][0],_r[0][1])[1],bn=ze(_r[1][0],_r[1][1])[1];return an>bn&&(Dn=an,an=bn,bn=Dn),[[Rr,an],[Xr,bn]]})}),At):Ge.map(function(lr){return lr.map(function(_r){return[[_r[0][0]*h,_r[0][1]*h],[_r[1][0]*h,_r[1][1]*h],[_r[2][0]*h,_r[2][1]*h]]})})},null!=Ge&&At.lobes(Ge),At}ln.invert=function(ze,Ge){return Ge>-dr?be.invert(ze,Ge-rn):Ue.invert(ze,Ge)},Br.invert=function(ze,Ge){return E(Ge)>dr?be.invert(ze,Ge+(Ge>0?rn:-rn)):Ue.invert(ze,Ge)};var va=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];var sa=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];var xo=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];var Io=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];var Jl=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];var gi=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Hs(ze,Ge){return[3/u*ze*O(l*l/3-Ge*Ge),Ge]}function Mo(ze){function Ge(qe,ot){if(E(E(ot)-y)<p)return[0,ot<0?-2:2];var bt=x(ot),xt=g((1+bt)/(1-bt),ze/2),At=.5*(xt+1/xt)+d(qe*=ze);return[2*x(qe)/At,(xt-1/xt)/At]}return Ge.invert=function(qe,ot){var bt=E(ot);if(E(bt-2)<p)return qe?null:[0,b(ot)*y];if(bt>2)return null;var xt=(qe/=2)*qe,At=(ot/=2)*ot,cr=2*ot/(1+xt+At);return cr=g((1+cr)/(1-cr),1/ze),[c(2*qe,1-xt-At)/ze,R((cr-1)/(cr+1))]},Ge}Hs.invert=function(ze,Ge){return[u/3*ze/O(l*l/3-Ge*Ge),Ge]};var Uo=l/M;function ro(ze,Ge){return[ze*(1+O(d(Ge)))/2,Ge/(d(Ge/2)*d(ze/6))]}function no(ze,Ge){var qe=ze*ze,ot=Ge*Ge;return[ze*(.975534+ot*(-.0143059*qe-.119161+-.0547009*ot)),Ge*(1.00384+qe*(.0802894+-.02855*ot+199025e-9*qe)+ot*(.0998909+-.0491032*ot))]}function So(ze,Ge){return[x(ze)/d(Ge),S(Ge)*d(ze)]}function Qo(ze){var Ge=d(ze),qe=S(A+ze/2);function ot(bt,xt){var At=xt-ze,cr=E(At)<p?bt*Ge:E(cr=A+xt/2)<p||E(E(cr)-y)<p?0:bt*At/i(S(cr)/qe);return[cr,At]}return ot.invert=function(bt,xt){var At,cr=xt+ze;return[E(xt)<p?bt/Ge:E(At=A+cr/2)<p||E(E(At)-y)<p?0:bt*i(S(At)/qe)/xt,cr]},ot}function Tl(ze,Ge){return[ze,1.25*i(S(A+.4*Ge))]}function ku(ze){var Ge=ze.length-1;function qe(ot,bt){for(var an,xt=d(bt),At=2/(1+xt*d(ot)),cr=At*xt*x(ot),yr=At*x(bt),lr=Ge,_r=ze[lr],Rr=_r[0],Xr=_r[1];--lr>=0;)Rr=(_r=ze[lr])[0]+cr*(an=Rr)-yr*Xr,Xr=_r[1]+cr*Xr+yr*an;return[Rr=cr*(an=Rr)-yr*Xr,Xr=cr*Xr+yr*an]}return qe.invert=function(ot,bt){var xt=20,At=ot,cr=bt;do{for(var bn,yr=Ge,lr=ze[yr],_r=lr[0],Rr=lr[1],Xr=0,an=0;--yr>=0;)Xr=_r+At*(bn=Xr)-cr*an,an=Rr+At*an+cr*bn,_r=(lr=ze[yr])[0]+At*(bn=_r)-cr*Rr,Rr=lr[1]+At*Rr+cr*bn;var Yn,xa,Dn=(Xr=_r+At*(bn=Xr)-cr*an)*Xr+(an=Rr+At*an+cr*bn)*an;At-=Yn=((_r=At*(bn=_r)-cr*Rr-ot)*Xr+(Rr=At*Rr+cr*bn-bt)*an)/Dn,cr-=xa=(Rr*Xr-_r*an)/Dn}while(E(Yn)+E(xa)>p*p&&--xt>0);if(xt){var Za=O(At*At+cr*cr),ja=2*e(.5*Za),Ka=x(ja);return[c(At*Ka,Za*d(ja)),Za?R(cr*Ka/Za):0]}},qe}ro.invert=function(ze,Ge){var qe=E(ze),ot=E(Ge),bt=p,xt=y;ot<Uo?xt*=ot/Uo:bt+=6*z(Uo/ot);for(var At=0;At<25;At++){var cr=x(xt),yr=O(d(xt)),lr=x(xt/2),_r=d(xt/2),Rr=x(bt/6),Xr=d(bt/6),an=.5*bt*(1+yr)-qe,bn=xt/(_r*Xr)-ot,Dn=yr?-.25*bt*cr/yr:0,Yn=.5*(1+yr),xa=(1+.5*xt*lr/_r)/(_r*Xr),Za=xt/_r*(Rr/6)/(Xr*Xr),ja=Dn*Za-xa*Yn,Ka=(an*Za-bn*Yn)/ja,ri=(bn*Dn-an*xa)/ja;if(xt-=Ka,bt-=ri,E(Ka)<p&&E(ri)<p)break}return[ze<0?-bt:bt,Ge<0?-xt:xt]},no.invert=function(ze,Ge){var qe=b(ze)*l,ot=Ge/2,bt=50;do{var xt=qe*qe,At=ot*ot,cr=qe*ot,yr=qe*(.975534+At*(-.0143059*xt-.119161+-.0547009*At))-ze,lr=ot*(1.00384+xt*(.0802894+-.02855*At+199025e-9*xt)+At*(.0998909+-.0491032*At))-Ge,_r=.975534-At*(.119161+3*xt*.0143059+.0547009*At),Rr=-cr*(.238322+.2188036*At+.0286118*xt),Xr=cr*(.1605788+7961e-7*xt+-.0571*At),an=1.00384+xt*(.0802894+199025e-9*xt)+At*(3*(.0998909-.02855*xt)-.245516*At),bn=Rr*Xr-an*_r,Dn=(lr*Rr-yr*an)/bn,Yn=(yr*Xr-lr*_r)/bn;qe-=Dn,ot-=Yn}while((E(Dn)>p||E(Yn)>p)&&--bt>0);return bt&&[qe,ot]},So.invert=function(ze,Ge){var qe=ze*ze,bt=Ge*Ge+1,xt=qe+bt,At=ze?T*O((xt-O(xt*xt-4*qe))/qe):1/O(bt);return[R(ze*At),b(Ge)*z(At)]},Tl.invert=function(ze,Ge){return[ze,2.5*e(n(.8*Ge))-.625*l]};var Zs=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],ko=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],pu=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],bs=[[.9245,0],[0,0],[.01943,0]],_s=[[.721316,0],[0,0],[-.00881625,-.00617325]];function ws(ze,Ge){var qe=k.geoProjection(ku(ze)).rotate(Ge).clipAngle(90),ot=k.geoRotation(Ge),bt=qe.center;return delete qe.rotate,qe.center=function(xt){return arguments.length?bt(ot(xt)):ot.invert(bt())},qe}var Kl=O(6),al=O(7);function Ql(ze,Ge){var qe=R(7*x(Ge)/(3*Kl));return[Kl*ze*(2*d(2*qe/3)-1)/al,9*x(qe/3)/al]}function $l(ze,Ge){for(var xt,qe=(1+T)*x(Ge),ot=Ge,bt=0;bt<25&&(ot-=xt=(x(ot/2)+x(ot)-qe)/(.5*d(ot/2)+d(ot)),!(E(xt)<p));bt++);return[ze*(1+2*d(ot)/d(ot/2))/(3*M),2*O(3)*x(ot/2)/O(2+M)]}function Ws(ze,Ge){for(var At,qe=O(6/(4+l)),ot=(1+l/4)*x(Ge),bt=Ge/2,xt=0;xt<25&&(bt-=At=(bt/2+x(bt)-ot)/(.5+d(bt)),!(E(At)<p));xt++);return[qe*(.5+d(bt))*ze/1.5,qe*bt]}function Al(ze,Ge){var qe=Ge*Ge,ot=qe*qe,bt=qe*ot;return[ze*(.84719-.13063*qe+bt*bt*(.05494*qe-.04515-.02326*ot+.00331*bt)),Ge*(1.01183+ot*ot*(.01926*qe-.02625-.00396*ot))]}function Ml(ze,Ge){return[ze*(1+d(Ge))/2,2*(Ge-S(Ge/2))]}Ql.invert=function(ze,Ge){var qe=3*R(Ge*al/9);return[ze*al/(Kl*(2*d(2*qe/3)-1)),R(3*x(qe)*Kl/7)]},$l.invert=function(ze,Ge){var qe=Ge*O(2+M)/(2*O(3)),ot=2*R(qe);return[3*M*ze/(1+2*d(ot)/d(ot/2)),R((qe+x(ot))/(1+T))]},Ws.invert=function(ze,Ge){var qe=O(6/(4+l)),ot=Ge/qe;return E(E(ot)-y)<p&&(ot=ot<0?-y:y),[1.5*ze/(qe*(.5+d(ot))),R((ot/2+x(ot))/(1+l/4))]},Al.invert=function(ze,Ge){var bt,xt,At,cr,qe=Ge,ot=25;do{qe-=bt=(qe*(1.01183+(At=(xt=qe*qe)*xt)*At*(.01926*xt-.02625-.00396*At))-Ge)/(1.01183+At*At*(.21186*xt-.23625+-.05148*At))}while(E(bt)>w&&--ot>0);return[ze/(.84719-.13063*(xt=qe*qe)+(cr=xt*(At=xt*xt))*cr*(.05494*xt-.04515-.02326*At+.00331*cr)),qe]},Ml.invert=function(ze,Ge){for(var qe=Ge/2,ot=0,bt=1/0;ot<10&&E(bt)>p;++ot){var xt=d(Ge/2);Ge-=bt=(Ge-S(Ge/2)-qe)/(1-.5/(xt*xt))}return[2*ze/(1+d(Ge)),Ge]};var Xs=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function eu(ze,Ge){var qe=x(Ge),ot=d(Ge),bt=b(ze);if(0===ze||E(Ge)===y)return[0,Ge];if(0===Ge)return[ze,0];if(E(ze)===y)return[ze*ot,y*qe];var xt=l/(2*ze)-2*ze/l,At=2*Ge/l,cr=(1-At*At)/(qe-At),yr=xt*xt,lr=cr*cr,_r=1+yr/lr,Rr=1+lr/yr,Xr=(xt*qe/cr-xt/2)/_r,an=(lr*qe/yr+cr/2)/Rr,Dn=an*an-(lr*qe*qe/yr+cr*qe-1)/Rr;return[y*(Xr+O(Xr*Xr+ot*ot/_r)*bt),y*(an+O(Dn<0?0:Dn)*b(-Ge*xt)*bt)]}eu.invert=function(ze,Ge){var qe=(ze/=y)*ze,bt=qe+(Ge/=y)*Ge,xt=l*l;return[ze?(bt-1+O((1-bt)*(1-bt)+4*qe))/(2*ze)*y:0,ge(function(At){return bt*(l*x(At)-2*At)*l+4*At*At*(Ge-x(At))+2*l*At-xt*Ge},0)]};var gu=1.0148,Go=.23185,Sl=-.14499,ol=.02406,Ls=1.790857183;function Ts(ze,Ge){var qe=Ge*Ge;return[ze,Ge*(gu+qe*qe*(Go+qe*(Sl+ol*qe)))]}function sl(ze,Ge){if(E(Ge)<p)return[ze,0];var qe=S(Ge),ot=ze*x(Ge);return[x(ot)/qe,Ge+(1-d(ot))/qe]}function ru(ze,Ge){var qe=hs(ze[1],ze[0]),ot=hs(Ge[1],Ge[0]),bt=function kl(ze,Ge){return c(ze[0]*Ge[1]-ze[1]*Ge[0],ze[0]*Ge[0]+ze[1]*Ge[1])}(qe,ot),xt=Zo(qe)/Zo(ot);return As([1,0,ze[0][0],0,1,ze[0][1]],As([xt,0,0,0,xt,0],As([d(bt),x(bt),0,-x(bt),d(bt),0],[1,0,-Ge[0][0],0,1,-Ge[0][1]])))}function Ru(ze){var Ge=1/(ze[0]*ze[4]-ze[1]*ze[3]);return[Ge*ze[4],-Ge*ze[1],Ge*(ze[1]*ze[5]-ze[2]*ze[4]),-Ge*ze[3],Ge*ze[0],Ge*(ze[2]*ze[3]-ze[0]*ze[5])]}function As(ze,Ge){return[ze[0]*Ge[0]+ze[1]*Ge[3],ze[0]*Ge[1]+ze[1]*Ge[4],ze[0]*Ge[2]+ze[1]*Ge[5]+ze[2],ze[3]*Ge[0]+ze[4]*Ge[3],ze[3]*Ge[1]+ze[4]*Ge[4],ze[3]*Ge[2]+ze[4]*Ge[5]+ze[5]]}function hs(ze,Ge){return[ze[0]-Ge[0],ze[1]-Ge[1]]}function Zo(ze){return O(ze[0]*ze[0]+ze[1]*ze[1])}function ll(ze,Ge,qe){function bt(lr,_r){var an,Rr=Ge(lr,_r),Xr=Rr.project([lr*h,_r*h]);return(an=Rr.transform)?[an[0]*Xr[0]+an[1]*Xr[1]+an[2],-(an[3]*Xr[0]+an[4]*Xr[1]+an[5])]:(Xr[1]=-Xr[1],Xr)}function xt(lr,_r){var Rr=lr.project.invert,Xr=lr.transform,an=_r;if(Xr&&(an=[(Xr=Ru(Xr))[0]*an[0]+Xr[1]*an[1]+Xr[2],Xr[3]*an[0]+Xr[4]*an[1]+Xr[5]]),Rr&&lr===function At(lr){return Ge(lr[0]*o,lr[1]*o)}(bn=Rr(an)))return bn;for(var bn,Dn=lr.children,Yn=0,xa=Dn&&Dn.length;Yn<xa;++Yn)if(bn=xt(Dn[Yn],_r))return bn}(function ot(lr,_r){if(lr.edges=function nu(ze){for(var Ge=ze.length,qe=[],ot=ze[Ge-1],bt=0;bt<Ge;++bt)qe.push([ot,ot=ze[bt]]);return qe}(lr.face),_r.face){var Rr=lr.shared=function zu(ze,Ge){for(var qe,ot,bt=ze.length,xt=null,At=0;At<bt;++At){qe=ze[At];for(var cr=Ge.length;--cr>=0;)if(qe[0]===(ot=Ge[cr])[0]&&qe[1]===ot[1]){if(xt)return[xt,qe];xt=qe}}}(lr.face,_r.face),Xr=ru(Rr.map(_r.project),Rr.map(lr.project));lr.transform=_r.transform?As(_r.transform,Xr):Xr;for(var an=_r.edges,bn=0,Dn=an.length;bn<Dn;++bn)as(Rr[0],an[bn][1])&&as(Rr[1],an[bn][0])&&(an[bn]=lr),as(Rr[0],an[bn][0])&&as(Rr[1],an[bn][1])&&(an[bn]=lr);for(bn=0,Dn=(an=lr.edges).length;bn<Dn;++bn)as(Rr[0],an[bn][0])&&as(Rr[1],an[bn][1])&&(an[bn]=_r),as(Rr[0],an[bn][1])&&as(Rr[1],an[bn][0])&&(an[bn]=_r)}else lr.transform=_r.transform;return lr.children&&lr.children.forEach(function(Yn){ot(Yn,lr)}),lr})(ze,{transform:null}),ul(ze)&&(bt.invert=function(lr,_r){var Rr=xt(ze,[lr,-_r]);return Rr&&(Rr[0]*=o,Rr[1]*=o,Rr)});var cr=k.geoProjection(bt),yr=cr.stream;return cr.stream=function(lr){var _r=cr.rotate(),Rr=yr(lr),Xr=(cr.rotate([0,0]),yr(lr));return cr.rotate(_r),Rr.sphere=function(){Xr.polygonStart(),Xr.lineStart(),Iu(Xr,ze),Xr.lineEnd(),Xr.polygonEnd()},Rr},cr.angle(null==qe?-30:qe*h)}function Iu(ze,Ge,qe){var ot,At,bt=Ge.edges,xt=bt.length,cr={type:"MultiPoint",coordinates:Ge.face},yr=Ge.face.filter(function(Dn){return 90!==E(Dn[1])}),lr=k.geoBounds({type:"MultiPoint",coordinates:yr}),_r=!1,Rr=-1,Xr=lr[1][0]-lr[0][0],an=180===Xr||360===Xr?[(lr[0][0]+lr[1][0])/2,(lr[0][1]+lr[1][1])/2]:k.geoCentroid(cr);if(qe)for(;++Rr<xt&&bt[Rr]!==qe;);++Rr;for(var bn=0;bn<xt;++bn)At=bt[(bn+Rr)%xt],Array.isArray(At)?(_r||(ze.point((ot=k.geoInterpolate(At[0],an)(p))[0],ot[1]),_r=!0),ze.point((ot=k.geoInterpolate(At[1],an)(p))[0],ot[1])):(_r=!1,At!==qe&&Iu(ze,At,Ge))}function as(ze,Ge){return ze&&Ge&&ze[0]===Ge[0]&&ze[1]===Ge[1]}function ul(ze){return ze.project.invert||ze.children&&ze.children.some(ul)}Ts.invert=function(ze,Ge){Ge>Ls?Ge=Ls:Ge<-Ls&&(Ge=-Ls);var ot,qe=Ge;do{var bt=qe*qe;qe-=ot=(qe*(gu+bt*bt*(Go+bt*(Sl+ol*bt)))-Ge)/(1.0148+bt*bt*(1.1592500000000001+bt*(.21654*bt-1.01493)))}while(E(ot)>p);return[ze,qe]},sl.invert=function(ze,Ge){if(E(Ge)<p)return[ze,0];var xt,qe=ze*ze+Ge*Ge,ot=.5*Ge,bt=10;do{var At=S(ot),cr=1/d(ot),yr=qe-2*Ge*ot+ot*ot;ot-=xt=(At*yr+2*(ot-Ge))/(2+yr*cr*cr+2*(ot-Ge)*At)}while(E(xt)>p&&--bt>0);return At=S(ot),[(E(Ge)<E(ot+1/At)?R(ze*At):b(Ge)*b(ze)*(z(E(ze*At))+y))/x(ot),ot]};var au=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Cl=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(ze){return ze.map(function(Ge){return au[Ge]})});var Ul=2/O(3);function Vl(ze,Ge){var qe=Ze(ze,Ge);return[qe[0]*Ul,qe[1]]}function cl(ze,Ge){for(var qe=0,ot=ze.length,bt=0;qe<ot;++qe)bt+=ze[qe]*Ge[qe];return bt}function js(ze,Ge){return[ze[1]*Ge[2]-ze[2]*Ge[1],ze[2]*Ge[0]-ze[0]*Ge[2],ze[0]*Ge[1]-ze[1]*Ge[0]]}function is(ze){return[c(ze[1],ze[0])*h,R(a(-1,r(1,ze[2])))*h]}function vs(ze){var Ge=ze[0]*o,qe=ze[1]*o,ot=d(qe);return[ot*d(Ge),ot*x(Ge),x(qe)]}function Hl(){}function Ps(ze,Ge){return{type:"FeatureCollection",features:ze.features.map(function(qe){return Js(qe,Ge)})}}function Js(ze,Ge){return{type:"Feature",id:ze.id,properties:ze.properties,geometry:ps(ze.geometry,Ge)}}function ps(ze,Ge){if(!ze)return null;if("GeometryCollection"===ze.type)return function Ds(ze,Ge){return{type:"GeometryCollection",geometries:ze.geometries.map(function(qe){return ps(qe,Ge)})}}(ze,Ge);var qe;switch(ze.type){case"Point":case"MultiPoint":qe=Yo;break;case"LineString":case"MultiLineString":qe=Gl;break;case"Polygon":case"MultiPolygon":case"Sphere":qe=Zl;break;default:return null}return k.geoStream(ze,Ge(qe)),qe.result()}Vl.invert=function(ze,Ge){return Ze.invert(ze/Ul,Ge)};var Ji=[],bo=[],Yo={point:function(ze,Ge){Ji.push([ze,Ge])},result:function(){var ze=Ji.length?Ji.length<2?{type:"Point",coordinates:Ji[0]}:{type:"MultiPoint",coordinates:Ji}:null;return Ji=[],ze}},Gl={lineStart:Hl,point:function(ze,Ge){Ji.push([ze,Ge])},lineEnd:function(){Ji.length&&(bo.push(Ji),Ji=[])},result:function(){var ze=bo.length?bo.length<2?{type:"LineString",coordinates:bo[0]}:{type:"MultiLineString",coordinates:bo}:null;return bo=[],ze}},Zl={polygonStart:Hl,lineStart:Hl,point:function(ze,Ge){Ji.push([ze,Ge])},lineEnd:function(){var ze=Ji.length;if(ze){do{Ji.push(Ji[0].slice())}while(++ze<4);bo.push(Ji),Ji=[]}},polygonEnd:Hl,result:function(){if(!bo.length)return null;var ze=[],Ge=[];return bo.forEach(function(qe){!function uo(ze){if((qe=ze.length)<4)return!1;for(var qe,Ge=0,ot=ze[qe-1][1]*ze[0][0]-ze[qe-1][0]*ze[0][1];++Ge<qe;)ot+=ze[Ge-1][1]*ze[Ge][0]-ze[Ge-1][0]*ze[Ge][1];return ot<=0}(qe)?Ge.push(qe):ze.push([qe])}),Ge.forEach(function(qe){var ot=qe[0];ze.some(function(bt){if(function iu(ze,Ge){for(var qe=Ge[0],ot=Ge[1],bt=!1,xt=0,At=ze.length,cr=At-1;xt<At;cr=xt++){var yr=ze[xt],lr=yr[0],_r=yr[1],Rr=ze[cr],an=Rr[1];_r>ot^an>ot&&qe<(Rr[0]-lr)*(ot-_r)/(an-_r)+lr&&(bt=!bt)}return bt}(bt[0],ot))return bt.push(qe),!0})||ze.push([qe])}),bo=[],ze.length?ze.length>1?{type:"MultiPolygon",coordinates:ze}:{type:"Polygon",coordinates:ze[0]}:null}};function yu(ze){var Ge=ze(y,0)[0]-ze(-y,0)[0];function qe(ot,bt){var xt=E(ot)<y,At=ze(xt?ot:ot>0?ot-l:ot+l,bt),cr=(At[0]-At[1])*T,yr=(At[0]+At[1])*T;if(xt)return[cr,yr];var lr=Ge*T,_r=cr>0^yr>0?-1:1;return[_r*cr-b(yr)*lr,_r*yr-b(cr)*lr]}return ze.invert&&(qe.invert=function(ot,bt){var xt=(ot+bt)*T,At=(bt-ot)*T,cr=E(xt)<.5*Ge&&E(At)<.5*Ge;if(!cr){var yr=Ge*T,lr=xt>0^At>0?-1:1,_r=-lr*ot+(At>0?1:-1)*yr,Rr=-lr*bt+(xt>0?1:-1)*yr;xt=(-_r-Rr)*T,At=(_r-Rr)*T}var Xr=ze.invert(xt,At);return cr||(Xr[0]+=xt>0?l:-l),Xr}),k.geoProjection(qe).rotate([-90,-90,45]).clipAngle(179.999)}function Ot(){return yu(wa).scale(111.48)}function sr(ze){var Ge=x(ze);function qe(ot,bt){var xt=Ge?S(ot*Ge/2)/Ge:ot/2;if(!bt)return[2*xt,-ze];var At=2*e(xt*x(bt)),cr=1/S(bt);return[x(At)*cr,bt+(1-d(At))*cr-ze]}return qe.invert=function(ot,bt){if(E(bt+=ze)<p)return[Ge?2*e(Ge*ot/2)/Ge:ot,0];var yr,xt=ot*ot+bt*bt,At=0,cr=10;do{var lr=S(At),_r=1/d(At),Rr=xt-2*bt*At+At*At;At-=yr=(lr*Rr+2*(At-bt))/(2+Rr*_r*_r+2*(At-bt)*lr)}while(E(yr)>p&&--cr>0);var Xr=ot*(lr=S(At)),an=S(E(bt)<E(At+1/lr)?.5*R(Xr):.5*z(Xr)+l/4)/x(At);return[Ge?2*e(Ge*an)/Ge:2*an,At]},qe}var un=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function yn(ze,Ge){var Rr,qe=r(18,36*E(Ge)/l),ot=t(qe),bt=qe-ot,xt=(Rr=un[ot])[0],At=Rr[1],cr=(Rr=un[++ot])[0],yr=Rr[1],lr=(Rr=un[r(19,++ot)])[0],_r=Rr[1];return[ze*(cr+bt*(lr-xt)/2+bt*bt*(lr-2*cr+xt)/2),(Ge>0?y:-y)*(yr+bt*(_r-At)/2+bt*bt*(_r-2*yr+At)/2)]}function Bn(ze,Ge){var qe=function En(ze){function Ge(qe,ot){var bt=d(ot),xt=(ze-1)/(ze-bt*d(qe));return[xt*bt*x(qe),xt*x(ot)]}return Ge.invert=function(qe,ot){var bt=qe*qe+ot*ot,xt=O(bt),At=(ze-O(1-bt*(ze+1)/(ze-1)))/((ze-1)/xt+xt/(ze-1));return[c(qe*At,xt*O(1-At*At)),xt?R(ot*At/xt):0]},Ge}(ze);if(!Ge)return qe;var ot=d(Ge),bt=x(Ge);function xt(At,cr){var yr=qe(At,cr),lr=yr[1],_r=lr*bt/(ze-1)+ot;return[yr[0]*ot/_r,lr/_r]}return xt.invert=function(At,cr){var yr=(ze-1)/(ze-1-cr*bt);return qe.invert(yr*At,yr*cr*ot)},xt}un.forEach(function(ze){ze[1]*=1.0144}),yn.invert=function(ze,Ge){var qe=Ge/y,ot=90*qe,bt=r(18,E(ot/5)),xt=a(0,t(bt));do{var At=un[xt][1],cr=un[xt+1][1],yr=un[r(19,xt+2)][1],lr=yr-At,_r=yr-2*cr+At,Rr=2*(E(qe)-cr)/lr,Xr=_r/lr,an=Rr*(1-Xr*Rr*(1-2*Xr*Rr));if(an>=0||1===xt){ot=(Ge>=0?5:-5)*(an+bt);var Dn,bn=50;do{an=(bt=r(18,E(ot)/5))-(xt=t(bt)),At=un[xt][1],cr=un[xt+1][1],yr=un[r(19,xt+2)][1],ot-=(Dn=(Ge>=0?y:-y)*(cr+an*(yr-At)/2+an*an*(yr-2*cr+At)/2)-Ge)*h}while(E(Dn)>w&&--bn>0);break}}while(--xt>=0);var Yn=un[xt][0],xa=un[xt+1][0],Za=un[r(19,xt+2)][0];return[ze/(xa+an*(Za-Yn)/2+an*an*(Za-2*xa+Yn)/2),ot*o]};var zn=1e-4,ea=-180+zn,Ea=180-zn,Ba=-90+zn,ca=90-zn;function Xa(ze){return ze.length>0}function qa(ze){return Math.floor(1e4*ze)/1e4}function _i(ze){return-90===ze||90===ze?[0,ze]:[-180,qa(ze)]}function yi(ze){var Ge=ze[0],qe=ze[1],ot=!1;return Ge<=ea?(Ge=-180,ot=!0):Ge>=Ea&&(Ge=180,ot=!0),qe<=Ba?(qe=-90,ot=!0):qe>=ca&&(qe=90,ot=!0),ot?[Ge,qe]:ze}function mi(ze){return ze.map(yi)}function Pi(ze,Ge,qe){for(var ot=0,bt=ze.length;ot<bt;++ot){var xt=ze[ot].slice();qe.push({index:-1,polygon:Ge,ring:xt});for(var At=0,cr=xt.length;At<cr;++At){var yr=xt[At],lr=yr[0],_r=yr[1];if(lr<=ea||lr>=Ea||_r<=Ba||_r>=ca){xt[At]=yi(yr);for(var Rr=At+1;Rr<cr;++Rr){var Xr=xt[Rr],an=Xr[0],bn=Xr[1];if(an>ea&&an<Ea&&bn>Ba&&bn<ca)break}if(Rr===At+1)continue;if(At){var Dn={index:-1,polygon:Ge,ring:xt.slice(0,At+1)};Dn.ring[Dn.ring.length-1]=_i(_r),qe[qe.length-1]=Dn}else qe.pop();if(Rr>=cr)break;qe.push({index:-1,polygon:Ge,ring:xt=xt.slice(Rr-1)}),xt[0]=_i(xt[0][1]),At=-1,cr=xt.length}}}}function ci(ze){var Ge,xt,At,cr,yr,lr,qe=ze.length,ot={},bt={};for(Ge=0;Ge<qe;++Ge)(At=(xt=ze[Ge]).ring[0])[0]!==(yr=xt.ring[xt.ring.length-1])[0]||At[1]!==yr[1]?(xt.index=Ge,ot[At]=bt[yr]=xt):(xt.polygon.push(xt.ring),ze[Ge]=null);for(Ge=0;Ge<qe;++Ge)if(xt=ze[Ge]){if(cr=bt[At=xt.ring[0]],lr=ot[yr=xt.ring[xt.ring.length-1]],delete ot[At],delete bt[yr],At[0]===yr[0]&&At[1]===yr[1]){xt.polygon.push(xt.ring);continue}cr?(delete bt[At],delete ot[cr.ring[0]],cr.ring.pop(),ze[cr.index]=null,xt={index:-1,polygon:cr.polygon,ring:cr.ring.concat(xt.ring)},cr===lr?xt.polygon.push(xt.ring):(xt.index=qe++,ze.push(ot[xt.ring[0]]=bt[xt.ring[xt.ring.length-1]]=xt))):lr?(delete ot[yr],delete bt[lr.ring[lr.ring.length-1]],xt.ring.pop(),xt={index:qe++,polygon:lr.polygon,ring:xt.ring.concat(lr.ring)},ze[lr.index]=null,ze.push(ot[xt.ring[0]]=bt[xt.ring[xt.ring.length-1]]=xt)):(xt.ring.push(xt.ring[0]),xt.polygon.push(xt.ring))}}function _o(ze){var Ge={type:"Feature",geometry:io(ze.geometry)};return null!=ze.id&&(Ge.id=ze.id),null!=ze.bbox&&(Ge.bbox=ze.bbox),null!=ze.properties&&(Ge.properties=ze.properties),Ge}function io(ze){if(null==ze)return ze;var Ge,qe,ot,bt;switch(ze.type){case"GeometryCollection":Ge={type:"GeometryCollection",geometries:ze.geometries.map(io)};break;case"Point":Ge={type:"Point",coordinates:yi(ze.coordinates)};break;case"MultiPoint":case"LineString":Ge={type:ze.type,coordinates:mi(ze.coordinates)};break;case"MultiLineString":Ge={type:"MultiLineString",coordinates:ze.coordinates.map(mi)};break;case"Polygon":var xt=[];Pi(ze.coordinates,xt,qe=[]),ci(qe),Ge={type:"Polygon",coordinates:xt};break;case"MultiPolygon":qe=[],ot=-1,bt=ze.coordinates.length;for(var At=new Array(bt);++ot<bt;)Pi(ze.coordinates[ot],At[ot]=[],qe);ci(qe),Ge={type:"MultiPolygon",coordinates:At.filter(Xa)};break;default:return ze}return null!=ze.bbox&&(Ge.bbox=ze.bbox),Ge}function fa(ze,Ge){var qe=S(Ge/2),ot=x(A*qe);return[ze*(.74482-.34588*ot*ot),1.70711*qe]}function fo(ze,Ge,qe){var ot=k.geoInterpolate(Ge,qe),bt=ot(.5),xt=k.geoRotation([-bt[0],-bt[1]])(Ge),At=ot.distance/2,cr=-R(x(xt[1]*o)/x(At)),yr=[-bt[0],-bt[1],-(xt[0]>0?l-cr:cr)*h],lr=k.geoProjection(ze(At)).rotate(yr),_r=k.geoRotation(yr),Rr=lr.center;return delete lr.rotate,lr.center=function(Xr){return arguments.length?Rr(_r(Xr)):_r.invert(Rr())},lr.clipAngle(90)}function yo(ze){var Ge=d(ze);function qe(ot,bt){var xt=k.geoGnomonicRaw(ot,bt);return xt[0]*=Ge,xt}return qe.invert=function(ot,bt){return k.geoGnomonicRaw.invert(ot/Ge,bt)},qe}function Ms(ze,Ge){return fo(yo,ze,Ge)}function ss(ze){if(!(ze*=2))return k.geoAzimuthalEquidistantRaw;var Ge=-ze/2,qe=-Ge,ot=ze*ze,bt=S(qe),xt=.5/x(qe);function At(cr,yr){var lr=z(d(yr)*d(cr-Ge)),_r=z(d(yr)*d(cr-qe));return[((lr*=lr)-(_r*=_r))/(2*ze),(yr<0?-1:1)*O(4*ot*_r-(ot-lr+_r)*(ot-lr+_r))/(2*ze)]}return At.invert=function(cr,yr){var Xr,an,lr=yr*yr,_r=d(O(lr+(Xr=cr+Ge)*Xr)),Rr=d(O(lr+(Xr=cr+qe)*Xr));return[c(an=_r-Rr,Xr=(_r+Rr)*bt),(yr<0?-1:1)*z(O(Xr*Xr+an*an)*xt)]},At}function ds(ze,Ge){return fo(ss,ze,Ge)}function gs(ze,Ge){if(E(Ge)<p)return[ze,0];var qe=E(Ge/y),ot=R(qe);if(E(ze)<p||E(E(Ge)-y)<p)return[0,b(Ge)*l*S(ot/2)];var bt=d(ot),xt=E(l/ze-ze/l)/2,At=xt*xt,cr=bt/(qe+bt-1),yr=cr*(2/qe-1),lr=yr*yr,_r=lr+At,Rr=cr-lr,Xr=At+cr;return[b(ze)*l*(xt*Rr+O(At*Rr*Rr-_r*(cr*cr-lr)))/_r,b(Ge)*l*(yr*Xr-xt*O((At+1)*_r-Xr*Xr))/_r]}function hl(ze,Ge){if(E(Ge)<p)return[ze,0];var qe=E(Ge/y),ot=R(qe);if(E(ze)<p||E(E(Ge)-y)<p)return[0,b(Ge)*l*S(ot/2)];var bt=d(ot),xt=E(l/ze-ze/l)/2,At=xt*xt,cr=bt*(O(1+At)-xt*bt)/(1+At*qe*qe);return[b(ze)*l*cr,b(Ge)*l*O(1-cr*(2*xt+cr))]}function ys(ze,Ge){if(E(Ge)<p)return[ze,0];var qe=Ge/y,ot=R(qe);if(E(ze)<p||E(E(Ge)-y)<p)return[0,l*S(ot/2)];var bt=(l/ze-ze/l)/2,xt=qe/(1+d(ot));return[l*(b(ze)*O(bt*bt+1-xt*xt)-bt),l*xt]}function pl(ze,Ge){if(!Ge)return[ze,0];var qe=E(Ge);if(!ze||qe===y)return[0,Ge];var ot=qe/y,bt=ot*ot,xt=(8*ot-bt*(bt+2)-5)/(2*bt*(ot-1)),At=xt*xt,cr=ot*xt,yr=bt+At+2*cr,lr=ot+3*xt,_r=ze/y,Rr=_r+1/_r,Xr=b(E(ze)-y)*O(Rr*Rr-4),an=Xr*Xr,Dn=(Xr*(yr+At-1)+2*O(yr*(bt+At*an-1)+(1-bt)*(bt*(lr*lr+4*At)+12*cr*At+4*At*At)))/(4*yr+an);return[b(ze)*y*Dn,b(Ge)*y*O(1+Xr*E(Dn)-Dn*Dn)]}function rc(ze,Ge,qe,ot){var bt=l/3;ze=a(ze,p),Ge=a(Ge,p),ze=r(ze,y),Ge=r(Ge,l-p),qe=a(qe,0),qe=r(qe,100-p);var At=(ot=a(ot,p))/100,cr=z((qe/100+1)*d(bt))/bt,yr=x(ze)/x(cr*y),lr=Ge/l,_r=O(At*x(ze/2)/x(Ge/2));return function mu(ze,Ge,qe,ot,bt){function xt(At,cr){var yr=qe*x(ot*cr),lr=O(1-yr*yr),_r=O(2/(1+lr*d(At*=bt)));return[ze*lr*_r*x(At),Ge*yr*_r]}return xt.invert=function(At,cr){var yr=At/ze,lr=cr/Ge,_r=O(yr*yr+lr*lr),Rr=2*R(_r/2);return[c(At*S(Rr),ze*_r)/bt,_r&&R(cr*x(Rr)/(Ge*qe*_r))/ot]},xt}(_r/O(lr*yr*cr),1/(_r*O(lr*yr*cr)),yr,cr,lr)}function Ou(){var ze=65*o,Ge=60*o,qe=20,ot=200,bt=k.geoProjectionMutator(rc),xt=bt(ze,Ge,qe,ot);return xt.poleline=function(At){return arguments.length?bt(ze=+At*o,Ge,qe,ot):ze*h},xt.parallels=function(At){return arguments.length?bt(ze,Ge=+At*o,qe,ot):Ge*h},xt.inflation=function(At){return arguments.length?bt(ze,Ge,qe=+At,ot):qe},xt.ratio=function(At){return arguments.length?bt(ze,Ge,qe,ot=+At):ot},xt.scale(163.775)}fa.invert=function(ze,Ge){var qe=Ge/1.70711,ot=x(A*qe);return[ze/(.74482-.34588*ot*ot),2*e(qe)]},gs.invert=function(ze,Ge){if(E(Ge)<p)return[ze,0];if(E(ze)<p)return[0,y*x(2*e(Ge/l))];var qe=(ze/=l)*ze,ot=(Ge/=l)*Ge,bt=qe+ot,xt=bt*bt,At=-E(Ge)*(1+bt),cr=At-2*ot+qe,yr=-2*At+1+2*ot+xt,lr=ot/yr+(2*cr*cr*cr/(yr*yr*yr)-9*At*cr/(yr*yr))/27,_r=(At-cr*cr/(3*yr))/yr,Rr=2*O(-_r/3),Xr=z(3*lr/(_r*Rr))/3;return[l*(bt-1+O(1+2*(qe-ot)+xt))/(2*ze),b(Ge)*l*(-Rr*d(Xr+l/3)-cr/(3*yr))]},hl.invert=function(ze,Ge){if(!ze)return[0,y*x(2*e(Ge/l))];var qe=E(ze/l),ot=(1-qe*qe-(Ge/=l)*Ge)/(2*qe),xt=O(ot*ot+1);return[b(ze)*l*(xt-ot),b(Ge)*y*x(2*c(O((1-2*ot*qe)*(ot+xt)-qe),O(xt+ot+qe)))]},ys.invert=function(ze,Ge){if(!Ge)return[ze,0];var qe=Ge/l,ot=(l*l*(1-qe*qe)-ze*ze)/(2*l*ze);return[ze?l*(b(ze)*O(ot*ot+1)-ot):0,y*x(2*e(qe))]},pl.invert=function(ze,Ge){var qe;if(!ze||!Ge)return[ze,Ge];Ge/=l;var ot=b(ze)*ze/y,bt=(ot*ot-1+4*Ge*Ge)/E(ot),xt=bt*bt,At=2*Ge,cr=50;do{var yr=At*At,lr=(8*At-yr*(yr+2)-5)/(2*yr*(At-1)),_r=(3*At-yr*At-10)/(2*yr*At),Rr=lr*lr,Xr=At*lr,an=At+lr,bn=an*an,Dn=At+3*lr,xa=-2*an*(4*Xr*Rr+(1-4*yr+3*yr*yr)*(1+_r)+Rr*(14*yr-6-xt+(8*yr-8-2*xt)*_r)+Xr*(12*yr-8+(10*yr-10-xt)*_r)),Za=O(bn*(yr+Rr*xt-1)+(1-yr)*(yr*(Dn*Dn+4*Rr)+Rr*(12*Xr+4*Rr)));At-=qe=(bt*(bn+Rr-1)+2*Za-ot*(4*bn+xt))/(bt*(2*lr*_r+2*an*(1+_r))+xa/Za-8*an*(bt*(-1+Rr+bn)+2*Za)*(1+_r)/(xt+4*bn))}while(qe>p&&--cr>0);return[b(ze)*(O(bt*bt+4)+bt)*l/4,y*At]};var ju=4*l+3*O(3),Nu=2*O(2*l*O(3)/ju),Bu=de(Nu*O(3)/l,Nu,ju/6);function xu(ze,Ge){return[ze*O(1-3*Ge*Ge/(l*l)),Ge]}function ou(ze,Ge){var qe=d(Ge),ot=d(ze)*qe,bt=1-ot,xt=d(ze=c(x(ze)*qe,-x(Ge))),At=x(ze);return[At*(qe=O(1-ot*ot))-xt*bt,-xt*qe-At*bt]}function Ku(ze,Ge){var qe=se(ze,Ge);return[(qe[0]+ze/y)/2,(qe[1]+Ge)/2]}xu.invert=function(ze,Ge){return[ze/O(1-3*Ge*Ge/(l*l)),Ge]},ou.invert=function(ze,Ge){var qe=(ze*ze+Ge*Ge)/-2,ot=O(-qe*(2+qe)),bt=Ge*qe+ze*ot,xt=ze*qe-Ge*ot,At=O(xt*xt+bt*bt);return[c(ot*bt,At*(1+qe)),At?-R(ot*xt/At):0]},Ku.invert=function(ze,Ge){var qe=ze,ot=Ge,bt=25;do{var Yn,xt=d(ot),At=x(ot),cr=x(2*ot),yr=At*At,lr=xt*xt,_r=x(qe),Rr=d(qe/2),Xr=x(qe/2),an=Xr*Xr,bn=1-lr*Rr*Rr,Dn=bn?z(xt*Rr)*O(Yn=1/bn):Yn=0,xa=.5*(2*Dn*xt*Xr+qe/y)-ze,Za=.5*(Dn*At+ot)-Ge,ja=.5*Yn*(lr*an+Dn*xt*Rr*yr)+.5/y,Ka=Yn*(_r*cr/4-Dn*At*Xr),ri=.125*Yn*(cr*Xr-Dn*At*lr*_r),di=.5*Yn*(yr*Rr+Dn*an*xt)+.5,Yi=Ka*ri-di*ja,Ga=(Za*Ka-xa*di)/Yi,$i=(xa*ri-Za*ja)/Yi;qe-=Ga,ot-=$i}while((E(Ga)>p||E($i)>p)&&--bt>0);return[qe,ot]},_.geoNaturalEarth=k.geoNaturalEarth1,_.geoNaturalEarthRaw=k.geoNaturalEarth1Raw,_.geoAiry=function oe(){var ze=y,Ge=k.geoProjectionMutator(X),qe=Ge(ze);return qe.radius=function(ot){return arguments.length?Ge(ze=ot*o):ze*h},qe.scale(179.976).clipAngle(147)},_.geoAiryRaw=X,_.geoAitoff=function ne(){return k.geoProjection(se).scale(152.63)},_.geoAitoffRaw=se,_.geoArmadillo=function G(){var ze=20*o,Ge=ze>=0?1:-1,qe=S(Ge*ze),ot=k.geoProjectionMutator(W),bt=ot(ze),xt=bt.stream;return bt.parallel=function(At){return arguments.length?(qe=S((Ge=(ze=At*o)>=0?1:-1)*ze),ot(ze)):ze*h},bt.stream=function(At){var cr=bt.rotate(),yr=xt(At),lr=(bt.rotate([0,0]),xt(At)),_r=bt.precision();return bt.rotate(cr),yr.sphere=function(){lr.polygonStart(),lr.lineStart();for(var Rr=-180*Ge;Ge*Rr<180;Rr+=90*Ge)lr.point(Rr,90*Ge);if(ze)for(;Ge*(Rr-=3*Ge*_r)>=-180;)lr.point(Rr,Ge*-c(d(Rr*o/2),qe)*h);lr.lineEnd(),lr.polygonEnd()},yr},bt.scale(218.695).center([0,28.0974])},_.geoArmadilloRaw=W,_.geoAugust=function V(){return k.geoProjection($).scale(66.1603)},_.geoAugustRaw=$,_.geoBaker=function Y(){return k.geoProjection(K).scale(112.314)},_.geoBakerRaw=K,_.geoBerghaus=function J(){var ze=5,Ge=k.geoProjectionMutator(te),qe=Ge(ze),ot=qe.stream,bt=.01,xt=-d(bt*o),At=x(bt*o);return qe.lobes=function(cr){return arguments.length?Ge(ze=+cr):ze},qe.stream=function(cr){var yr=qe.rotate(),lr=ot(cr),_r=(qe.rotate([0,0]),ot(cr));return qe.rotate(yr),lr.sphere=function(){_r.polygonStart(),_r.lineStart();for(var Rr=0,Xr=360/ze,an=2*l/ze,bn=90-180/ze,Dn=y;Rr<ze;++Rr,bn-=Xr,Dn-=an)_r.point(c(At*d(Dn),xt)*h,R(At*x(Dn))*h),bn<-90?(_r.point(-90,-180-bn-bt),_r.point(-90,-180-bn+bt)):(_r.point(90,bn+bt),_r.point(90,bn-bt));_r.lineEnd(),_r.polygonEnd()},lr},qe.scale(87.8076).center([0,17.1875]).clipAngle(179.999)},_.geoBerghausRaw=te,_.geoBertin1953=function ke(){return k.geoProjection(xe()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])},_.geoBertin1953Raw=xe,_.geoBoggs=function Fe(){return k.geoProjection(Ce).scale(160.857)},_.geoBoggsRaw=Ce,_.geoBonne=function nt(){return Ke(Ie).scale(123.082).center([0,26.1441]).parallel(45)},_.geoBonneRaw=Ie,_.geoBottomley=function Nt(){var ze=.5,Ge=k.geoProjectionMutator(gt),qe=Ge(ze);return qe.fraction=function(ot){return arguments.length?Ge(ze=+ot):ze},qe.scale(158.837)},_.geoBottomleyRaw=gt,_.geoBromley=function Bt(){return k.geoProjection(St).scale(152.63)},_.geoBromleyRaw=St,_.geoChamberlin=Pe,_.geoChamberlinRaw=at,_.geoChamberlinAfrica=function Qe(){return Pe([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])},_.geoCollignon=function Xe(){return k.geoProjection(Ze).scale(95.6464).center([0,30])},_.geoCollignonRaw=Ze,_.geoCraig=function kt(){return Ke(rt).scale(249.828).clipAngle(90)},_.geoCraigRaw=rt,_.geoCraster=function ar(){return k.geoProjection(Xt).scale(156.19)},_.geoCrasterRaw=Xt,_.geoCylindricalEqualArea=function Jt(){return Ke(Ut).parallel(38.58).scale(195.044)},_.geoCylindricalEqualAreaRaw=Ut,_.geoCylindricalStereographic=function rr(){return Ke(nr).scale(124.75)},_.geoCylindricalStereographicRaw=nr,_.geoEckert1=function Hr(){return k.geoProjection(br).scale(165.664)},_.geoEckert1Raw=br,_.geoEckert2=function jr(){return k.geoProjection(on).scale(165.664)},_.geoEckert2Raw=on,_.geoEckert3=function Yt(){return k.geoProjection(et).scale(180.739)},_.geoEckert3Raw=et,_.geoEckert4=function Vt(){return k.geoProjection(qt).scale(180.739)},_.geoEckert4Raw=qt,_.geoEckert5=function tt(){return k.geoProjection(Tr).scale(173.044)},_.geoEckert5Raw=Tr,_.geoEckert6=function ct(){return k.geoProjection(je).scale(173.044)},_.geoEckert6Raw=je,_.geoEisenlohr=function Se(){return k.geoProjection(Me).scale(62.5271)},_.geoEisenlohrRaw=Me,_.geoFahey=function st(){return k.geoProjection(We).scale(137.152)},_.geoFaheyRaw=We,_.geoFoucaut=function pt(){return k.geoProjection(lt).scale(135.264)},_.geoFoucautRaw=lt,_.geoFoucautSinusoidal=function Dt(){var ze=.5,Ge=k.geoProjectionMutator(Ct),qe=Ge(ze);return qe.alpha=function(ot){return arguments.length?Ge(ze=+ot):ze},qe.scale(168.725)},_.geoFoucautSinusoidalRaw=Ct,_.geoGilbert=function pr(ze){null==ze&&(ze=k.geoOrthographic);var Ge=ze(),qe=k.geoEquirectangular().scale(h).precision(0).clipAngle(null).translate([0,0]);function ot(xt){return Ge(Gt(xt))}function bt(xt){ot[xt]=function(){return arguments.length?(Ge[xt].apply(Ge,arguments),ot):Ge[xt]()}}return Ge.invert&&(ot.invert=function(xt){return fr(Ge.invert(xt))}),ot.stream=function(xt){var At=Ge.stream(xt),cr=qe.stream({point:function(yr,lr){At.point(yr/2,R(S(-lr/2*o))*h)},lineStart:function(){At.lineStart()},lineEnd:function(){At.lineEnd()},polygonStart:function(){At.polygonStart()},polygonEnd:function(){At.polygonEnd()}});return cr.sphere=At.sphere,cr},ot.rotate=function(xt){return arguments.length?(qe.rotate(xt),ot):qe.rotate()},ot.center=function(xt){return arguments.length?(Ge.center(Gt(xt)),ot):fr(Ge.center())},bt("angle"),bt("clipAngle"),bt("clipExtent"),bt("fitExtent"),bt("fitHeight"),bt("fitSize"),bt("fitWidth"),bt("scale"),bt("translate"),bt("precision"),ot.scale(249.5)},_.geoGingery=function en(){var ze=6,Ge=30*o,qe=d(Ge),ot=x(Ge),bt=k.geoProjectionMutator(Jr),xt=bt(Ge,ze),At=xt.stream,yr=-d(.01*o),lr=x(.01*o);return xt.radius=function(_r){return arguments.length?(qe=d(Ge=_r*o),ot=x(Ge),bt(Ge,ze)):Ge*h},xt.lobes=function(_r){return arguments.length?bt(Ge,ze=+_r):ze},xt.stream=function(_r){var Rr=xt.rotate(),Xr=At(_r),an=(xt.rotate([0,0]),At(_r));return xt.rotate(Rr),Xr.sphere=function(){an.polygonStart(),an.lineStart();for(var bn=0,Dn=2*l/ze,Yn=0;bn<ze;++bn,Yn-=Dn)an.point(c(lr*d(Yn),yr)*h,R(lr*x(Yn))*h),an.point(c(ot*d(Yn-Dn/2),qe)*h,R(ot*x(Yn-Dn/2))*h);an.lineEnd(),an.polygonEnd()},Xr},xt.rotate([90,-40]).scale(91.7095).clipAngle(179.999)},_.geoGingeryRaw=Jr,_.geoGinzburg4=function Wr(){return k.geoProjection(wr).scale(149.995)},_.geoGinzburg4Raw=wr,_.geoGinzburg5=function Cr(){return k.geoProjection(Kr).scale(153.93)},_.geoGinzburg5Raw=Kr,_.geoGinzburg6=function It(){return k.geoProjection(it).scale(130.945)},_.geoGinzburg6Raw=it,_.geoGinzburg8=function ir(){return k.geoProjection(Qt).scale(131.747)},_.geoGinzburg8Raw=Qt,_.geoGinzburg9=function qr(){return k.geoProjection(Or).scale(131.087)},_.geoGinzburg9Raw=Or,_.geoGringorten=function wn(){return k.geoProjection(Ir(kr)).scale(239.75)},_.geoGringortenRaw=kr,_.geoGuyou=function Ja(){return k.geoProjection(Ir(wa)).scale(151.496)},_.geoGuyouRaw=wa,_.geoHammer=function le(){var ze=2,Ge=k.geoProjectionMutator(j),qe=Ge(ze);return qe.coefficient=function(ot){return arguments.length?Ge(ze=+ot):ze},qe.scale(169.529)},_.geoHammerRaw=j,_.geoHammerRetroazimuthal=function Er(){var ze=0,Ge=k.geoProjectionMutator(Va),qe=Ge(ze),ot=qe.rotate,bt=qe.stream,xt=k.geoCircle();return qe.parallel=function(At){if(!arguments.length)return ze*h;var cr=qe.rotate();return Ge(ze=At*o).rotate(cr)},qe.rotate=function(At){return arguments.length?(ot.call(qe,[At[0],At[1]-ze*h]),xt.center([-At[0],-At[1]]),qe):((At=ot.call(qe))[1]+=ze*h,At)},qe.stream=function(At){return(At=bt(At)).sphere=function(){At.polygonStart();var Rr,yr=xt.radius(89.99)().coordinates[0],lr=yr.length-1,_r=-1;for(At.lineStart();++_r<lr;)At.point((Rr=yr[_r])[0],Rr[1]);for(At.lineEnd(),lr=(yr=xt.radius(90.01)().coordinates[0]).length-1,At.lineStart();--_r>=0;)At.point((Rr=yr[_r])[0],Rr[1]);At.lineEnd(),At.polygonEnd()},At},qe.scale(79.4187).parallel(45).clipAngle(179.999)},_.geoHammerRetroazimuthalRaw=Va,_.geoHealpix=function pa(){var ze=4,Ge=k.geoProjectionMutator(Un),qe=Ge(ze),ot=qe.stream;return qe.lobes=function(bt){return arguments.length?Ge(ze=+bt):ze},qe.stream=function(bt){var xt=qe.rotate(),At=ot(bt),cr=(qe.rotate([0,0]),ot(bt));return qe.rotate(xt),At.sphere=function(){k.geoStream(function Xn(ze){var Ge=[].concat(m.range(-180,180+ze/2,ze).map(ra),m.range(180,-180-ze/2,-ze).map(Gn));return{type:"Polygon",coordinates:[180===ze?Ge.map(On):Ge]}}(180/ze),cr)},At},qe.scale(239.75)},_.geoHealpixRaw=Un,_.geoHill=function Ht(){var ze=1,Ge=k.geoProjectionMutator(oi),qe=Ge(ze);return qe.ratio=function(ot){return arguments.length?Ge(ze=+ot):ze},qe.scale(167.774).center([0,18.67])},_.geoHillRaw=oi,_.geoHomolosine=function Rt(){return k.geoProjection(Br).scale(152.63)},_.geoHomolosineRaw=Br,_.geoHufnagel=function Pt(){var ze=1,Ge=0,qe=45*o,ot=2,bt=k.geoProjectionMutator(Lt),xt=bt(ze,Ge,qe,ot);return xt.a=function(At){return arguments.length?bt(ze=+At,Ge,qe,ot):ze},xt.b=function(At){return arguments.length?bt(ze,Ge=+At,qe,ot):Ge},xt.psiMax=function(At){return arguments.length?bt(ze,Ge,qe=+At*o,ot):qe*h},xt.ratio=function(At){return arguments.length?bt(ze,Ge,qe,ot=+At):ot},xt.scale(180.739)},_.geoHufnagelRaw=Lt,_.geoHyperelliptical=function Fn(){var ze=0,Ge=2.5,qe=1.183136,ot=k.geoProjectionMutator(vn),bt=ot(ze,Ge,qe);return bt.alpha=function(xt){return arguments.length?ot(ze=+xt,Ge,qe):ze},bt.k=function(xt){return arguments.length?ot(ze,Ge=+xt,qe):Ge},bt.gamma=function(xt){return arguments.length?ot(ze,Ge,qe=+xt):qe},bt.scale(152.63)},_.geoHyperellipticalRaw=vn,_.geoInterrupt=ia,_.geoInterruptedBoggs=function _a(){return ia(Ce,va).scale(160.857)},_.geoInterruptedHomolosine=function Aa(){return ia(Br,sa).scale(152.63)},_.geoInterruptedMollweide=function Ao(){return ia(be,xo).scale(169.529)},_.geoInterruptedMollweideHemispheres=function cs(){return ia(be,Io).scale(169.529).rotate([20,0])},_.geoInterruptedSinuMollweide=function wl(){return ia(ln,Jl,pe).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},_.geoInterruptedSinusoidal=function fs(){return ia(Ue,gi).scale(152.63).rotate([-20,0])},_.geoKavrayskiy7=function to(){return k.geoProjection(Hs).scale(158.837)},_.geoKavrayskiy7Raw=Hs,_.geoLagrange=function zl(){var ze=.5,Ge=k.geoProjectionMutator(Mo),qe=Ge(ze);return qe.spacing=function(ot){return arguments.length?Ge(ze=+ot):ze},qe.scale(124.75)},_.geoLagrangeRaw=Mo,_.geoLarrivee=function Gs(){return k.geoProjection(ro).scale(97.2672)},_.geoLarriveeRaw=ro,_.geoLaskowski=function Mi(){return k.geoProjection(no).scale(139.98)},_.geoLaskowskiRaw=no,_.geoLittrow=function ao(){return k.geoProjection(So).scale(144.049).clipAngle(89.999)},_.geoLittrowRaw=So,_.geoLoximuthal=function Vo(){return Ke(Qo).parallel(40).scale(158.837)},_.geoLoximuthalRaw=Qo,_.geoMiller=function Ho(){return k.geoProjection(Tl).scale(108.318)},_.geoMillerRaw=Tl,_.geoModifiedStereographic=ws,_.geoModifiedStereographicRaw=ku,_.geoModifiedStereographicAlaska=function Fl(){return ws(Zs,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)},_.geoModifiedStereographicGs48=function Cu(){return ws(ko,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])},_.geoModifiedStereographicGs50=function Eu(){return ws(pu,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])},_.geoModifiedStereographicMiller=function Ys(){return ws(bs,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)},_.geoModifiedStereographicLee=function Ol(){return ws(_s,[165,10]).scale(250).clipAngle(130).center([-165,-10])},_.geoMollweide=function Le(){return k.geoProjection(be).scale(169.529)},_.geoMollweideRaw=be,_.geoMtFlatPolarParabolic=function Lu(){return k.geoProjection(Ql).scale(164.859)},_.geoMtFlatPolarParabolicRaw=Ql,_.geoMtFlatPolarQuartic=function Wu(){return k.geoProjection($l).scale(188.209)},_.geoMtFlatPolarQuarticRaw=$l,_.geoMtFlatPolarSinusoidal=function Nl(){return k.geoProjection(Ws).scale(166.518)},_.geoMtFlatPolarSinusoidalRaw=Ws,_.geoNaturalEarth2=function il(){return k.geoProjection(Al).scale(175.295)},_.geoNaturalEarth2Raw=Al,_.geoNellHammer=function ql(){return k.geoProjection(Ml).scale(152.63)},_.geoNellHammerRaw=Ml,_.geoInterruptedQuarticAuthalic=function du(){return ia(j(1/0),Xs).rotate([20,0]).scale(152.63)},_.geoNicolosi=function Pu(){return k.geoProjection(eu).scale(127.267)},_.geoNicolosiRaw=eu,_.geoPatterson=function co(){return k.geoProjection(Ts).scale(139.319)},_.geoPattersonRaw=Ts,_.geoPolyconic=function Du(){return k.geoProjection(sl).scale(103.74)},_.geoPolyconicRaw=sl,_.geoPolyhedral=ll,_.geoPolyhedralButterfly=function El(ze){ze=ze||function(qe){var ot=k.geoCentroid({type:"MultiPoint",coordinates:qe});return k.geoGnomonic().scale(1).translate([0,0]).rotate([-ot[0],-ot[1]])};var Ge=Cl.map(function(qe){return{face:qe,project:ze(qe)}});return[-1,0,0,1,0,1,4,5].forEach(function(qe,ot){var bt=Ge[qe];bt&&(bt.children||(bt.children=[])).push(Ge[ot])}),ll(Ge[0],function(qe,ot){return Ge[qe<-l/2?ot<0?6:4:qe<0?ot<0?2:0:qe<l/2?ot<0?3:1:ot<0?7:5]}).angle(-30).scale(101.858).center([0,45])},_.geoPolyhedralCollignon=function Xu(ze){ze=ze||function(qe){var ot=k.geoCentroid({type:"MultiPoint",coordinates:qe});return k.geoProjection(Vl).translate([0,0]).scale(1).rotate(ot[1]>0?[-ot[0],0]:[180-ot[0],180])};var Ge=Cl.map(function(qe){return{face:qe,project:ze(qe)}});return[-1,0,0,1,0,1,4,5].forEach(function(qe,ot){var bt=Ge[qe];bt&&(bt.children||(bt.children=[])).push(Ge[ot])}),ll(Ge[0],function(qe,ot){return Ge[qe<-l/2?ot<0?6:4:qe<0?ot<0?2:0:qe<l/2?ot<0?3:1:ot<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])},_.geoPolyhedralWaterman=function Ui(ze){ze=ze||function(At){var cr=6===At.length?k.geoCentroid({type:"MultiPoint",coordinates:At}):At[0];return k.geoGnomonic().scale(1).translate([0,0]).rotate([-cr[0],-cr[1]])};var Ge=Cl.map(function(At){for(var _r,cr=At.map(vs),yr=cr.length,lr=cr[yr-1],Rr=[],Xr=0;Xr<yr;++Xr)Rr.push(is([.9486832980505138*lr[0]+.31622776601683794*(_r=cr[Xr])[0],.9486832980505138*lr[1]+.31622776601683794*_r[1],.9486832980505138*lr[2]+.31622776601683794*_r[2]]),is([.9486832980505138*_r[0]+.31622776601683794*lr[0],.9486832980505138*_r[1]+.31622776601683794*lr[1],.9486832980505138*_r[2]+.31622776601683794*lr[2]])),lr=_r;return Rr}),qe=[],ot=[-1,0,0,1,0,1,4,5];Ge.forEach(function(At,cr){for(var yr=Cl[cr],lr=yr.length,_r=qe[cr]=[],Rr=0;Rr<lr;++Rr)Ge.push([yr[Rr],At[(2*Rr+2)%(2*lr)],At[(2*Rr+1)%(2*lr)]]),ot.push(cr),_r.push(js(vs(At[(2*Rr+2)%(2*lr)]),vs(At[(2*Rr+1)%(2*lr)])))});var bt=Ge.map(function(At){return{project:ze(At),face:At}});return ot.forEach(function(At,cr){var yr=bt[At];yr&&(yr.children||(yr.children=[])).push(bt[cr])}),ll(bt[0],function xt(At,cr){var yr=d(cr),lr=[yr*d(At),yr*x(At),x(cr)],_r=At<-l/2?cr<0?6:4:At<0?cr<0?2:0:At<l/2?cr<0?3:1:cr<0?7:5,Rr=qe[_r];return bt[cl(Rr[0],lr)<0?8+3*_r:cl(Rr[1],lr)<0?8+3*_r+1:cl(Rr[2],lr)<0?8+3*_r+2:_r]}).angle(-30).scale(110.625).center([0,45])},_.geoProject=function $o(ze,Ge){var ot,qe=Ge.stream;if(!qe)throw new Error("invalid projection");switch(ze&&ze.type){case"Feature":ot=Js;break;case"FeatureCollection":ot=Ps;break;default:ot=ps}return ot(ze,qe)},_.geoGringortenQuincuncial=function mt(){return yu(kr).scale(176.423)},_.geoPeirceQuincuncial=Ot,_.geoPierceQuincuncial=Ot,_.geoQuantize=function vr(ze,Ge){if(!(0<=(Ge=+Ge)&&Ge<=20))throw new Error("invalid digits");function qe(lr){var _r=lr.length,Rr=2,Xr=new Array(_r);for(Xr[0]=+lr[0].toFixed(Ge),Xr[1]=+lr[1].toFixed(Ge);Rr<_r;)Xr[Rr]=lr[Rr],++Rr;return Xr}function ot(lr){return lr.map(qe)}function bt(lr){for(var _r=qe(lr[0]),Rr=[_r],Xr=1;Xr<lr.length;Xr++){var an=qe(lr[Xr]);(an.length>2||an[0]!=_r[0]||an[1]!=_r[1])&&(Rr.push(an),_r=an)}return 1===Rr.length&&lr.length>1&&Rr.push(qe(lr[lr.length-1])),Rr}function xt(lr){return lr.map(bt)}function At(lr){if(null==lr)return lr;var _r;switch(lr.type){case"GeometryCollection":_r={type:"GeometryCollection",geometries:lr.geometries.map(At)};break;case"Point":_r={type:"Point",coordinates:qe(lr.coordinates)};break;case"MultiPoint":_r={type:lr.type,coordinates:ot(lr.coordinates)};break;case"LineString":_r={type:lr.type,coordinates:bt(lr.coordinates)};break;case"MultiLineString":case"Polygon":_r={type:lr.type,coordinates:xt(lr.coordinates)};break;case"MultiPolygon":_r={type:"MultiPolygon",coordinates:lr.coordinates.map(xt)};break;default:return lr}return null!=lr.bbox&&(_r.bbox=lr.bbox),_r}function cr(lr){var _r={type:"Feature",properties:lr.properties,geometry:At(lr.geometry)};return null!=lr.id&&(_r.id=lr.id),null!=lr.bbox&&(_r.bbox=lr.bbox),_r}if(null!=ze)switch(ze.type){case"Feature":return cr(ze);case"FeatureCollection":var yr={type:"FeatureCollection",features:ze.features.map(cr)};return null!=ze.bbox&&(yr.bbox=ze.bbox),yr;default:return At(ze)}return ze},_.geoQuincuncial=yu,_.geoRectangularPolyconic=function zr(){return Ke(sr).scale(131.215)},_.geoRectangularPolyconicRaw=sr,_.geoRobinson=function Tn(){return k.geoProjection(yn).scale(152.63)},_.geoRobinsonRaw=yn,_.geoSatellite=function mn(){var ze=2,Ge=0,qe=k.geoProjectionMutator(Bn),ot=qe(ze,Ge);return ot.distance=function(bt){return arguments.length?qe(ze=+bt,Ge):ze},ot.tilt=function(bt){return arguments.length?qe(ze,Ge=bt*o):Ge*h},ot.scale(432.147).clipAngle(z(1/ze)*h-1e-6)},_.geoSatelliteRaw=Bn,_.geoSinuMollweide=function or(){return k.geoProjection(ln).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},_.geoSinuMollweideRaw=ln,_.geoSinusoidal=function Be(){return k.geoProjection(Ue).scale(152.63)},_.geoSinusoidalRaw=Ue,_.geoStitch=function ti(ze){if(null==ze)return ze;switch(ze.type){case"Feature":return _o(ze);case"FeatureCollection":var Ge={type:"FeatureCollection",features:ze.features.map(_o)};return null!=ze.bbox&&(Ge.bbox=ze.bbox),Ge;default:return io(ze)}},_.geoTimes=function wi(){return k.geoProjection(fa).scale(146.153)},_.geoTimesRaw=fa,_.geoTwoPointAzimuthal=Ms,_.geoTwoPointAzimuthalRaw=yo,_.geoTwoPointAzimuthalUsa=function os(){return Ms([-158,21.5],[-77,39]).clipAngle(60).scale(400)},_.geoTwoPointEquidistant=ds,_.geoTwoPointEquidistantRaw=ss,_.geoTwoPointEquidistantUsa=function fl(){return ds([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)},_.geoVanDerGrinten=function Rs(){return k.geoProjection(gs).scale(79.4183)},_.geoVanDerGrintenRaw=gs,_.geoVanDerGrinten2=function vl(){return k.geoProjection(hl).scale(79.4183)},_.geoVanDerGrinten2Raw=hl,_.geoVanDerGrinten3=function Fu(){return k.geoProjection(ys).scale(79.4183)},_.geoVanDerGrinten3Raw=ys,_.geoVanDerGrinten4=function Is(){return k.geoProjection(pl).scale(127.16)},_.geoVanDerGrinten4Raw=pl,_.geoWagner=Ou,_.geoWagner7=function ms(){return Ou().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)},_.geoWagnerRaw=rc,_.geoWagner4=function dl(){return k.geoProjection(Bu).scale(176.84)},_.geoWagner4Raw=Bu,_.geoWagner6=function nc(){return k.geoProjection(xu).scale(152.63)},_.geoWagner6Raw=xu,_.geoWiechel=function Ju(){return k.geoProjection(ou).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)},_.geoWiechelRaw=ou,_.geoWinkel3=function qo(){return k.geoProjection(Ku).scale(158.837)},_.geoWinkel3Raw=Ku,Object.defineProperty(_,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==ie?k(ae,v("d3-geo"),v("d3-array")):k(_.d3=_.d3||{},_.d3,_.d3)},{"d3-array":107,"d3-geo":114}],114:[function(v,ie,ae){var _,k;_=this,k=function(_,k){"use strict";function m(){return new E}function E(){this.reset()}E.prototype={constructor:E,reset:function(){this.s=this.t=0},add:function(mt){c(e,mt,this.t),c(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new E;function c(mt,Ot,vr){var sr=mt.s=Ot+vr,zr=sr-Ot;mt.t=Ot-(sr-zr)+(vr-zr)}var d=1e-6,n=1e-12,t=Math.PI,i=t/2,a=t/4,r=2*t,g=180/t,s=t/180,b=Math.abs,x=Math.atan,S=Math.atan2,p=Math.cos,w=Math.ceil,l=Math.exp,y=Math.log,A=Math.pow,T=Math.sin,M=Math.sign||function(mt){return mt>0?1:mt<0?-1:0},f=Math.sqrt,u=Math.tan;function h(mt){return mt>1?0:mt<-1?t:Math.acos(mt)}function o(mt){return mt>1?i:mt<-1?-i:Math.asin(mt)}function C(mt){return(mt=T(mt/2))*mt}function R(){}function z(mt,Ot){mt&&I.hasOwnProperty(mt.type)&&I[mt.type](mt,Ot)}var O={Feature:function(mt,Ot){z(mt.geometry,Ot)},FeatureCollection:function(mt,Ot){for(var vr=mt.features,sr=-1,zr=vr.length;++sr<zr;)z(vr[sr].geometry,Ot)}},I={Sphere:function(mt,Ot){Ot.sphere()},Point:function(mt,Ot){Ot.point((mt=mt.coordinates)[0],mt[1],mt[2])},MultiPoint:function(mt,Ot){for(var vr=mt.coordinates,sr=-1,zr=vr.length;++sr<zr;)Ot.point((mt=vr[sr])[0],mt[1],mt[2])},LineString:function(mt,Ot){F(mt.coordinates,Ot,0)},MultiLineString:function(mt,Ot){for(var vr=mt.coordinates,sr=-1,zr=vr.length;++sr<zr;)F(vr[sr],Ot,0)},Polygon:function(mt,Ot){D(mt.coordinates,Ot)},MultiPolygon:function(mt,Ot){for(var vr=mt.coordinates,sr=-1,zr=vr.length;++sr<zr;)D(vr[sr],Ot)},GeometryCollection:function(mt,Ot){for(var vr=mt.geometries,sr=-1,zr=vr.length;++sr<zr;)z(vr[sr],Ot)}};function F(mt,Ot,vr){var un,sr=-1,zr=mt.length-vr;for(Ot.lineStart();++sr<zr;)Ot.point((un=mt[sr])[0],un[1],un[2]);Ot.lineEnd()}function D(mt,Ot){var vr=-1,sr=mt.length;for(Ot.polygonStart();++vr<sr;)F(mt[vr],Ot,1);Ot.polygonEnd()}function N(mt,Ot){mt&&O.hasOwnProperty(mt.type)?O[mt.type](mt,Ot):z(mt,Ot)}var oe,se,ne,W,G,U=m(),X=m(),$={point:R,lineStart:R,lineEnd:R,polygonStart:function(){U.reset(),$.lineStart=V,$.lineEnd=H},polygonEnd:function(){var mt=+U;X.add(mt<0?r+mt:mt),this.lineStart=this.lineEnd=this.point=R},sphere:function(){X.add(r)}};function V(){$.point=q}function H(){K(oe,se)}function q(mt,Ot){$.point=K,oe=mt,se=Ot,ne=mt*=s,W=p(Ot=(Ot*=s)/2+a),G=T(Ot)}function K(mt,Ot){var vr=(mt*=s)-ne,sr=vr>=0?1:-1,zr=sr*vr,un=p(Ot=(Ot*=s)/2+a),yn=T(Ot),Tn=G*yn,En=W*un+Tn*p(zr),Bn=Tn*sr*T(zr);U.add(S(Bn,En)),ne=mt,W=un,G=yn}function te(mt){return[S(mt[1],mt[0]),o(mt[2])]}function J(mt){var Ot=mt[0],vr=mt[1],sr=p(vr);return[sr*p(Ot),sr*T(Ot),T(vr)]}function j(mt,Ot){return mt[0]*Ot[0]+mt[1]*Ot[1]+mt[2]*Ot[2]}function re(mt,Ot){return[mt[1]*Ot[2]-mt[2]*Ot[1],mt[2]*Ot[0]-mt[0]*Ot[2],mt[0]*Ot[1]-mt[1]*Ot[0]]}function le(mt,Ot){mt[0]+=Ot[0],mt[1]+=Ot[1],mt[2]+=Ot[2]}function ge(mt,Ot){return[mt[0]*Ot,mt[1]*Ot,mt[2]*Ot]}function pe(mt){var Ot=f(mt[0]*mt[0]+mt[1]*mt[1]+mt[2]*mt[2]);mt[0]/=Ot,mt[1]/=Ot,mt[2]/=Ot}var xe,ke,we,de,be,Le,De,ye,Fe,Ke,Ce=m(),Ue={point:Be,lineStart:nt,lineEnd:gt,polygonStart:function(){Ue.point=Nt,Ue.lineStart=St,Ue.lineEnd=Bt,Ce.reset(),$.polygonStart()},polygonEnd:function(){$.polygonEnd(),Ue.point=Be,Ue.lineStart=nt,Ue.lineEnd=gt,U<0?(xe=-(we=180),ke=-(de=90)):Ce>d?de=90:Ce<-d&&(ke=-90),Ke[0]=xe,Ke[1]=we},sphere:function(){xe=-(we=180),ke=-(de=90)}};function Be(mt,Ot){Fe.push(Ke=[xe=mt,we=mt]),Ot<ke&&(ke=Ot),Ot>de&&(de=Ot)}function Ie(mt,Ot){var vr=J([mt*s,Ot*s]);if(ye){var sr=re(ye,vr),un=re([sr[1],-sr[0],0],sr);pe(un),un=te(un);var Bn,yn=mt-be,Tn=yn>0?1:-1,En=un[0]*g*Tn,mn=b(yn)>180;mn^(Tn*be<En&&En<Tn*mt)?(Bn=un[1]*g)>de&&(de=Bn):mn^(Tn*be<(En=(En+360)%360-180)&&En<Tn*mt)?(Bn=-un[1]*g)<ke&&(ke=Bn):(Ot<ke&&(ke=Ot),Ot>de&&(de=Ot)),mn?mt<be?Zt(xe,mt)>Zt(xe,we)&&(we=mt):Zt(mt,we)>Zt(xe,we)&&(xe=mt):we>=xe?(mt<xe&&(xe=mt),mt>we&&(we=mt)):mt>be?Zt(xe,mt)>Zt(xe,we)&&(we=mt):Zt(mt,we)>Zt(xe,we)&&(xe=mt)}else Fe.push(Ke=[xe=mt,we=mt]);Ot<ke&&(ke=Ot),Ot>de&&(de=Ot),ye=vr,be=mt}function nt(){Ue.point=Ie}function gt(){Ke[0]=xe,Ke[1]=we,Ue.point=Be,ye=null}function Nt(mt,Ot){if(ye){var vr=mt-be;Ce.add(b(vr)>180?vr+(vr>0?360:-360):vr)}else Le=mt,De=Ot;$.point(mt,Ot),Ie(mt,Ot)}function St(){$.lineStart()}function Bt(){Nt(Le,De),$.lineEnd(),b(Ce)>d&&(xe=-(we=180)),Ke[0]=xe,Ke[1]=we,ye=null}function Zt(mt,Ot){return(Ot-=mt)<0?Ot+360:Ot}function Et(mt,Ot){return mt[0]-Ot[0]}function wt(mt,Ot){return mt[0]<=mt[1]?mt[0]<=Ot&&Ot<=mt[1]:Ot<mt[0]||mt[1]<Ot}var vt,Qe,Pe,Ze,Xe,rt,kt,Tt,Xt,ar,Ut,Jt,nr,rr,br,Hr,on={sphere:R,point:jr,lineStart:Yt,lineEnd:Tr,polygonStart:function(){on.lineStart=tt,on.lineEnd=je},polygonEnd:function(){on.lineStart=Yt,on.lineEnd=Tr}};function jr(mt,Ot){mt*=s;var vr=p(Ot*=s);et(vr*p(mt),vr*T(mt),T(Ot))}function et(mt,Ot,vr){++vt,Pe+=(mt-Pe)/vt,Ze+=(Ot-Ze)/vt,Xe+=(vr-Xe)/vt}function Yt(){on.point=qt}function qt(mt,Ot){mt*=s;var vr=p(Ot*=s);rr=vr*p(mt),br=vr*T(mt),Hr=T(Ot),on.point=Vt,et(rr,br,Hr)}function Vt(mt,Ot){mt*=s;var vr=p(Ot*=s),sr=vr*p(mt),zr=vr*T(mt),un=T(Ot),yn=S(f((yn=br*un-Hr*zr)*yn+(yn=Hr*sr-rr*un)*yn+(yn=rr*zr-br*sr)*yn),rr*sr+br*zr+Hr*un);Qe+=yn,rt+=yn*(rr+(rr=sr)),kt+=yn*(br+(br=zr)),Tt+=yn*(Hr+(Hr=un)),et(rr,br,Hr)}function Tr(){on.point=jr}function tt(){on.point=ct}function je(){ht(Jt,nr),on.point=jr}function ct(mt,Ot){Jt=mt,nr=Ot,mt*=s,Ot*=s,on.point=ht;var vr=p(Ot);rr=vr*p(mt),br=vr*T(mt),Hr=T(Ot),et(rr,br,Hr)}function ht(mt,Ot){mt*=s;var vr=p(Ot*=s),sr=vr*p(mt),zr=vr*T(mt),un=T(Ot),yn=br*un-Hr*zr,Tn=Hr*sr-rr*un,En=rr*zr-br*sr,Bn=f(yn*yn+Tn*Tn+En*En),mn=o(Bn),zn=Bn&&-mn/Bn;Xt+=zn*yn,ar+=zn*Tn,Ut+=zn*En,Qe+=mn,rt+=mn*(rr+(rr=sr)),kt+=mn*(br+(br=zr)),Tt+=mn*(Hr+(Hr=un)),et(rr,br,Hr)}function Se(mt){return function(){return mt}}function Je(mt,Ot){function vr(sr,zr){return sr=mt(sr,zr),Ot(sr[0],sr[1])}return mt.invert&&Ot.invert&&(vr.invert=function(sr,zr){return(sr=Ot.invert(sr,zr))&&mt.invert(sr[0],sr[1])}),vr}function We(mt,Ot){return[b(mt)>t?mt+Math.round(-mt/r)*r:mt,Ot]}function st(mt,Ot,vr){return(mt%=r)?Ot||vr?Je(pt(mt),Ct(Ot,vr)):pt(mt):Ot||vr?Ct(Ot,vr):We}function lt(mt){return function(Ot,vr){return[(Ot+=mt)>t?Ot-r:Ot<-t?Ot+r:Ot,vr]}}function pt(mt){var Ot=lt(mt);return Ot.invert=lt(-mt),Ot}function Ct(mt,Ot){var vr=p(mt),sr=T(mt),zr=p(Ot),un=T(Ot);function yn(Tn,En){var Bn=p(En),mn=p(Tn)*Bn,zn=T(Tn)*Bn,Pn=T(En),Vn=Pn*vr+mn*sr;return[S(zn*zr-Vn*un,mn*vr-Pn*sr),o(Vn*zr+zn*un)]}return yn.invert=function(Tn,En){var Bn=p(En),mn=p(Tn)*Bn,zn=T(Tn)*Bn,Pn=T(En),Vn=Pn*zr-zn*un;return[S(zn*zr+Pn*un,mn*vr+Vn*sr),o(Vn*vr-mn*sr)]},yn}function Dt(mt){function Ot(vr){return(vr=mt(vr[0]*s,vr[1]*s))[0]*=g,vr[1]*=g,vr}return mt=st(mt[0]*s,mt[1]*s,mt.length>2?mt[2]*s:0),Ot.invert=function(vr){return(vr=mt.invert(vr[0]*s,vr[1]*s))[0]*=g,vr[1]*=g,vr},Ot}function Gt(mt,Ot,vr,sr,zr,un){if(vr){var yn=p(Ot),Tn=T(Ot),En=sr*vr;null==zr?(zr=Ot+sr*r,un=Ot-En/2):(zr=fr(yn,zr),un=fr(yn,un),(sr>0?zr<un:zr>un)&&(zr+=sr*r));for(var Bn,mn=zr;sr>0?mn>un:mn<un;mn-=En)Bn=te([yn,-Tn*p(mn),-Tn*T(mn)]),mt.point(Bn[0],Bn[1])}}function fr(mt,Ot){(Ot=J(Ot))[0]-=mt,pe(Ot);var vr=h(-Ot[1]);return((-Ot[2]<0?-vr:vr)+r-d)%r}function Jr(){var Ot,mt=[];return{point:function(vr,sr,zr){Ot.push([vr,sr,zr])},lineStart:function(){mt.push(Ot=[])},lineEnd:R,rejoin:function(){mt.length>1&&mt.push(mt.pop().concat(mt.shift()))},result:function(){var vr=mt;return mt=[],Ot=null,vr}}}function Lr(mt,Ot){return b(mt[0]-Ot[0])<d&&b(mt[1]-Ot[1])<d}function Ar(mt,Ot,vr,sr){this.x=mt,this.z=Ot,this.o=vr,this.e=sr,this.v=!1,this.n=this.p=null}function en(mt,Ot,vr,sr,zr){var Tn,En,un=[],yn=[];if(mt.forEach(function(ea){if(!((Ha=ea.length-1)<=0)){var Ha,Ba,Ea=ea[0],Fa=ea[Ha];if(Lr(Ea,Fa)){if(!Ea[2]&&!Fa[2]){for(zr.lineStart(),Tn=0;Tn<Ha;++Tn)zr.point((Ea=ea[Tn])[0],Ea[1]);return void zr.lineEnd()}Fa[0]+=2*d}un.push(Ba=new Ar(Ea,ea,null,!0)),yn.push(Ba.o=new Ar(Ea,null,Ba,!1)),un.push(Ba=new Ar(Fa,ea,null,!1)),yn.push(Ba.o=new Ar(Fa,null,Ba,!0))}}),un.length){for(yn.sort(Ot),mr(un),mr(yn),Tn=0,En=yn.length;Tn<En;++Tn)yn[Tn].e=vr=!vr;for(var mn,zn,Bn=un[0];;){for(var Pn=Bn,Vn=!0;Pn.v;)if((Pn=Pn.n)===Bn)return;mn=Pn.z,zr.lineStart();do{if(Pn.v=Pn.o.v=!0,Pn.e){if(Vn)for(Tn=0,En=mn.length;Tn<En;++Tn)zr.point((zn=mn[Tn])[0],zn[1]);else sr(Pn.x,Pn.n.x,1,zr);Pn=Pn.n}else{if(Vn)for(Tn=(mn=Pn.p.z).length-1;Tn>=0;--Tn)zr.point((zn=mn[Tn])[0],zn[1]);else sr(Pn.x,Pn.p.x,-1,zr);Pn=Pn.p}mn=(Pn=Pn.o).z,Vn=!Vn}while(!Pn.v);zr.lineEnd()}}}function mr(mt){if(Ot=mt.length){for(var Ot,zr,vr=0,sr=mt[0];++vr<Ot;)sr.n=zr=mt[vr],zr.p=sr,sr=zr;sr.n=zr=mt[0],zr.p=sr}}We.invert=We;var wr=m();function Wr(mt){return b(mt[0])<=t?mt[0]:M(mt[0])*((b(mt[0])+t)%r-t)}function Kr(mt,Ot){var vr=Wr(Ot),sr=Ot[1],zr=T(sr),un=[T(vr),-p(vr),0],yn=0,Tn=0;wr.reset(),1===zr?sr=i+d:-1===zr&&(sr=-i-d);for(var En=0,Bn=mt.length;En<Bn;++En)if(zn=(mn=mt[En]).length)for(var mn,zn,Pn=mn[zn-1],Vn=Wr(Pn),ea=Pn[1]/2+a,Ha=T(ea),Ea=p(ea),Fa=0;Fa<zn;++Fa,Vn=ta,Ha=Xa,Ea=qa,Pn=Ba){var Ba=mn[Fa],ta=Wr(Ba),ca=Ba[1]/2+a,Xa=T(ca),qa=p(ca),_i=ta-Vn,yi=_i>=0?1:-1,mi=yi*_i,Pi=mi>t,ci=Ha*Xa;if(wr.add(S(ci*yi*T(mi),Ea*qa+ci*p(mi))),yn+=Pi?_i+yi*r:_i,Pi^Vn>=vr^ta>=vr){var _o=re(J(Pn),J(Ba));pe(_o);var io=re(un,_o);pe(io);var ti=(Pi^_i>=0?-1:1)*o(io[2]);(sr>ti||sr===ti&&(_o[0]||_o[1]))&&(Tn+=Pi^_i>=0?1:-1)}}return(yn<-d||yn<d&&wr<-d)^1&Tn}function Cr(mt,Ot,vr,sr){return function(zr){var Bn,mn,zn,un=Ot(zr),yn=Jr(),Tn=Ot(yn),En=!1,Pn={point:Vn,lineStart:Ha,lineEnd:Ea,polygonStart:function(){Pn.point=Fa,Pn.lineStart=Ba,Pn.lineEnd=ta,mn=[],Bn=[]},polygonEnd:function(){Pn.point=Vn,Pn.lineStart=Ha,Pn.lineEnd=Ea,mn=k.merge(mn);var ca=Kr(Bn,sr);mn.length?(En||(zr.polygonStart(),En=!0),en(mn,It,ca,vr,zr)):ca&&(En||(zr.polygonStart(),En=!0),zr.lineStart(),vr(null,null,1,zr),zr.lineEnd()),En&&(zr.polygonEnd(),En=!1),mn=Bn=null},sphere:function(){zr.polygonStart(),zr.lineStart(),vr(null,null,1,zr),zr.lineEnd(),zr.polygonEnd()}};function Vn(ca,Xa){mt(ca,Xa)&&zr.point(ca,Xa)}function ea(ca,Xa){un.point(ca,Xa)}function Ha(){Pn.point=ea,un.lineStart()}function Ea(){Pn.point=Vn,un.lineEnd()}function Fa(ca,Xa){zn.push([ca,Xa]),Tn.point(ca,Xa)}function Ba(){Tn.lineStart(),zn=[]}function ta(){Fa(zn[0][0],zn[0][1]),Tn.lineEnd();var qa,yi,mi,Pi,ca=Tn.clean(),Xa=yn.result(),_i=Xa.length;if(zn.pop(),Bn.push(zn),zn=null,_i){if(1&ca){if((yi=(mi=Xa[0]).length-1)>0){for(En||(zr.polygonStart(),En=!0),zr.lineStart(),qa=0;qa<yi;++qa)zr.point((Pi=mi[qa])[0],Pi[1]);zr.lineEnd()}return}_i>1&&2&ca&&Xa.push(Xa.pop().concat(Xa.shift())),mn.push(Xa.filter(it))}}return Pn}}function it(mt){return mt.length>1}function It(mt,Ot){return((mt=mt.x)[0]<0?mt[1]-i-d:i-mt[1])-((Ot=Ot.x)[0]<0?Ot[1]-i-d:i-Ot[1])}var Qt=Cr(function(){return!0},function ir(mt){var zr,Ot=NaN,vr=NaN,sr=NaN;return{lineStart:function(){mt.lineStart(),zr=1},point:function(un,yn){var Tn=un>0?t:-t,En=b(un-Ot);b(En-t)<d?(mt.point(Ot,vr=(vr+yn)/2>0?i:-i),mt.point(sr,vr),mt.lineEnd(),mt.lineStart(),mt.point(Tn,vr),mt.point(un,vr),zr=0):sr!==Tn&&En>=t&&(b(Ot-sr)<d&&(Ot-=sr*d),b(un-Tn)<d&&(un-=Tn*d),vr=function Or(mt,Ot,vr,sr){var zr,un,yn=T(mt-vr);return b(yn)>d?x((T(Ot)*(un=p(sr))*T(vr)-T(sr)*(zr=p(Ot))*T(mt))/(zr*un*yn)):(Ot+sr)/2}(Ot,vr,un,yn),mt.point(sr,vr),mt.lineEnd(),mt.lineStart(),mt.point(Tn,vr),zr=0),mt.point(Ot=un,vr=yn),sr=Tn},lineEnd:function(){mt.lineEnd(),Ot=vr=NaN},clean:function(){return 2-zr}}},function qr(mt,Ot,vr,sr){var zr;if(null==mt)sr.point(-t,zr=vr*i),sr.point(0,zr),sr.point(t,zr),sr.point(t,0),sr.point(t,-zr),sr.point(0,-zr),sr.point(-t,-zr),sr.point(-t,0),sr.point(-t,zr);else if(b(mt[0]-Ot[0])>d){var un=mt[0]<Ot[0]?t:-t;sr.point(-un,zr=vr*un/2),sr.point(0,zr),sr.point(un,zr)}else sr.point(Ot[0],Ot[1])},[-t,-i]);function Ir(mt){var Ot=p(mt),vr=6*s,sr=Ot>0,zr=b(Ot)>d;function yn(mn,zn){return p(mn)*p(zn)>Ot}function En(mn,zn,Pn){var Ha=[1,0,0],Ea=re(J(mn),J(zn)),Fa=j(Ea,Ea),Ba=Ea[0],ta=Fa-Ba*Ba;if(!ta)return!Pn&&mn;var ca=Ot*Fa/ta,Xa=-Ot*Ba/ta,qa=re(Ha,Ea),_i=ge(Ha,ca);le(_i,ge(Ea,Xa));var mi=qa,Pi=j(_i,mi),ci=j(mi,mi),_o=Pi*Pi-ci*(j(_i,_i)-1);if(!(_o<0)){var io=f(_o),ti=ge(mi,(-Pi-io)/ci);if(le(ti,_i),ti=te(ti),!Pn)return ti;var os,fa=mn[0],wi=zn[0],fo=mn[1],yo=zn[1];wi<fa&&(os=fa,fa=wi,wi=os);var Ms=wi-fa,ss=b(Ms-t)<d;if(!ss&&yo<fo&&(os=fo,fo=yo,yo=os),ss||Ms<d?ss?fo+yo>0^ti[1]<(b(ti[0]-fa)<d?fo:yo):fo<=ti[1]&&ti[1]<=yo:Ms>t^(fa<=ti[0]&&ti[0]<=wi)){var ds=ge(mi,(-Pi+io)/ci);return le(ds,_i),[ti,te(ds)]}}}function Bn(mn,zn){var Pn=sr?mt:t-mt,Vn=0;return mn<-Pn?Vn|=1:mn>Pn&&(Vn|=2),zn<-Pn?Vn|=4:zn>Pn&&(Vn|=8),Vn}return Cr(yn,function Tn(mn){var zn,Pn,Vn,ea,Ha;return{lineStart:function(){ea=Vn=!1,Ha=1},point:function(Ea,Fa){var ta,Ba=[Ea,Fa],ca=yn(Ea,Fa),Xa=sr?ca?0:Bn(Ea,Fa):ca?Bn(Ea+(Ea<0?t:-t),Fa):0;if(!zn&&(ea=Vn=ca)&&mn.lineStart(),ca!==Vn&&(!(ta=En(zn,Ba))||Lr(zn,ta)||Lr(Ba,ta))&&(Ba[2]=1),ca!==Vn)Ha=0,ca?(mn.lineStart(),ta=En(Ba,zn),mn.point(ta[0],ta[1])):(ta=En(zn,Ba),mn.point(ta[0],ta[1],2),mn.lineEnd()),zn=ta;else if(zr&&zn&&sr^ca){var qa;!(Xa&Pn)&&(qa=En(Ba,zn,!0))&&(Ha=0,sr?(mn.lineStart(),mn.point(qa[0][0],qa[0][1]),mn.point(qa[1][0],qa[1][1]),mn.lineEnd()):(mn.point(qa[1][0],qa[1][1]),mn.lineEnd(),mn.lineStart(),mn.point(qa[0][0],qa[0][1],3)))}ca&&(!zn||!Lr(zn,Ba))&&mn.point(Ba[0],Ba[1]),zn=Ba,Vn=ca,Pn=Xa},lineEnd:function(){Vn&&mn.lineEnd(),zn=null},clean:function(){return Ha|(ea&&Vn)<<1}}},function un(mn,zn,Pn,Vn){Gt(Vn,mt,vr,Pn,mn,zn)},sr?[0,-mt]:[-t,mt-t])}var Zr=1e9,An=-Zr;function wn(mt,Ot,vr,sr){function zr(Bn,mn){return mt<=Bn&&Bn<=vr&&Ot<=mn&&mn<=sr}function un(Bn,mn,zn,Pn){var Vn=0,ea=0;if(null==Bn||(Vn=yn(Bn,zn))!==(ea=yn(mn,zn))||En(Bn,mn)<0^zn>0)do{Pn.point(0===Vn||3===Vn?mt:vr,Vn>1?sr:Ot)}while((Vn=(Vn+zn+4)%4)!==ea);else Pn.point(mn[0],mn[1])}function yn(Bn,mn){return b(Bn[0]-mt)<d?mn>0?0:3:b(Bn[0]-vr)<d?mn>0?2:1:b(Bn[1]-Ot)<d?mn>0?1:0:mn>0?3:2}function Tn(Bn,mn){return En(Bn.x,mn.x)}function En(Bn,mn){var zn=yn(Bn,1),Pn=yn(mn,1);return zn!==Pn?zn-Pn:0===zn?mn[1]-Bn[1]:1===zn?Bn[0]-mn[0]:2===zn?Bn[1]-mn[1]:mn[0]-Bn[0]}return function(Bn){var Pn,Vn,ea,Ha,Ea,Fa,Ba,ta,ca,Xa,qa,mn=Bn,zn=Jr(),_i={point:yi,lineStart:function _o(){_i.point=ti,Vn&&Vn.push(ea=[]),Xa=!0,ca=!1,Ba=ta=NaN},lineEnd:function io(){Pn&&(ti(Ha,Ea),Fa&&ca&&zn.rejoin(),Pn.push(zn.result())),_i.point=yi,ca&&mn.lineEnd()},polygonStart:function Pi(){mn=zn,Pn=[],Vn=[],qa=!0},polygonEnd:function ci(){var fa=function mi(){for(var fa=0,wi=0,fo=Vn.length;wi<fo;++wi)for(var fl,ds,yo=Vn[wi],os=1,Ms=yo.length,ss=yo[0],gs=ss[0],Rs=ss[1];os<Ms;++os)fl=gs,ds=Rs,gs=(ss=yo[os])[0],Rs=ss[1],ds<=sr?Rs>sr&&(gs-fl)*(sr-ds)>(Rs-ds)*(mt-fl)&&++fa:Rs<=sr&&(gs-fl)*(sr-ds)<(Rs-ds)*(mt-fl)&&--fa;return fa}(),wi=qa&&fa,fo=(Pn=k.merge(Pn)).length;(wi||fo)&&(Bn.polygonStart(),wi&&(Bn.lineStart(),un(null,null,1,Bn),Bn.lineEnd()),fo&&en(Pn,Tn,fa,un,Bn),Bn.polygonEnd()),mn=Bn,Pn=Vn=ea=null}};function yi(fa,wi){zr(fa,wi)&&mn.point(fa,wi)}function ti(fa,wi){var fo=zr(fa,wi);if(Vn&&ea.push([fa,wi]),Xa)Ha=fa,Ea=wi,Fa=fo,Xa=!1,fo&&(mn.lineStart(),mn.point(fa,wi));else if(fo&&ca)mn.point(fa,wi);else{var yo=[Ba=Math.max(An,Math.min(Zr,Ba)),ta=Math.max(An,Math.min(Zr,ta))],os=[fa=Math.max(An,Math.min(Zr,fa)),wi=Math.max(An,Math.min(Zr,wi))];!function kr(mt,Ot,vr,sr,zr,un){var ea,yn=mt[0],Tn=mt[1],mn=0,zn=1,Pn=Ot[0]-yn,Vn=Ot[1]-Tn;if(ea=vr-yn,Pn||!(ea>0)){if(ea/=Pn,Pn<0){if(ea<mn)return;ea<zn&&(zn=ea)}else if(Pn>0){if(ea>zn)return;ea>mn&&(mn=ea)}if(ea=zr-yn,Pn||!(ea<0)){if(ea/=Pn,Pn<0){if(ea>zn)return;ea>mn&&(mn=ea)}else if(Pn>0){if(ea<mn)return;ea<zn&&(zn=ea)}if(ea=sr-Tn,Vn||!(ea>0)){if(ea/=Vn,Vn<0){if(ea<mn)return;ea<zn&&(zn=ea)}else if(Vn>0){if(ea>zn)return;ea>mn&&(mn=ea)}if(ea=un-Tn,Vn||!(ea<0)){if(ea/=Vn,Vn<0){if(ea>zn)return;ea>mn&&(mn=ea)}else if(Vn>0){if(ea<mn)return;ea<zn&&(zn=ea)}return mn>0&&(mt[0]=yn+mn*Pn,mt[1]=Tn+mn*Vn),zn<1&&(Ot[0]=yn+zn*Pn,Ot[1]=Tn+zn*Vn),!0}}}}}(yo,os,mt,Ot,vr,sr)?fo&&(mn.lineStart(),mn.point(fa,wi),qa=!1):(ca||(mn.lineStart(),mn.point(yo[0],yo[1])),mn.point(os[0],os[1]),fo||mn.lineEnd(),qa=!1)}Ba=fa,ta=wi,ca=fo}return _i}}var Wn,$n,wa,Ln=m(),ma={sphere:R,point:R,lineStart:function $a(){ma.point=Va,ma.lineEnd=Ja},lineEnd:R,polygonStart:R,polygonEnd:R};function Ja(){ma.point=ma.lineEnd=R}function Va(mt,Ot){Wn=mt*=s,$n=T(Ot*=s),wa=p(Ot),ma.point=ai}function ai(mt,Ot){mt*=s;var vr=T(Ot*=s),sr=p(Ot),zr=b(mt-Wn),un=p(zr),Tn=sr*T(zr),En=wa*vr-$n*sr*un,Bn=$n*vr+wa*sr*un;Ln.add(S(f(Tn*Tn+En*En),Bn)),Wn=mt,$n=vr,wa=sr}function Er(mt){return Ln.reset(),N(mt,ma),+Ln}var gn=[null,null],dn={type:"LineString",coordinates:gn};function kn(mt,Ot){return gn[0]=mt,gn[1]=Ot,Er(dn)}var Un={Feature:function(mt,Ot){return Gn(mt.geometry,Ot)},FeatureCollection:function(mt,Ot){for(var vr=mt.features,sr=-1,zr=vr.length;++sr<zr;)if(Gn(vr[sr].geometry,Ot))return!0;return!1}},ra={Sphere:function(){return!0},Point:function(mt,Ot){return On(mt.coordinates,Ot)},MultiPoint:function(mt,Ot){for(var vr=mt.coordinates,sr=-1,zr=vr.length;++sr<zr;)if(On(vr[sr],Ot))return!0;return!1},LineString:function(mt,Ot){return Xn(mt.coordinates,Ot)},MultiLineString:function(mt,Ot){for(var vr=mt.coordinates,sr=-1,zr=vr.length;++sr<zr;)if(Xn(vr[sr],Ot))return!0;return!1},Polygon:function(mt,Ot){return pa(mt.coordinates,Ot)},MultiPolygon:function(mt,Ot){for(var vr=mt.coordinates,sr=-1,zr=vr.length;++sr<zr;)if(pa(vr[sr],Ot))return!0;return!1},GeometryCollection:function(mt,Ot){for(var vr=mt.geometries,sr=-1,zr=vr.length;++sr<zr;)if(Gn(vr[sr],Ot))return!0;return!1}};function Gn(mt,Ot){return!(!mt||!ra.hasOwnProperty(mt.type))&&ra[mt.type](mt,Ot)}function On(mt,Ot){return 0===kn(mt,Ot)}function Xn(mt,Ot){for(var vr,sr,zr,un=0,yn=mt.length;un<yn;un++){if(0===(sr=kn(mt[un],Ot))||un>0&&(zr=kn(mt[un],mt[un-1]))>0&&vr<=zr&&sr<=zr&&(vr+sr-zr)*(1-Math.pow((vr-sr)/zr,2))<n*zr)return!0;vr=sr}return!1}function pa(mt,Ot){return!!Kr(mt.map(oi),Ht(Ot))}function oi(mt){return(mt=mt.map(Ht)).pop(),mt}function Ht(mt){return[mt[0]*s,mt[1]*s]}function rn(mt,Ot,vr){var sr=k.range(mt,Ot-d,vr).concat(Ot);return function(zr){return sr.map(function(un){return[zr,un]})}}function ln(mt,Ot,vr){var sr=k.range(mt,Ot-d,vr).concat(Ot);return function(zr){return sr.map(function(un){return[un,zr]})}}function or(){var mt,Ot,vr,sr,zr,un,yn,Tn,Pn,Vn,ea,Ha,En=10,Bn=En,mn=90,zn=360,Ea=2.5;function Fa(){return{type:"MultiLineString",coordinates:Ba()}}function Ba(){return k.range(w(sr/mn)*mn,vr,mn).map(ea).concat(k.range(w(Tn/zn)*zn,yn,zn).map(Ha)).concat(k.range(w(Ot/En)*En,mt,En).filter(function(ta){return b(ta%mn)>d}).map(Pn)).concat(k.range(w(un/Bn)*Bn,zr,Bn).filter(function(ta){return b(ta%zn)>d}).map(Vn))}return Fa.lines=function(){return Ba().map(function(ta){return{type:"LineString",coordinates:ta}})},Fa.outline=function(){return{type:"Polygon",coordinates:[ea(sr).concat(Ha(yn).slice(1),ea(vr).reverse().slice(1),Ha(Tn).reverse().slice(1))]}},Fa.extent=function(ta){return arguments.length?Fa.extentMajor(ta).extentMinor(ta):Fa.extentMinor()},Fa.extentMajor=function(ta){return arguments.length?(Tn=+ta[0][1],yn=+ta[1][1],(sr=+ta[0][0])>(vr=+ta[1][0])&&(ta=sr,sr=vr,vr=ta),Tn>yn&&(ta=Tn,Tn=yn,yn=ta),Fa.precision(Ea)):[[sr,Tn],[vr,yn]]},Fa.extentMinor=function(ta){return arguments.length?(un=+ta[0][1],zr=+ta[1][1],(Ot=+ta[0][0])>(mt=+ta[1][0])&&(ta=Ot,Ot=mt,mt=ta),un>zr&&(ta=un,un=zr,zr=ta),Fa.precision(Ea)):[[Ot,un],[mt,zr]]},Fa.step=function(ta){return arguments.length?Fa.stepMajor(ta).stepMinor(ta):Fa.stepMinor()},Fa.stepMajor=function(ta){return arguments.length?(mn=+ta[0],zn=+ta[1],Fa):[mn,zn]},Fa.stepMinor=function(ta){return arguments.length?(En=+ta[0],Bn=+ta[1],Fa):[En,Bn]},Fa.precision=function(ta){return arguments.length?(Ea=+ta,Pn=rn(un,zr,90),Vn=ln(Ot,mt,Ea),ea=rn(Tn,yn,90),Ha=ln(sr,vr,Ea),Fa):Ea},Fa.extentMajor([[-180,-90+d],[180,90-d]]).extentMinor([[-180,-80-d],[180,80+d]])}function Lt(mt){return mt}var hr,vn,Fn,Jn,Pt=m(),Wt=m(),_n={point:R,lineStart:R,lineEnd:R,polygonStart:function(){_n.lineStart=jn,_n.lineEnd=_a},polygonEnd:function(){_n.lineStart=_n.lineEnd=_n.point=R,Pt.add(b(Wt)),Wt.reset()},result:function(){var mt=Pt/2;return Pt.reset(),mt}};function jn(){_n.point=ia}function ia(mt,Ot){_n.point=va,hr=Fn=mt,vn=Jn=Ot}function va(mt,Ot){Wt.add(Jn*mt-Fn*Ot),Fn=mt,Jn=Ot}function _a(){va(hr,vn)}var sa=1/0,Aa=sa,xo=-sa,Ao=xo,Io={point:function cs(mt,Ot){mt<sa&&(sa=mt),mt>xo&&(xo=mt),Ot<Aa&&(Aa=Ot),Ot>Ao&&(Ao=Ot)},lineStart:R,lineEnd:R,polygonStart:R,polygonEnd:R,result:function(){var mt=[[sa,Aa],[xo,Ao]];return xo=Ao=-(Aa=sa=1/0),mt}};var ro,Gs,no,Mi,Jl=0,wl=0,gi=0,fs=0,Hs=0,to=0,Mo=0,zl=0,Uo=0,So={point:ao,lineStart:Qo,lineEnd:Ho,polygonStart:function(){So.lineStart=ku,So.lineEnd=Zs},polygonEnd:function(){So.point=ao,So.lineStart=Qo,So.lineEnd=Ho},result:function(){var mt=Uo?[Mo/Uo,zl/Uo]:to?[fs/to,Hs/to]:gi?[Jl/gi,wl/gi]:[NaN,NaN];return Jl=wl=gi=fs=Hs=to=Mo=zl=Uo=0,mt}};function ao(mt,Ot){Jl+=mt,wl+=Ot,++gi}function Qo(){So.point=Vo}function Vo(mt,Ot){So.point=Tl,ao(no=mt,Mi=Ot)}function Tl(mt,Ot){var vr=mt-no,sr=Ot-Mi,zr=f(vr*vr+sr*sr);fs+=zr*(no+mt)/2,Hs+=zr*(Mi+Ot)/2,to+=zr,ao(no=mt,Mi=Ot)}function Ho(){So.point=ao}function ku(){So.point=ko}function Zs(){pu(ro,Gs)}function ko(mt,Ot){So.point=pu,ao(ro=no=mt,Gs=Mi=Ot)}function pu(mt,Ot){var vr=mt-no,sr=Ot-Mi,zr=f(vr*vr+sr*sr);fs+=zr*(no+mt)/2,Hs+=zr*(Mi+Ot)/2,to+=zr,Mo+=(zr=Mi*mt-no*Ot)*(no+mt),zl+=zr*(Mi+Ot),Uo+=3*zr,ao(no=mt,Mi=Ot)}function bs(mt){this._context=mt}bs.prototype={_radius:4.5,pointRadius:function(mt){return this._radius=mt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(mt,Ot){switch(this._point){case 0:this._context.moveTo(mt,Ot),this._point=1;break;case 1:this._context.lineTo(mt,Ot);break;default:this._context.moveTo(mt+this._radius,Ot),this._context.arc(mt,Ot,this._radius,0,r)}},result:R};var Fl,Cu,Eu,Ys,Ol,_s=m(),ws={point:R,lineStart:function(){ws.point=Kl},lineEnd:function(){Fl&&al(Cu,Eu),ws.point=R},polygonStart:function(){Fl=!0},polygonEnd:function(){Fl=null},result:function(){var mt=+_s;return _s.reset(),mt}};function Kl(mt,Ot){ws.point=al,Cu=Ys=mt,Eu=Ol=Ot}function al(mt,Ot){_s.add(f((Ys-=mt)*Ys+(Ol-=Ot)*Ol)),Ys=mt,Ol=Ot}function Ql(){this._string=[]}function Lu(mt){return"m0,"+mt+"a"+mt+","+mt+" 0 1,1 0,"+-2*mt+"a"+mt+","+mt+" 0 1,1 0,"+2*mt+"z"}function Ws(mt){return function(Ot){var vr=new Nl;for(var sr in mt)vr[sr]=mt[sr];return vr.stream=Ot,vr}}function Nl(){}function Al(mt,Ot,vr){var sr=mt.clipExtent&&mt.clipExtent();return mt.scale(150).translate([0,0]),null!=sr&&mt.clipExtent(null),N(vr,mt.stream(Io)),Ot(Io.result()),null!=sr&&mt.clipExtent(sr),mt}function il(mt,Ot,vr){return Al(mt,function(sr){var zr=Ot[1][0]-Ot[0][0],un=Ot[1][1]-Ot[0][1],yn=Math.min(zr/(sr[1][0]-sr[0][0]),un/(sr[1][1]-sr[0][1])),Tn=+Ot[0][0]+(zr-yn*(sr[1][0]+sr[0][0]))/2,En=+Ot[0][1]+(un-yn*(sr[1][1]+sr[0][1]))/2;mt.scale(150*yn).translate([Tn,En])},vr)}function Ml(mt,Ot,vr){return il(mt,[[0,0],Ot],vr)}function ql(mt,Ot,vr){return Al(mt,function(sr){var zr=+Ot,un=zr/(sr[1][0]-sr[0][0]),yn=(zr-un*(sr[1][0]+sr[0][0]))/2,Tn=-un*sr[0][1];mt.scale(150*un).translate([yn,Tn])},vr)}function Xs(mt,Ot,vr){return Al(mt,function(sr){var zr=+Ot,un=zr/(sr[1][1]-sr[0][1]),yn=-un*sr[0][0],Tn=(zr-un*(sr[1][1]+sr[0][1]))/2;mt.scale(150*un).translate([yn,Tn])},vr)}Ql.prototype={_radius:4.5,_circle:Lu(4.5),pointRadius:function(mt){return(mt=+mt)!==this._radius&&(this._radius=mt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(mt,Ot){switch(this._point){case 0:this._string.push("M",mt,",",Ot),this._point=1;break;case 1:this._string.push("L",mt,",",Ot);break;default:null==this._circle&&(this._circle=Lu(this._radius)),this._string.push("M",mt,",",Ot,this._circle)}},result:function(){if(this._string.length){var mt=this._string.join("");return this._string=[],mt}return null}},Nl.prototype={constructor:Nl,point:function(mt,Ot){this.stream.point(mt,Ot)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var eu=p(30*s);function Pu(mt,Ot){return+Ot?function Go(mt,Ot){function vr(sr,zr,un,yn,Tn,En,Bn,mn,zn,Pn,Vn,ea,Ha,Ea){var Fa=Bn-sr,Ba=mn-zr,ta=Fa*Fa+Ba*Ba;if(ta>4*Ot&&Ha--){var ca=yn+Pn,Xa=Tn+Vn,qa=En+ea,_i=f(ca*ca+Xa*Xa+qa*qa),yi=o(qa/=_i),mi=b(b(qa)-1)<d||b(un-zn)<d?(un+zn)/2:S(Xa,ca),Pi=mt(mi,yi),ci=Pi[0],_o=Pi[1],io=ci-sr,ti=_o-zr,fa=Ba*io-Fa*ti;(fa*fa/ta>Ot||b((Fa*io+Ba*ti)/ta-.5)>.3||yn*Pn+Tn*Vn+En*ea<eu)&&(vr(sr,zr,un,yn,Tn,En,ci,_o,mi,ca/=_i,Xa/=_i,qa,Ha,Ea),Ea.point(ci,_o),vr(ci,_o,mi,ca,Xa,qa,Bn,mn,zn,Pn,Vn,ea,Ha,Ea))}}return function(sr){var zr,un,yn,Tn,En,Bn,mn,zn,Pn,Vn,ea,Ha,Ea={point:Fa,lineStart:Ba,lineEnd:ca,polygonStart:function(){sr.polygonStart(),Ea.lineStart=Xa},polygonEnd:function(){sr.polygonEnd(),Ea.lineStart=Ba}};function Fa(yi,mi){yi=mt(yi,mi),sr.point(yi[0],yi[1])}function Ba(){zn=NaN,Ea.point=ta,sr.lineStart()}function ta(yi,mi){var Pi=J([yi,mi]),ci=mt(yi,mi);vr(zn,Pn,mn,Vn,ea,Ha,zn=ci[0],Pn=ci[1],mn=yi,Vn=Pi[0],ea=Pi[1],Ha=Pi[2],16,sr),sr.point(zn,Pn)}function ca(){Ea.point=Fa,sr.lineEnd()}function Xa(){Ba(),Ea.point=qa,Ea.lineEnd=_i}function qa(yi,mi){ta(zr=yi,mi),un=zn,yn=Pn,Tn=Vn,En=ea,Bn=Ha,Ea.point=ta}function _i(){vr(zn,Pn,mn,Vn,ea,Ha,un,yn,zr,Tn,En,Bn,16,sr),Ea.lineEnd=ca,ca()}return Ea}}(mt,Ot):function gu(mt){return Ws({point:function(Ot,vr){Ot=mt(Ot,vr),this.stream.point(Ot[0],Ot[1])}})}(mt)}var Sl=Ws({point:function(mt,Ot){this.stream.point(mt*s,Ot*s)}});function tu(mt,Ot,vr,sr,zr){function un(yn,Tn){return[Ot+mt*(yn*=sr),vr-mt*(Tn*=zr)]}return un.invert=function(yn,Tn){return[(yn-Ot)/mt*sr,(vr-Tn)/mt*zr]},un}function ns(mt,Ot,vr,sr,zr,un){var yn=p(un),Tn=T(un),En=yn*mt,Bn=Tn*mt,mn=yn/mt,zn=Tn/mt,Pn=(Tn*vr-yn*Ot)/mt,Vn=(Tn*Ot+yn*vr)/mt;function ea(Ha,Ea){return[En*(Ha*=sr)-Bn*(Ea*=zr)+Ot,vr-Bn*Ha-En*Ea]}return ea.invert=function(Ha,Ea){return[sr*(mn*Ha-zn*Ea+Pn),zr*(Vn-zn*Ha-mn*Ea)]},ea}function Co(mt){return Bl(function(){return mt})()}function Bl(mt){var Ot,mn,Fa,Ba,ta,qa,_i,yi,mi,Pi,vr=150,sr=480,zr=250,un=0,yn=0,Tn=0,En=0,Bn=0,zn=0,Pn=1,Vn=1,ea=null,Ha=Qt,Ea=null,ca=Lt,Xa=.5;function ci(fa){return yi(fa[0]*s,fa[1]*s)}function _o(fa){return(fa=yi.invert(fa[0],fa[1]))&&[fa[0]*g,fa[1]*g]}function io(){var fa=ns(vr,0,0,Pn,Vn,zn).apply(null,Ot(un,yn)),wi=(zn?ns:tu)(vr,sr-fa[0],zr-fa[1],Pn,Vn,zn);return mn=st(Tn,En,Bn),_i=Je(Ot,wi),yi=Je(mn,_i),qa=Pu(_i,Xa),ti()}function ti(){return mi=Pi=null,ci}return ci.stream=function(fa){return mi&&Pi===fa?mi:mi=Sl(function ol(mt){return Ws({point:function(Ot,vr){var sr=mt(Ot,vr);return this.stream.point(sr[0],sr[1])}})}(mn)(Ha(qa(ca(Pi=fa)))))},ci.preclip=function(fa){return arguments.length?(Ha=fa,ea=void 0,ti()):Ha},ci.postclip=function(fa){return arguments.length?(ca=fa,Ea=Fa=Ba=ta=null,ti()):ca},ci.clipAngle=function(fa){return arguments.length?(Ha=+fa?Ir(ea=fa*s):(ea=null,Qt),ti()):ea*g},ci.clipExtent=function(fa){return arguments.length?(ca=null==fa?(Ea=Fa=Ba=ta=null,Lt):wn(Ea=+fa[0][0],Fa=+fa[0][1],Ba=+fa[1][0],ta=+fa[1][1]),ti()):null==Ea?null:[[Ea,Fa],[Ba,ta]]},ci.scale=function(fa){return arguments.length?(vr=+fa,io()):vr},ci.translate=function(fa){return arguments.length?(sr=+fa[0],zr=+fa[1],io()):[sr,zr]},ci.center=function(fa){return arguments.length?(un=fa[0]%360*s,yn=fa[1]%360*s,io()):[un*g,yn*g]},ci.rotate=function(fa){return arguments.length?(Tn=fa[0]%360*s,En=fa[1]%360*s,Bn=fa.length>2?fa[2]%360*s:0,io()):[Tn*g,En*g,Bn*g]},ci.angle=function(fa){return arguments.length?(zn=fa%360*s,io()):zn*g},ci.reflectX=function(fa){return arguments.length?(Pn=fa?-1:1,io()):Pn<0},ci.reflectY=function(fa){return arguments.length?(Vn=fa?-1:1,io()):Vn<0},ci.precision=function(fa){return arguments.length?(qa=Pu(_i,Xa=fa*fa),ti()):f(Xa)},ci.fitExtent=function(fa,wi){return il(ci,fa,wi)},ci.fitSize=function(fa,wi){return Ml(ci,fa,wi)},ci.fitWidth=function(fa,wi){return ql(ci,fa,wi)},ci.fitHeight=function(fa,wi){return Xs(ci,fa,wi)},function(){return Ot=mt.apply(this,arguments),ci.invert=Ot.invert&&_o,io()}}function Ls(mt){var Ot=0,vr=t/3,sr=Bl(mt),zr=sr(Ot,vr);return zr.parallels=function(un){return arguments.length?sr(Ot=un[0]*s,vr=un[1]*s):[Ot*g,vr*g]},zr}function co(mt,Ot){var vr=T(mt),sr=(vr+T(Ot))/2;if(b(sr)<d)return function Ts(mt){var Ot=p(mt);function vr(sr,zr){return[sr*Ot,T(zr)/Ot]}return vr.invert=function(sr,zr){return[sr/Ot,o(zr*Ot)]},vr}(mt);var zr=1+vr*(2*sr-vr),un=f(zr)/sr;function yn(Tn,En){var Bn=f(zr-2*sr*T(En))/sr;return[Bn*T(Tn*=sr),un-Bn*p(Tn)]}return yn.invert=function(Tn,En){var Bn=un-En,mn=S(Tn,b(Bn))*M(Bn);return Bn*sr<0&&(mn-=t*M(Tn)*M(Bn)),[mn/sr,o((zr-(Tn*Tn+Bn*Bn)*sr*sr)/(2*sr))]},yn}function sl(){return Ls(co).scale(155.424).center([0,33.6442])}function Du(){return sl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function As(mt){return function(Ot,vr){var sr=p(Ot),zr=p(vr),un=mt(sr*zr);return[un*zr*T(Ot),un*T(vr)]}}function hs(mt){return function(Ot,vr){var sr=f(Ot*Ot+vr*vr),zr=mt(sr),un=T(zr),yn=p(zr);return[S(Ot*un,sr*yn),o(sr&&vr*un/sr)]}}var Zo=As(function(mt){return f(2/(1+mt))});Zo.invert=hs(function(mt){return 2*o(mt/2)});var ll=As(function(mt){return(mt=h(mt))&&mt/T(mt)});function as(mt,Ot){return[mt,y(u((i+Ot)/2))]}function nu(mt){var Tn,En,Bn,Ot=Co(mt),vr=Ot.center,sr=Ot.scale,zr=Ot.translate,un=Ot.clipExtent,yn=null;function mn(){var zn=t*sr(),Pn=Ot(Dt(Ot.rotate()).invert([0,0]));return un(null==yn?[[Pn[0]-zn,Pn[1]-zn],[Pn[0]+zn,Pn[1]+zn]]:mt===as?[[Math.max(Pn[0]-zn,yn),Tn],[Math.min(Pn[0]+zn,En),Bn]]:[[yn,Math.max(Pn[1]-zn,Tn)],[En,Math.min(Pn[1]+zn,Bn)]])}return Ot.scale=function(zn){return arguments.length?(sr(zn),mn()):sr()},Ot.translate=function(zn){return arguments.length?(zr(zn),mn()):zr()},Ot.center=function(zn){return arguments.length?(vr(zn),mn()):vr()},Ot.clipExtent=function(zn){return arguments.length?(null==zn?yn=Tn=En=Bn=null:(yn=+zn[0][0],Tn=+zn[0][1],En=+zn[1][0],Bn=+zn[1][1]),mn()):null==yn?null:[[yn,Tn],[En,Bn]]},mn()}function ul(mt){return u((i+mt)/2)}function au(mt,Ot){var vr=p(mt),sr=mt===Ot?T(mt):y(vr/p(Ot))/y(ul(Ot)/ul(mt)),zr=vr*A(ul(mt),sr)/sr;if(!sr)return as;function un(yn,Tn){zr>0?Tn<-i+d&&(Tn=-i+d):Tn>i-d&&(Tn=i-d);var En=zr/A(ul(Tn),sr);return[En*T(sr*yn),zr-En*p(sr*yn)]}return un.invert=function(yn,Tn){var En=zr-Tn,Bn=M(sr)*f(yn*yn+En*En),mn=S(yn,b(En))*M(En);return En*sr<0&&(mn-=t*M(yn)*M(En)),[mn/sr,2*x(A(zr/Bn,1/sr))-i]},un}function El(mt,Ot){return[mt,Ot]}function Vl(mt,Ot){var vr=p(mt),sr=mt===Ot?T(mt):(vr-p(Ot))/(Ot-mt),zr=vr/sr+mt;if(b(sr)<d)return El;function un(yn,Tn){var En=zr-Tn,Bn=sr*yn;return[En*T(Bn),zr-En*p(Bn)]}return un.invert=function(yn,Tn){var En=zr-Tn,Bn=S(yn,b(En))*M(En);return En*sr<0&&(Bn-=t*M(yn)*M(En)),[Bn/sr,zr-M(sr)*f(yn*yn+En*En)]},un}ll.invert=hs(function(mt){return mt}),as.invert=function(mt,Ot){return[mt,2*x(l(Ot))-i]},El.invert=El;var Ui=1.340264,cl=-.081106,js=893e-6,is=.003796,vs=f(3)/2;function uo(mt,Ot){var vr=o(vs*T(Ot)),sr=vr*vr,zr=sr*sr*sr;return[mt*p(vr)/(vs*(Ui+3*cl*sr+zr*(7*js+9*is*sr))),vr*(Ui+cl*sr+zr*(js+is*sr))]}function $o(mt,Ot){var vr=p(Ot),sr=p(mt)*vr;return[vr*T(mt)/sr,T(Ot)/sr]}function Ds(mt,Ot){var vr=Ot*Ot,sr=vr*vr;return[mt*(.8707-.131979*vr+sr*(sr*(.003971*vr-.001529*sr)-.013791)),Ot*(1.007226+vr*(.015085+sr*(.028874*vr-.044475-.005916*sr)))]}function Ji(mt,Ot){return[p(Ot)*T(mt),T(Ot)]}function Yo(mt,Ot){var vr=p(Ot),sr=1+p(mt)*vr;return[vr*T(mt)/sr,T(Ot)/sr]}function Zl(mt,Ot){return[y(u((i+Ot)/2)),-mt]}uo.invert=function(mt,Ot){for(var yn,vr=Ot,sr=vr*vr,zr=sr*sr*sr,un=0;un<12&&(zr=(sr=(vr-=yn=(vr*(Ui+cl*sr+zr*(js+is*sr))-Ot)/(Ui+3*cl*sr+zr*(7*js+9*is*sr)))*vr)*sr*sr,!(b(yn)<n));++un);return[vs*mt*(Ui+3*cl*sr+zr*(7*js+9*is*sr))/p(vr),o(T(vr)/vs)]},$o.invert=hs(x),Ds.invert=function(mt,Ot){var zr,vr=Ot,sr=25;do{var un=vr*vr,yn=un*un;vr-=zr=(vr*(1.007226+un*(.015085+yn*(.028874*un-.044475-.005916*yn)))-Ot)/(1.007226+un*(.045255+yn*(.259866*un-.311325-.005916*11*yn)))}while(b(zr)>d&&--sr>0);return[mt/(.8707+(un=vr*vr)*(un*(un*un*un*(.003971-.001529*un)-.013791)-.131979)),vr]},Ji.invert=hs(o),Yo.invert=hs(function(mt){return 2*x(mt)}),Zl.invert=function(mt,Ot){return[-Ot,2*x(l(mt))-i]},_.geoAlbers=Du,_.geoAlbersUsa=function Ru(){var mt,Ot,sr,un,Tn,En,vr=Du(),zr=sl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),yn=sl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Bn={point:function(Pn,Vn){En=[Pn,Vn]}};function mn(Pn){var Vn=Pn[0],ea=Pn[1];return En=null,sr.point(Vn,ea),En||(un.point(Vn,ea),En)||(Tn.point(Vn,ea),En)}function zn(){return mt=Ot=null,mn}return mn.invert=function(Pn){var Vn=vr.scale(),ea=vr.translate(),Ha=(Pn[0]-ea[0])/Vn,Ea=(Pn[1]-ea[1])/Vn;return(Ea>=.12&&Ea<.234&&Ha>=-.425&&Ha<-.214?zr:Ea>=.166&&Ea<.234&&Ha>=-.214&&Ha<-.115?yn:vr).invert(Pn)},mn.stream=function(Pn){return mt&&Ot===Pn?mt:mt=function ru(mt){var Ot=mt.length;return{point:function(vr,sr){for(var zr=-1;++zr<Ot;)mt[zr].point(vr,sr)},sphere:function(){for(var vr=-1;++vr<Ot;)mt[vr].sphere()},lineStart:function(){for(var vr=-1;++vr<Ot;)mt[vr].lineStart()},lineEnd:function(){for(var vr=-1;++vr<Ot;)mt[vr].lineEnd()},polygonStart:function(){for(var vr=-1;++vr<Ot;)mt[vr].polygonStart()},polygonEnd:function(){for(var vr=-1;++vr<Ot;)mt[vr].polygonEnd()}}}([vr.stream(Ot=Pn),zr.stream(Pn),yn.stream(Pn)])},mn.precision=function(Pn){return arguments.length?(vr.precision(Pn),zr.precision(Pn),yn.precision(Pn),zn()):vr.precision()},mn.scale=function(Pn){return arguments.length?(vr.scale(Pn),zr.scale(.35*Pn),yn.scale(Pn),mn.translate(vr.translate())):vr.scale()},mn.translate=function(Pn){if(!arguments.length)return vr.translate();var Vn=vr.scale(),ea=+Pn[0],Ha=+Pn[1];return sr=vr.translate(Pn).clipExtent([[ea-.455*Vn,Ha-.238*Vn],[ea+.455*Vn,Ha+.238*Vn]]).stream(Bn),un=zr.translate([ea-.307*Vn,Ha+.201*Vn]).clipExtent([[ea-.425*Vn+d,Ha+.12*Vn+d],[ea-.214*Vn-d,Ha+.234*Vn-d]]).stream(Bn),Tn=yn.translate([ea-.205*Vn,Ha+.212*Vn]).clipExtent([[ea-.214*Vn+d,Ha+.166*Vn+d],[ea-.115*Vn-d,Ha+.234*Vn-d]]).stream(Bn),zn()},mn.fitExtent=function(Pn,Vn){return il(mn,Pn,Vn)},mn.fitSize=function(Pn,Vn){return Ml(mn,Pn,Vn)},mn.fitWidth=function(Pn,Vn){return ql(mn,Pn,Vn)},mn.fitHeight=function(Pn,Vn){return Xs(mn,Pn,Vn)},mn.scale(1070)},_.geoArea=function Y(mt){return X.reset(),N(mt,$),2*X},_.geoAzimuthalEqualArea=function kl(){return Co(Zo).scale(124.75).clipAngle(179.999)},_.geoAzimuthalEqualAreaRaw=Zo,_.geoAzimuthalEquidistant=function Iu(){return Co(ll).scale(79.4188).clipAngle(179.999)},_.geoAzimuthalEquidistantRaw=ll,_.geoBounds=function at(mt){var Ot,vr,sr,zr,un,yn,Tn;if(de=we=-(xe=ke=1/0),Fe=[],N(mt,Ue),vr=Fe.length){for(Fe.sort(Et),Ot=1,un=[sr=Fe[0]];Ot<vr;++Ot)wt(sr,(zr=Fe[Ot])[0])||wt(sr,zr[1])?(Zt(sr[0],zr[1])>Zt(sr[0],sr[1])&&(sr[1]=zr[1]),Zt(zr[0],sr[1])>Zt(sr[0],sr[1])&&(sr[0]=zr[0])):un.push(sr=zr);for(yn=-1/0,Ot=0,sr=un[vr=un.length-1];Ot<=vr;sr=zr,++Ot)(Tn=Zt(sr[1],(zr=un[Ot])[0]))>yn&&(yn=Tn,xe=zr[0],we=sr[1])}return Fe=Ke=null,xe===1/0||ke===1/0?[[NaN,NaN],[NaN,NaN]]:[[xe,ke],[we,de]]},_.geoCentroid=function Me(mt){vt=Qe=Pe=Ze=Xe=rt=kt=Tt=Xt=ar=Ut=0,N(mt,on);var Ot=Xt,vr=ar,sr=Ut,zr=Ot*Ot+vr*vr+sr*sr;return zr<n&&(Ot=rt,vr=kt,sr=Tt,Qe<d&&(Ot=Pe,vr=Ze,sr=Xe),(zr=Ot*Ot+vr*vr+sr*sr)<n)?[NaN,NaN]:[S(vr,Ot)*g,o(sr/f(zr))*g]},_.geoCircle=function pr(){var sr,zr,mt=Se([0,0]),Ot=Se(90),vr=Se(6),un={point:function yn(En,Bn){sr.push(En=zr(En,Bn)),En[0]*=g,En[1]*=g}};function Tn(){var En=mt.apply(this,arguments),Bn=Ot.apply(this,arguments)*s,mn=vr.apply(this,arguments)*s;return sr=[],zr=st(-En[0]*s,-En[1]*s,0).invert,Gt(un,Bn,mn,1),En={type:"Polygon",coordinates:[sr]},sr=zr=null,En}return Tn.center=function(En){return arguments.length?(mt="function"==typeof En?En:Se([+En[0],+En[1]]),Tn):mt},Tn.radius=function(En){return arguments.length?(Ot="function"==typeof En?En:Se(+En),Tn):Ot},Tn.precision=function(En){return arguments.length?(vr="function"==typeof En?En:Se(+En),Tn):vr},Tn},_.geoClipAntimeridian=Qt,_.geoClipCircle=Ir,_.geoClipExtent=function Zn(){var zr,un,yn,mt=0,Ot=0,vr=960,sr=500;return yn={stream:function(Tn){return zr&&un===Tn?zr:zr=wn(mt,Ot,vr,sr)(un=Tn)},extent:function(Tn){return arguments.length?(mt=+Tn[0][0],Ot=+Tn[0][1],vr=+Tn[1][0],sr=+Tn[1][1],zr=un=null,yn):[[mt,Ot],[vr,sr]]}}},_.geoClipRectangle=wn,_.geoConicConformal=function Cl(){return Ls(au).scale(109.5).parallels([30,30])},_.geoConicConformalRaw=au,_.geoConicEqualArea=sl,_.geoConicEqualAreaRaw=co,_.geoConicEquidistant=function Xu(){return Ls(Vl).scale(131.154).center([0,13.9389])},_.geoConicEquidistantRaw=Vl,_.geoContains=function dr(mt,Ot){return(mt&&Un.hasOwnProperty(mt.type)?Un[mt.type]:Gn)(mt,Ot)},_.geoDistance=kn,_.geoEqualEarth=function iu(){return Co(uo).scale(177.158)},_.geoEqualEarthRaw=uo,_.geoEquirectangular=function Ul(){return Co(El).scale(152.63)},_.geoEquirectangularRaw=El,_.geoGnomonic=function Ps(){return Co($o).scale(144.049).clipAngle(60)},_.geoGnomonicRaw=$o,_.geoGraticule=or,_.geoGraticule10=function Br(){return or()()},_.geoIdentity=function Js(){var yn,Tn,Bn,mn,zn,Ea,Fa,mt=1,Ot=0,vr=0,sr=1,zr=1,un=0,En=null,Pn=1,Vn=1,ea=Ws({point:function(ca,Xa){var qa=ta([ca,Xa]);this.stream.point(qa[0],qa[1])}}),Ha=Lt;function Ba(){return Pn=mt*sr,Vn=mt*zr,Ea=Fa=null,ta}function ta(ca){var Xa=ca[0]*Pn,qa=ca[1]*Vn;if(un){var _i=qa*yn-Xa*Tn;Xa=Xa*yn+qa*Tn,qa=_i}return[Xa+Ot,qa+vr]}return ta.invert=function(ca){var Xa=ca[0]-Ot,qa=ca[1]-vr;if(un){var _i=qa*yn+Xa*Tn;Xa=Xa*yn-qa*Tn,qa=_i}return[Xa/Pn,qa/Vn]},ta.stream=function(ca){return Ea&&Fa===ca?Ea:Ea=ea(Ha(Fa=ca))},ta.postclip=function(ca){return arguments.length?(Ha=ca,En=Bn=mn=zn=null,Ba()):Ha},ta.clipExtent=function(ca){return arguments.length?(Ha=null==ca?(En=Bn=mn=zn=null,Lt):wn(En=+ca[0][0],Bn=+ca[0][1],mn=+ca[1][0],zn=+ca[1][1]),Ba()):null==En?null:[[En,Bn],[mn,zn]]},ta.scale=function(ca){return arguments.length?(mt=+ca,Ba()):mt},ta.translate=function(ca){return arguments.length?(Ot=+ca[0],vr=+ca[1],Ba()):[Ot,vr]},ta.angle=function(ca){return arguments.length?(Tn=T(un=ca%360*s),yn=p(un),Ba()):un*g},ta.reflectX=function(ca){return arguments.length?(sr=ca?-1:1,Ba()):sr<0},ta.reflectY=function(ca){return arguments.length?(zr=ca?-1:1,Ba()):zr<0},ta.fitExtent=function(ca,Xa){return il(ta,ca,Xa)},ta.fitSize=function(ca,Xa){return Ml(ta,ca,Xa)},ta.fitWidth=function(ca,Xa){return ql(ta,ca,Xa)},ta.fitHeight=function(ca,Xa){return Xs(ta,ca,Xa)},ta},_.geoInterpolate=function Rt(mt,Ot){var vr=mt[0]*s,sr=mt[1]*s,zr=Ot[0]*s,un=Ot[1]*s,yn=p(sr),Tn=T(sr),En=p(un),Bn=T(un),mn=yn*p(vr),zn=yn*T(vr),Pn=En*p(zr),Vn=En*T(zr),ea=2*o(f(C(un-sr)+yn*En*C(zr-vr))),Ha=T(ea),Ea=ea?function(Fa){var Ba=T(Fa*=ea)/Ha,ta=T(ea-Fa)/Ha,ca=ta*mn+Ba*Pn,Xa=ta*zn+Ba*Vn,qa=ta*Tn+Ba*Bn;return[S(Xa,ca)*g,S(qa,f(ca*ca+Xa*Xa))*g]}:function(){return[vr*g,sr*g]};return Ea.distance=ea,Ea},_.geoLength=Er,_.geoMercator=function zu(){return nu(as).scale(961/r)},_.geoMercatorRaw=as,_.geoNaturalEarth1=function ps(){return Co(Ds).scale(175.295)},_.geoNaturalEarth1Raw=Ds,_.geoOrthographic=function bo(){return Co(Ji).scale(249.5).clipAngle(90+d)},_.geoOrthographicRaw=Ji,_.geoPath=function $l(mt,Ot){var sr,zr,vr=4.5;function un(yn){return yn&&("function"==typeof vr&&zr.pointRadius(+vr.apply(this,arguments)),N(yn,sr(zr))),zr.result()}return un.area=function(yn){return N(yn,sr(_n)),_n.result()},un.measure=function(yn){return N(yn,sr(ws)),ws.result()},un.bounds=function(yn){return N(yn,sr(Io)),Io.result()},un.centroid=function(yn){return N(yn,sr(So)),So.result()},un.projection=function(yn){return arguments.length?(sr=null==yn?(mt=null,Lt):(mt=yn).stream,un):mt},un.context=function(yn){return arguments.length?(zr=null==yn?(Ot=null,new Ql):new bs(Ot=yn),"function"!=typeof vr&&zr.pointRadius(vr),un):Ot},un.pointRadius=function(yn){return arguments.length?(vr="function"==typeof yn?yn:(zr.pointRadius(+yn),+yn),un):vr},un.projection(mt).context(Ot)},_.geoProjection=Co,_.geoProjectionMutator=Bl,_.geoRotation=Dt,_.geoStereographic=function Gl(){return Co(Yo).scale(250).clipAngle(142)},_.geoStereographicRaw=Yo,_.geoStream=N,_.geoTransform=function Wu(mt){return{stream:Ws(mt)}},_.geoTransverseMercator=function yu(){var mt=nu(Zl),Ot=mt.center,vr=mt.rotate;return mt.center=function(sr){return arguments.length?Ot([-sr[1],sr[0]]):[(sr=Ot())[1],-sr[0]]},mt.rotate=function(sr){return arguments.length?vr([sr[0],sr[1],sr.length>2?sr[2]+90:90]):[(sr=vr())[0],sr[1],sr[2]-90]},vr([0,0,90]).scale(159.155)},_.geoTransverseMercatorRaw=Zl,Object.defineProperty(_,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==ie?k(ae,v("d3-array")):k((_=_||self).d3=_.d3||{},_.d3)},{"d3-array":107}],115:[function(v,ie,ae){var _,k;_=this,k=function(_){"use strict";function k(Qe,Pe){return Qe.parent===Pe.parent?1:2}function E(Qe,Pe){return Qe+Pe.x}function c(Qe,Pe){return Math.max(Qe,Pe.y)}function i(Qe){var Pe=0,Ze=Qe.children,Xe=Ze&&Ze.length;if(Xe)for(;--Xe>=0;)Pe+=Ze[Xe].value;else Pe=1;Qe.value=Pe}function T(Qe,Pe){var rt,Tt,Xt,ar,Ut,Ze=new o(Qe),Xe=+Qe.value&&(Ze.value=Qe.value),kt=[Ze];for(null==Pe&&(Pe=f);rt=kt.pop();)if(Xe&&(rt.value=+rt.data.value),(Xt=Pe(rt.data))&&(Ut=Xt.length))for(rt.children=new Array(Ut),ar=Ut-1;ar>=0;--ar)kt.push(Tt=rt.children[ar]=new o(Xt[ar])),Tt.parent=rt,Tt.depth=rt.depth+1;return Ze.eachBefore(h)}function f(Qe){return Qe.children}function u(Qe){Qe.data=Qe.data.data}function h(Qe){var Pe=0;do{Qe.height=Pe}while((Qe=Qe.parent)&&Qe.height<++Pe)}function o(Qe){this.data=Qe,this.depth=this.height=0,this.parent=null}o.prototype=T.prototype={constructor:o,count:function a(){return this.eachAfter(i)},each:function r(Qe){var Ze,rt,kt,Tt,Pe=this,Xe=[Pe];do{for(Ze=Xe.reverse(),Xe=[];Pe=Ze.pop();)if(Qe(Pe),rt=Pe.children)for(kt=0,Tt=rt.length;kt<Tt;++kt)Xe.push(rt[kt])}while(Xe.length);return this},eachAfter:function s(Qe){for(var rt,kt,Tt,Pe=this,Ze=[Pe],Xe=[];Pe=Ze.pop();)if(Xe.push(Pe),rt=Pe.children)for(kt=0,Tt=rt.length;kt<Tt;++kt)Ze.push(rt[kt]);for(;Pe=Xe.pop();)Qe(Pe);return this},eachBefore:function g(Qe){for(var Xe,rt,Pe=this,Ze=[Pe];Pe=Ze.pop();)if(Qe(Pe),Xe=Pe.children)for(rt=Xe.length-1;rt>=0;--rt)Ze.push(Xe[rt]);return this},sum:function b(Qe){return this.eachAfter(function(Pe){for(var Ze=+Qe(Pe.data)||0,Xe=Pe.children,rt=Xe&&Xe.length;--rt>=0;)Ze+=Xe[rt].value;Pe.value=Ze})},sort:function x(Qe){return this.eachBefore(function(Pe){Pe.children&&Pe.children.sort(Qe)})},path:function S(Qe){for(var Pe=this,Ze=function p(Qe,Pe){if(Qe===Pe)return Qe;var Ze=Qe.ancestors(),Xe=Pe.ancestors(),rt=null;for(Qe=Ze.pop(),Pe=Xe.pop();Qe===Pe;)rt=Qe,Qe=Ze.pop(),Pe=Xe.pop();return rt}(Pe,Qe),Xe=[Pe];Pe!==Ze;)Xe.push(Pe=Pe.parent);for(var rt=Xe.length;Qe!==Ze;)Xe.splice(rt,0,Qe),Qe=Qe.parent;return Xe},ancestors:function w(){for(var Qe=this,Pe=[Qe];Qe=Qe.parent;)Pe.push(Qe);return Pe},descendants:function l(){var Qe=[];return this.each(function(Pe){Qe.push(Pe)}),Qe},leaves:function y(){var Qe=[];return this.eachBefore(function(Pe){Pe.children||Qe.push(Pe)}),Qe},links:function A(){var Qe=this,Pe=[];return Qe.each(function(Ze){Ze!==Qe&&Pe.push({source:Ze.parent,target:Ze})}),Pe},copy:function M(){return T(this).eachBefore(u)}};var C=Array.prototype.slice;function z(Qe){for(var rt,kt,Pe=0,Ze=(Qe=function R(Qe){for(var Ze,Xe,Pe=Qe.length;Pe;)Xe=Math.random()*Pe--|0,Ze=Qe[Pe],Qe[Pe]=Qe[Xe],Qe[Xe]=Ze;return Qe}(C.call(Qe))).length,Xe=[];Pe<Ze;)rt=Qe[Pe],kt&&F(kt,rt)?++Pe:(kt=N(Xe=O(Xe,rt)),Pe=0);return kt}function O(Qe,Pe){var Ze,Xe;if(D(Pe,Qe))return[Pe];for(Ze=0;Ze<Qe.length;++Ze)if(I(Pe,Qe[Ze])&&D(X(Qe[Ze],Pe),Qe))return[Qe[Ze],Pe];for(Ze=0;Ze<Qe.length-1;++Ze)for(Xe=Ze+1;Xe<Qe.length;++Xe)if(I(X(Qe[Ze],Qe[Xe]),Pe)&&I(X(Qe[Ze],Pe),Qe[Xe])&&I(X(Qe[Xe],Pe),Qe[Ze])&&D(oe(Qe[Ze],Qe[Xe],Pe),Qe))return[Qe[Ze],Qe[Xe],Pe];throw new Error}function I(Qe,Pe){var Ze=Qe.r-Pe.r,Xe=Pe.x-Qe.x,rt=Pe.y-Qe.y;return Ze<0||Ze*Ze<Xe*Xe+rt*rt}function F(Qe,Pe){var Ze=Qe.r-Pe.r+1e-6,Xe=Pe.x-Qe.x,rt=Pe.y-Qe.y;return Ze>0&&Ze*Ze>Xe*Xe+rt*rt}function D(Qe,Pe){for(var Ze=0;Ze<Pe.length;++Ze)if(!F(Qe,Pe[Ze]))return!1;return!0}function N(Qe){switch(Qe.length){case 1:return function U(Qe){return{x:Qe.x,y:Qe.y,r:Qe.r}}(Qe[0]);case 2:return X(Qe[0],Qe[1]);case 3:return oe(Qe[0],Qe[1],Qe[2])}}function X(Qe,Pe){var Ze=Qe.x,Xe=Qe.y,rt=Qe.r,kt=Pe.x,Tt=Pe.y,Xt=Pe.r,ar=kt-Ze,Ut=Tt-Xe,Jt=Xt-rt,nr=Math.sqrt(ar*ar+Ut*Ut);return{x:(Ze+kt+ar/nr*Jt)/2,y:(Xe+Tt+Ut/nr*Jt)/2,r:(nr+rt+Xt)/2}}function oe(Qe,Pe,Ze){var Xe=Qe.x,rt=Qe.y,kt=Qe.r,Tt=Pe.x,Xt=Pe.y,ar=Pe.r,Ut=Ze.x,Jt=Ze.y,nr=Ze.r,rr=Xe-Tt,br=Xe-Ut,Hr=rt-Xt,on=rt-Jt,jr=ar-kt,et=nr-kt,Yt=Xe*Xe+rt*rt-kt*kt,qt=Yt-Tt*Tt-Xt*Xt+ar*ar,Vt=Yt-Ut*Ut-Jt*Jt+nr*nr,Tr=br*Hr-rr*on,tt=(Hr*Vt-on*qt)/(2*Tr)-Xe,je=(on*jr-Hr*et)/Tr,ct=(br*qt-rr*Vt)/(2*Tr)-rt,ht=(rr*et-br*jr)/Tr,Me=je*je+ht*ht-1,Se=2*(kt+tt*je+ct*ht),Je=tt*tt+ct*ct-kt*kt,We=-(Me?(Se+Math.sqrt(Se*Se-4*Me*Je))/(2*Me):Je/Se);return{x:Xe+tt+je*We,y:rt+ct+ht*We,r:We}}function se(Qe,Pe,Ze){var rt,kt,Xt,ar,Xe=Qe.x-Pe.x,Tt=Qe.y-Pe.y,Ut=Xe*Xe+Tt*Tt;Ut?(kt=Pe.r+Ze.r,ar=Qe.r+Ze.r,(kt*=kt)>(ar*=ar)?(rt=(Ut+ar-kt)/(2*Ut),Xt=Math.sqrt(Math.max(0,ar/Ut-rt*rt)),Ze.x=Qe.x-rt*Xe-Xt*Tt,Ze.y=Qe.y-rt*Tt+Xt*Xe):(rt=(Ut+kt-ar)/(2*Ut),Xt=Math.sqrt(Math.max(0,kt/Ut-rt*rt)),Ze.x=Pe.x+rt*Xe-Xt*Tt,Ze.y=Pe.y+rt*Tt+Xt*Xe)):(Ze.x=Pe.x+Ze.r,Ze.y=Pe.y)}function ne(Qe,Pe){var Ze=Qe.r+Pe.r-1e-6,Xe=Pe.x-Qe.x,rt=Pe.y-Qe.y;return Ze>0&&Ze*Ze>Xe*Xe+rt*rt}function W(Qe){var Pe=Qe._,Ze=Qe.next._,Xe=Pe.r+Ze.r,rt=(Pe.x*Ze.r+Ze.x*Pe.r)/Xe,kt=(Pe.y*Ze.r+Ze.y*Pe.r)/Xe;return rt*rt+kt*kt}function G(Qe){this._=Qe,this.next=null,this.previous=null}function $(Qe){if(!(rt=Qe.length))return 0;var Pe,Ze,Xe,rt,kt,Tt,Xt,ar,Ut,Jt,nr;if((Pe=Qe[0]).x=0,Pe.y=0,!(rt>1))return Pe.r;if(Pe.x=-(Ze=Qe[1]).r,Ze.x=Pe.r,Ze.y=0,!(rt>2))return Pe.r+Ze.r;se(Ze,Pe,Xe=Qe[2]),Pe=new G(Pe),Ze=new G(Ze),Xe=new G(Xe),Pe.next=Xe.previous=Ze,Ze.next=Pe.previous=Xe,Xe.next=Ze.previous=Pe;e:for(Xt=3;Xt<rt;++Xt){se(Pe._,Ze._,Xe=Qe[Xt]),Xe=new G(Xe),ar=Ze.next,Ut=Pe.previous,Jt=Ze._.r,nr=Pe._.r;do{if(Jt<=nr){if(ne(ar._,Xe._)){Pe.next=Ze=ar,Ze.previous=Pe,--Xt;continue e}Jt+=ar._.r,ar=ar.next}else{if(ne(Ut._,Xe._)){(Pe=Ut).next=Ze,Ze.previous=Pe,--Xt;continue e}nr+=Ut._.r,Ut=Ut.previous}}while(ar!==Ut.next);for(Xe.previous=Pe,Xe.next=Ze,Pe.next=Ze.previous=Ze=Xe,kt=W(Pe);(Xe=Xe.next)!==Ze;)(Tt=W(Xe))<kt&&(Pe=Xe,kt=Tt);Ze=Pe.next}for(Pe=[Ze._],Xe=Ze;(Xe=Xe.next)!==Ze;)Pe.push(Xe._);for(Xe=z(Pe),Xt=0;Xt<rt;++Xt)(Pe=Qe[Xt]).x-=Xe.x,Pe.y-=Xe.y;return Xe.r}function H(Qe){return null==Qe?null:q(Qe)}function q(Qe){if("function"!=typeof Qe)throw new Error;return Qe}function K(){return 0}function Y(Qe){return function(){return Qe}}function te(Qe){return Math.sqrt(Qe.value)}function j(Qe){return function(Pe){Pe.children||(Pe.r=Math.max(0,+Qe(Pe)||0))}}function re(Qe,Pe){return function(Ze){if(Xe=Ze.children){var Xe,rt,Xt,kt=Xe.length,Tt=Qe(Ze)*Pe||0;if(Tt)for(rt=0;rt<kt;++rt)Xe[rt].r+=Tt;if(Xt=$(Xe),Tt)for(rt=0;rt<kt;++rt)Xe[rt].r-=Tt;Ze.r=Xt+Tt}}}function le(Qe){return function(Pe){var Ze=Pe.parent;Pe.r*=Qe,Ze&&(Pe.x=Ze.x+Qe*Pe.x,Pe.y=Ze.y+Qe*Pe.y)}}function ge(Qe){Qe.x0=Math.round(Qe.x0),Qe.y0=Math.round(Qe.y0),Qe.x1=Math.round(Qe.x1),Qe.y1=Math.round(Qe.y1)}function pe(Qe,Pe,Ze,Xe,rt){for(var Tt,kt=Qe.children,Xt=-1,ar=kt.length,Ut=Qe.value&&(Xe-Pe)/Qe.value;++Xt<ar;)(Tt=kt[Xt]).y0=Ze,Tt.y1=rt,Tt.x0=Pe,Tt.x1=Pe+=Tt.value*Ut}var we={depth:-1},de={};function be(Qe){return Qe.id}function Le(Qe){return Qe.parentId}function ye(Qe,Pe){return Qe.parent===Pe.parent?1:2}function Ce(Qe){var Pe=Qe.children;return Pe?Pe[0]:Qe.t}function Fe(Qe){var Pe=Qe.children;return Pe?Pe[Pe.length-1]:Qe.t}function Ke(Qe,Pe,Ze){var Xe=Ze/(Pe.i-Qe.i);Pe.c-=Xe,Pe.s+=Ze,Qe.c+=Xe,Pe.z+=Ze,Pe.m+=Ze}function Be(Qe,Pe,Ze){return Qe.a.parent===Pe.parent?Qe.a:Ze}function Ie(Qe,Pe){this._=Qe,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Pe}function Nt(Qe,Pe,Ze,Xe,rt){for(var Tt,kt=Qe.children,Xt=-1,ar=kt.length,Ut=Qe.value&&(rt-Ze)/Qe.value;++Xt<ar;)(Tt=kt[Xt]).x0=Pe,Tt.x1=Xe,Tt.y0=Ze,Tt.y1=Ze+=Tt.value*Ut}Ie.prototype=Object.create(o.prototype);var St=(1+Math.sqrt(5))/2;function Bt(Qe,Pe,Ze,Xe,rt,kt){for(var ar,Ut,br,Hr,jr,et,Yt,qt,Vt,Tr,tt,Tt=[],Xt=Pe.children,Jt=0,nr=0,rr=Xt.length,on=Pe.value;Jt<rr;){br=rt-Ze,Hr=kt-Xe;do{jr=Xt[nr++].value}while(!jr&&nr<rr);for(et=Yt=jr,tt=jr*jr*(Tr=Math.max(Hr/br,br/Hr)/(on*Qe)),Vt=Math.max(Yt/tt,tt/et);nr<rr;++nr){if(jr+=Ut=Xt[nr].value,Ut<et&&(et=Ut),Ut>Yt&&(Yt=Ut),tt=jr*jr*Tr,(qt=Math.max(Yt/tt,tt/et))>Vt){jr-=Ut;break}Vt=qt}Tt.push(ar={value:jr,dice:br<Hr,children:Xt.slice(Jt,nr)}),ar.dice?pe(ar,Ze,Xe,rt,on?Xe+=Hr*jr/on:kt):Nt(ar,Ze,Xe,on?Ze+=br*jr/on:rt,kt),on-=jr,Jt=nr}return Tt}var Zt=function Qe(Pe){function Ze(Xe,rt,kt,Tt,Xt){Bt(Pe,Xe,rt,kt,Tt,Xt)}return Ze.ratio=function(Xe){return Qe((Xe=+Xe)>1?Xe:1)},Ze}(St);var vt=function Qe(Pe){function Ze(Xe,rt,kt,Tt,Xt){if((ar=Xe._squarify)&&ar.ratio===Pe)for(var ar,Ut,Jt,nr,br,rr=-1,Hr=ar.length,on=Xe.value;++rr<Hr;){for(Jt=(Ut=ar[rr]).children,nr=Ut.value=0,br=Jt.length;nr<br;++nr)Ut.value+=Jt[nr].value;Ut.dice?pe(Ut,rt,kt,Tt,kt+=(Xt-kt)*Ut.value/on):Nt(Ut,rt,kt,rt+=(Tt-rt)*Ut.value/on,Xt),on-=Ut.value}else Xe._squarify=ar=Bt(Pe,Xe,rt,kt,Tt,Xt),ar.ratio=Pe}return Ze.ratio=function(Xe){return Qe((Xe=+Xe)>1?Xe:1)},Ze}(St);_.cluster=function t(){var Qe=k,Pe=1,Ze=1,Xe=!1;function rt(kt){var Tt,Xt=0;kt.eachAfter(function(rr){var br=rr.children;br?(rr.x=function m(Qe){return Qe.reduce(E,0)/Qe.length}(br),rr.y=function e(Qe){return 1+Qe.reduce(c,0)}(br)):(rr.x=Tt?Xt+=Qe(rr,Tt):0,rr.y=0,Tt=rr)});var ar=function d(Qe){for(var Pe;Pe=Qe.children;)Qe=Pe[0];return Qe}(kt),Ut=function n(Qe){for(var Pe;Pe=Qe.children;)Qe=Pe[Pe.length-1];return Qe}(kt),Jt=ar.x-Qe(ar,Ut)/2,nr=Ut.x+Qe(Ut,ar)/2;return kt.eachAfter(Xe?function(rr){rr.x=(rr.x-kt.x)*Pe,rr.y=(kt.y-rr.y)*Ze}:function(rr){rr.x=(rr.x-Jt)/(nr-Jt)*Pe,rr.y=(1-(kt.y?rr.y/kt.y:1))*Ze})}return rt.separation=function(kt){return arguments.length?(Qe=kt,rt):Qe},rt.size=function(kt){return arguments.length?(Xe=!1,Pe=+kt[0],Ze=+kt[1],rt):Xe?null:[Pe,Ze]},rt.nodeSize=function(kt){return arguments.length?(Xe=!0,Pe=+kt[0],Ze=+kt[1],rt):Xe?[Pe,Ze]:null},rt},_.hierarchy=T,_.pack=function J(){var Qe=null,Pe=1,Ze=1,Xe=K;function rt(kt){return kt.x=Pe/2,kt.y=Ze/2,Qe?kt.eachBefore(j(Qe)).eachAfter(re(Xe,.5)).eachBefore(le(1)):kt.eachBefore(j(te)).eachAfter(re(K,1)).eachAfter(re(Xe,kt.r/Math.min(Pe,Ze))).eachBefore(le(Math.min(Pe,Ze)/(2*kt.r))),kt}return rt.radius=function(kt){return arguments.length?(Qe=H(kt),rt):Qe},rt.size=function(kt){return arguments.length?(Pe=+kt[0],Ze=+kt[1],rt):[Pe,Ze]},rt.padding=function(kt){return arguments.length?(Xe="function"==typeof kt?kt:Y(+kt),rt):Xe},rt},_.packEnclose=z,_.packSiblings=function V(Qe){return $(Qe),Qe},_.partition=function xe(){var Qe=1,Pe=1,Ze=0,Xe=!1;function rt(Tt){var Xt=Tt.height+1;return Tt.x0=Tt.y0=Ze,Tt.x1=Qe,Tt.y1=Pe/Xt,Tt.eachBefore(function kt(Tt,Xt){return function(ar){ar.children&&pe(ar,ar.x0,Tt*(ar.depth+1)/Xt,ar.x1,Tt*(ar.depth+2)/Xt);var Ut=ar.x0,Jt=ar.y0,nr=ar.x1-Ze,rr=ar.y1-Ze;nr<Ut&&(Ut=nr=(Ut+nr)/2),rr<Jt&&(Jt=rr=(Jt+rr)/2),ar.x0=Ut,ar.y0=Jt,ar.x1=nr,ar.y1=rr}}(Pe,Xt)),Xe&&Tt.eachBefore(ge),Tt}return rt.round=function(Tt){return arguments.length?(Xe=!!Tt,rt):Xe},rt.size=function(Tt){return arguments.length?(Qe=+Tt[0],Pe=+Tt[1],rt):[Qe,Pe]},rt.padding=function(Tt){return arguments.length?(Ze=+Tt,rt):Ze},rt},_.stratify=function De(){var Qe=be,Pe=Le;function Ze(Xe){var rt,kt,Xt,ar,Ut,nr,rr,Tt=Xe.length,Jt=new Array(Tt),br={};for(kt=0;kt<Tt;++kt)Ut=Jt[kt]=new o(rt=Xe[kt]),null!=(nr=Qe(rt,kt,Xe))&&(nr+="")&&(br[rr="$"+(Ut.id=nr)]=rr in br?de:Ut);for(kt=0;kt<Tt;++kt)if(Ut=Jt[kt],null!=(nr=Pe(Xe[kt],kt,Xe))&&(nr+="")){if(!(ar=br["$"+nr]))throw new Error("missing: "+nr);if(ar===de)throw new Error("ambiguous: "+nr);ar.children?ar.children.push(Ut):ar.children=[Ut],Ut.parent=ar}else{if(Xt)throw new Error("multiple roots");Xt=Ut}if(!Xt)throw new Error("no root");if(Xt.parent=we,Xt.eachBefore(function(Hr){Hr.depth=Hr.parent.depth+1,--Tt}).eachBefore(h),Xt.parent=null,Tt>0)throw new Error("cycle");return Xt}return Ze.id=function(Xe){return arguments.length?(Qe=q(Xe),Ze):Qe},Ze.parentId=function(Xe){return arguments.length?(Pe=q(Xe),Ze):Pe},Ze},_.tree=function gt(){var Qe=ye,Pe=1,Ze=1,Xe=null;function rt(Ut){var Jt=function nt(Qe){for(var Ze,rt,kt,Tt,Xt,Pe=new Ie(Qe,0),Xe=[Pe];Ze=Xe.pop();)if(kt=Ze._.children)for(Ze.children=new Array(Xt=kt.length),Tt=Xt-1;Tt>=0;--Tt)Xe.push(rt=Ze.children[Tt]=new Ie(kt[Tt],Tt)),rt.parent=Ze;return(Pe.parent=new Ie(null,0)).children=[Pe],Pe}(Ut);if(Jt.eachAfter(kt),Jt.parent.m=-Jt.z,Jt.eachBefore(Tt),Xe)Ut.eachBefore(ar);else{var nr=Ut,rr=Ut,br=Ut;Ut.eachBefore(function(Yt){Yt.x<nr.x&&(nr=Yt),Yt.x>rr.x&&(rr=Yt),Yt.depth>br.depth&&(br=Yt)});var Hr=nr===rr?1:Qe(nr,rr)/2,on=Hr-nr.x,jr=Pe/(rr.x+Hr+on),et=Ze/(br.depth||1);Ut.eachBefore(function(Yt){Yt.x=(Yt.x+on)*jr,Yt.y=Yt.depth*et})}return Ut}function kt(Ut){var Jt=Ut.children,nr=Ut.parent.children,rr=Ut.i?nr[Ut.i-1]:null;if(Jt){!function Ue(Qe){for(var kt,Pe=0,Ze=0,Xe=Qe.children,rt=Xe.length;--rt>=0;)(kt=Xe[rt]).z+=Pe,kt.m+=Pe,Pe+=kt.s+(Ze+=kt.c)}(Ut);var br=(Jt[0].z+Jt[Jt.length-1].z)/2;rr?(Ut.z=rr.z+Qe(Ut._,rr._),Ut.m=Ut.z-br):Ut.z=br}else rr&&(Ut.z=rr.z+Qe(Ut._,rr._));Ut.parent.A=function Xt(Ut,Jt,nr){if(Jt){for(var Vt,rr=Ut,br=Ut,Hr=Jt,on=rr.parent.children[0],jr=rr.m,et=br.m,Yt=Hr.m,qt=on.m;Hr=Fe(Hr),rr=Ce(rr),Hr&&rr;)on=Ce(on),(br=Fe(br)).a=Ut,(Vt=Hr.z+Yt-rr.z-jr+Qe(Hr._,rr._))>0&&(Ke(Be(Hr,Ut,nr),Ut,Vt),jr+=Vt,et+=Vt),Yt+=Hr.m,jr+=rr.m,qt+=on.m,et+=br.m;Hr&&!Fe(br)&&(br.t=Hr,br.m+=Yt-et),rr&&!Ce(on)&&(on.t=rr,on.m+=jr-qt,nr=Ut)}return nr}(Ut,rr,Ut.parent.A||nr[0])}function Tt(Ut){Ut._.x=Ut.z+Ut.parent.m,Ut.m+=Ut.parent.m}function ar(Ut){Ut.x*=Pe,Ut.y=Ut.depth*Ze}return rt.separation=function(Ut){return arguments.length?(Qe=Ut,rt):Qe},rt.size=function(Ut){return arguments.length?(Xe=!1,Pe=+Ut[0],Ze=+Ut[1],rt):Xe?null:[Pe,Ze]},rt.nodeSize=function(Ut){return arguments.length?(Xe=!0,Pe=+Ut[0],Ze=+Ut[1],rt):Xe?[Pe,Ze]:null},rt},_.treemap=function Et(){var Qe=Zt,Pe=!1,Ze=1,Xe=1,rt=[0],kt=K,Tt=K,Xt=K,ar=K,Ut=K;function Jt(rr){return rr.x0=rr.y0=0,rr.x1=Ze,rr.y1=Xe,rr.eachBefore(nr),rt=[0],Pe&&rr.eachBefore(ge),rr}function nr(rr){var br=rt[rr.depth],Hr=rr.x0+br,on=rr.y0+br,jr=rr.x1-br,et=rr.y1-br;jr<Hr&&(Hr=jr=(Hr+jr)/2),et<on&&(on=et=(on+et)/2),rr.x0=Hr,rr.y0=on,rr.x1=jr,rr.y1=et,rr.children&&(br=rt[rr.depth+1]=kt(rr)/2,Hr+=Ut(rr)-br,on+=Tt(rr)-br,(jr-=Xt(rr)-br)<Hr&&(Hr=jr=(Hr+jr)/2),(et-=ar(rr)-br)<on&&(on=et=(on+et)/2),Qe(rr,Hr,on,jr,et))}return Jt.round=function(rr){return arguments.length?(Pe=!!rr,Jt):Pe},Jt.size=function(rr){return arguments.length?(Ze=+rr[0],Xe=+rr[1],Jt):[Ze,Xe]},Jt.tile=function(rr){return arguments.length?(Qe=q(rr),Jt):Qe},Jt.padding=function(rr){return arguments.length?Jt.paddingInner(rr).paddingOuter(rr):Jt.paddingInner()},Jt.paddingInner=function(rr){return arguments.length?(kt="function"==typeof rr?rr:Y(+rr),Jt):kt},Jt.paddingOuter=function(rr){return arguments.length?Jt.paddingTop(rr).paddingRight(rr).paddingBottom(rr).paddingLeft(rr):Jt.paddingTop()},Jt.paddingTop=function(rr){return arguments.length?(Tt="function"==typeof rr?rr:Y(+rr),Jt):Tt},Jt.paddingRight=function(rr){return arguments.length?(Xt="function"==typeof rr?rr:Y(+rr),Jt):Xt},Jt.paddingBottom=function(rr){return arguments.length?(ar="function"==typeof rr?rr:Y(+rr),Jt):ar},Jt.paddingLeft=function(rr){return arguments.length?(Ut="function"==typeof rr?rr:Y(+rr),Jt):Ut},Jt},_.treemapBinary=function wt(Qe,Pe,Ze,Xe,rt){var Tt,ar,kt=Qe.children,Xt=kt.length,Ut=new Array(Xt+1);for(Ut[0]=ar=Tt=0;Tt<Xt;++Tt)Ut[Tt+1]=ar+=kt[Tt].value;!function Jt(nr,rr,br,Hr,on,jr,et){if(nr>=rr-1){var Yt=kt[nr];return Yt.x0=Hr,Yt.y0=on,Yt.x1=jr,void(Yt.y1=et)}for(var qt=Ut[nr],Vt=br/2+qt,Tr=nr+1,tt=rr-1;Tr<tt;){var je=Tr+tt>>>1;Ut[je]<Vt?Tr=je+1:tt=je}Vt-Ut[Tr-1]<Ut[Tr]-Vt&&nr+1<Tr&&--Tr;var ct=Ut[Tr]-qt,ht=br-ct;if(jr-Hr>et-on){var Me=(Hr*ht+jr*ct)/br;Jt(nr,Tr,ct,Hr,on,Me,et),Jt(Tr,rr,ht,Me,on,jr,et)}else{var Se=(on*ht+et*ct)/br;Jt(nr,Tr,ct,Hr,on,jr,Se),Jt(Tr,rr,ht,Hr,Se,jr,et)}}(0,Xt,Qe.value,Pe,Ze,Xe,rt)},_.treemapDice=pe,_.treemapResquarify=vt,_.treemapSlice=Nt,_.treemapSliceDice=function at(Qe,Pe,Ze,Xe,rt){(1&Qe.depth?Nt:pe)(Qe,Pe,Ze,Xe,rt)},_.treemapSquarify=Zt,Object.defineProperty(_,"__esModule",{value:!0})},k("object"==typeof ae&&void 0!==ie?ae:(_=_||self).d3=_.d3||{})},{}],116:[function(v,ie,ae){var _,k;_=this,k=function(_,k){"use strict";function m(ye,Ce,Fe,Ke,Ue){var Be=ye*ye,Ie=Be*ye;return((1-3*ye+3*Be-Ie)*Ce+(4-6*Be+3*Ie)*Fe+(1+3*ye+3*Be-3*Ie)*Ke+Ie*Ue)/6}function E(ye){var Ce=ye.length-1;return function(Fe){var Ke=Fe<=0?Fe=0:Fe>=1?(Fe=1,Ce-1):Math.floor(Fe*Ce),Ue=ye[Ke],Be=ye[Ke+1];return m((Fe-Ke/Ce)*Ce,Ke>0?ye[Ke-1]:2*Ue-Be,Ue,Be,Ke<Ce-1?ye[Ke+2]:2*Be-Ue)}}function e(ye){var Ce=ye.length;return function(Fe){var Ke=Math.floor(((Fe%=1)<0?++Fe:Fe)*Ce);return m((Fe-Ke/Ce)*Ce,ye[(Ke+Ce-1)%Ce],ye[Ke%Ce],ye[(Ke+1)%Ce],ye[(Ke+2)%Ce])}}function c(ye){return function(){return ye}}function d(ye,Ce){return function(Fe){return ye+Fe*Ce}}function t(ye,Ce){var Fe=Ce-ye;return Fe?d(ye,Fe>180||Fe<-180?Fe-360*Math.round(Fe/360):Fe):c(isNaN(ye)?Ce:ye)}function i(ye){return 1==(ye=+ye)?a:function(Ce,Fe){return Fe-Ce?function n(ye,Ce,Fe){return ye=Math.pow(ye,Fe),Ce=Math.pow(Ce,Fe)-ye,Fe=1/Fe,function(Ke){return Math.pow(ye+Ke*Ce,Fe)}}(Ce,Fe,ye):c(isNaN(Ce)?Fe:Ce)}}function a(ye,Ce){var Fe=Ce-ye;return Fe?d(ye,Fe):c(isNaN(ye)?Ce:ye)}var r=function ye(Ce){var Fe=i(Ce);function Ke(Ue,Be){var Ie=Fe((Ue=k.rgb(Ue)).r,(Be=k.rgb(Be)).r),nt=Fe(Ue.g,Be.g),gt=Fe(Ue.b,Be.b),Nt=a(Ue.opacity,Be.opacity);return function(St){return Ue.r=Ie(St),Ue.g=nt(St),Ue.b=gt(St),Ue.opacity=Nt(St),Ue+""}}return Ke.gamma=ye,Ke}(1);function g(ye){return function(Ce){var Ie,nt,Fe=Ce.length,Ke=new Array(Fe),Ue=new Array(Fe),Be=new Array(Fe);for(Ie=0;Ie<Fe;++Ie)nt=k.rgb(Ce[Ie]),Ke[Ie]=nt.r||0,Ue[Ie]=nt.g||0,Be[Ie]=nt.b||0;return Ke=ye(Ke),Ue=ye(Ue),Be=ye(Be),nt.opacity=1,function(gt){return nt.r=Ke(gt),nt.g=Ue(gt),nt.b=Be(gt),nt+""}}}var s=g(E),b=g(e);function x(ye,Ce){Ce||(Ce=[]);var Ue,Fe=ye?Math.min(Ce.length,ye.length):0,Ke=Ce.slice();return function(Be){for(Ue=0;Ue<Fe;++Ue)Ke[Ue]=ye[Ue]*(1-Be)+Ce[Ue]*Be;return Ke}}function S(ye){return ArrayBuffer.isView(ye)&&!(ye instanceof DataView)}function w(ye,Ce){var Ie,Fe=Ce?Ce.length:0,Ke=ye?Math.min(Fe,ye.length):0,Ue=new Array(Ke),Be=new Array(Fe);for(Ie=0;Ie<Ke;++Ie)Ue[Ie]=o(ye[Ie],Ce[Ie]);for(;Ie<Fe;++Ie)Be[Ie]=Ce[Ie];return function(nt){for(Ie=0;Ie<Ke;++Ie)Be[Ie]=Ue[Ie](nt);return Be}}function l(ye,Ce){var Fe=new Date;return ye=+ye,Ce=+Ce,function(Ke){return Fe.setTime(ye*(1-Ke)+Ce*Ke),Fe}}function y(ye,Ce){return ye=+ye,Ce=+Ce,function(Fe){return ye*(1-Fe)+Ce*Fe}}function A(ye,Ce){var Ue,Fe={},Ke={};for(Ue in(null===ye||"object"!=typeof ye)&&(ye={}),(null===Ce||"object"!=typeof Ce)&&(Ce={}),Ce)Ue in ye?Fe[Ue]=o(ye[Ue],Ce[Ue]):Ke[Ue]=Ce[Ue];return function(Be){for(Ue in Fe)Ke[Ue]=Fe[Ue](Be);return Ke}}var T=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,M=new RegExp(T.source,"g");function h(ye,Ce){var Ke,Ue,Be,Fe=T.lastIndex=M.lastIndex=0,Ie=-1,nt=[],gt=[];for(ye+="",Ce+="";(Ke=T.exec(ye))&&(Ue=M.exec(Ce));)(Be=Ue.index)>Fe&&(Be=Ce.slice(Fe,Be),nt[Ie]?nt[Ie]+=Be:nt[++Ie]=Be),(Ke=Ke[0])===(Ue=Ue[0])?nt[Ie]?nt[Ie]+=Ue:nt[++Ie]=Ue:(nt[++Ie]=null,gt.push({i:Ie,x:y(Ke,Ue)})),Fe=M.lastIndex;return Fe<Ce.length&&(Be=Ce.slice(Fe),nt[Ie]?nt[Ie]+=Be:nt[++Ie]=Be),nt.length<2?gt[0]?function u(ye){return function(Ce){return ye(Ce)+""}}(gt[0].x):function f(ye){return function(){return ye}}(Ce):(Ce=gt.length,function(Nt){for(var Bt,St=0;St<Ce;++St)nt[(Bt=gt[St]).i]=Bt.x(Nt);return nt.join("")})}function o(ye,Ce){var Ke,Fe=typeof Ce;return null==Ce||"boolean"===Fe?c(Ce):("number"===Fe?y:"string"===Fe?(Ke=k.color(Ce))?(Ce=Ke,r):h:Ce instanceof k.color?r:Ce instanceof Date?l:S(Ce)?x:Array.isArray(Ce)?w:"function"!=typeof Ce.valueOf&&"function"!=typeof Ce.toString||isNaN(Ce)?A:y)(ye,Ce)}var D,N,U,X,O=180/Math.PI,I={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function F(ye,Ce,Fe,Ke,Ue,Be){var Ie,nt,gt;return(Ie=Math.sqrt(ye*ye+Ce*Ce))&&(ye/=Ie,Ce/=Ie),(gt=ye*Fe+Ce*Ke)&&(Fe-=ye*gt,Ke-=Ce*gt),(nt=Math.sqrt(Fe*Fe+Ke*Ke))&&(Fe/=nt,Ke/=nt,gt/=nt),ye*Ke<Ce*Fe&&(ye=-ye,Ce=-Ce,gt=-gt,Ie=-Ie),{translateX:Ue,translateY:Be,rotate:Math.atan2(Ce,ye)*O,skewX:Math.atan(gt)*O,scaleX:Ie,scaleY:nt}}function ne(ye,Ce,Fe,Ke){function Ue(Nt){return Nt.length?Nt.pop()+" ":""}return function(Nt,St){var Bt=[],Zt=[];return Nt=ye(Nt),St=ye(St),function Be(Nt,St,Bt,Zt,Et,wt){if(Nt!==Bt||St!==Zt){var at=Et.push("translate(",null,Ce,null,Fe);wt.push({i:at-4,x:y(Nt,Bt)},{i:at-2,x:y(St,Zt)})}else(Bt||Zt)&&Et.push("translate("+Bt+Ce+Zt+Fe)}(Nt.translateX,Nt.translateY,St.translateX,St.translateY,Bt,Zt),function Ie(Nt,St,Bt,Zt){Nt!==St?(Nt-St>180?St+=360:St-Nt>180&&(Nt+=360),Zt.push({i:Bt.push(Ue(Bt)+"rotate(",null,Ke)-2,x:y(Nt,St)})):St&&Bt.push(Ue(Bt)+"rotate("+St+Ke)}(Nt.rotate,St.rotate,Bt,Zt),function nt(Nt,St,Bt,Zt){Nt!==St?Zt.push({i:Bt.push(Ue(Bt)+"skewX(",null,Ke)-2,x:y(Nt,St)}):St&&Bt.push(Ue(Bt)+"skewX("+St+Ke)}(Nt.skewX,St.skewX,Bt,Zt),function gt(Nt,St,Bt,Zt,Et,wt){if(Nt!==Bt||St!==Zt){var at=Et.push(Ue(Et)+"scale(",null,",",null,")");wt.push({i:at-4,x:y(Nt,Bt)},{i:at-2,x:y(St,Zt)})}else(1!==Bt||1!==Zt)&&Et.push(Ue(Et)+"scale("+Bt+","+Zt+")")}(Nt.scaleX,Nt.scaleY,St.scaleX,St.scaleY,Bt,Zt),Nt=St=null,function(Et){for(var vt,wt=-1,at=Zt.length;++wt<at;)Bt[(vt=Zt[wt]).i]=vt.x(Et);return Bt.join("")}}}var W=ne(function oe(ye){return"none"===ye?I:(D||(D=document.createElement("DIV"),N=document.documentElement,U=document.defaultView),D.style.transform=ye,ye=U.getComputedStyle(N.appendChild(D),null).getPropertyValue("transform"),N.removeChild(D),F(+(ye=ye.slice(7,-1).split(","))[0],+ye[1],+ye[2],+ye[3],+ye[4],+ye[5]))},"px, ","px)","deg)"),G=ne(function se(ye){return null!=ye&&(X||(X=document.createElementNS("http://www.w3.org/2000/svg","g")),X.setAttribute("transform",ye),ye=X.transform.baseVal.consolidate())?F((ye=ye.matrix).a,ye.b,ye.c,ye.d,ye.e,ye.f):I},", ",")",")"),$=Math.SQRT2;function K(ye){return((ye=Math.exp(ye))+1/ye)/2}function j(ye){return function(Ce,Fe){var Ke=ye((Ce=k.hsl(Ce)).h,(Fe=k.hsl(Fe)).h),Ue=a(Ce.s,Fe.s),Be=a(Ce.l,Fe.l),Ie=a(Ce.opacity,Fe.opacity);return function(nt){return Ce.h=Ke(nt),Ce.s=Ue(nt),Ce.l=Be(nt),Ce.opacity=Ie(nt),Ce+""}}}var re=j(t),le=j(a);function pe(ye){return function(Ce,Fe){var Ke=ye((Ce=k.hcl(Ce)).h,(Fe=k.hcl(Fe)).h),Ue=a(Ce.c,Fe.c),Be=a(Ce.l,Fe.l),Ie=a(Ce.opacity,Fe.opacity);return function(nt){return Ce.h=Ke(nt),Ce.c=Ue(nt),Ce.l=Be(nt),Ce.opacity=Ie(nt),Ce+""}}}var xe=pe(t),ke=pe(a);function we(ye){return function Ce(Fe){function Ke(Ue,Be){var Ie=ye((Ue=k.cubehelix(Ue)).h,(Be=k.cubehelix(Be)).h),nt=a(Ue.s,Be.s),gt=a(Ue.l,Be.l),Nt=a(Ue.opacity,Be.opacity);return function(St){return Ue.h=Ie(St),Ue.s=nt(St),Ue.l=gt(Math.pow(St,Fe)),Ue.opacity=Nt(St),Ue+""}}return Fe=+Fe,Ke.gamma=Ce,Ke}(1)}var de=we(t),be=we(a);_.interpolate=o,_.interpolateArray=function p(ye,Ce){return(S(Ce)?x:w)(ye,Ce)},_.interpolateBasis=E,_.interpolateBasisClosed=e,_.interpolateCubehelix=de,_.interpolateCubehelixLong=be,_.interpolateDate=l,_.interpolateDiscrete=function C(ye){var Ce=ye.length;return function(Fe){return ye[Math.max(0,Math.min(Ce-1,Math.floor(Fe*Ce)))]}},_.interpolateHcl=xe,_.interpolateHclLong=ke,_.interpolateHsl=re,_.interpolateHslLong=le,_.interpolateHue=function R(ye,Ce){var Fe=t(+ye,+Ce);return function(Ke){var Ue=Fe(Ke);return Ue-360*Math.floor(Ue/360)}},_.interpolateLab=function ge(ye,Ce){var Fe=a((ye=k.lab(ye)).l,(Ce=k.lab(Ce)).l),Ke=a(ye.a,Ce.a),Ue=a(ye.b,Ce.b),Be=a(ye.opacity,Ce.opacity);return function(Ie){return ye.l=Fe(Ie),ye.a=Ke(Ie),ye.b=Ue(Ie),ye.opacity=Be(Ie),ye+""}},_.interpolateNumber=y,_.interpolateNumberArray=x,_.interpolateObject=A,_.interpolateRgb=r,_.interpolateRgbBasis=s,_.interpolateRgbBasisClosed=b,_.interpolateRound=function z(ye,Ce){return ye=+ye,Ce=+Ce,function(Fe){return Math.round(ye*(1-Fe)+Ce*Fe)}},_.interpolateString=h,_.interpolateTransformCss=W,_.interpolateTransformSvg=G,_.interpolateZoom=function J(ye,Ce){var Bt,Zt,Fe=ye[0],Ke=ye[1],Ue=ye[2],nt=Ce[2],gt=Ce[0]-Fe,Nt=Ce[1]-Ke,St=gt*gt+Nt*Nt;if(St<1e-12)Zt=Math.log(nt/Ue)/$,Bt=function(Pe){return[Fe+Pe*gt,Ke+Pe*Nt,Ue*Math.exp($*Pe*Zt)]};else{var Et=Math.sqrt(St),wt=(nt*nt-Ue*Ue+4*St)/(2*Ue*2*Et),at=(nt*nt-Ue*Ue-4*St)/(2*nt*2*Et),vt=Math.log(Math.sqrt(wt*wt+1)-wt),Qe=Math.log(Math.sqrt(at*at+1)-at);Zt=(Qe-vt)/$,Bt=function(Pe){var Ze=Pe*Zt,Xe=K(vt),rt=Ue/(2*Et)*(Xe*function te(ye){return((ye=Math.exp(2*ye))-1)/(ye+1)}($*Ze+vt)-function Y(ye){return((ye=Math.exp(ye))-1/ye)/2}(vt));return[Fe+rt*gt,Ke+rt*Nt,Ue*Xe/K($*Ze+vt)]}}return Bt.duration=1e3*Zt,Bt},_.piecewise=function Le(ye,Ce){for(var Fe=0,Ke=Ce.length-1,Ue=Ce[0],Be=new Array(Ke<0?0:Ke);Fe<Ke;)Be[Fe]=ye(Ue,Ue=Ce[++Fe]);return function(Ie){var nt=Math.max(0,Math.min(Ke-1,Math.floor(Ie*=Ke)));return Be[nt](Ie-nt)}},_.quantize=function De(ye,Ce){for(var Fe=new Array(Ce),Ke=0;Ke<Ce;++Ke)Fe[Ke]=ye(Ke/(Ce-1));return Fe},Object.defineProperty(_,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==ie?k(ae,v("d3-color")):k((_=_||self).d3=_.d3||{},_.d3)},{"d3-color":109}],117:[function(v,ie,ae){var _,k;_=this,k=function(_){"use strict";var k=Math.PI,m=2*k,E=1e-6,e=m-E;function c(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function d(){return new c}c.prototype=d.prototype={constructor:c,moveTo:function(n,t){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(n,t){this._+="L"+(this._x1=+n)+","+(this._y1=+t)},quadraticCurveTo:function(n,t,i,a){this._+="Q"+ +n+","+ +t+","+(this._x1=+i)+","+(this._y1=+a)},bezierCurveTo:function(n,t,i,a,r,g){this._+="C"+ +n+","+ +t+","+ +i+","+ +a+","+(this._x1=+r)+","+(this._y1=+g)},arcTo:function(n,t,i,a,r){var g=this._x1,s=this._y1,b=(i=+i)-(n=+n),x=(a=+a)-(t=+t),S=g-n,p=s-t,w=S*S+p*p;if((r=+r)<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=n)+","+(this._y1=t);else if(w>E)if(Math.abs(p*b-x*S)>E&&r){var l=i-g,y=a-s,A=b*b+x*x,T=l*l+y*y,M=Math.sqrt(A),f=Math.sqrt(w),u=r*Math.tan((k-Math.acos((A+w-T)/(2*M*f)))/2),h=u/f,o=u/M;Math.abs(h-1)>E&&(this._+="L"+(n+h*S)+","+(t+h*p)),this._+="A"+r+","+r+",0,0,"+ +(p*l>S*y)+","+(this._x1=n+o*b)+","+(this._y1=t+o*x)}else this._+="L"+(this._x1=n)+","+(this._y1=t)},arc:function(n,t,i,a,r,g){n=+n,t=+t,g=!!g;var s=(i=+i)*Math.cos(a),b=i*Math.sin(a),x=n+s,S=t+b,p=1^g,w=g?a-r:r-a;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+x+","+S:(Math.abs(this._x1-x)>E||Math.abs(this._y1-S)>E)&&(this._+="L"+x+","+S),i&&(w<0&&(w=w%m+m),w>e?this._+="A"+i+","+i+",0,1,"+p+","+(n-s)+","+(t-b)+"A"+i+","+i+",0,1,"+p+","+(this._x1=x)+","+(this._y1=S):w>E&&(this._+="A"+i+","+i+",0,"+ +(w>=k)+","+p+","+(this._x1=n+i*Math.cos(r))+","+(this._y1=t+i*Math.sin(r))))},rect:function(n,t,i,a){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+t)+"h"+ +i+"v"+ +a+"h"+-i+"Z"},toString:function(){return this._}},_.path=d,Object.defineProperty(_,"__esModule",{value:!0})},k("object"==typeof ae&&void 0!==ie?ae:(_=_||self).d3=_.d3||{})},{}],118:[function(v,ie,ae){var _,k;_=this,k=function(_){"use strict";function m(M,f,u,h){if(isNaN(f)||isNaN(u))return M;var o,D,N,U,X,oe,se,ne,W,C=M._root,R={data:h},z=M._x0,O=M._y0,I=M._x1,F=M._y1;if(!C)return M._root=R,M;for(;C.length;)if((oe=f>=(D=(z+I)/2))?z=D:I=D,(se=u>=(N=(O+F)/2))?O=N:F=N,o=C,!(C=C[ne=se<<1|oe]))return o[ne]=R,M;if(U=+M._x.call(null,C.data),X=+M._y.call(null,C.data),f===U&&u===X)return R.next=C,o?o[ne]=R:M._root=R,M;do{o=o?o[ne]=new Array(4):M._root=new Array(4),(oe=f>=(D=(z+I)/2))?z=D:I=D,(se=u>=(N=(O+F)/2))?O=N:F=N}while((ne=se<<1|oe)==(W=(X>=N)<<1|U>=D));return o[W]=C,o[ne]=R,M}function n(M,f,u,h,o){this.node=M,this.x0=f,this.y0=u,this.x1=h,this.y1=o}function x(M){return M[0]}function p(M){return M[1]}function l(M,f,u){var h=new y(null==f?x:f,null==u?p:u,NaN,NaN,NaN,NaN);return null==M?h:h.addAll(M)}function y(M,f,u,h,o,C){this._x=M,this._y=f,this._x0=u,this._y0=h,this._x1=o,this._y1=C,this._root=void 0}function A(M){for(var f={data:M.data},u=f;M=M.next;)u=u.next={data:M.data};return f}var T=l.prototype=y.prototype;T.copy=function(){var u,h,M=new y(this._x,this._y,this._x0,this._y0,this._x1,this._y1),f=this._root;if(!f)return M;if(!f.length)return M._root=A(f),M;for(u=[{source:f,target:M._root=new Array(4)}];f=u.pop();)for(var o=0;o<4;++o)(h=f.source[o])&&(h.length?u.push({source:h,target:f.target[o]=new Array(4)}):f.target[o]=A(h));return M},T.add=function k(M){var f=+this._x.call(null,M),u=+this._y.call(null,M);return m(this.cover(f,u),f,u,M)},T.addAll=function E(M){var f,u,o,C,h=M.length,R=new Array(h),z=new Array(h),O=1/0,I=1/0,F=-1/0,D=-1/0;for(u=0;u<h;++u)isNaN(o=+this._x.call(null,f=M[u]))||isNaN(C=+this._y.call(null,f))||(R[u]=o,z[u]=C,o<O&&(O=o),o>F&&(F=o),C<I&&(I=C),C>D&&(D=C));if(O>F||I>D)return this;for(this.cover(O,I).cover(F,D),u=0;u<h;++u)m(this,R[u],z[u],M[u]);return this},T.cover=function e(M,f){if(isNaN(M=+M)||isNaN(f=+f))return this;var u=this._x0,h=this._y0,o=this._x1,C=this._y1;if(isNaN(u))o=(u=Math.floor(M))+1,C=(h=Math.floor(f))+1;else{for(var O,I,R=o-u,z=this._root;u>M||M>=o||h>f||f>=C;)switch(I=(f<h)<<1|M<u,O=new Array(4),O[I]=z,z=O,R*=2,I){case 0:o=u+R,C=h+R;break;case 1:u=o-R,C=h+R;break;case 2:o=u+R,h=C-R;break;case 3:u=o-R,h=C-R}this._root&&this._root.length&&(this._root=z)}return this._x0=u,this._y0=h,this._x1=o,this._y1=C,this},T.data=function c(){var M=[];return this.visit(function(f){if(!f.length)do{M.push(f.data)}while(f=f.next)}),M},T.extent=function d(M){return arguments.length?this.cover(+M[0][0],+M[0][1]).cover(+M[1][0],+M[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},T.find=function t(M,f,u){var h,R,z,O,I,X,oe,o=this._x0,C=this._y0,F=this._x1,D=this._y1,N=[],U=this._root;for(U&&N.push(new n(U,o,C,F,D)),null==u?u=1/0:(o=M-u,C=f-u,F=M+u,D=f+u,u*=u);X=N.pop();)if(!(!(U=X.node)||(R=X.x0)>F||(z=X.y0)>D||(O=X.x1)<o||(I=X.y1)<C))if(U.length){var se=(R+O)/2,ne=(z+I)/2;N.push(new n(U[3],se,ne,O,I),new n(U[2],R,ne,se,I),new n(U[1],se,z,O,ne),new n(U[0],R,z,se,ne)),(oe=(f>=ne)<<1|M>=se)&&(X=N[N.length-1],N[N.length-1]=N[N.length-1-oe],N[N.length-1-oe]=X)}else{var W=M-+this._x.call(null,U.data),G=f-+this._y.call(null,U.data),$=W*W+G*G;if($<u){var V=Math.sqrt(u=$);o=M-V,C=f-V,F=M+V,D=f+V,h=U.data}}return h},T.remove=function i(M){if(isNaN(F=+this._x.call(null,M))||isNaN(D=+this._y.call(null,M)))return this;var f,h,o,C,F,D,N,U,X,oe,se,ne,u=this._root,R=this._x0,z=this._y0,O=this._x1,I=this._y1;if(!u)return this;if(u.length)for(;;){if((X=F>=(N=(R+O)/2))?R=N:O=N,(oe=D>=(U=(z+I)/2))?z=U:I=U,f=u,!(u=u[se=oe<<1|X]))return this;if(!u.length)break;(f[se+1&3]||f[se+2&3]||f[se+3&3])&&(h=f,ne=se)}for(;u.data!==M;)if(o=u,!(u=u.next))return this;return(C=u.next)&&delete u.next,o?(C?o.next=C:delete o.next,this):f?(C?f[se]=C:delete f[se],(u=f[0]||f[1]||f[2]||f[3])&&u===(f[3]||f[2]||f[1]||f[0])&&!u.length&&(h?h[ne]=u:this._root=u),this):(this._root=C,this)},T.removeAll=function a(M){for(var f=0,u=M.length;f<u;++f)this.remove(M[f]);return this},T.root=function r(){return this._root},T.size=function g(){var M=0;return this.visit(function(f){if(!f.length)do{++M}while(f=f.next)}),M},T.visit=function s(M){var u,o,C,R,z,O,f=[],h=this._root;for(h&&f.push(new n(h,this._x0,this._y0,this._x1,this._y1));u=f.pop();)if(!M(h=u.node,C=u.x0,R=u.y0,z=u.x1,O=u.y1)&&h.length){var I=(C+z)/2,F=(R+O)/2;(o=h[3])&&f.push(new n(o,I,F,z,O)),(o=h[2])&&f.push(new n(o,C,F,I,O)),(o=h[1])&&f.push(new n(o,I,R,z,F)),(o=h[0])&&f.push(new n(o,C,R,I,F))}return this},T.visitAfter=function b(M){var h,f=[],u=[];for(this._root&&f.push(new n(this._root,this._x0,this._y0,this._x1,this._y1));h=f.pop();){var o=h.node;if(o.length){var C,R=h.x0,z=h.y0,O=h.x1,I=h.y1,F=(R+O)/2,D=(z+I)/2;(C=o[0])&&f.push(new n(C,R,z,F,D)),(C=o[1])&&f.push(new n(C,F,z,O,D)),(C=o[2])&&f.push(new n(C,R,D,F,I)),(C=o[3])&&f.push(new n(C,F,D,O,I))}u.push(h)}for(;h=u.pop();)M(h.node,h.x0,h.y0,h.x1,h.y1);return this},T.x=function S(M){return arguments.length?(this._x=M,this):this._x},T.y=function w(M){return arguments.length?(this._y=M,this):this._y},_.quadtree=l,Object.defineProperty(_,"__esModule",{value:!0})},k("object"==typeof ae&&void 0!==ie?ae:(_=_||self).d3=_.d3||{})},{}],119:[function(v,ie,ae){var _,k;_=this,k=function(_,k){"use strict";function m(it){return function(){return it}}var E=Math.abs,e=Math.atan2,c=Math.cos,d=Math.max,n=Math.min,t=Math.sin,i=Math.sqrt,a=1e-12,r=Math.PI,g=r/2,s=2*r;function b(it){return it>1?0:it<-1?r:Math.acos(it)}function x(it){return it>=1?g:it<=-1?-g:Math.asin(it)}function S(it){return it.innerRadius}function p(it){return it.outerRadius}function w(it){return it.startAngle}function l(it){return it.endAngle}function y(it){return it&&it.padAngle}function A(it,It,Qt,ir,Or,qr,Ir,kr){var Zr=Qt-it,An=ir-It,wn=Ir-Or,Zn=kr-qr,Ln=Zn*Zr-wn*An;if(!(Ln*Ln<a))return[it+(Ln=(wn*(It-qr)-Zn*(it-Or))/Ln)*Zr,It+Ln*An]}function T(it,It,Qt,ir,Or,qr,Ir){var kr=it-Qt,Zr=It-ir,An=(Ir?qr:-qr)/i(kr*kr+Zr*Zr),wn=An*Zr,Zn=-An*kr,Ln=it+wn,Wn=It+Zn,$n=Qt+wn,wa=ir+Zn,ma=(Ln+$n)/2,$a=(Wn+wa)/2,Ja=$n-Ln,Va=wa-Wn,ai=Ja*Ja+Va*Va,Er=Or-qr,gn=Ln*wa-$n*Wn,dn=(Va<0?-1:1)*i(d(0,Er*Er*ai-gn*gn)),kn=(gn*Va-Ja*dn)/ai,Un=(-gn*Ja-Va*dn)/ai,ra=(gn*Va+Ja*dn)/ai,Gn=(-gn*Ja+Va*dn)/ai,On=kn-ma,Xn=Un-$a,pa=ra-ma,oi=Gn-$a;return On*On+Xn*Xn>pa*pa+oi*oi&&(kn=ra,Un=Gn),{cx:kn,cy:Un,x01:-wn,y01:-Zn,x11:kn*(Or/Er-1),y11:Un*(Or/Er-1)}}function f(it){this._context=it}function u(it){return new f(it)}function h(it){return it[0]}function o(it){return it[1]}function C(){var it=h,It=o,Qt=m(!0),ir=null,Or=u,qr=null;function Ir(kr){var Zr,wn,Ln,An=kr.length,Zn=!1;for(null==ir&&(qr=Or(Ln=k.path())),Zr=0;Zr<=An;++Zr)!(Zr<An&&Qt(wn=kr[Zr],Zr,kr))===Zn&&((Zn=!Zn)?qr.lineStart():qr.lineEnd()),Zn&&qr.point(+it(wn,Zr,kr),+It(wn,Zr,kr));if(Ln)return qr=null,Ln+""||null}return Ir.x=function(kr){return arguments.length?(it="function"==typeof kr?kr:m(+kr),Ir):it},Ir.y=function(kr){return arguments.length?(It="function"==typeof kr?kr:m(+kr),Ir):It},Ir.defined=function(kr){return arguments.length?(Qt="function"==typeof kr?kr:m(!!kr),Ir):Qt},Ir.curve=function(kr){return arguments.length?(Or=kr,null!=ir&&(qr=Or(ir)),Ir):Or},Ir.context=function(kr){return arguments.length?(null==kr?ir=qr=null:qr=Or(ir=kr),Ir):ir},Ir}function R(){var it=h,It=null,Qt=m(0),ir=o,Or=m(!0),qr=null,Ir=u,kr=null;function Zr(wn){var Zn,Ln,Wn,wa,$a,$n=wn.length,ma=!1,Ja=new Array($n),Va=new Array($n);for(null==qr&&(kr=Ir($a=k.path())),Zn=0;Zn<=$n;++Zn){if(!(Zn<$n&&Or(wa=wn[Zn],Zn,wn))===ma)if(ma=!ma)Ln=Zn,kr.areaStart(),kr.lineStart();else{for(kr.lineEnd(),kr.lineStart(),Wn=Zn-1;Wn>=Ln;--Wn)kr.point(Ja[Wn],Va[Wn]);kr.lineEnd(),kr.areaEnd()}ma&&(Ja[Zn]=+it(wa,Zn,wn),Va[Zn]=+Qt(wa,Zn,wn),kr.point(It?+It(wa,Zn,wn):Ja[Zn],ir?+ir(wa,Zn,wn):Va[Zn]))}if($a)return kr=null,$a+""||null}function An(){return C().defined(Or).curve(Ir).context(qr)}return Zr.x=function(wn){return arguments.length?(it="function"==typeof wn?wn:m(+wn),It=null,Zr):it},Zr.x0=function(wn){return arguments.length?(it="function"==typeof wn?wn:m(+wn),Zr):it},Zr.x1=function(wn){return arguments.length?(It=null==wn?null:"function"==typeof wn?wn:m(+wn),Zr):It},Zr.y=function(wn){return arguments.length?(Qt="function"==typeof wn?wn:m(+wn),ir=null,Zr):Qt},Zr.y0=function(wn){return arguments.length?(Qt="function"==typeof wn?wn:m(+wn),Zr):Qt},Zr.y1=function(wn){return arguments.length?(ir=null==wn?null:"function"==typeof wn?wn:m(+wn),Zr):ir},Zr.lineX0=Zr.lineY0=function(){return An().x(it).y(Qt)},Zr.lineY1=function(){return An().x(it).y(ir)},Zr.lineX1=function(){return An().x(It).y(Qt)},Zr.defined=function(wn){return arguments.length?(Or="function"==typeof wn?wn:m(!!wn),Zr):Or},Zr.curve=function(wn){return arguments.length?(Ir=wn,null!=qr&&(kr=Ir(qr)),Zr):Ir},Zr.context=function(wn){return arguments.length?(null==wn?qr=kr=null:kr=Ir(qr=wn),Zr):qr},Zr}function z(it,It){return It<it?-1:It>it?1:It>=it?0:NaN}function O(it){return it}f.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(it,It){switch(it=+it,It=+It,this._point){case 0:this._point=1,this._line?this._context.lineTo(it,It):this._context.moveTo(it,It);break;case 1:this._point=2;default:this._context.lineTo(it,It)}}};var F=N(u);function D(it){this._curve=it}function N(it){function It(Qt){return new D(it(Qt))}return It._curve=it,It}function U(it){var It=it.curve;return it.angle=it.x,delete it.x,it.radius=it.y,delete it.y,it.curve=function(Qt){return arguments.length?It(N(Qt)):It()._curve},it}function X(){return U(C().curve(F))}function oe(){var it=R().curve(F),It=it.curve,Qt=it.lineX0,ir=it.lineX1,Or=it.lineY0,qr=it.lineY1;return it.angle=it.x,delete it.x,it.startAngle=it.x0,delete it.x0,it.endAngle=it.x1,delete it.x1,it.radius=it.y,delete it.y,it.innerRadius=it.y0,delete it.y0,it.outerRadius=it.y1,delete it.y1,it.lineStartAngle=function(){return U(Qt())},delete it.lineX0,it.lineEndAngle=function(){return U(ir())},delete it.lineX1,it.lineInnerRadius=function(){return U(Or())},delete it.lineY0,it.lineOuterRadius=function(){return U(qr())},delete it.lineY1,it.curve=function(Ir){return arguments.length?It(N(Ir)):It()._curve},it}function se(it,It){return[(It=+It)*Math.cos(it-=Math.PI/2),It*Math.sin(it)]}D.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(it,It){this._curve.point(It*Math.sin(it),It*-Math.cos(it))}};var ne=Array.prototype.slice;function W(it){return it.source}function G(it){return it.target}function $(it){var It=W,Qt=G,ir=h,Or=o,qr=null;function Ir(){var kr,Zr=ne.call(arguments),An=It.apply(this,Zr),wn=Qt.apply(this,Zr);if(qr||(qr=kr=k.path()),it(qr,+ir.apply(this,(Zr[0]=An,Zr)),+Or.apply(this,Zr),+ir.apply(this,(Zr[0]=wn,Zr)),+Or.apply(this,Zr)),kr)return qr=null,kr+""||null}return Ir.source=function(kr){return arguments.length?(It=kr,Ir):It},Ir.target=function(kr){return arguments.length?(Qt=kr,Ir):Qt},Ir.x=function(kr){return arguments.length?(ir="function"==typeof kr?kr:m(+kr),Ir):ir},Ir.y=function(kr){return arguments.length?(Or="function"==typeof kr?kr:m(+kr),Ir):Or},Ir.context=function(kr){return arguments.length?(qr=null==kr?null:kr,Ir):qr},Ir}function V(it,It,Qt,ir,Or){it.moveTo(It,Qt),it.bezierCurveTo(It=(It+ir)/2,Qt,It,Or,ir,Or)}function H(it,It,Qt,ir,Or){it.moveTo(It,Qt),it.bezierCurveTo(It,Qt=(Qt+Or)/2,ir,Qt,ir,Or)}function q(it,It,Qt,ir,Or){var qr=se(It,Qt),Ir=se(It,Qt=(Qt+Or)/2),kr=se(ir,Qt),Zr=se(ir,Or);it.moveTo(qr[0],qr[1]),it.bezierCurveTo(Ir[0],Ir[1],kr[0],kr[1],Zr[0],Zr[1])}var J={draw:function(it,It){var Qt=Math.sqrt(It/r);it.moveTo(Qt,0),it.arc(0,0,Qt,0,s)}},j={draw:function(it,It){var Qt=Math.sqrt(It/5)/2;it.moveTo(-3*Qt,-Qt),it.lineTo(-Qt,-Qt),it.lineTo(-Qt,-3*Qt),it.lineTo(Qt,-3*Qt),it.lineTo(Qt,-Qt),it.lineTo(3*Qt,-Qt),it.lineTo(3*Qt,Qt),it.lineTo(Qt,Qt),it.lineTo(Qt,3*Qt),it.lineTo(-Qt,3*Qt),it.lineTo(-Qt,Qt),it.lineTo(-3*Qt,Qt),it.closePath()}},re=Math.sqrt(1/3),le=2*re,ge={draw:function(it,It){var Qt=Math.sqrt(It/le),ir=Qt*re;it.moveTo(0,-Qt),it.lineTo(ir,0),it.lineTo(0,Qt),it.lineTo(-ir,0),it.closePath()}},xe=Math.sin(r/10)/Math.sin(7*r/10),ke=Math.sin(s/10)*xe,we=-Math.cos(s/10)*xe,de={draw:function(it,It){var Qt=Math.sqrt(.8908130915292852*It),ir=ke*Qt,Or=we*Qt;it.moveTo(0,-Qt),it.lineTo(ir,Or);for(var qr=1;qr<5;++qr){var Ir=s*qr/5,kr=Math.cos(Ir),Zr=Math.sin(Ir);it.lineTo(Zr*Qt,-kr*Qt),it.lineTo(kr*ir-Zr*Or,Zr*ir+kr*Or)}it.closePath()}},be={draw:function(it,It){var Qt=Math.sqrt(It),ir=-Qt/2;it.rect(ir,ir,Qt,Qt)}},Le=Math.sqrt(3),De={draw:function(it,It){var Qt=-Math.sqrt(It/(3*Le));it.moveTo(0,2*Qt),it.lineTo(-Le*Qt,-Qt),it.lineTo(Le*Qt,-Qt),it.closePath()}},ye=-.5,Ce=Math.sqrt(3)/2,Fe=1/Math.sqrt(12),Ke=3*(Fe/2+1),Ue={draw:function(it,It){var Qt=Math.sqrt(It/Ke),ir=Qt/2,Or=Qt*Fe,qr=ir,Ir=Qt*Fe+Qt,kr=-qr,Zr=Ir;it.moveTo(ir,Or),it.lineTo(qr,Ir),it.lineTo(kr,Zr),it.lineTo(ye*ir-Ce*Or,Ce*ir+ye*Or),it.lineTo(ye*qr-Ce*Ir,Ce*qr+ye*Ir),it.lineTo(ye*kr-Ce*Zr,Ce*kr+ye*Zr),it.lineTo(ye*ir+Ce*Or,ye*Or-Ce*ir),it.lineTo(ye*qr+Ce*Ir,ye*Ir-Ce*qr),it.lineTo(ye*kr+Ce*Zr,ye*Zr-Ce*kr),it.closePath()}},Be=[J,j,ge,be,de,De,Ue];function nt(){}function gt(it,It,Qt){it._context.bezierCurveTo((2*it._x0+it._x1)/3,(2*it._y0+it._y1)/3,(it._x0+2*it._x1)/3,(it._y0+2*it._y1)/3,(it._x0+4*it._x1+It)/6,(it._y0+4*it._y1+Qt)/6)}function Nt(it){this._context=it}function Bt(it){this._context=it}function Et(it){this._context=it}function at(it,It){this._basis=new Nt(it),this._beta=It}Nt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:gt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(it,It){switch(it=+it,It=+It,this._point){case 0:this._point=1,this._line?this._context.lineTo(it,It):this._context.moveTo(it,It);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:gt(this,it,It)}this._x0=this._x1,this._x1=it,this._y0=this._y1,this._y1=It}},Bt.prototype={areaStart:nt,areaEnd:nt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(it,It){switch(it=+it,It=+It,this._point){case 0:this._point=1,this._x2=it,this._y2=It;break;case 1:this._point=2,this._x3=it,this._y3=It;break;case 2:this._point=3,this._x4=it,this._y4=It,this._context.moveTo((this._x0+4*this._x1+it)/6,(this._y0+4*this._y1+It)/6);break;default:gt(this,it,It)}this._x0=this._x1,this._x1=it,this._y0=this._y1,this._y1=It}},Et.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(it,It){switch(it=+it,It=+It,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var Qt=(this._x0+4*this._x1+it)/6,ir=(this._y0+4*this._y1+It)/6;this._line?this._context.lineTo(Qt,ir):this._context.moveTo(Qt,ir);break;case 3:this._point=4;default:gt(this,it,It)}this._x0=this._x1,this._x1=it,this._y0=this._y1,this._y1=It}},at.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var it=this._x,It=this._y,Qt=it.length-1;if(Qt>0)for(var Zr,ir=it[0],Or=It[0],qr=it[Qt]-ir,Ir=It[Qt]-Or,kr=-1;++kr<=Qt;)this._basis.point(this._beta*it[kr]+(1-this._beta)*(ir+(Zr=kr/Qt)*qr),this._beta*It[kr]+(1-this._beta)*(Or+Zr*Ir));this._x=this._y=null,this._basis.lineEnd()},point:function(it,It){this._x.push(+it),this._y.push(+It)}};var vt=function it(It){function Qt(ir){return 1===It?new Nt(ir):new at(ir,It)}return Qt.beta=function(ir){return it(+ir)},Qt}(.85);function Qe(it,It,Qt){it._context.bezierCurveTo(it._x1+it._k*(it._x2-it._x0),it._y1+it._k*(it._y2-it._y0),it._x2+it._k*(it._x1-It),it._y2+it._k*(it._y1-Qt),it._x2,it._y2)}function Pe(it,It){this._context=it,this._k=(1-It)/6}Pe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Qe(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(it,It){switch(it=+it,It=+It,this._point){case 0:this._point=1,this._line?this._context.lineTo(it,It):this._context.moveTo(it,It);break;case 1:this._point=2,this._x1=it,this._y1=It;break;case 2:this._point=3;default:Qe(this,it,It)}this._x0=this._x1,this._x1=this._x2,this._x2=it,this._y0=this._y1,this._y1=this._y2,this._y2=It}};var Ze=function it(It){function Qt(ir){return new Pe(ir,It)}return Qt.tension=function(ir){return it(+ir)},Qt}(0);function Xe(it,It){this._context=it,this._k=(1-It)/6}Xe.prototype={areaStart:nt,areaEnd:nt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(it,It){switch(it=+it,It=+It,this._point){case 0:this._point=1,this._x3=it,this._y3=It;break;case 1:this._point=2,this._context.moveTo(this._x4=it,this._y4=It);break;case 2:this._point=3,this._x5=it,this._y5=It;break;default:Qe(this,it,It)}this._x0=this._x1,this._x1=this._x2,this._x2=it,this._y0=this._y1,this._y1=this._y2,this._y2=It}};var rt=function it(It){function Qt(ir){return new Xe(ir,It)}return Qt.tension=function(ir){return it(+ir)},Qt}(0);function kt(it,It){this._context=it,this._k=(1-It)/6}kt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(it,It){switch(it=+it,It=+It,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Qe(this,it,It)}this._x0=this._x1,this._x1=this._x2,this._x2=it,this._y0=this._y1,this._y1=this._y2,this._y2=It}};var Tt=function it(It){function Qt(ir){return new kt(ir,It)}return Qt.tension=function(ir){return it(+ir)},Qt}(0);function Xt(it,It,Qt){var ir=it._x1,Or=it._y1,qr=it._x2,Ir=it._y2;if(it._l01_a>a){var kr=2*it._l01_2a+3*it._l01_a*it._l12_a+it._l12_2a,Zr=3*it._l01_a*(it._l01_a+it._l12_a);ir=(ir*kr-it._x0*it._l12_2a+it._x2*it._l01_2a)/Zr,Or=(Or*kr-it._y0*it._l12_2a+it._y2*it._l01_2a)/Zr}if(it._l23_a>a){var An=2*it._l23_2a+3*it._l23_a*it._l12_a+it._l12_2a,wn=3*it._l23_a*(it._l23_a+it._l12_a);qr=(qr*An+it._x1*it._l23_2a-It*it._l12_2a)/wn,Ir=(Ir*An+it._y1*it._l23_2a-Qt*it._l12_2a)/wn}it._context.bezierCurveTo(ir,Or,qr,Ir,it._x2,it._y2)}function ar(it,It){this._context=it,this._alpha=It}ar.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(it,It){if(it=+it,It=+It,this._point){var Qt=this._x2-it,ir=this._y2-It;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Qt*Qt+ir*ir,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(it,It):this._context.moveTo(it,It);break;case 1:this._point=2;break;case 2:this._point=3;default:Xt(this,it,It)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=it,this._y0=this._y1,this._y1=this._y2,this._y2=It}};var Ut=function it(It){function Qt(ir){return It?new ar(ir,It):new Pe(ir,0)}return Qt.alpha=function(ir){return it(+ir)},Qt}(.5);function Jt(it,It){this._context=it,this._alpha=It}Jt.prototype={areaStart:nt,areaEnd:nt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(it,It){if(it=+it,It=+It,this._point){var Qt=this._x2-it,ir=this._y2-It;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Qt*Qt+ir*ir,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=it,this._y3=It;break;case 1:this._point=2,this._context.moveTo(this._x4=it,this._y4=It);break;case 2:this._point=3,this._x5=it,this._y5=It;break;default:Xt(this,it,It)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=it,this._y0=this._y1,this._y1=this._y2,this._y2=It}};var nr=function it(It){function Qt(ir){return It?new Jt(ir,It):new Xe(ir,0)}return Qt.alpha=function(ir){return it(+ir)},Qt}(.5);function rr(it,It){this._context=it,this._alpha=It}rr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(it,It){if(it=+it,It=+It,this._point){var Qt=this._x2-it,ir=this._y2-It;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Qt*Qt+ir*ir,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Xt(this,it,It)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=it,this._y0=this._y1,this._y1=this._y2,this._y2=It}};var br=function it(It){function Qt(ir){return It?new rr(ir,It):new kt(ir,0)}return Qt.alpha=function(ir){return it(+ir)},Qt}(.5);function Hr(it){this._context=it}function jr(it){return it<0?-1:1}function et(it,It,Qt){var ir=it._x1-it._x0,Or=It-it._x1,qr=(it._y1-it._y0)/(ir||Or<0&&-0),Ir=(Qt-it._y1)/(Or||ir<0&&-0),kr=(qr*Or+Ir*ir)/(ir+Or);return(jr(qr)+jr(Ir))*Math.min(Math.abs(qr),Math.abs(Ir),.5*Math.abs(kr))||0}function Yt(it,It){var Qt=it._x1-it._x0;return Qt?(3*(it._y1-it._y0)/Qt-It)/2:It}function qt(it,It,Qt){var ir=it._x0,qr=it._x1,Ir=it._y1,kr=(qr-ir)/3;it._context.bezierCurveTo(ir+kr,it._y0+kr*It,qr-kr,Ir-kr*Qt,qr,Ir)}function Vt(it){this._context=it}function Tr(it){this._context=new tt(it)}function tt(it){this._context=it}function ht(it){this._context=it}function Me(it){var It,ir,Qt=it.length-1,Or=new Array(Qt),qr=new Array(Qt),Ir=new Array(Qt);for(Or[0]=0,qr[0]=2,Ir[0]=it[0]+2*it[1],It=1;It<Qt-1;++It)Or[It]=1,qr[It]=4,Ir[It]=4*it[It]+2*it[It+1];for(Or[Qt-1]=2,qr[Qt-1]=7,Ir[Qt-1]=8*it[Qt-1]+it[Qt],It=1;It<Qt;++It)qr[It]-=ir=Or[It]/qr[It-1],Ir[It]-=ir*Ir[It-1];for(Or[Qt-1]=Ir[Qt-1]/qr[Qt-1],It=Qt-2;It>=0;--It)Or[It]=(Ir[It]-Or[It+1])/qr[It];for(qr[Qt-1]=(it[Qt]+Or[Qt-1])/2,It=0;It<Qt-1;++It)qr[It]=2*it[It+1]-Or[It+1];return[Or,qr]}function Je(it,It){this._context=it,this._t=It}function pt(it,It){if((Ir=it.length)>1)for(var ir,Or,Ir,Qt=1,qr=it[It[0]],kr=qr.length;Qt<Ir;++Qt)for(Or=qr,qr=it[It[Qt]],ir=0;ir<kr;++ir)qr[ir][1]+=qr[ir][0]=isNaN(Or[ir][1])?Or[ir][0]:Or[ir][1]}function Ct(it){for(var It=it.length,Qt=new Array(It);--It>=0;)Qt[It]=It;return Qt}function Dt(it,It){return it[It]}function Ar(it){var It=it.map(en);return Ct(it).sort(function(Qt,ir){return It[Qt]-It[ir]})}function en(it){for(var Or,It=-1,Qt=0,ir=it.length,qr=-1/0;++It<ir;)(Or=+it[It][1])>qr&&(qr=Or,Qt=It);return Qt}function mr(it){var It=it.map(wr);return Ct(it).sort(function(Qt,ir){return It[Qt]-It[ir]})}function wr(it){for(var Or,It=0,Qt=-1,ir=it.length;++Qt<ir;)(Or=+it[Qt][1])&&(It+=Or);return It}Hr.prototype={areaStart:nt,areaEnd:nt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(it,It){it=+it,It=+It,this._point?this._context.lineTo(it,It):(this._point=1,this._context.moveTo(it,It))}},Vt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qt(this,this._t0,Yt(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(it,It){var Qt=NaN;if(It=+It,(it=+it)!==this._x1||It!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(it,It):this._context.moveTo(it,It);break;case 1:this._point=2;break;case 2:this._point=3,qt(this,Yt(this,Qt=et(this,it,It)),Qt);break;default:qt(this,this._t0,Qt=et(this,it,It))}this._x0=this._x1,this._x1=it,this._y0=this._y1,this._y1=It,this._t0=Qt}}},(Tr.prototype=Object.create(Vt.prototype)).point=function(it,It){Vt.prototype.point.call(this,It,it)},tt.prototype={moveTo:function(it,It){this._context.moveTo(It,it)},closePath:function(){this._context.closePath()},lineTo:function(it,It){this._context.lineTo(It,it)},bezierCurveTo:function(it,It,Qt,ir,Or,qr){this._context.bezierCurveTo(It,it,ir,Qt,qr,Or)}},ht.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var it=this._x,It=this._y,Qt=it.length;if(Qt)if(this._line?this._context.lineTo(it[0],It[0]):this._context.moveTo(it[0],It[0]),2===Qt)this._context.lineTo(it[1],It[1]);else for(var ir=Me(it),Or=Me(It),qr=0,Ir=1;Ir<Qt;++qr,++Ir)this._context.bezierCurveTo(ir[0][qr],Or[0][qr],ir[1][qr],Or[1][qr],it[Ir],It[Ir]);(this._line||0!==this._line&&1===Qt)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(it,It){this._x.push(+it),this._y.push(+It)}},Je.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(it,It){switch(it=+it,It=+It,this._point){case 0:this._point=1,this._line?this._context.lineTo(it,It):this._context.moveTo(it,It);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,It),this._context.lineTo(it,It);else{var Qt=this._x*(1-this._t)+it*this._t;this._context.lineTo(Qt,this._y),this._context.lineTo(Qt,It)}}this._x=it,this._y=It}},_.arc=function M(){var it=S,It=p,Qt=m(0),ir=null,Or=w,qr=l,Ir=y,kr=null;function Zr(){var An,wn,Zn=+it.apply(this,arguments),Ln=+It.apply(this,arguments),Wn=Or.apply(this,arguments)-g,$n=qr.apply(this,arguments)-g,wa=E($n-Wn),ma=$n>Wn;if(kr||(kr=An=k.path()),Ln<Zn&&(wn=Ln,Ln=Zn,Zn=wn),Ln>a)if(wa>s-a)kr.moveTo(Ln*c(Wn),Ln*t(Wn)),kr.arc(0,0,Ln,Wn,$n,!ma),Zn>a&&(kr.moveTo(Zn*c($n),Zn*t($n)),kr.arc(0,0,Zn,$n,Wn,ma));else{var On,Xn,$a=Wn,Ja=$n,Va=Wn,ai=$n,Er=wa,gn=wa,dn=Ir.apply(this,arguments)/2,kn=dn>a&&(ir?+ir.apply(this,arguments):i(Zn*Zn+Ln*Ln)),Un=n(E(Ln-Zn)/2,+Qt.apply(this,arguments)),ra=Un,Gn=Un;if(kn>a){var pa=x(kn/Zn*t(dn)),oi=x(kn/Ln*t(dn));(Er-=2*pa)>a?(Va+=pa*=ma?1:-1,ai-=pa):(Er=0,Va=ai=(Wn+$n)/2),(gn-=2*oi)>a?($a+=oi*=ma?1:-1,Ja-=oi):(gn=0,$a=Ja=(Wn+$n)/2)}var Ht=Ln*c($a),dr=Ln*t($a),rn=Zn*c(ai),ln=Zn*t(ai);if(Un>a){var Pt,or=Ln*c(Ja),Br=Ln*t(Ja),Rt=Zn*c(Va),Lt=Zn*t(Va);if(wa<r&&(Pt=A(Ht,dr,Rt,Lt,or,Br,rn,ln))){var Wt=Ht-Pt[0],hr=dr-Pt[1],vn=or-Pt[0],Fn=Br-Pt[1],Jn=1/t(b((Wt*vn+hr*Fn)/(i(Wt*Wt+hr*hr)*i(vn*vn+Fn*Fn)))/2),_n=i(Pt[0]*Pt[0]+Pt[1]*Pt[1]);ra=n(Un,(Zn-_n)/(Jn-1)),Gn=n(Un,(Ln-_n)/(Jn+1))}}gn>a?Gn>a?(On=T(Rt,Lt,Ht,dr,Ln,Gn,ma),Xn=T(or,Br,rn,ln,Ln,Gn,ma),kr.moveTo(On.cx+On.x01,On.cy+On.y01),Gn<Un?kr.arc(On.cx,On.cy,Gn,e(On.y01,On.x01),e(Xn.y01,Xn.x01),!ma):(kr.arc(On.cx,On.cy,Gn,e(On.y01,On.x01),e(On.y11,On.x11),!ma),kr.arc(0,0,Ln,e(On.cy+On.y11,On.cx+On.x11),e(Xn.cy+Xn.y11,Xn.cx+Xn.x11),!ma),kr.arc(Xn.cx,Xn.cy,Gn,e(Xn.y11,Xn.x11),e(Xn.y01,Xn.x01),!ma))):(kr.moveTo(Ht,dr),kr.arc(0,0,Ln,$a,Ja,!ma)):kr.moveTo(Ht,dr),Zn>a&&Er>a?ra>a?(On=T(rn,ln,or,Br,Zn,-ra,ma),Xn=T(Ht,dr,Rt,Lt,Zn,-ra,ma),kr.lineTo(On.cx+On.x01,On.cy+On.y01),ra<Un?kr.arc(On.cx,On.cy,ra,e(On.y01,On.x01),e(Xn.y01,Xn.x01),!ma):(kr.arc(On.cx,On.cy,ra,e(On.y01,On.x01),e(On.y11,On.x11),!ma),kr.arc(0,0,Zn,e(On.cy+On.y11,On.cx+On.x11),e(Xn.cy+Xn.y11,Xn.cx+Xn.x11),ma),kr.arc(Xn.cx,Xn.cy,ra,e(Xn.y11,Xn.x11),e(Xn.y01,Xn.x01),!ma))):kr.arc(0,0,Zn,ai,Va,ma):kr.lineTo(rn,ln)}else kr.moveTo(0,0);if(kr.closePath(),An)return kr=null,An+""||null}return Zr.centroid=function(){var An=(+it.apply(this,arguments)+ +It.apply(this,arguments))/2,wn=(+Or.apply(this,arguments)+ +qr.apply(this,arguments))/2-r/2;return[c(wn)*An,t(wn)*An]},Zr.innerRadius=function(An){return arguments.length?(it="function"==typeof An?An:m(+An),Zr):it},Zr.outerRadius=function(An){return arguments.length?(It="function"==typeof An?An:m(+An),Zr):It},Zr.cornerRadius=function(An){return arguments.length?(Qt="function"==typeof An?An:m(+An),Zr):Qt},Zr.padRadius=function(An){return arguments.length?(ir=null==An?null:"function"==typeof An?An:m(+An),Zr):ir},Zr.startAngle=function(An){return arguments.length?(Or="function"==typeof An?An:m(+An),Zr):Or},Zr.endAngle=function(An){return arguments.length?(qr="function"==typeof An?An:m(+An),Zr):qr},Zr.padAngle=function(An){return arguments.length?(Ir="function"==typeof An?An:m(+An),Zr):Ir},Zr.context=function(An){return arguments.length?(kr=null==An?null:An,Zr):kr},Zr},_.area=R,_.areaRadial=oe,_.curveBasis=function St(it){return new Nt(it)},_.curveBasisClosed=function Zt(it){return new Bt(it)},_.curveBasisOpen=function wt(it){return new Et(it)},_.curveBundle=vt,_.curveCardinal=Ze,_.curveCardinalClosed=rt,_.curveCardinalOpen=Tt,_.curveCatmullRom=Ut,_.curveCatmullRomClosed=nr,_.curveCatmullRomOpen=br,_.curveLinear=u,_.curveLinearClosed=function on(it){return new Hr(it)},_.curveMonotoneX=function je(it){return new Vt(it)},_.curveMonotoneY=function ct(it){return new Tr(it)},_.curveNatural=function Se(it){return new ht(it)},_.curveStep=function We(it){return new Je(it,.5)},_.curveStepAfter=function lt(it){return new Je(it,1)},_.curveStepBefore=function st(it){return new Je(it,0)},_.line=C,_.lineRadial=X,_.linkHorizontal=function K(){return $(V)},_.linkRadial=function te(){var it=$(q);return it.angle=it.x,delete it.x,it.radius=it.y,delete it.y,it},_.linkVertical=function Y(){return $(H)},_.pie=function I(){var it=O,It=z,Qt=null,ir=m(0),Or=m(s),qr=m(0);function Ir(kr){var Zr,wn,Zn,$a,ai,An=kr.length,Ln=0,Wn=new Array(An),$n=new Array(An),wa=+ir.apply(this,arguments),ma=Math.min(s,Math.max(-s,Or.apply(this,arguments)-wa)),Ja=Math.min(Math.abs(ma)/An,qr.apply(this,arguments)),Va=Ja*(ma<0?-1:1);for(Zr=0;Zr<An;++Zr)(ai=$n[Wn[Zr]=Zr]=+it(kr[Zr],Zr,kr))>0&&(Ln+=ai);for(null!=It?Wn.sort(function(Er,gn){return It($n[Er],$n[gn])}):null!=Qt&&Wn.sort(function(Er,gn){return Qt(kr[Er],kr[gn])}),Zr=0,Zn=Ln?(ma-An*Va)/Ln:0;Zr<An;++Zr,wa=$a)$n[wn=Wn[Zr]]={data:kr[wn],index:Zr,value:ai=$n[wn],startAngle:wa,endAngle:$a=wa+(ai>0?ai*Zn:0)+Va,padAngle:Ja};return $n}return Ir.value=function(kr){return arguments.length?(it="function"==typeof kr?kr:m(+kr),Ir):it},Ir.sortValues=function(kr){return arguments.length?(It=kr,Qt=null,Ir):It},Ir.sort=function(kr){return arguments.length?(Qt=kr,It=null,Ir):Qt},Ir.startAngle=function(kr){return arguments.length?(ir="function"==typeof kr?kr:m(+kr),Ir):ir},Ir.endAngle=function(kr){return arguments.length?(Or="function"==typeof kr?kr:m(+kr),Ir):Or},Ir.padAngle=function(kr){return arguments.length?(qr="function"==typeof kr?kr:m(+kr),Ir):qr},Ir},_.pointRadial=se,_.radialArea=oe,_.radialLine=X,_.stack=function Gt(){var it=m([]),It=Ct,Qt=pt,ir=Dt;function Or(qr){var kr,Zn,Ir=it.apply(this,arguments),Zr=qr.length,An=Ir.length,wn=new Array(An);for(kr=0;kr<An;++kr){for(var wa,Ln=Ir[kr],Wn=wn[kr]=new Array(Zr),$n=0;$n<Zr;++$n)Wn[$n]=wa=[0,+ir(qr[$n],Ln,$n,qr)],wa.data=qr[$n];Wn.key=Ln}for(kr=0,Zn=It(wn);kr<An;++kr)wn[Zn[kr]].index=kr;return Qt(wn,Zn),wn}return Or.keys=function(qr){return arguments.length?(it="function"==typeof qr?qr:m(ne.call(qr)),Or):it},Or.value=function(qr){return arguments.length?(ir="function"==typeof qr?qr:m(+qr),Or):ir},Or.order=function(qr){return arguments.length?(It=null==qr?Ct:"function"==typeof qr?qr:m(ne.call(qr)),Or):It},Or.offset=function(qr){return arguments.length?(Qt=null==qr?pt:qr,Or):Qt},Or},_.stackOffsetDiverging=function pr(it,It){if((Zr=it.length)>0)for(var Qt,Or,qr,Ir,kr,Zr,ir=0,An=it[It[0]].length;ir<An;++ir)for(Ir=kr=0,Qt=0;Qt<Zr;++Qt)(qr=(Or=it[It[Qt]][ir])[1]-Or[0])>0?(Or[0]=Ir,Or[1]=Ir+=qr):qr<0?(Or[1]=kr,Or[0]=kr+=qr):(Or[0]=0,Or[1]=qr)},_.stackOffsetExpand=function fr(it,It){if((ir=it.length)>0){for(var Qt,ir,Ir,Or=0,qr=it[0].length;Or<qr;++Or){for(Ir=Qt=0;Qt<ir;++Qt)Ir+=it[Qt][Or][1]||0;if(Ir)for(Qt=0;Qt<ir;++Qt)it[Qt][Or][1]/=Ir}pt(it,It)}},_.stackOffsetNone=pt,_.stackOffsetSilhouette=function Jr(it,It){if((Or=it.length)>0){for(var Or,Qt=0,ir=it[It[0]],qr=ir.length;Qt<qr;++Qt){for(var Ir=0,kr=0;Ir<Or;++Ir)kr+=it[Ir][Qt][1]||0;ir[Qt][1]+=ir[Qt][0]=-kr/2}pt(it,It)}},_.stackOffsetWiggle=function Lr(it,It){if((Ir=it.length)>0&&(qr=(Or=it[It[0]]).length)>0){for(var Or,qr,Ir,Qt=0,ir=1;ir<qr;++ir){for(var kr=0,Zr=0,An=0;kr<Ir;++kr){for(var wn=it[It[kr]],Zn=wn[ir][1]||0,Wn=(Zn-(wn[ir-1][1]||0))/2,$n=0;$n<kr;++$n){var wa=it[It[$n]];Wn+=(wa[ir][1]||0)-(wa[ir-1][1]||0)}Zr+=Zn,An+=Wn*Zn}Or[ir-1][1]+=Or[ir-1][0]=Qt,Zr&&(Qt-=An/Zr)}Or[ir-1][1]+=Or[ir-1][0]=Qt,pt(it,It)}},_.stackOrderAppearance=Ar,_.stackOrderAscending=mr,_.stackOrderDescending=function Wr(it){return mr(it).reverse()},_.stackOrderInsideOut=function Kr(it){var Qt,ir,It=it.length,Or=it.map(wr),qr=Ar(it),Ir=0,kr=0,Zr=[],An=[];for(Qt=0;Qt<It;++Qt)ir=qr[Qt],Ir<kr?(Ir+=Or[ir],Zr.push(ir)):(kr+=Or[ir],An.push(ir));return An.reverse().concat(Zr)},_.stackOrderNone=Ct,_.stackOrderReverse=function Cr(it){return Ct(it).reverse()},_.symbol=function Ie(){var it=m(J),It=m(64),Qt=null;function ir(){var Or;if(Qt||(Qt=Or=k.path()),it.apply(this,arguments).draw(Qt,+It.apply(this,arguments)),Or)return Qt=null,Or+""||null}return ir.type=function(Or){return arguments.length?(it="function"==typeof Or?Or:m(Or),ir):it},ir.size=function(Or){return arguments.length?(It="function"==typeof Or?Or:m(+Or),ir):It},ir.context=function(Or){return arguments.length?(Qt=null==Or?null:Or,ir):Qt},ir},_.symbolCircle=J,_.symbolCross=j,_.symbolDiamond=ge,_.symbolSquare=be,_.symbolStar=de,_.symbolTriangle=De,_.symbolWye=Ue,_.symbols=Be,Object.defineProperty(_,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==ie?k(ae,v("d3-path")):k((_=_||self).d3=_.d3||{},_.d3)},{"d3-path":117}],120:[function(v,ie,ae){var _,k;_=this,k=function(_,k){"use strict";function m(at){if(0<=at.y&&at.y<100){var vt=new Date(-1,at.m,at.d,at.H,at.M,at.S,at.L);return vt.setFullYear(at.y),vt}return new Date(at.y,at.m,at.d,at.H,at.M,at.S,at.L)}function E(at){if(0<=at.y&&at.y<100){var vt=new Date(Date.UTC(-1,at.m,at.d,at.H,at.M,at.S,at.L));return vt.setUTCFullYear(at.y),vt}return new Date(Date.UTC(at.y,at.m,at.d,at.H,at.M,at.S,at.L))}function e(at,vt,Qe){return{y:at,m:vt,d:Qe,H:0,M:0,S:0,L:0}}function c(at){var vt=at.dateTime,Qe=at.date,Pe=at.time,Ze=at.periods,Xe=at.days,rt=at.shortDays,kt=at.months,Tt=at.shortMonths,Xt=g(Ze),ar=s(Ze),Ut=g(Xe),Jt=s(Xe),nr=g(rt),rr=s(rt),br=g(kt),Hr=s(kt),on=g(Tt),jr=s(Tt),et={a:function lt(wr){return rt[wr.getDay()]},A:function pt(wr){return Xe[wr.getDay()]},b:function Ct(wr){return Tt[wr.getMonth()]},B:function Dt(wr){return kt[wr.getMonth()]},c:null,d:D,e:D,f:se,H:N,I:U,j:X,L:oe,m:ne,M:W,p:function Gt(wr){return Ze[+(wr.getHours()>=12)]},q:function fr(wr){return 1+~~(wr.getMonth()/3)},Q:Ie,s:nt,S:G,u:$,U:V,V:H,w:q,W:K,x:null,X:null,y:Y,Y:te,Z:J,"%":Be},Yt={a:function pr(wr){return rt[wr.getUTCDay()]},A:function Jr(wr){return Xe[wr.getUTCDay()]},b:function Lr(wr){return Tt[wr.getUTCMonth()]},B:function Ar(wr){return kt[wr.getUTCMonth()]},c:null,d:j,e:j,f:xe,H:re,I:le,j:ge,L:pe,m:ke,M:we,p:function en(wr){return Ze[+(wr.getUTCHours()>=12)]},q:function mr(wr){return 1+~~(wr.getUTCMonth()/3)},Q:Ie,s:nt,S:de,u:be,U:Le,V:De,w:ye,W:Ce,x:null,X:null,y:Fe,Y:Ke,Z:Ue,"%":Be},qt={a:function ct(wr,Wr,Kr){var Cr=nr.exec(Wr.slice(Kr));return Cr?(wr.w=rr[Cr[0].toLowerCase()],Kr+Cr[0].length):-1},A:function ht(wr,Wr,Kr){var Cr=Ut.exec(Wr.slice(Kr));return Cr?(wr.w=Jt[Cr[0].toLowerCase()],Kr+Cr[0].length):-1},b:function Me(wr,Wr,Kr){var Cr=on.exec(Wr.slice(Kr));return Cr?(wr.m=jr[Cr[0].toLowerCase()],Kr+Cr[0].length):-1},B:function Se(wr,Wr,Kr){var Cr=br.exec(Wr.slice(Kr));return Cr?(wr.m=Hr[Cr[0].toLowerCase()],Kr+Cr[0].length):-1},c:function Je(wr,Wr,Kr){return tt(wr,vt,Wr,Kr)},d:f,e:f,f:z,H:h,I:h,j:u,L:R,m:M,M:o,p:function je(wr,Wr,Kr){var Cr=Xt.exec(Wr.slice(Kr));return Cr?(wr.p=ar[Cr[0].toLowerCase()],Kr+Cr[0].length):-1},q:T,Q:I,s:F,S:C,u:x,U:S,V:p,w:b,W:w,x:function We(wr,Wr,Kr){return tt(wr,Qe,Wr,Kr)},X:function st(wr,Wr,Kr){return tt(wr,Pe,Wr,Kr)},y,Y:l,Z:A,"%":O};function Vt(wr,Wr){return function(Kr){var ir,Or,qr,Cr=[],it=-1,It=0,Qt=wr.length;for(Kr instanceof Date||(Kr=new Date(+Kr));++it<Qt;)37===wr.charCodeAt(it)&&(Cr.push(wr.slice(It,it)),null!=(Or=d[ir=wr.charAt(++it)])?ir=wr.charAt(++it):Or="e"===ir?" ":"0",(qr=Wr[ir])&&(ir=qr(Kr,Or)),Cr.push(ir),It=it+1);return Cr.push(wr.slice(It,it)),Cr.join("")}}function Tr(wr,Wr){return function(Kr){var It,Qt,Cr=e(1900,void 0,1);if(tt(Cr,wr,Kr+="",0)!=Kr.length)return null;if("Q"in Cr)return new Date(Cr.Q);if("s"in Cr)return new Date(1e3*Cr.s+("L"in Cr?Cr.L:0));if(Wr&&!("Z"in Cr)&&(Cr.Z=0),"p"in Cr&&(Cr.H=Cr.H%12+12*Cr.p),void 0===Cr.m&&(Cr.m="q"in Cr?Cr.q:0),"V"in Cr){if(Cr.V<1||Cr.V>53)return null;"w"in Cr||(Cr.w=1),"Z"in Cr?(Qt=(It=E(e(Cr.y,0,1))).getUTCDay(),It=Qt>4||0===Qt?k.utcMonday.ceil(It):k.utcMonday(It),It=k.utcDay.offset(It,7*(Cr.V-1)),Cr.y=It.getUTCFullYear(),Cr.m=It.getUTCMonth(),Cr.d=It.getUTCDate()+(Cr.w+6)%7):(Qt=(It=m(e(Cr.y,0,1))).getDay(),It=Qt>4||0===Qt?k.timeMonday.ceil(It):k.timeMonday(It),It=k.timeDay.offset(It,7*(Cr.V-1)),Cr.y=It.getFullYear(),Cr.m=It.getMonth(),Cr.d=It.getDate()+(Cr.w+6)%7)}else("W"in Cr||"U"in Cr)&&("w"in Cr||(Cr.w="u"in Cr?Cr.u%7:"W"in Cr?1:0),Qt="Z"in Cr?E(e(Cr.y,0,1)).getUTCDay():m(e(Cr.y,0,1)).getDay(),Cr.m=0,Cr.d="W"in Cr?(Cr.w+6)%7+7*Cr.W-(Qt+5)%7:Cr.w+7*Cr.U-(Qt+6)%7);return"Z"in Cr?(Cr.H+=Cr.Z/100|0,Cr.M+=Cr.Z%100,E(Cr)):m(Cr)}}function tt(wr,Wr,Kr,Cr){for(var ir,Or,it=0,It=Wr.length,Qt=Kr.length;it<It;){if(Cr>=Qt)return-1;if(37===(ir=Wr.charCodeAt(it++))){if(ir=Wr.charAt(it++),!(Or=qt[ir in d?Wr.charAt(it++):ir])||(Cr=Or(wr,Kr,Cr))<0)return-1}else if(ir!=Kr.charCodeAt(Cr++))return-1}return Cr}return et.x=Vt(Qe,et),et.X=Vt(Pe,et),et.c=Vt(vt,et),Yt.x=Vt(Qe,Yt),Yt.X=Vt(Pe,Yt),Yt.c=Vt(vt,Yt),{format:function(wr){var Wr=Vt(wr+="",et);return Wr.toString=function(){return wr},Wr},parse:function(wr){var Wr=Tr(wr+="",!1);return Wr.toString=function(){return wr},Wr},utcFormat:function(wr){var Wr=Vt(wr+="",Yt);return Wr.toString=function(){return wr},Wr},utcParse:function(wr){var Wr=Tr(wr+="",!0);return Wr.toString=function(){return wr},Wr}}}var gt,d={"-":"",_:" ",0:"0"},n=/^\s*\d+/,t=/^%/,i=/[\\^$*+?|[\]().{}]/g;function a(at,vt,Qe){var Pe=at<0?"-":"",Ze=(Pe?-at:at)+"",Xe=Ze.length;return Pe+(Xe<Qe?new Array(Qe-Xe+1).join(vt)+Ze:Ze)}function r(at){return at.replace(i,"\\$&")}function g(at){return new RegExp("^(?:"+at.map(r).join("|")+")","i")}function s(at){for(var vt={},Qe=-1,Pe=at.length;++Qe<Pe;)vt[at[Qe].toLowerCase()]=Qe;return vt}function b(at,vt,Qe){var Pe=n.exec(vt.slice(Qe,Qe+1));return Pe?(at.w=+Pe[0],Qe+Pe[0].length):-1}function x(at,vt,Qe){var Pe=n.exec(vt.slice(Qe,Qe+1));return Pe?(at.u=+Pe[0],Qe+Pe[0].length):-1}function S(at,vt,Qe){var Pe=n.exec(vt.slice(Qe,Qe+2));return Pe?(at.U=+Pe[0],Qe+Pe[0].length):-1}function p(at,vt,Qe){var Pe=n.exec(vt.slice(Qe,Qe+2));return Pe?(at.V=+Pe[0],Qe+Pe[0].length):-1}function w(at,vt,Qe){var Pe=n.exec(vt.slice(Qe,Qe+2));return Pe?(at.W=+Pe[0],Qe+Pe[0].length):-1}function l(at,vt,Qe){var Pe=n.exec(vt.slice(Qe,Qe+4));return Pe?(at.y=+Pe[0],Qe+Pe[0].length):-1}function y(at,vt,Qe){var Pe=n.exec(vt.slice(Qe,Qe+2));return Pe?(at.y=+Pe[0]+(+Pe[0]>68?1900:2e3),Qe+Pe[0].length):-1}function A(at,vt,Qe){var Pe=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(vt.slice(Qe,Qe+6));return Pe?(at.Z=Pe[1]?0:-(Pe[2]+(Pe[3]||"00")),Qe+Pe[0].length):-1}function T(at,vt,Qe){var Pe=n.exec(vt.slice(Qe,Qe+1));return Pe?(at.q=3*Pe[0]-3,Qe+Pe[0].length):-1}function M(at,vt,Qe){var Pe=n.exec(vt.slice(Qe,Qe+2));return Pe?(at.m=Pe[0]-1,Qe+Pe[0].length):-1}function f(at,vt,Qe){var Pe=n.exec(vt.slice(Qe,Qe+2));return Pe?(at.d=+Pe[0],Qe+Pe[0].length):-1}function u(at,vt,Qe){var Pe=n.exec(vt.slice(Qe,Qe+3));return Pe?(at.m=0,at.d=+Pe[0],Qe+Pe[0].length):-1}function h(at,vt,Qe){var Pe=n.exec(vt.slice(Qe,Qe+2));return Pe?(at.H=+Pe[0],Qe+Pe[0].length):-1}function o(at,vt,Qe){var Pe=n.exec(vt.slice(Qe,Qe+2));return Pe?(at.M=+Pe[0],Qe+Pe[0].length):-1}function C(at,vt,Qe){var Pe=n.exec(vt.slice(Qe,Qe+2));return Pe?(at.S=+Pe[0],Qe+Pe[0].length):-1}function R(at,vt,Qe){var Pe=n.exec(vt.slice(Qe,Qe+3));return Pe?(at.L=+Pe[0],Qe+Pe[0].length):-1}function z(at,vt,Qe){var Pe=n.exec(vt.slice(Qe,Qe+6));return Pe?(at.L=Math.floor(Pe[0]/1e3),Qe+Pe[0].length):-1}function O(at,vt,Qe){var Pe=t.exec(vt.slice(Qe,Qe+1));return Pe?Qe+Pe[0].length:-1}function I(at,vt,Qe){var Pe=n.exec(vt.slice(Qe));return Pe?(at.Q=+Pe[0],Qe+Pe[0].length):-1}function F(at,vt,Qe){var Pe=n.exec(vt.slice(Qe));return Pe?(at.s=+Pe[0],Qe+Pe[0].length):-1}function D(at,vt){return a(at.getDate(),vt,2)}function N(at,vt){return a(at.getHours(),vt,2)}function U(at,vt){return a(at.getHours()%12||12,vt,2)}function X(at,vt){return a(1+k.timeDay.count(k.timeYear(at),at),vt,3)}function oe(at,vt){return a(at.getMilliseconds(),vt,3)}function se(at,vt){return oe(at,vt)+"000"}function ne(at,vt){return a(at.getMonth()+1,vt,2)}function W(at,vt){return a(at.getMinutes(),vt,2)}function G(at,vt){return a(at.getSeconds(),vt,2)}function $(at){var vt=at.getDay();return 0===vt?7:vt}function V(at,vt){return a(k.timeSunday.count(k.timeYear(at)-1,at),vt,2)}function H(at,vt){var Qe=at.getDay();return at=Qe>=4||0===Qe?k.timeThursday(at):k.timeThursday.ceil(at),a(k.timeThursday.count(k.timeYear(at),at)+(4===k.timeYear(at).getDay()),vt,2)}function q(at){return at.getDay()}function K(at,vt){return a(k.timeMonday.count(k.timeYear(at)-1,at),vt,2)}function Y(at,vt){return a(at.getFullYear()%100,vt,2)}function te(at,vt){return a(at.getFullYear()%1e4,vt,4)}function J(at){var vt=at.getTimezoneOffset();return(vt>0?"-":(vt*=-1,"+"))+a(vt/60|0,"0",2)+a(vt%60,"0",2)}function j(at,vt){return a(at.getUTCDate(),vt,2)}function re(at,vt){return a(at.getUTCHours(),vt,2)}function le(at,vt){return a(at.getUTCHours()%12||12,vt,2)}function ge(at,vt){return a(1+k.utcDay.count(k.utcYear(at),at),vt,3)}function pe(at,vt){return a(at.getUTCMilliseconds(),vt,3)}function xe(at,vt){return pe(at,vt)+"000"}function ke(at,vt){return a(at.getUTCMonth()+1,vt,2)}function we(at,vt){return a(at.getUTCMinutes(),vt,2)}function de(at,vt){return a(at.getUTCSeconds(),vt,2)}function be(at){var vt=at.getUTCDay();return 0===vt?7:vt}function Le(at,vt){return a(k.utcSunday.count(k.utcYear(at)-1,at),vt,2)}function De(at,vt){var Qe=at.getUTCDay();return at=Qe>=4||0===Qe?k.utcThursday(at):k.utcThursday.ceil(at),a(k.utcThursday.count(k.utcYear(at),at)+(4===k.utcYear(at).getUTCDay()),vt,2)}function ye(at){return at.getUTCDay()}function Ce(at,vt){return a(k.utcMonday.count(k.utcYear(at)-1,at),vt,2)}function Fe(at,vt){return a(at.getUTCFullYear()%100,vt,2)}function Ke(at,vt){return a(at.getUTCFullYear()%1e4,vt,4)}function Ue(){return"+0000"}function Be(){return"%"}function Ie(at){return+at}function nt(at){return Math.floor(+at/1e3)}function Nt(at){return gt=c(at),_.timeFormat=gt.format,_.timeParse=gt.parse,_.utcFormat=gt.utcFormat,_.utcParse=gt.utcParse,gt}Nt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var St="%Y-%m-%dT%H:%M:%S.%LZ";var Zt=Date.prototype.toISOString?function Bt(at){return at.toISOString()}:_.utcFormat(St);var wt=+new Date("2000-01-01T00:00:00.000Z")?function Et(at){var vt=new Date(at);return isNaN(vt)?null:vt}:_.utcParse(St);_.isoFormat=Zt,_.isoParse=wt,_.timeFormatDefaultLocale=Nt,_.timeFormatLocale=c,Object.defineProperty(_,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==ie?k(ae,v("d3-time")):k((_=_||self).d3=_.d3||{},_.d3)},{"d3-time":121}],121:[function(v,ie,ae){var _,k;_=this,k=function(_){"use strict";var k=new Date,m=new Date;function E(ye,Ce,Fe,Ke){function Ue(Be){return ye(Be=0===arguments.length?new Date:new Date(+Be)),Be}return Ue.floor=function(Be){return ye(Be=new Date(+Be)),Be},Ue.ceil=function(Be){return ye(Be=new Date(Be-1)),Ce(Be,1),ye(Be),Be},Ue.round=function(Be){var Ie=Ue(Be),nt=Ue.ceil(Be);return Be-Ie<nt-Be?Ie:nt},Ue.offset=function(Be,Ie){return Ce(Be=new Date(+Be),null==Ie?1:Math.floor(Ie)),Be},Ue.range=function(Be,Ie,nt){var Nt,gt=[];if(Be=Ue.ceil(Be),nt=null==nt?1:Math.floor(nt),!(Be<Ie&&nt>0))return gt;do{gt.push(Nt=new Date(+Be)),Ce(Be,nt),ye(Be)}while(Nt<Be&&Be<Ie);return gt},Ue.filter=function(Be){return E(function(Ie){if(Ie>=Ie)for(;ye(Ie),!Be(Ie);)Ie.setTime(Ie-1)},function(Ie,nt){if(Ie>=Ie)if(nt<0)for(;++nt<=0;)for(;Ce(Ie,-1),!Be(Ie););else for(;--nt>=0;)for(;Ce(Ie,1),!Be(Ie););})},Fe&&(Ue.count=function(Be,Ie){return k.setTime(+Be),m.setTime(+Ie),ye(k),ye(m),Math.floor(Fe(k,m))},Ue.every=function(Be){return Be=Math.floor(Be),isFinite(Be)&&Be>0?Be>1?Ue.filter(Ke?function(Ie){return Ke(Ie)%Be==0}:function(Ie){return Ue.count(0,Ie)%Be==0}):Ue:null}),Ue}var e=E(function(){},function(ye,Ce){ye.setTime(+ye+Ce)},function(ye,Ce){return Ce-ye});e.every=function(ye){return ye=Math.floor(ye),isFinite(ye)&&ye>0?ye>1?E(function(Ce){Ce.setTime(Math.floor(Ce/ye)*ye)},function(Ce,Fe){Ce.setTime(+Ce+Fe*ye)},function(Ce,Fe){return(Fe-Ce)/ye}):e:null};var c=e.range,d=1e3,n=6e4,t=36e5,i=864e5,a=6048e5,r=E(function(ye){ye.setTime(ye-ye.getMilliseconds())},function(ye,Ce){ye.setTime(+ye+Ce*d)},function(ye,Ce){return(Ce-ye)/d},function(ye){return ye.getUTCSeconds()}),g=r.range,s=E(function(ye){ye.setTime(ye-ye.getMilliseconds()-ye.getSeconds()*d)},function(ye,Ce){ye.setTime(+ye+Ce*n)},function(ye,Ce){return(Ce-ye)/n},function(ye){return ye.getMinutes()}),b=s.range,x=E(function(ye){ye.setTime(ye-ye.getMilliseconds()-ye.getSeconds()*d-ye.getMinutes()*n)},function(ye,Ce){ye.setTime(+ye+Ce*t)},function(ye,Ce){return(Ce-ye)/t},function(ye){return ye.getHours()}),S=x.range,p=E(function(ye){ye.setHours(0,0,0,0)},function(ye,Ce){ye.setDate(ye.getDate()+Ce)},function(ye,Ce){return(Ce-ye-(Ce.getTimezoneOffset()-ye.getTimezoneOffset())*n)/i},function(ye){return ye.getDate()-1}),w=p.range;function l(ye){return E(function(Ce){Ce.setDate(Ce.getDate()-(Ce.getDay()+7-ye)%7),Ce.setHours(0,0,0,0)},function(Ce,Fe){Ce.setDate(Ce.getDate()+7*Fe)},function(Ce,Fe){return(Fe-Ce-(Fe.getTimezoneOffset()-Ce.getTimezoneOffset())*n)/a})}var y=l(0),A=l(1),T=l(2),M=l(3),f=l(4),u=l(5),h=l(6),o=y.range,C=A.range,R=T.range,z=M.range,O=f.range,I=u.range,F=h.range,D=E(function(ye){ye.setDate(1),ye.setHours(0,0,0,0)},function(ye,Ce){ye.setMonth(ye.getMonth()+Ce)},function(ye,Ce){return Ce.getMonth()-ye.getMonth()+12*(Ce.getFullYear()-ye.getFullYear())},function(ye){return ye.getMonth()}),N=D.range,U=E(function(ye){ye.setMonth(0,1),ye.setHours(0,0,0,0)},function(ye,Ce){ye.setFullYear(ye.getFullYear()+Ce)},function(ye,Ce){return Ce.getFullYear()-ye.getFullYear()},function(ye){return ye.getFullYear()});U.every=function(ye){return isFinite(ye=Math.floor(ye))&&ye>0?E(function(Ce){Ce.setFullYear(Math.floor(Ce.getFullYear()/ye)*ye),Ce.setMonth(0,1),Ce.setHours(0,0,0,0)},function(Ce,Fe){Ce.setFullYear(Ce.getFullYear()+Fe*ye)}):null};var X=U.range,oe=E(function(ye){ye.setUTCSeconds(0,0)},function(ye,Ce){ye.setTime(+ye+Ce*n)},function(ye,Ce){return(Ce-ye)/n},function(ye){return ye.getUTCMinutes()}),se=oe.range,ne=E(function(ye){ye.setUTCMinutes(0,0,0)},function(ye,Ce){ye.setTime(+ye+Ce*t)},function(ye,Ce){return(Ce-ye)/t},function(ye){return ye.getUTCHours()}),W=ne.range,G=E(function(ye){ye.setUTCHours(0,0,0,0)},function(ye,Ce){ye.setUTCDate(ye.getUTCDate()+Ce)},function(ye,Ce){return(Ce-ye)/i},function(ye){return ye.getUTCDate()-1}),$=G.range;function V(ye){return E(function(Ce){Ce.setUTCDate(Ce.getUTCDate()-(Ce.getUTCDay()+7-ye)%7),Ce.setUTCHours(0,0,0,0)},function(Ce,Fe){Ce.setUTCDate(Ce.getUTCDate()+7*Fe)},function(Ce,Fe){return(Fe-Ce)/a})}var H=V(0),q=V(1),K=V(2),Y=V(3),te=V(4),J=V(5),j=V(6),re=H.range,le=q.range,ge=K.range,pe=Y.range,xe=te.range,ke=J.range,we=j.range,de=E(function(ye){ye.setUTCDate(1),ye.setUTCHours(0,0,0,0)},function(ye,Ce){ye.setUTCMonth(ye.getUTCMonth()+Ce)},function(ye,Ce){return Ce.getUTCMonth()-ye.getUTCMonth()+12*(Ce.getUTCFullYear()-ye.getUTCFullYear())},function(ye){return ye.getUTCMonth()}),be=de.range,Le=E(function(ye){ye.setUTCMonth(0,1),ye.setUTCHours(0,0,0,0)},function(ye,Ce){ye.setUTCFullYear(ye.getUTCFullYear()+Ce)},function(ye,Ce){return Ce.getUTCFullYear()-ye.getUTCFullYear()},function(ye){return ye.getUTCFullYear()});Le.every=function(ye){return isFinite(ye=Math.floor(ye))&&ye>0?E(function(Ce){Ce.setUTCFullYear(Math.floor(Ce.getUTCFullYear()/ye)*ye),Ce.setUTCMonth(0,1),Ce.setUTCHours(0,0,0,0)},function(Ce,Fe){Ce.setUTCFullYear(Ce.getUTCFullYear()+Fe*ye)}):null};var De=Le.range;_.timeDay=p,_.timeDays=w,_.timeFriday=u,_.timeFridays=I,_.timeHour=x,_.timeHours=S,_.timeInterval=E,_.timeMillisecond=e,_.timeMilliseconds=c,_.timeMinute=s,_.timeMinutes=b,_.timeMonday=A,_.timeMondays=C,_.timeMonth=D,_.timeMonths=N,_.timeSaturday=h,_.timeSaturdays=F,_.timeSecond=r,_.timeSeconds=g,_.timeSunday=y,_.timeSundays=o,_.timeThursday=f,_.timeThursdays=O,_.timeTuesday=T,_.timeTuesdays=R,_.timeWednesday=M,_.timeWednesdays=z,_.timeWeek=y,_.timeWeeks=o,_.timeYear=U,_.timeYears=X,_.utcDay=G,_.utcDays=$,_.utcFriday=J,_.utcFridays=ke,_.utcHour=ne,_.utcHours=W,_.utcMillisecond=e,_.utcMilliseconds=c,_.utcMinute=oe,_.utcMinutes=se,_.utcMonday=q,_.utcMondays=le,_.utcMonth=de,_.utcMonths=be,_.utcSaturday=j,_.utcSaturdays=we,_.utcSecond=r,_.utcSeconds=g,_.utcSunday=H,_.utcSundays=re,_.utcThursday=te,_.utcThursdays=xe,_.utcTuesday=K,_.utcTuesdays=ge,_.utcWednesday=Y,_.utcWednesdays=pe,_.utcWeek=H,_.utcWeeks=re,_.utcYear=Le,_.utcYears=De,Object.defineProperty(_,"__esModule",{value:!0})},k("object"==typeof ae&&void 0!==ie?ae:(_=_||self).d3=_.d3||{})},{}],122:[function(v,ie,ae){arguments[4][121][0].apply(ae,arguments)},{dup:121}],123:[function(v,ie,ae){var _,k;_=this,k=function(_){"use strict";var c,d,k=0,m=0,E=0,n=0,t=0,i=0,a="object"==typeof performance&&performance.now?performance:Date,r="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(M){setTimeout(M,17)};function g(){return t||(r(s),t=a.now()+i)}function s(){t=0}function b(){this._call=this._time=this._next=null}function x(M,f,u){var h=new b;return h.restart(M,f,u),h}function S(){g(),++k;for(var f,M=c;M;)(f=t-M._time)>=0&&M._call.call(null,f),M=M._next;--k}function p(){t=(n=a.now())+i,k=m=0;try{S()}finally{k=0,function l(){for(var M,u,f=c,h=1/0;f;)f._call?(h>f._time&&(h=f._time),M=f,f=f._next):(u=f._next,f._next=null,f=M?M._next=u:c=u);d=M,y(h)}(),t=0}}function w(){var M=a.now(),f=M-n;f>1e3&&(i-=f,n=M)}function y(M){k||(m&&(m=clearTimeout(m)),M-t>24?(M<1/0&&(m=setTimeout(p,M-a.now()-i)),E&&(E=clearInterval(E))):(E||(n=a.now(),E=setInterval(w,1e3)),k=1,r(p)))}b.prototype=x.prototype={constructor:b,restart:function(M,f,u){if("function"!=typeof M)throw new TypeError("callback is not a function");u=(null==u?g():+u)+(null==f?0:+f),!this._next&&d!==this&&(d?d._next=this:c=this,d=this),this._call=M,this._time=u,y()},stop:function(){this._call&&(this._call=null,this._time=1/0,y())}},_.interval=function T(M,f,u){var h=new b,o=f;return null==f?(h.restart(M,f,u),h):(f=+f,u=null==u?g():+u,h.restart(function C(R){R+=o,h.restart(C,o+=f,u),M(R)},f,u),h)},_.now=g,_.timeout=function A(M,f,u){var h=new b;return h.restart(function(o){h.stop(),M(o+f)},f=null==f?0:+f,u),h},_.timer=x,_.timerFlush=S,Object.defineProperty(_,"__esModule",{value:!0})},k("object"==typeof ae&&void 0!==ie?ae:(_=_||self).d3=_.d3||{})},{}],124:[function(v,ie,ae){ie.exports=function(){for(var _=0;_<arguments.length;_++)if(void 0!==arguments[_])return arguments[_]}},{}],125:[function(v,ie,ae){"use strict";ie.exports=E;var k=(E.canvas=document.createElement("canvas")).getContext("2d"),m=e([32,126]);function E(c,d){Array.isArray(c)&&(c=c.join(", "));var t,n={},i=16,a=.05;d&&(2===d.length&&"number"==typeof d[0]?t=e(d):Array.isArray(d)?t=d:(d.o?t=e(d.o):d.pairs&&(t=d.pairs),d.fontSize&&(i=d.fontSize),null!=d.threshold&&(a=d.threshold))),t||(t=m),k.font=i+"px "+c;for(var r=0;r<t.length;r++){var g=t[r],s=k.measureText(g[0]).width+k.measureText(g[1]).width,b=k.measureText(g).width;Math.abs(s-b)>i*a&&(n[g]=(b-s)/i*1e3)}return n}function e(c){for(var d=[],n=c[0];n<=c[1];n++)for(var t=String.fromCharCode(n),i=c[0];i<c[1];i++){var a=String.fromCharCode(i);d.push(t+a)}return d}E.createPairs=e,E.ascii=m},{}],126:[function(v,ie,ae){var _=v("abs-svg-path"),k=v("normalize-svg-path"),m={M:"moveTo",C:"bezierCurveTo"};ie.exports=function(E,e){E.beginPath(),k(_(e)).forEach(function(c){var d=c[0],n=c.slice(1);E[m[d]].apply(E,n)}),E.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(v,ie,ae){ie.exports=function(_){switch(_){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(v,ie,ae){"use strict";function _(E,e,c){var d=0|E[c];if(d<=0)return[];var t,n=new Array(d);if(c===E.length-1)for(t=0;t<d;++t)n[t]=e;else for(t=0;t<d;++t)n[t]=_(E,e,c+1);return n}ie.exports=function m(E,e){switch(void 0===e&&(e=0),typeof E){case"number":if(E>0)return function k(E,e){var c,d;for(c=new Array(E),d=0;d<E;++d)c[d]=e;return c}(0|E,e);break;case"object":if("number"==typeof E.length)return _(E,e,0)}return[]}},{}],129:[function(v,ie,ae){"use strict";function _(I,F,D){D=D||2;var se,ne,W,G,$,V,H,N=F&&F.length,U=N?F[0]*D:I.length,X=k(I,0,U,D,!0),oe=[];if(!X||X.next===X.prev)return oe;if(N&&(X=function t(I,F,D,N){var X,oe,W,U=[];for(X=0,oe=F.length;X<oe;X++)(W=k(I,F[X]*N,X<oe-1?F[X+1]*N:I.length,N,!1))===W.next&&(W.steiner=!0),U.push(S(W));for(U.sort(i),X=0;X<U.length;X++)a(U[X],D),D=m(D,D.next);return D}(I,F,X,D)),I.length>80*D){se=W=I[0],ne=G=I[1];for(var q=D;q<U;q+=D)($=I[q])<se&&(se=$),(V=I[q+1])<ne&&(ne=V),$>W&&(W=$),V>G&&(G=V);H=0!==(H=Math.max(W-se,G-ne))?1/H:0}return E(X,oe,D,se,ne,H),oe}function k(I,F,D,N,U){var X,oe;if(U===O(I,F,D,N)>0)for(X=F;X<D;X+=N)oe=C(X,I[X],I[X+1],oe);else for(X=D-N;X>=F;X-=N)oe=C(X,I[X],I[X+1],oe);return oe&&y(oe,oe.next)&&(R(oe),oe=oe.next),oe}function m(I,F){if(!I)return I;F||(F=I);var N,D=I;do{if(N=!1,D.steiner||!y(D,D.next)&&0!==l(D.prev,D,D.next))D=D.next;else{if(R(D),(D=F=D.prev)===D.next)break;N=!0}}while(N||D!==F);return F}function E(I,F,D,N,U,X,oe){if(I){!oe&&X&&function s(I,F,D,N){var U=I;do{null===U.z&&(U.z=x(U.x,U.y,F,D,N)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next}while(U!==I);U.prevZ.nextZ=null,U.prevZ=null,function b(I){var F,D,N,U,X,oe,se,ne,W=1;do{for(D=I,I=null,X=null,oe=0;D;){for(oe++,N=D,se=0,F=0;F<W&&(se++,N=N.nextZ);F++);for(ne=W;se>0||ne>0&&N;)0!==se&&(0===ne||!N||D.z<=N.z)?(U=D,D=D.nextZ,se--):(U=N,N=N.nextZ,ne--),X?X.nextZ=U:I=U,U.prevZ=X,X=U;D=N}X.nextZ=null,W*=2}while(oe>1);return I}(U)}(I,N,U,X);for(var ne,W,se=I;I.prev!==I.next;)if(ne=I.prev,W=I.next,X?c(I,N,U,X):e(I))F.push(ne.i/D),F.push(I.i/D),F.push(W.i/D),R(I),I=W.next,se=W.next;else if((I=W)===se){oe?1===oe?E(I=d(m(I),F,D),F,D,N,U,X,2):2===oe&&n(I,F,D,N,U,X):E(m(I),F,D,N,U,X,1);break}}}function e(I){var F=I.prev,D=I,N=I.next;if(l(F,D,N)>=0)return!1;for(var U=I.next.next;U!==I.prev;){if(p(F.x,F.y,D.x,D.y,N.x,N.y,U.x,U.y)&&l(U.prev,U,U.next)>=0)return!1;U=U.next}return!0}function c(I,F,D,N){var U=I.prev,X=I,oe=I.next;if(l(U,X,oe)>=0)return!1;for(var W=U.x>X.x?U.x>oe.x?U.x:oe.x:X.x>oe.x?X.x:oe.x,G=U.y>X.y?U.y>oe.y?U.y:oe.y:X.y>oe.y?X.y:oe.y,$=x(U.x<X.x?U.x<oe.x?U.x:oe.x:X.x<oe.x?X.x:oe.x,U.y<X.y?U.y<oe.y?U.y:oe.y:X.y<oe.y?X.y:oe.y,F,D,N),V=x(W,G,F,D,N),H=I.prevZ,q=I.nextZ;H&&H.z>=$&&q&&q.z<=V;){if(H!==I.prev&&H!==I.next&&p(U.x,U.y,X.x,X.y,oe.x,oe.y,H.x,H.y)&&l(H.prev,H,H.next)>=0||(H=H.prevZ,q!==I.prev&&q!==I.next&&p(U.x,U.y,X.x,X.y,oe.x,oe.y,q.x,q.y)&&l(q.prev,q,q.next)>=0))return!1;q=q.nextZ}for(;H&&H.z>=$;){if(H!==I.prev&&H!==I.next&&p(U.x,U.y,X.x,X.y,oe.x,oe.y,H.x,H.y)&&l(H.prev,H,H.next)>=0)return!1;H=H.prevZ}for(;q&&q.z<=V;){if(q!==I.prev&&q!==I.next&&p(U.x,U.y,X.x,X.y,oe.x,oe.y,q.x,q.y)&&l(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function d(I,F,D){var N=I;do{var U=N.prev,X=N.next.next;!y(U,X)&&A(U,N,N.next,X)&&u(U,X)&&u(X,U)&&(F.push(U.i/D),F.push(N.i/D),F.push(X.i/D),R(N),R(N.next),N=I=X),N=N.next}while(N!==I);return m(N)}function n(I,F,D,N,U,X){var oe=I;do{for(var se=oe.next.next;se!==oe.prev;){if(oe.i!==se.i&&w(oe,se)){var ne=o(oe,se);return oe=m(oe,oe.next),ne=m(ne,ne.next),E(oe,F,D,N,U,X),void E(ne,F,D,N,U,X)}se=se.next}oe=oe.next}while(oe!==I)}function i(I,F){return I.x-F.x}function a(I,F){if(F=function r(I,F){var oe,D=F,N=I.x,U=I.y,X=-1/0;do{if(U<=D.y&&U>=D.next.y&&D.next.y!==D.y){var se=D.x+(U-D.y)*(D.next.x-D.x)/(D.next.y-D.y);if(se<=N&&se>X){if(X=se,se===N){if(U===D.y)return D;if(U===D.next.y)return D.next}oe=D.x<D.next.x?D:D.next}}D=D.next}while(D!==F);if(!oe)return null;if(N===X)return oe;var V,ne=oe,W=oe.x,G=oe.y,$=1/0;D=oe;do{N>=D.x&&D.x>=W&&N!==D.x&&p(U<G?N:X,U,W,G,U<G?X:N,U,D.x,D.y)&&(V=Math.abs(U-D.y)/(N-D.x),u(D,I)&&(V<$||V===$&&(D.x>oe.x||D.x===oe.x&&g(oe,D)))&&(oe=D,$=V)),D=D.next}while(D!==ne);return oe}(I,F)){var D=o(F,I);m(F,F.next),m(D,D.next)}}function g(I,F){return l(I.prev,I,F.prev)<0&&l(F.next,I,I.next)<0}function x(I,F,D,N,U){return(I=1431655765&((I=858993459&((I=252645135&((I=16711935&((I=32767*(I-D)*U)|I<<8))|I<<4))|I<<2))|I<<1))|(F=1431655765&((F=858993459&((F=252645135&((F=16711935&((F=32767*(F-N)*U)|F<<8))|F<<4))|F<<2))|F<<1))<<1}function S(I){var F=I,D=I;do{(F.x<D.x||F.x===D.x&&F.y<D.y)&&(D=F),F=F.next}while(F!==I);return D}function p(I,F,D,N,U,X,oe,se){return(U-oe)*(F-se)-(I-oe)*(X-se)>=0&&(I-oe)*(N-se)-(D-oe)*(F-se)>=0&&(D-oe)*(X-se)-(U-oe)*(N-se)>=0}function w(I,F){return I.next.i!==F.i&&I.prev.i!==F.i&&!function f(I,F){var D=I;do{if(D.i!==I.i&&D.next.i!==I.i&&D.i!==F.i&&D.next.i!==F.i&&A(D,D.next,I,F))return!0;D=D.next}while(D!==I);return!1}(I,F)&&(u(I,F)&&u(F,I)&&function h(I,F){var D=I,N=!1,U=(I.x+F.x)/2,X=(I.y+F.y)/2;do{D.y>X!=D.next.y>X&&D.next.y!==D.y&&U<(D.next.x-D.x)*(X-D.y)/(D.next.y-D.y)+D.x&&(N=!N),D=D.next}while(D!==I);return N}(I,F)&&(l(I.prev,I,F.prev)||l(I,F.prev,F))||y(I,F)&&l(I.prev,I,I.next)>0&&l(F.prev,F,F.next)>0)}function l(I,F,D){return(F.y-I.y)*(D.x-F.x)-(F.x-I.x)*(D.y-F.y)}function y(I,F){return I.x===F.x&&I.y===F.y}function A(I,F,D,N){var U=M(l(I,F,D)),X=M(l(I,F,N)),oe=M(l(D,N,I)),se=M(l(D,N,F));return!!(U!==X&&oe!==se||0===U&&T(I,D,F)||0===X&&T(I,N,F)||0===oe&&T(D,I,N)||0===se&&T(D,F,N))}function T(I,F,D){return F.x<=Math.max(I.x,D.x)&&F.x>=Math.min(I.x,D.x)&&F.y<=Math.max(I.y,D.y)&&F.y>=Math.min(I.y,D.y)}function M(I){return I>0?1:I<0?-1:0}function u(I,F){return l(I.prev,I,I.next)<0?l(I,F,I.next)>=0&&l(I,I.prev,F)>=0:l(I,F,I.prev)<0||l(I,I.next,F)<0}function o(I,F){var D=new z(I.i,I.x,I.y),N=new z(F.i,F.x,F.y),U=I.next,X=F.prev;return I.next=F,F.prev=I,D.next=U,U.prev=D,N.next=D,D.prev=N,X.next=N,N.prev=X,N}function C(I,F,D,N){var U=new z(I,F,D);return N?(U.next=N.next,U.prev=N,N.next.prev=U,N.next=U):(U.prev=U,U.next=U),U}function R(I){I.next.prev=I.prev,I.prev.next=I.next,I.prevZ&&(I.prevZ.nextZ=I.nextZ),I.nextZ&&(I.nextZ.prevZ=I.prevZ)}function z(I,F,D){this.i=I,this.x=F,this.y=D,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(I,F,D,N){for(var U=0,X=F,oe=D-N;X<D;X+=N)U+=(I[oe]-I[X])*(I[X+1]+I[oe+1]),oe=X;return U}ie.exports=_,ie.exports.default=_,_.deviation=function(I,F,D,N){var U=F&&F.length,oe=Math.abs(O(I,0,U?F[0]*D:I.length,D));if(U)for(var se=0,ne=F.length;se<ne;se++)oe-=Math.abs(O(I,F[se]*D,se<ne-1?F[se+1]*D:I.length,D));var $=0;for(se=0;se<N.length;se+=3){var V=N[se]*D,H=N[se+1]*D,q=N[se+2]*D;$+=Math.abs((I[V]-I[q])*(I[H+1]-I[V+1])-(I[V]-I[H])*(I[q+1]-I[V+1]))}return 0===oe&&0===$?0:Math.abs(($-oe)/oe)},_.flatten=function(I){for(var F=I[0][0].length,D={vertices:[],holes:[],dimensions:F},N=0,U=0;U<I.length;U++){for(var X=0;X<I[U].length;X++)for(var oe=0;oe<F;oe++)D.vertices.push(I[U][X][oe]);U>0&&D.holes.push(N+=I[U-1].length)}return D}},{}],130:[function(v,ie,ae){var _=v("strongly-connected-components");ie.exports=function(m,E){var i,e=[],c=[],d=[],n={},t=[];function a(y){d[y]=!1,n.hasOwnProperty(y)&&Object.keys(n[y]).forEach(function(A){delete n[y][A],d[A]&&a(A)})}function r(y){var T,M,A=!1;for(c.push(y),d[y]=!0,T=0;T<t[y].length;T++)(M=t[y][T])===i?(g(i,c),A=!0):d[M]||(A=r(M));if(A)a(y);else for(T=0;T<t[y].length;T++){var f=n[M=t[y][T]];f||(n[M]=f={}),f[M]=!0}return c.pop(),A}function g(y,A){var T=[].concat(A).concat(y);E?E(r):e.push(T)}function b(y){!function s(y){for(var A=0;A<m.length;A++)A<y&&(m[A]=[]),m[A]=m[A].filter(function(T){return T>=y})}(y);for(var u,M=_(m).components.filter(function(z){return z.length>1}),f=1/0,h=0;h<M.length;h++)for(var o=0;o<M[h].length;o++)M[h][o]<f&&(f=M[h][o],u=h);var C=M[u];return!!C&&{leastVertex:f,adjList:m.map(function(z,O){return-1===C.indexOf(O)?[]:z.filter(function(I){return-1!==C.indexOf(I)})})}}i=0;for(var x=m.length;i<x;){var S=b(i);if(i=S.leastVertex,t=S.adjList){for(var p=0;p<t.length;p++)for(var w=0;w<t[p].length;w++){var l=t[p][w];d[+l]=!1,n[l]={}}r(i),i+=1}else i=x}if(!E)return e}},{"strongly-connected-components":306}],131:[function(v,ie,ae){"use strict";var _=v("../../object/valid-value");ie.exports=function(){return _(this).length=0,this}},{"../../object/valid-value":162}],132:[function(v,ie,ae){"use strict";ie.exports=v("./is-implemented")()?Array.from:v("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(v,ie,ae){"use strict";ie.exports=function(){var k,m,_=Array.from;return"function"==typeof _&&(m=_(k=["raz","dwa"]),Boolean(m&&m!==k&&"dwa"===m[1]))}},{}],134:[function(v,ie,ae){"use strict";var _=v("es6-symbol").iterator,k=v("../../function/is-arguments"),m=v("../../function/is-function"),E=v("../../number/to-pos-integer"),e=v("../../object/valid-callable"),c=v("../../object/valid-value"),d=v("../../object/is-value"),n=v("../../string/is-string"),t=Array.isArray,i=Function.prototype.call,a={configurable:!0,enumerable:!0,writable:!0,value:null},r=Object.defineProperty;ie.exports=function(g){var x,S,p,w,l,y,A,T,M,f,s=arguments[1],b=arguments[2];if(g=Object(c(g)),d(s)&&e(s),this&&this!==Array&&m(this))x=this;else{if(!s){if(k(g))return 1!==(l=g.length)?Array.apply(null,g):((w=new Array(1))[0]=g[0],w);if(t(g)){for(w=new Array(l=g.length),S=0;S<l;++S)w[S]=g[S];return w}}w=[]}if(!t(g))if(void 0!==(M=g[_])){for(A=e(M).call(g),x&&(w=new x),T=A.next(),S=0;!T.done;)f=s?i.call(s,b,T.value,S):T.value,x?(a.value=f,r(w,S,a)):w[S]=f,T=A.next(),++S;l=S}else if(n(g)){for(l=g.length,x&&(w=new x),S=0,p=0;S<l;++S)f=g[S],S+1<l&&(y=f.charCodeAt(0))>=55296&&y<=56319&&(f+=g[++S]),f=s?i.call(s,b,f,p):f,x?(a.value=f,r(w,p,a)):w[p]=f,++p;l=p}if(void 0===l)for(l=E(g.length),x&&(w=new x(l)),S=0;S<l;++S)f=s?i.call(s,b,g[S],S):g[S],x?(a.value=f,r(w,S,a)):w[S]=f;return x&&(a.value=null,w.length=l),w}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(v,ie,ae){"use strict";var _=Object.prototype.toString,k=_.call(function(){return arguments}());ie.exports=function(m){return _.call(m)===k}},{}],136:[function(v,ie,ae){"use strict";var _=Object.prototype.toString,k=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);ie.exports=function(m){return"function"==typeof m&&k(_.call(m))}},{}],137:[function(v,ie,ae){"use strict";ie.exports=function(){}},{}],138:[function(v,ie,ae){"use strict";ie.exports=v("./is-implemented")()?Math.sign:v("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(v,ie,ae){"use strict";ie.exports=function(){var _=Math.sign;return"function"==typeof _&&1===_(10)&&-1===_(-20)}},{}],140:[function(v,ie,ae){"use strict";ie.exports=function(_){return _=Number(_),isNaN(_)||0===_?_:_>0?1:-1}},{}],141:[function(v,ie,ae){"use strict";var _=v("../math/sign"),k=Math.abs,m=Math.floor;ie.exports=function(E){return isNaN(E)?0:0!==(E=Number(E))&&isFinite(E)?_(E)*m(k(E)):E}},{"../math/sign":138}],142:[function(v,ie,ae){"use strict";var _=v("./to-integer"),k=Math.max;ie.exports=function(m){return k(0,_(m))}},{"./to-integer":141}],143:[function(v,ie,ae){"use strict";var _=v("./valid-callable"),k=v("./valid-value"),m=Function.prototype.bind,E=Function.prototype.call,e=Object.keys,c=Object.prototype.propertyIsEnumerable;ie.exports=function(d,n){return function(t,i){var a,r=arguments[2],g=arguments[3];return t=Object(k(t)),_(i),a=e(t),g&&a.sort("function"==typeof g?m.call(g,t):void 0),"function"!=typeof d&&(d=a[d]),E.call(d,a,function(s,b){return c.call(t,s)?E.call(i,r,t[s],s,t,b):n})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(v,ie,ae){"use strict";ie.exports=v("./is-implemented")()?Object.assign:v("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(v,ie,ae){"use strict";ie.exports=function(){var k,_=Object.assign;return"function"==typeof _&&(_(k={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),k.foo+k.bar+k.trzy==="razdwatrzy")}},{}],146:[function(v,ie,ae){"use strict";var _=v("../keys"),k=v("../valid-value"),m=Math.max;ie.exports=function(E,e){var c,d,t,n=m(arguments.length,2);for(E=Object(k(E)),t=function(i){try{E[i]=e[i]}catch(a){c||(c=a)}},d=1;d<n;++d)_(e=arguments[d]).forEach(t);if(void 0!==c)throw c;return E}},{"../keys":152,"../valid-value":162}],147:[function(v,ie,ae){"use strict";var _=v("../array/from"),k=v("./assign"),m=v("./valid-value");ie.exports=function(E){var e=Object(m(E)),c=arguments[1],d=Object(arguments[2]);if(e!==E&&!c)return e;var n={};return c?_(c,function(t){(d.ensure||t in E)&&(n[t]=E[t])}):k(n,E),n}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(v,ie,ae){"use strict";var k,m,E,e,_=Object.create;v("./set-prototype-of/is-implemented")()||(k=v("./set-prototype-of/shim")),ie.exports=k&&1===k.level?(m={},E={},e={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(c){E[c]="__proto__"!==c?e:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(m,E),Object.defineProperty(k,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:m}),function(c,d){return _(null===c?m:c,d)}):_},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(v,ie,ae){"use strict";ie.exports=v("./_iterate")("forEach")},{"./_iterate":143}],150:[function(v,ie,ae){"use strict";var _=v("./is-value"),k={function:!0,object:!0};ie.exports=function(m){return _(m)&&k[typeof m]||!1}},{"./is-value":151}],151:[function(v,ie,ae){"use strict";var _=v("../function/noop")();ie.exports=function(k){return k!==_&&null!==k}},{"../function/noop":137}],152:[function(v,ie,ae){"use strict";ie.exports=v("./is-implemented")()?Object.keys:v("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(v,ie,ae){"use strict";ie.exports=function(){try{return Object.keys("primitive"),!0}catch(_){return!1}}},{}],154:[function(v,ie,ae){"use strict";var _=v("../is-value"),k=Object.keys;ie.exports=function(m){return k(_(m)?Object(m):m)}},{"../is-value":151}],155:[function(v,ie,ae){"use strict";var _=v("./valid-callable"),k=v("./for-each"),m=Function.prototype.call;ie.exports=function(E,e){var c={},d=arguments[2];return _(e),k(E,function(n,t,i,a){c[t]=m.call(e,d,n,t,i,a)}),c}},{"./for-each":149,"./valid-callable":160}],156:[function(v,ie,ae){"use strict";var _=v("./is-value"),k=Array.prototype.forEach,m=Object.create,E=function(e,c){var d;for(d in e)c[d]=e[d]};ie.exports=function(e){var c=m(null);return k.call(arguments,function(d){!_(d)||E(Object(d),c)}),c}},{"./is-value":151}],157:[function(v,ie,ae){"use strict";ie.exports=v("./is-implemented")()?Object.setPrototypeOf:v("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(v,ie,ae){"use strict";var _=Object.create,k=Object.getPrototypeOf,m={};ie.exports=function(){var E=Object.setPrototypeOf;return"function"==typeof E&&k(E((arguments[0]||_)(null),m))===m}},{}],159:[function(v,ie,ae){"use strict";var c,d,n,t,_=v("../is-object"),k=v("../valid-value"),m=Object.prototype.isPrototypeOf,E=Object.defineProperty,e={configurable:!0,enumerable:!1,writable:!0,value:void 0};c=function(d,n){if(k(d),null===n||_(n))return d;throw new TypeError("Prototype must be null or an object")},ie.exports=(d=function(){var t,d=Object.create(null),n={},i=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(i){try{(t=i.set).call(d,n)}catch(a){}if(Object.getPrototypeOf(d)===n)return{set:t,level:2}}return d.__proto__=n,Object.getPrototypeOf(d)===n?{level:2}:((d={}).__proto__=n,Object.getPrototypeOf(d)===n&&{level:1})}(),d?(2===d.level?d.set?(t=d.set,n=function(i,a){return t.call(c(i,a),a),i}):n=function(i,a){return c(i,a).__proto__=a,i}:n=function i(a,r){var g;return c(a,r),(g=m.call(i.nullPolyfill,a))&&delete i.nullPolyfill.__proto__,null===r&&(r=i.nullPolyfill),a.__proto__=r,g&&E(i.nullPolyfill,"__proto__",e),a},Object.defineProperty(n,"level",{configurable:!1,enumerable:!1,writable:!1,value:d.level})):null),v("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(v,ie,ae){"use strict";ie.exports=function(_){if("function"!=typeof _)throw new TypeError(_+" is not a function");return _}},{}],161:[function(v,ie,ae){"use strict";var _=v("./is-object");ie.exports=function(k){if(!_(k))throw new TypeError(k+" is not an Object");return k}},{"./is-object":150}],162:[function(v,ie,ae){"use strict";var _=v("./is-value");ie.exports=function(k){if(!_(k))throw new TypeError("Cannot use null or undefined");return k}},{"./is-value":151}],163:[function(v,ie,ae){"use strict";ie.exports=v("./is-implemented")()?String.prototype.contains:v("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(v,ie,ae){"use strict";var _="razdwatrzy";ie.exports=function(){return"function"==typeof _.contains&&!0===_.contains("dwa")&&!1===_.contains("foo")}},{}],165:[function(v,ie,ae){"use strict";var _=String.prototype.indexOf;ie.exports=function(k){return _.call(this,k,arguments[1])>-1}},{}],166:[function(v,ie,ae){"use strict";var _=Object.prototype.toString,k=_.call("");ie.exports=function(m){return"string"==typeof m||m&&"object"==typeof m&&(m instanceof String||_.call(m)===k)||!1}},{}],167:[function(v,ie,ae){"use strict";var _=Object.create(null),k=Math.random;ie.exports=function(){var m;do{m=k().toString(36).slice(2)}while(_[m]);return m}},{}],168:[function(v,ie,ae){"use strict";var d,_=v("es5-ext/object/set-prototype-of"),k=v("es5-ext/string/#/contains"),m=v("d"),E=v("es6-symbol"),e=v("./"),c=Object.defineProperty;d=ie.exports=function(n,t){if(!(this instanceof d))throw new TypeError("Constructor requires 'new'");e.call(this,n),t=t?k.call(t,"key+value")?"key+value":k.call(t,"key")?"key":"value":"value",c(this,"__kind__",m("",t))},_&&_(d,e),delete d.prototype.constructor,d.prototype=Object.create(e.prototype,{_resolve:m(function(n){return"value"===this.__kind__?this.__list__[n]:"key+value"===this.__kind__?[n,this.__list__[n]]:n})}),c(d.prototype,E.toStringTag,m("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(v,ie,ae){"use strict";var _=v("es5-ext/function/is-arguments"),k=v("es5-ext/object/valid-callable"),m=v("es5-ext/string/is-string"),E=v("./get"),e=Array.isArray,c=Function.prototype.call,d=Array.prototype.some;ie.exports=function(n,t){var i,r,g,s,b,x,S,p,a=arguments[2];if(e(n)||_(n)?i="array":m(n)?i="string":n=E(n),k(t),g=function(){s=!0},"array"!==i)if("string"!==i)for(r=n.next();!r.done;){if(c.call(t,a,r.value,g),s)return;r=n.next()}else for(x=n.length,b=0;b<x&&(S=n[b],b+1<x&&(p=S.charCodeAt(0))>=55296&&p<=56319&&(S+=n[++b]),c.call(t,a,S,g),!s);++b);else d.call(n,function(w){return c.call(t,a,w,g),s})}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(v,ie,ae){"use strict";var _=v("es5-ext/function/is-arguments"),k=v("es5-ext/string/is-string"),m=v("./array"),E=v("./string"),e=v("./valid-iterable"),c=v("es6-symbol").iterator;ie.exports=function(d){return"function"==typeof e(d)[c]?d[c]():_(d)?new m(d):k(d)?new E(d):new m(d)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(v,ie,ae){"use strict";var i,_=v("es5-ext/array/#/clear"),k=v("es5-ext/object/assign"),m=v("es5-ext/object/valid-callable"),E=v("es5-ext/object/valid-value"),e=v("d"),c=v("d/auto-bind"),d=v("es6-symbol"),n=Object.defineProperty,t=Object.defineProperties;ie.exports=i=function(a,r){if(!(this instanceof i))throw new TypeError("Constructor requires 'new'");t(this,{__list__:e("w",E(a)),__context__:e("w",r),__nextIndex__:e("w",0)}),r&&(m(r.on),r.on("_add",this._onAdd),r.on("_delete",this._onDelete),r.on("_clear",this._onClear))},delete i.prototype.constructor,t(i.prototype,k({_next:e(function(){var a;if(this.__list__){if(this.__redo__&&void 0!==(a=this.__redo__.shift()))return a;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:e(function(){return this._createResult(this._next())}),_createResult:e(function(a){return void 0===a?{done:!0,value:void 0}:{done:!1,value:this._resolve(a)}}),_resolve:e(function(a){return this.__list__[a]}),_unBind:e(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:e(function(){return"[object "+(this[d.toStringTag]||"Object")+"]"})},c({_onAdd:e(function(a){if(!(a>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void n(this,"__redo__",e("c",[a]));this.__redo__.forEach(function(r,g){r>=a&&(this.__redo__[g]=++r)},this),this.__redo__.push(a)}}),_onDelete:e(function(a){var r;a>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(r=this.__redo__.indexOf(a))&&this.__redo__.splice(r,1),this.__redo__.forEach(function(g,s){g>a&&(this.__redo__[s]=--g)},this)))}),_onClear:e(function(){this.__redo__&&_.call(this.__redo__),this.__nextIndex__=0})}))),n(i.prototype,d.iterator,e(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(v,ie,ae){"use strict";var _=v("es5-ext/function/is-arguments"),k=v("es5-ext/object/is-value"),m=v("es5-ext/string/is-string"),E=v("es6-symbol").iterator,e=Array.isArray;ie.exports=function(c){return!(!k(c)||!(e(c)||m(c)||_(c))&&"function"!=typeof c[E])}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(v,ie,ae){"use strict";var c,_=v("es5-ext/object/set-prototype-of"),k=v("d"),m=v("es6-symbol"),E=v("./"),e=Object.defineProperty;c=ie.exports=function(d){if(!(this instanceof c))throw new TypeError("Constructor requires 'new'");d=String(d),E.call(this,d),e(this,"__length__",k("",d.length))},_&&_(c,E),delete c.prototype.constructor,c.prototype=Object.create(E.prototype,{_next:k(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:k(function(d){var t,n=this.__list__[d];return this.__nextIndex__===this.__length__?n:(t=n.charCodeAt(0))>=55296&&t<=56319?n+this.__list__[this.__nextIndex__++]:n})}),e(c.prototype,m.toStringTag,k("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(v,ie,ae){"use strict";var _=v("./is-iterable");ie.exports=function(k){if(!_(k))throw new TypeError(k+" is not iterable");return k}},{"./is-iterable":172}],175:[function(v,ie,ae){"use strict";ie.exports=v("./is-implemented")()?v("ext/global-this").Symbol:v("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(v,ie,ae){"use strict";var _=v("ext/global-this"),k={object:!0,symbol:!0};ie.exports=function(){var E,m=_.Symbol;if("function"!=typeof m)return!1;E=m("test symbol");try{String(E)}catch(e){return!1}return!(!k[typeof m.iterator]||!k[typeof m.toPrimitive]||!k[typeof m.toStringTag])}},{"ext/global-this":188}],177:[function(v,ie,ae){"use strict";ie.exports=function(_){return!(!_||"symbol"!=typeof _&&(!_.constructor||"Symbol"!==_.constructor.name||"Symbol"!==_[_.constructor.toStringTag]))}},{}],178:[function(v,ie,ae){"use strict";var _=v("d"),m=Object.defineProperty,E=Object.prototype,e=(0,Object.create)(null);ie.exports=function(c){for(var n,t,d=0;e[c+(d||"")];)++d;return e[c+=d||""]=!0,m(E,n="@@"+c,_.gs(null,function(i){t||(t=!0,m(this,n,_(i)),t=!1)})),n}},{d:106}],179:[function(v,ie,ae){"use strict";var _=v("d"),k=v("ext/global-this").Symbol;ie.exports=function(m){return Object.defineProperties(m,{hasInstance:_("",k&&k.hasInstance||m("hasInstance")),isConcatSpreadable:_("",k&&k.isConcatSpreadable||m("isConcatSpreadable")),iterator:_("",k&&k.iterator||m("iterator")),match:_("",k&&k.match||m("match")),replace:_("",k&&k.replace||m("replace")),search:_("",k&&k.search||m("search")),species:_("",k&&k.species||m("species")),split:_("",k&&k.split||m("split")),toPrimitive:_("",k&&k.toPrimitive||m("toPrimitive")),toStringTag:_("",k&&k.toStringTag||m("toStringTag")),unscopables:_("",k&&k.unscopables||m("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(v,ie,ae){"use strict";var _=v("d"),k=v("../../../validate-symbol"),m=Object.create(null);ie.exports=function(E){return Object.defineProperties(E,{for:_(function(e){return m[e]?m[e]:m[e]=E(String(e))}),keyFor:_(function(e){var c;for(c in k(e),m)if(m[c]===e)return c})})}},{"../../../validate-symbol":182,d:106}],181:[function(v,ie,ae){"use strict";var i,a,r,_=v("d"),k=v("./validate-symbol"),m=v("ext/global-this").Symbol,E=v("./lib/private/generate-name"),e=v("./lib/private/setup/standard-symbols"),c=v("./lib/private/setup/symbol-registry"),d=Object.create,n=Object.defineProperties,t=Object.defineProperty;if("function"==typeof m)try{String(m()),r=!0}catch(g){}else m=null;a=function(s){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return i(s)},ie.exports=i=function g(s){var b;if(this instanceof g)throw new TypeError("Symbol is not a constructor");return r?m(s):(b=d(a.prototype),s=void 0===s?"":String(s),n(b,{__description__:_("",s),__name__:_("",E(s))}))},e(i),c(i),n(a.prototype,{constructor:_(i),toString:_("",function(){return this.__name__})}),n(i.prototype,{toString:_(function(){return"Symbol ("+k(this).__description__+")"}),valueOf:_(function(){return k(this)})}),t(i.prototype,i.toPrimitive,_("",function(){var g=k(this);return"symbol"==typeof g?g:g.toString()})),t(i.prototype,i.toStringTag,_("c","Symbol")),t(a.prototype,i.toStringTag,_("c",i.prototype[i.toStringTag])),t(a.prototype,i.toPrimitive,_("c",i.prototype[i.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(v,ie,ae){"use strict";var _=v("./is-symbol");ie.exports=function(k){if(!_(k))throw new TypeError(k+" is not a symbol");return k}},{"./is-symbol":177}],183:[function(v,ie,ae){"use strict";ie.exports=v("./is-implemented")()?WeakMap:v("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(v,ie,ae){"use strict";ie.exports=function(){var _,k;if("function"!=typeof WeakMap)return!1;try{_=new WeakMap([[k={},"one"],[{},"two"],[{},"three"]])}catch(m){return!1}return!("[object WeakMap]"!==String(_)||"function"!=typeof _.set||_.set({},1)!==_||"function"!=typeof _.delete||"function"!=typeof _.has||"one"!==_.get(k))}},{}],185:[function(v,ie,ae){"use strict";ie.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},{}],186:[function(v,ie,ae){"use strict";var b,_=v("es5-ext/object/is-value"),k=v("es5-ext/object/set-prototype-of"),m=v("es5-ext/object/valid-object"),E=v("es5-ext/object/valid-value"),e=v("es5-ext/string/random-uniq"),c=v("d"),d=v("es6-iterator/get"),n=v("es6-iterator/for-of"),t=v("es6-symbol").toStringTag,i=v("./is-native-implemented"),a=Array.isArray,r=Object.defineProperty,g=Object.prototype.hasOwnProperty,s=Object.getPrototypeOf;ie.exports=b=function(){var S,x=arguments[0];if(!(this instanceof b))throw new TypeError("Constructor requires 'new'");return S=i&&k&&WeakMap!==b?k(new WeakMap,s(this)):this,_(x)&&(a(x)||(x=d(x))),r(S,"__weakMapData__",c("c","$weakMap$"+e())),x&&n(x,function(p){E(p),S.set(p[0],p[1])}),S},i&&(k&&k(b,WeakMap),b.prototype=Object.create(WeakMap.prototype,{constructor:c(b)})),Object.defineProperties(b.prototype,{delete:c(function(x){return!!g.call(m(x),this.__weakMapData__)&&(delete x[this.__weakMapData__],!0)}),get:c(function(x){if(g.call(m(x),this.__weakMapData__))return x[this.__weakMapData__]}),has:c(function(x){return g.call(m(x),this.__weakMapData__)}),set:c(function(x,S){return r(m(x),this.__weakMapData__,c("c",S)),this}),toString:c(function(){return"[object WeakMap]"})}),r(b.prototype,t,c("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(v,ie,ae){var _=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};ie.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(k){return _()}try{return __global__||_()}finally{delete Object.prototype.__global__}}()},{}],188:[function(v,ie,ae){"use strict";ie.exports=v("./is-implemented")()?globalThis:v("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(v,ie,ae){"use strict";ie.exports=function(){return!("object"!=typeof globalThis||!globalThis)&&globalThis.Array===Array}},{}],190:[function(v,ie,ae){"use strict";var _=v("is-string-blank");ie.exports=function(k){var m=typeof k;if("string"===m){var E=k;if(0==(k=+k)&&_(E))return!1}else if("number"!==m)return!1;return k-k<1}},{"is-string-blank":237}],191:[function(v,ie,ae){var _=v("dtype");ie.exports=function k(m,E,e){if(!m)throw new TypeError("must specify data as first parameter");if(e=0|+(e||0),Array.isArray(m)&&m[0]&&"number"==typeof m[0][0]){var n,t,i,a,c=m[0].length,d=m.length*c;(!E||"string"==typeof E)&&(E=new(_(E||"float32"))(d+e));var r=E.length-e;if(d!==r)throw new Error("source length "+d+" ("+c+"x"+m.length+") does not match destination length "+r);for(n=0,i=e;n<m.length;n++)for(t=0;t<c;t++)E[i++]=null===m[n][t]?NaN:m[n][t]}else if(E&&"string"!=typeof E)E.set(m,e);else{var g=_(E||"float32");if(Array.isArray(m)||"array"===E)for(n=0,i=e,a=(E=new g(m.length+e)).length;i<a;i++,n++)E[i]=null===m[n]?NaN:m[n];else 0===e?E=new g(m):(E=new g(m.length+e)).set(m,e)}return E}},{dtype:127}],192:[function(v,ie,ae){"use strict";var _=v("css-font/stringify"),k=[32,126];ie.exports=function m(E){var e=(E=E||{}).shape?E.shape:E.canvas?[E.canvas.width,E.canvas.height]:[512,512],c=E.canvas||document.createElement("canvas"),d=E.font,n="number"==typeof E.step?[E.step,E.step]:E.step||[32,32],t=E.chars||k;if(d&&"string"!=typeof d&&(d=_(d)),Array.isArray(t)){if(2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]){for(var i=[],a=t[0],r=0;a<=t[1];a++)i[r++]=String.fromCharCode(a);t=i}}else t=String(t).split("");e=e.slice(),c.width=e[0],c.height=e[1];var g=c.getContext("2d");g.fillStyle="#000",g.fillRect(0,0,c.width,c.height),g.font=d,g.textAlign="center",g.textBaseline="middle",g.fillStyle="#fff";var s=n[0]/2,b=n[1]/2;for(a=0;a<t.length;a++)g.fillText(t[a],s,b),(s+=n[0])>e[0]-n[0]/2&&(s=n[0]/2,b+=n[1]);return c}},{"css-font/stringify":102}],193:[function(v,ie,ae){"use strict";function _(a,c){c||(c={}),("string"==typeof a||Array.isArray(a))&&(c.family=a);var d=Array.isArray(c.family)?c.family.join(", "):c.family;if(!d)throw Error("`family` must be defined");var n=c.size||c.fontSize||c.em||48,r=(a=[c.style||c.fontStyle||"",c.weight||c.fontWeight||"",n].join(" ")+"px "+d,c.origin||"top");if(_.cache[d]&&n<=_.cache[d].em)return k(_.cache[d],r);var g=c.canvas||_.canvas,s=g.getContext("2d"),b={upper:void 0!==c.upper?c.upper:"H",lower:void 0!==c.lower?c.lower:"x",descent:void 0!==c.descent?c.descent:"p",ascent:void 0!==c.ascent?c.ascent:"h",tittle:void 0!==c.tittle?c.tittle:"i",overshoot:void 0!==c.overshoot?c.overshoot:"O"},x=Math.ceil(1.5*n);g.height=x,g.width=.5*x,s.font=a;var S="H",p={top:0};s.clearRect(0,0,x,x),s.textBaseline="top",s.fillStyle="black",s.fillText(S,0,0);var w=m(s.getImageData(0,0,x,x));s.clearRect(0,0,x,x),s.textBaseline="bottom",s.fillText(S,0,x);var l=m(s.getImageData(0,0,x,x));p.lineHeight=p.bottom=x-l+w,s.clearRect(0,0,x,x),s.textBaseline="alphabetic",s.fillText(S,0,x);var A=x-m(s.getImageData(0,0,x,x))-1+w;p.baseline=p.alphabetic=A,s.clearRect(0,0,x,x),s.textBaseline="middle",s.fillText(S,0,.5*x);var T=m(s.getImageData(0,0,x,x));p.median=p.middle=x-T-1+w-.5*x,s.clearRect(0,0,x,x),s.textBaseline="hanging",s.fillText(S,0,.5*x);var M=m(s.getImageData(0,0,x,x));p.hanging=x-M-1+w-.5*x,s.clearRect(0,0,x,x),s.textBaseline="ideographic",s.fillText(S,0,x);var f=m(s.getImageData(0,0,x,x));if(p.ideographic=x-f-1+w,b.upper&&(s.clearRect(0,0,x,x),s.textBaseline="top",s.fillText(b.upper,0,0),p.upper=m(s.getImageData(0,0,x,x)),p.capHeight=p.baseline-p.upper),b.lower&&(s.clearRect(0,0,x,x),s.textBaseline="top",s.fillText(b.lower,0,0),p.lower=m(s.getImageData(0,0,x,x)),p.xHeight=p.baseline-p.lower),b.tittle&&(s.clearRect(0,0,x,x),s.textBaseline="top",s.fillText(b.tittle,0,0),p.tittle=m(s.getImageData(0,0,x,x))),b.ascent&&(s.clearRect(0,0,x,x),s.textBaseline="top",s.fillText(b.ascent,0,0),p.ascent=m(s.getImageData(0,0,x,x))),b.descent&&(s.clearRect(0,0,x,x),s.textBaseline="top",s.fillText(b.descent,0,0),p.descent=E(s.getImageData(0,0,x,x))),b.overshoot){s.clearRect(0,0,x,x),s.textBaseline="top",s.fillText(b.overshoot,0,0);var u=E(s.getImageData(0,0,x,x));p.overshoot=u-A}for(var h in p)p[h]/=n;return p.em=n,_.cache[d]=p,k(p,r)}function k(e,c){var d={};for(var n in"string"==typeof c&&(c=e[c]),e)"em"!==n&&(d[n]=e[n]-c);return d}function m(e){for(var c=e.height,d=e.data,n=3;n<d.length;n+=4)if(0!==d[n])return Math.floor(.25*(n-3)/c)}function E(e){for(var c=e.height,d=e.data,n=d.length-1;n>0;n-=4)if(0!==d[n])return Math.floor(.25*(n-3)/c)}ie.exports=_,_.canvas=document.createElement("canvas"),_.cache={}},{}],194:[function(v,ie,ae){ie.exports=function _(k,m){if("string"!=typeof k)throw new TypeError("must specify type string");if(m=m||{},"undefined"==typeof document&&!m.canvas)return null;var E=m.canvas||document.createElement("canvas");"number"==typeof m.width&&(E.width=m.width),"number"==typeof m.height&&(E.height=m.height);var c,e=m;try{var d=[k];0===k.indexOf("webgl")&&d.push("experimental-"+k);for(var n=0;n<d.length;n++)if(c=E.getContext(d[n],e))return c}catch(t){c=null}return c||null}},{}],195:[function(v,ie,ae){ie.exports=function _(k,m){var E=m[0],e=m[1],c=m[2],d=m[3],n=m[4],t=m[5],i=m[6],a=m[7],r=m[8],g=m[9],s=m[10],b=m[11],x=m[12],S=m[13],p=m[14],w=m[15];return k[0]=t*(s*w-b*p)-g*(i*w-a*p)+S*(i*b-a*s),k[1]=-(e*(s*w-b*p)-g*(c*w-d*p)+S*(c*b-d*s)),k[2]=e*(i*w-a*p)-t*(c*w-d*p)+S*(c*a-d*i),k[3]=-(e*(i*b-a*s)-t*(c*b-d*s)+g*(c*a-d*i)),k[4]=-(n*(s*w-b*p)-r*(i*w-a*p)+x*(i*b-a*s)),k[5]=E*(s*w-b*p)-r*(c*w-d*p)+x*(c*b-d*s),k[6]=-(E*(i*w-a*p)-n*(c*w-d*p)+x*(c*a-d*i)),k[7]=E*(i*b-a*s)-n*(c*b-d*s)+r*(c*a-d*i),k[8]=n*(g*w-b*S)-r*(t*w-a*S)+x*(t*b-a*g),k[9]=-(E*(g*w-b*S)-r*(e*w-d*S)+x*(e*b-d*g)),k[10]=E*(t*w-a*S)-n*(e*w-d*S)+x*(e*a-d*t),k[11]=-(E*(t*b-a*g)-n*(e*b-d*g)+r*(e*a-d*t)),k[12]=-(n*(g*p-s*S)-r*(t*p-i*S)+x*(t*s-i*g)),k[13]=E*(g*p-s*S)-r*(e*p-c*S)+x*(e*s-c*g),k[14]=-(E*(t*p-i*S)-n*(e*p-c*S)+x*(e*i-c*t)),k[15]=E*(t*s-i*g)-n*(e*s-c*g)+r*(e*i-c*t),k}},{}],196:[function(v,ie,ae){ie.exports=function _(k){var m=new Float32Array(16);return m[0]=k[0],m[1]=k[1],m[2]=k[2],m[3]=k[3],m[4]=k[4],m[5]=k[5],m[6]=k[6],m[7]=k[7],m[8]=k[8],m[9]=k[9],m[10]=k[10],m[11]=k[11],m[12]=k[12],m[13]=k[13],m[14]=k[14],m[15]=k[15],m}},{}],197:[function(v,ie,ae){ie.exports=function _(k,m){return k[0]=m[0],k[1]=m[1],k[2]=m[2],k[3]=m[3],k[4]=m[4],k[5]=m[5],k[6]=m[6],k[7]=m[7],k[8]=m[8],k[9]=m[9],k[10]=m[10],k[11]=m[11],k[12]=m[12],k[13]=m[13],k[14]=m[14],k[15]=m[15],k}},{}],198:[function(v,ie,ae){ie.exports=function _(){var k=new Float32Array(16);return k[0]=1,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=1,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[10]=1,k[11]=0,k[12]=0,k[13]=0,k[14]=0,k[15]=1,k}},{}],199:[function(v,ie,ae){ie.exports=function _(k){var m=k[0],E=k[1],e=k[2],c=k[3],d=k[4],n=k[5],t=k[6],i=k[7],a=k[8],r=k[9],g=k[10],s=k[11],b=k[12],x=k[13],S=k[14],p=k[15];return(m*n-E*d)*(g*p-s*S)-(m*t-e*d)*(r*p-s*x)+(m*i-c*d)*(r*S-g*x)+(E*t-e*n)*(a*p-s*b)-(E*i-c*n)*(a*S-g*b)+(e*i-c*t)*(a*x-r*b)}},{}],200:[function(v,ie,ae){ie.exports=function _(k,m){var E=m[0],e=m[1],c=m[2],d=m[3],n=E+E,t=e+e,i=c+c,a=E*n,r=e*n,g=e*t,s=c*n,b=c*t,x=c*i,S=d*n,p=d*t,w=d*i;return k[0]=1-g-x,k[1]=r+w,k[2]=s-p,k[3]=0,k[4]=r-w,k[5]=1-a-x,k[6]=b+S,k[7]=0,k[8]=s+p,k[9]=b-S,k[10]=1-a-g,k[11]=0,k[12]=0,k[13]=0,k[14]=0,k[15]=1,k}},{}],201:[function(v,ie,ae){ie.exports=function _(k,m,E){var e,c,d,n=E[0],t=E[1],i=E[2],a=Math.sqrt(n*n+t*t+i*i);return Math.abs(a)<1e-6?null:(n*=a=1/a,t*=a,i*=a,e=Math.sin(m),c=Math.cos(m),k[0]=n*n*(d=1-c)+c,k[1]=t*n*d+i*e,k[2]=i*n*d-t*e,k[3]=0,k[4]=n*t*d-i*e,k[5]=t*t*d+c,k[6]=i*t*d+n*e,k[7]=0,k[8]=n*i*d+t*e,k[9]=t*i*d-n*e,k[10]=i*i*d+c,k[11]=0,k[12]=0,k[13]=0,k[14]=0,k[15]=1,k)}},{}],202:[function(v,ie,ae){ie.exports=function _(k,m,E){var e=m[0],c=m[1],d=m[2],n=m[3],t=e+e,i=c+c,a=d+d,r=e*t,g=e*i,s=e*a,b=c*i,x=c*a,S=d*a,p=n*t,w=n*i,l=n*a;return k[0]=1-(b+S),k[1]=g+l,k[2]=s-w,k[3]=0,k[4]=g-l,k[5]=1-(r+S),k[6]=x+p,k[7]=0,k[8]=s+w,k[9]=x-p,k[10]=1-(r+b),k[11]=0,k[12]=E[0],k[13]=E[1],k[14]=E[2],k[15]=1,k}},{}],203:[function(v,ie,ae){ie.exports=function _(k,m){return k[0]=m[0],k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=m[1],k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[10]=m[2],k[11]=0,k[12]=0,k[13]=0,k[14]=0,k[15]=1,k}},{}],204:[function(v,ie,ae){ie.exports=function _(k,m){return k[0]=1,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=1,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[10]=1,k[11]=0,k[12]=m[0],k[13]=m[1],k[14]=m[2],k[15]=1,k}},{}],205:[function(v,ie,ae){ie.exports=function _(k,m){var E=Math.sin(m),e=Math.cos(m);return k[0]=1,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=e,k[6]=E,k[7]=0,k[8]=0,k[9]=-E,k[10]=e,k[11]=0,k[12]=0,k[13]=0,k[14]=0,k[15]=1,k}},{}],206:[function(v,ie,ae){ie.exports=function _(k,m){var E=Math.sin(m),e=Math.cos(m);return k[0]=e,k[1]=0,k[2]=-E,k[3]=0,k[4]=0,k[5]=1,k[6]=0,k[7]=0,k[8]=E,k[9]=0,k[10]=e,k[11]=0,k[12]=0,k[13]=0,k[14]=0,k[15]=1,k}},{}],207:[function(v,ie,ae){ie.exports=function _(k,m){var E=Math.sin(m),e=Math.cos(m);return k[0]=e,k[1]=E,k[2]=0,k[3]=0,k[4]=-E,k[5]=e,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[10]=1,k[11]=0,k[12]=0,k[13]=0,k[14]=0,k[15]=1,k}},{}],208:[function(v,ie,ae){ie.exports=function _(k,m,E,e,c,d,n){var t=1/(E-m),i=1/(c-e),a=1/(d-n);return k[0]=2*d*t,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=2*d*i,k[6]=0,k[7]=0,k[8]=(E+m)*t,k[9]=(c+e)*i,k[10]=(n+d)*a,k[11]=-1,k[12]=0,k[13]=0,k[14]=n*d*2*a,k[15]=0,k}},{}],209:[function(v,ie,ae){ie.exports=function _(k){return k[0]=1,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=1,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[10]=1,k[11]=0,k[12]=0,k[13]=0,k[14]=0,k[15]=1,k}},{}],210:[function(v,ie,ae){ie.exports={create:v("./create"),clone:v("./clone"),copy:v("./copy"),identity:v("./identity"),transpose:v("./transpose"),invert:v("./invert"),adjoint:v("./adjoint"),determinant:v("./determinant"),multiply:v("./multiply"),translate:v("./translate"),scale:v("./scale"),rotate:v("./rotate"),rotateX:v("./rotateX"),rotateY:v("./rotateY"),rotateZ:v("./rotateZ"),fromRotation:v("./fromRotation"),fromRotationTranslation:v("./fromRotationTranslation"),fromScaling:v("./fromScaling"),fromTranslation:v("./fromTranslation"),fromXRotation:v("./fromXRotation"),fromYRotation:v("./fromYRotation"),fromZRotation:v("./fromZRotation"),fromQuat:v("./fromQuat"),frustum:v("./frustum"),perspective:v("./perspective"),perspectiveFromFieldOfView:v("./perspectiveFromFieldOfView"),ortho:v("./ortho"),lookAt:v("./lookAt"),str:v("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(v,ie,ae){ie.exports=function _(k,m){var E=m[0],e=m[1],c=m[2],d=m[3],n=m[4],t=m[5],i=m[6],a=m[7],r=m[8],g=m[9],s=m[10],b=m[11],x=m[12],S=m[13],p=m[14],w=m[15],l=E*t-e*n,y=E*i-c*n,A=E*a-d*n,T=e*i-c*t,M=e*a-d*t,f=c*a-d*i,u=r*S-g*x,h=r*p-s*x,o=r*w-b*x,C=g*p-s*S,R=g*w-b*S,z=s*w-b*p,O=l*z-y*R+A*C+T*o-M*h+f*u;return O?(k[0]=(t*z-i*R+a*C)*(O=1/O),k[1]=(c*R-e*z-d*C)*O,k[2]=(S*f-p*M+w*T)*O,k[3]=(s*M-g*f-b*T)*O,k[4]=(i*o-n*z-a*h)*O,k[5]=(E*z-c*o+d*h)*O,k[6]=(p*A-x*f-w*y)*O,k[7]=(r*f-s*A+b*y)*O,k[8]=(n*R-t*o+a*u)*O,k[9]=(e*o-E*R-d*u)*O,k[10]=(x*M-S*A+w*l)*O,k[11]=(g*A-r*M-b*l)*O,k[12]=(t*h-n*C-i*u)*O,k[13]=(E*C-e*h+c*u)*O,k[14]=(S*y-x*T-p*l)*O,k[15]=(r*T-g*y+s*l)*O,k):null}},{}],212:[function(v,ie,ae){var _=v("./identity");ie.exports=function k(m,E,e,c){var d,n,t,i,a,r,g,s,b,x,S=E[0],p=E[1],w=E[2],l=c[0],y=c[1],A=c[2],T=e[0],M=e[1],f=e[2];return Math.abs(S-T)<1e-6&&Math.abs(p-M)<1e-6&&Math.abs(w-f)<1e-6?_(m):(g=S-T,s=p-M,b=w-f,d=y*(b*=x=1/Math.sqrt(g*g+s*s+b*b))-A*(s*=x),n=A*(g*=x)-l*b,t=l*s-y*g,(x=Math.sqrt(d*d+n*n+t*t))?(d*=x=1/x,n*=x,t*=x):(d=0,n=0,t=0),i=s*t-b*n,a=b*d-g*t,r=g*n-s*d,(x=Math.sqrt(i*i+a*a+r*r))?(i*=x=1/x,a*=x,r*=x):(i=0,a=0,r=0),m[0]=d,m[1]=i,m[2]=g,m[3]=0,m[4]=n,m[5]=a,m[6]=s,m[7]=0,m[8]=t,m[9]=r,m[10]=b,m[11]=0,m[12]=-(d*S+n*p+t*w),m[13]=-(i*S+a*p+r*w),m[14]=-(g*S+s*p+b*w),m[15]=1,m)}},{"./identity":209}],213:[function(v,ie,ae){ie.exports=function _(k,m,E){var e=m[0],c=m[1],d=m[2],n=m[3],t=m[4],i=m[5],a=m[6],r=m[7],g=m[8],s=m[9],b=m[10],x=m[11],S=m[12],p=m[13],w=m[14],l=m[15],y=E[0],A=E[1],T=E[2],M=E[3];return k[0]=y*e+A*t+T*g+M*S,k[1]=y*c+A*i+T*s+M*p,k[2]=y*d+A*a+T*b+M*w,k[3]=y*n+A*r+T*x+M*l,k[4]=(y=E[4])*e+(A=E[5])*t+(T=E[6])*g+(M=E[7])*S,k[5]=y*c+A*i+T*s+M*p,k[6]=y*d+A*a+T*b+M*w,k[7]=y*n+A*r+T*x+M*l,k[8]=(y=E[8])*e+(A=E[9])*t+(T=E[10])*g+(M=E[11])*S,k[9]=y*c+A*i+T*s+M*p,k[10]=y*d+A*a+T*b+M*w,k[11]=y*n+A*r+T*x+M*l,k[12]=(y=E[12])*e+(A=E[13])*t+(T=E[14])*g+(M=E[15])*S,k[13]=y*c+A*i+T*s+M*p,k[14]=y*d+A*a+T*b+M*w,k[15]=y*n+A*r+T*x+M*l,k}},{}],214:[function(v,ie,ae){ie.exports=function _(k,m,E,e,c,d,n){var t=1/(m-E),i=1/(e-c),a=1/(d-n);return k[0]=-2*t,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=-2*i,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[10]=2*a,k[11]=0,k[12]=(m+E)*t,k[13]=(c+e)*i,k[14]=(n+d)*a,k[15]=1,k}},{}],215:[function(v,ie,ae){ie.exports=function _(k,m,E,e,c){var d=1/Math.tan(m/2),n=1/(e-c);return k[0]=d/E,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=d,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[10]=(c+e)*n,k[11]=-1,k[12]=0,k[13]=0,k[14]=2*c*e*n,k[15]=0,k}},{}],216:[function(v,ie,ae){ie.exports=function _(k,m,E,e){var c=Math.tan(m.upDegrees*Math.PI/180),d=Math.tan(m.downDegrees*Math.PI/180),n=Math.tan(m.leftDegrees*Math.PI/180),t=Math.tan(m.rightDegrees*Math.PI/180),i=2/(n+t),a=2/(c+d);return k[0]=i,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=a,k[6]=0,k[7]=0,k[8]=-(n-t)*i*.5,k[9]=(c-d)*a*.5,k[10]=e/(E-e),k[11]=-1,k[12]=0,k[13]=0,k[14]=e*E/(E-e),k[15]=0,k}},{}],217:[function(v,ie,ae){ie.exports=function _(k,m,E,e){var i,a,r,g,s,b,x,S,p,w,l,y,A,T,M,f,u,h,o,C,R,z,O,I,c=e[0],d=e[1],n=e[2],t=Math.sqrt(c*c+d*d+n*n);return Math.abs(t)<1e-6?null:(c*=t=1/t,d*=t,n*=t,i=Math.sin(E),a=Math.cos(E),s=m[1],b=m[2],x=m[3],p=m[5],w=m[6],l=m[7],A=m[9],T=m[10],M=m[11],o=c*d*(r=1-a)-n*i,C=d*d*r+a,R=n*d*r+c*i,z=c*n*r+d*i,O=d*n*r-c*i,I=n*n*r+a,k[0]=(g=m[0])*(f=c*c*r+a)+(S=m[4])*(u=d*c*r+n*i)+(y=m[8])*(h=n*c*r-d*i),k[1]=s*f+p*u+A*h,k[2]=b*f+w*u+T*h,k[3]=x*f+l*u+M*h,k[4]=g*o+S*C+y*R,k[5]=s*o+p*C+A*R,k[6]=b*o+w*C+T*R,k[7]=x*o+l*C+M*R,k[8]=g*z+S*O+y*I,k[9]=s*z+p*O+A*I,k[10]=b*z+w*O+T*I,k[11]=x*z+l*O+M*I,m!==k&&(k[12]=m[12],k[13]=m[13],k[14]=m[14],k[15]=m[15]),k)}},{}],218:[function(v,ie,ae){ie.exports=function _(k,m,E){var e=Math.sin(E),c=Math.cos(E),d=m[4],n=m[5],t=m[6],i=m[7],a=m[8],r=m[9],g=m[10],s=m[11];return m!==k&&(k[0]=m[0],k[1]=m[1],k[2]=m[2],k[3]=m[3],k[12]=m[12],k[13]=m[13],k[14]=m[14],k[15]=m[15]),k[4]=d*c+a*e,k[5]=n*c+r*e,k[6]=t*c+g*e,k[7]=i*c+s*e,k[8]=a*c-d*e,k[9]=r*c-n*e,k[10]=g*c-t*e,k[11]=s*c-i*e,k}},{}],219:[function(v,ie,ae){ie.exports=function _(k,m,E){var e=Math.sin(E),c=Math.cos(E),d=m[0],n=m[1],t=m[2],i=m[3],a=m[8],r=m[9],g=m[10],s=m[11];return m!==k&&(k[4]=m[4],k[5]=m[5],k[6]=m[6],k[7]=m[7],k[12]=m[12],k[13]=m[13],k[14]=m[14],k[15]=m[15]),k[0]=d*c-a*e,k[1]=n*c-r*e,k[2]=t*c-g*e,k[3]=i*c-s*e,k[8]=d*e+a*c,k[9]=n*e+r*c,k[10]=t*e+g*c,k[11]=i*e+s*c,k}},{}],220:[function(v,ie,ae){ie.exports=function _(k,m,E){var e=Math.sin(E),c=Math.cos(E),d=m[0],n=m[1],t=m[2],i=m[3],a=m[4],r=m[5],g=m[6],s=m[7];return m!==k&&(k[8]=m[8],k[9]=m[9],k[10]=m[10],k[11]=m[11],k[12]=m[12],k[13]=m[13],k[14]=m[14],k[15]=m[15]),k[0]=d*c+a*e,k[1]=n*c+r*e,k[2]=t*c+g*e,k[3]=i*c+s*e,k[4]=a*c-d*e,k[5]=r*c-n*e,k[6]=g*c-t*e,k[7]=s*c-i*e,k}},{}],221:[function(v,ie,ae){ie.exports=function _(k,m,E){var e=E[0],c=E[1],d=E[2];return k[0]=m[0]*e,k[1]=m[1]*e,k[2]=m[2]*e,k[3]=m[3]*e,k[4]=m[4]*c,k[5]=m[5]*c,k[6]=m[6]*c,k[7]=m[7]*c,k[8]=m[8]*d,k[9]=m[9]*d,k[10]=m[10]*d,k[11]=m[11]*d,k[12]=m[12],k[13]=m[13],k[14]=m[14],k[15]=m[15],k}},{}],222:[function(v,ie,ae){ie.exports=function _(k){return"mat4("+k[0]+", "+k[1]+", "+k[2]+", "+k[3]+", "+k[4]+", "+k[5]+", "+k[6]+", "+k[7]+", "+k[8]+", "+k[9]+", "+k[10]+", "+k[11]+", "+k[12]+", "+k[13]+", "+k[14]+", "+k[15]+")"}},{}],223:[function(v,ie,ae){ie.exports=function _(k,m,E){var n,t,i,a,r,g,s,b,x,S,p,w,e=E[0],c=E[1],d=E[2];return m===k?(k[12]=m[0]*e+m[4]*c+m[8]*d+m[12],k[13]=m[1]*e+m[5]*c+m[9]*d+m[13],k[14]=m[2]*e+m[6]*c+m[10]*d+m[14],k[15]=m[3]*e+m[7]*c+m[11]*d+m[15]):(t=m[1],i=m[2],a=m[3],r=m[4],g=m[5],s=m[6],b=m[7],x=m[8],S=m[9],p=m[10],w=m[11],k[0]=n=m[0],k[1]=t,k[2]=i,k[3]=a,k[4]=r,k[5]=g,k[6]=s,k[7]=b,k[8]=x,k[9]=S,k[10]=p,k[11]=w,k[12]=n*e+r*c+x*d+m[12],k[13]=t*e+g*c+S*d+m[13],k[14]=i*e+s*c+p*d+m[14],k[15]=a*e+b*c+w*d+m[15]),k}},{}],224:[function(v,ie,ae){ie.exports=function _(k,m){if(k===m){var E=m[1],e=m[2],c=m[3],d=m[6],n=m[7],t=m[11];k[1]=m[4],k[2]=m[8],k[3]=m[12],k[4]=E,k[6]=m[9],k[7]=m[13],k[8]=e,k[9]=d,k[11]=m[14],k[12]=c,k[13]=n,k[14]=t}else k[0]=m[0],k[1]=m[4],k[2]=m[8],k[3]=m[12],k[4]=m[1],k[5]=m[5],k[6]=m[9],k[7]=m[13],k[8]=m[2],k[9]=m[6],k[10]=m[10],k[11]=m[14],k[12]=m[3],k[13]=m[7],k[14]=m[11],k[15]=m[15];return k}},{}],225:[function(v,ie,ae){"use strict";var _=v("css-font"),k=v("pick-by-alias"),m=v("regl"),E=v("gl-util/context"),e=v("es6-weak-map"),c=v("color-normalize"),d=v("font-atlas"),n=v("typedarray-pool"),t=v("parse-rect"),i=v("is-plain-obj"),a=v("parse-unit"),r=v("to-px"),g=v("detect-kerning"),s=v("object-assign"),b=v("font-measure"),x=v("flatten-vertex-data"),p=v("bit-twiddle").nextPow2,w=new e,l=!1;if(document.body){var y=document.body.appendChild(document.createElement("div"));y.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(y).fontStretch&&(l=!0),document.body.removeChild(y)}var A=function(f){this.gl=function T(M){return"function"==typeof M&&M._gl&&M.prop&&M.texture&&M.buffer}(f)?(f={regl:f}).regl._gl:E(f),this.shader=w.get(this.gl),this.regl=this.shader?this.shader.regl:f.regl||m({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),w.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(i(f)?f:{})};A.prototype.createShader=function(){var f=this.regl,u=f({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:f.prop("count"),offset:f.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:f.this("sizeBuffer")},width:{offset:0,stride:8,buffer:f.this("sizeBuffer")},char:f.this("charBuffer"),position:f.this("position")},uniforms:{atlasSize:function(o,C){return[C.atlas.width,C.atlas.height]},atlasDim:function(o,C){return[C.atlas.cols,C.atlas.rows]},atlas:function(o,C){return C.atlas.texture},charStep:function(o,C){return C.atlas.step},em:function(o,C){return C.atlas.em},color:f.prop("color"),opacity:f.prop("opacity"),viewport:f.this("viewportArray"),scale:f.this("scale"),align:f.prop("align"),baseline:f.prop("baseline"),translate:f.this("translate"),positionOffset:f.prop("positionOffset")},primitive:"points",viewport:f.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:f,draw:u,atlas:{}}},A.prototype.update=function(f){var u=this;if("string"==typeof f)f={text:f};else if(!f)return;null!=(f=k(f,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(this.opacity=Array.isArray(f.opacity)?f.opacity.map(function(ye){return parseFloat(ye)}):parseFloat(f.opacity)),null!=f.viewport&&(this.viewport=t(f.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=f.kerning&&(this.kerning=f.kerning),null!=f.offset&&("number"==typeof f.offset&&(f.offset=[f.offset,0]),this.positionOffset=x(f.offset)),f.direction&&(this.direction=f.direction),f.range&&(this.range=f.range,this.scale=[1/(f.range[2]-f.range[0]),1/(f.range[3]-f.range[1])],this.translate=[-f.range[0],-f.range[1]]),f.scale&&(this.scale=f.scale),f.translate&&(this.translate=f.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!f.font&&(f.font=A.baseFontSize+"px sans-serif");var z,h=!1,o=!1;if(f.font&&(Array.isArray(f.font)?f.font:[f.font]).forEach(function(ye,Ce){if("string"==typeof ye)try{ye=_.parse(ye)}catch(nt){ye=_.parse(A.baseFontSize+"px "+ye)}else ye=_.parse(_.stringify(ye));var Fe=_.stringify({size:A.baseFontSize,family:ye.family,stretch:l?ye.stretch:void 0,variant:ye.variant,weight:ye.weight,style:ye.style}),Ke=a(ye.size),Ue=Math.round(Ke[0]*r(Ke[1]));if(Ue!==u.fontSize[Ce]&&(o=!0,u.fontSize[Ce]=Ue),!(u.font[Ce]&&Fe==u.font[Ce].baseString||(h=!0,u.font[Ce]=A.fonts[Fe],u.font[Ce]))){var Be=ye.family.join(", "),Ie=[ye.style];ye.style!=ye.variant&&Ie.push(ye.variant),ye.variant!=ye.weight&&Ie.push(ye.weight),l&&ye.weight!=ye.stretch&&Ie.push(ye.stretch),u.font[Ce]={baseString:Fe,family:Be,weight:ye.weight,stretch:ye.stretch,style:ye.style,variant:ye.variant,width:{},kerning:{},metrics:b(Be,{origin:"top",fontSize:A.baseFontSize,fontStyle:Ie.join(" ")})},A.fonts[Fe]=u.font[Ce]}}),(h||o)&&this.font.forEach(function(ye,Ce){var Fe=_.stringify({size:u.fontSize[Ce],family:ye.family,stretch:l?ye.stretch:void 0,variant:ye.variant,weight:ye.weight,style:ye.style});u.fontAtlas[Ce]=u.shader.atlas[Fe],u.fontAtlas[Ce]||(u.shader.atlas[Fe]=u.fontAtlas[Ce]={fontString:Fe,step:2*Math.ceil(u.fontSize[Ce]*ye.metrics.bottom*.5),em:u.fontSize[Ce],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:u.regl.texture()}),null==f.text&&(f.text=u.text)}),"string"==typeof f.text&&f.position&&f.position.length>2){for(var C=Array(.5*f.position.length),R=0;R<C.length;R++)C[R]=f.text;f.text=C}if(null!=f.text||h){if(this.textOffsets=[0],Array.isArray(f.text)){this.count=f.text[0].length,this.counts=[this.count];for(var O=1;O<f.text.length;O++)this.textOffsets[O]=this.textOffsets[O-1]+f.text[O-1].length,this.count+=f.text[O].length,this.counts.push(f.text[O].length);this.text=f.text.join("")}else this.text=f.text,this.count=this.text.length,this.counts=[this.count];z=[],this.font.forEach(function(ye,Ce){A.atlasContext.font=ye.baseString;for(var Fe=u.fontAtlas[Ce],Ke=0;Ke<u.text.length;Ke++){var Ue=u.text.charAt(Ke);if(null==Fe.ids[Ue]&&(Fe.ids[Ue]=Fe.chars.length,Fe.chars.push(Ue),z.push(Ue)),null==ye.width[Ue]&&(ye.width[Ue]=A.atlasContext.measureText(Ue).width/A.baseFontSize,u.kerning)){var Be=[];for(var Ie in ye.width)Be.push(Ie+Ue,Ue+Ie);s(ye.kerning,g(ye.family,{pairs:Be}))}}})}if(f.position)if(f.position.length>2){for(var I=!f.position[0].length,F=n.mallocFloat(2*this.count),D=0,N=0;D<this.counts.length;D++){var U=this.counts[D];if(I)for(var X=0;X<U;X++)F[N++]=f.position[2*D],F[N++]=f.position[2*D+1];else for(var oe=0;oe<U;oe++)F[N++]=f.position[D][0],F[N++]=f.position[D][1]}this.position.call?this.position({type:"float",data:F}):this.position=this.regl.buffer({type:"float",data:F}),n.freeFloat(F)}else this.position.destroy&&this.position.destroy(),this.position={constant:f.position};if(f.text||h){var se=n.mallocUint8(this.count),ne=n.mallocFloat(2*this.count);this.textWidth=[];for(var W=0,G=0;W<this.counts.length;W++){for(var $=this.counts[W],V=this.font[W]||this.font[0],H=this.fontAtlas[W]||this.fontAtlas[0],q=0;q<$;q++){var K=this.text.charAt(G),Y=this.text.charAt(G-1);if(se[G]=H.ids[K],ne[2*G]=V.width[K],q){var re=ne[2*G-1]+.5*ne[2*G-2]+.5*ne[2*G];if(this.kerning){var le=V.kerning[Y+K];le&&(re+=.001*le)}ne[2*G+1]=re}else ne[2*G+1]=.5*ne[2*G];G++}this.textWidth.push(ne.length?.5*ne[2*G-2]+ne[2*G-1]:0)}f.align||(f.align=this.align),this.charBuffer({data:se,type:"uint8",usage:"stream"}),this.sizeBuffer({data:ne,type:"float",usage:"stream"}),n.freeUint8(se),n.freeFloat(ne),z.length&&this.font.forEach(function(ye,Ce){var Fe=u.fontAtlas[Ce],Ke=Fe.step,Ue=Math.floor(A.maxAtlasSize/Ke),Be=Math.min(Ue,Fe.chars.length),Ie=Math.ceil(Fe.chars.length/Be),nt=p(Be*Ke),gt=p(Ie*Ke);Fe.width=nt,Fe.height=gt,Fe.rows=Ie,Fe.cols=Be,Fe.em&&Fe.texture({data:d({canvas:A.atlasCanvas,font:Fe.fontString,chars:Fe.chars,shape:[nt,gt],step:[Ke,Ke]})})})}if(f.align&&(this.align=f.align,this.alignOffset=this.textWidth.map(function(ye,Ce){var Fe=Array.isArray(u.align)?u.align.length>1?u.align[Ce]:u.align[0]:u.align;if("number"==typeof Fe)return Fe;switch(Fe){case"right":case"end":return-ye;case"center":case"centre":case"middle":return.5*-ye}return 0})),null==this.baseline&&null==f.baseline&&(f.baseline=0),null!=f.baseline&&(this.baseline=f.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(ye,Ce){var Fe=(u.font[Ce]||u.font[0]).metrics,Ke=0;return Ke+=.5*Fe.bottom,-1*(Ke+="number"==typeof ye?ye-Fe.baseline:-Fe[ye])})),null!=f.color)if(f.color||(f.color="transparent"),"string"!=typeof f.color&&isNaN(f.color)){var ge;if("number"==typeof f.color[0]&&f.color.length>this.counts.length){var pe=f.color.length;ge=n.mallocUint8(pe);for(var xe=(f.color.subarray||f.color.slice).bind(f.color),ke=0;ke<pe;ke+=4)ge.set(c(xe(ke,ke+4),"uint8"),ke)}else{var we=f.color.length;ge=n.mallocUint8(4*we);for(var de=0;de<we;de++)ge.set(c(f.color[de]||0,"uint8"),4*de)}this.color=ge}else this.color=c(f.color,"uint8");if(f.position||f.text||f.color||f.baseline||f.align||f.font||f.offset||f.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var Le=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(Le);for(var De=0;De<this.batch.length;De++)this.batch[De]={count:this.counts.length>1?this.counts[De]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[De]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*De,4*De+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[De]:this.opacity,baseline:null!=this.baselineOffset[De]?this.baselineOffset[De]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[De]?this.alignOffset[De]:this.alignOffset[0]:0,atlas:this.fontAtlas[De]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*De,2*De+2):this.positionOffset}}else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]},A.prototype.destroy=function(){},A.prototype.kerning=!0,A.prototype.position={constant:new Float32Array(2)},A.prototype.translate=null,A.prototype.scale=null,A.prototype.font=null,A.prototype.text="",A.prototype.positionOffset=[0,0],A.prototype.opacity=1,A.prototype.color=new Uint8Array([0,0,0,255]),A.prototype.alignOffset=[0,0],A.maxAtlasSize=1024,A.atlasCanvas=document.createElement("canvas"),A.atlasContext=A.atlasCanvas.getContext("2d",{alpha:!1}),A.baseFontSize=64,A.fonts={},ie.exports=A},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:283,"to-px":314,"typedarray-pool":327}],226:[function(v,ie,ae){(function(_){(function(){"use strict";var k=v("pick-by-alias");function m(n){if(n.container)if(n.container==document.body)document.body.style.width||(n.canvas.width=n.width||n.pixelRatio*_.innerWidth),document.body.style.height||(n.canvas.height=n.height||n.pixelRatio*_.innerHeight);else{var t=n.container.getBoundingClientRect();n.canvas.width=n.width||t.right-t.left,n.canvas.height=n.height||t.bottom-t.top}}function E(n){return"function"==typeof n.getContext&&"width"in n&&"height"in n}function d(){var n=document.createElement("canvas");return n.style.position="absolute",n.style.top=0,n.style.left=0,n}ie.exports=function(t){if(t?"string"==typeof t&&(t={container:t}):t={},(t=E(t)||function e(n){return"string"==typeof n.nodeName&&"function"==typeof n.appendChild&&"function"==typeof n.getBoundingClientRect}(t)?{container:t}:function c(n){return"function"==typeof n.drawArrays||"function"==typeof n.drawElements}(t)?{gl:t}:k(t,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(t.pixelRatio=_.pixelRatio||1),t.gl)return t.gl;if(t.canvas&&(t.container=t.canvas.parentNode),t.container){if("string"==typeof t.container){var i=document.querySelector(t.container);if(!i)throw Error("Element "+t.container+" is not found");t.container=i}E(t.container)?(t.canvas=t.container,t.container=t.canvas.parentNode):t.canvas||(t.canvas=d(),t.container.appendChild(t.canvas),m(t))}else if(!t.canvas){if("undefined"==typeof document)throw Error("Not DOM environment. Use headless-gl.");t.container=document.body||document.documentElement,t.canvas=d(),t.container.appendChild(t.canvas),m(t)}return t.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(a){try{t.gl=t.canvas.getContext(a,t.attrs)}catch(r){}return t.gl}),t.gl}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"pick-by-alias":253}],227:[function(v,ie,ae){ie.exports=function(_){"string"==typeof _&&(_=[_]);for(var k=[].slice.call(arguments,1),m=[],E=0;E<_.length-1;E++)m.push(_[E],k[E]||"");return m.push(_[E]),m.join("")}},{}],228:[function(v,ie,ae){(function(_){(function(){"use strict";var m,k=v("is-browser");m="function"==typeof _.matchMedia?!_.matchMedia("(hover: none)").matches:k,ie.exports=m}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":232}],229:[function(v,ie,ae){"use strict";var _=v("is-browser");ie.exports=_&&function k(){var m=!1;try{var E=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("test",null,E),window.removeEventListener("test",null,E)}catch(e){m=!1}return m}()},{"is-browser":232}],230:[function(v,ie,ae){ae.read=function(_,k,m,E,e){var c,d,n=8*e-E-1,t=(1<<n)-1,i=t>>1,a=-7,r=m?e-1:0,g=m?-1:1,s=_[k+r];for(r+=g,c=s&(1<<-a)-1,s>>=-a,a+=n;a>0;c=256*c+_[k+r],r+=g,a-=8);for(d=c&(1<<-a)-1,c>>=-a,a+=E;a>0;d=256*d+_[k+r],r+=g,a-=8);if(0===c)c=1-i;else{if(c===t)return d?NaN:1/0*(s?-1:1);d+=Math.pow(2,E),c-=i}return(s?-1:1)*d*Math.pow(2,c-E)},ae.write=function(_,k,m,E,e,c){var d,n,t,i=8*c-e-1,a=(1<<i)-1,r=a>>1,g=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,s=E?0:c-1,b=E?1:-1,x=k<0||0===k&&1/k<0?1:0;for(k=Math.abs(k),isNaN(k)||k===1/0?(n=isNaN(k)?1:0,d=a):(d=Math.floor(Math.log(k)/Math.LN2),k*(t=Math.pow(2,-d))<1&&(d--,t*=2),(k+=d+r>=1?g/t:g*Math.pow(2,1-r))*t>=2&&(d++,t/=2),d+r>=a?(n=0,d=a):d+r>=1?(n=(k*t-1)*Math.pow(2,e),d+=r):(n=k*Math.pow(2,r-1)*Math.pow(2,e),d=0));e>=8;_[m+s]=255&n,s+=b,n/=256,e-=8);for(d=d<<e|n,i+=e;i>0;_[m+s]=255&d,s+=b,d/=256,i-=8);_[m+s-b]|=128*x}},{}],231:[function(v,ie,ae){ie.exports="function"==typeof Object.create?function(k,m){m&&(k.super_=m,k.prototype=Object.create(m.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}))}:function(k,m){if(m){k.super_=m;var E=function(){};E.prototype=m.prototype,k.prototype=new E,k.prototype.constructor=k}}},{}],232:[function(v,ie,ae){ie.exports=!0},{}],233:[function(v,ie,ae){"use strict";ie.exports="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(v,ie,ae){"use strict";ie.exports=m,ie.exports.isMobile=m,ie.exports.default=m;var _=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,k=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function m(E){E||(E={});var e=E.ua;if(!e&&"undefined"!=typeof navigator&&(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;var c=E.tablet?k.test(e):_.test(e);return!c&&E.tablet&&E.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(c=!0),c}},{}],235:[function(v,ie,ae){"use strict";ie.exports=function(_){var k=typeof _;return null!==_&&("object"===k||"function"===k)}},{}],236:[function(v,ie,ae){"use strict";var _=Object.prototype.toString;ie.exports=function(k){var m;return"[object Object]"===_.call(k)&&(null===(m=Object.getPrototypeOf(k))||m===Object.getPrototypeOf({}))}},{}],237:[function(v,ie,ae){"use strict";ie.exports=function(_){for(var m,k=_.length,E=0;E<k;E++)if(((m=_.charCodeAt(E))<9||m>13)&&32!==m&&133!==m&&160!==m&&5760!==m&&6158!==m&&(m<8192||m>8205)&&8232!==m&&8233!==m&&8239!==m&&8287!==m&&8288!==m&&12288!==m&&65279!==m)return!1;return!0}},{}],238:[function(v,ie,ae){"use strict";ie.exports=function(k){return"string"==typeof k&&(k=k.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(k)&&/[\dz]$/i.test(k)&&k.length>4))}},{}],239:[function(v,ie,ae){var _,k;_=this,k=function(){"use strict";var _,k,m;function E(e,c){if(_)if(k){var d="var sharedChunk = {}; ("+_+")(sharedChunk); ("+k+")(sharedChunk);",n={};_(n),(m=c(n)).workerUrl=window.URL.createObjectURL(new Blob([d],{type:"text/javascript"}))}else k=c;else _=c}return E(0,function(e){function c(L,P){return L(P={exports:{}},P.exports),P.exports}var d="1.10.1",n=t;function t(L,P,B,ee){this.cx=3*L,this.bx=3*(B-L)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*P,this.by=3*(ee-P)-this.cy,this.ay=1-this.cy-this.by,this.p1x=L,this.p1y=ee,this.p2x=B,this.p2y=ee}t.prototype.sampleCurveX=function(L){return((this.ax*L+this.bx)*L+this.cx)*L},t.prototype.sampleCurveY=function(L){return((this.ay*L+this.by)*L+this.cy)*L},t.prototype.sampleCurveDerivativeX=function(L){return(3*this.ax*L+2*this.bx)*L+this.cx},t.prototype.solveCurveX=function(L,P){var B,ee,fe,me,Te;for(void 0===P&&(P=1e-6),fe=L,Te=0;Te<8;Te++){if(me=this.sampleCurveX(fe)-L,Math.abs(me)<P)return fe;var Oe=this.sampleCurveDerivativeX(fe);if(Math.abs(Oe)<1e-6)break;fe-=me/Oe}if((fe=L)<(B=0))return B;if(fe>(ee=1))return ee;for(;B<ee;){if(me=this.sampleCurveX(fe),Math.abs(me-L)<P)return fe;L>me?B=fe:ee=fe,fe=.5*(ee-B)+B}return fe},t.prototype.solve=function(L,P){return this.sampleCurveY(this.solveCurveX(L,P))};var i=a;function a(L,P){this.x=L,this.y=P}function s(L,P,B,ee){var fe=new n(L,P,B,ee);return function(me){return fe.solve(me)}}a.prototype={clone:function(){return new a(this.x,this.y)},add:function(L){return this.clone()._add(L)},sub:function(L){return this.clone()._sub(L)},multByPoint:function(L){return this.clone()._multByPoint(L)},divByPoint:function(L){return this.clone()._divByPoint(L)},mult:function(L){return this.clone()._mult(L)},div:function(L){return this.clone()._div(L)},rotate:function(L){return this.clone()._rotate(L)},rotateAround:function(L,P){return this.clone()._rotateAround(L,P)},matMult:function(L){return this.clone()._matMult(L)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(L){return this.x===L.x&&this.y===L.y},dist:function(L){return Math.sqrt(this.distSqr(L))},distSqr:function(L){var P=L.x-this.x,B=L.y-this.y;return P*P+B*B},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(L){return Math.atan2(this.y-L.y,this.x-L.x)},angleWith:function(L){return this.angleWithSep(L.x,L.y)},angleWithSep:function(L,P){return Math.atan2(this.x*P-this.y*L,this.x*L+this.y*P)},_matMult:function(L){var B=L[2]*this.x+L[3]*this.y;return this.x=L[0]*this.x+L[1]*this.y,this.y=B,this},_add:function(L){return this.x+=L.x,this.y+=L.y,this},_sub:function(L){return this.x-=L.x,this.y-=L.y,this},_mult:function(L){return this.x*=L,this.y*=L,this},_div:function(L){return this.x/=L,this.y/=L,this},_multByPoint:function(L){return this.x*=L.x,this.y*=L.y,this},_divByPoint:function(L){return this.x/=L.x,this.y/=L.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var L=this.y;return this.y=this.x,this.x=-L,this},_rotate:function(L){var P=Math.cos(L),B=Math.sin(L),fe=B*this.x+P*this.y;return this.x=P*this.x-B*this.y,this.y=fe,this},_rotateAround:function(L,P){var B=Math.cos(L),ee=Math.sin(L),me=P.y+ee*(this.x-P.x)+B*(this.y-P.y);return this.x=P.x+B*(this.x-P.x)-ee*(this.y-P.y),this.y=me,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(L){return L instanceof a?L:Array.isArray(L)?new a(L[0],L[1]):L};var b=s(.25,.1,.25,1);function x(L,P,B){return Math.min(B,Math.max(P,L))}function S(L,P,B){var ee=B-P,fe=((L-P)%ee+ee)%ee+P;return fe===P?B:fe}function y(L){for(var P=[],B=arguments.length-1;B-- >0;)P[B]=arguments[B+1];for(var ee=0,fe=P;ee<fe.length;ee+=1){var me=fe[ee];for(var Te in me)L[Te]=me[Te]}return L}var T=1;function M(){return T++}function f(){return function L(P){return P?(P^16*Math.random()>>P/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,L)}()}function u(L){return!!L&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(L)}function h(L,P){L.forEach(function(B){!P[B]||(P[B]=P[B].bind(P))})}function o(L,P){return-1!==L.indexOf(P,L.length-P.length)}function C(L,P,B){var ee={};for(var fe in L)ee[fe]=P.call(B||this,L[fe],fe,L);return ee}function R(L,P,B){var ee={};for(var fe in L)P.call(B||this,L[fe],fe,L)&&(ee[fe]=L[fe]);return ee}function z(L){return Array.isArray(L)?L.map(z):"object"==typeof L&&L?C(L,z):L}var I={};function F(L){I[L]||("undefined"!=typeof console&&console.warn(L),I[L]=!0)}function D(L,P,B){return(B.y-L.y)*(P.x-L.x)>(P.y-L.y)*(B.x-L.x)}function N(L){for(var P=0,B=0,ee=L.length,fe=ee-1,me=void 0,Te=void 0;B<ee;fe=B++)P+=((Te=L[fe]).x-(me=L[B]).x)*(me.y+Te.y);return P}function X(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function oe(L){var B={};if(L.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(fe,me,Te,Oe){var $e=Te||Oe;return B[me]=!$e||$e.toLowerCase(),""}),B["max-age"]){var ee=parseInt(B["max-age"],10);isNaN(ee)?delete B["max-age"]:B["max-age"]=ee}return B}var se=null;function ne(L){if(null==se){var P=L.navigator?L.navigator.userAgent:null;se=!!L.safari||!(!P||!(/\b(iPad|iPhone|iPod)\b/.test(P)||P.match("Safari")&&!P.match("Chrome")))}return se}function W(L){try{var P=self[L];return P.setItem("_mapbox_test_",1),P.removeItem("_mapbox_test_"),!0}catch(B){return!1}}var K,Y,re,ge,V=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),H=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,q=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,te={now:V,frame:function(P){var B=H(P);return{cancel:function(){return q(B)}}},getImageData:function(P,B){void 0===B&&(B=0);var ee=self.document.createElement("canvas"),fe=ee.getContext("2d");if(!fe)throw new Error("failed to create canvas 2d context");return ee.width=P.width,ee.height=P.height,fe.drawImage(P,0,0,P.width,P.height),fe.getImageData(-B,-B,P.width+2*B,P.height+2*B)},resolveURL:function(P){return K||(K=self.document.createElement("a")),K.href=P,K.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==Y&&(Y=self.matchMedia("(prefers-reduced-motion: reduce)")),Y.matches)}},J={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},j={supported:!1,testSupport:function xe(L){le||!ge||(pe?ke(L):re=L)}},le=!1,pe=!1;function ke(L){var P=L.createTexture();L.bindTexture(L.TEXTURE_2D,P);try{if(L.texImage2D(L.TEXTURE_2D,0,L.RGBA,L.RGBA,L.UNSIGNED_BYTE,ge),L.isContextLost())return;j.supported=!0}catch(B){}L.deleteTexture(P),le=!0}self.document&&((ge=self.document.createElement("img")).onload=function(){re&&ke(re),re=null,pe=!0},ge.onerror=function(){le=!0,re=null},ge.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var we="01";var be=function(P,B){this._transformRequestFn=P,this._customAccessToken=B,this._createSkuToken()};function Le(L){return 0===L.indexOf("mapbox:")}be.prototype._createSkuToken=function(){var P=function de(){for(var B="",ee=0;ee<10;ee++)B+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",we,B].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=P.token,this._skuTokenExpiresAt=P.tokenExpiresAt},be.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},be.prototype.transformRequest=function(P,B){return this._transformRequestFn&&this._transformRequestFn(P,B)||{url:P}},be.prototype.normalizeStyleURL=function(P,B){if(!Le(P))return P;var ee=Ue(P);return ee.path="/styles/v1"+ee.path,this._makeAPIURL(ee,this._customAccessToken||B)},be.prototype.normalizeGlyphsURL=function(P,B){if(!Le(P))return P;var ee=Ue(P);return ee.path="/fonts/v1"+ee.path,this._makeAPIURL(ee,this._customAccessToken||B)},be.prototype.normalizeSourceURL=function(P,B){if(!Le(P))return P;var ee=Ue(P);return ee.path="/v4/"+ee.authority+".json",ee.params.push("secure"),this._makeAPIURL(ee,this._customAccessToken||B)},be.prototype.normalizeSpriteURL=function(P,B,ee,fe){var me=Ue(P);return Le(P)?(me.path="/styles/v1"+me.path+"/sprite"+B+ee,this._makeAPIURL(me,this._customAccessToken||fe)):(me.path+=""+B+ee,Be(me))},be.prototype.normalizeTileURL=function(P,B){if(this._isSkuTokenExpired()&&this._createSkuToken(),P&&!Le(P))return P;var ee=Ue(P);ee.path=ee.path.replace(/(\.(png|jpg)\d*)(?=$)/,(te.devicePixelRatio>=2||512===B?"@2x":"")+(j.supported?".webp":"$1")),ee.path=ee.path.replace(/^.+\/v4\//,"/"),ee.path="/v4"+ee.path;var $e=this._customAccessToken||function Fe(L){for(var P=0,B=L;P<B.length;P+=1){var fe=B[P].match(/^access_token=(.*)$/);if(fe)return fe[1]}return null}(ee.params)||J.ACCESS_TOKEN;return J.REQUIRE_ACCESS_TOKEN&&$e&&this._skuToken&&ee.params.push("sku="+this._skuToken),this._makeAPIURL(ee,$e)},be.prototype.canonicalizeTileURL=function(P,B){var me=Ue(P);if(!me.path.match(/(^\/v4\/)/)||!me.path.match(/\.[\w]+$/))return P;var Te="mapbox://tiles/";Te+=me.path.replace("/v4/","");var Oe=me.params;return B&&(Oe=Oe.filter(function($e){return!$e.match(/^access_token=/)})),Oe.length&&(Te+="?"+Oe.join("&")),Te},be.prototype.canonicalizeTileset=function(P,B){for(var ee=!!B&&Le(B),fe=[],me=0,Te=P.tiles||[];me<Te.length;me+=1){var Oe=Te[me];ye(Oe)?fe.push(this.canonicalizeTileURL(Oe,ee)):fe.push(Oe)}return fe},be.prototype._makeAPIURL=function(P,B){var ee="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",fe=Ue(J.API_URL);if(P.protocol=fe.protocol,P.authority=fe.authority,"/"!==fe.path&&(P.path=""+fe.path+P.path),!J.REQUIRE_ACCESS_TOKEN)return Be(P);if(!(B=B||J.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+ee);if("s"===B[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+ee);return P.params=P.params.filter(function(me){return-1===me.indexOf("access_token")}),P.params.push("access_token="+B),Be(P)};var De=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ye(L){return De.test(L)}var Ke=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ue(L){var P=L.match(Ke);if(!P)throw new Error("Unable to parse URL object");return{protocol:P[1],authority:P[2],path:P[3]||"/",params:P[4]?P[4].split("&"):[]}}function Be(L){var P=L.params.length?"?"+L.params.join("&"):"";return L.protocol+"://"+L.authority+L.path+P}var Ie="mapbox.eventData";function nt(L){if(!L)return null;var P=L.split(".");if(!P||3!==P.length)return null;try{return JSON.parse(function $(L){return decodeURIComponent(self.atob(L).split("").map(function(P){return"%"+("00"+P.charCodeAt(0).toString(16)).slice(-2)}).join(""))}(P[1]))}catch(ee){return null}}var gt=function(P){this.type=P,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};gt.prototype.getStorageKey=function(P){var ee,B=nt(J.ACCESS_TOKEN);return ee=B&&B.u?function G(L){return self.btoa(encodeURIComponent(L).replace(/%([0-9A-F]{2})/g,function(P,B){return String.fromCharCode(Number("0x"+B))}))}(B.u):J.ACCESS_TOKEN||"",P?Ie+"."+P+":"+ee:Ie+":"+ee},gt.prototype.fetchEventData=function(){var P=W("localStorage"),B=this.getStorageKey(),ee=this.getStorageKey("uuid");if(P)try{var fe=self.localStorage.getItem(B);fe&&(this.eventData=JSON.parse(fe));var me=self.localStorage.getItem(ee);me&&(this.anonId=me)}catch(Te){F("Unable to read from LocalStorage")}},gt.prototype.saveEventData=function(){var P=W("localStorage"),B=this.getStorageKey(),ee=this.getStorageKey("uuid");if(P)try{self.localStorage.setItem(ee,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(B,JSON.stringify(this.eventData))}catch(fe){F("Unable to write to LocalStorage")}},gt.prototype.processRequests=function(P){},gt.prototype.postEvent=function(P,B,ee,fe){var me=this;if(J.EVENTS_URL){var Te=Ue(J.EVENTS_URL);Te.params.push("access_token="+(fe||J.ACCESS_TOKEN||""));var Oe={event:this.type,created:new Date(P).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:d,skuId:we,userId:this.anonId},$e=B?y(Oe,B):Oe,ft={url:Be(Te),headers:{"Content-Type":"text/plain"},body:JSON.stringify([$e])};this.pendingRequest=Me(ft,function(yt){me.pendingRequest=null,ee(yt),me.saveEventData(),me.processRequests(fe)})}},gt.prototype.queueRequest=function(P,B){this.queue.push(P),this.processRequests(B)};var Ze,rt,Nt=function(L){function P(){L.call(this,"map.load"),this.success={},this.skuToken=""}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.postMapLoadEvent=function(ee,fe,me,Te){this.skuToken=me,(J.EVENTS_URL&&Te||J.ACCESS_TOKEN&&Array.isArray(ee)&&ee.some(function(Oe){return Le(Oe)||ye(Oe)}))&&this.queueRequest({id:fe,timestamp:Date.now()},Te)},P.prototype.processRequests=function(ee){var fe=this;if(!this.pendingRequest&&0!==this.queue.length){var me=this.queue.shift(),Te=me.id,Oe=me.timestamp;Te&&this.success[Te]||(this.anonId||this.fetchEventData(),u(this.anonId)||(this.anonId=f()),this.postEvent(Oe,{skuToken:this.skuToken},function($e){$e||Te&&(fe.success[Te]=!0)},ee))}},P}(gt),Bt=new(function(L){function P(B){L.call(this,"appUserTurnstile"),this._customAccessToken=B}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.postTurnstileEvent=function(ee,fe){J.EVENTS_URL&&J.ACCESS_TOKEN&&Array.isArray(ee)&&ee.some(function(me){return Le(me)||ye(me)})&&this.queueRequest(Date.now(),fe)},P.prototype.processRequests=function(ee){var fe=this;if(!this.pendingRequest&&0!==this.queue.length){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var me=nt(J.ACCESS_TOKEN),Te=me?me.u:J.ACCESS_TOKEN,Oe=Te!==this.eventData.tokenU;u(this.anonId)||(this.anonId=f(),Oe=!0);var $e=this.queue.shift();if(this.eventData.lastSuccess){var ft=new Date(this.eventData.lastSuccess),yt=new Date($e),Ft=($e-this.eventData.lastSuccess)/864e5;Oe=Oe||Ft>=1||Ft<-1||ft.getDate()!==yt.getDate()}else Oe=!0;if(!Oe)return this.processRequests();this.postEvent($e,{"enabled.telemetry":!1},function(tr){tr||(fe.eventData.lastSuccess=$e,fe.eventData.tokenU=Te)},ee)}},P}(gt)),Zt=Bt.postTurnstileEvent.bind(Bt),Et=new Nt,wt=Et.postMapLoadEvent.bind(Et),at="mapbox-tiles",vt=500,Qe=50;function Xe(){self.caches&&!Ze&&(Ze=self.caches.open(at))}function Tt(L,P,B){if(Xe(),Ze){var ee={status:P.status,statusText:P.statusText,headers:new self.Headers};P.headers.forEach(function(Te,Oe){return ee.headers.set(Oe,Te)});var fe=oe(P.headers.get("Cache-Control")||"");fe["no-store"]||(fe["max-age"]&&ee.headers.set("Expires",new Date(B+1e3*fe["max-age"]).toUTCString()),new Date(ee.headers.get("Expires")).getTime()-B<42e4||function kt(L,P){if(void 0===rt)try{new Response(new ReadableStream),rt=!0}catch(B){rt=!1}rt?P(L.body):L.blob().then(P)}(P,function(Te){var Oe=new self.Response(Te,ee);Xe(),Ze&&Ze.then(function($e){return $e.put(Xt(L.url),Oe)}).catch(function($e){return F($e.message)})}))}}function Xt(L){var P=L.indexOf("?");return P<0?L:L.slice(0,P)}function ar(L,P){if(Xe(),!Ze)return P(null);var B=Xt(L.url);Ze.then(function(ee){ee.match(B).then(function(fe){var me=function Ut(L){if(!L)return!1;var P=new Date(L.headers.get("Expires")||0),B=oe(L.headers.get("Cache-Control")||"");return P>Date.now()&&!B["no-cache"]}(fe);ee.delete(B),me&&ee.put(B,fe.clone()),P(null,fe,me)}).catch(P)}).catch(P)}var on,Jt=1/0;function jr(){return null==on&&(on=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),on}var et={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(et);var Yt=function(L){function P(B,ee,fe){401===ee&&ye(fe)&&(B+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),L.call(this,B),this.status=ee,this.url=fe,this.name=this.constructor.name,this.message=B}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},P}(Error),qt=X()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};function Tr(L,P){var B=new self.AbortController,ee=new self.Request(L.url,{method:L.method||"GET",body:L.body,credentials:L.credentials,headers:L.headers,referrer:qt(),signal:B.signal}),fe=!1,me=!1,Te=function Ce(L){return L.indexOf("sku=")>0&&ye(L)}(ee.url);"json"===L.type&&ee.headers.set("Accept","application/json");var Oe=function(ft,yt,Ft){if(!me){if(ft&&"SecurityError"!==ft.message&&F(ft),yt&&Ft)return $e(yt);var tr=Date.now();self.fetch(ee).then(function(Kt){if(Kt.ok){var xr=Te?Kt.clone():null;return $e(Kt,xr,tr)}return P(new Yt(Kt.statusText,Kt.status,L.url))}).catch(function(Kt){20!==Kt.code&&P(new Error(Kt.message))})}},$e=function(ft,yt,Ft){("arrayBuffer"===L.type?ft.arrayBuffer():"json"===L.type?ft.json():ft.text()).then(function(tr){me||(yt&&Ft&&Tt(ee,yt,Ft),fe=!0,P(null,tr,ft.headers.get("Cache-Control"),ft.headers.get("Expires")))}).catch(function(tr){me||P(new Error(tr.message))})};return Te?ar(ee,Oe):Oe(null,null),{cancel:function(){me=!0,fe||B.abort()}}}var je=function(L,P){if(!function(L){return/^file:/.test(L)||/^file:/.test(qt())&&!/^\w+:/.test(L)}(L.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return Tr(L,P);if(X()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",L,P,void 0,!0)}return function tt(L,P){var B=new self.XMLHttpRequest;for(var ee in B.open(L.method||"GET",L.url,!0),"arrayBuffer"===L.type&&(B.responseType="arraybuffer"),L.headers)B.setRequestHeader(ee,L.headers[ee]);return"json"===L.type&&(B.responseType="text",B.setRequestHeader("Accept","application/json")),B.withCredentials="include"===L.credentials,B.onerror=function(){P(new Error(B.statusText))},B.onload=function(){if((B.status>=200&&B.status<300||0===B.status)&&null!==B.response){var fe=B.response;if("json"===L.type)try{fe=JSON.parse(B.response)}catch(me){return P(me)}P(null,fe,B.getResponseHeader("Cache-Control"),B.getResponseHeader("Expires"))}else P(new Yt(B.statusText,B.status,L.url))},B.send(L.body),{cancel:function(){return B.abort()}}}(L,P)},ht=function(L,P){return je(y(L,{type:"arrayBuffer"}),P)},Me=function(L,P){return je(y(L,{method:"POST"}),P)};function Se(L){var P=self.document.createElement("a");return P.href=L,P.protocol===self.document.location.protocol&&P.host===self.document.location.host}var lt,pt;lt=[],pt=0;var Dt=function(L,P){if(j.supported&&(L.headers||(L.headers={}),L.headers.accept="image/webp,*/*"),pt>=J.MAX_PARALLEL_IMAGE_REQUESTS){var B={requestParameters:L,callback:P,cancelled:!1,cancel:function(){this.cancelled=!0}};return lt.push(B),B}pt++;var ee=!1,fe=function(){if(!ee)for(ee=!0,pt--;lt.length&&pt<J.MAX_PARALLEL_IMAGE_REQUESTS;){var Te=lt.shift();Te.cancelled||(Te.cancel=Dt(Te.requestParameters,Te.callback).cancel)}},me=ht(L,function(Te,Oe,$e,ft){fe(),Te?P(Te):Oe&&(jr()?function st(L,P){var B=new self.Blob([new Uint8Array(L)],{type:"image/png"});self.createImageBitmap(B).then(function(ee){P(null,ee)}).catch(function(ee){P(new Error("Could not load image because of "+ee.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Oe,P):function We(L,P,B,ee){var fe=new self.Image,me=self.URL;fe.onload=function(){P(null,fe),me.revokeObjectURL(fe.src)},fe.onerror=function(){return P(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Te=new self.Blob([new Uint8Array(L)],{type:"image/png"});fe.cacheControl=B,fe.expires=ee,fe.src=L.byteLength?me.createObjectURL(Te):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Oe,P,$e,ft))});return{cancel:function(){me.cancel(),fe()}}};function fr(L,P,B){B[L]&&-1!==B[L].indexOf(P)||(B[L]=B[L]||[],B[L].push(P))}function pr(L,P,B){if(B&&B[L]){var ee=B[L].indexOf(P);-1!==ee&&B[L].splice(ee,1)}}var Jr=function(P,B){void 0===B&&(B={}),y(this,B),this.type=P},Lr=function(L){function P(B,ee){void 0===ee&&(ee={}),L.call(this,"error",y({error:B},ee))}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P}(Jr),Ar=function(){};Ar.prototype.on=function(P,B){return this._listeners=this._listeners||{},fr(P,B,this._listeners),this},Ar.prototype.off=function(P,B){return pr(P,B,this._listeners),pr(P,B,this._oneTimeListeners),this},Ar.prototype.once=function(P,B){return this._oneTimeListeners=this._oneTimeListeners||{},fr(P,B,this._oneTimeListeners),this},Ar.prototype.fire=function(P,B){"string"==typeof P&&(P=new Jr(P,B||{}));var ee=P.type;if(this.listens(ee)){P.target=this;for(var me=0,Te=this._listeners&&this._listeners[ee]?this._listeners[ee].slice():[];me<Te.length;me+=1)Te[me].call(this,P);for(var ft=0,yt=this._oneTimeListeners&&this._oneTimeListeners[ee]?this._oneTimeListeners[ee].slice():[];ft<yt.length;ft+=1){var Ft=yt[ft];pr(ee,Ft,this._oneTimeListeners),Ft.call(this,P)}var tr=this._eventedParent;tr&&(y(P,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),tr.fire(P))}else P instanceof Lr&&console.error(P.error);return this},Ar.prototype.listens=function(P){return this._listeners&&this._listeners[P]&&this._listeners[P].length>0||this._oneTimeListeners&&this._oneTimeListeners[P]&&this._oneTimeListeners[P].length>0||this._eventedParent&&this._eventedParent.listens(P)},Ar.prototype.setEventedParent=function(P,B){return this._eventedParent=P,this._eventedParentData=B,this};var Ht={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},dr=function(P,B,ee,fe){this.message=(P?P+": ":"")+ee,fe&&(this.identifier=fe),null!=B&&B.__line__&&(this.line=B.__line__)};function rn(L){var B=L.value;return B?[new dr(L.key,B,"constants have been deprecated as of v8")]:[]}function ln(L){for(var P=[],B=arguments.length-1;B-- >0;)P[B]=arguments[B+1];for(var ee=0,fe=P;ee<fe.length;ee+=1){var me=fe[ee];for(var Te in me)L[Te]=me[Te]}return L}function or(L){return L instanceof Number||L instanceof String||L instanceof Boolean?L.valueOf():L}function Br(L){if(Array.isArray(L))return L.map(Br);if(L instanceof Object&&!(L instanceof Number||L instanceof String||L instanceof Boolean)){var P={};for(var B in L)P[B]=Br(L[B]);return P}return or(L)}var Rt=function(L){function P(B,ee){L.call(this,ee),this.message=ee,this.key=B}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P}(Error),Lt=function(P,B){void 0===B&&(B=[]),this.parent=P,this.bindings={};for(var ee=0,fe=B;ee<fe.length;ee+=1){var me=fe[ee];this.bindings[me[0]]=me[1]}};Lt.prototype.concat=function(P){return new Lt(this,P)},Lt.prototype.get=function(P){if(this.bindings[P])return this.bindings[P];if(this.parent)return this.parent.get(P);throw new Error(P+" not found in scope.")},Lt.prototype.has=function(P){return!!this.bindings[P]||!!this.parent&&this.parent.has(P)};var Pt={kind:"null"},Wt={kind:"number"},hr={kind:"string"},vn={kind:"boolean"},Fn={kind:"color"},Jn={kind:"object"},_n={kind:"value"},ia={kind:"collator"},va={kind:"formatted"},_a={kind:"resolvedImage"};function sa(L,P){return{kind:"array",itemType:L,N:P}}function Aa(L){if("array"===L.kind){var P=Aa(L.itemType);return"number"==typeof L.N?"array<"+P+", "+L.N+">":"value"===L.itemType.kind?"array":"array<"+P+">"}return L.kind}var xo=[Pt,Wt,hr,vn,Fn,va,Jn,sa(_n),_a];function Ao(L,P){if("error"===P.kind)return null;if("array"===L.kind){if("array"===P.kind&&(0===P.N&&"value"===P.itemType.kind||!Ao(L.itemType,P.itemType))&&("number"!=typeof L.N||L.N===P.N))return null}else{if(L.kind===P.kind)return null;if("value"===L.kind)for(var B=0,ee=xo;B<ee.length;B+=1)if(!Ao(ee[B],P))return null}return"Expected "+Aa(L)+" but found "+Aa(P)+" instead."}function Io(L,P){return P.some(function(B){return B.kind===L.kind})}function cs(L,P){return P.some(function(B){return"null"===B?null===L:"array"===B?Array.isArray(L):"object"===B?L&&!Array.isArray(L)&&"object"==typeof L:B===typeof L})}var wl=c(function(L,P){var B={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ee(ft){return(ft=Math.round(ft))<0?0:ft>255?255:ft}function me(ft){return ee("%"===ft[ft.length-1]?parseFloat(ft)/100*255:parseInt(ft))}function Te(ft){return function fe(ft){return ft<0?0:ft>1?1:ft}("%"===ft[ft.length-1]?parseFloat(ft)/100:parseFloat(ft))}function Oe(ft,yt,Ft){return Ft<0?Ft+=1:Ft>1&&(Ft-=1),6*Ft<1?ft+(yt-ft)*Ft*6:2*Ft<1?yt:3*Ft<2?ft+(yt-ft)*(2/3-Ft)*6:ft}try{P.parseCSSColor=function $e(ft){var Ft,yt=ft.replace(/ /g,"").toLowerCase();if(yt in B)return B[yt].slice();if("#"===yt[0])return 4===yt.length?(Ft=parseInt(yt.substr(1),16))>=0&&Ft<=4095?[(3840&Ft)>>4|(3840&Ft)>>8,240&Ft|(240&Ft)>>4,15&Ft|(15&Ft)<<4,1]:null:7===yt.length&&(Ft=parseInt(yt.substr(1),16))>=0&&Ft<=16777215?[(16711680&Ft)>>16,(65280&Ft)>>8,255&Ft,1]:null;var tr=yt.indexOf("("),Kt=yt.indexOf(")");if(-1!==tr&&Kt+1===yt.length){var xr=yt.substr(0,tr),Fr=yt.substr(tr+1,Kt-(tr+1)).split(","),fn=1;switch(xr){case"rgba":if(4!==Fr.length)return null;fn=Te(Fr.pop());case"rgb":return 3!==Fr.length?null:[me(Fr[0]),me(Fr[1]),me(Fr[2]),fn];case"hsla":if(4!==Fr.length)return null;fn=Te(Fr.pop());case"hsl":if(3!==Fr.length)return null;var nn=(parseFloat(Fr[0])%360+360)%360/360,Sn=Te(Fr[1]),xn=Te(Fr[2]),Mn=xn<=.5?xn*(Sn+1):xn+Sn-xn*Sn,In=2*xn-Mn;return[ee(255*Oe(In,Mn,nn+1/3)),ee(255*Oe(In,Mn,nn)),ee(255*Oe(In,Mn,nn-1/3)),fn];default:return null}}return null}}catch(ft){}}).parseCSSColor,gi=function(P,B,ee,fe){void 0===fe&&(fe=1),this.r=P,this.g=B,this.b=ee,this.a=fe};gi.parse=function(P){if(P){if(P instanceof gi)return P;if("string"==typeof P){var B=wl(P);if(B)return new gi(B[0]/255*B[3],B[1]/255*B[3],B[2]/255*B[3],B[3])}}},gi.prototype.toString=function(){var P=this.toArray(),ee=P[1],fe=P[2],me=P[3];return"rgba("+Math.round(P[0])+","+Math.round(ee)+","+Math.round(fe)+","+me+")"},gi.prototype.toArray=function(){var P=this,me=P.a;return 0===me?[0,0,0,0]:[255*P.r/me,255*P.g/me,255*P.b/me,me]},gi.black=new gi(0,0,0,1),gi.white=new gi(1,1,1,1),gi.transparent=new gi(0,0,0,0),gi.red=new gi(1,0,0,1);var fs=function(P,B,ee){this.sensitivity=P?B?"variant":"case":B?"accent":"base",this.locale=ee,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};fs.prototype.compare=function(P,B){return this.collator.compare(P,B)},fs.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Hs=function(P,B,ee,fe,me){this.text=P,this.image=B,this.scale=ee,this.fontStack=fe,this.textColor=me},to=function(P){this.sections=P};to.fromString=function(P){return new to([new Hs(P,null,null,null,null)])},to.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(P){return 0!==P.text.length||P.image&&0!==P.image.name.length})},to.factory=function(P){return P instanceof to?P:to.fromString(P)},to.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(P){return P.text}).join("")},to.prototype.serialize=function(){for(var P=["format"],B=0,ee=this.sections;B<ee.length;B+=1){var fe=ee[B];if(fe.image)P.push(["image",fe.image.name]);else{P.push(fe.text);var me={};fe.fontStack&&(me["text-font"]=["literal",fe.fontStack.split(",")]),fe.scale&&(me["font-scale"]=fe.scale),fe.textColor&&(me["text-color"]=["rgba"].concat(fe.textColor.toArray())),P.push(me)}}return P};var Mo=function(P){this.name=P.name,this.available=P.available};function zl(L,P,B,ee){return"number"==typeof L&&L>=0&&L<=255&&"number"==typeof P&&P>=0&&P<=255&&"number"==typeof B&&B>=0&&B<=255?void 0===ee||"number"==typeof ee&&ee>=0&&ee<=1?null:"Invalid rgba value ["+[L,P,B,ee].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof ee?[L,P,B,ee]:[L,P,B]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Uo(L){if(null===L)return!0;if("string"==typeof L)return!0;if("boolean"==typeof L)return!0;if("number"==typeof L)return!0;if(L instanceof gi)return!0;if(L instanceof fs)return!0;if(L instanceof to)return!0;if(L instanceof Mo)return!0;if(Array.isArray(L)){for(var P=0,B=L;P<B.length;P+=1)if(!Uo(B[P]))return!1;return!0}if("object"==typeof L){for(var fe in L)if(!Uo(L[fe]))return!1;return!0}return!1}function ro(L){if(null===L)return Pt;if("string"==typeof L)return hr;if("boolean"==typeof L)return vn;if("number"==typeof L)return Wt;if(L instanceof gi)return Fn;if(L instanceof fs)return ia;if(L instanceof to)return va;if(L instanceof Mo)return _a;if(Array.isArray(L)){for(var B,P=L.length,ee=0,fe=L;ee<fe.length;ee+=1){var Te=ro(fe[ee]);if(B){if(B===Te)continue;B=_n;break}B=Te}return sa(B||_n,P)}return Jn}function Gs(L){var P=typeof L;return null===L?"":"string"===P||"number"===P||"boolean"===P?String(L):L instanceof gi||L instanceof to||L instanceof Mo?L.toString():JSON.stringify(L)}Mo.prototype.toString=function(){return this.name},Mo.fromString=function(P){return P?new Mo({name:P,available:!1}):null},Mo.prototype.serialize=function(){return["image",this.name]};var no=function(P,B){this.type=P,this.value=B};no.parse=function(P,B){if(2!==P.length)return B.error("'literal' expression requires exactly one argument, but found "+(P.length-1)+" instead.");if(!Uo(P[1]))return B.error("invalid value");var ee=P[1],fe=ro(ee),me=B.expectedType;return"array"===fe.kind&&0===fe.N&&me&&"array"===me.kind&&("number"!=typeof me.N||0===me.N)&&(fe=me),new no(fe,ee)},no.prototype.evaluate=function(){return this.value},no.prototype.eachChild=function(){},no.prototype.outputDefined=function(){return!0},no.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof gi?["rgba"].concat(this.value.toArray()):this.value instanceof to?this.value.serialize():this.value};var Mi=function(P){this.name="ExpressionEvaluationError",this.message=P};Mi.prototype.toJSON=function(){return this.message};var So={string:hr,number:Wt,boolean:vn,object:Jn},ao=function(P,B){this.type=P,this.args=B};ao.parse=function(P,B){if(P.length<2)return B.error("Expected at least one argument.");var fe,ee=1,me=P[0];if("array"===me){var Te,$e;if(P.length>2){var Oe=P[1];if("string"!=typeof Oe||!(Oe in So)||"object"===Oe)return B.error('The item type argument of "array" must be one of string, number, boolean',1);Te=So[Oe],ee++}else Te=_n;if(P.length>3){if(null!==P[2]&&("number"!=typeof P[2]||P[2]<0||P[2]!==Math.floor(P[2])))return B.error('The length argument to "array" must be a positive integer literal',2);$e=P[2],ee++}fe=sa(Te,$e)}else fe=So[me];for(var ft=[];ee<P.length;ee++){var yt=B.parse(P[ee],ee,_n);if(!yt)return null;ft.push(yt)}return new ao(fe,ft)},ao.prototype.evaluate=function(P){for(var B=0;B<this.args.length;B++){var ee=this.args[B].evaluate(P);if(!Ao(this.type,ro(ee)))return ee;if(B===this.args.length-1)throw new Mi("Expected value to be of type "+Aa(this.type)+", but found "+Aa(ro(ee))+" instead.")}return null},ao.prototype.eachChild=function(P){this.args.forEach(P)},ao.prototype.outputDefined=function(){return this.args.every(function(P){return P.outputDefined()})},ao.prototype.serialize=function(){var P=this.type,B=[P.kind];if("array"===P.kind){var ee=P.itemType;if("string"===ee.kind||"number"===ee.kind||"boolean"===ee.kind){B.push(ee.kind);var fe=P.N;("number"==typeof fe||this.args.length>1)&&B.push(fe)}}return B.concat(this.args.map(function(me){return me.serialize()}))};var Qo=function(P){this.type=va,this.sections=P};Qo.parse=function(P,B){if(P.length<2)return B.error("Expected at least one argument.");var ee=P[1];if(!Array.isArray(ee)&&"object"==typeof ee)return B.error("First argument must be an image or text section.");for(var fe=[],me=!1,Te=1;Te<=P.length-1;++Te){var Oe=P[Te];if(me&&"object"==typeof Oe&&!Array.isArray(Oe)){me=!1;var $e=null;if(Oe["font-scale"]&&!($e=B.parse(Oe["font-scale"],1,Wt)))return null;var ft=null;if(Oe["text-font"]&&!(ft=B.parse(Oe["text-font"],1,sa(hr))))return null;var yt=null;if(Oe["text-color"]&&!(yt=B.parse(Oe["text-color"],1,Fn)))return null;var Ft=fe[fe.length-1];Ft.scale=$e,Ft.font=ft,Ft.textColor=yt}else{var tr=B.parse(P[Te],1,_n);if(!tr)return null;var Kt=tr.type.kind;if("string"!==Kt&&"value"!==Kt&&"null"!==Kt&&"resolvedImage"!==Kt)return B.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");me=!0,fe.push({content:tr,scale:null,font:null,textColor:null})}}return new Qo(fe)},Qo.prototype.evaluate=function(P){return new to(this.sections.map(function(ee){var fe=ee.content.evaluate(P);return ro(fe)===_a?new Hs("",fe,null,null,null):new Hs(Gs(fe),null,ee.scale?ee.scale.evaluate(P):null,ee.font?ee.font.evaluate(P).join(","):null,ee.textColor?ee.textColor.evaluate(P):null)}))},Qo.prototype.eachChild=function(P){for(var B=0,ee=this.sections;B<ee.length;B+=1){var fe=ee[B];P(fe.content),fe.scale&&P(fe.scale),fe.font&&P(fe.font),fe.textColor&&P(fe.textColor)}},Qo.prototype.outputDefined=function(){return!1},Qo.prototype.serialize=function(){for(var P=["format"],B=0,ee=this.sections;B<ee.length;B+=1){var fe=ee[B];P.push(fe.content.serialize());var me={};fe.scale&&(me["font-scale"]=fe.scale.serialize()),fe.font&&(me["text-font"]=fe.font.serialize()),fe.textColor&&(me["text-color"]=fe.textColor.serialize()),P.push(me)}return P};var Vo=function(P){this.type=_a,this.input=P};Vo.parse=function(P,B){if(2!==P.length)return B.error("Expected two arguments.");var ee=B.parse(P[1],1,hr);return ee?new Vo(ee):B.error("No image name provided.")},Vo.prototype.evaluate=function(P){var B=this.input.evaluate(P),ee=Mo.fromString(B);return ee&&P.availableImages&&(ee.available=P.availableImages.indexOf(B)>-1),ee},Vo.prototype.eachChild=function(P){P(this.input)},Vo.prototype.outputDefined=function(){return!1},Vo.prototype.serialize=function(){return["image",this.input.serialize()]};var Tl={"to-boolean":vn,"to-color":Fn,"to-number":Wt,"to-string":hr},Ho=function(P,B){this.type=P,this.args=B};Ho.parse=function(P,B){if(P.length<2)return B.error("Expected at least one argument.");var ee=P[0];if(("to-boolean"===ee||"to-string"===ee)&&2!==P.length)return B.error("Expected one argument.");for(var fe=Tl[ee],me=[],Te=1;Te<P.length;Te++){var Oe=B.parse(P[Te],Te,_n);if(!Oe)return null;me.push(Oe)}return new Ho(fe,me)},Ho.prototype.evaluate=function(P){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(P));if("color"===this.type.kind){for(var B,ee,fe=0,me=this.args;fe<me.length;fe+=1){if(ee=null,(B=me[fe].evaluate(P))instanceof gi)return B;if("string"==typeof B){var Oe=P.parseColor(B);if(Oe)return Oe}else if(Array.isArray(B)&&!(ee=B.length<3||B.length>4?"Invalid rbga value "+JSON.stringify(B)+": expected an array containing either three or four numeric values.":zl(B[0],B[1],B[2],B[3])))return new gi(B[0]/255,B[1]/255,B[2]/255,B[3])}throw new Mi(ee||"Could not parse color from value '"+("string"==typeof B?B:String(JSON.stringify(B)))+"'")}if("number"===this.type.kind){for(var $e=null,ft=0,yt=this.args;ft<yt.length;ft+=1){if(null===($e=yt[ft].evaluate(P)))return 0;var tr=Number($e);if(!isNaN(tr))return tr}throw new Mi("Could not convert "+JSON.stringify($e)+" to number.")}return"formatted"===this.type.kind?to.fromString(Gs(this.args[0].evaluate(P))):"resolvedImage"===this.type.kind?Mo.fromString(Gs(this.args[0].evaluate(P))):Gs(this.args[0].evaluate(P))},Ho.prototype.eachChild=function(P){this.args.forEach(P)},Ho.prototype.outputDefined=function(){return this.args.every(function(P){return P.outputDefined()})},Ho.prototype.serialize=function(){if("formatted"===this.type.kind)return new Qo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Vo(this.args[0]).serialize();var P=["to-"+this.type.kind];return this.eachChild(function(B){P.push(B.serialize())}),P};var ku=["Unknown","Point","LineString","Polygon"],Zs=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Zs.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Zs.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?ku[this.feature.type]:this.feature.type:null},Zs.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Zs.prototype.canonicalID=function(){return this.canonical},Zs.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Zs.prototype.parseColor=function(P){var B=this._parseColorCache[P];return B||(B=this._parseColorCache[P]=gi.parse(P)),B};var ko=function(P,B,ee,fe){this.name=P,this.type=B,this._evaluate=ee,this.args=fe};ko.prototype.evaluate=function(P){return this._evaluate(P,this.args)},ko.prototype.eachChild=function(P){this.args.forEach(P)},ko.prototype.outputDefined=function(){return!1},ko.prototype.serialize=function(){return[this.name].concat(this.args.map(function(P){return P.serialize()}))},ko.parse=function(P,B){var ee,fe=P[0],me=ko.definitions[fe];if(!me)return B.error('Unknown expression "'+fe+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Te=Array.isArray(me)?me[0]:me.type,Oe=Array.isArray(me)?[[me[1],me[2]]]:me.overloads,$e=Oe.filter(function(Pa){var za=Pa[0];return!Array.isArray(za)||za.length===P.length-1}),ft=null,yt=0,Ft=$e;yt<Ft.length;yt+=1){var tr=Ft[yt],Kt=tr[0],xr=tr[1];ft=new Co(B.registry,B.path,null,B.scope);for(var Fr=[],fn=!1,nn=1;nn<P.length;nn++){var Sn=P[nn],xn=Array.isArray(Kt)?Kt[nn-1]:Kt.type,Mn=ft.parse(Sn,1+Fr.length,xn);if(!Mn){fn=!0;break}Fr.push(Mn)}if(!fn){if(Array.isArray(Kt)&&Kt.length!==Fr.length){ft.error("Expected "+Kt.length+" arguments, but found "+Fr.length+" instead.");continue}for(var In=0;In<Fr.length;In++){var Hn=Array.isArray(Kt)?Kt[In]:Kt.type,oa=Fr[In];ft.concat(In+1).checkSubtype(Hn,oa.type)}if(0===ft.errors.length)return new ko(fe,Te,xr,Fr)}}if(1===$e.length)(ee=B.errors).push.apply(ee,ft.errors);else{for(var Na=($e.length?$e:Oe).map(function(Pa){return function pu(L){return Array.isArray(L)?"("+L.map(Aa).join(", ")+")":"("+Aa(L.type)+"...)"}(Pa[0])}).join(" | "),ba=[],Sa=1;Sa<P.length;Sa++){var ni=B.parse(P[Sa],1+ba.length);if(!ni)return null;ba.push(Aa(ni.type))}B.error("Expected arguments of type "+Na+", but found ("+ba.join(", ")+") instead.")}return null},ko.register=function(P,B){for(var ee in ko.definitions=B,B)P[ee]=ko};var bs=function(P,B,ee){this.type=ia,this.locale=ee,this.caseSensitive=P,this.diacriticSensitive=B};bs.parse=function(P,B){if(2!==P.length)return B.error("Expected one argument.");var ee=P[1];if("object"!=typeof ee||Array.isArray(ee))return B.error("Collator options argument must be an object.");var fe=B.parse(void 0!==ee["case-sensitive"]&&ee["case-sensitive"],1,vn);if(!fe)return null;var me=B.parse(void 0!==ee["diacritic-sensitive"]&&ee["diacritic-sensitive"],1,vn);if(!me)return null;var Te=null;return ee.locale&&!(Te=B.parse(ee.locale,1,hr))?null:new bs(fe,me,Te)},bs.prototype.evaluate=function(P){return new fs(this.caseSensitive.evaluate(P),this.diacriticSensitive.evaluate(P),this.locale?this.locale.evaluate(P):null)},bs.prototype.eachChild=function(P){P(this.caseSensitive),P(this.diacriticSensitive),this.locale&&P(this.locale)},bs.prototype.outputDefined=function(){return!1},bs.prototype.serialize=function(){var P={};return P["case-sensitive"]=this.caseSensitive.serialize(),P["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(P.locale=this.locale.serialize()),["collator",P]};var _s=8192;function Fl(L,P){L[0]=Math.min(L[0],P[0]),L[1]=Math.min(L[1],P[1]),L[2]=Math.max(L[2],P[0]),L[3]=Math.max(L[3],P[1])}function Ys(L,P){return!(L[0]<=P[0]||L[2]>=P[2]||L[1]<=P[1]||L[3]>=P[3])}function Ol(L,P){var B=function Cu(L){return(180+L)/360}(L[0]),ee=function Eu(L){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+L*Math.PI/360)))/360}(L[1]),fe=Math.pow(2,P.z);return[Math.round(B*fe*_s),Math.round(ee*fe*_s)]}function ws(L,P,B){var ee=L[0]-P[0],fe=L[1]-P[1],me=L[0]-B[0],Te=L[1]-B[1];return ee*Te-me*fe==0&&ee*me<=0&&fe*Te<=0}function Kl(L,P,B){return P[1]>L[1]!=B[1]>L[1]&&L[0]<(B[0]-P[0])*(L[1]-P[1])/(B[1]-P[1])+P[0]}function al(L,P){for(var B=!1,ee=0,fe=P.length;ee<fe;ee++)for(var me=P[ee],Te=0,Oe=me.length;Te<Oe-1;Te++){if(ws(L,me[Te],me[Te+1]))return!1;Kl(L,me[Te],me[Te+1])&&(B=!B)}return B}function Ql(L,P){for(var B=0;B<P.length;B++)if(al(L,P[B]))return!0;return!1}function $l(L,P,B,ee){var $e=ee[0]-B[0],ft=ee[1]-B[1],yt=(L[0]-B[0])*ft-$e*(L[1]-B[1]),Ft=(P[0]-B[0])*ft-$e*(P[1]-B[1]);return yt>0&&Ft<0||yt<0&&Ft>0}function Wu(L,P,B,ee){return 0!==function Lu(L,P){return L[0]*P[1]-L[1]*P[0]}([ee[0]-B[0],ee[1]-B[1]],[P[0]-L[0],P[1]-L[1]])&&!(!$l(L,P,B,ee)||!$l(B,ee,L,P))}function Ws(L,P,B){for(var ee=0,fe=B;ee<fe.length;ee+=1)for(var me=fe[ee],Te=0;Te<me.length-1;++Te)if(Wu(L,P,me[Te],me[Te+1]))return!0;return!1}function Nl(L,P){for(var B=0;B<L.length;++B)if(!al(L[B],P))return!1;for(var ee=0;ee<L.length-1;++ee)if(Ws(L[ee],L[ee+1],P))return!1;return!0}function Al(L,P){for(var B=0;B<P.length;B++)if(Nl(L,P[B]))return!0;return!1}function il(L,P,B){for(var ee=[],fe=0;fe<L.length;fe++){for(var me=[],Te=0;Te<L[fe].length;Te++){var Oe=Ol(L[fe][Te],B);Fl(P,Oe),me.push(Oe)}ee.push(me)}return ee}function Ml(L,P,B){for(var ee=[],fe=0;fe<L.length;fe++){var me=il(L[fe],P,B);ee.push(me)}return ee}function ql(L,P,B,ee){if(L[0]<B[0]||L[0]>B[2]){var fe=.5*ee,me=L[0]-B[0]>fe?-ee:B[0]-L[0]>fe?ee:0;0===me&&(me=L[0]-B[2]>fe?-ee:B[2]-L[0]>fe?ee:0),L[0]+=me}Fl(P,L)}function du(L,P,B,ee){for(var fe=Math.pow(2,ee.z)*_s,me=[ee.x*_s,ee.y*_s],Te=[],Oe=0,$e=L;Oe<$e.length;Oe+=1)for(var yt=0,Ft=$e[Oe];yt<Ft.length;yt+=1){var tr=Ft[yt],Kt=[tr.x+me[0],tr.y+me[1]];ql(Kt,P,B,fe),Te.push(Kt)}return Te}function eu(L,P,B,ee){for(var fe=Math.pow(2,ee.z)*_s,me=[ee.x*_s,ee.y*_s],Te=[],Oe=0,$e=L;Oe<$e.length;Oe+=1){for(var yt=[],Ft=0,tr=$e[Oe];Ft<tr.length;Ft+=1){var Kt=tr[Ft],xr=[Kt.x+me[0],Kt.y+me[1]];Fl(P,xr),yt.push(xr)}Te.push(yt)}if(P[2]-P[0]<=fe/2){!function Xs(L){L[0]=L[1]=1/0,L[2]=L[3]=-1/0}(P);for(var Fr=0,fn=Te;Fr<fn.length;Fr+=1)for(var Sn=0,xn=fn[Fr];Sn<xn.length;Sn+=1)ql(xn[Sn],P,B,fe)}return Te}var Go=function(P,B){this.type=vn,this.geojson=P,this.geometries=B};function Sl(L){if(L instanceof ko){if("get"===L.name&&1===L.args.length)return!1;if("feature-state"===L.name)return!1;if("has"===L.name&&1===L.args.length)return!1;if("properties"===L.name||"geometry-type"===L.name||"id"===L.name)return!1;if(/^filter-/.test(L.name))return!1}if(L instanceof Go)return!1;var P=!0;return L.eachChild(function(B){P&&!Sl(B)&&(P=!1)}),P}function ol(L){if(L instanceof ko&&"feature-state"===L.name)return!1;var P=!0;return L.eachChild(function(B){P&&!ol(B)&&(P=!1)}),P}function tu(L,P){if(L instanceof ko&&P.indexOf(L.name)>=0)return!1;var B=!0;return L.eachChild(function(ee){B&&!tu(ee,P)&&(B=!1)}),B}Go.parse=function(P,B){if(2!==P.length)return B.error("'within' expression requires exactly one argument, but found "+(P.length-1)+" instead.");if(Uo(P[1])){var ee=P[1];if("FeatureCollection"===ee.type)for(var fe=0;fe<ee.features.length;++fe){var me=ee.features[fe].geometry.type;if("Polygon"===me||"MultiPolygon"===me)return new Go(ee,ee.features[fe].geometry)}else if("Feature"===ee.type){var Te=ee.geometry.type;if("Polygon"===Te||"MultiPolygon"===Te)return new Go(ee,ee.geometry)}else if("Polygon"===ee.type||"MultiPolygon"===ee.type)return new Go(ee,ee)}return B.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Go.prototype.evaluate=function(P){if(null!=P.geometry()&&null!=P.canonicalID()){if("Point"===P.geometryType())return function Pu(L,P){var B=[1/0,1/0,-1/0,-1/0],ee=[1/0,1/0,-1/0,-1/0],fe=L.canonicalID();if("Polygon"===P.type){var me=il(P.coordinates,ee,fe),Te=du(L.geometry(),B,ee,fe);if(!Ys(B,ee))return!1;for(var Oe=0,$e=Te;Oe<$e.length;Oe+=1)if(!al($e[Oe],me))return!1}if("MultiPolygon"===P.type){var yt=Ml(P.coordinates,ee,fe),Ft=du(L.geometry(),B,ee,fe);if(!Ys(B,ee))return!1;for(var tr=0,Kt=Ft;tr<Kt.length;tr+=1)if(!Ql(Kt[tr],yt))return!1}return!0}(P,this.geometries);if("LineString"===P.geometryType())return function gu(L,P){var B=[1/0,1/0,-1/0,-1/0],ee=[1/0,1/0,-1/0,-1/0],fe=L.canonicalID();if("Polygon"===P.type){var me=il(P.coordinates,ee,fe),Te=eu(L.geometry(),B,ee,fe);if(!Ys(B,ee))return!1;for(var Oe=0,$e=Te;Oe<$e.length;Oe+=1)if(!Nl($e[Oe],me))return!1}if("MultiPolygon"===P.type){var yt=Ml(P.coordinates,ee,fe),Ft=eu(L.geometry(),B,ee,fe);if(!Ys(B,ee))return!1;for(var tr=0,Kt=Ft;tr<Kt.length;tr+=1)if(!Al(Kt[tr],yt))return!1}return!0}(P,this.geometries)}return!1},Go.prototype.eachChild=function(){},Go.prototype.outputDefined=function(){return!0},Go.prototype.serialize=function(){return["within",this.geojson]};var ns=function(P,B){this.type=B.type,this.name=P,this.boundExpression=B};ns.parse=function(P,B){if(2!==P.length||"string"!=typeof P[1])return B.error("'var' expression requires exactly one string literal argument.");var ee=P[1];return B.scope.has(ee)?new ns(ee,B.scope.get(ee)):B.error('Unknown variable "'+ee+'". Make sure "'+ee+'" has been bound in an enclosing "let" expression before using it.',1)},ns.prototype.evaluate=function(P){return this.boundExpression.evaluate(P)},ns.prototype.eachChild=function(){},ns.prototype.outputDefined=function(){return!1},ns.prototype.serialize=function(){return["var",this.name]};var Co=function(P,B,ee,fe,me){void 0===B&&(B=[]),void 0===fe&&(fe=new Lt),void 0===me&&(me=[]),this.registry=P,this.path=B,this.key=B.map(function(Te){return"["+Te+"]"}).join(""),this.scope=fe,this.errors=me,this.expectedType=ee};function Bl(L){if(L instanceof ns)return Bl(L.boundExpression);if(L instanceof ko&&"error"===L.name)return!1;if(L instanceof bs)return!1;if(L instanceof Go)return!1;var P=L instanceof Ho||L instanceof ao,B=!0;return L.eachChild(function(ee){B=P?B&&Bl(ee):B&&ee instanceof no}),!!B&&Sl(L)&&tu(L,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ls(L,P){for(var Te,B=L.length-1,ee=0,fe=B,me=0;ee<=fe;)if((Te=L[me=Math.floor((ee+fe)/2)])<=P){if(me===B||P<L[me+1])return me;ee=me+1}else{if(!(Te>P))throw new Mi("Input is not a number.");fe=me-1}return 0}Co.prototype.parse=function(P,B,ee,fe,me){return void 0===me&&(me={}),B?this.concat(B,ee,fe)._parse(P,me):this._parse(P,me)},Co.prototype._parse=function(P,B){function ee(yt,Ft,tr){return"assert"===tr?new ao(Ft,[yt]):"coerce"===tr?new Ho(Ft,[yt]):yt}if((null===P||"string"==typeof P||"boolean"==typeof P||"number"==typeof P)&&(P=["literal",P]),Array.isArray(P)){if(0===P.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var fe=P[0];if("string"!=typeof fe)return this.error("Expression name must be a string, but found "+typeof fe+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var me=this.registry[fe];if(me){var Te=me.parse(P,this);if(!Te)return null;if(this.expectedType){var Oe=this.expectedType,$e=Te.type;if("string"!==Oe.kind&&"number"!==Oe.kind&&"boolean"!==Oe.kind&&"object"!==Oe.kind&&"array"!==Oe.kind||"value"!==$e.kind)if("color"!==Oe.kind&&"formatted"!==Oe.kind&&"resolvedImage"!==Oe.kind||"value"!==$e.kind&&"string"!==$e.kind){if(this.checkSubtype(Oe,$e))return null}else Te=ee(Te,Oe,B.typeAnnotation||"coerce");else Te=ee(Te,Oe,B.typeAnnotation||"assert")}if(!(Te instanceof no)&&"resolvedImage"!==Te.type.kind&&Bl(Te)){var ft=new Zs;try{Te=new no(Te.type,Te.evaluate(ft))}catch(yt){return this.error(yt.message),null}}return Te}return this.error('Unknown expression "'+fe+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===P?"'undefined' value invalid. Use null instead.":"object"==typeof P?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof P+" instead.")},Co.prototype.concat=function(P,B,ee){var fe="number"==typeof P?this.path.concat(P):this.path,me=ee?this.scope.concat(ee):this.scope;return new Co(this.registry,fe,B||null,me,this.errors)},Co.prototype.error=function(P){for(var B=[],ee=arguments.length-1;ee-- >0;)B[ee]=arguments[ee+1];var fe=""+this.key+B.map(function(me){return"["+me+"]"}).join("");this.errors.push(new Rt(fe,P))},Co.prototype.checkSubtype=function(P,B){var ee=Ao(P,B);return ee&&this.error(ee),ee};var Ts=function(P,B,ee){this.type=P,this.input=B,this.labels=[],this.outputs=[];for(var fe=0,me=ee;fe<me.length;fe+=1){var Te=me[fe],$e=Te[1];this.labels.push(Te[0]),this.outputs.push($e)}};function co(L,P,B){return L*(1-B)+P*B}Ts.parse=function(P,B){if(P.length-1<4)return B.error("Expected at least 4 arguments, but found only "+(P.length-1)+".");if((P.length-1)%2!=0)return B.error("Expected an even number of arguments.");var ee=B.parse(P[1],1,Wt);if(!ee)return null;var fe=[],me=null;B.expectedType&&"value"!==B.expectedType.kind&&(me=B.expectedType);for(var Te=1;Te<P.length;Te+=2){var Oe=1===Te?-1/0:P[Te],$e=P[Te+1],ft=Te,yt=Te+1;if("number"!=typeof Oe)return B.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ft);if(fe.length&&fe[fe.length-1][0]>=Oe)return B.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ft);var Ft=B.parse($e,yt,me);if(!Ft)return null;me=me||Ft.type,fe.push([Oe,Ft])}return new Ts(me,ee,fe)},Ts.prototype.evaluate=function(P){var B=this.labels,ee=this.outputs;if(1===B.length)return ee[0].evaluate(P);var fe=this.input.evaluate(P);if(fe<=B[0])return ee[0].evaluate(P);var me=B.length;return fe>=B[me-1]?ee[me-1].evaluate(P):ee[Ls(B,fe)].evaluate(P)},Ts.prototype.eachChild=function(P){P(this.input);for(var B=0,ee=this.outputs;B<ee.length;B+=1)P(ee[B])},Ts.prototype.outputDefined=function(){return this.outputs.every(function(P){return P.outputDefined()})},Ts.prototype.serialize=function(){for(var P=["step",this.input.serialize()],B=0;B<this.labels.length;B++)B>0&&P.push(this.labels[B]),P.push(this.outputs[B].serialize());return P};var ru=Object.freeze({__proto__:null,number:co,color:function sl(L,P,B){return new gi(co(L.r,P.r,B),co(L.g,P.g,B),co(L.b,P.b,B),co(L.a,P.a,B))},array:function Du(L,P,B){return L.map(function(ee,fe){return co(ee,P[fe],B)})}}),Zo=4/29,kl=6/29,ll=3*kl*kl,as=Math.PI/180,zu=180/Math.PI;function nu(L){return L>.008856451679035631?Math.pow(L,1/3):L/ll+Zo}function ul(L){return L>kl?L*L*L:ll*(L-Zo)}function au(L){return 255*(L<=.0031308?12.92*L:1.055*Math.pow(L,1/2.4)-.055)}function Cl(L){return(L/=255)<=.04045?L/12.92:Math.pow((L+.055)/1.055,2.4)}function El(L){var P=Cl(L.r),B=Cl(L.g),ee=Cl(L.b),fe=nu((.4124564*P+.3575761*B+.1804375*ee)/.95047),me=nu((.2126729*P+.7151522*B+.072175*ee)/1);return{l:116*me-16,a:500*(fe-me),b:200*(me-nu((.0193339*P+.119192*B+.9503041*ee)/1.08883)),alpha:L.a}}function Ul(L){var P=(L.l+16)/116,B=isNaN(L.a)?P:P+L.a/500,ee=isNaN(L.b)?P:P-L.b/200;return P=1*ul(P),B=.95047*ul(B),ee=1.08883*ul(ee),new gi(au(3.2404542*B-1.5371385*P-.4985314*ee),au(-.969266*B+1.8760108*P+.041556*ee),au(.0556434*B-.2040259*P+1.0572252*ee),L.alpha)}function cl(L,P,B){var ee=P-L;return L+B*(ee>180||ee<-180?ee-360*Math.round(ee/360):ee)}var is={forward:El,reverse:Ul,interpolate:function Vl(L,P,B){return{l:co(L.l,P.l,B),a:co(L.a,P.a,B),b:co(L.b,P.b,B),alpha:co(L.alpha,P.alpha,B)}}},vs={forward:function Xu(L){var P=El(L),B=P.l,ee=P.a,fe=P.b,me=Math.atan2(fe,ee)*zu;return{h:me<0?me+360:me,c:Math.sqrt(ee*ee+fe*fe),l:B,alpha:L.a}},reverse:function Ui(L){var P=L.h*as,B=L.c;return Ul({l:L.l,a:Math.cos(P)*B,b:Math.sin(P)*B,alpha:L.alpha})},interpolate:function js(L,P,B){return{h:cl(L.h,P.h,B),c:co(L.c,P.c,B),l:co(L.l,P.l,B),alpha:co(L.alpha,P.alpha,B)}}},Hl=Object.freeze({__proto__:null,lab:is,hcl:vs}),uo=function(P,B,ee,fe,me){this.type=P,this.operator=B,this.interpolation=ee,this.input=fe,this.labels=[],this.outputs=[];for(var Te=0,Oe=me;Te<Oe.length;Te+=1){var $e=Oe[Te],yt=$e[1];this.labels.push($e[0]),this.outputs.push(yt)}};function iu(L,P,B,ee){var fe=ee-B,me=L-B;return 0===fe?0:1===P?me/fe:(Math.pow(P,me)-1)/(Math.pow(P,fe)-1)}uo.interpolationFactor=function(P,B,ee,fe){var me=0;if("exponential"===P.name)me=iu(B,P.base,ee,fe);else if("linear"===P.name)me=iu(B,1,ee,fe);else if("cubic-bezier"===P.name){var Te=P.controlPoints;me=new n(Te[0],Te[1],Te[2],Te[3]).solve(iu(B,1,ee,fe))}return me},uo.parse=function(P,B){var ee=P[0],fe=P[1],me=P[2],Te=P.slice(3);if(!Array.isArray(fe)||0===fe.length)return B.error("Expected an interpolation type expression.",1);if("linear"===fe[0])fe={name:"linear"};else if("exponential"===fe[0]){var Oe=fe[1];if("number"!=typeof Oe)return B.error("Exponential interpolation requires a numeric base.",1,1);fe={name:"exponential",base:Oe}}else{if("cubic-bezier"!==fe[0])return B.error("Unknown interpolation type "+String(fe[0]),1,0);var $e=fe.slice(1);if(4!==$e.length||$e.some(function(nn){return"number"!=typeof nn||nn<0||nn>1}))return B.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);fe={name:"cubic-bezier",controlPoints:$e}}if(P.length-1<4)return B.error("Expected at least 4 arguments, but found only "+(P.length-1)+".");if((P.length-1)%2!=0)return B.error("Expected an even number of arguments.");if(!(me=B.parse(me,2,Wt)))return null;var ft=[],yt=null;"interpolate-hcl"===ee||"interpolate-lab"===ee?yt=Fn:B.expectedType&&"value"!==B.expectedType.kind&&(yt=B.expectedType);for(var Ft=0;Ft<Te.length;Ft+=2){var tr=Te[Ft],Kt=Te[Ft+1],xr=Ft+3,Fr=Ft+4;if("number"!=typeof tr)return B.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',xr);if(ft.length&&ft[ft.length-1][0]>=tr)return B.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',xr);var fn=B.parse(Kt,Fr,yt);if(!fn)return null;yt=yt||fn.type,ft.push([tr,fn])}return"number"===yt.kind||"color"===yt.kind||"array"===yt.kind&&"number"===yt.itemType.kind&&"number"==typeof yt.N?new uo(yt,ee,fe,me,ft):B.error("Type "+Aa(yt)+" is not interpolatable.")},uo.prototype.evaluate=function(P){var B=this.labels,ee=this.outputs;if(1===B.length)return ee[0].evaluate(P);var fe=this.input.evaluate(P);if(fe<=B[0])return ee[0].evaluate(P);var me=B.length;if(fe>=B[me-1])return ee[me-1].evaluate(P);var Te=Ls(B,fe),ft=uo.interpolationFactor(this.interpolation,fe,B[Te],B[Te+1]),yt=ee[Te].evaluate(P),Ft=ee[Te+1].evaluate(P);return"interpolate"===this.operator?ru[this.type.kind.toLowerCase()](yt,Ft,ft):"interpolate-hcl"===this.operator?vs.reverse(vs.interpolate(vs.forward(yt),vs.forward(Ft),ft)):is.reverse(is.interpolate(is.forward(yt),is.forward(Ft),ft))},uo.prototype.eachChild=function(P){P(this.input);for(var B=0,ee=this.outputs;B<ee.length;B+=1)P(ee[B])},uo.prototype.outputDefined=function(){return this.outputs.every(function(P){return P.outputDefined()})},uo.prototype.serialize=function(){var P;P="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var B=[this.operator,P,this.input.serialize()],ee=0;ee<this.labels.length;ee++)B.push(this.labels[ee],this.outputs[ee].serialize());return B};var $o=function(P,B){this.type=P,this.args=B};$o.parse=function(P,B){if(P.length<2)return B.error("Expectected at least one argument.");var ee=null,fe=B.expectedType;fe&&"value"!==fe.kind&&(ee=fe);for(var me=[],Te=0,Oe=P.slice(1);Te<Oe.length;Te+=1){var ft=B.parse(Oe[Te],1+me.length,ee,void 0,{typeAnnotation:"omit"});if(!ft)return null;ee=ee||ft.type,me.push(ft)}var yt=fe&&me.some(function(Ft){return Ao(fe,Ft.type)});return new $o(yt?_n:ee,me)},$o.prototype.evaluate=function(P){for(var fe,B=null,ee=0,me=0,Te=this.args;me<Te.length&&(ee++,(B=Te[me].evaluate(P))&&B instanceof Mo&&!B.available&&(fe||(fe=B.name),B=null,ee===this.args.length&&(B=fe)),null===B);me+=1);return B},$o.prototype.eachChild=function(P){this.args.forEach(P)},$o.prototype.outputDefined=function(){return this.args.every(function(P){return P.outputDefined()})},$o.prototype.serialize=function(){var P=["coalesce"];return this.eachChild(function(B){P.push(B.serialize())}),P};var Ps=function(P,B){this.type=B.type,this.bindings=[].concat(P),this.result=B};Ps.prototype.evaluate=function(P){return this.result.evaluate(P)},Ps.prototype.eachChild=function(P){for(var B=0,ee=this.bindings;B<ee.length;B+=1)P(ee[B][1]);P(this.result)},Ps.parse=function(P,B){if(P.length<4)return B.error("Expected at least 3 arguments, but found "+(P.length-1)+" instead.");for(var ee=[],fe=1;fe<P.length-1;fe+=2){var me=P[fe];if("string"!=typeof me)return B.error("Expected string, but found "+typeof me+" instead.",fe);if(/[^a-zA-Z0-9_]/.test(me))return B.error("Variable names must contain only alphanumeric characters or '_'.",fe);var Te=B.parse(P[fe+1],fe+1);if(!Te)return null;ee.push([me,Te])}var Oe=B.parse(P[P.length-1],P.length-1,B.expectedType,ee);return Oe?new Ps(ee,Oe):null},Ps.prototype.outputDefined=function(){return this.result.outputDefined()},Ps.prototype.serialize=function(){for(var P=["let"],B=0,ee=this.bindings;B<ee.length;B+=1){var fe=ee[B];P.push(fe[0],fe[1].serialize())}return P.push(this.result.serialize()),P};var Js=function(P,B,ee){this.type=P,this.index=B,this.input=ee};Js.parse=function(P,B){if(3!==P.length)return B.error("Expected 2 arguments, but found "+(P.length-1)+" instead.");var ee=B.parse(P[1],1,Wt),fe=B.parse(P[2],2,sa(B.expectedType||_n));return ee&&fe?new Js(fe.type.itemType,ee,fe):null},Js.prototype.evaluate=function(P){var B=this.index.evaluate(P),ee=this.input.evaluate(P);if(B<0)throw new Mi("Array index out of bounds: "+B+" < 0.");if(B>=ee.length)throw new Mi("Array index out of bounds: "+B+" > "+(ee.length-1)+".");if(B!==Math.floor(B))throw new Mi("Array index must be an integer, but found "+B+" instead.");return ee[B]},Js.prototype.eachChild=function(P){P(this.index),P(this.input)},Js.prototype.outputDefined=function(){return!1},Js.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Ds=function(P,B){this.type=vn,this.needle=P,this.haystack=B};Ds.parse=function(P,B){if(3!==P.length)return B.error("Expected 2 arguments, but found "+(P.length-1)+" instead.");var ee=B.parse(P[1],1,_n),fe=B.parse(P[2],2,_n);return ee&&fe?Io(ee.type,[vn,hr,Wt,Pt,_n])?new Ds(ee,fe):B.error("Expected first argument to be of type boolean, string, number or null, but found "+Aa(ee.type)+" instead"):null},Ds.prototype.evaluate=function(P){var B=this.needle.evaluate(P),ee=this.haystack.evaluate(P);if(!ee)return!1;if(!cs(B,["boolean","string","number","null"]))throw new Mi("Expected first argument to be of type boolean, string, number or null, but found "+Aa(ro(B))+" instead.");if(!cs(ee,["string","array"]))throw new Mi("Expected second argument to be of type array or string, but found "+Aa(ro(ee))+" instead.");return ee.indexOf(B)>=0},Ds.prototype.eachChild=function(P){P(this.needle),P(this.haystack)},Ds.prototype.outputDefined=function(){return!0},Ds.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ps=function(P,B,ee){this.type=Wt,this.needle=P,this.haystack=B,this.fromIndex=ee};ps.parse=function(P,B){if(P.length<=2||P.length>=5)return B.error("Expected 3 or 4 arguments, but found "+(P.length-1)+" instead.");var ee=B.parse(P[1],1,_n),fe=B.parse(P[2],2,_n);if(!ee||!fe)return null;if(!Io(ee.type,[vn,hr,Wt,Pt,_n]))return B.error("Expected first argument to be of type boolean, string, number or null, but found "+Aa(ee.type)+" instead");if(4===P.length){var me=B.parse(P[3],3,Wt);return me?new ps(ee,fe,me):null}return new ps(ee,fe)},ps.prototype.evaluate=function(P){var B=this.needle.evaluate(P),ee=this.haystack.evaluate(P);if(!cs(B,["boolean","string","number","null"]))throw new Mi("Expected first argument to be of type boolean, string, number or null, but found "+Aa(ro(B))+" instead.");if(!cs(ee,["string","array"]))throw new Mi("Expected second argument to be of type array or string, but found "+Aa(ro(ee))+" instead.");if(this.fromIndex){var fe=this.fromIndex.evaluate(P);return ee.indexOf(B,fe)}return ee.indexOf(B)},ps.prototype.eachChild=function(P){P(this.needle),P(this.haystack),this.fromIndex&&P(this.fromIndex)},ps.prototype.outputDefined=function(){return!1},ps.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var P=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),P]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ji=function(P,B,ee,fe,me,Te){this.inputType=P,this.type=B,this.input=ee,this.cases=fe,this.outputs=me,this.otherwise=Te};Ji.parse=function(P,B){if(P.length<5)return B.error("Expected at least 4 arguments, but found only "+(P.length-1)+".");if(P.length%2!=1)return B.error("Expected an even number of arguments.");var ee,fe;B.expectedType&&"value"!==B.expectedType.kind&&(fe=B.expectedType);for(var me={},Te=[],Oe=2;Oe<P.length-1;Oe+=2){var $e=P[Oe],ft=P[Oe+1];Array.isArray($e)||($e=[$e]);var yt=B.concat(Oe);if(0===$e.length)return yt.error("Expected at least one branch label.");for(var Ft=0,tr=$e;Ft<tr.length;Ft+=1){var Kt=tr[Ft];if("number"!=typeof Kt&&"string"!=typeof Kt)return yt.error("Branch labels must be numbers or strings.");if("number"==typeof Kt&&Math.abs(Kt)>Number.MAX_SAFE_INTEGER)return yt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof Kt&&Math.floor(Kt)!==Kt)return yt.error("Numeric branch labels must be integer values.");if(ee){if(yt.checkSubtype(ee,ro(Kt)))return null}else ee=ro(Kt);if(void 0!==me[String(Kt)])return yt.error("Branch labels must be unique.");me[String(Kt)]=Te.length}var xr=B.parse(ft,Oe,fe);if(!xr)return null;fe=fe||xr.type,Te.push(xr)}var Fr=B.parse(P[1],1,_n);if(!Fr)return null;var fn=B.parse(P[P.length-1],P.length-1,fe);return!fn||"value"!==Fr.type.kind&&B.concat(1).checkSubtype(ee,Fr.type)?null:new Ji(ee,fe,Fr,me,Te,fn)},Ji.prototype.evaluate=function(P){var B=this.input.evaluate(P);return(ro(B)===this.inputType&&this.outputs[this.cases[B]]||this.otherwise).evaluate(P)},Ji.prototype.eachChild=function(P){P(this.input),this.outputs.forEach(P),P(this.otherwise)},Ji.prototype.outputDefined=function(){return this.outputs.every(function(P){return P.outputDefined()})&&this.otherwise.outputDefined()},Ji.prototype.serialize=function(){for(var P=this,B=["match",this.input.serialize()],fe=[],me={},Te=0,Oe=Object.keys(this.cases).sort();Te<Oe.length;Te+=1){var $e=Oe[Te];void 0===(ft=me[this.cases[$e]])?(me[this.cases[$e]]=fe.length,fe.push([this.cases[$e],[$e]])):fe[ft][1].push($e)}for(var yt=function(Fr){return"number"===P.inputType.kind?Number(Fr):Fr},Ft=0,tr=fe;Ft<tr.length;Ft+=1){var Kt=tr[Ft],ft=Kt[0],xr=Kt[1];B.push(1===xr.length?yt(xr[0]):xr.map(yt)),B.push(this.outputs[outputIndex$1].serialize())}return B.push(this.otherwise.serialize()),B};var bo=function(P,B,ee){this.type=P,this.branches=B,this.otherwise=ee};bo.parse=function(P,B){if(P.length<4)return B.error("Expected at least 3 arguments, but found only "+(P.length-1)+".");if(P.length%2!=0)return B.error("Expected an odd number of arguments.");var ee;B.expectedType&&"value"!==B.expectedType.kind&&(ee=B.expectedType);for(var fe=[],me=1;me<P.length-1;me+=2){var Te=B.parse(P[me],me,vn);if(!Te)return null;var Oe=B.parse(P[me+1],me+1,ee);if(!Oe)return null;fe.push([Te,Oe]),ee=ee||Oe.type}var $e=B.parse(P[P.length-1],P.length-1,ee);return $e?new bo(ee,fe,$e):null},bo.prototype.evaluate=function(P){for(var B=0,ee=this.branches;B<ee.length;B+=1){var fe=ee[B],Te=fe[1];if(fe[0].evaluate(P))return Te.evaluate(P)}return this.otherwise.evaluate(P)},bo.prototype.eachChild=function(P){for(var B=0,ee=this.branches;B<ee.length;B+=1){var fe=ee[B],Te=fe[1];P(fe[0]),P(Te)}P(this.otherwise)},bo.prototype.outputDefined=function(){return this.branches.every(function(P){return P[1].outputDefined()})&&this.otherwise.outputDefined()},bo.prototype.serialize=function(){var P=["case"];return this.eachChild(function(B){P.push(B.serialize())}),P};var Yo=function(P,B,ee,fe){this.type=P,this.input=B,this.beginIndex=ee,this.endIndex=fe};function Gl(L,P){return"=="===L||"!="===L?"boolean"===P.kind||"string"===P.kind||"number"===P.kind||"null"===P.kind||"value"===P.kind:"string"===P.kind||"number"===P.kind||"value"===P.kind}function zr(L,P,B,ee){return 0===ee.compare(P,B)}function mn(L,P,B){var ee="=="!==L&&"!="!==L;return function(){function fe(me,Te,Oe){this.type=vn,this.lhs=me,this.rhs=Te,this.collator=Oe,this.hasUntypedArgument="value"===me.type.kind||"value"===Te.type.kind}return fe.parse=function(Te,Oe){if(3!==Te.length&&4!==Te.length)return Oe.error("Expected two or three arguments.");var $e=Te[0],ft=Oe.parse(Te[1],1,_n);if(!ft)return null;if(!Gl($e,ft.type))return Oe.concat(1).error('"'+$e+"\" comparisons are not supported for type '"+Aa(ft.type)+"'.");var yt=Oe.parse(Te[2],2,_n);if(!yt)return null;if(!Gl($e,yt.type))return Oe.concat(2).error('"'+$e+"\" comparisons are not supported for type '"+Aa(yt.type)+"'.");if(ft.type.kind!==yt.type.kind&&"value"!==ft.type.kind&&"value"!==yt.type.kind)return Oe.error("Cannot compare types '"+Aa(ft.type)+"' and '"+Aa(yt.type)+"'.");ee&&("value"===ft.type.kind&&"value"!==yt.type.kind?ft=new ao(yt.type,[ft]):"value"!==ft.type.kind&&"value"===yt.type.kind&&(yt=new ao(ft.type,[yt])));var Ft=null;if(4===Te.length){if("string"!==ft.type.kind&&"string"!==yt.type.kind&&"value"!==ft.type.kind&&"value"!==yt.type.kind)return Oe.error("Cannot use collator to compare non-string types.");if(!(Ft=Oe.parse(Te[3],3,ia)))return null}return new fe(ft,yt,Ft)},fe.prototype.evaluate=function(Te){var Oe=this.lhs.evaluate(Te),$e=this.rhs.evaluate(Te);if(ee&&this.hasUntypedArgument){var ft=ro(Oe),yt=ro($e);if(ft.kind!==yt.kind||"string"!==ft.kind&&"number"!==ft.kind)throw new Mi('Expected arguments for "'+L+'" to be (string, string) or (number, number), but found ('+ft.kind+", "+yt.kind+") instead.")}if(this.collator&&!ee&&this.hasUntypedArgument){var Ft=ro(Oe),tr=ro($e);if("string"!==Ft.kind||"string"!==tr.kind)return P(Te,Oe,$e)}return this.collator?B(Te,Oe,$e,this.collator.evaluate(Te)):P(Te,Oe,$e)},fe.prototype.eachChild=function(Te){Te(this.lhs),Te(this.rhs),this.collator&&Te(this.collator)},fe.prototype.outputDefined=function(){return!0},fe.prototype.serialize=function(){var Te=[L];return this.eachChild(function(Oe){Te.push(Oe.serialize())}),Te},fe}()}Yo.parse=function(P,B){if(P.length<=2||P.length>=5)return B.error("Expected 3 or 4 arguments, but found "+(P.length-1)+" instead.");var ee=B.parse(P[1],1,_n),fe=B.parse(P[2],2,Wt);if(!ee||!fe)return null;if(!Io(ee.type,[sa(_n),hr,_n]))return B.error("Expected first argument to be of type array or string, but found "+Aa(ee.type)+" instead");if(4===P.length){var me=B.parse(P[3],3,Wt);return me?new Yo(ee.type,ee,fe,me):null}return new Yo(ee.type,ee,fe)},Yo.prototype.evaluate=function(P){var B=this.input.evaluate(P),ee=this.beginIndex.evaluate(P);if(!cs(B,["string","array"]))throw new Mi("Expected first argument to be of type array or string, but found "+Aa(ro(B))+" instead.");if(this.endIndex){var fe=this.endIndex.evaluate(P);return B.slice(ee,fe)}return B.slice(ee)},Yo.prototype.eachChild=function(P){P(this.input),P(this.beginIndex),this.endIndex&&P(this.endIndex)},Yo.prototype.outputDefined=function(){return!1},Yo.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var P=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),P]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var zn=mn("==",function Zl(L,P,B){return P===B},zr),Pn=mn("!=",function yu(L,P,B){return P!==B},function un(L,P,B,ee){return!zr(0,P,B,ee)}),Vn=mn("<",function mt(L,P,B){return P<B},function yn(L,P,B,ee){return ee.compare(P,B)<0}),ea=mn(">",function Ot(L,P,B){return P>B},function Tn(L,P,B,ee){return ee.compare(P,B)>0}),Ha=mn("<=",function vr(L,P,B){return P<=B},function En(L,P,B,ee){return ee.compare(P,B)<=0}),Ea=mn(">=",function sr(L,P,B){return P>=B},function Bn(L,P,B,ee){return ee.compare(P,B)>=0}),Fa=function(P,B,ee,fe,me){this.type=hr,this.number=P,this.locale=B,this.currency=ee,this.minFractionDigits=fe,this.maxFractionDigits=me};Fa.parse=function(P,B){if(3!==P.length)return B.error("Expected two arguments.");var ee=B.parse(P[1],1,Wt);if(!ee)return null;var fe=P[2];if("object"!=typeof fe||Array.isArray(fe))return B.error("NumberFormat options argument must be an object.");var me=null;if(fe.locale&&!(me=B.parse(fe.locale,1,hr)))return null;var Te=null;if(fe.currency&&!(Te=B.parse(fe.currency,1,hr)))return null;var Oe=null;if(fe["min-fraction-digits"]&&!(Oe=B.parse(fe["min-fraction-digits"],1,Wt)))return null;var $e=null;return fe["max-fraction-digits"]&&!($e=B.parse(fe["max-fraction-digits"],1,Wt))?null:new Fa(ee,me,Te,Oe,$e)},Fa.prototype.evaluate=function(P){return new Intl.NumberFormat(this.locale?this.locale.evaluate(P):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(P):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(P):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(P):void 0}).format(this.number.evaluate(P))},Fa.prototype.eachChild=function(P){P(this.number),this.locale&&P(this.locale),this.currency&&P(this.currency),this.minFractionDigits&&P(this.minFractionDigits),this.maxFractionDigits&&P(this.maxFractionDigits)},Fa.prototype.outputDefined=function(){return!1},Fa.prototype.serialize=function(){var P={};return this.locale&&(P.locale=this.locale.serialize()),this.currency&&(P.currency=this.currency.serialize()),this.minFractionDigits&&(P["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(P["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),P]};var Ba=function(P){this.type=Wt,this.input=P};Ba.parse=function(P,B){if(2!==P.length)return B.error("Expected 1 argument, but found "+(P.length-1)+" instead.");var ee=B.parse(P[1],1);return ee?"array"!==ee.type.kind&&"string"!==ee.type.kind&&"value"!==ee.type.kind?B.error("Expected argument of type string or array, but found "+Aa(ee.type)+" instead."):new Ba(ee):null},Ba.prototype.evaluate=function(P){var B=this.input.evaluate(P);if("string"==typeof B)return B.length;if(Array.isArray(B))return B.length;throw new Mi("Expected value to be of type string or array, but found "+Aa(ro(B))+" instead.")},Ba.prototype.eachChild=function(P){P(this.input)},Ba.prototype.outputDefined=function(){return!1},Ba.prototype.serialize=function(){var P=["length"];return this.eachChild(function(B){P.push(B.serialize())}),P};var ta={"==":zn,"!=":Pn,">":ea,"<":Vn,">=":Ea,"<=":Ha,array:ao,at:Js,boolean:ao,case:bo,coalesce:$o,collator:bs,format:Qo,image:Vo,in:Ds,"index-of":ps,interpolate:uo,"interpolate-hcl":uo,"interpolate-lab":uo,length:Ba,let:Ps,literal:no,match:Ji,number:ao,"number-format":Fa,object:ao,slice:Yo,step:Ts,string:ao,"to-boolean":Ho,"to-color":Ho,"to-number":Ho,"to-string":Ho,var:ns,within:Go};function ca(L,P){var B=P[0],ee=P[1],fe=P[2],me=P[3];B=B.evaluate(L),ee=ee.evaluate(L),fe=fe.evaluate(L);var Te=me?me.evaluate(L):1,Oe=zl(B,ee,fe,Te);if(Oe)throw new Mi(Oe);return new gi(B/255*Te,ee/255*Te,fe/255*Te,Te)}function Xa(L,P){return L in P}function qa(L,P){var B=P[L];return void 0===B?null:B}function yi(L){return{type:L}}function mi(L){return{result:"success",value:L}}function Pi(L){return{result:"error",value:L}}function ci(L){return"data-driven"===L["property-type"]||"cross-faded-data-driven"===L["property-type"]}function _o(L){return!!L.expression&&L.expression.parameters.indexOf("zoom")>-1}function io(L){return!!L.expression&&L.expression.interpolated}function ti(L){return L instanceof Number?"number":L instanceof String?"string":L instanceof Boolean?"boolean":Array.isArray(L)?"array":null===L?"null":typeof L}function fa(L){return"object"==typeof L&&null!==L&&!Array.isArray(L)}function wi(L){return L}function fo(L,P){var Oe,$e,ft,B="color"===P.type,ee=L.stops&&"object"==typeof L.stops[0][0],me=ee||!(ee||void 0!==L.property),Te=L.type||(io(P)?"exponential":"interval");if(B&&((L=ln({},L)).stops&&(L.stops=L.stops.map(function(aa){return[aa[0],gi.parse(aa[1])]})),L.default=gi.parse(L.default?L.default:P.default)),L.colorSpace&&"rgb"!==L.colorSpace&&!Hl[L.colorSpace])throw new Error("Unknown color space: "+L.colorSpace);if("exponential"===Te)Oe=ss;else if("interval"===Te)Oe=Ms;else if("categorical"===Te){Oe=os,$e=Object.create(null);for(var yt=0,Ft=L.stops;yt<Ft.length;yt+=1){var tr=Ft[yt];$e[tr[0]]=tr[1]}ft=typeof L.stops[0][0]}else{if("identity"!==Te)throw new Error('Unknown function type "'+Te+'"');Oe=fl}if(ee){for(var Kt={},xr=[],Fr=0;Fr<L.stops.length;Fr++){var fn=L.stops[Fr],nn=fn[0].zoom;void 0===Kt[nn]&&(Kt[nn]={zoom:nn,type:L.type,property:L.property,default:L.default,stops:[]},xr.push(nn)),Kt[nn].stops.push([fn[0].value,fn[1]])}for(var Sn=[],xn=0,Mn=xr;xn<Mn.length;xn+=1){var In=Mn[xn];Sn.push([Kt[In].zoom,fo(Kt[In],P)])}var Hn={name:"linear"};return{kind:"composite",interpolationType:Hn,interpolationFactor:uo.interpolationFactor.bind(void 0,Hn),zoomStops:Sn.map(function(aa){return aa[0]}),evaluate:function(Na,ba){var Sa=Na.zoom;return ss({stops:Sn,base:L.base},P,Sa).evaluate(Sa,ba)}}}if(me){var oa="exponential"===Te?{name:"exponential",base:void 0!==L.base?L.base:1}:null;return{kind:"camera",interpolationType:oa,interpolationFactor:uo.interpolationFactor.bind(void 0,oa),zoomStops:L.stops.map(function(aa){return aa[0]}),evaluate:function(aa){return Oe(L,P,aa.zoom,$e,ft)}}}return{kind:"source",evaluate:function(Na,ba){var Sa=ba&&ba.properties?ba.properties[L.property]:void 0;return void 0===Sa?yo(L.default,P.default):Oe(L,P,Sa,$e,ft)}}}function yo(L,P,B){return void 0!==L?L:void 0!==P?P:void 0!==B?B:void 0}function os(L,P,B,ee,fe){return yo(typeof B===fe?ee[B]:void 0,L.default,P.default)}function Ms(L,P,B){if("number"!==ti(B))return yo(L.default,P.default);var ee=L.stops.length;if(1===ee||B<=L.stops[0][0])return L.stops[0][1];if(B>=L.stops[ee-1][0])return L.stops[ee-1][1];var fe=Ls(L.stops.map(function(me){return me[0]}),B);return L.stops[fe][1]}function ss(L,P,B){var ee=void 0!==L.base?L.base:1;if("number"!==ti(B))return yo(L.default,P.default);var fe=L.stops.length;if(1===fe||B<=L.stops[0][0])return L.stops[0][1];if(B>=L.stops[fe-1][0])return L.stops[fe-1][1];var me=Ls(L.stops.map(function(Ft){return Ft[0]}),B),Te=function ds(L,P,B,ee){var fe=ee-B,me=L-B;return 0===fe?0:1===P?me/fe:(Math.pow(P,me)-1)/(Math.pow(P,fe)-1)}(B,ee,L.stops[me][0],L.stops[me+1][0]),Oe=L.stops[me][1],$e=L.stops[me+1][1],ft=ru[P.type]||wi;if(L.colorSpace&&"rgb"!==L.colorSpace){var yt=Hl[L.colorSpace];ft=function(Ft,tr){return yt.reverse(yt.interpolate(yt.forward(Ft),yt.forward(tr),Te))}}return"function"==typeof Oe.evaluate?{evaluate:function(){for(var tr=[],Kt=arguments.length;Kt--;)tr[Kt]=arguments[Kt];var xr=Oe.evaluate.apply(void 0,tr),Fr=$e.evaluate.apply(void 0,tr);if(void 0!==xr&&void 0!==Fr)return ft(xr,Fr,Te)}}:ft(Oe,$e,Te)}function fl(L,P,B){return"color"===P.type?B=gi.parse(B):"formatted"===P.type?B=to.fromString(B.toString()):"resolvedImage"===P.type?B=Mo.fromString(B.toString()):ti(B)!==P.type&&("enum"!==P.type||!P.values[B])&&(B=void 0),yo(B,L.default,P.default)}ko.register(ta,{error:[{kind:"error"},[hr],function(L,P){throw new Mi(P[0].evaluate(L))}],typeof:[hr,[_n],function(L,P){return Aa(ro(P[0].evaluate(L)))}],"to-rgba":[sa(Wt,4),[Fn],function(L,P){return P[0].evaluate(L).toArray()}],rgb:[Fn,[Wt,Wt,Wt],ca],rgba:[Fn,[Wt,Wt,Wt,Wt],ca],has:{type:vn,overloads:[[[hr],function(L,P){return Xa(P[0].evaluate(L),L.properties())}],[[hr,Jn],function(L,P){var ee=P[1];return Xa(P[0].evaluate(L),ee.evaluate(L))}]]},get:{type:_n,overloads:[[[hr],function(L,P){return qa(P[0].evaluate(L),L.properties())}],[[hr,Jn],function(L,P){var ee=P[1];return qa(P[0].evaluate(L),ee.evaluate(L))}]]},"feature-state":[_n,[hr],function(L,P){return qa(P[0].evaluate(L),L.featureState||{})}],properties:[Jn,[],function(L){return L.properties()}],"geometry-type":[hr,[],function(L){return L.geometryType()}],id:[_n,[],function(L){return L.id()}],zoom:[Wt,[],function(L){return L.globals.zoom}],"heatmap-density":[Wt,[],function(L){return L.globals.heatmapDensity||0}],"line-progress":[Wt,[],function(L){return L.globals.lineProgress||0}],accumulated:[_n,[],function(L){return void 0===L.globals.accumulated?null:L.globals.accumulated}],"+":[Wt,yi(Wt),function(L,P){for(var B=0,ee=0,fe=P;ee<fe.length;ee+=1)B+=fe[ee].evaluate(L);return B}],"*":[Wt,yi(Wt),function(L,P){for(var B=1,ee=0,fe=P;ee<fe.length;ee+=1)B*=fe[ee].evaluate(L);return B}],"-":{type:Wt,overloads:[[[Wt,Wt],function(L,P){var ee=P[1];return P[0].evaluate(L)-ee.evaluate(L)}],[[Wt],function(L,P){return-P[0].evaluate(L)}]]},"/":[Wt,[Wt,Wt],function(L,P){var ee=P[1];return P[0].evaluate(L)/ee.evaluate(L)}],"%":[Wt,[Wt,Wt],function(L,P){var ee=P[1];return P[0].evaluate(L)%ee.evaluate(L)}],ln2:[Wt,[],function(){return Math.LN2}],pi:[Wt,[],function(){return Math.PI}],e:[Wt,[],function(){return Math.E}],"^":[Wt,[Wt,Wt],function(L,P){var ee=P[1];return Math.pow(P[0].evaluate(L),ee.evaluate(L))}],sqrt:[Wt,[Wt],function(L,P){return Math.sqrt(P[0].evaluate(L))}],log10:[Wt,[Wt],function(L,P){return Math.log(P[0].evaluate(L))/Math.LN10}],ln:[Wt,[Wt],function(L,P){return Math.log(P[0].evaluate(L))}],log2:[Wt,[Wt],function(L,P){return Math.log(P[0].evaluate(L))/Math.LN2}],sin:[Wt,[Wt],function(L,P){return Math.sin(P[0].evaluate(L))}],cos:[Wt,[Wt],function(L,P){return Math.cos(P[0].evaluate(L))}],tan:[Wt,[Wt],function(L,P){return Math.tan(P[0].evaluate(L))}],asin:[Wt,[Wt],function(L,P){return Math.asin(P[0].evaluate(L))}],acos:[Wt,[Wt],function(L,P){return Math.acos(P[0].evaluate(L))}],atan:[Wt,[Wt],function(L,P){return Math.atan(P[0].evaluate(L))}],min:[Wt,yi(Wt),function(L,P){return Math.min.apply(Math,P.map(function(B){return B.evaluate(L)}))}],max:[Wt,yi(Wt),function(L,P){return Math.max.apply(Math,P.map(function(B){return B.evaluate(L)}))}],abs:[Wt,[Wt],function(L,P){return Math.abs(P[0].evaluate(L))}],round:[Wt,[Wt],function(L,P){var ee=P[0].evaluate(L);return ee<0?-Math.round(-ee):Math.round(ee)}],floor:[Wt,[Wt],function(L,P){return Math.floor(P[0].evaluate(L))}],ceil:[Wt,[Wt],function(L,P){return Math.ceil(P[0].evaluate(L))}],"filter-==":[vn,[hr,_n],function(L,P){var B=P[0],ee=P[1];return L.properties()[B.value]===ee.value}],"filter-id-==":[vn,[_n],function(L,P){var B=P[0];return L.id()===B.value}],"filter-type-==":[vn,[hr],function(L,P){var B=P[0];return L.geometryType()===B.value}],"filter-<":[vn,[hr,_n],function(L,P){var B=P[0],ee=P[1],fe=L.properties()[B.value],me=ee.value;return typeof fe==typeof me&&fe<me}],"filter-id-<":[vn,[_n],function(L,P){var B=P[0],ee=L.id(),fe=B.value;return typeof ee==typeof fe&&ee<fe}],"filter->":[vn,[hr,_n],function(L,P){var B=P[0],ee=P[1],fe=L.properties()[B.value],me=ee.value;return typeof fe==typeof me&&fe>me}],"filter-id->":[vn,[_n],function(L,P){var B=P[0],ee=L.id(),fe=B.value;return typeof ee==typeof fe&&ee>fe}],"filter-<=":[vn,[hr,_n],function(L,P){var B=P[0],ee=P[1],fe=L.properties()[B.value],me=ee.value;return typeof fe==typeof me&&fe<=me}],"filter-id-<=":[vn,[_n],function(L,P){var B=P[0],ee=L.id(),fe=B.value;return typeof ee==typeof fe&&ee<=fe}],"filter->=":[vn,[hr,_n],function(L,P){var B=P[0],ee=P[1],fe=L.properties()[B.value],me=ee.value;return typeof fe==typeof me&&fe>=me}],"filter-id->=":[vn,[_n],function(L,P){var B=P[0],ee=L.id(),fe=B.value;return typeof ee==typeof fe&&ee>=fe}],"filter-has":[vn,[_n],function(L,P){return P[0].value in L.properties()}],"filter-has-id":[vn,[],function(L){return null!==L.id()&&void 0!==L.id()}],"filter-type-in":[vn,[sa(hr)],function(L,P){return P[0].value.indexOf(L.geometryType())>=0}],"filter-id-in":[vn,[sa(_n)],function(L,P){return P[0].value.indexOf(L.id())>=0}],"filter-in-small":[vn,[hr,sa(_n)],function(L,P){var B=P[0];return P[1].value.indexOf(L.properties()[B.value])>=0}],"filter-in-large":[vn,[hr,sa(_n)],function(L,P){var B=P[0],ee=P[1];return function _i(L,P,B,ee){for(;B<=ee;){var fe=B+ee>>1;if(P[fe]===L)return!0;P[fe]>L?ee=fe-1:B=fe+1}return!1}(L.properties()[B.value],ee.value,0,ee.value.length-1)}],all:{type:vn,overloads:[[[vn,vn],function(L,P){var ee=P[1];return P[0].evaluate(L)&&ee.evaluate(L)}],[yi(vn),function(L,P){for(var B=0,ee=P;B<ee.length;B+=1)if(!ee[B].evaluate(L))return!1;return!0}]]},any:{type:vn,overloads:[[[vn,vn],function(L,P){var ee=P[1];return P[0].evaluate(L)||ee.evaluate(L)}],[yi(vn),function(L,P){for(var B=0,ee=P;B<ee.length;B+=1)if(ee[B].evaluate(L))return!0;return!1}]]},"!":[vn,[vn],function(L,P){return!P[0].evaluate(L)}],"is-supported-script":[vn,[hr],function(L,P){var ee=L.globals&&L.globals.isSupportedScript;return!ee||ee(P[0].evaluate(L))}],upcase:[hr,[hr],function(L,P){return P[0].evaluate(L).toUpperCase()}],downcase:[hr,[hr],function(L,P){return P[0].evaluate(L).toLowerCase()}],concat:[hr,yi(_n),function(L,P){return P.map(function(B){return Gs(B.evaluate(L))}).join("")}],"resolved-locale":[hr,[ia],function(L,P){return P[0].evaluate(L).resolvedLocale()}]});var gs=function(P,B){this.expression=P,this._warningHistory={},this._evaluator=new Zs,this._defaultValue=B?function Ou(L){return"color"===L.type&&fa(L.default)?new gi(0,0,0,0):"color"===L.type?gi.parse(L.default)||null:void 0===L.default?null:L.default}(B):null,this._enumValues=B&&"enum"===B.type?B.values:null};function Rs(L){return Array.isArray(L)&&L.length>0&&"string"==typeof L[0]&&L[0]in ta}function hl(L,P){var B=new Co(ta,[],P?function rc(L){var P={color:Fn,string:hr,number:Wt,enum:hr,boolean:vn,formatted:va,resolvedImage:_a};return"array"===L.type?sa(P[L.value]||_n,L.length):P[L.type]}(P):void 0),ee=B.parse(L,void 0,void 0,void 0,P&&"string"===P.type?{typeAnnotation:"coerce"}:void 0);return ee?mi(new gs(ee,P)):Pi(B.errors)}gs.prototype.evaluateWithoutErrorHandling=function(P,B,ee,fe,me,Te){return this._evaluator.globals=P,this._evaluator.feature=B,this._evaluator.featureState=ee,this._evaluator.canonical=fe,this._evaluator.availableImages=me||null,this._evaluator.formattedSection=Te,this.expression.evaluate(this._evaluator)},gs.prototype.evaluate=function(P,B,ee,fe,me,Te){this._evaluator.globals=P,this._evaluator.feature=B||null,this._evaluator.featureState=ee||null,this._evaluator.canonical=fe,this._evaluator.availableImages=me||null,this._evaluator.formattedSection=Te||null;try{var Oe=this.expression.evaluate(this._evaluator);if(null==Oe||"number"==typeof Oe&&Oe!=Oe)return this._defaultValue;if(this._enumValues&&!(Oe in this._enumValues))throw new Mi("Expected value to be one of "+Object.keys(this._enumValues).map(function($e){return JSON.stringify($e)}).join(", ")+", but found "+JSON.stringify(Oe)+" instead.");return Oe}catch($e){return this._warningHistory[$e.message]||(this._warningHistory[$e.message]=!0,"undefined"!=typeof console&&console.warn($e.message)),this._defaultValue}};var vl=function(P,B){this.kind=P,this._styleExpression=B,this.isStateDependent="constant"!==P&&!ol(B.expression)};vl.prototype.evaluateWithoutErrorHandling=function(P,B,ee,fe,me,Te){return this._styleExpression.evaluateWithoutErrorHandling(P,B,ee,fe,me,Te)},vl.prototype.evaluate=function(P,B,ee,fe,me,Te){return this._styleExpression.evaluate(P,B,ee,fe,me,Te)};var ys=function(P,B,ee,fe){this.kind=P,this.zoomStops=ee,this._styleExpression=B,this.isStateDependent="camera"!==P&&!ol(B.expression),this.interpolationType=fe};function Fu(L,P){if("error"===(L=hl(L,P)).result)return L;var B=L.value.expression,ee=Sl(B);if(!ee&&!ci(P))return Pi([new Rt("","data expressions not supported")]);var fe=tu(B,["zoom"]);if(!fe&&!_o(P))return Pi([new Rt("","zoom expressions not supported")]);var me=mu(B);return me||fe?me instanceof Rt?Pi([me]):me instanceof uo&&!io(P)?Pi([new Rt("",'"interpolate" expressions cannot be used with this property')]):mi(me?new ys(ee?"camera":"composite",L.value,me.labels,me instanceof uo?me.interpolation:void 0):new vl(ee?"constant":"source",L.value)):Pi([new Rt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}ys.prototype.evaluateWithoutErrorHandling=function(P,B,ee,fe,me,Te){return this._styleExpression.evaluateWithoutErrorHandling(P,B,ee,fe,me,Te)},ys.prototype.evaluate=function(P,B,ee,fe,me,Te){return this._styleExpression.evaluate(P,B,ee,fe,me,Te)},ys.prototype.interpolationFactor=function(P,B,ee){return this.interpolationType?uo.interpolationFactor(this.interpolationType,P,B,ee):0};var pl=function(P,B){this._parameters=P,this._specification=B,ln(this,fo(this._parameters,this._specification))};function mu(L){var P=null;if(L instanceof Ps)P=mu(L.result);else if(L instanceof $o)for(var B=0,ee=L.args;B<ee.length&&!(P=mu(ee[B]));B+=1);else(L instanceof Ts||L instanceof uo)&&L.input instanceof ko&&"zoom"===L.input.name&&(P=L);return P instanceof Rt||L.eachChild(function(me){var Te=mu(me);Te instanceof Rt?P=Te:!P&&Te?P=new Rt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):P&&Te&&P!==Te&&(P=new Rt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),P}function ms(L){var P=L.key,B=L.value,ee=L.valueSpec||{},fe=L.objectElementValidators||{},me=L.style,Te=L.styleSpec,Oe=[],$e=ti(B);if("object"!==$e)return[new dr(P,B,"object expected, "+$e+" found")];for(var ft in B){var yt=ft.split(".")[0],Ft=ee[yt]||ee["*"],tr=void 0;if(fe[yt])tr=fe[yt];else if(ee[yt])tr=di;else if(fe["*"])tr=fe["*"];else{if(!ee["*"]){Oe.push(new dr(P,B[ft],'unknown property "'+ft+'"'));continue}tr=di}Oe=Oe.concat(tr({key:(P&&P+".")+ft,value:B[ft],valueSpec:Ft,style:me,styleSpec:Te,object:B,objectKey:ft},B))}for(var Kt in ee)fe[Kt]||ee[Kt].required&&void 0===ee[Kt].default&&void 0===B[Kt]&&Oe.push(new dr(P,B,'missing required property "'+Kt+'"'));return Oe}function ju(L){var P=L.value,B=L.valueSpec,ee=L.style,fe=L.styleSpec,me=L.key,Te=L.arrayElementValidator||di;if("array"!==ti(P))return[new dr(me,P,"array expected, "+ti(P)+" found")];if(B.length&&P.length!==B.length)return[new dr(me,P,"array length "+B.length+" expected, length "+P.length+" found")];if(B["min-length"]&&P.length<B["min-length"])return[new dr(me,P,"array length at least "+B["min-length"]+" expected, length "+P.length+" found")];var Oe={type:B.value,values:B.values};fe.$version<7&&(Oe.function=B.function),"object"===ti(B.value)&&(Oe=B.value);for(var $e=[],ft=0;ft<P.length;ft++)$e=$e.concat(Te({array:P,arrayIndex:ft,value:P[ft],valueSpec:Oe,style:ee,styleSpec:fe,key:me+"["+ft+"]"}));return $e}function Nu(L){var P=L.key,B=L.value,ee=L.valueSpec,fe=ti(B);return"number"===fe&&B!=B&&(fe="NaN"),"number"!==fe?[new dr(P,B,"number expected, "+fe+" found")]:"minimum"in ee&&B<ee.minimum?[new dr(P,B,B+" is less than the minimum value "+ee.minimum)]:"maximum"in ee&&B>ee.maximum?[new dr(P,B,B+" is greater than the maximum value "+ee.maximum)]:[]}function Bu(L){var ee,me,Te,P=L.valueSpec,B=or(L.value.type),fe={},Oe="categorical"!==B&&void 0===L.value.property,$e=!Oe,ft="array"===ti(L.value.stops)&&"array"===ti(L.value.stops[0])&&"object"===ti(L.value.stops[0][0]),yt=ms({key:L.key,value:L.value,valueSpec:L.styleSpec.function,style:L.style,styleSpec:L.styleSpec,objectElementValidators:{stops:function Ft(Fr){if("identity"===B)return[new dr(Fr.key,Fr.value,'identity function may not have a "stops" property')];var fn=[],nn=Fr.value;return fn=fn.concat(ju({key:Fr.key,value:nn,valueSpec:Fr.valueSpec,style:Fr.style,styleSpec:Fr.styleSpec,arrayElementValidator:tr})),"array"===ti(nn)&&0===nn.length&&fn.push(new dr(Fr.key,nn,"array must have at least one stop")),fn},default:function xr(Fr){return di({key:Fr.key,value:Fr.value,valueSpec:P,style:Fr.style,styleSpec:Fr.styleSpec})}}});return"identity"===B&&Oe&&yt.push(new dr(L.key,L.value,'missing required property "property"')),"identity"!==B&&!L.value.stops&&yt.push(new dr(L.key,L.value,'missing required property "stops"')),"exponential"===B&&L.valueSpec.expression&&!io(L.valueSpec)&&yt.push(new dr(L.key,L.value,"exponential functions not supported")),L.styleSpec.$version>=8&&($e&&!ci(L.valueSpec)?yt.push(new dr(L.key,L.value,"property functions not supported")):Oe&&!_o(L.valueSpec)&&yt.push(new dr(L.key,L.value,"zoom functions not supported"))),("categorical"===B||ft)&&void 0===L.value.property&&yt.push(new dr(L.key,L.value,'"property" property is required')),yt;function tr(Fr){var fn=[],nn=Fr.value,Sn=Fr.key;if("array"!==ti(nn))return[new dr(Sn,nn,"array expected, "+ti(nn)+" found")];if(2!==nn.length)return[new dr(Sn,nn,"array length 2 expected, length "+nn.length+" found")];if(ft){if("object"!==ti(nn[0]))return[new dr(Sn,nn,"object expected, "+ti(nn[0])+" found")];if(void 0===nn[0].zoom)return[new dr(Sn,nn,"object stop key must have zoom")];if(void 0===nn[0].value)return[new dr(Sn,nn,"object stop key must have value")];if(Te&&Te>or(nn[0].zoom))return[new dr(Sn,nn[0].zoom,"stop zoom values must appear in ascending order")];or(nn[0].zoom)!==Te&&(Te=or(nn[0].zoom),me=void 0,fe={}),fn=fn.concat(ms({key:Sn+"[0]",value:nn[0],valueSpec:{zoom:{}},style:Fr.style,styleSpec:Fr.styleSpec,objectElementValidators:{zoom:Nu,value:Kt}}))}else fn=fn.concat(Kt({key:Sn+"[0]",value:nn[0],valueSpec:{},style:Fr.style,styleSpec:Fr.styleSpec},nn));return Rs(Br(nn[1]))?fn.concat([new dr(Sn+"[1]",nn[1],"expressions are not allowed in function stops.")]):fn.concat(di({key:Sn+"[1]",value:nn[1],valueSpec:P,style:Fr.style,styleSpec:Fr.styleSpec}))}function Kt(Fr,fn){var nn=ti(Fr.value),Sn=or(Fr.value),xn=null!==Fr.value?Fr.value:fn;if(ee){if(nn!==ee)return[new dr(Fr.key,xn,nn+" stop domain type must match previous stop domain type "+ee)]}else ee=nn;if("number"!==nn&&"string"!==nn&&"boolean"!==nn)return[new dr(Fr.key,xn,"stop domain value must be a number, string, or boolean")];if("number"!==nn&&"categorical"!==B){var Mn="number expected, "+nn+" found";return ci(P)&&void 0===B&&(Mn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new dr(Fr.key,xn,Mn)]}return"categorical"!==B||"number"!==nn||isFinite(Sn)&&Math.floor(Sn)===Sn?"categorical"!==B&&"number"===nn&&void 0!==me&&Sn<me?[new dr(Fr.key,xn,"stop domain values must appear in ascending order")]:(me=Sn,"categorical"===B&&Sn in fe?[new dr(Fr.key,xn,"stop domain values must be unique")]:(fe[Sn]=!0,[])):[new dr(Fr.key,xn,"integer expected, found "+Sn)]}}function dl(L){var P=("property"===L.expressionContext?Fu:hl)(Br(L.value),L.valueSpec);if("error"===P.result)return P.value.map(function(ee){return new dr(""+L.key+ee.key,L.value,ee.message)});var B=P.value.expression||P.value._styleExpression.expression;if("property"===L.expressionContext&&"text-font"===L.propertyKey&&!B.outputDefined())return[new dr(L.key,L.value,'Invalid data expression for "'+L.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===L.expressionContext&&"layout"===L.propertyType&&!ol(B))return[new dr(L.key,L.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===L.expressionContext&&!ol(B))return[new dr(L.key,L.value,'"feature-state" data expressions are not supported with filters.')];if(L.expressionContext&&0===L.expressionContext.indexOf("cluster")){if(!tu(B,["zoom","feature-state"]))return[new dr(L.key,L.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===L.expressionContext&&!Sl(B))return[new dr(L.key,L.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ou(L){var P=L.key,B=L.value,ee=L.valueSpec,fe=[];return Array.isArray(ee.values)?-1===ee.values.indexOf(or(B))&&fe.push(new dr(P,B,"expected one of ["+ee.values.join(", ")+"], "+JSON.stringify(B)+" found")):-1===Object.keys(ee.values).indexOf(or(B))&&fe.push(new dr(P,B,"expected one of ["+Object.keys(ee.values).join(", ")+"], "+JSON.stringify(B)+" found")),fe}function Ju(L){if(!0===L||!1===L)return!0;if(!Array.isArray(L)||0===L.length)return!1;switch(L[0]){case"has":return L.length>=2&&"$id"!==L[1]&&"$type"!==L[1];case"in":return L.length>=3&&("string"!=typeof L[1]||Array.isArray(L[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==L.length||Array.isArray(L[1])||Array.isArray(L[2]);case"any":case"all":for(var P=0,B=L.slice(1);P<B.length;P+=1){var ee=B[P];if(!Ju(ee)&&"boolean"!=typeof ee)return!1}return!0;default:return!0}}pl.deserialize=function(P){return new pl(P._parameters,P._specification)},pl.serialize=function(P){return{_parameters:P._parameters,_specification:P._specification}};var Ku={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function qo(L){if(null==L)return{filter:function(){return!0},needGeometry:!1};Ju(L)||(L=qe(L));var P=hl(L,Ku);if("error"===P.result)throw new Error(P.value.map(function(ee){return ee.key+": "+ee.message}).join(", "));return{filter:function(ee,fe,me){return P.value.evaluate(ee,fe,{},me)},needGeometry:Ge(L)}}function ze(L,P){return L<P?-1:L>P?1:0}function Ge(L){if(!Array.isArray(L))return!1;if("within"===L[0])return!0;for(var P=1;P<L.length;P++)if(Ge(L[P]))return!0;return!1}function qe(L){if(!L)return!0;var P=L[0];return L.length<=1?"any"!==P:"=="===P?ot(L[1],L[2],"=="):"!="===P?cr(ot(L[1],L[2],"==")):"<"===P||">"===P||"<="===P||">="===P?ot(L[1],L[2],P):"any"===P?function bt(L){return["any"].concat(L.map(qe))}(L.slice(1)):"all"===P?["all"].concat(L.slice(1).map(qe)):"none"===P?["all"].concat(L.slice(1).map(qe).map(cr)):"in"===P?xt(L[1],L.slice(2)):"!in"===P?cr(xt(L[1],L.slice(2))):"has"===P?At(L[1]):"!has"===P?cr(At(L[1])):"within"!==P||L}function ot(L,P,B){switch(L){case"$type":return["filter-type-"+B,P];case"$id":return["filter-id-"+B,P];default:return["filter-"+B,L,P]}}function xt(L,P){if(0===P.length)return!1;switch(L){case"$type":return["filter-type-in",["literal",P]];case"$id":return["filter-id-in",["literal",P]];default:return P.length>200&&!P.some(function(B){return typeof B!=typeof P[0]})?["filter-in-large",L,["literal",P.sort(ze)]]:["filter-in-small",L,["literal",P]]}}function At(L){switch(L){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",L]}}function cr(L){return["!",L]}function yr(L){return Ju(Br(L.value))?dl(ln({},L,{expressionContext:"filter",valueSpec:{value:"boolean"}})):lr(L)}function lr(L){var P=L.value,B=L.key;if("array"!==ti(P))return[new dr(B,P,"array expected, "+ti(P)+" found")];var fe,ee=L.styleSpec,me=[];if(P.length<1)return[new dr(B,P,"filter array must have at least 1 element")];switch(me=me.concat(ou({key:B+"[0]",value:P[0],valueSpec:ee.filter_operator,style:L.style,styleSpec:L.styleSpec})),or(P[0])){case"<":case"<=":case">":case">=":P.length>=2&&"$type"===or(P[1])&&me.push(new dr(B,P,'"$type" cannot be use with operator "'+P[0]+'"'));case"==":case"!=":3!==P.length&&me.push(new dr(B,P,'filter array for operator "'+P[0]+'" must have 3 elements'));case"in":case"!in":P.length>=2&&"string"!==(fe=ti(P[1]))&&me.push(new dr(B+"[1]",P[1],"string expected, "+fe+" found"));for(var Te=2;Te<P.length;Te++)fe=ti(P[Te]),"$type"===or(P[1])?me=me.concat(ou({key:B+"["+Te+"]",value:P[Te],valueSpec:ee.geometry_type,style:L.style,styleSpec:L.styleSpec})):"string"!==fe&&"number"!==fe&&"boolean"!==fe&&me.push(new dr(B+"["+Te+"]",P[Te],"string, number, or boolean expected, "+fe+" found"));break;case"any":case"all":case"none":for(var Oe=1;Oe<P.length;Oe++)me=me.concat(lr({key:B+"["+Oe+"]",value:P[Oe],style:L.style,styleSpec:L.styleSpec}));break;case"has":case"!has":fe=ti(P[1]),2!==P.length?me.push(new dr(B,P,'filter array for "'+P[0]+'" operator must have 2 elements')):"string"!==fe&&me.push(new dr(B+"[1]",P[1],"string expected, "+fe+" found"));break;case"within":fe=ti(P[1]),2!==P.length?me.push(new dr(B,P,'filter array for "'+P[0]+'" operator must have 2 elements')):"object"!==fe&&me.push(new dr(B+"[1]",P[1],"object expected, "+fe+" found"))}return me}function _r(L,P){var B=L.key,ee=L.style,fe=L.styleSpec,me=L.value,Te=L.objectKey,Oe=fe[P+"_"+L.layerType];if(!Oe)return[];var $e=Te.match(/^(.*)-transition$/);if("paint"===P&&$e&&Oe[$e[1]]&&Oe[$e[1]].transition)return di({key:B,value:me,valueSpec:fe.transition,style:ee,styleSpec:fe});var yt,ft=L.valueSpec||Oe[Te];if(!ft)return[new dr(B,me,'unknown property "'+Te+'"')];if("string"===ti(me)&&ci(ft)&&!ft.tokens&&(yt=/^{([^}]+)}$/.exec(me)))return[new dr(B,me,'"'+Te+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(yt[1])+" }`.")];var Ft=[];return"symbol"===L.layerType&&("text-field"===Te&&ee&&!ee.glyphs&&Ft.push(new dr(B,me,'use of "text-field" requires a style "glyphs" property')),"text-font"===Te&&fa(Br(me))&&"identity"===or(me.type)&&Ft.push(new dr(B,me,'"text-font" does not support identity functions'))),Ft.concat(di({key:L.key,value:me,valueSpec:ft,style:ee,styleSpec:fe,expressionContext:"property",propertyType:P,propertyKey:Te}))}function Rr(L){return _r(L,"paint")}function Xr(L){return _r(L,"layout")}function an(L){var P=[],B=L.value,ee=L.key,fe=L.style,me=L.styleSpec;!B.type&&!B.ref&&P.push(new dr(ee,B,'either "type" or "ref" is required'));var Ft,Te=or(B.type),Oe=or(B.ref);if(B.id)for(var $e=or(B.id),ft=0;ft<L.arrayIndex;ft++){var yt=fe.layers[ft];or(yt.id)===$e&&P.push(new dr(ee,B.id,'duplicate layer id "'+B.id+'", previously used at line '+yt.id.__line__))}if("ref"in B)["type","source","source-layer","filter","layout"].forEach(function(xr){xr in B&&P.push(new dr(ee,B[xr],'"'+xr+'" is prohibited for ref layers'))}),fe.layers.forEach(function(xr){or(xr.id)===Oe&&(Ft=xr)}),Ft?Ft.ref?P.push(new dr(ee,B.ref,"ref cannot reference another ref layer")):Te=or(Ft.type):P.push(new dr(ee,B.ref,'ref layer "'+Oe+'" not found'));else if("background"!==Te)if(B.source){var tr=fe.sources&&fe.sources[B.source],Kt=tr&&or(tr.type);tr?"vector"===Kt&&"raster"===Te?P.push(new dr(ee,B.source,'layer "'+B.id+'" requires a raster source')):"raster"===Kt&&"raster"!==Te?P.push(new dr(ee,B.source,'layer "'+B.id+'" requires a vector source')):"vector"!==Kt||B["source-layer"]?"raster-dem"===Kt&&"hillshade"!==Te?P.push(new dr(ee,B.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"===Te&&B.paint&&B.paint["line-gradient"]&&("geojson"!==Kt||!tr.lineMetrics)&&P.push(new dr(ee,B,'layer "'+B.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):P.push(new dr(ee,B,'layer "'+B.id+'" must specify a "source-layer"')):P.push(new dr(ee,B.source,'source "'+B.source+'" not found'))}else P.push(new dr(ee,B,'missing required property "source"'));return P=P.concat(ms({key:ee,value:B,valueSpec:me.layer,style:L.style,styleSpec:L.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return di({key:ee+".type",value:B.type,valueSpec:me.layer.type,style:L.style,styleSpec:L.styleSpec,object:B,objectKey:"type"})},filter:yr,layout:function(Fr){return ms({layer:B,key:Fr.key,value:Fr.value,style:Fr.style,styleSpec:Fr.styleSpec,objectElementValidators:{"*":function(nn){return Xr(ln({layerType:Te},nn))}}})},paint:function(Fr){return ms({layer:B,key:Fr.key,value:Fr.value,style:Fr.style,styleSpec:Fr.styleSpec,objectElementValidators:{"*":function(nn){return Rr(ln({layerType:Te},nn))}}})}}}))}function bn(L){var P=L.value,B=L.key,ee=ti(P);return"string"!==ee?[new dr(B,P,"string expected, "+ee+" found")]:[]}var Dn={promoteId:function xa(L){var P=L.key,B=L.value;if("string"===ti(B))return bn({key:P,value:B});var ee=[];for(var fe in B)ee.push.apply(ee,bn({key:P+"."+fe,value:B[fe]}));return ee}};function Yn(L){var P=L.value,B=L.key,ee=L.styleSpec,fe=L.style;if(!P.type)return[new dr(B,P,'"type" is required')];var Te,me=or(P.type);switch(me){case"vector":case"raster":case"raster-dem":return ms({key:B,value:P,valueSpec:ee["source_"+me.replace("-","_")],style:L.style,styleSpec:ee,objectElementValidators:Dn});case"geojson":if(Te=ms({key:B,value:P,valueSpec:ee.source_geojson,style:fe,styleSpec:ee,objectElementValidators:Dn}),P.cluster)for(var Oe in P.clusterProperties){var $e=P.clusterProperties[Oe],ft=$e[0],Ft="string"==typeof ft?[ft,["accumulated"],["get",Oe]]:ft;Te.push.apply(Te,dl({key:B+"."+Oe+".map",value:$e[1],expressionContext:"cluster-map"})),Te.push.apply(Te,dl({key:B+"."+Oe+".reduce",value:Ft,expressionContext:"cluster-reduce"}))}return Te;case"video":return ms({key:B,value:P,valueSpec:ee.source_video,style:fe,styleSpec:ee});case"image":return ms({key:B,value:P,valueSpec:ee.source_image,style:fe,styleSpec:ee});case"canvas":return[new dr(B,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ou({key:B+".type",value:P.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:fe,styleSpec:ee})}}function Za(L){var P=L.value,B=L.styleSpec,ee=B.light,fe=L.style,me=[],Te=ti(P);if(void 0===P)return me;if("object"!==Te)return me.concat([new dr("light",P,"object expected, "+Te+" found")]);for(var Oe in P){var $e=Oe.match(/^(.*)-transition$/);me=me.concat($e&&ee[$e[1]]&&ee[$e[1]].transition?di({key:Oe,value:P[Oe],valueSpec:B.transition,style:fe,styleSpec:B}):ee[Oe]?di({key:Oe,value:P[Oe],valueSpec:ee[Oe],style:fe,styleSpec:B}):[new dr(Oe,P[Oe],'unknown property "'+Oe+'"')])}return me}var ri={"*":function(){return[]},array:ju,boolean:function xu(L){var P=L.value,B=L.key,ee=ti(P);return"boolean"!==ee?[new dr(B,P,"boolean expected, "+ee+" found")]:[]},number:Nu,color:function nc(L){var P=L.key,B=L.value,ee=ti(B);return"string"!==ee?[new dr(P,B,"color expected, "+ee+" found")]:null===wl(B)?[new dr(P,B,'color expected, "'+B+'" found')]:[]},constants:rn,enum:ou,filter:yr,function:Bu,layer:an,object:ms,source:Yn,light:Za,string:bn,formatted:function ja(L){return 0===bn(L).length?[]:dl(L)},resolvedImage:function Ka(L){return 0===bn(L).length?[]:dl(L)}};function di(L){var P=L.value,B=L.valueSpec,ee=L.styleSpec;return B.expression&&fa(or(P))?Bu(L):B.expression&&Rs(Br(P))?dl(L):B.type&&ri[B.type]?ri[B.type](L):ms(ln({},L,{valueSpec:B.type?ee[B.type]:B}))}function Yi(L){var P=L.value,B=L.key,ee=bn(L);return ee.length||(-1===P.indexOf("{fontstack}")&&ee.push(new dr(B,P,'"glyphs" url must include a "{fontstack}" token')),-1===P.indexOf("{range}")&&ee.push(new dr(B,P,'"glyphs" url must include a "{range}" token'))),ee}function Ga(L,P){void 0===P&&(P=Ht);var B=[];return B=B.concat(di({key:"",value:L,valueSpec:P.$root,styleSpec:P,style:L,objectElementValidators:{glyphs:Yi,"*":function(){return[]}}})),L.constants&&(B=B.concat(rn({key:"constants",value:L.constants,style:L,styleSpec:P}))),$i(B)}function $i(L){return[].concat(L).sort(function(P,B){return P.line-B.line})}function Wi(L){return function(){for(var P=[],B=arguments.length;B--;)P[B]=arguments[B];return $i(L.apply(this,P))}}Ga.source=Wi(Yn),Ga.light=Wi(Za),Ga.layer=Wi(an),Ga.filter=Wi(yr),Ga.paintProperty=Wi(Rr),Ga.layoutProperty=Wi(Xr);var ho=Ga,xi=ho.light,Di=ho.paintProperty,Wo=ho.layoutProperty;function vo(L,P){var B=!1;if(P&&P.length)for(var ee=0,fe=P;ee<fe.length;ee+=1)L.fire(new Lr(new Error(fe[ee].message))),B=!0;return B}var Eo=Do;function Do(L,P,B){var ee=this.cells=[];if(L instanceof ArrayBuffer){this.arrayBuffer=L;var fe=new Int32Array(this.arrayBuffer);L=fe[0],this.d=(P=fe[1])+2*(B=fe[2]);for(var me=0;me<this.d*this.d;me++){var Te=fe[3+me],Oe=fe[3+me+1];ee.push(Te===Oe?null:fe.subarray(Te,Oe))}var ft=fe[3+ee.length+1];this.keys=fe.subarray(fe[3+ee.length],ft),this.bboxes=fe.subarray(ft),this.insert=this._insertReadonly}else{this.d=P+2*B;for(var yt=0;yt<this.d*this.d;yt++)ee.push([]);this.keys=[],this.bboxes=[]}this.n=P,this.extent=L,this.padding=B,this.scale=P/L,this.uid=0;var Ft=B/P*L;this.min=-Ft,this.max=L+Ft}Do.prototype.insert=function(L,P,B,ee,fe){this._forEachCell(P,B,ee,fe,this._insertCell,this.uid++),this.keys.push(L),this.bboxes.push(P),this.bboxes.push(B),this.bboxes.push(ee),this.bboxes.push(fe)},Do.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Do.prototype._insertCell=function(L,P,B,ee,fe,me){this.cells[fe].push(me)},Do.prototype.query=function(L,P,B,ee,fe){var me=this.min,Te=this.max;if(L<=me&&P<=me&&Te<=B&&Te<=ee&&!fe)return Array.prototype.slice.call(this.keys);var Oe=[];return this._forEachCell(L,P,B,ee,this._queryCell,Oe,{},fe),Oe},Do.prototype._queryCell=function(L,P,B,ee,fe,me,Te,Oe){var $e=this.cells[fe];if(null!==$e)for(var ft=this.keys,yt=this.bboxes,Ft=0;Ft<$e.length;Ft++){var tr=$e[Ft];if(void 0===Te[tr]){var Kt=4*tr;(Oe?Oe(yt[Kt+0],yt[Kt+1],yt[Kt+2],yt[Kt+3]):L<=yt[Kt+2]&&P<=yt[Kt+3]&&B>=yt[Kt+0]&&ee>=yt[Kt+1])?(Te[tr]=!0,me.push(ft[tr])):Te[tr]=!1}}},Do.prototype._forEachCell=function(L,P,B,ee,fe,me,Te,Oe){for(var $e=this._convertToCellCoord(L),ft=this._convertToCellCoord(P),yt=this._convertToCellCoord(B),Ft=this._convertToCellCoord(ee),tr=$e;tr<=yt;tr++)for(var Kt=ft;Kt<=Ft;Kt++){var xr=this.d*Kt+tr;if((!Oe||Oe(this._convertFromCellCoord(tr),this._convertFromCellCoord(Kt),this._convertFromCellCoord(tr+1),this._convertFromCellCoord(Kt+1)))&&fe.call(this,L,P,B,ee,xr,me,Te,Oe))return}},Do.prototype._convertFromCellCoord=function(L){return(L-this.padding)/this.scale},Do.prototype._convertToCellCoord=function(L){return Math.max(0,Math.min(this.d-1,Math.floor(L*this.scale)+this.padding))},Do.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var L=this.cells,P=3+this.cells.length+1+1,B=0,ee=0;ee<this.cells.length;ee++)B+=this.cells[ee].length;var fe=new Int32Array(P+B+this.keys.length+this.bboxes.length);fe[0]=this.extent,fe[1]=this.n,fe[2]=this.padding;for(var me=P,Te=0;Te<L.length;Te++){var Oe=L[Te];fe[3+Te]=me,fe.set(Oe,me),me+=Oe.length}return fe[3+L.length]=me,fe.set(this.keys,me),fe[3+L.length+1]=me+=this.keys.length,fe.set(this.bboxes,me),me+=this.bboxes.length,fe.buffer};var Ks=self.ImageData,yl=self.ImageBitmap,Ro={};function ka(L,P,B){void 0===B&&(B={}),Object.defineProperty(P,"_classRegistryKey",{value:L,writeable:!1}),Ro[L]={klass:P,omit:B.omit||[],shallow:B.shallow||[]}}for(var Qs in ka("Object",Object),Eo.serialize=function(P,B){var ee=P.toArrayBuffer();return B&&B.push(ee),{buffer:ee}},Eo.deserialize=function(P){return new Eo(P.buffer)},ka("Grid",Eo),ka("Color",gi),ka("Error",Error),ka("ResolvedImage",Mo),ka("StylePropertyFunction",pl),ka("StyleExpression",gs,{omit:["_evaluator"]}),ka("ZoomDependentExpression",ys),ka("ZoomConstantExpression",vl),ka("CompoundExpression",ko,{omit:["_evaluate"]}),ta)ta[Qs]._classRegistryKey||ka("Expression_"+Qs,ta[Qs]);function ue(L){return L&&"undefined"!=typeof ArrayBuffer&&(L instanceof ArrayBuffer||L.constructor&&"ArrayBuffer"===L.constructor.name)}function _e(L){return yl&&L instanceof yl}function Ee(L,P){if(null==L||"boolean"==typeof L||"number"==typeof L||"string"==typeof L||L instanceof Boolean||L instanceof Number||L instanceof String||L instanceof Date||L instanceof RegExp)return L;if(ue(L)||_e(L))return P&&P.push(L),L;if(ArrayBuffer.isView(L)){var B=L;return P&&P.push(B.buffer),B}if(L instanceof Ks)return P&&P.push(L.data.buffer),L;if(Array.isArray(L)){for(var ee=[],fe=0,me=L;fe<me.length;fe+=1)ee.push(Ee(me[fe],P));return ee}if("object"==typeof L){var Oe=L.constructor,$e=Oe._classRegistryKey;if(!$e)throw new Error("can't serialize object of unregistered class");var ft=Oe.serialize?Oe.serialize(L,P):{};if(!Oe.serialize){for(var yt in L)if(L.hasOwnProperty(yt)&&!(Ro[$e].omit.indexOf(yt)>=0)){var Ft=L[yt];ft[yt]=Ro[$e].shallow.indexOf(yt)>=0?Ft:Ee(Ft,P)}L instanceof Error&&(ft.message=L.message)}if(ft.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==$e&&(ft.$name=$e),ft}throw new Error("can't serialize object of type "+typeof L)}function Ne(L){if(null==L||"boolean"==typeof L||"number"==typeof L||"string"==typeof L||L instanceof Boolean||L instanceof Number||L instanceof String||L instanceof Date||L instanceof RegExp||ue(L)||_e(L)||ArrayBuffer.isView(L)||L instanceof Ks)return L;if(Array.isArray(L))return L.map(Ne);if("object"==typeof L){var P=L.$name||"Object",ee=Ro[P].klass;if(!ee)throw new Error("can't deserialize unregistered class "+P);if(ee.deserialize)return ee.deserialize(L);for(var fe=Object.create(ee.prototype),me=0,Te=Object.keys(L);me<Te.length;me+=1){var Oe=Te[me];if("$name"!==Oe){var $e=L[Oe];fe[Oe]=Ro[P].shallow.indexOf(Oe)>=0?$e:Ne($e)}}return fe}throw new Error("can't deserialize object of type "+typeof L)}var He=function(){this.first=!0};He.prototype.update=function(P,B){var ee=Math.floor(P);return this.first?(this.first=!1,this.lastIntegerZoom=ee,this.lastIntegerZoomTime=0,this.lastZoom=P,this.lastFloorZoom=ee,!0):(this.lastFloorZoom>ee?(this.lastIntegerZoom=ee+1,this.lastIntegerZoomTime=B):this.lastFloorZoom<ee&&(this.lastIntegerZoom=ee,this.lastIntegerZoomTime=B),P!==this.lastZoom&&(this.lastZoom=P,this.lastFloorZoom=ee,!0))};var Ve={"Latin-1 Supplement":function(L){return L>=128&&L<=255},Arabic:function(L){return L>=1536&&L<=1791},"Arabic Supplement":function(L){return L>=1872&&L<=1919},"Arabic Extended-A":function(L){return L>=2208&&L<=2303},"Hangul Jamo":function(L){return L>=4352&&L<=4607},"Unified Canadian Aboriginal Syllabics":function(L){return L>=5120&&L<=5759},Khmer:function(L){return L>=6016&&L<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(L){return L>=6320&&L<=6399},"General Punctuation":function(L){return L>=8192&&L<=8303},"Letterlike Symbols":function(L){return L>=8448&&L<=8527},"Number Forms":function(L){return L>=8528&&L<=8591},"Miscellaneous Technical":function(L){return L>=8960&&L<=9215},"Control Pictures":function(L){return L>=9216&&L<=9279},"Optical Character Recognition":function(L){return L>=9280&&L<=9311},"Enclosed Alphanumerics":function(L){return L>=9312&&L<=9471},"Geometric Shapes":function(L){return L>=9632&&L<=9727},"Miscellaneous Symbols":function(L){return L>=9728&&L<=9983},"Miscellaneous Symbols and Arrows":function(L){return L>=11008&&L<=11263},"CJK Radicals Supplement":function(L){return L>=11904&&L<=12031},"Kangxi Radicals":function(L){return L>=12032&&L<=12255},"Ideographic Description Characters":function(L){return L>=12272&&L<=12287},"CJK Symbols and Punctuation":function(L){return L>=12288&&L<=12351},Hiragana:function(L){return L>=12352&&L<=12447},Katakana:function(L){return L>=12448&&L<=12543},Bopomofo:function(L){return L>=12544&&L<=12591},"Hangul Compatibility Jamo":function(L){return L>=12592&&L<=12687},Kanbun:function(L){return L>=12688&&L<=12703},"Bopomofo Extended":function(L){return L>=12704&&L<=12735},"CJK Strokes":function(L){return L>=12736&&L<=12783},"Katakana Phonetic Extensions":function(L){return L>=12784&&L<=12799},"Enclosed CJK Letters and Months":function(L){return L>=12800&&L<=13055},"CJK Compatibility":function(L){return L>=13056&&L<=13311},"CJK Unified Ideographs Extension A":function(L){return L>=13312&&L<=19903},"Yijing Hexagram Symbols":function(L){return L>=19904&&L<=19967},"CJK Unified Ideographs":function(L){return L>=19968&&L<=40959},"Yi Syllables":function(L){return L>=40960&&L<=42127},"Yi Radicals":function(L){return L>=42128&&L<=42191},"Hangul Jamo Extended-A":function(L){return L>=43360&&L<=43391},"Hangul Syllables":function(L){return L>=44032&&L<=55215},"Hangul Jamo Extended-B":function(L){return L>=55216&&L<=55295},"Private Use Area":function(L){return L>=57344&&L<=63743},"CJK Compatibility Ideographs":function(L){return L>=63744&&L<=64255},"Arabic Presentation Forms-A":function(L){return L>=64336&&L<=65023},"Vertical Forms":function(L){return L>=65040&&L<=65055},"CJK Compatibility Forms":function(L){return L>=65072&&L<=65103},"Small Form Variants":function(L){return L>=65104&&L<=65135},"Arabic Presentation Forms-B":function(L){return L>=65136&&L<=65279},"Halfwidth and Fullwidth Forms":function(L){return L>=65280&&L<=65519}};function _t(L){for(var P=0,B=L;P<B.length;P+=1)if(er(B[P].charCodeAt(0)))return!0;return!1}function zt(L){return!(Ve.Arabic(L)||Ve["Arabic Supplement"](L)||Ve["Arabic Extended-A"](L)||Ve["Arabic Presentation Forms-A"](L)||Ve["Arabic Presentation Forms-B"](L))}function $t(L){return!(L<11904||!(Ve["Bopomofo Extended"](L)||Ve.Bopomofo(L)||Ve["CJK Compatibility Forms"](L)||Ve["CJK Compatibility Ideographs"](L)||Ve["CJK Compatibility"](L)||Ve["CJK Radicals Supplement"](L)||Ve["CJK Strokes"](L)||Ve["CJK Symbols and Punctuation"](L)||Ve["CJK Unified Ideographs Extension A"](L)||Ve["CJK Unified Ideographs"](L)||Ve["Enclosed CJK Letters and Months"](L)||Ve["Halfwidth and Fullwidth Forms"](L)||Ve.Hiragana(L)||Ve["Ideographic Description Characters"](L)||Ve["Kangxi Radicals"](L)||Ve["Katakana Phonetic Extensions"](L)||Ve.Katakana(L)||Ve["Vertical Forms"](L)||Ve["Yi Radicals"](L)||Ve["Yi Syllables"](L)))}function er(L){return 746===L||747===L||!(L<4352)&&!!(Ve["Bopomofo Extended"](L)||Ve.Bopomofo(L)||Ve["CJK Compatibility Forms"](L)&&!(L>=65097&&L<=65103)||Ve["CJK Compatibility Ideographs"](L)||Ve["CJK Compatibility"](L)||Ve["CJK Radicals Supplement"](L)||Ve["CJK Strokes"](L)||Ve["CJK Symbols and Punctuation"](L)&&!(L>=12296&&L<=12305)&&!(L>=12308&&L<=12319)&&12336!==L||Ve["CJK Unified Ideographs Extension A"](L)||Ve["CJK Unified Ideographs"](L)||Ve["Enclosed CJK Letters and Months"](L)||Ve["Hangul Compatibility Jamo"](L)||Ve["Hangul Jamo Extended-A"](L)||Ve["Hangul Jamo Extended-B"](L)||Ve["Hangul Jamo"](L)||Ve["Hangul Syllables"](L)||Ve.Hiragana(L)||Ve["Ideographic Description Characters"](L)||Ve.Kanbun(L)||Ve["Kangxi Radicals"](L)||Ve["Katakana Phonetic Extensions"](L)||Ve.Katakana(L)&&12540!==L||!(!Ve["Halfwidth and Fullwidth Forms"](L)||65288===L||65289===L||65293===L||L>=65306&&L<=65310||65339===L||65341===L||65343===L||L>=65371&&L<=65503||65507===L||L>=65512&&L<=65519)||!(!Ve["Small Form Variants"](L)||L>=65112&&L<=65118||L>=65123&&L<=65126)||Ve["Unified Canadian Aboriginal Syllabics"](L)||Ve["Unified Canadian Aboriginal Syllabics Extended"](L)||Ve["Vertical Forms"](L)||Ve["Yijing Hexagram Symbols"](L)||Ve["Yi Syllables"](L)||Ve["Yi Radicals"](L))}function Mr(L){return!(er(L)||function Sr(L){return!!(Ve["Latin-1 Supplement"](L)&&(167===L||169===L||174===L||177===L||188===L||189===L||190===L||215===L||247===L)||Ve["General Punctuation"](L)&&(8214===L||8224===L||8225===L||8240===L||8241===L||8251===L||8252===L||8258===L||8263===L||8264===L||8265===L||8273===L)||Ve["Letterlike Symbols"](L)||Ve["Number Forms"](L)||Ve["Miscellaneous Technical"](L)&&(L>=8960&&L<=8967||L>=8972&&L<=8991||L>=8996&&L<=9e3||9003===L||L>=9085&&L<=9114||L>=9150&&L<=9165||9167===L||L>=9169&&L<=9179||L>=9186&&L<=9215)||Ve["Control Pictures"](L)&&9251!==L||Ve["Optical Character Recognition"](L)||Ve["Enclosed Alphanumerics"](L)||Ve["Geometric Shapes"](L)||Ve["Miscellaneous Symbols"](L)&&!(L>=9754&&L<=9759)||Ve["Miscellaneous Symbols and Arrows"](L)&&(L>=11026&&L<=11055||L>=11088&&L<=11097||L>=11192&&L<=11243)||Ve["CJK Symbols and Punctuation"](L)||Ve.Katakana(L)||Ve["Private Use Area"](L)||Ve["CJK Compatibility Forms"](L)||Ve["Small Form Variants"](L)||Ve["Halfwidth and Fullwidth Forms"](L)||8734===L||8756===L||8757===L||L>=9984&&L<=10087||L>=10102&&L<=10131||65532===L||65533===L)}(L))}function Qr(L){return Ve.Arabic(L)||Ve["Arabic Supplement"](L)||Ve["Arabic Extended-A"](L)||Ve["Arabic Presentation Forms-A"](L)||Ve["Arabic Presentation Forms-B"](L)}function cn(L){return L>=1424&&L<=2303||Ve["Arabic Presentation Forms-A"](L)||Ve["Arabic Presentation Forms-B"](L)}function Dr(L,P){return!(!P&&cn(L)||L>=2304&&L<=3583||L>=3840&&L<=4255||Ve.Khmer(L))}function Nr(L){for(var P=0,B=L;P<B.length;P+=1)if(cn(B[P].charCodeAt(0)))return!0;return!1}var sn_deferred="deferred",sn_loading="loading",sn_loaded="loaded",sn_error="error",hn=null,Vr="unavailable",Rn=null,la=function(L){L&&"string"==typeof L&&L.indexOf("NetworkError")>-1&&(Vr=sn_error),hn&&hn(L)};function da(){ha.fire(new Jr("pluginStateChange",{pluginStatus:Vr,pluginURL:Rn}))}var ha=new Ar,Ca=function(){return Vr},Oa=function(){if(Vr!==sn_deferred||!Rn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Vr=sn_loading,da(),Rn&&ht({url:Rn},function(L){L?la(L):(Vr=sn_loaded,da())})},Ya={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Vr===sn_loaded||null!=Ya.applyArabicShaping},isLoading:function(){return Vr===sn_loading},setState:function(P){Vr=P.pluginStatus,Rn=P.pluginURL},isParsed:function(){return null!=Ya.applyArabicShaping&&null!=Ya.processBidirectionalText&&null!=Ya.processStyledBidirectionalText},getPluginURL:function(){return Rn}},hi=function(P,B){this.zoom=P,B?(this.now=B.now,this.fadeDuration=B.fadeDuration,this.zoomHistory=B.zoomHistory,this.transition=B.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new He,this.transition={})};hi.prototype.isSupportedScript=function(P){return function $r(L,P){for(var B=0,ee=L;B<ee.length;B+=1)if(!Dr(ee[B].charCodeAt(0),P))return!1;return!0}(P,Ya.isLoaded())},hi.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},hi.prototype.getCrossfadeParameters=function(){var P=this.zoom,B=P-Math.floor(P),ee=this.crossFadingFactor();return P>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:B+(1-B)*ee}:{fromScale:.5,toScale:1,t:1-(1-ee)*B}};var Si=function(P,B){this.property=P,this.value=B,this.expression=function Is(L,P){if(fa(L))return new pl(L,P);if(Rs(L)){var B=Fu(L,P);if("error"===B.result)throw new Error(B.value.map(function(fe){return fe.key+": "+fe.message}).join(", "));return B.value}var ee=L;return"string"==typeof L&&"color"===P.type&&(ee=gi.parse(L)),{kind:"constant",evaluate:function(){return ee}}}(void 0===B?P.specification.default:B,P.specification)};Si.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Si.prototype.possiblyEvaluate=function(P,B,ee){return this.property.possiblyEvaluate(this,P,B,ee)};var na=function(P){this.property=P,this.value=new Si(P,void 0)};na.prototype.transitioned=function(P,B){return new ui(this.property,this.value,B,y({},P.transition,this.transition),P.now)},na.prototype.untransitioned=function(){return new ui(this.property,this.value,null,{},0)};var Qa=function(P){this._properties=P,this._values=Object.create(P.defaultTransitionablePropertyValues)};Qa.prototype.getValue=function(P){return z(this._values[P].value.value)},Qa.prototype.setValue=function(P,B){this._values.hasOwnProperty(P)||(this._values[P]=new na(this._values[P].property)),this._values[P].value=new Si(this._values[P].property,null===B?void 0:z(B))},Qa.prototype.getTransition=function(P){return z(this._values[P].transition)},Qa.prototype.setTransition=function(P,B){this._values.hasOwnProperty(P)||(this._values[P]=new na(this._values[P].property)),this._values[P].transition=z(B)||void 0},Qa.prototype.serialize=function(){for(var P={},B=0,ee=Object.keys(this._values);B<ee.length;B+=1){var fe=ee[B],me=this.getValue(fe);void 0!==me&&(P[fe]=me);var Te=this.getTransition(fe);void 0!==Te&&(P[fe+"-transition"]=Te)}return P},Qa.prototype.transitioned=function(P,B){for(var ee=new Ti(this._properties),fe=0,me=Object.keys(this._values);fe<me.length;fe+=1){var Te=me[fe];ee._values[Te]=this._values[Te].transitioned(P,B._values[Te])}return ee},Qa.prototype.untransitioned=function(){for(var P=new Ti(this._properties),B=0,ee=Object.keys(this._values);B<ee.length;B+=1){var fe=ee[B];P._values[fe]=this._values[fe].untransitioned()}return P};var ui=function(P,B,ee,fe,me){this.property=P,this.value=B,this.begin=me+fe.delay||0,this.end=this.begin+fe.duration||0,P.specification.transition&&(fe.delay||fe.duration)&&(this.prior=ee)};ui.prototype.possiblyEvaluate=function(P,B,ee){var fe=P.now||0,me=this.value.possiblyEvaluate(P,B,ee),Te=this.prior;if(Te){if(fe>this.end)return this.prior=null,me;if(this.value.isDataDriven())return this.prior=null,me;if(fe<this.begin)return Te.possiblyEvaluate(P,B,ee);var Oe=(fe-this.begin)/(this.end-this.begin);return this.property.interpolate(Te.possiblyEvaluate(P,B,ee),me,function g(L){if(L<=0)return 0;if(L>=1)return 1;var P=L*L,B=P*L;return 4*(L<.5?B:3*(L-P)+B-.75)}(Oe))}return me};var Ti=function(P){this._properties=P,this._values=Object.create(P.defaultTransitioningPropertyValues)};Ti.prototype.possiblyEvaluate=function(P,B,ee){for(var fe=new Oi(this._properties),me=0,Te=Object.keys(this._values);me<Te.length;me+=1){var Oe=Te[me];fe._values[Oe]=this._values[Oe].possiblyEvaluate(P,B,ee)}return fe},Ti.prototype.hasTransition=function(){for(var P=0,B=Object.keys(this._values);P<B.length;P+=1)if(this._values[B[P]].prior)return!0;return!1};var Ki=function(P){this._properties=P,this._values=Object.create(P.defaultPropertyValues)};Ki.prototype.getValue=function(P){return z(this._values[P].value)},Ki.prototype.setValue=function(P,B){this._values[P]=new Si(this._values[P].property,null===B?void 0:z(B))},Ki.prototype.serialize=function(){for(var P={},B=0,ee=Object.keys(this._values);B<ee.length;B+=1){var fe=ee[B],me=this.getValue(fe);void 0!==me&&(P[fe]=me)}return P},Ki.prototype.possiblyEvaluate=function(P,B,ee){for(var fe=new Oi(this._properties),me=0,Te=Object.keys(this._values);me<Te.length;me+=1){var Oe=Te[me];fe._values[Oe]=this._values[Oe].possiblyEvaluate(P,B,ee)}return fe};var Vi=function(P,B,ee){this.property=P,this.value=B,this.parameters=ee};Vi.prototype.isConstant=function(){return"constant"===this.value.kind},Vi.prototype.constantOr=function(P){return"constant"===this.value.kind?this.value.value:P},Vi.prototype.evaluate=function(P,B,ee,fe){return this.property.evaluate(this.value,this.parameters,P,B,ee,fe)};var Oi=function(P){this._properties=P,this._values=Object.create(P.defaultPossiblyEvaluatedValues)};Oi.prototype.get=function(P){return this._values[P]};var Ma=function(P){this.specification=P};Ma.prototype.possiblyEvaluate=function(P,B){return P.expression.evaluate(B)},Ma.prototype.interpolate=function(P,B,ee){var fe=ru[this.specification.type];return fe?fe(P,B,ee):P};var Ia=function(P,B){this.specification=P,this.overrides=B};Ia.prototype.possiblyEvaluate=function(P,B,ee,fe){return new Vi(this,"constant"===P.expression.kind||"camera"===P.expression.kind?{kind:"constant",value:P.expression.evaluate(B,null,{},ee,fe)}:P.expression,B)},Ia.prototype.interpolate=function(P,B,ee){if("constant"!==P.value.kind||"constant"!==B.value.kind)return P;if(void 0===P.value.value||void 0===B.value.value)return new Vi(this,{kind:"constant",value:void 0},P.parameters);var fe=ru[this.specification.type];return fe?new Vi(this,{kind:"constant",value:fe(P.value.value,B.value.value,ee)},P.parameters):P},Ia.prototype.evaluate=function(P,B,ee,fe,me,Te){return"constant"===P.kind?P.value:P.evaluate(B,ee,fe,me,Te)};var qi=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.possiblyEvaluate=function(ee,fe,me,Te){if(void 0===ee.value)return new Vi(this,{kind:"constant",value:void 0},fe);if("constant"===ee.expression.kind){var Oe=ee.expression.evaluate(fe,null,{},me,Te),ft="resolvedImage"===ee.property.specification.type&&"string"!=typeof Oe?Oe.name:Oe,yt=this._calculate(ft,ft,ft,fe);return new Vi(this,{kind:"constant",value:yt},fe)}if("camera"===ee.expression.kind){var Ft=this._calculate(ee.expression.evaluate({zoom:fe.zoom-1}),ee.expression.evaluate({zoom:fe.zoom}),ee.expression.evaluate({zoom:fe.zoom+1}),fe);return new Vi(this,{kind:"constant",value:Ft},fe)}return new Vi(this,ee.expression,fe)},P.prototype.evaluate=function(ee,fe,me,Te,Oe,$e){if("source"===ee.kind){var ft=ee.evaluate(fe,me,Te,Oe,$e);return this._calculate(ft,ft,ft,fe)}return"composite"===ee.kind?this._calculate(ee.evaluate({zoom:Math.floor(fe.zoom)-1},me,Te),ee.evaluate({zoom:Math.floor(fe.zoom)},me,Te),ee.evaluate({zoom:Math.floor(fe.zoom)+1},me,Te),fe):ee.value},P.prototype._calculate=function(ee,fe,me,Te){return Te.zoom>Te.zoomHistory.lastIntegerZoom?{from:ee,to:fe}:{from:me,to:fe}},P.prototype.interpolate=function(ee){return ee},P}(Ia),mo=function(P){this.specification=P};mo.prototype.possiblyEvaluate=function(P,B,ee,fe){if(void 0!==P.value){if("constant"===P.expression.kind){var me=P.expression.evaluate(B,null,{},ee,fe);return this._calculate(me,me,me,B)}return this._calculate(P.expression.evaluate(new hi(Math.floor(B.zoom-1),B)),P.expression.evaluate(new hi(Math.floor(B.zoom),B)),P.expression.evaluate(new hi(Math.floor(B.zoom+1),B)),B)}},mo.prototype._calculate=function(P,B,ee,fe){return fe.zoom>fe.zoomHistory.lastIntegerZoom?{from:P,to:B}:{from:ee,to:B}},mo.prototype.interpolate=function(P){return P};var po=function(P){this.specification=P};po.prototype.possiblyEvaluate=function(P,B,ee,fe){return!!P.expression.evaluate(B,null,{},ee,fe)},po.prototype.interpolate=function(){return!1};var Gi=function(P){for(var B in this.properties=P,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],P){var ee=P[B];ee.specification.overridable&&this.overridableProperties.push(B);var fe=this.defaultPropertyValues[B]=new Si(ee,void 0),me=this.defaultTransitionablePropertyValues[B]=new na(ee);this.defaultTransitioningPropertyValues[B]=me.untransitioned(),this.defaultPossiblyEvaluatedValues[B]=fe.possiblyEvaluate({})}};ka("DataDrivenProperty",Ia),ka("DataConstantProperty",Ma),ka("CrossFadedDataDrivenProperty",qi),ka("CrossFadedProperty",mo),ka("ColorRampProperty",po);var zs="-transition",Ll=function(L){function P(B,ee){if(L.call(this),this.id=B.id,this.type=B.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==B.type&&(this.metadata=(B=B).metadata,this.minzoom=B.minzoom,this.maxzoom=B.maxzoom,"background"!==B.type&&(this.source=B.source,this.sourceLayer=B["source-layer"],this.filter=B.filter),ee.layout&&(this._unevaluatedLayout=new Ki(ee.layout)),ee.paint)){for(var fe in this._transitionablePaint=new Qa(ee.paint),B.paint)this.setPaintProperty(fe,B.paint[fe],{validate:!1});for(var me in B.layout)this.setLayoutProperty(me,B.layout[me],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Oi(ee.paint)}}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},P.prototype.getLayoutProperty=function(ee){return"visibility"===ee?this.visibility:this._unevaluatedLayout.getValue(ee)},P.prototype.setLayoutProperty=function(ee,fe,me){void 0===me&&(me={}),null!=fe&&this._validate(Wo,"layers."+this.id+".layout."+ee,ee,fe,me)||("visibility"!==ee?this._unevaluatedLayout.setValue(ee,fe):this.visibility=fe)},P.prototype.getPaintProperty=function(ee){return o(ee,zs)?this._transitionablePaint.getTransition(ee.slice(0,-zs.length)):this._transitionablePaint.getValue(ee)},P.prototype.setPaintProperty=function(ee,fe,me){if(void 0===me&&(me={}),null!=fe&&this._validate(Di,"layers."+this.id+".paint."+ee,ee,fe,me))return!1;if(o(ee,zs))return this._transitionablePaint.setTransition(ee.slice(0,-zs.length),fe||void 0),!1;var Oe=this._transitionablePaint._values[ee],$e="cross-faded-data-driven"===Oe.property.specification["property-type"],ft=Oe.value.isDataDriven(),yt=Oe.value;this._transitionablePaint.setValue(ee,fe),this._handleSpecialPaintPropertyUpdate(ee);var Ft=this._transitionablePaint._values[ee].value;return Ft.isDataDriven()||ft||$e||this._handleOverridablePaintPropertyUpdate(ee,yt,Ft)},P.prototype._handleSpecialPaintPropertyUpdate=function(ee){},P.prototype._handleOverridablePaintPropertyUpdate=function(ee,fe,me){return!1},P.prototype.isHidden=function(ee){return!!(this.minzoom&&ee<this.minzoom||this.maxzoom&&ee>=this.maxzoom)||"none"===this.visibility},P.prototype.updateTransitions=function(ee){this._transitioningPaint=this._transitionablePaint.transitioned(ee,this._transitioningPaint)},P.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},P.prototype.recalculate=function(ee,fe){ee.getCrossfadeParameters&&(this._crossfadeParameters=ee.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(ee,void 0,fe)),this.paint=this._transitioningPaint.possiblyEvaluate(ee,void 0,fe)},P.prototype.serialize=function(){var ee={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(ee.layout=ee.layout||{},ee.layout.visibility=this.visibility),R(ee,function(fe,me){return!(void 0===fe||"layout"===me&&!Object.keys(fe).length||"paint"===me&&!Object.keys(fe).length)})},P.prototype._validate=function(ee,fe,me,Te,Oe){return void 0===Oe&&(Oe={}),(!Oe||!1!==Oe.validate)&&vo(this,ee.call(ho,{key:fe,layerType:this.type,objectKey:me,value:Te,styleSpec:Ht,style:{glyphs:!0,sprite:!0}}))},P.prototype.is3D=function(){return!1},P.prototype.isTileClipped=function(){return!1},P.prototype.hasOffscreenPass=function(){return!1},P.prototype.resize=function(){},P.prototype.isStateDependent=function(){for(var ee in this.paint._values){var fe=this.paint.get(ee);if(fe instanceof Vi&&ci(fe.property.specification)&&("source"===fe.value.kind||"composite"===fe.value.kind)&&fe.value.isStateDependent)return!0}return!1},P}(Ar),Fs={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ki=function(P,B){this._structArray=P,this._pos1=B*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},pi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function oo(L,P){void 0===P&&(P=1);var B=0,ee=0;return{members:L.map(function(Te){var Oe=function bu(L){return Fs[L].BYTES_PER_ELEMENT}(Te.type),$e=B=ml(B,Math.max(P,Oe)),ft=Te.components||1;return ee=Math.max(ee,Oe),B+=Oe*ft,{name:Te.name,type:Te.type,components:ft,offset:$e}}),size:ml(B,Math.max(ee,P)),alignment:P}}function ml(L,P){return Math.ceil(L/P)*P}pi.serialize=function(P,B){return P._trim(),B&&(P.isTransferred=!0,B.push(P.arrayBuffer)),{length:P.length,arrayBuffer:P.arrayBuffer}},pi.deserialize=function(P){var B=Object.create(this.prototype);return B.arrayBuffer=P.arrayBuffer,B.length=P.length,B.capacity=P.arrayBuffer.byteLength/B.bytesPerElement,B._refreshViews(),B},pi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},pi.prototype.clear=function(){this.length=0},pi.prototype.resize=function(P){this.reserve(P),this.length=P},pi.prototype.reserve=function(P){if(P>this.capacity){this.capacity=Math.max(P,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var B=this.uint8;this._refreshViews(),B&&this.uint8.set(B)}},pi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var su=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ee,fe){var me=this.length;return this.resize(me+1),this.emplace(me,ee,fe)},P.prototype.emplace=function(ee,fe,me){var Te=2*ee;return this.int16[Te+0]=fe,this.int16[Te+1]=me,ee},P}(pi);su.prototype.bytesPerElement=4,ka("StructArrayLayout2i4",su);var Yl=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ee,fe,me,Te){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,ee,fe,me,Te)},P.prototype.emplace=function(ee,fe,me,Te,Oe){var $e=4*ee;return this.int16[$e+0]=fe,this.int16[$e+1]=me,this.int16[$e+2]=Te,this.int16[$e+3]=Oe,ee},P}(pi);Yl.prototype.bytesPerElement=8,ka("StructArrayLayout4i8",Yl);var ac=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ee,fe,me,Te,Oe,$e){var ft=this.length;return this.resize(ft+1),this.emplace(ft,ee,fe,me,Te,Oe,$e)},P.prototype.emplace=function(ee,fe,me,Te,Oe,$e,ft){var yt=6*ee;return this.int16[yt+0]=fe,this.int16[yt+1]=me,this.int16[yt+2]=Te,this.int16[yt+3]=Oe,this.int16[yt+4]=$e,this.int16[yt+5]=ft,ee},P}(pi);ac.prototype.bytesPerElement=12,ka("StructArrayLayout2i4i12",ac);var Sc=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ee,fe,me,Te,Oe,$e){var ft=this.length;return this.resize(ft+1),this.emplace(ft,ee,fe,me,Te,Oe,$e)},P.prototype.emplace=function(ee,fe,me,Te,Oe,$e,ft){var yt=4*ee,Ft=8*ee;return this.int16[yt+0]=fe,this.int16[yt+1]=me,this.uint8[Ft+4]=Te,this.uint8[Ft+5]=Oe,this.uint8[Ft+6]=$e,this.uint8[Ft+7]=ft,ee},P}(pi);Sc.prototype.bytesPerElement=8,ka("StructArrayLayout2i4ub8",Sc);var Os=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ee,fe,me,Te,Oe,$e,ft,yt,Ft,tr){var Kt=this.length;return this.resize(Kt+1),this.emplace(Kt,ee,fe,me,Te,Oe,$e,ft,yt,Ft,tr)},P.prototype.emplace=function(ee,fe,me,Te,Oe,$e,ft,yt,Ft,tr,Kt){var xr=9*ee,Fr=18*ee;return this.uint16[xr+0]=fe,this.uint16[xr+1]=me,this.uint16[xr+2]=Te,this.uint16[xr+3]=Oe,this.uint16[xr+4]=$e,this.uint16[xr+5]=ft,this.uint16[xr+6]=yt,this.uint16[xr+7]=Ft,this.uint8[Fr+16]=tr,this.uint8[Fr+17]=Kt,ee},P}(pi);Os.prototype.bytesPerElement=18,ka("StructArrayLayout8ui2ub18",Os);var Uu=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ee,fe,me,Te,Oe,$e,ft,yt,Ft,tr,Kt,xr){var Fr=this.length;return this.resize(Fr+1),this.emplace(Fr,ee,fe,me,Te,Oe,$e,ft,yt,Ft,tr,Kt,xr)},P.prototype.emplace=function(ee,fe,me,Te,Oe,$e,ft,yt,Ft,tr,Kt,xr,Fr){var fn=12*ee;return this.int16[fn+0]=fe,this.int16[fn+1]=me,this.int16[fn+2]=Te,this.int16[fn+3]=Oe,this.uint16[fn+4]=$e,this.uint16[fn+5]=ft,this.uint16[fn+6]=yt,this.uint16[fn+7]=Ft,this.int16[fn+8]=tr,this.int16[fn+9]=Kt,this.int16[fn+10]=xr,this.int16[fn+11]=Fr,ee},P}(pi);Uu.prototype.bytesPerElement=24,ka("StructArrayLayout4i4ui4i24",Uu);var $c=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ee,fe,me){var Te=this.length;return this.resize(Te+1),this.emplace(Te,ee,fe,me)},P.prototype.emplace=function(ee,fe,me,Te){var Oe=3*ee;return this.float32[Oe+0]=fe,this.float32[Oe+1]=me,this.float32[Oe+2]=Te,ee},P}(pi);$c.prototype.bytesPerElement=12,ka("StructArrayLayout3f12",$c);var qc=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ee){var fe=this.length;return this.resize(fe+1),this.emplace(fe,ee)},P.prototype.emplace=function(ee,fe){return this.uint32[1*ee+0]=fe,ee},P}(pi);qc.prototype.bytesPerElement=4,ka("StructArrayLayout1ul4",qc);var gc=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ee,fe,me,Te,Oe,$e,ft,yt,Ft){var tr=this.length;return this.resize(tr+1),this.emplace(tr,ee,fe,me,Te,Oe,$e,ft,yt,Ft)},P.prototype.emplace=function(ee,fe,me,Te,Oe,$e,ft,yt,Ft,tr){var Kt=10*ee,xr=5*ee;return this.int16[Kt+0]=fe,this.int16[Kt+1]=me,this.int16[Kt+2]=Te,this.int16[Kt+3]=Oe,this.int16[Kt+4]=$e,this.int16[Kt+5]=ft,this.uint32[xr+3]=yt,this.uint16[Kt+8]=Ft,this.uint16[Kt+9]=tr,ee},P}(pi);gc.prototype.bytesPerElement=20,ka("StructArrayLayout6i1ul2ui20",gc);var kc=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ee,fe,me,Te,Oe,$e){var ft=this.length;return this.resize(ft+1),this.emplace(ft,ee,fe,me,Te,Oe,$e)},P.prototype.emplace=function(ee,fe,me,Te,Oe,$e,ft){var yt=6*ee;return this.int16[yt+0]=fe,this.int16[yt+1]=me,this.int16[yt+2]=Te,this.int16[yt+3]=Oe,this.int16[yt+4]=$e,this.int16[yt+5]=ft,ee},P}(pi);kc.prototype.bytesPerElement=12,ka("StructArrayLayout2i2i2i12",kc);var _u=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ee,fe,me,Te,Oe){var $e=this.length;return this.resize($e+1),this.emplace($e,ee,fe,me,Te,Oe)},P.prototype.emplace=function(ee,fe,me,Te,Oe,$e){var ft=4*ee,yt=8*ee;return this.float32[ft+0]=fe,this.float32[ft+1]=me,this.float32[ft+2]=Te,this.int16[yt+6]=Oe,this.int16[yt+7]=$e,ee},P}(pi);_u.prototype.bytesPerElement=16,ka("StructArrayLayout2f1f2i16",_u);var qs=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ee,fe,me,Te){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,ee,fe,me,Te)},P.prototype.emplace=function(ee,fe,me,Te,Oe){var $e=12*ee,ft=3*ee;return this.uint8[$e+0]=fe,this.uint8[$e+1]=me,this.float32[ft+1]=Te,this.float32[ft+2]=Oe,ee},P}(pi);qs.prototype.bytesPerElement=12,ka("StructArrayLayout2ub2f12",qs);var wu=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ee,fe,me){var Te=this.length;return this.resize(Te+1),this.emplace(Te,ee,fe,me)},P.prototype.emplace=function(ee,fe,me,Te){var Oe=3*ee;return this.uint16[Oe+0]=fe,this.uint16[Oe+1]=me,this.uint16[Oe+2]=Te,ee},P}(pi);wu.prototype.bytesPerElement=6,ka("StructArrayLayout3ui6",wu);var yc=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ee,fe,me,Te,Oe,$e,ft,yt,Ft,tr,Kt,xr,Fr,fn,nn,Sn,xn){var Mn=this.length;return this.resize(Mn+1),this.emplace(Mn,ee,fe,me,Te,Oe,$e,ft,yt,Ft,tr,Kt,xr,Fr,fn,nn,Sn,xn)},P.prototype.emplace=function(ee,fe,me,Te,Oe,$e,ft,yt,Ft,tr,Kt,xr,Fr,fn,nn,Sn,xn,Mn){var In=24*ee,Hn=12*ee,oa=48*ee;return this.int16[In+0]=fe,this.int16[In+1]=me,this.uint16[In+2]=Te,this.uint16[In+3]=Oe,this.uint32[Hn+2]=$e,this.uint32[Hn+3]=ft,this.uint32[Hn+4]=yt,this.uint16[In+10]=Ft,this.uint16[In+11]=tr,this.uint16[In+12]=Kt,this.float32[Hn+7]=xr,this.float32[Hn+8]=Fr,this.uint8[oa+36]=fn,this.uint8[oa+37]=nn,this.uint8[oa+38]=Sn,this.uint32[Hn+10]=xn,this.int16[In+22]=Mn,ee},P}(pi);yc.prototype.bytesPerElement=48,ka("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",yc);var Cc=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ee,fe,me,Te,Oe,$e,ft,yt,Ft,tr,Kt,xr,Fr,fn,nn,Sn,xn,Mn,In,Hn,oa,aa,Na,ba,Sa,ni,Pa,za){var vi=this.length;return this.resize(vi+1),this.emplace(vi,ee,fe,me,Te,Oe,$e,ft,yt,Ft,tr,Kt,xr,Fr,fn,nn,Sn,xn,Mn,In,Hn,oa,aa,Na,ba,Sa,ni,Pa,za)},P.prototype.emplace=function(ee,fe,me,Te,Oe,$e,ft,yt,Ft,tr,Kt,xr,Fr,fn,nn,Sn,xn,Mn,In,Hn,oa,aa,Na,ba,Sa,ni,Pa,za,vi){var ei=34*ee,Ii=17*ee;return this.int16[ei+0]=fe,this.int16[ei+1]=me,this.int16[ei+2]=Te,this.int16[ei+3]=Oe,this.int16[ei+4]=$e,this.int16[ei+5]=ft,this.int16[ei+6]=yt,this.int16[ei+7]=Ft,this.uint16[ei+8]=tr,this.uint16[ei+9]=Kt,this.uint16[ei+10]=xr,this.uint16[ei+11]=Fr,this.uint16[ei+12]=fn,this.uint16[ei+13]=nn,this.uint16[ei+14]=Sn,this.uint16[ei+15]=xn,this.uint16[ei+16]=Mn,this.uint16[ei+17]=In,this.uint16[ei+18]=Hn,this.uint16[ei+19]=oa,this.uint16[ei+20]=aa,this.uint16[ei+21]=Na,this.uint16[ei+22]=ba,this.uint32[Ii+12]=Sa,this.float32[Ii+13]=ni,this.float32[Ii+14]=Pa,this.float32[Ii+15]=za,this.float32[Ii+16]=vi,ee},P}(pi);Cc.prototype.bytesPerElement=68,ka("StructArrayLayout8i15ui1ul4f68",Cc);var ic=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ee){var fe=this.length;return this.resize(fe+1),this.emplace(fe,ee)},P.prototype.emplace=function(ee,fe){return this.float32[1*ee+0]=fe,ee},P}(pi);ic.prototype.bytesPerElement=4,ka("StructArrayLayout1f4",ic);var ef=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ee,fe,me){var Te=this.length;return this.resize(Te+1),this.emplace(Te,ee,fe,me)},P.prototype.emplace=function(ee,fe,me,Te){var Oe=3*ee;return this.int16[Oe+0]=fe,this.int16[Oe+1]=me,this.int16[Oe+2]=Te,ee},P}(pi);ef.prototype.bytesPerElement=6,ka("StructArrayLayout3i6",ef);var Vu=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ee,fe,me){var Te=this.length;return this.resize(Te+1),this.emplace(Te,ee,fe,me)},P.prototype.emplace=function(ee,fe,me,Te){var $e=4*ee;return this.uint32[2*ee+0]=fe,this.uint16[$e+2]=me,this.uint16[$e+3]=Te,ee},P}(pi);Vu.prototype.bytesPerElement=8,ka("StructArrayLayout1ul2ui8",Vu);var mc=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ee,fe){var me=this.length;return this.resize(me+1),this.emplace(me,ee,fe)},P.prototype.emplace=function(ee,fe,me){var Te=2*ee;return this.uint16[Te+0]=fe,this.uint16[Te+1]=me,ee},P}(pi);mc.prototype.bytesPerElement=4,ka("StructArrayLayout2ui4",mc);var oc=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ee){var fe=this.length;return this.resize(fe+1),this.emplace(fe,ee)},P.prototype.emplace=function(ee,fe){return this.uint16[1*ee+0]=fe,ee},P}(pi);oc.prototype.bytesPerElement=2,ka("StructArrayLayout1ui2",oc);var Hu=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ee,fe){var me=this.length;return this.resize(me+1),this.emplace(me,ee,fe)},P.prototype.emplace=function(ee,fe,me){var Te=2*ee;return this.float32[Te+0]=fe,this.float32[Te+1]=me,ee},P}(pi);Hu.prototype.bytesPerElement=8,ka("StructArrayLayout2f8",Hu);var tf=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ee,fe,me,Te){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,ee,fe,me,Te)},P.prototype.emplace=function(ee,fe,me,Te,Oe){var $e=4*ee;return this.float32[$e+0]=fe,this.float32[$e+1]=me,this.float32[$e+2]=Te,this.float32[$e+3]=Oe,ee},P}(pi);tf.prototype.bytesPerElement=16,ka("StructArrayLayout4f16",tf);var _f=function(L){function P(){L.apply(this,arguments)}L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P;var B={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return B.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},B.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},B.x1.get=function(){return this._structArray.int16[this._pos2+2]},B.y1.get=function(){return this._structArray.int16[this._pos2+3]},B.x2.get=function(){return this._structArray.int16[this._pos2+4]},B.y2.get=function(){return this._structArray.int16[this._pos2+5]},B.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},B.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},B.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},B.anchorPoint.get=function(){return new i(this.anchorPointX,this.anchorPointY)},Object.defineProperties(P.prototype,B),P}(ki);_f.prototype.size=20;var Gu=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.get=function(ee){return new _f(this,ee)},P}(gc);ka("CollisionBoxArray",Gu);var rf=function(L){function P(){L.apply(this,arguments)}L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P;var B={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return B.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},B.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},B.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},B.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},B.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},B.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},B.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},B.segment.get=function(){return this._structArray.uint16[this._pos2+10]},B.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},B.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},B.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},B.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},B.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},B.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},B.placedOrientation.set=function(ee){this._structArray.uint8[this._pos1+37]=ee},B.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},B.hidden.set=function(ee){this._structArray.uint8[this._pos1+38]=ee},B.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},B.crossTileID.set=function(ee){this._structArray.uint32[this._pos4+10]=ee},B.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(P.prototype,B),P}(ki);rf.prototype.size=48;var sc=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.get=function(ee){return new rf(this,ee)},P}(yc);ka("PlacedSymbolArray",sc);var wf=function(L){function P(){L.apply(this,arguments)}L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P;var B={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return B.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},B.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},B.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},B.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},B.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},B.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},B.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},B.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},B.key.get=function(){return this._structArray.uint16[this._pos2+8]},B.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},B.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},B.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},B.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},B.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},B.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},B.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},B.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},B.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},B.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},B.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},B.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},B.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},B.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},B.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},B.crossTileID.set=function(ee){this._structArray.uint32[this._pos4+12]=ee},B.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},B.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},B.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},B.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(P.prototype,B),P}(ki);wf.prototype.size=68;var Tf=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.get=function(ee){return new wf(this,ee)},P}(Cc);ka("SymbolInstanceArray",Tf);var Wl=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getoffsetX=function(ee){return this.float32[1*ee+0]},P}(ic);ka("GlyphOffsetArray",Wl);var Af=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getx=function(ee){return this.int16[3*ee+0]},P.prototype.gety=function(ee){return this.int16[3*ee+1]},P.prototype.gettileUnitDistanceFromAnchor=function(ee){return this.int16[3*ee+2]},P}(ef);ka("SymbolLineVertexArray",Af);var Mf=function(L){function P(){L.apply(this,arguments)}L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P;var B={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return B.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},B.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},B.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(P.prototype,B),P}(ki);Mf.prototype.size=8;var nf=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.get=function(ee){return new Mf(this,ee)},P}(Vu);ka("FeatureIndexArray",nf);var ce=oo([{name:"a_pos",components:2,type:"Int16"}],4).members,Z=function(P){void 0===P&&(P=[]),this.segments=P};function he(L,P){return 256*(L=x(Math.floor(L),0,255))+x(Math.floor(P),0,255)}Z.prototype.prepareSegment=function(P,B,ee,fe){var me=this.segments[this.segments.length-1];return P>Z.MAX_VERTEX_ARRAY_LENGTH&&F("Max vertices per segment is "+Z.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+P),(!me||me.vertexLength+P>Z.MAX_VERTEX_ARRAY_LENGTH||me.sortKey!==fe)&&(me={vertexOffset:B.length,primitiveOffset:ee.length,vertexLength:0,primitiveLength:0},void 0!==fe&&(me.sortKey=fe),this.segments.push(me)),me},Z.prototype.get=function(){return this.segments},Z.prototype.destroy=function(){for(var P=0,B=this.segments;P<B.length;P+=1){var ee=B[P];for(var fe in ee.vaos)ee.vaos[fe].destroy()}},Z.simpleSegment=function(P,B,ee,fe){return new Z([{vertexOffset:P,primitiveOffset:B,vertexLength:ee,primitiveLength:fe,vaos:{},sortKey:0}])},Z.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ka("SegmentVector",Z);var Q=oo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),ve=c(function(L){L.exports=function P(B,ee){var fe,me,Te,Oe,$e,ft,yt,Ft;for(me=B.length-(fe=3&B.length),Te=ee,$e=3432918353,ft=461845907,Ft=0;Ft<me;)yt=255&B.charCodeAt(Ft)|(255&B.charCodeAt(++Ft))<<8|(255&B.charCodeAt(++Ft))<<16|(255&B.charCodeAt(++Ft))<<24,++Ft,Te=27492+(65535&(Oe=5*(65535&(Te=(Te^=yt=(65535&(yt=(yt=(65535&yt)*$e+(((yt>>>16)*$e&65535)<<16)&4294967295)<<15|yt>>>17))*ft+(((yt>>>16)*ft&65535)<<16)&4294967295)<<13|Te>>>19))+((5*(Te>>>16)&65535)<<16)&4294967295))+((58964+(Oe>>>16)&65535)<<16);switch(yt=0,fe){case 3:yt^=(255&B.charCodeAt(Ft+2))<<16;case 2:yt^=(255&B.charCodeAt(Ft+1))<<8;case 1:Te^=yt=(65535&(yt=(yt=(65535&(yt^=255&B.charCodeAt(Ft)))*$e+(((yt>>>16)*$e&65535)<<16)&4294967295)<<15|yt>>>17))*ft+(((yt>>>16)*ft&65535)<<16)&4294967295}return Te^=B.length,Te=2246822507*(65535&(Te^=Te>>>16))+((2246822507*(Te>>>16)&65535)<<16)&4294967295,Te=3266489909*(65535&(Te^=Te>>>13))+((3266489909*(Te>>>16)&65535)<<16)&4294967295,(Te^=Te>>>16)>>>0}}),Ae=c(function(L){L.exports=function P(B,ee){for(var Oe,fe=B.length,me=ee^fe,Te=0;fe>=4;)Oe=1540483477*(65535&(Oe=255&B.charCodeAt(Te)|(255&B.charCodeAt(++Te))<<8|(255&B.charCodeAt(++Te))<<16|(255&B.charCodeAt(++Te))<<24))+((1540483477*(Oe>>>16)&65535)<<16),me=1540483477*(65535&me)+((1540483477*(me>>>16)&65535)<<16)^(Oe=1540483477*(65535&(Oe^=Oe>>>24))+((1540483477*(Oe>>>16)&65535)<<16)),fe-=4,++Te;switch(fe){case 3:me^=(255&B.charCodeAt(Te+2))<<16;case 2:me^=(255&B.charCodeAt(Te+1))<<8;case 1:me=1540483477*(65535&(me^=255&B.charCodeAt(Te)))+((1540483477*(me>>>16)&65535)<<16)}return me=1540483477*(65535&(me^=me>>>13))+((1540483477*(me>>>16)&65535)<<16),(me^=me>>>15)>>>0}}),Re=ve,ut=Ae;Re.murmur3=ve,Re.murmur2=ut;var Mt=function(){this.ids=[],this.positions=[],this.indexed=!1};Mt.prototype.add=function(P,B,ee,fe){this.ids.push(ur(P)),this.positions.push(B,ee,fe)},Mt.prototype.getPositions=function(P){for(var B=ur(P),ee=0,fe=this.ids.length-1;ee<fe;){var me=ee+fe>>1;this.ids[me]>=B?fe=me:ee=me+1}for(var Te=[];this.ids[ee]===B;)Te.push({index:this.positions[3*ee],start:this.positions[3*ee+1],end:this.positions[3*ee+2]}),ee++;return Te},Mt.serialize=function(P,B){var ee=new Float64Array(P.ids),fe=new Uint32Array(P.positions);return gr(ee,fe,0,ee.length-1),B&&B.push(ee.buffer,fe.buffer),{ids:ee,positions:fe}},Mt.deserialize=function(P){var B=new Mt;return B.ids=P.ids,B.positions=P.positions,B.indexed=!0,B};var jt=Math.pow(2,53)-1;function ur(L){var P=+L;return!isNaN(P)&&P<=jt?P:Re(String(L))}function gr(L,P,B,ee){for(;B<ee;){for(var fe=L[B+ee>>1],me=B-1,Te=ee+1;;){do{me++}while(L[me]<fe);do{Te--}while(L[Te]>fe);if(me>=Te)break;Pr(L,me,Te),Pr(P,3*me,3*Te),Pr(P,3*me+1,3*Te+1),Pr(P,3*me+2,3*Te+2)}Te-B<ee-Te?(gr(L,P,B,Te),B=Te+1):(gr(L,P,Te+1,ee),ee=Te)}}function Pr(L,P,B){var ee=L[P];L[P]=L[B],L[B]=ee}ka("FeaturePositionMap",Mt);var Gr=function(P,B){this.gl=P.gl,this.location=B},Yr=function(L){function P(B,ee){L.call(this,B,ee),this.current=0}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.set=function(ee){this.current!==ee&&(this.current=ee,this.gl.uniform1i(this.location,ee))},P}(Gr),Ur=function(L){function P(B,ee){L.call(this,B,ee),this.current=0}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.set=function(ee){this.current!==ee&&(this.current=ee,this.gl.uniform1f(this.location,ee))},P}(Gr),tn=function(L){function P(B,ee){L.call(this,B,ee),this.current=[0,0]}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.set=function(ee){(ee[0]!==this.current[0]||ee[1]!==this.current[1])&&(this.current=ee,this.gl.uniform2f(this.location,ee[0],ee[1]))},P}(Gr),pn=function(L){function P(B,ee){L.call(this,B,ee),this.current=[0,0,0]}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.set=function(ee){(ee[0]!==this.current[0]||ee[1]!==this.current[1]||ee[2]!==this.current[2])&&(this.current=ee,this.gl.uniform3f(this.location,ee[0],ee[1],ee[2]))},P}(Gr),Cn=function(L){function P(B,ee){L.call(this,B,ee),this.current=[0,0,0,0]}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.set=function(ee){(ee[0]!==this.current[0]||ee[1]!==this.current[1]||ee[2]!==this.current[2]||ee[3]!==this.current[3])&&(this.current=ee,this.gl.uniform4f(this.location,ee[0],ee[1],ee[2],ee[3]))},P}(Gr),Nn=function(L){function P(B,ee){L.call(this,B,ee),this.current=gi.transparent}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.set=function(ee){(ee.r!==this.current.r||ee.g!==this.current.g||ee.b!==this.current.b||ee.a!==this.current.a)&&(this.current=ee,this.gl.uniform4f(this.location,ee.r,ee.g,ee.b,ee.a))},P}(Gr),Kn=new Float32Array(16),qn=function(L){function P(B,ee){L.call(this,B,ee),this.current=Kn}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.set=function(ee){if(ee[12]!==this.current[12]||ee[0]!==this.current[0])return this.current=ee,void this.gl.uniformMatrix4fv(this.location,!1,ee);for(var fe=1;fe<16;fe++)if(ee[fe]!==this.current[fe]){this.current=ee,this.gl.uniformMatrix4fv(this.location,!1,ee);break}},P}(Gr);function Qn(L){return[he(255*L.r,255*L.g),he(255*L.b,255*L.a)]}var ua=function(P,B,ee){this.value=P,this.uniformNames=B.map(function(fe){return"u_"+fe}),this.type=ee};ua.prototype.setUniform=function(P,B,ee){P.set(ee.constantOr(this.value))},ua.prototype.getBinding=function(P,B,ee){return"color"===this.type?new Nn(P,B):new Ur(P,B)};var ya=function(P,B){this.uniformNames=B.map(function(ee){return"u_"+ee}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};ya.prototype.setConstantPatternPositions=function(P,B){this.pixelRatioFrom=B.pixelRatio,this.pixelRatioTo=P.pixelRatio,this.patternFrom=B.tlbr,this.patternTo=P.tlbr},ya.prototype.setUniform=function(P,B,ee,fe){var me="u_pattern_to"===fe?this.patternTo:"u_pattern_from"===fe?this.patternFrom:"u_pixel_ratio_to"===fe?this.pixelRatioTo:"u_pixel_ratio_from"===fe?this.pixelRatioFrom:null;me&&P.set(me)},ya.prototype.getBinding=function(P,B,ee){return"u_pattern"===ee.substr(0,9)?new Cn(P,B):new Ur(P,B)};var ga=function(P,B,ee,fe){this.expression=P,this.type=ee,this.maxValue=0,this.paintVertexAttributes=B.map(function(me){return{name:"a_"+me,type:"Float32",components:"color"===ee?2:1,offset:0}}),this.paintVertexArray=new fe};ga.prototype.populatePaintArray=function(P,B,ee,fe,me){var Te=this.paintVertexArray.length,Oe=this.expression.evaluate(new hi(0),B,{},fe,[],me);this.paintVertexArray.resize(P),this._setPaintValue(Te,P,Oe)},ga.prototype.updatePaintArray=function(P,B,ee,fe){var me=this.expression.evaluate({zoom:0},ee,fe);this._setPaintValue(P,B,me)},ga.prototype._setPaintValue=function(P,B,ee){if("color"===this.type)for(var fe=Qn(ee),me=P;me<B;me++)this.paintVertexArray.emplace(me,fe[0],fe[1]);else{for(var Te=P;Te<B;Te++)this.paintVertexArray.emplace(Te,ee);this.maxValue=Math.max(this.maxValue,Math.abs(ee))}},ga.prototype.upload=function(P){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=P.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ga.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ta=function(P,B,ee,fe,me,Te){this.expression=P,this.uniformNames=B.map(function(Oe){return"u_"+Oe+"_t"}),this.type=ee,this.useIntegerZoom=fe,this.zoom=me,this.maxValue=0,this.paintVertexAttributes=B.map(function(Oe){return{name:"a_"+Oe,type:"Float32",components:"color"===ee?4:2,offset:0}}),this.paintVertexArray=new Te};Ta.prototype.populatePaintArray=function(P,B,ee,fe,me){var Te=this.expression.evaluate(new hi(this.zoom),B,{},fe,[],me),Oe=this.expression.evaluate(new hi(this.zoom+1),B,{},fe,[],me),$e=this.paintVertexArray.length;this.paintVertexArray.resize(P),this._setPaintValue($e,P,Te,Oe)},Ta.prototype.updatePaintArray=function(P,B,ee,fe){var me=this.expression.evaluate({zoom:this.zoom},ee,fe),Te=this.expression.evaluate({zoom:this.zoom+1},ee,fe);this._setPaintValue(P,B,me,Te)},Ta.prototype._setPaintValue=function(P,B,ee,fe){if("color"===this.type)for(var me=Qn(ee),Te=Qn(fe),Oe=P;Oe<B;Oe++)this.paintVertexArray.emplace(Oe,me[0],me[1],Te[0],Te[1]);else{for(var $e=P;$e<B;$e++)this.paintVertexArray.emplace($e,ee,fe);this.maxValue=Math.max(this.maxValue,Math.abs(ee),Math.abs(fe))}},Ta.prototype.upload=function(P){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=P.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ta.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ta.prototype.setUniform=function(P,B){var ee=this.useIntegerZoom?Math.floor(B.zoom):B.zoom,fe=x(this.expression.interpolationFactor(ee,this.zoom,this.zoom+1),0,1);P.set(fe)},Ta.prototype.getBinding=function(P,B,ee){return new Ur(P,B)};var La=function(P,B,ee,fe,me,Te){this.expression=P,this.type=B,this.useIntegerZoom=ee,this.zoom=fe,this.layerId=Te,this.zoomInPaintVertexArray=new me,this.zoomOutPaintVertexArray=new me};La.prototype.populatePaintArray=function(P,B,ee){var fe=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(P),this.zoomOutPaintVertexArray.resize(P),this._setPaintValues(fe,P,B.patterns&&B.patterns[this.layerId],ee)},La.prototype.updatePaintArray=function(P,B,ee,fe,me){this._setPaintValues(P,B,ee.patterns&&ee.patterns[this.layerId],me)},La.prototype._setPaintValues=function(P,B,ee,fe){if(fe&&ee){var $e=fe[ee.min],ft=fe[ee.mid],yt=fe[ee.max];if($e&&ft&&yt)for(var Ft=P;Ft<B;Ft++)this.zoomInPaintVertexArray.emplace(Ft,ft.tl[0],ft.tl[1],ft.br[0],ft.br[1],$e.tl[0],$e.tl[1],$e.br[0],$e.br[1],ft.pixelRatio,$e.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ft,ft.tl[0],ft.tl[1],ft.br[0],ft.br[1],yt.tl[0],yt.tl[1],yt.br[0],yt.br[1],ft.pixelRatio,yt.pixelRatio)}},La.prototype.upload=function(P){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=P.createVertexBuffer(this.zoomInPaintVertexArray,Q.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=P.createVertexBuffer(this.zoomOutPaintVertexArray,Q.members,this.expression.isStateDependent))},La.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Wa=function(P,B,ee,fe){this.binders={},this.layoutAttributes=fe,this._buffers=[];var me=[];for(var Te in P.paint._values)if(ee(Te)){var Oe=P.paint.get(Te);if(Oe instanceof Vi&&ci(Oe.property.specification)){var $e=Ni(Te,P.type),ft=Oe.value,yt=Oe.property.specification.type,Ft=Oe.property.useIntegerZoom,tr=Oe.property.specification["property-type"],Kt="cross-faded"===tr||"cross-faded-data-driven"===tr;if("constant"===ft.kind)this.binders[Te]=Kt?new ya(ft.value,$e):new ua(ft.value,$e,yt),me.push("/u_"+Te);else if("source"===ft.kind||Kt){var xr=bi(Te,yt,"source");this.binders[Te]=Kt?new La(ft,yt,Ft,B,xr,P.id):new ga(ft,$e,yt,xr),me.push("/a_"+Te)}else{var Fr=bi(Te,yt,"composite");this.binders[Te]=new Ta(ft,$e,yt,Ft,B,Fr),me.push("/z_"+Te)}}}this.cacheKey=me.sort().join("")};Wa.prototype.getMaxValue=function(P){var B=this.binders[P];return B instanceof ga||B instanceof Ta?B.maxValue:0},Wa.prototype.populatePaintArrays=function(P,B,ee,fe,me){for(var Te in this.binders){var Oe=this.binders[Te];(Oe instanceof ga||Oe instanceof Ta||Oe instanceof La)&&Oe.populatePaintArray(P,B,ee,fe,me)}},Wa.prototype.setConstantPatternPositions=function(P,B){for(var ee in this.binders){var fe=this.binders[ee];fe instanceof ya&&fe.setConstantPatternPositions(P,B)}},Wa.prototype.updatePaintArrays=function(P,B,ee,fe,me){var Te=!1;for(var Oe in P)for(var ft=0,yt=B.getPositions(Oe);ft<yt.length;ft+=1){var Ft=yt[ft],tr=ee.feature(Ft.index);for(var Kt in this.binders){var xr=this.binders[Kt];if((xr instanceof ga||xr instanceof Ta||xr instanceof La)&&!0===xr.expression.isStateDependent){var Fr=fe.paint.get(Kt);xr.expression=Fr.value,xr.updatePaintArray(Ft.start,Ft.end,tr,P[Oe],me),Te=!0}}}return Te},Wa.prototype.defines=function(){var P=[];for(var B in this.binders){var ee=this.binders[B];(ee instanceof ua||ee instanceof ya)&&P.push.apply(P,ee.uniformNames.map(function(fe){return"#define HAS_UNIFORM_"+fe}))}return P},Wa.prototype.getPaintVertexBuffers=function(){return this._buffers},Wa.prototype.getUniforms=function(P,B){var ee=[];for(var fe in this.binders){var me=this.binders[fe];if(me instanceof ua||me instanceof ya||me instanceof Ta)for(var Te=0,Oe=me.uniformNames;Te<Oe.length;Te+=1){var $e=Oe[Te];if(B[$e]){var ft=me.getBinding(P,B[$e],$e);ee.push({name:$e,property:fe,binding:ft})}}}return ee},Wa.prototype.setUniforms=function(P,B,ee,fe){for(var me=0,Te=B;me<Te.length;me+=1){var Oe=Te[me],$e=Oe.name,ft=Oe.property;this.binders[ft].setUniform(Oe.binding,fe,ee.get(ft),$e)}},Wa.prototype.updatePaintBuffers=function(P){for(var B in this._buffers=[],this.binders){var ee=this.binders[B];if(P&&ee instanceof La){var fe=2===P.fromScale?ee.zoomInPaintVertexBuffer:ee.zoomOutPaintVertexBuffer;fe&&this._buffers.push(fe)}else(ee instanceof ga||ee instanceof Ta)&&ee.paintVertexBuffer&&this._buffers.push(ee.paintVertexBuffer)}},Wa.prototype.upload=function(P){for(var B in this.binders){var ee=this.binders[B];(ee instanceof ga||ee instanceof Ta||ee instanceof La)&&ee.upload(P)}this.updatePaintBuffers()},Wa.prototype.destroy=function(){for(var P in this.binders){var B=this.binders[P];(B instanceof ga||B instanceof Ta||B instanceof La)&&B.destroy()}};var ii=function(P,B,ee,fe){void 0===fe&&(fe=function(){return!0}),this.programConfigurations={};for(var me=0,Te=B;me<Te.length;me+=1){var Oe=Te[me];this.programConfigurations[Oe.id]=new Wa(Oe,ee,fe,P)}this.needsUpload=!1,this._featureMap=new Mt,this._bufferOffset=0};function Ni(L,P){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[L]||[L.replace(P+"-","").replace(/-/g,"_")]}function bi(L,P,B){var ee={color:{source:Hu,composite:tf},number:{source:ic,composite:Hu}},fe=function fi(L){return{"line-pattern":{source:Os,composite:Os},"fill-pattern":{source:Os,composite:Os},"fill-extrusion-pattern":{source:Os,composite:Os}}[L]}(L);return fe&&fe[B]||ee[P][B]}ii.prototype.populatePaintArrays=function(P,B,ee,fe,me,Te){for(var Oe in this.programConfigurations)this.programConfigurations[Oe].populatePaintArrays(P,B,fe,me,Te);void 0!==B.id&&this._featureMap.add(B.id,ee,this._bufferOffset,P),this._bufferOffset=P,this.needsUpload=!0},ii.prototype.updatePaintArrays=function(P,B,ee,fe){for(var me=0,Te=ee;me<Te.length;me+=1){var Oe=Te[me];this.needsUpload=this.programConfigurations[Oe.id].updatePaintArrays(P,this._featureMap,B,Oe,fe)||this.needsUpload}},ii.prototype.get=function(P){return this.programConfigurations[P]},ii.prototype.upload=function(P){if(this.needsUpload){for(var B in this.programConfigurations)this.programConfigurations[B].upload(P);this.needsUpload=!1}},ii.prototype.destroy=function(){for(var P in this.programConfigurations)this.programConfigurations[P].destroy()},ka("ConstantBinder",ua),ka("CrossFadedConstantBinder",ya),ka("SourceExpressionBinder",ga),ka("CrossFadedCompositeBinder",La),ka("CompositeExpressionBinder",Ta),ka("ProgramConfiguration",Wa,{omit:["_buffers"]}),ka("ProgramConfigurationSet",ii);var Ua=8192;var Hi=function Bi(L){return{min:-1*Math.pow(2,L-1),max:Math.pow(2,L-1)-1}}(15);function Zi(L){for(var P=Ua/L.extent,B=L.loadGeometry(),ee=0;ee<B.length;ee++)for(var fe=B[ee],me=0;me<fe.length;me++){var Te=fe[me];Te.x=Math.round(Te.x*P),Te.y=Math.round(Te.y*P),(Te.x<Hi.min||Te.x>Hi.max||Te.y<Hi.min||Te.y>Hi.max)&&(F("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Te.x=x(Te.x,Hi.min,Hi.max),Te.y=x(Te.y,Hi.min,Hi.max))}return B}function Ci(L,P,B,ee,fe){L.emplaceBack(2*P+(ee+1)/2,2*B+(fe+1)/2)}var Qi=function(P){this.zoom=P.zoom,this.overscaling=P.overscaling,this.layers=P.layers,this.layerIds=this.layers.map(function(B){return B.id}),this.index=P.index,this.hasPattern=!1,this.layoutVertexArray=new su,this.indexArray=new wu,this.segments=new Z,this.programConfigurations=new ii(ce,P.layers,P.zoom),this.stateDependentLayerIds=this.layers.filter(function(B){return B.isStateDependent()}).map(function(B){return B.id})};function li(L,P){for(var B=0;B<L.length;B++)if(Ns(P,L[B]))return!0;for(var ee=0;ee<P.length;ee++)if(Ns(L,P[ee]))return!0;return!!Dl(L,P)}function Ei(L,P,B){return!(!Ns(L,P)&&!uu(P,L,B))}function wo(L,P){if(1===L.length)return cu(P,L[0]);for(var B=0;B<P.length;B++)for(var ee=P[B],fe=0;fe<ee.length;fe++)if(Ns(L,ee[fe]))return!0;for(var me=0;me<L.length;me++)if(cu(P,L[me]))return!0;for(var Te=0;Te<P.length;Te++)if(Dl(L,P[Te]))return!0;return!1}function Pl(L,P,B){if(L.length>1){if(Dl(L,P))return!0;for(var ee=0;ee<P.length;ee++)if(uu(P[ee],L,B))return!0}for(var fe=0;fe<L.length;fe++)if(uu(L[fe],P,B))return!0;return!1}function Dl(L,P){if(0===L.length||0===P.length)return!1;for(var B=0;B<L.length-1;B++)for(var ee=L[B],fe=L[B+1],me=0;me<P.length-1;me++)if(lu(ee,fe,P[me],P[me+1]))return!0;return!1}function lu(L,P,B,ee){return D(L,B,ee)!==D(P,B,ee)&&D(L,P,B)!==D(L,P,ee)}function uu(L,P,B){var ee=B*B;if(1===P.length)return L.distSqr(P[0])<ee;for(var fe=1;fe<P.length;fe++)if(Tu(L,P[fe-1],P[fe])<ee)return!0;return!1}function Tu(L,P,B){var ee=P.distSqr(B);if(0===ee)return L.distSqr(P);var fe=((L.x-P.x)*(B.x-P.x)+(L.y-P.y)*(B.y-P.y))/ee;return L.distSqr(fe<0?P:fe>1?B:B.sub(P)._mult(fe)._add(P))}function cu(L,P){for(var ee,fe,me,B=!1,Te=0;Te<L.length;Te++)for(var Oe=0,$e=(ee=L[Te]).length-1;Oe<ee.length;$e=Oe++)(fe=ee[Oe]).y>P.y!=(me=ee[$e]).y>P.y&&P.x<(me.x-fe.x)*(P.y-fe.y)/(me.y-fe.y)+fe.x&&(B=!B);return B}function Ns(L,P){for(var B=!1,ee=0,fe=L.length-1;ee<L.length;fe=ee++){var me=L[ee],Te=L[fe];me.y>P.y!=Te.y>P.y&&P.x<(Te.x-me.x)*(P.y-me.y)/(Te.y-me.y)+me.x&&(B=!B)}return B}function xs(L,P,B){var ee=B[0],fe=B[2];if(L.x<ee.x&&P.x<ee.x||L.x>fe.x&&P.x>fe.x||L.y<ee.y&&P.y<ee.y||L.y>fe.y&&P.y>fe.y)return!1;var me=D(L,P,B[0]);return me!==D(L,P,B[1])||me!==D(L,P,B[2])||me!==D(L,P,B[3])}function xl(L,P,B){var ee=P.paint.get(L).value;return"constant"===ee.kind?ee.value:B.programConfigurations.get(P.id).getMaxValue(L)}function fu(L){return Math.sqrt(L[0]*L[0]+L[1]*L[1])}function Xl(L,P,B,ee,fe){if(!P[0]&&!P[1])return L;var me=i.convert(P)._mult(fe);"viewport"===B&&me._rotate(-ee);for(var Te=[],Oe=0;Oe<L.length;Oe++)Te.push(L[Oe].sub(me));return Te}Qi.prototype.populate=function(P,B,ee){var fe=this.layers[0],me=[],Te=null;"circle"===fe.type&&(Te=fe.layout.get("circle-sort-key"));for(var Oe=0,$e=P;Oe<$e.length;Oe+=1){var ft=$e[Oe],yt=ft.feature,Ft=ft.id,tr=ft.index,Kt=ft.sourceLayerIndex,xr=this.layers[0]._featureFilter.needGeometry,Fr={type:yt.type,id:Ft,properties:yt.properties,geometry:xr?Zi(yt):[]};if(this.layers[0]._featureFilter.filter(new hi(this.zoom),Fr,ee)){xr||(Fr.geometry=Zi(yt));var fn=Te?Te.evaluate(Fr,{},ee):void 0;me.push({id:Ft,properties:yt.properties,type:yt.type,sourceLayerIndex:Kt,index:tr,geometry:Fr.geometry,patterns:{},sortKey:fn})}}Te&&me.sort(function(ba,Sa){return ba.sortKey-Sa.sortKey});for(var Sn=0,xn=me;Sn<xn.length;Sn+=1){var Mn=xn[Sn],Hn=Mn.geometry,oa=Mn.index,aa=Mn.sourceLayerIndex,Na=P[oa].feature;this.addFeature(Mn,Hn,oa,ee),B.featureIndex.insert(Na,Hn,oa,aa,this.index)}},Qi.prototype.update=function(P,B,ee){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(P,B,this.stateDependentLayers,ee)},Qi.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Qi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Qi.prototype.upload=function(P){this.uploaded||(this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,ce),this.indexBuffer=P.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(P),this.uploaded=!0},Qi.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Qi.prototype.addFeature=function(P,B,ee,fe){for(var me=0,Te=B;me<Te.length;me+=1)for(var $e=0,ft=Te[me];$e<ft.length;$e+=1){var yt=ft[$e],Ft=yt.x,tr=yt.y;if(!(Ft<0||Ft>=Ua||tr<0||tr>=Ua)){var Kt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,P.sortKey),xr=Kt.vertexLength;Ci(this.layoutVertexArray,Ft,tr,-1,-1),Ci(this.layoutVertexArray,Ft,tr,1,-1),Ci(this.layoutVertexArray,Ft,tr,1,1),Ci(this.layoutVertexArray,Ft,tr,-1,1),this.indexArray.emplaceBack(xr,xr+1,xr+2),this.indexArray.emplaceBack(xr,xr+3,xr+2),Kt.vertexLength+=4,Kt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,P,ee,{},fe)},ka("CircleBucket",Qi,{omit:["layers"]});var hu=new Gi({"circle-sort-key":new Ia(Ht.layout_circle["circle-sort-key"])}),Qu={paint:new Gi({"circle-radius":new Ia(Ht.paint_circle["circle-radius"]),"circle-color":new Ia(Ht.paint_circle["circle-color"]),"circle-blur":new Ia(Ht.paint_circle["circle-blur"]),"circle-opacity":new Ia(Ht.paint_circle["circle-opacity"]),"circle-translate":new Ma(Ht.paint_circle["circle-translate"]),"circle-translate-anchor":new Ma(Ht.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ma(Ht.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ma(Ht.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ia(Ht.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ia(Ht.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ia(Ht.paint_circle["circle-stroke-opacity"])}),layout:hu},ls="undefined"!=typeof Float32Array?Float32Array:Array;function Dc(L){return L[0]=1,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=1,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=1,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}function uc(L,P,B){var ee=P[0],fe=P[1],me=P[2],Te=P[3],Oe=P[4],$e=P[5],ft=P[6],yt=P[7],Ft=P[8],tr=P[9],Kt=P[10],xr=P[11],Fr=P[12],fn=P[13],nn=P[14],Sn=P[15],xn=B[0],Mn=B[1],In=B[2],Hn=B[3];return L[0]=xn*ee+Mn*Oe+In*Ft+Hn*Fr,L[1]=xn*fe+Mn*$e+In*tr+Hn*fn,L[2]=xn*me+Mn*ft+In*Kt+Hn*nn,L[3]=xn*Te+Mn*yt+In*xr+Hn*Sn,L[4]=(xn=B[4])*ee+(Mn=B[5])*Oe+(In=B[6])*Ft+(Hn=B[7])*Fr,L[5]=xn*fe+Mn*$e+In*tr+Hn*fn,L[6]=xn*me+Mn*ft+In*Kt+Hn*nn,L[7]=xn*Te+Mn*yt+In*xr+Hn*Sn,L[8]=(xn=B[8])*ee+(Mn=B[9])*Oe+(In=B[10])*Ft+(Hn=B[11])*Fr,L[9]=xn*fe+Mn*$e+In*tr+Hn*fn,L[10]=xn*me+Mn*ft+In*Kt+Hn*nn,L[11]=xn*Te+Mn*yt+In*xr+Hn*Sn,L[12]=(xn=B[12])*ee+(Mn=B[13])*Oe+(In=B[14])*Ft+(Hn=B[15])*Fr,L[13]=xn*fe+Mn*$e+In*tr+Hn*fn,L[14]=xn*me+Mn*ft+In*Kt+Hn*nn,L[15]=xn*Te+Mn*yt+In*xr+Hn*Sn,L}Math.hypot||(Math.hypot=function(){for(var L=arguments,P=0,B=arguments.length;B--;)P+=L[B]*L[B];return Math.sqrt(P)});var Qf=uc;var Uv=function qf(L,P,B){return L[0]=P[0]-B[0],L[1]=P[1]-B[1],L[2]=P[2]-B[2],L};function Cf(L,P,B){var ee=P[0],fe=P[1],me=P[2],Te=P[3];return L[0]=B[0]*ee+B[4]*fe+B[8]*me+B[12]*Te,L[1]=B[1]*ee+B[5]*fe+B[9]*me+B[13]*Te,L[2]=B[2]*ee+B[6]*fe+B[10]*me+B[14]*Te,L[3]=B[3]*ee+B[7]*fe+B[11]*me+B[15]*Te,L}(function _c(){var L=new ls(3);return ls!=Float32Array&&(L[0]=0,L[1]=0,L[2]=0),L})(),function Vv(){var L=new ls(4);return ls!=Float32Array&&(L[0]=0,L[1]=0,L[2]=0,L[3]=0),L}();var Wv=function Yv(L){var P=L[0],B=L[1];return P*P+B*B},Xv=(function Zv(){var L=new ls(2);return ls!=Float32Array&&(L[0]=0,L[1]=0),L}(),function(L){function P(B){L.call(this,B,Qu)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.createBucket=function(ee){return new Qi(ee)},P.prototype.queryRadius=function(ee){var fe=ee;return xl("circle-radius",this,fe)+xl("circle-stroke-width",this,fe)+fu(this.paint.get("circle-translate"))},P.prototype.queryIntersectsFeature=function(ee,fe,me,Te,Oe,$e,ft,yt){for(var Ft=Xl(ee,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),$e.angle,ft),xr=this.paint.get("circle-radius").evaluate(fe,me)+this.paint.get("circle-stroke-width").evaluate(fe,me),Fr="map"===this.paint.get("circle-pitch-alignment"),fn=Fr?Ft:function jv(L,P){return L.map(function(B){return Sh(B,P)})}(Ft,yt),nn=Fr?xr*ft:xr,Sn=0,xn=Te;Sn<xn.length;Sn+=1)for(var In=0,Hn=xn[Sn];In<Hn.length;In+=1){var oa=Hn[In],aa=Fr?oa:Sh(oa,yt),Na=nn,ba=Cf([],[oa.x,oa.y,0,1],yt);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Na*=ba[3]/$e.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Na*=$e.cameraToCenterDistance/ba[3]),Ei(fn,aa,Na))return!0}return!1},P}(Ll));function Sh(L,P){var B=Cf([],[L.x,L.y,0,1],P);return new i(B[0]/B[3],B[1]/B[3])}var kh=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P}(Qi);function th(L,P,B,ee){var fe=P.width,me=P.height;if(ee){if(ee instanceof Uint8ClampedArray)ee=new Uint8Array(ee.buffer);else if(ee.length!==fe*me*B)throw new RangeError("mismatched image size")}else ee=new Uint8Array(fe*me*B);return L.width=fe,L.height=me,L.data=ee,L}function Ch(L,P,B){var ee=P.width,fe=P.height;if(ee!==L.width||fe!==L.height){var me=th({},{width:ee,height:fe},B);rh(L,me,{x:0,y:0},{x:0,y:0},{width:Math.min(L.width,ee),height:Math.min(L.height,fe)},B),L.width=ee,L.height=fe,L.data=me.data}}function rh(L,P,B,ee,fe,me){if(0===fe.width||0===fe.height)return P;if(fe.width>L.width||fe.height>L.height||B.x>L.width-fe.width||B.y>L.height-fe.height)throw new RangeError("out of range source coordinates for image copy");if(fe.width>P.width||fe.height>P.height||ee.x>P.width-fe.width||ee.y>P.height-fe.height)throw new RangeError("out of range destination coordinates for image copy");for(var Te=L.data,Oe=P.data,$e=0;$e<fe.height;$e++)for(var ft=((B.y+$e)*L.width+B.x)*me,yt=((ee.y+$e)*P.width+ee.x)*me,Ft=0;Ft<fe.width*me;Ft++)Oe[yt+Ft]=Te[ft+Ft];return P}ka("HeatmapBucket",kh,{omit:["layers"]});var wc=function(P,B){th(this,P,1,B)};wc.prototype.resize=function(P){Ch(this,P,1)},wc.prototype.clone=function(){return new wc({width:this.width,height:this.height},new Uint8Array(this.data))},wc.copy=function(P,B,ee,fe,me){rh(P,B,ee,fe,me,1)};var rl=function(P,B){th(this,P,4,B)};rl.prototype.resize=function(P){Ch(this,P,4)},rl.prototype.replace=function(P,B){B?this.data.set(P):this.data=P instanceof Uint8ClampedArray?new Uint8Array(P.buffer):P},rl.prototype.clone=function(){return new rl({width:this.width,height:this.height},new Uint8Array(this.data))},rl.copy=function(P,B,ee,fe,me){rh(P,B,ee,fe,me,4)},ka("AlphaImage",wc),ka("RGBAImage",rl);var Kv={paint:new Gi({"heatmap-radius":new Ia(Ht.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ia(Ht.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ma(Ht.paint_heatmap["heatmap-intensity"]),"heatmap-color":new po(Ht.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ma(Ht.paint_heatmap["heatmap-opacity"])})};function Eh(L,P){for(var B=new Uint8Array(1024),ee={},fe=0,me=0;fe<256;fe++,me+=4){ee[P]=fe/255;var Te=L.evaluate(ee);B[me+0]=Math.floor(255*Te.r/Te.a),B[me+1]=Math.floor(255*Te.g/Te.a),B[me+2]=Math.floor(255*Te.b/Te.a),B[me+3]=Math.floor(255*Te.a)}return new rl({width:256,height:1},B)}var Qv=function(L){function P(B){L.call(this,B,Kv),this._updateColorRamp()}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.createBucket=function(ee){return new kh(ee)},P.prototype._handleSpecialPaintPropertyUpdate=function(ee){"heatmap-color"===ee&&this._updateColorRamp()},P.prototype._updateColorRamp=function(){this.colorRamp=Eh(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},P.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},P.prototype.queryRadius=function(){return 0},P.prototype.queryIntersectsFeature=function(){return!1},P.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},P}(Ll),qv={paint:new Gi({"hillshade-illumination-direction":new Ma(Ht.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ma(Ht.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ma(Ht.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ma(Ht.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ma(Ht.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ma(Ht.paint_hillshade["hillshade-accent-color"])})},ep=function(L){function P(B){L.call(this,B,qv)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},P}(Ll),Lh=oo([{name:"a_pos",components:2,type:"Int16"}],4).members,nh=Ef,rp=Ef;function Ef(L,P,B){B=B||2;var Oe,$e,ft,yt,Ft,tr,Kt,ee=P&&P.length,fe=ee?P[0]*B:L.length,me=Ph(L,0,fe,B,!0),Te=[];if(!me||me.next===me.prev)return Te;if(ee&&(me=function sp(L,P,B,ee){var me,Te,ft,fe=[];for(me=0,Te=P.length;me<Te;me++)(ft=Ph(L,P[me]*ee,me<Te-1?P[me+1]*ee:L.length,ee,!1))===ft.next&&(ft.steiner=!0),fe.push(pp(ft));for(fe.sort(lp),me=0;me<fe.length;me++)up(fe[me],B),B=cc(B,B.next);return B}(L,P,me,B)),L.length>80*B){Oe=ft=L[0],$e=yt=L[1];for(var xr=B;xr<fe;xr+=B)(Ft=L[xr])<Oe&&(Oe=Ft),(tr=L[xr+1])<$e&&($e=tr),Ft>ft&&(ft=Ft),tr>yt&&(yt=tr);Kt=0!==(Kt=Math.max(ft-Oe,yt-$e))?1/Kt:0}return sf(me,Te,B,Oe,$e,Kt),Te}function Ph(L,P,B,ee,fe){var me,Te;if(fe===oh(L,P,B,ee)>0)for(me=P;me<B;me+=ee)Te=Ih(me,L[me],L[me+1],Te);else for(me=B-ee;me>=P;me-=ee)Te=Ih(me,L[me],L[me+1],Te);return Te&&Lf(Te,Te.next)&&(uf(Te),Te=Te.next),Te}function cc(L,P){if(!L)return L;P||(P=L);var ee,B=L;do{if(ee=!1,B.steiner||!Lf(B,B.next)&&0!==Fo(B.prev,B,B.next))B=B.next;else{if(uf(B),(B=P=B.prev)===B.next)break;ee=!0}}while(ee||B!==P);return P}function sf(L,P,B,ee,fe,me,Te){if(L){!Te&&me&&function hp(L,P,B,ee){var fe=L;do{null===fe.z&&(fe.z=ah(fe.x,fe.y,P,B,ee)),fe.prevZ=fe.prev,fe.nextZ=fe.next,fe=fe.next}while(fe!==L);fe.prevZ.nextZ=null,fe.prevZ=null,function vp(L){var P,B,ee,fe,me,Te,Oe,$e,ft=1;do{for(B=L,L=null,me=null,Te=0;B;){for(Te++,ee=B,Oe=0,P=0;P<ft&&(Oe++,ee=ee.nextZ);P++);for($e=ft;Oe>0||$e>0&&ee;)0!==Oe&&(0===$e||!ee||B.z<=ee.z)?(fe=B,B=B.nextZ,Oe--):(fe=ee,ee=ee.nextZ,$e--),me?me.nextZ=fe:L=fe,fe.prevZ=me,me=fe;B=ee}me.nextZ=null,ft*=2}while(Te>1);return L}(fe)}(L,ee,fe,me);for(var $e,ft,Oe=L;L.prev!==L.next;)if($e=L.prev,ft=L.next,me?ap(L,ee,fe,me):np(L))P.push($e.i/B),P.push(L.i/B),P.push(ft.i/B),uf(L),L=ft.next,Oe=ft.next;else if((L=ft)===Oe){Te?1===Te?sf(L=ip(cc(L),P,B),P,B,ee,fe,me,2):2===Te&&op(L,P,B,ee,fe,me):sf(cc(L),P,B,ee,fe,me,1);break}}}function np(L){var P=L.prev,B=L,ee=L.next;if(Fo(P,B,ee)>=0)return!1;for(var fe=L.next.next;fe!==L.prev;){if(zc(P.x,P.y,B.x,B.y,ee.x,ee.y,fe.x,fe.y)&&Fo(fe.prev,fe,fe.next)>=0)return!1;fe=fe.next}return!0}function ap(L,P,B,ee){var fe=L.prev,me=L,Te=L.next;if(Fo(fe,me,Te)>=0)return!1;for(var ft=fe.x>me.x?fe.x>Te.x?fe.x:Te.x:me.x>Te.x?me.x:Te.x,yt=fe.y>me.y?fe.y>Te.y?fe.y:Te.y:me.y>Te.y?me.y:Te.y,Ft=ah(fe.x<me.x?fe.x<Te.x?fe.x:Te.x:me.x<Te.x?me.x:Te.x,fe.y<me.y?fe.y<Te.y?fe.y:Te.y:me.y<Te.y?me.y:Te.y,P,B,ee),tr=ah(ft,yt,P,B,ee),Kt=L.prevZ,xr=L.nextZ;Kt&&Kt.z>=Ft&&xr&&xr.z<=tr;){if(Kt!==L.prev&&Kt!==L.next&&zc(fe.x,fe.y,me.x,me.y,Te.x,Te.y,Kt.x,Kt.y)&&Fo(Kt.prev,Kt,Kt.next)>=0||(Kt=Kt.prevZ,xr!==L.prev&&xr!==L.next&&zc(fe.x,fe.y,me.x,me.y,Te.x,Te.y,xr.x,xr.y)&&Fo(xr.prev,xr,xr.next)>=0))return!1;xr=xr.nextZ}for(;Kt&&Kt.z>=Ft;){if(Kt!==L.prev&&Kt!==L.next&&zc(fe.x,fe.y,me.x,me.y,Te.x,Te.y,Kt.x,Kt.y)&&Fo(Kt.prev,Kt,Kt.next)>=0)return!1;Kt=Kt.prevZ}for(;xr&&xr.z<=tr;){if(xr!==L.prev&&xr!==L.next&&zc(fe.x,fe.y,me.x,me.y,Te.x,Te.y,xr.x,xr.y)&&Fo(xr.prev,xr,xr.next)>=0)return!1;xr=xr.nextZ}return!0}function ip(L,P,B){var ee=L;do{var fe=ee.prev,me=ee.next.next;!Lf(fe,me)&&Dh(fe,ee,ee.next,me)&&lf(fe,me)&&lf(me,fe)&&(P.push(fe.i/B),P.push(ee.i/B),P.push(me.i/B),uf(ee),uf(ee.next),ee=L=me),ee=ee.next}while(ee!==L);return cc(ee)}function op(L,P,B,ee,fe,me){var Te=L;do{for(var Oe=Te.next.next;Oe!==Te.prev;){if(Te.i!==Oe.i&&dp(Te,Oe)){var $e=Rh(Te,Oe);return Te=cc(Te,Te.next),$e=cc($e,$e.next),sf(Te,P,B,ee,fe,me),void sf($e,P,B,ee,fe,me)}Oe=Oe.next}Te=Te.next}while(Te!==L)}function lp(L,P){return L.x-P.x}function up(L,P){if(P=function cp(L,P){var Te,B=P,ee=L.x,fe=L.y,me=-1/0;do{if(fe<=B.y&&fe>=B.next.y&&B.next.y!==B.y){var Oe=B.x+(fe-B.y)*(B.next.x-B.x)/(B.next.y-B.y);if(Oe<=ee&&Oe>me){if(me=Oe,Oe===ee){if(fe===B.y)return B;if(fe===B.next.y)return B.next}Te=B.x<B.next.x?B:B.next}}B=B.next}while(B!==P);if(!Te)return null;if(ee===me)return Te;var tr,$e=Te,ft=Te.x,yt=Te.y,Ft=1/0;B=Te;do{ee>=B.x&&B.x>=ft&&ee!==B.x&&zc(fe<yt?ee:me,fe,ft,yt,fe<yt?me:ee,fe,B.x,B.y)&&(tr=Math.abs(fe-B.y)/(ee-B.x),lf(B,L)&&(tr<Ft||tr===Ft&&(B.x>Te.x||B.x===Te.x&&fp(Te,B)))&&(Te=B,Ft=tr)),B=B.next}while(B!==$e);return Te}(L,P)){var B=Rh(P,L);cc(P,P.next),cc(B,B.next)}}function fp(L,P){return Fo(L.prev,L,P.prev)<0&&Fo(P.next,L,L.next)<0}function ah(L,P,B,ee,fe){return(L=1431655765&((L=858993459&((L=252645135&((L=16711935&((L=32767*(L-B)*fe)|L<<8))|L<<4))|L<<2))|L<<1))|(P=1431655765&((P=858993459&((P=252645135&((P=16711935&((P=32767*(P-ee)*fe)|P<<8))|P<<4))|P<<2))|P<<1))<<1}function pp(L){var P=L,B=L;do{(P.x<B.x||P.x===B.x&&P.y<B.y)&&(B=P),P=P.next}while(P!==L);return B}function zc(L,P,B,ee,fe,me,Te,Oe){return(fe-Te)*(P-Oe)-(L-Te)*(me-Oe)>=0&&(L-Te)*(ee-Oe)-(B-Te)*(P-Oe)>=0&&(B-Te)*(me-Oe)-(fe-Te)*(ee-Oe)>=0}function dp(L,P){return L.next.i!==P.i&&L.prev.i!==P.i&&!function gp(L,P){var B=L;do{if(B.i!==L.i&&B.next.i!==L.i&&B.i!==P.i&&B.next.i!==P.i&&Dh(B,B.next,L,P))return!0;B=B.next}while(B!==L);return!1}(L,P)&&(lf(L,P)&&lf(P,L)&&function yp(L,P){var B=L,ee=!1,fe=(L.x+P.x)/2,me=(L.y+P.y)/2;do{B.y>me!=B.next.y>me&&B.next.y!==B.y&&fe<(B.next.x-B.x)*(me-B.y)/(B.next.y-B.y)+B.x&&(ee=!ee),B=B.next}while(B!==L);return ee}(L,P)&&(Fo(L.prev,L,P.prev)||Fo(L,P.prev,P))||Lf(L,P)&&Fo(L.prev,L,L.next)>0&&Fo(P.prev,P,P.next)>0)}function Fo(L,P,B){return(P.y-L.y)*(B.x-P.x)-(P.x-L.x)*(B.y-P.y)}function Lf(L,P){return L.x===P.x&&L.y===P.y}function Dh(L,P,B,ee){var fe=Df(Fo(L,P,B)),me=Df(Fo(L,P,ee)),Te=Df(Fo(B,ee,L)),Oe=Df(Fo(B,ee,P));return!!(fe!==me&&Te!==Oe||0===fe&&Pf(L,B,P)||0===me&&Pf(L,ee,P)||0===Te&&Pf(B,L,ee)||0===Oe&&Pf(B,P,ee))}function Pf(L,P,B){return P.x<=Math.max(L.x,B.x)&&P.x>=Math.min(L.x,B.x)&&P.y<=Math.max(L.y,B.y)&&P.y>=Math.min(L.y,B.y)}function Df(L){return L>0?1:L<0?-1:0}function lf(L,P){return Fo(L.prev,L,L.next)<0?Fo(L,P,L.next)>=0&&Fo(L,L.prev,P)>=0:Fo(L,P,L.prev)<0||Fo(L,L.next,P)<0}function Rh(L,P){var B=new ih(L.i,L.x,L.y),ee=new ih(P.i,P.x,P.y),fe=L.next,me=P.prev;return L.next=P,P.prev=L,B.next=fe,fe.prev=B,ee.next=B,B.prev=ee,me.next=ee,ee.prev=me,ee}function Ih(L,P,B,ee){var fe=new ih(L,P,B);return ee?(fe.next=ee.next,fe.prev=ee,ee.next.prev=fe,ee.next=fe):(fe.prev=fe,fe.next=fe),fe}function uf(L){L.next.prev=L.prev,L.prev.next=L.next,L.prevZ&&(L.prevZ.nextZ=L.nextZ),L.nextZ&&(L.nextZ.prevZ=L.prevZ)}function ih(L,P,B){this.i=L,this.x=P,this.y=B,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function oh(L,P,B,ee){for(var fe=0,me=P,Te=B-ee;me<B;me+=ee)fe+=(L[Te]-L[me])*(L[me+1]+L[Te+1]),Te=me;return fe}function mp(L,P,B,ee,fe){zh(L,P,B||0,ee||L.length-1,fe||xp)}function zh(L,P,B,ee,fe){for(;ee>B;){if(ee-B>600){var me=ee-B+1,Te=P-B+1,Oe=Math.log(me),$e=.5*Math.exp(2*Oe/3),ft=.5*Math.sqrt(Oe*$e*(me-$e)/me)*(Te-me/2<0?-1:1);zh(L,P,Math.max(B,Math.floor(P-Te*$e/me+ft)),Math.min(ee,Math.floor(P+(me-Te)*$e/me+ft)),fe)}var tr=L[P],Kt=B,xr=ee;for(cf(L,B,P),fe(L[ee],tr)>0&&cf(L,B,ee);Kt<xr;){for(cf(L,Kt,xr),Kt++,xr--;fe(L[Kt],tr)<0;)Kt++;for(;fe(L[xr],tr)>0;)xr--}0===fe(L[B],tr)?cf(L,B,xr):cf(L,++xr,ee),xr<=P&&(B=xr+1),P<=xr&&(ee=xr-1)}}function cf(L,P,B){var ee=L[P];L[P]=L[B],L[B]=ee}function xp(L,P){return L<P?-1:L>P?1:0}function sh(L,P){var B=L.length;if(B<=1)return[L];for(var fe,me,ee=[],Te=0;Te<B;Te++){var Oe=N(L[Te]);0!==Oe&&(L[Te].area=Math.abs(Oe),void 0===me&&(me=Oe<0),me===Oe<0?(fe&&ee.push(fe),fe=[L[Te]]):fe.push(L[Te]))}if(fe&&ee.push(fe),P>1)for(var $e=0;$e<ee.length;$e++)ee[$e].length<=P||(mp(ee[$e],P,1,ee[$e].length-1,bp),ee[$e]=ee[$e].slice(0,P));return ee}function bp(L,P){return P.area-L.area}function lh(L,P,B){for(var ee=B.patternDependencies,fe=!1,me=0,Te=P;me<Te.length;me+=1){var $e=Te[me].paint.get(L+"-pattern");$e.isConstant()||(fe=!0);var ft=$e.constantOr(null);ft&&(fe=!0,ee[ft.to]=!0,ee[ft.from]=!0)}return fe}function uh(L,P,B,ee,fe){for(var me=fe.patternDependencies,Te=0,Oe=P;Te<Oe.length;Te+=1){var $e=Oe[Te],yt=$e.paint.get(L+"-pattern").value;if("constant"!==yt.kind){var Ft=yt.evaluate({zoom:ee-1},B,{},fe.availableImages),tr=yt.evaluate({zoom:ee},B,{},fe.availableImages),Kt=yt.evaluate({zoom:ee+1},B,{},fe.availableImages);tr=tr&&tr.name?tr.name:tr,Kt=Kt&&Kt.name?Kt.name:Kt,me[Ft=Ft&&Ft.name?Ft.name:Ft]=!0,me[tr]=!0,me[Kt]=!0,B.patterns[$e.id]={min:Ft,mid:tr,max:Kt}}}return B}Ef.deviation=function(L,P,B,ee){var fe=P&&P.length,Te=Math.abs(oh(L,0,fe?P[0]*B:L.length,B));if(fe)for(var Oe=0,$e=P.length;Oe<$e;Oe++)Te-=Math.abs(oh(L,P[Oe]*B,Oe<$e-1?P[Oe+1]*B:L.length,B));var Ft=0;for(Oe=0;Oe<ee.length;Oe+=3){var tr=ee[Oe]*B,Kt=ee[Oe+1]*B,xr=ee[Oe+2]*B;Ft+=Math.abs((L[tr]-L[xr])*(L[Kt+1]-L[tr+1])-(L[tr]-L[Kt])*(L[xr+1]-L[tr+1]))}return 0===Te&&0===Ft?0:Math.abs((Ft-Te)/Te)},Ef.flatten=function(L){for(var P=L[0][0].length,B={vertices:[],holes:[],dimensions:P},ee=0,fe=0;fe<L.length;fe++){for(var me=0;me<L[fe].length;me++)for(var Te=0;Te<P;Te++)B.vertices.push(L[fe][me][Te]);fe>0&&B.holes.push(ee+=L[fe-1].length)}return B},nh.default=rp;var Au=function(P){this.zoom=P.zoom,this.overscaling=P.overscaling,this.layers=P.layers,this.layerIds=this.layers.map(function(B){return B.id}),this.index=P.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new su,this.indexArray=new wu,this.indexArray2=new mc,this.programConfigurations=new ii(Lh,P.layers,P.zoom),this.segments=new Z,this.segments2=new Z,this.stateDependentLayerIds=this.layers.filter(function(B){return B.isStateDependent()}).map(function(B){return B.id})};Au.prototype.populate=function(P,B,ee){this.hasPattern=lh("fill",this.layers,B);for(var fe=this.layers[0].layout.get("fill-sort-key"),me=[],Te=0,Oe=P;Te<Oe.length;Te+=1){var $e=Oe[Te],ft=$e.feature,yt=$e.id,Ft=$e.index,tr=$e.sourceLayerIndex,Kt=this.layers[0]._featureFilter.needGeometry,xr={type:ft.type,id:yt,properties:ft.properties,geometry:Kt?Zi(ft):[]};if(this.layers[0]._featureFilter.filter(new hi(this.zoom),xr,ee)){Kt||(xr.geometry=Zi(ft));var Fr=fe?fe.evaluate(xr,{},ee,B.availableImages):void 0;me.push({id:yt,properties:ft.properties,type:ft.type,sourceLayerIndex:tr,index:Ft,geometry:xr.geometry,patterns:{},sortKey:Fr})}}fe&&me.sort(function(ba,Sa){return ba.sortKey-Sa.sortKey});for(var nn=0,Sn=me;nn<Sn.length;nn+=1){var xn=Sn[nn],In=xn.geometry,Hn=xn.index,oa=xn.sourceLayerIndex;if(this.hasPattern){var aa=uh("fill",this.layers,xn,this.zoom,B);this.patternFeatures.push(aa)}else this.addFeature(xn,In,Hn,ee,{});B.featureIndex.insert(P[Hn].feature,In,Hn,oa,this.index)}},Au.prototype.update=function(P,B,ee){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(P,B,this.stateDependentLayers,ee)},Au.prototype.addFeatures=function(P,B,ee){for(var fe=0,me=this.patternFeatures;fe<me.length;fe+=1){var Te=me[fe];this.addFeature(Te,Te.geometry,Te.index,B,ee)}},Au.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Au.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Au.prototype.upload=function(P){this.uploaded||(this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,Lh),this.indexBuffer=P.createIndexBuffer(this.indexArray),this.indexBuffer2=P.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(P),this.uploaded=!0},Au.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Au.prototype.addFeature=function(P,B,ee,fe,me){for(var Te=0,Oe=sh(B,500);Te<Oe.length;Te+=1){for(var $e=Oe[Te],ft=0,yt=0,Ft=$e;yt<Ft.length;yt+=1)ft+=Ft[yt].length;for(var Kt=this.segments.prepareSegment(ft,this.layoutVertexArray,this.indexArray),xr=Kt.vertexLength,Fr=[],fn=[],nn=0,Sn=$e;nn<Sn.length;nn+=1){var xn=Sn[nn];if(0!==xn.length){xn!==$e[0]&&fn.push(Fr.length/2);var Mn=this.segments2.prepareSegment(xn.length,this.layoutVertexArray,this.indexArray2),In=Mn.vertexLength;this.layoutVertexArray.emplaceBack(xn[0].x,xn[0].y),this.indexArray2.emplaceBack(In+xn.length-1,In),Fr.push(xn[0].x),Fr.push(xn[0].y);for(var Hn=1;Hn<xn.length;Hn++)this.layoutVertexArray.emplaceBack(xn[Hn].x,xn[Hn].y),this.indexArray2.emplaceBack(In+Hn-1,In+Hn),Fr.push(xn[Hn].x),Fr.push(xn[Hn].y);Mn.vertexLength+=xn.length,Mn.primitiveLength+=xn.length}}for(var oa=nh(Fr,fn),aa=0;aa<oa.length;aa+=3)this.indexArray.emplaceBack(xr+oa[aa],xr+oa[aa+1],xr+oa[aa+2]);Kt.vertexLength+=ft,Kt.primitiveLength+=oa.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,P,ee,me,fe)},ka("FillBucket",Au,{omit:["layers","patternFeatures"]});var wp=new Gi({"fill-sort-key":new Ia(Ht.layout_fill["fill-sort-key"])}),Ap={paint:new Gi({"fill-antialias":new Ma(Ht.paint_fill["fill-antialias"]),"fill-opacity":new Ia(Ht.paint_fill["fill-opacity"]),"fill-color":new Ia(Ht.paint_fill["fill-color"]),"fill-outline-color":new Ia(Ht.paint_fill["fill-outline-color"]),"fill-translate":new Ma(Ht.paint_fill["fill-translate"]),"fill-translate-anchor":new Ma(Ht.paint_fill["fill-translate-anchor"]),"fill-pattern":new qi(Ht.paint_fill["fill-pattern"])}),layout:wp},Mp=function(L){function P(B){L.call(this,B,Ap)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.recalculate=function(ee,fe){L.prototype.recalculate.call(this,ee,fe);var me=this.paint._values["fill-outline-color"];"constant"===me.value.kind&&void 0===me.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},P.prototype.createBucket=function(ee){return new Au(ee)},P.prototype.queryRadius=function(){return fu(this.paint.get("fill-translate"))},P.prototype.queryIntersectsFeature=function(ee,fe,me,Te,Oe,$e,ft){return wo(Xl(ee,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),$e.angle,ft),Te)},P.prototype.isTileClipped=function(){return!0},P}(Ll),Fh=oo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Oh=Fc;function Fc(L,P,B,ee,fe){this.properties={},this.extent=B,this.type=0,this._pbf=L,this._geometry=-1,this._keys=ee,this._values=fe,L.readFields(kp,this,P)}function kp(L,P,B){1==L?P.id=B.readVarint():2==L?function Cp(L,P){for(var B=L.readVarint()+L.pos;L.pos<B;){var ee=P._keys[L.readVarint()],fe=P._values[L.readVarint()];P.properties[ee]=fe}}(B,P):3==L?P.type=B.readVarint():4==L&&(P._geometry=B.pos)}function Lp(L){for(var me,Te,P=0,B=0,ee=L.length,fe=ee-1;B<ee;fe=B++)P+=((Te=L[fe]).x-(me=L[B]).x)*(me.y+Te.y);return P}Fc.types=["Unknown","Point","LineString","Polygon"],Fc.prototype.loadGeometry=function(){var L=this._pbf;L.pos=this._geometry;for(var Oe,P=L.readVarint()+L.pos,B=1,ee=0,fe=0,me=0,Te=[];L.pos<P;){if(ee<=0){var $e=L.readVarint();B=7&$e,ee=$e>>3}if(ee--,1===B||2===B)fe+=L.readSVarint(),me+=L.readSVarint(),1===B&&(Oe&&Te.push(Oe),Oe=[]),Oe.push(new i(fe,me));else{if(7!==B)throw new Error("unknown command "+B);Oe&&Oe.push(Oe[0].clone())}}return Oe&&Te.push(Oe),Te},Fc.prototype.bbox=function(){var L=this._pbf;L.pos=this._geometry;for(var P=L.readVarint()+L.pos,B=1,ee=0,fe=0,me=0,Te=1/0,Oe=-1/0,$e=1/0,ft=-1/0;L.pos<P;){if(ee<=0){var yt=L.readVarint();B=7&yt,ee=yt>>3}if(ee--,1===B||2===B)(fe+=L.readSVarint())<Te&&(Te=fe),fe>Oe&&(Oe=fe),(me+=L.readSVarint())<$e&&($e=me),me>ft&&(ft=me);else if(7!==B)throw new Error("unknown command "+B)}return[Te,$e,Oe,ft]},Fc.prototype.toGeoJSON=function(L,P,B){var $e,ft,ee=this.extent*Math.pow(2,B),fe=this.extent*L,me=this.extent*P,Te=this.loadGeometry(),Oe=Fc.types[this.type];function yt(Kt){for(var xr=0;xr<Kt.length;xr++){var Fr=Kt[xr];Kt[xr]=[360*(Fr.x+fe)/ee-180,360/Math.PI*Math.atan(Math.exp((180-360*(Fr.y+me)/ee)*Math.PI/180))-90]}}switch(this.type){case 1:var Ft=[];for($e=0;$e<Te.length;$e++)Ft[$e]=Te[$e][0];yt(Te=Ft);break;case 2:for($e=0;$e<Te.length;$e++)yt(Te[$e]);break;case 3:for(Te=function Ep(L){var P=L.length;if(P<=1)return[L];for(var ee,fe,B=[],me=0;me<P;me++){var Te=Lp(L[me]);0!==Te&&(void 0===fe&&(fe=Te<0),fe===Te<0?(ee&&B.push(ee),ee=[L[me]]):ee.push(L[me]))}return ee&&B.push(ee),B}(Te),$e=0;$e<Te.length;$e++)for(ft=0;ft<Te[$e].length;ft++)yt(Te[$e][ft])}1===Te.length?Te=Te[0]:Oe="Multi"+Oe;var tr={type:"Feature",geometry:{type:Oe,coordinates:Te},properties:this.properties};return"id"in this&&(tr.id=this.id),tr};var Nh=Bh;function Bh(L,P){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=L,this._keys=[],this._values=[],this._features=[],L.readFields(Pp,this,P),this.length=this._features.length}function Pp(L,P,B){15===L?P.version=B.readVarint():1===L?P.name=B.readString():5===L?P.extent=B.readVarint():2===L?P._features.push(B.pos):3===L?P._keys.push(B.readString()):4===L&&P._values.push(function Dp(L){for(var P=null,B=L.readVarint()+L.pos;L.pos<B;){var ee=L.readVarint()>>3;P=1===ee?L.readString():2===ee?L.readFloat():3===ee?L.readDouble():4===ee?L.readVarint64():5===ee?L.readVarint():6===ee?L.readSVarint():7===ee?L.readBoolean():null}return P}(B))}function zp(L,P,B){if(3===L){var ee=new Nh(B,B.readVarint()+B.pos);ee.length&&(P[ee.name]=ee)}}Bh.prototype.feature=function(L){if(L<0||L>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[L];var P=this._pbf.readVarint()+this._pbf.pos;return new Oh(this._pbf,P,this.extent,this._keys,this._values)};var Oc={VectorTile:function Ip(L,P){this.layers=L.readFields(zp,{},P)},VectorTileFeature:Oh,VectorTileLayer:Nh},Bp=Oc.VectorTileFeature.types,ch=Math.pow(2,13);function ff(L,P,B,ee,fe,me,Te,Oe){L.emplaceBack(P,B,2*Math.floor(ee*ch)+Te,fe*ch*2,me*ch*2,Math.round(Oe))}var Mu=function(P){this.zoom=P.zoom,this.overscaling=P.overscaling,this.layers=P.layers,this.layerIds=this.layers.map(function(B){return B.id}),this.index=P.index,this.hasPattern=!1,this.layoutVertexArray=new ac,this.indexArray=new wu,this.programConfigurations=new ii(Fh,P.layers,P.zoom),this.segments=new Z,this.stateDependentLayerIds=this.layers.filter(function(B){return B.isStateDependent()}).map(function(B){return B.id})};function Vp(L,P){return L.x===P.x&&(L.x<0||L.x>Ua)||L.y===P.y&&(L.y<0||L.y>Ua)}Mu.prototype.populate=function(P,B,ee){this.features=[],this.hasPattern=lh("fill-extrusion",this.layers,B);for(var fe=0,me=P;fe<me.length;fe+=1){var Te=me[fe],Oe=Te.feature,$e=Te.id,ft=Te.index,yt=Te.sourceLayerIndex,Ft=this.layers[0]._featureFilter.needGeometry,tr={type:Oe.type,id:$e,properties:Oe.properties,geometry:Ft?Zi(Oe):[]};if(this.layers[0]._featureFilter.filter(new hi(this.zoom),tr,ee)){var Kt={id:$e,sourceLayerIndex:yt,index:ft,geometry:Ft?tr.geometry:Zi(Oe),properties:Oe.properties,type:Oe.type,patterns:{}};void 0!==Oe.id&&(Kt.id=Oe.id),this.hasPattern?this.features.push(uh("fill-extrusion",this.layers,Kt,this.zoom,B)):this.addFeature(Kt,Kt.geometry,ft,ee,{}),B.featureIndex.insert(Oe,Kt.geometry,ft,yt,this.index,!0)}}},Mu.prototype.addFeatures=function(P,B,ee){for(var fe=0,me=this.features;fe<me.length;fe+=1){var Te=me[fe];this.addFeature(Te,Te.geometry,Te.index,B,ee)}},Mu.prototype.update=function(P,B,ee){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(P,B,this.stateDependentLayers,ee)},Mu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Mu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Mu.prototype.upload=function(P){this.uploaded||(this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,Fh),this.indexBuffer=P.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(P),this.uploaded=!0},Mu.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Mu.prototype.addFeature=function(P,B,ee,fe,me){for(var Te=0,Oe=sh(B,500);Te<Oe.length;Te+=1){for(var $e=Oe[Te],ft=0,yt=0,Ft=$e;yt<Ft.length;yt+=1)ft+=Ft[yt].length;for(var Kt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),xr=0,Fr=$e;xr<Fr.length;xr+=1){var fn=Fr[xr];if(0!==fn.length&&!((L=fn).every(function(P){return P.x<0})||L.every(function(P){return P.x>Ua})||L.every(function(P){return P.y<0})||L.every(function(P){return P.y>Ua})))for(var nn=0,Sn=0;Sn<fn.length;Sn++){var xn=fn[Sn];if(Sn>=1){var Mn=fn[Sn-1];if(!Vp(xn,Mn)){Kt.vertexLength+4>Z.MAX_VERTEX_ARRAY_LENGTH&&(Kt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var In=xn.sub(Mn)._perp()._unit(),Hn=Mn.dist(xn);nn+Hn>32768&&(nn=0),ff(this.layoutVertexArray,xn.x,xn.y,In.x,In.y,0,0,nn),ff(this.layoutVertexArray,xn.x,xn.y,In.x,In.y,0,1,nn),ff(this.layoutVertexArray,Mn.x,Mn.y,In.x,In.y,0,0,nn+=Hn),ff(this.layoutVertexArray,Mn.x,Mn.y,In.x,In.y,0,1,nn);var oa=Kt.vertexLength;this.indexArray.emplaceBack(oa,oa+2,oa+1),this.indexArray.emplaceBack(oa+1,oa+2,oa+3),Kt.vertexLength+=4,Kt.primitiveLength+=2}}}}if(Kt.vertexLength+ft>Z.MAX_VERTEX_ARRAY_LENGTH&&(Kt=this.segments.prepareSegment(ft,this.layoutVertexArray,this.indexArray)),"Polygon"===Bp[P.type]){for(var aa=[],Na=[],ba=Kt.vertexLength,Sa=0,ni=$e;Sa<ni.length;Sa+=1){var Pa=ni[Sa];if(0!==Pa.length){Pa!==$e[0]&&Na.push(aa.length/2);for(var za=0;za<Pa.length;za++){var vi=Pa[za];ff(this.layoutVertexArray,vi.x,vi.y,0,0,1,1,0),aa.push(vi.x),aa.push(vi.y)}}}for(var ei=nh(aa,Na),Ii=0;Ii<ei.length;Ii+=3)this.indexArray.emplaceBack(ba+ei[Ii],ba+ei[Ii+2],ba+ei[Ii+1]);Kt.primitiveLength+=ei.length/3,Kt.vertexLength+=ft}}var L;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,P,ee,me,fe)},ka("FillExtrusionBucket",Mu,{omit:["layers","features"]});var Zp={paint:new Gi({"fill-extrusion-opacity":new Ma(Ht["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ia(Ht["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ma(Ht["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ma(Ht["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new qi(Ht["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ia(Ht["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ia(Ht["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ma(Ht["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Yp=function(L){function P(B){L.call(this,B,Zp)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.createBucket=function(ee){return new Mu(ee)},P.prototype.queryRadius=function(){return fu(this.paint.get("fill-extrusion-translate"))},P.prototype.is3D=function(){return!0},P.prototype.queryIntersectsFeature=function(ee,fe,me,Te,Oe,$e,ft,yt){var Ft=Xl(ee,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),$e.angle,ft),tr=this.paint.get("fill-extrusion-height").evaluate(fe,me),Kt=this.paint.get("fill-extrusion-base").evaluate(fe,me),xr=function jp(L,P,B,ee){for(var fe=[],me=0,Te=L;me<Te.length;me+=1){var Oe=Te[me],$e=[Oe.x,Oe.y,ee,1];Cf($e,$e,P),fe.push(new i($e[0]/$e[3],$e[1]/$e[3]))}return fe}(Ft,yt,0,0),Fr=function Xp(L,P,B,ee){for(var fe=[],me=[],Te=ee[8]*P,Oe=ee[9]*P,$e=ee[10]*P,ft=ee[11]*P,yt=ee[8]*B,Ft=ee[9]*B,tr=ee[10]*B,Kt=ee[11]*B,xr=0,Fr=L;xr<Fr.length;xr+=1){for(var nn=[],Sn=[],xn=0,Mn=Fr[xr];xn<Mn.length;xn+=1){var In=Mn[xn],Hn=In.x,oa=In.y,aa=ee[0]*Hn+ee[4]*oa+ee[12],Na=ee[1]*Hn+ee[5]*oa+ee[13],ba=ee[2]*Hn+ee[6]*oa+ee[14],Sa=ee[3]*Hn+ee[7]*oa+ee[15],za=ba+$e,vi=Sa+ft,ei=aa+yt,Ii=Na+Ft,ji=ba+tr,zi=Sa+Kt,Fi=new i((aa+Te)/vi,(Na+Oe)/vi);Fi.z=za/vi,nn.push(Fi);var Li=new i(ei/zi,Ii/zi);Li.z=ji/zi,Sn.push(Li)}fe.push(nn),me.push(Sn)}return[fe,me]}(Te,Kt,tr,yt);return function Wp(L,P,B){var ee=1/0;wo(B,P)&&(ee=Uh(B,P[0]));for(var fe=0;fe<P.length;fe++)for(var me=P[fe],Te=L[fe],Oe=0;Oe<me.length-1;Oe++){var $e=me[Oe],tr=[$e,me[Oe+1],Te[Oe+1],Te[Oe],$e];li(B,tr)&&(ee=Math.min(ee,Uh(B,tr)))}return ee!==1/0&&ee}(Fr[0],Fr[1],xr)},P}(Ll);function hf(L,P){return L.x*P.x+L.y*P.y}function Uh(L,P){if(1===L.length){for(var fe,B=0,ee=P[B++];!fe||ee.equals(fe);)if(!(fe=P[B++]))return 1/0;for(;B<P.length;B++){var me=P[B],Te=L[0],Oe=fe.sub(ee),$e=me.sub(ee),ft=Te.sub(ee),yt=hf(Oe,Oe),Ft=hf(Oe,$e),tr=hf($e,$e),Kt=hf(ft,Oe),xr=hf(ft,$e),Fr=yt*tr-Ft*Ft,fn=(tr*Kt-Ft*xr)/Fr,nn=(yt*xr-Ft*Kt)/Fr,xn=ee.z*(1-fn-nn)+fe.z*fn+me.z*nn;if(isFinite(xn))return xn}return 1/0}for(var Mn=1/0,In=0,Hn=P;In<Hn.length;In+=1)Mn=Math.min(Mn,Hn[In].z);return Mn}var Vh=oo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Kp=Oc.VectorTileFeature.types,Qp=Math.cos(Math.PI/180*37.5),Zh=Math.pow(2,14)/.5,nl=function(P){this.zoom=P.zoom,this.overscaling=P.overscaling,this.layers=P.layers,this.layerIds=this.layers.map(function(B){return B.id}),this.index=P.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Sc,this.indexArray=new wu,this.programConfigurations=new ii(Vh,P.layers,P.zoom),this.segments=new Z,this.stateDependentLayerIds=this.layers.filter(function(B){return B.isStateDependent()}).map(function(B){return B.id})};nl.prototype.populate=function(P,B,ee){this.hasPattern=lh("line",this.layers,B);for(var fe=this.layers[0].layout.get("line-sort-key"),me=[],Te=0,Oe=P;Te<Oe.length;Te+=1){var $e=Oe[Te],ft=$e.feature,yt=$e.id,Ft=$e.index,tr=$e.sourceLayerIndex,Kt=this.layers[0]._featureFilter.needGeometry,xr={type:ft.type,id:yt,properties:ft.properties,geometry:Kt?Zi(ft):[]};if(this.layers[0]._featureFilter.filter(new hi(this.zoom),xr,ee)){Kt||(xr.geometry=Zi(ft));var Fr=fe?fe.evaluate(xr,{},ee):void 0;me.push({id:yt,properties:ft.properties,type:ft.type,sourceLayerIndex:tr,index:Ft,geometry:xr.geometry,patterns:{},sortKey:Fr})}}fe&&me.sort(function(ba,Sa){return ba.sortKey-Sa.sortKey});for(var nn=0,Sn=me;nn<Sn.length;nn+=1){var xn=Sn[nn],In=xn.geometry,Hn=xn.index,oa=xn.sourceLayerIndex;if(this.hasPattern){var aa=uh("line",this.layers,xn,this.zoom,B);this.patternFeatures.push(aa)}else this.addFeature(xn,In,Hn,ee,{});B.featureIndex.insert(P[Hn].feature,In,Hn,oa,this.index)}},nl.prototype.update=function(P,B,ee){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(P,B,this.stateDependentLayers,ee)},nl.prototype.addFeatures=function(P,B,ee){for(var fe=0,me=this.patternFeatures;fe<me.length;fe+=1){var Te=me[fe];this.addFeature(Te,Te.geometry,Te.index,B,ee)}},nl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},nl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},nl.prototype.upload=function(P){this.uploaded||(this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,Vh),this.indexBuffer=P.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(P),this.uploaded=!0},nl.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},nl.prototype.addFeature=function(P,B,ee,fe,me){for(var Te=this.layers[0].layout,Oe=Te.get("line-join").evaluate(P,{}),$e=Te.get("line-cap"),ft=Te.get("line-miter-limit"),yt=Te.get("line-round-limit"),Ft=0,tr=B;Ft<tr.length;Ft+=1)this.addLine(tr[Ft],P,Oe,$e,ft,yt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,P,ee,me,fe)},nl.prototype.addLine=function(P,B,ee,fe,me,Te){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,B.properties&&B.properties.hasOwnProperty("mapbox_clip_start")&&B.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+B.properties.mapbox_clip_start,this.clipEnd=+B.properties.mapbox_clip_end;for(var Oe=0;Oe<P.length-1;Oe++)this.totalDistance+=P[Oe].dist(P[Oe+1]);this.updateScaledDistance()}for(var $e="Polygon"===Kp[B.type],ft=P.length;ft>=2&&P[ft-1].equals(P[ft-2]);)ft--;for(var yt=0;yt<ft-1&&P[yt].equals(P[yt+1]);)yt++;if(!(ft<($e?3:2))){"bevel"===ee&&(me=1.05);var Kt,Ft=this.overscaling<=16?15*Ua/(512*this.overscaling):0,tr=this.segments.prepareSegment(10*ft,this.layoutVertexArray,this.indexArray),xr=void 0,Fr=void 0,fn=void 0,nn=void 0;this.e1=this.e2=-1,$e&&(nn=P[yt].sub(Kt=P[ft-2])._unit()._perp());for(var Sn=yt;Sn<ft;Sn++)if(!(Fr=Sn===ft-1?$e?P[yt+1]:void 0:P[Sn+1])||!P[Sn].equals(Fr)){nn&&(fn=nn),Kt&&(xr=Kt),Kt=P[Sn],nn=Fr?Fr.sub(Kt)._unit()._perp():fn;var xn=(fn=fn||nn).add(nn);(0!==xn.x||0!==xn.y)&&xn._unit();var Mn=fn.x*nn.x+fn.y*nn.y,In=xn.x*nn.x+xn.y*nn.y,Hn=0!==In?1/In:1/0,oa=2*Math.sqrt(2-2*In),aa=In<Qp&&xr&&Fr,Na=fn.x*nn.y-fn.y*nn.x>0;if(aa&&Sn>yt){var ba=Kt.dist(xr);if(ba>2*Ft){var Sa=Kt.sub(Kt.sub(xr)._mult(Ft/ba)._round());this.updateDistance(xr,Sa),this.addCurrentVertex(Sa,fn,0,0,tr),xr=Sa}}var ni=xr&&Fr,Pa=ni?ee:$e?"butt":fe;if(ni&&"round"===Pa&&(Hn<Te?Pa="miter":Hn<=2&&(Pa="fakeround")),"miter"===Pa&&Hn>me&&(Pa="bevel"),"bevel"===Pa&&(Hn>2&&(Pa="flipbevel"),Hn<me&&(Pa="miter")),xr&&this.updateDistance(xr,Kt),"miter"===Pa)xn._mult(Hn),this.addCurrentVertex(Kt,xn,0,0,tr);else if("flipbevel"===Pa){if(Hn>100)xn=nn.mult(-1);else{var za=Hn*fn.add(nn).mag()/fn.sub(nn).mag();xn._perp()._mult(za*(Na?-1:1))}this.addCurrentVertex(Kt,xn,0,0,tr),this.addCurrentVertex(Kt,xn.mult(-1),0,0,tr)}else if("bevel"===Pa||"fakeround"===Pa){var vi=-Math.sqrt(Hn*Hn-1),ei=Na?vi:0,Ii=Na?0:vi;if(xr&&this.addCurrentVertex(Kt,fn,ei,Ii,tr),"fakeround"===Pa)for(var ji=Math.round(180*oa/Math.PI/20),zi=1;zi<ji;zi++){var Fi=zi/ji;if(.5!==Fi){var Li=Fi-.5;Fi+=Fi*Li*(Fi-1)*((1.0904+Mn*(Mn*(3.55645-1.43519*Mn)-3.2452))*Li*Li+(.848013+Mn*(.215638*Mn-1.06021)))}var To=nn.sub(fn)._mult(Fi)._add(fn)._unit()._mult(Na?-1:1);this.addHalfVertex(Kt,To.x,To.y,!1,Na,0,tr)}Fr&&this.addCurrentVertex(Kt,nn,-ei,-Ii,tr)}else if("butt"===Pa)this.addCurrentVertex(Kt,xn,0,0,tr);else if("square"===Pa){var Po=xr?1:-1;this.addCurrentVertex(Kt,xn,Po,Po,tr)}else"round"===Pa&&(xr&&(this.addCurrentVertex(Kt,fn,0,0,tr),this.addCurrentVertex(Kt,fn,1,1,tr,!0)),Fr&&(this.addCurrentVertex(Kt,nn,-1,-1,tr,!0),this.addCurrentVertex(Kt,nn,0,0,tr)));if(aa&&Sn<ft-1){var ts=Kt.dist(Fr);if(ts>2*Ft){var Bo=Kt.add(Fr.sub(Kt)._mult(Ft/ts)._round());this.updateDistance(Kt,Bo),this.addCurrentVertex(Bo,nn,0,0,tr),Kt=Bo}}}}},nl.prototype.addCurrentVertex=function(P,B,ee,fe,me,Te){void 0===Te&&(Te=!1);var ft=B.y*fe-B.x,yt=-B.y-B.x*fe;this.addHalfVertex(P,B.x+B.y*ee,B.y-B.x*ee,Te,!1,ee,me),this.addHalfVertex(P,ft,yt,Te,!0,-fe,me),this.distance>Zh/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(P,B,ee,fe,me,Te))},nl.prototype.addHalfVertex=function(P,B,ee,fe,me,Te,Oe){var yt=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((P.x<<1)+(fe?1:0),(P.y<<1)+(me?1:0),Math.round(63*B)+128,Math.round(63*ee)+128,1+(0===Te?0:Te<0?-1:1)|(63&yt)<<2,yt>>6);var Ft=Oe.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ft),Oe.primitiveLength++),me?this.e2=Ft:this.e1=Ft},nl.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Zh-1):this.distance},nl.prototype.updateDistance=function(P,B){this.distance+=P.dist(B),this.updateScaledDistance()},ka("LineBucket",nl,{omit:["layers","patternFeatures"]});var td=new Gi({"line-cap":new Ma(Ht.layout_line["line-cap"]),"line-join":new Ia(Ht.layout_line["line-join"]),"line-miter-limit":new Ma(Ht.layout_line["line-miter-limit"]),"line-round-limit":new Ma(Ht.layout_line["line-round-limit"]),"line-sort-key":new Ia(Ht.layout_line["line-sort-key"])}),Yh={paint:new Gi({"line-opacity":new Ia(Ht.paint_line["line-opacity"]),"line-color":new Ia(Ht.paint_line["line-color"]),"line-translate":new Ma(Ht.paint_line["line-translate"]),"line-translate-anchor":new Ma(Ht.paint_line["line-translate-anchor"]),"line-width":new Ia(Ht.paint_line["line-width"]),"line-gap-width":new Ia(Ht.paint_line["line-gap-width"]),"line-offset":new Ia(Ht.paint_line["line-offset"]),"line-blur":new Ia(Ht.paint_line["line-blur"]),"line-dasharray":new mo(Ht.paint_line["line-dasharray"]),"line-pattern":new qi(Ht.paint_line["line-pattern"]),"line-gradient":new po(Ht.paint_line["line-gradient"])}),layout:td},nd=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.possiblyEvaluate=function(ee,fe){return fe=new hi(Math.floor(fe.zoom),{now:fe.now,fadeDuration:fe.fadeDuration,zoomHistory:fe.zoomHistory,transition:fe.transition}),L.prototype.possiblyEvaluate.call(this,ee,fe)},P.prototype.evaluate=function(ee,fe,me,Te){return fe=y({},fe,{zoom:Math.floor(fe.zoom)}),L.prototype.evaluate.call(this,ee,fe,me,Te)},P}(Ia),Wh=new nd(Yh.paint.properties["line-width"].specification);Wh.useIntegerZoom=!0;var ad=function(L){function P(B){L.call(this,B,Yh)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._handleSpecialPaintPropertyUpdate=function(ee){"line-gradient"===ee&&this._updateGradient()},P.prototype._updateGradient=function(){this.gradient=Eh(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},P.prototype.recalculate=function(ee,fe){L.prototype.recalculate.call(this,ee,fe),this.paint._values["line-floorwidth"]=Wh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,ee)},P.prototype.createBucket=function(ee){return new nl(ee)},P.prototype.queryRadius=function(ee){var fe=ee,me=Xh(xl("line-width",this,fe),xl("line-gap-width",this,fe)),Te=xl("line-offset",this,fe);return me/2+Math.abs(Te)+fu(this.paint.get("line-translate"))},P.prototype.queryIntersectsFeature=function(ee,fe,me,Te,Oe,$e,ft){var yt=Xl(ee,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),$e.angle,ft),Ft=ft/2*Xh(this.paint.get("line-width").evaluate(fe,me),this.paint.get("line-gap-width").evaluate(fe,me)),tr=this.paint.get("line-offset").evaluate(fe,me);return tr&&(Te=function id(L,P){for(var B=[],ee=new i(0,0),fe=0;fe<L.length;fe++){for(var me=L[fe],Te=[],Oe=0;Oe<me.length;Oe++){var ft=me[Oe],yt=me[Oe+1],Ft=0===Oe?ee:ft.sub(me[Oe-1])._unit()._perp(),tr=Oe===me.length-1?ee:yt.sub(ft)._unit()._perp(),Kt=Ft._add(tr)._unit();Kt._mult(1/(Kt.x*tr.x+Kt.y*tr.y)),Te.push(Kt._mult(P)._add(ft))}B.push(Te)}return B}(Te,tr*ft)),function zo(L,P,B){for(var ee=0;ee<P.length;ee++){var fe=P[ee];if(L.length>=3)for(var me=0;me<fe.length;me++)if(Ns(L,fe[me]))return!0;if(Pl(L,fe,B))return!0}return!1}(yt,Te,Ft)},P.prototype.isTileClipped=function(){return!0},P}(Ll);function Xh(L,P){return P>0?P+2*L:L}var fh=oo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),od=oo([{name:"a_projected_pos",components:3,type:"Float32"}],4),sd=(oo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),oo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),jh=(oo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),oo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ld=oo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function cd(L,P,B){return L.sections.forEach(function(ee){ee.text=function ud(L,P,B){var ee=P.layout.get("text-transform").evaluate(B,{});return"uppercase"===ee?L=L.toLocaleUpperCase():"lowercase"===ee&&(L=L.toLocaleLowerCase()),Ya.applyArabicShaping&&(L=Ya.applyArabicShaping(L)),L}(ee.text,P,B)}),L}oo([{name:"triangle",components:3,type:"Uint16"}]),oo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),oo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),oo([{type:"Float32",name:"offsetX"}]),oo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var vf={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var Rf_read=function(L,P,B,ee,fe){var me,Te,Oe=8*fe-ee-1,$e=(1<<Oe)-1,ft=$e>>1,yt=-7,Ft=B?fe-1:0,tr=B?-1:1,Kt=L[P+Ft];for(Ft+=tr,me=Kt&(1<<-yt)-1,Kt>>=-yt,yt+=Oe;yt>0;me=256*me+L[P+Ft],Ft+=tr,yt-=8);for(Te=me&(1<<-yt)-1,me>>=-yt,yt+=ee;yt>0;Te=256*Te+L[P+Ft],Ft+=tr,yt-=8);if(0===me)me=1-ft;else{if(me===$e)return Te?NaN:1/0*(Kt?-1:1);Te+=Math.pow(2,ee),me-=ft}return(Kt?-1:1)*Te*Math.pow(2,me-ee)},Rf_write=function(L,P,B,ee,fe,me){var Te,Oe,$e,ft=8*me-fe-1,yt=(1<<ft)-1,Ft=yt>>1,tr=23===fe?Math.pow(2,-24)-Math.pow(2,-77):0,Kt=ee?0:me-1,xr=ee?1:-1,Fr=P<0||0===P&&1/P<0?1:0;for(P=Math.abs(P),isNaN(P)||P===1/0?(Oe=isNaN(P)?1:0,Te=yt):(Te=Math.floor(Math.log(P)/Math.LN2),P*($e=Math.pow(2,-Te))<1&&(Te--,$e*=2),(P+=Te+Ft>=1?tr/$e:tr*Math.pow(2,1-Ft))*$e>=2&&(Te++,$e/=2),Te+Ft>=yt?(Oe=0,Te=yt):Te+Ft>=1?(Oe=(P*$e-1)*Math.pow(2,fe),Te+=Ft):(Oe=P*Math.pow(2,Ft-1)*Math.pow(2,fe),Te=0));fe>=8;L[B+Kt]=255&Oe,Kt+=xr,Oe/=256,fe-=8);for(Te=Te<<fe|Oe,ft+=fe;ft>0;L[B+Kt]=255&Te,Kt+=xr,Te/=256,ft-=8);L[B+Kt-xr]|=128*Fr},If=so;function so(L){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(L)?L:new Uint8Array(L||0),this.pos=0,this.type=0,this.length=this.buf.length}so.Varint=0,so.Fixed64=1,so.Bytes=2,so.Fixed32=5;var hh=4294967296,Jh=1/hh,Kh="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function $u(L){return L.type===so.Bytes?L.readVarint()+L.pos:L.pos+1}function Qh(L,P,B){var ee=P<=16383?1:P<=2097151?2:P<=268435455?3:Math.floor(Math.log(P)/(7*Math.LN2));B.realloc(ee);for(var fe=B.pos-1;fe>=L;fe--)B.buf[fe+ee]=B.buf[fe]}function bd(L,P){for(var B=0;B<L.length;B++)P.writeVarint(L[B])}function _d(L,P){for(var B=0;B<L.length;B++)P.writeSVarint(L[B])}function wd(L,P){for(var B=0;B<L.length;B++)P.writeFloat(L[B])}function Td(L,P){for(var B=0;B<L.length;B++)P.writeDouble(L[B])}function Ad(L,P){for(var B=0;B<L.length;B++)P.writeBoolean(L[B])}function Md(L,P){for(var B=0;B<L.length;B++)P.writeFixed32(L[B])}function Sd(L,P){for(var B=0;B<L.length;B++)P.writeSFixed32(L[B])}function kd(L,P){for(var B=0;B<L.length;B++)P.writeFixed64(L[B])}function Cd(L,P){for(var B=0;B<L.length;B++)P.writeSFixed64(L[B])}function zf(L,P){return(L[P]|L[P+1]<<8|L[P+2]<<16)+16777216*L[P+3]}function Bc(L,P,B){L[B]=P,L[B+1]=P>>>8,L[B+2]=P>>>16,L[B+3]=P>>>24}function $h(L,P){return(L[P]|L[P+1]<<8|L[P+2]<<16)+(L[P+3]<<24)}so.prototype={destroy:function(){this.buf=null},readFields:function(L,P,B){for(B=B||this.length;this.pos<B;){var ee=this.readVarint(),fe=ee>>3,me=this.pos;this.type=7&ee,L(fe,P,this),this.pos===me&&this.skip(ee)}return P},readMessage:function(L,P){return this.readFields(L,P,this.readVarint()+this.pos)},readFixed32:function(){var L=zf(this.buf,this.pos);return this.pos+=4,L},readSFixed32:function(){var L=$h(this.buf,this.pos);return this.pos+=4,L},readFixed64:function(){var L=zf(this.buf,this.pos)+zf(this.buf,this.pos+4)*hh;return this.pos+=8,L},readSFixed64:function(){var L=zf(this.buf,this.pos)+$h(this.buf,this.pos+4)*hh;return this.pos+=8,L},readFloat:function(){var L=Rf_read(this.buf,this.pos,!0,23,4);return this.pos+=4,L},readDouble:function(){var L=Rf_read(this.buf,this.pos,!0,52,8);return this.pos+=8,L},readVarint:function(L){var B,ee,P=this.buf;return B=127&(ee=P[this.pos++]),ee<128||(B|=(127&(ee=P[this.pos++]))<<7,ee<128)||(B|=(127&(ee=P[this.pos++]))<<14,ee<128)||(B|=(127&(ee=P[this.pos++]))<<21,ee<128)?B:function gd(L,P,B){var fe,me,ee=B.buf;if(fe=(112&(me=ee[B.pos++]))>>4,me<128||(fe|=(127&(me=ee[B.pos++]))<<3,me<128)||(fe|=(127&(me=ee[B.pos++]))<<10,me<128)||(fe|=(127&(me=ee[B.pos++]))<<17,me<128)||(fe|=(127&(me=ee[B.pos++]))<<24,me<128)||(fe|=(1&(me=ee[B.pos++]))<<31,me<128))return function Nc(L,P,B){return B?4294967296*P+(L>>>0):4294967296*(P>>>0)+(L>>>0)}(L,fe,P);throw new Error("Expected varint not more than 10 bytes")}(B|=(15&(ee=P[this.pos]))<<28,L,this)},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var L=this.readVarint();return L%2==1?(L+1)/-2:L/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var L=this.readVarint()+this.pos,P=this.pos;return this.pos=L,L-P>=12&&Kh?function Ld(L,P,B){return Kh.decode(L.subarray(P,B))}(this.buf,P,L):function Ed(L,P,B){for(var ee="",fe=P;fe<B;){var $e,ft,yt,me=L[fe],Te=null,Oe=me>239?4:me>223?3:me>191?2:1;if(fe+Oe>B)break;1===Oe?me<128&&(Te=me):2===Oe?128==(192&($e=L[fe+1]))&&(Te=(31&me)<<6|63&$e)<=127&&(Te=null):3===Oe?(ft=L[fe+2],128==(192&($e=L[fe+1]))&&128==(192&ft)&&((Te=(15&me)<<12|(63&$e)<<6|63&ft)<=2047||Te>=55296&&Te<=57343)&&(Te=null)):4===Oe&&(ft=L[fe+2],yt=L[fe+3],128==(192&($e=L[fe+1]))&&128==(192&ft)&&128==(192&yt)&&((Te=(15&me)<<18|(63&$e)<<12|(63&ft)<<6|63&yt)<=65535||Te>=1114112)&&(Te=null)),null===Te?(Te=65533,Oe=1):Te>65535&&(Te-=65536,ee+=String.fromCharCode(Te>>>10&1023|55296),Te=56320|1023&Te),ee+=String.fromCharCode(Te),fe+=Oe}return ee}(this.buf,P,L)},readBytes:function(){var L=this.readVarint()+this.pos,P=this.buf.subarray(this.pos,L);return this.pos=L,P},readPackedVarint:function(L,P){if(this.type!==so.Bytes)return L.push(this.readVarint(P));var B=$u(this);for(L=L||[];this.pos<B;)L.push(this.readVarint(P));return L},readPackedSVarint:function(L){if(this.type!==so.Bytes)return L.push(this.readSVarint());var P=$u(this);for(L=L||[];this.pos<P;)L.push(this.readSVarint());return L},readPackedBoolean:function(L){if(this.type!==so.Bytes)return L.push(this.readBoolean());var P=$u(this);for(L=L||[];this.pos<P;)L.push(this.readBoolean());return L},readPackedFloat:function(L){if(this.type!==so.Bytes)return L.push(this.readFloat());var P=$u(this);for(L=L||[];this.pos<P;)L.push(this.readFloat());return L},readPackedDouble:function(L){if(this.type!==so.Bytes)return L.push(this.readDouble());var P=$u(this);for(L=L||[];this.pos<P;)L.push(this.readDouble());return L},readPackedFixed32:function(L){if(this.type!==so.Bytes)return L.push(this.readFixed32());var P=$u(this);for(L=L||[];this.pos<P;)L.push(this.readFixed32());return L},readPackedSFixed32:function(L){if(this.type!==so.Bytes)return L.push(this.readSFixed32());var P=$u(this);for(L=L||[];this.pos<P;)L.push(this.readSFixed32());return L},readPackedFixed64:function(L){if(this.type!==so.Bytes)return L.push(this.readFixed64());var P=$u(this);for(L=L||[];this.pos<P;)L.push(this.readFixed64());return L},readPackedSFixed64:function(L){if(this.type!==so.Bytes)return L.push(this.readSFixed64());var P=$u(this);for(L=L||[];this.pos<P;)L.push(this.readSFixed64());return L},skip:function(L){var P=7&L;if(P===so.Varint)for(;this.buf[this.pos++]>127;);else if(P===so.Bytes)this.pos=this.readVarint()+this.pos;else if(P===so.Fixed32)this.pos+=4;else{if(P!==so.Fixed64)throw new Error("Unimplemented type: "+P);this.pos+=8}},writeTag:function(L,P){this.writeVarint(L<<3|P)},realloc:function(L){for(var P=this.length||16;P<this.pos+L;)P*=2;if(P!==this.length){var B=new Uint8Array(P);B.set(this.buf),this.buf=B,this.length=P}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(L){this.realloc(4),Bc(this.buf,L,this.pos),this.pos+=4},writeSFixed32:function(L){this.realloc(4),Bc(this.buf,L,this.pos),this.pos+=4},writeFixed64:function(L){this.realloc(8),Bc(this.buf,-1&L,this.pos),Bc(this.buf,Math.floor(L*Jh),this.pos+4),this.pos+=8},writeSFixed64:function(L){this.realloc(8),Bc(this.buf,-1&L,this.pos),Bc(this.buf,Math.floor(L*Jh),this.pos+4),this.pos+=8},writeVarint:function(L){(L=+L||0)>268435455||L<0?function yd(L,P){var B,ee;if(L>=0?(B=L%4294967296|0,ee=L/4294967296|0):(ee=~(-L/4294967296),4294967295^(B=~(-L%4294967296))?B=B+1|0:(B=0,ee=ee+1|0)),L>=0x10000000000000000||L<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");P.realloc(10),function md(L,P,B){B.buf[B.pos++]=127&L|128,L>>>=7,B.buf[B.pos++]=127&L|128,L>>>=7,B.buf[B.pos++]=127&L|128,L>>>=7,B.buf[B.pos++]=127&L|128,B.buf[B.pos]=127&(L>>>=7)}(B,0,P),function xd(L,P){var B=(7&L)<<4;P.buf[P.pos++]|=B|((L>>>=3)?128:0),L&&(P.buf[P.pos++]=127&L|((L>>>=7)?128:0),L&&(P.buf[P.pos++]=127&L|((L>>>=7)?128:0),L&&(P.buf[P.pos++]=127&L|((L>>>=7)?128:0),L&&(P.buf[P.pos++]=127&L|((L>>>=7)?128:0),L&&(P.buf[P.pos++]=127&L)))))}(ee,P)}(L,this):(this.realloc(4),this.buf[this.pos++]=127&L|(L>127?128:0),!(L<=127)&&(this.buf[this.pos++]=127&(L>>>=7)|(L>127?128:0),!(L<=127)&&(this.buf[this.pos++]=127&(L>>>=7)|(L>127?128:0),!(L<=127)&&(this.buf[this.pos++]=L>>>7&127))))},writeSVarint:function(L){this.writeVarint(L<0?2*-L-1:2*L)},writeBoolean:function(L){this.writeVarint(Boolean(L))},writeString:function(L){L=String(L),this.realloc(4*L.length),this.pos++;var P=this.pos;this.pos=function Pd(L,P,B){for(var fe,me,ee=0;ee<P.length;ee++){if((fe=P.charCodeAt(ee))>55295&&fe<57344){if(!me){fe>56319||ee+1===P.length?(L[B++]=239,L[B++]=191,L[B++]=189):me=fe;continue}if(fe<56320){L[B++]=239,L[B++]=191,L[B++]=189,me=fe;continue}fe=me-55296<<10|fe-56320|65536,me=null}else me&&(L[B++]=239,L[B++]=191,L[B++]=189,me=null);fe<128?L[B++]=fe:(fe<2048?L[B++]=fe>>6|192:(fe<65536?L[B++]=fe>>12|224:(L[B++]=fe>>18|240,L[B++]=fe>>12&63|128),L[B++]=fe>>6&63|128),L[B++]=63&fe|128)}return B}(this.buf,L,this.pos);var B=this.pos-P;B>=128&&Qh(P,B,this),this.pos=P-1,this.writeVarint(B),this.pos+=B},writeFloat:function(L){this.realloc(4),Rf_write(this.buf,L,this.pos,!0,23,4),this.pos+=4},writeDouble:function(L){this.realloc(8),Rf_write(this.buf,L,this.pos,!0,52,8),this.pos+=8},writeBytes:function(L){var P=L.length;this.writeVarint(P),this.realloc(P);for(var B=0;B<P;B++)this.buf[this.pos++]=L[B]},writeRawMessage:function(L,P){this.pos++;var B=this.pos;L(P,this);var ee=this.pos-B;ee>=128&&Qh(B,ee,this),this.pos=B-1,this.writeVarint(ee),this.pos+=ee},writeMessage:function(L,P,B){this.writeTag(L,so.Bytes),this.writeRawMessage(P,B)},writePackedVarint:function(L,P){P.length&&this.writeMessage(L,bd,P)},writePackedSVarint:function(L,P){P.length&&this.writeMessage(L,_d,P)},writePackedBoolean:function(L,P){P.length&&this.writeMessage(L,Ad,P)},writePackedFloat:function(L,P){P.length&&this.writeMessage(L,wd,P)},writePackedDouble:function(L,P){P.length&&this.writeMessage(L,Td,P)},writePackedFixed32:function(L,P){P.length&&this.writeMessage(L,Md,P)},writePackedSFixed32:function(L,P){P.length&&this.writeMessage(L,Sd,P)},writePackedFixed64:function(L,P){P.length&&this.writeMessage(L,kd,P)},writePackedSFixed64:function(L,P){P.length&&this.writeMessage(L,Cd,P)},writeBytesField:function(L,P){this.writeTag(L,so.Bytes),this.writeBytes(P)},writeFixed32Field:function(L,P){this.writeTag(L,so.Fixed32),this.writeFixed32(P)},writeSFixed32Field:function(L,P){this.writeTag(L,so.Fixed32),this.writeSFixed32(P)},writeFixed64Field:function(L,P){this.writeTag(L,so.Fixed64),this.writeFixed64(P)},writeSFixed64Field:function(L,P){this.writeTag(L,so.Fixed64),this.writeSFixed64(P)},writeVarintField:function(L,P){this.writeTag(L,so.Varint),this.writeVarint(P)},writeSVarintField:function(L,P){this.writeTag(L,so.Varint),this.writeSVarint(P)},writeStringField:function(L,P){this.writeTag(L,so.Bytes),this.writeString(P)},writeFloatField:function(L,P){this.writeTag(L,so.Fixed32),this.writeFloat(P)},writeDoubleField:function(L,P){this.writeTag(L,so.Fixed64),this.writeDouble(P)},writeBooleanField:function(L,P){this.writeVarintField(L,Boolean(P))}};function Dd(L,P,B){1===L&&B.readMessage(Rd,P)}function Rd(L,P,B){if(3===L){var ee=B.readMessage(Id,{}),Te=ee.width,Oe=ee.height,$e=ee.left,ft=ee.top,yt=ee.advance;P.push({id:ee.id,bitmap:new wc({width:Te+6,height:Oe+6},ee.bitmap),metrics:{width:Te,height:Oe,left:$e,top:ft,advance:yt}})}}function Id(L,P,B){1===L?P.id=B.readVarint():2===L?P.bitmap=B.readBytes():3===L?P.width=B.readVarint():4===L?P.height=B.readVarint():5===L?P.left=B.readSVarint():6===L?P.top=B.readSVarint():7===L&&(P.advance=B.readVarint())}function ev(L){for(var P=0,B=0,ee=0,fe=L;ee<fe.length;ee+=1){var me=fe[ee];P+=me.w*me.h,B=Math.max(B,me.w)}L.sort(function(fn,nn){return nn.h-fn.h});for(var Oe=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(P/.95)),B),h:1/0}],$e=0,ft=0,yt=0,Ft=L;yt<Ft.length;yt+=1)for(var tr=Ft[yt],Kt=Oe.length-1;Kt>=0;Kt--){var xr=Oe[Kt];if(!(tr.w>xr.w||tr.h>xr.h)){if(tr.x=xr.x,tr.y=xr.y,ft=Math.max(ft,tr.y+tr.h),$e=Math.max($e,tr.x+tr.w),tr.w===xr.w&&tr.h===xr.h){var Fr=Oe.pop();Kt<Oe.length&&(Oe[Kt]=Fr)}else tr.h===xr.h?(xr.x+=tr.w,xr.w-=tr.w):tr.w===xr.w?(xr.y+=tr.h,xr.h-=tr.h):(Oe.push({x:xr.x+tr.w,y:xr.y,w:xr.w-tr.w,h:tr.h}),xr.y+=tr.h,xr.h-=tr.h);break}}return{w:$e,h:ft,fill:P/($e*ft)||0}}var Ff=function(P,B){var ee=B.pixelRatio,fe=B.version,me=B.stretchX,Te=B.stretchY,Oe=B.content;this.paddedRect=P,this.pixelRatio=ee,this.stretchX=me,this.stretchY=Te,this.content=Oe,this.version=fe},pf={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};pf.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},pf.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},pf.tlbr.get=function(){return this.tl.concat(this.br)},pf.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Ff.prototype,pf);var df=function(P,B){var ee={},fe={};this.haveRenderCallbacks=[];var me=[];this.addImages(P,ee,me),this.addImages(B,fe,me);var Te=ev(me),ft=new rl({width:Te.w||1,height:Te.h||1});for(var yt in P){var Ft=P[yt],tr=ee[yt].paddedRect;rl.copy(Ft.data,ft,{x:0,y:0},{x:tr.x+1,y:tr.y+1},Ft.data)}for(var Kt in B){var xr=B[Kt],Fr=fe[Kt].paddedRect,fn=Fr.x+1,nn=Fr.y+1,Sn=xr.data.width,xn=xr.data.height;rl.copy(xr.data,ft,{x:0,y:0},{x:fn,y:nn},xr.data),rl.copy(xr.data,ft,{x:0,y:xn-1},{x:fn,y:nn-1},{width:Sn,height:1}),rl.copy(xr.data,ft,{x:0,y:0},{x:fn,y:nn+xn},{width:Sn,height:1}),rl.copy(xr.data,ft,{x:Sn-1,y:0},{x:fn-1,y:nn},{width:1,height:xn}),rl.copy(xr.data,ft,{x:0,y:0},{x:fn+Sn,y:nn},{width:1,height:xn})}this.image=ft,this.iconPositions=ee,this.patternPositions=fe};df.prototype.addImages=function(P,B,ee){for(var fe in P){var me=P[fe],Te={x:0,y:0,w:me.data.width+2,h:me.data.height+2};ee.push(Te),B[fe]=new Ff(Te,me),me.hasRenderCallback&&this.haveRenderCallbacks.push(fe)}},df.prototype.patchUpdatedImages=function(P,B){for(var ee in P.dispatchRenderCallbacks(this.haveRenderCallbacks),P.updatedImages)this.patchUpdatedImage(this.iconPositions[ee],P.getImage(ee),B),this.patchUpdatedImage(this.patternPositions[ee],P.getImage(ee),B)},df.prototype.patchUpdatedImage=function(P,B,ee){if(P&&B&&P.version!==B.version){P.version=B.version;var fe=P.tl;ee.update(B.data,void 0,{x:fe[0],y:fe[1]})}},ka("ImagePosition",Ff),ka("ImageAtlas",df);var Rl={horizontal:1,vertical:2,horizontalOnly:3},gf=-17;var Uc=function(){this.scale=1,this.fontStack="",this.imageName=null};Uc.forText=function(P,B){var ee=new Uc;return ee.scale=P||1,ee.fontStack=B,ee},Uc.forImage=function(P){var B=new Uc;return B.imageName=P,B};var ks=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Of(L,P,B,ee,fe,me,Te,Oe,$e,ft,yt,Ft,tr,Kt,xr,Fr){var fn=ks.fromFeature(L,fe);Ft===Rl.vertical&&fn.verticalizePunctuation();var nn,Sn=Ya.processBidirectionalText,xn=Ya.processStyledBidirectionalText;if(Sn&&1===fn.sections.length){nn=[];for(var In=0,Hn=Sn(fn.toString(),ph(fn,ft,me,P,ee,Kt,xr));In<Hn.length;In+=1){var oa=Hn[In],aa=new ks;aa.text=oa,aa.sections=fn.sections;for(var Na=0;Na<oa.length;Na++)aa.sectionIndex.push(0);nn.push(aa)}}else if(xn){nn=[];for(var Sa=0,ni=xn(fn.text,fn.sectionIndex,ph(fn,ft,me,P,ee,Kt,xr));Sa<ni.length;Sa+=1){var Pa=ni[Sa],za=new ks;za.text=Pa[0],za.sectionIndex=Pa[1],za.sections=fn.sections,nn.push(za)}}else nn=function Od(L,P){for(var B=[],ee=L.text,fe=0,me=0,Te=P;me<Te.length;me+=1){var Oe=Te[me];B.push(L.substring(fe,Oe)),fe=Oe}return fe<ee.length&&B.push(L.substring(fe,ee.length)),B}(fn,ph(fn,ft,me,P,ee,Kt,xr));var vi=[],ei={positionedLines:vi,text:fn.toString(),top:yt[1],bottom:yt[1],left:yt[0],right:yt[0],writingMode:Ft,iconsInText:!1,verticalizable:!1};return function Ud(L,P,B,ee,fe,me,Te,Oe,$e,ft,yt,Ft){for(var tr=0,Kt=-17,xr=0,Fr=0,fn="right"===Oe?1:"left"===Oe?0:.5,nn=0,Sn=0,xn=fe;Sn<xn.length;Sn+=1){var Mn=xn[Sn];Mn.trim();var In=Mn.getMaxScale(),Hn=24*(In-1),oa={positionedGlyphs:[],lineOffset:0};L.positionedLines[nn]=oa;var aa=oa.positionedGlyphs,Na=0;if(Mn.length()){for(var ba=0;ba<Mn.length();ba++){var Sa=Mn.getSection(ba),ni=Mn.getSectionIndex(ba),Pa=Mn.getCharCode(ba),za=0,vi=null,ei=null,Ii=null,ji=24,zi=!($e===Rl.horizontal||!yt&&!er(Pa)||yt&&(Yu[Pa]||Qr(Pa)));if(Sa.imageName){var To=ee[Sa.imageName];if(!To)continue;Ii=Sa.imageName,L.iconsInText=L.iconsInText||!0,ei=To.paddedRect;var Po=To.displaySize;Sa.scale=24*Sa.scale/Ft,za=Hn+(24-Po[1]*Sa.scale),ji=(vi={width:Po[0],height:Po[1],left:1,top:-3,advance:zi?Po[1]:Po[0]}).advance;var Bo=zi?Po[0]*Sa.scale-24*In:Po[1]*Sa.scale-24*In;Bo>0&&Bo>Na&&(Na=Bo)}else{var Fi=B[Sa.fontStack],Li=Fi&&Fi[Pa];if(Li&&Li.rect)ei=Li.rect,vi=Li.metrics;else{var eo=P[Sa.fontStack],lo=eo&&eo[Pa];if(!lo)continue;vi=lo.metrics}za=24*(In-Sa.scale)}zi?(L.verticalizable=!0,aa.push({glyph:Pa,imageName:Ii,x:tr,y:Kt+za,vertical:zi,scale:Sa.scale,fontStack:Sa.fontStack,sectionIndex:ni,metrics:vi,rect:ei}),tr+=ji*Sa.scale+ft):(aa.push({glyph:Pa,imageName:Ii,x:tr,y:Kt+za,vertical:zi,scale:Sa.scale,fontStack:Sa.fontStack,sectionIndex:ni,metrics:vi,rect:ei}),tr+=vi.advance*Sa.scale+ft)}0!==aa.length&&(xr=Math.max(tr-ft,xr),Vd(aa,0,aa.length-1,fn,Na)),tr=0;var Es=me*In+Na;oa.lineOffset=Math.max(Na,Hn),Kt+=Es,Fr=Math.max(Es,Fr),++nn}else Kt+=me,++nn}var rs=Kt- -17,Bs=dh(Te),Us=Bs.horizontalAlign,Jo=Bs.verticalAlign;(function Hd(L,P,B,ee,fe,me,Te,Oe,$e){var ft=(P-B)*fe,yt=0;yt=me!==Te?-Oe*ee-gf:(-ee*$e+.5)*Te;for(var Ft=0,tr=L;Ft<tr.length;Ft+=1)for(var xr=0,Fr=tr[Ft].positionedGlyphs;xr<Fr.length;xr+=1){var fn=Fr[xr];fn.x+=ft,fn.y+=yt}})(L.positionedLines,fn,Us,Jo,xr,Fr,me,rs,fe.length),L.top+=-Jo*rs,L.bottom=L.top+rs,L.left+=-Us*xr,L.right=L.left+xr}(ei,P,B,ee,nn,Te,Oe,$e,Ft,ft,tr,Fr),!function Fd(L){for(var P=0,B=L;P<B.length;P+=1)if(0!==B[P].positionedGlyphs.length)return!1;return!0}(vi)&&ei}ks.fromFeature=function(P,B){for(var ee=new ks,fe=0;fe<P.sections.length;fe++){var me=P.sections[fe];me.image?ee.addImageSection(me):ee.addTextSection(me,B)}return ee},ks.prototype.length=function(){return this.text.length},ks.prototype.getSection=function(P){return this.sections[this.sectionIndex[P]]},ks.prototype.getSectionIndex=function(P){return this.sectionIndex[P]},ks.prototype.getCharCode=function(P){return this.text.charCodeAt(P)},ks.prototype.verticalizePunctuation=function(){this.text=function hd(L){for(var P="",B=0;B<L.length;B++){var ee=L.charCodeAt(B+1)||null,fe=L.charCodeAt(B-1)||null;P+=ee&&Mr(ee)&&!vf[L[B+1]]||fe&&Mr(fe)&&!vf[L[B-1]]||!vf[L[B]]?L[B]:vf[L[B]]}return P}(this.text)},ks.prototype.trim=function(){for(var P=0,B=0;B<this.text.length&&Yu[this.text.charCodeAt(B)];B++)P++;for(var ee=this.text.length,fe=this.text.length-1;fe>=0&&fe>=P&&Yu[this.text.charCodeAt(fe)];fe--)ee--;this.text=this.text.substring(P,ee),this.sectionIndex=this.sectionIndex.slice(P,ee)},ks.prototype.substring=function(P,B){var ee=new ks;return ee.text=this.text.substring(P,B),ee.sectionIndex=this.sectionIndex.slice(P,B),ee.sections=this.sections,ee},ks.prototype.toString=function(){return this.text},ks.prototype.getMaxScale=function(){var P=this;return this.sectionIndex.reduce(function(B,ee){return Math.max(B,P.sections[ee].scale)},0)},ks.prototype.addTextSection=function(P,B){this.text+=P.text,this.sections.push(Uc.forText(P.scale,P.fontStack||B));for(var ee=this.sections.length-1,fe=0;fe<P.text.length;++fe)this.sectionIndex.push(ee)},ks.prototype.addImageSection=function(P){var B=P.image?P.image.name:"";if(0!==B.length){var ee=this.getNextImageSectionCharCode();ee?(this.text+=String.fromCharCode(ee),this.sections.push(Uc.forImage(B)),this.sectionIndex.push(this.sections.length-1)):F("Reached maximum number of images 6401")}else F("Can't add FormattedSection with an empty image.")},ks.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Yu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},_l={};function nv(L,P,B,ee,fe,me){if(P.imageName){var $e=ee[P.imageName];return $e?$e.displaySize[0]*P.scale*24/me+fe:0}var Te=B[P.fontStack],Oe=Te&&Te[L];return Oe?Oe.metrics.advance*P.scale+fe:0}function av(L,P,B,ee){var fe=Math.pow(L-P,2);return ee?L<P?fe/2:2*fe:fe+Math.abs(B)*B}function Bd(L,P,B){var ee=0;return 10===L&&(ee-=1e4),B&&(ee+=150),(40===L||65288===L)&&(ee+=50),(41===P||65289===P)&&(ee+=50),ee}function iv(L,P,B,ee,fe,me){for(var Te=null,Oe=av(P,B,fe,me),$e=0,ft=ee;$e<ft.length;$e+=1){var yt=ft[$e],tr=av(P-yt.x,B,fe,me)+yt.badness;tr<=Oe&&(Te=yt,Oe=tr)}return{index:L,x:P,priorBreak:Te,badness:Oe}}function ov(L){return L?ov(L.priorBreak).concat(L.index):[]}function ph(L,P,B,ee,fe,me,Te){if("point"!==me)return[];if(!L)return[];for(var Oe=[],$e=function Nd(L,P,B,ee,fe,me){for(var Te=0,Oe=0;Oe<L.length();Oe++){var $e=L.getSection(Oe);Te+=nv(L.getCharCode(Oe),$e,ee,fe,P,me)}return Te/Math.max(1,Math.ceil(Te/B))}(L,P,B,ee,fe,Te),ft=L.text.indexOf("\u200b")>=0,yt=0,Ft=0;Ft<L.length();Ft++){var tr=L.getSection(Ft),Kt=L.getCharCode(Ft);if(Yu[Kt]||(yt+=nv(Kt,tr,ee,fe,P,Te)),Ft<L.length()-1){var xr=$t(Kt);(_l[Kt]||xr||tr.imageName)&&Oe.push(iv(Ft+1,yt,$e,Oe,Bd(Kt,L.getCharCode(Ft+1),xr&&ft),!1))}}return ov(iv(L.length(),yt,$e,Oe,0,!0))}function dh(L){var P=.5,B=.5;switch(L){case"right":case"top-right":case"bottom-right":P=1;break;case"left":case"top-left":case"bottom-left":P=0}switch(L){case"bottom":case"bottom-right":case"bottom-left":B=1;break;case"top":case"top-right":case"top-left":B=0}return{horizontalAlign:P,verticalAlign:B}}function Vd(L,P,B,ee,fe){if(ee||fe)for(var me=L[B],Oe=(L[B].x+me.metrics.advance*me.scale)*ee,$e=P;$e<=B;$e++)L[$e].x-=Oe,L[$e].y+=fe}function sv(L,P,B,ee,fe,me){var Oe,Te=L.image;if(Te.content){var $e=Te.content,ft=Te.pixelRatio||1;Oe=[$e[0]/ft,$e[1]/ft,Te.displaySize[0]-$e[2]/ft,Te.displaySize[1]-$e[3]/ft]}var tr,Kt,xr,Fr,yt=P.left*me,Ft=P.right*me;"width"===B||"both"===B?(Fr=fe[0]+yt-ee[3],Kt=fe[0]+Ft+ee[1]):Kt=(Fr=fe[0]+(yt+Ft-Te.displaySize[0])/2)+Te.displaySize[0];var fn=P.top*me,nn=P.bottom*me;return"height"===B||"both"===B?(tr=fe[1]+fn-ee[0],xr=fe[1]+nn+ee[2]):xr=(tr=fe[1]+(fn+nn-Te.displaySize[1])/2)+Te.displaySize[1],{image:Te,top:tr,right:Kt,bottom:xr,left:Fr,collisionPadding:Oe}}_l[10]=!0,_l[32]=!0,_l[38]=!0,_l[40]=!0,_l[41]=!0,_l[43]=!0,_l[45]=!0,_l[47]=!0,_l[173]=!0,_l[183]=!0,_l[8203]=!0,_l[8208]=!0,_l[8211]=!0,_l[8231]=!0;var Vc=function(L){function P(B,ee,fe,me){L.call(this,B,ee),this.angle=fe,void 0!==me&&(this.segment=me)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.clone=function(){return new P(this.x,this.y,this.angle,this.segment)},P}(i);ka("Anchor",Vc);var Su=128;function gh(L,P){var B=P.expression;if("constant"===B.kind)return{kind:"constant",layoutSize:B.evaluate(new hi(L+1))};if("source"===B.kind)return{kind:"source"};for(var fe=B.zoomStops,me=B.interpolationType,Te=0;Te<fe.length&&fe[Te]<=L;)Te++;for(var Oe=Te=Math.max(0,Te-1);Oe<fe.length&&fe[Oe]<L+1;)Oe++;Oe=Math.min(fe.length-1,Oe);var $e=fe[Te],ft=fe[Oe];return"composite"===B.kind?{kind:"composite",minZoom:$e,maxZoom:ft,interpolationType:me}:{kind:"camera",minZoom:$e,maxZoom:ft,minSize:B.evaluate(new hi($e)),maxSize:B.evaluate(new hi(ft)),interpolationType:me}}function lv(L,P,B){var ee=P.uSize,me=B.lowerSize;return"source"===L.kind?me/Su:"composite"===L.kind?co(me/Su,B.upperSize/Su,P.uSizeT):ee}function uv(L,P){var B=0,ee=0;if("constant"===L.kind)ee=L.layoutSize;else if("source"!==L.kind){var fe=L.interpolationType,Oe=fe?x(uo.interpolationFactor(fe,P,L.minZoom,L.maxZoom),0,1):0;"camera"===L.kind?ee=co(L.minSize,L.maxSize,Oe):B=Oe}return{uSizeT:B,uSize:ee}}var Zd=Object.freeze({__proto__:null,getSizeData:gh,evaluateSizeForFeature:lv,evaluateSizeForZoom:uv,SIZE_PACK_FACTOR:Su});function cv(L,P,B,ee,fe){if(void 0===P.segment)return!0;for(var me=P,Te=P.segment+1,Oe=0;Oe>-B/2;){if(--Te<0)return!1;Oe-=L[Te].dist(me),me=L[Te]}Oe+=L[Te].dist(L[Te+1]),Te++;for(var $e=[],ft=0;Oe<B/2;){var Ft=L[Te],tr=L[Te+1];if(!tr)return!1;var Kt=L[Te-1].angleTo(Ft)-Ft.angleTo(tr);for(Kt=Math.abs((Kt+3*Math.PI)%(2*Math.PI)-Math.PI),$e.push({distance:Oe,angleDelta:Kt}),ft+=Kt;Oe-$e[0].distance>ee;)ft-=$e.shift().angleDelta;if(ft>fe)return!1;Te++,Oe+=Ft.dist(tr)}return!0}function fv(L){for(var P=0,B=0;B<L.length-1;B++)P+=L[B].dist(L[B+1]);return P}function hv(L,P,B){return L?.6*P*B:0}function vv(L,P){return Math.max(L?L.right-L.left:0,P?P.right-P.left:0)}function Yd(L,P,B,ee,fe,me){for(var Te=hv(B,fe,me),Oe=vv(B,ee)*me,$e=0,ft=fv(L)/2,yt=0;yt<L.length-1;yt++){var Ft=L[yt],tr=L[yt+1],Kt=Ft.dist(tr);if($e+Kt>ft){var xr=(ft-$e)/Kt,Fr=co(Ft.x,tr.x,xr),fn=co(Ft.y,tr.y,xr),nn=new Vc(Fr,fn,tr.angleTo(Ft),yt);return nn._round(),!Te||cv(L,nn,Oe,Te,P)?nn:void 0}$e+=Kt}}function Wd(L,P,B,ee,fe,me,Te,Oe,$e){var ft=hv(ee,me,Te),yt=vv(ee,fe),Ft=yt*Te,tr=0===L[0].x||L[0].x===$e||0===L[0].y||L[0].y===$e;return P-Ft<P/4&&(P=Ft+P/4),pv(L,tr?P/2*Oe%P:(yt/2+2*me)*Te*Oe%P,P,ft,B,Ft,tr,!1,$e)}function pv(L,P,B,ee,fe,me,Te,Oe,$e){for(var ft=me/2,yt=fv(L),Ft=0,tr=P-B,Kt=[],xr=0;xr<L.length-1;xr++){for(var Fr=L[xr],fn=L[xr+1],nn=Fr.dist(fn),Sn=fn.angleTo(Fr);tr+B<Ft+nn;){var xn=((tr+=B)-Ft)/nn,Mn=co(Fr.x,fn.x,xn),In=co(Fr.y,fn.y,xn);if(Mn>=0&&Mn<$e&&In>=0&&In<$e&&tr-ft>=0&&tr+ft<=yt){var Hn=new Vc(Mn,In,Sn,xr);Hn._round(),(!ee||cv(L,Hn,me,ee,fe))&&Kt.push(Hn)}}Ft+=nn}return!Oe&&!Kt.length&&!Te&&(Kt=pv(L,Ft/2,B,ee,fe,me,Te,!0,$e)),Kt}function dv(L,P,B,ee,fe){for(var me=[],Te=0;Te<L.length;Te++)for(var Oe=L[Te],$e=void 0,ft=0;ft<Oe.length-1;ft++){var yt=Oe[ft],Ft=Oe[ft+1];yt.x<P&&Ft.x<P||(yt.x<P?yt=new i(P,yt.y+(P-yt.x)/(Ft.x-yt.x)*(Ft.y-yt.y))._round():Ft.x<P&&(Ft=new i(P,yt.y+(P-yt.x)/(Ft.x-yt.x)*(Ft.y-yt.y))._round()),!(yt.y<B&&Ft.y<B)&&(yt.y<B?yt=new i(yt.x+(B-yt.y)/(Ft.y-yt.y)*(Ft.x-yt.x),B)._round():Ft.y<B&&(Ft=new i(yt.x+(B-yt.y)/(Ft.y-yt.y)*(Ft.x-yt.x),B)._round()),!(yt.x>=ee&&Ft.x>=ee)&&(yt.x>=ee?yt=new i(ee,yt.y+(ee-yt.x)/(Ft.x-yt.x)*(Ft.y-yt.y))._round():Ft.x>=ee&&(Ft=new i(ee,yt.y+(ee-yt.x)/(Ft.x-yt.x)*(Ft.y-yt.y))._round()),!(yt.y>=fe&&Ft.y>=fe)&&(yt.y>=fe?yt=new i(yt.x+(fe-yt.y)/(Ft.y-yt.y)*(Ft.x-yt.x),fe)._round():Ft.y>=fe&&(Ft=new i(yt.x+(fe-yt.y)/(Ft.y-yt.y)*(Ft.x-yt.x),fe)._round()),(!$e||!yt.equals($e[$e.length-1]))&&me.push($e=[yt]),$e.push(Ft)))))}return me}function gv(L,P,B,ee){var fe=[],me=L.image,Te=me.pixelRatio,Oe=me.paddedRect.w-2,$e=me.paddedRect.h-2,ft=L.right-L.left,yt=L.bottom-L.top,Ft=me.stretchX||[[0,Oe]],tr=me.stretchY||[[0,$e]],Kt=function(Fi,Li){return Fi+Li[1]-Li[0]},xr=Ft.reduce(Kt,0),Fr=tr.reduce(Kt,0),fn=Oe-xr,nn=$e-Fr,Sn=0,xn=xr,Mn=0,In=Fr,Hn=0,oa=fn,aa=0,Na=nn;if(me.content&&ee){var ba=me.content;Sn=Nf(Ft,0,ba[0]),Mn=Nf(tr,0,ba[1]),xn=Nf(Ft,ba[0],ba[2]),In=Nf(tr,ba[1],ba[3]),Hn=ba[0]-Sn,aa=ba[1]-Mn,oa=ba[2]-ba[0]-xn,Na=ba[3]-ba[1]-In}var Sa=function(Fi,Li,eo,lo){var To=Bf(Fi.stretch-Sn,xn,ft,L.left),Po=Uf(Fi.fixed-Hn,oa,Fi.stretch,xr),ts=Bf(Li.stretch-Mn,In,yt,L.top),Bo=Uf(Li.fixed-aa,Na,Li.stretch,Fr),Cs=Bf(eo.stretch-Sn,xn,ft,L.left),Es=Uf(eo.fixed-Hn,oa,eo.stretch,xr),rs=Bf(lo.stretch-Mn,In,yt,L.top),Bs=Uf(lo.fixed-aa,Na,lo.stretch,Fr),Us=new i(To,ts),Jo=new i(Cs,ts),Vs=new i(Cs,rs),Il=new i(To,rs),tc=new i(Po/Te,Bo/Te),vc=new i(Es/Te,Bs/Te),pc=P*Math.PI/180;if(pc){var dc=Math.sin(pc),Kc=Math.cos(pc),vu=[Kc,-dc,dc,Kc];Us._matMult(vu),Jo._matMult(vu),Il._matMult(vu),Vs._matMult(vu)}var Wf=Fi.stretch+Fi.fixed,Xf=Li.stretch+Li.fixed;return{tl:Us,tr:Jo,bl:Il,br:Vs,tex:{x:me.paddedRect.x+1+Wf,y:me.paddedRect.y+1+Xf,w:eo.stretch+eo.fixed-Wf,h:lo.stretch+lo.fixed-Xf},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:tc,pixelOffsetBR:vc,minFontScaleX:oa/Te/ft,minFontScaleY:Na/Te/yt,isSDF:B}};if(ee&&(me.stretchX||me.stretchY))for(var ni=yv(Ft,fn,xr),Pa=yv(tr,nn,Fr),za=0;za<ni.length-1;za++)for(var vi=ni[za],ei=ni[za+1],Ii=0;Ii<Pa.length-1;Ii++)fe.push(Sa(vi,Pa[Ii],ei,Pa[Ii+1]));else fe.push(Sa({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Oe+1},{fixed:0,stretch:$e+1}));return fe}function Nf(L,P,B){for(var ee=0,fe=0,me=L;fe<me.length;fe+=1){var Te=me[fe];ee+=Math.max(P,Math.min(B,Te[1]))-Math.max(P,Math.min(B,Te[0]))}return ee}function yv(L,P,B){for(var ee=[{fixed:-1,stretch:0}],fe=0,me=L;fe<me.length;fe+=1){var Te=me[fe],Oe=Te[0],$e=Te[1],ft=ee[ee.length-1];ee.push({fixed:Oe-ft.stretch,stretch:ft.stretch}),ee.push({fixed:Oe-ft.stretch,stretch:ft.stretch+($e-Oe)})}return ee.push({fixed:P+1,stretch:B}),ee}function Bf(L,P,B,ee){return L/P*B+ee}function Uf(L,P,B,ee){return L-P*B/ee}var Vf=function(P,B,ee,fe,me,Te,Oe,$e,ft,yt){if(this.boxStartIndex=P.length,ft){var Ft=Te.top,tr=Te.bottom,Kt=Te.collisionPadding;Kt&&(Ft-=Kt[1],tr+=Kt[3]);var xr=tr-Ft;xr>0&&(xr=Math.max(10,xr),this.circleDiameter=xr)}else{var Fr=Te.top*Oe-$e,fn=Te.bottom*Oe+$e,nn=Te.left*Oe-$e,Sn=Te.right*Oe+$e,xn=Te.collisionPadding;if(xn&&(nn-=xn[0]*Oe,Fr-=xn[1]*Oe,Sn+=xn[2]*Oe,fn+=xn[3]*Oe),yt){var Mn=new i(nn,Fr),In=new i(Sn,Fr),Hn=new i(nn,fn),oa=new i(Sn,fn),aa=yt*Math.PI/180;Mn._rotate(aa),In._rotate(aa),Hn._rotate(aa),oa._rotate(aa),nn=Math.min(Mn.x,In.x,Hn.x,oa.x),Sn=Math.max(Mn.x,In.x,Hn.x,oa.x),Fr=Math.min(Mn.y,In.y,Hn.y,oa.y),fn=Math.max(Mn.y,In.y,Hn.y,oa.y)}P.emplaceBack(B.x,B.y,nn,Fr,Sn,fn,ee,fe,me)}this.boxEndIndex=P.length},Gc=function(P,B){if(void 0===P&&(P=[]),void 0===B&&(B=jd),this.data=P,this.length=this.data.length,this.compare=B,this.length>0)for(var ee=(this.length>>1)-1;ee>=0;ee--)this._down(ee)};function jd(L,P){return L<P?-1:L>P?1:0}function Jd(L,P,B){void 0===P&&(P=1),void 0===B&&(B=!1);for(var ee=1/0,fe=1/0,me=-1/0,Te=-1/0,Oe=L[0],$e=0;$e<Oe.length;$e++){var ft=Oe[$e];(!$e||ft.x<ee)&&(ee=ft.x),(!$e||ft.y<fe)&&(fe=ft.y),(!$e||ft.x>me)&&(me=ft.x),(!$e||ft.y>Te)&&(Te=ft.y)}var tr=Math.min(me-ee,Te-fe),Kt=tr/2,xr=new Gc([],Kd);if(0===tr)return new i(ee,fe);for(var Fr=ee;Fr<me;Fr+=tr)for(var fn=fe;fn<Te;fn+=tr)xr.push(new Zc(Fr+Kt,fn+Kt,Kt,L));for(var nn=function $d(L){for(var P=0,B=0,ee=0,fe=L[0],me=0,Te=fe.length,Oe=Te-1;me<Te;Oe=me++){var $e=fe[me],ft=fe[Oe],yt=$e.x*ft.y-ft.x*$e.y;B+=($e.x+ft.x)*yt,ee+=($e.y+ft.y)*yt,P+=3*yt}return new Zc(B/P,ee/P,0,L)}(L),Sn=xr.length;xr.length;){var xn=xr.pop();(xn.d>nn.d||!nn.d)&&(nn=xn,B&&console.log("found best %d after %d probes",Math.round(1e4*xn.d)/1e4,Sn)),!(xn.max-nn.d<=P)&&(xr.push(new Zc(xn.p.x-(Kt=xn.h/2),xn.p.y-Kt,Kt,L)),xr.push(new Zc(xn.p.x+Kt,xn.p.y-Kt,Kt,L)),xr.push(new Zc(xn.p.x-Kt,xn.p.y+Kt,Kt,L)),xr.push(new Zc(xn.p.x+Kt,xn.p.y+Kt,Kt,L)),Sn+=4)}return B&&(console.log("num probes: "+Sn),console.log("best distance: "+nn.d)),nn.p}function Kd(L,P){return P.max-L.max}function Zc(L,P,B,ee){this.p=new i(L,P),this.h=B,this.d=function Qd(L,P){for(var B=!1,ee=1/0,fe=0;fe<P.length;fe++)for(var me=P[fe],Te=0,Oe=me.length,$e=Oe-1;Te<Oe;$e=Te++){var ft=me[Te],yt=me[$e];ft.y>L.y!=yt.y>L.y&&L.x<(yt.x-ft.x)*(L.y-ft.y)/(yt.y-ft.y)+ft.x&&(B=!B),ee=Math.min(ee,Tu(L,ft,yt))}return(B?1:-1)*Math.sqrt(ee)}(this.p,ee),this.max=this.d+this.h*Math.SQRT2}Gc.prototype.push=function(P){this.data.push(P),this.length++,this._up(this.length-1)},Gc.prototype.pop=function(){if(0!==this.length){var P=this.data[0],B=this.data.pop();return this.length--,this.length>0&&(this.data[0]=B,this._down(0)),P}},Gc.prototype.peek=function(){return this.data[0]},Gc.prototype._up=function(P){for(var ee=this.data,fe=this.compare,me=ee[P];P>0;){var Te=P-1>>1,Oe=ee[Te];if(fe(me,Oe)>=0)break;ee[P]=Oe,P=Te}ee[P]=me},Gc.prototype._down=function(P){for(var ee=this.data,fe=this.compare,me=this.length>>1,Te=ee[P];P<me;){var Oe=1+(P<<1),$e=ee[Oe],ft=Oe+1;if(ft<this.length&&fe(ee[ft],$e)<0&&(Oe=ft,$e=ee[ft]),fe($e,Te)>=0)break;ee[P]=$e,P=Oe}ee[P]=Te};var yh=Number.POSITIVE_INFINITY;function mv(L,P){return P[1]!==yh?function ee(fe,me,Te){var Oe=0,$e=0;switch(me=Math.abs(me),Te=Math.abs(Te),fe){case"top-right":case"top-left":case"top":$e=Te-7;break;case"bottom-right":case"bottom-left":case"bottom":$e=7-Te}switch(fe){case"top-right":case"bottom-right":case"right":Oe=-me;break;case"top-left":case"bottom-left":case"left":Oe=me}return[Oe,$e]}(L,P[0],P[1]):function B(fe,me){var Te=0,Oe=0;me<0&&(me=0);var $e=me/Math.sqrt(2);switch(fe){case"top-right":case"top-left":Oe=$e-7;break;case"bottom-right":case"bottom-left":Oe=7-$e;break;case"bottom":Oe=7-me;break;case"top":Oe=me-7}switch(fe){case"top-right":case"bottom-right":Te=-$e;break;case"top-left":case"bottom-left":Te=$e;break;case"left":Te=me;break;case"right":Te=-me}return[Te,Oe]}(L,P[0])}function mh(L){switch(L){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var fc=32640;function xv(L,P,B,ee,fe,me,Te,Oe,$e,ft,yt,Ft,tr,Kt,xr){var Fr=function Xd(L,P,B,ee,fe,me,Te,Oe){for(var $e=ee.layout.get("text-rotate").evaluate(me,{})*Math.PI/180,ft=[],yt=0,Ft=P.positionedLines;yt<Ft.length;yt+=1)for(var tr=Ft[yt],Kt=0,xr=tr.positionedGlyphs;Kt<xr.length;Kt+=1){var Fr=xr[Kt];if(Fr.rect){var fn=Fr.rect||{},Sn=4,xn=!0,Mn=1,In=0,Hn=(fe||Oe)&&Fr.vertical,oa=Fr.metrics.advance*Fr.scale/2;if(Oe&&P.verticalizable&&(In=tr.lineOffset/2-(Fr.imageName?-(24-Fr.metrics.width*Fr.scale)/2:24*(Fr.scale-1))),Fr.imageName){var ba=Te[Fr.imageName];xn=ba.sdf,Sn=1/(Mn=ba.pixelRatio)}var Sa=fe?[Fr.x+oa,Fr.y]:[0,0],ni=fe?[0,0]:[Fr.x+oa+B[0],Fr.y+B[1]-In],Pa=[0,0];Hn&&(Pa=ni,ni=[0,0]);var za=(Fr.metrics.left-Sn)*Fr.scale-oa+ni[0],vi=(-Fr.metrics.top-Sn)*Fr.scale+ni[1],ei=za+fn.w*Fr.scale/Mn,Ii=vi+fn.h*Fr.scale/Mn,ji=new i(za,vi),zi=new i(ei,vi),Fi=new i(za,Ii),Li=new i(ei,Ii);if(Hn){var eo=new i(-oa,oa-gf),lo=-Math.PI/2,To=12-oa,ts=new i(22-To,-(Fr.imageName?To:0)),Bo=new(Function.prototype.bind.apply(i,[null].concat(Pa)));ji._rotateAround(lo,eo)._add(ts)._add(Bo),zi._rotateAround(lo,eo)._add(ts)._add(Bo),Fi._rotateAround(lo,eo)._add(ts)._add(Bo),Li._rotateAround(lo,eo)._add(ts)._add(Bo)}if($e){var Cs=Math.sin($e),Es=Math.cos($e),rs=[Es,-Cs,Cs,Es];ji._matMult(rs),zi._matMult(rs),Fi._matMult(rs),Li._matMult(rs)}var Bs=new i(0,0),Us=new i(0,0);ft.push({tl:ji,tr:zi,bl:Fi,br:Li,tex:fn,writingMode:P.writingMode,glyphOffset:Sa,sectionIndex:Fr.sectionIndex,isSDF:xn,pixelOffsetTL:Bs,pixelOffsetBR:Us,minFontScaleX:0,minFontScaleY:0})}}return ft}(0,B,Oe,fe,me,Te,ee,L.allowVerticalPlacement),fn=L.textSizeData,nn=null;"source"===fn.kind?(nn=[Su*fe.layout.get("text-size").evaluate(Te,{})])[0]>fc&&F(L.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===fn.kind&&((nn=[Su*Kt.compositeTextSizes[0].evaluate(Te,{},xr),Su*Kt.compositeTextSizes[1].evaluate(Te,{},xr)])[0]>fc||nn[1]>fc)&&F(L.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),L.addSymbols(L.text,Fr,nn,Oe,me,Te,ft,P,$e.lineStartIndex,$e.lineLength,tr,xr);for(var Sn=0,xn=yt;Sn<xn.length;Sn+=1)Ft[xn[Sn]]=L.text.placedSymbolArray.length-1;return 4*Fr.length}function bv(L){for(var P in L)return L[P];return null}function r0(L,P,B,ee){var fe=L.compareText;if(P in fe){for(var me=fe[P],Te=me.length-1;Te>=0;Te--)if(ee.dist(me[Te])<B)return!0}else fe[P]=[];return fe[P].push(ee),!1}var n0=Oc.VectorTileFeature.types,a0=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Hf(L,P,B,ee,fe,me,Te,Oe,$e,ft,yt,Ft,tr){var Kt=Oe?Math.min(fc,Math.round(Oe[0])):0,xr=Oe?Math.min(fc,Math.round(Oe[1])):0;L.emplaceBack(P,B,Math.round(32*ee),Math.round(32*fe),me,Te,(Kt<<1)+($e?1:0),xr,16*ft,16*yt,256*Ft,256*tr)}function xh(L,P,B){L.emplaceBack(P.x,P.y,B),L.emplaceBack(P.x,P.y,B),L.emplaceBack(P.x,P.y,B),L.emplaceBack(P.x,P.y,B)}function i0(L){for(var P=0,B=L.sections;P<B.length;P+=1)if(Nr(B[P].text))return!0;return!1}var Wc=function(P){this.layoutVertexArray=new Uu,this.indexArray=new wu,this.programConfigurations=P,this.segments=new Z,this.dynamicLayoutVertexArray=new $c,this.opacityVertexArray=new qc,this.placedSymbolArray=new sc};Wc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},Wc.prototype.upload=function(P,B,ee,fe){this.isEmpty()||(ee&&(this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,fh.members),this.indexBuffer=P.createIndexBuffer(this.indexArray,B),this.dynamicLayoutVertexBuffer=P.createVertexBuffer(this.dynamicLayoutVertexArray,od.members,!0),this.opacityVertexBuffer=P.createVertexBuffer(this.opacityVertexArray,a0,!0),this.opacityVertexBuffer.itemSize=1),(ee||fe)&&this.programConfigurations.upload(P))},Wc.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ka("SymbolBuffers",Wc);var mf=function(P,B,ee){this.layoutVertexArray=new P,this.layoutAttributes=B,this.indexArray=new ee,this.segments=new Z,this.collisionVertexArray=new qs};mf.prototype.upload=function(P){this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=P.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=P.createVertexBuffer(this.collisionVertexArray,sd.members,!0)},mf.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ka("CollisionBuffers",mf);var Xi=function(P){this.collisionBoxArray=P.collisionBoxArray,this.zoom=P.zoom,this.overscaling=P.overscaling,this.layers=P.layers,this.layerIds=this.layers.map(function($e){return $e.id}),this.index=P.index,this.pixelRatio=P.pixelRatio,this.sourceLayerIndex=P.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Dc([]),this.placementViewportMatrix=Dc([]);var ee=this.layers[0]._unevaluatedLayout._values;this.textSizeData=gh(this.zoom,ee["text-size"]),this.iconSizeData=gh(this.zoom,ee["icon-size"]);var fe=this.layers[0].layout,me=fe.get("symbol-sort-key"),Te=fe.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==Te&&void 0!==me.constantOr(1),this.sortFeaturesByY=("viewport-y"===Te||"auto"===Te&&!this.sortFeaturesByKey)&&(fe.get("text-allow-overlap")||fe.get("icon-allow-overlap")||fe.get("text-ignore-placement")||fe.get("icon-ignore-placement")),"point"===fe.get("symbol-placement")&&(this.writingModes=fe.get("text-writing-mode").map(function($e){return Rl[$e]})),this.stateDependentLayerIds=this.layers.filter(function($e){return $e.isStateDependent()}).map(function($e){return $e.id}),this.sourceID=P.sourceID};Xi.prototype.createArrays=function(){this.text=new Wc(new ii(fh.members,this.layers,this.zoom,function(P){return/^text/.test(P)})),this.icon=new Wc(new ii(fh.members,this.layers,this.zoom,function(P){return/^icon/.test(P)})),this.glyphOffsetArray=new Wl,this.lineVertexArray=new Af,this.symbolInstances=new Tf},Xi.prototype.calculateGlyphDependencies=function(P,B,ee,fe,me){for(var Te=0;Te<P.length;Te++)if(B[P.charCodeAt(Te)]=!0,(ee||fe)&&me){var Oe=vf[P.charAt(Te)];Oe&&(B[Oe.charCodeAt(0)]=!0)}},Xi.prototype.populate=function(P,B,ee){var fe=this.layers[0],me=fe.layout,Te=me.get("text-font"),Oe=me.get("text-field"),$e=me.get("icon-image"),ft=("constant"!==Oe.value.kind||Oe.value.value instanceof to&&!Oe.value.value.isEmpty()||Oe.value.value.toString().length>0)&&("constant"!==Te.value.kind||Te.value.value.length>0),yt="constant"!==$e.value.kind||!!$e.value.value||Object.keys($e.parameters).length>0,Ft=me.get("symbol-sort-key");if(this.features=[],ft||yt){for(var tr=B.iconDependencies,Kt=B.glyphDependencies,xr=B.availableImages,Fr=new hi(this.zoom),fn=0,nn=P;fn<nn.length;fn+=1){var Sn=nn[fn],xn=Sn.feature,Mn=Sn.id,In=Sn.index,Hn=Sn.sourceLayerIndex,oa=fe._featureFilter.needGeometry,aa={type:xn.type,id:Mn,properties:xn.properties,geometry:oa?Zi(xn):[]};if(fe._featureFilter.filter(Fr,aa,ee)){oa||(aa.geometry=Zi(xn));var Na=void 0;if(ft){var ba=fe.getValueAndResolveTokens("text-field",aa,ee,xr),Sa=to.factory(ba);i0(Sa)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Ca()||this.hasRTLText&&Ya.isParsed())&&(Na=cd(Sa,fe,aa))}var ni=void 0;if(yt){var Pa=fe.getValueAndResolveTokens("icon-image",aa,ee,xr);ni=Pa instanceof Mo?Pa:Mo.fromString(Pa)}if(Na||ni){var za=this.sortFeaturesByKey?Ft.evaluate(aa,{},ee):void 0,vi={id:Mn,text:Na,icon:ni,index:In,sourceLayerIndex:Hn,geometry:Zi(xn),properties:xn.properties,type:n0[xn.type],sortKey:za};if(this.features.push(vi),ni&&(tr[ni.name]=!0),Na){var ei=Te.evaluate(aa,{},ee).join(","),Ii="map"===me.get("text-rotation-alignment")&&"point"!==me.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Rl.vertical)>=0;for(var ji=0,zi=Na.sections;ji<zi.length;ji+=1){var Fi=zi[ji];if(Fi.image)tr[Fi.image.name]=!0;else{var Li=_t(Na.toString()),eo=Fi.fontStack||ei,lo=Kt[eo]=Kt[eo]||{};this.calculateGlyphDependencies(Fi.text,lo,Ii,this.allowVerticalPlacement,Li)}}}}}}"line"===me.get("symbol-placement")&&(this.features=function fd(L){var P={},B={},ee=[],fe=0;function me(nn){ee.push(L[nn]),fe++}function Te(nn,Sn,xn){var Mn=B[nn];return delete B[nn],B[Sn]=Mn,ee[Mn].geometry[0].pop(),ee[Mn].geometry[0]=ee[Mn].geometry[0].concat(xn[0]),Mn}function Oe(nn,Sn,xn){var Mn=P[Sn];return delete P[Sn],P[nn]=Mn,ee[Mn].geometry[0].shift(),ee[Mn].geometry[0]=xn[0].concat(ee[Mn].geometry[0]),Mn}function $e(nn,Sn,xn){var Mn=xn?Sn[0][Sn[0].length-1]:Sn[0][0];return nn+":"+Mn.x+":"+Mn.y}for(var ft=0;ft<L.length;ft++){var yt=L[ft],Ft=yt.geometry,tr=yt.text?yt.text.toString():null;if(tr){var Kt=$e(tr,Ft),xr=$e(tr,Ft,!0);if(Kt in B&&xr in P&&B[Kt]!==P[xr]){var Fr=Oe(Kt,xr,Ft),fn=Te(Kt,xr,ee[Fr].geometry);delete P[Kt],delete B[xr],B[$e(tr,ee[fn].geometry,!0)]=fn,ee[Fr].geometry=null}else Kt in B?Te(Kt,xr,Ft):xr in P?Oe(Kt,xr,Ft):(me(ft),P[Kt]=fe-1,B[xr]=fe-1)}else me(ft)}return ee.filter(function(nn){return nn.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(To,Po){return To.sortKey-Po.sortKey})}},Xi.prototype.update=function(P,B,ee){!this.stateDependentLayers.length||(this.text.programConfigurations.updatePaintArrays(P,B,this.layers,ee),this.icon.programConfigurations.updatePaintArrays(P,B,this.layers,ee))},Xi.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},Xi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Xi.prototype.upload=function(P){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(P),this.iconCollisionBox.upload(P)),this.text.upload(P,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(P,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Xi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Xi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Xi.prototype.addToLineVertexArray=function(P,B){var ee=this.lineVertexArray.length;if(void 0!==P.segment){for(var fe=P.dist(B[P.segment+1]),me=P.dist(B[P.segment]),Te={},Oe=P.segment+1;Oe<B.length;Oe++)Te[Oe]={x:B[Oe].x,y:B[Oe].y,tileUnitDistanceFromAnchor:fe},Oe<B.length-1&&(fe+=B[Oe+1].dist(B[Oe]));for(var $e=P.segment||0;$e>=0;$e--)Te[$e]={x:B[$e].x,y:B[$e].y,tileUnitDistanceFromAnchor:me},$e>0&&(me+=B[$e-1].dist(B[$e]));for(var ft=0;ft<B.length;ft++){var yt=Te[ft];this.lineVertexArray.emplaceBack(yt.x,yt.y,yt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:ee,lineLength:this.lineVertexArray.length-ee}},Xi.prototype.addSymbols=function(P,B,ee,fe,me,Te,Oe,$e,ft,yt,Ft,tr){for(var Kt=P.indexArray,xr=P.layoutVertexArray,Fr=P.segments.prepareSegment(4*B.length,xr,Kt,Te.sortKey),fn=this.glyphOffsetArray.length,nn=Fr.vertexLength,Sn=this.allowVerticalPlacement&&Oe===Rl.vertical?Math.PI/2:0,xn=Te.text&&Te.text.sections,Mn=0;Mn<B.length;Mn++){var In=B[Mn],Hn=In.tl,oa=In.tr,aa=In.bl,Na=In.br,ba=In.tex,Sa=In.pixelOffsetTL,ni=In.pixelOffsetBR,Pa=In.minFontScaleX,za=In.minFontScaleY,vi=In.glyphOffset,ei=In.isSDF,Ii=In.sectionIndex,ji=Fr.vertexLength,zi=vi[1];Hf(xr,$e.x,$e.y,Hn.x,zi+Hn.y,ba.x,ba.y,ee,ei,Sa.x,Sa.y,Pa,za),Hf(xr,$e.x,$e.y,oa.x,zi+oa.y,ba.x+ba.w,ba.y,ee,ei,ni.x,Sa.y,Pa,za),Hf(xr,$e.x,$e.y,aa.x,zi+aa.y,ba.x,ba.y+ba.h,ee,ei,Sa.x,ni.y,Pa,za),Hf(xr,$e.x,$e.y,Na.x,zi+Na.y,ba.x+ba.w,ba.y+ba.h,ee,ei,ni.x,ni.y,Pa,za),xh(P.dynamicLayoutVertexArray,$e,Sn),Kt.emplaceBack(ji,ji+1,ji+2),Kt.emplaceBack(ji+1,ji+2,ji+3),Fr.vertexLength+=4,Fr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(vi[0]),(Mn===B.length-1||Ii!==B[Mn+1].sectionIndex)&&P.programConfigurations.populatePaintArrays(xr.length,Te,Te.index,{},tr,xn&&xn[Ii])}P.placedSymbolArray.emplaceBack($e.x,$e.y,fn,this.glyphOffsetArray.length-fn,nn,ft,yt,$e.segment,ee?ee[0]:0,ee?ee[1]:0,fe[0],fe[1],Oe,0,!1,0,Ft)},Xi.prototype._addCollisionDebugVertex=function(P,B,ee,fe,me,Te){return B.emplaceBack(0,0),P.emplaceBack(ee.x,ee.y,fe,me,Math.round(Te.x),Math.round(Te.y))},Xi.prototype.addCollisionDebugVertices=function(P,B,ee,fe,me,Te,Oe){var $e=me.segments.prepareSegment(4,me.layoutVertexArray,me.indexArray),ft=$e.vertexLength,yt=me.layoutVertexArray,Ft=me.collisionVertexArray,tr=Oe.anchorX,Kt=Oe.anchorY;this._addCollisionDebugVertex(yt,Ft,Te,tr,Kt,new i(P,B)),this._addCollisionDebugVertex(yt,Ft,Te,tr,Kt,new i(ee,B)),this._addCollisionDebugVertex(yt,Ft,Te,tr,Kt,new i(ee,fe)),this._addCollisionDebugVertex(yt,Ft,Te,tr,Kt,new i(P,fe)),$e.vertexLength+=4;var xr=me.indexArray;xr.emplaceBack(ft,ft+1),xr.emplaceBack(ft+1,ft+2),xr.emplaceBack(ft+2,ft+3),xr.emplaceBack(ft+3,ft),$e.primitiveLength+=4},Xi.prototype.addDebugCollisionBoxes=function(P,B,ee,fe){for(var me=P;me<B;me++){var Te=this.collisionBoxArray.get(me);this.addCollisionDebugVertices(Te.x1,Te.y1,Te.x2,Te.y2,fe?this.textCollisionBox:this.iconCollisionBox,Te.anchorPoint,ee)}},Xi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new mf(kc,jh.members,mc),this.iconCollisionBox=new mf(kc,jh.members,mc);for(var P=0;P<this.symbolInstances.length;P++){var B=this.symbolInstances.get(P);this.addDebugCollisionBoxes(B.textBoxStartIndex,B.textBoxEndIndex,B,!0),this.addDebugCollisionBoxes(B.verticalTextBoxStartIndex,B.verticalTextBoxEndIndex,B,!0),this.addDebugCollisionBoxes(B.iconBoxStartIndex,B.iconBoxEndIndex,B,!1),this.addDebugCollisionBoxes(B.verticalIconBoxStartIndex,B.verticalIconBoxEndIndex,B,!1)}},Xi.prototype._deserializeCollisionBoxesForSymbol=function(P,B,ee,fe,me,Te,Oe,$e,ft){for(var yt={},Ft=B;Ft<ee;Ft++){var tr=P.get(Ft);yt.textBox={x1:tr.x1,y1:tr.y1,x2:tr.x2,y2:tr.y2,anchorPointX:tr.anchorPointX,anchorPointY:tr.anchorPointY},yt.textFeatureIndex=tr.featureIndex;break}for(var Kt=fe;Kt<me;Kt++){var xr=P.get(Kt);yt.verticalTextBox={x1:xr.x1,y1:xr.y1,x2:xr.x2,y2:xr.y2,anchorPointX:xr.anchorPointX,anchorPointY:xr.anchorPointY},yt.verticalTextFeatureIndex=xr.featureIndex;break}for(var Fr=Te;Fr<Oe;Fr++){var fn=P.get(Fr);yt.iconBox={x1:fn.x1,y1:fn.y1,x2:fn.x2,y2:fn.y2,anchorPointX:fn.anchorPointX,anchorPointY:fn.anchorPointY},yt.iconFeatureIndex=fn.featureIndex;break}for(var nn=$e;nn<ft;nn++){var Sn=P.get(nn);yt.verticalIconBox={x1:Sn.x1,y1:Sn.y1,x2:Sn.x2,y2:Sn.y2,anchorPointX:Sn.anchorPointX,anchorPointY:Sn.anchorPointY},yt.verticalIconFeatureIndex=Sn.featureIndex;break}return yt},Xi.prototype.deserializeCollisionBoxes=function(P){this.collisionArrays=[];for(var B=0;B<this.symbolInstances.length;B++){var ee=this.symbolInstances.get(B);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(P,ee.textBoxStartIndex,ee.textBoxEndIndex,ee.verticalTextBoxStartIndex,ee.verticalTextBoxEndIndex,ee.iconBoxStartIndex,ee.iconBoxEndIndex,ee.verticalIconBoxStartIndex,ee.verticalIconBoxEndIndex))}},Xi.prototype.hasTextData=function(){return this.text.segments.get().length>0},Xi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Xi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Xi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Xi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Xi.prototype.addIndicesForPlacedSymbol=function(P,B){for(var ee=P.placedSymbolArray.get(B),fe=ee.vertexStartIndex+4*ee.numGlyphs,me=ee.vertexStartIndex;me<fe;me+=4)P.indexArray.emplaceBack(me,me+1,me+2),P.indexArray.emplaceBack(me+1,me+2,me+3)},Xi.prototype.getSortedSymbolIndexes=function(P){if(this.sortedAngle===P&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var B=Math.sin(P),ee=Math.cos(P),fe=[],me=[],Te=[],Oe=0;Oe<this.symbolInstances.length;++Oe){Te.push(Oe);var $e=this.symbolInstances.get(Oe);fe.push(0|Math.round(B*$e.anchorX+ee*$e.anchorY)),me.push($e.featureIndex)}return Te.sort(function(ft,yt){return fe[ft]-fe[yt]||me[yt]-me[ft]}),Te},Xi.prototype.addToSortKeyRanges=function(P,B){var ee=this.sortKeyRanges[this.sortKeyRanges.length-1];ee&&ee.sortKey===B?ee.symbolInstanceEnd=P+1:this.sortKeyRanges.push({sortKey:B,symbolInstanceStart:P,symbolInstanceEnd:P+1})},Xi.prototype.sortFeatures=function(P){var B=this;if(this.sortFeaturesByY&&this.sortedAngle!==P&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(P),this.sortedAngle=P,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var ee=0,fe=this.symbolInstanceIndexes;ee<fe.length;ee+=1){var Te=this.symbolInstances.get(fe[ee]);this.featureSortOrder.push(Te.featureIndex),[Te.rightJustifiedTextSymbolIndex,Te.centerJustifiedTextSymbolIndex,Te.leftJustifiedTextSymbolIndex].forEach(function(Oe,$e,ft){Oe>=0&&ft.indexOf(Oe)===$e&&B.addIndicesForPlacedSymbol(B.text,Oe)}),Te.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Te.verticalPlacedTextSymbolIndex),Te.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Te.placedIconSymbolIndex),Te.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Te.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ka("SymbolBucket",Xi,{omit:["layers","collisionBoxArray","features","compareText"]}),Xi.MAX_GLYPHS=65535,Xi.addDynamicAttributes=xh;var s0=new Gi({"symbol-placement":new Ma(Ht.layout_symbol["symbol-placement"]),"symbol-spacing":new Ma(Ht.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ma(Ht.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ia(Ht.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ma(Ht.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ma(Ht.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ma(Ht.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ma(Ht.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ma(Ht.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ia(Ht.layout_symbol["icon-size"]),"icon-text-fit":new Ma(Ht.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ma(Ht.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ia(Ht.layout_symbol["icon-image"]),"icon-rotate":new Ia(Ht.layout_symbol["icon-rotate"]),"icon-padding":new Ma(Ht.layout_symbol["icon-padding"]),"icon-keep-upright":new Ma(Ht.layout_symbol["icon-keep-upright"]),"icon-offset":new Ia(Ht.layout_symbol["icon-offset"]),"icon-anchor":new Ia(Ht.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ma(Ht.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ma(Ht.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ma(Ht.layout_symbol["text-rotation-alignment"]),"text-field":new Ia(Ht.layout_symbol["text-field"]),"text-font":new Ia(Ht.layout_symbol["text-font"]),"text-size":new Ia(Ht.layout_symbol["text-size"]),"text-max-width":new Ia(Ht.layout_symbol["text-max-width"]),"text-line-height":new Ma(Ht.layout_symbol["text-line-height"]),"text-letter-spacing":new Ia(Ht.layout_symbol["text-letter-spacing"]),"text-justify":new Ia(Ht.layout_symbol["text-justify"]),"text-radial-offset":new Ia(Ht.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ma(Ht.layout_symbol["text-variable-anchor"]),"text-anchor":new Ia(Ht.layout_symbol["text-anchor"]),"text-max-angle":new Ma(Ht.layout_symbol["text-max-angle"]),"text-writing-mode":new Ma(Ht.layout_symbol["text-writing-mode"]),"text-rotate":new Ia(Ht.layout_symbol["text-rotate"]),"text-padding":new Ma(Ht.layout_symbol["text-padding"]),"text-keep-upright":new Ma(Ht.layout_symbol["text-keep-upright"]),"text-transform":new Ia(Ht.layout_symbol["text-transform"]),"text-offset":new Ia(Ht.layout_symbol["text-offset"]),"text-allow-overlap":new Ma(Ht.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ma(Ht.layout_symbol["text-ignore-placement"]),"text-optional":new Ma(Ht.layout_symbol["text-optional"])}),bh={paint:new Gi({"icon-opacity":new Ia(Ht.paint_symbol["icon-opacity"]),"icon-color":new Ia(Ht.paint_symbol["icon-color"]),"icon-halo-color":new Ia(Ht.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ia(Ht.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ia(Ht.paint_symbol["icon-halo-blur"]),"icon-translate":new Ma(Ht.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ma(Ht.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ia(Ht.paint_symbol["text-opacity"]),"text-color":new Ia(Ht.paint_symbol["text-color"],{runtimeType:Fn,getOverride:function(L){return L.textColor},hasOverride:function(L){return!!L.textColor}}),"text-halo-color":new Ia(Ht.paint_symbol["text-halo-color"]),"text-halo-width":new Ia(Ht.paint_symbol["text-halo-width"]),"text-halo-blur":new Ia(Ht.paint_symbol["text-halo-blur"]),"text-translate":new Ma(Ht.paint_symbol["text-translate"]),"text-translate-anchor":new Ma(Ht.paint_symbol["text-translate-anchor"])}),layout:s0},Xc=function(P){this.type=P.property.overrides?P.property.overrides.runtimeType:Pt,this.defaultValue=P};Xc.prototype.evaluate=function(P){if(P.formattedSection){var B=this.defaultValue.property.overrides;if(B&&B.hasOverride(P.formattedSection))return B.getOverride(P.formattedSection)}return P.feature&&P.featureState?this.defaultValue.evaluate(P.feature,P.featureState):this.defaultValue.property.specification.default},Xc.prototype.eachChild=function(P){this.defaultValue.isConstant()||P(this.defaultValue.value._styleExpression.expression)},Xc.prototype.outputDefined=function(){return!1},Xc.prototype.serialize=function(){return null},ka("FormatSectionOverride",Xc,{omit:["defaultValue"]});var u0=function(L){function P(B){L.call(this,B,bh)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.recalculate=function(ee,fe){if(L.prototype.recalculate.call(this,ee,fe),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var me=this.layout.get("text-writing-mode");if(me){for(var Te=[],Oe=0,$e=me;Oe<$e.length;Oe+=1){var ft=$e[Oe];Te.indexOf(ft)<0&&Te.push(ft)}this.layout._values["text-writing-mode"]=Te}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},P.prototype.getValueAndResolveTokens=function(ee,fe,me,Te){var Oe=this.layout.get(ee).evaluate(fe,{},me,Te),$e=this._unevaluatedLayout._values[ee];return $e.isDataDriven()||Rs($e.value)||!Oe?Oe:function o0(L,P){return P.replace(/{([^{}]+)}/g,function(B,ee){return ee in L?String(L[ee]):""})}(fe.properties,Oe)},P.prototype.createBucket=function(ee){return new Xi(ee)},P.prototype.queryRadius=function(){return 0},P.prototype.queryIntersectsFeature=function(){return!1},P.prototype._setPaintOverrides=function(){for(var ee=0,fe=bh.paint.overridableProperties;ee<fe.length;ee+=1){var me=fe[ee];if(P.hasPaintOverride(this.layout,me)){var ft,Te=this.paint.get(me),Oe=new Xc(Te),$e=new gs(Oe,Te.property.specification);ft="constant"===Te.value.kind||"source"===Te.value.kind?new vl("source",$e):new ys("composite",$e,Te.value.zoomStops,Te.value._interpolationType),this.paint._values[me]=new Vi(Te.property,ft,Te.parameters)}}},P.prototype._handleOverridablePaintPropertyUpdate=function(ee,fe,me){return!(!this.layout||fe.isDataDriven()||me.isDataDriven())&&P.hasPaintOverride(this.layout,ee)},P.hasPaintOverride=function(ee,fe){var me=ee.get("text-field"),Te=bh.paint.properties[fe],Oe=!1,$e=function(Ft){for(var tr=0,Kt=Ft;tr<Kt.length;tr+=1)if(Te.overrides&&Te.overrides.hasOverride(Kt[tr]))return void(Oe=!0)};if("constant"===me.value.kind&&me.value.value instanceof to)$e(me.value.value.sections);else if("source"===me.value.kind){var ft=function(Ft){Oe||(Ft instanceof no&&ro(Ft.value)===va?$e(Ft.value.sections):Ft instanceof Qo?$e(Ft.sections):Ft.eachChild(ft))},yt=me.value;yt._styleExpression&&ft(yt._styleExpression.expression)}return Oe},P}(Ll),f0={paint:new Gi({"background-color":new Ma(Ht.paint_background["background-color"]),"background-pattern":new mo(Ht.paint_background["background-pattern"]),"background-opacity":new Ma(Ht.paint_background["background-opacity"])})},h0=function(L){function P(B){L.call(this,B,f0)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P}(Ll),p0={paint:new Gi({"raster-opacity":new Ma(Ht.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ma(Ht.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ma(Ht.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ma(Ht.paint_raster["raster-brightness-max"]),"raster-saturation":new Ma(Ht.paint_raster["raster-saturation"]),"raster-contrast":new Ma(Ht.paint_raster["raster-contrast"]),"raster-resampling":new Ma(Ht.paint_raster["raster-resampling"]),"raster-fade-duration":new Ma(Ht.paint_raster["raster-fade-duration"])})},d0=function(L){function P(B){L.call(this,B,p0)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P}(Ll);var y0=function(L){function P(B){L.call(this,B,{}),this.implementation=B}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},P.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},P.prototype.recalculate=function(){},P.prototype.updateTransitions=function(){},P.prototype.hasTransition=function(){},P.prototype.serialize=function(){},P.prototype.onAdd=function(ee){this.implementation.onAdd&&this.implementation.onAdd(ee,ee.painter.context.gl)},P.prototype.onRemove=function(ee){this.implementation.onRemove&&this.implementation.onRemove(ee,ee.painter.context.gl)},P}(Ll),m0={circle:Xv,heatmap:Qv,hillshade:ep,fill:Mp,"fill-extrusion":Yp,line:ad,symbol:u0,background:h0,raster:d0};var _v=self.HTMLImageElement,wv=self.HTMLCanvasElement,Tv=self.HTMLVideoElement,Av=self.ImageData,Gf=self.ImageBitmap,Tc=function(P,B,ee,fe){this.context=P,this.format=ee,this.texture=P.gl.createTexture(),this.update(B,fe)};Tc.prototype.update=function(P,B,ee){var fe=P.width,me=P.height,Te=!(this.size&&this.size[0]===fe&&this.size[1]===me||ee),$e=this.context,ft=$e.gl;if(this.useMipmap=Boolean(B&&B.useMipmap),ft.bindTexture(ft.TEXTURE_2D,this.texture),$e.pixelStoreUnpackFlipY.set(!1),$e.pixelStoreUnpack.set(1),$e.pixelStoreUnpackPremultiplyAlpha.set(this.format===ft.RGBA&&(!B||!1!==B.premultiply)),Te)this.size=[fe,me],P instanceof _v||P instanceof wv||P instanceof Tv||P instanceof Av||Gf&&P instanceof Gf?ft.texImage2D(ft.TEXTURE_2D,0,this.format,this.format,ft.UNSIGNED_BYTE,P):ft.texImage2D(ft.TEXTURE_2D,0,this.format,fe,me,0,this.format,ft.UNSIGNED_BYTE,P.data);else{var yt=ee||{x:0,y:0},Ft=yt.x,tr=yt.y;P instanceof _v||P instanceof wv||P instanceof Tv||P instanceof Av||Gf&&P instanceof Gf?ft.texSubImage2D(ft.TEXTURE_2D,0,Ft,tr,ft.RGBA,ft.UNSIGNED_BYTE,P):ft.texSubImage2D(ft.TEXTURE_2D,0,Ft,tr,fe,me,ft.RGBA,ft.UNSIGNED_BYTE,P.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ft.generateMipmap(ft.TEXTURE_2D)},Tc.prototype.bind=function(P,B,ee){var Te=this.context.gl;Te.bindTexture(Te.TEXTURE_2D,this.texture),ee===Te.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(ee=Te.LINEAR),P!==this.filter&&(Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MAG_FILTER,P),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MIN_FILTER,ee||P),this.filter=P),B!==this.wrap&&(Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_S,B),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_T,B),this.wrap=B)},Tc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Tc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var _h=function(P){var B=this;this._callback=P,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){B._triggered=!1,B._callback()})};_h.prototype.trigger=function(){var P=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){P._triggered=!1,P._callback()},0))},_h.prototype.remove=function(){delete this._channel,this._callback=function(){}};var jc=function(P,B,ee){this.target=P,this.parent=B,this.mapId=ee,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},h(["receive","process"],this),this.invoker=new _h(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=X()?P:self};function Mv(L,P,B){var ee=2*Math.PI*6378137/256/Math.pow(2,B);return[L*ee-2*Math.PI*6378137/2,P*ee-2*Math.PI*6378137/2]}jc.prototype.send=function(P,B,ee,fe,me){var Te=this;void 0===me&&(me=!1);var Oe=Math.round(1e18*Math.random()).toString(36).substring(0,10);ee&&(this.callbacks[Oe]=ee);var $e=ne(this.globalScope)?void 0:[];return this.target.postMessage({id:Oe,type:P,hasCallback:!!ee,targetMapId:fe,mustQueue:me,sourceMapId:this.mapId,data:Ee(B,$e)},$e),{cancel:function(){ee&&delete Te.callbacks[Oe],Te.target.postMessage({id:Oe,type:"<cancel>",targetMapId:fe,sourceMapId:Te.mapId})}}},jc.prototype.receive=function(P){var B=P.data,ee=B.id;if(ee&&(!B.targetMapId||this.mapId===B.targetMapId))if("<cancel>"===B.type){delete this.tasks[ee];var fe=this.cancelCallbacks[ee];delete this.cancelCallbacks[ee],fe&&fe()}else X()||B.mustQueue?(this.tasks[ee]=B,this.taskQueue.push(ee),this.invoker.trigger()):this.processTask(ee,B)},jc.prototype.process=function(){if(this.taskQueue.length){var P=this.taskQueue.shift(),B=this.tasks[P];delete this.tasks[P],this.taskQueue.length&&this.invoker.trigger(),B&&this.processTask(P,B)}},jc.prototype.processTask=function(P,B){var ee=this;if("<response>"===B.type){var fe=this.callbacks[P];delete this.callbacks[P],fe&&(B.error?fe(Ne(B.error)):fe(null,Ne(B.data)))}else{var me=!1,Te=ne(this.globalScope)?void 0:[],Oe=B.hasCallback?function(tr,Kt){me=!0,delete ee.cancelCallbacks[P],ee.target.postMessage({id:P,type:"<response>",sourceMapId:ee.mapId,error:tr?Ee(tr):null,data:Ee(Kt,Te)},Te)}:function(tr){me=!0},$e=null,ft=Ne(B.data);if(this.parent[B.type])$e=this.parent[B.type](B.sourceMapId,ft,Oe);else if(this.parent.getWorkerSource){var yt=B.type.split(".");$e=this.parent.getWorkerSource(B.sourceMapId,yt[0],ft.source)[yt[1]](ft,Oe)}else Oe(new Error("Could not find function "+B.type));!me&&$e&&$e.cancel&&(this.cancelCallbacks[P]=$e.cancel)}},jc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Oo=function(P,B){P&&(B?this.setSouthWest(P).setNorthEast(B):4===P.length?this.setSouthWest([P[0],P[1]]).setNorthEast([P[2],P[3]]):this.setSouthWest(P[0]).setNorthEast(P[1]))};Oo.prototype.setNorthEast=function(P){return this._ne=P instanceof go?new go(P.lng,P.lat):go.convert(P),this},Oo.prototype.setSouthWest=function(P){return this._sw=P instanceof go?new go(P.lng,P.lat):go.convert(P),this},Oo.prototype.extend=function(P){var fe,me,B=this._sw,ee=this._ne;if(P instanceof go)fe=P,me=P;else{if(!(P instanceof Oo))return Array.isArray(P)?4===P.length||P.every(Array.isArray)?this.extend(Oo.convert(P)):this.extend(go.convert(P)):this;if(me=P._ne,!(fe=P._sw)||!me)return this}return B||ee?(B.lng=Math.min(fe.lng,B.lng),B.lat=Math.min(fe.lat,B.lat),ee.lng=Math.max(me.lng,ee.lng),ee.lat=Math.max(me.lat,ee.lat)):(this._sw=new go(fe.lng,fe.lat),this._ne=new go(me.lng,me.lat)),this},Oo.prototype.getCenter=function(){return new go((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Oo.prototype.getSouthWest=function(){return this._sw},Oo.prototype.getNorthEast=function(){return this._ne},Oo.prototype.getNorthWest=function(){return new go(this.getWest(),this.getNorth())},Oo.prototype.getSouthEast=function(){return new go(this.getEast(),this.getSouth())},Oo.prototype.getWest=function(){return this._sw.lng},Oo.prototype.getSouth=function(){return this._sw.lat},Oo.prototype.getEast=function(){return this._ne.lng},Oo.prototype.getNorth=function(){return this._ne.lat},Oo.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Oo.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Oo.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Oo.prototype.contains=function(P){var B=go.convert(P),ee=B.lng,fe=B.lat,Te=this._sw.lng<=ee&&ee<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Te=this._sw.lng>=ee&&ee>=this._ne.lng),this._sw.lat<=fe&&fe<=this._ne.lat&&Te},Oo.convert=function(P){return!P||P instanceof Oo?P:new Oo(P)};var Sv=6371008.8,go=function(P,B){if(isNaN(P)||isNaN(B))throw new Error("Invalid LngLat object: ("+P+", "+B+")");if(this.lng=+P,this.lat=+B,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};go.prototype.wrap=function(){return new go(S(this.lng,-180,180),this.lat)},go.prototype.toArray=function(){return[this.lng,this.lat]},go.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},go.prototype.distanceTo=function(P){var B=Math.PI/180,ee=this.lat*B,fe=P.lat*B,me=Math.sin(ee)*Math.sin(fe)+Math.cos(ee)*Math.cos(fe)*Math.cos((P.lng-this.lng)*B);return Sv*Math.acos(Math.min(me,1))},go.prototype.toBounds=function(P){void 0===P&&(P=0);var ee=360*P/40075017,fe=ee/Math.cos(Math.PI/180*this.lat);return new Oo(new go(this.lng-fe,this.lat-ee),new go(this.lng+fe,this.lat+ee))},go.convert=function(P){if(P instanceof go)return P;if(Array.isArray(P)&&(2===P.length||3===P.length))return new go(Number(P[0]),Number(P[1]));if(!Array.isArray(P)&&"object"==typeof P&&null!==P)return new go(Number("lng"in P?P.lng:P.lon),Number(P.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var kv=2*Math.PI*Sv;function Cv(L){return kv*Math.cos(L*Math.PI/180)}function Ev(L){return(180+L)/360}function Lv(L){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+L*Math.PI/360)))/360}function Pv(L,P){return L/Cv(P)}function wh(L){return 360/Math.PI*Math.atan(Math.exp((180-360*L)*Math.PI/180))-90}var Ac=function(P,B,ee){void 0===ee&&(ee=0),this.x=+P,this.y=+B,this.z=+ee};Ac.fromLngLat=function(P,B){void 0===B&&(B=0);var ee=go.convert(P);return new Ac(Ev(ee.lng),Lv(ee.lat),Pv(B,ee.lat))},Ac.prototype.toLngLat=function(){return new go(function _0(L){return 360*L-180}(this.x),wh(this.y))},Ac.prototype.toAltitude=function(){return function w0(L,P){return L*Cv(wh(P))}(this.z,this.y)},Ac.prototype.meterInMercatorCoordinateUnits=function(){return 1/kv*function T0(L){return 1/Math.cos(L*Math.PI/180)}(wh(this.y))};var Mc=function(P,B,ee){this.z=P,this.x=B,this.y=ee,this.key=xf(0,P,P,B,ee)};Mc.prototype.equals=function(P){return this.z===P.z&&this.x===P.x&&this.y===P.y},Mc.prototype.url=function(P,B){var ee=function b0(L,P,B){var ee=Mv(256*L,256*(P=Math.pow(2,B)-P-1),B),fe=Mv(256*(L+1),256*(P+1),B);return ee[0]+","+ee[1]+","+fe[0]+","+fe[1]}(this.x,this.y,this.z),fe=function A0(L,P,B){for(var fe,ee="",me=L;me>0;me--)ee+=(P&(fe=1<<me-1)?1:0)+(B&fe?2:0);return ee}(this.z,this.x,this.y);return P[(this.x+this.y)%P.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===B?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",fe).replace("{bbox-epsg-3857}",ee)},Mc.prototype.getTilePoint=function(P){var B=Math.pow(2,this.z);return new i((P.x*B-this.x)*Ua,(P.y*B-this.y)*Ua)},Mc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Dv=function(P,B){this.wrap=P,this.canonical=B,this.key=xf(P,B.z,B.z,B.x,B.y)},No=function(P,B,ee,fe,me){this.overscaledZ=P,this.wrap=B,this.canonical=new Mc(ee,+fe,+me),this.key=xf(B,P,ee,fe,me)};function xf(L,P,B,ee,fe){(L*=2)<0&&(L=-1*L-1);var me=1<<B;return(me*me*L+me*fe+ee).toString(36)+B.toString(36)+P.toString(36)}No.prototype.equals=function(P){return this.overscaledZ===P.overscaledZ&&this.wrap===P.wrap&&this.canonical.equals(P.canonical)},No.prototype.scaledTo=function(P){var B=this.canonical.z-P;return P>this.canonical.z?new No(P,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new No(P,this.wrap,P,this.canonical.x>>B,this.canonical.y>>B)},No.prototype.calculateScaledKey=function(P,B){var ee=this.canonical.z-P;return P>this.canonical.z?xf(this.wrap*+B,P,this.canonical.z,this.canonical.x,this.canonical.y):xf(this.wrap*+B,P,P,this.canonical.x>>ee,this.canonical.y>>ee)},No.prototype.isChildOf=function(P){if(P.wrap!==this.wrap)return!1;var B=this.canonical.z-P.canonical.z;return 0===P.overscaledZ||P.overscaledZ<this.overscaledZ&&P.canonical.x===this.canonical.x>>B&&P.canonical.y===this.canonical.y>>B},No.prototype.children=function(P){if(this.overscaledZ>=P)return[new No(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var B=this.canonical.z+1,ee=2*this.canonical.x,fe=2*this.canonical.y;return[new No(B,this.wrap,B,ee,fe),new No(B,this.wrap,B,ee+1,fe),new No(B,this.wrap,B,ee,fe+1),new No(B,this.wrap,B,ee+1,fe+1)]},No.prototype.isLessThan=function(P){return this.wrap<P.wrap||!(this.wrap>P.wrap)&&(this.overscaledZ<P.overscaledZ||!(this.overscaledZ>P.overscaledZ)&&(this.canonical.x<P.canonical.x||!(this.canonical.x>P.canonical.x)&&this.canonical.y<P.canonical.y))},No.prototype.wrapped=function(){return new No(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},No.prototype.unwrapTo=function(P){return new No(this.overscaledZ,P,this.canonical.z,this.canonical.x,this.canonical.y)},No.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},No.prototype.toUnwrapped=function(){return new Dv(this.wrap,this.canonical)},No.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},No.prototype.getTilePoint=function(P){return this.canonical.getTilePoint(new Ac(P.x-this.wrap,P.y))},ka("CanonicalTileID",Mc),ka("OverscaledTileID",No,{omit:["posMatrix"]});var qu=function(P,B,ee){if(this.uid=P,B.height!==B.width)throw new RangeError("DEM tiles must be square");if(ee&&"mapbox"!==ee&&"terrarium"!==ee)return F('"'+ee+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=B.height;var fe=this.dim=B.height-2;this.data=new Uint32Array(B.data.buffer),this.encoding=ee||"mapbox";for(var me=0;me<fe;me++)this.data[this._idx(-1,me)]=this.data[this._idx(0,me)],this.data[this._idx(fe,me)]=this.data[this._idx(fe-1,me)],this.data[this._idx(me,-1)]=this.data[this._idx(me,0)],this.data[this._idx(me,fe)]=this.data[this._idx(me,fe-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(fe,-1)]=this.data[this._idx(fe-1,0)],this.data[this._idx(-1,fe)]=this.data[this._idx(0,fe-1)],this.data[this._idx(fe,fe)]=this.data[this._idx(fe-1,fe-1)]};qu.prototype.get=function(P,B){var ee=new Uint8Array(this.data.buffer),fe=4*this._idx(P,B);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(ee[fe],ee[fe+1],ee[fe+2])},qu.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},qu.prototype._idx=function(P,B){if(P<-1||P>=this.dim+1||B<-1||B>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(B+1)*this.stride+(P+1)},qu.prototype._unpackMapbox=function(P,B,ee){return(256*P*256+256*B+ee)/10-1e4},qu.prototype._unpackTerrarium=function(P,B,ee){return 256*P+B+ee/256-32768},qu.prototype.getPixels=function(){return new rl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},qu.prototype.backfillBorder=function(P,B,ee){if(this.dim!==P.dim)throw new Error("dem dimension mismatch");var fe=B*this.dim,me=B*this.dim+this.dim,Te=ee*this.dim,Oe=ee*this.dim+this.dim;switch(B){case-1:fe=me-1;break;case 1:me=fe+1}switch(ee){case-1:Te=Oe-1;break;case 1:Oe=Te+1}for(var $e=-B*this.dim,ft=-ee*this.dim,yt=Te;yt<Oe;yt++)for(var Ft=fe;Ft<me;Ft++)this.data[this._idx(Ft,yt)]=P.data[this._idx(Ft+$e,yt+ft)]},ka("DEMData",qu);var Zf=function(P){this._stringToNumber={},this._numberToString=[];for(var B=0;B<P.length;B++){var ee=P[B];this._stringToNumber[ee]=B,this._numberToString[B]=ee}};Zf.prototype.encode=function(P){return this._stringToNumber[P]},Zf.prototype.decode=function(P){return this._numberToString[P]};var Yf=function(P,B,ee,fe,me){this.type="Feature",this._vectorTileFeature=P,P._z=B,P._x=ee,P._y=fe,this.properties=P.properties,this.id=me},Th={geometry:{configurable:!0}};Th.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Th.geometry.set=function(L){this._geometry=L},Yf.prototype.toJSON=function(){var P={geometry:this.geometry};for(var B in this)"_geometry"===B||"_vectorTileFeature"===B||(P[B]=this[B]);return P},Object.defineProperties(Yf.prototype,Th);var Jc=function(){this.state={},this.stateChanges={},this.deletedStates={}};Jc.prototype.updateState=function(P,B,ee){var fe=String(B);if(this.stateChanges[P]=this.stateChanges[P]||{},this.stateChanges[P][fe]=this.stateChanges[P][fe]||{},y(this.stateChanges[P][fe],ee),null===this.deletedStates[P])for(var me in this.deletedStates[P]={},this.state[P])me!==fe&&(this.deletedStates[P][me]=null);else if(this.deletedStates[P]&&null===this.deletedStates[P][fe])for(var Oe in this.deletedStates[P][fe]={},this.state[P][fe])ee[Oe]||(this.deletedStates[P][fe][Oe]=null);else for(var $e in ee)this.deletedStates[P]&&this.deletedStates[P][fe]&&null===this.deletedStates[P][fe][$e]&&delete this.deletedStates[P][fe][$e]},Jc.prototype.removeFeatureState=function(P,B,ee){if(null!==this.deletedStates[P]){var me=String(B);if(this.deletedStates[P]=this.deletedStates[P]||{},ee&&void 0!==B)null!==this.deletedStates[P][me]&&(this.deletedStates[P][me]=this.deletedStates[P][me]||{},this.deletedStates[P][me][ee]=null);else if(void 0!==B)if(this.stateChanges[P]&&this.stateChanges[P][me])for(ee in this.deletedStates[P][me]={},this.stateChanges[P][me])this.deletedStates[P][me][ee]=null;else this.deletedStates[P][me]=null;else this.deletedStates[P]=null}},Jc.prototype.getState=function(P,B){var ee=String(B),Te=y({},(this.state[P]||{})[ee],(this.stateChanges[P]||{})[ee]);if(null===this.deletedStates[P])return{};if(this.deletedStates[P]){var Oe=this.deletedStates[P][B];if(null===Oe)return{};for(var $e in Oe)delete Te[$e]}return Te},Jc.prototype.initializeTileState=function(P,B){P.setFeatureState(this.state,B)},Jc.prototype.coalesceChanges=function(P,B){var ee={};for(var fe in this.stateChanges){this.state[fe]=this.state[fe]||{};var me={};for(var Te in this.stateChanges[fe])this.state[fe][Te]||(this.state[fe][Te]={}),y(this.state[fe][Te],this.stateChanges[fe][Te]),me[Te]=this.state[fe][Te];ee[fe]=me}for(var Oe in this.deletedStates){this.state[Oe]=this.state[Oe]||{};var $e={};if(null===this.deletedStates[Oe])for(var ft in this.state[Oe])$e[ft]={},this.state[Oe][ft]={};else for(var yt in this.deletedStates[Oe]){if(null===this.deletedStates[Oe][yt])this.state[Oe][yt]={};else for(var tr=0,Kt=Object.keys(this.deletedStates[Oe][yt]);tr<Kt.length;tr+=1)delete this.state[Oe][yt][Kt[tr]];$e[yt]=this.state[Oe][yt]}ee[Oe]=ee[Oe]||{},y(ee[Oe],$e)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(ee).length)for(var Fr in P)P[Fr].setFeatureState(ee,B)};var ec=function(P,B){this.tileID=P,this.x=P.canonical.x,this.y=P.canonical.y,this.z=P.canonical.z,this.grid=new Eo(Ua,16,0),this.grid3D=new Eo(Ua,16,0),this.featureIndexArray=new nf,this.promoteId=B};function Rv(L,P,B,ee,fe){return C(L,function(me,Te){var Oe=P instanceof Oi?P.get(Te):null;return Oe&&Oe.evaluate?Oe.evaluate(B,ee,fe):Oe})}function Iv(L){for(var P=1/0,B=1/0,ee=-1/0,fe=-1/0,me=0,Te=L;me<Te.length;me+=1){var Oe=Te[me];P=Math.min(P,Oe.x),B=Math.min(B,Oe.y),ee=Math.max(ee,Oe.x),fe=Math.max(fe,Oe.y)}return{minX:P,minY:B,maxX:ee,maxY:fe}}function S0(L,P){return P-L}ec.prototype.insert=function(P,B,ee,fe,me,Te){var Oe=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(ee,fe,me);for(var $e=Te?this.grid3D:this.grid,ft=0;ft<B.length;ft++){for(var yt=B[ft],Ft=[1/0,1/0,-1/0,-1/0],tr=0;tr<yt.length;tr++){var Kt=yt[tr];Ft[0]=Math.min(Ft[0],Kt.x),Ft[1]=Math.min(Ft[1],Kt.y),Ft[2]=Math.max(Ft[2],Kt.x),Ft[3]=Math.max(Ft[3],Kt.y)}Ft[0]<Ua&&Ft[1]<Ua&&Ft[2]>=0&&Ft[3]>=0&&$e.insert(Oe,Ft[0],Ft[1],Ft[2],Ft[3])}},ec.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Oc.VectorTile(new If(this.rawTileData)).layers,this.sourceLayerCoder=new Zf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},ec.prototype.query=function(P,B,ee,fe){var me=this;this.loadVTLayers();for(var Te=P.params||{},Oe=Ua/P.tileSize/P.scale,$e=qo(Te.filter),ft=P.queryGeometry,yt=P.queryPadding*Oe,Ft=Iv(ft),tr=this.grid.query(Ft.minX-yt,Ft.minY-yt,Ft.maxX+yt,Ft.maxY+yt),Kt=Iv(P.cameraQueryGeometry),Fr=0,fn=this.grid3D.query(Kt.minX-yt,Kt.minY-yt,Kt.maxX+yt,Kt.maxY+yt,function(Hn,oa,aa,Na){return function Zu(L,P,B,ee,fe){for(var me=0,Te=L;me<Te.length;me+=1){var Oe=Te[me];if(P<=Oe.x&&B<=Oe.y&&ee>=Oe.x&&fe>=Oe.y)return!0}var $e=[new i(P,B),new i(P,fe),new i(ee,fe),new i(ee,B)];if(L.length>2)for(var ft=0,yt=$e;ft<yt.length;ft+=1)if(Ns(L,yt[ft]))return!0;for(var tr=0;tr<L.length-1;tr++)if(xs(L[tr],L[tr+1],$e))return!0;return!1}(P.cameraQueryGeometry,Hn-yt,oa-yt,aa+yt,Na+yt)});Fr<fn.length;Fr+=1)tr.push(fn[Fr]);tr.sort(S0);for(var xn,Sn={},Mn=function(Hn){var oa=tr[Hn];if(oa!==xn){xn=oa;var aa=me.featureIndexArray.get(oa),Na=null;me.loadMatchingFeature(Sn,aa.bucketIndex,aa.sourceLayerIndex,aa.featureIndex,$e,Te.layers,Te.availableImages,B,ee,fe,function(ba,Sa,ni){return Na||(Na=Zi(ba)),Sa.queryIntersectsFeature(ft,ba,ni,Na,me.z,P.transform,Oe,P.pixelPosMatrix)})}},In=0;In<tr.length;In++)Mn(In);return Sn},ec.prototype.loadMatchingFeature=function(P,B,ee,fe,me,Te,Oe,$e,ft,yt,Ft){var tr=this.bucketLayerIDs[B];if(!Te||function O(L,P){for(var B=0;B<L.length;B++)if(P.indexOf(L[B])>=0)return!0;return!1}(Te,tr)){var Kt=this.sourceLayerCoder.decode(ee),Fr=this.vtLayers[Kt].feature(fe);if(me.filter(new hi(this.tileID.overscaledZ),Fr))for(var fn=this.getId(Fr,Kt),nn=0;nn<tr.length;nn++){var Sn=tr[nn];if(!(Te&&Te.indexOf(Sn)<0)){var xn=$e[Sn];if(xn){var Mn={};void 0!==fn&&yt&&(Mn=yt.getState(xn.sourceLayer||"_geojsonTileLayer",fn));var In=ft[Sn];In.paint=Rv(In.paint,xn.paint,Fr,Mn,Oe),In.layout=Rv(In.layout,xn.layout,Fr,Mn,Oe);var Hn=!Ft||Ft(Fr,xn,Mn);if(Hn){var oa=new Yf(Fr,this.z,this.x,this.y,fn);oa.layer=In;var aa=P[Sn];void 0===aa&&(aa=P[Sn]=[]),aa.push({featureIndex:fe,feature:oa,intersectionZ:Hn})}}}}}},ec.prototype.lookupSymbolFeatures=function(P,B,ee,fe,me,Te,Oe,$e){var ft={};this.loadVTLayers();for(var yt=qo(me),Ft=0,tr=P;Ft<tr.length;Ft+=1)this.loadMatchingFeature(ft,ee,fe,tr[Ft],yt,Te,Oe,$e,B);return ft},ec.prototype.hasLayer=function(P){for(var B=0,ee=this.bucketLayerIDs;B<ee.length;B+=1)for(var me=0,Te=ee[B];me<Te.length;me+=1)if(P===Te[me])return!0;return!1},ec.prototype.getId=function(P,B){var ee=P.id;return this.promoteId&&"boolean"==typeof(ee=P.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[B]])&&(ee=Number(ee)),ee},ka("FeatureIndex",ec,{omit:["rawTileData","sourceLayerCoder"]});var es=function(P,B){this.tileID=P,this.uid=M(),this.uses=0,this.tileSize=B,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};es.prototype.registerFadeDuration=function(P){var B=P+this.timeAdded;B<te.now()||this.fadeEndTime&&B<this.fadeEndTime||(this.fadeEndTime=B)},es.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},es.prototype.loadVectorData=function(P,B,ee){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",P){for(var fe in P.featureIndex&&(this.latestFeatureIndex=P.featureIndex,P.rawTileData?(this.latestRawTileData=P.rawTileData,this.latestFeatureIndex.rawTileData=P.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=P.collisionBoxArray,this.buckets=function M0(L,P){var B={};if(!P)return B;for(var ee=function(){var Te=me[fe],Oe=Te.layerIds.map(function(Ft){return P.getLayer(Ft)}).filter(Boolean);if(0!==Oe.length){Te.layers=Oe,Te.stateDependentLayerIds&&(Te.stateDependentLayers=Te.stateDependentLayerIds.map(function(Ft){return Oe.filter(function(tr){return tr.id===Ft})[0]}));for(var $e=0,ft=Oe;$e<ft.length;$e+=1)B[ft[$e].id]=Te}},fe=0,me=L;fe<me.length;fe+=1)ee();return B}(P.buckets,B.style),this.hasSymbolBuckets=!1,this.buckets){var me=this.buckets[fe];if(me instanceof Xi){if(this.hasSymbolBuckets=!0,!ee)break;me.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Te in this.buckets){var Oe=this.buckets[Te];if(Oe instanceof Xi&&Oe.hasRTLText){this.hasRTLText=!0,!Ya.isLoading()&&!Ya.isLoaded()&&"deferred"===Ca()&&Oa();break}}for(var $e in this.queryPadding=0,this.buckets){var ft=this.buckets[$e];this.queryPadding=Math.max(this.queryPadding,B.style.getLayer($e).queryRadius(ft))}P.imageAtlas&&(this.imageAtlas=P.imageAtlas),P.glyphAtlasImage&&(this.glyphAtlasImage=P.glyphAtlasImage)}else this.collisionBoxArray=new Gu},es.prototype.unloadVectorData=function(){for(var P in this.buckets)this.buckets[P].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},es.prototype.getBucket=function(P){return this.buckets[P.id]},es.prototype.upload=function(P){for(var B in this.buckets){var ee=this.buckets[B];ee.uploadPending()&&ee.upload(P)}var fe=P.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Tc(P,this.imageAtlas.image,fe.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Tc(P,this.glyphAtlasImage,fe.ALPHA),this.glyphAtlasImage=null)},es.prototype.prepare=function(P){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(P,this.imageAtlasTexture)},es.prototype.queryRenderedFeatures=function(P,B,ee,fe,me,Te,Oe,$e,ft,yt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:fe,cameraQueryGeometry:me,scale:Te,tileSize:this.tileSize,pixelPosMatrix:yt,transform:$e,params:Oe,queryPadding:this.queryPadding*ft},P,B,ee):{}},es.prototype.querySourceFeatures=function(P,B){var ee=this.latestFeatureIndex;if(ee&&ee.rawTileData){var fe=ee.loadVTLayers(),me=B?B.sourceLayer:"",Te=fe._geojsonTileLayer||fe[me];if(Te)for(var Oe=qo(B&&B.filter),$e=this.tileID.canonical,ft=$e.z,yt=$e.x,Ft=$e.y,tr={z:ft,x:yt,y:Ft},Kt=0;Kt<Te.length;Kt++){var xr=Te.feature(Kt);if(Oe.filter(new hi(this.tileID.overscaledZ),xr)){var Fr=ee.getId(xr,me),fn=new Yf(xr,ft,yt,Ft,Fr);fn.tile=tr,P.push(fn)}}}},es.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},es.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},es.prototype.setExpiryData=function(P){var B=this.expirationTime;if(P.cacheControl){var ee=oe(P.cacheControl);ee["max-age"]&&(this.expirationTime=Date.now()+1e3*ee["max-age"])}else P.expires&&(this.expirationTime=new Date(P.expires).getTime());if(this.expirationTime){var fe=Date.now(),me=!1;if(this.expirationTime>fe)me=!1;else if(B)if(this.expirationTime<B)me=!0;else{var Te=this.expirationTime-B;Te?this.expirationTime=fe+Math.max(Te,3e4):me=!0}else me=!0;me?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},es.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},es.prototype.setFeatureState=function(P,B){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(P).length){var ee=this.latestFeatureIndex.loadVTLayers();for(var fe in this.buckets)if(B.style.hasLayer(fe)){var me=this.buckets[fe],Te=me.layers[0].sourceLayer||"_geojsonTileLayer",Oe=ee[Te],$e=P[Te];if(Oe&&$e&&0!==Object.keys($e).length){me.update($e,Oe,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ft=B&&B.style&&B.style.getLayer(fe);ft&&(this.queryPadding=Math.max(this.queryPadding,ft.queryRadius(me)))}}}},es.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},es.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<te.now()},es.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},es.prototype.setHoldDuration=function(P){this.symbolFadeHoldUntil=te.now()+P},es.prototype.setDependencies=function(P,B){for(var ee={},fe=0,me=B;fe<me.length;fe+=1)ee[me[fe]]=!0;this.dependencies[P]=ee},es.prototype.hasDependency=function(P,B){for(var ee=0,fe=P;ee<fe.length;ee+=1){var Te=this.dependencies[fe[ee]];if(Te)for(var Oe=0,$e=B;Oe<$e.length;Oe+=1)if(Te[$e[Oe]])return!0}return!1};var hc=self.performance,zv=function(P){this._marks={start:[P.url,"start"].join("#"),end:[P.url,"end"].join("#"),measure:P.url.toString()},hc.mark(this._marks.start)};zv.prototype.finish=function(){hc.mark(this._marks.end);var P=hc.getEntriesByName(this._marks.measure);return 0===P.length&&(hc.measure(this._marks.measure,this._marks.start,this._marks.end),P=hc.getEntriesByName(this._marks.measure),hc.clearMarks(this._marks.start),hc.clearMarks(this._marks.end),hc.clearMeasures(this._marks.measure)),P},e.Actor=jc,e.AlphaImage=wc,e.CanonicalTileID=Mc,e.CollisionBoxArray=Gu,e.Color=gi,e.DEMData=qu,e.DataConstantProperty=Ma,e.DictionaryCoder=Zf,e.EXTENT=Ua,e.ErrorEvent=Lr,e.EvaluationParameters=hi,e.Event=Jr,e.Evented=Ar,e.FeatureIndex=ec,e.FillBucket=Au,e.FillExtrusionBucket=Mu,e.ImageAtlas=df,e.ImagePosition=Ff,e.LineBucket=nl,e.LngLat=go,e.LngLatBounds=Oo,e.MercatorCoordinate=Ac,e.ONE_EM=24,e.OverscaledTileID=No,e.Point=i,e.Point$1=i,e.Properties=Gi,e.Protobuf=If,e.RGBAImage=rl,e.RequestManager=be,e.RequestPerformance=zv,e.ResourceType=et,e.SegmentVector=Z,e.SourceFeatureState=Jc,e.StructArrayLayout1ui2=oc,e.StructArrayLayout2f1f2i16=_u,e.StructArrayLayout2i4=su,e.StructArrayLayout3ui6=wu,e.StructArrayLayout4i8=Yl,e.SymbolBucket=Xi,e.Texture=Tc,e.Tile=es,e.Transitionable=Qa,e.Uniform1f=Ur,e.Uniform1i=Yr,e.Uniform2f=tn,e.Uniform3f=pn,e.Uniform4f=Cn,e.UniformColor=Nn,e.UniformMatrix4f=qn,e.UnwrappedTileID=Dv,e.ValidationError=dr,e.WritingMode=Rl,e.ZoomHistory=He,e.add=function Ic(L,P,B){return L[0]=P[0]+B[0],L[1]=P[1]+B[1],L[2]=P[2]+B[2],L},e.addDynamicAttributes=xh,e.asyncAll=function p(L,P,B){if(!L.length)return B(null,[]);var ee=L.length,fe=new Array(L.length),me=null;L.forEach(function(Te,Oe){P(Te,function($e,ft){$e&&(me=$e),fe[Oe]=ft,0==--ee&&B(me,fe)})})},e.bezier=s,e.bindAll=h,e.browser=te,e.cacheEntryPossiblyAdded=function nr(L){++Jt>Qe&&(L.getActor().send("enforceCacheSizeLimit",vt),Jt=0)},e.clamp=x,e.clearTileCache=function br(L){var P=self.caches.delete(at);L&&P.catch(L).then(function(){return L()})},e.clipLine=dv,e.clone=function kf(L){var P=new ls(16);return P[0]=L[0],P[1]=L[1],P[2]=L[2],P[3]=L[3],P[4]=L[4],P[5]=L[5],P[6]=L[6],P[7]=L[7],P[8]=L[8],P[9]=L[9],P[10]=L[10],P[11]=L[11],P[12]=L[12],P[13]=L[13],P[14]=L[14],P[15]=L[15],P},e.clone$1=z,e.clone$2=function $f(L){var P=new ls(3);return P[0]=L[0],P[1]=L[1],P[2]=L[2],P},e.collisionCircleLayout=ld,e.config=J,e.create=function Pc(){var L=new ls(16);return ls!=Float32Array&&(L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[11]=0,L[12]=0,L[13]=0,L[14]=0),L[0]=1,L[5]=1,L[10]=1,L[15]=1,L},e.create$1=function bc(){var L=new ls(9);return ls!=Float32Array&&(L[1]=0,L[2]=0,L[3]=0,L[5]=0,L[6]=0,L[7]=0),L[0]=1,L[4]=1,L[8]=1,L},e.create$2=function xc(){var L=new ls(4);return ls!=Float32Array&&(L[1]=0,L[2]=0),L[0]=1,L[3]=1,L},e.createCommonjsModule=c,e.createExpression=hl,e.createLayout=oo,e.createStyleLayer=function x0(L){return"custom"===L.type?new y0(L):new m0[L.type](L)},e.cross=function Nv(L,P,B){var ee=P[0],fe=P[1],me=P[2],Te=B[0],Oe=B[1],$e=B[2];return L[0]=fe*$e-me*Oe,L[1]=me*Te-ee*$e,L[2]=ee*Oe-fe*Te,L},e.deepEqual=function r(L,P){if(Array.isArray(L)){if(!Array.isArray(P)||L.length!==P.length)return!1;for(var B=0;B<L.length;B++)if(!r(L[B],P[B]))return!1;return!0}if("object"==typeof L&&null!==L&&null!==P){if("object"!=typeof P)return!1;if(Object.keys(L).length!==Object.keys(P).length)return!1;for(var fe in L)if(!r(L[fe],P[fe]))return!1;return!0}return L===P},e.dot=function Ov(L,P){return L[0]*P[0]+L[1]*P[1]+L[2]*P[2]},e.dot$1=function Gv(L,P){return L[0]*P[0]+L[1]*P[1]+L[2]*P[2]+L[3]*P[3]},e.ease=b,e.emitValidationErrors=vo,e.endsWith=o,e.enforceCacheSizeLimit=function rr(L){Xe(),Ze&&Ze.then(function(P){P.keys().then(function(B){for(var ee=0;ee<B.length-L;ee++)P.delete(B[ee])})})},e.evaluateSizeForFeature=lv,e.evaluateSizeForZoom=uv,e.evaluateVariableOffset=mv,e.evented=ha,e.extend=y,e.featureFilter=qo,e.filterObject=R,e.fromRotation=function Lc(L,P){var B=Math.sin(P),ee=Math.cos(P);return L[0]=ee,L[1]=B,L[2]=0,L[3]=-B,L[4]=ee,L[5]=0,L[6]=0,L[7]=0,L[8]=1,L},e.getAnchorAlignment=dh,e.getAnchorJustification=mh,e.getArrayBuffer=ht,e.getImage=Dt,e.getJSON=function(L,P){return je(y(L,{type:"json"}),P)},e.getRTLTextPluginStatus=Ca,e.getReferrer=qt,e.getVideo=function(L,P){var B=self.document.createElement("video");B.muted=!0,B.onloadstart=function(){P(null,B)};for(var ee=0;ee<L.length;ee++){var fe=self.document.createElement("source");Se(L[ee])||(B.crossOrigin="Anonymous"),fe.src=L[ee],B.appendChild(fe)}return{cancel:function(){}}},e.identity=Dc,e.invert=function lc(L,P){var B=P[0],ee=P[1],fe=P[2],me=P[3],Te=P[4],Oe=P[5],$e=P[6],ft=P[7],yt=P[8],Ft=P[9],tr=P[10],Kt=P[11],xr=P[12],Fr=P[13],fn=P[14],nn=P[15],Sn=B*Oe-ee*Te,xn=B*$e-fe*Te,Mn=B*ft-me*Te,In=ee*$e-fe*Oe,Hn=ee*ft-me*Oe,oa=fe*ft-me*$e,aa=yt*Fr-Ft*xr,Na=yt*fn-tr*xr,ba=yt*nn-Kt*xr,Sa=Ft*fn-tr*Fr,ni=Ft*nn-Kt*Fr,Pa=tr*nn-Kt*fn,za=Sn*Pa-xn*ni+Mn*Sa+In*ba-Hn*Na+oa*aa;return za?(L[0]=(Oe*Pa-$e*ni+ft*Sa)*(za=1/za),L[1]=(fe*ni-ee*Pa-me*Sa)*za,L[2]=(Fr*oa-fn*Hn+nn*In)*za,L[3]=(tr*Hn-Ft*oa-Kt*In)*za,L[4]=($e*ba-Te*Pa-ft*Na)*za,L[5]=(B*Pa-fe*ba+me*Na)*za,L[6]=(fn*Mn-xr*oa-nn*xn)*za,L[7]=(yt*oa-tr*Mn+Kt*xn)*za,L[8]=(Te*ni-Oe*ba+ft*aa)*za,L[9]=(ee*ba-B*ni-me*aa)*za,L[10]=(xr*Hn-Fr*Mn+nn*Sn)*za,L[11]=(Ft*Mn-yt*Hn-Kt*Sn)*za,L[12]=(Oe*Na-Te*Sa-$e*aa)*za,L[13]=(B*Sa-ee*Na+fe*aa)*za,L[14]=(Fr*xn-xr*In-fn*Sn)*za,L[15]=(yt*In-Ft*xn+tr*Sn)*za,L):null},e.isChar=Ve,e.isMapboxURL=Le,e.keysDifference=function l(L,P){var B=[];for(var ee in L)ee in P||B.push(ee);return B},e.makeRequest=je,e.mapObject=C,e.mercatorXfromLng=Ev,e.mercatorYfromLat=Lv,e.mercatorZfromAltitude=Pv,e.mul=Qf,e.multiply=uc,e.mvt=Oc,e.normalize=function of(L,P){var B=P[0],ee=P[1],fe=P[2],me=B*B+ee*ee+fe*fe;return me>0&&(me=1/Math.sqrt(me)),L[0]=P[0]*me,L[1]=P[1]*me,L[2]=P[2]*me,L},e.number=co,e.offscreenCanvasSupported=jr,e.ortho=function Kf(L,P,B,ee,fe,me,Te){var Oe=1/(P-B),$e=1/(ee-fe),ft=1/(me-Te);return L[0]=-2*Oe,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=-2*$e,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=2*ft,L[11]=0,L[12]=(P+B)*Oe,L[13]=(fe+ee)*$e,L[14]=(Te+me)*ft,L[15]=1,L},e.parseGlyphPBF=function zd(L){return new If(L).readFields(Dd,[])},e.pbf=If,e.performSymbolLayout=function qd(L,P,B,ee,fe,me,Te){L.createArrays(),L.tilePixelRatio=Ua/(512*L.overscaling),L.compareText={},L.iconsNeedLinear=!1;var $e=L.layers[0].layout,ft=L.layers[0]._unevaluatedLayout._values,yt={};if("composite"===L.textSizeData.kind){var Ft=L.textSizeData,Kt=Ft.maxZoom;yt.compositeTextSizes=[ft["text-size"].possiblyEvaluate(new hi(Ft.minZoom),Te),ft["text-size"].possiblyEvaluate(new hi(Kt),Te)]}if("composite"===L.iconSizeData.kind){var xr=L.iconSizeData,fn=xr.maxZoom;yt.compositeIconSizes=[ft["icon-size"].possiblyEvaluate(new hi(xr.minZoom),Te),ft["icon-size"].possiblyEvaluate(new hi(fn),Te)]}yt.layoutTextSize=ft["text-size"].possiblyEvaluate(new hi(L.zoom+1),Te),yt.layoutIconSize=ft["icon-size"].possiblyEvaluate(new hi(L.zoom+1),Te),yt.textMaxSize=ft["text-size"].possiblyEvaluate(new hi(18));for(var nn=24*$e.get("text-line-height"),Sn="map"===$e.get("text-rotation-alignment")&&"point"!==$e.get("symbol-placement"),xn=$e.get("text-keep-upright"),Mn=$e.get("text-size"),In=function(){var aa=oa[Hn],Na=$e.get("text-font").evaluate(aa,{},Te).join(","),ba=Mn.evaluate(aa,{},Te),Sa=yt.layoutTextSize.evaluate(aa,{},Te),ni=yt.layoutIconSize.evaluate(aa,{},Te),Pa={horizontal:{},vertical:void 0},za=aa.text,vi=[0,0];if(za){var ei=za.toString(),Ii=24*$e.get("text-letter-spacing").evaluate(aa,{},Te),ji=function dt(L){for(var P=0,B=L;P<B.length;P+=1)if(!zt(B[P].charCodeAt(0)))return!1;return!0}(ei)?Ii:0,zi=$e.get("text-anchor").evaluate(aa,{},Te),Fi=$e.get("text-variable-anchor");if(!Fi){var Li=$e.get("text-radial-offset").evaluate(aa,{},Te);vi=Li?mv(zi,[24*Li,yh]):$e.get("text-offset").evaluate(aa,{},Te).map(function(tc){return 24*tc})}var eo=Sn?"center":$e.get("text-justify").evaluate(aa,{},Te),lo=$e.get("symbol-placement"),To="point"===lo?24*$e.get("text-max-width").evaluate(aa,{},Te):0,Po=function(){L.allowVerticalPlacement&&_t(ei)&&(Pa.vertical=Of(za,P,B,fe,Na,To,nn,zi,"left",ji,vi,Rl.vertical,!0,lo,Sa,ba))};if(!Sn&&Fi){for(var ts="auto"===eo?Fi.map(function(tc){return mh(tc)}):[eo],Bo=!1,Cs=0;Cs<ts.length;Cs++){var Es=ts[Cs];if(!Pa.horizontal[Es])if(Bo)Pa.horizontal[Es]=Pa.horizontal[0];else{var rs=Of(za,P,B,fe,Na,To,nn,"center",Es,ji,vi,Rl.horizontal,!1,lo,Sa,ba);rs&&(Pa.horizontal[Es]=rs,Bo=1===rs.positionedLines.length)}}Po()}else{"auto"===eo&&(eo=mh(zi));var Bs=Of(za,P,B,fe,Na,To,nn,zi,eo,ji,vi,Rl.horizontal,!1,lo,Sa,ba);Bs&&(Pa.horizontal[eo]=Bs),Po(),_t(ei)&&Sn&&xn&&(Pa.vertical=Of(za,P,B,fe,Na,To,nn,zi,eo,ji,vi,Rl.vertical,!1,lo,Sa,ba))}}var Us=void 0,Jo=!1;if(aa.icon&&aa.icon.name){var Vs=ee[aa.icon.name];Vs&&(Us=function Gd(L,P,B){var ee=dh(B),$e=P[0]-L.displaySize[0]*ee.horizontalAlign,yt=P[1]-L.displaySize[1]*ee.verticalAlign;return{image:L,top:yt,bottom:yt+L.displaySize[1],left:$e,right:$e+L.displaySize[0]}}(fe[aa.icon.name],$e.get("icon-offset").evaluate(aa,{},Te),$e.get("icon-anchor").evaluate(aa,{},Te)),Jo=Vs.sdf,void 0===L.sdfIcons?L.sdfIcons=Vs.sdf:L.sdfIcons!==Vs.sdf&&F("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Vs.pixelRatio!==L.pixelRatio||0!==$e.get("icon-rotate").constantOr(1))&&(L.iconsNeedLinear=!0))}var Il=bv(Pa.horizontal)||Pa.vertical;L.iconsInText=!!Il&&Il.iconsInText,(Il||Us)&&function e0(L,P,B,ee,fe,me,Te,Oe,$e,ft,yt){var Ft=me.textMaxSize.evaluate(P,{});void 0===Ft&&(Ft=Te);var Pa,tr=L.layers[0].layout,Kt=tr.get("icon-offset").evaluate(P,{},yt),xr=bv(B.horizontal),Fr=24,fn=Te/Fr,nn=L.tilePixelRatio*fn,Sn=L.tilePixelRatio*Ft/Fr,xn=L.tilePixelRatio*Oe,Mn=L.tilePixelRatio*tr.get("symbol-spacing"),In=tr.get("text-padding")*L.tilePixelRatio,Hn=tr.get("icon-padding")*L.tilePixelRatio,oa=tr.get("text-max-angle")/180*Math.PI,aa="map"===tr.get("text-rotation-alignment")&&"point"!==tr.get("symbol-placement"),Na="map"===tr.get("icon-rotation-alignment")&&"point"!==tr.get("symbol-placement"),ba=tr.get("symbol-placement"),Sa=Mn/2,ni=tr.get("icon-text-fit");ee&&"none"!==ni&&(L.allowVerticalPlacement&&B.vertical&&(Pa=sv(ee,B.vertical,ni,tr.get("icon-text-fit-padding"),Kt,fn)),xr&&(ee=sv(ee,xr,ni,tr.get("icon-text-fit-padding"),Kt,fn)));var za=function(Kc,vu){vu.x<0||vu.x>=Ua||vu.y<0||vu.y>=Ua||function t0(L,P,B,ee,fe,me,Te,Oe,$e,ft,yt,Ft,tr,Kt,xr,Fr,fn,nn,Sn,xn,Mn,In,Hn,oa,aa){var Na,Sa,ni,Pa,za,ba=L.addToLineVertexArray(P,B),vi=0,ei=0,Ii=0,ji=0,zi=-1,Fi=-1,Li={},eo=Re(""),lo=0,To=0;if(void 0===Oe._unevaluatedLayout.getValue("text-radial-offset")?(lo=(Na=Oe.layout.get("text-offset").evaluate(Mn,{},oa).map(function(bf){return 24*bf}))[0],To=Na[1]):(lo=24*Oe.layout.get("text-radial-offset").evaluate(Mn,{},oa),To=yh),L.allowVerticalPlacement&&ee.vertical){var ts=Oe.layout.get("text-rotate").evaluate(Mn,{},oa)+90;Pa=new Vf($e,P,ft,yt,Ft,ee.vertical,tr,Kt,xr,ts),Te&&(za=new Vf($e,P,ft,yt,Ft,Te,fn,nn,xr,ts))}if(fe){var Cs=Oe.layout.get("icon-rotate").evaluate(Mn,{}),Es="none"!==Oe.layout.get("icon-text-fit"),rs=gv(fe,Cs,Hn,Es),Bs=Te?gv(Te,Cs,Hn,Es):void 0;ni=new Vf($e,P,ft,yt,Ft,fe,fn,nn,!1,Cs),vi=4*rs.length;var Us=L.iconSizeData,Jo=null;"source"===Us.kind?(Jo=[Su*Oe.layout.get("icon-size").evaluate(Mn,{})])[0]>fc&&F(L.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===Us.kind&&((Jo=[Su*In.compositeIconSizes[0].evaluate(Mn,{},oa),Su*In.compositeIconSizes[1].evaluate(Mn,{},oa)])[0]>fc||Jo[1]>fc)&&F(L.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),L.addSymbols(L.icon,rs,Jo,xn,Sn,Mn,!1,P,ba.lineStartIndex,ba.lineLength,-1,oa),zi=L.icon.placedSymbolArray.length-1,Bs&&(ei=4*Bs.length,L.addSymbols(L.icon,Bs,Jo,xn,Sn,Mn,Rl.vertical,P,ba.lineStartIndex,ba.lineLength,-1,oa),Fi=L.icon.placedSymbolArray.length-1)}for(var Vs in ee.horizontal){var Il=ee.horizontal[Vs];if(!Sa){eo=Re(Il.text);var tc=Oe.layout.get("text-rotate").evaluate(Mn,{},oa);Sa=new Vf($e,P,ft,yt,Ft,Il,tr,Kt,xr,tc)}var vc=1===Il.positionedLines.length;if(Ii+=xv(L,P,Il,me,Oe,xr,Mn,Fr,ba,ee.vertical?Rl.horizontal:Rl.horizontalOnly,vc?Object.keys(ee.horizontal):[Vs],Li,zi,In,oa),vc)break}ee.vertical&&(ji+=xv(L,P,ee.vertical,me,Oe,xr,Mn,Fr,ba,Rl.vertical,["vertical"],Li,Fi,In,oa));var pc=Sa?Sa.boxStartIndex:L.collisionBoxArray.length,dc=Sa?Sa.boxEndIndex:L.collisionBoxArray.length,Kc=Pa?Pa.boxStartIndex:L.collisionBoxArray.length,vu=Pa?Pa.boxEndIndex:L.collisionBoxArray.length,Wf=ni?ni.boxStartIndex:L.collisionBoxArray.length,Ah=ni?ni.boxEndIndex:L.collisionBoxArray.length,Xf=za?za.boxStartIndex:L.collisionBoxArray.length,Mh=za?za.boxEndIndex:L.collisionBoxArray.length,jl=-1,Qc=function(bf,Fv){return bf&&bf.circleDiameter?Math.max(bf.circleDiameter,Fv):Fv};jl=Qc(Sa,jl),jl=Qc(Pa,jl),jl=Qc(ni,jl);var jf=(jl=Qc(za,jl))>-1?1:0;jf&&(jl*=aa/24),L.glyphOffsetArray.length>=Xi.MAX_GLYPHS&&F("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Mn.sortKey&&L.addToSortKeyRanges(L.symbolInstances.length,Mn.sortKey),L.symbolInstances.emplaceBack(P.x,P.y,Li.right>=0?Li.right:-1,Li.center>=0?Li.center:-1,Li.left>=0?Li.left:-1,Li.vertical||-1,zi,Fi,eo,pc,dc,Kc,vu,Wf,Ah,Xf,Mh,ft,Ii,ji,vi,ei,jf,0,tr,lo,To,jl)}(L,vu,Kc,B,ee,fe,Pa,L.layers[0],L.collisionBoxArray,P.index,P.sourceLayerIndex,L.index,nn,In,aa,$e,xn,Hn,Na,Kt,P,me,ft,yt,Te)};if("line"===ba)for(var vi=0,ei=dv(P.geometry,0,0,Ua,Ua);vi<ei.length;vi+=1)for(var Ii=ei[vi],zi=0,Fi=Wd(Ii,Mn,oa,B.vertical||xr,ee,Fr,Sn,L.overscaling,Ua);zi<Fi.length;zi+=1){var Li=Fi[zi];(!xr||!r0(L,xr.text,Sa,Li))&&za(Ii,Li)}else if("line-center"===ba)for(var lo=0,To=P.geometry;lo<To.length;lo+=1){var Po=To[lo];if(Po.length>1){var ts=Yd(Po,oa,B.vertical||xr,ee,Fr,Sn);ts&&za(Po,ts)}}else if("Polygon"===P.type)for(var Bo=0,Cs=sh(P.geometry,0);Bo<Cs.length;Bo+=1){var Es=Cs[Bo],rs=Jd(Es,16);za(Es[0],new Vc(rs.x,rs.y,0))}else if("LineString"===P.type)for(var Bs=0,Us=P.geometry;Bs<Us.length;Bs+=1){var Jo=Us[Bs];za(Jo,new Vc(Jo[0].x,Jo[0].y,0))}else if("Point"===P.type)for(var Vs=0,Il=P.geometry;Vs<Il.length;Vs+=1)for(var vc=0,pc=Il[Vs];vc<pc.length;vc+=1){var dc=pc[vc];za([dc],new Vc(dc.x,dc.y,0))}}(L,aa,Pa,Us,ee,yt,Sa,ni,vi,Jo,Te)},Hn=0,oa=L.features;Hn<oa.length;Hn+=1)In();me&&L.generateCollisionDebugBuffers()},e.perspective=function af(L,P,B,ee,fe){var Te,me=1/Math.tan(P/2);return L[0]=me/B,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=me,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[11]=-1,L[12]=0,L[13]=0,L[15]=0,null!=fe&&fe!==1/0?(L[10]=(fe+ee)*(Te=1/(ee-fe)),L[14]=2*fe*ee*Te):(L[10]=-1,L[14]=-2*ee),L},e.pick=function A(L,P){for(var B={},ee=0;ee<P.length;ee++){var fe=P[ee];fe in L&&(B[fe]=L[fe])}return B},e.plugin=Ya,e.polygonIntersectsPolygon=li,e.postMapLoadEvent=wt,e.postTurnstileEvent=Zt,e.potpack=ev,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=ka,e.registerForPluginStateChange=function(L){return L({pluginStatus:Vr,pluginURL:Rn}),ha.on("pluginStateChange",L),L},e.rotate=function Ss(L,P,B){var ee=P[0],fe=P[1],me=P[2],Te=P[3],Oe=Math.sin(B),$e=Math.cos(B);return L[0]=ee*$e+me*Oe,L[1]=fe*$e+Te*Oe,L[2]=ee*-Oe+me*$e,L[3]=fe*-Oe+Te*$e,L},e.rotateX=function tl(L,P,B){var ee=Math.sin(B),fe=Math.cos(B),me=P[4],Te=P[5],Oe=P[6],$e=P[7],ft=P[8],yt=P[9],Ft=P[10],tr=P[11];return P!==L&&(L[0]=P[0],L[1]=P[1],L[2]=P[2],L[3]=P[3],L[12]=P[12],L[13]=P[13],L[14]=P[14],L[15]=P[15]),L[4]=me*fe+ft*ee,L[5]=Te*fe+yt*ee,L[6]=Oe*fe+Ft*ee,L[7]=$e*fe+tr*ee,L[8]=ft*fe-me*ee,L[9]=yt*fe-Te*ee,L[10]=Ft*fe-Oe*ee,L[11]=tr*fe-$e*ee,L},e.rotateZ=function Rc(L,P,B){var ee=Math.sin(B),fe=Math.cos(B),me=P[0],Te=P[1],Oe=P[2],$e=P[3],ft=P[4],yt=P[5],Ft=P[6],tr=P[7];return P!==L&&(L[8]=P[8],L[9]=P[9],L[10]=P[10],L[11]=P[11],L[12]=P[12],L[13]=P[13],L[14]=P[14],L[15]=P[15]),L[0]=me*fe+ft*ee,L[1]=Te*fe+yt*ee,L[2]=Oe*fe+Ft*ee,L[3]=$e*fe+tr*ee,L[4]=ft*fe-me*ee,L[5]=yt*fe-Te*ee,L[6]=Ft*fe-Oe*ee,L[7]=tr*fe-$e*ee,L},e.scale=function el(L,P,B){var ee=B[0],fe=B[1],me=B[2];return L[0]=P[0]*ee,L[1]=P[1]*ee,L[2]=P[2]*ee,L[3]=P[3]*ee,L[4]=P[4]*fe,L[5]=P[5]*fe,L[6]=P[6]*fe,L[7]=P[7]*fe,L[8]=P[8]*me,L[9]=P[9]*me,L[10]=P[10]*me,L[11]=P[11]*me,L[12]=P[12],L[13]=P[13],L[14]=P[14],L[15]=P[15],L},e.scale$1=function Hv(L,P,B){return L[0]=P[0]*B,L[1]=P[1]*B,L[2]=P[2]*B,L[3]=P[3]*B,L},e.scale$2=function eh(L,P,B){return L[0]=P[0]*B,L[1]=P[1]*B,L[2]=P[2]*B,L},e.setCacheLimits=function Hr(L,P){vt=L,Qe=P},e.setRTLTextPlugin=function(L,P,B){if(void 0===B&&(B=!1),Vr===sn_deferred||Vr===sn_loading||Vr===sn_loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");Rn=te.resolveURL(L),Vr=sn_deferred,hn=P,da(),B||Oa()},e.sphericalToCartesian=function U(L){var P=L[0],B=L[1],ee=L[2];return B+=90,B*=Math.PI/180,ee*=Math.PI/180,{x:P*Math.cos(B)*Math.sin(ee),y:P*Math.sin(B)*Math.sin(ee),z:P*Math.cos(ee)}},e.sqrLen=Wv,e.styleSpec=Ht,e.sub=Uv,e.symbolSize=Zd,e.transformMat3=function Bv(L,P,B){var ee=P[0],fe=P[1],me=P[2];return L[0]=ee*B[0]+fe*B[3]+me*B[6],L[1]=ee*B[1]+fe*B[4]+me*B[7],L[2]=ee*B[2]+fe*B[5]+me*B[8],L},e.transformMat4=Cf,e.translate=function Lo(L,P,B){var Te,Oe,$e,ft,yt,Ft,tr,Kt,xr,Fr,fn,nn,ee=B[0],fe=B[1],me=B[2];return P===L?(L[12]=P[0]*ee+P[4]*fe+P[8]*me+P[12],L[13]=P[1]*ee+P[5]*fe+P[9]*me+P[13],L[14]=P[2]*ee+P[6]*fe+P[10]*me+P[14],L[15]=P[3]*ee+P[7]*fe+P[11]*me+P[15]):(Oe=P[1],$e=P[2],ft=P[3],yt=P[4],Ft=P[5],tr=P[6],Kt=P[7],xr=P[8],Fr=P[9],fn=P[10],nn=P[11],L[0]=Te=P[0],L[1]=Oe,L[2]=$e,L[3]=ft,L[4]=yt,L[5]=Ft,L[6]=tr,L[7]=Kt,L[8]=xr,L[9]=Fr,L[10]=fn,L[11]=nn,L[12]=Te*ee+yt*fe+xr*me+P[12],L[13]=Oe*ee+Ft*fe+Fr*me+P[13],L[14]=$e*ee+tr*fe+fn*me+P[14],L[15]=ft*ee+Kt*fe+nn*me+P[15]),L},e.triggerPluginCompletionEvent=la,e.uniqueId=M,e.validateCustomStyleLayer=function g0(L){var P=[],B=L.id;return void 0===B&&P.push({message:"layers."+B+': missing required property "id"'}),void 0===L.render&&P.push({message:"layers."+B+': missing required method "render"'}),L.renderingMode&&"2d"!==L.renderingMode&&"3d"!==L.renderingMode&&P.push({message:"layers."+B+': property "renderingMode" must be either "2d" or "3d"'}),P},e.validateLight=xi,e.validateStyle=ho,e.values=function w(L){var P=[];for(var B in L)P.push(L[B]);return P},e.vectorTile=Oc,e.version=d,e.warnOnce=F,e.webpSupported=j,e.window=self,e.wrap=S}),E(0,function(e){function c(tt){var je=typeof tt;if("number"===je||"boolean"===je||"string"===je||null==tt)return JSON.stringify(tt);if(Array.isArray(tt)){for(var ct="[",ht=0,Me=tt;ht<Me.length;ht+=1)ct+=c(Me[ht])+",";return ct+"]"}for(var Je=Object.keys(tt).sort(),We="{",st=0;st<Je.length;st++)We+=JSON.stringify(Je[st])+":"+c(tt[Je[st]])+",";return We+"}"}function d(tt){for(var je="",ct=0,ht=e.refProperties;ct<ht.length;ct+=1)je+="/"+c(tt[ht[ct]]);return je}var t=function(je){this.keyCache={},je&&this.replace(je)};t.prototype.replace=function(je){this._layerConfigs={},this._layers={},this.update(je,[])},t.prototype.update=function(je,ct){for(var ht=this,Me=0,Se=je;Me<Se.length;Me+=1){var Je=Se[Me];this._layerConfigs[Je.id]=Je;var We=this._layers[Je.id]=e.createStyleLayer(Je);We._featureFilter=e.featureFilter(We.filter),this.keyCache[Je.id]&&delete this.keyCache[Je.id]}for(var st=0,lt=ct;st<lt.length;st+=1){var pt=lt[st];delete this.keyCache[pt],delete this._layerConfigs[pt],delete this._layers[pt]}this.familiesBySource={};for(var Dt=0,Gt=function n(tt,je){for(var ct={},ht=0;ht<tt.length;ht++){var Me=je&&je[tt[ht].id]||d(tt[ht]);je&&(je[tt[ht].id]=Me);var Se=ct[Me];Se||(Se=ct[Me]=[]),Se.push(tt[ht])}var Je=[];for(var We in ct)Je.push(ct[We]);return Je}(e.values(this._layerConfigs),this.keyCache);Dt<Gt.length;Dt+=1){var pr=Gt[Dt].map(function(wr){return ht._layers[wr.id]}),Jr=pr[0];if("none"!==Jr.visibility){var Lr=Jr.source||"",Ar=this.familiesBySource[Lr];Ar||(Ar=this.familiesBySource[Lr]={});var en=Jr.sourceLayer||"_geojsonTileLayer",mr=Ar[en];mr||(mr=Ar[en]=[]),mr.push(pr)}}};var a=function(je){var ct={},ht=[];for(var Me in je){var Se=je[Me],Je=ct[Me]={};for(var We in Se){var st=Se[+We];if(st&&0!==st.bitmap.width&&0!==st.bitmap.height){var lt={x:0,y:0,w:st.bitmap.width+2,h:st.bitmap.height+2};ht.push(lt),Je[We]={rect:lt,metrics:st.metrics}}}}var pt=e.potpack(ht),Gt=new e.AlphaImage({width:pt.w||1,height:pt.h||1});for(var fr in je){var pr=je[fr];for(var Jr in pr){var Lr=pr[+Jr];if(Lr&&0!==Lr.bitmap.width&&0!==Lr.bitmap.height){var Ar=ct[fr][Jr].rect;e.AlphaImage.copy(Lr.bitmap,Gt,{x:0,y:0},{x:Ar.x+1,y:Ar.y+1},Lr.bitmap)}}}this.image=Gt,this.positions=ct};e.register("GlyphAtlas",a);var r=function(je){this.tileID=new e.OverscaledTileID(je.tileID.overscaledZ,je.tileID.wrap,je.tileID.canonical.z,je.tileID.canonical.x,je.tileID.canonical.y),this.uid=je.uid,this.zoom=je.zoom,this.pixelRatio=je.pixelRatio,this.tileSize=je.tileSize,this.source=je.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=je.showCollisionBoxes,this.collectResourceTiming=!!je.collectResourceTiming,this.returnDependencies=!!je.returnDependencies,this.promoteId=je.promoteId};function g(tt,je,ct){for(var ht=new e.EvaluationParameters(je),Me=0,Se=tt;Me<Se.length;Me+=1)Se[Me].recalculate(ht,ct)}function s(tt,je){var ct=e.getArrayBuffer(tt.request,function(ht,Me,Se,Je){ht?je(ht):Me&&je(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(Me)),rawData:Me,cacheControl:Se,expires:Je})});return function(){ct.cancel(),je()}}r.prototype.parse=function(je,ct,ht,Me,Se){var Je=this;this.status="parsing",this.data=je,this.collisionBoxArray=new e.CollisionBoxArray;var We=new e.DictionaryCoder(Object.keys(je.layers).sort()),st=new e.FeatureIndex(this.tileID,this.promoteId);st.bucketLayerIDs=[];var lt={},pt={featureIndex:st,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ht},Ct=ct.familiesBySource[this.source];for(var Dt in Ct){var Gt=je.layers[Dt];if(Gt){1===Gt.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+Dt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var fr=We.encode(Dt),pr=[],Jr=0;Jr<Gt.length;Jr++){var Lr=Gt.feature(Jr),Ar=st.getId(Lr,Dt);pr.push({feature:Lr,id:Ar,index:Jr,sourceLayerIndex:fr})}for(var en=0,mr=Ct[Dt];en<mr.length;en+=1){var wr=mr[en],Wr=wr[0];Wr.minzoom&&this.zoom<Math.floor(Wr.minzoom)||Wr.maxzoom&&this.zoom>=Wr.maxzoom||"none"===Wr.visibility||(g(wr,this.zoom,ht),(lt[Wr.id]=Wr.createBucket({index:st.bucketLayerIDs.length,layers:wr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:fr,sourceID:this.source})).populate(pr,pt,this.tileID.canonical),st.bucketLayerIDs.push(wr.map(function(kr){return kr.id})))}}}var Cr,it,It,Qt,ir=e.mapObject(pt.glyphDependencies,function(kr){return Object.keys(kr).map(Number)});Object.keys(ir).length?Me.send("getGlyphs",{uid:this.uid,stacks:ir},function(kr,Zr){Cr||(Cr=kr,it=Zr,Ir.call(Je))}):it={};var Or=Object.keys(pt.iconDependencies);Or.length?Me.send("getImages",{icons:Or,source:this.source,tileID:this.tileID,type:"icons"},function(kr,Zr){Cr||(Cr=kr,It=Zr,Ir.call(Je))}):It={};var qr=Object.keys(pt.patternDependencies);function Ir(){if(Cr)return Se(Cr);if(it&&It&&Qt){var kr=new a(it),Zr=new e.ImageAtlas(It,Qt);for(var An in lt){var wn=lt[An];wn instanceof e.SymbolBucket?(g(wn.layers,this.zoom,ht),e.performSymbolLayout(wn,it,kr.positions,It,Zr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):wn.hasPattern&&(wn instanceof e.LineBucket||wn instanceof e.FillBucket||wn instanceof e.FillExtrusionBucket)&&(g(wn.layers,this.zoom,ht),wn.addFeatures(pt,this.tileID.canonical,Zr.patternPositions))}this.status="done",Se(null,{buckets:e.values(lt).filter(function(Zn){return!Zn.isEmpty()}),featureIndex:st,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:kr.image,imageAtlas:Zr,glyphMap:this.returnDependencies?it:null,iconMap:this.returnDependencies?It:null,glyphPositions:this.returnDependencies?kr.positions:null})}}qr.length?Me.send("getImages",{icons:qr,source:this.source,tileID:this.tileID,type:"patterns"},function(kr,Zr){Cr||(Cr=kr,Qt=Zr,Ir.call(Je))}):Qt={},Ir.call(this)};var b=function(je,ct,ht,Me){this.actor=je,this.layerIndex=ct,this.availableImages=ht,this.loadVectorData=Me||s,this.loading={},this.loaded={}};b.prototype.loadTile=function(je,ct){var ht=this,Me=je.uid;this.loading||(this.loading={});var Se=!!(je&&je.request&&je.request.collectResourceTiming)&&new e.RequestPerformance(je.request),Je=this.loading[Me]=new r(je);Je.abort=this.loadVectorData(je,function(We,st){if(delete ht.loading[Me],We||!st)return Je.status="done",ht.loaded[Me]=Je,ct(We);var lt=st.rawData,pt={};st.expires&&(pt.expires=st.expires),st.cacheControl&&(pt.cacheControl=st.cacheControl);var Ct={};if(Se){var Dt=Se.finish();Dt&&(Ct.resourceTiming=JSON.parse(JSON.stringify(Dt)))}Je.vectorTile=st.vectorTile,Je.parse(st.vectorTile,ht.layerIndex,ht.availableImages,ht.actor,function(Gt,fr){if(Gt||!fr)return ct(Gt);ct(null,e.extend({rawTileData:lt.slice(0)},fr,pt,Ct))}),ht.loaded=ht.loaded||{},ht.loaded[Me]=Je})},b.prototype.reloadTile=function(je,ct){var ht=this,Me=this.loaded,Se=je.uid,Je=this;if(Me&&Me[Se]){var We=Me[Se];We.showCollisionBoxes=je.showCollisionBoxes;var st=function(lt,pt){var Ct=We.reloadCallback;Ct&&(delete We.reloadCallback,We.parse(We.vectorTile,Je.layerIndex,ht.availableImages,Je.actor,Ct)),ct(lt,pt)};"parsing"===We.status?We.reloadCallback=st:"done"===We.status&&(We.vectorTile?We.parse(We.vectorTile,this.layerIndex,this.availableImages,this.actor,st):st())}},b.prototype.abortTile=function(je,ct){var ht=this.loading,Me=je.uid;ht&&ht[Me]&&ht[Me].abort&&(ht[Me].abort(),delete ht[Me]),ct()},b.prototype.removeTile=function(je,ct){var ht=this.loaded,Me=je.uid;ht&&ht[Me]&&delete ht[Me],ct()};var x=e.window.ImageBitmap,S=function(){this.loaded={}};S.prototype.loadTile=function(je,ct){var ht=je.uid,Me=je.encoding,Se=je.rawImageData,Je=x&&Se instanceof x?this.getImageData(Se):Se,We=new e.DEMData(ht,Je,Me);this.loaded=this.loaded||{},this.loaded[ht]=We,ct(null,We)},S.prototype.getImageData=function(je){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(je.width,je.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=je.width,this.offscreenCanvas.height=je.height,this.offscreenCanvasContext.drawImage(je,0,0,je.width,je.height);var ct=this.offscreenCanvasContext.getImageData(-1,-1,je.width+2,je.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:ct.width,height:ct.height},ct.data)},S.prototype.removeTile=function(je){var ct=this.loaded,ht=je.uid;ct&&ct[ht]&&delete ct[ht]};var p=function w(tt,je){var ht,ct=tt&&tt.type;if("FeatureCollection"===ct)for(ht=0;ht<tt.features.length;ht++)w(tt.features[ht],je);else if("GeometryCollection"===ct)for(ht=0;ht<tt.geometries.length;ht++)w(tt.geometries[ht],je);else if("Feature"===ct)w(tt.geometry,je);else if("Polygon"===ct)l(tt.coordinates,je);else if("MultiPolygon"===ct)for(ht=0;ht<tt.coordinates.length;ht++)l(tt.coordinates[ht],je);return tt};function l(tt,je){if(0!==tt.length){y(tt[0],je);for(var ct=1;ct<tt.length;ct++)y(tt[ct],!je)}}function y(tt,je){for(var ct=0,ht=0,Me=tt.length,Se=Me-1;ht<Me;Se=ht++)ct+=(tt[ht][0]-tt[Se][0])*(tt[Se][1]+tt[ht][1]);ct>=0!=!!je&&tt.reverse()}var A=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,T=function(je){this._feature=je,this.extent=e.EXTENT,this.type=je.type,this.properties=je.tags,"id"in je&&!isNaN(je.id)&&(this.id=parseInt(je.id,10))};T.prototype.loadGeometry=function(){if(1===this._feature.type){for(var je=[],ct=0,ht=this._feature.geometry;ct<ht.length;ct+=1){var Me=ht[ct];je.push([new e.Point$1(Me[0],Me[1])])}return je}for(var Se=[],Je=0,We=this._feature.geometry;Je<We.length;Je+=1){for(var lt=[],pt=0,Ct=We[Je];pt<Ct.length;pt+=1){var Dt=Ct[pt];lt.push(new e.Point$1(Dt[0],Dt[1]))}Se.push(lt)}return Se},T.prototype.toGeoJSON=function(je,ct,ht){return A.call(this,je,ct,ht)};var M=function(je){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=je.length,this._features=je};M.prototype.feature=function(je){return new T(this._features[je])};var f=e.vectorTile.VectorTileFeature,u=h;function h(tt,je){this.options=je||{},this.features=tt,this.length=tt.length}function o(tt,je){this.id="number"==typeof tt.id?tt.id:void 0,this.type=tt.type,this.rawGeometry=1===tt.type?[tt.geometry]:tt.geometry,this.properties=tt.tags,this.extent=je||4096}h.prototype.feature=function(tt){return new o(this.features[tt],this.options.extent)},o.prototype.loadGeometry=function(){var tt=this.rawGeometry;this.geometry=[];for(var je=0;je<tt.length;je++){for(var ct=tt[je],ht=[],Me=0;Me<ct.length;Me++)ht.push(new e.Point$1(ct[Me][0],ct[Me][1]));this.geometry.push(ht)}return this.geometry},o.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var tt=this.geometry,je=1/0,ct=-1/0,ht=1/0,Me=-1/0,Se=0;Se<tt.length;Se++)for(var Je=tt[Se],We=0;We<Je.length;We++){var st=Je[We];je=Math.min(je,st.x),ct=Math.max(ct,st.x),ht=Math.min(ht,st.y),Me=Math.max(Me,st.y)}return[je,ht,ct,Me]},o.prototype.toGeoJSON=f.prototype.toGeoJSON;var C=I,z=function F(tt,je){je=je||{};var ct={};for(var ht in tt)ct[ht]=new u(tt[ht].features,je),ct[ht].name=ht,ct[ht].version=je.version,ct[ht].extent=je.extent;return I({layers:ct})},O=u;function I(tt){var je=new e.pbf;return function D(tt,je){for(var ct in tt.layers)je.writeMessage(3,N,tt.layers[ct])}(tt,je),je.finish()}function N(tt,je){je.writeVarintField(15,tt.version||1),je.writeStringField(1,tt.name||""),je.writeVarintField(5,tt.extent||4096);var ct,ht={keys:[],values:[],keycache:{},valuecache:{}};for(ct=0;ct<tt.length;ct++)ht.feature=tt.feature(ct),je.writeMessage(2,U,ht);var Me=ht.keys;for(ct=0;ct<Me.length;ct++)je.writeStringField(3,Me[ct]);var Se=ht.values;for(ct=0;ct<Se.length;ct++)je.writeMessage(4,W,Se[ct])}function U(tt,je){var ct=tt.feature;void 0!==ct.id&&je.writeVarintField(1,ct.id),je.writeMessage(2,X,tt),je.writeVarintField(3,ct.type),je.writeMessage(4,ne,ct)}function X(tt,je){var ct=tt.feature,ht=tt.keys,Me=tt.values,Se=tt.keycache,Je=tt.valuecache;for(var We in ct.properties){var st=Se[We];void 0===st&&(ht.push(We),Se[We]=st=ht.length-1),je.writeVarint(st);var lt=ct.properties[We],pt=typeof lt;"string"!==pt&&"boolean"!==pt&&"number"!==pt&&(lt=JSON.stringify(lt));var Ct=pt+":"+lt,Dt=Je[Ct];void 0===Dt&&(Me.push(lt),Je[Ct]=Dt=Me.length-1),je.writeVarint(Dt)}}function oe(tt,je){return(je<<3)+(7&tt)}function se(tt){return tt<<1^tt>>31}function ne(tt,je){for(var ct=tt.loadGeometry(),ht=tt.type,Me=0,Se=0,Je=ct.length,We=0;We<Je;We++){var st=ct[We],lt=1;1===ht&&(lt=st.length),je.writeVarint(oe(1,lt));for(var pt=3===ht?st.length-1:st.length,Ct=0;Ct<pt;Ct++){1===Ct&&1!==ht&&je.writeVarint(oe(2,pt-1));var Dt=st[Ct].x-Me,Gt=st[Ct].y-Se;je.writeVarint(se(Dt)),je.writeVarint(se(Gt)),Me+=Dt,Se+=Gt}3===ht&&je.writeVarint(oe(7,1))}}function W(tt,je){var ct=typeof tt;"string"===ct?je.writeStringField(1,tt):"boolean"===ct?je.writeBooleanField(7,tt):"number"===ct&&(tt%1!=0?je.writeDoubleField(3,tt):tt<0?je.writeSVarintField(6,tt):je.writeVarintField(5,tt))}function G(tt,je,ct,ht,Me,Se){if(!(Me-ht<=ct)){var Je=ht+Me>>1;$(tt,je,Je,ht,Me,Se%2),G(tt,je,ct,ht,Je-1,Se+1),G(tt,je,ct,Je+1,Me,Se+1)}}function $(tt,je,ct,ht,Me,Se){for(;Me>ht;){if(Me-ht>600){var Je=Me-ht+1,We=ct-ht+1,st=Math.log(Je),lt=.5*Math.exp(2*st/3),pt=.5*Math.sqrt(st*lt*(Je-lt)/Je)*(We-Je/2<0?-1:1);$(tt,je,ct,Math.max(ht,Math.floor(ct-We*lt/Je+pt)),Math.min(Me,Math.floor(ct+(Je-We)*lt/Je+pt)),Se)}var Gt=je[2*ct+Se],fr=ht,pr=Me;for(V(tt,je,ht,ct),je[2*Me+Se]>Gt&&V(tt,je,ht,Me);fr<pr;){for(V(tt,je,fr,pr),fr++,pr--;je[2*fr+Se]<Gt;)fr++;for(;je[2*pr+Se]>Gt;)pr--}je[2*ht+Se]===Gt?V(tt,je,ht,pr):V(tt,je,++pr,Me),pr<=ct&&(ht=pr+1),ct<=pr&&(Me=pr-1)}}function V(tt,je,ct,ht){H(tt,ct,ht),H(je,2*ct,2*ht),H(je,2*ct+1,2*ht+1)}function H(tt,je,ct){var ht=tt[je];tt[je]=tt[ct],tt[ct]=ht}function Y(tt,je,ct,ht){var Me=tt-ct,Se=je-ht;return Me*Me+Se*Se}C.fromVectorTileJs=I,C.fromGeojsonVt=z,C.GeoJSONWrapper=O;var te=function(tt){return tt[0]},J=function(tt){return tt[1]},j=function(je,ct,ht,Me,Se){void 0===ct&&(ct=te),void 0===ht&&(ht=J),void 0===Me&&(Me=64),void 0===Se&&(Se=Float64Array),this.nodeSize=Me,this.points=je;for(var Je=je.length<65536?Uint16Array:Uint32Array,We=this.ids=new Je(je.length),st=this.coords=new Se(2*je.length),lt=0;lt<je.length;lt++)We[lt]=lt,st[2*lt]=ct(je[lt]),st[2*lt+1]=ht(je[lt]);G(We,st,Me,0,We.length-1,0)};j.prototype.range=function(je,ct,ht,Me){return function q(tt,je,ct,ht,Me,Se,Je){for(var lt,pt,We=[0,tt.length-1,0],st=[];We.length;){var Ct=We.pop(),Dt=We.pop(),Gt=We.pop();if(Dt-Gt<=Je)for(var fr=Gt;fr<=Dt;fr++)pt=je[2*fr+1],(lt=je[2*fr])>=ct&&lt<=Me&&pt>=ht&&pt<=Se&&st.push(tt[fr]);else{var pr=Math.floor((Gt+Dt)/2);pt=je[2*pr+1],(lt=je[2*pr])>=ct&&lt<=Me&&pt>=ht&&pt<=Se&&st.push(tt[pr]);var Jr=(Ct+1)%2;(0===Ct?ct<=lt:ht<=pt)&&(We.push(Gt),We.push(pr-1),We.push(Jr)),(0===Ct?Me>=lt:Se>=pt)&&(We.push(pr+1),We.push(Dt),We.push(Jr))}}return st}(this.ids,this.coords,je,ct,ht,Me,this.nodeSize)},j.prototype.within=function(je,ct,ht){return function K(tt,je,ct,ht,Me,Se){for(var Je=[0,tt.length-1,0],We=[],st=Me*Me;Je.length;){var lt=Je.pop(),pt=Je.pop(),Ct=Je.pop();if(pt-Ct<=Se)for(var Dt=Ct;Dt<=pt;Dt++)Y(je[2*Dt],je[2*Dt+1],ct,ht)<=st&&We.push(tt[Dt]);else{var Gt=Math.floor((Ct+pt)/2),fr=je[2*Gt],pr=je[2*Gt+1];Y(fr,pr,ct,ht)<=st&&We.push(tt[Gt]);var Jr=(lt+1)%2;(0===lt?ct-Me<=fr:ht-Me<=pr)&&(Je.push(Ct),Je.push(Gt-1),Je.push(Jr)),(0===lt?ct+Me>=fr:ht+Me>=pr)&&(Je.push(Gt+1),Je.push(pt),Je.push(Jr))}}return We}(this.ids,this.coords,je,ct,ht,this.nodeSize)};var re={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(tt){return tt}},le=function(je){this.options=De(Object.create(re),je),this.trees=new Array(this.options.maxZoom+1)};function ge(tt,je,ct,ht,Me){return{x:tt,y:je,zoom:1/0,id:ct,parentId:-1,numPoints:ht,properties:Me}}function pe(tt,je){var ct=tt.geometry.coordinates,Me=ct[1];return{x:we(ct[0]),y:de(Me),zoom:1/0,index:je,parentId:-1}}function xe(tt){return{type:"Feature",id:tt.id,properties:ke(tt),geometry:{type:"Point",coordinates:[be(tt.x),Le(tt.y)]}}}function ke(tt){var je=tt.numPoints,ct=je>=1e4?Math.round(je/1e3)+"k":je>=1e3?Math.round(je/100)/10+"k":je;return De(De({},tt.properties),{cluster:!0,cluster_id:tt.id,point_count:je,point_count_abbreviated:ct})}function we(tt){return tt/360+.5}function de(tt){var je=Math.sin(tt*Math.PI/180),ct=.5-.25*Math.log((1+je)/(1-je))/Math.PI;return ct<0?0:ct>1?1:ct}function be(tt){return 360*(tt-.5)}function Le(tt){var je=(180-360*tt)*Math.PI/180;return 360*Math.atan(Math.exp(je))/Math.PI-90}function De(tt,je){for(var ct in je)tt[ct]=je[ct];return tt}function ye(tt){return tt.x}function Ce(tt){return tt.y}function Fe(tt,je,ct,ht){for(var We,Me=ht,Se=ct-je>>1,Je=ct-je,st=tt[je],lt=tt[je+1],pt=tt[ct],Ct=tt[ct+1],Dt=je+3;Dt<ct;Dt+=3){var Gt=Ke(tt[Dt],tt[Dt+1],st,lt,pt,Ct);if(Gt>Me)We=Dt,Me=Gt;else if(Gt===Me){var fr=Math.abs(Dt-Se);fr<Je&&(We=Dt,Je=fr)}}Me>ht&&(We-je>3&&Fe(tt,je,We,ht),tt[We+2]=Me,ct-We>3&&Fe(tt,We,ct,ht))}function Ke(tt,je,ct,ht,Me,Se){var Je=Me-ct,We=Se-ht;if(0!==Je||0!==We){var st=((tt-ct)*Je+(je-ht)*We)/(Je*Je+We*We);st>1?(ct=Me,ht=Se):st>0&&(ct+=Je*st,ht+=We*st)}return(Je=tt-ct)*Je+(We=je-ht)*We}function Ue(tt,je,ct,ht){var Me={id:void 0===tt?null:tt,type:je,geometry:ct,tags:ht,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function Be(tt){var je=tt.geometry,ct=tt.type;if("Point"===ct||"MultiPoint"===ct||"LineString"===ct)Ie(tt,je);else if("Polygon"===ct||"MultiLineString"===ct)for(var ht=0;ht<je.length;ht++)Ie(tt,je[ht]);else if("MultiPolygon"===ct)for(ht=0;ht<je.length;ht++)for(var Me=0;Me<je[ht].length;Me++)Ie(tt,je[ht][Me])}(Me),Me}function Ie(tt,je){for(var ct=0;ct<je.length;ct+=3)tt.minX=Math.min(tt.minX,je[ct]),tt.minY=Math.min(tt.minY,je[ct+1]),tt.maxX=Math.max(tt.maxX,je[ct]),tt.maxY=Math.max(tt.maxY,je[ct+1])}function gt(tt,je,ct,ht){if(je.geometry){var Me=je.geometry.coordinates,Se=je.geometry.type,Je=Math.pow(ct.tolerance/((1<<ct.maxZoom)*ct.extent),2),We=[],st=je.id;if(ct.promoteId?st=je.properties[ct.promoteId]:ct.generateId&&(st=ht||0),"Point"===Se)Nt(Me,We);else if("MultiPoint"===Se)for(var lt=0;lt<Me.length;lt++)Nt(Me[lt],We);else if("LineString"===Se)St(Me,We,Je,!1);else if("MultiLineString"===Se){if(ct.lineMetrics){for(lt=0;lt<Me.length;lt++)St(Me[lt],We=[],Je,!1),tt.push(Ue(st,"LineString",We,je.properties));return}Bt(Me,We,Je,!1)}else if("Polygon"===Se)Bt(Me,We,Je,!0);else{if("MultiPolygon"!==Se){if("GeometryCollection"===Se){for(lt=0;lt<je.geometry.geometries.length;lt++)gt(tt,{id:st,geometry:je.geometry.geometries[lt],properties:je.properties},ct,ht);return}throw new Error("Input data is not a valid GeoJSON object.")}for(lt=0;lt<Me.length;lt++){var pt=[];Bt(Me[lt],pt,Je,!0),We.push(pt)}}tt.push(Ue(st,Se,We,je.properties))}}function Nt(tt,je){je.push(Zt(tt[0])),je.push(Et(tt[1])),je.push(0)}function St(tt,je,ct,ht){for(var Me,Se,Je=0,We=0;We<tt.length;We++){var st=Zt(tt[We][0]),lt=Et(tt[We][1]);je.push(st),je.push(lt),je.push(0),We>0&&(Je+=ht?(Me*lt-st*Se)/2:Math.sqrt(Math.pow(st-Me,2)+Math.pow(lt-Se,2))),Me=st,Se=lt}var pt=je.length-3;je[2]=1,Fe(je,0,pt,ct),je[pt+2]=1,je.size=Math.abs(Je),je.start=0,je.end=je.size}function Bt(tt,je,ct,ht){for(var Me=0;Me<tt.length;Me++){var Se=[];St(tt[Me],Se,ct,ht),je.push(Se)}}function Zt(tt){return tt/360+.5}function Et(tt){var je=Math.sin(tt*Math.PI/180),ct=.5-.25*Math.log((1+je)/(1-je))/Math.PI;return ct<0?0:ct>1?1:ct}function wt(tt,je,ct,ht,Me,Se,Je,We){if(ht/=je,Se>=(ct/=je)&&Je<ht)return tt;if(Je<ct||Se>=ht)return null;for(var st=[],lt=0;lt<tt.length;lt++){var pt=tt[lt],Ct=pt.geometry,Dt=pt.type,Gt=0===Me?pt.minX:pt.minY,fr=0===Me?pt.maxX:pt.maxY;if(Gt>=ct&&fr<ht)st.push(pt);else if(!(fr<ct||Gt>=ht)){var pr=[];if("Point"===Dt||"MultiPoint"===Dt)at(Ct,pr,ct,ht,Me);else if("LineString"===Dt)vt(Ct,pr,ct,ht,Me,!1,We.lineMetrics);else if("MultiLineString"===Dt)Pe(Ct,pr,ct,ht,Me,!1);else if("Polygon"===Dt)Pe(Ct,pr,ct,ht,Me,!0);else if("MultiPolygon"===Dt)for(var Jr=0;Jr<Ct.length;Jr++){var Lr=[];Pe(Ct[Jr],Lr,ct,ht,Me,!0),Lr.length&&pr.push(Lr)}if(pr.length){if(We.lineMetrics&&"LineString"===Dt){for(Jr=0;Jr<pr.length;Jr++)st.push(Ue(pt.id,Dt,pr[Jr],pt.tags));continue}("LineString"===Dt||"MultiLineString"===Dt)&&(1===pr.length?(Dt="LineString",pr=pr[0]):Dt="MultiLineString"),("Point"===Dt||"MultiPoint"===Dt)&&(Dt=3===pr.length?"Point":"MultiPoint"),st.push(Ue(pt.id,Dt,pr,pt.tags))}}}return st.length?st:null}function at(tt,je,ct,ht,Me){for(var Se=0;Se<tt.length;Se+=3){var Je=tt[Se+Me];Je>=ct&&Je<=ht&&(je.push(tt[Se]),je.push(tt[Se+1]),je.push(tt[Se+2]))}}function vt(tt,je,ct,ht,Me,Se,Je){for(var pt,Ct,We=Qe(tt),st=0===Me?Xe:rt,lt=tt.start,Dt=0;Dt<tt.length-3;Dt+=3){var Gt=tt[Dt],fr=tt[Dt+1],pr=tt[Dt+2],Jr=tt[Dt+3],Lr=tt[Dt+4],Ar=0===Me?Gt:fr,en=0===Me?Jr:Lr,mr=!1;Je&&(pt=Math.sqrt(Math.pow(Gt-Jr,2)+Math.pow(fr-Lr,2))),Ar<ct?en>ct&&(Ct=st(We,Gt,fr,Jr,Lr,ct),Je&&(We.start=lt+pt*Ct)):Ar>ht?en<ht&&(Ct=st(We,Gt,fr,Jr,Lr,ht),Je&&(We.start=lt+pt*Ct)):Ze(We,Gt,fr,pr),en<ct&&Ar>=ct&&(Ct=st(We,Gt,fr,Jr,Lr,ct),mr=!0),en>ht&&Ar<=ht&&(Ct=st(We,Gt,fr,Jr,Lr,ht),mr=!0),!Se&&mr&&(Je&&(We.end=lt+pt*Ct),je.push(We),We=Qe(tt)),Je&&(lt+=pt)}var wr=tt.length-3;Gt=tt[wr],fr=tt[wr+1],pr=tt[wr+2],(Ar=0===Me?Gt:fr)>=ct&&Ar<=ht&&Ze(We,Gt,fr,pr),wr=We.length-3,Se&&wr>=3&&(We[wr]!==We[0]||We[wr+1]!==We[1])&&Ze(We,We[0],We[1],We[2]),We.length&&je.push(We)}function Qe(tt){var je=[];return je.size=tt.size,je.start=tt.start,je.end=tt.end,je}function Pe(tt,je,ct,ht,Me,Se){for(var Je=0;Je<tt.length;Je++)vt(tt[Je],je,ct,ht,Me,Se,!1)}function Ze(tt,je,ct,ht){tt.push(je),tt.push(ct),tt.push(ht)}function Xe(tt,je,ct,ht,Me,Se){var Je=(Se-je)/(ht-je);return tt.push(Se),tt.push(ct+(Me-ct)*Je),tt.push(1),Je}function rt(tt,je,ct,ht,Me,Se){var Je=(Se-ct)/(Me-ct);return tt.push(je+(ht-je)*Je),tt.push(Se),tt.push(1),Je}function Tt(tt,je){for(var ct=[],ht=0;ht<tt.length;ht++){var Je,Me=tt[ht],Se=Me.type;if("Point"===Se||"MultiPoint"===Se||"LineString"===Se)Je=Xt(Me.geometry,je);else if("MultiLineString"===Se||"Polygon"===Se){Je=[];for(var We=0;We<Me.geometry.length;We++)Je.push(Xt(Me.geometry[We],je))}else if("MultiPolygon"===Se)for(Je=[],We=0;We<Me.geometry.length;We++){for(var st=[],lt=0;lt<Me.geometry[We].length;lt++)st.push(Xt(Me.geometry[We][lt],je));Je.push(st)}ct.push(Ue(Me.id,Se,Je,Me.tags))}return ct}function Xt(tt,je){var ct=[];ct.size=tt.size,void 0!==tt.start&&(ct.start=tt.start,ct.end=tt.end);for(var ht=0;ht<tt.length;ht+=3)ct.push(tt[ht]+je,tt[ht+1],tt[ht+2]);return ct}function ar(tt,je){if(tt.transformed)return tt;var Se,Je,We,ct=1<<tt.z,ht=tt.x,Me=tt.y;for(Se=0;Se<tt.features.length;Se++){var st=tt.features[Se],lt=st.geometry,pt=st.type;if(st.geometry=[],1===pt)for(Je=0;Je<lt.length;Je+=2)st.geometry.push(Ut(lt[Je],lt[Je+1],je,ct,ht,Me));else for(Je=0;Je<lt.length;Je++){var Ct=[];for(We=0;We<lt[Je].length;We+=2)Ct.push(Ut(lt[Je][We],lt[Je][We+1],je,ct,ht,Me));st.geometry.push(Ct)}}return tt.transformed=!0,tt}function Ut(tt,je,ct,ht,Me,Se){return[Math.round(ct*(tt*ht-Me)),Math.round(ct*(je*ht-Se))]}function Jt(tt,je,ct,ht,Me){for(var Se=je===Me.maxZoom?0:Me.tolerance/((1<<je)*Me.extent),Je={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ct,y:ht,z:je,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},We=0;We<tt.length;We++){Je.numFeatures++,nr(Je,tt[We],Se,Me);var st=tt[We].minX,lt=tt[We].minY,pt=tt[We].maxX,Ct=tt[We].maxY;st<Je.minX&&(Je.minX=st),lt<Je.minY&&(Je.minY=lt),pt>Je.maxX&&(Je.maxX=pt),Ct>Je.maxY&&(Je.maxY=Ct)}return Je}function nr(tt,je,ct,ht){var Me=je.geometry,Se=je.type,Je=[];if("Point"===Se||"MultiPoint"===Se)for(var We=0;We<Me.length;We+=3)Je.push(Me[We]),Je.push(Me[We+1]),tt.numPoints++,tt.numSimplified++;else if("LineString"===Se)rr(Je,Me,tt,ct,!1,!1);else if("MultiLineString"===Se||"Polygon"===Se)for(We=0;We<Me.length;We++)rr(Je,Me[We],tt,ct,"Polygon"===Se,0===We);else if("MultiPolygon"===Se)for(var st=0;st<Me.length;st++){var lt=Me[st];for(We=0;We<lt.length;We++)rr(Je,lt[We],tt,ct,!0,0===We)}if(Je.length){var pt=je.tags||null;if("LineString"===Se&&ht.lineMetrics){for(var Ct in pt={},je.tags)pt[Ct]=je.tags[Ct];pt.mapbox_clip_start=Me.start/Me.size,pt.mapbox_clip_end=Me.end/Me.size}var Dt={geometry:Je,type:"Polygon"===Se||"MultiPolygon"===Se?3:"LineString"===Se||"MultiLineString"===Se?2:1,tags:pt};null!==je.id&&(Dt.id=je.id),tt.features.push(Dt)}}function rr(tt,je,ct,ht,Me,Se){var Je=ht*ht;if(ht>0&&je.size<(Me?Je:ht))ct.numPoints+=je.length/3;else{for(var We=[],st=0;st<je.length;st+=3)(0===ht||je[st+2]>Je)&&(ct.numSimplified++,We.push(je[st]),We.push(je[st+1])),ct.numPoints++;Me&&function br(tt,je){for(var ct=0,ht=0,Me=tt.length,Se=Me-2;ht<Me;Se=ht,ht+=2)ct+=(tt[ht]-tt[Se])*(tt[ht+1]+tt[Se+1]);if(ct>0===je)for(ht=0,Me=tt.length;ht<Me/2;ht+=2){var Je=tt[ht],We=tt[ht+1];tt[ht]=tt[Me-2-ht],tt[ht+1]=tt[Me-1-ht],tt[Me-2-ht]=Je,tt[Me-1-ht]=We}}(We,Se),tt.push(We)}}function on(tt,je){var ct=(je=this.options=function et(tt,je){for(var ct in je)tt[ct]=je[ct];return tt}(Object.create(this.options),je)).debug;if(ct&&console.time("preprocess data"),je.maxZoom<0||je.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(je.promoteId&&je.generateId)throw new Error("promoteId and generateId cannot be used together.");var ht=function nt(tt,je){var ct=[];if("FeatureCollection"===tt.type)for(var ht=0;ht<tt.features.length;ht++)gt(ct,tt.features[ht],je,ht);else gt(ct,"Feature"===tt.type?tt:{geometry:tt},je);return ct}(tt,je);this.tiles={},this.tileCoords=[],ct&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",je.indexMaxZoom,je.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(ht=function kt(tt,je){var ct=je.buffer/je.extent,ht=tt,Me=wt(tt,1,-1-ct,ct,0,-1,2,je),Se=wt(tt,1,1-ct,2+ct,0,-1,2,je);return(Me||Se)&&(ht=wt(tt,1,-ct,1+ct,0,-1,2,je)||[],Me&&(ht=Tt(Me,1).concat(ht)),Se&&(ht=ht.concat(Tt(Se,-1)))),ht}(ht,je)).length&&this.splitTile(ht,0,0,0),ct&&(ht.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function jr(tt,je,ct){return 32*((1<<tt)*ct+je)+tt}function Yt(tt,je){var ct=tt.tileID.canonical;if(!this._geoJSONIndex)return je(null,null);var ht=this._geoJSONIndex.getTile(ct.z,ct.x,ct.y);if(!ht)return je(null,null);var Me=new M(ht.features),Se=C(Me);(0!==Se.byteOffset||Se.byteLength!==Se.buffer.byteLength)&&(Se=new Uint8Array(Se)),je(null,{vectorTile:Me,rawData:Se.buffer})}le.prototype.load=function(je){var ct=this.options,ht=ct.log,Me=ct.minZoom,Se=ct.maxZoom,Je=ct.nodeSize;ht&&console.time("total time");var We="prepare "+je.length+" points";ht&&console.time(We),this.points=je;for(var st=[],lt=0;lt<je.length;lt++)!je[lt].geometry||st.push(pe(je[lt],lt));this.trees[Se+1]=new j(st,ye,Ce,Je,Float32Array),ht&&console.timeEnd(We);for(var pt=Se;pt>=Me;pt--){var Ct=+Date.now();st=this._cluster(st,pt),this.trees[pt]=new j(st,ye,Ce,Je,Float32Array),ht&&console.log("z%d: %d clusters in %dms",pt,st.length,+Date.now()-Ct)}return ht&&console.timeEnd("total time"),this},le.prototype.getClusters=function(je,ct){var ht=((je[0]+180)%360+360)%360-180,Me=Math.max(-90,Math.min(90,je[1])),Se=180===je[2]?180:((je[2]+180)%360+360)%360-180,Je=Math.max(-90,Math.min(90,je[3]));if(je[2]-je[0]>=360)ht=-180,Se=180;else if(ht>Se){var We=this.getClusters([ht,Me,180,Je],ct),st=this.getClusters([-180,Me,Se,Je],ct);return We.concat(st)}for(var lt=this.trees[this._limitZoom(ct)],Ct=[],Dt=0,Gt=lt.range(we(ht),de(Je),we(Se),de(Me));Dt<Gt.length;Dt+=1){var pr=lt.points[Gt[Dt]];Ct.push(pr.numPoints?xe(pr):this.points[pr.index])}return Ct},le.prototype.getChildren=function(je){var ct=this._getOriginId(je),ht=this._getOriginZoom(je),Me="No cluster with the specified id.",Se=this.trees[ht];if(!Se)throw new Error(Me);var Je=Se.points[ct];if(!Je)throw new Error(Me);for(var We=this.options.radius/(this.options.extent*Math.pow(2,ht-1)),lt=[],pt=0,Ct=Se.within(Je.x,Je.y,We);pt<Ct.length;pt+=1){var Gt=Se.points[Ct[pt]];Gt.parentId===je&&lt.push(Gt.numPoints?xe(Gt):this.points[Gt.index])}if(0===lt.length)throw new Error(Me);return lt},le.prototype.getLeaves=function(je,ct,ht){var Me=[];return this._appendLeaves(Me,je,ct=ct||10,ht=ht||0,0),Me},le.prototype.getTile=function(je,ct,ht){var Me=this.trees[this._limitZoom(je)],Se=Math.pow(2,je),Je=this.options,lt=Je.radius/Je.extent,pt=(ht-lt)/Se,Ct=(ht+1+lt)/Se,Dt={features:[]};return this._addTileFeatures(Me.range((ct-lt)/Se,pt,(ct+1+lt)/Se,Ct),Me.points,ct,ht,Se,Dt),0===ct&&this._addTileFeatures(Me.range(1-lt/Se,pt,1,Ct),Me.points,Se,ht,Se,Dt),ct===Se-1&&this._addTileFeatures(Me.range(0,pt,lt/Se,Ct),Me.points,-1,ht,Se,Dt),Dt.features.length?Dt:null},le.prototype.getClusterExpansionZoom=function(je){for(var ct=this._getOriginZoom(je)-1;ct<=this.options.maxZoom;){var ht=this.getChildren(je);if(ct++,1!==ht.length)break;je=ht[0].properties.cluster_id}return ct},le.prototype._appendLeaves=function(je,ct,ht,Me,Se){for(var We=0,st=this.getChildren(ct);We<st.length;We+=1){var lt=st[We],pt=lt.properties;if(pt&&pt.cluster?Se+pt.point_count<=Me?Se+=pt.point_count:Se=this._appendLeaves(je,pt.cluster_id,ht,Me,Se):Se<Me?Se++:je.push(lt),je.length===ht)break}return Se},le.prototype._addTileFeatures=function(je,ct,ht,Me,Se,Je){for(var We=0,st=je;We<st.length;We+=1){var pt=ct[st[We]],Ct=pt.numPoints,Dt={type:1,geometry:[[Math.round(this.options.extent*(pt.x*Se-ht)),Math.round(this.options.extent*(pt.y*Se-Me))]],tags:Ct?ke(pt):this.points[pt.index].properties},Gt=void 0;Ct?Gt=pt.id:this.options.generateId?Gt=pt.index:this.points[pt.index].id&&(Gt=this.points[pt.index].id),void 0!==Gt&&(Dt.id=Gt),Je.features.push(Dt)}},le.prototype._limitZoom=function(je){return Math.max(this.options.minZoom,Math.min(je,this.options.maxZoom+1))},le.prototype._cluster=function(je,ct){for(var ht=[],Me=this.options,We=Me.reduce,st=Me.radius/(Me.extent*Math.pow(2,ct)),lt=0;lt<je.length;lt++){var pt=je[lt];if(!(pt.zoom<=ct)){pt.zoom=ct;for(var Ct=this.trees[ct+1],Dt=Ct.within(pt.x,pt.y,st),Gt=pt.numPoints||1,fr=pt.x*Gt,pr=pt.y*Gt,Jr=We&&Gt>1?this._map(pt,!0):null,Lr=(lt<<5)+(ct+1)+this.points.length,Ar=0,en=Dt;Ar<en.length;Ar+=1){var wr=Ct.points[en[Ar]];if(!(wr.zoom<=ct)){wr.zoom=ct;var Wr=wr.numPoints||1;fr+=wr.x*Wr,pr+=wr.y*Wr,Gt+=Wr,wr.parentId=Lr,We&&(Jr||(Jr=this._map(pt,!0)),We(Jr,this._map(wr)))}}1===Gt?ht.push(pt):(pt.parentId=Lr,ht.push(ge(fr/Gt,pr/Gt,Lr,Gt,Jr)))}}return ht},le.prototype._getOriginId=function(je){return je-this.points.length>>5},le.prototype._getOriginZoom=function(je){return(je-this.points.length)%32},le.prototype._map=function(je,ct){if(je.numPoints)return ct?De({},je.properties):je.properties;var ht=this.points[je.index].properties,Me=this.options.map(ht);return ct&&Me===ht?De({},Me):Me},on.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},on.prototype.splitTile=function(tt,je,ct,ht,Me,Se,Je){for(var We=[tt,je,ct,ht],st=this.options,lt=st.debug;We.length;){ht=We.pop(),ct=We.pop(),je=We.pop(),tt=We.pop();var pt=1<<je,Ct=jr(je,ct,ht),Dt=this.tiles[Ct];if(!Dt&&(lt>1&&console.time("creation"),Dt=this.tiles[Ct]=Jt(tt,je,ct,ht,st),this.tileCoords.push({z:je,x:ct,y:ht}),lt)){lt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",je,ct,ht,Dt.numFeatures,Dt.numPoints,Dt.numSimplified),console.timeEnd("creation"));var Gt="z"+je;this.stats[Gt]=(this.stats[Gt]||0)+1,this.total++}if(Dt.source=tt,Me){if(je===st.maxZoom||je===Me)continue;var fr=1<<Me-je;if(ct!==Math.floor(Se/fr)||ht!==Math.floor(Je/fr))continue}else if(je===st.indexMaxZoom||Dt.numPoints<=st.indexMaxPoints)continue;if(Dt.source=null,0!==tt.length){lt>1&&console.time("clipping");var en,mr,wr,Wr,Kr,Cr,pr=.5*st.buffer/st.extent,Jr=.5-pr,Lr=.5+pr,Ar=1+pr;en=mr=wr=Wr=null,Kr=wt(tt,pt,ct-pr,ct+Lr,0,Dt.minX,Dt.maxX,st),Cr=wt(tt,pt,ct+Jr,ct+Ar,0,Dt.minX,Dt.maxX,st),tt=null,Kr&&(en=wt(Kr,pt,ht-pr,ht+Lr,1,Dt.minY,Dt.maxY,st),mr=wt(Kr,pt,ht+Jr,ht+Ar,1,Dt.minY,Dt.maxY,st),Kr=null),Cr&&(wr=wt(Cr,pt,ht-pr,ht+Lr,1,Dt.minY,Dt.maxY,st),Wr=wt(Cr,pt,ht+Jr,ht+Ar,1,Dt.minY,Dt.maxY,st),Cr=null),lt>1&&console.timeEnd("clipping"),We.push(en||[],je+1,2*ct,2*ht),We.push(mr||[],je+1,2*ct,2*ht+1),We.push(wr||[],je+1,2*ct+1,2*ht),We.push(Wr||[],je+1,2*ct+1,2*ht+1)}}},on.prototype.getTile=function(tt,je,ct){var ht=this.options,Me=ht.extent,Se=ht.debug;if(tt<0||tt>24)return null;var Je=1<<tt,We=jr(tt,je=(je%Je+Je)%Je,ct);if(this.tiles[We])return ar(this.tiles[We],Me);Se>1&&console.log("drilling down to z%d-%d-%d",tt,je,ct);for(var Ct,st=tt,lt=je,pt=ct;!Ct&&st>0;)st--,lt=Math.floor(lt/2),pt=Math.floor(pt/2),Ct=this.tiles[jr(st,lt,pt)];return Ct&&Ct.source?(Se>1&&console.log("found parent tile z%d-%d-%d",st,lt,pt),Se>1&&console.time("drilling down"),this.splitTile(Ct.source,st,lt,pt,tt,je,ct),Se>1&&console.timeEnd("drilling down"),this.tiles[We]?ar(this.tiles[We],Me):null):null};var qt=function(tt){function je(ct,ht,Me,Se){tt.call(this,ct,ht,Me,Yt),Se&&(this.loadGeoJSON=Se)}return tt&&(je.__proto__=tt),(je.prototype=Object.create(tt&&tt.prototype)).constructor=je,je.prototype.loadData=function(ht,Me){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Me,this._pendingLoadDataParams=ht,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},je.prototype._loadData=function(){var ht=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Me=this._pendingCallback,Se=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Je=!!(Se&&Se.request&&Se.request.collectResourceTiming)&&new e.RequestPerformance(Se.request);this.loadGeoJSON(Se,function(We,st){if(We||!st)return Me(We);if("object"!=typeof st)return Me(new Error("Input data given to '"+Se.source+"' is not a valid GeoJSON object."));p(st,!0);try{ht._geoJSONIndex=Se.cluster?new le(function Vt(tt){var je=tt.superclusterOptions,ct=tt.clusterProperties;if(!ct||!je)return je;for(var ht={},Me={},Se={accumulated:null,zoom:0},Je={properties:null},We=Object.keys(ct),st=0,lt=We;st<lt.length;st+=1){var pt=lt[st],Ct=ct[pt],Dt=Ct[0],fr=e.createExpression(Ct[1]),pr=e.createExpression("string"==typeof Dt?[Dt,["accumulated"],["get",pt]]:Dt);ht[pt]=fr.value,Me[pt]=pr.value}return je.map=function(Jr){Je.properties=Jr;for(var Lr={},Ar=0,en=We;Ar<en.length;Ar+=1){var mr=en[Ar];Lr[mr]=ht[mr].evaluate(Se,Je)}return Lr},je.reduce=function(Jr,Lr){Je.properties=Lr;for(var Ar=0,en=We;Ar<en.length;Ar+=1){var mr=en[Ar];Se.accumulated=Jr[mr],Jr[mr]=Me[mr].evaluate(Se,Je)}},je}(Se)).load(st.features):function Hr(tt,je){return new on(tt,je)}(st,Se.geojsonVtOptions)}catch(Ct){return Me(Ct)}ht.loaded={};var lt={};if(Je){var pt=Je.finish();pt&&(lt.resourceTiming={},lt.resourceTiming[Se.source]=JSON.parse(JSON.stringify(pt)))}Me(null,lt)})}},je.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},je.prototype.reloadTile=function(ht,Me){var Se=this.loaded;return Se&&Se[ht.uid]?tt.prototype.reloadTile.call(this,ht,Me):this.loadTile(ht,Me)},je.prototype.loadGeoJSON=function(ht,Me){if(ht.request)e.getJSON(ht.request,Me);else{if("string"!=typeof ht.data)return Me(new Error("Input data given to '"+ht.source+"' is not a valid GeoJSON object."));try{return Me(null,JSON.parse(ht.data))}catch(Se){return Me(new Error("Input data given to '"+ht.source+"' is not a valid GeoJSON object."))}}},je.prototype.removeSource=function(ht,Me){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Me()},je.prototype.getClusterExpansionZoom=function(ht,Me){try{Me(null,this._geoJSONIndex.getClusterExpansionZoom(ht.clusterId))}catch(Se){Me(Se)}},je.prototype.getClusterChildren=function(ht,Me){try{Me(null,this._geoJSONIndex.getChildren(ht.clusterId))}catch(Se){Me(Se)}},je.prototype.getClusterLeaves=function(ht,Me){try{Me(null,this._geoJSONIndex.getLeaves(ht.clusterId,ht.limit,ht.offset))}catch(Se){Me(Se)}},je}(b);var Tr=function(je){var ct=this;this.self=je,this.actor=new e.Actor(je,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:b,geojson:qt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ht,Me){if(ct.workerSourceTypes[ht])throw new Error('Worker source with name "'+ht+'" already registered.');ct.workerSourceTypes[ht]=Me},this.self.registerRTLTextPlugin=function(ht){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=ht.applyArabicShaping,e.plugin.processBidirectionalText=ht.processBidirectionalText,e.plugin.processStyledBidirectionalText=ht.processStyledBidirectionalText}};return Tr.prototype.setReferrer=function(je,ct){this.referrer=ct},Tr.prototype.setImages=function(je,ct,ht){for(var Me in this.availableImages[je]=ct,this.workerSources[je]){var Se=this.workerSources[je][Me];for(var Je in Se)Se[Je].availableImages=ct}ht()},Tr.prototype.setLayers=function(je,ct,ht){this.getLayerIndex(je).replace(ct),ht()},Tr.prototype.updateLayers=function(je,ct,ht){this.getLayerIndex(je).update(ct.layers,ct.removedIds),ht()},Tr.prototype.loadTile=function(je,ct,ht){this.getWorkerSource(je,ct.type,ct.source).loadTile(ct,ht)},Tr.prototype.loadDEMTile=function(je,ct,ht){this.getDEMWorkerSource(je,ct.source).loadTile(ct,ht)},Tr.prototype.reloadTile=function(je,ct,ht){this.getWorkerSource(je,ct.type,ct.source).reloadTile(ct,ht)},Tr.prototype.abortTile=function(je,ct,ht){this.getWorkerSource(je,ct.type,ct.source).abortTile(ct,ht)},Tr.prototype.removeTile=function(je,ct,ht){this.getWorkerSource(je,ct.type,ct.source).removeTile(ct,ht)},Tr.prototype.removeDEMTile=function(je,ct){this.getDEMWorkerSource(je,ct.source).removeTile(ct)},Tr.prototype.removeSource=function(je,ct,ht){if(this.workerSources[je]&&this.workerSources[je][ct.type]&&this.workerSources[je][ct.type][ct.source]){var Me=this.workerSources[je][ct.type][ct.source];delete this.workerSources[je][ct.type][ct.source],void 0!==Me.removeSource?Me.removeSource(ct,ht):ht()}},Tr.prototype.loadWorkerSource=function(je,ct,ht){try{this.self.importScripts(ct.url),ht()}catch(Me){ht(Me.toString())}},Tr.prototype.syncRTLPluginState=function(je,ct,ht){try{e.plugin.setState(ct);var Me=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=Me){this.self.importScripts(Me);var Se=e.plugin.isParsed();ht(Se?void 0:new Error("RTL Text Plugin failed to import scripts from "+Me),Se)}}catch(We){ht(We.toString())}},Tr.prototype.getAvailableImages=function(je){var ct=this.availableImages[je];return ct||(ct=[]),ct},Tr.prototype.getLayerIndex=function(je){var ct=this.layerIndexes[je];return ct||(ct=this.layerIndexes[je]=new t),ct},Tr.prototype.getWorkerSource=function(je,ct,ht){var Me=this;return this.workerSources[je]||(this.workerSources[je]={}),this.workerSources[je][ct]||(this.workerSources[je][ct]={}),this.workerSources[je][ct][ht]||(this.workerSources[je][ct][ht]=new this.workerSourceTypes[ct]({send:function(Je,We,st){Me.actor.send(Je,We,st,je)}},this.getLayerIndex(je),this.getAvailableImages(je))),this.workerSources[je][ct][ht]},Tr.prototype.getDEMWorkerSource=function(je,ct){return this.demWorkerSources[je]||(this.demWorkerSources[je]={}),this.demWorkerSources[je][ct]||(this.demWorkerSources[je][ct]=new S),this.demWorkerSources[je][ct]},Tr.prototype.enforceCacheSizeLimit=function(je,ct){e.enforceCacheSizeLimit(ct)},"undefined"!=typeof WorkerGlobalScope&&void 0!==e.window&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new Tr(e.window)),Tr}),E(0,function(e){var c=e.createCommonjsModule(function(ce){function Z(Ur){return!he(Ur)}function he(Ur){return function Q(){return"undefined"!=typeof window&&"undefined"!=typeof document}()?function ve(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}()?function Ae(){return Function.prototype&&Function.prototype.bind}()?function Re(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}()?function Ye(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}()?function ut(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var pn,Cn,Ur=new Blob([""],{type:"text/javascript"}),tn=URL.createObjectURL(Ur);try{Cn=new Worker(tn),pn=!0}catch(Nn){pn=!1}return Cn&&Cn.terminate(),URL.revokeObjectURL(tn),pn}()?function Mt(){return"Uint8ClampedArray"in window}()?function jt(){return ArrayBuffer.isView}()?function ur(){var Ur=document.createElement("canvas");Ur.width=Ur.height=1;var tn=Ur.getContext("2d");if(!tn)return!1;var pn=tn.getImageData(0,0,1,1);return pn&&pn.width===Ur.width}()?function Pr(Ur){return void 0===gr[Ur]&&(gr[Ur]=function Yr(Ur){var tn=function Gr(Ur){var tn=document.createElement("canvas"),pn=Object.create(Z.webGLContextAttributes);return pn.failIfMajorPerformanceCaveat=Ur,tn.probablySupportsContext?tn.probablySupportsContext("webgl",pn)||tn.probablySupportsContext("experimental-webgl",pn):tn.supportsContext?tn.supportsContext("webgl",pn)||tn.supportsContext("experimental-webgl",pn):tn.getContext("webgl",pn)||tn.getContext("experimental-webgl",pn)}(Ur);if(!tn)return!1;var pn=tn.createShader(tn.VERTEX_SHADER);return!(!pn||tn.isContextLost())&&(tn.shaderSource(pn,"void main() {}"),tn.compileShader(pn),!0===tn.getShaderParameter(pn,tn.COMPILE_STATUS))}(Ur)),gr[Ur]}(Ur&&Ur.failIfMajorPerformanceCaveat)?void 0:"insufficient WebGL support":"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser"}ce.exports?ce.exports=Z:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=Z,window.mapboxgl.notSupportedReason=he);var gr={};Z.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),d={create:function(ce,Z,he){var Q=e.window.document.createElement(ce);return void 0!==Z&&(Q.className=Z),he&&he.appendChild(Q),Q},createNS:function(ce,Z){return e.window.document.createElementNS(ce,Z)}},n=e.window.document.documentElement.style;function t(ce){if(!n)return ce[0];for(var Z=0;Z<ce.length;Z++)if(ce[Z]in n)return ce[Z];return ce[0]}var a,i=t(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);d.disableDrag=function(){n&&i&&(a=n[i],n[i]="none")},d.enableDrag=function(){n&&i&&(n[i]=a)};var r=t(["transform","WebkitTransform"]);d.setTransform=function(ce,Z){ce.style[r]=Z};var g=!1;try{var s=Object.defineProperty({},"passive",{get:function(){g=!0}});e.window.addEventListener("test",s,s),e.window.removeEventListener("test",s,s)}catch(ce){g=!1}d.addEventListener=function(ce,Z,he,Q){void 0===Q&&(Q={}),ce.addEventListener(Z,he,"passive"in Q&&g?Q:Q.capture)},d.removeEventListener=function(ce,Z,he,Q){void 0===Q&&(Q={}),ce.removeEventListener(Z,he,"passive"in Q&&g?Q:Q.capture)};var b=function(ce){ce.preventDefault(),ce.stopPropagation(),e.window.removeEventListener("click",b,!0)};function S(ce){var Z=ce.userImage;return!!(Z&&Z.render&&Z.render())&&(ce.data.replace(new Uint8Array(Z.data.buffer)),!0)}d.suppressClick=function(){e.window.addEventListener("click",b,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",b,!0)},0)},d.mousePos=function(ce,Z){var he=ce.getBoundingClientRect();return new e.Point(Z.clientX-he.left-ce.clientLeft,Z.clientY-he.top-ce.clientTop)},d.touchPos=function(ce,Z){for(var he=ce.getBoundingClientRect(),Q=[],ve=0;ve<Z.length;ve++)Q.push(new e.Point(Z[ve].clientX-he.left-ce.clientLeft,Z[ve].clientY-he.top-ce.clientTop));return Q},d.mouseButton=function(ce){return void 0!==e.window.InstallTrigger&&2===ce.button&&ce.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:ce.button},d.remove=function(ce){ce.parentNode&&ce.parentNode.removeChild(ce)};var w=function(ce){function Z(){ce.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.isLoaded=function(){return this.loaded},Z.prototype.setLoaded=function(Q){if(this.loaded!==Q&&(this.loaded=Q,Q)){for(var ve=0,Ae=this.requestors;ve<Ae.length;ve+=1){var Re=Ae[ve];this._notify(Re.ids,Re.callback)}this.requestors=[]}},Z.prototype.getImage=function(Q){return this.images[Q]},Z.prototype.addImage=function(Q,ve){this._validate(Q,ve)&&(this.images[Q]=ve)},Z.prototype._validate=function(Q,ve){var Ae=!0;return this._validateStretch(ve.stretchX,ve.data&&ve.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+Q+'" has invalid "stretchX" value'))),Ae=!1),this._validateStretch(ve.stretchY,ve.data&&ve.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+Q+'" has invalid "stretchY" value'))),Ae=!1),this._validateContent(ve.content,ve)||(this.fire(new e.ErrorEvent(new Error('Image "'+Q+'" has invalid "content" value'))),Ae=!1),Ae},Z.prototype._validateStretch=function(Q,ve){if(!Q)return!0;for(var Ae=0,Re=0,Ye=Q;Re<Ye.length;Re+=1){var ut=Ye[Re];if(ut[0]<Ae||ut[1]<ut[0]||ve<ut[1])return!1;Ae=ut[1]}return!0},Z.prototype._validateContent=function(Q,ve){return!Q||!(4!==Q.length||Q[0]<0||ve.data.width<Q[0]||Q[1]<0||ve.data.height<Q[1]||Q[2]<0||ve.data.width<Q[2]||Q[3]<0||ve.data.height<Q[3]||Q[2]<Q[0]||Q[3]<Q[1])},Z.prototype.updateImage=function(Q,ve){ve.version=this.images[Q].version+1,this.images[Q]=ve,this.updatedImages[Q]=!0},Z.prototype.removeImage=function(Q){var ve=this.images[Q];delete this.images[Q],delete this.patterns[Q],ve.userImage&&ve.userImage.onRemove&&ve.userImage.onRemove()},Z.prototype.listImages=function(){return Object.keys(this.images)},Z.prototype.getImages=function(Q,ve){var Ae=!0;if(!this.isLoaded())for(var Re=0,Ye=Q;Re<Ye.length;Re+=1)this.images[Ye[Re]]||(Ae=!1);this.isLoaded()||Ae?this._notify(Q,ve):this.requestors.push({ids:Q,callback:ve})},Z.prototype._notify=function(Q,ve){for(var Ae={},Re=0,Ye=Q;Re<Ye.length;Re+=1){var ut=Ye[Re];this.images[ut]||this.fire(new e.Event("styleimagemissing",{id:ut}));var Mt=this.images[ut];Mt?Ae[ut]={data:Mt.data.clone(),pixelRatio:Mt.pixelRatio,sdf:Mt.sdf,version:Mt.version,stretchX:Mt.stretchX,stretchY:Mt.stretchY,content:Mt.content,hasRenderCallback:Boolean(Mt.userImage&&Mt.userImage.render)}:e.warnOnce('Image "'+ut+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}ve(null,Ae)},Z.prototype.getPixelSize=function(){var Q=this.atlasImage;return{width:Q.width,height:Q.height}},Z.prototype.getPattern=function(Q){var ve=this.patterns[Q],Ae=this.getImage(Q);if(!Ae)return null;if(ve&&ve.position.version===Ae.version)return ve.position;if(ve)ve.position.version=Ae.version;else{var ut={w:Ae.data.width+2,h:Ae.data.height+2,x:0,y:0},Mt=new e.ImagePosition(ut,Ae);this.patterns[Q]={bin:ut,position:Mt}}return this._updatePatternAtlas(),this.patterns[Q].position},Z.prototype.bind=function(Q){var ve=Q.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(Q,this.atlasImage,ve.RGBA),this.atlasTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)},Z.prototype._updatePatternAtlas=function(){var Q=[];for(var ve in this.patterns)Q.push(this.patterns[ve].bin);var Ae=e.potpack(Q),Re=Ae.w,Ye=Ae.h,ut=this.atlasImage;for(var Mt in ut.resize({width:Re||1,height:Ye||1}),this.patterns){var ur=this.patterns[Mt].bin,gr=ur.x+1,Pr=ur.y+1,Gr=this.images[Mt].data,Yr=Gr.width,Ur=Gr.height;e.RGBAImage.copy(Gr,ut,{x:0,y:0},{x:gr,y:Pr},{width:Yr,height:Ur}),e.RGBAImage.copy(Gr,ut,{x:0,y:Ur-1},{x:gr,y:Pr-1},{width:Yr,height:1}),e.RGBAImage.copy(Gr,ut,{x:0,y:0},{x:gr,y:Pr+Ur},{width:Yr,height:1}),e.RGBAImage.copy(Gr,ut,{x:Yr-1,y:0},{x:gr-1,y:Pr},{width:1,height:Ur}),e.RGBAImage.copy(Gr,ut,{x:0,y:0},{x:gr+Yr,y:Pr},{width:1,height:Ur})}this.dirty=!0},Z.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},Z.prototype.dispatchRenderCallbacks=function(Q){for(var ve=0,Ae=Q;ve<Ae.length;ve+=1){var Re=Ae[ve];if(!this.callbackDispatchedThisFrame[Re]){this.callbackDispatchedThisFrame[Re]=!0;var Ye=this.images[Re];S(Ye)&&this.updateImage(Re,Ye)}}},Z}(e.Evented);var y=M,A=M,T=1e20;function M(ce,Z,he,Q,ve,Ae){this.fontSize=ce||24,this.buffer=void 0===Z?3:Z,this.cutoff=Q||.25,this.fontFamily=ve||"sans-serif",this.fontWeight=Ae||"normal",this.radius=he||8;var Re=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Re,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Re*Re),this.gridInner=new Float64Array(Re*Re),this.f=new Float64Array(Re),this.d=new Float64Array(Re),this.z=new Float64Array(Re+1),this.v=new Int16Array(Re),this.middle=Math.round(Re/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function f(ce,Z,he,Q,ve,Ae,Re){for(var Ye=0;Ye<Z;Ye++){for(var ut=0;ut<he;ut++)Q[ut]=ce[ut*Z+Ye];for(u(Q,ve,Ae,Re,he),ut=0;ut<he;ut++)ce[ut*Z+Ye]=ve[ut]}for(ut=0;ut<he;ut++){for(Ye=0;Ye<Z;Ye++)Q[Ye]=ce[ut*Z+Ye];for(u(Q,ve,Ae,Re,Z),Ye=0;Ye<Z;Ye++)ce[ut*Z+Ye]=Math.sqrt(ve[Ye])}}function u(ce,Z,he,Q,ve){he[0]=0,Q[0]=-T,Q[1]=+T;for(var Ae=1,Re=0;Ae<ve;Ae++){for(var Ye=(ce[Ae]+Ae*Ae-(ce[he[Re]]+he[Re]*he[Re]))/(2*Ae-2*he[Re]);Ye<=Q[Re];)Re--,Ye=(ce[Ae]+Ae*Ae-(ce[he[Re]]+he[Re]*he[Re]))/(2*Ae-2*he[Re]);he[++Re]=Ae,Q[Re]=Ye,Q[Re+1]=+T}for(Ae=0,Re=0;Ae<ve;Ae++){for(;Q[Re+1]<Ae;)Re++;Z[Ae]=(Ae-he[Re])*(Ae-he[Re])+ce[he[Re]]}}M.prototype.draw=function(ce){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(ce,this.buffer,this.middle);for(var Z=this.ctx.getImageData(0,0,this.size,this.size),he=new Uint8ClampedArray(this.size*this.size),Q=0;Q<this.size*this.size;Q++){var ve=Z.data[4*Q+3]/255;this.gridOuter[Q]=1===ve?0:0===ve?T:Math.pow(Math.max(0,.5-ve),2),this.gridInner[Q]=1===ve?T:0===ve?0:Math.pow(Math.max(0,ve-.5),2)}for(f(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),f(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),Q=0;Q<this.size*this.size;Q++)he[Q]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[Q]-this.gridInner[Q])/this.radius+this.cutoff))));return he},y.default=A;var h=function(Z,he){this.requestManager=Z,this.localIdeographFontFamily=he,this.entries={}};h.prototype.setURL=function(Z){this.url=Z},h.prototype.getGlyphs=function(Z,he){var Q=this,ve=[];for(var Ae in Z)for(var Re=0,Ye=Z[Ae];Re<Ye.length;Re+=1)ve.push({stack:Ae,id:Ye[Re]});e.asyncAll(ve,function(Mt,jt){var ur=Mt.stack,gr=Mt.id,Pr=Q.entries[ur];Pr||(Pr=Q.entries[ur]={glyphs:{},requests:{},ranges:{}});var Gr=Pr.glyphs[gr];if(void 0===Gr){if(Gr=Q._tinySDF(Pr,ur,gr))return Pr.glyphs[gr]=Gr,void jt(null,{stack:ur,id:gr,glyph:Gr});var Yr=Math.floor(gr/256);if(256*Yr>65535)jt(new Error("glyphs > 65535 not supported"));else if(Pr.ranges[Yr])jt(null,{stack:ur,id:gr,glyph:Gr});else{var Ur=Pr.requests[Yr];Ur||(Ur=Pr.requests[Yr]=[],h.loadGlyphRange(ur,Yr,Q.url,Q.requestManager,function(tn,pn){if(pn){for(var Cn in pn)Q._doesCharSupportLocalGlyph(+Cn)||(Pr.glyphs[+Cn]=pn[+Cn]);Pr.ranges[Yr]=!0}for(var Nn=0,Kn=Ur;Nn<Kn.length;Nn+=1)(0,Kn[Nn])(tn,pn);delete Pr.requests[Yr]})),Ur.push(function(tn,pn){tn?jt(tn):pn&&jt(null,{stack:ur,id:gr,glyph:pn[gr]||null})})}}else jt(null,{stack:ur,id:gr,glyph:Gr})},function(Mt,jt){if(Mt)he(Mt);else if(jt){for(var ur={},gr=0,Pr=jt;gr<Pr.length;gr+=1){var Gr=Pr[gr],Yr=Gr.stack,Ur=Gr.id,tn=Gr.glyph;(ur[Yr]||(ur[Yr]={}))[Ur]=tn&&{id:tn.id,bitmap:tn.bitmap.clone(),metrics:tn.metrics}}he(null,ur)}})},h.prototype._doesCharSupportLocalGlyph=function(Z){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](Z)||e.isChar["Hangul Syllables"](Z)||e.isChar.Hiragana(Z)||e.isChar.Katakana(Z))},h.prototype._tinySDF=function(Z,he,Q){var ve=this.localIdeographFontFamily;if(ve&&this._doesCharSupportLocalGlyph(Q)){var Ae=Z.tinySDF;if(!Ae){var Re="400";/bold/i.test(he)?Re="900":/medium/i.test(he)?Re="500":/light/i.test(he)&&(Re="200"),Ae=Z.tinySDF=new h.TinySDF(24,3,8,.25,ve,Re)}return{id:Q,bitmap:new e.AlphaImage({width:30,height:30},Ae.draw(String.fromCharCode(Q))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},h.loadGlyphRange=function l(ce,Z,he,Q,ve){var Ae=256*Z,Re=Ae+255,Ye=Q.transformRequest(Q.normalizeGlyphsURL(he).replace("{fontstack}",ce).replace("{range}",Ae+"-"+Re),e.ResourceType.Glyphs);e.getArrayBuffer(Ye,function(ut,Mt){if(ut)ve(ut);else if(Mt){for(var jt={},ur=0,gr=e.parseGlyphPBF(Mt);ur<gr.length;ur+=1){var Pr=gr[ur];jt[Pr.id]=Pr}ve(null,jt)}})},h.TinySDF=y;var o=function(){this.specification=e.styleSpec.light.position};o.prototype.possiblyEvaluate=function(Z,he){return e.sphericalToCartesian(Z.expression.evaluate(he))},o.prototype.interpolate=function(Z,he,Q){return{x:e.number(Z.x,he.x,Q),y:e.number(Z.y,he.y,Q),z:e.number(Z.z,he.z,Q)}};var C=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new o,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),R="-transition",z=function(ce){function Z(he){ce.call(this),this._transitionable=new e.Transitionable(C),this.setLight(he),this._transitioning=this._transitionable.untransitioned()}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getLight=function(){return this._transitionable.serialize()},Z.prototype.setLight=function(Q,ve){if(void 0===ve&&(ve={}),!this._validate(e.validateLight,Q,ve))for(var Ae in Q){var Re=Q[Ae];e.endsWith(Ae,R)?this._transitionable.setTransition(Ae.slice(0,-R.length),Re):this._transitionable.setValue(Ae,Re)}},Z.prototype.updateTransitions=function(Q){this._transitioning=this._transitionable.transitioned(Q,this._transitioning)},Z.prototype.hasTransition=function(){return this._transitioning.hasTransition()},Z.prototype.recalculate=function(Q){this.properties=this._transitioning.possiblyEvaluate(Q)},Z.prototype._validate=function(Q,ve,Ae){return(!Ae||!1!==Ae.validate)&&e.emitValidationErrors(this,Q.call(e.validateStyle,e.extend({value:ve,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},Z}(e.Evented),O=function(Z,he){this.width=Z,this.height=he,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};O.prototype.getDash=function(Z,he){var Q=Z.join(",")+String(he);return this.dashEntry[Q]||(this.dashEntry[Q]=this.addDash(Z,he)),this.dashEntry[Q]},O.prototype.getDashRanges=function(Z,he,Q){var Ae=[],Re=Z.length%2==1?-Z[Z.length-1]*Q:0,Ye=Z[0]*Q,ut=!0;Ae.push({left:Re,right:Ye,isDash:ut,zeroLength:0===Z[0]});for(var Mt=Z[0],jt=1;jt<Z.length;jt++){var ur=Z[jt];Ae.push({left:Re=Mt*Q,right:Ye=(Mt+=ur)*Q,isDash:ut=!ut,zeroLength:0===ur})}return Ae},O.prototype.addRoundDash=function(Z,he,Q){for(var ve=he/2,Ae=-Q;Ae<=Q;Ae++)for(var Ye=this.width*(this.nextRow+Q+Ae),ut=0,Mt=Z[ut],jt=0;jt<this.width;jt++){jt/Mt.right>1&&(Mt=Z[++ut]);var ur=Math.abs(jt-Mt.left),gr=Math.abs(jt-Mt.right),Pr=Math.min(ur,gr),Gr=void 0,Yr=Ae/Q*(ve+1);if(Mt.isDash){var Ur=ve-Math.abs(Yr);Gr=Math.sqrt(Pr*Pr+Ur*Ur)}else Gr=ve-Math.sqrt(Pr*Pr+Yr*Yr);this.data[Ye+jt]=Math.max(0,Math.min(255,Gr+128))}},O.prototype.addRegularDash=function(Z){for(var he=Z.length-1;he>=0;--he){var Q=Z[he],ve=Z[he+1];Q.zeroLength?Z.splice(he,1):ve&&ve.isDash===Q.isDash&&(ve.left=Q.left,Z.splice(he,1))}var Ae=Z[0],Re=Z[Z.length-1];Ae.isDash===Re.isDash&&(Ae.left=Re.left-this.width,Re.right=Ae.right+this.width);for(var Ye=this.width*this.nextRow,ut=0,Mt=Z[ut],jt=0;jt<this.width;jt++){jt/Mt.right>1&&(Mt=Z[++ut]);var ur=Math.abs(jt-Mt.left),gr=Math.abs(jt-Mt.right),Pr=Math.min(ur,gr);this.data[Ye+jt]=Math.max(0,Math.min(255,(Mt.isDash?Pr:-Pr)+128))}},O.prototype.addDash=function(Z,he){var Q=he?7:0,ve=2*Q+1;if(this.nextRow+ve>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var Ae=0,Re=0;Re<Z.length;Re++)Ae+=Z[Re];if(0!==Ae){var Ye=this.width/Ae,ut=this.getDashRanges(Z,this.width,Ye);he?this.addRoundDash(ut,Ye,Q):this.addRegularDash(ut)}var Mt={y:(this.nextRow+Q+.5)/this.height,height:2*Q/this.height,width:Ae};return this.nextRow+=ve,this.dirty=!0,Mt},O.prototype.bind=function(Z){var he=Z.gl;this.texture?(he.bindTexture(he.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,he.texSubImage2D(he.TEXTURE_2D,0,0,0,this.width,this.height,he.ALPHA,he.UNSIGNED_BYTE,this.data))):(this.texture=he.createTexture(),he.bindTexture(he.TEXTURE_2D,this.texture),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_WRAP_S,he.REPEAT),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_WRAP_T,he.REPEAT),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_MIN_FILTER,he.LINEAR),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_MAG_FILTER,he.LINEAR),he.texImage2D(he.TEXTURE_2D,0,he.ALPHA,this.width,this.height,0,he.ALPHA,he.UNSIGNED_BYTE,this.data))};var I=function ce(Z,he){this.workerPool=Z,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var Q=this.workerPool.acquire(this.id),ve=0;ve<Q.length;ve++){var Re=new ce.Actor(Q[ve],he,this.id);Re.name="Worker "+ve,this.actors.push(Re)}};function F(ce,Z,he){var Q=function(ve,Ae){if(ve)return he(ve);if(Ae){var Re=e.pick(e.extend(Ae,ce),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Ae.vector_layers&&(Re.vectorLayers=Ae.vector_layers,Re.vectorLayerIds=Re.vectorLayers.map(function(Ye){return Ye.id})),Re.tiles=Z.canonicalizeTileset(Re,ce.url),he(null,Re)}};return ce.url?e.getJSON(Z.transformRequest(Z.normalizeSourceURL(ce.url),e.ResourceType.Source),Q):e.browser.frame(function(){return Q(null,ce)})}I.prototype.broadcast=function(Z,he,Q){e.asyncAll(this.actors,function(ve,Ae){ve.send(Z,he,Ae)},Q=Q||function(){})},I.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},I.prototype.remove=function(){this.actors.forEach(function(Z){Z.remove()}),this.actors=[],this.workerPool.release(this.id)},I.Actor=e.Actor;var D=function(Z,he,Q){this.bounds=e.LngLatBounds.convert(this.validateBounds(Z)),this.minzoom=he||0,this.maxzoom=Q||24};D.prototype.validateBounds=function(Z){return Array.isArray(Z)&&4===Z.length?[Math.max(-180,Z[0]),Math.max(-90,Z[1]),Math.min(180,Z[2]),Math.min(90,Z[3])]:[-180,-90,180,90]},D.prototype.contains=function(Z){var he=Math.pow(2,Z.z),Q_minX=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*he),Q_minY=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*he),Q_maxX=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*he),Q_maxY=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*he);return Z.x>=Q_minX&&Z.x<Q_maxX&&Z.y>=Q_minY&&Z.y<Q_maxY};var N=function(ce){function Z(he,Q,ve,Ae){if(ce.call(this),this.id=he,this.dispatcher=ve,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(Q,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},Q),this._collectResourceTiming=Q.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Ae)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.load=function(){var Q=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=F(this._options,this.map._requestManager,function(ve,Ae){Q._tileJSONRequest=null,Q._loaded=!0,ve?Q.fire(new e.ErrorEvent(ve)):Ae&&(e.extend(Q,Ae),Ae.bounds&&(Q.tileBounds=new D(Ae.bounds,Q.minzoom,Q.maxzoom)),e.postTurnstileEvent(Ae.tiles,Q.map._requestManager._customAccessToken),e.postMapLoadEvent(Ae.tiles,Q.map._getMapId(),Q.map._requestManager._skuToken,Q.map._requestManager._customAccessToken),Q.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),Q.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},Z.prototype.loaded=function(){return this._loaded},Z.prototype.hasTile=function(Q){return!this.tileBounds||this.tileBounds.contains(Q.canonical)},Z.prototype.onAdd=function(Q){this.map=Q,this.load()},Z.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Z.prototype.serialize=function(){return e.extend({},this._options)},Z.prototype.loadTile=function(Q,ve){var Ae=this.map._requestManager.normalizeTileURL(Q.tileID.canonical.url(this.tiles,this.scheme)),Re={request:this.map._requestManager.transformRequest(Ae,e.ResourceType.Tile),uid:Q.uid,tileID:Q.tileID,zoom:Q.tileID.overscaledZ,tileSize:this.tileSize*Q.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function Ye(ut,Mt){return delete Q.request,Q.aborted?ve(null):ut&&404!==ut.status?ve(ut):(Mt&&Mt.resourceTiming&&(Q.resourceTiming=Mt.resourceTiming),this.map._refreshExpiredTiles&&Mt&&Q.setExpiryData(Mt),Q.loadVectorData(Mt,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),ve(null),void(Q.reloadCallback&&(this.loadTile(Q,Q.reloadCallback),Q.reloadCallback=null)))}Re.request.collectResourceTiming=this._collectResourceTiming,Q.actor&&"expired"!==Q.state?"loading"===Q.state?Q.reloadCallback=ve:Q.request=Q.actor.send("reloadTile",Re,Ye.bind(this)):(Q.actor=this.dispatcher.getActor(),Q.request=Q.actor.send("loadTile",Re,Ye.bind(this)))},Z.prototype.abortTile=function(Q){Q.request&&(Q.request.cancel(),delete Q.request),Q.actor&&Q.actor.send("abortTile",{uid:Q.uid,type:this.type,source:this.id},void 0)},Z.prototype.unloadTile=function(Q){Q.unloadVectorData(),Q.actor&&Q.actor.send("removeTile",{uid:Q.uid,type:this.type,source:this.id},void 0)},Z.prototype.hasTransition=function(){return!1},Z}(e.Evented),U=function(ce){function Z(he,Q,ve,Ae){ce.call(this),this.id=he,this.dispatcher=ve,this.setEventedParent(Ae),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},Q),e.extend(this,e.pick(Q,["url","scheme","tileSize"]))}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.load=function(){var Q=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=F(this._options,this.map._requestManager,function(ve,Ae){Q._tileJSONRequest=null,Q._loaded=!0,ve?Q.fire(new e.ErrorEvent(ve)):Ae&&(e.extend(Q,Ae),Ae.bounds&&(Q.tileBounds=new D(Ae.bounds,Q.minzoom,Q.maxzoom)),e.postTurnstileEvent(Ae.tiles),e.postMapLoadEvent(Ae.tiles,Q.map._getMapId(),Q.map._requestManager._skuToken),Q.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),Q.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},Z.prototype.loaded=function(){return this._loaded},Z.prototype.onAdd=function(Q){this.map=Q,this.load()},Z.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Z.prototype.serialize=function(){return e.extend({},this._options)},Z.prototype.hasTile=function(Q){return!this.tileBounds||this.tileBounds.contains(Q.canonical)},Z.prototype.loadTile=function(Q,ve){var Ae=this,Re=this.map._requestManager.normalizeTileURL(Q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);Q.request=e.getImage(this.map._requestManager.transformRequest(Re,e.ResourceType.Tile),function(Ye,ut){if(delete Q.request,Q.aborted)Q.state="unloaded",ve(null);else if(Ye)Q.state="errored",ve(Ye);else if(ut){Ae.map._refreshExpiredTiles&&Q.setExpiryData(ut),delete ut.cacheControl,delete ut.expires;var Mt=Ae.map.painter.context,jt=Mt.gl;Q.texture=Ae.map.painter.getTileTexture(ut.width),Q.texture?Q.texture.update(ut,{useMipmap:!0}):(Q.texture=new e.Texture(Mt,ut,jt.RGBA,{useMipmap:!0}),Q.texture.bind(jt.LINEAR,jt.CLAMP_TO_EDGE,jt.LINEAR_MIPMAP_NEAREST),Mt.extTextureFilterAnisotropic&&jt.texParameterf(jt.TEXTURE_2D,Mt.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Mt.extTextureFilterAnisotropicMax)),Q.state="loaded",e.cacheEntryPossiblyAdded(Ae.dispatcher),ve(null)}})},Z.prototype.abortTile=function(Q,ve){Q.request&&(Q.request.cancel(),delete Q.request),ve()},Z.prototype.unloadTile=function(Q,ve){Q.texture&&this.map.painter.saveTileTexture(Q.texture),ve()},Z.prototype.hasTransition=function(){return!1},Z}(e.Evented),X=function(ce){function Z(he,Q,ve,Ae){ce.call(this,he,Q,ve,Ae),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},Q),this.encoding=Q.encoding||"mapbox"}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},Z.prototype.loadTile=function(Q,ve){var Ae=this.map._requestManager.normalizeTileURL(Q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Ye(ut,Mt){ut&&(Q.state="errored",ve(ut)),Mt&&(Q.dem=Mt,Q.needsHillshadePrepare=!0,Q.state="loaded",ve(null))}Q.request=e.getImage(this.map._requestManager.transformRequest(Ae,e.ResourceType.Tile),function Re(ut,Mt){if(delete Q.request,Q.aborted)Q.state="unloaded",ve(null);else if(ut)Q.state="errored",ve(ut);else if(Mt){this.map._refreshExpiredTiles&&Q.setExpiryData(Mt),delete Mt.cacheControl,delete Mt.expires;var ur=e.window.ImageBitmap&&Mt instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?Mt:e.browser.getImageData(Mt,1),gr={uid:Q.uid,coord:Q.tileID,source:this.id,rawImageData:ur,encoding:this.encoding};(!Q.actor||"expired"===Q.state)&&(Q.actor=this.dispatcher.getActor(),Q.actor.send("loadDEMTile",gr,Ye.bind(this)))}}.bind(this)),Q.neighboringTiles=this._getNeighboringTiles(Q.tileID)},Z.prototype._getNeighboringTiles=function(Q){var ve=Q.canonical,Ae=Math.pow(2,ve.z),Re=(ve.x-1+Ae)%Ae,Ye=0===ve.x?Q.wrap-1:Q.wrap,ut=(ve.x+1+Ae)%Ae,Mt=ve.x+1===Ae?Q.wrap+1:Q.wrap,jt={};return jt[new e.OverscaledTileID(Q.overscaledZ,Ye,ve.z,Re,ve.y).key]={backfilled:!1},jt[new e.OverscaledTileID(Q.overscaledZ,Mt,ve.z,ut,ve.y).key]={backfilled:!1},ve.y>0&&(jt[new e.OverscaledTileID(Q.overscaledZ,Ye,ve.z,Re,ve.y-1).key]={backfilled:!1},jt[new e.OverscaledTileID(Q.overscaledZ,Q.wrap,ve.z,ve.x,ve.y-1).key]={backfilled:!1},jt[new e.OverscaledTileID(Q.overscaledZ,Mt,ve.z,ut,ve.y-1).key]={backfilled:!1}),ve.y+1<Ae&&(jt[new e.OverscaledTileID(Q.overscaledZ,Ye,ve.z,Re,ve.y+1).key]={backfilled:!1},jt[new e.OverscaledTileID(Q.overscaledZ,Q.wrap,ve.z,ve.x,ve.y+1).key]={backfilled:!1},jt[new e.OverscaledTileID(Q.overscaledZ,Mt,ve.z,ut,ve.y+1).key]={backfilled:!1}),jt},Z.prototype.unloadTile=function(Q){Q.demTexture&&this.map.painter.saveTileTexture(Q.demTexture),Q.fbo&&(Q.fbo.destroy(),delete Q.fbo),Q.dem&&delete Q.dem,delete Q.neighboringTiles,Q.state="unloaded",Q.actor&&Q.actor.send("removeDEMTile",{uid:Q.uid,source:this.id})},Z}(U),oe=function(ce){function Z(he,Q,ve,Ae){ce.call(this),this.id=he,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=ve.getActor(),this.setEventedParent(Ae),this._data=Q.data,this._options=e.extend({},Q),this._collectResourceTiming=Q.collectResourceTiming,this._resourceTiming=[],void 0!==Q.maxzoom&&(this.maxzoom=Q.maxzoom),Q.type&&(this.type=Q.type),Q.attribution&&(this.attribution=Q.attribution),this.promoteId=Q.promoteId;var Re=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:Q.cluster||!1,geojsonVtOptions:{buffer:(void 0!==Q.buffer?Q.buffer:128)*Re,tolerance:(void 0!==Q.tolerance?Q.tolerance:.375)*Re,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:Q.lineMetrics||!1,generateId:Q.generateId||!1},superclusterOptions:{maxZoom:void 0!==Q.clusterMaxZoom?Math.min(Q.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(Q.clusterRadius||50)*Re,log:!1,generateId:Q.generateId||!1},clusterProperties:Q.clusterProperties},Q.workerOptions)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.load=function(){var Q=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ve){if(ve)Q.fire(new e.ErrorEvent(ve));else{var Ae={dataType:"source",sourceDataType:"metadata"};Q._collectResourceTiming&&Q._resourceTiming&&Q._resourceTiming.length>0&&(Ae.resourceTiming=Q._resourceTiming,Q._resourceTiming=[]),Q.fire(new e.Event("data",Ae))}})},Z.prototype.onAdd=function(Q){this.map=Q,this.load()},Z.prototype.setData=function(Q){var ve=this;return this._data=Q,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Ae){if(Ae)ve.fire(new e.ErrorEvent(Ae));else{var Re={dataType:"source",sourceDataType:"content"};ve._collectResourceTiming&&ve._resourceTiming&&ve._resourceTiming.length>0&&(Re.resourceTiming=ve._resourceTiming,ve._resourceTiming=[]),ve.fire(new e.Event("data",Re))}}),this},Z.prototype.getClusterExpansionZoom=function(Q,ve){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:Q,source:this.id},ve),this},Z.prototype.getClusterChildren=function(Q,ve){return this.actor.send("geojson.getClusterChildren",{clusterId:Q,source:this.id},ve),this},Z.prototype.getClusterLeaves=function(Q,ve,Ae,Re){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:Q,limit:ve,offset:Ae},Re),this},Z.prototype._updateWorkerData=function(Q){var ve=this;this._loaded=!1;var Ae=e.extend({},this.workerOptions),Re=this._data;"string"==typeof Re?(Ae.request=this.map._requestManager.transformRequest(e.browser.resolveURL(Re),e.ResourceType.Source),Ae.request.collectResourceTiming=this._collectResourceTiming):Ae.data=JSON.stringify(Re),this.actor.send(this.type+".loadData",Ae,function(Ye,ut){ve._removed||ut&&ut.abandoned||(ve._loaded=!0,ut&&ut.resourceTiming&&ut.resourceTiming[ve.id]&&(ve._resourceTiming=ut.resourceTiming[ve.id].slice(0)),ve.actor.send(ve.type+".coalesce",{source:Ae.source},null),Q(Ye))})},Z.prototype.loaded=function(){return this._loaded},Z.prototype.loadTile=function(Q,ve){var Ae=this,Re=Q.actor?"reloadTile":"loadTile";Q.actor=this.actor,Q.request=this.actor.send(Re,{type:this.type,uid:Q.uid,tileID:Q.tileID,zoom:Q.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(ut,Mt){return delete Q.request,Q.unloadVectorData(),Q.aborted?ve(null):ut?ve(ut):(Q.loadVectorData(Mt,Ae.map.painter,"reloadTile"===Re),ve(null))})},Z.prototype.abortTile=function(Q){Q.request&&(Q.request.cancel(),delete Q.request),Q.aborted=!0},Z.prototype.unloadTile=function(Q){Q.unloadVectorData(),this.actor.send("removeTile",{uid:Q.uid,type:this.type,source:this.id})},Z.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},Z.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},Z.prototype.hasTransition=function(){return!1},Z}(e.Evented),se=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),ne=function(ce){function Z(he,Q,ve,Ae){ce.call(this),this.id=he,this.dispatcher=ve,this.coordinates=Q.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Ae),this.options=Q}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.load=function(Q,ve){var Ae=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(Re,Ye){Ae._loaded=!0,Re?Ae.fire(new e.ErrorEvent(Re)):Ye&&(Ae.image=Ye,Q&&(Ae.coordinates=Q),ve&&ve(),Ae._finishLoading())})},Z.prototype.loaded=function(){return this._loaded},Z.prototype.updateImage=function(Q){var ve=this;return this.image&&Q.url?(this.options.url=Q.url,this.load(Q.coordinates,function(){ve.texture=null}),this):this},Z.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},Z.prototype.onAdd=function(Q){this.map=Q,this.load()},Z.prototype.setCoordinates=function(Q){var ve=this;this.coordinates=Q;var Ae=Q.map(e.MercatorCoordinate.fromLngLat);this.tileID=function W(ce){for(var Z=1/0,he=1/0,Q=-1/0,ve=-1/0,Ae=0,Re=ce;Ae<Re.length;Ae+=1){var Ye=Re[Ae];Z=Math.min(Z,Ye.x),he=Math.min(he,Ye.y),Q=Math.max(Q,Ye.x),ve=Math.max(ve,Ye.y)}var jt=Math.max(Q-Z,ve-he),ur=Math.max(0,Math.floor(-Math.log(jt)/Math.LN2)),gr=Math.pow(2,ur);return new e.CanonicalTileID(ur,Math.floor((Z+Q)/2*gr),Math.floor((he+ve)/2*gr))}(Ae),this.minzoom=this.maxzoom=this.tileID.z;var Re=Ae.map(function(Ye){return ve.tileID.getTilePoint(Ye)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(Re[0].x,Re[0].y,0,0),this._boundsArray.emplaceBack(Re[1].x,Re[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(Re[3].x,Re[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(Re[2].x,Re[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},Z.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var Q=this.map.painter.context,ve=Q.gl;for(var Ae in this.boundsBuffer||(this.boundsBuffer=Q.createVertexBuffer(this._boundsArray,se.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(Q,this.image,ve.RGBA),this.texture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)),this.tiles){var Re=this.tiles[Ae];"loaded"!==Re.state&&(Re.state="loaded",Re.texture=this.texture)}}},Z.prototype.loadTile=function(Q,ve){this.tileID&&this.tileID.equals(Q.tileID.canonical)?(this.tiles[String(Q.tileID.wrap)]=Q,Q.buckets={},ve(null)):(Q.state="errored",ve(null))},Z.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},Z.prototype.hasTransition=function(){return!1},Z}(e.Evented);var G=function(ce){function Z(he,Q,ve,Ae){ce.call(this,he,Q,ve,Ae),this.roundZoom=!0,this.type="video",this.options=Q}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.load=function(){var Q=this;this._loaded=!1;var ve=this.options;this.urls=[];for(var Ae=0,Re=ve.urls;Ae<Re.length;Ae+=1)this.urls.push(this.map._requestManager.transformRequest(Re[Ae],e.ResourceType.Source).url);e.getVideo(this.urls,function(ut,Mt){Q._loaded=!0,ut?Q.fire(new e.ErrorEvent(ut)):Mt&&(Q.video=Mt,Q.video.loop=!0,Q.video.addEventListener("playing",function(){Q.map.triggerRepaint()}),Q.map&&Q.video.play(),Q._finishLoading())})},Z.prototype.pause=function(){this.video&&this.video.pause()},Z.prototype.play=function(){this.video&&this.video.play()},Z.prototype.seek=function(Q){if(this.video){var ve=this.video.seekable;Q<ve.start(0)||Q>ve.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+ve.start(0)+" and "+ve.end(0)+"-second mark."))):this.video.currentTime=Q}},Z.prototype.getVideo=function(){return this.video},Z.prototype.onAdd=function(Q){this.map||(this.map=Q,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},Z.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var Q=this.map.painter.context,ve=Q.gl;for(var Ae in this.boundsBuffer||(this.boundsBuffer=Q.createVertexBuffer(this._boundsArray,se.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),ve.texSubImage2D(ve.TEXTURE_2D,0,0,0,ve.RGBA,ve.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(Q,this.video,ve.RGBA),this.texture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)),this.tiles){var Re=this.tiles[Ae];"loaded"!==Re.state&&(Re.state="loaded",Re.texture=this.texture)}}},Z.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},Z.prototype.hasTransition=function(){return this.video&&!this.video.paused},Z}(ne),$=function(ce){function Z(he,Q,ve,Ae){ce.call(this,he,Q,ve,Ae),Q.coordinates?(!Array.isArray(Q.coordinates)||4!==Q.coordinates.length||Q.coordinates.some(function(Re){return!Array.isArray(Re)||2!==Re.length||Re.some(function(Ye){return"number"!=typeof Ye})}))&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+he,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+he,null,'missing required property "coordinates"'))),Q.animate&&"boolean"!=typeof Q.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+he,null,'optional "animate" property must be a boolean value'))),Q.canvas?"string"!=typeof Q.canvas&&!(Q.canvas instanceof e.window.HTMLCanvasElement)&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+he,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+he,null,'missing required property "canvas"'))),this.options=Q,this.animate=void 0===Q.animate||Q.animate}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},Z.prototype.getCanvas=function(){return this.canvas},Z.prototype.onAdd=function(Q){this.map=Q,this.load(),this.canvas&&this.animate&&this.play()},Z.prototype.onRemove=function(){this.pause()},Z.prototype.prepare=function(){var Q=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,Q=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,Q=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var ve=this.map.painter.context,Ae=ve.gl;for(var Re in this.boundsBuffer||(this.boundsBuffer=ve.createVertexBuffer(this._boundsArray,se.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(Q||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(ve,this.canvas,Ae.RGBA,{premultiply:!0}),this.tiles){var Ye=this.tiles[Re];"loaded"!==Ye.state&&(Ye.state="loaded",Ye.texture=this.texture)}}},Z.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},Z.prototype.hasTransition=function(){return this._playing},Z.prototype._hasInvalidDimensions=function(){for(var Q=0,ve=[this.canvas.width,this.canvas.height];Q<ve.length;Q+=1){var Ae=ve[Q];if(isNaN(Ae)||Ae<=0)return!0}return!1},Z}(ne),V={vector:N,raster:U,"raster-dem":X,geojson:oe,video:G,image:ne,canvas:$};function Y(ce,Z){var he=e.identity([]);return e.translate(he,he,[1,1,0]),e.scale(he,he,[.5*ce.width,.5*ce.height,1]),e.multiply(he,he,ce.calculatePosMatrix(Z.toUnwrapped()))}function J(ce,Z,he,Q,ve,Ae){var Re=function te(ce,Z,he){if(ce)for(var Q=0,ve=ce;Q<ve.length;Q+=1){var Re=Z[ve[Q]];if(Re&&Re.source===he&&"fill-extrusion"===Re.type)return!0}else for(var Ye in Z){var ut=Z[Ye];if(ut.source===he&&"fill-extrusion"===ut.type)return!0}return!1}(ve&&ve.layers,Z,ce.id),Ye=Ae.maxPitchScaleFactor(),ut=ce.tilesIn(Q,Ye,Re);ut.sort(le);for(var Mt=[],jt=0,ur=ut;jt<ur.length;jt+=1){var gr=ur[jt];Mt.push({wrappedTileID:gr.tileID.wrapped().key,queryResults:gr.tile.queryRenderedFeatures(Z,he,ce._state,gr.queryGeometry,gr.cameraQueryGeometry,gr.scale,ve,Ae,Ye,Y(ce.transform,gr.tileID))})}var Pr=function ge(ce){for(var Z={},he={},Q=0,ve=ce;Q<ve.length;Q+=1){var Ae=ve[Q],Re=Ae.queryResults,Ye=Ae.wrappedTileID,ut=he[Ye]=he[Ye]||{};for(var Mt in Re)for(var jt=Re[Mt],ur=ut[Mt]=ut[Mt]||{},gr=Z[Mt]=Z[Mt]||[],Pr=0,Gr=jt;Pr<Gr.length;Pr+=1){var Yr=Gr[Pr];ur[Yr.featureIndex]||(ur[Yr.featureIndex]=!0,gr.push(Yr))}}return Z}(Mt);for(var Gr in Pr)Pr[Gr].forEach(function(Yr){var Ur=Yr.feature,tn=ce.getFeatureState(Ur.layer["source-layer"],Ur.id);Ur.source=Ur.layer.source,Ur.layer["source-layer"]&&(Ur.sourceLayer=Ur.layer["source-layer"]),Ur.state=tn});return Pr}function le(ce,Z){var he=ce.tileID,Q=Z.tileID;return he.overscaledZ-Q.overscaledZ||he.canonical.y-Q.canonical.y||he.wrap-Q.wrap||he.canonical.x-Q.canonical.x}var pe=function(Z,he){this.max=Z,this.onRemove=he,this.reset()};pe.prototype.reset=function(){for(var Z in this.data)for(var he=0,Q=this.data[Z];he<Q.length;he+=1){var ve=Q[he];ve.timeout&&clearTimeout(ve.timeout),this.onRemove(ve.value)}return this.data={},this.order=[],this},pe.prototype.add=function(Z,he,Q){var ve=this,Ae=Z.wrapped().key;void 0===this.data[Ae]&&(this.data[Ae]=[]);var Re={value:he,timeout:void 0};if(void 0!==Q&&(Re.timeout=setTimeout(function(){ve.remove(Z,Re)},Q)),this.data[Ae].push(Re),this.order.push(Ae),this.order.length>this.max){var Ye=this._getAndRemoveByKey(this.order[0]);Ye&&this.onRemove(Ye)}return this},pe.prototype.has=function(Z){return Z.wrapped().key in this.data},pe.prototype.getAndRemove=function(Z){return this.has(Z)?this._getAndRemoveByKey(Z.wrapped().key):null},pe.prototype._getAndRemoveByKey=function(Z){var he=this.data[Z].shift();return he.timeout&&clearTimeout(he.timeout),0===this.data[Z].length&&delete this.data[Z],this.order.splice(this.order.indexOf(Z),1),he.value},pe.prototype.getByKey=function(Z){var he=this.data[Z];return he?he[0].value:null},pe.prototype.get=function(Z){return this.has(Z)?this.data[Z.wrapped().key][0].value:null},pe.prototype.remove=function(Z,he){if(!this.has(Z))return this;var Q=Z.wrapped().key,ve=void 0===he?0:this.data[Q].indexOf(he),Ae=this.data[Q][ve];return this.data[Q].splice(ve,1),Ae.timeout&&clearTimeout(Ae.timeout),0===this.data[Q].length&&delete this.data[Q],this.onRemove(Ae.value),this.order.splice(this.order.indexOf(Q),1),this},pe.prototype.setMaxSize=function(Z){for(this.max=Z;this.order.length>this.max;){var he=this._getAndRemoveByKey(this.order[0]);he&&this.onRemove(he)}return this},pe.prototype.filter=function(Z){var he=[];for(var Q in this.data)for(var ve=0,Ae=this.data[Q];ve<Ae.length;ve+=1){var Re=Ae[ve];Z(Re.value)||he.push(Re)}for(var Ye=0,ut=he;Ye<ut.length;Ye+=1){var Mt=ut[Ye];this.remove(Mt.value.tileID,Mt)}};var xe=function(Z,he,Q){this.context=Z;var ve=Z.gl;this.buffer=ve.createBuffer(),this.dynamicDraw=Boolean(Q),this.context.unbindVAO(),Z.bindElementBuffer.set(this.buffer),ve.bufferData(ve.ELEMENT_ARRAY_BUFFER,he.arrayBuffer,this.dynamicDraw?ve.DYNAMIC_DRAW:ve.STATIC_DRAW),this.dynamicDraw||delete he.arrayBuffer};xe.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},xe.prototype.updateData=function(Z){var he=this.context.gl;this.context.unbindVAO(),this.bind(),he.bufferSubData(he.ELEMENT_ARRAY_BUFFER,0,Z.arrayBuffer)},xe.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ke={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},we=function(Z,he,Q,ve){this.length=he.length,this.attributes=Q,this.itemSize=he.bytesPerElement,this.dynamicDraw=ve,this.context=Z;var Ae=Z.gl;this.buffer=Ae.createBuffer(),Z.bindVertexBuffer.set(this.buffer),Ae.bufferData(Ae.ARRAY_BUFFER,he.arrayBuffer,this.dynamicDraw?Ae.DYNAMIC_DRAW:Ae.STATIC_DRAW),this.dynamicDraw||delete he.arrayBuffer};we.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},we.prototype.updateData=function(Z){var he=this.context.gl;this.bind(),he.bufferSubData(he.ARRAY_BUFFER,0,Z.arrayBuffer)},we.prototype.enableAttributes=function(Z,he){for(var Q=0;Q<this.attributes.length;Q++){var Ae=he.attributes[this.attributes[Q].name];void 0!==Ae&&Z.enableVertexAttribArray(Ae)}},we.prototype.setVertexAttribPointers=function(Z,he,Q){for(var ve=0;ve<this.attributes.length;ve++){var Ae=this.attributes[ve],Re=he.attributes[Ae.name];void 0!==Re&&Z.vertexAttribPointer(Re,Ae.components,Z[ke[Ae.type]],!1,this.itemSize,Ae.offset+this.itemSize*(Q||0))}},we.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var de=function(Z){this.gl=Z.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};de.prototype.get=function(){return this.current},de.prototype.set=function(Z){},de.prototype.getDefault=function(){return this.default},de.prototype.setDefault=function(){this.set(this.default)};var be=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return e.Color.transparent},Z.prototype.set=function(Q){var ve=this.current;Q.r===ve.r&&Q.g===ve.g&&Q.b===ve.b&&Q.a===ve.a&&!this.dirty||(this.gl.clearColor(Q.r,Q.g,Q.b,Q.a),this.current=Q,this.dirty=!1)},Z}(de),Le=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return 1},Z.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.clearDepth(Q),this.current=Q,this.dirty=!1)},Z}(de),De=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return 0},Z.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.clearStencil(Q),this.current=Q,this.dirty=!1)},Z}(de),ye=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return[!0,!0,!0,!0]},Z.prototype.set=function(Q){var ve=this.current;Q[0]===ve[0]&&Q[1]===ve[1]&&Q[2]===ve[2]&&Q[3]===ve[3]&&!this.dirty||(this.gl.colorMask(Q[0],Q[1],Q[2],Q[3]),this.current=Q,this.dirty=!1)},Z}(de),Ce=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return!0},Z.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.depthMask(Q),this.current=Q,this.dirty=!1)},Z}(de),Fe=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return 255},Z.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.stencilMask(Q),this.current=Q,this.dirty=!1)},Z}(de),Ke=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},Z.prototype.set=function(Q){var ve=this.current;Q.func===ve.func&&Q.ref===ve.ref&&Q.mask===ve.mask&&!this.dirty||(this.gl.stencilFunc(Q.func,Q.ref,Q.mask),this.current=Q,this.dirty=!1)},Z}(de),Ue=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){var Q=this.gl;return[Q.KEEP,Q.KEEP,Q.KEEP]},Z.prototype.set=function(Q){var ve=this.current;Q[0]===ve[0]&&Q[1]===ve[1]&&Q[2]===ve[2]&&!this.dirty||(this.gl.stencilOp(Q[0],Q[1],Q[2]),this.current=Q,this.dirty=!1)},Z}(de),Be=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return!1},Z.prototype.set=function(Q){if(Q!==this.current||this.dirty){var ve=this.gl;Q?ve.enable(ve.STENCIL_TEST):ve.disable(ve.STENCIL_TEST),this.current=Q,this.dirty=!1}},Z}(de),Ie=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return[0,1]},Z.prototype.set=function(Q){var ve=this.current;Q[0]===ve[0]&&Q[1]===ve[1]&&!this.dirty||(this.gl.depthRange(Q[0],Q[1]),this.current=Q,this.dirty=!1)},Z}(de),nt=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return!1},Z.prototype.set=function(Q){if(Q!==this.current||this.dirty){var ve=this.gl;Q?ve.enable(ve.DEPTH_TEST):ve.disable(ve.DEPTH_TEST),this.current=Q,this.dirty=!1}},Z}(de),gt=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return this.gl.LESS},Z.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.depthFunc(Q),this.current=Q,this.dirty=!1)},Z}(de),Nt=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return!1},Z.prototype.set=function(Q){if(Q!==this.current||this.dirty){var ve=this.gl;Q?ve.enable(ve.BLEND):ve.disable(ve.BLEND),this.current=Q,this.dirty=!1}},Z}(de),St=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){var Q=this.gl;return[Q.ONE,Q.ZERO]},Z.prototype.set=function(Q){var ve=this.current;Q[0]===ve[0]&&Q[1]===ve[1]&&!this.dirty||(this.gl.blendFunc(Q[0],Q[1]),this.current=Q,this.dirty=!1)},Z}(de),Bt=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return e.Color.transparent},Z.prototype.set=function(Q){var ve=this.current;Q.r===ve.r&&Q.g===ve.g&&Q.b===ve.b&&Q.a===ve.a&&!this.dirty||(this.gl.blendColor(Q.r,Q.g,Q.b,Q.a),this.current=Q,this.dirty=!1)},Z}(de),Zt=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return this.gl.FUNC_ADD},Z.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.blendEquation(Q),this.current=Q,this.dirty=!1)},Z}(de),Et=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return!1},Z.prototype.set=function(Q){if(Q!==this.current||this.dirty){var ve=this.gl;Q?ve.enable(ve.CULL_FACE):ve.disable(ve.CULL_FACE),this.current=Q,this.dirty=!1}},Z}(de),wt=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return this.gl.BACK},Z.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.cullFace(Q),this.current=Q,this.dirty=!1)},Z}(de),at=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return this.gl.CCW},Z.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.frontFace(Q),this.current=Q,this.dirty=!1)},Z}(de),vt=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return null},Z.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.useProgram(Q),this.current=Q,this.dirty=!1)},Z}(de),Qe=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return this.gl.TEXTURE0},Z.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.activeTexture(Q),this.current=Q,this.dirty=!1)},Z}(de),Pe=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){var Q=this.gl;return[0,0,Q.drawingBufferWidth,Q.drawingBufferHeight]},Z.prototype.set=function(Q){var ve=this.current;Q[0]===ve[0]&&Q[1]===ve[1]&&Q[2]===ve[2]&&Q[3]===ve[3]&&!this.dirty||(this.gl.viewport(Q[0],Q[1],Q[2],Q[3]),this.current=Q,this.dirty=!1)},Z}(de),Ze=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return null},Z.prototype.set=function(Q){if(Q!==this.current||this.dirty){var ve=this.gl;ve.bindFramebuffer(ve.FRAMEBUFFER,Q),this.current=Q,this.dirty=!1}},Z}(de),Xe=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return null},Z.prototype.set=function(Q){if(Q!==this.current||this.dirty){var ve=this.gl;ve.bindRenderbuffer(ve.RENDERBUFFER,Q),this.current=Q,this.dirty=!1}},Z}(de),rt=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return null},Z.prototype.set=function(Q){if(Q!==this.current||this.dirty){var ve=this.gl;ve.bindTexture(ve.TEXTURE_2D,Q),this.current=Q,this.dirty=!1}},Z}(de),kt=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return null},Z.prototype.set=function(Q){if(Q!==this.current||this.dirty){var ve=this.gl;ve.bindBuffer(ve.ARRAY_BUFFER,Q),this.current=Q,this.dirty=!1}},Z}(de),Tt=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return null},Z.prototype.set=function(Q){var ve=this.gl;ve.bindBuffer(ve.ELEMENT_ARRAY_BUFFER,Q),this.current=Q,this.dirty=!1},Z}(de),Xt=function(ce){function Z(he){ce.call(this,he),this.vao=he.extVertexArrayObject}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return null},Z.prototype.set=function(Q){!this.vao||Q===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(Q),this.current=Q,this.dirty=!1)},Z}(de),ar=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return 4},Z.prototype.set=function(Q){if(Q!==this.current||this.dirty){var ve=this.gl;ve.pixelStorei(ve.UNPACK_ALIGNMENT,Q),this.current=Q,this.dirty=!1}},Z}(de),Ut=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return!1},Z.prototype.set=function(Q){if(Q!==this.current||this.dirty){var ve=this.gl;ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q),this.current=Q,this.dirty=!1}},Z}(de),Jt=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return!1},Z.prototype.set=function(Q){if(Q!==this.current||this.dirty){var ve=this.gl;ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,Q),this.current=Q,this.dirty=!1}},Z}(de),nr=function(ce){function Z(he,Q){ce.call(this,he),this.context=he,this.parent=Q}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getDefault=function(){return null},Z}(de),rr=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.setDirty=function(){this.dirty=!0},Z.prototype.set=function(Q){if(Q!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var ve=this.gl;ve.framebufferTexture2D(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_2D,Q,0),this.current=Q,this.dirty=!1}},Z}(nr),br=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.set=function(Q){if(Q!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var ve=this.gl;ve.framebufferRenderbuffer(ve.FRAMEBUFFER,ve.DEPTH_ATTACHMENT,ve.RENDERBUFFER,Q),this.current=Q,this.dirty=!1}},Z}(nr),Hr=function(Z,he,Q,ve){this.context=Z,this.width=he,this.height=Q;var Re=this.framebuffer=Z.gl.createFramebuffer();this.colorAttachment=new rr(Z,Re),ve&&(this.depthAttachment=new br(Z,Re))};Hr.prototype.destroy=function(){var Z=this.context.gl,he=this.colorAttachment.get();if(he&&Z.deleteTexture(he),this.depthAttachment){var Q=this.depthAttachment.get();Q&&Z.deleteRenderbuffer(Q)}Z.deleteFramebuffer(this.framebuffer)};var jr=function(Z,he,Q){this.func=Z,this.mask=he,this.range=Q};jr.ReadOnly=!1,jr.ReadWrite=!0,jr.disabled=new jr(519,jr.ReadOnly,[0,1]);var qt=function(Z,he,Q,ve,Ae,Re){this.test=Z,this.ref=he,this.mask=Q,this.fail=ve,this.depthFail=Ae,this.pass=Re};qt.disabled=new qt({func:519,mask:0},0,0,7680,7680,7680);var je=function(Z,he,Q){this.blendFunction=Z,this.blendColor=he,this.mask=Q};je.disabled=new je(je.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),je.unblended=new je(je.Replace,e.Color.transparent,[!0,!0,!0,!0]),je.alphaBlended=new je([1,771],e.Color.transparent,[!0,!0,!0,!0]);var Me=function(Z,he,Q){this.enable=Z,this.mode=he,this.frontFace=Q};Me.disabled=new Me(!1,1029,2305),Me.backCCW=new Me(!0,1029,2305);var Se=function(Z){this.gl=Z,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new be(this),this.clearDepth=new Le(this),this.clearStencil=new De(this),this.colorMask=new ye(this),this.depthMask=new Ce(this),this.stencilMask=new Fe(this),this.stencilFunc=new Ke(this),this.stencilOp=new Ue(this),this.stencilTest=new Be(this),this.depthRange=new Ie(this),this.depthTest=new nt(this),this.depthFunc=new gt(this),this.blend=new Nt(this),this.blendFunc=new St(this),this.blendColor=new Bt(this),this.blendEquation=new Zt(this),this.cullFace=new Et(this),this.cullFaceSide=new wt(this),this.frontFace=new at(this),this.program=new vt(this),this.activeTexture=new Qe(this),this.viewport=new Pe(this),this.bindFramebuffer=new Ze(this),this.bindRenderbuffer=new Xe(this),this.bindTexture=new rt(this),this.bindVertexBuffer=new kt(this),this.bindElementBuffer=new Tt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Xt(this),this.pixelStoreUnpack=new ar(this),this.pixelStoreUnpackPremultiplyAlpha=new Ut(this),this.pixelStoreUnpackFlipY=new Jt(this),this.extTextureFilterAnisotropic=Z.getExtension("EXT_texture_filter_anisotropic")||Z.getExtension("MOZ_EXT_texture_filter_anisotropic")||Z.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=Z.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=Z.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(Z.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=Z.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=Z.getExtension("EXT_disjoint_timer_query")};Se.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Se.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Se.prototype.createIndexBuffer=function(Z,he){return new xe(this,Z,he)},Se.prototype.createVertexBuffer=function(Z,he,Q){return new we(this,Z,he,Q)},Se.prototype.createRenderbuffer=function(Z,he,Q){var ve=this.gl,Ae=ve.createRenderbuffer();return this.bindRenderbuffer.set(Ae),ve.renderbufferStorage(ve.RENDERBUFFER,Z,he,Q),this.bindRenderbuffer.set(null),Ae},Se.prototype.createFramebuffer=function(Z,he,Q){return new Hr(this,Z,he,Q)},Se.prototype.clear=function(Z){var he=Z.color,Q=Z.depth,ve=this.gl,Ae=0;he&&(Ae|=ve.COLOR_BUFFER_BIT,this.clearColor.set(he),this.colorMask.set([!0,!0,!0,!0])),void 0!==Q&&(Ae|=ve.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(Q),this.depthMask.set(!0)),ve.clear(Ae)},Se.prototype.setCullFace=function(Z){!1===Z.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(Z.mode),this.frontFace.set(Z.frontFace))},Se.prototype.setDepthMode=function(Z){Z.func!==this.gl.ALWAYS||Z.mask?(this.depthTest.set(!0),this.depthFunc.set(Z.func),this.depthMask.set(Z.mask),this.depthRange.set(Z.range)):this.depthTest.set(!1)},Se.prototype.setStencilMode=function(Z){Z.test.func!==this.gl.ALWAYS||Z.mask?(this.stencilTest.set(!0),this.stencilMask.set(Z.mask),this.stencilOp.set([Z.fail,Z.depthFail,Z.pass]),this.stencilFunc.set({func:Z.test.func,ref:Z.ref,mask:Z.test.mask})):this.stencilTest.set(!1)},Se.prototype.setColorMode=function(Z){e.deepEqual(Z.blendFunction,je.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(Z.blendFunction),this.blendColor.set(Z.blendColor)),this.colorMask.set(Z.mask)},Se.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Je=function(ce){function Z(he,Q,ve){var Ae=this;ce.call(this),this.id=he,this.dispatcher=ve,this.on("data",function(Re){"source"===Re.dataType&&"metadata"===Re.sourceDataType&&(Ae._sourceLoaded=!0),Ae._sourceLoaded&&!Ae._paused&&"source"===Re.dataType&&"content"===Re.sourceDataType&&(Ae.reload(),Ae.transform&&Ae.update(Ae.transform))}),this.on("error",function(){Ae._sourceErrored=!0}),this._source=function(ce,Z,he,Q){var ve=new V[Z.type](ce,Z,he,Q);if(ve.id!==ce)throw new Error("Expected Source id to be "+ce+" instead of "+ve.id);return e.bindAll(["load","abort","unload","serialize","prepare"],ve),ve}(he,Q,ve,this),this._tiles={},this._cache=new pe(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.onAdd=function(Q){this.map=Q,this._maxTileCacheSize=Q?Q._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(Q)},Z.prototype.onRemove=function(Q){this._source&&this._source.onRemove&&this._source.onRemove(Q)},Z.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var Q in this._tiles){var ve=this._tiles[Q];if("loaded"!==ve.state&&"errored"!==ve.state)return!1}return!0},Z.prototype.getSource=function(){return this._source},Z.prototype.pause=function(){this._paused=!0},Z.prototype.resume=function(){if(this._paused){var Q=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,Q&&this.reload(),this.transform&&this.update(this.transform)}},Z.prototype._loadTile=function(Q,ve){return this._source.loadTile(Q,ve)},Z.prototype._unloadTile=function(Q){if(this._source.unloadTile)return this._source.unloadTile(Q,function(){})},Z.prototype._abortTile=function(Q){if(this._source.abortTile)return this._source.abortTile(Q,function(){})},Z.prototype.serialize=function(){return this._source.serialize()},Z.prototype.prepare=function(Q){for(var ve in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var Ae=this._tiles[ve];Ae.upload(Q),Ae.prepare(this.map.style.imageManager)}},Z.prototype.getIds=function(){return e.values(this._tiles).map(function(Q){return Q.tileID}).sort(We).map(function(Q){return Q.key})},Z.prototype.getRenderableIds=function(Q){var ve=this,Ae=[];for(var Re in this._tiles)this._isIdRenderable(Re,Q)&&Ae.push(this._tiles[Re]);return Q?Ae.sort(function(Ye,ut){var Mt=Ye.tileID,jt=ut.tileID,ur=new e.Point(Mt.canonical.x,Mt.canonical.y)._rotate(ve.transform.angle),gr=new e.Point(jt.canonical.x,jt.canonical.y)._rotate(ve.transform.angle);return Mt.overscaledZ-jt.overscaledZ||gr.y-ur.y||gr.x-ur.x}).map(function(Ye){return Ye.tileID.key}):Ae.map(function(Ye){return Ye.tileID}).sort(We).map(function(Ye){return Ye.key})},Z.prototype.hasRenderableParent=function(Q){var ve=this.findLoadedParent(Q,0);return!!ve&&this._isIdRenderable(ve.tileID.key)},Z.prototype._isIdRenderable=function(Q,ve){return this._tiles[Q]&&this._tiles[Q].hasData()&&!this._coveredTiles[Q]&&(ve||!this._tiles[Q].holdingForFade())},Z.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var Q in this._cache.reset(),this._tiles)"errored"!==this._tiles[Q].state&&this._reloadTile(Q,"reloading")},Z.prototype._reloadTile=function(Q,ve){var Ae=this._tiles[Q];!Ae||("loading"!==Ae.state&&(Ae.state=ve),this._loadTile(Ae,this._tileLoaded.bind(this,Ae,Q,ve)))},Z.prototype._tileLoaded=function(Q,ve,Ae,Re){if(Re)return Q.state="errored",void(404!==Re.status?this._source.fire(new e.ErrorEvent(Re,{tile:Q})):this.update(this.transform));Q.timeAdded=e.browser.now(),"expired"===Ae&&(Q.refreshedUponExpiration=!0),this._setTileReloadTimer(ve,Q),"raster-dem"===this.getSource().type&&Q.dem&&this._backfillDEM(Q),this._state.initializeTileState(Q,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:Q,coord:Q.tileID}))},Z.prototype._backfillDEM=function(Q){for(var ve=this.getRenderableIds(),Ae=0;Ae<ve.length;Ae++){var Re=ve[Ae];if(Q.neighboringTiles&&Q.neighboringTiles[Re]){var Ye=this.getTileByID(Re);ut(Q,Ye),ut(Ye,Q)}}function ut(Mt,jt){Mt.needsHillshadePrepare=!0;var ur=jt.tileID.canonical.x-Mt.tileID.canonical.x,gr=jt.tileID.canonical.y-Mt.tileID.canonical.y,Pr=Math.pow(2,Mt.tileID.canonical.z),Gr=jt.tileID.key;0===ur&&0===gr||Math.abs(gr)>1||(Math.abs(ur)>1&&(1===Math.abs(ur+Pr)?ur+=Pr:1===Math.abs(ur-Pr)&&(ur-=Pr)),jt.dem&&Mt.dem&&(Mt.dem.backfillBorder(jt.dem,ur,gr),Mt.neighboringTiles&&Mt.neighboringTiles[Gr]&&(Mt.neighboringTiles[Gr].backfilled=!0)))}},Z.prototype.getTile=function(Q){return this.getTileByID(Q.key)},Z.prototype.getTileByID=function(Q){return this._tiles[Q]},Z.prototype._retainLoadedChildren=function(Q,ve,Ae,Re){for(var Ye in this._tiles){var ut=this._tiles[Ye];if(!(Re[Ye]||!ut.hasData()||ut.tileID.overscaledZ<=ve||ut.tileID.overscaledZ>Ae)){for(var Mt=ut.tileID;ut&&ut.tileID.overscaledZ>ve+1;){var jt=ut.tileID.scaledTo(ut.tileID.overscaledZ-1);(ut=this._tiles[jt.key])&&ut.hasData()&&(Mt=jt)}for(var ur=Mt;ur.overscaledZ>ve;)if(Q[(ur=ur.scaledTo(ur.overscaledZ-1)).key]){Re[Mt.key]=Mt;break}}}},Z.prototype.findLoadedParent=function(Q,ve){if(Q.key in this._loadedParentTiles){var Ae=this._loadedParentTiles[Q.key];return Ae&&Ae.tileID.overscaledZ>=ve?Ae:null}for(var Re=Q.overscaledZ-1;Re>=ve;Re--){var Ye=Q.scaledTo(Re),ut=this._getLoadedTile(Ye);if(ut)return ut}},Z.prototype._getLoadedTile=function(Q){var ve=this._tiles[Q.key];return ve&&ve.hasData()?ve:this._cache.getByKey(Q.wrapped().key)},Z.prototype.updateCacheSize=function(Q){var ve=Math.ceil(Q.width/this._source.tileSize)+1,Ae=Math.ceil(Q.height/this._source.tileSize)+1,ut=Math.floor(ve*Ae*5),Mt="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,ut):ut;this._cache.setMaxSize(Mt)},Z.prototype.handleWrapJump=function(Q){var Ye=Math.round((Q-(void 0===this._prevLng?Q:this._prevLng))/360);if(this._prevLng=Q,Ye){var ut={};for(var Mt in this._tiles){var jt=this._tiles[Mt];jt.tileID=jt.tileID.unwrapTo(jt.tileID.wrap+Ye),ut[jt.tileID.key]=jt}for(var ur in this._tiles=ut,this._timers)clearTimeout(this._timers[ur]),delete this._timers[ur];for(var gr in this._tiles)this._setTileReloadTimer(gr,this._tiles[gr])}},Z.prototype.update=function(Q){var ve=this;if(this.transform=Q,this._sourceLoaded&&!this._paused){var Ae;this.updateCacheSize(Q),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?Ae=Q.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(ga){return new e.OverscaledTileID(ga.canonical.z,ga.wrap,ga.canonical.z,ga.canonical.x,ga.canonical.y)}):(Ae=Q.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Ae=Ae.filter(function(ga){return ve._source.hasTile(ga)}))):Ae=[];var Re=Q.coveringZoomLevel(this._source),Ye=Math.max(Re-Z.maxOverzooming,this._source.minzoom),ut=Math.max(Re+Z.maxUnderzooming,this._source.minzoom),Mt=this._updateRetainedTiles(Ae,Re);if(st(this._source.type)){for(var jt={},ur={},Pr=0,Gr=Object.keys(Mt);Pr<Gr.length;Pr+=1){var Yr=Gr[Pr],Ur=Mt[Yr],tn=this._tiles[Yr];if(tn&&!(tn.fadeEndTime&&tn.fadeEndTime<=e.browser.now())){var pn=this.findLoadedParent(Ur,Ye);pn&&(this._addTile(pn.tileID),jt[pn.tileID.key]=pn.tileID),ur[Yr]=Ur}}for(var Cn in this._retainLoadedChildren(ur,Re,ut,Mt),jt)Mt[Cn]||(this._coveredTiles[Cn]=!0,Mt[Cn]=jt[Cn])}for(var Nn in Mt)this._tiles[Nn].clearFadeHold();for(var qn=0,Qn=e.keysDifference(this._tiles,Mt);qn<Qn.length;qn+=1){var ua=Qn[qn],ya=this._tiles[ua];ya.hasSymbolBuckets&&!ya.holdingForFade()?ya.setHoldDuration(this.map._fadeDuration):(!ya.hasSymbolBuckets||ya.symbolFadeFinished())&&this._removeTile(ua)}this._updateLoadedParentTileCache()}},Z.prototype.releaseSymbolFadeTiles=function(){for(var Q in this._tiles)this._tiles[Q].holdingForFade()&&this._removeTile(Q)},Z.prototype._updateRetainedTiles=function(Q,ve){for(var Ae={},Re={},Ye=Math.max(ve-Z.maxOverzooming,this._source.minzoom),ut=Math.max(ve+Z.maxUnderzooming,this._source.minzoom),Mt={},jt=0,ur=Q;jt<ur.length;jt+=1){var gr=ur[jt],Pr=this._addTile(gr);Ae[gr.key]=gr,!Pr.hasData()&&ve<this._source.maxzoom&&(Mt[gr.key]=gr)}this._retainLoadedChildren(Mt,ve,ut,Ae);for(var Gr=0,Yr=Q;Gr<Yr.length;Gr+=1){var Ur=Yr[Gr],tn=this._tiles[Ur.key];if(!tn.hasData()){if(ve+1>this._source.maxzoom){var pn=Ur.children(this._source.maxzoom)[0],Cn=this.getTile(pn);if(Cn&&Cn.hasData()){Ae[pn.key]=pn;continue}}else{var Nn=Ur.children(this._source.maxzoom);if(Ae[Nn[0].key]&&Ae[Nn[1].key]&&Ae[Nn[2].key]&&Ae[Nn[3].key])continue}for(var Kn=tn.wasRequested(),qn=Ur.overscaledZ-1;qn>=Ye;--qn){var Qn=Ur.scaledTo(qn);if(Re[Qn.key]||(Re[Qn.key]=!0,!(tn=this.getTile(Qn))&&Kn&&(tn=this._addTile(Qn)),tn&&(Ae[Qn.key]=Qn,Kn=tn.wasRequested(),tn.hasData())))break}}}return Ae},Z.prototype._updateLoadedParentTileCache=function(){for(var Q in this._loadedParentTiles={},this._tiles){for(var ve=[],Ae=void 0,Re=this._tiles[Q].tileID;Re.overscaledZ>0;){if(Re.key in this._loadedParentTiles){Ae=this._loadedParentTiles[Re.key];break}ve.push(Re.key);var Ye=Re.scaledTo(Re.overscaledZ-1);if(Ae=this._getLoadedTile(Ye))break;Re=Ye}for(var ut=0,Mt=ve;ut<Mt.length;ut+=1)this._loadedParentTiles[Mt[ut]]=Ae}},Z.prototype._addTile=function(Q){var ve=this._tiles[Q.key];if(ve)return ve;(ve=this._cache.getAndRemove(Q))&&(this._setTileReloadTimer(Q.key,ve),ve.tileID=Q,this._state.initializeTileState(ve,this.map?this.map.painter:null),this._cacheTimers[Q.key]&&(clearTimeout(this._cacheTimers[Q.key]),delete this._cacheTimers[Q.key],this._setTileReloadTimer(Q.key,ve)));var Ae=Boolean(ve);return Ae||(ve=new e.Tile(Q,this._source.tileSize*Q.overscaleFactor()),this._loadTile(ve,this._tileLoaded.bind(this,ve,Q.key,ve.state))),ve?(ve.uses++,this._tiles[Q.key]=ve,Ae||this._source.fire(new e.Event("dataloading",{tile:ve,coord:ve.tileID,dataType:"source"})),ve):null},Z.prototype._setTileReloadTimer=function(Q,ve){var Ae=this;Q in this._timers&&(clearTimeout(this._timers[Q]),delete this._timers[Q]);var Re=ve.getExpiryTimeout();Re&&(this._timers[Q]=setTimeout(function(){Ae._reloadTile(Q,"expired"),delete Ae._timers[Q]},Re))},Z.prototype._removeTile=function(Q){var ve=this._tiles[Q];!ve||(ve.uses--,delete this._tiles[Q],this._timers[Q]&&(clearTimeout(this._timers[Q]),delete this._timers[Q]),!(ve.uses>0)&&(ve.hasData()&&"reloading"!==ve.state?this._cache.add(ve.tileID,ve,ve.getExpiryTimeout()):(ve.aborted=!0,this._abortTile(ve),this._unloadTile(ve))))},Z.prototype.clearTiles=function(){for(var Q in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(Q);this._cache.reset()},Z.prototype.tilesIn=function(Q,ve,Ae){var Re=this,Ye=[],ut=this.transform;if(!ut)return Ye;for(var Mt=Ae?ut.getCameraQueryGeometry(Q):Q,jt=Q.map(function(qn){return ut.pointCoordinate(qn)}),ur=Mt.map(function(qn){return ut.pointCoordinate(qn)}),gr=this.getIds(),Pr=1/0,Gr=1/0,Yr=-1/0,Ur=-1/0,tn=0,pn=ur;tn<pn.length;tn+=1){var Cn=pn[tn];Pr=Math.min(Pr,Cn.x),Gr=Math.min(Gr,Cn.y),Yr=Math.max(Yr,Cn.x),Ur=Math.max(Ur,Cn.y)}for(var Nn=function(qn){var Qn=Re._tiles[gr[qn]];if(!Qn.holdingForFade()){var ua=Qn.tileID,ya=Math.pow(2,ut.zoom-Qn.tileID.overscaledZ),ga=ve*Qn.queryPadding*e.EXTENT/Qn.tileSize/ya,Ta=[ua.getTilePoint(new e.MercatorCoordinate(Pr,Gr)),ua.getTilePoint(new e.MercatorCoordinate(Yr,Ur))];if(Ta[0].x-ga<e.EXTENT&&Ta[0].y-ga<e.EXTENT&&Ta[1].x+ga>=0&&Ta[1].y+ga>=0){var La=jt.map(function(ii){return ua.getTilePoint(ii)}),Wa=ur.map(function(ii){return ua.getTilePoint(ii)});Ye.push({tile:Qn,tileID:ua,queryGeometry:La,cameraQueryGeometry:Wa,scale:ya})}}},Kn=0;Kn<gr.length;Kn++)Nn(Kn);return Ye},Z.prototype.getVisibleCoordinates=function(Q){for(var ve=this,Ae=this.getRenderableIds(Q).map(function(Mt){return ve._tiles[Mt].tileID}),Re=0,Ye=Ae;Re<Ye.length;Re+=1){var ut=Ye[Re];ut.posMatrix=this.transform.calculatePosMatrix(ut.toUnwrapped())}return Ae},Z.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(st(this._source.type))for(var Q in this._tiles){var ve=this._tiles[Q];if(void 0!==ve.fadeEndTime&&ve.fadeEndTime>=e.browser.now())return!0}return!1},Z.prototype.setFeatureState=function(Q,ve,Ae){this._state.updateState(Q=Q||"_geojsonTileLayer",ve,Ae)},Z.prototype.removeFeatureState=function(Q,ve,Ae){this._state.removeFeatureState(Q=Q||"_geojsonTileLayer",ve,Ae)},Z.prototype.getFeatureState=function(Q,ve){return this._state.getState(Q=Q||"_geojsonTileLayer",ve)},Z.prototype.setDependencies=function(Q,ve,Ae){var Re=this._tiles[Q];Re&&Re.setDependencies(ve,Ae)},Z.prototype.reloadTilesForDependencies=function(Q,ve){for(var Ae in this._tiles)this._tiles[Ae].hasDependency(Q,ve)&&this._reloadTile(Ae,"reloading");this._cache.filter(function(Ye){return!Ye.hasDependency(Q,ve)})},Z}(e.Evented);function We(ce,Z){var he=Math.abs(2*ce.wrap)-+(ce.wrap<0),Q=Math.abs(2*Z.wrap)-+(Z.wrap<0);return ce.overscaledZ-Z.overscaledZ||Q-he||Z.canonical.y-ce.canonical.y||Z.canonical.x-ce.canonical.x}function st(ce){return"raster"===ce||"image"===ce||"video"===ce}function lt(){return new e.window.Worker(Sf.workerUrl)}Je.maxOverzooming=10,Je.maxUnderzooming=3;var pt="mapboxgl_preloaded_worker_pool",Ct=function(){this.active={}};Ct.prototype.acquire=function(Z){if(!this.workers)for(this.workers=[];this.workers.length<Ct.workerCount;)this.workers.push(new lt);return this.active[Z]=!0,this.workers.slice()},Ct.prototype.release=function(Z){delete this.active[Z],0===this.numActive()&&(this.workers.forEach(function(he){he.terminate()}),this.workers=null)},Ct.prototype.isPreloaded=function(){return!!this.active[pt]},Ct.prototype.numActive=function(){return Object.keys(this.active).length};var Gt,Dt=Math.floor(e.browser.hardwareConcurrency/2);function fr(){return Gt||(Gt=new Ct),Gt}function Lr(ce,Z){var he={};for(var Q in ce)"ref"!==Q&&(he[Q]=ce[Q]);return e.refProperties.forEach(function(ve){ve in Z&&(he[ve]=Z[ve])}),he}function Ar(ce){ce=ce.slice();for(var Z=Object.create(null),he=0;he<ce.length;he++)Z[ce[he].id]=ce[he];for(var Q=0;Q<ce.length;Q++)"ref"in ce[Q]&&(ce[Q]=Lr(ce[Q],Z[ce[Q].ref]));return ce}Ct.workerCount=Math.max(Math.min(Dt,6),1);var mr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function wr(ce,Z,he){he.push({command:mr.addSource,args:[ce,Z[ce]]})}function Wr(ce,Z,he){Z.push({command:mr.removeSource,args:[ce]}),he[ce]=!0}function Kr(ce,Z,he,Q){Wr(ce,he,Q),wr(ce,Z,he)}function Cr(ce,Z,he){var Q;for(Q in ce[he])if(ce[he].hasOwnProperty(Q)&&"data"!==Q&&!e.deepEqual(ce[he][Q],Z[he][Q]))return!1;for(Q in Z[he])if(Z[he].hasOwnProperty(Q)&&"data"!==Q&&!e.deepEqual(ce[he][Q],Z[he][Q]))return!1;return!0}function It(ce,Z,he,Q,ve,Ae){var Re;for(Re in Z=Z||{},ce=ce||{})!ce.hasOwnProperty(Re)||e.deepEqual(ce[Re],Z[Re])||he.push({command:Ae,args:[Q,Re,Z[Re],ve]});for(Re in Z)!Z.hasOwnProperty(Re)||ce.hasOwnProperty(Re)||e.deepEqual(ce[Re],Z[Re])||he.push({command:Ae,args:[Q,Re,Z[Re],ve]})}function Qt(ce){return ce.id}function ir(ce,Z){return ce[Z.id]=Z,ce}function qr(ce,Z){if(!ce)return[{command:mr.setStyle,args:[Z]}];var he=[];try{if(!e.deepEqual(ce.version,Z.version))return[{command:mr.setStyle,args:[Z]}];e.deepEqual(ce.center,Z.center)||he.push({command:mr.setCenter,args:[Z.center]}),e.deepEqual(ce.zoom,Z.zoom)||he.push({command:mr.setZoom,args:[Z.zoom]}),e.deepEqual(ce.bearing,Z.bearing)||he.push({command:mr.setBearing,args:[Z.bearing]}),e.deepEqual(ce.pitch,Z.pitch)||he.push({command:mr.setPitch,args:[Z.pitch]}),e.deepEqual(ce.sprite,Z.sprite)||he.push({command:mr.setSprite,args:[Z.sprite]}),e.deepEqual(ce.glyphs,Z.glyphs)||he.push({command:mr.setGlyphs,args:[Z.glyphs]}),e.deepEqual(ce.transition,Z.transition)||he.push({command:mr.setTransition,args:[Z.transition]}),e.deepEqual(ce.light,Z.light)||he.push({command:mr.setLight,args:[Z.light]});var Q={},ve=[];!function it(ce,Z,he,Q){var ve;for(ve in Z=Z||{},ce=ce||{})!ce.hasOwnProperty(ve)||Z.hasOwnProperty(ve)||Wr(ve,he,Q);for(ve in Z)!Z.hasOwnProperty(ve)||(ce.hasOwnProperty(ve)?e.deepEqual(ce[ve],Z[ve])||("geojson"===ce[ve].type&&"geojson"===Z[ve].type&&Cr(ce,Z,ve)?he.push({command:mr.setGeoJSONSourceData,args:[ve,Z[ve].data]}):Kr(ve,Z,he,Q)):wr(ve,Z,he))}(ce.sources,Z.sources,ve,Q);var Ae=[];ce.layers&&ce.layers.forEach(function(Re){Q[Re.source]?he.push({command:mr.removeLayer,args:[Re.id]}):Ae.push(Re)}),he=he.concat(ve),function Or(ce,Z,he){Z=Z||[];var Mt,jt,ur,gr,Pr,Gr,Yr,Q=(ce=ce||[]).map(Qt),ve=Z.map(Qt),Ae=ce.reduce(ir,{}),Re=Z.reduce(ir,{}),Ye=Q.slice(),ut=Object.create(null);for(Mt=0,jt=0;Mt<Q.length;Mt++)Re.hasOwnProperty(ur=Q[Mt])?jt++:(he.push({command:mr.removeLayer,args:[ur]}),Ye.splice(Ye.indexOf(ur,jt),1));for(Mt=0,jt=0;Mt<ve.length;Mt++)Ye[Ye.length-1-Mt]!==(ur=ve[ve.length-1-Mt])&&(Ae.hasOwnProperty(ur)?(he.push({command:mr.removeLayer,args:[ur]}),Ye.splice(Ye.lastIndexOf(ur,Ye.length-jt),1)):jt++,he.push({command:mr.addLayer,args:[Re[ur],Gr=Ye[Ye.length-Mt]]}),Ye.splice(Ye.length-Mt,0,ur),ut[ur]=!0);for(Mt=0;Mt<ve.length;Mt++)if(gr=Ae[ur=ve[Mt]],Pr=Re[ur],!ut[ur]&&!e.deepEqual(gr,Pr)){if(!e.deepEqual(gr.source,Pr.source)||!e.deepEqual(gr["source-layer"],Pr["source-layer"])||!e.deepEqual(gr.type,Pr.type)){he.push({command:mr.removeLayer,args:[ur]}),Gr=Ye[Ye.lastIndexOf(ur)+1],he.push({command:mr.addLayer,args:[Pr,Gr]});continue}for(Yr in It(gr.layout,Pr.layout,he,ur,null,mr.setLayoutProperty),It(gr.paint,Pr.paint,he,ur,null,mr.setPaintProperty),e.deepEqual(gr.filter,Pr.filter)||he.push({command:mr.setFilter,args:[ur,Pr.filter]}),(!e.deepEqual(gr.minzoom,Pr.minzoom)||!e.deepEqual(gr.maxzoom,Pr.maxzoom))&&he.push({command:mr.setLayerZoomRange,args:[ur,Pr.minzoom,Pr.maxzoom]}),gr)!gr.hasOwnProperty(Yr)||"layout"===Yr||"paint"===Yr||"filter"===Yr||"metadata"===Yr||"minzoom"===Yr||"maxzoom"===Yr||(0===Yr.indexOf("paint.")?It(gr[Yr],Pr[Yr],he,ur,Yr.slice(6),mr.setPaintProperty):e.deepEqual(gr[Yr],Pr[Yr])||he.push({command:mr.setLayerProperty,args:[ur,Yr,Pr[Yr]]}));for(Yr in Pr)!Pr.hasOwnProperty(Yr)||gr.hasOwnProperty(Yr)||"layout"===Yr||"paint"===Yr||"filter"===Yr||"metadata"===Yr||"minzoom"===Yr||"maxzoom"===Yr||(0===Yr.indexOf("paint.")?It(gr[Yr],Pr[Yr],he,ur,Yr.slice(6),mr.setPaintProperty):e.deepEqual(gr[Yr],Pr[Yr])||he.push({command:mr.setLayerProperty,args:[ur,Yr,Pr[Yr]]}))}}(Ae,Z.layers,he)}catch(Re){console.warn("Unable to compute style diff:",Re),he=[{command:mr.setStyle,args:[Z]}]}return he}var Ir=function(Z,he){this.reset(Z,he)};Ir.prototype.reset=function(Z,he){this.points=Z||[],this._distances=[0];for(var Q=1;Q<this.points.length;Q++)this._distances[Q]=this._distances[Q-1]+this.points[Q].dist(this.points[Q-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(he||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Ir.prototype.lerp=function(Z){if(1===this.points.length)return this.points[0];Z=e.clamp(Z,0,1);for(var he=1,Q=this._distances[he],ve=Z*this.paddedLength+this.padding;Q<ve&&he<this._distances.length;)Q=this._distances[++he];var Ae=he-1,Re=this._distances[Ae],Ye=Q-Re,ut=Ye>0?(ve-Re)/Ye:0;return this.points[Ae].mult(1-ut).add(this.points[he].mult(ut))};var kr=function(Z,he,Q){var ve=this.boxCells=[],Ae=this.circleCells=[];this.xCellCount=Math.ceil(Z/Q),this.yCellCount=Math.ceil(he/Q);for(var Re=0;Re<this.xCellCount*this.yCellCount;Re++)ve.push([]),Ae.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=Z,this.height=he,this.xScale=this.xCellCount/Z,this.yScale=this.yCellCount/he,this.boxUid=0,this.circleUid=0};function Zr(ce,Z,he,Q,ve){var Ae=e.create();return Z?(e.scale(Ae,Ae,[1/ve,1/ve,1]),he||e.rotateZ(Ae,Ae,Q.angle)):e.multiply(Ae,Q.labelPlaneMatrix,ce),Ae}function An(ce,Z,he,Q,ve){if(Z){var Ae=e.clone(ce);return e.scale(Ae,Ae,[ve,ve,1]),he||e.rotateZ(Ae,Ae,-Q.angle),Ae}return Q.glCoordMatrix}function wn(ce,Z){var he=[ce.x,ce.y,0,1];Er(he,he,Z);var Q=he[3];return{point:new e.Point(he[0]/Q,he[1]/Q),signedDistanceFromCamera:Q}}function Zn(ce,Z){return.5+ce/Z*.5}function Ln(ce,Z){var he=ce[0]/ce[3],Q=ce[1]/ce[3];return he>=-Z[0]&&he<=Z[0]&&Q>=-Z[1]&&Q<=Z[1]}function Wn(ce,Z,he,Q,ve,Ae,Re,Ye){var ut=Q?ce.textSizeData:ce.iconSizeData,Mt=e.evaluateSizeForZoom(ut,he.transform.zoom),jt=[256/he.width*2+1,256/he.height*2+1],ur=Q?ce.text.dynamicLayoutVertexArray:ce.icon.dynamicLayoutVertexArray;ur.clear();for(var gr=ce.lineVertexArray,Pr=Q?ce.text.placedSymbolArray:ce.icon.placedSymbolArray,Gr=he.transform.width/he.transform.height,Yr=!1,Ur=0;Ur<Pr.length;Ur++){var tn=Pr.get(Ur);if(tn.hidden||tn.writingMode===e.WritingMode.vertical&&!Yr)ai(tn.numGlyphs,ur);else{Yr=!1;var pn=[tn.anchorX,tn.anchorY,0,1];if(e.transformMat4(pn,pn,Z),Ln(pn,jt)){var Nn=Zn(he.transform.cameraToCenterDistance,pn[3]),Kn=e.evaluateSizeForFeature(ut,Mt,tn),qn=Re?Kn/Nn:Kn*Nn,Qn=new e.Point(tn.anchorX,tn.anchorY),ua=wn(Qn,ve).point,ya={},ga=ma(tn,qn,!1,Ye,Z,ve,Ae,ce.glyphOffsetArray,gr,ur,ua,Qn,ya,Gr);Yr=ga.useVertical,(ga.notEnoughRoom||Yr||ga.needsFlipping&&ma(tn,qn,!0,Ye,Z,ve,Ae,ce.glyphOffsetArray,gr,ur,ua,Qn,ya,Gr).notEnoughRoom)&&ai(tn.numGlyphs,ur)}else ai(tn.numGlyphs,ur)}}Q?ce.text.dynamicLayoutVertexBuffer.updateData(ur):ce.icon.dynamicLayoutVertexBuffer.updateData(ur)}function $n(ce,Z,he,Q,ve,Ae,Re,Ye,ut,Mt,jt){var ur=Ye.glyphStartIndex+Ye.numGlyphs,gr=Ye.lineStartIndex,Pr=Ye.lineStartIndex+Ye.lineLength,Gr=Z.getoffsetX(Ye.glyphStartIndex),Yr=Z.getoffsetX(ur-1),Ur=Ja(ce*Gr,he,Q,ve,Ae,Re,Ye.segment,gr,Pr,ut,Mt,jt);if(!Ur)return null;var tn=Ja(ce*Yr,he,Q,ve,Ae,Re,Ye.segment,gr,Pr,ut,Mt,jt);return tn?{first:Ur,last:tn}:null}function wa(ce,Z,he,Q){return ce===e.WritingMode.horizontal&&Math.abs(he.y-Z.y)>Math.abs(he.x-Z.x)*Q?{useVertical:!0}:(ce===e.WritingMode.vertical?Z.y<he.y:Z.x>he.x)?{needsFlipping:!0}:null}function ma(ce,Z,he,Q,ve,Ae,Re,Ye,ut,Mt,jt,ur,gr,Pr){var tn,Gr=Z/24,Yr=ce.lineOffsetX*Gr,Ur=ce.lineOffsetY*Gr;if(ce.numGlyphs>1){var pn=ce.glyphStartIndex+ce.numGlyphs,Cn=ce.lineStartIndex,Nn=ce.lineStartIndex+ce.lineLength,Kn=$n(Gr,Ye,Yr,Ur,he,jt,ur,ce,ut,Ae,gr);if(!Kn)return{notEnoughRoom:!0};var qn=wn(Kn.first.point,Re).point,Qn=wn(Kn.last.point,Re).point;if(Q&&!he){var ua=wa(ce.writingMode,qn,Qn,Pr);if(ua)return ua}tn=[Kn.first];for(var ya=ce.glyphStartIndex+1;ya<pn-1;ya++)tn.push(Ja(Gr*Ye.getoffsetX(ya),Yr,Ur,he,jt,ur,ce.segment,Cn,Nn,ut,Ae,gr));tn.push(Kn.last)}else{if(Q&&!he){var ga=wn(ur,ve).point,Ta=ce.lineStartIndex+ce.segment+1,La=new e.Point(ut.getx(Ta),ut.gety(Ta)),Wa=wn(La,ve),ii=Wa.signedDistanceFromCamera>0?Wa.point:$a(ur,La,ga,1,ve),Ni=wa(ce.writingMode,ga,ii,Pr);if(Ni)return Ni}var fi=Ja(Gr*Ye.getoffsetX(ce.glyphStartIndex),Yr,Ur,he,jt,ur,ce.segment,ce.lineStartIndex,ce.lineStartIndex+ce.lineLength,ut,Ae,gr);if(!fi)return{notEnoughRoom:!0};tn=[fi]}for(var bi=0,Ua=tn;bi<Ua.length;bi+=1){var Bi=Ua[bi];e.addDynamicAttributes(Mt,Bi.point,Bi.angle)}return{}}function $a(ce,Z,he,Q,ve){var Ae=wn(ce.add(ce.sub(Z)._unit()),ve).point,Re=he.sub(Ae);return he.add(Re._mult(Q/Re.mag()))}function Ja(ce,Z,he,Q,ve,Ae,Re,Ye,ut,Mt,jt,ur){var gr=Q?ce-Z:ce+Z,Pr=gr>0?1:-1,Gr=0;Q&&(Pr*=-1,Gr=Math.PI),Pr<0&&(Gr+=Math.PI);for(var Yr=Pr>0?Ye+Re:Ye+Re+1,Ur=ve,tn=ve,pn=0,Cn=0,Nn=Math.abs(gr),Kn=[];pn+Cn<=Nn;){if((Yr+=Pr)<Ye||Yr>=ut)return null;if(tn=Ur,Kn.push(Ur),void 0===(Ur=ur[Yr])){var qn=new e.Point(Mt.getx(Yr),Mt.gety(Yr)),Qn=wn(qn,jt);if(Qn.signedDistanceFromCamera>0)Ur=ur[Yr]=Qn.point;else{var ua=Yr-Pr;Ur=$a(0===pn?Ae:new e.Point(Mt.getx(ua),Mt.gety(ua)),qn,tn,Nn-pn+1,jt)}}pn+=Cn,Cn=tn.dist(Ur)}var ga=(Nn-pn)/Cn,Ta=Ur.sub(tn),La=Ta.mult(ga)._add(tn);La._add(Ta._unit()._perp()._mult(he*Pr));var Wa=Gr+Math.atan2(Ur.y-tn.y,Ur.x-tn.x);return Kn.push(La),{point:La,angle:Wa,path:Kn}}kr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},kr.prototype.insert=function(Z,he,Q,ve,Ae){this._forEachCell(he,Q,ve,Ae,this._insertBoxCell,this.boxUid++),this.boxKeys.push(Z),this.bboxes.push(he),this.bboxes.push(Q),this.bboxes.push(ve),this.bboxes.push(Ae)},kr.prototype.insertCircle=function(Z,he,Q,ve){this._forEachCell(he-ve,Q-ve,he+ve,Q+ve,this._insertCircleCell,this.circleUid++),this.circleKeys.push(Z),this.circles.push(he),this.circles.push(Q),this.circles.push(ve)},kr.prototype._insertBoxCell=function(Z,he,Q,ve,Ae,Re){this.boxCells[Ae].push(Re)},kr.prototype._insertCircleCell=function(Z,he,Q,ve,Ae,Re){this.circleCells[Ae].push(Re)},kr.prototype._query=function(Z,he,Q,ve,Ae,Re){if(Q<0||Z>this.width||ve<0||he>this.height)return!Ae&&[];var Ye=[];if(Z<=0&&he<=0&&this.width<=Q&&this.height<=ve){if(Ae)return!0;for(var ut=0;ut<this.boxKeys.length;ut++)Ye.push({key:this.boxKeys[ut],x1:this.bboxes[4*ut],y1:this.bboxes[4*ut+1],x2:this.bboxes[4*ut+2],y2:this.bboxes[4*ut+3]});for(var Mt=0;Mt<this.circleKeys.length;Mt++){var jt=this.circles[3*Mt],ur=this.circles[3*Mt+1],gr=this.circles[3*Mt+2];Ye.push({key:this.circleKeys[Mt],x1:jt-gr,y1:ur-gr,x2:jt+gr,y2:ur+gr})}return Re?Ye.filter(Re):Ye}return this._forEachCell(Z,he,Q,ve,this._queryCell,Ye,{hitTest:Ae,seenUids:{box:{},circle:{}}},Re),Ae?Ye.length>0:Ye},kr.prototype._queryCircle=function(Z,he,Q,ve,Ae){var Re=Z-Q,Ye=Z+Q,ut=he-Q,Mt=he+Q;if(Ye<0||Re>this.width||Mt<0||ut>this.height)return!ve&&[];var jt=[];return this._forEachCell(Re,ut,Ye,Mt,this._queryCellCircle,jt,{hitTest:ve,circle:{x:Z,y:he,radius:Q},seenUids:{box:{},circle:{}}},Ae),ve?jt.length>0:jt},kr.prototype.query=function(Z,he,Q,ve,Ae){return this._query(Z,he,Q,ve,!1,Ae)},kr.prototype.hitTest=function(Z,he,Q,ve,Ae){return this._query(Z,he,Q,ve,!0,Ae)},kr.prototype.hitTestCircle=function(Z,he,Q,ve){return this._queryCircle(Z,he,Q,!0,ve)},kr.prototype._queryCell=function(Z,he,Q,ve,Ae,Re,Ye,ut){var Mt=Ye.seenUids,jt=this.boxCells[Ae];if(null!==jt)for(var ur=this.bboxes,gr=0,Pr=jt;gr<Pr.length;gr+=1){var Gr=Pr[gr];if(!Mt.box[Gr]){Mt.box[Gr]=!0;var Yr=4*Gr;if(Z<=ur[Yr+2]&&he<=ur[Yr+3]&&Q>=ur[Yr+0]&&ve>=ur[Yr+1]&&(!ut||ut(this.boxKeys[Gr]))){if(Ye.hitTest)return Re.push(!0),!0;Re.push({key:this.boxKeys[Gr],x1:ur[Yr],y1:ur[Yr+1],x2:ur[Yr+2],y2:ur[Yr+3]})}}}var Ur=this.circleCells[Ae];if(null!==Ur)for(var tn=this.circles,pn=0,Cn=Ur;pn<Cn.length;pn+=1){var Nn=Cn[pn];if(!Mt.circle[Nn]){Mt.circle[Nn]=!0;var Kn=3*Nn;if(this._circleAndRectCollide(tn[Kn],tn[Kn+1],tn[Kn+2],Z,he,Q,ve)&&(!ut||ut(this.circleKeys[Nn]))){if(Ye.hitTest)return Re.push(!0),!0;var qn=tn[Kn],Qn=tn[Kn+1],ua=tn[Kn+2];Re.push({key:this.circleKeys[Nn],x1:qn-ua,y1:Qn-ua,x2:qn+ua,y2:Qn+ua})}}}},kr.prototype._queryCellCircle=function(Z,he,Q,ve,Ae,Re,Ye,ut){var Mt=Ye.circle,jt=Ye.seenUids,ur=this.boxCells[Ae];if(null!==ur)for(var gr=this.bboxes,Pr=0,Gr=ur;Pr<Gr.length;Pr+=1){var Yr=Gr[Pr];if(!jt.box[Yr]){jt.box[Yr]=!0;var Ur=4*Yr;if(this._circleAndRectCollide(Mt.x,Mt.y,Mt.radius,gr[Ur+0],gr[Ur+1],gr[Ur+2],gr[Ur+3])&&(!ut||ut(this.boxKeys[Yr])))return Re.push(!0),!0}}var tn=this.circleCells[Ae];if(null!==tn)for(var pn=this.circles,Cn=0,Nn=tn;Cn<Nn.length;Cn+=1){var Kn=Nn[Cn];if(!jt.circle[Kn]){jt.circle[Kn]=!0;var qn=3*Kn;if(this._circlesCollide(pn[qn],pn[qn+1],pn[qn+2],Mt.x,Mt.y,Mt.radius)&&(!ut||ut(this.circleKeys[Kn])))return Re.push(!0),!0}}},kr.prototype._forEachCell=function(Z,he,Q,ve,Ae,Re,Ye,ut){for(var Mt=this._convertToXCellCoord(Z),jt=this._convertToYCellCoord(he),ur=this._convertToXCellCoord(Q),gr=this._convertToYCellCoord(ve),Pr=Mt;Pr<=ur;Pr++)for(var Gr=jt;Gr<=gr;Gr++)if(Ae.call(this,Z,he,Q,ve,this.xCellCount*Gr+Pr,Re,Ye,ut))return},kr.prototype._convertToXCellCoord=function(Z){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(Z*this.xScale)))},kr.prototype._convertToYCellCoord=function(Z){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(Z*this.yScale)))},kr.prototype._circlesCollide=function(Z,he,Q,ve,Ae,Re){var Ye=ve-Z,ut=Ae-he,Mt=Q+Re;return Mt*Mt>Ye*Ye+ut*ut},kr.prototype._circleAndRectCollide=function(Z,he,Q,ve,Ae,Re,Ye){var ut=(Re-ve)/2,Mt=Math.abs(Z-(ve+ut));if(Mt>ut+Q)return!1;var jt=(Ye-Ae)/2,ur=Math.abs(he-(Ae+jt));if(ur>jt+Q)return!1;if(Mt<=ut||ur<=jt)return!0;var gr=Mt-ut,Pr=ur-jt;return gr*gr+Pr*Pr<=Q*Q};var Va=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ai(ce,Z){for(var he=0;he<ce;he++){var Q=Z.length;Z.resize(Q+4),Z.float32.set(Va,3*Q)}}function Er(ce,Z,he){var Q=Z[0],ve=Z[1];return ce[0]=he[0]*Q+he[4]*ve+he[12],ce[1]=he[1]*Q+he[5]*ve+he[13],ce[3]=he[3]*Q+he[7]*ve+he[15],ce}var gn=100,dn=function(Z,he,Q){void 0===he&&(he=new kr(Z.width+200,Z.height+200,25)),void 0===Q&&(Q=new kr(Z.width+200,Z.height+200,25)),this.transform=Z,this.grid=he,this.ignoredGrid=Q,this.pitchfactor=Math.cos(Z._pitch)*Z.cameraToCenterDistance,this.screenRightBoundary=Z.width+gn,this.screenBottomBoundary=Z.height+gn,this.gridRightBoundary=Z.width+200,this.gridBottomBoundary=Z.height+200};function kn(ce,Z,he){return Z*(e.EXTENT/(ce.tileSize*Math.pow(2,he-ce.tileID.overscaledZ)))}dn.prototype.placeCollisionBox=function(Z,he,Q,ve,Ae){var Re=this.projectAndGetPerspectiveRatio(ve,Z.anchorPointX,Z.anchorPointY),Ye=Q*Re.perspectiveRatio,ut=Z.x1*Ye+Re.point.x,Mt=Z.y1*Ye+Re.point.y,jt=Z.x2*Ye+Re.point.x,ur=Z.y2*Ye+Re.point.y;return!this.isInsideGrid(ut,Mt,jt,ur)||!he&&this.grid.hitTest(ut,Mt,jt,ur,Ae)?{box:[],offscreen:!1}:{box:[ut,Mt,jt,ur],offscreen:this.isOffscreen(ut,Mt,jt,ur)}},dn.prototype.placeCollisionCircles=function(Z,he,Q,ve,Ae,Re,Ye,ut,Mt,jt,ur,gr,Pr){var Gr=[],Yr=new e.Point(he.anchorX,he.anchorY),Ur=wn(Yr,Re),tn=Zn(this.transform.cameraToCenterDistance,Ur.signedDistanceFromCamera),Cn=(jt?Ae/tn:Ae*tn)/e.ONE_EM,Nn=wn(Yr,Ye).point,ua=$n(Cn,ve,he.lineOffsetX*Cn,he.lineOffsetY*Cn,!1,Nn,Yr,he,Q,Ye,{}),ya=!1,ga=!1,Ta=!0;if(ua){for(var La=.5*gr*tn+Pr,Wa=new e.Point(-gn,-gn),ii=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),Ni=new Ir,fi=ua.first,bi=ua.last,Ua=[],Bi=fi.path.length-1;Bi>=1;Bi--)Ua.push(fi.path[Bi]);for(var Hi=1;Hi<bi.path.length;Hi++)Ua.push(bi.path[Hi]);var Zi=2.5*La;if(ut){var Ci=Ua.map(function(hu){return wn(hu,ut)});Ua=Ci.some(function(hu){return hu.signedDistanceFromCamera<=0})?[]:Ci.map(function(hu){return hu.point})}var Qi=[];if(Ua.length>0){for(var li=Ua[0].clone(),Ei=Ua[0].clone(),wo=1;wo<Ua.length;wo++)li.x=Math.min(li.x,Ua[wo].x),li.y=Math.min(li.y,Ua[wo].y),Ei.x=Math.max(Ei.x,Ua[wo].x),Ei.y=Math.max(Ei.y,Ua[wo].y);Qi=li.x>=Wa.x&&Ei.x<=ii.x&&li.y>=Wa.y&&Ei.y<=ii.y?[Ua]:Ei.x<Wa.x||li.x>ii.x||Ei.y<Wa.y||li.y>ii.y?[]:e.clipLine([Ua],Wa.x,Wa.y,ii.x,ii.y)}for(var zo=0,Pl=Qi;zo<Pl.length;zo+=1){Ni.reset(Pl[zo],.25*La);var lu;lu=Ni.length<=.5*La?1:Math.ceil(Ni.paddedLength/Zi)+1;for(var uu=0;uu<lu;uu++){var Tu=uu/Math.max(lu-1,1),cu=Ni.lerp(Tu),Ns=cu.x+gn,Zu=cu.y+gn;Gr.push(Ns,Zu,La,0);var xs=Ns-La,xl=Zu-La,fu=Ns+La,Xl=Zu+La;if(Ta=Ta&&this.isOffscreen(xs,xl,fu,Xl),ga=ga||this.isInsideGrid(xs,xl,fu,Xl),!Z&&this.grid.hitTestCircle(Ns,Zu,La,ur)&&(ya=!0,!Mt))return{circles:[],offscreen:!1,collisionDetected:ya}}}}return{circles:!Mt&&ya||!ga?[]:Gr,offscreen:Ta,collisionDetected:ya}},dn.prototype.queryRenderedSymbols=function(Z){if(0===Z.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var he=[],Q=1/0,ve=1/0,Ae=-1/0,Re=-1/0,Ye=0,ut=Z;Ye<ut.length;Ye+=1){var Mt=ut[Ye],jt=new e.Point(Mt.x+gn,Mt.y+gn);Q=Math.min(Q,jt.x),ve=Math.min(ve,jt.y),Ae=Math.max(Ae,jt.x),Re=Math.max(Re,jt.y),he.push(jt)}for(var gr={},Pr={},Gr=0,Yr=this.grid.query(Q,ve,Ae,Re).concat(this.ignoredGrid.query(Q,ve,Ae,Re));Gr<Yr.length;Gr+=1){var Ur=Yr[Gr],tn=Ur.key;if(void 0===gr[tn.bucketInstanceId]&&(gr[tn.bucketInstanceId]={}),!gr[tn.bucketInstanceId][tn.featureIndex]){var pn=[new e.Point(Ur.x1,Ur.y1),new e.Point(Ur.x2,Ur.y1),new e.Point(Ur.x2,Ur.y2),new e.Point(Ur.x1,Ur.y2)];!e.polygonIntersectsPolygon(he,pn)||(gr[tn.bucketInstanceId][tn.featureIndex]=!0,void 0===Pr[tn.bucketInstanceId]&&(Pr[tn.bucketInstanceId]=[]),Pr[tn.bucketInstanceId].push(tn.featureIndex))}}return Pr},dn.prototype.insertCollisionBox=function(Z,he,Q,ve,Ae){(he?this.ignoredGrid:this.grid).insert({bucketInstanceId:Q,featureIndex:ve,collisionGroupID:Ae},Z[0],Z[1],Z[2],Z[3])},dn.prototype.insertCollisionCircles=function(Z,he,Q,ve,Ae){for(var Re=he?this.ignoredGrid:this.grid,Ye={bucketInstanceId:Q,featureIndex:ve,collisionGroupID:Ae},ut=0;ut<Z.length;ut+=4)Re.insertCircle(Ye,Z[ut],Z[ut+1],Z[ut+2])},dn.prototype.projectAndGetPerspectiveRatio=function(Z,he,Q){var ve=[he,Q,0,1];return Er(ve,ve,Z),{point:new e.Point((ve[0]/ve[3]+1)/2*this.transform.width+gn,(-ve[1]/ve[3]+1)/2*this.transform.height+gn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/ve[3]*.5}},dn.prototype.isOffscreen=function(Z,he,Q,ve){return Q<gn||Z>=this.screenRightBoundary||ve<gn||he>this.screenBottomBoundary},dn.prototype.isInsideGrid=function(Z,he,Q,ve){return Q>=0&&Z<this.gridRightBoundary&&ve>=0&&he<this.gridBottomBoundary},dn.prototype.getViewportMatrix=function(){var Z=e.identity([]);return e.translate(Z,Z,[-gn,-gn,0]),Z};var Un=function(Z,he,Q,ve){this.opacity=Z?Math.max(0,Math.min(1,Z.opacity+(Z.placed?he:-he))):ve&&Q?1:0,this.placed=Q};Un.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var ra=function(Z,he,Q,ve,Ae){this.text=new Un(Z?Z.text:null,he,Q,Ae),this.icon=new Un(Z?Z.icon:null,he,ve,Ae)};ra.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Gn=function(Z,he,Q){this.text=Z,this.icon=he,this.skipFade=Q},On=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},Xn=function(Z,he,Q,ve,Ae){this.bucketInstanceId=Z,this.featureIndex=he,this.sourceLayerIndex=Q,this.bucketIndex=ve,this.tileID=Ae},pa=function(Z){this.crossSourceCollisions=Z,this.maxGroupID=0,this.collisionGroups={}};function oi(ce,Z,he,Q,ve){var Ae=e.getAnchorAlignment(ce),ut=-(Ae.horizontalAlign-.5)*Z,Mt=-(Ae.verticalAlign-.5)*he,jt=e.evaluateVariableOffset(ce,Q);return new e.Point(ut+jt[0]*ve,Mt+jt[1]*ve)}function Ht(ce,Z,he,Q,ve,Ae){var Re=ce.x1,Ye=ce.x2,ut=ce.y1,Mt=ce.y2,jt=ce.anchorPointX,ur=ce.anchorPointY,gr=new e.Point(Z,he);return Q&&gr._rotate(ve?Ae:-Ae),{x1:Re+gr.x,y1:ut+gr.y,x2:Ye+gr.x,y2:Mt+gr.y,anchorPointX:jt,anchorPointY:ur}}pa.prototype.get=function(Z){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[Z]){var he=++this.maxGroupID;this.collisionGroups[Z]={ID:he,predicate:function(Q){return Q.collisionGroupID===he}}}return this.collisionGroups[Z]};var dr=function(Z,he,Q,ve){this.transform=Z.clone(),this.collisionIndex=new dn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=he,this.retainedQueryData={},this.collisionGroups=new pa(Q),this.collisionCircleArrays={},this.prevPlacement=ve,ve&&(ve.prevPlacement=void 0),this.placedOrientations={}};function rn(ce,Z,he,Q,ve){ce.emplaceBack(Z?1:0,he?1:0,Q||0,ve||0),ce.emplaceBack(Z?1:0,he?1:0,Q||0,ve||0),ce.emplaceBack(Z?1:0,he?1:0,Q||0,ve||0),ce.emplaceBack(Z?1:0,he?1:0,Q||0,ve||0)}dr.prototype.getBucketParts=function(Z,he,Q,ve){var Ae=Q.getBucket(he),Re=Q.latestFeatureIndex;if(Ae&&Re&&he.id===Ae.layerIds[0]){var Ye=Q.collisionBoxArray,ut=Ae.layers[0].layout,Mt=Math.pow(2,this.transform.zoom-Q.tileID.overscaledZ),jt=Q.tileSize/e.EXTENT,ur=this.transform.calculatePosMatrix(Q.tileID.toUnwrapped()),gr="map"===ut.get("text-pitch-alignment"),Pr="map"===ut.get("text-rotation-alignment"),Gr=kn(Q,1,this.transform.zoom),Yr=Zr(ur,gr,Pr,this.transform,Gr),Ur=null;if(gr){var tn=An(ur,gr,Pr,this.transform,Gr);Ur=e.multiply([],this.transform.labelPlaneMatrix,tn)}this.retainedQueryData[Ae.bucketInstanceId]=new Xn(Ae.bucketInstanceId,Re,Ae.sourceLayerIndex,Ae.index,Q.tileID);var pn={bucket:Ae,layout:ut,posMatrix:ur,textLabelPlaneMatrix:Yr,labelToScreenMatrix:Ur,scale:Mt,textPixelRatio:jt,holdingForFade:Q.holdingForFade(),collisionBoxArray:Ye,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(Ae.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Ae.sourceID)};if(ve)for(var Cn=0,Nn=Ae.sortKeyRanges;Cn<Nn.length;Cn+=1){var Kn=Nn[Cn];Z.push({sortKey:Kn.sortKey,symbolInstanceStart:Kn.symbolInstanceStart,symbolInstanceEnd:Kn.symbolInstanceEnd,parameters:pn})}else Z.push({symbolInstanceStart:0,symbolInstanceEnd:Ae.symbolInstances.length,parameters:pn})}},dr.prototype.attemptAnchorPlacement=function(Z,he,Q,ve,Ae,Re,Ye,ut,Mt,jt,ur,gr,Pr,Gr,Yr){var Nn,Ur=[gr.textOffset0,gr.textOffset1],tn=oi(Z,Q,ve,Ur,Ae),pn=this.collisionIndex.placeCollisionBox(Ht(he,tn.x,tn.y,Re,Ye,this.transform.angle),ur,ut,Mt,jt.predicate);if(!Yr||0!==this.collisionIndex.placeCollisionBox(Ht(Yr,tn.x,tn.y,Re,Ye,this.transform.angle),ur,ut,Mt,jt.predicate).box.length)return pn.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[gr.crossTileID]&&this.prevPlacement.placements[gr.crossTileID]&&this.prevPlacement.placements[gr.crossTileID].text&&(Nn=this.prevPlacement.variableOffsets[gr.crossTileID].anchor),this.variableOffsets[gr.crossTileID]={textOffset:Ur,width:Q,height:ve,anchor:Z,textBoxScale:Ae,prevAnchor:Nn},this.markUsedJustification(Pr,Z,gr,Gr),Pr.allowVerticalPlacement&&(this.markUsedOrientation(Pr,Gr,gr),this.placedOrientations[gr.crossTileID]=Gr),{shift:tn,placedGlyphBoxes:pn}):void 0},dr.prototype.placeLayerBucketPart=function(Z,he,Q){var ve=this,Ae=Z.parameters,Re=Ae.bucket,Ye=Ae.layout,ut=Ae.posMatrix,Mt=Ae.textLabelPlaneMatrix,jt=Ae.labelToScreenMatrix,ur=Ae.textPixelRatio,gr=Ae.holdingForFade,Pr=Ae.collisionBoxArray,Gr=Ae.partiallyEvaluatedTextSize,Yr=Ae.collisionGroup,Ur=Ye.get("text-optional"),tn=Ye.get("icon-optional"),pn=Ye.get("text-allow-overlap"),Cn=Ye.get("icon-allow-overlap"),Nn="map"===Ye.get("text-rotation-alignment"),Kn="map"===Ye.get("text-pitch-alignment"),qn="none"!==Ye.get("icon-text-fit"),Qn="viewport-y"===Ye.get("symbol-z-order"),ua=pn&&(Cn||!Re.hasIconData()||tn),ya=Cn&&(pn||!Re.hasTextData()||Ur);!Re.collisionArrays&&Pr&&Re.deserializeCollisionBoxes(Pr);var ga=function(fi,bi){if(!he[fi.crossTileID]){if(gr)return void(ve.placements[fi.crossTileID]=new Gn(!1,!1,!1));var li,Ua=!1,Bi=!1,Hi=!0,Zi=null,Ci={box:null,offscreen:null},Qi={box:null,offscreen:null},Ei=null,wo=null,zo=0,Pl=0,Dl=0;bi.textFeatureIndex?zo=bi.textFeatureIndex:fi.useRuntimeCollisionCircles&&(zo=fi.featureIndex),bi.verticalTextFeatureIndex&&(Pl=bi.verticalTextFeatureIndex);var lu=bi.textBox;if(lu){var uu=function(Lo){var el=e.WritingMode.horizontal;if(Re.allowVerticalPlacement&&!Lo&&ve.prevPlacement){var tl=ve.prevPlacement.placedOrientations[fi.crossTileID];tl&&(ve.placedOrientations[fi.crossTileID]=tl,ve.markUsedOrientation(Re,el=tl,fi))}return el},Tu=function(Lo,el){if(Re.allowVerticalPlacement&&fi.numVerticalGlyphVertices>0&&bi.verticalTextBox)for(var tl=0,Rc=Re.writingModes;tl<Rc.length&&(Rc[tl]===e.WritingMode.vertical?(Ci=el(),Qi=Ci):Ci=Lo(),!(Ci&&Ci.box&&Ci.box.length));tl+=1);else Ci=Lo()};if(Ye.get("text-variable-anchor")){var xs=Ye.get("text-variable-anchor");if(ve.prevPlacement&&ve.prevPlacement.variableOffsets[fi.crossTileID]){var xl=ve.prevPlacement.variableOffsets[fi.crossTileID];xs.indexOf(xl.anchor)>0&&(xs=xs.filter(function(Lo){return Lo!==xl.anchor})).unshift(xl.anchor)}var fu=function(Lo,el,tl){for(var Rc=Lo.x2-Lo.x1,af=Lo.y2-Lo.y1,Kf=fi.textBoxScale,Qf=qn&&!Cn?el:null,_c={box:[],offscreen:!1},$f=pn?2*xs.length:xs.length,Ic=0;Ic<$f;++Ic){var of=ve.attemptAnchorPlacement(xs[Ic%xs.length],Lo,Rc,af,Kf,Nn,Kn,ur,ut,Yr,Ic>=xs.length,fi,Re,tl,Qf);if(of&&(_c=of.placedGlyphBoxes)&&_c.box&&_c.box.length){Ua=!0,Zi=of.shift;break}}return _c};Tu(function(){return fu(lu,bi.iconBox,e.WritingMode.horizontal)},function(){var Lo=bi.verticalTextBox;return Re.allowVerticalPlacement&&!(Ci&&Ci.box&&Ci.box.length)&&fi.numVerticalGlyphVertices>0&&Lo?fu(Lo,bi.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}}),Ci&&(Ua=Ci.box,Hi=Ci.offscreen);var Ec=uu(Ci&&Ci.box);if(!Ua&&ve.prevPlacement){var Qu=ve.prevPlacement.variableOffsets[fi.crossTileID];Qu&&(ve.variableOffsets[fi.crossTileID]=Qu,ve.markUsedJustification(Re,Qu.anchor,fi,Ec))}}else{var cu=function(Lo,el){var tl=ve.collisionIndex.placeCollisionBox(Lo,pn,ur,ut,Yr.predicate);return tl&&tl.box&&tl.box.length&&(ve.markUsedOrientation(Re,el,fi),ve.placedOrientations[fi.crossTileID]=el),tl};Tu(function(){return cu(lu,e.WritingMode.horizontal)},function(){var Lo=bi.verticalTextBox;return Re.allowVerticalPlacement&&fi.numVerticalGlyphVertices>0&&Lo?cu(Lo,e.WritingMode.vertical):{box:null,offscreen:null}}),uu(Ci&&Ci.box&&Ci.box.length)}}if(Ua=(li=Ci)&&li.box&&li.box.length>0,Hi=li&&li.offscreen,fi.useRuntimeCollisionCircles){var ls=Re.text.placedSymbolArray.get(fi.centerJustifiedTextSymbolIndex),xc=e.evaluateSizeForFeature(Re.textSizeData,Gr,ls),Ss=Ye.get("text-padding");Ei=ve.collisionIndex.placeCollisionCircles(pn,ls,Re.lineVertexArray,Re.glyphOffsetArray,xc,ut,Mt,jt,Q,Kn,Yr.predicate,fi.collisionCircleDiameter,Ss),Ua=pn||Ei.circles.length>0&&!Ei.collisionDetected,Hi=Hi&&Ei.offscreen}if(bi.iconFeatureIndex&&(Dl=bi.iconFeatureIndex),bi.iconBox){var Lc=function(Lo){var el=qn&&Zi?Ht(Lo,Zi.x,Zi.y,Nn,Kn,ve.transform.angle):Lo;return ve.collisionIndex.placeCollisionBox(el,Cn,ur,ut,Yr.predicate)};Bi=Qi&&Qi.box&&Qi.box.length&&bi.verticalIconBox?(wo=Lc(bi.verticalIconBox)).box.length>0:(wo=Lc(bi.iconBox)).box.length>0,Hi=Hi&&wo.offscreen}var Pc=Ur||0===fi.numHorizontalGlyphVertices&&0===fi.numVerticalGlyphVertices,kf=tn||0===fi.numIconVertices;if(Pc||kf?kf?Pc||(Bi=Bi&&Ua):Ua=Bi&&Ua:Bi=Ua=Bi&&Ua,Ua&&li&&li.box&&ve.collisionIndex.insertCollisionBox(li.box,Ye.get("text-ignore-placement"),Re.bucketInstanceId,Qi&&Qi.box&&Pl?Pl:zo,Yr.ID),Bi&&wo&&ve.collisionIndex.insertCollisionBox(wo.box,Ye.get("icon-ignore-placement"),Re.bucketInstanceId,Dl,Yr.ID),Ei&&(Ua&&ve.collisionIndex.insertCollisionCircles(Ei.circles,Ye.get("text-ignore-placement"),Re.bucketInstanceId,zo,Yr.ID),Q)){var Dc=Re.bucketInstanceId,lc=ve.collisionCircleArrays[Dc];void 0===lc&&(lc=ve.collisionCircleArrays[Dc]=new On);for(var uc=0;uc<Ei.circles.length;uc+=4)lc.circles.push(Ei.circles[uc+0]),lc.circles.push(Ei.circles[uc+1]),lc.circles.push(Ei.circles[uc+2]),lc.circles.push(Ei.collisionDetected?1:0)}ve.placements[fi.crossTileID]=new Gn(Ua||ua,Bi||ya,Hi||Re.justReloaded),he[fi.crossTileID]=!0}};if(Qn)for(var Ta=Re.getSortedSymbolIndexes(this.transform.angle),La=Ta.length-1;La>=0;--La){var Wa=Ta[La];ga(Re.symbolInstances.get(Wa),Re.collisionArrays[Wa])}else for(var ii=Z.symbolInstanceStart;ii<Z.symbolInstanceEnd;ii++)ga(Re.symbolInstances.get(ii),Re.collisionArrays[ii]);if(Q&&Re.bucketInstanceId in this.collisionCircleArrays){var Ni=this.collisionCircleArrays[Re.bucketInstanceId];e.invert(Ni.invProjMatrix,ut),Ni.viewportMatrix=this.collisionIndex.getViewportMatrix()}Re.justReloaded=!1},dr.prototype.markUsedJustification=function(Z,he,Q,ve){var Re;Re=ve===e.WritingMode.vertical?Q.verticalPlacedTextSymbolIndex:{left:Q.leftJustifiedTextSymbolIndex,center:Q.centerJustifiedTextSymbolIndex,right:Q.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(he)];for(var ut=0,Mt=[Q.leftJustifiedTextSymbolIndex,Q.centerJustifiedTextSymbolIndex,Q.rightJustifiedTextSymbolIndex,Q.verticalPlacedTextSymbolIndex];ut<Mt.length;ut+=1){var jt=Mt[ut];jt>=0&&(Z.text.placedSymbolArray.get(jt).crossTileID=Re>=0&&jt!==Re?0:Q.crossTileID)}},dr.prototype.markUsedOrientation=function(Z,he,Q){for(var ve=he===e.WritingMode.horizontal||he===e.WritingMode.horizontalOnly?he:0,Ae=he===e.WritingMode.vertical?he:0,Ye=0,ut=[Q.leftJustifiedTextSymbolIndex,Q.centerJustifiedTextSymbolIndex,Q.rightJustifiedTextSymbolIndex];Ye<ut.length;Ye+=1)Z.text.placedSymbolArray.get(ut[Ye]).placedOrientation=ve;Q.verticalPlacedTextSymbolIndex&&(Z.text.placedSymbolArray.get(Q.verticalPlacedTextSymbolIndex).placedOrientation=Ae)},dr.prototype.commit=function(Z){this.commitTime=Z,this.zoomAtLastRecencyCheck=this.transform.zoom;var he=this.prevPlacement,Q=!1;this.prevZoomAdjustment=he?he.zoomAdjustment(this.transform.zoom):0;var ve=he?he.symbolFadeChange(Z):1,Ae=he?he.opacities:{},Re=he?he.variableOffsets:{},Ye=he?he.placedOrientations:{};for(var ut in this.placements){var Mt=this.placements[ut],jt=Ae[ut];jt?(this.opacities[ut]=new ra(jt,ve,Mt.text,Mt.icon),Q=Q||Mt.text!==jt.text.placed||Mt.icon!==jt.icon.placed):(this.opacities[ut]=new ra(null,ve,Mt.text,Mt.icon,Mt.skipFade),Q=Q||Mt.text||Mt.icon)}for(var ur in Ae){var gr=Ae[ur];if(!this.opacities[ur]){var Pr=new ra(gr,ve,!1,!1);Pr.isHidden()||(this.opacities[ur]=Pr,Q=Q||gr.text.placed||gr.icon.placed)}}for(var Gr in Re)!this.variableOffsets[Gr]&&this.opacities[Gr]&&!this.opacities[Gr].isHidden()&&(this.variableOffsets[Gr]=Re[Gr]);for(var Yr in Ye)!this.placedOrientations[Yr]&&this.opacities[Yr]&&!this.opacities[Yr].isHidden()&&(this.placedOrientations[Yr]=Ye[Yr]);Q?this.lastPlacementChangeTime=Z:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=he?he.lastPlacementChangeTime:Z)},dr.prototype.updateLayerOpacities=function(Z,he){for(var Q={},ve=0,Ae=he;ve<Ae.length;ve+=1){var Re=Ae[ve],Ye=Re.getBucket(Z);Ye&&Re.latestFeatureIndex&&Z.id===Ye.layerIds[0]&&this.updateBucketOpacities(Ye,Q,Re.collisionBoxArray)}},dr.prototype.updateBucketOpacities=function(Z,he,Q){var ve=this;Z.hasTextData()&&Z.text.opacityVertexArray.clear(),Z.hasIconData()&&Z.icon.opacityVertexArray.clear(),Z.hasIconCollisionBoxData()&&Z.iconCollisionBox.collisionVertexArray.clear(),Z.hasTextCollisionBoxData()&&Z.textCollisionBox.collisionVertexArray.clear();var Ae=Z.layers[0].layout,Re=new ra(null,0,!1,!1,!0),Ye=Ae.get("text-allow-overlap"),ut=Ae.get("icon-allow-overlap"),Mt=Ae.get("text-variable-anchor"),jt="map"===Ae.get("text-rotation-alignment"),ur="map"===Ae.get("text-pitch-alignment"),gr="none"!==Ae.get("icon-text-fit"),Pr=new ra(null,0,Ye&&(ut||!Z.hasIconData()||Ae.get("icon-optional")),ut&&(Ye||!Z.hasTextData()||Ae.get("text-optional")),!0);!Z.collisionArrays&&Q&&(Z.hasIconCollisionBoxData()||Z.hasTextCollisionBoxData())&&Z.deserializeCollisionBoxes(Q);for(var Gr=function(pn,Cn,Nn){for(var Kn=0;Kn<Cn/4;Kn++)pn.opacityVertexArray.emplaceBack(Nn)},Yr=function(pn){var Cn=Z.symbolInstances.get(pn),Nn=Cn.numHorizontalGlyphVertices,Kn=Cn.numVerticalGlyphVertices,qn=Cn.crossTileID,ua=ve.opacities[qn];he[qn]?ua=Re:ua||(ve.opacities[qn]=ua=Pr),he[qn]=!0;var ga=Cn.numIconVertices>0,Ta=ve.placedOrientations[Cn.crossTileID],La=Ta===e.WritingMode.vertical,Wa=Ta===e.WritingMode.horizontal||Ta===e.WritingMode.horizontalOnly;if(Nn>0||Kn>0){var ii=hr(ua.text);Gr(Z.text,Nn,La?vn:ii),Gr(Z.text,Kn,Wa?vn:ii);var bi=ua.text.isHidden();[Cn.rightJustifiedTextSymbolIndex,Cn.centerJustifiedTextSymbolIndex,Cn.leftJustifiedTextSymbolIndex].forEach(function(Dl){Dl>=0&&(Z.text.placedSymbolArray.get(Dl).hidden=bi||La?1:0)}),Cn.verticalPlacedTextSymbolIndex>=0&&(Z.text.placedSymbolArray.get(Cn.verticalPlacedTextSymbolIndex).hidden=bi||Wa?1:0);var Ua=ve.variableOffsets[Cn.crossTileID];Ua&&ve.markUsedJustification(Z,Ua.anchor,Cn,Ta);var Bi=ve.placedOrientations[Cn.crossTileID];Bi&&(ve.markUsedJustification(Z,"left",Cn,Bi),ve.markUsedOrientation(Z,Bi,Cn))}if(ga){var Hi=hr(ua.icon),Zi=!(gr&&Cn.verticalPlacedIconSymbolIndex&&La);Cn.placedIconSymbolIndex>=0&&(Gr(Z.icon,Cn.numIconVertices,Zi?Hi:vn),Z.icon.placedSymbolArray.get(Cn.placedIconSymbolIndex).hidden=ua.icon.isHidden()),Cn.verticalPlacedIconSymbolIndex>=0&&(Gr(Z.icon,Cn.numVerticalIconVertices,Zi?vn:Hi),Z.icon.placedSymbolArray.get(Cn.verticalPlacedIconSymbolIndex).hidden=ua.icon.isHidden())}if(Z.hasIconCollisionBoxData()||Z.hasTextCollisionBoxData()){var li=Z.collisionArrays[pn];if(li){var Ei=new e.Point(0,0);if(li.textBox||li.verticalTextBox){var wo=!0;if(Mt){var zo=ve.variableOffsets[qn];zo?(Ei=oi(zo.anchor,zo.width,zo.height,zo.textOffset,zo.textBoxScale),jt&&Ei._rotate(ur?ve.transform.angle:-ve.transform.angle)):wo=!1}li.textBox&&rn(Z.textCollisionBox.collisionVertexArray,ua.text.placed,!wo||La,Ei.x,Ei.y),li.verticalTextBox&&rn(Z.textCollisionBox.collisionVertexArray,ua.text.placed,!wo||Wa,Ei.x,Ei.y)}var Pl=Boolean(!Wa&&li.verticalIconBox);li.iconBox&&rn(Z.iconCollisionBox.collisionVertexArray,ua.icon.placed,Pl,gr?Ei.x:0,gr?Ei.y:0),li.verticalIconBox&&rn(Z.iconCollisionBox.collisionVertexArray,ua.icon.placed,!Pl,gr?Ei.x:0,gr?Ei.y:0)}}},Ur=0;Ur<Z.symbolInstances.length;Ur++)Yr(Ur);if(Z.sortFeatures(this.transform.angle),this.retainedQueryData[Z.bucketInstanceId]&&(this.retainedQueryData[Z.bucketInstanceId].featureSortOrder=Z.featureSortOrder),Z.hasTextData()&&Z.text.opacityVertexBuffer&&Z.text.opacityVertexBuffer.updateData(Z.text.opacityVertexArray),Z.hasIconData()&&Z.icon.opacityVertexBuffer&&Z.icon.opacityVertexBuffer.updateData(Z.icon.opacityVertexArray),Z.hasIconCollisionBoxData()&&Z.iconCollisionBox.collisionVertexBuffer&&Z.iconCollisionBox.collisionVertexBuffer.updateData(Z.iconCollisionBox.collisionVertexArray),Z.hasTextCollisionBoxData()&&Z.textCollisionBox.collisionVertexBuffer&&Z.textCollisionBox.collisionVertexBuffer.updateData(Z.textCollisionBox.collisionVertexArray),Z.bucketInstanceId in this.collisionCircleArrays){var tn=this.collisionCircleArrays[Z.bucketInstanceId];Z.placementInvProjMatrix=tn.invProjMatrix,Z.placementViewportMatrix=tn.viewportMatrix,Z.collisionCircleArray=tn.circles,delete this.collisionCircleArrays[Z.bucketInstanceId]}},dr.prototype.symbolFadeChange=function(Z){return 0===this.fadeDuration?1:(Z-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},dr.prototype.zoomAdjustment=function(Z){return Math.max(0,(this.transform.zoom-Z)/1.5)},dr.prototype.hasTransitions=function(Z){return this.stale||Z-this.lastPlacementChangeTime<this.fadeDuration},dr.prototype.stillRecent=function(Z,he){var Q=this.zoomAtLastRecencyCheck===he?1-this.zoomAdjustment(he):1;return this.zoomAtLastRecencyCheck=he,this.commitTime+this.fadeDuration*Q>Z},dr.prototype.setStale=function(){this.stale=!0};var ln=Math.pow(2,25),or=Math.pow(2,24),Br=Math.pow(2,17),Rt=Math.pow(2,16),Lt=Math.pow(2,9),Pt=Math.pow(2,8),Wt=Math.pow(2,1);function hr(ce){if(0===ce.opacity&&!ce.placed)return 0;if(1===ce.opacity&&ce.placed)return 4294967295;var Z=ce.placed?1:0,he=Math.floor(127*ce.opacity);return he*ln+Z*or+he*Br+Z*Rt+he*Lt+Z*Pt+he*Wt+Z}var vn=0,Fn=function(Z){this._sortAcrossTiles="viewport-y"!==Z.layout.get("symbol-z-order")&&void 0!==Z.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Fn.prototype.continuePlacement=function(Z,he,Q,ve,Ae){for(var Re=this._bucketParts;this._currentTileIndex<Z.length;)if(he.getBucketParts(Re,ve,Z[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,Ae())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Re.sort(function(Mt,jt){return Mt.sortKey-jt.sortKey}));this._currentPartIndex<Re.length;)if(he.placeLayerBucketPart(Re[this._currentPartIndex],this._seenCrossTileIDs,Q),this._currentPartIndex++,Ae())return!0;return!1};var Jn=function(Z,he,Q,ve,Ae,Re,Ye){this.placement=new dr(Z,Ae,Re,Ye),this._currentPlacementIndex=he.length-1,this._forceFullPlacement=Q,this._showCollisionBoxes=ve,this._done=!1};Jn.prototype.isDone=function(){return this._done},Jn.prototype.continuePlacement=function(Z,he,Q){for(var ve=this,Ae=e.browser.now(),Re=function(){var ur=e.browser.now()-Ae;return!ve._forceFullPlacement&&ur>2};this._currentPlacementIndex>=0;){var ut=he[Z[this._currentPlacementIndex]],Mt=this.placement.collisionIndex.transform.zoom;if("symbol"===ut.type&&(!ut.minzoom||ut.minzoom<=Mt)&&(!ut.maxzoom||ut.maxzoom>Mt)){if(this._inProgressLayer||(this._inProgressLayer=new Fn(ut)),this._inProgressLayer.continuePlacement(Q[ut.source],this.placement,this._showCollisionBoxes,ut,Re))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Jn.prototype.commit=function(Z){return this.placement.commit(Z),this.placement};var _n=512/e.EXTENT/2,jn=function(Z,he,Q){this.tileID=Z,this.indexedSymbolInstances={},this.bucketInstanceId=Q;for(var ve=0;ve<he.length;ve++){var Ae=he.get(ve),Re=Ae.key;this.indexedSymbolInstances[Re]||(this.indexedSymbolInstances[Re]=[]),this.indexedSymbolInstances[Re].push({crossTileID:Ae.crossTileID,coord:this.getScaledCoordinates(Ae,Z)})}};jn.prototype.getScaledCoordinates=function(Z,he){var ve=_n/Math.pow(2,he.canonical.z-this.tileID.canonical.z);return{x:Math.floor((he.canonical.x*e.EXTENT+Z.anchorX)*ve),y:Math.floor((he.canonical.y*e.EXTENT+Z.anchorY)*ve)}},jn.prototype.findMatches=function(Z,he,Q){for(var ve=this.tileID.canonical.z<he.canonical.z?1:Math.pow(2,this.tileID.canonical.z-he.canonical.z),Ae=0;Ae<Z.length;Ae++){var Re=Z.get(Ae);if(!Re.crossTileID){var Ye=this.indexedSymbolInstances[Re.key];if(Ye)for(var ut=this.getScaledCoordinates(Re,he),Mt=0,jt=Ye;Mt<jt.length;Mt+=1){var ur=jt[Mt];if(Math.abs(ur.coord.x-ut.x)<=ve&&Math.abs(ur.coord.y-ut.y)<=ve&&!Q[ur.crossTileID]){Q[ur.crossTileID]=!0,Re.crossTileID=ur.crossTileID;break}}}}};var ia=function(){this.maxCrossTileID=0};ia.prototype.generate=function(){return++this.maxCrossTileID};var va=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};va.prototype.handleWrapJump=function(Z){var he=Math.round((Z-this.lng)/360);if(0!==he)for(var Q in this.indexes){var ve=this.indexes[Q],Ae={};for(var Re in ve){var Ye=ve[Re];Ye.tileID=Ye.tileID.unwrapTo(Ye.tileID.wrap+he),Ae[Ye.tileID.key]=Ye}this.indexes[Q]=Ae}this.lng=Z},va.prototype.addBucket=function(Z,he,Q){if(this.indexes[Z.overscaledZ]&&this.indexes[Z.overscaledZ][Z.key]){if(this.indexes[Z.overscaledZ][Z.key].bucketInstanceId===he.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(Z.overscaledZ,this.indexes[Z.overscaledZ][Z.key])}for(var ve=0;ve<he.symbolInstances.length;ve++)he.symbolInstances.get(ve).crossTileID=0;this.usedCrossTileIDs[Z.overscaledZ]||(this.usedCrossTileIDs[Z.overscaledZ]={});var Re=this.usedCrossTileIDs[Z.overscaledZ];for(var Ye in this.indexes){var ut=this.indexes[Ye];if(Number(Ye)>Z.overscaledZ)for(var Mt in ut){var jt=ut[Mt];jt.tileID.isChildOf(Z)&&jt.findMatches(he.symbolInstances,Z,Re)}else{var gr=ut[Z.scaledTo(Number(Ye)).key];gr&&gr.findMatches(he.symbolInstances,Z,Re)}}for(var Pr=0;Pr<he.symbolInstances.length;Pr++){var Gr=he.symbolInstances.get(Pr);Gr.crossTileID||(Gr.crossTileID=Q.generate(),Re[Gr.crossTileID]=!0)}return void 0===this.indexes[Z.overscaledZ]&&(this.indexes[Z.overscaledZ]={}),this.indexes[Z.overscaledZ][Z.key]=new jn(Z,he.symbolInstances,he.bucketInstanceId),!0},va.prototype.removeBucketCrossTileIDs=function(Z,he){for(var Q in he.indexedSymbolInstances)for(var ve=0,Ae=he.indexedSymbolInstances[Q];ve<Ae.length;ve+=1)delete this.usedCrossTileIDs[Z][Ae[ve].crossTileID]},va.prototype.removeStaleBuckets=function(Z){var he=!1;for(var Q in this.indexes){var ve=this.indexes[Q];for(var Ae in ve)Z[ve[Ae].bucketInstanceId]||(this.removeBucketCrossTileIDs(Q,ve[Ae]),delete ve[Ae],he=!0)}return he};var _a=function(){this.layerIndexes={},this.crossTileIDs=new ia,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};_a.prototype.addLayer=function(Z,he,Q){var ve=this.layerIndexes[Z.id];void 0===ve&&(ve=this.layerIndexes[Z.id]=new va);var Ae=!1,Re={};ve.handleWrapJump(Q);for(var Ye=0,ut=he;Ye<ut.length;Ye+=1){var Mt=ut[Ye],jt=Mt.getBucket(Z);!jt||Z.id!==jt.layerIds[0]||(jt.bucketInstanceId||(jt.bucketInstanceId=++this.maxBucketInstanceId),ve.addBucket(Mt.tileID,jt,this.crossTileIDs)&&(Ae=!0),Re[jt.bucketInstanceId]=!0)}return ve.removeStaleBuckets(Re)&&(Ae=!0),Ae},_a.prototype.pruneUnusedLayers=function(Z){var he={};for(var Q in Z.forEach(function(ve){he[ve]=!0}),this.layerIndexes)he[Q]||delete this.layerIndexes[Q]};var sa=function(ce,Z){return e.emitValidationErrors(ce,Z&&Z.filter(function(he){return"source.canvas"!==he.identifier}))},Aa=e.pick(mr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),xo=e.pick(mr,["setCenter","setZoom","setBearing","setPitch"]),Ao=function en(){var ce={},Z=e.styleSpec.$version;for(var he in e.styleSpec.$root){var Q=e.styleSpec.$root[he];if(Q.required){var ve;null!=(ve="version"===he?Z:"array"===Q.type?[]:{})&&(ce[he]=ve)}}return ce}(),Io=function(ce){function Z(he,Q){var ve=this;void 0===Q&&(Q={}),ce.call(this),this.map=he,this.dispatcher=new I(fr(),this),this.imageManager=new w,this.imageManager.setEventedParent(this),this.glyphManager=new h(he._requestManager,Q.localIdeographFontFamily),this.lineAtlas=new O(256,512),this.crossTileSymbolIndex=new _a,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var Ae=this;this._rtlTextPluginCallback=Z.registerForPluginStateChange(function(Re){Ae.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Re.pluginStatus,pluginURL:Re.pluginURL},function(ut,Mt){if(e.triggerPluginCompletionEvent(ut),Mt&&Mt.every(function(gr){return gr}))for(var ur in Ae.sourceCaches)Ae.sourceCaches[ur].reload()})}),this.on("data",function(Re){if("source"===Re.dataType&&"metadata"===Re.sourceDataType){var Ye=ve.sourceCaches[Re.sourceId];if(Ye){var ut=Ye.getSource();if(ut&&ut.vectorLayerIds)for(var Mt in ve._layers){var jt=ve._layers[Mt];jt.source===ut.id&&ve._validateLayer(jt)}}}})}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.loadURL=function(Q,ve){var Ae=this;void 0===ve&&(ve={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var Re="boolean"==typeof ve.validate?ve.validate:!e.isMapboxURL(Q);Q=this.map._requestManager.normalizeStyleURL(Q,ve.accessToken);var Ye=this.map._requestManager.transformRequest(Q,e.ResourceType.Style);this._request=e.getJSON(Ye,function(ut,Mt){Ae._request=null,ut?Ae.fire(new e.ErrorEvent(ut)):Mt&&Ae._load(Mt,Re)})},Z.prototype.loadJSON=function(Q,ve){var Ae=this;void 0===ve&&(ve={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){Ae._request=null,Ae._load(Q,!1!==ve.validate)})},Z.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Ao,!1)},Z.prototype._load=function(Q,ve){if(!ve||!sa(this,e.validateStyle(Q))){for(var Ae in this._loaded=!0,this.stylesheet=Q,Q.sources)this.addSource(Ae,Q.sources[Ae],{validate:!1});Q.sprite?this._loadSprite(Q.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(Q.glyphs);var Re=Ar(this.stylesheet.layers);this._order=Re.map(function(jt){return jt.id}),this._layers={},this._serializedLayers={};for(var Ye=0,ut=Re;Ye<ut.length;Ye+=1){var Mt=ut[Ye];(Mt=e.createStyleLayer(Mt)).setEventedParent(this,{layer:{id:Mt.id}}),this._layers[Mt.id]=Mt,this._serializedLayers[Mt.id]=Mt.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new z(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},Z.prototype._loadSprite=function(Q){var ve=this;this._spriteRequest=function x(ce,Z,he){var Q,ve,Ae,Re=e.browser.devicePixelRatio>1?"@2x":"",Ye=e.getJSON(Z.transformRequest(Z.normalizeSpriteURL(ce,Re,".json"),e.ResourceType.SpriteJSON),function(jt,ur){Ye=null,Ae||(Ae=jt,Q=ur,Mt())}),ut=e.getImage(Z.transformRequest(Z.normalizeSpriteURL(ce,Re,".png"),e.ResourceType.SpriteImage),function(jt,ur){ut=null,Ae||(Ae=jt,ve=ur,Mt())});function Mt(){if(Ae)he(Ae);else if(Q&&ve){var jt=e.browser.getImageData(ve),ur={};for(var gr in Q){var Pr=Q[gr],Gr=Pr.width,Yr=Pr.height,Ur=Pr.x,tn=Pr.y,pn=Pr.sdf,Cn=Pr.pixelRatio,Nn=Pr.stretchX,Kn=Pr.stretchY,qn=Pr.content,Qn=new e.RGBAImage({width:Gr,height:Yr});e.RGBAImage.copy(jt,Qn,{x:Ur,y:tn},{x:0,y:0},{width:Gr,height:Yr}),ur[gr]={data:Qn,pixelRatio:Cn,sdf:pn,stretchX:Nn,stretchY:Kn,content:qn}}he(null,ur)}}return{cancel:function(){Ye&&(Ye.cancel(),Ye=null),ut&&(ut.cancel(),ut=null)}}}(Q,this.map._requestManager,function(Ae,Re){if(ve._spriteRequest=null,Ae)ve.fire(new e.ErrorEvent(Ae));else if(Re)for(var Ye in Re)ve.imageManager.addImage(Ye,Re[Ye]);ve.imageManager.setLoaded(!0),ve._availableImages=ve.imageManager.listImages(),ve.dispatcher.broadcast("setImages",ve._availableImages),ve.fire(new e.Event("data",{dataType:"style"}))})},Z.prototype._validateLayer=function(Q){var ve=this.sourceCaches[Q.source];if(ve){var Ae=Q.sourceLayer;if(Ae){var Re=ve.getSource();("geojson"===Re.type||Re.vectorLayerIds&&-1===Re.vectorLayerIds.indexOf(Ae))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+Ae+'" does not exist on source "'+Re.id+'" as specified by style layer "'+Q.id+'"')))}}},Z.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var Q in this.sourceCaches)if(!this.sourceCaches[Q].loaded())return!1;return!!this.imageManager.isLoaded()},Z.prototype._serializeLayers=function(Q){for(var ve=[],Ae=0,Re=Q;Ae<Re.length;Ae+=1){var ut=this._layers[Re[Ae]];"custom"!==ut.type&&ve.push(ut.serialize())}return ve},Z.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var Q in this.sourceCaches)if(this.sourceCaches[Q].hasTransition())return!0;for(var ve in this._layers)if(this._layers[ve].hasTransition())return!0;return!1},Z.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},Z.prototype.update=function(Q){if(this._loaded){var ve=this._changed;if(this._changed){var Ae=Object.keys(this._updatedLayers),Re=Object.keys(this._removedLayers);for(var Ye in(Ae.length||Re.length)&&this._updateWorkerLayers(Ae,Re),this._updatedSources){var ut=this._updatedSources[Ye];"reload"===ut?this._reloadSource(Ye):"clear"===ut&&this._clearSource(Ye)}for(var Mt in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Mt].updateTransitions(Q);this.light.updateTransitions(Q),this._resetUpdates()}for(var jt in this.sourceCaches)this.sourceCaches[jt].used=!1;for(var ur=0,gr=this._order;ur<gr.length;ur+=1){var Gr=this._layers[gr[ur]];Gr.recalculate(Q,this._availableImages),!Gr.isHidden(Q.zoom)&&Gr.source&&(this.sourceCaches[Gr.source].used=!0)}this.light.recalculate(Q),this.z=Q.zoom,ve&&this.fire(new e.Event("data",{dataType:"style"}))}},Z.prototype._updateTilesForChangedImages=function(){var Q=Object.keys(this._changedImages);if(Q.length){for(var ve in this.sourceCaches)this.sourceCaches[ve].reloadTilesForDependencies(["icons","patterns"],Q);this._changedImages={}}},Z.prototype._updateWorkerLayers=function(Q,ve){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(Q),removedIds:ve})},Z.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},Z.prototype.setState=function(Q){var ve=this;if(this._checkLoaded(),sa(this,e.validateStyle(Q)))return!1;(Q=e.clone$1(Q)).layers=Ar(Q.layers);var Ae=qr(this.serialize(),Q).filter(function(Ye){return!(Ye.command in xo)});if(0===Ae.length)return!1;var Re=Ae.filter(function(Ye){return!(Ye.command in Aa)});if(Re.length>0)throw new Error("Unimplemented: "+Re.map(function(Ye){return Ye.command}).join(", ")+".");return Ae.forEach(function(Ye){"setTransition"!==Ye.command&&ve[Ye.command].apply(ve,Ye.args)}),this.stylesheet=Q,!0},Z.prototype.addImage=function(Q,ve){if(this.getImage(Q))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(Q,ve),this._availableImages=this.imageManager.listImages(),this._changedImages[Q]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},Z.prototype.updateImage=function(Q,ve){this.imageManager.updateImage(Q,ve)},Z.prototype.getImage=function(Q){return this.imageManager.getImage(Q)},Z.prototype.removeImage=function(Q){if(!this.getImage(Q))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(Q),this._availableImages=this.imageManager.listImages(),this._changedImages[Q]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},Z.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},Z.prototype.addSource=function(Q,ve,Ae){var Re=this;if(void 0===Ae&&(Ae={}),this._checkLoaded(),void 0!==this.sourceCaches[Q])throw new Error("There is already a source with this ID");if(!ve.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(ve).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(ve.type)>=0&&this._validate(e.validateStyle.source,"sources."+Q,ve,null,Ae))){this.map&&this.map._collectResourceTiming&&(ve.collectResourceTiming=!0);var Mt=this.sourceCaches[Q]=new Je(Q,ve,this.dispatcher);Mt.style=this,Mt.setEventedParent(this,function(){return{isSourceLoaded:Re.loaded(),source:Mt.serialize(),sourceId:Q}}),Mt.onAdd(this.map),this._changed=!0}},Z.prototype.removeSource=function(Q){if(this._checkLoaded(),void 0===this.sourceCaches[Q])throw new Error("There is no source with this ID");for(var ve in this._layers)if(this._layers[ve].source===Q)return this.fire(new e.ErrorEvent(new Error('Source "'+Q+'" cannot be removed while layer "'+ve+'" is using it.')));var Ae=this.sourceCaches[Q];delete this.sourceCaches[Q],delete this._updatedSources[Q],Ae.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:Q})),Ae.setEventedParent(null),Ae.clearTiles(),Ae.onRemove&&Ae.onRemove(this.map),this._changed=!0},Z.prototype.setGeoJSONSourceData=function(Q,ve){this._checkLoaded(),this.sourceCaches[Q].getSource().setData(ve),this._changed=!0},Z.prototype.getSource=function(Q){return this.sourceCaches[Q]&&this.sourceCaches[Q].getSource()},Z.prototype.addLayer=function(Q,ve,Ae){void 0===Ae&&(Ae={}),this._checkLoaded();var Re=Q.id;if(this.getLayer(Re))this.fire(new e.ErrorEvent(new Error('Layer with id "'+Re+'" already exists on this map')));else{var Ye;if("custom"===Q.type){if(sa(this,e.validateCustomStyleLayer(Q)))return;Ye=e.createStyleLayer(Q)}else{if("object"==typeof Q.source&&(this.addSource(Re,Q.source),Q=e.clone$1(Q),Q=e.extend(Q,{source:Re})),this._validate(e.validateStyle.layer,"layers."+Re,Q,{arrayIndex:-1},Ae))return;Ye=e.createStyleLayer(Q),this._validateLayer(Ye),Ye.setEventedParent(this,{layer:{id:Re}}),this._serializedLayers[Ye.id]=Ye.serialize()}var ut=ve?this._order.indexOf(ve):this._order.length;if(ve&&-1===ut)this.fire(new e.ErrorEvent(new Error('Layer with id "'+ve+'" does not exist on this map.')));else{if(this._order.splice(ut,0,Re),this._layerOrderChanged=!0,this._layers[Re]=Ye,this._removedLayers[Re]&&Ye.source&&"custom"!==Ye.type){var Mt=this._removedLayers[Re];delete this._removedLayers[Re],Mt.type!==Ye.type?this._updatedSources[Ye.source]="clear":(this._updatedSources[Ye.source]="reload",this.sourceCaches[Ye.source].pause())}this._updateLayer(Ye),Ye.onAdd&&Ye.onAdd(this.map)}}},Z.prototype.moveLayer=function(Q,ve){if(this._checkLoaded(),this._changed=!0,this._layers[Q]){if(Q!==ve){var Re=this._order.indexOf(Q);this._order.splice(Re,1);var Ye=ve?this._order.indexOf(ve):this._order.length;if(ve&&-1===Ye)return void this.fire(new e.ErrorEvent(new Error('Layer with id "'+ve+'" does not exist on this map.')));this._order.splice(Ye,0,Q),this._layerOrderChanged=!0}}else this.fire(new e.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be moved.")))},Z.prototype.removeLayer=function(Q){this._checkLoaded();var ve=this._layers[Q];if(ve){ve.setEventedParent(null);var Ae=this._order.indexOf(Q);this._order.splice(Ae,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[Q]=ve,delete this._layers[Q],delete this._serializedLayers[Q],delete this._updatedLayers[Q],delete this._updatedPaintProps[Q],ve.onRemove&&ve.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be removed.")))},Z.prototype.getLayer=function(Q){return this._layers[Q]},Z.prototype.hasLayer=function(Q){return Q in this._layers},Z.prototype.setLayerZoomRange=function(Q,ve,Ae){this._checkLoaded();var Re=this.getLayer(Q);Re?Re.minzoom===ve&&Re.maxzoom===Ae||(null!=ve&&(Re.minzoom=ve),null!=Ae&&(Re.maxzoom=Ae),this._updateLayer(Re)):this.fire(new e.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot have zoom extent.")))},Z.prototype.setFilter=function(Q,ve,Ae){void 0===Ae&&(Ae={}),this._checkLoaded();var Re=this.getLayer(Q);if(Re){if(!e.deepEqual(Re.filter,ve)){if(null==ve)return Re.filter=void 0,void this._updateLayer(Re);this._validate(e.validateStyle.filter,"layers."+Re.id+".filter",ve,null,Ae)||(Re.filter=e.clone$1(ve),this._updateLayer(Re))}}else this.fire(new e.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be filtered.")))},Z.prototype.getFilter=function(Q){return e.clone$1(this.getLayer(Q).filter)},Z.prototype.setLayoutProperty=function(Q,ve,Ae,Re){void 0===Re&&(Re={}),this._checkLoaded();var Ye=this.getLayer(Q);Ye?e.deepEqual(Ye.getLayoutProperty(ve),Ae)||(Ye.setLayoutProperty(ve,Ae,Re),this._updateLayer(Ye)):this.fire(new e.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be styled.")))},Z.prototype.getLayoutProperty=function(Q,ve){var Ae=this.getLayer(Q);if(Ae)return Ae.getLayoutProperty(ve);this.fire(new e.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style.")))},Z.prototype.setPaintProperty=function(Q,ve,Ae,Re){void 0===Re&&(Re={}),this._checkLoaded();var Ye=this.getLayer(Q);Ye?e.deepEqual(Ye.getPaintProperty(ve),Ae)||(Ye.setPaintProperty(ve,Ae,Re)&&this._updateLayer(Ye),this._changed=!0,this._updatedPaintProps[Q]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be styled.")))},Z.prototype.getPaintProperty=function(Q,ve){return this.getLayer(Q).getPaintProperty(ve)},Z.prototype.setFeatureState=function(Q,ve){this._checkLoaded();var Ae=Q.source,Re=Q.sourceLayer,Ye=this.sourceCaches[Ae];if(void 0!==Ye){var ut=Ye.getSource().type;"geojson"===ut&&Re?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==ut||Re?(void 0===Q.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),Ye.setFeatureState(Re,Q.id,ve)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+Ae+"' does not exist in the map's style.")))},Z.prototype.removeFeatureState=function(Q,ve){this._checkLoaded();var Ae=Q.source,Re=this.sourceCaches[Ae];if(void 0!==Re){var Ye=Re.getSource().type,ut="vector"===Ye?Q.sourceLayer:void 0;"vector"!==Ye||ut?ve&&"string"!=typeof Q.id&&"number"!=typeof Q.id?this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):Re.removeFeatureState(ut,Q.id,ve):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+Ae+"' does not exist in the map's style.")))},Z.prototype.getFeatureState=function(Q){this._checkLoaded();var ve=Q.source,Ae=Q.sourceLayer,Re=this.sourceCaches[ve];if(void 0!==Re){if("vector"!==Re.getSource().type||Ae)return void 0===Q.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),Re.getFeatureState(Ae,Q.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+ve+"' does not exist in the map's style.")))},Z.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},Z.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(Q){return Q.serialize()}),layers:this._serializeLayers(this._order)},function(Q){return void 0!==Q})},Z.prototype._updateLayer=function(Q){this._updatedLayers[Q.id]=!0,Q.source&&!this._updatedSources[Q.source]&&"raster"!==this.sourceCaches[Q.source].getSource().type&&(this._updatedSources[Q.source]="reload",this.sourceCaches[Q.source].pause()),this._changed=!0},Z.prototype._flattenAndSortRenderedFeatures=function(Q){for(var ve=this,Ae=function(Wa){return"fill-extrusion"===ve._layers[Wa].type},Re={},Ye=[],ut=this._order.length-1;ut>=0;ut--){var Mt=this._order[ut];if(Ae(Mt)){Re[Mt]=ut;for(var jt=0,ur=Q;jt<ur.length;jt+=1){var Pr=ur[jt][Mt];if(Pr)for(var Gr=0,Yr=Pr;Gr<Yr.length;Gr+=1)Ye.push(Yr[Gr])}}}Ye.sort(function(Wa,ii){return ii.intersectionZ-Wa.intersectionZ});for(var tn=[],pn=this._order.length-1;pn>=0;pn--){var Cn=this._order[pn];if(Ae(Cn))for(var Nn=Ye.length-1;Nn>=0;Nn--){var Kn=Ye[Nn].feature;if(Re[Kn.layer.id]<pn)break;tn.push(Kn),Ye.pop()}else for(var qn=0,Qn=Q;qn<Qn.length;qn+=1){var ya=Qn[qn][Cn];if(ya)for(var ga=0,Ta=ya;ga<Ta.length;ga+=1)tn.push(Ta[ga].feature)}}return tn},Z.prototype.queryRenderedFeatures=function(Q,ve,Ae){ve&&ve.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",ve.filter,null,ve);var Re={};if(ve&&ve.layers){if(!Array.isArray(ve.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Ye=0,ut=ve.layers;Ye<ut.length;Ye+=1){var Mt=ut[Ye],jt=this._layers[Mt];if(!jt)return this.fire(new e.ErrorEvent(new Error("The layer '"+Mt+"' does not exist in the map's style and cannot be queried for features."))),[];Re[jt.source]=!0}}var ur=[];for(var gr in ve.availableImages=this._availableImages,this.sourceCaches)ve.layers&&!Re[gr]||ur.push(J(this.sourceCaches[gr],this._layers,this._serializedLayers,Q,ve,Ae));return this.placement&&ur.push(function j(ce,Z,he,Q,ve,Ae,Re){for(var Ye={},ut=Ae.queryRenderedSymbols(Q),Mt=[],jt=0,ur=Object.keys(ut).map(Number);jt<ur.length;jt+=1)Mt.push(Re[ur[jt]]);Mt.sort(le);for(var Pr=function(){var pn=Yr[Gr],Cn=pn.featureIndex.lookupSymbolFeatures(ut[pn.bucketInstanceId],Z,pn.bucketIndex,pn.sourceLayerIndex,ve.filter,ve.layers,ve.availableImages,ce);for(var Nn in Cn){var Kn=Ye[Nn]=Ye[Nn]||[],qn=Cn[Nn];qn.sort(function(ga,Ta){var La=pn.featureSortOrder;if(La){var Wa=La.indexOf(ga.featureIndex);return La.indexOf(Ta.featureIndex)-Wa}return Ta.featureIndex-ga.featureIndex});for(var Qn=0,ua=qn;Qn<ua.length;Qn+=1)Kn.push(ua[Qn])}},Gr=0,Yr=Mt;Gr<Yr.length;Gr+=1)Pr();var Ur=function(pn){Ye[pn].forEach(function(Cn){var Nn=Cn.feature,Qn=he[ce[pn].source].getFeatureState(Nn.layer["source-layer"],Nn.id);Nn.source=Nn.layer.source,Nn.layer["source-layer"]&&(Nn.sourceLayer=Nn.layer["source-layer"]),Nn.state=Qn})};for(var tn in Ye)Ur(tn);return Ye}(this._layers,this._serializedLayers,this.sourceCaches,Q,ve,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ur)},Z.prototype.querySourceFeatures=function(Q,ve){ve&&ve.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",ve.filter,null,ve);var Ae=this.sourceCaches[Q];return Ae?function re(ce,Z){for(var he=ce.getRenderableIds().map(function(ut){return ce.getTileByID(ut)}),Q=[],ve={},Ae=0;Ae<he.length;Ae++){var Re=he[Ae],Ye=Re.tileID.canonical.key;ve[Ye]||(ve[Ye]=!0,Re.querySourceFeatures(Q,Z))}return Q}(Ae,ve):[]},Z.prototype.addSourceType=function(Q,ve,Ae){return Z.getSourceType(Q)?Ae(new Error('A source type called "'+Q+'" already exists.')):(Z.setSourceType(Q,ve),ve.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:Q,url:ve.workerSourceURL},Ae):Ae(null,null))},Z.prototype.getLight=function(){return this.light.getLight()},Z.prototype.setLight=function(Q,ve){void 0===ve&&(ve={}),this._checkLoaded();var Ae=this.light.getLight(),Re=!1;for(var Ye in Q)if(!e.deepEqual(Q[Ye],Ae[Ye])){Re=!0;break}if(Re){var ut={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(Q,ve),this.light.updateTransitions(ut)}},Z.prototype._validate=function(Q,ve,Ae,Re,Ye){return void 0===Ye&&(Ye={}),(!Ye||!1!==Ye.validate)&&sa(this,Q.call(e.validateStyle,e.extend({key:ve,style:this.serialize(),value:Ae,styleSpec:e.styleSpec},Re)))},Z.prototype._remove=function(){for(var Q in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[Q].setEventedParent(null);for(var Ae in this.sourceCaches)this.sourceCaches[Ae].clearTiles(),this.sourceCaches[Ae].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},Z.prototype._clearSource=function(Q){this.sourceCaches[Q].clearTiles()},Z.prototype._reloadSource=function(Q){this.sourceCaches[Q].resume(),this.sourceCaches[Q].reload()},Z.prototype._updateSources=function(Q){for(var ve in this.sourceCaches)this.sourceCaches[ve].update(Q)},Z.prototype._generateCollisionBoxes=function(){for(var Q in this.sourceCaches)this._reloadSource(Q)},Z.prototype._updatePlacement=function(Q,ve,Ae,Re,Ye){void 0===Ye&&(Ye=!1);for(var ut=!1,Mt=!1,jt={},ur=0,gr=this._order;ur<gr.length;ur+=1){var Gr=this._layers[gr[ur]];if("symbol"===Gr.type){if(!jt[Gr.source]){var Yr=this.sourceCaches[Gr.source];jt[Gr.source]=Yr.getRenderableIds(!0).map(function(qn){return Yr.getTileByID(qn)}).sort(function(qn,Qn){return Qn.tileID.overscaledZ-qn.tileID.overscaledZ||(qn.tileID.isLessThan(Qn.tileID)?-1:1)})}var Ur=this.crossTileSymbolIndex.addLayer(Gr,jt[Gr.source],Q.center.lng);ut=ut||Ur}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((Ye=Ye||this._layerOrderChanged||0===Ae)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),Q.zoom))&&(this.pauseablePlacement=new Jn(Q,this._order,Ye,ve,Ae,Re,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,jt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Mt=!0),ut&&this.pauseablePlacement.placement.setStale()),Mt||ut)for(var tn=0,pn=this._order;tn<pn.length;tn+=1){var Nn=this._layers[pn[tn]];"symbol"===Nn.type&&this.placement.updateLayerOpacities(Nn,jt[Nn.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},Z.prototype._releaseSymbolFadeTiles=function(){for(var Q in this.sourceCaches)this.sourceCaches[Q].releaseSymbolFadeTiles()},Z.prototype.getImages=function(Q,ve,Ae){this.imageManager.getImages(ve.icons,Ae),this._updateTilesForChangedImages();var Re=this.sourceCaches[ve.source];Re&&Re.setDependencies(ve.tileID.key,ve.type,ve.icons)},Z.prototype.getGlyphs=function(Q,ve,Ae){this.glyphManager.getGlyphs(ve.stacks,Ae)},Z.prototype.getResource=function(Q,ve,Ae){return e.makeRequest(ve,Ae)},Z}(e.Evented);Io.getSourceType=function(ce){return V[ce]},Io.setSourceType=function(ce,Z){V[ce]=Z},Io.registerForPluginStateChange=e.registerForPluginStateChange;var cs=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),ns=Ui("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Co=Ui("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Bl=Ui("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Ls=Ui("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Ts=Ui("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),co=Ui("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),sl=Ui("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Du=Ui("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),ru=Ui("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Ru=Ui("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),As=Ui("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),hs=Ui("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Zo=Ui("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),kl=Ui("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),ll=Ui("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),Iu=Ui("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),as=Ui("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),zu=Ui("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),nu=Ui("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ul=Ui("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),au=Ui("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Cl=Ui("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),El=Ui("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Ul=Ui("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),Vl=Ui("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),Xu=Ui("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function Ui(ce,Z){var he=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,Q={};return{fragmentSource:ce=ce.replace(he,function(ve,Ae,Re,Ye,ut){return Q[ut]=!0,"define"===Ae?"\n#ifndef HAS_UNIFORM_u_"+ut+"\nvarying "+Re+" "+Ye+" "+ut+";\n#else\nuniform "+Re+" "+Ye+" u_"+ut+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+ut+"\n    "+Re+" "+Ye+" "+ut+" = u_"+ut+";\n#endif\n"}),vertexSource:Z=Z.replace(he,function(ve,Ae,Re,Ye,ut){var Mt="float"===Ye?"vec2":"vec4",jt=ut.match(/color/)?"color":Mt;return Q[ut]?"define"===Ae?"\n#ifndef HAS_UNIFORM_u_"+ut+"\nuniform lowp float u_"+ut+"_t;\nattribute "+Re+" "+Mt+" a_"+ut+";\nvarying "+Re+" "+Ye+" "+ut+";\n#else\nuniform "+Re+" "+Ye+" u_"+ut+";\n#endif\n":"vec4"===jt?"\n#ifndef HAS_UNIFORM_u_"+ut+"\n    "+ut+" = a_"+ut+";\n#else\n    "+Re+" "+Ye+" "+ut+" = u_"+ut+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+ut+"\n    "+ut+" = unpack_mix_"+jt+"(a_"+ut+", u_"+ut+"_t);\n#else\n    "+Re+" "+Ye+" "+ut+" = u_"+ut+";\n#endif\n":"define"===Ae?"\n#ifndef HAS_UNIFORM_u_"+ut+"\nuniform lowp float u_"+ut+"_t;\nattribute "+Re+" "+Mt+" a_"+ut+";\n#else\nuniform "+Re+" "+Ye+" u_"+ut+";\n#endif\n":"vec4"===jt?"\n#ifndef HAS_UNIFORM_u_"+ut+"\n    "+Re+" "+Ye+" "+ut+" = a_"+ut+";\n#else\n    "+Re+" "+Ye+" "+ut+" = u_"+ut+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+ut+"\n    "+Re+" "+Ye+" "+ut+" = unpack_mix_"+jt+"(a_"+ut+", u_"+ut+"_t);\n#else\n    "+Re+" "+Ye+" "+ut+" = u_"+ut+";\n#endif\n"})}}var cl=Object.freeze({__proto__:null,prelude:ns,background:Co,backgroundPattern:Bl,circle:Ls,clippingMask:Ts,heatmap:co,heatmapTexture:sl,collisionBox:Du,collisionCircle:ru,debug:Ru,fill:As,fillOutline:hs,fillOutlinePattern:Zo,fillPattern:kl,fillExtrusion:ll,fillExtrusionPattern:Iu,hillshadePrepare:as,hillshade:zu,line:nu,lineGradient:ul,linePattern:au,lineSDF:Cl,raster:El,symbolIcon:Ul,symbolSDF:Vl,symbolTextAndIcon:Xu}),js=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};js.prototype.bind=function(Z,he,Q,ve,Ae,Re,Ye,ut){this.context=Z;for(var Mt=this.boundPaintVertexBuffers.length!==ve.length,jt=0;!Mt&&jt<ve.length;jt++)this.boundPaintVertexBuffers[jt]!==ve[jt]&&(Mt=!0);Z.extVertexArrayObject&&this.vao&&this.boundProgram===he&&this.boundLayoutVertexBuffer===Q&&!Mt&&this.boundIndexBuffer===Ae&&this.boundVertexOffset===Re&&this.boundDynamicVertexBuffer===Ye&&this.boundDynamicVertexBuffer2===ut?(Z.bindVertexArrayOES.set(this.vao),Ye&&Ye.bind(),Ae&&Ae.dynamicDraw&&Ae.bind(),ut&&ut.bind()):this.freshBind(he,Q,ve,Ae,Re,Ye,ut)},js.prototype.freshBind=function(Z,he,Q,ve,Ae,Re,Ye){var ut,Mt=Z.numAttributes,jt=this.context,ur=jt.gl;if(jt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=jt.extVertexArrayObject.createVertexArrayOES(),jt.bindVertexArrayOES.set(this.vao),ut=0,this.boundProgram=Z,this.boundLayoutVertexBuffer=he,this.boundPaintVertexBuffers=Q,this.boundIndexBuffer=ve,this.boundVertexOffset=Ae,this.boundDynamicVertexBuffer=Re,this.boundDynamicVertexBuffer2=Ye;else{ut=jt.currentNumAttributes||0;for(var gr=Mt;gr<ut;gr++)ur.disableVertexAttribArray(gr)}he.enableAttributes(ur,Z);for(var Pr=0,Gr=Q;Pr<Gr.length;Pr+=1)Gr[Pr].enableAttributes(ur,Z);Re&&Re.enableAttributes(ur,Z),Ye&&Ye.enableAttributes(ur,Z),he.bind(),he.setVertexAttribPointers(ur,Z,Ae);for(var Ur=0,tn=Q;Ur<tn.length;Ur+=1){var pn=tn[Ur];pn.bind(),pn.setVertexAttribPointers(ur,Z,Ae)}Re&&(Re.bind(),Re.setVertexAttribPointers(ur,Z,Ae)),ve&&ve.bind(),Ye&&(Ye.bind(),Ye.setVertexAttribPointers(ur,Z,Ae)),jt.currentNumAttributes=Mt},js.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var is=function(Z,he,Q,ve,Ae){var Re=Z.gl;this.program=Re.createProgram();var Ye=Q?Q.defines():[];Ae&&Ye.push("#define OVERDRAW_INSPECTOR;");var ut=Ye.concat(ns.fragmentSource,he.fragmentSource).join("\n"),Mt=Ye.concat(ns.vertexSource,he.vertexSource).join("\n"),jt=Re.createShader(Re.FRAGMENT_SHADER);if(Re.isContextLost())this.failedToCreate=!0;else{Re.shaderSource(jt,ut),Re.compileShader(jt),Re.attachShader(this.program,jt);var ur=Re.createShader(Re.VERTEX_SHADER);if(Re.isContextLost())this.failedToCreate=!0;else{Re.shaderSource(ur,Mt),Re.compileShader(ur),Re.attachShader(this.program,ur);for(var gr=Q?Q.layoutAttributes:[],Pr=0;Pr<gr.length;Pr++)Re.bindAttribLocation(this.program,Pr,gr[Pr].name);Re.linkProgram(this.program),Re.deleteShader(ur),Re.deleteShader(jt),this.numAttributes=Re.getProgramParameter(this.program,Re.ACTIVE_ATTRIBUTES),this.attributes={};for(var Gr={},Yr=0;Yr<this.numAttributes;Yr++){var Ur=Re.getActiveAttrib(this.program,Yr);Ur&&(this.attributes[Ur.name]=Re.getAttribLocation(this.program,Ur.name))}for(var tn=Re.getProgramParameter(this.program,Re.ACTIVE_UNIFORMS),pn=0;pn<tn;pn++){var Cn=Re.getActiveUniform(this.program,pn);Cn&&(Gr[Cn.name]=Re.getUniformLocation(this.program,Cn.name))}this.fixedUniforms=ve(Z,Gr),this.binderUniforms=Q?Q.getUniforms(Z,Gr):[]}}};function vs(ce,Z,he){var Q=1/kn(he,1,Z.transform.tileZoom),ve=Math.pow(2,he.tileID.overscaledZ),Ae=he.tileSize*Math.pow(2,Z.transform.tileZoom)/ve,Re=Ae*(he.tileID.canonical.x+he.tileID.wrap*ve),Ye=Ae*he.tileID.canonical.y;return{u_image:0,u_texsize:he.imageAtlasTexture.size,u_scale:[Q,ce.fromScale,ce.toScale],u_fade:ce.t,u_pixel_coord_upper:[Re>>16,Ye>>16],u_pixel_coord_lower:[65535&Re,65535&Ye]}}is.prototype.draw=function(Z,he,Q,ve,Ae,Re,Ye,ut,Mt,jt,ur,gr,Pr,Gr,Yr,Ur){var tn,pn=Z.gl;if(!this.failedToCreate){for(var Cn in Z.program.set(this.program),Z.setDepthMode(Q),Z.setStencilMode(ve),Z.setColorMode(Ae),Z.setCullFace(Re),this.fixedUniforms)this.fixedUniforms[Cn].set(Ye[Cn]);Gr&&Gr.setUniforms(Z,this.binderUniforms,gr,{zoom:Pr});for(var Nn=(tn={},tn[pn.LINES]=2,tn[pn.TRIANGLES]=3,tn[pn.LINE_STRIP]=1,tn)[he],Kn=0,qn=ur.get();Kn<qn.length;Kn+=1){var Qn=qn[Kn],ua=Qn.vaos||(Qn.vaos={});(ua[ut]||(ua[ut]=new js)).bind(Z,this,Mt,Gr?Gr.getPaintVertexBuffers():[],jt,Qn.vertexOffset,Yr,Ur),pn.drawElements(he,Qn.primitiveLength*Nn,pn.UNSIGNED_SHORT,Qn.primitiveOffset*Nn*2)}}};var $o=function(ce,Z,he,Q){var ve=Z.style.light,Ae=ve.properties.get("position"),Re=[Ae.x,Ae.y,Ae.z],Ye=e.create$1();"viewport"===ve.properties.get("anchor")&&e.fromRotation(Ye,-Z.transform.angle),e.transformMat3(Re,Re,Ye);var ut=ve.properties.get("color");return{u_matrix:ce,u_lightpos:Re,u_lightintensity:ve.properties.get("intensity"),u_lightcolor:[ut.r,ut.g,ut.b],u_vertical_gradient:+he,u_opacity:Q}},Ps=function(ce,Z,he,Q,ve,Ae,Re){return e.extend($o(ce,Z,he,Q),vs(Ae,Z,Re),{u_height_factor:-Math.pow(2,ve.overscaledZ)/Re.tileSize/8})},bo=function(ce){return{u_matrix:ce}},Yo=function(ce,Z,he,Q){return e.extend(bo(ce),vs(he,Z,Q))},Gl=function(ce,Z){return{u_matrix:ce,u_world:Z}},Zl=function(ce,Z,he,Q,ve){return e.extend(Yo(ce,Z,he,Q),{u_world:ve})},mt=function(ce,Z,he,Q){var Ae,Re,ve=ce.transform;if("map"===Q.paint.get("circle-pitch-alignment")){var Ye=kn(he,1,ve.zoom);Ae=!0,Re=[Ye,Ye]}else Ae=!1,Re=ve.pixelsToGLUnits;return{u_camera_to_center_distance:ve.cameraToCenterDistance,u_scale_with_map:+("map"===Q.paint.get("circle-pitch-scale")),u_matrix:ce.translatePosMatrix(Z.posMatrix,he,Q.paint.get("circle-translate"),Q.paint.get("circle-translate-anchor")),u_pitch_with_map:+Ae,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:Re}},sr=function(ce,Z,he){var Q=kn(he,1,Z.zoom),ve=Math.pow(2,Z.zoom-he.tileID.overscaledZ),Ae=he.tileID.overscaleFactor();return{u_matrix:ce,u_camera_to_center_distance:Z.cameraToCenterDistance,u_pixels_to_tile_units:Q,u_extrude_scale:[Z.pixelsToGLUnits[0]/(Q*ve),Z.pixelsToGLUnits[1]/(Q*ve)],u_overscale_factor:Ae}},zr=function(ce,Z,he){return{u_matrix:ce,u_inv_matrix:Z,u_camera_to_center_distance:he.cameraToCenterDistance,u_viewport_size:[he.width,he.height]}},yn=function(ce,Z,he){return void 0===he&&(he=1),{u_matrix:ce,u_color:Z,u_overlay:0,u_overlay_scale:he}},En=function(ce){return{u_matrix:ce}},zn=function(ce,Z,he,Q){return{u_matrix:ce,u_extrude_scale:kn(Z,1,he),u_intensity:Q}};function Fa(ce,Z){var he=Math.pow(2,Z.canonical.z),Q=Z.canonical.y;return[new e.MercatorCoordinate(0,Q/he).toLngLat().lat,new e.MercatorCoordinate(0,(Q+1)/he).toLngLat().lat]}var qa=function(ce,Z,he){var Q=ce.transform;return{u_matrix:ci(ce,Z,he),u_ratio:1/kn(Z,1,Q.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/Q.pixelsToGLUnits[0],1/Q.pixelsToGLUnits[1]]}},_i=function(ce,Z,he){return e.extend(qa(ce,Z,he),{u_image:0})},yi=function(ce,Z,he,Q){var ve=ce.transform,Ae=Pi(Z,ve);return{u_matrix:ci(ce,Z,he),u_texsize:Z.imageAtlasTexture.size,u_ratio:1/kn(Z,1,ve.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[Ae,Q.fromScale,Q.toScale],u_fade:Q.t,u_units_to_pixels:[1/ve.pixelsToGLUnits[0],1/ve.pixelsToGLUnits[1]]}},mi=function(ce,Z,he,Q,ve){var Re=ce.lineAtlas,Ye=Pi(Z,ce.transform),ut="round"===he.layout.get("line-cap"),Mt=Re.getDash(Q.from,ut),jt=Re.getDash(Q.to,ut),ur=Mt.width*ve.fromScale,gr=jt.width*ve.toScale;return e.extend(qa(ce,Z,he),{u_patternscale_a:[Ye/ur,-Mt.height/2],u_patternscale_b:[Ye/gr,-jt.height/2],u_sdfgamma:Re.width/(256*Math.min(ur,gr)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Mt.y,u_tex_y_b:jt.y,u_mix:ve.t})};function Pi(ce,Z){return 1/kn(ce,1,Z.tileZoom)}function ci(ce,Z,he){return ce.translatePosMatrix(Z.tileID.posMatrix,Z,he.paint.get("line-translate"),he.paint.get("line-translate-anchor"))}var io=function(ce,Z,he,Q,ve){return{u_matrix:ce,u_tl_parent:Z,u_scale_parent:he,u_buffer_scale:1,u_fade_t:Q.mix,u_opacity:Q.opacity*ve.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ve.paint.get("raster-brightness-min"),u_brightness_high:ve.paint.get("raster-brightness-max"),u_saturation_factor:wi(ve.paint.get("raster-saturation")),u_contrast_factor:fa(ve.paint.get("raster-contrast")),u_spin_weights:ti(ve.paint.get("raster-hue-rotate"))}};function ti(ce){ce*=Math.PI/180;var Z=Math.sin(ce),he=Math.cos(ce);return[(2*he+1)/3,(-Math.sqrt(3)*Z-he+1)/3,(Math.sqrt(3)*Z-he+1)/3]}function fa(ce){return ce>0?1/(1-ce):1+ce}function wi(ce){return ce>0?1-1/(1.001-ce):-ce}var ys,Ms=function(ce,Z,he,Q,ve,Ae,Re,Ye,ut,Mt){var jt=ve.transform;return{u_is_size_zoom_constant:+("constant"===ce||"source"===ce),u_is_size_feature_constant:+("constant"===ce||"camera"===ce),u_size_t:Z?Z.uSizeT:0,u_size:Z?Z.uSize:0,u_camera_to_center_distance:jt.cameraToCenterDistance,u_pitch:jt.pitch/360*2*Math.PI,u_rotate_symbol:+he,u_aspect_ratio:jt.width/jt.height,u_fade_change:ve.options.fadeDuration?ve.symbolFadeChange:1,u_matrix:Ae,u_label_plane_matrix:Re,u_coord_matrix:Ye,u_is_text:+ut,u_pitch_with_map:+Q,u_texsize:Mt,u_texture:0}},ss=function(ce,Z,he,Q,ve,Ae,Re,Ye,ut,Mt,jt){var ur=ve.transform;return e.extend(Ms(ce,Z,he,Q,ve,Ae,Re,Ye,ut,Mt),{u_gamma_scale:Q?Math.cos(ur._pitch)*ur.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+jt})},fl=function(ce,Z,he,Q,ve,Ae,Re,Ye,ut,Mt){return e.extend(ss(ce,Z,he,Q,ve,Ae,Re,Ye,!0,ut,!0),{u_texsize_icon:Mt,u_texture_icon:1})},Rs=function(ce,Z,he){return{u_matrix:ce,u_opacity:Z,u_color:he}},hl=function(ce,Z,he,Q,ve,Ae){return e.extend(function Hl(ce,Z,he,Q){var ve=he.imageManager.getPattern(ce.from.toString()),Ae=he.imageManager.getPattern(ce.to.toString()),Re=he.imageManager.getPixelSize(),Ye=Re.width,ut=Re.height,Mt=Math.pow(2,Q.tileID.overscaledZ),jt=Q.tileSize*Math.pow(2,he.transform.tileZoom)/Mt,ur=jt*(Q.tileID.canonical.x+Q.tileID.wrap*Mt),gr=jt*Q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ve.tl,u_pattern_br_a:ve.br,u_pattern_tl_b:Ae.tl,u_pattern_br_b:Ae.br,u_texsize:[Ye,ut],u_mix:Z.t,u_pattern_size_a:ve.displaySize,u_pattern_size_b:Ae.displaySize,u_scale_a:Z.fromScale,u_scale_b:Z.toScale,u_tile_units_to_pixels:1/kn(Q,1,he.transform.tileZoom),u_pixel_coord_upper:[ur>>16,gr>>16],u_pixel_coord_lower:[65535&ur,65535&gr]}}(Q,Ae,he,ve),{u_matrix:ce,u_opacity:Z})},vl={fillExtrusion:function(ce,Z){return{u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix),u_lightpos:new e.Uniform3f(ce,Z.u_lightpos),u_lightintensity:new e.Uniform1f(ce,Z.u_lightintensity),u_lightcolor:new e.Uniform3f(ce,Z.u_lightcolor),u_vertical_gradient:new e.Uniform1f(ce,Z.u_vertical_gradient),u_opacity:new e.Uniform1f(ce,Z.u_opacity)}},fillExtrusionPattern:function(ce,Z){return{u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix),u_lightpos:new e.Uniform3f(ce,Z.u_lightpos),u_lightintensity:new e.Uniform1f(ce,Z.u_lightintensity),u_lightcolor:new e.Uniform3f(ce,Z.u_lightcolor),u_vertical_gradient:new e.Uniform1f(ce,Z.u_vertical_gradient),u_height_factor:new e.Uniform1f(ce,Z.u_height_factor),u_image:new e.Uniform1i(ce,Z.u_image),u_texsize:new e.Uniform2f(ce,Z.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ce,Z.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ce,Z.u_pixel_coord_lower),u_scale:new e.Uniform3f(ce,Z.u_scale),u_fade:new e.Uniform1f(ce,Z.u_fade),u_opacity:new e.Uniform1f(ce,Z.u_opacity)}},fill:function(ce,Z){return{u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix)}},fillPattern:function(ce,Z){return{u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix),u_image:new e.Uniform1i(ce,Z.u_image),u_texsize:new e.Uniform2f(ce,Z.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ce,Z.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ce,Z.u_pixel_coord_lower),u_scale:new e.Uniform3f(ce,Z.u_scale),u_fade:new e.Uniform1f(ce,Z.u_fade)}},fillOutline:function(ce,Z){return{u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix),u_world:new e.Uniform2f(ce,Z.u_world)}},fillOutlinePattern:function(ce,Z){return{u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix),u_world:new e.Uniform2f(ce,Z.u_world),u_image:new e.Uniform1i(ce,Z.u_image),u_texsize:new e.Uniform2f(ce,Z.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ce,Z.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ce,Z.u_pixel_coord_lower),u_scale:new e.Uniform3f(ce,Z.u_scale),u_fade:new e.Uniform1f(ce,Z.u_fade)}},circle:function(ce,Z){return{u_camera_to_center_distance:new e.Uniform1f(ce,Z.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(ce,Z.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(ce,Z.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(ce,Z.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(ce,Z.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix)}},collisionBox:function(ce,Z){return{u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix),u_camera_to_center_distance:new e.Uniform1f(ce,Z.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(ce,Z.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(ce,Z.u_extrude_scale),u_overscale_factor:new e.Uniform1f(ce,Z.u_overscale_factor)}},collisionCircle:function(ce,Z){return{u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix),u_inv_matrix:new e.UniformMatrix4f(ce,Z.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(ce,Z.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(ce,Z.u_viewport_size)}},debug:function(ce,Z){return{u_color:new e.UniformColor(ce,Z.u_color),u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix),u_overlay:new e.Uniform1i(ce,Z.u_overlay),u_overlay_scale:new e.Uniform1f(ce,Z.u_overlay_scale)}},clippingMask:function(ce,Z){return{u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix)}},heatmap:function(ce,Z){return{u_extrude_scale:new e.Uniform1f(ce,Z.u_extrude_scale),u_intensity:new e.Uniform1f(ce,Z.u_intensity),u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix)}},heatmapTexture:function(ce,Z){return{u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix),u_world:new e.Uniform2f(ce,Z.u_world),u_image:new e.Uniform1i(ce,Z.u_image),u_color_ramp:new e.Uniform1i(ce,Z.u_color_ramp),u_opacity:new e.Uniform1f(ce,Z.u_opacity)}},hillshade:function(ce,Z){return{u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix),u_image:new e.Uniform1i(ce,Z.u_image),u_latrange:new e.Uniform2f(ce,Z.u_latrange),u_light:new e.Uniform2f(ce,Z.u_light),u_shadow:new e.UniformColor(ce,Z.u_shadow),u_highlight:new e.UniformColor(ce,Z.u_highlight),u_accent:new e.UniformColor(ce,Z.u_accent)}},hillshadePrepare:function(ce,Z){return{u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix),u_image:new e.Uniform1i(ce,Z.u_image),u_dimension:new e.Uniform2f(ce,Z.u_dimension),u_zoom:new e.Uniform1f(ce,Z.u_zoom),u_maxzoom:new e.Uniform1f(ce,Z.u_maxzoom),u_unpack:new e.Uniform4f(ce,Z.u_unpack)}},line:function(ce,Z){return{u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix),u_ratio:new e.Uniform1f(ce,Z.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ce,Z.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ce,Z.u_units_to_pixels)}},lineGradient:function(ce,Z){return{u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix),u_ratio:new e.Uniform1f(ce,Z.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ce,Z.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ce,Z.u_units_to_pixels),u_image:new e.Uniform1i(ce,Z.u_image)}},linePattern:function(ce,Z){return{u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix),u_texsize:new e.Uniform2f(ce,Z.u_texsize),u_ratio:new e.Uniform1f(ce,Z.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ce,Z.u_device_pixel_ratio),u_image:new e.Uniform1i(ce,Z.u_image),u_units_to_pixels:new e.Uniform2f(ce,Z.u_units_to_pixels),u_scale:new e.Uniform3f(ce,Z.u_scale),u_fade:new e.Uniform1f(ce,Z.u_fade)}},lineSDF:function(ce,Z){return{u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix),u_ratio:new e.Uniform1f(ce,Z.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ce,Z.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ce,Z.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(ce,Z.u_patternscale_a),u_patternscale_b:new e.Uniform2f(ce,Z.u_patternscale_b),u_sdfgamma:new e.Uniform1f(ce,Z.u_sdfgamma),u_image:new e.Uniform1i(ce,Z.u_image),u_tex_y_a:new e.Uniform1f(ce,Z.u_tex_y_a),u_tex_y_b:new e.Uniform1f(ce,Z.u_tex_y_b),u_mix:new e.Uniform1f(ce,Z.u_mix)}},raster:function(ce,Z){return{u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix),u_tl_parent:new e.Uniform2f(ce,Z.u_tl_parent),u_scale_parent:new e.Uniform1f(ce,Z.u_scale_parent),u_buffer_scale:new e.Uniform1f(ce,Z.u_buffer_scale),u_fade_t:new e.Uniform1f(ce,Z.u_fade_t),u_opacity:new e.Uniform1f(ce,Z.u_opacity),u_image0:new e.Uniform1i(ce,Z.u_image0),u_image1:new e.Uniform1i(ce,Z.u_image1),u_brightness_low:new e.Uniform1f(ce,Z.u_brightness_low),u_brightness_high:new e.Uniform1f(ce,Z.u_brightness_high),u_saturation_factor:new e.Uniform1f(ce,Z.u_saturation_factor),u_contrast_factor:new e.Uniform1f(ce,Z.u_contrast_factor),u_spin_weights:new e.Uniform3f(ce,Z.u_spin_weights)}},symbolIcon:function(ce,Z){return{u_is_size_zoom_constant:new e.Uniform1i(ce,Z.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ce,Z.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ce,Z.u_size_t),u_size:new e.Uniform1f(ce,Z.u_size),u_camera_to_center_distance:new e.Uniform1f(ce,Z.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ce,Z.u_pitch),u_rotate_symbol:new e.Uniform1i(ce,Z.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ce,Z.u_aspect_ratio),u_fade_change:new e.Uniform1f(ce,Z.u_fade_change),u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ce,Z.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ce,Z.u_coord_matrix),u_is_text:new e.Uniform1i(ce,Z.u_is_text),u_pitch_with_map:new e.Uniform1i(ce,Z.u_pitch_with_map),u_texsize:new e.Uniform2f(ce,Z.u_texsize),u_texture:new e.Uniform1i(ce,Z.u_texture)}},symbolSDF:function(ce,Z){return{u_is_size_zoom_constant:new e.Uniform1i(ce,Z.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ce,Z.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ce,Z.u_size_t),u_size:new e.Uniform1f(ce,Z.u_size),u_camera_to_center_distance:new e.Uniform1f(ce,Z.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ce,Z.u_pitch),u_rotate_symbol:new e.Uniform1i(ce,Z.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ce,Z.u_aspect_ratio),u_fade_change:new e.Uniform1f(ce,Z.u_fade_change),u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ce,Z.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ce,Z.u_coord_matrix),u_is_text:new e.Uniform1i(ce,Z.u_is_text),u_pitch_with_map:new e.Uniform1i(ce,Z.u_pitch_with_map),u_texsize:new e.Uniform2f(ce,Z.u_texsize),u_texture:new e.Uniform1i(ce,Z.u_texture),u_gamma_scale:new e.Uniform1f(ce,Z.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(ce,Z.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(ce,Z.u_is_halo)}},symbolTextAndIcon:function(ce,Z){return{u_is_size_zoom_constant:new e.Uniform1i(ce,Z.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ce,Z.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ce,Z.u_size_t),u_size:new e.Uniform1f(ce,Z.u_size),u_camera_to_center_distance:new e.Uniform1f(ce,Z.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ce,Z.u_pitch),u_rotate_symbol:new e.Uniform1i(ce,Z.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ce,Z.u_aspect_ratio),u_fade_change:new e.Uniform1f(ce,Z.u_fade_change),u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ce,Z.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ce,Z.u_coord_matrix),u_is_text:new e.Uniform1i(ce,Z.u_is_text),u_pitch_with_map:new e.Uniform1i(ce,Z.u_pitch_with_map),u_texsize:new e.Uniform2f(ce,Z.u_texsize),u_texsize_icon:new e.Uniform2f(ce,Z.u_texsize_icon),u_texture:new e.Uniform1i(ce,Z.u_texture),u_texture_icon:new e.Uniform1i(ce,Z.u_texture_icon),u_gamma_scale:new e.Uniform1f(ce,Z.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(ce,Z.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(ce,Z.u_is_halo)}},background:function(ce,Z){return{u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix),u_opacity:new e.Uniform1f(ce,Z.u_opacity),u_color:new e.UniformColor(ce,Z.u_color)}},backgroundPattern:function(ce,Z){return{u_matrix:new e.UniformMatrix4f(ce,Z.u_matrix),u_opacity:new e.Uniform1f(ce,Z.u_opacity),u_image:new e.Uniform1i(ce,Z.u_image),u_pattern_tl_a:new e.Uniform2f(ce,Z.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(ce,Z.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(ce,Z.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(ce,Z.u_pattern_br_b),u_texsize:new e.Uniform2f(ce,Z.u_texsize),u_mix:new e.Uniform1f(ce,Z.u_mix),u_pattern_size_a:new e.Uniform2f(ce,Z.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(ce,Z.u_pattern_size_b),u_scale_a:new e.Uniform1f(ce,Z.u_scale_a),u_scale_b:new e.Uniform1f(ce,Z.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(ce,Z.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ce,Z.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(ce,Z.u_tile_units_to_pixels)}}};function Fu(ce,Z,he,Q,ve,Ae,Re){for(var Ye=ce.context,ut=Ye.gl,Mt=ce.useProgram("collisionBox"),jt=[],ur=0,gr=0,Pr=0;Pr<Q.length;Pr++){var Gr=Q[Pr],Yr=Z.getTile(Gr),Ur=Yr.getBucket(he);if(Ur){var tn=Gr.posMatrix;(0!==ve[0]||0!==ve[1])&&(tn=ce.translatePosMatrix(Gr.posMatrix,Yr,ve,Ae));var pn=Re?Ur.textCollisionBox:Ur.iconCollisionBox,Cn=Ur.collisionCircleArray;if(Cn.length>0){var Nn=e.create(),Kn=tn;e.mul(Nn,Ur.placementInvProjMatrix,ce.transform.glCoordMatrix),e.mul(Nn,Nn,Ur.placementViewportMatrix),jt.push({circleArray:Cn,circleOffset:gr,transform:Kn,invTransform:Nn}),gr=ur+=Cn.length/4}!pn||Mt.draw(Ye,ut.LINES,jr.disabled,qt.disabled,ce.colorModeForRenderPass(),Me.disabled,sr(tn,ce.transform,Yr),he.id,pn.layoutVertexBuffer,pn.indexBuffer,pn.segments,null,ce.transform.zoom,null,null,pn.collisionVertexBuffer)}}if(Re&&jt.length){var qn=ce.useProgram("collisionCircle"),Qn=new e.StructArrayLayout2f1f2i16;Qn.resize(4*ur),Qn._trim();for(var ua=0,ya=0,ga=jt;ya<ga.length;ya+=1)for(var Ta=ga[ya],La=0;La<Ta.circleArray.length/4;La++){var Wa=4*La,ii=Ta.circleArray[Wa+0],Ni=Ta.circleArray[Wa+1],fi=Ta.circleArray[Wa+2],bi=Ta.circleArray[Wa+3];Qn.emplace(ua++,ii,Ni,fi,bi,0),Qn.emplace(ua++,ii,Ni,fi,bi,1),Qn.emplace(ua++,ii,Ni,fi,bi,2),Qn.emplace(ua++,ii,Ni,fi,bi,3)}(!ys||ys.length<2*ur)&&(ys=function pl(ce){var Z=2*ce,he=new e.StructArrayLayout3ui6;he.resize(Z),he._trim();for(var Q=0;Q<Z;Q++){var ve=6*Q;he.uint16[ve+0]=4*Q+0,he.uint16[ve+1]=4*Q+1,he.uint16[ve+2]=4*Q+2,he.uint16[ve+3]=4*Q+2,he.uint16[ve+4]=4*Q+3,he.uint16[ve+5]=4*Q+0}return he}(ur));for(var Ua=Ye.createIndexBuffer(ys,!0),Bi=Ye.createVertexBuffer(Qn,e.collisionCircleLayout.members,!0),Hi=0,Zi=jt;Hi<Zi.length;Hi+=1){var Ci=Zi[Hi],Qi=zr(Ci.transform,Ci.invTransform,ce.transform);qn.draw(Ye,ut.TRIANGLES,jr.disabled,qt.disabled,ce.colorModeForRenderPass(),Me.disabled,Qi,he.id,Bi,Ua,e.SegmentVector.simpleSegment(0,2*Ci.circleOffset,Ci.circleArray.length,Ci.circleArray.length/2),null,ce.transform.zoom,null,null,null)}Bi.destroy(),Ua.destroy()}}var Is=e.identity(new Float32Array(16));function rc(ce,Z,he,Q,ve,Ae){var Re=e.getAnchorAlignment(ce),Mt=-(Re.horizontalAlign-.5)*Z,jt=-(Re.verticalAlign-.5)*he,ur=e.evaluateVariableOffset(ce,Q);return new e.Point((Mt/ve+ur[0])*Ae,(jt/ve+ur[1])*Ae)}function ms(ce,Z,he,Q,ve,Ae,Re,Ye,ut,Mt,jt){var ur=ce.text.placedSymbolArray,gr=ce.text.dynamicLayoutVertexArray,Pr=ce.icon.dynamicLayoutVertexArray,Gr={};gr.clear();for(var Yr=0;Yr<ur.length;Yr++){var Ur=ur.get(Yr),pn=Ur.hidden||!Ur.crossTileID||ce.allowVerticalPlacement&&!Ur.placedOrientation?null:Q[Ur.crossTileID];if(pn){var Cn=new e.Point(Ur.anchorX,Ur.anchorY),Nn=wn(Cn,he?Ye:Re),Kn=Zn(Ae.cameraToCenterDistance,Nn.signedDistanceFromCamera),qn=ve.evaluateSizeForFeature(ce.textSizeData,Mt,Ur)*Kn/e.ONE_EM;he&&(qn*=ce.tilePixelRatio/ut);for(var La=rc(pn.anchor,pn.width,pn.height,pn.textOffset,pn.textBoxScale,qn),Wa=he?wn(Cn.add(La),Re).point:Nn.point.add(Z?La.rotate(-Ae.angle):La),ii=ce.allowVerticalPlacement&&Ur.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,Ni=0;Ni<Ur.numGlyphs;Ni++)e.addDynamicAttributes(gr,Wa,ii);jt&&Ur.associatedIconIndex>=0&&(Gr[Ur.associatedIconIndex]={shiftedAnchor:Wa,angle:ii})}else ai(Ur.numGlyphs,gr)}if(jt){Pr.clear();for(var fi=ce.icon.placedSymbolArray,bi=0;bi<fi.length;bi++){var Ua=fi.get(bi);if(Ua.hidden)ai(Ua.numGlyphs,Pr);else{var Bi=Gr[bi];if(Bi)for(var Hi=0;Hi<Ua.numGlyphs;Hi++)e.addDynamicAttributes(Pr,Bi.shiftedAnchor,Bi.angle);else ai(Ua.numGlyphs,Pr)}}ce.icon.dynamicLayoutVertexBuffer.updateData(Pr)}ce.text.dynamicLayoutVertexBuffer.updateData(gr)}function ju(ce,Z,he){return he.iconsInText&&Z?"symbolTextAndIcon":ce?"symbolSDF":"symbolIcon"}function Nu(ce,Z,he,Q,ve,Ae,Re,Ye,ut,Mt,jt,ur){for(var gr=ce.context,Pr=gr.gl,Gr=ce.transform,Yr="map"===Ye,Ur="map"===ut,tn=Yr&&"point"!==he.layout.get("symbol-placement"),pn=Yr&&!Ur&&!tn,Cn=void 0!==he.layout.get("symbol-sort-key").constantOr(1),Nn=ce.depthModeForSublayer(0,jr.ReadOnly),Kn=he.layout.get("text-variable-anchor"),qn=[],Qn=0,ua=Q;Qn<ua.length;Qn+=1){var ya=ua[Qn],ga=Z.getTile(ya),Ta=ga.getBucket(he);if(Ta){var La=ve?Ta.text:Ta.icon;if(La&&La.segments.get().length){var Wa=La.programConfigurations.get(he.id),ii=ve||Ta.sdfIcons,Ni=ve?Ta.textSizeData:Ta.iconSizeData,fi=Ur||0!==Gr.pitch,bi=ce.useProgram(ju(ii,ve,Ta),Wa),Ua=e.evaluateSizeForZoom(Ni,Gr.zoom),Bi=void 0,Hi=[0,0],Zi=void 0,Ci=void 0,Qi=null,li=void 0;if(ve)Zi=ga.glyphAtlasTexture,Ci=Pr.LINEAR,Bi=ga.glyphAtlasTexture.size,Ta.iconsInText&&(Hi=ga.imageAtlasTexture.size,Qi=ga.imageAtlasTexture,li=fi||ce.options.rotating||ce.options.zooming||"composite"===Ni.kind||"camera"===Ni.kind?Pr.LINEAR:Pr.NEAREST);else{var wo=1!==he.layout.get("icon-size").constantOr(0)||Ta.iconsNeedLinear;Zi=ga.imageAtlasTexture,Ci=ii||ce.options.rotating||ce.options.zooming||wo||fi?Pr.LINEAR:Pr.NEAREST,Bi=ga.imageAtlasTexture.size}var zo=kn(ga,1,ce.transform.zoom),Pl=Zr(ya.posMatrix,Ur,Yr,ce.transform,zo),Dl=An(ya.posMatrix,Ur,Yr,ce.transform,zo),lu=Kn&&Ta.hasTextData(),uu="none"!==he.layout.get("icon-text-fit")&&lu&&Ta.hasIconData();tn&&Wn(Ta,ya.posMatrix,ce,ve,Pl,Dl,Ur,Mt);var Tu=ce.translatePosMatrix(ya.posMatrix,ga,Ae,Re),cu=tn||ve&&Kn||uu?Is:Pl,Ns=ce.translatePosMatrix(Dl,ga,Ae,Re,!0),Zu=ii&&0!==he.paint.get(ve?"text-halo-width":"icon-halo-width").constantOr(1),xl={program:bi,buffers:La,uniformValues:ii?Ta.iconsInText?fl(Ni.kind,Ua,pn,Ur,ce,Tu,cu,Ns,Bi,Hi):ss(Ni.kind,Ua,pn,Ur,ce,Tu,cu,Ns,ve,Bi,!0):Ms(Ni.kind,Ua,pn,Ur,ce,Tu,cu,Ns,ve,Bi),atlasTexture:Zi,atlasTextureIcon:Qi,atlasInterpolation:Ci,atlasInterpolationIcon:li,isSDF:ii,hasHalo:Zu};if(Cn)for(var Xl=0,hu=La.segments.get();Xl<hu.length;Xl+=1){var Ec=hu[Xl];qn.push({segments:new e.SegmentVector([Ec]),sortKey:Ec.sortKey,state:xl})}else qn.push({segments:La.segments,sortKey:0,state:xl})}}}Cn&&qn.sort(function(Lc,Pc){return Lc.sortKey-Pc.sortKey});for(var Qu=0,ls=qn;Qu<ls.length;Qu+=1){var xc=ls[Qu],Ss=xc.state;if(gr.activeTexture.set(Pr.TEXTURE0),Ss.atlasTexture.bind(Ss.atlasInterpolation,Pr.CLAMP_TO_EDGE),Ss.atlasTextureIcon&&(gr.activeTexture.set(Pr.TEXTURE1),Ss.atlasTextureIcon&&Ss.atlasTextureIcon.bind(Ss.atlasInterpolationIcon,Pr.CLAMP_TO_EDGE)),Ss.isSDF){var bc=Ss.uniformValues;Ss.hasHalo&&(bc.u_is_halo=1,Bu(Ss.buffers,xc.segments,he,ce,Ss.program,Nn,jt,ur,bc)),bc.u_is_halo=0}Bu(Ss.buffers,xc.segments,he,ce,Ss.program,Nn,jt,ur,Ss.uniformValues)}}function Bu(ce,Z,he,Q,ve,Ae,Re,Ye,ut){var Mt=Q.context;ve.draw(Mt,Mt.gl.TRIANGLES,Ae,Re,Ye,Me.disabled,ut,he.id,ce.layoutVertexBuffer,ce.indexBuffer,Z,he.paint,Q.transform.zoom,ce.programConfigurations.get(he.id),ce.dynamicLayoutVertexBuffer,ce.opacityVertexBuffer)}function ze(ce,Z,he,Q,ve,Ae,Re){var ur,gr,Pr,Gr,Yr,Ye=ce.context.gl,ut=he.paint.get("fill-pattern"),Mt=ut&&ut.constantOr(1),jt=he.getCrossfadeParameters();Re?(gr=Mt&&!he.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ur=Ye.LINES):(gr=Mt?"fillPattern":"fill",ur=Ye.TRIANGLES);for(var Ur=0,tn=Q;Ur<tn.length;Ur+=1){var pn=tn[Ur],Cn=Z.getTile(pn);if(!Mt||Cn.patternsLoaded()){var Nn=Cn.getBucket(he);if(Nn){var Kn=Nn.programConfigurations.get(he.id),qn=ce.useProgram(gr,Kn);Mt&&(ce.context.activeTexture.set(Ye.TEXTURE0),Cn.imageAtlasTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE),Kn.updatePaintBuffers(jt));var Qn=ut.constantOr(null);if(Qn&&Cn.imageAtlas){var ua=Cn.imageAtlas,ya=ua.patternPositions[Qn.to.toString()],ga=ua.patternPositions[Qn.from.toString()];ya&&ga&&Kn.setConstantPatternPositions(ya,ga)}var Ta=ce.translatePosMatrix(pn.posMatrix,Cn,he.paint.get("fill-translate"),he.paint.get("fill-translate-anchor"));if(Re){Gr=Nn.indexBuffer2,Yr=Nn.segments2;var La=[Ye.drawingBufferWidth,Ye.drawingBufferHeight];Pr="fillOutlinePattern"===gr&&Mt?Zl(Ta,ce,jt,Cn,La):Gl(Ta,La)}else Gr=Nn.indexBuffer,Yr=Nn.segments,Pr=Mt?Yo(Ta,ce,jt,Cn):bo(Ta);qn.draw(ce.context,ur,ve,ce.stencilModeForClipping(pn),Ae,Me.disabled,Pr,he.id,Nn.layoutVertexBuffer,Gr,Yr,he.paint,ce.transform.zoom,Kn)}}}}function qe(ce,Z,he,Q,ve,Ae,Re){for(var Ye=ce.context,ut=Ye.gl,Mt=he.paint.get("fill-extrusion-pattern"),jt=Mt.constantOr(1),ur=he.getCrossfadeParameters(),gr=he.paint.get("fill-extrusion-opacity"),Pr=0,Gr=Q;Pr<Gr.length;Pr+=1){var Yr=Gr[Pr],Ur=Z.getTile(Yr),tn=Ur.getBucket(he);if(tn){var pn=tn.programConfigurations.get(he.id),Cn=ce.useProgram(jt?"fillExtrusionPattern":"fillExtrusion",pn);jt&&(ce.context.activeTexture.set(ut.TEXTURE0),Ur.imageAtlasTexture.bind(ut.LINEAR,ut.CLAMP_TO_EDGE),pn.updatePaintBuffers(ur));var Nn=Mt.constantOr(null);if(Nn&&Ur.imageAtlas){var Kn=Ur.imageAtlas,qn=Kn.patternPositions[Nn.to.toString()],Qn=Kn.patternPositions[Nn.from.toString()];qn&&Qn&&pn.setConstantPatternPositions(qn,Qn)}var ua=ce.translatePosMatrix(Yr.posMatrix,Ur,he.paint.get("fill-extrusion-translate"),he.paint.get("fill-extrusion-translate-anchor")),ya=he.paint.get("fill-extrusion-vertical-gradient"),ga=jt?Ps(ua,ce,ya,gr,Yr,ur,Ur):$o(ua,ce,ya,gr);Cn.draw(Ye,Ye.gl.TRIANGLES,ve,Ae,Re,Me.backCCW,ga,he.id,tn.layoutVertexBuffer,tn.indexBuffer,tn.segments,he.paint,ce.transform.zoom,pn)}}}function bt(ce,Z,he,Q,ve,Ae){var Re=ce.context,Ye=Re.gl,ut=Z.fbo;if(ut){var Mt=ce.useProgram("hillshade");Re.activeTexture.set(Ye.TEXTURE0),Ye.bindTexture(Ye.TEXTURE_2D,ut.colorAttachment.get());var jt=function(ce,Z,he){var Q=he.paint.get("hillshade-shadow-color"),ve=he.paint.get("hillshade-highlight-color"),Ae=he.paint.get("hillshade-accent-color"),Re=he.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===he.paint.get("hillshade-illumination-anchor")&&(Re-=ce.transform.angle);var Ye=!ce.options.moving;return{u_matrix:ce.transform.calculatePosMatrix(Z.tileID.toUnwrapped(),Ye),u_image:0,u_latrange:Fa(0,Z.tileID),u_light:[he.paint.get("hillshade-exaggeration"),Re],u_shadow:Q,u_highlight:ve,u_accent:Ae}}(ce,Z,he);Mt.draw(Re,Ye.TRIANGLES,Q,ve,Ae,Me.disabled,jt,he.id,ce.rasterBoundsBuffer,ce.quadTriangleIndexBuffer,ce.rasterBoundsSegments)}}function xt(ce,Z,he,Q,ve,Ae,Re){var Ye=ce.context,ut=Ye.gl,Mt=Z.dem;if(Mt&&Mt.data){var jt=Mt.dim,ur=Mt.stride,gr=Mt.getPixels();if(Ye.activeTexture.set(ut.TEXTURE1),Ye.pixelStoreUnpackPremultiplyAlpha.set(!1),Z.demTexture=Z.demTexture||ce.getTileTexture(ur),Z.demTexture){var Pr=Z.demTexture;Pr.update(gr,{premultiply:!1}),Pr.bind(ut.NEAREST,ut.CLAMP_TO_EDGE)}else Z.demTexture=new e.Texture(Ye,gr,ut.RGBA,{premultiply:!1}),Z.demTexture.bind(ut.NEAREST,ut.CLAMP_TO_EDGE);Ye.activeTexture.set(ut.TEXTURE0);var Gr=Z.fbo;if(!Gr){var Yr=new e.Texture(Ye,{width:jt,height:jt,data:null},ut.RGBA);Yr.bind(ut.LINEAR,ut.CLAMP_TO_EDGE),(Gr=Z.fbo=Ye.createFramebuffer(jt,jt,!0)).colorAttachment.set(Yr.texture)}Ye.bindFramebuffer.set(Gr.framebuffer),Ye.viewport.set([0,0,jt,jt]),ce.useProgram("hillshadePrepare").draw(Ye,ut.TRIANGLES,ve,Ae,Re,Me.disabled,function(ce,Z,he){var Q=Z.stride,ve=e.create();return e.ortho(ve,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(ve,ve,[0,-e.EXTENT,0]),{u_matrix:ve,u_image:1,u_dimension:[Q,Q],u_zoom:ce.overscaledZ,u_maxzoom:he,u_unpack:Z.getUnpackVector()}}(Z.tileID,Mt,Q),he.id,ce.rasterBoundsBuffer,ce.quadTriangleIndexBuffer,ce.rasterBoundsSegments),Z.needsHillshadePrepare=!1}}function cr(ce,Z,he,Q,ve){var Ae=Q.paint.get("raster-fade-duration");if(Ae>0){var Re=e.browser.now(),Ye=(Re-ce.timeAdded)/Ae,ut=Z?(Re-Z.timeAdded)/Ae:-1,Mt=he.getSource(),jt=ve.coveringZoomLevel({tileSize:Mt.tileSize,roundZoom:Mt.roundZoom}),ur=!Z||Math.abs(Z.tileID.overscaledZ-jt)>Math.abs(ce.tileID.overscaledZ-jt),gr=ur&&ce.refreshedUponExpiration?1:e.clamp(ur?Ye:1-ut,0,1);return ce.refreshedUponExpiration&&Ye>=1&&(ce.refreshedUponExpiration=!1),Z?{opacity:1,mix:1-gr}:{opacity:gr,mix:0}}return{opacity:1,mix:0}}var lr=new e.Color(1,0,0,1),_r=new e.Color(0,1,0,1),Rr=new e.Color(0,0,1,1),Xr=new e.Color(1,0,1,1),an=new e.Color(0,1,1,1);function bn(ce){var Z=ce.transform.padding;Yn(ce,ce.transform.height-(Z.top||0),3,lr),Yn(ce,Z.bottom||0,3,_r),xa(ce,Z.left||0,3,Rr),xa(ce,ce.transform.width-(Z.right||0),3,Xr);var Q=ce.transform.centerPoint;!function Dn(ce,Z,he,Q){var ve=20,Ae=2;Za(ce,Z-Ae/2,he-ve/2,Ae,ve,Q),Za(ce,Z-ve/2,he-Ae/2,ve,Ae,Q)}(ce,Q.x,ce.transform.height-Q.y,an)}function Yn(ce,Z,he,Q){Za(ce,0,Z+he/2,ce.transform.width,he,Q)}function xa(ce,Z,he,Q){Za(ce,Z-he/2,0,he,ce.transform.height,Q)}function Za(ce,Z,he,Q,ve,Ae){var Re=ce.context,Ye=Re.gl;Ye.enable(Ye.SCISSOR_TEST),Ye.scissor(Z*e.browser.devicePixelRatio,he*e.browser.devicePixelRatio,Q*e.browser.devicePixelRatio,ve*e.browser.devicePixelRatio),Re.clear({color:Ae}),Ye.disable(Ye.SCISSOR_TEST)}function Ka(ce,Z,he){var Q=ce.context,ve=Q.gl,Ae=he.posMatrix,Re=ce.useProgram("debug"),Ye=jr.disabled,ut=qt.disabled,Mt=ce.colorModeForRenderPass();Q.activeTexture.set(ve.TEXTURE0),ce.emptyTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),Re.draw(Q,ve.LINE_STRIP,Ye,ut,Mt,Me.disabled,yn(Ae,e.Color.red),"$debug",ce.debugBuffer,ce.tileBorderIndexBuffer,ce.debugSegments);var ur=Z.getTileByID(he.key).latestRawTileData,Pr=Math.floor((ur&&ur.byteLength||0)/1024),Gr=Z.getTile(he).tileSize,Yr=512/Math.min(Gr,512)*(he.overscaledZ/ce.transform.zoom)*.5,Ur=he.canonical.toString();he.overscaledZ!==he.canonical.z&&(Ur+=" => "+he.overscaledZ),function ri(ce,Z){ce.initDebugOverlayCanvas();var he=ce.debugOverlayCanvas,Q=ce.context.gl,ve=ce.debugOverlayCanvas.getContext("2d");ve.clearRect(0,0,he.width,he.height),ve.shadowColor="white",ve.shadowBlur=2,ve.lineWidth=1.5,ve.strokeStyle="white",ve.textBaseline="top",ve.font="bold 36px Open Sans, sans-serif",ve.fillText(Z,5,5),ve.strokeText(Z,5,5),ce.debugOverlayTexture.update(he),ce.debugOverlayTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE)}(ce,Ur+" "+Pr+"kb"),Re.draw(Q,ve.TRIANGLES,Ye,ut,je.alphaBlended,Me.disabled,yn(Ae,e.Color.transparent,Yr),"$debug",ce.debugBuffer,ce.quadTriangleIndexBuffer,ce.debugSegments)}var Yi={symbol:function mu(ce,Z,he,Q,ve){if("translucent"===ce.renderPass){var Ae=qt.disabled,Re=ce.colorModeForRenderPass();he.layout.get("text-variable-anchor")&&function Ou(ce,Z,he,Q,ve,Ae,Re){for(var Ye=Z.transform,ut="map"===ve,Mt="map"===Ae,jt=0,ur=ce;jt<ur.length;jt+=1){var gr=ur[jt],Pr=Q.getTile(gr),Gr=Pr.getBucket(he);if(Gr&&Gr.text&&Gr.text.segments.get().length){var Ur=e.evaluateSizeForZoom(Gr.textSizeData,Ye.zoom),tn=kn(Pr,1,Z.transform.zoom),pn=Zr(gr.posMatrix,Mt,ut,Z.transform,tn),Cn="none"!==he.layout.get("icon-text-fit")&&Gr.hasIconData();if(Ur){var Nn=Math.pow(2,Ye.zoom-Pr.tileID.overscaledZ);ms(Gr,ut,Mt,Re,e.symbolSize,Ye,pn,gr.posMatrix,Nn,Ur,Cn)}}}}(Q,ce,he,Z,he.layout.get("text-rotation-alignment"),he.layout.get("text-pitch-alignment"),ve),0!==he.paint.get("icon-opacity").constantOr(1)&&Nu(ce,Z,he,Q,!1,he.paint.get("icon-translate"),he.paint.get("icon-translate-anchor"),he.layout.get("icon-rotation-alignment"),he.layout.get("icon-pitch-alignment"),he.layout.get("icon-keep-upright"),Ae,Re),0!==he.paint.get("text-opacity").constantOr(1)&&Nu(ce,Z,he,Q,!0,he.paint.get("text-translate"),he.paint.get("text-translate-anchor"),he.layout.get("text-rotation-alignment"),he.layout.get("text-pitch-alignment"),he.layout.get("text-keep-upright"),Ae,Re),Z.map.showCollisionBoxes&&(Fu(ce,Z,he,Q,he.paint.get("text-translate"),he.paint.get("text-translate-anchor"),!0),Fu(ce,Z,he,Q,he.paint.get("icon-translate"),he.paint.get("icon-translate-anchor"),!1))}},circle:function dl(ce,Z,he,Q){if("translucent"===ce.renderPass){var ve=he.paint.get("circle-opacity"),Ae=he.paint.get("circle-stroke-width"),Re=he.paint.get("circle-stroke-opacity"),Ye=void 0!==he.layout.get("circle-sort-key").constantOr(1);if(0!==ve.constantOr(1)||0!==Ae.constantOr(1)&&0!==Re.constantOr(1)){for(var ut=ce.context,Mt=ut.gl,jt=ce.depthModeForSublayer(0,jr.ReadOnly),ur=qt.disabled,gr=ce.colorModeForRenderPass(),Pr=[],Gr=0;Gr<Q.length;Gr++){var Yr=Q[Gr],Ur=Z.getTile(Yr),tn=Ur.getBucket(he);if(tn){var pn=tn.programConfigurations.get(he.id),Qn={programConfiguration:pn,program:ce.useProgram("circle",pn),layoutVertexBuffer:tn.layoutVertexBuffer,indexBuffer:tn.indexBuffer,uniformValues:mt(ce,Yr,Ur,he)};if(Ye)for(var ya=0,ga=tn.segments.get();ya<ga.length;ya+=1){var Ta=ga[ya];Pr.push({segments:new e.SegmentVector([Ta]),sortKey:Ta.sortKey,state:Qn})}else Pr.push({segments:tn.segments,sortKey:0,state:Qn})}}Ye&&Pr.sort(function(Ci,Qi){return Ci.sortKey-Qi.sortKey});for(var La=0,Wa=Pr;La<Wa.length;La+=1){var ii=Wa[La],Ni=ii.state;Ni.program.draw(ut,Mt.TRIANGLES,jt,ur,gr,Me.disabled,Ni.uniformValues,he.id,Ni.layoutVertexBuffer,Ni.indexBuffer,ii.segments,he.paint,ce.transform.zoom,Ni.programConfiguration)}}}},heatmap:function xu(ce,Z,he,Q){if(0!==he.paint.get("heatmap-opacity"))if("offscreen"===ce.renderPass){var ve=ce.context,Ae=ve.gl,Re=qt.disabled,Ye=new je([Ae.ONE,Ae.ONE],e.Color.transparent,[!0,!0,!0,!0]);(function nc(ce,Z,he){var Q=ce.gl;ce.activeTexture.set(Q.TEXTURE1),ce.viewport.set([0,0,Z.width/4,Z.height/4]);var ve=he.heatmapFbo;if(ve)Q.bindTexture(Q.TEXTURE_2D,ve.colorAttachment.get()),ce.bindFramebuffer.set(ve.framebuffer);else{var Ae=Q.createTexture();Q.bindTexture(Q.TEXTURE_2D,Ae),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_S,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_T,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MIN_FILTER,Q.LINEAR),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MAG_FILTER,Q.LINEAR),ve=he.heatmapFbo=ce.createFramebuffer(Z.width/4,Z.height/4,!1),function ou(ce,Z,he,Q){var ve=ce.gl;ve.texImage2D(ve.TEXTURE_2D,0,ve.RGBA,Z.width/4,Z.height/4,0,ve.RGBA,ce.extRenderToTextureHalfFloat?ce.extTextureHalfFloat.HALF_FLOAT_OES:ve.UNSIGNED_BYTE,null),Q.colorAttachment.set(he)}(ce,Z,Ae,ve)}})(ve,ce,he),ve.clear({color:e.Color.transparent});for(var ut=0;ut<Q.length;ut++){var Mt=Q[ut];if(!Z.hasRenderableParent(Mt)){var jt=Z.getTile(Mt),ur=jt.getBucket(he);if(ur){var gr=ur.programConfigurations.get(he.id);ce.useProgram("heatmap",gr).draw(ve,Ae.TRIANGLES,jr.disabled,Re,Ye,Me.disabled,zn(Mt.posMatrix,jt,ce.transform.zoom,he.paint.get("heatmap-intensity")),he.id,ur.layoutVertexBuffer,ur.indexBuffer,ur.segments,he.paint,ce.transform.zoom,gr)}}}ve.viewport.set([0,0,ce.width,ce.height])}else"translucent"===ce.renderPass&&(ce.context.setColorMode(ce.colorModeForRenderPass()),function Ju(ce,Z){var he=ce.context,Q=he.gl,ve=Z.heatmapFbo;if(ve){he.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_2D,ve.colorAttachment.get()),he.activeTexture.set(Q.TEXTURE1);var Ae=Z.colorRampTexture;Ae||(Ae=Z.colorRampTexture=new e.Texture(he,Z.colorRamp,Q.RGBA)),Ae.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),ce.useProgram("heatmapTexture").draw(he,Q.TRIANGLES,jr.disabled,qt.disabled,ce.colorModeForRenderPass(),Me.disabled,function(ce,Z,he,Q){var ve=e.create();e.ortho(ve,0,ce.width,ce.height,0,0,1);var Ae=ce.context.gl;return{u_matrix:ve,u_world:[Ae.drawingBufferWidth,Ae.drawingBufferHeight],u_image:he,u_color_ramp:Q,u_opacity:Z.paint.get("heatmap-opacity")}}(ce,Z,0,1),Z.id,ce.viewportBuffer,ce.quadTriangleIndexBuffer,ce.viewportSegments,Z.paint,ce.transform.zoom)}}(ce,he))},line:function Ku(ce,Z,he,Q){if("translucent"===ce.renderPass){var ve=he.paint.get("line-opacity"),Ae=he.paint.get("line-width");if(0!==ve.constantOr(1)&&0!==Ae.constantOr(1)){var Re=ce.depthModeForSublayer(0,jr.ReadOnly),Ye=ce.colorModeForRenderPass(),ut=he.paint.get("line-dasharray"),Mt=he.paint.get("line-pattern"),jt=Mt.constantOr(1),ur=he.paint.get("line-gradient"),gr=he.getCrossfadeParameters(),Pr=jt?"linePattern":ut?"lineSDF":ur?"lineGradient":"line",Gr=ce.context,Yr=Gr.gl,Ur=!0;if(ur){Gr.activeTexture.set(Yr.TEXTURE0);var tn=he.gradientTexture;if(!he.gradient)return;tn||(tn=he.gradientTexture=new e.Texture(Gr,he.gradient,Yr.RGBA)),tn.bind(Yr.LINEAR,Yr.CLAMP_TO_EDGE)}for(var pn=0,Cn=Q;pn<Cn.length;pn+=1){var Nn=Cn[pn],Kn=Z.getTile(Nn);if(!jt||Kn.patternsLoaded()){var qn=Kn.getBucket(he);if(qn){var Qn=qn.programConfigurations.get(he.id),ua=ce.context.program.get(),ya=ce.useProgram(Pr,Qn),ga=Ur||ya.program!==ua,Ta=Mt.constantOr(null);if(Ta&&Kn.imageAtlas){var La=Kn.imageAtlas,Wa=La.patternPositions[Ta.to.toString()],ii=La.patternPositions[Ta.from.toString()];Wa&&ii&&Qn.setConstantPatternPositions(Wa,ii)}var Ni=jt?yi(ce,Kn,he,gr):ut?mi(ce,Kn,he,ut,gr):ur?_i(ce,Kn,he):qa(ce,Kn,he);jt?(Gr.activeTexture.set(Yr.TEXTURE0),Kn.imageAtlasTexture.bind(Yr.LINEAR,Yr.CLAMP_TO_EDGE),Qn.updatePaintBuffers(gr)):ut&&(ga||ce.lineAtlas.dirty)&&(Gr.activeTexture.set(Yr.TEXTURE0),ce.lineAtlas.bind(Gr)),ya.draw(Gr,Yr.TRIANGLES,Re,ce.stencilModeForClipping(Nn),Ye,Me.disabled,Ni,he.id,qn.layoutVertexBuffer,qn.indexBuffer,qn.segments,he.paint,ce.transform.zoom,Qn),Ur=!1}}}}}},fill:function qo(ce,Z,he,Q){var ve=he.paint.get("fill-color"),Ae=he.paint.get("fill-opacity");if(0!==Ae.constantOr(1)){var Re=ce.colorModeForRenderPass(),Ye=he.paint.get("fill-pattern"),ut=ce.opaquePassEnabledForLayer()&&!Ye.constantOr(1)&&1===ve.constantOr(e.Color.transparent).a&&1===Ae.constantOr(0)?"opaque":"translucent";if(ce.renderPass===ut){var Mt=ce.depthModeForSublayer(1,"opaque"===ce.renderPass?jr.ReadWrite:jr.ReadOnly);ze(ce,Z,he,Q,Mt,Re,!1)}if("translucent"===ce.renderPass&&he.paint.get("fill-antialias")){var jt=ce.depthModeForSublayer(he.getPaintProperty("fill-outline-color")?2:0,jr.ReadOnly);ze(ce,Z,he,Q,jt,Re,!0)}}},"fill-extrusion":function Ge(ce,Z,he,Q){var ve=he.paint.get("fill-extrusion-opacity");if(0!==ve&&"translucent"===ce.renderPass){var Ae=new jr(ce.context.gl.LEQUAL,jr.ReadWrite,ce.depthRangeFor3D);if(1!==ve||he.paint.get("fill-extrusion-pattern").constantOr(1))qe(ce,Z,he,Q,Ae,qt.disabled,je.disabled),qe(ce,Z,he,Q,Ae,ce.stencilModeFor3D(),ce.colorModeForRenderPass());else{var Re=ce.colorModeForRenderPass();qe(ce,Z,he,Q,Ae,qt.disabled,Re)}}},hillshade:function ot(ce,Z,he,Q){if("offscreen"===ce.renderPass||"translucent"===ce.renderPass){for(var ve=ce.context,Ae=Z.getSource().maxzoom,Re=ce.depthModeForSublayer(0,jr.ReadOnly),Ye=ce.colorModeForRenderPass(),ut="translucent"===ce.renderPass?ce.stencilConfigForOverlap(Q):[{},Q],Mt=ut[0],ur=0,gr=ut[1];ur<gr.length;ur+=1){var Pr=gr[ur],Gr=Z.getTile(Pr);Gr.needsHillshadePrepare&&"offscreen"===ce.renderPass?xt(ce,Gr,he,Ae,Re,qt.disabled,Ye):"translucent"===ce.renderPass&&bt(ce,Gr,he,Re,Mt[Pr.overscaledZ],Ye)}ve.viewport.set([0,0,ce.width,ce.height])}},raster:function At(ce,Z,he,Q){if("translucent"===ce.renderPass&&0!==he.paint.get("raster-opacity")&&Q.length)for(var ve=ce.context,Ae=ve.gl,Re=Z.getSource(),Ye=ce.useProgram("raster"),ut=ce.colorModeForRenderPass(),Mt=Re instanceof ne?[{},Q]:ce.stencilConfigForOverlap(Q),jt=Mt[0],ur=Mt[1],gr=ur[ur.length-1].overscaledZ,Pr=!ce.options.moving,Gr=0,Yr=ur;Gr<Yr.length;Gr+=1){var Ur=Yr[Gr],tn=ce.depthModeForSublayer(Ur.overscaledZ-gr,1===he.paint.get("raster-opacity")?jr.ReadWrite:jr.ReadOnly,Ae.LESS),pn=Z.getTile(Ur),Cn=ce.transform.calculatePosMatrix(Ur.toUnwrapped(),Pr);pn.registerFadeDuration(he.paint.get("raster-fade-duration"));var Nn=Z.findLoadedParent(Ur,0),Kn=cr(pn,Nn,Z,he,ce.transform),qn=void 0,Qn=void 0,ua="nearest"===he.paint.get("raster-resampling")?Ae.NEAREST:Ae.LINEAR;ve.activeTexture.set(Ae.TEXTURE0),pn.texture.bind(ua,Ae.CLAMP_TO_EDGE,Ae.LINEAR_MIPMAP_NEAREST),ve.activeTexture.set(Ae.TEXTURE1),Nn?(Nn.texture.bind(ua,Ae.CLAMP_TO_EDGE,Ae.LINEAR_MIPMAP_NEAREST),qn=Math.pow(2,Nn.tileID.overscaledZ-pn.tileID.overscaledZ),Qn=[pn.tileID.canonical.x*qn%1,pn.tileID.canonical.y*qn%1]):pn.texture.bind(ua,Ae.CLAMP_TO_EDGE,Ae.LINEAR_MIPMAP_NEAREST);var ya=io(Cn,Qn||[0,0],qn||1,Kn,he);Re instanceof ne?Ye.draw(ve,Ae.TRIANGLES,tn,qt.disabled,ut,Me.disabled,ya,he.id,Re.boundsBuffer,ce.quadTriangleIndexBuffer,Re.boundsSegments):Ye.draw(ve,Ae.TRIANGLES,tn,jt[Ur.overscaledZ],ut,Me.disabled,ya,he.id,ce.rasterBoundsBuffer,ce.quadTriangleIndexBuffer,ce.rasterBoundsSegments)}},background:function yr(ce,Z,he){var Q=he.paint.get("background-color"),ve=he.paint.get("background-opacity");if(0!==ve){var Ae=ce.context,Re=Ae.gl,Ye=ce.transform,ut=Ye.tileSize,Mt=he.paint.get("background-pattern");if(!ce.isPatternMissing(Mt)){var jt=!Mt&&1===Q.a&&1===ve&&ce.opaquePassEnabledForLayer()?"opaque":"translucent";if(ce.renderPass===jt){var ur=qt.disabled,gr=ce.depthModeForSublayer(0,"opaque"===jt?jr.ReadWrite:jr.ReadOnly),Pr=ce.colorModeForRenderPass(),Gr=ce.useProgram(Mt?"backgroundPattern":"background"),Yr=Ye.coveringTiles({tileSize:ut});Mt&&(Ae.activeTexture.set(Re.TEXTURE0),ce.imageManager.bind(ce.context));for(var Ur=he.getCrossfadeParameters(),tn=0,pn=Yr;tn<pn.length;tn+=1){var Cn=pn[tn],Nn=ce.transform.calculatePosMatrix(Cn.toUnwrapped()),Kn=Mt?hl(Nn,ve,ce,Mt,{tileID:Cn,tileSize:ut},Ur):Rs(Nn,ve,Q);Gr.draw(Ae,Re.TRIANGLES,gr,ur,Pr,Me.disabled,Kn,he.id,ce.tileExtentBuffer,ce.quadTriangleIndexBuffer,ce.tileExtentSegments)}}}}},debug:function ja(ce,Z,he){for(var Q=0;Q<he.length;Q++)Ka(ce,Z,he[Q])},custom:function di(ce,Z,he){var Q=ce.context,ve=he.implementation;if("offscreen"===ce.renderPass){var Ae=ve.prerender;Ae&&(ce.setCustomLayerDefaults(),Q.setColorMode(ce.colorModeForRenderPass()),Ae.call(ve,Q.gl,ce.transform.customLayerMatrix()),Q.setDirty(),ce.setBaseState())}else if("translucent"===ce.renderPass){ce.setCustomLayerDefaults(),Q.setColorMode(ce.colorModeForRenderPass()),Q.setStencilMode(qt.disabled);var Re="3d"===ve.renderingMode?new jr(ce.context.gl.LEQUAL,jr.ReadWrite,ce.depthRangeFor3D):ce.depthModeForSublayer(0,jr.ReadOnly);Q.setDepthMode(Re),ve.render(Q.gl,ce.transform.customLayerMatrix()),Q.setDirty(),ce.setBaseState(),Q.bindFramebuffer.set(null)}}},Ga=function(Z,he){this.context=new Se(Z),this.transform=he,this._tileTextures={},this.setup(),this.numSublayers=Je.maxUnderzooming+Je.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new _a,this.gpuTimers={}};Ga.prototype.resize=function(Z,he){if(this.width=Z*e.browser.devicePixelRatio,this.height=he*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var Q=0,ve=this.style._order;Q<ve.length;Q+=1)this.style._layers[ve[Q]].resize()},Ga.prototype.setup=function(){var Z=this.context,he=new e.StructArrayLayout2i4;he.emplaceBack(0,0),he.emplaceBack(e.EXTENT,0),he.emplaceBack(0,e.EXTENT),he.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=Z.createVertexBuffer(he,cs.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var Q=new e.StructArrayLayout2i4;Q.emplaceBack(0,0),Q.emplaceBack(e.EXTENT,0),Q.emplaceBack(0,e.EXTENT),Q.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=Z.createVertexBuffer(Q,cs.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var ve=new e.StructArrayLayout4i8;ve.emplaceBack(0,0,0,0),ve.emplaceBack(e.EXTENT,0,e.EXTENT,0),ve.emplaceBack(0,e.EXTENT,0,e.EXTENT),ve.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=Z.createVertexBuffer(ve,se.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var Ae=new e.StructArrayLayout2i4;Ae.emplaceBack(0,0),Ae.emplaceBack(1,0),Ae.emplaceBack(0,1),Ae.emplaceBack(1,1),this.viewportBuffer=Z.createVertexBuffer(Ae,cs.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var Re=new e.StructArrayLayout1ui2;Re.emplaceBack(0),Re.emplaceBack(1),Re.emplaceBack(3),Re.emplaceBack(2),Re.emplaceBack(0),this.tileBorderIndexBuffer=Z.createIndexBuffer(Re);var Ye=new e.StructArrayLayout3ui6;Ye.emplaceBack(0,1,2),Ye.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=Z.createIndexBuffer(Ye),this.emptyTexture=new e.Texture(Z,{width:1,height:1,data:new Uint8Array([0,0,0,0])},Z.gl.RGBA);var ut=this.context.gl;this.stencilClearMode=new qt({func:ut.ALWAYS,mask:0},0,255,ut.ZERO,ut.ZERO,ut.ZERO)},Ga.prototype.clearStencil=function(){var Z=this.context,he=Z.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var Q=e.create();e.ortho(Q,0,this.width,this.height,0,0,1),e.scale(Q,Q,[he.drawingBufferWidth,he.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(Z,he.TRIANGLES,jr.disabled,this.stencilClearMode,je.disabled,Me.disabled,En(Q),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ga.prototype._renderTileClippingMasks=function(Z,he){if(this.currentStencilSource!==Z.source&&Z.isTileClipped()&&he&&he.length){this.currentStencilSource=Z.source;var Q=this.context,ve=Q.gl;this.nextStencilID+he.length>256&&this.clearStencil(),Q.setColorMode(je.disabled),Q.setDepthMode(jr.disabled);var Ae=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Re=0,Ye=he;Re<Ye.length;Re+=1){var ut=Ye[Re],Mt=this._tileClippingMaskIDs[ut.key]=this.nextStencilID++;Ae.draw(Q,ve.TRIANGLES,jr.disabled,new qt({func:ve.ALWAYS,mask:0},Mt,255,ve.KEEP,ve.KEEP,ve.REPLACE),je.disabled,Me.disabled,En(ut.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Ga.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var Z=this.nextStencilID++,he=this.context.gl;return new qt({func:he.NOTEQUAL,mask:255},Z,255,he.KEEP,he.KEEP,he.REPLACE)},Ga.prototype.stencilModeForClipping=function(Z){var he=this.context.gl;return new qt({func:he.EQUAL,mask:255},this._tileClippingMaskIDs[Z.key],0,he.KEEP,he.KEEP,he.REPLACE)},Ga.prototype.stencilConfigForOverlap=function(Z){var he,Q=this.context.gl,ve=Z.sort(function(Mt,jt){return jt.overscaledZ-Mt.overscaledZ}),Ae=ve[ve.length-1].overscaledZ,Re=ve[0].overscaledZ-Ae+1;if(Re>1){this.currentStencilSource=void 0,this.nextStencilID+Re>256&&this.clearStencil();for(var Ye={},ut=0;ut<Re;ut++)Ye[ut+Ae]=new qt({func:Q.GEQUAL,mask:255},ut+this.nextStencilID,255,Q.KEEP,Q.KEEP,Q.REPLACE);return this.nextStencilID+=Re,[Ye,ve]}return[(he={},he[Ae]=qt.disabled,he),ve]},Ga.prototype.colorModeForRenderPass=function(){var Z=this.context.gl;if(this._showOverdrawInspector){var Q=1/8;return new je([Z.CONSTANT_COLOR,Z.ONE],new e.Color(Q,Q,Q,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?je.unblended:je.alphaBlended},Ga.prototype.depthModeForSublayer=function(Z,he,Q){if(!this.opaquePassEnabledForLayer())return jr.disabled;var ve=1-((1+this.currentLayer)*this.numSublayers+Z)*this.depthEpsilon;return new jr(Q||this.context.gl.LEQUAL,he,[ve,ve])},Ga.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Ga.prototype.render=function(Z,he){var Q=this;this.style=Z,this.options=he,this.lineAtlas=Z.lineAtlas,this.imageManager=Z.imageManager,this.glyphManager=Z.glyphManager,this.symbolFadeChange=Z.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var ve=this.style._order,Ae=this.style.sourceCaches;for(var Re in Ae){var Ye=Ae[Re];Ye.used&&Ye.prepare(this.context)}var ga,Ta,ut={},Mt={},jt={};for(var ur in Ae){var gr=Ae[ur];ut[ur]=gr.getVisibleCoordinates(),Mt[ur]=ut[ur].slice().reverse(),jt[ur]=gr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Pr=0;Pr<ve.length;Pr++)if(this.style._layers[ve[Pr]].is3D()){this.opaquePassCutoff=Pr;break}this.renderPass="offscreen";for(var Yr=0,Ur=ve;Yr<Ur.length;Yr+=1){var pn=this.style._layers[Ur[Yr]];if(pn.hasOffscreenPass()&&!pn.isHidden(this.transform.zoom)){var Cn=Mt[pn.source];"custom"!==pn.type&&!Cn.length||this.renderLayer(this,Ae[pn.source],pn,Cn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:he.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=he.showOverdrawInspector,this.depthRangeFor3D=[0,1-(Z._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=ve.length-1;this.currentLayer>=0;this.currentLayer--){var Nn=this.style._layers[ve[this.currentLayer]],Kn=Ae[Nn.source],qn=ut[Nn.source];this._renderTileClippingMasks(Nn,qn),this.renderLayer(this,Kn,Nn,qn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<ve.length;this.currentLayer++){var Qn=this.style._layers[ve[this.currentLayer]],ua=Ae[Qn.source],ya=("symbol"===Qn.type?jt:Mt)[Qn.source];this._renderTileClippingMasks(Qn,ut[Qn.source]),this.renderLayer(this,ua,Qn,ya)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach(function(Wa){Wa.source&&!Wa.isHidden(Q.transform.zoom)&&(Wa.source!==(Ta&&Ta.id)&&(Ta=Q.style.sourceCaches[Wa.source]),(!ga||ga.getSource().maxzoom<Ta.getSource().maxzoom)&&(ga=Ta))}),ga&&Yi.debug(this,ga,ga.getVisibleCoordinates())),this.options.showPadding&&bn(this),this.context.setDefault()},Ga.prototype.renderLayer=function(Z,he,Q,ve){Q.isHidden(this.transform.zoom)||"background"!==Q.type&&"custom"!==Q.type&&!ve.length||(this.id=Q.id,this.gpuTimingStart(Q),Yi[Q.type](Z,he,Q,ve,this.style.placement.variableOffsets),this.gpuTimingEnd())},Ga.prototype.gpuTimingStart=function(Z){if(this.options.gpuTiming){var he=this.context.extTimerQuery,Q=this.gpuTimers[Z.id];Q||(Q=this.gpuTimers[Z.id]={calls:0,cpuTime:0,query:he.createQueryEXT()}),Q.calls++,he.beginQueryEXT(he.TIME_ELAPSED_EXT,Q.query)}},Ga.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var Z=this.context.extTimerQuery;Z.endQueryEXT(Z.TIME_ELAPSED_EXT)}},Ga.prototype.collectGpuTimers=function(){var Z=this.gpuTimers;return this.gpuTimers={},Z},Ga.prototype.queryGpuTimers=function(Z){var he={};for(var Q in Z){var ve=Z[Q],Ae=this.context.extTimerQuery,Re=Ae.getQueryObjectEXT(ve.query,Ae.QUERY_RESULT_EXT)/1e6;Ae.deleteQueryEXT(ve.query),he[Q]=Re}return he},Ga.prototype.translatePosMatrix=function(Z,he,Q,ve,Ae){if(!Q[0]&&!Q[1])return Z;var Re=Ae?"map"===ve?this.transform.angle:0:"viewport"===ve?-this.transform.angle:0;if(Re){var Ye=Math.sin(Re),ut=Math.cos(Re);Q=[Q[0]*ut-Q[1]*Ye,Q[0]*Ye+Q[1]*ut]}var Mt=[Ae?Q[0]:kn(he,Q[0],this.transform.zoom),Ae?Q[1]:kn(he,Q[1],this.transform.zoom),0],jt=new Float32Array(16);return e.translate(jt,Z,Mt),jt},Ga.prototype.saveTileTexture=function(Z){var he=this._tileTextures[Z.size[0]];he?he.push(Z):this._tileTextures[Z.size[0]]=[Z]},Ga.prototype.getTileTexture=function(Z){var he=this._tileTextures[Z];return he&&he.length>0?he.pop():null},Ga.prototype.isPatternMissing=function(Z){if(!Z)return!1;if(!Z.from||!Z.to)return!0;var he=this.imageManager.getPattern(Z.from.toString()),Q=this.imageManager.getPattern(Z.to.toString());return!he||!Q},Ga.prototype.useProgram=function(Z,he){this.cache=this.cache||{};var Q=""+Z+(he?he.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[Q]||(this.cache[Q]=new is(this.context,cl[Z],he,vl[Z],this._showOverdrawInspector)),this.cache[Q]},Ga.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ga.prototype.setBaseState=function(){var Z=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(Z.FUNC_ADD)},Ga.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Ga.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var $i=function(Z,he){this.points=Z,this.planes=he};$i.fromInvProjectionMatrix=function(Z,he,Q){var Ae=Math.pow(2,Q),Re=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Mt){return e.transformMat4([],Mt,Z)}).map(function(Mt){return e.scale$1([],Mt,1/Mt[3]/he*Ae)}),ut=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Mt){var jt=e.sub([],Re[Mt[0]],Re[Mt[1]]),ur=e.sub([],Re[Mt[2]],Re[Mt[1]]),gr=e.normalize([],e.cross([],jt,ur)),Pr=-e.dot(gr,Re[Mt[1]]);return gr.concat(Pr)});return new $i(Re,ut)};var Wi=function(Z,he){this.min=Z,this.max=he,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};Wi.prototype.quadrant=function(Z){for(var he=[Z%2==0,Z<2],Q=e.clone$2(this.min),ve=e.clone$2(this.max),Ae=0;Ae<he.length;Ae++)Q[Ae]=he[Ae]?this.min[Ae]:this.center[Ae],ve[Ae]=he[Ae]?this.center[Ae]:this.max[Ae];return ve[2]=this.max[2],new Wi(Q,ve)},Wi.prototype.distanceX=function(Z){return Math.max(Math.min(this.max[0],Z[0]),this.min[0])-Z[0]},Wi.prototype.distanceY=function(Z){return Math.max(Math.min(this.max[1],Z[1]),this.min[1])-Z[1]},Wi.prototype.intersects=function(Z){for(var he=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],Q=!0,ve=0;ve<Z.planes.length;ve++){for(var Ae=Z.planes[ve],Re=0,Ye=0;Ye<he.length;Ye++)Re+=e.dot$1(Ae,he[Ye])>=0;if(0===Re)return 0;Re!==he.length&&(Q=!1)}if(Q)return 2;for(var ut=0;ut<3;ut++){for(var Mt=Number.MAX_VALUE,jt=-Number.MAX_VALUE,ur=0;ur<Z.points.length;ur++){var gr=Z.points[ur][ut]-this.min[ut];Mt=Math.min(Mt,gr),jt=Math.max(jt,gr)}if(jt<0||Mt>this.max[ut]-this.min[ut])return 0}return 1};var ho=function(Z,he,Q,ve){if(void 0===Z&&(Z=0),void 0===he&&(he=0),void 0===Q&&(Q=0),void 0===ve&&(ve=0),isNaN(Z)||Z<0||isNaN(he)||he<0||isNaN(Q)||Q<0||isNaN(ve)||ve<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=Z,this.bottom=he,this.left=Q,this.right=ve};ho.prototype.interpolate=function(Z,he,Q){return null!=he.top&&null!=Z.top&&(this.top=e.number(Z.top,he.top,Q)),null!=he.bottom&&null!=Z.bottom&&(this.bottom=e.number(Z.bottom,he.bottom,Q)),null!=he.left&&null!=Z.left&&(this.left=e.number(Z.left,he.left,Q)),null!=he.right&&null!=Z.right&&(this.right=e.number(Z.right,he.right,Q)),this},ho.prototype.getCenter=function(Z,he){var Q=e.clamp((this.left+Z-this.right)/2,0,Z),ve=e.clamp((this.top+he-this.bottom)/2,0,he);return new e.Point(Q,ve)},ho.prototype.equals=function(Z){return this.top===Z.top&&this.bottom===Z.bottom&&this.left===Z.left&&this.right===Z.right},ho.prototype.clone=function(){return new ho(this.top,this.bottom,this.left,this.right)},ho.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var xi=function(Z,he,Q,ve,Ae){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===Ae||Ae,this._minZoom=Z||0,this._maxZoom=he||22,this._minPitch=null==Q?0:Q,this._maxPitch=null==ve?60:ve,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ho,this._posMatrixCache={},this._alignedPosMatrixCache={}},Di={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};xi.prototype.clone=function(){var Z=new xi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return Z.tileSize=this.tileSize,Z.latRange=this.latRange,Z.width=this.width,Z.height=this.height,Z._center=this._center,Z.zoom=this.zoom,Z.angle=this.angle,Z._fov=this._fov,Z._pitch=this._pitch,Z._unmodified=this._unmodified,Z._edgeInsets=this._edgeInsets.clone(),Z._calcMatrices(),Z},Di.minZoom.get=function(){return this._minZoom},Di.minZoom.set=function(ce){this._minZoom!==ce&&(this._minZoom=ce,this.zoom=Math.max(this.zoom,ce))},Di.maxZoom.get=function(){return this._maxZoom},Di.maxZoom.set=function(ce){this._maxZoom!==ce&&(this._maxZoom=ce,this.zoom=Math.min(this.zoom,ce))},Di.minPitch.get=function(){return this._minPitch},Di.minPitch.set=function(ce){this._minPitch!==ce&&(this._minPitch=ce,this.pitch=Math.max(this.pitch,ce))},Di.maxPitch.get=function(){return this._maxPitch},Di.maxPitch.set=function(ce){this._maxPitch!==ce&&(this._maxPitch=ce,this.pitch=Math.min(this.pitch,ce))},Di.renderWorldCopies.get=function(){return this._renderWorldCopies},Di.renderWorldCopies.set=function(ce){void 0===ce?ce=!0:null===ce&&(ce=!1),this._renderWorldCopies=ce},Di.worldSize.get=function(){return this.tileSize*this.scale},Di.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Di.size.get=function(){return new e.Point(this.width,this.height)},Di.bearing.get=function(){return-this.angle/Math.PI*180},Di.bearing.set=function(ce){var Z=-e.wrap(ce,-180,180)*Math.PI/180;this.angle!==Z&&(this._unmodified=!1,this.angle=Z,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Di.pitch.get=function(){return this._pitch/Math.PI*180},Di.pitch.set=function(ce){var Z=e.clamp(ce,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==Z&&(this._unmodified=!1,this._pitch=Z,this._calcMatrices())},Di.fov.get=function(){return this._fov/Math.PI*180},Di.fov.set=function(ce){ce=Math.max(.01,Math.min(60,ce)),this._fov!==ce&&(this._unmodified=!1,this._fov=ce/180*Math.PI,this._calcMatrices())},Di.zoom.get=function(){return this._zoom},Di.zoom.set=function(ce){var Z=Math.min(Math.max(ce,this.minZoom),this.maxZoom);this._zoom!==Z&&(this._unmodified=!1,this._zoom=Z,this.scale=this.zoomScale(Z),this.tileZoom=Math.floor(Z),this.zoomFraction=Z-this.tileZoom,this._constrain(),this._calcMatrices())},Di.center.get=function(){return this._center},Di.center.set=function(ce){ce.lat===this._center.lat&&ce.lng===this._center.lng||(this._unmodified=!1,this._center=ce,this._constrain(),this._calcMatrices())},Di.padding.get=function(){return this._edgeInsets.toJSON()},Di.padding.set=function(ce){this._edgeInsets.equals(ce)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,ce,1),this._calcMatrices())},Di.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},xi.prototype.isPaddingEqual=function(Z){return this._edgeInsets.equals(Z)},xi.prototype.interpolatePadding=function(Z,he,Q){this._unmodified=!1,this._edgeInsets.interpolate(Z,he,Q),this._constrain(),this._calcMatrices()},xi.prototype.coveringZoomLevel=function(Z){var he=(Z.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/Z.tileSize));return Math.max(0,he)},xi.prototype.getVisibleUnwrappedCoordinates=function(Z){var he=[new e.UnwrappedTileID(0,Z)];if(this._renderWorldCopies)for(var Q=this.pointCoordinate(new e.Point(0,0)),ve=this.pointCoordinate(new e.Point(this.width,0)),Ae=this.pointCoordinate(new e.Point(this.width,this.height)),Re=this.pointCoordinate(new e.Point(0,this.height)),Ye=Math.floor(Math.min(Q.x,ve.x,Ae.x,Re.x)),ut=Math.floor(Math.max(Q.x,ve.x,Ae.x,Re.x)),jt=Ye-1;jt<=ut+1;jt++)0!==jt&&he.push(new e.UnwrappedTileID(jt,Z));return he},xi.prototype.coveringTiles=function(Z){var he=this.coveringZoomLevel(Z),Q=he;if(void 0!==Z.minzoom&&he<Z.minzoom)return[];void 0!==Z.maxzoom&&he>Z.maxzoom&&(he=Z.maxzoom);var ve=e.MercatorCoordinate.fromLngLat(this.center),Ae=Math.pow(2,he),Re=[Ae*ve.x,Ae*ve.y,0],Ye=$i.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,he),ut=Z.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ut=he);var jt=function(La){return{aabb:new Wi([La*Ae,0,0],[(La+1)*Ae,Ae,0]),zoom:0,x:0,y:0,wrap:La,fullyVisible:!1}},ur=[],gr=[],Pr=he,Gr=Z.reparseOverscaled?Q:he;if(this._renderWorldCopies)for(var Yr=1;Yr<=3;Yr++)ur.push(jt(-Yr)),ur.push(jt(Yr));for(ur.push(jt(0));ur.length>0;){var Ur=ur.pop(),tn=Ur.x,pn=Ur.y,Cn=Ur.fullyVisible;if(!Cn){var Nn=Ur.aabb.intersects(Ye);if(0===Nn)continue;Cn=2===Nn}var Kn=Ur.aabb.distanceX(Re),qn=Ur.aabb.distanceY(Re),Qn=Math.max(Math.abs(Kn),Math.abs(qn));if(Ur.zoom===Pr||Qn>3+(1<<Pr-Ur.zoom)-2&&Ur.zoom>=ut)gr.push({tileID:new e.OverscaledTileID(Ur.zoom===Pr?Gr:Ur.zoom,Ur.wrap,Ur.zoom,tn,pn),distanceSq:e.sqrLen([Re[0]-.5-tn,Re[1]-.5-pn])});else for(var ya=0;ya<4;ya++){var ga=(tn<<1)+ya%2,Ta=(pn<<1)+(ya>>1);ur.push({aabb:Ur.aabb.quadrant(ya),zoom:Ur.zoom+1,x:ga,y:Ta,wrap:Ur.wrap,fullyVisible:Cn})}}return gr.sort(function(La,Wa){return La.distanceSq-Wa.distanceSq}).map(function(La){return La.tileID})},xi.prototype.resize=function(Z,he){this.width=Z,this.height=he,this.pixelsToGLUnits=[2/Z,-2/he],this._constrain(),this._calcMatrices()},Di.unmodified.get=function(){return this._unmodified},xi.prototype.zoomScale=function(Z){return Math.pow(2,Z)},xi.prototype.scaleZoom=function(Z){return Math.log(Z)/Math.LN2},xi.prototype.project=function(Z){var he=e.clamp(Z.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(Z.lng)*this.worldSize,e.mercatorYfromLat(he)*this.worldSize)},xi.prototype.unproject=function(Z){return new e.MercatorCoordinate(Z.x/this.worldSize,Z.y/this.worldSize).toLngLat()},Di.point.get=function(){return this.project(this.center)},xi.prototype.setLocationAtPoint=function(Z,he){var Q=this.pointCoordinate(he),ve=this.pointCoordinate(this.centerPoint),Ae=this.locationCoordinate(Z),Re=new e.MercatorCoordinate(Ae.x-(Q.x-ve.x),Ae.y-(Q.y-ve.y));this.center=this.coordinateLocation(Re),this._renderWorldCopies&&(this.center=this.center.wrap())},xi.prototype.locationPoint=function(Z){return this.coordinatePoint(this.locationCoordinate(Z))},xi.prototype.pointLocation=function(Z){return this.coordinateLocation(this.pointCoordinate(Z))},xi.prototype.locationCoordinate=function(Z){return e.MercatorCoordinate.fromLngLat(Z)},xi.prototype.coordinateLocation=function(Z){return Z.toLngLat()},xi.prototype.pointCoordinate=function(Z){var Q=[Z.x,Z.y,0,1],ve=[Z.x,Z.y,1,1];e.transformMat4(Q,Q,this.pixelMatrixInverse),e.transformMat4(ve,ve,this.pixelMatrixInverse);var Ae=Q[3],Re=ve[3],Mt=Q[1]/Ae,jt=ve[1]/Re,ur=Q[2]/Ae,gr=ve[2]/Re,Pr=ur===gr?0:(0-ur)/(gr-ur);return new e.MercatorCoordinate(e.number(Q[0]/Ae,ve[0]/Re,Pr)/this.worldSize,e.number(Mt,jt,Pr)/this.worldSize)},xi.prototype.coordinatePoint=function(Z){var he=[Z.x*this.worldSize,Z.y*this.worldSize,0,1];return e.transformMat4(he,he,this.pixelMatrix),new e.Point(he[0]/he[3],he[1]/he[3])},xi.prototype.getBounds=function(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},xi.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},xi.prototype.setMaxBounds=function(Z){Z?(this.lngRange=[Z.getWest(),Z.getEast()],this.latRange=[Z.getSouth(),Z.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},xi.prototype.calculatePosMatrix=function(Z,he){void 0===he&&(he=!1);var Q=Z.key,ve=he?this._alignedPosMatrixCache:this._posMatrixCache;if(ve[Q])return ve[Q];var Ae=Z.canonical,Re=this.worldSize/this.zoomScale(Ae.z),Ye=Ae.x+Math.pow(2,Ae.z)*Z.wrap,ut=e.identity(new Float64Array(16));return e.translate(ut,ut,[Ye*Re,Ae.y*Re,0]),e.scale(ut,ut,[Re/e.EXTENT,Re/e.EXTENT,1]),e.multiply(ut,he?this.alignedProjMatrix:this.projMatrix,ut),ve[Q]=new Float32Array(ut),ve[Q]},xi.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},xi.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var Ae,Re,Ye,ut,Z=-90,he=90,Q=-180,ve=180,Mt=this.size,jt=this._unmodified;if(this.latRange){var ur=this.latRange;Z=e.mercatorYfromLat(ur[1])*this.worldSize,Ae=(he=e.mercatorYfromLat(ur[0])*this.worldSize)-Z<Mt.y?Mt.y/(he-Z):0}if(this.lngRange){var gr=this.lngRange;Q=e.mercatorXfromLng(gr[0])*this.worldSize,Re=(ve=e.mercatorXfromLng(gr[1])*this.worldSize)-Q<Mt.x?Mt.x/(ve-Q):0}var Pr=this.point,Gr=Math.max(Re||0,Ae||0);if(Gr)return this.center=this.unproject(new e.Point(Re?(ve+Q)/2:Pr.x,Ae?(he+Z)/2:Pr.y)),this.zoom+=this.scaleZoom(Gr),this._unmodified=jt,void(this._constraining=!1);if(this.latRange){var Yr=Pr.y,Ur=Mt.y/2;Yr-Ur<Z&&(ut=Z+Ur),Yr+Ur>he&&(ut=he-Ur)}if(this.lngRange){var tn=Pr.x,pn=Mt.x/2;tn-pn<Q&&(Ye=Q+pn),tn+pn>ve&&(Ye=ve-pn)}(void 0!==Ye||void 0!==ut)&&(this.center=this.unproject(new e.Point(void 0!==Ye?Ye:Pr.x,void 0!==ut?ut:Pr.y))),this._unmodified=jt,this._constraining=!1}},xi.prototype._calcMatrices=function(){if(this.height){var he=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var Q=Math.PI/2+this._pitch,ve=this._fov*(.5+he.y/this.height),Ae=Math.sin(ve)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-Q-ve,.01,Math.PI-.01)),Re=this.point,Ye=Re.x,ut=Re.y,jt=1.01*(Math.cos(Math.PI/2-this._pitch)*Ae+this.cameraToCenterDistance),ur=this.height/50,gr=new Float64Array(16);e.perspective(gr,this._fov,this.width/this.height,ur,jt),gr[8]=2*-he.x/this.width,gr[9]=2*he.y/this.height,e.scale(gr,gr,[1,-1,1]),e.translate(gr,gr,[0,0,-this.cameraToCenterDistance]),e.rotateX(gr,gr,this._pitch),e.rotateZ(gr,gr,this.angle),e.translate(gr,gr,[-Ye,-ut,0]),this.mercatorMatrix=e.scale([],gr,[this.worldSize,this.worldSize,this.worldSize]),e.scale(gr,gr,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=gr,this.invProjMatrix=e.invert([],this.projMatrix);var Pr=this.width%2/2,Gr=this.height%2/2,Yr=Math.cos(this.angle),Ur=Math.sin(this.angle),tn=Ye-Math.round(Ye)+Yr*Pr+Ur*Gr,pn=ut-Math.round(ut)+Yr*Gr+Ur*Pr,Cn=new Float64Array(gr);if(e.translate(Cn,Cn,[tn>.5?tn-1:tn,pn>.5?pn-1:pn,0]),this.alignedProjMatrix=Cn,gr=e.create(),e.scale(gr,gr,[this.width/2,-this.height/2,1]),e.translate(gr,gr,[1,-1,0]),this.labelPlaneMatrix=gr,gr=e.create(),e.scale(gr,gr,[1,-1,1]),e.translate(gr,gr,[-1,-1,0]),e.scale(gr,gr,[2/this.width,2/this.height,1]),this.glCoordMatrix=gr,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(gr=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=gr,this._posMatrixCache={},this._alignedPosMatrixCache={}}},xi.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var Z=this.pointCoordinate(new e.Point(0,0)),he=[Z.x*this.worldSize,Z.y*this.worldSize,0,1];return e.transformMat4(he,he,this.pixelMatrix)[3]/this.cameraToCenterDistance},xi.prototype.getCameraPoint=function(){var he=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,he))},xi.prototype.getCameraQueryGeometry=function(Z){var he=this.getCameraPoint();if(1===Z.length)return[Z[0],he];for(var Q=he.x,ve=he.y,Ae=he.x,Re=he.y,Ye=0,ut=Z;Ye<ut.length;Ye+=1){var Mt=ut[Ye];Q=Math.min(Q,Mt.x),ve=Math.min(ve,Mt.y),Ae=Math.max(Ae,Mt.x),Re=Math.max(Re,Mt.y)}return[new e.Point(Q,ve),new e.Point(Ae,ve),new e.Point(Ae,Re),new e.Point(Q,Re),new e.Point(Q,ve)]},Object.defineProperties(xi.prototype,Di);var vo=function(Z){this._hashName=Z&&encodeURIComponent(Z),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function Wo(ce,Z){var he=!1,Q=null,ve=function(){Q=null,he&&(ce(),Q=setTimeout(ve,Z),he=!1)};return function(){return he=!0,Q||ve(),Q}}(this._updateHashUnthrottled.bind(this),300)};vo.prototype.addTo=function(Z){return this._map=Z,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},vo.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},vo.prototype.getHashString=function(Z){var he=this._map.getCenter(),Q=Math.round(100*this._map.getZoom())/100,ve=Math.ceil((Q*Math.LN2+Math.log(512/360/.5))/Math.LN10),Ae=Math.pow(10,ve),Re=Math.round(he.lng*Ae)/Ae,Ye=Math.round(he.lat*Ae)/Ae,ut=this._map.getBearing(),Mt=this._map.getPitch(),jt="";if(jt+=Z?"/"+Re+"/"+Ye+"/"+Q:Q+"/"+Ye+"/"+Re,(ut||Mt)&&(jt+="/"+Math.round(10*ut)/10),Mt&&(jt+="/"+Math.round(Mt)),this._hashName){var ur=this._hashName,gr=!1,Pr=e.window.location.hash.slice(1).split("&").map(function(Gr){var Yr=Gr.split("=")[0];return Yr===ur?(gr=!0,Yr+"="+jt):Gr}).filter(function(Gr){return Gr});return gr||Pr.push(ur+"="+jt),"#"+Pr.join("&")}return"#"+jt},vo.prototype._getCurrentHash=function(){var Q,Z=this,he=e.window.location.hash.replace("#","");return this._hashName?(he.split("&").map(function(ve){return ve.split("=")}).forEach(function(ve){ve[0]===Z._hashName&&(Q=ve)}),(Q&&Q[1]||"").split("/")):he.split("/")},vo.prototype._onHashChange=function(){var Z=this._getCurrentHash();if(Z.length>=3&&!Z.some(function(Q){return isNaN(Q)})){var he=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(Z[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+Z[2],+Z[1]],zoom:+Z[0],bearing:he,pitch:+(Z[4]||0)}),!0}return!1},vo.prototype._updateHashUnthrottled=function(){var Z=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",Z)}catch(he){}};var Eo={linearity:.3,easing:e.bezier(0,0,.3,1)},Xo=e.extend({deceleration:2500,maxSpeed:1400},Eo),Do=e.extend({deceleration:20,maxSpeed:1400},Eo),Ks=e.extend({deceleration:1e3,maxSpeed:360},Eo),yl=e.extend({deceleration:1e3,maxSpeed:90},Eo),Ro=function(Z){this._map=Z,this.clear()};function ka(ce,Z){(!ce.duration||ce.duration<Z.duration)&&(ce.duration=Z.duration,ce.easing=Z.easing)}function Qs(ce,Z,he){var Q=he.maxSpeed,ve=he.linearity,Ae=he.deceleration,Re=e.clamp(ce*ve/(Z/1e3),-Q,Q),Ye=Math.abs(Re)/(Ae*ve);return{easing:he.easing,duration:1e3*Ye,amount:Re*(Ye/2)}}Ro.prototype.clear=function(){this._inertiaBuffer=[]},Ro.prototype.record=function(Z){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:Z})},Ro.prototype._drainInertiaBuffer=function(){for(var Z=this._inertiaBuffer,he=e.browser.now();Z.length>0&&he-Z[0].time>160;)Z.shift()},Ro.prototype._onMoveEnd=function(Z){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var he={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},Q=0,ve=this._inertiaBuffer;Q<ve.length;Q+=1){var Re=ve[Q].settings;he.zoom+=Re.zoomDelta||0,he.bearing+=Re.bearingDelta||0,he.pitch+=Re.pitchDelta||0,Re.panDelta&&he.pan._add(Re.panDelta),Re.around&&(he.around=Re.around),Re.pinchAround&&(he.pinchAround=Re.pinchAround)}var ut=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Mt={};if(he.pan.mag()){var jt=Qs(he.pan.mag(),ut,e.extend({},Xo,Z||{}));Mt.offset=he.pan.mult(jt.amount/he.pan.mag()),Mt.center=this._map.transform.center,ka(Mt,jt)}if(he.zoom){var ur=Qs(he.zoom,ut,Do);Mt.zoom=this._map.transform.zoom+ur.amount,ka(Mt,ur)}if(he.bearing){var gr=Qs(he.bearing,ut,Ks);Mt.bearing=this._map.transform.bearing+e.clamp(gr.amount,-179,179),ka(Mt,gr)}if(he.pitch){var Pr=Qs(he.pitch,ut,yl);Mt.pitch=this._map.transform.pitch+Pr.amount,ka(Mt,Pr)}if(Mt.zoom||Mt.bearing){var Gr=void 0===he.pinchAround?he.around:he.pinchAround;Mt.around=Gr?this._map.unproject(Gr):this._map.getCenter()}return this.clear(),e.extend(Mt,{noMoveStart:!0})}};var ue=function(ce){function Z(Q,ve,Ae,Re){void 0===Re&&(Re={});var Ye=d.mousePos(ve.getCanvasContainer(),Ae),ut=ve.unproject(Ye);ce.call(this,Q,e.extend({point:Ye,lngLat:ut,originalEvent:Ae},Re)),this._defaultPrevented=!1,this.target=ve}ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z;var he={defaultPrevented:{configurable:!0}};return Z.prototype.preventDefault=function(){this._defaultPrevented=!0},he.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Z.prototype,he),Z}(e.Event),_e=function(ce){function Z(Q,ve,Ae){var Re="touchend"===Q?Ae.changedTouches:Ae.touches,Ye=d.touchPos(ve.getCanvasContainer(),Re),ut=Ye.map(function(ur){return ve.unproject(ur)}),Mt=Ye.reduce(function(ur,gr,Pr,Gr){return ur.add(gr.div(Gr.length))},new e.Point(0,0)),jt=ve.unproject(Mt);ce.call(this,Q,{points:Ye,point:Mt,lngLats:ut,lngLat:jt,originalEvent:Ae}),this._defaultPrevented=!1}ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z;var he={defaultPrevented:{configurable:!0}};return Z.prototype.preventDefault=function(){this._defaultPrevented=!0},he.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Z.prototype,he),Z}(e.Event),Ee=function(ce){function Z(Q,ve,Ae){ce.call(this,Q,{originalEvent:Ae}),this._defaultPrevented=!1}ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z;var he={defaultPrevented:{configurable:!0}};return Z.prototype.preventDefault=function(){this._defaultPrevented=!0},he.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Z.prototype,he),Z}(e.Event),Ne=function(Z,he){this._map=Z,this._clickTolerance=he.clickTolerance};Ne.prototype.reset=function(){delete this._mousedownPos},Ne.prototype.wheel=function(Z){return this._firePreventable(new Ee(Z.type,this._map,Z))},Ne.prototype.mousedown=function(Z,he){return this._mousedownPos=he,this._firePreventable(new ue(Z.type,this._map,Z))},Ne.prototype.mouseup=function(Z){this._map.fire(new ue(Z.type,this._map,Z))},Ne.prototype.click=function(Z,he){this._mousedownPos&&this._mousedownPos.dist(he)>=this._clickTolerance||this._map.fire(new ue(Z.type,this._map,Z))},Ne.prototype.dblclick=function(Z){return this._firePreventable(new ue(Z.type,this._map,Z))},Ne.prototype.mouseover=function(Z){this._map.fire(new ue(Z.type,this._map,Z))},Ne.prototype.mouseout=function(Z){this._map.fire(new ue(Z.type,this._map,Z))},Ne.prototype.touchstart=function(Z){return this._firePreventable(new _e(Z.type,this._map,Z))},Ne.prototype.touchmove=function(Z){this._map.fire(new _e(Z.type,this._map,Z))},Ne.prototype.touchend=function(Z){this._map.fire(new _e(Z.type,this._map,Z))},Ne.prototype.touchcancel=function(Z){this._map.fire(new _e(Z.type,this._map,Z))},Ne.prototype._firePreventable=function(Z){if(this._map.fire(Z),Z.defaultPrevented)return{}},Ne.prototype.isEnabled=function(){return!0},Ne.prototype.isActive=function(){return!1},Ne.prototype.enable=function(){},Ne.prototype.disable=function(){};var He=function(Z){this._map=Z};He.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},He.prototype.mousemove=function(Z){this._map.fire(new ue(Z.type,this._map,Z))},He.prototype.mousedown=function(){this._delayContextMenu=!0},He.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ue("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},He.prototype.contextmenu=function(Z){this._delayContextMenu?this._contextMenuEvent=Z:this._map.fire(new ue(Z.type,this._map,Z)),this._map.listens("contextmenu")&&Z.preventDefault()},He.prototype.isEnabled=function(){return!0},He.prototype.isActive=function(){return!1},He.prototype.enable=function(){},He.prototype.disable=function(){};var Ve=function(Z,he){this._map=Z,this._el=Z.getCanvasContainer(),this._container=Z.getContainer(),this._clickTolerance=he.clickTolerance||1};function _t(ce,Z){for(var he={},Q=0;Q<ce.length;Q++)he[ce[Q].identifier]=Z[Q];return he}Ve.prototype.isEnabled=function(){return!!this._enabled},Ve.prototype.isActive=function(){return!!this._active},Ve.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Ve.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},Ve.prototype.mousedown=function(Z,he){!this.isEnabled()||!Z.shiftKey||0!==Z.button||(d.disableDrag(),this._startPos=this._lastPos=he,this._active=!0)},Ve.prototype.mousemoveWindow=function(Z,he){if(this._active){var Q=he;if(!(this._lastPos.equals(Q)||!this._box&&Q.dist(this._startPos)<this._clickTolerance)){var ve=this._startPos;this._lastPos=Q,this._box||(this._box=d.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",Z));var Ae=Math.min(ve.x,Q.x),Re=Math.max(ve.x,Q.x),Ye=Math.min(ve.y,Q.y),ut=Math.max(ve.y,Q.y);d.setTransform(this._box,"translate("+Ae+"px,"+Ye+"px)"),this._box.style.width=Re-Ae+"px",this._box.style.height=ut-Ye+"px"}}},Ve.prototype.mouseupWindow=function(Z,he){var Q=this;if(this._active&&0===Z.button){var ve=this._startPos,Ae=he;if(this.reset(),d.suppressClick(),ve.x!==Ae.x||ve.y!==Ae.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:Z})),{cameraAnimation:function(Re){return Re.fitScreenCoordinates(ve,Ae,Q._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",Z)}},Ve.prototype.keydown=function(Z){!this._active||27===Z.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",Z))},Ve.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(d.remove(this._box),this._box=null),d.enableDrag(),delete this._startPos,delete this._lastPos},Ve.prototype._fireEvent=function(Z,he){return this._map.fire(new e.Event(Z,{originalEvent:he}))};var Sr=function(Z){this.reset(),this.numTouches=Z.numTouches};Sr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Sr.prototype.touchstart=function(Z,he,Q){(this.centroid||Q.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(void 0===this.startTime&&(this.startTime=Z.timeStamp),Q.length===this.numTouches&&(this.centroid=function dt(ce){for(var Z=new e.Point(0,0),he=0,Q=ce;he<Q.length;he+=1)Z._add(Q[he]);return Z.div(ce.length)}(he),this.touches=_t(Q,he)))},Sr.prototype.touchmove=function(Z,he,Q){if(!this.aborted&&this.centroid){var ve=_t(Q,he);for(var Ae in this.touches){var Ye=ve[Ae];(!Ye||Ye.dist(this.touches[Ae])>30)&&(this.aborted=!0)}}},Sr.prototype.touchend=function(Z,he,Q){if((!this.centroid||Z.timeStamp-this.startTime>500)&&(this.aborted=!0),0===Q.length){var ve=!this.aborted&&this.centroid;if(this.reset(),ve)return ve}};var Mr=function(Z){this.singleTap=new Sr(Z),this.numTaps=Z.numTaps,this.reset()};Mr.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Mr.prototype.touchstart=function(Z,he,Q){this.singleTap.touchstart(Z,he,Q)},Mr.prototype.touchmove=function(Z,he,Q){this.singleTap.touchmove(Z,he,Q)},Mr.prototype.touchend=function(Z,he,Q){var ve=this.singleTap.touchend(Z,he,Q);if(ve){var Ae=Z.timeStamp-this.lastTime<500,Re=!this.lastTap||this.lastTap.dist(ve)<30;if((!Ae||!Re)&&this.reset(),this.count++,this.lastTime=Z.timeStamp,this.lastTap=ve,this.count===this.numTaps)return this.reset(),ve}};var Qr=function(){this._zoomIn=new Mr({numTouches:1,numTaps:2}),this._zoomOut=new Mr({numTouches:2,numTaps:1}),this.reset()};Qr.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Qr.prototype.touchstart=function(Z,he,Q){this._zoomIn.touchstart(Z,he,Q),this._zoomOut.touchstart(Z,he,Q)},Qr.prototype.touchmove=function(Z,he,Q){this._zoomIn.touchmove(Z,he,Q),this._zoomOut.touchmove(Z,he,Q)},Qr.prototype.touchend=function(Z,he,Q){var ve=this,Ae=this._zoomIn.touchend(Z,he,Q),Re=this._zoomOut.touchend(Z,he,Q);return Ae?(this._active=!0,Z.preventDefault(),setTimeout(function(){return ve.reset()},0),{cameraAnimation:function(Ye){return Ye.easeTo({duration:300,zoom:Ye.getZoom()+1,around:Ye.unproject(Ae)},{originalEvent:Z})}}):Re?(this._active=!0,Z.preventDefault(),setTimeout(function(){return ve.reset()},0),{cameraAnimation:function(Ye){return Ye.easeTo({duration:300,zoom:Ye.getZoom()-1,around:Ye.unproject(Re)},{originalEvent:Z})}}):void 0},Qr.prototype.touchcancel=function(){this.reset()},Qr.prototype.enable=function(){this._enabled=!0},Qr.prototype.disable=function(){this._enabled=!1,this.reset()},Qr.prototype.isEnabled=function(){return this._enabled},Qr.prototype.isActive=function(){return this._active};var Nr=function(Z){this.reset(),this._clickTolerance=Z.clickTolerance||1};Nr.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Nr.prototype._correctButton=function(Z,he){return!1},Nr.prototype._move=function(Z,he){return{}},Nr.prototype.mousedown=function(Z,he){if(!this._lastPoint){var Q=d.mouseButton(Z);!this._correctButton(Z,Q)||(this._lastPoint=he,this._eventButton=Q)}},Nr.prototype.mousemoveWindow=function(Z,he){var Q=this._lastPoint;if(Q&&(Z.preventDefault(),this._moved||!(he.dist(Q)<this._clickTolerance)))return this._moved=!0,this._lastPoint=he,this._move(Q,he)},Nr.prototype.mouseupWindow=function(Z){d.mouseButton(Z)===this._eventButton&&(this._moved&&d.suppressClick(),this.reset())},Nr.prototype.enable=function(){this._enabled=!0},Nr.prototype.disable=function(){this._enabled=!1,this.reset()},Nr.prototype.isEnabled=function(){return this._enabled},Nr.prototype.isActive=function(){return this._active};var $r=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.mousedown=function(Q,ve){ce.prototype.mousedown.call(this,Q,ve),this._lastPoint&&(this._active=!0)},Z.prototype._correctButton=function(Q,ve){return 0===ve&&!Q.ctrlKey},Z.prototype._move=function(Q,ve){return{around:ve,panDelta:ve.sub(Q)}},Z}(Nr),sn=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype._correctButton=function(Q,ve){return 0===ve&&Q.ctrlKey||2===ve},Z.prototype._move=function(Q,ve){var Re=.8*(ve.x-Q.x);if(Re)return this._active=!0,{bearingDelta:Re}},Z.prototype.contextmenu=function(Q){Q.preventDefault()},Z}(Nr),hn=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype._correctButton=function(Q,ve){return 0===ve&&Q.ctrlKey||2===ve},Z.prototype._move=function(Q,ve){var Re=-.5*(ve.y-Q.y);if(Re)return this._active=!0,{pitchDelta:Re}},Z.prototype.contextmenu=function(Q){Q.preventDefault()},Z}(Nr),Vr=function(Z){this._minTouches=1,this._clickTolerance=Z.clickTolerance||1,this.reset()};Vr.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},Vr.prototype.touchstart=function(Z,he,Q){return this._calculateTransform(Z,he,Q)},Vr.prototype.touchmove=function(Z,he,Q){if(this._active)return Z.preventDefault(),this._calculateTransform(Z,he,Q)},Vr.prototype.touchend=function(Z,he,Q){this._calculateTransform(Z,he,Q),this._active&&Q.length<this._minTouches&&this.reset()},Vr.prototype.touchcancel=function(){this.reset()},Vr.prototype._calculateTransform=function(Z,he,Q){Q.length>0&&(this._active=!0);var ve=_t(Q,he),Ae=new e.Point(0,0),Re=new e.Point(0,0),Ye=0;for(var ut in ve){var Mt=ve[ut],jt=this._touches[ut];jt&&(Ae._add(Mt),Re._add(Mt.sub(jt)),Ye++,ve[ut]=Mt)}if(this._touches=ve,!(Ye<this._minTouches)&&Re.mag()){var ur=Re.div(Ye);if(this._sum._add(ur),!(this._sum.mag()<this._clickTolerance))return{around:Ae.div(Ye),panDelta:ur}}},Vr.prototype.enable=function(){this._enabled=!0},Vr.prototype.disable=function(){this._enabled=!1,this.reset()},Vr.prototype.isEnabled=function(){return this._enabled},Vr.prototype.isActive=function(){return this._active};var Rn=function(){this.reset()};function la(ce,Z,he){for(var Q=0;Q<ce.length;Q++)if(ce[Q].identifier===he)return Z[Q]}Rn.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Rn.prototype._start=function(Z){},Rn.prototype._move=function(Z,he,Q){return{}},Rn.prototype.touchstart=function(Z,he,Q){this._firstTwoTouches||Q.length<2||(this._firstTwoTouches=[Q[0].identifier,Q[1].identifier],this._start([he[0],he[1]]))},Rn.prototype.touchmove=function(Z,he,Q){if(this._firstTwoTouches){Z.preventDefault();var ve=this._firstTwoTouches,Re=ve[1],Ye=la(Q,he,ve[0]),ut=la(Q,he,Re);if(Ye&&ut){var Mt=this._aroundCenter?null:Ye.add(ut).div(2);return this._move([Ye,ut],Mt,Z)}}},Rn.prototype.touchend=function(Z,he,Q){if(this._firstTwoTouches){var ve=this._firstTwoTouches,Re=ve[1],Ye=la(Q,he,ve[0]),ut=la(Q,he,Re);Ye&&ut||(this._active&&d.suppressClick(),this.reset())}},Rn.prototype.touchcancel=function(){this.reset()},Rn.prototype.enable=function(Z){this._enabled=!0,this._aroundCenter=!!Z&&"center"===Z.around},Rn.prototype.disable=function(){this._enabled=!1,this.reset()},Rn.prototype.isEnabled=function(){return this._enabled},Rn.prototype.isActive=function(){return this._active};function ha(ce,Z){return Math.log(ce/Z)/Math.LN2}var Ca=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.reset=function(){ce.prototype.reset.call(this),delete this._distance,delete this._startDistance},Z.prototype._start=function(Q){this._startDistance=this._distance=Q[0].dist(Q[1])},Z.prototype._move=function(Q,ve){var Ae=this._distance;if(this._distance=Q[0].dist(Q[1]),this._active||!(Math.abs(ha(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ha(this._distance,Ae),pinchAround:ve}},Z}(Rn);function si(ce,Z){return 180*ce.angleWith(Z)/Math.PI}var Oa=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.reset=function(){ce.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},Z.prototype._start=function(Q){this._startVector=this._vector=Q[0].sub(Q[1]),this._minDiameter=Q[0].dist(Q[1])},Z.prototype._move=function(Q,ve){var Ae=this._vector;if(this._vector=Q[0].sub(Q[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:si(this._vector,Ae),pinchAround:ve}},Z.prototype._isBelowThreshold=function(Q){this._minDiameter=Math.min(this._minDiameter,Q.mag());var Ae=25/(Math.PI*this._minDiameter)*360,Re=si(Q,this._startVector);return Math.abs(Re)<Ae},Z}(Rn);function Ya(ce){return Math.abs(ce.y)>Math.abs(ce.x)}var hi=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.reset=function(){ce.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},Z.prototype._start=function(Q){this._lastPoints=Q,Ya(Q[0].sub(Q[1]))&&(this._valid=!1)},Z.prototype._move=function(Q,ve,Ae){var Re=Q[0].sub(this._lastPoints[0]),Ye=Q[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Re,Ye,Ae.timeStamp),this._valid)return this._lastPoints=Q,this._active=!0,{pitchDelta:(Re.y+Ye.y)/2*-.5}},Z.prototype.gestureBeginsVertically=function(Q,ve,Ae){if(void 0!==this._valid)return this._valid;var Ye=Q.mag()>=2,ut=ve.mag()>=2;if(Ye||ut){if(!Ye||!ut)return void 0===this._firstMove&&(this._firstMove=Ae),Ae-this._firstMove<100&&void 0;var Mt=Q.y>0==ve.y>0;return Ya(Q)&&Ya(ve)&&Mt}},Z}(Rn),Si={panStep:100,bearingStep:15,pitchStep:10},na=function(){var Z=Si;this._panStep=Z.panStep,this._bearingStep=Z.bearingStep,this._pitchStep=Z.pitchStep};function Qa(ce){return ce*(2-ce)}na.prototype.reset=function(){this._active=!1},na.prototype.keydown=function(Z){var he=this;if(!(Z.altKey||Z.ctrlKey||Z.metaKey)){var Q=0,ve=0,Ae=0,Re=0,Ye=0;switch(Z.keyCode){case 61:case 107:case 171:case 187:Q=1;break;case 189:case 109:case 173:Q=-1;break;case 37:Z.shiftKey?ve=-1:(Z.preventDefault(),Re=-1);break;case 39:Z.shiftKey?ve=1:(Z.preventDefault(),Re=1);break;case 38:Z.shiftKey?Ae=1:(Z.preventDefault(),Ye=-1);break;case 40:Z.shiftKey?Ae=-1:(Z.preventDefault(),Ye=1);break;default:return}return{cameraAnimation:function(ut){var Mt=ut.getZoom();ut.easeTo({duration:300,easeId:"keyboardHandler",easing:Qa,zoom:Q?Math.round(Mt)+Q*(Z.shiftKey?2:1):Mt,bearing:ut.getBearing()+ve*he._bearingStep,pitch:ut.getPitch()+Ae*he._pitchStep,offset:[-Re*he._panStep,-Ye*he._panStep],center:ut.getCenter()},{originalEvent:Z})}}}},na.prototype.enable=function(){this._enabled=!0},na.prototype.disable=function(){this._enabled=!1,this.reset()},na.prototype.isEnabled=function(){return this._enabled},na.prototype.isActive=function(){return this._active};var ui=4.000244140625,Oi=function(Z,he){this._map=Z,this._el=Z.getCanvasContainer(),this._handler=he,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Oi.prototype.setZoomRate=function(Z){this._defaultZoomRate=Z},Oi.prototype.setWheelZoomRate=function(Z){this._wheelZoomRate=Z},Oi.prototype.isEnabled=function(){return!!this._enabled},Oi.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},Oi.prototype.isZooming=function(){return!!this._zooming},Oi.prototype.enable=function(Z){this.isEnabled()||(this._enabled=!0,this._aroundCenter=Z&&"center"===Z.around)},Oi.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},Oi.prototype.wheel=function(Z){if(this.isEnabled()){var he=Z.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*Z.deltaY:Z.deltaY,Q=e.browser.now(),ve=Q-(this._lastWheelEventTime||0);this._lastWheelEventTime=Q,0!==he&&he%ui==0?this._type="wheel":0!==he&&Math.abs(he)<4?this._type="trackpad":ve>400?(this._type=null,this._lastValue=he,this._timeout=setTimeout(this._onTimeout,40,Z)):this._type||(this._type=Math.abs(ve*he)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,he+=this._lastValue)),Z.shiftKey&&he&&(he/=4),this._type&&(this._lastWheelEvent=Z,this._delta-=he,this._active||this._start(Z)),Z.preventDefault()}},Oi.prototype._onTimeout=function(Z){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(Z)},Oi.prototype._start=function(Z){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var he=d.mousePos(this._el,Z);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(he)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Oi.prototype.renderFrame=function(){return this._onScrollFrame()},Oi.prototype._onScrollFrame=function(){var Z=this;if(this._frameId&&(this._frameId=null,this.isActive())){var he=this._map.transform;if(0!==this._delta){var Q="wheel"===this._type&&Math.abs(this._delta)>ui?this._wheelZoomRate:this._defaultZoomRate,ve=2/(1+Math.exp(-Math.abs(this._delta*Q)));this._delta<0&&0!==ve&&(ve=1/ve);var Ae="number"==typeof this._targetZoom?he.zoomScale(this._targetZoom):he.scale;this._targetZoom=Math.min(he.maxZoom,Math.max(he.minZoom,he.scaleZoom(Ae*ve))),"wheel"===this._type&&(this._startZoom=he.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var jt,Re="number"==typeof this._targetZoom?this._targetZoom:he.zoom,Ye=this._startZoom,ut=this._easing,Mt=!1;if("wheel"===this._type&&Ye&&ut){var ur=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),gr=ut(ur);jt=e.number(Ye,Re,gr),ur<1?this._frameId||(this._frameId=!0):Mt=!0}else jt=Re,Mt=!0;return this._active=!0,Mt&&(this._active=!1,this._finishTimeout=setTimeout(function(){Z._zooming=!1,Z._handler._triggerRenderFrame(),delete Z._targetZoom,delete Z._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Mt,zoomDelta:jt-he.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Oi.prototype._smoothOutEasing=function(Z){var he=e.ease;if(this._prevEase){var Q=this._prevEase,ve=(e.browser.now()-Q.start)/Q.duration,Ae=Q.easing(ve+.01)-Q.easing(ve),Re=.27/Math.sqrt(Ae*Ae+1e-4)*.01,Ye=Math.sqrt(.0729-Re*Re);he=e.bezier(Re,Ye,.25,1)}return this._prevEase={start:e.browser.now(),duration:Z,easing:he},he},Oi.prototype.reset=function(){this._active=!1};var Ma=function(Z,he){this._clickZoom=Z,this._tapZoom=he};Ma.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ma.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ma.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ma.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Ia=function(){this.reset()};Ia.prototype.reset=function(){this._active=!1},Ia.prototype.dblclick=function(Z,he){return Z.preventDefault(),{cameraAnimation:function(Q){Q.easeTo({duration:300,zoom:Q.getZoom()+(Z.shiftKey?-1:1),around:Q.unproject(he)},{originalEvent:Z})}}},Ia.prototype.enable=function(){this._enabled=!0},Ia.prototype.disable=function(){this._enabled=!1,this.reset()},Ia.prototype.isEnabled=function(){return this._enabled},Ia.prototype.isActive=function(){return this._active};var qi=function(){this._tap=new Mr({numTouches:1,numTaps:1}),this.reset()};qi.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},qi.prototype.touchstart=function(Z,he,Q){this._swipePoint||(this._tapTime&&Z.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?Q.length>0&&(this._swipePoint=he[0],this._swipeTouch=Q[0].identifier):this._tap.touchstart(Z,he,Q))},qi.prototype.touchmove=function(Z,he,Q){if(this._tapTime){if(this._swipePoint){if(Q[0].identifier!==this._swipeTouch)return;var ve=he[0],Ae=ve.y-this._swipePoint.y;return this._swipePoint=ve,Z.preventDefault(),this._active=!0,{zoomDelta:Ae/128}}}else this._tap.touchmove(Z,he,Q)},qi.prototype.touchend=function(Z,he,Q){this._tapTime?this._swipePoint&&0===Q.length&&this.reset():this._tap.touchend(Z,he,Q)&&(this._tapTime=Z.timeStamp)},qi.prototype.touchcancel=function(){this.reset()},qi.prototype.enable=function(){this._enabled=!0},qi.prototype.disable=function(){this._enabled=!1,this.reset()},qi.prototype.isEnabled=function(){return this._enabled},qi.prototype.isActive=function(){return this._active};var mo=function(Z,he,Q){this._el=Z,this._mousePan=he,this._touchPan=Q};mo.prototype.enable=function(Z){this._inertiaOptions=Z||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},mo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},mo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},mo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var po=function(Z,he,Q){this._pitchWithRotate=Z.pitchWithRotate,this._mouseRotate=he,this._mousePitch=Q};po.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},po.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},po.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},po.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Gi=function(Z,he,Q,ve){this._el=Z,this._touchZoom=he,this._touchRotate=Q,this._tapDragZoom=ve,this._rotationDisabled=!1,this._enabled=!0};Gi.prototype.enable=function(Z){this._touchZoom.enable(Z),this._rotationDisabled||this._touchRotate.enable(Z),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Gi.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Gi.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Gi.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Gi.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Gi.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var zs=function(ce){return ce.zoom||ce.drag||ce.pitch||ce.rotate},Ll=function(ce){function Z(){ce.apply(this,arguments)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z}(e.Event);function Fs(ce){return ce.panDelta&&ce.panDelta.mag()||ce.zoomDelta||ce.bearingDelta||ce.pitchDelta}var ki=function(Z,he){this._map=Z,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ro(Z),this._bearingSnap=he.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(he),e.bindAll(["handleEvent","handleWindowEvent"],this);var Q=this._el;this._listeners=[[Q,"touchstart",{passive:!1}],[Q,"touchmove",{passive:!1}],[Q,"touchend",void 0],[Q,"touchcancel",void 0],[Q,"mousedown",void 0],[Q,"mousemove",void 0],[Q,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[Q,"mouseover",void 0],[Q,"mouseout",void 0],[Q,"dblclick",void 0],[Q,"click",void 0],[Q,"keydown",{capture:!1}],[Q,"keyup",void 0],[Q,"wheel",{passive:!1}],[Q,"contextmenu",void 0],[e.window,"blur",void 0]];for(var ve=0,Ae=this._listeners;ve<Ae.length;ve+=1){var Re=Ae[ve],Ye=Re[0];d.addEventListener(Ye,Re[1],Ye===e.window.document?this.handleWindowEvent:this.handleEvent,Re[2])}};ki.prototype.destroy=function(){for(var Z=0,he=this._listeners;Z<he.length;Z+=1){var Q=he[Z],ve=Q[0];d.removeEventListener(ve,Q[1],ve===e.window.document?this.handleWindowEvent:this.handleEvent,Q[2])}},ki.prototype._addDefaultHandlers=function(Z){var he=this._map,Q=he.getCanvasContainer();this._add("mapEvent",new Ne(he,Z));var ve=he.boxZoom=new Ve(he,Z);this._add("boxZoom",ve);var Ae=new Qr,Re=new Ia;he.doubleClickZoom=new Ma(Re,Ae),this._add("tapZoom",Ae),this._add("clickZoom",Re);var Ye=new qi;this._add("tapDragZoom",Ye);var ut=he.touchPitch=new hi;this._add("touchPitch",ut);var Mt=new sn(Z),jt=new hn(Z);he.dragRotate=new po(Z,Mt,jt),this._add("mouseRotate",Mt,["mousePitch"]),this._add("mousePitch",jt,["mouseRotate"]);var ur=new $r(Z),gr=new Vr(Z);he.dragPan=new mo(Q,ur,gr),this._add("mousePan",ur),this._add("touchPan",gr,["touchZoom","touchRotate"]);var Pr=new Oa,Gr=new Ca;he.touchZoomRotate=new Gi(Q,Gr,Pr,Ye),this._add("touchRotate",Pr,["touchPan","touchZoom"]),this._add("touchZoom",Gr,["touchPan","touchRotate"]);var Yr=he.scrollZoom=new Oi(he,this);this._add("scrollZoom",Yr,["mousePan"]);var Ur=he.keyboard=new na;this._add("keyboard",Ur),this._add("blockableMapEvent",new He(he));for(var tn=0,pn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];tn<pn.length;tn+=1){var Cn=pn[tn];Z.interactive&&Z[Cn]&&he[Cn].enable(Z[Cn])}},ki.prototype._add=function(Z,he,Q){this._handlers.push({handlerName:Z,handler:he,allowed:Q}),this._handlersById[Z]=he},ki.prototype.stop=function(){if(!this._updatingCamera){for(var Z=0,he=this._handlers;Z<he.length;Z+=1)he[Z].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},ki.prototype.isActive=function(){for(var Z=0,he=this._handlers;Z<he.length;Z+=1)if(he[Z].handler.isActive())return!0;return!1},ki.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ki.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ki.prototype.isMoving=function(){return Boolean(zs(this._eventsInProgress))||this.isZooming()},ki.prototype._blockedByActive=function(Z,he,Q){for(var ve in Z)if(ve!==Q&&(!he||he.indexOf(ve)<0))return!0;return!1},ki.prototype.handleWindowEvent=function(Z){this.handleEvent(Z,Z.type+"Window")},ki.prototype._getMapTouches=function(Z){for(var he=[],Q=0,ve=Z;Q<ve.length;Q+=1){var Ae=ve[Q];this._el.contains(Ae.target)&&he.push(Ae)}return he},ki.prototype.handleEvent=function(Z,he){if("blur"!==Z.type){this._updatingCamera=!0;for(var Q="renderFrame"===Z.type?void 0:Z,ve={needsRenderFrame:!1},Ae={},Re={},Ye=Z.touches?this._getMapTouches(Z.touches):void 0,ut=Ye?d.touchPos(this._el,Ye):d.mousePos(this._el,Z),Mt=0,jt=this._handlers;Mt<jt.length;Mt+=1){var ur=jt[Mt],gr=ur.handlerName,Pr=ur.handler,Gr=ur.allowed;if(Pr.isEnabled()){var Yr=void 0;this._blockedByActive(Re,Gr,gr)?Pr.reset():Pr[he||Z.type]&&(Yr=Pr[he||Z.type](Z,ut,Ye),this.mergeHandlerResult(ve,Ae,Yr,gr,Q),Yr&&Yr.needsRenderFrame&&this._triggerRenderFrame()),(Yr||Pr.isActive())&&(Re[gr]=Pr)}}var Ur={};for(var tn in this._previousActiveHandlers)Re[tn]||(Ur[tn]=Q);this._previousActiveHandlers=Re,(Object.keys(Ur).length||Fs(ve))&&(this._changes.push([ve,Ae,Ur]),this._triggerRenderFrame()),(Object.keys(Re).length||Fs(ve))&&this._map._stop(!0),this._updatingCamera=!1;var pn=ve.cameraAnimation;pn&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],pn(this._map))}else this.stop()},ki.prototype.mergeHandlerResult=function(Z,he,Q,ve,Ae){if(Q){e.extend(Z,Q);var Re={handlerName:ve,originalEvent:Q.originalEvent||Ae};void 0!==Q.zoomDelta&&(he.zoom=Re),void 0!==Q.panDelta&&(he.drag=Re),void 0!==Q.pitchDelta&&(he.pitch=Re),void 0!==Q.bearingDelta&&(he.rotate=Re)}},ki.prototype._applyChanges=function(){for(var Z={},he={},Q={},ve=0,Ae=this._changes;ve<Ae.length;ve+=1){var Re=Ae[ve],Ye=Re[0],ut=Re[1],Mt=Re[2];Ye.panDelta&&(Z.panDelta=(Z.panDelta||new e.Point(0,0))._add(Ye.panDelta)),Ye.zoomDelta&&(Z.zoomDelta=(Z.zoomDelta||0)+Ye.zoomDelta),Ye.bearingDelta&&(Z.bearingDelta=(Z.bearingDelta||0)+Ye.bearingDelta),Ye.pitchDelta&&(Z.pitchDelta=(Z.pitchDelta||0)+Ye.pitchDelta),void 0!==Ye.around&&(Z.around=Ye.around),void 0!==Ye.pinchAround&&(Z.pinchAround=Ye.pinchAround),Ye.noInertia&&(Z.noInertia=Ye.noInertia),e.extend(he,ut),e.extend(Q,Mt)}this._updateMapTransform(Z,he,Q),this._changes=[]},ki.prototype._updateMapTransform=function(Z,he,Q){var ve=this._map,Ae=ve.transform;if(!Fs(Z))return this._fireEvents(he,Q);var Re=Z.panDelta,Ye=Z.zoomDelta,ut=Z.bearingDelta,Mt=Z.pitchDelta,jt=Z.around,ur=Z.pinchAround;void 0!==ur&&(jt=ur),ve._stop(!0),jt=jt||ve.transform.centerPoint;var gr=Ae.pointLocation(Re?jt.sub(Re):jt);ut&&(Ae.bearing+=ut),Mt&&(Ae.pitch+=Mt),Ye&&(Ae.zoom+=Ye),Ae.setLocationAtPoint(gr,jt),this._map._update(),Z.noInertia||this._inertia.record(Z),this._fireEvents(he,Q)},ki.prototype._fireEvents=function(Z,he){var Q=this,ve=zs(this._eventsInProgress),Ae=zs(Z),Re={};for(var Ye in Z)this._eventsInProgress[Ye]||(Re[Ye+"start"]=Z[Ye].originalEvent),this._eventsInProgress[Ye]=Z[Ye];for(var jt in!ve&&Ae&&this._fireEvent("movestart",Ae.originalEvent),Re)this._fireEvent(jt,Re[jt]);for(var ur in Z.rotate&&(this._bearingChanged=!0),Ae&&this._fireEvent("move",Ae.originalEvent),Z)this._fireEvent(ur,Z[ur].originalEvent);var Yr,Gr={};for(var Ur in this._eventsInProgress){var tn=this._eventsInProgress[Ur],pn=tn.handlerName,Cn=tn.originalEvent;this._handlersById[pn].isActive()||(delete this._eventsInProgress[Ur],Gr[Ur+"end"]=Yr=he[pn]||Cn)}for(var Nn in Gr)this._fireEvent(Nn,Gr[Nn]);var Kn=zs(this._eventsInProgress);if((ve||Ae)&&!Kn){this._updatingCamera=!0;var qn=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Qn=function(ua){return 0!==ua&&-Q._bearingSnap<ua&&ua<Q._bearingSnap};qn?(Qn(qn.bearing||this._map.getBearing())&&(qn.bearing=0),this._map.easeTo(qn,{originalEvent:Yr})):(this._map.fire(new e.Event("moveend",{originalEvent:Yr})),Qn(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},ki.prototype._fireEvent=function(Z,he){this._map.fire(new e.Event(Z,he?{originalEvent:he}:{}))},ki.prototype._triggerRenderFrame=function(){var Z=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(he){delete Z._frameId,Z.handleEvent(new Ll("renderFrame",{timeStamp:he})),Z._applyChanges()}))};var $s=function(ce){function Z(he,Q){ce.call(this),this._moving=!1,this._zooming=!1,this.transform=he,this._bearingSnap=Q.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},Z.prototype.setCenter=function(Q,ve){return this.jumpTo({center:Q},ve)},Z.prototype.panBy=function(Q,ve,Ae){return Q=e.Point.convert(Q).mult(-1),this.panTo(this.transform.center,e.extend({offset:Q},ve),Ae)},Z.prototype.panTo=function(Q,ve,Ae){return this.easeTo(e.extend({center:Q},ve),Ae)},Z.prototype.getZoom=function(){return this.transform.zoom},Z.prototype.setZoom=function(Q,ve){return this.jumpTo({zoom:Q},ve),this},Z.prototype.zoomTo=function(Q,ve,Ae){return this.easeTo(e.extend({zoom:Q},ve),Ae)},Z.prototype.zoomIn=function(Q,ve){return this.zoomTo(this.getZoom()+1,Q,ve),this},Z.prototype.zoomOut=function(Q,ve){return this.zoomTo(this.getZoom()-1,Q,ve),this},Z.prototype.getBearing=function(){return this.transform.bearing},Z.prototype.setBearing=function(Q,ve){return this.jumpTo({bearing:Q},ve),this},Z.prototype.getPadding=function(){return this.transform.padding},Z.prototype.setPadding=function(Q,ve){return this.jumpTo({padding:Q},ve),this},Z.prototype.rotateTo=function(Q,ve,Ae){return this.easeTo(e.extend({bearing:Q},ve),Ae)},Z.prototype.resetNorth=function(Q,ve){return this.rotateTo(0,e.extend({duration:1e3},Q),ve),this},Z.prototype.resetNorthPitch=function(Q,ve){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},Q),ve),this},Z.prototype.snapToNorth=function(Q,ve){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(Q,ve):this},Z.prototype.getPitch=function(){return this.transform.pitch},Z.prototype.setPitch=function(Q,ve){return this.jumpTo({pitch:Q},ve),this},Z.prototype.cameraForBounds=function(Q,ve){return Q=e.LngLatBounds.convert(Q),this._cameraForBoxAndBearing(Q.getNorthWest(),Q.getSouthEast(),0,ve)},Z.prototype._cameraForBoxAndBearing=function(Q,ve,Ae,Re){var Ye={top:0,bottom:0,right:0,left:0};if("number"==typeof(Re=e.extend({padding:Ye,offset:[0,0],maxZoom:this.transform.maxZoom},Re)).padding){var ut=Re.padding;Re.padding={top:ut,bottom:ut,right:ut,left:ut}}Re.padding=e.extend(Ye,Re.padding);var Mt=this.transform,jt=Mt.padding,ur=Mt.project(e.LngLat.convert(Q)),gr=Mt.project(e.LngLat.convert(ve)),Pr=ur.rotate(-Ae*Math.PI/180),Gr=gr.rotate(-Ae*Math.PI/180),Yr=new e.Point(Math.max(Pr.x,Gr.x),Math.max(Pr.y,Gr.y)),Ur=new e.Point(Math.min(Pr.x,Gr.x),Math.min(Pr.y,Gr.y)),tn=Yr.sub(Ur),pn=(Mt.width-(jt.left+jt.right+Re.padding.left+Re.padding.right))/tn.x,Cn=(Mt.height-(jt.top+jt.bottom+Re.padding.top+Re.padding.bottom))/tn.y;if(!(Cn<0||pn<0)){var Nn=Math.min(Mt.scaleZoom(Mt.scale*Math.min(pn,Cn)),Re.maxZoom),Kn=e.Point.convert(Re.offset),ya=new e.Point(Kn.x+(Re.padding.left-Re.padding.right)/2,Kn.y+(Re.padding.top-Re.padding.bottom)/2).mult(Mt.scale/Mt.zoomScale(Nn));return{center:Mt.unproject(ur.add(gr).div(2).sub(ya)),zoom:Nn,bearing:Ae}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},Z.prototype.fitBounds=function(Q,ve,Ae){return this._fitInternal(this.cameraForBounds(Q,ve),ve,Ae)},Z.prototype.fitScreenCoordinates=function(Q,ve,Ae,Re,Ye){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(Q)),this.transform.pointLocation(e.Point.convert(ve)),Ae,Re),Re,Ye)},Z.prototype._fitInternal=function(Q,ve,Ae){return Q?(delete(ve=e.extend(Q,ve)).padding,ve.linear?this.easeTo(ve,Ae):this.flyTo(ve,Ae)):this},Z.prototype.jumpTo=function(Q,ve){this.stop();var Ae=this.transform,Re=!1,Ye=!1,ut=!1;return"zoom"in Q&&Ae.zoom!==+Q.zoom&&(Re=!0,Ae.zoom=+Q.zoom),void 0!==Q.center&&(Ae.center=e.LngLat.convert(Q.center)),"bearing"in Q&&Ae.bearing!==+Q.bearing&&(Ye=!0,Ae.bearing=+Q.bearing),"pitch"in Q&&Ae.pitch!==+Q.pitch&&(ut=!0,Ae.pitch=+Q.pitch),null!=Q.padding&&!Ae.isPaddingEqual(Q.padding)&&(Ae.padding=Q.padding),this.fire(new e.Event("movestart",ve)).fire(new e.Event("move",ve)),Re&&this.fire(new e.Event("zoomstart",ve)).fire(new e.Event("zoom",ve)).fire(new e.Event("zoomend",ve)),Ye&&this.fire(new e.Event("rotatestart",ve)).fire(new e.Event("rotate",ve)).fire(new e.Event("rotateend",ve)),ut&&this.fire(new e.Event("pitchstart",ve)).fire(new e.Event("pitch",ve)).fire(new e.Event("pitchend",ve)),this.fire(new e.Event("moveend",ve))},Z.prototype.easeTo=function(Q,ve){var Ae=this;this._stop(!1,Q.easeId),(!1===(Q=e.extend({offset:[0,0],duration:500,easing:e.ease},Q)).animate||!Q.essential&&e.browser.prefersReducedMotion)&&(Q.duration=0);var Re=this.transform,Ye=this.getZoom(),ut=this.getBearing(),Mt=this.getPitch(),jt=this.getPadding(),ur="zoom"in Q?+Q.zoom:Ye,gr="bearing"in Q?this._normalizeBearing(Q.bearing,ut):ut,Pr="pitch"in Q?+Q.pitch:Mt,Gr="padding"in Q?Q.padding:Re.padding,Yr=e.Point.convert(Q.offset),Ur=Re.centerPoint.add(Yr),tn=Re.pointLocation(Ur),pn=e.LngLat.convert(Q.center||tn);this._normalizeCenter(pn);var qn,Qn,Cn=Re.project(tn),Nn=Re.project(pn).sub(Cn),Kn=Re.zoomScale(ur-Ye);Q.around&&(qn=e.LngLat.convert(Q.around),Qn=Re.locationPoint(qn));var ua={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ur!==Ye,this._rotating=this._rotating||ut!==gr,this._pitching=this._pitching||Pr!==Mt,this._padding=!Re.isPaddingEqual(Gr),this._easeId=Q.easeId,this._prepareEase(ve,Q.noMoveStart,ua),clearTimeout(this._easeEndTimeoutID),this._ease(function(ya){if(Ae._zooming&&(Re.zoom=e.number(Ye,ur,ya)),Ae._rotating&&(Re.bearing=e.number(ut,gr,ya)),Ae._pitching&&(Re.pitch=e.number(Mt,Pr,ya)),Ae._padding&&(Re.interpolatePadding(jt,Gr,ya),Ur=Re.centerPoint.add(Yr)),qn)Re.setLocationAtPoint(qn,Qn);else{var ga=Re.zoomScale(Re.zoom-Ye),Ta=ur>Ye?Math.min(2,Kn):Math.max(.5,Kn),La=Math.pow(Ta,1-ya),Wa=Re.unproject(Cn.add(Nn.mult(ya*La)).mult(ga));Re.setLocationAtPoint(Re.renderWorldCopies?Wa.wrap():Wa,Ur)}Ae._fireMoveEvents(ve)},function(ya){Ae._afterEase(ve,ya)},Q),this},Z.prototype._prepareEase=function(Q,ve,Ae){void 0===Ae&&(Ae={}),this._moving=!0,!ve&&!Ae.moving&&this.fire(new e.Event("movestart",Q)),this._zooming&&!Ae.zooming&&this.fire(new e.Event("zoomstart",Q)),this._rotating&&!Ae.rotating&&this.fire(new e.Event("rotatestart",Q)),this._pitching&&!Ae.pitching&&this.fire(new e.Event("pitchstart",Q))},Z.prototype._fireMoveEvents=function(Q){this.fire(new e.Event("move",Q)),this._zooming&&this.fire(new e.Event("zoom",Q)),this._rotating&&this.fire(new e.Event("rotate",Q)),this._pitching&&this.fire(new e.Event("pitch",Q))},Z.prototype._afterEase=function(Q,ve){if(!this._easeId||!ve||this._easeId!==ve){delete this._easeId;var Ae=this._zooming,Re=this._rotating,Ye=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Ae&&this.fire(new e.Event("zoomend",Q)),Re&&this.fire(new e.Event("rotateend",Q)),Ye&&this.fire(new e.Event("pitchend",Q)),this.fire(new e.Event("moveend",Q))}},Z.prototype.flyTo=function(Q,ve){var Ae=this;if(!Q.essential&&e.browser.prefersReducedMotion){var Re=e.pick(Q,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Re,ve)}this.stop(),Q=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},Q);var Ye=this.transform,ut=this.getZoom(),Mt=this.getBearing(),jt=this.getPitch(),ur=this.getPadding(),gr="zoom"in Q?e.clamp(+Q.zoom,Ye.minZoom,Ye.maxZoom):ut,Pr="bearing"in Q?this._normalizeBearing(Q.bearing,Mt):Mt,Gr="pitch"in Q?+Q.pitch:jt,Yr="padding"in Q?Q.padding:Ye.padding,Ur=Ye.zoomScale(gr-ut),tn=e.Point.convert(Q.offset),pn=Ye.centerPoint.add(tn),Cn=Ye.pointLocation(pn),Nn=e.LngLat.convert(Q.center||Cn);this._normalizeCenter(Nn);var Kn=Ye.project(Cn),qn=Ye.project(Nn).sub(Kn),Qn=Q.curve,ua=Math.max(Ye.width,Ye.height),ya=ua/Ur,ga=qn.mag();if("minZoom"in Q){var Ta=e.clamp(Math.min(Q.minZoom,ut,gr),Ye.minZoom,Ye.maxZoom),La=ua/Ye.zoomScale(Ta-ut);Qn=Math.sqrt(La/ga*2)}var Wa=Qn*Qn;function ii(li){var Ei=(ya*ya-ua*ua+(li?-1:1)*Wa*Wa*ga*ga)/(2*(li?ya:ua)*Wa*ga);return Math.log(Math.sqrt(Ei*Ei+1)-Ei)}function Ni(li){return(Math.exp(li)-Math.exp(-li))/2}function fi(li){return(Math.exp(li)+Math.exp(-li))/2}var Ua=ii(0),Bi=function(li){return fi(Ua)/fi(Ua+Qn*li)},Hi=function(li){return ua*((fi(Ua)*function bi(li){return Ni(li)/fi(li)}(Ua+Qn*li)-Ni(Ua))/Wa)/ga},Zi=(ii(1)-Ua)/Qn;if(Math.abs(ga)<1e-6||!isFinite(Zi)){if(Math.abs(ua-ya)<1e-6)return this.easeTo(Q,ve);var Ci=ya<ua?-1:1;Zi=Math.abs(Math.log(ya/ua))/Qn,Hi=function(){return 0},Bi=function(li){return Math.exp(Ci*Qn*li)}}return Q.duration="duration"in Q?+Q.duration:1e3*Zi/("screenSpeed"in Q?+Q.screenSpeed/Qn:+Q.speed),Q.maxDuration&&Q.duration>Q.maxDuration&&(Q.duration=0),this._zooming=!0,this._rotating=Mt!==Pr,this._pitching=Gr!==jt,this._padding=!Ye.isPaddingEqual(Yr),this._prepareEase(ve,!1),this._ease(function(li){var Ei=li*Zi,wo=1/Bi(Ei);Ye.zoom=1===li?gr:ut+Ye.scaleZoom(wo),Ae._rotating&&(Ye.bearing=e.number(Mt,Pr,li)),Ae._pitching&&(Ye.pitch=e.number(jt,Gr,li)),Ae._padding&&(Ye.interpolatePadding(ur,Yr,li),pn=Ye.centerPoint.add(tn));var zo=1===li?Nn:Ye.unproject(Kn.add(qn.mult(Hi(Ei))).mult(wo));Ye.setLocationAtPoint(Ye.renderWorldCopies?zo.wrap():zo,pn),Ae._fireMoveEvents(ve)},function(){return Ae._afterEase(ve)},Q),this},Z.prototype.isEasing=function(){return!!this._easeFrameId},Z.prototype.stop=function(){return this._stop()},Z.prototype._stop=function(Q,ve){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Ae=this._onEaseEnd;delete this._onEaseEnd,Ae.call(this,ve)}if(!Q){var Re=this.handlers;Re&&Re.stop()}return this},Z.prototype._ease=function(Q,ve,Ae){!1===Ae.animate||0===Ae.duration?(Q(1),ve()):(this._easeStart=e.browser.now(),this._easeOptions=Ae,this._onEaseFrame=Q,this._onEaseEnd=ve,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},Z.prototype._renderFrameCallback=function(){var Q=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(Q)),Q<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Z.prototype._normalizeBearing=function(Q,ve){Q=e.wrap(Q,-180,180);var Ae=Math.abs(Q-ve);return Math.abs(Q-360-ve)<Ae&&(Q-=360),Math.abs(Q+360-ve)<Ae&&(Q+=360),Q},Z.prototype._normalizeCenter=function(Q){var ve=this.transform;if(ve.renderWorldCopies&&!ve.lngRange){var Ae=Q.lng-ve.center.lng;Q.lng+=Ae>180?-360:Ae<-180?360:0}},Z}(e.Evented),jo=function(Z){void 0===Z&&(Z={}),this.options=Z,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};jo.prototype.getDefaultPosition=function(){return"bottom-right"},jo.prototype.onAdd=function(Z){var he=this.options&&this.options.compact;return this._map=Z,this._container=d.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=d.create("div","mapboxgl-ctrl-attrib-inner",this._container),he&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===he&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},jo.prototype.onRemove=function(){d.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},jo.prototype._updateEditLink=function(){var Z=this._editLink;Z||(Z=this._editLink=this._container.querySelector(".mapbox-improve-map"));var he=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(Z){var Q=he.reduce(function(ve,Ae,Re){return Ae.value&&(ve+=Ae.key+"="+Ae.value+(Re<he.length-1?"&":"")),ve},"?");Z.href=e.config.FEEDBACK_URL+"/"+Q+(this._map._hash?this._map._hash.getHashString(!0):""),Z.rel="noopener nofollow"}},jo.prototype._updateData=function(Z){Z&&("metadata"===Z.sourceDataType||"style"===Z.dataType)&&(this._updateAttributions(),this._updateEditLink())},jo.prototype._updateAttributions=function(){if(this._map.style){var Z=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?Z=Z.concat(this.options.customAttribution.map(function(ut){return"string"!=typeof ut?"":ut})):"string"==typeof this.options.customAttribution&&Z.push(this.options.customAttribution)),this._map.style.stylesheet){var he=this._map.style.stylesheet;this.styleOwner=he.owner,this.styleId=he.id}var Q=this._map.style.sourceCaches;for(var ve in Q){var Ae=Q[ve];if(Ae.used){var Re=Ae.getSource();Re.attribution&&Z.indexOf(Re.attribution)<0&&Z.push(Re.attribution)}}Z.sort(function(ut,Mt){return ut.length-Mt.length});var Ye=(Z=Z.filter(function(ut,Mt){for(var jt=Mt+1;jt<Z.length;jt++)if(Z[jt].indexOf(ut)>=0)return!1;return!0})).join(" | ");Ye!==this._attribHTML&&(this._attribHTML=Ye,Z.length?(this._innerContainer.innerHTML=Ye,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},jo.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var pi=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};pi.prototype.onAdd=function(Z){this._map=Z,this._container=d.create("div","mapboxgl-ctrl");var he=d.create("a","mapboxgl-ctrl-logo");return he.target="_blank",he.rel="noopener nofollow",he.href="https://www.mapbox.com/",he.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),he.setAttribute("rel","noopener nofollow"),this._container.appendChild(he),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},pi.prototype.onRemove=function(){d.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},pi.prototype.getDefaultPosition=function(){return"bottom-left"},pi.prototype._updateLogo=function(Z){(!Z||"metadata"===Z.sourceDataType)&&(this._container.style.display=this._logoRequired()?"block":"none")},pi.prototype._logoRequired=function(){if(this._map.style){var Z=this._map.style.sourceCaches;for(var he in Z)if(Z[he].getSource().mapbox_logo)return!0;return!1}},pi.prototype._updateCompact=function(){var Z=this._container.children;if(Z.length){var he=Z[0];this._map.getCanvasContainer().offsetWidth<250?he.classList.add("mapboxgl-compact"):he.classList.remove("mapboxgl-compact")}};var oo=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};oo.prototype.add=function(Z){var he=++this._id;return this._queue.push({callback:Z,id:he,cancelled:!1}),he},oo.prototype.remove=function(Z){for(var he=this._currentlyRunning,ve=0,Ae=he?this._queue.concat(he):this._queue;ve<Ae.length;ve+=1){var Re=Ae[ve];if(Re.id===Z)return void(Re.cancelled=!0)}},oo.prototype.run=function(Z){void 0===Z&&(Z=0);var he=this._currentlyRunning=this._queue;this._queue=[];for(var Q=0,ve=he;Q<ve.length;Q+=1){var Ae=ve[Q];if(!Ae.cancelled&&(Ae.callback(Z),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},oo.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var bu={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ml=e.window.HTMLImageElement,su=e.window.HTMLElement,Yl=e.window.ImageBitmap,$c={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},qc=function(ce){function Z(Q){var ve=this;if(null!=(Q=e.extend({},$c,Q)).minZoom&&null!=Q.maxZoom&&Q.minZoom>Q.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=Q.minPitch&&null!=Q.maxPitch&&Q.minPitch>Q.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=Q.minPitch&&Q.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=Q.maxPitch&&Q.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var Ae=new xi(Q.minZoom,Q.maxZoom,Q.minPitch,Q.maxPitch,Q.renderWorldCopies);if(ce.call(this,Ae,Q),this._interactive=Q.interactive,this._maxTileCacheSize=Q.maxTileCacheSize,this._failIfMajorPerformanceCaveat=Q.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=Q.preserveDrawingBuffer,this._antialias=Q.antialias,this._trackResize=Q.trackResize,this._bearingSnap=Q.bearingSnap,this._refreshExpiredTiles=Q.refreshExpiredTiles,this._fadeDuration=Q.fadeDuration,this._crossSourceCollisions=Q.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=Q.collectResourceTiming,this._renderTaskQueue=new oo,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},bu,Q.locale),this._requestManager=new e.RequestManager(Q.transformRequest,Q.accessToken),"string"==typeof Q.container){if(this._container=e.window.document.getElementById(Q.container),!this._container)throw new Error("Container '"+Q.container+"' not found.")}else{if(!(Q.container instanceof su))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=Q.container}if(Q.maxBounds&&this.setMaxBounds(Q.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return ve._update(!1)}),this.on("moveend",function(){return ve._update(!1)}),this.on("zoom",function(){return ve._update(!0)}),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new ki(this,Q),this._hash=Q.hash&&new vo("string"==typeof Q.hash&&Q.hash||void 0).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:Q.center,zoom:Q.zoom,bearing:Q.bearing,pitch:Q.pitch}),Q.bounds&&(this.resize(),this.fitBounds(Q.bounds,e.extend({},Q.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=Q.localIdeographFontFamily,Q.style&&this.setStyle(Q.style,{localIdeographFontFamily:Q.localIdeographFontFamily}),Q.attributionControl&&this.addControl(new jo({customAttribution:Q.customAttribution})),this.addControl(new pi,Q.logoPosition),this.on("style.load",function(){ve.transform.unmodified&&ve.jumpTo(ve.style.stylesheet)}),this.on("data",function(Ye){ve._update("style"===Ye.dataType),ve.fire(new e.Event(Ye.dataType+"data",Ye))}),this.on("dataloading",function(Ye){ve.fire(new e.Event(Ye.dataType+"dataloading",Ye))})}ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z;var he={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return Z.prototype._getMapId=function(){return this._mapId},Z.prototype.addControl=function(ve,Ae){if(void 0===Ae&&ve.getDefaultPosition&&(Ae=ve.getDefaultPosition()),void 0===Ae&&(Ae="top-right"),!ve||!ve.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Re=ve.onAdd(this);this._controls.push(ve);var Ye=this._controlPositions[Ae];return-1!==Ae.indexOf("bottom")?Ye.insertBefore(Re,Ye.firstChild):Ye.appendChild(Re),this},Z.prototype.removeControl=function(ve){if(!ve||!ve.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Ae=this._controls.indexOf(ve);return Ae>-1&&this._controls.splice(Ae,1),ve.onRemove(this),this},Z.prototype.resize=function(ve){var Ae=this._containerDimensions(),Re=Ae[0],Ye=Ae[1];this._resizeCanvas(Re,Ye),this.transform.resize(Re,Ye),this.painter.resize(Re,Ye);var ut=!this._moving;return ut&&(this.stop(),this.fire(new e.Event("movestart",ve)).fire(new e.Event("move",ve))),this.fire(new e.Event("resize",ve)),ut&&this.fire(new e.Event("moveend",ve)),this},Z.prototype.getBounds=function(){return this.transform.getBounds()},Z.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},Z.prototype.setMaxBounds=function(ve){return this.transform.setMaxBounds(e.LngLatBounds.convert(ve)),this._update()},Z.prototype.setMinZoom=function(ve){if((ve=null==ve?-2:ve)>=-2&&ve<=this.transform.maxZoom)return this.transform.minZoom=ve,this._update(),this.getZoom()<ve&&this.setZoom(ve),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},Z.prototype.getMinZoom=function(){return this.transform.minZoom},Z.prototype.setMaxZoom=function(ve){if((ve=null==ve?22:ve)>=this.transform.minZoom)return this.transform.maxZoom=ve,this._update(),this.getZoom()>ve&&this.setZoom(ve),this;throw new Error("maxZoom must be greater than the current minZoom")},Z.prototype.getMaxZoom=function(){return this.transform.maxZoom},Z.prototype.setMinPitch=function(ve){if((ve=null==ve?0:ve)<0)throw new Error("minPitch must be greater than or equal to 0");if(ve>=0&&ve<=this.transform.maxPitch)return this.transform.minPitch=ve,this._update(),this.getPitch()<ve&&this.setPitch(ve),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},Z.prototype.getMinPitch=function(){return this.transform.minPitch},Z.prototype.setMaxPitch=function(ve){if((ve=null==ve?60:ve)>60)throw new Error("maxPitch must be less than or equal to 60");if(ve>=this.transform.minPitch)return this.transform.maxPitch=ve,this._update(),this.getPitch()>ve&&this.setPitch(ve),this;throw new Error("maxPitch must be greater than the current minPitch")},Z.prototype.getMaxPitch=function(){return this.transform.maxPitch},Z.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},Z.prototype.setRenderWorldCopies=function(ve){return this.transform.renderWorldCopies=ve,this._update()},Z.prototype.project=function(ve){return this.transform.locationPoint(e.LngLat.convert(ve))},Z.prototype.unproject=function(ve){return this.transform.pointLocation(e.Point.convert(ve))},Z.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},Z.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},Z.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},Z.prototype._createDelegatedListener=function(ve,Ae,Re){var ut,Ye=this;if("mouseenter"===ve||"mouseover"===ve){var Mt=!1;return{layer:Ae,listener:Re,delegates:{mousemove:function(Ur){var tn=Ye.getLayer(Ae)?Ye.queryRenderedFeatures(Ur.point,{layers:[Ae]}):[];tn.length?Mt||(Mt=!0,Re.call(Ye,new ue(ve,Ye,Ur.originalEvent,{features:tn}))):Mt=!1},mouseout:function(){Mt=!1}}}}if("mouseleave"===ve||"mouseout"===ve){var gr=!1;return{layer:Ae,listener:Re,delegates:{mousemove:function(Ur){(Ye.getLayer(Ae)?Ye.queryRenderedFeatures(Ur.point,{layers:[Ae]}):[]).length?gr=!0:gr&&(gr=!1,Re.call(Ye,new ue(ve,Ye,Ur.originalEvent)))},mouseout:function(Ur){gr&&(gr=!1,Re.call(Ye,new ue(ve,Ye,Ur.originalEvent)))}}}}return{layer:Ae,listener:Re,delegates:(ut={},ut[ve]=function(Ur){var tn=Ye.getLayer(Ae)?Ye.queryRenderedFeatures(Ur.point,{layers:[Ae]}):[];tn.length&&(Ur.features=tn,Re.call(Ye,Ur),delete Ur.features)},ut)}},Z.prototype.on=function(ve,Ae,Re){if(void 0===Re)return ce.prototype.on.call(this,ve,Ae);var Ye=this._createDelegatedListener(ve,Ae,Re);for(var ut in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[ve]=this._delegatedListeners[ve]||[],this._delegatedListeners[ve].push(Ye),Ye.delegates)this.on(ut,Ye.delegates[ut]);return this},Z.prototype.once=function(ve,Ae,Re){if(void 0===Re)return ce.prototype.once.call(this,ve,Ae);var Ye=this._createDelegatedListener(ve,Ae,Re);for(var ut in Ye.delegates)this.once(ut,Ye.delegates[ut]);return this},Z.prototype.off=function(ve,Ae,Re){var Ye=this;return void 0===Re?ce.prototype.off.call(this,ve,Ae):(this._delegatedListeners&&this._delegatedListeners[ve]&&function(Mt){for(var jt=Mt[ve],ur=0;ur<jt.length;ur++){var gr=jt[ur];if(gr.layer===Ae&&gr.listener===Re){for(var Pr in gr.delegates)Ye.off(Pr,gr.delegates[Pr]);return jt.splice(ur,1),Ye}}}(this._delegatedListeners),this)},Z.prototype.queryRenderedFeatures=function(ve,Ae){if(!this.style)return[];var Re;if(void 0===Ae&&void 0!==ve&&!(ve instanceof e.Point)&&!Array.isArray(ve)&&(Ae=ve,ve=void 0),Ae=Ae||{},(ve=ve||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||"number"==typeof ve[0])Re=[e.Point.convert(ve)];else{var Ye=e.Point.convert(ve[0]),ut=e.Point.convert(ve[1]);Re=[Ye,new e.Point(ut.x,Ye.y),ut,new e.Point(Ye.x,ut.y),Ye]}return this.style.queryRenderedFeatures(Re,Ae,this.transform)},Z.prototype.querySourceFeatures=function(ve,Ae){return this.style.querySourceFeatures(ve,Ae)},Z.prototype.setStyle=function(ve,Ae){return!1!==(Ae=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Ae)).diff&&Ae.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&ve?(this._diffStyle(ve,Ae),this):(this._localIdeographFontFamily=Ae.localIdeographFontFamily,this._updateStyle(ve,Ae))},Z.prototype._getUIString=function(ve){var Ae=this._locale[ve];if(null==Ae)throw new Error("Missing UI string '"+ve+"'");return Ae},Z.prototype._updateStyle=function(ve,Ae){return this.style&&(this.style.setEventedParent(null),this.style._remove()),ve?(this.style=new Io(this,Ae||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof ve?this.style.loadURL(ve):this.style.loadJSON(ve),this):(delete this.style,this)},Z.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Io(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},Z.prototype._diffStyle=function(ve,Ae){var Re=this;if("string"==typeof ve){var Ye=this._requestManager.normalizeStyleURL(ve),ut=this._requestManager.transformRequest(Ye,e.ResourceType.Style);e.getJSON(ut,function(Mt,jt){Mt?Re.fire(new e.ErrorEvent(Mt)):jt&&Re._updateDiff(jt,Ae)})}else"object"==typeof ve&&this._updateDiff(ve,Ae)},Z.prototype._updateDiff=function(ve,Ae){try{this.style.setState(ve)&&this._update(!0)}catch(Re){e.warnOnce("Unable to perform style diff: "+(Re.message||Re.error||Re)+".  Rebuilding the style from scratch."),this._updateStyle(ve,Ae)}},Z.prototype.getStyle=function(){if(this.style)return this.style.serialize()},Z.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},Z.prototype.addSource=function(ve,Ae){return this._lazyInitEmptyStyle(),this.style.addSource(ve,Ae),this._update(!0)},Z.prototype.isSourceLoaded=function(ve){var Ae=this.style&&this.style.sourceCaches[ve];if(void 0!==Ae)return Ae.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+ve+"'")))},Z.prototype.areTilesLoaded=function(){var ve=this.style&&this.style.sourceCaches;for(var Ae in ve){var Ye=ve[Ae]._tiles;for(var ut in Ye){var Mt=Ye[ut];if("loaded"!==Mt.state&&"errored"!==Mt.state)return!1}}return!0},Z.prototype.addSourceType=function(ve,Ae,Re){return this._lazyInitEmptyStyle(),this.style.addSourceType(ve,Ae,Re)},Z.prototype.removeSource=function(ve){return this.style.removeSource(ve),this._update(!0)},Z.prototype.getSource=function(ve){return this.style.getSource(ve)},Z.prototype.addImage=function(ve,Ae,Re){void 0===Re&&(Re={});var Ye=Re.pixelRatio;void 0===Ye&&(Ye=1);var ut=Re.sdf;void 0===ut&&(ut=!1);var Mt=Re.stretchX,jt=Re.stretchY,ur=Re.content;this._lazyInitEmptyStyle();if(Ae instanceof ml||Yl&&Ae instanceof Yl){var Pr=e.browser.getImageData(Ae);this.style.addImage(ve,{data:new e.RGBAImage({width:Pr.width,height:Pr.height},Pr.data),pixelRatio:Ye,stretchX:Mt,stretchY:jt,content:ur,sdf:ut,version:0})}else{if(void 0===Ae.width||void 0===Ae.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Nn=Ae;this.style.addImage(ve,{data:new e.RGBAImage({width:Ae.width,height:Ae.height},new Uint8Array(Ae.data)),pixelRatio:Ye,stretchX:Mt,stretchY:jt,content:ur,sdf:ut,version:0,userImage:Nn}),Nn.onAdd&&Nn.onAdd(this,ve)}},Z.prototype.updateImage=function(ve,Ae){var Re=this.style.getImage(ve);if(!Re)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Ye=Ae instanceof ml||Yl&&Ae instanceof Yl?e.browser.getImageData(Ae):Ae,ut=Ye.width,Mt=Ye.height,jt=Ye.data;return void 0===ut||void 0===Mt?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):ut!==Re.data.width||Mt!==Re.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(Re.data.replace(jt,!(Ae instanceof ml||Yl&&Ae instanceof Yl)),void this.style.updateImage(ve,Re))},Z.prototype.hasImage=function(ve){return ve?!!this.style.getImage(ve):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},Z.prototype.removeImage=function(ve){this.style.removeImage(ve)},Z.prototype.loadImage=function(ve,Ae){e.getImage(this._requestManager.transformRequest(ve,e.ResourceType.Image),Ae)},Z.prototype.listImages=function(){return this.style.listImages()},Z.prototype.addLayer=function(ve,Ae){return this._lazyInitEmptyStyle(),this.style.addLayer(ve,Ae),this._update(!0)},Z.prototype.moveLayer=function(ve,Ae){return this.style.moveLayer(ve,Ae),this._update(!0)},Z.prototype.removeLayer=function(ve){return this.style.removeLayer(ve),this._update(!0)},Z.prototype.getLayer=function(ve){return this.style.getLayer(ve)},Z.prototype.setLayerZoomRange=function(ve,Ae,Re){return this.style.setLayerZoomRange(ve,Ae,Re),this._update(!0)},Z.prototype.setFilter=function(ve,Ae,Re){return void 0===Re&&(Re={}),this.style.setFilter(ve,Ae,Re),this._update(!0)},Z.prototype.getFilter=function(ve){return this.style.getFilter(ve)},Z.prototype.setPaintProperty=function(ve,Ae,Re,Ye){return void 0===Ye&&(Ye={}),this.style.setPaintProperty(ve,Ae,Re,Ye),this._update(!0)},Z.prototype.getPaintProperty=function(ve,Ae){return this.style.getPaintProperty(ve,Ae)},Z.prototype.setLayoutProperty=function(ve,Ae,Re,Ye){return void 0===Ye&&(Ye={}),this.style.setLayoutProperty(ve,Ae,Re,Ye),this._update(!0)},Z.prototype.getLayoutProperty=function(ve,Ae){return this.style.getLayoutProperty(ve,Ae)},Z.prototype.setLight=function(ve,Ae){return void 0===Ae&&(Ae={}),this._lazyInitEmptyStyle(),this.style.setLight(ve,Ae),this._update(!0)},Z.prototype.getLight=function(){return this.style.getLight()},Z.prototype.setFeatureState=function(ve,Ae){return this.style.setFeatureState(ve,Ae),this._update()},Z.prototype.removeFeatureState=function(ve,Ae){return this.style.removeFeatureState(ve,Ae),this._update()},Z.prototype.getFeatureState=function(ve){return this.style.getFeatureState(ve)},Z.prototype.getContainer=function(){return this._container},Z.prototype.getCanvasContainer=function(){return this._canvasContainer},Z.prototype.getCanvas=function(){return this._canvas},Z.prototype._containerDimensions=function(){var ve=0,Ae=0;return this._container&&(ve=this._container.clientWidth||400,Ae=this._container.clientHeight||300),[ve,Ae]},Z.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},Z.prototype._setupContainer=function(){var ve=this._container;ve.classList.add("mapboxgl-map"),(this._missingCSSCanary=d.create("div","mapboxgl-canary",ve)).style.visibility="hidden",this._detectMissingCSS();var Re=this._canvasContainer=d.create("div","mapboxgl-canvas-container",ve);this._interactive&&Re.classList.add("mapboxgl-interactive"),this._canvas=d.create("canvas","mapboxgl-canvas",Re),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Ye=this._containerDimensions();this._resizeCanvas(Ye[0],Ye[1]);var ut=this._controlContainer=d.create("div","mapboxgl-control-container",ve),Mt=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(jt){Mt[jt]=d.create("div","mapboxgl-ctrl-"+jt,ut)})},Z.prototype._resizeCanvas=function(ve,Ae){var Re=e.browser.devicePixelRatio||1;this._canvas.width=Re*ve,this._canvas.height=Re*Ae,this._canvas.style.width=ve+"px",this._canvas.style.height=Ae+"px"},Z.prototype._setupPainter=function(){var ve=e.extend({},c.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Ae=this._canvas.getContext("webgl",ve)||this._canvas.getContext("experimental-webgl",ve);Ae?(this.painter=new Ga(Ae,this.transform),e.webpSupported.testSupport(Ae)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},Z.prototype._contextLost=function(ve){ve.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:ve}))},Z.prototype._contextRestored=function(ve){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:ve}))},Z.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},Z.prototype._update=function(ve){return this.style?(this._styleDirty=this._styleDirty||ve,this._sourcesDirty=!0,this.triggerRepaint(),this):this},Z.prototype._requestRenderFrame=function(ve){return this._update(),this._renderTaskQueue.add(ve)},Z.prototype._cancelRenderFrame=function(ve){this._renderTaskQueue.remove(ve)},Z.prototype._render=function(ve){var Re,Ae=this,Ye=0,ut=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Re=ut.createQueryEXT(),ut.beginQueryEXT(ut.TIME_ELAPSED_EXT,Re),Ye=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(ve),!this._removed){var Mt=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var jt=this.transform.zoom,ur=e.browser.now();this.style.zoomHistory.update(jt,ur);var gr=new e.EvaluationParameters(jt,{now:ur,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Pr=gr.crossFadingFactor();(1!==Pr||Pr!==this._crossFadingFactor)&&(Mt=!0,this._crossFadingFactor=Pr),this.style.update(gr)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Mt)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Gr=e.browser.now()-Ye;ut.endQueryEXT(ut.TIME_ELAPSED_EXT,Re),setTimeout(function(){var tn=ut.getQueryObjectEXT(Re,ut.QUERY_RESULT_EXT)/1e6;ut.deleteQueryEXT(Re),Ae.fire(new e.Event("gpu-timing-frame",{cpuTime:Gr,gpuTime:tn}))},50)}if(this.listens("gpu-timing-layer")){var Yr=this.painter.collectGpuTimers();setTimeout(function(){var tn=Ae.painter.queryGpuTimers(Yr);Ae.fire(new e.Event("gpu-timing-layer",{layerTimes:tn}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},Z.prototype.remove=function(){this._hash&&this._hash.remove();for(var ve=0,Ae=this._controls;ve<Ae.length;ve+=1)Ae[ve].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var Ye=this.painter.context.gl.getExtension("WEBGL_lose_context");Ye&&Ye.loseContext(),gc(this._canvasContainer),gc(this._controlContainer),gc(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},Z.prototype.triggerRepaint=function(){var ve=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(Ae){ve._frame=null,ve._render(Ae)}))},Z.prototype._onWindowOnline=function(){this._update()},Z.prototype._onWindowResize=function(ve){this._trackResize&&this.resize({originalEvent:ve})._update()},he.showTileBoundaries.get=function(){return!!this._showTileBoundaries},he.showTileBoundaries.set=function(Q){this._showTileBoundaries!==Q&&(this._showTileBoundaries=Q,this._update())},he.showPadding.get=function(){return!!this._showPadding},he.showPadding.set=function(Q){this._showPadding!==Q&&(this._showPadding=Q,this._update())},he.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},he.showCollisionBoxes.set=function(Q){this._showCollisionBoxes!==Q&&(this._showCollisionBoxes=Q,Q?this.style._generateCollisionBoxes():this._update())},he.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},he.showOverdrawInspector.set=function(Q){this._showOverdrawInspector!==Q&&(this._showOverdrawInspector=Q,this._update())},he.repaint.get=function(){return!!this._repaint},he.repaint.set=function(Q){this._repaint!==Q&&(this._repaint=Q,this.triggerRepaint())},he.vertices.get=function(){return!!this._vertices},he.vertices.set=function(Q){this._vertices=Q,this._update()},Z.prototype._setCacheLimits=function(ve,Ae){e.setCacheLimits(ve,Ae)},he.version.get=function(){return e.version},Object.defineProperties(Z.prototype,he),Z}($s);function gc(ce){ce.parentNode&&ce.parentNode.removeChild(ce)}var kc={showCompass:!0,showZoom:!0,visualizePitch:!1},_u=function(Z){var he=this;this.options=e.extend({},kc,Z),this._container=d.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(Q){return Q.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(Q){return he._map.zoomIn({},{originalEvent:Q})}),d.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(Q){return he._map.zoomOut({},{originalEvent:Q})}),d.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(Q){he.options.visualizePitch?he._map.resetNorthPitch({},{originalEvent:Q}):he._map.resetNorth({},{originalEvent:Q})}),this._compassIcon=d.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};_u.prototype._updateZoomButtons=function(){var Z=this._map.getZoom();this._zoomInButton.disabled=Z===this._map.getMaxZoom(),this._zoomOutButton.disabled=Z===this._map.getMinZoom()},_u.prototype._rotateCompassArrow=function(){var Z=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=Z},_u.prototype.onAdd=function(Z){return this._map=Z,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new qs(this._map,this._compass,this.options.visualizePitch)),this._container},_u.prototype.onRemove=function(){d.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},_u.prototype._createButton=function(Z,he){var Q=d.create("button",Z,this._container);return Q.type="button",Q.addEventListener("click",he),Q},_u.prototype._setButtonTitle=function(Z,he){var Q=this._map._getUIString("NavigationControl."+he);Z.title=Q,Z.setAttribute("aria-label",Q)};var qs=function(Z,he,Q){void 0===Q&&(Q=!1),this._clickTolerance=10,this.element=he,this.mouseRotate=new sn({clickTolerance:Z.dragRotate._mouseRotate._clickTolerance}),this.map=Z,Q&&(this.mousePitch=new hn({clickTolerance:Z.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener(he,"mousedown",this.mousedown),d.addEventListener(he,"touchstart",this.touchstart,{passive:!1}),d.addEventListener(he,"touchmove",this.touchmove),d.addEventListener(he,"touchend",this.touchend),d.addEventListener(he,"touchcancel",this.reset)};function wu(ce,Z,he){if(ce=new e.LngLat(ce.lng,ce.lat),Z){var Q=new e.LngLat(ce.lng-360,ce.lat),ve=new e.LngLat(ce.lng+360,ce.lat),Ae=he.locationPoint(ce).distSqr(Z);he.locationPoint(Q).distSqr(Z)<Ae?ce=Q:he.locationPoint(ve).distSqr(Z)<Ae&&(ce=ve)}for(;Math.abs(ce.lng-he.center.lng)>180;){var Re=he.locationPoint(ce);if(Re.x>=0&&Re.y>=0&&Re.x<=he.width&&Re.y<=he.height)break;ce.lng>he.center.lng?ce.lng-=360:ce.lng+=360}return ce}qs.prototype.down=function(Z,he){this.mouseRotate.mousedown(Z,he),this.mousePitch&&this.mousePitch.mousedown(Z,he),d.disableDrag()},qs.prototype.move=function(Z,he){var Q=this.map,ve=this.mouseRotate.mousemoveWindow(Z,he);if(ve&&ve.bearingDelta&&Q.setBearing(Q.getBearing()+ve.bearingDelta),this.mousePitch){var Ae=this.mousePitch.mousemoveWindow(Z,he);Ae&&Ae.pitchDelta&&Q.setPitch(Q.getPitch()+Ae.pitchDelta)}},qs.prototype.off=function(){var Z=this.element;d.removeEventListener(Z,"mousedown",this.mousedown),d.removeEventListener(Z,"touchstart",this.touchstart,{passive:!1}),d.removeEventListener(Z,"touchmove",this.touchmove),d.removeEventListener(Z,"touchend",this.touchend),d.removeEventListener(Z,"touchcancel",this.reset),this.offTemp()},qs.prototype.offTemp=function(){d.enableDrag(),d.removeEventListener(e.window,"mousemove",this.mousemove),d.removeEventListener(e.window,"mouseup",this.mouseup)},qs.prototype.mousedown=function(Z){this.down(e.extend({},Z,{ctrlKey:!0,preventDefault:function(){return Z.preventDefault()}}),d.mousePos(this.element,Z)),d.addEventListener(e.window,"mousemove",this.mousemove),d.addEventListener(e.window,"mouseup",this.mouseup)},qs.prototype.mousemove=function(Z){this.move(Z,d.mousePos(this.element,Z))},qs.prototype.mouseup=function(Z){this.mouseRotate.mouseupWindow(Z),this.mousePitch&&this.mousePitch.mouseupWindow(Z),this.offTemp()},qs.prototype.touchstart=function(Z){1!==Z.targetTouches.length?this.reset():(this._startPos=this._lastPos=d.touchPos(this.element,Z.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return Z.preventDefault()}},this._startPos))},qs.prototype.touchmove=function(Z){1!==Z.targetTouches.length?this.reset():(this._lastPos=d.touchPos(this.element,Z.targetTouches)[0],this.move({preventDefault:function(){return Z.preventDefault()}},this._lastPos))},qs.prototype.touchend=function(Z){0===Z.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},qs.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var yc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Cc(ce,Z,he){var Q=ce.classList;for(var ve in yc)Q.remove("mapboxgl-"+he+"-anchor-"+ve);Q.add("mapboxgl-"+he+"-anchor-"+Z)}var Vu,ic=function(ce){function Z(he,Q){var ve=this;if(ce.call(this),(he instanceof e.window.HTMLElement||Q)&&(he=e.extend({element:he},Q)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=he&&he.anchor||"center",this._color=he&&he.color||"#3FB1CE",this._draggable=he&&he.draggable||!1,this._state="inactive",this._rotation=he&&he.rotation||0,this._rotationAlignment=he&&he.rotationAlignment||"auto",this._pitchAlignment=he&&he.pitchAlignment&&"auto"!==he.pitchAlignment?he.pitchAlignment:this._rotationAlignment,he&&he.element)this._element=he.element,this._offset=e.Point.convert(he&&he.offset||[0,0]);else{this._defaultMarker=!0,this._element=d.create("div"),this._element.setAttribute("aria-label","Map marker");var Ae=d.createNS("http://www.w3.org/2000/svg","svg");Ae.setAttributeNS(null,"display","block"),Ae.setAttributeNS(null,"height","41px"),Ae.setAttributeNS(null,"width","27px"),Ae.setAttributeNS(null,"viewBox","0 0 27 41");var Re=d.createNS("http://www.w3.org/2000/svg","g");Re.setAttributeNS(null,"stroke","none"),Re.setAttributeNS(null,"stroke-width","1"),Re.setAttributeNS(null,"fill","none"),Re.setAttributeNS(null,"fill-rule","evenodd");var Ye=d.createNS("http://www.w3.org/2000/svg","g");Ye.setAttributeNS(null,"fill-rule","nonzero");var ut=d.createNS("http://www.w3.org/2000/svg","g");ut.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ut.setAttributeNS(null,"fill","#000000");for(var jt=0,ur=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];jt<ur.length;jt+=1){var gr=ur[jt],Pr=d.createNS("http://www.w3.org/2000/svg","ellipse");Pr.setAttributeNS(null,"opacity","0.04"),Pr.setAttributeNS(null,"cx","10.5"),Pr.setAttributeNS(null,"cy","5.80029008"),Pr.setAttributeNS(null,"rx",gr.rx),Pr.setAttributeNS(null,"ry",gr.ry),ut.appendChild(Pr)}var Gr=d.createNS("http://www.w3.org/2000/svg","g");Gr.setAttributeNS(null,"fill",this._color);var Yr=d.createNS("http://www.w3.org/2000/svg","path");Yr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Gr.appendChild(Yr);var Ur=d.createNS("http://www.w3.org/2000/svg","g");Ur.setAttributeNS(null,"opacity","0.25"),Ur.setAttributeNS(null,"fill","#000000");var tn=d.createNS("http://www.w3.org/2000/svg","path");tn.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ur.appendChild(tn);var pn=d.createNS("http://www.w3.org/2000/svg","g");pn.setAttributeNS(null,"transform","translate(6.0, 7.0)"),pn.setAttributeNS(null,"fill","#FFFFFF");var Cn=d.createNS("http://www.w3.org/2000/svg","g");Cn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Nn=d.createNS("http://www.w3.org/2000/svg","circle");Nn.setAttributeNS(null,"fill","#000000"),Nn.setAttributeNS(null,"opacity","0.25"),Nn.setAttributeNS(null,"cx","5.5"),Nn.setAttributeNS(null,"cy","5.5"),Nn.setAttributeNS(null,"r","5.4999962");var Kn=d.createNS("http://www.w3.org/2000/svg","circle");Kn.setAttributeNS(null,"fill","#FFFFFF"),Kn.setAttributeNS(null,"cx","5.5"),Kn.setAttributeNS(null,"cy","5.5"),Kn.setAttributeNS(null,"r","5.4999962"),Cn.appendChild(Nn),Cn.appendChild(Kn),Ye.appendChild(ut),Ye.appendChild(Gr),Ye.appendChild(Ur),Ye.appendChild(pn),Ye.appendChild(Cn),Ae.appendChild(Ye),this._element.appendChild(Ae),this._offset=e.Point.convert(he&&he.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(qn){qn.preventDefault()}),this._element.addEventListener("mousedown",function(qn){qn.preventDefault()}),this._element.addEventListener("focus",function(){var qn=ve._map.getContainer();qn.scrollTop=0,qn.scrollLeft=0}),Cc(this._element,this._anchor,"marker"),this._popup=null}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.addTo=function(Q){return this.remove(),this._map=Q,Q.getCanvasContainer().appendChild(this._element),Q.on("move",this._update),Q.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},Z.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),d.remove(this._element),this._popup&&this._popup.remove(),this},Z.prototype.getLngLat=function(){return this._lngLat},Z.prototype.setLngLat=function(Q){return this._lngLat=e.LngLat.convert(Q),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},Z.prototype.getElement=function(){return this._element},Z.prototype.setPopup=function(Q){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),Q){if(!("offset"in Q.options)){var ve=38.1,Ae=13.5,Re=Math.sqrt(Math.pow(Ae,2)/2);Q.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-ve],"bottom-left":[Re,-1*(24.6+Re)],"bottom-right":[-Re,-1*(24.6+Re)],left:[Ae,-24.6],right:[-Ae,-24.6]}:this._offset}this._popup=Q,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},Z.prototype._onKeyPress=function(Q){var ve=Q.code,Ae=Q.charCode||Q.keyCode;("Space"===ve||"Enter"===ve||32===Ae||13===Ae)&&this.togglePopup()},Z.prototype._onMapClick=function(Q){var ve=Q.originalEvent.target,Ae=this._element;this._popup&&(ve===Ae||Ae.contains(ve))&&this.togglePopup()},Z.prototype.getPopup=function(){return this._popup},Z.prototype.togglePopup=function(){var Q=this._popup;return Q?(Q.isOpen()?Q.remove():Q.addTo(this._map),this):this},Z.prototype._update=function(Q){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=wu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var ve="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?ve="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(ve="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Ae="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?Ae="rotateX(0deg)":"map"===this._pitchAlignment&&(Ae="rotateX("+this._map.getPitch()+"deg)"),(!Q||"moveend"===Q.type)&&(this._pos=this._pos.round()),d.setTransform(this._element,yc[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Ae+" "+ve)}},Z.prototype.getOffset=function(){return this._offset},Z.prototype.setOffset=function(Q){return this._offset=e.Point.convert(Q),this._update(),this},Z.prototype._onMove=function(Q){this._pos=Q.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},Z.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"},Z.prototype._addDragHandler=function(Q){this._element.contains(Q.originalEvent.target)&&(Q.preventDefault(),this._positionDelta=Q.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},Z.prototype.setDraggable=function(Q){return this._draggable=!!Q,this._map&&(Q?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},Z.prototype.isDraggable=function(){return this._draggable},Z.prototype.setRotation=function(Q){return this._rotation=Q||0,this._update(),this},Z.prototype.getRotation=function(){return this._rotation},Z.prototype.setRotationAlignment=function(Q){return this._rotationAlignment=Q||"auto",this._update(),this},Z.prototype.getRotationAlignment=function(){return this._rotationAlignment},Z.prototype.setPitchAlignment=function(Q){return this._pitchAlignment=Q&&"auto"!==Q?Q:this._rotationAlignment,this._update(),this},Z.prototype.getPitchAlignment=function(){return this._pitchAlignment},Z}(e.Evented),ef={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};var oc=0,Hu=!1,tf=function(ce){function Z(he){ce.call(this),this.options=e.extend({},ef,he),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.onAdd=function(Q){return this._map=Q,this._container=d.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),function mc(ce){void 0!==Vu?ce(Vu):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then(function(Z){ce(Vu="denied"!==Z.state)}):ce(Vu=!!e.window.navigator.geolocation)}(this._setupUI),this._container},Z.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),d.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,oc=0,Hu=!1},Z.prototype._isOutOfMapMaxBounds=function(Q){var ve=this._map.getMaxBounds(),Ae=Q.coords;return ve&&(Ae.longitude<ve.getWest()||Ae.longitude>ve.getEast()||Ae.latitude<ve.getSouth()||Ae.latitude>ve.getNorth())},Z.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},Z.prototype._onSuccess=function(Q){if(this._map){if(this._isOutOfMapMaxBounds(Q))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",Q)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=Q,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(Q),(!this.options.trackUserLocation||"ACTIVE_LOCK"===this._watchState)&&this._updateCamera(Q),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",Q)),this._finish()}},Z.prototype._updateCamera=function(Q){var ve=new e.LngLat(Q.coords.longitude,Q.coords.latitude),Ae=Q.coords.accuracy,Re=this._map.getBearing(),Ye=e.extend({bearing:Re},this.options.fitBoundsOptions);this._map.fitBounds(ve.toBounds(Ae),Ye,{geolocateSource:!0})},Z.prototype._updateMarker=function(Q){if(Q){var ve=new e.LngLat(Q.coords.longitude,Q.coords.latitude);this._accuracyCircleMarker.setLngLat(ve).addTo(this._map),this._userLocationDotMarker.setLngLat(ve).addTo(this._map),this._accuracy=Q.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},Z.prototype._updateCircleRadius=function(){var Q=this._map._container.clientHeight/2,ve=this._map.unproject([0,Q]),Ae=this._map.unproject([1,Q]),Re=ve.distanceTo(Ae),Ye=Math.ceil(2*this._accuracy/Re);this._circleElement.style.width=Ye+"px",this._circleElement.style.height=Ye+"px"},Z.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},Z.prototype._onError=function(Q){if(this._map){if(this.options.trackUserLocation)if(1===Q.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var ve=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=ve,this._geolocateButton.setAttribute("aria-label",ve),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===Q.code&&Hu)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",Q)),this._finish()}},Z.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},Z.prototype._setupUI=function(Q){var ve=this;if(this._container.addEventListener("contextmenu",function(Ye){return Ye.preventDefault()}),this._geolocateButton=d.create("button","mapboxgl-ctrl-geolocate",this._container),d.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===Q){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Ae=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Ae,this._geolocateButton.setAttribute("aria-label",Ae)}else{var Re=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Re,this._geolocateButton.setAttribute("aria-label",Re)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=d.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ic(this._dotElement),this._circleElement=d.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ic({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Ye){!Ye.geolocateSource&&"ACTIVE_LOCK"===ve._watchState&&(!Ye.originalEvent||"resize"!==Ye.originalEvent.type)&&(ve._watchState="BACKGROUND",ve._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ve._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),ve.fire(new e.Event("trackuserlocationend")))})},Z.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":oc--,Hu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var Q;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++oc>1?(Q={maximumAge:6e5,timeout:0},Hu=!0):(Q=this.options.positionOptions,Hu=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,Q)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},Z.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},Z}(e.Evented),_f={maxWidth:100,unit:"metric"},Gu=function(Z){this.options=e.extend({},_f,Z),e.bindAll(["_onMove","setUnit"],this)};function rf(ce,Z,he){var Q=he&&he.maxWidth||100,ve=ce._container.clientHeight/2,Ae=ce.unproject([0,ve]),Re=ce.unproject([Q,ve]),Ye=Ae.distanceTo(Re);if(he&&"imperial"===he.unit){var ut=3.2808*Ye;ut>5280?sc(Z,Q,ut/5280,ce._getUIString("ScaleControl.Miles")):sc(Z,Q,ut,ce._getUIString("ScaleControl.Feet"))}else he&&"nautical"===he.unit?sc(Z,Q,Ye/1852,ce._getUIString("ScaleControl.NauticalMiles")):Ye>=1e3?sc(Z,Q,Ye/1e3,ce._getUIString("ScaleControl.Kilometers")):sc(Z,Q,Ye,ce._getUIString("ScaleControl.Meters"))}function sc(ce,Z,he,Q){var ve=function Tf(ce){var Z=Math.pow(10,(""+Math.floor(ce)).length-1),he=ce/Z;return Z*(he>=10?10:he>=5?5:he>=3?3:he>=2?2:he>=1?1:function wf(ce){var Z=Math.pow(10,Math.ceil(-Math.log(ce)/Math.LN10));return Math.round(ce*Z)/Z}(he))}(he);ce.style.width=Z*(ve/he)+"px",ce.innerHTML=ve+"&nbsp;"+Q}Gu.prototype.getDefaultPosition=function(){return"bottom-left"},Gu.prototype._onMove=function(){rf(this._map,this._container,this.options)},Gu.prototype.onAdd=function(Z){return this._map=Z,this._container=d.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",Z.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Gu.prototype.onRemove=function(){d.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Gu.prototype.setUnit=function(Z){this.options.unit=Z,rf(this._map,this._container,this.options)};var Wl=function(Z){this._fullscreen=!1,Z&&Z.container&&(Z.container instanceof e.window.HTMLElement?this._container=Z.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};Wl.prototype.onAdd=function(Z){return this._map=Z,this._container||(this._container=this._map.getContainer()),this._controlContainer=d.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Wl.prototype.onRemove=function(){d.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Wl.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},Wl.prototype._setupUI=function(){var Z=this._fullscreenButton=d.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);d.create("span","mapboxgl-ctrl-icon",Z).setAttribute("aria-hidden",!0),Z.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Wl.prototype._updateTitle=function(){var Z=this._getTitle();this._fullscreenButton.setAttribute("aria-label",Z),this._fullscreenButton.title=Z},Wl.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Wl.prototype._isFullscreen=function(){return this._fullscreen},Wl.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Wl.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Af={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Mf=function(ce){function Z(he){ce.call(this),this.options=e.extend(Object.create(Af),he),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return ce&&(Z.__proto__=ce),(Z.prototype=Object.create(ce&&ce.prototype)).constructor=Z,Z.prototype.addTo=function(Q){return this._map&&this.remove(),this._map=Q,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},Z.prototype.isOpen=function(){return!!this._map},Z.prototype.remove=function(){return this._content&&d.remove(this._content),this._container&&(d.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},Z.prototype.getLngLat=function(){return this._lngLat},Z.prototype.setLngLat=function(Q){return this._lngLat=e.LngLat.convert(Q),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},Z.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},Z.prototype.getElement=function(){return this._container},Z.prototype.setText=function(Q){return this.setDOMContent(e.window.document.createTextNode(Q))},Z.prototype.setHTML=function(Q){var Re,ve=e.window.document.createDocumentFragment(),Ae=e.window.document.createElement("body");for(Ae.innerHTML=Q;Re=Ae.firstChild;)ve.appendChild(Re);return this.setDOMContent(ve)},Z.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},Z.prototype.setMaxWidth=function(Q){return this.options.maxWidth=Q,this._update(),this},Z.prototype.setDOMContent=function(Q){return this._createContent(),this._content.appendChild(Q),this._update(),this},Z.prototype.addClassName=function(Q){this._container&&this._container.classList.add(Q)},Z.prototype.removeClassName=function(Q){this._container&&this._container.classList.remove(Q)},Z.prototype.toggleClassName=function(Q){if(this._container)return this._container.classList.toggle(Q)},Z.prototype._createContent=function(){this._content&&d.remove(this._content),this._content=d.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=d.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},Z.prototype._onMouseUp=function(Q){this._update(Q.point)},Z.prototype._onMouseMove=function(Q){this._update(Q.point)},Z.prototype._onDrag=function(Q){this._update(Q.point)},Z.prototype._update=function(Q){var ve=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=d.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=d.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Pr){return ve._container.classList.add(Pr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=wu(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||Q)){var Re=this._pos=this._trackPointer&&Q?Q:this._map.project(this._lngLat),Ye=this.options.anchor,ut=nf(this.options.offset);if(!Ye){var ur,Mt=this._container.offsetWidth,jt=this._container.offsetHeight;ur=Re.y+ut.bottom.y<jt?["top"]:Re.y>this._map.transform.height-jt?["bottom"]:[],Re.x<Mt/2?ur.push("left"):Re.x>this._map.transform.width-Mt/2&&ur.push("right"),Ye=0===ur.length?"bottom":ur.join("-")}var gr=Re.add(ut[Ye]).round();d.setTransform(this._container,yc[Ye]+" translate("+gr.x+"px,"+gr.y+"px)"),Cc(this._container,Ye,"popup")}},Z.prototype._onClose=function(){this.remove()},Z}(e.Evented);function nf(ce){if(ce){if("number"==typeof ce){var Z=Math.round(Math.sqrt(.5*Math.pow(ce,2)));return{center:new e.Point(0,0),top:new e.Point(0,ce),"top-left":new e.Point(Z,Z),"top-right":new e.Point(-Z,Z),bottom:new e.Point(0,-ce),"bottom-left":new e.Point(Z,-Z),"bottom-right":new e.Point(-Z,-Z),left:new e.Point(ce,0),right:new e.Point(-ce,0)}}if(ce instanceof e.Point||Array.isArray(ce)){var he=e.Point.convert(ce);return{center:he,top:he,"top-left":he,"top-right":he,bottom:he,"bottom-left":he,"bottom-right":he,left:he,right:he}}return{center:e.Point.convert(ce.center||[0,0]),top:e.Point.convert(ce.top||[0,0]),"top-left":e.Point.convert(ce["top-left"]||[0,0]),"top-right":e.Point.convert(ce["top-right"]||[0,0]),bottom:e.Point.convert(ce.bottom||[0,0]),"bottom-left":e.Point.convert(ce["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(ce["bottom-right"]||[0,0]),left:e.Point.convert(ce.left||[0,0]),right:e.Point.convert(ce.right||[0,0])}}return nf(new e.Point(0,0))}var Sf={version:e.version,supported:c,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:qc,NavigationControl:_u,GeolocateControl:tf,AttributionControl:jo,ScaleControl:Gu,FullscreenControl:Wl,Popup:Mf,Marker:ic,Style:Io,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function pr(){fr().acquire(pt)},clearPrewarmedResources:function Jr(){var ce=Gt;ce&&(ce.isPreloaded()&&1===ce.numActive()?(ce.release(pt),Gt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(ce){e.config.ACCESS_TOKEN=ce},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(ce){e.config.API_URL=ce},get workerCount(){return Ct.workerCount},set workerCount(ce){Ct.workerCount=ce},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(ce){e.config.MAX_PARALLEL_IMAGE_REQUESTS=ce},clearStorage:function(Z){e.clearTileCache(Z)},workerUrl:""};return Sf}),m},"object"==typeof ae&&void 0!==ie?ie.exports=k():(_=_||self).mapboxgl=k()},{}],240:[function(v,ie,ae){"use strict";ie.exports=Math.log2||function(_){return Math.log(_)*Math.LOG2E}},{}],241:[function(v,ie,ae){"use strict";ie.exports=function k(m,E){E||(E=m,m=window);var e=0,c=0,d=0,n={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function i(y){var A=!1;return"altKey"in y&&(A=A||y.altKey!==n.alt,n.alt=!!y.altKey),"shiftKey"in y&&(A=A||y.shiftKey!==n.shift,n.shift=!!y.shiftKey),"ctrlKey"in y&&(A=A||y.ctrlKey!==n.control,n.control=!!y.ctrlKey),"metaKey"in y&&(A=A||y.metaKey!==n.meta,n.meta=!!y.metaKey),A}function a(y,A){var T=_.x(A),M=_.y(A);"buttons"in A&&(y=0|A.buttons),(y!==e||T!==c||M!==d||i(A))&&(e=0|y,c=T||0,d=M||0,E&&E(e,c,d,n))}function r(y){a(0,y)}function g(){(e||c||d||n.shift||n.alt||n.meta||n.control)&&(c=d=0,e=0,n.shift=n.alt=n.control=n.meta=!1,E&&E(0,0,0,n))}function s(y){i(y)&&E&&E(e,c,d,n)}function b(y){0===_.buttons(y)?a(0,y):a(e,y)}function x(y){a(e|_.buttons(y),y)}function S(y){a(e&~_.buttons(y),y)}function p(){t||(t=!0,m.addEventListener("mousemove",b),m.addEventListener("mousedown",x),m.addEventListener("mouseup",S),m.addEventListener("mouseleave",r),m.addEventListener("mouseenter",r),m.addEventListener("mouseout",r),m.addEventListener("mouseover",r),m.addEventListener("blur",g),m.addEventListener("keyup",s),m.addEventListener("keydown",s),m.addEventListener("keypress",s),m!==window&&(window.addEventListener("blur",g),window.addEventListener("keyup",s),window.addEventListener("keydown",s),window.addEventListener("keypress",s)))}p();var l={element:m};return Object.defineProperties(l,{enabled:{get:function(){return t},set:function(y){y?p():function w(){!t||(t=!1,m.removeEventListener("mousemove",b),m.removeEventListener("mousedown",x),m.removeEventListener("mouseup",S),m.removeEventListener("mouseleave",r),m.removeEventListener("mouseenter",r),m.removeEventListener("mouseout",r),m.removeEventListener("mouseover",r),m.removeEventListener("blur",g),m.removeEventListener("keyup",s),m.removeEventListener("keydown",s),m.removeEventListener("keypress",s),m!==window&&(window.removeEventListener("blur",g),window.removeEventListener("keyup",s),window.removeEventListener("keydown",s),window.removeEventListener("keypress",s)))}()},enumerable:!0},buttons:{get:function(){return e},enumerable:!0},x:{get:function(){return c},enumerable:!0},y:{get:function(){return d},enumerable:!0},mods:{get:function(){return n},enumerable:!0}}),l};var _=v("mouse-event")},{"mouse-event":243}],242:[function(v,ie,ae){var _={left:0,top:0};ie.exports=function k(E,e,c){e=e||E.currentTarget||E.srcElement,Array.isArray(c)||(c=[0,0]);var d=E.clientX||0,n=E.clientY||0,t=function m(E){return E===window||E===document||E===document.body?_:E.getBoundingClientRect()}(e);return c[0]=d-t.left,c[1]=n-t.top,c}},{}],243:[function(v,ie,ae){"use strict";function k(e){return e.target||e.srcElement||window}ae.buttons=function _(e){if("object"==typeof e){if("buttons"in e)return e.buttons;if("which"in e){if(2===(c=e.which))return 4;if(3===c)return 2;if(c>0)return 1<<c-1}else if("button"in e){var c;if(1===(c=e.button))return 4;if(2===c)return 2;if(c>=0)return 1<<c}}return 0},ae.element=k,ae.x=function m(e){if("object"==typeof e){if("offsetX"in e)return e.offsetX;var d=k(e).getBoundingClientRect();return e.clientX-d.left}return 0},ae.y=function E(e){if("object"==typeof e){if("offsetY"in e)return e.offsetY;var d=k(e).getBoundingClientRect();return e.clientY-d.top}return 0}},{}],244:[function(v,ie,ae){"use strict";var _=v("to-px");ie.exports=function k(m,E,e){"function"==typeof m&&(e=!!E,E=m,m=window);var c=_("ex",m),d=function(n){e&&n.preventDefault();var t=n.deltaX||0,i=n.deltaY||0,a=n.deltaZ||0,g=1;switch(n.deltaMode){case 1:g=c;break;case 2:g=window.innerHeight}if(i*=g,a*=g,(t*=g)||i||a)return E(t,i,a,n)};return m.addEventListener("wheel",d),d}},{"to-px":314}],245:[function(v,ie,ae){(function(_,k){(function(){var E,e,c;c=function(){"use strict";var E,e,c,d=Object.prototype.toString,n=void 0!==k?function(y){return k(y)}:setTimeout;try{Object.defineProperty({},"x",{}),E=function(y,A,T,M){return Object.defineProperty(y,A,{value:T,writable:!0,configurable:!1!==M})}}catch(l){E=function(A,T,M){return A[T]=M,A}}function t(l,y){c.add(l,y),e||(e=n(c.drain))}function i(l){var y,A=typeof l;return null!=l&&("object"==A||"function"==A)&&(y=l.then),"function"==typeof y&&y}function a(){for(var l=0;l<this.chain.length;l++)r(this,1===this.state?this.chain[l].success:this.chain[l].failure,this.chain[l]);this.chain.length=0}function r(l,y,A){var T,M;try{!1===y?A.reject(l.msg):(T=!0===y?l.msg:y.call(void 0,l.msg))===A.promise?A.reject(TypeError("Promise-chain cycle")):(M=i(T))?M.call(T,A.resolve,A.reject):A.resolve(T)}catch(f){A.reject(f)}}function g(l){var y,A=this;if(!A.triggered){A.triggered=!0,A.def&&(A=A.def);try{(y=i(l))?t(function(){var T=new x(A);try{y.call(l,function(){g.apply(T,arguments)},function(){s.apply(T,arguments)})}catch(M){s.call(T,M)}}):(A.msg=l,A.state=1,A.chain.length>0&&t(a,A))}catch(T){s.call(new x(A),T)}}}function s(l){var y=this;y.triggered||(y.triggered=!0,y.def&&(y=y.def),y.msg=l,y.state=2,y.chain.length>0&&t(a,y))}function b(l,y,A,T){for(var M=0;M<y.length;M++)!function(u){l.resolve(y[u]).then(function(o){A(u,o)},T)}(M)}function x(l){this.def=l,this.triggered=!1}function S(l){this.promise=l,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function p(l){if("function"!=typeof l)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var y=new S(this);this.then=function(T,M){var f={success:"function"!=typeof T||T,failure:"function"==typeof M&&M};return f.promise=new this.constructor(function(h,o){if("function"!=typeof h||"function"!=typeof o)throw TypeError("Not a function");f.resolve=h,f.reject=o}),y.chain.push(f),0!==y.state&&t(a,y),f.promise},this.catch=function(T){return this.then(void 0,T)};try{l.call(void 0,function(T){g.call(y,T)},function(T){s.call(y,T)})}catch(A){s.call(y,A)}}c=function(){var y,A,T;function M(f,u){this.fn=f,this.self=u,this.next=void 0}return{add:function(u,h){T=new M(u,h),A?A.next=T:y=T,A=T,T=void 0},drain:function(){var u=y;for(y=A=e=void 0;u;)u.fn.call(u.self),u=u.next}}}();var w=E({},"constructor",p,!1);return p.prototype=w,E(w,"__NPO__",0,!1),E(p,"resolve",function(y){return y&&"object"==typeof y&&1===y.__NPO__?y:new this(function(M,f){if("function"!=typeof M||"function"!=typeof f)throw TypeError("Not a function");M(y)})}),E(p,"reject",function(y){return new this(function(T,M){if("function"!=typeof T||"function"!=typeof M)throw TypeError("Not a function");M(y)})}),E(p,"all",function(y){var A=this;return"[object Array]"!=d.call(y)?A.reject(TypeError("Not an array")):0===y.length?A.resolve([]):new A(function(M,f){if("function"!=typeof M||"function"!=typeof f)throw TypeError("Not a function");var u=y.length,h=Array(u),o=0;b(A,y,function(R,z){h[R]=z,++o===u&&M(h)},f)})}),E(p,"race",function(y){var A=this;return"[object Array]"!=d.call(y)?A.reject(TypeError("Not an array")):new A(function(M,f){if("function"!=typeof M||"function"!=typeof f)throw TypeError("Not a function");b(A,y,function(h,o){M(o)},f)})}),p},(e=void 0!==_?_:this)[E="Promise"]=e[E]||c(),void 0!==ie&&ie.exports&&(ie.exports=e[E])}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},v("timers").setImmediate)},{timers:311}],246:[function(v,ie,ae){var _=Math.PI,k=n(120);function E(t,i,a,r){return["C",t,i,a,r,a,r]}function e(t,i,a,r,g,s){return["C",t/3+2/3*a,i/3+2/3*r,g/3+2/3*a,s/3+2/3*r,g,s]}function c(t,i,a,r,g,s,b,x,S,p){if(p)o=p[0],C=p[1],u=p[2],h=p[3];else{var w=d(t,i,-g);i=w.y;var l=((t=w.x)-(x=(w=d(x,S,-g)).x))/2,y=(i-(S=w.y))/2,A=l*l/(a*a)+y*y/(r*r);A>1&&(a*=A=Math.sqrt(A),r*=A);var T=a*a,M=r*r,f=(s==b?-1:1)*Math.sqrt(Math.abs((T*M-T*y*y-M*l*l)/(T*y*y+M*l*l)));f==1/0&&(f=1);var u=f*a*y/r+(t+x)/2,h=f*-r*l/a+(i+S)/2,o=Math.asin(((i-h)/r).toFixed(9)),C=Math.asin(((S-h)/r).toFixed(9));(o=t<u?_-o:o)<0&&(o=2*_+o),(C=x<u?_-C:C)<0&&(C=2*_+C),b&&o>C&&(o-=2*_),!b&&C>o&&(C-=2*_)}if(Math.abs(C-o)>k){var R=C,z=x,O=S;C=o+k*(b&&C>o?1:-1);var I=c(x=u+a*Math.cos(C),S=h+r*Math.sin(C),a,r,g,0,b,z,O,[C,R,u,h])}var F=Math.tan((C-o)/4),D=4/3*a*F,N=4/3*r*F,U=[2*t-(t+D*Math.sin(o)),2*i-(i-N*Math.cos(o)),x+D*Math.sin(C),S-N*Math.cos(C),x,S];if(p)return U;I&&(U=U.concat(I));for(var X=0;X<U.length;){var oe=d(U[X],U[X+1],g);U[X++]=oe.x,U[X++]=oe.y}return U}function d(t,i,a){return{x:t*Math.cos(a)-i*Math.sin(a),y:t*Math.sin(a)+i*Math.cos(a)}}function n(t){return t*(_/180)}ie.exports=function m(t){for(var i,a=[],r=0,g=0,s=0,b=0,x=null,S=null,p=0,w=0,l=0,y=t.length;l<y;l++){var A=t[l],T=A[0];switch(T){case"M":s=A[1],b=A[2];break;case"A":(A=c(p,w,A[1],A[2],n(A[3]),A[4],A[5],A[6],A[7])).unshift("C"),A.length>7&&(a.push(A.splice(0,7)),A.unshift("C"));break;case"S":var M=p,f=w;("C"==i||"S"==i)&&(M+=M-r,f+=f-g),A=["C",M,f,A[1],A[2],A[3],A[4]];break;case"T":"Q"==i||"T"==i?(x=2*p-x,S=2*w-S):(x=p,S=w),A=e(p,w,x,S,A[1],A[2]);break;case"Q":x=A[1],S=A[2],A=e(p,w,A[1],A[2],A[3],A[4]);break;case"L":A=E(p,w,A[1],A[2]);break;case"H":A=E(p,w,A[1],w);break;case"V":A=E(p,w,p,A[1]);break;case"Z":A=E(p,w,s,b)}i=T,p=A[A.length-2],w=A[A.length-1],A.length>4?(r=A[A.length-4],g=A[A.length-3]):(r=p,g=w),a.push(A)}return a}},{}],247:[function(v,ie,ae){"use strict";var _=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;function E(c){if(null==c)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(c)}ie.exports=function e(){try{if(!Object.assign)return!1;var c=new String("abc");if(c[5]="de","5"===Object.getOwnPropertyNames(c)[0])return!1;for(var d={},n=0;n<10;n++)d["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(d).map(function(a){return d[a]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(a){i[a]=a}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(a){return!1}}()?Object.assign:function(c,d){for(var n,i,t=E(c),a=1;a<arguments.length;a++){for(var r in n=Object(arguments[a]))k.call(n,r)&&(t[r]=n[r]);if(_){i=_(n);for(var g=0;g<i.length;g++)m.call(n,i[g])&&(t[i[g]]=n[i[g]])}}return t}},{}],248:[function(v,ie,ae){"use strict";function _(E,e){if("string"!=typeof E)return[E];var c=[E];"string"==typeof e||Array.isArray(e)?e={brackets:e}:e||(e={});var d=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],n=e.escape||"___",t=!!e.flat;d.forEach(function(r){var g=new RegExp(["\\",r[0],"[^\\",r[0],"\\",r[1],"]*\\",r[1]].join("")),s=[];function b(x,S,p){var w=c.push(x.slice(r[0].length,-r[1].length))-1;return s.push(w),n+w+n}c.forEach(function(x,S){for(var p,w=0;x!=p;)if(p=x,x=x.replace(g,b),w++>1e4)throw Error("References have circular dependency. Please, check them.");c[S]=x}),s=s.reverse(),c=c.map(function(x){return s.forEach(function(S){x=x.replace(new RegExp("(\\"+n+S+"\\"+n+")","g"),r[0]+"$1"+r[1])}),x})});var i=new RegExp("\\"+n+"([0-9]+)\\"+n);return t?c:function a(r,g,s){for(var x,b=[],S=0;x=i.exec(r);){if(S++>1e4)throw Error("Circular references in parenthesis");b.push(r.slice(0,x.index)),b.push(a(g[x[1]],g)),r=r.slice(x.index+x[0].length)}return b.push(r),b}(c[0],c)}function k(E,e){if(e&&e.flat){var n,c=e&&e.escape||"___",d=E[0];if(!d)return"";for(var t=new RegExp("\\"+c+"([0-9]+)\\"+c),i=0;d!=n;){if(i++>1e4)throw Error("Circular references in "+E);n=d,d=d.replace(t,a)}return d}return E.reduce(function r(g,s){return Array.isArray(s)&&(s=s.reduce(r,"")),g+s},"");function a(r,g){if(null==E[g])throw Error("Reference "+g+"is undefined");return E[g]}}function m(E,e){return Array.isArray(E)?k(E,e):_(E,e)}m.parse=_,m.stringify=k,ie.exports=m},{}],249:[function(v,ie,ae){"use strict";var _=v("pick-by-alias");ie.exports=function k(m){var E;return arguments.length>1&&(m=arguments),"string"==typeof m?m=m.split(/\s/).map(parseFloat):"number"==typeof m&&(m=[m]),m.length&&"number"==typeof m[0]?E=1===m.length?{width:m[0],height:m[0],x:0,y:0}:2===m.length?{width:m[0],height:m[1],x:0,y:0}:{x:m[0],y:m[1],width:m[2]-m[0]||0,height:m[3]-m[1]||0}:m&&((E={x:(m=_(m,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:m.top||0}).width=null==m.width?m.right?m.right-E.x:0:m.width,E.height=null==m.height?m.bottom?m.bottom-E.y:0:m.height),E}},{"pick-by-alias":253}],250:[function(v,ie,ae){ie.exports=function m(c){var d=[];return c.replace(k,function(n,t,i){var a=t.toLowerCase();for(i=function e(c){var d=c.match(E);return d?d.map(Number):[]}(i),"m"==a&&i.length>2&&(d.push([t].concat(i.splice(0,2))),a="l",t="m"==t?"l":"L");;){if(i.length==_[a])return i.unshift(t),d.push(i);if(i.length<_[a])throw new Error("malformed path data");d.push([t].concat(i.splice(0,_[a])))}}),d};var _={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},k=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var E=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],251:[function(v,ie,ae){ie.exports=function(k,m){m||(m=[0,""]),k=String(k);var E=parseFloat(k,10);return m[0]=E,m[1]=k.match(/[\d.\-\+]*\s*(.*)/)[1]||"",m}},{}],252:[function(v,ie,ae){(function(_){(function(){(function(){var k,m,E,e,c,d;"undefined"!=typeof performance&&null!==performance&&performance.now?ie.exports=function(){return performance.now()}:null!=_&&_.hrtime?(ie.exports=function(){return(k()-c)/1e6},m=_.hrtime,e=(k=function(){var n;return 1e9*(n=m())[0]+n[1]})(),d=1e9*_.uptime(),c=e-d):Date.now?(ie.exports=function(){return Date.now()-E},E=Date.now()):(ie.exports=function(){return(new Date).getTime()-E},E=(new Date).getTime())}).call(this)}).call(this)}).call(this,v("_process"))},{_process:277}],253:[function(v,ie,ae){"use strict";ie.exports=function(E,e,c){var n,t,d={};if("string"==typeof e&&(e=k(e)),Array.isArray(e)){var i={};for(t=0;t<e.length;t++)i[e[t]]=!0;e=i}for(n in e)e[n]=k(e[n]);var a={};for(n in e){var r=e[n];if(Array.isArray(r))for(t=0;t<r.length;t++){var g=r[t];if(c&&(a[g]=!0),g in E){if(d[n]=E[g],c)for(var s=t;s<r.length;s++)a[r[s]]=!0;break}}else n in E&&(e[n]&&(d[n]=E[n]),c&&(a[n]=!0))}if(c)for(n in E)a[n]||(d[n]=E[n]);return d};var _={};function k(m){return _[m]?_[m]:("string"==typeof m&&(m=_[m]=m.split(/\s*,\s*|\s+/)),m)}},{}],254:[function(v,ie,ae){var t,_=v("./lib/build-log"),k=v("./lib/epsilon"),m=v("./lib/intersecter"),E=v("./lib/segment-chainer"),e=v("./lib/segment-selector"),c=v("./lib/geojson"),d=!1,n=k();function i(a,r,g){var s=t.segments(a),b=t.segments(r),S=g(t.combine(s,b));return t.polygon(S)}t={buildLog:function(a){return!0===a?d=_():!1===a&&(d=!1),!1!==d&&d.list},epsilon:function(a){return n.epsilon(a)},segments:function(a){var r=m(!0,n,d);return a.regions.forEach(r.addRegion),{segments:r.calculate(a.inverted),inverted:a.inverted}},combine:function(a,r){return{combined:m(!1,n,d).calculate(a.segments,a.inverted,r.segments,r.inverted),inverted1:a.inverted,inverted2:r.inverted}},selectUnion:function(a){return{segments:e.union(a.combined,d),inverted:a.inverted1||a.inverted2}},selectIntersect:function(a){return{segments:e.intersect(a.combined,d),inverted:a.inverted1&&a.inverted2}},selectDifference:function(a){return{segments:e.difference(a.combined,d),inverted:a.inverted1&&!a.inverted2}},selectDifferenceRev:function(a){return{segments:e.differenceRev(a.combined,d),inverted:!a.inverted1&&a.inverted2}},selectXor:function(a){return{segments:e.xor(a.combined,d),inverted:a.inverted1!==a.inverted2}},polygon:function(a){return{regions:E(a.segments,n,d),inverted:a.inverted}},polygonFromGeoJSON:function(a){return c.toPolygon(t,a)},polygonToGeoJSON:function(a){return c.fromPolygon(t,n,a)},union:function(a,r){return i(a,r,t.selectUnion)},intersect:function(a,r){return i(a,r,t.selectIntersect)},difference:function(a,r){return i(a,r,t.selectDifference)},differenceRev:function(a,r){return i(a,r,t.selectDifferenceRev)},xor:function(a,r){return i(a,r,t.selectXor)}},"object"==typeof window&&(window.PolyBool=t),ie.exports=t},{"./lib/build-log":255,"./lib/epsilon":256,"./lib/geojson":257,"./lib/intersecter":258,"./lib/segment-chainer":260,"./lib/segment-selector":261}],255:[function(v,ie,ae){ie.exports=function _(){var k,m=0,E=!1;function e(c,d){return k.list.push({type:c,data:d?JSON.parse(JSON.stringify(d)):void 0}),k}return k={list:[],segmentId:function(){return m++},checkIntersection:function(c,d){return e("check",{seg1:c,seg2:d})},segmentChop:function(c,d){return e("div_seg",{seg:c,pt:d}),e("chop",{seg:c,pt:d})},statusRemove:function(c){return e("pop_seg",{seg:c})},segmentUpdate:function(c){return e("seg_update",{seg:c})},segmentNew:function(c,d){return e("new_seg",{seg:c,primary:d})},segmentRemove:function(c){return e("rem_seg",{seg:c})},tempStatus:function(c,d,n){return e("temp_status",{seg:c,above:d,below:n})},rewind:function(c){return e("rewind",{seg:c})},status:function(c,d,n){return e("status",{seg:c,above:d,below:n})},vert:function(c){return c===E?k:(E=c,e("vert",{x:c}))},log:function(c){return"string"!=typeof c&&(c=JSON.stringify(c,!1,"  ")),e("log",{txt:c})},reset:function(){return e("reset")},selected:function(c){return e("selected",{segs:c})},chainStart:function(c){return e("chain_start",{seg:c})},chainRemoveHead:function(c,d){return e("chain_rem_head",{index:c,pt:d})},chainRemoveTail:function(c,d){return e("chain_rem_tail",{index:c,pt:d})},chainNew:function(c,d){return e("chain_new",{pt1:c,pt2:d})},chainMatch:function(c){return e("chain_match",{index:c})},chainClose:function(c){return e("chain_close",{index:c})},chainAddHead:function(c,d){return e("chain_add_head",{index:c,pt:d})},chainAddTail:function(c,d){return e("chain_add_tail",{index:c,pt:d})},chainConnect:function(c,d){return e("chain_con",{index1:c,index2:d})},chainReverse:function(c){return e("chain_rev",{index:c})},chainJoin:function(c,d){return e("chain_join",{index1:c,index2:d})},done:function(){return e("done")}}}},{}],256:[function(v,ie,ae){ie.exports=function _(k){"number"!=typeof k&&(k=1e-10);var m={epsilon:function(E){return"number"==typeof E&&(k=E),k},pointAboveOrOnLine:function(E,e,c){var d=e[0],n=e[1];return(c[0]-d)*(E[1]-n)-(c[1]-n)*(E[0]-d)>=-k},pointBetween:function(E,e,c){var n=c[0]-e[0],i=c[1]-e[1],a=(E[0]-e[0])*n+(E[1]-e[1])*i;return!(a<k||a-(n*n+i*i)>-k)},pointsSameX:function(E,e){return Math.abs(E[0]-e[0])<k},pointsSameY:function(E,e){return Math.abs(E[1]-e[1])<k},pointsSame:function(E,e){return m.pointsSameX(E,e)&&m.pointsSameY(E,e)},pointsCompare:function(E,e){return m.pointsSameX(E,e)?m.pointsSameY(E,e)?0:E[1]<e[1]?-1:1:E[0]<e[0]?-1:1},pointsCollinear:function(E,e,c){return Math.abs((E[0]-e[0])*(e[1]-c[1])-(e[0]-c[0])*(E[1]-e[1]))<k},linesIntersect:function(E,e,c,d){var n=e[0]-E[0],t=e[1]-E[1],i=d[0]-c[0],a=d[1]-c[1],r=n*a-t*i;if(Math.abs(r)<k)return!1;var g=E[0]-c[0],s=E[1]-c[1],b=(i*s-a*g)/r,x=(n*s-t*g)/r,S={alongA:0,alongB:0,pt:[E[0]+b*n,E[1]+b*t]};return S.alongA=b<=-k?-2:b<k?-1:b-1<=-k?0:b-1<k?1:2,S.alongB=x<=-k?-2:x<k?-1:x-1<=-k?0:x-1<k?1:2,S},pointInsideRegion:function(E,e){for(var c=E[0],d=E[1],n=e[e.length-1][0],t=e[e.length-1][1],i=!1,a=0;a<e.length;a++){var r=e[a][0],g=e[a][1];g-d>k!=t-d>k&&(n-r)*(d-g)/(t-g)+r-c>k&&(i=!i),n=r,t=g}return i}};return m}},{}],257:[function(v,ie,ae){ie.exports={toPolygon:function(k,m){function E(d){if(d.length<=0)return k.segments({inverted:!1,regions:[]});function n(a){var r=a.slice(0,a.length-1);return k.segments({inverted:!1,regions:[r]})}for(var t=n(d[0]),i=1;i<d.length;i++)t=k.selectDifference(k.combine(t,n(d[i])));return t}if("Polygon"===m.type)return k.polygon(E(m.coordinates));if("MultiPolygon"===m.type){for(var e=k.segments({inverted:!1,regions:[]}),c=0;c<m.coordinates.length;c++)e=k.selectUnion(k.combine(e,E(m.coordinates[c])));return k.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(k,m,E){function e(b,x){return m.pointInsideRegion([.5*(b[0][0]+b[1][0]),.5*(b[0][1]+b[1][1])],x)}function c(b){return{region:b,children:[]}}E=k.polygon(k.segments(E));var d=c(null);function n(b,x){for(var S=0;S<b.children.length;S++)if(e(x,(p=b.children[S]).region))return void n(p,x);var w=c(x);for(S=0;S<b.children.length;S++){var p;e((p=b.children[S]).region,x)&&(w.children.push(p),b.children.splice(S,1),S--)}b.children.push(w)}for(var t=0;t<E.regions.length;t++){var i=E.regions[t];i.length<3||n(d,i)}function a(b,x){for(var S=0,p=b[b.length-1][0],w=b[b.length-1][1],l=[],y=0;y<b.length;y++){var A=b[y][0],T=b[y][1];l.push([A,T]),S+=T*p-A*w,p=A,w=T}return S<0!==x&&l.reverse(),l.push([l[0][0],l[0][1]]),l}var r=[];function g(b){var x=[a(b.region,!1)];r.push(x);for(var S=0;S<b.children.length;S++)x.push(s(b.children[S]))}function s(b){for(var x=0;x<b.children.length;x++)g(b.children[x]);return a(b.region,!0)}for(t=0;t<d.children.length;t++)g(d.children[t]);return r.length<=0?{type:"Polygon",coordinates:[]}:1==r.length?{type:"Polygon",coordinates:r[0]}:{type:"MultiPolygon",coordinates:r}}}},{}],258:[function(v,ie,ae){var _=v("./linked-list");ie.exports=function k(m,E,e){function c(S,p){return{id:e?e.segmentId():-1,start:S,end:p,myFill:{above:null,below:null},otherFill:null}}function d(S,p,w){return{id:e?e.segmentId():-1,start:S,end:p,myFill:{above:w.myFill.above,below:w.myFill.below},otherFill:null}}var n=_.create();function i(S,p){n.insertBefore(S,function(w){return function t(S,p,w,l,y,A){var T=E.pointsCompare(p,y);return 0!==T?T:E.pointsSame(w,A)?0:S!==l?S?1:-1:E.pointAboveOrOnLine(w,l?y:A,l?A:y)?1:-1}(S.isStart,S.pt,p,w.isStart,w.pt,w.other.pt)<0})}function g(S,p){var w=function a(S,p){var w=_.node({isStart:!0,pt:S.start,seg:S,primary:p,other:null,status:null});return i(w,S.end),w}(S,p);return function r(S,p,w){var l=_.node({isStart:!1,pt:p.end,seg:p,primary:w,other:S,status:null});S.other=l,i(l,S.pt)}(w,S,p),w}function b(S,p){var w=d(p,S.seg.end,S.seg);return function s(S,p){e&&e.segmentChop(S.seg,p),S.other.remove(),S.seg.end=p,S.other.pt=p,i(S.other,S.pt)}(S,p),g(w,S.primary)}function x(S,p){var w=_.create();function y(F){return w.findTransition(function(D){return function l(F,D){var N=F.seg.start,U=F.seg.end,X=D.seg.start,oe=D.seg.end;return E.pointsCollinear(N,X,oe)?E.pointsCollinear(U,X,oe)||E.pointAboveOrOnLine(U,X,oe)?1:-1:E.pointAboveOrOnLine(N,X,oe)?1:-1}(F,D.ev)>0})}function A(F,D){var N=F.seg,U=D.seg,X=N.start,oe=N.end,se=U.start,ne=U.end;e&&e.checkIntersection(N,U);var W=E.linesIntersect(X,oe,se,ne);if(!1===W){if(!E.pointsCollinear(X,oe,se)||E.pointsSame(X,ne)||E.pointsSame(oe,se))return!1;var G=E.pointsSame(X,se),$=E.pointsSame(oe,ne);if(G&&$)return D;var V=!G&&E.pointBetween(X,se,ne),H=!$&&E.pointBetween(oe,se,ne);if(G)return H?b(D,oe):b(F,ne),D;V&&($||(H?b(D,oe):b(F,ne)),b(D,X))}else 0===W.alongA&&(-1===W.alongB?b(F,se):0===W.alongB?b(F,W.pt):1===W.alongB&&b(F,ne)),0===W.alongB&&(-1===W.alongA?b(D,X):0===W.alongA?b(D,W.pt):1===W.alongA&&b(D,oe));return!1}for(var T=[];!n.isEmpty();){var M=n.getHead();if(e&&e.vert(M.pt[0]),M.isStart){let F=function(){if(u){var D=A(M,u);if(D)return D}return!!h&&A(M,h)};e&&e.segmentNew(M.seg,M.primary);var f=y(M),u=f.before?f.before.ev:null,h=f.after?f.after.ev:null;e&&e.tempStatus(M.seg,!!u&&u.seg,!!h&&h.seg);var C,o=F();if(o&&(m?(C=null===M.seg.myFill.below||M.seg.myFill.above!==M.seg.myFill.below)&&(o.seg.myFill.above=!o.seg.myFill.above):o.seg.otherFill=M.seg.myFill,e&&e.segmentUpdate(o.seg),M.other.remove(),M.remove()),n.getHead()!==M){e&&e.rewind(M.seg);continue}if(m)C=null===M.seg.myFill.below||M.seg.myFill.above!==M.seg.myFill.below,M.seg.myFill.below=h?h.seg.myFill.above:S,M.seg.myFill.above=C?!M.seg.myFill.below:M.seg.myFill.below;else if(null===M.seg.otherFill){var R;M.seg.otherFill={above:R=h?M.primary===h.primary?h.seg.otherFill.above:h.seg.myFill.above:M.primary?p:S,below:R}}e&&e.status(M.seg,!!u&&u.seg,!!h&&h.seg),M.other.status=f.insert(_.node({ev:M}))}else{var z=M.status;if(null===z)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(w.exists(z.prev)&&w.exists(z.next)&&A(z.prev.ev,z.next.ev),e&&e.statusRemove(z.ev.seg),z.remove(),!M.primary){var O=M.seg.myFill;M.seg.myFill=M.seg.otherFill,M.seg.otherFill=O}T.push(M.seg)}n.getHead().remove()}return e&&e.done(),T}return m?{addRegion:function(S){for(var p,w=S[S.length-1],l=0;l<S.length;l++){var y=E.pointsCompare(p=w,w=S[l]);0!==y&&g(c(y<0?p:w,y<0?w:p),!0)}},calculate:function(S){return x(S,!1)}}:{calculate:function(S,p,w,l){return S.forEach(function(y){g(d(y.start,y.end,y),!0)}),w.forEach(function(y){g(d(y.start,y.end,y),!1)}),x(p,l)}}}},{"./linked-list":259}],259:[function(v,ie,ae){ie.exports={create:function(){var k={root:{root:!0,next:null},exists:function(m){return!(null===m||m===k.root)},isEmpty:function(){return null===k.root.next},getHead:function(){return k.root.next},insertBefore:function(m,E){for(var e=k.root,c=k.root.next;null!==c;){if(E(c))return m.prev=c.prev,m.next=c,c.prev.next=m,void(c.prev=m);e=c,c=c.next}e.next=m,m.prev=e,m.next=null},findTransition:function(m){for(var E=k.root,e=k.root.next;null!==e&&!m(e);)E=e,e=e.next;return{before:E===k.root?null:E,after:e,insert:function(c){return c.prev=E,c.next=e,E.next=c,null!==e&&(e.prev=c),c}}}};return k},node:function(k){return k.prev=null,k.next=null,k.remove=function(){k.prev.next=k.next,k.next&&(k.next.prev=k.prev),k.prev=null,k.next=null},k}}},{}],260:[function(v,ie,ae){ie.exports=function _(k,m,E){var e=[],c=[];return k.forEach(function(d){var n=d.start,t=d.end;if(m.pointsSame(n,t))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{E&&E.chainStart(d);for(var i={index:0,matches_head:!1,matches_pt1:!1},a={index:0,matches_head:!1,matches_pt1:!1},r=i,s=0;s<e.length;s++){var x=(b=e[s])[0],p=b[b.length-1];if(m.pointsSame(x,n)){if(g(s,!0,!0))break}else if(m.pointsSame(x,t)){if(g(s,!0,!1))break}else if(m.pointsSame(p,n)){if(g(s,!1,!0))break}else if(m.pointsSame(p,t)&&g(s,!1,!1))break}if(r===i)return e.push([n,t]),void(E&&E.chainNew(n,t));if(r===a){E&&E.chainMatch(i.index);var l=i.index,y=i.matches_pt1?t:n,A=i.matches_head,b=e[l],T=A?b[0]:b[b.length-1],M=A?b[1]:b[b.length-2],f=A?b[b.length-1]:b[0],u=A?b[b.length-2]:b[1];return m.pointsCollinear(M,T,y)&&(A?(E&&E.chainRemoveHead(i.index,y),b.shift()):(E&&E.chainRemoveTail(i.index,y),b.pop()),T=M),m.pointsSame(f,y)?(e.splice(l,1),m.pointsCollinear(u,f,T)&&(A?(E&&E.chainRemoveTail(i.index,T),b.pop()):(E&&E.chainRemoveHead(i.index,T),b.shift())),E&&E.chainClose(i.index),void c.push(b)):void(A?(E&&E.chainAddHead(i.index,y),b.unshift(y)):(E&&E.chainAddTail(i.index,y),b.push(y)))}var C=i.index,R=a.index;E&&E.chainConnect(C,R);var z=e[C].length<e[R].length;i.matches_head?a.matches_head?z?(h(C),o(C,R)):(h(R),o(R,C)):o(R,C):a.matches_head?o(C,R):z?(h(C),o(R,C)):(h(R),o(C,R))}function g(O,I,F){return r.index=O,r.matches_head=I,r.matches_pt1=F,r===i?(r=a,!1):(r=null,!0)}function h(O){E&&E.chainReverse(O),e[O].reverse()}function o(O,I){var F=e[O],D=e[I],N=F[F.length-1],U=F[F.length-2],X=D[0],oe=D[1];m.pointsCollinear(U,N,X)&&(E&&E.chainRemoveTail(O,N),F.pop(),N=U),m.pointsCollinear(N,X,oe)&&(E&&E.chainRemoveHead(I,X),D.shift()),E&&E.chainJoin(O,I),e[O]=F.concat(D),e.splice(I,1)}}),c}},{}],261:[function(v,ie,ae){function _(m,E,e){var c=[];return m.forEach(function(d){var n=(d.myFill.above?8:0)+(d.myFill.below?4:0)+(d.otherFill&&d.otherFill.above?2:0)+(d.otherFill&&d.otherFill.below?1:0);0!==E[n]&&c.push({id:e?e.segmentId():-1,start:d.start,end:d.end,myFill:{above:1===E[n],below:2===E[n]},otherFill:null})}),e&&e.selected(c),c}ie.exports={union:function(m,E){return _(m,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],E)},intersect:function(m,E){return _(m,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],E)},difference:function(m,E){return _(m,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],E)},differenceRev:function(m,E){return _(m,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],E)},xor:function(m,E){return _(m,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],E)}}},{}],262:[function(v,ie,ae){"use strict";var _=v("stream").Transform,k=v("stream-parser");function m(){_.call(this,{readableObjectMode:!0})}function E(e,c,d){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name=this.constructor.name,this.message=e,c&&(this.code=c),d&&(this.statusCode=d)}(m.prototype=Object.create(_.prototype)).constructor=m,k(m.prototype),ae.ParserStream=m,ae.sliceEq=function(e,c,d){for(var n=c,t=0;t<d.length;)if(e[n++]!==d[t++])return!1;return!0},ae.str2arr=function(e,c){var d=[],n=0;if(c&&"hex"===c)for(;n<e.length;)d.push(parseInt(e.slice(n,n+2),16)),n+=2;else for(;n<e.length;n++)d.push(255&e.charCodeAt(n));return d},ae.readUInt16LE=function(e,c){return e[c]|e[c+1]<<8},ae.readUInt16BE=function(e,c){return e[c+1]|e[c]<<8},ae.readUInt32LE=function(e,c){return e[c]|e[c+1]<<8|e[c+2]<<16|16777216*e[c+3]},ae.readUInt32BE=function(e,c){return e[c+3]|e[c+2]<<8|e[c+1]<<16|16777216*e[c]},(E.prototype=Object.create(Error.prototype)).constructor=E,ae.ProbeError=E},{stream:285,"stream-parser":301}],263:[function(v,ie,ae){"use strict";function _(E,e){var c=new Error(E);return c.code=e,c}function k(E){try{return decodeURIComponent(escape(E))}catch(e){return E}}function m(E,e,c){this.input=E.subarray(e,c),this.start=e;var d=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==d&&"MM\0*"!==d)throw _("invalid TIFF signature","EBADDATA");this.big_endian="M"===d[0]}m.prototype.each=function(E){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var c=this.ifds_to_read.shift();!c.offset||this.scan_ifd(c.id,c.offset,E)}},m.prototype.read_uint16=function(E){var e=this.input;if(E+2>e.length)throw _("unexpected EOF","EBADDATA");return this.big_endian?256*e[E]+e[E+1]:e[E]+256*e[E+1]},m.prototype.read_uint32=function(E){var e=this.input;if(E+4>e.length)throw _("unexpected EOF","EBADDATA");return this.big_endian?16777216*e[E]+65536*e[E+1]+256*e[E+2]+e[E+3]:e[E]+256*e[E+1]+65536*e[E+2]+16777216*e[E+3]},m.prototype.is_subifd_link=function(E,e){return 0===E&&34665===e||0===E&&34853===e||34665===E&&40965===e},m.prototype.exif_format_length=function(E){switch(E){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},m.prototype.exif_format_read=function(E,e){var c;switch(E){case 1:case 2:return this.input[e];case 6:return(c=this.input[e])|33554430*(128&c);case 3:return this.read_uint16(e);case 8:return(c=this.read_uint16(e))|131070*(32768&c);case 4:return this.read_uint32(e);case 9:return 0|this.read_uint32(e);default:return null}},m.prototype.scan_ifd=function(E,e,c){var d=this.read_uint16(e);e+=2;for(var n=0;n<d;n++){var t=this.read_uint16(e),i=this.read_uint16(e+2),a=this.read_uint32(e+4),r=this.exif_format_length(i),g=a*r,s=g<=4?e+8:this.read_uint32(e+8),b=!1;if(s+g>this.input.length)throw _("unexpected EOF","EBADDATA");for(var x=[],S=s,p=0;p<a;p++,S+=r){var w=this.exif_format_read(i,S);if(null===w){x=null;break}x.push(w)}if(Array.isArray(x)&&2===i&&(x=k(String.fromCharCode.apply(null,x)))&&"\0"===x[x.length-1]&&(x=x.slice(0,-1)),this.is_subifd_link(E,t)&&Array.isArray(x)&&Number.isInteger(x[0])&&x[0]>0&&(this.ifds_to_read.push({id:t,offset:x[0]}),b=!0),!1===c({is_big_endian:this.big_endian,ifd:E,tag:t,format:i,count:a,entry_offset:e+this.start,data_length:g,data_offset:s+this.start,value:x,is_subifd_link:b}))return void(this.aborted=!0);e+=12}0===E&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},ie.exports.ExifParser=m,ie.exports.get_orientation=function(E){var e=0;try{return new m(E,0,E.length).each(function(c){if(0===c.ifd&&274===c.tag&&Array.isArray(c.value))return e=c.value[0],!1}),e}catch(c){return-1}}},{}],264:[function(v,ie,ae){"use strict";var _=v("./common").readUInt16BE,k=v("./common").readUInt32BE;function m(a,r){if(a.length<4+r)return null;var g=k(a,r);return a.length<g+r||g<8?null:{boxtype:String.fromCharCode.apply(null,a.slice(r+4,r+8)),data:a.slice(r+8,r+g),end:r+g}}function E(a,r){for(var g=0;;){var s=m(a,g);if(!s)break;switch(s.boxtype){case"ispe":r.sizes.push({width:k(s.data,4),height:k(s.data,8)});break;case"irot":r.transforms.push({type:"irot",value:3&s.data[0]});break;case"imir":r.transforms.push({type:"imir",value:1&s.data[0]})}g=s.end}}function e(a,r,g){for(var s=0,b=0;b<g;b++)s=256*s+(a[r+b]||0);return s}function c(a,r){for(var g=a[4]>>4&15,s=15&a[4],b=a[5]>>4&15,x=_(a,6),S=8,p=0;p<x;p++){var w=_(a,S),l=_(a,S+=2),y=e(a,S+=2,b),A=_(a,S+=b);if(S+=2,0===l&&1===A){var T=e(a,S,g),M=e(a,S+g,s);r.item_loc[w]={length:M,offset:T+y}}S+=A*(g+s)}}function d(a,r){for(var g=_(a,4),s=6,b=0;b<g;b++){var x=m(a,s);if(!x)break;if("infe"===x.boxtype){for(var S=_(x.data,4),p="",w=8;w<x.data.length&&x.data[w];w++)p+=String.fromCharCode(x.data[w]);r.item_inf[p]=S}s=x.end}}function n(a,r){for(var g=0;;){var s=m(a,g);if(!s)break;"ipco"===s.boxtype&&E(s.data,r),g=s.end}}ie.exports.unbox=m,ie.exports.readSizeFromMeta=function(a){var r={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function t(a,r){for(var g=4;;){var s=m(a,g);if(!s)break;"iprp"===s.boxtype&&n(s.data,r),"iloc"===s.boxtype&&c(s.data,r),"iinf"===s.boxtype&&d(s.data,r),g=s.end}}(a,r),r.sizes.length){var g=function i(a){var r=a.reduce(function(b,x){return b.width>x.width||b.width===x.width&&b.height>x.height?b:x}),g=a.reduce(function(b,x){return b.height>x.height||b.height===x.height&&b.width>x.width?b:x});return r.width>g.height||r.width===g.height&&r.height>g.width?r:g}(r.sizes),s=1;r.transforms.forEach(function(x){var S={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},p={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===x.type&&(s=0===x.value?p[s]:S[s=S[s=p[s]]]),"irot"===x.type)for(var w=0;w<x.value;w++)s=S[s]});var b=null;return r.item_inf.Exif&&(b=r.item_loc[r.item_inf.Exif]),{width:g.width,height:g.height,orientation:r.transforms.length?s:null,variants:r.sizes,exif_location:b}}},ie.exports.getMimeType=function(a){var r=String.fromCharCode.apply(null,a.slice(0,4)),g={};g[r]=!0;for(var s=8;s<a.length;s+=4)g[String.fromCharCode.apply(null,a.slice(s,s+4))]=!0;if(g.mif1||g.msf1||g.miaf)return"avif"===r||"avis"===r||"avio"===r?{type:"avif",mime:"image/avif"}:"heic"===r||"heix"===r?{type:"heic",mime:"image/heic"}:"hevc"===r||"hevx"===r?{type:"heic",mime:"image/heic-sequence"}:g.avif||g.avis?{type:"avif",mime:"image/avif"}:g.heic||g.heix||g.hevc||g.hevx||g.heis?g.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":262}],265:[function(v,ie,ae){"use strict";var _=v("../common").str2arr,k=v("../common").sliceEq,m=v("../common").readUInt32BE,E=v("../miaf_utils"),e=v("../exif_utils"),c=_("ftyp");ie.exports=function(d){if(k(d,4,c)){var n=E.unbox(d,0);if(n){var t=E.getMimeType(n.data);if(t){for(var i,a=n.end;;){var r=E.unbox(d,a);if(!r)break;if(a=r.end,"mdat"===r.boxtype)return;if("meta"===r.boxtype){i=r.data;break}}if(i){var g=E.readSizeFromMeta(i);if(g){var s={width:g.width,height:g.height,type:t.type,mime:t.mime,wUnits:"px",hUnits:"px"};if(g.variants.length>1&&(s.variants=g.variants),g.orientation&&(s.orientation=g.orientation),g.exif_location&&g.exif_location.offset+g.exif_location.length<=d.length){var b=m(d,g.exif_location.offset),x=d.slice(g.exif_location.offset+b+4,g.exif_location.offset+g.exif_location.length),S=e.get_orientation(x);S>0&&(s.orientation=S)}return s}}}}}}},{"../common":262,"../exif_utils":263,"../miaf_utils":264}],266:[function(v,ie,ae){"use strict";var _=v("../common").str2arr,k=v("../common").sliceEq,m=v("../common").readUInt16LE,E=_("BM");ie.exports=function(e){if(!(e.length<26)&&k(e,0,E))return{width:m(e,18),height:m(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":262}],267:[function(v,ie,ae){"use strict";var _=v("../common").str2arr,k=v("../common").sliceEq,m=v("../common").readUInt16LE,E=_("GIF87a"),e=_("GIF89a");ie.exports=function(c){if(!(c.length<10)&&(k(c,0,E)||k(c,0,e)))return{width:m(c,6),height:m(c,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":262}],268:[function(v,ie,ae){"use strict";var _=v("../common").readUInt16LE;ie.exports=function(e){var c=_(e,0),d=_(e,2),n=_(e,4);if(0===c&&1===d&&n){for(var t=[],i={width:0,height:0},a=0;a<n;a++){var r=e[6+16*a]||256,g=e[6+16*a+1]||256,s={width:r,height:g};t.push(s),(r>i.width||g>i.height)&&(i=s)}return{width:i.width,height:i.height,variants:t,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":262}],269:[function(v,ie,ae){"use strict";var _=v("../common").readUInt16BE,k=v("../common").str2arr,m=v("../common").sliceEq,E=v("../exif_utils"),e=k("Exif\0\0");ie.exports=function(c){if(!(c.length<2)&&255===c[0]&&216===c[1]&&255===c[2])for(var d=2;;){for(;;){if(c.length-d<2)return;if(255===c[d++])break}for(var t,n=c[d++];255===n;)n=c[d++];if(208<=n&&n<=217||1===n)t=0;else{if(!(192<=n&&n<=254))return;if(c.length-d<2)return;t=_(c,d)-2,d+=2}if(217===n||218===n)return;var i;if(225===n&&t>=10&&m(c,d,e)&&(i=E.get_orientation(c.slice(d+6,d+t))),t>=5&&192<=n&&n<=207&&196!==n&&200!==n&&204!==n){if(c.length-d<t)return;var a={width:_(c,d+3),height:_(c,d+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return i>0&&(a.orientation=i),a}d+=t}}},{"../common":262,"../exif_utils":263}],270:[function(v,ie,ae){"use strict";var _=v("../common").str2arr,k=v("../common").sliceEq,m=v("../common").readUInt32BE,E=_("\x89PNG\r\n\x1a\n"),e=_("IHDR");ie.exports=function(c){if(!(c.length<24)&&k(c,0,E)&&k(c,12,e))return{width:m(c,16),height:m(c,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":262}],271:[function(v,ie,ae){"use strict";var _=v("../common").str2arr,k=v("../common").sliceEq,m=v("../common").readUInt32BE,E=_("8BPS\0\x01");ie.exports=function(e){if(!(e.length<22)&&k(e,0,E))return{width:m(e,18),height:m(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":262}],272:[function(v,ie,ae){"use strict";function _(r){return 32===r||9===r||13===r||10===r}function k(r){return"number"==typeof r&&isFinite(r)&&r>0}var E=/<[-_.:a-zA-Z0-9][^>]*>/,e=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,c=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,d=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,n=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,t=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function a(r){return t.test(r)?r.match(t)[0]:"px"}ie.exports=function(r){if(function m(r){var g=0,s=r.length;for(239===r[0]&&187===r[1]&&191===r[2]&&(g=3);g<s&&_(r[g]);)g++;return g!==s&&60===r[g]}(r)){for(var g="",s=0;s<r.length;s++)g+=String.fromCharCode(r[s]);var b=(g.match(E)||[""])[0];if(e.test(b)){var x=function i(r){var g=r.match(c),s=r.match(d),b=r.match(n);return{width:g&&(g[1]||g[2]),height:s&&(s[1]||s[2]),viewbox:b&&(b[1]||b[2])}}(b),S=parseFloat(x.width),p=parseFloat(x.height);if(x.width&&x.height)return k(S)&&k(p)?{width:S,height:p,type:"svg",mime:"image/svg+xml",wUnits:a(x.width),hUnits:a(x.height)}:void 0;var w=(x.viewbox||"").split(" "),l={width:w[2],height:w[3]},y=parseFloat(l.width),A=parseFloat(l.height);if(k(y)&&k(A)&&a(l.width)===a(l.height)){var T=y/A;return x.width?k(S)?{width:S,height:S/T,type:"svg",mime:"image/svg+xml",wUnits:a(x.width),hUnits:a(x.width)}:void 0:x.height?k(p)?{width:p*T,height:p,type:"svg",mime:"image/svg+xml",wUnits:a(x.height),hUnits:a(x.height)}:void 0:{width:y,height:A,type:"svg",mime:"image/svg+xml",wUnits:a(l.width),hUnits:a(l.height)}}}}}},{}],273:[function(v,ie,ae){"use strict";var _=v("../common").str2arr,k=v("../common").sliceEq,m=v("../common").readUInt16LE,E=v("../common").readUInt16BE,e=v("../common").readUInt32LE,c=v("../common").readUInt32BE,d=_("II*\0"),n=_("MM\0*");function t(r,g,s){return s?E(r,g):m(r,g)}function i(r,g,s){return s?c(r,g):e(r,g)}function a(r,g,s){var b=t(r,g+2,s);return 1!==i(r,g+4,s)||3!==b&&4!==b?null:3===b?t(r,g+8,s):i(r,g+8,s)}ie.exports=function(r){if(!(r.length<8)&&(k(r,0,d)||k(r,0,n))){var g=77===r[0],s=i(r,4,g)-8;if(!(s<0)){var b=s+8;if(!(r.length-b<2)){var x=12*t(r,b+0,g);if(!(x<=0||(b+=2,r.length-b<x))){var S,p,w,l;for(S=0;S<x;S+=12)256===(l=t(r,b+S,g))?p=a(r,b+S,g):257===l&&(w=a(r,b+S,g));if(p&&w)return{width:p,height:w,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},{"../common":262}],274:[function(v,ie,ae){"use strict";var _=v("../common").str2arr,k=v("../common").sliceEq,m=v("../common").readUInt16LE,E=v("../common").readUInt32LE,e=v("../exif_utils"),c=_("RIFF"),d=_("WEBP");function n(a,r){if(157===a[r+3]&&1===a[r+4]&&42===a[r+5])return{width:16383&m(a,r+6),height:16383&m(a,r+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function t(a,r){if(47===a[r]){var g=E(a,r+1);return{width:1+(16383&g),height:1+(g>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function i(a,r){return{width:1+(a[r+6]<<16|a[r+5]<<8|a[r+4]),height:1+(a[r+9]<<r|a[r+8]<<8|a[r+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}ie.exports=function(a){if(!(a.length<16)&&(k(a,0,c)||k(a,8,d))){var r=12,g=null,s=0,b=E(a,4)+8;if(!(b>a.length)){for(;r+8<b;)if(0!==a[r]){var x=String.fromCharCode.apply(null,a.slice(r,r+4)),S=E(a,r+4);"VP8 "===x&&S>=10?g=g||n(a,r+8):"VP8L"===x&&S>=9?g=g||t(a,r+8):"VP8X"===x&&S>=10?g=g||i(a,r+8):"EXIF"===x&&(s=e.get_orientation(a.slice(r+8,r+8+S)),r=1/0),r+=8+S}else r++;if(g)return s>0&&(g.orientation=s),g}}}},{"../common":262,"../exif_utils":263}],275:[function(v,ie,ae){"use strict";ie.exports={avif:v("./parse_sync/avif"),bmp:v("./parse_sync/bmp"),gif:v("./parse_sync/gif"),ico:v("./parse_sync/ico"),jpeg:v("./parse_sync/jpeg"),png:v("./parse_sync/png"),psd:v("./parse_sync/psd"),svg:v("./parse_sync/svg"),tiff:v("./parse_sync/tiff"),webp:v("./parse_sync/webp")}},{"./parse_sync/avif":265,"./parse_sync/bmp":266,"./parse_sync/gif":267,"./parse_sync/ico":268,"./parse_sync/jpeg":269,"./parse_sync/png":270,"./parse_sync/psd":271,"./parse_sync/svg":272,"./parse_sync/tiff":273,"./parse_sync/webp":274}],276:[function(v,ie,ae){"use strict";var _=v("./lib/parsers_sync");ie.exports=function(E){return function k(m){for(var E=Object.keys(_),e=0;e<E.length;e++){var c=_[E[e]](m);if(c)return c}return null}(E)},ie.exports.parsers=_},{"./lib/parsers_sync":275}],277:[function(v,ie,ae){var k,m,_=ie.exports={};function E(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function c(x){if(k===setTimeout)return setTimeout(x,0);if((k===E||!k)&&setTimeout)return k=setTimeout,setTimeout(x,0);try{return k(x,0)}catch(S){try{return k.call(null,x,0)}catch(p){return k.call(this,x,0)}}}!function(){try{k="function"==typeof setTimeout?setTimeout:E}catch(x){k=E}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(x){m=e}}();var i,n=[],t=!1,a=-1;function r(){!t||!i||(t=!1,i.length?n=i.concat(n):a=-1,n.length&&g())}function g(){if(!t){var x=c(r);t=!0;for(var S=n.length;S;){for(i=n,n=[];++a<S;)i&&i[a].run();a=-1,S=n.length}i=null,t=!1,function d(x){if(m===clearTimeout)return clearTimeout(x);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(x);try{return m(x)}catch(S){try{return m.call(null,x)}catch(p){return m.call(this,x)}}}(x)}}function s(x,S){this.fun=x,this.array=S}function b(){}_.nextTick=function(x){var S=new Array(arguments.length-1);if(arguments.length>1)for(var p=1;p<arguments.length;p++)S[p-1]=arguments[p];n.push(new s(x,S)),1===n.length&&!t&&c(g)},s.prototype.run=function(){this.fun.apply(null,this.array)},_.title="browser",_.browser=!0,_.env={},_.argv=[],_.version="",_.versions={},_.on=b,_.addListener=b,_.once=b,_.off=b,_.removeListener=b,_.removeAllListeners=b,_.emit=b,_.prependListener=b,_.prependOnceListener=b,_.listeners=function(x){return[]},_.binding=function(x){throw new Error("process.binding is not supported")},_.cwd=function(){return"/"},_.chdir=function(x){throw new Error("process.chdir is not supported")},_.umask=function(){return 0}},{}],278:[function(v,ie,ae){(function(_){(function(){for(var k=v("performance-now"),m="undefined"==typeof window?_:window,E=["moz","webkit"],e="AnimationFrame",c=m["request"+e],d=m["cancel"+e]||m["cancelRequest"+e],n=0;!c&&n<E.length;n++)c=m[E[n]+"Request"+e],d=m[E[n]+"Cancel"+e]||m[E[n]+"CancelRequest"+e];if(!c||!d){var t=0,i=0,a=[];c=function(g){if(0===a.length){var s=k(),b=Math.max(0,16.666666666666668-(s-t));t=b+s,setTimeout(function(){var x=a.slice(0);a.length=0;for(var S=0;S<x.length;S++)if(!x[S].cancelled)try{x[S].callback(t)}catch(p){setTimeout(function(){throw p},0)}},Math.round(b))}return a.push({handle:++i,callback:g,cancelled:!1}),i},d=function(g){for(var s=0;s<a.length;s++)a[s].handle===g&&(a[s].cancelled=!0)}}ie.exports=function(g){return c.call(m,g)},ie.exports.cancel=function(){d.apply(m,arguments)},ie.exports.polyfill=function(g){g||(g=m),g.requestAnimationFrame=c,g.cancelAnimationFrame=d}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":252}],279:[function(v,ie,ae){"use strict";var _=v("array-bounds"),k=v("color-normalize"),m=v("update-diff"),E=v("pick-by-alias"),e=v("object-assign"),c=v("flatten-vertex-data"),d=v("to-float32"),n=d.float32,t=d.fract32;ie.exports=function a(r,g){if("function"==typeof r?(g||(g={}),g.regl=r):g=r,g.length&&(g.positions=g),!(r=g.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var b,x,S,p,w,l,s=r._gl,y={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},A=[];return p=r.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),x=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),S=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),w=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),l=r.buffer({usage:"static",type:"float",data:i}),u(g),b=r({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:r.prop("range"),lineWidth:r.prop("lineWidth"),capSize:r.prop("capSize"),opacity:r.prop("opacity"),scale:r.prop("scale"),translate:r.prop("translate"),scaleFract:r.prop("scaleFract"),translateFract:r.prop("translateFract"),viewport:function(o,C){return[C.viewport.x,C.viewport.y,o.viewportWidth,o.viewportHeight]}},attributes:{color:{buffer:p,offset:function(o,C){return 4*C.offset},divisor:1},position:{buffer:x,offset:function(o,C){return 8*C.offset},divisor:1},positionFract:{buffer:S,offset:function(o,C){return 8*C.offset},divisor:1},error:{buffer:w,offset:function(o,C){return 16*C.offset},divisor:1},direction:{buffer:l,stride:24,offset:0},lineOffset:{buffer:l,stride:24,offset:8},capOffset:{buffer:l,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:r.prop("viewport")},viewport:r.prop("viewport"),stencil:!1,instances:r.prop("count"),count:i.length}),e(T,{update:u,draw:M,destroy:h,regl:r,gl:s,canvas:s.canvas,groups:A}),T;function T(o){o?u(o):null===o&&h(),M()}function M(o){if("number"==typeof o)return f(o);o&&!Array.isArray(o)&&(o=[o]),r._refresh(),A.forEach(function(C,R){if(C){if(o&&(C.draw=!!o[R]),!C.draw)return void(C.draw=!0);f(R)}})}function f(o){"number"==typeof o&&(o=A[o]),null!=o&&(!(o&&o.count&&o.color&&o.opacity&&o.positions&&o.positions.length>1)||(o.scaleRatio=[o.scale[0]*o.viewport.width,o.scale[1]*o.viewport.height],b(o),o.after&&o.after(o)))}function u(o){if(o){null!=o.length?"number"==typeof o[0]&&(o=[{positions:o}]):Array.isArray(o)||(o=[o]);var C=0,R=0;if(T.groups=A=o.map(function(U,X){var oe=A[X];return U?("function"==typeof U?U={after:U}:"number"==typeof U[0]&&(U={positions:U}),U=E(U,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),oe||(A[X]=oe={id:X,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},U=e({},y,U)),m(oe,U,[{lineWidth:function(se){return.5*+se},capSize:function(se){return.5*+se},opacity:parseFloat,errors:function(se){return se=c(se),R+=se.length,se},positions:function(se,ne){return se=c(se,"float64"),ne.count=Math.floor(se.length/2),ne.bounds=_(se,2),ne.offset=C,C+=ne.count,se}},{color:function(se,ne){var W=ne.count;if(se||(se="transparent"),!Array.isArray(se)||"number"==typeof se[0]){var G=se;se=Array(W);for(var $=0;$<W;$++)se[$]=G}if(se.length<W)throw Error("Not enough colors");for(var V=new Uint8Array(4*W),H=0;H<W;H++){var q=k(se[H],"uint8");V.set(q,4*H)}return V},range:function(se,ne,W){return se||(se=ne.bounds),ne.scale=[1/(se[2]-se[0]),1/(se[3]-se[1])],ne.translate=[-se[0],-se[1]],ne.scaleFract=t(ne.scale),ne.translateFract=t(ne.translate),se},viewport:function(se){var ne;return Array.isArray(se)?ne={x:se[0],y:se[1],width:se[2]-se[0],height:se[3]-se[1]}:se?((ne={x:se.x||se.left||0,y:se.y||se.top||0}).width=se.right?se.right-ne.x:se.w||se.width||0,ne.height=se.bottom?se.bottom-ne.y:se.h||se.height||0):ne={x:0,y:0,width:s.drawingBufferWidth,height:s.drawingBufferHeight},ne}}]),oe):oe}),C||R){var z=A.reduce(function(U,X,oe){return U+(X?X.count:0)},0),O=new Float64Array(2*z),I=new Uint8Array(4*z),F=new Float32Array(4*z);A.forEach(function(U,X){if(U){var oe=U.positions,ne=U.offset,G=U.errors;!U.count||(I.set(U.color,4*ne),F.set(G,4*ne),O.set(oe,2*ne))}});var D=n(O);x(D);var N=t(O,D);S(N),p(I),w(F)}}}function h(){x.destroy(),S.destroy(),p.destroy(),w.destroy(),l.destroy()}};var i=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":313,"update-diff":329}],280:[function(v,ie,ae){"use strict";var _=v("color-normalize"),k=v("array-bounds"),m=v("object-assign"),E=v("glslify"),e=v("pick-by-alias"),c=v("flatten-vertex-data"),d=v("earcut"),n=v("array-normalize"),t=v("to-float32"),i=t.float32,a=t.fract32,r=v("es6-weak-map"),g=v("parse-rect"),s=v("array-find-index");function b(x,S){if(!(this instanceof b))return new b(x,S);if("function"==typeof x?(S||(S={}),S.regl=x):S=x,S.length&&(S.positions=S),!(x=S.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=x._gl,this.regl=x,this.passes=[],this.shaders=b.shaders.has(x)?b.shaders.get(x):b.shaders.set(x,b.createShaders(x)).get(x),this.update(S)}ie.exports=b,b.dashMult=2,b.maxPatternLength=256,b.precisionThreshold=3e6,b.maxPoints=1e4,b.maxLines=2048,b.shaders=new r,b.createShaders=function(x){var l,S=x.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),p={primitive:"triangle strip",instances:x.prop("count"),count:4,offset:0,uniforms:{miterMode:function(A,T){return"round"===T.join?2:1},miterLimit:x.prop("miterLimit"),scale:x.prop("scale"),scaleFract:x.prop("scaleFract"),translateFract:x.prop("translateFract"),translate:x.prop("translate"),thickness:x.prop("thickness"),dashTexture:x.prop("dashTexture"),opacity:x.prop("opacity"),pixelRatio:x.context("pixelRatio"),id:x.prop("id"),dashLength:x.prop("dashLength"),viewport:function(A,T){return[T.viewport.x,T.viewport.y,A.viewportWidth,A.viewportHeight]},depth:x.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(A,T){return!T.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:x.prop("viewport")},viewport:x.prop("viewport")},w=x(m({vert:E(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:E(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:S,divisor:0,stride:8,offset:0},lineTop:{buffer:S,divisor:0,stride:8,offset:4},aCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:x.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:x.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:x.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},p));try{l=x(m({cull:{enable:!0,face:"back"},vert:E(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:E(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:S,divisor:0,stride:8,offset:0},lineTop:{buffer:S,divisor:0,stride:8,offset:4},aColor:{buffer:x.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:x.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},p))}catch(A){l=w}return{fill:x({primitive:"triangle",elements:function(A,T){return T.triangles},offset:0,vert:E(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:E(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:x.prop("scale"),color:x.prop("fill"),scaleFract:x.prop("scaleFract"),translateFract:x.prop("translateFract"),translate:x.prop("translate"),opacity:x.prop("opacity"),pixelRatio:x.context("pixelRatio"),id:x.prop("id"),viewport:function(A,T){return[T.viewport.x,T.viewport.y,A.viewportWidth,A.viewportHeight]}},attributes:{position:{buffer:x.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:x.prop("positionFractBuffer"),stride:8,offset:8}},blend:p.blend,depth:{enable:!1},scissor:p.scissor,stencil:p.stencil,viewport:p.viewport}),rect:w,miter:l}},b.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},b.prototype.render=function(){for(var x,S=[],p=arguments.length;p--;)S[p]=arguments[p];S.length&&(x=this).update.apply(x,S),this.draw()},b.prototype.draw=function(){for(var x=this,S=[],p=arguments.length;p--;)S[p]=arguments[p];return(S.length?S:this.passes).forEach(function(w,l){var y;if(w&&Array.isArray(w))return(y=x).draw.apply(y,w);"number"==typeof w&&(w=x.passes[w]),w&&w.count>1&&w.opacity&&(x.regl._refresh(),w.fill&&w.triangles&&w.triangles.length>2&&x.shaders.fill(w),w.thickness&&(w.scale[0]*w.viewport.width>b.precisionThreshold||w.scale[1]*w.viewport.height>b.precisionThreshold||"rect"===w.join||!w.join&&(w.thickness<=2||w.count>=b.maxPoints)?x.shaders.rect(w):x.shaders.miter(w)))}),this},b.prototype.update=function(x){var S=this;if(x){null!=x.length?"number"==typeof x[0]&&(x=[{positions:x}]):Array.isArray(x)||(x=[x]);var w=this.regl,l=this.gl;if(x.forEach(function(f,u){var h=S.passes[u];if(void 0!==f){if(null===f)return void(S.passes[u]=null);if("number"==typeof f[0]&&(f={positions:f}),f=e(f,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),h||(S.passes[u]=h={id:u,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:w.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:w.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:w.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:w.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},f=m({},b.defaults,f)),null!=f.thickness&&(h.thickness=parseFloat(f.thickness)),null!=f.opacity&&(h.opacity=parseFloat(f.opacity)),null!=f.miterLimit&&(h.miterLimit=parseFloat(f.miterLimit)),null!=f.overlay&&(h.overlay=!!f.overlay,u<b.maxLines&&(h.depth=2*(b.maxLines-1-u%b.maxLines)/b.maxLines-1)),null!=f.join&&(h.join=f.join),null!=f.hole&&(h.hole=f.hole),null!=f.fill&&(h.fill=f.fill?_(f.fill,"uint8"):null),null!=f.viewport&&(h.viewport=g(f.viewport)),h.viewport||(h.viewport=g([l.drawingBufferWidth,l.drawingBufferHeight])),null!=f.close&&(h.close=f.close),null===f.positions&&(f.positions=[]),f.positions){var o,C;if(f.positions.x&&f.positions.y){var R=f.positions.x,z=f.positions.y;C=h.count=Math.max(R.length,z.length),o=new Float64Array(2*C);for(var O=0;O<C;O++)o[2*O]=R[O],o[2*O+1]=z[O]}else o=c(f.positions,"float64"),C=h.count=Math.floor(o.length/2);var I=h.bounds=k(o,2);if(h.fill){for(var F=[],D={},N=0,U=0,X=0,oe=h.count;U<oe;U++){var se=o[2*U],ne=o[2*U+1];isNaN(se)||isNaN(ne)||null==se||null==ne?(se=o[2*N],ne=o[2*N+1],D[U]=N):N=U,F[X++]=se,F[X++]=ne}if(f.splitNull){h.count-1 in D||(D[h.count]=h.count-1);var W=Object.keys(D).map(Number).sort(function(at,vt){return at-vt}),G=[],$=0,V=null!=h.hole?h.hole[0]:null;if(null!=V){var H=s(W,function(at){return at>=V});(W=W.slice(0,H)).push(V)}for(var q=function(at){var vt=F.slice(2*$,2*W[at]).concat(V?F.slice(2*V):[]),Qe=(h.hole||[]).map(function(Ze){return Ze-V+(W[at]-$)}),Pe=d(vt,Qe);Pe=Pe.map(function(Ze){return Ze+$+(Ze+$<W[at]?0:V-W[at])}),G.push.apply(G,Pe),$=W[at]+1},K=0;K<W.length;K++)q(K);for(var Y=0,te=G.length;Y<te;Y++)null!=D[G[Y]]&&(G[Y]=D[G[Y]]);h.triangles=G}else{for(var J=d(F,h.hole||[]),j=0,re=J.length;j<re;j++)null!=D[J[j]]&&(J[j]=D[J[j]]);h.triangles=J}}var le=new Float64Array(o);n(le,2,I);var ge=new Float64Array(2*C+6);h.close?o[0]===o[2*C-2]&&o[1]===o[2*C-1]?(ge[0]=le[2*C-4],ge[1]=le[2*C-3]):(ge[0]=le[2*C-2],ge[1]=le[2*C-1]):(ge[0]=le[0],ge[1]=le[1]),ge.set(le,2),h.close?o[0]===o[2*C-2]&&o[1]===o[2*C-1]?(ge[2*C+2]=le[2],ge[2*C+3]=le[3],h.count-=1):(ge[2*C+2]=le[0],ge[2*C+3]=le[1],ge[2*C+4]=le[2],ge[2*C+5]=le[3]):(ge[2*C+2]=le[2*C-2],ge[2*C+3]=le[2*C-1],ge[2*C+4]=le[2*C-2],ge[2*C+5]=le[2*C-1]);var pe=i(ge);h.positionBuffer(pe);var xe=a(ge,pe);h.positionFractBuffer(xe)}if(f.range?h.range=f.range:h.range||(h.range=h.bounds),(f.range||f.positions)&&h.count){var ke=h.bounds,be=h.range[2]-h.range[0],Le=h.range[3]-h.range[1];h.scale=[(ke[2]-ke[0])/be,(ke[3]-ke[1])/Le],h.translate=[-h.range[0]/be+ke[0]/be||0,-h.range[1]/Le+ke[1]/Le||0],h.scaleFract=a(h.scale),h.translateFract=a(h.translate)}if(f.dashes){var ye,De=0;if(!f.dashes||f.dashes.length<2)De=1,ye=new Uint8Array([255,255,255,255,255,255,255,255]);else{De=0;for(var Ce=0;Ce<f.dashes.length;++Ce)De+=f.dashes[Ce];ye=new Uint8Array(De*b.dashMult);for(var Fe=0,Ke=255,Ue=0;Ue<2;Ue++)for(var Be=0;Be<f.dashes.length;++Be){for(var Ie=0,nt=f.dashes[Be]*b.dashMult*.5;Ie<nt;++Ie)ye[Fe++]=Ke;Ke^=255}}h.dashLength=De,h.dashTexture({channels:1,data:ye,width:ye.length,height:1,mag:"linear",min:"linear"},0,0)}if(f.color){var gt=h.count,Nt=f.color;Nt||(Nt="transparent");var St=new Uint8Array(4*gt+4);if(Array.isArray(Nt)&&"number"!=typeof Nt[0]){for(var Et=0;Et<gt;Et++){var wt=_(Nt[Et],"uint8");St.set(wt,4*Et)}St.set(_(Nt[0],"uint8"),4*gt)}else for(var Bt=_(Nt,"uint8"),Zt=0;Zt<gt+1;Zt++)St.set(Bt,4*Zt);h.colorBuffer({usage:"dynamic",type:"uint8",data:St})}}}),x.length<this.passes.length){for(var y=x.length;y<this.passes.length;y++){var A=this.passes[y];!A||(A.colorBuffer.destroy(),A.positionBuffer.destroy(),A.dashTexture.destroy())}this.passes.length=x.length}for(var T=[],M=0;M<this.passes.length;M++)null!==this.passes[M]&&T.push(this.passes[M]);return this.passes=T,this}},b.prototype.destroy=function(){return this.passes.forEach(function(x){x.colorBuffer.destroy(),x.positionBuffer.destroy(),x.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313}],281:[function(v,ie,ae){"use strict";function _(h,o){return function E(h){if(Array.isArray(h))return h}(h)||function c(h,o){var C=null==h?null:"undefined"!=typeof Symbol&&h[Symbol.iterator]||h["@@iterator"];if(null!=C){var I,F,R=[],z=!0,O=!1;try{for(C=C.call(h);!(z=(I=C.next()).done)&&(R.push(I.value),!o||R.length!==o);z=!0);}catch(D){O=!0,F=D}finally{try{!z&&null!=C.return&&C.return()}finally{if(O)throw F}}return R}}(h,o)||d(h,o)||function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(h){return function m(h){if(Array.isArray(h))return n(h)}(h)||function e(h){if("undefined"!=typeof Symbol&&null!=h[Symbol.iterator]||null!=h["@@iterator"])return Array.from(h)}(h)||d(h)||function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(h,o){if(h){if("string"==typeof h)return n(h,o);var C=Object.prototype.toString.call(h).slice(8,-1);if("Object"===C&&h.constructor&&(C=h.constructor.name),"Map"===C||"Set"===C)return Array.from(h);if("Arguments"===C||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return n(h,o)}}function n(h,o){(null==o||o>h.length)&&(o=h.length);for(var C=0,R=new Array(o);C<o;C++)R[C]=h[C];return R}var a=v("color-normalize"),r=v("array-bounds"),g=v("color-id"),s=v("@plotly/point-cluster"),b=v("object-assign"),x=v("glslify"),S=v("pick-by-alias"),p=v("update-diff"),w=v("flatten-vertex-data"),l=v("is-iexplorer"),y=v("to-float32"),A=v("parse-rect"),T=M;function M(h,o){var C=this;if(!(this instanceof M))return new M(h,o);"function"==typeof h?(o||(o={}),o.regl=h):(o=h,h=null),o&&o.length&&(o.positions=o);var z,R=(h=o.regl)._gl,O=[],U=255;this.tooManyColors=l,z=h.texture({data:new Uint8Array(4*U),width:U,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),b(this,{regl:h,gl:R,groups:[],markerCache:[null],markerTextures:[null],palette:O,paletteIds:{},paletteTexture:z,maxColors:U,maxSize:100,canvas:R.canvas}),this.update(o);var oe={uniforms:{constPointSize:!!o.constPointSize,opacity:h.prop("opacity"),paletteSize:function(G,$){return[C.tooManyColors?0:U,z.height]},pixelRatio:h.context("pixelRatio"),scale:h.prop("scale"),scaleFract:h.prop("scaleFract"),translate:h.prop("translate"),translateFract:h.prop("translateFract"),markerTexture:h.prop("markerTexture"),paletteTexture:z},attributes:{x:function(G,$){return $.xAttr||{buffer:$.positionBuffer,stride:8,offset:0}},y:function(G,$){return $.yAttr||{buffer:$.positionBuffer,stride:8,offset:4}},xFract:function(G,$){return $.xAttr?{constant:[0,0]}:{buffer:$.positionFractBuffer,stride:8,offset:0}},yFract:function(G,$){return $.yAttr?{constant:[0,0]}:{buffer:$.positionFractBuffer,stride:8,offset:4}},size:function(G,$){return $.size.length?{buffer:$.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*$.size/C.maxSize)]}},borderSize:function(G,$){return $.borderSize.length?{buffer:$.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*$.borderSize/C.maxSize)]}},colorId:function(G,$){return $.color.length?{buffer:$.colorBuffer,stride:C.tooManyColors?8:4,offset:0}:{constant:C.tooManyColors?O.slice(4*$.color,4*$.color+4):[$.color]}},borderColorId:function(G,$){return $.borderColor.length?{buffer:$.colorBuffer,stride:C.tooManyColors?8:4,offset:C.tooManyColors?4:2}:{constant:C.tooManyColors?O.slice(4*$.borderColor,4*$.borderColor+4):[$.borderColor]}},isActive:function(G,$){return!0===$.activation?{constant:[1]}:$.activation?$.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:h.prop("viewport")},viewport:h.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:h.prop("elements"),count:h.prop("count"),offset:h.prop("offset"),primitive:"points"},se=b({},oe);se.frag=x(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),se.vert=x(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=h(se);var ne=b({},oe);ne.frag=x(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),ne.vert=x(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),l&&(ne.frag=ne.frag.replace("smoothstep","smoothStep"),se.frag=se.frag.replace("smoothstep","smoothStep")),this.drawCircle=h(ne)}M.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},M.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},M.prototype.draw=function(){for(var h=this,o=arguments.length,C=new Array(o),R=0;R<o;R++)C[R]=arguments[R];var z=this.groups;if(1===C.length&&Array.isArray(C[0])&&(null===C[0][0]||Array.isArray(C[0][0]))&&(C=C[0]),this.regl._refresh(),C.length)for(var O=0;O<C.length;O++)this.drawItem(O,C[O]);else z.forEach(function(I,F){h.drawItem(F)});return this},M.prototype.drawItem=function(h,o){var C=this.groups,R=C[h];if("number"==typeof o&&(h=o,R=C[o],o=null),R&&R.count&&R.opacity){R.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,R,o));for(var z=[],O=1;O<R.activation.length;O++)!R.activation[O]||!0!==R.activation[O]&&!R.activation[O].data.length||z.push.apply(z,k(this.getMarkerDrawOptions(O,R,o)));z.length&&this.drawMarker(z)}},M.prototype.getMarkerDrawOptions=function(h,o,C){var R=o.range,z=o.tree,O=o.viewport,I=o.activation,F=o.selectionBuffer,D=o.count;if(!z)return C?[b({},o,{markerTexture:this.markerTextures[h],activation:I[h],count:C.length,elements:C,offset:0})]:[b({},o,{markerTexture:this.markerTextures[h],activation:I[h],offset:0})];var U=[],X=z.range(R,{lod:!0,px:[(R[2]-R[0])/O.width,(R[3]-R[1])/O.height]});if(C){for(var se=I[h].data,ne=new Uint8Array(D),W=0;W<C.length;W++){var G=C[W];ne[G]=se?se[G]:1}F.subdata(ne)}for(var $=X.length;$--;){var V=_(X[$],2),H=V[0];U.push(b({},o,{markerTexture:this.markerTextures[h],activation:C?F:I[h],offset:H,count:V[1]-H}))}return U},M.prototype.update=function(){for(var h=this,o=arguments.length,C=new Array(o),R=0;R<o;R++)C[R]=arguments[R];if(C.length){1===C.length&&Array.isArray(C[0])&&(C=C[0]);var z=this.groups,O=this.gl,I=this.regl,F=this.maxSize,D=this.maxColors,N=this.palette;this.groups=z=C.map(function(U,X){var oe=z[X];if(void 0===U)return oe;null===U?U={positions:null}:"function"==typeof U?U={ondraw:U}:"number"==typeof U[0]&&(U={positions:U}),null===(U=S(U,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(U.positions=[]),null!=U.tooManyColors&&(h.tooManyColors=U.tooManyColors),oe||(z[X]=oe={id:X,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:I.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:I.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:I.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:I.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:I.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},U=b({},M.defaults,U)),U.positions&&!("marker"in U)&&(U.marker=oe.marker,delete oe.marker),U.marker&&!("positions"in U)&&(U.positions=oe.positions,delete oe.positions);var se=0,ne=0;if(p(oe,U,[{snap:!0,size:function(de,be){return null==de&&(de=M.defaults.size),se+=de&&de.length?1:0,de},borderSize:function(de,be){return null==de&&(de=M.defaults.borderSize),se+=de&&de.length?1:0,de},opacity:parseFloat,color:function(de,be){return null==de&&(de=M.defaults.color),de=h.updateColor(de),ne++,de},borderColor:function(de,be){return null==de&&(de=M.defaults.borderColor),de=h.updateColor(de),ne++,de},bounds:function(de,be,Le){return"range"in Le||(Le.range=null),de},positions:function(de,be,Le){var De=be.snap,ye=be.positionBuffer,Ce=be.positionFractBuffer,Fe=be.selectionBuffer;if(de.x||de.y)return be.xAttr=de.x.length?{buffer:I.buffer(de.x),offset:0,stride:4,count:de.x.length}:{buffer:de.x.buffer,offset:4*de.x.offset||0,stride:4*(de.x.stride||1),count:de.x.count},be.yAttr=de.y.length?{buffer:I.buffer(de.y),offset:0,stride:4,count:de.y.length}:{buffer:de.y.buffer,offset:4*de.y.offset||0,stride:4*(de.y.stride||1),count:de.y.count},be.count=Math.max(be.xAttr.count,be.yAttr.count),de;de=w(de,"float64");var Ke=be.count=Math.floor(de.length/2),Ue=be.bounds=Ke?r(de,2):null;if(!Le.range&&!be.range&&(delete be.range,Le.range=Ue),!Le.marker&&!be.marker&&(delete be.marker,Le.marker=null),De&&(!0===De||Ke>De)?be.tree=s(de,{bounds:Ue}):De&&De.length&&(be.tree=De),be.tree){var Be={primitive:"points",usage:"static",data:be.tree,type:"uint32"};be.elements?be.elements(Be):be.elements=I.elements(Be)}var Ie=y.float32(de);return ye({data:Ie,usage:"dynamic"}),Ce({data:y.fract32(de,Ie),usage:"dynamic"}),Fe({data:new Uint8Array(Ke),type:"uint8",usage:"stream"}),de}},{marker:function(de,be,Le){var De=be.activation;if(De.forEach(function(nt){return nt&&nt.destroy&&nt.destroy()}),De.length=0,de&&"number"!=typeof de[0]){for(var Ce=[],Fe=0,Ke=Math.min(de.length,be.count);Fe<Ke;Fe++){var Ue=h.addMarker(de[Fe]);Ce[Ue]||(Ce[Ue]=new Uint8Array(be.count)),Ce[Ue][Fe]=1}for(var Be=0;Be<Ce.length;Be++)if(Ce[Be]){var Ie={data:Ce[Be],type:"uint8",usage:"static"};De[Be]?De[Be](Ie):De[Be]=I.buffer(Ie),De[Be].data=Ce[Be]}}else De[h.addMarker(de)]=!0;return de},range:function(de,be,Le){var De=be.bounds;if(De)return de||(de=De),be.scale=[1/(de[2]-de[0]),1/(de[3]-de[1])],be.translate=[-de[0],-de[1]],be.scaleFract=y.fract(be.scale),be.translateFract=y.fract(be.translate),de},viewport:function(de){return A(de||[O.drawingBufferWidth,O.drawingBufferHeight])}}]),se){var G=oe.count,$=oe.size,V=oe.borderSize,H=oe.sizeBuffer,q=new Uint8Array(2*G);if($.length||V.length)for(var K=0;K<G;K++)q[2*K]=Math.round(255*(null==$[K]?$:$[K])/F),q[2*K+1]=Math.round(255*(null==V[K]?V:V[K])/F);H({data:q,usage:"dynamic"})}if(ne){var le,te=oe.count,J=oe.color,j=oe.borderColor,re=oe.colorBuffer;if(h.tooManyColors){if(J.length||j.length){le=new Uint8Array(8*te);for(var ge=0;ge<te;ge++){var pe=J[ge];le[8*ge]=N[4*pe],le[8*ge+1]=N[4*pe+1],le[8*ge+2]=N[4*pe+2],le[8*ge+3]=N[4*pe+3];var xe=j[ge];le[8*ge+4]=N[4*xe],le[8*ge+5]=N[4*xe+1],le[8*ge+6]=N[4*xe+2],le[8*ge+7]=N[4*xe+3]}}}else if(J.length||j.length){le=new Uint8Array(4*te+2);for(var ke=0;ke<te;ke++)null!=J[ke]&&(le[4*ke]=J[ke]%D,le[4*ke+1]=Math.floor(J[ke]/D)),null!=j[ke]&&(le[4*ke+2]=j[ke]%D,le[4*ke+3]=Math.floor(j[ke]/D))}re({data:le||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return oe})}},M.prototype.addMarker=function(h){var O,o=this.markerTextures,C=this.regl,R=this.markerCache,z=null==h?0:R.indexOf(h);if(z>=0)return z;if(h instanceof Uint8Array||h instanceof Uint8ClampedArray)O=h;else{O=new Uint8Array(h.length);for(var I=0,F=h.length;I<F;I++)O[I]=255*h[I]}var D=Math.floor(Math.sqrt(O.length));return z=o.length,R.push(h),o.push(C.texture({channels:1,data:O,radius:D,mag:"linear",min:"linear"})),z},M.prototype.updateColor=function(h){var o=this.paletteIds,C=this.palette,R=this.maxColors;Array.isArray(h)||(h=[h]);var z=[];if("number"==typeof h[0]){var O=[];if(Array.isArray(h))for(var I=0;I<h.length;I+=4)O.push(h.slice(I,I+4));else for(var F=0;F<h.length;F+=4)O.push(h.subarray(F,F+4));h=O}for(var D=0;D<h.length;D++){var N=h[D];N=a(N,"uint8");var U=g(N,!1);if(null==o[U]){var X=C.length;o[U]=Math.floor(X/4),C[X]=N[0],C[X+1]=N[1],C[X+2]=N[2],C[X+3]=N[3]}z[D]=o[U]}return!this.tooManyColors&&C.length>4*R&&(this.tooManyColors=!0),this.updatePalette(C),1===z.length?z[0]:z},M.prototype.updatePalette=function(h){if(!this.tooManyColors){var o=this.maxColors,C=this.paletteTexture,R=Math.ceil(.25*h.length/o);if(R>1)for(var z=.25*(h=h.slice()).length%o;z<R*o;z++)h.push(0,0,0,0);C.height<R&&C.resize(o,R),C.subimage({width:Math.min(.25*h.length,o),height:R,data:h},0,0)}},M.prototype.destroy=function(){return this.groups.forEach(function(h){h.sizeBuffer.destroy(),h.positionBuffer.destroy(),h.positionFractBuffer.destroy(),h.colorBuffer.destroy(),h.activation.forEach(function(o){return o&&o.destroy&&o.destroy()}),h.selectionBuffer.destroy(),h.elements&&h.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(h){return h&&h.destroy&&h.destroy()}),this};var f=v("object-assign");ie.exports=function(o,C){var R=new T(o,C),z=R.render.bind(R);return f(z,{render:z,update:R.update.bind(R),draw:R.draw.bind(R),destroy:R.destroy.bind(R),regl:R.regl,gl:R.gl,canvas:R.gl.canvas,groups:R.groups,markers:R.markerCache,palette:R.palette}),z}},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313,"update-diff":329}],282:[function(v,ie,ae){"use strict";var _=v("regl-scatter2d"),k=v("pick-by-alias"),m=v("array-bounds"),E=v("raf"),e=v("array-range"),c=v("parse-rect"),d=v("flatten-vertex-data");function n(r,g){if(!(this instanceof n))return new n(r,g);this.traces=[],this.passes={},this.regl=r,this.scatter=_(r),this.canvas=this.scatter.canvas}function t(r,g,s){return(null!=r.id?r.id:r)<<16|(255&g)<<8|255&s}function i(r,g,s){var x,p,w,y,T=r[g],M=r[s];return T.length>2?(x=T[1],p=T[3]):T.length?(x=T[0],p=T[1]):(x=T.y,p=T.y+T.height),M.length>2?(w=M[0],y=M[2]):M.length?(w=M[0],y=M[1]):(w=M.x,y=M.x+M.width),[w,x,y,p]}function a(r){if("number"==typeof r)return[r,r,r,r];if(2===r.length)return[r[0],r[1],r[0],r[1]];var g=c(r);return[g.x,g.y,g.x+g.width,g.y+g.height]}ie.exports=n,n.prototype.render=function(){for(var g,r=this,s=[],b=arguments.length;b--;)s[b]=arguments[b];return s.length&&(g=this).update.apply(g,s),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=E(function(){r.draw(),r.dirty=!0,r.planned=null})):(this.draw(),this.dirty=!0,E(function(){r.dirty=!1})),this)},n.prototype.update=function(){for(var r,g=[],s=arguments.length;s--;)g[s]=arguments[s];if(g.length){for(var b=0;b<g.length;b++)this.updateItem(b,g[b]);this.traces=this.traces.filter(Boolean);for(var x=[],S=0,p=0;p<this.traces.length;p++){for(var w=this.traces[p],l=this.traces[p].passes,y=0;y<l.length;y++)x.push(this.passes[l[y]]);w.passOffset=S,S+=w.passes.length}return(r=this.scatter).update.apply(r,x),this}},n.prototype.updateItem=function(r,g){var b=this.regl;if(null===g)return this.traces[r]=null,this;if(!g)return this;var w,x=k(g,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),S=this.traces[r]||(this.traces[r]={id:r,buffer:b.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:c([b._gl.drawingBufferWidth,b._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=x.color&&(S.color=x.color),null!=x.size&&(S.size=x.size),null!=x.marker&&(S.marker=x.marker),null!=x.borderColor&&(S.borderColor=x.borderColor),null!=x.borderSize&&(S.borderSize=x.borderSize),null!=x.opacity&&(S.opacity=x.opacity),x.viewport&&(S.viewport=c(x.viewport)),null!=x.diagonal&&(S.diagonal=x.diagonal),null!=x.upper&&(S.upper=x.upper),null!=x.lower&&(S.lower=x.lower),x.data){S.buffer(d(x.data)),S.columns=x.data.length,S.count=x.data[0].length,S.bounds=[];for(var p=0;p<S.columns;p++)S.bounds[p]=m(x.data[p],1)}x.range&&(S.range=x.range,w=S.range&&"number"!=typeof S.range[0]),x.domain&&(S.domain=x.domain);var l=!1;null!=x.padding&&(Array.isArray(x.padding)&&x.padding.length===S.columns&&"number"==typeof x.padding[x.padding.length-1]?(S.padding=x.padding.map(a),l=!0):S.padding=a(x.padding));var y=S.columns,A=S.count,T=S.viewport.width,M=S.viewport.height,f=S.viewport.x,u=S.viewport.y,h=T/y,o=M/y;S.passes=[];for(var C=0;C<y;C++)for(var R=0;R<y;R++)if((S.diagonal||R!==C)&&(S.upper||!(C>R))&&(S.lower||!(C<R))){var z=t(S.id,C,R),O=this.passes[z]||(this.passes[z]={});if(x.data&&(O.positions=x.transpose?{x:{buffer:S.buffer,offset:R,count:A,stride:y},y:{buffer:S.buffer,offset:C,count:A,stride:y}}:{x:{buffer:S.buffer,offset:R*A,count:A},y:{buffer:S.buffer,offset:C*A,count:A}},O.bounds=i(S.bounds,C,R)),x.domain||x.viewport||x.data){var I=l?i(S.padding,C,R):S.padding;if(S.domain){var F=i(S.domain,C,R);O.viewport=[f+F[0]*T+I[0],u+F[1]*M+I[1],f+F[2]*T-I[2],u+F[3]*M-I[3]]}else O.viewport=[f+R*h+h*I[0],u+C*o+o*I[1],f+(R+1)*h-h*I[2],u+(C+1)*o-o*I[3]]}x.color&&(O.color=S.color),x.size&&(O.size=S.size),x.marker&&(O.marker=S.marker),x.borderSize&&(O.borderSize=S.borderSize),x.borderColor&&(O.borderColor=S.borderColor),x.opacity&&(O.opacity=S.opacity),x.range&&(O.range=w?i(S.range,C,R):S.range||O.bounds),S.passes.push(z)}return this},n.prototype.draw=function(){for(var r,g=[],s=arguments.length;s--;)g[s]=arguments[s];if(g.length){for(var b=[],x=0;x<g.length;x++)if("number"==typeof g[x]){var S=this.traces[g[x]],w=S.passOffset;b.push.apply(b,e(w,w+S.passes.length))}else if(g[x].length){var l=g[x],y=this.traces[x],A=y.passes,T=y.passOffset;A=A.map(function(M,f){b[T+f]=l})}(r=this.scatter).draw.apply(r,b)}else this.scatter.draw();return this},n.prototype.destroy=function(){return this.traces.forEach(function(r){r.buffer&&r.buffer.destroy&&r.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:278,"regl-scatter2d":281}],283:[function(v,ie,ae){var k;k=function(){function _(et,Yt){this.id=ge++,this.type=et,this.data=Yt}function k(et){if(0===et.length)return[];var Yt=et.charAt(0),qt=et.charAt(et.length-1);if(1<et.length&&Yt===qt&&('"'===Yt||"'"===Yt))return['"'+et.substr(1,et.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Yt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(et))return k(et.substr(0,Yt.index)).concat(k(Yt[1])).concat(k(et.substr(Yt.index+Yt[0].length)));if(1===(Yt=et.split(".")).length)return['"'+et.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(et=[],qt=0;qt<Yt.length;++qt)et=et.concat(k(Yt[qt]));return et}function m(et){return"["+k(et).join("][")+"]"}function n(et){return"string"==typeof et?et.split():et}function t(et){return"string"==typeof et?document.querySelector(et):et}function i(et){var qt,Vt,Tr,tt,Yt=et||{};et={};var je=[],ct=[],ht="undefined"==typeof window?1:window.devicePixelRatio,Me=!1,Se={},Je=function(st){},We=function(){};if("string"==typeof Yt?qt=document.querySelector(Yt):"object"==typeof Yt&&("string"==typeof Yt.nodeName&&"function"==typeof Yt.appendChild&&"function"==typeof Yt.getBoundingClientRect?qt=Yt:"function"==typeof Yt.drawArrays||"function"==typeof Yt.drawElements?Tr=(tt=Yt).canvas:("gl"in Yt?tt=Yt.gl:"canvas"in Yt?Tr=t(Yt.canvas):"container"in Yt&&(Vt=t(Yt.container)),"attributes"in Yt&&(et=Yt.attributes),"extensions"in Yt&&(je=n(Yt.extensions)),"optionalExtensions"in Yt&&(ct=n(Yt.optionalExtensions)),"onDone"in Yt&&(Je=Yt.onDone),"profile"in Yt&&(Me=!!Yt.profile),"pixelRatio"in Yt&&(ht=+Yt.pixelRatio),"cachedCode"in Yt&&(Se=Yt.cachedCode))),qt&&("canvas"===qt.nodeName.toLowerCase()?Tr=qt:Vt=qt),!tt){if(!Tr){if(!(qt=function c(et,Yt,qt){function Vt(){var je=window.innerWidth,ct=window.innerHeight;et!==document.body&&(je=(ct=Tr.getBoundingClientRect()).right-ct.left,ct=ct.bottom-ct.top),Tr.width=qt*je,Tr.height=qt*ct}var tt,Tr=document.createElement("canvas");return le(Tr.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),et.appendChild(Tr),et===document.body&&(Tr.style.position="absolute",le(et.style,{margin:0,padding:0})),et!==document.body&&"function"==typeof ResizeObserver?(tt=new ResizeObserver(function(){setTimeout(Vt)})).observe(et):window.addEventListener("resize",Vt,!1),Vt(),{canvas:Tr,onDestroy:function(){tt?tt.disconnect():window.removeEventListener("resize",Vt),et.removeChild(Tr)}}}(Vt||document.body,0,ht)))return null;Tr=qt.canvas,We=qt.onDestroy}void 0===et.premultipliedAlpha&&(et.premultipliedAlpha=!0),tt=function d(et,Yt){function qt(Vt){try{return et.getContext(Vt,Yt)}catch(Tr){return null}}return qt("webgl")||qt("experimental-webgl")||qt("webgl-experimental")}(Tr,et)}return tt?{gl:tt,canvas:Tr,container:Vt,extensions:je,optionalExtensions:ct,pixelRatio:ht,profile:Me,cachedCode:Se,onDone:Je,onDestroy:We}:(We(),Je("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function r(et,Yt){for(var qt=Array(et),Vt=0;Vt<et;++Vt)qt[Vt]=Yt(Vt);return qt}function g(et){var Yt,qt;return Yt=(65535<et)<<4,Yt|=qt=(255<(et>>>=Yt))<<3,(Yt|=qt=(15<(et>>>=qt))<<2)|(qt=(3<(et>>>=qt))<<1)|et>>>qt>>1}function s(){function et(Vt){e:{for(var Tr=16;268435456>=Tr;Tr*=16)if(Vt<=Tr){Vt=Tr;break e}Vt=0}return 0<(Tr=qt[g(Vt)>>2]).length?Tr.pop():new ArrayBuffer(Vt)}function Yt(Vt){qt[g(Vt.byteLength)>>2].push(Vt)}var qt=r(8,function(){return[]});return{alloc:et,free:Yt,allocType:function(Vt,Tr){var tt=null;switch(Vt){case 5120:tt=new Int8Array(et(Tr),0,Tr);break;case 5121:tt=new Uint8Array(et(Tr),0,Tr);break;case 5122:tt=new Int16Array(et(2*Tr),0,Tr);break;case 5123:tt=new Uint16Array(et(2*Tr),0,Tr);break;case 5124:tt=new Int32Array(et(4*Tr),0,Tr);break;case 5125:tt=new Uint32Array(et(4*Tr),0,Tr);break;case 5126:tt=new Float32Array(et(4*Tr),0,Tr);break;default:return null}return tt.length!==Tr?tt.subarray(0,Tr):tt},freeType:function(Vt){Yt(Vt.buffer)}}}function b(et){return!!et&&"object"==typeof et&&Array.isArray(et.shape)&&Array.isArray(et.stride)&&"number"==typeof et.offset&&et.shape.length===et.stride.length&&(Array.isArray(et.data)||be(et.data))}function x(et,Yt,qt,Vt,Tr,tt){for(var je=0;je<Yt;++je)for(var ct=et[je],ht=0;ht<qt;++ht)for(var Me=ct[ht],Se=0;Se<Vt;++Se)Tr[tt++]=Me[Se]}function S(et,Yt,qt,Vt,Tr){for(var tt=1,je=qt+1;je<Yt.length;++je)tt*=Yt[je];var ct=Yt[qt];if(Yt.length-qt==4){var ht=Yt[qt+1],Me=Yt[qt+2];for(Yt=Yt[qt+3],je=0;je<ct;++je)x(et[je],ht,Me,Yt,Vt,Tr),Tr+=tt}else for(je=0;je<ct;++je)S(et[je],Yt,qt+1,Vt,Tr),Tr+=tt}function p(et){return 0|ye[Object.prototype.toString.call(et)]}function w(et,Yt){for(var qt=0;qt<Yt.length;++qt)et[qt]=Yt[qt]}function l(et,Yt,qt,Vt,Tr,tt,je){for(var ct=0,ht=0;ht<qt;++ht)for(var Me=0;Me<Vt;++Me)et[ct++]=Yt[Tr*ht+tt*Me+je]}function T(et){for(var Yt=we.allocType(5123,et.length),qt=0;qt<et.length;++qt)if(isNaN(et[qt]))Yt[qt]=65535;else if(et[qt]===1/0)Yt[qt]=31744;else if(et[qt]===-1/0)Yt[qt]=64512;else{nt[0]=et[qt];var Vt=(tt=gt[0])>>>31<<15,Tr=(tt<<1>>>24)-127,tt=tt>>13&1023;Yt[qt]=-24>Tr?Vt:-14>Tr?Vt+(tt+1024>>-14-Tr):15<Tr?Vt+31744:Vt+(Tr+15<<10)+tt}return Yt}function M(et){return Array.isArray(et)||be(et)}function f(et){return"[object "+et+"]"}function u(et){return Array.isArray(et)&&(0===et.length||"number"==typeof et[0])}function h(et){return!(!Array.isArray(et)||0===et.length||!M(et[0]))}function o(et){return Object.prototype.toString.call(et)}function C(et){if(!et)return!1;var Yt=o(et);return 0<=Pe.indexOf(Yt)||u(et)||h(et)||b(et)}function R(et,Yt){36193===et.type?(et.data=T(Yt),we.freeType(Yt)):et.data=Yt}function z(et,Yt,qt,Vt,Tr,tt){if(et=void 0!==Xe[et]?Xe[et]:Bt[et]*Ze[Yt],tt&&(et*=6),Tr){for(Vt=0;1<=qt;)Vt+=et*qt*qt,qt/=2;return Vt}return et*qt*Vt}function F(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function U(et,Yt,qt,Vt,Tr,tt,je){function ct(Me){var Se;Se=null===Yt.next?5121:Yt.next.colorAttachments[0].texture._texture.type;var Je=0,We=0,st=Vt.framebufferWidth,lt=Vt.framebufferHeight,pt=null;return be(Me)?pt=Me:Me&&(Je=0|Me.x,We=0|Me.y,st=0|(Me.width||Vt.framebufferWidth-Je),lt=0|(Me.height||Vt.framebufferHeight-We),pt=Me.data||null),qt(),Me=st*lt*4,pt||(5121===Se?pt=new Uint8Array(Me):5126===Se&&(pt=pt||new Float32Array(Me))),et.pixelStorei(3333,4),et.readPixels(Je,We,st,lt,6408,Se,pt),pt}return function(Me){return Me&&"framebuffer"in Me?function ht(Me){var Se;return Yt.setFBO({framebuffer:Me.framebuffer},function(){Se=ct(Me)}),Se}(Me):ct(Me)}}function ne(et,Yt){return et>>>Yt|et<<32-Yt}function W(et,Yt){var qt=(65535&et)+(65535&Yt);return(et>>16)+(Yt>>16)+(qt>>16)<<16|65535&qt}function G(et){return Array.prototype.slice.call(et)}function $(et){return G(et).join("")}function V(et){function Yt(){var Se=[],Je=[];return le(function(){Se.push.apply(Se,G(arguments))},{def:function(){var We="v"+Tr++;return Je.push(We),0<arguments.length&&(Se.push(We,"="),Se.push.apply(Se,G(arguments)),Se.push(";")),We},toString:function(){return $([0<Je.length?"var "+Je.join(",")+";":"",$(Se)])}})}function qt(){function Se(pt,Ct){We(pt,Ct,"=",Je.def(pt,Ct),";")}var Je=Yt(),We=Yt(),st=Je.toString,lt=We.toString;return le(function(){Je.apply(Je,G(arguments))},{def:Je.def,entry:Je,exit:We,save:Se,set:function(pt,Ct,Dt){Se(pt,Ct),Je(pt,Ct,"=",Dt,";")},toString:function(){return st()+lt()}})}var Vt=et&&et.cache,Tr=0,tt=[],je=[],ct=[],ht=Yt(),Me={};return{global:ht,link:function(Se,Je){var We=Je&&Je.stable;if(!We)for(var st=0;st<je.length;++st)if(je[st]===Se&&!ct[st])return tt[st];return st="g"+Tr++,tt.push(st),je.push(Se),ct.push(We),st},block:Yt,proc:function(Se,Je){function We(){var Ct="a"+st.length;return st.push(Ct),Ct}var st=[];Je=Je||0;for(var lt=0;lt<Je;++lt)We();var pt=(lt=qt()).toString;return Me[Se]=le(lt,{arg:We,toString:function(){return $(["function(",st.join(),"){",pt(),"}"])}})},scope:qt,cond:function(){var Se=$(arguments),Je=qt(),We=qt(),st=Je.toString,lt=We.toString;return le(Je,{then:function(){return Je.apply(Je,G(arguments)),this},else:function(){return We.apply(We,G(arguments)),this},toString:function(){var pt=lt();return pt&&(pt="else{"+pt+"}"),$(["if(",Se,"){",st(),"}",pt])}})},compile:function(){var Se=['"use strict";',ht,"return {"];Object.keys(Me).forEach(function(st){Se.push('"',st,'":',Me[st].toString(),",")}),Se.push("}");var We,Je=$(Se).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Vt&&(We=function oe(et){for(var qt,Yt="",Vt=0;Vt<et.length;Vt++)qt=et.charCodeAt(Vt),Yt+="0123456789abcdef".charAt(qt>>>4&15)+"0123456789abcdef".charAt(15&qt);return Yt}(function X(et){for(var Yt=Array(et.length>>2),Vt=0;Vt<Yt.length;Vt++)Yt[Vt]=0;for(Vt=0;Vt<8*et.length;Vt+=8)Yt[Vt>>5]|=(255&et.charCodeAt(Vt/8))<<24-Vt%32;var Tr,tt,je,ct,ht,Me,Se,Je,We,st,lt,qt=8*et.length;for(et=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Vt=Array(64),Yt[qt>>5]|=128<<24-qt%32,Yt[15+(qt+64>>9<<4)]=qt,Je=0;Je<Yt.length;Je+=16){for(qt=et[0],Tr=et[1],tt=et[2],je=et[3],ct=et[4],ht=et[5],Me=et[6],Se=et[7],We=0;64>We;We++){var pt;16>We?Vt[We]=Yt[We+Je]:(st=We,lt=W(lt=ne(lt=Vt[We-2],17)^ne(lt,19)^lt>>>10,Vt[We-7]),pt=ne(pt=Vt[We-15],7)^ne(pt,18)^pt>>>3,Vt[st]=W(W(lt,pt),Vt[We-16])),st=W(W(W(W(Se,st=ne(st=ct,6)^ne(st,11)^ne(st,25)),ct&ht^~ct&Me),ar[We]),Vt[We]),lt=W(Se=ne(Se=qt,2)^ne(Se,13)^ne(Se,22),qt&Tr^qt&tt^Tr&tt),Se=Me,Me=ht,ht=ct,ct=W(je,st),je=tt,tt=Tr,Tr=qt,qt=W(st,lt)}et[0]=W(qt,et[0]),et[1]=W(Tr,et[1]),et[2]=W(tt,et[2]),et[3]=W(je,et[3]),et[4]=W(ct,et[4]),et[5]=W(ht,et[5]),et[6]=W(Me,et[6]),et[7]=W(Se,et[7])}for(Yt="",Vt=0;Vt<32*et.length;Vt+=8)Yt+=String.fromCharCode(et[Vt>>5]>>>24-Vt%32&255);return Yt}(function se(et){for(var Vt,Tr,Yt="",qt=-1;++qt<et.length;)Vt=et.charCodeAt(qt),Tr=qt+1<et.length?et.charCodeAt(qt+1):0,55296<=Vt&&56319>=Vt&&56320<=Tr&&57343>=Tr&&(Vt=65536+((1023&Vt)<<10)+(1023&Tr),qt++),127>=Vt?Yt+=String.fromCharCode(Vt):2047>=Vt?Yt+=String.fromCharCode(192|Vt>>>6&31,128|63&Vt):65535>=Vt?Yt+=String.fromCharCode(224|Vt>>>12&15,128|Vt>>>6&63,128|63&Vt):2097151>=Vt&&(Yt+=String.fromCharCode(240|Vt>>>18&7,128|Vt>>>12&63,128|Vt>>>6&63,128|63&Vt));return Yt}(Je))),Vt[We])?Vt[We].apply(null,je):(Je=Function.apply(null,tt.concat(Je)),Vt&&(Vt[We]=Je),Je.apply(null,je))}}}function H(et){return Array.isArray(et)||be(et)||b(et)}function q(et){return et.sort(function(Yt,qt){return"viewport"===Yt?-1:"viewport"===qt?1:Yt<qt?-1:1})}function K(et,Yt,qt,Vt){this.thisDep=et,this.contextDep=Yt,this.propDep=qt,this.append=Vt}function Y(et){return et&&!(et.thisDep||et.contextDep||et.propDep)}function te(et){return new K(!1,!1,!1,et)}function J(et,Yt){var qt=et.type;if(0===qt)return new K(!0,1<=(qt=et.data.length),2<=qt,Yt);if(4===qt)return new K((qt=et.data).thisDep,qt.contextDep,qt.propDep,Yt);if(5===qt)return new K(!1,!1,!1,Yt);if(6===qt){for(var Vt=qt=!1,Tr=!1,tt=0;tt<et.data.length;++tt){var je=et.data[tt];1===je.type?Tr=!0:2===je.type?Vt=!0:3===je.type?qt=!0:0===je.type?(qt=!0,1<=(je=je.data)&&(Vt=!0),2<=je&&(Tr=!0)):4===je.type&&(qt=qt||je.data.thisDep,Vt=Vt||je.data.contextDep,Tr=Tr||je.data.propDep)}return new K(qt,Vt,Tr,Yt)}return new K(3===qt,2===qt,1===qt,Yt)}function j(et,Yt,qt,Vt,Tr,tt,je,ct,ht,Me,Se,Je,We,st,lt,pt){function Ct(Ht){return Ht.replace(".","_")}function Dt(Ht,dr,rn){var ln=Ct(Ht);ra.push(Ht),Un[ln]=kn[ln]=!!rn,Gn[ln]=dr}function Gt(Ht,dr,rn){var ln=Ct(Ht);ra.push(Ht),Array.isArray(rn)?(kn[ln]=rn.slice(),Un[ln]=rn.slice()):kn[ln]=Un[ln]=rn,On[ln]=dr}function fr(){var Ht=V({cache:lt}),dr=Ht.link,rn=Ht.global;Ht.id=oi++,Ht.batchId="0";var ln=dr(Xn),or=Ht.shared={props:"a0"};Object.keys(Xn).forEach(function(Wt){or[Wt]=rn.def(ln,".",Wt)});var Br=Ht.next={},Rt=Ht.current={};Object.keys(On).forEach(function(Wt){Array.isArray(kn[Wt])&&(Br[Wt]=rn.def(or.next,".",Wt),Rt[Wt]=rn.def(or.current,".",Wt))});var Lt=Ht.constants={};Object.keys(pa).forEach(function(Wt){Lt[Wt]=rn.def(JSON.stringify(pa[Wt]))}),Ht.invoke=function(Wt,hr){switch(hr.type){case 0:var vn=["this",or.context,or.props,Ht.batchId];return Wt.def(dr(hr.data),".call(",vn.slice(0,Math.max(hr.data.length+1,4)),")");case 1:return Wt.def(or.props,hr.data);case 2:return Wt.def(or.context,hr.data);case 3:return Wt.def("this",hr.data);case 4:return hr.data.append(Ht,Wt),hr.data.ref;case 5:return hr.data.toString();case 6:return hr.data.map(function(Fn){return Ht.invoke(Wt,Fn)})}},Ht.attribCache={};var Pt={};return Ht.scopeAttrib=function(Wt){if((Wt=Yt.id(Wt))in Pt)return Pt[Wt];var hr=Me.scope[Wt];return hr||(hr=Me.scope[Wt]=new Va),Pt[Wt]=dr(hr)},Ht}function it(Ht,dr,rn,ln,or){function Br(jn){var ia=Lt[jn];ia&&(Wt[jn]=ia)}var Rt=function Ar(Ht,dr){if("string"==typeof(rn=Ht.static).frag&&"string"==typeof rn.vert){if(0<Object.keys(dr.dynamic).length)return null;var rn=dr.static,ln=Object.keys(rn);if(0<ln.length&&"number"==typeof rn[ln[0]]){for(var or=[],Br=0;Br<ln.length;++Br)or.push([0|rn[ln[Br]],ln[Br]]);return or}}return null}(Ht,dr),Lt=function Lr(Ht,dr,rn){function ln(Lt){if(Lt in or){var Pt=or[Lt];Lt=!0;var vn,Fn,Wt=0|Pt.x,hr=0|Pt.y;return"width"in Pt?vn=0|Pt.width:Lt=!1,"height"in Pt?Fn=0|Pt.height:Lt=!1,new K(!Lt&&dr&&dr.thisDep,!Lt&&dr&&dr.contextDep,!Lt&&dr&&dr.propDep,function(_n,jn){var ia=_n.shared.context,va=vn;"width"in Pt||(va=jn.def(ia,".","framebufferWidth","-",Wt));var _a=Fn;return"height"in Pt||(_a=jn.def(ia,".","framebufferHeight","-",hr)),[Wt,hr,va,_a]})}if(Lt in Br){var Jn=Br[Lt];return Lt=J(Jn,function(_n,jn){var Aa=_n.invoke(jn,Jn),ia=_n.shared.context,va=jn.def(Aa,".x|0"),_a=jn.def(Aa,".y|0");return[va,_a,jn.def('"width" in ',Aa,"?",Aa,".width|0:","(",ia,".","framebufferWidth","-",va,")"),Aa=jn.def('"height" in ',Aa,"?",Aa,".height|0:","(",ia,".","framebufferHeight","-",_a,")")]}),dr&&(Lt.thisDep=Lt.thisDep||dr.thisDep,Lt.contextDep=Lt.contextDep||dr.contextDep,Lt.propDep=Lt.propDep||dr.propDep),Lt}return dr?new K(dr.thisDep,dr.contextDep,dr.propDep,function(_n,jn){var ia=_n.shared.context;return[0,0,jn.def(ia,".","framebufferWidth"),jn.def(ia,".","framebufferHeight")]}):null}var or=Ht.static,Br=Ht.dynamic;if(Ht=ln("viewport")){var Rt=Ht;Ht=new K(Ht.thisDep,Ht.contextDep,Ht.propDep,function(Lt,Pt){var Wt=Rt.append(Lt,Pt),hr=Lt.shared.context;return Pt.set(hr,".viewportWidth",Wt[2]),Pt.set(hr,".viewportHeight",Wt[3]),Wt})}return{viewport:Ht,scissor_box:ln("scissor.box")}}(Ht,Fn=function Jr(Ht,dr){var rn=Ht.static,ln=Ht.dynamic;if("framebuffer"in rn){var or=rn.framebuffer;return or?(or=ct.getFramebuffer(or),te(function(Rt,Lt){var Pt=Rt.link(or),Wt=Rt.shared;return Lt.set(Wt.framebuffer,".next",Pt),Lt.set(Wt=Wt.context,".framebufferWidth",Pt+".width"),Lt.set(Wt,".framebufferHeight",Pt+".height"),Pt})):te(function(Rt,Lt){var Pt=Rt.shared;return Lt.set(Pt.framebuffer,".next","null"),Lt.set(Pt=Pt.context,".framebufferWidth",Pt+".drawingBufferWidth"),Lt.set(Pt,".framebufferHeight",Pt+".drawingBufferHeight"),"null"})}if("framebuffer"in ln){var Br=ln.framebuffer;return J(Br,function(Rt,Lt){var hr=Rt.invoke(Lt,Br),Pt=Rt.shared,Wt=Pt.framebuffer;return hr=Lt.def(Wt,".getFramebuffer(",hr,")"),Lt.set(Wt,".next",hr),Lt.set(Pt=Pt.context,".framebufferWidth",hr+"?"+hr+".width:"+Pt+".drawingBufferWidth"),Lt.set(Pt,".framebufferHeight",hr+"?"+hr+".height:"+Pt+".drawingBufferHeight"),hr})}return null}(Ht)),Pt=function mr(Ht,dr){function rn(_n,jn){if(_n in ln){var ia=0|ln[_n];return jn?Br.offset=ia:Br.instances=ia,te(function(_a,sa){return jn&&(_a.OFFSET=ia),ia})}if(_n in or){var va=or[_n];return J(va,function(_a,sa){var Aa=_a.invoke(sa,va);return jn&&(_a.OFFSET=Aa),Aa})}if(jn){if(Pt)return te(function(_a,sa){return _a.OFFSET=0});if(Rt)return new K(Lt.thisDep,Lt.contextDep,Lt.propDep,function(_a,sa){return sa.def(_a.shared.vao+".currentVAO?"+_a.shared.vao+".currentVAO.offset:0")})}else if(Rt)return new K(Lt.thisDep,Lt.contextDep,Lt.propDep,function(_a,sa){return sa.def(_a.shared.vao+".currentVAO?"+_a.shared.vao+".currentVAO.instances:-1")});return null}var ln=Ht.static,or=Ht.dynamic,Br={},Rt=!1,Lt=function(){if("vao"in ln){var _n=ln.vao;return null!==_n&&null===Me.getVAO(_n)&&(_n=Me.createVAO(_n)),Rt=!0,Br.vao=_n,te(function(ia){var va=Me.getVAO(_n);return va?ia.link(va):"null"})}if("vao"in or){Rt=!0;var jn=or.vao;return J(jn,function(ia,va){var _a=ia.invoke(va,jn);return va.def(ia.shared.vao+".getVAO("+_a+")")})}return null}(),Pt=!1,Wt=function(){if("elements"in ln){if(Br.elements=_n=ln.elements,H(_n)){var jn=Br.elements=tt.create(_n,!0),_n=tt.getElements(jn);Pt=!0}else _n&&(_n=tt.getElements(_n),Pt=!0);return(jn=te(function(va,_a){if(_n){var sa=va.link(_n);return va.ELEMENTS=sa}return va.ELEMENTS=null})).value=_n,jn}if("elements"in or){Pt=!0;var ia=or.elements;return J(ia,function(va,_a){var xo=(sa=va.shared).isBufferArgs,sa=sa.elements,Ao=va.invoke(_a,ia),Aa=_a.def("null");return xo=_a.def(xo,"(",Ao,")"),Ao=va.cond(xo).then(Aa,"=",sa,".createStream(",Ao,");").else(Aa,"=",sa,".getElements(",Ao,");"),_a.entry(Ao),_a.exit(va.cond(xo).then(sa,".destroyStream(",Aa,");")),va.ELEMENTS=Aa})}return Rt?new K(Lt.thisDep,Lt.contextDep,Lt.propDep,function(va,_a){return _a.def(va.shared.vao+".currentVAO?"+va.shared.elements+".getElements("+va.shared.vao+".currentVAO.elements):null")}):null}(),hr=rn("offset",!0),vn=function(){if("primitive"in ln){var _n=ln.primitive;return Br.primitive=_n,te(function(ia,va){return Ie[_n]})}if("primitive"in or){var jn=or.primitive;return J(jn,function(ia,va){var _a=ia.constants.primTypes,sa=ia.invoke(va,jn);return va.def(_a,"[",sa,"]")})}return Pt?Y(Wt)?te(Wt.value?function(ia,va){return va.def(ia.ELEMENTS,".primType")}:function(){return 4}):new K(Wt.thisDep,Wt.contextDep,Wt.propDep,function(ia,va){var _a=ia.ELEMENTS;return va.def(_a,"?",_a,".primType:",4)}):Rt?new K(Lt.thisDep,Lt.contextDep,Lt.propDep,function(ia,va){return va.def(ia.shared.vao+".currentVAO?"+ia.shared.vao+".currentVAO.primitive:4")}):null}(),Fn=function(){if("count"in ln){var _n=0|ln.count;return Br.count=_n,te(function(){return _n})}if("count"in or){var jn=or.count;return J(jn,function(ia,va){return ia.invoke(va,jn)})}return Pt?Y(Wt)?Wt?hr?new K(hr.thisDep,hr.contextDep,hr.propDep,function(ia,va){return va.def(ia.ELEMENTS,".vertCount-",ia.OFFSET)}):te(function(ia,va){return va.def(ia.ELEMENTS,".vertCount")}):te(function(){return-1}):new K(Wt.thisDep||hr.thisDep,Wt.contextDep||hr.contextDep,Wt.propDep||hr.propDep,function(ia,va){var _a=ia.ELEMENTS;return ia.OFFSET?va.def(_a,"?",_a,".vertCount-",ia.OFFSET,":-1"):va.def(_a,"?",_a,".vertCount:-1")}):Rt?new K(Lt.thisDep,Lt.contextDep,Lt.propDep,function(ia,va){return va.def(ia.shared.vao,".currentVAO?",ia.shared.vao,".currentVAO.count:-1")}):null}(),Jn=rn("instances",!1);return{elements:Wt,primitive:vn,count:Fn,instances:Jn,offset:hr,vao:Lt,vaoActive:Rt,elementsActive:Pt,static:Br}}(Ht),Wt=function wr(Ht,dr){var rn=Ht.static,ln=Ht.dynamic,or={};return ra.forEach(function(Br){function Rt(Pt,Wt){if(Br in rn){var hr=Pt(rn[Br]);or[Lt]=te(function(){return hr})}else if(Br in ln){var vn=ln[Br];or[Lt]=J(vn,function(Fn,Jn){return Wt(Fn,Jn,Fn.invoke(Jn,vn))})}}var Lt=Ct(Br);switch(Br){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return Rt(function(Pt){return Pt},function(Pt,Wt,hr){return hr});case"depth.func":return Rt(function(Pt){return rr[Pt]},function(Pt,Wt,hr){return Wt.def(Pt.constants.compareFuncs,"[",hr,"]")});case"depth.range":return Rt(function(Pt){return Pt},function(Pt,Wt,hr){return[Wt.def("+",hr,"[0]"),Wt=Wt.def("+",hr,"[1]")]});case"blend.func":return Rt(function(Pt){return[nr["srcRGB"in Pt?Pt.srcRGB:Pt.src],nr["dstRGB"in Pt?Pt.dstRGB:Pt.dst],nr["srcAlpha"in Pt?Pt.srcAlpha:Pt.src],nr["dstAlpha"in Pt?Pt.dstAlpha:Pt.dst]]},function(Pt,Wt,hr){function vn(jn,ia){return Wt.def('"',jn,ia,'" in ',hr,"?",hr,".",jn,ia,":",hr,".",jn)}Pt=Pt.constants.blendFuncs;var Fn=vn("src","RGB"),_n=vn("dst","RGB"),Jn=(Fn=Wt.def(Pt,"[",Fn,"]"),Wt.def(Pt,"[",vn("src","Alpha"),"]"));return[Fn,_n=Wt.def(Pt,"[",_n,"]"),Jn,Pt=Wt.def(Pt,"[",vn("dst","Alpha"),"]")]});case"blend.equation":return Rt(function(Pt){return"string"==typeof Pt?[ai[Pt],ai[Pt]]:"object"==typeof Pt?[ai[Pt.rgb],ai[Pt.alpha]]:void 0},function(Pt,Wt,hr){var vn=Pt.constants.blendEquations,Fn=Wt.def(),Jn=Wt.def();return(Pt=Pt.cond("typeof ",hr,'==="string"')).then(Fn,"=",Jn,"=",vn,"[",hr,"];"),Pt.else(Fn,"=",vn,"[",hr,".rgb];",Jn,"=",vn,"[",hr,".alpha];"),Wt(Pt),[Fn,Jn]});case"blend.color":return Rt(function(Pt){return r(4,function(Wt){return+Pt[Wt]})},function(Pt,Wt,hr){return r(4,function(vn){return Wt.def("+",hr,"[",vn,"]")})});case"stencil.mask":return Rt(function(Pt){return 0|Pt},function(Pt,Wt,hr){return Wt.def(hr,"|0")});case"stencil.func":return Rt(function(Pt){return[rr[Pt.cmp||"keep"],Pt.ref||0,"mask"in Pt?Pt.mask:-1]},function(Pt,Wt,hr){return[Pt=Wt.def('"cmp" in ',hr,"?",Pt.constants.compareFuncs,"[",hr,".cmp]",":",7680),Wt.def(hr,".ref|0"),Wt=Wt.def('"mask" in ',hr,"?",hr,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return Rt(function(Pt){return["stencil.opBack"===Br?1029:1028,br[Pt.fail||"keep"],br[Pt.zfail||"keep"],br[Pt.zpass||"keep"]]},function(Pt,Wt,hr){function vn(Jn){return Wt.def('"',Jn,'" in ',hr,"?",Fn,"[",hr,".",Jn,"]:",7680)}var Fn=Pt.constants.stencilOps;return["stencil.opBack"===Br?1029:1028,vn("fail"),vn("zfail"),vn("zpass")]});case"polygonOffset.offset":return Rt(function(Pt){return[0|Pt.factor,0|Pt.units]},function(Pt,Wt,hr){return[Wt.def(hr,".factor|0"),Wt=Wt.def(hr,".units|0")]});case"cull.face":return Rt(function(Pt){var Wt=0;return"front"===Pt?Wt=1028:"back"===Pt&&(Wt=1029),Wt},function(Pt,Wt,hr){return Wt.def(hr,'==="front"?',1028,":",1029)});case"frontFace":return Rt(function(Pt){return Hr[Pt]},function(Pt,Wt,hr){return Wt.def(hr+'==="cw"?2304:2305')});case"colorMask":return Rt(function(Pt){return Pt.map(function(Wt){return!!Wt})},function(Pt,Wt,hr){return r(4,function(vn){return"!!"+hr+"["+vn+"]"})});case"sample.coverage":return Rt(function(Pt){return["value"in Pt?Pt.value:1,!!Pt.invert]},function(Pt,Wt,hr){return[Wt.def('"value" in ',hr,"?+",hr,".value:1"),Wt=Wt.def("!!",hr,".invert")]})}}),or}(Ht),hr=function en(Ht,dr,rn){function ln(Wt){if(Wt in or){var hr=Yt.id(or[Wt]);return(Wt=te(function(){return hr})).id=hr,Wt}if(Wt in Br){var vn=Br[Wt];return J(vn,function(Fn,Jn){var _n=Fn.invoke(Jn,vn);return Jn.def(Fn.shared.strings,".id(",_n,")")})}return null}var or=Ht.static,Br=Ht.dynamic,Rt=ln("frag"),Lt=ln("vert"),Pt=null;return Y(Rt)&&Y(Lt)?(Pt=Se.program(Lt.id,Rt.id,null,rn),Ht=te(function(Wt,hr){return Wt.link(Pt)})):Ht=new K(Rt&&Rt.thisDep||Lt&&Lt.thisDep,Rt&&Rt.contextDep||Lt&&Lt.contextDep,Rt&&Rt.propDep||Lt&&Lt.propDep,function(Wt,hr){var Fn,Jn,vn=Wt.shared.shader;return Fn=Rt?Rt.append(Wt,hr):hr.def(vn,".","frag"),Jn=Lt?Lt.append(Wt,hr):hr.def(vn,".","vert"),hr.def(vn+".program("+Jn+","+Fn+")")}),{frag:Rt,vert:Lt,progVar:Ht,program:Pt}}(Ht,0,Rt);Br("viewport"),Br(Ct("scissor.box"));var Fn,vn=0<Object.keys(Wt).length;if((Fn={framebuffer:Fn,draw:Pt,shader:hr,state:Wt,dirty:vn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function pr(Ht){var rn,dr=Ht.static;if(Ht=Ht.dynamic,"profile"in dr){var ln=!!dr.profile;(rn=te(function(Br,Rt){return ln})).enable=ln}else if("profile"in Ht){var or=Ht.profile;rn=J(or,function(Br,Rt){return Br.invoke(Rt,or)})}return rn}(Ht),Fn.uniforms=function Wr(Ht,dr){var rn=Ht.static,ln=Ht.dynamic,or={};return Object.keys(rn).forEach(function(Br){var Lt,Rt=rn[Br];if("number"==typeof Rt||"boolean"==typeof Rt)Lt=te(function(){return Rt});else if("function"==typeof Rt){var Pt=Rt._reglType;"texture2d"===Pt||"textureCube"===Pt?Lt=te(function(Wt){return Wt.link(Rt)}):("framebuffer"===Pt||"framebufferCube"===Pt)&&(Lt=te(function(Wt){return Wt.link(Rt.color[0])}))}else M(Rt)&&(Lt=te(function(Wt){return Wt.global.def("[",r(Rt.length,function(hr){return Rt[hr]}),"]")}));Lt.value=Rt,or[Br]=Lt}),Object.keys(ln).forEach(function(Br){var Rt=ln[Br];or[Br]=J(Rt,function(Lt,Pt){return Lt.invoke(Pt,Rt)})}),or}(rn),Fn.drawVAO=Fn.scopeVAO=Pt.vao,!Fn.drawVAO&&hr.program&&!Rt&&qt.angle_instanced_arrays&&Pt.static.elements){var Jn=!0;if(Ht=hr.program.attributes.map(function(jn){return jn=dr.static[jn],Jn=Jn&&!!jn,jn}),Jn&&0<Ht.length){var _n=Me.getVAO(Me.createVAO({attributes:Ht,elements:Pt.static.elements}));Fn.drawVAO=new K(null,null,null,function(jn,ia){return jn.link(_n)}),Fn.useVAO=!0}}return Rt?Fn.useVAO=!0:Fn.attributes=function Kr(Ht,dr){var rn=Ht.static,ln=Ht.dynamic,or={};return Object.keys(rn).forEach(function(Br){var Rt=rn[Br],Lt=Yt.id(Br),Pt=new Va;if(H(Rt))Pt.state=1,Pt.buffer=Tr.getBuffer(Tr.create(Rt,34962,!1,!0)),Pt.type=0;else if(Wt=Tr.getBuffer(Rt))Pt.state=1,Pt.buffer=Wt,Pt.type=0;else if("constant"in Rt){var hr=Rt.constant;Pt.buffer="null",Pt.state=2,"number"==typeof hr?Pt.x=hr:Ut.forEach(function(ia,va){va<hr.length&&(Pt[ia]=hr[va])})}else{var Wt=H(Rt.buffer)?Tr.getBuffer(Tr.create(Rt.buffer,34962,!1,!0)):Tr.getBuffer(Rt.buffer),vn=0|Rt.offset,Fn=0|Rt.stride,Jn=0|Rt.size,_n=!!Rt.normalized,jn=0;"type"in Rt&&(jn=Ce[Rt.type]),Rt=0|Rt.divisor,Pt.buffer=Wt,Pt.state=1,Pt.size=Jn,Pt.normalized=_n,Pt.type=jn||Wt.dtype,Pt.offset=vn,Pt.stride=Fn,Pt.divisor=Rt}or[Br]=te(function(ia,va){var _a=ia.attribCache;if(Lt in _a)return _a[Lt];var sa={isStream:!1};return Object.keys(Pt).forEach(function(Aa){sa[Aa]=Pt[Aa]}),Pt.buffer&&(sa.buffer=ia.link(Pt.buffer),sa.type=sa.type||sa.buffer+".dtype"),_a[Lt]=sa})}),Object.keys(ln).forEach(function(Br){var Rt=ln[Br];or[Br]=J(Rt,function(Lt,Pt){function Wt(_a){Pt(_n[_a],"=",hr,".",_a,"|0;")}var hr=Lt.invoke(Pt,Rt),vn=Lt.constants,Fn=(Jn=Lt.shared).isBufferArgs,Jn=Jn.buffer,_n={isStream:Pt.def(!1)},jn=new Va;jn.state=1,Object.keys(jn).forEach(function(_a){_n[_a]=Pt.def(""+jn[_a])});var ia=_n.buffer,va=_n.type;return Pt("if(",Fn,"(",hr,")){",_n.isStream,"=true;",ia,"=",Jn,".createStream(",34962,",",hr,");",va,"=",ia,".dtype;","}else{",ia,"=",Jn,".getBuffer(",hr,");","if(",ia,"){",va,"=",ia,".dtype;",'}else if("constant" in ',hr,"){",_n.state,"=",2,";","if(typeof "+hr+'.constant === "number"){',_n[Ut[0]],"=",hr,".constant;",Ut.slice(1).map(function(_a){return _n[_a]}).join("="),"=0;","}else{",Ut.map(function(_a,sa){return _n[_a]+"="+hr+".constant.length>"+sa+"?"+hr+".constant["+sa+"]:0;"}).join(""),"}}else{","if(",Fn,"(",hr,".buffer)){",ia,"=",Jn,".createStream(",34962,",",hr,".buffer);","}else{",ia,"=",Jn,".getBuffer(",hr,".buffer);","}",va,'="type" in ',hr,"?",vn.glTypes,"[",hr,".type]:",ia,".dtype;",_n.normalized,"=!!",hr,".normalized;"),Wt("size"),Wt("offset"),Wt("stride"),Wt("divisor"),Pt("}}"),Pt.exit("if(",_n.isStream,"){",Jn,".destroyStream(",ia,");","}"),_n})}),or}(dr),Fn.context=function Cr(Ht){var dr=Ht.static,rn=Ht.dynamic,ln={};return Object.keys(dr).forEach(function(or){var Br=dr[or];ln[or]=te(function(Rt,Lt){return"number"==typeof Br||"boolean"==typeof Br?""+Br:Rt.link(Br)})}),Object.keys(rn).forEach(function(or){var Br=rn[or];ln[or]=J(Br,function(Rt,Lt){return Rt.invoke(Lt,Br)})}),ln}(ln),Fn}function It(Ht,dr,rn){var ln=Ht.shared.context,or=Ht.scope();Object.keys(rn).forEach(function(Br){dr.save(ln,"."+Br);var Rt=rn[Br].append(Ht,dr);Array.isArray(Rt)?or(ln,".",Br,"=[",Rt.join(),"];"):or(ln,".",Br,"=",Rt,";")}),dr(or)}function Qt(Ht,dr,rn,ln){var Rt,or=(Lt=Ht.shared).gl,Br=Lt.framebuffer;gn&&(Rt=dr.def(Lt.extensions,".webgl_draw_buffers"));var Lt=(Pt=Ht.constants).drawBuffer,Pt=Pt.backBuffer;Ht=rn?rn.append(Ht,dr):dr.def(Br,".next"),ln||dr("if(",Ht,"!==",Br,".cur){"),dr("if(",Ht,"){",or,".bindFramebuffer(",36160,",",Ht,".framebuffer);"),gn&&dr(Rt,".drawBuffersWEBGL(",Lt,"[",Ht,".colorAttachments.length]);"),dr("}else{",or,".bindFramebuffer(",36160,",null);"),gn&&dr(Rt,".drawBuffersWEBGL(",Pt,");"),dr("}",Br,".cur=",Ht,";"),ln||dr("}")}function ir(Ht,dr,rn){var ln=Ht.shared,or=ln.gl,Br=Ht.current,Rt=Ht.next,Lt=ln.current,Pt=ln.next,Wt=Ht.cond(Lt,".dirty");ra.forEach(function(hr){var vn,Fn;if(!((hr=Ct(hr))in rn.state))if(hr in Rt){vn=Rt[hr],Fn=Br[hr];var Jn=r(kn[hr].length,function(_n){return Wt.def(vn,"[",_n,"]")});Wt(Ht.cond(Jn.map(function(_n,jn){return _n+"!=="+Fn+"["+jn+"]"}).join("||")).then(or,".",On[hr],"(",Jn,");",Jn.map(function(_n,jn){return Fn+"["+jn+"]="+_n}).join(";"),";"))}else vn=Wt.def(Pt,".",hr),Jn=Ht.cond(vn,"!==",Lt,".",hr),Wt(Jn),hr in Gn?Jn(Ht.cond(vn).then(or,".enable(",Gn[hr],");").else(or,".disable(",Gn[hr],");"),Lt,".",hr,"=",vn,";"):Jn(or,".",On[hr],"(",vn,");",Lt,".",hr,"=",vn,";")}),0===Object.keys(rn.state).length&&Wt(Lt,".dirty=false;"),dr(Wt)}function Or(Ht,dr,rn,ln){var Pt,or=Ht.shared,Br=Ht.current,Rt=or.current,Lt=or.gl;q(Object.keys(rn)).forEach(function(Wt){var hr=rn[Wt];if(!ln||ln(hr)){var vn=hr.append(Ht,dr);if(Gn[Wt]){var Fn=Gn[Wt];Y(hr)?(Pt=Ht.link(vn,{stable:!0}),dr(Ht.cond(Pt).then(Lt,".enable(",Fn,");").else(Lt,".disable(",Fn,");")),dr(Rt,".",Wt,"=",Pt,";")):(dr(Ht.cond(vn).then(Lt,".enable(",Fn,");").else(Lt,".disable(",Fn,");")),dr(Rt,".",Wt,"=",vn,";"))}else if(M(vn)){var Jn=Br[Wt];dr(Lt,".",On[Wt],"(",vn,");",vn.map(function(_n,jn){return Jn+"["+jn+"]="+_n}).join(";"),";")}else Y(hr)?(Pt=Ht.link(vn,{stable:!0}),dr(Lt,".",On[Wt],"(",Pt,");",Rt,".",Wt,"=",Pt,";")):dr(Lt,".",On[Wt],"(",vn,");",Rt,".",Wt,"=",vn,";")}})}function qr(Ht,dr){Er&&(Ht.instancing=dr.def(Ht.shared.extensions,".angle_instanced_arrays"))}function Ir(Ht,dr,rn,ln,or){function Br(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function Rt(jn){jn(Jn=dr.def(),"=",Br(),";"),"string"==typeof or?jn(hr,".count+=",or,";"):jn(hr,".count++;"),st&&(ln?jn(_n=dr.def(),"=",Fn,".getNumPendingQueries();"):jn(Fn,".beginQuery(",hr,");"))}function Lt(jn){jn(hr,".cpuTime+=",Br(),"-",Jn,";"),st&&(ln?jn(Fn,".pushScopeStats(",_n,",",Fn,".getNumPendingQueries(),",hr,");"):jn(Fn,".endQuery();"))}function Pt(jn){var ia=dr.def(vn,".profile");dr(vn,".profile=",jn,";"),dr.exit(vn,".profile=",ia,";")}var Jn,_n,Wt=Ht.shared,hr=Ht.stats,vn=Wt.current,Fn=Wt.timer;if(rn=rn.profile){if(Y(rn))return void(rn.enable?(Rt(dr),Lt(dr.exit),Pt("true")):Pt("false"));Pt(rn=rn.append(Ht,dr))}else rn=dr.def(vn,".profile");Rt(Wt=Ht.block()),dr("if(",rn,"){",Wt,"}"),Lt(Ht=Ht.block()),dr.exit("if(",rn,"){",Ht,"}")}function kr(Ht,dr,rn,ln,or){var Lt=Ht.shared;ln.forEach(function(Pt){var vn,Wt=Pt.name,hr=rn.attributes[Wt];if(hr){if(!or(hr))return;vn=hr.append(Ht,dr)}else{if(!or(on))return;var Fn=Ht.scopeAttrib(Wt);vn={},Object.keys(new Va).forEach(function(Jn){vn[Jn]=dr.def(Fn,".",Jn)})}!function Rt(Pt,Wt,hr){function vn(){dr("if(!",jn,".buffer){",Jn,".enableVertexAttribArray(",_n,");}");var Aa,sa=hr.type;Aa=hr.size?dr.def(hr.size,"||",Wt):Wt,dr("if(",jn,".type!==",sa,"||",jn,".size!==",Aa,"||",_a.map(function(xo){return jn+"."+xo+"!=="+hr[xo]}).join("||"),"){",Jn,".bindBuffer(",34962,",",ia,".buffer);",Jn,".vertexAttribPointer(",[_n,Aa,sa,hr.normalized,hr.stride,hr.offset],");",jn,".type=",sa,";",jn,".size=",Aa,";",_a.map(function(xo){return jn+"."+xo+"="+hr[xo]+";"}).join(""),"}"),Er&&dr("if(",jn,".divisor!==",sa=hr.divisor,"){",Ht.instancing,".vertexAttribDivisorANGLE(",[_n,sa],");",jn,".divisor=",sa,";}")}function Fn(){dr("if(",jn,".buffer){",Jn,".disableVertexAttribArray(",_n,");",jn,".buffer=null;","}if(",Ut.map(function(sa,Aa){return jn+"."+sa+"!=="+va[Aa]}).join("||"),"){",Jn,".vertexAttrib4f(",_n,",",va,");",Ut.map(function(sa,Aa){return jn+"."+sa+"="+va[Aa]+";"}).join(""),"}")}var Jn=Lt.gl,_n=dr.def(Pt,".location"),jn=dr.def(Lt.attributes,"[",_n,"]"),ia=hr.buffer,va=[hr.x,hr.y,hr.z,hr.w],_a=["buffer","normalized","offset","stride"];1===(Pt=hr.state)?vn():2===Pt?Fn():(dr("if(",Pt,"===",1,"){"),vn(),dr("}else{"),Fn(),dr("}"))}(Ht.link(Pt),function Br(Pt){switch(Pt){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Pt.info.type),vn)})}function Zr(Ht,dr,rn,ln,or,Br){for(var Pt,Rt=Ht.shared,Lt=Rt.gl,Wt=0;Wt<ln.length;++Wt){var _n,hr=(Jn=ln[Wt]).name,vn=Jn.info.type,Fn=rn.uniforms[hr],Jn=Ht.link(Jn)+".location";if(Fn){if(!or(Fn))continue;if(Y(Fn)){if(hr=Fn.value,35678===vn||35680===vn)dr(Lt,".uniform1i(",Jn,",",(vn=Ht.link(hr._texture||hr.color[0]._texture))+".bind());"),dr.exit(vn,".unbind();");else if(35674===vn||35675===vn||35676===vn)Fn=2,35675===vn?Fn=3:35676===vn&&(Fn=4),dr(Lt,".uniformMatrix",Fn,"fv(",Jn,",false,",hr=Ht.global.def("new Float32Array(["+Array.prototype.slice.call(hr)+"])"),");");else{switch(vn){case 5126:Pt="1f";break;case 35664:Pt="2f";break;case 35665:Pt="3f";break;case 35666:Pt="4f";break;case 35670:case 5124:Pt="1i";break;case 35671:case 35667:Pt="2i";break;case 35672:case 35668:Pt="3i";break;case 35673:case 35669:Pt="4i"}dr(Lt,".uniform",Pt,"(",Jn,",",M(hr)?Array.prototype.slice.call(hr):hr,");")}continue}_n=Fn.append(Ht,dr)}else{if(!or(on))continue;_n=dr.def(Rt.uniforms,"[",Yt.id(hr),"]")}switch(35678===vn?dr("if(",_n,"&&",_n,'._reglType==="framebuffer"){',_n,"=",_n,".color[0];","}"):35680===vn&&dr("if(",_n,"&&",_n,'._reglType==="framebufferCube"){',_n,"=",_n,".color[0];","}"),hr=1,vn){case 35678:case 35680:vn=dr.def(_n,"._texture"),dr(Lt,".uniform1i(",Jn,",",vn,".bind());"),dr.exit(vn,".unbind();");continue;case 5124:case 35670:Pt="1i";break;case 35667:case 35671:Pt="2i",hr=2;break;case 35668:case 35672:Pt="3i",hr=3;break;case 35669:case 35673:Pt="4i",hr=4;break;case 5126:Pt="1f";break;case 35664:Pt="2f",hr=2;break;case 35665:Pt="3f",hr=3;break;case 35666:Pt="4f",hr=4;break;case 35674:Pt="Matrix2fv";break;case 35675:Pt="Matrix3fv";break;case 35676:Pt="Matrix4fv"}if("M"===Pt.charAt(0)){dr(Lt,".uniform",Pt,"(",Jn,","),Jn=Math.pow(vn-35674+2,2);var jn=Ht.global.def("new Float32Array(",Jn,")");Array.isArray(_n)?dr("false,(",r(Jn,function(_a){return jn+"["+_a+"]="+_n[_a]}),",",jn,")"):dr("false,(Array.isArray(",_n,")||",_n," instanceof Float32Array)?",_n,":(",r(Jn,function(_a){return jn+"["+_a+"]="+_n+"["+_a+"]"}),",",jn,")"),dr(");")}else{if(1<hr){vn=[];var ia=[];for(Fn=0;Fn<hr;++Fn)Array.isArray(_n)?ia.push(_n[Fn]):ia.push(dr.def(_n+"["+Fn+"]")),Br&&vn.push(dr.def());Br&&dr("if(!",Ht.batchId,"||",vn.map(function(va,_a){return va+"!=="+ia[_a]}).join("||"),"){",vn.map(function(va,_a){return va+"="+ia[_a]+";"}).join("")),dr(Lt,".uniform",Pt,"(",Jn,",",ia.join(","),");")}else Br&&(vn=dr.def(),dr("if(!",Ht.batchId,"||",vn,"!==",_n,"){",vn,"=",_n,";")),dr(Lt,".uniform",Pt,"(",Jn,",",_n,");");Br&&dr("}")}}}function An(Ht,dr,rn,ln){function or(sa){var Aa=hr[sa];return Aa?Aa.append(Ht,Aa.contextDep&&ln.contextDynamic||Aa.propDep?rn:dr):dr.def(Wt,".",sa)}function Br(){function sa(){rn(ia,".drawElementsInstancedANGLE(",[Fn,_n,va,Jn+"<<(("+va+"-5121)>>1)",jn],");")}function Aa(){rn(ia,".drawArraysInstancedANGLE(",[Fn,Jn,_n,jn],");")}vn&&"null"!==vn?_a?sa():(rn("if(",vn,"){"),sa(),rn("}else{"),Aa(),rn("}")):Aa()}function Rt(){function sa(){rn(Pt+".drawElements("+[Fn,_n,va,Jn+"<<(("+va+"-5121)>>1)"]+");")}function Aa(){rn(Pt+".drawArrays("+[Fn,Jn,_n]+");")}vn&&"null"!==vn?_a?sa():(rn("if(",vn,"){"),sa(),rn("}else{"),Aa(),rn("}")):Aa()}var sa,Aa,jn,ia,Lt=Ht.shared,Pt=Lt.gl,Wt=Lt.draw,hr=ln.draw,vn=(Aa=dr,(sa=hr.elements)?((sa.contextDep&&ln.contextDynamic||sa.propDep)&&(Aa=rn),sa=sa.append(Ht,Aa),hr.elementsActive&&Aa("if("+sa+")"+Pt+".bindBuffer(34963,"+sa+".buffer.buffer);")):(sa=Aa.def(),Aa(sa,"=",Wt,".","elements",";","if(",sa,"){",Pt,".bindBuffer(",34963,",",sa,".buffer.buffer);}","else if(",Lt.vao,".currentVAO){",sa,"=",Ht.shared.elements+".getElements("+Lt.vao,".currentVAO.elements);",dn?"":"if("+sa+")"+Pt+".bindBuffer(34963,"+sa+".buffer.buffer);","}")),sa),Fn=or("primitive"),Jn=or("offset"),_n=function(){var sa=hr.count,Aa=dr;return sa?((sa.contextDep&&ln.contextDynamic||sa.propDep)&&(Aa=rn),sa=sa.append(Ht,Aa)):sa=Aa.def(Wt,".","count"),sa}();if("number"==typeof _n){if(0===_n)return}else rn("if(",_n,"){"),rn.exit("}");Er&&(jn=or("instances"),ia=Ht.instancing);var va=vn+".type",_a=hr.elements&&Y(hr.elements)&&!hr.vaoActive;Er&&("number"!=typeof jn||0<=jn)?"string"==typeof jn?(rn("if(",jn,">0){"),Br(),rn("}else if(",jn,"<0){"),Rt(),rn("}")):Br():Rt()}function wn(Ht,dr,rn,ln,or){return or=(dr=fr()).proc("body",or),Er&&(dr.instancing=or.def(dr.shared.extensions,".angle_instanced_arrays")),Ht(dr,or,rn,ln),dr.compile().body}function Zn(Ht,dr,rn,ln){qr(Ht,dr),rn.useVAO?rn.drawVAO?dr(Ht.shared.vao,".setVAO(",rn.drawVAO.append(Ht,dr),");"):dr(Ht.shared.vao,".setVAO(",Ht.shared.vao,".targetVAO);"):(dr(Ht.shared.vao,".setVAO(null);"),kr(Ht,dr,rn,ln.attributes,function(){return!0})),Zr(Ht,dr,rn,ln.uniforms,function(){return!0},!1),An(Ht,dr,dr,rn)}function Wn(Ht,dr,rn,ln){function or(){return!0}Ht.batchId="a1",qr(Ht,dr),kr(Ht,dr,rn,ln.attributes,or),Zr(Ht,dr,rn,ln.uniforms,or,!1),An(Ht,dr,dr,rn)}function $n(Ht,dr,rn,ln){function or(vn){return vn.contextDep&&Rt||vn.propDep}function Br(vn){return!or(vn)}qr(Ht,dr);var Rt=rn.contextDep,Lt=dr.def(),Pt=dr.def();Ht.shared.props=Pt,Ht.batchId=Lt;var Wt=Ht.scope(),hr=Ht.scope();dr(Wt.entry,"for(",Lt,"=0;",Lt,"<","a1",";++",Lt,"){",Pt,"=","a0","[",Lt,"];",hr,"}",Wt.exit),rn.needsContext&&It(Ht,hr,rn.context),rn.needsFramebuffer&&Qt(Ht,hr,rn.framebuffer),Or(Ht,hr,rn.state,or),rn.profile&&or(rn.profile)&&Ir(Ht,hr,rn,!1,!0),ln?(rn.useVAO?rn.drawVAO?or(rn.drawVAO)?hr(Ht.shared.vao,".setVAO(",rn.drawVAO.append(Ht,hr),");"):Wt(Ht.shared.vao,".setVAO(",rn.drawVAO.append(Ht,Wt),");"):Wt(Ht.shared.vao,".setVAO(",Ht.shared.vao,".targetVAO);"):(Wt(Ht.shared.vao,".setVAO(null);"),kr(Ht,Wt,rn,ln.attributes,Br),kr(Ht,hr,rn,ln.attributes,or)),Zr(Ht,Wt,rn,ln.uniforms,Br,!1),Zr(Ht,hr,rn,ln.uniforms,or,!0),An(Ht,Wt,hr,rn)):(dr=Ht.global.def("{}"),ln=rn.shader.progVar.append(Ht,hr),Pt=hr.def(ln,".id"),Wt=hr.def(dr,"[",Pt,"]"),hr(Ht.shared.gl,".useProgram(",ln,".program);","if(!",Wt,"){",Wt,"=",dr,"[",Pt,"]=",Ht.link(function(vn){return wn(Wn,Ht,rn,vn,2)}),"(",ln,");}",Wt,".call(this,a0[",Lt,"],",Lt,");"))}function Ja(Ht,dr,rn){var or=dr.static[rn];if(or&&function $a(Ht){if("object"==typeof Ht&&!M(Ht)){for(var dr=Object.keys(Ht),rn=0;rn<dr.length;++rn)if(pe.isDynamic(Ht[dr[rn]]))return!0;return!1}}(or)){var Br=Ht.global,Rt=Object.keys(or),Lt=!1,Pt=!1,Wt=!1,hr=Ht.global.def("{}");Rt.forEach(function(vn){var Fn=or[vn];if(pe.isDynamic(Fn))"function"==typeof Fn&&(Fn=or[vn]=pe.unbox(Fn)),vn=J(Fn,null),Lt=Lt||vn.thisDep,Wt=Wt||vn.propDep,Pt=Pt||vn.contextDep;else{switch(Br(hr,".",vn,"="),typeof Fn){case"number":Br(Fn);break;case"string":Br('"',Fn,'"');break;case"object":Array.isArray(Fn)&&Br("[",Fn.join(),"]");break;default:Br(Ht.link(Fn))}Br(";")}}),dr.dynamic[rn]=new pe.DynamicVariable(4,{thisDep:Lt,contextDep:Pt,propDep:Wt,ref:hr,append:function ln(vn,Fn){Rt.forEach(function(Jn){var _n=or[Jn];pe.isDynamic(_n)&&(_n=vn.invoke(Fn,_n),Fn(hr,".",Jn,"=",_n,";"))})}}),delete dr.static[rn]}}var Va=Me.Record,ai={add:32774,subtract:32778,"reverse subtract":32779};qt.ext_blend_minmax&&(ai.min=32775,ai.max=32776);var Er=qt.angle_instanced_arrays,gn=qt.webgl_draw_buffers,dn=qt.oes_vertex_array_object,kn={dirty:!0,profile:pt.profile},Un={},ra=[],Gn={},On={};Dt("dither",3024),Dt("blend.enable",3042),Gt("blend.color","blendColor",[0,0,0,0]),Gt("blend.equation","blendEquationSeparate",[32774,32774]),Gt("blend.func","blendFuncSeparate",[1,0,1,0]),Dt("depth.enable",2929,!0),Gt("depth.func","depthFunc",513),Gt("depth.range","depthRange",[0,1]),Gt("depth.mask","depthMask",!0),Gt("colorMask","colorMask",[!0,!0,!0,!0]),Dt("cull.enable",2884),Gt("cull.face","cullFace",1029),Gt("frontFace","frontFace",2305),Gt("lineWidth","lineWidth",1),Dt("polygonOffset.enable",32823),Gt("polygonOffset.offset","polygonOffset",[0,0]),Dt("sample.alpha",32926),Dt("sample.enable",32928),Gt("sample.coverage","sampleCoverage",[1,!1]),Dt("stencil.enable",2960),Gt("stencil.mask","stencilMask",-1),Gt("stencil.func","stencilFunc",[519,0,-1]),Gt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Gt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Dt("scissor.enable",3089),Gt("scissor.box","scissor",[0,0,et.drawingBufferWidth,et.drawingBufferHeight]),Gt("viewport","viewport",[0,0,et.drawingBufferWidth,et.drawingBufferHeight]);var Xn={gl:et,context:We,strings:Yt,next:Un,current:kn,draw:Je,elements:tt,buffer:Tr,shader:Se,attributes:Me.state,vao:Me,uniforms:ht,framebuffer:ct,extensions:qt,timer:st,isBufferArgs:H},pa={primTypes:Ie,compareFuncs:rr,blendFuncs:nr,blendEquations:ai,stencilOps:br,glTypes:Ce,orientationType:Hr};gn&&(pa.backBuffer=[1029],pa.drawBuffer=r(Vt.maxDrawbuffers,function(Ht){return 0===Ht?[0]:r(Ht,function(dr){return 36064+dr})}));var oi=0;return{next:Un,current:kn,procs:function(){var Ht=fr(),dr=Ht.proc("poll"),rn=Ht.proc("refresh"),ln=Ht.block();dr(ln),rn(ln);var Lt,or=(Pt=Ht.shared).gl,Br=Pt.next,Rt=Pt.current;ln(Rt,".dirty=false;"),Qt(Ht,dr),Qt(Ht,rn,null,!0),Er&&(Lt=Ht.link(Er)),qt.oes_vertex_array_object&&rn(Ht.link(qt.oes_vertex_array_object),".bindVertexArrayOES(null);");var Pt=rn.def(Pt.attributes),Wt=rn.def(0),hr=Ht.cond(Wt,".buffer");hr.then(or,".enableVertexAttribArray(i);",or,".bindBuffer(",34962,",",Wt,".buffer.buffer);",or,".vertexAttribPointer(i,",Wt,".size,",Wt,".type,",Wt,".normalized,",Wt,".stride,",Wt,".offset);").else(or,".disableVertexAttribArray(i);",or,".vertexAttrib4f(i,",Wt,".x,",Wt,".y,",Wt,".z,",Wt,".w);",Wt,".buffer=null;");var vn=Ht.link(Vt.maxAttributes,{stable:!0});return rn("for(var i=0;i<",vn,";++i){",Wt,"=",Pt,"[i];",hr,"}"),Er&&rn("for(var i=0;i<",vn,";++i){",Lt,".vertexAttribDivisorANGLE(i,",Pt,"[i].divisor);","}"),rn(Ht.shared.vao,".currentVAO=null;",Ht.shared.vao,".setVAO(",Ht.shared.vao,".targetVAO);"),Object.keys(Gn).forEach(function(Fn){var Jn=Gn[Fn],_n=ln.def(Br,".",Fn),jn=Ht.block();jn("if(",_n,"){",or,".enable(",Jn,")}else{",or,".disable(",Jn,")}",Rt,".",Fn,"=",_n,";"),rn(jn),dr("if(",_n,"!==",Rt,".",Fn,"){",jn,"}")}),Object.keys(On).forEach(function(Fn){var jn,ia,Jn=On[Fn],_n=kn[Fn],va=Ht.block();va(or,".",Jn,"("),M(_n)?(Jn=_n.length,jn=Ht.global.def(Br,".",Fn),ia=Ht.global.def(Rt,".",Fn),va(r(Jn,function(_a){return jn+"["+_a+"]"}),");",r(Jn,function(_a){return ia+"["+_a+"]="+jn+"["+_a+"];"}).join("")),dr("if(",r(Jn,function(_a){return jn+"["+_a+"]!=="+ia+"["+_a+"]"}).join("||"),"){",va,"}")):(jn=ln.def(Br,".",Fn),ia=ln.def(Rt,".",Fn),va(jn,");",Rt,".",Fn,"=",jn,";"),dr("if(",jn,"!==",ia,"){",va,"}")),rn(va)}),Ht.compile()}(),compile:function(Ht,dr,rn,ln,or){var Br=fr();Br.stats=Br.link(or),Object.keys(dr.static).forEach(function(Lt){Ja(Br,dr,Lt)}),Jt.forEach(function(Lt){Ja(Br,Ht,Lt)});var Rt=it(Ht,dr,rn,ln);return Rt.shader.program&&(Rt.shader.program.attributes.sort(function(Lt,Pt){return Lt.name<Pt.name?-1:1}),Rt.shader.program.uniforms.sort(function(Lt,Pt){return Lt.name<Pt.name?-1:1})),function Ln(Ht,dr){var rn=Ht.proc("draw",1);qr(Ht,rn),It(Ht,rn,dr.context),Qt(Ht,rn,dr.framebuffer),ir(Ht,rn,dr),Or(Ht,rn,dr.state),Ir(Ht,rn,dr,!1,!0);var ln=dr.shader.progVar.append(Ht,rn);if(rn(Ht.shared.gl,".useProgram(",ln,".program);"),dr.shader.program)Zn(Ht,rn,dr,dr.shader.program);else{rn(Ht.shared.vao,".setVAO(null);");var or=Ht.global.def("{}"),Br=rn.def(ln,".id"),Rt=rn.def(or,"[",Br,"]");rn(Ht.cond(Rt).then(Rt,".call(this,a0);").else(Rt,"=",or,"[",Br,"]=",Ht.link(function(Lt){return wn(Zn,Ht,dr,Lt,1)}),"(",ln,");",Rt,".call(this,a0);"))}0<Object.keys(dr.state).length&&rn(Ht.shared.current,".dirty=true;"),Ht.shared.vao&&rn(Ht.shared.vao,".setVAO(null);")}(Br,Rt),function ma(Ht,dr){function rn(Lt){var Pt=dr.shader[Lt];Pt&&(Pt=Pt.append(Ht,ln),isNaN(Pt)?ln.set(or.shader,"."+Lt,Pt):ln.set(or.shader,"."+Lt,Ht.link(Pt,{stable:!0})))}var ln=Ht.proc("scope",3);Ht.batchId="a2";var or=Ht.shared,Br=or.current;if(It(Ht,ln,dr.context),dr.framebuffer&&dr.framebuffer.append(Ht,ln),q(Object.keys(dr.state)).forEach(function(Lt){var Pt=dr.state[Lt],Wt=Pt.append(Ht,ln);M(Wt)?Wt.forEach(function(hr,vn){isNaN(hr)?ln.set(Ht.next[Lt],"["+vn+"]",hr):ln.set(Ht.next[Lt],"["+vn+"]",Ht.link(hr,{stable:!0}))}):Y(Pt)?ln.set(or.next,"."+Lt,Ht.link(Wt,{stable:!0})):ln.set(or.next,"."+Lt,Wt)}),Ir(Ht,ln,dr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(Lt){var Pt=dr.draw[Lt];Pt&&(Pt=Pt.append(Ht,ln),isNaN(Pt)?ln.set(or.draw,"."+Lt,Pt):ln.set(or.draw,"."+Lt,Ht.link(Pt),{stable:!0}))}),Object.keys(dr.uniforms).forEach(function(Lt){var Pt=dr.uniforms[Lt].append(Ht,ln);Array.isArray(Pt)&&(Pt="["+Pt.map(function(Wt){return isNaN(Wt)?Wt:Ht.link(Wt,{stable:!0})})+"]"),ln.set(or.uniforms,"["+Ht.link(Yt.id(Lt),{stable:!0})+"]",Pt)}),Object.keys(dr.attributes).forEach(function(Lt){var Pt=dr.attributes[Lt].append(Ht,ln),Wt=Ht.scopeAttrib(Lt);Object.keys(new Va).forEach(function(hr){ln.set(Wt,"."+hr,Pt[hr])})}),dr.scopeVAO){var Rt=dr.scopeVAO.append(Ht,ln);isNaN(Rt)?ln.set(or.vao,".targetVAO",Rt):ln.set(or.vao,".targetVAO",Ht.link(Rt,{stable:!0}))}rn("vert"),rn("frag"),0<Object.keys(dr.state).length&&(ln(Br,".dirty=true;"),ln.exit(Br,".dirty=true;")),ln("a1(",Ht.shared.context,",a0,",Ht.batchId,");")}(Br,Rt),function wa(Ht,dr){function rn(Wt){return Wt.contextDep&&or||Wt.propDep}var ln=Ht.proc("batch",2);Ht.batchId="0",qr(Ht,ln);var or=!1,Br=!0;Object.keys(dr.context).forEach(function(Wt){or=or||dr.context[Wt].propDep}),or||(It(Ht,ln,dr.context),Br=!1);var Lt=!1;if((Rt=dr.framebuffer)?(Rt.propDep?or=Lt=!0:Rt.contextDep&&or&&(Lt=!0),Lt||Qt(Ht,ln,Rt)):Qt(Ht,ln,null),dr.state.viewport&&dr.state.viewport.propDep&&(or=!0),ir(Ht,ln,dr),Or(Ht,ln,dr.state,function(Wt){return!rn(Wt)}),dr.profile&&rn(dr.profile)||Ir(Ht,ln,dr,!1,"a1"),dr.contextDep=or,dr.needsContext=Br,dr.needsFramebuffer=Lt,(Br=dr.shader.progVar).contextDep&&or||Br.propDep)$n(Ht,ln,dr,null);else if(Br=Br.append(Ht,ln),ln(Ht.shared.gl,".useProgram(",Br,".program);"),dr.shader.program)$n(Ht,ln,dr,dr.shader.program);else{ln(Ht.shared.vao,".setVAO(null);");var Rt=Ht.global.def("{}"),Pt=(Lt=ln.def(Br,".id"),ln.def(Rt,"[",Lt,"]"));ln(Ht.cond(Pt).then(Pt,".call(this,a0,a1);").else(Pt,"=",Rt,"[",Lt,"]=",Ht.link(function(vn){return wn($n,Ht,dr,vn,2)}),"(",Br,");",Pt,".call(this,a0,a1);"))}0<Object.keys(dr.state).length&&ln(Ht.shared.current,".dirty=true;"),Ht.shared.vao&&ln(Ht.shared.vao,".setVAO(null);")}(Br,Rt),le(Br.compile(),{destroy:function(){Rt.shader.program.destroy()}})}}}function re(et,Yt){for(var qt=0;qt<et.length;++qt)if(et[qt]===Yt)return qt;return-1}var le=function(et,Yt){for(var qt=Object.keys(Yt),Vt=0;Vt<qt.length;++Vt)et[qt[Vt]]=Yt[qt[Vt]];return et},ge=0,pe={DynamicVariable:_,define:function(et,Yt){return new _(et,m(Yt+""))},isDynamic:function(et){return"function"==typeof et&&!et._reglType||et instanceof _},unbox:function E(et,Yt){return"function"==typeof et?new _(0,et):"number"==typeof et||"boolean"==typeof et?new _(5,et):Array.isArray(et)?new _(6,et.map(function(qt,Vt){return E(qt,Yt+"["+Vt+"]")})):et instanceof _?et:void 0},accessor:m},xe={next:"function"==typeof requestAnimationFrame?function(et){return requestAnimationFrame(et)}:function(et){return setTimeout(et,16)},cancel:"function"==typeof cancelAnimationFrame?function(et){return cancelAnimationFrame(et)}:clearTimeout},ke="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},we=s();we.zero=s();var be=function(et){return et instanceof Uint8Array||et instanceof Uint16Array||et instanceof Uint32Array||et instanceof Int8Array||et instanceof Int16Array||et instanceof Int32Array||et instanceof Float32Array||et instanceof Float64Array||et instanceof Uint8ClampedArray},Le=function(et){return Object.keys(et).map(function(Yt){return et[Yt]})},De={shape:function(et){for(var Yt=[];et.length;et=et[0])Yt.push(et.length);return Yt},flatten:function(et,Yt,qt,Vt){var Tr=1;if(Yt.length)for(var tt=0;tt<Yt.length;++tt)Tr*=Yt[tt];else Tr=0;switch(qt=Vt||we.allocType(qt,Tr),Yt.length){case 0:break;case 1:for(Vt=Yt[0],Yt=0;Yt<Vt;++Yt)qt[Yt]=et[Yt];break;case 2:for(Vt=Yt[0],Yt=Yt[1],tt=Tr=0;tt<Vt;++tt)for(var je=et[tt],ct=0;ct<Yt;++ct)qt[Tr++]=je[ct];break;case 3:x(et,Yt[0],Yt[1],Yt[2],qt,0);break;default:S(et,Yt,0,qt,0)}return qt}},ye={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ce={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Fe={dynamic:35048,stream:35040,static:35044},Ke=De.flatten,Ue=De.shape,Be=[];Be[5120]=1,Be[5122]=2,Be[5124]=4,Be[5121]=1,Be[5123]=2,Be[5125]=4,Be[5126]=4;var Ie={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},nt=new Float32Array(1),gt=new Uint32Array(nt.buffer),Nt=[9984,9986,9985,9987],St=[0,6409,6410,6407,6408],Bt={};Bt[6409]=Bt[6406]=Bt[6402]=1,Bt[34041]=Bt[6410]=2,Bt[6407]=Bt[35904]=3,Bt[6408]=Bt[35906]=4;var Zt=f("HTMLCanvasElement"),Et=f("OffscreenCanvas"),wt=f("CanvasRenderingContext2D"),at=f("ImageBitmap"),vt=f("HTMLImageElement"),Qe=f("HTMLVideoElement"),Pe=Object.keys(ye).concat([Zt,Et,wt,at,vt,Qe]),Ze=[];Ze[5121]=1,Ze[5126]=4,Ze[36193]=2,Ze[5123]=2,Ze[5125]=4;var Xe=[];Xe[32854]=2,Xe[32855]=2,Xe[36194]=2,Xe[34041]=4,Xe[33776]=.5,Xe[33777]=.5,Xe[33778]=1,Xe[33779]=1,Xe[35986]=.5,Xe[35987]=1,Xe[34798]=1,Xe[35840]=.5,Xe[35841]=.25,Xe[35842]=.5,Xe[35843]=.25,Xe[36196]=.5;var rt=[];rt[32854]=2,rt[32855]=2,rt[36194]=2,rt[33189]=2,rt[36168]=1,rt[34041]=4,rt[35907]=4,rt[34836]=16,rt[34842]=8,rt[34843]=6;var Tt=[];Tt[6408]=4,Tt[6407]=3;var Xt=[];Xt[5121]=1,Xt[5126]=4,Xt[36193]=2;var ar=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Ut=["x","y","z","w"],Jt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),nr={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},rr={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},br={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Hr={cw:2304,ccw:2305},on=new K(!1,!1,!1,function(){});return function(et){function Yt(){if(0===Ir.length)fr&&fr.update(),wn=null;else{wn=xe.next(Yt),Se();for(var Ln=Ir.length-1;0<=Ln;--Ln){var Wn=Ir[Ln];Wn&&Wn(Lr,null,0)}st.flush(),fr&&fr.update()}}function qt(){!wn&&0<Ir.length&&(wn=xe.next(Yt))}function Vt(){wn&&(xe.cancel(Yt),wn=null)}function Tr(Ln){Ln.preventDefault(),Vt(),kr.forEach(function(Wn){Wn()})}function tt(Ln){st.getError(),pt.restore(),Kr.restore(),mr.restore(),Cr.restore(),it.restore(),It.restore(),Wr.restore(),fr&&fr.restore(),Qt.procs.refresh(),qt(),Zr.forEach(function(Wn){Wn()})}function je(Ln){function Wn(kn,Un){var ra={},Gn={};return Object.keys(kn).forEach(function(On){var Xn=kn[On];if(pe.isDynamic(Xn))Gn[On]=pe.unbox(Xn,On);else{if(Un&&Array.isArray(Xn))for(var pa=0;pa<Xn.length;++pa)if(pe.isDynamic(Xn[pa]))return void(Gn[On]=pe.unbox(Xn,On));ra[On]=Xn}}),{dynamic:Gn,static:ra}}var wa=Wn(Ln.context||{},!0),ma=Wn(Ln.uniforms||{},!0),$a=Wn(Ln.attributes||{},!1);Ln=Wn(function(kn){function Un(Gn){if(Gn in ra){var On=ra[Gn];delete ra[Gn],Object.keys(On).forEach(function(Xn){ra[Gn+"."+Xn]=On[Xn]})}}var ra=le({},kn);return delete ra.uniforms,delete ra.attributes,delete ra.context,delete ra.vao,"stencil"in ra&&ra.stencil.op&&(ra.stencil.opBack=ra.stencil.opFront=ra.stencil.op,delete ra.stencil.op),Un("blend"),Un("depth"),Un("cull"),Un("stencil"),Un("polygonOffset"),Un("scissor"),Un("sample"),"vao"in kn&&(ra.vao=kn.vao),ra}(Ln),!1);var Ja={gpuTime:0,cpuTime:0,count:0},Va=Qt.compile(Ln,$a,ma,wa,Ja),ai=Va.draw,Er=Va.batch,gn=Va.scope,dn=[];return le(function(kn,Un){var ra;if("function"==typeof kn)return gn.call(this,null,kn,0);if("function"==typeof Un)if("number"==typeof kn)for(ra=0;ra<kn;++ra)gn.call(this,null,Un,ra);else{if(!Array.isArray(kn))return gn.call(this,kn,Un,0);for(ra=0;ra<kn.length;++ra)gn.call(this,kn[ra],Un,ra)}else if("number"==typeof kn){if(0<kn)return Er.call(this,function $n(kn){for(;dn.length<kn;)dn.push(null);return dn}(0|kn),0|kn)}else{if(!Array.isArray(kn))return ai.call(this,kn);if(kn.length)return Er.call(this,kn,kn.length)}},{stats:Ja,destroy:function(){Va.destroy()}})}function ct(Ln,Wn){var $n=0;Qt.procs.poll();var wa=Wn.color;wa&&(st.clearColor(+wa[0]||0,+wa[1]||0,+wa[2]||0,+wa[3]||0),$n|=16384),"depth"in Wn&&(st.clearDepth(+Wn.depth),$n|=256),"stencil"in Wn&&(st.clearStencil(0|Wn.stencil),$n|=1024),st.clear($n)}function ht(Ln){return Ir.push(Ln),qt(),{cancel:function(){var $n=re(Ir,Ln);Ir[$n]=function Wn(){var wa=re(Ir,Wn);Ir[wa]=Ir[Ir.length-1],--Ir.length,0>=Ir.length&&Vt()}}}}function Me(){var Ln=Or.viewport,Wn=Or.scissor_box;Ln[0]=Ln[1]=Wn[0]=Wn[1]=0,Lr.viewportWidth=Lr.framebufferWidth=Lr.drawingBufferWidth=Ln[2]=Wn[2]=st.drawingBufferWidth,Lr.viewportHeight=Lr.framebufferHeight=Lr.drawingBufferHeight=Ln[3]=Wn[3]=st.drawingBufferHeight}function Se(){Lr.tick+=1,Lr.time=We(),Me(),Qt.procs.poll()}function Je(){Cr.refresh(),Me(),Qt.procs.refresh(),fr&&fr.update()}function We(){return(ke()-pr)/1e3}if(!(et=i(et)))return null;var st=et.gl,lt=st.getContextAttributes();st.isContextLost();var pt=function a(et,Yt){function qt(je){var ct;je=je.toLowerCase();try{ct=Vt[je]=et.getExtension(je)}catch(ht){}return!!ct}for(var Vt={},Tr=0;Tr<Yt.extensions.length;++Tr){var tt=Yt.extensions[Tr];if(!qt(tt))return Yt.onDestroy(),Yt.onDone('"'+tt+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Yt.optionalExtensions.forEach(qt),{extensions:Vt,restore:function(){Object.keys(Vt).forEach(function(je){if(Vt[je]&&!qt(je))throw Error("(regl): error restoring extension "+je)})}}}(st,et);if(!pt)return null;var ir=function e(){var et={"":0},Yt=[""];return{id:function(qt){var Vt=et[qt];return Vt||(Vt=et[qt]=Yt.length,Yt.push(qt),Vt)},str:function(qt){return Yt[qt]}}}(),Ct={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Dt=et.cachedCode||{},Gt=pt.extensions,fr=function(et,Yt){function qt(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function Vt(Se,Je,We){var st=je.pop()||new qt;st.startQueryIndex=Se,st.endQueryIndex=Je,st.sum=0,st.stats=We,ct.push(st)}if(!Yt.ext_disjoint_timer_query)return null;var Tr=[],tt=[],je=[],ct=[],ht=[],Me=[];return{beginQuery:function(Se){var Je=Tr.pop()||Yt.ext_disjoint_timer_query.createQueryEXT();Yt.ext_disjoint_timer_query.beginQueryEXT(35007,Je),tt.push(Je),Vt(tt.length-1,tt.length,Se)},endQuery:function(){Yt.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:Vt,update:function(){var Se,Je;if(0!==(Se=tt.length)){Me.length=Math.max(Me.length,Se+1),ht.length=Math.max(ht.length,Se+1),ht[0]=0;var We=Me[0]=0;for(Je=Se=0;Je<tt.length;++Je)Yt.ext_disjoint_timer_query.getQueryObjectEXT(st=tt[Je],34919)?(We+=Yt.ext_disjoint_timer_query.getQueryObjectEXT(st,34918),Tr.push(st)):tt[Se++]=st,ht[Je+1]=We,Me[Je+1]=Se;for(tt.length=Se,Je=Se=0;Je<ct.length;++Je){var st,lt=(We=ct[Je]).startQueryIndex;We.sum+=ht[st=We.endQueryIndex]-ht[lt],(st=Me[st])===(lt=Me[lt])?(We.stats.gpuTime+=We.sum/1e6,je.push(We)):(We.startQueryIndex=lt,We.endQueryIndex=st,ct[Se++]=We)}ct.length=Se}},getNumPendingQueries:function(){return tt.length},clear:function(){Tr.push.apply(Tr,tt);for(var Se=0;Se<Tr.length;Se++)Yt.ext_disjoint_timer_query.deleteQueryEXT(Tr[Se]);tt.length=0,Tr.length=0},restore:function(){tt.length=0,Tr.length=0}}}(0,Gt),pr=ke(),Jr=st.drawingBufferHeight,Lr={tick:0,time:0,viewportWidth:Ar=st.drawingBufferWidth,viewportHeight:Jr,framebufferWidth:Ar,framebufferHeight:Jr,drawingBufferWidth:Ar,drawingBufferHeight:Jr,pixelRatio:et.pixelRatio},Ar={elements:null,primitive:4,count:-1,offset:0,instances:-1},en=function(et,Yt){var qt=1;Yt.ext_texture_filter_anisotropic&&(qt=et.getParameter(34047));var Vt=1,Tr=1;Yt.webgl_draw_buffers&&(Vt=et.getParameter(34852),Tr=et.getParameter(36063));var tt=!!Yt.oes_texture_float;if(tt){tt=et.createTexture(),et.bindTexture(3553,tt),et.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var je=et.createFramebuffer();if(et.bindFramebuffer(36160,je),et.framebufferTexture2D(36160,36064,3553,tt,0),et.bindTexture(3553,null),36053!==et.checkFramebufferStatus(36160))tt=!1;else{et.viewport(0,0,1,1),et.clearColor(1,0,0,1),et.clear(16384);var ct=we.allocType(5126,4);et.readPixels(0,0,1,1,6408,5126,ct),et.getError()?tt=!1:(et.deleteFramebuffer(je),et.deleteTexture(tt),tt=1===ct[0]),we.freeType(ct)}}return ct=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(ct=et.createTexture(),je=we.allocType(5121,36),et.activeTexture(33984),et.bindTexture(34067,ct),et.texImage2D(34069,0,6408,3,3,0,6408,5121,je),we.freeType(je),et.bindTexture(34067,null),et.deleteTexture(ct),ct=!et.getError()),{colorBits:[et.getParameter(3410),et.getParameter(3411),et.getParameter(3412),et.getParameter(3413)],depthBits:et.getParameter(3414),stencilBits:et.getParameter(3415),subpixelBits:et.getParameter(3408),extensions:Object.keys(Yt).filter(function(ht){return!!Yt[ht]}),maxAnisotropic:qt,maxDrawbuffers:Vt,maxColorAttachments:Tr,pointSizeDims:et.getParameter(33901),lineWidthDims:et.getParameter(33902),maxViewportDims:et.getParameter(3386),maxCombinedTextureUnits:et.getParameter(35661),maxCubeMapSize:et.getParameter(34076),maxRenderbufferSize:et.getParameter(34024),maxTextureUnits:et.getParameter(34930),maxTextureSize:et.getParameter(3379),maxAttributes:et.getParameter(34921),maxVertexUniforms:et.getParameter(36347),maxVertexTextureUnits:et.getParameter(35660),maxVaryingVectors:et.getParameter(36348),maxFragmentUniforms:et.getParameter(36349),glsl:et.getParameter(35724),renderer:et.getParameter(7937),vendor:et.getParameter(7936),version:et.getParameter(7938),readFloat:tt,npotTextureCube:ct}}(st,Gt),mr=function y(et,Yt,qt,Vt){function Tr(Je){this.id=ht++,this.buffer=et.createBuffer(),this.type=Je,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,qt.profile&&(this.stats={size:0})}function tt(Je,We,st){Je.byteLength=We.byteLength,et.bufferData(Je.type,We,st)}function je(Je,We,st,lt,pt,Ct){if(Je.usage=st,Array.isArray(We)){if(Je.dtype=lt||5126,0<We.length)if(Array.isArray(We[0])){pt=Ue(We);for(var Dt=lt=1;Dt<pt.length;++Dt)lt*=pt[Dt];Je.dimension=lt,tt(Je,We=Ke(We,pt,Je.dtype),st),Ct?Je.persistentData=We:we.freeType(We)}else"number"==typeof We[0]?(Je.dimension=pt,w(pt=we.allocType(Je.dtype,We.length),We),tt(Je,pt,st),Ct?Je.persistentData=pt:we.freeType(pt)):be(We[0])&&(Je.dimension=We[0].length,Je.dtype=lt||p(We[0])||5126,tt(Je,We=Ke(We,[We.length,We[0].length],Je.dtype),st),Ct?Je.persistentData=We:we.freeType(We))}else if(be(We))Je.dtype=lt||p(We),Je.dimension=pt,tt(Je,We,st),Ct&&(Je.persistentData=new Uint8Array(new Uint8Array(We.buffer)));else if(b(We)){var Gt=We.stride,fr=(Dt=We.offset,0),pr=0,Jr=0,Lr=0;1===(pt=We.shape).length?(fr=pt[0],pr=1,Jr=Gt[0],Lr=0):2===pt.length&&(fr=pt[0],pr=pt[1],Jr=Gt[0],Lr=Gt[1]),Je.dtype=lt||p(We.data)||5126,Je.dimension=pr,l(pt=we.allocType(Je.dtype,fr*pr),We.data,fr,pr,Jr,Lr,Dt),tt(Je,pt,st),Ct?Je.persistentData=pt:we.freeType(pt)}else We instanceof ArrayBuffer&&(Je.dtype=5121,Je.dimension=pt,tt(Je,We,st),Ct&&(Je.persistentData=new Uint8Array(new Uint8Array(We))))}function ct(Je){Yt.bufferCount--,Vt(Je),et.deleteBuffer(Je.buffer),Je.buffer=null,delete Me[Je.id]}var ht=0,Me={};Tr.prototype.bind=function(){et.bindBuffer(this.type,this.buffer)},Tr.prototype.destroy=function(){ct(this)};var Se=[];return qt.profile&&(Yt.getTotalBufferSize=function(){var Je=0;return Object.keys(Me).forEach(function(We){Je+=Me[We].stats.size}),Je}),{create:function(Je,We,st,lt){function pt(Dt){var Gt=35044,fr=null,pr=0,Jr=0,Lr=1;return Array.isArray(Dt)||be(Dt)||b(Dt)||Dt instanceof ArrayBuffer?fr=Dt:"number"==typeof Dt?pr=0|Dt:Dt&&("data"in Dt&&(fr=Dt.data),"usage"in Dt&&(Gt=Fe[Dt.usage]),"type"in Dt&&(Jr=Ce[Dt.type]),"dimension"in Dt&&(Lr=0|Dt.dimension),"length"in Dt&&(pr=0|Dt.length)),Ct.bind(),fr?je(Ct,fr,Gt,Jr,Lr,lt):(pr&&et.bufferData(Ct.type,pr,Gt),Ct.dtype=Jr||5121,Ct.usage=Gt,Ct.dimension=Lr,Ct.byteLength=pr),qt.profile&&(Ct.stats.size=Ct.byteLength*Be[Ct.dtype]),pt}Yt.bufferCount++;var Ct=new Tr(We);return Me[Ct.id]=Ct,st||pt(Je),pt._reglType="buffer",pt._buffer=Ct,pt.subdata=function(Dt,Gt){var pr,fr=0|(Gt||0);if(Ct.bind(),be(Dt)||Dt instanceof ArrayBuffer)et.bufferSubData(Ct.type,fr,Dt);else if(Array.isArray(Dt)){if(0<Dt.length)if("number"==typeof Dt[0]){var Jr=we.allocType(Ct.dtype,Dt.length);w(Jr,Dt),et.bufferSubData(Ct.type,fr,Jr),we.freeType(Jr)}else(Array.isArray(Dt[0])||be(Dt[0]))&&(pr=Ue(Dt),Jr=Ke(Dt,pr,Ct.dtype),et.bufferSubData(Ct.type,fr,Jr),we.freeType(Jr))}else if(b(Dt)){var Lr=Dt.stride,Ar=Jr=0,en=0,mr=0;1===(pr=Dt.shape).length?(Jr=pr[0],Ar=1,en=Lr[0],mr=0):2===pr.length&&(Jr=pr[0],Ar=pr[1],en=Lr[0],mr=Lr[1]),pr=Array.isArray(Dt.data)?Ct.dtype:p(Dt.data),l(pr=we.allocType(pr,Jr*Ar),Dt.data,Jr,Ar,en,mr,Dt.offset),et.bufferSubData(Ct.type,fr,pr),we.freeType(pr)}return pt},qt.profile&&(pt.stats=Ct.stats),pt.destroy=function(){ct(Ct)},pt},createStream:function(Je,We){var st=Se.pop();return st||(st=new Tr(Je)),st.bind(),je(st,We,35040,0,1,!1),st},destroyStream:function(Je){Se.push(Je)},clear:function(){Le(Me).forEach(ct),Se.forEach(ct)},getBuffer:function(Je){return Je&&Je._buffer instanceof Tr?Je._buffer:null},restore:function(){Le(Me).forEach(function(Je){Je.buffer=et.createBuffer(),et.bindBuffer(Je.type,Je.buffer),et.bufferData(Je.type,Je.persistentData||Je.byteLength,Je.usage)})},_initBuffer:je}}(st,Ct,et,function(Ln){return Wr.destroyBuffer(Ln)}),wr=function A(et,Yt,qt,Vt){function Tr(Je){this.id=ht++,ct[this.id]=this,this.buffer=Je,this.primType=4,this.type=this.vertCount=0}function tt(Je,We,st,lt,pt,Ct,Dt){var Gt;if(Je.buffer.bind(),We?((Gt=Dt)||be(We)&&(!b(We)||be(We.data))||(Gt=Yt.oes_element_index_uint?5125:5123),qt._initBuffer(Je.buffer,We,st,Gt,3)):(et.bufferData(34963,Ct,st),Je.buffer.dtype=Gt||5121,Je.buffer.usage=st,Je.buffer.dimension=3,Je.buffer.byteLength=Ct),Gt=Dt,!Dt){switch(Je.buffer.dtype){case 5121:case 5120:Gt=5121;break;case 5123:case 5122:Gt=5123;break;case 5125:case 5124:Gt=5125}Je.buffer.dtype=Gt}Je.type=Gt,0>(We=pt)&&(We=Je.buffer.byteLength,5123===Gt?We>>=1:5125===Gt&&(We>>=2)),Je.vertCount=We,We=lt,0>lt&&(We=4,1===(lt=Je.buffer.dimension)&&(We=0),2===lt&&(We=1),3===lt&&(We=4)),Je.primType=We}function je(Je){Vt.elementsCount--,delete ct[Je.id],Je.buffer.destroy(),Je.buffer=null}var ct={},ht=0,Me={uint8:5121,uint16:5123};Yt.oes_element_index_uint&&(Me.uint32=5125),Tr.prototype.bind=function(){this.buffer.bind()};var Se=[];return{create:function(Je,We){function st(Ct){if(Ct)if("number"==typeof Ct)lt(Ct),pt.primType=4,pt.vertCount=0|Ct,pt.type=5121;else{var Dt=null,Gt=35044,fr=-1,pr=-1,Jr=0,Lr=0;Array.isArray(Ct)||be(Ct)||b(Ct)?Dt=Ct:("data"in Ct&&(Dt=Ct.data),"usage"in Ct&&(Gt=Fe[Ct.usage]),"primitive"in Ct&&(fr=Ie[Ct.primitive]),"count"in Ct&&(pr=0|Ct.count),"type"in Ct&&(Lr=Me[Ct.type]),"length"in Ct?Jr=0|Ct.length:(Jr=pr,5123===Lr||5122===Lr?Jr*=2:(5125===Lr||5124===Lr)&&(Jr*=4))),tt(pt,Dt,Gt,fr,pr,Jr,Lr)}else lt(),pt.primType=4,pt.vertCount=0,pt.type=5121;return st}var lt=qt.create(null,34963,!0),pt=new Tr(lt._buffer);return Vt.elementsCount++,st(Je),st._reglType="elements",st._elements=pt,st.subdata=function(Ct,Dt){return lt.subdata(Ct,Dt),st},st.destroy=function(){je(pt)},st},createStream:function(Je){var We=Se.pop();return We||(We=new Tr(qt.create(null,34963,!0,!1)._buffer)),tt(We,Je,35040,-1,-1,0,0),We},destroyStream:function(Je){Se.push(Je)},getElements:function(Je){return"function"==typeof Je&&Je._elements instanceof Tr?Je._elements:null},clear:function(){Le(ct).forEach(je)}}}(st,Gt,mr,Ct),Wr=function D(et,Yt,qt,Vt,Tr,tt,je){function Se(){this.id=++lt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var Dt=Yt.oes_vertex_array_object;this.vao=Dt?Dt.createVertexArrayOES():null,pt[this.id]=this,this.buffers=[]}var We=qt.maxAttributes,st=Array(We);for(qt=0;qt<We;++qt)st[qt]=new F;var lt=0,pt={},Ct={Record:F,scope:{},state:st,currentVAO:null,targetVAO:null,restore:Yt.oes_vertex_array_object?function Je(){Yt.oes_vertex_array_object&&Le(pt).forEach(function(Dt){Dt.refresh()})}:function(){},createVAO:function(Dt){function Gt(pr){var Jr;Array.isArray(pr)?(Jr=pr,fr.elements&&fr.ownsElements&&fr.elements.destroy(),fr.elements=null,fr.ownsElements=!1,fr.offset=0,fr.count=0,fr.instances=-1,fr.primitive=4):(pr.elements?(Jr=pr.elements,fr.ownsElements?("function"==typeof Jr&&"elements"===Jr._reglType?fr.elements.destroy():fr.elements(Jr),fr.ownsElements=!1):tt.getElements(pr.elements)?(fr.elements=pr.elements,fr.ownsElements=!1):(fr.elements=tt.create(pr.elements),fr.ownsElements=!0)):(fr.elements=null,fr.ownsElements=!1),Jr=pr.attributes,fr.offset=0,fr.count=-1,fr.instances=-1,fr.primitive=4,fr.elements&&(fr.count=fr.elements._elements.vertCount,fr.primitive=fr.elements._elements.primType),"offset"in pr&&(fr.offset=0|pr.offset),"count"in pr&&(fr.count=0|pr.count),"instances"in pr&&(fr.instances=0|pr.instances),"primitive"in pr&&(fr.primitive=Ie[pr.primitive])),pr={};var Lr=fr.attributes;Lr.length=Jr.length;for(var Ar=0;Ar<Jr.length;++Ar){var Wr,en=Jr[Ar],mr=Lr[Ar]=new F,wr=en.data||en;Array.isArray(wr)||be(wr)||b(wr)?(fr.buffers[Ar]&&(Wr=fr.buffers[Ar],be(wr)&&Wr._buffer.byteLength>=wr.byteLength?Wr.subdata(wr):(Wr.destroy(),fr.buffers[Ar]=null)),fr.buffers[Ar]||(Wr=fr.buffers[Ar]=Tr.create(en,34962,!1,!0)),mr.buffer=Tr.getBuffer(Wr),mr.size=0|mr.buffer.dimension,mr.normalized=!1,mr.type=mr.buffer.dtype,mr.offset=0,mr.stride=0,mr.divisor=0,mr.state=1,pr[Ar]=1):Tr.getBuffer(en)?(mr.buffer=Tr.getBuffer(en),mr.size=0|mr.buffer.dimension,mr.normalized=!1,mr.type=mr.buffer.dtype,mr.offset=0,mr.stride=0,mr.divisor=0,mr.state=1):Tr.getBuffer(en.buffer)?(mr.buffer=Tr.getBuffer(en.buffer),mr.size=0|(+en.size||mr.buffer.dimension),mr.normalized=!!en.normalized||!1,mr.type="type"in en?Ce[en.type]:mr.buffer.dtype,mr.offset=0|(en.offset||0),mr.stride=0|(en.stride||0),mr.divisor=0|(en.divisor||0),mr.state=1):"x"in en&&(mr.x=+en.x||0,mr.y=+en.y||0,mr.z=+en.z||0,mr.w=+en.w||0,mr.state=2)}for(Wr=0;Wr<fr.buffers.length;++Wr)!pr[Wr]&&fr.buffers[Wr]&&(fr.buffers[Wr].destroy(),fr.buffers[Wr]=null);return fr.refresh(),Gt}var fr=new Se;return Vt.vaoCount+=1,Gt.destroy=function(){for(var pr=0;pr<fr.buffers.length;++pr)fr.buffers[pr]&&fr.buffers[pr].destroy();fr.buffers.length=0,fr.ownsElements&&(fr.elements.destroy(),fr.elements=null,fr.ownsElements=!1),fr.destroy()},Gt._vao=fr,Gt._reglType="vao",Gt(Dt)},getVAO:function(Dt){return"function"==typeof Dt&&Dt._vao?Dt._vao:null},destroyBuffer:function(Dt){for(var Gt=0;Gt<st.length;++Gt){var fr=st[Gt];fr.buffer===Dt&&(et.disableVertexAttribArray(Gt),fr.buffer=null)}},setVAO:Yt.oes_vertex_array_object?function ct(Dt){Dt!==Ct.currentVAO&&(Yt.oes_vertex_array_object.bindVertexArrayOES(Dt?Dt.vao:null),Ct.currentVAO=Dt)}:function ht(Dt){if(Dt!==Ct.currentVAO){if(Dt)Dt.bindAttrs();else{for(var Gt=Yt.angle_instanced_arrays,fr=0;fr<st.length;++fr){var pr=st[fr];pr.buffer?(et.enableVertexAttribArray(fr),pr.buffer.bind(),et.vertexAttribPointer(fr,pr.size,pr.type,pr.normalized,pr.stride,pr.offfset),Gt&&pr.divisor&&Gt.vertexAttribDivisorANGLE(fr,pr.divisor)):(et.disableVertexAttribArray(fr),et.vertexAttrib4f(fr,pr.x,pr.y,pr.z,pr.w))}et.bindBuffer(34963,je.elements?je.elements.buffer.buffer:null)}Ct.currentVAO=Dt}},clear:Yt.oes_vertex_array_object?function Me(){Le(pt).forEach(function(Dt){Dt.destroy()})}:function(){}};return Se.prototype.bindAttrs=function(){for(var Dt=Yt.angle_instanced_arrays,Gt=this.attributes,fr=0;fr<Gt.length;++fr){var pr=Gt[fr];pr.buffer?(et.enableVertexAttribArray(fr),et.bindBuffer(34962,pr.buffer.buffer),et.vertexAttribPointer(fr,pr.size,pr.type,pr.normalized,pr.stride,pr.offset),Dt&&pr.divisor&&Dt.vertexAttribDivisorANGLE(fr,pr.divisor)):(et.disableVertexAttribArray(fr),et.vertexAttrib4f(fr,pr.x,pr.y,pr.z,pr.w))}for(Dt=Gt.length;Dt<We;++Dt)et.disableVertexAttribArray(Dt);(Dt=tt.getElements(this.elements))?et.bindBuffer(34963,Dt.buffer.buffer):et.bindBuffer(34963,null)},Se.prototype.refresh=function(){var Dt=Yt.oes_vertex_array_object;Dt&&(Dt.bindVertexArrayOES(this.vao),this.bindAttrs(),Ct.currentVAO=null,Dt.bindVertexArrayOES(null))},Se.prototype.destroy=function(){if(this.vao){var Dt=Yt.oes_vertex_array_object;this===Ct.currentVAO&&(Ct.currentVAO=null,Dt.bindVertexArrayOES(null)),Dt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),pt[this.id]&&(delete pt[this.id],--Vt.vaoCount)},Ct}(st,Gt,en,Ct,mr,wr,Ar),Kr=function N(et,Yt,qt,Vt){function Tr(lt,pt,Ct,Dt){this.name=lt,this.id=pt,this.location=Ct,this.info=Dt}function tt(lt,pt){for(var Ct=0;Ct<lt.length;++Ct)if(lt[Ct].id===pt.id)return void(lt[Ct].location=pt.location);lt.push(pt)}function je(lt,pt,Ct){if(!(Dt=(Ct=35632===lt?Me:Se)[pt])){var Gt=Yt.str(pt),Dt=et.createShader(lt);et.shaderSource(Dt,Gt),et.compileShader(Dt),Ct[pt]=Dt}return Dt}function ct(lt,pt){this.id=st++,this.fragId=lt,this.vertId=pt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Vt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ht(lt,pt,Ct){var Dt;Dt=je(35632,lt.fragId);var Gt=je(35633,lt.vertId);if(pt=lt.program=et.createProgram(),et.attachShader(pt,Dt),et.attachShader(pt,Gt),Ct)for(Dt=0;Dt<Ct.length;++Dt)et.bindAttribLocation(pt,(Gt=Ct[Dt])[0],Gt[1]);et.linkProgram(pt),Gt=et.getProgramParameter(pt,35718),Vt.profile&&(lt.stats.uniformsCount=Gt);var fr=lt.uniforms;for(Dt=0;Dt<Gt;++Dt)if(Ct=et.getActiveUniform(pt,Dt))if(1<Ct.size)for(var pr=0;pr<Ct.size;++pr){var Jr=Ct.name.replace("[0]","["+pr+"]");tt(fr,new Tr(Jr,Yt.id(Jr),et.getUniformLocation(pt,Jr),Ct))}else tt(fr,new Tr(Ct.name,Yt.id(Ct.name),et.getUniformLocation(pt,Ct.name),Ct));for(Gt=et.getProgramParameter(pt,35721),Vt.profile&&(lt.stats.attributesCount=Gt),lt=lt.attributes,Dt=0;Dt<Gt;++Dt)(Ct=et.getActiveAttrib(pt,Dt))&&tt(lt,new Tr(Ct.name,Yt.id(Ct.name),et.getAttribLocation(pt,Ct.name),Ct))}var Me={},Se={},Je={},We=[],st=0;return Vt.profile&&(qt.getMaxUniformsCount=function(){var lt=0;return We.forEach(function(pt){pt.stats.uniformsCount>lt&&(lt=pt.stats.uniformsCount)}),lt},qt.getMaxAttributesCount=function(){var lt=0;return We.forEach(function(pt){pt.stats.attributesCount>lt&&(lt=pt.stats.attributesCount)}),lt}),{clear:function(){var lt=et.deleteShader.bind(et);Le(Me).forEach(lt),Me={},Le(Se).forEach(lt),Se={},We.forEach(function(pt){et.deleteProgram(pt.program)}),We.length=0,Je={},qt.shaderCount=0},program:function(lt,pt,Ct,Dt){var Gt=Je[pt];Gt||(Gt=Je[pt]={});var fr=Gt[lt];if(fr&&(fr.refCount++,!Dt))return fr;var pr=new ct(pt,lt);return qt.shaderCount++,ht(pr,Ct,Dt),fr||(Gt[lt]=pr),We.push(pr),le(pr,{destroy:function(){if(pr.refCount--,0>=pr.refCount){et.deleteProgram(pr.program);var Jr=We.indexOf(pr);We.splice(Jr,1),qt.shaderCount--}0>=Gt[pr.vertId].refCount&&(et.deleteShader(Se[pr.vertId]),delete Se[pr.vertId],delete Je[pr.fragId][pr.vertId]),Object.keys(Je[pr.fragId]).length||(et.deleteShader(Me[pr.fragId]),delete Me[pr.fragId],delete Je[pr.fragId])}})},restore:function(){Me={},Se={};for(var lt=0;lt<We.length;++lt)ht(We[lt],null,We[lt].attributes.map(function(pt){return[pt.location,pt.name]}))},shader:je,frag:-1,vert:-1}}(st,ir,Ct,et),Cr=function O(et,Yt,qt,Vt,Tr,tt,je){function ct(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function ht(Er,gn){Er.internalformat=gn.internalformat,Er.format=gn.format,Er.type=gn.type,Er.compressed=gn.compressed,Er.premultiplyAlpha=gn.premultiplyAlpha,Er.flipY=gn.flipY,Er.unpackAlignment=gn.unpackAlignment,Er.colorSpace=gn.colorSpace,Er.width=gn.width,Er.height=gn.height,Er.channels=gn.channels}function Me(Er,gn){if("object"==typeof gn&&gn){"premultiplyAlpha"in gn&&(Er.premultiplyAlpha=gn.premultiplyAlpha),"flipY"in gn&&(Er.flipY=gn.flipY),"alignment"in gn&&(Er.unpackAlignment=gn.alignment),"colorSpace"in gn&&(Er.colorSpace=ir[gn.colorSpace]),"type"in gn&&(Er.type=Or[gn.type]);var dn=Er.width,kn=Er.height,Un=Er.channels,ra=!1;"shape"in gn?(dn=gn.shape[0],kn=gn.shape[1],3===gn.shape.length&&(Un=gn.shape[2],ra=!0)):("radius"in gn&&(dn=kn=gn.radius),"width"in gn&&(dn=gn.width),"height"in gn&&(kn=gn.height),"channels"in gn&&(Un=gn.channels,ra=!0)),Er.width=0|dn,Er.height=0|kn,Er.channels=0|Un,dn=!1,"format"in gn&&(kn=Er.internalformat=qr[dn=gn.format],Er.format=$n[kn],dn in Or&&!("type"in gn)&&(Er.type=Or[dn]),dn in Ir&&(Er.compressed=!0),dn=!0),!ra&&dn?Er.channels=Bt[Er.format]:ra&&!dn&&Er.channels!==St[Er.format]&&(Er.format=Er.internalformat=St[Er.channels])}}function Se(Er){et.pixelStorei(37440,Er.flipY),et.pixelStorei(37441,Er.premultiplyAlpha),et.pixelStorei(37443,Er.colorSpace),et.pixelStorei(3317,Er.unpackAlignment)}function Je(){ct.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function We(Er,gn){var dn=null;if(C(gn)?dn=gn:gn&&(Me(Er,gn),"x"in gn&&(Er.xOffset=0|gn.x),"y"in gn&&(Er.yOffset=0|gn.y),C(gn.data)&&(dn=gn.data)),gn.copy){var kn=Tr.viewportWidth,Un=Tr.viewportHeight;Er.width=Er.width||kn-Er.xOffset,Er.height=Er.height||Un-Er.yOffset,Er.needsCopy=!0}else if(dn){if(be(dn))Er.channels=Er.channels||4,Er.data=dn,"type"in gn||5121!==Er.type||(Er.type=0|ye[Object.prototype.toString.call(dn)]);else if(u(dn)){switch(Er.channels=Er.channels||4,Un=(kn=dn).length,Er.type){case 5121:case 5123:case 5125:case 5126:(Un=we.allocType(Er.type,Un)).set(kn),Er.data=Un;break;case 36193:Er.data=T(kn)}Er.alignment=1,Er.needsFree=!0}else if(b(dn)){kn=dn.data,Array.isArray(kn)||5121!==Er.type||(Er.type=0|ye[Object.prototype.toString.call(kn)]);var Gn,On,Xn,pa,ra=dn.stride;3===(Un=dn.shape).length?(Xn=Un[2],pa=ra[2]):pa=Xn=1,Gn=Un[0],On=Un[1],Un=ra[0],ra=ra[1],Er.alignment=1,Er.width=Gn,Er.height=On,Er.channels=Xn,Er.format=Er.internalformat=St[Xn],Er.needsFree=!0,Gn=pa,dn=dn.offset;for(var oi=we.allocType(36193===Er.type?5126:Er.type,(Xn=Er.width)*(pa=Er.height)*(On=Er.channels)),Ht=0,dr=0;dr<pa;++dr)for(var rn=0;rn<Xn;++rn)for(var ln=0;ln<On;++ln)oi[Ht++]=kn[Un*rn+ra*dr+Gn*ln+dn];R(Er,oi)}else if(o(dn)===Zt||o(dn)===Et||o(dn)===wt)Er.element=o(dn)===Zt||o(dn)===Et?dn:dn.canvas,Er.width=Er.element.width,Er.height=Er.element.height,Er.channels=4;else if(o(dn)===at)Er.element=dn,Er.width=dn.width,Er.height=dn.height,Er.channels=4;else if(o(dn)===vt)Er.element=dn,Er.width=dn.naturalWidth,Er.height=dn.naturalHeight,Er.channels=4;else if(o(dn)===Qe)Er.element=dn,Er.width=dn.videoWidth,Er.height=dn.videoHeight,Er.channels=4;else if(h(dn)){for(kn=Er.width||dn[0].length,Un=Er.height||dn.length,ra=Er.channels,ra=M(dn[0][0])?ra||dn[0][0].length:ra||1,Gn=De.shape(dn),Xn=1,pa=0;pa<Gn.length;++pa)Xn*=Gn[pa];Xn=we.allocType(36193===Er.type?5126:Er.type,Xn),De.flatten(dn,Gn,"",Xn),R(Er,Xn),Er.alignment=1,Er.width=kn,Er.height=Un,Er.channels=ra,Er.format=Er.internalformat=St[ra],Er.needsFree=!0}}else Er.width=Er.width||1,Er.height=Er.height||1,Er.channels=Er.channels||4}function st(Er,gn,dn,kn,Un){var ra=Er.element,Gn=Er.data,On=Er.internalformat,Xn=Er.format,pa=Er.type,oi=Er.width,Ht=Er.height;Se(Er),ra?et.texSubImage2D(gn,Un,dn,kn,Xn,pa,ra):Er.compressed?et.compressedTexSubImage2D(gn,Un,dn,kn,On,oi,Ht,Gn):Er.needsCopy?(Vt(),et.copyTexSubImage2D(gn,Un,dn,kn,Er.xOffset,Er.yOffset,oi,Ht)):et.texSubImage2D(gn,Un,dn,kn,oi,Ht,Xn,pa,Gn)}function lt(){return wa.pop()||new Je}function pt(Er){Er.needsFree&&we.freeType(Er.data),Je.call(Er),wa.push(Er)}function Ct(){ct.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Dt(Er,gn,dn){var kn=Er.images[0]=lt();Er.mipmask=1,kn.width=Er.width=gn,kn.height=Er.height=dn,kn.channels=Er.channels=4}function Gt(Er,gn){var dn=null;if(C(gn))ht(dn=Er.images[0]=lt(),Er),We(dn,gn),Er.mipmask=1;else if(Me(Er,gn),Array.isArray(gn.mipmap))for(var kn=gn.mipmap,Un=0;Un<kn.length;++Un)ht(dn=Er.images[Un]=lt(),Er),dn.width>>=Un,dn.height>>=Un,We(dn,kn[Un]),Er.mipmask|=1<<Un;else ht(dn=Er.images[0]=lt(),Er),We(dn,gn),Er.mipmask=1;ht(Er,Er.images[0])}function fr(Er,gn){for(var dn=Er.images,kn=0;kn<dn.length&&dn[kn];++kn){var Un=dn[kn],ra=gn,Gn=kn,On=Un.element,Xn=Un.data,pa=Un.internalformat,oi=Un.format,Ht=Un.type,dr=Un.width,rn=Un.height;Se(Un),On?et.texImage2D(ra,Gn,oi,oi,Ht,On):Un.compressed?et.compressedTexImage2D(ra,Gn,pa,dr,rn,0,Xn):Un.needsCopy?(Vt(),et.copyTexImage2D(ra,Gn,oi,Un.xOffset,Un.yOffset,dr,rn,0)):et.texImage2D(ra,Gn,oi,dr,rn,0,oi,Ht,Xn||null)}}function pr(){var Er=ma.pop()||new Ct;ct.call(Er);for(var gn=Er.mipmask=0;16>gn;++gn)Er.images[gn]=null;return Er}function Jr(Er){for(var gn=Er.images,dn=0;dn<gn.length;++dn)gn[dn]&&pt(gn[dn]),gn[dn]=null;ma.push(Er)}function Lr(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Ar(Er,gn){"min"in gn&&(Er.minFilter=Qt[gn.min],0<=Nt.indexOf(Er.minFilter)&&!("faces"in gn)&&(Er.genMipmaps=!0)),"mag"in gn&&(Er.magFilter=It[gn.mag]);var dn=Er.wrapS,kn=Er.wrapT;if("wrap"in gn){var Un=gn.wrap;"string"==typeof Un?dn=kn=it[Un]:Array.isArray(Un)&&(dn=it[Un[0]],kn=it[Un[1]])}else"wrapS"in gn&&(dn=it[gn.wrapS]),"wrapT"in gn&&(kn=it[gn.wrapT]);if(Er.wrapS=dn,Er.wrapT=kn,"anisotropic"in gn&&(Er.anisotropic=gn.anisotropic),"mipmap"in gn){switch(dn=!1,typeof gn.mipmap){case"string":Er.mipmapHint=Cr[gn.mipmap],dn=Er.genMipmaps=!0;break;case"boolean":dn=Er.genMipmaps=gn.mipmap;break;case"object":Er.genMipmaps=!1,dn=!0}!dn||"min"in gn||(Er.minFilter=9984)}}function en(Er,gn){et.texParameteri(gn,10241,Er.minFilter),et.texParameteri(gn,10240,Er.magFilter),et.texParameteri(gn,10242,Er.wrapS),et.texParameteri(gn,10243,Er.wrapT),Yt.ext_texture_filter_anisotropic&&et.texParameteri(gn,34046,Er.anisotropic),Er.genMipmaps&&(et.hint(33170,Er.mipmapHint),et.generateMipmap(gn))}function mr(Er){ct.call(this),this.mipmask=0,this.internalformat=6408,this.id=$a++,this.refCount=1,this.target=Er,this.texture=et.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Lr,je.profile&&(this.stats={size:0})}function wr(Er){et.activeTexture(33984),et.bindTexture(Er.target,Er.texture)}function Wr(){var Er=ai[0];Er?et.bindTexture(Er.target,Er.texture):et.bindTexture(3553,null)}function Kr(Er){var gn=Er.texture,dn=Er.unit,kn=Er.target;0<=dn&&(et.activeTexture(33984+dn),et.bindTexture(kn,null),ai[dn]=null),et.deleteTexture(gn),Er.texture=null,Er.params=null,Er.pixels=null,Er.refCount=0,delete Ja[Er.id],tt.textureCount--}var Cr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},it={repeat:10497,clamp:33071,mirror:33648},It={nearest:9728,linear:9729},Qt=le({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},It),ir={none:0,browser:37444},Or={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},qr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Ir={};Yt.ext_srgb&&(qr.srgb=35904,qr.srgba=35906),Yt.oes_texture_float&&(Or.float32=Or.float=5126),Yt.oes_texture_half_float&&(Or.float16=Or["half float"]=36193),Yt.webgl_depth_texture&&(le(qr,{depth:6402,"depth stencil":34041}),le(Or,{uint16:5123,uint32:5125,"depth stencil":34042})),Yt.webgl_compressed_texture_s3tc&&le(Ir,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Yt.webgl_compressed_texture_atc&&le(Ir,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Yt.webgl_compressed_texture_pvrtc&&le(Ir,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Yt.webgl_compressed_texture_etc1&&(Ir["rgb etc1"]=36196);var kr=Array.prototype.slice.call(et.getParameter(34467));Object.keys(Ir).forEach(function(Er){var gn=Ir[Er];0<=kr.indexOf(gn)&&(qr[Er]=gn)});var Zr=Object.keys(qr);qt.textureFormats=Zr;var An=[];Object.keys(qr).forEach(function(Er){An[qr[Er]]=Er});var wn=[];Object.keys(Or).forEach(function(Er){wn[Or[Er]]=Er});var Zn=[];Object.keys(It).forEach(function(Er){Zn[It[Er]]=Er});var Ln=[];Object.keys(Qt).forEach(function(Er){Ln[Qt[Er]]=Er});var Wn=[];Object.keys(it).forEach(function(Er){Wn[it[Er]]=Er});var $n=Zr.reduce(function(Er,gn){var dn=qr[gn];return Er[dn]=6409===dn||6406===dn||6409===dn||6410===dn||6402===dn||34041===dn||Yt.ext_srgb&&(35904===dn||35906===dn)?dn:32855===dn||0<=gn.indexOf("rgba")?6408:6407,Er},{}),wa=[],ma=[],$a=0,Ja={},Va=qt.maxTextureUnits,ai=Array(Va).map(function(){return null});return le(mr.prototype,{bind:function(){this.bindCount+=1;var Er=this.unit;if(0>Er){for(var gn=0;gn<Va;++gn){var dn=ai[gn];if(dn){if(0<dn.bindCount)continue;dn.unit=-1}ai[gn]=this,Er=gn;break}je.profile&&tt.maxTextureUnits<Er+1&&(tt.maxTextureUnits=Er+1),this.unit=Er,et.activeTexture(33984+Er),et.bindTexture(this.target,this.texture)}return Er},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Kr(this)}}),je.profile&&(tt.getTotalTextureSize=function(){var Er=0;return Object.keys(Ja).forEach(function(gn){Er+=Ja[gn].stats.size}),Er}),{create2D:function(Er,gn){function dn(Un,ra){var Gn=kn.texInfo;Lr.call(Gn);var On=pr();return"number"==typeof Un?Dt(On,0|Un,"number"==typeof ra?0|ra:0|Un):Un?(Ar(Gn,Un),Gt(On,Un)):Dt(On,1,1),Gn.genMipmaps&&(On.mipmask=(On.width<<1)-1),kn.mipmask=On.mipmask,ht(kn,On),kn.internalformat=On.internalformat,dn.width=On.width,dn.height=On.height,wr(kn),fr(On,3553),en(Gn,3553),Wr(),Jr(On),je.profile&&(kn.stats.size=z(kn.internalformat,kn.type,On.width,On.height,Gn.genMipmaps,!1)),dn.format=An[kn.internalformat],dn.type=wn[kn.type],dn.mag=Zn[Gn.magFilter],dn.min=Ln[Gn.minFilter],dn.wrapS=Wn[Gn.wrapS],dn.wrapT=Wn[Gn.wrapT],dn}var kn=new mr(3553);return Ja[kn.id]=kn,tt.textureCount++,dn(Er,gn),dn.subimage=function(Un,ra,Gn,On){ra|=0,Gn|=0,On|=0;var Xn=lt();return ht(Xn,kn),Xn.width=0,Xn.height=0,We(Xn,Un),Xn.width=Xn.width||(kn.width>>On)-ra,Xn.height=Xn.height||(kn.height>>On)-Gn,wr(kn),st(Xn,3553,ra,Gn,On),Wr(),pt(Xn),dn},dn.resize=function(Un,ra){var Gn=0|Un,On=0|ra||Gn;if(Gn===kn.width&&On===kn.height)return dn;dn.width=kn.width=Gn,dn.height=kn.height=On,wr(kn);for(var Xn=0;kn.mipmask>>Xn;++Xn){var pa=Gn>>Xn,oi=On>>Xn;if(!pa||!oi)break;et.texImage2D(3553,Xn,kn.format,pa,oi,0,kn.format,kn.type,null)}return Wr(),je.profile&&(kn.stats.size=z(kn.internalformat,kn.type,Gn,On,!1,!1)),dn},dn._reglType="texture2d",dn._texture=kn,je.profile&&(dn.stats=kn.stats),dn.destroy=function(){kn.decRef()},dn},createCube:function(Er,gn,dn,kn,Un,ra){function Gn(pa,oi,Ht,dr,rn,ln){var or,Br=On.texInfo;for(Lr.call(Br),or=0;6>or;++or)Xn[or]=pr();if("number"!=typeof pa&&pa){if("object"==typeof pa)if(oi)Gt(Xn[0],pa),Gt(Xn[1],oi),Gt(Xn[2],Ht),Gt(Xn[3],dr),Gt(Xn[4],rn),Gt(Xn[5],ln);else if(Ar(Br,pa),Me(On,pa),"faces"in pa)for(pa=pa.faces,or=0;6>or;++or)ht(Xn[or],On),Gt(Xn[or],pa[or]);else for(or=0;6>or;++or)Gt(Xn[or],pa)}else for(pa=0|pa||1,or=0;6>or;++or)Dt(Xn[or],pa,pa);for(ht(On,Xn[0]),On.mipmask=Br.genMipmaps?(Xn[0].width<<1)-1:Xn[0].mipmask,On.internalformat=Xn[0].internalformat,Gn.width=Xn[0].width,Gn.height=Xn[0].height,wr(On),or=0;6>or;++or)fr(Xn[or],34069+or);for(en(Br,34067),Wr(),je.profile&&(On.stats.size=z(On.internalformat,On.type,Gn.width,Gn.height,Br.genMipmaps,!0)),Gn.format=An[On.internalformat],Gn.type=wn[On.type],Gn.mag=Zn[Br.magFilter],Gn.min=Ln[Br.minFilter],Gn.wrapS=Wn[Br.wrapS],Gn.wrapT=Wn[Br.wrapT],or=0;6>or;++or)Jr(Xn[or]);return Gn}var On=new mr(34067);Ja[On.id]=On,tt.cubeCount++;var Xn=Array(6);return Gn(Er,gn,dn,kn,Un,ra),Gn.subimage=function(pa,oi,Ht,dr,rn){Ht|=0,dr|=0,rn|=0;var ln=lt();return ht(ln,On),ln.width=0,ln.height=0,We(ln,oi),ln.width=ln.width||(On.width>>rn)-Ht,ln.height=ln.height||(On.height>>rn)-dr,wr(On),st(ln,34069+pa,Ht,dr,rn),Wr(),pt(ln),Gn},Gn.resize=function(pa){if((pa|=0)!==On.width){Gn.width=On.width=pa,Gn.height=On.height=pa,wr(On);for(var oi=0;6>oi;++oi)for(var Ht=0;On.mipmask>>Ht;++Ht)et.texImage2D(34069+oi,Ht,On.format,pa>>Ht,pa>>Ht,0,On.format,On.type,null);return Wr(),je.profile&&(On.stats.size=z(On.internalformat,On.type,Gn.width,Gn.height,!1,!0)),Gn}},Gn._reglType="textureCube",Gn._texture=On,je.profile&&(Gn.stats=On.stats),Gn.destroy=function(){On.decRef()},Gn},clear:function(){for(var Er=0;Er<Va;++Er)et.activeTexture(33984+Er),et.bindTexture(3553,null),ai[Er]=null;Le(Ja).forEach(Kr),tt.cubeCount=0,tt.textureCount=0},getTexture:function(Er){return null},restore:function(){for(var Er=0;Er<Va;++Er){var gn=ai[Er];gn&&(gn.bindCount=0,gn.unit=-1,ai[Er]=null)}Le(Ja).forEach(function(dn){dn.texture=et.createTexture(),et.bindTexture(dn.target,dn.texture);for(var kn=0;32>kn;++kn)if(0!=(dn.mipmask&1<<kn))if(3553===dn.target)et.texImage2D(3553,kn,dn.internalformat,dn.width>>kn,dn.height>>kn,0,dn.internalformat,dn.type,null);else for(var Un=0;6>Un;++Un)et.texImage2D(34069+Un,kn,dn.internalformat,dn.width>>kn,dn.height>>kn,0,dn.internalformat,dn.type,null);en(dn.texInfo,dn.target)})},refresh:function(){for(var Er=0;Er<Va;++Er){var gn=ai[Er];gn&&(gn.bindCount=0,gn.unit=-1,ai[Er]=null),et.activeTexture(33984+Er),et.bindTexture(3553,null),et.bindTexture(34067,null)}}}}(st,Gt,en,function(){Qt.procs.poll()},Lr,Ct,et),it=function(et,Yt,qt,Vt,Tr){function tt(Je){this.id=Me++,this.refCount=1,this.renderbuffer=Je,this.format=32854,this.height=this.width=0,Tr.profile&&(this.stats={size:0})}function je(Je){var We=Je.renderbuffer;et.bindRenderbuffer(36161,null),et.deleteRenderbuffer(We),Je.renderbuffer=null,Je.refCount=0,delete Se[Je.id],Vt.renderbufferCount--}var ct={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Yt.ext_srgb&&(ct.srgba=35907),Yt.ext_color_buffer_half_float&&(ct.rgba16f=34842,ct.rgb16f=34843),Yt.webgl_color_buffer_float&&(ct.rgba32f=34836);var ht=[];Object.keys(ct).forEach(function(Je){ht[ct[Je]]=Je});var Me=0,Se={};return tt.prototype.decRef=function(){0>=--this.refCount&&je(this)},Tr.profile&&(Vt.getTotalRenderbufferSize=function(){var Je=0;return Object.keys(Se).forEach(function(We){Je+=Se[We].stats.size}),Je}),{create:function(Je,We){function st(pt,Ct){var Dt=0,Gt=0,fr=32854;if("object"==typeof pt&&pt?("shape"in pt?(Dt=0|(Gt=pt.shape)[0],Gt=0|Gt[1]):("radius"in pt&&(Dt=Gt=0|pt.radius),"width"in pt&&(Dt=0|pt.width),"height"in pt&&(Gt=0|pt.height)),"format"in pt&&(fr=ct[pt.format])):"number"==typeof pt?(Dt=0|pt,Gt="number"==typeof Ct?0|Ct:Dt):pt||(Dt=Gt=1),Dt!==lt.width||Gt!==lt.height||fr!==lt.format)return st.width=lt.width=Dt,st.height=lt.height=Gt,lt.format=fr,et.bindRenderbuffer(36161,lt.renderbuffer),et.renderbufferStorage(36161,fr,Dt,Gt),Tr.profile&&(lt.stats.size=rt[lt.format]*lt.width*lt.height),st.format=ht[lt.format],st}var lt=new tt(et.createRenderbuffer());return Se[lt.id]=lt,Vt.renderbufferCount++,st(Je,We),st.resize=function(pt,Ct){var Dt=0|pt,Gt=0|Ct||Dt;return Dt===lt.width&&Gt===lt.height||(st.width=lt.width=Dt,st.height=lt.height=Gt,et.bindRenderbuffer(36161,lt.renderbuffer),et.renderbufferStorage(36161,lt.format,Dt,Gt),Tr.profile&&(lt.stats.size=rt[lt.format]*lt.width*lt.height)),st},st._reglType="renderbuffer",st._renderbuffer=lt,Tr.profile&&(st.stats=lt.stats),st.destroy=function(){lt.decRef()},st},clear:function(){Le(Se).forEach(je)},restore:function(){Le(Se).forEach(function(Je){Je.renderbuffer=et.createRenderbuffer(),et.bindRenderbuffer(36161,Je.renderbuffer),et.renderbufferStorage(36161,Je.format,Je.width,Je.height)}),et.bindRenderbuffer(36161,null)}}}(st,Gt,0,Ct,et),It=function I(et,Yt,qt,Vt,Tr,tt){function je(mr,wr,Wr){this.target=mr,this.texture=wr,this.renderbuffer=Wr;var Kr=mr=0;wr?(mr=wr.width,Kr=wr.height):Wr&&(mr=Wr.width,Kr=Wr.height),this.width=mr,this.height=Kr}function ct(mr){mr&&(mr.texture&&mr.texture._texture.decRef(),mr.renderbuffer&&mr.renderbuffer._renderbuffer.decRef())}function ht(mr,wr,Wr){mr&&(mr.texture?mr.texture._texture.refCount+=1:mr.renderbuffer._renderbuffer.refCount+=1)}function Me(mr,wr){wr&&(wr.texture?et.framebufferTexture2D(36160,mr,wr.target,wr.texture._texture.texture,0):et.framebufferRenderbuffer(36160,mr,36161,wr.renderbuffer._renderbuffer.renderbuffer))}function Se(mr){var wr=3553,Wr=null,Kr=null,Cr=mr;return"object"==typeof mr&&(Cr=mr.data,"target"in mr&&(wr=0|mr.target)),"texture2d"===(mr=Cr._reglType)||"textureCube"===mr?Wr=Cr:"renderbuffer"===mr&&(Kr=Cr,wr=36161),new je(wr,Wr,Kr)}function Je(mr,wr,Wr,Kr,Cr){return Wr?((mr=Vt.create2D({width:mr,height:wr,format:Kr,type:Cr}))._texture.refCount=0,new je(3553,mr,null)):((mr=Tr.create({width:mr,height:wr,format:Kr}))._renderbuffer.refCount=0,new je(36161,null,mr))}function We(mr){return mr&&(mr.texture||mr.renderbuffer)}function st(mr,wr,Wr){mr&&(mr.texture?mr.texture.resize(wr,Wr):mr.renderbuffer&&mr.renderbuffer.resize(wr,Wr),mr.width=wr,mr.height=Wr)}function lt(){this.id=Ar++,en[this.id]=this,this.framebuffer=et.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function pt(mr){mr.colorAttachments.forEach(ct),ct(mr.depthAttachment),ct(mr.stencilAttachment),ct(mr.depthStencilAttachment)}function Ct(mr){et.deleteFramebuffer(mr.framebuffer),mr.framebuffer=null,tt.framebufferCount--,delete en[mr.id]}function Dt(mr){var wr;et.bindFramebuffer(36160,mr.framebuffer);var Wr=mr.colorAttachments;for(wr=0;wr<Wr.length;++wr)Me(36064+wr,Wr[wr]);for(wr=Wr.length;wr<qt.maxColorAttachments;++wr)et.framebufferTexture2D(36160,36064+wr,3553,null,0);et.framebufferTexture2D(36160,33306,3553,null,0),et.framebufferTexture2D(36160,36096,3553,null,0),et.framebufferTexture2D(36160,36128,3553,null,0),Me(36096,mr.depthAttachment),Me(36128,mr.stencilAttachment),Me(33306,mr.depthStencilAttachment),et.checkFramebufferStatus(36160),et.isContextLost(),et.bindFramebuffer(36160,fr.next?fr.next.framebuffer:null),fr.cur=fr.next,et.getError()}function Gt(mr,wr){function Wr(Cr,it){var It,Qt=0,ir=0,Or=!0,qr=!0;It=null;var Ir=!0,kr="rgba",Zr="uint8",An=1,wn=null,Zn=null,Ln=null,Wn=!1;"number"==typeof Cr?(Qt=0|Cr,ir=0|it||Qt):Cr?("shape"in Cr?(Qt=(ir=Cr.shape)[0],ir=ir[1]):("radius"in Cr&&(Qt=ir=Cr.radius),"width"in Cr&&(Qt=Cr.width),"height"in Cr&&(ir=Cr.height)),("color"in Cr||"colors"in Cr)&&(It=Cr.color||Cr.colors,Array.isArray(It)),It||("colorCount"in Cr&&(An=0|Cr.colorCount),"colorTexture"in Cr&&(Ir=!!Cr.colorTexture,kr="rgba4"),"colorType"in Cr&&(Zr=Cr.colorType,!Ir)&&("half float"===Zr||"float16"===Zr?kr="rgba16f":("float"===Zr||"float32"===Zr)&&(kr="rgba32f")),"colorFormat"in Cr&&(0<=pr.indexOf(kr=Cr.colorFormat)?Ir=!0:0<=Jr.indexOf(kr)&&(Ir=!1))),("depthTexture"in Cr||"depthStencilTexture"in Cr)&&(Wn=!(!Cr.depthTexture&&!Cr.depthStencilTexture)),"depth"in Cr&&("boolean"==typeof Cr.depth?Or=Cr.depth:(wn=Cr.depth,qr=!1)),"stencil"in Cr&&("boolean"==typeof Cr.stencil?qr=Cr.stencil:(Zn=Cr.stencil,Or=!1)),"depthStencil"in Cr&&("boolean"==typeof Cr.depthStencil?Or=qr=Cr.depthStencil:(Ln=Cr.depthStencil,qr=Or=!1))):Qt=ir=1;var $n=null,wa=null,ma=null,$a=null;if(Array.isArray(It))$n=It.map(Se);else if(It)$n=[Se(It)];else for($n=Array(An),It=0;It<An;++It)$n[It]=Je(Qt,ir,Ir,kr,Zr);for(Qt=Qt||$n[0].width,ir=ir||$n[0].height,wn?wa=Se(wn):Or&&!qr&&(wa=Je(Qt,ir,Wn,"depth","uint32")),Zn?ma=Se(Zn):qr&&!Or&&(ma=Je(Qt,ir,!1,"stencil","uint8")),Ln?$a=Se(Ln):!wn&&!Zn&&qr&&Or&&($a=Je(Qt,ir,Wn,"depth stencil","depth stencil")),Or=null,It=0;It<$n.length;++It)ht($n[It]),$n[It]&&$n[It].texture&&(qr=Tt[$n[It].texture._texture.format]*Xt[$n[It].texture._texture.type],null===Or&&(Or=qr));return ht(wa),ht(ma),ht($a),pt(Kr),Kr.width=Qt,Kr.height=ir,Kr.colorAttachments=$n,Kr.depthAttachment=wa,Kr.stencilAttachment=ma,Kr.depthStencilAttachment=$a,Wr.color=$n.map(We),Wr.depth=We(wa),Wr.stencil=We(ma),Wr.depthStencil=We($a),Wr.width=Kr.width,Wr.height=Kr.height,Dt(Kr),Wr}var Kr=new lt;return tt.framebufferCount++,Wr(mr,wr),le(Wr,{resize:function(Cr,it){var It=Math.max(0|Cr,1),Qt=Math.max(0|it||It,1);if(It===Kr.width&&Qt===Kr.height)return Wr;for(var ir=Kr.colorAttachments,Or=0;Or<ir.length;++Or)st(ir[Or],It,Qt);return st(Kr.depthAttachment,It,Qt),st(Kr.stencilAttachment,It,Qt),st(Kr.depthStencilAttachment,It,Qt),Kr.width=Wr.width=It,Kr.height=Wr.height=Qt,Dt(Kr),Wr},_reglType:"framebuffer",_framebuffer:Kr,destroy:function(){Ct(Kr),pt(Kr)},use:function(Cr){fr.setFBO({framebuffer:Wr},Cr)}})}var fr={cur:null,next:null,dirty:!1,setFBO:null},pr=["rgba"],Jr=["rgba4","rgb565","rgb5 a1"];Yt.ext_srgb&&Jr.push("srgba"),Yt.ext_color_buffer_half_float&&Jr.push("rgba16f","rgb16f"),Yt.webgl_color_buffer_float&&Jr.push("rgba32f");var Lr=["uint8"];Yt.oes_texture_half_float&&Lr.push("half float","float16"),Yt.oes_texture_float&&Lr.push("float","float32");var Ar=0,en={};return le(fr,{getFramebuffer:function(mr){return"function"==typeof mr&&"framebuffer"===mr._reglType&&(mr=mr._framebuffer)instanceof lt?mr:null},create:Gt,createCube:function(mr){function wr(Kr){var Cr,it={color:null},It=0,Qt=null;Cr="rgba";var ir="uint8",Or=1;if("number"==typeof Kr?It=0|Kr:Kr?("shape"in Kr?It=Kr.shape[0]:("radius"in Kr&&(It=0|Kr.radius),"width"in Kr?It=0|Kr.width:"height"in Kr&&(It=0|Kr.height)),("color"in Kr||"colors"in Kr)&&(Qt=Kr.color||Kr.colors,Array.isArray(Qt)),Qt||("colorCount"in Kr&&(Or=0|Kr.colorCount),"colorType"in Kr&&(ir=Kr.colorType),"colorFormat"in Kr&&(Cr=Kr.colorFormat)),"depth"in Kr&&(it.depth=Kr.depth),"stencil"in Kr&&(it.stencil=Kr.stencil),"depthStencil"in Kr&&(it.depthStencil=Kr.depthStencil)):It=1,Qt)if(Array.isArray(Qt))for(Kr=[],Cr=0;Cr<Qt.length;++Cr)Kr[Cr]=Qt[Cr];else Kr=[Qt];else for(Kr=Array(Or),Qt={radius:It,format:Cr,type:ir},Cr=0;Cr<Or;++Cr)Kr[Cr]=Vt.createCube(Qt);for(it.color=Array(Kr.length),Cr=0;Cr<Kr.length;++Cr)Or=Kr[Cr],It=It||Or.width,it.color[Cr]={target:34069,data:Kr[Cr]};for(Cr=0;6>Cr;++Cr){for(Or=0;Or<Kr.length;++Or)it.color[Or].target=34069+Cr;0<Cr&&(it.depth=Wr[0].depth,it.stencil=Wr[0].stencil,it.depthStencil=Wr[0].depthStencil),Wr[Cr]?Wr[Cr](it):Wr[Cr]=Gt(it)}return le(wr,{width:It,height:It,color:Kr})}var Wr=Array(6);return wr(mr),le(wr,{faces:Wr,resize:function(Kr){var Cr=0|Kr;if(Cr===wr.width)return wr;var it=wr.color;for(Kr=0;Kr<it.length;++Kr)it[Kr].resize(Cr);for(Kr=0;6>Kr;++Kr)Wr[Kr].resize(Cr);return wr.width=wr.height=Cr,wr},_reglType:"framebufferCube",destroy:function(){Wr.forEach(function(Kr){Kr.destroy()})}})},clear:function(){Le(en).forEach(Ct)},restore:function(){fr.cur=null,fr.next=null,fr.dirty=!0,Le(en).forEach(function(mr){mr.framebuffer=et.createFramebuffer(),Dt(mr)})}})}(st,Gt,en,Cr,it,Ct),Qt=j(st,ir,Gt,en,mr,wr,0,It,{},Wr,Kr,Ar,Lr,fr,Dt,et),Or=(ir=U(st,It,Qt.procs.poll,Lr),Qt.next),qr=st.canvas,Ir=[],kr=[],Zr=[],An=[et.onDestroy],wn=null;qr&&(qr.addEventListener("webglcontextlost",Tr,!1),qr.addEventListener("webglcontextrestored",tt,!1));var Zn=It.setFBO=je({framebuffer:pe.define.call(null,1,"framebuffer")});return Je(),lt=le(je,{clear:function(Ln){if("framebuffer"in Ln)if(Ln.framebuffer&&"framebufferCube"===Ln.framebuffer_reglType)for(var Wn=0;6>Wn;++Wn)Zn(le({framebuffer:Ln.framebuffer.faces[Wn]},Ln),ct);else Zn(Ln,ct);else ct(0,Ln)},prop:pe.define.bind(null,1),context:pe.define.bind(null,2),this:pe.define.bind(null,3),draw:je({}),buffer:function(Ln){return mr.create(Ln,34962,!1,!1)},elements:function(Ln){return wr.create(Ln,!1)},texture:Cr.create2D,cube:Cr.createCube,renderbuffer:it.create,framebuffer:It.create,framebufferCube:It.createCube,vao:Wr.createVAO,attributes:lt,frame:ht,on:function(Ln,Wn){var $n;switch(Ln){case"frame":return ht(Wn);case"lost":$n=kr;break;case"restore":$n=Zr;break;case"destroy":$n=An}return $n.push(Wn),{cancel:function(){for(var wa=0;wa<$n.length;++wa)if($n[wa]===Wn){$n[wa]=$n[$n.length-1],$n.pop();break}}}},limits:en,hasExtension:function(Ln){return 0<=en.extensions.indexOf(Ln.toLowerCase())},read:ir,destroy:function(){Ir.length=0,Vt(),qr&&(qr.removeEventListener("webglcontextlost",Tr),qr.removeEventListener("webglcontextrestored",tt)),Kr.clear(),It.clear(),it.clear(),Wr.clear(),Cr.clear(),wr.clear(),mr.clear(),fr&&fr.clear(),An.forEach(function(Ln){Ln()})},_gl:st,_refresh:Je,poll:function(){Se(),fr&&fr.update()},now:We,stats:Ct,getCachedCode:function(){return Dt},preloadCachedCode:function(Ln){Object.entries(Ln).forEach(function(Wn){Dt[Wn[0]]=Wn[1]})}}),et.onDone(null,lt),lt}},"object"==typeof ae&&void 0!==ie?ie.exports=k():this.createREGL=k()},{}],284:[function(v,ie,ae){var _=v("buffer"),k=_.Buffer;function m(e,c){for(var d in e)c[d]=e[d]}function E(e,c,d){return k(e,c,d)}k.from&&k.alloc&&k.allocUnsafe&&k.allocUnsafeSlow?ie.exports=_:(m(_,ae),ae.Buffer=E),E.prototype=Object.create(k.prototype),m(k,E),E.from=function(e,c,d){if("number"==typeof e)throw new TypeError("Argument must not be a number");return k(e,c,d)},E.alloc=function(e,c,d){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=k(e);return void 0!==c?"string"==typeof d?n.fill(c,d):n.fill(c):n.fill(0),n},E.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return k(e)},E.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return _.SlowBuffer(e)}},{buffer:85}],285:[function(v,ie,ae){ie.exports=m;var _=v("events").EventEmitter;function m(){_.call(this)}v("inherits")(m,_),m.Readable=v("readable-stream/lib/_stream_readable.js"),m.Writable=v("readable-stream/lib/_stream_writable.js"),m.Duplex=v("readable-stream/lib/_stream_duplex.js"),m.Transform=v("readable-stream/lib/_stream_transform.js"),m.PassThrough=v("readable-stream/lib/_stream_passthrough.js"),m.finished=v("readable-stream/lib/internal/streams/end-of-stream.js"),m.pipeline=v("readable-stream/lib/internal/streams/pipeline.js"),m.Stream=m,m.prototype.pipe=function(E,e){var c=this;function d(s){E.writable&&!1===E.write(s)&&c.pause&&c.pause()}function n(){c.readable&&c.resume&&c.resume()}c.on("data",d),E.on("drain",n),!E._isStdio&&(!e||!1!==e.end)&&(c.on("end",i),c.on("close",a));var t=!1;function i(){t||(t=!0,E.end())}function a(){t||(t=!0,"function"==typeof E.destroy&&E.destroy())}function r(s){if(g(),0===_.listenerCount(this,"error"))throw s}function g(){c.removeListener("data",d),E.removeListener("drain",n),c.removeListener("end",i),c.removeListener("close",a),c.removeListener("error",r),E.removeListener("error",r),c.removeListener("end",g),c.removeListener("close",g),E.removeListener("close",g)}return c.on("error",r),E.on("error",r),c.on("end",g),c.on("close",g),E.on("close",g),E.emit("pipe",c),E}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":287,"readable-stream/lib/_stream_passthrough.js":288,"readable-stream/lib/_stream_readable.js":289,"readable-stream/lib/_stream_transform.js":290,"readable-stream/lib/_stream_writable.js":291,"readable-stream/lib/internal/streams/end-of-stream.js":295,"readable-stream/lib/internal/streams/pipeline.js":297}],286:[function(v,ie,ae){"use strict";var k={};function m(n,t,i){i||(i=Error);var r=function(g){function s(b,x,S){return g.call(this,function a(g,s,b){return"string"==typeof t?t:t(g,s,b)}(b,x,S))||this}return function _(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.__proto__=t}(s,g),s}(i);r.prototype.name=i.name,r.prototype.code=n,k[n]=r}function E(n,t){if(Array.isArray(n)){var i=n.length;return n=n.map(function(a){return String(a)}),i>2?"one of ".concat(t," ").concat(n.slice(0,i-1).join(", "),", or ")+n[i-1]:2===i?"one of ".concat(t," ").concat(n[0]," or ").concat(n[1]):"of ".concat(t," ").concat(n[0])}return"of ".concat(t," ").concat(String(n))}m("ERR_INVALID_OPT_VALUE",function(n,t){return'The value "'+t+'" is invalid for option "'+n+'"'},TypeError),m("ERR_INVALID_ARG_TYPE",function(n,t,i){var a,r;if("string"==typeof t&&function e(n,t,i){return n.substr(!i||i<0?0:+i,t.length)===t}(t,"not ")?(a="must not be",t=t.replace(/^not /,"")):a="must be",function c(n,t,i){return(void 0===i||i>n.length)&&(i=n.length),n.substring(i-t.length,i)===t}(n," argument"))r="The ".concat(n," ").concat(a," ").concat(E(t,"type"));else{var g=function d(n,t,i){return"number"!=typeof i&&(i=0),!(i+t.length>n.length)&&-1!==n.indexOf(t,i)}(n,".")?"property":"argument";r='The "'.concat(n,'" ').concat(g," ").concat(a," ").concat(E(t,"type"))}return r+". Received type ".concat(typeof i)},TypeError),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),m("ERR_METHOD_NOT_IMPLEMENTED",function(n){return"The "+n+" method is not implemented"}),m("ERR_STREAM_PREMATURE_CLOSE","Premature close"),m("ERR_STREAM_DESTROYED",function(n){return"Cannot call "+n+" after a stream was destroyed"}),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),m("ERR_STREAM_WRITE_AFTER_END","write after end"),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_UNKNOWN_ENCODING",function(n){return"Unknown encoding: "+n},TypeError),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ie.exports.codes=k},{}],287:[function(v,ie,ae){(function(_){(function(){"use strict";var k=Object.keys||function(a){var r=[];for(var g in a)r.push(g);return r};ie.exports=n;var m=v("./_stream_readable"),E=v("./_stream_writable");v("inherits")(n,m);for(var e=k(E.prototype),c=0;c<e.length;c++){var d=e[c];n.prototype[d]||(n.prototype[d]=E.prototype[d])}function n(a){if(!(this instanceof n))return new n(a);m.call(this,a),E.call(this,a),this.allowHalfOpen=!0,a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",t)))}function t(){this._writableState.ended||_.nextTick(i,this)}function i(a){a.end()}Object.defineProperty(n.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(n.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(n.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(n.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(r){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=r,this._writableState.destroyed=r)}})}).call(this)}).call(this,v("_process"))},{"./_stream_readable":289,"./_stream_writable":291,_process:277,inherits:231}],288:[function(v,ie,ae){"use strict";ie.exports=k;var _=v("./_stream_transform");function k(m){if(!(this instanceof k))return new k(m);_.call(this,m)}v("inherits")(k,_),k.prototype._transform=function(m,E,e){e(null,m)}},{"./_stream_transform":290,inherits:231}],289:[function(v,ie,ae){(function(_,k){(function(){"use strict";var m;ie.exports=C,C.ReadableState=o,v("events");var e=function(j,re){return j.listeners(re).length},c=v("./internal/streams/stream"),d=v("buffer").Buffer,n=k.Uint8Array||function(){};var r,a=v("util");r=a&&a.debuglog?a.debuglog("stream"):function(){};var A,T,M,g=v("./internal/streams/buffer_list"),s=v("./internal/streams/destroy"),x=v("./internal/streams/state").getHighWaterMark,S=v("../errors").codes,p=S.ERR_INVALID_ARG_TYPE,w=S.ERR_STREAM_PUSH_AFTER_EOF,l=S.ERR_METHOD_NOT_IMPLEMENTED,y=S.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;v("inherits")(C,c);var f=s.errorOrDestroy,u=["error","close","destroy","pause","resume"];function o(J,j,re){m=m||v("./_stream_duplex"),"boolean"!=typeof re&&(re=j instanceof m),this.objectMode=!!(J=J||{}).objectMode,re&&(this.objectMode=this.objectMode||!!J.readableObjectMode),this.highWaterMark=x(this,J,"readableHighWaterMark",re),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==J.emitClose,this.autoDestroy=!!J.autoDestroy,this.destroyed=!1,this.defaultEncoding=J.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,J.encoding&&(A||(A=v("string_decoder/").StringDecoder),this.decoder=new A(J.encoding),this.encoding=J.encoding)}function C(J){if(m=m||v("./_stream_duplex"),!(this instanceof C))return new C(J);this._readableState=new o(J,this,this instanceof m),this.readable=!0,J&&("function"==typeof J.read&&(this._read=J.read),"function"==typeof J.destroy&&(this._destroy=J.destroy)),c.call(this)}function R(J,j,re,le,ge){r("readableAddChunk",j);var xe,pe=J._readableState;if(null===j)pe.reading=!1,function N(J,j){if(r("onEofChunk"),!j.ended){if(j.decoder){var re=j.decoder.end();re&&re.length&&(j.buffer.push(re),j.length+=j.objectMode?1:re.length)}j.ended=!0,j.sync?U(J):(j.needReadable=!1,j.emittedReadable||(j.emittedReadable=!0,X(J)))}}(J,pe);else if(ge||(xe=function O(J,j){var re;return!function i(J){return d.isBuffer(J)||J instanceof n}(j)&&"string"!=typeof j&&void 0!==j&&!J.objectMode&&(re=new p("chunk",["string","Buffer","Uint8Array"],j)),re}(pe,j)),xe)f(J,xe);else if(pe.objectMode||j&&j.length>0)if("string"!=typeof j&&!pe.objectMode&&Object.getPrototypeOf(j)!==d.prototype&&(j=function t(J){return d.from(J)}(j)),le)pe.endEmitted?f(J,new y):z(J,pe,j,!0);else if(pe.ended)f(J,new w);else{if(pe.destroyed)return!1;pe.reading=!1,pe.decoder&&!re?(j=pe.decoder.write(j),pe.objectMode||0!==j.length?z(J,pe,j,!1):oe(J,pe)):z(J,pe,j,!1)}else le||(pe.reading=!1,oe(J,pe));return!pe.ended&&(pe.length<pe.highWaterMark||0===pe.length)}function z(J,j,re,le){j.flowing&&0===j.length&&!j.sync?(j.awaitDrain=0,J.emit("data",re)):(j.length+=j.objectMode?1:re.length,le?j.buffer.unshift(re):j.buffer.push(re),j.needReadable&&U(J)),oe(J,j)}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(j){!this._readableState||(this._readableState.destroyed=j)}}),C.prototype.destroy=s.destroy,C.prototype._undestroy=s.undestroy,C.prototype._destroy=function(J,j){j(J)},C.prototype.push=function(J,j){var le,re=this._readableState;return re.objectMode?le=!0:"string"==typeof J&&((j=j||re.defaultEncoding)!==re.encoding&&(J=d.from(J,j),j=""),le=!0),R(this,J,j,!1,le)},C.prototype.unshift=function(J){return R(this,J,null,!0,!1)},C.prototype.isPaused=function(){return!1===this._readableState.flowing},C.prototype.setEncoding=function(J){A||(A=v("string_decoder/").StringDecoder);var j=new A(J);this._readableState.decoder=j,this._readableState.encoding=this._readableState.decoder.encoding;for(var re=this._readableState.buffer.head,le="";null!==re;)le+=j.write(re.data),re=re.next;return this._readableState.buffer.clear(),""!==le&&this._readableState.buffer.push(le),this._readableState.length=le.length,this};var I=1073741824;function D(J,j){return J<=0||0===j.length&&j.ended?0:j.objectMode?1:J!=J?j.flowing&&j.length?j.buffer.head.data.length:j.length:(J>j.highWaterMark&&(j.highWaterMark=function F(J){return J>=I?J=I:(J--,J|=J>>>1,J|=J>>>2,J|=J>>>4,J|=J>>>8,J|=J>>>16,J++),J}(J)),J<=j.length?J:j.ended?j.length:(j.needReadable=!0,0))}function U(J){var j=J._readableState;r("emitReadable",j.needReadable,j.emittedReadable),j.needReadable=!1,j.emittedReadable||(r("emitReadable",j.flowing),j.emittedReadable=!0,_.nextTick(X,J))}function X(J){var j=J._readableState;r("emitReadable_",j.destroyed,j.length,j.ended),!j.destroyed&&(j.length||j.ended)&&(J.emit("readable"),j.emittedReadable=!1),j.needReadable=!j.flowing&&!j.ended&&j.length<=j.highWaterMark,H(J)}function oe(J,j){j.readingMore||(j.readingMore=!0,_.nextTick(se,J,j))}function se(J,j){for(;!j.reading&&!j.ended&&(j.length<j.highWaterMark||j.flowing&&0===j.length);){var re=j.length;if(r("maybeReadMore read 0"),J.read(0),re===j.length)break}j.readingMore=!1}function W(J){var j=J._readableState;j.readableListening=J.listenerCount("readable")>0,j.resumeScheduled&&!j.paused?j.flowing=!0:J.listenerCount("data")>0&&J.resume()}function G(J){r("readable nexttick read 0"),J.read(0)}function V(J,j){r("resume",j.reading),j.reading||J.read(0),j.resumeScheduled=!1,J.emit("resume"),H(J),j.flowing&&!j.reading&&J.read(0)}function H(J){var j=J._readableState;for(r("flow",j.flowing);j.flowing&&null!==J.read(););}function q(J,j){return 0===j.length?null:(j.objectMode?re=j.buffer.shift():!J||J>=j.length?(re=j.decoder?j.buffer.join(""):1===j.buffer.length?j.buffer.first():j.buffer.concat(j.length),j.buffer.clear()):re=j.buffer.consume(J,j.decoder),re);var re}function K(J){var j=J._readableState;r("endReadable",j.endEmitted),j.endEmitted||(j.ended=!0,_.nextTick(Y,j,J))}function Y(J,j){if(r("endReadableNT",J.endEmitted,J.length),!J.endEmitted&&0===J.length&&(J.endEmitted=!0,j.readable=!1,j.emit("end"),J.autoDestroy)){var re=j._writableState;(!re||re.autoDestroy&&re.finished)&&j.destroy()}}function te(J,j){for(var re=0,le=J.length;re<le;re++)if(J[re]===j)return re;return-1}C.prototype.read=function(J){r("read",J),J=parseInt(J,10);var j=this._readableState,re=J;if(0!==J&&(j.emittedReadable=!1),0===J&&j.needReadable&&((0!==j.highWaterMark?j.length>=j.highWaterMark:j.length>0)||j.ended))return r("read: emitReadable",j.length,j.ended),0===j.length&&j.ended?K(this):U(this),null;if(0===(J=D(J,j))&&j.ended)return 0===j.length&&K(this),null;var ge,le=j.needReadable;return r("need readable",le),(0===j.length||j.length-J<j.highWaterMark)&&r("length less than watermark",le=!0),j.ended||j.reading?r("reading or ended",le=!1):le&&(r("do read"),j.reading=!0,j.sync=!0,0===j.length&&(j.needReadable=!0),this._read(j.highWaterMark),j.sync=!1,j.reading||(J=D(re,j))),null===(ge=J>0?q(J,j):null)?(j.needReadable=j.length<=j.highWaterMark,J=0):(j.length-=J,j.awaitDrain=0),0===j.length&&(j.ended||(j.needReadable=!0),re!==J&&j.ended&&K(this)),null!==ge&&this.emit("data",ge),ge},C.prototype._read=function(J){f(this,new l("_read()"))},C.prototype.pipe=function(J,j){var re=this,le=this._readableState;switch(le.pipesCount){case 0:le.pipes=J;break;case 1:le.pipes=[le.pipes,J];break;default:le.pipes.push(J)}le.pipesCount+=1,r("pipe count=%d opts=%j",le.pipesCount,j);var pe=j&&!1===j.end||J===_.stdout||J===_.stderr?Fe:ke;function xe(Ke,Ue){r("onunpipe"),Ke===re&&Ue&&!1===Ue.hasUnpiped&&(Ue.hasUnpiped=!0,function be(){r("cleanup"),J.removeListener("close",ye),J.removeListener("finish",Ce),J.removeListener("drain",we),J.removeListener("error",De),J.removeListener("unpipe",xe),re.removeListener("end",ke),re.removeListener("end",Fe),re.removeListener("data",Le),de=!0,le.awaitDrain&&(!J._writableState||J._writableState.needDrain)&&we()}())}function ke(){r("onend"),J.end()}le.endEmitted?_.nextTick(pe):re.once("end",pe),J.on("unpipe",xe);var we=function ne(J){return function(){var re=J._readableState;r("pipeOnDrain",re.awaitDrain),re.awaitDrain&&re.awaitDrain--,0===re.awaitDrain&&e(J,"data")&&(re.flowing=!0,H(J))}}(re);J.on("drain",we);var de=!1;function Le(Ke){r("ondata");var Ue=J.write(Ke);r("dest.write",Ue),!1===Ue&&((1===le.pipesCount&&le.pipes===J||le.pipesCount>1&&-1!==te(le.pipes,J))&&!de&&(r("false write response, pause",le.awaitDrain),le.awaitDrain++),re.pause())}function De(Ke){r("onerror",Ke),Fe(),J.removeListener("error",De),0===e(J,"error")&&f(J,Ke)}function ye(){J.removeListener("finish",Ce),Fe()}function Ce(){r("onfinish"),J.removeListener("close",ye),Fe()}function Fe(){r("unpipe"),re.unpipe(J)}return re.on("data",Le),function h(J,j,re){if("function"==typeof J.prependListener)return J.prependListener(j,re);J._events&&J._events[j]?Array.isArray(J._events[j])?J._events[j].unshift(re):J._events[j]=[re,J._events[j]]:J.on(j,re)}(J,"error",De),J.once("close",ye),J.once("finish",Ce),J.emit("pipe",re),le.flowing||(r("pipe resume"),re.resume()),J},C.prototype.unpipe=function(J){var j=this._readableState,re={hasUnpiped:!1};if(0===j.pipesCount)return this;if(1===j.pipesCount)return J&&J!==j.pipes||(J||(J=j.pipes),j.pipes=null,j.pipesCount=0,j.flowing=!1,J&&J.emit("unpipe",this,re)),this;if(!J){var le=j.pipes,ge=j.pipesCount;j.pipes=null,j.pipesCount=0,j.flowing=!1;for(var pe=0;pe<ge;pe++)le[pe].emit("unpipe",this,{hasUnpiped:!1});return this}var xe=te(j.pipes,J);return-1===xe||(j.pipes.splice(xe,1),j.pipesCount-=1,1===j.pipesCount&&(j.pipes=j.pipes[0]),J.emit("unpipe",this,re)),this},C.prototype.addListener=C.prototype.on=function(J,j){var re=c.prototype.on.call(this,J,j),le=this._readableState;return"data"===J?(le.readableListening=this.listenerCount("readable")>0,!1!==le.flowing&&this.resume()):"readable"===J&&!le.endEmitted&&!le.readableListening&&(le.readableListening=le.needReadable=!0,le.flowing=!1,le.emittedReadable=!1,r("on readable",le.length,le.reading),le.length?U(this):le.reading||_.nextTick(G,this)),re},C.prototype.removeListener=function(J,j){var re=c.prototype.removeListener.call(this,J,j);return"readable"===J&&_.nextTick(W,this),re},C.prototype.removeAllListeners=function(J){var j=c.prototype.removeAllListeners.apply(this,arguments);return("readable"===J||void 0===J)&&_.nextTick(W,this),j},C.prototype.resume=function(){var J=this._readableState;return J.flowing||(r("resume"),J.flowing=!J.readableListening,function $(J,j){j.resumeScheduled||(j.resumeScheduled=!0,_.nextTick(V,J,j))}(this,J)),J.paused=!1,this},C.prototype.pause=function(){return r("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(r("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},C.prototype.wrap=function(J){var j=this,re=this._readableState,le=!1;for(var ge in J.on("end",function(){if(r("wrapped end"),re.decoder&&!re.ended){var xe=re.decoder.end();xe&&xe.length&&j.push(xe)}j.push(null)}),J.on("data",function(xe){r("wrapped data"),re.decoder&&(xe=re.decoder.write(xe)),re.objectMode&&null==xe||!(re.objectMode||xe&&xe.length)||j.push(xe)||(le=!0,J.pause())}),J)void 0===this[ge]&&"function"==typeof J[ge]&&(this[ge]=function(ke){return function(){return J[ke].apply(J,arguments)}}(ge));for(var pe=0;pe<u.length;pe++)J.on(u[pe],this.emit.bind(this,u[pe]));return this._read=function(xe){r("wrapped _read",xe),le&&(le=!1,J.resume())},this},"function"==typeof Symbol&&(C.prototype[Symbol.asyncIterator]=function(){return void 0===T&&(T=v("./internal/streams/async_iterator")),T(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(j){this._readableState&&(this._readableState.flowing=j)}}),C._fromList=q,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(C.from=function(J,j){return void 0===M&&(M=v("./internal/streams/from")),M(C,J,j)})}).call(this)}).call(this,v("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/async_iterator":292,"./internal/streams/buffer_list":293,"./internal/streams/destroy":294,"./internal/streams/from":296,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,events:84,inherits:231,"string_decoder/":300,util:83}],290:[function(v,ie,ae){"use strict";ie.exports=n;var _=v("../errors").codes,k=_.ERR_METHOD_NOT_IMPLEMENTED,m=_.ERR_MULTIPLE_CALLBACK,E=_.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=_.ERR_TRANSFORM_WITH_LENGTH_0,c=v("./_stream_duplex");function d(a,r){var g=this._transformState;g.transforming=!1;var s=g.writecb;if(null===s)return this.emit("error",new m);g.writechunk=null,g.writecb=null,null!=r&&this.push(r),s(a);var b=this._readableState;b.reading=!1,(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function n(a){if(!(this instanceof n))return new n(a);c.call(this,a),this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,a&&("function"==typeof a.transform&&(this._transform=a.transform),"function"==typeof a.flush&&(this._flush=a.flush)),this.on("prefinish",t)}function t(){var a=this;"function"!=typeof this._flush||this._readableState.destroyed?i(this,null,null):this._flush(function(r,g){i(a,r,g)})}function i(a,r,g){if(r)return a.emit("error",r);if(null!=g&&a.push(g),a._writableState.length)throw new e;if(a._transformState.transforming)throw new E;return a.push(null)}v("inherits")(n,c),n.prototype.push=function(a,r){return this._transformState.needTransform=!1,c.prototype.push.call(this,a,r)},n.prototype._transform=function(a,r,g){g(new k("_transform()"))},n.prototype._write=function(a,r,g){var s=this._transformState;if(s.writecb=g,s.writechunk=a,s.writeencoding=r,!s.transforming){var b=this._readableState;(s.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},n.prototype._read=function(a){var r=this._transformState;null===r.writechunk||r.transforming?r.needTransform=!0:(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform))},n.prototype._destroy=function(a,r){c.prototype._destroy.call(this,a,function(g){r(g)})}},{"../errors":286,"./_stream_duplex":287,inherits:231}],291:[function(v,ie,ae){(function(_,k){(function(){"use strict";function E(H){var q=this;this.next=null,this.entry=null,this.finish=function(){!function V(H,q,K){var Y=H.entry;for(H.entry=null;Y;){var te=Y.callback;q.pendingcb--,te(K),Y=Y.next}q.corkedRequestsFree.next=H}(q,H)}}var e;ie.exports=o,o.WritableState=u;var c={deprecate:v("util-deprecate")},d=v("./internal/streams/stream"),n=v("buffer").Buffer,t=k.Uint8Array||function(){};var h,r=v("./internal/streams/destroy"),s=v("./internal/streams/state").getHighWaterMark,b=v("../errors").codes,x=b.ERR_INVALID_ARG_TYPE,S=b.ERR_METHOD_NOT_IMPLEMENTED,p=b.ERR_MULTIPLE_CALLBACK,w=b.ERR_STREAM_CANNOT_PIPE,l=b.ERR_STREAM_DESTROYED,y=b.ERR_STREAM_NULL_VALUES,A=b.ERR_STREAM_WRITE_AFTER_END,T=b.ERR_UNKNOWN_ENCODING,M=r.errorOrDestroy;function f(){}function u(H,q,K){e=e||v("./_stream_duplex"),"boolean"!=typeof K&&(K=q instanceof e),this.objectMode=!!(H=H||{}).objectMode,K&&(this.objectMode=this.objectMode||!!H.writableObjectMode),this.highWaterMark=s(this,H,"writableHighWaterMark",K),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===H.decodeStrings),this.defaultEncoding=H.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(te){!function N(H,q){var K=H._writableState,Y=K.sync,te=K.writecb;if("function"!=typeof te)throw new p;if(function D(H){H.writing=!1,H.writecb=null,H.length-=H.writelen,H.writelen=0}(K),q)!function F(H,q,K,Y,te){--q.pendingcb,K?(_.nextTick(te,Y),_.nextTick(G,H,q),H._writableState.errorEmitted=!0,M(H,Y)):(te(Y),H._writableState.errorEmitted=!0,M(H,Y),G(H,q))}(H,K,Y,q,te);else{var J=se(K)||H.destroyed;!J&&!K.corked&&!K.bufferProcessing&&K.bufferedRequest&&oe(H,K),Y?_.nextTick(U,H,K,J,te):U(H,K,J,te)}}(q,te)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==H.emitClose,this.autoDestroy=!!H.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new E(this)}function o(H){var q=this instanceof(e=e||v("./_stream_duplex"));if(!q&&!h.call(o,this))return new o(H);this._writableState=new u(H,this,q),this.writable=!0,H&&("function"==typeof H.write&&(this._write=H.write),"function"==typeof H.writev&&(this._writev=H.writev),"function"==typeof H.destroy&&(this._destroy=H.destroy),"function"==typeof H.final&&(this._final=H.final)),d.call(this)}function O(H,q,K,Y,te,J){if(!K){var j=function z(H,q,K){return!H.objectMode&&!1!==H.decodeStrings&&"string"==typeof q&&(q=n.from(q,K)),q}(q,Y,te);Y!==j&&(K=!0,te="buffer",Y=j)}var re=q.objectMode?1:Y.length;q.length+=re;var le=q.length<q.highWaterMark;if(le||(q.needDrain=!0),q.writing||q.corked){var ge=q.lastBufferedRequest;q.lastBufferedRequest={chunk:Y,encoding:te,isBuf:K,callback:J,next:null},ge?ge.next=q.lastBufferedRequest:q.bufferedRequest=q.lastBufferedRequest,q.bufferedRequestCount+=1}else I(H,q,!1,re,Y,te,J);return le}function I(H,q,K,Y,te,J,j){q.writelen=Y,q.writecb=j,q.writing=!0,q.sync=!0,q.destroyed?q.onwrite(new l("write")):K?H._writev(te,q.onwrite):H._write(te,J,q.onwrite),q.sync=!1}function U(H,q,K,Y){K||function X(H,q){0===q.length&&q.needDrain&&(q.needDrain=!1,H.emit("drain"))}(H,q),q.pendingcb--,Y(),G(H,q)}function oe(H,q){q.bufferProcessing=!0;var K=q.bufferedRequest;if(H._writev&&K&&K.next){var te=new Array(q.bufferedRequestCount),J=q.corkedRequestsFree;J.entry=K;for(var j=0,re=!0;K;)te[j]=K,K.isBuf||(re=!1),K=K.next,j+=1;te.allBuffers=re,I(H,q,!0,q.length,te,"",J.finish),q.pendingcb++,q.lastBufferedRequest=null,J.next?(q.corkedRequestsFree=J.next,J.next=null):q.corkedRequestsFree=new E(q),q.bufferedRequestCount=0}else{for(;K;){var le=K.chunk;if(I(H,q,!1,q.objectMode?1:le.length,le,K.encoding,K.callback),K=K.next,q.bufferedRequestCount--,q.writing)break}null===K&&(q.lastBufferedRequest=null)}q.bufferedRequest=K,q.bufferProcessing=!1}function se(H){return H.ending&&0===H.length&&null===H.bufferedRequest&&!H.finished&&!H.writing}function ne(H,q){H._final(function(K){q.pendingcb--,K&&M(H,K),q.prefinished=!0,H.emit("prefinish"),G(H,q)})}function G(H,q){var K=se(q);if(K&&(function W(H,q){!q.prefinished&&!q.finalCalled&&("function"!=typeof H._final||q.destroyed?(q.prefinished=!0,H.emit("prefinish")):(q.pendingcb++,q.finalCalled=!0,_.nextTick(ne,H,q)))}(H,q),0===q.pendingcb&&(q.finished=!0,H.emit("finish"),q.autoDestroy))){var Y=H._readableState;(!Y||Y.autoDestroy&&Y.endEmitted)&&H.destroy()}return K}v("inherits")(o,d),u.prototype.getBuffer=function(){for(var q=this.bufferedRequest,K=[];q;)K.push(q),q=q.next;return K},function(){try{Object.defineProperty(u.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(H){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(o,Symbol.hasInstance,{value:function(q){return!!h.call(this,q)||this===o&&q&&q._writableState instanceof u}})):h=function(q){return q instanceof this},o.prototype.pipe=function(){M(this,new w)},o.prototype.write=function(H,q,K){var Y=this._writableState,te=!1,J=!Y.objectMode&&function a(H){return n.isBuffer(H)||H instanceof t}(H);return J&&!n.isBuffer(H)&&(H=function i(H){return n.from(H)}(H)),"function"==typeof q&&(K=q,q=null),J?q="buffer":q||(q=Y.defaultEncoding),"function"!=typeof K&&(K=f),Y.ending?function C(H,q){var K=new A;M(H,K),_.nextTick(q,K)}(this,K):(J||function R(H,q,K,Y){var te;return null===K?te=new y:"string"!=typeof K&&!q.objectMode&&(te=new x("chunk",["string","Buffer"],K)),!te||(M(H,te),_.nextTick(Y,te),!1)}(this,Y,H,K))&&(Y.pendingcb++,te=O(this,Y,J,H,q,K)),te},o.prototype.cork=function(){this._writableState.corked++},o.prototype.uncork=function(){var H=this._writableState;H.corked&&(H.corked--,!H.writing&&!H.corked&&!H.bufferProcessing&&H.bufferedRequest&&oe(this,H))},o.prototype.setDefaultEncoding=function(q){if("string"==typeof q&&(q=q.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((q+"").toLowerCase())>-1))throw new T(q);return this._writableState.defaultEncoding=q,this},Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),o.prototype._write=function(H,q,K){K(new S("_write()"))},o.prototype._writev=null,o.prototype.end=function(H,q,K){var Y=this._writableState;return"function"==typeof H?(K=H,H=null,q=null):"function"==typeof q&&(K=q,q=null),null!=H&&this.write(H,q),Y.corked&&(Y.corked=1,this.uncork()),Y.ending||function $(H,q,K){q.ending=!0,G(H,q),K&&(q.finished?_.nextTick(K):H.once("finish",K)),q.ended=!0,H.writable=!1}(this,Y,K),this},Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(q){!this._writableState||(this._writableState.destroyed=q)}}),o.prototype.destroy=r.destroy,o.prototype._undestroy=r.undestroy,o.prototype._destroy=function(H,q){q(H)}}).call(this)}).call(this,v("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/destroy":294,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,inherits:231,"util-deprecate":330}],292:[function(v,ie,ae){(function(_){(function(){"use strict";var k;function m(w,l,y){return l in w?Object.defineProperty(w,l,{value:y,enumerable:!0,configurable:!0,writable:!0}):w[l]=y,w}var E=v("./end-of-stream"),e=Symbol("lastResolve"),c=Symbol("lastReject"),d=Symbol("error"),n=Symbol("ended"),t=Symbol("lastPromise"),i=Symbol("handlePromise"),a=Symbol("stream");function r(w,l){return{value:w,done:l}}function g(w){var l=w[e];if(null!==l){var y=w[a].read();null!==y&&(w[t]=null,w[e]=null,w[c]=null,l(r(y,!1)))}}function s(w){_.nextTick(g,w)}var x=Object.getPrototypeOf(function(){}),S=Object.setPrototypeOf((m(k={get stream(){return this[a]},next:function(){var l=this,y=this[d];if(null!==y)return Promise.reject(y);if(this[n])return Promise.resolve(r(void 0,!0));if(this[a].destroyed)return new Promise(function(f,u){_.nextTick(function(){l[d]?u(l[d]):f(r(void 0,!0))})});var T,A=this[t];if(A)T=new Promise(function b(w,l){return function(y,A){w.then(function(){l[n]?y(r(void 0,!0)):l[i](y,A)},A)}}(A,this));else{var M=this[a].read();if(null!==M)return Promise.resolve(r(M,!1));T=new Promise(this[i])}return this[t]=T,T}},Symbol.asyncIterator,function(){return this}),m(k,"return",function(){var l=this;return new Promise(function(y,A){l[a].destroy(null,function(T){T?A(T):y(r(void 0,!0))})})}),k),x);ie.exports=function(l){var y,A=Object.create(S,(m(y={},a,{value:l,writable:!0}),m(y,e,{value:null,writable:!0}),m(y,c,{value:null,writable:!0}),m(y,d,{value:null,writable:!0}),m(y,n,{value:l._readableState.endEmitted,writable:!0}),m(y,i,{value:function(M,f){var u=A[a].read();u?(A[t]=null,A[e]=null,A[c]=null,M(r(u,!1))):(A[e]=M,A[c]=f)},writable:!0}),y));return A[t]=null,E(l,function(T){if(T&&"ERR_STREAM_PREMATURE_CLOSE"!==T.code){var M=A[c];return null!==M&&(A[t]=null,A[e]=null,A[c]=null,M(T)),void(A[d]=T)}var f=A[e];null!==f&&(A[t]=null,A[e]=null,A[c]=null,f(r(void 0,!0))),A[n]=!0}),l.on("readable",s.bind(null,A)),A}}).call(this)}).call(this,v("_process"))},{"./end-of-stream":295,_process:277}],293:[function(v,ie,ae){"use strict";function _(g,s){var b=Object.keys(g);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(g);s&&(x=x.filter(function(S){return Object.getOwnPropertyDescriptor(g,S).enumerable})),b.push.apply(b,x)}return b}function m(g,s,b){return s in g?Object.defineProperty(g,s,{value:b,enumerable:!0,configurable:!0,writable:!0}):g[s]=b,g}function e(g,s){for(var b=0;b<s.length;b++){var x=s[b];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}var n=v("buffer").Buffer,i=v("util").inspect,a=i&&i.custom||"inspect";function r(g,s,b){n.prototype.copy.call(g,s,b)}ie.exports=function(){function g(){(function E(g,s){if(!(g instanceof s))throw new TypeError("Cannot call a class as a function")})(this,g),this.head=null,this.tail=null,this.length=0}return function c(g,s,b){return s&&e(g.prototype,s),b&&e(g,b),g}(g,[{key:"push",value:function(b){var x={data:b,next:null};this.length>0?this.tail.next=x:this.head=x,this.tail=x,++this.length}},{key:"unshift",value:function(b){var x={data:b,next:this.head};0===this.length&&(this.tail=x),this.head=x,++this.length}},{key:"shift",value:function(){if(0!==this.length){var b=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,b}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(b){if(0===this.length)return"";for(var x=this.head,S=""+x.data;x=x.next;)S+=b+x.data;return S}},{key:"concat",value:function(b){if(0===this.length)return n.alloc(0);for(var x=n.allocUnsafe(b>>>0),S=this.head,p=0;S;)r(S.data,x,p),p+=S.data.length,S=S.next;return x}},{key:"consume",value:function(b,x){var S;return b<this.head.data.length?(S=this.head.data.slice(0,b),this.head.data=this.head.data.slice(b)):S=b===this.head.data.length?this.shift():x?this._getString(b):this._getBuffer(b),S}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(b){var x=this.head,S=1,p=x.data;for(b-=p.length;x=x.next;){var w=x.data,l=b>w.length?w.length:b;if(p+=l===w.length?w:w.slice(0,b),0==(b-=l)){l===w.length?(++S,this.head=x.next?x.next:this.tail=null):(this.head=x,x.data=w.slice(l));break}++S}return this.length-=S,p}},{key:"_getBuffer",value:function(b){var x=n.allocUnsafe(b),S=this.head,p=1;for(S.data.copy(x),b-=S.data.length;S=S.next;){var w=S.data,l=b>w.length?w.length:b;if(w.copy(x,x.length-b,0,l),0==(b-=l)){l===w.length?(++p,this.head=S.next?S.next:this.tail=null):(this.head=S,S.data=w.slice(l));break}++p}return this.length-=p,x}},{key:a,value:function(b,x){return i(this,function k(g){for(var s=1;s<arguments.length;s++){var b=null!=arguments[s]?arguments[s]:{};s%2?_(Object(b),!0).forEach(function(x){m(g,x,b[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(b)):_(Object(b)).forEach(function(x){Object.defineProperty(g,x,Object.getOwnPropertyDescriptor(b,x))})}return g}({},x,{depth:0,customInspect:!1}))}}]),g}()},{buffer:85,util:83}],294:[function(v,ie,ae){(function(_){(function(){"use strict";function m(n,t){c(n,t),E(n)}function E(n){n._writableState&&!n._writableState.emitClose||n._readableState&&!n._readableState.emitClose||n.emit("close")}function c(n,t){n.emit("error",t)}ie.exports={destroy:function k(n,t){var i=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(t?t(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,_.nextTick(c,this,n)):_.nextTick(c,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(g){!t&&g?i._writableState?i._writableState.errorEmitted?_.nextTick(E,i):(i._writableState.errorEmitted=!0,_.nextTick(m,i,g)):_.nextTick(m,i,g):t?(_.nextTick(E,i),t(g)):_.nextTick(E,i)}),this)},undestroy:function e(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function d(n,t){var i=n._readableState,a=n._writableState;i&&i.autoDestroy||a&&a.autoDestroy?n.destroy(t):n.emit("error",t)}}}).call(this)}).call(this,v("_process"))},{_process:277}],295:[function(v,ie,ae){"use strict";var _=v("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function m(){}ie.exports=function e(c,d,n){if("function"==typeof d)return e(c,null,d);d||(d={}),n=function k(c){var d=!1;return function(){if(!d){d=!0;for(var n=arguments.length,t=new Array(n),i=0;i<n;i++)t[i]=arguments[i];c.apply(this,t)}}}(n||m);var t=d.readable||!1!==d.readable&&c.readable,i=d.writable||!1!==d.writable&&c.writable,a=function(){c.writable||g()},r=c._writableState&&c._writableState.finished,g=function(){i=!1,r=!0,t||n.call(c)},s=c._readableState&&c._readableState.endEmitted,b=function(){t=!1,s=!0,i||n.call(c)},x=function(l){n.call(c,l)},S=function(){var l;return t&&!s?((!c._readableState||!c._readableState.ended)&&(l=new _),n.call(c,l)):i&&!r?((!c._writableState||!c._writableState.ended)&&(l=new _),n.call(c,l)):void 0},p=function(){c.req.on("finish",g)};return function E(c){return c.setHeader&&"function"==typeof c.abort}(c)?(c.on("complete",g),c.on("abort",S),c.req?p():c.on("request",p)):i&&!c._writableState&&(c.on("end",a),c.on("close",a)),c.on("end",b),c.on("finish",g),!1!==d.error&&c.on("error",x),c.on("close",S),function(){c.removeListener("complete",g),c.removeListener("abort",S),c.removeListener("request",p),c.req&&c.req.removeListener("finish",g),c.removeListener("end",a),c.removeListener("close",a),c.removeListener("finish",g),c.removeListener("end",b),c.removeListener("error",x),c.removeListener("close",S)}}},{"../../../errors":286}],296:[function(v,ie,ae){ie.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],297:[function(v,ie,ae){"use strict";var _;var m=v("../../../errors").codes,E=m.ERR_MISSING_ARGS,e=m.ERR_STREAM_DESTROYED;function c(g){if(g)throw g}function n(g,s,b,x){x=function k(g){var s=!1;return function(){s||(s=!0,g.apply(void 0,arguments))}}(x);var S=!1;g.on("close",function(){S=!0}),void 0===_&&(_=v("./end-of-stream")),_(g,{readable:s,writable:b},function(w){if(w)return x(w);S=!0,x()});var p=!1;return function(w){if(!S&&!p){if(p=!0,function d(g){return g.setHeader&&"function"==typeof g.abort}(g))return g.abort();if("function"==typeof g.destroy)return g.destroy();x(w||new e("pipe"))}}}function t(g){g()}function i(g,s){return g.pipe(s)}function a(g){return g.length&&"function"==typeof g[g.length-1]?g.pop():c}ie.exports=function r(){for(var g=arguments.length,s=new Array(g),b=0;b<g;b++)s[b]=arguments[b];var x=a(s);if(Array.isArray(s[0])&&(s=s[0]),s.length<2)throw new E("streams");var S,p=s.map(function(w,l){var y=l<s.length-1;return n(w,y,l>0,function(T){S||(S=T),T&&p.forEach(t),!y&&(p.forEach(t),x(S))})});return s.reduce(i)}},{"../../../errors":286,"./end-of-stream":295}],298:[function(v,ie,ae){"use strict";var _=v("../../../errors").codes.ERR_INVALID_OPT_VALUE;ie.exports={getHighWaterMark:function m(E,e,c,d){var n=function k(E,e,c){return null!=E.highWaterMark?E.highWaterMark:e?E[c]:null}(e,d,c);if(null!=n){if(!isFinite(n)||Math.floor(n)!==n||n<0)throw new _(d?c:"highWaterMark",n);return Math.floor(n)}return E.objectMode?16:16384}}},{"../../../errors":286}],299:[function(v,ie,ae){ie.exports=v("events").EventEmitter},{events:84}],300:[function(v,ie,ae){"use strict";var _=v("safe-buffer").Buffer,k=_.isEncoding||function(p){switch((p=""+p)&&p.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function e(p){var w;switch(this.encoding=function E(p){var w=function m(p){if(!p)return"utf8";for(var w;;)switch(p){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return p;default:if(w)return;p=(""+p).toLowerCase(),w=!0}}(p);if("string"!=typeof w&&(_.isEncoding===k||!k(p)))throw new Error("Unknown encoding: "+p);return w||p}(p),this.encoding){case"utf16le":this.text=r,this.end=g,w=4;break;case"utf8":this.fillLast=t,w=4;break;case"base64":this.text=s,this.end=b,w=3;break;default:return this.write=x,void(this.end=S)}this.lastNeed=0,this.lastTotal=0,this.lastChar=_.allocUnsafe(w)}function c(p){return p<=127?0:p>>5==6?2:p>>4==14?3:p>>3==30?4:p>>6==2?-1:-2}function t(p){var w=this.lastTotal-this.lastNeed,l=function n(p,w,l){if(128!=(192&w[0]))return p.lastNeed=0,"\ufffd";if(p.lastNeed>1&&w.length>1){if(128!=(192&w[1]))return p.lastNeed=1,"\ufffd";if(p.lastNeed>2&&w.length>2&&128!=(192&w[2]))return p.lastNeed=2,"\ufffd"}}(this,p);return void 0!==l?l:this.lastNeed<=p.length?(p.copy(this.lastChar,w,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(p.copy(this.lastChar,w,0,p.length),void(this.lastNeed-=p.length))}function r(p,w){if((p.length-w)%2==0){var l=p.toString("utf16le",w);if(l){var y=l.charCodeAt(l.length-1);if(y>=55296&&y<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1],l.slice(0,-1)}return l}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=p[p.length-1],p.toString("utf16le",w,p.length-1)}function g(p){var w=p&&p.length?this.write(p):"";return this.lastNeed?w+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):w}function s(p,w){var l=(p.length-w)%3;return 0===l?p.toString("base64",w):(this.lastNeed=3-l,this.lastTotal=3,1===l?this.lastChar[0]=p[p.length-1]:(this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1]),p.toString("base64",w,p.length-l))}function b(p){var w=p&&p.length?this.write(p):"";return this.lastNeed?w+this.lastChar.toString("base64",0,3-this.lastNeed):w}function x(p){return p.toString(this.encoding)}function S(p){return p&&p.length?this.write(p):""}ae.StringDecoder=e,e.prototype.write=function(p){if(0===p.length)return"";var w,l;if(this.lastNeed){if(void 0===(w=this.fillLast(p)))return"";l=this.lastNeed,this.lastNeed=0}else l=0;return l<p.length?w?w+this.text(p,l):this.text(p,l):w||""},e.prototype.end=function a(p){var w=p&&p.length?this.write(p):"";return this.lastNeed?w+"\ufffd":w},e.prototype.text=function i(p,w){var l=function d(p,w,l){var y=w.length-1;if(y<l)return 0;var A=c(w[y]);return A>=0?(A>0&&(p.lastNeed=A-1),A):--y<l||-2===A?0:(A=c(w[y]))>=0?(A>0&&(p.lastNeed=A-2),A):--y<l||-2===A?0:(A=c(w[y]))>=0?(A>0&&(2===A?A=0:p.lastNeed=A-3),A):0}(this,p,w);if(!this.lastNeed)return p.toString("utf8",w);this.lastTotal=l;var y=p.length-(l-this.lastNeed);return p.copy(this.lastChar,0,y),p.toString("utf8",w,y)},e.prototype.fillLast=function(p){if(this.lastNeed<=p.length)return p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,p.length),this.lastNeed-=p.length}},{"safe-buffer":284}],301:[function(v,ie,ae){(function(_,k){(function(){var m=v("assert"),E=v("debug")("stream-parser");ie.exports=function t(l){var y=l&&"function"==typeof l._transform;if(!(y||l&&"function"==typeof l._write))throw new Error("must pass a Writable or Transform stream in");E("extending Parser into stream"),l._bytes=a,l._skipBytes=r,y&&(l._passthrough=g),y?l._transform=b:l._write=s};function i(l){E("initializing parser stream"),l._parserBytesLeft=0,l._parserBuffers=[],l._parserBuffered=0,l._parserState=-1,l._parserCallback=null,"function"==typeof l.push&&(l._parserOutput=l.push.bind(l)),l._parserInit=!0}function a(l,y){m(!this._parserCallback,'there is already a "callback" set!'),m(isFinite(l)&&l>0,'can only buffer a finite number of bytes > 0, got "'+l+'"'),this._parserInit||i(this),E("buffering %o bytes",l),this._parserBytesLeft=l,this._parserCallback=y,this._parserState=0}function r(l,y){m(!this._parserCallback,'there is already a "callback" set!'),m(l>0,'can only skip > 0 bytes, got "'+l+'"'),this._parserInit||i(this),E("skipping %o bytes",l),this._parserBytesLeft=l,this._parserCallback=y,this._parserState=1}function g(l,y){m(!this._parserCallback,'There is already a "callback" set!'),m(l>0,'can only pass through > 0 bytes, got "'+l+'"'),this._parserInit||i(this),E("passing through %o bytes",l),this._parserBytesLeft=l,this._parserCallback=y,this._parserState=2}function s(l,y,A){this._parserInit||i(this),E("write(%o bytes)",l.length),"function"==typeof y&&(A=y),p(this,l,null,A)}function b(l,y,A){this._parserInit||i(this),E("transform(%o bytes)",l.length),"function"!=typeof y&&(y=this._parserOutput),p(this,l,y,A)}function S(l,y,A,T){if(l._parserBytesLeft-=y.length,E("%o bytes left for stream piece",l._parserBytesLeft),0===l._parserState?(l._parserBuffers.push(y),l._parserBuffered+=y.length):2===l._parserState&&A(y),0!==l._parserBytesLeft)return T;var M=l._parserCallback;if(M&&0===l._parserState&&l._parserBuffers.length>1&&(y=k.concat(l._parserBuffers,l._parserBuffered)),0!==l._parserState&&(y=null),l._parserCallback=null,l._parserBuffered=0,l._parserState=-1,l._parserBuffers.splice(0),M){var f=[];y&&f.push(y),A&&f.push(A);var u=M.length>f.length;u&&f.push(w(T));var h=M.apply(l,f);if(!u||T===h)return T}}var p=w(function x(l,y,A,T){return l._parserBytesLeft<=0?T(new Error("got data but not currently parsing anything")):y.length<=l._parserBytesLeft?function(){return S(l,y,A,T)}:function(){var M=y.slice(0,l._parserBytesLeft);return S(l,M,A,function(f){return f?T(f):y.length>M.length?function(){return x(l,y.slice(M.length),A,T)}:void 0})}});function w(l){return function(){for(var y=l.apply(this,arguments);"function"==typeof y;)y=y();return y}}}).call(this)}).call(this,v("_process"),v("buffer").Buffer)},{_process:277,assert:75,buffer:85,debug:302}],302:[function(v,ie,ae){(function(_){(function(){function c(){var n;try{n=ae.storage.debug}catch(t){}return!n&&void 0!==_&&"env"in _&&(n=_.env.DEBUG),n}(ae=ie.exports=v("./debug")).log=function E(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},ae.formatArgs=function m(n){var t=this.useColors;if(n[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+n[0]+(t?"%c ":" ")+"+"+ae.humanize(this.diff),t){var i="color: "+this.color;n.splice(1,0,i,"color: inherit");var a=0,r=0;n[0].replace(/%[a-zA-Z%]/g,function(g){"%%"!==g&&(a++,"%c"===g&&(r=a))}),n.splice(r,0,i)}},ae.save=function e(n){try{null==n?ae.storage.removeItem("debug"):ae.storage.debug=n}catch(t){}},ae.load=c,ae.useColors=function k(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},ae.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function d(){try{return window.localStorage}catch(n){}}(),ae.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],ae.formatters.j=function(n){try{return JSON.stringify(n)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},ae.enable(c())}).call(this)}).call(this,v("_process"))},{"./debug":303,_process:277}],303:[function(v,ie,ae){var _;function m(n){function t(){if(t.enabled){var i=t,a=+new Date;i.diff=a-(_||a),i.prev=_,i.curr=a,_=a;for(var g=new Array(arguments.length),s=0;s<g.length;s++)g[s]=arguments[s];g[0]=ae.coerce(g[0]),"string"!=typeof g[0]&&g.unshift("%O");var b=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,function(S,p){if("%%"===S)return S;b++;var w=ae.formatters[p];return"function"==typeof w&&(S=w.call(i,g[b]),g.splice(b,1),b--),S}),ae.formatArgs.call(i,g),(t.log||ae.log||console.log.bind(console)).apply(i,g)}}return t.namespace=n,t.enabled=ae.enabled(n),t.useColors=ae.useColors(),t.color=function k(n){var i,t=0;for(i in n)t=(t<<5)-t+n.charCodeAt(i),t|=0;return ae.colors[Math.abs(t)%ae.colors.length]}(n),"function"==typeof ae.init&&ae.init(t),t}(ae=ie.exports=m.debug=m.default=m).coerce=function d(n){return n instanceof Error?n.stack||n.message:n},ae.disable=function e(){ae.enable("")},ae.enable=function E(n){ae.save(n),ae.names=[],ae.skips=[];for(var t=("string"==typeof n?n:"").split(/[\s,]+/),i=t.length,a=0;a<i;a++)!t[a]||("-"===(n=t[a].replace(/\*/g,".*?"))[0]?ae.skips.push(new RegExp("^"+n.substr(1)+"$")):ae.names.push(new RegExp("^"+n+"$")))},ae.enabled=function c(n){var t,i;for(t=0,i=ae.skips.length;t<i;t++)if(ae.skips[t].test(n))return!1;for(t=0,i=ae.names.length;t<i;t++)if(ae.names[t].test(n))return!0;return!1},ae.humanize=v("ms"),ae.names=[],ae.skips=[],ae.formatters={}},{ms:304}],304:[function(v,ie,ae){var _=1e3,k=60*_,m=60*k,E=24*m;function t(i,a,r){if(!(i<a))return i<1.5*a?Math.floor(i/a)+" "+r:Math.ceil(i/a)+" "+r+"s"}ie.exports=function(i,a){a=a||{};var r=typeof i;if("string"===r&&i.length>0)return function c(i){if(!((i=String(i)).length>100)){var a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(i);if(a){var r=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return r*E;case"hours":case"hour":case"hrs":case"hr":case"h":return r*m;case"minutes":case"minute":case"mins":case"min":case"m":return r*k;case"seconds":case"second":case"secs":case"sec":case"s":return r*_;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(i);if("number"===r&&!1===isNaN(i))return a.long?function n(i){return t(i,E,"day")||t(i,m,"hour")||t(i,k,"minute")||t(i,_,"second")||i+" ms"}(i):function d(i){return i>=E?Math.round(i/E)+"d":i>=m?Math.round(i/m)+"h":i>=k?Math.round(i/k)+"m":i>=_?Math.round(i/_)+"s":i+"ms"}(i);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))}},{}],305:[function(v,ie,ae){"use strict";var _=v("parenthesis");ie.exports=function(m,E,e){if(null==m)throw Error("First argument should be a string");if(null==E)throw Error("Separator should be a string or a RegExp");e?("string"==typeof e||Array.isArray(e))&&(e={ignore:e}):e={},null==e.escape&&(e.escape=!0),null==e.ignore?e.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"]:("string"==typeof e.ignore&&(e.ignore=[e.ignore]),e.ignore=e.ignore.map(function(g){return 1===g.length&&(g+=g),g}));var c=_.parse(m,{flat:!0,brackets:e.ignore}),n=c[0].split(E);if(e.escape){for(var t=[],i=0;i<n.length;i++){var a=n[i];"\\"===a[a.length-1]&&"\\"!==a[a.length-2]?(t.push(a+E+n[i+1]),i++):t.push(a)}n=t}for(i=0;i<n.length;i++)c[0]=n[i],n[i]=_.stringify(c,{flat:!0});return n}},{parenthesis:248}],306:[function(v,ie,ae){"use strict";ie.exports=function _(k){for(var m=k.length,E=new Array(m),e=new Array(m),c=new Array(m),d=new Array(m),n=new Array(m),t=new Array(m),i=0;i<m;++i)E[i]=-1,e[i]=0,c[i]=!1,d[i]=0,n[i]=-1,t[i]=[];var b,a=0,r=[],g=[];function s(p){var w=[p],l=[p];for(E[p]=e[p]=a,c[p]=!0,a+=1;l.length>0;){var y=k[p=l[l.length-1]];if(d[p]<y.length){for(var A=d[p];A<y.length;++A){var T=y[A];if(E[T]<0){E[T]=e[T]=a,c[T]=!0,a+=1,w.push(T),l.push(T);break}c[T]&&(e[p]=0|Math.min(e[p],e[T])),n[T]>=0&&t[p].push(n[T])}d[p]=A}else{if(e[p]===E[p]){var M=[],f=[],u=0;for(A=w.length-1;A>=0;--A){var h=w[A];if(c[h]=!1,M.push(h),f.push(t[h]),u+=t[h].length,n[h]=r.length,h===p){w.length=A;break}}r.push(M);var o=new Array(u);for(A=0;A<f.length;A++)for(var C=0;C<f[A].length;C++)o[--u]=f[A][C];g.push(o)}l.pop()}}}for(i=0;i<m;++i)E[i]<0&&s(i);for(i=0;i<g.length;i++){var x=g[i];if(0!==x.length){x.sort(function(w,l){return w-l}),b=[x[0]];for(var S=1;S<x.length;S++)x[S]!==x[S-1]&&b.push(x[S]);g[i]=b}}return{components:r,adjacencyList:g}}},{}],307:[function(v,ie,ae){"use strict";Object.defineProperty(ae,"__esModule",{value:!0});var _=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function n(t,i){var a=[],r=!0,g=!1,s=void 0;try{for(var x,b=t[Symbol.iterator]();!(r=(x=b.next()).done)&&(a.push(x.value),!i||a.length!==i);r=!0);}catch(S){g=!0,s=S}finally{try{!r&&b.return&&b.return()}finally{if(g)throw s}}return a}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")},k=2*Math.PI,m=function(t,i,a,r,g,s,b){var x=t.x,S=t.y;return{x:r*(x*=i)-g*(S*=a)+s,y:g*x+r*S+b}},E=function(t,i){var a=1.5707963267948966===i?.551915024494:-1.5707963267948966===i?-.551915024494:1.3333333333333333*Math.tan(i/4),r=Math.cos(t),g=Math.sin(t),s=Math.cos(t+i),b=Math.sin(t+i);return[{x:r-g*a,y:g+r*a},{x:s+b*a,y:b-s*a},{x:s,y:b}]},e=function(t,i,a,r){var s=t*a+i*r;return s>1&&(s=1),s<-1&&(s=-1),(t*r-i*a<0?-1:1)*Math.acos(s)};ae.default=function(t){var i=t.px,a=t.py,r=t.cx,g=t.cy,s=t.rx,b=t.ry,x=t.xAxisRotation,S=void 0===x?0:x,p=t.largeArcFlag,w=void 0===p?0:p,l=t.sweepFlag,y=void 0===l?0:l,A=[];if(0===s||0===b)return[];var T=Math.sin(S*k/360),M=Math.cos(S*k/360),f=M*(i-r)/2+T*(a-g)/2,u=-T*(i-r)/2+M*(a-g)/2;if(0===f&&0===u)return[];s=Math.abs(s),b=Math.abs(b);var h=Math.pow(f,2)/Math.pow(s,2)+Math.pow(u,2)/Math.pow(b,2);h>1&&(s*=Math.sqrt(h),b*=Math.sqrt(h));var o=function(t,i,a,r,g,s,b,x,S,p,w,l){var y=Math.pow(g,2),A=Math.pow(s,2),T=Math.pow(w,2),M=Math.pow(l,2),f=y*A-y*M-A*T;f<0&&(f=0),f/=y*M+A*T;var u=(f=Math.sqrt(f)*(b===x?-1:1))*g/s*l,h=f*-s/g*w,o=p*u-S*h+(t+a)/2,C=S*u+p*h+(i+r)/2,R=(w-u)/g,z=(l-h)/s,O=(-w-u)/g,I=(-l-h)/s,F=e(1,0,R,z),D=e(R,z,O,I);return 0===x&&D>0&&(D-=k),1===x&&D<0&&(D+=k),[o,C,F,D]}(i,a,r,g,s,b,w,y,T,M,f,u),C=_(o,4),R=C[0],z=C[1],O=C[2],I=C[3],F=Math.abs(I)/(k/4);Math.abs(1-F)<1e-7&&(F=1);var D=Math.max(Math.ceil(F),1);I/=D;for(var N=0;N<D;N++)A.push(E(O,I)),O+=I;return A.map(function(U){var X=m(U[0],s,b,M,T,R,z),oe=X.x,se=X.y,ne=m(U[1],s,b,M,T,R,z),W=ne.x,G=ne.y,$=m(U[2],s,b,M,T,R,z);return{x1:oe,y1:se,x2:W,y2:G,x:$.x,y:$.y}})},ie.exports=ae.default},{}],308:[function(v,ie,ae){"use strict";var _=v("parse-svg-path"),k=v("abs-svg-path"),m=v("normalize-svg-path"),E=v("is-svg-path"),e=v("assert");ie.exports=function c(d){if(Array.isArray(d)&&1===d.length&&"string"==typeof d[0]&&(d=d[0]),"string"==typeof d&&(e(E(d),"String is not an SVG path."),d=_(d)),e(Array.isArray(d),"Argument should be a string or an array of path segments."),d=k(d),!(d=m(d)).length)return[0,0,0,0];for(var n=[1/0,1/0,-1/0,-1/0],t=0,i=d.length;t<i;t++)for(var a=d[t].slice(1),r=0;r<a.length;r+=2)a[r+0]<n[0]&&(n[0]=a[r+0]),a[r+1]<n[1]&&(n[1]=a[r+1]),a[r+0]>n[2]&&(n[2]=a[r+0]),a[r+1]>n[3]&&(n[3]=a[r+1]);return n}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":309,"parse-svg-path":250}],309:[function(v,ie,ae){"use strict";ie.exports=function k(e){for(var c,d=[],n=0,t=0,i=0,a=0,r=null,g=null,s=0,b=0,x=0,S=e.length;x<S;x++){var p=e[x],w=p[0];switch(w){case"M":i=p[1],a=p[2];break;case"A":var l=_({px:s,py:b,cx:p[6],cy:p[7],rx:p[1],ry:p[2],xAxisRotation:p[3],largeArcFlag:p[4],sweepFlag:p[5]});if(!l.length)continue;for(var A,y=0;y<l.length;y++)p=["C",(A=l[y]).x1,A.y1,A.x2,A.y2,A.x,A.y],y<l.length-1&&d.push(p);break;case"S":var T=s,M=b;("C"==c||"S"==c)&&(T+=T-n,M+=M-t),p=["C",T,M,p[1],p[2],p[3],p[4]];break;case"T":"Q"==c||"T"==c?(r=2*s-r,g=2*b-g):(r=s,g=b),p=E(s,b,r,g,p[1],p[2]);break;case"Q":r=p[1],g=p[2],p=E(s,b,p[1],p[2],p[3],p[4]);break;case"L":p=m(s,b,p[1],p[2]);break;case"H":p=m(s,b,p[1],b);break;case"V":p=m(s,b,s,p[1]);break;case"Z":p=m(s,b,i,a)}c=w,s=p[p.length-2],b=p[p.length-1],p.length>4?(n=p[p.length-4],t=p[p.length-3]):(n=s,t=b),d.push(p)}return d};var _=v("svg-arc-to-cubic-bezier");function m(e,c,d,n){return["C",e,c,d,n,d,n]}function E(e,c,d,n,t,i){return["C",e/3+2/3*d,c/3+2/3*n,t/3+2/3*d,i/3+2/3*n,t,i]}},{"svg-arc-to-cubic-bezier":307}],310:[function(v,ie,ae){"use strict";var t,_=v("svg-path-bounds"),k=v("parse-svg-path"),m=v("draw-svg-path"),E=v("is-svg-path"),e=v("bitmap-sdf"),c=document.createElement("canvas"),d=c.getContext("2d");ie.exports=function n(a,r){if(!E(a))throw Error("Argument should be valid svg path string");var g,s;r||(r={}),r.shape?(g=r.shape[0],s=r.shape[1]):(g=c.width=r.w||r.width||200,s=c.height=r.h||r.height||200);var b=Math.min(g,s),x=r.stroke||0,S=r.viewbox||r.viewBox||_(a),p=[g/(S[2]-S[0]),s/(S[3]-S[1])],w=Math.min(p[0]||0,p[1]||0)/2;if(d.fillStyle="black",d.fillRect(0,0,g,s),d.fillStyle="white",x&&("number"!=typeof x&&(x=1),d.strokeStyle=x>0?"white":"black",d.lineWidth=Math.abs(x)),d.translate(.5*g,.5*s),d.scale(w,w),function i(){if(null!=t)return t;var a=document.createElement("canvas").getContext("2d");if(a.canvas.width=a.canvas.height=1,!window.Path2D)return t=!1;var r=new Path2D("M0,0h1v1h-1v-1Z");a.fillStyle="black",a.fill(r);var g=a.getImageData(0,0,1,1);return t=g&&g.data&&255===g.data[3]}()){var l=new Path2D(a);d.fill(l),x&&d.stroke(l)}else{var y=k(a);m(d,y),d.fill(),x&&d.stroke()}return d.setTransform(1,0,0,1,0,0),e(d,{cutoff:null!=r.cutoff?r.cutoff:.5,radius:null!=r.radius?r.radius:.5*b})}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":308}],311:[function(v,ie,ae){(function(_,k){(function(){var m=v("process/browser.js").nextTick,E=Function.prototype.apply,e=Array.prototype.slice,c={},d=0;function n(t,i){this._id=t,this._clearFn=i}ae.setTimeout=function(){return new n(E.call(setTimeout,window,arguments),clearTimeout)},ae.setInterval=function(){return new n(E.call(setInterval,window,arguments),clearInterval)},ae.clearTimeout=ae.clearInterval=function(t){t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},ae.enroll=function(t,i){clearTimeout(t._idleTimeoutId),t._idleTimeout=i},ae.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},ae._unrefActive=ae.active=function(t){clearTimeout(t._idleTimeoutId);var i=t._idleTimeout;i>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},i))},ae.setImmediate="function"==typeof _?_:function(t){var i=d++,a=!(arguments.length<2)&&e.call(arguments,1);return c[i]=!0,m(function(){c[i]&&(a?t.apply(null,a):t.call(null),ae.clearImmediate(i))}),i},ae.clearImmediate="function"==typeof k?k:function(t){delete c[t]}}).call(this)}).call(this,v("timers").setImmediate,v("timers").clearImmediate)},{"process/browser.js":277,timers:311}],312:[function(v,ie,ae){!function(_){var k=/^\s+/,m=/\s+$/,E=0,e=_.round,c=_.min,d=_.max,n=_.random;function t(Y,te){if(te=te||{},(Y=Y||"")instanceof t)return Y;if(!(this instanceof t))return new t(Y,te);var J=function i(Y){var te={r:0,g:0,b:0},J=1,j=null,re=null,le=null,ge=!1,pe=!1;return"string"==typeof Y&&(Y=function q(Y){Y=Y.replace(k,"").replace(m,"").toLowerCase();var J,te=!1;if(O[Y])Y=O[Y],te=!0;else if("transparent"==Y)return{r:0,g:0,b:0,a:0,format:"name"};return(J=V.rgb.exec(Y))?{r:J[1],g:J[2],b:J[3]}:(J=V.rgba.exec(Y))?{r:J[1],g:J[2],b:J[3],a:J[4]}:(J=V.hsl.exec(Y))?{h:J[1],s:J[2],l:J[3]}:(J=V.hsla.exec(Y))?{h:J[1],s:J[2],l:J[3],a:J[4]}:(J=V.hsv.exec(Y))?{h:J[1],s:J[2],v:J[3]}:(J=V.hsva.exec(Y))?{h:J[1],s:J[2],v:J[3],a:J[4]}:(J=V.hex8.exec(Y))?{r:X(J[1]),g:X(J[2]),b:X(J[3]),a:$(J[4]),format:te?"name":"hex8"}:(J=V.hex6.exec(Y))?{r:X(J[1]),g:X(J[2]),b:X(J[3]),format:te?"name":"hex"}:(J=V.hex4.exec(Y))?{r:X(J[1]+""+J[1]),g:X(J[2]+""+J[2]),b:X(J[3]+""+J[3]),a:$(J[4]+""+J[4]),format:te?"name":"hex8"}:!!(J=V.hex3.exec(Y))&&{r:X(J[1]+""+J[1]),g:X(J[2]+""+J[2]),b:X(J[3]+""+J[3]),format:te?"name":"hex"}}(Y)),"object"==typeof Y&&(H(Y.r)&&H(Y.g)&&H(Y.b)?(te=function a(Y,te,J){return{r:255*N(Y,255),g:255*N(te,255),b:255*N(J,255)}}(Y.r,Y.g,Y.b),ge=!0,pe="%"===String(Y.r).substr(-1)?"prgb":"rgb"):H(Y.h)&&H(Y.s)&&H(Y.v)?(j=W(Y.s),re=W(Y.v),te=function b(Y,te,J){Y=6*N(Y,360),te=N(te,100),J=N(J,100);var j=_.floor(Y),re=Y-j,le=J*(1-te),ge=J*(1-re*te),pe=J*(1-(1-re)*te),xe=j%6;return{r:255*[J,ge,le,le,pe,J][xe],g:255*[pe,J,J,ge,le,le][xe],b:255*[le,le,pe,J,J,ge][xe]}}(Y.h,j,re),ge=!0,pe="hsv"):H(Y.h)&&H(Y.s)&&H(Y.l)&&(j=W(Y.s),le=W(Y.l),te=function g(Y,te,J){var j,re,le;function ge(ke,we,de){return de<0&&(de+=1),de>1&&(de-=1),de<1/6?ke+6*(we-ke)*de:de<.5?we:de<2/3?ke+(we-ke)*(2/3-de)*6:ke}if(Y=N(Y,360),te=N(te,100),J=N(J,100),0===te)j=re=le=J;else{var pe=J<.5?J*(1+te):J+te-J*te,xe=2*J-pe;j=ge(xe,pe,Y+1/3),re=ge(xe,pe,Y),le=ge(xe,pe,Y-1/3)}return{r:255*j,g:255*re,b:255*le}}(Y.h,j,le),ge=!0,pe="hsl"),Y.hasOwnProperty("a")&&(J=Y.a)),J=D(J),{ok:ge,format:Y.format||pe,r:c(255,d(te.r,0)),g:c(255,d(te.g,0)),b:c(255,d(te.b,0)),a:J}}(Y);this._originalInput=Y,this._r=J.r,this._g=J.g,this._b=J.b,this._a=J.a,this._roundA=e(100*this._a)/100,this._format=te.format||J.format,this._gradientType=te.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=J.ok,this._tc_id=E++}function r(Y,te,J){Y=N(Y,255),te=N(te,255),J=N(J,255);var le,ge,j=d(Y,te,J),re=c(Y,te,J),pe=(j+re)/2;if(j==re)le=ge=0;else{var xe=j-re;switch(ge=pe>.5?xe/(2-j-re):xe/(j+re),j){case Y:le=(te-J)/xe+(te<J?6:0);break;case te:le=(J-Y)/xe+2;break;case J:le=(Y-te)/xe+4}le/=6}return{h:le,s:ge,l:pe}}function s(Y,te,J){Y=N(Y,255),te=N(te,255),J=N(J,255);var le,ge,j=d(Y,te,J),re=c(Y,te,J),pe=j,xe=j-re;if(ge=0===j?0:xe/j,j==re)le=0;else{switch(j){case Y:le=(te-J)/xe+(te<J?6:0);break;case te:le=(J-Y)/xe+2;break;case J:le=(Y-te)/xe+4}le/=6}return{h:le,s:ge,v:pe}}function x(Y,te,J,j){var re=[ne(e(Y).toString(16)),ne(e(te).toString(16)),ne(e(J).toString(16))];return j&&re[0].charAt(0)==re[0].charAt(1)&&re[1].charAt(0)==re[1].charAt(1)&&re[2].charAt(0)==re[2].charAt(1)?re[0].charAt(0)+re[1].charAt(0)+re[2].charAt(0):re.join("")}function p(Y,te,J,j){return[ne(G(j)),ne(e(Y).toString(16)),ne(e(te).toString(16)),ne(e(J).toString(16))].join("")}function w(Y,te){te=0===te?0:te||10;var J=t(Y).toHsl();return J.s-=te/100,J.s=U(J.s),t(J)}function l(Y,te){te=0===te?0:te||10;var J=t(Y).toHsl();return J.s+=te/100,J.s=U(J.s),t(J)}function y(Y){return t(Y).desaturate(100)}function A(Y,te){te=0===te?0:te||10;var J=t(Y).toHsl();return J.l+=te/100,J.l=U(J.l),t(J)}function T(Y,te){te=0===te?0:te||10;var J=t(Y).toRgb();return J.r=d(0,c(255,J.r-e(-te/100*255))),J.g=d(0,c(255,J.g-e(-te/100*255))),J.b=d(0,c(255,J.b-e(-te/100*255))),t(J)}function M(Y,te){te=0===te?0:te||10;var J=t(Y).toHsl();return J.l-=te/100,J.l=U(J.l),t(J)}function f(Y,te){var J=t(Y).toHsl(),j=(J.h+te)%360;return J.h=j<0?360+j:j,t(J)}function u(Y){var te=t(Y).toHsl();return te.h=(te.h+180)%360,t(te)}function h(Y){var te=t(Y).toHsl(),J=te.h;return[t(Y),t({h:(J+120)%360,s:te.s,l:te.l}),t({h:(J+240)%360,s:te.s,l:te.l})]}function o(Y){var te=t(Y).toHsl(),J=te.h;return[t(Y),t({h:(J+90)%360,s:te.s,l:te.l}),t({h:(J+180)%360,s:te.s,l:te.l}),t({h:(J+270)%360,s:te.s,l:te.l})]}function C(Y){var te=t(Y).toHsl(),J=te.h;return[t(Y),t({h:(J+72)%360,s:te.s,l:te.l}),t({h:(J+216)%360,s:te.s,l:te.l})]}function R(Y,te,J){te=te||6,J=J||30;var j=t(Y).toHsl(),re=360/J,le=[t(Y)];for(j.h=(j.h-(re*te>>1)+720)%360;--te;)j.h=(j.h+re)%360,le.push(t(j));return le}function z(Y,te){te=te||6;for(var J=t(Y).toHsv(),j=J.h,re=J.s,le=J.v,ge=[],pe=1/te;te--;)ge.push(t({h:j,s:re,v:le})),le=(le+pe)%1;return ge}t.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Y=this.toRgb();return(299*Y.r+587*Y.g+114*Y.b)/1e3},getLuminance:function(){var te,J,j,Y=this.toRgb();return J=Y.g/255,j=Y.b/255,.2126*((te=Y.r/255)<=.03928?te/12.92:_.pow((te+.055)/1.055,2.4))+.7152*(J<=.03928?J/12.92:_.pow((J+.055)/1.055,2.4))+.0722*(j<=.03928?j/12.92:_.pow((j+.055)/1.055,2.4))},setAlpha:function(Y){return this._a=D(Y),this._roundA=e(100*this._a)/100,this},toHsv:function(){var Y=s(this._r,this._g,this._b);return{h:360*Y.h,s:Y.s,v:Y.v,a:this._a}},toHsvString:function(){var Y=s(this._r,this._g,this._b),te=e(360*Y.h),J=e(100*Y.s),j=e(100*Y.v);return 1==this._a?"hsv("+te+", "+J+"%, "+j+"%)":"hsva("+te+", "+J+"%, "+j+"%, "+this._roundA+")"},toHsl:function(){var Y=r(this._r,this._g,this._b);return{h:360*Y.h,s:Y.s,l:Y.l,a:this._a}},toHslString:function(){var Y=r(this._r,this._g,this._b),te=e(360*Y.h),J=e(100*Y.s),j=e(100*Y.l);return 1==this._a?"hsl("+te+", "+J+"%, "+j+"%)":"hsla("+te+", "+J+"%, "+j+"%, "+this._roundA+")"},toHex:function(Y){return x(this._r,this._g,this._b,Y)},toHexString:function(Y){return"#"+this.toHex(Y)},toHex8:function(Y){return function S(Y,te,J,j,re){var le=[ne(e(Y).toString(16)),ne(e(te).toString(16)),ne(e(J).toString(16)),ne(G(j))];return re&&le[0].charAt(0)==le[0].charAt(1)&&le[1].charAt(0)==le[1].charAt(1)&&le[2].charAt(0)==le[2].charAt(1)&&le[3].charAt(0)==le[3].charAt(1)?le[0].charAt(0)+le[1].charAt(0)+le[2].charAt(0)+le[3].charAt(0):le.join("")}(this._r,this._g,this._b,this._a,Y)},toHex8String:function(Y){return"#"+this.toHex8(Y)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(100*N(this._r,255))+"%",g:e(100*N(this._g,255))+"%",b:e(100*N(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+e(100*N(this._r,255))+"%, "+e(100*N(this._g,255))+"%, "+e(100*N(this._b,255))+"%)":"rgba("+e(100*N(this._r,255))+"%, "+e(100*N(this._g,255))+"%, "+e(100*N(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(I[x(this._r,this._g,this._b,!0)]||!1)},toFilter:function(Y){var te="#"+p(this._r,this._g,this._b,this._a),J=te,j=this._gradientType?"GradientType = 1, ":"";if(Y){var re=t(Y);J="#"+p(re._r,re._g,re._b,re._a)}return"progid:DXImageTransform.Microsoft.gradient("+j+"startColorstr="+te+",endColorstr="+J+")"},toString:function(Y){var te=!!Y;Y=Y||this._format;var J=!1;return!te&&this._a<1&&this._a>=0&&("hex"===Y||"hex6"===Y||"hex3"===Y||"hex4"===Y||"hex8"===Y||"name"===Y)?"name"===Y&&0===this._a?this.toName():this.toRgbString():("rgb"===Y&&(J=this.toRgbString()),"prgb"===Y&&(J=this.toPercentageRgbString()),("hex"===Y||"hex6"===Y)&&(J=this.toHexString()),"hex3"===Y&&(J=this.toHexString(!0)),"hex4"===Y&&(J=this.toHex8String(!0)),"hex8"===Y&&(J=this.toHex8String()),"name"===Y&&(J=this.toName()),"hsl"===Y&&(J=this.toHslString()),"hsv"===Y&&(J=this.toHsvString()),J||this.toHexString())},clone:function(){return t(this.toString())},_applyModification:function(Y,te){var J=Y.apply(null,[this].concat([].slice.call(te)));return this._r=J._r,this._g=J._g,this._b=J._b,this.setAlpha(J._a),this},lighten:function(){return this._applyModification(A,arguments)},brighten:function(){return this._applyModification(T,arguments)},darken:function(){return this._applyModification(M,arguments)},desaturate:function(){return this._applyModification(w,arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(y,arguments)},spin:function(){return this._applyModification(f,arguments)},_applyCombination:function(Y,te){return Y.apply(null,[this].concat([].slice.call(te)))},analogous:function(){return this._applyCombination(R,arguments)},complement:function(){return this._applyCombination(u,arguments)},monochromatic:function(){return this._applyCombination(z,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(h,arguments)},tetrad:function(){return this._applyCombination(o,arguments)}},t.fromRatio=function(Y,te){if("object"==typeof Y){var J={};for(var j in Y)Y.hasOwnProperty(j)&&(J[j]="a"===j?Y[j]:W(Y[j]));Y=J}return t(Y,te)},t.equals=function(Y,te){return!(!Y||!te)&&t(Y).toRgbString()==t(te).toRgbString()},t.random=function(){return t.fromRatio({r:n(),g:n(),b:n()})},t.mix=function(Y,te,J){J=0===J?0:J||50;var j=t(Y).toRgb(),re=t(te).toRgb(),le=J/100;return t({r:(re.r-j.r)*le+j.r,g:(re.g-j.g)*le+j.g,b:(re.b-j.b)*le+j.b,a:(re.a-j.a)*le+j.a})},t.readability=function(Y,te){var J=t(Y),j=t(te);return(_.max(J.getLuminance(),j.getLuminance())+.05)/(_.min(J.getLuminance(),j.getLuminance())+.05)},t.isReadable=function(Y,te,J){var re,le,j=t.readability(Y,te);switch(le=!1,(re=function K(Y){var te,J;return"AA"!==(te=((Y=Y||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==te&&(te="AA"),"small"!==(J=(Y.size||"small").toLowerCase())&&"large"!==J&&(J="small"),{level:te,size:J}}(J)).level+re.size){case"AAsmall":case"AAAlarge":le=j>=4.5;break;case"AAlarge":le=j>=3;break;case"AAAsmall":le=j>=7}return le},t.mostReadable=function(Y,te,J){var le,ge,pe,xe,j=null,re=0;ge=(J=J||{}).includeFallbackColors,pe=J.level,xe=J.size;for(var ke=0;ke<te.length;ke++)(le=t.readability(Y,te[ke]))>re&&(re=le,j=t(te[ke]));return t.isReadable(Y,j,{level:pe,size:xe})||!ge?j:(J.includeFallbackColors=!1,t.mostReadable(Y,["#fff","#000"],J))};var O=t.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},I=t.hexNames=function F(Y){var te={};for(var J in Y)Y.hasOwnProperty(J)&&(te[Y[J]]=J);return te}(O);function D(Y){return Y=parseFloat(Y),(isNaN(Y)||Y<0||Y>1)&&(Y=1),Y}function N(Y,te){(function oe(Y){return"string"==typeof Y&&-1!=Y.indexOf(".")&&1===parseFloat(Y)})(Y)&&(Y="100%");var J=function se(Y){return"string"==typeof Y&&-1!=Y.indexOf("%")}(Y);return Y=c(te,d(0,parseFloat(Y))),J&&(Y=parseInt(Y*te,10)/100),_.abs(Y-te)<1e-6?1:Y%te/parseFloat(te)}function U(Y){return c(1,d(0,Y))}function X(Y){return parseInt(Y,16)}function ne(Y){return 1==Y.length?"0"+Y:""+Y}function W(Y){return Y<=1&&(Y=100*Y+"%"),Y}function G(Y){return _.round(255*parseFloat(Y)).toString(16)}function $(Y){return X(Y)/255}var J,j,re,V=(j="[\\s|\\(]+("+(J="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+J+")[,|\\s]+("+J+")\\s*\\)?",re="[\\s|\\(]+("+J+")[,|\\s]+("+J+")[,|\\s]+("+J+")[,|\\s]+("+J+")\\s*\\)?",{CSS_UNIT:new RegExp(J),rgb:new RegExp("rgb"+j),rgba:new RegExp("rgba"+re),hsl:new RegExp("hsl"+j),hsla:new RegExp("hsla"+re),hsv:new RegExp("hsv"+j),hsva:new RegExp("hsva"+re),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function H(Y){return!!V.CSS_UNIT.exec(Y)}void 0!==ie&&ie.exports?ie.exports=t:window.tinycolor=t}(Math)},{}],313:[function(v,ie,ae){"use strict";ie.exports=m,ie.exports.float32=ie.exports.float=m,ie.exports.fract32=ie.exports.fract=function k(E,e){if(E.length){if(E instanceof Float32Array)return new Float32Array(E.length);e instanceof Float32Array||(e=m(E));for(var c=0,d=e.length;c<d;c++)e[c]=E[c]-e[c];return e}return m(E-m(E))};var _=new Float32Array(1);function m(E){return E.length?E instanceof Float32Array?E:new Float32Array(E):(_[0]=E,_[0])}},{}],314:[function(v,ie,ae){"use strict";var _=v("parse-unit");ie.exports=e;function m(c,d){var n=_(getComputedStyle(c).getPropertyValue(d));return n[0]*e(n[1],c)}function e(c,d){switch(d=d||document.body,c=(c||"px").trim().toLowerCase(),(d===window||d===document)&&(d=document.body),c){case"%":return d.clientHeight/100;case"ch":case"ex":return function E(c,d){var n=document.createElement("div");n.style["font-size"]="128"+c,d.appendChild(n);var t=m(n,"font-size")/128;return d.removeChild(n),t}(c,d);case"em":return m(d,"font-size");case"rem":return m(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}},{"parse-unit":251}],315:[function(v,ie,ae){var _,k;_=this,k=function(_){"use strict";function k(l){return l}function m(l){if(null==l)return k;var y,A,T=l.scale[0],M=l.scale[1],f=l.translate[0],u=l.translate[1];return function(h,o){o||(y=A=0);var C=2,R=h.length,z=new Array(R);for(z[0]=(y+=h[0])*T+f,z[1]=(A+=h[1])*M+u;C<R;)z[C]=h[C],++C;return z}}function E(l){var A,y=m(l.transform),T=1/0,M=T,f=-T,u=-T;function h(C){(C=y(C))[0]<T&&(T=C[0]),C[0]>f&&(f=C[0]),C[1]<M&&(M=C[1]),C[1]>u&&(u=C[1])}function o(C){switch(C.type){case"GeometryCollection":C.geometries.forEach(o);break;case"Point":h(C.coordinates);break;case"MultiPoint":C.coordinates.forEach(h)}}for(A in l.arcs.forEach(function(C){for(var O,R=-1,z=C.length;++R<z;)(O=y(C[R],R))[0]<T&&(T=O[0]),O[0]>f&&(f=O[0]),O[1]<M&&(M=O[1]),O[1]>u&&(u=O[1])}),l.objects)o(l.objects[A]);return[T,M,f,u]}function d(l,y){var A=y.id,T=y.bbox,M=null==y.properties?{}:y.properties,f=n(l,y);return null==A&&null==T?{type:"Feature",properties:M,geometry:f}:null==T?{type:"Feature",id:A,properties:M,geometry:f}:{type:"Feature",id:A,bbox:T,properties:M,geometry:f}}function n(l,y){var A=m(l.transform),T=l.arcs;function M(R,z){z.length&&z.pop();for(var O=T[R<0?~R:R],I=0,F=O.length;I<F;++I)z.push(A(O[I],I));R<0&&function e(l,y){for(var A,T=l.length,M=T-y;M<--T;)A=l[M],l[M++]=l[T],l[T]=A}(z,F)}function f(R){return A(R)}function u(R){for(var z=[],O=0,I=R.length;O<I;++O)M(R[O],z);return z.length<2&&z.push(z[0]),z}function h(R){for(var z=u(R);z.length<4;)z.push(z[0]);return z}function o(R){return R.map(h)}return function C(R){var O,z=R.type;switch(z){case"GeometryCollection":return{type:z,geometries:R.geometries.map(C)};case"Point":O=f(R.coordinates);break;case"MultiPoint":O=R.coordinates.map(f);break;case"LineString":O=u(R.arcs);break;case"MultiLineString":O=R.arcs.map(u);break;case"Polygon":O=o(R.arcs);break;case"MultiPolygon":O=R.arcs.map(o);break;default:return null}return{type:z,coordinates:O}}(y)}function t(l,y){var A={},T={},M={},f=[],u=-1;function o(C,R){for(var z in C){var O=C[z];delete R[O.start],delete O.start,delete O.end,O.forEach(function(I){A[I<0?~I:I]=1}),f.push(O)}}return y.forEach(function(C,R){var O,z=l.arcs[C<0?~C:C];z.length<3&&!z[1][0]&&!z[1][1]&&(O=y[++u],y[u]=C,y[R]=O)}),y.forEach(function(C){var I,F,R=function h(C){var O,R=l.arcs[C<0?~C:C],z=R[0];return l.transform?(O=[0,0],R.forEach(function(I){O[0]+=I[0],O[1]+=I[1]})):O=R[R.length-1],C<0?[O,z]:[z,O]}(C),z=R[0],O=R[1];if(I=M[z])if(delete M[I.end],I.push(C),I.end=O,F=T[O]){delete T[F.start];var D=F===I?I:I.concat(F);T[D.start=I.start]=M[D.end=F.end]=D}else T[I.start]=M[I.end]=I;else if(I=T[O])if(delete T[I.start],I.unshift(C),I.start=z,F=M[z]){delete M[F.end];var N=F===I?I:F.concat(I);T[N.start=F.start]=M[N.end=I.end]=N}else T[I.start]=M[I.end]=I;else T[(I=[C]).start=z]=M[I.end=O]=I}),o(M,T),o(T,M),y.forEach(function(C){A[C<0?~C:C]||f.push([C])}),f}function a(l,y,A){var T,M,f;if(arguments.length>1)T=r(0,y,A);else for(M=0,T=new Array(f=l.arcs.length);M<f;++M)T[M]=M;return{type:"MultiLineString",arcs:t(l,T)}}function r(l,y,A){var f,T=[],M=[];function u(z){var O=z<0?~z:z;(M[O]||(M[O]=[])).push({i:z,g:f})}function h(z){z.forEach(u)}function o(z){z.forEach(h)}return function R(z){switch(f=z,z.type){case"GeometryCollection":z.geometries.forEach(R);break;case"LineString":h(z.arcs);break;case"MultiLineString":case"Polygon":o(z.arcs);break;case"MultiPolygon":!function C(z){z.forEach(o)}(z.arcs)}}(y),M.forEach(null==A?function(z){T.push(z[0].i)}:function(z){A(z[0].g,z[z.length-1].g)&&T.push(z[0].i)}),T}function b(l,y){var A={},T=[],M=[];function u(o){o.forEach(function(C){C.forEach(function(R){(A[R=R<0?~R:R]||(A[R]=[])).push(o)})}),T.push(o)}function h(o){return function g(l){for(var T,y=-1,A=l.length,M=l[A-1],f=0;++y<A;)f+=(T=M)[0]*(M=l[y])[1]-T[1]*M[0];return Math.abs(f)}(n(l,{type:"Polygon",arcs:[o]}).coordinates[0])}return y.forEach(function f(o){switch(o.type){case"GeometryCollection":o.geometries.forEach(f);break;case"Polygon":u(o.arcs);break;case"MultiPolygon":o.arcs.forEach(u)}}),T.forEach(function(o){if(!o._){var C=[],R=[o];for(o._=1,M.push(C);o=R.pop();)C.push(o),o.forEach(function(z){z.forEach(function(O){A[O<0?~O:O].forEach(function(I){I._||(I._=1,R.push(I))})})})}}),T.forEach(function(o){delete o._}),{type:"MultiPolygon",arcs:M.map(function(o){var R,C=[];if(o.forEach(function(D){D.forEach(function(N){N.forEach(function(U){A[U<0?~U:U].length<2&&C.push(U)})})}),(R=(C=t(l,C)).length)>1)for(var I,F,z=1,O=h(C[0]);z<R;++z)(I=h(C[z]))>O&&(F=C[0],C[0]=C[z],C[z]=F,O=I);return C}).filter(function(o){return o.length>0})}}function x(l,y){for(var A=0,T=l.length;A<T;){var M=A+T>>>1;l[M]<y?A=M+1:T=M}return A}function p(l){if(null==l)return k;var y,A,T=l.scale[0],M=l.scale[1],f=l.translate[0],u=l.translate[1];return function(h,o){o||(y=A=0);var C=2,R=h.length,z=new Array(R),O=Math.round((h[0]-f)/T),I=Math.round((h[1]-u)/M);for(z[0]=O-y,y=O,z[1]=I-A,A=I;C<R;)z[C]=h[C],++C;return z}}_.bbox=E,_.feature=function c(l,y){return"string"==typeof y&&(y=l.objects[y]),"GeometryCollection"===y.type?{type:"FeatureCollection",features:y.geometries.map(function(A){return d(l,A)})}:d(l,y)},_.merge=function s(l){return n(l,b.apply(this,arguments))},_.mergeArcs=b,_.mesh=function i(l){return n(l,a.apply(this,arguments))},_.meshArcs=a,_.neighbors=function S(l){var y={},A=l.map(function(){return[]});function T(D,N){D.forEach(function(U){U<0&&(U=~U);var X=y[U];X?X.push(N):y[U]=[N]})}function M(D,N){D.forEach(function(U){T(U,N)})}var u={LineString:T,MultiLineString:M,Polygon:M,MultiPolygon:function(D,N){D.forEach(function(U){M(U,N)})}};for(var h in l.forEach(function f(D,N){"GeometryCollection"===D.type?D.geometries.forEach(function(U){f(U,N)}):D.type in u&&u[D.type](D.arcs,N)}),y)for(var o=y[h],C=o.length,R=0;R<C;++R)for(var z=R+1;z<C;++z){var F,O=o[R],I=o[z];(F=A[O])[h=x(F,I)]!==I&&F.splice(h,0,I),(F=A[I])[h=x(F,O)]!==O&&F.splice(h,0,O)}return A},_.quantize=function w(l,y){if(l.transform)throw new Error("already quantized");if(y&&y.scale)o=l.bbox;else{if(!((u=Math.floor(y))>=2))throw new Error("n must be \u22652");var u,A=(o=l.bbox||E(l))[0],T=o[1],M=o[2],f=o[3];y={scale:[M-A?(M-A)/(u-1):1,f-T?(f-T)/(u-1):1],translate:[A,T]}}var o,C,h=p(y),R=l.objects,z={};function O(D){return h(D)}function I(D){var N;switch(D.type){case"GeometryCollection":N={type:"GeometryCollection",geometries:D.geometries.map(I)};break;case"Point":N={type:"Point",coordinates:O(D.coordinates)};break;case"MultiPoint":N={type:"MultiPoint",coordinates:D.coordinates.map(O)};break;default:return D}return null!=D.id&&(N.id=D.id),null!=D.bbox&&(N.bbox=D.bbox),null!=D.properties&&(N.properties=D.properties),N}for(C in R)z[C]=I(R[C]);return{type:"Topology",bbox:o,transform:y,objects:z,arcs:l.arcs.map(function F(D){var oe,N=0,U=1,X=D.length,se=new Array(X);for(se[0]=h(D[0],0);++N<X;)((oe=h(D[N],N))[0]||oe[1])&&(se[U++]=oe);return 1===U&&(se[U++]=[0,0]),se.length=U,se})}},_.transform=m,_.untransform=p,Object.defineProperty(_,"__esModule",{value:!0})},k("object"==typeof ae&&void 0!==ie?ae:(_=_||self).topojson=_.topojson||{})},{}],316:[function(v,ie,ae){"use strict";var _=v("../prototype/is");ie.exports=function(k){if("function"!=typeof k||!hasOwnProperty.call(k,"length"))return!1;try{if("number"!=typeof k.length||"function"!=typeof k.call||"function"!=typeof k.apply)return!1}catch(m){return!1}return!_(k)}},{"../prototype/is":323}],317:[function(v,ie,ae){"use strict";var _=v("../value/is"),k=v("../object/is"),m=v("../string/coerce"),E=v("./to-short-string"),e=function(c,d){return c.replace("%v",E(d))};ie.exports=function(c,d,n){if(!k(n))throw new TypeError(e(d,c));if(!_(c)){if("default"in n)return n.default;if(n.isOptional)return null}var t=m(n.errorMessage);throw _(t)||(t=d),new TypeError(e(t,c))}},{"../object/is":320,"../string/coerce":324,"../value/is":326,"./to-short-string":319}],318:[function(v,ie,ae){"use strict";ie.exports=function(_){try{return _.toString()}catch(k){try{return String(_)}catch(m){return null}}}},{}],319:[function(v,ie,ae){"use strict";var _=v("./safe-to-string"),k=/[\n\r\u2028\u2029]/g;ie.exports=function(m){var E=_(m);return null===E?"<Non-coercible to string value>":(E.length>100&&(E=E.slice(0,99)+"\u2026"),E=E.replace(k,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},{"./safe-to-string":318}],320:[function(v,ie,ae){"use strict";var _=v("../value/is"),k={object:!0,function:!0,undefined:!0};ie.exports=function(m){return!!_(m)&&hasOwnProperty.call(k,typeof m)}},{"../value/is":326}],321:[function(v,ie,ae){"use strict";var _=v("../lib/resolve-exception"),k=v("./is");ie.exports=function(m){return k(m)?m:_(m,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":317,"./is":322}],322:[function(v,ie,ae){"use strict";var _=v("../function/is"),k=/^\s*class[\s{/}]/,m=Function.prototype.toString;ie.exports=function(E){return!(!_(E)||k.test(m.call(E)))}},{"../function/is":316}],323:[function(v,ie,ae){"use strict";var _=v("../object/is");ie.exports=function(k){if(!_(k))return!1;try{return!!k.constructor&&k.constructor.prototype===k}catch(m){return!1}}},{"../object/is":320}],324:[function(v,ie,ae){"use strict";var _=v("../value/is"),k=v("../object/is"),m=Object.prototype.toString;ie.exports=function(E){if(!_(E))return null;if(k(E)){var e=E.toString;if("function"!=typeof e||e===m)return null}try{return""+E}catch(c){return null}}},{"../object/is":320,"../value/is":326}],325:[function(v,ie,ae){"use strict";var _=v("../lib/resolve-exception"),k=v("./is");ie.exports=function(m){return k(m)?m:_(m,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":317,"./is":326}],326:[function(v,ie,ae){"use strict";ie.exports=function(k){return null!=k}},{}],327:[function(v,ie,ae){(function(_){(function(){"use strict";var k=v("bit-twiddle"),m=v("dup"),E=v("buffer").Buffer;_.__TYPEDARRAY_POOL||(_.__TYPEDARRAY_POOL={UINT8:m([32,0]),UINT16:m([32,0]),UINT32:m([32,0]),BIGUINT64:m([32,0]),INT8:m([32,0]),INT16:m([32,0]),INT32:m([32,0]),BIGINT64:m([32,0]),FLOAT:m([32,0]),DOUBLE:m([32,0]),DATA:m([32,0]),UINT8C:m([32,0]),BUFFER:m([32,0])});var e="undefined"!=typeof Uint8ClampedArray,c="undefined"!=typeof BigUint64Array,d="undefined"!=typeof BigInt64Array,n=_.__TYPEDARRAY_POOL;n.UINT8C||(n.UINT8C=m([32,0])),n.BIGUINT64||(n.BIGUINT64=m([32,0])),n.BIGINT64||(n.BIGINT64=m([32,0])),n.BUFFER||(n.BUFFER=m([32,0]));var t=n.DATA,i=n.BUFFER;function a(h){if(h){var C=k.log2(h.length||h.byteLength);t[C].push(h)}}function g(o){o=k.nextPow2(o);var C=k.log2(o),R=t[C];return R.length>0?R.pop():new ArrayBuffer(o)}function s(h){return new Uint8Array(g(h),0,h)}function b(h){return new Uint16Array(g(2*h),0,h)}function x(h){return new Uint32Array(g(4*h),0,h)}function S(h){return new Int8Array(g(h),0,h)}function p(h){return new Int16Array(g(2*h),0,h)}function w(h){return new Int32Array(g(4*h),0,h)}function l(h){return new Float32Array(g(4*h),0,h)}function y(h){return new Float64Array(g(8*h),0,h)}function A(h){return e?new Uint8ClampedArray(g(h),0,h):s(h)}function T(h){return c?new BigUint64Array(g(8*h),0,h):null}function M(h){return d?new BigInt64Array(g(8*h),0,h):null}function f(h){return new DataView(g(h),0,h)}function u(h){h=k.nextPow2(h);var o=k.log2(h),C=i[o];return C.length>0?C.pop():new E(h)}ae.free=function(o){if(E.isBuffer(o))i[k.log2(o.length)].push(o);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(o)&&(o=o.buffer),!o)return;var R=0|k.log2(o.length||o.byteLength);t[R].push(o)}},ae.freeUint8=ae.freeUint16=ae.freeUint32=ae.freeBigUint64=ae.freeInt8=ae.freeInt16=ae.freeInt32=ae.freeBigInt64=ae.freeFloat32=ae.freeFloat=ae.freeFloat64=ae.freeDouble=ae.freeUint8Clamped=ae.freeDataView=function r(h){a(h.buffer)},ae.freeArrayBuffer=a,ae.freeBuffer=function(o){i[k.log2(o.length)].push(o)},ae.malloc=function(o,C){if(void 0===C||"arraybuffer"===C)return g(o);switch(C){case"uint8":return s(o);case"uint16":return b(o);case"uint32":return x(o);case"int8":return S(o);case"int16":return p(o);case"int32":return w(o);case"float":case"float32":return l(o);case"double":case"float64":return y(o);case"uint8_clamped":return A(o);case"bigint64":return M(o);case"biguint64":return T(o);case"buffer":return u(o);case"data":case"dataview":return f(o);default:return null}return null},ae.mallocArrayBuffer=g,ae.mallocUint8=s,ae.mallocUint16=b,ae.mallocUint32=x,ae.mallocInt8=S,ae.mallocInt16=p,ae.mallocInt32=w,ae.mallocFloat32=ae.mallocFloat=l,ae.mallocFloat64=ae.mallocDouble=y,ae.mallocUint8Clamped=A,ae.mallocBigUint64=T,ae.mallocBigInt64=M,ae.mallocDataView=f,ae.mallocBuffer=u,ae.clearCache=function(){for(var o=0;o<32;++o)n.UINT8[o].length=0,n.UINT16[o].length=0,n.UINT32[o].length=0,n.INT8[o].length=0,n.INT16[o].length=0,n.INT32[o].length=0,n.FLOAT[o].length=0,n.DOUBLE[o].length=0,n.BIGUINT64[o].length=0,n.BIGINT64[o].length=0,n.UINT8C[o].length=0,t[o].length=0,i[o].length=0}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],328:[function(v,ie,ae){var _=/[\'\"]/;ie.exports=function(m){return m?(_.test(m.charAt(0))&&(m=m.substr(1)),_.test(m.charAt(m.length-1))&&(m=m.substr(0,m.length-1)),m):""}},{}],329:[function(v,ie,ae){"use strict";ie.exports=function(k,m,E){Array.isArray(E)||(E=[].slice.call(arguments,2));for(var e=0,c=E.length;e<c;e++){var d=E[e];for(var n in d)if((void 0===m[n]||Array.isArray(m[n])||k[n]!==m[n])&&n in m){var t;if(!0===d[n])t=m[n];else{if(!1===d[n])continue;if("function"==typeof d[n]&&void 0===(t=d[n](m[n],k,m)))continue}k[n]=t}}return k}},{}],330:[function(v,ie,ae){(function(_){(function(){function m(E){try{if(!_.localStorage)return!1}catch(c){return!1}var e=_.localStorage[E];return null!=e&&"true"===String(e).toLowerCase()}ie.exports=function k(E,e){if(m("noDeprecation"))return E;var c=!1;return function d(){if(!c){if(m("throwDeprecation"))throw new Error(e);m("traceDeprecation")?console.trace(e):console.warn(e),c=!0}return E.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],331:[function(v,ie,ae){var _=v("get-canvas-context");ie.exports=function(m){return _("webgl",m)}},{"get-canvas-context":194}],332:[function(v,ie,ae){var _=v("../main"),k=v("object-assign"),m=_.instance();function E(g){this.local=this.regionalOptions[g||""]||this.regionalOptions[""]}k(E.prototype=new _.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(g,s){if("string"==typeof g){var b=g.match(c);return b?b[0]:""}var x=this._validateYear(g),S=g.month(),p=""+this.toChineseMonth(x,S);return s&&p.length<2&&(p="0"+p),this.isIntercalaryMonth(x,S)&&(p+="i"),p},monthNames:function(g){if("string"==typeof g){var s=g.match(d);return s?s[0]:""}var b=this._validateYear(g),x=g.month(),p=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(b,x)-1];return this.isIntercalaryMonth(b,x)&&(p="\u95f0"+p),p},monthNamesShort:function(g){if("string"==typeof g){var s=g.match(n);return s?s[0]:""}var b=this._validateYear(g),x=g.month(),p=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(b,x)-1];return this.isIntercalaryMonth(b,x)&&(p="\u95f0"+p),p},parseMonth:function(g,s){g=this._validateYear(g);var x,b=parseInt(s);if(isNaN(b))"\u95f0"===s[0]&&(x=!0,s=s.substring(1)),"\u6708"===s[s.length-1]&&(s=s.substring(0,s.length-1)),b=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(s);else{var S=s[s.length-1];x="i"===S||"I"===S}return this.toMonthIndex(g,b,x)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(g,s){if(g.year&&(g=g.year()),"number"!=typeof g||g<1888||g>2111)throw s.replace(/\{0\}/,this.local.name);return g},toMonthIndex:function(g,s,b){var x=this.intercalaryMonth(g);if(b&&s!==x||s<1||s>12)throw _.local.invalidMonth.replace(/\{0\}/,this.local.name);return x?!b&&s<=x?s-1:s:s-1},toChineseMonth:function(g,s){g.year&&(s=(g=g.year()).month());var b=this.intercalaryMonth(g);if(s<0||s>(b?12:11))throw _.local.invalidMonth.replace(/\{0\}/,this.local.name);return b?s<b?s+1:s:s+1},intercalaryMonth:function(g){return g=this._validateYear(g),t[g-t[0]]>>13},isIntercalaryMonth:function(g,s){g.year&&(s=(g=g.year()).month());var b=this.intercalaryMonth(g);return!!b&&b===s},leapYear:function(g){return 0!==this.intercalaryMonth(g)},weekOfYear:function(g,s,b){var y,x=this._validateYear(g,_.local.invalidyear),S=i[x-i[0]];(y=m.newDate(S>>9&4095,S>>5&15,31&S)).add(4-(y.dayOfWeek()||7),"d");var A=this.toJD(g,s,b)-y.toJD();return 1+Math.floor(A/7)},monthsInYear:function(g){return this.leapYear(g)?13:12},daysInMonth:function(g,s){g.year&&(s=g.month(),g=g.year()),g=this._validateYear(g);var b=t[g-t[0]];if(s>(b>>13?12:11))throw _.local.invalidMonth.replace(/\{0\}/,this.local.name);return b&1<<12-s?30:29},weekDay:function(g,s,b){return(this.dayOfWeek(g,s,b)||7)<6},toJD:function(g,s,b){var x=this._validate(g,p,b,_.local.invalidDate);g=this._validateYear(x.year()),s=x.month(),b=x.day();var S=this.isIntercalaryMonth(g,s),p=this.toChineseMonth(g,s),w=function r(g,s,b,x,S){var p,w,M;if("object"==typeof g)w=g,p=s||{};else{var T;if(!("number"==typeof g&&g>=1888&&g<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof s&&s>=1&&s<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof b&&b>=1&&b<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof x?(T=!1,p=x):(T=!!x,p=S||{}),w={year:g,month:s,day:b,isIntercalary:T}}M=w.day-1;var h,f=t[w.year-t[0]],u=f>>13;h=u&&(w.month>u||w.isIntercalary)?w.month:w.month-1;for(var o=0;o<h;o++)M+=f&1<<12-o?30:29;var R=i[w.year-i[0]],F=new Date(R>>9&4095,(R>>5&15)-1,(31&R)+M);return p.year=F.getFullYear(),p.month=1+F.getMonth(),p.day=F.getDate(),p}(g,p,b,S);return m.toJD(w.year,w.month,w.day)},fromJD:function(g){var s=m.fromJD(g),b=function a(g,s,b,x){var S,p;if("object"==typeof g)S=g,p=s||{};else{if(!("number"==typeof g&&g>=1888&&g<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof s&&s>=1&&s<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof b&&b>=1&&b<=31))throw new Error("Solar day outside range 1 - 31");S={year:g,month:s,day:b},p=x||{}}var A=i[S.year-i[0]];p.year=(S.year<<9|S.month<<5|S.day)>=A?S.year:S.year-1,A=i[p.year-i[0]];var h,o=new Date(A>>9&4095,(A>>5&15)-1,31&A),C=new Date(S.year,S.month-1,S.day);h=Math.round((C-o)/864e5);var z,R=t[p.year-t[0]];for(z=0;z<13;z++){var O=R&1<<12-z?30:29;if(h<O)break;h-=O}var I=R>>13;return!I||z<I?(p.isIntercalary=!1,p.month=1+z):z===I?(p.isIntercalary=!0,p.month=z):(p.isIntercalary=!1,p.month=z),p.day=1+h,p}(s.year(),s.month(),s.day()),x=this.toMonthIndex(b.year,b.month,b.isIntercalary);return this.newDate(b.year,x,b.day)},fromString:function(g){var s=g.match(e),b=this._validateYear(+s[1]),p=this.toMonthIndex(b,+s[2],!!s[3]);return this.newDate(b,p,+s[4])},add:function(g,s,b){var x=g.year(),S=g.month(),p=this.isIntercalaryMonth(x,S),w=this.toChineseMonth(x,S),l=Object.getPrototypeOf(E.prototype).add.call(this,g,s,b);if("y"===b){var y=l.year(),A=l.month(),T=this.isIntercalaryMonth(y,w),M=this.toMonthIndex(y,w,!(!p||!T));M!==A&&l.month(M)}return l}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,c=/^\d?\d[iI]?/m,d=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,n=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;_.calendars.chinese=E;var t=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],i=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":346,"object-assign":247}],333:[function(v,ie,ae){var _=v("../main");function m(E){this.local=this.regionalOptions[E||""]||this.regionalOptions[""]}v("object-assign")(m.prototype=new _.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(c){var e=this._validate(c,this.minMonth,this.minDay,_.local.invalidYear);return(c=e.year()+(e.year()<0?1:0))%4==3||c%4==-1},monthsInYear:function(E){return this._validate(E,this.minMonth,this.minDay,_.local.invalidYear||_.regionalOptions[""].invalidYear),13},weekOfYear:function(E,e,c){var d=this.newDate(E,e,c);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(E,e){var c=this._validate(E,e,this.minDay,_.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(13===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(E,e,c){return(this.dayOfWeek(E,e,c)||7)<6},toJD:function(E,e,c){var d=this._validate(E,e,c,_.local.invalidDate);return(E=d.year())<0&&E++,d.day()+30*(d.month()-1)+365*(E-1)+Math.floor(E/4)+this.jdEpoch-1},fromJD:function(E){var e=Math.floor(E)+.5-this.jdEpoch,c=Math.floor((e-Math.floor((e+366)/1461))/365)+1;c<=0&&c--,e=Math.floor(E)+.5-this.newDate(c,1,1).toJD();var d=Math.floor(e/30)+1;return this.newDate(c,d,e-30*(d-1)+1)}}),_.calendars.coptic=m},{"../main":346,"object-assign":247}],334:[function(v,ie,ae){var _=v("../main");function m(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}v("object-assign")(m.prototype=new _.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,_.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,_.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,_.local.invalidYear),400},weekOfYear:function(e,c,d){var n=this.newDate(e,c,d);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/8)+1},daysInMonth:function(e,c){var d=this._validate(e,c,this.minDay,_.local.invalidMonth);return this.daysPerMonth[d.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,c,d){return(this._validate(e,c,d,_.local.invalidDate).day()+1)%8},weekDay:function(e,c,d){var n=this.dayOfWeek(e,c,d);return n>=2&&n<=6},extraInfo:function(e,c,d){var n=this._validate(e,c,d,_.local.invalidDate);return{century:E[Math.floor((n.year()-1)/100)+1]||""}},toJD:function(e,c,d){var n=this._validate(e,c,d,_.local.invalidDate);return e=n.year()+(n.year()<0?1:0),c=n.month(),(d=n.day())+(c>1?16:0)+(c>2?32*(c-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var c=Math.floor(e/400)+1;e-=400*(c-1),e+=e>15?16:0;var d=Math.floor(e/32)+1;return this.newDate(c<=0?c-1:c,d,e-32*(d-1)+1)}});var E={20:"Fruitbat",21:"Anchovy"};_.calendars.discworld=m},{"../main":346,"object-assign":247}],335:[function(v,ie,ae){var _=v("../main");function m(E){this.local=this.regionalOptions[E||""]||this.regionalOptions[""]}v("object-assign")(m.prototype=new _.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(c){var e=this._validate(c,this.minMonth,this.minDay,_.local.invalidYear);return(c=e.year()+(e.year()<0?1:0))%4==3||c%4==-1},monthsInYear:function(E){return this._validate(E,this.minMonth,this.minDay,_.local.invalidYear||_.regionalOptions[""].invalidYear),13},weekOfYear:function(E,e,c){var d=this.newDate(E,e,c);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(E,e){var c=this._validate(E,e,this.minDay,_.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(13===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(E,e,c){return(this.dayOfWeek(E,e,c)||7)<6},toJD:function(E,e,c){var d=this._validate(E,e,c,_.local.invalidDate);return(E=d.year())<0&&E++,d.day()+30*(d.month()-1)+365*(E-1)+Math.floor(E/4)+this.jdEpoch-1},fromJD:function(E){var e=Math.floor(E)+.5-this.jdEpoch,c=Math.floor((e-Math.floor((e+366)/1461))/365)+1;c<=0&&c--,e=Math.floor(E)+.5-this.newDate(c,1,1).toJD();var d=Math.floor(e/30)+1;return this.newDate(c,d,e-30*(d-1)+1)}}),_.calendars.ethiopian=m},{"../main":346,"object-assign":247}],336:[function(v,ie,ae){var _=v("../main");function m(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function E(e,c){return e-c*Math.floor(e/c)}v("object-assign")(m.prototype=new _.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var c=this._validate(e,this.minMonth,this.minDay,_.local.invalidYear);return this._leapYear(c.year())},_leapYear:function(e){return E(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,_.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,c,d){var n=this.newDate(e,c,d);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,_.local.invalidYear).year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,c){return e.year&&(c=e.month(),e=e.year()),this._validate(e,c,this.minDay,_.local.invalidMonth),12===c&&this.leapYear(e)||8===c&&5===E(this.daysInYear(e),10)?30:9===c&&3===E(this.daysInYear(e),10)?29:this.daysPerMonth[c-1]},weekDay:function(e,c,d){return 6!==this.dayOfWeek(e,c,d)},extraInfo:function(e,c,d){var n=this._validate(e,c,d,_.local.invalidDate);return{yearType:(this.leapYear(n)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(n)%10-3]}},toJD:function(e,c,d){var n=this._validate(e,c,d,_.local.invalidDate);e=n.year(),c=n.month(),d=n.day();var t=e<=0?e+1:e,i=this.jdEpoch+this._delay1(t)+this._delay2(t)+d+1;if(c<7){for(var a=7;a<=this.monthsInYear(e);a++)i+=this.daysInMonth(e,a);for(a=1;a<c;a++)i+=this.daysInMonth(e,a)}else for(a=7;a<c;a++)i+=this.daysInMonth(e,a);return i},_delay1:function(e){var c=Math.floor((235*e-234)/19),n=29*c+Math.floor((12084+13753*c)/25920);return E(3*(n+1),7)<3&&n++,n},_delay2:function(e){var c=this._delay1(e-1),d=this._delay1(e);return this._delay1(e+1)-d==356?2:d-c==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var c=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===c?1:c+1,7,1);)c++;for(var d=e<this.toJD(c,1,1)?7:1;e>this.toJD(c,d,this.daysInMonth(c,d));)d++;var n=e-this.toJD(c,d,1)+1;return this.newDate(c,d,n)}}),_.calendars.hebrew=m},{"../main":346,"object-assign":247}],337:[function(v,ie,ae){var _=v("../main");function m(E){this.local=this.regionalOptions[E||""]||this.regionalOptions[""]}v("object-assign")(m.prototype=new _.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(E){return(11*this._validate(E,this.minMonth,this.minDay,_.local.invalidYear).year()+14)%30<11},weekOfYear:function(E,e,c){var d=this.newDate(E,e,c);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInYear:function(E){return this.leapYear(E)?355:354},daysInMonth:function(E,e){var c=this._validate(E,e,this.minDay,_.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(12===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(E,e,c){return 5!==this.dayOfWeek(E,e,c)},toJD:function(E,e,c){var d=this._validate(E,e,c,_.local.invalidDate);return E=d.year(),e=d.month(),E=E<=0?E+1:E,(c=d.day())+Math.ceil(29.5*(e-1))+354*(E-1)+Math.floor((3+11*E)/30)+this.jdEpoch-1},fromJD:function(E){E=Math.floor(E)+.5;var e=Math.floor((30*(E-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var c=Math.min(12,Math.ceil((E-29-this.toJD(e,1,1))/29.5)+1),d=E-this.toJD(e,c,1)+1;return this.newDate(e,c,d)}}),_.calendars.islamic=m},{"../main":346,"object-assign":247}],338:[function(v,ie,ae){var _=v("../main");function m(E){this.local=this.regionalOptions[E||""]||this.regionalOptions[""]}v("object-assign")(m.prototype=new _.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(c){var e=this._validate(c,this.minMonth,this.minDay,_.local.invalidYear);return(c=e.year()<0?e.year()+1:e.year())%4==0},weekOfYear:function(E,e,c){var d=this.newDate(E,e,c);return d.add(4-(d.dayOfWeek()||7),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(E,e){var c=this._validate(E,e,this.minDay,_.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(2===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(E,e,c){return(this.dayOfWeek(E,e,c)||7)<6},toJD:function(E,e,c){var d=this._validate(E,e,c,_.local.invalidDate);return E=d.year(),e=d.month(),c=d.day(),E<0&&E++,e<=2&&(E--,e+=12),Math.floor(365.25*(E+4716))+Math.floor(30.6001*(e+1))+c-1524.5},fromJD:function(E){var c=Math.floor(E+.5)+1524,d=Math.floor((c-122.1)/365.25),n=Math.floor(365.25*d),t=Math.floor((c-n)/30.6001),i=t-Math.floor(t<14?1:13),a=d-Math.floor(i>2?4716:4715),r=c-n-Math.floor(30.6001*t);return a<=0&&a--,this.newDate(a,i,r)}}),_.calendars.julian=m},{"../main":346,"object-assign":247}],339:[function(v,ie,ae){var _=v("../main");function m(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}function E(c,d){return c-d*Math.floor(c/d)}function e(c,d){return E(c-1,d)+1}v("object-assign")(m.prototype=new _.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(c){return this._validate(c,this.minMonth,this.minDay,_.local.invalidYear),!1},formatYear:function(c){c=this._validate(c,this.minMonth,this.minDay,_.local.invalidYear).year();var n=Math.floor(c/400);return c%=400,c+=c<0?400:0,n+"."+Math.floor(c/20)+"."+c%20},forYear:function(c){if((c=c.split(".")).length<3)throw"Invalid Mayan year";for(var d=0,n=0;n<c.length;n++){var t=parseInt(c[n],10);if(Math.abs(t)>19||n>0&&t<0)throw"Invalid Mayan year";d=20*d+t}return d},monthsInYear:function(c){return this._validate(c,this.minMonth,this.minDay,_.local.invalidYear),18},weekOfYear:function(c,d,n){return this._validate(c,d,n,_.local.invalidDate),0},daysInYear:function(c){return this._validate(c,this.minMonth,this.minDay,_.local.invalidYear),360},daysInMonth:function(c,d){return this._validate(c,d,this.minDay,_.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(c,d,n){return this._validate(c,d,n,_.local.invalidDate).day()},weekDay:function(c,d,n){return this._validate(c,d,n,_.local.invalidDate),!0},extraInfo:function(c,d,n){var i=this._validate(c,d,n,_.local.invalidDate).toJD(),a=this._toHaab(i),r=this._toTzolkin(i);return{haabMonthName:this.local.haabMonths[a[0]-1],haabMonth:a[0],haabDay:a[1],tzolkinDayName:this.local.tzolkinMonths[r[0]-1],tzolkinDay:r[0],tzolkinTrecena:r[1]}},_toHaab:function(c){var d=E(8+(c-=this.jdEpoch)+340,365);return[Math.floor(d/20)+1,E(d,20)]},_toTzolkin:function(c){return[e(20+(c-=this.jdEpoch),20),e(c+4,13)]},toJD:function(c,d,n){var t=this._validate(c,d,n,_.local.invalidDate);return t.day()+20*t.month()+360*t.year()+this.jdEpoch},fromJD:function(c){c=Math.floor(c)+.5-this.jdEpoch;var d=Math.floor(c/360);c%=360,c+=c<0?360:0;var n=Math.floor(c/20);return this.newDate(d,n,c%20)}}),_.calendars.mayan=m},{"../main":346,"object-assign":247}],340:[function(v,ie,ae){var _=v("../main"),k=v("object-assign");function m(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}m.prototype=new _.baseCalendar;var E=_.instance("gregorian");k(m.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var c=this._validate(e,this.minMonth,this.minDay,_.local.invalidYear||_.regionalOptions[""].invalidYear);return E.leapYear(c.year()+(c.year()<1?1:0)+1469)},weekOfYear:function(e,c,d){var n=this.newDate(e,c,d);return n.add(1-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,c){var d=this._validate(e,c,this.minDay,_.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(12===d.month()&&this.leapYear(d.year())?1:0)},weekDay:function(e,c,d){return(this.dayOfWeek(e,c,d)||7)<6},toJD:function(t,c,d){var n=this._validate(t,c,d,_.local.invalidMonth);(t=n.year())<0&&t++;for(var i=n.day(),a=1;a<n.month();a++)i+=this.daysPerMonth[a-1];return i+E.toJD(t+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var c=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(c+1,1,1);)c++;for(var d=e-Math.floor(this.toJD(c,1,1)+.5)+1,n=1;d>this.daysInMonth(c,n);)d-=this.daysInMonth(c,n),n++;return this.newDate(c,n,d)}}),_.calendars.nanakshahi=m},{"../main":346,"object-assign":247}],341:[function(v,ie,ae){var _=v("../main");function m(E){this.local=this.regionalOptions[E||""]||this.regionalOptions[""]}v("object-assign")(m.prototype=new _.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(E){return this.daysInYear(E)!==this.daysPerYear},weekOfYear:function(E,e,c){var d=this.newDate(E,e,c);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInYear:function(E){if(E=this._validate(E,this.minMonth,this.minDay,_.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[E])return this.daysPerYear;for(var c=0,d=this.minMonth;d<=12;d++)c+=this.NEPALI_CALENDAR_DATA[E][d];return c},daysInMonth:function(E,e){return E.year&&(e=E.month(),E=E.year()),this._validate(E,e,this.minDay,_.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[E]?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[E][e]},weekDay:function(E,e,c){return 6!==this.dayOfWeek(E,e,c)},toJD:function(E,e,c){var d=this._validate(E,e,c,_.local.invalidDate);E=d.year(),e=d.month(),c=d.day();var n=_.instance(),t=0,i=e,a=E;this._createMissingCalendarData(E);var r=E-(i>9||9===i&&c>=this.NEPALI_CALENDAR_DATA[a][0]?56:57);for(9!==e&&(t=c,i--);9!==i;)i<=0&&(i=12,a--),t+=this.NEPALI_CALENDAR_DATA[a][i],i--;return 9===e?(t+=c-this.NEPALI_CALENDAR_DATA[a][0])<0&&(t+=n.daysInYear(r)):t+=this.NEPALI_CALENDAR_DATA[a][9]-this.NEPALI_CALENDAR_DATA[a][0],n.newDate(r,1,1).add(t,"d").toJD()},fromJD:function(E){var c=_.instance().fromJD(E),d=c.year(),n=c.dayOfYear(),t=d+56;this._createMissingCalendarData(t);for(var i=9,r=this.NEPALI_CALENDAR_DATA[t][i]-this.NEPALI_CALENDAR_DATA[t][0]+1;n>r;)++i>12&&(i=1,t++),r+=this.NEPALI_CALENDAR_DATA[t][i];return this.newDate(t,i,this.NEPALI_CALENDAR_DATA[t][i]-(r-n))},_createMissingCalendarData:function(E){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var c=E-1;c<E+2;c++)void 0===this.NEPALI_CALENDAR_DATA[c]&&(this.NEPALI_CALENDAR_DATA[c]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),_.calendars.nepali=m},{"../main":346,"object-assign":247}],342:[function(v,ie,ae){var _=v("../main");function m(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function E(e,c){return e-c*Math.floor(e/c)}v("object-assign")(m.prototype=new _.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var c=this._validate(e,this.minMonth,this.minDay,_.local.invalidYear);return 682*((c.year()-(c.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,c,d){var n=this.newDate(e,c,d);return n.add(-(n.dayOfWeek()+1)%7,"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,c){var d=this._validate(e,c,this.minDay,_.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(12===d.month()&&this.leapYear(d.year())?1:0)},weekDay:function(e,c,d){return 5!==this.dayOfWeek(e,c,d)},toJD:function(e,c,d){var n=this._validate(e,c,d,_.local.invalidDate);e=n.year(),c=n.month(),d=n.day();var t=e-(e>=0?474:473),i=474+E(t,2820);return d+(c<=7?31*(c-1):30*(c-1)+6)+Math.floor((682*i-110)/2816)+365*(i-1)+1029983*Math.floor(t/2820)+this.jdEpoch-1},fromJD:function(e){var c=(e=Math.floor(e)+.5)-this.toJD(475,1,1),d=Math.floor(c/1029983),n=E(c,1029983),t=2820;if(1029982!==n){var i=Math.floor(n/366),a=E(n,366);t=Math.floor((2134*i+2816*a+2815)/1028522)+i+1}var r=t+2820*d+474,g=e-this.toJD(r=r<=0?r-1:r,1,1)+1,s=g<=186?Math.ceil(g/31):Math.ceil((g-6)/30),b=e-this.toJD(r,s,1)+1;return this.newDate(r,s,b)}}),_.calendars.persian=m,_.calendars.jalali=m},{"../main":346,"object-assign":247}],343:[function(v,ie,ae){var _=v("../main"),k=v("object-assign"),m=_.instance();function E(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}k(E.prototype=new _.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(d){var c=this._validate(d,this.minMonth,this.minDay,_.local.invalidYear);return d=this._t2gYear(c.year()),m.leapYear(d)},weekOfYear:function(t,c,d){var n=this._validate(t,this.minMonth,this.minDay,_.local.invalidYear);return t=this._t2gYear(n.year()),m.weekOfYear(t,n.month(),n.day())},daysInMonth:function(e,c){var d=this._validate(e,c,this.minDay,_.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(2===d.month()&&this.leapYear(d.year())?1:0)},weekDay:function(e,c,d){return(this.dayOfWeek(e,c,d)||7)<6},toJD:function(t,c,d){var n=this._validate(t,c,d,_.local.invalidDate);return t=this._t2gYear(n.year()),m.toJD(t,n.month(),n.day())},fromJD:function(e){var c=m.fromJD(e),d=this._g2tYear(c.year());return this.newDate(d,c.month(),c.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),_.calendars.taiwan=E},{"../main":346,"object-assign":247}],344:[function(v,ie,ae){var _=v("../main"),k=v("object-assign"),m=_.instance();function E(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}k(E.prototype=new _.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(d){var c=this._validate(d,this.minMonth,this.minDay,_.local.invalidYear);return d=this._t2gYear(c.year()),m.leapYear(d)},weekOfYear:function(t,c,d){var n=this._validate(t,this.minMonth,this.minDay,_.local.invalidYear);return t=this._t2gYear(n.year()),m.weekOfYear(t,n.month(),n.day())},daysInMonth:function(e,c){var d=this._validate(e,c,this.minDay,_.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(2===d.month()&&this.leapYear(d.year())?1:0)},weekDay:function(e,c,d){return(this.dayOfWeek(e,c,d)||7)<6},toJD:function(t,c,d){var n=this._validate(t,c,d,_.local.invalidDate);return t=this._t2gYear(n.year()),m.toJD(t,n.month(),n.day())},fromJD:function(e){var c=m.fromJD(e),d=this._g2tYear(c.year());return this.newDate(d,c.month(),c.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),_.calendars.thai=E},{"../main":346,"object-assign":247}],345:[function(v,ie,ae){var _=v("../main");function m(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}v("object-assign")(m.prototype=new _.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var c=this._validate(e,this.minMonth,this.minDay,_.local.invalidYear);return 355===this.daysInYear(c.year())},weekOfYear:function(e,c,d){var n=this.newDate(e,c,d);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var c=0,d=1;d<=12;d++)c+=this.daysInMonth(e,d);return c},daysInMonth:function(e,c){for(var n=this._validate(e,c,this.minDay,_.local.invalidMonth).toJD()-24e5+.5,t=0,i=0;i<E.length;i++){if(E[i]>n)return E[t]-E[t-1];t++}return 30},weekDay:function(e,c,d){return 5!==this.dayOfWeek(e,c,d)},toJD:function(e,c,d){var n=this._validate(e,c,d,_.local.invalidDate),t=12*(n.year()-1)+n.month()-15292;return n.day()+E[t-1]-1+24e5-.5},fromJD:function(e){for(var c=e-24e5+.5,d=0,n=0;n<E.length&&!(E[n]>c);n++)d++;var t=d+15292,i=Math.floor((t-1)/12);return this.newDate(i+1,t-12*i,c-E[d-1]+1)},isValid:function(e,c,d){var n=_.baseCalendar.prototype.isValid.apply(this,arguments);return n&&(n=(e=null!=e.year?e.year:e)>=1276&&e<=1500),n},_validate:function(e,c,d,n){var t=_.baseCalendar.prototype._validate.apply(this,arguments);if(t.year<1276||t.year>1500)throw n.replace(/\{0\}/,this.local.name);return t}}),_.calendars.ummalqura=m;var E=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":346,"object-assign":247}],346:[function(v,ie,ae){var _=v("object-assign");function k(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function m(n,t,i,a){if(this._calendar=n,this._year=t,this._month=i,this._day=a,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(d.local.invalidDate||d.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function E(n,t){return"000000".substring(0,t-(n=""+n).length)+n}function e(){this.shortYearCutoff="+10"}function c(n){this.local=this.regionalOptions[n]||this.regionalOptions[""]}_(k.prototype,{instance:function(n,t){n=(n||"gregorian").toLowerCase();var i=this._localCals[n+"-"+(t=t||"")];if(!i&&this.calendars[n]&&(i=new this.calendars[n](t),this._localCals[n+"-"+t]=i),!i)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,n);return i},newDate:function(n,t,i,a,r){return(a=(null!=n&&n.year?n.calendar():"string"==typeof a?this.instance(a,r):a)||this.instance()).newDate(n,t,i)},substituteDigits:function(n){return function(t){return(t+"").replace(/[0-9]/g,function(i){return n[i]})}},substituteChineseDigits:function(n,t){return function(i){for(var a="",r=0;i>0;){var g=i%10;a=(0===g?"":n[g]+t[r])+a,r++,i=Math.floor(i/10)}return 0===a.indexOf(n[1]+t[1])&&(a=a.substr(1)),a||n[0]}}}),_(m.prototype,{newDate:function(n,t,i){return this._calendar.newDate(null==n?this:n,t,i)},year:function(n){return 0===arguments.length?this._year:this.set(n,"y")},month:function(n){return 0===arguments.length?this._month:this.set(n,"m")},day:function(n){return 0===arguments.length?this._day:this.set(n,"d")},date:function(n,t,i){if(!this._calendar.isValid(n,t,i))throw(d.local.invalidDate||d.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=n,this._month=t,this._day=i,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(n,t){return this._calendar.add(this,n,t)},set:function(n,t){return this._calendar.set(this,n,t)},compareTo:function(n){if(this._calendar.name!==n._calendar.name)throw(d.local.differentCalendars||d.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,n._calendar.local.name);var t=this._year!==n._year?this._year-n._year:this._month!==n._month?this.monthOfYear()-n.monthOfYear():this._day-n._day;return 0===t?0:t<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(n){return this._calendar.fromJD(n)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(n){return this._calendar.fromJSDate(n)},toString:function(){return(this.year()<0?"-":"")+E(Math.abs(this.year()),4)+"-"+E(this.month(),2)+"-"+E(this.day(),2)}}),_(e.prototype,{_validateLevel:0,newDate:function(n,t,i){return null==n?this.today():(n.year&&(this._validate(n,t,i,d.local.invalidDate||d.regionalOptions[""].invalidDate),i=n.day(),t=n.month(),n=n.year()),new m(this,n,t,i))},today:function(){return this.fromJSDate(new Date)},epoch:function(n){return this._validate(n,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(n){var t=this._validate(n,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+E(Math.abs(t.year()),4)},monthsInYear:function(n){return this._validate(n,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear),12},monthOfYear:function(n,t){var i=this._validate(n,t,this.minDay,d.local.invalidMonth||d.regionalOptions[""].invalidMonth);return(i.month()+this.monthsInYear(i)-this.firstMonth)%this.monthsInYear(i)+this.minMonth},fromMonthOfYear:function(n,t){var i=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(n)+this.minMonth;return this._validate(n,i,this.minDay,d.local.invalidMonth||d.regionalOptions[""].invalidMonth),i},daysInYear:function(n){var t=this._validate(n,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(n,t,i){var a=this._validate(n,t,i,d.local.invalidDate||d.regionalOptions[""].invalidDate);return a.toJD()-this.newDate(a.year(),this.fromMonthOfYear(a.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(n,t,i){var a=this._validate(n,t,i,d.local.invalidDate||d.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(a))+2)%this.daysInWeek()},extraInfo:function(n,t,i){return this._validate(n,t,i,d.local.invalidDate||d.regionalOptions[""].invalidDate),{}},add:function(n,t,i){return this._validate(n,this.minMonth,this.minDay,d.local.invalidDate||d.regionalOptions[""].invalidDate),this._correctAdd(n,this._add(n,t,i),t,i)},_add:function(n,t,i){if(this._validateLevel++,"d"===i||"w"===i){var a=n.toJD()+t*("w"===i?this.daysInWeek():1),r=n.calendar().fromJD(a);return this._validateLevel--,[r.year(),r.month(),r.day()]}try{var g=n.year()+("y"===i?t:0),s=n.monthOfYear()+("m"===i?t:0),b=(r=n.day(),function(p){for(;s<p.minMonth;)g--,s+=p.monthsInYear(g);for(var w=p.monthsInYear(g);s>w-1+p.minMonth;)g++,s-=w,w=p.monthsInYear(g)});"y"===i?(n.month()!==this.fromMonthOfYear(g,s)&&(s=this.newDate(g,n.month(),this.minDay).monthOfYear()),s=Math.min(s,this.monthsInYear(g)),r=Math.min(r,this.daysInMonth(g,this.fromMonthOfYear(g,s)))):"m"===i&&(b(this),r=Math.min(r,this.daysInMonth(g,this.fromMonthOfYear(g,s))));var x=[g,this.fromMonthOfYear(g,s),r];return this._validateLevel--,x}catch(S){throw this._validateLevel--,S}},_correctAdd:function(n,t,i,a){if(!(this.hasYearZero||"y"!==a&&"m"!==a||0!==t[0]&&n.year()>0==t[0]>0)){var r={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[a];t=this._add(n,i*r[0]+(i<0?-1:1)*r[1],r[2])}return n.date(t[0],t[1],t[2])},set:function(n,t,i){this._validate(n,this.minMonth,this.minDay,d.local.invalidDate||d.regionalOptions[""].invalidDate);var a="y"===i?t:n.year(),r="m"===i?t:n.month(),g="d"===i?t:n.day();return("y"===i||"m"===i)&&(g=Math.min(g,this.daysInMonth(a,r))),n.date(a,r,g)},isValid:function(n,t,i){this._validateLevel++;var a=this.hasYearZero||0!==n;if(a){var r=this.newDate(n,t,this.minDay);a=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(r)&&i>=this.minDay&&i-this.minDay<this.daysInMonth(r)}return this._validateLevel--,a},toJSDate:function(n,t,i){var a=this._validate(n,t,i,d.local.invalidDate||d.regionalOptions[""].invalidDate);return d.instance().fromJD(this.toJD(a)).toJSDate()},fromJSDate:function(n){return this.fromJD(d.instance().fromJSDate(n).toJD())},_validate:function(n,t,i,a){if(n.year){if(0===this._validateLevel&&this.name!==n.calendar().name)throw(d.local.differentCalendars||d.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,n.calendar().local.name);return n}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(n,t,i))throw a.replace(/\{0\}/,this.local.name);var r=this.newDate(n,t,i);return this._validateLevel--,r}catch(g){throw this._validateLevel--,g}}}),_(c.prototype=new e,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var t=this._validate(i,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear);return(i=t.year()+(t.year()<0?1:0))%4==0&&(i%100!=0||i%400==0)},weekOfYear:function(n,t,i){var a=this.newDate(n,t,i);return a.add(4-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(n,t){var i=this._validate(n,t,this.minDay,d.local.invalidMonth||d.regionalOptions[""].invalidMonth);return this.daysPerMonth[i.month()-1]+(2===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(n,t,i){return(this.dayOfWeek(n,t,i)||7)<6},toJD:function(n,t,i){var a=this._validate(n,t,i,d.local.invalidDate||d.regionalOptions[""].invalidDate);n=a.year(),t=a.month(),i=a.day(),n<0&&n++,t<3&&(t+=12,n--);var r=Math.floor(n/100),g=2-r+Math.floor(r/4);return Math.floor(365.25*(n+4716))+Math.floor(30.6001*(t+1))+i+g-1524.5},fromJD:function(n){var t=Math.floor(n+.5),i=Math.floor((t-1867216.25)/36524.25),a=1524+(i=t+1+i-Math.floor(i/4)),r=Math.floor((a-122.1)/365.25),g=Math.floor(365.25*r),s=Math.floor((a-g)/30.6001),b=a-g-Math.floor(30.6001*s),x=s-(s>13.5?13:1),S=r-(x>2.5?4716:4715);return S<=0&&S--,this.newDate(S,x,b)},toJSDate:function(n,t,i){var a=this._validate(n,t,i,d.local.invalidDate||d.regionalOptions[""].invalidDate),r=new Date(a.year(),a.month()-1,a.day());return r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0),r.setHours(r.getHours()>12?r.getHours()+2:0),r},fromJSDate:function(n){return this.newDate(n.getFullYear(),n.getMonth()+1,n.getDate())}});var d=ie.exports=new k;d.cdate=m,d.baseCalendar=e,d.calendars.gregorian=c},{"object-assign":247}],347:[function(v,ie,ae){var _=v("object-assign"),k=v("./main");_(k.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),k.local=k.regionalOptions[""],_(k.cdate.prototype,{formatDate:function(m,E){return"string"!=typeof m&&(E=m,m=""),this._calendar.formatDate(m||"",this,E)}}),_(k.baseCalendar.prototype,{UNIX_EPOCH:k.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:k.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(m,E,e){if("string"!=typeof m&&(e=E,E=m,m=""),!E)return"";if(E.calendar()!==this)throw k.local.invalidFormat||k.regionalOptions[""].invalidFormat;m=m||this.local.dateFormat;for(var c=(e=e||{}).dayNamesShort||this.local.dayNamesShort,d=e.dayNames||this.local.dayNames,n=e.monthNumbers||this.local.monthNumbers,t=e.monthNamesShort||this.local.monthNamesShort,i=e.monthNames||this.local.monthNames,r=function(T,M){for(var f=1;A+f<m.length&&m.charAt(A+f)===T;)f++;return A+=f-1,Math.floor(f/(M||1))>1},g=function(T,M,f,u){var h=""+M;if(r(T,u))for(;h.length<f;)h="0"+h;return h},b=this,x=function(T){return"function"==typeof n?n.call(b,T,r("m")):w(g("m",T.month(),2))},S=function(T,M){return M?"function"==typeof i?i.call(b,T):i[T.month()-b.minMonth]:"function"==typeof t?t.call(b,T):t[T.month()-b.minMonth]},p=this.local.digits,w=function(T){return e.localNumbers&&p?p(T):T},l="",y=!1,A=0;A<m.length;A++)if(y)"'"!==m.charAt(A)||r("'")?l+=m.charAt(A):y=!1;else switch(m.charAt(A)){case"d":l+=w(g("d",E.day(),2));break;case"D":l+=(T="D",M=E.dayOfWeek(),f=c,u=d,r(T)?u[M]:f[M]);break;case"o":l+=g("o",E.dayOfYear(),3);break;case"w":l+=g("w",E.weekOfYear(),2);break;case"m":l+=x(E);break;case"M":l+=S(E,r("M"));break;case"y":l+=r("y",2)?E.year():(E.year()%100<10?"0":"")+E.year()%100;break;case"Y":r("Y",2),l+=E.formatYear();break;case"J":l+=E.toJD();break;case"@":l+=(E.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":l+=(E.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":r("'")?l+="'":y=!0;break;default:l+=m.charAt(A)}var T,M,f,u;return l},parseDate:function(m,E,e){if(null==E)throw k.local.invalidArguments||k.regionalOptions[""].invalidArguments;if(""===(E="object"==typeof E?E.toString():E+""))return null;m=m||this.local.dateFormat;var c=(e=e||{}).shortYearCutoff||this.shortYearCutoff;c="string"!=typeof c?c:this.today().year()%100+parseInt(c,10);for(var d=e.dayNamesShort||this.local.dayNamesShort,n=e.dayNames||this.local.dayNames,t=e.parseMonth||this.local.parseMonth,i=e.monthNumbers||this.local.monthNumbers,a=e.monthNamesShort||this.local.monthNamesShort,r=e.monthNames||this.local.monthNames,g=-1,s=-1,b=-1,x=-1,S=-1,p=!1,w=!1,l=function(z,O){for(var I=1;o+I<m.length&&m.charAt(o+I)===z;)I++;return o+=I-1,Math.floor(I/(O||1))>1},y=function(z,O){var I=l(z,O),F=[2,3,I?4:2,I?4:2,10,11,20]["oyYJ@!".indexOf(z)+1],D=new RegExp("^-?\\d{1,"+F+"}"),N=E.substring(h).match(D);if(!N)throw(k.local.missingNumberAt||k.regionalOptions[""].missingNumberAt).replace(/\{0\}/,h);return h+=N[0].length,parseInt(N[0],10)},A=this,T=function(){if("function"==typeof i){l("m");var z=i.call(A,E.substring(h));return h+=z.length,z}return y("m")},M=function(z,O,I,F){for(var D=l(z,F)?I:O,N=0;N<D.length;N++)if(E.substr(h,D[N].length).toLowerCase()===D[N].toLowerCase())return h+=D[N].length,N+A.minMonth;throw(k.local.unknownNameAt||k.regionalOptions[""].unknownNameAt).replace(/\{0\}/,h)},f=function(){if("function"==typeof r){var z=l("M")?r.call(A,E.substring(h)):a.call(A,E.substring(h));return h+=z.length,z}return M("M",a,r)},u=function(){if(E.charAt(h)!==m.charAt(o))throw(k.local.unexpectedLiteralAt||k.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,h);h++},h=0,o=0;o<m.length;o++)if(w)"'"!==m.charAt(o)||l("'")?u():w=!1;else switch(m.charAt(o)){case"d":x=y("d");break;case"D":M("D",d,n);break;case"o":S=y("o");break;case"w":y("w");break;case"m":b=T();break;case"M":b=f();break;case"y":var C=o;p=!l("y",2),o=C,s=y("y",2);break;case"Y":s=y("Y",2);break;case"J":g=y("J")+.5,"."===E.charAt(h)&&(h++,y("J"));break;case"@":g=y("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":g=y("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":h=E.length;break;case"'":l("'")?u():w=!0;break;default:u()}if(h<E.length)throw k.local.unexpectedText||k.regionalOptions[""].unexpectedText;if(-1===s?s=this.today().year():s<100&&p&&(s+=-1===c?1900:this.today().year()-this.today().year()%100-(s<=c?0:100)),"string"==typeof b&&(b=t.call(this,s,b)),S>-1){x=S;for(var R=this.daysInMonth(s,b=1);x>R;R=this.daysInMonth(s,b))b++,x-=R}return g>-1?this.fromJD(g):this.newDate(s,b,x)},determineDate:function(m,E,e,c,d){e&&"object"!=typeof e&&(d=c,c=e,e=null),"string"!=typeof c&&(d=c,c="");var n=this;return E=E?E.newDate():null,null==m?E:"string"==typeof m?function(i){try{return n.parseDate(c,i,d)}catch(s){}for(var a=((i=i.toLowerCase()).match(/^c/)&&e?e.newDate():null)||n.today(),r=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,g=r.exec(i);g;)a.add(parseInt(g[1],10),g[2]||"d"),g=r.exec(i);return a}(m):"number"==typeof m?isNaN(m)||m===1/0||m===-1/0?E:n.today().add(m,"d"):n.newDate(m)}})},{"./main":346,"object-assign":247}],348:[function(v,ie,ae){"use strict";ie.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],349:[function(v,ie,ae){"use strict";var _=v("./arrow_paths"),k=v("../../plots/font_attributes"),m=v("../../plots/cartesian/constants"),E=v("../../plot_api/plot_template").templatedArray;v("../../constants/axis_placeable_objects"),ie.exports=E("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:_.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:_.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",m.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",m.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",m.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",m.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:k({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/font_attributes":585,"./arrow_paths":348}],350:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../plots/cartesian/axes"),m=v("./draw").draw;function E(c){_.filterVisible(c._fullLayout.annotations).forEach(function(n){var t=k.getFromId(c,n.xref),i=k.getFromId(c,n.yref),a=k.getRefType(n.xref),r=k.getRefType(n.yref);n._extremes={},"range"===a&&e(n,t),"range"===r&&e(n,i)})}function e(c,d){var T,n=d._id,t=n.charAt(0),i=c[t],a=c["a"+t],s=c["_"+t+"padplus"],b=c["_"+t+"padminus"],x={x:1,y:-1}[t]*c[t+"shift"],S=3*c.arrowsize*c.arrowwidth||0,p=S+x,w=S-x,l=3*c.startarrowsize*c.arrowwidth||0,y=l+x,A=l-x;if(c["a"+t+"ref"]===c[t+"ref"]){var M=k.findExtremes(d,[d.r2c(i)],{ppadplus:p,ppadminus:w}),f=k.findExtremes(d,[d.r2c(a)],{ppadplus:Math.max(s,y),ppadminus:Math.max(b,A)});T={min:[M.min[0],f.min[0]],max:[M.max[0],f.max[0]]}}else y=a?y+a:y,A=a?A-a:A,T=k.findExtremes(d,[d.r2c(i)],{ppadplus:Math.max(s,p,y),ppadminus:Math.max(b,w,A)});c._extremes[n]=T}ie.exports=function(d){if(_.filterVisible(d._fullLayout.annotations).length&&d._fullData.length)return _.syncOrAsync([m,E],d)}},{"../../lib":503,"../../plots/cartesian/axes":554,"./draw":355}],351:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../registry"),m=v("../../plot_api/plot_template").arrayEditor;function c(n,t){var b,x,S,p,w,l,y,i=n._fullLayout.annotations,a=[],r=[],g=[],s=(t||[]).length;for(b=0;b<i.length;b++)if(p=(S=i[b]).clicktoshow){for(x=0;x<s;x++)if(y=(w=t[x]).yaxis,(l=w.xaxis)._id===S.xref&&y._id===S.yref&&l.d2r(w.x)===d(S._xclick,l)&&y.d2r(w.y)===d(S._yclick,y)){(S.visible?"onout"===p?r:g:a).push(b);break}x===s&&S.visible&&"onout"===p&&r.push(b)}return{on:a,off:r,explicitOff:g}}function d(n,t){return"log"===t.type?t.l2r(n):t.d2r(n)}ie.exports={hasClickToShow:function E(n,t){var i=c(n,t);return i.on.length>0||i.explicitOff.length>0},onClick:function e(n,t){var b,x,i=c(n,t),a=i.on,r=i.off.concat(i.explicitOff),g={},s=n._fullLayout.annotations;if(a.length||r.length){for(b=0;b<a.length;b++)(x=m(n.layout,"annotations",s[a[b]])).modifyItem("visible",!0),_.extendFlat(g,x.getUpdateObj());for(b=0;b<r.length;b++)(x=m(n.layout,"annotations",s[r[b]])).modifyItem("visible",!1),_.extendFlat(g,x.getUpdateObj());return k.call("update",n,{},g)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638}],352:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../color");ie.exports=function(E,e,c,d){d("opacity");var n=d("bgcolor"),t=d("bordercolor"),i=k.opacity(t);d("borderpad");var a=d("borderwidth"),r=d("showarrow");if(d("text",r?" ":c._dfltTitle.annotation),d("textangle"),_.coerceFont(d,"font",c.font),d("width"),d("align"),d("height")&&d("valign"),r){var b,x,s=d("arrowside");-1!==s.indexOf("end")&&(b=d("arrowhead"),x=d("arrowsize")),-1!==s.indexOf("start")&&(d("startarrowhead",b),d("startarrowsize",x)),d("arrowcolor",i?e.bordercolor:k.defaultLine),d("arrowwidth",2*(i&&a||1)),d("standoff"),d("startstandoff")}var S=d("hovertext"),p=c.hoverlabel||{};if(S){var w=d("hoverlabel.bgcolor",p.bgcolor||(k.opacity(n)?k.rgb(n):k.defaultLine)),l=d("hoverlabel.bordercolor",p.bordercolor||k.contrast(w));_.coerceFont(d,"hoverlabel.font",{family:p.font.family,size:p.font.size,color:p.font.color||l})}d("captureevents",!!S)}},{"../../lib":503,"../color":366}],353:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../lib/to_log_range");ie.exports=function(E,e,c,d){e=e||{};var n="log"===c&&"linear"===e.type;if(n||"linear"===c&&"log"===e.type)for(var r,g,i=E._fullLayout.annotations,a=e._id.charAt(0),b=0;b<i.length;b++)g="annotations["+b+"].",(r=i[b])[a+"ref"]===e._id&&s(a),r["a"+a+"ref"]===e._id&&s("a"+a);function s(x){var S=r[x],p=null;p=n?k(S,e.range):Math.pow(10,S),_(p)||(p=null),d(g+x,p)}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],354:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../plots/cartesian/axes"),m=v("../../plots/array_container_defaults"),E=v("./common_defaults"),e=v("./attributes");function c(d,n,t){function i(u,h){return _.coerce(d,n,e,u,h)}var a=i("visible"),r=i("clicktoshow");if(a||r){E(d,n,t,i);for(var g=n.showarrow,s=["x","y"],b=[-10,-30],x={_fullLayout:t},S=0;S<2;S++){var p=s[S],w=k.coerceRef(d,n,x,p,"","paper");if("paper"!==w&&k.getFromId(x,w)._annIndices.push(n._index),k.coercePosition(n,x,i,w,p,.5),g){var y="a"+p,A=k.coerceRef(d,n,x,y,"pixel",["pixel","paper"]);"pixel"!==A&&A!==w&&(A=n[y]="pixel"),k.coercePosition(n,x,i,A,y,"pixel"===A?b[S]:.4)}i(p+"anchor"),i(p+"shift")}if(_.noneOrAll(d,n,["x","y"]),g&&_.noneOrAll(d,n,["ax","ay"]),r){var M=i("xclick"),f=i("yclick");n._xclick=void 0===M?n.x:k.cleanPosition(M,x,n.xref),n._yclick=void 0===f?n.y:k.cleanPosition(f,x,n.yref)}}}ie.exports=function(n,t){m(n,t,{name:"annotations",handleItemDefaults:c})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":349,"./common_defaults":352}],355:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../registry"),m=v("../../plots/plots"),E=v("../../lib"),e=E.strTranslate,c=v("../../plots/cartesian/axes"),d=v("../color"),n=v("../drawing"),t=v("../fx"),i=v("../../lib/svg_text_utils"),a=v("../../lib/setcursor"),r=v("../dragelement"),g=v("../../plot_api/plot_template").arrayEditor,s=v("./draw_arrow_head");function x(w,l){var A=w._fullLayout.annotations[l]||{},T=c.getFromId(w,A.xref),M=c.getFromId(w,A.yref);T&&T.setScale(),M&&M.setScale(),p(w,A,l,!1,T,M)}function S(w,l,y,A,T){var M=T[y],f=T[y+"ref"],u=-1!==y.indexOf("y"),h="domain"===c.getRefType(f),o=u?A.h:A.w;return w?h?M+(u?-l:l)/w._length:w.p2r(w.r2p(M)+l):M+(u?-l:l)/o}function p(w,l,y,A,T,M){var o,C,f=w._fullLayout,u=w._fullLayout._size,h=w._context.edits;A?(o="annotation-"+A,C=A+".annotations"):(o="annotation",C="annotations");var R=g(w.layout,C,l),z=R.modifyBase,O=R.modifyItem,I=R.getUpdateObj;f._infolayer.selectAll("."+o+'[data-index="'+y+'"]').remove();var F="clip"+f._uid+"_ann"+y;if(l._input&&!1!==l.visible){var D={x:{},y:{}},N=+l.textangle||0,U=f._infolayer.append("g").classed(o,!0).attr("data-index",String(y)).style("opacity",l.opacity),X=U.append("g").classed("annotation-text-g",!0),oe=h[l.showarrow?"annotationTail":"annotationPosition"],se=l.captureevents||h.annotationText||oe,W=X.append("g").style("pointer-events",se?"all":null).call(a,"pointer").on("click",function(){w._dragging=!1,w.emit("plotly_clickannotation",ne(_.event))});l.hovertext&&W.on("mouseover",function(){var le=l.hoverlabel,ge=le.font,pe=this.getBoundingClientRect(),xe=w.getBoundingClientRect();t.loneHover({x0:pe.left-xe.left,x1:pe.right-xe.left,y:(pe.top+pe.bottom)/2-xe.top,text:l.hovertext,color:le.bgcolor,borderColor:le.bordercolor,fontFamily:ge.family,fontSize:ge.size,fontColor:ge.color},{container:f._hoverlayer.node(),outerContainer:f._paper.node(),gd:w})}).on("mouseout",function(){t.loneUnhover(f._hoverlayer.node())});var G=l.borderwidth,V=G+l.borderpad,H=W.append("rect").attr("class","bg").style("stroke-width",G+"px").call(d.stroke,l.bordercolor).call(d.fill,l.bgcolor),q=l.width||l.height,K=f._topclips.selectAll("#"+F).data(q?[0]:[]);K.enter().append("clipPath").classed("annclip",!0).attr("id",F).append("rect"),K.exit().remove();var Y=l.font,te=f._meta?E.templateString(l.text,f._meta):l.text,J=W.append("text").classed("annotation-text",!0).text(te);h.annotationText?J.call(i.makeEditable,{delegate:W,gd:w}).call(j).on("edit",function(le){l.text=le,this.call(j),O("text",le),T&&T.autorange&&z(T._name+".autorange",!0),M&&M.autorange&&z(M._name+".autorange",!0),k.call("_guiRelayout",w,I())}):J.call(j)}else _.selectAll("#"+F).remove();function ne(le){var ge={index:y,annotation:l._input,fullAnnotation:l,event:le};return A&&(ge.subplotId=A),ge}function j(le){return le.call(n.font,Y).attr({"text-anchor":{left:"start",right:"end"}[l.align]||"middle"}),i.convertToTspans(le,w,re),le}function re(){var le=J.selectAll("a");1===le.size()&&le.text()===J.text()&&W.insert("a",":first-child").attr({"xlink:xlink:href":le.attr("xlink:href"),"xlink:xlink:show":le.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(H.node());var pe=W.select(".annotation-text-math-group"),xe=!pe.empty(),ke=n.bBox((xe?pe:J).node()),we=ke.width,de=ke.height,be=l.width||we,Le=l.height||de,De=Math.round(be+2*V),ye=Math.round(Le+2*V);function Ce(Yt,qt){return"auto"===qt&&(qt=Yt<1/3?"left":Yt>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[qt]}for(var Fe=!1,Ke=["x","y"],Ue=0;Ue<Ke.length;Ue++){var vt,Qe,Pe,Ze,Xe,Be=Ke[Ue],Ie=l[Be+"ref"]||Be,nt=l["a"+Be+"ref"],gt={x:T,y:M}[Be],Nt=(N+("x"===Be?0:-90))*Math.PI/180,St=De*Math.cos(Nt),Bt=ye*Math.sin(Nt),Zt=Math.abs(St)+Math.abs(Bt),Et=l[Be+"anchor"],wt=l[Be+"shift"]*("x"===Be?1:-1),at=D[Be],rt=c.getRefType(Ie);if(gt&&"domain"!==rt){var kt=gt.r2fraction(l[Be]);(kt<0||kt>1)&&(nt===Ie?((kt=gt.r2fraction(l["a"+Be]))<0||kt>1)&&(Fe=!0):Fe=!0),vt=gt._offset+gt.r2p(l[Be]),Ze=.5}else{var Tt="domain"===rt;"x"===Be?(Pe=l[Be],vt=Tt?gt._offset+gt._length*Pe:vt=u.l+u.w*Pe):(Pe=1-l[Be],vt=Tt?gt._offset+gt._length*Pe:vt=u.t+u.h*Pe),Ze=l.showarrow?.5:Pe}if(l.showarrow){at.head=vt;var Xt=l["a"+Be];if(Xe=St*Ce(.5,l.xanchor)-Bt*Ce(.5,l.yanchor),nt===Ie){var ar=c.getRefType(nt);"domain"===ar?("y"===Be&&(Xt=1-Xt),at.tail=gt._offset+gt._length*Xt):at.tail="paper"===ar?"y"===Be?u.t+u.h*(Xt=1-Xt):u.l+u.w*Xt:gt._offset+gt.r2p(Xt),Qe=Xe}else at.tail=vt+Xt,Qe=Xe+Xt;at.text=at.tail+Xe;var Ut=f["x"===Be?"width":"height"];if("paper"===Ie&&(at.head=E.constrain(at.head,1,Ut-1)),"pixel"===nt){var Jt=-Math.max(at.tail-3,at.text),nr=Math.min(at.tail+3,at.text)-Ut;Jt>0?(at.tail+=Jt,at.text+=Jt):nr>0&&(at.tail-=nr,at.text-=nr)}at.tail+=wt,at.head+=wt}else Qe=Xe=Zt*Ce(Ze,Et),at.text=vt+Xe;at.text+=wt,Xe+=wt,l["_"+Be+"padplus"]=Zt/2+(Qe+=wt),l["_"+Be+"padminus"]=Zt/2-Qe,l["_"+Be+"size"]=Zt,l["_"+Be+"shift"]=Xe}if(Fe)W.remove();else{var rr=0,br=0;"left"!==l.align&&(rr=(be-we)*("center"===l.align?.5:1)),"top"!==l.valign&&(br=(Le-de)*("middle"===l.valign?.5:1)),xe?pe.select("svg").attr({x:V+rr-1,y:V+br}).call(n.setClipUrl,q?F:null,w):J.call(i.positionText,V+rr-ke.left,V+br-ke.top).call(n.setClipUrl,q?F:null,w),K.select("rect").call(n.setRect,V,V,be,Le),H.call(n.setRect,G/2,G/2,De-G,ye-G),W.call(n.setTranslate,Math.round(D.x.text-De/2),Math.round(D.y.text-ye/2)),X.attr({transform:"rotate("+N+","+D.x.text+","+D.y.text+")"});var et,jr=function(Yt,qt){U.selectAll(".annotation-arrow-g").remove();var Vt=D.x.head,Tr=D.y.head,tt=D.x.tail+Yt,je=D.y.tail+qt,ct=D.x.text+Yt,ht=D.y.text+qt,Me=E.rotationXYMatrix(N,ct,ht),Se=E.apply2DTransform(Me),Je=E.apply2DTransform2(Me),We=+H.attr("width"),st=+H.attr("height"),lt=ct-.5*We,pt=lt+We,Ct=ht-.5*st,Dt=Ct+st,Gt=[[lt,Ct,lt,Dt],[lt,Dt,pt,Dt],[pt,Dt,pt,Ct],[pt,Ct,lt,Ct]].map(Je);if(!Gt.reduce(function(it,It){return it^!!E.segmentsIntersect(Vt,Tr,Vt+1e6,Tr+1e6,It[0],It[1],It[2],It[3])},!1)){Gt.forEach(function(it){var It=E.segmentsIntersect(tt,je,Vt,Tr,it[0],it[1],it[2],it[3]);It&&(tt=It.x,je=It.y)});var fr=l.arrowwidth,pr=l.arrowcolor,Jr=l.arrowside,Lr=U.append("g").style({opacity:d.opacity(pr)}).classed("annotation-arrow-g",!0),Ar=Lr.append("path").attr("d","M"+tt+","+je+"L"+Vt+","+Tr).style("stroke-width",fr+"px").call(d.stroke,d.rgb(pr));if(s(Ar,Jr,l),h.annotationPosition&&Ar.node().parentNode&&!A){var en=Vt,mr=Tr;if(l.standoff){var wr=Math.sqrt(Math.pow(Vt-tt,2)+Math.pow(Tr-je,2));en+=l.standoff*(tt-Vt)/wr,mr+=l.standoff*(je-Tr)/wr}var Kr,Cr,Wr=Lr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(tt-en)+","+(je-mr),transform:e(en,mr)}).style("stroke-width",fr+6+"px").call(d.stroke,"rgba(0,0,0,0)").call(d.fill,"rgba(0,0,0,0)");r.init({element:Wr.node(),gd:w,prepFn:function(){var it=n.getTranslate(W);Kr=it.x,Cr=it.y,T&&T.autorange&&z(T._name+".autorange",!0),M&&M.autorange&&z(M._name+".autorange",!0)},moveFn:function(it,It){var Qt=Se(Kr,Cr),ir=Qt[0]+it,Or=Qt[1]+It;W.call(n.setTranslate,ir,Or),O("x",S(T,it,"x",u,l)),O("y",S(M,It,"y",u,l)),l.axref===l.xref&&O("ax",S(T,it,"ax",u,l)),l.ayref===l.yref&&O("ay",S(M,It,"ay",u,l)),Lr.attr("transform",e(it,It)),X.attr({transform:"rotate("+N+","+ir+","+Or+")"})},doneFn:function(){k.call("_guiRelayout",w,I());var it=document.querySelector(".js-notes-box-panel");it&&it.redraw(it.selectedObj)}})}}};l.showarrow&&jr(0,0),oe&&r.init({element:W.node(),gd:w,prepFn:function(){et=X.attr("transform")},moveFn:function(Yt,qt){var Vt="pointer";if(l.showarrow)O("ax",l.axref===l.xref?S(T,Yt,"ax",u,l):l.ax+Yt),O("ay",l.ayref===l.yref?S(M,qt,"ay",u.w,l):l.ay+qt),jr(Yt,qt);else{if(A)return;var Tr,tt;if(T)Tr=S(T,Yt,"x",u,l);else{var je=l._xsize/u.w;Tr=r.align(l.x+(l._xshift-l.xshift)/u.w-je/2+Yt/u.w,je,0,1,l.xanchor)}if(M)tt=S(M,qt,"y",u,l);else{var ht=l._ysize/u.h;tt=r.align(l.y-(l._yshift+l.yshift)/u.h-ht/2-qt/u.h,ht,0,1,l.yanchor)}O("x",Tr),O("y",tt),(!T||!M)&&(Vt=r.getCursor(T?.5:Tr,M?.5:tt,l.xanchor,l.yanchor))}X.attr({transform:e(Yt,qt)+et}),a(W,Vt)},clickFn:function(Yt,qt){l.captureevents&&w.emit("plotly_clickannotation",ne(qt))},doneFn:function(){a(W),k.call("_guiRelayout",w,I());var Yt=document.querySelector(".js-notes-box-panel");Yt&&Yt.redraw(Yt.selectedObj)}})}}}ie.exports={draw:function b(w){var l=w._fullLayout;l._infolayer.selectAll(".annotation").remove();for(var y=0;y<l.annotations.length;y++)l.annotations[y].visible&&x(w,y);return m.previousPromises(w)},drawOne:x,drawRaw:p}},{"../../lib":503,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../fx":406,"./draw_arrow_head":356,"@plotly/d3":58}],356:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../color"),m=v("./arrow_paths"),E=v("../../lib"),e=E.strScale,c=E.strRotate,d=E.strTranslate;ie.exports=function(t,i,a){var y,A,T,M,r=t.node(),g=m[a.arrowhead||0],s=m[a.startarrowhead||0],b=(a.arrowwidth||1)*(a.arrowsize||1),x=(a.arrowwidth||1)*(a.startarrowsize||1),S=i.indexOf("start")>=0,p=i.indexOf("end")>=0,w=g.backoff*b+a.standoff,l=s.backoff*x+a.startstandoff;if("line"===r.nodeName){y={x:+t.attr("x1"),y:+t.attr("y1")},A={x:+t.attr("x2"),y:+t.attr("y2")};var f=y.x-A.x,u=y.y-A.y;if(M=(T=Math.atan2(u,f))+Math.PI,w&&l&&w+l>Math.sqrt(f*f+u*u))return void X();if(w){if(w*w>f*f+u*u)return void X();var h=w*Math.cos(T),o=w*Math.sin(T);A.x+=h,A.y+=o,t.attr({x2:A.x,y2:A.y})}if(l){if(l*l>f*f+u*u)return void X();var C=l*Math.cos(T),R=l*Math.sin(T);y.x-=C,y.y-=R,t.attr({x1:y.x,y1:y.y})}}else if("path"===r.nodeName){var z=r.getTotalLength(),O="";if(z<w+l)return void X();var I=r.getPointAtLength(0),F=r.getPointAtLength(.1);T=Math.atan2(I.y-F.y,I.x-F.x),y=r.getPointAtLength(Math.min(l,z)),O="0px,"+l+"px,";var D=r.getPointAtLength(z),N=r.getPointAtLength(z-.1);M=Math.atan2(D.y-N.y,D.x-N.x),A=r.getPointAtLength(Math.max(0,z-w)),t.style("stroke-dasharray",O+=z-(O?l+w:w)+"px,"+z+"px")}function X(){t.style("stroke-dasharray","0px,100px")}function oe(se,ne,W,G){!se.path||(se.noRotate&&(W=0),_.select(r.parentNode).append("path").attr({class:t.attr("class"),d:se.path,transform:d(ne.x,ne.y)+c(180*W/Math.PI)+e(G)}).style({fill:k.rgb(a.arrowcolor),"stroke-width":0}))}S&&oe(s,y,T,x),p&&oe(g,A,M,b)}},{"../../lib":503,"../color":366,"./arrow_paths":348,"@plotly/d3":58}],357:[function(v,ie,ae){"use strict";var _=v("./draw"),k=v("./click");ie.exports={moduleType:"component",name:"annotations",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),includeBasePlot:v("../../plots/cartesian/include_components")("annotations"),calcAutorange:v("./calc_autorange"),draw:_.draw,drawOne:_.drawOne,drawRaw:_.drawRaw,hasClickToShow:k.hasClickToShow,onClick:k.onClick,convertCoords:v("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":349,"./calc_autorange":350,"./click":351,"./convert_coords":353,"./defaults":354,"./draw":355}],358:[function(v,ie,ae){"use strict";var _=v("../annotations/attributes"),k=v("../../plot_api/edit_types").overrideAll,m=v("../../plot_api/plot_template").templatedArray;ie.exports=k(m("annotation",{visible:_.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:_.xanchor,xshift:_.xshift,yanchor:_.yanchor,yshift:_.yshift,text:_.text,textangle:_.textangle,font:_.font,width:_.width,height:_.height,opacity:_.opacity,align:_.align,valign:_.valign,bgcolor:_.bgcolor,bordercolor:_.bordercolor,borderpad:_.borderpad,borderwidth:_.borderwidth,showarrow:_.showarrow,arrowcolor:_.arrowcolor,arrowhead:_.arrowhead,startarrowhead:_.startarrowhead,arrowside:_.arrowside,arrowsize:_.arrowsize,startarrowsize:_.startarrowsize,arrowwidth:_.arrowwidth,standoff:_.standoff,startstandoff:_.startstandoff,hovertext:_.hovertext,hoverlabel:_.hoverlabel,captureevents:_.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../annotations/attributes":349}],359:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../plots/cartesian/axes");function m(E,e){var d=e.fullSceneLayout.domain,n=e.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};E._xa={},_.extendFlat(E._xa,t),k.setConvert(E._xa),E._xa._offset=n.l+d.x[0]*n.w,E._xa.l2p=function(){return.5*(1+E._pdata[0]/E._pdata[3])*n.w*(d.x[1]-d.x[0])},E._ya={},_.extendFlat(E._ya,t),k.setConvert(E._ya),E._ya._offset=n.t+(1-d.y[1])*n.h,E._ya.l2p=function(){return.5*(1-E._pdata[1]/E._pdata[3])*n.h*(d.y[1]-d.y[0])}}ie.exports=function(e){for(var d=e.fullSceneLayout.annotations,n=0;n<d.length;n++)m(d[n],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()}},{"../../lib":503,"../../plots/cartesian/axes":554}],360:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../plots/cartesian/axes"),m=v("../../plots/array_container_defaults"),E=v("../annotations/common_defaults"),e=v("./attributes");function c(d,n,t,i){function a(s,b){return _.coerce(d,n,e,s,b)}function r(s){var b=s+"axis",x={_fullLayout:{}};return x._fullLayout[b]=t[b],k.coercePosition(n,x,a,s,s,.5)}!a("visible")||(E(d,n,i.fullLayout,a),r("x"),r("y"),r("z"),_.noneOrAll(d,n,["x","y","z"]),n.xref="x",n.yref="y",n.zref="z",a("xanchor"),a("yanchor"),a("xshift"),a("yshift"),n.showarrow&&(n.axref="pixel",n.ayref="pixel",a("ax",-10),a("ay",-30),_.noneOrAll(d,n,["ax","ay"])))}ie.exports=function(n,t,i){m(n,t,{name:"annotations",handleItemDefaults:c,fullLayout:i.fullLayout})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../annotations/common_defaults":352,"./attributes":358}],361:[function(v,ie,ae){"use strict";var _=v("../annotations/draw").drawRaw,k=v("../../plots/gl3d/project"),m=["x","y","z"];ie.exports=function(e){for(var c=e.fullSceneLayout,d=e.dataScale,n=c.annotations,t=0;t<n.length;t++){for(var i=n[t],a=!1,r=0;r<3;r++){var g=m[r],x=c[g+"axis"].r2fraction(i[g]);if(x<0||x>1){a=!0;break}}a?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+t+'"]').remove():(i._pdata=k(e.glplot.cameraParams,[c.xaxis.r2l(i.x)*d[0],c.yaxis.r2l(i.y)*d[1],c.zaxis.r2l(i.z)*d[2]]),_(e.graphDiv,i,t,e.id,i._xa,i._ya))}}},{"../../plots/gl3d/project":607,"../annotations/draw":355}],362:[function(v,ie,ae){"use strict";var _=v("../../registry"),k=v("../../lib");ie.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:v("./attributes")}}},layoutAttributes:v("./attributes"),handleDefaults:v("./defaults"),includeBasePlot:function m(E,e){var c=_.subplotsRegistry.gl3d;if(c)for(var d=c.attrRegex,n=Object.keys(E),t=0;t<n.length;t++){var i=n[t];d.test(i)&&(E[i].annotations||[]).length&&(k.pushUnique(e._basePlotModules,c),k.pushUnique(e._subplots.gl3d,i))}},convert:v("./convert"),draw:v("./draw")}},{"../../lib":503,"../../registry":638,"./attributes":358,"./convert":359,"./defaults":360,"./draw":361}],363:[function(v,ie,ae){"use strict";ie.exports=v("world-calendars/dist/main"),v("world-calendars/dist/plus"),v("world-calendars/dist/calendars/chinese"),v("world-calendars/dist/calendars/coptic"),v("world-calendars/dist/calendars/discworld"),v("world-calendars/dist/calendars/ethiopian"),v("world-calendars/dist/calendars/hebrew"),v("world-calendars/dist/calendars/islamic"),v("world-calendars/dist/calendars/julian"),v("world-calendars/dist/calendars/mayan"),v("world-calendars/dist/calendars/nanakshahi"),v("world-calendars/dist/calendars/nepali"),v("world-calendars/dist/calendars/persian"),v("world-calendars/dist/calendars/taiwan"),v("world-calendars/dist/calendars/thai"),v("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":332,"world-calendars/dist/calendars/coptic":333,"world-calendars/dist/calendars/discworld":334,"world-calendars/dist/calendars/ethiopian":335,"world-calendars/dist/calendars/hebrew":336,"world-calendars/dist/calendars/islamic":337,"world-calendars/dist/calendars/julian":338,"world-calendars/dist/calendars/mayan":339,"world-calendars/dist/calendars/nanakshahi":340,"world-calendars/dist/calendars/nepali":341,"world-calendars/dist/calendars/persian":342,"world-calendars/dist/calendars/taiwan":343,"world-calendars/dist/calendars/thai":344,"world-calendars/dist/calendars/ummalqura":345,"world-calendars/dist/main":346,"world-calendars/dist/plus":347}],364:[function(v,ie,ae){"use strict";var _=v("./calendars"),k=v("../../lib"),m=v("../../constants/numerical"),E=m.EPOCHJD,e=m.ONEDAY,c={valType:"enumerated",values:k.sortObjectKeys(_.calendars),editType:"calc",dflt:"gregorian"},d=function(T,M,f,u){var h={};return h[f]=c,k.coerce(T,M,h,f,u)},r="##",g={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:r,w:r,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};var b={};function x(T){var M=b[T];return M||(b[T]=_.instance(T))}function S(T){return k.extendFlat({},c,{description:T})}function p(T){return"Sets the calendar system to use with `"+T+"` date data."}var w={xcalendar:S(p("x"))},l=k.extendFlat({},w,{ycalendar:S(p("y"))}),y=k.extendFlat({},l,{zcalendar:S(p("z"))}),A=S(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));ie.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:l,bar:l,box:l,heatmap:l,contour:l,histogram:l,histogram2d:l,histogram2dcontour:l,scatter3d:y,surface:y,mesh3d:y,scattergl:l,ohlc:w,candlestick:w},layout:{calendar:S(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:A},yaxis:{calendar:A},scene:{xaxis:{calendar:A},yaxis:{calendar:A},zaxis:{calendar:A}},polar:{radialaxis:{calendar:A}}},transforms:{filter:{valuecalendar:S(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:S(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:c,handleDefaults:d,handleTraceDefaults:function(T,M,f,u){for(var h=0;h<f.length;h++)d(T,M,f[h]+"calendar",u.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:x,worldCalFmt:function s(T,M,f){for(var C,R,z,O,I,u=Math.floor((M+.05)/e)+E,h=x(f).fromJD(u),o=0;-1!==(o=T.indexOf("%",o));)"0"===(C=T.charAt(o+1))||"-"===C||"_"===C?(z=3,R=T.charAt(o+2),"_"===C&&(C="-")):(R=C,C="0",z=2),(O=g[R])?(I=O===r?r:h.formatDate(O[C]),T=T.substr(0,o)+I+T.substr(o+z),o+=I.length):o+=z;return T}}},{"../../constants/numerical":479,"../../lib":503,"./calendars":363}],365:[function(v,ie,ae){"use strict";ae.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],ae.defaultLine="#444",ae.lightLine="#eee",ae.background="#fff",ae.borderLine="#BEC8D9",ae.lightFraction=1e3/11},{}],366:[function(v,ie,ae){"use strict";var _=v("tinycolor2"),k=v("fast-isnumeric"),m=v("../../lib/array").isTypedArray,E=ie.exports={},e=v("./attributes");E.defaults=e.defaults;var c=E.defaultLine=e.defaultLine;E.lightLine=e.lightLine;var d=E.background=e.background;function n(t){if(k(t)||"string"!=typeof t)return t;var i=t.trim();if("rgb"!==i.substr(0,3))return t;var a=i.match(/^rgba?\s*\(([^()]*)\)$/);if(!a)return t;var r=a[1].trim().split(/\s*[\s,]\s*/),g="a"===i.charAt(3)&&4===r.length;if(!g&&3!==r.length)return t;for(var s=0;s<r.length;s++){if(!(r[s].length&&(r[s]=Number(r[s]),r[s]>=0)))return t;if(3===s)r[s]>1&&(r[s]=1);else if(r[s]>=1)return t}var b=Math.round(255*r[0])+", "+Math.round(255*r[1])+", "+Math.round(255*r[2]);return g?"rgba("+b+", "+r[3]+")":"rgb("+b+")"}E.tinyRGB=function(t){var i=t.toRgb();return"rgb("+Math.round(i.r)+", "+Math.round(i.g)+", "+Math.round(i.b)+")"},E.rgb=function(t){return E.tinyRGB(_(t))},E.opacity=function(t){return t?_(t).getAlpha():0},E.addOpacity=function(t,i){var a=_(t).toRgb();return"rgba("+Math.round(a.r)+", "+Math.round(a.g)+", "+Math.round(a.b)+", "+i+")"},E.combine=function(t,i){var a=_(t).toRgb();if(1===a.a)return _(t).toRgbString();var r=_(i||d).toRgb(),g=1===r.a?r:{r:255*(1-r.a)+r.r*r.a,g:255*(1-r.a)+r.g*r.a,b:255*(1-r.a)+r.b*r.a};return _({r:g.r*(1-a.a)+a.r*a.a,g:g.g*(1-a.a)+a.g*a.a,b:g.b*(1-a.a)+a.b*a.a}).toRgbString()},E.contrast=function(t,i,a){var r=_(t);return 1!==r.getAlpha()&&(r=_(E.combine(t,d))),(r.isDark()?i?r.lighten(i):d:a?r.darken(a):c).toString()},E.stroke=function(t,i){var a=_(i);t.style({stroke:E.tinyRGB(a),"stroke-opacity":a.getAlpha()})},E.fill=function(t,i){var a=_(i);t.style({fill:E.tinyRGB(a),"fill-opacity":a.getAlpha()})},E.clean=function(t){if(t&&"object"==typeof t){var a,r,g,s,i=Object.keys(t);for(a=0;a<i.length;a++)if(s=t[g=i[a]],"color"===g.substr(g.length-5))if(Array.isArray(s))for(r=0;r<s.length;r++)s[r]=n(s[r]);else t[g]=n(s);else if("colorscale"===g.substr(g.length-10)&&Array.isArray(s))for(r=0;r<s.length;r++)Array.isArray(s[r])&&(s[r][1]=n(s[r][1]));else if(Array.isArray(s)){var b=s[0];if(!Array.isArray(b)&&b&&"object"==typeof b)for(r=0;r<s.length;r++)E.clean(s[r])}else s&&"object"==typeof s&&!m(s)&&E.clean(s)}}},{"../../lib/array":485,"./attributes":365,"fast-isnumeric":190,tinycolor2:312}],367:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/layout_attributes"),k=v("../../plots/font_attributes"),m=v("../../lib/extend").extendFlat,E=v("../../plot_api/edit_types").overrideAll;ie.exports=E({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:_.linecolor,outlinewidth:_.linewidth,bordercolor:_.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:_.tickmode,nticks:_.nticks,tick0:_.tick0,dtick:_.dtick,tickvals:_.tickvals,ticktext:_.ticktext,ticks:m({},_.ticks,{dflt:""}),ticklabeloverflow:m({},_.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:_.ticklen,tickwidth:_.tickwidth,tickcolor:_.tickcolor,ticklabelstep:_.ticklabelstep,showticklabels:_.showticklabels,tickfont:k({}),tickangle:_.tickangle,tickformat:_.tickformat,tickformatstops:_.tickformatstops,tickprefix:_.tickprefix,showtickprefix:_.showtickprefix,ticksuffix:_.ticksuffix,showticksuffix:_.showticksuffix,separatethousands:_.separatethousands,exponentformat:_.exponentformat,minexponent:_.minexponent,showexponent:_.showexponent,title:{text:{valType:"string"},font:k({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:k({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],368:[function(v,ie,ae){"use strict";ie.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],369:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../plot_api/plot_template"),m=v("../../plots/cartesian/tick_value_defaults"),E=v("../../plots/cartesian/tick_mark_defaults"),e=v("../../plots/cartesian/tick_label_defaults"),c=v("../../plots/cartesian/prefix_suffix_defaults"),d=v("./attributes");ie.exports=function(t,i,a){var r=k.newContainer(i,"colorbar"),g=t.colorbar||{};function s(h,o){return _.coerce(g,r,d,h,o)}var b=a.margin||{t:0,b:0,l:0,r:0},x=a.width-b.l-b.r,S=a.height-b.t-b.b,w="v"===s("orientation"),l=s("thicknessmode");s("thickness","fraction"===l?30/(w?x:S):30);var y=s("lenmode");s("len","fraction"===y?1:w?S:x),s("x",w?1.02:.5),s("xanchor",w?"left":"center"),s("xpad"),s("y",w?.5:1.02),s("yanchor",w?"middle":"bottom"),s("ypad"),_.noneOrAll(g,r,["x","y"]),s("outlinecolor"),s("outlinewidth"),s("bordercolor"),s("borderwidth"),s("bgcolor");var A=_.coerce(g,r,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:w?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");s("ticklabeloverflow",-1!==A.indexOf("inside")?"hide past domain":"hide past div"),m(g,r,s,"linear");var T=a.font,M={outerTicks:!1,font:T};-1!==A.indexOf("inside")&&(M.bgColor="black"),c(g,r,s,"linear",M),e(g,r,s,"linear",M),E(g,r,s,"linear",M),s("title.text",a._dfltTitle.colorbar);var f=r.tickfont,u=_.extendFlat({},f,{color:T.color,size:_.bigFont(f.size)});_.coerceFont(s,"title.font",u),s("title.side",w?"top":"right")}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"./attributes":367}],370:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("tinycolor2"),m=v("../../plots/plots"),E=v("../../registry"),e=v("../../plots/cartesian/axes"),c=v("../dragelement"),d=v("../../lib"),n=d.strTranslate,t=v("../../lib/extend").extendFlat,i=v("../../lib/setcursor"),a=v("../drawing"),r=v("../color"),g=v("../titles"),s=v("../../lib/svg_text_utils"),b=v("../colorscale/helpers").flipScale,x=v("../../plots/cartesian/axis_defaults"),S=v("../../plots/cartesian/position_defaults"),p=v("../../plots/cartesian/layout_attributes"),w=v("../../constants/alignment"),l=w.LINE_SPACING,y=w.FROM_TL,A=w.FROM_BR,T=v("./constants").cn;ie.exports={draw:function M(R){var O=R._fullLayout._infolayer.selectAll("g."+T.colorbar).data(function f(R){var F,D,N,U,z=R._fullLayout,O=R.calcdata,I=[];function X(Y){return t(Y,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function oe(){"function"==typeof U.calc?U.calc(R,N,F):(F._fillgradient=D.reversescale?b(D.colorscale):D.colorscale,F._zrange=[D[U.min],D[U.max]])}for(var se=0;se<O.length;se++){var W=(N=O[se][0].trace)._module.colorbar;if(!0===N.visible&&W)for(var G=Array.isArray(W),$=G?W:[W],V=0;V<$.length;V++){var H=(U=$[V]).container;(D=H?N[H]:N)&&D.showscale&&((F=X(D.colorbar))._id="cb"+N.uid+(G&&H?"-"+H:""),F._traceIndex=N.index,F._propPrefix=(H?H+".":"")+"colorbar.",F._meta=N._meta,oe(),I.push(F))}}for(var q in z._colorAxes)if((D=z[q]).showscale){var K=z._colorAxes[q];(F=X(D.colorbar))._id="cb"+q,F._propPrefix=q+".colorbar.",F._meta=z._meta,U={min:"cmin",max:"cmax"},"heatmap"!==K[0]&&(U.calc=(N=K[1])._module.colorbar.calc),oe(),I.push(F)}return I}(R),function(I){return I._id});O.enter().append("g").attr("class",function(I){return I._id}).classed(T.colorbar,!0),O.each(function(I){var F=_.select(this);d.ensureSingle(F,"rect",T.cbbg),d.ensureSingle(F,"g",T.cbfills),d.ensureSingle(F,"g",T.cblines),d.ensureSingle(F,"g",T.cbaxis,function(N){N.classed(T.crisp,!0)}),d.ensureSingle(F,"g",T.cbtitleunshift,function(N){N.append("g").classed(T.cbtitle,!0)}),d.ensureSingle(F,"rect",T.cboutline);var D=function u(R,z,O){var I="v"===z.orientation,F=z.len,D=z.lenmode,N=z.thickness,U=z.thicknessmode,X=z.outlinewidth,oe=z.borderwidth,se=z.bgcolor,ne=z.xanchor,W=z.yanchor,G=z.xpad,$=z.ypad,V=z.x,H=I?z.y:1-z.y,q=O._fullLayout,K=q._size,Y=z._fillcolor,te=z._line,J=z.title,j=J.side,re=z._zrange||_.extent(("function"==typeof Y?Y:te.color).domain()),le="function"==typeof te.color?te.color:function(){return te.color},ge="function"==typeof Y?Y:function(){return Y},pe=z._levels,xe=function o(R,z,O){var N,U,I=z._levels,F=[],D=[],X=I.end+I.size/100,oe=I.size,se=1.001*O[0]-.001*O[1],ne=1.001*O[1]-.001*O[0];for(U=0;U<1e5&&(N=I.start+U*oe,!(oe>0?N>=X:N<=X));U++)N>se&&N<ne&&F.push(N);if(z._fillgradient)D=[0];else if("function"==typeof z._fillcolor){var W=z._filllevels;if(W)for(X=W.end+W.size/100,oe=W.size,U=0;U<1e5&&(N=W.start+U*oe,!(oe>0?N>=X:N<=X));U++)N>O[0]&&N<O[1]&&D.push(N);else(D=F.map(function(G){return G-I.size/2})).push(D[D.length-1]+I.size)}else z._fillcolor&&"string"==typeof z._fillcolor&&(D=[0]);return I.size<0&&(F.reverse(),D.reverse()),{line:F,fill:D}}(0,z,re),ke=xe.fill,we=xe.line,de=Math.round(N*("fraction"===U?I?K.w:K.h:1)),be=de/(I?K.w:K.h),Le=Math.round(F*("fraction"===D?I?K.h:K.w:1)),De=Le/(I?K.h:K.w),ye=Math.round(I?V*K.w+G:H*K.h+$),Ce={center:.5,right:1}[ne]||0,Fe={top:1,middle:.5}[W]||0,Ke=I?V-Ce*be:H-Fe*be,Ue=I?H-Fe*De:V-Ce*De,Be=Math.round(I?K.h*(1-Ue):K.w*Ue);z._lenFrac=De,z._thickFrac=be,z._uFrac=Ke,z._vFrac=Ue;var Ie=z._axis=function C(R,z,O){var I=R._fullLayout,F="v"===z.orientation,D={type:"linear",range:O,tickmode:z.tickmode,nticks:z.nticks,tick0:z.tick0,dtick:z.dtick,tickvals:z.tickvals,ticktext:z.ticktext,ticks:z.ticks,ticklen:z.ticklen,tickwidth:z.tickwidth,tickcolor:z.tickcolor,showticklabels:z.showticklabels,ticklabelposition:z.ticklabelposition,ticklabeloverflow:z.ticklabeloverflow,ticklabelstep:z.ticklabelstep,tickfont:z.tickfont,tickangle:z.tickangle,tickformat:z.tickformat,exponentformat:z.exponentformat,minexponent:z.minexponent,separatethousands:z.separatethousands,showexponent:z.showexponent,showtickprefix:z.showtickprefix,tickprefix:z.tickprefix,showticksuffix:z.showticksuffix,ticksuffix:z.ticksuffix,title:z.title,showline:!0,anchor:"free",side:F?"right":"bottom",position:1},N=F?"y":"x",U={type:"linear",_id:N+z._id},X={letter:N,font:I.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:I.calendar};function oe(se,ne){return d.coerce(D,U,p,se,ne)}return x(D,U,oe,X,I),S(D,U,oe,X),U}(O,z,re);Ie.position=be+(I?V+G/K.w:H+$/K.h);var nt=-1!==["top","bottom"].indexOf(j);if(I&&nt&&(Ie.title.side=j,Ie.titlex=V+G/K.w,Ie.titley=Ue+("top"===J.side?De-$/K.h:$/K.h)),!I&&!nt&&(Ie.title.side=j,Ie.titley=H+$/K.h,Ie.titlex=Ue+G/K.w),te.color&&"auto"===z.tickmode){Ie.tickmode="linear",Ie.tick0=pe.start;var gt=pe.size,Nt=d.constrain(Le/50,4,15)+1,St=(re[1]-re[0])/((z.nticks||Nt)*gt);if(St>1){var Bt=Math.pow(10,Math.floor(Math.log(St)/Math.LN10));gt*=Bt*d.roundUp(St/Bt,[2,5,10]),(Math.abs(pe.start)/pe.size+1e-6)%1<2e-6&&(Ie.tick0=0)}Ie.dtick=gt}Ie.domain=I?[Ue+$/K.h,Ue+De-$/K.h]:[Ue+G/K.w,Ue+De-G/K.w],Ie.setScale(),R.attr("transform",n(Math.round(K.l),Math.round(K.t)));var vt,Zt=R.select("."+T.cbtitleunshift).attr("transform",n(-Math.round(K.l),-Math.round(K.t))),Et=Ie.ticklabelposition,wt=Ie.title.font.size,at=R.select("."+T.cbaxis),Qe=0,Pe=0;function Ze(Xt,ar){var Ut={propContainer:Ie,propName:z._propPrefix+"title",traceIndex:z._traceIndex,_meta:z._meta,placeholder:q._dfltTitle.colorbar,containerGroup:R.select("."+T.cbtitle)},Jt="h"===Xt.charAt(0)?Xt.substr(1):"h"+Xt;R.selectAll("."+Jt+",."+Jt+"-math-group").remove(),g.draw(O,Xt,t(Ut,ar||{}))}function Xe(){var Xt,ar;(I&&nt||!I&&!nt)&&("top"===j&&(Xt=G+K.l+K.w*V,ar=$+K.t+K.h*(1-Ue-De)+3+.75*wt),"bottom"===j&&(Xt=G+K.l+K.w*V,ar=$+K.t+K.h*(1-Ue)-3-.25*wt),"right"===j&&(ar=$+K.t+K.h*H+3+.75*wt,Xt=G+K.l+K.w*Ue),Ze(Ie._id+"title",{attributes:{x:Xt,y:ar,"text-anchor":I?"start":"middle"}}))}function rt(){if(I&&!nt||!I&&nt){var Ut,Jt,Xt=Ie.position||0,ar=Ie._offset+Ie._length/2;if("right"===j)Jt=ar,Ut=K.l+K.w*Xt+10+wt*(Ie.showticklabels?1:.5);else if(Ut=ar,"bottom"===j&&(Jt=K.t+K.h*Xt+10+(-1===Et.indexOf("inside")?Ie.tickfont.size:0)+("intside"!==Ie.ticks&&z.ticklen||0)),"top"===j){var nr=J.text.split("<br>").length;Jt=K.t+K.h*Xt+10-de-l*wt*nr}Ze((I?"h":"v")+Ie._id+"title",{avoid:{selection:_.select(O).selectAll("g."+Ie._id+"tick"),side:j,offsetTop:I?0:K.t,offsetLeft:I?K.l:0,maxShift:I?q.width:q.height},attributes:{x:Ut,y:Jt,"text-anchor":"middle"},transform:{rotate:I?-90:0,offset:0}})}}function kt(){if(!I&&!nt||I&&nt){var rr,Xt=R.select("."+T.cbtitle),ar=Xt.select("text"),Ut=[-X/2,X/2],Jt=Xt.select(".h"+Ie._id+"title-math-group").node(),nr=15.6;if(ar.node()&&(nr=parseInt(ar.node().style.fontSize,10)*l),Jt?(rr=a.bBox(Jt),Pe=rr.width,(Qe=rr.height)>nr&&(Ut[1]-=(Qe-nr)/2)):ar.node()&&!ar.classed(T.jsPlaceholder)&&(rr=a.bBox(ar.node()),Pe=rr.width,Qe=rr.height),I){if(Qe){if(Qe+=5,"top"===j)Ie.domain[1]-=Qe/K.h,Ut[1]*=-1;else{Ie.domain[0]+=Qe/K.h;var br=s.lineCount(ar);Ut[1]+=(1-br)*nr}Xt.attr("transform",n(Ut[0],Ut[1])),Ie.setScale()}}else Pe&&("right"===j&&(Ie.domain[0]+=(Pe+wt/2)/K.w),Xt.attr("transform",n(Ut[0],Ut[1])),Ie.setScale())}R.selectAll("."+T.cbfills+",."+T.cblines).attr("transform",I?n(0,Math.round(K.h*(1-Ie.domain[1]))):n(Math.round(K.w*Ie.domain[0]),0)),at.attr("transform",I?n(0,Math.round(-K.t)):n(Math.round(-K.l),0));var Hr=R.select("."+T.cbfills).selectAll("rect."+T.cbfill).attr("style","").data(ke);Hr.enter().append("rect").classed(T.cbfill,!0).style("stroke","none"),Hr.exit().remove();var on=re.map(Ie.c2p).map(Math.round).sort(function(Vt,Tr){return Vt-Tr});Hr.each(function(Vt,Tr){var tt=[0===Tr?re[0]:(ke[Tr]+ke[Tr-1])/2,Tr===ke.length-1?re[1]:(ke[Tr]+ke[Tr+1])/2].map(Ie.c2p).map(Math.round);I&&(tt[1]=d.constrain(tt[1]+(tt[1]>tt[0])?1:-1,on[0],on[1]));var je=_.select(this).attr(I?"x":"y",ye).attr(I?"y":"x",_.min(tt)).attr(I?"width":"height",Math.max(de,2)).attr(I?"height":"width",Math.max(_.max(tt)-_.min(tt),2));if(z._fillgradient)a.gradient(je,O,z._id,I?"vertical":"horizontalreversed",z._fillgradient,"fill");else{var ct=ge(Vt).replace("e-","");je.attr("fill",k(ct).toHexString())}});var jr=R.select("."+T.cblines).selectAll("path."+T.cbline).data(te.color&&te.width?we:[]);jr.enter().append("path").classed(T.cbline,!0),jr.exit().remove(),jr.each(function(Vt){var Tr=ye,tt=Math.round(Ie.c2p(Vt))+te.width/2%1;_.select(this).attr("d","M"+(I?Tr+","+tt:tt+","+Tr)+(I?"h":"v")+de).call(a.lineGroupStyle,te.width,le(Vt),te.dash)}),at.selectAll("g."+Ie._id+"tick,path").remove();var et=ye+de+(X||0)/2-("outside"===z.ticks?1:0),Yt=e.calcTicks(Ie),qt=e.getTickSigns(Ie)[2];return e.drawTicks(O,Ie,{vals:"inside"===Ie.ticks?e.clipEnds(Ie,Yt):Yt,layer:at,path:e.makeTickPath(Ie,et,qt),transFn:e.makeTransTickFn(Ie)}),e.drawLabels(O,Ie,{vals:Yt,layer:at,transFn:e.makeTransTickLabelFn(Ie),labelFns:e.makeLabelFns(Ie,et)})}function Tt(){var Xt,ar=de+X/2;-1===Et.indexOf("inside")&&(Xt=a.bBox(at.node()),ar+=I?Xt.width:Xt.height),vt=Zt.select("text");var Ut=0,Jt=I&&"top"===j,nr=!I&&"right"===j,rr=0;if(vt.node()&&!vt.classed(T.jsPlaceholder)){var br,Hr=Zt.select(".h"+Ie._id+"title-math-group").node();Hr&&(I&&nt||!I&&!nt)?(Ut=(Xt=a.bBox(Hr)).width,br=Xt.height):(Ut=(Xt=a.bBox(Zt.node())).right-K.l-(I?ye:Be),br=Xt.bottom-K.t-(I?Be:ye),!I&&"top"===j&&(ar+=Xt.height,rr=Xt.height)),nr&&(vt.attr("transform",n(Ut/2+wt/2,0)),Ut*=2),ar=Math.max(ar,I?Ut:br)}var on=2*(I?G:$)+ar+oe+X/2,jr=0;!I&&J.text&&"bottom"===W&&H<=0&&(on+=jr=on/2,rr+=jr),q._hColorbarMoveTitle=jr,q._hColorbarMoveCBTitle=rr;var et=oe+X;R.select("."+T.cbbg).attr("x",(I?ye:Be)-et/2-(I?G:0)).attr("y",(I?Be:ye)-(I?Le:$+rr-jr)).attr(I?"width":"height",Math.max(on-jr,2)).attr(I?"height":"width",Math.max(Le+et,2)).call(r.fill,se).call(r.stroke,z.bordercolor).style("stroke-width",oe);var Yt=nr?Math.max(Ut-10,0):0;if(R.selectAll("."+T.cboutline).attr("x",(I?ye:Be+G)+Yt).attr("y",(I?Be+$-Le:ye)+(Jt?Qe:0)).attr(I?"width":"height",Math.max(de,2)).attr(I?"height":"width",Math.max(Le-(I?2*$+Qe:2*G+Yt),2)).call(r.stroke,z.outlinecolor).style({fill:"none","stroke-width":X}),R.attr("transform",n(K.l-(I?Ce*on:0),K.t-(I?0:(1-Fe)*on-rr))),!I&&(oe||k(se).getAlpha()&&!k.equals(q.paper_bgcolor,se))){var qt=at.selectAll("text"),Vt=qt[0].length,Tr=R.select("."+T.cbbg).node(),tt=a.bBox(Tr),je=a.getTranslate(R),ct=2;qt.each(function(lt,pt){var Ct=0,Dt=Vt-1;if(pt===Ct||pt===Dt){var pr,Gt=a.bBox(this),fr=a.getTranslate(this);pt===Dt?(pr=tt.right+je.x+Be-oe-ct+V-(Gt.right+fr.x))>0&&(pr=0):pt===Ct&&(pr=tt.left+je.x+Be+oe+ct-(Gt.left+fr.x))<0&&(pr=0),pr&&(Vt<3?this.setAttribute("transform","translate("+pr+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var ht={},Me=y[ne],Se=A[ne],Je=y[W],We=A[W],st=on-de;I?("pixels"===D?(ht.y=H,ht.t=Le*Je,ht.b=Le*We):(ht.t=ht.b=0,ht.yt=H+F*Je,ht.yb=H-F*We),"pixels"===U?(ht.x=V,ht.l=on*Me,ht.r=on*Se):(ht.l=st*Me,ht.r=st*Se,ht.xl=V-N*Me,ht.xr=V+N*Se)):("pixels"===D?(ht.x=V,ht.l=Le*Me,ht.r=Le*Se):(ht.l=ht.r=0,ht.xl=V+F*Me,ht.xr=V-F*Se),"pixels"===U?(ht.y=1-H,ht.t=on*Je,ht.b=on*We):(ht.t=st*Je,ht.b=st*We,ht.yt=H-N*Je,ht.yb=H+N*We)),m.autoMargin(O,z._id,ht)}return d.syncOrAsync([m.previousPromises,Xe,kt,rt,m.previousPromises,Tt],O)}(F,I,R);D&&D.then&&(R._promises||[]).push(D),R._context.edits.colorbarPosition&&function h(R,z,O){var N,U,X,I="v"===z.orientation,D=O._fullLayout._size;c.init({element:R.node(),gd:O,prepFn:function(){N=R.attr("transform"),i(R)},moveFn:function(oe,se){R.attr("transform",N+n(oe,se)),U=c.align((I?z._uFrac:z._vFrac)+oe/D.w,I?z._thickFrac:z._lenFrac,0,1,z.xanchor),X=c.align((I?z._vFrac:1-z._uFrac)-se/D.h,I?z._lenFrac:z._thickFrac,0,1,z.yanchor);var ne=c.getCursor(U,X,z.xanchor,z.yanchor);i(R,ne)},doneFn:function(){if(i(R),void 0!==U&&void 0!==X){var oe={};oe[z._propPrefix+"x"]=U,oe[z._propPrefix+"y"]=X,void 0!==z._traceIndex?E.call("_guiRestyle",O,oe,z._traceIndex):E.call("_guiRelayout",O,oe)}}})}(F,I,R)}),O.exit().each(function(I){m.autoMargin(R,I._id)}).remove(),O.order()}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/extend":493,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"../../plots/plots":619,"../../registry":638,"../color":366,"../colorscale/helpers":377,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":368,"@plotly/d3":58,tinycolor2:312}],371:[function(v,ie,ae){"use strict";var _=v("../../lib");ie.exports=function(m){return _.isPlainObject(m.colorbar)}},{"../../lib":503}],372:[function(v,ie,ae){"use strict";ie.exports={moduleType:"component",name:"colorbar",attributes:v("./attributes"),supplyDefaults:v("./defaults"),draw:v("./draw").draw,hasColorbar:v("./has_colorbar")}},{"./attributes":367,"./defaults":369,"./draw":370,"./has_colorbar":371}],373:[function(v,ie,ae){"use strict";var _=v("../colorbar/attributes"),k=v("../../lib/regex").counter,m=v("../../lib/sort_object_keys"),E=v("./scales.js").scales;function c(d){return"`"+d+"`"}m(E),ie.exports=function(n,t){n=n||"";var S,i=(t=t||{}).cLetter||"c",r=("onlyIfNumerical"in t||Boolean(n),"noScale"in t?t.noScale:"marker.line"===n),g="showScaleDflt"in t?t.showScaleDflt:"z"===i,s="string"==typeof t.colorscaleDflt?E[t.colorscaleDflt]:null,b=t.editTypeOverride||"",x=n?n+".":"";"colorAttr"in t?S=t.colorAttr:c(x+(S={z:"z",c:"color"}[i]));var l=i+"auto",y=i+"min",A=i+"max",T=i+"mid",o=(c(x+l),c(x+y),c(x+A),{});o[y]=o[A]=void 0;var C={};C[l]=!1;var R={};return"color"===S&&(R.color={valType:"color",arrayOk:!0,editType:b||"style"},t.anim&&(R.color.anim=!0)),R[l]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:o},R[y]={valType:"number",dflt:null,editType:b||"plot",impliedEdits:C},R[A]={valType:"number",dflt:null,editType:b||"plot",impliedEdits:C},R[T]={valType:"number",dflt:null,editType:"calc",impliedEdits:o},R.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:!1}},R.autocolorscale={valType:"boolean",dflt:!1!==t.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},R.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(R.showscale={valType:"boolean",dflt:g,editType:"calc"},R.colorbar=_),t.noColorAxis||(R.coloraxis={valType:"subplotid",regex:k("coloraxis"),dflt:null,editType:"calc"}),R}},{"../../lib/regex":520,"../../lib/sort_object_keys":526,"../colorbar/attributes":367,"./scales.js":381}],374:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../lib"),m=v("./helpers").extractOpts;ie.exports=function(e,c,d){var n=e._fullLayout,t=d.vals,i=d.containerStr,a=i?k.nestedProperty(c,i).get():c,r=m(a),g=!1!==r.auto,s=r.min,b=r.max,x=r.mid,S=function(){return k.aggNums(Math.min,null,t)},p=function(){return k.aggNums(Math.max,null,t)};void 0===s?s=S():g&&(s=a._colorAx&&_(s)?Math.min(s,S()):S()),void 0===b?b=p():g&&(b=a._colorAx&&_(b)?Math.max(b,p()):p()),g&&void 0!==x&&(b-x>x-s?s=x-(b-x):b-x<x-s&&(b=x+(x-s))),s===b&&(s-=.5,b+=.5),r._sync("min",s),r._sync("max",b),r.autocolorscale&&r._sync("colorscale",s*b<0?n.colorscale.diverging:s>=0?n.colorscale.sequential:n.colorscale.sequentialminus)}},{"../../lib":503,"./helpers":377,"fast-isnumeric":190}],375:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./helpers").hasColorscale,m=v("./helpers").extractOpts;ie.exports=function(e,c){function d(s,b){var x=s["_"+b];void 0!==x&&(s[b]=x)}function n(s,b){var x=b.container?_.nestedProperty(s,b.container).get():s;if(x)if(x.coloraxis)x._colorAx=c[x.coloraxis];else{var S=m(x),p=S.auto;(p||void 0===S.min)&&d(x,b.min),(p||void 0===S.max)&&d(x,b.max),S.autocolorscale&&d(x,"colorscale")}}for(var t=0;t<e.length;t++){var i=e[t],a=i._module.colorbar;if(a)if(Array.isArray(a))for(var r=0;r<a.length;r++)n(i,a[r]);else n(i,a);k(i,"marker.line")&&n(i,{container:"marker.line",min:"cmin",max:"cmax"})}for(var g in c._colorAxes)n(c[g],{min:"cmin",max:"cmax"})}},{"../../lib":503,"./helpers":377}],376:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../lib"),m=v("../colorbar/has_colorbar"),E=v("../colorbar/defaults"),e=v("./scales").isValid,c=v("../../registry").traceIs;function d(n,t){var i=t.slice(0,t.length-1);return t?k.nestedProperty(n,i).get()||{}:n}ie.exports=function n(t,i,a,r,g){var s=g.prefix,b=g.cLetter,x="_module"in i,S=d(t,s),p=d(i,s),w=d(i._template||{},s)||{},l=function(){return delete t.coloraxis,delete i.coloraxis,n(t,i,a,r,g)};if(x){var y=a._colorAxes||{},A=r(s+"coloraxis");if(A){var T=c(i,"contour")&&k.nestedProperty(i,"contours.coloring").get()||"heatmap",M=y[A];return void(M?(M[2].push(l),M[0]!==T&&(M[0]=!1,k.warn(["Ignoring coloraxis:",A,"setting","as it is linked to incompatible colorscales."].join(" ")))):y[A]=[T,i,[l]])}}var f=S[b+"min"],u=S[b+"max"],h=_(f)&&_(u)&&f<u;r(s+b+"auto",!h)?r(s+b+"mid"):(r(s+b+"min"),r(s+b+"max"));var z,O,C=S.colorscale,R=w.colorscale;void 0!==C&&(z=!e(C)),void 0!==R&&(z=!e(R)),r(s+"autocolorscale",z),r(s+"colorscale"),r(s+"reversescale"),"marker.line."!==s&&(s&&x&&(O=m(S)),r(s+"showscale",O)&&(s&&w&&(p._template=w),E(S,p,a)))}},{"../../lib":503,"../../registry":638,"../colorbar/defaults":369,"../colorbar/has_colorbar":371,"./scales":381,"fast-isnumeric":190}],377:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("tinycolor2"),m=v("fast-isnumeric"),E=v("../../lib"),e=v("../color"),c=v("./scales").isValid;var n=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function i(x){var l,y,A,S=x._colorAx,p=S||x,w={};for(y=0;y<n.length;y++)w[A=n[y]]=p[A];if(S)for(l="c",y=0;y<t.length;y++)w[A=t[y]]=p["c"+A];else{var T;for(y=0;y<t.length;y++)((T="c"+(A=t[y]))in p||(T="z"+A)in p)&&(w[A]=p[T]);l=T.charAt(0)}return w._sync=function(M,f){var u=-1!==t.indexOf(M)?l+M:M;p[u]=p["_"+u]=f},w}function a(x){for(var S=i(x),p=S.min,w=S.max,l=S.reversescale?r(S.colorscale):S.colorscale,y=l.length,A=new Array(y),T=new Array(y),M=0;M<y;M++){var f=l[M];A[M]=p+f[0]*(w-p),T[M]=f[1]}return{domain:A,range:T}}function r(x){for(var S=x.length,p=new Array(S),w=S-1,l=0;w>=0;w--,l++){var y=x[w];p[l]=[1-y[0],y[1]]}return p}function g(x,S){S=S||{};for(var p=x.domain,w=x.range,l=w.length,y=new Array(l),A=0;A<l;A++){var T=k(w[A]).toRgb();y[A]=[T.r,T.g,T.b,T.a]}var h,M=_.scale.linear().domain(p).range(y).clamp(!0),f=S.noNumericCheck,u=S.returnArray;return(h=f&&u?M:f?function(o){return b(M(o))}:u?function(o){return m(o)?M(o):k(o).isValid()?o:e.defaultLine}:function(o){return m(o)?b(M(o)):k(o).isValid()?o:e.defaultLine}).domain=M.domain,h.range=function(){return w},h}function b(x){return k({r:x[0],g:x[1],b:x[2],a:x[3]}).toRgbString()}ie.exports={hasColorscale:function d(x,S,p){var w=S?E.nestedProperty(x,S).get()||{}:x,l=w[p||"color"],y=!1;if(E.isArrayOrTypedArray(l))for(var A=0;A<l.length;A++)if(m(l[A])){y=!0;break}return E.isPlainObject(w)&&(y||!0===w.showscale||m(w.cmin)&&m(w.cmax)||c(w.colorscale)||E.isPlainObject(w.colorbar))},extractOpts:i,extractScale:a,flipScale:r,makeColorScaleFunc:g,makeColorScaleFuncFromTrace:function s(x,S){return g(a(x),S)}}},{"../../lib":503,"../color":366,"./scales":381,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],378:[function(v,ie,ae){"use strict";var _=v("./scales"),k=v("./helpers");ie.exports={moduleType:"component",name:"colorscale",attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyLayoutDefaults:v("./layout_defaults"),handleDefaults:v("./defaults"),crossTraceDefaults:v("./cross_trace_defaults"),calc:v("./calc"),scales:_.scales,defaultScale:_.defaultScale,getScale:_.get,isValidScale:_.isValid,hasColorscale:k.hasColorscale,extractOpts:k.extractOpts,extractScale:k.extractScale,flipScale:k.flipScale,makeColorScaleFunc:k.makeColorScaleFunc,makeColorScaleFuncFromTrace:k.makeColorScaleFuncFromTrace}},{"./attributes":373,"./calc":374,"./cross_trace_defaults":375,"./defaults":376,"./helpers":377,"./layout_attributes":379,"./layout_defaults":380,"./scales":381}],379:[function(v,ie,ae){"use strict";var _=v("../../lib/extend").extendFlat,k=v("./attributes"),m=v("./scales").scales;ie.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:m.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:m.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:m.RdBu,editType:"calc"}},coloraxis:_({_isSubplotObj:!0,editType:"calc"},k("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":493,"./attributes":373,"./scales":381}],380:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../plot_api/plot_template"),m=v("./layout_attributes"),E=v("./defaults");ie.exports=function(c,d){function n(x,S){return _.coerce(c,d,m,x,S)}n("colorscale.sequential"),n("colorscale.sequentialminus"),n("colorscale.diverging");var i,a,t=d._colorAxes;function r(x,S){return _.coerce(i,a,m.coloraxis,x,S)}for(var g in t){var s=t[g];if(s[0])i=c[g]||{},(a=k.newContainer(d,g,"coloraxis"))._name=g,E(i,a,d,r,{prefix:"",cLetter:"c"});else{for(var b=0;b<s[2].length;b++)s[2][b]();delete d._colorAxes[g]}}}},{"../../lib":503,"../../plot_api/plot_template":543,"./defaults":376,"./layout_attributes":379}],381:[function(v,ie,ae){"use strict";var _=v("tinycolor2"),k={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},m=k.RdBu;function e(d){var n=0;if(!Array.isArray(d)||d.length<2||!d[0]||!d[d.length-1]||0!=+d[0][0]||1!=+d[d.length-1][0])return!1;for(var t=0;t<d.length;t++){var i=d[t];if(2!==i.length||+i[0]<n||!_(i[1]).isValid())return!1;n=+i[0]}return!0}ie.exports={scales:k,defaultScale:m,get:function E(d,n){if(n||(n=m),!d)return n;function t(){try{d=k[d]||JSON.parse(d)}catch(i){d=n}}return"string"==typeof d&&(t(),"string"==typeof d&&t()),e(d)?d:n},isValid:function c(d){return void 0!==k[d]||e(d)}}},{tinycolor2:312}],382:[function(v,ie,ae){"use strict";ie.exports=function(k,m,E,e,c){var d=(k-E)/(e-E),n=d+m/(e-E),t=(d+n)/2;return"left"===c||"bottom"===c?d:"center"===c||"middle"===c?t:"right"===c||"top"===c?n:d<2/3-t?d:n>4/3-t?n:t}},{}],383:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];ie.exports=function(E,e,c,d){return E="left"===c?0:"center"===c?1:"right"===c?2:_.constrain(Math.floor(3*E),0,2),e="bottom"===d?0:"middle"===d?1:"top"===d?2:_.constrain(Math.floor(3*e),0,2),k[e][E]}},{"../../lib":503}],384:[function(v,ie,ae){"use strict";ae.selectMode=function(_){return"lasso"===_||"select"===_},ae.drawMode=function(_){return"drawclosedpath"===_||"drawopenpath"===_||"drawline"===_||"drawrect"===_||"drawcircle"===_},ae.openMode=function(_){return"drawline"===_||"drawopenpath"===_},ae.rectMode=function(_){return"select"===_||"drawline"===_||"drawrect"===_||"drawcircle"===_},ae.freeMode=function(_){return"lasso"===_||"drawclosedpath"===_||"drawopenpath"===_},ae.selectingOrDrawing=function(_){return ae.freeMode(_)||ae.rectMode(_)}},{}],385:[function(v,ie,ae){"use strict";var _=v("mouse-event-offset"),k=v("has-hover"),m=v("has-passive-events"),E=v("../../lib").removeElement,e=v("../../plots/cartesian/constants"),c=ie.exports={};c.align=v("./align"),c.getCursor=v("./cursor");var d=v("./unhover");function n(){var i=document.createElement("div");i.className="dragcover";var a=i.style;return a.position="fixed",a.left=0,a.right=0,a.top=0,a.bottom=0,a.zIndex=999999999,a.background="none",document.body.appendChild(i),i}function t(i){return _(i.changedTouches?i.changedTouches[0]:i,document.body)}c.unhover=d.wrapped,c.unhoverRaw=d.raw,c.init=function(a){var x,S,p,w,l,y,A,T,r=a.gd,g=1,s=r._context.doubleClickDelay,b=a.element;r._mouseDownTime||(r._mouseDownTime=0),b.style.pointerEvents="all",b.onmousedown=u,m?(b._ontouchstart&&b.removeEventListener("touchstart",b._ontouchstart),b._ontouchstart=u,b.addEventListener("touchstart",u,{passive:!1})):b.ontouchstart=u;var f=a.clampFn||function M(C,R,z){return Math.abs(C)<z&&(C=0),Math.abs(R)<z&&(R=0),[C,R]};function u(C){r._dragged=!1,r._dragging=!0;var R=t(C);x=R[0],S=R[1],A=C.target,y=C,T=2===C.buttons||C.ctrlKey,void 0===C.clientX&&void 0===C.clientY&&(C.clientX=x,C.clientY=S),(p=(new Date).getTime())-r._mouseDownTime<s?g+=1:(g=1,r._mouseDownTime=p),a.prepFn&&a.prepFn(C,x,S),k&&!T?(l=n()).style.cursor=window.getComputedStyle(b).cursor:k||(l=document,w=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(b).cursor),document.addEventListener("mouseup",o),document.addEventListener("touchend",o),!1!==a.dragmode&&(C.preventDefault(),document.addEventListener("mousemove",h),document.addEventListener("touchmove",h,{passive:!1}))}function h(C){C.preventDefault();var R=t(C),O=f(R[0]-x,R[1]-S,a.minDrag||e.MINDRAG),I=O[0],F=O[1];(I||F)&&(r._dragged=!0,c.unhover(r,C)),r._dragged&&a.moveFn&&!T&&(r._dragdata={element:b,dx:I,dy:F},a.moveFn(I,F))}function o(C){if(delete r._dragdata,!1!==a.dragmode&&(C.preventDefault(),document.removeEventListener("mousemove",h),document.removeEventListener("touchmove",h)),document.removeEventListener("mouseup",o),document.removeEventListener("touchend",o),k?E(l):w&&(l.documentElement.style.cursor=w,w=null),r._dragging){if(r._dragging=!1,(new Date).getTime()-r._mouseDownTime>s&&(g=Math.max(g-1,1)),r._dragged)a.doneFn&&a.doneFn();else if(a.clickFn&&a.clickFn(g,y),!T){var R;try{R=new MouseEvent("click",C)}catch(O){var z=t(C);(R=document.createEvent("MouseEvents")).initMouseEvent("click",C.bubbles,C.cancelable,C.view,C.detail,C.screenX,C.screenY,z[0],z[1],C.ctrlKey,C.altKey,C.shiftKey,C.metaKey,C.button,C.relatedTarget)}A.dispatchEvent(R)}r._dragging=!1,r._dragged=!1}else r._dragged=!1}},c.coverSlip=n},{"../../lib":503,"../../plots/cartesian/constants":561,"./align":382,"./cursor":383,"./unhover":386,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],386:[function(v,ie,ae){"use strict";var _=v("../../lib/events"),k=v("../../lib/throttle"),m=v("../../lib/dom").getGraphDiv,E=v("../fx/constants"),e=ie.exports={};e.wrapped=function(c,d,n){(c=m(c))._fullLayout&&k.clear(c._fullLayout._uid+E.HOVERID),e.raw(c,d,n)},e.raw=function(d,n){var t=d._fullLayout,i=d._hoverdata;n||(n={}),(!n.target||d._dragged||!1!==_.triggerHandler(d,"plotly_beforehover",n))&&(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),d._hoverdata=void 0,n.target&&i&&d.emit("plotly_unhover",{event:n,points:i}))}},{"../../lib/dom":491,"../../lib/events":492,"../../lib/throttle":530,"../fx/constants":400}],387:[function(v,ie,ae){"use strict";ae.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},ae.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],388:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../lib"),m=k.numberFormat,E=v("fast-isnumeric"),e=v("tinycolor2"),c=v("../../registry"),d=v("../color"),n=v("../colorscale"),t=k.strTranslate,i=v("../../lib/svg_text_utils"),a=v("../../constants/xmlns_namespaces"),g=v("../../constants/alignment").LINE_SPACING,s=v("../../constants/interactions").DESELECTDIM,b=v("../../traces/scatter/subtypes"),x=v("../../traces/scatter/make_bubble_size_func"),S=v("../../components/fx/helpers").appendArrayPointValue,p=ie.exports={};function w(ne,W,G){var $=W.fillpattern,V=$&&p.getPatternAttr($.shape,0,"");if(V){var H=p.getPatternAttr($.bgcolor,0,null),q=p.getPatternAttr($.fgcolor,0,null),K=$.fgopacity,Y=p.getPatternAttr($.size,0,8),te=p.getPatternAttr($.solidity,0,.3);p.pattern(ne,"point",G,W.uid,V,Y,te,void 0,$.fillmode,H,q,K)}else W.fillcolor&&ne.call(d.fill,W.fillcolor)}p.font=function(ne,W,G,$){k.isPlainObject(W)&&($=W.color,G=W.size,W=W.family),W&&ne.style("font-family",W),G+1&&ne.style("font-size",G+"px"),$&&ne.call(d.fill,$)},p.setPosition=function(ne,W,G){ne.attr("x",W).attr("y",G)},p.setSize=function(ne,W,G){ne.attr("width",W).attr("height",G)},p.setRect=function(ne,W,G,$,V){ne.call(p.setPosition,W,G).call(p.setSize,$,V)},p.translatePoint=function(ne,W,G,$){var V=G.c2p(ne.x),H=$.c2p(ne.y);return!!(E(V)&&E(H)&&W.node())&&("text"===W.node().nodeName?W.attr("x",V).attr("y",H):W.attr("transform",t(V,H)),!0)},p.translatePoints=function(ne,W,G){ne.each(function($){var V=_.select(this);p.translatePoint($,V,W,G)})},p.hideOutsideRangePoint=function(ne,W,G,$,V,H){W.attr("display",G.isPtWithinRange(ne,V)&&$.isPtWithinRange(ne,H)?null:"none")},p.hideOutsideRangePoints=function(ne,W){if(W._hasClipOnAxisFalse){var G=W.xaxis,$=W.yaxis;ne.each(function(V){var H=V[0].trace,q=H.xcalendar,K=H.ycalendar,Y=c.traceIs(H,"bar-like")?".bartext":".point,.textpoint";ne.selectAll(Y).each(function(te){p.hideOutsideRangePoint(te,_.select(this),G,$,q,K)})})}},p.crispRound=function(ne,W,G){return W&&E(W)?ne._context.staticPlot?W:W<1?1:Math.round(W):G||0},p.singleLineStyle=function(ne,W,G,$,V){W.style("fill","none");var H=(((ne||[])[0]||{}).trace||{}).line||{},q=G||H.width||0,K=V||H.dash||"";d.stroke(W,$||H.color),p.dashLine(W,K,q)},p.lineGroupStyle=function(ne,W,G,$){ne.style("fill","none").each(function(V){var H=(((V||[])[0]||{}).trace||{}).line||{},q=W||H.width||0,K=$||H.dash||"";_.select(this).call(d.stroke,G||H.color).call(p.dashLine,K,q)})},p.dashLine=function(ne,W,G){W=p.dashStyle(W,G=+G||0),ne.style({"stroke-dasharray":W,"stroke-width":G+"px"})},p.dashStyle=function(ne,W){W=+W||1;var G=Math.max(W,3);return"solid"===ne?ne="":"dot"===ne?ne=G+"px,"+G+"px":"dash"===ne?ne=3*G+"px,"+3*G+"px":"longdash"===ne?ne=5*G+"px,"+5*G+"px":"dashdot"===ne?ne=3*G+"px,"+G+"px,"+G+"px,"+G+"px":"longdashdot"===ne&&(ne=5*G+"px,"+2*G+"px,"+G+"px,"+2*G+"px"),ne},p.singleFillStyle=function(ne,W){var G=_.select(ne.node());w(ne,((G.data()[0]||[])[0]||{}).trace||{},W)},p.fillGroupStyle=function(ne,W){ne.style("stroke-width",0).each(function(G){var $=_.select(this);G[0].trace&&w($,G[0].trace,W)})};var l=v("./symbol_defs");p.symbolNames=[],p.symbolFuncs=[],p.symbolNeedLines={},p.symbolNoDot={},p.symbolNoFill={},p.symbolList=[],Object.keys(l).forEach(function(ne){var W=l[ne],G=W.n;p.symbolList.push(G,String(G),ne,G+100,String(G+100),ne+"-open"),p.symbolNames[G]=ne,p.symbolFuncs[G]=W.f,W.needLine&&(p.symbolNeedLines[G]=!0),W.noDot?p.symbolNoDot[G]=!0:p.symbolList.push(G+200,String(G+200),ne+"-dot",G+300,String(G+300),ne+"-open-dot"),W.noFill&&(p.symbolNoFill[G]=!0)});var y=p.symbolNames.length;function T(ne,W){return p.symbolFuncs[ne%100](W)+(ne>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}p.symbolNumber=function(ne){if(E(ne))ne=+ne;else if("string"==typeof ne){var W=0;ne.indexOf("-open")>0&&(W=100,ne=ne.replace("-open","")),ne.indexOf("-dot")>0&&(W+=200,ne=ne.replace("-dot","")),(ne=p.symbolNames.indexOf(ne))>=0&&(ne+=W)}return ne%100>=y||ne>=400?0:Math.floor(Math.max(ne,0))};var M={x1:1,x2:0,y1:0,y2:0},f={x1:0,x2:0,y1:1,y2:0},u=m("~f"),h={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:M},horizontalreversed:{node:"linearGradient",attrs:M,reversed:!0},vertical:{node:"linearGradient",attrs:f},verticalreversed:{node:"linearGradient",attrs:f,reversed:!0}};p.gradient=function(ne,W,G,$,V,H){for(var q=V.length,K=h[$],Y=new Array(q),te=0;te<q;te++)K.reversed?Y[q-1-te]=[u(100*(1-V[te][0])),V[te][1]]:Y[te]=[u(100*V[te][0]),V[te][1]];var J=W._fullLayout,j="g"+J._uid+"-"+G,re=J._defs.select(".gradients").selectAll("#"+j).data([$+Y.join(";")],k.identity);re.exit().remove(),re.enter().append(K.node).each(function(){var le=_.select(this);K.attrs&&le.attr(K.attrs),le.attr("id",j);var ge=le.selectAll("stop").data(Y);ge.exit().remove(),ge.enter().append("stop"),ge.each(function(pe){var xe=e(pe[1]);_.select(this).attr({offset:pe[0]+"%","stop-color":d.tinyRGB(xe),"stop-opacity":xe.getAlpha()})})}),ne.style(H,X(j,W)).style(H+"-opacity",null),ne.classed("gradient_filled",!0)},p.pattern=function(ne,W,G,$,V,H,q,K,Y,te,J,j){var re="legend"===W;K&&("overlay"===Y?J=d.contrast(te=K):(te=void 0,J=K));var pe,xe,we,de,be,Le,Fe,Ke,Ue,Be,Ie,le=G._fullLayout,ge="p"+le._uid+"-"+$,De={};switch(V){case"/":pe=H*Math.sqrt(2),xe=H*Math.sqrt(2),Le="path",De={d:we="M-"+pe/4+","+xe/4+"l"+pe/2+",-"+xe/2+"M0,"+xe+"L"+pe+",0M"+pe/4*3+","+xe/4*5+"l"+pe/2+",-"+xe/2,opacity:j,stroke:J,"stroke-width":(de=q*H)+"px"};break;case"\\":pe=H*Math.sqrt(2),xe=H*Math.sqrt(2),Le="path",De={d:we="M"+pe/4*3+",-"+xe/4+"l"+pe/2+","+xe/2+"M0,0L"+pe+","+xe+"M-"+pe/4+","+xe/4*3+"l"+pe/2+","+xe/2,opacity:j,stroke:J,"stroke-width":(de=q*H)+"px"};break;case"x":pe=H*Math.sqrt(2),xe=H*Math.sqrt(2),we="M-"+pe/4+","+xe/4+"l"+pe/2+",-"+xe/2+"M0,"+xe+"L"+pe+",0M"+pe/4*3+","+xe/4*5+"l"+pe/2+",-"+xe/2+"M"+pe/4*3+",-"+xe/4+"l"+pe/2+","+xe/2+"M0,0L"+pe+","+xe+"M-"+pe/4+","+xe/4*3+"l"+pe/2+","+xe/2,de=H-H*Math.sqrt(1-q),Le="path",De={d:we,opacity:j,stroke:J,"stroke-width":de+"px"};break;case"|":Le="path",Le="path",De={d:we="M"+(pe=H)/2+",0L"+pe/2+","+(xe=H),opacity:j,stroke:J,"stroke-width":(de=q*H)+"px"};break;case"-":Le="path",Le="path",De={d:we="M0,"+(xe=H)/2+"L"+(pe=H)+","+xe/2,opacity:j,stroke:J,"stroke-width":(de=q*H)+"px"};break;case"+":Le="path",we="M"+(pe=H)/2+",0L"+pe/2+","+(xe=H)+"M0,"+xe/2+"L"+pe+","+xe/2,de=H-H*Math.sqrt(1-q),Le="path",De={d:we,opacity:j,stroke:J,"stroke-width":de+"px"};break;case".":pe=H,xe=H,be=q<Math.PI/4?Math.sqrt(q*H*H/Math.PI):(Fe=q,Ke=Math.PI/4,Ue=1,Be=H/2,Ie=H/Math.sqrt(2),Be+(Ie-Be)*(Fe-Ke)/(Ue-Ke)),Le="circle",De={cx:pe/2,cy:xe/2,r:be,opacity:j,fill:J}}var ye=[V||"noSh",te||"noBg",J||"noFg",H,q].join(";"),Ce=le._defs.select(".patterns").selectAll("#"+ge).data([ye],k.identity);Ce.exit().remove(),Ce.enter().append("pattern").each(function(){var Fe=_.select(this);if(Fe.attr({id:ge,width:pe+"px",height:xe+"px",patternUnits:"userSpaceOnUse",patternTransform:re?"scale(0.8)":""}),te){var Ke=Fe.selectAll("rect").data([0]);Ke.exit().remove(),Ke.enter().append("rect").attr({width:pe+"px",height:xe+"px",fill:te})}var Ue=Fe.selectAll(Le).data([0]);Ue.exit().remove(),Ue.enter().append(Le).attr(De)}),ne.style("fill",X(ge,G)).style("fill-opacity",null),ne.classed("pattern_filled",!0)},p.initGradients=function(ne){k.ensureSingle(ne._fullLayout._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),_.select(ne).selectAll(".gradient_filled").classed("gradient_filled",!1)},p.initPatterns=function(ne){k.ensureSingle(ne._fullLayout._defs,"g","patterns").selectAll("pattern").remove(),_.select(ne).selectAll(".pattern_filled").classed("pattern_filled",!1)},p.getPatternAttr=function(ne,W,G){return ne&&k.isArrayOrTypedArray(ne)?W<ne.length?ne[W]:G:ne},p.pointStyle=function(ne,W,G){if(ne.size()){var $=p.makePointStyleFns(W);ne.each(function(V){p.singlePointStyle(V,_.select(this),W,$,G)})}},p.singlePointStyle=function(ne,W,G,$,V){var H=G.marker,q=H.line;if(W.style("opacity",$.selectedOpacityFn?$.selectedOpacityFn(ne):void 0===ne.mo?H.opacity:ne.mo),$.ms2mrc){var K;K="various"===ne.ms||"various"===H.size?3:$.ms2mrc(ne.ms),ne.mrc=K,$.selectedSizeFn&&(K=ne.mrc=$.selectedSizeFn(ne));var Y=p.symbolNumber(ne.mx||H.symbol)||0;ne.om=Y%200>=100,W.attr("d",T(Y,K))}var J,j,re,te=!1;if(ne.so?(re=q.outlierwidth,j=q.outliercolor,J=H.outliercolor):(re=(ne.mlw+1||(q||{}).width+1||(ne.trace?(ne.trace.marker.line||{}).width:0)+1)-1||0,j="mlc"in ne?ne.mlcc=$.lineScale(ne.mlc):k.isArrayOrTypedArray(q.color)?d.defaultLine:q.color,k.isArrayOrTypedArray(H.color)&&(J=d.defaultLine,te=!0),J="mc"in ne?ne.mcc=$.markerScale(ne.mc):H.color||"rgba(0,0,0,0)",$.selectedColorFn&&(J=$.selectedColorFn(ne))),ne.om)W.call(d.stroke,J).style({"stroke-width":(re||1)+"px",fill:"none"});else{W.style("stroke-width",(ne.isBlank?0:re)+"px");var ge=H.gradient,pe=ne.mgt;pe?te=!0:pe=ge&&ge.type,k.isArrayOrTypedArray(pe)&&(h[pe=pe[0]]||(pe=0));var xe=H.pattern,ke=xe&&p.getPatternAttr(xe.shape,ne.i,"");if(pe&&"none"!==pe){var we=ne.mgc;we?te=!0:we=ge.color;var de=G.uid;te&&(de+="-"+ne.i),p.gradient(W,V,de,pe,[[0,we],[1,J]],"fill")}else if(ke){var be=p.getPatternAttr(xe.bgcolor,ne.i,null),Le=p.getPatternAttr(xe.fgcolor,ne.i,null),De=xe.fgopacity,ye=p.getPatternAttr(xe.size,ne.i,8),Ce=p.getPatternAttr(xe.solidity,ne.i,.3),Fe=ne.mcc||k.isArrayOrTypedArray(xe.shape)||k.isArrayOrTypedArray(xe.bgcolor)||k.isArrayOrTypedArray(xe.size)||k.isArrayOrTypedArray(xe.solidity),Ke=G.uid;Fe&&(Ke+="-"+ne.i),p.pattern(W,"point",V,Ke,ke,ye,Ce,ne.mcc,xe.fillmode,be,Le,De)}else d.fill(W,J);re&&d.stroke(W,j)}},p.makePointStyleFns=function(ne){var W={},G=ne.marker;return W.markerScale=p.tryColorscale(G,""),W.lineScale=p.tryColorscale(G,"line"),c.traceIs(ne,"symbols")&&(W.ms2mrc=b.isBubble(ne)?x(ne):function(){return(G.size||6)/2}),ne.selectedpoints&&k.extendFlat(W,p.makeSelectedPointStyleFns(ne)),W},p.makeSelectedPointStyleFns=function(ne){var W={},V=ne.marker||{},H=(ne.selected||{}).marker||{},q=(ne.unselected||{}).marker||{},Y=H.opacity,te=q.opacity,J=void 0!==Y,j=void 0!==te;(k.isArrayOrTypedArray(V.opacity)||J||j)&&(W.selectedOpacityFn=function(be){var Le=void 0===be.mo?V.opacity:be.mo;return be.selected?J?Y:Le:j?te:s*Le});var re=V.color,le=H.color,ge=q.color;(le||ge)&&(W.selectedColorFn=function(be){var Le=be.mcc||re;return be.selected?le||Le:ge||Le});var pe=V.size,xe=H.size,ke=q.size,we=void 0!==xe,de=void 0!==ke;return c.traceIs(ne,"symbols")&&(we||de)&&(W.selectedSizeFn=function(be){var Le=be.mrc||pe/2;return be.selected?we?xe/2:Le:de?ke/2:Le}),W},p.makeSelectedTextStyleFns=function(ne){var W={},K=(ne.textfont||{}).color,Y=((ne.selected||{}).textfont||{}).color,te=((ne.unselected||{}).textfont||{}).color;return W.selectedTextColorFn=function(J){var j=J.tc||K;return J.selected?Y||j:te||(Y?j:d.addOpacity(j,s))},W},p.selectedPointStyle=function(ne,W){if(ne.size()&&W.selectedpoints){var G=p.makeSelectedPointStyleFns(W),$=W.marker||{},V=[];G.selectedOpacityFn&&V.push(function(H,q){H.style("opacity",G.selectedOpacityFn(q))}),G.selectedColorFn&&V.push(function(H,q){d.fill(H,G.selectedColorFn(q))}),G.selectedSizeFn&&V.push(function(H,q){var K=q.mx||$.symbol||0,Y=G.selectedSizeFn(q);H.attr("d",T(p.symbolNumber(K),Y)),q.mrc2=Y}),V.length&&ne.each(function(H){for(var q=_.select(this),K=0;K<V.length;K++)V[K](q,H)})}},p.tryColorscale=function(ne,W){var G=W?k.nestedProperty(ne,W).get():ne;return G&&(G.colorscale||G._colorAx)&&k.isArrayOrTypedArray(G.color)?n.makeColorScaleFuncFromTrace(G):k.identity};var o={start:1,end:-1,middle:0,bottom:1,top:-1};function C(ne,W,G,$,V){var H=_.select(ne.node().parentNode),q=-1!==W.indexOf("top")?"top":-1!==W.indexOf("bottom")?"bottom":"middle",K=-1!==W.indexOf("left")?"end":-1!==W.indexOf("right")?"start":"middle",Y=$?$/.8+1:0,te=(i.lineCount(ne)-1)*g+1,J=o[K]*Y,j=.75*G+o[q]*Y+(o[q]-1)*te*G/2;ne.attr("text-anchor",K),V||H.attr("transform",t(J,j))}function R(ne,W){var G=ne.ts||W.textfont.size;return E(G)&&G>0?G:0}p.textPointStyle=function(ne,W,G){if(ne.size()){var $;if(W.selectedpoints){var V=p.makeSelectedTextStyleFns(W);$=V.selectedTextColorFn}var H=W.texttemplate,q=G._fullLayout;ne.each(function(K){var Y=_.select(this),te=H?k.extractOption(K,W,"txt","texttemplate"):k.extractOption(K,W,"tx","text");if(te||0===te){if(H){var J=W._module.formatLabels,j=J?J(K,W,q):{},re={};S(re,W,K.i),te=k.texttemplateString(te,j,q._d3locale,re,K,W._meta||{})}var ge=K.tp||W.textposition,pe=R(K,W),xe=$?$(K):K.tc||W.textfont.color;Y.call(p.font,K.tf||W.textfont.family,pe,xe).text(te).call(i.convertToTspans,G).call(C,ge,pe,K.mrc)}else Y.remove()})}},p.selectedTextStyle=function(ne,W){if(ne.size()&&W.selectedpoints){var G=p.makeSelectedTextStyleFns(W);ne.each(function($){var V=_.select(this),H=G.selectedTextColorFn($),q=$.tp||W.textposition,K=R($,W);d.fill(V,H);var Y=c.traceIs(W,"bar-like");C(V,q,K,$.mrc2||$.mrc,Y)})}};function O(ne,W,G,$){var V=ne[0]-W[0],H=ne[1]-W[1],q=G[0]-W[0],K=G[1]-W[1],Y=Math.pow(V*V+H*H,.25),te=Math.pow(q*q+K*K,.25),J=(te*te*V-Y*Y*q)*$,j=(te*te*H-Y*Y*K)*$,re=3*te*(Y+te),le=3*Y*(Y+te);return[[_.round(W[0]+(re&&J/re),2),_.round(W[1]+(re&&j/re),2)],[_.round(W[0]-(le&&J/le),2),_.round(W[1]-(le&&j/le),2)]]}p.smoothopen=function(ne,W){if(ne.length<3)return"M"+ne.join("L");var V,G="M"+ne[0],$=[];for(V=1;V<ne.length-1;V++)$.push(O(ne[V-1],ne[V],ne[V+1],W));for(G+="Q"+$[0][0]+" "+ne[1],V=2;V<ne.length-1;V++)G+="C"+$[V-2][1]+" "+$[V-1][0]+" "+ne[V];return G+"Q"+$[ne.length-3][1]+" "+ne[ne.length-1]},p.smoothclosed=function(ne,W){if(ne.length<3)return"M"+ne.join("L")+"Z";var H,G="M"+ne[0],$=ne.length-1,V=[O(ne[$],ne[0],ne[1],W)];for(H=1;H<$;H++)V.push(O(ne[H-1],ne[H],ne[H+1],W));for(V.push(O(ne[$-1],ne[$],ne[0],W)),H=1;H<=$;H++)G+="C"+V[H-1][1]+" "+V[H][0]+" "+ne[H];return G+"C"+V[$][1]+" "+V[0][0]+" "+ne[0]+"Z"};var I={hv:function(ne,W){return"H"+_.round(W[0],2)+"V"+_.round(W[1],2)},vh:function(ne,W){return"V"+_.round(W[1],2)+"H"+_.round(W[0],2)},hvh:function(ne,W){return"H"+_.round((ne[0]+W[0])/2,2)+"V"+_.round(W[1],2)+"H"+_.round(W[0],2)},vhv:function(ne,W){return"V"+_.round((ne[1]+W[1])/2,2)+"H"+_.round(W[0],2)+"V"+_.round(W[1],2)}},F=function(ne,W){return"L"+_.round(W[0],2)+","+_.round(W[1],2)};p.steps=function(ne){var W=I[ne]||F;return function(G){for(var $="M"+_.round(G[0][0],2)+","+_.round(G[0][1],2),V=1;V<G.length;V++)$+=W(G[V-1],G[V]);return $}},p.makeTester=function(){var ne=k.ensureSingleById(_.select("body"),"svg","js-plotly-tester",function(G){G.attr(a.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),W=k.ensureSingle(ne,"path","js-reference-point",function(G){G.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});p.tester=ne,p.testref=W},p.savedBBoxes={};var D=0;function U(ne){var W=ne.getAttribute("data-unformatted");if(null!==W)return W+ne.getAttribute("data-math")+ne.getAttribute("text-anchor")+ne.getAttribute("style")}function X(ne,W){if(!ne)return null;var G=W._context,$=G._exportedPlot?"":G._baseUrl||"";return $?"url('"+$+"#"+ne+"')":"url(#"+ne+")"}p.bBox=function(ne,W,G){var $,te,J;if(G||(G=U(ne)),G){if($=p.savedBBoxes[G])return k.extendFlat({},$)}else if(1===ne.childNodes.length){var V=ne.childNodes[0];if(G=U(V)){var H=+V.getAttribute("x")||0,q=+V.getAttribute("y")||0,K=V.getAttribute("transform");if(!K){var Y=p.bBox(V,!1,G);return H&&(Y.left+=H,Y.right+=H),q&&(Y.top+=q,Y.bottom+=q),Y}if($=p.savedBBoxes[G+="~"+H+"~"+q+"~"+K])return k.extendFlat({},$)}}W?te=ne:(J=p.tester.node(),te=ne.cloneNode(!0),J.appendChild(te)),_.select(te).attr("transform",null).call(i.positionText,0,0);var j=te.getBoundingClientRect(),re=p.testref.node().getBoundingClientRect();W||J.removeChild(te);var le={height:j.height,width:j.width,left:j.left-re.left,top:j.top-re.top,right:j.right-re.left,bottom:j.bottom-re.top};return D>=1e4&&(p.savedBBoxes={},D=0),G&&(p.savedBBoxes[G]=le),D++,k.extendFlat({},le)},p.setClipUrl=function(ne,W,G){ne.attr("clip-path",X(W,G))},p.getTranslate=function(ne){var V=(ne[ne.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(H,q,K){return[q,K].join(" ")}).split(" ");return{x:+V[0]||0,y:+V[1]||0}},p.setTranslate=function(ne,W,G){var H=ne.attr?"attr":"setAttribute",q=ne[ne.attr?"attr":"getAttribute"]("transform")||"";return W=W||0,G=G||0,q=q.replace(/(\btranslate\(.*?\);?)/,"").trim(),q=(q+=t(W,G)).trim(),ne[H]("transform",q),q},p.getScale=function(ne){var V=(ne[ne.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(H,q,K){return[q,K].join(" ")}).split(" ");return{x:+V[0]||1,y:+V[1]||1}},p.setScale=function(ne,W,G){var H=ne.attr?"attr":"setAttribute",q=ne[ne.attr?"attr":"getAttribute"]("transform")||"";return W=W||1,G=G||1,q=q.replace(/(\bscale\(.*?\);?)/,"").trim(),q=(q+="scale("+W+","+G+")").trim(),ne[H]("transform",q),q};var oe=/\s*sc.*/;p.setPointGroupScale=function(ne,W,G){if(W=W||1,G=G||1,ne){var $=1===W&&1===G?"":"scale("+W+","+G+")";ne.each(function(){var V=(this.getAttribute("transform")||"").replace(oe,"");V=(V+=$).trim(),this.setAttribute("transform",V)})}};var se=/translate\([^)]*\)\s*$/;p.setTextPointsScale=function(ne,W,G){!ne||ne.each(function(){var $,V=_.select(this),H=V.select("text");if(H.node()){var q=parseFloat(H.attr("x")||0),K=parseFloat(H.attr("y")||0),Y=(V.attr("transform")||"").match(se);$=1===W&&1===G?[]:[t(q,K),"scale("+W+","+G+")",t(-q,-K)],Y&&$.push(Y),V.attr("transform",$.join(""))}})}},{"../../components/fx/helpers":402,"../../constants/alignment":471,"../../constants/interactions":478,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../registry":638,"../../traces/scatter/make_bubble_size_func":944,"../../traces/scatter/subtypes":952,"../color":366,"../colorscale":378,"./symbol_defs":389,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],389:[function(v,ie,ae){"use strict";var _=v("@plotly/d3");ie.exports={circle:{n:0,f:function(k){var m=_.round(k,2);return"M"+m+",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z"}},square:{n:1,f:function(k){var m=_.round(k,2);return"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z"}},diamond:{n:2,f:function(k){var m=_.round(1.3*k,2);return"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"Z"}},cross:{n:3,f:function(k){var m=_.round(.4*k,2),E=_.round(1.2*k,2);return"M"+E+","+m+"H"+m+"V"+E+"H-"+m+"V"+m+"H-"+E+"V-"+m+"H-"+m+"V-"+E+"H"+m+"V-"+m+"H"+E+"Z"}},x:{n:4,f:function(k){var m=_.round(.8*k/Math.sqrt(2),2),E="l"+m+","+m,e="l"+m+",-"+m,c="l-"+m+",-"+m,d="l-"+m+","+m;return"M0,"+m+E+e+c+e+c+d+c+d+E+d+E+"Z"}},"triangle-up":{n:5,f:function(k){var m=_.round(2*k/Math.sqrt(3),2);return"M-"+m+","+_.round(k/2,2)+"H"+m+"L0,-"+_.round(k,2)+"Z"}},"triangle-down":{n:6,f:function(k){var m=_.round(2*k/Math.sqrt(3),2);return"M-"+m+",-"+_.round(k/2,2)+"H"+m+"L0,"+_.round(k,2)+"Z"}},"triangle-left":{n:7,f:function(k){var m=_.round(2*k/Math.sqrt(3),2);return"M"+_.round(k/2,2)+",-"+m+"V"+m+"L-"+_.round(k,2)+",0Z"}},"triangle-right":{n:8,f:function(k){var m=_.round(2*k/Math.sqrt(3),2);return"M-"+_.round(k/2,2)+",-"+m+"V"+m+"L"+_.round(k,2)+",0Z"}},"triangle-ne":{n:9,f:function(k){var m=_.round(.6*k,2),E=_.round(1.2*k,2);return"M-"+E+",-"+m+"H"+m+"V"+E+"Z"}},"triangle-se":{n:10,f:function(k){var m=_.round(.6*k,2),E=_.round(1.2*k,2);return"M"+m+",-"+E+"V"+m+"H-"+E+"Z"}},"triangle-sw":{n:11,f:function(k){var m=_.round(.6*k,2),E=_.round(1.2*k,2);return"M"+E+","+m+"H-"+m+"V-"+E+"Z"}},"triangle-nw":{n:12,f:function(k){var m=_.round(.6*k,2),E=_.round(1.2*k,2);return"M-"+m+","+E+"V-"+m+"H"+E+"Z"}},pentagon:{n:13,f:function(k){var m=_.round(.951*k,2),E=_.round(.588*k,2),e=_.round(-k,2),c=_.round(-.309*k,2);return"M"+m+","+c+"L"+E+","+_.round(.809*k,2)+"H-"+E+"L-"+m+","+c+"L0,"+e+"Z"}},hexagon:{n:14,f:function(k){var m=_.round(k,2),E=_.round(k/2,2),e=_.round(k*Math.sqrt(3)/2,2);return"M"+e+",-"+E+"V"+E+"L0,"+m+"L-"+e+","+E+"V-"+E+"L0,-"+m+"Z"}},hexagon2:{n:15,f:function(k){var m=_.round(k,2),E=_.round(k/2,2),e=_.round(k*Math.sqrt(3)/2,2);return"M-"+E+","+e+"H"+E+"L"+m+",0L"+E+",-"+e+"H-"+E+"L-"+m+",0Z"}},octagon:{n:16,f:function(k){var m=_.round(.924*k,2),E=_.round(.383*k,2);return"M-"+E+",-"+m+"H"+E+"L"+m+",-"+E+"V"+E+"L"+E+","+m+"H-"+E+"L-"+m+","+E+"V-"+E+"Z"}},star:{n:17,f:function(k){var m=1.4*k,E=_.round(.225*m,2),e=_.round(.951*m,2),c=_.round(.363*m,2),d=_.round(.588*m,2),n=_.round(-m,2),t=_.round(-.309*m,2),i=_.round(.118*m,2),a=_.round(.809*m,2);return"M"+E+","+t+"H"+e+"L"+c+","+i+"L"+d+","+a+"L0,"+_.round(.382*m,2)+"L-"+d+","+a+"L-"+c+","+i+"L-"+e+","+t+"H-"+E+"L0,"+n+"Z"}},hexagram:{n:18,f:function(k){var m=_.round(.66*k,2),E=_.round(.38*k,2),e=_.round(.76*k,2);return"M-"+e+",0l-"+E+",-"+m+"h"+e+"l"+E+",-"+m+"l"+E+","+m+"h"+e+"l-"+E+","+m+"l"+E+","+m+"h-"+e+"l-"+E+","+m+"l-"+E+",-"+m+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(k){var m=_.round(k*Math.sqrt(3)*.8,2),E=_.round(.8*k,2),e=_.round(1.6*k,2),c=_.round(4*k,2),d="A "+c+","+c+" 0 0 1 ";return"M-"+m+","+E+d+m+","+E+d+"0,-"+e+d+"-"+m+","+E+"Z"}},"star-triangle-down":{n:20,f:function(k){var m=_.round(k*Math.sqrt(3)*.8,2),E=_.round(.8*k,2),e=_.round(1.6*k,2),c=_.round(4*k,2),d="A "+c+","+c+" 0 0 1 ";return"M"+m+",-"+E+d+"-"+m+",-"+E+d+"0,"+e+d+m+",-"+E+"Z"}},"star-square":{n:21,f:function(k){var m=_.round(1.1*k,2),E=_.round(2*k,2),e="A "+E+","+E+" 0 0 1 ";return"M-"+m+",-"+m+e+"-"+m+","+m+e+m+","+m+e+m+",-"+m+e+"-"+m+",-"+m+"Z"}},"star-diamond":{n:22,f:function(k){var m=_.round(1.4*k,2),E=_.round(1.9*k,2),e="A "+E+","+E+" 0 0 1 ";return"M-"+m+",0"+e+"0,"+m+e+m+",0"+e+"0,-"+m+e+"-"+m+",0Z"}},"diamond-tall":{n:23,f:function(k){var m=_.round(.7*k,2),E=_.round(1.4*k,2);return"M0,"+E+"L"+m+",0L0,-"+E+"L-"+m+",0Z"}},"diamond-wide":{n:24,f:function(k){var m=_.round(1.4*k,2),E=_.round(.7*k,2);return"M0,"+E+"L"+m+",0L0,-"+E+"L-"+m+",0Z"}},hourglass:{n:25,f:function(k){var m=_.round(k,2);return"M"+m+","+m+"H-"+m+"L"+m+",-"+m+"H-"+m+"Z"},noDot:!0},bowtie:{n:26,f:function(k){var m=_.round(k,2);return"M"+m+","+m+"V-"+m+"L-"+m+","+m+"V-"+m+"Z"},noDot:!0},"circle-cross":{n:27,f:function(k){var m=_.round(k,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+m+",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(k){var m=_.round(k,2),E=_.round(k/Math.sqrt(2),2);return"M"+E+","+E+"L-"+E+",-"+E+"M"+E+",-"+E+"L-"+E+","+E+"M"+m+",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(k){var m=_.round(k,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(k){var m=_.round(k,2);return"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m+"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(k){var m=_.round(1.3*k,2);return"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"ZM0,-"+m+"V"+m+"M-"+m+",0H"+m},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(k){var m=_.round(1.3*k,2),E=_.round(.65*k,2);return"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"ZM-"+E+",-"+E+"L"+E+","+E+"M-"+E+","+E+"L"+E+",-"+E},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(k){var m=_.round(1.4*k,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(k){var m=_.round(k,2);return"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(k){var m=_.round(1.2*k,2),E=_.round(.85*k,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+E+","+E+"L-"+E+",-"+E+"M"+E+",-"+E+"L-"+E+","+E},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(k){var m=_.round(k/2,2),E=_.round(k,2);return"M"+m+","+E+"V-"+E+"m-"+E+",0V"+E+"M"+E+","+m+"H-"+E+"m0,-"+E+"H"+E},needLine:!0,noFill:!0},"y-up":{n:37,f:function(k){var m=_.round(1.2*k,2),E=_.round(1.6*k,2),e=_.round(.8*k,2);return"M-"+m+","+e+"L0,0M"+m+","+e+"L0,0M0,-"+E+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(k){var m=_.round(1.2*k,2),E=_.round(1.6*k,2),e=_.round(.8*k,2);return"M-"+m+",-"+e+"L0,0M"+m+",-"+e+"L0,0M0,"+E+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(k){var m=_.round(1.2*k,2),E=_.round(1.6*k,2),e=_.round(.8*k,2);return"M"+e+","+m+"L0,0M"+e+",-"+m+"L0,0M-"+E+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(k){var m=_.round(1.2*k,2),E=_.round(1.6*k,2),e=_.round(.8*k,2);return"M-"+e+","+m+"L0,0M-"+e+",-"+m+"L0,0M"+E+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(k){var m=_.round(1.4*k,2);return"M"+m+",0H-"+m},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(k){var m=_.round(1.4*k,2);return"M0,"+m+"V-"+m},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(k){var m=_.round(k,2);return"M"+m+",-"+m+"L-"+m+","+m},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(k){var m=_.round(k,2);return"M"+m+","+m+"L-"+m+",-"+m},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(k){var m=_.round(k,2);return"M0,0L-"+m+","+_.round(2*k,2)+"H"+m+"Z"},noDot:!0},"arrow-down":{n:46,f:function(k){var m=_.round(k,2);return"M0,0L-"+m+",-"+_.round(2*k,2)+"H"+m+"Z"},noDot:!0},"arrow-left":{n:47,f:function(k){var m=_.round(2*k,2),E=_.round(k,2);return"M0,0L"+m+",-"+E+"V"+E+"Z"},noDot:!0},"arrow-right":{n:48,f:function(k){var m=_.round(2*k,2),E=_.round(k,2);return"M0,0L-"+m+",-"+E+"V"+E+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(k){var m=_.round(k,2);return"M-"+m+",0H"+m+"M0,0L-"+m+","+_.round(2*k,2)+"H"+m+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(k){var m=_.round(k,2);return"M-"+m+",0H"+m+"M0,0L-"+m+",-"+_.round(2*k,2)+"H"+m+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(k){var m=_.round(2*k,2),E=_.round(k,2);return"M0,-"+E+"V"+E+"M0,0L"+m+",-"+E+"V"+E+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(k){var m=_.round(2*k,2),E=_.round(k,2);return"M0,-"+E+"V"+E+"M0,0L-"+m+",-"+E+"V"+E+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],390:[function(v,ie,ae){"use strict";ie.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],391:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../registry"),m=v("../../plots/cartesian/axes"),E=v("../../lib"),e=v("./compute_error");function c(d,n,t,i){var a=n["error_"+i]||{},g=[];if(a.visible&&-1!==["linear","log"].indexOf(t.type)){for(var s=e(a),b=0;b<d.length;b++){var x=d[b],S=x.i;if(void 0===S)S=b;else if(null===S)continue;var p=x[i];if(_(t.c2l(p))){var w=s(p,S);if(_(w[0])&&_(w[1])){var l=x[i+"s"]=p-w[0],y=x[i+"h"]=p+w[1];g.push(l,y)}}}var T=n._extremes[t._id],M=m.findExtremes(t,g,E.extendFlat({tozero:T.opts.tozero},{padded:!0}));T.min=T.min.concat(M.min),T.max=T.max.concat(M.max)}}ie.exports=function(n){for(var t=n.calcdata,i=0;i<t.length;i++){var a=t[i],r=a[0].trace;if(!0===r.visible&&k.traceIs(r,"errorBarsOK")){var g=m.getFromId(n,r.xaxis),s=m.getFromId(n,r.yaxis);c(a,r,g,"x"),c(a,r,s,"y")}}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./compute_error":392,"fast-isnumeric":190}],392:[function(v,ie,ae){"use strict";function _(k,m){return"percent"===k?function(E){return Math.abs(E*m/100)}:"constant"===k?function(){return Math.abs(m)}:"sqrt"===k?function(E){return Math.sqrt(Math.abs(E))}:void 0}ie.exports=function(m){var E=m.type,e=m.symmetric;if("data"===E){var c=m.array||[];if(e)return function(a,r){var g=+c[r];return[g,g]};var d=m.arrayminus||[];return function(a,r){var g=+c[r],s=+d[r];return isNaN(g)&&isNaN(s)?[NaN,NaN]:[s||0,g||0]}}var n=_(E,m.value),t=_(E,m.valueminus);return e||void 0===m.valueminus?function(a){var r=n(a);return[r,r]}:function(a){return[t(a),n(a)]}}},{}],393:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../registry"),m=v("../../lib"),E=v("../../plot_api/plot_template"),e=v("./attributes");ie.exports=function(c,d,n,t){var i="error_"+t.axis,a=E.newContainer(d,i),r=c[i]||{};function g(l,y){return m.coerce(r,a,e,l,y)}if(!1!==g("visible",void 0!==r.array||void 0!==r.value||"sqrt"===r.type)){var x=g("type","array"in r?"data":"percent"),S=!0;"sqrt"!==x&&(S=g("symmetric",!(("data"===x?"arrayminus":"valueminus")in r))),"data"===x?(g("array"),g("traceref"),S||(g("arrayminus"),g("tracerefminus"))):("percent"===x||"constant"===x)&&(g("value"),S||g("valueminus"));var p="copy_"+t.inherit+"style";t.inherit&&(d["error_"+t.inherit]||{}).visible&&g(p,!(r.color||_(r.thickness)||_(r.width))),(!t.inherit||!a[p])&&(g("color",n),g("thickness"),g("width",k.traceIs(d,"gl3d")?0:4))}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"./attributes":390,"fast-isnumeric":190}],394:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../plot_api/edit_types").overrideAll,m=v("./attributes"),E={error_x:_.extendFlat({},m),error_y:_.extendFlat({},m)};delete E.error_x.copy_zstyle,delete E.error_y.copy_zstyle,delete E.error_y.copy_ystyle;var e={error_x:_.extendFlat({},m),error_y:_.extendFlat({},m),error_z:_.extendFlat({},m)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,ie.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:E,bar:E,histogram:E,scatter3d:k(e,"calc","nested"),scattergl:k(E,"calc","nested")}},supplyDefaults:v("./defaults"),calc:v("./calc"),makeComputeError:v("./compute_error"),plot:v("./plot"),style:v("./style"),hoverInfo:function c(d,n,t){(n.error_y||{}).visible&&(t.yerr=d.yh-d.y,n.error_y.symmetric||(t.yerrneg=d.y-d.ys)),(n.error_x||{}).visible&&(t.xerr=d.xh-d.x,n.error_x.symmetric||(t.xerrneg=d.x-d.xs))}}},{"../../lib":503,"../../plot_api/edit_types":536,"./attributes":390,"./calc":391,"./compute_error":392,"./defaults":393,"./plot":395,"./style":396}],395:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("fast-isnumeric"),m=v("../drawing"),E=v("../../traces/scatter/subtypes");ie.exports=function(d,n,t,i){var r=t.xaxis,g=t.yaxis,s=i&&i.duration>0;n.each(function(b){var w,x=b[0].trace,S=x.error_x||{},p=x.error_y||{};x.ids&&(w=function(T){return T.id});var l=E.hasMarkers(x)&&x.marker.maxdisplayed>0;!p.visible&&!S.visible&&(b=[]);var y=_.select(this).selectAll("g.errorbar").data(b,w);if(y.exit().remove(),b.length){S.visible||y.selectAll("path.xerror").remove(),p.visible||y.selectAll("path.yerror").remove(),y.style("opacity",1);var A=y.enter().append("g").classed("errorbar",!0);s&&A.style("opacity",0).transition().duration(i.duration).style("opacity",1),m.setClipUrl(y,t.layerClipId,d),y.each(function(T){var M=_.select(this),f=function e(c,d,n){var t={x:d.c2p(c.x),y:n.c2p(c.y)};return void 0!==c.yh&&(t.yh=n.c2p(c.yh),t.ys=n.c2p(c.ys),k(t.ys)||(t.noYS=!0,t.ys=n.c2p(c.ys,!0))),void 0!==c.xh&&(t.xh=d.c2p(c.xh),t.xs=d.c2p(c.xs),k(t.xs)||(t.noXS=!0,t.xs=d.c2p(c.xs,!0))),t}(T,r,g);if(!l||T.vis){var u,h=M.select("path.yerror");if(p.visible&&k(f.x)&&k(f.yh)&&k(f.ys)){var o=p.width;u="M"+(f.x-o)+","+f.yh+"h"+2*o+"m-"+o+",0V"+f.ys,f.noYS||(u+="m-"+o+",0h"+2*o),h.size()?s&&(h=h.transition().duration(i.duration).ease(i.easing)):h=M.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),h.attr("d",u)}else h.remove();var C=M.select("path.xerror");if(S.visible&&k(f.y)&&k(f.xh)&&k(f.xs)){var R=(S.copy_ystyle?p:S).width;u="M"+f.xh+","+(f.y-R)+"v"+2*R+"m0,-"+R+"H"+f.xs,f.noXS||(u+="m0,-"+R+"v"+2*R),C.size()?s&&(C=C.transition().duration(i.duration).ease(i.easing)):C=M.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),C.attr("d",u)}else C.remove()}})}})}},{"../../traces/scatter/subtypes":952,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],396:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../color");ie.exports=function(E){E.each(function(e){var c=e[0].trace,d=c.error_y||{},n=c.error_x||{},t=_.select(this);t.selectAll("path.yerror").style("stroke-width",d.thickness+"px").call(k.stroke,d.color),n.copy_ystyle&&(n=d),t.selectAll("path.xerror").style("stroke-width",n.thickness+"px").call(k.stroke,n.color)})}},{"../color":366,"@plotly/d3":58}],397:[function(v,ie,ae){"use strict";var _=v("../../plots/font_attributes"),k=v("./layout_attributes").hoverlabel,m=v("../../lib/extend").extendFlat;ie.exports={hoverlabel:{bgcolor:m({},k.bgcolor,{arrayOk:!0}),bordercolor:m({},k.bordercolor,{arrayOk:!0}),font:_({arrayOk:!0,editType:"none"}),align:m({},k.align,{arrayOk:!0}),namelength:m({},k.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":493,"../../plots/font_attributes":585,"./layout_attributes":407}],398:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../registry");function m(E,e,c,d){d=d||_.identity,Array.isArray(E)&&(e[0][c]=d(E))}ie.exports=function(e){var c=e.calcdata,d=e._fullLayout;function n(g){return function(s){return _.coerceHoverinfo({hoverinfo:s},{_module:g._module},d)}}for(var t=0;t<c.length;t++){var i=c[t],a=i[0].trace;if(!k.traceIs(a,"pie-like")){var r=k.traceIs(a,"2dMap")?m:_.fillArray;r(a.hoverinfo,i,"hi",n(a)),a.hovertemplate&&r(a.hovertemplate,i,"ht"),a.hoverlabel&&(r(a.hoverlabel.bgcolor,i,"hbg"),r(a.hoverlabel.bordercolor,i,"hbc"),r(a.hoverlabel.font.size,i,"hts"),r(a.hoverlabel.font.color,i,"htc"),r(a.hoverlabel.font.family,i,"htf"),r(a.hoverlabel.namelength,i,"hnl"),r(a.hoverlabel.align,i,"hta"))}}}},{"../../lib":503,"../../registry":638}],399:[function(v,ie,ae){"use strict";var _=v("../../registry"),k=v("./hover").hover;ie.exports=function(E,e,c){var d=_.getComponentMethod("annotations","onClick")(E,E._hoverdata);function n(){E.emit("plotly_click",{points:E._hoverdata,event:e})}void 0!==c&&k(E,e,c,!0),E._hoverdata&&e&&e.target&&(d&&d.then?d.then(n):n(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}},{"../../registry":638,"./hover":403}],400:[function(v,ie,ae){"use strict";ie.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],401:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./attributes"),m=v("./hoverlabel_defaults");ie.exports=function(e,c,d,n){var i=_.extendFlat({},n.hoverlabel);c.hovertemplate&&(i.namelength=-1),m(e,c,function t(a,r){return _.coerce(e,c,k,a,r)},i)}},{"../../lib":503,"./attributes":397,"./hoverlabel_defaults":404}],402:[function(v,ie,ae){"use strict";var _=v("../../lib");ae.getSubplot=function(d){return d.subplot||d.xaxis+d.yaxis||d.geo},ae.isTraceInSubplots=function(d,n){if("splom"===d.type){for(var t=d.xaxes||[],i=d.yaxes||[],a=0;a<t.length;a++)for(var r=0;r<i.length;r++)if(-1!==n.indexOf(t[a]+i[r]))return!0;return!1}return-1!==n.indexOf(ae.getSubplot(d))},ae.flat=function(d,n){for(var t=new Array(d.length),i=0;i<d.length;i++)t[i]=n;return t},ae.p2c=function(d,n){for(var t=new Array(d.length),i=0;i<d.length;i++)t[i]=d[i].p2c(n);return t},ae.getDistanceFunction=function(d,n,t,i){return"closest"===d?i||ae.quadrature(n,t):"x"===d.charAt(0)?n:t},ae.getClosest=function(d,n,t){if(!1!==t.index)t.index>=0&&t.index<d.length?t.distance=0:t.index=!1;else for(var i=0;i<d.length;i++){var a=n(d[i]);a<=t.distance&&(t.index=i,t.distance=a)}return t},ae.inbox=function(d,n,t){return d*n<0||0===d?t:1/0},ae.quadrature=function(d,n){return function(t){var i=d(t),a=n(t);return Math.sqrt(i*i+a*a)}},ae.makeEventData=function(d,n,t){var i="index"in d?d.index:d.pointNumber,a={data:n._input,fullData:n,curveNumber:n.index,pointNumber:i};if(n._indexToPoints){var r=n._indexToPoints[i];1===r.length?a.pointIndex=r[0]:a.pointIndices=r}else a.pointIndex=i;return n._module.eventData?a=n._module.eventData(a,d,n,t,i):("xVal"in d?a.x=d.xVal:"x"in d&&(a.x=d.x),"yVal"in d?a.y=d.yVal:"y"in d&&(a.y=d.y),d.xa&&(a.xaxis=d.xa),d.ya&&(a.yaxis=d.ya),void 0!==d.zLabelVal&&(a.z=d.zLabelVal)),ae.appendArrayPointValue(a,n,i),a},ae.appendArrayPointValue=function(d,n,t){var i=n._arrayAttrs;if(i)for(var a=0;a<i.length;a++){var r=i[a],g=m(r);if(void 0===d[g]){var b=E(_.nestedProperty(n,r).get(),t);void 0!==b&&(d[g]=b)}}},ae.appendArrayMultiPointValues=function(d,n,t){var i=n._arrayAttrs;if(i)for(var a=0;a<i.length;a++){var r=i[a],g=m(r);if(void 0===d[g]){for(var s=_.nestedProperty(n,r).get(),b=new Array(t.length),x=0;x<t.length;x++)b[x]=E(s,t[x]);d[g]=b}}};var k={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function m(d){return k[d]||d}function E(d,n){return Array.isArray(n)?Array.isArray(d)&&Array.isArray(d[n[0]])?d[n[0]][n[1]]:void 0:d[n]}var e={x:!0,y:!0},c={"x unified":!0,"y unified":!0};ae.isUnifiedHover=function(d){return"string"==typeof d&&!!c[d]},ae.isXYhover=function(d){return"string"==typeof d&&!!e[d]}},{"../../lib":503}],403:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("fast-isnumeric"),m=v("tinycolor2"),E=v("../../lib"),e=E.strTranslate,c=E.strRotate,d=v("../../lib/events"),n=v("../../lib/svg_text_utils"),t=v("../../lib/override_cursor"),i=v("../drawing"),a=v("../color"),r=v("../dragelement"),g=v("../../plots/cartesian/axes"),s=v("../../registry"),b=v("./helpers"),x=v("./constants"),S=v("../legend/defaults"),p=v("../legend/draw"),w=x.YANGLE,l=Math.PI*w/180,y=1/Math.sin(l),A=Math.cos(l),T=Math.sin(l),M=x.HOVERARROWSIZE,f=x.HOVERTEXTPAD,u={box:!0,ohlc:!0,violin:!0,candlestick:!0},h={scatter:!0,scattergl:!0,splom:!0};function o(V,H,q,K,Y){q||(q="xy");var te=Array.isArray(q)?q:[q],J=V._fullLayout,j=J._plots||[],re=j[q],le=J._has("cartesian");if(re){var ge=re.overlays.map(function(ir){return ir.id});te=te.concat(ge)}for(var pe=te.length,xe=new Array(pe),ke=new Array(pe),we=!1,de=0;de<pe;de++){var be=te[de];if(j[be])we=!0,xe[de]=j[be].xaxis,ke[de]=j[be].yaxis;else{if(!J[be]||!J[be]._subplot)return void E.warn("Unrecognized subplot: "+be);var Le=J[be]._subplot;xe[de]=Le.xaxis,ke[de]=Le.yaxis}}var De=H.hovermode||J.hovermode;if(De&&!we&&(De="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(De)||!V.calcdata||V.querySelector(".zoombox")||V._dragging)return r.unhoverRaw(V,H);var ye=J.hoverdistance;-1===ye&&(ye=1/0);var Ce=J.spikedistance;-1===Ce&&(Ce=1/0);var Ue,Be,Ie,nt,gt,Nt,St,Bt,Zt,Et,wt,at,vt,Fe=[],Ke=[],Qe={hLinePoint:null,vLinePoint:null},Pe=!1;if(Array.isArray(H))for(De="array",Ie=0;Ie<H.length;Ie++)(gt=V.calcdata[H[Ie].curveNumber||0])&&(Nt=gt[0].trace,"skip"!==gt[0].trace.hoverinfo&&(Ke.push(gt),"h"===Nt.orientation&&(Pe=!0)));else{for(nt=0;nt<V.calcdata.length;nt++)"skip"!==(Nt=(gt=V.calcdata[nt])[0].trace).hoverinfo&&b.isTraceInSubplots(Nt,te)&&(Ke.push(gt),"h"===Nt.orientation&&(Pe=!0));var Xe,rt;if(Y){if(!1===d.triggerHandler(V,"plotly_beforehover",H))return;var kt=Y.getBoundingClientRect();Xe=H.clientX-kt.left,rt=H.clientY-kt.top,J._calcInverseTransform(V);var Tt=E.apply3DTransform(J._invTransform)(Xe,rt);if(rt=Tt[1],(Xe=Tt[0])<0||Xe>xe[0]._length||rt<0||rt>ke[0]._length)return r.unhoverRaw(V,H)}else Xe="xpx"in H?H.xpx:xe[0]._length/2,rt="ypx"in H?H.ypx:ke[0]._length/2;if(H.pointerX=Xe+xe[0]._offset,H.pointerY=rt+ke[0]._offset,Ue="xval"in H?b.flat(te,H.xval):b.p2c(xe,Xe),Be="yval"in H?b.flat(te,H.yval):b.p2c(ke,rt),!k(Ue[0])||!k(Be[0]))return E.warn("Fx.hover failed",H,V),r.unhoverRaw(V,H)}var Xt=1/0;function ar(ir,Or){for(nt=0;nt<Ke.length;nt++)if((gt=Ke[nt])&&gt[0]&&gt[0].trace&&!0===(Nt=gt[0].trace).visible&&0!==Nt._length&&-1===["carpet","contourcarpet"].indexOf(Nt._module.name)){if("splom"===Nt.type?St=te[Bt=0]:(St=b.getSubplot(Nt),Bt=te.indexOf(St)),b.isUnifiedHover(Zt=De)&&(Zt=Zt.charAt(0)),at={cd:gt,trace:Nt,xa:xe[Bt],ya:ke[Bt],maxHoverDistance:ye,maxSpikeDistance:Ce,index:!1,distance:Math.min(Xt,ye),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:a.defaultLine,name:Nt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},J[St]&&(at.subplot=J[St]._subplot),J._splomScenes&&J._splomScenes[Nt.uid]&&(at.scene=J._splomScenes[Nt.uid]),vt=Fe.length,"array"===Zt){var qr=H[nt];"pointNumber"in qr?(at.index=qr.pointNumber,Zt="closest"):(Zt="","xval"in qr&&(Et=qr.xval,Zt="x"),"yval"in qr&&(wt=qr.yval,Zt=Zt?"closest":"y"))}else void 0!==ir&&void 0!==Or?(Et=ir,wt=Or):(Et=Ue[Bt],wt=Be[Bt]);if(0!==ye)if(Nt._module&&Nt._module.hoverPoints){var Ir=Nt._module.hoverPoints(at,Et,wt,Zt,{finiteRange:!0,hoverLayer:J._hoverlayer});if(Ir)for(var kr,Zr=0;Zr<Ir.length;Zr++)k((kr=Ir[Zr]).x0)&&k(kr.y0)&&Fe.push(D(kr,De))}else E.log("Unrecognized trace type in hover:",Nt);if("closest"===De&&Fe.length>vt&&(Fe.splice(0,vt),Xt=Fe[0].distance),le&&0!==Ce&&0===Fe.length){at.distance=Ce,at.index=!1;var An=Nt._module.hoverPoints(at,Et,wt,"closest",{hoverLayer:J._hoverlayer});if(An&&(An=An.filter(function(wa){return wa.spikeDistance<=Ce})),An&&An.length){var wn,Zn=An.filter(function(wa){return wa.xa.showspikes&&"hovered data"!==wa.xa.spikesnap});if(Zn.length){var Ln=Zn[0];k(Ln.x0)&&k(Ln.y0)&&(wn=Jt(Ln),(!Qe.vLinePoint||Qe.vLinePoint.spikeDistance>wn.spikeDistance)&&(Qe.vLinePoint=wn))}var Wn=An.filter(function(wa){return wa.ya.showspikes&&"hovered data"!==wa.ya.spikesnap});if(Wn.length){var $n=Wn[0];k($n.x0)&&k($n.y0)&&(wn=Jt($n),(!Qe.hLinePoint||Qe.hLinePoint.spikeDistance>wn.spikeDistance)&&(Qe.hLinePoint=wn))}}}}}function Ut(ir,Or,qr){for(var Zr,Ir=null,kr=1/0,An=0;An<ir.length;An++)Zr=ir[An].spikeDistance,qr&&0===An&&(Zr=-1/0),Zr<=kr&&Zr<=Or&&(Ir=ir[An],kr=Zr);return Ir}function Jt(ir){return ir?{xa:ir.xa,ya:ir.ya,x:void 0!==ir.xSpike?ir.xSpike:(ir.x0+ir.x1)/2,y:void 0!==ir.ySpike?ir.ySpike:(ir.y0+ir.y1)/2,distance:ir.distance,spikeDistance:ir.spikeDistance,curveNumber:ir.trace.index,color:ir.color,pointNumber:ir.index}:null}ar();var nr={fullLayout:J,container:J._hoverlayer,event:H},rr=V._spikepoints;V._spikepoints={vLinePoint:Qe.vLinePoint,hLinePoint:Qe.hLinePoint};var Hr=function(){Fe.sort(function(ir,Or){return ir.distance-Or.distance}),Fe=function se(V,H){for(var q=H.charAt(0),K=[],Y=[],te=[],J=0;J<V.length;J++){var j=V[J];s.traceIs(j.trace,"bar-like")||s.traceIs(j.trace,"box-violin")?te.push(j):j.trace[q+"period"]?Y.push(j):K.push(j)}return K.concat(Y).concat(te)}(Fe,De)};Hr();var on=De.charAt(0),jr=("x"===on||"y"===on)&&Fe[0]&&h[Fe[0].trace.type];if(le&&0!==Ce&&0!==Fe.length){var Yt=Ut(Fe.filter(function(ir){return ir.ya.showspikes}),Ce,jr);Qe.hLinePoint=Jt(Yt);var Vt=Ut(Fe.filter(function(ir){return ir.xa.showspikes}),Ce,jr);Qe.vLinePoint=Jt(Vt)}if(0===Fe.length){var Tr=r.unhoverRaw(V,H);return le&&(null!==Qe.hLinePoint||null!==Qe.vLinePoint)&&X(rr)&&N(V,Qe,nr),Tr}if(le&&X(rr)&&N(V,Qe,nr),b.isXYhover(Zt)&&0!==Fe[0].length&&"splom"!==Fe[0].trace.type){var tt=Fe[0],je=(Fe=u[tt.trace.type]?Fe.filter(function(ir){return ir.trace.index===tt.trace.index}):[tt]).length;ar(ne("x",tt,J),ne("y",tt,J));var st,Me=[],Se={},Je=0,We=function(ir){var Or=u[ir.trace.type]?C(ir):ir.trace.index;if(Se[Or]){var qr=Se[Or]-1,Ir=Me[qr];qr>0&&Math.abs(ir.distance)<Math.abs(Ir.distance)&&(Me[qr]=ir)}else Je++,Se[Or]=Je,Me.push(ir)};for(st=0;st<je;st++)We(Fe[st]);for(st=Fe.length-1;st>je-1;st--)We(Fe[st]);Fe=Me,Hr()}var lt=V._hoverdata,pt=[],Ct=W(V),Dt=G(V);for(Ie=0;Ie<Fe.length;Ie++){var Gt=Fe[Ie],fr=b.makeEventData(Gt,Gt.trace,Gt.cd);if(!1!==Gt.hovertemplate){var pr=!1;Gt.cd[Gt.index]&&Gt.cd[Gt.index].ht&&(pr=Gt.cd[Gt.index].ht),Gt.hovertemplate=pr||Gt.trace.hovertemplate||!1}if(Gt.xa&&Gt.ya){var Jr=Gt.x0+Gt.xa._offset,Lr=Gt.x1+Gt.xa._offset,Ar=Gt.y0+Gt.ya._offset,en=Gt.y1+Gt.ya._offset,mr=Math.min(Jr,Lr),wr=Math.max(Jr,Lr),Wr=Math.min(Ar,en),Kr=Math.max(Ar,en);fr.bbox={x0:mr+Dt,x1:wr+Dt,y0:Wr+Ct,y1:Kr+Ct}}Gt.eventData=[fr],pt.push(fr)}V._hoverdata=pt;var Cr="y"===De&&(Ke.length>1||Fe.length>1)||"closest"===De&&Pe&&Fe.length>1,it=a.combine(J.plot_bgcolor||a.background,J.paper_bgcolor),It=z(Fe,{gd:V,hovermode:De,rotateLabels:Cr,bgColor:it,container:J._hoverlayer,outerContainer:J._paper.node(),commonLabelOpts:J.hoverlabel,hoverdistance:J.hoverdistance});if(b.isUnifiedHover(De)||(function I(V,H,q){var re,le,ge,pe,xe,ke,we,K=0,Y=1,te=V.size(),J=new Array(te),j=0;function de(Ue){var Be=Ue[0],Ie=Ue[Ue.length-1];if(ge=Ie.pos+Ie.dp+Ie.size-Be.pmax,(le=Be.pmin-Be.pos-Be.dp+Be.size)>.01){for(xe=Ue.length-1;xe>=0;xe--)Ue[xe].dp+=le;re=!1}if(!(ge<.01)){if(le<-.01){for(xe=Ue.length-1;xe>=0;xe--)Ue[xe].dp-=ge;re=!1}if(re){var nt=0;for(pe=0;pe<Ue.length;pe++)(ke=Ue[pe]).pos+ke.dp+ke.size>Be.pmax&&nt++;for(pe=Ue.length-1;pe>=0&&!(nt<=0);pe--)(ke=Ue[pe]).pos>Be.pmax-1&&(ke.del=!0,nt--);for(pe=0;pe<Ue.length&&!(nt<=0);pe++)if((ke=Ue[pe]).pos<Be.pmin+1)for(ke.del=!0,nt--,ge=2*ke.size,xe=Ue.length-1;xe>=0;xe--)Ue[xe].dp-=ge;for(pe=Ue.length-1;pe>=0&&!(nt<=0);pe--)(ke=Ue[pe]).pos+ke.dp+ke.size>Be.pmax&&(ke.del=!0,nt--)}}}for(V.each(function(Ue){var Be=Ue[H],Ie="x"===Be._id.charAt(0),nt=Be.range;0===j&&nt&&nt[0]>nt[1]!==Ie&&(Y=-1),J[j++]=[{datum:Ue,traceIndex:Ue.trace.index,dp:0,pos:Ue.pos,posref:Ue.posref,size:Ue.by*(Ie?y:1)/2,pmin:0,pmax:Ie?q.width:q.height}]}),J.sort(function(Ue,Be){return Ue[0].posref-Be[0].posref||Y*(Be[0].traceIndex-Ue[0].traceIndex)});!re&&K<=te;){for(K++,re=!0,pe=0;pe<J.length-1;){var be=J[pe],Le=J[pe+1],De=be[be.length-1],ye=Le[0];if((le=De.pos+De.dp+De.size-ye.pos-ye.dp+ye.size)>.01&&De.pmin===ye.pmin&&De.pmax===ye.pmax){for(xe=Le.length-1;xe>=0;xe--)Le[xe].dp+=le;for(be.push.apply(be,Le),J.splice(pe+1,1),we=0,xe=be.length-1;xe>=0;xe--)we+=be[xe].dp;for(ge=we/be.length,xe=be.length-1;xe>=0;xe--)be[xe].dp-=ge;re=!1}else pe++}J.forEach(de)}for(pe=J.length-1;pe>=0;pe--){var Ce=J[pe];for(xe=Ce.length-1;xe>=0;xe--){var Fe=Ce[xe],Ke=Fe.datum;Ke.offset=Fe.dp,Ke.del=Fe.del}}}(It,Cr?"xa":"ya",J),F(It,Cr,J._invScaleX,J._invScaleY)),Y&&Y.tagName){var Qt=s.getComponentMethod("annotations","hasClickToShow")(V,pt);t(_.select(Y),Qt?"pointer":"")}!Y||K||!function U(V,H,q){if(!q||q.length!==V._hoverdata.length)return!0;for(var K=q.length-1;K>=0;K--){var Y=q[K],te=V._hoverdata[K];if(Y.curveNumber!==te.curveNumber||String(Y.pointNumber)!==String(te.pointNumber)||String(Y.pointNumbers)!==String(te.pointNumbers))return!0}return!1}(V,0,lt)||(lt&&V.emit("plotly_unhover",{event:H,points:lt}),V.emit("plotly_hover",{event:H,points:V._hoverdata,xaxes:xe,yaxes:ke,xvals:Ue,yvals:Be}))}function C(V){return[V.trace.index,V.index,V.x0,V.y0,V.name,V.attr,V.xa?V.xa._id:"",V.ya?V.ya._id:""].join(",")}ae.hover=function(H,q,K,Y){H=E.getGraphDiv(H);var te=q.target;E.throttle(H._fullLayout._uid+x.HOVERID,x.HOVERMINTIME,function(){o(H,q,K,Y,te)})},ae.loneHover=function(H,q){var K=!0;Array.isArray(H)||(K=!1,H=[H]);var Y=q.gd,te=W(Y),J=G(Y),le=z(H.map(function(de){var be=de._x0||de.x0||de.x||0,Le=de._x1||de.x1||de.x||0,De=de._y0||de.y0||de.y||0,ye=de._y1||de.y1||de.y||0,Ce=de.eventData;if(Ce){var Fe=Math.min(be,Le),Ke=Math.max(be,Le),Ue=Math.min(De,ye),Be=Math.max(De,ye),Ie=de.trace;if(s.traceIs(Ie,"gl3d")){var nt=Y._fullLayout[Ie.scene]._scene.container,gt=nt.offsetLeft,Nt=nt.offsetTop;Fe+=gt,Ke+=gt,Ue+=Nt,Be+=Nt}Ce.bbox={x0:Fe+J,x1:Ke+J,y0:Ue+te,y1:Be+te},q.inOut_bbox&&q.inOut_bbox.push(Ce.bbox)}else Ce=!1;return{color:de.color||a.defaultLine,x0:de.x0||de.x||0,x1:de.x1||de.x||0,y0:de.y0||de.y||0,y1:de.y1||de.y||0,xLabel:de.xLabel,yLabel:de.yLabel,zLabel:de.zLabel,text:de.text,name:de.name,idealAlign:de.idealAlign,borderColor:de.borderColor,fontFamily:de.fontFamily,fontSize:de.fontSize,fontColor:de.fontColor,nameLength:de.nameLength,textAlign:de.textAlign,trace:de.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:de.hovertemplate||!1,hovertemplateLabels:de.hovertemplateLabels||!1,eventData:Ce}}),{gd:Y,hovermode:"closest",rotateLabels:false,bgColor:q.bgColor||a.background,container:_.select(q.container),outerContainer:q.outerContainer||q.container}),pe=0,xe=0;return le.sort(function(de,be){return de.y0-be.y0}).each(function(de,be){var Le=de.y0-de.by/2;de.offset=Le-5<pe?pe-Le+5:0,pe=Le+de.by+de.offset,be===q.anchorIndex&&(xe=de.offset)}).each(function(de){de.offset-=xe}),F(le,false,Y._fullLayout._invScaleX,Y._fullLayout._invScaleY),K?le:le.node()};var R=/<extra>([\s\S]*)<\/extra>/;function z(V,H){var q=H.gd,K=q._fullLayout,Y=H.hovermode,te=H.rotateLabels,J=H.bgColor,j=H.container,re=H.outerContainer,le=H.commonLabelOpts||{};if(0===V.length)return[[]];var ge=H.fontFamily||x.HOVERFONT,pe=H.fontSize||x.HOVERFONTSIZE,xe=V[0],ke=xe.xa,we=xe.ya,de=Y.charAt(0),be=xe[de+"Label"],Le=$(q,re),De=Le.top,ye=Le.width,Ce=Le.height,Fe=void 0!==be&&xe.distance<=H.hoverdistance&&("x"===Y||"y"===Y);if(Fe){var Ue,Be,Ke=!0;for(Ue=0;Ue<V.length;Ue++)if(Ke&&void 0===V[Ue].zLabel&&(Ke=!1),Be=V[Ue].hoverinfo||V[Ue].trace.hoverinfo){var Ie=Array.isArray(Be)?Be:Be.split("+");if(-1===Ie.indexOf("all")&&-1===Ie.indexOf(Y)){Fe=!1;break}}Ke&&(Fe=!1)}var nt=j.selectAll("g.axistext").data(Fe?[0]:[]);if(nt.enter().append("g").classed("axistext",!0),nt.exit().remove(),nt.each(function(){var Vt=_.select(this),Tr=E.ensureSingle(Vt,"path","",function(en){en.style({"stroke-width":"1px"})}),tt=E.ensureSingle(Vt,"text","",function(en){en.attr("data-notex",1)}),je=le.bgcolor||a.defaultLine,ct=le.bordercolor||a.contrast(je),ht=a.contrast(je),Me={family:le.font.family||ge,size:le.font.size||pe,color:le.font.color||ht};Tr.style({fill:je,stroke:ct}),tt.text(be).call(i.font,Me).call(n.positionText,0,0).call(n.convertToTspans,q),Vt.attr("transform","");var Je,We,Se=$(q,tt.node());if("x"===Y){var st="top"===ke.side?"-":"";tt.attr("text-anchor","middle").call(n.positionText,0,"top"===ke.side?De-Se.bottom-M-f:De-Se.top+M+f),We=we._offset+("top"===ke.side?0:we._length);var lt=Se.width/2+f;(Je=ke._offset+(xe.x0+xe.x1)/2)<lt?(Je=lt,Tr.attr("d","M-"+(lt-M)+",0L-"+(lt-2*M)+","+st+M+"H"+(f+Se.width/2)+"v"+st+(2*f+Se.height)+"H-"+lt+"V"+st+M+"Z")):Je>K.width-lt?(Je=K.width-lt,Tr.attr("d","M"+(lt-M)+",0L"+lt+","+st+M+"v"+st+(2*f+Se.height)+"H-"+lt+"V"+st+M+"H"+(lt-2*M)+"Z")):Tr.attr("d","M0,0L"+M+","+st+M+"H"+(f+Se.width/2)+"v"+st+(2*f+Se.height)+"H-"+(f+Se.width/2)+"V"+st+M+"H-"+M+"Z")}else{var pt,Ct,Dt;"right"===we.side?(pt="start",Ct=1,Dt="",Je=ke._offset+ke._length):(pt="end",Ct=-1,Dt="-",Je=ke._offset),We=we._offset+(xe.y0+xe.y1)/2,tt.attr("text-anchor",pt),Tr.attr("d","M0,0L"+Dt+M+","+M+"V"+(f+Se.height/2)+"h"+Dt+(2*f+Se.width)+"V-"+(f+Se.height/2)+"H"+Dt+M+"V-"+M+"Z");var Jr,Gt=Se.height/2,fr=De-Se.top-Gt,pr="clip"+K._uid+"commonlabel"+we._id;if(Je<Se.width+2*f+M){Jr="M-"+(M+f)+"-"+Gt+"h-"+(Se.width-f)+"V"+Gt+"h"+(Se.width-f)+"Z";var Lr=Se.width-Je+f;n.positionText(tt,Lr,fr),"end"===pt&&tt.selectAll("tspan").each(function(){var en=_.select(this),mr=i.tester.append("text").text(en.text()).call(i.font,Me),wr=$(q,mr.node());Math.round(wr.width)<Math.round(Se.width)&&en.attr("x",Lr-wr.width),mr.remove()})}else n.positionText(tt,Ct*(f+M),fr),Jr=null;var Ar=K._topclips.selectAll("#"+pr).data(Jr?[0]:[]);Ar.enter().append("clipPath").attr("id",pr).append("path"),Ar.exit().remove(),Ar.select("path").attr("d",Jr),i.setClipUrl(tt,Jr?pr:null,q)}Vt.attr("transform",e(Je,We))}),b.isUnifiedHover(Y)){j.selectAll("g.hovertext").remove();var gt=V.filter(function(Vt){return"none"!==Vt.hoverinfo});if(0===gt.length)return;var Nt=K.hoverlabel,St=Nt.font,Zt={font:St};S({showlegend:!0,legend:{title:{text:be,font:St},font:St,bgcolor:Nt.bgcolor,bordercolor:Nt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:K.legend?K.legend.traceorder:void 0,orientation:"v"}},Zt,q._fullData);var Et=Zt.legend;Et.entries=[];for(var wt=0;wt<gt.length;wt++){var at=gt[wt];if("none"!==at.hoverinfo){var vt=O(at,!0,Y,K,be),Qe=vt[0],Pe=vt[1];at.name=Pe,at.text=""!==Pe?Pe+" : "+Qe:Qe;var Ze=at.cd[at.index];Ze&&(Ze.mc&&(at.mc=Ze.mc),Ze.mcc&&(at.mc=Ze.mcc),Ze.mlc&&(at.mlc=Ze.mlc),Ze.mlcc&&(at.mlc=Ze.mlcc),Ze.mlw&&(at.mlw=Ze.mlw),Ze.mrc&&(at.mrc=Ze.mrc),Ze.dir&&(at.dir=Ze.dir)),at._distinct=!0,Et.entries.push([at])}}Et.entries.sort(function(Vt,Tr){return Vt[0].trace.index-Tr[0].trace.index}),Et.layer=j,Et._inHover=!0,Et._groupTitleFont=Nt.grouptitlefont,p(q,Et);var nr,rr,br,Hr,Xe=j.select("g.legend"),rt=$(q,Xe.node()),kt=rt.width+2*f,Tt=rt.height+2*f,Xt=gt[0],ar=(Xt.x0+Xt.x1)/2,Ut=(Xt.y0+Xt.y1)/2,Jt=!(s.traceIs(Xt.trace,"bar-like")||s.traceIs(Xt.trace,"box-violin"));"y"===de?Jt?(rr=Ut-f,nr=Ut+f):(rr=Math.min.apply(null,gt.map(function(Vt){return Math.min(Vt.y0,Vt.y1)})),nr=Math.max.apply(null,gt.map(function(Vt){return Math.max(Vt.y0,Vt.y1)}))):rr=nr=E.mean(gt.map(function(Vt){return(Vt.y0+Vt.y1)/2}))-Tt/2,"x"===de?Jt?(br=ar+f,Hr=ar-f):(br=Math.max.apply(null,gt.map(function(Vt){return Math.max(Vt.x0,Vt.x1)})),Hr=Math.min.apply(null,gt.map(function(Vt){return Math.min(Vt.x0,Vt.x1)}))):br=Hr=E.mean(gt.map(function(Vt){return(Vt.x0+Vt.x1)/2}))-kt/2;var et,Yt,on=ke._offset,jr=we._offset;return Hr+=on-kt,rr+=jr-Tt,et=(br+=on)+kt<ye&&br>=0?br:Hr+kt<ye&&Hr>=0?Hr:on+kt<ye?on:br-ar<ar-Hr+kt?ye-kt:0,Yt=(nr+=jr)+Tt<Ce&&nr>=0?nr:rr+Tt<Ce&&rr>=0?rr:jr+Tt<Ce?jr:nr-Ut<Ut-rr+Tt?Ce-Tt:0,Xe.attr("transform",e((et+=f)-1,(Yt+=f)-1)),Xe}var qt=j.selectAll("g.hovertext").data(V,function(Vt){return C(Vt)});return qt.enter().append("g").classed("hovertext",!0).each(function(){var Vt=_.select(this);Vt.append("rect").call(a.fill,a.addOpacity(J,.8)),Vt.append("text").classed("name",!0),Vt.append("path").style("stroke-width","1px"),Vt.append("text").classed("nums",!0).call(i.font,ge,pe)}),qt.exit().remove(),qt.each(function(Vt){var Tr=_.select(this).attr("transform",""),tt=Vt.color;Array.isArray(tt)&&(tt=tt[Vt.eventData[0].pointNumber]);var je=Vt.bgcolor||tt,ct=a.combine(a.opacity(je)?je:a.defaultLine,J),ht=a.combine(a.opacity(tt)?tt:a.defaultLine,J),Me=Vt.borderColor||a.contrast(ct),Se=O(Vt,Fe,Y,K,be,Tr),Je=Se[0],We=Se[1],st=Tr.select("text.nums").call(i.font,Vt.fontFamily||ge,Vt.fontSize||pe,Vt.fontColor||Me).text(Je).attr("data-notex",1).call(n.positionText,0,0).call(n.convertToTspans,q),lt=Tr.select("text.name"),pt=0,Ct=0;if(We&&We!==Je){lt.call(i.font,Vt.fontFamily||ge,Vt.fontSize||pe,ht).text(We).attr("data-notex",1).call(n.positionText,0,0).call(n.convertToTspans,q);var Dt=$(q,lt.node());pt=Dt.width+2*f,Ct=Dt.height+2*f}else lt.remove(),Tr.select("rect").remove();Tr.select("path").style({fill:ct,stroke:Me});var Gt=Vt.xa._offset+(Vt.x0+Vt.x1)/2,fr=Vt.ya._offset+(Vt.y0+Vt.y1)/2,pr=Math.abs(Vt.x1-Vt.x0),Jr=Math.abs(Vt.y1-Vt.y0),Lr=$(q,st.node()),Ar=Lr.width/K._invScaleX,en=Lr.height/K._invScaleY;Vt.ty0=(De-Lr.top)/K._invScaleY,Vt.bx=Ar+2*f,Vt.by=Math.max(en+2*f,Ct),Vt.anchor="start",Vt.txwidth=Ar,Vt.tx2width=pt,Vt.offset=0;var wr,Wr,mr=(Ar+M+f+pt)*K._invScaleX;if(te)Vt.pos=Gt,wr=fr+Jr/2+mr<=Ce,Wr=fr-Jr/2-mr>=0,"top"!==Vt.idealAlign&&wr||!Wr?wr?(fr+=Jr/2,Vt.anchor="start"):Vt.anchor="middle":(fr-=Jr/2,Vt.anchor="end");else if(Vt.pos=fr,wr=Gt+pr/2+mr<=ye,Wr=Gt-pr/2-mr>=0,"left"!==Vt.idealAlign&&wr||!Wr)if(wr)Gt+=pr/2,Vt.anchor="start";else{Vt.anchor="middle";var Kr=mr/2,Cr=Gt+Kr-ye,it=Gt-Kr;Cr>0&&(Gt-=Cr),it<0&&(Gt+=-it)}else Gt-=pr/2,Vt.anchor="end";st.attr("text-anchor",Vt.anchor),pt&&lt.attr("text-anchor",Vt.anchor),Tr.attr("transform",e(Gt,fr)+(te?c(w):""))}),qt}function O(V,H,q,K,Y,te){var J="",j="";void 0!==V.nameOverride&&(V.name=V.nameOverride),V.name&&(V.trace._meta&&(V.name=E.templateString(V.name,V.trace._meta)),J=oe(V.name,V.nameLength));var re=q.charAt(0);void 0!==V.zLabel?(void 0!==V.xLabel&&(j+="x: "+V.xLabel+"<br>"),void 0!==V.yLabel&&(j+="y: "+V.yLabel+"<br>"),"choropleth"!==V.trace.type&&"choroplethmapbox"!==V.trace.type&&(j+=(j?"z: ":"")+V.zLabel)):H&&V[re+"Label"]===Y?j=V[("x"===re?"y":"x")+"Label"]||"":void 0===V.xLabel?void 0!==V.yLabel&&"scattercarpet"!==V.trace.type&&(j=V.yLabel):j=void 0===V.yLabel?V.xLabel:"("+V.xLabel+", "+V.yLabel+")",(V.text||0===V.text)&&!Array.isArray(V.text)&&(j+=(j?"<br>":"")+V.text),void 0!==V.extraText&&(j+=(j?"<br>":"")+V.extraText),te&&""===j&&!V.hovertemplate&&(""===J&&te.remove(),j=J);var ge=V.hovertemplate||!1;if(ge){var pe=V.hovertemplateLabels||V;V[re+"Label"]!==Y&&(pe[re+"other"]=pe[re+"Val"],pe[re+"otherLabel"]=pe[re+"Label"]),j=(j=E.hovertemplateString(ge,pe,K._d3locale,V.eventData[0]||{},V.trace._meta)).replace(R,function(xe,ke){return J=oe(ke,V.nameLength),""})}return[j,J]}function F(V,H,q,K){var Y=function(J){return J*q},te=function(J){return J*K};V.each(function(J){var j=_.select(this);if(J.del)return j.remove();var re=j.select("text.nums"),le=J.anchor,ge="end"===le?-1:1,pe={start:1,end:-1,middle:0}[le],xe=pe*(M+f),ke=xe+pe*(J.txwidth+f),we=0,de=J.offset,be="middle"===le;be&&(xe-=J.tx2width/2,ke+=J.txwidth/2+f),H&&(de*=-T,we=J.offset*A),j.select("path").attr("d",be?"M-"+Y(J.bx/2+J.tx2width/2)+","+te(de-J.by/2)+"h"+Y(J.bx)+"v"+te(J.by)+"h-"+Y(J.bx)+"Z":"M0,0L"+Y(ge*M+we)+","+te(M+de)+"v"+te(J.by/2-M)+"h"+Y(ge*J.bx)+"v-"+te(J.by)+"H"+Y(ge*M+we)+"V"+te(de-M)+"Z");var Le=we+xe,De=de+J.ty0-J.by/2+f,ye=J.textAlign||"auto";"auto"!==ye&&("left"===ye&&"start"!==le?(re.attr("text-anchor","start"),Le=be?-J.bx/2-J.tx2width/2+f:-J.bx-f):"right"===ye&&"end"!==le&&(re.attr("text-anchor","end"),Le=be?J.bx/2-J.tx2width/2-f:J.bx+f)),re.call(n.positionText,Y(Le),te(De)),J.tx2width&&(j.select("text.name").call(n.positionText,Y(ke+pe*f+we),te(de+J.ty0-J.by/2+f)),j.select("rect").call(i.setRect,Y(ke+(pe-1)*J.tx2width/2+we),te(de-J.by/2-1),Y(J.tx2width),te(J.by+2)))})}function D(V,H){var q=V.index,K=V.trace||{},Y=V.cd[0],te=V.cd[q]||{};function J(xe){return xe||k(xe)&&0===xe}var j=Array.isArray(q)?function(xe,ke){var we=E.castOption(Y,q,xe);return J(we)?we:E.extractOption({},K,"",ke)}:function(xe,ke){return E.extractOption(te,K,xe,ke)};function re(xe,ke,we){var de=j(ke,we);J(de)&&(V[xe]=de)}if(re("hoverinfo","hi","hoverinfo"),re("bgcolor","hbg","hoverlabel.bgcolor"),re("borderColor","hbc","hoverlabel.bordercolor"),re("fontFamily","htf","hoverlabel.font.family"),re("fontSize","hts","hoverlabel.font.size"),re("fontColor","htc","hoverlabel.font.color"),re("nameLength","hnl","hoverlabel.namelength"),re("textAlign","hta","hoverlabel.align"),V.posref="y"===H||"closest"===H&&"h"===K.orientation?V.xa._offset+(V.x0+V.x1)/2:V.ya._offset+(V.y0+V.y1)/2,V.x0=E.constrain(V.x0,0,V.xa._length),V.x1=E.constrain(V.x1,0,V.xa._length),V.y0=E.constrain(V.y0,0,V.ya._length),V.y1=E.constrain(V.y1,0,V.ya._length),void 0!==V.xLabelVal&&(V.xLabel="xLabel"in V?V.xLabel:g.hoverLabelText(V.xa,V.xLabelVal,K.xhoverformat),V.xVal=V.xa.c2d(V.xLabelVal)),void 0!==V.yLabelVal&&(V.yLabel="yLabel"in V?V.yLabel:g.hoverLabelText(V.ya,V.yLabelVal,K.yhoverformat),V.yVal=V.ya.c2d(V.yLabelVal)),void 0!==V.zLabelVal&&void 0===V.zLabel&&(V.zLabel=String(V.zLabelVal)),!(isNaN(V.xerr)||"log"===V.xa.type&&V.xerr<=0)){var le=g.tickText(V.xa,V.xa.c2l(V.xerr),"hover").text;V.xLabel+=void 0!==V.xerrneg?" +"+le+" / -"+g.tickText(V.xa,V.xa.c2l(V.xerrneg),"hover").text:" \xb1 "+le,"x"===H&&(V.distance+=1)}if(!(isNaN(V.yerr)||"log"===V.ya.type&&V.yerr<=0)){var ge=g.tickText(V.ya,V.ya.c2l(V.yerr),"hover").text;V.yLabel+=void 0!==V.yerrneg?" +"+ge+" / -"+g.tickText(V.ya,V.ya.c2l(V.yerrneg),"hover").text:" \xb1 "+ge,"y"===H&&(V.distance+=1)}var pe=V.hoverinfo||V.trace.hoverinfo;return pe&&"all"!==pe&&(-1===(pe=Array.isArray(pe)?pe:pe.split("+")).indexOf("x")&&(V.xLabel=void 0),-1===pe.indexOf("y")&&(V.yLabel=void 0),-1===pe.indexOf("z")&&(V.zLabel=void 0),-1===pe.indexOf("text")&&(V.text=void 0),-1===pe.indexOf("name")&&(V.name=void 0)),V}function N(V,H,q){var le,ge,K=q.container,Y=q.fullLayout,te=Y._size,J=q.event,j=!!H.hLinePoint,re=!!H.vLinePoint;if(K.selectAll(".spikeline").remove(),re||j){var pe=a.combine(Y.plot_bgcolor,Y.paper_bgcolor);if(j){var ke,we,xe=H.hLinePoint;le=xe&&xe.xa,"cursor"===(ge=xe&&xe.ya).spikesnap?(ke=J.pointerX,we=J.pointerY):(ke=le._offset+xe.x,we=ge._offset+xe.y);var Fe,Ke,be=m.readability(xe.color,pe)<1.5?a.contrast(pe):xe.color,Le=ge.spikemode,De=ge.spikethickness,ye=ge.spikecolor||be,Ce=g.getPxPosition(V,ge);if(-1!==Le.indexOf("toaxis")||-1!==Le.indexOf("across")){if(-1!==Le.indexOf("toaxis")&&(Fe=Ce,Ke=ke),-1!==Le.indexOf("across")){var Ue=ge._counterDomainMin,Be=ge._counterDomainMax;"free"===ge.anchor&&(Ue=Math.min(Ue,ge.position),Be=Math.max(Be,ge.position)),Fe=te.l+Ue*te.w,Ke=te.l+Be*te.w}K.insert("line",":first-child").attr({x1:Fe,x2:Ke,y1:we,y2:we,"stroke-width":De,stroke:ye,"stroke-dasharray":i.dashStyle(ge.spikedash,De)}).classed("spikeline",!0).classed("crisp",!0),K.insert("line",":first-child").attr({x1:Fe,x2:Ke,y1:we,y2:we,"stroke-width":De+2,stroke:pe}).classed("spikeline",!0).classed("crisp",!0)}-1!==Le.indexOf("marker")&&K.insert("circle",":first-child").attr({cx:Ce+("right"!==ge.side?De:-De),cy:we,r:De,fill:ye}).classed("spikeline",!0)}if(re){var nt,gt,Ie=H.vLinePoint;ge=Ie&&Ie.ya,"cursor"===(le=Ie&&Ie.xa).spikesnap?(nt=J.pointerX,gt=J.pointerY):(nt=le._offset+Ie.x,gt=ge._offset+Ie.y);var at,vt,St=m.readability(Ie.color,pe)<1.5?a.contrast(pe):Ie.color,Bt=le.spikemode,Zt=le.spikethickness,Et=le.spikecolor||St,wt=g.getPxPosition(V,le);if(-1!==Bt.indexOf("toaxis")||-1!==Bt.indexOf("across")){if(-1!==Bt.indexOf("toaxis")&&(at=wt,vt=gt),-1!==Bt.indexOf("across")){var Qe=le._counterDomainMin,Pe=le._counterDomainMax;"free"===le.anchor&&(Qe=Math.min(Qe,le.position),Pe=Math.max(Pe,le.position)),at=te.t+(1-Pe)*te.h,vt=te.t+(1-Qe)*te.h}K.insert("line",":first-child").attr({x1:nt,x2:nt,y1:at,y2:vt,"stroke-width":Zt,stroke:Et,"stroke-dasharray":i.dashStyle(le.spikedash,Zt)}).classed("spikeline",!0).classed("crisp",!0),K.insert("line",":first-child").attr({x1:nt,x2:nt,y1:at,y2:vt,"stroke-width":Zt+2,stroke:pe}).classed("spikeline",!0).classed("crisp",!0)}-1!==Bt.indexOf("marker")&&K.insert("circle",":first-child").attr({cx:nt,cy:wt-("top"!==le.side?Zt:-Zt),r:Zt,fill:Et}).classed("spikeline",!0)}}}function X(V,H){return!H||H.vLinePoint!==V._spikepoints.vLinePoint||H.hLinePoint!==V._spikepoints.hLinePoint}function oe(V,H){return n.plainText(V||"",{len:H,allowedTags:["br","sub","sup","b","i","em"]})}function ne(V,H,q){var K=H[V+"a"],Y=H[V+"Val"],te=H.cd[0];if("category"===K.type)Y=K._categoriesMap[Y];else if("date"===K.type){var J=H.trace[V+"periodalignment"];if(J){var j=H.cd[H.index],re=j[V+"Start"];void 0===re&&(re=j[V]);var le=j[V+"End"];void 0===le&&(le=j[V]);var ge=le-re;"end"===J?Y+=ge:"middle"===J&&(Y+=ge/2)}Y=K.d2c(Y)}return te&&te.t&&te.t.posLetter===K._id&&("group"===q.boxmode||"group"===q.violinmode)&&(Y+=te.t.dPos),Y}function W(V){return V.offsetTop+V.clientTop}function G(V){return V.offsetLeft+V.clientLeft}function $(V,H){var q=V._fullLayout,K=H.getBoundingClientRect(),Y=K.x,te=K.y,J=Y+K.width,j=te+K.height,re=E.apply3DTransform(q._invTransform)(Y,te),le=E.apply3DTransform(q._invTransform)(J,j),ge=re[0],pe=re[1],xe=le[0],ke=le[1];return{x:ge,y:pe,width:xe-ge,height:ke-pe,top:Math.min(pe,ke),left:Math.min(ge,xe),right:Math.max(ge,xe),bottom:Math.max(pe,ke)}}},{"../../lib":503,"../../lib/events":492,"../../lib/override_cursor":514,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../legend/defaults":418,"../legend/draw":419,"./constants":400,"./helpers":402,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],404:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../color"),m=v("./helpers").isUnifiedHover;ie.exports=function(e,c,d,n){n=n||{};var t=c.legend;function i(a){n.font[a]||(n.font[a]=t?c.legend.font[a]:c.font[a])}c&&m(c.hovermode)&&(n.font||(n.font={}),i("size"),i("family"),i("color"),t?(n.bgcolor||(n.bgcolor=k.combine(c.legend.bgcolor,c.paper_bgcolor)),n.bordercolor||(n.bordercolor=c.legend.bordercolor)):n.bgcolor||(n.bgcolor=c.paper_bgcolor)),d("hoverlabel.bgcolor",n.bgcolor),d("hoverlabel.bordercolor",n.bordercolor),d("hoverlabel.namelength",n.namelength),_.coerceFont(d,"hoverlabel.font",n.font),d("hoverlabel.align",n.align)}},{"../../lib":503,"../color":366,"./helpers":402}],405:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./layout_attributes");ie.exports=function(E,e){function c(d,n){return void 0!==e[d]?e[d]:_.coerce(E,e,k,d,n)}return c("clickmode"),c("hovermode")}},{"../../lib":503,"./layout_attributes":407}],406:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../lib"),m=v("../dragelement"),E=v("./helpers"),e=v("./layout_attributes"),c=v("./hover");ie.exports={moduleType:"component",name:"fx",constants:v("./constants"),schema:{layout:e},attributes:v("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:v("./layout_global_defaults"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc"),getDistanceFunction:E.getDistanceFunction,getClosest:E.getClosest,inbox:E.inbox,quadrature:E.quadrature,appendArrayPointValue:E.appendArrayPointValue,castHoverOption:function n(i,a,r){return k.castOption(i,a,"hoverlabel."+r)},castHoverinfo:function t(i,a,r){return k.castOption(i,r,"hoverinfo",function g(s){return k.coerceHoverinfo({hoverinfo:s},{_module:i._module},a)})},hover:c.hover,unhover:m.unhover,loneHover:c.loneHover,loneUnhover:function d(i){var a=k.isD3Selection(i)?i:_.select(i);a.selectAll("g.hovertext").remove(),a.selectAll(".spikeline").remove()},click:v("./click")}},{"../../lib":503,"../dragelement":385,"./attributes":397,"./calc":398,"./click":399,"./constants":400,"./defaults":401,"./helpers":402,"./hover":403,"./layout_attributes":407,"./layout_defaults":408,"./layout_global_defaults":409,"@plotly/d3":58}],407:[function(v,ie,ae){"use strict";var _=v("./constants"),k=v("../../plots/font_attributes"),m=k({editType:"none"});m.family.dflt=_.HOVERFONT,m.size.dflt=_.HOVERFONTSIZE,ie.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:m,grouptitlefont:k({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":585,"./constants":400}],408:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./layout_attributes"),m=v("./hovermode_defaults"),E=v("./hoverlabel_defaults");ie.exports=function(c,d){function n(s,b){return _.coerce(c,d,k,s,b)}m(c,d)&&(n("hoverdistance"),n("spikedistance")),"select"===n("dragmode")&&n("selectdirection");var a=d._has("mapbox"),r=d._has("geo"),g=d._basePlotModules.length;"zoom"===d.dragmode&&((a||r)&&1===g||a&&r&&2===g)&&(d.dragmode="pan"),E(c,d,n),_.coerceFont(n,"hoverlabel.grouptitlefont",d.hoverlabel.font)}},{"../../lib":503,"./hoverlabel_defaults":404,"./hovermode_defaults":405,"./layout_attributes":407}],409:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./hoverlabel_defaults"),m=v("./layout_attributes");ie.exports=function(e,c){k(e,c,function d(n,t){return _.coerce(e,c,m,n,t)})}},{"../../lib":503,"./hoverlabel_defaults":404,"./layout_attributes":407}],410:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../lib/regex").counter,m=v("../../plots/domain").attributes,E=v("../../plots/cartesian/constants").idRegex,e=v("../../plot_api/plot_template"),c={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[k("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[E.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[E.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:m({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function d(r,g,s){var b=g[s+"axes"],x=Object.keys((r._splomAxes||{})[s]||{});return Array.isArray(b)?b:x.length?x:void 0}function t(r,g,s,b,x,S){var p=g(r+"gap",s),w=g("domain."+r);g(r+"side",b);for(var l=new Array(x),y=w[0],A=(w[1]-y)/(x-p),T=A*(1-p),M=0;M<x;M++){var f=y+A*M;l[S?x-1-M:M]=[f,f+T]}return l}function a(r,g,s,b,x){var p,S=new Array(s);function w(l,y){-1!==g.indexOf(y)&&void 0===b[y]?(S[l]=y,b[y]=l):S[l]=""}if(Array.isArray(r))for(p=0;p<s;p++)w(p,r[p]);else for(w(0,x),p=1;p<s;p++)w(p,x+(p+1));return S}ie.exports={moduleType:"component",name:"grid",schema:{layout:{grid:c}},layoutAttributes:c,sizeDefaults:function n(r,g){var s=r.grid||{},b=d(g,s,"x"),x=d(g,s,"y");if(r.grid||b||x){var y,A,S=Array.isArray(s.subplots)&&Array.isArray(s.subplots[0]),p=Array.isArray(b),w=Array.isArray(x),l=p&&b!==s.xaxes&&w&&x!==s.yaxes;S?(y=s.subplots.length,A=s.subplots[0].length):(w&&(y=x.length),p&&(A=b.length));var T=e.newContainer(g,"grid"),f=M("rows",y),u=M("columns",A);if(f*u>1){S||p||w||"independent"===M("pattern")&&(S=!0),T._hasSubplotGrid=S;var O,I,C="top to bottom"===M("roworder"),z=S?.3:.1;l&&g._splomGridDflt&&(O=g._splomGridDflt.xside,I=g._splomGridDflt.yside),T._domains={x:t("x",M,S?.2:.1,O,u),y:t("y",M,z,I,f,C)}}else delete g.grid}function M(F,D){return _.coerce(s,T,c,F,D)}},contentDefaults:function i(r,g){var s=g.grid;if(s&&s._domains){var y,A,T,M,f,u,h,b=r.grid||{},x=g._subplots,S=s._hasSubplotGrid,p=s.rows,w=s.columns,l="independent"===s.pattern,o=s._axisMap={};if(S){var C=b.subplots||[];u=s.subplots=new Array(p);var R=1;for(y=0;y<p;y++){var z=u[y]=new Array(w),O=C[y]||[];for(A=0;A<w;A++)if(l?(f=1===R?"xy":"x"+R+"y"+R,R++):f=O[A],z[A]="",-1!==x.cartesian.indexOf(f)){if(h=f.indexOf("y"),T=f.slice(0,h),M=f.slice(h),void 0!==o[T]&&o[T]!==A||void 0!==o[M]&&o[M]!==y)continue;z[A]=f,o[T]=A,o[M]=y}}}else{var I=d(g,b,"x"),F=d(g,b,"y");s.xaxes=a(I,x.xaxis,w,o,"x"),s.yaxes=a(F,x.yaxis,p,o,"y")}var D=s._anchors={},N="top to bottom"===s.roworder;for(var U in o){var se,ne,W,X=U.charAt(0),oe=s[X+"side"];if(oe.length<8)D[U]="free";else if("x"===X){if("t"===oe.charAt(0)===N?(se=0,ne=1,W=p):(se=p-1,ne=-1,W=-1),S){var G=o[U];for(y=se;y!==W;y+=ne)if((f=u[y][G])&&(h=f.indexOf("y"),f.slice(0,h)===U)){D[U]=f.slice(h);break}}else for(y=se;y!==W;y+=ne)if(-1!==x.cartesian.indexOf(U+(M=s.yaxes[y]))){D[U]=M;break}}else if("l"===oe.charAt(0)?(se=0,ne=1,W=w):(se=w-1,ne=-1,W=-1),S){var $=o[U];for(y=se;y!==W;y+=ne)if((f=u[$][y])&&(h=f.indexOf("y"),f.slice(h)===U)){D[U]=f.slice(0,h);break}}else for(y=se;y!==W;y+=ne)if(-1!==x.cartesian.indexOf((T=s.xaxes[y])+U)){D[U]=T;break}}}}}},{"../../lib":503,"../../lib/regex":520,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/domain":584}],411:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/constants"),k=v("../../plot_api/plot_template").templatedArray;v("../../constants/axis_placeable_objects"),ie.exports=k("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",_.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",_.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561}],412:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../lib/to_log_range");ie.exports=function(E,e,c,d){e=e||{};var n="log"===c&&"linear"===e.type;if(n||"linear"===c&&"log"===e.type)for(var r,g,i=E._fullLayout.images,a=e._id.charAt(0),s=0;s<i.length;s++)if(g="images["+s+"].",(r=i[s])[a+"ref"]===e._id){var b=r[a],x=r["size"+a],S=null,p=null;if(n){S=k(b,e.range);var w=x/Math.pow(10,S)/2;p=2*Math.log(w+Math.sqrt(1+w*w))/Math.LN10}else p=(S=Math.pow(10,b))*(Math.pow(10,x/2)-Math.pow(10,-x/2));_(S)?_(p)||(p=null):(S=null,p=null),d(g+a,S),d(g+"size"+a,p)}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],413:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../plots/cartesian/axes"),m=v("../../plots/array_container_defaults"),E=v("./attributes");function c(d,n,t){function i(w,l){return _.coerce(d,n,E,w,l)}var a=i("source");if(!i("visible",!!a))return n;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var g={_fullLayout:t},s=["x","y"],b=0;b<2;b++){var x=s[b],S=k.coerceRef(d,n,g,x,"paper",void 0);"paper"!==S&&k.getFromId(g,S)._imgIndices.push(n._index),k.coercePosition(n,g,i,S,x,0)}return n}ie.exports=function(n,t){m(n,t,{name:"images",handleItemDefaults:c})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":411}],414:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../drawing"),m=v("../../plots/cartesian/axes"),E=v("../../plots/cartesian/axis_ids"),e=v("../../constants/xmlns_namespaces");ie.exports=function(d){var r,g,n=d._fullLayout,t=[],i={},a=[];for(g=0;g<n.images.length;g++){var s=n.images[g];if(s.visible)if("below"===s.layer&&"paper"!==s.xref&&"paper"!==s.yref){r=E.ref2id(s.xref)+E.ref2id(s.yref);var b=n._plots[r];if(!b){a.push(s);continue}b.mainplot&&(r=b.mainplot.id),i[r]||(i[r]=[]),i[r].push(s)}else"above"===s.layer?t.push(s):a.push(s)}var x_x={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},x_y={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function S(M){var f=_.select(this);if(this._imgSrc!==M.source)if(f.attr("xmlns",e.svg),M.source&&"data:"===M.source.slice(0,5))f.attr("xlink:href",M.source),this._imgSrc=M.source;else{var u=new Promise(function(h){var o=new Image;function C(){f.remove(),h()}this.img=o,o.setAttribute("crossOrigin","anonymous"),o.onerror=C,o.onload=function(){var R=document.createElement("canvas");R.width=this.width,R.height=this.height,R.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var O=R.toDataURL("image/png");f.attr("xlink:href",O),h()},f.on("error",C),o.src=M.source,this._imgSrc=M.source}.bind(this));d._promises.push(u)}}function p(M){var z,O,f=_.select(this),u=m.getFromId(d,M.xref),h=m.getFromId(d,M.yref),o="domain"===m.getRefType(M.xref),C="domain"===m.getRefType(M.yref),R=n._size;z=void 0!==u?"string"==typeof M.xref&&o?u._length*M.sizex:Math.abs(u.l2p(M.sizex)-u.l2p(0)):M.sizex*R.w,O=void 0!==h?"string"==typeof M.yref&&C?h._length*M.sizey:Math.abs(h.l2p(M.sizey)-h.l2p(0)):M.sizey*R.h;var N,U,I=z*x_x[M.xanchor].offset,F=O*x_y[M.yanchor].offset,D=x_x[M.xanchor].sizing+x_y[M.yanchor].sizing;switch(N=void 0!==u?"string"==typeof M.xref&&o?u._length*M.x+u._offset:u.r2p(M.x)+u._offset:M.x*R.w+R.l,N+=I,U=void 0!==h?"string"==typeof M.yref&&C?h._length*(1-M.y)+h._offset:h.r2p(M.y)+h._offset:R.h-M.y*R.h+R.t,U+=F,M.sizing){case"fill":D+=" slice";break;case"stretch":D="none"}f.attr({x:N,y:U,width:z,height:O,preserveAspectRatio:D,opacity:M.opacity});var se=(u&&"domain"!==m.getRefType(M.xref)?u._id:"")+(h&&"domain"!==m.getRefType(M.yref)?h._id:"");k.setClipUrl(f,se?"clip"+n._uid+se:null,d)}var w=n._imageLowerLayer.selectAll("image").data(a),l=n._imageUpperLayer.selectAll("image").data(t);w.enter().append("image"),l.enter().append("image"),w.exit().remove(),l.exit().remove(),w.each(function(M){S.bind(this)(M),p.bind(this)(M)}),l.each(function(M){S.bind(this)(M),p.bind(this)(M)});var y=Object.keys(n._plots);for(g=0;g<y.length;g++){var A=n._plots[r=y[g]];if(A.imagelayer){var T=A.imagelayer.selectAll("image").data(i[r]||[]);T.enter().append("image"),T.exit().remove(),T.each(function(M){S.bind(this)(M),p.bind(this)(M)})}}}},{"../../constants/xmlns_namespaces":480,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../drawing":388,"@plotly/d3":58}],415:[function(v,ie,ae){"use strict";ie.exports={moduleType:"component",name:"images",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),includeBasePlot:v("../../plots/cartesian/include_components")("images"),draw:v("./draw"),convertCoords:v("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":411,"./convert_coords":412,"./defaults":413,"./draw":414}],416:[function(v,ie,ae){"use strict";var _=v("../../plots/font_attributes"),k=v("../color/attributes");ie.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:_({editType:"legend"}),grouptitlefont:_({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:_({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":585,"../color/attributes":365}],417:[function(v,ie,ae){"use strict";ie.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],418:[function(v,ie,ae){"use strict";var _=v("../../registry"),k=v("../../lib"),m=v("../../plot_api/plot_template"),E=v("../../plots/attributes"),e=v("./attributes"),c=v("../../plots/layout_attributes"),d=v("./helpers");ie.exports=function(t,i,a){var r=t.legend||{},g=m.newContainer(i,"legend");function s(O,I){return k.coerce(r,g,e,O,I)}for(var b,x=function(O,I){return k.coerce(b._input,b,E,O,I)},S=i.font||{},p=k.coerceFont(s,"grouptitlefont",k.extendFlat({},S,{size:Math.round(1.1*S.size)})),w=0,l=!1,y="normal",A=0;A<a.length;A++)(b=a[A]).visible&&((b.showlegend||b._dfltShowLegend&&!(b._module&&b._module.attributes&&b._module.attributes.showlegend&&!1===b._module.attributes.showlegend.dflt))&&(w++,b.showlegend&&(l=!0,(_.traceIs(b,"pie-like")||!0===b._input.showlegend)&&w++),k.coerceFont(x,"legendgrouptitle.font",p)),(_.traceIs(b,"bar")&&"stack"===i.barmode||-1!==["tonextx","tonexty"].indexOf(b.fill))&&(y=d.isGrouped({traceorder:y})?"grouped+reversed":"reversed"),void 0!==b.legendgroup&&""!==b.legendgroup&&(y=d.isReversed({traceorder:y})?"reversed+grouped":"grouped"));var T=k.coerce(t,i,c,"showlegend",l&&w>1);if(!1===T&&(i.legend=void 0),(!1!==T||r.uirevision)&&(s("uirevision",i.uirevision),!1!==T)){s("bgcolor",i.paper_bgcolor),s("bordercolor"),s("borderwidth");var h,o,C,M=k.coerceFont(s,"font",i.font),u="h"===s("orientation");if(u?(h=0,_.getComponentMethod("rangeslider","isVisible")(t.xaxis)?(o=1.1,C="bottom"):(o=-.1,C="top")):(h=1.02,o=1,C="auto"),s("traceorder",y),d.isGrouped(i.legend)&&s("tracegroupgap"),s("itemsizing"),s("itemwidth"),s("itemclick"),s("itemdoubleclick"),s("groupclick"),s("x",h),s("xanchor"),s("y",o),s("yanchor",C),s("valign"),k.noneOrAll(r,g,["x","y"]),s("title.text")){s("title.side",u?"left":"top");var z=k.extendFlat({},M,{size:k.bigFont(M.size)});k.coerceFont(s,"title.font",z)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/layout_attributes":610,"../../registry":638,"./attributes":416,"./helpers":422}],419:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../lib"),m=v("../../plots/plots"),E=v("../../registry"),e=v("../../lib/events"),c=v("../dragelement"),d=v("../drawing"),n=v("../color"),t=v("../../lib/svg_text_utils"),i=v("./handle_click"),a=v("./constants"),r=v("../../constants/alignment"),g=r.LINE_SPACING,s=r.FROM_TL,b=r.FROM_BR,x=v("./get_legend_data"),S=v("./style"),p=v("./helpers");function l(O,I){var N,F=O._fullLayout,D="legend"+F._uid,U=I._inHover;if(U?(N=I.layer,D+="-hover"):N=F._infolayer,N){var X;if(O._legendMouseDownTime||(O._legendMouseDownTime=0),U){if(!I.entries)return;X=x(I.entries,I)}else{if(!O.calcdata)return;X=F.showlegend&&x(O.calcdata,I)}var oe=F.hiddenlabels||[];if(!(U||F.showlegend&&X.length))return N.selectAll(".legend").remove(),F._topdefs.select("#"+D).remove(),m.autoMargin(O,"legend");var se=k.ensureSingle(N,"g","legend",function(Y){U||Y.attr("pointer-events","all")}),ne=k.ensureSingleById(F._topdefs,"clipPath",D,function(Y){Y.append("rect")}),W=k.ensureSingle(se,"rect","bg",function(Y){Y.attr("shape-rendering","crispEdges")});W.call(n.stroke,I.bordercolor).call(n.fill,I.bgcolor).style("stroke-width",I.borderwidth+"px");var G=k.ensureSingle(se,"g","scrollbox"),$=I.title;if(I._titleWidth=0,I._titleHeight=0,$.text){var V=k.ensureSingle(G,"text","legendtitletext");V.attr("text-anchor","start").call(d.font,$.font).text($.text),f(V,G,O,I,1)}else G.selectAll(".legendtitletext").remove();var H=k.ensureSingle(se,"rect","scrollbar",function(Y){Y.attr(a.scrollBarEnterAttrs).call(n.fill,a.scrollBarColor)}),q=G.selectAll("g.groups").data(X);q.enter().append("g").attr("class","groups"),q.exit().remove();var K=q.selectAll("g.traces").data(k.identity);K.enter().append("g").attr("class","traces"),K.exit().remove(),K.style("opacity",function(Y){var te=Y[0].trace;return E.traceIs(te,"pie-like")?-1!==oe.indexOf(Y[0].label)?.5:1:"legendonly"===te.visible?.5:1}).each(function(){_.select(this).call(A,O,I)}).call(S,O,I).each(function(){U||_.select(this).call(M,O)}),k.syncOrAsync([m.previousPromises,function(){return function o(O,I,F,D){var N=O._fullLayout;D||(D=N.legend);var U=N._size,X=p.isVertical(D),oe=p.isGrouped(D),se=D.borderwidth,ne=2*se,W=a.itemGap,G=D.itemwidth+2*W,$=2*(se+W),V=z(D),H=D.y<0||0===D.y&&"top"===V,q=D.y>1||1===D.y&&"bottom"===V,K=D.tracegroupgap;D._maxHeight=Math.max(H||q?N.height/2:U.h,30);var Y=0;D._width=0,D._height=0;var te=function h(O){var I=0,F=0,D=O.title.side;return D&&(-1!==D.indexOf("left")&&(I=O._titleWidth),-1!==D.indexOf("top")&&(F=O._titleHeight)),[I,F]}(D);if(X)F.each(function(Ie){var nt=Ie[0].height;d.setTranslate(this,se+te[0],se+te[1]+D._height+nt/2+W),D._height+=nt,D._width=Math.max(D._width,Ie[0].width)}),Y=G+D._width,D._width+=W+G+ne,D._height+=$,oe&&(I.each(function(Ie,nt){d.setTranslate(this,0,nt*D.tracegroupgap)}),D._height+=(D._lgroupsLength-1)*D.tracegroupgap);else{var J=R(D),le=q||H,ge=N.width/2;D._maxWidth=Math.max(D.x<0||0===D.x&&"right"===J?le&&"left"===J?U.l+U.w:ge:D.x>1||1===D.x&&"left"===J?le&&"right"===J?U.r+U.w:ge:U.w,2*G);var pe=0,xe=0;F.each(function(Ie){var nt=Ie[0].width+G;pe=Math.max(pe,nt),xe+=nt}),Y=null;var ke=0;if(oe){var we=0,de=0,be=0;I.each(function(){var Ie=0,nt=0;_.select(this).selectAll("g.traces").each(function(Nt){var St=Nt[0].width,Bt=Nt[0].height;d.setTranslate(this,te[0],te[1]+se+W+Bt/2+nt),nt+=Bt,Ie=Math.max(Ie,G+St)});var gt=Ie+W;de>0&&gt+se+de>D._maxWidth?(ke=Math.max(ke,de),de=0,be+=we+K,we=nt):we=Math.max(we,nt),d.setTranslate(this,de,be),de+=gt}),D._width=Math.max(ke,de)+se,D._height=be+we+$}else{var Le=F.size(),De=xe+ne+(Le-1)*W<D._maxWidth,ye=0,Ce=0,Fe=0,Ke=0;F.each(function(Ie){var nt=Ie[0].height,gt=G+Ie[0].width,Nt=(De?gt:pe)+W;Nt+se+Ce-W>=D._maxWidth&&(ke=Math.max(ke,Ke),Ce=0,Fe+=ye,D._height+=ye,ye=0),d.setTranslate(this,te[0]+se+Ce,te[1]+se+Fe+nt/2+W),Ke=Ce+gt+W,Ce+=Nt,ye=Math.max(ye,nt)}),De?(D._width=Ce+ne,D._height=ye+$):(D._width=Math.max(ke,Ke)+ne,D._height+=ye+$)}}D._width=Math.ceil(Math.max(D._width+te[0],D._titleWidth+2*(se+a.titlePad))),D._height=Math.ceil(Math.max(D._height+te[1],D._titleHeight+2*(se+a.itemGap))),D._effHeight=Math.min(D._height,D._maxHeight);var Ue=O._context.edits,Be=Ue.legendText||Ue.legendPosition;F.each(function(Ie){var nt=_.select(this).select(".legendtoggle"),gt=Ie[0].height,Nt=Be?G:Y||G+Ie[0].width;X||(Nt+=W/2),d.setRect(nt,0,-gt/2,Nt,gt)})}(O,q,K,I)},function(){var Ie,nt,gt,Nt,Y=F._size,te=I.borderwidth;if(!U){if(function C(O){var F=O._fullLayout.legend,D=R(F),N=z(F);return m.autoMargin(O,"legend",{x:F.x,y:F.y,l:F._width*s[D],r:F._width*b[D],b:F._effHeight*b[N],t:F._effHeight*s[N]})}(O))return;var j=Y.l+Y.w*I.x-s[R(I)]*I._width,re=Y.t+Y.h*(1-I.y)-s[z(I)]*I._effHeight;if(F.margin.autoexpand){var le=j,ge=re;j=k.constrain(j,0,F.width-I._width),re=k.constrain(re,0,F.height-I._effHeight),j!==le&&k.log("Constrain legend.x to make legend fit inside graph"),re!==ge&&k.log("Constrain legend.y to make legend fit inside graph")}d.setTranslate(se,j,re)}if(H.on(".drag",null),se.on("wheel",null),U||I._height<=I._maxHeight||O._context.staticPlot){var pe=I._effHeight;U&&(pe=I._height),W.attr({width:I._width-te,height:pe-te,x:te/2,y:te/2}),d.setTranslate(G,0,0),ne.select("rect").attr({width:I._width-2*te,height:pe-2*te,x:te,y:te}),d.setClipUrl(G,D,O),d.setRect(H,0,0,0,0),delete I._scrollY}else{var xe=Math.max(a.scrollBarMinHeight,I._effHeight*I._effHeight/I._height),ke=I._effHeight-xe-2*a.scrollBarMargin,we=I._height-I._effHeight,de=ke/we,be=Math.min(I._scrollY||0,we);W.attr({width:I._width-2*te+a.scrollBarWidth+a.scrollBarMargin,height:I._effHeight-te,x:te/2,y:te/2}),ne.select("rect").attr({width:I._width-2*te+a.scrollBarWidth+a.scrollBarMargin,height:I._effHeight-2*te,x:te,y:te+be}),d.setClipUrl(G,D,O),Be(be,xe,de),se.on("wheel",function(){Be(be=k.constrain(I._scrollY+_.event.deltaY/ke*we,0,we),xe,de),0!==be&&be!==we&&_.event.preventDefault()});var Le,ye,Ke=_.behavior.drag().on("dragstart",function(){var St=_.event.sourceEvent;Le="touchstart"===St.type?St.changedTouches[0].clientY:St.clientY,ye=be}).on("drag",function(){var St=_.event.sourceEvent;2===St.buttons||St.ctrlKey||Be(be=function(St,Bt,Zt){return k.constrain((Zt-Bt)/de+St,0,we)}(ye,Le,"touchmove"===St.type?St.changedTouches[0].clientY:St.clientY),xe,de)});H.call(Ke);var Ue=_.behavior.drag().on("dragstart",function(){var St=_.event.sourceEvent;"touchstart"===St.type&&(Le=St.changedTouches[0].clientY,ye=be)}).on("drag",function(){var St=_.event.sourceEvent;"touchmove"===St.type&&Be(be=function(St,Bt,Zt){return k.constrain((Bt-Zt)/de+St,0,we)}(ye,Le,St.changedTouches[0].clientY),xe,de)});G.call(Ue)}function Be(St,Bt,Zt){I._scrollY=O._fullLayout.legend._scrollY=St,d.setTranslate(G,0,-St),d.setRect(H,I._width,a.scrollBarMargin+St*Zt,a.scrollBarWidth,Bt),ne.select("rect").attr("y",te+St)}O._context.edits.legendPosition&&(se.classed("cursor-move",!0),c.init({element:se.node(),gd:O,prepFn:function(){var St=d.getTranslate(se);gt=St.x,Nt=St.y},moveFn:function(St,Bt){var Zt=gt+St,Et=Nt+Bt;d.setTranslate(se,Zt,Et),Ie=c.align(Zt,0,Y.l,Y.l+Y.w,I.xanchor),nt=c.align(Et,0,Y.t+Y.h,Y.t,I.yanchor)},doneFn:function(){void 0!==Ie&&void 0!==nt&&E.call("_guiRelayout",O,{"legend.x":Ie,"legend.y":nt})},clickFn:function(St,Bt){var Zt=N.selectAll("g.traces").filter(function(){var Et=this.getBoundingClientRect();return Bt.clientX>=Et.left&&Bt.clientX<=Et.right&&Bt.clientY>=Et.top&&Bt.clientY<=Et.bottom});Zt.size()>0&&y(O,se,Zt,St,Bt)}}))}],O)}}function y(O,I,F,D,N){var U=F.data()[0][0].trace,X={event:N,node:F.node(),curveNumber:U.index,expandedIndex:U._expandedIndex,data:O.data,layout:O.layout,frames:O._transitionData._frames,config:O._context,fullData:O._fullData,fullLayout:O._fullLayout};U._group&&(X.group=U._group),E.traceIs(U,"pie-like")&&(X.label=F.datum()[0].label),!1!==e.triggerHandler(O,"plotly_legendclick",X)&&(1===D?I._clickTimeout=setTimeout(function(){!O._fullLayout||i(F,O,D)},O._context.doubleClickDelay):2===D&&(I._clickTimeout&&clearTimeout(I._clickTimeout),O._legendMouseDownTime=0,!1!==e.triggerHandler(O,"plotly_legenddoubleclick",X)&&i(F,O,D)))}function A(O,I,F){var se,ne,D=O.data()[0][0],N=D.trace,U=E.traceIs(N,"pie-like"),X=!F._inHover&&I._context.edits.legendText&&!U,oe=F._maxNameLength;D.groupTitle?(se=D.groupTitle.text,ne=D.groupTitle.font):(ne=F.font,F.entries?se=D.text:(se=U?D.label:N.name,N._meta&&(se=k.templateString(se,N._meta))));var W=k.ensureSingle(O,"text","legendtext");W.attr("text-anchor","start").call(d.font,ne).text(X?T(se,oe):se),t.positionText(W,F.itemwidth+2*a.itemGap,0),X?W.call(t.makeEditable,{gd:I,text:se}).call(f,O,I,F).on("edit",function($){this.text(T($,oe)).call(f,O,I,F);var V=D.trace._fullInput||{},H={};if(E.hasTransform(V,"groupby")){var q=E.getTransformIndices(V,"groupby"),Y=k.keyedContainer(V,"transforms["+q[q.length-1]+"].styles","target","value.name");Y.set(D.trace._group,$),H=Y.constructUpdate()}else H.name=$;return E.call("_guiRestyle",I,H,N.index)}):f(W,O,I,F)}function T(O,I){var F=Math.max(4,I);if(O&&O.trim().length>=F/2)return O;for(var D=F-(O=O||"").length;D>0;D--)O+=" ";return O}function M(O,I){var D,F=I._context.doubleClickDelay,N=1,U=k.ensureSingle(O,"rect","legendtoggle",function(X){I._context.staticPlot||X.style("cursor","pointer").attr("pointer-events","all"),X.call(n.fill,"rgba(0,0,0,0)")});I._context.staticPlot||(U.on("mousedown",function(){(D=(new Date).getTime())-I._legendMouseDownTime<F?N+=1:(N=1,I._legendMouseDownTime=D)}),U.on("mouseup",function(){if(!I._dragged&&!I._editing){var X=I._fullLayout.legend;(new Date).getTime()-I._legendMouseDownTime>F&&(N=Math.max(N-1,1)),y(I,X,O,N,_.event)}}))}function f(O,I,F,D,N){D._inHover&&O.attr("data-notex",!0),t.convertToTspans(O,F,function(){!function u(O,I,F,D){var N=O.data()[0][0];if(F._inHover||!N||N.trace.showlegend){var U=O.select("g[class*=math-group]"),X=U.node();F||(F=I._fullLayout.legend);var W,G,oe=F.borderwidth,ne=(1===D?F.title.font:N.groupTitle?N.groupTitle.font:F.font).size*g;if(X){var $=d.bBox(X);W=$.height,G=$.width,1===D?d.setTranslate(U,oe,oe+.75*W):d.setTranslate(U,0,.25*W)}else{var V=O.select(1===D?".legendtitletext":".legendtext"),H=t.lineCount(V),q=V.node();if(W=ne*H,G=q?d.bBox(q).width:0,1===D)"left"===F.title.side&&(G+=2*a.itemGap),t.positionText(V,oe+a.titlePad,oe+ne);else{var K=2*a.itemGap+F.itemwidth;N.groupTitle&&(K=a.itemGap,G-=F.itemwidth),t.positionText(V,K,-ne*((H-1)/2-.3))}}1===D?(F._titleWidth=G,F._titleHeight=W):(N.lineHeight=ne,N.height=Math.max(W,16)+3,N.width=G)}else O.remove()}(I,F,D,N)})}function R(O){return k.isRightAnchor(O)?"right":k.isCenterAnchor(O)?"center":"left"}function z(O){return k.isBottomAnchor(O)?"bottom":k.isMiddleAnchor(O)?"middle":"top"}ie.exports=function(I,F){return F||(F=I._fullLayout.legend||{}),l(I,F)}},{"../../constants/alignment":471,"../../lib":503,"../../lib/events":492,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":417,"./get_legend_data":420,"./handle_click":421,"./helpers":422,"./style":424,"@plotly/d3":58}],420:[function(v,ie,ae){"use strict";var _=v("../../registry"),k=v("./helpers");ie.exports=function(E,e){var b,x,c=e._inHover,d=k.isGrouped(e),n=k.isReversed(e),t={},i=[],a=!1,r={},g=0,s=0;function S(F,D){if(""!==F&&k.isGrouped(e))-1===i.indexOf(F)?(i.push(F),a=!0,t[F]=[D]):t[F].push(D);else{var N="~~i"+g;i.push(N),t[N]=[D],g++}}for(b=0;b<E.length;b++){var p=E[b],w=p[0],l=w.trace,y=l.legendgroup;if(c||l.visible&&l.showlegend)if(_.traceIs(l,"pie-like"))for(r[y]||(r[y]={}),x=0;x<p.length;x++){var A=p[x].label;r[y][A]||(S(y,{label:A,color:p[x].color,i:p[x].i,trace:l,pts:p[x].pts}),r[y][A]=!0,s=Math.max(s,(A||"").length))}else S(y,w),s=Math.max(s,(l.name||"").length)}if(!i.length)return[];var T=!a||!d,M=[];for(b=0;b<i.length;b++){var f=t[i[b]];M.push(T?f[0]:f)}for(T&&(M=[M]),b=0;b<M.length;b++){var u=1/0;for(x=0;x<M[b].length;x++){var h=M[b][x].trace.legendrank;u>h&&(u=h)}M[b][0]._groupMinRank=u,M[b][0]._preGroupSort=b}var C=function(F,D){return F.trace.legendrank-D.trace.legendrank||F._preSort-D._preSort};for(M.forEach(function(F,D){F[0]._preGroupSort=D}),M.sort(function(F,D){return F[0]._groupMinRank-D[0]._groupMinRank||F[0]._preGroupSort-D[0]._preGroupSort}),b=0;b<M.length;b++){M[b].forEach(function(F,D){F._preSort=D}),M[b].sort(C);var R=M[b][0].trace,z=null;for(x=0;x<M[b].length;x++){var O=M[b][x].trace.legendgrouptitle;if(O&&O.text){z=O,c&&(O.font=e._groupTitleFont);break}}if(n&&M[b].reverse(),z){var I=!1;for(x=0;x<M[b].length;x++)if(_.traceIs(M[b][x].trace,"pie-like")){I=!0;break}M[b].unshift({i:-1,groupTitle:z,noClick:I,trace:{showlegend:R.showlegend,legendgroup:R.legendgroup,visible:"toggleitem"===e.groupclick||R.visible}})}for(x=0;x<M[b].length;x++)M[b][x]=[M[b][x]]}return e._lgroupsLength=M.length,e._maxNameLength=s,M}},{"../../registry":638,"./helpers":422}],421:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../registry"),m=!0;ie.exports=function(e,c,d){var n=c._fullLayout;if(!c._dragged&&!c._editing){var r,t=n.legend.itemclick,i=n.legend.itemdoubleclick,a=n.legend.groupclick;if(1===d&&"toggle"===t&&"toggleothers"===i&&m&&c.data&&c._context.showTips&&_.notifier(_._(c,"Double-click on legend to isolate one trace"),"long"),m=!1,1===d?r=t:2===d&&(r=i),r){var g="togglegroup"===a,s=n.hiddenlabels?n.hiddenlabels.slice():[],b=e.data()[0][0];if(!b.groupTitle||!b.noClick){var w,l,y,A,T,x=c._fullData,S=b.trace,p=S.legendgroup,f={},u=[],h=[],o=[];if(k.traceIs(S,"pie-like")){var z=b.label,O=s.indexOf(z);"toggle"===r?-1===O?s.push(z):s.splice(O,1):"toggleothers"===r&&(s=[],c.calcdata[0].forEach(function($){z!==$.label&&s.push($.label)}),c._fullLayout.hiddenlabels&&c._fullLayout.hiddenlabels.length===s.length&&-1===O&&(s=[])),k.call("_guiRelayout",c,"hiddenlabels",s)}else{var D,I=p&&p.length,F=[];if(I)for(w=0;w<x.length;w++)(D=x[w]).visible&&D.legendgroup===p&&F.push(w);if("toggle"===r){var N;switch(S.visible){case!0:N="legendonly";break;case!1:N=!1;break;case"legendonly":N=!0}if(I)if(g)for(w=0;w<x.length;w++)!1!==x[w].visible&&x[w].legendgroup===p&&R(x[w],N);else R(S,N);else R(S,N)}else if("toggleothers"===r){var X,oe,ne=!0;for(w=0;w<x.length;w++)if(oe=!0!==x[w].showlegend,!(x[w]===S||oe||(X=I&&x[w].legendgroup===p,X||!0!==x[w].visible||k.traceIs(x[w],"notLegendIsolatable")))){ne=!1;break}for(w=0;w<x.length;w++)if(!1!==x[w].visible&&!k.traceIs(x[w],"notLegendIsolatable"))switch(S.visible){case"legendonly":R(x[w],!0);break;case!0:oe=!0!==x[w].showlegend&&!x[w].legendgroup,R(x[w],!(!(X=x[w]===S||I&&x[w].legendgroup===p)&&!oe)||!!ne||"legendonly")}}for(w=0;w<h.length;w++)if(y=h[w]){var W=y.constructUpdate(),G=Object.keys(W);for(l=0;l<G.length;l++)(f[A=G[l]]=f[A]||[])[o[w]]=W[A]}for(T=Object.keys(f),w=0;w<T.length;w++)for(A=T[w],l=0;l<u.length;l++)f[A].hasOwnProperty(l)||(f[A][l]=void 0);k.call("_guiRestyle",c,f,u)}}}}function C($,V,H){var q=u.indexOf($),K=f[V];return K||(K=f[V]=[]),-1===u.indexOf($)&&(u.push($),q=u.length-1),K[q]=H,q}function R($,V){if(!b.groupTitle||g){var H=$._fullInput;if(k.hasTransform(H,"groupby")){var q=h[H.index];if(!q){var K=k.getTransformIndices(H,"groupby");q=_.keyedContainer(H,"transforms["+K[K.length-1]+"].styles","target","value.visible"),h[H.index]=q}var te=q.get($._group);void 0===te&&(te=!0),!1!==te&&q.set($._group,V),o[H.index]=C(H.index,"visible",!1!==H.visible)}else C(H.index,"visible",!1!==H.visible&&V)}}}},{"../../lib":503,"../../registry":638}],422:[function(v,ie,ae){"use strict";ae.isGrouped=function(k){return-1!==(k.traceorder||"").indexOf("grouped")},ae.isVertical=function(k){return"h"!==k.orientation},ae.isReversed=function(k){return-1!==(k.traceorder||"").indexOf("reversed")}},{}],423:[function(v,ie,ae){"use strict";ie.exports={moduleType:"component",name:"legend",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),draw:v("./draw"),style:v("./style")}},{"./attributes":416,"./defaults":418,"./draw":419,"./style":424}],424:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../registry"),m=v("../../lib"),E=m.strTranslate,e=v("../drawing"),c=v("../color"),d=v("../colorscale/helpers").extractOpts,n=v("../../traces/scatter/subtypes"),t=v("../../traces/pie/style_one"),i=v("../../traces/pie/helpers").castOption,a=v("./constants");function S(l,y){return(y?"radial":"horizontal")+(l?"":"reversed")}function p(l){var y=l[0].trace,A=y.contours,T=n.hasLines(y),M=n.hasMarkers(y),f=y.visible&&y.fill&&"none"!==y.fill,u=!1,h=!1;if(A){var o=A.coloring;"lines"===o?u=!0:T="none"===o||"heatmap"===o||A.showlines,"constraint"===A.type?f="="!==A._operation:("fill"===o||"heatmap"===o)&&(h=!0)}return{showMarker:M,showLine:T,showFill:f,showGradientLine:u,showGradientFill:h,anyLine:T||u,anyFill:f||h}}function w(l,y,A){return l&&m.isArrayOrTypedArray(l)?y:l>A?A:l}ie.exports=function(y,A,T){T||(T=A._fullLayout.legend);var f="constant"===T.itemsizing,u=T.itemwidth,o=E((u+2*a.itemGap)/2,0),C=function(G,$,V,H){var q;if(G+1)q=G;else{if(!($&&$.width>0))return 0;q=$.width}return f?H:Math.min(q,V)};function D(G,$,V){var H=G[0].trace,q=H.marker||{},K=q.line||{},Y=V?H.visible&&H.type===V:k.traceIs(H,"bar"),te=_.select($).select("g.legendpoints").selectAll("path.legend"+V).data(Y?[G]:[]);te.enter().append("path").classed("legend"+V,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",o),te.exit().remove(),te.each(function(J){var j=_.select(this),re=J[0],le=C(re.mlw,q.line,5,2);j.style("stroke-width",le+"px");var ge=re.mcc;if(!T._inHover&&"mc"in re){var pe=d(q),xe=pe.mid;void 0===xe&&(xe=(pe.max+pe.min)/2),ge=e.tryColorscale(q,"")(xe)}var ke=ge||re.mc||q.color,we=q.pattern,de=we&&e.getPatternAttr(we.shape,0,"");if(de){var be=e.getPatternAttr(we.bgcolor,0,null),Le=e.getPatternAttr(we.fgcolor,0,null),De=we.fgopacity,ye=w(we.size,8,10),Ce=w(we.solidity,.5,1);j.call(e.pattern,"legend",A,"legend-"+H.uid,de,ye,Ce,ge,we.fillmode,be,Le,De)}else j.call(c.fill,ke);le&&c.stroke(j,re.mlc||K.color)})}function ne(G,$,V){var H=G[0],q=H.trace,K=V?q.visible&&q.type===V:k.traceIs(q,V),Y=_.select($).select("g.legendpoints").selectAll("path.legend"+V).data(K?[G]:[]);if(Y.enter().append("path").classed("legend"+V,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",o),Y.exit().remove(),Y.size()){var te=(q.marker||{}).line,J=C(i(te.width,H.pts),te,5,2),j=m.minExtend(q,{marker:{line:{width:J}}});j.marker.line.color=te.color;var re=m.minExtend(H,{trace:j});t(Y,re,j)}}y.each(function(G){var $=_.select(this),V=m.ensureSingle($,"g","layers");V.style("opacity",G[0].trace.opacity);var H=T.valign,q=G[0].lineHeight,K=G[0].height;V.attr("transform","middle"!==H&&q&&K?E(0,{top:1,bottom:-1}[H]*(.5*(q-K+3))):null),V.selectAll("g.legendfill").data([G]).enter().append("g").classed("legendfill",!0),V.selectAll("g.legendlines").data([G]).enter().append("g").classed("legendlines",!0);var re=V.selectAll("g.legendsymbols").data([G]);re.enter().append("g").classed("legendsymbols",!0),re.selectAll("g.legendpoints").data([G]).enter().append("g").classed("legendpoints",!0)}).each(function W(G){var V,$=G[0].trace,H=[];if($.visible)switch($.type){case"histogram2d":case"heatmap":H=[["M-15,-2V4H15V-2Z"]],V=!0;break;case"choropleth":case"choroplethmapbox":H=[["M-6,-6V6H6V-6Z"]],V=!0;break;case"densitymapbox":H=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],V="radial";break;case"cone":H=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],V=!1;break;case"streamtube":H=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],V=!1;break;case"surface":H=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],V=!0;break;case"mesh3d":H=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],V=!1;break;case"volume":H=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],V=!0;break;case"isosurface":H=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],V=!1}var q=_.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(H);q.enter().append("path").classed("legend3dandfriends",!0).attr("transform",o).style("stroke-miterlimit",1),q.exit().remove(),q.each(function(K,Y){var ge,te=_.select(this),J=d($),j=J.colorscale,re=J.reversescale;if(j){if(!V){var xe=j.length;ge=0===Y?j[re?xe-1:0][1]:1===Y?j[re?0:xe-1][1]:j[Math.floor((xe-1)/2)][1]}}else{var pe=$.vertexcolor||$.facecolor||$.color;ge=m.isArrayOrTypedArray(pe)?pe[Y]||pe[0]:pe}te.attr("d",K[0]),ge?te.call(c.fill,ge):te.call(function(ke){ke.size()&&e.gradient(ke,A,"legendfill-"+$.uid,S(re,"radial"===V),j,"fill")})})}).each(function O(G){var $=G[0].trace,V="waterfall"===$.type;if(G[0]._distinct&&V){var H=G[0].trace[G[0].dir].marker;return G[0].mc=H.color,G[0].mlw=H.line.width,G[0].mlc=H.line.color,D(G,this,"waterfall")}var q=[];$.visible&&V&&(q=G[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var K=_.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(q);K.enter().append("path").classed("legendwaterfall",!0).attr("transform",o).style("stroke-miterlimit",1),K.exit().remove(),K.each(function(Y){var te=_.select(this),J=$[Y[0]].marker,j=C(void 0,J.line,5,2);te.attr("d",Y[1]).style("stroke-width",j+"px").call(c.fill,J.color),j&&te.call(c.stroke,J.line.color)})}).each(function F(G){D(G,this,"funnel")}).each(function I(G){D(G,this)}).each(function N(G){var $=G[0].trace,V=_.select(this).select("g.legendpoints").selectAll("path.legendbox").data($.visible&&k.traceIs($,"box-violin")?[G]:[]);V.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",o),V.exit().remove(),V.each(function(){var H=_.select(this);if("all"!==$.boxpoints&&"all"!==$.points||0!==c.opacity($.fillcolor)||0!==c.opacity(($.line||{}).color)){var K=C(void 0,$.line,5,2);H.style("stroke-width",K+"px").call(c.fill,$.fillcolor),K&&c.stroke(H,$.line.color)}else{var q=m.minExtend($,{marker:{size:f?12:m.constrain($.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});V.call(e.pointStyle,q,A)}})}).each(function se(G){ne(G,this,"funnelarea")}).each(function oe(G){ne(G,this,"pie")}).each(function R(G){var re,le,$=p(G),V=$.showFill,H=$.showLine,q=$.showGradientLine,K=$.showGradientFill,Y=$.anyFill,te=$.anyLine,J=G[0],j=J.trace,ge=d(j),pe=ge.colorscale,xe=ge.reversescale,de=n.hasMarkers(j)||!Y?"M5,0":te?"M5,-2":"M5,-3",be=_.select(this),Le=be.select(".legendfill").selectAll("path").data(V||K?[G]:[]);if(Le.enter().append("path").classed("js-fill",!0),Le.exit().remove(),Le.attr("d",de+"h"+u+"v6h-"+u+"z").call(function(Ce){Ce.size()&&(V?e.fillGroupStyle(Ce,A):e.gradient(Ce,A,"legendfill-"+j.uid,S(xe),pe,"fill"))}),H||q){var De=C(void 0,j.line,10,5);le=m.minExtend(j,{line:{width:De}}),re=[m.minExtend(J,{trace:le})]}var ye=be.select(".legendlines").selectAll("path").data(H||q?[re]:[]);ye.enter().append("path").classed("js-line",!0),ye.exit().remove(),ye.attr("d",de+(q?"l"+u+",0.0001":"h"+u)).call(H?e.lineGroupStyle:function(Ce){if(Ce.size()){var Fe="legendline-"+j.uid;e.lineGroupStyle(Ce),e.gradient(Ce,A,Fe,S(xe),pe,"stroke")}})}).each(function z(G){var j,re,$=p(G),q=$.showLine,K=$.showMarker,Y=G[0],te=Y.trace,J=!K&&!$.anyLine&&!$.anyFill&&n.hasText(te);function le(Le,De,ye,Ce){var Fe=m.nestedProperty(te,Le).get(),Ke=m.isArrayOrTypedArray(Fe)&&De?De(Fe):Fe;if(f&&Ke&&void 0!==Ce&&(Ke=Ce),ye){if(Ke<ye[0])return ye[0];if(Ke>ye[1])return ye[1]}return Ke}function ge(Le){return Y._distinct&&Y.index&&Le[Y.index]?Le[Y.index]:Le[0]}if(K||J||q){var pe={},xe={};if(K){pe.mc=le("marker.color",ge),pe.mx=le("marker.symbol",ge),pe.mo=le("marker.opacity",m.mean,[.2,1]),pe.mlc=le("marker.line.color",ge),pe.mlw=le("marker.line.width",m.mean,[0,5],2),xe.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var ke=le("marker.size",m.mean,[2,16],12);pe.ms=ke,xe.marker.size=ke}q&&(xe.line={width:le("line.width",ge,[0,10],5)}),J&&(pe.tx="Aa",pe.tp=le("textposition",ge),pe.ts=10,pe.tc=le("textfont.color",ge),pe.tf=le("textfont.family",ge)),j=[m.minExtend(Y,pe)],(re=m.minExtend(te,xe)).selectedpoints=null,re.texttemplate=null}var we=_.select(this).select("g.legendpoints"),de=we.selectAll("path.scatterpts").data(K?j:[]);de.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",o),de.exit().remove(),de.call(e.pointStyle,re,A),K&&(j[0].mrc=3);var be=we.selectAll("g.pointtext").data(J?j:[]);be.enter().append("g").classed("pointtext",!0).append("text").attr("transform",o),be.exit().remove(),be.selectAll("text").call(e.textPointStyle,re,A)}).each(function U(G){var $=G[0].trace,V=_.select(this).select("g.legendpoints").selectAll("path.legendcandle").data($.visible&&"candlestick"===$.type?[G,G]:[]);V.enter().append("path").classed("legendcandle",!0).attr("d",function(H,q){return q?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",o).style("stroke-miterlimit",1),V.exit().remove(),V.each(function(H,q){var K=_.select(this),Y=$[q?"increasing":"decreasing"],te=C(void 0,Y.line,5,2);K.style("stroke-width",te+"px").call(c.fill,Y.fillcolor),te&&c.stroke(K,Y.line.color)})}).each(function X(G){var $=G[0].trace,V=_.select(this).select("g.legendpoints").selectAll("path.legendohlc").data($.visible&&"ohlc"===$.type?[G,G]:[]);V.enter().append("path").classed("legendohlc",!0).attr("d",function(H,q){return q?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",o).style("stroke-miterlimit",1),V.exit().remove(),V.each(function(H,q){var K=_.select(this),Y=$[q?"increasing":"decreasing"],te=C(void 0,Y.line,5,2);K.style("fill","none").call(e.dashLine,Y.line.dash,te),te&&c.stroke(K,Y.line.color)})})}},{"../../lib":503,"../../registry":638,"../../traces/pie/helpers":906,"../../traces/pie/style_one":912,"../../traces/scatter/subtypes":952,"../color":366,"../colorscale/helpers":377,"../drawing":388,"./constants":417,"@plotly/d3":58}],425:[function(v,ie,ae){"use strict";v("./constants"),ie.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":427}],426:[function(v,ie,ae){"use strict";var _=v("../../registry"),k=v("../../plots/plots"),m=v("../../plots/cartesian/axis_ids"),E=v("../../fonts/ploticon"),e=v("../shapes/draw").eraseActiveShape,c=v("../../lib"),d=c._,n=ie.exports={};function t(l,y){var C,R,A=y.currentTarget,T=A.getAttribute("data-attr"),M=A.getAttribute("data-val")||!0,f=l._fullLayout,u={},h=m.list(l,null,!0),o=f._cartesianSpikesEnabled;if("zoom"===T){var F,z="in"===M?.5:2,O=(1+z)/2,I=(1-z)/2;for(R=0;R<h.length;R++)if(!(C=h[R]).fixedrange)if(F=C._name,"auto"===M)u[F+".autorange"]=!0;else if("reset"===M){if(void 0===C._rangeInitial)u[F+".autorange"]=!0;else{var D=C._rangeInitial.slice();u[F+".range[0]"]=D[0],u[F+".range[1]"]=D[1]}void 0!==C._showSpikeInitial&&(u[F+".showspikes"]=C._showSpikeInitial,"on"===o&&!C._showSpikeInitial&&(o="off"))}else{var N=[C.r2l(C.range[0]),C.r2l(C.range[1])],U=[O*N[0]+I*N[1],O*N[1]+I*N[0]];u[F+".range[0]"]=C.l2r(U[0]),u[F+".range[1]"]=C.l2r(U[1])}}else"hovermode"===T&&("x"===M||"y"===M)&&A.setAttribute("data-val",M=f._isHoriz?"y":"x"),u[T]=M;f._cartesianSpikesEnabled=o,_.call("_guiRelayout",l,u)}function i(l,y){for(var A=y.currentTarget,T=A.getAttribute("data-attr"),M=A.getAttribute("data-val")||!0,f=l._fullLayout._subplots.gl3d||[],u={},h=T.split("."),o=0;o<f.length;o++)u[f[o]+"."+h[1]]=M;u.dragmode="pan"===M?M:"zoom",_.call("_guiRelayout",l,u)}function a(l,y){for(var T=y.currentTarget.getAttribute("data-attr"),M="resetLastSave"===T,f="resetDefault"===T,u=l._fullLayout,h=u._subplots.gl3d||[],o={},C=0;C<h.length;C++){var D,R=h[C],z=R+".camera",O=R+".aspectratio",I=R+".aspectmode",F=u[R]._scene;M?(o[z+".up"]=F.viewInitial.up,o[z+".eye"]=F.viewInitial.eye,o[z+".center"]=F.viewInitial.center,D=!0):f&&(o[z+".up"]=null,o[z+".eye"]=null,o[z+".center"]=null,D=!0),D&&(o[O+".x"]=F.viewInitial.aspectratio.x,o[O+".y"]=F.viewInitial.aspectratio.y,o[O+".z"]=F.viewInitial.aspectratio.z,o[I]=F.viewInitial.aspectmode)}_.call("_guiRelayout",l,o)}function r(l,y){var A=y.currentTarget,T=A._previousVal,M=l._fullLayout,f=M._subplots.gl3d||[],u=["xaxis","yaxis","zaxis"],h={},o={};if(T)o=T,A._previousVal=null;else{for(var C=0;C<f.length;C++){var R=f[C],z=M[R],O=R+".hovermode";h[O]=z.hovermode,o[O]=!1;for(var I=0;I<3;I++){var F=u[I],D=R+"."+F+".showspikes";o[D]=!1,h[D]=z[F].showspikes}}A._previousVal=h}return o}function s(l,y){for(var A=y.currentTarget,T=A.getAttribute("data-attr"),M=A.getAttribute("data-val")||!0,f=l._fullLayout,u=f._subplots.geo||[],h=0;h<u.length;h++){var o=u[h];if("zoom"===T){var R=f[o].projection.scale;_.call("_guiRelayout",l,o+".projection.scale","in"===M?2*R:.5*R)}}"reset"===T&&w(l,"geo")}function b(l){var y=l._fullLayout;return!y.hovermode&&(y._has("cartesian")?y._isHoriz?"y":"x":"closest")}function x(l){var y=b(l);_.call("_guiRelayout",l,"hovermode",y)}function p(l,y){for(var T=y.currentTarget.getAttribute("data-val"),M=l._fullLayout,f=M._subplots.mapbox||[],h={},o=0;o<f.length;o++){var C=f[o],R=M[C].zoom;h[C+".zoom"]="in"===T?1.05*R:R/1.05}_.call("_guiRelayout",l,h)}function w(l,y){for(var A=l._fullLayout,T=A._subplots[y]||[],M={},f=0;f<T.length;f++)for(var u=T[f],o=A[u]._subplot.viewInitial,C=Object.keys(o),R=0;R<C.length;R++){var z=C[R];M[u+"."+z]=o[z]}_.call("_guiRelayout",l,M)}n.toImage={name:"toImage",title:function(l){return d(l,"png"===((l._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:E.camera,click:function(l){var y=l._context.toImageButtonOptions,A={format:y.format||"png"};c.notifier(d(l,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==A.format&&c.isIE()&&(c.notifier(d(l,"IE only supports svg.  Changing format to svg."),"long"),A.format="svg"),["filename","width","height","scale"].forEach(function(T){T in y&&(A[T]=y[T])}),_.call("downloadImage",l,A).then(function(T){c.notifier(d(l,"Snapshot succeeded")+" - "+T,"long")}).catch(function(){c.notifier(d(l,"Sorry, there was a problem downloading your snapshot!"),"long")})}},n.sendDataToCloud={name:"sendDataToCloud",title:function(l){return d(l,"Edit in Chart Studio")},icon:E.disk,click:function(l){k.sendDataToCloud(l)}},n.editInChartStudio={name:"editInChartStudio",title:function(l){return d(l,"Edit in Chart Studio")},icon:E.pencil,click:function(l){k.sendDataToCloud(l)}},n.zoom2d={name:"zoom2d",_cat:"zoom",title:function(l){return d(l,"Zoom")},attr:"dragmode",val:"zoom",icon:E.zoombox,click:t},n.pan2d={name:"pan2d",_cat:"pan",title:function(l){return d(l,"Pan")},attr:"dragmode",val:"pan",icon:E.pan,click:t},n.select2d={name:"select2d",_cat:"select",title:function(l){return d(l,"Box Select")},attr:"dragmode",val:"select",icon:E.selectbox,click:t},n.lasso2d={name:"lasso2d",_cat:"lasso",title:function(l){return d(l,"Lasso Select")},attr:"dragmode",val:"lasso",icon:E.lasso,click:t},n.drawclosedpath={name:"drawclosedpath",title:function(l){return d(l,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:E.drawclosedpath,click:t},n.drawopenpath={name:"drawopenpath",title:function(l){return d(l,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:E.drawopenpath,click:t},n.drawline={name:"drawline",title:function(l){return d(l,"Draw line")},attr:"dragmode",val:"drawline",icon:E.drawline,click:t},n.drawrect={name:"drawrect",title:function(l){return d(l,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:E.drawrect,click:t},n.drawcircle={name:"drawcircle",title:function(l){return d(l,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:E.drawcircle,click:t},n.eraseshape={name:"eraseshape",title:function(l){return d(l,"Erase active shape")},icon:E.eraseshape,click:e},n.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(l){return d(l,"Zoom in")},attr:"zoom",val:"in",icon:E.zoom_plus,click:t},n.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(l){return d(l,"Zoom out")},attr:"zoom",val:"out",icon:E.zoom_minus,click:t},n.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(l){return d(l,"Autoscale")},attr:"zoom",val:"auto",icon:E.autoscale,click:t},n.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(l){return d(l,"Reset axes")},attr:"zoom",val:"reset",icon:E.home,click:t},n.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(l){return d(l,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:E.tooltip_basic,gravity:"ne",click:t},n.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(l){return d(l,"Compare data on hover")},attr:"hovermode",val:function(l){return l._fullLayout._isHoriz?"y":"x"},icon:E.tooltip_compare,gravity:"ne",click:t},n.zoom3d={name:"zoom3d",_cat:"zoom",title:function(l){return d(l,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:E.zoombox,click:i},n.pan3d={name:"pan3d",_cat:"pan",title:function(l){return d(l,"Pan")},attr:"scene.dragmode",val:"pan",icon:E.pan,click:i},n.orbitRotation={name:"orbitRotation",title:function(l){return d(l,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:E["3d_rotate"],click:i},n.tableRotation={name:"tableRotation",title:function(l){return d(l,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:E["z-axis"],click:i},n.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(l){return d(l,"Reset camera to default")},attr:"resetDefault",icon:E.home,click:a},n.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(l){return d(l,"Reset camera to last save")},attr:"resetLastSave",icon:E.movie,click:a},n.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(l){return d(l,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:E.tooltip_basic,gravity:"ne",click:function g(l,y){var A=r(l,y);_.call("_guiRelayout",l,A)}},n.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(l){return d(l,"Zoom in")},attr:"zoom",val:"in",icon:E.zoom_plus,click:s},n.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(l){return d(l,"Zoom out")},attr:"zoom",val:"out",icon:E.zoom_minus,click:s},n.resetGeo={name:"resetGeo",_cat:"reset",title:function(l){return d(l,"Reset")},attr:"reset",val:null,icon:E.autoscale,click:s},n.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(l){return d(l,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:E.tooltip_basic,gravity:"ne",click:x},n.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(l){return d(l,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:E.tooltip_basic,gravity:"ne",click:x},n.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(l){return d(l,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:E.tooltip_basic,gravity:"ne",click:x},n.resetViewSankey={name:"resetSankeyGroup",title:function(l){return d(l,"Reset view")},icon:E.home,click:function(l){for(var y={"node.groups":[],"node.x":[],"node.y":[]},A=0;A<l._fullData.length;A++){var T=l._fullData[A]._viewInitial;y["node.groups"].push(T.node.groups.slice()),y["node.x"].push(T.node.x.slice()),y["node.y"].push(T.node.y.slice())}_.call("restyle",l,y)}},n.toggleHover={name:"toggleHover",title:function(l){return d(l,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:E.tooltip_basic,gravity:"ne",click:function(l,y){var A=r(l,y);A.hovermode=b(l),_.call("_guiRelayout",l,A)}},n.resetViews={name:"resetViews",title:function(l){return d(l,"Reset views")},icon:E.home,click:function(l,y){var A=y.currentTarget;A.setAttribute("data-attr","zoom"),A.setAttribute("data-val","reset"),t(l,y),A.setAttribute("data-attr","resetLastSave"),a(l,y),w(l,"geo"),w(l,"mapbox")}},n.toggleSpikelines={name:"toggleSpikelines",title:function(l){return d(l,"Toggle Spike Lines")},icon:E.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(l){var y=l._fullLayout;y._cartesianSpikesEnabled="on"===y._cartesianSpikesEnabled?"off":"on",_.call("_guiRelayout",l,function S(l){for(var A="on"===l._fullLayout._cartesianSpikesEnabled,T=m.list(l,null,!0),M={},f=0;f<T.length;f++){var u=T[f];M[u._name+".showspikes"]=!!A||u._showSpikeInitial}return M}(l))}},n.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(l){return d(l,"Reset view")},attr:"reset",icon:E.home,click:function(l){w(l,"mapbox")}},n.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(l){return d(l,"Zoom in")},attr:"zoom",val:"in",icon:E.zoom_plus,click:p},n.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(l){return d(l,"Zoom out")},attr:"zoom",val:"out",icon:E.zoom_minus,click:p}},{"../../fonts/ploticon":482,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../shapes/draw":450}],427:[function(v,ie,ae){"use strict";var _=v("./buttons"),k=Object.keys(_),m=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],E=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(m),e=[];k.forEach(function(d){!function(d){if(-1===E.indexOf(d._cat||d.name)){var n=d.name,t=(d._cat||d.name).toLowerCase();-1===e.indexOf(n)&&e.push(n),-1===e.indexOf(t)&&e.push(t)}}(_[d])}),e.sort(),ie.exports={DRAW_MODES:m,backButtons:E,foreButtons:e}},{"./buttons":426}],428:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../color"),m=v("../../plot_api/plot_template"),E=v("./attributes");ie.exports=function(c,d){var n=c.modebar||{},t=m.newContainer(d,"modebar");function i(r,g){return _.coerce(n,t,E,r,g)}i("orientation"),i("bgcolor",k.addOpacity(d.paper_bgcolor,.5));var a=k.contrast(k.rgb(d.modebar.bgcolor));i("color",k.addOpacity(a,.3)),i("activecolor",k.addOpacity(a,.7)),i("uirevision",d.uirevision),i("add"),i("remove")}},{"../../lib":503,"../../plot_api/plot_template":543,"../color":366,"./attributes":425}],429:[function(v,ie,ae){"use strict";ie.exports={moduleType:"component",name:"modebar",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),manage:v("./manage")}},{"./attributes":425,"./defaults":428,"./manage":430}],430:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/axis_ids"),k=v("../../traces/scatter/subtypes"),m=v("../../registry"),E=v("../fx/helpers").isUnifiedHover,e=v("./modebar"),c=v("./buttons"),d=v("./constants").DRAW_MODES,n=v("../../lib").extendDeep;function t(b){var x=b._fullLayout,S=b._fullData,p=b._context;function w(Y,te){if("string"==typeof te){if(te.toLowerCase()===Y.toLowerCase())return!0}else if(te.name===Y||(te._cat||te.name)===Y.toLowerCase())return!0;return!1}var l=x.modebar.add;"string"==typeof l&&(l=[l]);var y=x.modebar.remove;"string"==typeof y&&(y=[y]);var A=p.modeBarButtonsToAdd.concat(l.filter(function(Y){for(var te=0;te<p.modeBarButtonsToRemove.length;te++)if(w(Y,p.modeBarButtonsToRemove[te]))return!1;return!0})),T=p.modeBarButtonsToRemove.concat(y.filter(function(Y){for(var te=0;te<p.modeBarButtonsToAdd.length;te++)if(w(Y,p.modeBarButtonsToAdd[te]))return!1;return!0})),M=x._has("cartesian"),f=x._has("gl3d"),u=x._has("geo"),h=x._has("pie"),o=x._has("funnelarea"),C=x._has("gl2d"),R=x._has("ternary"),z=x._has("mapbox"),O=x._has("polar"),I=x._has("smith"),F=x._has("sankey"),D=function i(b){for(var x=_.list({_fullLayout:b},null,!0),S=0;S<x.length;S++)if(!x[S].fixedrange)return!1;return!0}(x),N=E(x.hovermode),U=[];function X(Y){if(Y.length){for(var te=[],J=0;J<Y.length;J++){for(var j=Y[J],re=c[j],le=re.name.toLowerCase(),ge=(re._cat||re.name).toLowerCase(),pe=!1,xe=0;xe<T.length;xe++){var ke=T[xe].toLowerCase();if(ke===le||ke===ge){pe=!0;break}}pe||te.push(c[j])}U.push(te)}}var oe=["toImage"];p.showEditInChartStudio?oe.push("editInChartStudio"):p.showSendToCloud&&oe.push("sendDataToCloud"),X(oe);var se=[],ne=[],W=[],G=[];(M||C||h||o||R)+u+f+z+O+I>1?(ne=["toggleHover"],W=["resetViews"]):u?(se=["zoomInGeo","zoomOutGeo"],ne=["hoverClosestGeo"],W=["resetGeo"]):f?(ne=["hoverClosest3d"],W=["resetCameraDefault3d","resetCameraLastSave3d"]):z?(se=["zoomInMapbox","zoomOutMapbox"],ne=["toggleHover"],W=["resetViewMapbox"]):C?ne=["hoverClosestGl2d"]:h?ne=["hoverClosestPie"]:F?(ne=["hoverClosestCartesian","hoverCompareCartesian"],W=["resetViewSankey"]):ne=["toggleHover"],M&&(ne=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function r(b){for(var x=0;x<b.length;x++)if(!m.traceIs(b[x],"noHover"))return!1;return!0}(S)||N)&&(ne=[]),(M||C)&&!D&&(se=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==W[0]&&(W=["resetScale2d"])),f?G=["zoom3d","pan3d","orbitRotation","tableRotation"]:(M||C)&&!D||R?G=["zoom2d","pan2d"]:z||u?G=["pan2d"]:O&&(G=["zoom2d"]),function a(b){for(var x=!1,S=0;S<b.length&&!x;S++){var p=b[S];!p._module||!p._module.selectPoints||(m.traceIs(p,"scatter-like")?(k.hasMarkers(p)||k.hasText(p))&&(x=!0):m.traceIs(p,"box-violin")?("all"===p.boxpoints||"all"===p.points)&&(x=!0):x=!0)}return x}(S)&&G.push("select2d","lasso2d");var $=[],V=function(Y){-1===$.indexOf(Y)&&-1!==ne.indexOf(Y)&&$.push(Y)};if(Array.isArray(A)){for(var H=[],q=0;q<A.length;q++){var K=A[q];"string"==typeof K?(K=K.toLowerCase(),-1!==d.indexOf(K)?(x._has("mapbox")||x._has("cartesian"))&&G.push(K):"togglespikelines"===K?V("toggleSpikelines"):"togglehover"===K?V("toggleHover"):"hovercompare"===K?V("hoverCompareCartesian"):"hoverclosest"===K?(V("hoverClosestCartesian"),V("hoverClosestGeo"),V("hoverClosest3d"),V("hoverClosestGl2d"),V("hoverClosestPie")):"v1hovermode"===K&&(V("toggleHover"),V("hoverClosestCartesian"),V("hoverCompareCartesian"),V("hoverClosestGeo"),V("hoverClosest3d"),V("hoverClosestGl2d"),V("hoverClosestPie"))):H.push(K)}A=H}return X(G),X(se.concat(W)),X($),function g(b,x){if(x.length)if(Array.isArray(x[0]))for(var S=0;S<x.length;S++)b.push(x[S]);else b.push(x);return b}(U,A)}ie.exports=function(x){var S=x._fullLayout,p=x._context,w=S._modeBar;if(p.displayModeBar||p.watermark){if(!Array.isArray(p.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(p.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var y,l=p.modeBarButtons;y=Array.isArray(l)&&l.length?function s(b){for(var x=n([],b),S=0;S<x.length;S++)for(var p=x[S],w=0;w<p.length;w++){var l=p[w];if("string"==typeof l){if(void 0===c[l])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));x[S][w]=c[l]}}return x}(l):!p.displayModeBar&&p.watermark?[]:t(x),w?w.update(x,y):S._modeBar=e(x,y)}else w&&(w.destroy(),delete S._modeBar)}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../../traces/scatter/subtypes":952,"../fx/helpers":402,"./buttons":426,"./constants":427,"./modebar":431}],431:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("fast-isnumeric"),m=v("../../lib"),E=v("../../fonts/ploticon"),e=v("../../version").version,c=new DOMParser;function d(a){this.container=a.container,this.element=document.createElement("div"),this.update(a.graphInfo,a.buttons),this.container.appendChild(this.element)}var n=d.prototype;n.update=function(a,r){this.graphInfo=a;var g=this.graphInfo._context,s=this.graphInfo._fullLayout,b="modebar-"+s._uid;this.element.setAttribute("id",b),this._uid=b,this.element.className="modebar","hover"===g.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===s.modebar.orientation&&(this.element.className+=" vertical",r=r.reverse());var x=s.modebar,S="hover"===g.displayModeBar?".js-plotly-plot .plotly:hover ":"";m.deleteRelatedStyleRule(b),m.addRelatedStyleRule(b,S+"#"+b+" .modebar-group","background-color: "+x.bgcolor),m.addRelatedStyleRule(b,"#"+b+" .modebar-btn .icon path","fill: "+x.color),m.addRelatedStyleRule(b,"#"+b+" .modebar-btn:hover .icon path","fill: "+x.activecolor),m.addRelatedStyleRule(b,"#"+b+" .modebar-btn.active .icon path","fill: "+x.activecolor);var p=!this.hasButtons(r),w=this.hasLogo!==g.displaylogo,l=this.locale!==g.locale;if(this.locale=g.locale,(p||w||l)&&(this.removeAllButtons(),this.updateButtons(r),g.watermark||g.displaylogo)){var y=this.getLogo();g.watermark&&(y.className=y.className+" watermark"),"v"===s.modebar.orientation?this.element.insertBefore(y,this.element.childNodes[0]):this.element.appendChild(y),this.hasLogo=!0}this.updateActiveButton()},n.updateButtons=function(a){var r=this;this.buttons=a,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(g){var s=r.createGroup();g.forEach(function(b){var x=b.name;if(!x)throw new Error("must provide button 'name' in button config");if(-1!==r.buttonsNames.indexOf(x))throw new Error("button name '"+x+"' is taken");r.buttonsNames.push(x);var S=r.createButton(b);r.buttonElements.push(S),s.appendChild(S)}),r.element.appendChild(s)})},n.createGroup=function(){var a=document.createElement("div");return a.className="modebar-group",a},n.createButton=function(a){var r=this,g=document.createElement("a");g.setAttribute("rel","tooltip"),g.className="modebar-btn";var s=a.title;void 0===s?s=a.name:"function"==typeof s&&(s=s(this.graphInfo)),(s||0===s)&&g.setAttribute("data-title",s),void 0!==a.attr&&g.setAttribute("data-attr",a.attr);var b=a.val;if(void 0!==b&&("function"==typeof b&&(b=b(this.graphInfo)),g.setAttribute("data-val",b)),"function"!=typeof a.click)throw new Error("must provide button 'click' function in button config");g.addEventListener("click",function(p){a.click(r.graphInfo,p),r.updateActiveButton(p.currentTarget)}),g.setAttribute("data-toggle",a.toggle||!1),a.toggle&&_.select(g).classed("active",!0);var S=a.icon;return g.appendChild("function"==typeof S?S():this.createIcon(S||E.question)),g.setAttribute("data-gravity",a.gravity||"n"),g},n.createIcon=function(a){var s,r=k(a.height)?Number(a.height):a.ascent-a.descent,g="http://www.w3.org/2000/svg";if(a.path){(s=document.createElementNS(g,"svg")).setAttribute("viewBox",[0,0,a.width,r].join(" ")),s.setAttribute("class","icon");var b=document.createElementNS(g,"path");b.setAttribute("d",a.path),a.transform?b.setAttribute("transform",a.transform):void 0!==a.ascent&&b.setAttribute("transform","matrix(1 0 0 -1 0 "+a.ascent+")"),s.appendChild(b)}return a.svg&&(s=c.parseFromString(a.svg,"application/xml").childNodes[0]),s.setAttribute("height","1em"),s.setAttribute("width","1em"),s},n.updateActiveButton=function(a){var r=this.graphInfo._fullLayout,g=void 0!==a?a.getAttribute("data-attr"):null;this.buttonElements.forEach(function(s){var b=s.getAttribute("data-val")||!0,x=s.getAttribute("data-attr"),S="true"===s.getAttribute("data-toggle"),p=_.select(s);if(S)x===g&&p.classed("active",!p.classed("active"));else{var w=null===x?x:m.nestedProperty(r,x).get();p.classed("active",w===b)}})},n.hasButtons=function(a){var r=this.buttons;if(!r||a.length!==r.length)return!1;for(var g=0;g<a.length;++g){if(a[g].length!==r[g].length)return!1;for(var s=0;s<a[g].length;s++)if(a[g][s].name!==r[g][s].name)return!1}return!0},n.getLogo=function(){var a=this.createGroup(),r=document.createElement("a");return r.href="https://plotly.com/",r.target="_blank",r.setAttribute("data-title",function t(a){return a+" (v"+e+")"}(m._(this.graphInfo,"Produced with Plotly.js"))),r.className="modebar-btn plotlyjsicon modebar-btn--logo",r.appendChild(this.createIcon(E.newplotlylogo)),a.appendChild(r),a},n.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},n.destroy=function(){m.removeElement(this.container.querySelector(".modebar")),m.deleteRelatedStyleRule(this._uid)},ie.exports=function i(a,r){var g=a._fullLayout,s=new d({graphInfo:a,container:g._modebardiv.node(),buttons:r});return g._privateplot&&_.select(s.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),s}},{"../../fonts/ploticon":482,"../../lib":503,"../../version":1123,"@plotly/d3":58,"fast-isnumeric":190}],432:[function(v,ie,ae){"use strict";var _=v("../../plots/font_attributes"),k=v("../color/attributes"),E=(0,v("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});ie.exports={visible:{valType:"boolean",editType:"plot"},buttons:E,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:_({editType:"plot"}),bgcolor:{valType:"color",dflt:k.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../color/attributes":365}],433:[function(v,ie,ae){"use strict";ie.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],434:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../color"),m=v("../../plot_api/plot_template"),E=v("../../plots/array_container_defaults"),e=v("./attributes"),c=v("./constants");function d(t,i,a,r){var g=r.calendar;function s(S,p){return _.coerce(t,i,e.buttons,S,p)}if(s("visible")){var x=s("step");"all"!==x&&(!g||"gregorian"===g||"month"!==x&&"year"!==x?s("stepmode"):i.stepmode="backward",s("count")),s("label")}}ie.exports=function(i,a,r,g,s){var b=i.rangeselector||{},x=m.newContainer(a,"rangeselector");function S(A,T){return _.coerce(b,x,e,A,T)}if(S("visible",E(b,x,{name:"buttons",handleItemDefaults:d,calendar:s}).length>0)){var l=function n(t,i,a){for(var r=a.filter(function(x){return i[x].anchor===t._id}),g=0,s=0;s<r.length;s++){var b=i[r[s]].domain;b&&(g=Math.max(b[1],g))}return[t.domain[0],g+c.yPad]}(a,r,g);S("x",l[0]),S("y",l[1]),_.noneOrAll(i,a,["x","y"]),S("xanchor"),S("yanchor"),_.coerceFont(S,"font",r.font);var y=S("bgcolor");S("activecolor",k.contrast(y,c.lightAmount,c.darkAmount)),S("bordercolor"),S("borderwidth")}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../color":366,"./attributes":432,"./constants":433}],435:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../registry"),m=v("../../plots/plots"),E=v("../color"),e=v("../drawing"),c=v("../../lib"),d=c.strTranslate,n=v("../../lib/svg_text_utils"),t=v("../../plots/cartesian/axis_ids"),i=v("../../constants/alignment"),a=i.LINE_SPACING,r=i.FROM_TL,g=i.FROM_BR,s=v("./constants"),b=v("./get_update_object");function S(M){return M._id}function w(M,f,u){var h=c.ensureSingle(M,"rect","selector-rect",function(o){o.attr("shape-rendering","crispEdges")});h.attr({rx:s.rx,ry:s.ry}),h.call(E.stroke,f.bordercolor).call(E.fill,function l(M,f){return f._isActive||f._isHovered?M.activecolor:M.bgcolor}(f,u)).style("stroke-width",f.borderwidth+"px")}function y(M,f,u,h){c.ensureSingle(M,"text","selector-text",function(R){R.attr("text-anchor","middle")}).call(e.font,f.font).text(function A(M,f){return M.label?f?c.templateString(M.label,f):M.label:"all"===M.step?"all":M.count+M.step.charAt(0)}(u,h._fullLayout._meta)).call(function o(R){n.convertToTspans(R,h)})}ie.exports=function(f){var h=f._fullLayout._infolayer.selectAll(".rangeselector").data(function x(M){for(var f=t.list(M,"x",!0),u=[],h=0;h<f.length;h++){var o=f[h];o.rangeselector&&o.rangeselector.visible&&u.push(o)}return u}(f),S);h.enter().append("g").classed("rangeselector",!0),h.exit().remove(),h.style({cursor:"pointer","pointer-events":"all"}),h.each(function(o){var C=_.select(this),R=o,z=R.rangeselector,O=C.selectAll("g.button").data(c.filterVisible(z.buttons));O.enter().append("g").classed("button",!0),O.exit().remove(),O.each(function(I){var F=_.select(this),D=b(R,I);I._isActive=function p(M,f,u){if("all"===f.step)return!0===M.autorange;var h=Object.keys(u);return M.range[0]===u[h[0]]&&M.range[1]===u[h[1]]}(R,I,D),F.call(w,z,I),F.call(y,z,I,f),F.on("click",function(){f._dragged||k.call("_guiRelayout",f,D)}),F.on("mouseover",function(){I._isHovered=!0,F.call(w,z,I)}),F.on("mouseout",function(){I._isHovered=!1,F.call(w,z,I)})}),function T(M,f,u,h,o){var C=0,R=0,z=u.borderwidth;f.each(function(){var X=_.select(this).select(".selector-text"),se=Math.max(u.font.size*a*n.lineCount(X),16)+3;R=Math.max(R,se)}),f.each(function(){var U=_.select(this),X=U.select(".selector-rect"),oe=U.select(".selector-text"),se=oe.node()&&e.bBox(oe.node()).width,ne=u.font.size*a,W=n.lineCount(oe),G=Math.max(se+10,s.minButtonWidth);U.attr("transform",d(z+C,z)),X.attr({x:0,y:0,width:G,height:R}),n.positionText(oe,G/2,R/2-(W-1)*ne/2+3),C+=G+5});var O=M._fullLayout._size,I=O.l+O.w*u.x,F=O.t+O.h*(1-u.y),D="left";c.isRightAnchor(u)&&(I-=C,D="right"),c.isCenterAnchor(u)&&(I-=C/2,D="center");var N="top";c.isBottomAnchor(u)&&(F-=R,N="bottom"),c.isMiddleAnchor(u)&&(F-=R/2,N="middle"),C=Math.ceil(C),R=Math.ceil(R),I=Math.round(I),F=Math.round(F),m.autoMargin(M,h+"-range-selector",{x:u.x,y:u.y,l:C*r[D],r:C*g[D],b:R*g[N],t:R*r[N]}),o.attr("transform",d(I,F))}(f,O,z,R._name,C)})}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"./constants":433,"./get_update_object":436,"@plotly/d3":58}],436:[function(v,ie,ae){"use strict";var _=v("d3-time"),k=v("../../lib").titleCase;ie.exports=function(e,c){var d=e._name,n={};if("all"===c.step)n[d+".autorange"]=!0;else{var t=function m(E,e){var a,c=E.range,d=new Date(E.r2l(c[1])),t=_["utc"+k(e.step)],i=e.count;switch(e.stepmode){case"backward":a=E.l2r(+t.offset(d,-i));break;case"todate":var r=t.offset(d,-i);a=E.l2r(+t.ceil(r))}return[a,c[1]]}(e,c);n[d+".range[0]"]=t[0],n[d+".range[1]"]=t[1]}return n}},{"../../lib":503,"d3-time":122}],437:[function(v,ie,ae){"use strict";ie.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:v("./attributes")}}},layoutAttributes:v("./attributes"),handleDefaults:v("./defaults"),draw:v("./draw")}},{"./attributes":432,"./defaults":434,"./draw":435}],438:[function(v,ie,ae){"use strict";var _=v("../color/attributes");ie.exports={bgcolor:{valType:"color",dflt:_.background,editType:"plot"},bordercolor:{valType:"color",dflt:_.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":365}],439:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/axis_ids").list,k=v("../../plots/cartesian/autorange").getAutoRange,m=v("./constants");ie.exports=function(e){for(var c=_(e,"x",!0),d=0;d<c.length;d++){var n=c[d],t=n[m.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=k(e,n))}}},{"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"./constants":440}],440:[function(v,ie,ae){"use strict";ie.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],441:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../plot_api/plot_template"),m=v("../../plots/cartesian/axis_ids"),E=v("./attributes"),e=v("./oppaxis_attributes");ie.exports=function(d,n,t){var i=d[t],a=n[t];if(i.rangeslider||n._requestRangeslider[a._id]){_.isPlainObject(i.rangeslider)||(i.rangeslider={});var b,x,r=i.rangeslider,g=k.newContainer(a,"rangeslider");if(s("visible")){s("bgcolor",n.plot_bgcolor),s("bordercolor"),s("borderwidth"),s("thickness"),s("autorange",!a.isValidRange(r.range)),s("range");var w=n._subplots;if(w)for(var l=w.cartesian.filter(function(h){return h.substr(0,h.indexOf("y"))===m.name2id(t)}).map(function(h){return h.substr(h.indexOf("y"),h.length)}),y=_.simpleMap(l,m.id2name),A=0;A<y.length;A++){var T=y[A];b=r[T]||{},x=k.newContainer(g,T,"yaxis");var f,M=n[T];b.range&&M.isValidRange(b.range)&&(f="fixed"),"match"!==S("rangemode",f)&&S("range",M.range.slice())}g._input=r}}function s(h,o){return _.coerce(r,g,E,h,o)}function S(h,o){return _.coerce(b,x,e,h,o)}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_ids":558,"./attributes":438,"./oppaxis_attributes":445}],442:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../registry"),m=v("../../plots/plots"),E=v("../../lib"),e=E.strTranslate,c=v("../drawing"),d=v("../color"),n=v("../titles"),t=v("../../plots/cartesian"),i=v("../../plots/cartesian/axis_ids"),a=v("../dragelement"),r=v("../../lib/setcursor"),g=v("./constants");function s(M,f,u,h){if(!f._context.staticPlot){var o=M.select("rect."+g.slideBoxClassName).node(),C=M.select("rect."+g.grabAreaMinClassName).node(),R=M.select("rect."+g.grabAreaMaxClassName).node();M.on("mousedown",z),M.on("touchstart",z)}function z(){var O=_.event,I=O.target,F=O.clientX||O.touches[0].clientX,D=F-M.node().getBoundingClientRect().left,N=h.d2p(u._rl[0]),U=h.d2p(u._rl[1]),X=a.coverSlip();function oe(ne){var $,V,H,G=+(ne.clientX||ne.touches[0].clientX)-F;switch(I){case o:H="ew-resize",$=N+G,V=U+G;break;case C:H="col-resize",$=N+G,V=U;break;case R:H="col-resize",$=N,V=U+G;break;default:H="ew-resize",$=D,V=D+G}if(V<$){var q=V;V=$,$=q}h._pixelMin=$,h._pixelMax=V,r(_.select(X),H),function b(M,f,u,h){function o(z){return u.l2r(E.constrain(z,h._rl[0],h._rl[1]))}var C=o(h.p2d(h._pixelMin)),R=o(h.p2d(h._pixelMax));window.requestAnimationFrame(function(){k.call("_guiRelayout",f,u._name+".range",[C,R])})}(0,f,u,h)}function se(){X.removeEventListener("mousemove",oe),X.removeEventListener("mouseup",se),this.removeEventListener("touchmove",oe),this.removeEventListener("touchend",se),E.removeElement(X)}this.addEventListener("touchmove",oe),this.addEventListener("touchend",se),X.addEventListener("mousemove",oe),X.addEventListener("mouseup",se)}}function S(M,f,u,h){var o=E.ensureSingle(M,"rect",g.bgClassName,function(O){O.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),C=h.borderwidth%2==0?h.borderwidth:h.borderwidth-1,R=-h._offsetShift,z=c.crispRound(f,h.borderwidth);o.attr({width:h._width+C,height:h._height+C,transform:e(R,R),fill:h.bgcolor,stroke:h.bordercolor,"stroke-width":z})}function p(M,f,u,h){E.ensureSingleById(f._fullLayout._topdefs,"clipPath",h._clipId,function(R){R.append("rect").attr({x:0,y:0})}).select("rect").attr({width:h._width,height:h._height})}function w(M,f,u,h){var R,o=f.calcdata,C=M.selectAll("g."+g.rangePlotClassName).data(u._subplotsWith,E.identity);C.enter().append("g").attr("class",function(z){return g.rangePlotClassName+" "+z}).call(c.setClipUrl,h._clipId,f),C.order(),C.exit().remove(),C.each(function(z,O){var I=_.select(this),F=0===O,D=i.getFromId(f,z,"y"),N=D._name,U=h[N],X={data:[],layout:{xaxis:{type:u.type,domain:[0,1],range:h.range.slice(),calendar:u.calendar},width:h._width,height:h._height,margin:{t:0,b:0,l:0,r:0}},_context:f._context};u.rangebreaks&&(X.layout.xaxis.rangebreaks=u.rangebreaks),X.layout[N]={type:D.type,domain:[0,1],range:"match"!==U.rangemode?U.range.slice():D.range.slice(),calendar:D.calendar},D.rangebreaks&&(X.layout[N].rangebreaks=D.rangebreaks),m.supplyDefaults(X);var oe=X._fullLayout.xaxis,se=X._fullLayout[N];oe.clearCalc(),oe.setScale(),se.clearCalc(),se.setScale();var ne={id:z,plotgroup:I,xaxis:oe,yaxis:se,isRangePlot:!0};F?R=ne:(ne.mainplot="xy",ne.mainplotinfo=R),t.rangePlot(f,ne,function l(M,f){for(var u=[],h=0;h<M.length;h++){var o=M[h],C=o[0].trace;C.xaxis+C.yaxis===f&&u.push(o)}return u}(o,z))})}function y(M,f,u,h,o){E.ensureSingle(M,"rect",g.maskMinClassName,function(I){I.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",h._height).call(d.fill,g.maskColor),E.ensureSingle(M,"rect",g.maskMaxClassName,function(I){I.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",h._height).call(d.fill,g.maskColor),"match"!==o.rangemode&&(E.ensureSingle(M,"rect",g.maskMinOppAxisClassName,function(I){I.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",h._width).call(d.fill,g.maskOppAxisColor),E.ensureSingle(M,"rect",g.maskMaxOppAxisClassName,function(I){I.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",h._width).style("border-top",g.maskOppBorder).call(d.fill,g.maskOppAxisColor))}function A(M,f,u,h){f._context.staticPlot||E.ensureSingle(M,"rect",g.slideBoxClassName,function(C){C.attr({y:0,cursor:g.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:h._height,fill:g.slideBoxFill})}function T(M,f,u,h){var o=E.ensureSingle(M,"g",g.grabberMinClassName),C=E.ensureSingle(M,"g",g.grabberMaxClassName),R={x:0,width:g.handleWidth,rx:g.handleRadius,fill:d.background,stroke:d.defaultLine,"stroke-width":g.handleStrokeWidth,"shape-rendering":"crispEdges"},z={y:Math.round(h._height/4),height:Math.round(h._height/2)};E.ensureSingle(o,"rect",g.handleMinClassName,function(U){U.attr(R)}).attr(z),E.ensureSingle(C,"rect",g.handleMaxClassName,function(U){U.attr(R)}).attr(z);var F={width:g.grabAreaWidth,x:0,y:0,fill:g.grabAreaFill,cursor:f._context.staticPlot?void 0:g.grabAreaCursor};E.ensureSingle(o,"rect",g.grabAreaMinClassName,function(U){U.attr(F)}).attr("height",h._height),E.ensureSingle(C,"rect",g.grabAreaMaxClassName,function(U){U.attr(F)}).attr("height",h._height)}ie.exports=function(M){for(var f=M._fullLayout,u=f._rangeSliderData,h=0;h<u.length;h++){var o=u[h][g.name];o._clipId=o._id+"-"+f._uid}var R=f._infolayer.selectAll("g."+g.containerClassName).data(u,function C(z){return z._name});R.exit().each(function(z){f._topdefs.select("#"+z[g.name]._clipId).remove()}).remove(),0!==u.length&&(R.enter().append("g").classed(g.containerClassName,!0).attr("pointer-events","all"),R.each(function(z){var O=_.select(this),I=z[g.name],F=f[i.id2name(z.anchor)],D=I[i.id2name(z.anchor)];if(I.range){var X,N=E.simpleMap(I.range,z.r2l),U=E.simpleMap(z.range,z.r2l);X=U[0]<U[1]?[Math.min(N[0],U[0]),Math.max(N[1],U[1])]:[Math.max(N[0],U[0]),Math.min(N[1],U[1])],I.range=I._input.range=E.simpleMap(X,z.l2r)}z.cleanRange("rangeslider.range");var oe=f._size,se=z.domain;I._width=oe.w*(se[1]-se[0]);var ne=Math.round(oe.l+oe.w*se[0]),W=Math.round(oe.t+oe.h*(1-z._counterDomainMin)+("bottom"===z.side?z._depth:0)+I._offsetShift+g.extraPad);O.attr("transform",e(ne,W)),I._rl=E.simpleMap(I.range,z.r2l);var G=I._rl[0],$=I._rl[1],V=$-G;if(I.p2d=function(ge){return ge/I._width*V+G},I.d2p=function(ge){return(ge-G)/V*I._width},z.rangebreaks){var H=z.locateBreaks(G,$);if(H.length){var q,K,Y=0;for(q=0;q<H.length;q++)Y+=(K=H[q]).max-K.min;var te=I._width/($-G-Y),J=[-te*G];for(q=0;q<H.length;q++)J.push(J[J.length-1]-te*((K=H[q]).max-K.min));for(I.d2p=function(ge){for(var pe=J[0],xe=0;xe<H.length;xe++){var ke=H[xe];if(ge>=ke.max)pe=J[xe+1];else if(ge<ke.min)break}return pe+te*ge},q=0;q<H.length;q++)(K=H[q]).pmin=I.d2p(K.min),K.pmax=I.d2p(K.max);I.p2d=function(ge){for(var pe=J[0],xe=0;xe<H.length;xe++){var ke=H[xe];if(ge>=ke.pmax)pe=J[xe+1];else if(ge<ke.pmin)break}return(ge-pe)/te}}}if("match"!==D.rangemode){var j=F.r2l(D.range[0]),le=F.r2l(D.range[1])-j;I.d2pOppAxis=function(ge){return(ge-j)/le*I._height}}O.call(S,M,z,I).call(p,M,z,I).call(w,M,z,I).call(y,M,z,I,D).call(A,M,z,I).call(T,M,z,I),s(O,M,z,I),function x(M,f,u,h,o,C){var R=g.handleWidth/2;function z(ne){return E.constrain(ne,0,h._width)}function O(ne){return E.constrain(ne,0,h._height)}function I(ne){return E.constrain(ne,-R,h._width+R)}var F=z(h.d2p(u._rl[0])),D=z(h.d2p(u._rl[1]));if(M.select("rect."+g.slideBoxClassName).attr("x",F).attr("width",D-F),M.select("rect."+g.maskMinClassName).attr("width",F),M.select("rect."+g.maskMaxClassName).attr("x",D).attr("width",h._width-D),"match"!==C.rangemode){var N=h._height-O(h.d2pOppAxis(o._rl[1])),U=h._height-O(h.d2pOppAxis(o._rl[0]));M.select("rect."+g.maskMinOppAxisClassName).attr("x",F).attr("height",N).attr("width",D-F),M.select("rect."+g.maskMaxOppAxisClassName).attr("x",F).attr("y",U).attr("height",h._height-U).attr("width",D-F),M.select("rect."+g.slideBoxClassName).attr("y",N).attr("height",U-N)}var X=.5,oe=Math.round(I(F-R))-X,se=Math.round(I(D-R))+X;M.select("g."+g.grabberMinClassName).attr("transform",e(oe,X)),M.select("g."+g.grabberMaxClassName).attr("transform",e(se,X))}(O,0,z,I,F,D),"bottom"===z.side&&n.draw(M,z._id+"title",{propContainer:z,propName:z._name+".title",placeholder:f._dfltTitle.x,attributes:{x:z._offset+z._length/2,y:W+I._height+I._offsetShift+10+1.5*z.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":503,"../../lib/setcursor":524,"../../plots/cartesian":568,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":440,"@plotly/d3":58}],443:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/axis_ids"),k=v("../../lib/svg_text_utils"),m=v("./constants"),E=v("../../constants/alignment").LINE_SPACING,e=m.name;function c(d){var n=d&&d[e];return n&&n.visible}ae.isVisible=c,ae.makeData=function(d){var n=_.list({_fullLayout:d},"x",!0),t=d.margin,i=[];if(!d._has("gl2d"))for(var a=0;a<n.length;a++){var r=n[a];if(c(r)){i.push(r);var g=r[e];g._id=e+r._id,g._height=(d.height-t.b-t.t)*g.thickness,g._offsetShift=Math.floor(g.borderwidth/2)}}d._rangeSliderData=i},ae.autoMarginOpts=function(d,n){var t=d._fullLayout,i=n[e],a=n._id.charAt(0),r=0,g=0;return"bottom"===n.side&&(r=n._depth,n.title.text!==t._dfltTitle[a])&&(g=1.5*n.title.font.size+10+i._offsetShift,g+=(n.title.text.match(k.BR_TAG_ALL)||[]).length*n.title.font.size*E),{x:0,y:n._counterDomainMin,l:0,r:0,t:0,b:i._height+r+Math.max(t.margin.b,g),pad:m.extraPad+2*i._offsetShift}}},{"../../constants/alignment":471,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"./constants":440}],444:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./attributes"),m=v("./oppaxis_attributes"),E=v("./helpers");ie.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:_.extendFlat({},k,{yaxis:m})}}},layoutAttributes:v("./attributes"),handleDefaults:v("./defaults"),calcAutorange:v("./calc_autorange"),draw:v("./draw"),isVisible:E.isVisible,makeData:E.makeData,autoMarginOpts:E.autoMarginOpts}},{"../../lib":503,"./attributes":438,"./calc_autorange":439,"./defaults":441,"./draw":442,"./helpers":443,"./oppaxis_attributes":445}],445:[function(v,ie,ae){"use strict";ie.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],446:[function(v,ie,ae){"use strict";var _=v("../annotations/attributes"),k=v("../../traces/scatter/attributes").line,m=v("../drawing/attributes").dash,E=v("../../lib/extend").extendFlat,e=v("../../plot_api/plot_template").templatedArray;v("../../constants/axis_placeable_objects"),ie.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:E({},_.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:E({},_.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:E({},k.color,{editType:"arraydraw"}),width:E({},k.width,{editType:"calc+arraydraw"}),dash:E({},m,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":927,"../annotations/attributes":349,"../drawing/attributes":387}],447:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../plots/cartesian/axes"),m=v("./constants"),E=v("./helpers");function c(t){return d(t.line.width,t.ysizemode,t.y0,t.y1,t.path,!0)}function d(t,i,a,r,g,s){var b=t/2,x=s;if("pixel"===i){var S=g?E.extractPathCoords(g,s?m.paramIsY:m.paramIsX):[a,r],p=_.aggNums(Math.max,null,S),w=_.aggNums(Math.min,null,S),l=w<0?Math.abs(w)+b:b,y=p>0?p+b:b;return{ppad:b,ppadplus:x?l:y,ppadminus:x?y:l}}return{ppad:b}}function n(t,i,a,r,g){var s="category"===t.type||"multicategory"===t.type?t.r2c:t.d2c;if(void 0!==i)return[s(i),s(a)];if(r){var p,l,y,A,b=1/0,x=-1/0,S=r.match(m.segmentRE);for("date"===t.type&&(s=E.decodeDate(s)),p=0;p<S.length;p++)void 0!==(l=g[S[p].charAt(0)].drawn)&&(y=S[p].substr(1).match(m.paramRE))&&!(y.length<l)&&((A=s(y[l]))<b&&(b=A),A>x&&(x=A));if(x>=b)return[b,x]}}ie.exports=function(i){var t,r=_.filterVisible(i._fullLayout.shapes);if(r.length&&i._fullData.length)for(var g=0;g<r.length;g++){var s=r[g];s._extremes={};var b,x,S=k.getRefType(s.xref),p=k.getRefType(s.yref);if("paper"!==s.xref&&"domain"!==S){var w="pixel"===s.xsizemode?s.xanchor:s.x0,l="pixel"===s.xsizemode?s.xanchor:s.x1;(x=n(b=k.getFromId(i,s.xref),w,l,s.path,m.paramIsX))&&(s._extremes[b._id]=k.findExtremes(b,x,d((t=s).line.width,t.xsizemode,t.x0,t.x1,t.path,!1)))}if("paper"!==s.yref&&"domain"!==p){var y="pixel"===s.ysizemode?s.yanchor:s.y0,A="pixel"===s.ysizemode?s.yanchor:s.y1;(x=n(b=k.getFromId(i,s.yref),y,A,s.path,m.paramIsY))&&(s._extremes[b._id]=k.findExtremes(b,x,c(s)))}}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":448,"./helpers":457}],448:[function(v,ie,ae){"use strict";ie.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],449:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../plots/cartesian/axes"),m=v("../../plots/array_container_defaults"),E=v("./attributes"),e=v("./helpers");function c(d,n,t){function i(N,U){return _.coerce(d,n,E,N,U)}if(i("visible")){var r=i("path"),s=i("type",r?"path":"rect");"path"!==n.type&&delete n.path,i("editable"),i("layer"),i("opacity"),i("fillcolor"),i("fillrule"),i("line.width")&&(i("line.color"),i("line.dash"));for(var x=i("xsizemode"),S=i("ysizemode"),p=["x","y"],w=0;w<2;w++){var M,f,u,l=p[w],y=l+"anchor",A="x"===l?x:S,T={_fullLayout:t},h=k.coerceRef(d,n,T,l,void 0,"paper");if("range"===k.getRefType(h)?((M=k.getFromId(T,h))._shapeIndices.push(n._index),u=e.rangeToShapePosition(M),f=e.shapePositionToRange(M)):f=u=_.identity,"path"!==s){var z=l+"0",O=l+"1",I=d[z],F=d[O];d[z]=f(d[z],!0),d[O]=f(d[O],!0),"pixel"===A?(i(z,0),i(O,10)):(k.coercePosition(n,T,i,h,z,.25),k.coercePosition(n,T,i,h,O,.75)),n[z]=u(n[z]),n[O]=u(n[O]),d[z]=I,d[O]=F}if("pixel"===A){var D=d[y];d[y]=f(d[y],!0),k.coercePosition(n,T,i,h,y,.25),n[y]=u(n[y]),d[y]=D}}"path"===s?i("path"):_.noneOrAll(d,n,["x0","x1","y0","y1"])}}ie.exports=function(n,t){m(n,t,{name:"shapes",handleItemDefaults:c})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":446,"./helpers":457}],450:[function(v,ie,ae){"use strict";var _=v("../../registry"),k=v("../../lib"),m=v("../../plots/cartesian/axes"),E=v("./draw_newshape/helpers").readPaths,e=v("./draw_newshape/display_outlines"),c=v("../../plots/cartesian/handle_outline").clearOutlineControllers,d=v("../color"),n=v("../drawing"),t=v("../../plot_api/plot_template").arrayEditor,i=v("../dragelement"),a=v("../../lib/setcursor"),r=v("./constants"),g=v("./helpers");function s(u){var h=u._fullLayout;for(var o in h._shapeUpperLayer.selectAll("path").remove(),h._shapeLowerLayer.selectAll("path").remove(),h._plots){var C=h._plots[o].shapelayer;C&&C.selectAll("path").remove()}for(var R=0;R<h.shapes.length;R++)h.shapes[R].visible&&S(u,R)}function b(u){return!!u._fullLayout._drawing}function x(u){return!u._context.edits.shapePosition}function S(u,h){u._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+h+'"]').remove();var o=g.makeOptionsAndPlotinfo(u,h),C=o.options,R=o.plotinfo;C._input&&!1!==C.visible&&function O(I){var F=l(u,C),D={"data-index":h,"fill-rule":C.fillrule,d:F},N=C.opacity,U=C.fillcolor,X=C.line.width?C.line.color:"rgba(0,0,0,0)",oe=C.line.width,se=C.line.dash;!oe&&!0===C.editable&&(oe=5,se="solid");var ne="Z"!==F[F.length-1],W=x(u)&&C.editable&&u._fullLayout._activeShapeIndex===h;W&&(U=ne?"rgba(0,0,0,0)":u._fullLayout.activeshape.fillcolor,N=u._fullLayout.activeshape.opacity);var $,G=I.append("path").attr(D).style("opacity",N).call(d.stroke,X).call(d.fill,U).call(n.dashLine,se,oe);if(p(G,u,C),(W||u._context.edits.shapePosition)&&($=t(u.layout,"shapes",C)),W){G.style({cursor:"move"});var V={element:G.node(),plotinfo:R,gd:u,editHelpers:$,isActiveShape:!0},H=E(F,u);e(H,G,V)}else u._context.edits.shapePosition?function w(u,h,o,C,R,z){var oe,se,ne,W,G,$,V,H,q,K,Y,te,J,j,re,ye,O=10,I=10,F="pixel"===o.xsizemode,D="pixel"===o.ysizemode,N="line"===o.type,U="path"===o.type,X=z.modifyItem,le=m.getFromId(u,o.xref),ge=m.getRefType(o.xref),pe=m.getFromId(u,o.yref),xe=m.getRefType(o.yref),ke=g.getDataToPixel(u,le,!1,ge),we=g.getDataToPixel(u,pe,!0,xe),de=g.getPixelToData(u,le,!1,ge),be=g.getPixelToData(u,pe,!0,xe),Le=Ce(),De={element:Le.node(),gd:u,prepFn:Ue,doneFn:Be,clickFn:Ie};function Ce(){return N?Fe():h}function Fe(){var Zt=10,Et=Math.max(o.line.width,Zt),wt=R.append("g").attr("data-index",C);wt.append("path").attr("d",h.attr("d")).style({cursor:"move","stroke-width":Et,"stroke-opacity":"0"});var at={"fill-opacity":"0"},vt=Math.max(Et/2,Zt);return wt.append("circle").attr({"data-line-point":"start-point",cx:F?ke(o.xanchor)+o.x0:ke(o.x0),cy:D?we(o.yanchor)-o.y0:we(o.y0),r:vt}).style(at).classed("cursor-grab",!0),wt.append("circle").attr({"data-line-point":"end-point",cx:F?ke(o.xanchor)+o.x1:ke(o.x1),cy:D?we(o.yanchor)-o.y1:we(o.y1),r:vt}).style(at).classed("cursor-grab",!0),wt}function Ke(Zt){if(b(u))ye=null;else if(N)ye="path"===Zt.target.tagName?"move":"start-point"===Zt.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var Et=De.element.getBoundingClientRect(),wt=Et.right-Et.left,at=Et.bottom-Et.top,Pe=!U&&wt>O&&at>I&&!Zt.shiftKey?i.getCursor((Zt.clientX-Et.left)/wt,1-(Zt.clientY-Et.top)/at):"move";a(h,Pe),ye=Pe.split("-")[0]}}function Ue(Zt){b(u)||(F&&(G=ke(o.xanchor)),D&&($=we(o.yanchor)),"path"===o.type?re=o.path:(oe=F?o.x0:ke(o.x0),se=D?o.y0:we(o.y0),ne=F?o.x1:ke(o.x1),W=D?o.y1:we(o.y1)),oe<ne?(q=oe,J="x0",K=ne,j="x1"):(q=ne,J="x1",K=oe,j="x0"),!D&&se<W||D&&se>W?(V=se,Y="y0",H=W,te="y1"):(V=W,Y="y1",H=se,te="y0"),Ke(Zt),Nt(R,o),Bt(h,o,u),De.moveFn="move"===ye?nt:gt,De.altKey=Zt.altKey)}function Be(){b(u)||(a(h),St(R),p(h,u,o),_.call("_guiRelayout",u,z.getUpdateObj()))}function Ie(){b(u)||St(R)}function nt(Zt,Et){if("path"===o.type){var wt=function(Qe){return Qe},at=wt,vt=wt;F?X("xanchor",o.xanchor=de(G+Zt)):(at=function(Pe){return de(ke(Pe)+Zt)},le&&"date"===le.type&&(at=g.encodeDate(at))),D?X("yanchor",o.yanchor=be($+Et)):(vt=function(Pe){return be(we(Pe)+Et)},pe&&"date"===pe.type&&(vt=g.encodeDate(vt))),X("path",o.path=A(re,at,vt))}else F?X("xanchor",o.xanchor=de(G+Zt)):(X("x0",o.x0=de(oe+Zt)),X("x1",o.x1=de(ne+Zt))),D?X("yanchor",o.yanchor=be($+Et)):(X("y0",o.y0=be(se+Et)),X("y1",o.y1=be(W+Et)));h.attr("d",l(u,o)),Nt(R,o)}function gt(Zt,Et){if(U){var wt=function(br){return br},at=wt,vt=wt;F?X("xanchor",o.xanchor=de(G+Zt)):(at=function(Hr){return de(ke(Hr)+Zt)},le&&"date"===le.type&&(at=g.encodeDate(at))),D?X("yanchor",o.yanchor=be($+Et)):(vt=function(Hr){return be(we(Hr)+Et)},pe&&"date"===pe.type&&(vt=g.encodeDate(vt))),X("path",o.path=A(re,at,vt))}else if(N){if("resize-over-start-point"===ye){var Qe=oe+Zt,Pe=D?se-Et:se+Et;X("x0",o.x0=F?Qe:de(Qe)),X("y0",o.y0=D?Pe:be(Pe))}else if("resize-over-end-point"===ye){var Ze=ne+Zt,Xe=D?W-Et:W+Et;X("x1",o.x1=F?Ze:de(Ze)),X("y1",o.y1=D?Xe:be(Xe))}}else{var rt=function(br){return-1!==ye.indexOf(br)},kt=rt("n"),Tt=rt("s"),Xt=rt("w"),ar=rt("e"),Ut=kt?V+Et:V,Jt=Tt?H+Et:H,nr=Xt?q+Zt:q,rr=ar?K+Zt:K;D&&(kt&&(Ut=V-Et),Tt&&(Jt=H-Et)),(!D&&Jt-Ut>I||D&&Ut-Jt>I)&&(X(Y,o[Y]=D?Ut:be(Ut)),X(te,o[te]=D?Jt:be(Jt))),rr-nr>O&&(X(J,o[J]=F?nr:de(nr)),X(j,o[j]=F?rr:de(rr)))}h.attr("d",l(u,o)),Nt(R,o)}function Nt(Zt,Et){function wt(){var at="path"!==Et.type,vt=Zt.selectAll(".visual-cue").data([0]),Qe=1;vt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":Qe}).classed("visual-cue",!0);var Pe=ke(F?Et.xanchor:k.midRange(at?[Et.x0,Et.x1]:g.extractPathCoords(Et.path,r.paramIsX))),Ze=we(D?Et.yanchor:k.midRange(at?[Et.y0,Et.y1]:g.extractPathCoords(Et.path,r.paramIsY)));Pe=g.roundPositionForSharpStrokeRendering(Pe,Qe),Ze=g.roundPositionForSharpStrokeRendering(Ze,Qe),vt.attr("d",F&&D?"M"+(Pe-1-Qe)+","+(Ze-1-Qe)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":F?"M"+(Pe-1-Qe)+","+(Ze-9-Qe)+"v18 h2 v-18 Z":"M"+(Pe-9-Qe)+","+(Ze-1-Qe)+"h18 v2 h-18 Z")}(F||D)&&wt()}function St(Zt){Zt.selectAll(".visual-cue").remove()}function Bt(Zt,Et,wt){var at=Et.xref,vt=Et.yref,Qe=m.getFromId(wt,at),Pe=m.getFromId(wt,vt),Ze="";"paper"!==at&&!Qe.autorange&&(Ze+=at),"paper"!==vt&&!Pe.autorange&&(Ze+=vt),n.setClipUrl(Zt,Ze?"clip"+wt._fullLayout._uid+Ze:null,wt)}i.init(De),Le.node().onmousemove=Ke}(u,G,C,h,I,$):!0===C.editable&&G.style("pointer-events",ne||d.opacity(U)*N<=.5?"stroke":"all");G.node().addEventListener("click",function(){return function T(u,h){if(x(u)){var C=+h.node().getAttribute("data-index");if(C>=0){if(C===u._fullLayout._activeShapeIndex)return void M(u);u._fullLayout._activeShapeIndex=C,u._fullLayout._deactivateShape=M,s(u)}}}(u,G)})}("below"!==C.layer?u._fullLayout._shapeUpperLayer:"paper"===C.xref||"paper"===C.yref?u._fullLayout._shapeLowerLayer:R._hadPlotinfo?(R.mainplotinfo||R).shapelayer:u._fullLayout._shapeLowerLayer)}function p(u,h,o){var C=(o.xref+o.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");n.setClipUrl(u,C?"clip"+h._fullLayout._uid+C:null,h)}function l(u,h){var F,D,N,U,X,oe,se,ne,o=h.type,C=m.getRefType(h.xref),R=m.getRefType(h.yref),z=m.getFromId(u,h.xref),O=m.getFromId(u,h.yref),I=u._fullLayout._size;if(z?"domain"===C?D=function(J){return z._offset+z._length*J}:(F=g.shapePositionToRange(z),D=function(J){return z._offset+z.r2p(F(J,!0))}):D=function(J){return I.l+I.w*J},O?"domain"===R?U=function(J){return O._offset+O._length*(1-J)}:(N=g.shapePositionToRange(O),U=function(J){return O._offset+O.r2p(N(J,!0))}):U=function(J){return I.t+I.h*(1-J)},"path"===o)return z&&"date"===z.type&&(D=g.decodeDate(D)),O&&"date"===O.type&&(U=g.decodeDate(U)),function y(u,h,o){var R=u.xsizemode,z=u.ysizemode,O=u.xanchor,I=u.yanchor;return u.path.replace(r.segmentRE,function(F){var D=0,N=F.charAt(0),U=r.paramIsX[N],X=r.paramIsY[N],oe=r.numParams[N],se=F.substr(1).replace(r.paramRE,function(ne){return U[D]?ne="pixel"===R?h(O)+Number(ne):h(ne):X[D]&&(ne="pixel"===z?o(I)-Number(ne):o(ne)),++D>oe&&(ne="X"),ne});return D>oe&&(se=se.replace(/[\s,]*X.*/,""),k.log("Ignoring extra params in segment "+F)),N+se})}(h,D,U);if("pixel"===h.xsizemode){var W=D(h.xanchor);X=W+h.x0,oe=W+h.x1}else X=D(h.x0),oe=D(h.x1);if("pixel"===h.ysizemode){var G=U(h.yanchor);se=G-h.y0,ne=G-h.y1}else se=U(h.y0),ne=U(h.y1);if("line"===o)return"M"+X+","+se+"L"+oe+","+ne;if("rect"===o)return"M"+X+","+se+"H"+oe+"V"+ne+"H"+X+"Z";var $=(X+oe)/2,V=(se+ne)/2,H=Math.abs($-X),q=Math.abs(V-se),K="A"+H+","+q,Y=$+H+","+V;return"M"+Y+K+" 0 1,1 "+$+","+(V-q)+K+" 0 0,1 "+Y+"Z"}function A(u,h,o){return u.replace(r.segmentRE,function(C){var R=0,z=C.charAt(0),O=r.paramIsX[z],I=r.paramIsY[z],F=r.numParams[z];return z+C.substr(1).replace(r.paramRE,function(N){return R>=F||(O[R]?N=h(N):I[R]&&(N=o(N)),R++),N})})}function M(u){x(u)&&u._fullLayout._activeShapeIndex>=0&&(c(u),delete u._fullLayout._activeShapeIndex,s(u))}ie.exports={draw:s,drawOne:S,eraseActiveShape:function f(u){if(x(u)){c(u);var h=u._fullLayout._activeShapeIndex,o=(u.layout||{}).shapes||[];if(h<o.length){for(var C=[],R=0;R<o.length;R++)R!==h&&C.push(o[R]);delete u._fullLayout._activeShapeIndex,_.call("_guiRelayout",u,{shapes:C})}}}}},{"../../lib":503,"../../lib/setcursor":524,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/cartesian/handle_outline":565,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":448,"./draw_newshape/display_outlines":454,"./draw_newshape/helpers":455,"./helpers":457}],451:[function(v,ie,ae){"use strict";var _=v("../../drawing/attributes").dash,k=v("../../../lib/extend").extendFlat;ie.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:k({},_,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":493,"../../drawing/attributes":387}],452:[function(v,ie,ae){"use strict";ie.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],453:[function(v,ie,ae){"use strict";var _=v("../../color");ie.exports=function(m,E,e){e("newshape.drawdirection"),e("newshape.layer"),e("newshape.fillcolor"),e("newshape.fillrule"),e("newshape.opacity"),e("newshape.line.width")&&(e("newshape.line.color",_.contrast((m||{}).plot_bgcolor||"#FFF")),e("newshape.line.dash")),e("activeshape.fillcolor"),e("activeshape.opacity")}},{"../../color":366}],454:[function(v,ie,ae){"use strict";var _=v("../../dragelement"),m=v("../../dragelement/helpers").drawMode,E=v("../../../registry"),e=v("./constants"),c=e.i000,d=e.i090,n=e.i180,t=e.i270,a=v("../../../plots/cartesian/handle_outline").clearOutlineControllers,r=v("./helpers"),g=r.pointsShapeRectangle,s=r.pointsShapeEllipse,b=r.writePaths,x=v("./newshapes");ie.exports=function p(w,l,y,A){A||(A=0);var T=y.gd;function M(){p(w,l,y,A++),s(w[0])&&f({redrawing:!0})}function f(K){y.isActiveShape=!1;var Y=x(l,y);Object.keys(Y).length&&E.call((K||{}).redrawing?"relayout":"_guiRelayout",T,Y)}var z,O,I,F,D,u=y.isActiveShape,o=T._fullLayout._zoomlayer;function U(K){I=+K.srcElement.getAttribute("data-i"),F=+K.srcElement.getAttribute("data-j"),z[I][F].moveFn=X}function X(K,Y){if(w.length){var te=D[I][F][1],J=D[I][F][2],j=w[I],re=j.length;if(g(j)){for(var le=0;le<re;le++)if(le!==F){var ge=j[le];ge[1]===j[F][1]&&(ge[1]=te+K),ge[2]===j[F][2]&&(ge[2]=J+Y)}if(j[F][1]=te+K,j[F][2]=J+Y,!g(j))for(var pe=0;pe<re;pe++)for(var xe=0;xe<j[pe].length;xe++)j[pe][xe]=D[I][pe][xe]}else j[F][1]=te+K,j[F][2]=J+Y;M()}}function oe(){f()}function ne(K,Y){if(2===K){I=+Y.srcElement.getAttribute("data-i"),F=+Y.srcElement.getAttribute("data-j");var te=w[I];!g(te)&&!s(te)&&function se(){if(w.length&&w[I]&&w[I].length){for(var K=[],Y=0;Y<w[I].length;Y++)Y!==F&&K.push(w[I][Y]);K.length>1&&(2!==K.length||"Z"!==K[1][0])&&(0===F&&(K[0][0]="M"),w[I]=K,M(),f())}}()}}function $(K,Y){(function G(K,Y){if(w.length)for(var te=0;te<w.length;te++)for(var J=0;J<w[te].length;J++)for(var j=0;j+2<w[te][J].length;j+=2)w[te][J][j+1]=D[te][J][j+1]+K,w[te][J][j+2]=D[te][J][j+2]+Y})(K,Y),M()}function V(K){(I=+K.srcElement.getAttribute("data-i"))||(I=0),O[I].moveFn=$}function H(){f()}m(y.dragmode)?T._fullLayout._drawing=!0:T._fullLayout._activeShapeIndex>=0&&a(T),l.attr("d",b(w)),u&&!A&&(D=function S(p,w){for(var l=0;l<w.length;l++){var y=w[l];p[l]=[];for(var A=0;A<y.length;A++){p[l][A]=[];for(var T=0;T<y[A].length;T++)p[l][A][T]=y[A][T]}}return p}([],w),function W(K){z=[];for(var Y=0;Y<w.length;Y++){var te=w[Y],j=!g(te)&&s(te);z[Y]=[];for(var re=0;re<te.length;re++)if("Z"!==te[re][0]&&(!j||re===c||re===d||re===n||re===t)){var le=te[re][1],ge=te[re][2],pe=K.append("circle").classed("cursor-grab",!0).attr("data-i",Y).attr("data-j",re).attr("cx",le).attr("cy",ge).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});z[Y][re]={element:pe.node(),gd:T,prepFn:U,doneFn:oe,clickFn:ne},_.init(z[Y][re])}}}(o.append("g").attr("class","outline-controllers")),function q(){if(O=[],w.length){O[0]={element:l[0][0],gd:T,prepFn:V,doneFn:H},_.init(O[0])}}())}},{"../../../plots/cartesian/handle_outline":565,"../../../registry":638,"../../dragelement":385,"../../dragelement/helpers":384,"./constants":452,"./helpers":455,"./newshapes":456}],455:[function(v,ie,ae){"use strict";var _=v("parse-svg-path"),k=v("./constants"),m=k.CIRCLE_SIDES,E=k.SQRT2,e=v("../../../plots/cartesian/helpers"),c=e.p2r,d=e.r2p,n=[0,3,4,5,6,1,2],t=[0,3,4,1,2];function i(r,g){return Math.abs(r-g)<=1e-6}function a(r,g){var s=g[1]-r[1],b=g[2]-r[2];return Math.sqrt(s*s+b*b)}ae.writePaths=function(r){var g=r.length;if(!g)return"M0,0Z";for(var s="",b=0;b<g;b++)for(var x=r[b].length,S=0;S<x;S++){var p=r[b][S][0];if("Z"===p)s+="Z";else for(var w=r[b][S].length,l=0;l<w;l++){var y=l;"Q"===p||"S"===p?y=t[l]:"C"===p&&(y=n[l]),s+=r[b][S][y],l>0&&l<w-1&&(s+=",")}}return s},ae.readPaths=function(r,g,s,b){var l,T,M,x=_(r),S=[],p=-1,y=0,A=0,f=function(){T=y,M=A};f();for(var u=0;u<x.length;u++){var h=[],O=x[u][0],I=O;switch(O){case"M":p++,S[p]=[],h.push([I,y=+x[u][1],A=+x[u][2]]),f();break;case"Q":case"S":h.push([I,y=+x[u][3],A=+x[u][4],+x[u][1],+x[u][2]]);break;case"C":h.push([I,y=+x[u][5],A=+x[u][6],+x[u][1],+x[u][2],+x[u][3],+x[u][4]]);break;case"T":case"L":h.push([I,y=+x[u][1],A=+x[u][2]]);break;case"H":h.push([I="L",y=+x[u][1],A]);break;case"V":h.push([I="L",y,A=+x[u][1]]);break;case"A":I="L";var F=+x[u][1],D=+x[u][2];+x[u][4]||(F=-F,D=-D);var N=y-F,U=A;for(l=1;l<=m/2;l++){var X=2*Math.PI*l/m;h.push([I,N+F*Math.cos(X),U+D*Math.sin(X)])}break;case"Z":(y!==T||A!==M)&&h.push([I,y=T,A=M])}for(var oe=(s||{}).domain,se=g._fullLayout._size,ne=s&&"pixel"===s.xsizemode,W=s&&"pixel"===s.ysizemode,G=!1===b,$=0;$<h.length;$++){for(l=0;l+2<7;l+=2){var V=h[$][l+1],H=h[$][l+2];void 0===V||void 0===H||(y=V,A=H,s&&(s.xaxis&&s.xaxis.p2r?(G&&(V-=s.xaxis._offset),V=ne?d(s.xaxis,s.xanchor)+V:c(s.xaxis,V)):(G&&(V-=se.l),oe?V=oe.x[0]+V/se.w:V/=se.w),s.yaxis&&s.yaxis.p2r?(G&&(H-=s.yaxis._offset),H=W?d(s.yaxis,s.yanchor)-H:c(s.yaxis,H)):(G&&(H-=se.t),H=oe?oe.y[1]-H/se.h:1-H/se.h)),h[$][l+1]=V,h[$][l+2]=H)}S[p].push(h[$].slice())}}return S},ae.pointsShapeRectangle=function(r){if(5!==r.length)return!1;for(var s=1;s<3;s++){if(!i(r[0][s]-r[1][s],r[3][s]-r[2][s]))return!1;if(!i(r[0][s]-r[3][s],r[1][s]-r[2][s]))return!1}return!(!i(r[0][1],r[1][1])&&!i(r[0][1],r[3][1])||!(a(r[0],r[1])*a(r[0],r[3])))},ae.pointsShapeEllipse=function(r){var g=r.length;if(g!==m+1)return!1;g=m;for(var s=0;s<g;s++){var b=(2*g-s)%g,x=(g/2+b)%g;if(!i(a(r[s],r[(g/2+s)%g]),a(r[b],r[x])))return!1}return!0},ae.handleEllipse=function(r,g,s){if(!r)return[g,s];var b=ae.ellipseOver({x0:g[0],y0:g[1],x1:s[0],y1:s[1]}),x=(b.x1+b.x0)/2,S=(b.y1+b.y0)/2,p=(b.x1-b.x0)/2,w=(b.y1-b.y0)/2;p||(p=w/=E),w||(w=p/=E);for(var l=[],y=0;y<m;y++){var A=2*y*Math.PI/m;l.push([x+p*Math.cos(A),S+w*Math.sin(A)])}return l},ae.ellipseOver=function(r){var g=r.x0,s=r.y0,b=r.x1,x=r.y1,S=b-g,p=x-s,w=((g-=S)+b)/2,l=((s-=p)+x)/2;return{x0:w-(S*=E),y0:l-(p*=E),x1:w+S,y1:l+p}}},{"../../../plots/cartesian/helpers":566,"./constants":452,"parse-svg-path":250}],456:[function(v,ie,ae){"use strict";var _=v("../../dragelement/helpers"),k=_.drawMode,m=_.openMode,E=v("./constants"),e=E.i000,c=E.i090,d=E.i180,n=E.i270,t=E.cos45,i=E.sin45,a=v("../../../plots/cartesian/helpers"),r=a.p2r,g=a.r2p,b=v("../../../plots/cartesian/handle_outline").clearSelect,x=v("./helpers"),S=x.readPaths,p=x.writePaths,w=x.ellipseOver;ie.exports=function(A,T){if(A.length){var M=A[0][0];if(M){var f=M.getAttribute("d"),u=T.gd,h=u._fullLayout.newshape,o=T.plotinfo,C=o.xaxis,R=o.yaxis,z=!!o.domain||!o.xaxis,O=!!o.domain||!o.yaxis,I=T.isActiveShape,F=T.dragmode,D=(u.layout||{}).shapes||[];if(!k(F)&&void 0!==I){var N=u._fullLayout._activeShapeIndex;if(N<D.length)switch(u._fullLayout.shapes[N].type){case"rect":F="drawrect";break;case"circle":F="drawcircle";break;case"line":F="drawline";break;case"path":var U=D[N].path||"";F="Z"===U[U.length-1]?"drawclosedpath":"drawopenpath"}}var ne,X=m(F),oe=S(f,u,o,I),se={editable:!0,xref:z?"paper":C._id,yref:O?"paper":R._id,layer:h.layer,opacity:h.opacity,line:{color:h.line.color,width:h.line.width,dash:h.line.dash}};if(X||(se.fillcolor=h.fillcolor,se.fillrule=h.fillrule),1===oe.length&&(ne=oe[0]),ne&&"drawrect"===F)se.type="rect",se.x0=ne[0][1],se.y0=ne[0][2],se.x1=ne[2][1],se.y1=ne[2][2];else if(ne&&"drawline"===F)se.type="line",se.x0=ne[0][1],se.y0=ne[0][2],se.x1=ne[1][1],se.y1=ne[1][2];else if(ne&&"drawcircle"===F){se.type="circle";var W=ne[e][1],G=ne[c][1],$=ne[d][1],V=ne[n][1],H=ne[e][2],q=ne[c][2],K=ne[d][2],Y=ne[n][2],te=o.xaxis&&("date"===o.xaxis.type||"log"===o.xaxis.type),J=o.yaxis&&("date"===o.yaxis.type||"log"===o.yaxis.type);te&&(W=g(o.xaxis,W),G=g(o.xaxis,G),$=g(o.xaxis,$),V=g(o.xaxis,V)),J&&(H=g(o.yaxis,H),q=g(o.yaxis,q),K=g(o.yaxis,K),Y=g(o.yaxis,Y));var j=(G+V)/2,re=(H+K)/2,pe=w({x0:j,y0:re,x1:j+(V-G+$-W)/2*t,y1:re+(Y-q+K-H)/2*i});te&&(pe.x0=r(o.xaxis,pe.x0),pe.x1=r(o.xaxis,pe.x1)),J&&(pe.y0=r(o.yaxis,pe.y0),pe.y1=r(o.yaxis,pe.y1)),se.x0=pe.x0,se.y0=pe.y0,se.x1=pe.x1,se.y1=pe.y1}else se.type="path",C&&R&&function l(y,A,T){var M="date"===A.type,f="date"===T.type;if(!M&&!f)return y;for(var u=0;u<y.length;u++)for(var h=0;h<y[u].length;h++)for(var o=0;o+2<y[u][h].length;o+=2)M&&(y[u][h][o+1]=y[u][h][o+1].replace(" ","_")),f&&(y[u][h][o+2]=y[u][h][o+2].replace(" ","_"));return y}(oe,C,R),se.path=p(oe),ne=null;b(u);for(var xe=T.editHelpers,ke=(xe||{}).modifyItem,we=[],de=0;de<D.length;de++){var be=u._fullLayout.shapes[de];if(we[de]=be._input,void 0!==I&&de===u._fullLayout._activeShapeIndex){var Le=se;switch(be.type){case"line":case"rect":case"circle":ke("x0",Le.x0),ke("x1",Le.x1),ke("y0",Le.y0),ke("y1",Le.y1);break;case"path":ke("path",Le.path)}}}return void 0===I?(we.push(se),we):xe?xe.getUpdateObj():{}}}}},{"../../../plots/cartesian/handle_outline":565,"../../../plots/cartesian/helpers":566,"../../dragelement/helpers":384,"./constants":452,"./helpers":455}],457:[function(v,ie,ae){"use strict";var _=v("./constants"),k=v("../../lib");ae.rangeToShapePosition=function(m){return"log"===m.type?m.r2d:function(E){return E}},ae.shapePositionToRange=function(m){return"log"===m.type?m.d2r:function(E){return E}},ae.decodeDate=function(m){return function(E){return E.replace&&(E=E.replace("_"," ")),m(E)}},ae.encodeDate=function(m){return function(E){return m(E).replace(" ","_")}},ae.extractPathCoords=function(m,E){var e=[];return m.match(_.segmentRE).forEach(function(d){var n=E[d.charAt(0)].drawn;if(void 0!==n){var t=d.substr(1).match(_.paramRE);!t||t.length<n||e.push(k.cleanNumber(t[n]))}}),e},ae.getDataToPixel=function(m,E,e,c){var n,d=m._fullLayout._size;if(E)if("domain"===c)n=function(i){return E._length*(e?1-i:i)+E._offset};else{var t=ae.shapePositionToRange(E);n=function(i){return E._offset+E.r2p(t(i,!0))},"date"===E.type&&(n=ae.decodeDate(n))}else n=e?function(i){return d.t+d.h*(1-i)}:function(i){return d.l+d.w*i};return n},ae.getPixelToData=function(m,E,e,c){var n,d=m._fullLayout._size;if(E)if("domain"===c)n=function(i){var a=(i-E._offset)/E._length;return e?1-a:a};else{var t=ae.rangeToShapePosition(E);n=function(i){return t(E.p2r(i-E._offset))}}else n=e?function(i){return 1-(i-d.t)/d.h}:function(i){return(i-d.l)/d.w};return n},ae.roundPositionForSharpStrokeRendering=function(m,E){var e=1===Math.round(E%2),c=Math.round(m);return e?c+.5:c},ae.makeOptionsAndPlotinfo=function(m,E){var e=m._fullLayout.shapes[E]||{},c=m._fullLayout._plots[e.xref+e.yref];return c?c._hadPlotinfo=!0:(c={},e.xref&&"paper"!==e.xref&&(c.xaxis=m._fullLayout[e.xref+"axis"]),e.yref&&"paper"!==e.yref&&(c.yaxis=m._fullLayout[e.yref+"axis"])),c.xsizemode=e.xsizemode,c.ysizemode=e.ysizemode,c.xanchor=e.xanchor,c.yanchor=e.yanchor,{options:e,plotinfo:c}}},{"../../lib":503,"./constants":448}],458:[function(v,ie,ae){"use strict";var _=v("./draw");ie.exports={moduleType:"component",name:"shapes",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),supplyDrawNewShapeDefaults:v("./draw_newshape/defaults"),includeBasePlot:v("../../plots/cartesian/include_components")("shapes"),calcAutorange:v("./calc_autorange"),draw:_.draw,drawOne:_.drawOne}},{"../../plots/cartesian/include_components":567,"./attributes":446,"./calc_autorange":447,"./defaults":449,"./draw":450,"./draw_newshape/defaults":453}],459:[function(v,ie,ae){"use strict";var _=v("../../plots/font_attributes"),k=v("../../plots/pad_attributes"),m=v("../../lib/extend").extendDeepAll,E=v("../../plot_api/edit_types").overrideAll,e=v("../../plots/animation_attributes"),c=v("../../plot_api/plot_template").templatedArray,d=v("./constants"),n=c("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});ie.exports=E(c("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:n,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:m(k({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:_({})},font:_({}),activebgcolor:{valType:"color",dflt:d.gripBgActiveColor},bgcolor:{valType:"color",dflt:d.railBgColor},bordercolor:{valType:"color",dflt:d.railBorderColor},borderwidth:{valType:"number",min:0,dflt:d.railBorderWidth},ticklen:{valType:"number",min:0,dflt:d.tickLength},tickcolor:{valType:"color",dflt:d.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:d.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/animation_attributes":548,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"./constants":460}],460:[function(v,ie,ae){"use strict";ie.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],461:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../plots/array_container_defaults"),m=v("./attributes"),e=v("./constants").name,c=m.steps;function d(t,i,a){function r(l,y){return _.coerce(t,i,m,l,y)}for(var g=k(t,i,{name:"steps",handleItemDefaults:n}),s=0,b=0;b<g.length;b++)g[b].visible&&s++;if(s<2?i.visible=!1:r("visible")){i._stepCount=s;var S=i._visibleSteps=_.filterVisible(g);(g[r("active")]||{}).visible||(i.active=S[0]._index),r("x"),r("y"),_.noneOrAll(t,i,["x","y"]),r("xanchor"),r("yanchor"),r("len"),r("lenmode"),r("pad.t"),r("pad.r"),r("pad.b"),r("pad.l"),_.coerceFont(r,"font",a.font),r("currentvalue.visible")&&(r("currentvalue.xanchor"),r("currentvalue.prefix"),r("currentvalue.suffix"),r("currentvalue.offset"),_.coerceFont(r,"currentvalue.font",i.font)),r("transition.duration"),r("transition.easing"),r("bgcolor"),r("activebgcolor"),r("bordercolor"),r("borderwidth"),r("ticklen"),r("tickwidth"),r("tickcolor"),r("minorticklen")}}function n(t,i){function a(s,b){return _.coerce(t,i,c,s,b)}if("skip"===t.method||Array.isArray(t.args)?a("visible"):i.visible=!1){a("method"),a("args");var g=a("label","step-"+i._index);a("value",g),a("execute")}}ie.exports=function(i,a){k(i,a,{name:e,handleItemDefaults:d})}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":459,"./constants":460}],462:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../plots/plots"),m=v("../color"),E=v("../drawing"),e=v("../../lib"),c=e.strTranslate,d=v("../../lib/svg_text_utils"),n=v("../../plot_api/plot_template").arrayEditor,t=v("./constants"),i=v("../../constants/alignment"),a=i.LINE_SPACING,r=i.FROM_TL,g=i.FROM_BR;function s(I){return t.autoMarginIdRoot+I._index}function x(I){return I._index}function S(I,F){var D=E.tester.selectAll("g."+t.labelGroupClass).data(F._visibleSteps);D.enter().append("g").classed(t.labelGroupClass,!0);var N=0,U=0;D.each(function(q){var te=y(_.select(this),{step:q},F).node();if(te){var J=E.bBox(te);U=Math.max(U,J.height),N=Math.max(N,J.width)}}),D.remove();var X=F._dims={};X.inputAreaWidth=Math.max(t.railWidth,t.gripHeight);var oe=I._fullLayout._size;if(X.lx=oe.l+oe.w*F.x,X.ly=oe.t+oe.h*(1-F.y),X.outerLength="fraction"===F.lenmode?Math.round(oe.w*F.len):F.len,X.inputAreaStart=0,X.inputAreaLength=Math.round(X.outerLength-F.pad.l-F.pad.r),X.labelStride=Math.max(1,Math.ceil((N+t.labelPadding)/((X.inputAreaLength-2*t.stepInset)/(F._stepCount-1)))),X.labelHeight=U,X.currentValueMaxWidth=0,X.currentValueHeight=0,X.currentValueTotalHeight=0,X.currentValueMaxLines=1,F.currentvalue.visible){var G=E.tester.append("g");D.each(function(q){var K=w(G,F,q.label),Y=K.node()&&E.bBox(K.node())||{width:0,height:0},te=d.lineCount(K);X.currentValueMaxWidth=Math.max(X.currentValueMaxWidth,Math.ceil(Y.width)),X.currentValueHeight=Math.max(X.currentValueHeight,Math.ceil(Y.height)),X.currentValueMaxLines=Math.max(X.currentValueMaxLines,te)}),X.currentValueTotalHeight=X.currentValueHeight+F.currentvalue.offset,G.remove()}X.height=X.currentValueTotalHeight+t.tickOffset+F.ticklen+t.labelOffset+X.labelHeight+F.pad.t+F.pad.b;var $="left";e.isRightAnchor(F)&&(X.lx-=X.outerLength,$="right"),e.isCenterAnchor(F)&&(X.lx-=X.outerLength/2,$="center");var V="top";e.isBottomAnchor(F)&&(X.ly-=X.height,V="bottom"),e.isMiddleAnchor(F)&&(X.ly-=X.height/2,V="middle"),X.outerLength=Math.ceil(X.outerLength),X.height=Math.ceil(X.height),X.lx=Math.round(X.lx),X.ly=Math.round(X.ly);var H={y:F.y,b:X.height*g[V],t:X.height*r[V]};"fraction"===F.lenmode?(H.l=0,H.xl=F.x-F.len*r[$],H.r=0,H.xr=F.x+F.len*g[$]):(H.x=F.x,H.l=X.outerLength*r[$],H.r=X.outerLength*g[$]),k.autoMargin(I,s(F),H)}function w(I,F,D){if(F.currentvalue.visible){var U,X,N=F._dims;switch(F.currentvalue.xanchor){case"right":U=N.inputAreaLength-t.currentValueInset-N.currentValueMaxWidth,X="left";break;case"center":U=.5*N.inputAreaLength,X="middle";break;default:U=t.currentValueInset,X="left"}var oe=e.ensureSingle(I,"text",t.labelClass,function(V){V.attr({"text-anchor":X,"data-notex":1})}),se=F.currentvalue.prefix?F.currentvalue.prefix:"";if("string"==typeof D)se+=D;else{var ne=F.steps[F.active].label,W=F._gd._fullLayout._meta;W&&(ne=e.templateString(ne,W)),se+=ne}F.currentvalue.suffix&&(se+=F.currentvalue.suffix),oe.call(E.font,F.currentvalue.font).text(se).call(d.convertToTspans,F._gd);var G=d.lineCount(oe);return d.positionText(oe,U,(N.currentValueMaxLines+1-G)*F.currentvalue.font.size*a),oe}}function l(I,F,D){e.ensureSingle(I,"rect",t.gripRectClass,function(U){U.call(f,F,I,D).style("pointer-events","all")}).attr({width:t.gripWidth,height:t.gripHeight,rx:t.gripRadius,ry:t.gripRadius}).call(m.stroke,D.bordercolor).call(m.fill,D.bgcolor).style("stroke-width",D.borderwidth+"px")}function y(I,F,D){var N=e.ensureSingle(I,"text",t.labelClass,function(oe){oe.attr({"text-anchor":"middle","data-notex":1})}),U=F.step.label,X=D._gd._fullLayout._meta;return X&&(U=e.templateString(U,X)),N.call(E.font,D.font).text(U).call(d.convertToTspans,D._gd),N}function A(I,F){var D=e.ensureSingle(I,"g",t.labelsClass),N=F._dims,U=D.selectAll("g."+t.labelGroupClass).data(N.labelSteps);U.enter().append("g").classed(t.labelGroupClass,!0),U.exit().remove(),U.each(function(X){var oe=_.select(this);oe.call(y,X,F),E.setTranslate(oe,C(F,X.fraction),t.tickOffset+F.ticklen+F.font.size*a+t.labelOffset+N.currentValueTotalHeight)})}function T(I,F,D,N,U){var X=Math.round(N*(D._stepCount-1)),oe=D._visibleSteps[X]._index;oe!==D.active&&M(I,F,D,oe,!0,U)}function M(I,F,D,N,U,X){var oe=D.active;D.active=N,n(I.layout,t.name,D).applyUpdate("active",N);var se=D.steps[D.active];F.call(o,D,X),F.call(w,D),I.emit("plotly_sliderchange",{slider:D,step:D.steps[D.active],interaction:U,previousActive:oe}),se&&se.method&&U&&(F._nextMethod?(F._nextMethod.step=se,F._nextMethod.doCallback=U,F._nextMethod.doTransition=X):(F._nextMethod={step:se,doCallback:U,doTransition:X},F._nextMethodRaf=window.requestAnimationFrame(function(){var ne=F._nextMethod.step;!ne.method||(ne.execute&&k.executeAPICommand(I,ne.method,ne.args),F._nextMethod=null,F._nextMethodRaf=null)})))}function f(I,F,D){var N=D.node(),U=_.select(F);function X(){return D.data()[0]}function oe(){var se=X();F.emit("plotly_sliderstart",{slider:se});var ne=D.select("."+t.gripRectClass);_.event.stopPropagation(),_.event.preventDefault(),ne.call(m.fill,se.activebgcolor);var W=R(se,_.mouse(N)[0]);function G(){var V=X(),H=R(V,_.mouse(N)[0]);T(F,D,V,H,!1)}function $(){var V=X();V._dragging=!1,ne.call(m.fill,V.bgcolor),U.on("mouseup",null),U.on("mousemove",null),U.on("touchend",null),U.on("touchmove",null),F.emit("plotly_sliderend",{slider:V,step:V.steps[V.active]})}T(F,D,se,W,!0),se._dragging=!0,U.on("mousemove",G),U.on("touchmove",G),U.on("mouseup",$),U.on("touchend",$)}I.on("mousedown",oe),I.on("touchstart",oe)}function u(I,F){var D=I.selectAll("rect."+t.tickRectClass).data(F._visibleSteps),N=F._dims;D.enter().append("rect").classed(t.tickRectClass,!0),D.exit().remove(),D.attr({width:F.tickwidth+"px","shape-rendering":"crispEdges"}),D.each(function(U,X){var oe=X%N.labelStride==0,se=_.select(this);se.attr({height:oe?F.ticklen:F.minorticklen}).call(m.fill,F.tickcolor),E.setTranslate(se,C(F,X/(F._stepCount-1))-.5*F.tickwidth,(oe?t.tickOffset:t.minorTickOffset)+N.currentValueTotalHeight)})}function o(I,F,D){for(var N=I.select("rect."+t.gripRectClass),U=0,X=0;X<F._stepCount;X++)if(F._visibleSteps[X]._index===F.active){U=X;break}var oe=C(F,U/(F._stepCount-1));if(!F._invokingCommand){var se=N;D&&F.transition.duration>0&&(se=se.transition().duration(F.transition.duration).ease(F.transition.easing)),se.attr("transform",c(oe-.5*t.gripWidth,F._dims.currentValueTotalHeight))}}function C(I,F){var D=I._dims;return D.inputAreaStart+t.stepInset+(D.inputAreaLength-2*t.stepInset)*Math.min(1,Math.max(0,F))}function R(I,F){var D=I._dims;return Math.min(1,Math.max(0,(F-t.stepInset-D.inputAreaStart)/(D.inputAreaLength-2*t.stepInset-2*D.inputAreaStart)))}function z(I,F,D){var N=D._dims,U=e.ensureSingle(I,"rect",t.railTouchRectClass,function(X){X.call(f,F,I,D).style("pointer-events","all")});U.attr({width:N.inputAreaLength,height:Math.max(N.inputAreaWidth,t.tickOffset+D.ticklen+N.labelHeight)}).call(m.fill,D.bgcolor).attr("opacity",0),E.setTranslate(U,0,N.currentValueTotalHeight)}function O(I,F){var D=F._dims,N=D.inputAreaLength-2*t.railInset,U=e.ensureSingle(I,"rect",t.railRectClass);U.attr({width:N,height:t.railWidth,rx:t.railRadius,ry:t.railRadius,"shape-rendering":"crispEdges"}).call(m.stroke,F.bordercolor).call(m.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px"),E.setTranslate(U,t.railInset,.5*(D.inputAreaWidth-t.railWidth)+D.currentValueTotalHeight)}ie.exports=function(F){var D=F._fullLayout,N=function b(I,F){for(var D=I[t.name],N=[],U=0;U<D.length;U++){var X=D[U];!X.visible||(X._gd=F,N.push(X))}return N}(D,F),U=D._infolayer.selectAll("g."+t.containerClassName).data(N.length>0?[0]:[]);function X(W){W._commandObserver&&(W._commandObserver.remove(),delete W._commandObserver),k.autoMargin(F,s(W))}if(U.enter().append("g").classed(t.containerClassName,!0).style("cursor","ew-resize"),U.exit().each(function(){_.select(this).selectAll("g."+t.groupClassName).each(X)}).remove(),0!==N.length){var oe=U.selectAll("g."+t.groupClassName).data(N,x);oe.enter().append("g").classed(t.groupClassName,!0),oe.exit().each(X).remove();for(var se=0;se<N.length;se++)S(F,N[se]);oe.each(function(W){var G=_.select(this);(function h(I){var F=I._dims;F.labelSteps=[];for(var D=I._stepCount,N=0;N<D;N+=F.labelStride)F.labelSteps.push({fraction:N/(D-1),step:I._visibleSteps[N]})})(W),k.manageCommandObserver(F,W,W._visibleSteps,function($){var V=G.data()[0];V.active!==$.index&&(V._dragging||M(F,G,V,$.index,!1,!0))}),function p(I,F,D){(D.steps[D.active]||{}).visible||(D.active=D._visibleSteps[0]._index),F.call(w,D).call(O,D).call(A,D).call(u,D).call(z,I,D).call(l,I,D);var N=D._dims;E.setTranslate(F,N.lx+D.pad.l,N.ly+D.pad.t),F.call(o,D,!1),F.call(w,D)}(F,_.select(this),W)})}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":460,"@plotly/d3":58}],463:[function(v,ie,ae){"use strict";var _=v("./constants");ie.exports={moduleType:"component",name:_.name,layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),draw:v("./draw")}},{"./attributes":459,"./constants":460,"./defaults":461,"./draw":462}],464:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("fast-isnumeric"),m=v("../../plots/plots"),E=v("../../registry"),e=v("../../lib"),c=e.strTranslate,d=v("../drawing"),n=v("../color"),t=v("../../lib/svg_text_utils"),i=v("../../constants/interactions"),a=v("../../constants/alignment").OPPOSITE_SIDE,r=/ [XY][0-9]* /;ie.exports={draw:function g(s,b,x){var F,p=x.propName,w=x.placeholder,l=x.traceIndex,y=x.avoid||{},A=x.attributes,T=x.transform,M=x.containerGroup,f=s._fullLayout,u=1,h=!1,o=x.propContainer.title,C=(o&&o.text?o.text:"").trim(),R=o&&o.font?o.font:{},z=R.family,O=R.size,I=R.color;"title.text"===p?F="titleText":-1!==p.indexOf("axis")?F="axisTitleText":p.indexOf(!0)&&(F="colorbarTitleText");var D=s._context.edits[F];""===C?u=0:C.replace(r," % ")===w.replace(r," % ")&&(u=.2,h=!0,D||(C="")),x._meta?C=e.templateString(C,x._meta):f._meta&&(C=e.templateString(C,f._meta));var U,N=C||D;M||(M=e.ensureSingle(f._infolayer,"g","g-"+b),U=f._hColorbarMoveTitle);var X=M.selectAll("text").data(N?[0]:[]);if(X.enter().append("text"),X.text(C).attr("class",b),X.exit().remove(),!N)return M;function oe(G){e.syncOrAsync([se,ne],G)}function se(G){var $;return!T&&U&&(T={}),T?($="",T.rotate&&($+="rotate("+[T.rotate,A.x,A.y]+")"),(T.offset||U)&&($+=c(0,(T.offset||0)-(U||0)))):$=null,G.attr("transform",$),G.style({"font-family":z,"font-size":_.round(O,2)+"px",fill:n.rgb(I),opacity:u*n.opacity(I),"font-weight":m.fontWeight}).attr(A).call(t.convertToTspans,s),m.previousPromises(s)}function ne(G){var $=_.select(G.node().parentNode);if(y&&y.selection&&y.side&&C){$.attr("transform",null);var V=a[y.side],H="left"===y.side||"top"===y.side?-1:1,q=k(y.pad)?y.pad:2,K=d.bBox($.node()),te=y.maxShift||H*({left:0,top:0,right:f.width,bottom:f.height}[y.side]-K[y.side]),J=0;if(te<0)J=te;else{var j=y.offsetLeft||0,re=y.offsetTop||0;K.left-=j,K.right-=j,K.top-=re,K.bottom-=re,y.selection.each(function(){var ge=d.bBox(this);e.bBoxIntersect(K,ge,q)&&(J=Math.max(J,H*(ge[y.side]-K[V])+q))}),J=Math.min(te,J)}if(J>0||te<0){var le={left:[-J,0],right:[J,0],top:[0,-J],bottom:[0,J]}[y.side];$.attr("transform",c(le[0],le[1]))}}}return X.call(oe),D&&(C?X.on(".opacity",null):function W(){u=0,h=!0,X.text(w).on("mouseover.opacity",function(){_.select(this).transition().duration(i.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){_.select(this).transition().duration(i.HIDE_PLACEHOLDER).style("opacity",0)})}(),X.call(t.makeEditable,{gd:s}).on("edit",function(G){void 0!==l?E.call("_guiRestyle",s,p,G,l):E.call("_guiRelayout",s,p,G)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(oe)}).on("input",function(G){this.text(G||" ").call(t.positionText,A.x,A.y)})),X.classed("js-placeholder",h),M}}},{"../../constants/alignment":471,"../../constants/interactions":478,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],465:[function(v,ie,ae){"use strict";var _=v("../../plots/font_attributes"),k=v("../color/attributes"),m=v("../../lib/extend").extendFlat,E=v("../../plot_api/edit_types").overrideAll,e=v("../../plots/pad_attributes"),c=v("../../plot_api/plot_template").templatedArray,d=c("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});ie.exports=E(c("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:d,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:m(e({editType:"arraydraw"}),{}),font:_({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:k.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"../color/attributes":365}],466:[function(v,ie,ae){"use strict";ie.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},{}],467:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../plots/array_container_defaults"),m=v("./attributes"),e=v("./constants").name,c=m.buttons;function d(t,i,a){function r(b,x){return _.coerce(t,i,m,b,x)}!r("visible",k(t,i,{name:"buttons",handleItemDefaults:n}).length>0)||(r("active"),r("direction"),r("type"),r("showactive"),r("x"),r("y"),_.noneOrAll(t,i,["x","y"]),r("xanchor"),r("yanchor"),r("pad.t"),r("pad.r"),r("pad.b"),r("pad.l"),_.coerceFont(r,"font",a.font),r("bgcolor",a.paper_bgcolor),r("bordercolor"),r("borderwidth"))}function n(t,i){function a(g,s){return _.coerce(t,i,c,g,s)}a("visible","skip"===t.method||Array.isArray(t.args))&&(a("method"),a("args"),a("args2"),a("label"),a("execute"))}ie.exports=function(i,a){k(i,a,{name:e,handleItemDefaults:d})}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":465,"./constants":466}],468:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../plots/plots"),m=v("../color"),E=v("../drawing"),e=v("../../lib"),c=v("../../lib/svg_text_utils"),d=v("../../plot_api/plot_template").arrayEditor,n=v("../../constants/alignment").LINE_SPACING,t=v("./constants"),i=v("./scrollbox");function a(C){return C._index}function g(C,R){return+C.attr(t.menuIndexAttrName)===R._index}function s(C,R,z,O,I,F,D,N){R.active=D,d(C.layout,t.name,R).applyUpdate("active",D),"buttons"===R.type?x(C,O,null,null,R):"dropdown"===R.type&&(I.attr(t.menuIndexAttrName,"-1"),b(C,O,I,F,R),N||x(C,O,I,F,R))}function b(C,R,z,O,I){var F=e.ensureSingle(R,"g",t.headerClassName,function(ne){ne.style("pointer-events","all")}),D=I._dims,X={y:I.pad.t,yPad:0,x:I.pad.l,xPad:0,index:0},oe={width:D.headerWidth,height:D.headerHeight};F.call(w,I,I.buttons[I.active]||t.blankHeaderOpts,C).call(h,I,X,oe),e.ensureSingle(R,"text",t.headerArrowClassName,function(ne){ne.attr("text-anchor","end").call(E.font,I.font).text(t.arrowSymbol[I.direction])}).attr({x:D.headerWidth-t.arrowOffsetX+I.pad.l,y:D.headerHeight/2+t.textOffsetY+I.pad.t}),F.on("click",function(){z.call(o,String(g(z,I)?-1:I._index)),x(C,R,z,O,I)}),F.on("mouseover",function(){F.call(T)}),F.on("mouseout",function(){F.call(M,I)}),E.setTranslate(R,D.lx,D.ly)}function x(C,R,z,O,I){z||(z=R).attr("pointer-events","all");var F=function r(C){return-1==+C.attr(t.menuIndexAttrName)}(z)&&"buttons"!==I.type?[]:I.buttons,D="dropdown"===I.type?t.dropdownButtonClassName:t.buttonClassName,N=z.selectAll("g."+D).data(e.filterVisible(F)),U=N.enter().append("g").classed(D,!0),X=N.exit();"dropdown"===I.type?(U.attr("opacity","0").transition().attr("opacity","1"),X.transition().attr("opacity","0").remove()):X.remove();var oe=0,se=0,ne=I._dims,W=-1!==["up","down"].indexOf(I.direction);"dropdown"===I.type&&(W?se=ne.headerHeight+t.gapButtonHeader:oe=ne.headerWidth+t.gapButtonHeader),"dropdown"===I.type&&"up"===I.direction&&(se=-t.gapButtonHeader+t.gapButton-ne.openHeight),"dropdown"===I.type&&"left"===I.direction&&(oe=-t.gapButtonHeader+t.gapButton-ne.openWidth);var G={x:ne.lx+oe+I.pad.l,y:ne.ly+se+I.pad.t,yPad:t.gapButton,xPad:t.gapButton,index:0},$={l:G.x+I.borderwidth,t:G.y+I.borderwidth};N.each(function(V,H){var q=_.select(this);q.call(w,I,V,C).call(h,I,G),q.on("click",function(){_.event.defaultPrevented||(V.execute&&(V.args2&&I.active===H?(s(C,I,0,R,z,O,-1),k.executeAPICommand(C,V.method,V.args2)):(s(C,I,0,R,z,O,H),k.executeAPICommand(C,V.method,V.args))),C.emit("plotly_buttonclicked",{menu:I,button:V,active:I.active}))}),q.on("mouseover",function(){q.call(T)}),q.on("mouseout",function(){q.call(M,I),N.call(A,I)})}),N.call(A,I),W?($.w=Math.max(ne.openWidth,ne.headerWidth),$.h=G.y-$.t):($.w=G.x-$.l,$.h=Math.max(ne.openHeight,ne.headerHeight)),$.direction=I.direction,O&&(N.size()?function S(C,R,z,O,I,F){var oe,se,ne,D=I.direction,U=I._dims,X=I.active;if("up"===D||"down"===D)for(se=0,ne=0;ne<X;ne++)se+=U.heights[ne]+t.gapButton;else for(oe=0,ne=0;ne<X;ne++)oe+=U.widths[ne]+t.gapButton;O.enable(F,oe,se),O.hbar&&O.hbar.attr("opacity","0").transition().attr("opacity","1"),O.vbar&&O.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,O,I,$):function p(C){var R=!!C.hbar,z=!!C.vbar;R&&C.hbar.transition().attr("opacity","0").each("end",function(){R=!1,z||C.disable()}),z&&C.vbar.transition().attr("opacity","0").each("end",function(){z=!1,R||C.disable()})}(O))}function w(C,R,z,O){C.call(l,R).call(y,R,z,O)}function l(C,R){e.ensureSingle(C,"rect",t.itemRectClassName,function(O){O.attr({rx:t.rx,ry:t.ry,"shape-rendering":"crispEdges"})}).call(m.stroke,R.bordercolor).call(m.fill,R.bgcolor).style("stroke-width",R.borderwidth+"px")}function y(C,R,z,O){var I=e.ensureSingle(C,"text",t.itemTextClassName,function(N){N.attr({"text-anchor":"start","data-notex":1})}),F=z.label,D=O._fullLayout._meta;D&&(F=e.templateString(F,D)),I.call(E.font,R.font).text(F).call(c.convertToTspans,O)}function A(C,R){var z=R.active;C.each(function(O,I){var F=_.select(this);I===z&&R.showactive&&F.select("rect."+t.itemRectClassName).call(m.fill,t.activeColor)})}function T(C){C.select("rect."+t.itemRectClassName).call(m.fill,t.hoverColor)}function M(C,R){C.select("rect."+t.itemRectClassName).call(m.fill,R.bgcolor)}function f(C,R){var z=R._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},O=E.tester.selectAll("g."+t.dropdownButtonClassName).data(e.filterVisible(R.buttons));O.enter().append("g").classed(t.dropdownButtonClassName,!0);var I=-1!==["up","down"].indexOf(R.direction);O.each(function(oe,se){var ne=_.select(this);ne.call(w,R,oe,C);var W=ne.select("."+t.itemTextClassName),G=W.node()&&E.bBox(W.node()).width,$=Math.max(G+t.textPadX,t.minWidth),V=R.font.size*n,H=c.lineCount(W),q=Math.max(V*H,t.minHeight)+t.textOffsetY;q=Math.ceil(q),$=Math.ceil($),z.widths[se]=$,z.heights[se]=q,z.height1=Math.max(z.height1,q),z.width1=Math.max(z.width1,$),I?(z.totalWidth=Math.max(z.totalWidth,$),z.openWidth=z.totalWidth,z.totalHeight+=q+t.gapButton,z.openHeight+=q+t.gapButton):(z.totalWidth+=$+t.gapButton,z.openWidth+=$+t.gapButton,z.totalHeight=Math.max(z.totalHeight,q),z.openHeight=z.totalHeight)}),I?z.totalHeight-=t.gapButton:z.totalWidth-=t.gapButton,z.headerWidth=z.width1+t.arrowPadX,z.headerHeight=z.height1,"dropdown"===R.type&&(I?(z.width1+=t.arrowPadX,z.totalHeight=z.height1):z.totalWidth=z.width1,z.totalWidth+=t.arrowPadX),O.remove();var F=z.totalWidth+R.pad.l+R.pad.r,D=z.totalHeight+R.pad.t+R.pad.b,N=C._fullLayout._size;z.lx=N.l+N.w*R.x,z.ly=N.t+N.h*(1-R.y);var U="left";e.isRightAnchor(R)&&(z.lx-=F,U="right"),e.isCenterAnchor(R)&&(z.lx-=F/2,U="center");var X="top";e.isBottomAnchor(R)&&(z.ly-=D,X="bottom"),e.isMiddleAnchor(R)&&(z.ly-=D/2,X="middle"),z.totalWidth=Math.ceil(z.totalWidth),z.totalHeight=Math.ceil(z.totalHeight),z.lx=Math.round(z.lx),z.ly=Math.round(z.ly),k.autoMargin(C,u(R),{x:R.x,y:R.y,l:F*({right:1,center:.5}[U]||0),r:F*({left:1,center:.5}[U]||0),b:D*({top:1,middle:.5}[X]||0),t:D*({bottom:1,middle:.5}[X]||0)})}function u(C){return t.autoMarginIdRoot+C._index}function h(C,R,z,O){O=O||{};var I=C.select("."+t.itemRectClassName),F=C.select("."+t.itemTextClassName),D=R.borderwidth,N=z.index,U=R._dims;E.setTranslate(C,D+z.x,D+z.y);var X=-1!==["up","down"].indexOf(R.direction),oe=O.height||(X?U.heights[N]:U.height1);I.attr({x:0,y:0,width:O.width||(X?U.width1:U.widths[N]),height:oe});var se=R.font.size*n,ne=c.lineCount(F);c.positionText(F,t.textOffsetX,oe/2-(ne-1)*se/2+t.textOffsetY),X?z.y+=U.heights[N]+z.yPad:z.x+=U.widths[N]+z.xPad,z.index++}function o(C,R){C.attr(t.menuIndexAttrName,R||"-1").selectAll("g."+t.dropdownButtonClassName).remove()}ie.exports=function(R){var z=R._fullLayout,O=e.filterVisible(z[t.name]);function I(ne){k.autoMargin(R,u(ne))}var F=z._menulayer.selectAll("g."+t.containerClassName).data(O.length>0?[0]:[]);if(F.enter().append("g").classed(t.containerClassName,!0).style("cursor","pointer"),F.exit().each(function(){_.select(this).selectAll("g."+t.headerGroupClassName).each(I)}).remove(),0!==O.length){var D=F.selectAll("g."+t.headerGroupClassName).data(O,a);D.enter().append("g").classed(t.headerGroupClassName,!0);for(var N=e.ensureSingle(F,"g",t.dropdownButtonGroupClassName,function(ne){ne.style("pointer-events","all")}),U=0;U<O.length;U++)f(R,O[U]);var se=new i(R,N,"updatemenus"+z._uid);D.enter().size()&&(N.node().parentNode.appendChild(N.node()),N.call(o)),D.exit().each(function(ne){N.call(o),I(ne)}).remove(),D.each(function(ne){var W=_.select(this),G="dropdown"===ne.type?N:null;k.manageCommandObserver(R,ne,ne.buttons,function($){s(R,ne,0,W,G,se,$.index,!0)}),"dropdown"===ne.type?(b(R,W,N,se,ne),g(N,ne)&&x(R,W,N,se,ne)):x(R,W,null,null,ne)})}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":466,"./scrollbox":470,"@plotly/d3":58}],469:[function(v,ie,ae){arguments[4][463][0].apply(ae,arguments)},{"./attributes":465,"./constants":466,"./defaults":467,"./draw":468,dup:463}],470:[function(v,ie,ae){"use strict";ie.exports=e;var _=v("@plotly/d3"),k=v("../color"),m=v("../drawing"),E=v("../../lib");function e(c,d,n){this.gd=c,this.container=d,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(d,n,t){var i=this.gd._fullLayout,a=i.width,r=i.height;this.position=d;var M,f,u,h,g=this.position.l,s=this.position.w,b=this.position.t,x=this.position.h,S=this.position.direction,p="down"===S,w="left"===S,y="up"===S,A=s,T=x;!p&&!w&&!("right"===S)&&!y&&(this.position.direction="down",p=!0),p||y?(f=(M=g)+A,p?(u=b,T=(h=Math.min(u+T,r))-u):T=(h=b+T)-(u=Math.max(h-T,0))):(h=(u=b)+T,w?A=(f=g+A)-(M=Math.max(f-A,0)):(M=g,A=(f=Math.min(M+A,a))-M)),this._box={l:M,t:u,w:A,h:T};var C=s>A,R=e.barLength+2*e.barPad,z=e.barWidth+2*e.barPad,O=g,I=b+x;I+z>r&&(I=r-z);var F=this.container.selectAll("rect.scrollbar-horizontal").data(C?[0]:[]);F.exit().on(".drag",null).remove(),F.enter().append("rect").classed("scrollbar-horizontal",!0).call(k.fill,e.barColor),C?(this.hbar=F.attr({rx:e.barRadius,ry:e.barRadius,x:O,y:I,width:R,height:z}),this._hbarXMin=O+R/2,this._hbarTranslateMax=A-R):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var D=x>T,N=e.barWidth+2*e.barPad,U=e.barLength+2*e.barPad,X=g+s,oe=b;X+N>a&&(X=a-N);var se=this.container.selectAll("rect.scrollbar-vertical").data(D?[0]:[]);se.exit().on(".drag",null).remove(),se.enter().append("rect").classed("scrollbar-vertical",!0).call(k.fill,e.barColor),D?(this.vbar=se.attr({rx:e.barRadius,ry:e.barRadius,x:X,y:oe,width:N,height:U}),this._vbarYMin=oe+U/2,this._vbarTranslateMax=T-U):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var ne=this.id,W=M-.5,G=D?f+N+.5:f+.5,$=u-.5,V=C?h+z+.5:h+.5,H=i._topdefs.selectAll("#"+ne).data(C||D?[0]:[]);if(H.exit().remove(),H.enter().append("clipPath").attr("id",ne).append("rect"),C||D?(this._clipRect=H.select("rect").attr({x:Math.floor(W),y:Math.floor($),width:Math.ceil(G)-Math.floor(W),height:Math.ceil(V)-Math.floor($)}),this.container.call(m.setClipUrl,ne,this.gd),this.bg.attr({x:g,y:b,width:s,height:x})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(m.setClipUrl,null),delete this._clipRect),C||D){var q=_.behavior.drag().on("dragstart",function(){_.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(q);var K=_.behavior.drag().on("dragstart",function(){_.event.sourceEvent.preventDefault(),_.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));C&&this.hbar.on(".drag",null).call(K),D&&this.vbar.on(".drag",null).call(K)}this.setTranslate(n,t)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(m.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var d=this.translateX,n=this.translateY;this.hbar&&(d-=_.event.dx),this.vbar&&(n-=_.event.dy),this.setTranslate(d,n)},e.prototype._onBoxWheel=function(){var d=this.translateX,n=this.translateY;this.hbar&&(d+=_.event.deltaY),this.vbar&&(n+=_.event.deltaY),this.setTranslate(d,n)},e.prototype._onBarDrag=function(){var d=this.translateX,n=this.translateY;if(this.hbar){var t=d+this._hbarXMin,i=t+this._hbarTranslateMax;d=(E.constrain(_.event.x,t,i)-t)/(i-t)*(this.position.w-this._box.w)}if(this.vbar){var s=n+this._vbarYMin,b=s+this._vbarTranslateMax;n=(E.constrain(_.event.y,s,b)-s)/(b-s)*(this.position.h-this._box.h)}this.setTranslate(d,n)},e.prototype.setTranslate=function(d,n){var t=this.position.w-this._box.w,i=this.position.h-this._box.h;d=E.constrain(d||0,0,t),n=E.constrain(n||0,0,i),this.translateX=d,this.translateY=n,this.container.call(m.setTranslate,this._box.l-this.position.l-d,this._box.t-this.position.t-n),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+d-.5),y:Math.floor(this.position.t+n-.5)}),this.hbar&&this.hbar.call(m.setTranslate,d+d/t*this._hbarTranslateMax,n),this.vbar&&this.vbar.call(m.setTranslate,d,n+n/i*this._vbarTranslateMax)}},{"../../lib":503,"../color":366,"../drawing":388,"@plotly/d3":58}],471:[function(v,ie,ae){"use strict";ie.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],472:[function(v,ie,ae){"use strict";ie.exports={axisRefDescription:function(_,k,m){return["If set to a",_,"axis id (e.g. *"+_+"* or","*"+_+"2*), the `"+_+"` position refers to a",_,"coordinate. If set to *paper*, the `"+_+"`","position refers to the distance from the",k,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",k,"("+m+"). If set to a",_,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",k,"of the domain of that axis: e.g.,","*"+_+"2 domain* refers to the domain of the second",_," axis and a",_,"position of 0.5 refers to the","point between the",k,"and the",m,"of the domain of the","second",_,"axis."].join(" ")}}},{}],473:[function(v,ie,ae){"use strict";ie.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},{}],474:[function(v,ie,ae){"use strict";ie.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],475:[function(v,ie,ae){"use strict";ie.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],476:[function(v,ie,ae){"use strict";ie.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],477:[function(v,ie,ae){"use strict";ie.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},{}],478:[function(v,ie,ae){"use strict";ie.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],479:[function(v,ie,ae){"use strict";ie.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],480:[function(v,ie,ae){"use strict";ae.xmlns="http://www.w3.org/2000/xmlns/",ae.svg="http://www.w3.org/2000/svg",ae.xlink="http://www.w3.org/1999/xlink",ae.svgAttrs={xmlns:ae.svg,"xmlns:xlink":ae.xlink}},{}],481:[function(v,ie,ae){"use strict";ae.version=v("./version").version,v("native-promise-only"),v("../build/plotcss");for(var _=v("./registry"),k=ae.register=_.register,m=v("./plot_api"),E=Object.keys(m),e=0;e<E.length;e++){var c=E[e];"_"!==c.charAt(0)&&(ae[c]=m[c]),k({moduleType:"apiMethod",name:c,fn:m[c]})}k(v("./traces/scatter")),k([v("./components/legend"),v("./components/fx"),v("./components/annotations"),v("./components/annotations3d"),v("./components/shapes"),v("./components/images"),v("./components/updatemenus"),v("./components/sliders"),v("./components/rangeslider"),v("./components/rangeselector"),v("./components/grid"),v("./components/errorbars"),v("./components/colorscale"),v("./components/colorbar"),v("./components/modebar")]),k([v("./locale-en"),v("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(k(window.PlotlyLocales),delete window.PlotlyLocales),ae.Icons=v("./fonts/ploticon");var d=v("./components/fx"),n=v("./plots/plots");ae.Plots={resize:n.resize,graphJson:n.graphJson,sendDataToCloud:n.sendDataToCloud},ae.Fx={hover:d.hover,unhover:d.unhover,loneHover:d.loneHover,loneUnhover:d.loneUnhover},ae.Snapshot=v("./snapshot"),ae.PlotSchema=v("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":357,"./components/annotations3d":362,"./components/colorbar":372,"./components/colorscale":378,"./components/errorbars":394,"./components/fx":406,"./components/grid":410,"./components/images":415,"./components/legend":423,"./components/modebar":429,"./components/rangeselector":437,"./components/rangeslider":444,"./components/shapes":458,"./components/sliders":463,"./components/updatemenus":469,"./fonts/ploticon":482,"./locale-en":534,"./locale-en-us":533,"./plot_api":538,"./plot_api/plot_schema":542,"./plots/plots":619,"./registry":638,"./snapshot":643,"./traces/scatter":939,"./version":1123,"native-promise-only":245}],482:[function(v,ie,ae){"use strict";ie.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],483:[function(v,ie,ae){"use strict";ae.isLeftAnchor=function(k){return"left"===k.xanchor||"auto"===k.xanchor&&k.x<=1/3},ae.isCenterAnchor=function(k){return"center"===k.xanchor||"auto"===k.xanchor&&k.x>1/3&&k.x<2/3},ae.isRightAnchor=function(k){return"right"===k.xanchor||"auto"===k.xanchor&&k.x>=2/3},ae.isTopAnchor=function(k){return"top"===k.yanchor||"auto"===k.yanchor&&k.y>=2/3},ae.isMiddleAnchor=function(k){return"middle"===k.yanchor||"auto"===k.yanchor&&k.y>1/3&&k.y<2/3},ae.isBottomAnchor=function(k){return"bottom"===k.yanchor||"auto"===k.yanchor&&k.y<=1/3}},{}],484:[function(v,ie,ae){"use strict";var _=v("./mod"),k=_.mod,m=_.modHalf,E=Math.PI,e=2*E;function n(S){return Math.abs(S[1]-S[0])>e-1e-14}function t(S,p){return m(p-S,e)}function a(S,p){if(n(p))return!0;var w,l;p[0]<p[1]?(w=p[0],l=p[1]):(w=p[1],l=p[0]),(w=k(w,e))>(l=k(l,e))&&(l+=e);var y=k(S,e),A=y+e;return y>=w&&y<=l||A>=w&&A<=l}function g(S,p,w,l,y,A,T){y=y||0,A=A||0;var f,u,h,o,C,M=n([w,l]);function R(F,D){return[F*Math.cos(D)+y,A-F*Math.sin(D)]}M?(f=0,u=E,h=e):w<l?(f=w,h=l):(f=l,h=w),S<p?(o=S,C=p):(o=p,C=S);var I,z=Math.abs(h-f)<=E?0:1;function O(F,D,N){return"A"+[F,F]+" "+[0,z,N]+" "+R(F,D)}return M?I=null===o?"M"+R(C,f)+O(C,u,0)+O(C,h,0)+"Z":"M"+R(o,f)+O(o,u,0)+O(o,h,0)+"ZM"+R(C,f)+O(C,u,1)+O(C,h,1)+"Z":null===o?(I="M"+R(C,f)+O(C,h,0),T&&(I+="L0,0Z")):I="M"+R(o,f)+"L"+R(C,f)+O(C,h,0)+"L"+R(o,h)+O(o,f,1)+"Z",I}ie.exports={deg2rad:function c(S){return S/180*E},rad2deg:function d(S){return S/E*180},angleDelta:t,angleDist:function i(S,p){return Math.abs(t(S,p))},isFullCircle:n,isAngleInsideSector:a,isPtInsideSector:function r(S,p,w,l){return!!a(p,l)&&(w[0]<w[1]?(y=w[0],A=w[1]):(y=w[1],A=w[0]),S>=y&&S<=A);var y,A},pathArc:function s(S,p,w,l,y){return g(null,S,p,w,l,y,0)},pathSector:function b(S,p,w,l,y){return g(null,S,p,w,l,y,1)},pathAnnulus:function x(S,p,w,l,y,A){return g(S,p,w,l,y,A,1)}}},{"./mod":510}],485:[function(v,ie,ae){"use strict";var _=Array.isArray,k=ArrayBuffer,m=DataView;function E(n){return k.isView(n)&&!(n instanceof m)}function e(n){return _(n)||E(n)}function d(n,t,i){if(e(n)){if(e(n[0])){for(var a=i,r=0;r<n.length;r++)a=t(a,n[r].length);return a}return n.length}return 0}ae.isTypedArray=E,ae.isArrayOrTypedArray=e,ae.isArray1D=function c(n){return!e(n[0])},ae.ensureArray=function(n,t){return _(n)||(n=[]),n.length=t,n},ae.concat=function(){var a,r,g,s,b,x,S,p,n=[],t=!0,i=0;for(g=0;g<arguments.length;g++)(x=(s=arguments[g]).length)&&(r?n.push(s):(r=s,b=x),_(s)?a=!1:(t=!1,i?a!==s.constructor&&(a=!1):a=s.constructor),i+=x);if(!i)return[];if(!n.length)return r;if(t)return r.concat.apply(r,n);if(a){for((S=new a(i)).set(r),g=0;g<n.length;g++)S.set(s=n[g],b),b+=s.length;return S}for(S=new Array(i),p=0;p<r.length;p++)S[p]=r[p];for(g=0;g<n.length;g++){for(s=n[g],p=0;p<s.length;p++)S[b+p]=s[p];b+=p}return S},ae.maxRowLength=function(n){return d(n,Math.max,0)},ae.minRowLength=function(n){return d(n,Math.min,1/0)}},{}],486:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../constants/numerical").BADNUM,m=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;ie.exports=function(e){return"string"==typeof e&&(e=e.replace(m,"")),_(e)?Number(e):k}},{"../constants/numerical":479,"fast-isnumeric":190}],487:[function(v,ie,ae){"use strict";ie.exports=function(k){var m=k._fullLayout;m._glcanvas&&m._glcanvas.size()&&m._glcanvas.each(function(E){E.regl&&E.regl.clear({color:!0,depth:!0})})}},{}],488:[function(v,ie,ae){"use strict";ie.exports=function(k){k._responsiveChartHandler&&(window.removeEventListener("resize",k._responsiveChartHandler),delete k._responsiveChartHandler)}},{}],489:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("tinycolor2"),m=v("../plots/attributes"),E=v("../components/colorscale/scales"),e=v("../components/color"),c=v("../constants/interactions").DESELECTDIM,d=v("./nested_property"),n=v("./regex").counter,t=v("./mod").modHalf,i=v("./array").isArrayOrTypedArray;function a(r,g){var s=ae.valObjectMeta[g.valType];if(g.arrayOk&&i(r))return!0;if(s.validateFunction)return s.validateFunction(r,g);var b={},x=b;return s.coerceFunction(r,{set:function(p){x=p}},b,g),x!==b}ae.valObjectMeta={data_array:{coerceFunction:function(r,g,s){i(r)?g.set(r):void 0!==s&&g.set(s)}},enumerated:{coerceFunction:function(r,g,s,b){b.coerceNumber&&(r=+r),-1===b.values.indexOf(r)?g.set(s):g.set(r)},validateFunction:function(r,g){g.coerceNumber&&(r=+r);for(var s=g.values,b=0;b<s.length;b++){var x=String(s[b]);if("/"===x.charAt(0)&&"/"===x.charAt(x.length-1)){if(new RegExp(x.substr(1,x.length-2)).test(r))return!0}else if(r===s[b])return!0}return!1}},boolean:{coerceFunction:function(r,g,s){g.set(!0===r||!1===r?r:s)}},number:{coerceFunction:function(r,g,s,b){!_(r)||void 0!==b.min&&r<b.min||void 0!==b.max&&r>b.max?g.set(s):g.set(+r)}},integer:{coerceFunction:function(r,g,s,b){r%1||!_(r)||void 0!==b.min&&r<b.min||void 0!==b.max&&r>b.max?g.set(s):g.set(+r)}},string:{coerceFunction:function(r,g,s,b){g.set("string"!=typeof r?!0!==b.strict&&"number"==typeof r?String(r):s:b.noBlank&&!r?s:r)}},color:{coerceFunction:function(r,g,s){k(r).isValid()?g.set(r):g.set(s)}},colorlist:{coerceFunction:function(r,g,s){Array.isArray(r)&&r.length&&r.every(function b(x){return k(x).isValid()})?g.set(r):g.set(s)}},colorscale:{coerceFunction:function(r,g,s){g.set(E.get(r,s))}},angle:{coerceFunction:function(r,g,s){"auto"===r?g.set("auto"):_(r)?g.set(t(+r,360)):g.set(s)}},subplotid:{coerceFunction:function(r,g,s,b){var x=b.regex||n(s);"string"==typeof r&&x.test(r)?g.set(r):g.set(s)},validateFunction:function(r,g){var s=g.dflt;return r===s||"string"==typeof r&&!!n(s).test(r)}},flaglist:{coerceFunction:function(r,g,s,b){if("string"==typeof r)if(-1===(b.extras||[]).indexOf(r)){for(var x=r.split("+"),S=0;S<x.length;){var p=x[S];-1===b.flags.indexOf(p)||x.indexOf(p)<S?x.splice(S,1):S++}g.set(x.length?x.join("+"):s)}else g.set(r);else g.set(s)}},any:{coerceFunction:function(r,g,s){g.set(void 0===r?s:r)}},info_array:{coerceFunction:function(r,g,s,b){function x(R,z,O){var I;return void 0===O&&(O=z.dflt),ae.valObjectMeta[z.valType].coerceFunction(R,{set:function(D){I=D}},O,z),I}var S=2===b.dimensions||"1-2"===b.dimensions&&Array.isArray(r)&&Array.isArray(r[0]);if(Array.isArray(r)){var M,f,u,o,C,p=b.items,w=[],l=Array.isArray(p),y=l&&S&&Array.isArray(p[0]),A=S&&l&&!y,T=l&&!A?p.length:r.length;if(s=Array.isArray(s)?s:[],S)for(M=0;M<T;M++)for(w[M]=[],u=Array.isArray(r[M])?r[M]:[],o=A?p.length:l?p[M].length:u.length,f=0;f<o;f++)void 0!==(C=x(u[f],A?p[f]:l?p[M][f]:p,(s[M]||[])[f]))&&(w[M][f]=C);else for(M=0;M<T;M++)void 0!==(C=x(r[M],l?p[M]:p,s[M]))&&(w[M]=C);g.set(w)}else g.set(s)},validateFunction:function(r,g){if(!Array.isArray(r))return!1;var s=g.items,b=Array.isArray(s),x=2===g.dimensions;if(!g.freeLength&&r.length!==s.length)return!1;for(var S=0;S<r.length;S++)if(x){if(!Array.isArray(r[S])||!g.freeLength&&r[S].length!==s[S].length)return!1;for(var p=0;p<r[S].length;p++)if(!a(r[S][p],b?s[S][p]:s))return!1}else if(!a(r[S],b?s[S]:s))return!1;return!0}}},ae.coerce=function(r,g,s,b,x){var S=d(s,b).get(),p=d(r,b),w=d(g,b),l=p.get(),y=g._template;if(void 0===l&&y&&(l=d(y,b).get(),y=0),void 0===x&&(x=S.dflt),S.arrayOk&&i(l))return w.set(l),l;var A=ae.valObjectMeta[S.valType].coerceFunction;A(l,w,x,S);var T=w.get();return y&&T===x&&!a(l,S)&&(A(l=d(y,b).get(),w,x,S),T=w.get()),T},ae.coerce2=function(r,g,s,b,x){var S=d(r,b),p=ae.coerce(r,g,s,b,x);return null!=S.get()&&p},ae.coerceFont=function(r,g,s){var b={};return b.family=r(g+".family",(s=s||{}).family),b.size=r(g+".size",s.size),b.color=r(g+".color",s.color),b},ae.coercePattern=function(r,g,s,b){if(r(g+".shape")){r(g+".solidity"),r(g+".size");var p="overlay"===r(g+".fillmode");if(!b){var w=r(g+".bgcolor",p?s:void 0);r(g+".fgcolor",p?e.contrast(w):s)}r(g+".fgopacity",p?.5:1)}},ae.coerceHoverinfo=function(r,g,s){var p,b=g._module.attributes,x=b.hoverinfo?b:m,S=x.hoverinfo;if(1===s._dataLength){var w="all"===S.dflt?S.flags.slice():S.dflt.split("+");w.splice(w.indexOf("name"),1),p=w.join("+")}return ae.coerce(r,g,x,"hoverinfo",p)},ae.coerceSelectionMarkerOpacity=function(r,g){if(r.marker){var b,x,s=r.marker.opacity;void 0!==s&&(!i(s)&&!r.selected&&!r.unselected&&(b=s,x=c*s),g("selected.marker.opacity",b),g("unselected.marker.opacity",x))}},ae.validate=a},{"../components/color":366,"../components/colorscale/scales":381,"../constants/interactions":478,"../plots/attributes":550,"./array":485,"./mod":510,"./nested_property":511,"./regex":520,"fast-isnumeric":190,tinycolor2:312}],490:[function(v,ie,ae){"use strict";var w,l,_=v("d3-time-format").timeFormat,k=v("fast-isnumeric"),m=v("./loggers"),E=v("./mod").mod,e=v("../constants/numerical"),c=e.BADNUM,d=e.ONEDAY,n=e.ONEHOUR,t=e.ONEMIN,i=e.ONESEC,a=e.EPOCHJD,r=v("../registry"),g=v("d3-time-format").utcFormat,s=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,b=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,x=(new Date).getFullYear()-70;function S(I){return I&&r.componentsRegistry.calendars&&"string"==typeof I&&"gregorian"!==I}function y(I,F){return String(I+Math.pow(10,F)).substr(1)}ae.dateTick0=function(I,F){var D=function p(I,F){return S(I)?F?r.getComponentMethod("calendars","CANONICAL_SUNDAY")[I]:r.getComponentMethod("calendars","CANONICAL_TICK")[I]:F?"2000-01-02":"2000-01-01"}(I,!!F);if(F<2)return D;var N=ae.dateTime2ms(D,I);return ae.ms2DateTime(N+=d*(F-1),0,I)},ae.dfltRange=function(I){return S(I)?r.getComponentMethod("calendars","DFLTRANGE")[I]:["2000-01-01","2001-01-01"]},ae.isJSDate=function(I){return"object"==typeof I&&null!==I&&"function"==typeof I.getTime},ae.dateTime2ms=function(I,F){if(ae.isJSDate(I)){var D=I.getTimezoneOffset()*t,N=(I.getUTCMinutes()-I.getMinutes())*t+(I.getUTCSeconds()-I.getSeconds())*i+(I.getUTCMilliseconds()-I.getMilliseconds());if(N){var U=3*t;D=D-U/2+E(N-D+U/2,U)}return(I=Number(I)-D)>=w&&I<=l?I:c}if("string"!=typeof I&&"number"!=typeof I)return c;I=String(I);var X=S(F),oe=I.charAt(0);X&&("G"===oe||"g"===oe)&&(I=I.substr(1),F="");var se=X&&"chinese"===F.substr(0,7),ne=I.match(se?b:s);if(!ne)return c;var W=ne[1],G=ne[3]||"1",$=Number(ne[5]||1),V=Number(ne[7]||0),H=Number(ne[9]||0),q=Number(ne[11]||0);if(X){if(2===W.length)return c;var K;W=Number(W);try{var Y=r.getComponentMethod("calendars","getCal")(F);if(se){var te="i"===G.charAt(G.length-1);G=parseInt(G,10),K=Y.newDate(W,Y.toMonthIndex(W,G,te),$)}else K=Y.newDate(W,Number(G),$)}catch(j){return c}return K?(K.toJD()-a)*d+V*n+H*t+q*i:c}W=2===W.length?(Number(W)+2e3-x)%100+x:Number(W),G-=1;var J=new Date(Date.UTC(2e3,G,$,V,H));return J.setUTCFullYear(W),J.getUTCMonth()!==G||J.getUTCDate()!==$?c:J.getTime()+q*i},w=ae.MIN_MS=ae.dateTime2ms("-9999"),l=ae.MAX_MS=ae.dateTime2ms("9999-12-31 23:59:59.9999"),ae.isDateTime=function(I,F){return ae.dateTime2ms(I,F)!==c};var A=90*d,T=3*n,M=5*t;function f(I,F,D,N,U){if((F||D||N||U)&&(I+=" "+y(F,2)+":"+y(D,2),(N||U)&&(I+=":"+y(N,2),U))){for(var X=4;U%10==0;)X-=1,U/=10;I+="."+y(U,X)}return I}ae.ms2DateTime=function(I,F,D){if("number"!=typeof I||!(I>=w&&I<=l))return c;F||(F=0);var X,oe,se,ne,W,G,N=Math.floor(10*E(I+.05,1)),U=Math.round(I-N/10);if(S(D)){var $=Math.floor(U/d)+a,V=Math.floor(E(I,d));try{X=r.getComponentMethod("calendars","getCal")(D).fromJD($).formatDate("yyyy-mm-dd")}catch(H){X=g("G%Y-%m-%d")(new Date(U))}if("-"===X.charAt(0))for(;X.length<11;)X="-0"+X.substr(1);else for(;X.length<10;)X="0"+X;oe=F<A?Math.floor(V/n):0,se=F<A?Math.floor(V%n/t):0,ne=F<T?Math.floor(V%t/i):0,W=F<M?V%i*10+N:0}else G=new Date(U),X=g("%Y-%m-%d")(G),oe=F<A?G.getUTCHours():0,se=F<A?G.getUTCMinutes():0,ne=F<T?G.getUTCSeconds():0,W=F<M?10*G.getUTCMilliseconds()+N:0;return f(X,oe,se,ne,W)},ae.ms2DateTimeLocal=function(I){if(!(I>=w+d&&I<=l-d))return c;var F=Math.floor(10*E(I+.05,1)),D=new Date(Math.round(I-F/10));return f(_("%Y-%m-%d")(D),D.getHours(),D.getMinutes(),D.getSeconds(),10*D.getUTCMilliseconds()+F)},ae.cleanDate=function(I,F,D){if(I===c)return F;if(ae.isJSDate(I)||"number"==typeof I&&isFinite(I)){if(S(D))return m.error("JS Dates and milliseconds are incompatible with world calendars",I),F;if(!(I=ae.ms2DateTimeLocal(+I))&&void 0!==F)return F}else if(!ae.isDateTime(I,D))return m.error("unrecognized date",I),F;return I};var u=/%\d?f/g,h=/%h/g,o={1:"1",2:"1",3:"2",4:"2"};function C(I,F,D,N){I=I.replace(u,function(X){var oe=Math.min(+X.charAt(1)||6,6);return(F/1e3%1+2).toFixed(oe).substr(2).replace(/0+$/,"")||"0"});var U=new Date(Math.floor(F+.05));if(I=I.replace(h,function(){return o[D("%q")(U)]}),S(N))try{I=r.getComponentMethod("calendars","worldCalFmt")(I,F,N)}catch(X){return"Invalid"}return D(I)(U)}var R=[59,59.9,59.99,59.999,59.9999];ae.formatDate=function(I,F,D,N,U,X){if(U=S(U)&&U,!F)if("y"===D)F=X.year;else if("m"===D)F=X.month;else{if("d"!==D)return function z(I,F){var D=E(I+.05,d),N=y(Math.floor(D/n),2)+":"+y(E(Math.floor(D/t),60),2);if("M"!==F){k(F)||(F=0);var X=(100+Math.min(E(I/i,60),R[F])).toFixed(F).substr(1);F>0&&(X=X.replace(/0+$/,"").replace(/[\.]$/,"")),N+=":"+X}return N}(I,D)+"\n"+C(X.dayMonthYear,I,N,U);F=X.dayMonth+"\n"+X.year}return C(F,I,N,U)};var O=3*d;ae.incrementMonth=function(I,F,D){D=S(D)&&D;var N=E(I,d);if(I=Math.round(I-N),D)try{var U=Math.round(I/d)+a,X=r.getComponentMethod("calendars","getCal")(D),oe=X.fromJD(U);return F%12?X.add(oe,F,"m"):X.add(oe,F/12,"y"),(oe.toJD()-a)*d+N}catch(ne){m.error("invalid ms "+I+" in calendar "+D)}var se=new Date(I+O);return se.setUTCMonth(se.getUTCMonth()+F)+N-O},ae.findExactDates=function(I,F){for(var oe,se,D=0,N=0,U=0,X=0,ne=S(F)&&r.getComponentMethod("calendars","getCal")(F),W=0;W<I.length;W++)if(k(se=I[W])){if(!(se%d))if(ne)try{1===(oe=ne.fromJD(se/d+a)).day()?1===oe.month()?D++:N++:U++}catch($){}else 1===(oe=new Date(se)).getUTCDate()?0===oe.getUTCMonth()?D++:N++:U++}else X++;var G=I.length-X;return{exactYears:D/G,exactMonths:(N+=D)/G,exactDays:(U+=N)/G}}},{"../constants/numerical":479,"../registry":638,"./loggers":507,"./mod":510,"d3-time-format":120,"fast-isnumeric":190}],491:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("./loggers"),m=v("./matrix"),E=v("gl-mat4");function d(x){var S=x&&x.parentNode;S&&S.removeChild(x)}function t(x,S,p){var w="plotly.js-style-"+x,l=document.getElementById(w);l||((l=document.createElement("style")).setAttribute("id",w),l.appendChild(document.createTextNode("")),document.head.appendChild(l));var y=l.sheet;y.insertRule?y.insertRule(S+"{"+p+"}",0):y.addRule?y.addRule(S,p,0):k.warn("addStyleRule failed")}function r(x){var S=window.getComputedStyle(x,null),p=S.getPropertyValue("-webkit-transform")||S.getPropertyValue("-moz-transform")||S.getPropertyValue("-ms-transform")||S.getPropertyValue("-o-transform")||S.getPropertyValue("transform");return"none"===p?null:p.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(w){return+w})}function g(x){for(var S=[];s(x);)S.push(x),x=x.parentNode;return S}function s(x){return x&&(x instanceof Element||x instanceof HTMLElement)}ie.exports={getGraphDiv:function e(x){var S;if("string"==typeof x){if(null===(S=document.getElementById(x)))throw new Error("No DOM element with id '"+x+"' exists on the page.");return S}if(null==x)throw new Error("DOM element provided is null or undefined");return x},isPlotDiv:function c(x){var S=_.select(x);return S.node()instanceof HTMLElement&&S.size()&&S.classed("js-plotly-plot")},removeElement:d,addStyleRule:function n(x,S){t("global",x,S)},addRelatedStyleRule:t,deleteRelatedStyleRule:function i(x){var p=document.getElementById("plotly.js-style-"+x);p&&d(p)},getFullTransformMatrix:function a(x){var S=g(x),p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return S.forEach(function(w){var l=r(w);if(l){var y=m.convertCssMatrix(l);p=E.multiply(p,p,y)}}),p},getElementTransformMatrix:r,getElementAndAncestors:g,equalDomRects:function b(x,S){return x&&S&&x.x===S.x&&x.y===S.y&&x.top===S.top&&x.left===S.left&&x.right===S.right&&x.bottom===S.bottom}}},{"./loggers":507,"./matrix":509,"@plotly/d3":58,"gl-mat4":210}],492:[function(v,ie,ae){"use strict";var _=v("events").EventEmitter;ie.exports={init:function(m){if(m._ev instanceof _)return m;var E=new _,e=new _;return m._ev=E,m._internalEv=e,m.on=E.on.bind(E),m.once=E.once.bind(E),m.removeListener=E.removeListener.bind(E),m.removeAllListeners=E.removeAllListeners.bind(E),m._internalOn=e.on.bind(e),m._internalOnce=e.once.bind(e),m._removeInternalListener=e.removeListener.bind(e),m._removeAllInternalListeners=e.removeAllListeners.bind(e),m.emit=function(c,d){"undefined"!=typeof jQuery&&jQuery(m).trigger(c,d),E.emit(c,d),e.emit(c,d)},m},triggerHandler:function(m,E,e){var c,d;"undefined"!=typeof jQuery&&(c=jQuery(m).triggerHandler(E,e));var n=m._ev;if(!n)return c;var a,t=n._events[E];if(!t)return c;function i(r){return r.listener?(n.removeListener(E,r.listener),r.fired?void 0:(r.fired=!0,r.listener.apply(n,[e]))):r.apply(n,[e])}for(t=Array.isArray(t)?t:[t],a=0;a<t.length-1;a++)i(t[a]);return d=i(t[a]),void 0!==c?c:d},purge:function(m){return delete m._ev,delete m.on,delete m.once,delete m.removeListener,delete m.removeAllListeners,delete m.emit,delete m._ev,delete m._internalEv,delete m._internalOn,delete m._internalOnce,delete m._removeInternalListener,delete m._removeAllInternalListeners,m}}},{events:84}],493:[function(v,ie,ae){"use strict";var _=v("./is_plain_object.js"),k=Array.isArray;function E(e,c,d,n){var a,r,g,s,b,x,t=e[0],i=e.length;if(2===i&&k(t)&&k(e[1])&&0===t.length){if(function m(e,c){var d,n;for(d=0;d<e.length;d++){if(null!==(n=e[d])&&"object"==typeof n)return!1;void 0!==n&&(c[d]=n)}return!0}(e[1],t))return t;t.splice(0,t.length)}for(var p=1;p<i;p++)for(r in a=e[p])g=t[r],s=a[r],n&&k(s)?t[r]=s:c&&s&&(_(s)||(b=k(s)))?(b?(b=!1,x=g&&k(g)?g:[]):x=g&&_(g)?g:{},t[r]=E([x,s],c,d,n)):(void 0!==s||d)&&(t[r]=s);return t}ae.extendFlat=function(){return E(arguments,!1,!1,!1)},ae.extendDeep=function(){return E(arguments,!0,!1,!1)},ae.extendDeepAll=function(){return E(arguments,!0,!0,!1)},ae.extendDeepNoArrays=function(){return E(arguments,!0,!1,!0)}},{"./is_plain_object.js":504}],494:[function(v,ie,ae){"use strict";ie.exports=function(k){for(var m={},E=[],e=0,c=0;c<k.length;c++){var d=k[c];1!==m[d]&&(m[d]=1,E[e++]=d)}return E}},{}],495:[function(v,ie,ae){"use strict";function _(E){return!0===E.visible}function k(E){var e=E[0].trace;return!0===e.visible&&0!==e._length}ie.exports=function(e){for(var c=function m(E){return Array.isArray(E)&&Array.isArray(E[0])&&E[0][0]&&E[0][0].trace}(e)?k:_,d=[],n=0;n<e.length;n++){var t=e[n];c(t)&&d.push(t)}return d}},{}],496:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("country-regex"),m=v("@turf/area"),E=v("@turf/centroid"),e=v("@turf/bbox"),c=v("./identity"),d=v("./loggers"),n=v("./is_plain_object"),t=v("./nested_property"),i=v("./polygon"),a=Object.keys(k),r={"ISO-3":c,"USA-states":c,"country names":function g(y){for(var A=0;A<a.length;A++){var T=a[A];if(new RegExp(k[T]).test(y.trim().toLowerCase()))return T}return d.log("Unrecognized country name: "+y+"."),!1}};function x(y){var A=y.geojson,T=window.PlotlyGeoAssets||{},M="string"==typeof A?T[A]:A;return n(M)?M:(d.error("Oops ... something went wrong when fetching "+A),!1)}ie.exports={locationToFeature:function s(y,A,T){if(!A||"string"!=typeof A)return!1;var f,u,h,M=r[y](A);if(M){if("USA-states"===y)for(f=[],h=0;h<T.length;h++)(u=T[h]).properties&&u.properties.gu&&"USA"===u.properties.gu&&f.push(u);else f=T;for(h=0;h<f.length;h++)if((u=f[h]).id===M)return u;d.log(["Location with id",M,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function b(y){var u,h,o,C,A=y.geometry,T=A.coordinates,M=y.id,f=[];function R(z){for(var O=0;O<z.length-1;O++)if(z[O][0]>0&&z[O+1][0]<0)return O;return null}switch(u="RUS"===M||"FJI"===M?function(z){var O;if(null===R(z))O=z;else for(O=new Array(z.length),C=0;C<z.length;C++)O[C]=[z[C][0]<0?z[C][0]+360:z[C][0],z[C][1]];f.push(i.tester(O))}:"ATA"===M?function(z){var O=R(z);if(null===O)return f.push(i.tester(z));var I=new Array(z.length+1),F=0;for(C=0;C<z.length;C++)C>O?I[F++]=[z[C][0]+360,z[C][1]]:C===O?(I[F++]=z[C],I[F++]=[z[C][0],-90]):I[F++]=z[C];var D=i.tester(I);D.pts.pop(),f.push(D)}:function(z){f.push(i.tester(z))},A.type){case"MultiPolygon":for(h=0;h<T.length;h++)for(o=0;o<T[h].length;o++)u(T[h][o]);break;case"Polygon":for(h=0;h<T.length;h++)u(T[h])}return f},getTraceGeojson:x,extractTraceFeature:function S(y){var A=y[0].trace,T=x(A);if(!T)return!1;var u,M={},f=[];for(u=0;u<A._length;u++){var h=y[u];(h.loc||0===h.loc)&&(M[h.loc]=h)}function o(z){var O=t(z,A.featureidkey||"id").get(),I=M[O];if(I){var F=z.geometry;if("Polygon"===F.type||"MultiPolygon"===F.type){var D={type:"Feature",id:O,geometry:F,properties:{}};D.properties.ct=function p(y){var T,A=y.geometry;if("MultiPolygon"===A.type)for(var M=A.coordinates,f=0,u=0;u<M.length;u++){var h={type:"Polygon",coordinates:M[u]},o=m.default(h);o>f&&(f=o,T=h)}else T=A;return E.default(T).geometry.coordinates}(D),I.fIn=z,I.fOut=D,f.push(D)}else d.log(["Location",I.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete M[O]}switch(T.type){case"FeatureCollection":var C=T.features;for(u=0;u<C.length;u++)o(C[u]);break;case"Feature":o(T);break;default:return d.warn(["Invalid GeoJSON type",(T.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var R in M)d.log(["Location *"+R+"*","does not have a matching feature with id-key","*"+A.featureidkey+"*."].join(" "));return f},fetchTraceGeoData:function w(y){var A=window.PlotlyGeoAssets||{},T=[];function M(C){return new Promise(function(R,z){_.json(C,function(O,I){return O?(delete A[C],z(new Error(404===O.status?'GeoJSON at URL "'+C+'" does not exist.':"Unexpected error while fetching from "+C))):(A[C]=I,R(I))})})}function f(C){return new Promise(function(R,z){var O=0,I=setInterval(function(){return A[C]&&"pending"!==A[C]?(clearInterval(I),R(A[C])):O>100?(clearInterval(I),z("Unexpected error while fetching from "+C)):void O++},50)})}for(var u=0;u<y.length;u++){var o=y[u][0].trace.geojson;"string"==typeof o&&(A[o]?"pending"===A[o]&&T.push(f(o)):(A[o]="pending",T.push(M(o))))}return T},computeBbox:function l(y){return e.default(y)}}},{"./identity":501,"./is_plain_object":504,"./loggers":507,"./nested_property":511,"./polygon":515,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],497:[function(v,ie,ae){"use strict";var _=v("../constants/numerical").BADNUM;ae.calcTraceToLineCoords=function(k){for(var E=k[0].trace.connectgaps,e=[],c=[],d=0;d<k.length;d++){var t=k[d].lonlat;t[0]!==_?c.push(t):!E&&c.length>0&&(e.push(c),c=[])}return c.length>0&&e.push(c),e},ae.makeLine=function(k){return 1===k.length?{type:"LineString",coordinates:k[0]}:{type:"MultiLineString",coordinates:k}},ae.makePolygon=function(k){if(1===k.length)return{type:"Polygon",coordinates:k};for(var m=new Array(k.length),E=0;E<k.length;E++)m[E]=[k[E]];return{type:"MultiPolygon",coordinates:m}},ae.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":479}],498:[function(v,ie,ae){"use strict";var E,e,c,_=v("./mod").mod;function k(d,n,t,i,a,r,g,s){var b=t-d,x=a-d,S=g-a,p=i-n,w=r-n,l=s-r,y=b*l-S*p;if(0===y)return null;var A=(x*l-S*w)/y,T=(x*p-b*w)/y;return T<0||T>1||A<0||A>1?null:{x:d+b*A,y:n+p*A}}function m(d,n,t,i,a){var r=i*d+a*n;if(r<0)return i*i+a*a;if(r>t){var g=i-d,s=a-n;return g*g+s*s}var b=i*n-a*d;return b*b/t}ae.segmentsIntersect=k,ae.segmentDistance=function(n,t,i,a,r,g,s,b){if(k(n,t,i,a,r,g,s,b))return 0;var x=i-n,S=a-t,p=s-r,w=b-g,l=x*x+S*S,y=p*p+w*w,A=Math.min(m(x,S,l,r-n,g-t),m(x,S,l,s-n,b-t),m(p,w,y,n-r,t-g),m(p,w,y,i-r,a-g));return Math.sqrt(A)},ae.getTextLocation=function(n,t,i,a){if((n!==e||a!==c)&&(E={},e=n,c=a),E[i])return E[i];var r=n.getPointAtLength(_(i-a/2,t)),g=n.getPointAtLength(_(i+a/2,t)),s=Math.atan((g.y-r.y)/(g.x-r.x)),b=n.getPointAtLength(_(i,t)),p={x:(4*b.x+r.x+g.x)/6,y:(4*b.y+r.y+g.y)/6,theta:s};return E[i]=p,p},ae.clearLocationCache=function(){e=null},ae.getVisibleSegment=function(n,t,i){var p,w,a=t.left,r=t.right,g=t.top,s=t.bottom,b=0,x=n.getTotalLength(),S=x;function l(A){var T=n.getPointAtLength(A);0===A?p=T:A===x&&(w=T);var M=T.x<a?a-T.x:T.x>r?T.x-r:0,f=T.y<g?g-T.y:T.y>s?T.y-s:0;return Math.sqrt(M*M+f*f)}for(var y=l(b);y;){if((b+=y+i)>S)return;y=l(b)}for(y=l(S);y;){if(b>(S-=y+i))return;y=l(S)}return{min:b,max:S,len:S-b,total:x,isClosed:0===b&&S===x&&Math.abs(p.x-w.x)<.1&&Math.abs(p.y-w.y)<.1}},ae.findPointOnPath=function(n,t,i,a){for(var w,l,y,r=(a=a||{}).pathLength||n.getTotalLength(),g=a.tolerance||.001,s=a.iterationLimit||30,b=n.getPointAtLength(0)[i]>n.getPointAtLength(r)[i]?-1:1,x=0,S=0,p=r;x<s;){if(y=(l=n.getPointAtLength(w=(S+p)/2))[i]-t,Math.abs(y)<g)return l;b*y>0?p=w:S=w,x++}return l}},{"./mod":510}],499:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("tinycolor2"),m=v("color-normalize"),E=v("../components/colorscale"),e=v("../components/color/attributes").defaultLine,c=v("./array").isArrayOrTypedArray,d=m(e);function t(s,b){var x=s;return x[3]*=b,x}function i(s){if(_(s))return d;var b=m(s);return b.length?b:d}function a(s){return _(s)?s:1}ie.exports={formatColor:function r(s,b,x){var A,T,M,f,u,S=s.color,p=c(S),w=c(b),l=E.extractOpts(s),y=[];if(A=void 0!==l.colorscale?E.makeColorScaleFuncFromTrace(s):i,T=p?function(o,C){return void 0===o[C]?d:m(A(o[C]))}:i,M=w?function(o,C){return void 0===o[C]?1:a(o[C])}:a,p||w)for(var h=0;h<x;h++)f=T(S,h),u=M(b,h),y[h]=t(f,u);else y=t(m(S),b);return y},parseColorScale:function g(s){var b=E.extractOpts(s),x=b.colorscale;return b.reversescale&&(x=E.flipScale(b.colorscale)),x.map(function(S){var p=S[0],l=k(S[1]).toRgb();return{index:p,rgb:[l.r,l.g,l.b,l.a]}})}}},{"../components/color/attributes":365,"../components/colorscale":378,"./array":485,"color-normalize":89,"fast-isnumeric":190,tinycolor2:312}],500:[function(v,ie,ae){"use strict";var _=v("./identity");function k(m){return[m]}ie.exports={keyFun:function(m){return m.key},repeat:k,descend:_,wrap:k,unwrap:function(m){return m[0]}}},{"./identity":501}],501:[function(v,ie,ae){"use strict";ie.exports=function(k){return k}},{}],502:[function(v,ie,ae){"use strict";ie.exports=function(k,m){if(!m)return k;var E=1/Math.abs(m),e=E>1?(E*k+E*m)/E:k+m,c=String(e).length;if(c>16){var d=String(m).length;if(c>=String(k).length+d){var t=parseFloat(e).toPrecision(12);-1===t.indexOf("e+")&&(e=+t)}}return e}},{}],503:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("d3-time-format").utcFormat,m=v("d3-format").format,E=v("fast-isnumeric"),e=v("../constants/numerical"),c=e.FP_SAFE,d=-c,n=e.BADNUM,t=ie.exports={};t.adjustFormat=function(G){return!G||/^\d[.]\df/.test(G)||/[.]\d%/.test(G)?G:"0.f"===G?"~f":/^\d%/.test(G)?"~%":/^\ds/.test(G)?"~s":!/^[~,.0$]/.test(G)&&/[&fps]/.test(G)?"~"+G:G};var i={};t.warnBadFormat=function(W){var G=String(W);i[G]||(i[G]=1,t.warn('encountered bad format: "'+G+'"'))},t.noFormat=function(W){return String(W)},t.numberFormat=function(W){var G;try{G=m(t.adjustFormat(W))}catch($){return t.warnBadFormat(W),t.noFormat}return G},t.nestedProperty=v("./nested_property"),t.keyedContainer=v("./keyed_container"),t.relativeAttr=v("./relative_attr"),t.isPlainObject=v("./is_plain_object"),t.toLogRange=v("./to_log_range"),t.relinkPrivateKeys=v("./relink_private");var a=v("./array");t.isTypedArray=a.isTypedArray,t.isArrayOrTypedArray=a.isArrayOrTypedArray,t.isArray1D=a.isArray1D,t.ensureArray=a.ensureArray,t.concat=a.concat,t.maxRowLength=a.maxRowLength,t.minRowLength=a.minRowLength;var r=v("./mod");t.mod=r.mod,t.modHalf=r.modHalf;var g=v("./coerce");t.valObjectMeta=g.valObjectMeta,t.coerce=g.coerce,t.coerce2=g.coerce2,t.coerceFont=g.coerceFont,t.coercePattern=g.coercePattern,t.coerceHoverinfo=g.coerceHoverinfo,t.coerceSelectionMarkerOpacity=g.coerceSelectionMarkerOpacity,t.validate=g.validate;var s=v("./dates");t.dateTime2ms=s.dateTime2ms,t.isDateTime=s.isDateTime,t.ms2DateTime=s.ms2DateTime,t.ms2DateTimeLocal=s.ms2DateTimeLocal,t.cleanDate=s.cleanDate,t.isJSDate=s.isJSDate,t.formatDate=s.formatDate,t.incrementMonth=s.incrementMonth,t.dateTick0=s.dateTick0,t.dfltRange=s.dfltRange,t.findExactDates=s.findExactDates,t.MIN_MS=s.MIN_MS,t.MAX_MS=s.MAX_MS;var b=v("./search");t.findBin=b.findBin,t.sorterAsc=b.sorterAsc,t.sorterDes=b.sorterDes,t.distinctVals=b.distinctVals,t.roundUp=b.roundUp,t.sort=b.sort,t.findIndexOfMin=b.findIndexOfMin,t.sortObjectKeys=v("./sort_object_keys");var x=v("./stats");t.aggNums=x.aggNums,t.len=x.len,t.mean=x.mean,t.median=x.median,t.midRange=x.midRange,t.variance=x.variance,t.stdev=x.stdev,t.interp=x.interp;var S=v("./matrix");t.init2dArray=S.init2dArray,t.transposeRagged=S.transposeRagged,t.dot=S.dot,t.translationMatrix=S.translationMatrix,t.rotationMatrix=S.rotationMatrix,t.rotationXYMatrix=S.rotationXYMatrix,t.apply3DTransform=S.apply3DTransform,t.apply2DTransform=S.apply2DTransform,t.apply2DTransform2=S.apply2DTransform2,t.convertCssMatrix=S.convertCssMatrix,t.inverseTransformMatrix=S.inverseTransformMatrix;var p=v("./angles");t.deg2rad=p.deg2rad,t.rad2deg=p.rad2deg,t.angleDelta=p.angleDelta,t.angleDist=p.angleDist,t.isFullCircle=p.isFullCircle,t.isAngleInsideSector=p.isAngleInsideSector,t.isPtInsideSector=p.isPtInsideSector,t.pathArc=p.pathArc,t.pathSector=p.pathSector,t.pathAnnulus=p.pathAnnulus;var w=v("./anchor_utils");t.isLeftAnchor=w.isLeftAnchor,t.isCenterAnchor=w.isCenterAnchor,t.isRightAnchor=w.isRightAnchor,t.isTopAnchor=w.isTopAnchor,t.isMiddleAnchor=w.isMiddleAnchor,t.isBottomAnchor=w.isBottomAnchor;var l=v("./geometry2d");t.segmentsIntersect=l.segmentsIntersect,t.segmentDistance=l.segmentDistance,t.getTextLocation=l.getTextLocation,t.clearLocationCache=l.clearLocationCache,t.getVisibleSegment=l.getVisibleSegment,t.findPointOnPath=l.findPointOnPath;var y=v("./extend");t.extendFlat=y.extendFlat,t.extendDeep=y.extendDeep,t.extendDeepAll=y.extendDeepAll,t.extendDeepNoArrays=y.extendDeepNoArrays;var A=v("./loggers");t.log=A.log,t.warn=A.warn,t.error=A.error;var T=v("./regex");t.counterRegex=T.counter;var M=v("./throttle");t.throttle=M.throttle,t.throttleDone=M.done,t.clearThrottle=M.clear;var f=v("./dom");function u(W){var G={};for(var $ in W)for(var V=W[$],H=0;H<V.length;H++)G[V[H]]=+$;return G}t.getGraphDiv=f.getGraphDiv,t.isPlotDiv=f.isPlotDiv,t.removeElement=f.removeElement,t.addStyleRule=f.addStyleRule,t.addRelatedStyleRule=f.addRelatedStyleRule,t.deleteRelatedStyleRule=f.deleteRelatedStyleRule,t.getFullTransformMatrix=f.getFullTransformMatrix,t.getElementTransformMatrix=f.getElementTransformMatrix,t.getElementAndAncestors=f.getElementAndAncestors,t.equalDomRects=f.equalDomRects,t.clearResponsive=v("./clear_responsive"),t.preserveDrawingBuffer=v("./preserve_drawing_buffer"),t.makeTraceGroups=v("./make_trace_groups"),t._=v("./localize"),t.notifier=v("./notifier"),t.filterUnique=v("./filter_unique"),t.filterVisible=v("./filter_visible"),t.pushUnique=v("./push_unique"),t.increment=v("./increment"),t.cleanNumber=v("./clean_number"),t.ensureNumber=function(G){return E(G)?(G=Number(G))>c||G<d?n:G:n},t.isIndex=function(W,G){return!(void 0!==G&&W>=G)&&E(W)&&W>=0&&W%1==0},t.noop=v("./noop"),t.identity=v("./identity"),t.repeat=function(W,G){for(var $=new Array(G),V=0;V<G;V++)$[V]=W;return $},t.swapAttrs=function(W,G,$,V){$||($="x"),V||(V="y");for(var H=0;H<G.length;H++){var q=G[H],K=t.nestedProperty(W,q.replace("?",$)),Y=t.nestedProperty(W,q.replace("?",V)),te=K.get();K.set(Y.get()),Y.set(te)}},t.raiseToTop=function(G){G.parentNode.appendChild(G)},t.cancelTransition=function(W){return W.transition().duration(0)},t.constrain=function(W,G,$){return G>$?Math.max($,Math.min(G,W)):Math.max(G,Math.min($,W))},t.bBoxIntersect=function(W,G,$){return W.left<=G.right+($=$||0)&&G.left<=W.right+$&&W.top<=G.bottom+$&&G.top<=W.bottom+$},t.simpleMap=function(W,G,$,V,H){for(var q=W.length,K=new Array(q),Y=0;Y<q;Y++)K[Y]=G(W[Y],$,V,H);return K},t.randstr=function W(G,$,V,H){if(V||(V=16),void 0===$&&($=24),$<=0)return"0";var Y,te,q=Math.log(Math.pow(2,$))/Math.log(V),K="";for(Y=2;q===1/0;Y*=2)q=Math.log(Math.pow(2,$/Y))/Math.log(V)*Y;var j=q-Math.floor(q);for(Y=0;Y<Math.floor(q);Y++)K=Math.floor(Math.random()*V).toString(V)+K;j&&(te=Math.pow(V,j),K=Math.floor(Math.random()*te).toString(V)+K);var re=parseInt(K,V);return G&&G[K]||re!==1/0&&re>=Math.pow(2,$)?H>10?(t.warn("randstr failed uniqueness"),K):W(G,$,V,(H||0)+1):K},t.OptionControl=function(W,G){W||(W={}),G||(G="opt");var $={optionList:[],_newoption:function(V){V[G]=W,$[V.name]=V,$.optionList.push(V)}};return $["_"+G]=W,$},t.smooth=function(W,G){if((G=Math.round(G)||0)<2)return W;var Y,te,J,j,$=W.length,V=2*$,H=2*G-1,q=new Array(H),K=new Array($);for(Y=0;Y<H;Y++)q[Y]=(1-Math.cos(Math.PI*(Y+1)/G))/(2*G);for(Y=0;Y<$;Y++){for(j=0,te=0;te<H;te++)(J=Y+te+1-G)<-$?J-=V*Math.round(J/V):J>=V&&(J-=V*Math.floor(J/V)),J<0?J=-1-J:J>=$&&(J=V-1-J),j+=W[J]*q[te];K[Y]=j}return K},t.syncOrAsync=function(W,G,$){var V;function q(){return t.syncOrAsync(W,G,$)}for(;W.length;)if((V=(0,W.splice(0,1)[0])(G))&&V.then)return V.then(q);return $&&$(G)},t.stripTrailingSlash=function(W){return"/"===W.substr(-1)?W.substr(0,W.length-1):W},t.noneOrAll=function(W,G,$){if(W){var q,V=!1,H=!0;for(q=0;q<$.length;q++)null!=W[$[q]]?V=!0:H=!1;if(V&&!H)for(q=0;q<$.length;q++)W[$[q]]=G[$[q]]}},t.mergeArray=function(W,G,$,V){var H="function"==typeof V;if(t.isArrayOrTypedArray(W))for(var q=Math.min(W.length,G.length),K=0;K<q;K++){var Y=W[K];G[K][$]=H?V(Y):Y}},t.mergeArrayCastPositive=function(W,G,$){return t.mergeArray(W,G,$,function(V){var H=+V;return isFinite(H)&&H>0?H:0})},t.fillArray=function(W,G,$,V){if(V=V||t.identity,t.isArrayOrTypedArray(W))for(var H=0;H<G.length;H++)G[H][$]=V(W[H])},t.castOption=function(W,G,$,V){V=V||t.identity;var H=t.nestedProperty(W,$).get();return t.isArrayOrTypedArray(H)?Array.isArray(G)&&t.isArrayOrTypedArray(H[G[0]])?V(H[G[0]][G[1]]):V(H[G]):H},t.extractOption=function(W,G,$,V){if($ in W)return W[$];var H=t.nestedProperty(G,V).get();return Array.isArray(H)?void 0:H},t.tagSelected=function(W,G,$){var q,re,V=G.selectedpoints,H=G._indexToPoints;H&&(q=u(H));for(var Y=0;Y<V.length;Y++){var te=V[Y];if(t.isIndex(te)||t.isArrayOrTypedArray(te)&&t.isIndex(te[0])&&t.isIndex(te[1])){var J=q?q[te]:te,j=$?$[J]:J;void 0!==(re=j)&&re<W.length&&(W[j].selected=1)}}},t.selIndices2selPoints=function(W){var G=W.selectedpoints,$=W._indexToPoints;if($){for(var V=u($),H=[],q=0;q<G.length;q++){var K=G[q];if(t.isIndex(K)){var Y=V[K];t.isIndex(Y)&&H.push(Y)}}return H}return G},t.getTargetArray=function(W,G){var $=G.target;if("string"==typeof $&&$){var V=t.nestedProperty(W,$).get();return!!Array.isArray(V)&&V}return!!Array.isArray($)&&$},t.minExtend=function(W,G){var $={};"object"!=typeof G&&(G={});var q,K,Y,H=Object.keys(W);for(q=0;q<H.length;q++)Y=W[K=H[q]],"_"!==K.charAt(0)&&"function"!=typeof Y&&($[K]="module"===K?Y:Array.isArray(Y)?"colorscale"===K?Y.slice():Y.slice(0,3):t.isTypedArray(Y)?Y.subarray(0,3):Y&&"object"==typeof Y?t.minExtend(W[K],G[K]):Y);for(H=Object.keys(G),q=0;q<H.length;q++)("object"!=typeof(Y=G[K=H[q]])||!(K in $)||"object"!=typeof $[K])&&($[K]=Y);return $},t.titleCase=function(W){return W.charAt(0).toUpperCase()+W.substr(1)},t.containsAny=function(W,G){for(var $=0;$<G.length;$++)if(-1!==W.indexOf(G[$]))return!0;return!1},t.isIE=function(){return void 0!==window.navigator.msSaveBlob};var h=/Version\/[\d\.]+.*Safari/;t.isSafari=function(){return h.test(window.navigator.userAgent)};var o=/iPad|iPhone|iPod/;t.isIOS=function(){return o.test(window.navigator.userAgent)};var C=/Firefox\/(\d+)\.\d+/;t.getFirefoxVersion=function(){var W=C.exec(window.navigator.userAgent);if(W&&2===W.length){var G=parseInt(W[1]);if(!isNaN(G))return G}return null},t.isD3Selection=function(W){return W instanceof _.selection},t.ensureSingle=function(W,G,$,V){var H=W.select(G+($?"."+$:""));if(H.size())return H;var q=W.append(G);return $&&q.classed($,!0),V&&q.call(V),q},t.ensureSingleById=function(W,G,$,V){var H=W.select(G+"#"+$);if(H.size())return H;var q=W.append(G).attr("id",$);return V&&q.call(V),q},t.objectFromPath=function(W,G){for(var V,$=W.split("."),H=V={},q=0;q<$.length;q++){var K=$[q],Y=null,te=$[q].match(/(.*)\[([0-9]+)\]/);te?(Y=te[2],(V=V[K=te[1]]=[])[Y]=q===$.length-1?G:{},V=V[Y]):(V[K]=q===$.length-1?G:{},V=V[K])}return H};var R=/^([^\[\.]+)\.(.+)?/,z=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;t.expandObjectPaths=function(W){var G,$,V,H,q,K,Y;if("object"==typeof W&&!Array.isArray(W))for($ in W)W.hasOwnProperty($)&&((G=$.match(R))?(H=W[$],V=G[1],delete W[$],W[V]=t.extendDeepNoArrays(W[V]||{},t.objectFromPath($,t.expandObjectPaths(H))[V])):(G=$.match(z))?(H=W[$],V=G[1],q=parseInt(G[2]),delete W[$],W[V]=W[V]||[],"."===G[3]?(Y=G[4],K=W[V][q]=W[V][q]||{},t.extendDeepNoArrays(K,t.objectFromPath(Y,t.expandObjectPaths(H)))):W[V][q]=t.expandObjectPaths(H)):W[$]=t.expandObjectPaths(W[$]));return W},t.numSeparate=function(W,G,$){if($||($=!1),"string"!=typeof G||0===G.length)throw new Error("Separator string required for formatting!");"number"==typeof W&&(W=String(W));var V=/(\d+)(\d{3})/,H=G.charAt(0),q=G.charAt(1),K=W.split("."),Y=K[0],te=K.length>1?H+K[1]:"";if(q&&(K.length>1||Y.length>4||$))for(;V.test(Y);)Y=Y.replace(V,"$1"+q+"$2");return Y+te},t.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var O=/^\w*$/;t.templateString=function(W,G){var $={};return W.replace(t.TEMPLATE_STRING_REGEX,function(V,H){var q;return O.test(H)?q=G[H]:($[H]=$[H]||t.nestedProperty(G,H).get,q=$[H]()),t.isValidTextValue(q)?q:""})};var I={max:10,count:0,name:"hovertemplate"};t.hovertemplateString=function(){return N.apply(I,arguments)};var F={max:10,count:0,name:"texttemplate"};t.texttemplateString=function(){return N.apply(F,arguments)};var D=/^[:|\|]/;function N(W,G,$){var V=this,H=arguments;G||(G={});var q={};return W.replace(t.TEMPLATE_STRING_REGEX,function(K,Y,te){var xe,ke,we,j="_xother"===Y||"_yother"===Y,re="_xother_"===Y||"_yother_"===Y,le="xother_"===Y||"yother_"===Y,ge="xother"===Y||"yother"===Y||j||le||re,pe=Y;if((j||re)&&(pe=pe.substring(1)),(le||re)&&(pe=pe.substring(0,pe.length-1)),ge){if(void 0===(xe=G[pe]))return""}else for(we=3;we<H.length;we++)if(ke=H[we]){if(ke.hasOwnProperty(pe)){xe=ke[pe];break}if(O.test(pe)||(xe=t.nestedProperty(ke,pe).get(),(xe=q[pe]||t.nestedProperty(ke,pe).get())&&(q[pe]=xe)),void 0!==xe)break}if(void 0===xe&&V)return V.count<V.max&&(t.warn("Variable '"+pe+"' in "+V.name+" could not be found!"),xe=K),V.count===V.max&&t.warn("Too many "+V.name+" warnings - additional warnings will be suppressed"),V.count++,K;if(te){var de;if(":"===te[0]&&(xe=(de=$?$.numberFormat:t.numberFormat)(te.replace(D,""))(xe)),"|"===te[0]){de=$?$.timeFormat:k;var be=t.dateTime2ms(xe);xe=t.formatDate(be,te.replace(D,""),!1,de)}}else{var Le=pe+"Label";G.hasOwnProperty(Le)&&(xe=G[Le])}return ge&&(xe="("+xe+")",(j||re)&&(xe=" "+xe),(le||re)&&(xe+=" ")),xe})}t.subplotSort=function(W,G){for(var $=Math.min(W.length,G.length)+1,V=0,H=0,q=0;q<$;q++){var K=W.charCodeAt(q)||0,Y=G.charCodeAt(q)||0,te=K>=48&&K<=57,J=Y>=48&&Y<=57;if(te&&(V=10*V+K-48),J&&(H=10*H+Y-48),!te||!J){if(V!==H)return V-H;if(K!==Y)return K-Y}}return H-V};var oe=2e9;t.seedPseudoRandom=function(){oe=2e9},t.pseudoRandom=function(){var W=oe;return oe=(69069*oe+1)%4294967296,Math.abs(oe-W)<429496729?t.pseudoRandom():oe/4294967296},t.fillText=function(W,G,$){var V=Array.isArray($)?function(K){$.push(K)}:function(K){$.text=K},H=t.extractOption(W,G,"htx","hovertext");if(t.isValidTextValue(H))return V(H);var q=t.extractOption(W,G,"tx","text");return t.isValidTextValue(q)?V(q):void 0},t.isValidTextValue=function(W){return W||0===W},t.formatPercent=function(W,G){G=G||0;for(var $=(Math.round(100*W*Math.pow(10,G))*Math.pow(.1,G)).toFixed(G)+"%",V=0;V<G;V++)-1!==$.indexOf(".")&&($=($=$.replace("0%","%")).replace(".%","%"));return $},t.isHidden=function(W){var G=window.getComputedStyle(W).display;return!G||"none"===G},t.strTranslate=function(W,G){return W||G?"translate("+W+","+G+")":""},t.strRotate=function(W){return W?"rotate("+W+")":""},t.strScale=function(W){return 1!==W?"scale("+W+")":""},t.getTextTransform=function(W){var G=W.noCenter,$=W.textX,V=W.textY,te=W.rotate,J=W.scale;return J?J>1&&(J=1):J=0,t.strTranslate(W.targetX-J*($+(W.anchorX||0)),W.targetY-J*(V+(W.anchorY||0)))+t.strScale(J)+(te?"rotate("+te+(G?"":" "+$+" "+V)+")":"")},t.ensureUniformFontSize=function(W,G){var $=t.extendFlat({},G);return $.size=Math.max(G.size,W._fullLayout.uniformtext.minsize||0),$},t.join2=function(W,G,$){var V=W.length;return V>1?W.slice(0,-1).join(G)+$+W[V-1]:W.join(G)},t.bigFont=function(W){return Math.round(1.2*W)};var se=t.getFirefoxVersion(),ne=null!==se&&se<86;t.getPositionFromD3Event=function(){return ne?[_.event.layerX,_.event.layerY]:[_.event.offsetX,_.event.offsetY]}},{"../constants/numerical":479,"./anchor_utils":483,"./angles":484,"./array":485,"./clean_number":486,"./clear_responsive":488,"./coerce":489,"./dates":490,"./dom":491,"./extend":493,"./filter_unique":494,"./filter_visible":495,"./geometry2d":498,"./identity":501,"./increment":502,"./is_plain_object":504,"./keyed_container":505,"./localize":506,"./loggers":507,"./make_trace_groups":508,"./matrix":509,"./mod":510,"./nested_property":511,"./noop":512,"./notifier":513,"./preserve_drawing_buffer":517,"./push_unique":518,"./regex":520,"./relative_attr":521,"./relink_private":522,"./search":523,"./sort_object_keys":526,"./stats":527,"./throttle":530,"./to_log_range":531,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],504:[function(v,ie,ae){"use strict";ie.exports=function(k){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(k):"[object Object]"===Object.prototype.toString.call(k)&&Object.getPrototypeOf(k).hasOwnProperty("hasOwnProperty")}},{}],505:[function(v,ie,ae){"use strict";var _=v("./nested_property"),k=/^\w*$/;ie.exports=function(t,i,a,r){a=a||"name",r=r||"value";var g,s,b,x={};i&&i.length?(b=_(t,i),s=b.get()):s=t,i=i||"";var S={};if(s)for(g=0;g<s.length;g++)S[s[g][a]]=g;var p=k.test(r),w={set:function(l,y){var A=null===y?4:0;if(!s){if(!b||4===A)return;b.set(s=[])}var T=S[l];if(void 0===T){if(4===A)return;A|=3,S[l]=T=s.length}else y!==(p?s[T][r]:_(s[T],r).get())&&(A|=2);var M=s[T]=s[T]||{};return M[a]=l,p?M[r]=y:_(M,r).set(y),null!==y&&(A&=-5),x[T]=x[T]|A,w},get:function(l){if(s){var y=S[l];if(void 0!==y)return p?s[y][r]:_(s[y],r).get()}},rename:function(l,y){var A=S[l];return void 0===A||(x[A]=1|x[A],S[y]=A,delete S[l],s[A][a]=y),w},remove:function(l){var y=S[l];if(void 0===y)return w;var A=s[y];if(Object.keys(A).length>2)return x[y]=2|x[y],w.set(l,null);if(p){for(g=y;g<s.length;g++)x[g]=3|x[g];for(g=y;g<s.length;g++)S[s[g][a]]--;s.splice(y,1),delete S[l]}else _(A,r).set(null),x[y]=6|x[y];return w},constructUpdate:function(){for(var l,y,A={},T=Object.keys(x),M=0;M<T.length;M++)l=i+"["+(y=T[M])+"]",s[y]?(1&x[y]&&(A[l+"."+a]=s[y][a]),2&x[y]&&(A[l+"."+r]=p?4&x[y]?null:s[y][r]:4&x[y]?null:_(s[y],r).get())):A[l]=null;return A}};return w}},{"./nested_property":511}],506:[function(v,ie,ae){"use strict";var _=v("../registry");ie.exports=function(m,E){for(var e=m._context.locale,c=0;c<2;c++){for(var d=m._context.locales,n=0;n<2;n++){var t=(d[e]||{}).dictionary;if(t){var i=t[E];if(i)return i}d=_.localeRegistry}var a=e.split("-")[0];if(a===e)break;e=a}return E}},{"../registry":638}],507:[function(v,ie,ae){"use strict";var _=v("../plot_api/plot_config").dfltConfig,k=v("./notifier"),m=ie.exports={};m.log=function(){var E;if(_.logging>1){var e=["LOG:"];for(E=0;E<arguments.length;E++)e.push(arguments[E]);console.trace.apply(console,e)}if(_.notifyOnLogging>1){var c=[];for(E=0;E<arguments.length;E++)c.push(arguments[E]);k(c.join("<br>"),"long")}},m.warn=function(){var E;if(_.logging>0){var e=["WARN:"];for(E=0;E<arguments.length;E++)e.push(arguments[E]);console.trace.apply(console,e)}if(_.notifyOnLogging>0){var c=[];for(E=0;E<arguments.length;E++)c.push(arguments[E]);k(c.join("<br>"),"stick")}},m.error=function(){var E;if(_.logging>0){var e=["ERROR:"];for(E=0;E<arguments.length;E++)e.push(arguments[E]);console.error.apply(console,e)}if(_.notifyOnLogging>0){var c=[];for(E=0;E<arguments.length;E++)c.push(arguments[E]);k(c.join("<br>"),"stick")}}},{"../plot_api/plot_config":541,"./notifier":513}],508:[function(v,ie,ae){"use strict";var _=v("@plotly/d3");ie.exports=function(m,E,e){var c=m.selectAll("g."+e.replace(/\s/g,".")).data(E,function(n){return n[0].trace.uid});c.exit().remove(),c.enter().append("g").attr("class",e),c.order();var d=m.classed("rangeplot")?"nodeRangePlot3":"node3";return c.each(function(n){n[0][d]=_.select(this)}),c}},{"@plotly/d3":58}],509:[function(v,ie,ae){"use strict";var _=v("gl-mat4");ae.init2dArray=function(k,m){for(var E=new Array(k),e=0;e<k;e++)E[e]=new Array(m);return E},ae.transposeRagged=function(k){var e,c,m=0,E=k.length;for(e=0;e<E;e++)m=Math.max(m,k[e].length);var d=new Array(m);for(e=0;e<m;e++)for(d[e]=new Array(E),c=0;c<E;c++)d[e][c]=k[c][e];return d},ae.dot=function(k,m){if(!k.length||!m.length||k.length!==m.length)return null;var e,c,E=k.length;if(k[0].length)for(e=new Array(E),c=0;c<E;c++)e[c]=ae.dot(k[c],m);else if(m[0].length){var d=ae.transposeRagged(m);for(e=new Array(d.length),c=0;c<d.length;c++)e[c]=ae.dot(k,d[c])}else for(e=0,c=0;c<E;c++)e+=k[c]*m[c];return e},ae.translationMatrix=function(k,m){return[[1,0,k],[0,1,m],[0,0,1]]},ae.rotationMatrix=function(k){var m=k*Math.PI/180;return[[Math.cos(m),-Math.sin(m),0],[Math.sin(m),Math.cos(m),0],[0,0,1]]},ae.rotationXYMatrix=function(k,m,E){return ae.dot(ae.dot(ae.translationMatrix(m,E),ae.rotationMatrix(k)),ae.translationMatrix(-m,-E))},ae.apply3DTransform=function(k){return function(){var m=arguments,E=1===arguments.length?m[0]:[m[0],m[1],m[2]||0];return ae.dot(k,[E[0],E[1],E[2],1]).slice(0,3)}},ae.apply2DTransform=function(k){return function(){var m=arguments;3===m.length&&(m=m[0]);var E=1===arguments.length?m[0]:[m[0],m[1]];return ae.dot(k,[E[0],E[1],1]).slice(0,2)}},ae.apply2DTransform2=function(k){var m=ae.apply2DTransform(k);return function(E){return m(E.slice(0,2)).concat(m(E.slice(2,4)))}},ae.convertCssMatrix=function(k){if(k){var m=k.length;if(16===m)return k;if(6===m)return[k[0],k[1],0,0,k[2],k[3],0,0,0,0,1,0,k[4],k[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},ae.inverseTransformMatrix=function(k){var m=[];return _.invert(m,k),[[m[0],m[1],m[2],m[3]],[m[4],m[5],m[6],m[7]],[m[8],m[9],m[10],m[11]],[m[12],m[13],m[14],m[15]]]}},{"gl-mat4":210}],510:[function(v,ie,ae){"use strict";ie.exports={mod:function _(m,E){var e=m%E;return e<0?e+E:e},modHalf:function k(m,E){return Math.abs(m)>E/2?m-Math.round(m/E)*E:m}}},{}],511:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("./array").isArrayOrTypedArray;function m(a,r){return function(){var s,b,x,S,p,g=a;for(S=0;S<r.length-1;S++){if(-1===(s=r[S])){for(b=!0,x=[],p=0;p<g.length;p++)x[p]=m(g[p],r.slice(S+1))(),x[p]!==x[0]&&(b=!1);return b?x[0]:x}if("number"==typeof s&&!k(g)||"object"!=typeof(g=g[s])||null===g)return}if("object"==typeof g&&null!==g&&null!==(x=g[r[S]]))return x}}ie.exports=function(r,g){if(_(g))g=String(g);else if("string"!=typeof g||"[-1]"===g.substr(g.length-4))throw"bad property string";for(var x,S,p,s=0,b=g.split(".");s<b.length;){if(x=String(b[s]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(x[1])b[s]=x[1];else{if(0!==s)throw"bad property string";b.splice(0,1)}for(S=x[2].substr(1,x[2].length-2).split("]["),p=0;p<S.length;p++)s++,b.splice(s,0,Number(S[p]))}s++}return"object"!=typeof r?function i(a,r,g){return{set:function(){throw"bad container"},get:function(){},astr:r,parts:g,obj:a}}(r,g,b):{set:c(r,b,g),get:m(r,b),astr:g,parts:b,obj:r}};var E=/(^|\.)args\[/;function e(a,r){return void 0===a||null===a&&!r.match(E)}function c(a,r,g){return function(s){var w,l,b=a,x="",S=[[a,x]],p=e(s,g);for(l=0;l<r.length-1;l++){if("number"==typeof(w=r[l])&&!k(b))throw"array index but container is not an array";if(-1===w){if(p=!n(b,r.slice(l+1),s,g))break;return}if(!t(b,w,r[l+1],p))break;if("object"!=typeof(b=b[w])||null===b)throw"container is not an object";x=d(x,w),S.push([b,x])}if(p){if(l===r.length-1&&(delete b[r[l]],Array.isArray(b)&&+r[l]==b.length-1))for(;b.length&&void 0===b[b.length-1];)b.pop()}else b[r[l]]=s}}function d(a,r){var g=r;return _(r)?g="["+r+"]":a&&(g="."+r),a+g}function n(a,r,g,s){var y,b=k(g),x=!0,S=g,p=s.replace("-1",0),w=!b&&e(g,p),l=r[0];for(y=0;y<a.length;y++)p=s.replace("-1",y),b&&(w=e(S=g[y%g.length],p)),w&&(x=!1),t(a,y,l,w)&&c(a[y],r,s.replace("-1",y))(S);return x}function t(a,r,g,s){if(void 0===a[r]){if(s)return!1;a[r]="number"==typeof g?[]:{}}return!0}},{"./array":485,"fast-isnumeric":190}],512:[function(v,ie,ae){"use strict";ie.exports=function(){}},{}],513:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("fast-isnumeric"),m=[];ie.exports=function(E,e){if(-1===m.indexOf(E)){m.push(E);var c=1e3;k(e)?c=e:"long"===e&&(c=3e3);var d=_.select("body").selectAll(".plotly-notifier").data([0]);d.enter().append("div").classed("plotly-notifier",!0),d.selectAll(".notifier-note").data(m).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(i){var a=_.select(this);a.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){a.transition().call(t)});for(var r=a.append("p"),g=i.split(/<br\s*\/?>/g),s=0;s<g.length;s++)s&&r.append("br"),r.append("span").text(g[s]);"stick"===e?a.transition().duration(350).style("opacity",1):a.transition().duration(700).style("opacity",1).transition().delay(c).call(t)})}function t(i){i.duration(700).style("opacity",0).each("end",function(a){var r=m.indexOf(a);-1!==r&&m.splice(r,1),_.select(this).remove()})}}},{"@plotly/d3":58,"fast-isnumeric":190}],514:[function(v,ie,ae){"use strict";var _=v("./setcursor"),k="data-savedcursor";ie.exports=function(e,c){var d=e.attr(k);if(c){if(!d){for(var n=(e.attr("class")||"").split(" "),t=0;t<n.length;t++){var i=n[t];0===i.indexOf("cursor-")&&e.attr(k,i.substr(7)).classed(i,!1)}e.attr(k)||e.attr(k,"!!")}_(e,c)}else d&&(e.attr(k,null),"!!"===d?_(e):_(e,d))}},{"./setcursor":524}],515:[function(v,ie,ae){"use strict";var _=v("./matrix").dot,k=v("../constants/numerical").BADNUM,m=ie.exports={};m.tester=function(e){var a,c=e.slice(),d=c[0][0],n=d,t=c[0][1],i=t;for(c.push(c[0]),a=1;a<c.length;a++)d=Math.min(d,c[a][0]),n=Math.max(n,c[a][0]),t=Math.min(t,c[a][1]),i=Math.max(i,c[a][1]);var g,r=!1;5===c.length&&(c[0][0]===c[1][0]?c[2][0]===c[3][0]&&c[0][1]===c[3][1]&&c[1][1]===c[2][1]&&(r=!0,g=function(p){return p[0]===c[0][0]}):c[0][1]===c[1][1]&&c[2][1]===c[3][1]&&c[0][0]===c[3][0]&&c[1][0]===c[2][0]&&(r=!0,g=function(p){return p[1]===c[0][1]}));var x=!0,S=c[0];for(a=1;a<c.length;a++)if(S[0]!==c[a][0]||S[1]!==c[a][1]){x=!1;break}return{xmin:d,xmax:n,ymin:t,ymax:i,pts:c,contains:r?function s(p,w){var l=p[0],y=p[1];return!(l===k||l<d||l>n||y===k||y<t||y>i||w&&g(p))}:function b(p,w){var l=p[0],y=p[1];if(l===k||l<d||l>n||y===k||y<t||y>i)return!1;var u,h,o,C,R,A=c.length,T=c[0][0],M=c[0][1],f=0;for(u=1;u<A;u++)if(h=T,o=M,T=c[u][0],M=c[u][1],!(l<(C=Math.min(h,T))||l>Math.max(h,T)||y>Math.max(o,M)))if(y<Math.min(o,M))l!==C&&f++;else{if(y===(R=T===h?y:o+(l-h)*(M-o)/(T-h)))return!(1===u&&w);y<=R&&l!==C&&f++}return f%2==1},isRect:r,degenerate:x}},m.isSegmentBent=function(e,c,d,n){var s,b,x,t=e[c],i=[e[d][0]-t[0],e[d][1]-t[1]],a=_(i,i),r=Math.sqrt(a),g=[-i[1]/r,i[0]/r];for(s=c+1;s<d;s++)if((x=_(b=[e[s][0]-t[0],e[s][1]-t[1]],i))<0||x>a||Math.abs(_(b,g))>n)return!0;return!1},m.filter=function(e,c){var d=[e[0]],n=0,t=0;function i(r){e.push(r);var g=d.length,s=n;d.splice(t+1);for(var b=s+1;b<e.length;b++)(b===e.length-1||m.isSegmentBent(e,s,b+1,c))&&(d.push(e[b]),d.length<g-2&&(n=b,t=d.length-1),s=b)}return e.length>1&&i(e.pop()),{addPt:i,raw:e,filtered:d}}},{"../constants/numerical":479,"./matrix":509}],516:[function(v,ie,ae){(function(_){(function(){"use strict";var k=v("./show_no_webgl_msg"),m=v("regl");ie.exports=function(e,c,d){var n=e._fullLayout,t=!0;return n._glcanvas.each(function(i){if(i.regl)i.regl.preloadCachedCode(d);else if(!i.pick||n._has("parcoords")){try{i.regl=m({canvas:this,attributes:{antialias:!i.pick,preserveDrawingBuffer:!0},pixelRatio:e._context.plotGlPixelRatio||_.devicePixelRatio,extensions:c||[],cachedCode:d||{}})}catch(a){t=!1}i.regl||(t=!1),t&&this.addEventListener("webglcontextlost",function(a){e&&e.emit&&e.emit("plotly_webglcontextlost",{event:a,layer:i.key})},!1)}}),t||k({container:n._glcontainer.node()}),t}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./show_no_webgl_msg":525,regl:283}],517:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("is-mobile");ie.exports=function(e){var c;if("string"!=typeof(c=e&&e.hasOwnProperty("userAgent")?e.userAgent:function m(){var E;return"undefined"!=typeof navigator&&(E=navigator.userAgent),E&&E.headers&&"string"==typeof E.headers["user-agent"]&&(E=E.headers["user-agent"]),E}()))return!0;var d=k({ua:{headers:{"user-agent":c}},tablet:!0,featureDetect:!1});if(!d)for(var n=c.split(" "),t=1;t<n.length;t++)if(-1!==n[t].indexOf("Safari"))for(var a=t-1;a>-1;a--){var r=n[a];if("Version/"===r.substr(0,8)){var g=r.substr(8).split(".")[0];if(_(g)&&(g=+g),g>=13)return!0}}return d}},{"fast-isnumeric":190,"is-mobile":234}],518:[function(v,ie,ae){"use strict";ie.exports=function(k,m){if(m instanceof RegExp){for(var E=m.toString(),e=0;e<k.length;e++)if(k[e]instanceof RegExp&&k[e].toString()===E)return k;k.push(m)}else(m||0===m)&&-1===k.indexOf(m)&&k.push(m);return k}},{}],519:[function(v,ie,ae){"use strict";var _=v("../lib"),k=v("../plot_api/plot_config").dfltConfig;var E={add:function(e,c,d,n,t){var i,a;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},a=e.undoQueue.index,e.autoplay?e.undoQueue.inSequence||(e.autoplay=!1):(!e.undoQueue.sequence||e.undoQueue.beginSequence?(e.undoQueue.queue.splice(a,e.undoQueue.queue.length-a,i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),e.undoQueue.index+=1):i=e.undoQueue.queue[a-1],e.undoQueue.beginSequence=!1,i&&(i.undo.calls.unshift(c),i.undo.args.unshift(d),i.redo.calls.push(n),i.redo.args.push(t)),e.undoQueue.queue.length>k.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--))},startSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},stopSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},undo:function(c){var d,n;if(!(void 0===c.undoQueue||isNaN(c.undoQueue.index)||c.undoQueue.index<=0)){for(c.undoQueue.index--,d=c.undoQueue.queue[c.undoQueue.index],c.undoQueue.inSequence=!0,n=0;n<d.undo.calls.length;n++)E.plotDo(c,d.undo.calls[n],d.undo.args[n]);c.undoQueue.inSequence=!1,c.autoplay=!1}},redo:function(c){var d,n;if(!(void 0===c.undoQueue||isNaN(c.undoQueue.index)||c.undoQueue.index>=c.undoQueue.queue.length)){for(d=c.undoQueue.queue[c.undoQueue.index],c.undoQueue.inSequence=!0,n=0;n<d.redo.calls.length;n++)E.plotDo(c,d.redo.calls[n],d.redo.args[n]);c.undoQueue.inSequence=!1,c.autoplay=!1,c.undoQueue.index++}},plotDo:function(e,c,d){e.autoplay=!0,d=function m(e,c){for(var n,d=[],t=0;t<c.length;t++)d[t]=(n=c[t])===e?n:"object"==typeof n?Array.isArray(n)?_.extendDeep([],n):_.extendDeepAll({},n):n;return d}(e,d),c.apply(null,d)}};ie.exports=E},{"../lib":503,"../plot_api/plot_config":541}],520:[function(v,ie,ae){"use strict";ae.counter=function(_,k,m,E){var e=(k||"")+(m?"":"$"),c=!1===E?"":"^";return"xy"===_?new RegExp(c+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(c+_+"([2-9]|[1-9][0-9]+)?"+e)}},{}],521:[function(v,ie,ae){"use strict";var _=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,k=/^[^\.\[\]]+$/;ie.exports=function(m,E){for(;E;){var e=m.match(_);if(e)m=e[1];else{if(!m.match(k))throw new Error("bad relativeAttr call:"+[m,E]);m=""}if("^"!==E.charAt(0))break;E=E.slice(1)}return m&&"["!==E.charAt(0)?m+"."+E:m+E}},{}],522:[function(v,ie,ae){"use strict";var _=v("./array").isArrayOrTypedArray,k=v("./is_plain_object");ie.exports=function m(E,e){for(var c in e){var d=e[c],n=E[c];if(n!==d)if("_"===c.charAt(0)||"function"==typeof d){if(c in E)continue;E[c]=d}else if(_(d)&&_(n)&&k(d[0])){if("customdata"===c||"ids"===c)continue;for(var t=Math.min(d.length,n.length),i=0;i<t;i++)n[i]!==d[i]&&k(d[i])&&k(n[i])&&m(n[i],d[i])}else k(d)&&k(n)&&(m(n,d),Object.keys(n).length||delete E[c])}}},{"./array":485,"./is_plain_object":504}],523:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("./loggers"),m=v("./identity"),E=v("../constants/numerical").BADNUM,e=1e-9;function c(i,a){return i<a}function d(i,a){return i<=a}function n(i,a){return i>a}function t(i,a){return i>=a}ae.findBin=function(i,a,r){if(_(a.start))return r?Math.ceil((i-a.start)/a.size-e)-1:Math.floor((i-a.start)/a.size+e);var S,p,g=0,s=a.length,b=0,x=s>1?(a[s-1]-a[0])/(s-1):1;for(p=x>=0?r?c:d:r?t:n,i+=x*e*(r?-1:1)*(x>=0?1:-1);g<s&&b++<100;)p(a[S=Math.floor((g+s)/2)],i)?g=S+1:s=S;return b>90&&k.log("Long binary search..."),g-1},ae.sorterAsc=function(i,a){return i-a},ae.sorterDes=function(i,a){return a-i},ae.distinctVals=function(i){var r,a=i.slice();for(a.sort(ae.sorterAsc),r=a.length-1;r>-1&&a[r]===E;r--);for(var x,g=a[r]-a[0]||1,s=g/(r||1)/1e4,b=[],S=0;S<=r;S++){var p=a[S],w=p-x;void 0===x?(b.push(p),x=p):w>s&&(g=Math.min(g,w),b.push(p),x=p)}return{vals:b,minDiff:g}},ae.roundUp=function(i,a,r){for(var b,g=0,s=a.length-1,x=0,S=r?0:1,p=r?1:0,w=r?Math.ceil:Math.floor;g<s&&x++<100;)a[b=w((g+s)/2)]<=i?g=b+S:s=b-p;return a[g]},ae.sort=function(i,a){for(var r=0,g=0,s=1;s<i.length;s++){var b=a(i[s],i[s-1]);if(b<0?r=1:b>0&&(g=1),r&&g)return i.sort(a)}return g?i:i.reverse()},ae.findIndexOfMin=function(i,a){a=a||m;for(var g,r=1/0,s=0;s<i.length;s++){var b=a(i[s]);b<r&&(r=b,g=s)}return g}},{"../constants/numerical":479,"./identity":501,"./loggers":507,"fast-isnumeric":190}],524:[function(v,ie,ae){"use strict";ie.exports=function(k,m){(k.attr("class")||"").split(" ").forEach(function(E){0===E.indexOf("cursor-")&&k.classed(E,!1)}),m&&k.classed("cursor-"+m,!0)}},{}],525:[function(v,ie,ae){"use strict";var _=v("../components/color"),k=function(){};ie.exports=function(E){for(var e in E)"function"==typeof E[e]&&(E[e]=k);E.destroy=function(){E.container.parentNode.removeChild(E.container)};var c=document.createElement("div");c.className="no-webgl",c.style.cursor="pointer",c.style.fontSize="24px",c.style.color=_.defaults[0],c.style.position="absolute",c.style.left=c.style.top="0px",c.style.width=c.style.height="100%",c.style["background-color"]=_.lightLine,c.style["z-index"]=30;var d=document.createElement("p");return d.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",d.style.position="relative",d.style.top="50%",d.style.left="50%",d.style.height="30%",d.style.width="50%",d.style.margin="-15% 0 0 -25%",c.appendChild(d),E.container.appendChild(c),E.container.style.background="#FFFFFF",E.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":366}],526:[function(v,ie,ae){"use strict";ie.exports=function(k){return Object.keys(k).sort()}},{}],527:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("./array").isArrayOrTypedArray;ae.aggNums=function(m,E,e,c){var d,n;if((!c||c>e.length)&&(c=e.length),_(E)||(E=!1),k(e[0])){for(n=new Array(c),d=0;d<c;d++)n[d]=ae.aggNums(m,E,e[d]);e=n}for(d=0;d<c;d++)_(E)?_(e[d])&&(E=m(+E,+e[d])):E=e[d];return E},ae.len=function(m){return ae.aggNums(function(E){return E+1},0,m)},ae.mean=function(m,E){return E||(E=ae.len(m)),ae.aggNums(function(e,c){return e+c},0,m)/E},ae.midRange=function(m){if(void 0!==m&&0!==m.length)return(ae.aggNums(Math.max,null,m)+ae.aggNums(Math.min,null,m))/2},ae.variance=function(m,E,e){return E||(E=ae.len(m)),_(e)||(e=ae.mean(m,E)),ae.aggNums(function(c,d){return c+Math.pow(d-e,2)},0,m)/E},ae.stdev=function(m,E,e){return Math.sqrt(ae.variance(m,E,e))},ae.median=function(m){var E=m.slice().sort();return ae.interp(E,.5)},ae.interp=function(m,E){if(!_(E))throw"n should be a finite number";if((E=E*m.length-.5)<0)return m[0];if(E>m.length-1)return m[m.length-1];var e=E%1;return e*m[Math.ceil(E)]+(1-e)*m[Math.floor(E)]}},{"./array":485,"fast-isnumeric":190}],528:[function(v,ie,ae){"use strict";var _=v("color-normalize");ie.exports=function k(m){return m?_(m):[0,0,0,1]}},{"color-normalize":89}],529:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../lib"),m=k.strTranslate,E=v("../constants/xmlns_namespaces"),e=v("../constants/alignment").LINE_SPACING,c=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;ae.convertToTspans=function(D,N,U){var X=D.text(),oe=!D.attr("data-notex")&&N&&N._context.typesetMath&&"undefined"!=typeof MathJax&&X.match(c),se=_.select(D.node().parentNode);if(!se.empty()){var ne=D.attr("class")?D.attr("class").split(" ")[0]:"text";return se.selectAll("svg."+(ne+="-math")).remove(),se.selectAll("g."+ne+"-group").remove(),D.style("display",null).attr({"data-unformatted":X,"data-math":"N"}),oe?(N&&N._promises||[]).push(new Promise(function(G){D.style("display","none");var $=parseInt(D.node().style.fontSize,10);!function a(D,N,U){var X=parseInt((MathJax.version||"").split(".")[0]);if(2===X||3===X){var oe,se,ne,W,G=function(){return se=k.extendDeepAll({},MathJax.Hub.config),ne=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:i},displayAlign:"left"})},$=function(){se=k.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=i},V=function(){if("SVG"!==(oe=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},H=function(){"svg"!==(oe=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg")},q=function(){var re="math-output-"+k.randstr({},64),le=(W=_.select("body").append("div").attr({id:re}).style({visibility:"hidden",position:"absolute","font-size":N.fontSize+"px"}).text(function t(D){return D.replace(d,"\\lt ").replace(n,"\\gt ")}(D))).node();return 2===X?MathJax.Hub.Typeset(le):MathJax.typeset([le])},K=function(){var re=W.select(2===X?".MathJax_SVG":".MathJax"),le=!re.empty()&&W.select("svg").node();if(le){var pe,ge=le.getBoundingClientRect();pe=2===X?_.select("body").select("#MathJax_SVG_glyphs"):re.select("defs"),U(re,pe,ge)}else k.log("There was an error in the tex syntax.",D),U();W.remove()},Y=function(){if("SVG"!==oe)return MathJax.Hub.setRenderer(oe)},te=function(){"svg"!==oe&&(MathJax.config.startup.output=oe)},J=function(){return void 0!==ne&&(MathJax.Hub.processSectionDelay=ne),MathJax.Hub.Config(se)},j=function(){MathJax.config=se};2===X?MathJax.Hub.Queue(G,V,q,K,Y,J):3===X&&($(),H(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){q(),K(),te(),j()}))}else k.warn("No MathJax version:",MathJax.version)}(oe[2],{fontSize:$},function(H,q,K){se.selectAll("svg."+ne).remove(),se.selectAll("g."+ne+"-group").remove();var Y=H&&H.select("svg");if(!Y||!Y.node())return W(),void G();var te=se.append("g").classed(ne+"-group",!0).attr({"pointer-events":"none","data-unformatted":X,"data-math":"Y"});te.node().appendChild(Y.node()),q&&q.node()&&Y.node().insertBefore(q.node().cloneNode(!0),Y.node().firstChild);var J=K.width,j=K.height;Y.attr({class:ne,height:j,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var re=D.node().style.fill||"black",le=Y.select("g");le.attr({fill:re,stroke:re});var ge=le.node().getBoundingClientRect(),pe=ge.width,xe=ge.height;(pe>J||xe>j)&&(Y.style("overflow","hidden"),pe=(ge=Y.node().getBoundingClientRect()).width,xe=ge.height);var ke=+D.attr("x"),we=+D.attr("y"),be=-($||D.node().getBoundingClientRect().height)/4;if("y"===ne[0])te.attr({transform:"rotate("+[-90,ke,we]+")"+m(-pe/2,be-xe/2)});else if("l"===ne[0])we=be-xe/2;else if("a"===ne[0]&&0!==ne.indexOf("atitle"))ke=0,we=be;else{var Le=D.attr("text-anchor");ke-=pe*("middle"===Le?.5:"end"===Le?1:0),we=we+be-xe/2}Y.attr({x:ke,y:we}),U&&U.call(D,te),G(te)})})):W(),D}function W(){se.empty()||(ne=D.attr("class")+"-math",se.select("svg."+ne).remove()),D.text("").style("white-space","pre"),function z(D,N){N=N.replace(S," ");var oe,U=!1,X=[],se=-1;function ne(){se++;var xe=document.createElementNS(E.svg,"tspan");_.select(xe).attr({class:"line",dy:se*e+"em"}),D.appendChild(xe),oe=xe;var ke=X;if(X=[{node:xe}],ke.length>1)for(var we=1;we<ke.length;we++)W(ke[we])}function W(xe){var de,ke=xe.type,we={};if("a"===ke){de="a";var be=xe.target,Le=xe.href,De=xe.popup;Le&&(we={"xlink:xlink:show":"_blank"===be||"_"!==be.charAt(0)?"new":"replace",target:be,"xlink:xlink:href":Le},De&&(we.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+De+'");return false;'))}else de="tspan";xe.style&&(we.style=xe.style);var ye=document.createElementNS(E.svg,de);if("sup"===ke||"sub"===ke){G(oe,b),oe.appendChild(ye);var Ce=document.createElementNS(E.svg,"tspan");G(Ce,b),_.select(Ce).attr("dy",s[ke]),we.dy=g[ke],oe.appendChild(ye),oe.appendChild(Ce)}else oe.appendChild(ye);_.select(ye).attr(we),oe=xe.node=ye,X.push(xe)}function G(xe,ke){xe.appendChild(document.createTextNode(ke))}function $(xe){if(1!==X.length){var ke=X.pop();xe!==ke.type&&k.log("Start tag <"+ke.type+"> doesnt match end tag <"+xe+">. Pretending it did match.",N),oe=X[X.length-1].node}else k.log("Ignoring unexpected end tag </"+xe+">.",N)}l.test(N)?ne():(oe=D,X=[{node:D}]);for(var H=N.split(p),q=0;q<H.length;q++){var K=H[q],Y=K.match(w),te=Y&&Y[2].toLowerCase(),J=r[te];if("br"===te)ne();else if(void 0===J)G(oe,C(K));else if(Y[1])$(te);else{var j=Y[4],re={type:te},le=f(j,y);if(le?(le=le.replace(u,"$1 fill:"),J&&(le+=";"+J)):J&&(le=J),le&&(re.style=le),"a"===te){U=!0;var ge=f(j,A);if(ge){var pe=O(ge);pe&&(re.href=pe,re.target=f(j,T)||"_blank",re.popup=f(j,M))}}W(re)}}return U}(D.node(),X)&&D.style("pointer-events","all"),ae.positionText(D),U&&U.call(D)}};var d=/(<|&lt;|&#60;)/g,n=/(>|&gt;|&#62;)/g;var i=[["$","$"],["\\(","\\)"]];var r={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},g={sub:"0.3em",sup:"-0.6em"},s={sub:"-0.21em",sup:"0.42em"},b="\u200b",x=["http:","https:","mailto:","",void 0,":"],S=ae.NEWLINES=/(\r\n?|\n)/g,p=/(<[^<>]*>)/,w=/<(\/?)([^ >]*)(\s+(.*))?>/i,l=/<br(\s+.*)?>/i;ae.BR_TAG_ALL=/<br(\s+.*)?>/gi;var y=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,A=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,T=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,M=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function f(D,N){if(!D)return null;var U=D.match(N),X=U&&(U[3]||U[4]);return X&&C(X)}var u=/(^|;)\s*color:/;ae.plainText=function(D,N){for(var U=void 0!==(N=N||{}).len&&-1!==N.len?N.len:1/0,X=void 0!==N.allowedTags?N.allowedTags:["br"],se="...".length,ne=D.split(p),W=[],G="",$=0,V=0;V<ne.length;V++){var H=ne[V],q=H.match(w),K=q&&q[2].toLowerCase();if(K)-1!==X.indexOf(K)&&(W.push(H),G=K);else{var Y=H.length;if($+Y<U)W.push(H),$+=Y;else if($<U){var te=U-$;G&&("br"!==G||te<=se||Y<=se)&&W.pop(),W.push(U>se?H.substr(0,te-se)+"...":H.substr(0,te));break}G=""}}return W.join("")};var h={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},o=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function C(D){return D.replace(o,function(N,U){return("#"===U.charAt(0)?function R(D){if(!(D>1114111)){var N=String.fromCodePoint;if(N)return N(D);var U=String.fromCharCode;return D<=65535?U(D):U(55232+(D>>10),D%1024+56320)}}("x"===U.charAt(1)?parseInt(U.substr(2),16):parseInt(U.substr(1),10)):h[U])||N})}function O(D){var N=encodeURI(decodeURI(D)),U=document.createElement("a"),X=document.createElement("a");U.href=D,X.href=N;var se=X.protocol;return-1!==x.indexOf(U.protocol)&&-1!==x.indexOf(se)?N:""}function I(D,N,U){var W,G,$,X=U.horizontalAlign,oe=U.verticalAlign||"top",se=D.node().getBoundingClientRect(),ne=N.node().getBoundingClientRect();return G="bottom"===oe?function(){return se.bottom-W.height}:"middle"===oe?function(){return se.top+(se.height-W.height)/2}:function(){return se.top},$="right"===X?function(){return se.right-W.width}:"center"===X?function(){return se.left+(se.width-W.width)/2}:function(){return se.left},function(){W=this.node().getBoundingClientRect();var V=$()-ne.left,H=G()-ne.top,q=U.gd||{};if(U.gd){q._fullLayout._calcInverseTransform(q);var K=k.apply3DTransform(q._fullLayout._invTransform)(V,H);V=K[0],H=K[1]}return this.style({top:H+"px",left:V+"px","z-index":1e3}),this}}ae.convertEntities=C,ae.sanitizeHTML=function(N){N=N.replace(S," ");for(var U=document.createElement("p"),X=U,oe=[],se=N.split(p),ne=0;ne<se.length;ne++){var W=se[ne],G=W.match(w),$=G&&G[2].toLowerCase();if($ in r)if(G[1])oe.length&&(X=oe.pop());else{var V=G[4],H=f(V,y),q=H?{style:H}:{};if("a"===$){var K=f(V,A);if(K){var Y=O(K);if(Y){q.href=Y;var te=f(V,T);te&&(q.target=te)}}}var J=document.createElement($);X.appendChild(J),_.select(J).attr(q),X=J,oe.push(J)}else X.appendChild(document.createTextNode(C(W)))}return U.innerHTML},ae.lineCount=function(N){return N.selectAll("tspan.line").size()||1},ae.positionText=function(N,U,X){return N.each(function(){var oe=_.select(this);function se(G,$){return void 0===$?null===($=oe.attr(G))&&(oe.attr(G,0),$=0):oe.attr(G,$),$}var ne=se("x",U),W=se("y",X);"text"===this.nodeName&&oe.selectAll("tspan.line").attr({x:ne,y:W})})};var F="1px ";ae.makeTextShadow=function(D){return F+F+F+D+", -"+F+"-"+F+F+D+", "+F+"-"+F+F+D+", -"+F+F+F+D},ae.makeEditable=function(D,N){var U=N.gd,X=N.delegate,oe=_.dispatch("edit","input","cancel"),se=X||D;if(D.style({"pointer-events":X?"none":"all"}),1!==D.size())throw new Error("boo");function ne(){(function G(){var V=_.select(U).select(".svg-container"),H=V.append("div"),q=D.node().style,K=parseFloat(q.fontSize||12),Y=N.text;void 0===Y&&(Y=D.attr("data-unformatted")),H.classed("plugin-editable editable",!0).style({position:"absolute","font-family":q.fontFamily||"Arial","font-size":K,color:N.fill||q.fill||"black",opacity:1,"background-color":N.background||"transparent",outline:"#ffffff33 1px solid",margin:[-K/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(Y).call(I(D,V,N)).on("blur",function(){U._editing=!1,D.text(this.textContent).style({opacity:1});var J,te=_.select(this).attr("class");(J=te?"."+te.split(" ")[0]+"-math-group":"[class*=-math-group]")&&_.select(D.node().parentNode).select(J).style({opacity:0});var j=this.textContent;_.select(this).transition().duration(0).remove(),_.select(document).on("mouseup",null),oe.edit.call(D,j)}).on("focus",function(){var te=this;U._editing=!0,_.select(document).on("mouseup",function(){if(_.event.target===te)return!1;document.activeElement===H.node()&&H.node().blur()})}).on("keyup",function(){27===_.event.which?(U._editing=!1,D.style({opacity:1}),_.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),oe.cancel.call(D,this.textContent)):(oe.input.call(D,this.textContent),_.select(this).call(I(D,V,N)))}).on("keydown",function(){13===_.event.which&&this.blur()}).call(W)})(),D.style({opacity:0});var V,$=se.attr("class");(V=$?"."+$.split(" ")[0]+"-math-group":"[class*=-math-group]")&&_.select(D.node().parentNode).select(V).style({opacity:0})}function W($){var V=$.node(),H=document.createRange();H.selectNodeContents(V);var q=window.getSelection();q.removeAllRanges(),q.addRange(H),V.focus()}return N.immediate?ne():se.on("click",ne),_.rebind(D,oe,"on")}},{"../constants/alignment":471,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],530:[function(v,ie,ae){"use strict";var _={};function k(m){m&&null!==m.timer&&(clearTimeout(m.timer),m.timer=null)}ae.throttle=function(E,e,c){var d=_[E],n=Date.now();if(!d){for(var t in _)_[t].ts<n-6e4&&delete _[t];d=_[E]={ts:0,timer:null}}function i(){c(),d.ts=Date.now(),d.onDone&&(d.onDone(),d.onDone=null)}k(d),n>d.ts+e?i():d.timer=setTimeout(function(){i(),d.timer=null},e)},ae.done=function(m){var E=_[m];return E&&E.timer?new Promise(function(e){var c=E.onDone;E.onDone=function(){c&&c(),e(),E.onDone=null}}):Promise.resolve()},ae.clear=function(m){if(m)k(_[m]),delete _[m];else for(var E in _)ae.clear(E)}},{}],531:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric");ie.exports=function(m,E){if(m>0)return Math.log(m)/Math.LN10;var e=Math.log(Math.min(E[0],E[1]))/Math.LN10;return _(e)||(e=Math.log(Math.max(E[0],E[1]))/Math.LN10-6),e}},{"fast-isnumeric":190}],532:[function(v,ie,ae){"use strict";var _=ie.exports={},k=v("../plots/geo/constants").locationmodeToLayer,m=v("topojson-client").feature;_.getTopojsonName=function(E){return[E.scope.replace(/ /g,"-"),"_",E.resolution.toString(),"m"].join("")},_.getTopojsonPath=function(E,e){return E+e+".json"},_.getTopojsonFeatures=function(E,e){return m(e,e.objects[k[E.locationmode]]).features}},{"../plots/geo/constants":587,"topojson-client":315}],533:[function(v,ie,ae){"use strict";ie.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],534:[function(v,ie,ae){"use strict";ie.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],535:[function(v,ie,ae){"use strict";var _=v("../registry");ie.exports=function(m){for(var d,n,E=_.layoutArrayContainers,e=_.layoutArrayRegexes,c=m.split("[")[0],t=0;t<e.length;t++)if((n=m.match(e[t]))&&0===n.index){d=n[0];break}if(d||(d=E[E.indexOf(c)]),!d)return!1;var i=m.substr(d.length);return i?!!(n=i.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:d,index:Number(n[1]),property:n[3]||""}:{array:d,index:"",property:""}}},{"../registry":638}],536:[function(v,ie,ae){"use strict";var _=v("../lib"),k=_.extendFlat,m=_.isPlainObject,E={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},c=E.flags.slice().concat(["fullReplot"]),d=e.flags.slice().concat("layoutReplot");function n(a){for(var r={},g=0;g<a.length;g++)r[a[g]]=!1;return r}function t(a,r,g){var s=k({},a);for(var b in s){var x=s[b];m(x)&&(s[b]=i(x,r,0,b))}return"from-root"===g&&(s.editType=r),s}function i(a,r,g,s){if(a.valType){var b=k({},a);if(b.editType=r,Array.isArray(a.items)){b.items=new Array(a.items.length);for(var x=0;x<a.items.length;x++)b.items[x]=i(a.items[x],r)}return b}return t(a,r,"_"===s.charAt(0)?"nested":"from-root")}ie.exports={traces:E,layout:e,traceFlags:function(){return n(c)},layoutFlags:function(){return n(d)},update:function(a,r){var g=r.editType;if(g&&"none"!==g)for(var s=g.split("+"),b=0;b<s.length;b++)a[s[b]]=!0},overrideAll:t}},{"../lib":503}],537:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("gl-mat4/fromQuat"),m=v("../registry"),E=v("../lib"),e=v("../plots/plots"),c=v("../plots/cartesian/axis_ids"),d=v("../components/color"),n=c.cleanId,t=c.getFromTrace,i=m.traceIs;function a(l,y){var A=l[y],T=y.charAt(0);A&&"paper"!==A&&(l[y]=n(A,T,!0))}function r(l){function y(A,T){l[A]&&(!l.title||!l.title[T])&&(l.title||(l.title={}),l.title[T]=l[A],delete l[A])}l&&(("string"==typeof l.title||"number"==typeof l.title)&&(l.title={text:l.title}),y("titlefont","font"),y("titleposition","position"),y("titleside","side"),y("titleoffset","offset"))}function g(l){if(!E.isPlainObject(l))return!1;var y=l.name;return delete l.name,delete l.showlegend,("string"==typeof y||"number"==typeof y)&&String(y)}function s(l,y,A,T){if(A&&!T)return l;if(T&&!A||!l.trim())return y;if(!y.trim())return l;var f,M=Math.min(l.length,y.length);for(f=0;f<M&&l.charAt(f)===y.charAt(f);f++);return l.substr(0,f).trim()}function b(l){var y="middle",A="center";return"string"==typeof l&&(-1!==l.indexOf("top")?y="top":-1!==l.indexOf("bottom")&&(y="bottom"),-1!==l.indexOf("left")?A="left":-1!==l.indexOf("right")&&(A="right")),y+" "+A}function x(l,y){return y in l&&"object"==typeof l[y]&&0===Object.keys(l[y]).length}ae.clearPromiseQueue=function(l){Array.isArray(l._promises)&&l._promises.length>0&&E.log("Clearing previous rejected promises from queue."),l._promises=[]},ae.cleanLayout=function(l){var y,A;l||(l={}),l.xaxis1&&(l.xaxis||(l.xaxis=l.xaxis1),delete l.xaxis1),l.yaxis1&&(l.yaxis||(l.yaxis=l.yaxis1),delete l.yaxis1),l.scene1&&(l.scene||(l.scene=l.scene1),delete l.scene1);var T=(e.subplotsRegistry.cartesian||{}).attrRegex,M=(e.subplotsRegistry.polar||{}).attrRegex,f=(e.subplotsRegistry.ternary||{}).attrRegex,u=(e.subplotsRegistry.gl3d||{}).attrRegex,h=Object.keys(l);for(y=0;y<h.length;y++){var o=h[y];if(T&&T.test(o)){var C=l[o];C.anchor&&"free"!==C.anchor&&(C.anchor=n(C.anchor)),C.overlaying&&(C.overlaying=n(C.overlaying)),C.type||(C.isdate?C.type="date":C.islog?C.type="log":!1===C.isdate&&!1===C.islog&&(C.type="linear")),("withzero"===C.autorange||"tozero"===C.autorange)&&(C.autorange=!0,C.rangemode="tozero"),delete C.islog,delete C.isdate,delete C.categories,x(C,"domain")&&delete C.domain,void 0!==C.autotick&&(void 0===C.tickmode&&(C.tickmode=C.autotick?"auto":"linear"),delete C.autotick),r(C)}else if(M&&M.test(o))r(l[o].radialaxis);else if(f&&f.test(o)){var z=l[o];r(z.aaxis),r(z.baxis),r(z.caxis)}else if(u&&u.test(o)){var O=l[o],I=O.cameraposition;if(Array.isArray(I)&&4===I[0].length){var D=I[1],N=I[2],U=k([],I[0]),X=[];for(A=0;A<3;++A)X[A]=D[A]+N*U[2+4*A];O.camera={eye:{x:X[0],y:X[1],z:X[2]},center:{x:D[0],y:D[1],z:D[2]},up:{x:0,y:0,z:1}},delete O.cameraposition}r(O.xaxis),r(O.yaxis),r(O.zaxis)}}var oe=Array.isArray(l.annotations)?l.annotations.length:0;for(y=0;y<oe;y++){var se=l.annotations[y];!E.isPlainObject(se)||(se.ref&&("paper"===se.ref?(se.xref="paper",se.yref="paper"):"data"===se.ref&&(se.xref="x",se.yref="y"),delete se.ref),a(se,"xref"),a(se,"yref"))}var ne=Array.isArray(l.shapes)?l.shapes.length:0;for(y=0;y<ne;y++){var W=l.shapes[y];!E.isPlainObject(W)||(a(W,"xref"),a(W,"yref"))}var G=Array.isArray(l.images)?l.images.length:0;for(y=0;y<G;y++){var $=l.images[y];!E.isPlainObject($)||(a($,"xref"),a($,"yref"))}var V=l.legend;return V&&(V.x>3?(V.x=1.02,V.xanchor="left"):V.x<-2&&(V.x=-.02,V.xanchor="right"),V.y>3?(V.y=1.02,V.yanchor="bottom"):V.y<-2&&(V.y=-.02,V.yanchor="top")),r(l),"rotate"===l.dragmode&&(l.dragmode="orbit"),d.clean(l),l.template&&l.template.layout&&ae.cleanLayout(l.template.layout),l},ae.cleanData=function(l){for(var y=0;y<l.length;y++){var T,A=l[y];if("histogramy"===A.type&&"xbins"in A&&!("ybins"in A)&&(A.ybins=A.xbins,delete A.xbins),A.error_y&&"opacity"in A.error_y){var M=d.defaults,f=A.error_y.color||(i(A,"bar")?d.defaultLine:M[y%M.length]);A.error_y.color=d.addOpacity(d.rgb(f),d.opacity(f)*A.error_y.opacity),delete A.error_y.opacity}if("bardir"in A&&("h"===A.bardir&&(i(A,"bar")||"histogram"===A.type.substr(0,9))&&(A.orientation="h",ae.swapXYData(A)),delete A.bardir),"histogramy"===A.type&&ae.swapXYData(A),("histogramx"===A.type||"histogramy"===A.type)&&(A.type="histogram"),"scl"in A&&!("colorscale"in A)&&(A.colorscale=A.scl,delete A.scl),"reversescl"in A&&!("reversescale"in A)&&(A.reversescale=A.reversescl,delete A.reversescl),A.xaxis&&(A.xaxis=n(A.xaxis,"x")),A.yaxis&&(A.yaxis=n(A.yaxis,"y")),i(A,"gl3d")&&A.scene&&(A.scene=e.subplotsRegistry.gl3d.cleanId(A.scene)),!i(A,"pie-like")&&!i(A,"bar-like"))if(Array.isArray(A.textposition))for(T=0;T<A.textposition.length;T++)A.textposition[T]=b(A.textposition[T]);else A.textposition&&(A.textposition=b(A.textposition));var u=m.getModule(A);if(u&&u.colorbar){var h=u.colorbar.container,o=h?A[h]:A;o&&o.colorscale&&("YIGnBu"===o.colorscale&&(o.colorscale="YlGnBu"),"YIOrRd"===o.colorscale&&(o.colorscale="YlOrRd"))}if("surface"===A.type&&E.isPlainObject(A.contours)){var C=["x","y","z"];for(T=0;T<C.length;T++){var R=A.contours[C[T]];!E.isPlainObject(R)||(R.highlightColor&&(R.highlightcolor=R.highlightColor,delete R.highlightColor),R.highlightWidth&&(R.highlightwidth=R.highlightWidth,delete R.highlightWidth))}}if("candlestick"===A.type||"ohlc"===A.type){var z=!1!==(A.increasing||{}).showlegend,O=!1!==(A.decreasing||{}).showlegend,I=g(A.increasing),F=g(A.decreasing);if(!1!==I&&!1!==F){var D=s(I,F,z,O);D&&(A.name=D)}else(I||F)&&!A.name&&(A.name=I||F)}if(Array.isArray(A.transforms)){var N=A.transforms;for(T=0;T<N.length;T++){var U=N[T];if(E.isPlainObject(U))switch(U.type){case"filter":U.filtersrc&&(U.target=U.filtersrc,delete U.filtersrc),U.calendar&&(U.valuecalendar||(U.valuecalendar=U.calendar),delete U.calendar);break;case"groupby":if(U.styles=U.styles||U.style,U.styles&&!Array.isArray(U.styles)){var X=U.styles,oe=Object.keys(X);U.styles=[];for(var se=0;se<oe.length;se++)U.styles.push({target:oe[se],value:X[oe[se]]})}}}}x(A,"line")&&delete A.line,"marker"in A&&(x(A.marker,"line")&&delete A.marker.line,x(A,"marker")&&delete A.marker),d.clean(A),A.autobinx&&(delete A.autobinx,delete A.xbins),A.autobiny&&(delete A.autobiny,delete A.ybins),r(A),A.colorbar&&r(A.colorbar),A.marker&&A.marker.colorbar&&r(A.marker.colorbar),A.line&&A.line.colorbar&&r(A.line.colorbar),A.aaxis&&r(A.aaxis),A.baxis&&r(A.baxis)}},ae.swapXYData=function(l){var y;if(E.swapAttrs(l,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(l.z)&&Array.isArray(l.z[0])&&(l.transpose?delete l.transpose:l.transpose=!0),l.error_x&&l.error_y){var A=l.error_y,T="copy_ystyle"in A?A.copy_ystyle:!(A.color||A.thickness||A.width);E.swapAttrs(l,["error_?.copy_ystyle"]),T&&E.swapAttrs(l,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof l.hoverinfo){var M=l.hoverinfo.split("+");for(y=0;y<M.length;y++)"x"===M[y]?M[y]="y":"y"===M[y]&&(M[y]="x");l.hoverinfo=M.join("+")}},ae.coerceTraceIndices=function(l,y){if(_(y))return[y];if(!Array.isArray(y)||!y.length)return l.data.map(function(M,f){return f});if(Array.isArray(y)){for(var A=[],T=0;T<y.length;T++)E.isIndex(y[T],l.data.length)?A.push(y[T]):E.warn("trace index (",y[T],") is not a number or is out of bounds");return A}return y},ae.manageArrayContainers=function(l,y,A){var T=l.obj,M=l.parts,f=M.length,u=M[f-1],h=_(u);if(h&&null===y){var o=M.slice(0,f-1).join(".");E.nestedProperty(T,o).get().splice(u,1)}else h&&void 0===l.get()&&void 0===l.get()&&(A[l.astr]=null),l.set(y)};var S=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function p(l){var y=l.search(S);if(y>0)return l.substr(0,y)}ae.hasParent=function(l,y){for(var A=p(y);A;){if(A in l)return!0;A=p(A)}return!1};var w=["x","y","z"];ae.clearAxisTypes=function(l,y,A){for(var T=0;T<y.length;T++)for(var M=l._fullData[T],f=0;f<3;f++){var u=t(l,M,w[f]);if(u&&"log"!==u.type){var h=u._name,o=u._id.substr(1);if("scene"===o.substr(0,5)){if(void 0!==A[o])continue;h=o+"."+h}var C=h+".type";void 0===A[h]&&void 0===A[C]&&E.nestedProperty(l.layout,C).set(null)}}}},{"../components/color":366,"../lib":503,"../plots/cartesian/axis_ids":558,"../plots/plots":619,"../registry":638,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],538:[function(v,ie,ae){"use strict";var _=v("./plot_api");ae._doPlot=_._doPlot,ae.newPlot=_.newPlot,ae.restyle=_.restyle,ae.relayout=_.relayout,ae.redraw=_.redraw,ae.update=_.update,ae._guiRestyle=_._guiRestyle,ae._guiRelayout=_._guiRelayout,ae._guiUpdate=_._guiUpdate,ae._storeDirectGUIEdit=_._storeDirectGUIEdit,ae.react=_.react,ae.extendTraces=_.extendTraces,ae.prependTraces=_.prependTraces,ae.addTraces=_.addTraces,ae.deleteTraces=_.deleteTraces,ae.moveTraces=_.moveTraces,ae.purge=_.purge,ae.addFrames=_.addFrames,ae.deleteFrames=_.deleteFrames,ae.animate=_.animate,ae.setPlotConfig=_.setPlotConfig,ae.toImage=v("./to_image"),ae.validate=v("./validate"),ae.downloadImage=v("../snapshot/download");var k=v("./template_api");ae.makeTemplate=k.makeTemplate,ae.validateTemplate=k.validateTemplate},{"../snapshot/download":640,"./plot_api":540,"./template_api":545,"./to_image":546,"./validate":547}],539:[function(v,ie,ae){"use strict";var _=v("../lib/is_plain_object"),k=v("../lib/noop"),m=v("../lib/loggers"),E=v("../lib/search").sorterAsc,e=v("../registry");ae.containerArrayMatch=v("./container_array_match");var c=ae.isAddVal=function(t){return"add"===t||_(t)},d=ae.isRemoveVal=function(t){return null===t||"remove"===t};ae.applyContainerArrayChanges=function(t,i,a,r,g){var s=i.astr,b=e.getComponentMethod(s,"supplyLayoutDefaults"),x=e.getComponentMethod(s,"draw"),S=e.getComponentMethod(s,"drawOne"),p=r.replot||r.recalc||b===k||x===k,w=t.layout,l=t._fullLayout;if(a[""]){Object.keys(a).length>1&&m.warn("Full array edits are incompatible with other edits",s);var y=a[""][""];if(d(y))i.set(null);else{if(!Array.isArray(y))return m.warn("Unrecognized full array edit value",s,y),!0;i.set(y)}return!p&&(b(w,l),x(t),!0)}var C,R,z,O,I,F,D,A=Object.keys(a).map(Number).sort(E),T=i.get(),M=T||[],f=g(l,s).get(),u=[],h=-1,o=M.length;for(C=0;C<A.length;C++)if(O=a[z=A[C]],I=Object.keys(O),D=c(F=O[""]),z<0||z>M.length-(D?0:1))m.warn("index out of range",s,z);else if(void 0!==F)I.length>1&&m.warn("Insertion & removal are incompatible with edits to the same index.",s,z),d(F)?u.push(z):D?("add"===F&&(F={}),M.splice(z,0,F),f&&f.splice(z,0,{})):m.warn("Unrecognized full object edit value",s,z,F),-1===h&&(h=z);else for(R=0;R<I.length;R++)g(M[z],I[R],s+"["+z+"].").set(O[I[R]]);for(C=u.length-1;C>=0;C--)M.splice(u[C],1),f&&f.splice(u[C],1);if(M.length?T||i.set(M):i.set(null),p)return!1;if(b(w,l),S!==k){var U;if(-1===h)U=A;else{for(o=Math.max(M.length,o),U=[],C=0;C<A.length&&!((z=A[C])>=h);C++)U.push(z);for(C=h;C<o;C++)U.push(C)}for(C=0;C<U.length;C++)S(t,U[C])}else x(t);return!0}},{"../lib/is_plain_object":504,"../lib/loggers":507,"../lib/noop":512,"../lib/search":523,"../registry":638,"./container_array_match":535}],540:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("fast-isnumeric"),m=v("has-hover"),E=v("../lib"),e=E.nestedProperty,c=v("../lib/events"),d=v("../lib/queue"),n=v("../registry"),t=v("./plot_schema"),i=v("../plots/plots"),a=v("../plots/cartesian/axes"),r=v("../components/drawing"),g=v("../components/color"),s=v("../plots/cartesian/graph_interact").initInteractions,b=v("../constants/xmlns_namespaces"),x=v("../plots/cartesian/select").clearSelect,S=v("./plot_config").dfltConfig,p=v("./manage_arrays"),w=v("./helpers"),l=v("./subroutines"),y=v("./edit_types"),A=v("../plots/cartesian/constants").AX_NAME_PATTERN,T=0;function u(Pe){var Ze=Pe._fullLayout;Ze._redrawFromAutoMarginCount?Ze._redrawFromAutoMarginCount--:Pe.emit("plotly_afterplot")}function o(Pe,Ze){try{Pe._fullLayout._paper.style("background",Ze)}catch(Xe){E.error(Xe)}}function C(Pe,Ze){o(Pe,g.combine(Ze,"white"))}function R(Pe,Ze){if(!Pe._context){Pe._context=E.extendDeep({},S);var Xe=_.select("base");Pe._context._baseUrl=Xe.size()&&Xe.attr("href")?window.location.href.split("#")[0]:""}var kt,Tt,Xt,rt=Pe._context;if(Ze){for(Tt=Object.keys(Ze),kt=0;kt<Tt.length;kt++)"editable"!==(Xt=Tt[kt])&&"edits"!==Xt&&Xt in rt&&(rt[Xt]="setBackground"===Xt&&"opaque"===Ze[Xt]?C:Ze[Xt]);Ze.plot3dPixelRatio&&!rt.plotGlPixelRatio&&(rt.plotGlPixelRatio=rt.plot3dPixelRatio);var ar=Ze.editable;if(void 0!==ar)for(rt.editable=ar,Tt=Object.keys(rt.edits),kt=0;kt<Tt.length;kt++)rt.edits[Tt[kt]]=ar;if(Ze.edits)for(Tt=Object.keys(Ze.edits),kt=0;kt<Tt.length;kt++)(Xt=Tt[kt])in rt.edits&&(rt.edits[Xt]=Ze.edits[Xt]);rt._exportedPlot=Ze._exportedPlot}rt.staticPlot&&(rt.editable=!1,rt.edits={},rt.autosizable=!1,rt.scrollZoom=!1,rt.doubleClick=!1,rt.showTips=!1,rt.showLink=!1,rt.displayModeBar=!1),"hover"===rt.displayModeBar&&!m&&(rt.displayModeBar=!0),("transparent"===rt.setBackground||"function"!=typeof rt.setBackground)&&(rt.setBackground=o),rt._hasZeroHeight=rt._hasZeroHeight||0===Pe.clientHeight,rt._hasZeroWidth=rt._hasZeroWidth||0===Pe.clientWidth;var Ut=rt.scrollZoom,Jt=rt._scrollZoom={};if(!0===Ut)Jt.cartesian=1,Jt.gl3d=1,Jt.geo=1,Jt.mapbox=1;else if("string"==typeof Ut){var nr=Ut.split("+");for(kt=0;kt<nr.length;kt++)Jt[nr[kt]]=1}else!1!==Ut&&(Jt.gl3d=1,Jt.geo=1,Jt.mapbox=1)}function I(Pe,Ze){var kt,Tt,Xe=Ze+1,rt=[];for(kt=0;kt<Pe.length;kt++)rt.push((Tt=Pe[kt])<0?Xe+Tt:Tt);return rt}function F(Pe,Ze,Xe){var rt,kt;for(rt=0;rt<Ze.length;rt++){if((kt=Ze[rt])!==parseInt(kt,10))throw new Error("all values in "+Xe+" must be integers");if(kt>=Pe.data.length||kt<-Pe.data.length)throw new Error(Xe+" must be valid indices for gd.data.");if(Ze.indexOf(kt,rt+1)>-1||kt>=0&&Ze.indexOf(-Pe.data.length+kt)>-1||kt<0&&Ze.indexOf(Pe.data.length+kt)>-1)throw new Error("each index in "+Xe+" must be unique.")}}function D(Pe,Ze,Xe){if(!Array.isArray(Pe.data))throw new Error("gd.data must be an array.");if(void 0===Ze)throw new Error("currentIndices is a required argument.");if(Array.isArray(Ze)||(Ze=[Ze]),F(Pe,Ze,"currentIndices"),void 0!==Xe&&!Array.isArray(Xe)&&(Xe=[Xe]),void 0!==Xe&&F(Pe,Xe,"newIndices"),void 0!==Xe&&Ze.length!==Xe.length)throw new Error("current and new indices must be of equal length.")}function oe(Pe,Ze,Xe,rt,kt){!function U(Pe,Ze,Xe,rt){var kt=E.isPlainObject(rt);if(!Array.isArray(Pe.data))throw new Error("gd.data must be an array");if(!E.isPlainObject(Ze))throw new Error("update must be a key:value object");if(void 0===Xe)throw new Error("indices must be an integer or array of integers");for(var Tt in F(Pe,Xe,"indices"),Ze){if(!Array.isArray(Ze[Tt])||Ze[Tt].length!==Xe.length)throw new Error("attribute "+Tt+" must be an array of length equal to indices array length");if(kt&&(!(Tt in rt)||!Array.isArray(rt[Tt])||rt[Tt].length!==Ze[Tt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(Pe,Ze,Xe,rt);for(var Tt=function X(Pe,Ze,Xe,rt){var ar,Ut,Jt,nr,kt=E.isPlainObject(rt),Tt=[];for(var rr in Array.isArray(Xe)||(Xe=[Xe]),Xe=I(Xe,Pe.data.length-1),Ze)for(var br=0;br<Xe.length;br++){if(ar=(Ut=e(Pe.data[Xe[br]],rr)).get(),!E.isArrayOrTypedArray(Jt=Ze[rr][br]))throw new Error("attribute: "+rr+" index: "+br+" must be an array");if(!E.isArrayOrTypedArray(ar))throw new Error("cannot extend missing or non-array attribute: "+rr);if(ar.constructor!==Jt.constructor)throw new Error("cannot extend array with an array of a different type: "+rr);k(nr=kt?rt[rr][br]:rt)||(nr=-1),Tt.push({prop:Ut,target:ar,insert:Jt,maxp:Math.floor(nr)})}return Tt}(Pe,Ze,Xe,rt),Xt={},ar={},Ut=0;Ut<Tt.length;Ut++){var Jt=Tt[Ut].prop,rr=kt(Tt[Ut].target,Tt[Ut].insert,Tt[Ut].maxp);Jt.set(rr[0]),Array.isArray(Xt[Jt.astr])||(Xt[Jt.astr]=[]),Xt[Jt.astr].push(rr[1]),Array.isArray(ar[Jt.astr])||(ar[Jt.astr]=[]),ar[Jt.astr].push(Tt[Ut].target.length)}return{update:Xt,maxPoints:ar}}function se(Pe,Ze){var Xe=new Pe.constructor(Pe.length+Ze.length);return Xe.set(Pe),Xe.set(Ze,Pe.length),Xe}function H(Pe,Ze,Xe,rt){Pe=E.getGraphDiv(Pe),w.clearPromiseQueue(Pe);var kt={};if("string"==typeof Ze)kt[Ze]=Xe;else{if(!E.isPlainObject(Ze))return E.warn("Restyle fail.",Ze,Xe,rt),Promise.reject();kt=E.extendFlat({},Ze),void 0===rt&&(rt=Xe)}Object.keys(kt).length&&(Pe.changed=!0);var Tt=w.coerceTraceIndices(Pe,rt),Xt=J(Pe,kt,Tt),ar=Xt.flags;ar.calc&&(Pe.calcdata=void 0),ar.clearAxisTypes&&w.clearAxisTypes(Pe,Tt,{});var Ut=[];ar.fullReplot?Ut.push(ae._doPlot):(Ut.push(i.previousPromises),i.supplyDefaults(Pe),ar.markerSize&&(i.doCalcdata(Pe),ge(Ut)),ar.style&&Ut.push(l.doTraceStyle),ar.colorbars&&Ut.push(l.doColorBars),Ut.push(u)),Ut.push(i.rehover,i.redrag),d.add(Pe,H,[Pe,Xt.undoit,Xt.traces],H,[Pe,Xt.redoit,Xt.traces]);var Jt=E.syncOrAsync(Ut,Pe);return(!Jt||!Jt.then)&&(Jt=Promise.resolve()),Jt.then(function(){return Pe.emit("plotly_restyle",Xt.eventData),Pe})}function q(Pe){return void 0===Pe?null:Pe}function K(Pe,Ze){return Ze?function(Xe,rt,kt){var Tt=e(Xe,rt),Xt=Tt.set;return Tt.set=function(ar){Y((kt||"")+rt,Tt.get(),ar,Pe),Xt(ar)},Tt}:e}function Y(Pe,Ze,Xe,rt){if(Array.isArray(Ze)||Array.isArray(Xe))for(var kt=Array.isArray(Ze)?Ze:[],Tt=Array.isArray(Xe)?Xe:[],Xt=Math.max(kt.length,Tt.length),ar=0;ar<Xt;ar++)Y(Pe+"["+ar+"]",kt[ar],Tt[ar],rt);else if(E.isPlainObject(Ze)||E.isPlainObject(Xe)){var Ut=E.isPlainObject(Ze)?Ze:{},Jt=E.isPlainObject(Xe)?Xe:{},nr=E.extendFlat({},Ut,Jt);for(var rr in nr)Y(Pe+"."+rr,Ut[rr],Jt[rr],rt)}else void 0===rt[Pe]&&(rt[Pe]=q(Ze))}function J(Pe,Ze,Xe){var Jt,rt=Pe._fullLayout,kt=Pe._fullData,Tt=Pe.data,Xt=rt._guiEditing,ar=K(rt._preGUI,Xt),Ut=E.extendDeepAll({},Ze);j(Ze);var Hr,nr=y.traceFlags(),rr={},br={};function on(){return Xe.map(function(){})}function jr(Qt){var ir=a.id2name(Qt);-1===Hr.indexOf(ir)&&Hr.push(ir)}function et(Qt){return"LAYOUT"+Qt+".autorange"}function Yt(Qt){return"LAYOUT"+Qt+".range"}function qt(Qt){for(var ir=Qt;ir<kt.length;ir++)if(kt[ir]._input===Tt[Qt])return kt[ir]}function Vt(Qt,ir,Or){if(Array.isArray(Qt))Qt.forEach(function(Zr){Vt(Zr,ir,Or)});else if(!(Qt in Ze)&&!w.hasParent(Ze,Qt)){var qr;if("LAYOUT"===Qt.substr(0,6))qr=ar(Pe.layout,Qt.replace("LAYOUT",""));else{var Ir=Xe[Or];qr=K(rt._tracePreGUI[qt(Ir)._fullInput.uid],Xt)(Tt[Ir],Qt)}Qt in br||(br[Qt]=on()),void 0===br[Qt][Or]&&(br[Qt][Or]=q(qr.get())),void 0!==ir&&qr.set(ir)}}function Tr(Qt){return function(ir){return kt[ir][Qt]}}function tt(Qt){return function(ir,Or){return!1===ir?kt[Xe[Or]][Qt]:null}}for(var je in Ze){if(w.hasParent(Ze,je))throw new Error("cannot set "+je+" and a parent attribute simultaneously");var ht,Me,Se,Je,We,st,ct=Ze[je];if(("autobinx"===je||"autobiny"===je)&&(je=je.charAt(je.length-1)+"bins",ct=Array.isArray(ct)?ct.map(tt(je)):!1===ct?Xe.map(Tr(je)):null),rr[je]=ct,"LAYOUT"!==je.substr(0,6)){for(br[je]=on(),Jt=0;Jt<Xe.length;Jt++)if(ht=Tt[Xe[Jt]],Me=qt(Xe[Jt]),Je=(Se=K(rt._tracePreGUI[Me._fullInput.uid],Xt)(ht,je)).get(),void 0!==(We=Array.isArray(ct)?ct[Jt%ct.length]:ct)){var pt=Se.parts[Se.parts.length-1],Ct=je.substr(0,je.length-pt.length-1),Dt=Ct?Ct+".":"",Gt=Ct?e(Me,Ct).get():Me;if((st=t.getTraceValObject(Me,Se.parts))&&st.impliedEdits&&null!==We)for(var fr in st.impliedEdits)Vt(E.relativeAttr(je,fr),st.impliedEdits[fr],Jt);else if("thicknessmode"!==pt&&"lenmode"!==pt||Je===We||"fraction"!==We&&"pixels"!==We||!Gt){if("type"===je&&("pie"===We!=("pie"===Je)||"funnelarea"===We!=("funnelarea"===Je))){var mr="x",wr="y";("bar"===We||"bar"===Je)&&"h"===ht.orientation&&(mr="y",wr="x"),E.swapAttrs(ht,["?","?src"],"labels",mr),E.swapAttrs(ht,["d?","?0"],"label",mr),E.swapAttrs(ht,["?","?src"],"values",wr),"pie"===Je||"funnelarea"===Je?(e(ht,"marker.color").set(e(ht,"marker.colors").get()),rt._pielayer.selectAll("g.trace").remove()):n.traceIs(ht,"cartesian")&&e(ht,"marker.colors").set(e(ht,"marker.color").get())}}else{var pr=rt._size,Jr=Gt.orient,Lr="top"===Jr||"bottom"===Jr;if("thicknessmode"===pt){var Ar=Lr?pr.h:pr.w;Vt(Dt+"thickness",Gt.thickness*("fraction"===We?1/Ar:Ar),Jt)}else{var en=Lr?pr.w:pr.h;Vt(Dt+"len",Gt.len*("fraction"===We?1/en:en),Jt)}}if(br[je][Jt]=q(Je),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(je)){if("orientation"===je){Se.set(We);var Kr=ht.x&&!ht.y?"h":"v";if((Se.get()||Kr)===Me.orientation)continue}else"orientationaxes"===je&&(ht.orientation={v:"h",h:"v"}[Me.orientation]);w.swapXYData(ht),nr.calc=nr.clearAxisTypes=!0}else-1!==i.dataArrayContainers.indexOf(Se.parts[0])?(w.manageArrayContainers(Se,We,br),nr.calc=!0):(st?st.arrayOk&&!n.traceIs(Me,"regl")&&(E.isArrayOrTypedArray(We)||E.isArrayOrTypedArray(Je))?nr.calc=!0:y.update(nr,st):nr.calc=!0,Se.set(We))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(je)&&a.swap(Pe,Xe),"orientationaxes"===je){var Cr=e(Pe.layout,"hovermode"),it=Cr.get();"x"===it?Cr.set("y"):"y"===it?Cr.set("x"):"x unified"===it?Cr.set("y unified"):"y unified"===it&&Cr.set("x unified")}if(-1!==["orientation","type"].indexOf(je)){for(Hr=[],Jt=0;Jt<Xe.length;Jt++){var It=Tt[Xe[Jt]];n.traceIs(It,"cartesian")&&(jr(It.xaxis||"x"),jr(It.yaxis||"y"))}Vt(Hr.map(et),!0,0),Vt(Hr.map(Yt),[0,1],0)}}else Se=ar(Pe.layout,je.replace("LAYOUT","")),br[je]=[q(Se.get())],Se.set(Array.isArray(ct)?ct[0]:ct),nr.calc=!0}return(nr.calc||nr.plot)&&(nr.fullReplot=!0),{flags:nr,undoit:br,redoit:rr,traces:Xe,eventData:E.extendDeepNoArrays([],[Ut,Xe])}}function j(Pe){var kt,Tt,Xt,Ze=E.counterRegex("axis",".title",!1,!1),Xe=/colorbar\.title$/,rt=Object.keys(Pe);for(kt=0;kt<rt.length;kt++)Xt=Pe[Tt=rt[kt]],"title"!==Tt&&!Ze.test(Tt)&&!Xe.test(Tt)||"string"!=typeof Xt&&"number"!=typeof Xt?Tt.indexOf("titlefont")>-1&&-1===Tt.indexOf("grouptitlefont")?ar(Tt,Tt.replace("titlefont","title.font")):Tt.indexOf("titleposition")>-1?ar(Tt,Tt.replace("titleposition","title.position")):Tt.indexOf("titleside")>-1?ar(Tt,Tt.replace("titleside","title.side")):Tt.indexOf("titleoffset")>-1&&ar(Tt,Tt.replace("titleoffset","title.offset")):ar(Tt,Tt.replace("title","title.text"));function ar(Ut,Jt){Pe[Jt]=Pe[Ut],delete Pe[Ut]}}function re(Pe,Ze,Xe){Pe=E.getGraphDiv(Pe),w.clearPromiseQueue(Pe);var rt={};if("string"==typeof Ze)rt[Ze]=Xe;else{if(!E.isPlainObject(Ze))return E.warn("Relayout fail.",Ze,Xe),Promise.reject();rt=E.extendFlat({},Ze)}Object.keys(rt).length&&(Pe.changed=!0);var kt=we(Pe,rt),Tt=kt.flags;Tt.calc&&(Pe.calcdata=void 0);var Xt=[i.previousPromises];Tt.layoutReplot?Xt.push(l.layoutReplot):Object.keys(rt).length&&(le(Pe,Tt,kt)||i.supplyDefaults(Pe),Tt.legend&&Xt.push(l.doLegend),Tt.layoutstyle&&Xt.push(l.layoutStyles),Tt.axrange&&ge(Xt,kt.rangesAltered),Tt.ticks&&Xt.push(l.doTicksRelayout),Tt.modebar&&Xt.push(l.doModeBar),Tt.camera&&Xt.push(l.doCamera),Tt.colorbars&&Xt.push(l.doColorBars),Xt.push(u)),Xt.push(i.rehover,i.redrag),d.add(Pe,re,[Pe,kt.undoit],re,[Pe,kt.redoit]);var ar=E.syncOrAsync(Xt,Pe);return(!ar||!ar.then)&&(ar=Promise.resolve(Pe)),ar.then(function(){return Pe.emit("plotly_relayout",kt.eventData),Pe})}function le(Pe,Ze,Xe){var rt=Pe._fullLayout;if(!Ze.axrange)return!1;for(var kt in Ze)if("axrange"!==kt&&Ze[kt])return!1;for(var Tt in Xe.rangesAltered){var Xt=a.id2name(Tt),ar=Pe.layout[Xt],Ut=rt[Xt];if(Ut.autorange=ar.autorange,ar.range&&(Ut.range=ar.range.slice()),Ut.cleanRange(),Ut._matchGroup)for(var Jt in Ut._matchGroup)if(Jt!==Tt){var nr=rt[a.id2name(Jt)];nr.autorange=Ut.autorange,nr.range=Ut.range.slice(),nr._input.range=Ut.range.slice()}}return!0}function ge(Pe,Ze){Pe.push(x,l.doAutoRangeAndConstraints,Ze?function(rt){var kt=[],Tt=!0;for(var Xt in Ze){var ar=a.getFromId(rt,Xt);if(kt.push(Xt),-1!==(ar.ticklabelposition||"").indexOf("inside")&&ar._anchorAxis&&kt.push(ar._anchorAxis._id),ar._matchGroup)for(var Ut in ar._matchGroup)Ze[Ut]||kt.push(Ut);ar.automargin&&(Tt=!1)}return a.draw(rt,kt,{skipTitle:Tt})}:function(rt){return a.draw(rt,"redraw")},l.drawData,l.finalDraw)}var pe=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,xe=/^[xyz]axis[0-9]*\.autorange$/,ke=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function we(Pe,Ze){var nr,rr,br,Xe=Pe.layout,rt=Pe._fullLayout,Tt=K(rt._preGUI,rt._guiEditing),Xt=Object.keys(Ze),ar=a.list(Pe),Ut=E.extendDeepAll({},Ze),Jt={};for(j(Ze),Xt=Object.keys(Ze),rr=0;rr<Xt.length;rr++)if(0===Xt[rr].indexOf("allaxes")){for(br=0;br<ar.length;br++){var Hr=ar[br]._id.substr(1),on=-1!==Hr.indexOf("scene")?Hr+".":"",jr=Xt[rr].replace("allaxes",on+ar[br]._name);Ze[jr]||(Ze[jr]=Ze[Xt[rr]])}delete Ze[Xt[rr]]}var et=y.layoutFlags(),Yt={},qt={};function Vt(Ir,kr){if(Array.isArray(Ir))Ir.forEach(function(An){Vt(An,kr)});else if(!(Ir in Ze)&&!w.hasParent(Ze,Ir)){var Zr=Tt(Xe,Ir);Ir in qt||(qt[Ir]=q(Zr.get())),void 0!==kr&&Zr.set(kr)}}var tt,Tr={};function je(Ir){var kr=a.name2id(Ir.split(".")[0]);return Tr[kr]=1,kr}for(var ct in Ze){if(w.hasParent(Ze,ct))throw new Error("cannot set "+ct+" and a parent attribute simultaneously");for(var ht=Tt(Xe,ct),Me=Ze[ct],Je=ht.parts.length-1;Je>0&&"string"!=typeof ht.parts[Je];)Je--;var We=ht.parts[Je],st=ht.parts[Je-1]+"."+We,lt=ht.parts.slice(0,Je).join("."),pt=e(Pe.layout,lt).get(),Ct=e(rt,lt).get(),Dt=ht.get();if(void 0!==Me){Yt[ct]=Me,qt[ct]="reverse"===We?Me:q(Dt);var Gt=t.getLayoutValObject(rt,ht.parts);if(Gt&&Gt.impliedEdits&&null!==Me)for(var fr in Gt.impliedEdits)Vt(E.relativeAttr(ct,fr),Gt.impliedEdits[fr]);if(-1!==["width","height"].indexOf(ct))if(Me){Vt("autosize",null);var pr="height"===ct?"width":"height";Vt(pr,rt[pr])}else rt[ct]=Pe._initialAutoSize[ct];else if("autosize"===ct)Vt("width",Me?null:rt.width),Vt("height",Me?null:rt.height);else if(st.match(pe))je(st),e(rt,lt+"._inputRange").set(null);else if(st.match(xe)){je(st),e(rt,lt+"._inputRange").set(null);var Jr=e(rt,lt).get();Jr._inputDomain&&(Jr._input.domain=Jr._inputDomain.slice())}else st.match(ke)&&e(rt,lt+"._inputDomain").set(null);if("type"===We){tt=pt;var Lr="linear"===Ct.type&&"log"===Me;if(Lr||"log"===Ct.type&&"linear"===Me){if(tt&&tt.range)if(Ct.autorange)Lr&&(tt.range=tt.range[1]>tt.range[0]?[1,2]:[2,1]);else{var en=tt.range[0],mr=tt.range[1];Lr?(en<=0&&mr<=0&&Vt(lt+".autorange",!0),en<=0?en=mr/1e6:mr<=0&&(mr=en/1e6),Vt(lt+".range[0]",Math.log(en)/Math.LN10),Vt(lt+".range[1]",Math.log(mr)/Math.LN10)):(Vt(lt+".range[0]",Math.pow(10,en)),Vt(lt+".range[1]",Math.pow(10,mr)))}else Vt(lt+".autorange",!0);Array.isArray(rt._subplots.polar)&&rt._subplots.polar.length&&rt[ht.parts[0]]&&"radialaxis"===ht.parts[1]&&delete rt[ht.parts[0]]._subplot.viewInitial["radialaxis.range"],n.getComponentMethod("annotations","convertCoords")(Pe,Ct,Me,Vt),n.getComponentMethod("images","convertCoords")(Pe,Ct,Me,Vt)}else Vt(lt+".autorange",!0),Vt(lt+".range",null);e(rt,lt+"._inputRange").set(null)}else if(We.match(A)){var wr=e(rt,ct).get(),Wr=(Me||{}).type;(!Wr||"-"===Wr)&&(Wr="linear"),n.getComponentMethod("annotations","convertCoords")(Pe,wr,Wr,Vt),n.getComponentMethod("images","convertCoords")(Pe,wr,Wr,Vt)}var Kr=p.containerArrayMatch(ct);if(Kr){nr=Kr.array;var Cr=Kr.property,it=Gt||{editType:"calc"};""!==(rr=Kr.index)&&""===Cr&&(p.isAddVal(Me)?qt[ct]=null:p.isRemoveVal(Me)?qt[ct]=(e(Xe,nr).get()||[])[rr]:E.warn("unrecognized full object value",Ze)),y.update(et,it),Jt[nr]||(Jt[nr]={});var It=Jt[nr][rr];It||(It=Jt[nr][rr]={}),It[Cr]=Me,delete Ze[ct]}else"reverse"===We?(pt.range?pt.range.reverse():(Vt(lt+".autorange",!0),pt.range=[1,0]),Ct.autorange?et.calc=!0:et.plot=!0):("dragmode"===ct&&(!1===Me&&!1!==Dt||!1!==Me&&!1===Dt)||rt._has("scatter-like")&&rt._has("regl")&&"dragmode"===ct&&("lasso"===Me||"select"===Me)&&"lasso"!==Dt&&"select"!==Dt||rt._has("gl2d")?et.plot=!0:Gt?y.update(et,Gt):et.calc=!0,ht.set(Me))}}for(nr in Jt)p.applyContainerArrayChanges(Pe,Tt(Xe,nr),Jt[nr],et,Tt)||(et.plot=!0);for(var ir in Tr){var Or=(tt=a.getFromId(Pe,ir))&&tt._constraintGroup;if(Or)for(var qr in et.calc=!0,Or)Tr[qr]||(a.getFromId(Pe,qr)._constraintShrinkable=!0)}return(de(Pe)||Ze.height||Ze.width)&&(et.plot=!0),(et.plot||et.calc)&&(et.layoutReplot=!0),{flags:et,rangesAltered:Tr,undoit:qt,redoit:Yt,eventData:Ut}}function de(Pe){var Ze=Pe._fullLayout,Xe=Ze.width,rt=Ze.height;return Pe.layout.autosize&&i.plotAutoSize(Pe,Pe.layout,Ze),Ze.width!==Xe||Ze.height!==rt}function be(Pe,Ze,Xe,rt){Pe=E.getGraphDiv(Pe),w.clearPromiseQueue(Pe),E.isPlainObject(Ze)||(Ze={}),E.isPlainObject(Xe)||(Xe={}),Object.keys(Ze).length&&(Pe.changed=!0),Object.keys(Xe).length&&(Pe.changed=!0);var kt=w.coerceTraceIndices(Pe,rt),Tt=J(Pe,E.extendFlat({},Ze),kt),Xt=Tt.flags,ar=we(Pe,E.extendFlat({},Xe)),Ut=ar.flags;(Xt.calc||Ut.calc)&&(Pe.calcdata=void 0),Xt.clearAxisTypes&&w.clearAxisTypes(Pe,kt,Xe);var Jt=[];Ut.layoutReplot?Jt.push(l.layoutReplot):Xt.fullReplot?Jt.push(ae._doPlot):(Jt.push(i.previousPromises),le(Pe,Ut,ar)||i.supplyDefaults(Pe),Xt.style&&Jt.push(l.doTraceStyle),(Xt.colorbars||Ut.colorbars)&&Jt.push(l.doColorBars),Ut.legend&&Jt.push(l.doLegend),Ut.layoutstyle&&Jt.push(l.layoutStyles),Ut.axrange&&ge(Jt,ar.rangesAltered),Ut.ticks&&Jt.push(l.doTicksRelayout),Ut.modebar&&Jt.push(l.doModeBar),Ut.camera&&Jt.push(l.doCamera),Jt.push(u)),Jt.push(i.rehover,i.redrag),d.add(Pe,be,[Pe,Tt.undoit,ar.undoit,Tt.traces],be,[Pe,Tt.redoit,ar.redoit,Tt.traces]);var nr=E.syncOrAsync(Jt,Pe);return(!nr||!nr.then)&&(nr=Promise.resolve(Pe)),nr.then(function(){return Pe.emit("plotly_update",{data:Tt.eventData,layout:ar.eventData}),Pe})}function Le(Pe){return function(Xe){Xe._fullLayout._guiEditing=!0;var rt=Pe.apply(null,arguments);return Xe._fullLayout._guiEditing=!1,rt}}var De=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],ye=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Ce(Pe,Ze){for(var Xe=0;Xe<Ze.length;Xe++){var rt=Ze[Xe],kt=Pe.match(rt.pattern);if(kt){var Tt=kt[1]||"";return{head:Tt,tail:Pe.substr(Tt.length+1),attr:rt.attr}}}}function Fe(Pe,Ze){var Xe=e(Ze,Pe).get();if(void 0!==Xe)return Xe;var rt=Pe.split(".");for(rt.pop();rt.length>1;)if(rt.pop(),void 0!==(Xe=e(Ze,rt.join(".")+".uirevision").get()))return Xe;return Ze.uirevision}function Ke(Pe,Ze){for(var Xe=0;Xe<Ze.length;Xe++)if(Ze[Xe]._fullInput.uid===Pe)return Xe;return-1}function Ue(Pe,Ze,Xe){for(var rt=0;rt<Ze.length;rt++)if(Ze[rt].uid===Pe)return rt;return!Ze[Xe]||Ze[Xe].uid?-1:Xe}function Be(Pe,Ze){var Xe=E.isPlainObject(Pe),rt=Array.isArray(Pe);return Xe||rt?(Xe&&E.isPlainObject(Ze)||rt&&Array.isArray(Ze))&&JSON.stringify(Pe)===JSON.stringify(Ze):Pe===Ze}function St(Pe,Ze,Xe,rt){var kt,Tt,Xt,ar=rt.getValObject,Ut=rt.flags,Jt=rt.immutable,nr=rt.inArray,rr=rt.arrayIndex;function br(){var lt=kt.editType;nr&&-1!==lt.indexOf("arraydraw")?E.pushUnique(Ut.arrays[nr],rr):(y.update(Ut,kt),"none"!==lt&&Ut.nChanges++,rt.transition&&kt.anim&&Ut.nChangesAnim++,(pe.test(Xt)||xe.test(Xt))&&(Ut.rangesAltered[Xe[0]]=1),ke.test(Xt)&&e(Ze,"_inputDomain").set(null),"datarevision"===Tt&&(Ut.newDataRevision=1))}function Hr(lt){return"data_array"===lt.valType||lt.arrayOk}for(Tt in Pe){if(Ut.calc&&!rt.transition)return;var on=Pe[Tt],jr=Ze[Tt],et=Xe.concat(Tt);if(Xt=et.join("."),"_"!==Tt.charAt(0)&&"function"!=typeof on&&on!==jr){if(("tick0"===Tt||"dtick"===Tt)&&"geo"!==Xe[0]){var Yt=Ze.tickmode;if("auto"===Yt||"array"===Yt||!Yt)continue}if(("range"!==Tt||!Ze.autorange)&&("zmin"!==Tt&&"zmax"!==Tt||"contourcarpet"!==Ze.type)&&(kt=ar(et))&&(!kt._compareAsJSON||JSON.stringify(on)!==JSON.stringify(jr))){var Vt,qt=kt.valType,Tr=Hr(kt),tt=Array.isArray(on),je=Array.isArray(jr);if(tt&&je){var ct="_input_"+Tt,ht=Pe[ct],Me=Ze[ct];if(Array.isArray(ht)&&ht===Me)continue}if(void 0===jr)Tr&&tt?Ut.calc=!0:br();else if(kt._isLinkedToArray){var Se=[],Je=!1;nr||(Ut.arrays[Tt]=Se);var We=Math.min(on.length,jr.length),st=Math.max(on.length,jr.length);if(We!==st){if("arraydraw"!==kt.editType){br();continue}Je=!0}for(Vt=0;Vt<We;Vt++)St(on[Vt],jr[Vt],et.concat(Vt),E.extendFlat({inArray:Tt,arrayIndex:Vt},rt));if(Je)for(Vt=We;Vt<st;Vt++)Se.push(Vt)}else!qt&&E.isPlainObject(on)?St(on,jr,et,rt):Tr?tt&&je?(Jt&&(Ut.calc=!0),(Jt||rt.newDataRevision)&&br()):tt!==je?Ut.calc=!0:br():tt&&je?(on.length!==jr.length||String(on)!==String(jr))&&br():br()}}}for(Tt in Ze)if(!(Tt in Pe)&&"_"!==Tt.charAt(0)&&"function"!=typeof Ze[Tt]){if(Hr(kt=ar(Xe.concat(Tt)))&&Array.isArray(Ze[Tt]))return void(Ut.calc=!0);br()}}function Bt(Pe,Ze){var Xe;for(Xe in Pe)if("_"!==Xe.charAt(0)){var rt=Pe[Xe],kt=Ze[Xe];if(rt!==kt)if(E.isPlainObject(rt)&&E.isPlainObject(kt)){if(Bt(rt,kt))return!0}else{if(!Array.isArray(rt)||!Array.isArray(kt))return!0;if(rt.length!==kt.length)return!0;for(var Tt=0;Tt<rt.length;Tt++)if(rt[Tt]!==kt[Tt]){if(!E.isPlainObject(rt[Tt])||!E.isPlainObject(kt[Tt]))return!0;if(Bt(rt[Tt],kt[Tt]))return!0}}}}function vt(Pe){var Ze=Pe._fullLayout,Xe=Pe.getBoundingClientRect();if(!E.equalDomRects(Xe,Ze._lastBBox)){var rt=Ze._invTransform=E.inverseTransformMatrix(E.getFullTransformMatrix(Pe));Ze._invScaleX=Math.sqrt(rt[0][0]*rt[0][0]+rt[0][1]*rt[0][1]+rt[0][2]*rt[0][2]),Ze._invScaleY=Math.sqrt(rt[1][0]*rt[1][0]+rt[1][1]*rt[1][1]+rt[1][2]*rt[1][2]),Ze._lastBBox=Xe}}ae.animate=function Zt(Pe,Ze,Xe){if(Pe=E.getGraphDiv(Pe),!E.isPlotDiv(Pe))throw new Error("This element is not a Plotly plot: "+Pe+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var rt=Pe._transitionData;rt._frameQueue||(rt._frameQueue=[]);var kt=(Xe=i.supplyAnimationDefaults(Xe)).transition,Tt=Xe.frame;function Xt(Jt){return Array.isArray(kt)?Jt>=kt.length?kt[0]:kt[Jt]:kt}function ar(Jt){return Array.isArray(Tt)?Jt>=Tt.length?Tt[0]:Tt[Jt]:Tt}function Ut(Jt,nr){var rr=0;return function(){if(Jt&&++rr===nr)return Jt()}}return void 0===rt._frameWaitingCnt&&(rt._frameWaitingCnt=0),new Promise(function(Jt,nr){var et=0;function Yt(We){return We.transitionOpts=Array.isArray(kt)?et>=kt.length?kt[et]:kt[0]:kt,et++,We}var qt,Vt,Tr=[],tt=null==Ze,je=Array.isArray(Ze);if(tt||je||!E.isPlainObject(Ze)){if(tt||-1!==["string","number"].indexOf(typeof Ze))for(qt=0;qt<rt._frames.length;qt++)(Vt=rt._frames[qt])&&(tt||String(Vt.group)===String(Ze))&&Tr.push({type:"byname",name:String(Vt.name),data:Yt({name:Vt.name})});else if(je)for(qt=0;qt<Ze.length;qt++){var ht=Ze[qt];-1!==["number","string"].indexOf(typeof ht)?(ht=String(ht),Tr.push({type:"byname",name:ht,data:Yt({name:ht})})):E.isPlainObject(ht)&&Tr.push({type:"object",data:Yt(E.extendFlat({},ht))})}}else Tr.push({type:"object",data:Yt(E.extendFlat({},Ze))});for(qt=0;qt<Tr.length;qt++)if("byname"===(Vt=Tr[qt]).type&&!rt._frameHash[Vt.data.name])return E.warn('animate failure: frame not found: "'+Vt.data.name+'"'),void nr();-1!==["next","immediate"].indexOf(Xe.mode)&&function rr(){if(0!==rt._frameQueue.length){for(;rt._frameQueue.length;){var We=rt._frameQueue.pop();We.onInterrupt&&We.onInterrupt()}Pe.emit("plotly_animationinterrupted",[])}}(),"reverse"===Xe.direction&&Tr.reverse();var Me=Pe._fullLayout._currentFrame;if(Me&&Xe.fromcurrent){var Se=-1;for(qt=0;qt<Tr.length;qt++)if("byname"===(Vt=Tr[qt]).type&&Vt.name===Me){Se=qt;break}if(Se>0&&Se<Tr.length-1){var Je=[];for(qt=0;qt<Tr.length;qt++)Vt=Tr[qt],("byname"!==Tr[qt].type||qt>Se)&&Je.push(Vt);Tr=Je}}Tr.length>0?function br(We){if(0!==We.length){for(var st=0;st<We.length;st++){var lt;lt="byname"===We[st].type?i.computeFrame(Pe,We[st].name):We[st].data;var pt=ar(st),Ct=Xt(st);Ct.duration=Math.min(Ct.duration,pt.duration);var Dt={frame:lt,name:We[st].name,frameOpts:pt,transitionOpts:Ct};st===We.length-1&&(Dt.onComplete=Ut(Jt,2),Dt.onInterrupt=nr),rt._frameQueue.push(Dt)}"immediate"===Xe.mode&&(rt._lastFrameAt=-1/0),rt._animationRaf||function jr(){Pe.emit("plotly_animating"),rt._lastFrameAt=-1/0,rt._timeToNext=0,rt._runningTransitions=0,rt._currentFrame=null;var We=function(){rt._animationRaf=window.requestAnimationFrame(We),Date.now()-rt._lastFrameAt>rt._timeToNext&&function on(){rt._currentFrame&&rt._currentFrame.onComplete&&rt._currentFrame.onComplete();var We=rt._currentFrame=rt._frameQueue.shift();if(We){var st=We.name?We.name.toString():null;Pe._fullLayout._currentFrame=st,rt._lastFrameAt=Date.now(),rt._timeToNext=We.frameOpts.duration,i.transition(Pe,We.frame.data,We.frame.layout,w.coerceTraceIndices(Pe,We.frame.traces),We.frameOpts,We.transitionOpts).then(function(){We.onComplete&&We.onComplete()}),Pe.emit("plotly_animatingframe",{name:st,frame:We.frame,animation:{frame:We.frameOpts,transition:We.transitionOpts}})}else!function Hr(){Pe.emit("plotly_animated"),window.cancelAnimationFrame(rt._animationRaf),rt._animationRaf=null}()}()};We()}()}}(Tr):(Pe.emit("plotly_animated"),Jt())})},ae.addFrames=function Et(Pe,Ze,Xe){if(Pe=E.getGraphDiv(Pe),null==Ze)return Promise.resolve();if(!E.isPlotDiv(Pe))throw new Error("This element is not a Plotly plot: "+Pe+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var rt,kt,Tt,Xt,ar=Pe._transitionData._frames,Ut=Pe._transitionData._frameHash;if(!Array.isArray(Ze))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Ze);var Jt=ar.length+2*Ze.length,nr=[],rr={};for(rt=Ze.length-1;rt>=0;rt--)if(E.isPlainObject(Ze[rt])){var br=Ze[rt].name,Hr=(Ut[br]||rr[br]||{}).name,on=Ze[rt].name;Hr&&on&&"number"==typeof on&&(Ut[Hr]||rr[Hr])&&T<5&&(T++,E.warn('addFrames: overwriting frame "'+(Ut[Hr]||rr[Hr]).name+'" with a frame whose name of type "number" also equates to "'+Hr+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===T&&E.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),rr[br]={name:br},nr.push({frame:i.supplyFrameDefaults(Ze[rt]),index:Xe&&null!=Xe[rt]?Xe[rt]:Jt+rt})}nr.sort(function(ct,ht){return ct.index>ht.index?-1:ct.index<ht.index?1:0});var et=[],Yt=[],qt=ar.length;for(rt=nr.length-1;rt>=0;rt--){if("number"==typeof(kt=nr[rt].frame).name&&E.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!kt.name)for(;Ut[kt.name="frame "+Pe._transitionData._counter++];);if(Ut[kt.name]){for(Tt=0;Tt<ar.length&&(ar[Tt]||{}).name!==kt.name;Tt++);et.push({type:"replace",index:Tt,value:kt}),Yt.unshift({type:"replace",index:Tt,value:ar[Tt]})}else Xt=Math.max(0,Math.min(nr[rt].index,qt)),et.push({type:"insert",index:Xt,value:kt}),Yt.unshift({type:"delete",index:Xt}),qt++}return d&&d.add(Pe,i.modifyFrames,[Pe,Yt],i.modifyFrames,[Pe,et]),i.modifyFrames(Pe,et)},ae.deleteFrames=function wt(Pe,Ze){if(Pe=E.getGraphDiv(Pe),!E.isPlotDiv(Pe))throw new Error("This element is not a Plotly plot: "+Pe);var Xe,rt,kt=Pe._transitionData._frames,Tt=[],Xt=[];if(!Ze)for(Ze=[],Xe=0;Xe<kt.length;Xe++)Ze.push(Xe);for((Ze=Ze.slice()).sort(),Xe=Ze.length-1;Xe>=0;Xe--)Tt.push({type:"delete",index:rt=Ze[Xe]}),Xt.unshift({type:"insert",index:rt,value:kt[rt]});return d&&d.add(Pe,i.modifyFrames,[Pe,Xt],i.modifyFrames,[Pe,Tt]),i.modifyFrames(Pe,Tt)},ae.addTraces=function G(Pe,Ze,Xe){Pe=E.getGraphDiv(Pe);var Ut,Jt,rt=[],kt=ae.deleteTraces,Tt=G,Xt=[Pe,rt],ar=[Pe,Ze];for(function N(Pe,Ze,Xe){var rt,kt;if(!Array.isArray(Pe.data))throw new Error("gd.data must be an array.");if(void 0===Ze)throw new Error("traces must be defined.");for(Array.isArray(Ze)||(Ze=[Ze]),rt=0;rt<Ze.length;rt++)if("object"!=typeof(kt=Ze[rt])||Array.isArray(kt)||null===kt)throw new Error("all values in traces array must be non-array objects");if(void 0!==Xe&&!Array.isArray(Xe)&&(Xe=[Xe]),void 0!==Xe&&Xe.length!==Ze.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(Pe,Ze,Xe),Array.isArray(Ze)||(Ze=[Ze]),Ze=Ze.map(function(nr){return E.extendFlat({},nr)}),w.cleanData(Ze),Ut=0;Ut<Ze.length;Ut++)Pe.data.push(Ze[Ut]);for(Ut=0;Ut<Ze.length;Ut++)rt.push(-Ze.length+Ut);if(void 0===Xe)return Jt=ae.redraw(Pe),d.add(Pe,kt,Xt,Tt,ar),Jt;Array.isArray(Xe)||(Xe=[Xe]);try{D(Pe,rt,Xe)}catch(nr){throw Pe.data.splice(Pe.data.length-Ze.length,Ze.length),nr}return d.startSequence(Pe),d.add(Pe,kt,Xt,Tt,ar),Jt=ae.moveTraces(Pe,rt,Xe),d.stopSequence(Pe),Jt},ae.deleteTraces=function $(Pe,Ze){Pe=E.getGraphDiv(Pe);var ar,Ut,Xe=[],rt=ae.addTraces,kt=$,Tt=[Pe,Xe,Ze],Xt=[Pe,Ze];if(void 0===Ze)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ze)||(Ze=[Ze]),F(Pe,Ze,"indices"),(Ze=I(Ze,Pe.data.length-1)).sort(E.sorterDes),ar=0;ar<Ze.length;ar+=1)Ut=Pe.data.splice(Ze[ar],1)[0],Xe.push(Ut);var Jt=ae.redraw(Pe);return d.add(Pe,rt,Tt,kt,Xt),Jt},ae.extendTraces=function ne(Pe,Ze,Xe,rt){function kt(Ut,Jt,nr){var rr,br;if(E.isTypedArray(Ut))if(nr<0){var Hr=new Ut.constructor(0),on=se(Ut,Jt);nr<0?(rr=on,br=Hr):(rr=Hr,br=on)}else if(rr=new Ut.constructor(nr),br=new Ut.constructor(Ut.length+Jt.length-nr),nr===Jt.length)rr.set(Jt),br.set(Ut);else if(nr<Jt.length){var jr=Jt.length-nr;rr.set(Jt.subarray(jr)),br.set(Ut),br.set(Jt.subarray(0,jr),Ut.length)}else{var et=nr-Jt.length,Yt=Ut.length-et;rr.set(Ut.subarray(Yt)),rr.set(Jt,et),br.set(Ut.subarray(0,Yt))}else rr=Ut.concat(Jt),br=nr>=0&&nr<rr.length?rr.splice(0,rr.length-nr):[];return[rr,br]}var Tt=oe(Pe=E.getGraphDiv(Pe),Ze,Xe,rt,kt),Xt=ae.redraw(Pe);return d.add(Pe,ae.prependTraces,[Pe,Tt.update,Xe,Tt.maxPoints],ne,arguments),Xt},ae.moveTraces=function V(Pe,Ze,Xe){var Jt,rt=[],kt=[],Tt=V,Xt=V,ar=[Pe=E.getGraphDiv(Pe),Xe,Ze],Ut=[Pe,Ze,Xe];if(D(Pe,Ze,Xe),Ze=Array.isArray(Ze)?Ze:[Ze],void 0===Xe)for(Xe=[],Jt=0;Jt<Ze.length;Jt++)Xe.push(-Ze.length+Jt);for(Xe=Array.isArray(Xe)?Xe:[Xe],Ze=I(Ze,Pe.data.length-1),Xe=I(Xe,Pe.data.length-1),Jt=0;Jt<Pe.data.length;Jt++)-1===Ze.indexOf(Jt)&&rt.push(Pe.data[Jt]);for(Jt=0;Jt<Ze.length;Jt++)kt.push({newIndex:Xe[Jt],trace:Pe.data[Ze[Jt]]});for(kt.sort(function(rr,br){return rr.newIndex-br.newIndex}),Jt=0;Jt<kt.length;Jt+=1)rt.splice(kt[Jt].newIndex,0,kt[Jt].trace);Pe.data=rt;var nr=ae.redraw(Pe);return d.add(Pe,Tt,ar,Xt,Ut),nr},ae.prependTraces=function W(Pe,Ze,Xe,rt){function kt(Ut,Jt,nr){var rr,br;if(E.isTypedArray(Ut))if(nr<=0){var Hr=new Ut.constructor(0),on=se(Jt,Ut);nr<0?(rr=on,br=Hr):(rr=Hr,br=on)}else if(rr=new Ut.constructor(nr),br=new Ut.constructor(Ut.length+Jt.length-nr),nr===Jt.length)rr.set(Jt),br.set(Ut);else if(nr<Jt.length){var jr=Jt.length-nr;rr.set(Jt.subarray(0,jr)),br.set(Jt.subarray(jr)),br.set(Ut,jr)}else{var et=nr-Jt.length;rr.set(Jt),rr.set(Ut.subarray(0,et),Jt.length),br.set(Ut.subarray(et))}else rr=Jt.concat(Ut),br=nr>=0&&nr<rr.length?rr.splice(nr,rr.length):[];return[rr,br]}var Tt=oe(Pe=E.getGraphDiv(Pe),Ze,Xe,rt,kt),Xt=ae.redraw(Pe);return d.add(Pe,ae.extendTraces,[Pe,Tt.update,Xe,Tt.maxPoints],W,arguments),Xt},ae.newPlot=function O(Pe,Ze,Xe,rt){return Pe=E.getGraphDiv(Pe),i.cleanPlot([],{},Pe._fullData||[],Pe._fullLayout||{}),i.purge(Pe),ae._doPlot(Pe,Ze,Xe,rt)},ae._doPlot=function f(Pe,Ze,Xe,rt){var kt;if(Pe=E.getGraphDiv(Pe),c.init(Pe),E.isPlainObject(Ze)){var Tt=Ze;Ze=Tt.data,Xe=Tt.layout,rt=Tt.config,kt=Tt.frames}if(!1===c.triggerHandler(Pe,"plotly_beforeplot",[Ze,Xe,rt]))return Promise.reject();!Ze&&!Xe&&!E.isPlotDiv(Pe)&&E.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Pe),R(Pe,rt),Xe||(Xe={}),_.select(Pe).classed("js-plotly-plot",!0),r.makeTester(),Array.isArray(Pe._promises)||(Pe._promises=[]);var Ut=0===(Pe.data||[]).length&&Array.isArray(Ze);Array.isArray(Ze)&&(w.cleanData(Ze),Ut?Pe.data=Ze:Pe.data.push.apply(Pe.data,Ze),Pe.empty=!1),(!Pe.layout||Ut)&&(Pe.layout=w.cleanLayout(Xe)),i.supplyDefaults(Pe);var Jt=Pe._fullLayout,nr=Jt._has("cartesian");Jt._replotting=!0,(Ut||Jt._shouldCreateBgLayer)&&(function Qe(Pe){var Ze=_.select(Pe),Xe=Pe._fullLayout;if(Xe._calcInverseTransform=vt,Xe._calcInverseTransform(Pe),Xe._container=Ze.selectAll(".plot-container").data([0]),Xe._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Xe._paperdiv=Xe._container.selectAll(".svg-container").data([0]),Xe._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Xe._glcontainer=Xe._paperdiv.selectAll(".gl-container").data([{}]),Xe._glcontainer.enter().append("div").classed("gl-container",!0),Xe._paperdiv.selectAll(".main-svg").remove(),Xe._paperdiv.select(".modebar-container").remove(),Xe._paper=Xe._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Xe._toppaper=Xe._paperdiv.append("svg").classed("main-svg",!0),Xe._modebardiv=Xe._paperdiv.append("div"),delete Xe._modeBar,Xe._hoverpaper=Xe._paperdiv.append("svg").classed("main-svg",!0),!Xe._uid){var rt={};_.selectAll("defs").each(function(){this.id&&(rt[this.id.split("-")[1]]=1)}),Xe._uid=E.randstr(rt)}Xe._paperdiv.selectAll(".main-svg").attr(b.svgAttrs),Xe._defs=Xe._paper.append("defs").attr("id","defs-"+Xe._uid),Xe._clips=Xe._defs.append("g").classed("clips",!0),Xe._topdefs=Xe._toppaper.append("defs").attr("id","topdefs-"+Xe._uid),Xe._topclips=Xe._topdefs.append("g").classed("clips",!0),Xe._bgLayer=Xe._paper.append("g").classed("bglayer",!0),Xe._draggers=Xe._paper.append("g").classed("draglayer",!0);var kt=Xe._paper.append("g").classed("layer-below",!0);Xe._imageLowerLayer=kt.append("g").classed("imagelayer",!0),Xe._shapeLowerLayer=kt.append("g").classed("shapelayer",!0),Xe._cartesianlayer=Xe._paper.append("g").classed("cartesianlayer",!0),Xe._polarlayer=Xe._paper.append("g").classed("polarlayer",!0),Xe._smithlayer=Xe._paper.append("g").classed("smithlayer",!0),Xe._ternarylayer=Xe._paper.append("g").classed("ternarylayer",!0),Xe._geolayer=Xe._paper.append("g").classed("geolayer",!0),Xe._funnelarealayer=Xe._paper.append("g").classed("funnelarealayer",!0),Xe._pielayer=Xe._paper.append("g").classed("pielayer",!0),Xe._iciclelayer=Xe._paper.append("g").classed("iciclelayer",!0),Xe._treemaplayer=Xe._paper.append("g").classed("treemaplayer",!0),Xe._sunburstlayer=Xe._paper.append("g").classed("sunburstlayer",!0),Xe._indicatorlayer=Xe._toppaper.append("g").classed("indicatorlayer",!0),Xe._glimages=Xe._paper.append("g").classed("glimages",!0);var Tt=Xe._toppaper.append("g").classed("layer-above",!0);Xe._imageUpperLayer=Tt.append("g").classed("imagelayer",!0),Xe._shapeUpperLayer=Tt.append("g").classed("shapelayer",!0),Xe._infolayer=Xe._toppaper.append("g").classed("infolayer",!0),Xe._menulayer=Xe._toppaper.append("g").classed("menulayer",!0),Xe._zoomlayer=Xe._toppaper.append("g").classed("zoomlayer",!0),Xe._hoverlayer=Xe._hoverpaper.append("g").classed("hoverlayer",!0),Xe._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Pe.emit("plotly_framework")}(Pe),Jt._shouldCreateBgLayer&&delete Jt._shouldCreateBgLayer),r.initGradients(Pe),r.initPatterns(Pe),Ut&&a.saveShowSpikeInitial(Pe);var rr=!Pe.calcdata||Pe.calcdata.length!==(Pe._fullData||[]).length;rr&&i.doCalcdata(Pe);for(var br=0;br<Pe.calcdata.length;br++)Pe.calcdata[br][0].trace=Pe._fullData[br];Pe._context.responsive?Pe._responsiveChartHandler||(Pe._responsiveChartHandler=function(){E.isHidden(Pe)||i.resize(Pe)},window.addEventListener("resize",Pe._responsiveChartHandler)):E.clearResponsive(Pe);var Hr=E.extendFlat({},Jt._size),on=0;function et(){if(i.clearAutoMarginIds(Pe),l.drawMarginPushers(Pe),a.allowAutoMargin(Pe),Jt._has("pie"))for(var ht=Pe._fullData,Me=0;Me<ht.length;Me++){var Se=ht[Me];"pie"===Se.type&&Se.automargin&&i.allowAutoMargin(Pe,"pie."+Se.uid+".automargin")}return i.doAutoMargin(Pe),i.previousPromises(Pe)}function Vt(){Pe._transitioning||(l.doAutoRangeAndConstraints(Pe),Ut&&a.saveRangeInitial(Pe),n.getComponentMethod("rangeslider","calcAutorange")(Pe))}var tt=[i.previousPromises,function ar(){if(kt)return ae.addFrames(Pe,kt)},function jr(){for(var ht=Jt._basePlotModules,Me=0;Me<ht.length;Me++)ht[Me].drawFramework&&ht[Me].drawFramework(Pe);!Jt._glcanvas&&Jt._has("gl")&&(Jt._glcanvas=Jt._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(st){return st.key}),Jt._glcanvas.enter().append("canvas").attr("class",function(st){return"gl-canvas gl-canvas-"+st.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Se=Pe._context.plotGlPixelRatio;if(Jt._glcanvas){Jt._glcanvas.attr("width",Jt.width*Se).attr("height",Jt.height*Se).style("width",Jt.width+"px").style("height",Jt.height+"px");var Je=Jt._glcanvas.data()[0].regl;if(Je&&(Math.floor(Jt.width*Se)!==Je._gl.drawingBufferWidth||Math.floor(Jt.height*Se)!==Je._gl.drawingBufferHeight)){var We="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!on)return E.log(We+" Clearing graph and plotting again."),i.cleanPlot([],{},Pe._fullData,Jt),i.supplyDefaults(Pe),Jt=Pe._fullLayout,i.doCalcdata(Pe),on++,jr();E.error(We)}}return"h"===Jt.modebar.orientation?Jt._modebardiv.style("height",null).style("width","100%"):Jt._modebardiv.style("width",null).style("height",Jt.height+"px"),i.previousPromises(Pe)},et,function Yt(){if(i.didMarginChange(Hr,Jt._size))return E.syncOrAsync([et,l.layoutStyles],Pe)}];nr&&tt.push(function qt(){if(rr)return E.syncOrAsync([n.getComponentMethod("shapes","calcAutorange"),n.getComponentMethod("annotations","calcAutorange"),Vt],Pe);Vt()}),tt.push(l.layoutStyles),nr&&tt.push(function Tr(){return a.draw(Pe,Ut?"":"redraw")},function(Me){Me._fullLayout._insideTickLabelsAutorange&&re(Me,Me._fullLayout._insideTickLabelsAutorange).then(function(){Me._fullLayout._insideTickLabelsAutorange=void 0})}),tt.push(l.drawData,l.finalDraw,s,i.addLinks,i.rehover,i.redrag,i.doAutoMargin,function je(ht){ht._fullLayout._insideTickLabelsAutorange&&Ut&&a.saveRangeInitial(ht,!0)},i.previousPromises);var ct=E.syncOrAsync(tt,Pe);return(!ct||!ct.then)&&(ct=Promise.resolve()),ct.then(function(){return u(Pe),Pe})},ae.purge=function at(Pe){var Ze=(Pe=E.getGraphDiv(Pe))._fullLayout||{};return i.cleanPlot([],{},Pe._fullData||[],Ze),i.purge(Pe),c.purge(Pe),Ze._container&&Ze._container.remove(),delete Pe._context,Pe},ae.react=function nt(Pe,Ze,Xe,rt){var kt,Tt;Pe=E.getGraphDiv(Pe),w.clearPromiseQueue(Pe);var ar=Pe._fullData,Ut=Pe._fullLayout;if(E.isPlotDiv(Pe)&&ar&&Ut){if(E.isPlainObject(Ze)){var Jt=Ze;Ze=Jt.data,Xe=Jt.layout,rt=Jt.config,kt=Jt.frames}var nr=!1;if(rt){var rr=E.extendDeep({},Pe._context);Pe._context=void 0,R(Pe,rt),nr=Bt(rr,Pe._context)}Pe.data=Ze||[],w.cleanData(Pe.data),Pe.layout=Xe||{},w.cleanLayout(Pe.layout),function Ie(Pe,Ze,Xe,rt){var Tt,Xt,ar,Ut,Jt,nr,rr,br,Hr,on,kt=rt._preGUI,jr=[],et={},Yt={};for(Tt in kt){if(Jt=Ce(Tt,De)){if(Hr=Jt.head,on=Jt.tail,(Ut=(ar=e(rt,Xt=Jt.attr||Hr+".uirevision").get())&&Fe(Xt,Ze))&&Ut===ar){if(null===(nr=kt[Tt])&&(nr=void 0),Be(br=(rr=e(Ze,Tt)).get(),nr)){void 0===br&&"autorange"===on&&jr.push(Hr),rr.set(q(e(rt,Tt).get()));continue}if("autorange"===on||"range["===on.substr(0,6)){var Tr=kt[Hr+".autorange"];if(Tr||null===Tr&&null===kt[Hr+".range[0]"]&&null===kt[Hr+".range[1]"]){if(!(Hr in et)){var tt=e(Ze,Hr).get();et[Hr]=tt&&(tt.autorange||!1!==tt.autorange&&(!tt.range||2!==tt.range.length))}if(et[Hr]){rr.set(q(e(rt,Tt).get()));continue}}}}}else E.warn("unrecognized GUI edit: "+Tt);delete kt[Tt],Jt&&"range["===Jt.tail.substr(0,6)&&(Yt[Jt.head]=1)}for(var je=0;je<jr.length;je++){var ct=jr[je];if(Yt[ct]){var ht=e(Ze,ct).get();ht&&delete ht.autorange}}var Me=rt._tracePreGUI;for(var Se in Me){var st,Je=Me[Se],We=null;for(Tt in Je){if(!We){var lt=Ke(Se,Xe);if(lt<0){delete Me[Se];break}var Ct=Ue(Se,Pe,(st=Xe[lt]._fullInput).index);if(Ct<0){delete Me[Se];break}We=Pe[Ct]}if(Jt=Ce(Tt,ye)){if(Jt.attr?Ut=(ar=e(rt,Jt.attr).get())&&Fe(Jt.attr,Ze):(ar=st.uirevision,void 0===(Ut=We.uirevision)&&(Ut=Ze.uirevision)),Ut&&Ut===ar&&(null===(nr=Je[Tt])&&(nr=void 0),Be(br=(rr=e(We,Tt)).get(),nr))){rr.set(q(e(st,Tt).get()));continue}}else E.warn("unrecognized GUI edit: "+Tt+" in trace uid "+Se);delete Je[Tt]}}}(Pe.data,Pe.layout,ar,Ut),i.supplyDefaults(Pe,{skipUpdateCalc:!0});var br=Pe._fullData,Hr=Pe._fullLayout,on=void 0===Hr.datarevision,jr=Hr.transition,et=function Nt(Pe,Ze,Xe,rt,kt){var Tt=y.layoutFlags();function Xt(Ut){return t.getLayoutValObject(Xe,Ut)}return Tt.arrays={},Tt.rangesAltered={},Tt.nChanges=0,Tt.nChangesAnim=0,St(Ze,Xe,[],{getValObject:Xt,flags:Tt,immutable:rt,transition:kt,gd:Pe}),(Tt.plot||Tt.calc)&&(Tt.layoutReplot=!0),kt&&Tt.nChanges&&Tt.nChangesAnim&&(Tt.anim=Tt.nChanges===Tt.nChangesAnim?"all":"some"),Tt}(Pe,Ut,Hr,on,jr),qt=function gt(Pe,Ze,Xe,rt,kt,Tt){var Xt=Ze.length===Xe.length;if(!kt&&!Xt)return{fullReplot:!0,calc:!0};var Ut,Jt,ar=y.traceFlags();function nr(Hr){var on=t.getTraceValObject(Jt,Hr);return!Jt._module.animatable&&on.anim&&(on.anim=!1),on}ar.arrays={},ar.nChanges=0,ar.nChangesAnim=0;var rr={getValObject:nr,flags:ar,immutable:rt,transition:kt,newDataRevision:Tt,gd:Pe},br={};for(Ut=0;Ut<Ze.length;Ut++)if(Xe[Ut]){if(i.hasMakesDataTransform(Jt=Xe[Ut]._fullInput)&&(Jt=Xe[Ut]),br[Jt.uid])continue;br[Jt.uid]=1,St(Ze[Ut]._fullInput,Jt,[],rr)}return(ar.calc||ar.plot)&&(ar.fullReplot=!0),kt&&ar.nChanges&&ar.nChangesAnim&&(ar.anim=ar.nChanges===ar.nChangesAnim&&Xt?"all":"some"),ar}(Pe,ar,br,on,jr,et.newDataRevision);if(de(Pe)&&(et.layoutReplot=!0),qt.calc||et.calc){Pe.calcdata=void 0;for(var Vt=Object.getOwnPropertyNames(Hr),Tr=0;Tr<Vt.length;Tr++){var tt=Vt[Tr],je=tt.substring(0,5);if("xaxis"===je||"yaxis"===je){var ct=Hr[tt]._emptyCategories;ct&&ct()}}}else i.supplyDefaultsUpdateCalc(Pe.calcdata,br);var ht=[];if(kt&&(Pe._transitionData={},i.createTransitionData(Pe),ht.push(function Xt(){return ae.addFrames(Pe,kt)})),Hr.transition&&!nr&&(qt.anim||et.anim))et.ticks&&ht.push(l.doTicksRelayout),i.doCalcdata(Pe),l.doAutoRangeAndConstraints(Pe),ht.push(function(){return i.transitionFromReact(Pe,qt,et,Ut)});else if(qt.fullReplot||et.layoutReplot||nr)Pe._fullLayout._skipDefaults=!0,ht.push(ae._doPlot);else{for(var Me in et.arrays){var Se=et.arrays[Me];if(Se.length){var Je=n.getComponentMethod(Me,"drawOne");if(Je!==E.noop)for(var We=0;We<Se.length;We++)Je(Pe,Se[We]);else{var st=n.getComponentMethod(Me,"draw");if(st===E.noop)throw new Error("cannot draw components: "+Me);st(Pe)}}}ht.push(i.previousPromises),qt.style&&ht.push(l.doTraceStyle),(qt.colorbars||et.colorbars)&&ht.push(l.doColorBars),et.legend&&ht.push(l.doLegend),et.layoutstyle&&ht.push(l.layoutStyles),et.axrange&&ge(ht),et.ticks&&ht.push(l.doTicksRelayout),et.modebar&&ht.push(l.doModeBar),et.camera&&ht.push(l.doCamera),ht.push(u)}ht.push(i.rehover,i.redrag),(!(Tt=E.syncOrAsync(ht,Pe))||!Tt.then)&&(Tt=Promise.resolve(Pe))}else Tt=ae.newPlot(Pe,Ze,Xe,rt);return Tt.then(function(){return Pe.emit("plotly_react",{data:Ze,layout:Xe}),Pe})},ae.redraw=function z(Pe){if(Pe=E.getGraphDiv(Pe),!E.isPlotDiv(Pe))throw new Error("This element is not a Plotly plot: "+Pe);return w.cleanData(Pe.data),w.cleanLayout(Pe.layout),Pe.calcdata=void 0,ae._doPlot(Pe).then(function(){return Pe.emit("plotly_redraw"),Pe})},ae.relayout=re,ae.restyle=H,ae.setPlotConfig=function h(Pe){return E.extendFlat(S,Pe)},ae.update=be,ae._guiRelayout=Le(re),ae._guiRestyle=Le(H),ae._guiUpdate=Le(be),ae._storeDirectGUIEdit=function te(Pe,Ze,Xe){for(var rt in Xe)Y(rt,e(Pe,rt).get(),Xe[rt],Ze)}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"../lib/events":492,"../lib/queue":519,"../plots/cartesian/axes":554,"../plots/cartesian/constants":561,"../plots/cartesian/graph_interact":564,"../plots/cartesian/select":575,"../plots/plots":619,"../registry":638,"./edit_types":536,"./helpers":537,"./manage_arrays":539,"./plot_config":541,"./plot_schema":542,"./subroutines":544,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],541:[function(v,ie,ae){"use strict";var _={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},k={};(function m(E,e){for(var c in E){var d=E[c];d.valType?e[c]=d.dflt:(e[c]||(e[c]={}),m(d,e[c]))}})(_,k),ie.exports={configAttributes:_,dfltConfig:k}},{}],542:[function(v,ie,ae){"use strict";var _=v("../registry"),k=v("../lib"),m=v("../plots/attributes"),E=v("../plots/layout_attributes"),e=v("../plots/frame_attributes"),c=v("../plots/animation_attributes"),d=v("./plot_config").configAttributes,n=v("./edit_types"),t=k.extendDeepAll,i=k.isPlainObject,a=k.isArrayOrTypedArray,r=k.nestedProperty,g=k.valObjectMeta,s="_isSubplotObj",b="_isLinkedToArray",S="_deprecated",p=[s,b,"_arrayAttrRegexps",S];function l(O,I,F){if(!O)return!1;if(O._isLinkedToArray)if(y(I[F]))F++;else if(F<I.length)return!1;for(;F<I.length;F++){var D=O[I[F]];if(!i(D))break;if(O=D,F===I.length-1)break;if(O._isLinkedToArray){if(!y(I[++F]))return!1}else if("info_array"===O.valType){var N=I[++F];if(!y(N))return!1;var U=O.items;if(Array.isArray(U)){if(N>=U.length)return!1;if(2===O.dimensions){if(F++,I.length===F)return O;var X=I[F];if(!y(X))return!1;O=U[N][X]}else O=U[N]}else O=U}}return O}function y(O){return O===Math.round(O)&&O>=0}function T(){var I,F,O={};for(I in t(O,E),_.subplotsRegistry)if((F=_.subplotsRegistry[I]).layoutAttributes)if(Array.isArray(F.attr))for(var D=0;D<F.attr.length;D++)R(O,F,F.attr[D]);else R(O,F,"subplot"===F.attr?F.name:F.attr);for(I in _.componentsRegistry){var U=(F=_.componentsRegistry[I]).schema;if(U&&(U.subplots||U.layout)){var X=U.subplots;if(X&&X.xaxis&&!X.yaxis)for(var oe in X.xaxis)delete O.yaxis[oe]}else"colorscale"===F.name?t(O,F.layoutAttributes):F.layoutAttributes&&z(O,F.layoutAttributes,F.name)}return{layoutAttributes:u(O)}}function f(){var O={frames:t({},e)};return u(O),O.frames}function u(O){return function h(O){function I(D){return{valType:"string",editType:"none"}}function F(D,N,U){ae.isValObject(D)?(!0===D.arrayOk||"data_array"===D.valType)&&(U[N+"src"]=I(N)):i(D)&&(D.role="object")}ae.crawl(O,F)}(O),function o(O){function I(F,D,N){if(F){var U=F[b];!U||(delete F[b],N[D]={items:{}},N[D].items[U]=F,N[D].role="object")}}ae.crawl(O,I)}(O),function C(O){function I(F){for(var D in F)if(i(F[D]))I(F[D]);else if(Array.isArray(F[D]))for(var N=0;N<F[D].length;N++)I(F[D][N]);else F[D]instanceof RegExp&&(F[D]=F[D].toString())}I(O)}(O),O}function R(O,I,F){var D=r(O,F),N=t({},I.layoutAttributes);N[s]=!0,D.set(N)}function z(O,I,F){var D=r(O,F);D.set(t(D.get()||{},I))}ae.IS_SUBPLOT_OBJ=s,ae.IS_LINKED_TO_ARRAY=b,ae.DEPRECATED=S,ae.UNDERSCORE_ATTRS=p,ae.get=function(){var O={};_.allTypes.forEach(function(F){O[F]=function A(O){var I,F;F=(I=_.modules[O]._module).basePlotModule;var D={type:null},N=t({},m),U=t({},I.attributes);ae.crawl(U,function(se,ne,W,G,$){r(N,$).set(void 0),void 0===se&&r(U,$).set(void 0)}),t(D,N),_.traceIs(O,"noOpacity")&&delete D.opacity,_.traceIs(O,"showLegend")||(delete D.showlegend,delete D.legendgroup),_.traceIs(O,"noHover")&&(delete D.hoverinfo,delete D.hoverlabel),I.selectPoints||delete D.selectedpoints,t(D,U),F.attributes&&t(D,F.attributes),D.type=O;var X={meta:I.meta||{},categories:I.categories||{},animatable:Boolean(I.animatable),type:O,attributes:u(D)};if(I.layoutAttributes){var oe={};t(oe,I.layoutAttributes),X.layoutAttributes=u(oe)}return I.animatable||ae.crawl(X,function(se){ae.isValObject(se)&&"anim"in se&&delete se.anim}),X}(F)});var I={};return Object.keys(_.transformsRegistry).forEach(function(F){I[F]=function M(O){var F=t({},_.transformsRegistry[O].attributes);return Object.keys(_.componentsRegistry).forEach(function(D){var N=_.componentsRegistry[D];N.schema&&N.schema.transforms&&N.schema.transforms[O]&&Object.keys(N.schema.transforms[O]).forEach(function(U){z(F,N.schema.transforms[O][U],U)})}),{attributes:u(F)}}(F)}),{defs:{valObjects:g,metaKeys:p.concat(["description","role","editType","impliedEdits"]),editType:{traces:n.traces,layout:n.layout},impliedEdits:{}},traces:O,layout:T(),transforms:I,frames:f(),animation:u(c),config:u(d)}},ae.crawl=function(O,I,F,D){var N=F||0;D=D||"",Object.keys(O).forEach(function(U){var X=O[U];if(-1===p.indexOf(U)){var oe=(D?D+".":"")+U;I(X,U,O,N,oe),!ae.isValObject(X)&&i(X)&&"impliedEdits"!==U&&ae.crawl(X,I,N+1,oe)}})},ae.isValObject=function(O){return O&&void 0!==O.valType},ae.findArrayAttributes=function(O){var N,U,I=[],F=[],D=[];function X($,V,H,q){F=F.slice(0,q).concat([V]),D=D.slice(0,q).concat([$&&$._isLinkedToArray]),!$||"data_array"!==$.valType&&!0!==$.arrayOk||"colorbar"===F[q-1]&&("ticktext"===V||"tickvals"===V)||oe(N,0,"")}function oe($,V,H){var q=$[F[V]],K=H+F[V];if(V===F.length-1)a(q)&&I.push(U+K);else if(D[V]){if(Array.isArray(q))for(var Y=0;Y<q.length;Y++)i(q[Y])&&oe(q[Y],V+1,K+"["+Y+"].")}else i(q)&&oe(q,V+1,K+".")}N=O,U="",ae.crawl(m,X),O._module&&O._module.attributes&&ae.crawl(O._module.attributes,X);var se=O.transforms;if(se)for(var ne=0;ne<se.length;ne++){var W=se[ne],G=W._module;G&&(U="transforms["+ne+"].",N=W,ae.crawl(G.attributes,X))}return I},ae.getTraceValObject=function(O,I){var N,U,F=I[0],D=1;if("transforms"===F){if(1===I.length)return m.transforms;var X=O.transforms;if(!Array.isArray(X)||!X.length)return!1;var oe=I[1];if(!y(oe)||oe>=X.length)return!1;U=(N=(_.transformsRegistry[X[oe].type]||{}).attributes)&&N[I[2]],D=3}else{var se=O._module;if(se||(se=(_.modules[O.type||m.type.dflt]||{})._module),!se)return!1;if(!(U=(N=se.attributes)&&N[F])){var ne=se.basePlotModule;ne&&ne.attributes&&(U=ne.attributes[F])}U||(U=m[F])}return l(U,I,D)},ae.getLayoutValObject=function(O,I){return l(function w(O,I){var F,D,N,U,X=O._basePlotModules;if(X){var oe;for(F=0;F<X.length;F++){if((N=X[F]).attrRegex&&N.attrRegex.test(I)){if(N.layoutAttrOverrides)return N.layoutAttrOverrides;!oe&&N.layoutAttributes&&(oe=N.layoutAttributes)}var se=N.baseLayoutAttrOverrides;if(se&&I in se)return se[I]}if(oe)return oe}var ne=O._modules;if(ne)for(F=0;F<ne.length;F++)if((U=ne[F].layoutAttributes)&&I in U)return U[I];for(D in _.componentsRegistry){if("colorscale"===(N=_.componentsRegistry[D]).name&&0===I.indexOf("coloraxis"))return N.layoutAttributes[I];if(!N.schema&&I===N.name)return N.layoutAttributes}return I in E&&E[I]}(O,I[0]),I,1)}},{"../lib":503,"../plots/animation_attributes":548,"../plots/attributes":550,"../plots/frame_attributes":586,"../plots/layout_attributes":610,"../registry":638,"./edit_types":536,"./plot_config":541}],543:[function(v,ie,ae){"use strict";var _=v("../lib"),k=v("../plots/attributes"),m="templateitemname",E={name:{valType:"string",editType:"none"}};function e(d){return d&&"string"==typeof d}function c(d){return"s"!==d.charAt(d.length-1)&&_.warn("bad argument to arrayDefaultKey: "+d),d.substr(0,d.length-1)+"defaults"}E[m]={valType:"string",editType:"calc"},ae.templatedArray=function(d,n){return n._isLinkedToArray=d,n.name=E.name,n[m]=E[m],n},ae.traceTemplater=function(d){var t,i,n={};for(t in d)i=d[t],Array.isArray(i)&&i.length&&(n[t]=0);return{newTrace:function a(r){var g={type:t=_.coerce(r,{},k,"type"),_template:null};if(t in n){var s=n[t]%(i=d[t]).length;n[t]++,g._template=i[s]}return g}}},ae.newContainer=function(d,n,t){var i=d._template,a=i&&(i[n]||t&&i[t]);return _.isPlainObject(a)||(a=null),d[n]={_template:a}},ae.arrayTemplater=function(d,n,t){var i=d._template,a=i&&i[c(n)],r=i&&i[n];(!Array.isArray(r)||!r.length)&&(r=[]);var g={};return{newItem:function s(x){var S={name:x.name,_input:x},p=S[m]=x[m];if(!e(p))return S._template=a,S;for(var w=0;w<r.length;w++){var l=r[w];if(l.name===p)return g[p]=1,S._template=l,S}return S[t]=x[t]||!1,S._template=!1,S},defaultItems:function b(){for(var x=[],S=0;S<r.length;S++){var p=r[S],w=p.name;if(e(w)&&!g[w]){var l={_template:p,name:w,_input:{_templateitemname:w}};l[m]=p[m],x.push(l),g[w]=1}}return x}}},ae.arrayDefaultKey=c,ae.arrayEditor=function(d,n,t){var i=(_.nestedProperty(d,n).get()||[]).length,a=t._index,r=a>=i&&(t._input||{})._templateitemname;r&&(a=i);var s,g=n+"["+a+"]";function b(){s={},r&&(s[g]={},s[g][m]=r)}function S(l,y){r?_.nestedProperty(s[g],l).set(y):s[g+"."+l]=y}function p(){var l=s;return b(),l}return b(),{modifyBase:function x(l,y){s[l]=y},modifyItem:S,getUpdateObj:p,applyUpdate:function w(l,y){l&&S(l,y);var A=p();for(var T in A)_.nestedProperty(d,T).set(A[T])}}}},{"../lib":503,"../plots/attributes":550}],544:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../registry"),m=v("../plots/plots"),E=v("../lib"),e=v("../lib/clear_gl_canvases"),c=v("../components/color"),d=v("../components/drawing"),n=v("../components/titles"),t=v("../components/modebar"),i=v("../plots/cartesian/axes"),a=v("../constants/alignment"),r=v("../plots/cartesian/constraints"),g=r.enforce,s=r.clean,b=v("../plots/cartesian/autorange").doAutoRange,x="start";function w(o,C,R){for(var z=0;z<R.length;z++){var O=R[z][0],I=R[z][1];if(!(O[0]>=o[1]||O[1]<=o[0])&&I[0]<C[1]&&I[1]>C[0])return!0}return!1}function l(o){var I,F,D,N,U,X,C=o._fullLayout,R=C._size,z=R.p,O=i.list(o,"",!0);if(C._paperdiv.style({width:o._context.responsive&&C.autosize&&!o._context._hasZeroWidth&&!o.layout.width?"100%":C.width+"px",height:o._context.responsive&&C.autosize&&!o._context._hasZeroHeight&&!o.layout.height?"100%":C.height+"px"}).selectAll(".main-svg").call(d.setSize,C.width,C.height),o._context.setBackground(o,C.paper_bgcolor),ae.drawMainTitle(o),t.manage(o),!C._has("cartesian"))return m.previousPromises(o);function oe(Bt,Zt,Et){var wt=Bt._lw/2;return"x"===Bt._id.charAt(0)?Zt?"top"===Et?Zt._offset-z-wt:Zt._offset+Zt._length+z+wt:R.t+R.h*(1-(Bt.position||0))+wt%1:Zt?"right"===Et?Zt._offset+Zt._length+z+wt:Zt._offset-z-wt:R.l+R.w*(Bt.position||0)+wt%1}for(I=0;I<O.length;I++){var se=(N=O[I])._anchorAxis;N._linepositions={},N._lw=d.crispRound(o,N.linewidth,1),N._mainLinePosition=oe(N,se,N.side),N._mainMirrorPosition=N.mirror&&se?oe(N,se,a.OPPOSITE_SIDE[N.side]):null}var ne=[],W=[],G=[],$=1===c.opacity(C.paper_bgcolor)&&1===c.opacity(C.plot_bgcolor)&&C.paper_bgcolor===C.plot_bgcolor;for(F in C._plots)if((D=C._plots[F]).mainplot)D.bg&&D.bg.remove(),D.bg=void 0;else{var V=D.xaxis.domain,H=D.yaxis.domain,q=D.plotgroup;if(w(V,H,G)){var K=q.node(),Y=D.bg=E.ensureSingle(q,"rect","bg");K.insertBefore(Y.node(),K.childNodes[0]),W.push(F)}else q.select("rect.bg").remove(),G.push([V,H]),$||(ne.push(F),W.push(F))}var ge,pe,xe,ke,we,de,be,Le,De,ye,Ce,Fe,Ke,te=C._bgLayer.selectAll(".bg").data(ne);for(te.enter().append("rect").classed("bg",!0),te.exit().remove(),te.each(function(Bt){C._plots[Bt].bg=_.select(this)}),I=0;I<W.length;I++)U=(D=C._plots[W[I]]).xaxis,X=D.yaxis,D.bg&&void 0!==U._offset&&void 0!==X._offset&&D.bg.call(d.setRect,U._offset-z,X._offset-z,U._length+2*z,X._length+2*z).call(c.fill,C.plot_bgcolor).style("stroke-width",0);if(!C._hasOnlyLargeSploms)for(F in C._plots){U=(D=C._plots[F]).xaxis,X=D.yaxis;var re,le,J=D.clipId="clip"+C._uid+F+"plot",j=E.ensureSingleById(C._clips,"clipPath",J,function(Bt){Bt.classed("plotclip",!0).append("rect")});D.clipRect=j.select("rect").attr({width:U._length,height:X._length}),d.setTranslate(D.plot,U._offset,X._offset),D._hasClipOnAxisFalse?(re=null,le=J):(re=J,le=null),d.setClipUrl(D.plot,re,o),D.layerClipId=le}function Ue(Bt){return"M"+ge+","+Bt+"H"+pe}function Be(Bt){return"M"+U._offset+","+Bt+"h"+U._length}function Ie(Bt){return"M"+Bt+","+Le+"V"+be}function nt(Bt){return"M"+Bt+","+X._offset+"v"+X._length}function gt(Bt,Zt,Et){if(!Bt.showline||F!==Bt._mainSubplot)return"";if(!Bt._anchorAxis)return Et(Bt._mainLinePosition);var wt=Zt(Bt._mainLinePosition);return Bt.mirror&&(wt+=Zt(Bt._mainMirrorPosition)),wt}for(F in C._plots){X=(D=C._plots[F]).yaxis;var Nt="M0,0";y(U=D.xaxis,F)&&(we=T(U,"left",X,O),ge=U._offset-(we?z+we:0),de=T(U,"right",X,O),pe=U._offset+U._length+(de?z+de:0),xe=oe(U,X,"bottom"),ke=oe(U,X,"top"),(Ke=!U._anchorAxis||F!==U._mainSubplot)&&("allticks"===U.mirror||"all"===U.mirror)&&(U._linepositions[F]=[xe,ke]),Nt=gt(U,Ue,Be),Ke&&U.showline&&("all"===U.mirror||"allticks"===U.mirror)&&(Nt+=Ue(xe)+Ue(ke)),D.xlines.style("stroke-width",U._lw+"px").call(c.stroke,U.showline?U.linecolor:"rgba(0,0,0,0)")),D.xlines.attr("d",Nt);var St="M0,0";y(X,F)&&(Ce=T(X,"bottom",U,O),be=X._offset+X._length+(Ce?z:0),Fe=T(X,"top",U,O),Le=X._offset-(Fe?z:0),De=oe(X,U,"left"),ye=oe(X,U,"right"),(Ke=!X._anchorAxis||F!==X._mainSubplot)&&("allticks"===X.mirror||"all"===X.mirror)&&(X._linepositions[F]=[De,ye]),St=gt(X,Ie,nt),Ke&&X.showline&&("all"===X.mirror||"allticks"===X.mirror)&&(St+=Ie(De)+Ie(ye)),D.ylines.style("stroke-width",X._lw+"px").call(c.stroke,X.showline?X.linecolor:"rgba(0,0,0,0)")),D.ylines.attr("d",St)}return i.makeClipPaths(o),m.previousPromises(o)}function y(o,C){return(o.ticks||o.showline)&&(C===o._mainSubplot||"all"===o.mirror||"allticks"===o.mirror)}function A(o,C,R){if(!R.showline||!R._lw)return!1;if("all"===R.mirror||"allticks"===R.mirror)return!0;var z=R._anchorAxis;if(!z)return!1;var O=a.FROM_BL[C];return R.side===C?z.domain[O]===o.domain[O]:R.mirror&&z.domain[1-O]===o.domain[1-O]}function T(o,C,R,z){if(A(o,C,R))return R._lw;for(var O=0;O<z.length;O++){var I=z[O];if(I._mainAxis===R._mainAxis&&A(o,C,I))return I._lw}return 0}function M(o,C){var R=o.title,z=o._size,O=0;return"paper"===(C===x?O=R.pad.l:"end"===C&&(O=-R.pad.r),R.xref)?z.l+z.w*R.x+O:o.width*R.x+O}function f(o,C){var R=o.title,z=o._size,O=0;return"0em"!==C&&C?C===a.CAP_SHIFT+"em"&&(O=R.pad.t):O=-R.pad.b,"auto"===R.y?z.t/2:"paper"===R.yref?z.t+z.h-z.h*R.y+O:o.height-o.height*R.y+O}ae.layoutStyles=function(o){return E.syncOrAsync([m.doAutoMargin,l],o)},ae.drawMainTitle=function(o){var C=o._fullLayout,R=function u(o){var C=o.title,R="middle";return E.isRightAnchor(C)?R="end":E.isLeftAnchor(C)&&(R=x),R}(C),z=function h(o){var C=o.title,R="0em";return E.isTopAnchor(C)?R=a.CAP_SHIFT+"em":E.isMiddleAnchor(C)&&(R=a.MID_SHIFT+"em"),R}(C);n.draw(o,"gtitle",{propContainer:C,propName:"title.text",placeholder:C._dfltTitle.plot,attributes:{x:M(C,R),y:f(C,z),"text-anchor":R,dy:z}})},ae.doTraceStyle=function(o){var z,C=o.calcdata,R=[];for(z=0;z<C.length;z++){var O=C[z],I=O[0]||{},F=I.trace||{},D=F._module||{},N=D.arraysToCalcdata;N&&N(O,F);var U=D.editStyle;U&&R.push({fn:U,cd0:I})}if(R.length){for(z=0;z<R.length;z++){var X=R[z];X.fn(o,X.cd0)}e(o),ae.redrawReglTraces(o)}return m.style(o),k.getComponentMethod("legend","draw")(o),m.previousPromises(o)},ae.doColorBars=function(o){return k.getComponentMethod("colorbar","draw")(o),m.previousPromises(o)},ae.layoutReplot=function(o){var C=o.layout;return o.layout=void 0,k.call("_doPlot",o,"",C)},ae.doLegend=function(o){return k.getComponentMethod("legend","draw")(o),m.previousPromises(o)},ae.doTicksRelayout=function(o){return i.draw(o,"redraw"),o._fullLayout._hasOnlyLargeSploms&&(k.subplotsRegistry.splom.updateGrid(o),e(o),ae.redrawReglTraces(o)),ae.drawMainTitle(o),m.previousPromises(o)},ae.doModeBar=function(o){var C=o._fullLayout;t.manage(o);for(var R=0;R<C._basePlotModules.length;R++){var z=C._basePlotModules[R].updateFx;z&&z(o)}return m.previousPromises(o)},ae.doCamera=function(o){for(var C=o._fullLayout,R=C._subplots.gl3d,z=0;z<R.length;z++){var O=C[R[z]];O._scene.setViewport(O)}},ae.drawData=function(o){var C=o._fullLayout;e(o);for(var R=C._basePlotModules,z=0;z<R.length;z++)R[z].plot(o);return ae.redrawReglTraces(o),m.style(o),k.getComponentMethod("shapes","draw")(o),k.getComponentMethod("annotations","draw")(o),k.getComponentMethod("images","draw")(o),C._replotting=!1,m.previousPromises(o)},ae.redrawReglTraces=function(o){var C=o._fullLayout;if(C._has("regl")){var I,F,R=o._fullData,z=[],O=[];for(C._hasOnlyLargeSploms&&C._splomGrid.draw(),I=0;I<R.length;I++){var D=R[I];!0===D.visible&&0!==D._length&&("splom"===D.type?C._splomScenes[D.uid].draw():"scattergl"===D.type?E.pushUnique(z,D.xaxis+D.yaxis):"scatterpolargl"===D.type&&E.pushUnique(O,D.subplot))}for(I=0;I<z.length;I++)(F=C._plots[z[I]])._scene&&F._scene.draw();for(I=0;I<O.length;I++)(F=C[O[I]]._subplot)._scene&&F._scene.draw()}},ae.doAutoRangeAndConstraints=function(o){for(var R,C=i.list(o,"",!0),z={},O=0;O<C.length;O++)if(!z[(R=C[O])._id]){z[R._id]=1,s(o,R),b(o,R);var I=R._matchGroup;if(I)for(var F in I){var D=i.getFromId(o,F);b(o,D,R.range),z[F]=1}}g(o)},ae.finalDraw=function(o){k.getComponentMethod("rangeslider","draw")(o),k.getComponentMethod("rangeselector","draw")(o)},ae.drawMarginPushers=function(o){k.getComponentMethod("legend","draw")(o),k.getComponentMethod("rangeselector","draw")(o),k.getComponentMethod("sliders","draw")(o),k.getComponentMethod("updatemenus","draw")(o),k.getComponentMethod("colorbar","draw")(o)}},{"../components/color":366,"../components/drawing":388,"../components/modebar":429,"../components/titles":464,"../constants/alignment":471,"../lib":503,"../lib/clear_gl_canvases":487,"../plots/cartesian/autorange":553,"../plots/cartesian/axes":554,"../plots/cartesian/constraints":562,"../plots/plots":619,"../registry":638,"@plotly/d3":58}],545:[function(v,ie,ae){"use strict";var _=v("../lib"),k=_.isPlainObject,m=v("./plot_schema"),E=v("../plots/plots"),e=v("../plots/attributes"),c=v("./plot_template"),d=v("./plot_config").dfltConfig;function n(x,S){x=_.extendDeep({},x);var w,l,p=Object.keys(x).sort();function y(u,h,o){if(k(h)&&k(u))n(u,h);else if(Array.isArray(h)&&Array.isArray(u)){var C=c.arrayTemplater({_template:x},o);for(l=0;l<h.length;l++){var R=h[l],z=C.newItem(R)._template;z&&n(z,R)}var O=C.defaultItems();for(l=0;l<O.length;l++)h.push(O[l]._template);for(l=0;l<h.length;l++)delete h[l].templateitemname}}for(w=0;w<p.length;w++){var A=p[w],T=x[A];if(A in S?y(T,S[A],A):S[A]=T,t(A)===A)for(var M in S){var f=t(M);M!==f&&f===A&&!(M in x)&&y(T,S[M],A)}}}function t(x){return x.replace(/[0-9]+$/,"")}function i(x,S,p,w,l){var y=l&&p(l);for(var A in x){var T=x[A],M=g(x,A,w),f=g(x,A,l),u=p(f);if(!u){var h=t(A);h!==A&&(u=p(f=g(x,h,l)))}if(!(y&&y===u||!u||u._noTemplating||"data_array"===u.valType||u.arrayOk&&Array.isArray(T)))if(!u.valType&&k(T))i(T,S,p,M,f);else if(u._isLinkedToArray&&Array.isArray(T))for(var o=!1,C=0,R={},z=0;z<T.length;z++){var O=T[z];if(k(O)){var I=O.name;if(I)R[I]||(i(O,S,p,g(T,C,M),g(T,C,f)),C++,R[I]=1);else if(!o){var D=g(x,c.arrayDefaultKey(A),w),N=g(T,C,M);i(O,S,p,N,g(T,C,f));var U=_.nestedProperty(S,N);_.nestedProperty(S,D).set(U.get()),U.set(null),o=!0}}}else _.nestedProperty(S,M).set(T)}}function a(x,S){return m.getLayoutValObject(x,_.nestedProperty({},S).parts)}function r(x,S){return m.getTraceValObject(x,_.nestedProperty({},S).parts)}function g(x,S,p){return p?Array.isArray(x)?p+"["+S+"]":p+"."+S:S}function s(x){for(var S=0;S<x.length;S++)if(k(x[S]))return!0}function b(x){var S;switch(x.code){case"data":S="The template has no key data.";break;case"layout":S="The template has no key layout.";break;case"missing":S=x.path?"There are no templates for item "+x.path+" with name "+x.templateitemname:"There are no templates for trace "+x.index+", of type "+x.traceType+".";break;case"unused":S=x.path?"The template item at "+x.path+" was not used in constructing the plot.":x.dataCount?"Some of the templates of type "+x.traceType+" were not used. The template has "+x.templateCount+" traces, the data only has "+x.dataCount+" of this type.":"The template has "+x.templateCount+" traces of type "+x.traceType+" but there are none in the data.";break;case"reused":S="Some of the templates of type "+x.traceType+" were used more than once. The template has "+x.templateCount+" traces, the data has "+x.dataCount+" of this type."}return x.msg=S,x}ae.makeTemplate=function(x){x=_.isPlainObject(x)?x:_.getGraphDiv(x),x=_.extendDeep({_context:d},{data:x.data,layout:x.layout}),E.supplyDefaults(x);var S=x.data||[],p=x.layout||{};p._basePlotModules=x._fullLayout._basePlotModules,p._modules=x._fullLayout._modules;var w={data:{},layout:{}};S.forEach(function(C){var R={};i(C,R,r.bind(null,C));var z=_.coerce(C,{},e,"type"),O=w.data[z];O||(O=w.data[z]=[]),O.push(R)}),i(p,w.layout,a.bind(null,p)),delete w.layout.template;var l=p.template;if(k(l)){var A,T,M,f,u,h,y=l.layout;k(y)&&n(y,w.layout);var o=l.data;if(k(o)){for(T in w.data)if(M=o[T],Array.isArray(M)){for(h=(u=w.data[T]).length,f=M.length,A=0;A<h;A++)n(M[A%f],u[A]);for(A=h;A<f;A++)u.push(_.extendDeep({},M[A]))}for(T in o)T in w.data||(w.data[T]=_.extendDeep([],o[T]))}}return w},ae.validateTemplate=function(x,S){var p=_.extendDeep({},{_context:d,data:x.data,layout:x.layout}),w=p.layout||{};k(S)||(S=w.template||{});var l=S.layout,y=S.data,A=[];p.layout=w,p.layout.template=S,E.supplyDefaults(p);var T=p._fullLayout,M=p._fullData,f={};if(k(l)?(function u(D,N){for(var U in D)if("_"!==U.charAt(0)&&k(D[U])){var se,X=t(U),oe=[];for(se=0;se<N.length;se++)oe.push(g(D,U,N[se])),X!==U&&oe.push(g(D,X,N[se]));for(se=0;se<oe.length;se++)f[oe[se]]=1;u(D[U],oe)}}(T,["layout"]),function h(D,N){for(var U in D)if(-1===U.indexOf("defaults")&&k(D[U])){var X=g(D,U,N);f[X]?h(D[U],X):A.push({code:"unused",path:X})}}(l,"layout")):A.push({code:"layout"}),k(y)){for(var C,o={},R=0;R<M.length;R++){var z=M[R];o[C=z.type]=(o[C]||0)+1,z._fullInput._template||A.push({code:"missing",index:z._fullInput.index,traceType:C})}for(C in y){var O=y[C].length,I=o[C]||0;O>I?A.push({code:"unused",traceType:C,templateCount:O,dataCount:I}):I>O&&A.push({code:"reused",traceType:C,templateCount:O,dataCount:I})}}else A.push({code:"data"});if(function F(D,N){for(var U in D)if("_"!==U.charAt(0)){var X=D[U],oe=g(D,U,N);k(X)?(Array.isArray(D)&&!1===X._template&&X.templateitemname&&A.push({code:"missing",path:oe,templateitemname:X.templateitemname}),F(X,oe)):Array.isArray(X)&&s(X)&&F(X,oe)}}({data:M,layout:T},""),A.length)return A.map(b)}},{"../lib":503,"../plots/attributes":550,"../plots/plots":619,"./plot_config":541,"./plot_schema":542,"./plot_template":543}],546:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("./plot_api"),m=v("../plots/plots"),E=v("../lib"),e=v("../snapshot/helpers"),c=v("../snapshot/tosvg"),d=v("../snapshot/svgtoimg"),n=v("../version").version,t={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};ie.exports=function i(a,r){var g,s,b,x;function S(I){return!(I in r)||E.validate(r[I],t[I])}if(r=r||{},E.isPlainObject(a)?(g=a.data||[],s=a.layout||{},b=a.config||{},x={}):(a=E.getGraphDiv(a),g=E.extendDeep([],a.data),s=E.extendDeep({},a.layout),b=a._context,x=a._fullLayout||{}),!S("width")&&null!==r.width||!S("height")&&null!==r.height)throw new Error("Height and width should be pixel values.");if(!S("format"))throw new Error("Export format is not "+E.join2(t.format.values,", "," or ")+".");var p={};function w(I,F){return E.coerce(r,p,t,I,F)}var l=w("format"),y=w("width"),A=w("height"),T=w("scale"),M=w("setBackground"),f=w("imageDataOnly"),u=document.createElement("div");u.style.position="absolute",u.style.left="-5000px",document.body.appendChild(u);var h=E.extendFlat({},s);y?h.width=y:null===r.width&&_(x.width)&&(h.width=x.width),A?h.height=A:null===r.height&&_(x.height)&&(h.height=x.height);var o=E.extendFlat({},b,{_exportedPlot:!0,staticPlot:!0,setBackground:M}),C=e.getRedrawFunc(u);function R(){return new Promise(function(I){setTimeout(I,e.getDelay(u._fullLayout))})}function z(){return new Promise(function(I,F){var D=c(u,l,T),N=u._fullLayout.width,U=u._fullLayout.height;function X(){k.purge(u),document.body.removeChild(u)}if("full-json"===l){var oe=m.graphJson(u,!1,"keepdata","object",!0,!0);return oe.version=n,oe=JSON.stringify(oe),X(),I(f?oe:e.encodeJSON(oe))}if(X(),"svg"===l)return I(f?D:e.encodeSVG(D));var se=document.createElement("canvas");se.id=E.randstr(),d({format:l,width:N,height:U,scale:T,canvas:se,svg:D,promise:!0}).then(I).catch(F)})}return new Promise(function(I,F){k.newPlot(u,g,h,o).then(C).then(R).then(z).then(function(D){I(function O(I){return f?I.replace(e.IMAGE_URL_PREFIX,""):I}(D))}).catch(function(D){F(D)})})}},{"../lib":503,"../plots/plots":619,"../snapshot/helpers":642,"../snapshot/svgtoimg":644,"../snapshot/tosvg":646,"../version":1123,"./plot_api":540,"fast-isnumeric":190}],547:[function(v,ie,ae){"use strict";var _=v("../lib"),k=v("../plots/plots"),m=v("./plot_schema"),E=v("./plot_config").dfltConfig,e=_.isPlainObject,c=Array.isArray,d=_.isArrayOrTypedArray;function n(p,w,l,y,A,T){T=T||[];for(var M=Object.keys(p),f=0;f<M.length;f++){var u=M[f];if("transforms"!==u){var h=T.slice();h.push(u);var o=p[u],C=w[u],R=s(l,u),z=(R||{}).valType,O="info_array"===z,I="colorscale"===z,F=(R||{}).items;if(g(l,u))if(e(o)&&e(C)&&"any"!==z)n(o,C,R,y,A,h);else if(O&&c(o)){o.length>C.length&&y.push(r("unused",A,h.concat(C.length)));var U,X,se,ne,D=C.length,N=Array.isArray(F);if(N&&(D=Math.min(D,F.length)),2===R.dimensions)for(X=0;X<D;X++)if(c(o[X])){o[X].length>C[X].length&&y.push(r("unused",A,h.concat(X,C[X].length)));var W=C[X].length;for(U=0;U<(N?Math.min(W,F[X].length):W);U++)ne=C[X][U],_.validate(se=o[X][U],N?F[X][U]:F)?ne!==se&&ne!==+se&&y.push(r("dynamic",A,h.concat(X,U),se,ne)):y.push(r("value",A,h.concat(X,U),se))}else y.push(r("array",A,h.concat(X),o[X]));else for(X=0;X<D;X++)ne=C[X],_.validate(se=o[X],N?F[X]:F)?ne!==se&&ne!==+se&&y.push(r("dynamic",A,h.concat(X),se,ne)):y.push(r("value",A,h.concat(X),se))}else if(R.items&&!O&&c(o)){var V,H,G=F[Object.keys(F)[0]],$=[];for(V=0;V<C.length;V++){var q=C[V]._index||V;if((H=h.slice()).push(q),e(o[q])&&e(C[V])){$.push(q);var K=o[q],Y=C[V];e(K)&&!1!==K.visible&&!1===Y.visible?y.push(r("invisible",A,H)):n(K,Y,G,y,A,H)}}for(V=0;V<o.length;V++)(H=h.slice()).push(V),e(o[V])?-1===$.indexOf(V)&&y.push(r("unused",A,H)):y.push(r("object",A,H,o[V]))}else!e(o)&&e(C)?y.push(r("object",A,h,o)):d(o)||!d(C)||O||I?u in w?_.validate(o,R)?"enumerated"===R.valType&&(R.coerceNumber&&o!==+C||o!==C)&&y.push(r("dynamic",A,h,o,C)):y.push(r("value",A,h,o)):y.push(r("unused",A,h,o)):y.push(r("array",A,h,o));else y.push(r("schema",A,h))}}return y}function t(p,w){for(var l=p.layout.layoutAttributes,y=0;y<w.length;y++){var A=w[y],T=p.traces[A.type],M=T.layoutAttributes;M&&_.extendFlat(A.subplot?l[T.attributes.subplot.dflt]:l,M)}return l}ie.exports=function(w,l){void 0===w&&(w=[]),void 0===l&&(l={});var M,f,y=m.get(),A=[],T={_context:_.extendFlat({},E)};c(w)?(T.data=_.extendDeep([],w),M=w):(T.data=[],M=[],A.push(r("array","data"))),e(l)?(T.layout=_.extendDeep({},l),f=l):(T.layout={},f={},arguments.length>1&&A.push(r("object","layout"))),k.supplyDefaults(T);for(var u=T._fullData,h=M.length,o=0;o<h;o++){var C=M[o],R=["data",o];if(e(C)){var z=u[o],O=z.type,I=y.traces[O].attributes;I.type={valType:"enumerated",values:[O]},!1===z.visible&&!1!==C.visible&&A.push(r("invisible",R)),n(C,z,I,A,R);var F=C.transforms,D=z.transforms;if(F){c(F)||A.push(r("array",R,["transforms"])),R.push("transforms");for(var N=0;N<F.length;N++){var U=["transforms",N],X=F[N].type;if(e(F[N])){var oe=y.transforms[X]?y.transforms[X].attributes:{};oe.type={valType:"enumerated",values:Object.keys(y.transforms)},n(F[N],D[N],oe,A,R,U)}else A.push(r("object",R,U))}}}else A.push(r("object",R))}return n(f,T._fullLayout,t(y,u),A,"layout"),0===A.length?void 0:A};var i={object:function(p,w){return("layout"===p&&""===w?"The layout argument":"data"===p[0]&&""===w?"Trace "+p[1]+" in the data argument":a(p)+"key "+w)+" must be linked to an object container"},array:function(p,w){return("data"===p?"The data argument":a(p)+"key "+w)+" must be linked to an array container"},schema:function(p,w){return a(p)+"key "+w+" is not part of the schema"},unused:function(p,w,l){var y=e(l)?"container":"key";return a(p)+y+" "+w+" did not get coerced"},dynamic:function(p,w,l,y){return[a(p)+"key",w,"(set to '"+l+"')","got reset to","'"+y+"'","during defaults."].join(" ")},invisible:function(p,w){return(w?a(p)+"item "+w:"Trace "+p[1])+" got defaulted to be not visible"},value:function(p,w,l){return[a(p)+"key "+w,"is set to an invalid value ("+l+")"].join(" ")}};function a(p){return c(p)?"In data trace "+p[1]+", ":"In "+p+", "}function r(p,w,l,y,A){var T,M;l=l||"",c(w)?(T=w[0],M=w[1]):(T=w,M=null);var f=function S(p){if(!c(p))return String(p);for(var w="",l=0;l<p.length;l++){var y=p[l];"number"==typeof y?w=w.substr(0,w.length-1)+"["+y+"]":w+=y,l<p.length-1&&(w+=".")}return w}(l),u=i[p](w,f,y,A);return _.log(u),{code:p,container:T,trace:M,path:l,astr:f,msg:u}}function g(p,w){var l=x(w),y=l.keyMinusId;return!!(y in p&&p[y]._isSubplotObj&&l.id)||w in p}function s(p,w){return w in p?p[w]:p[x(w).keyMinusId]}var b=_.counterRegex("([a-z]+)");function x(p){var w=p.match(b);return{keyMinusId:w&&w[1],id:w&&w[2]}}},{"../lib":503,"../plots/plots":619,"./plot_config":541,"./plot_schema":542}],548:[function(v,ie,ae){"use strict";ie.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],549:[function(v,ie,ae){"use strict";var _=v("../lib"),k=v("../plot_api/plot_template");ie.exports=function(E,e,c){var g,s,d=c.name,n=c.inclusionAttr||"visible",t=e[d],i=_.isArrayOrTypedArray(E[d])?E[d]:[],a=e[d]=[],r=k.arrayTemplater(e,d,n);for(g=0;g<i.length;g++){var b=i[g];_.isPlainObject(b)?s=r.newItem(b):(s=r.newItem({}))[n]=!1,s._index=g,!1!==s[n]&&c.handleItemDefaults(b,s,e,c),a.push(s)}var x=r.defaultItems();for(g=0;g<x.length;g++)(s=x[g])._index=a.length,c.handleItemDefaults({},s,e,c,{}),a.push(s);if(_.isArrayOrTypedArray(t)){var S=Math.min(t.length,a.length);for(g=0;g<S;g++)_.relinkPrivateKeys(a[g],t[g])}return a}},{"../lib":503,"../plot_api/plot_template":543}],550:[function(v,ie,ae){"use strict";var _=v("./font_attributes"),k=v("../components/fx/attributes");ie.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:_({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:k.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":397,"./font_attributes":585}],551:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../lib"),m=k.dateTime2ms,E=k.incrementMonth,c=v("../../constants/numerical").ONEAVGMONTH;ie.exports=function(n,t,i,a){if("date"!==t.type)return{vals:a};var r=n[i+"periodalignment"];if(!r)return{vals:a};var s,g=n[i+"period"];if(_(g)){if((g=+g)<=0)return{vals:a}}else if("string"==typeof g&&"M"===g.charAt(0)){var b=+g.substring(1);if(!(b>0&&Math.round(b)===b))return{vals:a};s=b}for(var x=t.calendar,S="start"===r,p="end"===r,l=m(n[i+"period0"],x)||0,y=[],A=[],T=[],M=a.length,f=0;f<M;f++){var h,o,C,u=a[f];if(s){for(h=Math.round((u-l)/(s*c)),C=E(l,s*h,x);C>u;)C=E(C,-s,x);for(;C<=u;)C=E(C,s,x);o=E(C,-s,x)}else{for(C=l+(h=Math.round((u-l)/g))*g;C>u;)C-=g;for(;C<=u;)C+=g;o=C-g}y[f]=S?o:p?C:(o+C)/2,A[f]=o,T[f]=C}return{vals:y,starts:A,ends:T}}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],552:[function(v,ie,ae){"use strict";ie.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],553:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("fast-isnumeric"),m=v("../../lib"),E=v("../../constants/numerical").FP_SAFE,e=v("../../registry"),c=v("../../components/drawing"),d=v("./axis_ids"),n=d.getFromId,t=d.isLinked;function i(M,f){var u,h,o=[],C=M._fullLayout,R=r(C,f,0),z=r(C,f,1),O=b(M,f),I=O.min,F=O.max;if(0===I.length||0===F.length)return m.simpleMap(f.range,f.r2l);var D=I[0].val,N=F[0].val;for(u=1;u<I.length&&D===N;u++)D=Math.min(D,I[u].val);for(u=1;u<F.length&&D===N;u++)N=Math.max(N,F[u].val);var U=!1;if(f.range){var X=m.simpleMap(f.range,f.r2l);U=X[1]<X[0]}"reversed"===f.autorange&&(U=!0,f.autorange=!0);var V,H,q,K,Y,te,oe=f.rangemode,se="tozero"===oe,ne="nonnegative"===oe,W=f._length,G=W/10,$=0;for(u=0;u<I.length;u++)for(V=I[u],h=0;h<F.length;h++)(te=(H=F[h]).val-V.val-a(f,V.val,H.val))>0&&((Y=W-R(V)-z(H))>G?te/Y>$&&(q=V,K=H,$=te/Y):te/W>$&&(q={val:V.val,nopad:1},K={val:H.val,nopad:1},$=te/W));if(D===N){var j=D-1,re=D+1;if(se)if(0===D)o=[0,1];else{var le=(D>0?F:I).reduce(function J(pe,xe){return Math.max(pe,z(xe))},0),ge=D/(1-Math.min(.5,le/W));o=D>0?[0,ge]:[ge,0]}else o=ne?[Math.max(0,j),Math.max(1,re)]:[j,re]}else se?(q.val>=0&&(q={val:0,nopad:1}),K.val<=0&&(K={val:0,nopad:1})):ne&&(q.val-$*R(q)<0&&(q={val:0,nopad:1}),K.val<=0&&(K={val:1,nopad:1})),$=(K.val-q.val-a(f,V.val,H.val))/(W-R(q)-z(K)),o=[q.val-$*R(q),K.val+$*z(K)];return U&&o.reverse(),m.simpleMap(o,f.l2r||Number)}function a(M,f,u){var h=0;if(M.rangebreaks)for(var o=M.locateBreaks(f,u),C=0;C<o.length;C++){var R=o[C];h+=R.max-R.min}return h}function r(M,f,u){var h=.05*f._length,o=f._anchorAxis||{};if(-1!==(f.ticklabelposition||"").indexOf("inside")||-1!==(o.ticklabelposition||"").indexOf("inside")){var C="reversed"===f.autorange;if(!C){var R=m.simpleMap(f.range,f.r2l);C=R[1]<R[0]}C&&(u=!u)}var z=0;return t(M,f._id)||(z=function s(M,f,u){var h=0,o="x"===f._id.charAt(0);for(var C in M._plots){var R=M._plots[C];if(f._id===R.xaxis._id||f._id===R.yaxis._id){var z=(o?R.yaxis:R.xaxis)||{};if(-1!==(z.ticklabelposition||"").indexOf("inside")&&(!u&&("left"===z.side||"bottom"===z.side)||u&&("top"===z.side||"right"===z.side))){if(z._vals){var O=m.deg2rad(z._tickAngles[z._id+"tick"]||0),I=Math.abs(Math.cos(O)),F=Math.abs(Math.sin(O));z._vals[0].bb||z._selections[z._id+"tick"].each(function(W){var G=_.select(this);G.select(".text-math-group").empty()&&(W.bb=c.bBox(G.node()))});for(var U=0;U<z._vals.length;U++){var oe=z._vals[U].bb;if(oe){var se=6+oe.width,ne=6+oe.height;h=Math.max(h,o?Math.max(se*I,ne*F):Math.max(ne*I,se*F))}}}"inside"===z.ticks&&"inside"===z.ticklabelposition&&(h+=z.ticklen||0)}}}return h}(M,f,u)),h=Math.max(z,h),"domain"===f.constrain&&f._inputDomain&&(h*=(f._inputDomain[1]-f._inputDomain[0])/(f.domain[1]-f.domain[0])),function(I){return I.nopad?0:I.pad+(I.extrapad?h:z)}}ie.exports={getAutoRange:i,makePadFn:r,doAutoRange:function x(M,f,u){if(f.setScale(),f.autorange){f.range=u?u.slice():i(M,f),f._r=f.range.slice(),f._rl=m.simpleMap(f._r,f.r2l);var h=f._input,o={};o[f._attr+".range"]=f.range,o[f._attr+".autorange"]=f.autorange,e.call("_storeDirectGUIEdit",M.layout,M._fullLayout._preGUI,o),h.range=f.range.slice(),h.autorange=f.autorange}var C=f._anchorAxis;if(C&&C.rangeslider){var R=C.rangeslider[f._name];R&&"auto"===R.rangemode&&(R.range=i(M,f)),C._input.rangeslider[f._name]=m.extendFlat({},R)}},findExtremes:function S(M,f,u){u||(u={}),M._m||M.setScale();var D,N,U,X,oe,se,ne,W,G,h=[],o=[],C=f.length,R=u.padded||!1,z=u.tozero&&("linear"===M.type||"-"===M.type),O="log"===M.type,I=!1,F=u.vpadLinearized||!1;function $(j){if(Array.isArray(j))return I=!0,function(le){return Math.max(Number(j[le]||0),0)};var re=Math.max(Number(j||0),0);return function(){return re}}var V=$((M._m>0?u.ppadplus:u.ppadminus)||u.ppad||0),H=$((M._m>0?u.ppadminus:u.ppadplus)||u.ppad||0),q=$(u.vpadplus||u.vpad),K=$(u.vpadminus||u.vpad);if(!I){if(W=1/0,G=-1/0,O)for(D=0;D<C;D++)(N=f[D])<W&&N>0&&(W=N),N>G&&N<E&&(G=N);else for(D=0;D<C;D++)(N=f[D])<W&&N>-E&&(W=N),N>G&&N<E&&(G=N);f=[W,G],C=2}var Y={tozero:z,extrapad:R};function te(j){k(U=f[j])&&(se=V(j),ne=H(j),F?(X=M.c2l(U)-K(j),oe=M.c2l(U)+q(j)):(W=U-K(j),G=U+q(j),O&&W<G/10&&(W=G/10),X=M.c2l(W),oe=M.c2l(G)),z&&(X=Math.min(0,X),oe=Math.max(0,oe)),y(X)&&p(h,X,ne,Y),y(oe)&&w(o,oe,se,Y))}var J=Math.min(6,C);for(D=0;D<J;D++)te(D);for(D=C-1;D>=J;D--)te(D);return{min:h,max:o,opts:u}},concatExtremes:b};function b(M,f,u){var O,I,F,h=f._id,C=M._fullLayout,R=[],z=[];function D(se,ne){for(O=0;O<ne.length;O++){var W=se[ne[O]],G=(W._extremes||{})[h];if(!0===W.visible&&G){for(I=0;I<G.min.length;I++)p(R,(F=G.min[I]).val,F.pad,{extrapad:F.extrapad});for(I=0;I<G.max.length;I++)w(z,(F=G.max[I]).val,F.pad,{extrapad:F.extrapad})}}}if(D(M._fullData,f._traceIndices),D(C.annotations||[],f._annIndices||[]),D(C.shapes||[],f._shapeIndices||[]),f._matchGroup&&!u)for(var N in f._matchGroup)if(N!==f._id){var U=n(M,N),X=b(M,U,!0),oe=f._length/U._length;for(I=0;I<X.min.length;I++)p(R,(F=X.min[I]).val,F.pad*oe,{extrapad:F.extrapad});for(I=0;I<X.max.length;I++)w(z,(F=X.max[I]).val,F.pad*oe,{extrapad:F.extrapad})}return{min:R,max:z}}function p(M,f,u,h){l(M,f,u,h,A)}function w(M,f,u,h){l(M,f,u,h,T)}function l(M,f,u,h,o){for(var C=h.tozero,R=h.extrapad,z=!0,O=0;O<M.length&&z;O++){var I=M[O];if(o(I.val,f)&&I.pad>=u&&(I.extrapad||!R)){z=!1;break}o(f,I.val)&&I.pad<=u&&(R||!I.extrapad)&&(M.splice(O,1),O--)}if(z){var F=C&&0===f;M.push({val:f,pad:F?0:u,extrapad:!F&&R})}}function y(M){return k(M)&&Math.abs(M)<E}function A(M,f){return M<=f}function T(M,f){return M>=f}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../../registry":638,"./axis_ids":558,"@plotly/d3":58,"fast-isnumeric":190}],554:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("fast-isnumeric"),m=v("../../plots/plots"),E=v("../../registry"),e=v("../../lib"),c=e.strTranslate,d=v("../../lib/svg_text_utils"),n=v("../../components/titles"),t=v("../../components/color"),i=v("../../components/drawing"),a=v("./layout_attributes"),r=v("./clean_ticks"),g=v("../../constants/numerical"),s=g.ONEMAXYEAR,b=g.ONEAVGYEAR,x=g.ONEMINYEAR,S=g.ONEMAXQUARTER,p=g.ONEAVGQUARTER,w=g.ONEMINQUARTER,l=g.ONEMAXMONTH,y=g.ONEAVGMONTH,A=g.ONEMINMONTH,T=g.ONEWEEK,M=g.ONEDAY,f=M/2,u=g.ONEHOUR,h=g.ONEMIN,o=g.ONESEC,C=g.MINUS_SIGN,R=g.BADNUM,z={K:"zeroline"},O={K:"gridline",L:"path"},I={K:"minor-gridline",L:"path"},F={K:"tick",L:"path"},D={K:"tick",L:"text"},N=v("../../constants/alignment"),U=N.MID_SHIFT,X=N.CAP_SHIFT,oe=N.LINE_SPACING,se=N.OPPOSITE_SIDE,W=ie.exports={};W.setConvert=v("./set_convert");var G=v("./axis_autotype"),$=v("./axis_ids"),V=$.idSort,H=$.isLinked;W.id2name=$.id2name,W.name2id=$.name2id,W.cleanId=$.cleanId,W.list=$.list,W.listIds=$.listIds,W.getFromId=$.getFromId,W.getFromTrace=$.getFromTrace;var q=v("./autorange");W.getAutoRange=q.getAutoRange,W.findExtremes=q.findExtremes;function Y(Me){var Se=1e-4*(Me[1]-Me[0]);return[Me[0]-Se,Me[1]+Se]}W.coerceRef=function(Me,Se,Je,We,st,lt){var pt=We.charAt(We.length-1),Ct=Je._fullLayout._subplots[pt+"axis"],Dt=We+"ref",Gt={};return st||(st=Ct[0]||("string"==typeof lt?lt:lt[0])),lt||(lt=st),Ct=Ct.concat(Ct.map(function(fr){return fr+" domain"})),Gt[Dt]={valType:"enumerated",values:Ct.concat(lt?"string"==typeof lt?[lt]:lt:[]),dflt:st},e.coerce(Me,Se,Gt,Dt)},W.getRefType=function(Me){return void 0===Me?Me:"paper"===Me?"paper":"pixel"===Me?"pixel":/( domain)$/.test(Me)?"domain":"range"},W.coercePosition=function(Me,Se,Je,We,st,lt){var pt,Ct;if("range"!==W.getRefType(We))pt=e.ensureNumber,Ct=Je(st,lt);else{var Gt=W.getFromId(Se,We);Ct=Je(st,lt=Gt.fraction2r(lt)),pt=Gt.cleanPos}Me[st]=pt(Ct)},W.cleanPosition=function(Me,Se,Je){return("paper"===Je||"pixel"===Je?e.ensureNumber:W.getFromId(Se,Je).cleanPos)(Me)},W.redrawComponents=function(Me,Se){Se=Se||W.listIds(Me);var Je=Me._fullLayout;function We(st,lt,pt,Ct){for(var Dt=E.getComponentMethod(st,lt),Gt={},fr=0;fr<Se.length;fr++)for(var Jr=Je[W.id2name(Se[fr])][pt],Lr=0;Lr<Jr.length;Lr++){var Ar=Jr[Lr];if(!Gt[Ar]&&(Dt(Me,Ar),Gt[Ar]=1,Ct))return}}We("annotations","drawOne","_annIndices"),We("shapes","drawOne","_shapeIndices"),We("images","draw","_imgIndices",!0)};var te=W.getDataConversions=function(Me,Se,Je,We){var st,lt="x"===Je||"y"===Je||"z"===Je?Je:We;if(Array.isArray(lt)){if(st={type:G(We,void 0,{autotypenumbers:Me._fullLayout.autotypenumbers}),_categories:[]},W.setConvert(st),"category"===st.type)for(var pt=0;pt<We.length;pt++)st.d2c(We[pt])}else st=W.getFromTrace(Me,Se,lt);return st?{d2c:st.d2c,c2d:st.c2d}:"ids"===lt?{d2c:j,c2d:j}:{d2c:J,c2d:J}};function J(Me){return+Me}function j(Me){return String(Me)}function ge(Me,Se){return Math.abs((Me/Se+.5)%1-.5)<.001}function pe(Me,Se){return Math.abs(Me/Se-1)<.001}function xe(Me){return+Me.substring(1)}function de(Me){var Je=Y(e.simpleMap(Me.range,Me.r2l)),We=Math.min(Je[0],Je[1]),st=Math.max(Je[0],Je[1]),lt="category"===Me.type?Me.d2l_noadd:Me.d2l;"log"===Me.type&&"L"!==String(Me.dtick).charAt(0)&&(Me.dtick="L"+Math.pow(10,Math.floor(Math.min(Me.range[0],Me.range[1]))-1));for(var pt=[],Ct=0;Ct<=1;Ct++)if(!Ct||Me.minor){var Dt=Ct?Me.minor.tickvals:Me.tickvals,Gt=Ct?[]:Me.ticktext;if(Dt){Array.isArray(Gt)||(Gt=[]);for(var fr=0;fr<Dt.length;fr++){var pr=lt(Dt[fr]);if(pr>We&&pr<st){var Jr=void 0===Gt[fr]?W.tickText(Me,pr):Ie(Me,pr,String(Gt[fr]));Ct&&(Jr.minor=!0,Jr.text=""),pt.push(Jr)}}}}return Me.rangebreaks&&(pt=pt.filter(function(Lr){return Me.maskBreaks(Lr.x)!==R})),pt}W.getDataToCoordFunc=function(Me,Se,Je,We){return te(Me,Se,Je,We).d2c},W.counterLetter=function(Me){var Se=Me.charAt(0);return"x"===Se?"y":"y"===Se?"x":void 0},W.minDtick=function(Me,Se,Je,We){-1===["log","category","multicategory"].indexOf(Me.type)&&We?void 0===Me._minDtick?(Me._minDtick=Se,Me._forceTick0=Je):Me._minDtick&&((Me._minDtick/Se+1e-6)%1<2e-6&&((Je-Me._forceTick0)/Se%1+1.000001)%1<2e-6?(Me._minDtick=Se,Me._forceTick0=Je):((Se/Me._minDtick+1e-6)%1>2e-6||((Je-Me._forceTick0)/Me._minDtick%1+1.000001)%1>2e-6)&&(Me._minDtick=0)):Me._minDtick=0},W.saveRangeInitial=function(Me,Se){for(var Je=W.list(Me,"",!0),We=!1,st=0;st<Je.length;st++){var lt=Je[st],pt=void 0===lt._rangeInitial;(pt&&!1===lt.autorange||Se&&(pt||lt.range[0]!==lt._rangeInitial[0]||lt.range[1]!==lt._rangeInitial[1]))&&(lt._rangeInitial=lt.range.slice(),We=!0)}return We},W.saveShowSpikeInitial=function(Me,Se){for(var Je=W.list(Me,"",!0),We=!1,st="on",lt=0;lt<Je.length;lt++){var pt=Je[lt],Ct=void 0===pt._showSpikeInitial;(Ct||Se&&(Ct||pt.showspikes!==pt._showspikes))&&(pt._showSpikeInitial=pt.showspikes,We=!0),"on"===st&&!pt.showspikes&&(st="off")}return Me._fullLayout._cartesianSpikesEnabled=st,We},W.autoBin=function(Me,Se,Je,We,st,lt){var Dt,pt=e.aggNums(Math.min,null,Me),Ct=e.aggNums(Math.max,null,Me);if("category"===Se.type||"multicategory"===Se.type)return{start:pt-.5,end:Ct+.5,size:Math.max(1,Math.round(lt)||1),_dataSpan:Ct-pt};if(st||(st=Se.calendar),Dt="log"===Se.type?{type:"linear",range:[pt,Ct]}:{type:Se.type,range:e.simpleMap([pt,Ct],Se.c2r,0,st),calendar:st},W.setConvert(Dt),lt=lt&&r.dtick(lt,Dt.type))Dt.dtick=lt,Dt.tick0=r.tick0(void 0,Dt.type,st);else{var Gt;if(Je)Gt=(Ct-pt)/Je;else{var fr=e.distinctVals(Me),pr=Math.pow(10,Math.floor(Math.log(fr.minDiff)/Math.LN10)),Jr=pr*e.roundUp(fr.minDiff/pr,[.9,1.9,4.9,9.9],!0);Gt=Math.max(Jr,2*e.stdev(Me)/Math.pow(Me.length,We?.25:.4)),k(Gt)||(Gt=1)}W.autoTicks(Dt,Gt)}var en,Lr=Dt.dtick,Ar=W.tickIncrement(W.tickFirst(Dt),Lr,"reverse",st);if("number"==typeof Lr)en=(Ar=function re(Me,Se,Je,We,st){var lt=0,pt=0,Ct=0,Dt=0;function Gt(Lr){return(1+100*(Lr-Me)/Je.dtick)%100<2}for(var fr=0;fr<Se.length;fr++)Se[fr]%1==0?Ct++:k(Se[fr])||Dt++,Gt(Se[fr])&&lt++,Gt(Se[fr]+Je.dtick/2)&&pt++;var pr=Se.length-Dt;if(Ct===pr&&"date"!==Je.type)Je.dtick<1?Me=We-.5*Je.dtick:(Me-=.5)+Je.dtick<We&&(Me+=Je.dtick);else if(pt<.1*pr&&(lt>.3*pr||Gt(We)||Gt(st))){var Jr=Je.dtick/2;Me+=Me+Jr<We?Jr:-Jr}return Me}(Ar,Me,Dt,pt,Ct))+(1+Math.floor((Ct-Ar)/Lr))*Lr;else for("M"===Dt.dtick.charAt(0)&&(Ar=function le(Me,Se,Je,We,st){var lt=e.findExactDates(Se,st);if(lt.exactDays>.8){var Ct=Number(Je.substr(1));lt.exactYears>.8&&Ct%12==0?Me=W.tickIncrement(Me,"M6","reverse")+1.5*M:lt.exactMonths>.8?Me=W.tickIncrement(Me,"M1","reverse")+15.5*M:Me-=f;var Dt=W.tickIncrement(Me,Je);if(Dt<=We)return Dt}return Me}(Ar,Me,Lr,pt,st)),en=Ar;en<=Ct;)en=W.tickIncrement(en,Lr,!1,st);return{start:Se.c2r(Ar,0,st),end:Se.c2r(en,0,st),size:Lr,_dataSpan:Ct-pt}},W.prepMinorTicks=function(Me,Se,Je){if(!Se.minor.dtick){delete Me.dtick;var st,We=Se.dtick&&k(Se._tmin);if(We){var lt=W.tickIncrement(Se._tmin,Se.dtick,!0);st=[Se._tmin,.99*lt+.01*Se._tmin]}else{var pt=e.simpleMap(Se.range,Se.r2l);st=[pt[0],.8*pt[0]+.2*pt[1]]}if(Me.range=e.simpleMap(st,Se.l2r),Me._isMinor=!0,W.prepTicks(Me,Je),We){var Ct=k(Se.dtick),Dt=k(Me.dtick),Gt=Ct?Se.dtick:+Se.dtick.substring(1),fr=Dt?Me.dtick:+Me.dtick.substring(1);Ct&&Dt?ge(Gt,fr)?Gt===2*T&&fr===2*M&&(Me.dtick=T):Me.dtick=Gt===2*T&&fr===3*M?T:Gt!==T||(Se._input.minor||{}).nticks?pe(Gt/fr,2.5)?Gt/2:Gt:M:"M"===String(Se.dtick).charAt(0)?Dt?Me.dtick="M1":ge(Gt,fr)?Gt>=12&&2===fr&&(Me.dtick="M3"):Me.dtick=Se.dtick:"L"===String(Me.dtick).charAt(0)?"L"===String(Se.dtick).charAt(0)?ge(Gt,fr)||(Me.dtick=pe(Gt/fr,2.5)?Se.dtick/2:Se.dtick):Me.dtick="D1":"D2"===Me.dtick&&+Se.dtick>1&&(Me.dtick=1)}Me.range=Se.range}void 0===Se.minor._tick0Init&&(Me.tick0=Se.tick0)},W.prepTicks=function(Me,Se){var Je=e.simpleMap(Me.range,Me.r2l,void 0,void 0,Se);if("auto"===Me.tickmode||!Me.dtick){var st,We=Me.nticks;We||("category"===Me.type||"multicategory"===Me.type?(st=Me.tickfont?e.bigFont(Me.tickfont.size||12):15,We=Me._length/st):(st="y"===Me._id.charAt(0)?40:80,We=e.constrain(Me._length/st,4,9)+1),"radialaxis"===Me._name&&(We*=2)),Me.minor&&"array"!==Me.minor.tickmode||"array"===Me.tickmode&&(We*=100),Me._roughDTick=Math.abs(Je[1]-Je[0])/We,W.autoTicks(Me,Me._roughDTick),Me._minDtick>0&&Me.dtick<2*Me._minDtick&&(Me.dtick=Me._minDtick,Me.tick0=Me.l2r(Me._forceTick0))}"period"===Me.ticklabelmode&&function ke(Me){var Se;function Je(){return!(k(Me.dtick)||"M"!==Me.dtick.charAt(0))}var We=Je(),st=W.getTickFormat(Me);if(st){var lt=Me._dtickInit!==Me.dtick;/%[fLQsSMX]/.test(st)||(/%[HI]/.test(st)?(Se=u,lt&&!We&&Me.dtick<u&&(Me.dtick=u)):/%p/.test(st)?(Se=f,lt&&!We&&Me.dtick<f&&(Me.dtick=f)):/%[Aadejuwx]/.test(st)?(Se=M,lt&&!We&&Me.dtick<M&&(Me.dtick=M)):/%[UVW]/.test(st)?(Se=T,lt&&!We&&Me.dtick<T&&(Me.dtick=T)):/%[Bbm]/.test(st)?(Se=y,lt&&(We?xe(Me.dtick)<1:Me.dtick<A)&&(Me.dtick="M1")):/%[q]/.test(st)?(Se=p,lt&&(We?xe(Me.dtick)<3:Me.dtick<w)&&(Me.dtick="M3")):/%[Yy]/.test(st)&&(Se=b,lt&&(We?xe(Me.dtick)<12:Me.dtick<x)&&(Me.dtick="M12")))}(We=Je())&&Me.tick0===Me._dowTick0&&(Me.tick0=Me._rawTick0),Me._definedDelta=Se}(Me),Me.tick0||(Me.tick0="date"===Me.type?"2000-01-01":0),"date"===Me.type&&Me.dtick<.1&&(Me.dtick=.1),Be(Me)},W.calcTicks=function(Se,Je){for(var We=Se.type,st=Se.calendar,lt=Se.ticklabelstep,pt="period"===Se.ticklabelmode,Ct=e.simpleMap(Se.range,Se.r2l,void 0,void 0,Je),Dt=Ct[1]<Ct[0],Gt=Math.min(Ct[0],Ct[1]),fr=Math.max(Ct[0],Ct[1]),pr=Math.max(1e3,Se._length||0),Jr=[],Lr=[],Ar=[],en=[],mr=Se.minor&&(Se.minor.ticks||Se.minor.showgrid),wr=1;wr>=(mr?0:1);wr--){var Wr=!wr;wr?(Se._dtickInit=Se.dtick,Se._tick0Init=Se.tick0):(Se.minor._dtickInit=Se.minor.dtick,Se.minor._tick0Init=Se.minor.tick0);var Kr=wr?Se:e.extendFlat({},Se,Se.minor);if(Wr?W.prepMinorTicks(Kr,Se,Je):W.prepTicks(Kr,Je),"array"!==Kr.tickmode){var Cr=Y(Ct),it=Cr[0],It=Cr[1],Qt=k(Kr.dtick),ir="log"===We&&!(Qt||"L"===Kr.dtick.charAt(0)),Or=W.tickFirst(Kr,Je);if(wr){if(Se._tmin=Or,Or<it!==Dt)break;("category"===We||"multicategory"===We)&&(It=Dt?Math.max(-.5,It):Math.min(Se._categories.length-.5,It))}var kr,Zr,qr=null,Ir=Or;wr&&(Qt?Zr=Se.dtick:"date"===We?"string"==typeof Se.dtick&&"M"===Se.dtick.charAt(0)&&(Zr=y*Se.dtick.substring(1)):Zr=Se._roughDTick,kr=Math.round((Se.r2l(Ir)-Se.r2l(Se.tick0))/Zr)-1);var An=Kr.dtick;for(Kr.rangebreaks&&Kr._tick0Init!==Kr.tick0&&(Ir=je(Ir,Se),Dt||(Ir=W.tickIncrement(Ir,An,!Dt,st))),wr&&pt&&(Ir=W.tickIncrement(Ir,An,!Dt,st),kr--);Dt?Ir>=It:Ir<=It;Ir=W.tickIncrement(Ir,An,Dt,st)){if(wr&&kr++,Kr.rangebreaks&&!Dt){if(Ir<it)continue;if(Kr.maskBreaks(Ir)===R&&je(Ir,Kr)>=fr)break}if(Ar.length>pr||Ir===qr)break;qr=Ir;var wn={value:Ir};wr?(ir&&Ir!==(0|Ir)&&(wn.simpleLabel=!0),lt>1&&kr%lt&&(wn.skipLabel=!0),Ar.push(wn)):(wn.minor=!0,en.push(wn))}}else wr?(Ar=[],Jr=de(Se)):(en=[],Lr=de(Se))}var Va;if(mr&&!("inside"===Se.minor.ticks&&"outside"===Se.ticks||"outside"===Se.minor.ticks&&"inside"===Se.ticks)){for(var Ln=Ar.map(function(pa){return pa.value}),Wn=[],$n=0;$n<en.length;$n++){var wa=en[$n],ma=wa.value;if(-1===Ln.indexOf(ma)){for(var $a=!1,Ja=0;!$a&&Ja<Ar.length;Ja++)1e7+Ar[Ja].value===1e7+ma&&($a=!0);$a||Wn.push(wa)}}en=Wn}if(pt&&function we(Me,Se,Je){for(var We=0;We<Me.length;We++){var st=Me[We].value,lt=We,pt=We+1;We<Me.length-1?(lt=We,pt=We+1):We>0?(lt=We-1,pt=We):(lt=We,pt=We);var Jr,Gt=Math.abs(Me[pt].value-Me[lt].value),fr=Je||Gt,pr=0;fr>=x?pr=Gt>=x&&Gt<=s?Gt:b:Je===p&&fr>=w?pr=Gt>=w&&Gt<=S?Gt:p:fr>=A?pr=Gt>=A&&Gt<=l?Gt:y:Je===T&&fr>=T?pr=T:fr>=M?pr=M:Je===f&&fr>=f?pr=f:Je===u&&fr>=u&&(pr=u),pr>=Gt&&(pr=Gt,Jr=!0);var Lr=st+pr;if(Se.rangebreaks&&pr>0){for(var en=0,mr=0;mr<84;mr++){var wr=(mr+.5)/84;Se.maskBreaks(st*(1-wr)+wr*Lr)!==R&&en++}(pr*=en/84)||(Me[We].drop=!0),Jr&&Gt>T&&(pr=Gt)}(pr>0||0===We)&&(Me[We].periodX=st+pr/2)}}(Ar,Se,Se._definedDelta),Se.rangebreaks){var ai="y"===Se._id.charAt(0),Er=1;"auto"===Se.tickmode&&(Er=Se.tickfont?Se.tickfont.size:12);var gn=NaN;for(Va=Ar.length-1;Va>-1;Va--)if(Ar[Va].drop)Ar.splice(Va,1);else{Ar[Va].value=je(Ar[Va].value,Se);var dn=Se.c2p(Ar[Va].value);(ai?gn>dn-Er:gn<dn+Er)?Ar.splice(Dt?Va+1:Va,1):gn=dn}}tt(Se)&&360===Math.abs(Ct[1]-Ct[0])&&Ar.pop(),Se._tmax=(Ar[Ar.length-1]||{}).value,Se._prevDateHead="",Se._inCalcTicks=!0;var kn,ra,Gn,Un=function(pa){pa.text="",Se._prevDateHead=kn};for(Ar=Ar.concat(en),Va=0;Va<Ar.length;Va++){var Xn=Ar[Va].value;Ar[Va].minor?Lr.push({x:Xn,minor:!0}):(kn=Se._prevDateHead,ra=W.tickText(Se,Xn,!1,Ar[Va].simpleLabel),void 0!==(Gn=Ar[Va].periodX)&&(ra.periodX=Gn,(Gn>fr||Gn<Gt)&&(Gn>fr&&(ra.periodX=fr),Gn<Gt&&(ra.periodX=Gt),Un(ra))),Ar[Va].skipLabel&&Un(ra),Jr.push(ra))}return Jr=Jr.concat(Lr),Se._inCalcTicks=!1,pt&&Jr.length&&(Jr[0].noTick=!0),Jr};var be=[2,5,10],Le=[1,2,3,6,12],De=[1,2,5,10,15,30],ye=[1,2,3,7,14],Ce=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Fe=[-.301,0,.301,.699,1],Ke=[15,30,45,90,180];function Ue(Me,Se,Je){return Se*e.roundUp(Me/Se,Je)}function Be(Me){var Se=Me.dtick;if(Me._tickexponent=0,!k(Se)&&"string"!=typeof Se&&(Se=1),("category"===Me.type||"multicategory"===Me.type)&&(Me._tickround=null),"date"===Me.type){var Je=Me.r2l(Me.tick0),We=Me.l2r(Je).replace(/(^-|i)/g,""),st=We.length;if("M"===String(Se).charAt(0))Me._tickround=st>10||"01-01"!==We.substr(5)?"d":+Se.substr(1)%12==0?"y":"m";else if(Se>=M&&st<=10||Se>=15*M)Me._tickround="d";else if(Se>=h&&st<=16||Se>=u)Me._tickround="M";else if(Se>=o&&st<=19||Se>=h)Me._tickround="S";else{var lt=Me.l2r(Je+Se).replace(/^-/,"").length;Me._tickround=Math.max(st,lt)-20,Me._tickround<0&&(Me._tickround=4)}}else if(k(Se)||"L"===Se.charAt(0)){var pt=Me.range.map(Me.r2d||Number);k(Se)||(Se=Number(Se.substr(1))),Me._tickround=2-Math.floor(Math.log(Se)/Math.LN10+.01);var Ct=Math.max(Math.abs(pt[0]),Math.abs(pt[1])),Dt=Math.floor(Math.log(Ct)/Math.LN10+.01),Gt=void 0===Me.minexponent?3:Me.minexponent;Math.abs(Dt)>Gt&&(Me._tickexponent=at(Me.exponentformat)&&!vt(Dt)?3*Math.round((Dt-1)/3):Dt)}else Me._tickround=null}function Ie(Me,Se,Je){var We=Me.tickfont||{};return{x:Se,dx:0,dy:0,text:Je||"",fontSize:We.size,font:We.family,fontColor:We.color}}function Zt(Me,Se,Je,We,st){if("radians"!==Me.thetaunit||Je)Se.text=Qe(Se.x,Me,st,We);else{var lt=Se.x/180;if(0===lt)Se.text="0";else{var pt=function Et(Me){function Se(Ct,Dt){return Math.abs(Ct-Dt)<=1e-6}function Je(Ct,Dt){return Se(Dt,0)?Ct:Je(Dt,Ct%Dt)}function We(Ct){for(var Dt=1;!Se(Math.round(Ct*Dt)/Dt,Ct);)Dt*=10;return Dt}var st=We(Me),lt=Me*st,pt=Math.abs(Je(lt,st));return[Math.round(lt/pt),Math.round(st/pt)]}(lt);if(pt[1]>=100)Se.text=Qe(e.deg2rad(Se.x),Me,st,We);else{var Ct=Se.x<0;Se.text=1===pt[1]?1===pt[0]?"\u03c0":pt[0]+"\u03c0":["<sup>",pt[0],"</sup>","\u2044","<sub>",pt[1],"</sub>","\u03c0"].join(""),Ct&&(Se.text=C+Se.text)}}}}W.autoTicks=function(Me,Se,Je){var We;function st(pr){return Math.pow(pr,Math.floor(Math.log(Se)/Math.LN10))}if("date"===Me.type){Me.tick0=e.dateTick0(Me.calendar,0);var lt=2*Se;if(lt>b)Se/=b,We=st(10),Me.dtick="M"+12*Ue(Se,We,be);else if(lt>y)Me.dtick="M"+Ue(Se/=y,1,Le);else if(lt>M){if(Me.dtick=Ue(Se,M,Me._hasDayOfWeekBreaks?[1,2,7,14]:ye),!Je){var pt=W.getTickFormat(Me),Ct="period"===Me.ticklabelmode;Ct&&(Me._rawTick0=Me.tick0),Me.tick0=/%[uVW]/.test(pt)?e.dateTick0(Me.calendar,2):e.dateTick0(Me.calendar,1),Ct&&(Me._dowTick0=Me.tick0)}}else lt>u?Me.dtick=Ue(Se,u,Le):lt>h?Me.dtick=Ue(Se,h,De):lt>o?Me.dtick=Ue(Se,o,De):(We=st(10),Me.dtick=Ue(Se,We,be))}else if("log"===Me.type){Me.tick0=0;var Dt=e.simpleMap(Me.range,Me.r2l);if(Me._isMinor&&(Se*=1.5),Se>.7)Me.dtick=Math.ceil(Se);else if(Math.abs(Dt[1]-Dt[0])<1){var Gt=1.5*Math.abs((Dt[1]-Dt[0])/Se);Se=Math.abs(Math.pow(10,Dt[1])-Math.pow(10,Dt[0]))/Gt,We=st(10),Me.dtick="L"+Ue(Se,We,be)}else Me.dtick=Se>.3?"D2":"D1"}else"category"===Me.type||"multicategory"===Me.type?(Me.tick0=0,Me.dtick=Math.ceil(Math.max(Se,1))):tt(Me)?(Me.tick0=0,Me.dtick=Ue(Se,We=1,Ke)):(Me.tick0=0,We=st(10),Me.dtick=Ue(Se,We,be));if(0===Me.dtick&&(Me.dtick=1),!k(Me.dtick)&&"string"!=typeof Me.dtick){var fr=Me.dtick;throw Me.dtick=1,"ax.dtick error: "+String(fr)}},W.tickIncrement=function(Me,Se,Je,We){var st=Je?-1:1;if(k(Se))return e.increment(Me,st*Se);var lt=Se.charAt(0),pt=st*Number(Se.substr(1));if("M"===lt)return e.incrementMonth(Me,pt,We);if("L"===lt)return Math.log(Math.pow(10,Me)+pt)/Math.LN10;if("D"===lt){var Ct="D2"===Se?Fe:Ce,Dt=Me+.01*st,Gt=e.roundUp(e.mod(Dt,1),Ct,Je);return Math.floor(Dt)+Math.log(_.round(Math.pow(10,Gt),1))/Math.LN10}throw"unrecognized dtick "+String(Se)},W.tickFirst=function(Me,Se){var Je=Me.r2l||Number,We=e.simpleMap(Me.range,Je,void 0,void 0,Se),st=We[1]<We[0],lt=st?Math.floor:Math.ceil,pt=Y(We)[0],Ct=Me.dtick,Dt=Je(Me.tick0);if(k(Ct)){var Gt=lt((pt-Dt)/Ct)*Ct+Dt;return("category"===Me.type||"multicategory"===Me.type)&&(Gt=e.constrain(Gt,0,Me._categories.length-1)),Gt}var fr=Ct.charAt(0),pr=Number(Ct.substr(1));if("M"===fr){for(var Ar,en,mr,Jr=0,Lr=Dt;Jr<10;){if(((Ar=W.tickIncrement(Lr,Ct,st,Me.calendar))-pt)*(Lr-pt)<=0)return st?Math.min(Lr,Ar):Math.max(Lr,Ar);en=(pt-(Lr+Ar)/2)/(Ar-Lr),mr=fr+(Math.abs(Math.round(en))||1)*pr,Lr=W.tickIncrement(Lr,mr,en<0?!st:st,Me.calendar),Jr++}return e.error("tickFirst did not converge",Me),Lr}if("L"===fr)return Math.log(lt((Math.pow(10,pt)-Dt)/pr)*pr+Dt)/Math.LN10;if("D"===fr){var wr="D2"===Ct?Fe:Ce,Wr=e.roundUp(e.mod(pt,1),wr,st);return Math.floor(pt)+Math.log(_.round(Math.pow(10,Wr),1))/Math.LN10}throw"unrecognized dtick "+String(Ct)},W.tickText=function(Me,Se,Je,We){var Gt,st=Ie(Me,Se),lt="array"===Me.tickmode,pt=Je||lt,Ct=Me.type,Dt="category"===Ct?Me.d2l_noadd:Me.d2l;if(lt&&Array.isArray(Me.ticktext)){var fr=e.simpleMap(Me.range,Me.r2l),pr=(Math.abs(fr[1]-fr[0])-(Me._lBreaks||0))/1e4;for(Gt=0;Gt<Me.ticktext.length&&!(Math.abs(Se-Dt(Me.tickvals[Gt]))<pr);Gt++);if(Gt<Me.ticktext.length)return st.text=String(Me.ticktext[Gt]),st}function Jr(en){return void 0===en||(Je?"none"===en:"all"!==en&&Se!=={first:Me._tmin,last:Me._tmax}[en])}var Lr=Je?"never":"none"!==Me.exponentformat&&Jr(Me.showexponent)?"hide":"";if("date"===Ct?function nt(Me,Se,Je,We){var st=Me._tickround,lt=Je&&Me.hoverformat||W.getTickFormat(Me);We&&(st=k(st)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[st]);var Ct,pt=e.formatDate(Se.x,lt,st,Me._dateFormat,Me.calendar,Me._extraFormat),Dt=pt.indexOf("\n");if(-1!==Dt&&(Ct=pt.substr(Dt+1),pt=pt.substr(0,Dt)),We&&("00:00:00"===pt||"00:00"===pt?(pt=Ct,Ct=""):8===pt.length&&(pt=pt.replace(/:00$/,""))),Ct)if(Je)"d"===st?pt+=", "+Ct:pt=Ct+(pt?", "+pt:"");else if(Me._inCalcTicks&&Me._prevDateHead===Ct){var Gt=ct(Me),fr=Me._trueSide||Me.side;(!Gt&&"top"===fr||Gt&&"bottom"===fr)&&(pt+="<br> ")}else Me._prevDateHead=Ct,pt+="<br>"+Ct;Se.text=pt}(Me,st,Je,pt):"log"===Ct?function gt(Me,Se,Je,We,st){var lt=Me.dtick,pt=Se.x,Ct=Me.tickformat,Dt="string"==typeof lt&&lt.charAt(0);if("never"===st&&(st=""),We&&"L"!==Dt&&(lt="L3",Dt="L"),Ct||"L"===Dt)Se.text=Qe(Math.pow(10,pt),Me,st,We);else if(k(lt)||"D"===Dt&&e.mod(pt+.01,1)<.1){var Gt=Math.round(pt),fr=Math.abs(Gt),pr=Me.exponentformat;"power"===pr||at(pr)&&vt(Gt)?(Se.text=0===Gt?1:1===Gt?"10":"10<sup>"+(Gt>1?"":C)+fr+"</sup>",Se.fontSize*=1.25):("e"===pr||"E"===pr)&&fr>2?Se.text="1"+pr+(Gt>0?"+":C)+fr:(Se.text=Qe(Math.pow(10,pt),Me,"","fakehover"),"D1"===lt&&"y"===Me._id.charAt(0)&&(Se.dy-=Se.fontSize/6))}else{if("D"!==Dt)throw"unrecognized dtick "+String(lt);Se.text=String(Math.round(Math.pow(10,e.mod(pt,1)))),Se.fontSize*=.75}if("D1"===Me.dtick){var Jr=String(Se.text).charAt(0);("0"===Jr||"1"===Jr)&&("y"===Me._id.charAt(0)?Se.dx-=Se.fontSize/4:(Se.dy+=Se.fontSize/2,Se.dx+=(Me.range[1]>Me.range[0]?1:-1)*Se.fontSize*(pt<0?.5:.25)))}}(Me,st,0,pt,Lr):"category"===Ct?function Nt(Me,Se){var Je=Me._categories[Math.round(Se.x)];void 0===Je&&(Je=""),Se.text=String(Je)}(Me,st):"multicategory"===Ct?function St(Me,Se,Je){var We=Math.round(Se.x),st=Me._categories[We]||[],lt=void 0===st[1]?"":String(st[1]),pt=void 0===st[0]?"":String(st[0]);Je?Se.text=pt+" - "+lt:(Se.text=lt,Se.text2=pt)}(Me,st,Je):tt(Me)?Zt(Me,st,Je,pt,Lr):function Bt(Me,Se,Je,We,st){"never"===st?st="":"all"===Me.showexponent&&Math.abs(Se.x/Me.dtick)<1e-6&&(st="hide"),Se.text=Qe(Se.x,Me,st,We)}(Me,st,0,pt,Lr),We||(Me.tickprefix&&!Jr(Me.showtickprefix)&&(st.text=Me.tickprefix+st.text),Me.ticksuffix&&!Jr(Me.showticksuffix)&&(st.text+=Me.ticksuffix)),"boundaries"===Me.tickson||Me.showdividers){var Ar=function(en){var mr=Me.l2p(en);return mr>=0&&mr<=Me._length?en:null};st.xbnd=[Ar(st.x-.5),Ar(st.x+Me.dtick-.5)]}return st},W.hoverLabelText=function(Me,Se,Je){Je&&(Me=e.extendFlat({},Me,{hoverformat:Je}));var We=Array.isArray(Se)?Se[0]:Se,st=Array.isArray(Se)?Se[1]:void 0;if(void 0!==st&&st!==We)return W.hoverLabelText(Me,We,Je)+" - "+W.hoverLabelText(Me,st,Je);var lt="log"===Me.type&&We<=0,pt=W.tickText(Me,Me.c2l(lt?-We:We),"hover").text;return lt?0===We?"0":C+pt:pt};var wt=["f","p","n","\u03bc","m","","k","M","G","T"];function at(Me){return"SI"===Me||"B"===Me}function vt(Me){return Me>14||Me<-15}function Qe(Me,Se,Je,We){var st=Me<0,lt=Se._tickround,pt=Je||Se.exponentformat||"B",Ct=Se._tickexponent,Dt=W.getTickFormat(Se),Gt=Se.separatethousands;if(We){var fr={exponentformat:pt,minexponent:Se.minexponent,dtick:"none"===Se.showexponent?Se.dtick:k(Me)&&Math.abs(Me)||1,range:"none"===Se.showexponent?Se.range.map(Se.r2d):[0,Me||1]};Be(fr),lt=(Number(fr._tickround)||0)+4,Ct=fr._tickexponent,Se.hoverformat&&(Dt=Se.hoverformat)}if(Dt)return Se._numFormat(Dt)(Me).replace(/-/g,C);var Ar,pr=Math.pow(10,-lt)/2;if("none"===pt&&(Ct=0),(Me=Math.abs(Me))<pr)Me="0",st=!1;else{if(Me+=pr,Ct&&(Me*=Math.pow(10,-Ct),lt+=Ct),0===lt)Me=String(Math.floor(Me));else if(lt<0){Me=(Me=String(Math.round(Me))).substr(0,Me.length+lt);for(var Jr=lt;Jr<0;Jr++)Me+="0"}else{var Lr=(Me=String(Me)).indexOf(".")+1;Lr&&(Me=Me.substr(0,Lr+lt).replace(/\.?0+$/,""))}Me=e.numSeparate(Me,Se._separators,Gt)}return Ct&&"hide"!==pt&&(at(pt)&&vt(Ct)&&(pt="power"),Ar=Ct<0?C+-Ct:"power"!==pt?"+"+Ct:String(Ct),"e"===pt||"E"===pt?Me+=pt+Ar:"power"===pt?Me+="\xd710<sup>"+Ar+"</sup>":"B"===pt&&9===Ct?Me+="B":at(pt)&&(Me+=wt[Ct/3+5])),st?C+Me:Me}function Ze(Me,Se){for(var Je=[],We={},st=0;st<Se.length;st++){var lt=Se[st];We[lt.text2]?We[lt.text2].push(lt.x):We[lt.text2]=[lt.x]}for(var pt in We)Je.push(Ie(Me,e.interp(We[pt],.5),pt));return Je}function kt(Me){return void 0!==Me.periodX?Me.periodX:Me.x}function Xt(Me){return[Me.text,Me.x,Me.axInfo,Me.font,Me.fontSize,Me.fontColor].join("_")}function Ut(Me){var Se=Me.title.font.size,Je=(Me.title.text.match(d.BR_TAG_ALL)||[]).length;return Me.title.hasOwnProperty("standoff")?Je?Se*(X+Je*oe):Se*X:Je?Se*(Je+1)*oe:Se}function nr(Me,Se){var Je=Me.l2p(Se);return Je>1&&Je<Me._length-1}function Hr(Me){var Se=_.select(Me),Je=Se.select(".text-math-group");return Je.empty()?Se.select("text"):Je}function on(Me){return Me._id+".automargin"}function jr(Me){return on(Me)+".mirror"}function et(Me){return Me._id+".rangeslider"}function qt(Me,Se){for(var Je=0;Je<Se.length;Je++)-1===Me.indexOf(Se[Je])&&Me.push(Se[Je])}function Vt(Me,Se,Je){var pt,Ct,We=[],st=[],lt=Me.layout;for(pt=0;pt<Se.length;pt++)We.push(W.getFromId(Me,Se[pt]));for(pt=0;pt<Je.length;pt++)st.push(W.getFromId(Me,Je[pt]));var Dt=Object.keys(a),Gt=["anchor","domain","overlaying","position","side","tickangle","editType"],fr=["linear","log"];for(pt=0;pt<Dt.length;pt++){var pr=Dt[pt],Jr=We[0][pr],Lr=st[0][pr],Ar=!0,en=!1,mr=!1;if("_"!==pr.charAt(0)&&"function"!=typeof Jr&&-1===Gt.indexOf(pr)){for(Ct=1;Ct<We.length&&Ar;Ct++){var wr=We[Ct][pr];"type"===pr&&-1!==fr.indexOf(Jr)&&-1!==fr.indexOf(wr)&&Jr!==wr?en=!0:wr!==Jr&&(Ar=!1)}for(Ct=1;Ct<st.length&&Ar;Ct++){var Wr=st[Ct][pr];"type"===pr&&-1!==fr.indexOf(Lr)&&-1!==fr.indexOf(Wr)&&Lr!==Wr?mr=!0:st[Ct][pr]!==Lr&&(Ar=!1)}Ar&&(en&&(lt[We[0]._name].type="linear"),mr&&(lt[st[0]._name].type="linear"),Tr(lt,pr,We,st,Me._fullLayout._dfltTitle))}}for(pt=0;pt<Me._fullLayout.annotations.length;pt++){var Kr=Me._fullLayout.annotations[pt];-1!==Se.indexOf(Kr.xref)&&-1!==Je.indexOf(Kr.yref)&&e.swapAttrs(lt.annotations[pt],["?"])}}function Tr(Me,Se,Je,We,st){var Dt,lt=e.nestedProperty,pt=lt(Me[Je[0]._name],Se).get(),Ct=lt(Me[We[0]._name],Se).get();for("title"===Se&&(pt&&pt.text===st.x&&(pt.text=st.y),Ct&&Ct.text===st.y&&(Ct.text=st.x)),Dt=0;Dt<Je.length;Dt++)lt(Me,Je[Dt]._name+"."+Se).set(Ct);for(Dt=0;Dt<We.length;Dt++)lt(Me,We[Dt]._name+"."+Se).set(pt)}function tt(Me){return"angularaxis"===Me._id}function je(Me,Se){for(var Je=Se._rangebreaks.length,We=0;We<Je;We++){var st=Se._rangebreaks[We];if(Me>=st.min&&Me<st.max)return st.max}return Me}function ct(Me){return-1!==(Me.ticklabelposition||"").indexOf("inside")}function ht(Me,Se){ct(Me._anchorAxis||{})&&Me._hideCounterAxisInsideTickLabels&&Me._hideCounterAxisInsideTickLabels(Se)}W.getTickFormat=function(Me){var Se,pt,Ct,Dt,Gt,pr,Jr,Lr;function Je(Dt){return"string"!=typeof Dt?Dt:Number(Dt.replace("M",""))*y}function We(Dt,Gt){var fr=["L","D"];if(typeof Dt==typeof Gt){if("number"==typeof Dt)return Dt-Gt;var pr=fr.indexOf(Dt.charAt(0)),Jr=fr.indexOf(Gt.charAt(0));return pr===Jr?Number(Dt.replace(/(L|D)/g,""))-Number(Gt.replace(/(L|D)/g,"")):pr-Jr}return"number"==typeof Dt?1:-1}function lt(Dt,Gt){var fr=null===Gt[0],pr=null===Gt[1],Jr=We(Dt,Gt[0])>=0,Lr=We(Dt,Gt[1])<=0;return(fr||Jr)&&(pr||Lr)}if(Me.tickformatstops&&Me.tickformatstops.length>0)switch(Me.type){case"date":case"linear":for(Se=0;Se<Me.tickformatstops.length;Se++)if((Ct=Me.tickformatstops[Se]).enabled&&(Dt=Me.dtick,pr=void 0,Jr=void 0,Lr=void 0,pr=Je||function(Ar){return Ar},Lr=(Gt=Ct.dtickrange)[1],(!(Jr=Gt[0])&&"number"!=typeof Jr||pr(Jr)<=pr(Dt))&&(!Lr&&"number"!=typeof Lr||pr(Lr)>=pr(Dt)))){pt=Ct;break}break;case"log":for(Se=0;Se<Me.tickformatstops.length;Se++)if((Ct=Me.tickformatstops[Se]).enabled&&lt(Me.dtick,Ct.dtickrange)){pt=Ct;break}}return pt?pt.value:Me.tickformat},W.getSubplots=function(Me,Se){var Je=Me._fullLayout._subplots,We=Je.cartesian.concat(Je.gl2d||[]),st=Se?W.findSubplotsWithAxis(We,Se):We;return st.sort(function(lt,pt){var Ct=lt.substr(1).split("y"),Dt=pt.substr(1).split("y");return Ct[0]===Dt[0]?+Ct[1]-+Dt[1]:+Ct[0]-+Dt[0]}),st},W.findSubplotsWithAxis=function(Me,Se){for(var Je=new RegExp("x"===Se._id.charAt(0)?"^"+Se._id+"y":Se._id+"$"),We=[],st=0;st<Me.length;st++){var lt=Me[st];Je.test(lt)&&We.push(lt)}return We},W.makeClipPaths=function(Me){var Se=Me._fullLayout;if(!Se._hasOnlyLargeSploms){var Ct,Dt,Je={_offset:0,_length:Se.width,_id:""},We={_offset:0,_length:Se.height,_id:""},st=W.list(Me,"x",!0),lt=W.list(Me,"y",!0),pt=[];for(Ct=0;Ct<st.length;Ct++)for(pt.push({x:st[Ct],y:We}),Dt=0;Dt<lt.length;Dt++)0===Ct&&pt.push({x:Je,y:lt[Dt]}),pt.push({x:st[Ct],y:lt[Dt]});var Gt=Se._clips.selectAll(".axesclip").data(pt,function(fr){return fr.x._id+fr.y._id});Gt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(fr){return"clip"+Se._uid+fr.x._id+fr.y._id}).append("rect"),Gt.exit().remove(),Gt.each(function(fr){_.select(this).select("rect").attr({x:fr.x._offset||0,y:fr.y._offset||0,width:fr.x._length||1,height:fr.y._length||1})})}},W.draw=function(Me,Se,Je){var We=Me._fullLayout;"redraw"===Se&&We._paper.selectAll("g.subplot").each(function(lt){var Ct=We._plots[lt[0]];if(Ct){var Dt=Ct.xaxis,Gt=Ct.yaxis;Ct.xaxislayer.selectAll("."+Dt._id+"tick").remove(),Ct.yaxislayer.selectAll("."+Gt._id+"tick").remove(),Ct.xaxislayer.selectAll("."+Dt._id+"tick2").remove(),Ct.yaxislayer.selectAll("."+Gt._id+"tick2").remove(),Ct.xaxislayer.selectAll("."+Dt._id+"divider").remove(),Ct.yaxislayer.selectAll("."+Gt._id+"divider").remove(),Ct.minorGridlayer&&Ct.minorGridlayer.selectAll("path").remove(),Ct.gridlayer&&Ct.gridlayer.selectAll("path").remove(),Ct.zerolinelayer&&Ct.zerolinelayer.selectAll("path").remove(),We._infolayer.select(".g-"+Dt._id+"title").remove(),We._infolayer.select(".g-"+Gt._id+"title").remove()}});var st=Se&&"redraw"!==Se?Se:W.listIds(Me);return e.syncOrAsync(st.map(function(lt){return function(){if(lt){var pt=W.getFromId(Me,lt),Ct=W.drawOne(Me,pt,Je);return pt._r=pt.range.slice(),pt._rl=e.simpleMap(pt._r,pt.r2l),Ct}}}))},W.drawOne=function(Me,Se,Je){var We,st,lt;Je=Je||{},Se.setScale();var pt=Me._fullLayout,Ct=Se._id,Dt=Ct.charAt(0),Gt=W.counterLetter(Ct),fr=pt._plots[Se._mainSubplot];if(fr){var pr=fr[Dt+"axislayer"],Jr=Se._mainLinePosition,Lr=Se._mainMirrorPosition,Ar=Se._vals=W.calcTicks(Se),en=[Se.mirror,Jr,Lr].join("_");for(We=0;We<Ar.length;We++)Ar[We].axInfo=en;Se._selections={},Se._tickAngles&&(Se._prevTickAngles=Se._tickAngles),Se._tickAngles={},Se._depth=null;var mr={};if(Se.visible){var Cr,it,Wr=W.makeTransTickFn(Se),Kr=W.makeTransTickLabelFn(Se),It="inside"===Se.ticks,Qt="outside"===Se.ticks;if("boundaries"===Se.tickson){var ir=function Pe(Me,Se){var We,Je=[],st=function(lt,pt){var Ct=lt.xbnd[pt];null!==Ct&&Je.push(e.extendFlat({},lt,{x:Ct}))};if(Se.length){for(We=0;We<Se.length;We++)st(Se[We],0);st(Se[We-1],1)}return Je}(0,Ar);it=W.clipEnds(Se,ir),Cr=It?it:ir}else it=W.clipEnds(Se,Ar),Cr=It&&"period"!==Se.ticklabelmode?it:Ar;var Or=Se._gridVals=it,qr=function Xe(Me,Se){var We,st,Je=[],lt=Se.length&&Se[Se.length-1].x<Se[0].x,pt=function(Dt,Gt){var fr=Dt.xbnd[Gt];null!==fr&&Je.push(e.extendFlat({},Dt,{x:fr}))};if(Me.showdividers&&Se.length){for(We=0;We<Se.length;We++){var Ct=Se[We];Ct.text2!==st&&pt(Ct,lt?1:0),st=Ct.text2}pt(Se[We-1],lt?0:1)}return Je}(Se,Ar);if(!pt._hasOnlyLargeSploms){var Ir=Se._subplotsWith,kr={};for(We=0;We<Ir.length;We++){var Zr=(lt=pt._plots[st=Ir[We]])[Gt+"axis"],An=Zr._mainAxis._id;if(!kr[An]){kr[An]=1;var wn="x"===Dt?"M0,"+Zr._offset+"v"+Zr._length:"M"+Zr._offset+",0h"+Zr._length;W.drawGrid(Me,Se,{vals:Or,counterAxis:Zr,layer:lt.gridlayer.select("."+Ct),minorLayer:lt.minorGridlayer.select("."+Ct),path:wn,transFn:Wr}),W.drawZeroLine(Me,Se,{counterAxis:Zr,layer:lt.zerolinelayer,path:wn,transFn:Wr})}}}var Zn,Ln=W.getTickSigns(Se),Wn=W.getTickSigns(Se,"minor");if(Se.ticks||Se.minor&&Se.minor.ticks){var ma,$a,Ja,Va,$n=W.makeTickPath(Se,Jr,Ln[2]),wa=W.makeTickPath(Se,Jr,Wn[2],{minor:!0});if(Se._anchorAxis&&Se.mirror&&!0!==Se.mirror?(ma=W.makeTickPath(Se,Lr,Ln[3]),$a=W.makeTickPath(Se,Lr,Wn[3],{minor:!0}),Ja=$n+ma,Va=wa+$a):(ma="",$a="",Ja=$n,Va=wa),Se.showdividers&&Qt&&"boundaries"===Se.tickson){var ai={};for(We=0;We<qr.length;We++)ai[qr[We].x]=1;Zn=function(pa){return ai[pa.x]?ma:Ja}}else Zn=function(pa){return pa.minor?Va:Ja}}if(W.drawTicks(Me,Se,{vals:Cr,layer:pr,path:Zn,transFn:Wr}),"allticks"===Se.mirror){var Er=Object.keys(Se._linepositions||{});for(We=0;We<Er.length;We++){lt=pt._plots[st=Er[We]];var gn=Se._linepositions[st]||[],kn=gn[1],Un=gn[2],ra=W.makeTickPath(Se,gn[0],Un?Ln[0]:Wn[0],{minor:Un})+W.makeTickPath(Se,kn,Un?Ln[1]:Wn[1],{minor:Un});W.drawTicks(Me,Se,{vals:Cr,layer:lt[Dt+"axislayer"],path:ra,transFn:Wr})}}var Gn=[];if(Gn.push(function(){return W.drawLabels(Me,Se,{vals:Ar,layer:pr,plotinfo:lt,transFn:Kr,labelFns:W.makeLabelFns(Se,Jr)})}),"multicategory"===Se.type){var On={x:2,y:10}[Dt];Gn.push(function(){var pa={x:"height",y:"width"}[Dt],oi=wr()[pa]+On+(Se._tickAngles[Ct+"tick"]?Se.tickfont.size*oe:0);return W.drawLabels(Me,Se,{vals:Ze(Se,Ar),layer:pr,cls:Ct+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Wr,labelFns:W.makeLabelFns(Se,Jr+oi*Ln[4])})}),Gn.push(function(){return Se._depth=Ln[4]*(wr("tick2")[Se.side]-Jr),function ar(Me,Se,Je){var We=Se._id+"divider",st=Je.vals,lt=Je.layer.selectAll("path."+We).data(st,Xt);lt.exit().remove(),lt.enter().insert("path",":first-child").classed(We,1).classed("crisp",1).call(t.stroke,Se.dividercolor).style("stroke-width",i.crispRound(Me,Se.dividerwidth,1)+"px"),lt.attr("transform",Je.transFn).attr("d",Je.path)}(Me,Se,{vals:qr,layer:pr,path:W.makeTickPath(Se,Jr,Ln[4],{len:Se._depth}),transFn:Wr})})}else Se.title.hasOwnProperty("standoff")&&Gn.push(function(){Se._depth=Ln[4]*(wr()[Se.side]-Jr)});var Xn=E.getComponentMethod("rangeslider","isVisible")(Se);return Gn.push(function(){var rn,ln,or,Br,pa=Se.side.charAt(0),oi=se[Se.side].charAt(0),Ht=W.getPxPosition(Me,Se),dr=Qt?Se.ticklen:0;if((Se.automargin||Xn)&&("multicategory"===Se.type?rn=wr("tick2"):(rn=wr(),"x"===Dt&&"b"===pa&&(Se._depth=Math.max(rn.width>0?rn.bottom-Ht:0,dr)))),Se.automargin){ln={x:0,y:0,r:0,l:0,t:0,b:0};var Rt=[0,1];if("x"===Dt){if("b"===pa?ln[pa]=Se._depth:(ln[pa]=Se._depth=Math.max(rn.width>0?Ht-rn.top:0,dr),Rt.reverse()),rn.width>0){var Lt=rn.right-(Se._offset+Se._length);Lt>0&&(ln.xr=1,ln.r=Lt);var Pt=Se._offset-rn.left;Pt>0&&(ln.xl=0,ln.l=Pt)}}else if("l"===pa?ln[pa]=Se._depth=Math.max(rn.height>0?Ht-rn.left:0,dr):(ln[pa]=Se._depth=Math.max(rn.height>0?rn.right-Ht:0,dr),Rt.reverse()),rn.height>0){var Wt=rn.bottom-(Se._offset+Se._length);Wt>0&&(ln.yb=0,ln.b=Wt);var hr=Se._offset-rn.top;hr>0&&(ln.yt=1,ln.t=hr)}ln[Gt]="free"===Se.anchor?Se.position:Se._anchorAxis.domain[Rt[0]],Se.title.text!==pt._dfltTitle[Dt]&&(ln[pa]+=Ut(Se)+(Se.title.standoff||0)),Se.mirror&&"free"!==Se.anchor&&((or={x:0,y:0,r:0,l:0,t:0,b:0})[oi]=Se.linewidth,Se.mirror&&!0!==Se.mirror&&(or[oi]+=dr),!0===Se.mirror||"ticks"===Se.mirror?or[Gt]=Se._anchorAxis.domain[Rt[1]]:("all"===Se.mirror||"allticks"===Se.mirror)&&(or[Gt]=[Se._counterDomainMin,Se._counterDomainMax][Rt[1]]))}Xn&&(Br=E.getComponentMethod("rangeslider","autoMarginOpts")(Me,Se)),m.autoMargin(Me,on(Se),ln),m.autoMargin(Me,jr(Se),or),m.autoMargin(Me,et(Se),Br)}),!Je.skipTitle&&!(Xn&&"bottom"===Se.side)&&Gn.push(function(){return function Jt(Me,Se){var pt,Je=Me._fullLayout,We=Se._id,st=We.charAt(0),lt=Se.title.font.size;if(Se.title.hasOwnProperty("standoff"))pt=Se._depth+Se.title.standoff+Ut(Se);else{var Ct=ct(Se);if("multicategory"===Se.type)pt=Se._depth;else{var Dt=1.5*lt;Ct&&(Dt=.5*lt,"outside"===Se.ticks&&(Dt+=Se.ticklen)),pt=10+Dt+(Se.linewidth?Se.linewidth-1:0)}Ct||(pt+="x"===st?"top"===Se.side?lt*(Se.showticklabels?1:0):lt*(Se.showticklabels?1.5:.5):"right"===Se.side?lt*(Se.showticklabels?1:.5):lt*(Se.showticklabels?.5:0))}var fr,pr,Jr,Lr,Gt=W.getPxPosition(Me,Se);if("x"===st?(pr=Se._offset+Se._length/2,Jr="top"===Se.side?Gt-pt:Gt+pt):(Jr=Se._offset+Se._length/2,pr="right"===Se.side?Gt+pt:Gt-pt,fr={rotate:"-90",offset:0}),"multicategory"!==Se.type){var Ar=Se._selections[Se._id+"tick"];if(Lr={selection:Ar,side:Se.side},Ar&&Ar.node()&&Ar.node().parentNode){var en=i.getTranslate(Ar.node().parentNode);Lr.offsetLeft=en.x,Lr.offsetTop=en.y}Se.title.hasOwnProperty("standoff")&&(Lr.pad=0)}return n.draw(Me,We+"title",{propContainer:Se,propName:Se._name+".title.text",placeholder:Je._dfltTitle[st],avoid:Lr,transform:fr,attributes:{x:pr,y:Jr,"text-anchor":"middle"}})}(Me,Se)}),e.syncOrAsync(Gn)}}function wr(pa){var oi=Ct+(pa||"tick");return mr[oi]||(mr[oi]=function rt(Me,Se){var Je,We,st,lt;return Me._selections[Se].size()?(Je=1/0,We=-1/0,st=1/0,lt=-1/0,Me._selections[Se].each(function(){var pt=Hr(this),Ct=i.bBox(pt.node().parentNode);Je=Math.min(Je,Ct.top),We=Math.max(We,Ct.bottom),st=Math.min(st,Ct.left),lt=Math.max(lt,Ct.right)})):(Je=0,We=0,st=0,lt=0),{top:Je,bottom:We,left:st,right:lt,height:We-Je,width:lt-st}}(Se,oi)),mr[oi]}},W.getTickSigns=function(Me,Se){var Je=Me._id.charAt(0),st=Me.side==={x:"top",y:"right"}[Je]?1:-1,lt=[-1,1,st,-st];return"inside"!==(Se?(Me.minor||{}).ticks:Me.ticks)==("x"===Je)&&(lt=lt.map(function(Ct){return-Ct})),Me.side&&lt.push({l:-1,t:-1,r:1,b:1}[Me.side.charAt(0)]),lt},W.makeTransTickFn=function(Me){return"x"===Me._id.charAt(0)?function(Se){return c(Me._offset+Me.l2p(Se.x),0)}:function(Se){return c(0,Me._offset+Me.l2p(Se.x))}},W.makeTransTickLabelFn=function(Me){var Se=function Tt(Me){var Se=Me.ticklabelposition||"",Je=function(Lr){return-1!==Se.indexOf(Lr)},We=Je("top"),st=Je("left"),lt=Je("right"),pt=Je("bottom"),Ct=Je("inside"),Dt=pt||st||We||lt;if(!Dt&&!Ct)return[0,0];var Gt=Me.side,fr=Dt?(Me.tickwidth||0)/2:0,pr=3,Jr=Me.tickfont?Me.tickfont.size:12;return(pt||We)&&(fr+=Jr*X,pr+=(Me.linewidth||0)/2),(st||lt)&&(fr+=(Me.linewidth||0)/2,pr+=3),Ct&&"top"===Gt&&(pr-=Jr*(1-X)),(st||We)&&(fr=-fr),("bottom"===Gt||"right"===Gt)&&(pr=-pr),[Dt?fr:0,Ct?pr:0]}(Me),Je=Se[0],We=Se[1];return"x"===Me._id.charAt(0)?function(st){return c(Je+Me._offset+Me.l2p(kt(st)),We)}:function(st){return c(We,Je+Me._offset+Me.l2p(kt(st)))}},W.makeTickPath=function(Me,Se,Je,We){We||(We={});var st=We.minor;if(st&&!Me.minor)return"";var lt=void 0!==We.len?We.len:st?Me.minor.ticklen:Me.ticklen,pt=Me._id.charAt(0),Ct=(Me.linewidth||1)/2;return"x"===pt?"M0,"+(Se+Ct*Je)+"v"+lt*Je:"M"+(Se+Ct*Je)+",0h"+lt*Je},W.makeLabelFns=function(Me,Se,Je){var We=Me.ticklabelposition||"",st=function(kr){return-1!==We.indexOf(kr)},lt=st("top"),pt=st("left"),Ct=st("right"),Gt=st("bottom")||pt||lt||Ct,fr=st("inside"),pr="inside"===We&&"inside"===Me.ticks||!fr&&"outside"===Me.ticks&&"boundaries"!==Me.tickson,Jr=0,Lr=0,Ar=pr?Me.ticklen:0;if(fr?Ar*=-1:Gt&&(Ar=0),pr&&(Jr+=Ar,Je)){var en=e.deg2rad(Je);Jr=Ar*Math.cos(en)+1,Lr=Ar*Math.sin(en)}Me.showticklabels&&(pr||Me.showline)&&(Jr+=.2*Me.tickfont.size);var wr,Wr,Kr,Cr,Or,mr={labelStandoff:Jr+=(Me.linewidth||1)/2*(fr?-1:1),labelShift:Lr},it=0,It=Me.side,Qt=Me._id.charAt(0),ir=Me.tickangle;if("x"===Qt)Cr=(Or=!fr&&"bottom"===It||fr&&"top"===It)?1:-1,fr&&(Cr*=-1),wr=Lr*Cr,Wr=Se+Jr*Cr,Kr=Or?1:-.2,90===Math.abs(ir)&&(fr?Kr+=U:Kr=-90===ir&&"bottom"===It?X:90===ir&&"top"===It?U:.5,it=U/2*(ir/90)),mr.xFn=function(kr){return kr.dx+wr+it*kr.fontSize},mr.yFn=function(kr){return kr.dy+Wr+kr.fontSize*Kr},mr.anchorFn=function(kr,Zr){if(Gt){if(pt)return"end";if(Ct)return"start"}return k(Zr)&&0!==Zr&&180!==Zr?Zr*Cr<0!==fr?"end":"start":"middle"},mr.heightFn=function(kr,Zr,An){return Zr<-60||Zr>60?-.5*An:"top"===Me.side!==fr?-An:0};else if("y"===Qt){if(Cr=(Or=!fr&&"left"===It||fr&&"right"===It)?1:-1,fr&&(Cr*=-1),wr=Jr,Wr=Lr*Cr,Kr=0,!fr&&90===Math.abs(ir)&&(Kr=-90===ir&&"left"===It||90===ir&&"right"===It?X:.5),fr){var qr=k(ir)?+ir:0;if(0!==qr){var Ir=e.deg2rad(qr);it=Math.abs(Math.sin(Ir))*X*Cr,Kr=0}}mr.xFn=function(kr){return kr.dx+Se-(wr+kr.fontSize*Kr)*Cr+it*kr.fontSize},mr.yFn=function(kr){return kr.dy+Wr+kr.fontSize*U},mr.anchorFn=function(kr,Zr){return k(Zr)&&90===Math.abs(Zr)?"middle":Or?"end":"start"},mr.heightFn=function(kr,Zr,An){return"right"===Me.side&&(Zr*=-1),Zr<-30?-An:Zr<30?-.5*An:0}}return mr},W.drawTicks=function(Me,Se,Je){Je=Je||{};var We=Se._id+"tick",st=[].concat(Se.minor&&Se.minor.ticks?Je.vals.filter(function(pt){return pt.minor&&!pt.noTick}):[]).concat(Se.ticks?Je.vals.filter(function(pt){return!pt.minor&&!pt.noTick}):[]),lt=Je.layer.selectAll("path."+We).data(st,Xt);lt.exit().remove(),lt.enter().append("path").classed(We,1).classed("ticks",1).classed("crisp",!1!==Je.crisp).each(function(pt){return t.stroke(_.select(this),pt.minor?Se.minor.tickcolor:Se.tickcolor)}).style("stroke-width",function(pt){return i.crispRound(Me,pt.minor?Se.minor.tickwidth:Se.tickwidth,1)+"px"}).attr("d",Je.path).style("display",null),ht(Se,[F]),lt.attr("transform",Je.transFn)},W.drawGrid=function(Me,Se,Je){Je=Je||{};var We=Se._id+"grid",st=Se.minor&&Se.minor.showgrid,lt=st?Je.vals.filter(function(wr){return wr.minor}):[],pt=Se.showgrid?Je.vals.filter(function(wr){return!wr.minor}):[],Ct=Je.counterAxis;if(Ct&&W.shouldShowZeroLine(Me,Se,Ct))for(var Dt="array"===Se.tickmode,Gt=0;Gt<pt.length;Gt++){var fr=pt[Gt].x;if(Dt?!fr:Math.abs(fr)<Se.dtick/100){if(pt=pt.slice(0,Gt).concat(pt.slice(Gt+1)),!Dt)break;Gt--}}Se._gw=i.crispRound(Me,Se.gridwidth,1);for(var pr=st?i.crispRound(Me,Se.minor.gridwidth,1):0,Jr=Je.layer,Lr=Je.minorLayer,Ar=1;Ar>=0;Ar--){var en=Ar?Jr:Lr;if(en){var mr=en.selectAll("path."+We).data(Ar?pt:lt,Xt);mr.exit().remove(),mr.enter().append("path").classed(We,1).classed("crisp",!1!==Je.crisp),mr.attr("transform",Je.transFn).attr("d",Je.path).each(function(wr){return t.stroke(_.select(this),wr.minor?Se.minor.gridcolor:Se.gridcolor||"#ddd")}).style("stroke-dasharray",function(wr){return i.dashStyle(wr.minor?Se.minor.griddash:Se.griddash,wr.minor?Se.minor.gridwidth:Se.gridwidth)}).style("stroke-width",function(wr){return(wr.minor?pr:Se._gw)+"px"}).style("display",null),"function"==typeof Je.path&&mr.attr("d",Je.path)}}ht(Se,[O,I])},W.drawZeroLine=function(Me,Se,Je){var We=Se._id+"zl",st=W.shouldShowZeroLine(Me,Se,(Je=Je||Je).counterAxis),lt=Je.layer.selectAll("path."+We).data(st?[{x:0,id:Se._id}]:[]);lt.exit().remove(),lt.enter().append("path").classed(We,1).classed("zl",1).classed("crisp",!1!==Je.crisp).each(function(){Je.layer.selectAll("path").sort(function(pt,Ct){return V(pt.id,Ct.id)})}),lt.attr("transform",Je.transFn).attr("d",Je.path).call(t.stroke,Se.zerolinecolor||t.defaultLine).style("stroke-width",i.crispRound(Me,Se.zerolinewidth,Se._gw||1)+"px").style("display",null),ht(Se,[z])},W.drawLabels=function(Me,Se,Je){Je=Je||{};var We=Me._fullLayout,st=Se._id,lt=st.charAt(0),pt=Je.cls||st+"tick",Ct=Je.vals.filter(function(Cr){return Cr.text}),Dt=Je.labelFns,Gt=Je.secondary?0:Se.tickangle,fr=(Se._prevTickAngles||{})[pt],pr=Je.layer.selectAll("g."+pt).data(Se.showticklabels?Ct:[],Xt),Jr=[];function Lr(Cr,it){Cr.each(function(It){var Qt=_.select(this),ir=Qt.select(".text-math-group"),Or=Dt.anchorFn(It,it),qr=Je.transFn.call(Qt.node(),It)+(k(it)&&0!=+it?" rotate("+it+","+Dt.xFn(It)+","+(Dt.yFn(It)-It.fontSize/2)+")":""),Ir=d.lineCount(Qt),kr=oe*It.fontSize,Zr=Dt.heightFn(It,k(it)?+it:0,(Ir-1)*kr);if(Zr&&(qr+=c(0,Zr)),ir.empty()){var An=Qt.select("text");An.attr({transform:qr,"text-anchor":Or}),An.style("opacity",1),Se._adjustTickLabelsOverflow&&Se._adjustTickLabelsOverflow()}else{var wn=i.bBox(ir.node()).width;ir.attr("transform",qr+c(wn*{end:-.5,start:.5}[Or],0))}})}pr.enter().append("g").classed(pt,1).append("text").attr("text-anchor","middle").each(function(Cr){var it=_.select(this),It=Me._promises.length;it.call(d.positionText,Dt.xFn(Cr),Dt.yFn(Cr)).call(i.font,Cr.font,Cr.fontSize,Cr.fontColor).text(Cr.text).call(d.convertToTspans,Me),Me._promises[It]?Jr.push(Me._promises.pop().then(function(){Lr(it,Gt)})):Lr(it,Gt)}),ht(Se,[D]),pr.exit().remove(),Je.repositionOnUpdate&&pr.each(function(Cr){_.select(this).select("text").call(d.positionText,Dt.xFn(Cr),Dt.yFn(Cr))}),Se._adjustTickLabelsOverflow=function(){var Cr=Se.ticklabeloverflow;if(Cr&&"allow"!==Cr){var it=-1!==Cr.indexOf("hide"),It="x"===Se._id.charAt(0),Qt=0,ir=It?Me._fullLayout.width:Me._fullLayout.height;if(-1!==Cr.indexOf("domain")){var Or=e.simpleMap(Se.range,Se.r2l);Qt=Se.l2p(Or[0])+Se._offset,ir=Se.l2p(Or[1])+Se._offset}var qr=Math.min(Qt,ir),Ir=Math.max(Qt,ir),kr=Se.side,Zr=1/0,An=-1/0;for(var wn in pr.each(function(Wn){var $n=_.select(this);if($n.select(".text-math-group").empty()){var ma=i.bBox($n.node()),$a=0;It?(ma.right>Ir||ma.left<qr)&&($a=1):(ma.bottom>Ir||ma.top+(Se.tickangle?0:Wn.fontSize/4)<qr)&&($a=1);var Ja=$n.select("text");$a?it&&Ja.style("opacity",0):(Ja.style("opacity",1),Zr="bottom"===kr||"right"===kr?Math.min(Zr,It?ma.top:ma.left):-1/0,An="top"===kr||"left"===kr?Math.max(An,It?ma.bottom:ma.right):1/0)}}),We._plots){var Zn=We._plots[wn];if(Se._id===Zn.xaxis._id||Se._id===Zn.yaxis._id){var Ln=It?Zn.yaxis:Zn.xaxis;Ln&&(Ln["_visibleLabelMin_"+Se._id]=Zr,Ln["_visibleLabelMax_"+Se._id]=An)}}}},Se._hideCounterAxisInsideTickLabels=function(Cr){var it="x"===Se._id.charAt(0),It=[];for(var Qt in We._plots){var ir=We._plots[Qt];Se._id!==ir.xaxis._id&&Se._id!==ir.yaxis._id||It.push(it?ir.yaxis:ir.xaxis)}It.forEach(function(Or,qr){Or&&ct(Or)&&(Cr||[z,I,O,F,D]).forEach(function(Ir){var kr="tick"===Ir.K&&"text"===Ir.L&&"period"===Se.ticklabelmode,Zr=We._plots[Se._mainSubplot];(Ir.K===z.K?Zr.zerolinelayer.selectAll("."+Se._id+"zl"):Ir.K===I.K?Zr.minorGridlayer.selectAll("."+Se._id):Ir.K===O.K?Zr.gridlayer.selectAll("."+Se._id):Zr[Se._id.charAt(0)+"axislayer"]).each(function(){var wn=_.select(this);Ir.L&&(wn=wn.selectAll(Ir.L)),wn.each(function(Zn){var Ln=Se.l2p(kr?kt(Zn):Zn.x)+Se._offset,Wn=_.select(this);Ln<Se["_visibleLabelMax_"+Or._id]&&Ln>Se["_visibleLabelMin_"+Or._id]?Wn.style("display","none"):"tick"===Ir.K&&!qr&&Wn.style("display",null)})})})})},Lr(pr,fr+1?fr:Gt);var en=null;Se._selections&&(Se._selections[pt]=pr);var wr=[function Ar(){return Jr.length&&Promise.all(Jr)}];Se.automargin&&We._redrawFromAutoMarginCount&&90===fr?(en=90,wr.push(function(){Lr(pr,fr)})):wr.push(function mr(){if(Lr(pr,Gt),Ct.length&&"x"===lt&&!k(Gt)&&("log"!==Se.type||"D"!==String(Se.dtick).charAt(0))){en=0;var It,Cr=0,it=[];if(pr.each(function(ma){Cr=Math.max(Cr,ma.fontSize);var $a=Se.l2p(ma.x),Ja=Hr(this),Va=i.bBox(Ja.node());it.push({top:0,bottom:10,height:10,left:$a-Va.width/2,right:$a+Va.width/2+2,width:Va.width+2})}),"boundaries"!==Se.tickson&&!Se.showdividers||Je.secondary){var qr=Ct.length,Ir=Math.abs((Ct[qr-1].x-Ct[0].x)*Se._m)/(qr-1),kr=Se.ticklabelposition||"",Zr=function(ma){return-1!==kr.indexOf(ma)},An=Zr("top"),wn=Zr("left"),Zn=Zr("right"),$n=Zr("bottom")||wn||An||Zn?(Se.tickwidth||0)+6:0,wa=Ir<2.5*Cr||"multicategory"===Se.type||"realaxis"===Se._name;for(It=0;It<it.length-1;It++)if(e.bBoxIntersect(it[It],it[It+1],$n)){en=wa?90:30;break}}else{var Qt=2;for(Se.ticks&&(Qt+=Se.tickwidth/2),It=0;It<it.length;It++){var ir=Ct[It].xbnd,Or=it[It];if(null!==ir[0]&&Or.left-Se.l2p(ir[0])<Qt||null!==ir[1]&&Se.l2p(ir[1])-Or.right<Qt){en=90;break}}}en&&Lr(pr,en)}}),Se._tickAngles&&wr.push(function(){Se._tickAngles[pt]=null===en?k(Gt)?Gt:0:en});var Wr=Se._anchorAxis;Wr&&Wr.autorange&&ct(Se)&&!H(We,Se._id)&&(We._insideTickLabelsAutorange||(We._insideTickLabelsAutorange={}),We._insideTickLabelsAutorange[Wr._name+".autorange"]=Wr.autorange,wr.push(function(){pr.each(function(it,It){var Qt=Hr(this);Qt.select(".text-math-group").empty()&&(Se._vals[It].bb=i.bBox(Qt.node()))})}));var Kr=e.syncOrAsync(wr);return Kr&&Kr.then&&Me._promises.push(Kr),Kr},W.getPxPosition=function(Me,Se){var lt,Je=Me._fullLayout._size,We=Se._id.charAt(0),st=Se.side;return"free"!==Se.anchor?lt=Se._anchorAxis:"x"===We?lt={_offset:Je.t+(1-(Se.position||0))*Je.h,_length:0}:"y"===We&&(lt={_offset:Je.l+(Se.position||0)*Je.w,_length:0}),"top"===st||"left"===st?lt._offset:"bottom"===st||"right"===st?lt._offset+lt._length:void 0},W.shouldShowZeroLine=function(Me,Se,Je){var We=e.simpleMap(Se.range,Se.r2l);return We[0]*We[1]<=0&&Se.zeroline&&("linear"===Se.type||"-"===Se.type)&&!(Se.rangebreaks&&Se.maskBreaks(0)===R)&&(nr(Se,0)||!function rr(Me,Se,Je,We){var st=Je._mainAxis;if(st){var lt=Me._fullLayout,pt=Se._id.charAt(0),Ct=W.counterLetter(Se._id),Dt=Se._offset+(Math.abs(We[0])<Math.abs(We[1])==("x"===pt)?0:Se._length),fr=lt._plots[Je._mainSubplot];if(!(fr.mainplotinfo||fr).overlays.length)return Gt(Je);for(var pr=W.list(Me,Ct),Jr=0;Jr<pr.length;Jr++){var Lr=pr[Jr];if(Lr._mainAxis===st&&Gt(Lr))return!0}}function Gt(Ar){if(!Ar.showline||!Ar.linewidth)return!1;var en=Math.max((Ar.linewidth+Se.zerolinewidth)/2,1);function mr(Kr){return"number"==typeof Kr&&Math.abs(Kr-Dt)<en}if(mr(Ar._mainLinePosition)||mr(Ar._mainMirrorPosition))return!0;var wr=Ar._linepositions||{};for(var Wr in wr)if(mr(wr[Wr][0])||mr(wr[Wr][1]))return!0}}(Me,Se,Je,We)||function br(Me,Se){for(var Je=Me._fullData,We=Se._mainSubplot,st=Se._id.charAt(0),lt=0;lt<Je.length;lt++){var pt=Je[lt];if(!0===pt.visible&&pt.xaxis+pt.yaxis===We&&(E.traceIs(pt,"bar-like")&&pt.orientation==={x:"h",y:"v"}[st]||pt.fill&&pt.fill.charAt(pt.fill.length-1)===st))return!0}return!1}(Me,Se))},W.clipEnds=function(Me,Se){return Se.filter(function(Je){return nr(Me,Je.x)})},W.allowAutoMargin=function(Me){for(var Se=W.list(Me,"",!0),Je=0;Je<Se.length;Je++){var We=Se[Je];We.automargin&&(m.allowAutoMargin(Me,on(We)),We.mirror&&m.allowAutoMargin(Me,jr(We))),E.getComponentMethod("rangeslider","isVisible")(We)&&m.allowAutoMargin(Me,et(We))}},W.swap=function(Me,Se){for(var Je=function Yt(Me,Se){var We,st,Je=[];for(We=0;We<Se.length;We++){var lt=[],pt=Me._fullData[Se[We]].xaxis,Ct=Me._fullData[Se[We]].yaxis;if(pt&&Ct){for(st=0;st<Je.length;st++)(-1!==Je[st].x.indexOf(pt)||-1!==Je[st].y.indexOf(Ct))&&lt.push(st);if(!lt.length){Je.push({x:[pt],y:[Ct]});continue}var Gt,Dt=Je[lt[0]];if(lt.length>1)for(st=1;st<lt.length;st++)qt(Dt.x,(Gt=Je[lt[st]]).x),qt(Dt.y,Gt.y);qt(Dt.x,[pt]),qt(Dt.y,[Ct])}}return Je}(Me,Se),We=0;We<Je.length;We++)Vt(Me,Je[We].x,Je[We].y)}},{"../../components/color":366,"../../components/drawing":388,"../../components/titles":464,"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"./autorange":553,"./axis_autotype":555,"./axis_ids":558,"./clean_ticks":560,"./layout_attributes":569,"./set_convert":576,"@plotly/d3":58,"fast-isnumeric":190}],555:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../lib"),m=v("../../constants/numerical").BADNUM,E=k.isArrayOrTypedArray,e=k.isDateTime,c=k.cleanNumber,d=Math.round;function n(s,b){return b?_(s):"number"==typeof s}function a(s){return Math.max(1,(s-1)/1e3)}ie.exports=function(b,x,S){var p=b,w=S.noMultiCategory;if(E(p)&&!p.length)return"-";if(!w&&function g(s){return E(s[0])&&E(s[1])}(p))return"multicategory";if(w&&Array.isArray(p[0])){for(var l=[],y=0;y<p.length;y++)if(E(p[y]))for(var A=0;A<p[y].length;A++)l.push(p[y][A]);p=l}if(function i(s,b){for(var x=s.length,S=a(x),p=0,w=0,l={},y=0;y<x;y+=S){var T=s[d(y)],M=String(T);l[M]||(l[M]=1,e(T,b)&&p++,_(T)&&w++)}return p>2*w}(p,x))return"date";var T="strict"!==S.autotypenumbers;return function r(s,b){for(var x=s.length,S=a(x),p=0,w=0,l={},y=0;y<x;y+=S){var T=s[d(y)],M=String(T);if(!l[M]){l[M]=1;var f=typeof T;"boolean"===f?w++:(b?c(T)!==m:"number"===f)?p++:"string"===f&&w++}}return w>2*p}(p,T)?"category":function t(s,b){for(var x=s.length,S=0;S<x;S++)if(n(s[S],b))return!0;return!1}(p,T)?"linear":"-"}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],556:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../registry"),m=v("../../lib"),E=v("../../plot_api/plot_template"),e=v("../array_container_defaults"),c=v("./layout_attributes"),d=v("./tick_value_defaults"),n=v("./tick_mark_defaults"),t=v("./tick_label_defaults"),i=v("./prefix_suffix_defaults"),a=v("./category_order_defaults"),r=v("./line_grid_defaults"),g=v("./set_convert"),s=v("./constants").WEEKDAY_PATTERN,b=v("./constants").HOUR_PATTERN;function x(w,l,y){function A(z,O){return m.coerce(w,l,c.rangebreaks,z,O)}if(A("enabled")){var M=A("bounds");if(M&&M.length>=2){var u,h,f="";if(2===M.length)for(u=0;u<2;u++)if(h=p(M[u])){f=s;break}var o=A("pattern",f);if(o===s)for(u=0;u<2;u++)(h=p(M[u]))&&(l.bounds[u]=M[u]=h-1);if(o)for(u=0;u<2;u++)switch(h=M[u],o){case s:if(!_(h))return void(l.enabled=!1);if((h=+h)!==Math.floor(h)||h<0||h>=7)return void(l.enabled=!1);l.bounds[u]=M[u]=h;break;case b:if(!_(h))return void(l.enabled=!1);if((h=+h)<0||h>24)return void(l.enabled=!1);l.bounds[u]=M[u]=h}if(!1===y.autorange){var C=y.range;if(C[0]<C[1]){if(M[0]<C[0]&&M[1]>C[1])return void(l.enabled=!1)}else if(M[0]>C[0]&&M[1]<C[1])return void(l.enabled=!1)}}else{var R=A("values");if(!R||!R.length)return void(l.enabled=!1);A("dvalue")}}}ie.exports=function(l,y,A,T,M){var z,f=T.letter,u=T.font||{},h=T.splomStash||{},o=A("visible",!T.visibleDflt),R=y.type||(y._template||{}).type||"-";"date"===R&&(k.getComponentMethod("calendars","handleDefaults")(l,y,"calendar",T.calendar),T.noTicklabelmode||(z=A("ticklabelmode")));var I="";(!T.noTicklabelposition||"multicategory"===R)&&(I=m.coerce(l,y,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===z?["outside","inside"]:"x"===f?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),T.noTicklabeloverflow||A("ticklabeloverflow",-1!==I.indexOf("inside")?"hide past domain":"category"===R||"multicategory"===R?"allow":"hide past div"),g(y,M);var F=!y.isValidRange(l.range);F&&T.reverseDflt&&(F="reversed"),A("autorange",F)&&("linear"===R||"-"===R)&&A("rangemode"),A("range"),y.cleanRange(),a(l,y,A,T),"category"!==R&&!T.noHover&&A("hoverformat");var N=A("color"),U=N!==c.color.dflt?N:u.color,X=h.label||M._dfltTitle[f];if(i(l,y,A,R,T),!o)return y;A("title.text",X),m.coerceFont(A,"title.font",{family:u.family,size:m.bigFont(u.size),color:U}),d(l,y,A,R);var oe=T.hasMinor;if(oe&&(E.newContainer(y,"minor"),d(l,y,A,R,{isMinor:!0})),t(l,y,A,R,T),n(l,y,A,T),oe){var se=T.isMinor;T.isMinor=!0,n(l,y,A,T),T.isMinor=se}r(l,y,A,{dfltColor:N,bgColor:T.bgColor,showGrid:T.showGrid,hasMinor:oe,attributes:c}),oe&&!y.minor.ticks&&!y.minor.showgrid&&delete y.minor,(y.showline||y.ticks)&&A("mirror"),T.automargin&&A("automargin");var W,ne="multicategory"===R;if(T.noTickson||"category"!==R&&!ne||!y.ticks&&!y.showgrid||(ne&&(W="boundaries"),"boundaries"===A("tickson",W)&&delete y.ticklabelposition),ne&&A("showdividers")&&(A("dividercolor"),A("dividerwidth")),"date"===R)if(e(l,y,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:x}),y.rangebreaks.length){for(var V=0;V<y.rangebreaks.length;V++)if(y.rangebreaks[V].pattern===s){y._hasDayOfWeekBreaks=!0;break}if(g(y,M),M._has("scattergl")||M._has("splom"))for(var H=0;H<T.data.length;H++){var q=T.data[H];("scattergl"===q.type||"splom"===q.type)&&(q.visible=!1,m.warn(q.type+" traces do not work on axes with rangebreaks. Setting trace "+q.index+" to `visible: false`."))}}else delete y.rangebreaks;return y};var S={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function p(w){if("string"==typeof w)return S[w.substr(0,3).toLowerCase()]}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../array_container_defaults":549,"./category_order_defaults":559,"./constants":561,"./layout_attributes":569,"./line_grid_defaults":571,"./prefix_suffix_defaults":573,"./set_convert":576,"./tick_label_defaults":578,"./tick_mark_defaults":579,"./tick_value_defaults":580,"fast-isnumeric":190}],557:[function(v,ie,ae){"use strict";var _=v("../../constants/docs"),k=_.FORMAT_LINK,m=_.DATE_FORMAT_LINK;function e(d,n){return["Sets the "+d+" formatting rule"+(n?"for `"+n+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+k+"."].join(" ")}function c(d,n){return e(d,n)+[" And for dates see: "+m+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}ie.exports={axisHoverFormat:function E(d,n){return{valType:"string",dflt:"",editType:"none",description:(n?e:c)("hover text",d)+["By default the values are formatted using "+(n?"generic number format":"`"+d+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:e,descriptionWithDates:c}},{"../../constants/docs":474}],558:[function(v,ie,ae){"use strict";var _=v("../../registry"),k=v("./constants");function m(E,e){if(e&&e.length)for(var c=0;c<e.length;c++)if(e[c][E])return!0;return!1}ae.id2name=function(e){if("string"==typeof e&&e.match(k.AX_ID_PATTERN)){var c=e.split(" ")[0].substr(1);return"1"===c&&(c=""),e.charAt(0)+"axis"+c}},ae.name2id=function(e){if(e.match(k.AX_NAME_PATTERN)){var c=e.substr(5);return"1"===c&&(c=""),e.charAt(0)+c}},ae.cleanId=function(e,c,d){var n=/( domain)$/.test(e);if("string"==typeof e&&e.match(k.AX_ID_PATTERN)&&(!c||e.charAt(0)===c)&&(!n||d)){var t=e.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===t&&(t=""),e.charAt(0)+t+(n&&d?" domain":"")}},ae.list=function(E,e,c){var d=E._fullLayout;if(!d)return[];var i,n=ae.listIds(E,e),t=new Array(n.length);for(i=0;i<n.length;i++){var a=n[i];t[i]=d[a.charAt(0)+"axis"+a.substr(1)]}if(!c){var r=d._subplots.gl3d||[];for(i=0;i<r.length;i++){var g=d[r[i]];e?t.push(g[e+"axis"]):t.push(g.xaxis,g.yaxis,g.zaxis)}}return t},ae.listIds=function(E,e){var c=E._fullLayout;if(!c)return[];var d=c._subplots;return e?d[e+"axis"]:d.xaxis.concat(d.yaxis)},ae.getFromId=function(E,e,c){var d=E._fullLayout;return e=void 0===e||"string"!=typeof e?e:e.replace(" domain",""),"x"===c?e=e.replace(/y[0-9]*/,""):"y"===c&&(e=e.replace(/x[0-9]*/,"")),d[ae.id2name(e)]},ae.getFromTrace=function(E,e,c){var d=E._fullLayout,n=null;if(_.traceIs(e,"gl3d")){var t=e.scene;"scene"===t.substr(0,5)&&(n=d[t][c+"axis"])}else n=ae.getFromId(E,e[c+"axis"]||c);return n},ae.idSort=function(E,e){var c=E.charAt(0),d=e.charAt(0);return c!==d?c>d?1:-1:+(E.substr(1)||1)-+(e.substr(1)||1)},ae.ref2id=function(E){return!!/^[xyz]/.test(E)&&E.split(" ")[0]},ae.isLinked=function(E,e){return m(e,E._axisMatchGroups)||m(e,E._axisConstraintGroups)}},{"../../registry":638,"./constants":561}],559:[function(v,ie,ae){"use strict";ie.exports=function(m,E,e,c){if("category"===E.type){var t,d=m.categoryarray,n=Array.isArray(d)&&d.length>0;n&&(t="array");var a,i=e("categoryorder",t);"array"===i&&(a=e("categoryarray")),!n&&"array"===i&&(i=E.categoryorder="trace"),"trace"===i?E._initialCategories=[]:"array"===i?E._initialCategories=a.slice():(a=function _(k,m){var c,d,n,E=m.dataAttr||k._id.charAt(0),e={};if(m.axData)c=m.axData;else for(c=[],d=0;d<m.data.length;d++){var t=m.data[d];t[E+"axis"]===k._id&&c.push(t)}for(d=0;d<c.length;d++){var i=c[d][E];for(n=0;n<i.length;n++){var a=i[n];null!=a&&(e[a]=1)}}return Object.keys(e)}(E,c).sort(),"category ascending"===i?E._initialCategories=a:"category descending"===i&&(E._initialCategories=a.reverse()))}}},{}],560:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../lib"),m=v("../../constants/numerical"),E=m.ONEDAY,e=m.ONEWEEK;ae.dtick=function(c,d){var n="log"===d,t="date"===d,i="category"===d,a=t?E:1;if(!c)return a;if(_(c))return(c=Number(c))<=0?a:i?Math.max(1,Math.round(c)):t?Math.max(.1,c):c;if("string"!=typeof c||!t&&!n)return a;var r=c.charAt(0),g=c.substr(1);return(g=_(g)?Number(g):0)<=0||!(t&&"M"===r&&g===Math.round(g)||n&&"L"===r||n&&"D"===r&&(1===g||2===g))?a:c},ae.tick0=function(c,d,n,t){return"date"===d?k.cleanDate(c,k.dateTick0(n,t%e==0?1:0)):"D1"!==t&&"D2"!==t?_(c)?Number(c):0:void 0}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],561:[function(v,ie,ae){"use strict";var _=v("../../lib/regex").counter;ie.exports={idRegex:{x:_("x","( domain)?"),y:_("y","( domain)?")},attrRegex:_("[xy]axis"),xAxisMatch:_("xaxis"),yAxisMatch:_("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":520}],562:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./autorange"),m=v("./axis_ids").id2name,E=v("./layout_attributes"),e=v("./scale_zoom"),c=v("./set_convert"),d=v("../../constants/numerical").ALMOST_EQUAL,n=v("../../constants/alignment").FROM_BL;function t(x,S,p){var w=p.axIds,l=p.layoutOut,y=p.hasImage,A=l._axisConstraintGroups,T=l._axisMatchGroups,M=S._id,f=M.charAt(0),u=((l._splomAxes||{})[f]||{})[M]||{},h=S._id,o="x"===h.charAt(0);function C($,V){return _.coerce(x,S,E,$,V)}S._matchGroup=null,S._constraintGroup=null,C("constrain",y?"domain":"range"),_.coerce(x,S,{constraintoward:{valType:"enumerated",values:o?["left","center","right"]:["bottom","middle","top"],dflt:o?"center":"middle"}},"constraintoward");var z,O,R=S.type,I=[];for(z=0;z<w.length;z++)(O=w[z])!==h&&l[m(O)].type===R&&I.push(O);var D=a(A,h);if(D){var N=[];for(z=0;z<I.length;z++)D[O=I[z]]||N.push(O);I=N}var X,oe,U=I.length;U&&(x.matches||u.matches)&&(X=_.coerce(x,S,{matches:{valType:"enumerated",values:I,dflt:-1!==I.indexOf(u.matches)?u.matches:void 0}},"matches"));var se=y&&!o?S.anchor:void 0;if(U&&!X&&(x.scaleanchor||se)&&(oe=_.coerce(x,S,{scaleanchor:{valType:"enumerated",values:I}},"scaleanchor",se)),X){S._matchGroup=r(T,h,X,1);var ne=l[m(X)],W=i(l,S)/i(l,ne);o!==("x"===X.charAt(0))&&(W=(o?"x":"y")+W),r(A,h,X,W)}else x.matches&&-1!==w.indexOf(x.matches)&&_.warn("ignored "+S._name+'.matches: "'+x.matches+'" to avoid an infinite loop');if(oe){var G=C("scaleratio");G||(G=S.scaleratio=1),r(A,h,oe,G)}else x.scaleanchor&&-1!==w.indexOf(x.scaleanchor)&&_.warn("ignored "+S._name+'.scaleanchor: "'+x.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function i(x,S){var p=S.domain;return p||(p=x[m(S.overlaying)].domain),p[1]-p[0]}function a(x,S){for(var p=0;p<x.length;p++)if(x[p][S])return x[p];return null}function r(x,S,p,w){var l,y,A,T,M,f=a(x,S);null===f?((f={})[S]=1,M=x.length,x.push(f)):M=x.indexOf(f);var u=Object.keys(f);for(l=0;l<x.length;l++)if(A=x[l],l!==M&&A[p]){var h=A[p];for(y=0;y<u.length;y++)A[T=u[y]]=g(h,g(w,f[T]));return void x.splice(M,1)}if(1!==w)for(y=0;y<u.length;y++){var o=u[y];f[o]=g(w,f[o])}f[p]=1}function g(x,S){var l,y,p="",w="";"string"==typeof x&&(p=x.match(/^[xy]*/)[0],x=+x.substr(l=p.length)),"string"==typeof S&&(w=S.match(/^[xy]*/)[0],S=+S.substr(y=w.length));var A=x*S;return l||y?l&&y&&p.charAt(0)!==w.charAt(0)?l===y?A:(l>y?p.substr(y):w.substr(l))+A:p+w+x*S:A}function s(x,S){for(var p=S._size,w=p.h/p.w,l={},y=Object.keys(x),A=0;A<y.length;A++){var T=y[A],M=x[T];if("string"==typeof M){var f=M.match(/^[xy]*/)[0],u=f.length;M=+M.substr(u);for(var h="y"===f.charAt(0)?w:1/w,o=0;o<u;o++)M*=h}l[T]=M}return l}function b(x,S){var p=x._inputDomain,l=p[0]+(p[1]-p[0])*n[x.constraintoward];x.domain=x._input.domain=[l+(p[0]-l)/S,l+(p[1]-l)/S],x.setScale()}ae.handleDefaults=function(x,S,p){var T,M,f,u,h,o,C,R,w=p.axIds,l=p.axHasImage,y=S._axisConstraintGroups=[],A=S._axisMatchGroups=[];for(T=0;T<w.length;T++)t(h=x[u=m(w[T])],o=S[u],{axIds:w,layoutOut:S,hasImage:l[u]});function z(se,ne){for(T=0;T<se.length;T++)for(f in M=se[T])S[m(f)][ne]=M}for(z(A,"_matchGroup"),T=0;T<y.length;T++)for(f in M=y[T])if((o=S[m(f)]).fixedrange){for(var O in M){var I=m(O);!1===(x[I]||{}).fixedrange&&_.warn("fixedrange was specified as false for axis "+I+" but was overridden because another axis in its constraint group has fixedrange true"),S[I].fixedrange=!0}break}for(T=0;T<y.length;){for(f in M=y[T]){(o=S[m(f)])._matchGroup&&Object.keys(o._matchGroup).length===Object.keys(M).length&&(y.splice(T,1),T--);break}T++}z(y,"_constraintGroup");var F=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],D=!1,N=!1;function U(){R=o[C],"rangebreaks"===C&&(N=o._hasDayOfWeekBreaks)}for(T=0;T<A.length;T++){M=A[T];for(var X=0;X<F.length;X++){var oe;for(f in C=F[X],R=null,M)if(h=x[u=m(f)],C in(o=S[u])){if(!o.matches&&(oe=o,C in h)){U();break}null===R&&C in h&&U()}if("range"===C&&R&&(D=!0),"autorange"===C&&null===R&&D&&(R=!1),null===R&&C in oe&&(R=oe[C]),null!==R)for(f in M)(o=S[m(f)])[C]="range"===C?R.slice():R,"rangebreaks"===C&&(o._hasDayOfWeekBreaks=N,c(o,S))}}},ae.enforce=function(S){var l,y,A,T,M,f,u,h,p=S._fullLayout,w=p._axisConstraintGroups||[];for(l=0;l<w.length;l++){A=s(w[l],p);var o=Object.keys(A),C=1/0,R=0,z=1/0,O={},I={},F=!1;for(y=0;y<o.length;y++)I[T=o[y]]=M=p[m(T)],M._inputDomain?M.domain=M._inputDomain.slice():M._inputDomain=M.domain.slice(),M._inputRange||(M._inputRange=M.range.slice()),M.setScale(),O[T]=f=Math.abs(M._m)/A[T],C=Math.min(C,f),("domain"===M.constrain||!M._constraintShrinkable)&&(z=Math.min(z,f)),delete M._constraintShrinkable,R=Math.max(R,f),"domain"===M.constrain&&(F=!0);if(!(C>d*R)||F)for(y=0;y<o.length;y++)if(u=(M=I[T=o[y]]).constrain,(f=O[T])!==z||"domain"===u)if(h=f/z,"range"===u)e(M,h);else{var D=M._inputDomain,N=(M.domain[1]-M.domain[0])/(D[1]-D[0]),U=(M.r2l(M.range[1])-M.r2l(M.range[0]))/(M.r2l(M._inputRange[1])-M.r2l(M._inputRange[0]));if((h/=N)*U<1){M.domain=M._input.domain=D.slice(),e(M,h);continue}if(U<1&&(M.range=M._input.range=M._inputRange.slice(),h*=U),M.autorange){var X=M.r2l(M.range[0]),oe=M.r2l(M.range[1]),se=(X+oe)/2,ne=se,W=se,G=Math.abs(oe-se),$=se-G*h*1.0001,V=se+G*h*1.0001,H=k.makePadFn(p,M,0),q=k.makePadFn(p,M,1);b(M,h);var j,re,K=Math.abs(M._m),Y=k.concatExtremes(S,M),te=Y.min,J=Y.max;for(re=0;re<te.length;re++)(j=te[re].val-H(te[re])/K)>$&&j<ne&&(ne=j);for(re=0;re<J.length;re++)(j=J[re].val+q(J[re])/K)<V&&j>W&&(W=j);h/=(W-ne)/(2*G),ne=M.l2r(ne),W=M.l2r(W),M.range=M._input.range=X<oe?[ne,W]:[W,ne]}b(M,h)}}},ae.getAxisGroup=function(S,p){for(var w=S._axisMatchGroups,l=0;l<w.length;l++)if(w[l][p])return"g"+l;return p},ae.clean=function(S,p){if(p._inputDomain){for(var w=!1,l=p._id,y=S._fullLayout._axisConstraintGroups,A=0;A<y.length;A++)if(y[A][l]){w=!0;break}(!w||"domain"!==p.constrain)&&(p._input.domain=p.domain=p._inputDomain,delete p._inputDomain)}}},{"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"./autorange":553,"./axis_ids":558,"./layout_attributes":569,"./scale_zoom":574,"./set_convert":576}],563:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../lib"),m=k.numberFormat,E=v("tinycolor2"),e=v("has-passive-events"),c=v("../../registry"),d=k.strTranslate,n=v("../../lib/svg_text_utils"),t=v("../../components/color"),i=v("../../components/drawing"),a=v("../../components/fx"),r=v("./axes"),g=v("../../lib/setcursor"),s=v("../../components/dragelement"),b=v("../../components/dragelement/helpers"),x=b.selectingOrDrawing,S=b.freeMode,p=v("../../constants/alignment").FROM_TL,w=v("../../lib/clear_gl_canvases"),l=v("../../plot_api/subroutines").redrawReglTraces,y=v("../plots"),A=v("./axis_ids").getFromId,T=v("./select").prepSelect,M=v("./select").clearSelect,f=v("./select").selectOnClick,u=v("./scale_zoom"),h=v("./constants"),o=h.MINDRAG,C=h.MINZOOM,R=!0;function O(j,re,le,ge){var pe=k.ensureSingle(j.draglayer,re,le,function(xe){xe.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",j.id)});return pe.call(g,ge),pe.node()}function I(j,re,le,ge,pe,xe,ke){var we=O(j,"rect",re,le);return _.select(we).call(i.setRect,ge,pe,xe,ke),we}function F(j,re){for(var le=0;le<j.length;le++)if(!j[le].fixedrange)return re;return""}function N(j,re,le,ge,pe){for(var xe=0;xe<j.length;xe++){var ke=j[xe];if(!ke.fixedrange)if(ke.rangebreaks){var we="y"===ke._id.charAt(0),be=we?1-le:le;ge[ke._name+".range[0]"]=ke.l2r(ke.p2l((we?1-re:re)*ke._length)),ge[ke._name+".range[1]"]=ke.l2r(ke.p2l(be*ke._length))}else{var Le=ke._rl[0],De=ke._rl[1]-Le;ge[ke._name+".range[0]"]=ke.l2r(Le+De*re),ge[ke._name+".range[1]"]=ke.l2r(Le+De*le)}}if(pe&&pe.length){var ye=(re+(1-le))/2;N(pe,ye,1-ye,ge,[])}}function U(j,re){for(var le=0;le<j.length;le++){var ge=j[le];if(!ge.fixedrange)if(ge.rangebreaks){var xe=ge._length,de=(ge.p2l(0+re)-ge.p2l(0)+(ge.p2l(xe+re)-ge.p2l(xe)))/2;ge.range=[ge.l2r(ge._rl[0]-de),ge.l2r(ge._rl[1]-de)]}else ge.range=[ge.l2r(ge._rl[0]-re/ge._m),ge.l2r(ge._rl[1]-re/ge._m)]}}function X(j){return 1-(j>=0?Math.min(j,.9):1/(1/Math.max(j,-.3)+3.222))}function se(j,re,le,ge,pe){return j.append("path").attr("class","zoombox").style({fill:re>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",d(le,ge)).attr("d",pe+"Z")}function ne(j,re,le){return j.append("path").attr("class","zoombox-corners").style({fill:t.background,stroke:t.defaultLine,"stroke-width":1,opacity:0}).attr("transform",d(re,le)).attr("d","M0,0Z")}function W(j,re,le,ge,pe,xe){j.attr("d",ge+"M"+le.l+","+le.t+"v"+le.h+"h"+le.w+"v-"+le.h+"h-"+le.w+"Z"),G(j,re,pe,xe)}function G(j,re,le,ge){le||(j.transition().style("fill",ge>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),re.transition().style("opacity",1).duration(200))}function $(j){_.select(j).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function V(j){R&&j.data&&j._context.showTips&&(k.notifier(k._(j,"Double-click to zoom back out"),"long"),R=!1)}function K(j){var re=Math.floor(Math.min(j.b-j.t,j.r-j.l,C)/2);return"M"+(j.l-3.5)+","+(j.t-.5+re)+"h3v"+-re+"h"+re+"v-3h-"+(re+3)+"ZM"+(j.r+3.5)+","+(j.t-.5+re)+"h-3v"+-re+"h"+-re+"v-3h"+(re+3)+"ZM"+(j.r+3.5)+","+(j.b+.5-re)+"h-3v"+re+"h"+-re+"v3h"+(re+3)+"ZM"+(j.l-3.5)+","+(j.b+.5-re)+"h3v"+re+"h"+re+"v3h-"+(re+3)+"Z"}function Y(j,re,le,ge,pe){for(var de,be,Le,De,xe=!1,ke={},we={},ye=(pe||{}).xaHash,Ce=(pe||{}).yaHash,Fe=0;Fe<re.length;Fe++){var Ke=re[Fe];for(de in le)if(Ke[de]){for(Le in Ke)(!pe||!ye[Le]&&!Ce[Le])&&!("x"===Le.charAt(0)?le:ge)[Le]&&(ke[Le]=de);for(be in ge)(!pe||!ye[be]&&!Ce[be])&&Ke[be]&&(xe=!0)}for(be in ge)if(Ke[be])for(De in Ke)(!pe||!ye[De]&&!Ce[De])&&!("x"===De.charAt(0)?le:ge)[De]&&(we[De]=be)}xe&&(k.extendFlat(ke,we),we={});var Ue={},Be=[];for(Le in ke){var Ie=A(j,Le);Be.push(Ie),Ue[Ie._id]=Ie}var nt={},gt=[];for(De in we){var Nt=A(j,De);gt.push(Nt),nt[Nt._id]=Nt}return{xaHash:Ue,yaHash:nt,xaxes:Be,yaxes:gt,xLinks:ke,yLinks:we,isSubplotConstrained:xe}}function te(j,re){if(e){var le=void 0!==j.onwheel?"wheel":"mousewheel";j._onwheel&&j.removeEventListener(le,j._onwheel),j._onwheel=re,j.addEventListener(le,re,{passive:!1})}else void 0!==j.onwheel?j.onwheel=re:void 0!==j.onmousewheel?j.onmousewheel=re:j.isAddedWheelEvent||(j.isAddedWheelEvent=!0,j.addEventListener("wheel",re,{passive:!1}))}function J(j){var re=[];for(var le in j)re.push(j[le]);return re}ie.exports={makeDragBox:function z(j,re,le,ge,pe,xe,ke,we){var De,ye,Ce,Fe,Ke,Ue,Be,Ie,nt,gt,Nt,St,Bt,Zt,Et,wt,at,vt,Qe,Pe,Ze,Xe,rt,de=j._fullLayout._zoomlayer,be=ke+we==="nsew",Le=1===(ke+we).length;function kt(){if(nt=(De=re.xaxis)._length,gt=(ye=re.yaxis)._length,Be=De._offset,Ie=ye._offset,(Ce={})[De._id]=De,(Fe={})[ye._id]=ye,ke&&we)for(var Lr=re.overlays,Ar=0;Ar<Lr.length;Ar++){var en=Lr[Ar].xaxis;Ce[en._id]=en;var mr=Lr[Ar].yaxis;Fe[mr._id]=mr}Ke=J(Ce),Ue=J(Fe),Bt=F(Ke,we),Zt=F(Ue,ke),Et=!Zt&&!Bt,St=Y(j,j._fullLayout._axisMatchGroups,Ce,Fe);var wr=(Nt=Y(j,j._fullLayout._axisConstraintGroups,Ce,Fe,St)).isSubplotConstrained||St.isSubplotConstrained;wt=we||wr,at=ke||wr;var Wr=j._fullLayout;vt=Wr._has("scattergl"),Qe=Wr._has("splom"),Pe=Wr._has("svg")}kt();var Tt=function oe(j,re,le){return j?"nsew"===j?le?"":"pan"===re?"move":"crosshair":j.toLowerCase()+"-resize":"pointer"}(Zt+Bt,j._fullLayout.dragmode,be),Xt=I(re,ke+we+"drag",Tt,le,ge,pe,xe);if(Et&&!be)return Xt.onmousedown=null,Xt.style.pointerEvents="none",Xt;var nr,rr,br,Hr,on,jr,et,Yt,qt,Vt,ar={element:Xt,gd:j,plotinfo:re};function Ut(){ar.plotinfo.selection=!1,M(j)}function Jt(Lr,Ar){var en=ar.gd;if(en._fullLayout._activeShapeIndex>=0)en._fullLayout._deactivateShape(en);else{var mr=en._fullLayout.clickmode;if($(en),2===Lr&&!Le&&function Ct(){if(!j._transitioningWithDuration){var Lr=j._context.doubleClick,Ar=[];Bt&&(Ar=Ar.concat(Ke)),Zt&&(Ar=Ar.concat(Ue)),St.xaxes&&(Ar=Ar.concat(St.xaxes)),St.yaxes&&(Ar=Ar.concat(St.yaxes));var mr,wr,Wr,en={};if("reset+autosize"===Lr)for(Lr="autosize",wr=0;wr<Ar.length;wr++)if((mr=Ar[wr])._rangeInitial&&(mr.range[0]!==mr._rangeInitial[0]||mr.range[1]!==mr._rangeInitial[1])||!mr._rangeInitial&&!mr.autorange){Lr="reset";break}if("autosize"===Lr)for(wr=0;wr<Ar.length;wr++)(mr=Ar[wr]).fixedrange||(en[mr._name+".autorange"]=!0);else if("reset"===Lr)for((Bt||Nt.isSubplotConstrained)&&(Ar=Ar.concat(Nt.xaxes)),Zt&&!Nt.isSubplotConstrained&&(Ar=Ar.concat(Nt.yaxes)),Nt.isSubplotConstrained&&(Bt?Zt||(Ar=Ar.concat(Ue)):Ar=Ar.concat(Ke)),wr=0;wr<Ar.length;wr++)(mr=Ar[wr]).fixedrange||(mr._rangeInitial?(en[mr._name+".range[0]"]=(Wr=mr._rangeInitial)[0],en[mr._name+".range[1]"]=Wr[1]):en[mr._name+".autorange"]=!0);j.emit("plotly_doubleclick",null),c.call("_guiRelayout",j,en)}}(),be)mr.indexOf("select")>-1&&f(Ar,en,Ke,Ue,re.id,ar),mr.indexOf("event")>-1&&a.click(en,Ar,re.id);else if(1===Lr&&Le){var wr=ke?ye:De,Wr="s"===ke||"w"===we?0:1,Kr=wr._name+".range["+Wr+"]",Cr=function D(j,re){var pe,le=j.range[re],ge=Math.abs(le-j.range[1-re]);return"date"===j.type?le:"log"===j.type?(pe=Math.ceil(Math.max(0,-Math.log(ge)/Math.LN10))+3,m("."+pe+"g")(Math.pow(10,le))):(pe=Math.floor(Math.log(Math.abs(le))/Math.LN10)-Math.floor(Math.log(ge)/Math.LN10)+4,m("."+String(pe)+"g")(le))}(wr,Wr),it="left",It="middle";if(wr.fixedrange)return;ke?(It="n"===ke?"top":"bottom","right"===wr.side&&(it="right")):"e"===we&&(it="right"),en._context.showAxisRangeEntryBoxes&&_.select(Xt).call(n.makeEditable,{gd:en,immediate:!0,background:en._fullLayout.paper_bgcolor,text:String(Cr),fill:wr.tickfont?wr.tickfont.color:"#444",horizontalAlign:it,verticalAlign:It}).on("edit",function(Qt){var ir=wr.d2r(Qt);void 0!==ir&&c.call("_guiRelayout",en,Kr,ir)})}}}function tt(Lr,Ar){if(j._transitioningWithDuration)return!1;var en=Math.max(0,Math.min(nt,Xe*Lr+nr)),mr=Math.max(0,Math.min(gt,rt*Ar+rr)),wr=Math.abs(en-nr),Wr=Math.abs(mr-rr);function Kr(){et="",br.r=br.l,br.t=br.b,qt.attr("d","M0,0Z")}if(br.l=Math.min(nr,en),br.r=Math.max(nr,en),br.t=Math.min(rr,mr),br.b=Math.max(rr,mr),Nt.isSubplotConstrained)wr>C||Wr>C?(et="xy",wr/nt>Wr/gt?(Wr=wr*gt/nt,rr>mr?br.t=rr-Wr:br.b=rr+Wr):(wr=Wr*nt/gt,nr>en?br.l=nr-wr:br.r=nr+wr),qt.attr("d",K(br))):Kr();else if(St.isSubplotConstrained)if(wr>C||Wr>C){et="xy";var Cr=Math.min(br.l/nt,(gt-br.b)/gt),it=Math.max(br.r/nt,(gt-br.t)/gt);br.l=Cr*nt,br.r=it*nt,br.b=(1-Cr)*gt,br.t=(1-it)*gt,qt.attr("d",K(br))}else Kr();else!Zt||Wr<Math.min(Math.max(.6*wr,o),C)?wr<o||!Bt?Kr():(br.t=0,br.b=gt,et="x",qt.attr("d",function H(j,re){return"M"+(j.l-.5)+","+(re-C-.5)+"h-3v"+(2*C+1)+"h3ZM"+(j.r+.5)+","+(re-C-.5)+"h3v"+(2*C+1)+"h-3Z"}(br,rr))):!Bt||wr<Math.min(.6*Wr,C)?(br.l=0,br.r=nt,et="y",qt.attr("d",function q(j,re){return"M"+(re-C-.5)+","+(j.t-.5)+"v-3h"+(2*C+1)+"v3ZM"+(re-C-.5)+","+(j.b+.5)+"v3h"+(2*C+1)+"v-3Z"}(br,nr))):(et="xy",qt.attr("d",K(br)));br.w=br.r-br.l,br.h=br.b-br.t,et&&(Vt=!0),j._dragged=Vt,W(Yt,qt,br,on,jr,Hr),je(),j.emit("plotly_relayouting",Ze),jr=!0}function je(){Ze={},("xy"===et||"x"===et)&&(N(Ke,br.l/nt,br.r/nt,Ze,Nt.xaxes),lt("x",Ze)),("xy"===et||"y"===et)&&(N(Ue,(gt-br.b)/gt,(gt-br.t)/gt,Ze,Nt.yaxes),lt("y",Ze))}function ct(){je(),$(j),Dt(),V(j)}ar.prepFn=function(Lr,Ar,en){var mr=ar.dragmode,wr=j._fullLayout.dragmode;wr!==mr&&(ar.dragmode=wr),kt(),Xe=j._fullLayout._invScaleX,rt=j._fullLayout._invScaleY,Et||(be?Lr.shiftKey?"pan"===wr?wr="zoom":x(wr)||(wr="pan"):Lr.ctrlKey&&(wr="pan"):wr="pan"),ar.minDrag=S(wr)?1:void 0,x(wr)?(ar.xaxes=Ke,ar.yaxes=Ue,T(Lr,Ar,en,ar,wr)):(ar.clickFn=Jt,x(mr)&&Ut(),Et||("zoom"===wr?(ar.moveFn=tt,ar.doneFn=ct,ar.minDrag=1,function Tr(Lr,Ar,en){var mr=Xt.getBoundingClientRect();nr=Ar-mr.left,rr=en-mr.top,j._fullLayout._calcInverseTransform(j);var wr=k.apply3DTransform(j._fullLayout._invTransform)(nr,rr);br={l:nr=wr[0],r:nr,w:0,t:rr=wr[1],b:rr,h:0},Hr=j._hmpixcount?j._hmlumcount/j._hmpixcount:E(j._fullLayout.plot_bgcolor).getLuminance(),jr=!1,et="xy",Vt=!1,Yt=se(de,Hr,Be,Ie,on="M0,0H"+nt+"V"+gt+"H0V0"),qt=ne(de,Be,Ie)}(0,Ar,en)):"pan"===wr&&(ar.moveFn=st,ar.doneFn=Dt))),j._fullLayout._redrag=function(){var Wr=j._dragdata;Wr&&Wr.element===Xt&&(x(j._fullLayout.dragmode)||(kt(),Gt([0,0,nt,gt]),ar.moveFn(Wr.dx,Wr.dy)))}},s.init(ar);var ht=[0,0,nt,gt],Me=null,Se=h.REDRAWDELAY,Je=re.mainplot?j._fullLayout._plots[re.mainplot]:re;function st(Lr,Ar){if(Lr*=Xe,Ar*=rt,!j._transitioningWithDuration){if(j._fullLayout._replotting=!0,"ew"===Bt||"ns"===Zt){var en=Bt?-Lr:0,mr=Zt?-Ar:0;if(St.isSubplotConstrained){if(Bt&&Zt){var wr=(Lr/nt-Ar/gt)/2;en=-(Lr=wr*nt),mr=-(Ar=-wr*gt)}Zt?en=-mr*nt/gt:mr=-en*gt/nt}return Bt&&(U(Ke,Lr),lt("x")),Zt&&(U(Ue,Ar),lt("y")),Gt([en,mr,nt,gt]),pt(),void j.emit("plotly_relayouting",Ze)}var it,It,Kr="w"===Bt==("n"===Zt)?1:-1;if(Bt&&Zt&&(Nt.isSubplotConstrained||St.isSubplotConstrained)){var Cr=(Lr/nt+Kr*Ar/gt)/2;Lr=Cr*nt,Ar=Kr*Cr*gt}if("w"===Bt?Lr=Wr(Ke,0,Lr):"e"===Bt?Lr=Wr(Ke,1,-Lr):Bt||(Lr=0),"n"===Zt?Ar=Wr(Ue,1,Ar):"s"===Zt?Ar=Wr(Ue,0,-Ar):Zt||(Ar=0),it="w"===Bt?Lr:0,It="n"===Zt?Ar:0,Nt.isSubplotConstrained&&!St.isSubplotConstrained||St.isSubplotConstrained&&Bt&&Zt&&Kr>0){var Qt;if(St.isSubplotConstrained||!Bt&&1===Zt.length){for(Qt=0;Qt<Ke.length;Qt++)Ke[Qt].range=Ke[Qt]._r.slice(),u(Ke[Qt],1-Ar/gt);it=(Lr=Ar*nt/gt)/2}if(St.isSubplotConstrained||!Zt&&1===Bt.length){for(Qt=0;Qt<Ue.length;Qt++)Ue[Qt].range=Ue[Qt]._r.slice(),u(Ue[Qt],1-Lr/nt);It=(Ar=Lr*gt/nt)/2}}(!St.isSubplotConstrained||!Zt)&&lt("x"),(!St.isSubplotConstrained||!Bt)&&lt("y");var ir=nt-Lr,Or=gt-Ar;St.isSubplotConstrained&&!(Bt&&Zt)&&(Bt?(It=it?0:Lr*gt/nt,Or=ir*gt/nt):(it=It?0:Ar*nt/gt,ir=Or*nt/gt)),Gt([it,It,ir,Or]),pt(),j.emit("plotly_relayouting",Ze)}function Wr(qr,Ir,kr){for(var An,wn,Zr=1-Ir,Zn=0;Zn<qr.length;Zn++){var Ln=qr[Zn];if(!Ln.fixedrange){An=Ln,wn=Ln._rl[Zr]+(Ln._rl[Ir]-Ln._rl[Zr])/X(kr/Ln._length);var Wn=Ln.l2r(wn);!1!==Wn&&void 0!==Wn&&(Ln.range[Ir]=Wn)}}return An._length*(An._rl[Ir]-wn)/(An._rl[Ir]-An._rl[Zr])}}function lt(Lr,Ar){for(var en=St.isSubplotConstrained?{x:Ue,y:Ke}[Lr]:St[Lr+"axes"],mr=St.isSubplotConstrained?{x:Ke,y:Ue}[Lr]:[],wr=0;wr<en.length;wr++){var Wr=en[wr],Kr=Wr._id,Cr=St.xLinks[Kr]||St.yLinks[Kr],it=mr[0]||Ce[Cr]||Fe[Cr];it&&(Ar?(Ar[Wr._name+".range[0]"]=Ar[it._name+".range[0]"],Ar[Wr._name+".range[1]"]=Ar[it._name+".range[1]"]):Wr.range=it.range.slice())}}function pt(){var Ar,Lr=[];function en(Wr){for(Ar=0;Ar<Wr.length;Ar++)Wr[Ar].fixedrange||Lr.push(Wr[Ar]._id)}for(wt&&(en(Ke),en(Nt.xaxes),en(St.xaxes)),at&&(en(Ue),en(Nt.yaxes),en(St.yaxes)),Ze={},Ar=0;Ar<Lr.length;Ar++){var wr=A(j,Lr[Ar]);r.drawOne(j,wr,{skipTitle:!0}),Ze[wr._name+".range[0]"]=wr.range[0],Ze[wr._name+".range[1]"]=wr.range[1]}r.redrawComponents(j,Lr)}function Dt(){Gt([0,0,nt,gt]),k.syncOrAsync([y.previousPromises,function(){j._fullLayout._replotting=!1,c.call("_guiRelayout",j,Ze)}],j)}function Gt(Lr){var wr,Wr,Kr,Cr,Ar=j._fullLayout,en=Ar._plots,mr=Ar._subplots.cartesian;if(Qe&&c.subplotsRegistry.splom.drag(j),vt)for(wr=0;wr<mr.length;wr++)if(Kr=(Wr=en[mr[wr]]).xaxis,Cr=Wr.yaxis,Wr._scene){var it=k.simpleMap(Kr.range,Kr.r2l),It=k.simpleMap(Cr.range,Cr.r2l);Wr._scene.update({range:[it[0],It[0],it[1],It[1]]})}if((Qe||vt)&&(w(j),l(j)),Pe){var Qt=Lr[2]/De._length,ir=Lr[3]/ye._length;for(wr=0;wr<mr.length;wr++){Kr=(Wr=en[mr[wr]]).xaxis,Cr=Wr.yaxis;var Ir,kr,Zr,An,qr=(at||St.isSubplotConstrained)&&!Cr.fixedrange&&Fe[Cr._id];if((wt||St.isSubplotConstrained)&&!Kr.fixedrange&&Ce[Kr._id]?(Ir=Qt,Zr=we||St.isSubplotConstrained?Lr[0]:Jr(Kr,Ir)):St.xaHash[Kr._id]?(Ir=Qt,Zr=Lr[0]*Kr._length/De._length):St.yaHash[Kr._id]?(Ir=ir,Zr="ns"===Zt?-Lr[1]*Kr._length/ye._length:Jr(Kr,Ir,{n:"top",s:"bottom"}[Zt])):Zr=pr(Kr,Ir=fr(Kr,Qt,ir)),qr?(kr=ir,An=ke||St.isSubplotConstrained?Lr[1]:Jr(Cr,kr)):St.yaHash[Cr._id]?(kr=ir,An=Lr[1]*Cr._length/ye._length):St.xaHash[Cr._id]?(kr=Qt,An="ew"===Bt?-Lr[0]*Cr._length/De._length:Jr(Cr,kr,{e:"right",w:"left"}[Bt])):An=pr(Cr,kr=fr(Cr,Qt,ir)),Ir||kr){Ir||(Ir=1),kr||(kr=1);var wn=Kr._offset-Zr/Ir,Zn=Cr._offset-An/kr;Wr.clipRect.call(i.setTranslate,Zr,An).call(i.setScale,Ir,kr),Wr.plot.call(i.setTranslate,wn,Zn).call(i.setScale,1/Ir,1/kr),(Ir!==Wr.xScaleFactor||kr!==Wr.yScaleFactor)&&(i.setPointGroupScale(Wr.zoomScalePts,Ir,kr),i.setTextPointsScale(Wr.zoomScaleTxt,Ir,kr)),i.hideOutsideRangePoints(Wr.clipOnAxisFalseTraces,Wr),Wr.xScaleFactor=Ir,Wr.yScaleFactor=kr}}}}function fr(Lr,Ar,en){return Lr.fixedrange?0:wt&&Nt.xaHash[Lr._id]?Ar:at&&(Nt.isSubplotConstrained?Nt.xaHash:Nt.yaHash)[Lr._id]?en:0}function pr(Lr,Ar){return Ar?(Lr.range=Lr._r.slice(),u(Lr,Ar),Jr(Lr,Ar)):0}function Jr(Lr,Ar,en){return Lr._length*(1-Ar)*p[en||Lr.constraintoward||"middle"]}return ke.length*we.length!=1&&te(Xt,function We(Lr){if(j._context._scrollZoom.cartesian||j._fullLayout._enablescrollzoom){if(Ut(),j._transitioningWithDuration)return Lr.preventDefault(),void Lr.stopPropagation();kt(),clearTimeout(Me);var Ar=-Lr.deltaY;if(isFinite(Ar)||(Ar=Lr.wheelDelta/10),isFinite(Ar)){var Kr,en=Math.exp(-Math.min(Math.max(Ar,-20),20)/200),mr=Je.draglayer.select(".nsewdrag").node().getBoundingClientRect(),wr=(Lr.clientX-mr.left)/mr.width,Wr=(mr.bottom-Lr.clientY)/mr.height;if(wt){for(we||(wr=.5),Kr=0;Kr<Ke.length;Kr++)Cr(Ke[Kr],wr,en);lt("x"),ht[2]*=en,ht[0]+=ht[2]*wr*(1/en-1)}if(at){for(ke||(Wr=.5),Kr=0;Kr<Ue.length;Kr++)Cr(Ue[Kr],Wr,en);lt("y"),ht[3]*=en,ht[1]+=ht[3]*(1-Wr)*(1/en-1)}Gt(ht),pt(),j.emit("plotly_relayouting",Ze),Me=setTimeout(function(){!j._fullLayout||(ht=[0,0,nt,gt],Dt())},Se),Lr.preventDefault()}else k.log("Did not find wheel motion attributes: ",Lr)}function Cr(it,It,Qt){if(!it.fixedrange){var ir=k.simpleMap(it.range,it.r2l),Or=ir[0]+(ir[1]-ir[0])*It;it.range=ir.map(function qr(Ir){return it.l2r(Or+(Ir-Or)*Qt)})}}}),Xt},makeDragger:O,makeRectDragger:I,makeZoombox:se,makeCorners:ne,updateZoombox:W,xyCorners:K,transitionZoombox:G,removeZoombox:$,showDoubleClickNotifier:V,attachWheelEventHandler:te}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/subroutines":544,"../../registry":638,"../plots":619,"./axes":554,"./axis_ids":558,"./constants":561,"./scale_zoom":574,"./select":575,"@plotly/d3":58,"has-passive-events":229,tinycolor2:312}],564:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../components/fx"),m=v("../../components/dragelement"),E=v("../../lib/setcursor"),e=v("./dragbox").makeDragBox,c=v("./constants").DRAGGERSIZE;ae.initInteractions=function(n){var t=n._fullLayout;if(n._context.staticPlot)_.select(n).selectAll(".drag").remove();else if(t._has("cartesian")||t._has("splom")){Object.keys(t._plots||{}).sort(function(r,g){if((t._plots[r].mainplot&&!0)===(t._plots[g].mainplot&&!0)){var s=r.split("y"),b=g.split("y");return s[0]===b[0]?Number(s[1]||1)-Number(b[1]||1):Number(s[0]||1)-Number(b[0]||1)}return t._plots[r].mainplot?1:-1}).forEach(function(r){var g=t._plots[r],s=g.xaxis,b=g.yaxis;if(!g.mainplot){var x=e(n,g,s._offset,b._offset,s._length,b._length,"ns","ew");x.onmousemove=function(w){n._fullLayout._rehover=function(){n._fullLayout._hoversubplot===r&&n._fullLayout._plots[r]&&k.hover(n,w,r)},k.hover(n,w,r),n._fullLayout._lasthover=x,n._fullLayout._hoversubplot=r},x.onmouseout=function(w){n._dragging||(n._fullLayout._hoversubplot=null,m.unhover(n,w))},n._context.showAxisDragHandles&&(e(n,g,s._offset-c,b._offset-c,c,c,"n","w"),e(n,g,s._offset+s._length,b._offset-c,c,c,"n","e"),e(n,g,s._offset-c,b._offset+b._length,c,c,"s","w"),e(n,g,s._offset+s._length,b._offset+b._length,c,c,"s","e"))}if(n._context.showAxisDragHandles){if(r===s._mainSubplot){var S=s._mainLinePosition;"top"===s.side&&(S-=c),e(n,g,s._offset+.1*s._length,S,.8*s._length,c,"","ew"),e(n,g,s._offset,S,.1*s._length,c,"","w"),e(n,g,s._offset+.9*s._length,S,.1*s._length,c,"","e")}if(r===b._mainSubplot){var p=b._mainLinePosition;"right"!==b.side&&(p-=c),e(n,g,p,b._offset+.1*b._length,c,.8*b._length,"ns",""),e(n,g,p,b._offset+.9*b._length,c,.1*b._length,"s",""),e(n,g,p,b._offset,c,.1*b._length,"n","")}}});var a=t._hoverlayer.node();a.onmousemove=function(r){r.target=n._fullLayout._lasthover,k.hover(n,r,t._hoversubplot)},a.onclick=function(r){r.target=n._fullLayout._lasthover,k.click(n,r)},a.onmousedown=function(r){n._fullLayout._lasthover.onmousedown(r)},ae.updateFx(n)}},ae.updateFx=function(d){var n=d._fullLayout;E(n._draggers,"pan"===n.dragmode?"move":"crosshair")}},{"../../components/dragelement":385,"../../components/fx":406,"../../lib/setcursor":524,"./constants":561,"./dragbox":563,"@plotly/d3":58}],565:[function(v,ie,ae){"use strict";ie.exports={clearOutlineControllers:function _(m){var E=m._fullLayout._zoomlayer;E&&E.selectAll(".outline-controllers").remove()},clearSelect:function k(m){var E=m._fullLayout._zoomlayer;E&&E.selectAll(".select-outline").remove(),m._fullLayout._drawing=!1}}},{}],566:[function(v,ie,ae){"use strict";var _=v("../../lib").strTranslate;function k(c,d){switch(c.type){case"log":return c.p2d(d);case"date":return c.p2r(d,0,c.calendar);default:return c.p2r(d)}}ie.exports={p2r:k,r2p:function m(c,d){switch(c.type){case"log":return c.d2p(d);case"date":return c.r2p(d,0,c.calendar);default:return c.r2p(d)}},axValue:function E(c){var d="y"===c._id.charAt(0)?1:0;return function(n){return k(c,n[d])}},getTransform:function e(c){return _(c.xaxis._offset,c.yaxis._offset)}}},{"../../lib":503}],567:[function(v,ie,ae){"use strict";var _=v("../../registry"),k=v("../../lib"),m=v("./axis_ids");ie.exports=function(e){return function(d,n){var t=d[e];if(Array.isArray(t))for(var i=_.subplotsRegistry.cartesian,a=i.idRegex,r=n._subplots,g=r.xaxis,s=r.yaxis,b=r.cartesian,x=n._has("cartesian")||n._has("gl2d"),S=0;S<t.length;S++){var p=t[S];if(k.isPlainObject(p)){var w=m.cleanId(p.xref,"x",!1),l=m.cleanId(p.yref,"y",!1),y=a.x.test(w),A=a.y.test(l);if(y||A){x||k.pushUnique(n._basePlotModules,i);var T=!1;y&&-1===g.indexOf(w)&&(g.push(w),T=!0),A&&-1===s.indexOf(l)&&(s.push(l),T=!0),T&&y&&A&&b.push(w+l)}}}}}},{"../../lib":503,"../../registry":638,"./axis_ids":558}],568:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../registry"),m=v("../../lib"),E=v("../plots"),e=v("../../components/drawing"),c=v("../get_data").getModuleCalcData,d=v("./axis_ids"),n=v("./constants"),t=v("../../constants/xmlns_namespaces"),i=m.ensureSingle;function a(S,p,w){return m.ensureSingle(S,p,w,function(l){l.datum(w)})}function r(S,p,w,l,y){for(var f,u,h,A=n.traceLayerClasses,T=S._fullLayout,M=T._modules,o=[],C=[],R=0;R<M.length;R++){var z=(f=M[R]).name,O=k.modules[z].categories;if(O.svg){var I=f.layerName||z+"layer",F=f.plot;w=(u=c(w,F))[1],(h=u[0]).length&&o.push({i:A.indexOf(I),className:I,plotMethod:F,cdModule:h}),O.zoomScale&&C.push("."+I)}}o.sort(function(U,X){return U.i-X.i});var D=p.plot.selectAll("g.mlayer").data(o,function(U){return U.className});if(D.enter().append("g").attr("class",function(U){return U.className}).classed("mlayer",!0).classed("rangeplot",p.isRangePlot),D.exit().remove(),D.order(),D.each(function(U){var X=_.select(this),oe=U.className;U.plotMethod(S,p,U.cdModule,X,l,y),-1===n.clipOnAxisFalseQuery.indexOf("."+oe)&&e.setClipUrl(X,p.layerClipId,S)}),T._has("scattergl")&&(f=k.getModule("scattergl"),h=c(w,f)[0],f.plot(S,p,h)),!S._context.staticPlot&&(p._hasClipOnAxisFalse&&(p.clipOnAxisFalseTraces=p.plot.selectAll(n.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),C.length)){var N=p.plot.selectAll(C.join(",")).selectAll(".trace");p.zoomScalePts=N.selectAll("path.point"),p.zoomScaleTxt=N.selectAll(".textpoint")}}function s(S,p){var w=p.plotgroup,l=p.id,y=n.layerValue2layerClass[p.xaxis.layer],A=n.layerValue2layerClass[p.yaxis.layer],T=S._fullLayout._hasOnlyLargeSploms;if(p.mainplot){var f=p.mainplotinfo,u=f.plotgroup,h=l+"-x",o=l+"-y";p.minorGridlayer=f.minorGridlayer,p.gridlayer=f.gridlayer,p.zerolinelayer=f.zerolinelayer,i(f.overlinesBelow,"path",h),i(f.overlinesBelow,"path",o),i(f.overaxesBelow,"g",h),i(f.overaxesBelow,"g",o),p.plot=i(f.overplot,"g",l),i(f.overlinesAbove,"path",h),i(f.overlinesAbove,"path",o),i(f.overaxesAbove,"g",h),i(f.overaxesAbove,"g",o),p.xlines=u.select(".overlines-"+y).select("."+h),p.ylines=u.select(".overlines-"+A).select("."+o),p.xaxislayer=u.select(".overaxes-"+y).select("."+h),p.yaxislayer=u.select(".overaxes-"+A).select("."+o)}else if(T)p.xlines=i(w,"path","xlines-above"),p.ylines=i(w,"path","ylines-above"),p.xaxislayer=i(w,"g","xaxislayer-above"),p.yaxislayer=i(w,"g","yaxislayer-above");else{var M=i(w,"g","layer-subplot");p.shapelayer=i(M,"g","shapelayer"),p.imagelayer=i(M,"g","imagelayer"),p.minorGridlayer=i(w,"g","minor-gridlayer"),p.gridlayer=i(w,"g","gridlayer"),p.zerolinelayer=i(w,"g","zerolinelayer"),i(w,"path","xlines-below"),i(w,"path","ylines-below"),p.overlinesBelow=i(w,"g","overlines-below"),i(w,"g","xaxislayer-below"),i(w,"g","yaxislayer-below"),p.overaxesBelow=i(w,"g","overaxes-below"),p.plot=i(w,"g","plot"),p.overplot=i(w,"g","overplot"),p.xlines=i(w,"path","xlines-above"),p.ylines=i(w,"path","ylines-above"),p.overlinesAbove=i(w,"g","overlines-above"),i(w,"g","xaxislayer-above"),i(w,"g","yaxislayer-above"),p.overaxesAbove=i(w,"g","overaxes-above"),p.xlines=w.select(".xlines-"+y),p.ylines=w.select(".ylines-"+A),p.xaxislayer=w.select(".xaxislayer-"+y),p.yaxislayer=w.select(".yaxislayer-"+A)}T||(a(p.minorGridlayer,"g",p.xaxis._id),a(p.minorGridlayer,"g",p.yaxis._id),p.minorGridlayer.selectAll("g").map(function(C){return C[0]}).sort(d.idSort),a(p.gridlayer,"g",p.xaxis._id),a(p.gridlayer,"g",p.yaxis._id),p.gridlayer.selectAll("g").map(function(C){return C[0]}).sort(d.idSort)),p.xlines.style("fill","none").classed("crisp",!0),p.ylines.style("fill","none").classed("crisp",!0)}function b(S,p){if(S){var w={};for(var l in S.each(function(f){var u=f[0];_.select(this).remove(),x(u,p),w[u]=!0}),p._plots)for(var A=p._plots[l].overlays||[],T=0;T<A.length;T++){var M=A[T];w[M.id]&&M.plot.selectAll(".trace").remove()}}}function x(S,p){p._draggers.selectAll("g."+S).remove(),p._defs.select("#clip"+p._uid+S+"plot").remove()}ae.name="cartesian",ae.attr=["xaxis","yaxis"],ae.idRoot=["x","y"],ae.idRegex=n.idRegex,ae.attrRegex=n.attrRegex,ae.attributes=v("./attributes"),ae.layoutAttributes=v("./layout_attributes"),ae.supplyLayoutDefaults=v("./layout_defaults"),ae.transitionAxes=v("./transition_axes"),ae.finalizeSubplots=function(S,p){var u,h,o,w=p._subplots,l=w.xaxis,y=w.yaxis,A=w.cartesian,T=A.concat(w.gl2d||[]),M={},f={};for(u=0;u<T.length;u++){var C=T[u].split("y");M[C[0]]=1,f["y"+C[1]]=1}for(u=0;u<l.length;u++)M[h=l[u]]||(o=(S[d.id2name(h)]||{}).anchor,n.idRegex.y.test(o)||(o="y"),A.push(h+o),T.push(h+o),f[o]||(f[o]=1,m.pushUnique(y,o)));for(u=0;u<y.length;u++)f[o=y[u]]||(h=(S[d.id2name(o)]||{}).anchor,n.idRegex.x.test(h)||(h="x"),A.push(h+o),T.push(h+o),M[h]||(M[h]=1,m.pushUnique(l,h)));if(!T.length){for(var R in h="",o="",S)n.attrRegex.test(R)&&("x"===R.charAt(0)?(!h||+R.substr(5)<+h.substr(5))&&(h=R):(!o||+R.substr(5)<+o.substr(5))&&(o=R));h=h?d.name2id(h):"x",o=o?d.name2id(o):"y",l.push(h),y.push(o),A.push(h+o)}},ae.plot=function(S,p,w,l){var M,y=S._fullLayout,A=y._subplots.cartesian,T=S.calcdata;if(!Array.isArray(p))for(p=[],M=0;M<T.length;M++)p.push(M);for(M=0;M<A.length;M++){for(var o,f=A[M],u=y._plots[f],h=[],C=0;C<T.length;C++){var R=T[C],z=R[0].trace;z.xaxis+z.yaxis===f&&((-1!==p.indexOf(z.index)||z.carpet)&&(o&&o[0].trace.xaxis+o[0].trace.yaxis===f&&-1!==["tonextx","tonexty","tonext"].indexOf(z.fill)&&-1===h.indexOf(o)&&h.push(o),h.push(R)),o=R)}r(S,u,h,w,l)}},ae.clean=function(S,p,w,l){var M,f,u,y=l._plots||{},A=p._plots||{},T=l._subplots||{};if(l._hasOnlyLargeSploms&&!p._hasOnlyLargeSploms)for(u in y)(M=y[u]).plotgroup&&M.plotgroup.remove();var h=l._has&&l._has("gl"),o=p._has&&p._has("gl");if(h&&!o)for(u in y)(M=y[u])._scene&&M._scene.destroy();if(T.xaxis&&T.yaxis){var C=d.listIds({_fullLayout:l});for(f=0;f<C.length;f++){var R=C[f];p[d.id2name(R)]||l._infolayer.selectAll(".g-"+R+"title").remove()}}var z=l._has&&l._has("cartesian"),O=p._has&&p._has("cartesian");if(z&&!O)b(l._cartesianlayer.selectAll(".subplot"),l),l._defs.selectAll(".axesclip").remove(),delete l._axisConstraintGroups,delete l._axisMatchGroups;else if(T.cartesian)for(f=0;f<T.cartesian.length;f++){var I=T.cartesian[f];A[I]||(l._cartesianlayer.selectAll("."+I+",."+I+"-x,."+I+"-y").remove(),x(I,l))}},ae.drawFramework=function(S){var p=S._fullLayout,w=function g(S){var y,A,T,M,f,u,p=S._fullLayout,w=p._subplots.cartesian,l=w.length,h=[],o=[];for(y=0;y<l;y++){var z=(f=(M=p._plots[T=w[y]]).xaxis)._mainAxis._id+(u=M.yaxis)._mainAxis._id,O=p._plots[z];M.overlays=[],z!==T&&O?(M.mainplot=z,M.mainplotinfo=O,o.push(T)):(M.mainplot=void 0,M.mainplotinfo=void 0,h.push(T))}for(y=0;y<o.length;y++)(M=p._plots[T=o[y]]).mainplotinfo.overlays.push(M);var I=h.concat(o),F=new Array(l);for(y=0;y<l;y++){var D=[T=I[y],(f=(M=p._plots[T]).xaxis).layer,(u=M.yaxis).layer,f.overlaying||"",u.overlaying||""];for(A=0;A<M.overlays.length;A++)D.push(M.overlays[A].id);F[y]=D}return F}(S),l=p._cartesianlayer.selectAll(".subplot").data(w,String);l.enter().append("g").attr("class",function(y){return"subplot "+y[0]}),l.order(),l.exit().call(b,p),l.each(function(y){var A=y[0],T=p._plots[A];T.plotgroup=_.select(this),s(S,T),T.draglayer=i(p._draggers,"g",A)})},ae.rangePlot=function(S,p,w){s(S,p),r(S,p,w),E.style(S)},ae.toSVG=function(S){var p=S._fullLayout._glimages,w=_.select(S).selectAll(".svg-container");w.filter(function(A,T){return T===w.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function y(){var A=this,T=A.toDataURL("image/png");p.append("svg:image").attr({xmlns:t.svg,"xlink:href":T,preserveAspectRatio:"none",x:0,y:0,width:A.style.width,height:A.style.height})})},ae.updateFx=v("./graph_interact").updateFx},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../registry":638,"../get_data":593,"../plots":619,"./attributes":552,"./axis_ids":558,"./constants":561,"./graph_interact":564,"./layout_attributes":569,"./layout_defaults":570,"./transition_axes":581,"@plotly/d3":58}],569:[function(v,ie,ae){"use strict";var _=v("../font_attributes"),k=v("../../components/color/attributes"),m=v("../../components/drawing/attributes").dash,E=v("../../lib/extend").extendFlat,e=v("../../plot_api/plot_template").templatedArray,c=v("../../plots/cartesian/axis_format_attributes").descriptionWithDates,d=v("../../constants/numerical").ONEDAY,n=v("./constants"),t=n.HOUR_PATTERN,i=n.WEEKDAY_PATTERN,a={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}};function r(M){return{valType:"integer",min:0,dflt:M?5:0,editType:"ticks"}}var g={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},s={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},b={valType:"data_array",editType:"ticks"},x={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function S(M){var f={valType:"number",min:0,editType:"ticks"};return M||(f.dflt=5),f}function p(M){var f={valType:"number",min:0,editType:"ticks"};return M||(f.dflt=1),f}var w={valType:"color",dflt:k.defaultLine,editType:"ticks"},l={valType:"color",dflt:k.lightLine,editType:"ticks"};function y(M){var f={valType:"number",min:0,editType:"ticks"};return M||(f.dflt=1),f}var A=E({},m,{editType:"ticks"}),T={valType:"boolean",editType:"ticks"};ie.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:k.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:_({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[i,t,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:d},editType:"calc"}),tickmode:a,nticks:r(),tick0:g,dtick:s,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:b,ticktext:{valType:"data_array",editType:"ticks"},ticks:x,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:S(),tickwidth:p(),tickcolor:w,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:E({},m,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:_({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:c("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:c("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:T,gridcolor:l,gridwidth:y(),griddash:A,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},minor:{tickmode:a,nticks:r("minor"),tick0:g,dtick:s,tickvals:b,ticks:x,ticklen:S("minor"),tickwidth:p("minor"),tickcolor:w,gridcolor:l,gridwidth:y("minor"),griddash:A,showgrid:T,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:_({editType:"ticks"})}}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../constants/numerical":479,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../font_attributes":585,"./constants":561}],570:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../components/color"),m=v("../../components/fx/helpers").isUnifiedHover,E=v("../../components/fx/hovermode_defaults"),e=v("../../plot_api/plot_template"),c=v("../layout_attributes"),d=v("./layout_attributes"),n=v("./type_defaults"),t=v("./axis_defaults"),i=v("./constraints"),a=v("./position_defaults"),r=v("./axis_ids"),g=r.id2name,s=r.name2id,b=v("./constants").AX_ID_PATTERN,x=v("../../registry"),S=x.traceIs,p=x.getComponentMethod;function w(l,y,A){Array.isArray(l[y])?l[y].push(A):l[y]=[A]}ie.exports=function(y,A,T){var D,N,M=A.autotypenumbers,f={},u={},h={},o={},C={},R={},z={},O={},I={},F={};for(D=0;D<T.length;D++){var U=T[D];if(S(U,"cartesian")||S(U,"gl2d")){var X,oe;if(U.xaxis)X=g(U.xaxis),w(f,X,U);else if(U.xaxes)for(N=0;N<U.xaxes.length;N++)w(f,g(U.xaxes[N]),U);if(U.yaxis)oe=g(U.yaxis),w(f,oe,U);else if(U.yaxes)for(N=0;N<U.yaxes.length;N++)w(f,g(U.yaxes[N]),U);"funnel"===U.type?"h"===U.orientation?(X&&(u[X]=!0),oe&&(z[oe]=!0)):oe&&(h[oe]=!0):"image"===U.type?(oe&&(O[oe]=!0),X&&(O[X]=!0)):(oe&&(C[oe]=!0,R[oe]=!0),(!S(U,"carpet")||"carpet"===U.type&&!U._cheater)&&X&&(o[X]=!0)),"carpet"===U.type&&U._cheater&&X&&(u[X]=!0),S(U,"2dMap")&&(I[X]=!0,I[oe]=!0),S(U,"oriented")&&(F["h"===U.orientation?oe:X]=!0)}}var ne=A._subplots,W=ne.xaxis,G=ne.yaxis,$=_.simpleMap(W,g),V=_.simpleMap(G,g),H=$.concat(V),q=k.background;W.length&&G.length&&(q=_.coerce(y,A,c,"plot_bgcolor"));var Y,te,J,j,re,K=k.combine(q,A.paper_bgcolor);function le(){re._traceIndices=(f[Y]||[]).map(function(Pe){return Pe._expandedIndex}),re._annIndices=[],re._shapeIndices=[],re._imgIndices=[],re._subplotsWith=[],re._counterAxes=[],re._name=re._attr=Y,re._id=te}function ge(Qe,Pe){return _.coerce(j,re,d,Qe,Pe)}function pe(Qe,Pe){return _.coerce2(j,re,d,Qe,Pe)}function xe(Qe){return"x"===Qe?G:W}function ke(Qe,Pe){for(var Ze="x"===Qe?$:V,Xe=[],rt=0;rt<Ze.length;rt++){var kt=Ze[rt];kt!==Pe&&!(y[kt]||{}).overlaying&&Xe.push(s(kt))}return Xe}var we={x:xe("x"),y:xe("y")},de=we.x.concat(we.y),be={},Le=[];function De(){var Qe=j.matches;b.test(Qe)&&-1===de.indexOf(Qe)&&(be[Qe]=j.type,Le=Object.keys(be))}var ye=E(y,A),Ce=m(ye);for(D=0;D<H.length;D++){te=s(Y=H[D]),J=Y.charAt(0),_.isPlainObject(y[Y])||(y[Y]={}),j=y[Y],re=e.newContainer(A,Y,J+"axis"),le();var Ue={hasMinor:!0,letter:J,font:A.font,outerTicks:I[Y],showGrid:!F[Y],data:f[Y]||[],bgColor:K,calendar:A.calendar,automargin:!0,visibleDflt:"x"===J&&!o[Y]&&u[Y]||"y"===J&&!C[Y]&&h[Y],reverseDflt:"y"===J&&(!R[Y]&&z[Y]||O[Y]),autotypenumbersDflt:M,splomStash:((A._splomAxes||{})[J]||{})[te]};ge("uirevision",A.uirevision),n(j,re,ge,Ue),t(j,re,ge,Ue,A);var Be=Ce&&J===ye.charAt(0),Ie=pe("spikecolor",Ce?re.color:void 0),nt=pe("spikethickness",Ce?1.5:void 0),gt=pe("spikedash",Ce?"dot":void 0),Nt=pe("spikemode",Ce?"across":void 0),St=pe("spikesnap");ge("showspikes",!!(Be||Ie||nt||gt||Nt||St))||(delete re.spikecolor,delete re.spikethickness,delete re.spikedash,delete re.spikemode,delete re.spikesnap),a(j,re,ge,{letter:J,counterAxes:we[J],overlayableAxes:ke(J,Y),grid:A.grid}),ge("title.standoff"),De(),re._input=j}for(D=0;D<Le.length;){te=Le[D++],J=(Y=g(te)).charAt(0),_.isPlainObject(y[Y])||(y[Y]={}),j=y[Y],re=e.newContainer(A,Y,J+"axis"),le();var Zt={letter:J,font:A.font,outerTicks:I[Y],showGrid:!F[Y],data:[],bgColor:K,calendar:A.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:M,splomStash:((A._splomAxes||{})[J]||{})[te]};ge("uirevision",A.uirevision),re.type=be[te]||"linear",t(j,re,ge,Zt,A),a(j,re,ge,{letter:J,counterAxes:we[J],overlayableAxes:ke(J,Y),grid:A.grid}),ge("fixedrange"),De(),re._input=j}var Et=p("rangeslider","handleDefaults"),wt=p("rangeselector","handleDefaults");for(D=0;D<$.length;D++)j=y[Y=$[D]],re=A[Y],Et(y,A,Y),"date"===re.type&&wt(j,re,A,V,re.calendar),ge("fixedrange");for(D=0;D<V.length;D++){j=y[Y=V[D]];var at=A[g((re=A[Y]).anchor)];ge("fixedrange",p("rangeslider","isVisible")(at))}i.handleDefaults(y,A,{axIds:de.concat(Le).sort(r.idSort),axHasImage:O})}},{"../../components/color":366,"../../components/fx/helpers":402,"../../components/fx/hovermode_defaults":405,"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../layout_attributes":610,"./axis_defaults":556,"./axis_ids":558,"./constants":561,"./constraints":562,"./layout_attributes":569,"./position_defaults":572,"./type_defaults":582}],571:[function(v,ie,ae){"use strict";var _=v("tinycolor2").mix,k=v("../../components/color/attributes"),m=v("../../lib");ie.exports=function(e,c,d,n){var t=(n=n||{}).dfltColor;function i(h,o){return m.coerce2(e,c,n.attributes,h,o)}var a=i("linecolor",t),r=i("linewidth");d("showline",n.showLine||!!a||!!r)||(delete c.linecolor,delete c.linewidth);var b=i("gridcolor",_(t,n.bgColor,n.blend||k.lightFraction).toRgbString()),x=i("gridwidth"),S=i("griddash");if(d("showgrid",n.showGrid||!!b||!!x||!!S)||(delete c.gridcolor,delete c.gridwidth,delete c.griddash),n.hasMinor){var l=i("minor.gridcolor",_(c.gridcolor,n.bgColor,67).toRgbString()),y=i("minor.gridwidth",c.gridwidth||1),A=i("minor.griddash",c.griddash||"solid");d("minor.showgrid",!!l||!!y||!!A)||(delete c.minor.gridcolor,delete c.minor.gridwidth,delete c.minor.griddash)}if(!n.noZeroLine){var M=i("zerolinecolor",t),f=i("zerolinewidth");d("zeroline",n.showGrid||!!M||!!f)||(delete c.zerolinecolor,delete c.zerolinewidth)}}},{"../../components/color/attributes":365,"../../lib":503,tinycolor2:312}],572:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../lib");ie.exports=function(E,e,c,d){var r,g,s,b,n=d.counterAxes||[],t=d.overlayableAxes||[],i=d.letter,a=d.grid;a&&(r=a._anchors[e._id],(g=a._domains[i][a._axisMap[e._id]])&&(s=a[i+"side"].split(" ")[0],b=a.domain[i]["right"===s||"top"===s?1:0])),g=g||[0,1],r=r||(_(E.position)?"free":n[0]||"free"),s=s||("x"===i?"bottom":"left"),b=b||0,"free"===k.coerce(E,e,{anchor:{valType:"enumerated",values:["free"].concat(n),dflt:r}},"anchor")&&c("position",b),k.coerce(E,e,{side:{valType:"enumerated",values:"x"===i?["bottom","top"]:["left","right"],dflt:s}},"side");var S=!1;if(t.length&&(S=k.coerce(E,e,{overlaying:{valType:"enumerated",values:[!1].concat(t),dflt:!1}},"overlaying")),!S){var p=c("domain",g);p[0]>p[1]-1/4096&&(e.domain=g),k.noneOrAll(E.domain,e.domain,g)}return c("layer"),e}},{"../../lib":503,"fast-isnumeric":190}],573:[function(v,ie,ae){"use strict";var _=v("./show_dflt");ie.exports=function(m,E,e,c,d){d||(d={});var n=d.tickSuffixDflt,t=_(m);e("tickprefix")&&e("showtickprefix",t),e("ticksuffix",n)&&e("showticksuffix",t)}},{"./show_dflt":577}],574:[function(v,ie,ae){"use strict";var _=v("../../constants/alignment").FROM_BL;ie.exports=function(m,E,e){void 0===e&&(e=_[m.constraintoward||"center"]);var c=[m.r2l(m.range[0]),m.r2l(m.range[1])],d=c[0]+(c[1]-c[0])*e;m.range=m._input.range=[m.l2r(d+(c[0]-d)*E),m.l2r(d+(c[1]-d)*E)],m.setScale()}},{"../../constants/alignment":471}],575:[function(v,ie,ae){"use strict";var _=v("polybooljs"),k=v("../../registry"),m=v("../../components/drawing").dashStyle,E=v("../../components/color"),e=v("../../components/fx"),c=v("../../components/fx/helpers").makeEventData,d=v("../../components/dragelement/helpers"),n=d.freeMode,t=d.rectMode,i=d.drawMode,a=d.openMode,r=d.selectMode,g=v("../../components/shapes/draw_newshape/display_outlines"),s=v("../../components/shapes/draw_newshape/helpers").handleEllipse,b=v("../../components/shapes/draw_newshape/newshapes"),x=v("../../lib"),S=v("../../lib/polygon"),p=v("../../lib/throttle"),w=v("./axis_ids").getFromId,l=v("../../lib/clear_gl_canvases"),y=v("../../plot_api/subroutines").redrawReglTraces,A=v("./constants"),T=A.MINSELECT,M=S.filter,f=S.tester,u=v("./handle_outline").clearSelect,h=v("./helpers"),o=h.p2r,C=h.axValue,R=h.getTransform;function O(Y,te,J,j,re,le,ge){var be,Le,De,ye,Fe,Ke,Ue,Be,Ie,pe=te._hoverdata,we=te._fullLayout.clickmode.indexOf("event")>-1,de=[];if(function se(Y){return Y&&Array.isArray(Y)&&!0!==Y[0].hoverOnBox}(pe)){U(Y,te,le);var nt=function ne(Y,te){var le,ge,J=Y[0],j=-1,re=[];for(ge=0;ge<te.length;ge++)if(J.fullData._expandedIndex===(le=te[ge]).cd[0].trace._expandedIndex){if(!0===J.hoverOnBox)break;void 0!==J.pointNumber?j=J.pointNumber:void 0!==J.binNumber&&(j=J.binNumber,re=J.pointNumbers);break}return{pointNumber:j,pointNumbers:re,searchInfo:le}}(pe,be=oe(te,J,j,re));if(nt.pointNumbers.length>0?function G(Y,te){var j,re,ge,J=[];for(ge=0;ge<Y.length;ge++)(j=Y[ge]).cd[0].trace.selectedpoints&&j.cd[0].trace.selectedpoints.length>0&&J.push(j);if(1===J.length&&J[0]===te.searchInfo&&(re=te.searchInfo.cd[0].trace).selectedpoints.length===te.pointNumbers.length){for(ge=0;ge<te.pointNumbers.length;ge++)if(re.selectedpoints.indexOf(te.pointNumbers[ge])<0)return!1;return!0}return!1}(be,nt):function $(Y){var j,re,te=0;for(re=0;re<Y.length;re++)if((j=Y[re].cd[0].trace).selectedpoints&&(j.selectedpoints.length>1||(te+=j.selectedpoints.length)>1))return!1;return 1===te}(be)&&(Ke=W(nt))){for(ge&&ge.remove(),Ie=0;Ie<be.length;Ie++)(Le=be[Ie])._module.selectPoints(Le,!1);V(te,be),X(le),we&&te.emit("plotly_deselect",null)}else{for(Ue=Y.shiftKey&&(void 0!==Ke?Ke:W(nt)),De=function I(Y,te,J){return{pointNumber:Y,searchInfo:te,subtract:J}}(nt.pointNumber,nt.searchInfo,Ue),ye=N(le.selectionDefs.concat([De])),Ie=0;Ie<be.length;Ie++)if(Fe=q(be[Ie]._module.selectPoints(be[Ie],ye),be[Ie]),de.length)for(var St=0;St<Fe.length;St++)de.push(Fe[St]);else de=Fe;if(V(te,be,Be={points:de}),De&&le&&le.selectionDefs.push(De),ge){var Bt=le.mergedPolygons,Zt=a(le.dragmode);g(K(Bt,Zt),ge,le)}we&&te.emit("plotly_selected",Be)}}}function F(Y){return"pointNumber"in Y&&"searchInfo"in Y}function D(Y){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(te,J,j,re){return re.cd[0].trace._expandedIndex===Y.searchInfo.cd[0].trace._expandedIndex&&j===Y.pointNumber},isRect:!1,degenerate:!1,subtract:Y.subtract}}function N(Y){for(var te=[],J=F(Y[0])?0:Y[0][0][0],j=J,re=F(Y[0])?0:Y[0][0][1],le=re,ge=0;ge<Y.length;ge++)if(F(Y[ge]))te.push(D(Y[ge]));else{var pe=S.tester(Y[ge]);pe.subtract=Y[ge].subtract,te.push(pe),J=Math.min(J,pe.xmin),j=Math.max(j,pe.xmax),re=Math.min(re,pe.ymin),le=Math.max(le,pe.ymax)}return{xmin:J,xmax:j,ymin:re,ymax:le,pts:[],contains:function xe(ke,we,de,be){for(var Le=!1,De=0;De<te.length;De++)te[De].contains(ke,we,de,be)&&(Le=!1===te[De].subtract);return Le},isRect:!1,degenerate:!1}}function U(Y,te,J){te._fullLayout._drawing=!1;var j=te._fullLayout,re=J.plotinfo,le=J.dragmode,ge=j._lastSelectedSubplot&&j._lastSelectedSubplot===re.id,pe=(Y.shiftKey||Y.altKey)&&!(i(le)&&a(le));ge&&pe&&re.selection&&re.selection.selectionDefs&&!J.selectionDefs?(J.selectionDefs=re.selection.selectionDefs,J.mergedPolygons=re.selection.mergedPolygons):(!pe||!re.selection)&&X(J),ge||(u(te),j._lastSelectedSubplot=re.id)}function X(Y){var te=Y.dragmode,J=Y.plotinfo,j=Y.gd;if(j._fullLayout._activeShapeIndex>=0&&j._fullLayout._deactivateShape(j),i(te)){var ge=j._fullLayout._zoomlayer.selectAll(".select-outline-"+J.id);if(ge&&j._fullLayout._drawing){var pe=b(ge,Y);pe&&k.call("_guiRelayout",j,{shapes:pe}),j._fullLayout._drawing=!1}}J.selection={},J.selection.selectionDefs=Y.selectionDefs=[],J.selection.mergedPolygons=Y.mergedPolygons=[]}function oe(Y,te,J,j){var pe,xe,ke,re=[],le=te.map(function(Le){return Le._id}),ge=J.map(function(Le){return Le._id});for(ke=0;ke<Y.calcdata.length;ke++)if(!0===(xe=(pe=Y.calcdata[ke])[0].trace).visible&&xe._module&&xe._module.selectPoints)if(!j||xe.subplot!==j&&xe.geo!==j)if("splom"===xe.type&&xe._xaxes[le[0]]&&xe._yaxes[ge[0]]){var we=be(xe._module,pe,te[0],J[0]);we.scene=Y._fullLayout._splomScenes[xe.uid],re.push(we)}else if("sankey"===xe.type){var de=be(xe._module,pe,te[0],J[0]);re.push(de)}else{if(-1===le.indexOf(xe.xaxis)||-1===ge.indexOf(xe.yaxis))continue;re.push(be(xe._module,pe,w(Y,xe.xaxis),w(Y,xe.yaxis)))}else re.push(be(xe._module,pe,te[0],J[0]));return re;function be(Le,De,ye,Ce){return{_module:Le,cd:De,xaxis:ye,yaxis:Ce}}}function W(Y){var te=Y.searchInfo.cd[0].trace,j=Y.pointNumbers;return!!te.selectedpoints&&te.selectedpoints.indexOf(j.length>0?j[0]:Y.pointNumber)>-1}function V(Y,te,J){var j,re,le,ge;for(j=0;j<te.length;j++){var pe=te[j].cd[0].trace._fullInput,xe=Y._fullLayout._tracePreGUI[pe.uid]||{};void 0===xe.selectedpoints&&(xe.selectedpoints=pe._input.selectedpoints||null)}if(J){var ke=J.points||[];for(j=0;j<te.length;j++)(ge=te[j].cd[0].trace)._input.selectedpoints=ge._fullInput.selectedpoints=[],ge._fullInput!==ge&&(ge.selectedpoints=[]);for(j=0;j<ke.length;j++){var we=ke[j],de=we.data,be=we.fullData;we.pointIndices?([].push.apply(de.selectedpoints,we.pointIndices),ge._fullInput!==ge&&[].push.apply(be.selectedpoints,we.pointIndices)):(de.selectedpoints.push(we.pointIndex),ge._fullInput!==ge&&be.selectedpoints.push(we.pointIndex))}}else for(j=0;j<te.length;j++)delete(ge=te[j].cd[0].trace).selectedpoints,delete ge._input.selectedpoints,ge._fullInput!==ge&&delete ge._fullInput.selectedpoints;var Le=!1;for(j=0;j<te.length;j++){k.traceIs(ge=(le=(re=te[j]).cd)[0].trace,"regl")&&(Le=!0);var De=re._module,ye=De.styleOnSelect||De.style;ye&&(ye(Y,le,le[0].node3),le[0].nodeRangePlot3&&ye(Y,le,le[0].nodeRangePlot3))}Le&&(l(Y),y(Y))}function q(Y,te){if(Array.isArray(Y))for(var J=te.cd,j=te.cd[0].trace,re=0;re<Y.length;re++)Y[re]=c(Y[re],j,J);return Y}function K(Y,te){for(var J=[],j=0;j<Y.length;j++){J[j]=[];for(var re=0;re<Y[j].length;re++){J[j][re]=[],J[j][re][0]=re?"L":"M";for(var le=0;le<Y[j][re].length;le++)J[j][re].push(Y[j][re][le])}te||J[j].push(["Z",J[j][0][1],J[j][0][2]])}return J}ie.exports={prepSelect:function z(Y,te,J,j,re){var le=n(re),ge=t(re),pe=a(re),xe=i(re),ke=r(re),de="drawcircle"===re,be="drawline"===re||de,Le=j.gd,De=Le._fullLayout,ye=De._zoomlayer,Ce=j.element.getBoundingClientRect(),Fe=j.plotinfo,Ke=R(Fe),Ue=te-Ce.left,Be=J-Ce.top;De._calcInverseTransform(Le);var vt,Qe,Pe,Ze,Xe,rt,kt,Ie=x.apply3DTransform(De._invTransform)(Ue,Be),nt=De._invScaleX,gt=De._invScaleY,Nt=Ue=Ie[0],St=Be=Ie[1],Bt="M"+Ue+","+Be,Zt=j.xaxes[0]._length,Et=j.yaxes[0]._length,wt=j.xaxes.concat(j.yaxes),at=Y.altKey&&!(i(re)&&pe);U(Y,Le,j),le&&(vt=M([[Ue,Be]],A.BENDPX));var Tt=ye.selectAll("path.select-outline-"+Fe.id).data(xe?[0]:[1,2]),Xt=De.newshape;Tt.enter().append("path").attr("class",function(Hr){return"select-outline select-outline-"+Hr+" select-outline-"+Fe.id}).style(xe?{opacity:Xt.opacity/2,fill:pe?void 0:Xt.fillcolor,stroke:Xt.line.color,"stroke-dasharray":m(Xt.line.dash,Xt.line.width),"stroke-width":Xt.line.width+"px"}:{}).attr("fill-rule",Xt.fillrule).classed("cursor-move",!!xe).attr("transform",Ke).attr("d",Bt+"Z");var br,ar=ye.append("path").attr("class","zoombox-corners").style({fill:E.background,stroke:E.defaultLine,"stroke-width":1}).attr("transform",Ke).attr("d","M0,0Z"),Ut=De._uid+A.SELECTID,Jt=[],nr=oe(Le,j.xaxes,j.yaxes,j.subplot);function rr(Hr,on){return Hr-on}br=Fe.fillRangeItems?Fe.fillRangeItems:ge?function(Hr,on){var jr=Hr.range={};for(Xe=0;Xe<wt.length;Xe++){var et=wt[Xe],Yt=et._id.charAt(0);jr[et._id]=[o(et,on[Yt+"min"]),o(et,on[Yt+"max"])].sort(rr)}}:function(Hr,on,jr){var et=Hr.lassoPoints={};for(Xe=0;Xe<wt.length;Xe++){var Yt=wt[Xe];et[Yt._id]=jr.filtered.map(C(Yt))}},j.moveFn=function(Hr,on){Nt=Math.max(0,Math.min(Zt,nt*Hr+Ue)),St=Math.max(0,Math.min(Et,gt*on+Be));var jr=Math.abs(Nt-Ue),et=Math.abs(St-Be);if(ge){var Yt,qt,Vt;if(ke){var Tr=De.selectdirection;switch(Yt="any"===Tr?et<Math.min(.6*jr,T)?"h":jr<Math.min(.6*et,T)?"v":"d":Tr){case"h":qt=de?Et/2:0,Vt=Et;break;case"v":qt=de?Zt/2:0,Vt=Zt}}if(xe)switch(De.newshape.drawdirection){case"vertical":Yt="h",qt=de?Et/2:0,Vt=Et;break;case"horizontal":Yt="v",qt=de?Zt/2:0,Vt=Zt;break;case"ortho":jr<et?(Yt="h",qt=Be,Vt=St):(Yt="v",qt=Ue,Vt=Nt);break;default:Yt="d"}"h"===Yt?((Ze=be?s(de,[Nt,qt],[Nt,Vt]):[[Ue,qt],[Ue,Vt],[Nt,Vt],[Nt,qt]]).xmin=be?Nt:Math.min(Ue,Nt),Ze.xmax=be?Nt:Math.max(Ue,Nt),Ze.ymin=Math.min(qt,Vt),Ze.ymax=Math.max(qt,Vt),ar.attr("d","M"+Ze.xmin+","+(Be-T)+"h-4v"+2*T+"h4ZM"+(Ze.xmax-1)+","+(Be-T)+"h4v"+2*T+"h-4Z")):"v"===Yt?((Ze=be?s(de,[qt,St],[Vt,St]):[[qt,Be],[qt,St],[Vt,St],[Vt,Be]]).xmin=Math.min(qt,Vt),Ze.xmax=Math.max(qt,Vt),Ze.ymin=be?St:Math.min(Be,St),Ze.ymax=be?St:Math.max(Be,St),ar.attr("d","M"+(Ue-T)+","+Ze.ymin+"v-4h"+2*T+"v4ZM"+(Ue-T)+","+(Ze.ymax-1)+"v4h"+2*T+"v-4Z")):"d"===Yt&&((Ze=be?s(de,[Ue,Be],[Nt,St]):[[Ue,Be],[Ue,St],[Nt,St],[Nt,Be]]).xmin=Math.min(Ue,Nt),Ze.xmax=Math.max(Ue,Nt),Ze.ymin=Math.min(Be,St),Ze.ymax=Math.max(Be,St),ar.attr("d","M0,0Z"))}else le&&(vt.addPt([Nt,St]),Ze=vt.filtered);j.selectionDefs&&j.selectionDefs.length?(Pe=function H(Y,te,J){return J?_.difference({regions:Y,inverted:!1},{regions:[te],inverted:!1}).regions:_.union({regions:Y,inverted:!1},{regions:[te],inverted:!1}).regions}(j.mergedPolygons,Ze,at),Ze.subtract=at,Qe=N(j.selectionDefs.concat([Ze]))):(Pe=[Ze],Qe=f(Ze)),g(K(Pe,pe),Tt,j),ke&&p.throttle(Ut,A.SELECTDELAY,function(){Jt=[];var tt,ct,je=[];for(Xe=0;Xe<nr.length;Xe++)if(ct=(rt=nr[Xe])._module.selectPoints(rt,Qe),je.push(ct),tt=q(ct,rt),Jt.length)for(var ht=0;ht<tt.length;ht++)Jt.push(tt[ht]);else Jt=tt;V(Le,nr,kt={points:Jt}),br(kt,Ze,vt),j.gd.emit("plotly_selecting",kt)})},j.clickFn=function(Hr,on){if(ar.remove(),Le._fullLayout._activeShapeIndex>=0)Le._fullLayout._deactivateShape(Le);else if(!xe){var jr=De.clickmode;p.done(Ut).then(function(){if(p.clear(Ut),2===Hr){for(Tt.remove(),Xe=0;Xe<nr.length;Xe++)(rt=nr[Xe])._module.selectPoints(rt,!1);V(Le,nr),X(j),Le.emit("plotly_deselect",null)}else jr.indexOf("select")>-1&&O(on,Le,j.xaxes,j.yaxes,j.subplot,j,Tt),"event"===jr&&Le.emit("plotly_selected",void 0);e.click(Le,on)}).catch(x.error)}},j.doneFn=function(){ar.remove(),p.done(Ut).then(function(){p.clear(Ut),j.gd.emit("plotly_selected",kt),Ze&&j.selectionDefs&&(Ze.subtract=at,j.selectionDefs.push(Ze),j.mergedPolygons.length=0,[].push.apply(j.mergedPolygons,Pe)),j.doneFnCompleted&&j.doneFnCompleted(Jt)}).catch(x.error),xe&&X(j)}},clearSelect:u,clearSelectionsCache:X,selectOnClick:O}},{"../../components/color":366,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/fx/helpers":402,"../../components/shapes/draw_newshape/display_outlines":454,"../../components/shapes/draw_newshape/helpers":455,"../../components/shapes/draw_newshape/newshapes":456,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/polygon":515,"../../lib/throttle":530,"../../plot_api/subroutines":544,"../../registry":638,"./axis_ids":558,"./constants":561,"./handle_outline":565,"./helpers":566,polybooljs:254}],576:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("d3-time-format").utcFormat,m=v("../../lib"),E=m.numberFormat,e=v("fast-isnumeric"),c=m.cleanNumber,d=m.ms2DateTime,n=m.dateTime2ms,t=m.ensureNumber,i=m.isArrayOrTypedArray,a=v("../../constants/numerical"),r=a.FP_SAFE,g=a.BADNUM,s=a.LOG_CLIP,b=a.ONEWEEK,x=a.ONEDAY,S=a.ONEHOUR,p=a.ONEMIN,w=a.ONESEC,l=v("./axis_ids"),y=v("./constants"),A=y.HOUR_PATTERN,T=y.WEEKDAY_PATTERN;function M(u){return Math.pow(10,u)}function f(u){return null!=u}ie.exports=function(h,o){o=o||{};var C=h._id||"x",R=C.charAt(0);function z(H,q){if(H>0)return Math.log(H)/Math.LN10;if(H<=0&&q&&h.range&&2===h.range.length){var K=h.range[0],Y=h.range[1];return.5*(K+Y-2*s*Math.abs(K-Y))}return g}function O(H,q,K,Y){if((Y||{}).msUTC&&e(H))return+H;var te=n(H,K||h.calendar);if(te===g){if(!e(H))return g;H=+H;var J=Math.floor(10*m.mod(H+.05,1)),j=Math.round(H-J/10);te=n(new Date(j))+J/10}return te}function I(H,q,K){return d(H,q,K||h.calendar)}function F(H){return h._categories[Math.round(H)]}function D(H){if(f(H)){if(void 0===h._categoriesMap&&(h._categoriesMap={}),void 0!==h._categoriesMap[H])return h._categoriesMap[H];h._categories.push("number"==typeof H?String(H):H);var q=h._categories.length-1;return h._categoriesMap[H]=q,q}return g}function U(H){if(h._categoriesMap)return h._categoriesMap[H]}function X(H){var q=U(H);return void 0!==q?q:e(H)?+H:void 0}function oe(H){return e(H)?+H:U(H)}function se(H,q,K){return _.round(K+q*H,2)}function ne(H,q,K){return(H-K)/q}var W=function(q){return e(q)?se(q,h._m,h._b):g},G=function(H){return ne(H,h._m,h._b)};if(h.rangebreaks){var $="y"===R;W=function(H){if(!e(H))return g;var q=h._rangebreaks.length;if(!q)return se(H,h._m,h._b);var K=$;h.range[0]>h.range[1]&&(K=!K);for(var Y=K?-1:1,te=Y*H,J=0,j=0;j<q;j++){var re=Y*h._rangebreaks[j].min,le=Y*h._rangebreaks[j].max;if(te<re)break;if(!(te>le)){J=te<(re+le)/2?j:j+1;break}J=j+1}var ge=h._B[J]||0;return isFinite(ge)?se(H,h._m2,ge):0},G=function(H){var q=h._rangebreaks.length;if(!q)return ne(H,h._m,h._b);for(var K=0,Y=0;Y<q&&!(H<h._rangebreaks[Y].pmin);Y++)H>h._rangebreaks[Y].pmax&&(K=Y+1);return ne(H,h._m2,h._B[K])}}h.c2l="log"===h.type?z:t,h.l2c="log"===h.type?M:t,h.l2p=W,h.p2l=G,h.c2p="log"===h.type?function(H,q){return W(z(H,q))}:W,h.p2c="log"===h.type?function(H){return M(G(H))}:G,-1!==["linear","-"].indexOf(h.type)?(h.d2r=h.r2d=h.d2c=h.r2c=h.d2l=h.r2l=c,h.c2d=h.c2r=h.l2d=h.l2r=t,h.d2p=h.r2p=function(H){return h.l2p(c(H))},h.p2d=h.p2r=G,h.cleanPos=t):"log"===h.type?(h.d2r=h.d2l=function(H,q){return z(c(H),q)},h.r2d=h.r2c=function(H){return M(c(H))},h.d2c=h.r2l=c,h.c2d=h.l2r=t,h.c2r=z,h.l2d=M,h.d2p=function(H,q){return h.l2p(h.d2r(H,q))},h.p2d=function(H){return M(G(H))},h.r2p=function(H){return h.l2p(c(H))},h.p2r=G,h.cleanPos=t):"date"===h.type?(h.d2r=h.r2d=m.identity,h.d2c=h.r2c=h.d2l=h.r2l=O,h.c2d=h.c2r=h.l2d=h.l2r=I,h.d2p=h.r2p=function(H,q,K){return h.l2p(O(H,0,K))},h.p2d=h.p2r=function(H,q,K){return I(G(H),q,K)},h.cleanPos=function(H){return m.cleanDate(H,g,h.calendar)}):"category"===h.type?(h.d2c=h.d2l=D,h.r2d=h.c2d=h.l2d=F,h.d2r=h.d2l_noadd=X,h.r2c=function(H){var q=oe(H);return void 0!==q?q:h.fraction2r(.5)},h.l2r=h.c2r=t,h.r2l=oe,h.d2p=function(H){return h.l2p(h.r2c(H))},h.p2d=function(H){return F(G(H))},h.r2p=h.d2p,h.p2r=G,h.cleanPos=function(H){return"string"==typeof H&&""!==H?H:t(H)}):"multicategory"===h.type&&(h.r2d=h.c2d=h.l2d=F,h.d2r=h.d2l_noadd=X,h.r2c=function(H){var q=X(H);return void 0!==q?q:h.fraction2r(.5)},h.r2c_just_indices=U,h.l2r=h.c2r=t,h.r2l=X,h.d2p=function(H){return h.l2p(h.r2c(H))},h.p2d=function(H){return F(G(H))},h.r2p=h.d2p,h.p2r=G,h.cleanPos=function(H){return Array.isArray(H)||"string"==typeof H&&""!==H?H:t(H)},h.setupMultiCategory=function(H){var K,Y,q=h._traceIndices,te=h._matchGroup;if(te&&0===h._categories.length)for(var J in te)if(J!==C){var j=o[l.id2name(J)];q=q.concat(j._traceIndices)}var re=[[0,{}],[0,{}]],le=[];for(K=0;K<q.length;K++){var ge=H[q[K]];if(R in ge){var pe=ge[R],xe=ge._length||m.minRowLength(pe);if(i(pe[0])&&i(pe[1]))for(Y=0;Y<xe;Y++){var ke=pe[0][Y],we=pe[1][Y];f(ke)&&f(we)&&(le.push([ke,we]),ke in re[0][1]||(re[0][1][ke]=re[0][0]++),we in re[1][1]||(re[1][1][we]=re[1][0]++))}}}for(le.sort(function(de,be){var Le=re[0][1],De=Le[de[0]]-Le[be[0]];if(De)return De;var ye=re[1][1];return ye[de[1]]-ye[be[1]]}),K=0;K<le.length;K++)D(le[K])}),h.fraction2r=function(H){var q=h.r2l(h.range[0]),K=h.r2l(h.range[1]);return h.l2r(q+H*(K-q))},h.r2fraction=function(H){var q=h.r2l(h.range[0]),K=h.r2l(h.range[1]);return(h.r2l(H)-q)/(K-q)},h.cleanRange=function(H,q){q||(q={}),H||(H="range");var Y,te,K=m.nestedProperty(h,H).get();if(te=(te="date"===h.type?m.dfltRange(h.calendar):"y"===R?y.DFLTRANGEY:"realaxis"===h._name?[0,1]:q.dfltRange||y.DFLTRANGEX).slice(),("tozero"===h.rangemode||"nonnegative"===h.rangemode)&&(te[0]=0),K&&2===K.length)for("date"===h.type&&!h.autorange&&(K[0]=m.cleanDate(K[0],g,h.calendar),K[1]=m.cleanDate(K[1],g,h.calendar)),Y=0;Y<2;Y++)if("date"===h.type){if(!m.isDateTime(K[Y],h.calendar)){h[H]=te;break}if(h.r2l(K[0])===h.r2l(K[1])){var J=m.constrain(h.r2l(K[0]),m.MIN_MS+1e3,m.MAX_MS-1e3);K[0]=h.l2r(J-1e3),K[1]=h.l2r(J+1e3);break}}else{if(!e(K[Y])){if(!e(K[1-Y])){h[H]=te;break}K[Y]=K[1-Y]*(Y?10:.1)}if(K[Y]<-r?K[Y]=-r:K[Y]>r&&(K[Y]=r),K[0]===K[1]){var j=Math.max(1,Math.abs(1e-6*K[0]));K[0]-=j,K[1]+=j}}else m.nestedProperty(h,H).set(te)},h.setScale=function(H){var q=o._size;if(h.overlaying){var K=l.getFromId({_fullLayout:o},h.overlaying);h.domain=K.domain}var Y=H&&h._r?"_r":"range",te=h.calendar;h.cleanRange(Y);var le,ge,J=h.r2l(h[Y][0],te),j=h.r2l(h[Y][1],te),re="y"===R;if(re?(h._offset=q.t+(1-h.domain[1])*q.h,h._length=q.h*(h.domain[1]-h.domain[0]),h._m=h._length/(J-j),h._b=-h._m*j):(h._offset=q.l+h.domain[0]*q.w,h._length=q.w*(h.domain[1]-h.domain[0]),h._m=h._length/(j-J),h._b=-h._m*J),h._rangebreaks=[],h._lBreaks=0,h._m2=0,h._B=[],h.rangebreaks&&(h._rangebreaks=h.locateBreaks(Math.min(J,j),Math.max(J,j)),h._rangebreaks.length)){for(le=0;le<h._rangebreaks.length;le++)ge=h._rangebreaks[le],h._lBreaks+=Math.abs(ge.max-ge.min);var pe=re;J>j&&(pe=!pe),pe&&h._rangebreaks.reverse();var xe=pe?-1:1;for(h._m2=xe*h._length/(Math.abs(j-J)-h._lBreaks),h._B.push(-h._m2*(re?j:J)),le=0;le<h._rangebreaks.length;le++)h._B.push(h._B[h._B.length-1]-xe*h._m2*((ge=h._rangebreaks[le]).max-ge.min));for(le=0;le<h._rangebreaks.length;le++)(ge=h._rangebreaks[le]).pmin=W(ge.min),ge.pmax=W(ge.max)}if(!isFinite(h._m)||!isFinite(h._b)||h._length<0)throw o._replotting=!1,new Error("Something went wrong with axis scaling")},h.maskBreaks=function(H){var K,Y,te,J,j,q=h.rangebreaks||[];q._cachedPatterns||(q._cachedPatterns=q.map(function(Le){return Le.enabled&&Le.bounds?m.simpleMap(Le.bounds,Le.pattern?c:h.d2c):null})),q._cachedValues||(q._cachedValues=q.map(function(Le){return Le.enabled&&Le.values?m.simpleMap(Le.values,h.d2c).sort(m.sorterAsc):null}));for(var re=0;re<q.length;re++){var le=q[re];if(le.enabled)if(le.bounds){switch(Y=(K=q._cachedPatterns[re])[0],te=K[1],le.pattern){case T:J=(j=new Date(H)).getUTCDay(),Y>te&&(te+=7,J<Y&&(J+=7));break;case A:J=(j=new Date(H)).getUTCHours()+(j.getUTCMinutes()/60+j.getUTCSeconds()/3600+j.getUTCMilliseconds()/36e5),Y>te&&(te+=24,J<Y&&(J+=24));break;case"":J=H}if(J>=Y&&J<te)return g}else for(var de=q._cachedValues[re],be=0;be<de.length;be++)if(te=(Y=de[be])+le.dvalue,H>=Y&&H<te)return g}return H},h.locateBreaks=function(H,q){var K,Y,te,J,j=[];if(!h.rangebreaks)return j;var re=h.rangebreaks.slice().sort(function(ye,Ce){return ye.pattern===T&&Ce.pattern===A?-1:Ce.pattern===T&&ye.pattern===A?1:0}),le=function(ye,Ce){if((ye=m.constrain(ye,H,q))!==(Ce=m.constrain(Ce,H,q))){for(var Fe=!0,Ke=0;Ke<j.length;Ke++){var Ue=j[Ke];ye<Ue.max&&Ce>=Ue.min&&(ye<Ue.min&&(Ue.min=ye),Ce>Ue.max&&(Ue.max=Ce),Fe=!1)}Fe&&j.push({min:ye,max:Ce})}};for(K=0;K<re.length;K++){var ge=re[K];if(ge.enabled)if(ge.bounds){var pe=H,xe=q;ge.pattern&&(pe=Math.floor(pe)),te=(Y=m.simpleMap(ge.bounds,ge.pattern?c:h.r2l))[0],J=Y[1];var we,de,ke=new Date(pe);switch(ge.pattern){case T:de=b,we=(J-te+(J<te?7:0))*x,pe+=te*x-(ke.getUTCDay()*x+ke.getUTCHours()*S+ke.getUTCMinutes()*p+ke.getUTCSeconds()*w+ke.getUTCMilliseconds());break;case A:de=x,we=(J-te+(J<te?24:0))*S,pe+=te*S-(ke.getUTCHours()*S+ke.getUTCMinutes()*p+ke.getUTCSeconds()*w+ke.getUTCMilliseconds());break;default:pe=Math.min(Y[0],Y[1]),we=de=(xe=Math.max(Y[0],Y[1]))-pe}for(var be=pe;be<xe;be+=de)le(be,be+we)}else for(var Le=m.simpleMap(ge.values,h.d2c),De=0;De<Le.length;De++)le(te=Le[De],J=te+ge.dvalue)}return j.sort(function(ye,Ce){return ye.min-Ce.min}),j},h.makeCalcdata=function(H,q,K){var Y,te,J,j,re=h.type,le="date"===re&&H[q+"calendar"];if(q in H){if(Y=H[q],j=H._length||m.minRowLength(Y),m.isTypedArray(Y)&&("linear"===re||"log"===re)){if(j===Y.length)return Y;if(Y.subarray)return Y.subarray(0,j)}if("multicategory"===re)return function N(H,q){for(var K=new Array(q),Y=0;Y<q;Y++)K[Y]=U([(H[0]||[])[Y],(H[1]||[])[Y]]);return K}(Y,j);for(te=new Array(j),J=0;J<j;J++)te[J]=h.d2c(Y[J],0,le,K)}else{var ge=q+"0"in H?h.d2c(H[q+"0"],0,le):0,pe=H["d"+q]?Number(H["d"+q]):1;for(Y=H[{x:"y",y:"x"}[q]],j=H._length||Y.length,te=new Array(j),J=0;J<j;J++)te[J]=ge+J*pe}if(h.rangebreaks)for(J=0;J<j;J++)te[J]=h.maskBreaks(te[J]);return te},h.isValidRange=function(H){return Array.isArray(H)&&2===H.length&&e(h.r2l(H[0]))&&e(h.r2l(H[1]))},h.isPtWithinRange=function(H,q){var K=h.c2l(H[R],null,q),Y=h.r2l(h.range[0]),te=h.r2l(h.range[1]);return Y<te?Y<=K&&K<=te:te<=K&&K<=Y},h._emptyCategories=function(){h._categories=[],h._categoriesMap={}},h.clearCalc=function(){var H=h._matchGroup;if(H){var q=null,K=null;for(var Y in H){var te=o[l.id2name(Y)];if(te._categories){q=te._categories,K=te._categoriesMap;break}}q&&K?(h._categories=q,h._categoriesMap=K):h._emptyCategories()}else h._emptyCategories();if(h._initialCategories)for(var J=0;J<h._initialCategories.length;J++)D(h._initialCategories[J])},h.sortByInitialCategories=function(){var H=[];if(h._emptyCategories(),h._initialCategories)for(var q=0;q<h._initialCategories.length;q++)D(h._initialCategories[q]);H=H.concat(h._traceIndices);var K=h._matchGroup;for(var Y in K)if(C!==Y){var te=o[l.id2name(Y)];te._categories=h._categories,te._categoriesMap=h._categoriesMap,H=H.concat(te._traceIndices)}return H};var V=o._d3locale;"date"===h.type&&(h._dateFormat=V?V.timeFormat:k,h._extraFormat=o._extraFormat),h._separators=o.separators,h._numFormat=V?V.numberFormat:E,delete h._minDtick,delete h._forceTick0}},{"../../constants/numerical":479,"../../lib":503,"./axis_ids":558,"./constants":561,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],577:[function(v,ie,ae){"use strict";ie.exports=function(k){var E=["showexponent","showtickprefix","showticksuffix"].filter(function(c){return void 0!==k[c]});if(E.every(function(c){return k[c]===k[E[0]]})||1===E.length)return k[E[0]]}},{}],578:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../components/color").contrast,m=v("./layout_attributes"),E=v("./show_dflt"),e=v("../array_container_defaults");function c(d,n){function t(a,r){return _.coerce(d,n,m.tickformatstops,a,r)}t("enabled")&&(t("dtickrange"),t("value"))}ie.exports=function(n,t,i,a,r){r||(r={});var g=E(n);if(i("showticklabels")){var b=r.font||{},x=t.color,p=-1!==(t.ticklabelposition||"").indexOf("inside")?k(r.bgColor):x&&x!==m.color.dflt?x:b.color;if(_.coerceFont(i,"tickfont",{family:b.family,size:b.size,color:p}),!r.noTicklabelstep&&"multicategory"!==a&&"log"!==a&&i("ticklabelstep"),r.noAng||i("tickangle"),"category"!==a){var w=i("tickformat");e(n,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:c}),t.tickformatstops.length||delete t.tickformatstops,!r.noExp&&!w&&"date"!==a&&(i("showexponent",g),i("exponentformat"),i("minexponent"),i("separatethousands"))}}}},{"../../components/color":366,"../../lib":503,"../array_container_defaults":549,"./layout_attributes":569,"./show_dflt":577}],579:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./layout_attributes");ie.exports=function(E,e,c,d){var n=d.isMinor,t=n?E.minor||{}:E,i=n?e.minor:e,a=n?k.minor:k,r=n?"minor.":"",g=_.coerce2(t,i,a,"ticklen",n?.6*(e.ticklen||5):void 0),s=_.coerce2(t,i,a,"tickwidth",n?e.tickwidth||1:void 0),b=_.coerce2(t,i,a,"tickcolor",(n?e.tickcolor:void 0)||i.color);c(r+"ticks",!n&&d.outerTicks||g||s||b?"outside":"")||(delete i.ticklen,delete i.tickwidth,delete i.tickcolor)}},{"../../lib":503,"./layout_attributes":569}],580:[function(v,ie,ae){"use strict";var _=v("./clean_ticks"),k=v("../../lib").isArrayOrTypedArray;ie.exports=function(E,e,c,d,n){n||(n={});var t=n.isMinor,i=t?E.minor||{}:E,a=t?e.minor:e,r=t?"minor.":"";function g(y){var A=i[y];return void 0!==A?A:(a._template||{})[y]}var s=g("tick0"),b=g("dtick"),x=g("tickvals"),p=c(r+"tickmode",k(x)?"array":b?"linear":"auto");if("auto"===p)c(r+"nticks");else if("linear"===p){var w=a.dtick=_.dtick(b,d);a.tick0=_.tick0(s,d,e.calendar,w)}else"multicategory"!==d&&(void 0===c(r+"tickvals")?a.tickmode="auto":t||c("ticktext"))}},{"../../lib":503,"./clean_ticks":560}],581:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../registry"),m=v("../../lib"),E=v("../../components/drawing"),e=v("./axes");ie.exports=function(d,n,t,i){var a=d._fullLayout;if(0!==n.length){var s;i&&(s=i());var S,p,w,l=_.ease(t.easing);return d._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(w),w=null,function x(){for(var A={},T=0;T<n.length;T++){var M=n[T],u=M.plotinfo.yaxis;M.xr0&&(A[M.plotinfo.xaxis._name+".range"]=M.xr0.slice()),M.yr0&&(A[u._name+".range"]=M.yr0.slice())}return k.call("relayout",d,A).then(function(){for(var h=0;h<n.length;h++)r(n[h].plotinfo)})}()}),S=Date.now(),w=window.requestAnimationFrame(function y(){p=Date.now();for(var A=Math.min(1,(p-S)/t.duration),T=l(A),M=0;M<n.length;M++)g(n[M],T);p-S>t.duration?(function b(){for(var A={},T=0;T<n.length;T++){var M=n[T],u=M.plotinfo.yaxis;M.xr1&&(A[M.plotinfo.xaxis._name+".range"]=M.xr1.slice()),M.yr1&&(A[u._name+".range"]=M.yr1.slice())}return s&&s(),k.call("relayout",d,A).then(function(){for(var h=0;h<n.length;h++)r(n[h].plotinfo)})}(),w=window.cancelAnimationFrame(y)):w=window.requestAnimationFrame(y)}),Promise.resolve()}function r(A){var T=A.xaxis,M=A.yaxis;a._defs.select("#"+A.clipId+"> rect").call(E.setTranslate,0,0).call(E.setScale,1,1),A.plot.call(E.setTranslate,T._offset,M._offset).call(E.setScale,1,1);var f=A.plot.selectAll(".scatterlayer .trace");f.selectAll(".point").call(E.setPointGroupScale,1,1),f.selectAll(".textpoint").call(E.setTextPointsScale,1,1),f.call(E.hideOutsideRangePoints,A)}function g(A,T){var M=A.plotinfo,f=M.xaxis,u=M.yaxis,h=f._length,o=u._length,C=!!A.xr1,R=!!A.yr1,z=[];if(C){var O=m.simpleMap(A.xr0,f.r2l),I=m.simpleMap(A.xr1,f.r2l),F=O[1]-O[0],D=I[1]-I[0];z[0]=(O[0]*(1-T)+T*I[0]-O[0])/(O[1]-O[0])*h,z[2]=h*(1-T+T*D/F),f.range[0]=f.l2r(O[0]*(1-T)+T*I[0]),f.range[1]=f.l2r(O[1]*(1-T)+T*I[1])}else z[0]=0,z[2]=h;if(R){var N=m.simpleMap(A.yr0,u.r2l),U=m.simpleMap(A.yr1,u.r2l),X=N[1]-N[0],oe=U[1]-U[0];z[1]=(N[1]*(1-T)+T*U[1]-N[1])/(N[0]-N[1])*o,z[3]=o*(1-T+T*oe/X),u.range[0]=f.l2r(N[0]*(1-T)+T*U[0]),u.range[1]=u.l2r(N[1]*(1-T)+T*U[1])}else z[1]=0,z[3]=o;e.drawOne(d,f,{skipTitle:!0}),e.drawOne(d,u,{skipTitle:!0}),e.redrawComponents(d,[f._id,u._id]);var se=C?h/z[2]:1,ne=R?o/z[3]:1,H=f._offset-(C?z[0]/z[2]*h:0),q=u._offset-(R?z[1]/z[3]*o:0);M.clipRect.call(E.setTranslate,C?z[0]:0,R?z[1]:0).call(E.setScale,1/se,1/ne),M.plot.call(E.setTranslate,H,q).call(E.setScale,se,ne),E.setPointGroupScale(M.zoomScalePts,1/se,1/ne),E.setTextPointsScale(M.zoomScaleTxt,1/se,1/ne)}e.redrawComponents(d)}},{"../../components/drawing":388,"../../lib":503,"../../registry":638,"./axes":554,"@plotly/d3":58}],582:[function(v,ie,ae){"use strict";var _=v("../../registry").traceIs,k=v("./axis_autotype");function m(d,n){if("-"===d.type){var a,t=d._id,i=t.charAt(0);-1!==t.indexOf("scene")&&(t=i);var r=function E(d,n,t){for(var i=0;i<d.length;i++){var a=d[i];if("splom"===a.type&&a._length>0&&(a["_"+t+"axes"]||{})[n])return a;if((a[t+"axis"]||t)===n){if(c(a,t))return a;if((a[t]||[]).length||a[t+"0"])return a}}}(n,t,i);if(r){if("histogram"===r.type&&i==={v:"y",h:"x"}[r.orientation||"v"])return void(d.type="linear");var g=i+"calendar",s=r[g],b={noMultiCategory:!_(r,"cartesian")||_(r,"noMultiCategory")};if("box"===r.type&&r._hasPreCompStats&&i==={h:"x",v:"y"}[r.orientation||"v"]&&(b.noMultiCategory=!0),b.autotypenumbers=d.autotypenumbers,c(r,i)){var x=e(r),S=[];for(a=0;a<n.length;a++){var p=n[a];!_(p,"box-violin")||(p[i+"axis"]||i)!==t||(S.push(void 0!==p[x]?p[x][0]:void 0!==p.name?p.name:"text"),p[g]!==s&&(s=void 0))}d.type=k(S,s,b)}else if("splom"===r.type){var l=r.dimensions[r._axesDim[t]];l.visible&&(d.type=k(l.values,s,b))}else d.type=k(r[i]||[r[i+"0"]],s,b)}}}function e(d){return{v:"x",h:"y"}[d.orientation||"v"]}function c(d,n){var t=e(d),i=_(d,"box-violin"),a=_(d._fullInput||{},"candlestick");return i&&!a&&n===t&&void 0===d[t]&&void 0===d[t+"0"]}ie.exports=function(n,t,i,a){i("autotypenumbers",a.autotypenumbersDflt),"-"===i("type",(a.splomStash||{}).type)&&(m(t,a.data),"-"===t.type?t.type="linear":n.type=t.type)}},{"../../registry":638,"./axis_autotype":555}],583:[function(v,ie,ae){"use strict";var _=v("../registry"),k=v("../lib");function m(n,t,i){var a,r,g,s=!1;if("data"===t.type)a=n._fullData[null!==t.traces?t.traces[0]:0];else{if("layout"!==t.type)return!1;a=n._fullLayout}return r=k.nestedProperty(a,t.prop).get(),(g=i[t.type]=i[t.type]||{}).hasOwnProperty(t.prop)&&g[t.prop]!==r&&(s=!0),g[t.prop]=r,{changed:s,value:r}}function e(n,t){var i=[],a=t[0],r={};if("string"==typeof a)r[a]=t[1];else{if(!k.isPlainObject(a))return i;r=a}return d(r,function(g,s,b){i.push({type:"layout",prop:g,value:b})},"",0),i}function c(n,t){var i,a,r,g,s=[];if(r=t[1],i=t[2],g={},"string"==typeof(a=t[0]))g[a]=r;else{if(!k.isPlainObject(a))return s;g=a,void 0===i&&(i=r)}return void 0===i&&(i=null),d(g,function(b,x,S){var p,w;if(Array.isArray(S)){w=S.slice();var l=Math.min(w.length,n.data.length);i&&(l=Math.min(l,i.length)),p=[];for(var y=0;y<l;y++)p[y]=i?i[y]:y}else w=S,p=i?i.slice():null;if(null===p)Array.isArray(w)&&(w=w[0]);else if(Array.isArray(p)){if(!Array.isArray(w)){var A=w;w=[];for(var T=0;T<p.length;T++)w[T]=A}w.length=Math.min(p.length,w.length)}s.push({type:"data",prop:b,traces:p,value:w})},"",0),s}function d(n,t,i,a){Object.keys(n).forEach(function(r){var g=n[r];if("_"!==r[0]){var s=i+(a>0?".":"")+r;k.isPlainObject(g)?d(g,t,s,a+1):t(s,r,g)}})}ae.manageCommandObserver=function(n,t,i,a){var r={},g=!0;t&&t._commandObserver&&(r=t._commandObserver),r.cache||(r.cache={}),r.lookupTable={};var s=ae.hasSimpleAPICommandBindings(n,i,r.lookupTable);if(t&&t._commandObserver){if(s)return r;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,r}if(s){m(n,s,r.cache),r.check=function(){if(g){var p=m(n,s,r.cache);return p.changed&&a&&void 0!==r.lookupTable[p.value]&&(r.disable(),Promise.resolve(a({value:p.value,type:s.type,prop:s.prop,traces:s.traces,index:r.lookupTable[p.value]})).then(r.enable,r.enable)),p.changed}};for(var b=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],x=0;x<b.length;x++)n._internalOn(b[x],r.check);r.remove=function(){for(var S=0;S<b.length;S++)n._removeInternalListener(b[S],r.check)}}else k.log("Unable to automatically bind plot updates to API command"),r.lookupTable={},r.remove=function(){};return r.disable=function(){g=!1},r.enable=function(){g=!0},t&&(t._commandObserver=r),r},ae.hasSimpleAPICommandBindings=function(n,t,i){var a,g,r=t.length;for(a=0;a<r;a++){var s,b=t[a],x=b.method,S=b.args;if(Array.isArray(S)||(S=[]),!x)return!1;var p=ae.computeAPICommandBindings(n,x,S);if(1!==p.length)return!1;if(g){if((s=p[0]).type!==g.type||s.prop!==g.prop)return!1;if(Array.isArray(g.traces)){if(!Array.isArray(s.traces))return!1;s.traces.sort();for(var w=0;w<g.traces.length;w++)if(g.traces[w]!==s.traces[w])return!1}else if(s.prop!==g.prop)return!1}else g=p[0],Array.isArray(g.traces)&&g.traces.sort();var l=(s=p[0]).value;if(Array.isArray(l)){if(1!==l.length)return!1;l=l[0]}i&&(i[l]=a)}return g},ae.executeAPICommand=function(n,t,i){if("skip"===t)return Promise.resolve();var a=_.apiMethodRegistry[t],r=[n];Array.isArray(i)||(i=[]);for(var g=0;g<i.length;g++)r.push(i[g]);return a.apply(null,r).catch(function(s){return k.warn("API call to Plotly."+t+" rejected.",s),Promise.reject(s)})},ae.computeAPICommandBindings=function(n,t,i){var a;switch(Array.isArray(i)||(i=[]),t){case"restyle":a=c(n,i);break;case"relayout":a=e(0,i);break;case"update":a=c(n,[i[0],i[2]]).concat(e(0,[i[1]]));break;case"animate":a=function E(n,t){return Array.isArray(t[0])&&1===t[0].length&&-1!==["string","number"].indexOf(typeof t[0][0])?[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]:[]}(0,i);break;default:a=[]}return a}},{"../lib":503,"../registry":638}],584:[function(v,ie,ae){"use strict";var _=v("../lib/extend").extendFlat;ae.attributes=function(k,m){var E={valType:"info_array",editType:(k=k||{}).editType,items:[{valType:"number",min:0,max:1,editType:k.editType},{valType:"number",min:0,max:1,editType:k.editType}],dflt:[0,1]},n=(m=m||{},{x:_({},E,{}),y:_({},E,{}),editType:k.editType});return k.noGridCell||(n.row={valType:"integer",min:0,dflt:0,editType:k.editType},n.column={valType:"integer",min:0,dflt:0,editType:k.editType}),n},ae.defaults=function(k,m,E,e){var c=e&&e.x||[0,1],d=e&&e.y||[0,1],n=m.grid;if(n){var t=E("domain.column");void 0!==t&&(t<n.columns?c=n._domains.x[t]:delete k.domain.column);var i=E("domain.row");void 0!==i&&(i<n.rows?d=n._domains.y[i]:delete k.domain.row)}var a=E("domain.x",c),r=E("domain.y",d);a[0]<a[1]||(k.domain.x=c.slice()),r[0]<r[1]||(k.domain.y=d.slice())}},{"../lib/extend":493}],585:[function(v,ie,ae){"use strict";ie.exports=function(_){var k=_.editType,m=_.colorEditType;void 0===m&&(m=k);var E={family:{valType:"string",noBlank:!0,strict:!0,editType:k},size:{valType:"number",min:1,editType:k},color:{valType:"color",editType:m},editType:k};return _.autoSize&&(E.size.dflt="auto"),_.autoColor&&(E.color.dflt="auto"),_.arrayOk&&(E.family.arrayOk=!0,E.size.arrayOk=!0,E.color.arrayOk=!0),E}},{}],586:[function(v,ie,ae){"use strict";ie.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],587:[function(v,ie,ae){"use strict";ae.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},ae.axesNames=["lonaxis","lataxis"],ae.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},ae.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},ae.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},ae.clipPad=.001,ae.precision=.1,ae.landColor="#F0DC82",ae.waterColor="#3399FF",ae.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},ae.sphereSVG={type:"Sphere"},ae.fillLayers={ocean:1,land:1,lakes:1},ae.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},ae.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],ae.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],ae.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],588:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("d3-geo"),m=k.geoPath,E=k.geoDistance,e=v("d3-geo-projection"),c=v("../../registry"),d=v("../../lib"),n=d.strTranslate,t=v("../../components/color"),i=v("../../components/drawing"),a=v("../../components/fx"),r=v("../plots"),g=v("../cartesian/axes"),s=v("../cartesian/autorange").getAutoRange,b=v("../../components/dragelement"),x=v("../cartesian/select").prepSelect,S=v("../cartesian/select").clearSelect,p=v("../cartesian/select").selectOnClick,w=v("./zoom"),l=v("./constants"),y=v("../../lib/geo_location_utils"),A=v("../../lib/topojson_utils"),T=v("topojson-client").feature;function M(C){this.id=C.id,this.graphDiv=C.graphDiv,this.container=C.container,this.topojsonURL=C.topojsonURL,this.isStatic=C.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var f=M.prototype;function o(C,R){var z=l.clipPad,O=C[0]+z,I=C[1]-z,F=R[0]+z,D=R[1]-z;O>0&&I<0&&(I+=360);var N=(I-O)/4;return{type:"Polygon",coordinates:[[[O,F],[O,D],[O+N,D],[O+2*N,D],[O+3*N,D],[I,D],[I,F],[I-N,F],[I-2*N,F],[I-3*N,F],[O,F]]]}}ie.exports=function(R){return new M(R)},f.plot=function(C,R,z){var O=this,I=R[this.id],F=[],D=!1;for(var N in l.layerNameToAdjective)if("frame"!==N&&I["show"+N]){D=!0;break}for(var U=0;U<C.length;U++)if(C[0][0].trace.locationmode){D=!0;break}if(D){var X=A.getTopojsonName(I);(null===O.topojson||X!==O.topojsonName)&&(O.topojsonName=X,void 0===PlotlyGeoAssets.topojson[O.topojsonName]&&F.push(O.fetchTopojson()))}F=F.concat(y.fetchTraceGeoData(C)),z.push(new Promise(function(oe,se){Promise.all(F).then(function(){O.topojson=PlotlyGeoAssets.topojson[O.topojsonName],O.update(C,R),oe()}).catch(se)}))},f.fetchTopojson=function(){var C=this,R=A.getTopojsonPath(C.topojsonURL,C.topojsonName);return new Promise(function(z,O){_.json(R,function(I,F){if(I)return O(404===I.status?new Error(["plotly.js could not find topojson file at",R+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",R].join(" ")));PlotlyGeoAssets.topojson[C.topojsonName]=F,z()})})},f.update=function(C,R){var z=R[this.id];this.hasChoropleth=!1;for(var O=0;O<C.length;O++){var I=C[O],F=I[0].trace;"choropleth"===F.type&&(this.hasChoropleth=!0),!0===F.visible&&F._length>0&&F._module.calcGeoJSON(I,R)}if(!this.updateProjection(C,R)){(!this.viewInitial||this.scope!==z.scope)&&this.saveViewInitial(z),this.scope=z.scope,this.updateBaseLayers(R,z),this.updateDims(R,z),this.updateFx(R,z),r.generalUpdatePerTraceModule(this.graphDiv,this,C,z);var N=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=N.selectAll(".point"),this.dataPoints.text=N.selectAll("text"),this.dataPaths.line=N.selectAll(".js-line");var U=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=U.selectAll("path"),this.render()}},f.updateProjection=function(C,R){var z=this.graphDiv,O=R[this.id],I=R._size,F=O.domain,D=O.projection,N=O.lonaxis,U=O.lataxis,X=N._ax,oe=U._ax,se=this.projection=function u(C){var R=C.projection,z=R.type,O=l.projNames[z];O="geo"+d.titleCase(O);for(var F=(k[O]||e[O])(),D=C._isSatellite?180*Math.acos(1/R.distance)/Math.PI:C._isClipped?l.lonaxisSpan[z]/2:null,N=["center","rotate","parallels","clipExtent"],U=function(se){return se?F:[]},X=0;X<N.length;X++){var oe=N[X];"function"!=typeof F[oe]&&(F[oe]=U)}return F.isLonLatOverEdges=function(se){if(null===F(se))return!0;if(D){var ne=F.rotate();return E(se,[-ne[0],-ne[1]])>D*Math.PI/180}return!1},F.getPath=function(){return m().projection(F)},F.getBounds=function(se){return F.getPath().bounds(se)},F.precision(l.precision),C._isSatellite&&F.tilt(R.tilt).distance(R.distance),D&&F.clipAngle(D-l.clipPad),F}(O),ne=[[I.l+I.w*F.x[0],I.t+I.h*(1-F.y[1])],[I.l+I.w*F.x[1],I.t+I.h*(1-F.y[0])]],W=O.center||{},G=D.rotation||{},$=N.range||[],V=U.range||[];if(O.fitbounds){X._length=ne[1][0]-ne[0][0],oe._length=ne[1][1]-ne[0][1],X.range=s(z,X),oe.range=s(z,oe);var H=(X.range[0]+X.range[1])/2,q=(oe.range[0]+oe.range[1])/2;if(O._isScoped)W={lon:H,lat:q};else if(O._isClipped){W={lon:H,lat:q},G={lon:H,lat:q,roll:G.roll};var K=D.type,Y=l.lonaxisSpan[K]/2||180,te=l.lataxisSpan[K]/2||90;$=[H-Y,H+Y],V=[q-te,q+te]}else W={lon:H,lat:q},G={lon:H,lat:G.lat,roll:G.roll}}se.center([W.lon-G.lon,W.lat-G.lat]).rotate([-G.lon,-G.lat,G.roll]).parallels(D.parallels);var J=o($,V);se.fitExtent(ne,J);var j=this.bounds=se.getBounds(J),re=this.fitScale=se.scale(),le=se.translate();if(O.fitbounds){var ge=se.getBounds(o(X.range,oe.range)),pe=Math.min((j[1][0]-j[0][0])/(ge[1][0]-ge[0][0]),(j[1][1]-j[0][1])/(ge[1][1]-ge[0][1]));isFinite(pe)?se.scale(pe*re):d.warn("Something went wrong during"+this.id+"fitbounds computations.")}else se.scale(D.scale*re);var xe=this.midPt=[(j[0][0]+j[1][0])/2,(j[0][1]+j[1][1])/2];if(se.translate([le[0]+(xe[0]-le[0]),le[1]+(xe[1]-le[1])]).clipExtent(j),O._isAlbersUsa){var ke=se([W.lon,W.lat]),we=se.translate();se.translate([we[0]-(ke[0]-we[0]),we[1]-(ke[1]-we[1])])}},f.updateBaseLayers=function(C,R){var z=this,O=z.topojson,I=z.layers,F=z.basePaths;function D(ne){return"lonaxis"===ne||"lataxis"===ne}function N(ne){return Boolean(l.lineLayers[ne])}function U(ne){return Boolean(l.fillLayers[ne])}var oe=(this.hasChoropleth?l.layersForChoropleth:l.layers).filter(function(ne){return N(ne)||U(ne)?R["show"+ne]:!D(ne)||R[ne].showgrid}),se=z.framework.selectAll(".layer").data(oe,String);se.exit().each(function(ne){delete I[ne],delete F[ne],_.select(this).remove()}),se.enter().append("g").attr("class",function(ne){return"layer "+ne}).each(function(ne){var W=I[ne]=_.select(this);"bg"===ne?z.bgRect=W.append("rect").style("pointer-events","all"):D(ne)?F[ne]=W.append("path").style("fill","none"):"backplot"===ne?W.append("g").classed("choroplethlayer",!0):"frontplot"===ne?W.append("g").classed("scatterlayer",!0):N(ne)?F[ne]=W.append("path").style("fill","none").style("stroke-miterlimit",2):U(ne)&&(F[ne]=W.append("path").style("stroke","none"))}),se.order(),se.each(function(ne){var W=F[ne],G=l.layerNameToAdjective[ne];"frame"===ne?W.datum(l.sphereSVG):N(ne)||U(ne)?W.datum(T(O,O.objects[ne])):D(ne)&&W.datum(function h(C,R,z){var N,U,X,F=R[C],D=l.scopeDefaults[R.scope];"lonaxis"===C?(N=D.lonaxisRange,U=D.lataxisRange,X=function(q,K){return[q,K]}):"lataxis"===C&&(N=D.lataxisRange,U=D.lonaxisRange,X=function(q,K){return[K,q]});var oe={type:"linear",range:[N[0],N[1]-1e-6],tick0:F.tick0,dtick:F.dtick};g.setConvert(oe,z);var se=g.calcTicks(oe);!R.isScoped&&"lonaxis"===C&&se.pop();for(var ne=se.length,W=new Array(ne),G=0;G<ne;G++)for(var $=se[G].x,V=W[G]=[],H=U[0];H<U[1]+2.5;H+=2.5)V.push(X($,H));return{type:"MultiLineString",coordinates:W}}(ne,R,C)).call(t.stroke,R[ne].gridcolor).call(i.dashLine,R[ne].griddash,R[ne].gridwidth),N(ne)?W.call(t.stroke,R[G+"color"]).call(i.dashLine,"",R[G+"width"]):U(ne)&&W.call(t.fill,R[G+"color"])})},f.updateDims=function(C,R){var z=this.bounds,O=(R.framewidth||0)/2,I=z[0][0]-O,F=z[0][1]-O,D=z[1][0]-I+O,N=z[1][1]-F+O;i.setRect(this.clipRect,I,F,D,N),this.bgRect.call(i.setRect,I,F,D,N).call(t.fill,R.bgcolor),this.xaxis._offset=I,this.xaxis._length=D,this.yaxis._offset=F,this.yaxis._length=N},f.updateFx=function(C,R){var z=this,O=z.graphDiv,I=z.bgRect,F=C.dragmode,D=C.clickmode;if(!z.isStatic){var X;"select"===F?X=function(se,ne){(se.range={})[z.id]=[U([ne.xmin,ne.ymin]),U([ne.xmax,ne.ymax])]}:"lasso"===F&&(X=function(se,ne,W){(se.lassoPoints={})[z.id]=W.filtered.map(U)});var oe={element:z.bgRect.node(),gd:O,plotinfo:{id:z.id,xaxis:z.xaxis,yaxis:z.yaxis,fillRangeItems:X},xaxes:[z.xaxis],yaxes:[z.yaxis],subplot:z.id,clickFn:function(se){2===se&&S(O)}};"pan"===F?(I.node().onmousedown=null,I.call(w(z,R)),I.on("dblclick.zoom",function N(){var se=z.viewInitial,ne={};for(var W in se)ne[z.id+"."+W]=se[W];c.call("_guiRelayout",O,ne),O.emit("plotly_doubleclick",null)}),O._context._scrollZoom.geo||I.on("wheel.zoom",null)):("select"===F||"lasso"===F)&&(I.on(".zoom",null),oe.prepFn=function(se,ne,W){x(se,ne,W,oe,F)},b.init(oe)),I.on("mousemove",function(){var se=z.projection.invert(d.getPositionFromD3Event());if(!se)return b.unhover(O,_.event);z.xaxis.p2c=function(){return se[0]},z.yaxis.p2c=function(){return se[1]},a.hover(O,_.event,z.id)}),I.on("mouseout",function(){O._dragging||b.unhover(O,_.event)}),I.on("click",function(){"select"!==F&&"lasso"!==F&&(D.indexOf("select")>-1&&p(_.event,O,[z.xaxis],[z.yaxis],z.id,oe),D.indexOf("event")>-1&&a.click(O,_.event))})}function U(se){return z.projection.invert([se[0]+z.xaxis._offset,se[1]+z.yaxis._offset])}},f.makeFramework=function(){var C=this,R=C.graphDiv,z=R._fullLayout,O="clip"+z._uid+C.id;C.clipDef=z._clips.append("clipPath").attr("id",O),C.clipRect=C.clipDef.append("rect"),C.framework=_.select(C.container).append("g").attr("class","geo "+C.id).call(i.setClipUrl,O,R),C.project=function(I){var F=C.projection(I);return F?[F[0]-C.xaxis._offset,F[1]-C.yaxis._offset]:[null,null]},C.xaxis={_id:"x",c2p:function(I){return C.project(I)[0]}},C.yaxis={_id:"y",c2p:function(I){return C.project(I)[1]}},C.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},g.setConvert(C.mockAxis,z)},f.saveViewInitial=function(C){var R=C.center||{},z=C.projection,O=z.rotation||{};this.viewInitial={fitbounds:C.fitbounds,"projection.scale":z.scale},d.extendFlat(this.viewInitial,C._isScoped?{"center.lon":R.lon,"center.lat":R.lat}:C._isClipped?{"projection.rotation.lon":O.lon,"projection.rotation.lat":O.lat}:{"center.lon":R.lon,"center.lat":R.lat,"projection.rotation.lon":O.lon})},f.render=function(){var z,C=this.projection,R=C.getPath();function O(F){var D=C(F.lonlat);return D?n(D[0],D[1]):null}function I(F){return C.isLonLatOverEdges(F.lonlat)?"none":null}for(z in this.basePaths)this.basePaths[z].attr("d",R);for(z in this.dataPaths)this.dataPaths[z].attr("d",function(F){return R(F.geojson)});for(z in this.dataPoints)this.dataPoints[z].attr("display",I).attr("transform",O)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../registry":638,"../cartesian/autorange":553,"../cartesian/axes":554,"../cartesian/select":575,"../plots":619,"./constants":587,"./zoom":592,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":315}],589:[function(v,ie,ae){"use strict";var _=v("../../plots/get_data").getSubplotCalcData,k=v("../../lib").counterRegex,m=v("./geo"),E="geo",e=k(E),c={};c[E]={valType:"subplotid",dflt:E,editType:"calc"},ie.exports={attr:E,name:E,idRoot:E,idRegex:e,attrRegex:e,attributes:c,layoutAttributes:v("./layout_attributes"),supplyLayoutDefaults:v("./layout_defaults"),plot:function d(i){for(var a=i._fullLayout,r=i.calcdata,g=a._subplots[E],s=0;s<g.length;s++){var b=g[s],x=_(r,E,b),p=a[b]._subplot;p||(p=m({id:b,graphDiv:i,container:a._geolayer.node(),topojsonURL:i._context.topojsonURL,staticPlot:i._context.staticPlot}),a[b]._subplot=p),p.plot(x,a,i._promises)}},updateFx:function t(i){for(var a=i._fullLayout,r=a._subplots[E],g=0;g<r.length;g++){var s=a[r[g]];s._subplot.updateFx(a,s)}},clean:function n(i,a,r,g){for(var s=g._subplots[E]||[],b=0;b<s.length;b++){var x=s[b],S=g[x]._subplot;!a[x]&&S&&(S.framework.remove(),S.clipDef.remove())}}}},{"../../lib":503,"../../plots/get_data":593,"./geo":588,"./layout_attributes":590,"./layout_defaults":591}],590:[function(v,ie,ae){"use strict";var _=v("../../components/color/attributes"),k=v("../domain").attributes,m=v("../../components/drawing/attributes").dash,E=v("./constants"),e=v("../../plot_api/edit_types").overrideAll,c=v("../../lib/sort_object_keys"),d={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:_.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:m};(ie.exports=e({domain:k({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:c(E.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:c(E.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:_.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:E.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:E.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:E.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:E.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:_.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:_.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:_.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:_.background},lonaxis:d,lataxis:d},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../domain":584,"./constants":587}],591:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../subplot_defaults"),m=v("../get_data").getSubplotData,E=v("./constants"),e=v("./layout_attributes"),c=E.axesNames;function d(n,t,i,a){var g=m(a.fullData,"geo",a.id).map(function(V){return V._expandedIndex}),s=i("resolution"),b=i("scope"),x=E.scopeDefaults[b],S=i("projection.type",x.projType),p=t._isAlbersUsa="albers usa"===S;p&&(b=t.scope="usa");var w=t._isScoped="world"!==b,l=t._isSatellite="satellite"===S,y=t._isConic=-1!==S.indexOf("conic")||"albers"===S,A=t._isClipped=!!E.lonaxisSpan[S];if(!1===n.visible){var T=_.extendDeep({},t._template);T.showcoastlines=!1,T.showcountries=!1,T.showframe=!1,T.showlakes=!1,T.showland=!1,T.showocean=!1,T.showrivers=!1,T.showsubunits=!1,T.lonaxis&&(T.lonaxis.showgrid=!1),T.lataxis&&(T.lataxis.showgrid=!1),t._template=T}for(var M=i("visible"),u=0;u<c.length;u++){var C,h=c[u],o=[30,10][u];if(w)C=x[h+"Range"];else{var R=E[h+"Span"],z=(R[S]||R["*"])/2,O=i("projection.rotation."+h.substr(0,3),x.projRotate[u]);C=[O-z,O+z]}var I=i(h+".range",C);i(h+".tick0"),i(h+".dtick",o),i(h+".showgrid",!!M&&void 0)&&(i(h+".gridcolor"),i(h+".gridwidth"),i(h+".griddash")),t[h]._ax={type:"linear",_id:h.slice(0,3),_traceIndices:g,setScale:_.identity,c2l:_.identity,r2l:_.identity,autorange:!0,range:I.slice(),_m:1,_input:{}}}var F=t.lonaxis.range,D=t.lataxis.range,N=F[0],U=F[1];N>0&&U<0&&(U+=360);var oe,ne,W,X=(N+U)/2;if(!p){var se=w?x.projRotate:[X,0,0];oe=i("projection.rotation.lon",se[0]),i("projection.rotation.lat",se[1]),i("projection.rotation.roll",se[2]),i("showcoastlines",!w&&M)&&(i("coastlinecolor"),i("coastlinewidth")),i("showocean",!!M&&void 0)&&i("oceancolor")}p?(ne=-96.6,W=38.7):(ne=w?X:oe,W=(D[0]+D[1])/2),i("center.lon",ne),i("center.lat",W),l&&(i("projection.tilt"),i("projection.distance")),y&&i("projection.parallels",x.projParallels||[0,60]),i("projection.scale"),i("showland",!!M&&void 0)&&i("landcolor"),i("showlakes",!!M&&void 0)&&i("lakecolor"),i("showrivers",!!M&&void 0)&&(i("rivercolor"),i("riverwidth")),i("showcountries",w&&"usa"!==b&&M)&&(i("countrycolor"),i("countrywidth")),("usa"===b||"north america"===b&&50===s)&&(i("showsubunits",M),i("subunitcolor"),i("subunitwidth")),w||i("showframe",M)&&(i("framecolor"),i("framewidth")),i("bgcolor"),i("fitbounds")&&(delete t.projection.scale,w?(delete t.center.lon,delete t.center.lat):A?(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon,delete t.projection.rotation.lat,delete t.lonaxis.range,delete t.lataxis.range):(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon))}ie.exports=function(t,i,a){k(t,i,a,{type:"geo",attributes:e,handleDefaults:d,fullData:a,partition:"y"})}},{"../../lib":503,"../get_data":593,"../subplot_defaults":632,"./constants":587,"./layout_attributes":590}],592:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../lib"),m=v("../../registry"),E=Math.PI/180,e=180/Math.PI,c={cursor:"pointer"},d={cursor:"auto"};function t(h,o){return _.behavior.zoom().translate(o.translate()).scale(o.scale())}function i(h,o,C){var R=h.id,z=h.graphDiv,O=z.layout,I=O[R],F=z._fullLayout,D=F[R],N={},U={};function X(oe,se){N[R+"."+oe]=k.nestedProperty(I,oe).get(),m.call("_storeDirectGUIEdit",O,F._preGUI,N);var ne=k.nestedProperty(D,oe);ne.get()!==se&&(ne.set(se),k.nestedProperty(I,oe).set(se),U[R+"."+oe]=se)}C(X),X("projection.scale",o.scale()/h.fitScale),X("fitbounds",!1),z.emit("plotly_relayout",U)}function a(h,o){var C=t(0,o);function O(F){var D=o.invert(h.midPt);F("center.lon",D[0]),F("center.lat",D[1])}return C.on("zoomstart",function R(){_.select(this).style(c)}).on("zoom",function z(){o.scale(_.event.scale).translate(_.event.translate),h.render();var F=o.invert(h.midPt);h.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":o.scale()/h.fitScale,"geo.center.lon":F[0],"geo.center.lat":F[1]})}).on("zoomend",function I(){_.select(this).style(d),i(h,o,O)}),C}function r(h,o){var z,O,I,F,D,N,U,X,oe,C=t(0,o);function se(H){return o.invert(H)}function V(H){var q=o.rotate(),K=o.invert(h.midPt);H("projection.rotation.lon",-q[0]),H("center.lon",K[0]),H("center.lat",K[1])}return C.on("zoomstart",function W(){_.select(this).style(c),z=_.mouse(this),O=o.rotate(),I=o.translate(),F=O,D=se(z)}).on("zoom",function G(){if(N=_.mouse(this),function ne(H){var q=se(H);if(!q)return!0;var K=o(q);return Math.abs(K[0]-H[0])>2||Math.abs(K[1]-H[1])>2}(z))return C.scale(o.scale()),void C.translate(o.translate());o.scale(_.event.scale),o.translate([I[0],_.event.translate[1]]),D?se(N)&&(X=se(N),o.rotate(U=[F[0]+(X[0]-D[0]),O[1],O[2]]),F=U):D=se(z=N),oe=!0,h.render();var H=o.rotate(),q=o.invert(h.midPt);h.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":o.scale()/h.fitScale,"geo.center.lon":q[0],"geo.center.lat":q[1],"geo.projection.rotation.lon":-H[0]})}).on("zoomend",function $(){_.select(this).style(d),oe&&i(h,o,V)}),C}function g(h,o){var F,C={r:o.rotate(),k:o.scale()},R=t(0,o),z=function u(h){for(var o=0,C=arguments.length,R=[];++o<C;)R.push(arguments[o]);var z=_.dispatch.apply(null,R);return z.of=function(O,I){return function(F){var D;try{D=F.sourceEvent=_.event,F.target=h,_.event=F,z[F.type].apply(O,I)}finally{_.event=D}}},z}(R,"zoomstart","zoom","zoomend"),O=0,I=R.on;function D(oe){O++||oe({type:"zoomstart"})}function N(oe){oe({type:"zoom"})}function U(oe){--O||oe({type:"zoomend"})}function X(oe){var se=o.rotate();oe("projection.rotation.lon",-se[0]),oe("projection.rotation.lat",-se[1])}return R.on("zoomstart",function(){_.select(this).style(c);var oe=_.mouse(this),se=o.rotate(),ne=se,W=o.translate(),G=b(se);F=s(o,oe),I.call(R,"zoom",function(){var $=_.mouse(this);if(o.scale(C.k=_.event.scale),F){if(s(o,$)){o.rotate(se).translate(W);var V=s(o,$),H=S(F,V),q=A(x(G,H)),K=C.r=p(q,F,ne);(!isFinite(K[0])||!isFinite(K[1])||!isFinite(K[2]))&&(K=ne),o.rotate(K),ne=K}}else F=s(o,oe=$);N(z.of(this,arguments))}),D(z.of(this,arguments))}).on("zoomend",function(){_.select(this).style(d),I.call(R,"zoom",null),U(z.of(this,arguments)),i(h,o,X)}).on("zoom.redraw",function(){h.render();var oe=o.rotate();h.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":o.scale()/h.fitScale,"geo.projection.rotation.lon":-oe[0],"geo.projection.rotation.lat":-oe[1]})}),_.rebind(R,z,"on")}function s(h,o){var C=h.invert(o);return C&&isFinite(C[0])&&isFinite(C[1])&&function T(h){var o=h[0]*E,C=h[1]*E,R=Math.cos(C);return[R*Math.cos(o),R*Math.sin(o),Math.sin(C)]}(C)}function b(h){var o=.5*h[0]*E,C=.5*h[1]*E,R=.5*h[2]*E,z=Math.sin(o),O=Math.cos(o),I=Math.sin(C),F=Math.cos(C),D=Math.sin(R),N=Math.cos(R);return[O*F*N+z*I*D,z*F*N-O*I*D,O*I*N+z*F*D,O*F*D-z*I*N]}function x(h,o){var C=h[0],R=h[1],z=h[2],O=h[3],I=o[0],F=o[1],D=o[2],N=o[3];return[C*I-R*F-z*D-O*N,C*F+R*I+z*N-O*D,C*D-R*N+z*I+O*F,C*N+R*D-z*F+O*I]}function S(h,o){if(h&&o){var C=function f(h,o){return[h[1]*o[2]-h[2]*o[1],h[2]*o[0]-h[0]*o[2],h[0]*o[1]-h[1]*o[0]]}(h,o),R=Math.sqrt(M(C,C)),z=.5*Math.acos(Math.max(-1,Math.min(1,M(h,o)))),O=Math.sin(z)/R;return R&&[Math.cos(z),C[2]*O,-C[1]*O,C[0]*O]}}function p(h,o,C){var R=y(o,2,h[0]);R=y(R,1,h[1]),R=y(R,0,h[2]-C[2]);var oe,se,z=o[0],O=o[1],I=o[2],F=R[0],D=R[1],N=R[2],U=Math.atan2(O,z)*e,X=Math.sqrt(z*z+O*O);Math.abs(D)>X?(se=(D>0?90:-90)-U,oe=0):(se=Math.asin(D/X)*e-U,oe=Math.sqrt(X*X-D*D));var ne=180-se-2*U,W=(Math.atan2(N,F)-Math.atan2(I,oe))*e,G=(Math.atan2(N,F)-Math.atan2(I,-oe))*e;return w(C[0],C[1],se,W)<=w(C[0],C[1],ne,G)?[se,W,C[2]]:[ne,G,C[2]]}function w(h,o,C,R){var z=l(C-h),O=l(R-o);return Math.sqrt(z*z+O*O)}function l(h){return(h%360+540)%360-180}function y(h,o,C){var R=C*E,z=h.slice(),O=0===o?1:0,I=2===o?1:2,F=Math.cos(R),D=Math.sin(R);return z[O]=h[O]*F-h[I]*D,z[I]=h[I]*F+h[O]*D,z}function A(h){return[Math.atan2(2*(h[0]*h[1]+h[2]*h[3]),1-2*(h[1]*h[1]+h[2]*h[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(h[0]*h[2]-h[3]*h[1]))))*e,Math.atan2(2*(h[0]*h[3]+h[1]*h[2]),1-2*(h[2]*h[2]+h[3]*h[3]))*e]}function M(h,o){for(var C=0,R=0,z=h.length;R<z;++R)C+=h[R]*o[R];return C}ie.exports=function n(h,o){return(o._isScoped?a:o._isClipped?g:r)(h,h.projection)}},{"../../lib":503,"../../registry":638,"@plotly/d3":58}],593:[function(v,ie,ae){"use strict";var _=v("../registry"),k=v("./cartesian/constants").SUBPLOT_PATTERN;ae.getSubplotCalcData=function(m,E,e){var c=_.subplotsRegistry[E];if(!c)return[];for(var d=c.attr,n=[],t=0;t<m.length;t++){var i=m[t];i[0].trace[d]===e&&n.push(i)}return n},ae.getModuleCalcData=function(m,E){var d,e=[],c=[];if(!(d="string"==typeof E?_.getModule(E).plot:"function"==typeof E?E:E.plot))return[e,m];for(var n=0;n<m.length;n++){var t=m[n],i=t[0].trace;!0!==i.visible||0===i._length||(i._module.plot===d?e.push(t):c.push(t))}return[e,c]},ae.getSubplotData=function(E,e,c){if(!_.subplotsRegistry[e])return[];var t,i,a,d=_.subplotsRegistry[e].attr,n=[];if("gl2d"===e){var r=c.match(k);i="x"+r[1],a="y"+r[2]}for(var g=0;g<E.length;g++)t=E[g],"gl2d"===e&&_.traceIs(t,"gl2d")?t[d[0]]===i&&t[d[1]]===a&&n.push(t):t[d]===c&&n.push(t);return n}},{"../registry":638,"./cartesian/constants":561}],594:[function(v,ie,ae){"use strict";var _=v("mouse-change"),k=v("mouse-wheel"),m=v("mouse-event-offset"),E=v("../cartesian/constants"),e=v("has-passive-events");function c(n,t){this.element=n,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}ie.exports=function d(n){var t=n.mouseContainer,i=n.glplot,a=new c(t,i);function r(){n.xaxis.autorange=!1,n.yaxis.autorange=!1}function s(b,x,S){var M,f,p=n.calcDataBox(),w=i.viewBox,l=a.lastPos[0],y=a.lastPos[1],A=E.MINDRAG*i.pixelRatio,T=E.MINZOOM*i.pixelRatio;function u(O,I,F){var D=Math.min(I,F),N=Math.max(I,F);D!==N?(p[O]=D,p[O+2]=N,a.dataBox=p,n.setRanges(p)):(n.selectBox.selectBox=[0,0,1,1],n.glplot.setDirty())}switch(x*=i.pixelRatio,S=w[3]-w[1]-(S*=i.pixelRatio),n.fullLayout.dragmode){case"zoom":if(b){var h=x/(w[2]-w[0])*(p[2]-p[0])+p[0],o=S/(w[3]-w[1])*(p[3]-p[1])+p[1];a.boxInited||(a.boxStart[0]=h,a.boxStart[1]=o,a.dragStart[0]=x,a.dragStart[1]=S),a.boxEnd[0]=h,a.boxEnd[1]=o,a.boxInited=!0,!a.boxEnabled&&(a.boxStart[0]!==a.boxEnd[0]||a.boxStart[1]!==a.boxEnd[1])&&(a.boxEnabled=!0);var C=Math.abs(a.dragStart[0]-x)<T,R=Math.abs(a.dragStart[1]-S)<T;if(!function g(){for(var b=n.graphDiv._fullLayout._axisConstraintGroups,x=n.xaxis._id,S=n.yaxis._id,p=0;p<b.length;p++)if(-1!==b[p][x]){if(-1!==b[p][S])return!0;break}return!1}()||C&&R)C&&(a.boxEnd[0]=a.boxStart[0]),R&&(a.boxEnd[1]=a.boxStart[1]);else{M=a.boxEnd[0]-a.boxStart[0],f=a.boxEnd[1]-a.boxStart[1];var z=(p[3]-p[1])/(p[2]-p[0]);Math.abs(M*z)>Math.abs(f)?(a.boxEnd[1]=a.boxStart[1]+Math.abs(M)*z*(f>=0?1:-1),a.boxEnd[1]<p[1]?(a.boxEnd[1]=p[1],a.boxEnd[0]=a.boxStart[0]+(p[1]-a.boxStart[1])/Math.abs(z)):a.boxEnd[1]>p[3]&&(a.boxEnd[1]=p[3],a.boxEnd[0]=a.boxStart[0]+(p[3]-a.boxStart[1])/Math.abs(z))):(a.boxEnd[0]=a.boxStart[0]+Math.abs(f)/z*(M>=0?1:-1),a.boxEnd[0]<p[0]?(a.boxEnd[0]=p[0],a.boxEnd[1]=a.boxStart[1]+(p[0]-a.boxStart[0])*Math.abs(z)):a.boxEnd[0]>p[2]&&(a.boxEnd[0]=p[2],a.boxEnd[1]=a.boxStart[1]+(p[2]-a.boxStart[0])*Math.abs(z)))}}else a.boxEnabled?(f=a.boxStart[1]!==a.boxEnd[1],(M=a.boxStart[0]!==a.boxEnd[0])||f?(M&&(u(0,a.boxStart[0],a.boxEnd[0]),n.xaxis.autorange=!1),f&&(u(1,a.boxStart[1],a.boxEnd[1]),n.yaxis.autorange=!1),n.relayoutCallback()):n.glplot.setDirty(),a.boxEnabled=!1,a.boxInited=!1):a.boxInited&&(a.boxInited=!1);break;case"pan":a.boxEnabled=!1,a.boxInited=!1,b?(a.panning||(a.dragStart[0]=x,a.dragStart[1]=S),Math.abs(a.dragStart[0]-x)<A&&(x=a.dragStart[0]),Math.abs(a.dragStart[1]-S)<A&&(S=a.dragStart[1]),f=(y-S)*(p[3]-p[1])/(i.viewBox[3]-i.viewBox[1]),p[0]+=M=(l-x)*(p[2]-p[0])/(i.viewBox[2]-i.viewBox[0]),p[2]+=M,p[1]+=f,p[3]+=f,n.setRanges(p),a.panning=!0,a.lastInputTime=Date.now(),r(),n.cameraChanged(),n.handleAnnotations()):a.panning&&(a.panning=!1,n.relayoutCallback())}a.lastPos[0]=x,a.lastPos[1]=S}return a.mouseListener=_(t,s),t.addEventListener("touchstart",function(b){var x=m(b.changedTouches[0],t);s(0,x[0],x[1]),s(1,x[0],x[1]),b.preventDefault()},!!e&&{passive:!1}),t.addEventListener("touchmove",function(b){b.preventDefault();var x=m(b.changedTouches[0],t);s(1,x[0],x[1]),b.preventDefault()},!!e&&{passive:!1}),t.addEventListener("touchend",function(b){s(0,a.lastPos[0],a.lastPos[1]),b.preventDefault()},!!e&&{passive:!1}),a.wheelListener=k(t,function(b,x){if(!n.scrollZoom)return!1;var S=n.calcDataBox(),p=i.viewBox,w=a.lastPos[0],l=a.lastPos[1],y=Math.exp(5*x/(p[3]-p[1])),A=w/(p[2]-p[0])*(S[2]-S[0])+S[0],T=l/(p[3]-p[1])*(S[3]-S[1])+S[1];return S[0]=(S[0]-A)*y+A,S[2]=(S[2]-A)*y+A,S[1]=(S[1]-T)*y+T,S[3]=(S[3]-T)*y+T,n.setRanges(S),a.lastInputTime=Date.now(),r(),n.cameraChanged(),n.handleAnnotations(),n.relayoutCallback(),!0},!0),a}},{"../cartesian/constants":561,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],595:[function(v,ie,ae){"use strict";var _=v("../cartesian/axes"),k=v("../../lib/str2rgbarray");function m(d){this.scene=d,this.gl=d.gl,this.pixelRatio=d.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var E=m.prototype,e=["xaxis","yaxis"];E.merge=function(d){var n,t,i,a,r,g,s,b,x,S,p;for(this.titleEnable=!1,this.backgroundColor=k(d.plot_bgcolor),S=0;S<2;++S){var w=(n=e[S]).charAt(0);for(i=(t=d[this.scene[n]._name]).title.text===this.scene.fullLayout._dfltTitle[w]?"":t.title.text,p=0;p<=2;p+=2)this.labelEnable[S+p]=!1,this.labels[S+p]=i,this.labelColor[S+p]=k(t.title.font.color),this.labelFont[S+p]=t.title.font.family,this.labelSize[S+p]=t.title.font.size,this.labelPad[S+p]=this.getLabelPad(n,t),this.tickEnable[S+p]=!1,this.tickColor[S+p]=k((t.tickfont||{}).color),this.tickAngle[S+p]="auto"===t.tickangle?0:Math.PI*-t.tickangle/180,this.tickPad[S+p]=this.getTickPad(t),this.tickMarkLength[S+p]=0,this.tickMarkWidth[S+p]=t.tickwidth||0,this.tickMarkColor[S+p]=k(t.tickcolor),this.borderLineEnable[S+p]=!1,this.borderLineColor[S+p]=k(t.linecolor),this.borderLineWidth[S+p]=t.linewidth||0;s=this.hasSharedAxis(t),r=this.hasAxisInDfltPos(n,t)&&!s,g=this.hasAxisInAltrPos(n,t)&&!s,a=t.mirror||!1,b=s?-1!==String(a).indexOf("all"):!!a,x=s?"allticks"===a:-1!==String(a).indexOf("ticks"),r?this.labelEnable[S]=!0:g&&(this.labelEnable[S+2]=!0),r?this.tickEnable[S]=t.showticklabels:g&&(this.tickEnable[S+2]=t.showticklabels),(r||b)&&(this.borderLineEnable[S]=t.showline),(g||b)&&(this.borderLineEnable[S+2]=t.showline),(r||x)&&(this.tickMarkLength[S]=this.getTickMarkLength(t)),(g||x)&&(this.tickMarkLength[S+2]=this.getTickMarkLength(t)),this.gridLineEnable[S]=t.showgrid,this.gridLineColor[S]=k(t.gridcolor),this.gridLineWidth[S]=t.gridwidth,this.zeroLineEnable[S]=t.zeroline,this.zeroLineColor[S]=k(t.zerolinecolor),this.zeroLineWidth[S]=t.zerolinewidth}},E.hasSharedAxis=function(d){var n=this.scene;return 0!==_.findSubplotsWithAxis(n.fullLayout._subplots.gl2d,d).indexOf(n.id)},E.hasAxisInDfltPos=function(d,n){var t=n.side;return"xaxis"===d?"bottom"===t:"yaxis"===d?"left"===t:void 0},E.hasAxisInAltrPos=function(d,n){var t=n.side;return"xaxis"===d?"top"===t:"yaxis"===d?"right"===t:void 0},E.getLabelPad=function(d,n){var t=1.5,i=n.title.font.size,a=n.showticklabels;return"xaxis"===d?"top"===n.side?i*(t+(a?1:0))-10:i*(t+(a?.5:0))-10:"yaxis"===d?"right"===n.side?10+i*(t+(a?1:.5)):10+i*(t+(a?.5:0)):void 0},E.getTickPad=function(d){return"outside"===d.ticks?10+d.ticklen:15},E.getTickMarkLength=function(d){if(!d.ticks)return 0;var n=d.ticklen;return"inside"===d.ticks?-n:n},ie.exports=function c(d){return new m(d)}},{"../../lib/str2rgbarray":528,"../cartesian/axes":554}],596:[function(v,ie,ae){"use strict";var _=v("../../plot_api/edit_types").overrideAll,k=v("./scene2d"),m=v("../layout_attributes"),E=v("../../constants/xmlns_namespaces"),e=v("../cartesian/constants"),c=v("../cartesian"),d=v("../../components/fx/layout_attributes"),n=v("../get_data").getSubplotData;ae.name="gl2d",ae.attr=["xaxis","yaxis"],ae.idRoot=["x","y"],ae.idRegex=e.idRegex,ae.attrRegex=e.attrRegex,ae.attributes=v("../cartesian/attributes"),ae.supplyLayoutDefaults=function(t,i,a){i._has("cartesian")||c.supplyLayoutDefaults(t,i,a)},ae.layoutAttrOverrides=_(c.layoutAttributes,"plot","from-root"),ae.baseLayoutAttrOverrides=_({plot_bgcolor:m.plot_bgcolor,hoverlabel:d.hoverlabel},"plot","nested"),ae.plot=function(i){for(var a=i._fullLayout,r=i._fullData,g=a._subplots.gl2d,s=0;s<g.length;s++){var b=g[s],x=a._plots[b],S=n(r,"gl2d",b),p=x._scene2d;void 0===p&&(p=new k({id:b,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio},a),x._scene2d=p),p.plot(S,i.calcdata,a,i.layout)}},ae.clean=function(t,i,a,r){for(var g=r._subplots.gl2d||[],s=0;s<g.length;s++){var b=g[s],x=r._plots[b];x._scene2d&&0===n(t,"gl2d",b).length&&(x._scene2d.destroy(),delete r._plots[b])}c.clean.apply(this,arguments)},ae.drawFramework=function(t){t._context.staticPlot||c.drawFramework(t)},ae.toSVG=function(t){for(var i=t._fullLayout,a=i._subplots.gl2d,r=0;r<a.length;r++){var s=i._plots[a[r]]._scene2d,b=s.toImage("png");i._glimages.append("svg:image").attr({xmlns:E.svg,"xlink:href":b,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),s.destroy()}},ae.updateFx=function(t){for(var i=t._fullLayout,a=i._subplots.gl2d,r=0;r<a.length;r++)i._plots[a[r]]._scene2d.updateFx(i.dragmode)}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../plot_api/edit_types":536,"../cartesian":568,"../cartesian/attributes":552,"../cartesian/constants":561,"../get_data":593,"../layout_attributes":610,"./scene2d":597}],597:[function(v,ie,ae){"use strict";var w,l,_=v("../../registry"),k=v("../../plots/cartesian/axes"),m=v("../../components/fx"),E=v("../../../stackgl_modules").gl_plot2d,e=v("../../../stackgl_modules").gl_spikes2d,c=v("../../../stackgl_modules").gl_select_box,d=v("webgl-context"),n=v("./convert"),t=v("./camera"),i=v("../../lib/show_no_webgl_msg"),a=v("../cartesian/constraints"),r=a.enforce,g=a.clean,s=v("../cartesian/autorange").doAutoRange,b=v("../../components/dragelement/helpers"),x=b.drawMode,S=b.selectMode,p=["xaxis","yaxis"],y=v("../cartesian/constants").SUBPLOT_PATTERN;function A(f,u){this.container=f.container,this.graphDiv=f.graphDiv,this.pixelRatio=f.plotGlPixelRatio||window.devicePixelRatio,this.id=f.id,this.staticPlot=!!f.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(u),this.makeFramework(),!this.stopped&&(this.glplotOptions=n(this),this.glplotOptions.merge(u),this.glplot=E(this.glplotOptions),this.camera=t(this),this.traces={},this.spikes=e(this.glplot),this.selectBox=c(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}ie.exports=A;var T=A.prototype;T.makeFramework=function(){if(this.staticPlot){if(!(l||(w=document.createElement("canvas"),l=d({canvas:w,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=w,this.gl=l}else{var f=this.container.querySelector(".gl-canvas-focus"),u=d({canvas:f,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!u)return i(this),void(this.stopped=!0);this.canvas=f,this.gl=u}var h=this.canvas;h.style.width="100%",h.style.height="100%",h.style.position="absolute",h.style.top="0px",h.style.left="0px",h.style["pointer-events"]="none",this.updateSize(h);var o=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");o.style.position="absolute",o.style.top=o.style.left="0px",o.style.width=o.style.height="100%",o.style["z-index"]=20,o.style["pointer-events"]="none";var C=this.mouseContainer=document.createElement("div");C.style.position="absolute",C.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var R=this.container;R.appendChild(o),R.appendChild(C);var z=this;C.addEventListener("mouseout",function(){z.isMouseOver=!1,z.unhover()}),C.addEventListener("mouseover",function(){z.isMouseOver=!0})},T.toImage=function(f){f||(f="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(w),this.updateSize(this.canvas);var u=this.glplot.gl,h=u.drawingBufferWidth,o=u.drawingBufferHeight;u.clearColor(1,1,1,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),u.bindFramebuffer(u.FRAMEBUFFER,null);var C=new Uint8Array(h*o*4);u.readPixels(0,0,h,o,u.RGBA,u.UNSIGNED_BYTE,C);for(var R=0,z=o-1;R<z;++R,--z)for(var O=0;O<h;++O)for(var I=0;I<4;++I){var F=C[4*(h*R+O)+I];C[4*(h*R+O)+I]=C[4*(h*z+O)+I],C[4*(h*z+O)+I]=F}var D=document.createElement("canvas");D.width=h,D.height=o;var X,N=D.getContext("2d",{willReadFrequently:!0}),U=N.createImageData(h,o);switch(U.data.set(C),N.putImageData(U,0,0),f){case"jpeg":X=D.toDataURL("image/jpeg");break;case"webp":X=D.toDataURL("image/webp");break;default:X=D.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(w),X},T.updateSize=function(f){f||(f=this.canvas);var u=this.pixelRatio,h=this.fullLayout,C=h.height,R=0|Math.ceil(u*h.width),z=0|Math.ceil(u*C);return(f.width!==R||f.height!==z)&&(f.width=R,f.height=z),f},T.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var f=[k.calcTicks(this.xaxis),k.calcTicks(this.yaxis)],u=0;u<2;++u)for(var h=0;h<f[u].length;++h)f[u][h].text=f[u][h].text+"";return f},T.updateRefs=function(f){this.fullLayout=f;var u=this.id.match(y),o="yaxis"+u[2];this.xaxis=this.fullLayout["xaxis"+u[1]],this.yaxis=this.fullLayout[o]},T.relayoutCallback=function(){var f=this.graphDiv,u=this.xaxis,h=this.yaxis,o=f.layout,C={},R=C[u._name+".range"]=u.range.slice(),z=C[h._name+".range"]=h.range.slice();C[u._name+".autorange"]=u.autorange,C[h._name+".autorange"]=h.autorange,_.call("_storeDirectGUIEdit",f.layout,f._fullLayout._preGUI,C);var O=o[u._name];O.range=R,O.autorange=u.autorange;var I=o[h._name];I.range=z,I.autorange=h.autorange,C.lastInputTime=this.camera.lastInputTime,f.emit("plotly_relayout",C)},T.cameraChanged=function(){var f=this.camera;this.glplot.setDataBox(this.calcDataBox());var u=this.computeTickMarks();(function M(f,u){for(var h=0;h<2;++h){var o=f[h],C=u[h];if(o.length!==C.length)return!0;for(var R=0;R<o.length;++R)if(o[R].x!==C[R].x)return!0}return!1})(u,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=u,this.glplotOptions.dataBox=f.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},T.handleAnnotations=function(){for(var f=this.graphDiv,u=this.fullLayout.annotations,h=0;h<u.length;h++){var o=u[h];o.xref===this.xaxis._id&&o.yref===this.yaxis._id&&_.getComponentMethod("annotations","drawOne")(f,h)}},T.destroy=function(){if(this.glplot){var f=this.traces;f&&Object.keys(f).map(function(u){f[u].dispose(),delete f[u]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},T.plot=function(f,u,h){var o=this.glplot;this.updateRefs(h),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(f,u),this.updateFx(h.dragmode);var C=h.width,R=h.height;this.updateSize(this.canvas);var z=this.glplotOptions;z.merge(h),z.screenBox=[0,0,C,R];var O={_fullLayout:{_axisConstraintGroups:h._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:h._size}};g(O,this.xaxis),g(O,this.yaxis);var N,U,I=h._size,F=this.xaxis.domain,D=this.yaxis.domain;for(z.viewBox=[I.l+F[0]*I.w,I.b+D[0]*I.h,C-I.r-(1-F[1])*I.w,R-I.t-(1-D[1])*I.h],this.mouseContainer.style.width=I.w*(F[1]-F[0])+"px",this.mouseContainer.style.height=I.h*(D[1]-D[0])+"px",this.mouseContainer.height=I.h*(D[1]-D[0]),this.mouseContainer.style.left=I.l+F[0]*I.w+"px",this.mouseContainer.style.top=I.t+(1-D[1])*I.h+"px",U=0;U<2;++U)(N=this[p[U]])._length=z.viewBox[U+2]-z.viewBox[U],s(this.graphDiv,N),N.setScale();r(O),z.ticks=this.computeTickMarks(),z.dataBox=this.calcDataBox(),z.merge(h),o.update(z),this.glplot.draw()},T.calcDataBox=function(){var f=this.xaxis,u=this.yaxis,h=f.range,o=u.range,C=f.r2l,R=u.r2l;return[C(h[0]),R(o[0]),C(h[1]),R(o[1])]},T.setRanges=function(f){var u=this.xaxis,h=this.yaxis,o=u.l2r,C=h.l2r;u.range=[o(f[0]),o(f[2])],h.range=[C(f[1]),C(f[3])]},T.updateTraces=function(f,u){var o,C,R,h=Object.keys(this.traces);this.fullData=f;e:for(o=0;o<h.length;o++){var z=h[o],O=this.traces[z];for(C=0;C<f.length;C++)if((R=f[C]).uid===z&&R.type===O.type)continue e;O.dispose(),delete this.traces[z]}for(o=0;o<f.length;o++){var I=u[o],F=this.traces[(R=f[o]).uid];F?F.update(R,I):(F=R._module.plot(this,R,I),this.traces[R.uid]=F)}this.glplot.objects.sort(function(D,N){return D._trace.index-N._trace.index})},T.updateFx=function(f){S(f)||x(f)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===f?"move":"zoom"===f?"crosshair":null},T.emitPointAction=function(f,u){for(var C,h=f.trace.uid,o=f.pointIndex,R=0;R<this.fullData.length;R++)this.fullData[R].uid===h&&(C=this.fullData[R]);var z={x:f.traceCoord[0],y:f.traceCoord[1],curveNumber:C.index,pointNumber:o,data:C._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};m.appendArrayPointValue(z,C,o),this.graphDiv.emit(u,{points:[z]})},T.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var f=this.glplot,u=this.camera,h=u.mouseListener,o=1===this.lastButtonState&&0===h.buttons,C=this.fullLayout;this.lastButtonState=h.buttons,this.cameraChanged();var O,R=h.x*f.pixelRatio,z=this.canvas.height-f.pixelRatio*h.y;if(u.boxEnabled&&"zoom"===C.dragmode){this.selectBox.enabled=!0;for(var I=this.selectBox.selectBox=[Math.min(u.boxStart[0],u.boxEnd[0]),Math.min(u.boxStart[1],u.boxEnd[1]),Math.max(u.boxStart[0],u.boxEnd[0]),Math.max(u.boxStart[1],u.boxEnd[1])],F=0;F<2;F++)u.boxStart[F]===u.boxEnd[F]&&(I[F]=f.dataBox[F],I[F+2]=f.dataBox[F+2]);f.setDirty()}else if(!u.panning&&this.isMouseOver){this.selectBox.enabled=!1;var D=C._size,X=(O=f.pick(R/f.pixelRatio+D.l+this.xaxis.domain[0]*D.w,z/f.pixelRatio-(D.t+(1-this.yaxis.domain[1])*D.h)))&&O.object._trace.handlePick(O);if(X&&o&&this.emitPointAction(X,"plotly_click"),O&&"skip"!==O.object._trace.hoverinfo&&C.hovermode&&X&&(!this.lastPickResult||this.lastPickResult.traceUid!==X.trace.uid||this.lastPickResult.dataCoord[0]!==X.dataCoord[0]||this.lastPickResult.dataCoord[1]!==X.dataCoord[1])){var oe=X;this.lastPickResult={traceUid:X.trace?X.trace.uid:null,dataCoord:X.dataCoord.slice()},this.spikes.update({center:O.dataCoord}),oe.screenCoord=[((f.viewBox[2]-f.viewBox[0])*(O.dataCoord[0]-f.dataBox[0])/(f.dataBox[2]-f.dataBox[0])+f.viewBox[0])/f.pixelRatio,(this.canvas.height-(f.viewBox[3]-f.viewBox[1])*(O.dataCoord[1]-f.dataBox[1])/(f.dataBox[3]-f.dataBox[1])-f.viewBox[1])/f.pixelRatio],this.emitPointAction(X,"plotly_hover");var se=this.fullData[oe.trace.index]||{},ne=oe.pointIndex,W=m.castHoverinfo(se,C,ne);if(W&&"all"!==W){var G=W.split("+");-1===G.indexOf("x")&&(oe.traceCoord[0]=void 0),-1===G.indexOf("y")&&(oe.traceCoord[1]=void 0),-1===G.indexOf("z")&&(oe.traceCoord[2]=void 0),-1===G.indexOf("text")&&(oe.textLabel=void 0),-1===G.indexOf("name")&&(oe.name=void 0)}m.loneHover({x:oe.screenCoord[0],y:oe.screenCoord[1],xLabel:this.hoverFormatter("xaxis",oe.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",oe.traceCoord[1]),zLabel:oe.traceCoord[2],text:oe.textLabel,name:oe.name,color:m.castHoverOption(se,ne,"bgcolor")||oe.color,borderColor:m.castHoverOption(se,ne,"bordercolor"),fontFamily:m.castHoverOption(se,ne,"font.family"),fontSize:m.castHoverOption(se,ne,"font.size"),fontColor:m.castHoverOption(se,ne,"font.color"),nameLength:m.castHoverOption(se,ne,"namelength"),textAlign:m.castHoverOption(se,ne,"align")},{container:this.svgContainer,gd:this.graphDiv})}}O||this.unhover(),f.draw()}},T.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),m.loneUnhover(this.svgContainer))},T.hoverFormatter=function(f,u){if(void 0!==u){var h=this[f];return k.tickText(h,h.c2l(u),"hover").text}}},{"../../../stackgl_modules":1124,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib/show_no_webgl_msg":525,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/constants":561,"../cartesian/constraints":562,"./camera":594,"./convert":595,"webgl-context":331}],598:[function(v,ie,ae){"use strict";var _=v("../../plot_api/edit_types").overrideAll,k=v("../../components/fx/layout_attributes"),m=v("./scene"),E=v("../get_data").getSubplotData,e=v("../../lib"),c=v("../../constants/xmlns_namespaces"),d="gl3d",n="scene";ae.name=d,ae.attr=n,ae.idRoot=n,ae.idRegex=ae.attrRegex=e.counterRegex("scene"),ae.attributes=v("./layout/attributes"),ae.layoutAttributes=v("./layout/layout_attributes"),ae.baseLayoutAttrOverrides=_({hoverlabel:k.hoverlabel},"plot","nested"),ae.supplyLayoutDefaults=v("./layout/defaults"),ae.plot=function(i){for(var a=i._fullLayout,r=i._fullData,g=a._subplots[d],s=0;s<g.length;s++){var b=g[s],x=E(r,d,b),S=a[b],p=S.camera,w=S._scene;w||(w=new m({id:b,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio,camera:p},a),S._scene=w),w.viewInitial||(w.viewInitial={up:{x:p.up.x,y:p.up.y,z:p.up.z},eye:{x:p.eye.x,y:p.eye.y,z:p.eye.z},center:{x:p.center.x,y:p.center.y,z:p.center.z}}),w.plot(x,a,i.layout)}},ae.clean=function(t,i,a,r){for(var g=r._subplots[d]||[],s=0;s<g.length;s++){var b=g[s];!i[b]&&r[b]._scene&&(r[b]._scene.destroy(),r._infolayer&&r._infolayer.selectAll(".annotation-"+b).remove())}},ae.toSVG=function(t){for(var i=t._fullLayout,a=i._subplots[d],r=i._size,g=0;g<a.length;g++){var s=i[a[g]],b=s.domain,x=s._scene,S=x.toImage("png");i._glimages.append("svg:image").attr({xmlns:c.svg,"xlink:href":S,x:r.l+r.w*b.x[0],y:r.t+r.h*(1-b.y[1]),width:r.w*(b.x[1]-b.x[0]),height:r.h*(b.y[1]-b.y[0]),preserveAspectRatio:"none"}),x.destroy()}},ae.cleanId=function(i){if(i.match(/^scene[0-9]*$/)){var a=i.substr(5);return"1"===a&&(a=""),n+a}},ae.updateFx=function(t){for(var i=t._fullLayout,a=i._subplots[d],r=0;r<a.length;r++)i[a[r]]._scene.updateFx(i.dragmode,i.hovermode)}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../plot_api/edit_types":536,"../get_data":593,"./layout/attributes":599,"./layout/defaults":603,"./layout/layout_attributes":604,"./scene":608}],599:[function(v,ie,ae){"use strict";ie.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],600:[function(v,ie,ae){"use strict";var _=v("../../../components/color"),k=v("../../cartesian/layout_attributes"),m=v("../../../lib/extend").extendFlat,E=v("../../../plot_api/edit_types").overrideAll;ie.exports=E({visible:k.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:_.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:k.color,categoryorder:k.categoryorder,categoryarray:k.categoryarray,title:{text:k.title.text,font:k.title.font},type:m({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorange:k.autorange,rangemode:k.rangemode,range:m({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:k.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,mirror:k.mirror,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,showticklabels:k.showticklabels,tickfont:k.tickfont,tickangle:k.tickangle,tickprefix:k.tickprefix,showtickprefix:k.showtickprefix,ticksuffix:k.ticksuffix,showticksuffix:k.showticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickformat:k.tickformat,tickformatstops:k.tickformatstops,hoverformat:k.hoverformat,showline:k.showline,linecolor:k.linecolor,linewidth:k.linewidth,showgrid:k.showgrid,gridcolor:m({},k.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:k.gridwidth,zeroline:k.zeroline,zerolinecolor:k.zerolinecolor,zerolinewidth:k.zerolinewidth,_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":366,"../../../lib/extend":493,"../../../plot_api/edit_types":536,"../../cartesian/layout_attributes":569}],601:[function(v,ie,ae){"use strict";var _=v("tinycolor2").mix,k=v("../../../lib"),m=v("../../../plot_api/plot_template"),E=v("./axis_attributes"),e=v("../../cartesian/type_defaults"),c=v("../../cartesian/axis_defaults"),d=["xaxis","yaxis","zaxis"];ie.exports=function(i,a,r){var g,s;function b(p,w){return k.coerce(g,s,E,p,w)}for(var x=0;x<d.length;x++){var S=d[x];g=i[S]||{},(s=m.newContainer(a,S))._id=S[0]+r.scene,s._name=S,e(g,s,b,r),c(g,s,b,{font:r.font,letter:S[0],data:r.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:r.bgColor,calendar:r.calendar},r.fullLayout),b("gridcolor",_(s.color,r.bgColor,72.72727272727273).toRgbString()),b("title.text",S[0]),s.setScale=k.noop,b("showspikes")&&(b("spikesides"),b("spikethickness"),b("spikecolor",s.color)),b("showaxeslabels"),b("showbackground")&&b("backgroundcolor")}}},{"../../../lib":503,"../../../plot_api/plot_template":543,"../../cartesian/axis_defaults":556,"../../cartesian/type_defaults":582,"./axis_attributes":600,tinycolor2:312}],602:[function(v,ie,ae){"use strict";var _=v("../../../lib/str2rgbarray"),k=v("../../../lib"),m=["xaxis","yaxis","zaxis"];function E(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}E.prototype.merge=function(d,n){for(var t=this,i=0;i<3;++i){var a=n[m[i]];a.visible?(t.labels[i]=d._meta?k.templateString(a.title.text,d._meta):a.title.text,"font"in a.title&&(a.title.font.color&&(t.labelColor[i]=_(a.title.font.color)),a.title.font.family&&(t.labelFont[i]=a.title.font.family),a.title.font.size&&(t.labelSize[i]=a.title.font.size)),"showline"in a&&(t.lineEnable[i]=a.showline),"linecolor"in a&&(t.lineColor[i]=_(a.linecolor)),"linewidth"in a&&(t.lineWidth[i]=a.linewidth),"showgrid"in a&&(t.gridEnable[i]=a.showgrid),"gridcolor"in a&&(t.gridColor[i]=_(a.gridcolor)),"gridwidth"in a&&(t.gridWidth[i]=a.gridwidth),"log"===a.type?t.zeroEnable[i]=!1:"zeroline"in a&&(t.zeroEnable[i]=a.zeroline),"zerolinecolor"in a&&(t.zeroLineColor[i]=_(a.zerolinecolor)),"zerolinewidth"in a&&(t.zeroLineWidth[i]=a.zerolinewidth),t.lineTickEnable[i]=!(!("ticks"in a)||!a.ticks),"ticklen"in a&&(t.lineTickLength[i]=t._defaultLineTickLength[i]=a.ticklen),"tickcolor"in a&&(t.lineTickColor[i]=_(a.tickcolor)),"tickwidth"in a&&(t.lineTickWidth[i]=a.tickwidth),"tickangle"in a&&(t.tickAngle[i]="auto"===a.tickangle?-3600:Math.PI*-a.tickangle/180),"showticklabels"in a&&(t.tickEnable[i]=a.showticklabels),"tickfont"in a&&(a.tickfont.color&&(t.tickColor[i]=_(a.tickfont.color)),a.tickfont.family&&(t.tickFont[i]=a.tickfont.family),a.tickfont.size&&(t.tickSize[i]=a.tickfont.size)),"mirror"in a?-1!==["ticks","all","allticks"].indexOf(a.mirror)?(t.lineTickMirror[i]=!0,t.lineMirror[i]=!0):!0===a.mirror?(t.lineTickMirror[i]=!1,t.lineMirror[i]=!0):(t.lineTickMirror[i]=!1,t.lineMirror[i]=!1):t.lineMirror[i]=!1,"showbackground"in a&&!1!==a.showbackground?(t.backgroundEnable[i]=!0,t.backgroundColor[i]=_(a.backgroundcolor)):t.backgroundEnable[i]=!1):(t.tickEnable[i]=!1,t.labelEnable[i]=!1,t.lineEnable[i]=!1,t.lineTickEnable[i]=!1,t.gridEnable[i]=!1,t.zeroEnable[i]=!1,t.backgroundEnable[i]=!1)}},ie.exports=function c(d,n){var t=new E;return t.merge(d,n),t}},{"../../../lib":503,"../../../lib/str2rgbarray":528}],603:[function(v,ie,ae){"use strict";var _=v("../../../lib"),k=v("../../../components/color"),m=v("../../../registry"),E=v("../../subplot_defaults"),e=v("./axis_defaults"),c=v("./layout_attributes"),d=v("../../get_data").getSubplotData,n="gl3d";function t(i,a,r,g){for(var s=r("bgcolor"),b=k.combine(s,g.paper_bgcolor),x=["up","center","eye"],S=0;S<x.length;S++)r("camera."+x[S]+".x"),r("camera."+x[S]+".y"),r("camera."+x[S]+".z");r("camera.projection.type");var p=!!r("aspectratio.x")&&!!r("aspectratio.y")&&!!r("aspectratio.z"),l=r("aspectmode",p?"manual":"auto");p||(i.aspectratio=a.aspectratio={x:1,y:1,z:1},"manual"===l&&(a.aspectmode="auto"),i.aspectmode=a.aspectmode);var y=d(g.fullData,n,g.id);e(i,a,{font:g.font,scene:g.id,data:y,bgColor:b,calendar:g.calendar,autotypenumbersDflt:g.autotypenumbersDflt,fullLayout:g.fullLayout}),m.getComponentMethod("annotations3d","handleDefaults")(i,a,g);var A=g.getDfltFromLayout("dragmode");if(!1!==A&&!A)if(A="orbit",i.camera&&i.camera.up){var T=i.camera.up.x,M=i.camera.up.y,f=i.camera.up.z;0!==f&&(!T||!M||!f||f/Math.sqrt(T*T+M*M+f*f)>.999)&&(A="turntable")}else A="turntable";r("dragmode",A),r("hovermode",g.getDfltFromLayout("hovermode"))}ie.exports=function(a,r,g){var s=r._basePlotModules.length>1;E(a,r,g,{type:n,attributes:c,handleDefaults:t,fullLayout:r,font:r.font,fullData:g,getDfltFromLayout:function b(x){if(!s&&_.validate(a[x],c[x]))return a[x]},autotypenumbersDflt:r.autotypenumbers,paper_bgcolor:r.paper_bgcolor,calendar:r.calendar})}},{"../../../components/color":366,"../../../lib":503,"../../../registry":638,"../../get_data":593,"../../subplot_defaults":632,"./axis_defaults":601,"./layout_attributes":604}],604:[function(v,ie,ae){"use strict";var _=v("./axis_attributes"),k=v("../../domain").attributes,m=v("../../../lib/extend").extendFlat,E=v("../../../lib").counterRegex;function e(c,d,n){return{x:{valType:"number",dflt:c,editType:"camera"},y:{valType:"number",dflt:d,editType:"camera"},z:{valType:"number",dflt:n,editType:"camera"},editType:"camera"}}ie.exports={_arrayAttrRegexps:[E("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:m(e(0,0,1),{}),center:m(e(0,0,0),{}),eye:m(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:k({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:_,yaxis:_,zaxis:_,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":503,"../../../lib/extend":493,"../../domain":584,"./axis_attributes":600}],605:[function(v,ie,ae){"use strict";var _=v("../../../lib/str2rgbarray"),k=["xaxis","yaxis","zaxis"];function m(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}m.prototype.merge=function(c){for(var d=0;d<3;++d){var n=c[k[d]];n.visible?(this.enabled[d]=n.showspikes,this.colors[d]=_(n.spikecolor),this.drawSides[d]=n.spikesides,this.lineWidth[d]=n.spikethickness):(this.enabled[d]=!1,this.drawSides[d]=!1)}},ie.exports=function e(c){var d=new m;return d.merge(c),d}},{"../../../lib/str2rgbarray":528}],606:[function(v,ie,ae){"use strict";ie.exports=function c(d){for(var n=d.axesOptions,t=d.glplot.axesPixels,i=d.fullSceneLayout,a=[[],[],[]],r=0;r<3;++r){var g=i[m[r]];if(g._length=(t[r].hi-t[r].lo)*t[r].pixelsPerDataUnit/d.dataScale[r],Math.abs(g._length)===1/0||isNaN(g._length))a[r]=[];else{g._input_range=g.range.slice(),g.range[0]=t[r].lo/d.dataScale[r],g.range[1]=t[r].hi/d.dataScale[r],g._m=1/(d.dataScale[r]*t[r].pixelsPerDataUnit),g.range[0]===g.range[1]&&(g.range[0]-=1,g.range[1]+=1);var s=g.tickmode;if("auto"===g.tickmode){g.tickmode="linear";var b=g.nticks||k.constrain(g._length/40,4,9);_.autoTicks(g,Math.abs(g.range[1]-g.range[0])/b)}for(var x=_.calcTicks(g,{msUTC:!0}),S=0;S<x.length;++S)x[S].x=x[S].x*d.dataScale[r],"date"===g.type&&(x[S].text=x[S].text.replace(/\<br\>/g," "));a[r]=x,g.tickmode=s}}for(n.ticks=a,r=0;r<3;++r)for(E[r]=.5*(d.glplot.bounds[0][r]+d.glplot.bounds[1][r]),S=0;S<2;++S)n.bounds[S][r]=d.glplot.bounds[S][r];d.contourLevels=function e(d){for(var n=new Array(3),t=0;t<3;++t){for(var i=d[t],a=new Array(i.length),r=0;r<i.length;++r)a[r]=i[r].x;n[t]=a}return n}(a)};var _=v("../../cartesian/axes"),k=v("../../../lib"),m=["xaxis","yaxis","zaxis"],E=[0,0,0]},{"../../../lib":503,"../../cartesian/axes":554}],607:[function(v,ie,ae){"use strict";function _(m,E){var c,d,e=[0,0,0,0];for(c=0;c<4;++c)for(d=0;d<4;++d)e[d]+=m[4*c+d]*E[c];return e}ie.exports=function k(m,E){return _(m.projection,_(m.view,_(m.model,[E[0],E[1],E[2],1])))}},{}],608:[function(v,ie,ae){"use strict";var S,p,_=v("../../../stackgl_modules").gl_plot3d,k=_.createCamera,m=_.createScene,E=v("webgl-context"),e=v("has-passive-events"),c=v("../../registry"),d=v("../../lib"),n=d.preserveDrawingBuffer(),t=v("../../plots/cartesian/axes"),i=v("../../components/fx"),a=v("../../lib/str2rgbarray"),r=v("../../lib/show_no_webgl_msg"),g=v("./project"),s=v("./layout/convert"),b=v("./layout/spikes"),x=v("./layout/tick_marks");function w(C,R){var z=document.createElement("div"),O=C.container;this.graphDiv=C.graphDiv;var I=document.createElementNS("http://www.w3.org/2000/svg","svg");I.style.position="absolute",I.style.top=I.style.left="0px",I.style.width=I.style.height="100%",I.style["z-index"]=20,I.style["pointer-events"]="none",z.appendChild(I),this.svgContainer=I,z.id=C.id,z.style.position="absolute",z.style.top=z.style.left="0px",z.style.width=z.style.height="100%",O.appendChild(z),this.fullLayout=R,this.id=C.id||"scene",this.fullSceneLayout=R[this.id],this.plotArgs=[[],{},{}],this.axesOptions=s(R,R[this.id]),this.spikeOptions=b(R[this.id]),this.container=z,this.staticMode=!!C.staticPlot,this.pixelRatio=this.pixelRatio||C.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=c.getComponentMethod("annotations3d","convert"),this.drawAnnotations=c.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var l=w.prototype;l.prepareOptions=function(){var C=this,R={canvas:C.canvas,gl:C.gl,glOptions:{preserveDrawingBuffer:n,premultipliedAlpha:!0,antialias:!0},container:C.container,axes:C.axesOptions,spikes:C.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:C.camera,pixelRatio:C.pixelRatio};if(C.staticMode){if(!(p||(S=document.createElement("canvas"),p=E({canvas:S,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");R.gl=p,R.canvas=S}return R};var y=!0;l.tryCreatePlot=function(){var C=this,R=C.prepareOptions(),z=!0;try{C.glplot=m(R)}catch(O){if(C.staticMode||!y||n)z=!1;else{d.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{n=R.glOptions.preserveDrawingBuffer=!0,C.glplot=m(R)}catch(I){n=R.glOptions.preserveDrawingBuffer=!1,z=!1}}}return y=!1,z},l.initializeGLCamera=function(){var C=this,R=C.fullSceneLayout.camera;C.camera=k(C.container,{center:[R.center.x,R.center.y,R.center.z],eye:[R.eye.x,R.eye.y,R.eye.z],up:[R.up.x,R.up.y,R.up.z],_ortho:"orthographic"===R.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})},l.initializeGLPlot=function(){var C=this;if(C.initializeGLCamera(),!C.tryCreatePlot())return r(C);C.traces={},C.make4thDimension();var z=C.graphDiv,O=z.layout,I=function(){var D={};return C.isCameraChanged(O)&&(D[C.id+".camera"]=C.getCamera()),C.isAspectChanged(O)&&(D[C.id+".aspectratio"]=C.glplot.getAspectratio(),"manual"!==O[C.id].aspectmode&&(C.fullSceneLayout.aspectmode=O[C.id].aspectmode=D[C.id+".aspectmode"]="manual")),D},F=function(D){if(!1!==D.fullSceneLayout.dragmode){var N=I();D.saveLayout(O),D.graphDiv.emit("plotly_relayout",N)}};return C.glplot.canvas&&(C.glplot.canvas.addEventListener("mouseup",function(){F(C)}),C.glplot.canvas.addEventListener("wheel",function(D){if(z._context._scrollZoom.gl3d){if(C.camera._ortho){var N=D.deltaX>D.deltaY?1.1:.9090909090909091,U=C.glplot.getAspectratio();C.glplot.setAspectratio({x:N*U.x,y:N*U.y,z:N*U.z})}F(C)}},!!e&&{passive:!1}),C.glplot.canvas.addEventListener("mousemove",function(){if(!1!==C.fullSceneLayout.dragmode&&0!==C.camera.mouseListener.buttons){var D=I();C.graphDiv.emit("plotly_relayouting",D)}}),C.staticMode||C.glplot.canvas.addEventListener("webglcontextlost",function(D){z&&z.emit&&z.emit("plotly_webglcontextlost",{event:D,layer:C.id})},!1)),C.glplot.oncontextloss=function(){C.recoverContext()},C.glplot.onrender=function(){C.render()},!0},l.render=function(){var z,C=this,R=C.graphDiv,O=C.svgContainer,I=C.container.getBoundingClientRect();R._fullLayout._calcInverseTransform(R);var N=I.width*R._fullLayout._invScaleX,U=I.height*R._fullLayout._invScaleY;O.setAttributeNS(null,"viewBox","0 0 "+N+" "+U),O.setAttributeNS(null,"width",N),O.setAttributeNS(null,"height",U),x(C),C.glplot.axes.update(C.axesOptions);for(var X=Object.keys(C.traces),oe=null,se=C.glplot.selection,ne=0;ne<X.length;++ne)"skip"!==(z=C.traces[X[ne]]).data.hoverinfo&&z.handlePick(se)&&(oe=z),z.setContourLevels&&z.setContourLevels();function W(ge,pe,xe){var ke=C.fullSceneLayout[ge+"axis"];return"log"!==ke.type&&(pe=ke.d2l(pe)),t.hoverLabelText(ke,pe,xe)}if(null!==oe){var G=g(C.glplot.cameraParams,se.dataCoordinate),$=R._fullData[(z=oe.data).index],V=se.index,H={xLabel:W("x",se.traceCoordinate[0],z.xhoverformat),yLabel:W("y",se.traceCoordinate[1],z.yhoverformat),zLabel:W("z",se.traceCoordinate[2],z.zhoverformat)},q=i.castHoverinfo($,C.fullLayout,V),K=(q||"").split("+"),Y=q&&"all"===q;!$.hovertemplate&&!Y&&(-1===K.indexOf("x")&&(H.xLabel=void 0),-1===K.indexOf("y")&&(H.yLabel=void 0),-1===K.indexOf("z")&&(H.zLabel=void 0),-1===K.indexOf("text")&&(se.textLabel=void 0),-1===K.indexOf("name")&&(oe.name=void 0));var te,J=[];"cone"===z.type||"streamtube"===z.type?(H.uLabel=W("x",se.traceCoordinate[3],z.uhoverformat),(Y||-1!==K.indexOf("u"))&&J.push("u: "+H.uLabel),H.vLabel=W("y",se.traceCoordinate[4],z.vhoverformat),(Y||-1!==K.indexOf("v"))&&J.push("v: "+H.vLabel),H.wLabel=W("z",se.traceCoordinate[5],z.whoverformat),(Y||-1!==K.indexOf("w"))&&J.push("w: "+H.wLabel),H.normLabel=se.traceCoordinate[6].toPrecision(3),(Y||-1!==K.indexOf("norm"))&&J.push("norm: "+H.normLabel),"streamtube"===z.type&&(H.divergenceLabel=se.traceCoordinate[7].toPrecision(3),(Y||-1!==K.indexOf("divergence"))&&J.push("divergence: "+H.divergenceLabel)),se.textLabel&&J.push(se.textLabel),te=J.join("<br>")):"isosurface"===z.type||"volume"===z.type?(H.valueLabel=t.hoverLabelText(C._mockAxis,C._mockAxis.d2l(se.traceCoordinate[3]),z.valuehoverformat),J.push("value: "+H.valueLabel),se.textLabel&&J.push(se.textLabel),te=J.join("<br>")):te=se.textLabel;var j={x:se.traceCoordinate[0],y:se.traceCoordinate[1],z:se.traceCoordinate[2],data:$._input,fullData:$,curveNumber:$.index,pointNumber:V};i.appendArrayPointValue(j,$,V),z._module.eventData&&(j=$._module.eventData(j,se,$,{},V));var re={points:[j]};if(C.fullSceneLayout.hovermode){var le=[];i.loneHover({trace:$,x:(.5+.5*G[0]/G[3])*N,y:(.5-.5*G[1]/G[3])*U,xLabel:H.xLabel,yLabel:H.yLabel,zLabel:H.zLabel,text:te,name:oe.name,color:i.castHoverOption($,V,"bgcolor")||oe.color,borderColor:i.castHoverOption($,V,"bordercolor"),fontFamily:i.castHoverOption($,V,"font.family"),fontSize:i.castHoverOption($,V,"font.size"),fontColor:i.castHoverOption($,V,"font.color"),nameLength:i.castHoverOption($,V,"namelength"),textAlign:i.castHoverOption($,V,"align"),hovertemplate:d.castOption($,V,"hovertemplate"),hovertemplateLabels:d.extendFlat({},j,H),eventData:[j]},{container:O,gd:R,inOut_bbox:le}),j.bbox=le[0]}R.emit(se.buttons&&se.distance<5?"plotly_click":"plotly_hover",re),this.oldEventData=re}else i.loneUnhover(O),this.oldEventData&&R.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;C.drawAnnotations(C)},l.recoverContext=function(){var C=this;C.glplot.dispose();var R=function(){C.glplot.gl.isContextLost()?requestAnimationFrame(R):C.initializeGLPlot()?C.plot.apply(C,C.plotArgs):d.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(R)};var A=["xaxis","yaxis","zaxis"];function T(C,R,z){for(var O=C.fullSceneLayout,I=0;I<3;I++){var F=A[I],D=F.charAt(0),N=O[F],U=R[D],X=R[D+"calendar"],oe=R["_"+D+"length"];if(d.isArrayOrTypedArray(U))for(var se,ne=0;ne<(oe||U.length);ne++)if(d.isArrayOrTypedArray(U[ne]))for(var W=0;W<U[ne].length;++W)se=N.d2l(U[ne][W],0,X),!isNaN(se)&&isFinite(se)&&(z[0][I]=Math.min(z[0][I],se),z[1][I]=Math.max(z[1][I],se));else se=N.d2l(U[ne],0,X),!isNaN(se)&&isFinite(se)&&(z[0][I]=Math.min(z[0][I],se),z[1][I]=Math.max(z[1][I],se));else z[0][I]=Math.min(z[0][I],0),z[1][I]=Math.max(z[1][I],oe-1)}}l.plot=function(C,R,z){var O=this;if(O.plotArgs=[C,R,z],!O.glplot.contextLost){var I,F,D,N,U,X,oe=R[O.id],se=z[O.id];O.fullLayout=R,O.fullSceneLayout=oe,O.axesOptions.merge(R,oe),O.spikeOptions.merge(oe),O.setViewport(oe),O.updateFx(oe.dragmode,oe.hovermode),O.camera.enableWheel=O.graphDiv._context._scrollZoom.gl3d,O.glplot.setClearColor(a(oe.bgcolor)),O.setConvert(U),C?Array.isArray(C)||(C=[C]):C=[];var ne=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(D=0;D<C.length;++D)!0===(I=C[D]).visible&&0!==I._length&&T(this,I,ne);!function M(C,R){for(var z=C.fullSceneLayout,O=z.annotations||[],I=0;I<3;I++)for(var F=A[I],D=F.charAt(0),N=z[F],U=0;U<O.length;U++){var X=O[U];if(X.visible){var oe=N.r2l(X[D]);!isNaN(oe)&&isFinite(oe)&&(R[0][I]=Math.min(R[0][I],oe),R[1][I]=Math.max(R[1][I],oe))}}}(this,ne);var W=[1,1,1];for(N=0;N<3;++N)W[N]=ne[1][N]===ne[0][N]?1:1/(ne[1][N]-ne[0][N]);for(O.dataScale=W,O.convertAnnotations(this),D=0;D<C.length;++D)!0===(I=C[D]).visible&&0!==I._length&&((F=O.traces[I.uid])?F.data.type===I.type?F.update(I):(F.dispose(),F=I._module.plot(this,I),O.traces[I.uid]=F):(F=I._module.plot(this,I),O.traces[I.uid]=F),F.name=I.name);var G=Object.keys(O.traces);e:for(D=0;D<G.length;++D){for(N=0;N<C.length;++N)if(C[N].uid===G[D]&&!0===C[N].visible&&0!==C[N]._length)continue e;(F=O.traces[G[D]]).dispose(),delete O.traces[G[D]]}O.glplot.objects.sort(function(Fe,Ke){return Fe._trace.data.index-Ke._trace.data.index});var $=[[0,0,0],[0,0,0]],V=[],H={};for(D=0;D<3;++D){if((X=(U=oe[A[D]]).type)in H?(H[X].acc*=W[D],H[X].count+=1):H[X]={acc:W[D],count:1},U.autorange){$[0][D]=1/0,$[1][D]=-1/0;var q=O.glplot.objects,K=O.fullSceneLayout.annotations||[],Y=U._name.charAt(0);for(N=0;N<q.length;N++){var te=q[N],J=te.bounds,j=te._trace.data._pad||0;$[0][D]="ErrorBars"===te.constructor.name&&U._lowerLogErrorBound?Math.min($[0][D],U._lowerLogErrorBound):Math.min($[0][D],J[0][D]/W[D]-j),$[1][D]=Math.max($[1][D],J[1][D]/W[D]+j)}for(N=0;N<K.length;N++){var re=K[N];if(re.visible){var le=U.r2l(re[Y]);$[0][D]=Math.min($[0][D],le),$[1][D]=Math.max($[1][D],le)}}if("rangemode"in U&&"tozero"===U.rangemode&&($[0][D]=Math.min($[0][D],0),$[1][D]=Math.max($[1][D],0)),$[0][D]>$[1][D])$[0][D]=-1,$[1][D]=1;else{var ge=$[1][D]-$[0][D];$[0][D]-=ge/32,$[1][D]+=ge/32}if("reversed"===U.autorange){var pe=$[0][D];$[0][D]=$[1][D],$[1][D]=pe}}else{var xe=U.range;$[0][D]=U.r2l(xe[0]),$[1][D]=U.r2l(xe[1])}$[0][D]===$[1][D]&&($[0][D]-=1,$[1][D]+=1),V[D]=$[1][D]-$[0][D],O.glplot.setBounds(D,{min:$[0][D]*W[D],max:$[1][D]*W[D]})}var ke,we=oe.aspectmode;if("cube"===we)ke=[1,1,1];else if("manual"===we){var de=oe.aspectratio;ke=[de.x,de.y,de.z]}else{if("auto"!==we&&"data"!==we)throw new Error("scene.js aspectRatio was not one of the enumerated types");var be=[1,1,1];for(D=0;D<3;++D){var Le=H[X=(U=oe[A[D]]).type];be[D]=Math.pow(Le.acc,1/Le.count)/W[D]}ke="data"===we||Math.max.apply(null,be)/Math.min.apply(null,be)<=4?be:[1,1,1]}oe.aspectratio.x=se.aspectratio.x=ke[0],oe.aspectratio.y=se.aspectratio.y=ke[1],oe.aspectratio.z=se.aspectratio.z=ke[2],O.glplot.setAspectratio(oe.aspectratio),O.viewInitial.aspectratio||(O.viewInitial.aspectratio={x:oe.aspectratio.x,y:oe.aspectratio.y,z:oe.aspectratio.z}),O.viewInitial.aspectmode||(O.viewInitial.aspectmode=oe.aspectmode);var De=oe.domain||null,ye=R._size||null;if(De&&ye){var Ce=O.container.style;Ce.position="absolute",Ce.left=ye.l+De.x[0]*ye.w+"px",Ce.top=ye.t+(1-De.y[1])*ye.h+"px",Ce.width=ye.w*(De.x[1]-De.x[0])+"px",Ce.height=ye.h*(De.y[1]-De.y[0])+"px"}O.glplot.redraw()}},l.destroy=function(){var C=this;!C.glplot||(C.camera.mouseListener.enabled=!1,C.container.removeEventListener("wheel",C.camera.wheelListener),C.camera=null,C.glplot.dispose(),C.container.parentNode.removeChild(C.container),C.glplot=null)},l.getCamera=function(){var C=this;return C.camera.view.recalcMatrix(C.camera.view.lastT()),function u(C){return{up:{x:C.up[0],y:C.up[1],z:C.up[2]},center:{x:C.center[0],y:C.center[1],z:C.center[2]},eye:{x:C.eye[0],y:C.eye[1],z:C.eye[2]},projection:{type:!0===C._ortho?"orthographic":"perspective"}}}(C.camera)},l.setViewport=function(C){var R=this,z=C.camera;R.camera.lookAt.apply(this,function f(C){return[[C.eye.x,C.eye.y,C.eye.z],[C.center.x,C.center.y,C.center.z],[C.up.x,C.up.y,C.up.z]]}(z)),R.glplot.setAspectratio(C.aspectratio),"orthographic"===z.projection.type!==R.camera._ortho&&(R.glplot.redraw(),R.glplot.clearRGBA(),R.glplot.dispose(),R.initializeGLPlot())},l.isCameraChanged=function(C){var z=this.getCamera(),I=d.nestedProperty(C,this.id+".camera").get();var X,oe,se,ne,W,G,D=!1;if(void 0===I)D=!0;else{for(var N=0;N<3;N++)for(var U=0;U<3;U++)if(X=z,ne=U,W=void 0,G=void 0,G=["x","y","z"],!(oe=I)[(W=["up","center","eye"])[se=N]]||X[W[se]][G[ne]]!==oe[W[se]][G[ne]]){D=!0;break}(!I.projection||z.projection&&z.projection.type!==I.projection.type)&&(D=!0)}return D},l.isAspectChanged=function(C){var z=this.glplot.getAspectratio(),I=d.nestedProperty(C,this.id+".aspectratio").get();return void 0===I||I.x!==z.x||I.y!==z.y||I.z!==z.z},l.saveLayout=function(C){var O,I,F,D,N,U,R=this,z=R.fullLayout,X=R.isCameraChanged(C),oe=R.isAspectChanged(C),se=X||oe;if(se){var ne={};X&&(O=R.getCamera(),F=(I=d.nestedProperty(C,R.id+".camera")).get(),ne[R.id+".camera"]=F),oe&&(D=R.glplot.getAspectratio(),U=(N=d.nestedProperty(C,R.id+".aspectratio")).get(),ne[R.id+".aspectratio"]=U),c.call("_storeDirectGUIEdit",C,z._preGUI,ne),X&&(I.set(O),d.nestedProperty(z,R.id+".camera").set(O)),oe&&(N.set(D),d.nestedProperty(z,R.id+".aspectratio").set(D),R.glplot.redraw())}return se},l.updateFx=function(C,R){var z=this,O=z.camera;if(O)if("orbit"===C)O.mode="orbit",O.keyBindingMode="rotate";else if("turntable"===C){O.up=[0,0,1],O.mode="turntable",O.keyBindingMode="rotate";var I=z.graphDiv,F=I._fullLayout,D=z.fullSceneLayout.camera,N=D.up.x,U=D.up.y,X=D.up.z;if(X/Math.sqrt(N*N+U*U+X*X)<.999){var oe=z.id+".camera.up",se={x:0,y:0,z:1},ne={};ne[oe]=se;var W=I.layout;c.call("_storeDirectGUIEdit",W,F._preGUI,ne),D.up=se,d.nestedProperty(W,oe).set(se)}}else O.keyBindingMode=C;z.fullSceneLayout.hovermode=R},l.toImage=function(C){var R=this;C||(C="png"),R.staticMode&&R.container.appendChild(S),R.glplot.redraw();var z=R.glplot.gl,O=z.drawingBufferWidth,I=z.drawingBufferHeight;z.bindFramebuffer(z.FRAMEBUFFER,null);var F=new Uint8Array(O*I*4);z.readPixels(0,0,O,I,z.RGBA,z.UNSIGNED_BYTE,F),function h(C,R,z){for(var O=0,I=z-1;O<I;++O,--I)for(var F=0;F<R;++F)for(var D=0;D<4;++D){var N=4*(R*O+F)+D,U=4*(R*I+F)+D,X=C[N];C[N]=C[U],C[U]=X}}(F,O,I),function o(C,R,z){for(var O=0;O<z;++O)for(var I=0;I<R;++I){var F=4*(R*O+I),D=C[F+3];if(D>0)for(var N=255/D,U=0;U<3;++U)C[F+U]=Math.min(N*C[F+U],255)}}(F,O,I);var D=document.createElement("canvas");D.width=O,D.height=I;var X,N=D.getContext("2d",{willReadFrequently:!0}),U=N.createImageData(O,I);switch(U.data.set(F),N.putImageData(U,0,0),C){case"jpeg":X=D.toDataURL("image/jpeg");break;case"webp":X=D.toDataURL("image/webp");break;default:X=D.toDataURL("image/png")}return R.staticMode&&R.container.removeChild(S),X},l.setConvert=function(){for(var R=0;R<3;R++){var z=this.fullSceneLayout[A[R]];t.setConvert(z,this.fullLayout),z.setScale=d.noop}},l.make4thDimension=function(){var C=this,z=C.graphDiv._fullLayout;C._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},t.setConvert(C._mockAxis,z)},ie.exports=w},{"../../../stackgl_modules":1124,"../../components/fx":406,"../../lib":503,"../../lib/show_no_webgl_msg":525,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../../registry":638,"./layout/convert":602,"./layout/spikes":605,"./layout/tick_marks":606,"./project":607,"has-passive-events":229,"webgl-context":331}],609:[function(v,ie,ae){"use strict";ie.exports=function(k,m,E,e){e=e||k.length;for(var c=new Array(e),d=0;d<e;d++)c[d]=[k[d],m[d],E[d]];return c}},{}],610:[function(v,ie,ae){"use strict";var _=v("./font_attributes"),k=v("./animation_attributes"),m=v("../components/color/attributes"),E=v("../components/shapes/draw_newshape/attributes"),e=v("./pad_attributes"),c=v("../lib/extend").extendFlat,d=_({editType:"calc"});d.family.dflt='"Open Sans", verdana, arial, sans-serif',d.size.dflt=12,d.color.dflt=m.defaultLine,ie.exports={font:d,title:{text:{valType:"string",editType:"layoutstyle"},font:_({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:c(e({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:m.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:m.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:m.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:E.newshape,activeshape:E.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:c({},k.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:_({editType:"layoutstyle"})}}},{"../components/color/attributes":365,"../components/shapes/draw_newshape/attributes":451,"../lib/extend":493,"./animation_attributes":548,"./font_attributes":585,"./pad_attributes":618}],611:[function(v,ie,ae){"use strict";var _=v("../../lib/sort_object_keys"),k="1.10.1",m='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',E=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',m].join(" "),e=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),d={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:m,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:E,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:E,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:e,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:e,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},n=_(d);ie.exports={requiredVersion:k,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:d,styleValuesNonMapbox:n,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+k+"."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",n.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},{"../../lib/sort_object_keys":526}],612:[function(v,ie,ae){"use strict";var _=v("../../lib");ie.exports=function(m,E){var e=m.split(" "),c=e[0],d=e[1],n=_.isArrayOrTypedArray(E)?_.mean(E):E,t=.5+n/100,i=1.5+n/100,a=["",""],r=[0,0];switch(c){case"top":a[0]="top",r[1]=-i;break;case"bottom":a[0]="bottom",r[1]=i}switch(d){case"left":a[1]="right",r[0]=-t;break;case"right":a[1]="left",r[0]=t}return{anchor:a[0]&&a[1]?a.join("-"):a[0]?a[0]:a[1]?a[1]:"center",offset:r}}},{"../../lib":503}],613:[function(v,ie,ae){"use strict";var _=v("mapbox-gl/dist/mapbox-gl-unminified"),k=v("../../lib"),m=k.strTranslate,E=k.strScale,e=v("../../plots/get_data").getSubplotCalcData,c=v("../../constants/xmlns_namespaces"),d=v("@plotly/d3"),n=v("../../components/drawing"),t=v("../../lib/svg_text_utils"),i=v("./mapbox"),a="mapbox",r=ae.constants=v("./constants");function s(b){return"string"==typeof b&&(-1!==r.styleValuesMapbox.indexOf(b)||0===b.indexOf("mapbox://"))}ae.name=a,ae.attr="subplot",ae.idRoot=a,ae.idRegex=ae.attrRegex=k.counterRegex(a),ae.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},ae.layoutAttributes=v("./layout_attributes"),ae.supplyLayoutDefaults=v("./layout_defaults"),ae.plot=function(x){var S=x._fullLayout,p=x.calcdata,w=S._subplots[a];if(_.version!==r.requiredVersion)throw new Error(r.wrongVersionErrorMsg);var l=function g(b,x){var S=b._fullLayout;if(""===b._context.mapboxAccessToken)return"";for(var w=[],l=[],y=!1,A=!1,T=0;T<x.length;T++){var M=S[x[T]],f=M.accesstoken;s(M.style)&&(f?k.pushUnique(w,f):(s(M._input.style)&&(k.error("Uses Mapbox map style, but did not set an access token."),y=!0),A=!0)),f&&k.pushUnique(l,f)}if(A){var u=y?r.noAccessTokenErrorMsg:r.missingStyleErrorMsg;throw k.error(u),new Error(u)}return w.length?(w.length>1&&k.warn(r.multipleTokensErrorMsg),w[0]):(l.length&&k.log(["Listed mapbox access token(s)",l.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(x,w);_.accessToken=l;for(var y=0;y<w.length;y++){var A=w[y],T=e(p,a,A),M=S[A],f=M._subplot;f||(f=new i(x,A),S[A]._subplot=f),f.viewInitial||(f.viewInitial={center:k.extendFlat({},M.center),zoom:M.zoom,bearing:M.bearing,pitch:M.pitch}),f.plot(T,S,x._promises)}},ae.clean=function(b,x,S,p){for(var w=p._subplots[a]||[],l=0;l<w.length;l++){var y=w[l];!x[y]&&p[y]._subplot&&p[y]._subplot.destroy()}},ae.toSVG=function(b){for(var x=b._fullLayout,S=x._subplots[a],p=x._size,w=0;w<S.length;w++){var l=x[S[w]],y=l.domain,T=l._subplot.toImage("png");x._glimages.append("svg:image").attr({xmlns:c.svg,"xlink:href":T,x:p.l+p.w*y.x[0],y:p.t+p.h*(1-y.y[1]),width:p.w*(y.x[1]-y.x[0]),height:p.h*(y.y[1]-y.y[0]),preserveAspectRatio:"none"});var f=d.select(l._subplot.div);if(null!==f.select(".mapboxgl-ctrl-logo").node().offsetParent){var h=x._glimages.append("g");h.attr("transform",m(p.l+p.w*y.x[0]+10,p.t+p.h*(1-y.y[0])-31)),h.append("path").attr("d",r.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),h.append("path").attr("d",r.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),h.append("path").attr("d",r.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),h.append("polygon").attr("points",r.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var o=f.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),C=x._glimages.append("g"),R=C.append("text");R.text(o).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":o});var z=n.bBox(R.node()),O=p.w*(y.x[1]-y.x[0]);if(z.width>O/2){var I=o.split("|").join("<br>");R.text(I).attr("data-unformatted",I).call(t.convertToTspans,b),z=n.bBox(R.node())}R.attr("transform",m(-3,8-z.height)),C.insert("rect",".static-attribution").attr({x:-z.width-6,y:-z.height-3,width:z.width+6,height:z.height+3,fill:"rgba(255, 255, 255, 0.75)"});var F=1;z.width+6>O&&(F=O/(z.width+6));var D=[p.l+p.w*y.x[1],p.t+p.h*(1-y.y[0])];C.attr("transform",m(D[0],D[1])+E(F))}},ae.updateFx=function(b){for(var x=b._fullLayout,S=x._subplots[a],p=0;p<S.length;p++)x[S[p]]._subplot.updateFx(x)}},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/get_data":593,"./constants":611,"./layout_attributes":615,"./layout_defaults":616,"./mapbox":617,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],614:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../lib/svg_text_utils").sanitizeHTML,m=v("./convert_text_opts"),E=v("./constants");function e(i,a){this.subplot=i,this.uid=i.uid+"-"+a,this.index=a,this.idSource="source-"+this.uid,this.idLayer=E.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var c=e.prototype;function d(i){if(!i.visible)return!1;var a=i.source;if(Array.isArray(a)&&a.length>0){for(var r=0;r<a.length;r++)if("string"!=typeof a[r]||0===a[r].length)return!1;return!0}return _.isPlainObject(a)||"string"==typeof a&&a.length>0}function n(i){var a={},r={};switch(i.type){case"circle":_.extendFlat(r,{"circle-radius":i.circle.radius,"circle-color":i.color,"circle-opacity":i.opacity});break;case"line":_.extendFlat(r,{"line-width":i.line.width,"line-color":i.color,"line-opacity":i.opacity,"line-dasharray":i.line.dash});break;case"fill":_.extendFlat(r,{"fill-color":i.color,"fill-outline-color":i.fill.outlinecolor,"fill-opacity":i.opacity});break;case"symbol":var g=i.symbol,s=m(g.textposition,g.iconsize);_.extendFlat(a,{"icon-image":g.icon+"-15","icon-size":g.iconsize/10,"text-field":g.text,"text-size":g.textfont.size,"text-anchor":s.anchor,"text-offset":s.offset,"symbol-placement":g.placement}),_.extendFlat(r,{"icon-color":i.color,"text-color":g.textfont.color,"text-opacity":i.opacity});break;case"raster":_.extendFlat(r,{"raster-fade-duration":0,"raster-opacity":i.opacity})}return{layout:a,paint:r}}c.update=function(a){this.visible?this.needsNewImage(a)?this.updateImage(a):this.needsNewSource(a)?(this.removeLayer(),this.updateSource(a),this.updateLayer(a)):this.needsNewLayer(a)?this.updateLayer(a):this.updateStyle(a):(this.updateSource(a),this.updateLayer(a)),this.visible=d(a)},c.needsNewImage=function(i){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===i.sourcetype&&(this.source!==i.source||JSON.stringify(this.coordinates)!==JSON.stringify(i.coordinates))},c.needsNewSource=function(i){return this.sourceType!==i.sourcetype||JSON.stringify(this.source)!==JSON.stringify(i.source)||this.layerType!==i.type},c.needsNewLayer=function(i){return this.layerType!==i.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},c.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},c.updateImage=function(i){this.subplot.map.getSource(this.idSource).updateImage({url:i.source,coordinates:i.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());null!==r&&this.subplot.map.moveLayer(this.idLayer,r)},c.updateSource=function(i){var a=this.subplot.map;if(a.getSource(this.idSource)&&a.removeSource(this.idSource),this.sourceType=i.sourcetype,this.source=i.source,d(i)){var r=function t(i){var s,a=i.sourcetype,r=i.source,g={type:a};return"geojson"===a?s="data":"vector"===a?s="string"==typeof r?"url":"tiles":"raster"===a?(s="tiles",g.tileSize=256):"image"===a&&(s="url",g.coordinates=i.coordinates),g[s]=r,i.sourceattribution&&(g.attribution=k(i.sourceattribution)),g}(i);a.addSource(this.idSource,r)}},c.findFollowingMapboxLayerId=function(i){if("traces"===i)for(var a=this.subplot.getMapLayers(),r=0;r<a.length;r++){var g=a[r].id;if("string"==typeof g&&0===g.indexOf(E.traceLayerPrefix)){i=g;break}}return i},c.updateLayer=function(i){var a=this.subplot,r=n(i),g=this.lookupBelow(),s=this.findFollowingMapboxLayerId(g);this.removeLayer(),d(i)&&a.addLayer({id:this.idLayer,source:this.idSource,"source-layer":i.sourcelayer||"",type:i.type,minzoom:i.minzoom,maxzoom:i.maxzoom,layout:r.layout,paint:r.paint},s),this.layerType=i.type,this.below=g},c.updateStyle=function(i){if(d(i)){var a=n(i);this.subplot.setOptions(this.idLayer,"setLayoutProperty",a.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",a.paint)}},c.removeLayer=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer)},c.dispose=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer),i.getSource(this.idSource)&&i.removeSource(this.idSource)},ie.exports=function(a,r,g){var s=new e(a,r);return s.update(g),s}},{"../../lib":503,"../../lib/svg_text_utils":529,"./constants":611,"./convert_text_opts":612}],615:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../components/color").defaultLine,m=v("../domain").attributes,E=v("../font_attributes"),e=v("../../traces/scatter/attributes").textposition,c=v("../../plot_api/edit_types").overrideAll,d=v("../../plot_api/plot_template").templatedArray,n=v("./constants"),t=E({});t.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(ie.exports=c({_arrayAttrRegexps:[_.counterRegex("mapbox",".layers",!0)],domain:m({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:n.styleValuesMapbox.concat(n.styleValuesNonMapbox),dflt:n.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:d("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:k},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:k}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:t,textposition:_.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":366,"../../lib":503,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":927,"../domain":584,"../font_attributes":585,"./constants":611}],616:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../subplot_defaults"),m=v("../array_container_defaults"),E=v("./layout_attributes");function e(d,n,t,i){t("accesstoken",i.accessToken),t("style"),t("center.lon"),t("center.lat"),t("zoom"),t("bearing"),t("pitch"),m(d,n,{name:"layers",handleItemDefaults:c}),n._input=d}function c(d,n){function t(b,x){return _.coerce(d,n,E.layers,b,x)}if(t("visible")){var g,a=t("sourcetype"),r="raster"===a||"image"===a;t("source"),t("sourceattribution"),"vector"===a&&t("sourcelayer"),"image"===a&&t("coordinates"),r&&(g="raster");var s=t("type",g);r&&"raster"!==s&&(s=n.type="raster",_.log("Source types *raster* and *image* must drawn *raster* layer type.")),t("below"),t("color"),t("opacity"),t("minzoom"),t("maxzoom"),"circle"===s&&t("circle.radius"),"line"===s&&(t("line.width"),t("line.dash")),"fill"===s&&t("fill.outlinecolor"),"symbol"===s&&(t("symbol.icon"),t("symbol.iconsize"),t("symbol.text"),_.coerceFont(t,"symbol.textfont"),t("symbol.textposition"),t("symbol.placement"))}}ie.exports=function(n,t,i){k(n,t,i,{type:"mapbox",attributes:E,handleDefaults:e,partition:"y",accessToken:t._mapboxAccessToken})}},{"../../lib":503,"../array_container_defaults":549,"../subplot_defaults":632,"./layout_attributes":615}],617:[function(v,ie,ae){"use strict";var _=v("mapbox-gl/dist/mapbox-gl-unminified"),k=v("../../lib"),m=v("../../lib/geo_location_utils"),E=v("../../registry"),e=v("../cartesian/axes"),c=v("../../components/dragelement"),d=v("../../components/fx"),n=v("../../components/dragelement/helpers"),t=n.rectMode,i=n.drawMode,a=n.selectMode,r=v("../cartesian/select").prepSelect,g=v("../cartesian/select").clearSelect,s=v("../cartesian/select").clearSelectionsCache,b=v("../cartesian/select").selectOnClick,x=v("./constants"),S=v("./layers");function p(M,f){this.id=f,this.gd=M;var u=M._fullLayout,h=M._context;this.container=u._glcontainer.node(),this.isStatic=h.staticPlot,this.uid=u._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(u),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var w=p.prototype;w.plot=function(M,f,u){var C,h=this;h.map&&f[h.id].accesstoken!==h.accessToken&&(h.map.remove(),h.map=null,h.styleObj=null,h.traceHash={},h.layerList=[]),C=new Promise(h.map?function(R,z){h.updateMap(M,f,R,z)}:function(R,z){h.createMap(M,f,R,z)}),u.push(C)},w.createMap=function(M,f,u,h){var o=this,C=f[o.id],R=o.styleObj=y(C.style);o.accessToken=C.accesstoken;var z=o.map=new _.Map({container:o.div,style:R.style,center:T(C.center),zoom:C.zoom,bearing:C.bearing,pitch:C.pitch,interactive:!o.isStatic,preserveDrawingBuffer:o.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new _.AttributionControl({compact:!0}));z._canvas.style.left="0px",z._canvas.style.top="0px",o.rejectOnError(h),o.isStatic||o.initFx(M,f);var O=[];O.push(new Promise(function(I){z.once("load",I)})),O=O.concat(m.fetchTraceGeoData(M)),Promise.all(O).then(function(){o.fillBelowLookup(M,f),o.updateData(M),o.updateLayout(f),o.resolveOnRender(u)}).catch(h)},w.updateMap=function(M,f,u,h){var o=this,C=o.map,R=f[this.id];o.rejectOnError(h);var z=[],O=y(R.style);JSON.stringify(o.styleObj)!==JSON.stringify(O)&&(o.styleObj=O,C.setStyle(O.style),o.traceHash={},z.push(new Promise(function(I){C.once("styledata",I)}))),z=z.concat(m.fetchTraceGeoData(M)),Promise.all(z).then(function(){o.fillBelowLookup(M,f),o.updateData(M),o.updateLayout(f),o.resolveOnRender(u)}).catch(h)},w.fillBelowLookup=function(M,f){var o,C,h=f[this.id].layers,R=this.belowLookup={},z=!1;for(o=0;o<M.length;o++){var O=M[o][0].trace,I=O._module;"string"==typeof O.below?C=O.below:I.getBelow&&(C=I.getBelow(O,this)),""===C&&(z=!0),R["trace-"+O.uid]=C||""}for(o=0;o<h.length;o++){var F=h[o];R["layout-"+o]=C="string"==typeof F.below?F.below:z?"traces":""}var N,U,D={};for(N in R)D[C=R[N]]?D[C].push(N):D[C]=[N];for(C in D){var X=D[C];if(X.length>1)for(o=0;o<X.length;o++)0===(N=X[o]).indexOf("trace-")?(U=N.split("trace-")[1],this.traceHash[U]&&(this.traceHash[U].below=null)):0===N.indexOf("layout-")&&(U=N.split("layout-")[1],this.layerList[U]&&(this.layerList[U].below=null))}};var l={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function y(M){var f={};return k.isPlainObject(M)?(f.id=M.id,f.style=M):"string"==typeof M?(f.id=M,f.style=-1!==x.styleValuesMapbox.indexOf(M)?A(M):x.stylesNonMapbox[M]?x.stylesNonMapbox[M]:M):(f.id=x.styleValueDflt,f.style=A(x.styleValueDflt)),f.transition={duration:0,delay:0},f}function A(M){return x.styleUrlPrefix+M+"-"+x.styleUrlSuffix}function T(M){return[M.lon,M.lat]}w.updateData=function(M){var u,h,o,C,f=this.traceHash,R=M.slice().sort(function(D,N){return l[D[0].trace.type]-l[N[0].trace.type]});for(o=0;o<R.length;o++){var z=R[o],O=!1;(u=f[(h=z[0].trace).uid])&&(u.type===h.type?(u.update(z),O=!0):u.dispose()),!O&&h._module&&(f[h.uid]=h._module.plot(this,z))}var I=Object.keys(f);e:for(o=0;o<I.length;o++){var F=I[o];for(C=0;C<M.length;C++)if(F===(h=M[C][0].trace).uid)continue e;(u=f[F]).dispose(),delete f[F]}},w.updateLayout=function(M){var f=this.map,u=M[this.id];!this.dragging&&!this.wheeling&&(f.setCenter(T(u.center)),f.setZoom(u.zoom),f.setBearing(u.bearing),f.setPitch(u.pitch)),this.updateLayers(M),this.updateFramework(M),this.updateFx(M),this.map.resize(),this.gd._context._scrollZoom.mapbox?f.scrollZoom.enable():f.scrollZoom.disable()},w.resolveOnRender=function(M){var f=this.map;f.on("render",function u(){f.loaded()&&(f.off("render",u),setTimeout(M,10))})},w.rejectOnError=function(M){var f=this.map;function u(){M(new Error(x.mapOnErrorMsg))}f.once("error",u),f.once("style.error",u),f.once("source.error",u),f.once("tile.error",u),f.once("layer.error",u)},w.createFramework=function(M){var f=this,u=f.div=document.createElement("div");u.id=f.uid,u.style.position="absolute",f.container.appendChild(u),f.xaxis={_id:"x",c2p:function(h){return f.project(h).x}},f.yaxis={_id:"y",c2p:function(h){return f.project(h).y}},f.updateFramework(M),f.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(f.mockAxis,M)},w.initFx=function(M,f){var u=this,h=u.gd,o=u.map;function C(){d.loneUnhover(f._hoverlayer)}function R(){var z=u.getView();h.emit("plotly_relayouting",u.getViewEditsWithDerived(z))}o.on("moveend",function(z){if(u.map){var O=h._fullLayout;if(z.originalEvent||u.wheeling){var I=O[u.id];E.call("_storeDirectGUIEdit",h.layout,O._preGUI,u.getViewEdits(I));var F=u.getView();I._input.center=I.center=F.center,I._input.zoom=I.zoom=F.zoom,I._input.bearing=I.bearing=F.bearing,I._input.pitch=I.pitch=F.pitch,h.emit("plotly_relayout",u.getViewEditsWithDerived(F))}z.originalEvent&&"mouseup"===z.originalEvent.type?u.dragging=!1:u.wheeling&&(u.wheeling=!1),O._rehover&&O._rehover()}}),o.on("wheel",function(){u.wheeling=!0}),o.on("mousemove",function(z){var O=u.div.getBoundingClientRect(),I=[z.originalEvent.offsetX,z.originalEvent.offsetY];z.target.getBoundingClientRect=function(){return O},u.xaxis.p2c=function(){return o.unproject(I).lng},u.yaxis.p2c=function(){return o.unproject(I).lat},h._fullLayout._rehover=function(){h._fullLayout._hoversubplot===u.id&&h._fullLayout[u.id]&&d.hover(h,z,u.id)},d.hover(h,z,u.id),h._fullLayout._hoversubplot=u.id}),o.on("dragstart",function(){u.dragging=!0,C()}),o.on("zoomstart",C),o.on("mouseout",function(){h._fullLayout._hoversubplot=null}),o.on("drag",R),o.on("zoom",R),o.on("dblclick",function(){var z=h._fullLayout[u.id];E.call("_storeDirectGUIEdit",h.layout,h._fullLayout._preGUI,u.getViewEdits(z));var O=u.viewInitial;o.setCenter(T(O.center)),o.setZoom(O.zoom),o.setBearing(O.bearing),o.setPitch(O.pitch);var I=u.getView();z._input.center=z.center=I.center,z._input.zoom=z.zoom=I.zoom,z._input.bearing=z.bearing=I.bearing,z._input.pitch=z.pitch=I.pitch,h.emit("plotly_doubleclick",null),h.emit("plotly_relayout",u.getViewEditsWithDerived(I))}),u.clearSelect=function(){s(u.dragOptions),g(u.dragOptions.gd)},u.onClickInPanFn=function(z){return function(O){var I=h._fullLayout.clickmode;I.indexOf("select")>-1&&b(O.originalEvent,h,[u.xaxis],[u.yaxis],u.id,z),I.indexOf("event")>-1&&d.click(h,O.originalEvent)}}},w.updateFx=function(M){var f=this,u=f.map,h=f.gd;if(!f.isStatic){var R,C=M.dragmode;R=t(C)?function(O,I){(O.range={})[f.id]=[o([I.xmin,I.ymin]),o([I.xmax,I.ymax])]}:function(O,I,F){(O.lassoPoints={})[f.id]=F.filtered.map(o)},f.dragOptions=k.extendDeep(f.dragOptions||{},{dragmode:M.dragmode,element:f.div,gd:h,plotinfo:{id:f.id,domain:M[f.id].domain,xaxis:f.xaxis,yaxis:f.yaxis,fillRangeItems:R},xaxes:[f.xaxis],yaxes:[f.yaxis],subplot:f.id}),u.off("click",f.onClickInPanHandler),a(C)||i(C)?(u.dragPan.disable(),u.on("zoomstart",f.clearSelect),f.dragOptions.prepFn=function(O,I,F){r(O,I,F,f.dragOptions,C)},c.init(f.dragOptions)):(u.dragPan.enable(),u.off("zoomstart",f.clearSelect),f.div.onmousedown=null,f.onClickInPanHandler=f.onClickInPanFn(f.dragOptions),u.on("click",f.onClickInPanHandler))}function o(O){var I=f.map.unproject(O);return[I.lng,I.lat]}},w.updateFramework=function(M){var f=M[this.id].domain,u=M._size,h=this.div.style;h.width=u.w*(f.x[1]-f.x[0])+"px",h.height=u.h*(f.y[1]-f.y[0])+"px",h.left=u.l+f.x[0]*u.w+"px",h.top=u.t+(1-f.y[1])*u.h+"px",this.xaxis._offset=u.l+f.x[0]*u.w,this.xaxis._length=u.w*(f.x[1]-f.x[0]),this.yaxis._offset=u.t+(1-f.y[1])*u.h,this.yaxis._length=u.h*(f.y[1]-f.y[0])},w.updateLayers=function(M){var o,u=M[this.id].layers,h=this.layerList;if(u.length!==h.length){for(o=0;o<h.length;o++)h[o].dispose();for(h=this.layerList=[],o=0;o<u.length;o++)h.push(S(this,o,u[o]))}else for(o=0;o<u.length;o++)h[o].update(u[o])},w.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},w.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},w.setOptions=function(M,f,u){for(var h in u)this.map[f](M,h,u[h])},w.getMapLayers=function(){return this.map.getStyle().layers},w.addLayer=function(M,f){var u=this.map;if("string"==typeof f){if(""===f)return void u.addLayer(M,f);for(var h=this.getMapLayers(),o=0;o<h.length;o++)if(f===h[o].id)return void u.addLayer(M,f);k.warn(["Trying to add layer with *below* value",f,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}u.addLayer(M)},w.project=function(M){return this.map.project(new _.LngLat(M[0],M[1]))},w.getView=function(){var M=this.map,f=M.getCenter(),o={lon:f.lng,lat:f.lat},C=M.getCanvas(),R=parseInt(C.style.width),z=parseInt(C.style.height);return{center:o,zoom:M.getZoom(),bearing:M.getBearing(),pitch:M.getPitch(),_derived:{coordinates:[M.unproject([0,0]).toArray(),M.unproject([R,0]).toArray(),M.unproject([R,z]).toArray(),M.unproject([0,z]).toArray()]}}},w.getViewEdits=function(M){for(var f=this.id,u=["center","zoom","bearing","pitch"],h={},o=0;o<u.length;o++){var C=u[o];h[f+"."+C]=M[C]}return h},w.getViewEditsWithDerived=function(M){var f=this.id,u=this.getViewEdits(M);return u[f+"._derived"]=M._derived,u},ie.exports=p},{"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../registry":638,"../cartesian/axes":554,"../cartesian/select":575,"./constants":611,"./layers":614,"mapbox-gl/dist/mapbox-gl-unminified":239}],618:[function(v,ie,ae){"use strict";ie.exports=function(_){var k=_.editType;return{t:{valType:"number",dflt:0,editType:k},r:{valType:"number",dflt:0,editType:k},b:{valType:"number",dflt:0,editType:k},l:{valType:"number",dflt:0,editType:k},editType:k}}},{}],619:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("d3-time-format").timeFormatLocale,m=v("d3-format").formatLocale,E=v("fast-isnumeric"),e=v("../registry"),c=v("../plot_api/plot_schema"),d=v("../plot_api/plot_template"),n=v("../lib"),t=v("../components/color"),i=v("../constants/numerical").BADNUM,a=v("./cartesian/axis_ids"),r=v("./cartesian/handle_outline").clearSelect,g=v("./animation_attributes"),s=v("./frame_attributes"),b=v("../plots/get_data").getModuleCalcData,x=n.relinkPrivateKeys,S=n._,p=ie.exports={};n.extendFlat(p,e),p.attributes=v("./attributes"),p.attributes.type.values=p.allTypes,p.fontAttrs=v("./font_attributes"),p.layoutAttributes=v("./layout_attributes"),p.fontWeight="normal";var w=p.transformsRegistry,l=v("./command");p.executeAPICommand=l.executeAPICommand,p.computeAPICommandBindings=l.computeAPICommandBindings,p.manageCommandObserver=l.manageCommandObserver,p.hasSimpleAPICommandBindings=l.hasSimpleAPICommandBindings,p.redrawText=function(V){return V=n.getGraphDiv(V),new Promise(function(H){setTimeout(function(){!V._fullLayout||(e.getComponentMethod("annotations","draw")(V),e.getComponentMethod("legend","draw")(V),e.getComponentMethod("colorbar","draw")(V),H(p.previousPromises(V)))},300)})},p.resize=function(V){V=n.getGraphDiv(V);var H,q=new Promise(function(K,Y){(!V||n.isHidden(V))&&Y(new Error("Resize must be passed a displayed plot div element.")),V._redrawTimer&&clearTimeout(V._redrawTimer),V._resolveResize&&(H=V._resolveResize),V._resolveResize=K,V._redrawTimer=setTimeout(function(){if(!V.layout||V.layout.width&&V.layout.height||n.isHidden(V))K(V);else{delete V.layout.width,delete V.layout.height;var te=V.changed;V.autoplay=!0,e.call("relayout",V,{autosize:!0}).then(function(){V.changed=te,V._resolveResize===K&&(delete V._resolveResize,K(V))})}},100)});return H&&H(q),q},p.previousPromises=function(V){if((V._promises||[]).length)return Promise.all(V._promises).then(function(){V._promises=[]})},p.addLinks=function(V){if(V._context.showLink||V._context.showSources){var H=V._fullLayout,q=n.ensureSingle(H._paper,"text","js-plot-link-container",function(re){re.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:t.defaultLine,"pointer-events":"all"}).each(function(){var le=_.select(this);le.append("tspan").classed("js-link-to-tool",!0),le.append("tspan").classed("js-link-spacer",!0),le.append("tspan").classed("js-sourcelinks",!0)})}),K=q.node(),Y={y:H._paper.attr("height")-9};document.body.contains(K)&&K.getComputedTextLength()>=H.width-20?(Y["text-anchor"]="start",Y.x=5):(Y["text-anchor"]="end",Y.x=H._paper.attr("width")-7),q.attr(Y);var te=q.select(".js-link-to-tool"),J=q.select(".js-link-spacer"),j=q.select(".js-sourcelinks");V._context.showSources&&V._context.showSources(V),V._context.showLink&&function y(V,H){H.text("");var q=H.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(V._context.linkText+" "+String.fromCharCode(187));if(V._context.sendData)q.on("click",function(){p.sendDataToCloud(V)});else{var K=window.location.pathname.split("/"),Y=window.location.search;q.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+K[2].split(".")[0]+"/"+K[1]+Y})}}(V,te),J.text(te.text()&&j.text()?" - ":"")}},p.sendDataToCloud=function(V){var H=(window.PLOTLYENV||{}).BASE_URL||V._context.plotlyServerURL;if(H){V.emit("plotly_beforeexport");var q=_.select(V).append("div").attr("id","hiddenform").style("display","none"),K=q.append("form").attr({action:H+"/external",method:"post",target:"_blank"});return K.append("input").attr({type:"text",name:"data"}).node().value=p.graphJson(V,!1,"keepdata"),K.node().submit(),q.remove(),V.emit("plotly_afterexport"),!1}};var A=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],T=["year","month","dayMonth","dayMonthYear"];function u(V,H){var q=V._context.locale;q||(q="en-US");var K=!1,Y={};function te(pe){for(var xe=!0,ke=0;ke<H.length;ke++){var we=H[ke];Y[we]||(pe[we]?Y[we]=pe[we]:xe=!1)}xe&&(K=!0)}for(var J=0;J<2;J++){for(var j=V._context.locales,re=0;re<2;re++){var le=(j[q]||{}).format;if(le&&(te(le),K))break;j=e.localeRegistry}var ge=q.split("-")[0];if(K||ge===q)break;q=ge}return K||te(e.localeRegistry.en.format),Y}function C(V,H){var q={_fullLayout:H},K="x"===V._id.charAt(0),Y=V._mainAxis._anchorAxis,te="",J="",j="";if(Y&&(j=Y._mainAxis._id,te=K?V._id+j:j+V._id),!te||!H._plots[te]){te="";for(var re=V._counterAxes,le=0;le<re.length;le++){var ge=re[le],pe=K?V._id+ge:ge+V._id;J||(J=pe);var xe=a.getFromId(q,ge);if(j&&xe.overlaying===j){te=pe;break}}}return te||J}function R(V){var H=V.transforms;if(Array.isArray(H)&&H.length)for(var q=0;q<H.length;q++){var K=H[q],Y=K._module||w[K.type];if(Y&&Y.makesData)return!0}return!1}function z(V,H,q,K){for(var Y=V.transforms,te=[V],J=0;J<Y.length;J++){var j=Y[J],re=w[j.type];re&&re.transform&&(te=re.transform(te,{transform:j,fullTrace:V,fullData:H,layout:q,fullLayout:K,transformIndex:J}))}return te}function O(V){return"string"==typeof V&&"px"===V.substr(V.length-2)&&parseFloat(V)}function I(V){var H=V.margin;if(!V._size){var q=V._size={l:Math.round(H.l),r:Math.round(H.r),t:Math.round(H.t),b:Math.round(H.b),p:Math.round(H.pad)};q.w=Math.round(V.width)-q.l-q.r,q.h=Math.round(V.height)-q.t-q.b}V._pushmargin||(V._pushmargin={}),V._pushmarginIds||(V._pushmarginIds={})}p.supplyDefaults=function(V,H){var q=H&&H.skipUpdateCalc,K=V._fullLayout||{};if(K._skipDefaults)delete K._skipDefaults;else{var pe,Y=V._fullLayout={},te=V.layout||{},J=V._fullData||[],j=V._fullData=[],re=V.data||[],le=V.calcdata||[],ge=V._context||{};V._transitionData||p.createTransitionData(V),Y._dfltTitle={plot:S(V,"Click to enter Plot title"),x:S(V,"Click to enter X axis title"),y:S(V,"Click to enter Y axis title"),colorbar:S(V,"Click to enter Colorscale title"),annotation:S(V,"new text")},Y._traceWord=S(V,"trace");var xe=u(V,A);if(Y._mapboxAccessToken=ge.mapboxAccessToken,K._initialAutoSizeIsDone){var ke=K.width,we=K.height;p.supplyLayoutGlobalDefaults(te,Y,xe),te.width||(Y.width=ke),te.height||(Y.height=we),p.sanitizeMargins(Y)}else{p.supplyLayoutGlobalDefaults(te,Y,xe);var de=!te.width||!te.height,be=Y.autosize;de&&(be||ge.autosizable)?p.plotAutoSize(V,te,Y):de&&p.sanitizeMargins(Y),!be&&de&&(te.width=Y.width,te.height=Y.height)}Y._d3locale=function h(V,H){return V.decimal=H.charAt(0),V.thousands=H.charAt(1),{numberFormat:function(q){try{q=m(V).format(n.adjustFormat(q))}catch(K){return n.warnBadFormat(q),n.noFormat}return q},timeFormat:k(V).utcFormat}}(xe,Y.separators),Y._extraFormat=u(V,T),Y._initialAutoSizeIsDone=!0,Y._dataLength=re.length,Y._modules=[],Y._visibleModules=[],Y._basePlotModules=[];var ye=Y._subplots=function f(){var q,K,V=e.collectableSubplotTypes,H={};if(!V){V=[];var Y=e.subplotsRegistry;for(var te in Y){var j=Y[te].attr;if(j&&(V.push(te),Array.isArray(j)))for(K=0;K<j.length;K++)n.pushUnique(V,j[K])}}for(q=0;q<V.length;q++)H[V[q]]=[];return H}(),Ce=Y._splomAxes={x:{},y:{}},Fe=Y._splomSubplots={};Y._splomGridDflt={},Y._scatterStackOpts={},Y._firstScatter={},Y._alignmentOpts={},Y._colorAxes={},Y._requestRangeslider={},Y._traceUids=function M(V,H){var Y,te,q=H.length,K=[];for(Y=0;Y<V.length;Y++){var J=V[Y]._fullInput;J!==te&&K.push(J),te=J}var j=K.length,re=new Array(q),le={};function ge(ke,we){re[we]=ke,le[ke]=1}function pe(ke,we){if(ke&&"string"==typeof ke&&!le[ke])return ge(ke,we),!0}for(Y=0;Y<q;Y++){var xe=H[Y].uid;"number"==typeof xe&&(xe=String(xe)),!pe(xe,Y)&&(Y<j&&pe(K[Y].uid,Y)||ge(n.randstr(le),Y))}return re}(J,re),Y._globalTransforms=(V._context||{}).globalTransforms,p.supplyDataDefaults(re,j,te,Y);var Ke=Object.keys(Ce.x),Ue=Object.keys(Ce.y);if(Ke.length>1&&Ue.length>1){for(e.getComponentMethod("grid","sizeDefaults")(te,Y),pe=0;pe<Ke.length;pe++)n.pushUnique(ye.xaxis,Ke[pe]);for(pe=0;pe<Ue.length;pe++)n.pushUnique(ye.yaxis,Ue[pe]);for(var Be in Fe)n.pushUnique(ye.cartesian,Be)}if(Y._has=p._hasPlotType.bind(Y),J.length===j.length)for(pe=0;pe<j.length;pe++)x(j[pe],J[pe]);p.supplyLayoutModuleDefaults(te,Y,j,V._transitionData);var Ie=Y._visibleModules,nt=[];for(pe=0;pe<Ie.length;pe++){var gt=Ie[pe].crossTraceDefaults;gt&&n.pushUnique(nt,gt)}for(pe=0;pe<nt.length;pe++)nt[pe](j,Y);Y._hasOnlyLargeSploms=1===Y._basePlotModules.length&&"splom"===Y._basePlotModules[0].name&&Ke.length>15&&Ue.length>15&&0===Y.shapes.length&&0===Y.images.length,p.linkSubplots(j,Y,J,K),p.cleanPlot(j,Y,J,K);var Nt=!(!K._has||!K._has("gl2d")),St=!(!Y._has||!Y._has("gl2d")),Et=!(!K._has||!K._has("cartesian"))||Nt,wt=!(!Y._has||!Y._has("cartesian"))||St;Et&&!wt?K._bgLayer.remove():wt&&!Et&&(Y._shouldCreateBgLayer=!0),K._zoomlayer&&!V._dragging&&r({_fullLayout:K}),function o(V,H){var q,K=[];H.meta&&(q=H._meta={meta:H.meta,layout:{meta:H.meta}});for(var Y=0;Y<V.length;Y++){var te=V[Y];te.meta?K[te.index]=te._meta={meta:te.meta}:H.meta&&(te._meta={meta:H.meta}),H.meta&&(te._meta.layout={meta:H.meta})}K.length&&(q||(q=H._meta={}),q.data=K)}(j,Y),x(Y,K),e.getComponentMethod("colorscale","crossTraceDefaults")(j,Y),Y._preGUI||(Y._preGUI={}),Y._tracePreGUI||(Y._tracePreGUI={});var Qe,at=Y._tracePreGUI,vt={};for(Qe in at)vt[Qe]="old";for(pe=0;pe<j.length;pe++)vt[Qe=j[pe]._fullInput.uid]||(at[Qe]={}),vt[Qe]="new";for(Qe in vt)"old"===vt[Qe]&&delete at[Qe];I(Y),e.getComponentMethod("rangeslider","makeData")(Y),!q&&le.length===j.length&&p.supplyDefaultsUpdateCalc(le,j)}},p.supplyDefaultsUpdateCalc=function(V,H){for(var q=0;q<H.length;q++){var K=H[q],Y=(V[q]||[])[0];if(Y&&Y.trace){var te=Y.trace;if(te._hasCalcTransform){var j,re,le,J=te._arrayAttrs;for(j=0;j<J.length;j++)le=n.nestedProperty(te,re=J[j]).get().slice(),n.nestedProperty(K,re).set(le)}Y.trace=K}}},p.createTransitionData=function(V){V._transitionData||(V._transitionData={}),V._transitionData._frames||(V._transitionData._frames=[]),V._transitionData._frameHash||(V._transitionData._frameHash={}),V._transitionData._counter||(V._transitionData._counter=0),V._transitionData._interruptCallbacks||(V._transitionData._interruptCallbacks=[])},p._hasPlotType=function(V){var H,q=this._basePlotModules||[];for(H=0;H<q.length;H++)if(q[H].name===V)return!0;var K=this._modules||[];for(H=0;H<K.length;H++){var Y=K[H].name;if(Y===V)return!0;var te=e.modules[Y];if(te&&te.categories[V])return!0}return!1},p.cleanPlot=function(V,H,q,K){var Y,te,J=K._basePlotModules||[];for(Y=0;Y<J.length;Y++){var j=J[Y];j.clean&&j.clean(V,H,q,K)}var re=K._has&&K._has("gl"),le=H._has&&H._has("gl");re&&!le&&void 0!==K._glcontainer&&(K._glcontainer.selectAll(".gl-canvas").remove(),K._glcontainer.selectAll(".no-webgl").remove(),K._glcanvas=null);var ge=!!K._infolayer;e:for(Y=0;Y<q.length;Y++){var xe=q[Y].uid;for(te=0;te<V.length;te++)if(xe===V[te].uid)continue e;ge&&K._infolayer.select(".cb"+xe).remove()}},p.linkSubplots=function(V,H,q,K){var Y,te,J=K._plots||{},j=H._plots={},re=H._subplots,le={_fullData:V,_fullLayout:H},ge=re.cartesian.concat(re.gl2d||[]);for(Y=0;Y<ge.length;Y++){var de,pe=ge[Y],xe=J[pe],ke=a.getFromId(le,pe,"x"),we=a.getFromId(le,pe,"y");for(xe?de=j[pe]=xe:(de=j[pe]={}).id=pe,ke._counterAxes.push(we._id),we._counterAxes.push(ke._id),ke._subplotsWith.push(pe),we._subplotsWith.push(pe),de.xaxis=ke,de.yaxis=we,de._hasClipOnAxisFalse=!1,te=0;te<V.length;te++){var be=V[te];if(be.xaxis===de.xaxis._id&&be.yaxis===de.yaxis._id&&!1===be.cliponaxis){de._hasClipOnAxisFalse=!0;break}}}var De,Le=a.list(le,null,!0);for(Y=0;Y<Le.length;Y++){var ye=null;(De=Le[Y]).overlaying&&(ye=a.getFromId(le,De.overlaying))&&ye.overlaying&&(De.overlaying=!1,ye=null),De._mainAxis=ye||De,ye&&(De.domain=ye.domain.slice()),De._anchorAxis="free"===De.anchor?null:a.getFromId(le,De.anchor)}for(Y=0;Y<Le.length;Y++)if((De=Le[Y])._counterAxes.sort(a.idSort),De._subplotsWith.sort(n.subplotSort),De._mainSubplot=C(De,H),De._counterAxes.length&&(De.spikemode&&-1!==De.spikemode.indexOf("across")||De.automargin&&De.mirror&&"free"!==De.anchor||e.getComponentMethod("rangeslider","isVisible")(De))){var Ce=1,Fe=0;for(te=0;te<De._counterAxes.length;te++){var Ke=a.getFromId(le,De._counterAxes[te]);Ce=Math.min(Ce,Ke.domain[0]),Fe=Math.max(Fe,Ke.domain[1])}Ce<Fe&&(De._counterDomainMin=Ce,De._counterDomainMax=Fe)}},p.clearExpandedTraceDefaultColors=function(V){var H,q,K;for(q=[],(H=V._module._colorAttrs)||(V._module._colorAttrs=H=[],c.crawl(V._module.attributes,function Y(J,j,re,le){q[le]=j,q.length=le+1,"color"===J.valType&&void 0===J.dflt&&H.push(q.join("."))})),K=0;K<H.length;K++)n.nestedProperty(V,"_input."+H[K]).get()||n.nestedProperty(V,H[K]).set(null)},p.supplyDataDefaults=function(V,H,q,K){var le,ge,pe,Y=K._modules,te=K._visibleModules,J=K._basePlotModules,j=0,re=0;function xe(Ue){H.push(Ue);var Be=Ue._module;!Be||(n.pushUnique(Y,Be),!0===Ue.visible&&n.pushUnique(te,Be),n.pushUnique(J,Ue._module.basePlotModule),j++,!1!==Ue._input.visible&&re++)}K._transformModules=[];var ke={},we=[],be=d.traceTemplater((q.template||{}).data||{});for(le=0;le<V.length;le++){if((ge=be.newTrace(pe=V[le])).uid=K._traceUids[le],p.supplyTraceDefaults(pe,ge,re,K,le),ge.index=le,ge._input=pe,ge._expandedIndex=j,ge.transforms&&ge.transforms.length)for(var Le=!1!==pe.visible&&!1===ge.visible,De=z(ge,H,q,K),ye=0;ye<De.length;ye++){var Ce=De[ye],Fe={_template:ge._template,type:ge.type,uid:ge.uid+ye};Le&&!1===Ce.visible&&delete Ce.visible,p.supplyTraceDefaults(Ce,Fe,j,K,le),x(Fe,Ce),Fe.index=le,Fe._input=pe,Fe._fullInput=ge,Fe._expandedIndex=j,Fe._expandedInput=Ce,xe(Fe)}else ge._fullInput=ge,ge._expandedInput=ge,xe(ge);e.traceIs(ge,"carpetAxis")&&(ke[ge.carpet]=ge),e.traceIs(ge,"carpetDependent")&&we.push(le)}for(le=0;le<we.length;le++)if((ge=H[we[le]]).visible){var Ke=ke[ge.carpet];if(ge._carpet=Ke,!Ke||!Ke.visible){ge.visible=!1;continue}ge.xaxis=Ke.xaxis,ge.yaxis=Ke.yaxis}},p.supplyAnimationDefaults=function(V){V=V||{};var H,q={};function K(Y,te){return n.coerce(V||{},q,g,Y,te)}if(K("mode"),K("direction"),K("fromcurrent"),Array.isArray(V.frame))for(q.frame=[],H=0;H<V.frame.length;H++)q.frame[H]=p.supplyAnimationFrameDefaults(V.frame[H]||{});else q.frame=p.supplyAnimationFrameDefaults(V.frame||{});if(Array.isArray(V.transition))for(q.transition=[],H=0;H<V.transition.length;H++)q.transition[H]=p.supplyAnimationTransitionDefaults(V.transition[H]||{});else q.transition=p.supplyAnimationTransitionDefaults(V.transition||{});return q},p.supplyAnimationFrameDefaults=function(V){var H={};function q(K,Y){return n.coerce(V||{},H,g.frame,K,Y)}return q("duration"),q("redraw"),H},p.supplyAnimationTransitionDefaults=function(V){var H={};function q(K,Y){return n.coerce(V||{},H,g.transition,K,Y)}return q("duration"),q("easing"),H},p.supplyFrameDefaults=function(V){var H={};function q(K,Y){return n.coerce(V,H,s,K,Y)}return q("group"),q("name"),q("traces"),q("baseframe"),q("data"),q("layout"),H},p.supplyTraceDefaults=function(V,H,q,K,Y){var j,te=K.colorway||t.defaults,J=te[q%te.length];function re(De,ye){return n.coerce(V,H,p.attributes,De,ye)}var le=re("visible");re("type"),re("name",K._traceWord+" "+Y),re("uirevision",K.uirevision);var ge=p.getModule(H);if(H._module=ge,ge){var pe=ge.basePlotModule,xe=pe.attr,ke=pe.attributes;if(xe&&ke){var we=K._subplots,de="";if(le||"gl2d"!==pe.name){if(Array.isArray(xe))for(j=0;j<xe.length;j++){var be=xe[j],Le=n.coerce(V,H,ke,be);we[be]&&n.pushUnique(we[be],Le),de+=Le}else de=n.coerce(V,H,ke,xe);we[pe.name]&&n.pushUnique(we[pe.name],de)}}}return le&&(re("customdata"),re("ids"),re("meta"),e.traceIs(H,"showLegend")?(n.coerce(V,H,ge.attributes.showlegend?ge.attributes:p.attributes,"showlegend"),re("legendgroup"),re("legendgrouptitle.text"),re("legendrank"),H._dfltShowLegend=!0):H._dfltShowLegend=!1,ge&&ge.supplyDefaults(V,H,J,K),e.traceIs(H,"noOpacity")||re("opacity"),e.traceIs(H,"notLegendIsolatable")&&(H.visible=!!H.visible),e.traceIs(H,"noHover")||(H.hovertemplate||n.coerceHoverinfo(V,H,K),"parcats"!==H.type&&e.getComponentMethod("fx","supplyDefaults")(V,H,J,K)),ge&&ge.selectPoints&&re("selectedpoints"),p.supplyTransformDefaults(V,H,K)),H},p.hasMakesDataTransform=R,p.supplyTransformDefaults=function(V,H,q){if(H._length||R(V)){var K=q._globalTransforms||[],Y=q._transformModules||[];if(Array.isArray(V.transforms)||0!==K.length)for(var J=K.concat(V.transforms||[]),j=H.transforms=[],re=0;re<J.length;re++){var xe,le=J[re],ge=le.type,pe=w[ge],ke=!(le._module&&le._module===pe),we=pe&&"function"==typeof pe.transform;pe||n.warn("Unrecognized transform type "+ge+"."),pe&&pe.supplyDefaults&&(ke||we)?((xe=pe.supplyDefaults(le,H,q,V)).type=ge,xe._module=pe,n.pushUnique(Y,pe)):xe=n.extendFlat({},le),j.push(xe)}}},p.supplyLayoutGlobalDefaults=function(V,H,q){function K(le,ge){return n.coerce(V,H,p.layoutAttributes,le,ge)}var Y=V.template;n.isPlainObject(Y)&&(H.template=Y,H._template=Y.layout,H._dataTemplate=Y.data),K("autotypenumbers");var te=n.coerceFont(K,"font");n.coerceFont(K,"title.font",n.extendFlat({},te,{size:Math.round(1.4*te.size)})),K("title.text",H._dfltTitle.plot),K("title.xref"),K("title.yref"),K("title.x"),K("title.y"),K("title.xanchor"),K("title.yanchor"),K("title.pad.t"),K("title.pad.r"),K("title.pad.b"),K("title.pad.l"),K("uniformtext.mode")&&K("uniformtext.minsize"),K("autosize",!(V.width&&V.height)),K("width"),K("height"),K("margin.l"),K("margin.r"),K("margin.t"),K("margin.b"),K("margin.pad"),K("margin.autoexpand"),V.width&&V.height&&p.sanitizeMargins(H),e.getComponentMethod("grid","sizeDefaults")(V,H),K("paper_bgcolor"),K("separators",q.decimal+q.thousands),K("hidesources"),K("colorway"),K("datarevision");var re=K("uirevision");K("editrevision",re),K("selectionrevision",re),e.getComponentMethod("modebar","supplyLayoutDefaults")(V,H),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(V,H,K),K("meta"),n.isPlainObject(V.transition)&&(K("transition.duration"),K("transition.easing"),K("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(V,H,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(V,H,K)},p.plotAutoSize=function(H,q,K){var J,j,Y=H._context||{},te=Y.frameMargins,re=n.isPlotDiv(H);if(re&&H.emit("plotly_autosize"),Y.fillFrame)J=window.innerWidth,j=window.innerHeight,document.body.style.overflow="hidden";else{var le=re?window.getComputedStyle(H):{};if(J=O(le.width)||O(le.maxWidth)||K.width,j=O(le.height)||O(le.maxHeight)||K.height,E(te)&&te>0){var ge=1-2*te;J=Math.round(ge*J),j=Math.round(ge*j)}}var pe=p.layoutAttributes.width.min,xe=p.layoutAttributes.height.min;J<pe&&(J=pe),j<xe&&(j=xe);var ke=!q.width&&Math.abs(K.width-J)>1,we=!q.height&&Math.abs(K.height-j)>1;(we||ke)&&(ke&&(K.width=J),we&&(K.height=j)),H._initialAutoSize||(H._initialAutoSize={width:J,height:j}),p.sanitizeMargins(K)},p.supplyLayoutModuleDefaults=function(V,H,q,K){var J,j,re,Y=e.componentsRegistry,te=H._basePlotModules,le=e.subplotsRegistry.cartesian;for(J in Y)(re=Y[J]).includeBasePlot&&re.includeBasePlot(V,H);for(var ge in te.length||te.push(le),H._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(V,H),le.finalizeSubplots(V,H)),H._subplots)H._subplots[ge].sort(n.subplotSort);for(j=0;j<te.length;j++)(re=te[j]).supplyLayoutDefaults&&re.supplyLayoutDefaults(V,H,q);var pe=H._modules;for(j=0;j<pe.length;j++)(re=pe[j]).supplyLayoutDefaults&&re.supplyLayoutDefaults(V,H,q);var xe=H._transformModules;for(j=0;j<xe.length;j++)(re=xe[j]).supplyLayoutDefaults&&re.supplyLayoutDefaults(V,H,q,K);for(J in Y)(re=Y[J]).supplyLayoutDefaults&&re.supplyLayoutDefaults(V,H,q)},p.purge=function(V){var H=V._fullLayout||{};void 0!==H._glcontainer&&(H._glcontainer.selectAll(".gl-canvas").remove(),H._glcontainer.remove(),H._glcanvas=null),H._modeBar&&H._modeBar.destroy(),V._transitionData&&(V._transitionData._interruptCallbacks&&(V._transitionData._interruptCallbacks.length=0),V._transitionData._animationRaf&&window.cancelAnimationFrame(V._transitionData._animationRaf)),n.clearThrottle(),n.clearResponsive(V),delete V.data,delete V.layout,delete V._fullData,delete V._fullLayout,delete V.calcdata,delete V.empty,delete V.fid,delete V.undoqueue,delete V.undonum,delete V.autoplay,delete V.changed,delete V._promises,delete V._redrawTimer,delete V._hmlumcount,delete V._hmpixcount,delete V._transitionData,delete V._transitioning,delete V._initialAutoSize,delete V._transitioningWithDuration,delete V._dragging,delete V._dragged,delete V._dragdata,delete V._hoverdata,delete V._snapshotInProgress,delete V._editing,delete V._mouseDownTime,delete V._legendMouseDownTime,V.removeAllListeners&&V.removeAllListeners()},p.style=function(V){var K,H=V._fullLayout._visibleModules,q=[];for(K=0;K<H.length;K++){var Y=H[K];Y.style&&n.pushUnique(q,Y.style)}for(K=0;K<q.length;K++)q[K](V)},p.sanitizeMargins=function(V){if(V&&V.margin){var J,H=V.width,q=V.height,K=V.margin,te=q-(K.t+K.b);H-(K.l+K.r)<0&&(J=(H-1)/(K.l+K.r),K.l=Math.floor(J*K.l),K.r=Math.floor(J*K.r)),te<0&&(J=(q-1)/(K.t+K.b),K.t=Math.floor(J*K.t),K.b=Math.floor(J*K.b))}},p.clearAutoMarginIds=function(V){V._fullLayout._pushmarginIds={}},p.allowAutoMargin=function(V,H){V._fullLayout._pushmarginIds[H]=1};p.autoMargin=function(V,H,q){var K=V._fullLayout,Y=K.width,te=K.height,J=K.margin,j=n.constrain(Y-J.l-J.r,2,64),re=n.constrain(te-J.t-J.b,2,64),le=Math.max(0,Y-j),ge=Math.max(0,te-re),pe=K._pushmargin,xe=K._pushmarginIds;if(!1!==J.autoexpand){if(q){var ke=q.pad;if(void 0===ke&&(ke=Math.min(12,J.l,J.r,J.t,J.b)),le){var we=(q.l+q.r)/le;we>1&&(q.l/=we,q.r/=we)}if(ge){var de=(q.t+q.b)/ge;de>1&&(q.t/=de,q.b/=de)}pe[H]={l:{val:void 0!==q.xl?q.xl:q.x,size:q.l+ke},r:{val:void 0!==q.xr?q.xr:q.x,size:q.r+ke},b:{val:void 0!==q.yb?q.yb:q.y,size:q.b+ke},t:{val:void 0!==q.yt?q.yt:q.y,size:q.t+ke}},xe[H]=1}else delete pe[H],delete xe[H];if(!K._replotting)return p.doAutoMargin(V)}},p.doAutoMargin=function(V){var H=V._fullLayout,q=H.width,K=H.height;H._size||(H._size={}),I(H);var Y=H._size,te=H.margin,J=n.extendFlat({},Y),j=te.l,re=te.r,le=te.t,ge=te.b,pe=H._pushmargin,xe=H._pushmarginIds;if(!1!==H.margin.autoexpand){for(var ke in pe)xe[ke]||delete pe[ke];for(var we in pe.base={l:{val:0,size:j},r:{val:1,size:re},t:{val:1,size:le},b:{val:0,size:ge}},pe){var de=pe[we].l||{},be=pe[we].b||{},Le=de.val,De=de.size,ye=be.val,Ce=be.size;for(var Fe in pe){if(E(De)&&pe[Fe].r){var Ke=pe[Fe].r.val,Ue=pe[Fe].r.size;if(Ke>Le){var Be=(De*Ke+(Ue-q)*Le)/(Ke-Le),Ie=(Ue*(1-Le)+(De-q)*(1-Ke))/(Ke-Le);Be+Ie>j+re&&(j=Be,re=Ie)}}if(E(Ce)&&pe[Fe].t){var nt=pe[Fe].t.val,gt=pe[Fe].t.size;if(nt>ye){var Nt=(Ce*nt+(gt-K)*ye)/(nt-ye),St=(gt*(1-ye)+(Ce-K)*(1-nt))/(nt-ye);Nt+St>ge+le&&(ge=Nt,le=St)}}}}}var Bt=n.constrain(q-te.l-te.r,2,64),Zt=n.constrain(K-te.t-te.b,2,64),Et=Math.max(0,q-Bt),wt=Math.max(0,K-Zt);if(Et){var at=(j+re)/Et;at>1&&(j/=at,re/=at)}if(wt){var vt=(ge+le)/wt;vt>1&&(ge/=vt,le/=vt)}if(Y.l=Math.round(j),Y.r=Math.round(re),Y.t=Math.round(le),Y.b=Math.round(ge),Y.p=Math.round(te.pad),Y.w=Math.round(q)-Y.l-Y.r,Y.h=Math.round(K)-Y.t-Y.b,!H._replotting&&p.didMarginChange(J,Y)){"_redrawFromAutoMarginCount"in H?H._redrawFromAutoMarginCount++:H._redrawFromAutoMarginCount=1;var Qe=3*(1+Object.keys(xe).length);if(H._redrawFromAutoMarginCount<Qe)return e.call("_doPlot",V);H._size=J,n.warn("Too many auto-margin redraws.")}!function X(V){var H=a.list(V,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(q){for(var K=0;K<H.length;K++){var Y=H[K][q];Y&&Y()}})}(V)};var oe=["l","r","t","b","p","w","h"];function se(V,H,q){var K=!1;var ge=n.syncOrAsync([p.previousPromises,function re(){if(V._transitionData)return V._transitioning=!1,function Y(pe){var xe=Promise.resolve();if(!pe)return xe;for(;pe.length;)xe=xe.then(pe.shift());return xe}(V._transitionData._interruptCallbacks)},q.prepareFn,p.rehover,function J(){return V.emit("plotly_transitioning",[]),new Promise(function(pe){V._transitioning=!0,H.duration>0&&(V._transitioningWithDuration=!0),V._transitionData._interruptCallbacks.push(function(){K=!0}),q.redraw&&V._transitionData._interruptCallbacks.push(function(){return e.call("redraw",V)}),V._transitionData._interruptCallbacks.push(function(){V.emit("plotly_transitioninterrupted",[])});var xe=0,ke=0;function we(){return xe++,function(){ke++,!K&&ke===xe&&function j(pe){if(V._transitionData)return function te(pe){if(pe)for(;pe.length;)pe.shift()}(V._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(q.redraw)return e.call("redraw",V)}).then(function(){V._transitioning=!1,V._transitioningWithDuration=!1,V.emit("plotly_transitioned",[])}).then(pe)}(pe)}}q.runFn(we),setTimeout(we())})}],V);return(!ge||!ge.then)&&(ge=Promise.resolve()),ge.then(function(){return V})}p.didMarginChange=function(V,H){for(var q=0;q<oe.length;q++){var K=oe[q],Y=V[K],te=H[K];if(!E(Y)||Math.abs(te-Y)>1)return!0}return!1},p.graphJson=function(V,H,q,K,Y,te){(Y&&H&&!V._fullData||Y&&!H&&!V._fullLayout)&&p.supplyDefaults(V);var j=Y?V._fullLayout:V.layout,re=(V._transitionData||{})._frames;function le(xe,ke){if("function"==typeof xe)return ke?"_function_":null;if(n.isPlainObject(xe)){var de,we={};return Object.keys(xe).sort().forEach(function(be){if(-1===["_","["].indexOf(be.charAt(0))){if("function"==typeof xe[be])return void(ke&&(we[be]="_function"));if("keepdata"===q){if("src"===be.substr(be.length-3))return}else if("keepstream"===q){if("string"==typeof(de=xe[be+"src"])&&de.indexOf(":")>0&&!n.isPlainObject(xe.stream))return}else if("keepall"!==q&&"string"==typeof(de=xe[be+"src"])&&de.indexOf(":")>0)return;we[be]=le(xe[be],ke)}}),we}return Array.isArray(xe)?xe.map(function(be){return le(be,ke)}):n.isTypedArray(xe)?n.simpleMap(xe,n.identity):n.isJSDate(xe)?n.ms2DateTimeLocal(+xe):xe}var ge={data:((Y?V._fullData:V.data)||[]).map(function(xe){var ke=le(xe);return H&&delete ke.fit,ke})};if(!H&&(ge.layout=le(j),Y)){var pe=j._size;ge.layout.computed={margin:{b:pe.b,l:pe.l,r:pe.r,t:pe.t}}}return re&&(ge.frames=le(re)),te&&(ge.config=le(V._context,!0)),"object"===K?ge:JSON.stringify(ge)},p.modifyFrames=function(V,H){var q,K,Y,te=V._transitionData._frames,J=V._transitionData._frameHash;for(q=0;q<H.length;q++)switch(K=H[q],K.type){case"replace":var j=(te[K.index]||{}).name,re=(Y=K.value).name;te[K.index]=J[re]=Y,re!==j&&(delete J[j],J[re]=Y);break;case"insert":J[(Y=K.value).name]=Y,te.splice(K.index,0,Y);break;case"delete":delete J[(Y=te[K.index]).name],te.splice(K.index,1)}return Promise.resolve()},p.computeFrame=function(V,H){var K,Y,te,J,q=V._transitionData._frameHash;if(!H)throw new Error("computeFrame must be given a string frame name");var j=q[H.toString()];if(!j)return!1;for(var re=[j],le=[j.name];j.baseframe&&(j=q[j.baseframe.toString()])&&-1===le.indexOf(j.name);)re.push(j),le.push(j.name);for(var ge={};j=re.pop();)if(j.layout&&(ge.layout=p.extendLayout(ge.layout,j.layout)),j.data){if(ge.data||(ge.data=[]),!(Y=j.traces))for(Y=[],K=0;K<j.data.length;K++)Y[K]=K;for(ge.traces||(ge.traces=[]),K=0;K<j.data.length;K++)null!=(te=Y[K])&&(-1===(J=ge.traces.indexOf(te))&&(ge.traces[J=ge.data.length]=te),ge.data[J]=p.extendTrace(ge.data[J],j.data[K]))}return ge},p.recomputeFrameHash=function(V){for(var H=V._transitionData._frameHash={},q=V._transitionData._frames,K=0;K<q.length;K++){var Y=q[K];Y&&Y.name&&(H[Y.name]=Y)}},p.extendObjectWithContainers=function(V,H,q){var K,Y,te,J,re,le,ge,pe=n.extendDeepNoArrays({},H||{}),xe=n.expandObjectPaths(pe),ke={};if(q&&q.length)for(te=0;te<q.length;te++)void 0===(Y=(K=n.nestedProperty(xe,q[te])).get())?n.nestedProperty(ke,q[te]).set(null):(K.set(null),n.nestedProperty(ke,q[te]).set(Y));if(V=n.extendDeepNoArrays(V||{},xe),q&&q.length)for(te=0;te<q.length;te++)if(le=n.nestedProperty(ke,q[te]).get()){for(ge=(re=n.nestedProperty(V,q[te])).get(),Array.isArray(ge)||re.set(ge=[]),J=0;J<le.length;J++){var we=le[J];ge[J]=null===we?null:p.extendObjectWithContainers(ge[J],we)}re.set(ge)}return V},p.dataArrayContainers=["transforms","dimensions"],p.layoutArrayContainers=e.layoutArrayContainers,p.extendTrace=function(V,H){return p.extendObjectWithContainers(V,H,p.dataArrayContainers)},p.extendLayout=function(V,H){return p.extendObjectWithContainers(V,H,p.layoutArrayContainers)},p.transition=function(V,H,q,K,Y,te){var J={redraw:Y.redraw},j={},re=[];return J.prepareFn=function(){for(var le=Array.isArray(H)?H.length:0,ge=K.slice(0,le),pe=0;pe<ge.length;pe++){var xe=ge[pe],we=V._fullData[xe]._module;if(we){if(we.animatable){var de=we.basePlotModule.name;j[de]||(j[de]=[]),j[de].push(xe)}V.data[ge[pe]]=p.extendTrace(V.data[ge[pe]],H[pe])}}var be=n.expandObjectPaths(n.extendDeepNoArrays({},q)),Le=/^[xy]axis[0-9]*$/;for(var De in be)!Le.test(De)||delete be[De].range;p.extendLayout(V.layout,be),delete V.calcdata,p.supplyDefaults(V),p.doCalcdata(V);var ye=n.expandObjectPaths(q);if(ye){var Ce=V._fullLayout._plots;for(var Fe in Ce){var Ke=Ce[Fe],Ue=Ke.xaxis,Be=Ke.yaxis,Ie=Ue.range.slice(),nt=Be.range.slice(),gt=null,Nt=null,St=null,Bt=null;Array.isArray(ye[Ue._name+".range"])?gt=ye[Ue._name+".range"].slice():Array.isArray((ye[Ue._name]||{}).range)&&(gt=ye[Ue._name].range.slice()),Array.isArray(ye[Be._name+".range"])?Nt=ye[Be._name+".range"].slice():Array.isArray((ye[Be._name]||{}).range)&&(Nt=ye[Be._name].range.slice()),Ie&&gt&&(Ue.r2l(Ie[0])!==Ue.r2l(gt[0])||Ue.r2l(Ie[1])!==Ue.r2l(gt[1]))&&(St={xr0:Ie,xr1:gt}),nt&&Nt&&(Be.r2l(nt[0])!==Be.r2l(Nt[0])||Be.r2l(nt[1])!==Be.r2l(Nt[1]))&&(Bt={yr0:nt,yr1:Nt}),(St||Bt)&&re.push(n.extendFlat({plotinfo:Ke},St,Bt))}}return Promise.resolve()},J.runFn=function(le){var ge,ke,pe=V._fullLayout._basePlotModules,xe=re.length;if(q)for(ke=0;ke<pe.length;ke++)pe[ke].transitionAxes&&pe[ke].transitionAxes(V,re,te,le);for(var we in xe?((ge=n.extendFlat({},te)).duration=0,delete j.cartesian):ge=te,j){var de=j[we];V._fullData[de[0]]._module.basePlotModule.plot(V,de,ge,le)}},se(V,te,J)},p.transitionFromReact=function(V,H,q,K){var Y=V._fullLayout,te=Y.transition,J={},j=[];return J.prepareFn=function(){var re=Y._plots;for(var le in J.redraw=!1,"some"===H.anim&&(J.redraw=!0),"some"===q.anim&&(J.redraw=!0),re){var ge=re[le],pe=ge.xaxis,xe=ge.yaxis,ke=K[pe._name].range.slice(),we=K[xe._name].range.slice(),de=pe.range.slice(),be=xe.range.slice();pe.setScale(),xe.setScale();var Le=null,De=null;(pe.r2l(ke[0])!==pe.r2l(de[0])||pe.r2l(ke[1])!==pe.r2l(de[1]))&&(Le={xr0:ke,xr1:de}),(xe.r2l(we[0])!==xe.r2l(be[0])||xe.r2l(we[1])!==xe.r2l(be[1]))&&(De={yr0:we,yr1:be}),(Le||De)&&j.push(n.extendFlat({plotinfo:ge},Le,De))}return Promise.resolve()},J.runFn=function(re){for(var xe,ke,we,le=V._fullData,pe=V._fullLayout._basePlotModules,de=[],be=0;be<le.length;be++)de.push(be);function Le(){if(V._fullLayout)for(var ye=0;ye<pe.length;ye++)pe[ye].transitionAxes&&pe[ye].transitionAxes(V,j,xe,re)}function De(){if(V._fullLayout)for(var ye=0;ye<pe.length;ye++)pe[ye].plot(V,we,ke,re)}j.length&&H.anim?"traces first"===te.ordering?(xe=n.extendFlat({},te,{duration:0}),we=de,ke=te,setTimeout(Le,te.duration),De()):(xe=te,we=null,ke=n.extendFlat({},te,{duration:0}),setTimeout(De,xe.duration),Le()):j.length?(xe=te,Le()):H.anim&&(we=de,ke=te,De())},se(V,te,J)},p.doCalcdata=function(V,H){var te,J,j,re,q=a.list(V),K=V._fullData,Y=V._fullLayout,le=new Array(K.length),ge=(V.calcdata||[]).slice();for(V.calcdata=le,Y._numBoxes=0,Y._numViolins=0,Y._violinScaleGroupStats={},V._hmpixcount=0,V._hmlumcount=0,Y._piecolormap={},Y._sunburstcolormap={},Y._treemapcolormap={},Y._iciclecolormap={},Y._funnelareacolormap={},j=0;j<K.length;j++)if(Array.isArray(H)&&-1===H.indexOf(j)){le[j]=ge[j];continue}for(j=0;j<K.length;j++)(te=K[j])._arrayAttrs=c.findArrayAttributes(te),te._extremes={};var pe=Y._subplots.polar||[];for(j=0;j<pe.length;j++)q.push(Y[pe[j]].radialaxis,Y[pe[j]].angularaxis);for(var xe in Y._colorAxes){var ke=Y[xe];!1!==ke.cauto&&(delete ke.cmin,delete ke.cmax)}var we=!1;function de(De){if(J=(te=K[De])._module,!0===te.visible&&te.transforms){if(J&&J.calc){var ye=J.calc(V,te);ye[0]&&ye[0].t&&ye[0].t._scene&&delete ye[0].t._scene.dirty}for(re=0;re<te.transforms.length;re++){var Ce=te.transforms[re];(J=w[Ce.type])&&J.calcTransform&&(te._hasCalcTransform=!0,we=!0,J.calcTransform(V,te,Ce))}}}function be(De,ye){if(!!(J=(te=K[De])._module).isContainer===ye){var Ce=[];if(!0===te.visible&&0!==te._length){delete te._indexToPoints;var Fe=te.transforms||[];for(re=Fe.length-1;re>=0;re--)if(Fe[re].enabled){te._indexToPoints=Fe[re]._indexToPoints;break}J&&J.calc&&(Ce=J.calc(V,te))}(!Array.isArray(Ce)||!Ce[0])&&(Ce=[{x:i,y:i}]),Ce[0].t||(Ce[0].t={}),Ce[0].trace=te,le[De]=Ce}}for(G(q,K,Y),j=0;j<K.length;j++)be(j,!0);for(j=0;j<K.length;j++)de(j);for(we&&G(q,K,Y),j=0;j<K.length;j++)be(j,!0);for(j=0;j<K.length;j++)be(j,!1);$(V);var Le=function W(V,H){var K,Y,te,J,j,q=[];function re(Et,wt,at){var vt=wt._id.charAt(0);if("histogram2dcontour"===Et){var Qe=wt._counterAxes[0],Pe=a.getFromId(H,Qe),Ze="x"===vt||"x"===Qe&&"category"===Pe.type,Xe="y"===vt||"y"===Qe&&"category"===Pe.type;return function(rt,kt){return 0===rt||0===kt||Ze&&rt===at[kt].length-1||Xe&&kt===at.length-1?-1:("y"===vt?kt:rt)-1}}return function(rt,kt){return"y"===vt?kt:rt}}var le={min:function(Et){return n.aggNums(Math.min,null,Et)},max:function(Et){return n.aggNums(Math.max,null,Et)},sum:function(Et){return n.aggNums(function(wt,at){return wt+at},null,Et)},total:function(Et){return n.aggNums(function(wt,at){return wt+at},null,Et)},mean:function(Et){return n.mean(Et)},median:function(Et){return n.median(Et)}};for(K=0;K<V.length;K++){var ge=V[K];if("category"===ge.type){var pe=ge.categoryorder.match(ne);if(pe){var xe=pe[1],ke=pe[2],we=ge._id.charAt(0),de="x"===we,be=[];for(Y=0;Y<ge._categories.length;Y++)be.push([ge._categories[Y],[]]);for(Y=0;Y<ge._traceIndices.length;Y++){var Le=ge._traceIndices[Y],De=H._fullData[Le];if(!0===De.visible){var ye=De.type;e.traceIs(De,"histogram")&&(delete De._xautoBinFinished,delete De._yautoBinFinished);var Ce="splom"===ye,Fe="scattergl"===ye,Ke=H.calcdata[Le];for(te=0;te<Ke.length;te++){var Be,Ie,Ue=Ke[te];if(Ce){var nt=De._axesDim[ge._id];if(!de){var gt=De._diag[nt][0];gt&&(ge=H._fullLayout[a.id2name(gt)])}var Nt=Ue.trace.dimensions[nt].values;for(J=0;J<Nt.length;J++)for(Be=ge._categoriesMap[Nt[J]],j=0;j<Ue.trace.dimensions.length;j++)j!==nt&&be[Be][1].push(Ue.trace.dimensions[j].values[J])}else if(Fe){for(J=0;J<Ue.t.x.length;J++)de?(Be=Ue.t.x[J],Ie=Ue.t.y[J]):(Be=Ue.t.y[J],Ie=Ue.t.x[J]),be[Be][1].push(Ie);Ue.t&&Ue.t._scene&&delete Ue.t._scene.dirty}else if(Ue.hasOwnProperty("z")){var Bt=re(De.type,ge,Ie=Ue.z);for(J=0;J<Ie.length;J++)for(j=0;j<Ie[J].length;j++)(Be=Bt(j,J))+1&&be[Be][1].push(Ie[J][j])}else for(void 0===(Be=Ue.p)&&(Be=Ue[we]),void 0===(Ie=Ue.s)&&(Ie=Ue.v),void 0===Ie&&(Ie=de?Ue.y:Ue.x),Array.isArray(Ie)||(Ie=void 0===Ie?[]:[Ie]),J=0;J<Ie.length;J++)be[Be][1].push(Ie[J])}}}ge._categoriesValue=be;var Zt=[];for(Y=0;Y<be.length;Y++)Zt.push([be[Y][0],le[xe](be[Y][1])]);Zt.sort(function(Et,wt){return Et[1]-wt[1]}),ge._categoriesAggregatedValue=Zt,ge._initialCategories=Zt.map(function(Et){return Et[0]}),"descending"===ke&&ge._initialCategories.reverse(),q=q.concat(ge.sortByInitialCategories())}}}return q}(q,V);if(Le.length){for(Y._numBoxes=0,Y._numViolins=0,j=0;j<Le.length;j++)be(Le[j],!0);for(j=0;j<Le.length;j++)be(Le[j],!1);$(V)}e.getComponentMethod("fx","calc")(V),e.getComponentMethod("errorbars","calc")(V)};var ne=/(total|sum|min|max|mean|median) (ascending|descending)/;function G(V,H,q){var K={};function Y(re){re.clearCalc(),"multicategory"===re.type&&re.setupMultiCategory(H),K[re._id]=1}n.simpleMap(V,Y);for(var te=q._axisMatchGroups||[],J=0;J<te.length;J++)for(var j in te[J])K[j]||Y(q[a.id2name(j)])}function $(V){var Y,te,J,H=V._fullLayout,q=H._visibleModules,K={};for(te=0;te<q.length;te++){var j=q[te],re=j.crossTraceCalc;if(re){var le=j.basePlotModule.name;K[le]?n.pushUnique(K[le],re):K[le]=[re]}}for(J in K){var ge=K[J],pe=H._subplots[J];if(Array.isArray(pe))for(Y=0;Y<pe.length;Y++){var xe=pe[Y],ke="cartesian"===J?H._plots[xe]:H[xe];for(te=0;te<ge.length;te++)ge[te](V,ke,xe)}else for(te=0;te<ge.length;te++)ge[te](V)}}p.rehover=function(V){V._fullLayout._rehover&&V._fullLayout._rehover()},p.redrag=function(V){V._fullLayout._redrag&&V._fullLayout._redrag()},p.generalUpdatePerTraceModule=function(V,H,q,K){var J,Y=H.traceHash,te={};for(J=0;J<q.length;J++){var j=q[J],re=j[0].trace;re.visible&&(te[re.type]=te[re.type]||[],te[re.type].push(j))}for(var le in Y)if(!te[le]){var ge=Y[le][0];ge[0].trace.visible=!1,te[le]=[ge]}for(var xe in te){var ke=te[xe];ke[0][0].trace._module.plot(V,H,n.filterVisible(ke),K)}H.traceHash=te},p.plotBasePlot=function(V,H,q,K,Y){var te=e.getModule(V),J=b(H.calcdata,te)[0];te.plot(H,J,K,Y)},p.cleanBasePlot=function(V,H,q,K,Y){var te=Y._has&&Y._has(V),J=q._has&&q._has(V);te&&!J&&Y["_"+V+"layer"].selectAll("g.trace").remove()}},{"../components/color":366,"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plot_api/plot_template":543,"../plots/get_data":593,"../registry":638,"./animation_attributes":548,"./attributes":550,"./cartesian/axis_ids":558,"./cartesian/handle_outline":565,"./command":583,"./font_attributes":585,"./frame_attributes":586,"./layout_attributes":610,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],620:[function(v,ie,ae){"use strict";ie.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],621:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../lib/polygon").tester,m=_.findIndexOfMin,E=_.isAngleInsideSector,e=_.angleDelta,c=_.angleDist;function n(w,l,y,A){var T,M,f=A[0],u=A[1],h=b(Math.sin(l)-Math.sin(w)),o=b(Math.cos(l)-Math.cos(w)),C=Math.tan(y),R=b(1/C),z=h/o,O=u-z*f;return R?h&&o?M=C*(T=O/(C-z)):o?(T=u*R,M=u):(T=f,M=f*C):h&&o?(T=0,M=O):o?(T=0,M=u):T=M=NaN,[T,M]}function r(w,l,y,A){return _.isFullCircle([l,y])?function i(w,l){var T,y=l.length,A=new Array(y+1);for(T=0;T<y;T++){var M=l[T];A[T]=[w*Math.cos(M),w*Math.sin(M)]}return A[T]=A[0].slice(),A}(w,A):function a(w,l,y,A){var f,u,T=A.length,M=[];function h(N){return[w*Math.cos(N),w*Math.sin(N)]}function o(N,U,X){return n(N,U,X,h(N))}function C(N){return _.mod(N,T)}function R(N){return E(N,[l,y])}var z=m(A,function(N){return R(N)?c(N,l):1/0}),O=o(A[z],A[C(z-1)],l);for(M.push(O),f=z,u=0;u<T;f++,u++){var I=A[C(f)];if(!R(I))break;M.push(h(I))}var F=m(A,function(N){return R(N)?c(N,y):1/0}),D=o(A[F],A[C(F+1)],y);return M.push(D),M.push([0,0]),M.push(M[0].slice()),M}(w,l,y,A)}function b(w){return Math.abs(w)>1e-10?w:0}function x(w,l,y){l=l||0,y=y||0;for(var A=w.length,T=new Array(A),M=0;M<A;M++){var f=w[M];T[M]=[l+f[0],y-f[1]]}return T}ie.exports={isPtInsidePolygon:function d(w,l,y,A,T){if(!E(l,A))return!1;var M,f;y[0]<y[1]?(M=y[0],f=y[1]):(M=y[1],f=y[0]);var u=k(r(M,A[0],A[1],T)),h=k(r(f,A[0],A[1],T)),o=[w*Math.cos(l),w*Math.sin(l)];return h.contains(o)&&!u.contains(o)},findPolygonOffset:function g(w,l,y,A){for(var T=1/0,M=1/0,f=r(w,l,y,A),u=0;u<f.length;u++){var h=f[u];T=Math.min(T,h[0]),M=Math.min(M,-h[1])}return[T,M]},findEnclosingVertexAngles:function s(w,l){var A=m(l,function(M){var f=e(M,w);return f>0?f:1/0}),T=_.mod(A+1,l.length);return[l[A],l[T]]},findIntersectionXY:n,findXYatLength:function t(w,l,y,A){var T=-l*y,M=l*l+1,f=2*(l*T-y),h=Math.sqrt(f*f-4*M*(T*T+y*y-w*w)),o=(-f+h)/(2*M),C=(-f-h)/(2*M);return[[o,l*o+T+A],[C,l*C+T+A]]},clampTiny:b,pathPolygon:function S(w,l,y,A,T,M){return"M"+x(r(w,l,y,A),T,M).join("L")},pathPolygonAnnulus:function p(w,l,y,A,T,M,f){var u,h;w<l?(u=w,h=l):(u=l,h=w);var o=x(r(u,y,A,T),M,f);return"M"+x(r(h,y,A,T),M,f).reverse().join("L")+"M"+o.join("L")}}},{"../../lib":503,"../../lib/polygon":515}],622:[function(v,ie,ae){"use strict";var _=v("../get_data").getSubplotCalcData,k=v("../../lib").counterRegex,m=v("./polar"),E=v("./constants"),e=E.attr,c=E.name,d=k(c),n={};n[e]={valType:"subplotid",dflt:c,editType:"calc"},ie.exports={attr:e,name:c,idRoot:c,idRegex:d,attrRegex:d,attributes:n,layoutAttributes:v("./layout_attributes"),supplyLayoutDefaults:v("./layout_defaults"),plot:function t(a){for(var r=a._fullLayout,g=a.calcdata,s=r._subplots[c],b=0;b<s.length;b++){var x=s[b],S=_(g,c,x),p=r[x]._subplot;p||(p=m(a,x),r[x]._subplot=p),p.plot(S,r,a._promises)}},clean:function i(a,r,g,s){for(var b=s._subplots[c]||[],x=s._has&&s._has("gl"),S=r._has&&r._has("gl"),p=x&&!S,w=0;w<b.length;w++){var l=b[w],y=s[l]._subplot;if(!r[l]&&y)for(var A in y.framework.remove(),y.layers["radial-axis-title"].remove(),y.clipPaths)y.clipPaths[A].remove();p&&y._scene&&(y._scene.destroy(),y._scene=null)}},toSVG:v("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"./constants":620,"./layout_attributes":623,"./layout_defaults":624,"./polar":625}],623:[function(v,ie,ae){"use strict";var _=v("../../components/color/attributes"),k=v("../cartesian/layout_attributes"),m=v("../domain").attributes,E=v("../../lib").extendFlat,e=v("../../plot_api/edit_types").overrideAll,c=e({color:k.color,showline:E({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:E({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),d=e({tickmode:k.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,ticklabelstep:k.ticklabelstep,showticklabels:k.showticklabels,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickfont:k.tickfont,tickangle:k.tickangle,tickformat:k.tickformat,tickformatstops:k.tickformatstops,layer:k.layer},"plot","from-root"),n={visible:E({},k.visible,{dflt:!0}),type:E({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorange:E({},k.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:E({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:k.categoryorder,categoryarray:k.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:E({},k.title.text,{editType:"plot",dflt:""}),font:E({},k.title.font,{editType:"plot"}),editType:"plot"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}};E(n,c,d);var t={visible:E({},k.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:k.autotypenumbers,categoryorder:k.categoryorder,categoryarray:k.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};E(t,c,d),ie.exports={domain:m({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:_.background},radialaxis:n,angularaxis:t,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],624:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../components/color"),m=v("../../plot_api/plot_template"),E=v("../subplot_defaults"),e=v("../get_data").getSubplotData,c=v("../cartesian/tick_value_defaults"),d=v("../cartesian/tick_mark_defaults"),n=v("../cartesian/tick_label_defaults"),t=v("../cartesian/prefix_suffix_defaults"),i=v("../cartesian/category_order_defaults"),a=v("../cartesian/line_grid_defaults"),r=v("../cartesian/axis_autotype"),g=v("./layout_attributes"),s=v("./set_convert"),b=v("./constants"),x=b.axisNames;function S(w,l,y,A){var T=y("bgcolor");A.bgColor=k.combine(T,A.paper_bgcolor);var M=y("sector");y("hole");var h,f=e(A.fullData,b.name,A.id),u=A.layoutOut;function o(G,$){return y(h+"."+G,$)}for(var C=0;C<x.length;C++){_.isPlainObject(w[h=x[C]])||(w[h]={});var R=w[h],z=m.newContainer(l,h);z._id=z._name=h,z._attr=A.id+"."+h,z._traceIndices=f.map(function(G){return G._expandedIndex});var O=b.axisName2dataArray[h],I=p(R,z,o,f,O,A);i(R,z,o,{axData:f,dataAttr:O});var F=o("visible");switch(s(z,l,u),o("uirevision",l.uirevision),z._m=1,h){case"radialaxis":var D=o("autorange",!z.isValidRange(R.range));R.autorange=D,D&&("linear"===I||"-"===I)&&o("rangemode"),"reversed"===D&&(z._m=-1),o("range"),z.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===I){_.log("Polar plots do not support date angular axes yet.");for(var N=0;N<f.length;N++)f[N].visible=!1;I=R.type=z.type="linear"}o("linear"===I?"thetaunit":"period");var U=o("direction");o("rotation",{counterclockwise:0,clockwise:90}[U])}if(t(R,z,o,z.type,{tickSuffixDflt:"degrees"===z.thetaunit?"\xb0":void 0}),F){var X,oe,se,ne,W=A.font||{};oe=(X=o("color"))===R.color?X:W.color,se=W.size,ne=W.family,c(R,z,o,z.type),n(R,z,o,z.type,{font:{color:oe,size:se,family:ne}}),d(R,z,o,{outerTicks:!0}),a(R,z,o,{dfltColor:X,bgColor:A.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:g[h]}),o("layer"),"radialaxis"===h&&(o("side"),o("angle",M[0]),o("title.text"),_.coerceFont(o,"title.font",{color:oe,size:_.bigFont(se),family:ne}))}"category"!==I&&o("hoverformat"),z._input=R}"category"===l.angularaxis.type&&y("gridshape")}function p(w,l,y,A,T,M){var f=y("autotypenumbers",M.autotypenumbersDflt);if("-"===y("type")){for(var h,o=0;o<A.length;o++)if(A[o].visible){h=A[o];break}h&&h[T]&&(l.type=r(h[T],"gregorian",{noMultiCategory:!0,autotypenumbers:f})),"-"===l.type?l.type="linear":w.type=l.type}return l.type}ie.exports=function(l,y,A){E(l,y,A,{type:b.name,attributes:g,handleDefaults:S,font:y.font,autotypenumbersDflt:y.autotypenumbers,paper_bgcolor:y.paper_bgcolor,fullData:A,layoutOut:y})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/axis_autotype":555,"../cartesian/category_order_defaults":559,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../get_data":593,"../subplot_defaults":632,"./constants":620,"./layout_attributes":623,"./set_convert":626}],625:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("tinycolor2"),m=v("../../registry"),E=v("../../lib"),e=E.strRotate,c=E.strTranslate,d=v("../../components/color"),n=v("../../components/drawing"),t=v("../plots"),i=v("../../plots/cartesian/axes"),a=v("../cartesian/set_convert"),r=v("./set_convert"),g=v("../cartesian/autorange").doAutoRange,s=v("../cartesian/dragbox"),b=v("../../components/dragelement"),x=v("../../components/fx"),S=v("../../components/titles"),p=v("../cartesian/select").prepSelect,w=v("../cartesian/select").selectOnClick,l=v("../cartesian/select").clearSelect,y=v("../../lib/setcursor"),A=v("../../lib/clear_gl_canvases"),T=v("../../plot_api/subroutines").redrawReglTraces,M=v("../../constants/alignment").MID_SHIFT,f=v("./constants"),u=v("./helpers"),h=v("../smith/helpers"),o=h.smith,C=h.reactanceArc,R=h.resistanceArc,z=h.smithTransform,O=E._,I=E.mod,F=E.deg2rad,D=E.rad2deg;function N(W,G,$){this.isSmith=$||!1,this.id=G,this.gd=W,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var V=W._fullLayout;this.clipIds.forTraces="clip"+V._uid+G+"-for-traces",this.clipPaths.forTraces=V._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=V["_"+($?"smith":"polar")+"layer"].append("g").attr("class",G),this.getHole=function(q){return this.isSmith?0:q.hole},this.getSector=function(q){return this.isSmith?[0,360]:q.sector},this.getRadial=function(q){return this.isSmith?q.realaxis:q.radialaxis},this.getAngular=function(q){return this.isSmith?q.imaginaryaxis:q.angularaxis},$||(this.radialTickLayout=null,this.angularTickLayout=null)}var U=N.prototype;function X(W){var G=W.ticks+String(W.ticklen)+String(W.showticklabels);return"side"in W&&(G+=W.side),G}function se(W,G){return G[E.findIndexOfMin(G,function(H){return E.angleDist(W,H)})]}function ne(W,G,$){return G?(W.attr("display",null),W.attr($)):W&&W.attr("display","none"),W}ie.exports=function(G,$,V){return new N(G,$,V)},U.plot=function(W,G){for(var $=this,V=G[$.id],H=!1,q=0;q<W.length;q++)if(!1===W[q][0].trace.cliponaxis){H=!0;break}$._hasClipOnAxisFalse=H,$.updateLayers(G,V),$.updateLayout(G,V),t.generalUpdatePerTraceModule($.gd,$,W,V),$.updateFx(G,V),$.isSmith&&(delete V.realaxis.range,delete V.imaginaryaxis.range)},U.updateLayers=function(W,G){var $=this,V=$.isSmith,H=$.layers,q=$.getRadial(G),K=$.getAngular(G),Y=f.layerNames,te=Y.indexOf("frontplot"),J=Y.slice(0,te),j="below traces"===K.layer,re="below traces"===q.layer;j&&J.push("angular-line"),re&&J.push("radial-line"),j&&J.push("angular-axis"),re&&J.push("radial-axis"),J.push("frontplot"),j||J.push("angular-line"),re||J.push("radial-line"),j||J.push("angular-axis"),re||J.push("radial-axis");var le=(V?"smith":"polar")+"sublayer",ge=$.framework.selectAll("."+le).data(J,String);ge.enter().append("g").attr("class",function(pe){return le+" "+pe}).each(function(pe){var xe=H[pe]=_.select(this);switch(pe){case"frontplot":V||xe.append("g").classed("barlayer",!0),xe.append("g").classed("scatterlayer",!0);break;case"backplot":xe.append("g").classed("maplayer",!0);break;case"plotbg":H.bg=xe.append("path");break;case"radial-grid":case"angular-grid":xe.style("fill","none");break;case"radial-line":xe.append("line").style("fill","none");break;case"angular-line":xe.append("path").style("fill","none")}}),ge.order()},U.updateLayout=function(W,G){var $=this,V=$.layers,H=W._size,q=$.getRadial(G),K=$.getAngular(G),Y=G.domain.x,te=G.domain.y;$.xOffset=H.l+H.w*Y[0],$.yOffset=H.t+H.h*(1-te[1]);var J=$.xLength=H.w*(Y[1]-Y[0]),j=$.yLength=H.h*(te[1]-te[0]),re=$.getSector(G);$.sectorInRad=re.map(F);var we,de,be,Le,De,le=$.sectorBBox=function oe(W){var ge,G=W[0],V=W[1]-G,H=I(G,360),q=H+V,K=Math.cos(F(H)),Y=Math.sin(F(H)),te=Math.cos(F(q)),J=Math.sin(F(q));return ge=H<=90&&q>=90||H>90&&q>=450?1:Y<=0&&J<=0?0:Math.max(Y,J),[H<=180&&q>=180||H>180&&q>=540?-1:K>=0&&te>=0?0:Math.min(K,te),H<=270&&q>=270||H>270&&q>=630?-1:Y>=0&&J>=0?0:Math.min(Y,J),q>=360?1:K<=0&&te<=0?0:Math.max(K,te),ge]}(re),ge=le[2]-le[0],xe=j/J,ke=Math.abs((le[3]-le[1])/ge);xe>ke?(we=J,be=[Y[0],Y[1]],Le=[te[0]+(De=(j-(de=J*ke))/H.h/2),te[1]-De]):(de=j,be=[Y[0]+(De=(J-(we=j/ke))/H.w/2),Y[1]-De],Le=[te[0],te[1]]),$.xLength2=we,$.yLength2=de,$.xDomain2=be,$.yDomain2=Le;var Nt,ye=$.xOffset2=H.l+H.w*be[0],Ce=$.yOffset2=H.t+H.h*(1-Le[1]),Fe=$.radius=we/ge,Ke=$.innerRadius=$.getHole(G)*Fe,Ue=$.cx=ye-Fe*le[0],Be=$.cy=Ce+Fe*le[3],Ie=$.cxx=Ue-ye,nt=$.cyy=Be-Ce,gt=q.side;"counterclockwise"===gt?(Nt=gt,gt="top"):"clockwise"===gt&&(Nt=gt,gt="bottom"),$.radialAxis=$.mockAxis(W,G,q,{_id:"x",side:gt,_trueSide:Nt,domain:[Ke/H.w,Fe/H.w]}),$.angularAxis=$.mockAxis(W,G,K,{side:"right",domain:[0,Math.PI],autorange:!1}),$.doAutoRange(W,G),$.updateAngularAxis(W,G),$.updateRadialAxis(W,G),$.updateRadialAxisTitle(W,G),$.xaxis=$.mockCartesianAxis(W,G,{_id:"x",domain:be}),$.yaxis=$.mockCartesianAxis(W,G,{_id:"y",domain:Le});var St=$.pathSubplot();$.clipPaths.forTraces.select("path").attr("d",St).attr("transform",c(Ie,nt)),V.frontplot.attr("transform",c(ye,Ce)).call(n.setClipUrl,$._hasClipOnAxisFalse?null:$.clipIds.forTraces,$.gd),V.bg.attr("d",St).attr("transform",c(Ue,Be)).call(d.fill,G.bgcolor)},U.mockAxis=function(W,G,$,V){var H=E.extendFlat({},$,V);return r(H,G,W),H},U.mockCartesianAxis=function(W,G,$){var V=this,H=V.isSmith,q=$._id,K=E.extendFlat({type:"linear"},$);a(K,W);var Y={x:[0,2],y:[1,3]};return K.setRange=function(){var te=V.sectorBBox,J=Y[q],j=V.radialAxis._rl,re=(j[1]-j[0])/(1-V.getHole(G));K.range=[te[J[0]]*re,te[J[1]]*re]},K.isPtWithinRange="x"!==q||H?function(){return!0}:function(te){return V.isPtInside(te)},K.setRange(),K.setScale(),K},U.doAutoRange=function(W,G){var $=this,V=$.gd,H=$.radialAxis,q=$.getRadial(G);g(V,H);var K=H.range;q.range=K.slice(),q._input.range=K.slice(),H._rl=[H.r2l(K[0],null,"gregorian"),H.r2l(K[1],null,"gregorian")]},U.updateRadialAxis=function(W,G){var $=this,V=$.gd,H=$.layers,q=$.radius,K=$.innerRadius,Y=$.cx,te=$.cy,J=$.getRadial(G),j=I($.getSector(G)[0],360),re=$.radialAxis,le=K<q,ge=$.isSmith;ge||($.fillViewInitialKey("radialaxis.angle",J.angle),$.fillViewInitialKey("radialaxis.range",re.range.slice()),re.setGeometry()),"auto"===re.tickangle&&j>90&&j<=270&&(re.tickangle=180);var pe=ge?function(Fe){var Ke=z($,o([Fe.x,0]));return c(Ke[0]-Y,Ke[1]-te)}:function(Fe){return c(re.l2p(Fe.x)+K,0)},xe=ge?function(Fe){return R($,Fe.x,-1/0,1/0)}:function(Fe){return $.pathArc(re.r2p(Fe.x)+K)},ke=X(J);if($.radialTickLayout!==ke&&(H["radial-axis"].selectAll(".xtick").remove(),$.radialTickLayout=ke),le){re.setScale();var we=0,de=ge?(re.tickvals||[]).filter(function(Fe){return Fe>=0}).map(function(Fe){return i.tickText(re,Fe,!0,!1)}):i.calcTicks(re),be=ge?de:i.clipEnds(re,de),Le=i.getTickSigns(re)[2];ge&&(("top"===re.ticks&&"bottom"===re.side||"bottom"===re.ticks&&"top"===re.side)&&(Le=-Le),"top"===re.ticks&&"top"===re.side&&(we=-re.ticklen),"bottom"===re.ticks&&"bottom"===re.side&&(we=re.ticklen)),i.drawTicks(V,re,{vals:de,layer:H["radial-axis"],path:i.makeTickPath(re,0,Le),transFn:pe,crisp:!1}),i.drawGrid(V,re,{vals:be,layer:H["radial-grid"],path:xe,transFn:E.noop,crisp:!1}),i.drawLabels(V,re,{vals:de,layer:H["radial-axis"],transFn:pe,labelFns:i.makeLabelFns(re,we)})}var De=$.radialAxisAngle=$.vangles?D(se(F(J.angle),$.vangles)):J.angle,ye=c(Y,te),Ce=ye+e(-De);ne(H["radial-axis"],le&&(J.showticklabels||J.ticks),{transform:Ce}),ne(H["radial-grid"],le&&J.showgrid,{transform:ge?"":ye}),ne(H["radial-line"].select("line"),le&&J.showline,{x1:ge?-q:K,y1:0,x2:q,y2:0,transform:Ce}).attr("stroke-width",J.linewidth).call(d.stroke,J.linecolor)},U.updateRadialAxisTitle=function(W,G,$){if(!this.isSmith){var V=this,H=V.gd,q=V.radius,K=V.cx,Y=V.cy,te=V.getRadial(G),J=V.id+"title",j=0;if(te.title){var re=n.bBox(V.layers["radial-axis"].node()).height,le=te.title.font.size,ge=te.side;j="top"===ge?le:"counterclockwise"===ge?-(re+.4*le):re+.8*le}var pe=void 0!==$?$:V.radialAxisAngle,xe=F(pe),ke=Math.cos(xe),we=Math.sin(xe),de=K+q/2*ke+j*we,be=Y-q/2*we+j*ke;V.layers["radial-axis-title"]=S.draw(H,J,{propContainer:te,propName:V.id+".radialaxis.title",placeholder:O(H,"Click to enter radial axis title"),attributes:{x:de,y:be,"text-anchor":"middle"},transform:{rotate:-pe}})}},U.updateAngularAxis=function(W,G){var $=this,V=$.gd,H=$.layers,q=$.radius,K=$.innerRadius,Y=$.cx,te=$.cy,J=$.getAngular(G),j=$.angularAxis,re=$.isSmith;re||($.fillViewInitialKey("angularaxis.rotation",J.rotation),j.setGeometry(),j.setScale());var le=re?function(Ke){var Ue=z($,o([0,Ke.x]));return Math.atan2(Ue[0]-Y,Ue[1]-te)-Math.PI/2}:function(Ke){return j.t2g(Ke.x)};"linear"===j.type&&"radians"===j.thetaunit&&(j.tick0=D(j.tick0),j.dtick=D(j.dtick));var ge=function(Ke){return c(Y+q*Math.cos(Ke),te-q*Math.sin(Ke))},pe=re?function(Ke){var Ue=z($,o([0,Ke.x]));return c(Ue[0],Ue[1])}:function(Ke){return ge(le(Ke))},xe=re?function(Ke){var Ue=z($,o([0,Ke.x])),Be=Math.atan2(Ue[0]-Y,Ue[1]-te)-Math.PI/2;return c(Ue[0],Ue[1])+e(-D(Be))}:function(Ke){var Ue=le(Ke);return ge(Ue)+e(-D(Ue))},ke=re?function(Ke){return C($,Ke.x,0,1/0)}:function(Ke){var Ue=le(Ke),Be=Math.cos(Ue),Ie=Math.sin(Ue);return"M"+[Y+K*Be,te-K*Ie]+"L"+[Y+q*Be,te-q*Ie]},de=i.makeLabelFns(j,0).labelStandoff,be={xFn:function(Ke){var Ue=le(Ke);return Math.cos(Ue)*de},yFn:function(Ke){var Ue=le(Ke),Be=Math.sin(Ue)>0?.2:1;return-Math.sin(Ue)*(de+Ke.fontSize*Be)+Math.abs(Math.cos(Ue))*(Ke.fontSize*M)},anchorFn:function(Ke){var Ue=le(Ke),Be=Math.cos(Ue);return Math.abs(Be)<.1?"middle":Be>0?"start":"end"},heightFn:function(Ke,Ue,Be){var Ie=le(Ke);return-.5*(1+Math.sin(Ie))*Be}},Le=X(J);$.angularTickLayout!==Le&&(H["angular-axis"].selectAll("."+j._id+"tick").remove(),$.angularTickLayout=Le);var ye,De=re?[1/0].concat(j.tickvals||[]).map(function(Ke){return i.tickText(j,Ke,!0,!1)}):i.calcTicks(j);if(re&&(De[0].text="\u221e",De[0].fontSize*=1.75),"linear"===G.gridshape?(ye=De.map(le),E.angleDelta(ye[0],ye[1])<0&&(ye=ye.slice().reverse())):ye=null,$.vangles=ye,"category"===j.type&&(De=De.filter(function(Ke){return E.isAngleInsideSector(le(Ke),$.sectorInRad)})),j.visible){var Ce="inside"===j.ticks?-1:1;i.drawTicks(V,j,{vals:De,layer:H["angular-axis"],path:"M"+Ce*((j.linewidth||1)/2)+",0h"+Ce*j.ticklen,transFn:xe,crisp:!1}),i.drawGrid(V,j,{vals:De,layer:H["angular-grid"],path:ke,transFn:E.noop,crisp:!1}),i.drawLabels(V,j,{vals:De,layer:H["angular-axis"],repositionOnUpdate:!0,transFn:pe,labelFns:be})}ne(H["angular-line"].select("path"),J.showline,{d:$.pathSubplot(),transform:c(Y,te)}).attr("stroke-width",J.linewidth).call(d.stroke,J.linecolor)},U.updateFx=function(W,G){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(W),this.updateRadialDrag(W,G,0),this.updateRadialDrag(W,G,1)),this.updateHoverAndMainDrag(W))},U.updateHoverAndMainDrag=function(W){var ye,Ce,G=this,$=G.isSmith,V=G.gd,q=W._zoomlayer,K=f.MINZOOM,Y=f.OFFEDGE,te=G.radius,J=G.innerRadius,j=G.cx,re=G.cy,le=G.cxx,ge=G.cyy,pe=G.sectorInRad,xe=G.vangles,ke=G.radialAxis,we=u.clampTiny,de=u.findXYatLength,be=u.findEnclosingVertexAngles,Le=f.cornerHalfWidth,De=f.cornerLen/2,Fe=s.makeDragger(G.layers,"path","maindrag",!1===W.dragmode?"none":"crosshair");_.select(Fe).attr("d",G.pathSubplot()).attr("transform",c(j,re)),Fe.onmousemove=function(nr){x.hover(V,nr,G.id),V._fullLayout._lasthover=Fe,V._fullLayout._hoversubplot=G.id},Fe.onmouseout=function(nr){V._dragging||b.unhover(V,nr)};var Ue,Be,Ie,nt,gt,Nt,St,Bt,Zt,Ke={element:Fe,gd:V,subplot:G.id,plotinfo:{id:G.id,xaxis:G.xaxis,yaxis:G.yaxis},xaxes:[G.xaxis],yaxes:[G.yaxis]};function Et(nr,rr){return Math.sqrt(nr*nr+rr*rr)}function wt(nr,rr){return Et(nr-le,rr-ge)}function at(nr,rr){return Math.atan2(ge-rr,nr-le)}function vt(nr,rr){return[nr*Math.cos(rr),nr*Math.sin(-rr)]}function Qe(nr,rr){if(0===nr)return G.pathSector(2*Le);var br=De/nr,Hr=rr-br,on=rr+br,jr=Math.max(0,Math.min(nr,te)),et=jr-Le,Yt=jr+Le;return"M"+vt(et,Hr)+"A"+[et,et]+" 0,0,0 "+vt(et,on)+"L"+vt(Yt,on)+"A"+[Yt,Yt]+" 0,0,1 "+vt(Yt,Hr)+"Z"}function Pe(nr,rr,br){if(0===nr)return G.pathSector(2*Le);var Yt,qt,Hr=vt(nr,rr),on=vt(nr,br),jr=we((Hr[0]+on[0])/2),et=we((Hr[1]+on[1])/2);if(jr&&et){var Vt=et/jr,Tr=-1/Vt,tt=de(Le,Vt,jr,et);Yt=de(De,Tr,tt[0][0],tt[0][1]),qt=de(De,Tr,tt[1][0],tt[1][1])}else{var je,ct;et?(je=De,ct=Le):(je=Le,ct=De),Yt=[[jr-je,et-ct],[jr+je,et-ct]],qt=[[jr-je,et+ct],[jr+je,et+ct]]}return"M"+Yt.join("L")+"L"+qt.reverse().join("L")+"Z"}function Xe(nr,rr){return rr=Math.max(Math.min(rr,te),J),nr<Y?nr=0:te-nr<Y?nr=te:rr<Y?rr=0:te-rr<Y&&(rr=te),Math.abs(rr-nr)>K?(nr<rr?(Ie=nr,nt=rr):(Ie=rr,nt=nr),!0):(Ie=null,nt=null,!1)}function rt(nr,rr){rr=rr||"M0,0Z",Bt.attr("d",nr=nr||gt),Zt.attr("d",rr),s.transitionZoombox(Bt,Zt,Nt,St),Nt=!0;var br={};Ut(br),V.emit("plotly_relayouting",br)}function kt(nr,rr){var Yt,qt,br=Ue+(nr*=ye),Hr=Be+(rr*=Ce),on=wt(Ue,Be),jr=Math.min(wt(br,Hr),te),et=at(Ue,Be);Xe(on,jr)&&(Yt=gt+G.pathSector(nt),Ie&&(Yt+=G.pathSector(Ie)),qt=Qe(Ie,et)+Qe(nt,et)),rt(Yt,qt)}function Tt(nr,rr,br,Hr){var on=u.findIntersectionXY(br,Hr,br,[nr-le,ge-rr]);return Et(on[0],on[1])}function Xt(nr,rr){var Tr,tt,br=Ue+nr,Hr=Be+rr,on=at(Ue,Be),jr=at(br,Hr),et=be(on,xe),Yt=be(jr,xe);Xe(Tt(Ue,Be,et[0],et[1]),Math.min(Tt(br,Hr,Yt[0],Yt[1]),te))&&(Tr=gt+G.pathSector(nt),Ie&&(Tr+=G.pathSector(Ie)),tt=[Pe(Ie,et[0],et[1]),Pe(nt,et[0],et[1])].join(" ")),rt(Tr,tt)}function ar(){if(s.removeZoombox(V),null!==Ie&&null!==nt){var nr={};Ut(nr),s.showDoubleClickNotifier(V),m.call("_guiRelayout",V,nr)}}function Ut(nr){var rr=ke._rl,br=(rr[1]-rr[0])/(1-J/te)/te;nr[G.id+".radialaxis.range"]=[rr[0]+(Ie-J)*br,rr[0]+(nt-J)*br]}function Jt(nr,rr){var br=V._fullLayout.clickmode;if(s.removeZoombox(V),2===nr){var Hr={};for(var on in G.viewInitial)Hr[G.id+"."+on]=G.viewInitial[on];V.emit("plotly_doubleclick",null),m.call("_guiRelayout",V,Hr)}br.indexOf("select")>-1&&1===nr&&w(rr,V,[G.xaxis],[G.yaxis],G.id,Ke),br.indexOf("event")>-1&&x.click(V,rr,G.id)}Ke.prepFn=function(nr,rr,br){var Hr=V._fullLayout.dragmode,on=Fe.getBoundingClientRect();V._fullLayout._calcInverseTransform(V),ye=V._fullLayout._invScaleX,Ce=V._fullLayout._invScaleY;var et=E.apply3DTransform(V._fullLayout._invTransform)(rr-on.left,br-on.top);if(Ue=et[0],Be=et[1],xe){var Yt=u.findPolygonOffset(te,pe[0],pe[1],xe);Ue+=le+Yt[0],Be+=ge+Yt[1]}switch(Hr){case"zoom":Ke.clickFn=Jt,$||(Ke.moveFn=xe?Xt:kt,Ke.doneFn=ar,function Ze(){Ie=null,nt=null,gt=G.pathSubplot(),Nt=!1,St=k(V._fullLayout[G.id].bgcolor).getLuminance(),(Bt=s.makeZoombox(q,St,j,re,gt)).attr("fill-rule","evenodd"),Zt=s.makeCorners(q,j,re),l(V)}());break;case"select":case"lasso":p(nr,rr,br,Ke,Hr)}},b.init(Ke)},U.updateRadialDrag=function(W,G,$){var V=this,H=V.gd,q=V.layers,K=V.radius,Y=V.innerRadius,te=V.cx,J=V.cy,j=V.radialAxis,re=f.radialDragBoxSize,le=re/2;if(j.visible){var be,Le,De,ge=F(V.radialAxisAngle),pe=j._rl,xe=pe[0],ke=pe[1],we=pe[$],de=.75*(pe[1]-pe[0])/(1-V.getHole(G))/K;$?(be=te+(K+le)*Math.cos(ge),Le=J-(K+le)*Math.sin(ge),De="radialdrag"):(be=te+(Y-le)*Math.cos(ge),Le=J-(Y-le)*Math.sin(ge),De="radialdrag-inner");var Fe,Ke,Ue,ye=s.makeRectDragger(q,De,"crosshair",-le,-le,re,re),Ce={element:ye,gd:H};!1===W.dragmode&&(Ce.dragmode=!1),ne(_.select(ye),j.visible&&Y<K,{transform:c(be,Le)}),Ce.prepFn=function(){Fe=null,Ke=null,Ue=null,Ce.moveFn=Be,Ce.doneFn=nt,l(H)},Ce.clampFn=function(St,Bt){return Math.sqrt(St*St+Bt*Bt)<f.MINDRAG&&(St=0,Bt=0),[St,Bt]},b.init(Ce)}function Be(St,Bt){if(Fe)Fe(St,Bt);else{var Zt=[St,-Bt],Et=[Math.cos(ge),Math.sin(ge)],wt=Math.abs(E.dot(Zt,Et)/Math.sqrt(E.dot(Zt,Zt)));isNaN(wt)||(Fe=wt<.5?gt:Nt)}var at={};(function Ie(St){null!==Ke?St[V.id+".radialaxis.angle"]=Ke:null!==Ue&&(St[V.id+".radialaxis.range["+$+"]"]=Ue)})(at),H.emit("plotly_relayouting",at)}function nt(){null!==Ke?m.call("_guiRelayout",H,V.id+".radialaxis.angle",Ke):null!==Ue&&m.call("_guiRelayout",H,V.id+".radialaxis.range["+$+"]",Ue)}function gt(St,Bt){if(0!==$){Ke=Math.atan2(J-(Le+Bt),be+St-te),V.vangles&&(Ke=se(Ke,V.vangles)),Ke=D(Ke);var wt=c(te,J)+e(-Ke);q["radial-axis"].attr("transform",wt),q["radial-line"].select("line").attr("transform",wt);var at=V.gd._fullLayout;V.updateRadialAxisTitle(at,at[V.id],Ke)}}function Nt(St,Bt){var Zt=E.dot([St,-Bt],[Math.cos(ge),Math.sin(ge)]);if(Ue=we-de*Zt,de>0==($?Ue>xe:Ue<ke)){var Et=H._fullLayout,wt=Et[V.id];j.range[$]=Ue,j._rl[$]=Ue,V.updateRadialAxis(Et,wt),V.xaxis.setRange(),V.xaxis.setScale(),V.yaxis.setRange(),V.yaxis.setScale();var at=!1;for(var vt in V.traceHash){var Qe=V.traceHash[vt],Pe=E.filterVisible(Qe);Qe[0][0].trace._module.plot(H,V,Pe,wt),m.traceIs(vt,"gl")&&Pe.length&&(at=!0)}at&&(A(H),T(H))}else Ue=null}},U.updateAngularDrag=function(W){var G=this,$=G.gd,V=G.layers,H=G.radius,q=G.angularAxis,K=G.cx,Y=G.cy,te=G.cxx,J=G.cyy,j=f.angularDragBoxSize,re=s.makeDragger(V,"path","angulardrag",!1===W.dragmode?"none":"move"),le={element:re,gd:$};function ge(Ue,Be){return Math.atan2(J+j-Be,Ue-te-j)}!1===W.dragmode?le.dragmode=!1:_.select(re).attr("d",G.pathAnnulus(H,H+j)).attr("transform",c(K,Y)).call(y,"move");var we,de,be,Le,De,ye,pe=V.frontplot.select(".scatterlayer").selectAll(".trace"),xe=pe.selectAll(".point"),ke=pe.selectAll(".textpoint");function Ce(Ue,Be){var Ie=G.gd._fullLayout,nt=Ie[G.id],St=ge(we+Ue*W._invScaleX,de+Be*W._invScaleY),Bt=D(St-ye);if(Le=be+Bt,V.frontplot.attr("transform",c(G.xOffset2,G.yOffset2)+e([-Bt,te,J])),G.vangles){De=G.radialAxisAngle+Bt;var Zt=c(K,Y)+e(-Bt),Et=c(K,Y)+e(-De);V.bg.attr("transform",Zt),V["radial-grid"].attr("transform",Zt),V["radial-axis"].attr("transform",Et),V["radial-line"].select("line").attr("transform",Et),G.updateRadialAxisTitle(Ie,nt,De)}else G.clipPaths.forTraces.select("path").attr("transform",c(te,J)+e(Bt));xe.each(function(){var Xe=_.select(this),rt=n.getTranslate(Xe);Xe.attr("transform",c(rt.x,rt.y)+e([Bt]))}),ke.each(function(){var Xe=_.select(this),rt=Xe.select("text"),kt=n.getTranslate(Xe);Xe.attr("transform",e([Bt,rt.attr("x"),rt.attr("y")])+c(kt.x,kt.y))}),q.rotation=E.modHalf(Le,360),G.updateAngularAxis(Ie,nt),G._hasClipOnAxisFalse&&!E.isFullCircle(G.sectorInRad)&&pe.call(n.hideOutsideRangePoints,G);var wt=!1;for(var at in G.traceHash)if(m.traceIs(at,"gl")){var vt=G.traceHash[at],Qe=E.filterVisible(vt);vt[0][0].trace._module.plot($,G,Qe,nt),Qe.length&&(wt=!0)}wt&&(A($),T($));var Ze={};Fe(Ze),$.emit("plotly_relayouting",Ze)}function Fe(Ue){Ue[G.id+".angularaxis.rotation"]=Le,G.vangles&&(Ue[G.id+".radialaxis.angle"]=De)}function Ke(){ke.select("text").attr("transform",null);var Ue={};Fe(Ue),m.call("_guiRelayout",$,Ue)}le.prepFn=function(Ue,Be,Ie){be=W[G.id].angularaxis.rotation;var gt=re.getBoundingClientRect();we=Be-gt.left,de=Ie-gt.top,$._fullLayout._calcInverseTransform($);var Nt=E.apply3DTransform(W._invTransform)(we,de);ye=ge(we=Nt[0],de=Nt[1]),le.moveFn=Ce,le.doneFn=Ke,l($)},G.vangles&&!E.isFullCircle(G.sectorInRad)&&(le.prepFn=E.noop,y(_.select(re),null)),b.init(le)},U.isPtInside=function(W){if(this.isSmith)return!0;var G=this.sectorInRad,$=this.vangles,V=this.angularAxis.c2g(W.theta),H=this.radialAxis,q=H.c2l(W.r);return($?u.isPtInsidePolygon:E.isPtInsideSector)(q,V,H._rl,G,$)},U.pathArc=function(W){var G=this.sectorInRad,$=this.vangles;return($?u.pathPolygon:E.pathArc)(W,G[0],G[1],$)},U.pathSector=function(W){var G=this.sectorInRad,$=this.vangles;return($?u.pathPolygon:E.pathSector)(W,G[0],G[1],$)},U.pathAnnulus=function(W,G){var $=this.sectorInRad,V=this.vangles;return(V?u.pathPolygonAnnulus:E.pathAnnulus)(W,G,$[0],$[1],V)},U.pathSubplot=function(){var W=this.innerRadius,G=this.radius;return W?this.pathAnnulus(W,G):this.pathSector(G)},U.fillViewInitialKey=function(W,G){W in this.viewInitial||(this.viewInitial[W]=G)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../plot_api/subroutines":544,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/dragbox":563,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"../smith/helpers":628,"./constants":620,"./helpers":621,"./set_convert":626,"@plotly/d3":58,tinycolor2:312}],626:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../cartesian/set_convert"),m=_.deg2rad,E=_.rad2deg;function n(t,i){var a=t.type;if("linear"===a){var r=t.d2c,g=t.c2d;t.d2c=function(s,b){return function c(t,i){return"degrees"===i?m(t):t}(r(s),b)},t.c2d=function(s,b){return g(function d(t,i){return"degrees"===i?E(t):t}(s,b))}}t.makeCalcdata=function(s,b){var p,w,x=s[b],S=s._length,l=function(f){return t.d2c(f,s.thetaunit)};if(x){if(_.isTypedArray(x)&&"linear"===a){if(S===x.length)return x;if(x.subarray)return x.subarray(0,S)}for(p=new Array(S),w=0;w<S;w++)p[w]=l(x[w])}else{var y=b+"0",A="d"+b,T=y in s?l(s[y]):0,M=s[A]?l(s[A]):(t.period||2*Math.PI)/S;for(p=new Array(S),w=0;w<S;w++)p[w]=T+w*M}return p},t.setGeometry=function(){var l,y,A,T,s=i.sector,b=s.map(m),x={clockwise:-1,counterclockwise:1}[t.direction],S=m(t.rotation),p=function(u){return x*u+S},w=function(u){return(u-S)/x};switch(a){case"linear":y=l=_.identity,T=m,A=E,t.range=_.isFullCircle(b)?[s[0],s[0]+360]:b.map(w).map(E);break;case"category":var M=t._categories.length,f=t.period?Math.max(t.period,M):M;0===f&&(f=1),y=T=function(u){return 2*u*Math.PI/f},l=A=function(u){return u*f/Math.PI/2},t.range=[0,f]}t.c2g=function(u){return p(y(u))},t.g2c=function(u){return l(w(u))},t.t2g=function(u){return p(T(u))},t.g2t=function(u){return A(w(u))}}}ie.exports=function(i,a,r){switch(k(i,r),i._id){case"x":case"radialaxis":!function e(t,i){var a=i._subplot;t.setGeometry=function(){var r=t._rl[0],g=t._rl[1],s=a.innerRadius,b=(a.radius-s)/(g-r),x=s/b,S=r>g?function(p){return p<=0}:function(p){return p>=0};t.c2g=function(p){var w=t.c2l(p)-r;return(S(w)?w:0)+x},t.g2c=function(p){return t.l2c(p+r-x)},t.g2p=function(p){return p*b},t.c2p=function(p){return t.g2p(t.c2g(p))}}}(i,a);break;case"angularaxis":n(i,a)}}},{"../../lib":503,"../cartesian/set_convert":576}],627:[function(v,ie,ae){"use strict";ie.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],628:[function(v,ie,ae){"use strict";function _(d){return d<0?-1:d>0?1:0}function k(d){var n=d[0],t=d[1];if(!isFinite(n)||!isFinite(t))return[1,0];var i=(n+1)*(n+1)+t*t;return[(n*n+t*t-1)/i,2*t/i]}function m(d,n){return[n[0]*d.radius+d.cx,-n[1]*d.radius+d.cy]}function E(d,n){return n*d.radius}ie.exports={smith:k,reactanceArc:function e(d,n,t,i){var a=m(d,k([t,n])),r=a[0],g=a[1],s=m(d,k([i,n])),b=s[0],x=s[1];if(0===n)return["M"+r+","+g,"L"+b+","+x].join(" ");var S=E(d,1/Math.abs(n));return["M"+r+","+g,"A"+S+","+S+" 0 0,"+(n<0?1:0)+" "+b+","+x].join(" ")},resistanceArc:function c(d,n,t,i){var a=E(d,1/(n+1)),r=m(d,k([n,t])),g=r[0],s=r[1],b=m(d,k([n,i])),x=b[0],S=b[1];if(_(t)!==_(i)){var p=m(d,k([n,0]));return["M"+g+","+s,"A"+a+","+a+" 0 0,"+(0<t?0:1)+" "+p[0]+","+p[1],"A"+a+","+a+" 0 0,"+(i<0?0:1)+x+","+S].join(" ")}return["M"+g+","+s,"A"+a+","+a+" 0 0,"+(i<t?0:1)+" "+x+","+S].join(" ")},smithTransform:m}},{}],629:[function(v,ie,ae){"use strict";var _=v("../get_data").getSubplotCalcData,k=v("../../lib").counterRegex,m=v("../polar/polar"),E=v("./constants"),e=E.attr,c=E.name,d=k(c),n={};n[e]={valType:"subplotid",dflt:c,editType:"calc"},ie.exports={attr:e,name:c,idRoot:c,idRegex:d,attrRegex:d,attributes:n,layoutAttributes:v("./layout_attributes"),supplyLayoutDefaults:v("./layout_defaults"),plot:function t(a){for(var r=a._fullLayout,g=a.calcdata,s=r._subplots[c],b=0;b<s.length;b++){var x=s[b],S=_(g,c,x),p=r[x]._subplot;p||(p=m(a,x,!0),r[x]._subplot=p),p.plot(S,r,a._promises)}},clean:function i(a,r,g,s){for(var b=s._subplots[c]||[],x=0;x<b.length;x++){var S=b[x],p=s[S]._subplot;if(!r[S]&&p)for(var w in p.framework.remove(),p.clipPaths)p.clipPaths[w].remove()}},toSVG:v("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"../polar/polar":625,"./constants":627,"./layout_attributes":630,"./layout_defaults":631}],630:[function(v,ie,ae){"use strict";var _=v("../../components/color/attributes"),k=v("../cartesian/layout_attributes"),m=v("../domain").attributes,E=v("../../lib").extendFlat,e=v("../../plot_api/edit_types").overrideAll,c=e({color:k.color,showline:E({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:E({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),d=e({ticklen:k.ticklen,tickwidth:E({},k.tickwidth,{dflt:2}),tickcolor:k.tickcolor,showticklabels:k.showticklabels,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,tickfont:k.tickfont,tickformat:k.tickformat,hoverformat:k.hoverformat,layer:k.layer},"plot","from-root"),n=E({visible:E({},k.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:E({},k.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},c,d),t=E({visible:E({},k.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:k.ticks,editType:"calc"},c,d);ie.exports={domain:m({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:_.background},realaxis:n,imaginaryaxis:t,editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],631:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../components/color"),m=v("../../plot_api/plot_template"),E=v("../subplot_defaults"),e=v("../get_data").getSubplotData,c=v("../cartesian/prefix_suffix_defaults"),d=v("../cartesian/tick_label_defaults"),n=v("../cartesian/line_grid_defaults"),t=v("../cartesian/set_convert"),i=v("./layout_attributes"),a=v("./constants"),r=a.axisNames,g=function b(x,S){var p={};return function(w){var l=S?S(w):w;if(l in p)return p[l];var y=x(w);return p[l]=y,y}}(function(x){return x.slice().reverse().map(function(S){return-S}).concat([0]).concat(x)},String);function s(x,S,p,w){var l=p("bgcolor");w.bgColor=k.combine(l,w.paper_bgcolor);var T,y=e(w.fullData,a.name,w.id),A=w.layoutOut;function M(U,X){return p(T+"."+U,X)}for(var f=0;f<r.length;f++){_.isPlainObject(x[T=r[f]])||(x[T]={});var u=x[T],h=m.newContainer(S,T);h._id=h._name=T,h._attr=w.id+"."+T,h._traceIndices=y.map(function(U){return U._expandedIndex});var o=M("visible");if(h.type="linear",t(h,A),c(u,h,M,h.type),o){var C="realaxis"===T;C&&M("side"),C?M("tickvals"):M("tickvals",g(S.realaxis.tickvals||i.realaxis.tickvals.dflt));var z,O,I,F,D=w.font||{};o&&(O=(z=M("color"))===u.color?z:D.color,I=D.size,F=D.family),d(u,h,M,h.type,{noTicklabelstep:!0,noAng:!C,noExp:!0,font:{color:O,size:I,family:F}}),_.coerce2(x,S,i,T+".ticklen"),_.coerce2(x,S,i,T+".tickwidth"),_.coerce2(x,S,i,T+".tickcolor",S.color),M("ticks")||(delete S[T].ticklen,delete S[T].tickwidth,delete S[T].tickcolor),n(u,h,M,{dfltColor:z,bgColor:w.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:i[T]}),M("layer")}M("hoverformat"),delete h.type,h._input=u}}ie.exports=function(S,p,w){E(S,p,w,{noUirevision:!0,type:a.name,attributes:i,handleDefaults:s,font:p.font,paper_bgcolor:p.paper_bgcolor,fullData:w,layoutOut:p})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/set_convert":576,"../cartesian/tick_label_defaults":578,"../get_data":593,"../subplot_defaults":632,"./constants":627,"./layout_attributes":630}],632:[function(v,ie,ae){"use strict";var _=v("../lib"),k=v("../plot_api/plot_template"),m=v("./domain").defaults;ie.exports=function(e,c,d,n){var x,S,i=n.attributes,a=n.handleDefaults,r=n.partition||"x",g=c._subplots[n.type],s=g.length,b=s&&g[0].replace(/\d+$/,"");function p(A,T){return _.coerce(x,S,i,A,T)}for(var w=0;w<s;w++){var l=g[w];x=e[l]?e[l]:e[l]={},S=k.newContainer(c,l,b),n.noUirevision||p("uirevision",c.uirevision);var y={};y[r]=[w/s,(w+1)/s],m(S,c,p,y),n.id=l,a(x,S,p,n)}}},{"../lib":503,"../plot_api/plot_template":543,"./domain":584}],633:[function(v,ie,ae){"use strict";function e(c){var d=c.description?" "+c.description:"",n=c.keys||[];if(n.length>0){for(var t=[],i=0;i<n.length;i++)t[i]="`"+n[i]+"`";d+="Finally, the template string has access to ",d=1===n.length?"variable "+t[0]:"variables "+t.slice(0,-1).join(", ")+" and "+t.slice(-1)+"."}return d}v("../constants/docs"),ae.hovertemplateAttrs=function(c,d){c=c||{},e(d=d||{});var t={valType:"string",dflt:"",editType:c.editType||"none"};return!1!==c.arrayOk&&(t.arrayOk=!0),t},ae.texttemplateAttrs=function(c,d){c=c||{},e(d=d||{});var t={valType:"string",dflt:"",editType:c.editType||"calc"};return!1!==c.arrayOk&&(t.arrayOk=!0),t}},{"../constants/docs":474}],634:[function(v,ie,ae){"use strict";var _=v("./ternary"),k=v("../../plots/get_data").getSubplotCalcData,m=v("../../lib").counterRegex,E="ternary";ae.name=E;var e=ae.attr="subplot";ae.idRoot=E,ae.idRegex=ae.attrRegex=m(E),(ae.attributes={})[e]={valType:"subplotid",dflt:"ternary",editType:"calc"},ae.layoutAttributes=v("./layout_attributes"),ae.supplyLayoutDefaults=v("./layout_defaults"),ae.plot=function(n){for(var t=n._fullLayout,i=n.calcdata,a=t._subplots[E],r=0;r<a.length;r++){var g=a[r],s=k(i,E,g),b=t[g]._subplot;b||(b=new _({id:g,graphDiv:n,container:t._ternarylayer.node()},t),t[g]._subplot=b),b.plot(s,t,n._promises)}},ae.clean=function(d,n,t,i){for(var a=i._subplots[E]||[],r=0;r<a.length;r++){var g=a[r],s=i[g]._subplot;!n[g]&&s&&(s.plotContainer.remove(),s.clipDef.remove(),s.clipDefRelative.remove(),s.layers["a-title"].remove(),s.layers["b-title"].remove(),s.layers["c-title"].remove())}}},{"../../lib":503,"../../plots/get_data":593,"./layout_attributes":635,"./layout_defaults":636,"./ternary":637}],635:[function(v,ie,ae){"use strict";var _=v("../../components/color/attributes"),k=v("../domain").attributes,m=v("../cartesian/layout_attributes"),E=v("../../plot_api/edit_types").overrideAll,e=v("../../lib/extend").extendFlat,c={title:{text:m.title.text,font:m.title.font},color:m.color,tickmode:m.tickmode,nticks:e({},m.nticks,{dflt:6,min:1}),tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:m.ticks,ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,ticklabelstep:m.ticklabelstep,showticklabels:m.showticklabels,showtickprefix:m.showtickprefix,tickprefix:m.tickprefix,showticksuffix:m.showticksuffix,ticksuffix:m.ticksuffix,showexponent:m.showexponent,exponentformat:m.exponentformat,minexponent:m.minexponent,separatethousands:m.separatethousands,tickfont:m.tickfont,tickangle:m.tickangle,tickformat:m.tickformat,tickformatstops:m.tickformatstops,hoverformat:m.hoverformat,showline:e({},m.showline,{dflt:!0}),linecolor:m.linecolor,linewidth:m.linewidth,showgrid:e({},m.showgrid,{dflt:!0}),gridcolor:m.gridcolor,gridwidth:m.gridwidth,griddash:m.griddash,layer:m.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:m._deprecated.title,titlefont:m._deprecated.titlefont}},d=ie.exports=E({domain:k({name:"ternary"}),bgcolor:{valType:"color",dflt:_.background},sum:{valType:"number",dflt:1,min:0},aaxis:c,baxis:c,caxis:c},"plot","from-root");d.uirevision={valType:"any",editType:"none"},d.aaxis.uirevision=d.baxis.uirevision=d.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],636:[function(v,ie,ae){"use strict";var _=v("../../components/color"),k=v("../../plot_api/plot_template"),m=v("../../lib"),E=v("../subplot_defaults"),e=v("../cartesian/tick_label_defaults"),c=v("../cartesian/prefix_suffix_defaults"),d=v("../cartesian/tick_mark_defaults"),n=v("../cartesian/tick_value_defaults"),t=v("../cartesian/line_grid_defaults"),i=v("./layout_attributes"),a=["aaxis","baxis","caxis"];function r(s,b,x,S){var p=x("bgcolor"),w=x("sum");S.bgColor=_.combine(p,S.paper_bgcolor);for(var l,y,A,T=0;T<a.length;T++)y=s[l=a[T]]||{},(A=k.newContainer(b,l))._name=l,g(y,A,S,b);var M=b.aaxis,f=b.baxis,u=b.caxis;M.min+f.min+u.min>=w&&(M.min=0,f.min=0,u.min=0,s.aaxis&&delete s.aaxis.min,s.baxis&&delete s.baxis.min,s.caxis&&delete s.caxis.min)}function g(s,b,x,S){var p=i[b._name];function w(h,o){return m.coerce(s,b,p,h,o)}w("uirevision",S.uirevision),b.type="linear";var l=w("color"),y=l!==p.color.dflt?l:x.font.color,T=b._name.charAt(0).toUpperCase(),M="Component "+T,f=w("title.text",M);b._hovertitle=f===M?f:T,m.coerceFont(w,"title.font",{family:x.font.family,size:m.bigFont(x.font.size),color:y}),w("min"),n(s,b,w,"linear"),c(s,b,w,"linear"),e(s,b,w,"linear"),d(s,b,w,{outerTicks:!0}),w("showticklabels")&&(m.coerceFont(w,"tickfont",{family:x.font.family,size:x.font.size,color:y}),w("tickangle"),w("tickformat")),t(s,b,w,{dfltColor:l,bgColor:x.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:p}),w("hoverformat"),w("layer")}ie.exports=function(b,x,S){E(b,x,S,{type:"ternary",attributes:i,handleDefaults:r,font:x.font,paper_bgcolor:x.paper_bgcolor})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../subplot_defaults":632,"./layout_attributes":635}],637:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("tinycolor2"),m=v("../../registry"),E=v("../../lib"),e=E.strTranslate,c=E._,d=v("../../components/color"),n=v("../../components/drawing"),t=v("../cartesian/set_convert"),i=v("../../lib/extend").extendFlat,a=v("../plots"),r=v("../cartesian/axes"),g=v("../../components/dragelement"),s=v("../../components/fx"),b=v("../../components/dragelement/helpers"),x=b.freeMode,S=b.rectMode,p=v("../../components/titles"),w=v("../cartesian/select").prepSelect,l=v("../cartesian/select").selectOnClick,y=v("../cartesian/select").clearSelect,A=v("../cartesian/select").clearSelectionsCache,T=v("../cartesian/constants");function M(D,N){this.id=D.id,this.graphDiv=D.graphDiv,this.init(N),this.makeFramework(N),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}ie.exports=M;var f=M.prototype;f.init=function(D){this.container=D._ternarylayer,this.defs=D._defs,this.layoutId=D._uid,this.traceHash={},this.layers={}},f.plot=function(D,N){var U=this,X=N[U.id],oe=N._size;U._hasClipOnAxisFalse=!1;for(var se=0;se<D.length;se++)if(!1===D[se][0].trace.cliponaxis){U._hasClipOnAxisFalse=!0;break}U.updateLayers(X),U.adjustLayout(X,oe),a.generalUpdatePerTraceModule(U.graphDiv,U,D,X),U.layers.plotbg.select("path").call(d.fill,X.bgcolor)},f.makeFramework=function(D){var N=this,U=N.graphDiv,X=D[N.id],oe=N.clipId="clip"+N.layoutId+N.id,se=N.clipIdRelative="clip-relative"+N.layoutId+N.id;N.clipDef=E.ensureSingleById(D._clips,"clipPath",oe,function(ne){ne.append("path").attr("d","M0,0Z")}),N.clipDefRelative=E.ensureSingleById(D._clips,"clipPath",se,function(ne){ne.append("path").attr("d","M0,0Z")}),N.plotContainer=E.ensureSingle(N.container,"g",N.id),N.updateLayers(X),n.setClipUrl(N.layers.backplot,oe,U),n.setClipUrl(N.layers.grids,oe,U)},f.updateLayers=function(D){var U=this.layers,X=["draglayer","plotbg","backplot","grids"];"below traces"===D.aaxis.layer&&X.push("aaxis","aline"),"below traces"===D.baxis.layer&&X.push("baxis","bline"),"below traces"===D.caxis.layer&&X.push("caxis","cline"),X.push("frontplot"),"above traces"===D.aaxis.layer&&X.push("aaxis","aline"),"above traces"===D.baxis.layer&&X.push("baxis","bline"),"above traces"===D.caxis.layer&&X.push("caxis","cline");var oe=this.plotContainer.selectAll("g.toplevel").data(X,String),se=["agrid","bgrid","cgrid"];oe.enter().append("g").attr("class",function(ne){return"toplevel "+ne}).each(function(ne){var W=_.select(this);U[ne]=W,"frontplot"===ne?W.append("g").classed("scatterlayer",!0):"backplot"===ne?W.append("g").classed("maplayer",!0):"plotbg"===ne?W.append("path").attr("d","M0,0Z"):"aline"===ne||"bline"===ne||"cline"===ne?W.append("path"):"grids"===ne&&se.forEach(function(G){U[G]=W.append("g").classed("grid "+G,!0)})}),oe.order()};var u=Math.sqrt(4/3);f.adjustLayout=function(D,N){var Y,te,J,j,re,le,U=this,X=D.domain,oe=(X.x[0]+X.x[1])/2,se=(X.y[0]+X.y[1])/2,ne=X.x[1]-X.x[0],W=X.y[1]-X.y[0],G=ne*N.w,$=W*N.h,V=D.sum,H=D.aaxis.min,q=D.baxis.min,K=D.caxis.min;G>u*$?J=(j=$)*u:j=(J=G)/u,re=ne*J/G,le=W*j/$,te=N.t+N.h*(1-se)-j/2,U.x0=Y=N.l+N.w*oe-J/2,U.y0=te,U.w=J,U.h=j,U.sum=V,U.xaxis={type:"linear",range:[H+2*K-V,V-H-2*q],domain:[oe-re/2,oe+re/2],_id:"x"},t(U.xaxis,U.graphDiv._fullLayout),U.xaxis.setScale(),U.xaxis.isPtWithinRange=function(Ce){return Ce.a>=U.aaxis.range[0]&&Ce.a<=U.aaxis.range[1]&&Ce.b>=U.baxis.range[1]&&Ce.b<=U.baxis.range[0]&&Ce.c>=U.caxis.range[1]&&Ce.c<=U.caxis.range[0]},U.yaxis={type:"linear",range:[H,V-q-K],domain:[se-le/2,se+le/2],_id:"y"},t(U.yaxis,U.graphDiv._fullLayout),U.yaxis.setScale(),U.yaxis.isPtWithinRange=function(){return!0};var ge=U.yaxis.domain[0],pe=U.aaxis=i({},D.aaxis,{range:[H,V-q-K],side:"left",tickangle:(+D.aaxis.tickangle||0)-30,domain:[ge,ge+le*u],anchor:"free",position:0,_id:"y",_length:J});t(pe,U.graphDiv._fullLayout),pe.setScale();var xe=U.baxis=i({},D.baxis,{range:[V-H-K,q],side:"bottom",domain:U.xaxis.domain,anchor:"free",position:0,_id:"x",_length:J});t(xe,U.graphDiv._fullLayout),xe.setScale();var ke=U.caxis=i({},D.caxis,{range:[V-H-q,K],side:"right",tickangle:(+D.caxis.tickangle||0)+30,domain:[ge,ge+le*u],anchor:"free",position:0,_id:"y",_length:J});t(ke,U.graphDiv._fullLayout),ke.setScale();var we="M"+Y+","+(te+j)+"h"+J+"l-"+J/2+",-"+j+"Z";U.clipDef.select("path").attr("d",we),U.layers.plotbg.select("path").attr("d",we);var de="M0,"+j+"h"+J+"l-"+J/2+",-"+j+"Z";U.clipDefRelative.select("path").attr("d",de);var be=e(Y,te);U.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",be),U.clipDefRelative.select("path").attr("transform",null);var Le=e(Y-xe._offset,te+j);U.layers.baxis.attr("transform",Le),U.layers.bgrid.attr("transform",Le);var De=e(Y+J/2,te)+"rotate(30)"+e(0,-pe._offset);U.layers.aaxis.attr("transform",De),U.layers.agrid.attr("transform",De);var ye=e(Y+J/2,te)+"rotate(-30)"+e(0,-ke._offset);U.layers.caxis.attr("transform",ye),U.layers.cgrid.attr("transform",ye),U.drawAxes(!0),U.layers.aline.select("path").attr("d",pe.showline?"M"+Y+","+(te+j)+"l"+J/2+",-"+j:"M0,0").call(d.stroke,pe.linecolor||"#000").style("stroke-width",(pe.linewidth||0)+"px"),U.layers.bline.select("path").attr("d",xe.showline?"M"+Y+","+(te+j)+"h"+J:"M0,0").call(d.stroke,xe.linecolor||"#000").style("stroke-width",(xe.linewidth||0)+"px"),U.layers.cline.select("path").attr("d",ke.showline?"M"+(Y+J/2)+","+te+"l"+J/2+","+j:"M0,0").call(d.stroke,ke.linecolor||"#000").style("stroke-width",(ke.linewidth||0)+"px"),U.graphDiv._context.staticPlot||U.initInteractions(),n.setClipUrl(U.layers.frontplot,U._hasClipOnAxisFalse?null:U.clipId,U.graphDiv)},f.drawAxes=function(D){var N=this,U=N.graphDiv,X=N.id.substr(7)+"title",oe=N.layers,se=N.aaxis,ne=N.baxis,W=N.caxis;if(N.drawAx(se),N.drawAx(ne),N.drawAx(W),D){var G=Math.max(se.showticklabels?se.tickfont.size/2:0,(W.showticklabels?.75*W.tickfont.size:0)+("outside"===W.ticks?.87*W.ticklen:0)),$=(ne.showticklabels?ne.tickfont.size:0)+("outside"===ne.ticks?ne.ticklen:0)+3;oe["a-title"]=p.draw(U,"a"+X,{propContainer:se,propName:N.id+".aaxis.title",placeholder:c(U,"Click to enter Component A title"),attributes:{x:N.x0+N.w/2,y:N.y0-se.title.font.size/3-G,"text-anchor":"middle"}}),oe["b-title"]=p.draw(U,"b"+X,{propContainer:ne,propName:N.id+".baxis.title",placeholder:c(U,"Click to enter Component B title"),attributes:{x:N.x0-$,y:N.y0+N.h+.83*ne.title.font.size+$,"text-anchor":"middle"}}),oe["c-title"]=p.draw(U,"c"+X,{propContainer:W,propName:N.id+".caxis.title",placeholder:c(U,"Click to enter Component C title"),attributes:{x:N.x0+N.w+$,y:N.y0+N.h+.83*W.title.font.size+$,"text-anchor":"middle"}})}},f.drawAx=function(D){var N=this,U=N.graphDiv,X=D._name,oe=X.charAt(0),se=D._id,ne=N.layers[X],G=oe+"tickLayout",$=function h(D){return D.ticks+String(D.ticklen)+String(D.showticklabels)}(D);N[G]!==$&&(ne.selectAll("."+se+"tick").remove(),N[G]=$),D.setScale();var V=r.calcTicks(D),H=r.clipEnds(D,V),q=r.makeTransTickFn(D),K=r.getTickSigns(D)[2],Y=E.deg2rad(30),te=K*(D.linewidth||1)/2,J=K*D.ticklen,j=N.w,re=N.h,le="b"===oe?"M0,"+te+"l"+Math.sin(Y)*J+","+Math.cos(Y)*J:"M"+te+",0l"+Math.cos(Y)*J+","+-Math.sin(Y)*J,ge={a:"M0,0l"+re+",-"+j/2,b:"M0,0l-"+j/2+",-"+re,c:"M0,0l-"+re+","+j/2}[oe];r.drawTicks(U,D,{vals:"inside"===D.ticks?H:V,layer:ne,path:le,transFn:q,crisp:!1}),r.drawGrid(U,D,{vals:H,layer:N.layers[oe+"grid"],path:ge,transFn:q,crisp:!1}),r.drawLabels(U,D,{vals:V,layer:ne,transFn:q,labelFns:r.makeLabelFns(D,0,30)})};var o=T.MINZOOM/2+.87,C="m-0.87,.5h"+o+"v3h-"+(o+5.2)+"l"+(o/2+2.6)+",-"+(.87*o+4.5)+"l2.6,1.5l-"+o/2+","+.87*o+"Z",R="m0.87,.5h-"+o+"v3h"+(o+5.2)+"l-"+(o/2+2.6)+",-"+(.87*o+4.5)+"l-2.6,1.5l"+o/2+","+.87*o+"Z",z="m0,1l"+o/2+","+.87*o+"l2.6,-1.5l-"+(o/2+2.6)+",-"+(.87*o+4.5)+"l-"+(o/2+2.6)+","+(.87*o+4.5)+"l2.6,1.5l"+o/2+",-"+.87*o+"Z",I=!0;function F(D){_.select(D).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}f.clearSelect=function(){A(this.dragOptions),y(this.dragOptions.gd)},f.initInteractions=function(){var oe,se,ne,W,G,$,V,H,q,K,Y,te,D=this,N=D.layers.plotbg.select("path").node(),U=D.graphDiv,X=U._fullLayout._zoomlayer;function J(Le){var De={};return De[D.id+".aaxis.min"]=Le.a,De[D.id+".baxis.min"]=Le.b,De[D.id+".caxis.min"]=Le.c,De}function j(Le,De){var ye=U._fullLayout.clickmode;F(U),2===Le&&(U.emit("plotly_doubleclick",null),m.call("_guiRelayout",U,J({a:0,b:0,c:0}))),ye.indexOf("select")>-1&&1===Le&&l(De,U,[D.xaxis],[D.yaxis],D.id,D.dragOptions),ye.indexOf("event")>-1&&s.click(U,De,D.id)}function le(Le,De){return 1-De/D.h}function ge(Le,De){return 1-(Le+(D.h-De)/Math.sqrt(3))/D.w}function pe(Le,De){return(Le-(D.h-De)/Math.sqrt(3))/D.w}function xe(Le,De){var ye=ne+Le*oe,Ce=W+De*se,Fe=Math.max(0,Math.min(1,le(0,W),le(0,Ce))),Ke=Math.max(0,Math.min(1,ge(ne,W),ge(ye,Ce))),Ue=Math.max(0,Math.min(1,pe(ne,W),pe(ye,Ce))),Be=(Fe/2+Ue)*D.w,Ie=(1-Fe/2-Ke)*D.w,nt=(Be+Ie)/2,gt=Ie-Be,Nt=(1-Fe)*D.h,St=Nt-gt/u;gt<T.MINZOOM?(V=G,Y.attr("d",q),te.attr("d","M0,0Z")):(V={a:G.a+Fe*$,b:G.b+Ke*$,c:G.c+Ue*$},Y.attr("d",q+"M"+Be+","+Nt+"H"+Ie+"L"+nt+","+St+"L"+Be+","+Nt+"Z"),te.attr("d","M"+ne+","+W+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Be+","+Nt+C+"M"+Ie+","+Nt+R+"M"+nt+","+St+z)),K||(Y.transition().style("fill",H>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),te.transition().style("opacity",1).duration(200),K=!0),U.emit("plotly_relayouting",J(V))}function ke(){F(U),V!==G&&(m.call("_guiRelayout",U,J(V)),I&&U.data&&U._context.showTips&&(E.notifier(c(U,"Double-click to zoom back out"),"long"),I=!1))}function de(Le,De){var ye=Le/D.xaxis._m,Ce=De/D.yaxis._m,Fe=[(V={a:G.a-Ce,b:G.b+(ye+Ce)/2,c:G.c-(ye-Ce)/2}).a,V.b,V.c].sort(E.sorterAsc),Ke_a=Fe.indexOf(V.a),Ke_b=Fe.indexOf(V.b),Ke_c=Fe.indexOf(V.c);Fe[0]<0&&(Fe[1]+Fe[0]/2<0?(Fe[2]+=Fe[0]+Fe[1],Fe[0]=Fe[1]=0):(Fe[2]+=Fe[0]/2,Fe[1]+=Fe[0]/2,Fe[0]=0),De=(G.a-(V={a:Fe[Ke_a],b:Fe[Ke_b],c:Fe[Ke_c]}).a)*D.yaxis._m,Le=(G.c-V.c-G.b+V.b)*D.xaxis._m);var Ue=e(D.x0+Le,D.y0+De);D.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Ue);var Be=e(-Le,-De);D.clipDefRelative.select("path").attr("transform",Be),D.aaxis.range=[V.a,D.sum-V.b-V.c],D.baxis.range=[D.sum-V.a-V.c,V.b],D.caxis.range=[D.sum-V.a-V.b,V.c],D.drawAxes(!1),D._hasClipOnAxisFalse&&D.plotContainer.select(".scatterlayer").selectAll(".trace").call(n.hideOutsideRangePoints,D),U.emit("plotly_relayouting",J(V))}function be(){m.call("_guiRelayout",U,J(V))}this.dragOptions={element:N,gd:U,plotinfo:{id:D.id,domain:U._fullLayout[D.id].domain,xaxis:D.xaxis,yaxis:D.yaxis},subplot:D.id,prepFn:function(Le,De,ye){D.dragOptions.xaxes=[D.xaxis],D.dragOptions.yaxes=[D.yaxis],oe=U._fullLayout._invScaleX,se=U._fullLayout._invScaleY;var Ce=D.dragOptions.dragmode=U._fullLayout.dragmode;D.dragOptions.minDrag=x(Ce)?1:void 0,"zoom"===Ce?(D.dragOptions.moveFn=xe,D.dragOptions.clickFn=j,D.dragOptions.doneFn=ke,function re(Le,De,ye){var Ce=N.getBoundingClientRect();ne=De-Ce.left,W=ye-Ce.top,U._fullLayout._calcInverseTransform(U);var Ke=E.apply3DTransform(U._fullLayout._invTransform)(ne,W);ne=Ke[0],W=Ke[1],V=G={a:D.aaxis.range[0],b:D.baxis.range[1],c:D.caxis.range[1]},$=D.aaxis.range[1]-G.a,H=k(D.graphDiv._fullLayout[D.id].bgcolor).getLuminance(),q="M0,"+D.h+"L"+D.w/2+", 0L"+D.w+","+D.h+"Z",K=!1,Y=X.append("path").attr("class","zoombox").attr("transform",e(D.x0,D.y0)).style({fill:H>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",q),te=X.append("path").attr("class","zoombox-corners").attr("transform",e(D.x0,D.y0)).style({fill:d.background,stroke:d.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),D.clearSelect(U)}(0,De,ye)):"pan"===Ce?(D.dragOptions.moveFn=de,D.dragOptions.clickFn=j,D.dragOptions.doneFn=be,function we(){V=G={a:D.aaxis.range[0],b:D.baxis.range[1],c:D.caxis.range[1]}}(),D.clearSelect(U)):(S(Ce)||x(Ce))&&w(Le,De,ye,D.dragOptions,Ce)}},N.onmousemove=function(Le){s.hover(U,Le,D.id),U._fullLayout._lasthover=N,U._fullLayout._hoversubplot=D.id},N.onmouseout=function(Le){U._dragging||g.unhover(U,Le)},g.init(this.dragOptions)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../lib":503,"../../lib/extend":493,"../../registry":638,"../cartesian/axes":554,"../cartesian/constants":561,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"@plotly/d3":58,tinycolor2:312}],638:[function(v,ie,ae){"use strict";var _=v("./lib/loggers"),k=v("./lib/noop"),m=v("./lib/push_unique"),E=v("./lib/is_plain_object"),e=v("./lib/dom").addStyleRule,c=v("./lib/extend"),d=v("./plots/attributes"),n=v("./plots/layout_attributes"),t=c.extendFlat,i=c.extendDeepAll;function a(y){var A=y.name,T=y.categories,M=y.meta;if(ae.modules[A])_.log("Type "+A+" already registered");else{ae.subplotsRegistry[y.basePlotModule.name]||function r(y){var A=y.name;if(ae.subplotsRegistry[A])_.log("Plot type "+A+" already registered.");else for(var T in x(y),ae.subplotsRegistry[A]=y,ae.componentsRegistry)w(T,y.name)}(y.basePlotModule);for(var f={},u=0;u<T.length;u++)f[T[u]]=!0,ae.allCategories[T[u]]=!0;for(var h in ae.modules[A]={_module:y,categories:f},M&&Object.keys(M).length&&(ae.modules[A].meta=M),ae.allTypes.push(A),ae.componentsRegistry)S(h,A);y.layoutAttributes&&t(ae.traceLayoutAttributes,y.layoutAttributes);var o=y.basePlotModule,C=o.name;if("mapbox"===C){var R=o.constants.styleRules;for(var z in R)e(".js-plotly-plot .plotly .mapboxgl-"+z,R[z])}("geo"===C||"mapbox"===C)&&void 0===window.PlotlyGeoAssets&&(window.PlotlyGeoAssets={topojson:{}})}}function g(y){if("string"!=typeof y.name)throw new Error("Component module *name* must be a string.");var A=y.name;for(var T in ae.componentsRegistry[A]=y,y.layoutAttributes&&(y.layoutAttributes._isLinkedToArray&&m(ae.layoutArrayContainers,A),x(y)),ae.modules)S(A,T);for(var M in ae.subplotsRegistry)w(A,M);for(var f in ae.transformsRegistry)p(A,f);y.schema&&y.schema.layout&&i(n,y.schema.layout)}function s(y){if("string"!=typeof y.name)throw new Error("Transform module *name* must be a string.");var A="Transform module "+y.name,T="function"==typeof y.transform,M="function"==typeof y.calcTransform;if(!T&&!M)throw new Error(A+" is missing a *transform* or *calcTransform* method.");for(var f in T&&M&&_.log([A+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),E(y.attributes)||_.log(A+" registered without an *attributes* object."),"function"!=typeof y.supplyDefaults&&_.log(A+" registered without a *supplyDefaults* method."),ae.transformsRegistry[y.name]=y,ae.componentsRegistry)p(f,y.name)}function b(y){var A=y.name,T=A.split("-")[0],M=y.dictionary,f=y.format,u=M&&Object.keys(M).length,h=f&&Object.keys(f).length,o=ae.localeRegistry,C=o[A];if(C||(o[A]=C={}),T!==A){var R=o[T];R||(o[T]=R={}),u&&R.dictionary===C.dictionary&&(R.dictionary=M),h&&R.format===C.format&&(R.format=f)}u&&(C.dictionary=M),h&&(C.format=f)}function x(y){if(y.layoutAttributes){var A=y.layoutAttributes._arrayAttrRegexps;if(A)for(var T=0;T<A.length;T++)m(ae.layoutArrayRegexes,A[T])}}function S(y,A){var T=ae.componentsRegistry[y].schema;if(T&&T.traces){var M=T.traces[A];M&&i(ae.modules[A]._module.attributes,M)}}function p(y,A){var T=ae.componentsRegistry[y].schema;if(T&&T.transforms){var M=T.transforms[A];M&&i(ae.transformsRegistry[A].attributes,M)}}function w(y,A){var T=ae.componentsRegistry[y].schema;if(T&&T.subplots){var M=ae.subplotsRegistry[A],f=M.layoutAttributes,u="subplot"===M.attr?M.name:M.attr;Array.isArray(u)&&(u=u[0]);var h=T.subplots[u];f&&h&&i(f,h)}}function l(y){return"object"==typeof y&&(y=y.type),y}ae.modules={},ae.allCategories={},ae.allTypes=[],ae.subplotsRegistry={},ae.transformsRegistry={},ae.componentsRegistry={},ae.layoutArrayContainers=[],ae.layoutArrayRegexes=[],ae.traceLayoutAttributes={},ae.localeRegistry={},ae.apiMethodRegistry={},ae.collectableSubplotTypes=null,ae.register=function(A){if(ae.collectableSubplotTypes=null,!A)throw new Error("No argument passed to Plotly.register.");A&&!Array.isArray(A)&&(A=[A]);for(var T=0;T<A.length;T++){var M=A[T];if(!M)throw new Error("Invalid module was attempted to be registered!");switch(M.moduleType){case"trace":a(M);break;case"transform":s(M);break;case"component":g(M);break;case"locale":b(M);break;case"apiMethod":ae.apiMethodRegistry[M.name]=M.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},ae.getModule=function(y){var A=ae.modules[l(y)];return!!A&&A._module},ae.traceIs=function(y,A){if("various"===(y=l(y)))return!1;var T=ae.modules[y];return T||(y&&_.log("Unrecognized trace type "+y+"."),T=ae.modules[d.type.dflt]),!!T.categories[A]},ae.getTransformIndices=function(y,A){for(var T=[],M=y.transforms||[],f=0;f<M.length;f++)M[f].type===A&&T.push(f);return T},ae.hasTransform=function(y,A){for(var T=y.transforms||[],M=0;M<T.length;M++)if(T[M].type===A)return!0;return!1},ae.getComponentMethod=function(y,A){var T=ae.componentsRegistry[y];return T&&T[A]||k},ae.call=function(){var y=arguments[0],A=[].slice.call(arguments,1);return ae.apiMethodRegistry[y].apply(null,A)}},{"./lib/dom":491,"./lib/extend":493,"./lib/is_plain_object":504,"./lib/loggers":507,"./lib/noop":512,"./lib/push_unique":518,"./plots/attributes":550,"./plots/layout_attributes":610}],639:[function(v,ie,ae){"use strict";var _=v("../registry"),k=v("../lib"),m=k.extendFlat,E=k.extendDeep;function e(d){var n;switch(d){case"themes__thumb":n={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":n={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:n={}}return n}ie.exports=function(n,t){var i,r=n.layout,g=E([],n.data),s=E({},r,e(t.tileClass)),b=n._context||{};if(t.width&&(s.width=t.width),t.height&&(s.height=t.height),"thumbnail"===t.tileClass||"themes__thumb"===t.tileClass){s.annotations=[];var x=Object.keys(s);for(i=0;i<x.length;i++)["xaxis","yaxis","zaxis"].indexOf(x[i].slice(0,5))>-1&&(s[x[i]].title={text:""});for(i=0;i<g.length;i++){var S=g[i];S.showscale=!1,S.marker&&(S.marker.showscale=!1),_.traceIs(S,"pie-like")&&(S.textposition="none")}}if(Array.isArray(t.annotations))for(i=0;i<t.annotations.length;i++)s.annotations.push(t.annotations[i]);var p=Object.keys(s).filter(function(T){return T.match(/^scene\d*$/)});if(p.length){var w={};for("thumbnail"===t.tileClass&&(w={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),i=0;i<p.length;i++){var l=s[p[i]];l.xaxis||(l.xaxis={}),l.yaxis||(l.yaxis={}),l.zaxis||(l.zaxis={}),m(l.xaxis,w),m(l.yaxis,w),m(l.zaxis,w),l._scene=null}}var y=document.createElement("div");t.tileClass&&(y.className=t.tileClass);var A={gd:y,td:y,layout:s,data:g,config:{staticPlot:void 0===t.staticPlot||t.staticPlot,plotGlPixelRatio:void 0===t.plotGlPixelRatio?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:b.mapboxAccessToken}};return"transparent"!==t.setBackground&&(A.config.setBackground=t.setBackground||"opaque"),A.gd.defaultLayout=e(t.tileClass),A}},{"../lib":503,"../registry":638}],640:[function(v,ie,ae){"use strict";var _=v("../lib"),k=v("../plot_api/to_image"),m=v("./filesaver"),E=v("./helpers");ie.exports=function e(c,d){var n;return _.isPlainObject(c)||(n=_.getGraphDiv(c)),(d=d||{}).format=d.format||"png",d.width=d.width||null,d.height=d.height||null,d.imageDataOnly=!0,new Promise(function(t,i){n&&n._snapshotInProgress&&i(new Error("Snapshotting already in progress.")),_.isIE()&&"svg"!==d.format&&i(new Error(E.MSG_IE_BAD_FORMAT)),n&&(n._snapshotInProgress=!0);var a=k(c,d),r=d.filename||c.fn||"newplot";r+="."+d.format.replace("-","."),a.then(function(g){return n&&(n._snapshotInProgress=!1),m(g,r,d.format)}).then(function(g){t(g)}).catch(function(g){n&&(n._snapshotInProgress=!1),i(g)})})}},{"../lib":503,"../plot_api/to_image":546,"./filesaver":641,"./helpers":642}],641:[function(v,ie,ae){"use strict";var _=v("../lib"),k=v("./helpers");ie.exports=function m(E,e,c){var d=document.createElement("a"),n="download"in d;return new Promise(function(i,a){var r,g;return _.isIE()?(r=k.createBlob(E,"svg"),window.navigator.msSaveBlob(r,e),r=null,i(e)):n?(r=k.createBlob(E,c),g=k.createObjectURL(r),d.href=g,d.download=e,document.body.appendChild(d),d.click(),document.body.removeChild(d),k.revokeObjectURL(g),r=null,i(e)):_.isSafari()?(k.octetStream(("svg"===c?",":";base64,")+encodeURIComponent(E)),i(e)):void a(new Error("download error"))})}},{"../lib":503,"./helpers":642}],642:[function(v,ie,ae){"use strict";var _=v("../registry");ae.getDelay=function(E){return E._has&&(E._has("gl3d")||E._has("gl2d")||E._has("mapbox"))?500:0},ae.getRedrawFunc=function(E){return function(){_.getComponentMethod("colorbar","draw")(E)}},ae.encodeSVG=function(E){return"data:image/svg+xml,"+encodeURIComponent(E)},ae.encodeJSON=function(E){return"data:application/json,"+encodeURIComponent(E)};var k=window.URL||window.webkitURL;ae.createObjectURL=function(E){return k.createObjectURL(E)},ae.revokeObjectURL=function(E){return k.revokeObjectURL(E)},ae.createBlob=function(E,e){if("svg"===e)return new window.Blob([E],{type:"image/svg+xml;charset=utf-8"});if("full-json"===e)return new window.Blob([E],{type:"application/json;charset=utf-8"});var c=function m(E){for(var e=E.length,c=new ArrayBuffer(e),d=new Uint8Array(c),n=0;n<e;n++)d[n]=E.charCodeAt(n);return c}(window.atob(E));return new window.Blob([c],{type:"image/"+e})},ae.octetStream=function(E){document.location.href="data:application/octet-stream"+E},ae.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,ae.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":638}],643:[function(v,ie,ae){"use strict";var _=v("./helpers"),k={getDelay:_.getDelay,getRedrawFunc:_.getRedrawFunc,clone:v("./cloneplot"),toSVG:v("./tosvg"),svgToImg:v("./svgtoimg"),toImage:v("./toimage"),downloadImage:v("./download")};ie.exports=k},{"./cloneplot":639,"./download":640,"./helpers":642,"./svgtoimg":644,"./toimage":645,"./tosvg":646}],644:[function(v,ie,ae){"use strict";var _=v("../lib"),k=v("events").EventEmitter,m=v("./helpers");ie.exports=function E(e){var c=e.emitter||new k,d=new Promise(function(n,t){var i=window.Image,a=e.svg,r=e.format||"png";if(_.isIE()&&"svg"!==r){var g=new Error(m.MSG_IE_BAD_FORMAT);return t(g),e.promise?d:c.emit("error",g)}var A,T,s=e.canvas,b=e.scale||1,p=b*(e.width||300),w=b*(e.height||150),l=s.getContext("2d",{willReadFrequently:!0}),y=new i;"svg"===r||_.isSafari()?T=m.encodeSVG(a):(A=m.createBlob(a,"svg"),T=m.createObjectURL(A)),s.width=p,s.height=w,y.onload=function(){var M;switch(A=null,m.revokeObjectURL(T),"svg"!==r&&l.drawImage(y,0,0,p,w),r){case"jpeg":M=s.toDataURL("image/jpeg");break;case"png":M=s.toDataURL("image/png");break;case"webp":M=s.toDataURL("image/webp");break;case"svg":M=T;break;default:var f="Image format is not jpeg, png, svg or webp.";if(t(new Error(f)),!e.promise)return c.emit("error",f)}n(M),e.promise||c.emit("success",M)},y.onerror=function(M){if(A=null,m.revokeObjectURL(T),t(M),!e.promise)return c.emit("error",M)},y.src=T});return e.promise?d:c}},{"../lib":503,"./helpers":642,events:84}],645:[function(v,ie,ae){"use strict";var _=v("events").EventEmitter,k=v("../registry"),m=v("../lib"),E=v("./helpers"),e=v("./cloneplot"),c=v("./tosvg"),d=v("./svgtoimg");ie.exports=function n(t,i){var a=new _,r=e(t,{format:"png"}),g=r.gd;g.style.position="absolute",g.style.left="-5000px",document.body.appendChild(g);var b=E.getRedrawFunc(g);return k.call("_doPlot",g,r.data,r.layout,r.config).then(b).then(function s(){var x=E.getDelay(g._fullLayout);setTimeout(function(){var S=c(g),p=document.createElement("canvas");p.id=m.randstr(),(a=d({format:i.format,width:g._fullLayout.width,height:g._fullLayout.height,canvas:p,emitter:a,svg:S})).clean=function(){g&&document.body.removeChild(g)}},x)}).catch(function(x){a.emit("error",x)}),a}},{"../lib":503,"../registry":638,"./cloneplot":639,"./helpers":642,"./svgtoimg":644,"./tosvg":646,events:84}],646:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../lib"),m=v("../components/drawing"),E=v("../components/color"),e=v("../constants/xmlns_namespaces"),c=/"/g,d="TOBESTRIPPED",n=new RegExp('("'+d+")|("+d+'")',"g");ie.exports=function(r,g,s){var l,b=r._fullLayout,x=b._paper,S=b._toppaper,p=b.width,w=b.height;x.insert("rect",":first-child").call(m.setRect,0,0,p,w).call(E.fill,b.paper_bgcolor);var y=b._basePlotModules||[];for(l=0;l<y.length;l++){var A=y[l];A.toSVG&&A.toSVG(r)}if(S){var T=S.node().childNodes,M=Array.prototype.slice.call(T);for(l=0;l<M.length;l++){var f=M[l];f.childNodes.length&&x.node().appendChild(f)}}b._draggers&&b._draggers.remove(),x.node().style.background="",x.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var h=_.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){h.style({visibility:null,display:null});var o=this.style.fontFamily;o&&-1!==o.indexOf('"')&&h.style("font-family",o.replace(c,d))}else h.remove()}),x.selectAll(".gradient_filled,.pattern_filled").each(function(){var h=_.select(this),o=this.style.fill;o&&-1!==o.indexOf("url(")&&h.style("fill",o.replace(c,d));var C=this.style.stroke;C&&-1!==C.indexOf("url(")&&h.style("stroke",C.replace(c,d))}),("pdf"===g||"eps"===g)&&x.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),x.node().setAttributeNS(e.xmlns,"xmlns",e.svg),x.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),"svg"===g&&s&&(x.attr("width",s*p),x.attr("height",s*w),x.attr("viewBox","0 0 "+p+" "+w));var u=(new window.XMLSerializer).serializeToString(x.node());return u=(u=function i(a){return a.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}(u=function t(a){var r=_.select("body").append("div").style({display:"none"}).html(""),g=a.replace(/(&[^;]*;)/gi,function(s){return"&lt;"===s?"&#60;":"&rt;"===s?"&#62;":-1!==s.indexOf("<")||-1!==s.indexOf(">")?"":r.html(s).text()});return r.remove(),g}(u))).replace(n,"'"),k.isIE()&&(u=(u=(u=u.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),u}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],647:[function(v,ie,ae){"use strict";var _=v("../../lib");ie.exports=function(m,E){for(var e=0;e<m.length;e++)m[e].i=e;_.mergeArray(E.text,m,"tx"),_.mergeArray(E.hovertext,m,"htx");var c=E.marker;if(c){_.mergeArray(c.opacity,m,"mo",!0),_.mergeArray(c.color,m,"mc");var d=c.line;d&&(_.mergeArray(d.color,m,"mlc"),_.mergeArrayCastPositive(d.width,m,"mlw"))}}},{"../../lib":503}],648:[function(v,ie,ae){"use strict";var _=v("../scatter/attributes"),k=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=v("../../plots/template_attributes").hovertemplateAttrs,E=v("../../plots/template_attributes").texttemplateAttrs,e=v("../../components/colorscale/attributes"),c=v("../../plots/font_attributes"),d=v("./constants"),n=v("../../components/drawing/attributes").pattern,t=v("../../lib/extend").extendFlat,i=c({editType:"calc",arrayOk:!0,colorEditType:"style"}),g=t({},_.marker.line.width,{dflt:0}),s=t({width:g,editType:"calc"},e("marker.line")),b=t({line:s,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:n});ie.exports={x:_.x,x0:_.x0,dx:_.dx,y:_.y,y0:_.y0,dy:_.dy,xperiod:_.xperiod,yperiod:_.yperiod,xperiod0:_.xperiod0,yperiod0:_.yperiod0,xperiodalignment:_.xperiodalignment,yperiodalignment:_.yperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),text:_.text,texttemplate:E({editType:"plot"},{keys:d.eventDataKeys}),hovertext:_.hovertext,hovertemplate:m({},{keys:d.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:t({},i,{}),insidetextfont:t({},i,{}),outsidetextfont:t({},i,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:t({},_.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:b,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:_.selected.marker.opacity,color:_.selected.marker.color,editType:"style"},textfont:_.selected.textfont,editType:"style"},unselected:{marker:{opacity:_.unselected.marker.opacity,color:_.unselected.marker.color,editType:"style"},textfont:_.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":927,"./constants":650}],649:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/axes"),k=v("../../plots/cartesian/align_period"),m=v("../../components/colorscale/helpers").hasColorscale,E=v("../../components/colorscale/calc"),e=v("./arrays_to_calcdata"),c=v("../scatter/calc_selection");ie.exports=function(n,t){var r,g,s,b,x,S,i=_.getFromId(n,t.xaxis||"x"),a=_.getFromId(n,t.yaxis||"y"),p={msUTC:!(!t.base&&0!==t.base)};"h"===t.orientation?(r=i.makeCalcdata(t,"x",p),s=a.makeCalcdata(t,"y"),b=k(t,a,"y",s),x=!!t.yperiodalignment,S="y"):(r=a.makeCalcdata(t,"y",p),s=i.makeCalcdata(t,"x"),b=k(t,i,"x",s),x=!!t.xperiodalignment,S="x"),g=b.vals;for(var w=Math.min(g.length,r.length),l=new Array(w),y=0;y<w;y++)l[y]={p:g[y],s:r[y]},x&&(l[y].orig_p=s[y],l[y][S+"End"]=b.ends[y],l[y][S+"Start"]=b.starts[y]),t.ids&&(l[y].id=String(t.ids[y]));return m(t,"marker")&&E(n,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),m(t,"marker.line")&&E(n,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(l,t),c(l,t),l}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929,"./arrays_to_calcdata":647}],650:[function(v,ie,ae){"use strict";ie.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],651:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../lib").isArrayOrTypedArray,m=v("../../constants/numerical").BADNUM,E=v("../../registry"),e=v("../../plots/cartesian/axes"),c=v("../../plots/cartesian/constraints").getAxisGroup,d=v("./sieve.js");function t(u,h,o,C,R){if(C.length){var z,O,I,F;switch(function i(u,h){var o,C;for(o=0;o<h.length;o++){var I,R=h[o],z=R[0].trace,O="funnel"===z.type?z._base:z.base,F="h"===z.orientation?z.xcalendar:z.ycalendar,D="category"===u.type||"multicategory"===u.type?function(){return null}:u.d2c;if(k(O)){for(C=0;C<Math.min(O.length,R.length);C++)I=D(O[C],0,F),_(I)?(R[C].b=+I,R[C].hasB=1):R[C].b=0;for(;C<R.length;C++)R[C].b=0}else{I=D(O,0,F);var N=_(I);for(I=N?I:0,C=0;C<R.length;C++)R[C].b=I,N&&(R[C].hasB=1)}}}(o,C),R.mode){case"overlay":a(h,o,C,R);break;case"group":for(z=[],O=[],I=0;I<C.length;I++)void 0===(F=C[I])[0].trace.offset?O.push(F):z.push(F);O.length&&function r(u,h,o,C,R){var z=new d(C,{posAxis:h,sepNegVal:!1,overlapNoMerge:!R.norm});(function b(u,h,o,C){for(var R=u._fullLayout,I=o.minDiff,F=o.traces,D=F.length,N=o.positions.length!==o.distinctPositions.length,U=I*(1-C.gap),X=c(R,h._id)+F[0][0].trace.orientation,oe=R._alignmentOpts[X]||{},se=0;se<D;se++){var V,q,ne=F[se],W=ne[0].trace,$=Object.keys((oe[W.alignmentgroup]||{}).offsetGroups||{}).length,H=(V=$?U/$:N?U/D:U)*(1-(C.groupgap||0));q=$?((2*W._offsetIndex+1-$)*V-H)/2:N?((2*se+1-D)*V-H)/2:-H/2;var K=ne[0].t;K.barwidth=H,K.poffset=q,K.bargroupwidth=U,K.bardelta=I}o.binWidth=F[0][0].t.barwidth/100,x(o),S(h,o),p(h,o,N)})(u,h,z,R),function A(u,h){for(var o=u.traces,C=0;C<o.length;C++){var R=o[C];if(void 0===R[0].trace.base)for(var O=new d([R],{posAxis:h,sepNegVal:!0,overlapNoMerge:!0}),I=0;I<R.length;I++){var F=R[I];if(F.p!==m){var D=O.put(F.p,F.b+F.s);D&&(F.b=D)}}}}(z,h),R.norm?(y(z),T(o,z,R)):w(o,z)}(u,h,o,O,R),z.length&&a(h,o,z,R);break;case"stack":case"relative":for(z=[],O=[],I=0;I<C.length;I++)void 0===(F=C[I])[0].trace.base?O.push(F):z.push(F);O.length&&function g(u,h,o,C,R){var z=new d(C,{posAxis:h,sepNegVal:"relative"===R.mode,overlapNoMerge:!(R.norm||"stack"===R.mode||"relative"===R.mode)});s(h,z,R),function l(u,h,o){var z,O,I,F,D,N,C=f(u),R=h.traces;for(F=0;F<R.length;F++)if("funnel"===(O=(z=R[F])[0].trace).type)for(D=0;D<z.length;D++)(N=z[D]).s!==m&&h.put(N.p,-.5*N.s);for(F=0;F<R.length;F++){I="funnel"===(O=(z=R[F])[0].trace).type;var U=[];for(D=0;D<z.length;D++)if((N=z[D]).s!==m){var X,oe=h.put(N.p,X=I?N.s:N.s+N.b),se=oe+X;N.b=oe,N[C]=se,o.norm||(U.push(se),N.hasB&&U.push(oe))}o.norm||(O._extremes[u._id]=e.findExtremes(u,U,{tozero:!0,padded:!0}))}}(o,z,R);for(var O=0;O<C.length;O++)for(var I=C[O],F=0;F<I.length;F++){var D=I[F];D.s!==m&&D.b+D.s===z.get(D.p,D.s)&&(D._outmost=!0)}R.norm&&T(o,z,R)}(0,h,o,O,R),z.length&&a(h,o,z,R)}!function M(u,h){var R,z,O,o=f(h),C={},I=1/0,F=-1/0;for(R=0;R<u.length;R++)for(O=u[R],z=0;z<O.length;z++){var D=O[z].p;_(D)&&(I=Math.min(I,D),F=Math.max(F,D))}var N=1e4/(F-I),U=C.round=function($){return String(Math.round(N*($-I)))};for(R=0;R<u.length;R++){(O=u[R])[0].t.extents=C;var X=O[0].t.poffset,oe=Array.isArray(X);for(z=0;z<O.length;z++){var se=O[z],ne=se[o]-se.w/2;if(_(ne)){var W=se[o]+se.w/2,G=U(se.p);C[G]=C[G]?[Math.min(ne,C[G][0]),Math.max(W,C[G][1])]:[ne,W]}se.p0=se.p+(oe?X[z]:X),se.p1=se.p0+se.w,se.s0=se.b,se.s1=se.s0+se.s}}}(C,h)}}function a(u,h,o,C){for(var R=0;R<o.length;R++){var O=new d([o[R]],{posAxis:u,sepNegVal:!1,overlapNoMerge:!C.norm});s(u,O,C),C.norm?(y(O),T(h,O,C)):w(h,O)}}function s(u,h,o){for(var C=h.minDiff,R=h.traces,z=C*(1-o.gap),I=z*(1-(o.groupgap||0)),F=-I/2,D=0;D<R.length;D++){var U=R[D][0].t;U.barwidth=I,U.poffset=F,U.bargroupwidth=z,U.bardelta=C}h.binWidth=R[0][0].t.barwidth/100,x(h),S(u,h),p(u,h)}function x(u){var o,C,h=u.traces;for(o=0;o<h.length;o++){var N,R=h[o],z=R[0],O=z.trace,I=z.t,F=O._offset||O.offset,D=I.poffset;if(k(F)){for(N=Array.prototype.slice.call(F,0,R.length),C=0;C<N.length;C++)_(N[C])||(N[C]=D);for(C=N.length;C<R.length;C++)N.push(D);I.poffset=N}else void 0!==F&&(I.poffset=F);var U=O._width||O.width,X=I.barwidth;if(k(U)){var oe=Array.prototype.slice.call(U,0,R.length);for(C=0;C<oe.length;C++)_(oe[C])||(oe[C]=X);for(C=oe.length;C<R.length;C++)oe.push(X);if(I.barwidth=oe,void 0===F){for(N=[],C=0;C<R.length;C++)N.push(D+(X-oe[C])/2);I.poffset=N}}else void 0!==U&&(I.barwidth=U,void 0===F&&(I.poffset=D+(X-U)/2))}}function S(u,h){for(var o=h.traces,C=f(u),R=0;R<o.length;R++)for(var z=o[R],O=z[0].t,I=O.poffset,F=Array.isArray(I),D=O.barwidth,N=Array.isArray(D),U=0;U<z.length;U++){var X=z[U],oe=X.w=N?D[U]:D;X[C]=X.p+(F?I[U]:I)+oe/2}}function p(u,h,o){var C=h.traces,z=h.minDiff/2;e.minDtick(u,h.minDiff,h.distinctPositions[0],o);for(var O=0;O<C.length;O++){var U,X,se,I=C[O],F=I[0],D=F.trace,N=[];for(se=0;se<I.length;se++)N.push(X=(U=I[se]).p-z,U.p+z);if(D.width||D.offset){var ne=F.t,W=ne.poffset,G=ne.barwidth,$=Array.isArray(W),V=Array.isArray(G);for(se=0;se<I.length;se++)N.push(X=(U=I[se]).p+($?W[se]:W),X+(V?G[se]:G))}D._extremes[u._id]=e.findExtremes(u,N,{padded:!1})}}function w(u,h){for(var o=h.traces,C=f(u),R=0;R<o.length;R++){for(var z=o[R],O=z[0].trace,I=[],F=!1,D=0;D<z.length;D++){var N=z[D],U=N.b,X=U+N.s;N[C]=X,I.push(X),N.hasB&&I.push(U),(!N.hasB||!N.b)&&(F=!0)}O._extremes[u._id]=e.findExtremes(u,I,{tozero:F,padded:!0})}}function y(u){for(var h=u.traces,o=0;o<h.length;o++)for(var C=h[o],R=0;R<C.length;R++){var z=C[R];z.s!==m&&u.put(z.p,z.b+z.s)}}function T(u,h,o){var C=h.traces,R=f(u),z="fraction"===o.norm?1:100,O=z/1e9,I=u.l2c(u.c2l(0)),F="stack"===o.mode?z:I;function D(q){return _(u.c2l(q))&&(q<I-O||q>F+O||!_(I))}for(var N=0;N<C.length;N++){for(var U=C[N],X=U[0].trace,oe=[],se=!1,ne=!1,W=0;W<U.length;W++){var G=U[W];if(G.s!==m){var $=Math.abs(z/h.get(G.p,G.s));G.b*=$,G.s*=$;var V=G.b,H=V+G.s;G[R]=H,oe.push(H),ne=ne||D(H),G.hasB&&(oe.push(V),ne=ne||D(V)),(!G.hasB||!G.b)&&(se=!0)}}X._extremes[u._id]=e.findExtremes(u,oe,{tozero:se,padded:ne})}}function f(u){return u._id.charAt(0)}ie.exports={crossTraceCalc:function n(u,h){for(var o=h.xaxis,C=h.yaxis,R=u._fullLayout,z=u._fullData,O=u.calcdata,I=[],F=[],D=0;D<z.length;D++){var N=z[D];if(!0===N.visible&&E.traceIs(N,"bar")&&N.xaxis===o._id&&N.yaxis===C._id&&("h"===N.orientation?I.push(O[D]):F.push(O[D]),N._computePh))for(var U=u.calcdata[D],X=0;X<U.length;X++)"function"==typeof U[X].ph0&&(U[X].ph0=U[X].ph0()),"function"==typeof U[X].ph1&&(U[X].ph1=U[X].ph1())}var oe={xCat:"category"===o.type||"multicategory"===o.type,yCat:"category"===C.type||"multicategory"===C.type,mode:R.barmode,norm:R.barnorm,gap:R.bargap,groupgap:R.bargroupgap};t(u,o,C,F,oe),t(u,C,o,I,oe)},setGroupPositions:t}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562,"../../registry":638,"./sieve.js":661,"fast-isnumeric":190}],652:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../components/color"),m=v("../../registry"),E=v("../scatter/xy_defaults"),e=v("../scatter/period_defaults"),c=v("./style_defaults"),d=v("../../plots/cartesian/constraints").getAxisGroup,n=v("./attributes"),t=_.coerceFont;function a(s,b,x,S){var p=b.orientation,l=d(x,b[{v:"x",h:"y"}[p]+"axis"])+p,y=x._alignmentOpts||{},A=S("alignmentgroup"),T=y[l];T||(T=y[l]={});var M=T[A];M?M.traces.push(b):M=T[A]={traces:[b],alignmentIndex:Object.keys(T).length,offsetGroups:{}};var f=S("offsetgroup"),u=M.offsetGroups,h=u[f];f&&(h||(h=u[f]={offsetIndex:Object.keys(u).length}),b._offsetIndex=h.offsetIndex)}function g(s,b,x,S,p,w){var l=!1!==(w=w||{}).moduleHasSelected,y=!1!==w.moduleHasUnselected,A=!1!==w.moduleHasConstrain,T=!1!==w.moduleHasCliponaxis,M=!1!==w.moduleHasTextangle,f=!1!==w.moduleHasInsideanchor,u=!!w.hasPathbar,h=Array.isArray(p)||"auto"===p,o=h||"inside"===p,C=h||"outside"===p;if(o||C){var R=t(S,"textfont",x.font),z=_.extendFlat({},R),I=!(s.textfont&&s.textfont.color);if(I&&delete z.color,t(S,"insidetextfont",z),u){var F=_.extendFlat({},R);I&&delete F.color,t(S,"pathbar.textfont",F)}C&&t(S,"outsidetextfont",R),l&&S("selected.textfont.color"),y&&S("unselected.textfont.color"),A&&S("constraintext"),T&&S("cliponaxis"),M&&S("textangle"),S("texttemplate")}o&&f&&S("insidetextanchor")}ie.exports={supplyDefaults:function i(s,b,x,S){function p(T,M){return _.coerce(s,b,n,T,M)}if(E(s,b,S,p)){e(s,b,S,p),p("xhoverformat"),p("yhoverformat"),p("orientation",b.x&&!b.y?"h":"v"),p("base"),p("offset"),p("width"),p("text"),p("hovertext"),p("hovertemplate");var l=p("textposition");g(s,0,S,p,l,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),c(s,b,p,x,S);var y=(b.marker.line||{}).color,A=m.getComponentMethod("errorbars","supplyDefaults");A(s,b,y||k.defaultLine,{axis:"y"}),A(s,b,y||k.defaultLine,{axis:"x",inherit:"y"}),_.coerceSelectionMarkerOpacity(b,p)}else b.visible=!1},crossTraceDefaults:function r(s,b){var S;function p(l){return _.coerce(S._input,S,n,l)}if("group"===b.barmode)for(var w=0;w<s.length;w++)"bar"===(S=s[w]).type&&a(0,S,b,p)},handleGroupingDefaults:a,handleText:g}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/constraints":562,"../../registry":638,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":648,"./style_defaults":663}],653:[function(v,ie,ae){"use strict";ie.exports=function(k,m,E){return k.x="xVal"in m?m.xVal:m.x,k.y="yVal"in m?m.yVal:m.y,m.xa&&(k.xaxis=m.xa),m.ya&&(k.yaxis=m.ya),"h"===E.orientation?(k.label=k.y,k.value=k.x):(k.label=k.x,k.value=k.y),k}},{}],654:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("tinycolor2"),m=v("../../lib").isArrayOrTypedArray;ae.coerceString=function(E,e,c){if("string"==typeof e){if(e||!E.noBlank)return e}else if(("number"==typeof e||!0===e)&&!E.strict)return String(e);return void 0!==c?c:E.dflt},ae.coerceNumber=function(E,e,c){if(_(e)){e=+e;var d=E.min,n=E.max;if(!(void 0!==d&&e<d||void 0!==n&&e>n))return e}return void 0!==c?c:E.dflt},ae.coerceColor=function(E,e,c){return k(e).isValid()?e:void 0!==c?c:E.dflt},ae.coerceEnumerated=function(E,e,c){return E.coerceNumber&&(e=+e),-1!==E.values.indexOf(e)?e:void 0!==c?c:E.dflt},ae.getValue=function(E,e){var c;return Array.isArray(E)?e<E.length&&(c=E[e]):c=E,c},ae.getLineWidth=function(E,e){return 0<e.mlw?e.mlw:m(E.marker.line.width)?0:E.marker.line.width}},{"../../lib":503,"fast-isnumeric":190,tinycolor2:312}],655:[function(v,ie,ae){"use strict";var _=v("../../components/fx"),k=v("../../registry"),m=v("../../components/color"),E=v("../../lib").fillText,e=v("./helpers").getLineWidth,c=v("../../plots/cartesian/axes").hoverLabelText,d=v("../../constants/numerical").BADNUM;function t(a,r,g,s,b){var T,M,f,u,h,o,C,x=a.cd,S=x[0].trace,p=x[0].t,w="closest"===s,l="waterfall"===S.type,y=a.maxHoverDistance,A=a.maxSpikeDistance;"h"===S.orientation?(T=g,M=r,f="y",u="x",h=W,o=oe):(T=r,M=g,f="x",u="y",o=W,h=oe);var R=S[f+"period"],z=w||R;function O(re){return F(re,-1)}function I(re){return F(re,1)}function F(re,le){return re[f]+le*re.w/2}function D(re){return re[f+"End"]-re[f+"Start"]}var N=w?O:R?function(re){return re.p-D(re)/2}:function(re){return Math.min(O(re),re.p-p.bardelta/2)},U=w?I:R?function(re){return re.p+D(re)/2}:function(re){return Math.max(I(re),re.p+p.bardelta/2)};function X(re,le,ge){return b.finiteRange&&(ge=0),_.inbox(re-T,le-T,ge+Math.min(1,Math.abs(le-re)/C)-1)}function oe(re){return X(N(re),U(re),y)}function ne(re){var le=re[u];if(l){var ge=Math.abs(re.rawS)||0;M>0?le+=ge:M<0&&(le-=ge)}return le}function W(re){var le=M,ge=re.b,pe=ne(re);return _.inbox(ge-le,pe-le,y+(pe-le)/(pe-ge)-1)}var $=a[f+"a"],V=a[u+"a"];C=Math.abs($.r2c($.range[1])-$.r2c($.range[0]));var q=_.getDistanceFunction(s,h,o,function H(re){return(h(re)+o(re))/2});if(_.getClosest(x,q,a),!1!==a.index&&x[a.index].p!==d){z||(N=function(re){return Math.min(O(re),re.p-p.bargroupwidth/2)},U=function(re){return Math.max(I(re),re.p+p.bargroupwidth/2)});var Y=x[a.index],te=S.base?Y.b+Y.s:Y.s;a[u+"0"]=a[u+"1"]=V.c2p(Y[u],!0),a[u+"LabelVal"]=te;var J=p.extents[p.extents.round(Y.p)];return a[f+"0"]=$.c2p(w?N(Y):J[0],!0),a[f+"1"]=$.c2p(w?U(Y):J[1],!0),a[f+"LabelVal"]=void 0!==Y.orig_p?Y.orig_p:Y.p,a.labelLabel=c($,a[f+"LabelVal"],S[f+"hoverformat"]),a.valueLabel=c(V,a[u+"LabelVal"],S[u+"hoverformat"]),a.baseLabel=c(V,Y.b,S[u+"hoverformat"]),a.spikeDistance=(function G(re){var le=M,ge=re.b,pe=ne(re);return _.inbox(ge-le,pe-le,A+(pe-le)/(pe-ge)-1)}(Y)+function se(re){return X(O(re),I(re),A)}(Y))/2,a[f+"Spike"]=$.c2p(Y.p,!0),E(Y,S,a),a.hovertemplate=S.hovertemplate,a}}function i(a,r){var g=r.mcc||a.marker.color,s=r.mlcc||a.marker.line.color,b=e(a,r);return m.opacity(g)?g:m.opacity(s)&&b?s:void 0}ie.exports={hoverPoints:function n(a,r,g,s,b){var x=t(a,r,g,s,b);if(x){var S=x.cd,p=S[0].trace,w=S[x.index];return x.color=i(p,w),k.getComponentMethod("errorbars","hoverInfo")(w,p,x),[x]}},hoverOnBars:t,getTraceColor:i}},{"../../components/color":366,"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./helpers":654}],656:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults").supplyDefaults,crossTraceDefaults:v("./defaults").crossTraceDefaults,supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc"),crossTraceCalc:v("./cross_trace_calc").crossTraceCalc,colorbar:v("../scatter/marker_colorbar"),arraysToCalcdata:v("./arrays_to_calcdata"),plot:v("./plot").plot,style:v("./style").style,styleOnSelect:v("./style").styleOnSelect,hoverPoints:v("./hover").hoverPoints,eventData:v("./event_data"),selectPoints:v("./select"),moduleType:"trace",name:"bar",basePlotModule:v("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":945,"./arrays_to_calcdata":647,"./attributes":648,"./calc":649,"./cross_trace_calc":651,"./defaults":652,"./event_data":653,"./hover":655,"./layout_attributes":657,"./layout_defaults":658,"./plot":659,"./select":660,"./style":662}],657:[function(v,ie,ae){"use strict";ie.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],658:[function(v,ie,ae){"use strict";var _=v("../../registry"),k=v("../../plots/cartesian/axes"),m=v("../../lib"),E=v("./layout_attributes");ie.exports=function(e,c,d){function n(p,w){return m.coerce(e,c,E,p,w)}for(var t=!1,i=!1,a=!1,r={},g=n("barmode"),s=0;s<d.length;s++){var b=d[s];if(_.traceIs(b,"bar")&&b.visible){if(t=!0,"group"===g){var x=b.xaxis+b.yaxis;r[x]&&(a=!0),r[x]=!0}b.visible&&"histogram"===b.type&&"category"!==k.getFromId({_fullLayout:c},b["v"===b.orientation?"xaxis":"yaxis"]).type&&(i=!0)}}t?("overlay"!==g&&n("barnorm"),n("bargap",i&&!a?0:.2),n("bargroupgap")):delete c.barmode}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./layout_attributes":657}],659:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("fast-isnumeric"),m=v("../../lib"),E=v("../../lib/svg_text_utils"),e=v("../../components/color"),c=v("../../components/drawing"),d=v("../../registry"),n=v("../../plots/cartesian/axes").tickText,t=v("./uniform_text"),i=t.recordMinTextSize,a=t.clearMinTextSize,r=v("./style"),g=v("./helpers"),s=v("./constants"),b=v("./attributes"),x=b.text,S=b.textposition,p=v("../../components/fx/helpers").appendArrayPointValue,w=s.TEXTPAD;function l(N){return N.id}function A(N,U){return N<U?1:-1}function M(N,U,X,oe){var se;return!U.uniformtext.mode&&f(X)?(oe&&(se=oe()),N.transition().duration(X.duration).ease(X.easing).each("end",function(){se&&se()}).each("interrupt",function(){se&&se()})):N}function f(N){return N&&N.duration>0}function o(N){return"auto"===N?0:N}function C(N,U){var X=Math.PI/180*U,oe=Math.abs(Math.sin(X)),se=Math.abs(Math.cos(X));return{x:N.width*se+N.height*oe,y:N.width*oe+N.height*se}}function R(N,U,X,oe,se,ne){var W=!!ne.isHorizontal,G=!!ne.constrained,$=ne.angle||0,V=ne.anchor||"end",H="end"===V,q="start"===V,Y=((ne.leftToRight||0)+1)/2,te=1-Y,J=se.width,j=se.height,re=Math.abs(U-N),le=Math.abs(oe-X),ge=re>2*w&&le>2*w?w:0;re-=2*ge,le-=2*ge;var pe=o($);"auto"===$&&!(J<=re&&j<=le)&&(J>re||j>le)&&(!(J>le||j>re)||J<j!=re<le)&&(pe+=90);var xe=C(se,pe),ke=1;G&&(ke=Math.min(1,re/xe.x,le/xe.y));var we=se.left*te+se.right*Y,de=(se.top+se.bottom)/2,be=(N+w)*te+(U-w)*Y,Le=(X+oe)/2,De=0,ye=0;if(q||H){var Ce=(W?xe.x:xe.y)/2,Fe=W?A(N,U):A(X,oe);W?q?(be=N+Fe*ge,De=-Fe*Ce):(be=U-Fe*ge,De=Fe*Ce):q?(Le=X+Fe*ge,ye=-Fe*Ce):(Le=oe-Fe*ge,ye=Fe*Ce)}return{textX:we,textY:de,targetX:be,targetY:Le,anchorX:De,anchorY:ye,scale:ke,rotate:pe}}ie.exports={plot:function u(N,U,X,oe,se,ne){var W=U.xaxis,G=U.yaxis,$=N._fullLayout;se||(se={mode:$.barmode,norm:$.barmode,gap:$.bargap,groupgap:$.bargroupgap},a("bar",$));var V=m.makeTraceGroups(oe,X,"trace bars").each(function(H){var q=_.select(this),K=H[0].trace,j="bar"===K.type||"funnel"===K.type,re=0;"waterfall"===K.type&&K.connector.visible&&"between"===K.connector.mode&&(re=K.connector.line.width/2);var le="h"===K.orientation,ge=f(se),pe=m.ensureSingle(q,"g","points"),xe=function y(N){if(N.ids)return l}(K),ke=pe.selectAll("g.point").data(m.identity,xe);ke.enter().append("g").classed("point",!0),ke.exit().remove(),ke.each(function(de,be){var Be,Ie,Le=_.select(this),De=function T(N,U,X,oe){var se=[],ne=[],W=oe?U:X,G=oe?X:U;return se[0]=W.c2p(N.s0,!0),ne[0]=G.c2p(N.p0,!0),se[1]=W.c2p(N.s1,!0),ne[1]=G.c2p(N.p1,!0),oe?[se,ne]:[ne,se]}(de,W,G,le),ye=De[0][0],Ce=De[0][1],Fe=De[1][0],Ke=De[1][1],Ue=0==(le?Ce-ye:Ke-Fe);if(Ue&&j&&g.getLineWidth(K,de)&&(Ue=!1),Ue||(Ue=!(k(ye)&&k(Ce)&&k(Fe)&&k(Ke))),de.isBlank=Ue,Ue&&(le?Ce=ye:Ke=Fe),re&&!Ue&&(le?(ye-=A(ye,Ce)*re,Ce+=A(ye,Ce)*re):(Fe-=A(Fe,Ke)*re,Ke+=A(Fe,Ke)*re)),"waterfall"===K.type){if(!Ue){var nt=K[de.dir].marker;Be=nt.line.width,Ie=nt.color}}else Be=g.getLineWidth(K,de),Ie=de.mc||K.marker.color;function gt(wt){var at=_.round(Be/2%1,2);return 0===se.gap&&0===se.groupgap?_.round(Math.round(wt)-at,2):wt}if(!N._context.staticPlot){var Bt=e.opacity(Ie)<1||Be>.01?gt:function Nt(wt,at,vt){return vt&&wt===at?wt:Math.abs(wt-at)>=2?gt(wt):wt>at?Math.ceil(wt):Math.floor(wt)};ye=Bt(ye,Ce,le),Ce=Bt(Ce,ye,le),Fe=Bt(Fe,Ke,!le),Ke=Bt(Ke,Fe,!le)}var Zt=M(m.ensureSingle(Le,"path"),$,se,ne);if(Zt.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Ce-ye)*(Ke-Fe))||Ue&&N._context.staticPlot?"M0,0Z":"M"+ye+","+Fe+"V"+Ke+"H"+Ce+"V"+Fe+"Z").call(c.setClipUrl,U.layerClipId,N),!$.uniformtext.mode&&ge){var Et=c.makePointStyleFns(K);c.singlePointStyle(de,Zt,K,Et,N)}(function h(N,U,X,oe,se,ne,W,G,$,V,H){var te,q=U.xaxis,K=U.yaxis,Y=N._fullLayout;function J(wt,at,vt){return m.ensureSingle(wt,"text").text(at).attr({class:"bartext bartext-"+te,"text-anchor":"middle","data-notex":1}).call(c.font,vt).call(E.convertToTspans,N)}var j=oe[0].trace,re="h"===j.orientation,le=function O(N,U,X,oe,se){var G,ne=U[0].trace;return G=ne.texttemplate?function F(N,U,X,oe,se){var ne=U[0].trace,W=m.castOption(ne,X,"texttemplate");if(!W)return"";var q,K,Y,te,G="histogram"===ne.type,$="waterfall"===ne.type,V="funnel"===ne.type,H="h"===ne.orientation;function J(ke){return n(K,K.c2l(ke),!0).text}function j(ke){return n(te,te.c2l(ke),!0).text}H?(q="y",K=se,Y="x",te=oe):(q="x",K=oe,Y="y",te=se);var re=U[X],le={};le.label=re.p,le.labelLabel=le[q+"Label"]=J(re.p);var ge=m.castOption(ne,re.i,"text");(0===ge||ge)&&(le.text=ge),le.value=re.s,le.valueLabel=le[Y+"Label"]=j(re.s);var pe={};p(pe,ne,re.i),(G||void 0===pe.x)&&(pe.x=H?le.value:le.label),(G||void 0===pe.y)&&(pe.y=H?le.label:le.value),(G||void 0===pe.xLabel)&&(pe.xLabel=H?le.valueLabel:le.labelLabel),(G||void 0===pe.yLabel)&&(pe.yLabel=H?le.labelLabel:le.valueLabel),$&&(le.delta=+re.rawS||re.s,le.deltaLabel=j(le.delta),le.final=re.v,le.finalLabel=j(le.final),le.initial=le.final-le.delta,le.initialLabel=j(le.initial)),V&&(le.value=re.s,le.valueLabel=j(le.value),le.percentInitial=re.begR,le.percentInitialLabel=m.formatPercent(re.begR),le.percentPrevious=re.difR,le.percentPreviousLabel=m.formatPercent(re.difR),le.percentTotal=re.sumR,le.percenTotalLabel=m.formatPercent(re.sumR));var xe=m.castOption(ne,re.i,"customdata");return xe&&(le.customdata=xe),m.texttemplateString(W,le,N._d3locale,pe,le,ne._meta||{})}(N,U,X,oe,se):ne.textinfo?function D(N,U,X,oe){var se=N[0].trace,ne="h"===se.orientation,W="waterfall"===se.type,G="funnel"===se.type;function $(xe){return n(ne?oe:X,xe,!0).text}function V(xe){return n(ne?X:oe,+xe,!0).text}var te,q=N[U],K=se.textinfo.split("+"),Y=[],J=function(xe){return-1!==K.indexOf(xe)};if(J("label")&&Y.push($(N[U].p)),J("text")&&(0===(te=m.castOption(se,q.i,"text"))||te)&&Y.push(te),W){var j=+q.rawS||q.s,re=q.v,le=re-j;J("initial")&&Y.push(V(le)),J("delta")&&Y.push(V(j)),J("final")&&Y.push(V(re))}if(G){J("value")&&Y.push(V(q.s));var ge=0;J("percent initial")&&ge++,J("percent previous")&&ge++,J("percent total")&&ge++;var pe=ge>1;J("percent initial")&&(te=m.formatPercent(q.begR),pe&&(te+=" of initial"),Y.push(te)),J("percent previous")&&(te=m.formatPercent(q.difR),pe&&(te+=" of previous"),Y.push(te)),J("percent total")&&(te=m.formatPercent(q.sumR),pe&&(te+=" of total"),Y.push(te))}return Y.join("<br>")}(U,X,oe,se):g.getValue(ne.text,X),g.coerceString(x,G)}(Y,oe,se,q,K);te=function I(N,U){var X=g.getValue(N.textposition,U);return g.coerceEnumerated(S,X)}(j,se);var pe=oe[se],xe=!("stack"===V.mode||"relative"===V.mode)||pe._outmost;if(le&&"none"!==te&&(!pe.isBlank&&ne!==W&&G!==$||"auto"!==te&&"inside"!==te)){var ke=Y.font,we=r.getBarColor(oe[se],j),de=r.getInsideTextFont(j,se,ke,we),be=r.getOutsideTextFont(j,se,ke),Le=X.datum();re?"log"===q.type&&Le.s0<=0&&(ne=q.range[0]<q.range[1]?0:q._length):"log"===K.type&&Le.s0<=0&&(G=K.range[0]<K.range[1]?K._length:0);var Ce,Fe,Ke,Ue,Be,De=Math.abs(W-ne)-2*w,ye=Math.abs($-G)-2*w;if("outside"===te&&!xe&&!pe.hasB&&(te="inside"),"auto"===te&&(xe?(te="inside",Ce=J(X,le,Be=m.ensureUniformFontSize(N,de)),Ue=(Fe=c.bBox(Ce.node())).height,(Ke=Fe.width)>0&&Ue>0&&(Ke<=De&&Ue<=ye||Ke<=ye&&Ue<=De||(re?De>=Ke*(ye/Ue):ye>=Ue*(De/Ke)))?te="inside":(te="outside",Ce.remove(),Ce=null)):te="inside"),!Ce){var St=(Ce=J(X,le,Be=m.ensureUniformFontSize(N,"outside"===te?be:de))).attr("transform");if(Ce.attr("transform",""),Ke=(Fe=c.bBox(Ce.node())).width,Ue=Fe.height,Ce.attr("transform",St),Ke<=0||Ue<=0)return void Ce.remove()}var Zt,Bt=j.textangle;(Zt="outside"===te?function z(N,U,X,oe,se,ne){var Y,W=!!ne.isHorizontal,G=!!ne.constrained,$=ne.angle||0,V=se.width,H=se.height,q=Math.abs(U-N),K=Math.abs(oe-X);Y=W?K>2*w?w:0:q>2*w?w:0;var te=1;G&&(te=W?Math.min(1,K/H):Math.min(1,q/V));var J=o($),j=C(se,J),re=(W?j.x:j.y)/2,le=(se.left+se.right)/2,ge=(se.top+se.bottom)/2,pe=(N+U)/2,xe=(X+oe)/2,ke=0,we=0,de=W?A(U,N):A(X,oe);return W?(pe=U-de*Y,ke=de*re):(xe=oe+de*Y,we=-de*re),{textX:le,textY:ge,targetX:pe,targetY:xe,anchorX:ke,anchorY:we,scale:te,rotate:J}}(ne,W,G,$,Fe,{isHorizontal:re,constrained:"both"===j.constraintext||"outside"===j.constraintext,angle:Bt}):R(ne,W,G,$,Fe,{isHorizontal:re,constrained:"both"===j.constraintext||"inside"===j.constraintext,angle:Bt,anchor:j.insidetextanchor})).fontSize=Be.size,i("histogram"===j.type?"bar":j.type,Zt,Y),pe.transform=Zt,M(Ce,Y,V,H).attr("transform",m.getTextTransform(Zt))}else X.select("text").remove()})(N,U,Le,H,be,ye,Ce,Fe,Ke,se,ne),U.layerClipId&&c.hideOutsideRangePoint(de,Le.select("text"),W,G,K.xcalendar,K.ycalendar)}),c.setClipUrl(q,!1===K.cliponaxis?null:U.layerClipId,N)});d.getComponentMethod("errorbars","plot")(N,V,U,se)},toMoveInsideBar:R}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx/helpers":402,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"./attributes":648,"./constants":650,"./helpers":654,"./style":662,"./uniform_text":664,"@plotly/d3":58,"fast-isnumeric":190}],660:[function(v,ie,ae){"use strict";function _(k,m,E,e,c){var d=m.c2p(e?k.s0:k.p0,!0),n=m.c2p(e?k.s1:k.p1,!0),t=E.c2p(e?k.p0:k.s0,!0),i=E.c2p(e?k.p1:k.s1,!0);return c?[(d+n)/2,(t+i)/2]:e?[n,(t+i)/2]:[(d+n)/2,i]}ie.exports=function(m,E){var r,e=m.cd,c=m.xaxis,d=m.yaxis,n=e[0].trace,t="funnel"===n.type,i="h"===n.orientation,a=[];if(!1===E)for(r=0;r<e.length;r++)e[r].selected=0;else for(r=0;r<e.length;r++){var g=e[r],s="ct"in g?g.ct:_(g,c,d,i,t);E.contains(s,!1,r,m)?(a.push({pointNumber:r,x:c.c2d(g.x),y:d.c2d(g.y)}),g.selected=1):g.selected=0}return a}},{}],661:[function(v,ie,ae){"use strict";ie.exports=m;var _=v("../../lib").distinctVals,k=v("../../constants/numerical").BADNUM;function m(E,e){this.traces=E,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var c=1/0,d=[],n=0;n<E.length;n++){for(var t=E[n],i=0;i<t.length;i++){var a=t[i];a.p!==k&&d.push(a.p)}t[0]&&t[0].width1&&(c=Math.min(t[0].width1,c))}this.positions=d;var r=_(d);this.distinctPositions=r.vals,this.minDiff=1===r.vals.length&&c!==1/0?c:Math.min(r.minDiff,c);var g=(e.posAxis||{}).type;("category"===g||"multicategory"===g)&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}m.prototype.put=function(e,c){var d=this.getLabel(e,c),n=this.bins[d]||0;return this.bins[d]=n+c,n},m.prototype.get=function(e,c){var d=this.getLabel(e,c);return this.bins[d]||0},m.prototype.getLabel=function(e,c){return(c<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?e:Math.round(e/this.binWidth))}},{"../../constants/numerical":479,"../../lib":503}],662:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../components/color"),m=v("../../components/drawing"),E=v("../../lib"),e=v("../../registry"),c=v("./uniform_text").resizeText,d=v("./attributes"),n=d.textfont,t=d.insidetextfont,i=d.outsidetextfont,a=v("./helpers");function g(M,f,u){m.pointStyle(M.selectAll("path"),f,u),s(M,f,u)}function s(M,f,u){M.selectAll("text").each(function(h){var o=_.select(this),C=E.ensureUniformFontSize(u,p(o,h,f,u));m.font(o,C)})}function p(M,f,u,h){var o=h._fullLayout.font,C=u.textfont;if(M.classed("bartext-inside")){var R=T(f,u);C=l(u,f.i,o,R)}else M.classed("bartext-outside")&&(C=y(u,f.i,o));return C}function w(M,f,u){return A(n,M.textfont,f,u)}function l(M,f,u,h){var o=w(M,f,u);return(void 0===M._input.textfont||void 0===M._input.textfont.color||Array.isArray(M.textfont.color)&&void 0===M.textfont.color[f])&&(o={color:k.contrast(h),family:o.family,size:o.size}),A(t,M.insidetextfont,f,o)}function y(M,f,u){var h=w(M,f,u);return A(i,M.outsidetextfont,f,h)}function A(M,f,u,h){var o=a.getValue((f=f||{}).family,u),C=a.getValue(f.size,u),R=a.getValue(f.color,u);return{family:a.coerceString(M.family,o,h.family),size:a.coerceNumber(M.size,C,h.size),color:a.coerceColor(M.color,R,h.color)}}function T(M,f){return"waterfall"===f.type?f[M.dir].marker.color:M.mcc||M.mc||f.marker.color}ie.exports={style:function r(M){var f=_.select(M).selectAll("g.barlayer").selectAll("g.trace");c(M,f,"bar");var u=f.size(),h=M._fullLayout;f.style("opacity",function(o){return o[0].trace.opacity}).each(function(o){("stack"===h.barmode&&u>1||0===h.bargap&&0===h.bargroupgap&&!o[0].trace.marker.line.width)&&_.select(this).attr("shape-rendering","crispEdges")}),f.selectAll("g.points").each(function(o){g(_.select(this),o[0].trace,M)}),e.getComponentMethod("errorbars","style")(f)},styleTextPoints:s,styleOnSelect:function b(M,f,u){var h=f[0].trace;h.selectedpoints?function x(M,f,u){m.selectedPointStyle(M.selectAll("path"),f),function S(M,f,u){M.each(function(h){var C,o=_.select(this);if(h.selected){C=E.ensureUniformFontSize(u,p(o,h,f,u));var R=f.selected.textfont&&f.selected.textfont.color;R&&(C.color=R),m.font(o,C)}else m.selectedTextStyle(o,f)})}(M.selectAll("text"),f,u)}(u,h,M):(g(u,h,M),e.getComponentMethod("errorbars","style")(u))},getInsideTextFont:l,getOutsideTextFont:y,getBarColor:T,resizeText:c}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../registry":638,"./attributes":648,"./helpers":654,"./uniform_text":664,"@plotly/d3":58}],663:[function(v,ie,ae){"use strict";var _=v("../../components/color"),k=v("../../components/colorscale/helpers").hasColorscale,m=v("../../components/colorscale/defaults"),E=v("../../lib").coercePattern;ie.exports=function(c,d,n,t,i){var a=n("marker.color",t),r=k(c,"marker");r&&m(c,d,i,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",_.defaultLine),k(c,"marker.line")&&m(c,d,i,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),E(n,"marker.pattern",a,r),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],664:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../lib");function c(d){return"_"+d+"Text_minsize"}ie.exports={recordMinTextSize:function E(d,n,t){if(t.uniformtext.mode){var i=c(d),a=t.uniformtext.minsize,r=n.scale*n.fontSize;n.hide=r<a,t[i]=t[i]||1/0,n.hide||(t[i]=Math.min(t[i],Math.max(r,a)))}},clearMinTextSize:function e(d,n){n[c(d)]=void 0},resizeText:function m(d,n,t){var i=d._fullLayout,a=i["_"+t+"Text_minsize"];if(a){var g,r="hide"===i.uniformtext.mode;switch(t){case"funnelarea":case"pie":case"sunburst":g="g.slice";break;case"treemap":case"icicle":g="g.slice, g.pathbar";break;default:g="g.points > g.point"}n.selectAll(g).each(function(s){var b=s.transform;b&&(b.scale=r&&b.hide?0:a/b.fontSize,_.select(this).select("text").attr("transform",k.getTextTransform(b)))})}}}},{"../../lib":503,"@plotly/d3":58}],665:[function(v,ie,ae){"use strict";var _=v("../../plots/template_attributes").hovertemplateAttrs,k=v("../../lib/extend").extendFlat,m=v("../scatterpolar/attributes"),E=v("../bar/attributes");ie.exports={r:m.r,theta:m.theta,r0:m.r0,dr:m.dr,theta0:m.theta0,dtheta:m.dtheta,thetaunit:m.thetaunit,base:k({},E.base,{}),offset:k({},E.offset,{}),width:k({},E.width,{}),text:k({},E.text,{}),hovertext:k({},E.hovertext,{}),marker:E.marker,hoverinfo:m.hoverinfo,hovertemplate:_(),selected:E.selected,unselected:E.unselected}},{"../../lib/extend":493,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatterpolar/attributes":1002}],666:[function(v,ie,ae){"use strict";var _=v("../../components/colorscale/helpers").hasColorscale,k=v("../../components/colorscale/calc"),m=v("../bar/arrays_to_calcdata"),E=v("../bar/cross_trace_calc").setGroupPositions,e=v("../scatter/calc_selection"),c=v("../../registry").traceIs,d=v("../../lib").extendFlat;ie.exports={calc:function n(i,a){for(var r=i._fullLayout,g=a.subplot,b=r[g].angularaxis,x=r[g].radialaxis.makeCalcdata(a,"r"),S=b.makeCalcdata(a,"theta"),p=a._length,w=new Array(p),l=x,y=S,A=0;A<p;A++)w[A]={p:y[A],s:l[A]};function T(M){var f=a[M];void 0!==f&&(a["_"+M]=Array.isArray(f)?b.makeCalcdata(a,M):b.d2c(f,a.thetaunit))}return"linear"===b.type&&(T("width"),T("offset")),_(a,"marker")&&k(i,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),_(a,"marker.line")&&k(i,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}),m(w,a),e(w,a),w},crossTraceCalc:function t(i,a,r){for(var g=i.calcdata,s=[],b=0;b<g.length;b++){var x=g[b],S=x[0].trace;!0===S.visible&&c(S,"bar")&&S.subplot===r&&s.push(x)}var p=d({},a.radialaxis,{_id:"x"});E(i,a.angularaxis,p,s,{mode:a.barmode,norm:a.barnorm,gap:a.bargap,groupgap:a.bargroupgap})}}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../lib":503,"../../registry":638,"../bar/arrays_to_calcdata":647,"../bar/cross_trace_calc":651,"../scatter/calc_selection":929}],667:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../scatterpolar/defaults").handleRThetaDefaults,m=v("../bar/style_defaults"),E=v("./attributes");ie.exports=function(c,d,n,t){function i(r,g){return _.coerce(c,d,E,r,g)}k(c,d,t,i)?(i("thetaunit"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate"),m(c,d,i,n,t),_.coerceSelectionMarkerOpacity(d,i)):d.visible=!1}},{"../../lib":503,"../bar/style_defaults":663,"../scatterpolar/defaults":1004,"./attributes":665}],668:[function(v,ie,ae){"use strict";var _=v("../../components/fx"),k=v("../../lib"),m=v("../bar/hover").getTraceColor,E=k.fillText,e=v("../scatterpolar/hover").makeHoverPointText,c=v("../../plots/polar/helpers").isPtInsidePolygon;ie.exports=function(n,t,i){var a=n.cd,r=a[0].trace,g=n.subplot,s=g.radialAxis,x=g.vangles,S=x?c:k.isPtInsideSector,p=n.maxHoverDistance,w=g.angularAxis._period||2*Math.PI,l=Math.abs(s.g2p(Math.sqrt(t*t+i*i))),y=Math.atan2(i,t);if(s.range[0]>s.range[1]&&(y+=Math.PI),_.getClosest(a,function(u){return S(l,y,[u.rp0,u.rp1],[u.thetag0,u.thetag1],x)?p+Math.min(1,Math.abs(u.thetag1-u.thetag0)/w)-1+(u.rp1-l)/(u.rp1-u.rp0)-1:1/0},n),!1!==n.index){var M=a[n.index];n.x0=n.x1=M.ct[0],n.y0=n.y1=M.ct[1];var f=k.extendFlat({},M,{r:M.s,theta:M.p});return E(M,r,n),e(f,r,g,n),n.hovertemplate=r.hovertemplate,n.color=m(r,M),n.xLabelVal=n.yLabelVal=void 0,M.s<0&&(n.idealAlign="left"),[n]}}},{"../../components/fx":406,"../../lib":503,"../../plots/polar/helpers":621,"../bar/hover":655,"../scatterpolar/hover":1006}],669:[function(v,ie,ae){"use strict";ie.exports={moduleType:"trace",name:"barpolar",basePlotModule:v("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("../scatterpolar/format_labels"),style:v("../bar/style").style,styleOnSelect:v("../bar/style").styleOnSelect,hoverPoints:v("./hover"),selectPoints:v("../bar/select"),meta:{}}},{"../../plots/polar":622,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":945,"../scatterpolar/format_labels":1005,"./attributes":665,"./calc":666,"./defaults":667,"./hover":668,"./layout_attributes":670,"./layout_defaults":671,"./plot":672}],670:[function(v,ie,ae){"use strict";ie.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],671:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./layout_attributes");ie.exports=function(m,E,e){var d,c={};function n(a,r){return _.coerce(m[d]||{},E[d],k,a,r)}for(var t=0;t<e.length;t++){var i=e[t];"barpolar"===i.type&&!0===i.visible&&(c[d=i.subplot]||(n("barmode"),n("bargap"),c[d]=1))}}},{"../../lib":503,"./layout_attributes":670}],672:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("fast-isnumeric"),m=v("../../lib"),E=v("../../components/drawing"),e=v("../../plots/polar/helpers");ie.exports=function(n,t,i){var a=t.xaxis,r=t.yaxis,g=t.radialAxis,s=t.angularAxis,b=function c(d){var n=d.cxx,t=d.cyy;return d.vangles?function(i,a,r,g){var s,b;m.angleDelta(r,g)>0?(s=r,b=g):(s=g,b=r);var x=e.findEnclosingVertexAngles(s,d.vangles)[0],S=e.findEnclosingVertexAngles(b,d.vangles)[1];return e.pathPolygonAnnulus(i,a,s,b,[x,(s+b)/2,S],n,t)}:function(i,a,r,g){return m.pathAnnulus(i,a,r,g,n,t)}}(t),x=t.layers.frontplot.select("g.barlayer");m.makeTraceGroups(x,i,"trace bars").each(function(){var S=_.select(this),w=m.ensureSingle(S,"g","points").selectAll("g.point").data(m.identity);w.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),w.exit().remove(),w.each(function(l){var u,y=_.select(this),A=l.rp0=g.c2p(l.s0),T=l.rp1=g.c2p(l.s1),M=l.thetag0=s.c2g(l.p0),f=l.thetag1=s.c2g(l.p1);if(k(A)&&k(T)&&k(M)&&k(f)&&A!==T&&M!==f){var h=g.c2g(l.s1),o=(M+f)/2;l.ct=[a.c2p(h*Math.cos(o)),r.c2p(h*Math.sin(o))],u=b(A,T,M,f)}else u="M0,0Z";m.ensureSingle(y,"path").attr("d",u)}),E.setClipUrl(S,t._hasClipOnAxisFalse?t.clipIds.forTraces:null,n)})}},{"../../components/drawing":388,"../../lib":503,"../../plots/polar/helpers":621,"@plotly/d3":58,"fast-isnumeric":190}],673:[function(v,ie,ae){"use strict";var _=v("../scatter/attributes"),k=v("../bar/attributes"),m=v("../../components/color/attributes"),E=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=v("../../plots/template_attributes").hovertemplateAttrs,c=v("../../lib/extend").extendFlat,d=_.marker,n=d.line;ie.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:_.xperiod,yperiod:_.yperiod,xperiod0:_.xperiod0,yperiod0:_.yperiod0,xperiodalignment:_.xperiodalignment,yperiodalignment:_.yperiodalignment,xhoverformat:E("x"),yhoverformat:E("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:c({},d.symbol,{arrayOk:!1,editType:"plot"}),opacity:c({},d.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:c({},d.size,{arrayOk:!1,editType:"calc"}),color:c({},d.color,{arrayOk:!1,editType:"style"}),line:{color:c({},n.color,{arrayOk:!1,dflt:m.defaultLine,editType:"style"}),width:c({},n.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:_.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup,selected:{marker:_.selected.marker,editType:"style"},unselected:{marker:_.unselected.marker,editType:"style"},text:c({},_.text,{}),hovertext:c({},_.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927}],674:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../plots/cartesian/axes"),m=v("../../plots/cartesian/align_period"),E=v("../../lib"),e=v("../../constants/numerical").BADNUM,c=E._;ie.exports=function(y,A){var o,C,R,z,O,I,F,T=y._fullLayout,M=k.getFromId(y,A.xaxis||"x"),f=k.getFromId(y,A.yaxis||"y"),u=[],h="violin"===A.type?"_numViolins":"_numBoxes";"h"===A.orientation?(R=M,z="x",O=f,I="y",F=!!A.yperiodalignment):(R=f,z="y",O=M,I="x",F=!!A.xperiodalignment);var ne,W,G,$,V,H,D=function d(l,y,A,T){var C,f=y+"0"in l;if(y in l||f&&"d"+y in l){var h=A.makeCalcdata(l,y);return[m(l,A,y,h).vals,h]}C=f?l[y+"0"]:"name"in l&&("category"===A.type||_(l.name)&&-1!==["linear","log"].indexOf(A.type)||E.isDateTime(l.name)&&"date"===A.type)?l.name:T;for(var R="multicategory"===A.type?A.r2c_just_indices(C):A.d2c(C,0,l[y+"calendar"]),z=l._length,O=new Array(z),I=0;I<z;I++)O[I]=R;return[O]}(A,I,O,T[h]),N=D[0],U=D[1],X=E.distinctVals(N,O),oe=X.vals,se=X.minDiff/2,q="all"===(A.boxpoints||A.points)?E.identity:function(St){return St.v<ne.lf||St.v>ne.uf};if(A._hasPreCompStats){var K=A[z],Y=function(St){return R.d2c((A[St]||[])[o])},te=1/0,J=-1/0;for(o=0;o<A._length;o++){var j=N[o];if(_(j)){if((ne={}).pos=ne[I]=j,F&&U&&(ne.orig_p=U[o]),ne.q1=Y("q1"),ne.med=Y("median"),ne.q3=Y("q3"),W=[],K&&E.isArrayOrTypedArray(K[o]))for(C=0;C<K[o].length;C++)(H=R.d2c(K[o][C]))!==e&&(a(V={v:H,i:[o,C]},A,[o,C]),W.push(V));if(ne.pts=W.sort(g),$=(G=ne[z]=W.map(s)).length,ne.med!==e&&ne.q1!==e&&ne.q3!==e&&ne.med>=ne.q1&&ne.q3>=ne.med){var re=Y("lowerfence");ne.lf=re!==e&&re<=ne.q1?re:b(ne,G,$);var le=Y("upperfence");ne.uf=le!==e&&le>=ne.q3?le:x(ne,G,$);var ge=Y("mean");ne.mean=ge!==e?ge:$?E.mean(G,$):(ne.q1+ne.q3)/2;var pe=Y("sd");ne.sd=ge!==e&&pe>=0?pe:$?E.stdev(G,$,ne.mean):ne.q3-ne.q1,ne.lo=S(ne),ne.uo=p(ne);var xe=Y("notchspan");xe=xe!==e&&xe>0?xe:w(ne,$),ne.ln=ne.med-xe,ne.un=ne.med+xe;var ke=ne.lf,we=ne.uf;A.boxpoints&&G.length&&(ke=Math.min(ke,G[0]),we=Math.max(we,G[$-1])),A.notched&&(ke=Math.min(ke,ne.ln),we=Math.max(we,ne.un)),ne.min=ke,ne.max=we}else{var de;E.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+ne.q1,"median = "+ne.med,"q3 = "+ne.q3].join("\n")),ne.med=de=ne.med!==e?ne.med:ne.q1!==e?ne.q3!==e?(ne.q1+ne.q3)/2:ne.q1:ne.q3!==e?ne.q3:0,ne.q1=ne.q3=de,ne.lf=ne.uf=de,ne.mean=ne.sd=de,ne.ln=ne.un=de,ne.min=ne.max=de}te=Math.min(te,ne.min),J=Math.max(J,ne.max),ne.pts2=W.filter(q),u.push(ne)}}A._extremes[R._id]=k.findExtremes(R,[te,J],{padded:!0})}else{var be=R.makeCalcdata(A,z),Le=function n(l,y){for(var A=l.length,T=new Array(A+1),M=0;M<A;M++)T[M]=l[M]-y;return T[A]=l[A-1]+y,T}(oe,se),De=oe.length,ye=function t(l){for(var y=new Array(l),A=0;A<l;A++)y[A]=[];return y}(De);for(o=0;o<A._length;o++)if(_(H=be[o])){var Ce=E.findBin(N[o],Le);Ce>=0&&Ce<De&&(a(V={v:H,i:o},A,o),ye[Ce].push(V))}var Fe=1/0,Ke=-1/0,Ue=A.quartilemethod,Be="exclusive"===Ue,Ie="inclusive"===Ue;for(o=0;o<De;o++)if(ye[o].length>0){var nt,gt;(ne={}).pos=ne[I]=oe[o],W=ne.pts=ye[o].sort(g),$=(G=ne[z]=W.map(s)).length,ne.min=G[0],ne.max=G[$-1],ne.mean=E.mean(G,$),ne.sd=E.stdev(G,$,ne.mean),ne.med=E.interp(G,.5),$%2&&(Be||Ie)?(Be?(nt=G.slice(0,$/2),gt=G.slice($/2+1)):Ie&&(nt=G.slice(0,$/2+1),gt=G.slice($/2)),ne.q1=E.interp(nt,.5),ne.q3=E.interp(gt,.5)):(ne.q1=E.interp(G,.25),ne.q3=E.interp(G,.75)),ne.lf=b(ne,G,$),ne.uf=x(ne,G,$),ne.lo=S(ne),ne.uo=p(ne);var Nt=w(ne,$);ne.ln=ne.med-Nt,ne.un=ne.med+Nt,Fe=Math.min(Fe,ne.ln),Ke=Math.max(Ke,ne.un),ne.pts2=W.filter(q),u.push(ne)}A._extremes[R._id]=k.findExtremes(R,A.notched?be.concat([Fe,Ke]):be,{padded:!0})}return function r(l,y){if(E.isArrayOrTypedArray(y.selectedpoints))for(var A=0;A<l.length;A++){for(var T=l[A].pts||[],M={},f=0;f<T.length;f++)M[T[f].i]=f;E.tagSelected(T,y,M)}}(u,A),u.length>0?(u[0].t={num:T[h],dPos:se,posLetter:I,valLetter:z,labels:{med:c(y,"median:"),min:c(y,"min:"),q1:c(y,"q1:"),q3:c(y,"q3:"),max:c(y,"max:"),mean:c(y,"sd"===A.boxmean?"mean \xb1 \u03c3:":"mean:"),lf:c(y,"lower fence:"),uf:c(y,"upper fence:")}},T[h]++,u):[{t:{empty:!0}}]};var i={text:"tx",hovertext:"htx"};function a(l,y,A){for(var T in i)E.isArrayOrTypedArray(y[T])&&(Array.isArray(A)?E.isArrayOrTypedArray(y[T][A[0]])&&(l[i[T]]=y[T][A[0]][A[1]]):l[i[T]]=y[T][A])}function g(l,y){return l.v-y.v}function s(l){return l.v}function b(l,y,A){return 0===A?l.q1:Math.min(l.q1,y[Math.min(E.findBin(2.5*l.q1-1.5*l.q3,y,!0)+1,A-1)])}function x(l,y,A){return 0===A?l.q3:Math.max(l.q3,y[Math.max(E.findBin(2.5*l.q3-1.5*l.q1,y),0)])}function S(l){return 4*l.q1-3*l.q3}function p(l){return 4*l.q3-3*l.q1}function w(l,y){return 0===y?0:1.57*(l.q3-l.q1)/Math.sqrt(y)}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"fast-isnumeric":190}],675:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/axes"),k=v("../../lib"),m=v("../../plots/cartesian/constraints").getAxisGroup,E=["v","h"];function c(d,n,t,i){var b,x,S,a=n.calcdata,r=n._fullLayout,g=i._id,s=g.charAt(0),p=[],w=0;for(b=0;b<t.length;b++)for(S=a[t[b]],x=0;x<S.length;x++)p.push(i.c2l(S[x].pos,!0)),w+=(S[x].pts2||[]).length;if(p.length){var l=k.distinctVals(p);("category"===i.type||"multicategory"===i.type)&&(l.minDiff=1);var y=l.minDiff/2;_.minDtick(i,l.minDiff,l.vals[0],!0);var T=r["violin"===d?"_numViolins":"_numBoxes"],M="group"===r[d+"mode"]&&T>1,f=1-r[d+"gap"],u=1-r[d+"groupgap"];for(b=0;b<t.length;b++){var z,O,I,F,h=(S=a[t[b]])[0].trace,o=S[0].t,C=h.width,R=h.side;if(C)z=O=F=C/2,I=0;else if(z=y,M){var D=m(r,i._id)+h.orientation,X=Object.keys(((r._alignmentOpts[D]||{})[h.alignmentgroup]||{}).offsetGroups||{}).length,oe=X||T;O=z*f*u/oe,I=2*z*(((X?h._offsetIndex:o.num)+.5)/oe-.5)*f,F=z*f/oe}else O=z*f*u,I=0,F=z;o.dPos=z,o.bPos=I,o.bdPos=O,o.wHover=F;var ne,W,$,V,H,q,K,Y,G=I+O,te=Boolean(C);if("positive"===R?(ne=z*(C?1:.5),$=G,W=$=I):"negative"===R?(ne=$=I,W=z*(C?1:.5),V=G):(ne=W=z,$=V=G),(h.boxpoints||h.points)&&w>0){var j=h.pointpos,re=h.jitter,le=h.marker.size/2,ge=0;j+re>=0&&((ge=G*(j+re))>ne?(te=!0,K=le,H=ge):ge>$&&(K=le,H=ne)),ge<=ne&&(H=ne);var pe=0;j-re<=0&&((pe=-G*(j-re))>W?(te=!0,Y=le,q=pe):pe>V&&(Y=le,q=W)),pe<=W&&(q=W)}else H=ne,q=W;var xe=new Array(S.length);for(x=0;x<S.length;x++)xe[x]=S[x].pos;h._extremes[g]=_.findExtremes(i,xe,{padded:te,vpadminus:q,vpadplus:H,vpadLinearized:!0,ppadminus:{x:Y,y:K}[s],ppadplus:{x:K,y:Y}[s]})}}}ie.exports={crossTraceCalc:function e(d,n){for(var t=d.calcdata,i=n.xaxis,a=n.yaxis,r=0;r<E.length;r++){for(var g=E[r],s="h"===g?a:i,b=[],x=0;x<t.length;x++){var S=t[x],w=S[0].trace;!0===w.visible&&("box"===w.type||"candlestick"===w.type)&&!S[0].t.empty&&(w.orientation||"v")===g&&w.xaxis===i._id&&w.yaxis===a._id&&b.push(x)}c("box",d,b,s)}},setPositionOffset:c}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562}],676:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../registry"),m=v("../../components/color"),E=v("../scatter/period_defaults"),e=v("../bar/defaults").handleGroupingDefaults,c=v("../../plots/cartesian/axis_autotype"),d=v("./attributes");function t(r,g,s,b){function x(X){var oe=0;return X&&X.length&&(oe+=1,_.isArrayOrTypedArray(X[0])&&X[0].length&&(oe+=1)),oe}function S(X){return _.validate(r[X],d[X])}var l,p=s("y"),w=s("x");if("box"===g.type){var y=s("q1"),A=s("median"),T=s("q3");g._hasPreCompStats=y&&y.length&&A&&A.length&&T&&T.length,l=Math.min(_.minRowLength(y),_.minRowLength(A),_.minRowLength(T))}var R,z,M=x(p),f=x(w),u=M&&_.minRowLength(p),h=f&&_.minRowLength(w),o=b.calendar,C={autotypenumbers:b.autotypenumbers};if(g._hasPreCompStats)switch(String(f)+String(M)){case"00":var O=S("x0")||S("dx");R=!S("y0")&&!S("dy")||O?"v":"h",z=l;break;case"10":R="v",z=Math.min(l,h);break;case"20":R="h",z=Math.min(l,w.length);break;case"01":R="h",z=Math.min(l,u);break;case"02":R="v",z=Math.min(l,p.length);break;case"12":R="v",z=Math.min(l,h,p.length);break;case"21":R="h",z=Math.min(l,w.length,u);break;case"11":z=0;break;case"22":var D,F=!1;for(D=0;D<w.length;D++)if("category"===c(w[D],o,C)){F=!0;break}if(F)R="v",z=Math.min(l,h,p.length);else{for(D=0;D<p.length;D++)if("category"===c(p[D],o,C)){F=!0;break}F?(R="h",z=Math.min(l,w.length,u)):(R="v",z=Math.min(l,h,p.length))}}else M>0?(R="v",z=f>0?Math.min(h,u):Math.min(u)):f>0?(R="h",z=Math.min(h)):z=0;if(z){g._length=z;var N=s("orientation",R);g._hasPreCompStats?"v"===N&&0===f?(s("x0",0),s("dx",1)):"h"===N&&0===M&&(s("y0",0),s("dy",1)):"v"===N&&0===f?s("x0"):"h"===N&&0===M&&s("y0"),k.getComponentMethod("calendars","handleTraceDefaults")(r,g,["x","y"],b)}else g.visible=!1}function i(r,g,s,b){var x=b.prefix,S=_.coerce2(r,g,d,"marker.outliercolor"),p=s("marker.line.outliercolor"),w="outliers";g._hasPreCompStats?w="all":(S||p)&&(w="suspectedoutliers");var l=s(x+"points",w);l?(s("jitter","all"===l?.3:0),s("pointpos","all"===l?-1.5:0),s("marker.symbol"),s("marker.opacity"),s("marker.size"),s("marker.color",g.line.color),s("marker.line.color"),s("marker.line.width"),"suspectedoutliers"===l&&(s("marker.line.outliercolor",g.marker.color),s("marker.line.outlierwidth")),s("selected.marker.color"),s("unselected.marker.color"),s("selected.marker.size"),s("unselected.marker.size"),s("text"),s("hovertext")):delete g.marker;var y=s("hoveron");("all"===y||-1!==y.indexOf("points"))&&s("hovertemplate"),_.coerceSelectionMarkerOpacity(g,s)}ie.exports={supplyDefaults:function n(r,g,s,b){function x(M,f){return _.coerce(r,g,d,M,f)}if(t(r,g,x,b),!1!==g.visible){E(r,g,b,x),x("xhoverformat"),x("yhoverformat");var S=g._hasPreCompStats;S&&(x("lowerfence"),x("upperfence")),x("line.color",(r.marker||{}).color||s),x("line.width"),x("fillcolor",m.addOpacity(g.line.color,.5));var p=!1;if(S){var w=x("mean"),l=x("sd");w&&w.length&&(p=!0,l&&l.length&&(p="sd"))}x("boxmean",p),x("whiskerwidth"),x("width"),x("quartilemethod");var y=!1;if(S){var A=x("notchspan");A&&A.length&&(y=!0)}else _.validate(r.notchwidth,d.notchwidth)&&(y=!0);x("notched",y)&&x("notchwidth"),i(r,g,x,{prefix:"box"})}},crossTraceDefaults:function a(r,g){var b;function x(w){return _.coerce(b._input,b,d,w)}for(var S=0;S<r.length;S++){var p=(b=r[S]).type;("box"===p||"violin"===p)&&"group"===g[p+"mode"]&&e(b._input,b,g,x)}},handleSampleDefaults:t,handlePointsDefaults:i}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../registry":638,"../bar/defaults":652,"../scatter/period_defaults":947,"./attributes":673}],677:[function(v,ie,ae){"use strict";ie.exports=function(k,m){return m.hoverOnBox&&(k.hoverOnBox=m.hoverOnBox),"xVal"in m&&(k.x=m.xVal),"yVal"in m&&(k.y=m.yVal),m.xa&&(k.xaxis=m.xa),m.ya&&(k.yaxis=m.ya),k}},{}],678:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/axes"),k=v("../../lib"),m=v("../../components/fx"),E=v("../../components/color"),e=k.fillText;function d(t,i,a,r){var l,y,A,T,M,f,u,h,o,C,R,O,I,N,g=t.cd,s=t.xa,b=t.ya,x=g[0].trace,S=g[0].t,p="violin"===x.type,w=[],z=S.bdPos,F=S.wHover,D=function(J){return A.c2l(J.pos)+S.bPos-A.c2l(f)};p&&"both"!==x.side?("positive"===x.side&&(o=function(J){var j=D(J);return m.inbox(j,j+F,C)},O=z,I=0),"negative"===x.side&&(o=function(J){var j=D(J);return m.inbox(j-F,j,C)},O=0,I=z)):(o=function(J){var j=D(J);return m.inbox(j-F,j+F,C)},O=I=z),N=p?function(J){return m.inbox(J.span[0]-M,J.span[1]-M,C)}:function(J){return m.inbox(J.min-M,J.max-M,C)},"h"===x.orientation?(M=i,f=a,u=N,h=o,l="y",A=b,y="x",T=s):(M=a,f=i,u=o,h=N,l="x",A=s,y="y",T=b);var U=Math.min(1,z/Math.abs(A.r2c(A.range[1])-A.r2c(A.range[0])));function X(J){return(u(J)+h(J))/2}C=t.maxHoverDistance-U,R=t.maxSpikeDistance-U;var oe=m.getDistanceFunction(r,u,h,X);if(m.getClosest(g,oe,t),!1===t.index)return[];var se=g[t.index],ne=x.line.color,W=(x.marker||{}).color;t.color=E.opacity(ne)&&x.line.width?ne:E.opacity(W)&&x.boxpoints?W:x.fillcolor,t[l+"0"]=A.c2p(se.pos+S.bPos-I,!0),t[l+"1"]=A.c2p(se.pos+S.bPos+O,!0),t[l+"LabelVal"]=void 0!==se.orig_p?se.orig_p:se.pos;var G=l+"Spike";t.spikeDistance=X(se)*R/C,t[G]=A.c2p(se.pos,!0);var $={},V=["med","q1","q3","min","max"];(x.boxmean||(x.meanline||{}).visible)&&V.push("mean"),(x.boxpoints||x.points)&&V.push("lf","uf");for(var H=0;H<V.length;H++){var q=V[H];if(q in se&&!(se[q]in $)){$[se[q]]=!0;var K=se[q],Y=T.c2p(K,!0),te=k.extendFlat({},t);te.attr=q,te[y+"0"]=te[y+"1"]=Y,te[y+"LabelVal"]=K,te[y+"Label"]=(S.labels?S.labels[q]+" ":"")+_.hoverLabelText(T,K,x[y+"hoverformat"]),te.hoverOnBox=!0,"mean"===q&&"sd"in se&&"sd"===x.boxmean&&(te[y+"err"]=se.sd),t.name="",t.spikeDistance=void 0,t[G]=void 0,te.hovertemplate=!1,w.push(te)}}return w}function n(t,i,a){for(var p,T,M,r=t.cd,g=t.xa,s=t.ya,b=r[0].trace,x=g.c2p(i),S=s.c2p(a),y=m.quadrature(function(D){var N=Math.max(3,D.mrc||0);return Math.max(Math.abs(g.c2p(D.x)-x)-N,1-3/N)},function(D){var N=Math.max(3,D.mrc||0);return Math.max(Math.abs(s.c2p(D.y)-S)-N,1-3/N)}),A=!1,f=0;f<r.length;f++){T=r[f];for(var u=0;u<(T.pts||[]).length;u++){var h=y(M=T.pts[u]);h<=t.distance&&(t.distance=h,A=[f,u])}}if(!A)return!1;var o=g.c2p((M=(T=r[A[0]]).pts[A[1]]).x,!0),C=s.c2p(M.y,!0),R=M.mrc||1;p=k.extendFlat({},t,{index:M.i,color:(b.marker||{}).color,name:b.name,x0:o-R,x1:o+R,y0:C-R,y1:C+R,spikeDistance:t.distance,hovertemplate:b.hovertemplate});var I,z=T.orig_p,O=void 0!==z?z:T.pos;return"h"===b.orientation?(I=s,p.xLabelVal=M.x,p.yLabelVal=O):(I=g,p.xLabelVal=O,p.yLabelVal=M.y),p[I._id.charAt(0)+"Spike"]=I.c2p(T.pos,!0),e(M,b,p),p}ie.exports={hoverPoints:function c(t,i,a,r){var S,b=t.cd[0].trace.hoveron,x=[];return-1!==b.indexOf("boxes")&&(x=x.concat(d(t,i,a,r))),-1!==b.indexOf("points")&&(S=n(t,i,a)),"closest"===r?S?[S]:x:(S&&x.push(S),x)},hoverOnBoxes:d,hoverOnPoints:n}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],679:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults").supplyDefaults,crossTraceDefaults:v("./defaults").crossTraceDefaults,supplyLayoutDefaults:v("./layout_defaults").supplyLayoutDefaults,calc:v("./calc"),crossTraceCalc:v("./cross_trace_calc").crossTraceCalc,plot:v("./plot").plot,style:v("./style").style,styleOnSelect:v("./style").styleOnSelect,hoverPoints:v("./hover").hoverPoints,eventData:v("./event_data"),selectPoints:v("./select"),moduleType:"trace",name:"box",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./attributes":673,"./calc":674,"./cross_trace_calc":675,"./defaults":676,"./event_data":677,"./hover":678,"./layout_attributes":680,"./layout_defaults":681,"./plot":682,"./select":683,"./style":684}],680:[function(v,ie,ae){"use strict";ie.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],681:[function(v,ie,ae){"use strict";var _=v("../../registry"),k=v("../../lib"),m=v("./layout_attributes");function E(c,d,n,t,i){for(var a=i+"Layout",r=!1,g=0;g<n.length;g++)if(_.traceIs(n[g],a)){r=!0;break}!r||(t(i+"mode"),t(i+"gap"),t(i+"groupgap"))}ie.exports={supplyLayoutDefaults:function e(c,d,n){E(0,0,n,function t(i,a){return k.coerce(c,d,m,i,a)},"box")},_supply:E}},{"../../lib":503,"../../registry":638,"./layout_attributes":680}],682:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../lib"),m=v("../../components/drawing");function d(i,a,r,g){var M,f,s="h"===r.orientation,b=a.val,x=a.pos,S=!!x.rangebreaks,p=g.bPos,w=g.wdPos||0,l=g.bPosPxOffset||0,y=r.whiskerwidth||0,A=r.notched||!1,T=A?1-2*r.notchwidth:1;Array.isArray(g.bdPos)?(M=g.bdPos[0],f=g.bdPos[1]):(M=g.bdPos,f=g.bdPos);var u=i.selectAll("path.box").data("violin"!==r.type||r.box.visible?k.identity:[]);u.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),u.exit().remove(),u.each(function(h){if(h.empty)return"M0,0Z";var o=x.c2l(h.pos+p,!0),C=x.l2p(o-M)+l,R=x.l2p(o+f)+l,z=S?(C+R)/2:x.l2p(o)+l,O=r.whiskerwidth,I=S?C*O+(1-O)*z:x.l2p(o-w)+l,F=S?R*O+(1-O)*z:x.l2p(o+w)+l,D=x.l2p(o-M*T)+l,N=x.l2p(o+f*T)+l,U=b.c2p(h.q1,!0),X=b.c2p(h.q3,!0),oe=k.constrain(b.c2p(h.med,!0),Math.min(U,X)+1,Math.max(U,X)-1),se=void 0===h.lf||!1===r.boxpoints,ne=b.c2p(se?h.min:h.lf,!0),W=b.c2p(se?h.max:h.uf,!0),G=b.c2p(h.ln,!0),$=b.c2p(h.un,!0);s?_.select(this).attr("d","M"+oe+","+D+"V"+N+"M"+U+","+C+"V"+R+(A?"H"+G+"L"+oe+","+N+"L"+$+","+R:"")+"H"+X+"V"+C+(A?"H"+$+"L"+oe+","+D+"L"+G+","+C:"")+"ZM"+U+","+z+"H"+ne+"M"+X+","+z+"H"+W+(0===y?"":"M"+ne+","+I+"V"+F+"M"+W+","+I+"V"+F)):_.select(this).attr("d","M"+D+","+oe+"H"+N+"M"+C+","+U+"H"+R+(A?"V"+G+"L"+N+","+oe+"L"+R+","+$:"")+"V"+X+"H"+C+(A?"V"+$+"L"+D+","+oe+"L"+C+","+G:"")+"ZM"+z+","+U+"V"+ne+"M"+z+","+X+"V"+W+(0===y?"":"M"+I+","+ne+"H"+F+"M"+I+","+W+"H"+F))})}function n(i,a,r,g){var s=a.x,b=a.y,x=g.bdPos,S=g.bPos,p=r.boxpoints||r.points;k.seedPseudoRandom();var l=i.selectAll("g.points").data(p?function(A){return A.forEach(function(T){T.t=g,T.trace=r}),A}:[]);l.enter().append("g").attr("class","points"),l.exit().remove();var y=l.selectAll("path").data(function(A){var T,R,M=A.pts2,f=Math.max((A.max-A.min)/10,A.q3-A.q1),u=1e-9*f,h=.01*f,o=[],C=0;if(r.jitter){if(0===f)for(C=1,o=new Array(M.length),T=0;T<M.length;T++)o[T]=1;else for(T=0;T<M.length;T++){var z=Math.max(0,T-5),O=M[z].v,I=Math.min(M.length-1,T+5),F=M[I].v;"all"!==p&&(M[T].v<A.lf?F=Math.min(F,A.lf):O=Math.max(O,A.uf));var D=Math.sqrt(h*(I-z)/(F-O+u))||0;D=k.constrain(Math.abs(D),0,1),o.push(D),C=Math.max(D,C)}R=2*r.jitter/(C||1)}for(T=0;T<M.length;T++){var N=M[T],U=N.v,X=r.jitter?R*o[T]*(k.pseudoRandom()-.5):0,oe=A.pos+S+x*(r.pointpos+X);"h"===r.orientation?(N.y=oe,N.x=U):(N.x=oe,N.y=U),"suspectedoutliers"===p&&U<A.uo&&U>A.lo&&(N.so=!0)}return M});y.enter().append("path").classed("point",!0),y.exit().remove(),y.call(m.translatePoints,s,b)}function t(i,a,r,g){var l,y,s=a.val,b=a.pos,x=!!b.rangebreaks,S=g.bPos,p=g.bPosPxOffset||0,w=r.boxmean||(r.meanline||{}).visible;Array.isArray(g.bdPos)?(l=g.bdPos[0],y=g.bdPos[1]):(l=g.bdPos,y=g.bdPos);var A=i.selectAll("path.mean").data("box"===r.type&&r.boxmean||"violin"===r.type&&r.box.visible&&r.meanline.visible?k.identity:[]);A.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),A.exit().remove(),A.each(function(T){var M=b.c2l(T.pos+S,!0),f=b.l2p(M-l)+p,u=b.l2p(M+y)+p,h=x?(f+u)/2:b.l2p(M)+p,o=s.c2p(T.mean,!0),C=s.c2p(T.mean-T.sd,!0),R=s.c2p(T.mean+T.sd,!0);"h"===r.orientation?_.select(this).attr("d","M"+o+","+f+"V"+u+("sd"===w?"m0,0L"+C+","+h+"L"+o+","+f+"L"+R+","+h+"Z":"")):_.select(this).attr("d","M"+f+","+o+"H"+u+("sd"===w?"m0,0L"+h+","+C+"L"+f+","+o+"L"+h+","+R+"Z":""))})}ie.exports={plot:function c(i,a,r,g){var s=a.xaxis,b=a.yaxis;k.makeTraceGroups(g,r,"trace boxes").each(function(x){var y,A,S=_.select(this),p=x[0],w=p.t,l=p.trace;w.wdPos=w.bdPos*l.whiskerwidth,!0!==l.visible||w.empty?S.remove():("h"===l.orientation?(y=b,A=s):(y=s,A=b),d(S,{pos:y,val:A},l,w),n(S,{x:s,y:b},l,w),t(S,{pos:y,val:A},l,w))})},plotBoxAndWhiskers:d,plotPoints:n,plotBoxMean:t}},{"../../components/drawing":388,"../../lib":503,"@plotly/d3":58}],683:[function(v,ie,ae){"use strict";ie.exports=function(k,m){var n,t,E=k.cd,e=k.xaxis,c=k.yaxis,d=[];if(!1===m)for(n=0;n<E.length;n++)for(t=0;t<(E[n].pts||[]).length;t++)E[n].pts[t].selected=0;else for(n=0;n<E.length;n++)for(t=0;t<(E[n].pts||[]).length;t++){var i=E[n].pts[t],a=e.c2p(i.x),r=c.c2p(i.y);m.contains([a,r],null,i.i,k)?(d.push({pointNumber:i.i,x:e.c2d(i.x),y:c.c2d(i.y)}),i.selected=1):i.selected=0}return d}},{}],684:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../components/color"),m=v("../../components/drawing");ie.exports={style:function E(c,d,n){var t=n||_.select(c).selectAll("g.trace.boxes");t.style("opacity",function(i){return i[0].trace.opacity}),t.each(function(i){var a=_.select(this),r=i[0].trace,g=r.line.width;function s(S,p,w,l){S.style("stroke-width",p+"px").call(k.stroke,w).call(k.fill,l)}var b=a.selectAll("path.box");if("candlestick"===r.type)b.each(function(S){if(!S.empty){var p=_.select(this),w=r[S.dir];s(p,w.line.width,w.line.color,w.fillcolor),p.style("opacity",r.selectedpoints&&!S.selected?.3:1)}});else{s(b,g,r.line.color,r.fillcolor),a.selectAll("path.mean").style({"stroke-width":g,"stroke-dasharray":2*g+"px,"+g+"px"}).call(k.stroke,r.line.color);var x=a.selectAll("path.point");m.pointStyle(x,r,c)}})},styleOnSelect:function e(c,d,n){var t=d[0].trace,i=n.selectAll("path.point");t.selectedpoints?m.selectedPointStyle(i,t):m.pointStyle(i,t,c)}}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],685:[function(v,ie,ae){"use strict";var _=v("../../lib").extendFlat,k=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=v("../ohlc/attributes"),E=v("../box/attributes");function e(c){return{line:{color:_({},E.line.color,{dflt:c}),width:E.line.width,editType:"style"},fillcolor:E.fillcolor,editType:"style"}}ie.exports={xperiod:m.xperiod,xperiod0:m.xperiod0,xperiodalignment:m.xperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),x:m.x,open:m.open,high:m.high,low:m.low,close:m.close,line:{width:_({},E.line.width,{}),editType:"style"},increasing:e(m.increasing.line.color.dflt),decreasing:e(m.decreasing.line.color.dflt),text:m.text,hovertext:m.hovertext,whiskerwidth:_({},E.whiskerwidth,{dflt:0}),hoverlabel:m.hoverlabel}},{"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673,"../ohlc/attributes":872}],686:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../plots/cartesian/axes"),m=v("../../plots/cartesian/align_period"),E=v("../ohlc/calc").calcCommon;function e(c,d,n,t){return{min:n,q1:Math.min(c,t),med:t,q3:Math.max(c,t),max:d}}ie.exports=function(c,d){var n=c._fullLayout,t=k.getFromId(c,d.xaxis),i=k.getFromId(c,d.yaxis),a=t.makeCalcdata(d,"x"),r=m(d,t,"x",a).vals,g=E(c,d,a,r,i,e);return g.length?(_.extendFlat(g[0].t,{num:n._numBoxes,dPos:_.distinctVals(r).minDiff/2,posLetter:"x",valLetter:"y"}),n._numBoxes++,g):[{t:{empty:!0}}]}},{"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../ohlc/calc":873}],687:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../components/color"),m=v("../ohlc/ohlc_defaults"),E=v("../scatter/period_defaults"),e=v("./attributes");function c(d,n,t,i){var a=t(i+".line.color");t(i+".line.width",n.line.width),t(i+".fillcolor",k.addOpacity(a,.5))}ie.exports=function(n,t,i,a){function r(s,b){return _.coerce(n,t,e,s,b)}m(n,t,r,a)?(E(n,t,a,r,{x:!0}),r("xhoverformat"),r("yhoverformat"),r("line.width"),c(0,t,r,"increasing"),c(0,t,r,"decreasing"),r("text"),r("hovertext"),r("whiskerwidth"),a._requestRangeslider[t.xaxis]=!0):t.visible=!1}},{"../../components/color":366,"../../lib":503,"../ohlc/ohlc_defaults":877,"../scatter/period_defaults":947,"./attributes":685}],688:[function(v,ie,ae){"use strict";ie.exports={moduleType:"trace",name:"candlestick",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:v("./attributes"),layoutAttributes:v("../box/layout_attributes"),supplyLayoutDefaults:v("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:v("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("../box/plot").plot,layerName:"boxlayer",style:v("../box/style").style,hoverPoints:v("../ohlc/hover").hoverPoints,selectPoints:v("../ohlc/select")}},{"../../plots/cartesian":568,"../box/cross_trace_calc":675,"../box/layout_attributes":680,"../box/layout_defaults":681,"../box/plot":682,"../box/style":684,"../ohlc/hover":875,"../ohlc/select":879,"./attributes":685,"./calc":686,"./defaults":687}],689:[function(v,ie,ae){"use strict";var _=v("./axis_defaults"),k=v("../../plot_api/plot_template");ie.exports=function(e,c,d,n,t){n("a")||(n("da"),n("a0")),n("b")||(n("db"),n("b0")),function m(E,e,c,d){["aaxis","baxis"].forEach(function(t){var i=t.charAt(0),a=E[t]||{},r=k.newContainer(e,t);_(a,r,{noTicklabelstep:!0,tickfont:"x",id:i+"axis",letter:i,font:e.font,name:t,data:E[i],calendar:e.calendar,dfltColor:d,bgColor:c.paper_bgcolor,autotypenumbersDflt:c.autotypenumbers,fullLayout:c}),r._categories=r._categories||[],!E[t]&&"-"!==a.type&&(E[t]={type:a.type})})}(e,c,d,t)}},{"../../plot_api/plot_template":543,"./axis_defaults":694}],690:[function(v,ie,ae){"use strict";var _=v("../../lib").isArrayOrTypedArray;function k(m,E){if(!_(m)||E>=10)return null;for(var e=1/0,c=-1/0,d=m.length,n=0;n<d;n++){var t=m[n];if(_(t)){var i=k(t,E+1);i&&(e=Math.min(i[0],e),c=Math.max(i[1],c))}else e=Math.min(t,e),c=Math.max(t,c)}return[e,c]}ie.exports=function(m){return k(m,0)}},{"../../lib":503}],691:[function(v,ie,ae){"use strict";var _=v("../../plots/font_attributes"),k=v("./axis_attributes"),m=v("../../components/color/attributes"),E=_({editType:"calc"});E.family.dflt='"Open Sans", verdana, arial, sans-serif',E.size.dflt=12,E.color.dflt=m.defaultLine,ie.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:k,baxis:k,font:E,color:{valType:"color",dflt:m.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":365,"../../plots/font_attributes":585,"./axis_attributes":693}],692:[function(v,ie,ae){"use strict";var _=v("../../lib").isArrayOrTypedArray;ie.exports=function(k,m,E,e){var c,d,n,t,i,a,r,g,s,b,x,S,p,w=_(E)?"a":"b",y=("a"===w?k.aaxis:k.baxis).smoothing,A="a"===w?k.a2i:k.b2j,T="a"===w?E:e,M="a"===w?e:E,f="a"===w?m.a.length:m.b.length,u="a"===w?m.b.length:m.a.length,h=Math.floor("a"===w?k.b2j(M):k.a2i(M)),o="a"===w?function(se){return k.evalxy([],se,h)}:function(se){return k.evalxy([],h,se)};y&&(n=Math.max(0,Math.min(u-2,h)),t=h-n,d="a"===w?function(se,ne){return k.dxydi([],se,n,ne,t)}:function(se,ne){return k.dxydj([],n,se,t,ne)});var C=A(T[0]),R=A(T[1]),z=C<R?1:-1,O=1e-8*(R-C),I=z>0?Math.floor:Math.ceil,F=z>0?Math.ceil:Math.floor,D=z>0?Math.min:Math.max,N=z>0?Math.max:Math.min,U=I(C+O),X=F(R-O),oe=[[r=o(C)]];for(c=U;c*z<X*z;c+=z)i=[],x=N(C,c),p=(S=D(R,c+z))-x,a=Math.max(0,Math.min(f-2,Math.floor(.5*(x+S)))),g=o(S),y&&(s=d(a,x-a),b=d(a,S-a),i.push([r[0]+s[0]/3*p,r[1]+s[1]/3*p]),i.push([g[0]-b[0]/3*p,g[1]-b[1]/3*p])),i.push(g),oe.push(i),r=g;return oe}},{"../../lib":503}],693:[function(v,ie,ae){"use strict";var _=v("../../plots/font_attributes"),k=v("../../components/color/attributes"),m=v("../../plots/cartesian/layout_attributes"),E=v("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=v("../../plot_api/edit_types").overrideAll,c=v("../../components/drawing/attributes").dash,d=v("../../lib/extend").extendFlat;ie.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:_({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:m.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:_({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:E("tick label")},tickformatstops:e(m.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:d({},c,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:d({},c,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:k.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:_({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],694:[function(v,ie,ae){"use strict";var _=v("./attributes"),k=v("../../components/color").addOpacity,m=v("../../registry"),E=v("../../lib"),e=v("../../plots/cartesian/tick_value_defaults"),c=v("../../plots/cartesian/tick_label_defaults"),d=v("../../plots/cartesian/prefix_suffix_defaults"),n=v("../../plots/cartesian/category_order_defaults"),t=v("../../plots/cartesian/set_convert"),i=v("../../plots/cartesian/axis_autotype");ie.exports=function(g,s,b){var x=b.letter,S=b.font||{},p=_[x+"axis"];function w(U,X){return E.coerce(g,s,p,U,X)}function l(U,X){return E.coerce2(g,s,p,U,X)}b.name&&(s._name=b.name,s._id=b.name),w("autotypenumbers",b.autotypenumbersDflt);var y=w("type");"-"===y&&(b.data&&function a(r,g){if("-"===r.type){var b=r._id.charAt(0);r.type=i(g,r[b+"calendar"],{autotypenumbers:r.autotypenumbers})}}(s,b.data),"-"===s.type?s.type="linear":y=g.type=s.type),w("smoothing"),w("cheatertype"),w("showticklabels"),w("labelprefix",x+" = "),w("labelsuffix"),w("showtickprefix"),w("showticksuffix"),w("separatethousands"),w("tickformat"),w("exponentformat"),w("minexponent"),w("showexponent"),w("categoryorder"),w("tickmode"),w("tickvals"),w("ticktext"),w("tick0"),w("dtick"),"array"===s.tickmode&&(w("arraytick0"),w("arraydtick")),w("labelpadding"),s._hovertitle=x,"date"===y&&m.getComponentMethod("calendars","handleDefaults")(g,s,"calendar",b.calendar),t(s,b.fullLayout),s.c2p=E.identity;var T=w("color",b.dfltColor),M=T===g.color?T:S.color;w("title.text")&&(E.coerceFont(w,"title.font",{family:S.family,size:E.bigFont(S.size),color:M}),w("title.offset")),w("tickangle"),w("autorange",!s.isValidRange(g.range))&&w("rangemode"),w("range"),s.cleanRange(),w("fixedrange"),e(g,s,w,y),d(g,s,w,y,b),c(g,s,w,y,b),n(g,s,w,{data:b.data,dataAttr:x});var h=l("gridcolor",k(T,.3)),o=l("gridwidth"),C=l("griddash"),R=w("showgrid");R||(delete s.gridcolor,delete s.gridwidth,delete s.griddash);var z=l("startlinecolor",T),O=l("startlinewidth",o);w("startline",s.showgrid||!!z||!!O)||(delete s.startlinecolor,delete s.startlinewidth);var F=l("endlinecolor",T),D=l("endlinewidth",o);return w("endline",s.showgrid||!!F||!!D)||(delete s.endlinecolor,delete s.endlinewidth),R?(w("minorgridcount"),w("minorgridwidth",o),w("minorgriddash",C),w("minorgridcolor",k(h,.06)),s.minorgridcount||(delete s.minorgridwidth,delete s.minorgriddash,delete s.minorgridcolor)):(delete s.gridcolor,delete s.gridwidth,delete s.griddash),"none"===s.showticklabels&&(delete s.tickfont,delete s.tickangle,delete s.showexponent,delete s.exponentformat,delete s.minexponent,delete s.tickformat,delete s.showticksuffix,delete s.showtickprefix),s.showticksuffix||delete s.ticksuffix,s.showtickprefix||delete s.tickprefix,w("tickmode"),s}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../plots/cartesian/category_order_defaults":559,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/set_convert":576,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_value_defaults":580,"../../registry":638,"./attributes":691}],695:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/axes"),k=v("../../lib").isArray1D,m=v("./cheater_basis"),E=v("./array_minmax"),e=v("./calc_gridlines"),c=v("./calc_labels"),d=v("./calc_clippath"),n=v("../heatmap/clean_2d_array"),t=v("./smooth_fill_2d_array"),i=v("../heatmap/convert_column_xyz"),a=v("./set_convert");ie.exports=function(g,s){var b=_.getFromId(g,s.xaxis),x=_.getFromId(g,s.yaxis),S=s.aaxis,p=s.baxis,w=s.x,l=s.y,y=[];w&&k(w)&&y.push("x"),l&&k(l)&&y.push("y"),y.length&&i(s,S,p,"a","b",y);var A=s._a=s._a||s.a,T=s._b=s._b||s.b;w=s._x||s.x,l=s._y||s.y;var M={};s._cheater&&(w=m("index"===S.cheatertype?A.length:A,"index"===p.cheatertype?T.length:T,s.cheaterslope)),s._x=w=n(w),s._y=l=n(l),t(w,A,T),t(l,A,T),a(s),s.setScale();var h=E(w),o=E(l),C=.5*(h[1]-h[0]),R=.5*(h[1]+h[0]),z=.5*(o[1]-o[0]),O=.5*(o[1]+o[0]),I=1.3;return o=[O-z*I,O+z*I],s._extremes[b._id]=_.findExtremes(b,h=[R-C*I,R+C*I],{padded:!0}),s._extremes[x._id]=_.findExtremes(x,o,{padded:!0}),e(s,"a","b"),e(s,"b","a"),c(s,S),c(s,p),M.clipsegments=d(s._xctrl,s._yctrl,S,p),M.x=w,M.y=l,M.a=A,M.b=T,[M]}},{"../../lib":503,"../../plots/cartesian/axes":554,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"./array_minmax":690,"./calc_clippath":696,"./calc_gridlines":697,"./calc_labels":698,"./cheater_basis":700,"./set_convert":713,"./smooth_fill_2d_array":714}],696:[function(v,ie,ae){"use strict";ie.exports=function(k,m,E,e){var c,d,n,t=[],i=!!E.smoothing,a=!!e.smoothing,r=k[0].length-1,g=k.length-1;for(c=0,d=[],n=[];c<=r;c++)d[c]=k[0][c],n[c]=m[0][c];for(t.push({x:d,y:n,bicubic:i}),c=0,d=[],n=[];c<=g;c++)d[c]=k[c][r],n[c]=m[c][r];for(t.push({x:d,y:n,bicubic:a}),c=r,d=[],n=[];c>=0;c--)d[r-c]=k[g][c],n[r-c]=m[g][c];for(t.push({x:d,y:n,bicubic:i}),c=g,d=[],n=[];c>=0;c--)d[g-c]=k[c][0],n[g-c]=m[c][0];return t.push({x:d,y:n,bicubic:a}),t}},{}],697:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/axes"),k=v("../../lib/extend").extendFlat;ie.exports=function(E,e,c){var d,n,t,i,a,r,g,s,b,x,S,p,w,l,y=E["_"+e],A=E[e+"axis"],T=A._gridlines=[],M=A._minorgridlines=[],f=A._boundarylines=[],u=E["_"+c],h=E[c+"axis"];"array"===A.tickmode&&(A.tickvals=y.slice());var o=E._xctrl,C=E._yctrl,R=o[0].length,z=o.length,O=E._a.length,I=E._b.length;_.prepTicks(A),"array"===A.tickmode&&delete A.tickvals;var F=A.smoothing?3:1;function D(U){var X,oe,se,ne,W,G,$,V,H,q,K,Y,te=[],J=[],j={};if("b"===e)for(oe=E.b2j(U),se=Math.floor(Math.max(0,Math.min(I-2,oe))),ne=oe-se,j.length=I,j.crossLength=O,j.xy=function(re){return E.evalxy([],re,oe)},j.dxy=function(re,le){return E.dxydi([],re,se,le,ne)},X=0;X<O;X++)G=Math.min(O-2,X),$=X-G,V=E.evalxy([],X,oe),h.smoothing&&X>0&&(H=E.dxydi([],X-1,se,0,ne),te.push(W[0]+H[0]/3),J.push(W[1]+H[1]/3),q=E.dxydi([],X-1,se,1,ne),te.push(V[0]-q[0]/3),J.push(V[1]-q[1]/3)),te.push(V[0]),J.push(V[1]),W=V;else for(X=E.a2i(U),G=Math.floor(Math.max(0,Math.min(O-2,X))),$=X-G,j.length=O,j.crossLength=I,j.xy=function(re){return E.evalxy([],X,re)},j.dxy=function(re,le){return E.dxydj([],G,re,$,le)},oe=0;oe<I;oe++)se=Math.min(I-2,oe),ne=oe-se,V=E.evalxy([],X,oe),h.smoothing&&oe>0&&(K=E.dxydj([],G,oe-1,$,0),te.push(W[0]+K[0]/3),J.push(W[1]+K[1]/3),Y=E.dxydj([],G,oe-1,$,1),te.push(V[0]-Y[0]/3),J.push(V[1]-Y[1]/3)),te.push(V[0]),J.push(V[1]),W=V;return j.axisLetter=e,j.axis=A,j.crossAxis=h,j.value=U,j.constvar=c,j.index=s,j.x=te,j.y=J,j.smoothing=h.smoothing,j}function N(U){var X,oe,se,ne,W,G=[],$=[],V={};if(V.length=y.length,V.crossLength=u.length,"b"===e)for(se=Math.max(0,Math.min(I-2,U)),W=Math.min(1,Math.max(0,U-se)),V.xy=function(H){return E.evalxy([],H,U)},V.dxy=function(H,q){return E.dxydi([],H,se,q,W)},X=0;X<R;X++)G[X]=o[U*F][X],$[X]=C[U*F][X];else for(oe=Math.max(0,Math.min(O-2,U)),ne=Math.min(1,Math.max(0,U-oe)),V.xy=function(H){return E.evalxy([],U,H)},V.dxy=function(H,q){return E.dxydj([],oe,H,ne,q)},X=0;X<z;X++)G[X]=o[X][U*F],$[X]=C[X][U*F];return V.axisLetter=e,V.axis=A,V.crossAxis=h,V.value=y[U],V.constvar=c,V.index=U,V.x=G,V.y=$,V.smoothing=h.smoothing,V}if("array"===A.tickmode){for(i=5e-15,g=(a=[Math.floor((y.length-1-A.arraytick0)/A.arraydtick*(1+i)),Math.ceil(-A.arraytick0/A.arraydtick/(1+i))].sort(function(U,X){return U-X}))[1]+1,s=r=a[0]-1;s<g;s++)!((n=A.arraytick0+A.arraydtick*s)<0||n>y.length-1)&&T.push(k(N(n),{color:A.gridcolor,width:A.gridwidth,dash:A.griddash}));for(s=r;s<g;s++)if(t=A.arraytick0+A.arraydtick*s,S=Math.min(t+A.arraydtick,y.length-1),!(t<0||t>y.length-1||S<0||S>y.length-1))for(p=y[t],w=y[S],d=0;d<A.minorgridcount;d++)!((l=S-t)<=0)&&!((x=p+(w-p)*(d+1)/(A.minorgridcount+1)*(A.arraydtick/l))<y[0]||x>y[y.length-1])&&M.push(k(D(x),{color:A.minorgridcolor,width:A.minorgridwidth,dash:A.minorgriddash}));A.startline&&f.push(k(N(0),{color:A.startlinecolor,width:A.startlinewidth})),A.endline&&f.push(k(N(y.length-1),{color:A.endlinecolor,width:A.endlinewidth}))}else{for(i=5e-15,g=(a=[Math.floor((y[y.length-1]-A.tick0)/A.dtick*(1+i)),Math.ceil((y[0]-A.tick0)/A.dtick/(1+i))].sort(function(U,X){return U-X}))[1],s=r=a[0];s<=g;s++)T.push(k(D(b=A.tick0+A.dtick*s),{color:A.gridcolor,width:A.gridwidth,dash:A.griddash}));for(s=r-1;s<g+1;s++)for(b=A.tick0+A.dtick*s,d=0;d<A.minorgridcount;d++)!((x=b+A.dtick*(d+1)/(A.minorgridcount+1))<y[0]||x>y[y.length-1])&&M.push(k(D(x),{color:A.minorgridcolor,width:A.minorgridwidth,dash:A.minorgriddash}));A.startline&&f.push(k(D(y[0]),{color:A.startlinecolor,width:A.startlinewidth})),A.endline&&f.push(k(D(y[y.length-1]),{color:A.endlinecolor,width:A.endlinewidth}))}}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],698:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/axes"),k=v("../../lib/extend").extendFlat;ie.exports=function(E,e){var c,d,i,a=e._labels=[],r=e._gridlines;for(c=0;c<r.length;c++)i=r[c],-1!==["start","both"].indexOf(e.showticklabels)&&(d=_.tickText(e,i.value),k(d,{prefix:undefined,suffix:undefined,endAnchor:!0,xy:i.xy(0),dxy:i.dxy(0,0),axis:i.axis,length:i.crossAxis.length,font:i.axis.tickfont,isFirst:0===c,isLast:c===r.length-1}),a.push(d)),-1!==["end","both"].indexOf(e.showticklabels)&&(d=_.tickText(e,i.value),k(d,{endAnchor:!1,xy:i.xy(i.crossLength-1),dxy:i.dxy(i.crossLength-2,1),axis:i.axis,length:i.crossAxis.length,font:i.axis.tickfont,isFirst:0===c,isLast:c===r.length-1}),a.push(d))}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],699:[function(v,ie,ae){"use strict";ie.exports=function(m,E,e,c){var d=m[0]-E[0],n=m[1]-E[1],t=e[0]-E[0],i=e[1]-E[1],a=Math.pow(d*d+n*n,.25),r=Math.pow(t*t+i*i,.25),g=(r*r*d-a*a*t)*c,s=(r*r*n-a*a*i)*c,b=r*(a+r)*3,x=a*(a+r)*3;return[[E[0]+(b&&g/b),E[1]+(b&&s/b)],[E[0]-(x&&g/x),E[1]-(x&&s/x)]]}},{}],700:[function(v,ie,ae){"use strict";var _=v("../../lib").isArrayOrTypedArray;ie.exports=function(k,m,E){var e,c,d,n,i,a=[],r=_(k)?k.length:k,g=_(m)?m.length:m,s=_(k)?k:null,b=_(m)?m:null;s&&(d=(s.length-1)/(s[s.length-1]-s[0])/(r-1)),b&&(n=(b.length-1)/(b[b.length-1]-b[0])/(g-1));var x,S=1/0,p=-1/0;for(c=0;c<g;c++)for(a[c]=[],i=b?(b[c]-b[0])*n:c/(g-1),e=0;e<r;e++)x=(s?(s[e]-s[0])*d:e/(r-1))-i*E,S=Math.min(x,S),p=Math.max(x,p),a[c][e]=x;var w=1/(p-S),l=-S*w;for(c=0;c<g;c++)for(e=0;e<r;e++)a[c][e]=w*a[c][e]+l;return a}},{"../../lib":503}],701:[function(v,ie,ae){"use strict";var _=v("./catmull_rom"),k=v("../../lib").ensureArray;function m(E,e,c){return[(2*(-.5*c[0]+1.5*e[0])+E[0])/3,(2*(-.5*c[1]+1.5*e[1])+E[1])/3]}ie.exports=function(e,c,d,n,t,i){var a,r,g,s,b,x,S,p,w,l,y=d[0].length,A=d.length,T=t?3*y-2:y,M=i?3*A-2:A;for(e=k(e,M),c=k(c,M),g=0;g<M;g++)e[g]=k(e[g],T),c[g]=k(c[g],T);for(r=0,s=0;r<A;r++,s+=i?3:1)for(b=e[s],x=c[s],S=d[r],p=n[r],a=0,g=0;a<y;a++,g+=t?3:1)b[g]=S[a],x[g]=p[a];if(t)for(r=0,s=0;r<A;r++,s+=i?3:1){for(a=1,g=3;a<y-1;a++,g+=3)w=_([d[r][a-1],n[r][a-1]],[d[r][a],n[r][a]],[d[r][a+1],n[r][a+1]],t),e[s][g-1]=w[0][0],c[s][g-1]=w[0][1],e[s][g+1]=w[1][0],c[s][g+1]=w[1][1];l=m([e[s][0],c[s][0]],[e[s][2],c[s][2]],[e[s][3],c[s][3]]),e[s][1]=l[0],c[s][1]=l[1],l=m([e[s][T-1],c[s][T-1]],[e[s][T-3],c[s][T-3]],[e[s][T-4],c[s][T-4]]),e[s][T-2]=l[0],c[s][T-2]=l[1]}if(i)for(g=0;g<T;g++){for(s=3;s<M-3;s+=3)w=_([e[s-3][g],c[s-3][g]],[e[s][g],c[s][g]],[e[s+3][g],c[s+3][g]],i),e[s-1][g]=w[0][0],c[s-1][g]=w[0][1],e[s+1][g]=w[1][0],c[s+1][g]=w[1][1];l=m([e[0][g],c[0][g]],[e[2][g],c[2][g]],[e[3][g],c[3][g]]),e[1][g]=l[0],c[1][g]=l[1],l=m([e[M-1][g],c[M-1][g]],[e[M-3][g],c[M-3][g]],[e[M-4][g],c[M-4][g]]),e[M-2][g]=l[0],c[M-2][g]=l[1]}if(t&&i)for(s=1;s<M;s+=(s+1)%3==0?2:1){for(g=3;g<T-3;g+=3)w=_([e[s][g-3],c[s][g-3]],[e[s][g],c[s][g]],[e[s][g+3],c[s][g+3]],t),e[s][g-1]=.5*(e[s][g-1]+w[0][0]),c[s][g-1]=.5*(c[s][g-1]+w[0][1]),e[s][g+1]=.5*(e[s][g+1]+w[1][0]),c[s][g+1]=.5*(c[s][g+1]+w[1][1]);l=m([e[s][0],c[s][0]],[e[s][2],c[s][2]],[e[s][3],c[s][3]]),e[s][1]=.5*(e[s][1]+l[0]),c[s][1]=.5*(c[s][1]+l[1]),l=m([e[s][T-1],c[s][T-1]],[e[s][T-3],c[s][T-3]],[e[s][T-4],c[s][T-4]]),e[s][T-2]=.5*(e[s][T-2]+l[0]),c[s][T-2]=.5*(c[s][T-2]+l[1])}return[e,c]}},{"../../lib":503,"./catmull_rom":699}],702:[function(v,ie,ae){"use strict";ie.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],703:[function(v,ie,ae){"use strict";ie.exports=function(_,k,m){return k&&m?function(E,e,c,d,n){var g,s;E||(E=[]),e*=3,c*=3;var b=d*d,x=1-d,S=x*x,p=x*d*2,w=-3*S,l=3*(S-p),y=3*(p-b),A=3*b,T=n*n,M=T*n,f=1-n,u=f*f,h=u*f;for(s=0;s<_.length;s++)E[s]=h*(w*(g=_[s])[c][e]+l*g[c][e+1]+y*g[c][e+2]+A*g[c][e+3])+3*(u*n*(w*g[c+1][e]+l*g[c+1][e+1]+y*g[c+1][e+2]+A*g[c+1][e+3])+f*T*(w*g[c+2][e]+l*g[c+2][e+1]+y*g[c+2][e+2]+A*g[c+2][e+3]))+M*(w*g[c+3][e]+l*g[c+3][e+1]+y*g[c+3][e+2]+A*g[c+3][e+3]);return E}:k?function(E,e,c,d,n){var a,r;E||(E=[]),e*=3;var g=d*d,s=1-d,b=s*s,x=s*d*2,S=-3*b,p=3*(b-x),w=3*(x-g),l=3*g,y=1-n;for(a=0;a<_.length;a++)E[a]=y*(S*(r=_[a])[c][e]+p*r[c][e+1]+w*r[c][e+2]+l*r[c][e+3])+n*(S*r[c+1][e]+p*r[c+1][e+1]+w*r[c+1][e+2]+l*r[c+1][e+3]);return E}:m?function(E,e,c,d,n){var g,s;E||(E=[]),c*=3;var b=n*n,x=b*n,S=1-n,p=S*S,w=p*S;for(g=0;g<_.length;g++)E[g]=w*((s=_[g])[c][e+1]-s[c][e])+3*(p*n*(s[c+1][e+1]-s[c+1][e])+S*b*(s[c+2][e+1]-s[c+2][e]))+x*(s[c+3][e+1]-s[c+3][e]);return E}:function(E,e,c,d,n){E||(E=[]);var a,r,g=1-n;for(a=0;a<_.length;a++)E[a]=g*((r=_[a])[c][e+1]-r[c][e])+n*(r[c+1][e+1]-r[c+1][e]);return E}}},{}],704:[function(v,ie,ae){"use strict";ie.exports=function(_,k,m){return k&&m?function(E,e,c,d,n){var g,s;E||(E=[]),e*=3,c*=3;var b=d*d,x=b*d,S=1-d,p=S*S,w=p*S,l=n*n,y=1-n,A=y*y,T=y*n*2,M=-3*A,f=3*(A-T),u=3*(T-l),h=3*l;for(s=0;s<_.length;s++)E[s]=w*(M*(g=_[s])[c][e]+f*g[c+1][e]+u*g[c+2][e]+h*g[c+3][e])+3*(p*d*(M*g[c][e+1]+f*g[c+1][e+1]+u*g[c+2][e+1]+h*g[c+3][e+1])+S*b*(M*g[c][e+2]+f*g[c+1][e+2]+u*g[c+2][e+2]+h*g[c+3][e+2]))+x*(M*g[c][e+3]+f*g[c+1][e+3]+u*g[c+2][e+3]+h*g[c+3][e+3]);return E}:k?function(E,e,c,d,n){var g,s;E||(E=[]),e*=3;var b=n*n,x=b*n,S=1-n,p=S*S,w=p*S;for(g=0;g<_.length;g++)E[g]=w*((s=_[g])[c+1][e]-s[c][e])+3*(p*n*(s[c+1][e+1]-s[c][e+1])+S*b*(s[c+1][e+2]-s[c][e+2]))+x*(s[c+1][e+3]-s[c][e+3]);return E}:m?function(E,e,c,d,n){var a,r;E||(E=[]),c*=3;var g=1-d,s=n*n,b=1-n,x=b*b,S=b*n*2,p=-3*x,w=3*(x-S),l=3*(S-s),y=3*s;for(a=0;a<_.length;a++)E[a]=g*(p*(r=_[a])[c][e]+w*r[c+1][e]+l*r[c+2][e]+y*r[c+3][e])+d*(p*r[c][e+1]+w*r[c+1][e+1]+l*r[c+2][e+1]+y*r[c+3][e+1]);return E}:function(E,e,c,d,n){E||(E=[]);var a,r,g=1-d;for(a=0;a<_.length;a++)E[a]=g*((r=_[a])[c+1][e]-r[c][e])+d*(r[c+1][e+1]-r[c][e+1]);return E}}},{}],705:[function(v,ie,ae){"use strict";ie.exports=function(_,k,m,E,e){var c=k-2,d=m-2;return E&&e?function(n,t,i){n||(n=[]);var b,x,S=Math.max(0,Math.min(Math.floor(t),c)),p=Math.max(0,Math.min(Math.floor(i),d)),w=Math.max(0,Math.min(1,t-S)),l=Math.max(0,Math.min(1,i-p));S*=3,p*=3;var y=w*w,A=y*w,T=1-w,M=T*T,f=M*T,u=l*l,h=u*l,o=1-l,C=o*o,R=C*o;for(x=0;x<_.length;x++)n[x]=R*(f*(b=_[x])[p][S]+3*(M*w*b[p][S+1]+T*y*b[p][S+2])+A*b[p][S+3])+3*(C*l*(f*b[p+1][S]+3*(M*w*b[p+1][S+1]+T*y*b[p+1][S+2])+A*b[p+1][S+3])+o*u*(f*b[p+2][S]+3*(M*w*b[p+2][S+1]+T*y*b[p+2][S+2])+A*b[p+2][S+3]))+h*(f*b[p+3][S]+3*(M*w*b[p+3][S+1]+T*y*b[p+3][S+2])+A*b[p+3][S+3]);return n}:E?function(n,t,i){n||(n=[]);var w,l,a=Math.max(0,Math.min(Math.floor(t),c)),r=Math.max(0,Math.min(Math.floor(i),d)),g=Math.max(0,Math.min(1,t-a)),s=Math.max(0,Math.min(1,i-r));a*=3;var y=g*g,A=y*g,T=1-g,M=T*T,f=M*T,u=1-s;for(w=0;w<_.length;w++)n[w]=f*(u*(l=_[w])[r][a]+s*l[r+1][a])+3*(M*g*(u*l[r][a+1]+s*l[r+1][a+1])+T*y*(u*l[r][a+2]+s*l[r+1][a+1]))+A*(u*l[r][a+3]+s*l[r+1][a+1]);return n}:e?function(n,t,i){n||(n=[]);var w,l,a=Math.max(0,Math.min(Math.floor(t),c)),r=Math.max(0,Math.min(Math.floor(i),d)),g=Math.max(0,Math.min(1,t-a)),s=Math.max(0,Math.min(1,i-r));r*=3;var y=s*s,A=y*s,T=1-s,M=T*T,f=M*T,u=1-g;for(w=0;w<_.length;w++)n[w]=f*(u*(l=_[w])[r][a]+g*l[r][a+1])+3*(M*s*(u*l[r+1][a]+g*l[r+1][a+1])+T*y*(u*l[r+2][a]+g*l[r+2][a+1]))+A*(u*l[r+3][a]+g*l[r+3][a+1]);return n}:function(n,t,i){n||(n=[]);var S,p,a=Math.max(0,Math.min(Math.floor(t),c)),r=Math.max(0,Math.min(Math.floor(i),d)),g=Math.max(0,Math.min(1,t-a)),s=Math.max(0,Math.min(1,i-r)),w=1-s,l=1-g;for(S=0;S<_.length;S++)n[S]=w*(l*(p=_[S])[r][a]+g*p[r][a+1])+s*(l*p[r+1][a]+g*p[r+1][a+1]);return n}}},{}],706:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./xy_defaults"),m=v("./ab_defaults"),E=v("./attributes"),e=v("../../components/color/attributes");ie.exports=function(d,n,t,i){function a(s,b){return _.coerce(d,n,E,s,b)}n._clipPathId="clip"+n.uid+"carpet";var r=a("color",e.defaultLine);_.coerceFont(a,"font"),a("carpet"),m(d,n,i,a,r),n.a&&n.b?(n.a.length<3&&(n.aaxis.smoothing=0),n.b.length<3&&(n.baxis.smoothing=0),k(d,n,a)||(n.visible=!1),n._cheater&&a("cheaterslope")):n.visible=!1}},{"../../components/color/attributes":365,"../../lib":503,"./ab_defaults":689,"./attributes":691,"./xy_defaults":715}],707:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),plot:v("./plot"),calc:v("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"./attributes":691,"./calc":695,"./defaults":706,"./plot":712}],708:[function(v,ie,ae){"use strict";ie.exports=function(_,k){for(var E,m=_._fullData.length,e=0;e<m;e++){var c=_._fullData[e];if(c.index!==k.index&&"carpet"===c.type&&(E||(E=c),c.carpet===k.carpet))return c}return E}},{}],709:[function(v,ie,ae){"use strict";ie.exports=function(k,m,E){if(0===k.length)return"";var e,c=[],d=E?3:1;for(e=0;e<k.length;e+=d)c.push(k[e]+","+m[e]),E&&e<k.length-d&&(c.push("C"),c.push([k[e+1]+","+m[e+1],k[e+2]+","+m[e+2]+" "].join(" ")));return c.join(E?"":"L")}},{}],710:[function(v,ie,ae){"use strict";var _=v("../../lib").isArrayOrTypedArray;ie.exports=function(m,E,e){var c;for(_(m)?m.length>E.length&&(m=m.slice(0,E.length)):m=[],c=0;c<E.length;c++)m[c]=e(E[c]);return m}},{"../../lib":503}],711:[function(v,ie,ae){"use strict";ie.exports=function(k,m,E,e,c,d){var n=c[0]*k.dpdx(m),t=c[1]*k.dpdy(E),i=1,a=1;if(d){var r=Math.sqrt(c[0]*c[0]+c[1]*c[1]),g=Math.sqrt(d[0]*d[0]+d[1]*d[1]);a=Math.max(0,(c[0]*d[0]+c[1]*d[1])/r/g)}var b=180*Math.atan2(t,n)/Math.PI;return b<-90?(b+=180,i=-i):b>90&&(b-=180,i=-i),{angle:b,flip:i,p:k.c2p(e,m,E),offsetMultplier:a}}},{}],712:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../components/drawing"),m=v("./map_1d_array"),E=v("./makepath"),e=v("./orient_text"),c=v("../../lib/svg_text_utils"),d=v("../../lib"),n=d.strRotate,t=d.strTranslate,i=v("../../constants/alignment");function r(p,w,l,y,A,T){var M="const-"+A+"-lines",f=l.selectAll("."+M).data(T);f.enter().append("path").classed(M,!0).style("vector-effect","non-scaling-stroke"),f.each(function(u){var h=u,C=h.y,R=m([],h.x,p.c2p),z=m([],C,w.c2p),O="M"+E(R,z,h.smoothing);_.select(this).attr("d",O).style("stroke-width",h.width).style("stroke",h.color).style("stroke-dasharray",k.dashStyle(h.dash,h.width)).style("fill","none")}),f.exit().remove()}function g(p,w,l,y,A,T,M,f){var u=T.selectAll("text."+f).data(M);u.enter().append("text").classed(f,!0);var h=0,o={};return u.each(function(C,R){var z;if("auto"===C.axis.tickangle)z=e(y,w,l,C.xy,C.dxy);else{var O=(C.axis.tickangle+180)*Math.PI/180;z=e(y,w,l,C.xy,[Math.cos(O),Math.sin(O)])}R||(o={angle:z.angle,flip:z.flip});var I=(C.endAnchor?-1:1)*z.flip,F=_.select(this).attr({"text-anchor":I>0?"start":"end","data-notex":1}).call(k.font,C.font).text(C.text).call(c.convertToTspans,p),D=k.bBox(this);F.attr("transform",t(z.p[0],z.p[1])+n(z.angle)+t(C.axis.labelpadding*I,.3*D.height)),h=Math.max(h,D.width+C.axis.labelpadding)}),u.exit().remove(),o.maxExtent=h,o}ie.exports=function(w,l,y,A){var T=l.xaxis,M=l.yaxis,u=w._fullLayout._clips;d.makeTraceGroups(A,y,"trace").each(function(h){var o=_.select(this),C=h[0],R=C.trace,z=R.aaxis,O=R.baxis,I=d.ensureSingle(o,"g","minorlayer"),F=d.ensureSingle(o,"g","majorlayer"),D=d.ensureSingle(o,"g","boundarylayer"),N=d.ensureSingle(o,"g","labellayer");o.style("opacity",R.opacity),r(T,M,F,0,"a",z._gridlines),r(T,M,F,0,"b",O._gridlines),r(T,M,I,0,"a",z._minorgridlines),r(T,M,I,0,"b",O._minorgridlines),r(T,M,D,0,"a-boundary",z._boundarylines),r(T,M,D,0,"b-boundary",O._boundarylines);var U=g(w,T,M,R,0,N,z._labels,"a-label"),X=g(w,T,M,R,0,N,O._labels,"b-label");(function s(p,w,l,y,A,T,M,f){var u,h,o,C,R=d.aggNums(Math.min,null,l.a),z=d.aggNums(Math.max,null,l.a),O=d.aggNums(Math.min,null,l.b),I=d.aggNums(Math.max,null,l.b);o=l.ab2xy(u=.5*(R+z),h=O,!0),C=l.dxyda_rough(u,h),void 0===M.angle&&d.extendFlat(M,e(l,A,T,o,l.dxydb_rough(u,h))),S(p,w,l,0,o,C,l.aaxis,A,T,M,"a-title"),o=l.ab2xy(u=R,h=.5*(O+I),!0),C=l.dxydb_rough(u,h),void 0===f.angle&&d.extendFlat(f,e(l,A,T,o,l.dxyda_rough(u,h))),S(p,w,l,0,o,C,l.baxis,A,T,f,"b-title")})(w,N,R,0,T,M,U,X),function a(p,w,l,y,A){var T,M,f,u,h=l.select("#"+p._clipPathId);h.size()||(h=l.append("clipPath").classed("carpetclip",!0));var o=d.ensureSingle(h,"path","carpetboundary"),C=w.clipsegments,R=[];for(u=0;u<C.length;u++)M=m([],(T=C[u]).x,y.c2p),f=m([],T.y,A.c2p),R.push(E(M,f,T.bicubic));var z="M"+R.join("L")+"Z";h.attr("id",p._clipPathId),o.attr("d",z)}(R,C,u,T,M)})};var b=i.LINE_SPACING,x=(1-i.MID_SHIFT)/b+1;function S(p,w,l,y,A,T,M,f,u,h,o){var C=[];M.title.text&&C.push(M.title.text);var R=w.selectAll("text."+o).data(C),z=h.maxExtent;R.enter().append("text").classed(o,!0),R.each(function(){var O=e(l,f,u,A,T);-1===["start","both"].indexOf(M.showticklabels)&&(z=0);var I=M.title.font.size;z+=I+M.title.offset;var D=(h.angle+(h.flip<0?180:0)-O.angle+450)%360,N=D>90&&D<270,U=_.select(this);U.text(M.title.text).call(c.convertToTspans,p),N&&(z=(-c.lineCount(U)+x)*b*I-z),U.attr("transform",t(O.p[0],O.p[1])+n(O.angle)+t(0,z)).attr("text-anchor","middle").call(k.font,M.title.font)}),R.exit().remove()}},{"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"./makepath":709,"./map_1d_array":710,"./orient_text":711,"@plotly/d3":58}],713:[function(v,ie,ae){"use strict";var _=v("./constants"),k=v("../../lib/search").findBin,m=v("./compute_control_points"),E=v("./create_spline_evaluator"),e=v("./create_i_derivative_evaluator"),c=v("./create_j_derivative_evaluator");ie.exports=function(n){var t=n._a,i=n._b,a=t.length,r=i.length,g=n.aaxis,s=n.baxis,b=t[0],x=t[a-1],S=i[0],p=i[r-1],w=t[t.length-1]-t[0],l=i[i.length-1]-i[0],y=w*_.RELATIVE_CULL_TOLERANCE,A=l*_.RELATIVE_CULL_TOLERANCE;b-=y,x+=y,S-=A,p+=A,n.isVisible=function(T,M){return T>b&&T<x&&M>S&&M<p},n.isOccluded=function(T,M){return T<b||T>x||M<S||M>p},n.setScale=function(){var f=m(n._xctrl,n._yctrl,n._x,n._y,g.smoothing,s.smoothing);n._xctrl=f[0],n._yctrl=f[1],n.evalxy=E([n._xctrl,n._yctrl],a,r,g.smoothing,s.smoothing),n.dxydi=e([n._xctrl,n._yctrl],g.smoothing,s.smoothing),n.dxydj=c([n._xctrl,n._yctrl],g.smoothing,s.smoothing)},n.i2a=function(T){var M=Math.max(0,Math.floor(T[0]),a-2),f=T[0]-M;return(1-f)*t[M]+f*t[M+1]},n.j2b=function(T){var M=Math.max(0,Math.floor(T[1]),a-2),f=T[1]-M;return(1-f)*i[M]+f*i[M+1]},n.ij2ab=function(T){return[n.i2a(T[0]),n.j2b(T[1])]},n.a2i=function(T){var M=Math.max(0,Math.min(k(T,t),a-2)),f=t[M];return Math.max(0,Math.min(a-1,M+(T-f)/(t[M+1]-f)))},n.b2j=function(T){var M=Math.max(0,Math.min(k(T,i),r-2)),f=i[M];return Math.max(0,Math.min(r-1,M+(T-f)/(i[M+1]-f)))},n.ab2ij=function(T){return[n.a2i(T[0]),n.b2j(T[1])]},n.i2c=function(T,M){return n.evalxy([],T,M)},n.ab2xy=function(T,M,f){if(!f&&(T<t[0]||T>t[a-1]|M<i[0]||M>i[r-1]))return[!1,!1];var u=n.a2i(T),h=n.b2j(M),o=n.evalxy([],u,h);if(f){var O,I,F,D,C=0,R=0,z=[];T<t[0]?(O=0,I=0,C=(T-t[0])/(t[1]-t[0])):T>t[a-1]?(O=a-2,I=1,C=(T-t[a-1])/(t[a-1]-t[a-2])):I=u-(O=Math.max(0,Math.min(a-2,Math.floor(u)))),M<i[0]?(F=0,D=0,R=(M-i[0])/(i[1]-i[0])):M>i[r-1]?(F=r-2,D=1,R=(M-i[r-1])/(i[r-1]-i[r-2])):D=h-(F=Math.max(0,Math.min(r-2,Math.floor(h)))),C&&(n.dxydi(z,O,F,I,D),o[0]+=z[0]*C,o[1]+=z[1]*C),R&&(n.dxydj(z,O,F,I,D),o[0]+=z[0]*R,o[1]+=z[1]*R)}return o},n.c2p=function(T,M,f){return[M.c2p(T[0]),f.c2p(T[1])]},n.p2x=function(T,M,f){return[M.p2c(T[0]),f.p2c(T[1])]},n.dadi=function(T){var M=Math.max(0,Math.min(t.length-2,T));return t[M+1]-t[M]},n.dbdj=function(T){var M=Math.max(0,Math.min(i.length-2,T));return i[M+1]-i[M]},n.dxyda=function(T,M,f,u){var h=n.dxydi(null,T,M,f,u),o=n.dadi(T,f);return[h[0]/o,h[1]/o]},n.dxydb=function(T,M,f,u){var h=n.dxydj(null,T,M,f,u),o=n.dbdj(M,u);return[h[0]/o,h[1]/o]},n.dxyda_rough=function(T,M,f){var u=w*(f||.1),h=n.ab2xy(T+u,M,!0),o=n.ab2xy(T-u,M,!0);return[.5*(h[0]-o[0])/u,.5*(h[1]-o[1])/u]},n.dxydb_rough=function(T,M,f){var u=l*(f||.1),h=n.ab2xy(T,M+u,!0),o=n.ab2xy(T,M-u,!0);return[.5*(h[0]-o[0])/u,.5*(h[1]-o[1])/u]},n.dpdx=function(T){return T._m},n.dpdy=function(T){return T._m}}},{"../../lib/search":523,"./compute_control_points":701,"./constants":702,"./create_i_derivative_evaluator":703,"./create_j_derivative_evaluator":704,"./create_spline_evaluator":705}],714:[function(v,ie,ae){"use strict";var _=v("../../lib");ie.exports=function(m,E,e){var c,d,n,t=[],i=[],a=m[0].length,r=m.length;var oe,se,W,ne,G,s=0;for(c=0;c<a;c++)for(d=0;d<r;d++)void 0===m[d][c]&&(t.push(c),i.push(d),m[d][c]=(se=d,W=void 0,ne=void 0,G=void 0,ne=0,G=0,(oe=c)>0&&void 0!==(W=m[se][oe-1])&&(G++,ne+=W),oe<a-1&&void 0!==(W=m[se][oe+1])&&(G++,ne+=W),se>0&&void 0!==(W=m[se-1][oe])&&(G++,ne+=W),se<r-1&&void 0!==(W=m[se+1][oe])&&(G++,ne+=W),ne/Math.max(1,G))),s=Math.max(s,Math.abs(m[d][c]));if(!t.length)return m;var b,x,S,p,w,l,y,A,T,M,h=0,C=0,R=t.length;do{for(h=0,n=0;n<R;n++){d=i[n];var F,N,U,X,z=0,O=0;0===(c=t[n])?(U=Math.min(a-1,2),O+=(F=m[d][1])+(F-m[d][U])*(E[0]-(N=E[1]))/(N-E[U]),z++):c===a-1&&(U=Math.max(0,a-3),O+=(F=m[d][a-2])+(F-m[d][U])*(E[a-1]-(N=E[a-2]))/(N-E[U]),z++),(0===c||c===a-1)&&d>0&&d<r-1&&(O+=((x=e[d]-e[d-1])*m[d+1][c]+(b=e[d+1]-e[d])*m[d-1][c])/(x+b),z++),0===d?(X=Math.min(r-1,2),O+=(F=m[1][c])+(F-m[X][c])*(e[0]-(N=e[1]))/(N-e[X]),z++):d===r-1&&(X=Math.max(0,r-3),O+=(F=m[r-2][c])+(F-m[X][c])*(e[r-1]-(N=e[r-2]))/(N-e[X]),z++),(0===d||d===r-1)&&c>0&&c<a-1&&(O+=((x=E[c]-E[c-1])*m[d][c+1]+(b=E[c+1]-E[c])*m[d][c-1])/(x+b),z++),z?O/=z:O=((y=(S=E[c+1]-E[c])*(p=E[c]-E[c-1])*(S+p))*((l=e[d]-e[d-1])*m[d+1][c]+(w=e[d+1]-e[d])*m[d-1][c])+(A=w*l*(w+l))*(p*m[d][c+1]+S*m[d][c-1]))/(A*(p+S)+y*(l+w)),h+=(M=(T=O-m[d][c])/s)*M,m[d][c]+=T*(1+(z?0:.85))}h=Math.sqrt(h)}while(C++<100&&h>1e-5);return _.log("Smoother converged to",h,"after",C,"iterations"),m}},{"../../lib":503}],715:[function(v,ie,ae){"use strict";var _=v("../../lib").isArray1D;ie.exports=function(m,E,e){var c=e("x"),d=c&&c.length,n=e("y"),t=n&&n.length;if(!d&&!t)return!1;if(E._cheater=!c,d&&!_(c)||t&&!_(n))E._length=null;else{var i=d?c.length:1/0;t&&(i=Math.min(i,n.length)),E.a&&E.a.length&&(i=Math.min(i,E.a.length)),E.b&&E.b.length&&(i=Math.min(i,E.b.length)),E._length=i}return!0}},{"../../lib":503}],716:[function(v,ie,ae){"use strict";var _=v("../../plots/template_attributes").hovertemplateAttrs,k=v("../scattergeo/attributes"),m=v("../../components/colorscale/attributes"),E=v("../../plots/attributes"),e=v("../../components/color/attributes").defaultLine,c=v("../../lib/extend").extendFlat,d=k.marker.line;ie.exports=c({locations:{valType:"data_array",editType:"calc"},locationmode:k.locationmode,z:{valType:"data_array",editType:"calc"},geojson:c({},k.geojson,{}),featureidkey:k.featureidkey,text:c({},k.text,{}),hovertext:c({},k.hovertext,{}),marker:{line:{color:c({},d.color,{dflt:e}),width:c({},d.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:k.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:k.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:c({},E.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:_(),showlegend:c({},E.showlegend,{dflt:!1})},m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattergeo/attributes":969}],717:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../constants/numerical").BADNUM,m=v("../../components/colorscale/calc"),E=v("../scatter/arrays_to_calcdata"),e=v("../scatter/calc_selection");function c(d){return d&&"string"==typeof d}ie.exports=function(n,t){var r,i=t._length,a=new Array(i);r=t.geojson?function(S){return c(S)||_(S)}:c;for(var g=0;g<i;g++){var s=a[g]={},b=t.locations[g],x=t.z[g];r(b)&&_(x)?(s.loc=b,s.z=x):(s.loc=null,s.z=k),s.index=g}return E(a,t),m(n,t,{vals:t.z,containerStr:"",cLetter:"z"}),e(a,t),a}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../scatter/arrays_to_calcdata":926,"../scatter/calc_selection":929,"fast-isnumeric":190}],718:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../components/colorscale/defaults"),m=v("./attributes");ie.exports=function(e,c,d,n){function t(x,S){return _.coerce(e,c,m,x,S)}var i=t("locations"),a=t("z");if(i&&i.length&&_.isArrayOrTypedArray(a)&&a.length){c._length=Math.min(i.length,a.length);var g,r=t("geojson");("string"==typeof r&&""!==r||_.isPlainObject(r))&&(g="geojson-id"),"geojson-id"===t("locationmode",g)&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(e,c,n,t,{prefix:"",cLetter:"z"}),_.coerceSelectionMarkerOpacity(c,t)}else c.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":716}],719:[function(v,ie,ae){"use strict";ie.exports=function(k,m,E,e,c){k.location=m.location,k.z=m.z;var d=e[c];return d.fIn&&d.fIn.properties&&(k.properties=d.fIn.properties),k.ct=d.ct,k}},{}],720:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/axes"),k=v("./attributes"),m=v("../../lib").fillText;ie.exports=function(c,d,n){var r,g,s,b,t=c.cd,i=t[0].trace,a=c.subplot,x=[d,n],S=[d+360,n];for(g=0;g<t.length;g++)if(b=!1,(r=t[g])._polygons){for(s=0;s<r._polygons.length;s++)r._polygons[s].contains(x)&&(b=!b),r._polygons[s].contains(S)&&(b=!b);if(b)break}if(b&&r)return c.x0=c.x1=c.xa.c2p(r.ct),c.y0=c.y1=c.ya.c2p(r.ct),c.index=r.index,c.location=r.loc,c.z=r.z,c.zLabel=_.tickText(a.mockAxis,a.mockAxis.c2l(r.z),"hover").text,c.hovertemplate=r.hovertemplate,function E(e,c,d){if(!c.hovertemplate){var n=d.hi||c.hoverinfo,t=String(d.loc),i="all"===n?k.hoverinfo.flags:n.split("+"),a=-1!==i.indexOf("name"),r=-1!==i.indexOf("location"),g=-1!==i.indexOf("z"),s=-1!==i.indexOf("text"),x=[];!a&&r?e.nameOverride=t:(a&&(e.nameOverride=c.name),r&&x.push(t)),g&&x.push(e.zLabel),s&&m(d,c,x),e.extraText=x.join("<br>")}}(c,i,r),[c]}},{"../../lib":503,"../../plots/cartesian/axes":554,"./attributes":716}],721:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../heatmap/colorbar"),calc:v("./calc"),calcGeoJSON:v("./plot").calcGeoJSON,plot:v("./plot").plot,style:v("./style").style,styleOnSelect:v("./style").styleOnSelect,hoverPoints:v("./hover"),eventData:v("./event_data"),selectPoints:v("./select"),moduleType:"trace",name:"choropleth",basePlotModule:v("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":589,"../heatmap/colorbar":795,"./attributes":716,"./calc":717,"./defaults":718,"./event_data":719,"./hover":720,"./plot":722,"./select":723,"./style":724}],722:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../lib"),m=v("../../lib/geo_location_utils"),E=v("../../lib/topojson_utils").getTopojsonFeatures,e=v("../../plots/cartesian/autorange").findExtremes,c=v("./style").style;ie.exports={calcGeoJSON:function n(t,i){for(var a=t[0].trace,r=i[a.geo],g=r._subplot,s=a.locationmode,b=a._length,x="geojson-id"===s?m.extractTraceFeature(t):E(a,g.topojson),S=[],p=[],w=0;w<b;w++){var l=t[w],y="geojson-id"===s?l.fOut:m.locationToFeature(s,l.loc,x);if(y){l.geojson=y,l.ct=y.properties.ct,l._polygons=m.feature2polygons(y);var A=m.computeBbox(y);S.push(A[0],A[2]),p.push(A[1],A[3])}else l.geojson=null}if("geojson"===r.fitbounds&&"geojson-id"===s){var T=m.computeBbox(m.getTraceGeojson(a));S=[T[0],T[2]],p=[T[1],T[3]]}var M={padded:!0};a._extremes.lon=e(r.lonaxis._ax,S,M),a._extremes.lat=e(r.lataxis._ax,p,M)},plot:function d(t,i,a){var r=i.layers.backplot.select(".choroplethlayer");k.makeTraceGroups(r,a,"trace choropleth").each(function(g){var b=_.select(this).selectAll("path.choroplethlocation").data(k.identity);b.enter().append("path").classed("choroplethlocation",!0),b.exit().remove(),c(t,g)})}}},{"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"./style":724,"@plotly/d3":58}],723:[function(v,ie,ae){"use strict";ie.exports=function(k,m){var n,t,i,a,r,E=k.cd,e=k.xaxis,c=k.yaxis,d=[];if(!1===m)for(n=0;n<E.length;n++)E[n].selected=0;else for(n=0;n<E.length;n++)(i=(t=E[n]).ct)&&(a=e.c2p(i),r=c.c2p(i),m.contains([a,r],null,n,k)?(d.push({pointNumber:n,lon:i[0],lat:i[1]}),t.selected=1):t.selected=0);return d}},{}],724:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../components/color"),m=v("../../components/drawing"),E=v("../../components/colorscale");function c(n,t){var i=t[0].trace,r=t[0].node3.selectAll(".choroplethlocation"),g=i.marker||{},s=g.line||{},b=E.makeColorScaleFuncFromTrace(i);r.each(function(x){_.select(this).attr("fill",b(x.z)).call(k.stroke,x.mlc||s.color).call(m.dashLine,"",x.mlw||s.width||0).style("opacity",g.opacity)}),m.selectedPointStyle(r,i,n)}ie.exports={style:function e(n,t){t&&c(n,t)},styleOnSelect:function d(n,t){var a=t[0].trace;a.selectedpoints?m.selectedPointStyle(t[0].node3.selectAll(".choroplethlocation"),a,n):c(n,t)}}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"@plotly/d3":58}],725:[function(v,ie,ae){"use strict";var _=v("../choropleth/attributes"),k=v("../../components/colorscale/attributes"),m=v("../../plots/template_attributes").hovertemplateAttrs,E=v("../../plots/attributes"),e=v("../../lib/extend").extendFlat;ie.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},_.featureidkey,{}),below:{valType:"string",editType:"plot"},text:_.text,hovertext:_.hovertext,marker:{line:{color:e({},_.marker.line.color,{editType:"plot"}),width:e({},_.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},_.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},_.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},_.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:_.hoverinfo,hovertemplate:m({},{keys:["properties"]}),showlegend:e({},E.showlegend,{dflt:!1})},k("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../choropleth/attributes":716}],726:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../lib"),m=v("../../components/colorscale"),E=v("../../components/drawing"),e=v("../../lib/geojson_utils").makeBlank,c=v("../../lib/geo_location_utils");function n(t){var r,i=t[0].trace,a=i._opts;if(i.selectedpoints){for(var g=E.makeSelectedPointStyleFns(i),s=0;s<t.length;s++){var b=t[s];b.fOut&&(b.fOut.properties.mo2=g.selectedOpacityFn(b))}r={type:"identity",property:"mo2"}}else r=k.isArrayOrTypedArray(i.marker.opacity)?{type:"identity",property:"mo"}:i.marker.opacity;return k.extendFlat(a.fill.paint,{"fill-opacity":r}),k.extendFlat(a.line.paint,{"line-opacity":r}),a}ie.exports={convert:function d(t){var i=t[0].trace,a=!0===i.visible&&0!==i._length,r={layout:{visibility:"none"},paint:{}},g={layout:{visibility:"none"},paint:{}},s=i._opts={fill:r,line:g,geojson:e()};if(!a)return s;var b=c.extractTraceFeature(t);if(!b)return s;var w,l,y,x=m.makeColorScaleFuncFromTrace(i),S=i.marker,p=S.line||{};k.isArrayOrTypedArray(S.opacity)&&(w=function(h){var o=h.mo;return _(o)?+k.constrain(o,0,1):0}),k.isArrayOrTypedArray(p.color)&&(l=function(h){return h.mlc}),k.isArrayOrTypedArray(p.width)&&(y=function(h){return h.mlw});for(var A=0;A<t.length;A++){var T=t[A],M=T.fOut;if(M){var f=M.properties;f.fc=x(T.z),w&&(f.mo=w(T)),l&&(f.mlc=l(T)),y&&(f.mlw=y(T)),T.ct=f.ct,T._polygons=c.feature2polygons(M)}}var u=w?{type:"identity",property:"mo"}:S.opacity;return k.extendFlat(r.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":u}),k.extendFlat(g.paint,{"line-color":l?{type:"identity",property:"mlc"}:p.color,"line-width":y?{type:"identity",property:"mlw"}:p.width,"line-opacity":u}),r.layout.visibility="visible",g.layout.visibility="visible",s.geojson={type:"FeatureCollection",features:b},n(t),s},convertOnSelect:n}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"fast-isnumeric":190}],727:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../components/colorscale/defaults"),m=v("./attributes");ie.exports=function(e,c,d,n){function t(s,b){return _.coerce(e,c,m,s,b)}var i=t("locations"),a=t("z"),r=t("geojson");_.isArrayOrTypedArray(i)&&i.length&&_.isArrayOrTypedArray(a)&&a.length&&("string"==typeof r&&""!==r||_.isPlainObject(r))?(t("featureidkey"),c._length=Math.min(i.length,a.length),t("below"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(e,c,n,t,{prefix:"",cLetter:"z"}),_.coerceSelectionMarkerOpacity(c,t)):c.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":725}],728:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../heatmap/colorbar"),calc:v("../choropleth/calc"),plot:v("./plot"),hoverPoints:v("../choropleth/hover"),eventData:v("../choropleth/event_data"),selectPoints:v("../choropleth/select"),styleOnSelect:function(_,k){k&&k[0].trace._glTrace.updateOnSelect(k)},getBelow:function(_,k){for(var m=k.getMapLayers(),E=m.length-2;E>=0;E--){var e=m[E].id;if("string"==typeof e&&0===e.indexOf("water"))for(var c=E+1;c<m.length;c++)if("string"==typeof(e=m[c].id)&&-1===e.indexOf("plotly-"))return e}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:v("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":613,"../choropleth/calc":717,"../choropleth/event_data":719,"../choropleth/hover":720,"../choropleth/select":723,"../heatmap/colorbar":795,"./attributes":725,"./defaults":727,"./plot":729}],729:[function(v,ie,ae){"use strict";var _=v("./convert").convert,k=v("./convert").convertOnSelect,m=v("../../plots/mapbox/constants").traceLayerPrefix;function E(c,d){this.type="choroplethmapbox",this.subplot=c,this.uid=d,this.sourceId="source-"+d,this.layerList=[["fill",m+d+"-fill"],["line",m+d+"-line"]],this.below=null}var e=E.prototype;e.update=function(c){this._update(_(c))},e.updateOnSelect=function(c){this._update(k(c))},e._update=function(c){var d=this.subplot,n=this.layerList,t=d.belowLookup["trace-"+this.uid];d.map.getSource(this.sourceId).setData(c.geojson),t!==this.below&&(this._removeLayers(),this._addLayers(c,t),this.below=t);for(var i=0;i<n.length;i++){var a=n[i],g=a[1],s=c[a[0]];d.setOptions(g,"setLayoutProperty",s.layout),"visible"===s.layout.visibility&&d.setOptions(g,"setPaintProperty",s.paint)}},e._addLayers=function(c,d){for(var n=this.subplot,t=this.layerList,i=this.sourceId,a=0;a<t.length;a++){var r=t[a],g=r[0],s=c[g];n.addLayer({type:g,id:r[1],source:i,layout:s.layout,paint:s.paint},d)}},e._removeLayers=function(){for(var c=this.subplot.map,d=this.layerList,n=d.length-1;n>=0;n--)c.removeLayer(d[n][1])},e.dispose=function(){var c=this.subplot.map;this._removeLayers(),c.removeSource(this.sourceId)},ie.exports=function(d,n){var t=n[0].trace,i=new E(d,t.uid),a=i.sourceId,r=_(n),g=i.below=d.belowLookup["trace-"+t.uid];return d.map.addSource(a,{type:"geojson",data:r.geojson}),i._addLayers(r,g),n[0].trace._glTrace=i,i}},{"../../plots/mapbox/constants":611,"./convert":726}],730:[function(v,ie,ae){"use strict";var _=v("../../components/colorscale/attributes"),k=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=v("../../plots/template_attributes").hovertemplateAttrs,E=v("../mesh3d/attributes"),e=v("../../plots/attributes"),c=v("../../lib/extend").extendFlat,d={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:m({editType:"calc"},{keys:["norm"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:c({},e.showlegend,{dflt:!1})};c(d,_("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){d[t]=E[t]}),d.hoverinfo=c({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),d.transforms=void 0,ie.exports=d},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],731:[function(v,ie,ae){"use strict";var _=v("../../components/colorscale/calc");ie.exports=function(m,E){for(var e=E.u,c=E.v,d=E.w,n=Math.min(E.x.length,E.y.length,E.z.length,e.length,c.length,d.length),t=-1/0,i=1/0,a=0;a<n;a++){var r=e[a],g=c[a],s=d[a],b=Math.sqrt(r*r+g*g+s*s);t=Math.max(t,b),i=Math.min(i,b)}E._len=n,E._normMax=t,_(m,E,{vals:[i,t],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],732:[function(v,ie,ae){"use strict";var _=v("../../../stackgl_modules").gl_cone3d,k=v("../../../stackgl_modules").gl_cone3d.createConeMesh,m=v("../../lib").simpleMap,E=v("../../lib/gl_format_color").parseColorScale,e=v("../../components/colorscale").extractOpts,c=v("../../plots/gl3d/zip3");function d(s,b){this.scene=s,this.uid=b,this.mesh=null,this.data=null}var n=d.prototype;n.handlePick=function(s){if(s.object===this.mesh){var b=s.index=s.data.index,w=this.data.u[b],l=this.data.v[b],y=this.data.w[b];s.traceCoordinate=[this.data.x[b],this.data.y[b],this.data.z[b],w,l,y,Math.sqrt(w*w+l*l+y*y)];var A=this.data.hovertext||this.data.text;return Array.isArray(A)&&void 0!==A[b]?s.textLabel=A[b]:A&&(s.textLabel=A),!0}};var t={xaxis:0,yaxis:1,zaxis:2},i={tip:1,tail:0,cm:.25,center:.5},a={tip:1,tail:1,cm:.75,center:.5};function r(s,b){var x=s.fullSceneLayout,S=s.dataScale,p={};function w(T,M){var f=x[M],u=S[t[M]];return m(T,function(h){return f.d2l(h)*u})}p.vectors=c(w(b.u,"xaxis"),w(b.v,"yaxis"),w(b.w,"zaxis"),b._len),p.positions=c(w(b.x,"xaxis"),w(b.y,"yaxis"),w(b.z,"zaxis"),b._len);var l=e(b);p.colormap=E(b),p.vertexIntensityBounds=[l.min/b._normMax,l.max/b._normMax],p.coneOffset=i[b.anchor],p.coneSize="scaled"===b.sizemode?b.sizeref||.5:b.sizeref&&b._normMax?b.sizeref/b._normMax:.5;var y=_(p),A=b.lightposition;return y.lightPosition=[A.x,A.y,A.z],y.ambient=b.lighting.ambient,y.diffuse=b.lighting.diffuse,y.specular=b.lighting.specular,y.roughness=b.lighting.roughness,y.fresnel=b.lighting.fresnel,y.opacity=b.opacity,b._pad=a[b.anchor]*y.vectorScale*y.coneScale*b._normMax,y}n.update=function(s){this.data=s;var b=r(this.scene,s);this.mesh.update(b)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ie.exports=function g(s,b){var x=s.glplot.gl,S=r(s,b),p=k(x,S),w=new d(s,b.uid);return w.mesh=p,w.data=b,p._trace=w,s.glplot.add(p),w}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],733:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../components/colorscale/defaults"),m=v("./attributes");ie.exports=function(e,c,d,n){function t(x,S){return _.coerce(e,c,m,x,S)}var i=t("u"),a=t("v"),r=t("w"),g=t("x"),s=t("y"),b=t("z");i&&i.length&&a&&a.length&&r&&r.length&&g&&g.length&&s&&s.length&&b&&b.length?(t("sizeref"),t("sizemode"),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(e,c,n,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),c._length=null):c.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":730}],734:[function(v,ie,ae){"use strict";ie.exports={moduleType:"trace",name:"cone",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:v("./calc"),plot:v("./convert"),eventData:function(_,k){return _.norm=k.traceCoordinate[6],_},meta:{}}},{"../../plots/gl3d":598,"./attributes":730,"./calc":731,"./convert":732,"./defaults":733}],735:[function(v,ie,ae){"use strict";var _=v("../heatmap/attributes"),k=v("../scatter/attributes"),m=v("../../plots/cartesian/axis_format_attributes"),E=m.axisHoverFormat,e=m.descriptionOnlyNumbers,c=v("../../components/colorscale/attributes"),d=v("../../components/drawing/attributes").dash,n=v("../../plots/font_attributes"),t=v("../../lib/extend").extendFlat,i=v("../../constants/filter_ops"),a=i.COMPARISON_OPS2,r=i.INTERVAL_OPS,g=k.line;ie.exports=t({z:_.z,x:_.x,x0:_.x0,dx:_.dx,y:_.y,y0:_.y0,dy:_.dy,xperiod:_.xperiod,yperiod:_.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:_.xperiodalignment,yperiodalignment:_.yperiodalignment,text:_.text,hovertext:_.hovertext,transpose:_.transpose,xtype:_.xtype,ytype:_.ytype,xhoverformat:E("x"),yhoverformat:E("y"),zhoverformat:E("z",1),hovertemplate:_.hovertemplate,texttemplate:t({},_.texttemplate,{}),textfont:t({},_.textfont,{}),hoverongaps:_.hoverongaps,connectgaps:t({},_.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:n({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(a).concat(r),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:t({},g.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:d,smoothing:t({},g.smoothing,{}),editType:"plot"}},c("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../constants/filter_ops":475,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../heatmap/attributes":792,"../scatter/attributes":927}],736:[function(v,ie,ae){"use strict";var _=v("../../components/colorscale"),k=v("../heatmap/calc"),m=v("./set_contours"),E=v("./end_plus");ie.exports=function(c,d){var n=k(c,d),t=n[0].z;m(d,t);var r,i=d.contours,a=_.extractOpts(d);if("heatmap"===i.coloring&&a.auto&&!1===d.autocontour){var g=i.start,s=E(i),b=i.size||1,x=Math.floor((s-g)/b)+1;isFinite(b)||(b=1,x=1);var S=g-b/2;r=[S,S+x*b]}else r=t;return _.calc(c,d,{vals:r,cLetter:"z"}),n}},{"../../components/colorscale":378,"../heatmap/calc":793,"./end_plus":746,"./set_contours":754}],737:[function(v,ie,ae){"use strict";ie.exports=function(_,k){var e,m=_[0],E=m.z;switch(k.type){case"levels":var c=Math.min(E[0][0],E[0][1]);for(e=0;e<_.length;e++){var d=_[e];d.prefixBoundary=!d.edgepaths.length&&(c>d.level||d.starts.length&&c===d.level)}break;case"constraint":if(m.prefixBoundary=!1,m.edgepaths.length)return;var n=m.x.length,t=m.y.length,i=-1/0,a=1/0;for(e=0;e<t;e++)a=Math.min(a,E[e][0]),a=Math.min(a,E[e][n-1]),i=Math.max(i,E[e][0]),i=Math.max(i,E[e][n-1]);for(e=1;e<n-1;e++)a=Math.min(a,E[0][e]),a=Math.min(a,E[t-1][e]),i=Math.max(i,E[0][e]),i=Math.max(i,E[t-1][e]);var g,s,r=k.value;switch(k._operation){case">":r>i&&(m.prefixBoundary=!0);break;case"<":(r<a||m.starts.length&&r===a)&&(m.prefixBoundary=!0);break;case"[]":g=Math.min(r[0],r[1]),((s=Math.max(r[0],r[1]))<a||g>i||m.starts.length&&s===a)&&(m.prefixBoundary=!0);break;case"][":g=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),g<a&&s>i&&(m.prefixBoundary=!0)}}}},{}],738:[function(v,ie,ae){"use strict";var _=v("../../components/colorscale"),k=v("./make_color_map"),m=v("./end_plus");ie.exports={min:"zmin",max:"zmax",calc:function E(e,c,d){var n=c.contours,t=c.line,i=n.size||1,a=n.coloring,r=k(c,{isColorbar:!0});if("heatmap"===a){var g=_.extractOpts(c);d._fillgradient=g.reversescale?_.flipScale(g.colorscale):g.colorscale,d._zrange=[g.min,g.max]}else"fill"===a&&(d._fillcolor=r);d._line={color:"lines"===a?r:t.color,width:!1!==n.showlines?t.width:0,dash:t.dash},d._levels={start:n.start,end:m(n),size:i}}}},{"../../components/colorscale":378,"./end_plus":746,"./make_color_map":751}],739:[function(v,ie,ae){"use strict";ie.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],740:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("./label_defaults"),m=v("../../components/color"),E=m.addOpacity,e=m.opacity,c=v("../../constants/filter_ops"),d=c.CONSTRAINT_REDUCTION,n=c.COMPARISON_OPS2;ie.exports=function(a,r,g,s,b,x){var p,w,l,S=r.contours,y=g("contours.operation");S._operation=d[y],function t(i,a){var r;-1===n.indexOf(a.operation)?(i("contours.value",[0,1]),Array.isArray(a.value)?a.value.length>2?a.value=a.value.slice(2):0===a.length?a.value=[0,1]:a.length<2?(r=parseFloat(a.value[0]),a.value=[r,r+1]):a.value=[parseFloat(a.value[0]),parseFloat(a.value[1])]:_(a.value)&&(r=parseFloat(a.value),a.value=[r,r+1])):(i("contours.value",0),_(a.value)||(a.value=Array.isArray(a.value)?parseFloat(a.value[0]):0))}(g,S),"="===y?p=S.showlines=!0:(p=g("contours.showlines"),l=g("fillcolor",E((a.line||{}).color||b,.5))),p&&(w=g("line.color",l&&e(l)?E(r.fillcolor,1):b),g("line.width",2),g("line.dash")),g("line.smoothing"),k(g,s,w,x)}},{"../../components/color":366,"../../constants/filter_ops":475,"./label_defaults":750,"fast-isnumeric":190}],741:[function(v,ie,ae){"use strict";var _=v("../../constants/filter_ops"),k=v("fast-isnumeric");function m(c,d){var t,n=Array.isArray(d);function i(a){return k(a)?+a:null}return-1!==_.COMPARISON_OPS2.indexOf(c)?t=i(n?d[0]:d):-1!==_.INTERVAL_OPS.indexOf(c)?t=n?[i(d[0]),i(d[1])]:[i(d),i(d)]:-1!==_.SET_OPS.indexOf(c)&&(t=n?d.map(i):[i(d)]),t}function E(c){return function(d){d=m(c,d);var n=Math.min(d[0],d[1]),t=Math.max(d[0],d[1]);return{start:n,end:t,size:t-n}}}function e(c){return function(d){return{start:d=m(c,d),end:1/0,size:1/0}}}ie.exports={"[]":E("[]"),"][":E("]["),">":e(">"),"<":e("<"),"=":e("=")}},{"../../constants/filter_ops":475,"fast-isnumeric":190}],742:[function(v,ie,ae){"use strict";ie.exports=function(k,m,E,e){var c=e("contours.start"),d=e("contours.end"),n=!1===c||!1===d,t=E("contours.size");((n?m.autocontour=!0:E("autocontour",!1))||!t)&&E("ncontours")}},{}],743:[function(v,ie,ae){"use strict";var _=v("../../lib");function k(m){return _.extendFlat({},m,{edgepaths:_.extendDeep([],m.edgepaths),paths:_.extendDeep([],m.paths),starts:_.extendDeep([],m.starts)})}ie.exports=function(m,E){var e,c,d,n=function(a){return a.reverse()},t=function(a){return a};switch(E){case"=":case"<":return m;case">":for(1!==m.length&&_.warn("Contour data invalid for the specified inequality operation."),c=m[0],e=0;e<c.edgepaths.length;e++)c.edgepaths[e]=n(c.edgepaths[e]);for(e=0;e<c.paths.length;e++)c.paths[e]=n(c.paths[e]);for(e=0;e<c.starts.length;e++)c.starts[e]=n(c.starts[e]);return m;case"][":var i=n;n=t,t=i;case"[]":for(2!==m.length&&_.warn("Contour data invalid for the specified inequality range operation."),c=k(m[0]),d=k(m[1]),e=0;e<c.edgepaths.length;e++)c.edgepaths[e]=n(c.edgepaths[e]);for(e=0;e<c.paths.length;e++)c.paths[e]=n(c.paths[e]);for(e=0;e<c.starts.length;e++)c.starts[e]=n(c.starts[e]);for(;d.edgepaths.length;)c.edgepaths.push(t(d.edgepaths.shift()));for(;d.paths.length;)c.paths.push(t(d.paths.shift()));for(;d.starts.length;)c.starts.push(t(d.starts.shift()));return[c]}}},{"../../lib":503}],744:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../heatmap/xyz_defaults"),m=v("../scatter/period_defaults"),E=v("./constraint_defaults"),e=v("./contours_defaults"),c=v("./style_defaults"),d=v("../heatmap/label_defaults"),n=v("./attributes");ie.exports=function(i,a,r,g){function s(p,w){return _.coerce(i,a,n,p,w)}if(k(i,a,s,g)){m(i,a,g,s),s("xhoverformat"),s("yhoverformat"),s("text"),s("hovertext"),s("hoverongaps"),s("hovertemplate");var S="constraint"===s("contours.type");s("connectgaps",_.isArray1D(a.z)),S?E(i,a,s,g,r):(e(i,a,s,function b(p){return _.coerce2(i,a,n,p)}),c(i,a,s,g)),a.contours&&"heatmap"===a.contours.coloring&&d(s,g)}else a.visible=!1}},{"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/xyz_defaults":807,"../scatter/period_defaults":947,"./attributes":735,"./constraint_defaults":740,"./contours_defaults":742,"./style_defaults":756}],745:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./constraint_mapping"),m=v("./end_plus");ie.exports=function(e,c,d){for(var n="constraint"===e.type?k[e._operation](e.value):e,t=n.size,i=[],a=m(n),r=d.trace._carpetTrace,g=r?{xaxis:r.aaxis,yaxis:r.baxis,x:d.a,y:d.b}:{xaxis:c.xaxis,yaxis:c.yaxis,x:d.x,y:d.y},s=n.start;s<a;s+=t)if(i.push(_.extendFlat({level:s,crossings:{},starts:[],edgepaths:[],paths:[],z:d.z,smoothing:d.trace.line.smoothing},g)),i.length>1e3){_.warn("Too many contours, clipping at 1000",e);break}return i}},{"../../lib":503,"./constraint_mapping":741,"./end_plus":746}],746:[function(v,ie,ae){"use strict";ie.exports=function(k){return k.end+k.size/1e6}},{}],747:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./constants");function m(n,t,i,a){return Math.abs(n[0]-t[0])<i&&Math.abs(n[1]-t[1])<a}function E(n,t){var i=n[2]-t[2],a=n[3]-t[3];return Math.sqrt(i*i+a*a)}function e(n,t,i,a,r){var y,g=t.join(","),s=n.crossings[g],b=function c(n,t,i){var a=0,r=0;return n>20&&t?208===n||1114===n?a=0===i[0]?1:-1:r=0===i[1]?1:-1:-1!==k.BOTTOMSTART.indexOf(n)?r=1:-1!==k.LEFTSTART.indexOf(n)?a=1:-1!==k.TOPSTART.indexOf(n)?r=-1:a=-1,[a,r]}(s,i,t),x=[d(n,t,[-b[0],-b[1]])],S=n.z.length,p=n.z[0].length,w=t.slice(),l=b.slice();for(y=0;y<1e4;y++){if(s>20?n.crossings[g]=k.SADDLEREMAINDER[s=k.CHOOSESADDLE[s][(b[0]||b[1])<0?0:1]]:delete n.crossings[g],!(b=k.NEWDELTA[s])){_.log("Found bad marching index:",s,t,n.level);break}if(x.push(d(n,t,b)),t[0]+=b[0],t[1]+=b[1],g=t.join(","),m(x[x.length-1],x[x.length-2],a,r)&&x.pop(),t[0]===w[0]&&t[1]===w[1]&&b[0]===l[0]&&b[1]===l[1]||i&&(b[0]&&(t[0]<0||t[0]>p-2)||b[1]&&(t[1]<0||t[1]>S-2)))break;s=n.crossings[g]}1e4===y&&_.log("Infinite loop in contour?");var C,R,z,O,I,F,D,N,U,X,oe,M=m(x[0],x[x.length-1],a,r),f=0,u=.2*n.smoothing,h=[],o=0;for(y=1;y<x.length;y++)f+=D=E(x[y],x[y-1]),h.push(D);var se=f/h.length*u;function ne($){return x[$%x.length]}for(y=x.length-2;y>=o;y--)if((C=h[y])<se){for(z=0,R=y-1;R>=o&&C+h[R]<se;R--)C+=h[R];if(M&&y===x.length-2)for(z=0;z<R&&C+h[z]<se;z++)C+=h[z];I=y-R+z+1,F=Math.floor((y+R+z+2)/2),O=M||y!==x.length-2?M||-1!==R?I%2?ne(F):[(ne(F)[0]+ne(F+1)[0])/2,(ne(F)[1]+ne(F+1)[1])/2]:x[0]:x[x.length-1],x.splice(R+1,y-R+1,O),y=R+1,z&&(o=z),M&&(y===x.length-2?x[z]=x[x.length-1]:0===y&&(x[x.length-1]=x[0]))}for(x.splice(0,o),y=0;y<x.length;y++)x[y].length=2;if(!(x.length<2))if(M)x.pop(),n.paths.push(x);else{i||_.log("Unclosed interior contour?",n.level,w.join(","),x.join("L"));var W=!1;for(N=0;N<n.edgepaths.length;N++)if(X=n.edgepaths[N],!W&&m(X[0],x[x.length-1],a,r)){x.pop(),W=!0;var G=!1;for(U=0;U<n.edgepaths.length;U++)if(m((oe=n.edgepaths[U])[oe.length-1],x[0],a,r)){G=!0,x.shift(),n.edgepaths.splice(N,1),U===N?n.paths.push(x.concat(oe)):(U>N&&U--,n.edgepaths[U]=oe.concat(x,X));break}G||(n.edgepaths[N]=x.concat(X))}for(N=0;N<n.edgepaths.length&&!W;N++)m((X=n.edgepaths[N])[X.length-1],x[0],a,r)&&(x.shift(),n.edgepaths[N]=X.concat(x),W=!0);W||n.edgepaths.push(x)}}function d(n,t,i){var a=t[0]+Math.max(i[0],0),r=t[1]+Math.max(i[1],0),g=n.z[r][a],s=n.xaxis,b=n.yaxis;if(i[1]){var x=(n.level-g)/(n.z[r][a+1]-g),S=(1!==x?(1-x)*s.c2l(n.x[a]):0)+(0!==x?x*s.c2l(n.x[a+1]):0);return[s.c2p(s.l2c(S),!0),b.c2p(n.y[r],!0),a+x,r]}var p=(n.level-g)/(n.z[r+1][a]-g),w=(1!==p?(1-p)*b.c2l(n.y[r]):0)+(0!==p?p*b.c2l(n.y[r+1]):0);return[s.c2p(n.x[a],!0),b.c2p(b.l2c(w),!0),a,r+p]}ie.exports=function(t,i,a){var r,s,b,x;for(i=i||.01,a=a||.01,s=0;s<t.length;s++){for(b=t[s],x=0;x<b.starts.length;x++)e(b,b.starts[x],"edge",i,a);for(r=0;Object.keys(b.crossings).length&&r<1e4;)r++,e(b,Object.keys(b.crossings)[0].split(",").map(Number),void 0,i,a);1e4===r&&_.log("Infinite loop in contour?")}}},{"../../lib":503,"./constants":739}],748:[function(v,ie,ae){"use strict";var _=v("../../components/color"),k=v("../heatmap/hover");ie.exports=function(E,e,c,d,n){n||(n={}),n.isContour=!0;var t=k(E,e,c,d,n);return t&&t.forEach(function(i){var a=i.trace;"constraint"===a.contours.type&&(a.fillcolor&&_.opacity(a.fillcolor)?i.color=_.addOpacity(a.fillcolor,1):a.contours.showlines&&_.opacity(a.line.color)&&(i.color=_.addOpacity(a.line.color,1)))}),t}},{"../../components/color":366,"../heatmap/hover":799}],749:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot").plot,style:v("./style"),colorbar:v("./colorbar"),hoverPoints:v("./hover"),moduleType:"trace",name:"contour",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":735,"./calc":736,"./colorbar":738,"./defaults":744,"./hover":748,"./plot":753,"./style":755}],750:[function(v,ie,ae){"use strict";var _=v("../../lib");ie.exports=function(m,E,e,c){if(c||(c={}),m("contours.showlabels")){var n=E.font;_.coerceFont(m,"contours.labelfont",{family:n.family,size:n.size,color:e}),m("contours.labelformat")}!1!==c.hasHover&&m("zhoverformat")}},{"../../lib":503}],751:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../components/colorscale"),m=v("./end_plus");ie.exports=function(e){var c=e.contours,d=c.start,n=m(c),t=c.size||1,i=Math.floor((n-d)/t)+1,a="lines"===c.coloring?0:1,r=k.extractOpts(e);isFinite(t)||(t=1,i=1);var S,p,g=r.reversescale?k.flipScale(r.colorscale):r.colorscale,s=g.length,b=new Array(s),x=new Array(s);if("heatmap"===c.coloring){var w=r.min,l=r.max;for(p=0;p<s;p++)b[p]=(S=g[p])[0]*(l-w)+w,x[p]=S[1];var y=_.extent([w,l,c.start,c.start+t*(i-1)]),A=y[w<l?0:1],T=y[w<l?1:0];A!==w&&(b.splice(0,0,A),x.splice(0,0,x[0])),T!==l&&(b.push(T),x.push(x[x.length-1]))}else for(p=0;p<s;p++)b[p]=((S=g[p])[0]*(i+a-1)-a/2)*t+d,x[p]=S[1];return k.makeColorScaleFunc({domain:b,range:x},{noNumericCheck:!0})}},{"../../components/colorscale":378,"./end_plus":746,"@plotly/d3":58}],752:[function(v,ie,ae){"use strict";var _=v("./constants");function k(m,E){var e=(E[0][0]>m?0:1)+(E[0][1]>m?0:2)+(E[1][1]>m?0:4)+(E[1][0]>m?0:8);return 5===e||10===e?m>(E[0][0]+E[0][1]+E[1][0]+E[1][1])/4?5===e?713:1114:5===e?104:208:15===e?0:e}ie.exports=function(E){var t,i,a,r,g,s,b,x,S,e=E[0].z,c=e.length,d=e[0].length,n=2===c||2===d;for(i=0;i<c-1;i++)for(r=[],0===i&&(r=r.concat(_.BOTTOMSTART)),i===c-2&&(r=r.concat(_.TOPSTART)),t=0;t<d-1;t++)for(a=r.slice(),0===t&&(a=a.concat(_.LEFTSTART)),t===d-2&&(a=a.concat(_.RIGHTSTART)),g=t+","+i,s=[[e[i][t],e[i][t+1]],[e[i+1][t],e[i+1][t+1]]],S=0;S<E.length;S++)(b=k((x=E[S]).level,s))&&(x.crossings[g]=b,-1!==a.indexOf(b)&&(x.starts.push([t,i]),n&&-1!==a.indexOf(b,a.indexOf(b)+1)&&x.starts.push([t,i])))}},{"./constants":739}],753:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../lib"),m=v("../../components/drawing"),E=v("../../components/colorscale"),e=v("../../lib/svg_text_utils"),c=v("../../plots/cartesian/axes"),d=v("../../plots/cartesian/set_convert"),n=v("../heatmap/plot"),t=v("./make_crossings"),i=v("./find_all_paths"),a=v("./empty_pathinfo"),r=v("./convert_to_constraints"),g=v("./close_boundaries"),s=v("./constants"),b=s.LABELOPTIMIZER;function p(T,M){var C,R,z,O,I,F,f="",u=0,h=T.edgepaths.map(function(se,ne){return ne}),o=!0;function N(se){return Math.abs(se[1]-M[2][1])<.01}function U(se){return Math.abs(se[0]-M[0][0])<.01}function X(se){return Math.abs(se[0]-M[2][0])<.01}for(;h.length;){for(F=m.smoothopen(T.edgepaths[u],T.smoothing),f+=o?F:F.replace(/^M/,"L"),h.splice(h.indexOf(u),1),C=T.edgepaths[u][T.edgepaths[u].length-1],O=-1,z=0;z<4;z++){if(!C){k.log("Missing end?",u,T);break}for(Math.abs(C[1]-M[0][1])<.01&&!X(C)?R=M[1]:U(C)?R=M[0]:N(C)?R=M[3]:X(C)&&(R=M[2]),I=0;I<T.edgepaths.length;I++){var oe=T.edgepaths[I][0];Math.abs(C[0]-R[0])<.01?Math.abs(C[0]-oe[0])<.01&&(oe[1]-C[1])*(R[1]-oe[1])>=0&&(R=oe,O=I):Math.abs(C[1]-R[1])<.01?Math.abs(C[1]-oe[1])<.01&&(oe[0]-C[0])*(R[0]-oe[0])>=0&&(R=oe,O=I):k.log("endpt to newendpt is not vert. or horz.",C,R,oe)}if(C=R,O>=0)break;f+="L"+R}if(O===T.edgepaths.length){k.log("unclosed perimeter path");break}(o=-1===h.indexOf(u=O))&&(u=h[0],f+="Z")}for(u=0;u<T.paths.length;u++)f+=m.smoothclosed(T.paths[u],T.smoothing);return f}function l(T,M,f,u){var h=M.width/2,o=M.height/2,C=T.x,R=T.y,z=T.theta,O=Math.cos(z)*h,I=Math.sin(z)*h,F=(C>u.center?u.right-C:C-u.left)/(O+Math.abs(Math.sin(z)*o)),D=(R>u.middle?u.bottom-R:R-u.top)/(Math.abs(I)+Math.cos(z)*o);if(F<1||D<1)return 1/0;var N=b.EDGECOST*(1/(F-1)+1/(D-1));N+=b.ANGLECOST*z*z;for(var U=C-O,X=R-I,oe=C+O,se=R+I,ne=0;ne<f.length;ne++){var W=f[ne],G=Math.cos(W.theta)*W.width/2,$=Math.sin(W.theta)*W.width/2,V=2*k.segmentDistance(U,X,oe,se,W.x-G,W.y-$,W.x+G,W.y+$)/(M.height+W.height),H=W.level===M.level,q=H?b.SAMELEVELDISTANCE:1;if(V<=q)return 1/0;N+=b.NEIGHBORCOST*(H?b.SAMELEVELFACTOR:1)/(V-q)}return N}function A(T){var o,R,M=T.trace._emptypoints,f=[],u=T.z.length,h=T.z[0].length,C=[];for(o=0;o<h;o++)C.push(1);for(o=0;o<u;o++)f.push(C.slice());for(o=0;o<M.length;o++)f[(R=M[o])[0]][R[1]]=0;return T.zmask=f,f}ae.plot=function(M,f,u,h){var o=f.xaxis,C=f.yaxis;k.makeTraceGroups(h,u,"contour").each(function(R){var z=_.select(this),O=R[0],F=O.x,D=O.y,N=O.trace.contours,U=a(N,f,O),X=k.ensureSingle(z,"g","heatmapcoloring"),oe=[];"heatmap"===N.coloring&&(oe=[R]),n(M,f,oe,X),t(U),i(U);var se=o.c2p(F[0],!0),ne=o.c2p(F[F.length-1],!0),W=C.c2p(D[0],!0),G=C.c2p(D[D.length-1],!0),$=[[se,G],[ne,G],[ne,W],[se,W]],V=U;"constraint"===N.type&&(V=r(U,N._operation)),function x(T,M,f){var h=k.ensureSingle(T,"g","contourbg").selectAll("path").data("fill"===f.coloring?[0]:[]);h.enter().append("path"),h.exit().remove(),h.attr("d","M"+M.join("L")+"Z").style("stroke","none")}(z,$,N),function S(T,M,f,u){var h="fill"===u.coloring||"constraint"===u.type&&"="!==u._operation,o="M"+f.join("L")+"Z";h&&g(M,u);var R=k.ensureSingle(T,"g","contourfill").selectAll("path").data(h?M:[]);R.enter().append("path"),R.exit().remove(),R.each(function(z){var O=(z.prefixBoundary?o:"")+p(z,f);O?_.select(this).attr("d",O).style("stroke","none"):_.select(this).remove()})}(z,V,$,N),function w(T,M,f,u,h){var o=k.ensureSingle(T,"g","contourlines"),C=!1!==h.showlines,R=h.showlabels,z=C&&R,O=ae.createLines(o,C||R,M),I=ae.createLineClip(o,z,f,u.trace.uid),F=T.selectAll("g.contourlabels").data(R?[0]:[]);if(F.exit().remove(),F.enter().append("g").classed("contourlabels",!0),R){var D=[],N=[];k.clearLocationCache();var U=ae.labelFormatter(f,u),X=m.tester.append("text").attr("data-notex",1).call(m.font,h.labelfont),oe=M[0].xaxis,se=M[0].yaxis,ne=oe._length,W=se._length,G=oe.range,$=se.range,V=k.aggNums(Math.min,null,u.x),H=k.aggNums(Math.max,null,u.x),q=k.aggNums(Math.min,null,u.y),K=k.aggNums(Math.max,null,u.y),Y=Math.max(oe.c2p(V,!0),0),te=Math.min(oe.c2p(H,!0),ne),J=Math.max(se.c2p(K,!0),0),j=Math.min(se.c2p(q,!0),W),re={};G[0]<G[1]?(re.left=Y,re.right=te):(re.left=te,re.right=Y),$[0]<$[1]?(re.top=J,re.bottom=j):(re.top=j,re.bottom=J),re.middle=(re.top+re.bottom)/2,re.center=(re.left+re.right)/2,D.push([[re.left,re.top],[re.right,re.top],[re.right,re.bottom],[re.left,re.bottom]]);var le=Math.sqrt(ne*ne+W*W),ge=s.LABELDISTANCE*le/Math.max(1,M.length/s.LABELINCREASE);O.each(function(pe){var xe=ae.calcTextOpts(pe.level,U,X,f);_.select(this).selectAll("path").each(function(){var we=k.getVisibleSegment(this,re,xe.height/2);if(we&&!(we.len<(xe.width+xe.height)*s.LABELMIN))for(var de=Math.min(Math.ceil(we.len/ge),s.LABELMAX),be=0;be<de;be++){var Le=ae.findBestTextLocation(this,we,xe,N,re);if(!Le)break;ae.addLabelData(Le,xe,N,D)}})}),X.remove(),ae.drawLabels(F,N,f,I,z?D:null)}R&&!C&&O.remove()}(z,U,M,O,N),function y(T,M,f,u,h){var o=u.trace,R="clip"+o.uid,z=f._fullLayout._clips.selectAll("#"+R).data(o.connectgaps?[]:[0]);if(z.enter().append("clipPath").classed("contourclip",!0).attr("id",R),z.exit().remove(),!1===o.connectgaps){var O={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:M.xaxis,yaxis:M.yaxis,x:u.x,y:u.y,z:A(u),smoothing:0};t([O]),i([O]),g([O],{type:"levels"}),k.ensureSingle(z,"path","").attr("d",(O.prefixBoundary?"M"+h.join("L")+"Z":"")+p(O,h))}else R=null;m.setClipUrl(T,R,f)}(z,f,M,O,$)})},ae.createLines=function(T,M,f){var u=f[0].smoothing,h=T.selectAll("g.contourlevel").data(M?f:[]);if(h.exit().remove(),h.enter().append("g").classed("contourlevel",!0),M){var o=h.selectAll("path.openline").data(function(R){return R.pedgepaths||R.edgepaths});o.exit().remove(),o.enter().append("path").classed("openline",!0),o.attr("d",function(R){return m.smoothopen(R,u)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var C=h.selectAll("path.closedline").data(function(R){return R.ppaths||R.paths});C.exit().remove(),C.enter().append("path").classed("closedline",!0),C.attr("d",function(R){return m.smoothclosed(R,u)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return h},ae.createLineClip=function(T,M,f,u){var o=M?"clipline"+u:null,C=f._fullLayout._clips.selectAll("#"+o).data(M?[0]:[]);return C.exit().remove(),C.enter().append("clipPath").classed("contourlineclip",!0).attr("id",o),m.setClipUrl(T,o,f),C},ae.labelFormatter=function(T,M){var f=T._fullLayout,u=M.trace,h=u.contours,o={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(h.labelformat)o.tickformat=h.labelformat,d(o,f);else{var C=E.extractOpts(u);if(C&&C.colorbar&&C.colorbar._axis)o=C.colorbar._axis;else{if("constraint"===h.type){var R=h.value;o.range=Array.isArray(R)?[R[0],R[R.length-1]]:[R,R]}else o.range=[h.start,h.end],o.nticks=(h.end-h.start)/h.size;o.range[0]===o.range[1]&&(o.range[1]+=o.range[0]||1),o.nticks||(o.nticks=1e3),d(o,f),c.prepTicks(o),o._tmin=null,o._tmax=null}}return function(z){return c.tickText(o,z).text}},ae.calcTextOpts=function(T,M,f,u){var h=M(T);f.text(h).call(e.convertToTspans,u);var o=f.node(),C=m.bBox(o,!0);return{text:h,width:C.width,height:C.height,fontSize:+o.style["font-size"].replace("px",""),level:T,dy:(C.top+C.bottom)/2}},ae.findBestTextLocation=function(T,M,f,u,h){var C,R,z,O,I,o=f.width;M.isClosed?(C=M.min+(R=M.len/b.INITIALSEARCHPOINTS)/2,z=M.max):(C=M.min+(R=(M.len-o)/(b.INITIALSEARCHPOINTS+1))+o/2,z=M.max-(R+o)/2);for(var F=1/0,D=0;D<b.ITERATIONS;D++){for(var N=C;N<z;N+=R){var U=k.getTextLocation(T,M.total,N,o),X=l(U,f,u,h);X<F&&(F=X,I=U,O=N)}if(F>2*b.MAXCOST)break;D&&(R/=2),z=(C=O-R/2)+1.5*R}if(F<=b.MAXCOST)return I},ae.addLabelData=function(T,M,f,u){var h=M.fontSize,o=M.width+h/3,C=Math.max(0,M.height-h/3),R=T.x,z=T.y,O=T.theta,I=Math.sin(O),F=Math.cos(O),D=function(U,X){return[R+U*F-X*I,z+U*I+X*F]},N=[D(-o/2,-C/2),D(-o/2,C/2),D(o/2,C/2),D(o/2,-C/2)];f.push({text:M.text,x:R,y:z,dy:M.dy,theta:O,level:M.level,width:o,height:C}),u.push(N)},ae.drawLabels=function(T,M,f,u,h){var o=T.selectAll("text").data(M,function(O){return O.text+","+O.x+","+O.y+","+O.theta});if(o.exit().remove(),o.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(O){var I=O.x+Math.sin(O.theta)*O.dy,F=O.y-Math.cos(O.theta)*O.dy;_.select(this).text(O.text).attr({x:I,y:F,transform:"rotate("+180*O.theta/Math.PI+" "+I+" "+F+")"}).call(e.convertToTspans,f)}),h){for(var C="",R=0;R<h.length;R++)C+="M"+h[R].join("L")+"Z";k.ensureSingle(u,"path","").attr("d",C)}}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/set_convert":576,"../heatmap/plot":804,"./close_boundaries":737,"./constants":739,"./convert_to_constraints":743,"./empty_pathinfo":745,"./find_all_paths":747,"./make_crossings":752,"@plotly/d3":58}],754:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/axes"),k=v("../../lib");function m(E,e,c){var d={type:"linear",range:[E,e]};return _.autoTicks(d,(e-E)/(c||15)),d}ie.exports=function(e,c){var d=e.contours;if(e.autocontour){var n=e.zmin,t=e.zmax;(e.zauto||void 0===n)&&(n=k.aggNums(Math.min,null,c)),(e.zauto||void 0===t)&&(t=k.aggNums(Math.max,null,c));var i=m(n,t,e.ncontours);d.size=i.dtick,d.start=_.tickFirst(i),i.range.reverse(),d.end=_.tickFirst(i),d.start===n&&(d.start+=d.size),d.end===t&&(d.end-=d.size),d.start>d.end&&(d.start=d.end=(d.start+d.end)/2),e._input.contours||(e._input.contours={}),k.extendFlat(e._input.contours,{start:d.start,end:d.end,size:d.size}),e._input.autocontour=!0}else if("constraint"!==d.type){var s,a=d.start,r=d.end,g=e._input.contours;a>r&&(d.start=g.start=r,r=d.end=g.end=a,a=d.start),d.size>0||(s=a===r?1:m(a,r,e.ncontours).dtick,g.size=d.size=s)}}},{"../../lib":503,"../../plots/cartesian/axes":554}],755:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../components/drawing"),m=v("../heatmap/style"),E=v("./make_color_map");ie.exports=function(c){var d=_.select(c).selectAll("g.contour");d.style("opacity",function(n){return n[0].trace.opacity}),d.each(function(n){var t=_.select(this),i=n[0].trace,a=i.contours,r=i.line,g=a.size||1,s=a.start,b="constraint"===a.type,x=!b&&"lines"===a.coloring,S=!b&&"fill"===a.coloring,p=x||S?E(i):null;t.selectAll("g.contourlevel").each(function(y){_.select(this).selectAll("path").call(k.lineGroupStyle,r.width,x?p(y.level):r.color,r.dash)});var w=a.labelfont;if(t.selectAll("g.contourlabels text").each(function(y){k.font(_.select(this),{family:w.family,size:w.size,color:w.color||(x?p(y.level):r.color)})}),b)t.selectAll("g.contourfill path").style("fill",i.fillcolor);else if(S){var l;t.selectAll("g.contourfill path").style("fill",function(y){return void 0===l&&(l=y.level),p(y.level+.5*g)}),void 0===l&&(l=s),t.selectAll("g.contourbg path").style("fill",p(l-.5*g))}}),m(c)}},{"../../components/drawing":388,"../heatmap/style":805,"./make_color_map":751,"@plotly/d3":58}],756:[function(v,ie,ae){"use strict";var _=v("../../components/colorscale/defaults"),k=v("./label_defaults");ie.exports=function(E,e,c,d,n){var i,t=c("contours.coloring"),a="";"fill"===t&&(i=c("contours.showlines")),!1!==i&&("lines"!==t&&(a=c("line.color","#000")),c("line.width",.5),c("line.dash")),"none"!==t&&(!0!==E.showlegend&&(e.showlegend=!1),e._dfltShowLegend=!1,_(E,e,d,c,{prefix:"",cLetter:"z"})),c("line.smoothing"),k(c,d,a,n)}},{"../../components/colorscale/defaults":376,"./label_defaults":750}],757:[function(v,ie,ae){"use strict";var _=v("../heatmap/attributes"),k=v("../contour/attributes"),m=v("../../components/colorscale/attributes"),E=v("../../lib/extend").extendFlat,e=k.contours;ie.exports=E({carpet:{valType:"string",editType:"calc"},z:_.z,a:_.x,a0:_.x0,da:_.dx,b:_.y,b0:_.y0,db:_.dy,text:_.text,hovertext:_.hovertext,transpose:_.transpose,atype:_.xtype,btype:_.ytype,fillcolor:k.fillcolor,autocontour:k.autocontour,ncontours:k.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:k.line.color,width:k.line.width,dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},transforms:void 0},m("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../contour/attributes":735,"../heatmap/attributes":792}],758:[function(v,ie,ae){"use strict";var _=v("../../components/colorscale/calc"),k=v("../../lib"),m=v("../heatmap/convert_column_xyz"),E=v("../heatmap/clean_2d_array"),e=v("../heatmap/interp2d"),c=v("../heatmap/find_empties"),d=v("../heatmap/make_bound_array"),n=v("./defaults"),t=v("../carpet/lookup_carpetid"),i=v("../contour/set_contours");ie.exports=function(g,s){var b=s._carpetTrace=t(g,s);if(b&&b.visible&&"legendonly"!==b.visible){if(!s.a||!s.b){var x=g.data[b.index],S=g.data[s.index];S.a||(S.a=x.a),S.b||(S.b=x.b),n(S,s,s._defaultColor,g._fullLayout)}var p=function a(r,g){var S,p,w,l,y,A,T,s=g._carpetTrace,b=s.aaxis,x=s.baxis;b._minDtick=0,x._minDtick=0,k.isArray1D(g.z)&&m(g,b,x,"a","b",["z"]),S=g._a=g._a||g.a,l=g._b=g._b||g.b,S=S?b.makeCalcdata(g,"_a"):[],l=l?x.makeCalcdata(g,"_b"):[],p=g.a0||0,w=g.da||1,y=g.b0||0,A=g.db||1,T=g._z=E(g._z||g.z,g.transpose),g._emptypoints=c(T),e(T,g._emptypoints);var M=k.maxRowLength(T),C={a:d(g,"scaled"===g.xtype?"":S,p,w,M,b),b:d(g,"scaled"===g.ytype?"":l,y,A,T.length,x),z:T};return"levels"===g.contours.type&&"none"!==g.contours.coloring&&_(r,g,{vals:T,containerStr:"",cLetter:"z"}),[C]}(g,s);return i(s,s._z),p}}},{"../../components/colorscale/calc":374,"../../lib":503,"../carpet/lookup_carpetid":708,"../contour/set_contours":754,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"../heatmap/find_empties":798,"../heatmap/interp2d":801,"../heatmap/make_bound_array":803,"./defaults":759}],759:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../heatmap/xyz_defaults"),m=v("./attributes"),E=v("../contour/constraint_defaults"),e=v("../contour/contours_defaults"),c=v("../contour/style_defaults");ie.exports=function(n,t,i,a){function r(x,S){return _.coerce(n,t,m,x,S)}if(r("carpet"),n.a&&n.b){if(!k(n,t,r,a,"a","b"))return void(t.visible=!1);r("text"),"constraint"===r("contours.type")?E(n,t,r,a,i,{hasHover:!1}):(e(n,t,r,function g(x){return _.coerce2(n,t,m,x)}),c(n,t,r,a,{hasHover:!1}))}else t._defaultColor=i,t._length=null}},{"../../lib":503,"../contour/constraint_defaults":740,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/xyz_defaults":807,"./attributes":757}],760:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../contour/colorbar"),calc:v("./calc"),plot:v("./plot"),style:v("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"../contour/colorbar":738,"../contour/style":755,"./attributes":757,"./calc":758,"./defaults":759,"./plot":761}],761:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../carpet/map_1d_array"),m=v("../carpet/makepath"),E=v("../../components/drawing"),e=v("../../lib"),c=v("../contour/make_crossings"),d=v("../contour/find_all_paths"),n=v("../contour/plot"),t=v("../contour/constants"),i=v("../contour/convert_to_constraints"),a=v("../contour/empty_pathinfo"),r=v("../contour/close_boundaries"),g=v("../carpet/lookup_carpetid"),s=v("../carpet/axis_aligned_line");function x(M,f,u,h,o,C,R){var z=e.ensureSingle(M,"g","contourlines"),O=!1!==o.showlines,I=o.showlabels,F=O&&I,D=n.createLines(z,O||I,f),N=n.createLineClip(z,F,u,h.trace.uid),U=M.selectAll("g.contourlabels").data(I?[0]:[]);if(U.exit().remove(),U.enter().append("g").classed("contourlabels",!0),I){var se=C.xaxis._length,ne=C.yaxis._length,W=[[[0,0],[se,0],[se,ne],[0,ne]]],G=[];e.clearLocationCache();var $=n.labelFormatter(u,h),V=E.tester.append("text").attr("data-notex",1).call(E.font,o.labelfont),H={left:0,right:se,center:se/2,top:0,bottom:ne,middle:ne/2},q=Math.sqrt(se*se+ne*ne),K=t.LABELDISTANCE*q/Math.max(1,f.length/t.LABELINCREASE);D.each(function(Y){var te=n.calcTextOpts(Y.level,$,V,u);_.select(this).selectAll("path").each(function(J){var j=this,re=e.getVisibleSegment(j,H,te.height/2);if(re&&(function S(M,f,u,h,o,C){for(var R,z=0;z<u.pedgepaths.length;z++)f===u.pedgepaths[z]&&(R=u.edgepaths[z]);if(R){var O=o.a[0],I=o.a[o.a.length-1],F=o.b[0],D=o.b[o.b.length-1],U=p(M,0,1),X=p(M,h.total,h.total-1),oe=N(R[0],U),se=h.total-N(R[R.length-1],X);h.min<oe&&(h.min=oe),h.max>se&&(h.max=se),h.len=h.max-h.min}function N(ne,W){var $,G=0,V=.1;return(Math.abs(ne[0]-O)<V||Math.abs(ne[0]-I)<V)&&($=w(o.dxydb_rough(ne[0],ne[1],V)),G=Math.max(G,C*l(W,$)/2)),(Math.abs(ne[1]-F)<V||Math.abs(ne[1]-D)<V)&&($=w(o.dxyda_rough(ne[0],ne[1],V)),G=Math.max(G,C*l(W,$)/2)),G}}(j,J,Y,re,R,te.height),!(re.len<(te.width+te.height)*t.LABELMIN)))for(var le=Math.min(Math.ceil(re.len/K),t.LABELMAX),ge=0;ge<le;ge++){var pe=n.findBestTextLocation(j,re,te,G,H);if(!pe)break;n.addLabelData(pe,te,G,W)}})}),V.remove(),n.drawLabels(U,G,u,N,F?W:null)}I&&!O&&D.remove()}function p(M,f,u){var h=M.getPointAtLength(f),o=M.getPointAtLength(u),C=o.x-h.x,R=o.y-h.y,z=Math.sqrt(C*C+R*R);return[C/z,R/z]}function w(M){var f=Math.sqrt(M[0]*M[0]+M[1]*M[1]);return[M[0]/f,M[1]/f]}function l(M,f){var u=Math.abs(M[0]*f[0]+M[1]*f[1]);return Math.sqrt(1-u*u)/u}function A(M,f,u,h,o,C,R,z,O,I,F){var D="fill"===I;D&&r(o,M.contours);var U=e.ensureSingle(f,"g","contourfill").selectAll("path").data(D?o:[]);U.enter().append("path"),U.exit().remove(),U.each(function(X){var oe=(X.prefixBoundary?F:"")+function T(M,f,u,h,o,C,R,z){var O,N,U,X,oe,se,ne,I="",F=f.edgepaths.map(function(J,j){return j}),D=!0,W=1e-4*Math.abs(u[0][0]-u[2][0]),G=1e-4*Math.abs(u[0][1]-u[2][1]);function $(J){return Math.abs(J[1]-u[0][1])<G}function V(J){return Math.abs(J[1]-u[2][1])<G}function H(J){return Math.abs(J[0]-u[0][0])<W}function q(J){return Math.abs(J[0]-u[2][0])<W}function K(J,j){var re,le,ge,pe,xe="";for($(J)&&!q(J)||V(J)&&!H(J)?(pe=o.aaxis,ge=s(o,C,[J[0],j[0]],.5*(J[1]+j[1]))):(pe=o.baxis,ge=s(o,C,.5*(J[0]+j[0]),[J[1],j[1]])),re=1;re<ge.length;re++)for(xe+=pe.smoothing?"C":"L",le=0;le<ge[re].length;le++){var ke=ge[re][le];xe+=[R.c2p(ke[0]),z.c2p(ke[1])]+" "}return xe}for(O=0,N=null;F.length;){for(N&&(I+=K(N,f.edgepaths[O][0])),ne=E.smoothopen(f.edgepaths[O].map(h),f.smoothing),I+=D?ne:ne.replace(/^M/,"L"),F.splice(F.indexOf(O),1),N=f.edgepaths[O][f.edgepaths[O].length-1],oe=-1,X=0;X<4;X++){if(!N){e.log("Missing end?",O,f);break}for($(N)&&!q(N)?U=u[1]:H(N)?U=u[0]:V(N)?U=u[3]:q(N)&&(U=u[2]),se=0;se<f.edgepaths.length;se++){var te=f.edgepaths[se][0];Math.abs(N[0]-U[0])<W?Math.abs(N[0]-te[0])<W&&(te[1]-N[1])*(U[1]-te[1])>=0&&(U=te,oe=se):Math.abs(N[1]-U[1])<G?Math.abs(N[1]-te[1])<G&&(te[0]-N[0])*(U[0]-te[0])>=0&&(U=te,oe=se):e.log("endpt to newendpt is not vert. or horz.",N,U,te)}if(oe>=0)break;I+=K(N,U),N=U}if(oe===f.edgepaths.length){e.log("unclosed perimeter path");break}(D=-1===F.indexOf(O=oe))&&(O=F[0],I+=K(N,U)+"Z",N=null)}for(O=0;O<f.paths.length;O++)I+=E.smoothclosed(f.paths[O].map(h),f.smoothing);return I}(0,X,C,R,z,O,u,h);oe?_.select(this).attr("d",oe).style("stroke","none"):_.select(this).remove()})}ie.exports=function(f,u,h,o){var C=u.xaxis,R=u.yaxis;e.makeTraceGroups(o,h,"contour").each(function(z){var O=_.select(this),I=z[0],F=I.trace,D=F._carpetTrace=g(f,F),N=f.calcdata[D.index][0];if(D.visible&&"legendonly"!==D.visible){var U=I.a,X=I.b,oe=F.contours,se=a(oe,u,I),ne="constraint"===oe.type,W=oe._operation,G=ne?"="===W?"lines":"fill":oe.coloring,V=[[U[0],X[X.length-1]],[U[U.length-1],X[X.length-1]],[U[U.length-1],X[0]],[U[0],X[0]]];c(se),d(se,1e-8*(U[U.length-1]-U[0]),1e-8*(X[X.length-1]-X[0]));var K=se;"constraint"===oe.type&&(K=i(se,W)),function b(M,f){var u,h,o,C,R,z,O,I,F;for(u=0;u<M.length;u++){for(R=(C=M[u]).pedgepaths=[],z=C.ppaths=[],h=0;h<C.edgepaths.length;h++){for(F=C.edgepaths[h],O=[],o=0;o<F.length;o++)O[o]=f(F[o]);R.push(O)}for(h=0;h<C.paths.length;h++){for(F=C.paths[h],I=[],o=0;o<F.length;o++)I[o]=f(F[o]);z.push(I)}}}(se,$);var Y,te,J,j,re=[];for(j=N.clipsegments.length-1;j>=0;j--)te=k([],(Y=N.clipsegments[j]).x,C.c2p),J=k([],Y.y,R.c2p),te.reverse(),J.reverse(),re.push(m(te,J,Y.bicubic));var le="M"+re.join("L")+"Z";(function y(M,f,u,h,o,C){var R,z,O,I,D=e.ensureSingle(M,"g","contourbg").selectAll("path").data("fill"!==C||o?[]:[0]);D.enter().append("path"),D.exit().remove();var N=[];for(I=0;I<f.length;I++)z=k([],(R=f[I]).x,u.c2p),O=k([],R.y,h.c2p),N.push(m(z,O,R.bicubic));D.attr("d","M"+N.join("L")+"Z").style("stroke","none")})(O,N.clipsegments,C,R,ne,G),A(F,O,C,R,K,V,$,D,N,G,le),x(O,se,f,I,oe,u,D),E.setClipUrl(O,D._clipPathId,f)}function $(ge){var pe=D.ab2xy(ge[0],ge[1],!0);return[C.c2p(pe[0]),R.c2p(pe[1])]}})}},{"../../components/drawing":388,"../../lib":503,"../carpet/axis_aligned_line":692,"../carpet/lookup_carpetid":708,"../carpet/makepath":709,"../carpet/map_1d_array":710,"../contour/close_boundaries":737,"../contour/constants":739,"../contour/convert_to_constraints":743,"../contour/empty_pathinfo":745,"../contour/find_all_paths":747,"../contour/make_crossings":752,"../contour/plot":753,"@plotly/d3":58}],762:[function(v,ie,ae){"use strict";var _=v("../../components/colorscale/attributes"),k=v("../../plots/template_attributes").hovertemplateAttrs,m=v("../../plots/attributes"),E=v("../scattermapbox/attributes"),e=v("../../lib/extend").extendFlat;ie.exports=e({lon:E.lon,lat:E.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:E.text,hovertext:E.hovertext,hoverinfo:e({},m.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:k(),showlegend:e({},m.showlegend,{dflt:!1})},_("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattermapbox/attributes":993}],763:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../lib").isArrayOrTypedArray,m=v("../../constants/numerical").BADNUM,E=v("../../components/colorscale/calc"),e=v("../../lib")._;ie.exports=function(d,n){for(var t=n._length,i=new Array(t),a=n.z,r=k(a)&&a.length,g=0;g<t;g++){var s=i[g]={},b=n.lon[g],x=n.lat[g];if(s.lonlat=_(b)&&_(x)?[+b,+x]:[m,m],r){var S=a[g];s.z=_(S)?S:m}}return E(d,n,{vals:r?a:[0,1],containerStr:"",cLetter:"z"}),t&&(i[0].t={labels:{lat:e(d,"lat:")+" ",lon:e(d,"lon:")+" "}}),i}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],764:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../lib"),m=v("../../components/color"),E=v("../../components/colorscale"),e=v("../../constants/numerical").BADNUM,c=v("../../lib/geojson_utils").makeBlank;ie.exports=function(n){var t=n[0].trace,i=!0===t.visible&&0!==t._length,r=t._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:c()};if(!i)return r;var s,g=[],b=t.z,x=t.radius,S=k.isArrayOrTypedArray(b)&&b.length,p=k.isArrayOrTypedArray(x);for(s=0;s<n.length;s++){var w=n[s],l=w.lonlat;if(l[0]!==e){var y={};if(S){var A=w.z;y.z=A!==e?A:0}p&&(y.r=_(x[s])&&x[s]>0?+x[s]:0),g.push({type:"Feature",geometry:{type:"Point",coordinates:l},properties:y})}}var T=E.extractOpts(t),M=T.reversescale?E.flipScale(T.colorscale):T.colorscale,f=M[0][1],h=["interpolate",["linear"],["heatmap-density"],0,m.opacity(f)<1?f:m.addOpacity(f,0)];for(s=1;s<M.length;s++)h.push(M[s][0],M[s][1]);return k.extendFlat(r.heatmap.paint,{"heatmap-weight":S?["interpolate",["linear"],["get","z"],T.min,0,T.max,1]:1/(T.max-T.min),"heatmap-color":h,"heatmap-radius":p?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),r.geojson={type:"FeatureCollection",features:g},r.heatmap.layout.visibility="visible",r}},{"../../components/color":366,"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"fast-isnumeric":190}],765:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../components/colorscale/defaults"),m=v("./attributes");ie.exports=function(e,c,d,n){function t(g,s){return _.coerce(e,c,m,g,s)}var i=t("lon")||[],a=t("lat")||[],r=Math.min(i.length,a.length);r?(c._length=r,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),k(e,c,n,t,{prefix:"",cLetter:"z"})):c.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":762}],766:[function(v,ie,ae){"use strict";ie.exports=function(k,m){return k.lon=m.lon,k.lat=m.lat,k.z=m.z,k}},{}],767:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/axes"),k=v("../scattermapbox/hover").hoverPoints,m=v("../scattermapbox/hover").getExtraText;ie.exports=function(e,c,d){var n=k(e,c,d);if(n){var t=n[0],i=t.cd,a=i[0].trace,r=i[t.index];if(delete t.color,"z"in r){var g=t.subplot.mockAxis;t.z=r.z,t.zLabel=_.tickText(g,g.c2l(r.z),"hover").text}return t.extraText=m(a,r,i[0].t.labels),[t]}}},{"../../plots/cartesian/axes":554,"../scattermapbox/hover":998}],768:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../heatmap/colorbar"),formatLabels:v("../scattermapbox/format_labels"),calc:v("./calc"),plot:v("./plot"),hoverPoints:v("./hover"),eventData:v("./event_data"),getBelow:function(_,k){for(var m=k.getMapLayers(),E=0;E<m.length;E++){var e=m[E],c=e.id;if("symbol"===e.type&&"string"==typeof c&&-1===c.indexOf("plotly-"))return c}},moduleType:"trace",name:"densitymapbox",basePlotModule:v("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":613,"../heatmap/colorbar":795,"../scattermapbox/format_labels":997,"./attributes":762,"./calc":763,"./defaults":765,"./event_data":766,"./hover":767,"./plot":769}],769:[function(v,ie,ae){"use strict";var _=v("./convert"),k=v("../../plots/mapbox/constants").traceLayerPrefix;function m(e,c){this.type="densitymapbox",this.subplot=e,this.uid=c,this.sourceId="source-"+c,this.layerList=[["heatmap",k+c+"-heatmap"]],this.below=null}var E=m.prototype;E.update=function(e){var c=this.subplot,d=this.layerList,n=_(e),t=c.belowLookup["trace-"+this.uid];c.map.getSource(this.sourceId).setData(n.geojson),t!==this.below&&(this._removeLayers(),this._addLayers(n,t),this.below=t);for(var i=0;i<d.length;i++){var a=d[i],g=a[1],s=n[a[0]];c.setOptions(g,"setLayoutProperty",s.layout),"visible"===s.layout.visibility&&c.setOptions(g,"setPaintProperty",s.paint)}},E._addLayers=function(e,c){for(var d=this.subplot,n=this.layerList,t=this.sourceId,i=0;i<n.length;i++){var a=n[i],r=a[0],g=e[r];d.addLayer({type:r,id:a[1],source:t,layout:g.layout,paint:g.paint},c)}},E._removeLayers=function(){for(var e=this.subplot.map,c=this.layerList,d=c.length-1;d>=0;d--)e.removeLayer(c[d][1])},E.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},ie.exports=function(c,d){var n=d[0].trace,t=new m(c,n.uid),i=t.sourceId,a=_(d),r=t.below=c.belowLookup["trace-"+n.uid];return c.map.addSource(i,{type:"geojson",data:a.geojson}),t._addLayers(a,r),t}},{"../../plots/mapbox/constants":611,"./convert":764}],770:[function(v,ie,ae){"use strict";var _=v("../../lib");ie.exports=function(m,E){for(var e=0;e<m.length;e++)m[e].i=e;_.mergeArray(E.text,m,"tx"),_.mergeArray(E.hovertext,m,"htx");var c=E.marker;if(c){_.mergeArray(c.opacity,m,"mo"),_.mergeArray(c.color,m,"mc");var d=c.line;d&&(_.mergeArray(d.color,m,"mlc"),_.mergeArrayCastPositive(d.width,m,"mlw"))}}},{"../../lib":503}],771:[function(v,ie,ae){"use strict";var _=v("../bar/attributes"),k=v("../scatter/attributes").line,m=v("../../plots/attributes"),E=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=v("../../plots/template_attributes").hovertemplateAttrs,c=v("../../plots/template_attributes").texttemplateAttrs,d=v("./constants"),n=v("../../lib/extend").extendFlat,t=v("../../components/color");ie.exports={x:_.x,x0:_.x0,dx:_.dx,y:_.y,y0:_.y0,dy:_.dy,xperiod:_.xperiod,yperiod:_.yperiod,xperiod0:_.xperiod0,yperiod0:_.yperiod0,xperiodalignment:_.xperiodalignment,yperiodalignment:_.yperiodalignment,xhoverformat:E("x"),yhoverformat:E("y"),hovertext:_.hovertext,hovertemplate:e({},{keys:d.eventDataKeys}),hoverinfo:n({},m.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:c({editType:"plot"},{keys:d.eventDataKeys.concat(["label","value"])}),text:_.text,textposition:_.textposition,insidetextanchor:n({},_.insidetextanchor,{dflt:"middle"}),textangle:n({},_.textangle,{dflt:0}),textfont:_.textfont,insidetextfont:_.insidetextfont,outsidetextfont:_.outsidetextfont,constraintext:_.constraintext,cliponaxis:_.cliponaxis,orientation:n({},_.orientation,{}),offset:n({},_.offset,{arrayOk:!1}),width:n({},_.width,{arrayOk:!1}),marker:function i(){var a=n({},_.marker);return delete a.pattern,a}(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:n({},k.color,{dflt:t.defaultLine}),width:n({},k.width,{dflt:0,editType:"plot"}),dash:k.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:_.offsetgroup,alignmentgroup:_.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927,"./constants":773}],772:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/axes"),k=v("../../plots/cartesian/align_period"),m=v("./arrays_to_calcdata"),E=v("../scatter/calc_selection"),e=v("../../constants/numerical").BADNUM;function c(d){return d===e?0:d}ie.exports=function(n,t){var r,g,s,b,x,S,p,w,i=_.getFromId(n,t.xaxis||"x"),a=_.getFromId(n,t.yaxis||"y");"h"===t.orientation?(r=i.makeCalcdata(t,"x"),s=a.makeCalcdata(t,"y"),b=k(t,a,"y",s),x=!!t.yperiodalignment,S="y"):(r=a.makeCalcdata(t,"y"),s=i.makeCalcdata(t,"x"),b=k(t,i,"x",s),x=!!t.xperiodalignment,S="x"),g=b.vals;var T,l=Math.min(g.length,r.length),y=new Array(l);for(t._base=[],p=0;p<l;p++){r[p]<0&&(r[p]=e);var A=!1;r[p]!==e&&p+1<l&&r[p+1]!==e&&(A=!0),w=y[p]={p:g[p],s:r[p],cNext:A},t._base[p]=-.5*w.s,x&&(y[p].orig_p=s[p],y[p][S+"End"]=b.ends[p],y[p][S+"Start"]=b.starts[p]),t.ids&&(w.id=String(t.ids[p])),0===p&&(y[0].vTotal=0),y[0].vTotal+=c(w.s),w.begR=c(w.s)/c(y[0].s)}for(p=0;p<l;p++)(w=y[p]).s!==e&&(w.sumR=w.s/y[0].vTotal,w.difR=void 0!==T?w.s/T:1,T=w.s);return m(y,t),E(y,t),y}},{"../../constants/numerical":479,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929,"./arrays_to_calcdata":770}],773:[function(v,ie,ae){"use strict";ie.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],774:[function(v,ie,ae){"use strict";var _=v("../bar/cross_trace_calc").setGroupPositions;ie.exports=function(m,E){var g,s,e=m._fullLayout,c=m._fullData,d=m.calcdata,n=E.xaxis,t=E.yaxis,i=[],a=[],r=[];for(s=0;s<c.length;s++){var b=c[s];!0===b.visible&&b.xaxis===n._id&&b.yaxis===t._id&&"funnel"===b.type&&(g=d[s],"h"===b.orientation?r.push(g):a.push(g),i.push(g))}var S={mode:e.funnelmode,norm:e.funnelnorm,gap:e.funnelgap,groupgap:e.funnelgroupgap};for(_(m,n,t,a,S),_(m,t,n,r,S),s=0;s<i.length;s++){g=i[s];for(var p=0;p<g.length;p++)p+1<g.length&&(g[p].nextP0=g[p+1].p0,g[p].nextS0=g[p+1].s0,g[p].nextP1=g[p+1].p1,g[p].nextS1=g[p+1].s1)}}},{"../bar/cross_trace_calc":651}],775:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../bar/defaults").handleGroupingDefaults,m=v("../bar/defaults").handleText,E=v("../scatter/xy_defaults"),e=v("../scatter/period_defaults"),c=v("./attributes"),d=v("../../components/color");ie.exports={supplyDefaults:function n(a,r,g,s){function b(A,T){return _.coerce(a,r,c,A,T)}if(E(a,r,s,b)){e(a,r,s,b),b("xhoverformat"),b("yhoverformat"),b("orientation",r.y&&!r.x?"v":"h"),b("offset"),b("width");var S=b("text");b("hovertext"),b("hovertemplate");var p=b("textposition");m(a,r,s,b,p,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==r.textposition&&!r.texttemplate&&b("textinfo",Array.isArray(S)?"text+value":"value");var w=b("marker.color",g);b("marker.line.color",d.defaultLine),b("marker.line.width"),b("connector.visible")&&(b("connector.fillcolor",function t(a){var r=_.isArrayOrTypedArray(a)?"#000":a;return d.addOpacity(r,.5*d.opacity(r))}(w)),b("connector.line.width")&&(b("connector.line.color"),b("connector.line.dash")))}else r.visible=!1},crossTraceDefaults:function i(a,r){var s;function b(S){return _.coerce(s._input,s,c,S)}if("group"===r.funnelmode)for(var x=0;x<a.length;x++)k((s=a[x])._input,s,r,b)}}},{"../../components/color":366,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":771}],776:[function(v,ie,ae){"use strict";ie.exports=function(k,m){return k.x="xVal"in m?m.xVal:m.x,k.y="yVal"in m?m.yVal:m.y,"percentInitial"in m&&(k.percentInitial=m.percentInitial),"percentPrevious"in m&&(k.percentPrevious=m.percentPrevious),"percentTotal"in m&&(k.percentTotal=m.percentTotal),m.xa&&(k.xaxis=m.xa),m.ya&&(k.yaxis=m.ya),k}},{}],777:[function(v,ie,ae){"use strict";var _=v("../../components/color").opacity,k=v("../bar/hover").hoverOnBars,m=v("../../lib").formatPercent;ie.exports=function(c,d,n,t,i){var a=k(c,d,n,t,i);if(a){var r=a.cd,g=r[0].trace,x=r[a.index];a[("h"===g.orientation?"x":"y")+"LabelVal"]=x.s,a.percentInitial=x.begR,a.percentInitialLabel=m(x.begR,1),a.percentPrevious=x.difR,a.percentPreviousLabel=m(x.difR,1),a.percentTotal=x.sumR,a.percentTotalLabel=m(x.sumR,1);var p=x.hi||g.hoverinfo,w=[];if(p&&"none"!==p&&"skip"!==p){var l="all"===p,y=p.split("+"),A=function(T){return l||-1!==y.indexOf(T)};A("percent initial")&&w.push(a.percentInitialLabel+" of initial"),A("percent previous")&&w.push(a.percentPreviousLabel+" of previous"),A("percent total")&&w.push(a.percentTotalLabel+" of total")}return a.extraText=w.join("<br>"),a.color=function E(e,c){var d=e.marker,n=c.mc||d.color,t=c.mlc||d.line.color,i=c.mlw||d.line.width;return _(n)?n:_(t)&&i?t:void 0}(g,x),[a]}}},{"../../components/color":366,"../../lib":503,"../bar/hover":655}],778:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults").supplyDefaults,crossTraceDefaults:v("./defaults").crossTraceDefaults,supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc"),crossTraceCalc:v("./cross_trace_calc"),plot:v("./plot"),style:v("./style").style,hoverPoints:v("./hover"),eventData:v("./event_data"),selectPoints:v("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:v("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":771,"./calc":772,"./cross_trace_calc":774,"./defaults":775,"./event_data":776,"./hover":777,"./layout_attributes":779,"./layout_defaults":780,"./plot":781,"./style":782}],779:[function(v,ie,ae){"use strict";ie.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],780:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./layout_attributes");ie.exports=function(m,E,e){var c=!1;function d(i,a){return _.coerce(m,E,k,i,a)}for(var n=0;n<e.length;n++){var t=e[n];if(t.visible&&"funnel"===t.type){c=!0;break}}c&&(d("funnelmode"),d("funnelgap",.2),d("funnelgroupgap"))}},{"../../lib":503,"./layout_attributes":779}],781:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../lib"),m=v("../../components/drawing"),E=v("../../constants/numerical").BADNUM,e=v("../bar/plot"),c=v("../bar/uniform_text").clearMinTextSize;function t(i,a,r,g){var s=[],b=[],x=g?a:r,S=g?r:a;return s[0]=x.c2p(i.s0,!0),b[0]=S.c2p(i.p0,!0),s[1]=x.c2p(i.s1,!0),b[1]=S.c2p(i.p1,!0),s[2]=x.c2p(i.nextS0,!0),b[2]=S.c2p(i.nextP0,!0),s[3]=x.c2p(i.nextS1,!0),b[3]=S.c2p(i.nextP1,!0),g?[s,b]:[b,s]}ie.exports=function(a,r,g,s){var b=a._fullLayout;c("funnel",b),function d(i,a,r,g){var s=a.xaxis,b=a.yaxis;k.makeTraceGroups(g,r,"trace bars").each(function(x){var S=_.select(this),p=x[0].trace,w=k.ensureSingle(S,"g","regions");if(p.connector&&p.connector.visible){var l="h"===p.orientation,y=w.selectAll("g.region").data(k.identity);y.enter().append("g").classed("region",!0),y.exit().remove();var A=y.size();y.each(function(T,M){if(M===A-1||T.cNext){var f=t(T,s,b,l),u=f[0],h=f[1],o="";u[0]!==E&&h[0]!==E&&u[1]!==E&&h[1]!==E&&u[2]!==E&&h[2]!==E&&u[3]!==E&&h[3]!==E&&(o+=l?"M"+u[0]+","+h[1]+"L"+u[2]+","+h[2]+"H"+u[3]+"L"+u[1]+","+h[1]+"Z":"M"+u[1]+","+h[1]+"L"+u[2]+","+h[3]+"V"+h[2]+"L"+u[1]+","+h[0]+"Z"),""===o&&(o="M0,0Z"),k.ensureSingle(_.select(this),"path").attr("d",o).call(m.setClipUrl,a.layerClipId,i)}})}else w.remove()})}(a,r,g,s),function n(i,a,r,g){var s=a.xaxis,b=a.yaxis;k.makeTraceGroups(g,r,"trace bars").each(function(x){var S=_.select(this),p=x[0].trace,w=k.ensureSingle(S,"g","lines");if(p.connector&&p.connector.visible&&p.connector.line.width){var l="h"===p.orientation,y=w.selectAll("g.line").data(k.identity);y.enter().append("g").classed("line",!0),y.exit().remove();var A=y.size();y.each(function(T,M){if(M===A-1||T.cNext){var f=t(T,s,b,l),u=f[0],h=f[1],o="";void 0!==u[3]&&void 0!==h[3]&&(l?(o+="M"+u[0]+","+h[1]+"L"+u[2]+","+h[2],o+="M"+u[1]+","+h[1]+"L"+u[3]+","+h[2]):(o+="M"+u[1]+","+h[1]+"L"+u[2]+","+h[3],o+="M"+u[1]+","+h[0]+"L"+u[2]+","+h[2])),""===o&&(o="M0,0Z"),k.ensureSingle(_.select(this),"path").attr("d",o).call(m.setClipUrl,a.layerClipId,i)}})}else w.remove()})}(a,r,g,s),e.plot(a,r,g,s,{mode:b.funnelmode,norm:b.funnelmode,gap:b.funnelgap,groupgap:b.funnelgroupgap})}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],782:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../components/drawing"),m=v("../../components/color"),E=v("../../constants/interactions").DESELECTDIM,e=v("../bar/style"),c=v("../bar/uniform_text").resizeText,d=e.styleTextPoints;ie.exports={style:function n(t,i,a){var r=a||_.select(t).selectAll("g.funnellayer").selectAll("g.trace");c(t,r,"funnel"),r.style("opacity",function(g){return g[0].trace.opacity}),r.each(function(g){var s=_.select(this),b=g[0].trace;s.selectAll(".point > path").each(function(x){if(!x.isBlank){var S=b.marker;_.select(this).call(m.fill,x.mc||S.color).call(m.stroke,x.mlc||S.line.color).call(k.dashLine,S.line.dash,x.mlw||S.line.width).style("opacity",b.selectedpoints&&!x.selected?E:1)}}),d(s,b,t),s.selectAll(".regions").each(function(){_.select(this).selectAll("path").style("stroke-width",0).call(m.fill,b.connector.fillcolor)}),s.selectAll(".lines").each(function(){var x=b.connector.line;k.lineGroupStyle(_.select(this).selectAll("path"),x.width,x.color,x.dash)})})}}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],783:[function(v,ie,ae){"use strict";var _=v("../pie/attributes"),k=v("../../plots/attributes"),m=v("../../plots/domain").attributes,E=v("../../plots/template_attributes").hovertemplateAttrs,e=v("../../plots/template_attributes").texttemplateAttrs,c=v("../../lib/extend").extendFlat;ie.exports={labels:_.labels,label0:_.label0,dlabel:_.dlabel,values:_.values,marker:{colors:_.marker.colors,line:{color:c({},_.marker.line.color,{dflt:null}),width:c({},_.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:_.text,hovertext:_.hovertext,scalegroup:c({},_.scalegroup,{}),textinfo:c({},_.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:c({},k.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:E({},{keys:["label","color","value","text","percent"]}),textposition:c({},_.textposition,{values:["inside","none"],dflt:"inside"}),textfont:_.textfont,insidetextfont:_.insidetextfont,title:{text:_.title.text,font:_.title.font,position:c({},_.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:m({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901}],784:[function(v,ie,ae){"use strict";var _=v("../../plots/plots");ae.name="funnelarea",ae.plot=function(k,m,E,e){_.plotBasePlot(ae.name,k,m,E,e)},ae.clean=function(k,m,E,e){_.cleanBasePlot(ae.name,k,m,E,e)}},{"../../plots/plots":619}],785:[function(v,ie,ae){"use strict";var _=v("../pie/calc");ie.exports={calc:function k(E,e){return _.calc(E,e)},crossTraceCalc:function m(E){_.crossTraceCalc(E,{type:"funnelarea"})}}},{"../pie/calc":903}],786:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./attributes"),m=v("../../plots/domain").defaults,E=v("../bar/defaults").handleText,e=v("../pie/defaults").handleLabelsAndValues;ie.exports=function(d,n,t,i){function a(A,T){return _.coerce(d,n,k,A,T)}var r=a("labels"),g=a("values"),s=e(r,g),b=s.len;if(n._hasLabels=s.hasLabels,n._hasValues=s.hasValues,!n._hasLabels&&n._hasValues&&(a("label0"),a("dlabel")),b){n._length=b,a("marker.line.width")&&a("marker.line.color",i.paper_bgcolor),a("marker.colors"),a("scalegroup");var w,S=a("text"),p=a("texttemplate");if(p||(w=a("textinfo",Array.isArray(S)?"text+percent":"percent")),a("hovertext"),a("hovertemplate"),p||w&&"none"!==w){var l=a("textposition");E(d,n,i,a,l,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}m(n,i,a),a("title.text")&&(a("title.position"),_.coerceFont(a,"title.font",i.font)),a("aspectratio"),a("baseratio")}else n.visible=!1}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"../pie/defaults":904,"./attributes":783}],787:[function(v,ie,ae){"use strict";ie.exports={moduleType:"trace",name:"funnelarea",basePlotModule:v("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot"),style:v("./style"),styleOne:v("../pie/style_one"),meta:{}}},{"../pie/style_one":912,"./attributes":783,"./base_plot":784,"./calc":785,"./defaults":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(v,ie,ae){"use strict";var _=v("../pie/layout_attributes").hiddenlabels;ie.exports={hiddenlabels:_,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":908}],789:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./layout_attributes");ie.exports=function(E,e){function c(d,n){return _.coerce(E,e,k,d,n)}c("hiddenlabels"),c("funnelareacolorway",e.colorway),c("extendfunnelareacolors")}},{"../../lib":503,"./layout_attributes":788}],790:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../components/drawing"),m=v("../../lib"),E=m.strScale,e=m.strTranslate,c=v("../../lib/svg_text_utils"),n=v("../bar/plot").toMoveInsideBar,t=v("../bar/uniform_text"),i=t.recordMinTextSize,a=t.clearMinTextSize,r=v("../pie/helpers"),g=v("../pie/plot"),s=g.attachFxHandlers,b=g.determineInsideTextFont,x=g.layoutAreas,S=g.prerenderTitles,p=g.positionTitleOutside,w=g.formatSliceLabel;function l(T,M){return"l"+(M[0]-T[0])+","+(M[1]-T[1])}function y(T,M){return[.5*(T[0]+M[0]),.5*(T[1]+M[1])]}function A(T){if(T.length){var M=T[0],f=M.trace,u=f.aspectratio,h=f.baseratio;h>.999&&(h=.999);var D,U,X,o=Math.pow(h,2),C=M.vTotal,z=C,O=C*o/(1-o)/C,N=[];for(N.push(F()),U=T.length-1;U>-1;U--)(X=T[U]).hidden||(O+=X.v/z,N.push(F()));var se=1/0,ne=-1/0;for(U=0;U<N.length;U++)D=N[U],se=Math.min(se,D[1]),ne=Math.max(ne,D[1]);for(U=0;U<N.length;U++)N[U][1]-=(ne+se)/2;var G=M.r,$=(ne-se)/2,V=G/N[N.length-1][0],H=G/$*u;for(M.r=H*$,U=0;U<N.length;U++)N[U][0]*=V,N[U][1]*=H;var q=[-(D=N[0])[0],D[1]],K=[D[0],D[1]],Y=0;for(U=T.length-1;U>-1;U--)if(!(X=T[U]).hidden){var te=N[Y+=1][0],J=N[Y][1];X.TL=[-te,J],X.TR=[te,J],X.BL=q,X.BR=K,X.pxmid=y(X.TR,X.BR),q=X.TL,K=X.TR}}function F(){var j=function I(){var j=Math.sqrt(O);return{x:j,y:-j}}();return[j.x,j.y]}}ie.exports=function(M,f){var u=M._fullLayout;a("funnelarea",u),S(f,M),x(f,u._size),m.makeTraceGroups(u._funnelarealayer,f,"trace").each(function(h){var o=_.select(this),C=h[0],R=C.trace;A(h),o.each(function(){var z=_.select(this).selectAll("g.slice").data(h);z.enter().append("g").classed("slice",!0),z.exit().remove(),z.each(function(I,F){if(I.hidden)_.select(this).selectAll("path,g").remove();else{I.pointNumber=I.i,I.curveNumber=R.index;var D=C.cx,N=C.cy,U=_.select(this),X=U.selectAll("path.surface").data([I]);X.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),U.call(s,M,h);var oe="M"+(D+I.TR[0])+","+(N+I.TR[1])+l(I.TR,I.BR)+l(I.BR,I.BL)+l(I.BL,I.TL)+"Z";X.attr("d",oe),w(M,I,C);var se=r.castOption(R.textposition,I.pts),ne=U.selectAll("g.slicetext").data(I.text&&"none"!==se?[0]:[]);ne.enter().append("g").classed("slicetext",!0),ne.exit().remove(),ne.each(function(){var W=m.ensureSingle(_.select(this),"text","",function(te){te.attr("data-notex",1)}),G=m.ensureUniformFontSize(M,b(R,I,u.font));W.text(I.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(k.font,G).call(c.convertToTspans,M);var V,H,q,$=k.bBox(W.node()),K=Math.min(I.BL[1],I.BR[1])+N,Y=Math.max(I.TL[1],I.TR[1])+N;H=Math.max(I.TL[0],I.BL[0])+D,q=Math.min(I.TR[0],I.BR[0])+D,(V=n(H,q,K,Y,$,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=G.size,i(R.type,V,u),h[F].transform=V,W.attr("transform",m.getTextTransform(V))})}});var O=_.select(this).selectAll("g.titletext").data(R.title.text?[0]:[]);O.enter().append("g").classed("titletext",!0),O.exit().remove(),O.each(function(){var I=m.ensureSingle(_.select(this),"text","",function(N){N.attr("data-notex",1)}),F=R.title.text;R._meta&&(F=m.templateString(F,R._meta)),I.text(F).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(k.font,R.title.font).call(c.convertToTspans,M);var D=p(C,u._size);I.attr("transform",e(D.x,D.y)+E(Math.min(1,D.scale))+e(D.tx,D.ty))})})})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/plot":659,"../bar/uniform_text":664,"../pie/helpers":906,"../pie/plot":910,"@plotly/d3":58}],791:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../pie/style_one"),m=v("../bar/uniform_text").resizeText;ie.exports=function(e){var c=e._fullLayout._funnelarealayer.selectAll(".trace");m(e,c,"funnelarea"),c.each(function(d){var t=d[0].trace,i=_.select(this);i.style({opacity:t.opacity}),i.selectAll("path.surface").each(function(a){_.select(this).call(k,a,t)})})}},{"../bar/uniform_text":664,"../pie/style_one":912,"@plotly/d3":58}],792:[function(v,ie,ae){"use strict";var _=v("../scatter/attributes"),k=v("../../plots/attributes"),m=v("../../plots/font_attributes"),E=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=v("../../plots/template_attributes").hovertemplateAttrs,c=v("../../plots/template_attributes").texttemplateAttrs,d=v("../../components/colorscale/attributes"),n=v("../../lib/extend").extendFlat;ie.exports=n({z:{valType:"data_array",editType:"calc"},x:n({},_.x,{impliedEdits:{xtype:"array"}}),x0:n({},_.x0,{impliedEdits:{xtype:"scaled"}}),dx:n({},_.dx,{impliedEdits:{xtype:"scaled"}}),y:n({},_.y,{impliedEdits:{ytype:"array"}}),y0:n({},_.y0,{impliedEdits:{ytype:"scaled"}}),dy:n({},_.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:n({},_.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:n({},_.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:n({},_.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:n({},_.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:n({},_.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:n({},_.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:E("x"),yhoverformat:E("y"),zhoverformat:E("z",1),hovertemplate:e(),texttemplate:c({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:m({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:n({},k.showlegend,{dflt:!1})},{transforms:void 0},d("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":927}],793:[function(v,ie,ae){"use strict";var _=v("../../registry"),k=v("../../lib"),m=v("../../plots/cartesian/axes"),E=v("../../plots/cartesian/align_period"),e=v("../histogram2d/calc"),c=v("../../components/colorscale/calc"),d=v("./convert_column_xyz"),n=v("./clean_2d_array"),t=v("./interp2d"),i=v("./find_empties"),a=v("./make_bound_array"),r=v("../../constants/numerical").BADNUM;function g(b){for(var x=[],S=b.length,p=0;p<S;p++){var w=b[p];w!==r&&x.push(w)}return x}ie.exports=function(x,S){var M,f,u,h,o,C,R,z,O,I,F,p=m.getFromId(x,S.xaxis||"x"),w=m.getFromId(x,S.yaxis||"y"),l=_.traceIs(S,"contour"),y=_.traceIs(S,"histogram"),A=_.traceIs(S,"gl2d"),T=l?"best":S.zsmooth;if(p._minDtick=0,w._minDtick=0,y)h=(F=e(x,S)).orig_x,M=F.x,f=F.x0,u=F.dx,z=F.orig_y,o=F.y,C=F.y0,R=F.dy,O=F.z;else{var D=S.z;k.isArray1D(D)?(d(S,p,w,"x","y",["z"]),M=S._x,o=S._y,D=S._z):(h=S.x?p.makeCalcdata(S,"x"):[],z=S.y?w.makeCalcdata(S,"y"):[],M=E(S,p,"x",h).vals,o=E(S,w,"y",z).vals,S._x=M,S._y=o),f=S.x0,u=S.dx,C=S.y0,R=S.dy,O=n(D,S,p,w)}function N(K){T=S._input.zsmooth=S.zsmooth=!1,k.warn('cannot use zsmooth: "fast": '+K)}if((p.rangebreaks||w.rangebreaks)&&(O=function s(b,x,S){for(var p=[],w=-1,l=0;l<S.length;l++)if(x[l]!==r){p[++w]=[];for(var y=0;y<S[l].length;y++)b[y]!==r&&p[w].push(S[l][y])}return p}(M,o,O),y||(M=g(M),o=g(o),S._x=M,S._y=o)),!y&&(l||S.connectgaps)&&(S._emptypoints=i(O),t(O,S._emptypoints)),"fast"===T)if("log"===p.type||"log"===w.type)N("log axis found");else if(!y){if(M.length){var U=(M[M.length-1]-M[0])/(M.length-1),X=Math.abs(U/100);for(I=0;I<M.length-1;I++)if(Math.abs(M[I+1]-M[I]-U)>X){N("x scale is not linear");break}}if(o.length&&"fast"===T){var oe=(o[o.length-1]-o[0])/(o.length-1),se=Math.abs(oe/100);for(I=0;I<o.length-1;I++)if(Math.abs(o[I+1]-o[I]-oe)>se){N("y scale is not linear");break}}}var ne=k.maxRowLength(O),W="scaled"===S.xtype?"":M,G=a(S,W,f,u,ne,p),$="scaled"===S.ytype?"":o,V=a(S,$,C,R,O.length,w);A||(S._extremes[p._id]=m.findExtremes(p,G),S._extremes[w._id]=m.findExtremes(w,V));var H={x:G,y:V,z:O,text:S._text||S.text,hovertext:S._hovertext||S.hovertext};if(S.xperiodalignment&&h&&(H.orig_x=h),S.yperiodalignment&&z&&(H.orig_y=z),W&&W.length===G.length-1&&(H.xCenter=W),$&&$.length===V.length-1&&(H.yCenter=$),y&&(H.xRanges=F.xRanges,H.yRanges=F.yRanges,H.pts=F.pts),l||c(x,S,{vals:O,cLetter:"z"}),l&&S.contours&&"heatmap"===S.contours.coloring){var q={type:"contour"===S.type?"heatmap":"histogram2d",xcalendar:S.xcalendar,ycalendar:S.ycalendar};H.xfill=a(q,W,f,u,ne,p),H.yfill=a(q,$,C,R,O.length,w)}return[H]}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../../registry":638,"../histogram2d/calc":826,"./clean_2d_array":794,"./convert_column_xyz":796,"./find_empties":798,"./interp2d":801,"./make_bound_array":803}],794:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../lib"),m=v("../../constants/numerical").BADNUM;ie.exports=function(e,c,d,n){var t,i,a,r,g,s;function b(y){if(_(y))return+y}if(c&&c.transpose){for(t=0,g=0;g<e.length;g++)t=Math.max(t,e[g].length);if(0===t)return!1;a=function(y){return y.length},r=function(y,A,T){return(y[T]||[])[A]}}else t=e.length,a=function(y,A){return y[A].length},r=function(y,A,T){return(y[A]||[])[T]};function S(y){if(c&&"carpet"!==c.type&&"contourcarpet"!==c.type&&y&&"category"===y.type&&c["_"+y._id.charAt(0)].length){var A=y._id.charAt(0),T={},M=c["_"+A+"CategoryMap"]||c[A];for(g=0;g<M.length;g++)T[M[g]]=g;return function(f){var u=T[y._categories[f]];return u+1?u:m}}return k.identity}var p=S(d),w=S(n);n&&"category"===n.type&&(t=n._categories.length);var y,A,T,l=new Array(t);for(g=0;g<t;g++)for(i=d&&"category"===d.type?d._categories.length:a(e,g),l[g]=new Array(i),s=0;s<i;s++)l[g][s]=b((y=e,A=w(g),T=p(s),A===m||T===m?m:r(y,A,T)));return l}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],795:[function(v,ie,ae){"use strict";ie.exports={min:"zmin",max:"zmax"}},{}],796:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../constants/numerical").BADNUM,m=v("../../plots/cartesian/align_period");ie.exports=function(e,c,d,n,t,i){var a=e._length,r=c.makeCalcdata(e,n),g=d.makeCalcdata(e,t);r=m(e,c,n,r).vals,g=m(e,d,t,g).vals;var p,w,f,u,s=e.text,b=void 0!==s&&_.isArray1D(s),x=e.hovertext,S=void 0!==x&&_.isArray1D(x),l=_.distinctVals(r),y=l.vals,A=_.distinctVals(g),T=A.vals,M=[],h=T.length,o=y.length;for(p=0;p<i.length;p++)M[p]=_.init2dArray(h,o);b&&(f=_.init2dArray(h,o)),S&&(u=_.init2dArray(h,o));var C=_.init2dArray(h,o);for(p=0;p<a;p++)if(r[p]!==k&&g[p]!==k){var R=_.findBin(r[p]+l.minDiff/2,y),z=_.findBin(g[p]+A.minDiff/2,T);for(w=0;w<i.length;w++)M[w][z][R]=e[i[w]][p],C[z][R]=p;b&&(f[z][R]=s[p]),S&&(u[z][R]=x[p])}for(e["_"+n]=y,e["_"+t]=T,w=0;w<i.length;w++)e["_"+i[w]]=M[w];b&&(e._text=f),S&&(e._hovertext=u),c&&"category"===c.type&&(e["_"+n+"CategoryMap"]=y.map(function(D){return c._categories[D]})),d&&"category"===d.type&&(e["_"+t+"CategoryMap"]=T.map(function(D){return d._categories[D]})),e._after2before=C}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551}],797:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./xyz_defaults"),m=v("./label_defaults"),E=v("../scatter/period_defaults"),e=v("./style_defaults"),c=v("../../components/colorscale/defaults"),d=v("./attributes");ie.exports=function(t,i,a,r){function g(b,x){return _.coerce(t,i,d,b,x)}k(t,i,g,r)?(E(t,i,r,g),g("xhoverformat"),g("yhoverformat"),g("text"),g("hovertext"),g("hovertemplate"),m(g,r),e(t,i,g,r),g("hoverongaps"),g("connectgaps",_.isArray1D(i.z)&&!1!==i.zsmooth),c(t,i,r,g,{prefix:"",cLetter:"z"})):i.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../scatter/period_defaults":947,"./attributes":792,"./label_defaults":802,"./style_defaults":806,"./xyz_defaults":807}],798:[function(v,ie,ae){"use strict";var _=v("../../lib").maxRowLength;ie.exports=function(m){var a,r,g,s,b,x,S,p,E=[],e={},c=[],d=m[0],n=[],t=[0,0,0],i=_(m);for(r=0;r<m.length;r++)for(a=n,n=d,d=m[r+1]||[],g=0;g<i;g++)void 0===n[g]&&((x=(void 0!==n[g-1]?1:0)+(void 0!==n[g+1]?1:0)+(void 0!==a[g]?1:0)+(void 0!==d[g]?1:0))?(0===r&&x++,0===g&&x++,r===m.length-1&&x++,g===n.length-1&&x++,x<4&&(e[[r,g]]=[r,g,x]),E.push([r,g,x])):c.push([r,g]));for(;c.length;){for(S={},p=!1,b=c.length-1;b>=0;b--)(x=((e[[(r=(s=c[b])[0])-1,g=s[1]]]||t)[2]+(e[[r+1,g]]||t)[2]+(e[[r,g-1]]||t)[2]+(e[[r,g+1]]||t)[2])/20)&&(S[s]=[r,g,x],c.splice(b,1),p=!0);if(!p)throw"findEmpties iterated with no new neighbors";for(s in S)e[s]=S[s],E.push(S[s])}return E.sort(function(w,l){return l[2]-w[2]})}},{"../../lib":503}],799:[function(v,ie,ae){"use strict";var _=v("../../components/fx"),k=v("../../lib"),m=v("../../plots/cartesian/axes"),E=v("../../components/colorscale").extractOpts;ie.exports=function(c,d,n,t,i){i||(i={});var f,u,h,o,a=i.isContour,r=c.cd[0],g=r.trace,s=c.xa,b=c.ya,x=r.x,S=r.y,p=r.z,w=r.xCenter,l=r.yCenter,y=r.zmask,A=g.zhoverformat,T=x,M=S;if(!1!==c.index){try{h=Math.round(c.index[1]),o=Math.round(c.index[0])}catch(ne){return void k.error("Error hovering on heatmap, pointNumber must be [row,col], found:",c.index)}if(h<0||h>=p[0].length||o<0||o>p.length)return}else{if(_.inbox(d-x[0],d-x[x.length-1],0)>0||_.inbox(n-S[0],n-S[S.length-1],0)>0)return;if(a){var C;for(T=[2*x[0]-x[1]],C=1;C<x.length;C++)T.push((x[C]+x[C-1])/2);for(T.push([2*x[x.length-1]-x[x.length-2]]),M=[2*S[0]-S[1]],C=1;C<S.length;C++)M.push((S[C]+S[C-1])/2);M.push([2*S[S.length-1]-S[S.length-2]])}h=Math.max(0,Math.min(T.length-2,k.findBin(d,T))),o=Math.max(0,Math.min(M.length-2,k.findBin(n,M)))}var F,D,R=s.c2p(x[h]),z=s.c2p(x[h+1]),O=b.c2p(S[o]),I=b.c2p(S[o+1]);a?(z=R,f=(F=r.orig_x||x)[h],I=O,u=(D=r.orig_y||S)[o]):(F=r.orig_x||w||x,D=r.orig_y||l||S,f=w?F[h]:(F[h]+F[h+1])/2,u=l?D[o]:(D[o]+D[o+1])/2,s&&"category"===s.type&&(f=x[h]),b&&"category"===b.type&&(u=S[o]),g.zsmooth&&(R=z=s.c2p(f),O=I=b.c2p(u)));var N=p[o][h];if(y&&!y[o][h]&&(N=void 0),void 0!==N||g.hoverongaps){var U;Array.isArray(r.hovertext)&&Array.isArray(r.hovertext[o])?U=r.hovertext[o][h]:Array.isArray(r.text)&&Array.isArray(r.text[o])&&(U=r.text[o][h]);var X=E(g),se=m.tickText({type:"linear",range:[X.min,X.max],hoverformat:A,_separators:s._separators,_numFormat:s._numFormat},N,"hover").text;return[k.extendFlat(c,{index:g._after2before?g._after2before[o][h]:[o,h],distance:c.maxHoverDistance,spikeDistance:c.maxSpikeDistance,x0:R,x1:z,y0:O,y1:I,xLabelVal:f,yLabelVal:u,zLabelVal:N,zLabel:se,text:U})]}}},{"../../components/colorscale":378,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],800:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot"),colorbar:v("./colorbar"),style:v("./style"),hoverPoints:v("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":792,"./calc":793,"./colorbar":795,"./defaults":797,"./hover":799,"./plot":804,"./style":805}],801:[function(v,ie,ae){"use strict";var _=v("../../lib"),m=[[-1,0],[1,0],[0,-1],[0,1]];function e(c,d,n){var i,a,r,g,s,b,x,S,p,w,l,y,A,t=0;for(g=0;g<d.length;g++){for(l=c[a=(i=d[g])[0]][r=i[1]],w=0,p=0,s=0;s<4;s++)(x=c[a+(b=m[s])[0]])&&void 0!==(S=x[r+b[1]])&&(0===w?y=A=S:(y=Math.min(y,S),A=Math.max(A,S)),p++,w+=S);if(0===p)throw"iterateInterp2d order is wrong: no defined neighbors";c[a][r]=w/p,void 0===l?p<4&&(t=1):(c[a][r]=(1+n)*c[a][r]-n*l,A>y&&(t=Math.max(t,Math.abs(c[a][r]-l)/(A-y))))}return t}ie.exports=function(d,n){var i,t=1;for(e(d,n),i=0;i<n.length&&!(n[i][2]<4);i++);for(n=n.slice(i),i=0;i<100&&t>.01;i++)t=e(d,n,.5-.25*Math.min(1,.5*t));return t>.01&&_.log("interp2d didn't converge quickly",t),d}},{"../../lib":503}],802:[function(v,ie,ae){"use strict";var _=v("../../lib");ie.exports=function(m,E){m("texttemplate");var e=_.extendFlat({},E.font,{color:"auto",size:"auto"});_.coerceFont(m,"textfont",e)}},{"../../lib":503}],803:[function(v,ie,ae){"use strict";var _=v("../../registry"),k=v("../../lib").isArrayOrTypedArray;ie.exports=function(E,e,c,d,n,t){var s,b,x,i=[],a=_.traceIs(E,"contour"),r=_.traceIs(E,"histogram"),g=_.traceIs(E,"gl2d");if(k(e)&&e.length>1&&!r&&"category"!==t.type){var p=e.length;if(!(p<=n))return e.slice(0,a?n:n+1);if(a||g)i=e.slice(0,n);else if(1===n)i=[e[0]-.5,e[0]+.5];else{for(i=[1.5*e[0]-.5*e[1]],x=1;x<p;x++)i.push(.5*(e[x-1]+e[x]));i.push(1.5*e[p-1]-.5*e[p-2])}if(p<n){var w=i[i.length-1],l=w-i[i.length-2];for(x=p;x<n;x++)i.push(w+=l)}}else{var y=E[t._id.charAt(0)+"calendar"];for(s=r?t.r2c(c,0,y):k(e)&&1===e.length?e[0]:void 0===c?0:("log"===t.type?t.d2c:t.r2c)(c,0,y),b=d||1,x=a||g?0:-.5;x<n;x++)i.push(s+b*x)}return i}},{"../../lib":503,"../../registry":638}],804:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("tinycolor2"),m=v("../../registry"),E=v("../../components/drawing"),e=v("../../plots/cartesian/axes"),c=v("../../lib"),d=v("../../lib/svg_text_utils"),n=v("../scatter/format_labels"),t=v("../../components/color"),i=v("../../components/colorscale").extractOpts,a=v("../../components/colorscale").makeColorScaleFuncFromTrace,r=v("../../constants/xmlns_namespaces"),s=v("../../constants/alignment").LINE_SPACING,b="heatmap-label";function x(y){return y.selectAll("g."+b)}function S(y){x(y).remove()}function p(y,A){var T=A.length-2,M=c.constrain(c.findBin(y,A),0,T),f=A[M],h=c.constrain(M+(y-f)/(A[M+1]-f)-.5,0,T),o=Math.round(h),C=Math.abs(h-o);return h&&h!==T&&C?{bin0:o,frac:C,bin1:Math.round(o+C/(h-o))}:{bin0:o,bin1:o,frac:0}}function w(y,A){var T=A.length-1,M=c.constrain(c.findBin(y,A),0,T),f=A[M],h=(y-f)/(A[M+1]-f)||0;return h<=0?{bin0:M,bin1:M,frac:0}:h<.5?{bin0:M,bin1:M+1,frac:h}:{bin0:M+1,bin1:M,frac:1-h}}function l(y,A,T){y[A]=T[0],y[A+1]=T[1],y[A+2]=T[2],y[A+3]=Math.round(255*T[3])}ie.exports=function(y,A,T,M){var f=A.xaxis,u=A.yaxis;c.makeTraceGroups(M,T,"hm").each(function(h){var $,V,H,q,K,Y,te,J,o=_.select(this),C=h[0],R=C.trace,z=R.xgap||0,O=R.ygap||0,I=C.z,F=C.x,D=C.y,N=C.xCenter,U=C.yCenter,X=m.traceIs(R,"contour"),oe=X?"best":R.zsmooth,se=I.length,ne=c.maxRowLength(I),W=!1,G=!1;for(Y=0;void 0===$&&Y<F.length-1;)$=f.c2p(F[Y]),Y++;for(Y=F.length-1;void 0===V&&Y>0;)V=f.c2p(F[Y]),Y--;for(V<$&&(H=V,V=$,$=H,W=!0),Y=0;void 0===q&&Y<D.length-1;)q=u.c2p(D[Y]),Y++;for(Y=D.length-1;void 0===K&&Y>0;)K=u.c2p(D[Y]),Y--;if(K<q&&(H=q,q=K,K=H,G=!0),X&&(N=F,U=D,F=C.xfill,D=C.yfill),"fast"!==oe){var j="best"===oe?0:.5;$=Math.max(-j*f._length,$),V=Math.min((1+j)*f._length,V),q=Math.max(-j*u._length,q),K=Math.min((1+j)*u._length,K)}var xe,ke,re=Math.round(V-$),le=Math.round(K-q);if(re<=0||le<=0)return o.selectAll("image").data([]).exit().remove(),void S(o);"fast"===oe?(xe=ne,ke=se):(xe=re,ke=le);var we=document.createElement("canvas");we.width=xe,we.height=ke;var Le,De,de=we.getContext("2d"),be=a(R,{noNumericCheck:!0,returnArray:!0});"fast"===oe?(Le=W?function(Ir){return ne-1-Ir}:c.identity,De=G?function(Ir){return se-1-Ir}:c.identity):(Le=function(Ir){return c.constrain(Math.round(f.c2p(F[Ir])-$),0,re)},De=function(Ir){return c.constrain(Math.round(u.c2p(D[Ir])-q),0,le)});var gt,Nt,Bt,Zt,ye=De(0),Ce=[ye,ye],Fe=W?0:1,Ke=G?0:1,Ue=0,Be=0,Ie=0,nt=0;function Et(Ir,kr){if(void 0!==Ir){var Zr=be(Ir);return Zr[0]=Math.round(Zr[0]),Zr[1]=Math.round(Zr[1]),Zr[2]=Math.round(Zr[2]),Ue+=kr,Be+=Zr[0]*kr,Ie+=Zr[1]*kr,nt+=Zr[2]*kr,Zr}return[0,0,0,0]}function wt(Ir,kr,Zr,An){var wn=Ir[Zr.bin0];if(void 0===wn)return Et(void 0,1);var Zn=Ir[Zr.bin1],Ln=kr[Zr.bin0],Wn=kr[Zr.bin1];return Et(wn+Zr.frac*(Zn-wn||0)+An.frac*((Ln-wn||0)+Zr.frac*(void 0===Zn?void 0===Wn?0:void 0===Ln?2*(Wn-wn):2*(2*Wn-Ln-wn)/3:void 0===Wn?void 0===Ln?0:2*(2*wn-Zn-Ln)/3:void 0===Ln?2*(2*Wn-Zn-wn)/3:Wn+wn-Zn-Ln)))}if(oe){var vt,at=0;try{vt=new Uint8Array(re*le*4)}catch(Ir){vt=new Array(re*le*4)}if("best"===oe){var Xt,ar,Ut,Qe=N||F,Pe=U||D,Ze=new Array(Qe.length),Xe=new Array(Pe.length),rt=new Array(re),kt=N?w:p,Tt=U?w:p;for(Y=0;Y<Qe.length;Y++)Ze[Y]=Math.round(f.c2p(Qe[Y])-$);for(Y=0;Y<Pe.length;Y++)Xe[Y]=Math.round(u.c2p(Pe[Y])-q);for(Y=0;Y<re;Y++)rt[Y]=kt(Y,Ze);for(te=0;te<le;te++)for(ar=I[(Xt=Tt(te,Xe)).bin0],Ut=I[Xt.bin1],Y=0;Y<re;Y++,at+=4)l(vt,at,Zt=wt(ar,Ut,rt[Y],Xt))}else for(te=0;te<se;te++)for(Bt=I[te],Ce=De(te),Y=0;Y<re;Y++)Zt=Et(Bt[Y],1),l(vt,at=4*(Ce*re+Le(Y)),Zt);var Jt=de.createImageData(re,le);try{Jt.data.set(vt)}catch(Ir){var nr=Jt.data,rr=nr.length;for(te=0;te<rr;te++)nr[te]=vt[te]}de.putImageData(Jt,0,0)}else{var br=Math.floor(z/2),Hr=Math.floor(O/2);for(te=0;te<se;te++)if(Bt=I[te],Ce.reverse(),Ce[Ke]=De(te+1),Ce[0]!==Ce[1]&&void 0!==Ce[0]&&void 0!==Ce[1])for(gt=[Nt=Le(0),Nt],Y=0;Y<ne;Y++)gt.reverse(),gt[Fe]=Le(Y+1),gt[0]!==gt[1]&&void 0!==gt[0]&&void 0!==gt[1]&&(Zt=Et(Bt[Y],(gt[1]-gt[0])*(Ce[1]-Ce[0])),de.fillStyle="rgba("+Zt.join(",")+")",de.fillRect(gt[0]+br,Ce[0]+Hr,gt[1]-gt[0]-z,Ce[1]-Ce[0]-O))}Be=Math.round(Be/Ue),Ie=Math.round(Ie/Ue),nt=Math.round(nt/Ue);var on=k("rgb("+Be+","+Ie+","+nt+")");y._hmpixcount=(y._hmpixcount||0)+Ue,y._hmlumcount=(y._hmlumcount||0)+Ue*on.getLuminance();var jr=o.selectAll("image").data(h);jr.enter().append("svg:image").attr({xmlns:r.svg,preserveAspectRatio:"none"}),jr.attr({height:le,width:re,x:$,y:q,"xlink:href":we.toDataURL("image/png")}),S(o);var et=R.texttemplate;if(et){var Yt=i(R),qt={type:"linear",range:[Yt.min,Yt.max],_separators:f._separators,_numFormat:f._numFormat},Vt="histogram2dcontour"===R.type,Tr="contour"===R.type,je=Tr?se-1:se,ct=Tr?1:0,ht=Tr?ne-1:ne,Me=[];for(Y=Tr?1:0;Y<je;Y++){var Se;if(Tr)Se=C.y[Y];else if(Vt){if(0===Y||Y===se-1)continue;Se=C.y[Y]}else if(C.yCenter)Se=C.yCenter[Y];else{if(Y+1===se&&void 0===C.y[Y+1])continue;Se=(C.y[Y]+C.y[Y+1])/2}var Je=Math.round(u.c2p(Se));if(!(0>Je||Je>u._length))for(te=ct;te<ht;te++){var We;if(Tr)We=C.x[te];else if(Vt){if(0===te||te===ne-1)continue;We=C.x[te]}else if(C.xCenter)We=C.xCenter[te];else{if(te+1===ne&&void 0===C.x[te+1])continue;We=(C.x[te]+C.x[te+1])/2}var st=Math.round(f.c2p(We));if(!(0>st||st>f._length)){var lt=n({x:We,y:Se},R,y._fullLayout);lt.x=We,lt.y=Se;var pt=C.z[Y][te];void 0===pt?(lt.z="",lt.zLabel=""):(lt.z=pt,lt.zLabel=e.tickText(qt,pt,"hover").text);var Ct=C.text&&C.text[Y]&&C.text[Y][te];(void 0===Ct||!1===Ct)&&(Ct=""),lt.text=Ct;var Dt=c.texttemplateString(et,lt,y._fullLayout._d3locale,lt,R._meta||{});if(Dt){var Gt=Dt.split("<br>"),fr=Gt.length,pr=0;for(J=0;J<fr;J++)pr=Math.max(pr,Gt[J].length);Me.push({l:fr,c:pr,t:Dt,x:st,y:Je,z:pt})}}}}var Jr=R.textfont,Lr=Jr.family,Ar=Jr.size,en=y._fullLayout.font.size;if(!Ar||"auto"===Ar){var mr=1/0,wr=1/0,Wr=0,Kr=0;for(J=0;J<Me.length;J++){var Cr=Me[J];if(Wr=Math.max(Wr,Cr.l),Kr=Math.max(Kr,Cr.c),J<Me.length-1){var it=Me[J+1],It=Math.abs(it.x-Cr.x),Qt=Math.abs(it.y-Cr.y);It&&(mr=Math.min(mr,It)),Qt&&(wr=Math.min(wr,Qt))}}isFinite(mr)&&isFinite(wr)?(mr-=z,wr-=O,mr/=Kr,wr/=Wr,mr/=s/2,wr/=s,Ar=Math.min(Math.floor(mr),Math.floor(wr),en)):Ar=en}if(Ar<=0||!isFinite(Ar))return;x(o).data(Me).enter().append("g").classed(b,1).append("text").attr("text-anchor","middle").each(function(Ir){var kr=_.select(this),Zr=Jr.color;(!Zr||"auto"===Zr)&&(Zr=t.contrast("rgba("+be(Ir.z).join()+")")),kr.attr("data-notex",1).call(d.positionText,function(Ir){return Ir.x}(Ir),function(Ir){return Ir.y-Ar*(Ir.l*s/2-1)}(Ir)).call(E.font,Lr,Ar,Zr).text(Ir.t).call(d.convertToTspans,y)})}})}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"../../constants/alignment":471,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../scatter/format_labels":936,"@plotly/d3":58,tinycolor2:312}],805:[function(v,ie,ae){"use strict";var _=v("@plotly/d3");ie.exports=function(m){_.select(m).selectAll(".hm image").style("opacity",function(E){return E.trace.opacity})}},{"@plotly/d3":58}],806:[function(v,ie,ae){"use strict";ie.exports=function(k,m,E){!1===E("zsmooth")&&(E("xgap"),E("ygap")),E("zhoverformat")}},{}],807:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../lib"),m=v("../../registry");function E(c,d){var n=d(c);return"scaled"===(n?d(c+"type","array"):"scaled")&&(d(c+"0"),d("d"+c)),n}ie.exports=function(d,n,t,i,a,r){var s,b,g=t("z");if(a=a||"x",r=r||"y",void 0===g||!g.length)return 0;if(k.isArray1D(d.z)){s=t(a),b=t(r);var x=k.minRowLength(s),S=k.minRowLength(b);if(0===x||0===S)return 0;n._length=Math.min(x,S,g.length)}else{if(s=E(a,t),b=E(r,t),!function e(c){for(var i,d=!0,n=!1,t=!1,a=0;a<c.length;a++){if(!k.isArrayOrTypedArray(i=c[a])){d=!1;break}i.length>0&&(n=!0);for(var r=0;r<i.length;r++)if(_(i[r])){t=!0;break}}return d&&n&&t}(g))return 0;t("transpose"),n._length=null}return"heatmapgl"===d.type||m.getComponentMethod("calendars","handleTraceDefaults")(d,n,[a,r],i),!0}},{"../../lib":503,"../../registry":638,"fast-isnumeric":190}],808:[function(v,ie,ae){"use strict";for(var _=v("../heatmap/attributes"),k=v("../../components/colorscale/attributes"),m=v("../../lib/extend").extendFlat,E=v("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],c={},d=0;d<e.length;d++){var n=e[d];c[n]=_[n]}c.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},m(c,k("",{cLetter:"z",autoColorDflt:!1})),ie.exports=E(c,"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../heatmap/attributes":792}],809:[function(v,ie,ae){"use strict";var _=v("../../../stackgl_modules").gl_heatmap2d,k=v("../../plots/cartesian/axes"),m=v("../../lib/str2rgbarray");function E(n,t){this.scene=n,this.uid=t,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=_(n.glplot,this.options),this.heatmap._trace=this}var e=E.prototype;e.handlePick=function(n){var t=this.options,i=t.shape,a=n.pointId,r=a%i[0],g=Math.floor(a/i[0]);return{trace:this,dataCoord:n.dataCoord,traceCoord:[t.x[r],t.y[g],t.z[a]],textLabel:this.textLabels[a],name:this.name,pointIndex:[g,r],hoverinfo:this.hoverinfo}},e.update=function(n,t){var i=t[0];this.index=n.index,this.name=n.name,this.hoverinfo=n.hoverinfo;var a=i.z;this.options.z=[].concat.apply([],a),this.options.shape=[a[0].length,a.length],this.options.x=i.x,this.options.y=i.y,this.options.zsmooth=n.zsmooth;var s=function c(n){for(var t=n.colorscale,i=n.zmin,a=n.zmax,r=t.length,g=new Array(r),s=new Array(4*r),b=0;b<r;b++){var x=t[b],S=m(x[1]);g[b]=i+x[0]*(a-i);for(var p=0;p<4;p++)s[4*b+p]=S[p]}return{colorLevels:g,colorValues:s}}(n);this.options.colorLevels=s.colorLevels,this.options.colorValues=s.colorValues,this.textLabels=[].concat.apply([],n.text),this.heatmap.update(this.options);var S,p,b=this.scene.xaxis,x=this.scene.yaxis;!1===n.zsmooth&&(S={ppad:i.x[1]-i.x[0]},p={ppad:i.y[1]-i.y[0]}),n._extremes[b._id]=k.findExtremes(b,i.x,S),n._extremes[x._id]=k.findExtremes(x,i.y,p)},e.dispose=function(){this.heatmap.dispose()},ie.exports=function d(n,t,i){var a=new E(n,t.uid);return a.update(t,i),a}},{"../../../stackgl_modules":1124,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554}],810:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../heatmap/xyz_defaults"),m=v("../../components/colorscale/defaults"),E=v("./attributes");ie.exports=function(c,d,n,t){function i(r,g){return _.coerce(c,d,E,r,g)}k(c,d,i,t)?(i("text"),i("zsmooth"),m(c,d,t,i,{prefix:"",cLetter:"z"})):d.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/xyz_defaults":807,"./attributes":808}],811:[function(v,ie,ae){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../heatmap/colorbar"),calc:v("../heatmap/calc"),plot:v("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:v("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":596,"../heatmap/calc":793,"../heatmap/colorbar":795,"./attributes":808,"./convert":809,"./defaults":810}],812:[function(v,ie,ae){"use strict";var _=v("../bar/attributes"),k=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=v("../../plots/template_attributes").hovertemplateAttrs,E=v("../../plots/template_attributes").texttemplateAttrs,e=v("../../plots/font_attributes"),c=v("./bin_attributes"),d=v("./constants"),n=v("../../lib/extend").extendFlat;ie.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:k("x"),yhoverformat:k("y"),text:n({},_.text,{}),hovertext:n({},_.hovertext,{}),orientation:_.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:c("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:c("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:m({},{keys:d.eventDataKeys}),texttemplate:E({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:n({},_.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:_.insidetextanchor,textangle:_.textangle,cliponaxis:_.cliponaxis,constraintext:_.constraintext,marker:_.marker,offsetgroup:_.offsetgroup,alignmentgroup:_.alignmentgroup,selected:_.selected,unselected:_.unselected,_deprecated:{bardir:_._deprecated.bardir}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../bar/attributes":648,"./bin_attributes":814,"./constants":818}],813:[function(v,ie,ae){"use strict";ie.exports=function(k,m){for(var E=k.length,e=0,c=0;c<E;c++)m[c]?(k[c]/=m[c],e+=k[c]):k[c]=null;return e}},{}],814:[function(v,ie,ae){"use strict";ie.exports=function(k,m){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],815:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric");ie.exports={count:function(k,m,E){return E[k]++,1},sum:function(k,m,E,e){var c=e[m];return _(c)?(c=Number(c),E[k]+=c,c):0},avg:function(k,m,E,e,c){var d=e[m];return _(d)&&(d=Number(d),E[k]+=d,c[k]++),0},min:function(k,m,E,e){var c=e[m];if(_(c)){if(c=Number(c),!_(E[k]))return E[k]=c,c;if(E[k]>c){var d=c-E[k];return E[k]=c,d}}return 0},max:function(k,m,E,e){var c=e[m];if(_(c)){if(c=Number(c),!_(E[k]))return E[k]=c,c;if(E[k]<c){var d=c-E[k];return E[k]=c,d}}return 0}}},{"fast-isnumeric":190}],816:[function(v,ie,ae){"use strict";var _=v("../../constants/numerical"),k=_.ONEAVGYEAR,m=_.ONEAVGMONTH,E=_.ONEDAY,e=_.ONEHOUR,c=_.ONEMIN,d=_.ONESEC,n=v("../../plots/cartesian/axes").tickIncrement;function t(g,s,b,x){if(g*s<=0)return 1/0;for(var S=Math.abs(s-g),p="date"===b.type,w=i(S,p),l=0;l<10;l++){var y=i(80*w,p);if(w===y)break;if(!a(y,g,s,p,b,x))break;w=y}return w}function i(g,s){return s&&g>d?g>E?g>1.1*k?k:g>1.1*m?m:E:g>e?e:g>c?c:d:Math.pow(10,Math.floor(Math.log(g)/Math.LN10))}function a(g,s,b,x,S,p){if(x&&g>E){var w=r(s,S,p),l=r(b,S,p),y=g===k?0:1;return w[y]!==l[y]}return Math.floor(b/g)-Math.floor(s/g)>.1}function r(g,s,b){var x=s.c2d(g,k,b).split("-");return""===x[0]&&(x.unshift(),x[0]="-"+x[0]),x}ie.exports=function(s,b,x,S,p){var u,h,w=-1.1*b,l=-.1*b,y=s-l,A=x[0],T=x[1],M=Math.min(t(A+l,A+y,S,p),t(T+l,T+y,S,p)),f=Math.min(t(A+w,A+l,S,p),t(T+w,T+l,S,p));if(M>f&&f<Math.abs(T-A)/4e3?(u=M,h=!1):(u=Math.min(M,f),h=!0),"date"===S.type&&u>E){var o=u===k?1:6,C=u===k?"M12":"M1";return function(R,z){var O=S.c2d(R,k,p),I=O.indexOf("-",o);I>0&&(O=O.substr(0,I));var F=S.d2c(O,0,p);if(F<R){var D=n(F,C,!1,p);(F+D)/2<R+s&&(F=D)}return z&&h?n(F,C,!0,p):F}}return function(R,z){var O=u*Math.round(R/u);return O+u/10<R&&O+.9*u<R+s&&(O+=u),z&&h&&(O-=u),O}}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554}],817:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../lib"),m=v("../../registry"),E=v("../../plots/cartesian/axes"),e=v("../bar/arrays_to_calcdata"),c=v("./bin_functions"),d=v("./norm_functions"),n=v("./average"),t=v("./bin_label_vals");function a(b,x,S,p,w){var f,u,h,o,C,R,z,l=p+"bins",y=b._fullLayout,T=y._histogramBinOpts[x["_"+p+"bingroup"]],M="overlay"===y.barmode,O=function(pe){return S.r2c(pe,0,o)},I=function(pe){return S.c2r(pe,0,o)},F="date"===S.type?function(pe){return pe||0===pe?k.cleanDate(pe,null,o):null}:function(pe){return _(pe)?Number(pe):null};function D(pe,xe,ke){xe[pe+"Found"]?(xe[pe]=F(xe[pe]),null===xe[pe]&&(xe[pe]=ke[pe])):(R[pe]=xe[pe]=ke[pe],k.nestedProperty(u[0],l+"."+pe).set(ke[pe]))}if(x["_"+p+"autoBinFinished"])delete x["_"+p+"autoBinFinished"];else{u=T.traces;var N=[],U=!0,X=!1,oe=!1;for(f=0;f<u.length;f++)if((h=u[f]).visible){var se=T.dirs[f];C=h["_"+se+"pos0"]=S.makeCalcdata(h,se),N=k.concat(N,C),delete h["_"+p+"autoBinFinished"],!0===x.visible&&(U?U=!1:(delete h._autoBin,h["_"+p+"autoBinFinished"]=1),m.traceIs(h,"2dMap")&&(X=!0),"histogram2dcontour"===h.type&&(oe=!0))}var ne=E.autoBin(N,S,T.nbins,X,o=u[0][p+"calendar"],T.sizeFound&&T.size),W=u[0]._autoBin={};if(R=W[T.dirs[0]]={},oe&&(T.size||(ne.start=I(E.tickIncrement(O(ne.start),ne.size,!0,o))),void 0===T.end&&(ne.end=I(E.tickIncrement(O(ne.end),ne.size,!1,o)))),M&&!m.traceIs(x,"2dMap")&&0===ne._dataSpan&&"category"!==S.type&&"multicategory"!==S.type){if(w)return[ne,C,!0];ne=function r(b,x,S,p,w){var f,u,h,l=b._fullLayout,y=function g(b,x){for(var S=x.xaxis,p=x.yaxis,w=x.orientation,l=[],y=b._fullData,A=0;A<y.length;A++){var T=y[A];"histogram"===T.type&&!0===T.visible&&T.orientation===w&&T.xaxis===S&&T.yaxis===p&&l.push(T)}return l}(b,x),A=!1,T=1/0,M=[x];for(f=0;f<y.length;f++)if((u=y[f])===x)A=!0;else if(A){var o=a(b,u,S,p,!0),C=o[0],R=o[2];u["_"+p+"autoBinFinished"]=1,u["_"+p+"pos0"]=o[1],R?M.push(u):T=Math.min(T,C.size)}else h=l._histogramBinOpts[u["_"+p+"bingroup"]],T=Math.min(T,h.size||u[w].size);var z=new Array(M.length);for(f=0;f<M.length;f++)for(var O=M[f]["_"+p+"pos0"],I=0;I<O.length;I++)if(void 0!==O[I]){z[f]=O[I];break}for(isFinite(T)||(T=k.distinctVals(z).minDiff),f=0;f<M.length;f++){var F=(u=M[f])[p+"calendar"],D={start:S.c2r(z[f]-T/2,0,F),end:S.c2r(z[f]+T/2,0,F),size:T};u._input[w]=u[w]=D,(h=l._histogramBinOpts[u["_"+p+"bingroup"]])&&k.extendFlat(h,D)}return x[w]}(b,x,S,p,l)}(z=h.cumulative||{}).enabled&&"include"!==z.currentbin&&("decreasing"===z.direction?ne.start=I(E.tickIncrement(O(ne.start),ne.size,!0,o)):ne.end=I(E.tickIncrement(O(ne.end),ne.size,!1,o))),T.size=ne.size,T.sizeFound||(R.size=ne.size,k.nestedProperty(u[0],l+".size").set(ne.size)),D("start",T,ne),D("end",T,ne)}C=x["_"+p+"pos0"],delete x["_"+p+"pos0"];var G=x._input[l]||{},$=k.extendFlat({},T),V=T.start,H=S.r2l(G.start),q=void 0!==H;if((T.startFound||q)&&H!==S.r2l(V)){var K=q?H:k.aggNums(Math.min,null,C),Y={type:"category"===S.type||"multicategory"===S.type?"linear":S.type,r2l:S.r2l,dtick:T.size,tick0:V,calendar:o,range:[K,E.tickIncrement(K,T.size,!1,o)].map(S.l2r)},te=E.tickFirst(Y);te>S.r2l(K)&&(te=E.tickIncrement(te,T.size,!0,o)),$.start=S.l2r(te),q||k.nestedProperty(x,l+".start").set($.start)}var J=T.end,j=S.r2l(G.end),re=void 0!==j;if((T.endFound||re)&&j!==S.r2l(J)){var le=re?j:k.aggNums(Math.max,null,C);$.end=S.l2r(le),re||k.nestedProperty(x,l+".start").set($.end)}var ge="autobin"+p;return!1===x._input[ge]&&(x._input[l]=k.extendFlat({},x[l]||{}),delete x._input[ge],delete x[ge]),[$,C]}ie.exports={calc:function i(b,x){var f,oe,se,ne,S=[],p=[],w="h"===x.orientation,l=E.getFromId(b,w?x.yaxis:x.xaxis),y=w?"y":"x",A={x:"y",y:"x"}[y],T=x[y+"calendar"],M=x.cumulative,u=a(b,x,l,y),h=u[0],o=u[1],C="string"==typeof h.size,R=[],z=C?R:h,O=[],I=[],F=[],D=0,N=x.histnorm,U=x.histfunc,X=-1!==N.indexOf("density");M.enabled&&X&&(N=N.replace(/ ?density$/,""),X=!1);var K,G="max"===U||"min"===U?null:0,$=c.count,V=d[N],H=!1,q=function(De){return l.r2c(De,0,T)};for(k.isArrayOrTypedArray(x[A])&&"count"!==U&&(K=x[A],H="avg"===U,$=c[U]),f=q(h.start),se=q(h.end)+(f-E.tickIncrement(f,h.size,!1,T))/1e6;f<se&&S.length<1e6&&(oe=E.tickIncrement(f,h.size,!1,T),S.push((f+oe)/2),p.push(G),F.push([]),R.push(f),X&&O.push(1/(oe-f)),H&&I.push(0),!(oe<=f));)f=oe;R.push(f),!C&&"date"===l.type&&(z={start:q(z.start),end:q(z.end),size:z.size}),b._fullLayout._roundFnOpts||(b._fullLayout._roundFnOpts={});var Y=x["_"+y+"bingroup"],te={leftGap:1/0,rightGap:1/0};Y&&(b._fullLayout._roundFnOpts[Y]||(b._fullLayout._roundFnOpts[Y]=te),te=b._fullLayout._roundFnOpts[Y]);var xe,J=p.length,j=!0,re=te.leftGap,le=te.rightGap,ge={};for(f=0;f<o.length;f++){var pe=o[f];(ne=k.findBin(pe,z))>=0&&ne<J&&(D+=$(ne,f,p,K,I),j&&F[ne].length&&pe!==o[F[ne][0]]&&(j=!1),F[ne].push(f),ge[f]=ne,re=Math.min(re,pe-R[ne]),le=Math.min(le,R[ne+1]-pe))}te.leftGap=re,te.rightGap=le,j||(xe=function(De,ye){return function(){var Ce=b._fullLayout._roundFnOpts[Y];return t(Ce.leftGap,Ce.rightGap,R,l,T)(De,ye)}}),H&&(D=n(p,I)),V&&V(p,D,O),M.enabled&&function s(b,x,S){var p,w,l;function y(T){l=b[T],b[T]/=2}function A(T){b[T]=l+(w=b[T])/2,l+=w}if("half"===S)if("increasing"===x)for(y(0),p=1;p<b.length;p++)A(p);else for(y(b.length-1),p=b.length-2;p>=0;p--)A(p);else if("increasing"===x){for(p=1;p<b.length;p++)b[p]+=b[p-1];"exclude"===S&&(b.unshift(0),b.pop())}else{for(p=b.length-2;p>=0;p--)b[p]+=b[p+1];"exclude"===S&&(b.push(0),b.shift())}}(p,M.direction,M.currentbin);var ke=Math.min(S.length,p.length),we=[],de=0,be=ke-1;for(f=0;f<ke;f++)if(p[f]){de=f;break}for(f=ke-1;f>=de;f--)if(p[f]){be=f;break}for(f=de;f<=be;f++)if(_(S[f])&&_(p[f])){var Le={p:S[f],s:p[f],b:0};M.enabled||(Le.pts=F[f],j?Le.ph0=Le.ph1=F[f].length?o[F[f][0]]:S[f]:(x._computePh=!0,Le.ph0=xe(R[f]),Le.ph1=xe(R[f+1],!0))),we.push(Le)}return 1===we.length&&(we[0].width1=E.tickIncrement(we[0].p,h.size,!1,T)-we[0].p),e(we,x),k.isArrayOrTypedArray(x.selectedpoints)&&k.tagSelected(we,x,ge),we},calcAllAutoBins:a}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"../bar/arrays_to_calcdata":647,"./average":813,"./bin_functions":815,"./bin_label_vals":816,"./norm_functions":824,"fast-isnumeric":190}],818:[function(v,ie,ae){"use strict";ie.exports={eventDataKeys:["binNumber"]}},{}],819:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../plots/cartesian/axis_ids"),m=v("../../registry").traceIs,E=v("../bar/defaults").handleGroupingDefaults,e=_.nestedProperty,c=v("../../plots/cartesian/constraints").getAxisGroup,d=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],n=["x","y"];ie.exports=function(i,a){var x,S,p,w,l,y,A,r=a._histogramBinOpts={},g=[],s={},b=[];function T(oe,se){return _.coerce(x._input,x,x._module.attributes,oe,se)}function M(oe){return"v"===oe.orientation?"x":"y"}function u(oe,se,ne){var W=oe.uid+"__"+ne;se||(se=W);var G=function f(oe,se){return k.getFromTrace({_fullLayout:a},oe,se).type}(oe,ne),$=oe[ne+"calendar"]||"",V=r[se],H=!0;V&&(G===V.axType&&$===V.calendar?(H=!1,V.traces.push(oe),V.dirs.push(ne)):(se=W,G!==V.axType&&_.warn(["Attempted to group the bins of trace",oe.index,"set on a","type:"+G,"axis","with bins on","type:"+V.axType,"axis."].join(" ")),$!==V.calendar&&_.warn(["Attempted to group the bins of trace",oe.index,"set with a",$,"calendar","with bins",V.calendar?"on a "+V.calendar+" calendar":"w/o a set calendar"].join(" ")))),H&&(r[se]={traces:[oe],dirs:[ne],axType:G,calendar:oe[ne+"calendar"]||""}),oe["_"+ne+"bingroup"]=se}for(l=0;l<i.length;l++)m(x=i[l],"histogram")&&(g.push(x),delete x._xautoBinFinished,delete x._yautoBinFinished,m(x,"2dMap")||E(x._input,x,a,T));var h=a._alignmentOpts||{};for(l=0;l<g.length;l++){if(p="",!m(x=g[l],"2dMap")){if(w=M(x),"group"===a.barmode&&x.alignmentgroup){var C=c(a,x[w+"axis"])+x.orientation;(h[C]||{})[x.alignmentgroup]&&(p=C)}!p&&"overlay"!==a.barmode&&(p=c(a,x.xaxis)+c(a,x.yaxis)+M(x))}p?(s[p]||(s[p]=[]),s[p].push(x)):b.push(x)}for(p in s)if(1!==(S=s[p]).length){var R=!1;for(S.length&&(x=S[0],R=T("bingroup")),p=R||p,l=0;l<S.length;l++){var z=(x=S[l])._input.bingroup;z&&z!==p&&_.warn(["Trace",x.index,"must match","within bingroup",p+".","Ignoring its bingroup:",z,"setting."].join(" ")),x.bingroup=p,u(x,p,M(x))}}else b.push(S[0]);for(l=0;l<b.length;l++){x=b[l];var O=T("bingroup");if(m(x,"2dMap"))for(A=0;A<2;A++){var I=T((w=n[A])+"bingroup",O?O+"__"+w:null);u(x,I,w)}else u(x,O,M(x))}for(p in r){var F=r[p];for(S=F.traces,y=0;y<d.length;y++){var U,X,D=d[y],N=D.name;if("nbins"!==N||!F.sizeFound){for(l=0;l<S.length;l++){if(void 0!==e((x=S[l])._input,U=D.aStr[w=F.dirs[l]]).get()){F[N]=T(U),F[N+"Found"]=!0;break}(X=(x._autoBin||{})[w]||{})[N]&&e(x,U).set(X[N])}if("start"===N||"end"===N)for(;l<S.length;l++)(x=S[l])["_"+w+"bingroup"]&&T(U,(X=(x._autoBin||{})[w]||{})[N]);"nbins"===N&&!F.sizeFound&&!F.nbinsFound&&(x=S[0],F[N]=T(U))}}}}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/cartesian/constraints":562,"../../registry":638,"../bar/defaults":652}],820:[function(v,ie,ae){"use strict";var _=v("../../registry"),k=v("../../lib"),m=v("../../components/color"),E=v("../bar/defaults").handleText,e=v("../bar/style_defaults"),c=v("./attributes");ie.exports=function(n,t,i,a){function r(f,u){return k.coerce(n,t,c,f,u)}var g=r("x"),s=r("y");r("cumulative.enabled")&&(r("cumulative.direction"),r("cumulative.currentbin")),r("text");var x=r("textposition");E(n,t,a,r,x,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),r("hovertext"),r("hovertemplate"),r("xhoverformat"),r("yhoverformat");var S=r("orientation",s&&!g?"h":"v"),p="v"===S?"x":"y",w="v"===S?"y":"x",l=g&&s?Math.min(k.minRowLength(g)&&k.minRowLength(s)):k.minRowLength(t[p]||[]);if(l){t._length=l,_.getComponentMethod("calendars","handleTraceDefaults")(n,t,["x","y"],a),t[w]&&r("histfunc"),r("histnorm"),r("autobin"+p),e(n,t,r,i,a),k.coerceSelectionMarkerOpacity(t,r);var T=(t.marker.line||{}).color,M=_.getComponentMethod("errorbars","supplyDefaults");M(n,t,T||m.defaultLine,{axis:"y"}),M(n,t,T||m.defaultLine,{axis:"x",inherit:"y"})}else t.visible=!1}},{"../../components/color":366,"../../lib":503,"../../registry":638,"../bar/defaults":652,"../bar/style_defaults":663,"./attributes":812}],821:[function(v,ie,ae){"use strict";ie.exports=function(k,m,E,e,c){if(k.x="xVal"in m?m.xVal:m.x,k.y="yVal"in m?m.yVal:m.y,"zLabelVal"in m&&(k.z=m.zLabelVal),m.xa&&(k.xaxis=m.xa),m.ya&&(k.yaxis=m.ya),!(E.cumulative||{}).enabled){var n,d=Array.isArray(c)?e[0].pts[c[0]][c[1]]:e[c].pts;if(k.pointNumbers=d,k.binNumber=k.pointNumber,delete k.pointNumber,delete k.pointIndex,E._indexToPoints){n=[];for(var t=0;t<d.length;t++)n=n.concat(E._indexToPoints[d[t]])}else n=d;k.pointIndices=n}return k}},{}],822:[function(v,ie,ae){"use strict";var _=v("../bar/hover").hoverPoints,k=v("../../plots/cartesian/axes").hoverLabelText;ie.exports=function(E,e,c,d,n){var t=_(E,e,c,d,n);if(t){var i=(E=t[0]).cd[E.index],a=E.cd[0].trace;if(!a.cumulative.enabled){var r="h"===a.orientation?"y":"x";E[r+"Label"]=k(E[r+"a"],[i.ph0,i.ph1],a[r+"hoverformat"])}return t}}},{"../../plots/cartesian/axes":554,"../bar/hover":655}],823:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),layoutAttributes:v("../bar/layout_attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("./cross_trace_defaults"),supplyLayoutDefaults:v("../bar/layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("../bar/cross_trace_calc").crossTraceCalc,plot:v("../bar/plot").plot,layerName:"barlayer",style:v("../bar/style").style,styleOnSelect:v("../bar/style").styleOnSelect,colorbar:v("../scatter/marker_colorbar"),hoverPoints:v("./hover"),selectPoints:v("../bar/select"),eventData:v("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:v("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../bar/cross_trace_calc":651,"../bar/layout_attributes":657,"../bar/layout_defaults":658,"../bar/plot":659,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":945,"./attributes":812,"./calc":817,"./cross_trace_defaults":819,"./defaults":820,"./event_data":821,"./hover":822}],824:[function(v,ie,ae){"use strict";ie.exports={percent:function(_,k){for(var m=_.length,E=100/k,e=0;e<m;e++)_[e]*=E},probability:function(_,k){for(var m=_.length,E=0;E<m;E++)_[E]/=k},density:function(_,k,m,E){var e=_.length;E=E||1;for(var c=0;c<e;c++)_[c]*=m[c]*E},"probability density":function(_,k,m,E){var e=_.length;E&&(k/=E);for(var c=0;c<e;c++)_[c]*=m[c]/k}}},{}],825:[function(v,ie,ae){"use strict";var _=v("../histogram/attributes"),k=v("../histogram/bin_attributes"),m=v("../heatmap/attributes"),E=v("../../plots/attributes"),e=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,c=v("../../plots/template_attributes").hovertemplateAttrs,d=v("../../plots/template_attributes").texttemplateAttrs,n=v("../../components/colorscale/attributes"),t=v("../../lib/extend").extendFlat;ie.exports=t({x:_.x,y:_.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:_.histnorm,histfunc:_.histfunc,nbinsx:_.nbinsx,xbins:k("x"),nbinsy:_.nbinsy,ybins:k("y"),autobinx:_.autobinx,autobiny:_.autobiny,bingroup:t({},_.bingroup,{}),xbingroup:t({},_.bingroup,{}),ybingroup:t({},_.bingroup,{}),xgap:m.xgap,ygap:m.ygap,zsmooth:m.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:c({},{keys:"z"}),texttemplate:d({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:m.textfont,showlegend:t({},E.showlegend,{dflt:!1})},n("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../heatmap/attributes":792,"../histogram/attributes":812,"../histogram/bin_attributes":814}],826:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../plots/cartesian/axes"),m=v("../histogram/bin_functions"),E=v("../histogram/norm_functions"),e=v("../histogram/average"),c=v("../histogram/bin_label_vals"),d=v("../histogram/calc").calcAllAutoBins;function n(a,r,g,s){var x,b=new Array(a);if(s)for(x=0;x<a;x++)b[x]=1/(r[x+1]-r[x]);else{var S=1/g;for(x=0;x<a;x++)b[x]=S}return b}function t(a,r){return{start:a(r.start),end:a(r.end),size:r.size}}function i(a,r,g,s,b,x){var S,p=a.length-1,w=new Array(p),l=c(g,s,a,b,x);for(S=0;S<p;S++){var y=(r||[])[S];w[S]=void 0===y?[l(a[S]),l(a[S+1],!0)]:[y,y]}return w}ie.exports=function(r,g){var A,T,M,f,s=k.getFromId(r,g.xaxis),b=k.getFromId(r,g.yaxis),x=g.xcalendar,S=g.ycalendar,p=function(at){return s.r2c(at,0,x)},w=function(at){return b.r2c(at,0,S)},u=d(r,g,s,"x"),h=u[0],o=u[1],C=d(r,g,b,"y"),R=C[0],z=C[1],O=g._length;o.length>O&&o.splice(O,o.length-O),z.length>O&&z.splice(O,z.length-O);var I=[],F=[],D=[],N="string"==typeof h.size,U="string"==typeof R.size,X=[],oe=[],se=N?X:h,ne=U?oe:R,W=0,G=[],$=[],V=g.histnorm,H=g.histfunc,q=-1!==V.indexOf("density"),Y="max"===H||"min"===H?null:0,te=m.count,J=E[V],j=!1,re=[],le=[],ge="z"in g?g.z:"marker"in g&&Array.isArray(g.marker.color)?g.marker.color:"";ge&&"count"!==H&&(j="avg"===H,te=m[H]);var pe=h.size,xe=p(h.start),ke=p(h.end)+(xe-k.tickIncrement(xe,pe,!1,x))/1e6;for(A=xe;A<ke;A=k.tickIncrement(A,pe,!1,x))F.push(Y),X.push(A),j&&D.push(0);X.push(A);var we=F.length,de=(A-xe)/we,be=s.c2r(xe+de/2,0,x),Le=R.size,De=w(R.start),ye=w(R.end)+(De-k.tickIncrement(De,Le,!1,S))/1e6;for(A=De;A<ye;A=k.tickIncrement(A,Le,!1,S)){I.push(F.slice()),oe.push(A);var Ce=new Array(we);for(T=0;T<we;T++)Ce[T]=[];$.push(Ce),j&&G.push(D.slice())}oe.push(A);var Fe=I.length,Ke=(A-De)/Fe,Ue=function(at){return b.c2r(at,0,S)}(De+Ke/2);q&&(re=n(F.length,se,de,N),le=n(I.length,ne,Ke,U)),!N&&"date"===s.type&&(se=t(p,se)),!U&&"date"===b.type&&(ne=t(w,ne));var Be=!0,Ie=!0,nt=new Array(we),gt=new Array(Fe),Nt=1/0,St=1/0,Bt=1/0,Zt=1/0;for(A=0;A<O;A++){var Et=o[A],wt=z[A];M=_.findBin(Et,se),f=_.findBin(wt,ne),M>=0&&M<we&&f>=0&&f<Fe&&(W+=te(M,A,I[f],ge,G[f]),$[f][M].push(A),Be&&(void 0===nt[M]?nt[M]=Et:nt[M]!==Et&&(Be=!1)),Ie&&(void 0===gt[f]?gt[f]=wt:gt[f]!==wt&&(Ie=!1)),Nt=Math.min(Nt,Et-X[M]),St=Math.min(St,X[M+1]-Et),Bt=Math.min(Bt,wt-oe[f]),Zt=Math.min(Zt,oe[f+1]-wt))}if(j)for(f=0;f<Fe;f++)W+=e(I[f],G[f]);if(J)for(f=0;f<Fe;f++)J(I[f],W,re,le[f]);return{x:o,xRanges:i(X,Be&&nt,Nt,St,s,x),x0:be,dx:de,y:z,yRanges:i(oe,Ie&&gt,Bt,Zt,b,S),y0:Ue,dy:Ke,z:I,pts:$}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../histogram/average":813,"../histogram/bin_functions":815,"../histogram/bin_label_vals":816,"../histogram/calc":817,"../histogram/norm_functions":824}],827:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./sample_defaults"),m=v("../heatmap/style_defaults"),E=v("../../components/colorscale/defaults"),e=v("../heatmap/label_defaults"),c=v("./attributes");ie.exports=function(n,t,i,a){function r(g,s){return _.coerce(n,t,c,g,s)}k(n,t,r,a),!1!==t.visible&&(m(n,t,r,a),E(n,t,a,r,{prefix:"",cLetter:"z"}),r("hovertemplate"),e(r,a),r("xhoverformat"),r("yhoverformat"))}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/style_defaults":806,"./attributes":825,"./sample_defaults":830}],828:[function(v,ie,ae){"use strict";var _=v("../heatmap/hover"),k=v("../../plots/cartesian/axes").hoverLabelText;ie.exports=function(E,e,c,d,n){var t=_(E,e,c,d,n);if(t){var i=(E=t[0]).index,g=E.cd[0],s=g.trace,b=g.xRanges[i[1]],x=g.yRanges[i[0]];return E.xLabel=k(E.xa,[b[0],b[1]],s.xhoverformat),E.yLabel=k(E.ya,[x[0],x[1]],s.yhoverformat),t}}},{"../../plots/cartesian/axes":554,"../heatmap/hover":799}],829:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("../histogram/cross_trace_defaults"),calc:v("../heatmap/calc"),plot:v("../heatmap/plot"),layerName:"heatmaplayer",colorbar:v("../heatmap/colorbar"),style:v("../heatmap/style"),hoverPoints:v("./hover"),eventData:v("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../heatmap/calc":793,"../heatmap/colorbar":795,"../heatmap/plot":804,"../heatmap/style":805,"../histogram/cross_trace_defaults":819,"../histogram/event_data":821,"./attributes":825,"./defaults":827,"./hover":828}],830:[function(v,ie,ae){"use strict";var _=v("../../registry"),k=v("../../lib");ie.exports=function(E,e,c,d){var n=c("x"),t=c("y"),i=k.minRowLength(n),a=k.minRowLength(t);i&&a?(e._length=Math.min(i,a),_.getComponentMethod("calendars","handleTraceDefaults")(E,e,["x","y"],d),(c("z")||c("marker.color"))&&c("histfunc"),c("histnorm"),c("autobinx"),c("autobiny")):e.visible=!1}},{"../../lib":503,"../../registry":638}],831:[function(v,ie,ae){"use strict";var _=v("../histogram2d/attributes"),k=v("../contour/attributes"),m=v("../../components/colorscale/attributes"),E=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=v("../../lib/extend").extendFlat;ie.exports=e({x:_.x,y:_.y,z:_.z,marker:_.marker,histnorm:_.histnorm,histfunc:_.histfunc,nbinsx:_.nbinsx,xbins:_.xbins,nbinsy:_.nbinsy,ybins:_.ybins,autobinx:_.autobinx,autobiny:_.autobiny,bingroup:_.bingroup,xbingroup:_.xbingroup,ybingroup:_.ybingroup,autocontour:k.autocontour,ncontours:k.ncontours,contours:k.contours,line:{color:k.line.color,width:e({},k.line.width,{dflt:.5}),dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},xhoverformat:E("x"),yhoverformat:E("y"),zhoverformat:E("z",1),hovertemplate:_.hovertemplate,texttemplate:k.texttemplate,textfont:k.textfont},m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../contour/attributes":735,"../histogram2d/attributes":825}],832:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../histogram2d/sample_defaults"),m=v("../contour/contours_defaults"),E=v("../contour/style_defaults"),e=v("../heatmap/label_defaults"),c=v("./attributes");ie.exports=function(n,t,i,a){function r(s,b){return _.coerce(n,t,c,s,b)}k(n,t,r,a),!1!==t.visible&&(m(n,t,r,function g(s){return _.coerce2(n,t,c,s)}),E(n,t,r,a),r("xhoverformat"),r("yhoverformat"),r("hovertemplate"),t.contours&&"heatmap"===t.contours.coloring&&e(r,a))}},{"../../lib":503,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/label_defaults":802,"../histogram2d/sample_defaults":830,"./attributes":831}],833:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("../histogram/cross_trace_defaults"),calc:v("../contour/calc"),plot:v("../contour/plot").plot,layerName:"contourlayer",style:v("../contour/style"),colorbar:v("../contour/colorbar"),hoverPoints:v("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../contour/calc":736,"../contour/colorbar":738,"../contour/hover":748,"../contour/plot":753,"../contour/style":755,"../histogram/cross_trace_defaults":819,"./attributes":831,"./defaults":832}],834:[function(v,ie,ae){"use strict";var _=v("../../plots/template_attributes").hovertemplateAttrs,k=v("../../plots/template_attributes").texttemplateAttrs,m=v("../../components/colorscale/attributes"),E=v("../../plots/domain").attributes,e=v("../pie/attributes"),c=v("../sunburst/attributes"),d=v("../treemap/attributes"),n=v("../treemap/constants"),t=v("../../lib/extend").extendFlat;ie.exports={labels:c.labels,parents:c.parents,values:c.values,branchvalues:c.branchvalues,count:c.count,level:c.level,maxdepth:c.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:d.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:t({colors:c.marker.colors,line:c.marker.line,editType:"calc"},m("marker",{colorAttr:"colors",anim:!1})),leaf:c.leaf,pathbar:d.pathbar,text:e.text,textinfo:c.textinfo,texttemplate:k({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:c.hoverinfo,hovertemplate:_({},{keys:n.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:d.outsidetextfont,textposition:d.textposition,sort:e.sort,root:c.root,domain:E({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"../sunburst/attributes":1049,"../treemap/attributes":1075,"../treemap/constants":1078}],835:[function(v,ie,ae){"use strict";var _=v("../../plots/plots");ae.name="icicle",ae.plot=function(k,m,E,e){_.plotBasePlot(ae.name,k,m,E,e)},ae.clean=function(k,m,E,e){_.cleanBasePlot(ae.name,k,m,E,e)}},{"../../plots/plots":619}],836:[function(v,ie,ae){"use strict";var _=v("../sunburst/calc");ae.calc=function(k,m){return _.calc(k,m)},ae.crossTraceCalc=function(k){return _._runCrossTraceCalc("icicle",k)}},{"../sunburst/calc":1051}],837:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./attributes"),m=v("../../components/color"),E=v("../../plots/domain").defaults,e=v("../bar/defaults").handleText,c=v("../bar/constants").TEXTPAD,d=v("../../components/colorscale"),n=d.hasColorscale,t=d.handleDefaults;ie.exports=function(a,r,g,s){function b(M,f){return _.coerce(a,r,k,M,f)}var x=b("labels"),S=b("parents");if(x&&x.length&&S&&S.length){var p=b("values");b(p&&p.length?"branchvalues":"count"),b("level"),b("maxdepth"),b("tiling.orientation"),b("tiling.flip"),b("tiling.pad");var w=b("text");b("texttemplate"),r.texttemplate||b("textinfo",Array.isArray(w)?"text+label":"label"),b("hovertext"),b("hovertemplate");var l=b("pathbar.visible");e(a,r,s,b,"auto",{hasPathbar:l,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),b("textposition"),b("marker.line.width")&&b("marker.line.color",s.paper_bgcolor),b("marker.colors");var T=r._hasColorscale=n(a,"marker","colors")||(a.marker||{}).coloraxis;T&&t(a,r,s,b,{prefix:"marker.",cLetter:"c"}),b("leaf.opacity",T?1:.7),r._hovered={marker:{line:{width:2,color:m.contrast(s.paper_bgcolor)}}},l&&(b("pathbar.thickness",r.pathbar.textfont.size+2*c),b("pathbar.side"),b("pathbar.edgeshape")),b("sort"),b("root.color"),E(r,s,b),r._length=null}else r.visible=!1}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":834}],838:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../lib"),m=v("../../components/drawing"),E=v("../../lib/svg_text_utils"),e=v("./partition"),c=v("./style").styleOne,d=v("../treemap/constants"),n=v("../sunburst/helpers"),t=v("../sunburst/fx"),i=v("../sunburst/plot").formatSliceLabel,a=!1;ie.exports=function(g,s,b,x,S){var p=S.width,w=S.height,l=S.viewX,y=S.viewY,A=S.pathSlice,T=S.toMoveInsideSlice,M=S.strTransform,f=S.hasTransition,u=S.handleSlicesExit,h=S.makeUpdateSliceInterpolator,o=S.makeUpdateTextInterpolator,C=S.prevEntry,z=g._fullLayout,I=s[0].trace,F=-1!==I.textposition.indexOf("left"),D=-1!==I.textposition.indexOf("right"),N=-1!==I.textposition.indexOf("bottom"),X=e(b,[p,w],{flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1,orientation:I.tiling.orientation,pad:{inner:I.tiling.pad},maxDepth:I._maxDepth}).descendants(),oe=1/0,se=-1/0;X.forEach(function(V){var H=V.depth;H>=I._maxDepth?(V.x0=V.x1=(V.x0+V.x1)/2,V.y0=V.y1=(V.y0+V.y1)/2):(oe=Math.min(oe,H),se=Math.max(se,H))}),x=x.data(X,n.getPtId),I._maxVisibleLayers=isFinite(se)?se-oe+1:0,x.enter().append("g").classed("slice",!0),u(x,a,{},[p,w],A),x.order();var ne=null;if(f&&C){var W=n.getPtId(C);x.each(function(V){null===ne&&n.getPtId(V)===W&&(ne={x0:V.x0,x1:V.x1,y0:V.y0,y1:V.y1})})}var G=function(){return ne||{x0:0,x1:p,y0:0,y1:w}},$=x;return f&&($=$.transition().each("end",function(){var V=_.select(this);n.setSliceCursor(V,g,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),$.each(function(V){V._x0=l(V.x0),V._x1=l(V.x1),V._y0=y(V.y0),V._y1=y(V.y1),V._hoverX=l(V.x1-I.tiling.pad),V._hoverY=y(N?V.y1-I.tiling.pad/2:V.y0+I.tiling.pad/2);var H=_.select(this),q=k.ensureSingle(H,"path","surface",function(J){J.style("pointer-events","all")});f?q.transition().attrTween("d",function(J){var j=h(J,a,G(),[p,w],{orientation:I.tiling.orientation,flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1});return function(re){return A(j(re))}}):q.attr("d",A),H.call(t,b,g,s,{styleOne:c,eventDataKeys:d.eventDataKeys,transitionTime:d.CLICK_TRANSITION_TIME,transitionEasing:d.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,g,{isTransitioning:g._transitioning}),q.call(c,V,I,{hovered:!1}),V._text=V.x0===V.x1||V.y0===V.y1?"":i(V,b,I,s,z)||"";var K=k.ensureSingle(H,"g","slicetext"),Y=k.ensureSingle(K,"text","",function(J){J.attr("data-notex",1)}),te=k.ensureUniformFontSize(g,n.determineTextFont(I,V,z.font));Y.text(V._text||" ").classed("slicetext",!0).attr("text-anchor",D?"end":F?"start":"middle").call(m.font,te).call(E.convertToTspans,g),V.textBB=m.bBox(Y.node()),V.transform=T(V,{fontSize:te.size}),V.transform.fontSize=te.size,f?Y.transition().attrTween("transform",function(J){var j=o(J,a,G(),[p,w]);return function(re){return M(j(re))}}):Y.attr("transform",M(V))}),ne}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"../sunburst/plot":1059,"../treemap/constants":1078,"./partition":842,"./style":844,"@plotly/d3":58}],839:[function(v,ie,ae){"use strict";ie.exports={moduleType:"trace",name:"icicle",basePlotModule:v("./base_plot"),categories:[],animatable:!0,attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot"),style:v("./style").style,colorbar:v("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":834,"./base_plot":835,"./calc":836,"./defaults":837,"./layout_attributes":840,"./layout_defaults":841,"./plot":843,"./style":844}],840:[function(v,ie,ae){"use strict";ie.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],841:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./layout_attributes");ie.exports=function(E,e){function c(d,n){return _.coerce(E,e,k,d,n)}c("iciclecolorway",e.colorway),c("extendiciclecolors")}},{"../../lib":503,"./layout_attributes":840}],842:[function(v,ie,ae){"use strict";var _=v("d3-hierarchy"),k=v("../treemap/flip_tree");ie.exports=function(E,e,c){var d=c.flipX,n=c.flipY,t="h"===c.orientation,i=c.maxDepth,a=e[0],r=e[1];i&&(a=(E.height+1)*e[0]/Math.min(E.height+1,i),r=(E.height+1)*e[1]/Math.min(E.height+1,i));var g=_.partition().padding(c.pad.inner).size(t?[e[1],a]:[e[0],r])(E);return(t||d||n)&&k(g,e,{swapXY:t,flipX:d,flipY:n}),g}},{"../treemap/flip_tree":1083,"d3-hierarchy":115}],843:[function(v,ie,ae){"use strict";var _=v("../treemap/draw"),k=v("./draw_descendants");ie.exports=function(E,e,c,d){return _(E,e,c,d,{type:"icicle",drawDescendants:k})}},{"../treemap/draw":1080,"./draw_descendants":838}],844:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../components/color"),m=v("../../lib"),E=v("../bar/uniform_text").resizeText;function c(d,n,t){var i=n.data.data,a=!n.children,r=i.i,g=m.castOption(t,r,"marker.line.color")||k.defaultLine,s=m.castOption(t,r,"marker.line.width")||0;d.style("stroke-width",s).call(k.fill,i.color).call(k.stroke,g).style("opacity",a?t.leaf.opacity:null)}ie.exports={style:function e(d){var n=d._fullLayout._iciclelayer.selectAll(".trace");E(d,n,"icicle"),n.each(function(t){var i=_.select(this),r=t[0].trace;i.style("opacity",r.opacity),i.selectAll("path.surface").each(function(g){_.select(this).call(c,g,r)})})},styleOne:c}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],845:[function(v,ie,ae){"use strict";for(var _=v("../../plots/attributes"),k=v("../../plots/template_attributes").hovertemplateAttrs,m=v("../../lib/extend").extendFlat,E=v("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],c=[],d=[],n=0;n<e.length;n++){var t=E[e[n]];c.push("For the `"+e[n]+"` colormodel, it is ["+(t.zminDflt||t.min).join(", ")+"]."),d.push("For the `"+e[n]+"` colormodel, it is ["+(t.zmaxDflt||t.max).join(", ")+"].")}ie.exports=m({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:m({},_.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:k({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"./constants":847}],846:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./constants"),m=v("fast-isnumeric"),E=v("../../plots/cartesian/axes"),e=v("../../lib").maxRowLength,c=v("./helpers").getImageSize;function d(i,a,r,g){return function(s){return _.constrain((s-i)*a,r,g)}}function n(i,a){return function(r){return _.constrain(r,i,a)}}ie.exports=function(a,r){var g,s;if(r._hasZ)g=r.z.length,s=e(r.z);else if(r._hasSource){var b=c(r.source);g=b.height,s=b.width}var l,x=E.getFromId(a,r.xaxis||"x"),S=E.getFromId(a,r.yaxis||"y"),p=x.d2c(r.x0)-r.dx/2,w=S.d2c(r.y0)-r.dy/2,y=[p,p+s*r.dx],A=[w,w+g*r.dy];if(x&&"log"===x.type)for(l=0;l<s;l++)y.push(p+l*r.dx);if(S&&"log"===S.type)for(l=0;l<g;l++)A.push(w+l*r.dy);return r._extremes[x._id]=E.findExtremes(x,y),r._extremes[S._id]=E.findExtremes(S,A),r._scaler=function t(i){var a=k.colormodel[i.colormodel],g=(a.colormodel||i.colormodel).length;i._sArray=[];for(var s=0;s<g;s++)i._sArray.push(a.min[s]!==i.zmin[s]||a.max[s]!==i.zmax[s]?d(i.zmin[s],(a.max[s]-a.min[s])/(i.zmax[s]-i.zmin[s]),a.min[s],a.max[s]):n(a.min[s],a.max[s]));return function(b){for(var x=b.slice(0,g),S=0;S<g;S++){var p=x[S];if(!m(p))return!1;x[S]=i._sArray[S](p)}return x}}(r),[{x0:p,y0:w,z:r.z,w:s,h:g}]}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":847,"./helpers":850,"fast-isnumeric":190}],847:[function(v,ie,ae){"use strict";ie.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(_){return _.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(_){return _.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(_){return _.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(_){var k=_.slice(0,3);return k[1]=k[1]+"%",k[2]=k[2]+"%",k},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(_){var k=_.slice(0,4);return k[1]=k[1]+"%",k[2]=k[2]+"%",k},suffix:["\xb0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],848:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./attributes"),m=v("./constants"),E=v("../../snapshot/helpers").IMAGE_URL_PREFIX;ie.exports=function(c,d){function n(a,r){return _.coerce(c,d,k,a,r)}n("source"),d.source&&!d.source.match(E)&&delete d.source,d._hasSource=!!d.source;var i,t=n("z");d._hasZ=!(void 0===t||!t.length||!t[0]||!t[0].length),d._hasZ||d._hasSource?(n("x0"),n("y0"),n("dx"),n("dy"),d._hasZ?(n("colormodel","rgb"),n("zmin",(i=m.colormodel[d.colormodel]).zminDflt||i.min),n("zmax",i.zmaxDflt||i.max)):d._hasSource&&(d.colormodel="rgba256",d.zmin=(i=m.colormodel[d.colormodel]).zminDflt,d.zmax=i.zmaxDflt),n("zsmooth"),n("text"),n("hovertext"),n("hovertemplate"),d._length=null):d.visible=!1}},{"../../lib":503,"../../snapshot/helpers":642,"./attributes":845,"./constants":847}],849:[function(v,ie,ae){"use strict";ie.exports=function(k,m){return"xVal"in m&&(k.x=m.xVal),"yVal"in m&&(k.y=m.yVal),m.xa&&(k.xaxis=m.xa),m.ya&&(k.yaxis=m.ya),k.color=m.color,k.colormodel=m.trace.colormodel,k.z||(k.z=m.color),k}},{}],850:[function(v,ie,ae){"use strict";var _=v("probe-image-size/sync"),k=v("../../snapshot/helpers").IMAGE_URL_PREFIX,m=v("buffer/").Buffer;ae.getImageSize=function(E){var e=E.replace(k,""),c=new m(e,"base64");return _(c)}},{"../../snapshot/helpers":642,"buffer/":85,"probe-image-size/sync":276}],851:[function(v,ie,ae){"use strict";var _=v("../../components/fx"),k=v("../../lib"),m=v("./constants");ie.exports=function(e,c,d){var n=e.cd[0],t=n.trace,i=e.xa,a=e.ya;if(!(_.inbox(c-n.x0,c-(n.x0+n.w*t.dx),0)>0||_.inbox(d-n.y0,d-(n.y0+n.h*t.dy),0)>0)){var s,r=Math.floor((c-n.x0)/t.dx),g=Math.floor(Math.abs(d-n.y0)/t.dy);if(t._hasZ?s=n.z[g][r]:t._hasSource&&(s=t._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(r,g,1,1).data),s){var x,b=n.hi||t.hoverinfo;if(b){var S=b.split("+");-1!==S.indexOf("all")&&(S=["color"]),-1!==S.indexOf("color")&&(x=!0)}var M,p=m.colormodel[t.colormodel],w=p.colormodel||t.colormodel,l=w.length,y=t._scaler(s),A=p.suffix,T=[];(t.hovertemplate||x)&&(T.push("["+[y[0]+A[0],y[1]+A[1],y[2]+A[2]].join(", ")),4===l&&T.push(", "+y[3]+A[3]),T.push("]"),T=T.join(""),e.extraText=w.toUpperCase()+": "+T),Array.isArray(t.hovertext)&&Array.isArray(t.hovertext[g])?M=t.hovertext[g][r]:Array.isArray(t.text)&&Array.isArray(t.text[g])&&(M=t.text[g][r]);var f=a.c2p(n.y0+(g+.5)*t.dy),u=n.x0+(r+.5)*t.dx,h=n.y0+(g+.5)*t.dy,o="["+s.slice(0,t.colormodel.length).join(", ")+"]";return[k.extendFlat(e,{index:[g,r],x0:i.c2p(n.x0+r*t.dx),x1:i.c2p(n.x0+(r+1)*t.dx),y0:f,y1:f,color:y,xVal:u,xLabelVal:u,yVal:h,yLabelVal:h,zLabelVal:o,text:M,hovertemplateLabels:{zLabel:o,colorLabel:T,"color[0]Label":y[0]+A[0],"color[1]Label":y[1]+A[1],"color[2]Label":y[2]+A[2],"color[3]Label":y[3]+A[3]}})]}}}},{"../../components/fx":406,"../../lib":503,"./constants":847}],852:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot"),style:v("./style"),hoverPoints:v("./hover"),eventData:v("./event_data"),moduleType:"trace",name:"image",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":568,"./attributes":845,"./calc":846,"./defaults":848,"./event_data":849,"./hover":851,"./plot":853,"./style":854}],853:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../lib"),m=k.strTranslate,E=v("../../constants/xmlns_namespaces"),e=v("./constants"),c=k.isIOS()||k.isSafari()||k.isIE();ie.exports=function(n,t,i,a){var r=t.xaxis,g=t.yaxis,s=!(c||n._context._exportedPlot);k.makeTraceGroups(a,i,"im").each(function(b){var x=_.select(this),S=b[0],p=S.trace,w=("fast"===p.zsmooth||!1===p.zsmooth&&s)&&!p._hasZ&&p._hasSource&&"linear"===r.type&&"linear"===g.type;p._realImage=w;var h,o,C,R,z,O,l=S.z,y=S.x0,A=S.y0,T=S.w,M=S.h,f=p.dx,u=p.dy;for(O=0;void 0===h&&O<T;)h=r.c2p(y+O*f),O++;for(O=T;void 0===o&&O>0;)o=r.c2p(y+O*f),O--;for(O=0;void 0===R&&O<M;)R=g.c2p(A+O*u),O++;for(O=M;void 0===z&&O>0;)z=g.c2p(A+O*u),O--;if(o<h&&(C=o,o=h,h=C),z<R&&(C=R,R=z,z=C),!w){var I=.5;h=Math.max(-I*r._length,h),o=Math.min(1.5*r._length,o),R=Math.max(-I*g._length,R),z=Math.min(1.5*g._length,z)}var F=Math.round(o-h),D=Math.round(z-R);if(F<=0||D<=0)x.selectAll("image").data([]).exit().remove();else{var oe=x.selectAll("image").data([b]);oe.enter().append("svg:image").attr({xmlns:E.svg,preserveAspectRatio:"none"}),oe.exit().remove();var se=!1===p.zsmooth?e.pixelatedStyle:"";if(w){var ne=k.simpleMap(r.range,r.r2l),W=k.simpleMap(g.range,g.r2l),G=ne[1]<ne[0],$=W[1]>W[0];if(G||$){var V=h+F/2,H=R+D/2;se+="transform:"+m(V+"px",H+"px")+"scale("+(G?-1:1)+","+($?-1:1)+")"+m(-V+"px",-H+"px")+";"}}oe.attr("style",se);var q=new Promise(function(K){if(p._hasZ)K();else if(p._hasSource)if(p._canvas&&p._canvas.el.width===T&&p._canvas.el.height===M&&p._canvas.source===p.source)K();else{var Y=document.createElement("canvas");Y.width=T,Y.height=M;var te=Y.getContext("2d",{willReadFrequently:!0});p._image=p._image||new Image;var J=p._image;J.onload=function(){te.drawImage(J,0,0),p._canvas={el:Y,source:p.source},K()},J.setAttribute("src",p.source)}}).then(function(){var K;if(p._hasZ)K=X(function(j,re){return l[re][j]}).toDataURL("image/png");else if(p._hasSource)if(w)K=p.source;else{var J=p._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,T,M).data;K=X(function(j,re){var le=4*(re*T+j);return[J[le],J[le+1],J[le+2],J[le+3]]}).toDataURL("image/png")}oe.attr({"xlink:href":K,height:D,width:F,x:h,y:R})});n._promises.push(q)}function X(K){var Y=document.createElement("canvas");Y.width=F,Y.height=D;var pe,te=Y.getContext("2d",{willReadFrequently:!0}),J=function(Le){return k.constrain(Math.round(r.c2p(y+Le*f)-h),0,F)},j=function(Le){return k.constrain(Math.round(g.c2p(A+Le*u)-R),0,D)},re=e.colormodel[p.colormodel],le=re.colormodel||p.colormodel,ge=re.fmt;for(O=0;O<S.w;O++){var xe=J(O),ke=J(O+1);if(ke!==xe&&!isNaN(ke)&&!isNaN(xe))for(var we=0;we<S.h;we++){var de=j(we),be=j(we+1);be===de||isNaN(be)||isNaN(de)||!K(O,we)||(pe=p._scaler(K(O,we)),te.fillStyle=pe?le+"("+ge(pe).join(",")+")":"rgba(0,0,0,0)",te.fillRect(xe,de,ke-xe,be-de))}}return Y}})}},{"../../constants/xmlns_namespaces":480,"../../lib":503,"./constants":847,"@plotly/d3":58}],854:[function(v,ie,ae){"use strict";var _=v("@plotly/d3");ie.exports=function(m){_.select(m).selectAll(".im image").style("opacity",function(E){return E[0].trace.opacity})}},{"@plotly/d3":58}],855:[function(v,ie,ae){"use strict";var _=v("../../lib/extend").extendFlat,k=v("../../lib/extend").extendDeep,m=v("../../plot_api/edit_types").overrideAll,E=v("../../plots/font_attributes"),e=v("../../components/color/attributes"),c=v("../../plots/domain").attributes,d=v("../../plots/cartesian/layout_attributes"),n=v("../../plot_api/plot_template").templatedArray,t=v("../../constants/delta.js"),i=v("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,a=E({editType:"plot",colorEditType:"plot"}),r={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},g={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},s=n("step",k({},r,{range:g}));ie.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:c({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:_({},a,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:i("value")},font:_({},a,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:i("value")},increasing:{symbol:{valType:"string",dflt:t.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:t.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:t.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:t.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:_({},a,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:k({},r,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:m({range:g,visible:_({},d.visible,{dflt:!0}),tickmode:d.tickmode,nticks:d.nticks,tick0:d.tick0,dtick:d.dtick,tickvals:d.tickvals,ticktext:d.ticktext,ticks:_({},d.ticks,{dflt:"outside"}),ticklen:d.ticklen,tickwidth:d.tickwidth,tickcolor:d.tickcolor,ticklabelstep:d.ticklabelstep,showticklabels:d.showticklabels,tickfont:E({}),tickangle:d.tickangle,tickformat:d.tickformat,tickformatstops:d.tickformatstops,tickprefix:d.tickprefix,showtickprefix:d.showtickprefix,ticksuffix:d.ticksuffix,showticksuffix:d.showticksuffix,separatethousands:d.separatethousands,exponentformat:d.exponentformat,minexponent:d.minexponent,showexponent:d.showexponent,editType:"plot"},"plot"),steps:s,threshold:{line:{color:_({},r.line.color,{}),width:_({},r.line.width,{dflt:1}),editType:"plot"},thickness:_({},r.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":365,"../../constants/delta.js":473,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],856:[function(v,ie,ae){"use strict";var _=v("../../plots/plots");ae.name="indicator",ae.plot=function(k,m,E,e){_.plotBasePlot(ae.name,k,m,E,e)},ae.clean=function(k,m,E,e){_.cleanBasePlot(ae.name,k,m,E,e)}},{"../../plots/plots":619}],857:[function(v,ie,ae){"use strict";ie.exports={calc:function _(k,m){var E=[],e=m.value;"number"!=typeof m._lastValue&&(m._lastValue=m.value);var c=m._lastValue,d=c;return m._hasDelta&&"number"==typeof m.delta.reference&&(d=m.delta.reference),E[0]={y:e,lastY:c,delta:e-d,relativeDelta:(e-d)/d},E}}},{}],858:[function(v,ie,ae){"use strict";ie.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],859:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./attributes"),m=v("../../plots/domain").defaults,E=v("../../plot_api/plot_template"),e=v("../../plots/array_container_defaults"),c=v("./constants.js"),d=v("../../plots/cartesian/tick_value_defaults"),n=v("../../plots/cartesian/tick_mark_defaults"),t=v("../../plots/cartesian/tick_label_defaults"),i=v("../../plots/cartesian/prefix_suffix_defaults");function r(g,s){function b(x,S){return _.coerce(g,s,k.gauge.steps,x,S)}b("color"),b("line.color"),b("line.width"),b("range"),b("thickness")}ie.exports={supplyDefaults:function a(g,s,b,x){function S(O,I){return _.coerce(g,s,k,O,I)}m(s,x,S),S("mode"),s._hasNumber=-1!==s.mode.indexOf("number"),s._hasDelta=-1!==s.mode.indexOf("delta"),s._hasGauge=-1!==s.mode.indexOf("gauge");var p=S("value");s._range=[0,"number"==typeof p?1.5*p:1];var l,y,A,T,M,f,w=new Array(2);function u(O,I){return _.coerce(A,T,k.gauge,O,I)}function h(O,I){return _.coerce(M,f,k.gauge.axis,O,I)}if(s._hasNumber&&(S("number.valueformat"),S("number.font.color",x.font.color),S("number.font.family",x.font.family),S("number.font.size"),void 0===s.number.font.size&&(s.number.font.size=c.defaultNumberFontSize,w[0]=!0),S("number.prefix"),S("number.suffix"),l=s.number.font.size),s._hasDelta&&(S("delta.font.color",x.font.color),S("delta.font.family",x.font.family),S("delta.font.size"),void 0===s.delta.font.size&&(s.delta.font.size=(s._hasNumber?.5:1)*(l||c.defaultNumberFontSize),w[1]=!0),S("delta.reference",s.value),S("delta.relative"),S("delta.valueformat",s.delta.relative?"2%":""),S("delta.increasing.symbol"),S("delta.increasing.color"),S("delta.decreasing.symbol"),S("delta.decreasing.color"),S("delta.position"),y=s.delta.font.size),s._scaleNumbers=(!s._hasNumber||w[0])&&(!s._hasDelta||w[1])||!1,S("title.font.color",x.font.color),S("title.font.family",x.font.family),S("title.font.size",.25*(l||y||c.defaultNumberFontSize)),S("title.text"),s._hasGauge){(A=g.gauge)||(A={}),T=E.newContainer(s,"gauge"),u("shape"),(s._isBullet="bullet"===s.gauge.shape)||S("title.align","center"),(s._isAngular="angular"===s.gauge.shape)||S("align","center"),u("bgcolor",x.paper_bgcolor),u("borderwidth"),u("bordercolor"),u("bar.color"),u("bar.line.color"),u("bar.line.width"),u("bar.thickness",c.valueThickness*("bullet"===s.gauge.shape?.5:1)),e(A,T,{name:"steps",handleItemDefaults:r}),u("threshold.value"),u("threshold.thickness"),u("threshold.line.width"),u("threshold.line.color"),M={},A&&(M=A.axis||{}),f=E.newContainer(T,"axis"),h("visible"),s._range=h("range",s._range);var z={outerTicks:!0};d(M,f,h,"linear"),i(M,f,h,"linear",z),t(M,f,h,"linear",z),n(M,f,h,z)}else S("title.align","center"),S("align","center"),s._isAngular=s._isBullet=!1;s._length=null}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"../../plots/domain":584,"./attributes":855,"./constants.js":858}],860:[function(v,ie,ae){"use strict";ie.exports={moduleType:"trace",name:"indicator",basePlotModule:v("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:v("./attributes"),supplyDefaults:v("./defaults").supplyDefaults,calc:v("./calc").calc,plot:v("./plot"),meta:{}}},{"./attributes":855,"./base_plot":856,"./calc":857,"./defaults":859,"./plot":861}],861:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("d3-interpolate").interpolate,m=v("d3-interpolate").interpolateNumber,E=v("../../lib"),e=E.strScale,c=E.strTranslate,d=E.rad2deg,n=v("../../constants/alignment").MID_SHIFT,t=v("../../components/drawing"),i=v("./constants"),a=v("../../lib/svg_text_utils"),r=v("../../plots/cartesian/axes"),g=v("../../plots/cartesian/axis_defaults"),s=v("../../plots/cartesian/position_defaults"),b=v("../../plots/cartesian/layout_attributes"),x=v("../../components/color"),S={left:"start",center:"middle",right:"end"},p={left:0,center:.5,right:1},w=/[yzafpn\xb5mkMGTPEZY]/;function l(z){return z&&z.duration>0}function A(z,O,I,F){var te,J,j,re,D=I[0].trace,N=F.size,U=F.radius,X=F.innerRadius,oe=F.gaugeBg,se=F.gaugeOutline,ne=[N.l+N.w/2,N.t+N.h/2+U/2],W=F.gauge,G=F.layer,$=F.transitionOpts,V=F.onComplete,H=Math.PI/2;function q(Be){var Ie=D.gauge.axis.range[0],gt=(Be-Ie)/(D.gauge.axis.range[1]-Ie)*Math.PI-H;return gt<-H?-H:gt>H?H:gt}function K(Be){return _.svg.arc().innerRadius((X+U)/2-Be/2*(U-X)).outerRadius((X+U)/2+Be/2*(U-X)).startAngle(-H)}function Y(Be){Be.attr("d",function(Ie){return K(Ie.thickness).startAngle(q(Ie.range[0])).endAngle(q(Ie.range[1]))()})}W.enter().append("g").classed("angular",!0),W.attr("transform",c(ne[0],ne[1])),G.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),G.selectAll("g.xangularaxistick,path,text").remove(),(te=u(z,D.gauge.axis)).type="linear",te.range=D.gauge.axis.range,te._id="xangularaxis",te.ticklabeloverflow="allow",te.setScale();var le=function(Be){return(te.range[0]-Be.x)/(te.range[1]-te.range[0])*Math.PI+Math.PI},ge={},xe=r.makeLabelFns(te,0).labelStandoff;ge.xFn=function(Be){var Ie=le(Be);return Math.cos(Ie)*xe},ge.yFn=function(Be){var Ie=le(Be),nt=Math.sin(Ie)>0?.2:1;return-Math.sin(Ie)*(xe+Be.fontSize*nt)+Math.abs(Math.cos(Ie))*(Be.fontSize*n)},ge.anchorFn=function(Be){var Ie=le(Be),nt=Math.cos(Ie);return Math.abs(nt)<.1?"middle":nt>0?"start":"end"},ge.heightFn=function(Be,Ie,nt){var gt=le(Be);return-.5*(1+Math.sin(gt))*nt};var ke=function(Be){return c(ne[0]+U*Math.cos(Be),ne[1]-U*Math.sin(Be))};j=function(Be){return ke(le(Be))};J=r.calcTicks(te),re=r.getTickSigns(te)[2],te.visible&&(r.drawTicks(z,te,{vals:J,layer:G,path:"M"+(re="inside"===te.ticks?-1:1)*((te.linewidth||1)/2)+",0h"+re*te.ticklen,transFn:function(Be){var Ie=le(Be);return ke(Ie)+"rotate("+-d(Ie)+")"}}),r.drawLabels(z,te,{vals:J,layer:G,transFn:j,labelFns:ge}));var be=[oe].concat(D.gauge.steps),Le=W.selectAll("g.bg-arc").data(be);Le.enter().append("g").classed("bg-arc",!0).append("path"),Le.select("path").call(Y).call(M),Le.exit().remove();var De=K(D.gauge.bar.thickness),ye=W.selectAll("g.value-arc").data([D.gauge.bar]);ye.enter().append("g").classed("value-arc",!0).append("path");var Ce=ye.select("path");l($)?(Ce.transition().duration($.duration).ease($.easing).each("end",function(){V&&V()}).each("interrupt",function(){V&&V()}).attrTween("d",function f(z,O,I){return function(){var F=k(O,I);return function(D){return z.endAngle(F(D))()}}}(De,q(I[0].lastY),q(I[0].y))),D._lastValue=I[0].y):Ce.attr("d","number"==typeof I[0].y?De.endAngle(q(I[0].y)):"M0,0Z"),Ce.call(M),ye.exit().remove(),be=[];var Fe=D.gauge.threshold.value;(Fe||0===Fe)&&be.push({range:[Fe,Fe],color:D.gauge.threshold.color,line:{color:D.gauge.threshold.line.color,width:D.gauge.threshold.line.width},thickness:D.gauge.threshold.thickness});var Ke=W.selectAll("g.threshold-arc").data(be);Ke.enter().append("g").classed("threshold-arc",!0).append("path"),Ke.select("path").call(Y).call(M),Ke.exit().remove();var Ue=W.selectAll("g.gauge-outline").data([se]);Ue.enter().append("g").classed("gauge-outline",!0).append("path"),Ue.select("path").call(Y).call(M),Ue.exit().remove()}function M(z){z.each(function(O){x.stroke(_.select(this),O.line.color)}).each(function(O){x.fill(_.select(this),O.color)}).style("stroke-width",function(O){return O.line.width})}function u(z,O,I){var F=z._fullLayout,D=E.extendFlat({type:"linear",ticks:"outside",range:I,showline:!0},O),N={type:"linear",_id:"x"+O._id},U={letter:"x",font:F.font,noHover:!0,noTickson:!0};function X(oe,se){return E.coerce(D,N,b,oe,se)}return g(D,N,X,U,F),s(D,N,X,U),N}function h(z,O,I){return[Math.min(O/z.width,I/z.height),z,O+"x"+I]}function C(z,O,I,F){var D=document.createElementNS("http://www.w3.org/2000/svg","text"),N=_.select(D);return N.text(z).attr("x",0).attr("y",0).attr("text-anchor",I).attr("data-unformatted",z).call(a.convertToTspans,F).call(t.font,O),t.bBox(N.node())}function R(z,O,I,F,D,N){var U="_cache"+O;z[U]&&z[U].key===D||(z[U]={key:D,value:I});var X=E.aggNums(N,null,[z[U].value,F],2);return z[U].value=X,X}ie.exports=function(O,I,F,D){var U,N=O._fullLayout;l(F)&&D&&(U=D()),E.makeTraceGroups(N._indicatorlayer,I,"trace").each(function(X){var J,j,re,xe,ke,se=X[0].trace,ne=_.select(this),W=se._hasGauge,G=se._isAngular,$=se._isBullet,V=se.domain,H={w:N._size.w*(V.x[1]-V.x[0]),h:N._size.h*(V.y[1]-V.y[0]),l:N._size.l+N._size.w*V.x[0],r:N._size.r+N._size.w*(1-V.x[1]),t:N._size.t+N._size.h*(1-V.y[1]),b:N._size.b+N._size.h*V.y[0]},q=H.l+H.w/2,K=H.t+H.h/2,Y=Math.min(H.w/2,H.h),te=i.innerRadius*Y,le=se.align||"center";if(j=K,W){if(G&&(J=q,j=K+Y/2,re=function(ye){return function o(z,O){return[O/Math.sqrt(z.width/2*(z.width/2)+z.height*z.height),z,O]}(ye,.9*te)}),$){var ge=i.bulletPadding,pe=1-i.bulletNumberDomainSize+ge;J=H.l+(pe+(1-pe)*p[le])*H.w,re=function(ye){return h(ye,(i.bulletNumberDomainSize-ge)*H.w,H.h)}}}else J=H.l+p[le]*H.w,re=function(ye){return h(ye,H.w,H.h)};(function T(z,O,I,F){var G,$,V,D=I[0].trace,N=F.numbersX,U=F.numbersY,X=D.align||"center",oe=S[X],se=F.transitionOpts,ne=F.onComplete,W=E.ensureSingle(O,"g","numbers"),H=[];D._hasNumber&&H.push("number"),D._hasDelta&&(H.push("delta"),"left"===D.delta.position&&H.reverse());var q=W.selectAll("text").data(H);function K(ke,we,de,be){if(!ke.match("s")||de>=0==be>=0||we(de).slice(-1).match(w)||we(be).slice(-1).match(w))return we;var Le=ke.slice().replace("s","f").replace(/\d+/,function(ye){return parseInt(ye)-1}),De=u(z,{tickformat:Le});return function(ye){return Math.abs(ye)<1?r.tickText(De,ye).text:we(ye)}}q.enter().append("text"),q.attr("text-anchor",function(){return oe}).attr("class",function(ke){return ke}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),q.exit().remove();var j,J=D.mode+D.align;if(D._hasDelta&&(j=function te(){var ke=u(z,{tickformat:D.delta.valueformat},D._range);ke.setScale(),r.prepTicks(ke);var we=function(Ce){return r.tickText(ke,Ce).text},de=function(Ce){return D.delta.relative?Ce.relativeDelta:Ce.delta},be=function(Ce,Fe){return 0===Ce||"number"!=typeof Ce||isNaN(Ce)?"-":(Ce>0?D.delta.increasing.symbol:D.delta.decreasing.symbol)+Fe(Ce)},Le=function(Ce){return Ce.delta>=0?D.delta.increasing.color:D.delta.decreasing.color};void 0===D._deltaLastValue&&(D._deltaLastValue=de(I[0]));var De=W.select("text.delta");function ye(){De.text(be(de(I[0]),we)).call(x.fill,Le(I[0])).call(a.convertToTspans,z)}return De.call(t.font,D.delta.font).call(x.fill,Le({delta:D._deltaLastValue})),l(se)?De.transition().duration(se.duration).ease(se.easing).tween("text",function(){var Ce=_.select(this),Fe=de(I[0]),Ke=D._deltaLastValue,Ue=K(D.delta.valueformat,we,Ke,Fe),Be=m(Ke,Fe);return D._deltaLastValue=Fe,function(Ie){Ce.text(be(Be(Ie),Ue)),Ce.call(x.fill,Le({delta:Be(Ie)}))}}).each("end",function(){ye(),ne&&ne()}).each("interrupt",function(){ye(),ne&&ne()}):ye(),$=C(be(de(I[0]),we),D.delta.font,oe,z),De}(),J+=D.delta.position+D.delta.font.size+D.delta.font.family+D.delta.valueformat,J+=D.delta.increasing.symbol+D.delta.decreasing.symbol,V=$),D._hasNumber&&(function Y(){var ke=u(z,{tickformat:D.number.valueformat},D._range);ke.setScale(),r.prepTicks(ke);var we=function(ye){return r.tickText(ke,ye).text},de=D.number.suffix,be=D.number.prefix,Le=W.select("text.number");function De(){var ye="number"==typeof I[0].y?be+we(I[0].y)+de:"-";Le.text(ye).call(t.font,D.number.font).call(a.convertToTspans,z)}l(se)?Le.transition().duration(se.duration).ease(se.easing).each("end",function(){De(),ne&&ne()}).each("interrupt",function(){De(),ne&&ne()}).attrTween("text",function(){var ye=_.select(this),Ce=m(I[0].lastY,I[0].y);D._lastValue=I[0].y;var Fe=K(D.number.valueformat,we,I[0].lastY,I[0].y);return function(Ke){ye.text(be+Fe(Ce(Ke))+de)}}):De(),G=C(be+we(I[0].y)+de,D.number.font,oe,z)}(),J+=D.number.font.size+D.number.font.family+D.number.valueformat+D.number.suffix+D.number.prefix,V=G),D._hasDelta&&D._hasNumber){var ge,pe,re=[(G.left+G.right)/2,(G.top+G.bottom)/2],le=[($.left+$.right)/2,($.top+$.bottom)/2],xe=.75*D.delta.font.size;"left"===D.delta.position&&(ge=R(D,"deltaPos",0,-1*(G.width*p[D.align]+$.width*(1-p[D.align])+xe),J,Math.min),pe=re[1]-le[1],V={width:G.width+$.width+xe,height:Math.max(G.height,$.height),left:$.left+ge,right:G.right,top:Math.min(G.top,$.top+pe),bottom:Math.max(G.bottom,$.bottom+pe)}),"right"===D.delta.position&&(ge=R(D,"deltaPos",0,G.width*(1-p[D.align])+$.width*p[D.align]+xe,J,Math.max),pe=re[1]-le[1],V={width:G.width+$.width+xe,height:Math.max(G.height,$.height),left:G.left,right:$.right+ge,top:Math.min(G.top,$.top+pe),bottom:Math.max(G.bottom,$.bottom+pe)}),"bottom"===D.delta.position&&(ge=null,pe=$.height,V={width:Math.max(G.width,$.width),height:G.height+$.height,left:Math.min(G.left,$.left),right:Math.max(G.right,$.right),top:G.bottom-G.height,bottom:G.bottom+$.height}),"top"===D.delta.position&&(ge=null,pe=G.top,V={width:Math.max(G.width,$.width),height:G.height+$.height,left:Math.min(G.left,$.left),right:Math.max(G.right,$.right),top:G.bottom-G.height-$.height,bottom:G.bottom}),j.attr({dx:ge,dy:pe})}(D._hasNumber||D._hasDelta)&&W.attr("transform",function(){var de,ke=F.numbersScaler(V),we=R(D,"numbersScale",1,ke[0],J+=ke[2],Math.min);D._scaleNumbers||(we=1),D._numbersTop=we*V.top+(de=D._isAngular?U-we*V.bottom:U-we*(V.top+V.bottom)/2);var be=V[X];"center"===X&&(be=(V.left+V.right)/2);var Le=N-we*be;return Le=R(D,"numbersTranslate",0,Le,J,Math.max),c(Le,de)+e(we)})})(O,ne,X,{numbersX:J,numbersY:j,numbersScaler:re,transitionOpts:F,onComplete:U}),W&&(xe={range:se.gauge.axis.range,color:se.gauge.bgcolor,line:{color:se.gauge.bordercolor,width:0},thickness:1},ke={range:se.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:se.gauge.bordercolor,width:se.gauge.borderwidth},thickness:1});var we=ne.selectAll("g.angular").data(G?X:[]);we.exit().remove();var de=ne.selectAll("g.angularaxis").data(G?X:[]);de.exit().remove(),G&&A(O,0,X,{radius:Y,innerRadius:te,gauge:we,layer:de,size:H,gaugeBg:xe,gaugeOutline:ke,transitionOpts:F,onComplete:U});var be=ne.selectAll("g.bullet").data($?X:[]);be.exit().remove();var Le=ne.selectAll("g.bulletaxis").data($?X:[]);Le.exit().remove(),$&&function y(z,O,I,F){var $,V,H,q,K,D=I[0].trace,N=F.gauge,U=F.layer,X=F.gaugeBg,oe=F.gaugeOutline,se=F.size,ne=D.domain,W=F.transitionOpts,G=F.onComplete;N.enter().append("g").classed("bullet",!0),N.attr("transform",c(se.l,se.t)),U.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),U.selectAll("g.xbulletaxistick,path,text").remove();var Y=se.h,te=D.gauge.bar.thickness*Y,J=ne.x[0],j=ne.x[0]+(ne.x[1]-ne.x[0])*(D._hasNumber||D._hasDelta?1-i.bulletNumberDomainSize:1);function re(de){de.attr("width",function(be){return Math.max(0,$.c2p(be.range[1])-$.c2p(be.range[0]))}).attr("x",function(be){return $.c2p(be.range[0])}).attr("y",function(be){return.5*(1-be.thickness)*Y}).attr("height",function(be){return be.thickness*Y})}($=u(z,D.gauge.axis))._id="xbulletaxis",$.domain=[J,j],$.setScale(),V=r.calcTicks($),H=r.makeTransTickFn($),q=r.getTickSigns($)[2],K=se.t+se.h,$.visible&&(r.drawTicks(z,$,{vals:"inside"===$.ticks?r.clipEnds($,V):V,layer:U,path:r.makeTickPath($,K,q),transFn:H}),r.drawLabels(z,$,{vals:V,layer:U,transFn:H,labelFns:r.makeLabelFns($,K)}));var le=[X].concat(D.gauge.steps),ge=N.selectAll("g.bg-bullet").data(le);ge.enter().append("g").classed("bg-bullet",!0).append("rect"),ge.select("rect").call(re).call(M),ge.exit().remove();var pe=N.selectAll("g.value-bullet").data([D.gauge.bar]);pe.enter().append("g").classed("value-bullet",!0).append("rect"),pe.select("rect").attr("height",te).attr("y",(Y-te)/2).call(M),l(W)?pe.select("rect").transition().duration(W.duration).ease(W.easing).each("end",function(){G&&G()}).each("interrupt",function(){G&&G()}).attr("width",Math.max(0,$.c2p(Math.min(D.gauge.axis.range[1],I[0].y)))):pe.select("rect").attr("width","number"==typeof I[0].y?Math.max(0,$.c2p(Math.min(D.gauge.axis.range[1],I[0].y))):0),pe.exit().remove();var xe=I.filter(function(){return D.gauge.threshold.value||0===D.gauge.threshold.value}),ke=N.selectAll("g.threshold-bullet").data(xe);ke.enter().append("g").classed("threshold-bullet",!0).append("line"),ke.select("line").attr("x1",$.c2p(D.gauge.threshold.value)).attr("x2",$.c2p(D.gauge.threshold.value)).attr("y1",(1-D.gauge.threshold.thickness)/2*Y).attr("y2",(1-(1-D.gauge.threshold.thickness)/2)*Y).call(x.stroke,D.gauge.threshold.line.color).style("stroke-width",D.gauge.threshold.line.width),ke.exit().remove();var we=N.selectAll("g.gauge-outline").data([oe]);we.enter().append("g").classed("gauge-outline",!0).append("rect"),we.select("rect").call(re).call(M),we.exit().remove()}(O,0,X,{gauge:be,layer:Le,size:H,gaugeBg:xe,gaugeOutline:ke,transitionOpts:F,onComplete:U});var De=ne.selectAll("text.title").data(X);De.exit().remove(),De.enter().append("text").classed("title",!0),De.attr("text-anchor",function(){return $?S.right:S[se.title.align]}).text(se.title.text).call(t.font,se.title.font).call(a.convertToTspans,O),De.attr("transform",function(){var Ce,ye=H.l+H.w*p[se.title.align],Fe=i.titlePadding,Ke=t.bBox(De.node());return W?(G&&(Ce=se.gauge.axis.visible?t.bBox(de.node()).top-Fe-Ke.bottom:H.t+H.h/2-Y/2-Ke.bottom-Fe),$&&(Ce=j-(Ke.top+Ke.bottom)/2,ye=H.l-i.bulletPadding*H.w)):Ce=se._numbersTop-Fe-Ke.bottom,c(ye,Ce)})})}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"./constants":858,"@plotly/d3":58,"d3-interpolate":116}],862:[function(v,ie,ae){"use strict";var _=v("../../components/colorscale/attributes"),k=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=v("../../plots/template_attributes").hovertemplateAttrs,E=v("../mesh3d/attributes"),e=v("../../plots/attributes"),c=v("../../lib/extend").extendFlat,d=v("../../plot_api/edit_types").overrideAll;var i=ie.exports=d(c({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:m(),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),valuehoverformat:k("value",1),showlegend:c({},e.showlegend,{dflt:!1})},_("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:E.opacity,lightposition:E.lightposition,lighting:E.lighting,flatshading:E.flatshading,contour:E.contour,hoverinfo:c({},e.hoverinfo)}),"calc","nested");i.flatshading.dflt=!0,i.lighting.facenormalsepsilon.dflt=0,i.x.editType=i.y.editType=i.z.editType=i.value.editType="calc+clearAxisTypes",i.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],863:[function(v,ie,ae){"use strict";var _=v("../../components/colorscale/calc"),k=v("../streamtube/calc").processGrid,m=v("../streamtube/calc").filter;ie.exports=function(e,c){c._len=Math.min(c.x.length,c.y.length,c.z.length,c.value.length),c._x=m(c.x,c._len),c._y=m(c.y,c._len),c._z=m(c.z,c._len),c._value=m(c.value,c._len);var d=k(c);c._gridFill=d.fill,c._Xs=d.Xs,c._Ys=d.Ys,c._Zs=d.Zs,c._len=d.len;for(var n=1/0,t=-1/0,i=0;i<c._len;i++){var a=c._value[i];n=Math.min(n,a),t=Math.max(t,a)}c._minValues=n,c._maxValues=t,c._vMin=null==c.isomin?n:c.isomin,c._vMax=void 0===c.isomax||null===c.isomin?t:c.isomax,_(e,c,{vals:[c._vMin,c._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374,"../streamtube/calc":1045}],864:[function(v,ie,ae){"use strict";var _=v("../../../stackgl_modules").gl_mesh3d,k=v("../../lib/gl_format_color").parseColorScale,m=v("../../lib/str2rgbarray"),E=v("../../components/colorscale").extractOpts,e=v("../../plots/gl3d/zip3"),c=function(r,g){for(var s=g.length-1;s>0;s--){var b=Math.min(g[s],g[s-1]),x=Math.max(g[s],g[s-1]);if(x>b&&b<r&&r<=x)return{id:s,distRatio:(x-r)/(x-b)}}return{id:0,distRatio:0}};function d(r,g,s){this.scene=r,this.uid=s,this.mesh=g,this.name="",this.data=null,this.showContour=!1}var n=d.prototype;n.handlePick=function(r){if(r.object===this.mesh){var g=r.data.index,b=this.data._meshY[g],x=this.data._meshZ[g],S=this.data._Ys.length,p=this.data._Zs.length,w=c(this.data._meshX[g],this.data._Xs).id,l=c(b,this.data._Ys).id,y=c(x,this.data._Zs).id,A=r.index=y+p*l+p*S*w;r.traceCoordinate=[this.data._meshX[A],this.data._meshY[A],this.data._meshZ[A],this.data._value[A]];var T=this.data.hovertext||this.data.text;return Array.isArray(T)&&void 0!==T[A]?r.textLabel=T[A]:T&&(r.textLabel=T),!0}},n.update=function(r){var g=this.scene,s=g.fullSceneLayout;function b(l,y,A,T){return y.map(function(M){return l.d2l(M,0,T)*A})}this.data=i(r);var p={positions:e(b(s.xaxis,r._meshX,g.dataScale[0],r.xcalendar),b(s.yaxis,r._meshY,g.dataScale[1],r.ycalendar),b(s.zaxis,r._meshZ,g.dataScale[2],r.zcalendar)),cells:e(r._meshI,r._meshJ,r._meshK),lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,contourEnable:r.contour.show,contourColor:m(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading},w=E(r);p.vertexIntensity=r._meshIntensity,p.vertexIntensityBounds=[w.min,w.max],p.colormap=k(r),this.mesh.update(p)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var t=["xyz","xzy","yxz","yzx","zxy","zyx"];function i(r){r._meshI=[],r._meshJ=[],r._meshK=[];var l,y,F,D,N,U,V,g=r.surface.show,s=r.spaceframe.show,b=r.surface.fill,x=r.spaceframe.fill,S=!1,p=!1,w=0,A=r._Xs,T=r._Ys,M=r._Zs,f=A.length,u=T.length,h=M.length,o=t.indexOf(r._gridFill.replace(/-/g,"").replace(/\+/g,"")),C=function(Et,wt,at){switch(o){case 5:return at+h*wt+h*u*Et;case 4:return at+h*Et+h*f*wt;case 3:return wt+u*at+u*h*Et;case 2:return wt+u*Et+u*f*at;case 1:return Et+f*at+f*h*wt;default:return Et+f*wt+f*u*at}},R=r._minValues,z=r._maxValues,O=r._vMin,I=r._vMax;function X(Et,wt,at){for(var vt=U.length,Qe=y;Qe<vt;Qe++)if(Et===F[Qe]&&wt===D[Qe]&&at===N[Qe])return Qe;return-1}function oe(){y=l}function se(){F=[],D=[],N=[],U=[],l=0,oe()}function ne(Et,wt,at,vt){return F.push(Et),D.push(wt),N.push(at),U.push(vt),++l-1}function W(Et,wt,at){return r._meshI.push(Et),r._meshJ.push(wt),r._meshK.push(at),++w-1}function $(Et,wt,at){for(var vt=[],Qe=0;Qe<Et.length;Qe++)vt[Qe]=Et[Qe]*(1-at)+at*wt[Qe];return vt}function H(Et){V=Et}function K(Et,wt){return"all"===Et||null===Et||Et.indexOf(wt)>-1}function Y(Et,wt){return null===Et?wt:Et}function te(Et,wt,at){oe();var vt=[wt],Qe=[at];if(V>=1)vt=[wt],Qe=[at];else if(V>0){var Pe=function q(Et,wt){var at=Et[0],vt=Et[1],Qe=Et[2],Pe=function G(Et,wt,at){for(var vt=[],Qe=0;Qe<Et.length;Qe++)vt[Qe]=(Et[Qe]+wt[Qe]+at[Qe])/3;return vt}(at,vt,Qe),Ze=Math.sqrt(1-V),Xe=$(Pe,at,Ze),rt=$(Pe,vt,Ze),kt=$(Pe,Qe,Ze),Tt=wt[0],Xt=wt[1],ar=wt[2];return{xyzv:[[at,vt,rt],[rt,Xe,at],[vt,Qe,kt],[kt,rt,vt],[Qe,at,Xe],[Xe,kt,Qe]],abc:[[Tt,Xt,-1],[-1,-1,Tt],[Xt,ar,-1],[-1,-1,Xt],[ar,Tt,-1],[-1,-1,ar]]}}(wt,at);vt=Pe.xyzv,Qe=Pe.abc}for(var Ze=0;Ze<vt.length;Ze++){wt=vt[Ze],at=Qe[Ze];for(var Xe=[],rt=0;rt<3;rt++){var kt=wt[rt][0],Tt=wt[rt][1],Xt=wt[rt][2],ar=wt[rt][3],Ut=at[rt]>-1?at[rt]:X(kt,Tt,Xt);Xe[rt]=Ut>-1?Ut:ne(kt,Tt,Xt,Y(Et,ar))}W(Xe[0],Xe[1],Xe[2])}}function re(Et,wt,at,vt){var Qe=Et[3];Qe<at&&(Qe=at),Qe>vt&&(Qe=vt);for(var Pe=(Et[3]-Qe)/(Et[3]-wt[3]+1e-9),Ze=[],Xe=0;Xe<4;Xe++)Ze[Xe]=(1-Pe)*Et[Xe]+Pe*wt[Xe];return Ze}function le(Et,wt,at){return Et>=wt&&Et<=at}function ge(Et){var wt=.001*(I-O);return Et>=O-wt&&Et<=I+wt}function pe(Et){for(var wt=[],at=0;at<4;at++){var vt=Et[at];wt.push([r._x[vt],r._y[vt],r._z[vt],r._value[vt]])}return wt}function ke(Et,wt,at,vt,Qe,Pe){Pe||(Pe=1),at=[-1,-1,-1];var Ze=!1,Xe=[le(wt[0][3],vt,Qe),le(wt[1][3],vt,Qe),le(wt[2][3],vt,Qe)];if(!Xe[0]&&!Xe[1]&&!Xe[2])return!1;var rt=function(Tt,Xt,ar){return ge(Xt[0][3])&&ge(Xt[1][3])&&ge(Xt[2][3])?(te(Tt,Xt,ar),!0):Pe<3&&ke(Tt,Xt,ar,O,I,++Pe)};if(Xe[0]&&Xe[1]&&Xe[2])return rt(Et,wt,at)||Ze;var kt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(Tt){if(Xe[Tt[0]]&&Xe[Tt[1]]&&!Xe[Tt[2]]){var Xt=wt[Tt[0]],ar=wt[Tt[1]],Ut=wt[Tt[2]],Jt=re(Ut,Xt,vt,Qe),nr=re(Ut,ar,vt,Qe);Ze=rt(Et,[nr,Jt,Xt],[-1,-1,at[Tt[0]]])||Ze,Ze=rt(Et,[Xt,ar,nr],[at[Tt[0]],at[Tt[1]],-1])||Ze,kt=!0}}),kt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(Tt){if(Xe[Tt[0]]&&!Xe[Tt[1]]&&!Xe[Tt[2]]){var Xt=wt[Tt[0]],Ut=wt[Tt[2]],Jt=re(wt[Tt[1]],Xt,vt,Qe),nr=re(Ut,Xt,vt,Qe);Ze=rt(Et,[nr,Jt,Xt],[-1,-1,at[Tt[0]]])||Ze,kt=!0}}),Ze}function we(Et,wt,at,vt){var Qe=!1,Pe=pe(wt),Ze=[le(Pe[0][3],at,vt),le(Pe[1][3],at,vt),le(Pe[2][3],at,vt),le(Pe[3][3],at,vt)];if(!(Ze[0]||Ze[1]||Ze[2]||Ze[3]))return Qe;if(Ze[0]&&Ze[1]&&Ze[2]&&Ze[3])return p&&(Qe=function j(Et,wt,at){var vt=function(Qe,Pe,Ze){te(Et,[wt[Qe],wt[Pe],wt[Ze]],[at[Qe],at[Pe],at[Ze]])};vt(0,1,2),vt(3,0,1),vt(2,3,0),vt(1,2,3)}(Et,Pe,wt)||Qe),Qe;var Xe=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(rt){if(Ze[rt[0]]&&Ze[rt[1]]&&Ze[rt[2]]&&!Ze[rt[3]]){var kt=Pe[rt[0]],Tt=Pe[rt[1]],Xt=Pe[rt[2]],ar=Pe[rt[3]];if(p)Qe=te(Et,[kt,Tt,Xt],[wt[rt[0]],wt[rt[1]],wt[rt[2]]])||Qe;else{var Ut=re(ar,kt,at,vt),Jt=re(ar,Tt,at,vt),nr=re(ar,Xt,at,vt);Qe=te(null,[Ut,Jt,nr],[-1,-1,-1])||Qe}Xe=!0}}),Xe||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(rt){if(Ze[rt[0]]&&Ze[rt[1]]&&!Ze[rt[2]]&&!Ze[rt[3]]){var kt=Pe[rt[0]],Tt=Pe[rt[1]],Xt=Pe[rt[2]],ar=Pe[rt[3]],Ut=re(Xt,kt,at,vt),Jt=re(Xt,Tt,at,vt),nr=re(ar,Tt,at,vt),rr=re(ar,kt,at,vt);p?(Qe=te(Et,[kt,rr,Ut],[wt[rt[0]],-1,-1])||Qe,Qe=te(Et,[Tt,Jt,nr],[wt[rt[1]],-1,-1])||Qe):Qe=function J(Et,wt,at){var vt=function(Qe,Pe,Ze){te(Et,[wt[Qe],wt[Pe],wt[Ze]],[at[Qe],at[Pe],at[Ze]])};vt(0,1,2),vt(2,3,0)}(null,[Ut,Jt,nr,rr],[-1,-1,-1,-1])||Qe,Xe=!0}}),Xe)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(rt){if(Ze[rt[0]]&&!Ze[rt[1]]&&!Ze[rt[2]]&&!Ze[rt[3]]){var kt=Pe[rt[0]],Xt=Pe[rt[2]],ar=Pe[rt[3]],Ut=re(Pe[rt[1]],kt,at,vt),Jt=re(Xt,kt,at,vt),nr=re(ar,kt,at,vt);p?(Qe=te(Et,[kt,Ut,Jt],[wt[rt[0]],-1,-1])||Qe,Qe=te(Et,[kt,Jt,nr],[wt[rt[0]],-1,-1])||Qe,Qe=te(Et,[kt,nr,Ut],[wt[rt[0]],-1,-1])||Qe):Qe=te(null,[Ut,Jt,nr],[-1,-1,-1])||Qe,Xe=!0}}),Qe}function de(Et,wt,at,vt,Qe,Pe,Ze,Xe,rt,kt,Tt){var Xt=!1;return S&&(K(Et,"A")&&(Xt=we(null,[wt,at,vt,Pe],kt,Tt)||Xt),K(Et,"B")&&(Xt=we(null,[at,vt,Qe,rt],kt,Tt)||Xt),K(Et,"C")&&(Xt=we(null,[at,Pe,Ze,rt],kt,Tt)||Xt),K(Et,"D")&&(Xt=we(null,[vt,Pe,Xe,rt],kt,Tt)||Xt),K(Et,"E")&&(Xt=we(null,[at,vt,Pe,rt],kt,Tt)||Xt)),p&&(Xt=we(Et,[at,vt,Pe,rt],kt,Tt)||Xt),Xt}function be(Et,wt,at,vt,Qe,Pe,Ze,Xe){return[!0===Xe[0]||ke(Et,pe([wt,at,vt]),[wt,at,vt],Pe,Ze),!0===Xe[1]||ke(Et,pe([vt,Qe,wt]),[vt,Qe,wt],Pe,Ze)]}function Le(Et,wt,at,vt,Qe,Pe,Ze,Xe,rt){return Xe?be(Et,wt,at,Qe,vt,Pe,Ze,rt):be(Et,at,Qe,vt,wt,Pe,Ze,rt)}function De(Et,wt,at,vt,Qe,Pe,Ze){var rt,kt,Tt,Xt,Xe=!1,ar=function(){Xe=ke(Et,[rt,kt,Tt],[-1,-1,-1],Qe,Pe)||Xe,Xe=ke(Et,[Tt,Xt,rt],[-1,-1,-1],Qe,Pe)||Xe},Ut=Ze[0],Jt=Ze[1],nr=Ze[2];return Ut&&(rt=$(pe([C(wt,at-0,vt-0)])[0],pe([C(wt-1,at-0,vt-0)])[0],Ut),kt=$(pe([C(wt,at-0,vt-1)])[0],pe([C(wt-1,at-0,vt-1)])[0],Ut),Tt=$(pe([C(wt,at-1,vt-1)])[0],pe([C(wt-1,at-1,vt-1)])[0],Ut),Xt=$(pe([C(wt,at-1,vt-0)])[0],pe([C(wt-1,at-1,vt-0)])[0],Ut),ar()),Jt&&(rt=$(pe([C(wt-0,at,vt-0)])[0],pe([C(wt-0,at-1,vt-0)])[0],Jt),kt=$(pe([C(wt-0,at,vt-1)])[0],pe([C(wt-0,at-1,vt-1)])[0],Jt),Tt=$(pe([C(wt-1,at,vt-1)])[0],pe([C(wt-1,at-1,vt-1)])[0],Jt),Xt=$(pe([C(wt-1,at,vt-0)])[0],pe([C(wt-1,at-1,vt-0)])[0],Jt),ar()),nr&&(rt=$(pe([C(wt-0,at-0,vt)])[0],pe([C(wt-0,at-0,vt-1)])[0],nr),kt=$(pe([C(wt-0,at-1,vt)])[0],pe([C(wt-0,at-1,vt-1)])[0],nr),Tt=$(pe([C(wt-1,at-1,vt)])[0],pe([C(wt-1,at-1,vt-1)])[0],nr),Xt=$(pe([C(wt-1,at-0,vt)])[0],pe([C(wt-1,at-0,vt-1)])[0],nr),ar()),Xe}function ye(Et,wt,at,vt,Qe,Pe,Ze,Xe,rt,kt,Tt,Xt){var ar=Et;return Xt?(S&&"even"===Et&&(ar=null),de(ar,wt,at,vt,Qe,Pe,Ze,Xe,rt,kt,Tt)):(S&&"odd"===Et&&(ar=null),de(ar,rt,Xe,Ze,Pe,Qe,vt,at,wt,kt,Tt))}function Ce(Et,wt,at,vt,Qe){for(var Pe=[],Ze=0,Xe=0;Xe<wt.length;Xe++)for(var rt=wt[Xe],kt=1;kt<h;kt++)for(var Tt=1;Tt<u;Tt++)Pe.push(Le(Et,C(rt,Tt-1,kt-1),C(rt,Tt-1,kt),C(rt,Tt,kt-1),C(rt,Tt,kt),at,vt,(rt+Tt+kt)%2,Qe&&Qe[Ze]?Qe[Ze]:[])),Ze++;return Pe}function Fe(Et,wt,at,vt,Qe){for(var Pe=[],Ze=0,Xe=0;Xe<wt.length;Xe++)for(var rt=wt[Xe],kt=1;kt<f;kt++)for(var Tt=1;Tt<h;Tt++)Pe.push(Le(Et,C(kt-1,rt,Tt-1),C(kt,rt,Tt-1),C(kt-1,rt,Tt),C(kt,rt,Tt),at,vt,(kt+rt+Tt)%2,Qe&&Qe[Ze]?Qe[Ze]:[])),Ze++;return Pe}function Ke(Et,wt,at,vt,Qe){for(var Pe=[],Ze=0,Xe=0;Xe<wt.length;Xe++)for(var rt=wt[Xe],kt=1;kt<u;kt++)for(var Tt=1;Tt<f;Tt++)Pe.push(Le(Et,C(Tt-1,kt-1,rt),C(Tt-1,kt,rt),C(Tt,kt-1,rt),C(Tt,kt,rt),at,vt,(Tt+kt+rt)%2,Qe&&Qe[Ze]?Qe[Ze]:[])),Ze++;return Pe}function Ue(Et,wt,at){for(var vt=1;vt<h;vt++)for(var Qe=1;Qe<u;Qe++)for(var Pe=1;Pe<f;Pe++)ye(Et,C(Pe-1,Qe-1,vt-1),C(Pe-1,Qe-1,vt),C(Pe-1,Qe,vt-1),C(Pe-1,Qe,vt),C(Pe,Qe-1,vt-1),C(Pe,Qe-1,vt),C(Pe,Qe,vt-1),C(Pe,Qe,vt),wt,at,(Pe+Qe+vt)%2)}function Ie(Et,wt,at){S=!0,Ue(Et,wt,at),S=!1}function nt(Et,wt,at,vt,Qe,Pe){for(var Ze=[],rt=0;rt<wt.length;rt++)for(var kt=wt[rt],Tt=1;Tt<h;Tt++)for(var Xt=1;Xt<u;Xt++)Ze.push(De(Et,kt,Xt,Tt,at,vt,Qe[rt]));return Ze}function gt(Et,wt,at,vt,Qe,Pe){for(var Ze=[],rt=0;rt<wt.length;rt++)for(var kt=wt[rt],Tt=1;Tt<f;Tt++)for(var Xt=1;Xt<h;Xt++)Ze.push(De(Et,Tt,kt,Xt,at,vt,Qe[rt]));return Ze}function Nt(Et,wt,at,vt,Qe,Pe){for(var Ze=[],rt=0;rt<wt.length;rt++)for(var kt=wt[rt],Tt=1;Tt<u;Tt++)for(var Xt=1;Xt<f;Xt++)Ze.push(De(Et,Xt,Tt,kt,at,vt,Qe[rt]));return Ze}function St(Et,wt){for(var at=[],vt=Et;vt<wt;vt++)at.push(vt);return at}return function Zt(){se(),function Bt(){for(var Et=0;Et<f;Et++)for(var wt=0;wt<u;wt++)for(var at=0;at<h;at++){var vt=C(Et,wt,at);ne(r._x[vt],r._y[vt],r._z[vt],r._value[vt])}}();var Et=null;if(s&&x&&(H(x),function Be(Et,wt,at){p=!0,Ue(Et,wt,at),p=!1}(Et,O,I)),g&&b){H(b);for(var wt=r.surface.pattern,at=r.surface.count,vt=0;vt<at;vt++){var Qe=1===at?.5:vt/(at-1),Pe=(1-Qe)*O+Qe*I,rt=Math.abs(Pe-R)>Math.abs(Pe-z)?[R,Pe]:[Pe,z];Ie(wt,rt[0],rt[1])}}var kt=[[Math.min(O,z),Math.max(O,z)],[Math.min(R,I),Math.max(R,I)]];["x","y","z"].forEach(function(Tt){for(var Xt=[],ar=0;ar<kt.length;ar++){var Ut=0,Jt=kt[ar][0],nr=kt[ar][1],rr=r.slices[Tt];if(rr.show&&rr.fill){H(rr.fill);var br=[],Hr=[],on=[];if(rr.locations.length)for(var jr=0;jr<rr.locations.length;jr++){var et=c(rr.locations[jr],"x"===Tt?A:"y"===Tt?T:M);0===et.distRatio?br.push(et.id):et.id>0&&(Hr.push(et.id),on.push("x"===Tt?[et.distRatio,0,0]:"y"===Tt?[0,et.distRatio,0]:[0,0,et.distRatio]))}else br=St(1,"x"===Tt?f-1:"y"===Tt?u-1:h-1);Hr.length>0&&(Xt[Ut]="x"===Tt?nt(Et,Hr,Jt,nr,on):"y"===Tt?gt(Et,Hr,Jt,nr,on):Nt(Et,Hr,Jt,nr,on),Ut++),br.length>0&&(Xt[Ut]="x"===Tt?Ce(Et,br,Jt,nr,Xt[Ut]):"y"===Tt?Fe(Et,br,Jt,nr,Xt[Ut]):Ke(Et,br,Jt,nr,Xt[Ut]),Ut++)}var Yt=r.caps[Tt];Yt.show&&Yt.fill&&(H(Yt.fill),Xt[Ut]="x"===Tt?Ce(Et,[0,f-1],Jt,nr,Xt[Ut]):"y"===Tt?Fe(Et,[0,u-1],Jt,nr,Xt[Ut]):Ke(Et,[0,h-1],Jt,nr,Xt[Ut]),Ut++)}}),0===w&&se(),r._meshX=F,r._meshY=D,r._meshZ=N,r._meshIntensity=U,r._Xs=A,r._Ys=T,r._Zs=M}(),r}ie.exports={findNearestOnAxis:c,generateIsoMeshes:i,createIsosurfaceTrace:function a(r,g){var b=_({gl:r.glplot.gl}),x=new d(r,b,g.uid);return b._trace=x,x.update(g),r.glplot.add(b),x}}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],865:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../registry"),m=v("./attributes"),E=v("../../components/colorscale/defaults");function c(d,n,t,i,a){var r=a("isomin"),g=a("isomax");null!=g&&null!=r&&r>g&&(n.isomin=null,n.isomax=null);var s=a("x"),b=a("y"),x=a("z"),S=a("value");s&&s.length&&b&&b.length&&x&&x.length&&S&&S.length?(k.getComponentMethod("calendars","handleTraceDefaults")(d,n,["x","y","z"],i),a("valuehoverformat"),["x","y","z"].forEach(function(A){a(A+"hoverformat");var T="caps."+A;a(T+".show")&&a(T+".fill");var f="slices."+A;a(f+".show")&&(a(f+".fill"),a(f+".locations"))}),a("spaceframe.show")&&a("spaceframe.fill"),a("surface.show")&&(a("surface.count"),a("surface.fill"),a("surface.pattern")),a("contour.show")&&(a("contour.color"),a("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(A){a(A)}),E(d,n,i,a,{prefix:"",cLetter:"c"}),n._length=null):n.visible=!1}ie.exports={supplyDefaults:function e(d,n,t,i){c(d,n,0,i,function a(r,g){return _.coerce(d,n,m,r,g)})},supplyIsoDefaults:c}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":862}],866:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults").supplyDefaults,calc:v("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:v("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":862,"./calc":863,"./convert":864,"./defaults":865}],867:[function(v,ie,ae){"use strict";var _=v("../../components/colorscale/attributes"),k=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=v("../../plots/template_attributes").hovertemplateAttrs,E=v("../surface/attributes"),e=v("../../plots/attributes"),c=v("../../lib/extend").extendFlat;ie.exports=c({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:m({editType:"calc"}),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},_("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:E.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:c({},E.contours.x.show,{}),color:E.contours.x.color,width:E.contours.x.width,editType:"calc"},lightposition:{x:c({},E.lightposition.x,{dflt:1e5}),y:c({},E.lightposition.y,{dflt:1e5}),z:c({},E.lightposition.z,{dflt:0}),editType:"calc"},lighting:c({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},E.lighting),hoverinfo:c({},e.hoverinfo,{editType:"calc"}),showlegend:c({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../surface/attributes":1061}],868:[function(v,ie,ae){"use strict";var _=v("../../components/colorscale/calc");ie.exports=function(m,E){E.intensity&&_(m,E,{vals:E.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],869:[function(v,ie,ae){"use strict";var _=v("../../../stackgl_modules").gl_mesh3d,k=v("../../../stackgl_modules").delaunay_triangulate,m=v("../../../stackgl_modules").alpha_shape,E=v("../../../stackgl_modules").convex_hull,e=v("../../lib/gl_format_color").parseColorScale,c=v("../../lib/str2rgbarray"),d=v("../../components/colorscale").extractOpts,n=v("../../plots/gl3d/zip3");function t(S,p,w){this.scene=S,this.uid=w,this.mesh=p,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var i=t.prototype;function a(S){for(var p=[],w=S.length,l=0;l<w;l++)p[l]=c(S[l]);return p}function r(S,p,w,l){for(var y=[],A=p.length,T=0;T<A;T++)y[T]=S.d2l(p[T],0,l)*w;return y}function g(S){for(var p=[],w=S.length,l=0;l<w;l++)p[l]=Math.round(S[l]);return p}function b(S,p){for(var w=S.length,l=0;l<w;l++)if(S[l]<=-.5||S[l]>=p-.5)return!1;return!0}i.handlePick=function(S){if(S.object===this.mesh){var p=S.index=S.data.index;S.traceCoordinate=S.data._cellCenter?S.data.dataCoordinate:[this.data.x[p],this.data.y[p],this.data.z[p]];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&void 0!==w[p]?S.textLabel=w[p]:w&&(S.textLabel=w),!0}},i.update=function(S){var p=this.scene,w=p.fullSceneLayout;this.data=S;var A,l=S.x.length,y=n(r(w.xaxis,S.x,p.dataScale[0],S.xcalendar),r(w.yaxis,S.y,p.dataScale[1],S.ycalendar),r(w.zaxis,S.z,p.dataScale[2],S.zcalendar));if(S.i&&S.j&&S.k){if(S.i.length!==S.j.length||S.j.length!==S.k.length||!b(S.i,l)||!b(S.j,l)||!b(S.k,l))return;A=n(g(S.i),g(S.j),g(S.k))}else A=0===S.alphahull?E(y):S.alphahull>0?m(S.alphahull,y):function s(S,p){for(var w=["x","y","z"].indexOf(S),l=[],y=p.length,A=0;A<y;A++)l[A]=[p[A][(w+1)%3],p[A][(w+2)%3]];return k(l)}(S.delaunayaxis,y);var T={positions:y,cells:A,lightPosition:[S.lightposition.x,S.lightposition.y,S.lightposition.z],ambient:S.lighting.ambient,diffuse:S.lighting.diffuse,specular:S.lighting.specular,roughness:S.lighting.roughness,fresnel:S.lighting.fresnel,vertexNormalsEpsilon:S.lighting.vertexnormalsepsilon,faceNormalsEpsilon:S.lighting.facenormalsepsilon,opacity:S.opacity,contourEnable:S.contour.show,contourColor:c(S.contour.color).slice(0,3),contourWidth:S.contour.width,useFacetNormals:S.flatshading};if(S.intensity){var M=d(S);this.color="#fff";var f=S.intensitymode;T[f+"Intensity"]=S.intensity,T[f+"IntensityBounds"]=[M.min,M.max],T.colormap=e(S)}else S.vertexcolor?(this.color=S.vertexcolor[0],T.vertexColors=a(S.vertexcolor)):S.facecolor?(this.color=S.facecolor[0],T.cellColors=a(S.facecolor)):(this.color=S.color,T.meshColor=c(S.color));this.mesh.update(T)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ie.exports=function x(S,p){var l=_({gl:S.glplot.gl}),y=new t(S,l,p.uid);return l._trace=y,y.update(p),S.glplot.add(l),y}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],870:[function(v,ie,ae){"use strict";var _=v("../../registry"),k=v("../../lib"),m=v("../../components/colorscale/defaults"),E=v("./attributes");ie.exports=function(c,d,n,t){function i(b,x){return k.coerce(c,d,E,b,x)}function a(b){var x=b.map(function(S){var p=i(S);return p&&k.isArrayOrTypedArray(p)?p:null});return x.every(function(S){return S&&S.length===x[0].length})&&x}a(["x","y","z"])?(a(["i","j","k"]),(!d.i||d.j&&d.k)&&(!d.j||d.k&&d.i)&&(!d.k||d.i&&d.j)?(_.getComponentMethod("calendars","handleTraceDefaults")(c,d,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(b){i(b)}),i("contour.show")&&(i("contour.color"),i("contour.width")),"intensity"in c?(i("intensity"),i("intensitymode"),m(c,d,t,i,{prefix:"",cLetter:"c"})):(d.showscale=!1,"facecolor"in c?i("facecolor"):"vertexcolor"in c?i("vertexcolor"):i("color",n)),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),d._length=null):d.visible=!1):d.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":867}],871:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:v("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":867,"./calc":868,"./convert":869,"./defaults":870}],872:[function(v,ie,ae){"use strict";var _=v("../../lib").extendFlat,k=v("../scatter/attributes"),m=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,E=v("../../components/drawing/attributes").dash,e=v("../../components/fx/attributes"),c=v("../../constants/delta.js"),d=c.INCREASING.COLOR,n=c.DECREASING.COLOR,t=k.line;function i(a){return{line:{color:_({},t.color,{dflt:a}),width:t.width,dash:E,editType:"style"},editType:"style"}}ie.exports={xperiod:k.xperiod,xperiod0:k.xperiod0,xperiodalignment:k.xperiodalignment,xhoverformat:m("x"),yhoverformat:m("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:_({},t.width,{}),dash:_({},E,{}),editType:"style"},increasing:i(d),decreasing:i(n),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:_({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":387,"../../components/fx/attributes":397,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":927}],873:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=_._,m=v("../../plots/cartesian/axes"),E=v("../../plots/cartesian/align_period"),e=v("../../constants/numerical").BADNUM;function d(i,a,r,g){return{o:i,h:a,l:r,c:g}}function n(i,a,r,g,s,b){for(var x=s.makeCalcdata(a,"open"),S=s.makeCalcdata(a,"high"),p=s.makeCalcdata(a,"low"),w=s.makeCalcdata(a,"close"),l=Array.isArray(a.text),y=Array.isArray(a.hovertext),A=!0,T=null,M=!!a.xperiodalignment,f=[],u=0;u<g.length;u++){var h=g[u],o=x[u],C=S[u],R=p[u],z=w[u];if(h!==e&&o!==e&&C!==e&&R!==e&&z!==e){z===o?null!==T&&z!==T&&(A=z>T):A=z>o,T=z;var O=b(o,C,R,z);O.pos=h,O.yc=(o+z)/2,O.i=u,O.dir=A?"increasing":"decreasing",O.x=O.pos,O.y=[R,C],M&&(O.orig_p=r[u]),l&&(O.tx=a.text[u]),y&&(O.htx=a.hovertext[u]),f.push(O)}else f.push({pos:h,empty:!0})}return a._extremes[s._id]=m.findExtremes(s,_.concat(p,S),{padded:!0}),f.length&&(f[0].t={labels:{open:k(i,"open:")+" ",high:k(i,"high:")+" ",low:k(i,"low:")+" ",close:k(i,"close:")+" "}}),f}ie.exports={calc:function c(i,a){var r=m.getFromId(i,a.xaxis),g=m.getFromId(i,a.yaxis),s=function t(i,a,r){var g=r._minDiff;if(!g){var x,s=i._fullData,b=[];for(g=1/0,x=0;x<s.length;x++){var S=s[x];if("ohlc"===S.type&&!0===S.visible&&S.xaxis===a._id){b.push(S);var p=a.makeCalcdata(S,"x");S._origX=p;var w=E(r,a,"x",p).vals;S._xcalc=w;var l=_.distinctVals(w).minDiff;l&&isFinite(l)&&(g=Math.min(g,l))}}for(g===1/0&&(g=1),x=0;x<b.length;x++)b[x]._minDiff=g}return g*r.tickwidth}(i,r,a),b=a._minDiff;a._minDiff=null;var x=a._origX;a._origX=null;var S=a._xcalc;a._xcalc=null;var p=n(i,a,x,S,g,d);return a._extremes[r._id]=m.findExtremes(r,S,{vpad:b/2}),p.length?(_.extendFlat(p[0].t,{wHover:b/2,tickLen:s}),p):[{t:{empty:!0}}]},calcCommon:n}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554}],874:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./ohlc_defaults"),m=v("../scatter/period_defaults"),E=v("./attributes");function e(c,d,n,t){n(t+".line.color"),n(t+".line.width",d.line.width),n(t+".line.dash",d.line.dash)}ie.exports=function(d,n,t,i){function a(g,s){return _.coerce(d,n,E,g,s)}k(d,n,a,i)?(m(d,n,i,a,{x:!0}),a("xhoverformat"),a("yhoverformat"),a("line.width"),a("line.dash"),e(0,n,a,"increasing"),e(0,n,a,"decreasing"),a("text"),a("hovertext"),a("tickwidth"),i._requestRangeslider[n.xaxis]=!0):n.visible=!1}},{"../../lib":503,"../scatter/period_defaults":947,"./attributes":872,"./ohlc_defaults":877}],875:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/axes"),k=v("../../lib"),m=v("../../components/fx"),E=v("../../components/color"),e=v("../../lib").fillText,c=v("../../constants/delta.js"),d={increasing:c.INCREASING.SYMBOL,decreasing:c.DECREASING.SYMBOL};function t(r,g,s,b){var T,M,x=r.cd,S=r.xa,p=x[0].trace,w=x[0].t,l=p.type,y="ohlc"===l?"l":"min",A="ohlc"===l?"h":"max",f=w.bPos||0,h=w.bdPos||w.tickLen,o=w.wHover,C=Math.min(1,h/Math.abs(S.r2c(S.range[1])-S.r2c(S.range[0])));function R(X){var oe=function(X){return X.pos+f-g}(X);return m.inbox(oe-o,oe+o,T)}function z(X){var oe=X[y],se=X[A];return oe===se||m.inbox(oe-s,se-s,T)}function O(X){return(R(X)+z(X))/2}T=r.maxHoverDistance-C,M=r.maxSpikeDistance-C;var I=m.getDistanceFunction(b,R,z,O);if(m.getClosest(x,I,r),!1===r.index)return null;var F=x[r.index];if(F.empty)return null;var N=p[F.dir],U=N.line.color;return r.color=E.opacity(U)&&N.line.width?U:N.fillcolor,r.x0=S.c2p(F.pos+f-h,!0),r.x1=S.c2p(F.pos+f+h,!0),r.xLabelVal=void 0!==F.orig_p?F.orig_p:F.pos,r.spikeDistance=O(F)*M/T,r.xSpike=S.c2p(F.pos,!0),r}function i(r,g,s,b){var x=r.cd,S=r.ya,p=x[0].trace,w=x[0].t,l=[],y=t(r,g,s,b);if(!y)return[];var M=x[y.index].hi||p.hoverinfo,f=M.split("+");if("all"!==M&&-1===f.indexOf("y"))return[];for(var o=["high","open","close","low"],C={},R=0;R<o.length;R++){var F,z=o[R],O=p[z][y.index],I=S.c2p(O,!0);O in C?(F=C[O]).yLabel+="<br>"+w.labels[z]+_.hoverLabelText(S,O,p.yhoverformat):((F=k.extendFlat({},y)).y0=F.y1=I,F.yLabelVal=O,F.yLabel=w.labels[z]+_.hoverLabelText(S,O,p.yhoverformat),F.name="",l.push(F),C[O]=F)}return l}function a(r,g,s,b){var x=r.cd,S=r.ya,p=x[0].trace,w=x[0].t,l=t(r,g,s,b);if(!l)return[];var A=x[l.index],T=l.index=A.i,M=A.dir;function f(O){return w.labels[O]+_.hoverLabelText(S,p[O][T],p.yhoverformat)}var u=A.hi||p.hoverinfo,h=u.split("+"),o="all"===u,C=o||-1!==h.indexOf("y"),R=o||-1!==h.indexOf("text"),z=C?[f("open"),f("high"),f("low"),f("close")+"  "+d[M]]:[];return R&&e(A,p,z),l.extraText=z.join("<br>"),l.y0=l.y1=S.c2p(A.yc,!0),[l]}ie.exports={hoverPoints:function n(r,g,s,b){return r.cd[0].trace.hoverlabel.split?i(r,g,s,b):a(r,g,s,b)},hoverSplit:i,hoverOnPoints:a}},{"../../components/color":366,"../../components/fx":406,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axes":554}],876:[function(v,ie,ae){"use strict";ie.exports={moduleType:"trace",name:"ohlc",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc").calc,plot:v("./plot"),style:v("./style"),hoverPoints:v("./hover").hoverPoints,selectPoints:v("./select")}},{"../../plots/cartesian":568,"./attributes":872,"./calc":873,"./defaults":874,"./hover":875,"./plot":878,"./select":879,"./style":880}],877:[function(v,ie,ae){"use strict";var _=v("../../registry"),k=v("../../lib");ie.exports=function(E,e,c,d){var n=c("x"),t=c("open"),i=c("high"),a=c("low"),r=c("close");if(c("hoverlabel.split"),_.getComponentMethod("calendars","handleTraceDefaults")(E,e,["x"],d),t&&i&&a&&r){var s=Math.min(t.length,i.length,a.length,r.length);return n&&(s=Math.min(s,k.minRowLength(n))),e._length=s,s}}},{"../../lib":503,"../../registry":638}],878:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../lib");ie.exports=function(E,e,c,d){var n=e.yaxis,t=e.xaxis,i=!!t.rangebreaks;k.makeTraceGroups(d,c,"trace ohlc").each(function(a){var r=_.select(this),g=a[0],s=g.t;if(!0!==g.trace.visible||s.empty)r.remove();else{var x=s.tickLen,S=r.selectAll("path").data(k.identity);S.enter().append("path"),S.exit().remove(),S.attr("d",function(p){if(p.empty)return"M0,0Z";var w=t.c2p(p.pos-x,!0),l=t.c2p(p.pos+x,!0),y=i?(w+l)/2:t.c2p(p.pos,!0);return"M"+w+","+n.c2p(p.o,!0)+"H"+y+"M"+y+","+n.c2p(p.h,!0)+"V"+n.c2p(p.l,!0)+"M"+l+","+n.c2p(p.c,!0)+"H"+y})}})}},{"../../lib":503,"@plotly/d3":58}],879:[function(v,ie,ae){"use strict";ie.exports=function(k,m){var n,E=k.cd,e=k.xaxis,c=k.yaxis,d=[],t=E[0].t.bPos||0;if(!1===m)for(n=0;n<E.length;n++)E[n].selected=0;else for(n=0;n<E.length;n++){var i=E[n];m.contains([e.c2p(i.pos+t),c.c2p(i.yc)],null,i.i,k)?(d.push({pointNumber:i.i,x:e.c2d(i.pos),y:c.c2d(i.yc)}),i.selected=1):i.selected=0}return d}},{}],880:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../components/drawing"),m=v("../../components/color");ie.exports=function(e,c,d){var n=d||_.select(e).selectAll("g.ohlclayer").selectAll("g.trace");n.style("opacity",function(t){return t[0].trace.opacity}),n.each(function(t){var i=t[0].trace;_.select(this).selectAll("path").each(function(a){if(!a.empty){var r=i[a.dir].line;_.select(this).style("fill","none").call(m.stroke,r.color).call(k.dashLine,r.dash,r.width).style("opacity",i.selectedpoints&&!a.selected?.3:1)}})})}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],881:[function(v,ie,ae){"use strict";var _=v("../../lib/extend").extendFlat,k=v("../../plots/attributes"),m=v("../../plots/font_attributes"),E=v("../../components/colorscale/attributes"),e=v("../../plots/template_attributes").hovertemplateAttrs,c=v("../../plots/domain").attributes,d=_({editType:"calc"},E("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});ie.exports={domain:c({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:_({},k.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:m({editType:"calc"}),tickfont:m({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:d,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],882:[function(v,ie,ae){"use strict";var _=v("../../plots/get_data").getModuleCalcData,k=v("./plot"),m="parcats";ae.name=m,ae.plot=function(E,e,c,d){var n=_(E.calcdata,m);n.length&&k(E,n[0],c,d)},ae.clean=function(E,e,c,d){var n=d._has&&d._has("parcats"),t=e._has&&e._has("parcats");n&&!t&&d._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":593,"./plot":887}],883:[function(v,ie,ae){"use strict";var _=v("../../lib/gup").wrap,k=v("../../components/colorscale/helpers").hasColorscale,m=v("../../components/colorscale/calc"),E=v("../../lib/filter_unique.js"),e=v("../../components/drawing"),c=v("../../lib"),d=v("fast-isnumeric");function i(p,w,l,y){return{dimensionInd:p,categoryInd:w,categoryValue:l,displayInd:w,categoryLabel:y,valueInds:[],count:0,dragY:null}}function a(p,w,l){p.valueInds.push(w),p.count+=l}function r(p,w,l){return{categoryInds:p,color:w,rawColor:l,valueInds:[],count:0}}function g(p,w,l){p.valueInds.push(w),p.count+=l}function b(p){var l;if(function S(p){for(var w=new Array(p.length),l=0;l<p.length;l++){if(p[l]<0||p[l]>=p.length||void 0!==w[p[l]])return!1;w[p[l]]=!0}return!0}(p.map(function(y){return y.displayindex})))for(l=0;l<p.length;l++)p[l]._displayindex=p[l].displayindex;else for(l=0;l<p.length;l++)p[l]._displayindex=l}ie.exports=function(w,l){var y=c.filterVisible(l.dimensions);if(0===y.length)return[];var T,M,f,A=y.map(function(G){var $;if("trace"===G.categoryorder)$=null;else if("array"===G.categoryorder)$=G.categoryarray;else{$=E(G.values);for(var V=!0,H=0;H<$.length;H++)if(!d($[H])){V=!1;break}$.sort(V?c.sorterAsc:void 0),"category descending"===G.categoryorder&&($=$.reverse())}return function s(p,w){w=null==w?[]:w.map(function(h){return h});var l={},y={},A=[];w.forEach(function(h,o){l[h]=0,y[h]=o});for(var T=0;T<p.length;T++){var f,M=p[T];void 0===l[M]?(l[M]=1,f=w.push(M)-1,y[M]=f):(l[M]++,f=y[M]),A.push(f)}var u=w.map(function(h){return l[h]});return{uniqueValues:w,uniqueCounts:u,inds:A}}(G.values,$)});T=c.isArrayOrTypedArray(l.counts)?l.counts:[l.counts],b(y),y.forEach(function(G,$){!function x(p,w){p._categoryarray=w.uniqueValues,p._ticktext=null==p.ticktext?[]:p.ticktext.slice();for(var l=p._ticktext.length;l<w.uniqueValues.length;l++)p._ticktext.push(w.uniqueValues[l])}(G,A[$])});var h,u=l.line;u?(k(l,"line")&&m(w,l,{vals:l.line.color,containerStr:"line",cLetter:"c"}),h=e.tryColorscale(u)):h=c.identity;var O,I,G,$,V,C=y[0].values.length,R={},z=A.map(function(G){return G.inds});for(f=0,O=0;O<C;O++){var F=[];for(I=0;I<z.length;I++)F.push(z[I][O]);f+=M=T[O%T.length];var D=(G=O,$=void 0,V=void 0,c.isArrayOrTypedArray(u.color)?V=$=u.color[G%u.color.length]:$=u.color,{color:h($),rawColor:V}),N=F+"-"+D.rawColor;void 0===R[N]&&(R[N]=r(F,D.color,D.rawColor)),g(R[N],O,M)}var U=y.map(function(G,$){return function t(p,w,l,y,A){return{dimensionInd:p,containerInd:w,displayInd:l,dimensionLabel:y,count:A,categories:[],dragX:null}}($,G._index,G._displayindex,G.label,f)});for(O=0;O<C;O++)for(M=T[O%T.length],I=0;I<U.length;I++){var X=U[I].containerInd,oe=A[I].inds[O],se=U[I].categories;void 0===se[oe]&&(se[oe]=i(I,oe,l.dimensions[X]._categoryarray[oe],l.dimensions[X]._ticktext[oe])),a(se[oe],O,M)}return _(function n(p,w,l){var y=p.map(function(A){return A.categories.length}).reduce(function(A,T){return Math.max(A,T)});return{dimensions:p,paths:w,trace:void 0,maxCats:y,count:l}}(U,R,f))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../components/drawing":388,"../../lib":503,"../../lib/filter_unique.js":494,"../../lib/gup":500,"fast-isnumeric":190}],884:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../components/colorscale/helpers").hasColorscale,m=v("../../components/colorscale/defaults"),E=v("../../plots/domain").defaults,e=v("../../plots/array_container_defaults"),c=v("./attributes"),d=v("../parcoords/merge_length");function t(i,a){function r(w,l){return _.coerce(i,a,c.dimensions,w,l)}var g=r("values"),s=r("visible");if(g&&g.length||(s=a.visible=!1),s){r("label"),r("displayindex",a._index);var S,b=i.categoryarray,x=Array.isArray(b)&&b.length>0;x&&(S="array");var p=r("categoryorder",S);"array"===p?(r("categoryarray"),r("ticktext")):(delete i.categoryarray,delete i.ticktext),!x&&"array"===p&&(a.categoryorder="trace")}}ie.exports=function(a,r,g,s){function b(l,y){return _.coerce(a,r,c,l,y)}var x=e(a,r,{name:"dimensions",handleItemDefaults:t}),S=function n(i,a,r,g,s){s("line.shape"),s("line.hovertemplate");var b=s("line.color",g.colorway[0]);if(k(i,"line")&&_.isArrayOrTypedArray(b)){if(b.length)return s("line.colorscale"),m(i,a,g,s,{prefix:"line.",cLetter:"c"}),b.length;a.line.color=r}return 1/0}(a,r,g,s,b);E(r,s,b),(!Array.isArray(x)||!x.length)&&(r.visible=!1),d(r,x,"values",S),b("hoveron"),b("hovertemplate"),b("arrangement"),b("bundlecolors"),b("sortpaths"),b("counts");var p={family:s.font.family,size:Math.round(s.font.size),color:s.font.color};_.coerceFont(b,"labelfont",p);var w={family:s.font.family,size:Math.round(s.font.size/1.2),color:s.font.color};_.coerceFont(b,"tickfont",w)}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/domain":584,"../parcoords/merge_length":898,"./attributes":881}],885:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:v("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":881,"./base_plot":882,"./calc":883,"./defaults":884,"./plot":887}],886:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("d3-interpolate").interpolateNumber,m=v("../../plot_api/plot_api"),E=v("../../components/fx"),e=v("../../lib"),c=e.strTranslate,d=v("../../components/drawing"),n=v("tinycolor2"),t=v("../../lib/svg_text_utils");function i(H,q,K,Y){var te=H.map(ne.bind(0,q,K)),J=Y.selectAll("g.parcatslayer").data([null]);J.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var j=J.selectAll("g.trace.parcats").data(te,a),re=j.enter().append("g").attr("class","trace parcats");j.attr("transform",function(ye){return c(ye.x,ye.y)}),re.append("g").attr("class","paths");var ge=j.select("g.paths").selectAll("path.path").data(function(ye){return ye.paths},a);ge.attr("fill",function(ye){return ye.model.color});var pe=ge.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(ye){return ye.model.color}).attr("fill-opacity",0);w(pe),ge.attr("d",function(ye){return ye.svgD}),pe.empty()||ge.sort(g),ge.exit().remove(),ge.on("mouseover",s).on("mouseout",b).on("click",p),re.append("g").attr("class","dimensions");var ke=j.select("g.dimensions").selectAll("g.dimension").data(function(ye){return ye.dimensions},a);ke.enter().append("g").attr("class","dimension"),ke.attr("transform",function(ye){return c(ye.x,0)}),ke.exit().remove();var we=ke.selectAll("g.category").data(function(ye){return ye.categories},a),de=we.enter().append("g").attr("class","category");we.attr("transform",function(ye){return c(0,ye.y)}),de.append("rect").attr("class","catrect").attr("pointer-events","none"),we.select("rect.catrect").attr("fill","none").attr("width",function(ye){return ye.width}).attr("height",function(ye){return ye.height}),A(de);var be=we.selectAll("rect.bandrect").data(function(ye){return ye.bands},a);be.each(function(){e.raiseToTop(this)}),be.attr("fill",function(ye){return ye.color});var Le=be.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(ye){return ye.color}).attr("fill-opacity",0);be.attr("fill",function(ye){return ye.color}).attr("width",function(ye){return ye.width}).attr("height",function(ye){return ye.height}).attr("y",function(ye){return ye.y}).attr("cursor",function(ye){return"fixed"===ye.parcatsViewModel.arrangement?"default":"perpendicular"===ye.parcatsViewModel.arrangement?"ns-resize":"move"}),M(Le),be.exit().remove(),de.append("text").attr("class","catlabel").attr("pointer-events","none");var De=q._fullLayout.paper_bgcolor;we.select("text.catlabel").attr("text-anchor",function(ye){return r(ye)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",t.makeTextShadow(De)).style("fill","rgb(0, 0, 0)").attr("x",function(ye){return r(ye)?ye.width+5:-5}).attr("y",function(ye){return ye.height/2}).text(function(ye){return ye.model.categoryLabel}).each(function(ye){d.font(_.select(this),ye.parcatsViewModel.categorylabelfont),t.convertToTspans(_.select(this),q)}),de.append("text").attr("class","dimlabel"),we.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(ye){return"fixed"===ye.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(ye){return ye.width/2}).attr("y",-5).text(function(ye,Ce){return 0===Ce?ye.parcatsViewModel.model.dimensions[ye.model.dimensionInd].dimensionLabel:null}).each(function(ye){d.font(_.select(this),ye.parcatsViewModel.labelfont)}),we.selectAll("rect.bandrect").on("mouseover",I).on("mouseout",F),we.exit().remove(),ke.call(_.behavior.drag().origin(function(ye){return{x:ye.x,y:0}}).on("dragstart",D).on("drag",N).on("dragend",U)),j.each(function(ye){ye.traceSelection=_.select(this),ye.pathSelection=_.select(this).selectAll("g.paths").selectAll("path.path"),ye.dimensionSelection=_.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),j.exit().remove()}function a(H){return H.key}function r(H){return H.model.dimensionInd===H.parcatsViewModel.dimensions[H.parcatsViewModel.dimensions.length-1].model.dimensionInd}function g(H,q){return H.model.rawColor>q.model.rawColor?1:H.model.rawColor<q.model.rawColor?-1:0}function s(H){if(!H.parcatsViewModel.dragDimension&&-1===H.parcatsViewModel.hoverinfoItems.indexOf("skip")){e.raiseToTop(this),l(_.select(this));var q=x(H),K=S(H);if(H.parcatsViewModel.graphDiv.emit("plotly_hover",{points:q,event:_.event,constraints:K}),-1===H.parcatsViewModel.hoverinfoItems.indexOf("none")){var ge,pe,xe,Y=_.mouse(this)[0],te=H.parcatsViewModel.graphDiv,J=H.parcatsViewModel.trace,j=te._fullLayout,re=j._paperdiv.node().getBoundingClientRect(),le=H.parcatsViewModel.graphDiv.getBoundingClientRect();for(xe=0;xe<H.leftXs.length-1;xe++)if(H.leftXs[xe]+H.dimWidths[xe]-2<=Y&&Y<=H.leftXs[xe+1]+2){var ke=H.parcatsViewModel.dimensions[xe];ge=(ke.x+ke.width+H.parcatsViewModel.dimensions[xe+1].x)/2,pe=(H.topYs[xe]+H.topYs[xe+1]+H.height)/2;break}var de=H.parcatsViewModel.x+ge,be=H.parcatsViewModel.y+pe,Le=n.mostReadable(H.model.color,["black","white"]),De=H.model.count,ye=De/H.parcatsViewModel.model.count,Ce={countLabel:De,probabilityLabel:ye.toFixed(3)},Fe=[];-1!==H.parcatsViewModel.hoverinfoItems.indexOf("count")&&Fe.push(["Count:",Ce.countLabel].join(" ")),-1!==H.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Fe.push(["P:",Ce.probabilityLabel].join(" "));var Ke=Fe.join("<br>"),Ue=_.mouse(te)[0];E.loneHover({trace:J,x:de-re.left+le.left,y:be-re.top+le.top,text:Ke,color:H.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Le,idealAlign:Ue<de?"right":"left",hovertemplate:(J.line||{}).hovertemplate,hovertemplateLabels:Ce,eventData:[{data:J._input,fullData:J,count:De,probability:ye}]},{container:j._hoverlayer.node(),outerContainer:j._paper.node(),gd:te})}}}function b(H){if(!H.parcatsViewModel.dragDimension&&(w(_.select(this)),E.loneUnhover(H.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),H.parcatsViewModel.pathSelection.sort(g),-1===H.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var q=x(H),K=S(H);H.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:q,event:_.event,constraints:K})}}function x(H){for(var q=[],K=X(H.parcatsViewModel),Y=0;Y<H.model.valueInds.length;Y++)q.push({curveNumber:K,pointNumber:H.model.valueInds[Y]});return q}function S(H){for(var q={},K=H.parcatsViewModel.model.dimensions,Y=0;Y<K.length;Y++){var te=K[Y];q[te.containerInd]=te.categories[H.model.categoryInds[Y]].categoryValue}return void 0!==H.model.rawColor&&(q.color=H.model.rawColor),q}function p(H){if(-1===H.parcatsViewModel.hoverinfoItems.indexOf("skip")){var q=x(H),K=S(H);H.parcatsViewModel.graphDiv.emit("plotly_click",{points:q,event:_.event,constraints:K})}}function w(H){H.attr("fill",function(q){return q.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function l(H){H.attr("fill-opacity",.8).attr("stroke",function(q){return n.mostReadable(q.model.color,["black","white"])}).attr("stroke-width",.3)}function A(H){H.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function M(H){H.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function f(H){var K=H.categoryViewModel.model.dimensionInd,Y=H.categoryViewModel.model.categoryInd;return H.parcatsViewModel.pathSelection.filter(function(te){return te.model.categoryInds[K]===Y&&te.model.color===H.color})}function o(H,q,K){var Y=_.select(H).datum(),te=Y.categoryViewModel.model,J=Y.parcatsViewModel.graphDiv,j=_.select(H.parentNode).selectAll("rect.bandrect"),re=[];j.each(function(ge){f(ge).each(function(xe){Array.prototype.push.apply(re,x(xe))})});var le={};le[te.dimensionInd]=te.categoryValue,J.emit(q,{points:re,event:K,constraints:le})}function C(H,q,K){var Y=_.select(H).datum(),te=Y.categoryViewModel.model,J=Y.parcatsViewModel.graphDiv,j=f(Y),re=[];j.each(function(ge){Array.prototype.push.apply(re,x(ge))});var le={};le[te.dimensionInd]=te.categoryValue,void 0!==Y.rawColor&&(le.color=Y.rawColor),J.emit(q,{points:re,event:K,constraints:le})}function R(H,q,K){H._fullLayout._calcInverseTransform(H);var ke,we,Y=H._fullLayout._invScaleX,te=H._fullLayout._invScaleY,J=_.select(K.parentNode).select("rect.catrect"),j=J.node().getBoundingClientRect(),re=J.datum(),le=re.parcatsViewModel,pe=le.trace,xe=j.top+j.height/2;le.dimensions.length>1&&le.model.dimensions[re.model.dimensionInd].displayInd===le.dimensions.length-1?(ke=j.left,we="left"):(ke=j.left+j.width,we="right");var de=re.model.count,be=re.model.categoryLabel,Le=de/re.parcatsViewModel.model.count,De={countLabel:de,categoryLabel:be,probabilityLabel:Le.toFixed(3)},ye=[];-1!==re.parcatsViewModel.hoverinfoItems.indexOf("count")&&ye.push(["Count:",De.countLabel].join(" ")),-1!==re.parcatsViewModel.hoverinfoItems.indexOf("probability")&&ye.push(["P("+De.categoryLabel+"):",De.probabilityLabel].join(" "));var Ce=ye.join("<br>");return{trace:pe,x:Y*(ke-q.left),y:te*(xe-q.top),text:Ce,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:we,hovertemplate:pe.hovertemplate,hovertemplateLabels:De,eventData:[{data:pe._input,fullData:pe,count:de,category:be,probability:Le}]}}function I(H){if(!H.parcatsViewModel.dragDimension&&-1===H.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(_.mouse(this)[1]<-1)return;var re,K=H.parcatsViewModel.graphDiv,Y=K._fullLayout,te=Y._paperdiv.node().getBoundingClientRect(),J=H.parcatsViewModel.hoveron,j=this;"color"===J?(function h(H){var q=_.select(H).datum(),K=f(q);l(K),K.each(function(){e.raiseToTop(this)}),_.select(H.parentNode).selectAll("rect.bandrect").filter(function(Y){return Y.color===q.color}).each(function(){e.raiseToTop(this),function T(H){H.attr("stroke","black").attr("stroke-width",1.5)}(_.select(this))})}(j),C(j,"plotly_hover",_.event)):(function u(H){_.select(H.parentNode).selectAll("rect.bandrect").each(function(K){var Y=f(K);l(Y),Y.each(function(){e.raiseToTop(this)})}),function y(H){H.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(_.select(H.parentNode))}(j),o(j,"plotly_hover",_.event)),-1===H.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===J?re=R(K,te,j):"color"===J?re=function O(H,q,K){H._fullLayout._calcInverseTransform(H);var ke,we,Y=H._fullLayout._invScaleX,te=H._fullLayout._invScaleY,J=K.getBoundingClientRect(),j=_.select(K).datum(),re=j.categoryViewModel,le=re.parcatsViewModel,pe=le.trace,xe=J.y+J.height/2;le.dimensions.length>1&&le.model.dimensions[re.model.dimensionInd].displayInd===le.dimensions.length-1?(ke=J.left,we="left"):(ke=J.left+J.width,we="right");var de=re.model.categoryLabel,be=j.parcatsViewModel.model.count,Le=0;j.categoryViewModel.bands.forEach(function(gt){gt.color===j.color&&(Le+=gt.count)});var De=re.model.count,ye=0;le.pathSelection.each(function(gt){gt.model.color===j.color&&(ye+=gt.model.count)});var Ce=Le/be,Fe=Le/ye,Ke=Le/De,Ue={countLabel:be,categoryLabel:de,probabilityLabel:Ce.toFixed(3)},Be=[];-1!==re.parcatsViewModel.hoverinfoItems.indexOf("count")&&Be.push(["Count:",Ue.countLabel].join(" ")),-1!==re.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(Be.push("P(color \u2229 "+de+"): "+Ue.probabilityLabel),Be.push("P("+de+" | color): "+Fe.toFixed(3)),Be.push("P(color | "+de+"): "+Ke.toFixed(3)));var Ie=Be.join("<br>"),nt=n.mostReadable(j.color,["black","white"]);return{trace:pe,x:Y*(ke-q.left),y:te*(xe-q.top),text:Ie,color:j.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:nt,fontSize:10,idealAlign:we,hovertemplate:pe.hovertemplate,hovertemplateLabels:Ue,eventData:[{data:pe._input,fullData:pe,category:de,count:be,probability:Ce,categorycount:De,colorcount:ye,bandcolorcount:Le}]}}(K,te,j):"dimension"===J&&(re=function z(H,q,K){var Y=[];return _.select(K.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){Y.push(R(H,q,this))}),Y}(K,te,j)),re&&E.loneHover(re,{container:Y._hoverlayer.node(),outerContainer:Y._paper.node(),gd:K}))}}function F(H){var q=H.parcatsViewModel;if(!q.dragDimension&&(w(q.pathSelection),A(q.dimensionSelection.selectAll("g.category")),M(q.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),E.loneUnhover(q.graphDiv._fullLayout._hoverlayer.node()),q.pathSelection.sort(g),-1===q.hoverinfoItems.indexOf("skip"))){"color"===H.parcatsViewModel.hoveron?C(this,"plotly_unhover",_.event):o(this,"plotly_unhover",_.event)}}function D(H){"fixed"!==H.parcatsViewModel.arrangement&&(H.dragDimensionDisplayInd=H.model.displayInd,H.initialDragDimensionDisplayInds=H.parcatsViewModel.model.dimensions.map(function(q){return q.displayInd}),H.dragHasMoved=!1,H.dragCategoryDisplayInd=null,_.select(this).selectAll("g.category").select("rect.catrect").each(function(q){var K=_.mouse(this)[0],Y=_.mouse(this)[1];-2<=K&&K<=q.width+2&&-2<=Y&&Y<=q.height+2&&(H.dragCategoryDisplayInd=q.model.displayInd,H.initialDragCategoryDisplayInds=H.model.categories.map(function(te){return te.displayInd}),q.model.dragY=q.y,e.raiseToTop(this.parentNode),_.select(this.parentNode).selectAll("rect.bandrect").each(function(te){te.y<Y&&Y<=te.y+te.height&&(H.potentialClickBand=this)}))}),H.parcatsViewModel.dragDimension=H,E.loneUnhover(H.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function N(H){if("fixed"!==H.parcatsViewModel.arrangement&&(H.dragHasMoved=!0,null!==H.dragDimensionDisplayInd)){var q=H.dragDimensionDisplayInd,K=q-1,Y=q+1,te=H.parcatsViewModel.dimensions[q];if(null!==H.dragCategoryDisplayInd){var J=te.categories[H.dragCategoryDisplayInd];J.model.dragY+=_.event.dy;var j=J.model.dragY,re=J.model.displayInd,le=te.categories,ge=le[re-1],pe=le[re+1];void 0!==ge&&j<ge.y+ge.height/2&&(J.model.displayInd=ge.model.displayInd,ge.model.displayInd=re),void 0!==pe&&j+J.height>pe.y+pe.height/2&&(J.model.displayInd=pe.model.displayInd,pe.model.displayInd=re),H.dragCategoryDisplayInd=J.model.displayInd}if(null===H.dragCategoryDisplayInd||"freeform"===H.parcatsViewModel.arrangement){te.model.dragX=_.event.x;var xe=H.parcatsViewModel.dimensions[K],ke=H.parcatsViewModel.dimensions[Y];void 0!==xe&&te.model.dragX<xe.x+xe.width&&(te.model.displayInd=xe.model.displayInd,xe.model.displayInd=q),void 0!==ke&&te.model.dragX+te.width>ke.x&&(te.model.displayInd=ke.model.displayInd,ke.model.displayInd=H.dragDimensionDisplayInd),H.dragDimensionDisplayInd=te.model.displayInd}$(H.parcatsViewModel),G(H.parcatsViewModel),se(H.parcatsViewModel),oe(H.parcatsViewModel)}}function U(H){if("fixed"!==H.parcatsViewModel.arrangement&&null!==H.dragDimensionDisplayInd){_.select(this).selectAll("text").attr("font-weight","normal");var q={},K=X(H.parcatsViewModel),Y=H.parcatsViewModel.model.dimensions.map(function(ke){return ke.displayInd}),te=H.initialDragDimensionDisplayInds.some(function(ke,we){return ke!==Y[we]});te&&Y.forEach(function(ke,we){q["dimensions["+H.parcatsViewModel.model.dimensions[we].containerInd+"].displayindex"]=ke});var J=!1;if(null!==H.dragCategoryDisplayInd){var j=H.model.categories.map(function(ke){return ke.displayInd});if(J=H.initialDragCategoryDisplayInds.some(function(ke,we){return ke!==j[we]})){var re=H.model.categories.slice().sort(function(ke,we){return ke.displayInd-we.displayInd}),le=re.map(function(ke){return ke.categoryValue}),ge=re.map(function(ke){return ke.categoryLabel});q["dimensions["+H.model.containerInd+"].categoryarray"]=[le],q["dimensions["+H.model.containerInd+"].ticktext"]=[ge],q["dimensions["+H.model.containerInd+"].categoryorder"]="array"}}-1===H.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!H.dragHasMoved&&H.potentialClickBand&&("color"===H.parcatsViewModel.hoveron?C(H.potentialClickBand,"plotly_click",_.event.sourceEvent):o(H.potentialClickBand,"plotly_click",_.event.sourceEvent)),H.model.dragX=null,null!==H.dragCategoryDisplayInd&&(H.parcatsViewModel.dimensions[H.dragDimensionDisplayInd].categories[H.dragCategoryDisplayInd].model.dragY=null,H.dragCategoryDisplayInd=null),H.dragDimensionDisplayInd=null,H.parcatsViewModel.dragDimension=null,H.dragHasMoved=null,H.potentialClickBand=null,$(H.parcatsViewModel),G(H.parcatsViewModel),_.transition().duration(300).ease("cubic-in-out").each(function(){se(H.parcatsViewModel,!0),oe(H.parcatsViewModel,!0)}).each("end",function(){(te||J)&&m.restyle(H.parcatsViewModel.graphDiv,q,[K])})}}function X(H){for(var q,K=H.graphDiv._fullData,Y=0;Y<K.length;Y++)if(H.key===K[Y].uid){q=Y;break}return q}function oe(H,q){void 0===q&&(q=!1),H.pathSelection.data(function(Y){return Y.paths},a),function K(Y){return q?Y.transition():Y}(H.pathSelection).attr("d",function(Y){return Y.svgD})}function se(H,q){function K(le){return q?le.transition():le}void 0===q&&(q=!1),H.dimensionSelection.data(function(le){return le.dimensions},a);var Y=H.dimensionSelection.selectAll("g.category").data(function(le){return le.categories},a);K(H.dimensionSelection).attr("transform",function(le){return c(le.x,0)}),K(Y).attr("transform",function(le){return c(0,le.y)}),Y.select(".dimlabel").text(function(le,ge){return 0===ge?le.parcatsViewModel.model.dimensions[le.model.dimensionInd].dimensionLabel:null}),Y.select(".catlabel").attr("text-anchor",function(le){return r(le)?"start":"end"}).attr("x",function(le){return r(le)?le.width+5:-5}).each(function(le){var ge,pe;r(le)?(ge=le.width+5,pe="start"):(ge=-5,pe="end"),_.select(this).selectAll("tspan").attr("x",ge).attr("text-anchor",pe)});var j=Y.selectAll("rect.bandrect").data(function(le){return le.bands},a),re=j.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(le){return le.color}).attr("fill-opacity",0);j.attr("fill",function(le){return le.color}).attr("width",function(le){return le.width}).attr("height",function(le){return le.height}).attr("y",function(le){return le.y}),M(re),j.each(function(){e.raiseToTop(this)}),j.exit().remove()}function ne(H,q,K){var de,Y=K[0],te=q.margin||{l:80,r:80,t:100,b:80},J=Y.trace,j=J.domain,re=q.width,le=q.height,ge=Math.floor(re*(j.x[1]-j.x[0])),pe=Math.floor(le*(j.y[1]-j.y[0])),xe=j.x[0]*re+te.l,ke=q.height-j.y[1]*q.height+te.t,we=J.line.shape;de="all"===J.hoverinfo?["count","probability"]:(J.hoverinfo||"").split("+");var be={trace:J,key:J.uid,model:Y,x:xe,y:ke,width:ge,height:pe,hoveron:J.hoveron,hoverinfoItems:de,arrangement:J.arrangement,bundlecolors:J.bundlecolors,sortpaths:J.sortpaths,labelfont:J.labelfont,categorylabelfont:J.tickfont,pathShape:we,dragDimension:null,margin:te,paths:[],dimensions:[],graphDiv:H,traceSelection:null,pathSelection:null,dimensionSelection:null};return Y.dimensions&&($(be),G(be)),be}function W(H,q,K,Y,te){var re,le,J=[],j=[];for(le=0;le<K.length-1;le++)re=k(K[le]+H[le],H[le+1]),J.push(re(te)),j.push(re(1-te));var ge="M "+H[0]+","+q[0];for(ge+="l"+K[0]+",0 ",le=1;le<K.length;le++)ge+="C"+J[le-1]+","+q[le-1]+" "+j[le-1]+","+q[le]+" "+H[le]+","+q[le],ge+="l"+K[le]+",0 ";for(ge+="l0,"+Y+" ",ge+="l -"+K[K.length-1]+",0 ",le=K.length-2;le>=0;le--)ge+="C"+j[le]+","+(q[le+1]+Y)+" "+J[le]+","+(q[le]+Y)+" "+(H[le]+K[le])+","+(q[le]+Y),ge+="l-"+K[le]+",0 ";return ge+"Z"}function G(H){var q=H.dimensions,K=H.model,Y=q.map(function(Bt){return Bt.categories.map(function(Zt){return Zt.y})}),te=H.model.dimensions.map(function(Bt){return Bt.categories.map(function(Zt){return Zt.displayInd})}),J=H.model.dimensions.map(function(Bt){return Bt.displayInd}),j=H.dimensions.map(function(Bt){return Bt.model.dimensionInd}),re=q.map(function(Bt){return Bt.x}),le=q.map(function(Bt){return Bt.width}),ge=[];for(var pe in K.paths)K.paths.hasOwnProperty(pe)&&ge.push(K.paths[pe]);function xe(Bt){var Zt=Bt.categoryInds.map(function(wt,at){return te[at][wt]});return j.map(function(wt){return Zt[wt]})}ge.sort(function(Bt,Zt){var Et=xe(Bt),wt=xe(Zt);return"backward"===H.sortpaths&&(Et.reverse(),wt.reverse()),Et.push(Bt.valueInds[0]),wt.push(Zt.valueInds[0]),H.bundlecolors&&(Et.unshift(Bt.rawColor),wt.unshift(Zt.rawColor)),Et<wt?-1:Et>wt?1:0});for(var ke=new Array(ge.length),we=q[0].model.count,de=q[0].categories.map(function(Bt){return Bt.height}).reduce(function(Bt,Zt){return Bt+Zt}),be=0;be<ge.length;be++){var De,St,Le=ge[be];De=we>0?de*(Le.count/we):0;for(var ye=new Array(Y.length),Ce=0;Ce<Le.categoryInds.length;Ce++){var Ke=te[Ce][Le.categoryInds[Ce]],Ue=J[Ce];ye[Ue]=Y[Ue][Ke],Y[Ue][Ke]+=De;var Be=H.dimensions[Ue].categories[Ke],Ie=Be.bands.length,nt=Be.bands[Ie-1];if(void 0===nt||Le.rawColor!==nt.rawColor){var gt=void 0===nt?0:nt.y+nt.height;Be.bands.push({key:gt,color:Le.color,rawColor:Le.rawColor,height:De,width:Be.width,count:Le.count,y:gt,categoryViewModel:Be,parcatsViewModel:H})}else{var Nt=Be.bands[Ie-1];Nt.height+=De,Nt.count+=Le.count}}St=W(re,ye,le,De,"hspline"===H.pathShape?.5:0),ke[be]={key:Le.valueInds[0],model:Le,height:De,leftXs:re,topYs:ye,dimWidths:le,svgD:St,parcatsViewModel:H}}H.paths=ke}function $(H){var q=H.model.dimensions.map(function(j){return{displayInd:j.displayInd,dimensionInd:j.dimensionInd}});q.sort(function(j,re){return j.displayInd-re.displayInd});var K=[];for(var Y in q)K.push(V(H,H.model.dimensions[q[Y].dimensionInd]));H.dimensions=K}function V(H,q){var le,te=H.model.dimensions.length;le=40+(te>1?(H.width-80-16)/(te-1):0)*q.displayInd;var be,Le,De,Ce,ge=[],pe=H.model.maxCats,xe=q.categories.length,we=q.count,de=H.height-8*(pe-1),Fe=8*(pe-xe)/2,Ke=q.categories.map(function(Ue){return{displayInd:Ue.displayInd,categoryInd:Ue.categoryInd}});for(Ke.sort(function(Ue,Be){return Ue.displayInd-Be.displayInd}),Ce=0;Ce<xe;Ce++)De={key:(Le=q.categories[Ke[Ce].categoryInd]).valueInds[0],model:Le,width:16,height:be=we>0?Le.count/we*de:0,y:null!==Le.dragY?Le.dragY:Fe,bands:[],parcatsViewModel:H},Fe=Fe+be+8,ge.push(De);return{key:q.dimensionInd,x:null!==q.dragX?q.dragX:le,y:0,width:16,model:q,categories:ge,parcatsViewModel:H,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}ie.exports=function(H,q,K,Y){i(K,H,Y,q)}},{"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_api":540,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:312}],887:[function(v,ie,ae){"use strict";var _=v("./parcats");ie.exports=function(m,E,e,c){var d=m._fullLayout,t=d._size;_(m,d._paper,E,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},e,c)}},{"./parcats":886}],888:[function(v,ie,ae){"use strict";var _=v("../../components/colorscale/attributes"),k=v("../../plots/cartesian/layout_attributes"),m=v("../../plots/font_attributes"),E=v("../../plots/domain").attributes,e=v("../../lib/extend").extendFlat,c=v("../../plot_api/plot_template").templatedArray;ie.exports={domain:E({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:m({editType:"plot"}),tickfont:m({editType:"plot"}),rangefont:m({editType:"plot"}),dimensions:c("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},k.tickvals,{editType:"plot"}),ticktext:e({},k.ticktext,{editType:"plot"}),tickformat:e({},k.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},_("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],889:[function(v,ie,ae){"use strict";var _=v("./constants"),k=v("@plotly/d3"),m=v("../../lib/gup").keyFun,E=v("../../lib/gup").repeat,e=v("../../lib").sorterAsc,c=v("../../lib").strTranslate,d=_.bar.snapRatio;function n(U,X){return U*(1-d)+X*d}var t=_.bar.snapClose;function i(U,X){return U*(1-t)+X*t}function a(U,X,oe,se){if(function r(U,X){for(var oe=0;oe<X.length;oe++)if(U>=X[oe][0]&&U<=X[oe][1])return!0;return!1}(oe,se))return oe;var ne=U?-1:1,W=0,G=X.length-1;if(ne<0){var $=W;W=G,G=$}for(var V=X[W],H=V,q=W;ne*q<ne*G;q+=ne){var K=q+ne,Y=X[K];if(ne*oe<ne*i(V,Y))return n(V,H);if(ne*oe<ne*Y||K===G)return n(Y,V);H=V,V=Y}}function g(U){U.attr("x",-_.bar.captureWidth/2).attr("width",_.bar.captureWidth)}function s(U){U.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function b(U){if(!U.brush.filterSpecified)return"0,"+U.height;for(var se,ne,W,X=x(U.brush.filter.getConsolidated(),U.height),oe=[0],G=X.length?X[0][0]:null,$=0;$<X.length;$++)ne=(se=X[$])[1]-se[0],oe.push(G),oe.push(ne),(W=$+1)<X.length&&(G=X[W][0]-se[1]);return oe.push(U.height),oe}function x(U,X){return U.map(function(oe){return oe.map(function(se){return Math.max(0,se*X)}).sort(e)})}function p(){k.select(document.body).style("cursor",null)}function w(U){U.attr("stroke-dasharray",b)}function l(U,X){var oe=k.select(U).selectAll(".highlight, .highlight-shadow");w(X?oe.transition().duration(_.bar.snapDuration).each("end",X):oe)}function y(U,X){var G,oe=U.brush,ne=NaN,W={};if(oe.filterSpecified){var $=U.height,V=oe.filter.getConsolidated(),H=x(V,$),q=NaN,K=NaN,Y=NaN;for(G=0;G<=H.length;G++){var te=H[G];if(te&&te[0]<=X&&X<=te[1]){q=G;break}if(K=G?G-1:NaN,te&&te[0]>X){Y=G;break}}if(ne=q,isNaN(ne)&&(ne=isNaN(K)||isNaN(Y)?isNaN(K)?Y:K:X-H[K][1]<H[Y][0]-X?K:Y),!isNaN(ne)){var J=H[ne],j=function S(U,X){var oe=_.bar.handleHeight;if(!(X>U[1]+oe||X<U[0]-oe))return X>=.9*U[1]+.1*U[0]?"n":X<=.9*U[0]+.1*U[1]?"s":"ns"}(J,X);j&&(W.interval=V[ne],W.intervalPix=J,W.region=j)}}if(U.ordinal&&!W.region){var re=U.unitTickvals,le=U.unitToPaddedPx.invert(X);for(G=0;G<re.length;G++){var ge=[.25*re[Math.max(G-1,0)]+.75*re[G],.25*re[Math.min(G+1,re.length-1)]+.75*re[G]];if(le>=ge[0]&&le<=ge[1]){W.clickableOrdinalRange=ge;break}}}return W}function T(U,X){k.event.sourceEvent.stopPropagation();var oe=X.height-k.mouse(U)[1]-2*_.verticalPadding,se=X.brush.svgBrush;se.wasDragged=!0,se._dragging=!0,se.newExtent=se.grabbingBar?[oe-se.grabPoint,oe+se.barLength-se.grabPoint].map(X.unitToPaddedPx.invert):[se.startExtent,X.unitToPaddedPx.invert(oe)].sort(e),X.brush.filterSpecified=!0,se.extent=se.stayingIntervals.concat([se.newExtent]),se.brushCallback(X),l(U.parentNode)}function f(U,X){var se=y(X,X.height-k.mouse(U)[1]-2*_.verticalPadding),ne="crosshair";se.clickableOrdinalRange?ne="pointer":se.region&&(ne=se.region+"-resize"),k.select(document.body).style("cursor",ne)}function u(U){U.on("mousemove",function(X){k.event.preventDefault(),X.parent.inBrushDrag||f(this,X)}).on("mouseleave",function(X){X.parent.inBrushDrag||p()}).call(k.behavior.drag().on("dragstart",function(X){!function A(U,X){k.event.sourceEvent.stopPropagation();var oe=X.height-k.mouse(U)[1]-2*_.verticalPadding,se=X.unitToPaddedPx.invert(oe),ne=X.brush,W=y(X,oe),G=W.interval,$=ne.svgBrush;if($.wasDragged=!1,$.grabbingBar="ns"===W.region,$.grabbingBar){var V=G.map(X.unitToPaddedPx);$.grabPoint=oe-V[0]-_.verticalPadding,$.barLength=V[1]-V[0]}$.clickableOrdinalRange=W.clickableOrdinalRange,$.stayingIntervals=X.multiselect&&ne.filterSpecified?ne.filter.getConsolidated():[],G&&($.stayingIntervals=$.stayingIntervals.filter(function(H){return H[0]!==G[0]&&H[1]!==G[1]})),$.startExtent=W.region?G["s"===W.region?1:0]:se,X.parent.inBrushDrag=!0,$.brushStartCallback()}(this,X)}).on("drag",function(X){T(this,X)}).on("dragend",function(X){!function M(U,X){var oe=X.brush,se=oe.filter,ne=oe.svgBrush;ne._dragging||(f(U,X),T(U,X),X.brush.svgBrush.wasDragged=!1),ne._dragging=!1,k.event.sourceEvent.stopPropagation();var G=ne.grabbingBar;if(ne.grabbingBar=!1,ne.grabLocation=void 0,X.parent.inBrushDrag=!1,p(),!ne.wasDragged)return ne.wasDragged=void 0,ne.clickableOrdinalRange?oe.filterSpecified&&X.multiselect?ne.extent.push(ne.clickableOrdinalRange):(ne.extent=[ne.clickableOrdinalRange],oe.filterSpecified=!0):G?(ne.extent=ne.stayingIntervals,0===ne.extent.length&&z(oe)):z(oe),ne.brushCallback(X),l(U.parentNode),void ne.brushEndCallback(oe.filterSpecified?se.getConsolidated():[]);var $=function(){se.set(se.getConsolidated())};if(X.ordinal){var V=X.unitTickvals;V[V.length-1]<V[0]&&V.reverse(),ne.newExtent=[a(0,V,ne.newExtent[0],ne.stayingIntervals),a(1,V,ne.newExtent[1],ne.stayingIntervals)];var H=ne.newExtent[1]>ne.newExtent[0];ne.extent=ne.stayingIntervals.concat(H?[ne.newExtent]:[]),ne.extent.length||z(oe),ne.brushCallback(X),H?l(U.parentNode,$):($(),l(U.parentNode))}else $();ne.brushEndCallback(oe.filterSpecified?se.getConsolidated():[])}(this,X)}))}function h(U,X){return U[0]-X[0]}function z(U){U.filterSpecified=!1,U.svgBrush.extent=[[-1/0,1/0]]}function O(U){return function(oe){var se=oe.brush,W=function R(U){return U.svgBrush.extent.map(function(X){return X.slice()})}(se).slice();se.filter.set(W),U()}}function I(U){for(var se,X=U.slice(),oe=[],ne=X.shift();ne;){for(se=ne.slice();(ne=X.shift())&&ne[0]<=se[1];)se[1]=Math.max(se[1],ne[1]);oe.push(se)}return 1===oe.length&&oe[0][0]>oe[0][1]&&(oe=[]),oe}ie.exports={makeBrush:function D(U,X,oe,se,ne,W){var G=function F(){var X,oe,U=[];return{set:function(se){1===(U=se.map(function(ne){return ne.slice().sort(e)}).sort(h)).length&&U[0][0]===-1/0&&U[0][1]===1/0&&(U=[[0,-1]]),X=I(U),oe=U.reduce(function(ne,W){return[Math.min(ne[0],W[0]),Math.max(ne[1],W[1])]},[1/0,-1/0])},get:function(){return U.slice()},getConsolidated:function(){return X},getBounds:function(){return oe}}}();return G.set(oe),{filter:G,filterSpecified:X,svgBrush:{extent:[],brushStartCallback:se,brushCallback:O(ne),brushEndCallback:W}}},ensureAxisBrush:function C(U,X){var oe=U.selectAll("."+_.cn.axisBrush).data(E,m);oe.enter().append("g").classed(_.cn.axisBrush,!0),function o(U,X){var oe=U.selectAll(".background").data(E);oe.enter().append("rect").classed("background",!0).call(g).call(s).style("pointer-events","auto").attr("transform",c(0,_.verticalPadding)),oe.call(u).attr("height",function(W){return W.height-_.verticalPadding});var se=U.selectAll(".highlight-shadow").data(E);se.enter().append("line").classed("highlight-shadow",!0).attr("x",-_.bar.width/2).attr("stroke-width",_.bar.width+_.bar.strokeWidth).attr("stroke",X).attr("opacity",_.bar.strokeOpacity).attr("stroke-linecap","butt"),se.attr("y1",function(W){return W.height}).call(w);var ne=U.selectAll(".highlight").data(E);ne.enter().append("line").classed("highlight",!0).attr("x",-_.bar.width/2).attr("stroke-width",_.bar.width-_.bar.strokeWidth).attr("stroke",_.bar.fillColor).attr("opacity",_.bar.fillOpacity).attr("stroke-linecap","butt"),ne.attr("y1",function(W){return W.height}).call(w)}(oe,X)},cleanRanges:function N(U,X){if(Array.isArray(U[0])?(U=U.map(function(se){return se.sort(e)}),U=X.multiselect?I(U.sort(h)):[U[0]]):U=[U.sort(e)],X.tickvals){var oe=X.tickvals.slice().sort(e);if(!(U=U.map(function(se){var ne=[a(0,oe,se[0],[]),a(1,oe,se[1],[])];if(ne[1]>ne[0])return ne}).filter(function(se){return se})).length)return}return U.length>1?U:U[0]}}},{"../../lib":503,"../../lib/gup":500,"./constants":893,"@plotly/d3":58}],890:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:v("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":888,"./base_plot":891,"./calc":892,"./defaults":894}],891:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../plots/get_data").getModuleCalcData,m=v("./plot"),E=v("../../constants/xmlns_namespaces");ae.name="parcoords",ae.plot=function(e){var c=k(e.calcdata,"parcoords")[0];c.length&&m(e,c)},ae.clean=function(e,c,d,n){var t=n._has&&n._has("parcoords"),i=c._has&&c._has("parcoords");t&&!i&&(n._paperdiv.selectAll(".parcoords").remove(),n._glimages.selectAll("*").remove())},ae.toSVG=function(e){var c=e._fullLayout._glimages,d=_.select(e).selectAll(".svg-container");d.filter(function(i,a){return a===d.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function t(){var i=this,a=i.toDataURL("image/png");c.append("svg:image").attr({xmlns:E.svg,"xlink:href":a,preserveAspectRatio:"none",x:0,y:0,width:i.style.width,height:i.style.height})}),window.setTimeout(function(){_.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":480,"../../plots/get_data":593,"./plot":900,"@plotly/d3":58}],892:[function(v,ie,ae){"use strict";var _=v("../../lib").isArrayOrTypedArray,k=v("../../components/colorscale"),m=v("../../lib/gup").wrap;ie.exports=function(c,d){var n,t;return k.hasColorscale(d,"line")&&_(d.line.color)?(n=d.line.color,t=k.extractOpts(d.line).colorscale,k.calc(c,d,{vals:n,containerStr:"line",cLetter:"c"})):(n=function E(e){for(var c=new Array(e),d=0;d<e;d++)c[d]=.5;return c}(d._length),t=[[0,d.line.color],[1,d.line.color]]),m({lineColor:n,cscale:t})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500}],893:[function(v,ie,ae){"use strict";ie.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],894:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../components/colorscale/helpers").hasColorscale,m=v("../../components/colorscale/defaults"),E=v("../../plots/domain").defaults,e=v("../../plots/array_container_defaults"),c=v("../../plots/cartesian/axes"),d=v("./attributes"),n=v("./axisbrush"),t=v("./constants").maxDimensionCount,i=v("./merge_length");function r(g,s,b,x){function S(A,T){return _.coerce(g,s,d.dimensions,A,T)}var p=S("values"),w=S("visible");if(p&&p.length||(w=s.visible=!1),w){S("label"),S("tickvals"),S("ticktext"),S("tickformat");var l=S("range");s._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:l},c.setConvert(s._ax,x.layout),S("multiselect");var y=S("constraintrange");y&&(s.constraintrange=n.cleanRanges(y,s))}}ie.exports=function(s,b,x,S){function p(T,M){return _.coerce(s,b,d,T,M)}var w=s.dimensions;Array.isArray(w)&&w.length>t&&(_.log("parcoords traces support up to "+t+" dimensions at the moment"),w.splice(t));var l=e(s,b,{name:"dimensions",layout:S,handleItemDefaults:r}),y=function a(g,s,b,x,S){var p=S("line.color",b);if(k(g,"line")&&_.isArrayOrTypedArray(p)){if(p.length)return S("line.colorscale"),m(g,s,x,S,{prefix:"line.",cLetter:"c"}),p.length;s.line.color=b}return 1/0}(s,b,x,S,p);E(b,S,p),(!Array.isArray(l)||!l.length)&&(b.visible=!1),i(b,l,"values",y);var A={family:S.font.family,size:Math.round(S.font.size/1.2),color:S.font.color};_.coerceFont(p,"labelfont",A),_.coerceFont(p,"tickfont",A),_.coerceFont(p,"rangefont",A),p("labelangle"),p("labelside")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../../plots/domain":584,"./attributes":888,"./axisbrush":889,"./constants":893,"./merge_length":898}],895:[function(v,ie,ae){"use strict";var _=v("../../lib").isTypedArray;ae.convertTypedArray=function(k){return _(k)?Array.prototype.slice.call(k):k},ae.isOrdinal=function(k){return!!k.tickvals},ae.isVisible=function(k){return k.visible||!("visible"in k)}},{"../../lib":503}],896:[function(v,ie,ae){"use strict";var _=v("./base_index");_.plot=v("./plot"),ie.exports=_},{"./base_index":890,"./plot":900}],897:[function(v,ie,ae){"use strict";var _=v("glslify"),k=_(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),m=_(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),E=v("./constants").maxDimensionCount,e=v("../../lib"),c=1e-6,d=2048,n=new Uint8Array(4),t=new Uint8Array(4),i={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function r(f,u,h,o,C){var R=f._gl;R.enable(R.SCISSOR_TEST),R.scissor(u,h,o,C),f.clear({color:[0,0,0,0],depth:1})}function g(f,u,h,o,C,R){var z=R.key;h.drawCompleted||(function a(f){f.read({x:0,y:0,width:1,height:1,data:n})}(f),h.drawCompleted=!0),function O(I){var F=Math.min(o,C-I*o);0===I&&(window.cancelAnimationFrame(h.currentRafs[z]),delete h.currentRafs[z],r(f,R.scissorX,R.scissorY,R.scissorWidth,R.viewBoxSize[1])),!h.clearOnly&&(R.count=2*F,R.offset=2*I*o,u(R),I*o+F<C&&(h.currentRafs[z]=window.requestAnimationFrame(function(){O(I+1)})),h.drawCompleted=!1)}(0)}function s(f){return Math.max(c,Math.min(1-c,f))}function b(f,u){for(var h=new Array(256),o=0;o<256;o++)h[o]=f(o/255).concat(u);return h}function x(f,u){return(f>>>8*u)%256/255}function p(f,u,h){for(var o=new Array(8*u),C=0,R=0;R<u;R++)for(var z=0;z<2;z++)for(var O=0;O<4;O++){var I=4*f+O,F=h[64*R+I];63===I&&0===z&&(F*=-1),o[C++]=F}return o}function w(f){var u="0"+f;return u.substr(u.length-2)}function l(f){return f<E?"p"+w(f+1)+"_"+w(f+4):"colors"}function T(f,u,h,o,C,R,z,O,I,F,D,N,U,X){for(var oe=[[],[]],se=0;se<64;se++)oe[0][se]=se===C?1:0,oe[1][se]=se===R?1:0;var ne=f.lines.canvasOverdrag*X,W=f.domain,G=f.canvasWidth*X,$=f.canvasHeight*X,V=f.pad.l*X,H=f.pad.b*X,q=f.layoutHeight*X,K=f.layoutWidth*X,Y=f.deselectedLines.color;return e.extendFlat({key:D,resolution:[G,$],viewBoxPos:[(z*=X)+ne,O*=X],viewBoxSize:[I*=X,F*=X],i0:C,i1:R,dim0A:oe[0].slice(0,16),dim0B:oe[0].slice(16,32),dim0C:oe[0].slice(32,48),dim0D:oe[0].slice(48,64),dim1A:oe[1].slice(0,16),dim1B:oe[1].slice(16,32),dim1C:oe[1].slice(32,48),dim1D:oe[1].slice(48,64),drwLayer:N,contextColor:[Y[0]/255,Y[1]/255,Y[2]/255,Y[3]<1?Y[3]:Math.max(1/255,Math.pow(1/f.lines.color.length,1/3))],scissorX:(o===u?0:z+ne)+(V-ne)+K*W.x[0],scissorWidth:(o===h?G-z+ne:I+.5)+(o===u?z+ne:0),scissorY:O+H+q*W.y[0],scissorHeight:F,viewportX:V-ne+K*W.x[0],viewportY:H+q*W.y[0],viewportWidth:G,viewportHeight:$},U)}function M(f){var u=d-1,h=Math.max(0,Math.floor(f[0]*u),0),o=Math.min(u,Math.ceil(f[1]*u),u);return[Math.min(h,o),Math.max(h,o)]}ie.exports=function(f,u){var F,N,U,oe,h=u.context,o=u.pick,C=u.regl,R=C._gl,z=R.getParameter(R.ALIASED_LINE_WIDTH_RANGE),O=Math.max(z[0],Math.min(z[1],u.viewModel.plotGlPixelRatio)),I={currentRafs:{},drawCompleted:!0,clearOnly:!1},X=function A(f){for(var u={},h=0;h<=E;h+=4)u[l(h)]=f.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return u}(C),se=C.texture(i),ne=[];G(u);var W=C({profile:!1,blend:{enable:h,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!h,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:C.prop("scissorX"),y:C.prop("scissorY"),width:C.prop("scissorWidth"),height:C.prop("scissorHeight")}},viewport:{x:C.prop("viewportX"),y:C.prop("viewportY"),width:C.prop("viewportWidth"),height:C.prop("viewportHeight")},dither:!1,vert:k,frag:m,primitive:"lines",lineWidth:O,attributes:X,uniforms:{resolution:C.prop("resolution"),viewBoxPos:C.prop("viewBoxPos"),viewBoxSize:C.prop("viewBoxSize"),dim0A:C.prop("dim0A"),dim1A:C.prop("dim1A"),dim0B:C.prop("dim0B"),dim1B:C.prop("dim1B"),dim0C:C.prop("dim0C"),dim1C:C.prop("dim1C"),dim0D:C.prop("dim0D"),dim1D:C.prop("dim1D"),loA:C.prop("loA"),hiA:C.prop("hiA"),loB:C.prop("loB"),hiB:C.prop("hiB"),loC:C.prop("loC"),hiC:C.prop("hiC"),loD:C.prop("loD"),hiD:C.prop("hiD"),palette:se,contextColor:C.prop("contextColor"),maskTexture:C.prop("maskTexture"),drwLayer:C.prop("drwLayer"),maskHeight:C.prop("maskHeight")},offset:C.prop("offset"),count:C.prop("count")});function G(Y){F=Y.model,N=Y.viewModel.dimensions.slice(),U=N[0]?N[0].values.length:0;var te=F.lines,J=o?te.color.map(function(re,le){return le/te.color.length}):te.color,j=function S(f,u,h){for(var o=new Array(f*(E+4)),C=0,R=0;R<f;R++){for(var z=0;z<E;z++)o[C++]=z<u.length?u[z].paddedUnitValues[R]:.5;o[C++]=x(R,2),o[C++]=x(R,1),o[C++]=x(R,0),o[C++]=s(h[R])}return o}(U,N,J);(function y(f,u,h){for(var o=0;o<=E;o+=4)f[l(o)](p(o/4,u,h))})(X,U,j),!h&&!o&&(se=C.texture(e.extendFlat({data:b(F.unitToColor,255)},i)))}return{render:function V(Y,te,J){var re,le,ge,j=Y.length,pe=1/0,xe=-1/0;for(re=0;re<j;re++)Y[re].dim0.canvasX<pe&&(pe=Y[re].dim0.canvasX,le=re),Y[re].dim1.canvasX>xe&&(xe=Y[re].dim1.canvasX,ge=re);0===j&&r(C,0,0,F.canvasWidth,F.canvasHeight);var ke=function $(Y){var te,J,j,re=[[],[]];for(j=0;j<64;j++){var le=!Y&&j<N.length?N[j].brush.filter.getBounds():[-1/0,1/0];re[0][j]=le[0],re[1][j]=le[1]}var pe=new Array(16384);for(te=0;te<16384;te++)pe[te]=255;if(!Y)for(te=0;te<N.length;te++){var xe=te%8,ke=(te-xe)/8,we=Math.pow(2,xe),be=N[te].brush.filter.get();if(!(be.length<2)){var Le=M(be[0])[1];for(J=1;J<be.length;J++){var De=M(be[J]);for(j=Le+1;j<De[0];j++)pe[8*j+ke]&=~we;Le=Math.max(Le,De[1])}}}var ye={shape:[8,d],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:pe};return oe?oe(ye):oe=C.texture(ye),{maskTexture:oe,maskHeight:d,loA:re[0].slice(0,16),loB:re[0].slice(16,32),loC:re[0].slice(32,48),loD:re[0].slice(48,64),hiA:re[1].slice(0,16),hiB:re[1].slice(16,32),hiC:re[1].slice(32,48),hiD:re[1].slice(48,64)}}(h);for(re=0;re<j;re++){var we=Y[re],de=we.dim0.crossfilterDimensionIndex,be=we.dim1.crossfilterDimensionIndex,Le=we.canvasX,De=we.canvasY,ye=Le+we.panelSizeX,Ce=we.plotGlPixelRatio;if(te||!ne[de]||ne[de][0]!==Le||ne[de][1]!==ye){ne[de]=[Le,ye];var Fe=T(F,le,ge,re,de,be,Le,De,we.panelSizeX,we.panelSizeY,we.dim0.crossfilterDimensionIndex,h?0:o?2:1,ke,Ce);I.clearOnly=J,g(C,W,I,te?F.lines.blockLineCount:U,U,Fe)}}},readPixel:function H(Y,te){return C.read({x:Y,y:te,width:1,height:1,data:t}),t},readPixels:function q(Y,te,J,j){var re=new Uint8Array(4*J*j);return C.read({x:Y,y:te,width:J,height:j,data:re}),re},destroy:function K(){for(var Y in f.style["pointer-events"]="none",se.destroy(),oe&&oe.destroy(),X)X[Y].destroy()},update:G}}},{"../../lib":503,"./constants":893,glslify:227}],898:[function(v,ie,ae){"use strict";ie.exports=function(_,k,m,E){var e,c;for(E||(E=1/0),e=0;e<k.length;e++)(c=k[e]).visible&&(E=Math.min(E,c[m].length));for(E===1/0&&(E=0),_._length=E,e=0;e<k.length;e++)(c=k[e]).visible&&(c._length=E);return E}},{}],899:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../lib"),m=k.numberFormat,E=v("color-rgba"),e=v("../../plots/cartesian/axes"),c=k.strRotate,d=k.strTranslate,n=v("../../lib/svg_text_utils"),t=v("../../components/drawing"),i=v("../../components/colorscale"),a=v("../../lib/gup"),r=a.keyFun,g=a.repeat,s=a.unwrap,b=v("./helpers"),x=v("./constants"),S=v("./axisbrush"),p=v("./lines");function w(oe,se,ne){return k.aggNums(oe,null,se,ne)}function l(oe,se){return A(w(Math.min,oe,se),w(Math.max,oe,se))}function y(oe){var se=oe.range;return se?A(se[0],se[1]):l(oe.values,oe._length)}function A(oe,se){return(isNaN(oe)||!isFinite(oe))&&(oe=0),(isNaN(se)||!isFinite(se))&&(se=0),oe===se&&(0===oe?(oe-=1,se+=1):(oe*=.9,se*=1.1)),[oe,se]}function M(oe,se,ne,W,G){var $=y(ne);return W?_.scale.ordinal().domain(W.map(function T(oe,se){return se?function(ne,W){var G=se[W];return null==G?oe(ne):G}:oe}(m(ne.tickformat),G))).range(W.map(function(V){return oe-se+(V-$[0])/($[1]-$[0])*(2*se-oe)})):_.scale.linear().domain($).range([oe-se,se])}function h(oe){if(oe.tickvals){var se=y(oe);return _.scale.ordinal().domain(oe.tickvals).range(oe.tickvals.map(function(ne){return(ne-se[0])/(se[1]-se[0])}))}}function o(oe){var se=oe.map(function($){return $[0]}),ne=oe.map(function($){var V=E($[1]);return _.rgb("rgb("+V[0]+","+V[1]+","+V[2]+")")}),G="rgb".split("").map(function($){return _.scale.linear().clamp(!0).domain(se).range(ne.map(function($){return function(V){return V[$]}}($)))});return function($){return G.map(function(V){return V($)})}}function C(oe){return oe.dimensions.some(function(se){return se.brush.filterSpecified})}function R(oe,se,ne){var W=s(se),G=W.trace,$=b.convertTypedArray(W.lineColor),V=G.line,H={color:E(x.deselectedLineColor)},q=i.extractOpts(V),K=q.reversescale?i.flipScale(W.cscale):W.cscale,Y=G.domain,te=G.dimensions,J=oe.width,j=G.labelangle,re=G.labelside,le=G.labelfont,ge=G.tickfont,pe=G.rangefont,xe=k.extendDeepNoArrays({},V,{color:$.map(_.scale.linear().domain(y({values:$,range:[q.min,q.max],_length:G._length}))),blockLineCount:x.blockLineCount,canvasOverdrag:x.overdrag*x.canvasPixelRatio}),ke=Math.floor(J*(Y.x[1]-Y.x[0])),we=Math.floor(oe.height*(Y.y[1]-Y.y[0])),de=oe.margin||{l:80,r:80,t:100,b:80},be=ke,Le=we;return{key:ne,colCount:te.filter(b.isVisible).length,dimensions:te,tickDistance:x.tickDistance,unitToColor:o(K),lines:xe,deselectedLines:H,labelAngle:j,labelSide:re,labelFont:le,tickFont:ge,rangeFont:pe,layoutWidth:J,layoutHeight:oe.height,domain:Y,translateX:Y.x[0]*J,translateY:oe.height-Y.y[1]*oe.height,pad:de,canvasWidth:be*x.canvasPixelRatio+2*xe.canvasOverdrag,canvasHeight:Le*x.canvasPixelRatio,width:be,height:Le,canvasPixelRatio:x.canvasPixelRatio}}function z(oe,se,ne){var W=ne.width,G=ne.height,$=ne.dimensions,V=ne.canvasPixelRatio,H=function(J){return W*J/Math.max(1,ne.colCount-1)},q=x.verticalPadding/G,K=function f(oe,se){return _.scale.linear().range([se,oe-se])}(G,x.verticalPadding),Y={key:ne.key,xScale:H,model:ne,inBrushDrag:!1},te={};return Y.dimensions=$.filter(b.isVisible).map(function(J,j){var re=function u(oe,se){return _.scale.linear().domain(y(oe)).range([se,1-se])}(J,q),le=te[J.label];te[J.label]=(le||0)+1;var ge=J.label+(le?"__"+le:""),pe=J.constraintrange,xe=pe&&pe.length;xe&&!Array.isArray(pe[0])&&(pe=[pe]);var ke=xe?pe.map(function(Ue){return Ue.map(re)}):[[-1/0,1/0]],de=J.values;de.length>J._length&&(de=de.slice(0,J._length));var Le,be=J.tickvals;function De(Ue,Be){return{val:Ue,text:Le[Be]}}function ye(Ue,Be){return Ue.val-Be.val}if(Array.isArray(be)&&be.length){Le=J.ticktext,Array.isArray(Le)&&Le.length?Le.length>be.length?Le=Le.slice(0,be.length):be.length>Le.length&&(be=be.slice(0,Le.length)):Le=be.map(m(J.tickformat));for(var Ce=1;Ce<be.length;Ce++)if(be[Ce]<be[Ce-1]){for(var Fe=be.map(De).sort(ye),Ke=0;Ke<be.length;Ke++)be[Ke]=Fe[Ke].val,Le[Ke]=Fe[Ke].text;break}}else be=void 0;return de=b.convertTypedArray(de),{key:ge,label:J.label,tickFormat:J.tickformat,tickvals:be,ticktext:Le,ordinal:b.isOrdinal(J),multiselect:J.multiselect,xIndex:j,crossfilterDimensionIndex:j,visibleIndex:J._index,height:G,values:de,paddedUnitValues:de.map(re),unitTickvals:be&&be.map(re),xScale:H,x:H(j),canvasX:H(j)*V,unitToPaddedPx:K,domainScale:M(G,x.verticalPadding,J,be,Le),ordinalScale:h(J),parent:Y,model:ne,brush:S.makeBrush(oe,xe,ke,function(){oe.linePickActive(!1)},function(){var Ue=Y;Ue.focusLayer&&Ue.focusLayer.render(Ue.panels,!0);var Be=C(Ue);!oe.contextShown()&&Be?(Ue.contextLayer&&Ue.contextLayer.render(Ue.panels,!0),oe.contextShown(!0)):oe.contextShown()&&!Be&&(Ue.contextLayer&&Ue.contextLayer.render(Ue.panels,!0,!0),oe.contextShown(!1))},function(Ue){if(Y.focusLayer.render(Y.panels,!0),Y.pickLayer&&Y.pickLayer.render(Y.panels,!0),oe.linePickActive(!0),se&&se.filterChanged){var Be=re.invert,Ie=Ue.map(function(nt){return nt.map(Be).sort(k.sorterAsc)}).sort(function(nt,gt){return nt[0]-gt[0]});se.filterChanged(Y.key,J._index,Ie)}})}}),Y}function O(oe){oe.classed(x.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function F(oe,se){var W=oe*Math.PI/180;return{dir:"top"===se?1:-1,dx:Math.sin(W),dy:Math.cos(W),degrees:oe}}function D(oe,se,ne){for(var W=se.panels||(se.panels=[]),G=oe.data(),$=0;$<G.length-1;$++){var V=W[$]||(W[$]={}),H=G[$],q=G[$+1];V.dim0=H,V.dim1=q,V.canvasX=H.canvasX,V.panelSizeX=q.canvasX-H.canvasX,V.panelSizeY=se.model.canvasHeight,V.y=0,V.canvasY=0,V.plotGlPixelRatio=ne}}function U(oe,se){return e.tickText(oe._ax,se,!1).text}function X(oe,se){if(oe.ordinal)return"";var ne=oe.domainScale.domain();return U(oe.model.dimensions[oe.visibleIndex],ne[se?ne.length-1:0])}ie.exports=function(se,ne,W,G){var $=se._fullLayout,V=$._toppaper,H=$._glcontainer,q=se._context.plotGlPixelRatio,K=se._fullLayout.paper_bgcolor;!function N(oe){for(var se=0;se<oe.length;se++)for(var ne=0;ne<oe[se].length;ne++)for(var W=oe[se][ne].trace,G=W.dimensions,$=0;$<G.length;$++){var V=G[$].values,H=G[$]._ax;H&&(H.range=H.range?A(H.range[0],H.range[1]):l(V,W._length),H.dtick||(H.dtick=.01*(Math.abs(H.range[1]-H.range[0])||1)),H.tickformat=G[$].tickformat,e.calcTicks(H),H.cleanRange())}}(ne);var Y=function I(){var oe=!0,se=!1;return{linePickActive:function(ne){return arguments.length?oe=!!ne:oe},contextShown:function(ne){return arguments.length?se=!!ne:se}}}(),te=ne.filter(function(Fe){return s(Fe).trace.visible}).map(R.bind(0,W)).map(z.bind(0,Y,G));H.each(function(Fe,Ke){return k.extendFlat(Fe,te[Ke])});var J=H.selectAll(".gl-canvas").each(function(Fe){Fe.viewModel=te[0],Fe.viewModel.plotGlPixelRatio=q,Fe.viewModel.paperColor=K,Fe.model=Fe.viewModel?Fe.viewModel.model:null}),j=null;J.filter(function(Fe){return Fe.pick}).style("pointer-events","auto").on("mousemove",function(Fe){if(Y.linePickActive()&&Fe.lineLayer&&G&&G.hover){var Ke=_.event,Ue=this.width,Be=this.height,Ie=_.mouse(this),nt=Ie[0],gt=Ie[1];if(nt<0||gt<0||nt>=Ue||gt>=Be)return;var Nt=Fe.lineLayer.readPixel(nt,Be-1-gt),St=0!==Nt[3],Bt=St?Nt[2]+256*(Nt[1]+256*Nt[0]):null,Zt={x:nt,y:gt,clientX:Ke.clientX,clientY:Ke.clientY,dataIndex:Fe.model.key,curveNumber:Bt};Bt!==j&&(St?G.hover(Zt):G.unhover&&G.unhover(Zt),j=Bt)}}),J.style("opacity",function(Fe){return Fe.pick?0:1}),V.style("background","rgba(255, 255, 255, 0)");var le=V.selectAll("."+x.cn.parcoords).data(te,r);le.exit().remove(),le.enter().append("g").classed(x.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),le.attr("transform",function(Fe){return d(Fe.model.translateX,Fe.model.translateY)});var ge=le.selectAll("."+x.cn.parcoordsControlView).data(g,r);ge.enter().append("g").classed(x.cn.parcoordsControlView,!0),ge.attr("transform",function(Fe){return d(Fe.model.pad.l,Fe.model.pad.t)});var pe=ge.selectAll("."+x.cn.yAxis).data(function(Fe){return Fe.dimensions},r);pe.enter().append("g").classed(x.cn.yAxis,!0),ge.each(function(Fe){D(pe,Fe,q)}),J.each(function(Fe){Fe.viewModel&&(!Fe.lineLayer||G?Fe.lineLayer=p(this,Fe):Fe.lineLayer.update(Fe),(Fe.key||0===Fe.key)&&(Fe.viewModel[Fe.key]=Fe.lineLayer),Fe.lineLayer.render(Fe.viewModel.panels,!Fe.context||G))}),pe.attr("transform",function(Fe){return d(Fe.xScale(Fe.xIndex),0)}),pe.call(_.behavior.drag().origin(function(Fe){return Fe}).on("drag",function(Fe){var Ke=Fe.parent;Y.linePickActive(!1),Fe.x=Math.max(-x.overdrag,Math.min(Fe.model.width+x.overdrag,_.event.x)),Fe.canvasX=Fe.x*Fe.model.canvasPixelRatio,pe.sort(function(Ue,Be){return Ue.x-Be.x}).each(function(Ue,Be){Ue.xIndex=Be,Ue.x=Fe===Ue?Ue.x:Ue.xScale(Ue.xIndex),Ue.canvasX=Ue.x*Ue.model.canvasPixelRatio}),D(pe,Ke,q),pe.filter(function(Ue){return 0!==Math.abs(Fe.xIndex-Ue.xIndex)}).attr("transform",function(Ue){return d(Ue.xScale(Ue.xIndex),0)}),_.select(this).attr("transform",d(Fe.x,0)),pe.each(function(Ue,Be,Ie){Ie===Fe.parent.key&&(Ke.dimensions[Be]=Ue)}),Ke.contextLayer&&Ke.contextLayer.render(Ke.panels,!1,!C(Ke)),Ke.focusLayer.render&&Ke.focusLayer.render(Ke.panels)}).on("dragend",function(Fe){var Ke=Fe.parent;Fe.x=Fe.xScale(Fe.xIndex),Fe.canvasX=Fe.x*Fe.model.canvasPixelRatio,D(pe,Ke,q),_.select(this).attr("transform",function(Ue){return d(Ue.x,0)}),Ke.contextLayer&&Ke.contextLayer.render(Ke.panels,!1,!C(Ke)),Ke.focusLayer&&Ke.focusLayer.render(Ke.panels),Ke.pickLayer&&Ke.pickLayer.render(Ke.panels,!0),Y.linePickActive(!0),G&&G.axesMoved&&G.axesMoved(Ke.key,Ke.dimensions.map(function(Ue){return Ue.crossfilterDimensionIndex}))})),pe.exit().remove();var xe=pe.selectAll("."+x.cn.axisOverlays).data(g,r);xe.enter().append("g").classed(x.cn.axisOverlays,!0),xe.selectAll("."+x.cn.axis).remove();var ke=xe.selectAll("."+x.cn.axis).data(g,r);ke.enter().append("g").classed(x.cn.axis,!0),ke.each(function(Fe){var Ke=Fe.model.height/Fe.model.tickDistance,Ue=Fe.domainScale,Be=Ue.domain();_.select(this).call(_.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Ke,Fe.tickFormat).tickValues(Fe.ordinal?Be:null).tickFormat(function(Ie){return b.isOrdinal(Fe)?Ie:U(Fe.model.dimensions[Fe.visibleIndex],Ie)}).scale(Ue)),t.font(ke.selectAll("text"),Fe.model.tickFont)}),ke.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),ke.selectAll("text").style("text-shadow",n.makeTextShadow(K)).style("cursor","default");var we=xe.selectAll("."+x.cn.axisHeading).data(g,r);we.enter().append("g").classed(x.cn.axisHeading,!0);var de=we.selectAll("."+x.cn.axisTitle).data(g,r);de.enter().append("text").classed(x.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),de.text(function(Fe){return Fe.label}).each(function(Fe){var Ke=_.select(this);t.font(Ke,Fe.model.labelFont),n.convertToTspans(Ke,se)}).attr("transform",function(Fe){var Ke=F(Fe.model.labelAngle,Fe.model.labelSide),Ue=x.axisTitleOffset;return(Ke.dir>0?"":d(0,2*Ue+Fe.model.height))+c(Ke.degrees)+d(-Ue*Ke.dx,-Ue*Ke.dy)}).attr("text-anchor",function(Fe){var Ke=F(Fe.model.labelAngle,Fe.model.labelSide);return 2*Math.abs(Ke.dx)>Math.abs(Ke.dy)?Ke.dir*Ke.dx<0?"start":"end":"middle"});var be=xe.selectAll("."+x.cn.axisExtent).data(g,r);be.enter().append("g").classed(x.cn.axisExtent,!0);var Le=be.selectAll("."+x.cn.axisExtentTop).data(g,r);Le.enter().append("g").classed(x.cn.axisExtentTop,!0),Le.attr("transform",d(0,-x.axisExtentOffset));var De=Le.selectAll("."+x.cn.axisExtentTopText).data(g,r);De.enter().append("text").classed(x.cn.axisExtentTopText,!0).call(O),De.text(function(Fe){return X(Fe,!0)}).each(function(Fe){t.font(_.select(this),Fe.model.rangeFont)});var ye=be.selectAll("."+x.cn.axisExtentBottom).data(g,r);ye.enter().append("g").classed(x.cn.axisExtentBottom,!0),ye.attr("transform",function(Fe){return d(0,Fe.model.height+x.axisExtentOffset)});var Ce=ye.selectAll("."+x.cn.axisExtentBottomText).data(g,r);Ce.enter().append("text").classed(x.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(O),Ce.text(function(Fe){return X(Fe,!1)}).each(function(Fe){t.font(_.select(this),Fe.model.rangeFont)}),S.ensureAxisBrush(xe,K)}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"./axisbrush":889,"./constants":893,"./helpers":895,"./lines":897,"@plotly/d3":58,"color-rgba":91}],900:[function(v,ie,d){"use strict";var _=v("./parcoords"),k=v("../../lib/prepare_regl"),m=v("./helpers").isVisible,E={};function e(n,t,i){var a=t.indexOf(i),r=n.indexOf(a);return-1===r&&(r+=t.length),r}(ie.exports=function(t,i){var a=t._fullLayout;if(k(t,[],E)){var g={},s={},b={},x={},S=a._size;i.forEach(function(A,T){var M=A[0].trace;b[T]=M.index;var f=x[T]=M._fullInput.index;g[T]=t.data[f].dimensions,s[T]=t.data[f].dimensions.slice()});_(t,i,{width:S.w,height:S.h,margin:{t:S.t,r:S.r,b:S.b,l:S.l}},{filterChanged:function(A,T,M){var f=s[A][T],u=M.map(function(O){return O.slice()}),h="dimensions["+T+"].constraintrange",o=a._tracePreGUI[t._fullData[b[A]]._fullInput.uid];void 0===o[h]&&(o[h]=f.constraintrange||null);var R=t._fullData[b[A]].dimensions[T];u.length?(1===u.length&&(u=u[0]),f.constraintrange=u,R.constraintrange=u.slice(),u=[u]):(delete f.constraintrange,delete R.constraintrange,u=null);var z={};z[h]=u,t.emit("plotly_restyle",[z,[x[A]]])},hover:function(A){t.emit("plotly_hover",A)},unhover:function(A){t.emit("plotly_unhover",A)},axesMoved:function(A,T){var M=function c(n,t){return function(a,r){return e(n,t,a)-e(n,t,r)}}(T,s[A].filter(m));g[A].sort(M),s[A].filter(function(f){return!m(f)}).sort(function(f){return s[A].indexOf(f)}).forEach(function(f){g[A].splice(g[A].indexOf(f),1),g[A].splice(s[A].indexOf(f),0,f)}),t.emit("plotly_restyle",[{dimensions:[g[A]]},[x[A]]])}})}}).reglPrecompiled=E},{"../../lib/prepare_regl":516,"./helpers":895,"./parcoords":899}],901:[function(v,ie,ae){"use strict";var _=v("../../plots/attributes"),k=v("../../plots/domain").attributes,m=v("../../plots/font_attributes"),E=v("../../components/color/attributes"),e=v("../../plots/template_attributes").hovertemplateAttrs,c=v("../../plots/template_attributes").texttemplateAttrs,d=v("../../lib/extend").extendFlat,n=m({editType:"plot",arrayOk:!0,colorEditType:"plot"});ie.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:E.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:d({},_.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:c({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:d({},n,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:d({},n,{}),outsidetextfont:d({},n,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:d({},n,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:k({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:d({},n,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],902:[function(v,ie,ae){"use strict";var _=v("../../plots/plots");ae.name="pie",ae.plot=function(k,m,E,e){_.plotBasePlot(ae.name,k,m,E,e)},ae.clean=function(k,m,E,e){_.cleanBasePlot(ae.name,k,m,E,e)}},{"../../plots/plots":619}],903:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("tinycolor2"),m=v("../../components/color"),E={};function c(t){return function(a,r){return!(!a||(a=k(a),!a.isValid()))&&(a=m.addOpacity(a,a.getAlpha()),t[r]||(t[r]=a),a)}}function n(t,i){var a,r=JSON.stringify(t),g=i[r];if(!g){for(g=t.slice(),a=0;a<t.length;a++)g.push(k(t[a]).lighten(20).toHexString());for(a=0;a<t.length;a++)g.push(k(t[a]).darken(20).toHexString());i[r]=g}return g}ie.exports={calc:function e(t,i){var w,l,a=[],r=t._fullLayout,g=r.hiddenlabels||[],s=i.labels,b=i.marker.colors||[],x=i.values,S=i._length,p=i._hasValues&&S;if(i.dlabel)for(s=new Array(S),w=0;w<S;w++)s[w]=String(i.label0+w*i.dlabel);var y={},A=c(r["_"+i.type+"colormap"]),T=0,M=!1;for(w=0;w<S;w++){var f,u,h;if(p){if(!_(f=x[w]))continue;f=+f}else f=1;(void 0===(u=s[w])||""===u)&&(u=w);var o=y[u=String(u)];void 0===o?(y[u]=a.length,(h=-1!==g.indexOf(u))||(T+=f),a.push({v:f,label:u,color:A(b[w],u),i:w,pts:[w],hidden:h})):(M=!0,(l=a[o]).v+=f,l.pts.push(w),l.hidden||(T+=f),!1===l.color&&b[w]&&(l.color=A(b[w],u)))}return a=a.filter(function(R){return R.v>=0}),("funnelarea"===i.type?M:i.sort)&&a.sort(function(R,z){return z.v-R.v}),a[0]&&(a[0].vTotal=T),a},crossTraceCalc:function d(t,i){var a=(i||{}).type;a||(a="pie");var r=t._fullLayout,g=t.calcdata,s=r[a+"colorway"],b=r["_"+a+"colormap"];r["extend"+a+"colors"]&&(s=n(s,E));for(var x=0,S=0;S<g.length;S++){var p=g[S];if(p[0].trace.type===a)for(var l=0;l<p.length;l++){var y=p[l];!1===y.color&&(b[y.label]?y.color=b[y.label]:(b[y.label]=y.color=s[x%s.length],x++))}}},makePullColorFn:c,generateExtendedColors:n}},{"../../components/color":366,"fast-isnumeric":190,tinycolor2:312}],904:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../lib"),m=v("./attributes"),E=v("../../plots/domain").defaults,e=v("../bar/defaults").handleText;function c(n,t){var i=Array.isArray(n),a=k.isArrayOrTypedArray(t),r=Math.min(i?n.length:1/0,a?t.length:1/0);if(isFinite(r)||(r=0),r&&a){for(var g,s=0;s<r;s++){var b=t[s];if(_(b)&&b>0){g=!0;break}}g||(r=0)}return{hasLabels:i,hasValues:a,len:r}}ie.exports={handleLabelsAndValues:c,supplyDefaults:function d(n,t,i,a){function r(h,o){return k.coerce(n,t,m,h,o)}var b=c(r("labels"),r("values")),x=b.len;if(t._hasLabels=b.hasLabels,t._hasValues=b.hasValues,!t._hasLabels&&t._hasValues&&(r("label0"),r("dlabel")),x){t._length=x,r("marker.line.width")&&r("marker.line.color"),r("marker.colors"),r("scalegroup");var l,p=r("text"),w=r("texttemplate");if(w||(l=r("textinfo",Array.isArray(p)?"text+percent":"percent")),r("hovertext"),r("hovertemplate"),w||l&&"none"!==l){var y=r("textposition");e(n,t,a,r,y,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(y)||"auto"===y||"outside"===y)&&r("automargin"),("inside"===y||"auto"===y||Array.isArray(y))&&r("insidetextorientation")}E(t,a,r);var M=r("hole");if(r("title.text")){var u=r("title.position",M?"middle center":"top center");!M&&"middle center"===u&&(t.title.position="top center"),k.coerceFont(r,"title.font",a.font)}r("sort"),r("direction"),r("rotation"),r("pull")}else t.visible=!1}}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":901,"fast-isnumeric":190}],905:[function(v,ie,ae){"use strict";var _=v("../../components/fx/helpers").appendArrayMultiPointValues;ie.exports=function(m,E){var e={curveNumber:E.index,pointNumbers:m.pts,data:E._input,fullData:E,label:m.label,color:m.color,value:m.v,percent:m.percent,text:m.text,bbox:m.bbox,v:m.v};return 1===m.pts.length&&(e.pointNumber=e.i=m.pts[0]),_(e,E,m.pts),"funnelarea"===E.type&&(delete e.v,delete e.i),e}},{"../../components/fx/helpers":402}],906:[function(v,ie,ae){"use strict";var _=v("../../lib");function k(m){return-1!==m.indexOf("e")?m.replace(/[.]?0+e/,"e"):-1!==m.indexOf(".")?m.replace(/[.]?0+$/,""):m}ae.formatPiePercent=function(E,e){var c=k((100*E).toPrecision(3));return _.numSeparate(c,e)+"%"},ae.formatPieValue=function(E,e){var c=k(E.toPrecision(10));return _.numSeparate(c,e)},ae.getFirstFilled=function(E,e){if(Array.isArray(E))for(var c=0;c<e.length;c++){var d=E[e[c]];if(d||0===d||""===d)return d}},ae.castOption=function(E,e){return Array.isArray(E)?ae.getFirstFilled(E,e):E||void 0},ae.getRotationAngle=function(m){return("auto"===m?0:m)*Math.PI/180}},{"../../lib":503}],907:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults").supplyDefaults,supplyLayoutDefaults:v("./layout_defaults"),layoutAttributes:v("./layout_attributes"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot").plot,style:v("./style"),styleOne:v("./style_one"),moduleType:"trace",name:"pie",basePlotModule:v("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":901,"./base_plot":902,"./calc":903,"./defaults":904,"./layout_attributes":908,"./layout_defaults":909,"./plot":910,"./style":911,"./style_one":912}],908:[function(v,ie,ae){"use strict";ie.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],909:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./layout_attributes");ie.exports=function(E,e){function c(d,n){return _.coerce(E,e,k,d,n)}c("hiddenlabels"),c("piecolorway",e.colorway),c("extendpiecolors")}},{"../../lib":503,"./layout_attributes":908}],910:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../plots/plots"),m=v("../../components/fx"),E=v("../../components/color"),e=v("../../components/drawing"),c=v("../../lib"),d=c.strScale,n=c.strTranslate,t=v("../../lib/svg_text_utils"),i=v("../bar/uniform_text"),a=i.recordMinTextSize,r=i.clearMinTextSize,g=v("../bar/constants").TEXTPAD,s=v("./helpers"),b=v("./event_data"),x=v("../../lib").isValidTextValue;function w($,V,H){var q=H[0],K=q.cx,Y=q.cy,te=q.trace,J="funnelarea"===te.type;"_hasHoverLabel"in te||(te._hasHoverLabel=!1),"_hasHoverEvent"in te||(te._hasHoverEvent=!1),$.on("mouseover",function(j){var re=V._fullLayout,le=V._fullData[te.index];if(!V._dragging&&!1!==re.hovermode){var ge=le.hoverinfo;if(Array.isArray(ge)&&(ge=m.castHoverinfo({hoverinfo:[s.castOption(ge,j.pts)],_module:te._module},re,0)),"all"===ge&&(ge="label+text+value+percent+name"),le.hovertemplate||"none"!==ge&&"skip"!==ge&&ge){var pe=j.rInscribed||0,xe=K+j.pxmid[0]*(1-pe),ke=Y+j.pxmid[1]*(1-pe),we=re.separators,de=[];if(ge&&-1!==ge.indexOf("label")&&de.push(j.label),j.text=s.castOption(le.hovertext||le.text,j.pts),ge&&-1!==ge.indexOf("text")){var be=j.text;c.isValidTextValue(be)&&de.push(be)}j.value=j.v,j.valueLabel=s.formatPieValue(j.v,we),ge&&-1!==ge.indexOf("value")&&de.push(j.valueLabel),j.percent=j.v/q.vTotal,j.percentLabel=s.formatPiePercent(j.percent,we),ge&&-1!==ge.indexOf("percent")&&de.push(j.percentLabel);var Le=le.hoverlabel,De=Le.font,ye=[];m.loneHover({trace:te,x0:xe-pe*q.r,x1:xe+pe*q.r,y:ke,_x0:J?K+j.TL[0]:xe-pe*q.r,_x1:J?K+j.TR[0]:xe+pe*q.r,_y0:J?Y+j.TL[1]:ke-pe*q.r,_y1:J?Y+j.BL[1]:ke+pe*q.r,text:de.join("<br>"),name:le.hovertemplate||-1!==ge.indexOf("name")?le.name:void 0,idealAlign:j.pxmid[0]<0?"left":"right",color:s.castOption(Le.bgcolor,j.pts)||j.color,borderColor:s.castOption(Le.bordercolor,j.pts),fontFamily:s.castOption(De.family,j.pts),fontSize:s.castOption(De.size,j.pts),fontColor:s.castOption(De.color,j.pts),nameLength:s.castOption(Le.namelength,j.pts),textAlign:s.castOption(Le.align,j.pts),hovertemplate:s.castOption(le.hovertemplate,j.pts),hovertemplateLabels:j,eventData:[b(j,le)]},{container:re._hoverlayer.node(),outerContainer:re._paper.node(),gd:V,inOut_bbox:ye}),j.bbox=ye[0],te._hasHoverLabel=!0}te._hasHoverEvent=!0,V.emit("plotly_hover",{points:[b(j,le)],event:_.event})}}),$.on("mouseout",function(j){var re=V._fullLayout,le=V._fullData[te.index],ge=_.select(this).datum();te._hasHoverEvent&&(j.originalEvent=_.event,V.emit("plotly_unhover",{points:[b(ge,le)],event:_.event}),te._hasHoverEvent=!1),te._hasHoverLabel&&(m.loneUnhover(re._hoverlayer.node()),te._hasHoverLabel=!1)}),$.on("click",function(j){V._dragging||!1===V._fullLayout.hovermode||(V._hoverdata=[b(j,V._fullData[te.index])],m.click(V,_.event))})}function y($,V,H){var q=s.castOption($.insidetextfont.color,V.pts);!q&&$._input.textfont&&(q=s.castOption($._input.textfont.color,V.pts));var K=s.castOption($.insidetextfont.family,V.pts)||s.castOption($.textfont.family,V.pts)||H.family,Y=s.castOption($.insidetextfont.size,V.pts)||s.castOption($.textfont.size,V.pts)||H.size;return{color:q||E.contrast(V.color),family:K,size:Y}}function A($,V){for(var H,q,K=0;K<$.length;K++)if((q=(H=$[K][0]).trace).title.text){var Y=q.title.text;q._meta&&(Y=c.templateString(Y,q._meta));var te=e.tester.append("text").attr("data-notex",1).text(Y).call(e.font,q.title.font).call(t.convertToTspans,V),J=e.bBox(te.node(),!0);H.titleBox={width:J.width,height:J.height},te.remove()}}function T($,V,H){var q=H.r||V.rpx1,K=V.rInscribed;if(V.startangle===V.stopangle)return{rCenter:1-K,scale:0,rotate:0,textPosAngle:0};var de,te=V.ring,J=1===te&&Math.abs(V.startangle-V.stopangle)===2*Math.PI,j=V.halfangle,re=V.midangle,le=H.trace.insidetextorientation,ge="horizontal"===le,pe="tangential"===le,xe="radial"===le,ke="auto"===le,we=[];if(!ke){var Le,be=function(Ue,Be){if(function M($,V){var H=$.startangle,q=$.stopangle;return H>V&&V>q||H<V&&V<q}(V,Ue)){var Ie=Math.abs(Ue-V.startangle),nt=Math.abs(Ue-V.stopangle),gt=Ie<nt?Ie:nt;(de="tan"===Be?u($,q,te,gt,0):f($,q,te,gt,Math.PI/2)).textPosAngle=Ue,we.push(de)}};if(ge||pe){for(Le=4;Le>=-4;Le-=2)be(Math.PI*Le,"tan");for(Le=4;Le>=-4;Le-=2)be(Math.PI*(Le+1),"tan")}if(ge||xe){for(Le=4;Le>=-4;Le-=2)be(Math.PI*(Le+1.5),"rad");for(Le=4;Le>=-4;Le-=2)be(Math.PI*(Le+.5),"rad")}}if(J||ke||ge){var De=Math.sqrt($.width*$.width+$.height*$.height);if((de={scale:K*q*2/De,rCenter:1-K,rotate:0}).textPosAngle=(V.startangle+V.stopangle)/2,de.scale>=1)return de;we.push(de)}(ke||xe)&&((de=f($,q,te,j,re)).textPosAngle=(V.startangle+V.stopangle)/2,we.push(de)),(ke||pe)&&((de=u($,q,te,j,re)).textPosAngle=(V.startangle+V.stopangle)/2,we.push(de));for(var ye=0,Ce=0,Fe=0;Fe<we.length;Fe++){var Ke=we[Fe].scale;if(Ce<Ke&&(Ce=Ke,ye=Fe),!ke&&Ce>=1)break}return we[ye]}function f($,V,H,q,K){V=Math.max(0,V-2*g);var Y=$.width/$.height,te=C(Y,q,V,H);return{scale:2*te/$.height,rCenter:h(Y,te/V),rotate:o(K)}}function u($,V,H,q,K){V=Math.max(0,V-2*g);var Y=$.height/$.width,te=C(Y,q,V,H);return{scale:2*te/$.width,rCenter:h(Y,te/V),rotate:o(K+Math.PI/2)}}function h($,V){return Math.cos(V)-$*V}function o($){return(180/Math.PI*$+720)%180-90}function C($,V,H,q){var K=$+1/(2*Math.tan(V));return H*Math.min(1/(Math.sqrt(K*K+.5)+K),q/(Math.sqrt($*$+q/2)+$))}function R($,V){return $.v!==V.vTotal||V.trace.hole?Math.min(1/(1+1/Math.sin($.halfangle)),$.ring/2):1}function z($,V){var H=V.pxmid[0],q=V.pxmid[1],K=$.width/2,Y=$.height/2;return H<0&&(K*=-1),q<0&&(Y*=-1),{scale:1,rCenter:1,rotate:0,x:K+Math.abs(Y)*(K>0?1:-1)/2,y:Y/(1+H*H/(q*q)),outside:!0}}function I($,V){var K,H,q,Y=$.trace,te={x:$.cx,y:$.cy},J={tx:0,ty:0};J.ty+=Y.title.font.size,K=N(Y),-1!==Y.title.position.indexOf("top")?(te.y-=(1+K)*$.r,J.ty-=$.titleBox.height):-1!==Y.title.position.indexOf("bottom")&&(te.y+=(1+K)*$.r);var j=function F($,V){return $/(void 0===V?1:V)}($.r,$.trace.aspectratio),re=V.w*(Y.domain.x[1]-Y.domain.x[0])/2;return-1!==Y.title.position.indexOf("left")?(re+=j,te.x-=(1+K)*j,J.tx+=$.titleBox.width/2):-1!==Y.title.position.indexOf("center")?re*=2:-1!==Y.title.position.indexOf("right")&&(re+=j,te.x+=(1+K)*j,J.tx-=$.titleBox.width/2),H=re/$.titleBox.width,q=D($,V)/$.titleBox.height,{x:te.x,y:te.y,scale:Math.min(H,q),tx:J.tx,ty:J.ty}}function D($,V){var H=$.trace;return Math.min($.titleBox.height,V.h*(H.domain.y[1]-H.domain.y[0])/2)}function N($){var H,V=$.pull;if(!V)return 0;if(Array.isArray(V))for(V=0,H=0;H<$.pull.length;H++)$.pull[H]>V&&(V=$.pull[H]);return V}function X($,V){for(var H=[],q=0;q<$.length;q++){var K=$[q][0],Y=K.trace,te=Y.domain,J=V.w*(te.x[1]-te.x[0]),j=V.h*(te.y[1]-te.y[0]);Y.title.text&&"middle center"!==Y.title.position&&(j-=D(K,V));var le=j/2;"funnelarea"===Y.type&&!Y.scalegroup&&(le/=Y.aspectratio),K.r=Math.min(J/2,le)/(1+N(Y)),K.cx=V.l+V.w*(Y.domain.x[1]+Y.domain.x[0])/2,K.cy=V.t+V.h*(1-Y.domain.y[0])-j/2,Y.title.text&&-1!==Y.title.position.indexOf("bottom")&&(K.cy-=D(K,V)),Y.scalegroup&&-1===H.indexOf(Y.scalegroup)&&H.push(Y.scalegroup)}!function oe($,V){for(var H,q,K,Y=0;Y<V.length;Y++){var te=1/0,J=V[Y];for(q=0;q<$.length;q++)if((K=(H=$[q][0]).trace).scalegroup===J){var j;if("pie"===K.type)j=H.r*H.r;else if("funnelarea"===K.type){var re,le;K.aspectratio>1?le=(re=H.r)/K.aspectratio:re=(le=H.r)*K.aspectratio,j=(re*=(1+K.baseratio)/2)*le}te=Math.min(te,j/H.vTotal)}for(q=0;q<$.length;q++)if((K=(H=$[q][0]).trace).scalegroup===J){var ge=te*H.vTotal;"funnelarea"===K.type&&(ge/=(1+K.baseratio)/2,ge/=K.aspectratio),H.r=Math.sqrt(ge)}}}($,H)}function ne($,V){return[$*Math.sin(V),-$*Math.cos(V)]}function W($,V,H){var q=$._fullLayout,K=H.trace,Y=K.texttemplate,te=K.textinfo;if(!Y&&te&&"none"!==te){var ke,J=te.split("+"),j=function(ye){return-1!==J.indexOf(ye)},re=j("label"),le=j("text"),ge=j("value"),pe=j("percent"),xe=q.separators;if(ke=re?[V.label]:[],le){var we=s.getFirstFilled(K.text,V.pts);x(we)&&ke.push(we)}ge&&ke.push(s.formatPieValue(V.v,xe)),pe&&ke.push(s.formatPiePercent(V.v/H.vTotal,xe)),V.text=ke.join("<br>")}if(Y){var be=c.castOption(K,V.i,"texttemplate");if(be){var Le=function de(ye){return{label:ye.label,value:ye.v,valueLabel:s.formatPieValue(ye.v,q.separators),percent:ye.v/H.vTotal,percentLabel:s.formatPiePercent(ye.v/H.vTotal,q.separators),color:ye.color,text:ye.text,customdata:c.castOption(K,ye.i,"customdata")}}(V),De=s.getFirstFilled(K.text,V.pts);(x(De)||""===De)&&(Le.text=De),V.text=c.texttemplateString(be,Le,$._fullLayout._d3locale,Le,K._meta||{})}else V.text=""}}function G($,V){var H=$.rotate*Math.PI/180,q=Math.cos(H),K=Math.sin(H),Y=(V.left+V.right)/2,te=(V.top+V.bottom)/2;$.textX=Y*q-te*K,$.textY=Y*K+te*q,$.noCenter=!0}ie.exports={plot:function S($,V){var H=$._fullLayout,q=H._size;r("pie",H),A(V,$),X(V,q);var K=c.makeTraceGroups(H._pielayer,V,"trace").each(function(Y){var te=_.select(this),J=Y[0],j=J.trace;(function se($){var j,re,le,V=$[0],H=V.r,q=V.trace,K=s.getRotationAngle(q.rotation),Y=2*Math.PI/V.vTotal,te="px0",J="px1";if("counterclockwise"===q.direction){for(j=0;j<$.length&&$[j].hidden;j++);if(j===$.length)return;K+=Y*$[j].v,Y*=-1,te="px1",J="px0"}for(le=ne(H,K),j=0;j<$.length;j++)!(re=$[j]).hidden&&(re[te]=le,re.startangle=K,re.pxmid=ne(H,K+=Y*re.v/2),re.midangle=K,le=ne(H,K+=Y*re.v/2),re.stopangle=K,re[J]=le,re.largeArc=re.v>V.vTotal/2?1:0,re.halfangle=Math.PI*Math.min(re.v/V.vTotal,.5),re.ring=1-q.hole,re.rInscribed=R(re,V))})(Y),te.attr("stroke-linejoin","round"),te.each(function(){var re=_.select(this).selectAll("g.slice").data(Y);re.enter().append("g").classed("slice",!0),re.exit().remove();var le=[[[],[]],[[],[]]],ge=!1;re.each(function(De,ye){if(De.hidden)_.select(this).selectAll("path,g").remove();else{De.pointNumber=De.i,De.curveNumber=j.index,le[De.pxmid[1]<0?0:1][De.pxmid[0]<0?0:1].push(De);var Ce=J.cx,Fe=J.cy,Ke=_.select(this),Ue=Ke.selectAll("path.surface").data([De]);if(Ue.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),Ke.call(w,$,Y),j.pull){var Be=+s.castOption(j.pull,De.pts)||0;Be>0&&(Ce+=Be*De.pxmid[0],Fe+=Be*De.pxmid[1])}De.cxFinal=Ce,De.cyFinal=Fe;var nt=j.hole;if(De.v===J.vTotal){var gt="M"+(Ce+De.px0[0])+","+(Fe+De.px0[1])+Ie(De.px0,De.pxmid,!0,1)+Ie(De.pxmid,De.px0,!0,1)+"Z";Ue.attr("d",nt?"M"+(Ce+nt*De.px0[0])+","+(Fe+nt*De.px0[1])+Ie(De.px0,De.pxmid,!1,nt)+Ie(De.pxmid,De.px0,!1,nt)+"Z"+gt:gt)}else{var Nt=Ie(De.px0,De.px1,!0,1);if(nt){var St=1-nt;Ue.attr("d","M"+(Ce+nt*De.px1[0])+","+(Fe+nt*De.px1[1])+Ie(De.px1,De.px0,!1,nt)+"l"+St*De.px0[0]+","+St*De.px0[1]+Nt+"Z")}else Ue.attr("d","M"+Ce+","+Fe+"l"+De.px0[0]+","+De.px0[1]+Nt+"Z")}W($,De,J);var Bt=s.castOption(j.textposition,De.pts),Zt=Ke.selectAll("g.slicetext").data(De.text&&"none"!==Bt?[0]:[]);Zt.enter().append("g").classed("slicetext",!0),Zt.exit().remove(),Zt.each(function(){var Et=c.ensureSingle(_.select(this),"text","",function(rt){rt.attr("data-notex",1)}),wt=c.ensureUniformFontSize($,"outside"===Bt?function l($,V,H){return{color:s.castOption($.outsidetextfont.color,V.pts)||s.castOption($.textfont.color,V.pts)||H.color,family:s.castOption($.outsidetextfont.family,V.pts)||s.castOption($.textfont.family,V.pts)||H.family,size:s.castOption($.outsidetextfont.size,V.pts)||s.castOption($.textfont.size,V.pts)||H.size}}(j,De,H.font):y(j,De,H.font));Et.text(De.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,wt).call(t.convertToTspans,$);var vt,at=e.bBox(Et.node());if("outside"===Bt)vt=z(at,De);else if(vt=T(at,De,J),"auto"===Bt&&vt.scale<1){var Qe=c.ensureUniformFontSize($,j.outsidetextfont);Et.call(e.font,Qe),vt=z(at=e.bBox(Et.node()),De)}var Pe=vt.textPosAngle,Ze=void 0===Pe?De.pxmid:ne(J.r,Pe);if(vt.targetX=Ce+Ze[0]*vt.rCenter+(vt.x||0),vt.targetY=Fe+Ze[1]*vt.rCenter+(vt.y||0),G(vt,at),vt.outside){var Xe=vt.targetY;De.yLabelMin=Xe-at.height/2,De.yLabelMid=Xe,De.yLabelMax=Xe+at.height/2,De.labelExtraX=0,De.labelExtraY=0,ge=!0}vt.fontSize=wt.size,a(j.type,vt,H),Y[ye].transform=vt,Et.attr("transform",c.getTextTransform(vt))})}function Ie(Et,wt,at,vt){return"a"+vt*J.r+","+vt*J.r+" 0 "+De.largeArc+(at?" 1 ":" 0 ")+vt*(wt[0]-Et[0])+","+vt*(wt[1]-Et[1])}});var pe=_.select(this).selectAll("g.titletext").data(j.title.text?[0]:[]);if(pe.enter().append("g").classed("titletext",!0),pe.exit().remove(),pe.each(function(){var Ce,De=c.ensureSingle(_.select(this),"text","",function(Fe){Fe.attr("data-notex",1)}),ye=j.title.text;j._meta&&(ye=c.templateString(ye,j._meta)),De.text(ye).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,j.title.font).call(t.convertToTspans,$),Ce="middle center"===j.title.position?function O($){var V=Math.sqrt($.titleBox.width*$.titleBox.width+$.titleBox.height*$.titleBox.height);return{x:$.cx,y:$.cy,scale:$.trace.hole*$.r*2/V,tx:0,ty:-$.titleBox.height/2+$.trace.title.font.size}}(J):I(J,q),De.attr("transform",n(Ce.x,Ce.y)+d(Math.min(1,Ce.scale))+n(Ce.tx,Ce.ty))}),ge&&function U($,V){var H,q,K,Y,te,J,j,re,le,ge,pe,xe,ke;function we(De,ye){return De.pxmid[1]-ye.pxmid[1]}function de(De,ye){return ye.pxmid[1]-De.pxmid[1]}function be(De,ye){ye||(ye={});var Ie,nt,gt,Bt,Ce=ye.labelExtraY+(q?ye.yLabelMax:ye.yLabelMin),Fe=q?De.yLabelMin:De.yLabelMax,Ke=q?De.yLabelMax:De.yLabelMin,Ue=De.cyFinal+te(De.px0[1],De.px1[1]),Be=Ce-Fe;if(Be*j>0&&(De.labelExtraY=Be),Array.isArray(V.pull))for(nt=0;nt<ge.length;nt++)!((gt=ge[nt])===De||(s.castOption(V.pull,De.pts)||0)>=(s.castOption(V.pull,gt.pts)||0))&&((De.pxmid[1]-gt.pxmid[1])*j>0?(Be=gt.cyFinal+te(gt.px0[1],gt.px1[1])-Fe-De.labelExtraY)*j>0&&(De.labelExtraY+=Be):(Ke+De.labelExtraY-Ue)*j>0&&(Ie=3*J*Math.abs(nt-ge.indexOf(De)),(Bt=gt.cxFinal+Y(gt.px0[0],gt.px1[0])+Ie-(De.cxFinal+De.pxmid[0])-De.labelExtraX)*J>0&&(De.labelExtraX+=Bt)))}for(q=0;q<2;q++)for(K=q?we:de,te=q?Math.max:Math.min,j=q?1:-1,H=0;H<2;H++){for(Y=H?Math.max:Math.min,J=H?1:-1,(re=$[q][H]).sort(K),ge=(le=$[1-q][H]).concat(re),xe=[],pe=0;pe<re.length;pe++)void 0!==re[pe].yLabelMid&&xe.push(re[pe]);for(ke=!1,pe=0;q&&pe<le.length;pe++)if(void 0!==le[pe].yLabelMid){ke=le[pe];break}for(pe=0;pe<xe.length;pe++){var Le=pe&&xe[pe-1];ke&&!pe&&(Le=ke),be(xe[pe],Le)}}}(le,j),function p($,V){$.each(function(H){var q=_.select(this);if(H.labelExtraX||H.labelExtraY){var K=q.select("g.slicetext text");H.transform.targetX+=H.labelExtraX,H.transform.targetY+=H.labelExtraY,K.attr("transform",c.getTextTransform(H.transform));var Y=H.cxFinal+H.pxmid[0],J="M"+Y+","+(H.cyFinal+H.pxmid[1]),j=(H.yLabelMax-H.yLabelMin)*(H.pxmid[0]<0?-1:1)/4;if(H.labelExtraX){var re=H.labelExtraX*H.pxmid[1]/H.pxmid[0],le=H.yLabelMid+H.labelExtraY-(H.cyFinal+H.pxmid[1]);Math.abs(re)>Math.abs(le)?J+="l"+le*H.pxmid[0]/H.pxmid[1]+","+le+"H"+(Y+H.labelExtraX+j):J+="l"+H.labelExtraX+","+re+"v"+(le-re)+"h"+j}else J+="V"+(H.yLabelMid+H.labelExtraY)+"h"+j;c.ensureSingle(q,"path","textline").call(E.stroke,V.outsidetextfont.color).attr({"stroke-width":Math.min(2,V.outsidetextfont.size/8),d:J,fill:"none"})}else q.select("path.textline").remove()})}(re,j),ge&&j.automargin){var xe=e.bBox(te.node()),ke=j.domain,be=(q.w*(ke.x[1]-ke.x[0])*.5-J.r)/q.w,Le=(q.h*(ke.y[1]-ke.y[0])*.5-J.r)/q.h;k.autoMargin($,"pie."+j.uid+".automargin",{xl:ke.x[0]-be,xr:ke.x[1]+be,yb:ke.y[0]-Le,yt:ke.y[1]+Le,l:Math.max(J.cx-J.r-xe.left,0),r:Math.max(xe.right-(J.cx+J.r),0),b:Math.max(xe.bottom-(J.cy+J.r),0),t:Math.max(J.cy-J.r-xe.top,0),pad:5})}})});setTimeout(function(){K.selectAll("tspan").each(function(){var Y=_.select(this);Y.attr("dy")&&Y.attr("dy",Y.attr("dy"))})},0)},formatSliceLabel:W,transformInsideText:T,determineInsideTextFont:y,positionTitleOutside:I,prerenderTitles:A,layoutAreas:X,attachFxHandlers:w,computeTransform:G}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../bar/constants":650,"../bar/uniform_text":664,"./event_data":905,"./helpers":906,"@plotly/d3":58}],911:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("./style_one"),m=v("../bar/uniform_text").resizeText;ie.exports=function(e){var c=e._fullLayout._pielayer.selectAll(".trace");m(e,c,"pie"),c.each(function(d){var t=d[0].trace,i=_.select(this);i.style({opacity:t.opacity}),i.selectAll("path.surface").each(function(a){_.select(this).call(k,a,t)})})}},{"../bar/uniform_text":664,"./style_one":912,"@plotly/d3":58}],912:[function(v,ie,ae){"use strict";var _=v("../../components/color"),k=v("./helpers").castOption;ie.exports=function(E,e,c){var d=c.marker.line,n=k(d.color,e.pts)||_.defaultLine,t=k(d.width,e.pts)||0;E.style("stroke-width",t).call(_.fill,e.color).call(_.stroke,n)}},{"../../components/color":366,"./helpers":906}],913:[function(v,ie,ae){"use strict";var _=v("../scatter/attributes");ie.exports={x:_.x,y:_.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:_.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":927}],914:[function(v,ie,ae){"use strict";var _=v("../../../stackgl_modules").gl_pointcloud2d,k=v("../../lib/str2rgbarray"),m=v("../../plots/cartesian/autorange").findExtremes,E=v("../scatter/get_trace_color");function e(n,t){this.scene=n,this.uid=t,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=_(n.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var c=e.prototype;c.handlePick=function(n){var t=this.idToIndex[n.pointId];return{trace:this,dataCoord:n.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*t],this.pickXYData[2*t+1]]:[this.pickXData[t],this.pickYData[t]],textLabel:Array.isArray(this.textLabels)?this.textLabels[t]:this.textLabels,color:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}},c.update=function(n){this.index=n.index,this.textLabels=n.text,this.name=n.name,this.hoverinfo=n.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(n),this.color=E(n,{})},c.updateFast=function(n){var s,b,x,p,w,l,t=this.xData=this.pickXData=n.x,i=this.yData=this.pickYData=n.y,a=this.pickXYData=n.xy,g=n.indices,S=this.bounds;if(a){if(x=a,s=a.length>>>1,n.xbounds&&n.ybounds)S[0]=n.xbounds[0],S[2]=n.xbounds[1],S[1]=n.ybounds[0],S[3]=n.ybounds[1];else for(l=0;l<s;l++)w=x[2*l+1],(p=x[2*l])<S[0]&&(S[0]=p),p>S[2]&&(S[2]=p),w<S[1]&&(S[1]=w),w>S[3]&&(S[3]=w);if(g)b=g;else for(b=new Int32Array(s),l=0;l<s;l++)b[l]=l}else for(s=t.length,x=new Float32Array(2*s),b=new Int32Array(s),l=0;l<s;l++)p=t[l],w=i[l],b[l]=l,x[2*l]=p,x[2*l+1]=w,p<S[0]&&(S[0]=p),p>S[2]&&(S[2]=p),w<S[1]&&(S[1]=w),w>S[3]&&(S[3]=w);this.idToIndex=b,this.pointcloudOptions.idToIndex=b,this.pointcloudOptions.positions=x;var y=k(n.marker.color),A=k(n.marker.border.color),T=n.opacity*n.marker.opacity;y[3]*=T,this.pointcloudOptions.color=y;var M=n.marker.blend;if(null===M){M=t.length<100||i.length<100}this.pointcloudOptions.blend=M,A[3]*=T,this.pointcloudOptions.borderColor=A;var u=n.marker.sizemin,h=Math.max(n.marker.sizemax,n.marker.sizemin);this.pointcloudOptions.sizeMin=u,this.pointcloudOptions.sizeMax=h,this.pointcloudOptions.areaRatio=n.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var o=this.scene.xaxis,C=this.scene.yaxis,R=h/2||.5;n._extremes[o._id]=m(o,[S[0],S[2]],{ppad:R}),n._extremes[C._id]=m(C,[S[1],S[3]],{ppad:R})},c.dispose=function(){this.pointcloud.dispose()},ie.exports=function d(n,t){var i=new e(n,t.uid);return i.update(t),i}},{"../../../stackgl_modules":1124,"../../lib/str2rgbarray":528,"../../plots/cartesian/autorange":553,"../scatter/get_trace_color":937}],915:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./attributes");ie.exports=function(E,e,c){function d(n,t){return _.coerce(E,e,k,n,t)}d("x"),d("y"),d("xbounds"),d("ybounds"),E.xy&&E.xy instanceof Float32Array&&(e.xy=E.xy),E.indices&&E.indices instanceof Int32Array&&(e.indices=E.indices),d("text"),d("marker.color",c),d("marker.opacity"),d("marker.blend"),d("marker.sizemin"),d("marker.sizemax"),d("marker.border.color",c),d("marker.border.arearatio"),e._length=null}},{"../../lib":503,"./attributes":913}],916:[function(v,ie,ae){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("../scatter3d/calc"),plot:v("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:v("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":596,"../scatter3d/calc":956,"./attributes":913,"./convert":914,"./defaults":915}],917:[function(v,ie,ae){"use strict";var _=v("../../plots/font_attributes"),k=v("../../plots/attributes"),m=v("../../components/color/attributes"),E=v("../../components/fx/attributes"),e=v("../../plots/domain").attributes,c=v("../../plots/template_attributes").hovertemplateAttrs,d=v("../../components/colorscale/attributes"),n=v("../../plot_api/plot_template").templatedArray,t=v("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,i=v("../../lib/extend").extendFlat,a=v("../../plot_api/edit_types").overrideAll;(ie.exports=a({hoverinfo:i({},k.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:E.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:t("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:_({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:m.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:E.hoverlabel,hovertemplate:c({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:m.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:E.hoverlabel,hovertemplate:c({},{keys:["value","label"]}),colorscales:n("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:i(d().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../components/fx/attributes":397,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],918:[function(v,ie,ae){"use strict";var _=v("../../plot_api/edit_types").overrideAll,k=v("../../plots/get_data").getModuleCalcData,m=v("./plot"),E=v("../../components/fx/layout_attributes"),e=v("../../lib/setcursor"),c=v("../../components/dragelement"),d=v("../../plots/cartesian/select").prepSelect,n=v("../../lib"),t=v("../../registry"),i="sankey";function a(r,g){var s=r._fullData[g],b=r._fullLayout,x=b.dragmode,p=s._bgRect;if("pan"!==x&&"zoom"!==x){e(p,"pan"===b.dragmode?"move":"crosshair");var w={_id:"x",c2p:n.identity,_offset:s._sankey.translateX,_length:s._sankey.width},l={_id:"y",c2p:n.identity,_offset:s._sankey.translateY,_length:s._sankey.height},y={gd:r,element:p.node(),plotinfo:{id:g,xaxis:w,yaxis:l,fillRangeItems:n.noop},subplot:g,xaxes:[w],yaxes:[l],doneFnCompleted:function(A){var M,T=r._fullData[g],f=T.node.groups.slice(),u=[];function h(z){for(var O=T._sankey.graph.nodes,I=0;I<O.length;I++)if(O[I].pointNumber===z)return O[I]}for(var o=0;o<A.length;o++){var C=h(A[o].pointNumber);if(C)if(C.group){for(var R=0;R<C.childrenNodes.length;R++)u.push(C.childrenNodes[R].pointNumber);f[C.pointNumber-T.node._count]=!1}else u.push(C.pointNumber)}M=f.filter(Boolean).concat([u]),t.call("_guiRestyle",r,{"node.groups":[M]},g)},prepFn:function(A,T,M){d(A,T,M,y,x)}};c.init(y)}}ae.name=i,ae.baseLayoutAttrOverrides=_({hoverlabel:E.hoverlabel},"plot","nested"),ae.plot=function(r){var g=k(r.calcdata,i)[0];m(r,g),ae.updateFx(r)},ae.clean=function(r,g,s,b){var x=b._has&&b._has(i),S=g._has&&g._has(i);x&&!S&&(b._paperdiv.selectAll(".sankey").remove(),b._paperdiv.selectAll(".bgsankey").remove())},ae.updateFx=function(r){for(var g=0;g<r._fullData.length;g++)a(r,g)}},{"../../components/dragelement":385,"../../components/fx/layout_attributes":407,"../../lib":503,"../../lib/setcursor":524,"../../plot_api/edit_types":536,"../../plots/cartesian/select":575,"../../plots/get_data":593,"../../registry":638,"./plot":923}],919:[function(v,ie,ae){"use strict";var _=v("strongly-connected-components"),k=v("../../lib"),m=v("../../lib/gup").wrap,E=k.isArrayOrTypedArray,e=k.isIndex,c=v("../../components/colorscale");function d(t){var p,i=t.node,a=t.link,r=[],g=E(a.color),s=E(a.customdata),b={},x={},S=a.colorscales.length;for(p=0;p<S;p++){var w=a.colorscales[p],l=c.extractScale(w,{cLetter:"c"}),y=c.makeColorScaleFunc(l);x[w.label]=y}var A=0;for(p=0;p<a.value.length;p++)a.source[p]>A&&(A=a.source[p]),a.target[p]>A&&(A=a.target[p]);var T=A+1;t.node._count=T;var M,f=t.node.groups,u={};for(p=0;p<f.length;p++){var h=f[p];for(M=0;M<h.length;M++){var o=h[M],C=T+p;u.hasOwnProperty(o)?k.warn("Node "+o+" is already part of a group."):u[o]=C}}var R={source:[],target:[]};for(p=0;p<a.value.length;p++){var z=a.value[p],O=a.source[p],I=a.target[p];if(z>0&&e(O,T)&&e(I,T)&&(!u.hasOwnProperty(O)||!u.hasOwnProperty(I)||u[O]!==u[I])){u.hasOwnProperty(I)&&(I=u[I]),u.hasOwnProperty(O)&&(O=u[O]),b[O=+O]=b[I=+I]=!0;var F="";a.label&&a.label[p]&&(F=a.label[p]);var D=null;F&&x.hasOwnProperty(F)&&(D=x[F]),r.push({pointNumber:p,label:F,color:g?a.color[p]:a.color,customdata:s?a.customdata[p]:a.customdata,concentrationscale:D,source:O,target:I,value:+z}),R.source.push(O),R.target.push(I)}}var N=T+f.length,U=E(i.color),X=E(i.customdata),oe=[];for(p=0;p<N;p++)b[p]&&oe.push({group:p>T-1,childrenNodes:[],pointNumber:p,label:i.label[p],color:U?i.color[p]:i.color,customdata:X?i.customdata[p]:i.customdata});var ne=!1;return function n(t,i,a){for(var r=k.init2dArray(t,0),g=0;g<Math.min(i.length,a.length);g++)if(k.isIndex(i[g],t)&&k.isIndex(a[g],t)){if(i[g]===a[g])return!0;r[i[g]].push(a[g])}return _(r).components.some(function(b){return b.length>1})}(N,R.source,R.target)&&(ne=!0),{circular:ne,links:r,nodes:oe,groups:f,groupLookup:u}}ie.exports=function(i,a){var r=d(a);return m({circular:r.circular,_nodes:r.nodes,_links:r.links,_groups:r.groups,_groupLookup:r.groupLookup})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500,"strongly-connected-components":306}],920:[function(v,ie,ae){"use strict";ie.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],921:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./attributes"),m=v("../../components/color"),E=v("tinycolor2"),e=v("../../plots/domain").defaults,c=v("../../components/fx/hoverlabel_defaults"),d=v("../../plot_api/plot_template"),n=v("../../plots/array_container_defaults");function t(i,a){function r(g,s){return _.coerce(i,a,k.link.colorscales,g,s)}r("label"),r("cmin"),r("cmax"),r("colorscale")}ie.exports=function(a,r,g,s){function b(h,o){return _.coerce(a,r,k,h,o)}var x=_.extendDeep(s.hoverlabel,a.hoverlabel),S=a.node,p=d.newContainer(r,"node");function w(h,o){return _.coerce(S,p,k.node,h,o)}w("label"),w("groups"),w("x"),w("y"),w("pad"),w("thickness"),w("line.color"),w("line.width"),w("hoverinfo",a.hoverinfo),c(S,p,w,x),w("hovertemplate");var l=s.colorway;w("color",p.label.map(function(h,o){return m.addOpacity(function(h){return l[h%l.length]}(o),.8)})),w("customdata");var A=a.link||{},T=d.newContainer(r,"link");function M(h,o){return _.coerce(A,T,k.link,h,o)}M("label"),M("source"),M("target"),M("value"),M("line.color"),M("line.width"),M("hoverinfo",a.hoverinfo),c(A,T,M,x),M("hovertemplate");var u,f=E(s.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";M("color",_.repeat(f,T.value.length)),M("customdata"),n(A,T,{name:"colorscales",handleItemDefaults:t}),e(r,s,b),b("orientation"),b("valueformat"),b("valuesuffix"),p.x.length&&p.y.length&&(u="freeform"),b("arrangement",u),_.coerceFont(b,"textfont",_.extendFlat({},s.font)),r._length=null}},{"../../components/color":366,"../../components/fx/hoverlabel_defaults":404,"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/domain":584,"./attributes":917,tinycolor2:312}],922:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot"),moduleType:"trace",name:"sankey",basePlotModule:v("./base_plot"),selectPoints:v("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":917,"./base_plot":918,"./calc":919,"./defaults":921,"./plot":923,"./select.js":925}],923:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../lib"),m=k.numberFormat,E=v("./render"),e=v("../../components/fx"),c=v("../../components/color"),d=v("./constants").cn,n=k._;function t(l){return""!==l}function i(l,y){return l.filter(function(A){return A.key===y.traceId})}function a(l,y){_.select(l).select("path").style("fill-opacity",y),_.select(l).select("rect").style("fill-opacity",y)}function r(l){_.select(l).select("text.name").style("fill","black")}function g(l){return function(y){return-1!==l.node.sourceLinks.indexOf(y.link)||-1!==l.node.targetLinks.indexOf(y.link)}}function s(l){return function(y){return-1!==y.node.sourceLinks.indexOf(l.link)||-1!==y.node.targetLinks.indexOf(l.link)}}function b(l,y,A){y&&A&&i(A,y).selectAll("."+d.sankeyLink).filter(g(y)).call(S.bind(0,y,A,!1))}function x(l,y,A){y&&A&&i(A,y).selectAll("."+d.sankeyLink).filter(g(y)).call(p.bind(0,y,A,!1))}function S(l,y,A,T){var M=T.datum().link.label;T.style("fill-opacity",function(f){if(!f.link.concentrationscale)return.4}),M&&i(y,l).selectAll("."+d.sankeyLink).filter(function(f){return f.link.label===M}).style("fill-opacity",function(f){if(!f.link.concentrationscale)return.4}),A&&i(y,l).selectAll("."+d.sankeyNode).filter(s(l)).call(b)}function p(l,y,A,T){var M=T.datum().link.label;T.style("fill-opacity",function(f){return f.tinyColorAlpha}),M&&i(y,l).selectAll("."+d.sankeyLink).filter(function(f){return f.link.label===M}).style("fill-opacity",function(f){return f.tinyColorAlpha}),A&&i(y,l).selectAll(d.sankeyNode).filter(s(l)).call(x)}function w(l,y){var T=k.nestedProperty(l.hoverlabel||{},y).get();return!Array.isArray(T)&&T}ie.exports=function(y,A){for(var T=y._fullLayout,M=T._paper,f=T._size,u=0;u<y._fullData.length;u++)if(y._fullData[u].visible&&y._fullData[u].type===d.sankey&&!y._fullData[u]._viewInitial){var h=y._fullData[u].node;y._fullData[u]._viewInitial={node:{groups:h.groups.slice(),x:h.x.slice(),y:h.y.slice()}}}var R=n(y,"source:")+" ",z=n(y,"target:")+" ",O=n(y,"concentration:")+" ",I=n(y,"incoming flow count:")+" ",F=n(y,"outgoing flow count:")+" ";E(y,M,A,{width:f.w,height:f.h,margin:{t:f.t,r:f.r,b:f.b,l:f.l}},{linkEvents:{hover:function(ne,W,G){!1!==y._fullLayout.hovermode&&(_.select(ne).call(S.bind(0,W,G,!0)),"skip"!==W.link.trace.link.hoverinfo&&(W.link.fullData=W.link.trace,y.emit("plotly_hover",{event:_.event,points:[W.link]})))},follow:function(ne,W){if(!1!==y._fullLayout.hovermode){var G=W.link.trace.link;if("none"!==G.hoverinfo&&"skip"!==G.hoverinfo){for(var $=[],H=0,q=0;q<W.flow.links.length;q++){var K=W.flow.links[q];if("closest"!==y._fullLayout.hovermode||W.link.pointNumber===K.pointNumber){W.link.pointNumber===K.pointNumber&&(H=q),K.fullData=K.trace,G=W.link.trace.link;var Y=V(K),te={valueLabel:m(W.valueFormat)(K.value)+W.valueSuffix};$.push({x:Y[0],y:Y[1],name:te.valueLabel,text:[K.label||"",R+K.source.label,z+K.target.label,K.concentrationscale?O+m("%0.2f")(K.flow.labelConcentration):""].filter(t).join("<br>"),color:w(G,"bgcolor")||c.addOpacity(K.color,1),borderColor:w(G,"bordercolor"),fontFamily:w(G,"font.family"),fontSize:w(G,"font.size"),fontColor:w(G,"font.color"),nameLength:w(G,"namelength"),textAlign:w(G,"align"),idealAlign:_.event.x<Y[0]?"right":"left",hovertemplate:G.hovertemplate,hovertemplateLabels:te,eventData:[K]})}}e.loneHover($,{container:T._hoverlayer.node(),outerContainer:T._paper.node(),gd:y,anchorIndex:H}).each(function(){W.link.concentrationscale||a(this,.65),r(this)})}}function V(j){var re,le;j.circular?(re=(j.circularPathData.leftInnerExtent+j.circularPathData.rightInnerExtent)/2,le=j.circularPathData.verticalFullExtent):(re=(j.source.x1+j.target.x0)/2,le=(j.y0+j.y1)/2);var ge=[re,le];return"v"===j.trace.orientation&&ge.reverse(),ge[0]+=W.parent.translateX,ge[1]+=W.parent.translateY,ge}},unhover:function(ne,W,G){!1!==y._fullLayout.hovermode&&(_.select(ne).call(p.bind(0,W,G,!0)),"skip"!==W.link.trace.link.hoverinfo&&(W.link.fullData=W.link.trace,y.emit("plotly_unhover",{event:_.event,points:[W.link]})),e.loneUnhover(T._hoverlayer.node()))},select:function(ne,W){var G=W.link;G.originalEvent=_.event,y._hoverdata=[G],e.click(y,{target:!0})}},nodeEvents:{hover:function(ne,W,G){!1!==y._fullLayout.hovermode&&(_.select(ne).call(b,W,G),"skip"!==W.node.trace.node.hoverinfo&&(W.node.fullData=W.node.trace,y.emit("plotly_hover",{event:_.event,points:[W.node]})))},follow:function(ne,W){if(!1!==y._fullLayout.hovermode){var G=W.node.trace.node;if("none"!==G.hoverinfo&&"skip"!==G.hoverinfo){var $=_.select(ne).select("."+d.nodeRect),V=y._fullLayout._paperdiv.node().getBoundingClientRect(),H=$.node().getBoundingClientRect(),q=H.left-2-V.left,K=H.right+2-V.left,Y=H.top+H.height/4-V.top,te={valueLabel:m(W.valueFormat)(W.node.value)+W.valueSuffix};W.node.fullData=W.node.trace,y._fullLayout._calcInverseTransform(y);var J=y._fullLayout._invScaleX,re=e.loneHover({x0:J*q,x1:J*K,y:y._fullLayout._invScaleY*Y,name:m(W.valueFormat)(W.node.value)+W.valueSuffix,text:[W.node.label,I+W.node.targetLinks.length,F+W.node.sourceLinks.length].filter(t).join("<br>"),color:w(G,"bgcolor")||W.tinyColorHue,borderColor:w(G,"bordercolor"),fontFamily:w(G,"font.family"),fontSize:w(G,"font.size"),fontColor:w(G,"font.color"),nameLength:w(G,"namelength"),textAlign:w(G,"align"),idealAlign:"left",hovertemplate:G.hovertemplate,hovertemplateLabels:te,eventData:[W.node]},{container:T._hoverlayer.node(),outerContainer:T._paper.node(),gd:y});a(re,.85),r(re)}}},unhover:function(ne,W,G){!1!==y._fullLayout.hovermode&&(_.select(ne).call(x,W,G),"skip"!==W.node.trace.node.hoverinfo&&(W.node.fullData=W.node.trace,y.emit("plotly_unhover",{event:_.event,points:[W.node]})),e.loneUnhover(T._hoverlayer.node()))},select:function(ne,W,G){var $=W.node;$.originalEvent=_.event,y._hoverdata=[$],_.select(ne).call(x,W,G),e.click(y,{target:!0})}}})}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"./constants":920,"./render":924,"@plotly/d3":58}],924:[function(v,ie,ae){"use strict";var _=v("d3-force"),k=v("d3-interpolate").interpolateNumber,m=v("@plotly/d3"),E=v("@plotly/d3-sankey"),e=v("@plotly/d3-sankey-circular"),c=v("./constants"),d=v("tinycolor2"),n=v("../../components/color"),t=v("../../components/drawing"),i=v("../../lib"),a=i.strTranslate,r=i.strRotate,g=v("../../lib/gup"),s=g.keyFun,b=g.repeat,x=g.unwrap,S=v("../../lib/svg_text_utils"),p=v("../../registry"),w=v("../../constants/alignment"),l=w.CAP_SHIFT,y=w.LINE_SPACING;function T(V,H,q){var we,K=x(H),Y=K.trace,te=Y.domain,J="h"===Y.orientation,j=Y.node.pad,re=Y.node.thickness,le=V.width*(te.x[1]-te.x[0]),ge=V.height*(te.y[1]-te.y[0]),pe=K._nodes,xe=K._links,ke=K.circular;(we=ke?e.sankeyCircular().circularLinkGap(0):E.sankey()).iterations(c.sankeyIterations).size(J?[le,ge]:[ge,le]).nodeWidth(re).nodePadding(j).nodeId(function(St){return St.pointNumber}).nodes(pe).links(xe);var be,Le,De,de=we();for(var ye in we.nodePadding()<j&&i.warn("node.pad was reduced to ",we.nodePadding()," to fit within the figure."),K._groupLookup){var Fe,Ce=parseInt(K._groupLookup[ye]);for(be=0;be<de.nodes.length;be++)if(de.nodes[be].pointNumber===Ce){Fe=de.nodes[be];break}if(Fe){var Ke={pointNumber:parseInt(ye),x0:Fe.x0,x1:Fe.x1,y0:Fe.y0,y1:Fe.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};de.nodes.unshift(Ke),Fe.childrenNodes.unshift(Ke)}}if(function Ue(){for(be=0;be<de.nodes.length;be++){var Zt,Et,St=de.nodes[be],Bt={};for(Le=0;Le<St.targetLinks.length;Le++)Bt.hasOwnProperty(Zt=(Et=St.targetLinks[Le]).source.pointNumber+":"+Et.target.pointNumber)||(Bt[Zt]=[]),Bt[Zt].push(Et);var wt=Object.keys(Bt);for(Le=0;Le<wt.length;Le++){var at=Bt[Zt=wt[Le]],vt=0,Qe={};for(De=0;De<at.length;De++)Qe[(Et=at[De]).label]||(Qe[Et.label]=0),Qe[Et.label]+=Et.value,vt+=Et.value;for(De=0;De<at.length;De++)(Et=at[De]).flow={value:vt,labelConcentration:Qe[Et.label]/vt,concentration:Et.value/vt,links:at},Et.concentrationscale&&(Et.color=d(Et.concentrationscale(Et.flow.labelConcentration)))}var Pe=0;for(Le=0;Le<St.sourceLinks.length;Le++)Pe+=St.sourceLinks[Le].value;for(Le=0;Le<St.sourceLinks.length;Le++)(Et=St.sourceLinks[Le]).concentrationOut=Et.value/Pe;var Ze=0;for(Le=0;Le<St.targetLinks.length;Le++)Ze+=St.targetLinks[Le].value;for(Le=0;Le<St.targetLinks.length;Le++)(Et=St.targetLinks[Le]).concenrationIn=Et.value/Ze}}(),Y.node.x.length&&Y.node.y.length){for(be=0;be<Math.min(Y.node.x.length,Y.node.y.length,de.nodes.length);be++)if(Y.node.x[be]&&Y.node.y[be]){var nt=[Y.node.x[be]*le,Y.node.y[be]*ge];de.nodes[be].x0=nt[0]-re/2,de.nodes[be].x1=nt[0]+re/2;var gt=de.nodes[be].y1-de.nodes[be].y0;de.nodes[be].y0=nt[1]-gt/2,de.nodes[be].y1=nt[1]+gt/2}"snap"===Y.arrangement&&function Be(St){St.forEach(function(Bt){var Zt,Et,vt,wt=0,at=Bt.length;for(Bt.sort(function(Qe,Pe){return Qe.y0-Pe.y0}),vt=0;vt<at;++vt)(Zt=Bt[vt]).y0>=wt||(Et=wt-Zt.y0)>1e-6&&(Zt.y0+=Et,Zt.y1+=Et),wt=Zt.y1+j})}(function Ie(St){var wt,vt,Bt=St.map(function(Pe,Ze){return{x0:Pe.x0,index:Ze}}).sort(function(Pe,Ze){return Pe.x0-Ze.x0}),Zt=[],Et=-1,at=-1/0;for(be=0;be<Bt.length;be++){var Qe=St[Bt[be].index];Qe.x0>at+re&&(Et+=1,wt=Qe.x0),at=Qe.x0,Zt[Et]||(Zt[Et]=[]),Zt[Et].push(Qe),Qe.x0+=vt=wt-Qe.x0,Qe.x1+=vt}return Zt}(pe=de.nodes)),we.update(de)}return{circular:ke,key:q,trace:Y,guid:i.randstr(),horizontal:J,width:le,height:ge,nodePad:Y.node.pad,nodeLineColor:Y.node.line.color,nodeLineWidth:Y.node.line.width,linkLineColor:Y.link.line.color,linkLineWidth:Y.link.line.width,valueFormat:Y.valueformat,valueSuffix:Y.valuesuffix,textFont:Y.textfont,translateX:te.x[0]*V.width+V.margin.l,translateY:V.height-te.y[1]*V.height+V.margin.t,dragParallel:J?ge:le,dragPerpendicular:J?le:ge,arrangement:Y.arrangement,sankey:we,graph:de,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function M(V,H,q){var K=d(H.color),te=H.source.label+"|"+H.target.label+"__"+q;return H.trace=V.trace,H.curveNumber=V.trace.index,{circular:V.circular,key:te,traceId:V.key,pointNumber:H.pointNumber,link:H,tinyColorHue:n.tinyRGB(K),tinyColorAlpha:K.getAlpha(),linkPath:u,linkLineColor:V.linkLineColor,linkLineWidth:V.linkLineWidth,valueFormat:V.valueFormat,valueSuffix:V.valueSuffix,sankey:V.sankey,parent:V,interactionState:V.interactionState,flow:H.flow}}function u(){return function H(q){if(q.link.circular)return function f(V){var q=V.width/2,K=V.circularPathData;return"top"===V.circularLinkType?"M "+K.targetX+" "+(K.targetY+q)+" L"+K.rightInnerExtent+" "+(K.targetY+q)+"A"+(K.rightLargeArcRadius+q)+" "+(K.rightSmallArcRadius+q)+" 0 0 1 "+(K.rightFullExtent-q)+" "+(K.targetY-K.rightSmallArcRadius)+"L"+(K.rightFullExtent-q)+" "+K.verticalRightInnerExtent+"A"+(K.rightLargeArcRadius+q)+" "+(K.rightLargeArcRadius+q)+" 0 0 1 "+K.rightInnerExtent+" "+(K.verticalFullExtent-q)+"L"+K.leftInnerExtent+" "+(K.verticalFullExtent-q)+"A"+(K.leftLargeArcRadius+q)+" "+(K.leftLargeArcRadius+q)+" 0 0 1 "+(K.leftFullExtent+q)+" "+K.verticalLeftInnerExtent+"L"+(K.leftFullExtent+q)+" "+(K.sourceY-K.leftSmallArcRadius)+"A"+(K.leftLargeArcRadius+q)+" "+(K.leftSmallArcRadius+q)+" 0 0 1 "+K.leftInnerExtent+" "+(K.sourceY+q)+"L"+K.sourceX+" "+(K.sourceY+q)+"L"+K.sourceX+" "+(K.sourceY-q)+"L"+K.leftInnerExtent+" "+(K.sourceY-q)+"A"+(K.leftLargeArcRadius-q)+" "+(K.leftSmallArcRadius-q)+" 0 0 0 "+(K.leftFullExtent-q)+" "+(K.sourceY-K.leftSmallArcRadius)+"L"+(K.leftFullExtent-q)+" "+K.verticalLeftInnerExtent+"A"+(K.leftLargeArcRadius-q)+" "+(K.leftLargeArcRadius-q)+" 0 0 0 "+K.leftInnerExtent+" "+(K.verticalFullExtent+q)+"L"+K.rightInnerExtent+" "+(K.verticalFullExtent+q)+"A"+(K.rightLargeArcRadius-q)+" "+(K.rightLargeArcRadius-q)+" 0 0 0 "+(K.rightFullExtent+q)+" "+K.verticalRightInnerExtent+"L"+(K.rightFullExtent+q)+" "+(K.targetY-K.rightSmallArcRadius)+"A"+(K.rightLargeArcRadius-q)+" "+(K.rightSmallArcRadius-q)+" 0 0 0 "+K.rightInnerExtent+" "+(K.targetY-q)+"L"+K.targetX+" "+(K.targetY-q)+"Z":"M "+K.targetX+" "+(K.targetY-q)+" L"+K.rightInnerExtent+" "+(K.targetY-q)+"A"+(K.rightLargeArcRadius+q)+" "+(K.rightSmallArcRadius+q)+" 0 0 0 "+(K.rightFullExtent-q)+" "+(K.targetY+K.rightSmallArcRadius)+"L"+(K.rightFullExtent-q)+" "+K.verticalRightInnerExtent+"A"+(K.rightLargeArcRadius+q)+" "+(K.rightLargeArcRadius+q)+" 0 0 0 "+K.rightInnerExtent+" "+(K.verticalFullExtent+q)+"L"+K.leftInnerExtent+" "+(K.verticalFullExtent+q)+"A"+(K.leftLargeArcRadius+q)+" "+(K.leftLargeArcRadius+q)+" 0 0 0 "+(K.leftFullExtent+q)+" "+K.verticalLeftInnerExtent+"L"+(K.leftFullExtent+q)+" "+(K.sourceY+K.leftSmallArcRadius)+"A"+(K.leftLargeArcRadius+q)+" "+(K.leftSmallArcRadius+q)+" 0 0 0 "+K.leftInnerExtent+" "+(K.sourceY-q)+"L"+K.sourceX+" "+(K.sourceY-q)+"L"+K.sourceX+" "+(K.sourceY+q)+"L"+K.leftInnerExtent+" "+(K.sourceY+q)+"A"+(K.leftLargeArcRadius-q)+" "+(K.leftSmallArcRadius-q)+" 0 0 1 "+(K.leftFullExtent-q)+" "+(K.sourceY+K.leftSmallArcRadius)+"L"+(K.leftFullExtent-q)+" "+K.verticalLeftInnerExtent+"A"+(K.leftLargeArcRadius-q)+" "+(K.leftLargeArcRadius-q)+" 0 0 1 "+K.leftInnerExtent+" "+(K.verticalFullExtent-q)+"L"+K.rightInnerExtent+" "+(K.verticalFullExtent-q)+"A"+(K.rightLargeArcRadius-q)+" "+(K.rightLargeArcRadius-q)+" 0 0 1 "+(K.rightFullExtent+q)+" "+K.verticalRightInnerExtent+"L"+(K.rightFullExtent+q)+" "+(K.targetY+K.rightSmallArcRadius)+"A"+(K.rightLargeArcRadius-q)+" "+(K.rightSmallArcRadius-q)+" 0 0 1 "+K.rightInnerExtent+" "+(K.targetY+q)+"L"+K.targetX+" "+(K.targetY+q)+"Z"}(q.link);var K=q.link.source.x1,Y=q.link.target.x0,te=k(K,Y),J=te(.5),j=te(.5),re=q.link.y0-q.link.width/2,le=q.link.y0+q.link.width/2,ge=q.link.y1-q.link.width/2,pe=q.link.y1+q.link.width/2;return"M"+K+","+re+"C"+J+","+re+" "+j+","+ge+" "+Y+","+ge+"L"+Y+","+pe+"C"+j+","+pe+" "+J+","+le+" "+K+","+le+"Z"}}function h(V,H){var q=d(H.color),K=c.nodePadAcross,Y=V.nodePad/2;H.dx=H.x1-H.x0,H.dy=H.y1-H.y0;var te=H.dx,J=Math.max(.5,H.dy),j="node_"+H.pointNumber;return H.group&&(j=i.randstr()),H.trace=V.trace,H.curveNumber=V.trace.index,{index:H.pointNumber,key:j,partOfGroup:H.partOfGroup||!1,group:H.group,traceId:V.key,trace:V.trace,node:H,nodePad:V.nodePad,nodeLineColor:V.nodeLineColor,nodeLineWidth:V.nodeLineWidth,textFont:V.textFont,size:V.horizontal?V.height:V.width,visibleWidth:Math.ceil(te),visibleHeight:J,zoneX:-K,zoneY:-Y,zoneWidth:te+2*K,zoneHeight:J+2*Y,labelY:V.horizontal?H.dy/2+1:H.dx/2+1,left:1===H.originalLayer,sizeAcross:V.width,forceLayouts:V.forceLayouts,horizontal:V.horizontal,darkBackground:q.getBrightness()<=128,tinyColorHue:n.tinyRGB(q),tinyColorAlpha:q.getAlpha(),valueFormat:V.valueFormat,valueSuffix:V.valueSuffix,sankey:V.sankey,graph:V.graph,arrangement:V.arrangement,uniqueNodeLabelPathId:[V.guid,V.key,j].join("_"),interactionState:V.interactionState,figure:V}}function o(V){V.attr("transform",function(H){return a(H.node.x0.toFixed(3),H.node.y0.toFixed(3))})}function C(V){V.call(o)}function R(V,H){V.call(C),H.attr("d",u())}function z(V){V.attr("width",function(H){return H.node.x1-H.node.x0}).attr("height",function(H){return H.visibleHeight})}function O(V){return V.link.width>1||V.linkLineWidth>0}function I(V){return a(V.translateX,V.translateY)+(V.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function F(V,H,q){V.on(".basic",null).on("mouseover.basic",function(K){!K.interactionState.dragInProgress&&!K.partOfGroup&&(q.hover(this,K,H),K.interactionState.hovered=[this,K])}).on("mousemove.basic",function(K){!K.interactionState.dragInProgress&&!K.partOfGroup&&(q.follow(this,K),K.interactionState.hovered=[this,K])}).on("mouseout.basic",function(K){!K.interactionState.dragInProgress&&!K.partOfGroup&&(q.unhover(this,K,H),K.interactionState.hovered=!1)}).on("click.basic",function(K){K.interactionState.hovered&&(q.unhover(this,K,H),K.interactionState.hovered=!1),!K.interactionState.dragInProgress&&!K.partOfGroup&&q.select(this,K,H)})}function D(V,H,q,K){var Y=m.behavior.drag().origin(function(te){return{x:te.node.x0+te.visibleWidth/2,y:te.node.y0+te.visibleHeight/2}}).on("dragstart",function(te){if("fixed"!==te.arrangement&&(i.ensureSingle(K._fullLayout._infolayer,"g","dragcover",function(j){K._fullLayout._dragCover=j}),i.raiseToTop(this),te.interactionState.dragInProgress=te.node,ne(te.node),te.interactionState.hovered&&(q.nodeEvents.unhover.apply(0,te.interactionState.hovered),te.interactionState.hovered=!1),"snap"===te.arrangement)){var J=te.traceId+"|"+te.key;te.forceLayouts[J]?te.forceLayouts[J].alpha(1):function N(V,H,q,K){!function G(V){for(var H=0;H<V.length;H++)V[H].y=(V[H].y0+V[H].y1)/2,V[H].x=(V[H].x0+V[H].x1)/2}(q.graph.nodes);var Y=q.graph.nodes.filter(function(te){return te.originalX===q.node.originalX}).filter(function(te){return!te.partOfGroup});q.forceLayouts[H]=_.forceSimulation(Y).alphaDecay(0).force("collide",_.forceCollide().radius(function(te){return te.dy/2+q.nodePad/2}).strength(1).iterations(c.forceIterations)).force("constrain",function X(V,H,q,K){return function(){for(var te=0,J=0;J<q.length;J++){var j=q[J];j===K.interactionState.dragInProgress?(j.x=j.lastDraggedX,j.y=j.lastDraggedY):(j.vx=(j.originalX-j.x)/c.forceTicksPerFrame,j.y=Math.min(K.size-j.dy/2,Math.max(j.dy/2,j.y))),te=Math.max(te,Math.abs(j.vx),Math.abs(j.vy))}!K.interactionState.dragInProgress&&te<.1&&K.forceLayouts[H].alpha()>0&&K.forceLayouts[H].alpha(0)}}(0,H,Y,q)).stop()}(0,J,te),function U(V,H,q,K,Y){window.requestAnimationFrame(function te(){var J;for(J=0;J<c.forceTicksPerFrame;J++)q.forceLayouts[K].tick();if(function $(V){for(var H=0;H<V.length;H++)V[H].y0=V[H].y-V[H].dy/2,V[H].y1=V[H].y0+V[H].dy,V[H].x0=V[H].x-V[H].dx/2,V[H].x1=V[H].x0+V[H].dx}(q.graph.nodes),q.sankey.update(q.graph),R(V.filter(W(q)),H),q.forceLayouts[K].alpha()>0)window.requestAnimationFrame(te);else{var re=q.node.originalX;q.node.x0=re-q.visibleWidth/2,q.node.x1=re+q.visibleWidth/2,oe(q,Y)}})}(V,H,te,J,K)}}).on("drag",function(te){if("fixed"!==te.arrangement){var J=m.event.x,j=m.event.y;"snap"===te.arrangement?(te.node.x0=J-te.visibleWidth/2,te.node.x1=J+te.visibleWidth/2,te.node.y0=j-te.visibleHeight/2,te.node.y1=j+te.visibleHeight/2):("freeform"===te.arrangement&&(te.node.x0=J-te.visibleWidth/2,te.node.x1=J+te.visibleWidth/2),j=Math.max(0,Math.min(te.size-te.visibleHeight/2,j)),te.node.y0=j-te.visibleHeight/2,te.node.y1=j+te.visibleHeight/2),ne(te.node),"snap"!==te.arrangement&&(te.sankey.update(te.graph),R(V.filter(W(te)),H))}}).on("dragend",function(te){if("fixed"!==te.arrangement){te.interactionState.dragInProgress=!1;for(var J=0;J<te.node.childrenNodes.length;J++)te.node.childrenNodes[J].x=te.node.x,te.node.childrenNodes[J].y=te.node.y;"snap"!==te.arrangement&&oe(te,K)}});V.on(".drag",null).call(Y)}function oe(V,H){for(var q=[],K=[],Y=0;Y<V.graph.nodes.length;Y++){var J=(V.graph.nodes[Y].y0+V.graph.nodes[Y].y1)/2;q.push((V.graph.nodes[Y].x0+V.graph.nodes[Y].x1)/2/V.figure.width),K.push(J/V.figure.height)}p.call("_guiRestyle",H,{"node.x":[q],"node.y":[K]},V.trace.index).then(function(){H._fullLayout._dragCover&&H._fullLayout._dragCover.remove()})}function ne(V){V.lastDraggedX=V.x0+V.dx/2,V.lastDraggedY=V.y0+V.dy/2}function W(V){return function(H){return H.node.originalX===V.node.originalX}}ie.exports=function(V,H,q,K,Y){var te=!1;i.ensureSingle(V._fullLayout._infolayer,"g","first-render",function(){te=!0});var J=V._fullLayout._dragCover,j=q.filter(function(de){return x(de).trace.visible}).map(T.bind(null,K)),re=H.selectAll("."+c.cn.sankey).data(j,s);re.exit().remove(),re.enter().append("g").classed(c.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",I),re.each(function(de,be){V._fullData[be]._sankey=de;var Le="bgsankey-"+de.trace.uid+"-"+be;i.ensureSingle(V._fullLayout._draggers,"rect",Le),V._fullData[be]._bgRect=m.select("."+Le),V._fullData[be]._bgRect.style("pointer-events","all").attr("width",de.width).attr("height",de.height).attr("x",de.translateX).attr("y",de.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),re.transition().ease(c.ease).duration(c.duration).attr("transform",I);var le=re.selectAll("."+c.cn.sankeyLinks).data(b,s);le.enter().append("g").classed(c.cn.sankeyLinks,!0).style("fill","none");var ge=le.selectAll("."+c.cn.sankeyLink).data(function(de){return de.graph.links.filter(function(Le){return Le.value}).map(M.bind(null,de))},s);ge.enter().append("path").classed(c.cn.sankeyLink,!0).call(F,re,Y.linkEvents),ge.style("stroke",function(de){return O(de)?n.tinyRGB(d(de.linkLineColor)):de.tinyColorHue}).style("stroke-opacity",function(de){return O(de)?n.opacity(de.linkLineColor):de.tinyColorAlpha}).style("fill",function(de){return de.tinyColorHue}).style("fill-opacity",function(de){return de.tinyColorAlpha}).style("stroke-width",function(de){return O(de)?de.linkLineWidth:1}).attr("d",u()),ge.style("opacity",function(){return V._context.staticPlot||te||J?1:0}).transition().ease(c.ease).duration(c.duration).style("opacity",1),ge.exit().transition().ease(c.ease).duration(c.duration).style("opacity",0).remove();var pe=re.selectAll("."+c.cn.sankeyNodeSet).data(b,s);pe.enter().append("g").classed(c.cn.sankeyNodeSet,!0),pe.style("cursor",function(de){switch(de.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var xe=pe.selectAll("."+c.cn.sankeyNode).data(function(de){var be=de.graph.nodes;return function se(V){var q,H=[];for(q=0;q<V.length;q++)V[q].originalX=(V[q].x0+V[q].x1)/2,V[q].originalY=(V[q].y0+V[q].y1)/2,-1===H.indexOf(V[q].originalX)&&H.push(V[q].originalX);for(H.sort(function(K,Y){return K-Y}),q=0;q<V.length;q++)V[q].originalLayerIndex=H.indexOf(V[q].originalX),V[q].originalLayer=V[q].originalLayerIndex/(H.length-1)}(be),be.map(h.bind(null,de))},s);xe.enter().append("g").classed(c.cn.sankeyNode,!0).call(o).style("opacity",function(de){return!V._context.staticPlot&&!te||de.partOfGroup?0:1}),xe.call(F,re,Y.nodeEvents).call(D,ge,Y,V),xe.transition().ease(c.ease).duration(c.duration).call(o).style("opacity",function(de){return de.partOfGroup?0:1}),xe.exit().transition().ease(c.ease).duration(c.duration).style("opacity",0).remove();var ke=xe.selectAll("."+c.cn.nodeRect).data(b);ke.enter().append("rect").classed(c.cn.nodeRect,!0).call(z),ke.style("stroke-width",function(de){return de.nodeLineWidth}).style("stroke",function(de){return n.tinyRGB(d(de.nodeLineColor))}).style("stroke-opacity",function(de){return n.opacity(de.nodeLineColor)}).style("fill",function(de){return de.tinyColorHue}).style("fill-opacity",function(de){return de.tinyColorAlpha}),ke.transition().ease(c.ease).duration(c.duration).call(z);var we=xe.selectAll("."+c.cn.nodeLabel).data(b);we.enter().append("text").classed(c.cn.nodeLabel,!0).style("cursor","default"),we.attr("data-notex",1).text(function(de){return de.node.label}).each(function(de){var be=m.select(this);t.font(be,de.textFont),S.convertToTspans(be,V)}).style("text-shadow",S.makeTextShadow(V._fullLayout.paper_bgcolor)).attr("text-anchor",function(de){return de.horizontal&&de.left?"end":"start"}).attr("transform",function(de){var be=m.select(this),Le=S.lineCount(be),ye=de.nodeLineWidth/2+3,Ce=((de.horizontal?de.visibleHeight:de.visibleWidth)-de.textFont.size*((Le-1)*y-l))/2;de.horizontal&&(de.left?ye=-ye:ye+=de.visibleWidth);var Fe=de.horizontal?"":"scale(-1,1)"+r(90);return a(de.horizontal?ye:Ce,de.horizontal?Ce:ye)+Fe}),we.transition().ease(c.ease).duration(c.duration)}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../registry":638,"./constants":920,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:312}],925:[function(v,ie,ae){"use strict";ie.exports=function(k,m){for(var e=[],c=k.cd[0].trace,d=c._sankey.graph.nodes,n=0;n<d.length;n++){var t=d[n];if(!t.partOfGroup){var i=[(t.x0+t.x1)/2,(t.y0+t.y1)/2];"v"===c.orientation&&i.reverse(),m&&m.contains(i,!1,n,k)&&e.push({pointNumber:t.pointNumber})}}return e}},{}],926:[function(v,ie,ae){"use strict";var _=v("../../lib");ie.exports=function(m,E){for(var e=0;e<m.length;e++)m[e].i=e;_.mergeArray(E.text,m,"tx"),_.mergeArray(E.texttemplate,m,"txt"),_.mergeArray(E.hovertext,m,"htx"),_.mergeArray(E.customdata,m,"data"),_.mergeArray(E.textposition,m,"tp"),E.textfont&&(_.mergeArrayCastPositive(E.textfont.size,m,"ts"),_.mergeArray(E.textfont.color,m,"tc"),_.mergeArray(E.textfont.family,m,"tf"));var c=E.marker;if(c){_.mergeArrayCastPositive(c.size,m,"ms"),_.mergeArrayCastPositive(c.opacity,m,"mo"),_.mergeArray(c.symbol,m,"mx"),_.mergeArray(c.color,m,"mc");var d=c.line;c.line&&(_.mergeArray(d.color,m,"mlc"),_.mergeArrayCastPositive(d.width,m,"mlw"));var n=c.gradient;n&&"none"!==n.type&&(_.mergeArray(n.type,m,"mgt"),_.mergeArray(n.color,m,"mgc"))}}},{"../../lib":503}],927:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,k=v("../../plots/template_attributes").texttemplateAttrs,m=v("../../plots/template_attributes").hovertemplateAttrs,E=v("../../components/colorscale/attributes"),e=v("../../plots/font_attributes"),c=v("../../components/drawing/attributes").dash,d=v("../../components/drawing/attributes").pattern,n=v("../../components/drawing"),t=v("./constants"),i=v("../../lib/extend").extendFlat;ie.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:_("x"),yhoverformat:_("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:k({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:m({},{keys:t.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:i({},c,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:d,marker:i({symbol:{valType:"enumerated",values:n.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:i({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},E("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},E("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":373,"../../components/drawing":388,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"./constants":931}],928:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../lib"),m=v("../../plots/cartesian/axes"),E=v("../../plots/cartesian/align_period"),e=v("../../constants/numerical").BADNUM,c=v("./subtypes"),d=v("./colorscale_calc"),n=v("./arrays_to_calcdata"),t=v("./calc_selection");function a(x,S,p,w,l,y,A){var T=S._length,M=x._fullLayout,f=p._id,u=w._id,h=M._firstScatter[s(S)]===S.uid,o=(b(S,M,p,w)||{}).orientation,C=S.fill;p._minDtick=0,w._minDtick=0;var R={padded:!0},z={padded:!0};A&&(R.ppad=z.ppad=A);var O=T<2||l[0]!==l[T-1]||y[0]!==y[T-1];O&&("tozerox"===C||"tonextx"===C&&(h||"h"===o))?R.tozero=!0:!(S.error_y||{}).visible&&("tonexty"===C||"tozeroy"===C||!c.hasMarkers(S)&&!c.hasText(S))&&(R.padded=!1,R.ppad=0),O&&("tozeroy"===C||"tonexty"===C&&(h||"v"===o))?z.tozero=!0:("tonextx"===C||"tozerox"===C)&&(z.padded=!1),f&&(S._extremes[f]=m.findExtremes(p,l,R)),u&&(S._extremes[u]=m.findExtremes(w,y,z))}function r(x,S){if(c.hasMarkers(x)){var l,p=x.marker,w=1.6*(x.marker.sizeref||1);if(l="area"===x.marker.sizemode?function(f){return Math.max(Math.sqrt((f||0)/w),3)}:function(f){return Math.max((f||0)/w,3)},k.isArrayOrTypedArray(p.size)){var y={type:"linear"};m.setConvert(y);for(var A=y.makeCalcdata(x.marker,"size"),T=new Array(S),M=0;M<S;M++)T[M]=l(A[M]);return T}return l(p.size)}}function g(x,S){var p=s(S),w=x._firstScatter;w[p]||(w[p]=S.uid)}function s(x){var S=x.stackgroup;return x.xaxis+x.yaxis+x.type+(S?"-"+S:"")}function b(x,S,p,w){var l=x.stackgroup;if(l){var y=S._scatterStackOpts[p._id+w._id][l],A="v"===y.orientation?w:p;if("linear"===A.type||"log"===A.type)return y}}ie.exports={calc:function i(x,S){var O,I,F,D,N,U,p=x._fullLayout,w=m.getFromId(x,S.xaxis||"x"),l=m.getFromId(x,S.yaxis||"y"),y=w.makeCalcdata(S,"x"),A=l.makeCalcdata(S,"y"),T=E(S,w,"x",y),M=E(S,l,"y",A),f=T.vals,u=M.vals,h=S._length,o=new Array(h),C=S.ids,R=b(S,p,w,l),z=!1;g(p,S);var se,X="x",oe="y";R?(k.pushUnique(R.traceIndices,S._expandedIndex),(O="v"===R.orientation)?(oe="s",se="x"):(X="s",se="y"),N="interpolate"===R.stackgaps):a(x,S,w,l,f,u,r(S,h));var W=!!S.xperiodalignment,G=!!S.yperiodalignment;for(I=0;I<h;I++){var $=o[I]={},V=_(f[I]),H=_(u[I]);V&&H?($[X]=f[I],$[oe]=u[I],W&&($.orig_x=y[I],$.xEnd=T.ends[I],$.xStart=T.starts[I]),G&&($.orig_y=A[I],$.yEnd=M.ends[I],$.yStart=M.starts[I])):R&&(O?V:H)?($[se]=O?f[I]:u[I],$.gap=!0,N?($.s=e,z=!0):$.s=0):$[X]=$[oe]=e,C&&($.id=String(C[I]))}if(n(o,S),d(x,S),t(o,S),R){for(I=0;I<o.length;)o[I][se]===e?o.splice(I,1):I++;if(k.sort(o,function(te,J){return te[se]-J[se]||te.i-J.i}),z){for(I=0;I<o.length-1&&o[I].gap;)I++;for((U=o[I].s)||(U=o[I].s=0),F=0;F<I;F++)o[F].s=U;for(D=o.length-1;D>I&&o[D].gap;)D--;for(U=o[D].s,F=o.length-1;F>D;F--)o[F].s=U;for(;I<D;)if(o[++I].gap){for(F=I+1;o[F].gap;)F++;for(var q=o[I-1][se],K=o[I-1].s,Y=(o[F].s-K)/(o[F][se]-q);I<F;)o[I].s=K+(o[I][se]-q)*Y,I++}}}return o},calcMarkerSize:r,calcAxisExpansion:a,setFirstScatter:g,getStackOpts:b}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"./arrays_to_calcdata":926,"./calc_selection":929,"./colorscale_calc":930,"./subtypes":952,"fast-isnumeric":190}],929:[function(v,ie,ae){"use strict";var _=v("../../lib");ie.exports=function(m,E){_.isArrayOrTypedArray(E.selectedpoints)&&_.tagSelected(m,E)}},{"../../lib":503}],930:[function(v,ie,ae){"use strict";var _=v("../../components/colorscale/helpers").hasColorscale,k=v("../../components/colorscale/calc"),m=v("./subtypes");ie.exports=function(e,c){m.hasLines(c)&&_(c,"line")&&k(e,c,{vals:c.line.color,containerStr:"line",cLetter:"c"}),m.hasMarkers(c)&&(_(c,"marker")&&k(e,c,{vals:c.marker.color,containerStr:"marker",cLetter:"c"}),_(c,"marker.line")&&k(e,c,{vals:c.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"./subtypes":952}],931:[function(v,ie,ae){"use strict";ie.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],932:[function(v,ie,ae){"use strict";var _=v("./calc");function k(E,e,c,d,n,t,i){n[d]=!0;var a={i:null,gap:!0,s:0};if(a[i]=c,E.splice(e,0,a),e&&c===E[e-1][i]){var r=E[e-1];a.s=r.s,a.i=r.i,a.gap=r.gap}else t&&(a.s=function m(E,e,c,d){var n=E[e-1],t=E[e+1];return t?n?n.s+(t.s-n.s)*(c-n[d])/(t[d]-n[d]):t.s:n.s}(E,e,c,i));e||(E[0].t=E[1].t,E[0].trace=E[1].trace,delete E[1].t,delete E[1].trace)}ie.exports=function(e,c){var d=c.xaxis,n=c.yaxis,i=e._fullLayout._scatterStackOpts[d._id+n._id];if(i){var r,g,s,b,x,S,p,w,l,y,A,T,M,f,u,a=e.calcdata;for(var h in i){var o=(y=i[h]).traceIndices;if(o.length){for(A="interpolate"===y.stackgaps,T=y.groupnorm,"v"===y.orientation?(M="x",f="y"):(M="y",f="x"),u=new Array(o.length),r=0;r<u.length;r++)u[r]=!1;S=a[o[0]];var C=new Array(S.length);for(r=0;r<S.length;r++)C[r]=S[r][M];for(r=1;r<o.length;r++){for(x=a[o[r]],g=s=0;g<x.length;g++){for(p=x[g][M];p>C[s]&&s<C.length;s++)k(x,g,C[s],r,u,A,M),g++;if(p!==C[s]){for(b=0;b<r;b++)k(a[o[b]],s,p,b,u,A,M);C.splice(s,0,p)}s++}for(;s<C.length;s++)k(x,g,C[s],r,u,A,M),g++}var R=C.length;for(g=0;g<S.length;g++){for(w=S[g][f]=S[g].s,r=1;r<o.length;r++)(x=a[o[r]])[0].trace._rawLength=x[0].trace._length,x[0].trace._length=R,x[g][f]=w+=x[g].s;if(T)for(l=("fraction"===T?w:w/100)||1,r=0;r<o.length;r++){var z=a[o[r]][g];z[f]/=l,z.sNorm=z.s/l}}for(r=0;r<o.length;r++){var O=(x=a[o[r]])[0].trace,I=_.calcMarkerSize(O,O._rawLength),F=Array.isArray(I);if(I&&u[r]||F){var D=I;for(I=new Array(R),g=0;g<R;g++)I[g]=x[g].gap?0:F?D[x[g].i]:D}var N=new Array(R),U=new Array(R);for(g=0;g<R;g++)N[g]=x[g].x,U[g]=x[g].y;_.calcAxisExpansion(e,O,d,n,N,U,I),x[0].t.orientation=y.orientation}}}}}},{"./calc":928}],933:[function(v,ie,ae){"use strict";ie.exports=function(k){for(var m=0;m<k.length;m++){var E=k[m];if("scatter"===E.type){var e=E.fill;if("none"!==e&&"toself"!==e&&(E.opacity=void 0,"tonexty"===e||"tonextx"===e))for(var c=m-1;c>=0;c--){var d=k[c];if("scatter"===d.type&&d.xaxis===E.xaxis&&d.yaxis===E.yaxis){d.opacity=void 0;break}}}}}},{}],934:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../registry"),m=v("./attributes"),E=v("./constants"),e=v("./subtypes"),c=v("./xy_defaults"),d=v("./period_defaults"),n=v("./stack_defaults"),t=v("./marker_defaults"),i=v("./line_defaults"),a=v("./line_shape_defaults"),r=v("./text_defaults"),g=v("./fillcolor_defaults"),s=v("../../lib").coercePattern;ie.exports=function(x,S,p,w){function l(o,C){return _.coerce(x,S,m,o,C)}var y=c(x,S,w,l);if(y||(S.visible=!1),S.visible){d(x,S,w,l),l("xhoverformat"),l("yhoverformat");var A=n(x,S,w,l),T=!A&&y<E.PTS_LINESONLY?"lines+markers":"lines";l("text"),l("hovertext"),l("mode",T),e.hasLines(S)&&(i(x,S,p,w,l),a(x,S,l),l("connectgaps"),l("line.simplify")),e.hasMarkers(S)&&t(x,S,p,w,l,{gradient:!0}),e.hasText(S)&&(l("texttemplate"),r(x,S,w,l));var M=[];(e.hasMarkers(S)||e.hasText(S))&&(l("cliponaxis"),l("marker.maxdisplayed"),M.push("points")),l("fill",A?A.fillDflt:"none"),"none"!==S.fill&&(g(x,S,p,l),e.hasLines(S)||a(x,S,l),s(l,"fillpattern",S.fillcolor,!1));var f=(S.line||{}).color,u=(S.marker||{}).color;("tonext"===S.fill||"toself"===S.fill)&&M.push("fills"),l("hoveron",M.join("+")||"points"),"fills"!==S.hoveron&&l("hovertemplate");var h=k.getComponentMethod("errorbars","supplyDefaults");h(x,S,f||u||p,{axis:"y"}),h(x,S,f||u||p,{axis:"x",inherit:"y"}),_.coerceSelectionMarkerOpacity(S,l)}}},{"../../lib":503,"../../registry":638,"./attributes":927,"./constants":931,"./fillcolor_defaults":935,"./line_defaults":940,"./line_shape_defaults":942,"./marker_defaults":946,"./period_defaults":947,"./stack_defaults":950,"./subtypes":952,"./text_defaults":953,"./xy_defaults":954}],935:[function(v,ie,ae){"use strict";var _=v("../../components/color"),k=v("../../lib").isArrayOrTypedArray;ie.exports=function(E,e,c,d){var n=!1;if(e.marker){var t=e.marker.color,i=(e.marker.line||{}).color;t&&!k(t)?n=t:i&&!k(i)&&(n=i)}d("fillcolor",_.addOpacity((e.line||{}).color||n||c,.5))}},{"../../components/color":366,"../../lib":503}],936:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/axes");ie.exports=function(m,E,e){var c={},d={_fullLayout:e},n=_.getFromTrace(d,E,"x"),t=_.getFromTrace(d,E,"y");return c.xLabel=_.tickText(n,n.c2l(m.x),!0).text,c.yLabel=_.tickText(t,t.c2l(m.y),!0).text,c}},{"../../plots/cartesian/axes":554}],937:[function(v,ie,ae){"use strict";var _=v("../../components/color"),k=v("./subtypes");ie.exports=function(E,e){var c,d;if("lines"===E.mode)return(c=E.line.color)&&_.opacity(c)?c:E.fillcolor;if("none"===E.mode)return E.fill?E.fillcolor:"";var n=e.mcc||(E.marker||{}).color,t=e.mlcc||((E.marker||{}).line||{}).color;return(d=n&&_.opacity(n)?n:t&&_.opacity(t)&&(e.mlw||((E.marker||{}).line||{}).width)?t:"")?_.opacity(d)<.3?_.addOpacity(d,.3):d:(c=(E.line||{}).color)&&_.opacity(c)&&k.hasLines(E)&&E.line.width?c:E.fillcolor}},{"../../components/color":366,"./subtypes":952}],938:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../components/fx"),m=v("../../registry"),E=v("./get_trace_color"),e=v("../../components/color"),c=_.fillText;ie.exports=function(n,t,i,a){var r=n.cd,g=r[0].trace,s=n.xa,b=n.ya,x=s.c2p(t),S=b.c2p(i),p=[x,S],w=g.hoveron||"",l=-1!==g.mode.indexOf("markers")?3:.5,y=!!g.xperiodalignment,A=!!g.yperiodalignment;if(-1!==w.indexOf("points")){var f=function(re){var le=Math.max(l,re.mrc||0),ge=s.c2p(re.x)-x,pe=b.c2p(re.y)-S;return Math.max(Math.sqrt(ge*ge+pe*pe)-le,1-l/le)},u=k.getDistanceFunction(a,function(re){if(y){var le=s.c2p(re.xStart),ge=s.c2p(re.xEnd);return x>=Math.min(le,ge)&&x<=Math.max(le,ge)?0:1/0}var pe=Math.max(3,re.mrc||0),xe=1-1/pe,ke=Math.abs(s.c2p(re.x)-x);return ke<pe?xe*ke/pe:ke-pe+xe},function(re){if(A){var le=b.c2p(re.yStart),ge=b.c2p(re.yEnd);return S>=Math.min(le,ge)&&S<=Math.max(le,ge)?0:1/0}var pe=Math.max(3,re.mrc||0),xe=1-1/pe,ke=Math.abs(b.c2p(re.y)-S);return ke<pe?xe*ke/pe:ke-pe+xe},f);if(k.getClosest(r,u,n),!1!==n.index){var h=r[n.index],o=s.c2p(h.x,!0),C=b.c2p(h.y,!0),R=h.mrc||1;n.index=h.i;var z=r[0].t.orientation,O=z&&(h.sNorm||h.s),I="h"===z?O:void 0!==h.orig_x?h.orig_x:h.x,F="v"===z?O:void 0!==h.orig_y?h.orig_y:h.y;return _.extendFlat(n,{color:E(g,h),x0:o-R,x1:o+R,xLabelVal:I,y0:C-R,y1:C+R,yLabelVal:F,spikeDistance:f(h),hovertemplate:g.hovertemplate}),c(h,g,n),m.getComponentMethod("errorbars","hoverInfo")(h,g,n),[n]}}if(-1!==w.indexOf("fills")&&g._polygons){var W,G,$,V,H,q,Y,te,D=g._polygons,N=[],U=!1,X=1/0,oe=-1/0,se=1/0,ne=-1/0;for(W=0;W<D.length;W++)($=D[W]).contains(p)&&(U=!U,N.push($),se=Math.min(se,$.ymin),ne=Math.max(ne,$.ymax));if(U){var J=((se=Math.max(se,0))+(ne=Math.min(ne,b._length)))/2;for(W=0;W<N.length;W++)for(V=N[W].pts,G=1;G<V.length;G++)(Y=V[G-1][1])>J!=(te=V[G][1])>=J&&(q=V[G-1][0],te-Y&&(H=q+(V[G][0]-q)*(J-Y)/(te-Y),X=Math.min(X,H),oe=Math.max(oe,H)));X=Math.max(X,0),oe=Math.min(oe,s._length);var j=e.defaultLine;return e.opacity(g.fillcolor)?j=g.fillcolor:e.opacity((g.line||{}).color)&&(j=g.line.color),_.extendFlat(n,{distance:n.maxHoverDistance,x0:X,x1:oe,y0:J,y1:J,color:j,hovertemplate:!1}),delete n.index,n.text=g.text&&!Array.isArray(g.text)?String(g.text):g.name,[n]}}}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../registry":638,"./get_trace_color":937}],939:[function(v,ie,ae){"use strict";var _=v("./subtypes");ie.exports={hasLines:_.hasLines,hasMarkers:_.hasMarkers,hasText:_.hasText,isBubble:_.isBubble,attributes:v("./attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("./cross_trace_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./cross_trace_calc"),arraysToCalcdata:v("./arrays_to_calcdata"),plot:v("./plot"),colorbar:v("./marker_colorbar"),formatLabels:v("./format_labels"),style:v("./style").style,styleOnSelect:v("./style").styleOnSelect,hoverPoints:v("./hover"),selectPoints:v("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./arrays_to_calcdata":926,"./attributes":927,"./calc":928,"./cross_trace_calc":932,"./cross_trace_defaults":933,"./defaults":934,"./format_labels":936,"./hover":938,"./marker_colorbar":945,"./plot":948,"./select":949,"./style":951,"./subtypes":952}],940:[function(v,ie,ae){"use strict";var _=v("../../lib").isArrayOrTypedArray,k=v("../../components/colorscale/helpers").hasColorscale,m=v("../../components/colorscale/defaults");ie.exports=function(e,c,d,n,t,i){var a=(e.marker||{}).color;t("line.color",d),k(e,"line")?m(e,c,n,t,{prefix:"line.",cLetter:"c"}):t("line.color",!_(a)&&a||d),t("line.width"),(i||{}).noDash||t("line.dash")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],941:[function(v,ie,ae){"use strict";var _=v("../../constants/numerical"),k=_.BADNUM,m=_.LOG_CLIP,E=m+.5,e=m-.5,c=v("../../lib"),d=c.segmentsIntersect,n=c.constrain,t=v("./constants");ie.exports=function(a,r){var C,R,z,O,I,F,D,N,U,X,oe,se,ne,W,G,$,q,K,g=r.xaxis,s=r.yaxis,b="log"===g.type,x="log"===s.type,S=g._length,p=s._length,w=r.connectGaps,l=r.baseTolerance,y=r.shape,A="linear"===y,T=r.fill&&"none"!==r.fill,M=[],f=t.minTolerance,u=a.length,h=new Array(u),o=0;function V(St){var Bt=a[St];if(!Bt)return!1;var Zt=r.linearized?g.l2p(Bt.x):g.c2p(Bt.x),Et=r.linearized?s.l2p(Bt.y):s.c2p(Bt.y);if(Zt===k){if(b&&(Zt=g.c2p(Bt.x,!0)),Zt===k)return!1;x&&Et===k&&(Zt*=Math.abs(g._m*p*(g._m>0?E:e)/(s._m*S*(s._m>0?E:e)))),Zt*=1e3}if(Et===k){if(x&&(Et=s.c2p(Bt.y,!0)),Et===k)return!1;Et*=1e3}return[Zt,Et]}function H(St,Bt,Zt,Et){var wt=Zt-St,at=Et-Bt,vt=.5-St,Qe=.5-Bt,Pe=wt*wt+at*at,Ze=wt*vt+at*Qe;if(Ze>0&&Ze<Pe){var Xe=vt*at-Qe*wt;if(Xe*Xe<Pe)return!0}}function Y(St,Bt){var Zt=St[0]/S,Et=St[1]/p,wt=Math.max(0,-Zt,Zt-1,-Et,Et-1);return wt&&void 0!==q&&H(Zt,Et,q,K)&&(wt=0),wt&&Bt&&H(Zt,Et,Bt[0]/S,Bt[1]/p)&&(wt=0),(1+t.toleranceGrowth*wt)*l}function te(St,Bt){var Zt=St[0]-Bt[0],Et=St[1]-Bt[1];return Math.sqrt(Zt*Zt+Et*Et)}var xe,ke,we,de,be,Le,Ue,J=t.maxScreensAway,j=-S*J,re=S*(1+J),le=-p*J,ge=p*(1+J),pe=[[j,le,re,le],[re,le,re,ge],[re,ge,j,ge],[j,ge,j,le]];function ye(St){if(St[0]<j||St[0]>re||St[1]<le||St[1]>ge)return[n(St[0],j,re),n(St[1],le,ge)]}function Ce(St,Bt){if(St[0]===Bt[0]&&(St[0]===j||St[0]===re)||St[1]===Bt[1]&&(St[1]===le||St[1]===ge))return!0}function Ke(St,Bt,Zt){return function(Et,wt){var at=ye(Et),vt=ye(wt),Qe=[];if(at&&vt&&Ce(at,vt))return Qe;at&&Qe.push(at),vt&&Qe.push(vt);var Pe=2*c.constrain((Et[St]+wt[St])/2,Bt,Zt)-((at||Et)[St]+(vt||wt)[St]);return Pe&&((at&&vt?Pe>0==at[St]>vt[St]?at:vt:at||vt)[St]+=Pe),Qe}}function Ie(St){var Bt=St[0],Zt=St[1],Et=Bt===h[o-1][0],wt=Zt===h[o-1][1];if(!Et||!wt)if(o>1){var at=Bt===h[o-2][0],vt=Zt===h[o-2][1];Et&&(Bt===j||Bt===re)&&at?vt?o--:h[o-1]=St:wt&&(Zt===le||Zt===ge)&&vt?at?o--:h[o-1]=St:h[o++]=St}else h[o++]=St}function nt(St){h[o-1][0]!==St[0]&&h[o-1][1]!==St[1]&&Ie([we,de]),Ie(St),be=null,we=de=0}function gt(St){if(q=St[0]/S,K=St[1]/p,ke=St[1]<le?le:St[1]>ge?ge:0,(xe=St[0]<j?j:St[0]>re?re:0)||ke){if(o)if(be){var Bt=Ue(be,St);Bt.length>1&&(nt(Bt[0]),h[o++]=Bt[1])}else Le=Ue(h[o-1],St)[0],h[o++]=Le;else h[o++]=[xe||St[0],ke||St[1]];var Zt=h[o-1];xe&&ke&&(Zt[0]!==xe||Zt[1]!==ke)?(be&&(we!==xe&&de!==ke?Ie(we&&de?function Be(St,Bt){var Zt=Bt[0]-St[0],Et=(Bt[1]-St[1])/Zt;return(St[1]*Bt[0]-Bt[1]*St[0])/Zt>0?[Et>0?j:re,ge]:[Et>0?re:j,le]}(be,St):[we||xe,de||ke]):we&&de&&Ie([we,de])),Ie([xe,ke])):we-xe&&de-ke&&Ie([xe||we,ke||de]),be=St,we=xe,de=ke}else be&&nt(Ue(be,St)[0]),h[o++]=St}for("linear"===y||"spline"===y?Ue=function De(St,Bt){for(var Zt=[],Et=0,wt=0;wt<4;wt++){var at=pe[wt],vt=d(St[0],St[1],Bt[0],Bt[1],at[0],at[1],at[2],at[3]);vt&&(!Et||Math.abs(vt.x-Zt[0][0])>1||Math.abs(vt.y-Zt[0][1])>1)&&(vt=[vt.x,vt.y],Et&&te(vt,St)<te(Zt[0],St)?Zt.unshift(vt):Zt.push(vt),Et++)}return Zt}:"hv"===y||"vh"===y?Ue=function Fe(St,Bt){var Zt=[],Et=ye(St),wt=ye(Bt);return Et&&wt&&Ce(Et,wt)||(Et&&Zt.push(Et),wt&&Zt.push(wt)),Zt}:"hvh"===y?Ue=Ke(0,j,re):"vhv"===y&&(Ue=Ke(1,le,ge)),C=0;C<u;C++)if(R=V(C)){for(o=0,be=null,gt(R),C++;C<u;C++){if(!(O=V(C))){if(w)continue;break}if(A&&r.simplify){var Nt=V(C+1);if(X=te(O,R),T&&(0===o||o===u-1)||!(X<Y(O,Nt)*f)){for(N=[(O[0]-R[0])/X,(O[1]-R[1])/X],I=R,oe=X,se=W=G=0,D=!1,z=O,C++;C<a.length;C++){if(F=Nt,Nt=V(C+1),!F){if(w)continue;break}if($=(U=[F[0]-R[0],F[1]-R[1]])[0]*N[1]-U[1]*N[0],W=Math.min(W,$),(G=Math.max(G,$))-W>Y(F,Nt))break;z=F,(ne=U[0]*N[0]+U[1]*N[1])>oe?(oe=ne,O=F,D=!1):ne<se&&(se=ne,I=F,D=!0)}if(D?(gt(O),z!==I&&gt(I)):(I!==R&&gt(I),z!==O&&gt(O)),gt(z),C>=a.length||!F)break;gt(F),R=F}}else gt(O)}be&&Ie([we||be[0],de||be[1]]),M.push(h.slice(0,o))}return M}},{"../../constants/numerical":479,"../../lib":503,"./constants":931}],942:[function(v,ie,ae){"use strict";ie.exports=function(k,m,E){"spline"===E("line.shape")&&E("line.smoothing")}},{}],943:[function(v,ie,ae){"use strict";var _={tonextx:1,tonexty:1,tonext:1};ie.exports=function(m,E,e){var c,d,n,t,i,a={},r=!1,g=-1,s=0,b=-1;for(d=0;d<e.length;d++)(n=(c=e[d][0].trace).stackgroup||"")?n in a?i=a[n]:(i=a[n]=s,s++):c.fill in _&&b>=0?i=b:(i=b=s,s++),i<g&&(r=!0),c._groupIndex=g=i;var x=e.slice();r&&x.sort(function(p,w){var l=p[0].trace,y=w[0].trace;return l._groupIndex-y._groupIndex||l.index-y.index});var S={};for(d=0;d<x.length;d++)n=(c=x[d][0].trace).stackgroup||"",!0===c.visible?(c._nexttrace=null,c.fill in _&&(c._prevtrace=(t=S[n])||null,t&&(t._nexttrace=c)),c._ownfill=c.fill&&("tozero"===c.fill.substr(0,6)||"toself"===c.fill||"to"===c.fill.substr(0,2)&&!c._prevtrace),S[n]=c):c._prevtrace=c._nexttrace=c._ownfill=null;return x}},{}],944:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric");ie.exports=function(m,E){E||(E=2);var e=m.marker,c=e.sizeref||1,d=e.sizemin||0,n="area"===e.sizemode?function(t){return Math.sqrt(t/c)}:function(t){return t/c};return function(t){var i=n(t/E);return _(i)&&i>0?Math.max(i,d):0}}},{"fast-isnumeric":190}],945:[function(v,ie,ae){"use strict";ie.exports={container:"marker",min:"cmin",max:"cmax"}},{}],946:[function(v,ie,ae){"use strict";var _=v("../../components/color"),k=v("../../components/colorscale/helpers").hasColorscale,m=v("../../components/colorscale/defaults"),E=v("./subtypes");ie.exports=function(c,d,n,t,i,a){var r=E.isBubble(c),g=(c.line||{}).color;a=a||{},g&&(n=g),i("marker.symbol"),i("marker.opacity",r?.7:1),i("marker.size"),i("marker.color",n),k(c,"marker")&&m(c,d,t,i,{prefix:"marker.",cLetter:"c"}),a.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),a.noLine||(i("marker.line.color",g&&!Array.isArray(g)&&d.marker.color!==g?g:r?_.background:_.defaultLine),k(c,"marker.line")&&m(c,d,t,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",r?1:0)),r&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),a.gradient&&"none"!==i("marker.gradient.type")&&i("marker.gradient.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"./subtypes":952}],947:[function(v,ie,ae){"use strict";var _=v("../../lib").dateTick0,m=v("../../constants/numerical").ONEWEEK;function E(e,c){return _(c,e%m==0?1:0)}ie.exports=function(c,d,n,t,i){if(i||(i={x:!0,y:!0}),i.x){var a=t("xperiod");a&&(t("xperiod0",E(a,d.xcalendar)),t("xperiodalignment"))}if(i.y){var r=t("yperiod");r&&(t("yperiod0",E(r,d.ycalendar)),t("yperiodalignment"))}}},{"../../constants/numerical":479,"../../lib":503}],948:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../registry"),m=v("../../lib"),E=m.ensureSingle,e=m.identity,c=v("../../components/drawing"),d=v("./subtypes"),n=v("./line_points"),t=v("./link_traces"),i=v("../../lib/polygon").tester;function r(s,b,x,S,p,w,l){var y;!function g(s,b,x,S,p){var w=x.xaxis,l=x.yaxis,y=_.extent(m.simpleMap(w.range,w.r2c)),A=_.extent(m.simpleMap(l.range,l.r2c)),T=S[0].trace;if(d.hasMarkers(T)){var M=T.marker.maxdisplayed;if(0!==M){var f=S.filter(function(C){return C.x>=y[0]&&C.x<=y[1]&&C.y>=A[0]&&C.y<=A[1]}),u=Math.ceil(f.length/M),h=0;p.forEach(function(C,R){var z=C[0].trace;d.hasMarkers(z)&&z.marker.maxdisplayed>0&&R<b&&h++});var o=Math.round(h*u/3+Math.floor(h/3)*u/7.1);S.forEach(function(C){delete C.vis}),f.forEach(function(C,R){0===Math.round((R+o)%u)&&(C.vis=!0)})}}}(0,b,x,S,p);var A=!!l&&l.duration>0;function T(De){return A?De.transition():De}var M=x.xaxis,f=x.yaxis,u=S[0].trace,h=u.line,o=_.select(w),C=E(o,"g","errorbars"),R=E(o,"g","lines"),z=E(o,"g","points"),O=E(o,"g","text");if(k.getComponentMethod("errorbars","plot")(s,C,x,l),!0===u.visible){T(o).style("opacity",u.opacity);var I,F,D=u.fill.charAt(u.fill.length-1);"x"!==D&&"y"!==D&&(D=""),S[0][x.isRangePlot?"nodeRangePlot3":"node3"]=o;var N="",U=[],X=u._prevtrace;X&&(N=X._prevRevpath||"",F=X._nextFill,U=X._polygons);var oe,se,G,$,V,H,q,K,Y,ne="",W="",te=[],J=m.noop;if(I=u._ownFill,d.hasLines(u)||"none"!==u.fill){for(F&&F.datum(S),-1!==["hv","vh","hvh","vhv"].indexOf(h.shape)?(G=c.steps(h.shape),$=c.steps(h.shape.split("").reverse().join(""))):G=$="spline"===h.shape?function(De){var ye=De[De.length-1];return De.length>1&&De[0][0]===ye[0]&&De[0][1]===ye[1]?c.smoothclosed(De.slice(1),h.smoothing):c.smoothopen(De,h.smoothing)}:function(De){return"M"+De.join("L")},V=function(De){return $(De.reverse())},te=n(S,{xaxis:M,yaxis:f,connectGaps:u.connectgaps,baseTolerance:Math.max(h.width||1,3)/4,shape:h.shape,simplify:h.simplify,fill:u.fill}),Y=u._polygons=new Array(te.length),y=0;y<te.length;y++)u._polygons[y]=i(te[y]);te.length&&(H=te[0][0],K=(q=te[te.length-1])[q.length-1]),J=function(De){return function(ye){if(oe=G(ye),se=V(ye),ne?D?(ne+="L"+oe.substr(1),W=se+"L"+W.substr(1)):(ne+="Z"+oe,W=se+"Z"+W):(ne=oe,W=se),d.hasLines(u)&&ye.length>1){var Ce=_.select(this);if(Ce.datum(S),De)T(Ce.style("opacity",0).attr("d",oe).call(c.lineGroupStyle)).style("opacity",1);else{var Fe=T(Ce);Fe.attr("d",oe),c.singleLineStyle(S,Fe)}}}}}var j=R.selectAll(".js-line").data(te);T(j.exit()).style("opacity",0).remove(),j.each(J(!1)),j.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(c.lineGroupStyle).each(J(!0)),c.setClipUrl(j,x.layerClipId,s),te.length?(I?(I.datum(S),H&&K&&(D?("y"===D?H[1]=K[1]=f.c2p(0,!0):"x"===D&&(H[0]=K[0]=M.c2p(0,!0)),T(I).attr("d","M"+K+"L"+H+"L"+ne.substr(1)).call(c.singleFillStyle,s)):T(I).attr("d",ne+"Z").call(c.singleFillStyle,s))):F&&("tonext"===u.fill.substr(0,6)&&ne&&N?("tonext"===u.fill?T(F).attr("d",ne+"Z"+N+"Z").call(c.singleFillStyle,s):T(F).attr("d",ne+"L"+N.substr(1)+"Z").call(c.singleFillStyle,s),u._polygons=u._polygons.concat(U)):(re(F),u._polygons=null)),u._prevRevpath=W,u._prevPolygons=Y):(I?re(I):F&&re(F),u._polygons=u._prevRevpath=u._prevPolygons=null),z.datum(S),O.datum(S),function de(De,ye,Ce){var Fe,Be=Ce[0].trace,Ie=d.hasMarkers(Be),nt=d.hasText(Be),gt=function ke(De){if(De.ids)return xe}(Be),Nt=we,St=we;if(Ie||nt){var Bt=e,Zt=Be.stackgroup,Et=Zt&&"infer zero"===s._fullLayout._scatterStackOpts[M._id+f._id][Zt].stackgaps;Be.marker.maxdisplayed||Be._needsCull?Bt=Et?ge:le:Zt&&!Et&&(Bt=pe),Ie&&(Nt=Bt),nt&&(St=Bt)}var at,wt=(Fe=De.selectAll("path.point").data(Nt,gt)).enter().append("path").classed("point",!0);A&&wt.call(c.pointStyle,Be,s).call(c.translatePoints,M,f).style("opacity",0).transition().style("opacity",1),Fe.order(),Ie&&(at=c.makePointStyleFns(Be)),Fe.each(function(vt){var Qe=_.select(this),Pe=T(Qe);c.translatePoint(vt,Pe,M,f)?(c.singlePointStyle(vt,Pe,Be,at,s),x.layerClipId&&c.hideOutsideRangePoint(vt,Pe,M,f,Be.xcalendar,Be.ycalendar),Be.customdata&&Qe.classed("plotly-customdata",null!=vt.data)):Pe.remove()}),A?Fe.exit().transition().style("opacity",0).remove():Fe.exit().remove(),(Fe=ye.selectAll("g").data(St,gt)).enter().append("g").classed("textpoint",!0).append("text"),Fe.order(),Fe.each(function(vt){var Qe=_.select(this),Pe=T(Qe.select("text"));c.translatePoint(vt,Pe,M,f)?x.layerClipId&&c.hideOutsideRangePoint(vt,Qe,M,f,Be.xcalendar,Be.ycalendar):Qe.remove()}),Fe.selectAll("text").call(c.textPointStyle,Be,s).each(function(vt){var Qe=M.c2p(vt.x),Pe=f.c2p(vt.y);_.select(this).selectAll("tspan.line").each(function(){T(_.select(this)).attr({x:Qe,y:Pe})})}),Fe.exit().remove()}(z,O,S);var Le=!1===u.cliponaxis?null:x.layerClipId;c.setClipUrl(z,Le,s),c.setClipUrl(O,Le,s)}function re(De){T(De).attr("d","M0,0Z")}function le(De){return De.filter(function(ye){return!ye.gap&&ye.vis})}function ge(De){return De.filter(function(ye){return ye.vis})}function pe(De){return De.filter(function(ye){return!ye.gap})}function xe(De){return De.id}function we(){return!1}}ie.exports=function(b,x,S,p,w,l){var y,A,T=!w,M=!!w&&w.duration>0,f=t(b,x,S);(y=p.selectAll("g.trace").data(f,function(h){return h[0].trace.uid})).enter().append("g").attr("class",function(h){return"trace scatter trace"+h[0].trace.uid}).style("stroke-miterlimit",2),y.order(),function a(s,b,x){b.each(function(S){var p=E(_.select(this),"g","fills");c.setClipUrl(p,x.layerClipId,s);var w=S[0].trace,l=[];w._ownfill&&l.push("_ownFill"),w._nexttrace&&l.push("_nextFill");var y=p.selectAll("g").data(l,e);y.enter().append("g"),y.exit().each(function(A){w[A]=null}).remove(),y.order().each(function(A){w[A]=E(_.select(this),"path","js-fill")})})}(b,y,x),M?(l&&(A=l()),_.transition().duration(w.duration).ease(w.easing).each("end",function(){A&&A()}).each("interrupt",function(){A&&A()}).each(function(){p.selectAll("g.trace").each(function(h,o){r(b,o,x,h,f,this,w)})})):y.each(function(h,o){r(b,o,x,h,f,this,w)}),T&&y.exit().remove(),p.selectAll("path:not([d])").remove()}},{"../../components/drawing":388,"../../lib":503,"../../lib/polygon":515,"../../registry":638,"./line_points":941,"./link_traces":943,"./subtypes":952,"@plotly/d3":58}],949:[function(v,ie,ae){"use strict";var _=v("./subtypes");ie.exports=function(m,E){var i,a,r,g,e=m.cd,c=m.xaxis,d=m.yaxis,n=[],t=e[0].trace;if(!_.hasMarkers(t)&&!_.hasText(t))return[];if(!1===E)for(i=0;i<e.length;i++)e[i].selected=0;else for(i=0;i<e.length;i++)r=c.c2p((a=e[i]).x),g=d.c2p(a.y),null!==a.i&&E.contains([r,g],!1,i,m)?(n.push({pointNumber:a.i,x:c.c2d(a.x),y:d.c2d(a.y)}),a.selected=1):a.selected=0;return n}},{"./subtypes":952}],950:[function(v,ie,ae){"use strict";var _=["orientation","groupnorm","stackgaps"];ie.exports=function(m,E,e,c){var d=e._scatterStackOpts,n=c("stackgroup");if(n){var t=E.xaxis+E.yaxis,i=d[t];i||(i=d[t]={});var a=i[n],r=!1;a?a.traces.push(E):(a=i[n]={traceIndices:[],traces:[E]},r=!0);for(var g={orientation:E.x&&!E.y?"h":"v"},s=0;s<_.length;s++){var b=_[s],x=b+"Found";if(!a[x]){var S=void 0!==m[b],p="orientation"===b;if((S||r)&&(a[b]=c(b,g[b]),p&&(a.fillDflt="h"===a[b]?"tonextx":"tonexty"),S&&(a[x]=!0,!r&&(delete a.traces[0][b],p))))for(var w=0;w<a.traces.length-1;w++){var l=a.traces[w];l._input.fill!==l.fill&&(l.fill=a.fillDflt)}}}return a}}},{}],951:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../components/drawing"),m=v("../../registry");function e(n,t,i){k.pointStyle(n.selectAll("path.point"),t,i)}function c(n,t,i){k.textPointStyle(n.selectAll("text"),t,i)}ie.exports={style:function E(n){var t=_.select(n).selectAll("g.trace.scatter");t.style("opacity",function(i){return i[0].trace.opacity}),t.selectAll("g.points").each(function(i){e(_.select(this),i.trace||i[0].trace,n)}),t.selectAll("g.text").each(function(i){c(_.select(this),i.trace||i[0].trace,n)}),t.selectAll("g.trace path.js-line").call(k.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(k.fillGroupStyle,n),m.getComponentMethod("errorbars","style")(t)},stylePoints:e,styleText:c,styleOnSelect:function d(n,t,i){var a=t[0].trace;a.selectedpoints?(k.selectedPointStyle(i.selectAll("path.point"),a),k.selectedTextStyle(i.selectAll("text"),a)):(e(i,a,n),c(i,a,n))}}},{"../../components/drawing":388,"../../registry":638,"@plotly/d3":58}],952:[function(v,ie,ae){"use strict";var _=v("../../lib");ie.exports={hasLines:function(k){return k.visible&&k.mode&&-1!==k.mode.indexOf("lines")},hasMarkers:function(k){return k.visible&&(k.mode&&-1!==k.mode.indexOf("markers")||"splom"===k.type)},hasText:function(k){return k.visible&&k.mode&&-1!==k.mode.indexOf("text")},isBubble:function(k){return _.isPlainObject(k.marker)&&_.isArrayOrTypedArray(k.marker.size)}}},{"../../lib":503}],953:[function(v,ie,ae){"use strict";var _=v("../../lib");ie.exports=function(k,m,E,e,c){c=c||{},e("textposition"),_.coerceFont(e,"textfont",E.font),c.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":503}],954:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../registry");ie.exports=function(E,e,c,d){var i,n=d("x"),t=d("y");if(k.getComponentMethod("calendars","handleTraceDefaults")(E,e,["x","y"],c),n){var r=_.minRowLength(n);t?i=Math.min(r,_.minRowLength(t)):(i=r,d("y0"),d("dy"))}else{if(!t)return 0;i=_.minRowLength(t),d("x0"),d("dx")}return e._length=i,i}},{"../../lib":503,"../../registry":638}],955:[function(v,ie,ae){"use strict";var _=v("../scatter/attributes"),k=v("../../components/colorscale/attributes"),m=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,E=v("../../plots/template_attributes").hovertemplateAttrs,e=v("../../plots/template_attributes").texttemplateAttrs,c=v("../../plots/attributes"),d=v("../../constants/gl3d_dashes"),n=v("../../constants/gl3d_markers"),t=v("../../lib/extend").extendFlat,i=v("../../plot_api/edit_types").overrideAll,a=v("../../lib/sort_object_keys"),g=_.marker,s=g.line,b=t({width:_.line.width,dash:{valType:"enumerated",values:a(d),dflt:"solid"}},k("line"));var S=ie.exports=i({x:_.x,y:_.y,z:{valType:"data_array"},text:t({},_.text,{}),texttemplate:e({},{}),hovertext:t({},_.hovertext,{}),hovertemplate:E(),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),mode:t({},_.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:_.connectgaps,line:b,marker:t({symbol:{valType:"enumerated",values:a(n),dflt:"circle",arrayOk:!0},size:t({},g.size,{dflt:8}),sizeref:g.sizeref,sizemin:g.sizemin,sizemode:g.sizemode,opacity:t({},g.opacity,{arrayOk:!1}),colorbar:g.colorbar,line:t({width:t({},s.width,{arrayOk:!1})},k("marker.line"))},k("marker")),textposition:t({},_.textposition,{dflt:"top center"}),textfont:{color:_.textfont.color,size:_.textfont.size,family:t({},_.textfont.family,{arrayOk:!1})},opacity:c.opacity,hoverinfo:t({},c.hoverinfo)},"calc","nested");S.x.editType=S.y.editType=S.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":373,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../scatter/attributes":927}],956:[function(v,ie,ae){"use strict";var _=v("../scatter/arrays_to_calcdata"),k=v("../scatter/colorscale_calc");ie.exports=function(E,e){var c=[{x:!1,y:!1,trace:e,t:{}}];return _(c,e),k(E,e),c}},{"../scatter/arrays_to_calcdata":926,"../scatter/colorscale_calc":930}],957:[function(v,ie,ae){"use strict";var _=v("../../registry");function k(e,c,d,n){if(!c||!c.visible)return null;for(var t=_.getComponentMethod("errorbars","makeComputeError")(c),i=new Array(e.length),a=0;a<e.length;a++){var r=t(+e[a],a);if("log"===n.type){var g=n.c2l(e[a]),s=e[a]-r[0],b=e[a]+r[1];if(i[a]=[(n.c2l(s,!0)-g)*d,(n.c2l(b,!0)-g)*d],s>0){var x=n.c2l(s);n._lowerLogErrorBound||(n._lowerLogErrorBound=x),n._lowerErrorBound=Math.min(n._lowerLogErrorBound,x)}}else i[a]=[-r[0]*d,r[1]*d]}return i}ie.exports=function E(e,c,d){var n=[k(e.x,e.error_x,c[0],d.xaxis),k(e.y,e.error_y,c[1],d.yaxis),k(e.z,e.error_z,c[2],d.zaxis)],t=function m(e){for(var c=0;c<e.length;c++)if(e[c])return e[c].length;return 0}(n);if(0===t)return null;for(var i=new Array(t),a=0;a<t;a++){for(var r=[[0,0,0],[0,0,0]],g=0;g<3;g++)if(n[g])for(var s=0;s<2;s++)r[s][g]=n[g][a][s];i[a]=r}return i}},{"../../registry":638}],958:[function(v,ie,ae){"use strict";var _=v("../../../stackgl_modules").gl_line3d,k=v("../../../stackgl_modules").gl_scatter3d,m=v("../../../stackgl_modules").gl_error3d,E=v("../../../stackgl_modules").gl_mesh3d,e=v("../../../stackgl_modules").delaunay_triangulate,c=v("../../lib"),d=v("../../lib/str2rgbarray"),n=v("../../lib/gl_format_color").formatColor,t=v("../scatter/make_bubble_size_func"),i=v("../../constants/gl3d_dashes"),a=v("../../constants/gl3d_markers"),r=v("../../plots/cartesian/axes"),g=v("../../components/fx/helpers").appendArrayPointValue,s=v("./calc_errors");function b(C,R){this.scene=C,this.uid=R,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var x=b.prototype;function w(C){return null==C?0:C.indexOf("left")>-1?-1:C.indexOf("right")>-1?1:0}function l(C){return null==C?0:C.indexOf("top")>-1?-1:C.indexOf("bottom")>-1?1:0}function A(C,R){return R(4*C)}function T(C){return a[C]}function M(C,R,z,O,I){var F=null;if(c.isArrayOrTypedArray(C)){F=[];for(var D=0;D<R;D++)F[D]=void 0===C[D]?O:z(C[D],I)}else F=z(C,c.identity);return F}function f(C,R){var H,q,K,Y,te,J,z=[],O=C.fullSceneLayout,I=C.dataScale,F=O.xaxis,D=O.yaxis,N=O.zaxis,U=R.marker,X=R.line,oe=R.x||[],se=R.y||[],ne=R.z||[],W=oe.length,G=R.xcalendar,$=R.ycalendar,V=R.zcalendar;for(te=0;te<W;te++)H=F.d2l(oe[te],0,G)*I[0],q=D.d2l(se[te],0,$)*I[1],K=N.d2l(ne[te],0,V)*I[2],z[te]=[H,q,K];if(Array.isArray(R.text))J=R.text;else if(void 0!==R.text)for(J=new Array(W),te=0;te<W;te++)J[te]=R.text;function j(Ke,Ue){var Be=O[Ke];return r.tickText(Be,Be.d2l(Ue),!0).text}var re=R.texttemplate;if(re){var ge=C.fullLayout._d3locale,pe=Array.isArray(re),xe=pe?Math.min(re.length,W):W,ke=pe?function(Ke){return re[Ke]}:function(){return re};for(J=new Array(xe),te=0;te<xe;te++){var we={x:oe[te],y:se[te],z:ne[te]},de={xLabel:j("xaxis",oe[te]),yLabel:j("yaxis",se[te]),zLabel:j("zaxis",ne[te])},be={};g(be,R,te);var Le=R._meta||{};J[te]=c.texttemplateString(ke(te),de,ge,be,we,Le)}}if(Y={position:z,mode:R.mode,text:J},"line"in R&&(Y.lineColor=n(X,1,W),Y.lineWidth=X.width,Y.lineDashes=X.dash),"marker"in R){var De=t(R);Y.scatterColor=n(U,1,W),Y.scatterSize=M(U.size,W,A,20,De),Y.scatterMarker=M(U.symbol,W,T,"\u25cf"),Y.scatterLineWidth=U.line.width,Y.scatterLineColor=n(U.line,1,W),Y.scatterAngle=0}"textposition"in R&&(Y.textOffset=function y(C){var O=[0,0];if(Array.isArray(C))for(var I=0;I<C.length;I++)O[I]=[0,0],C[I]&&(O[I][0]=w(C[I]),O[I][1]=l(C[I]));else O[0]=w(C),O[1]=l(C);return O}(R.textposition),Y.textColor=n(R.textfont,1,W),Y.textSize=M(R.textfont.size,W,c.identity,12),Y.textFont=R.textfont.family,Y.textAngle=0);var ye=["x","y","z"];for(Y.project=[!1,!1,!1],Y.projectScale=[1,1,1],Y.projectOpacity=[1,1,1],te=0;te<3;++te){var Ce=R.projection[ye[te]];(Y.project[te]=Ce.show)&&(Y.projectOpacity[te]=Ce.opacity,Y.projectScale[te]=Ce.scale)}Y.errorBounds=s(R,I,O);var Fe=function p(C){for(var R=[0,0,0],z=[[0,0,0],[0,0,0],[0,0,0]],O=[1,1,1],I=0;I<3;I++){var F=C[I];F&&!1!==F.copy_zstyle&&!1!==C[2].visible&&(F=C[2]),F&&F.visible&&(R[I]=F.width/2,z[I]=d(F.color),O[I]=F.thickness)}return{capSize:R,color:z,lineWidth:O}}([R.error_x,R.error_y,R.error_z]);return Y.errorColor=Fe.color,Y.errorLineWidth=Fe.lineWidth,Y.errorCapSize=Fe.capSize,Y.delaunayAxis=R.surfaceaxis,Y.delaunayColor=d(R.surfacecolor),Y}function u(C){if(c.isArrayOrTypedArray(C)){var R=C[0];return c.isArrayOrTypedArray(R)&&(C=R),"rgb("+C.slice(0,3).map(function(z){return Math.round(255*z)})+")"}return null}function h(C){return c.isArrayOrTypedArray(C)?4===C.length&&"number"==typeof C[0]?u(C):C.map(u):null}x.handlePick=function(C){if(C.object&&(C.object===this.linePlot||C.object===this.delaunayMesh||C.object===this.textMarkers||C.object===this.scatterPlot)){var R=C.index=C.data.index;return C.object.highlight&&C.object.highlight(null),this.scatterPlot&&(C.object=this.scatterPlot,this.scatterPlot.highlight(C.data)),C.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[R]||0===this.textLabels[R])&&(C.textLabel=this.textLabels[R]):C.textLabel=this.textLabels),C.traceCoordinate=[this.data.x[R],this.data.y[R],this.data.z[R]],!0}},x.update=function(C){var z,O,I,F,R=this.scene.glplot.gl,D=i.solid;this.data=C;var N=f(this.scene,C);"mode"in N&&(this.mode=N.mode),"lineDashes"in N&&N.lineDashes in i&&(D=i[N.lineDashes]),this.color=h(N.scatterColor)||h(N.lineColor),this.dataPoints=N.position,z={gl:this.scene.glplot.gl,position:N.position,color:N.lineColor,lineWidth:N.lineWidth||1,dashes:D[0],dashScale:D[1],opacity:C.opacity,connectGaps:C.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(z):(this.linePlot=_(z),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var U=C.opacity;if(C.marker&&C.marker.opacity&&(U*=C.marker.opacity),O={gl:this.scene.glplot.gl,position:N.position,color:N.scatterColor,size:N.scatterSize,glyph:N.scatterMarker,opacity:U,orthographic:!0,lineWidth:N.scatterLineWidth,lineColor:N.scatterLineColor,project:N.project,projectScale:N.projectScale,projectOpacity:N.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(O):(this.scatterPlot=k(O),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),F={gl:this.scene.glplot.gl,position:N.position,glyph:N.text,color:N.textColor,size:N.textSize,angle:N.textAngle,alignment:N.textOffset,font:N.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:C.opacity},this.textLabels=C.hovertext||C.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(F):(this.textMarkers=k(F),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),I={gl:this.scene.glplot.gl,position:N.position,color:N.errorColor,error:N.errorBounds,lineWidth:N.errorLineWidth,capSize:N.errorCapSize,opacity:C.opacity},this.errorBars?N.errorBounds?this.errorBars.update(I):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):N.errorBounds&&(this.errorBars=m(I),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),N.delaunayAxis>=0){var X=function S(C,R,z){var N,O=(z+1)%3,I=(z+2)%3,F=[],D=[];for(N=0;N<C.length;++N){var U=C[N];isNaN(U[O])||!isFinite(U[O])||isNaN(U[I])||!isFinite(U[I])||(F.push([U[O],U[I]]),D.push(N))}var X=e(F);for(N=0;N<X.length;++N)for(var oe=X[N],se=0;se<oe.length;++se)oe[se]=D[oe[se]];return{positions:C,cells:X,meshColor:R}}(N.position,N.delaunayColor,N.delaunayAxis);X.opacity=C.opacity,this.delaunayMesh?this.delaunayMesh.update(X):(X.gl=R,this.delaunayMesh=E(X),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},x.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},ie.exports=function o(C,R){var z=new b(C,R.uid);return z.update(R),z}},{"../../../stackgl_modules":1124,"../../components/fx/helpers":402,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../scatter/make_bubble_size_func":944,"./calc_errors":957}],959:[function(v,ie,ae){"use strict";var _=v("../../registry"),k=v("../../lib"),m=v("../scatter/subtypes"),E=v("../scatter/marker_defaults"),e=v("../scatter/line_defaults"),c=v("../scatter/text_defaults"),d=v("./attributes");ie.exports=function(i,a,r,g){function s(A,T){return k.coerce(i,a,d,A,T)}if(function n(t,i,a,r){var g=0,s=a("x"),b=a("y"),x=a("z");return _.getComponentMethod("calendars","handleTraceDefaults")(t,i,["x","y","z"],r),s&&b&&x&&(g=Math.min(s.length,b.length,x.length),i._length=i._xlength=i._ylength=i._zlength=g),g}(i,a,s,g)){s("text"),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat"),s("zhoverformat"),s("mode"),m.hasLines(a)&&(s("connectgaps"),e(i,a,r,g,s)),m.hasMarkers(a)&&E(i,a,r,g,s,{noSelect:!0}),m.hasText(a)&&(s("texttemplate"),c(i,a,g,s,{noSelect:!0}));var x=(a.line||{}).color,S=(a.marker||{}).color;s("surfaceaxis")>=0&&s("surfacecolor",x||S);for(var p=["x","y","z"],w=0;w<3;++w){var l="projection."+p[w];s(l+".show")&&(s(l+".opacity"),s(l+".scale"))}var y=_.getComponentMethod("errorbars","supplyDefaults");y(i,a,x||S||r,{axis:"z"}),y(i,a,x||S||r,{axis:"y",inherit:"z"}),y(i,a,x||S||r,{axis:"x",inherit:"z"})}else a.visible=!1}},{"../../lib":503,"../../registry":638,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":955}],960:[function(v,ie,ae){"use strict";ie.exports={plot:v("./convert"),attributes:v("./attributes"),markerSymbols:v("../../constants/gl3d_markers"),supplyDefaults:v("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:v("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":477,"../../plots/gl3d":598,"./attributes":955,"./calc":956,"./convert":958,"./defaults":959}],961:[function(v,ie,ae){"use strict";var _=v("../scatter/attributes"),k=v("../../plots/attributes"),m=v("../../plots/template_attributes").hovertemplateAttrs,E=v("../../plots/template_attributes").texttemplateAttrs,e=v("../../components/colorscale/attributes"),c=v("../../lib/extend").extendFlat,d=_.marker,n=_.line,t=d.line;ie.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:c({},_.mode,{dflt:"markers"}),text:c({},_.text,{}),texttemplate:E({editType:"plot"},{keys:["a","b","text"]}),hovertext:c({},_.hovertext,{}),line:{color:n.color,width:n.width,dash:n.dash,shape:c({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:_.connectgaps,fill:c({},_.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:_.fillcolor,marker:c({symbol:d.symbol,opacity:d.opacity,maxdisplayed:d.maxdisplayed,size:d.size,sizeref:d.sizeref,sizemin:d.sizemin,sizemode:d.sizemode,line:c({width:t.width,editType:"calc"},e("marker.line")),gradient:d.gradient,editType:"calc"},e("marker")),textfont:_.textfont,textposition:_.textposition,selected:_.selected,unselected:_.unselected,hoverinfo:c({},k.hoverinfo,{flags:["a","b","text","name"]}),hoveron:_.hoveron,hovertemplate:m()}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],962:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../scatter/colorscale_calc"),m=v("../scatter/arrays_to_calcdata"),E=v("../scatter/calc_selection"),e=v("../scatter/calc").calcMarkerSize,c=v("../carpet/lookup_carpetid");ie.exports=function(n,t){var i=t._carpetTrace=c(n,t);if(i&&i.visible&&"legendonly"!==i.visible){var a;t.xaxis=i.xaxis,t.yaxis=i.yaxis;var s,b,r=t._length,g=new Array(r),x=!1;for(a=0;a<r;a++)if(b=t.b[a],_(s=t.a[a])&&_(b)){var S=i.ab2xy(+s,+b,!0),p=i.isVisible(+s,+b);p||(x=!0),g[a]={x:S[0],y:S[1],a:s,b,vis:p}}else g[a]={x:!1,y:!1};return t._needsCull=x,g[0].carpet=i,g[0].trace=t,e(t,r),k(n,t),m(g,t),E(g,t),g}}},{"../carpet/lookup_carpetid":708,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],963:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../scatter/constants"),m=v("../scatter/subtypes"),E=v("../scatter/marker_defaults"),e=v("../scatter/line_defaults"),c=v("../scatter/line_shape_defaults"),d=v("../scatter/text_defaults"),n=v("../scatter/fillcolor_defaults"),t=v("./attributes");ie.exports=function(a,r,g,s){function b(A,T){return _.coerce(a,r,t,A,T)}b("carpet"),r.xaxis="x",r.yaxis="y";var x=b("a"),S=b("b"),p=Math.min(x.length,S.length);if(p){r._length=p,b("text"),b("texttemplate"),b("hovertext"),b("mode",p<k.PTS_LINESONLY?"lines+markers":"lines"),m.hasLines(r)&&(e(a,r,g,s,b),c(a,r,b),b("connectgaps")),m.hasMarkers(r)&&E(a,r,g,s,b,{gradient:!0}),m.hasText(r)&&d(a,r,s,b);var l=[];(m.hasMarkers(r)||m.hasText(r))&&(b("marker.maxdisplayed"),l.push("points")),b("fill"),"none"!==r.fill&&(n(a,r,g,b),m.hasLines(r)||c(a,r,b)),("tonext"===r.fill||"toself"===r.fill)&&l.push("fills"),"fills"!==b("hoveron",l.join("+")||"points")&&b("hovertemplate"),_.coerceSelectionMarkerOpacity(r,b)}else r.visible=!1}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":961}],964:[function(v,ie,ae){"use strict";ie.exports=function(k,m,E,e,c){var d=e[c];return k.a=d.a,k.b=d.b,k.y=d.y,k}},{}],965:[function(v,ie,ae){"use strict";ie.exports=function(k,m){var E={},e=m._carpet,c=e.ab2ij([k.a,k.b]),d=Math.floor(c[0]),n=c[0]-d,t=Math.floor(c[1]),a=e.evalxy([],d,t,n,c[1]-t);return E.yLabel=a[1].toFixed(3),E}},{}],966:[function(v,ie,ae){"use strict";var _=v("../scatter/hover"),k=v("../../lib").fillText;ie.exports=function(E,e,c,d){var n=_(E,e,c,d);if(n&&!1!==n[0].index){var t=n[0];if(void 0===t.index){var a=E.xa._length,r=a*(1-t.y0/E.ya._length)/2,g=a-r;return t.x0=Math.max(Math.min(t.x0,g),r),t.x1=Math.max(Math.min(t.x1,g),r),n}var s=t.cd[t.index];t.a=s.a,t.b=s.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var b=t.trace,x=b._carpet,S=b._module.formatLabels(s,b);t.yLabel=S.yLabel,delete t.text;var p=[];if(!b.hovertemplate){var y=(s.hi||b.hoverinfo).split("+");-1!==y.indexOf("all")&&(y=["a","b","text"]),-1!==y.indexOf("a")&&w(x.aaxis,s.a),-1!==y.indexOf("b")&&w(x.baxis,s.b),p.push("y: "+t.yLabel),-1!==y.indexOf("text")&&k(s,b,p),t.extraText=p.join("<br>")}return n}function w(A,T){var M;M=A.labelprefix&&A.labelprefix.length>0?A.labelprefix.replace(/ = $/,""):A._hovertitle,p.push(M+": "+T.toFixed(3)+A.labelsuffix)}}},{"../../lib":503,"../scatter/hover":938}],967:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),plot:v("./plot"),style:v("../scatter/style").style,styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover"),selectPoints:v("../scatter/select"),eventData:v("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:v("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":961,"./calc":962,"./defaults":963,"./event_data":964,"./format_labels":965,"./hover":966,"./plot":968}],968:[function(v,ie,ae){"use strict";var _=v("../scatter/plot"),k=v("../../plots/cartesian/axes"),m=v("../../components/drawing");ie.exports=function(e,c,d,n){var t,a,r=d[0][0].carpet,g={xaxis:k.getFromId(e,r.xaxis||"x"),yaxis:k.getFromId(e,r.yaxis||"y"),plot:c.plot};for(_(e,g,d,n),t=0;t<d.length;t++)a=n.selectAll("g.trace"+d[t][0].trace.uid+" .js-line"),m.setClipUrl(a,d[t][0].carpet._clipPathId,e)}},{"../../components/drawing":388,"../../plots/cartesian/axes":554,"../scatter/plot":948}],969:[function(v,ie,ae){"use strict";var _=v("../../plots/template_attributes").hovertemplateAttrs,k=v("../../plots/template_attributes").texttemplateAttrs,m=v("../scatter/attributes"),E=v("../../plots/attributes"),e=v("../../components/colorscale/attributes"),c=v("../../components/drawing/attributes").dash,d=v("../../lib/extend").extendFlat,n=v("../../plot_api/edit_types").overrideAll,t=m.marker,i=m.line,a=t.line;ie.exports=n({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:d({},m.mode,{dflt:"markers"}),text:d({},m.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:d({},m.hovertext,{}),textfont:m.textfont,textposition:m.textposition,line:{color:i.color,width:i.width,dash:c},connectgaps:m.connectgaps,marker:d({symbol:t.symbol,opacity:t.opacity,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,colorbar:t.colorbar,line:d({width:a.width},e("marker.line")),gradient:t.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:m.fillcolor,selected:m.selected,unselected:m.unselected,hoverinfo:d({},E.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:_()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],970:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../constants/numerical").BADNUM,m=v("../scatter/colorscale_calc"),E=v("../scatter/arrays_to_calcdata"),e=v("../scatter/calc_selection"),c=v("../../lib")._;function d(n){return n&&"string"==typeof n}ie.exports=function(t,i){var s,a=Array.isArray(i.locations),r=a?i.locations.length:i._length,g=new Array(r);s=i.geojson?function(l){return d(l)||_(l)}:d;for(var b=0;b<r;b++){var x=g[b]={};if(a){var S=i.locations[b];x.loc=s(S)?S:null}else{var p=i.lon[b],w=i.lat[b];x.lonlat=_(p)&&_(w)?[+p,+w]:[k,k]}}return E(g,i),m(t,i),e(g,i),r&&(g[0].t={labels:{lat:c(t,"lat:")+" ",lon:c(t,"lon:")+" "}}),g}},{"../../constants/numerical":479,"../../lib":503,"../scatter/arrays_to_calcdata":926,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],971:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../scatter/subtypes"),m=v("../scatter/marker_defaults"),E=v("../scatter/line_defaults"),e=v("../scatter/text_defaults"),c=v("../scatter/fillcolor_defaults"),d=v("./attributes");ie.exports=function(t,i,a,r){function g(y,A){return _.coerce(t,i,d,y,A)}var b,s=g("locations");if(s&&s.length){var S,x=g("geojson");("string"==typeof x&&""!==x||_.isPlainObject(x))&&(S="geojson-id"),"geojson-id"===g("locationmode",S)&&g("featureidkey"),b=s.length}else{var w=g("lon")||[],l=g("lat")||[];b=Math.min(w.length,l.length)}b?(i._length=b,g("text"),g("hovertext"),g("hovertemplate"),g("mode"),k.hasLines(i)&&(E(t,i,a,r,g),g("connectgaps")),k.hasMarkers(i)&&m(t,i,a,r,g,{gradient:!0}),k.hasText(i)&&(g("texttemplate"),e(t,i,r,g)),g("fill"),"none"!==i.fill&&c(t,i,a,g),_.coerceSelectionMarkerOpacity(i,g)):i.visible=!1}},{"../../lib":503,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":969}],972:[function(v,ie,ae){"use strict";ie.exports=function(k,m,E,e,c){k.lon=m.lon,k.lat=m.lat,k.location=m.loc?m.loc:null;var d=e[c];return d.fIn&&d.fIn.properties&&(k.properties=d.fIn.properties),k}},{}],973:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/axes");ie.exports=function(m,E,e){var c={},n=e[E.geo]._subplot.mockAxis,t=m.lonlat;return c.lonLabel=_.tickText(n,n.c2l(t[0]),!0).text,c.latLabel=_.tickText(n,n.c2l(t[1]),!0).text,c}},{"../../plots/cartesian/axes":554}],974:[function(v,ie,ae){"use strict";var _=v("../../components/fx"),k=v("../../constants/numerical").BADNUM,m=v("../scatter/get_trace_color"),E=v("../../lib").fillText,e=v("./attributes");ie.exports=function(n,t,i){var a=n.cd,r=a[0].trace,g=n.xa,s=n.ya,b=n.subplot,x=b.projection.isLonLatOverEdges,S=b.project;if(_.getClosest(a,function p(f){var u=f.lonlat;if(u[0]===k||x(u))return 1/0;var h=S(u),o=S([t,i]),C=Math.abs(h[0]-o[0]),R=Math.abs(h[1]-o[1]),z=Math.max(3,f.mrc||0);return Math.max(Math.sqrt(C*C+R*R)-z,1-3/z)},n),!1!==n.index){var w=a[n.index],l=w.lonlat,y=[g.c2p(l),s.c2p(l)],A=w.mrc||1;n.x0=y[0]-A,n.x1=y[0]+A,n.y0=y[1]-A,n.y1=y[1]+A,n.loc=w.loc,n.lon=l[0],n.lat=l[1];var T={};T[r.geo]={_subplot:b};var M=r._module.formatLabels(w,r,T);return n.lonLabel=M.lonLabel,n.latLabel=M.latLabel,n.color=m(r,w),n.extraText=function c(d,n,t,i){if(!d.hovertemplate){var a=n.hi||d.hoverinfo,r="all"===a?e.hoverinfo.flags:a.split("+"),g=-1!==r.indexOf("location")&&Array.isArray(d.locations),s=-1!==r.indexOf("lon"),b=-1!==r.indexOf("lat"),x=-1!==r.indexOf("text"),S=[];return g?S.push(n.loc):s&&b?S.push("("+p(t.latLabel)+", "+p(t.lonLabel)+")"):s?S.push(i.lon+p(t.lonLabel)):b&&S.push(i.lat+p(t.latLabel)),x&&E(n,d,S),S.join("<br>")}function p(w){return w+"\xb0"}}(r,w,n,a[0].t.labels),n.hovertemplate=r.hovertemplate,[n]}}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":937,"./attributes":969}],975:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),calcGeoJSON:v("./plot").calcGeoJSON,plot:v("./plot").plot,style:v("./style"),styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover"),eventData:v("./event_data"),selectPoints:v("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:v("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":589,"../scatter/marker_colorbar":945,"../scatter/style":951,"./attributes":969,"./calc":970,"./defaults":971,"./event_data":972,"./format_labels":973,"./hover":974,"./plot":976,"./select":977,"./style":978}],976:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../lib"),m=v("../../lib/topojson_utils").getTopojsonFeatures,E=v("../../lib/geojson_utils"),e=v("../../lib/geo_location_utils"),c=v("../../plots/cartesian/autorange").findExtremes,d=v("../../constants/numerical").BADNUM,n=v("../scatter/calc").calcMarkerSize,t=v("../scatter/subtypes"),i=v("./style");ie.exports={calcGeoJSON:function r(g,s){var w,l,b=g[0].trace,x=s[b.geo],S=x._subplot,p=b._length;if(Array.isArray(b.locations)){var y=b.locationmode,A="geojson-id"===y?e.extractTraceFeature(g):m(b,S.topojson);for(w=0;w<p;w++){l=g[w];var T="geojson-id"===y?l.fOut:e.locationToFeature(y,l.loc,A);l.lonlat=T?T.properties.ct:[d,d]}}var f,u,M={padded:!0};if("geojson"===x.fitbounds&&"geojson-id"===b.locationmode){var h=e.computeBbox(e.getTraceGeojson(b));f=[h[0],h[2]],u=[h[1],h[3]]}else{for(f=new Array(p),u=new Array(p),w=0;w<p;w++)f[w]=(l=g[w]).lonlat[0],u[w]=l.lonlat[1];M.ppad=n(b,p)}b._extremes.lon=c(x.lonaxis._ax,f,M),b._extremes.lat=c(x.lataxis._ax,u,M)},plot:function a(g,s,b){var x=s.layers.frontplot.select(".scatterlayer"),S=k.makeTraceGroups(x,b,"trace scattergeo");function p(w,l){w.lonlat[0]===d&&_.select(l).remove()}S.selectAll("*").remove(),S.each(function(w){var l=_.select(this),y=w[0].trace;if(t.hasLines(y)||"none"!==y.fill){var A=E.calcTraceToLineCoords(w),T="none"!==y.fill?E.makePolygon(A):E.makeLine(A);l.selectAll("path.js-line").data([{geojson:T,trace:y}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}t.hasMarkers(y)&&l.selectAll("path.point").data(k.identity).enter().append("path").classed("point",!0).each(function(M){p(M,this)}),t.hasText(y)&&l.selectAll("g").data(k.identity).enter().append("g").append("text").each(function(M){p(M,this)}),i(g,w)})}}},{"../../constants/numerical":479,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"../scatter/calc":928,"../scatter/subtypes":952,"./style":978,"@plotly/d3":58}],977:[function(v,ie,ae){"use strict";var _=v("../scatter/subtypes"),k=v("../../constants/numerical").BADNUM;ie.exports=function(E,e){var a,r,g,s,b,c=E.cd,d=E.xaxis,n=E.yaxis,t=[],i=c[0].trace;if(!_.hasMarkers(i)&&!_.hasText(i))return[];if(!1===e)for(b=0;b<c.length;b++)c[b].selected=0;else for(b=0;b<c.length;b++)(r=(a=c[b]).lonlat)[0]!==k&&(g=d.c2p(r),s=n.c2p(r),e.contains([g,s],null,b,E)?(t.push({pointNumber:b,lon:r[0],lat:r[1]}),a.selected=1):a.selected=0);return t}},{"../../constants/numerical":479,"../scatter/subtypes":952}],978:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../components/drawing"),m=v("../../components/color"),E=v("../scatter/style"),e=E.stylePoints,c=E.styleText;ie.exports=function(t,i){i&&function d(n,t){var i=t[0].trace,a=t[0].node3;a.style("opacity",t[0].trace.opacity),e(a,i,n),c(a,i,n),a.selectAll("path.js-line").style("fill","none").each(function(r){var g=_.select(this),s=r.trace,b=s.line||{};g.call(m.stroke,b.color).call(k.dashLine,b.dash||"",b.width||0),"none"!==s.fill&&g.call(m.fill,s.fillcolor)})}(t,i)}},{"../../components/color":366,"../../components/drawing":388,"../scatter/style":951,"@plotly/d3":58}],979:[function(v,ie,ae){"use strict";var _=v("../../plots/attributes"),k=v("../scatter/attributes"),m=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,E=v("../../components/colorscale/attributes"),e=v("../../lib/sort_object_keys"),c=v("../../lib/extend").extendFlat,d=v("../../plot_api/edit_types").overrideAll,n=v("./constants").DASHES,t=k.line,i=k.marker,a=i.line,r=ie.exports=d({x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:m("x"),yhoverformat:m("y"),text:k.text,hovertext:k.hovertext,textposition:k.textposition,textfont:k.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:t.color,width:t.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(n),dflt:"solid"}},marker:c({},E("marker"),{symbol:i.symbol,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:i.opacity,colorbar:i.colorbar,line:c({},E("marker.line"),{width:a.width})}),connectgaps:k.connectgaps,fill:c({},k.fill,{dflt:"none"}),fillcolor:k.fillcolor,selected:{marker:k.selected.marker,textfont:k.selected.textfont},unselected:{marker:k.unselected.marker,textfont:k.unselected.textfont},opacity:_.opacity},"calc","nested");r.x.editType=r.y.editType=r.x0.editType=r.y0.editType="calc+clearAxisTypes",r.hovertemplate=k.hovertemplate,r.texttemplate=k.texttemplate},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":927,"./constants":982}],980:[function(v,ie,ae){"use strict";var _=v("./hover");ie.exports={moduleType:"trace",name:"scattergl",basePlotModule:v("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("../scatter/cross_trace_defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),hoverPoints:_.hoverPoints,selectPoints:v("./select"),meta:{}}},{"../../plots/cartesian":568,"../scatter/cross_trace_defaults":933,"../scatter/marker_colorbar":945,"./attributes":979,"./calc":981,"./defaults":984,"./format_labels":986,"./hover":988,"./select":992}],981:[function(v,ie,ae){"use strict";var _=v("@plotly/point-cluster"),k=v("../../lib"),m=v("../../plots/cartesian/axis_ids"),E=v("../../plots/cartesian/autorange").findExtremes,e=v("../../plots/cartesian/align_period"),c=v("../scatter/calc"),d=c.calcMarkerSize,n=c.calcAxisExpansion,t=c.setFirstScatter,i=v("../scatter/colorscale_calc"),a=v("./convert"),r=v("./scene_update"),g=v("../../constants/numerical").BADNUM,s=v("./constants").TOO_MANY_POINTS;function b(S,p,w){var l=S._extremes[p._id],y=E(p,w._bnds,{padded:!0});l.min=l.min.concat(y.min),l.max=l.max.concat(y.max)}ie.exports=function(p,w){var o,l=p._fullLayout,y=m.getFromId(p,w.xaxis),A=m.getFromId(p,w.yaxis),T=l._plots[w.xaxis+w.yaxis],M=w._length,f=M>=s,u=2*M,h={},C=y.makeCalcdata(w,"x"),R=A.makeCalcdata(w,"y"),z=e(w,y,"x",C),O=e(w,A,"y",R),I=z.vals,F=O.vals;w._x=I,w._y=F,w.xperiodalignment&&(w._origX=C,w._xStarts=z.starts,w._xEnds=z.ends),w.yperiodalignment&&(w._origY=R,w._yStarts=O.starts,w._yEnds=O.ends);var D=new Array(u),N=new Array(M);for(o=0;o<M;o++)D[2*o]=I[o]===g?NaN:I[o],D[2*o+1]=F[o]===g?NaN:F[o],N[o]=o;if("log"===y.type)for(o=0;o<u;o+=2)D[o]=y.c2l(D[o]);if("log"===A.type)for(o=1;o<u;o+=2)D[o]=A.c2l(D[o]);f&&"log"!==y.type&&"log"!==A.type?h.tree=_(D):h.ids=N,i(p,w);var oe,U=function x(S,p,w,l,y,A){var T=a.style(S,w);if(T.marker&&(T.marker.positions=l),T.line&&l.length>1&&k.extendFlat(T.line,a.linePositions(S,w,l)),T.errorX||T.errorY){var M=a.errorBarPositions(S,w,l,y,A);T.errorX&&k.extendFlat(T.errorX,M.x),T.errorY&&k.extendFlat(T.errorY,M.y)}return T.text&&(k.extendFlat(T.text,{positions:l},a.textPosition(S,w,T.text,T.marker)),k.extendFlat(T.textSel,{positions:l},a.textPosition(S,w,T.text,T.markerSel)),k.extendFlat(T.textUnsel,{positions:l},a.textPosition(S,w,T.text,T.markerUnsel))),T}(p,0,w,D,I,F),X=r(p,T);return t(l,w),f?U.marker&&(oe=U.marker.sizeAvg||Math.max(U.marker.size,3)):oe=d(w,M),n(p,w,y,A,I,F,oe),U.errorX&&b(w,y,U.errorX),U.errorY&&b(w,A,U.errorY),U.fill&&!X.fill2d&&(X.fill2d=!0),U.marker&&!X.scatter2d&&(X.scatter2d=!0),U.line&&!X.line2d&&(X.line2d=!0),(U.errorX||U.errorY)&&!X.error2d&&(X.error2d=!0),U.text&&!X.glText&&(X.glText=!0),U.marker&&(U.marker.snap=M),X.lineOptions.push(U.line),X.errorXOptions.push(U.errorX),X.errorYOptions.push(U.errorY),X.fillOptions.push(U.fill),X.markerOptions.push(U.marker),X.markerSelectedOptions.push(U.markerSel),X.markerUnselectedOptions.push(U.markerUnsel),X.textOptions.push(U.text),X.textSelectedOptions.push(U.textSel),X.textUnselectedOptions.push(U.textUnsel),X.selectBatch.push([]),X.unselectBatch.push([]),h._scene=X,h.index=X.count,h.x=I,h.y=F,h.positions=D,X.count++,[{x:!1,y:!1,t:h,trace:w}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"../scatter/calc":928,"../scatter/colorscale_calc":930,"./constants":982,"./convert":983,"./scene_update":991,"@plotly/point-cluster":59}],982:[function(v,ie,ae){"use strict";ie.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],983:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("svg-path-sdf"),m=v("color-normalize"),E=v("../../registry"),e=v("../../lib"),c=v("../../components/drawing"),d=v("../../plots/cartesian/axis_ids"),n=v("../../lib/gl_format_color").formatColor,t=v("../scatter/subtypes"),i=v("../scatter/make_bubble_size_func"),a=v("./helpers"),r=v("./constants"),g=v("../../constants/interactions").DESELECTDIM,s={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},b=v("../../components/fx/helpers").appendArrayPointValue;function S(z,O){var W,I=z._fullLayout,F=O._length,D=O.textfont,N=O.textposition,U=Array.isArray(N)?N:[N],X=D.color,oe=D.size,se=D.family,ne={},G=z._context.plotGlPixelRatio,$=O.texttemplate;if($){ne.text=[];var V=I._d3locale,H=Array.isArray($),q=H?Math.min($.length,F):F,K=H?function(ge){return $[ge]}:function(){return $};for(W=0;W<q;W++){var Y={i:W},te=O._module.formatLabels(Y,O,I),J={};b(J,O,W);var j=O._meta||{};ne.text.push(e.texttemplateString(K(W),te,V,J,Y,j))}}else ne.text=Array.isArray(O.text)&&O.text.length<F?O.text.slice():O.text;if(Array.isArray(ne.text))for(W=ne.text.length;W<F;W++)ne.text[W]="";for(ne.opacity=O.opacity,ne.font={},ne.align=[],ne.baseline=[],W=0;W<U.length;W++){var re=U[W].split(/\s+/);switch(re[1]){case"left":ne.align.push("right");break;case"right":ne.align.push("left");break;default:ne.align.push(re[1])}switch(re[0]){case"top":ne.baseline.push("bottom");break;case"bottom":ne.baseline.push("top");break;default:ne.baseline.push(re[0])}}if(Array.isArray(X))for(ne.color=new Array(F),W=0;W<F;W++)ne.color[W]=X[W];else ne.color=X;if(e.isArrayOrTypedArray(oe)||Array.isArray(se))for(ne.font=new Array(F),W=0;W<F;W++){var le=ne.font[W]={};le.size=(e.isTypedArray(oe)?oe[W]:Array.isArray(oe)?_(oe[W])?oe[W]:0:oe)*G,le.family=Array.isArray(se)?se[W]:se}else ne.font={size:oe*G,family:se};return ne}function p(z){var D,W,O=z._length,I=z.marker,F={},N=e.isArrayOrTypedArray(I.symbol),U=e.isArrayOrTypedArray(I.color),X=e.isArrayOrTypedArray(I.line.color),oe=e.isArrayOrTypedArray(I.opacity),se=e.isArrayOrTypedArray(I.size),ne=e.isArrayOrTypedArray(I.line.width);if(N||(W=a.isOpenSymbol(I.symbol)),N||U||X||oe){F.colors=new Array(O),F.borderColors=new Array(O);var G=n(I,I.opacity,O),$=n(I.line,I.opacity,O);if(!Array.isArray($[0])){var V=$;for($=Array(O),D=0;D<O;D++)$[D]=V}if(!Array.isArray(G[0])){var H=G;for(G=Array(O),D=0;D<O;D++)G[D]=H}for(F.colors=G,F.borderColors=$,D=0;D<O;D++)N&&(W=a.isOpenSymbol(I.symbol[D])),W&&($[D]=G[D].slice(),G[D]=G[D].slice(),G[D][3]=0);F.opacity=z.opacity}else W?(F.color=m(I.color,"uint8"),F.color[3]=0,F.borderColor=m(I.color,"uint8")):(F.color=m(I.color,"uint8"),F.borderColor=m(I.line.color,"uint8")),F.opacity=z.opacity*I.opacity;if(N)for(F.markers=new Array(O),D=0;D<O;D++)F.markers[D]=h(I.symbol[D]);else F.marker=h(I.symbol);var te,Y=i(z,1);if(se||ne){var le,J=F.sizes=new Array(O),j=F.borderSizes=new Array(O),re=0;if(se){for(D=0;D<O;D++)J[D]=Y(I.size[D]),re+=J[D];le=re/O}else for(te=Y(I.size),D=0;D<O;D++)J[D]=te;if(ne)for(D=0;D<O;D++)j[D]=I.line.width[D];else for(te=I.line.width,D=0;D<O;D++)j[D]=te;F.sizeAvg=le}else F.size=Y(I&&I.size||10),F.borderSizes=Y(I.line.width);return F}function w(z,O){var F={};return O&&(O.marker&&O.marker.symbol?F=p(e.extendFlat({},z.marker,O.marker)):O.marker&&(O.marker.size&&(F.size=O.marker.size),O.marker.color&&(F.colors=O.marker.color),void 0!==O.marker.opacity&&(F.opacity=O.marker.opacity))),F}function l(z,O,I){var F={};if(!I)return F;if(I.textfont){var D={opacity:1,text:O.text,texttemplate:O.texttemplate,textposition:O.textposition,textfont:e.extendFlat({},O.textfont)};I.textfont&&e.extendFlat(D.textfont,I.textfont),F=S(z,D)}return F}function y(z,O,I){var F={capSize:2*O.width*I,lineWidth:O.thickness*I,color:O.color};return O.copy_ystyle&&(F=z.error_y),F}var A=r.SYMBOL_SDF_SIZE,T=r.SYMBOL_SIZE,M=r.SYMBOL_STROKE,f={},u=c.symbolFuncs[0](.05*T);function h(z){if("circle"===z)return null;var O,I,F=c.symbolNumber(z),D=c.symbolFuncs[F%100],N=!!c.symbolNoDot[F%100],U=!!c.symbolNoFill[F%100],X=a.isDotSymbol(z);return f[z]?f[z]:(O=X&&!N?D(1.1*T)+u:D(T),I=k(O,{w:A,h:A,viewBox:[-T,-T,T,T],stroke:U?M:-M}),f[z]=I,I||null)}ie.exports={style:function x(z,O){var I,F={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},D=z._context.plotGlPixelRatio;if(!0!==O.visible)return F;if(t.hasText(O)&&(F.text=S(z,O),F.textSel=l(z,O,O.selected),F.textUnsel=l(z,O,O.unselected)),t.hasMarkers(O)&&(F.marker=p(O),F.markerSel=w(O,O.selected),F.markerUnsel=w(O,O.unselected),!O.unselected&&e.isArrayOrTypedArray(O.marker.opacity))){var N=O.marker.opacity;for(F.markerUnsel.opacity=new Array(N.length),I=0;I<N.length;I++)F.markerUnsel.opacity[I]=g*N[I]}if(t.hasLines(O)){F.line={overlay:!0,thickness:O.line.width*D,color:O.line.color,opacity:O.opacity};var U=(r.DASHES[O.line.dash]||[1]).slice();for(I=0;I<U.length;++I)U[I]*=O.line.width*D;F.line.dashes=U}return O.error_x&&O.error_x.visible&&(F.errorX=y(O,O.error_x,D)),O.error_y&&O.error_y.visible&&(F.errorY=y(O,O.error_y,D)),!!O.fill&&"none"!==O.fill&&(F.fill={closed:!0,fill:O.fillcolor,thickness:0}),F},markerStyle:p,markerSelection:w,linePositions:function o(z,O,I){var N,U,F=I.length,D=F/2;if(t.hasLines(O)&&D)if("hv"===O.line.shape){for(N=[],U=0;U<D-1;U++)isNaN(I[2*U])||isNaN(I[2*U+1])?N.push(NaN,NaN,NaN,NaN):(N.push(I[2*U],I[2*U+1]),isNaN(I[2*U+2])||isNaN(I[2*U+3])?N.push(NaN,NaN):N.push(I[2*U+2],I[2*U+1]));N.push(I[F-2],I[F-1])}else if("hvh"===O.line.shape){for(N=[],U=0;U<D-1;U++)if(isNaN(I[2*U])||isNaN(I[2*U+1])||isNaN(I[2*U+2])||isNaN(I[2*U+3]))isNaN(I[2*U])||isNaN(I[2*U+1])?N.push(NaN,NaN):N.push(I[2*U],I[2*U+1]),N.push(NaN,NaN);else{var X=(I[2*U]+I[2*U+2])/2;N.push(I[2*U],I[2*U+1],X,I[2*U+1],X,I[2*U+3])}N.push(I[F-2],I[F-1])}else if("vhv"===O.line.shape){for(N=[],U=0;U<D-1;U++)if(isNaN(I[2*U])||isNaN(I[2*U+1])||isNaN(I[2*U+2])||isNaN(I[2*U+3]))isNaN(I[2*U])||isNaN(I[2*U+1])?N.push(NaN,NaN):N.push(I[2*U],I[2*U+1]),N.push(NaN,NaN);else{var oe=(I[2*U+1]+I[2*U+3])/2;N.push(I[2*U],I[2*U+1],I[2*U],oe,I[2*U+2],oe)}N.push(I[F-2],I[F-1])}else if("vh"===O.line.shape){for(N=[],U=0;U<D-1;U++)isNaN(I[2*U])||isNaN(I[2*U+1])?N.push(NaN,NaN,NaN,NaN):(N.push(I[2*U],I[2*U+1]),isNaN(I[2*U+2])||isNaN(I[2*U+3])?N.push(NaN,NaN):N.push(I[2*U],I[2*U+3]));N.push(I[F-2],I[F-1])}else N=I;var se=!1;for(U=0;U<N.length;U++)if(isNaN(N[U])){se=!0;break}var ne=se||N.length>r.TOO_MANY_POINTS||t.hasMarkers(O)?"rect":"round";if(se&&O.connectgaps){var W=N[0],G=N[1];for(U=0;U<N.length;U+=2)isNaN(N[U])||isNaN(N[U+1])?(N[U]=W,N[U+1]=G):(W=N[U],G=N[U+1])}return{join:ne,positions:N}},errorBarPositions:function C(z,O,I,F,D){var N=E.getComponentMethod("errorbars","makeComputeError"),U=d.getFromId(z,O.xaxis),X=d.getFromId(z,O.yaxis),oe=I.length/2,se={};function ne(W,G){var $=G._id.charAt(0),V=O["error_"+$];if(V&&V.visible&&("linear"===G.type||"log"===G.type)){for(var H=N(V),q={x:0,y:1}[$],K={x:[0,1,2,3],y:[2,3,0,1]}[$],Y=new Float64Array(4*oe),te=1/0,J=-1/0,j=0,re=0;j<oe;j++,re+=4){var le=W[j];if(_(le)){var ge=I[2*j+q],pe=H(le,j),xe=pe[0],ke=pe[1];if(_(xe)&&_(ke)){var de=le+ke;Y[re+K[0]]=ge-G.c2l(le-xe),Y[re+K[1]]=G.c2l(de)-ge,Y[re+K[2]]=0,Y[re+K[3]]=0,te=Math.min(te,le-xe),J=Math.max(J,le+ke)}}}se[$]={positions:I,errors:Y,_bnds:[te,J]}}}return ne(F,U),ne(D,X),se},textPosition:function R(z,O,I,F){var U,D=O._length,N={};if(t.hasMarkers(O)){var X=I.font,oe=I.align,se=I.baseline;for(N.offset=new Array(D),U=0;U<D;U++){var ne=F.sizes?F.sizes[U]:F.size,W=Array.isArray(X)?X[U].size:X.size,G=Array.isArray(oe)?oe.length>1?oe[U]:oe[0]:oe,$=Array.isArray(se)?se.length>1?se[U]:se[0]:se,H=s[$],q=ne?ne/.8+1:0;N.offset[U]=[s[G]*q/W,(-H*q-.5*H)/W]}}return N}}},{"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/interactions":478,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../scatter/make_bubble_size_func":944,"../scatter/subtypes":952,"./constants":982,"./helpers":987,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":310}],984:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../registry"),m=v("./helpers"),E=v("./attributes"),e=v("../scatter/constants"),c=v("../scatter/subtypes"),d=v("../scatter/xy_defaults"),n=v("../scatter/period_defaults"),t=v("../scatter/marker_defaults"),i=v("../scatter/line_defaults"),a=v("../scatter/fillcolor_defaults"),r=v("../scatter/text_defaults");ie.exports=function(s,b,x,S){function p(u,h){return _.coerce(s,b,E,u,h)}var w=!!s.marker&&m.isOpenSymbol(s.marker.symbol),l=c.isBubble(s),y=d(s,b,S,p);if(y){n(s,b,S,p),p("xhoverformat"),p("yhoverformat");var A=y<e.PTS_LINESONLY?"lines+markers":"lines";p("text"),p("hovertext"),p("hovertemplate"),p("mode",A),c.hasLines(b)&&(p("connectgaps"),i(s,b,x,S,p),p("line.shape")),c.hasMarkers(b)&&(t(s,b,x,S,p),p("marker.line.width",w||l?1:0)),c.hasText(b)&&(p("texttemplate"),r(s,b,S,p));var T=(b.line||{}).color,M=(b.marker||{}).color;p("fill"),"none"!==b.fill&&a(s,b,x,p);var f=k.getComponentMethod("errorbars","supplyDefaults");f(s,b,T||M||x,{axis:"y"}),f(s,b,T||M||x,{axis:"x",inherit:"y"}),_.coerceSelectionMarkerOpacity(b,p)}else b.visible=!1}},{"../../lib":503,"../../registry":638,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/period_defaults":947,"../scatter/subtypes":952,"../scatter/text_defaults":953,"../scatter/xy_defaults":954,"./attributes":979,"./helpers":987}],985:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../components/color"),m=v("../../constants/interactions").DESELECTDIM;ie.exports={styleTextSelection:function E(e){var S,p,c=e[0],d=c.trace,n=c.t,t=n._scene,i=n.index,a=t.selectBatch[i],r=t.unselectBatch[i],g=t.textOptions[i],s=t.textSelectedOptions[i]||{},b=t.textUnselectedOptions[i]||{},x=_.extendFlat({},g);if(a.length||r.length){var w=s.color,l=b.color,y=g.color,A=Array.isArray(y);for(x.color=new Array(d._length),S=0;S<a.length;S++)x.color[p=a[S]]=w||(A?y[p]:y);for(S=0;S<r.length;S++){p=r[S];var T=A?y[p]:y;x.color[p]=l||(w?T:k.addOpacity(T,m))}}t.glText[i].update(x)}}},{"../../components/color":366,"../../constants/interactions":478,"../../lib":503}],986:[function(v,ie,ae){"use strict";var _=v("../scatter/format_labels");ie.exports=function(m,E,e){var c=m.i;return"x"in m||(m.x=E._x[c]),"y"in m||(m.y=E._y[c]),_(m,E,e)}},{"../scatter/format_labels":936}],987:[function(v,ie,ae){"use strict";var _=v("./constants");ae.isOpenSymbol=function(k){return"string"==typeof k?_.OPEN_RE.test(k):k%200>100},ae.isDotSymbol=function(k){return"string"==typeof k?_.DOT_RE.test(k):k>200}},{"./constants":982}],988:[function(v,ie,ae){"use strict";var _=v("../../registry"),k=v("../../lib"),m=v("../scatter/get_trace_color");function e(c,d,n,t){var i=c.xa,a=c.ya,r=c.distance,g=c.dxy,s=c.index,b={pointNumber:s,x:d[s],y:n[s]};b.tx=Array.isArray(t.text)?t.text[s]:t.text,b.htx=Array.isArray(t.hovertext)?t.hovertext[s]:t.hovertext,b.data=Array.isArray(t.customdata)?t.customdata[s]:t.customdata,b.tp=Array.isArray(t.textposition)?t.textposition[s]:t.textposition;var x=t.textfont;x&&(b.ts=k.isArrayOrTypedArray(x.size)?x.size[s]:x.size,b.tc=Array.isArray(x.color)?x.color[s]:x.color,b.tf=Array.isArray(x.family)?x.family[s]:x.family);var S=t.marker;S&&(b.ms=k.isArrayOrTypedArray(S.size)?S.size[s]:S.size,b.mo=k.isArrayOrTypedArray(S.opacity)?S.opacity[s]:S.opacity,b.mx=k.isArrayOrTypedArray(S.symbol)?S.symbol[s]:S.symbol,b.mc=k.isArrayOrTypedArray(S.color)?S.color[s]:S.color);var p=S&&S.line;p&&(b.mlc=Array.isArray(p.color)?p.color[s]:p.color,b.mlw=k.isArrayOrTypedArray(p.width)?p.width[s]:p.width);var w=S&&S.gradient;w&&"none"!==w.type&&(b.mgt=Array.isArray(w.type)?w.type[s]:w.type,b.mgc=Array.isArray(w.color)?w.color[s]:w.color);var l=i.c2p(b.x,!0),y=a.c2p(b.y,!0),A=b.mrc||1,T=t.hoverlabel;T&&(b.hbg=Array.isArray(T.bgcolor)?T.bgcolor[s]:T.bgcolor,b.hbc=Array.isArray(T.bordercolor)?T.bordercolor[s]:T.bordercolor,b.hts=k.isArrayOrTypedArray(T.font.size)?T.font.size[s]:T.font.size,b.htc=Array.isArray(T.font.color)?T.font.color[s]:T.font.color,b.htf=Array.isArray(T.font.family)?T.font.family[s]:T.font.family,b.hnl=k.isArrayOrTypedArray(T.namelength)?T.namelength[s]:T.namelength);var M=t.hoverinfo;M&&(b.hi=Array.isArray(M)?M[s]:M);var f=t.hovertemplate;f&&(b.ht=Array.isArray(f)?f[s]:f);var u={};u[c.index]=b;var h=t._origX,o=t._origY,C=k.extendFlat({},c,{color:m(t,b),x0:l-A,x1:l+A,xLabelVal:h?h[s]:b.x,y0:y-A,y1:y+A,yLabelVal:o?o[s]:b.y,cd:u,distance:r,spikeDistance:g,hovertemplate:b.ht});return b.htx?C.text=b.htx:b.tx?C.text=b.tx:t.text&&(C.text=t.text),k.fillText(b,t,C),_.getComponentMethod("errorbars","hoverInfo")(b,t,C),C}ie.exports={hoverPoints:function E(c,d,n,t){var l,i=c.cd,a=i[0].t,r=i[0].trace,g=c.xa,s=c.ya,b=a.x,x=a.y,S=g.c2p(d),p=s.c2p(n),w=c.distance;if(a.tree){var y=g.p2c(S-w),A=g.p2c(S+w),T=s.p2c(p-w),M=s.p2c(p+w);l="x"===t?a.tree.range(Math.min(y,A),Math.min(s._rl[0],s._rl[1]),Math.max(y,A),Math.max(s._rl[0],s._rl[1])):a.tree.range(Math.min(y,A),Math.min(T,M),Math.max(y,A),Math.max(T,M))}else l=a.ids;var f,u,h,o,C,R,z,O,I,F=w;if("x"===t){var D=!!r.xperiodalignment,N=!!r.yperiodalignment;for(C=0;C<l.length;C++){if(h=b[f=l[C]],R=Math.abs(g.c2p(h)-S),D){var U=g.c2p(r._xStarts[f]),X=g.c2p(r._xEnds[f]);R=S>=Math.min(U,X)&&S<=Math.max(U,X)?0:1/0}if(R<F){if(F=R,z=s.c2p(o=x[f])-p,N){var oe=s.c2p(r._yStarts[f]),se=s.c2p(r._yEnds[f]);z=p>=Math.min(oe,se)&&p<=Math.max(oe,se)?0:1/0}I=Math.sqrt(R*R+z*z),u=l[C]}}}else for(C=l.length-1;C>-1;C--)o=x[f=l[C]],R=g.c2p(h=b[f])-S,z=s.c2p(o)-p,(O=Math.sqrt(R*R+z*z))<F&&(F=I=O,u=f);return c.index=u,c.distance=F,c.dxy=I,void 0===u?[c]:[e(c,b,x,r)]},calcHover:e}},{"../../lib":503,"../../registry":638,"../scatter/get_trace_color":937}],989:[function(v,ie,ae){arguments[4][896][0].apply(ae,arguments)},{"./base_index":980,"./plot":990,dup:896}],990:[function(v,ie,g){"use strict";var _=v("regl-scatter2d"),k=v("regl-line2d"),m=v("regl-error2d"),E=v("gl-text"),e=v("../../lib"),c=v("../../components/dragelement/helpers").selectMode,d=v("../../lib/prepare_regl"),n=v("../scatter/subtypes"),t=v("../scatter/link_traces"),i=v("./edit_style").styleTextSelection,a={};function r(s,b,x,S){var p=s._size,f=p.w*S,u=p.h*S;return[p.l*S+b.domain[0]*f,p.b*S+x.domain[0]*u,s.width*S-p.r*S-(1-b.domain[1])*f,s.height*S-p.t*S-(1-x.domain[1])*u]}(ie.exports=function(b,x,S){if(S.length){var A,T,p=b._fullLayout,w=x._scene,l=x.xaxis,y=x.yaxis;if(w){if(!d(b,["ANGLE_instanced_arrays","OES_element_index_uint"],a))return void w.init();var f=w.count,u=p._glcanvas.data()[0].regl;if(t(b,x,S),w.dirty){if(!0===w.error2d&&(w.error2d=m(u)),!0===w.line2d&&(w.line2d=k(u)),!0===w.scatter2d&&(w.scatter2d=_(u)),!0===w.fill2d&&(w.fill2d=k(u)),!0===w.glText)for(w.glText=new Array(f),A=0;A<f;A++)w.glText[A]=new E(u);if(w.glText){if(f>w.glText.length){var h=f-w.glText.length;for(A=0;A<h;A++)w.glText.push(new E(u))}else f<w.glText.length&&w.glText.splice(f,w.glText.length-f).forEach(function(Y){Y.destroy()});for(A=0;A<f;A++)w.glText[A].update(w.textOptions[A])}if(w.line2d&&(w.line2d.update(w.lineOptions),w.lineOptions=w.lineOptions.map(function(Y){if(Y&&Y.positions){for(var te=Y.positions,J=0;J<te.length&&(isNaN(te[J])||isNaN(te[J+1]));)J+=2;for(var j=te.length-2;j>J&&(isNaN(te[j])||isNaN(te[j+1]));)j-=2;Y.positions=te.slice(J,j+2)}return Y}),w.line2d.update(w.lineOptions)),w.error2d){var R=(w.errorXOptions||[]).concat(w.errorYOptions||[]);w.error2d.update(R)}w.scatter2d&&w.scatter2d.update(w.markerOptions),w.fillOrder=e.repeat(null,f),w.fill2d&&(w.fillOptions=w.fillOptions.map(function(Y,te){var J=S[te];if(Y&&J&&J[0]&&J[0].trace){var pe,xe,j=J[0],re=j.trace,le=j.t,ge=w.lineOptions[te],ke=[];re._ownfill&&ke.push(te),re._nexttrace&&ke.push(te+1),ke.length&&(w.fillOrder[te]=ke);var be,Le,we=[],de=ge&&ge.positions||le.positions;if("tozeroy"===re.fill){for(be=0;be<de.length&&isNaN(de[be+1]);)be+=2;for(Le=de.length-2;Le>be&&isNaN(de[Le+1]);)Le-=2;0!==de[be+1]&&(we=[de[be],0]),we=we.concat(de.slice(be,Le+2)),0!==de[Le+1]&&(we=we.concat([de[Le],0]))}else if("tozerox"===re.fill){for(be=0;be<de.length&&isNaN(de[be]);)be+=2;for(Le=de.length-2;Le>be&&isNaN(de[Le]);)Le-=2;0!==de[be]&&(we=[0,de[be+1]]),we=we.concat(de.slice(be,Le+2)),0!==de[Le]&&(we=we.concat([0,de[Le+1]]))}else if("toself"===re.fill||"tonext"===re.fill){for(we=[],pe=0,Y.splitNull=!0,xe=0;xe<de.length;xe+=2)(isNaN(de[xe])||isNaN(de[xe+1]))&&((we=we.concat(de.slice(pe,xe))).push(de[pe],de[pe+1]),we.push(null,null),pe=xe+2);we=we.concat(de.slice(pe)),pe&&we.push(de[pe],de[pe+1])}else{var De=re._nexttrace;if(De){var ye=w.lineOptions[te+1];if(ye){var Ce=ye.positions;if("tonexty"===re.fill){for(we=de.slice(),te=Math.floor(Ce.length/2);te--;){var Fe=Ce[2*te],Ke=Ce[2*te+1];isNaN(Fe)||isNaN(Ke)||we.push(Fe,Ke)}Y.fill=De.fillcolor}}}}if(re._prevtrace&&"tonext"===re._prevtrace.fill){var Ue=w.lineOptions[te-1].positions,Be=we.length/2,Ie=[pe=Be];for(xe=0;xe<Ue.length;xe+=2)(isNaN(Ue[xe])||isNaN(Ue[xe+1]))&&(Ie.push(xe/2+Be+1),pe=xe+2);we=we.concat(Ue),Y.hole=Ie}return Y.fillmode=re.fill,Y.opacity=re.opacity,Y.positions=we,Y}}),w.fill2d.update(w.fillOptions))}var O=c(p.dragmode),I=p.clickmode.indexOf("select")>-1;for(A=0;A<f;A++){var F=S[A][0],D=F.trace,N=F.t,U=N.index,X=D._length,oe=N.x,se=N.y;if(D.selectedpoints||O||I){if(O||(O=!0),D.selectedpoints){var ne=w.selectBatch[U]=e.selIndices2selPoints(D),W={};for(T=0;T<ne.length;T++)W[ne[T]]=1;var G=[];for(T=0;T<X;T++)W[T]||G.push(T);w.unselectBatch[U]=G}var $=N.xpx=new Array(X),V=N.ypx=new Array(X);for(T=0;T<X;T++)$[T]=l.c2p(oe[T]),V[T]=y.c2p(se[T])}else N.xpx=N.ypx=null}if(O){if(w.select2d||(w.select2d=_(p._glcanvas.data()[1].regl)),w.scatter2d){var H=new Array(f);for(A=0;A<f;A++)H[A]=w.selectBatch[A].length||w.unselectBatch[A].length?w.markerUnselectedOptions[A]:{};w.scatter2d.update(H)}w.select2d&&(w.select2d.update(w.markerOptions),w.select2d.update(w.markerSelectedOptions)),w.glText&&S.forEach(function(Y){n.hasText(((Y||[])[0]||{}).trace||{})&&i(Y)})}else w.scatter2d&&w.scatter2d.update(w.markerOptions);var q={viewport:r(p,l,y,b._context.plotGlPixelRatio),range:[(l._rl||l.range)[0],(y._rl||y.range)[0],(l._rl||l.range)[1],(y._rl||y.range)[1]]},K=e.repeat(q,w.count);w.fill2d&&w.fill2d.update(K),w.line2d&&w.line2d.update(K),w.error2d&&w.error2d.update(K.concat(K)),w.scatter2d&&w.scatter2d.update(K),w.select2d&&w.select2d.update(K),w.glText&&w.glText.forEach(function(Y){Y.update(q)})}}}).reglPrecompiled=a},{"../../components/dragelement/helpers":384,"../../lib":503,"../../lib/prepare_regl":516,"../scatter/link_traces":943,"../scatter/subtypes":952,"./edit_style":985,"gl-text":225,"regl-error2d":279,"regl-line2d":280,"regl-scatter2d":281}],991:[function(v,ie,ae){"use strict";var _=v("../../lib");ie.exports=function(m,E){var e=E._scene,c={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},d={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return E._scene||((e=E._scene={}).init=function(){_.extendFlat(e,d,c)},e.init(),e.update=function(t){var i=_.repeat(t,e.count);if(e.fill2d&&e.fill2d.update(i),e.scatter2d&&e.scatter2d.update(i),e.line2d&&e.line2d.update(i),e.error2d&&e.error2d.update(i.concat(i)),e.select2d&&e.select2d.update(i),e.glText)for(var a=0;a<e.count;a++)e.glText[a].update(t)},e.draw=function(){for(var t=e.count,i=e.fill2d,a=e.error2d,r=e.line2d,g=e.scatter2d,s=e.glText,b=e.select2d,x=e.selectBatch,S=e.unselectBatch,p=0;p<t;p++){if(i&&e.fillOrder[p]&&i.draw(e.fillOrder[p]),r&&e.lineOptions[p]&&r.draw(p),a&&(e.errorXOptions[p]&&a.draw(p),e.errorYOptions[p]&&a.draw(p+t)),g&&e.markerOptions[p])if(S[p].length){var w=_.repeat([],e.count);w[p]=S[p],g.draw(w)}else x[p].length||g.draw(p);s[p]&&e.textOptions[p]&&s[p].render()}b&&b.draw(x),e.dirty=!1},e.destroy=function(){e.fill2d&&e.fill2d.destroy&&e.fill2d.destroy(),e.scatter2d&&e.scatter2d.destroy&&e.scatter2d.destroy(),e.error2d&&e.error2d.destroy&&e.error2d.destroy(),e.line2d&&e.line2d.destroy&&e.line2d.destroy(),e.select2d&&e.select2d.destroy&&e.select2d.destroy(),e.glText&&e.glText.forEach(function(t){t.destroy&&t.destroy()}),e.lineOptions=null,e.fillOptions=null,e.markerOptions=null,e.markerSelectedOptions=null,e.markerUnselectedOptions=null,e.errorXOptions=null,e.errorYOptions=null,e.textOptions=null,e.textSelectedOptions=null,e.textUnselectedOptions=null,e.selectBatch=null,e.unselectBatch=null,E._scene=null}),e.dirty||_.extendFlat(e,c),e}},{"../../lib":503}],992:[function(v,ie,ae){"use strict";var _=v("../scatter/subtypes"),k=v("./edit_style").styleTextSelection;ie.exports=function(E,e){var c=E.cd,d=E.xaxis,n=E.yaxis,t=[],i=c[0].trace,a=c[0].t,r=i._length,g=a.x,s=a.y,b=a._scene,x=a.index;if(!b)return t;var S=_.hasText(i),p=_.hasMarkers(i);if(!0!==i.visible||!p&&!S)return t;var l=[],y=[];if(!1!==e&&!e.degenerate)for(var A=0;A<r;A++)e.contains([a.xpx[A],a.ypx[A]],!1,A,E)?(l.push(A),t.push({pointNumber:A,x:d.c2d(g[A]),y:n.c2d(s[A])})):y.push(A);if(p){var T=b.scatter2d;if(l.length||y.length){if(!b.selectBatch[x].length&&!b.unselectBatch[x].length){var f=new Array(b.count);f[x]=b.markerUnselectedOptions[x],T.update.apply(T,f)}}else{var M=new Array(b.count);M[x]=b.markerOptions[x],T.update.apply(T,M)}}return b.selectBatch[x]=l,b.unselectBatch[x]=y,S&&k(c),t}},{"../scatter/subtypes":952,"./edit_style":985}],993:[function(v,ie,ae){"use strict";var _=v("../../plots/template_attributes").hovertemplateAttrs,k=v("../../plots/template_attributes").texttemplateAttrs,m=v("../scattergeo/attributes"),E=v("../scatter/attributes"),e=v("../../plots/mapbox/layout_attributes"),c=v("../../plots/attributes"),d=v("../../components/colorscale/attributes"),n=v("../../lib/extend").extendFlat,t=v("../../plot_api/edit_types").overrideAll,i=m.line,a=m.marker;ie.exports=t({lon:m.lon,lat:m.lat,mode:n({},E.mode,{dflt:"markers"}),text:n({},E.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:n({},E.hovertext,{}),line:{color:i.color,width:i.width},connectgaps:E.connectgaps,marker:n({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:a.opacity,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode},d("marker")),fill:m.fill,fillcolor:E.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:E.selected.marker},unselected:{marker:E.unselected.marker},hoverinfo:n({},c.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:_()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/mapbox/layout_attributes":615,"../../plots/template_attributes":633,"../scatter/attributes":927,"../scattergeo/attributes":969}],994:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../lib"),m=v("../../constants/numerical").BADNUM,E=v("../../lib/geojson_utils"),e=v("../../components/colorscale"),c=v("../../components/drawing"),d=v("../scatter/make_bubble_size_func"),n=v("../scatter/subtypes"),t=v("../../plots/mapbox/convert_text_opts"),i=v("../../components/fx/helpers").appendArrayPointValue,a=v("../../lib/svg_text_utils").NEWLINES,r=v("../../lib/svg_text_utils").BR_TAG_ALL;function g(){return{geojson:E.makeBlank(),layout:{visibility:"none"},paint:{}}}function x(w,l){return k.isArrayOrTypedArray(w)?l?function(y){return _(w[y])?+w[y]:0}:function(y){return w[y]}:w?function(){return w}:S}function S(){return""}function p(w){return w[0]===m}ie.exports=function(l,y){var D,A=y[0].trace,T=!0===A.visible&&0!==A._length,M="none"!==A.fill,f=n.hasLines(A),u=n.hasMarkers(A),h=n.hasText(A),o=u&&"circle"===A.marker.symbol,C=u&&"circle"!==A.marker.symbol,R=g(),z=g(),O=g(),I=g(),F={fill:R,line:z,circle:O,symbol:I};if(!T)return F;if((M||f)&&(D=E.calcTraceToLineCoords(y)),M&&(R.geojson=E.makePolygon(D),R.layout.visibility="visible",k.extendFlat(R.paint,{"fill-color":A.fillcolor})),f&&(z.geojson=E.makeLine(D),z.layout.visibility="visible",k.extendFlat(z.paint,{"line-width":A.line.width,"line-color":A.line.color,"line-opacity":A.opacity})),o){var N=function s(w){var u,C,R,z,l=w[0].trace,y=l.marker,A=l.selectedpoints,T=k.isArrayOrTypedArray(y.color),M=k.isArrayOrTypedArray(y.size),f=k.isArrayOrTypedArray(y.opacity);function h(X){return l.opacity*X}T&&(C=e.hasColorscale(l,"marker")?e.makeColorScaleFuncFromTrace(y):k.identity),M&&(R=d(l)),f&&(z=function(X){return h(_(X)?+k.constrain(X,0,1):0)});var N,O=[];for(u=0;u<w.length;u++){var I=w[u],F=I.lonlat;if(!p(F)){var D={};C&&(D.mcc=I.mcc=C(I.mc)),R&&(D.mrc=I.mrc=R(I.ms)),z&&(D.mo=z(I.mo)),A&&(D.selected=I.selected||0),O.push({type:"Feature",geometry:{type:"Point",coordinates:F},properties:D})}}if(A)for(N=c.makeSelectedPointStyleFns(l),u=0;u<O.length;u++){var U=O[u].properties;N.selectedOpacityFn&&(U.mo=h(N.selectedOpacityFn(U))),N.selectedColorFn&&(U.mcc=N.selectedColorFn(U)),N.selectedSizeFn&&(U.mrc=N.selectedSizeFn(U))}return{geojson:{type:"FeatureCollection",features:O},mcc:T||N&&N.selectedColorFn?{type:"identity",property:"mcc"}:y.color,mrc:M||N&&N.selectedSizeFn?{type:"identity",property:"mrc"}:function o(X){return X/2}(y.size),mo:f||N&&N.selectedOpacityFn?{type:"identity",property:"mo"}:h(y.opacity)}}(y);O.geojson=N.geojson,O.layout.visibility="visible",k.extendFlat(O.paint,{"circle-color":N.mcc,"circle-radius":N.mrc,"circle-opacity":N.mo})}if((C||h)&&(I.geojson=function b(w,l){for(var y=l._fullLayout,A=w[0].trace,T=A.marker||{},M=T.symbol,f=T.angle,u="circle"!==M?x(M):S,h="auto"!==f?x(f,!0):S,o=n.hasText(A)?x(A.text):S,C=[],R=0;R<w.length;R++){var z=w[R];if(!p(z.lonlat)){var I,O=A.texttemplate;if(O){var F=Array.isArray(O)?O[R]||"":O,D=A._module.formatLabels(z,A,y),N={};i(N,A,z.i),I=k.texttemplateString(F,D,y._d3locale,N,z,A._meta||{})}else I=o(R);I&&(I=I.replace(a,"").replace(r,"\n")),C.push({type:"Feature",geometry:{type:"Point",coordinates:z.lonlat},properties:{symbol:u(R),angle:h(R),text:I}})}}return{type:"FeatureCollection",features:C}}(y,l),k.extendFlat(I.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),C&&(k.extendFlat(I.layout,{"icon-size":A.marker.size/10}),"angle"in A.marker&&"auto"!==A.marker.angle&&k.extendFlat(I.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),I.layout["icon-allow-overlap"]=A.marker.allowoverlap,k.extendFlat(I.paint,{"icon-opacity":A.opacity*A.marker.opacity,"icon-color":A.marker.color})),h)){var X=t(A.textposition,(A.marker||{}).size);k.extendFlat(I.layout,{"text-size":A.textfont.size,"text-anchor":X.anchor,"text-offset":X.offset}),k.extendFlat(I.paint,{"text-color":A.textfont.color,"text-opacity":A.opacity})}return F}},{"../../components/colorscale":378,"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"../../lib/svg_text_utils":529,"../../plots/mapbox/convert_text_opts":612,"../scatter/make_bubble_size_func":944,"../scatter/subtypes":952,"fast-isnumeric":190}],995:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../scatter/subtypes"),m=v("../scatter/marker_defaults"),E=v("../scatter/line_defaults"),e=v("../scatter/text_defaults"),c=v("../scatter/fillcolor_defaults"),d=v("./attributes");ie.exports=function(i,a,r,g){function s(S,p){return _.coerce(i,a,d,S,p)}if(function n(t,i,a){var r=a("lon")||[],g=a("lat")||[],s=Math.min(r.length,g.length);return i._length=s,s}(0,a,s)){if(s("text"),s("texttemplate"),s("hovertext"),s("hovertemplate"),s("mode"),s("below"),k.hasLines(a)&&(E(i,a,r,g,s,{noDash:!0}),s("connectgaps")),k.hasMarkers(a)){m(i,a,r,g,s,{noLine:!0}),s("marker.allowoverlap"),s("marker.angle");var x=a.marker;"circle"!==x.symbol&&(_.isArrayOrTypedArray(x.size)&&(x.size=x.size[0]),_.isArrayOrTypedArray(x.color)&&(x.color=x.color[0]))}k.hasText(a)&&e(i,a,g,s,{noSelect:!0}),s("fill"),"none"!==a.fill&&c(i,a,r,s),_.coerceSelectionMarkerOpacity(a,s)}else a.visible=!1}},{"../../lib":503,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":993}],996:[function(v,ie,ae){"use strict";ie.exports=function(k,m){return k.lon=m.lon,k.lat=m.lat,k}},{}],997:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/axes");ie.exports=function(m,E,e){var c={},n=e[E.subplot]._subplot.mockAxis,t=m.lonlat;return c.lonLabel=_.tickText(n,n.c2l(t[0]),!0).text,c.latLabel=_.tickText(n,n.c2l(t[1]),!0).text,c}},{"../../plots/cartesian/axes":554}],998:[function(v,ie,ae){"use strict";var _=v("../../components/fx"),k=v("../../lib"),m=v("../scatter/get_trace_color"),E=k.fillText,e=v("../../constants/numerical").BADNUM;function d(n,t,i){if(!n.hovertemplate){var r=(t.hi||n.hoverinfo).split("+"),g=-1!==r.indexOf("all"),s=-1!==r.indexOf("lon"),b=-1!==r.indexOf("lat"),x=t.lonlat,S=[];return g||s&&b?S.push("("+p(x[1])+", "+p(x[0])+")"):s?S.push(i.lon+p(x[0])):b&&S.push(i.lat+p(x[1])),(g||-1!==r.indexOf("text"))&&E(t,n,S),S.join("<br>")}function p(w){return w+"\xb0"}}ie.exports={hoverPoints:function c(n,t,i){var a=n.cd,r=a[0].trace,g=n.xa,s=n.ya,b=n.subplot,S=360*(t>=0?Math.floor((t+180)/360):Math.ceil((t-180)/360)),p=t-S;if(_.getClosest(a,function w(o){var C=o.lonlat;if(C[0]===e)return 1/0;var R=k.modHalf(C[0],360),z=C[1],O=b.project([R,z]),I=O.x-g.c2p([p,z]),F=O.y-s.c2p([R,i]),D=Math.max(3,o.mrc||0);return Math.max(Math.sqrt(I*I+F*F)-D,1-3/D)},n),!1!==n.index){var l=a[n.index],y=l.lonlat,A=[k.modHalf(y[0],360)+S,y[1]],T=g.c2p(A),M=s.c2p(A),f=l.mrc||1;n.x0=T-f,n.x1=T+f,n.y0=M-f,n.y1=M+f;var u={};u[r.subplot]={_subplot:b};var h=r._module.formatLabels(l,r,u);return n.lonLabel=h.lonLabel,n.latLabel=h.latLabel,n.color=m(r,l),n.extraText=d(r,l,a[0].t.labels),n.hovertemplate=r.hovertemplate,[n]}},getExtraText:d}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":937}],999:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("../scattergeo/calc"),plot:v("./plot"),hoverPoints:v("./hover").hoverPoints,eventData:v("./event_data"),selectPoints:v("./select"),styleOnSelect:function(_,k){k&&k[0].trace._glTrace.update(k)},moduleType:"trace",name:"scattermapbox",basePlotModule:v("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":613,"../scatter/marker_colorbar":945,"../scattergeo/calc":970,"./attributes":993,"./defaults":995,"./event_data":996,"./format_labels":997,"./hover":998,"./plot":1e3,"./select":1001}],1e3:[function(v,ie,ae){"use strict";var _=v("./convert"),k=v("../../plots/mapbox/constants").traceLayerPrefix,m=["fill","line","circle","symbol"];function E(c,d){this.type="scattermapbox",this.subplot=c,this.uid=d,this.sourceIds={fill:"source-"+d+"-fill",line:"source-"+d+"-line",circle:"source-"+d+"-circle",symbol:"source-"+d+"-symbol"},this.layerIds={fill:k+d+"-fill",line:k+d+"-line",circle:k+d+"-circle",symbol:k+d+"-symbol"},this.below=null}var e=E.prototype;e.addSource=function(c,d){this.subplot.map.addSource(this.sourceIds[c],{type:"geojson",data:d.geojson})},e.setSourceData=function(c,d){this.subplot.map.getSource(this.sourceIds[c]).setData(d.geojson)},e.addLayer=function(c,d,n){this.subplot.addLayer({type:c,id:this.layerIds[c],source:this.sourceIds[c],layout:d.layout,paint:d.paint},n)},e.update=function(d){var r,g,s,n=this.subplot,t=n.map,i=_(n.gd,d),a=n.belowLookup["trace-"+this.uid];if(a!==this.below){for(r=m.length-1;r>=0;r--)t.removeLayer(this.layerIds[g=m[r]]);for(r=0;r<m.length;r++)this.addLayer(g=m[r],s=i[g],a);this.below=a}for(r=0;r<m.length;r++)n.setOptions(this.layerIds[g=m[r]],"setLayoutProperty",(s=i[g]).layout),"visible"===s.layout.visibility&&(this.setSourceData(g,s),n.setOptions(this.layerIds[g],"setPaintProperty",s.paint));d[0].trace._glTrace=this},e.dispose=function(){for(var d=this.subplot.map,n=m.length-1;n>=0;n--){var t=m[n];d.removeLayer(this.layerIds[t]),d.removeSource(this.sourceIds[t])}},ie.exports=function(d,n){for(var t=n[0].trace,i=new E(d,t.uid),a=_(d.gd,n),r=i.below=d.belowLookup["trace-"+t.uid],g=0;g<m.length;g++){var s=m[g],b=a[s];i.addSource(s,b),i.addLayer(s,b,r)}return n[0].trace._glTrace=i,i}},{"../../plots/mapbox/constants":611,"./convert":994}],1001:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../scatter/subtypes"),m=v("../../constants/numerical").BADNUM;ie.exports=function(e,c){var r,d=e.cd,n=e.xaxis,t=e.yaxis,i=[];if(!k.hasMarkers(d[0].trace))return[];if(!1===c)for(r=0;r<d.length;r++)d[r].selected=0;else for(r=0;r<d.length;r++){var g=d[r],s=g.lonlat;if(s[0]!==m){var b=[_.modHalf(s[0],360),s[1]],x=[n.c2p(b),t.c2p(b)];c.contains(x,null,r,e)?(i.push({pointNumber:r,lon:s[0],lat:s[1]}),g.selected=1):g.selected=0}}return i}},{"../../constants/numerical":479,"../../lib":503,"../scatter/subtypes":952}],1002:[function(v,ie,ae){"use strict";var _=v("../../plots/template_attributes").hovertemplateAttrs,k=v("../../plots/template_attributes").texttemplateAttrs,m=v("../../lib/extend").extendFlat,E=v("../scatter/attributes"),e=v("../../plots/attributes"),c=E.line;ie.exports={mode:E.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:E.text,texttemplate:k({editType:"plot"},{keys:["r","theta","text"]}),hovertext:E.hovertext,line:{color:c.color,width:c.width,dash:c.dash,shape:m({},c.shape,{values:["linear","spline"]}),smoothing:c.smoothing,editType:"calc"},connectgaps:E.connectgaps,marker:E.marker,cliponaxis:m({},E.cliponaxis,{dflt:!1}),textposition:E.textposition,textfont:E.textfont,fill:m({},E.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:E.fillcolor,hoverinfo:m({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:E.hoveron,hovertemplate:_(),selected:E.selected,unselected:E.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1003:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../constants/numerical").BADNUM,m=v("../../plots/cartesian/axes"),E=v("../scatter/colorscale_calc"),e=v("../scatter/arrays_to_calcdata"),c=v("../scatter/calc_selection"),d=v("../scatter/calc").calcMarkerSize;ie.exports=function(t,i){for(var a=t._fullLayout,r=i.subplot,g=a[r].radialaxis,s=a[r].angularaxis,b=g.makeCalcdata(i,"r"),x=s.makeCalcdata(i,"theta"),S=i._length,p=new Array(S),w=0;w<S;w++){var l=b[w],y=x[w],A=p[w]={};_(l)&&_(y)?(A.r=l,A.theta=y):A.r=k}var T=d(i,S);return i._extremes.x=m.findExtremes(g,b,{ppad:T}),E(t,i),e(p,i),c(p,i),p}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1004:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../scatter/subtypes"),m=v("../scatter/marker_defaults"),E=v("../scatter/line_defaults"),e=v("../scatter/line_shape_defaults"),c=v("../scatter/text_defaults"),d=v("../scatter/fillcolor_defaults"),n=v("../scatter/constants").PTS_LINESONLY,t=v("./attributes");function a(r,g,s,b){var p,x=b("r"),S=b("theta");if(x)S?p=Math.min(x.length,S.length):(p=x.length,b("theta0"),b("dtheta"));else{if(!S)return 0;p=g.theta.length,b("r0"),b("dr")}return g._length=p,p}ie.exports={handleRThetaDefaults:a,supplyDefaults:function i(r,g,s,b){function x(w,l){return _.coerce(r,g,t,w,l)}var S=a(0,g,0,x);if(S){x("thetaunit"),x("mode",S<n?"lines+markers":"lines"),x("text"),x("hovertext"),"fills"!==g.hoveron&&x("hovertemplate"),k.hasLines(g)&&(E(r,g,s,b,x),e(r,g,x),x("connectgaps")),k.hasMarkers(g)&&m(r,g,s,b,x,{gradient:!0}),k.hasText(g)&&(x("texttemplate"),c(r,g,b,x));var p=[];(k.hasMarkers(g)||k.hasText(g))&&(x("cliponaxis"),x("marker.maxdisplayed"),p.push("points")),x("fill"),"none"!==g.fill&&(d(r,g,s,x),k.hasLines(g)||e(r,g,x)),("tonext"===g.fill||"toself"===g.fill)&&p.push("fills"),x("hoveron",p.join("+")||"points"),_.coerceSelectionMarkerOpacity(g,x)}else g.visible=!1}}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1002}],1005:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../plots/cartesian/axes");ie.exports=function(E,e,c){var t,i,d={},n=c[e.subplot]._subplot;n?(t=n.radialAxis,i=n.angularAxis):(t=(n=c[e.subplot]).radialaxis,i=n.angularaxis);var a=t.c2l(E.r);d.rLabel=k.tickText(t,a,!0).text;var r="degrees"===i.thetaunit?_.rad2deg(E.theta):E.theta;return d.thetaLabel=k.tickText(i,r,!0).text,d}},{"../../lib":503,"../../plots/cartesian/axes":554}],1006:[function(v,ie,ae){"use strict";var _=v("../scatter/hover");function m(E,e,c,d){var n=c.radialAxis,t=c.angularAxis;n._hovertitle="r",t._hovertitle="\u03b8";var i={};i[e.subplot]={_subplot:c};var a=e._module.formatLabels(E,e,i);d.rLabel=a.rLabel,d.thetaLabel=a.thetaLabel;var g=[];function s(x,S){g.push(x._hovertitle+": "+S)}if(!e.hovertemplate){var b=(E.hi||e.hoverinfo).split("+");-1!==b.indexOf("all")&&(b=["r","theta","text"]),-1!==b.indexOf("r")&&s(n,d.rLabel),-1!==b.indexOf("theta")&&s(t,d.thetaLabel),-1!==b.indexOf("text")&&d.text&&(g.push(d.text),delete d.text),d.extraText=g.join("<br>")}}ie.exports={hoverPoints:function k(E,e,c,d){var n=_(E,e,c,d);if(n&&!1!==n[0].index){var t=n[0];if(void 0===t.index)return n;var i=E.subplot,a=t.cd[t.index],r=t.trace;if(i.isPtInside(a))return t.xLabelVal=void 0,t.yLabelVal=void 0,m(a,r,i,t),t.hovertemplate=r.hovertemplate,n}},makeHoverPointText:m}},{"../scatter/hover":938}],1007:[function(v,ie,ae){"use strict";ie.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:v("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:v("./attributes"),supplyDefaults:v("./defaults").supplyDefaults,colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),plot:v("./plot"),style:v("../scatter/style").style,styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover").hoverPoints,selectPoints:v("../scatter/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1002,"./calc":1003,"./defaults":1004,"./format_labels":1005,"./hover":1006,"./plot":1008}],1008:[function(v,ie,ae){"use strict";var _=v("../scatter/plot"),k=v("../../constants/numerical").BADNUM;ie.exports=function(E,e,c){for(var d=e.layers.frontplot.select("g.scatterlayer"),n={xaxis:e.xaxis,yaxis:e.yaxis,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},t=e.radialAxis,i=e.angularAxis,a=0;a<c.length;a++)for(var r=c[a],g=0;g<r.length;g++){var s=r[g],b=s.r;if(b===k)s.x=s.y=k;else{var x=t.c2g(b),S=i.c2g(s.theta);s.x=x*Math.cos(S),s.y=x*Math.sin(S)}}_(E,n,c,d)}},{"../../constants/numerical":479,"../scatter/plot":948}],1009:[function(v,ie,ae){"use strict";var _=v("../scatterpolar/attributes"),k=v("../scattergl/attributes"),m=v("../../plots/template_attributes").texttemplateAttrs;ie.exports={mode:_.mode,r:_.r,theta:_.theta,r0:_.r0,dr:_.dr,theta0:_.theta0,dtheta:_.dtheta,thetaunit:_.thetaunit,text:_.text,texttemplate:m({editType:"plot"},{keys:["r","theta","text"]}),hovertext:_.hovertext,hovertemplate:_.hovertemplate,line:k.line,connectgaps:k.connectgaps,marker:k.marker,fill:k.fill,fillcolor:k.fillcolor,textposition:k.textposition,textfont:k.textfont,hoverinfo:_.hoverinfo,selected:_.selected,unselected:_.unselected}},{"../../plots/template_attributes":633,"../scattergl/attributes":979,"../scatterpolar/attributes":1002}],1010:[function(v,ie,ae){"use strict";ie.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:v("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),hoverPoints:v("./hover").hoverPoints,selectPoints:v("../scattergl/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":945,"../scattergl/select":992,"./attributes":1009,"./calc":1011,"./defaults":1012,"./format_labels":1013,"./hover":1014}],1011:[function(v,ie,ae){"use strict";var _=v("../scatter/colorscale_calc"),k=v("../scatter/calc").calcMarkerSize,m=v("../scattergl/convert"),E=v("../../plots/cartesian/axes"),e=v("../scattergl/constants").TOO_MANY_POINTS;ie.exports=function(d,n){var t=d._fullLayout,i=n.subplot,a=t[i].radialaxis,r=t[i].angularaxis,g=n._r=a.makeCalcdata(n,"r"),s=n._theta=r.makeCalcdata(n,"theta"),b=n._length,x={};b<g.length&&(g=g.slice(0,b)),b<s.length&&(s=s.slice(0,b)),x.r=g,x.theta=s,_(d,n);var p,S=x.opts=m.style(d,n);return b<e?p=k(n,b):S.marker&&(p=2*(S.marker.sizeAvg||Math.max(S.marker.size,3))),n._extremes.x=E.findExtremes(a,g,{ppad:p}),[{x:!1,y:!1,t:x,trace:n}]}},{"../../plots/cartesian/axes":554,"../scatter/calc":928,"../scatter/colorscale_calc":930,"../scattergl/constants":982,"../scattergl/convert":983}],1012:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../scatter/subtypes"),m=v("../scatterpolar/defaults").handleRThetaDefaults,E=v("../scatter/marker_defaults"),e=v("../scatter/line_defaults"),c=v("../scatter/text_defaults"),d=v("../scatter/fillcolor_defaults"),n=v("../scatter/constants").PTS_LINESONLY,t=v("./attributes");ie.exports=function(a,r,g,s){function b(S,p){return _.coerce(a,r,t,S,p)}var x=m(a,r,s,b);x?(b("thetaunit"),b("mode",x<n?"lines+markers":"lines"),b("text"),b("hovertext"),"fills"!==r.hoveron&&b("hovertemplate"),k.hasLines(r)&&(e(a,r,g,s,b),b("connectgaps")),k.hasMarkers(r)&&E(a,r,g,s,b),k.hasText(r)&&(b("texttemplate"),c(a,r,s,b)),b("fill"),"none"!==r.fill&&d(a,r,g,b),_.coerceSelectionMarkerOpacity(r,b)):r.visible=!1}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"../scatterpolar/defaults":1004,"./attributes":1009}],1013:[function(v,ie,ae){"use strict";var _=v("../scatterpolar/format_labels");ie.exports=function(m,E,e){var c=m.i;return"r"in m||(m.r=E._r[c]),"theta"in m||(m.theta=E._theta[c]),_(m,E,e)}},{"../scatterpolar/format_labels":1005}],1014:[function(v,ie,ae){"use strict";var _=v("../scattergl/hover"),k=v("../scatterpolar/hover").makeHoverPointText;ie.exports={hoverPoints:function m(E,e,c,d){var t=E.cd[0].t,i=t.r,a=t.theta,r=_.hoverPoints(E,e,c,d);if(r&&!1!==r[0].index){var g=r[0];if(void 0===g.index)return r;var s=E.subplot,b=g.cd[g.index],x=g.trace;if(b.r=i[g.index],b.theta=a[g.index],s.isPtInside(b))return g.xLabelVal=void 0,g.yLabelVal=void 0,k(b,x,s,g),r}}}},{"../scattergl/hover":988,"../scatterpolar/hover":1006}],1015:[function(v,ie,ae){arguments[4][896][0].apply(ae,arguments)},{"./base_index":1010,"./plot":1016,dup:896}],1016:[function(v,ie,ae){"use strict";var _=v("@plotly/point-cluster"),k=v("fast-isnumeric"),m=v("../scattergl/plot"),E=v("../scattergl/scene_update"),e=v("../scattergl/convert"),c=v("../../lib"),d=v("../scattergl/constants").TOO_MANY_POINTS;ie.exports=function(i,a,r){if(r.length){var g=a.radialAxis,s=a.angularAxis,b=E(i,a);return r.forEach(function(x){if(x&&x[0]&&x[0].trace){var M,S=x[0],p=S.trace,w=S.t,l=p._length,y=w.r,A=w.theta,T=w.opts,f=y.slice(),u=A.slice();for(M=0;M<y.length;M++)a.isPtInside({r:y[M],theta:A[M]})||(f[M]=NaN,u[M]=NaN);var h=new Array(2*l),o=Array(l),C=Array(l);for(M=0;M<l;M++){var z,O,R=f[M];if(k(R)){var I=g.c2g(R),F=s.c2g(u[M],p.thetaunit);z=I*Math.cos(F),O=I*Math.sin(F)}else z=O=NaN;o[M]=h[2*M]=z,C[M]=h[2*M+1]=O}w.tree=_(h),T.marker&&l>=d&&(T.marker.cluster=w.tree),T.marker&&(T.markerSel.positions=T.markerUnsel.positions=T.marker.positions=h),T.line&&h.length>1&&c.extendFlat(T.line,e.linePositions(i,p,h)),T.text&&(c.extendFlat(T.text,{positions:h},e.textPosition(i,p,T.text,T.marker)),c.extendFlat(T.textSel,{positions:h},e.textPosition(i,p,T.text,T.markerSel)),c.extendFlat(T.textUnsel,{positions:h},e.textPosition(i,p,T.text,T.markerUnsel))),T.fill&&!b.fill2d&&(b.fill2d=!0),T.marker&&!b.scatter2d&&(b.scatter2d=!0),T.line&&!b.line2d&&(b.line2d=!0),T.text&&!b.glText&&(b.glText=!0),b.lineOptions.push(T.line),b.fillOptions.push(T.fill),b.markerOptions.push(T.marker),b.markerSelectedOptions.push(T.markerSel),b.markerUnselectedOptions.push(T.markerUnsel),b.textOptions.push(T.text),b.textSelectedOptions.push(T.textSel),b.textUnselectedOptions.push(T.textUnsel),b.selectBatch.push([]),b.unselectBatch.push([]),w.x=o,w.y=C,w.rawx=o,w.rawy=C,w.r=y,w.theta=A,w.positions=h,w._scene=b,w.index=b.count,b.count++}}),m(i,a,r)}},ie.exports.reglPrecompiled={}},{"../../lib":503,"../scattergl/constants":982,"../scattergl/convert":983,"../scattergl/plot":990,"../scattergl/scene_update":991,"@plotly/point-cluster":59,"fast-isnumeric":190}],1017:[function(v,ie,ae){"use strict";var _=v("../../plots/template_attributes").hovertemplateAttrs,k=v("../../plots/template_attributes").texttemplateAttrs,m=v("../../lib/extend").extendFlat,E=v("../scatter/attributes"),e=v("../../plots/attributes"),c=E.line;ie.exports={mode:E.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:E.text,texttemplate:k({editType:"plot"},{keys:["real","imag","text"]}),hovertext:E.hovertext,line:{color:c.color,width:c.width,dash:c.dash,shape:m({},c.shape,{values:["linear","spline"]}),smoothing:c.smoothing,editType:"calc"},connectgaps:E.connectgaps,marker:E.marker,cliponaxis:m({},E.cliponaxis,{dflt:!1}),textposition:E.textposition,textfont:E.textfont,fill:m({},E.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:E.fillcolor,hoverinfo:m({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:E.hoveron,hovertemplate:_(),selected:E.selected,unselected:E.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1018:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../../constants/numerical").BADNUM,m=v("../scatter/colorscale_calc"),E=v("../scatter/arrays_to_calcdata"),e=v("../scatter/calc_selection"),c=v("../scatter/calc").calcMarkerSize;ie.exports=function(n,t){for(var i=n._fullLayout,a=t.subplot,g=i[a].imaginaryaxis,s=i[a].realaxis.makeCalcdata(t,"real"),b=g.makeCalcdata(t,"imag"),x=t._length,S=new Array(x),p=0;p<x;p++){var w=s[p],l=b[p],y=S[p]={};_(w)&&_(l)?(y.real=w,y.imag=l):y.real=k}return c(t,x),m(n,t),E(S,t),e(S,t),S}},{"../../constants/numerical":479,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1019:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../scatter/subtypes"),m=v("../scatter/marker_defaults"),E=v("../scatter/line_defaults"),e=v("../scatter/line_shape_defaults"),c=v("../scatter/text_defaults"),d=v("../scatter/fillcolor_defaults"),n=v("../scatter/constants").PTS_LINESONLY,t=v("./attributes");ie.exports=function(r,g,s,b){function x(w,l){return _.coerce(r,g,t,w,l)}var S=function i(a,r,g,s){var S,b=s("real"),x=s("imag");return b&&x&&(S=Math.min(b.length,x.length)),r._length=S,S}(0,g,0,x);if(S){x("mode",S<n?"lines+markers":"lines"),x("text"),x("hovertext"),"fills"!==g.hoveron&&x("hovertemplate"),k.hasLines(g)&&(E(r,g,s,b,x),e(r,g,x),x("connectgaps")),k.hasMarkers(g)&&m(r,g,s,b,x,{gradient:!0}),k.hasText(g)&&(x("texttemplate"),c(r,g,b,x));var p=[];(k.hasMarkers(g)||k.hasText(g))&&(x("cliponaxis"),x("marker.maxdisplayed"),p.push("points")),x("fill"),"none"!==g.fill&&(d(r,g,s,x),k.hasLines(g)||e(r,g,x)),("tonext"===g.fill||"toself"===g.fill)&&p.push("fills"),x("hoveron",p.join("+")||"points"),_.coerceSelectionMarkerOpacity(g,x)}else g.visible=!1}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1017}],1020:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/axes");ie.exports=function(m,E,e){var c={},d=e[E.subplot]._subplot;return c.realLabel=_.tickText(d.radialAxis,m.real,!0).text,c.imagLabel=_.tickText(d.angularAxis,m.imag,!0).text,c}},{"../../plots/cartesian/axes":554}],1021:[function(v,ie,ae){"use strict";var _=v("../scatter/hover");function m(E,e,c,d){var n=c.radialAxis,t=c.angularAxis;n._hovertitle="real",t._hovertitle="imag";var i={};i[e.subplot]={_subplot:c};var a=e._module.formatLabels(E,e,i);d.realLabel=a.realLabel,d.imagLabel=a.imagLabel;var g=[];function s(x,S){g.push(x._hovertitle+": "+S)}if(!e.hovertemplate){var b=(E.hi||e.hoverinfo).split("+");-1!==b.indexOf("all")&&(b=["real","imag","text"]),-1!==b.indexOf("real")&&s(n,d.realLabel),-1!==b.indexOf("imag")&&s(t,d.imagLabel),-1!==b.indexOf("text")&&d.text&&(g.push(d.text),delete d.text),d.extraText=g.join("<br>")}}ie.exports={hoverPoints:function k(E,e,c,d){var n=_(E,e,c,d);if(n&&!1!==n[0].index){var t=n[0];if(void 0===t.index)return n;var i=E.subplot,a=t.cd[t.index],r=t.trace;if(i.isPtInside(a))return t.xLabelVal=void 0,t.yLabelVal=void 0,m(a,r,i,t),t.hovertemplate=r.hovertemplate,n}},makeHoverPointText:m}},{"../scatter/hover":938}],1022:[function(v,ie,ae){"use strict";ie.exports={moduleType:"trace",name:"scattersmith",basePlotModule:v("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),plot:v("./plot"),style:v("../scatter/style").style,styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover").hoverPoints,selectPoints:v("../scatter/select"),meta:{}}},{"../../plots/smith":629,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1017,"./calc":1018,"./defaults":1019,"./format_labels":1020,"./hover":1021,"./plot":1023}],1023:[function(v,ie,ae){"use strict";var _=v("../scatter/plot"),k=v("../../constants/numerical").BADNUM,E=v("../../plots/smith/helpers").smith;ie.exports=function(c,d,n){for(var t=d.layers.frontplot.select("g.scatterlayer"),i={xaxis:d.xaxis,yaxis:d.yaxis,plot:d.framework,layerClipId:d._hasClipOnAxisFalse?d.clipIds.forTraces:null},a=0;a<n.length;a++)for(var r=n[a],g=0;g<r.length;g++){var s=r[g],b=s.real;if(b===k)s.x=s.y=k;else{var x=E([b,s.imag]);s.x=x[0],s.y=x[1]}}_(c,i,n,t)}},{"../../constants/numerical":479,"../../plots/smith/helpers":628,"../scatter/plot":948}],1024:[function(v,ie,ae){"use strict";var _=v("../../plots/template_attributes").hovertemplateAttrs,k=v("../../plots/template_attributes").texttemplateAttrs,m=v("../scatter/attributes"),E=v("../../plots/attributes"),e=v("../../components/colorscale/attributes"),c=v("../../components/drawing/attributes").dash,d=v("../../lib/extend").extendFlat,n=m.marker,t=m.line,i=n.line;ie.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:d({},m.mode,{dflt:"markers"}),text:d({},m.text,{}),texttemplate:k({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:d({},m.hovertext,{}),line:{color:t.color,width:t.width,dash:c,shape:d({},t.shape,{values:["linear","spline"]}),smoothing:t.smoothing,editType:"calc"},connectgaps:m.connectgaps,cliponaxis:m.cliponaxis,fill:d({},m.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:m.fillcolor,marker:d({symbol:n.symbol,opacity:n.opacity,maxdisplayed:n.maxdisplayed,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,line:d({width:i.width,editType:"calc"},e("marker.line")),gradient:n.gradient,editType:"calc"},e("marker")),textfont:m.textfont,textposition:m.textposition,selected:m.selected,unselected:m.unselected,hoverinfo:d({},E.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:m.hoveron,hovertemplate:_()}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1025:[function(v,ie,ae){"use strict";var _=v("fast-isnumeric"),k=v("../scatter/colorscale_calc"),m=v("../scatter/arrays_to_calcdata"),E=v("../scatter/calc_selection"),e=v("../scatter/calc").calcMarkerSize,c=["a","b","c"],d={a:["b","c"],b:["a","c"],c:["a","b"]};ie.exports=function(t,i){var b,x,S,p,w,l,r=t._fullLayout[i.subplot].sum,g=i.sum||r,s={a:i.a,b:i.b,c:i.c};for(b=0;b<c.length;b++)if(!s[S=c[b]]){for(w=s[d[S][0]],l=s[d[S][1]],p=new Array(w.length),x=0;x<w.length;x++)p[x]=g-w[x]-l[x];s[S]=p}var T,M,f,u,y=i._length,A=new Array(y);for(b=0;b<y;b++)M=s.b[b],f=s.c[b],_(T=s.a[b])&&_(M)&&_(f)?(1!=(u=r/((T=+T)+(M=+M)+(f=+f)))&&(T*=u,M*=u,f*=u),A[b]={x:f-M,y:T,a:T,b:M,c:f}):A[b]={x:!1,y:!1};return e(i,y),k(t,i),m(A,i),E(A,i),A}},{"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1026:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../scatter/constants"),m=v("../scatter/subtypes"),E=v("../scatter/marker_defaults"),e=v("../scatter/line_defaults"),c=v("../scatter/line_shape_defaults"),d=v("../scatter/text_defaults"),n=v("../scatter/fillcolor_defaults"),t=v("./attributes");ie.exports=function(a,r,g,s){function b(A,T){return _.coerce(a,r,t,A,T)}var w,x=b("a"),S=b("b"),p=b("c");if(x?(w=x.length,S?(w=Math.min(w,S.length),p&&(w=Math.min(w,p.length))):w=p?Math.min(w,p.length):0):S&&p&&(w=Math.min(S.length,p.length)),w){r._length=w,b("sum"),b("text"),b("hovertext"),"fills"!==r.hoveron&&b("hovertemplate"),b("mode",w<k.PTS_LINESONLY?"lines+markers":"lines"),m.hasLines(r)&&(e(a,r,g,s,b),c(a,r,b),b("connectgaps")),m.hasMarkers(r)&&E(a,r,g,s,b,{gradient:!0}),m.hasText(r)&&(b("texttemplate"),d(a,r,s,b));var y=[];(m.hasMarkers(r)||m.hasText(r))&&(b("cliponaxis"),b("marker.maxdisplayed"),y.push("points")),b("fill"),"none"!==r.fill&&(n(a,r,g,b),m.hasLines(r)||c(a,r,b)),("tonext"===r.fill||"toself"===r.fill)&&y.push("fills"),b("hoveron",y.join("+")||"points"),_.coerceSelectionMarkerOpacity(r,b)}else r.visible=!1}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1024}],1027:[function(v,ie,ae){"use strict";ie.exports=function(k,m,E,e,c){if(m.xa&&(k.xaxis=m.xa),m.ya&&(k.yaxis=m.ya),e[c]){var d=e[c];k.a=d.a,k.b=d.b,k.c=d.c}else k.a=m.a,k.b=m.b,k.c=m.c;return k}},{}],1028:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/axes");ie.exports=function(m,E,e){var c={},d=e[E.subplot]._subplot;return c.aLabel=_.tickText(d.aaxis,m.a,!0).text,c.bLabel=_.tickText(d.baxis,m.b,!0).text,c.cLabel=_.tickText(d.caxis,m.c,!0).text,c}},{"../../plots/cartesian/axes":554}],1029:[function(v,ie,ae){"use strict";var _=v("../scatter/hover");ie.exports=function(m,E,e,c){var d=_(m,E,e,c);if(d&&!1!==d[0].index){var n=d[0];if(void 0===n.index){var i=m.xa._length,a=i*(1-n.y0/m.ya._length)/2,r=i-a;return n.x0=Math.max(Math.min(n.x0,r),a),n.x1=Math.max(Math.min(n.x1,r),a),d}var g=n.cd[n.index],s=n.trace,b=n.subplot;n.a=g.a,n.b=g.b,n.c=g.c,n.xLabelVal=void 0,n.yLabelVal=void 0;var x={};x[s.subplot]={_subplot:b};var S=s._module.formatLabels(g,s,x);n.aLabel=S.aLabel,n.bLabel=S.bLabel,n.cLabel=S.cLabel;var w=[];if(!s.hovertemplate){var y=(g.hi||s.hoverinfo).split("+");-1!==y.indexOf("all")&&(y=["a","b","c"]),-1!==y.indexOf("a")&&l(b.aaxis,n.aLabel),-1!==y.indexOf("b")&&l(b.baxis,n.bLabel),-1!==y.indexOf("c")&&l(b.caxis,n.cLabel)}return n.extraText=w.join("<br>"),n.hovertemplate=s.hovertemplate,d}function l(A,T){w.push(A._hovertitle+": "+T)}}},{"../scatter/hover":938}],1030:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),plot:v("./plot"),style:v("../scatter/style").style,styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover"),selectPoints:v("../scatter/select"),eventData:v("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:v("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":634,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1024,"./calc":1025,"./defaults":1026,"./event_data":1027,"./format_labels":1028,"./hover":1029,"./plot":1031}],1031:[function(v,ie,ae){"use strict";var _=v("../scatter/plot");ie.exports=function(m,E,e){var c=E.plotContainer;c.select(".scatterlayer").selectAll("*").remove();var d={xaxis:E.xaxis,yaxis:E.yaxis,plot:c,layerClipId:E._hasClipOnAxisFalse?E.clipIdRelative:null},n=E.layers.frontplot.select("g.scatterlayer");_(m,d,e,n)}},{"../scatter/plot":948}],1032:[function(v,ie,ae){"use strict";var _=v("../scatter/attributes"),k=v("../../components/colorscale/attributes"),m=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,E=v("../../plots/template_attributes").hovertemplateAttrs,e=v("../scattergl/attributes"),c=v("../../plots/cartesian/constants").idRegex,d=v("../../plot_api/plot_template").templatedArray,n=v("../../lib/extend").extendFlat,t=_.marker,i=t.line,a=n(k("marker.line",{editTypeOverride:"calc"}),{width:n({},i.width,{editType:"calc"}),editType:"calc"}),r=n(k("marker"),{symbol:t.symbol,size:n({},t.size,{editType:"markerSize"}),sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,opacity:t.opacity,colorbar:t.colorbar,line:a,editType:"calc"});function g(s){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:c[s],editType:"plot"}}}r.color.editType=r.cmin.editType=r.cmax.editType="style",ie.exports={dimensions:d("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:n({},e.text,{}),hovertext:n({},e.hovertext,{}),hovertemplate:E(),xhoverformat:m("x"),yhoverformat:m("y"),marker:r,xaxes:g("x"),yaxes:g("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/constants":561,"../../plots/template_attributes":633,"../scatter/attributes":927,"../scattergl/attributes":979}],1033:[function(v,ie,ae){"use strict";var _=v("../../registry"),k=v("../../components/grid");ie.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),calc:v("./calc"),plot:v("./plot"),hoverPoints:v("./hover").hoverPoints,selectPoints:v("./select"),editStyle:v("./edit_style"),meta:{}},_.register(k)},{"../../components/grid":410,"../../registry":638,"../scatter/marker_colorbar":945,"./attributes":1032,"./calc":1035,"./defaults":1036,"./edit_style":1037,"./hover":1039,"./plot":1041,"./select":1043}],1034:[function(v,ie,ae){"use strict";var _=v("regl-line2d"),k=v("../../registry"),m=v("../../lib/prepare_regl"),E=v("../../plots/get_data").getModuleCalcData,e=v("../../plots/cartesian"),c=v("../../plots/cartesian/axis_ids").getFromId,d=v("../../plots/cartesian/axes").shouldShowZeroLine,n="splom",t={};function r(x,S,p){for(var l=S._visibleDims,y=p.viewOpts.ranges=new Array(p.matrixOptions.data.length),A=0;A<l.length;A++){var T=l[A],M=y[A]=new Array(4),f=c(x,S._diag[T][0]);f&&(M[0]=f.r2l(f.range[0]),M[2]=f.r2l(f.range[1]));var u=c(x,S._diag[T][1]);u&&(M[1]=u.r2l(u.range[0]),M[3]=u.r2l(u.range[1]))}p.selectBatch.length||p.unselectBatch.length?p.matrix.update({ranges:y},{ranges:y}):p.matrix.update({ranges:y})}function g(x){var S=x._fullLayout,p=S._glcanvas.data()[0].regl,w=S._splomGrid;w||(w=S._splomGrid=_(p)),w.update(function s(x){var A,S=x._context.plotGlPixelRatio,p=x._fullLayout,w=p._size,l=[0,0,p.width*S,p.height*S],y={};function T(X,oe,se,ne,W,G){se*=S,ne*=S,W*=S,G*=S;var $=oe[X+"color"],V=oe[X+"width"],H=String($+V);H in y?y[H].data.push(NaN,NaN,se,ne,W,G):y[H]={data:[se,ne,W,G],join:"rect",thickness:V*S,color:$,viewport:l,range:l,overlay:!1}}for(A in p._splomSubplots){var D,N,M=p._plots[A],f=M.xaxis,u=M.yaxis,h=f._gridVals,o=u._gridVals,C=f._offset,R=f._length,z=u._length,O=w.b+u.domain[0]*w.h,I=-u._m,F=-I*u.r2l(u.range[0],u.calendar);if(f.showgrid)for(A=0;A<h.length;A++)D=C+f.l2p(h[A].x),T("grid",f,D,O,D,O+z);if(u.showgrid)for(A=0;A<o.length;A++)T("grid",u,C,N=O+F+I*o[A].x,C+R,N);d(x,f,u)&&(D=C+f.l2p(0),T("zeroline",f,D,O,D,O+z)),d(x,u,f)&&T("zeroline",u,C,N=O+F+0,C+R,N)}var U=[];for(A in y)U.push(y[A]);return U}(x))}ie.exports={name:n,attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:function i(x){var S=x._fullLayout,p=k.getModule(n),w=E(x.calcdata,p)[0];!m(x,["ANGLE_instanced_arrays","OES_element_index_uint"],t)||(S._hasOnlyLargeSploms&&g(x),p.plot(x,{},w))},drag:function a(x){var S=x.calcdata,p=x._fullLayout;p._hasOnlyLargeSploms&&g(x);for(var w=0;w<S.length;w++){var y=S[w][0].trace,A=p._splomScenes[y.uid];"splom"===y.type&&A&&A.matrix&&r(x,y,A)}},updateGrid:g,clean:function b(x,S,p,w){var y,l={};if(w._splomScenes){for(y=0;y<x.length;y++){var A=x[y];"splom"===A.type&&(l[A.uid]=1)}for(y=0;y<p.length;y++){var T=p[y];if(!l[T.uid]){var M=w._splomScenes[T.uid];M&&M.destroy&&M.destroy(),w._splomScenes[T.uid]=null,delete w._splomScenes[T.uid]}}}0===Object.keys(w._splomScenes||{}).length&&delete w._splomScenes,w._splomGrid&&!S._hasOnlyLargeSploms&&w._hasOnlyLargeSploms&&(w._splomGrid.destroy(),w._splomGrid=null,delete w._splomGrid),e.clean(x,S,p,w)},updateFx:e.updateFx,toSVG:e.toSVG,reglPrecompiled:t}},{"../../lib/prepare_regl":516,"../../plots/cartesian":568,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../../plots/get_data":593,"../../registry":638,"regl-line2d":280}],1035:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../plots/cartesian/axis_ids"),m=v("../scatter/calc").calcMarkerSize,E=v("../scatter/calc").calcAxisExpansion,e=v("../scatter/colorscale_calc"),c=v("../scattergl/convert").markerSelection,d=v("../scattergl/convert").markerStyle,n=v("./scene_update"),t=v("../../constants/numerical").BADNUM,i=v("../scattergl/constants").TOO_MANY_POINTS;ie.exports=function(r,g){var l,y,A,T,M,o,s=g.dimensions,b=g._length,x={},S=x.cdata=[],p=x.data=[],w=g._visibleDims=[];function f(R,z){for(var O=R.makeCalcdata({v:z.values,vcalendar:g.calendar},"v"),I=0;I<O.length;I++)O[I]=O[I]===t?NaN:O[I];S.push(O),p.push("log"===R.type?_.simpleMap(O,R.c2l):O)}for(l=0;l<s.length;l++)if((A=s[l]).visible){if(T=k.getFromId(r,g._diag[l][0]),M=k.getFromId(r,g._diag[l][1]),T&&M&&T.type!==M.type){_.log("Skipping splom dimension "+l+" with conflicting axis types");continue}T?(f(T,A),M&&"category"===M.type&&(M._categories=T._categories.slice())):f(M,A),w.push(l)}for(e(r,g),_.extendFlat(x,d(g)),o=S.length*b>i?x.sizeAvg||Math.max(x.size,3):m(g,b),y=0;y<w.length;y++)A=s[l=w[y]],T=k.getFromId(r,g._diag[l][0])||{},M=k.getFromId(r,g._diag[l][1])||{},E(r,g,T,M,S[y],S[y],o);var C=n(r,g);return C.matrix||(C.matrix=!0),C.matrixOptions=x,C.selectedOptions=c(g,g.selected),C.unselectedOptions=c(g,g.unselected),[{x:!1,y:!1,t:{},trace:g}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../scatter/calc":928,"../scatter/colorscale_calc":930,"../scattergl/constants":982,"../scattergl/convert":983,"./scene_update":1042}],1036:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../plots/array_container_defaults"),m=v("./attributes"),E=v("../scatter/subtypes"),e=v("../scatter/marker_defaults"),c=v("../parcoords/merge_length"),d=v("../scattergl/helpers").isOpenSymbol;function n(i,a){function r(s,b){return _.coerce(i,a,m.dimensions,s,b)}r("label");var g=r("values");g&&g.length?r("visible"):a.visible=!1,r("axis.type"),r("axis.matches")}ie.exports=function(a,r,g,s){function b(T,M){return _.coerce(a,r,m,T,M)}var x=k(a,r,{name:"dimensions",handleItemDefaults:n}),S=b("diagonal.visible"),p=b("showupperhalf"),w=b("showlowerhalf");if(c(r,x,"values")&&(S||p||w)){b("text"),b("hovertext"),b("hovertemplate"),b("xhoverformat"),b("yhoverformat"),e(a,r,g,s,b);var y=d(r.marker.symbol),A=E.isBubble(r);b("marker.line.width",y||A?1:0),function t(i,a,r,g){var w,l,s=a.dimensions,b=s.length,x=a.showupperhalf,S=a.showlowerhalf,p=a.diagonal.visible,y=new Array(b),A=new Array(b);for(w=0;w<b;w++){var T=w?w+1:"";y[w]="x"+T,A[w]="y"+T}var M=g("xaxes",y),f=g("yaxes",A),u=a._diag=new Array(b);a._xaxes={},a._yaxes={};var h=[],o=[];function C(X,oe,se,ne){if(X){var W=X.charAt(0),G=r._splomAxes[W];if(a["_"+W+"axes"][X]=1,ne.push(X),!(X in G)){var $=G[X]={};se&&($.label=se.label||"",se.visible&&se.axis&&(se.axis.type&&($.type=se.axis.type),se.axis.matches&&($.matches=oe)))}}}var R=!p&&!S,z=!p&&!x;for(a._axesDim={},w=0;w<b;w++){var O=s[w],I=0===w,F=w===b-1,D=I&&R||F&&z?void 0:M[w],N=I&&z||F&&R?void 0:f[w];C(D,N,O,h),C(N,D,O,o),u[w]=[D,N],a._axesDim[D]=w,a._axesDim[N]=w}for(w=0;w<h.length;w++)for(l=0;l<o.length;l++)(w>l&&x||w<l&&S||w===l&&(p||!S||!x))&&(r._splomSubplots[h[w]+o[l]]=1);(!S||!p&&x&&S)&&(r._splomGridDflt.xside="bottom",r._splomGridDflt.yside="left")}(0,r,s,b),_.coerceSelectionMarkerOpacity(r,b)}else r.visible=!1}},{"../../lib":503,"../../plots/array_container_defaults":549,"../parcoords/merge_length":898,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scattergl/helpers":987,"./attributes":1032}],1037:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../scatter/colorscale_calc"),m=v("../scattergl/convert").markerStyle;ie.exports=function(e,c){var d=c.trace,n=e._fullLayout._splomScenes[d.uid];if(n){k(e,d),_.extendFlat(n.matrixOptions,m(d));var t=_.extendFlat({},n.matrixOptions,n.viewOpts);n.matrix.update(t,null)}}},{"../../lib":503,"../scatter/colorscale_calc":930,"../scattergl/convert":983}],1038:[function(v,ie,ae){"use strict";ae.getDimIndex=function(k,m){for(var E=m._id,c={x:0,y:1}[E.charAt(0)],d=k._visibleDims,n=0;n<d.length;n++)if(k._diag[d[n]][c]===E)return n;return!1}},{}],1039:[function(v,ie,ae){"use strict";var _=v("./helpers"),k=v("../scattergl/hover").calcHover;ie.exports={hoverPoints:function m(E,e,c){var n=E.cd[0].trace,i=E.scene.matrixOptions.cdata,a=E.xa,r=E.ya,g=a.c2p(e),s=r.c2p(c),b=E.distance,x=_.getDimIndex(n,a),S=_.getDimIndex(n,r);if(!1===x||!1===S)return[E];for(var l,y,p=i[x],w=i[S],A=b,T=0;T<p.length;T++){var f=w[T],u=a.c2p(p[T])-g,h=r.c2p(f)-s,o=Math.sqrt(u*u+h*h);o<A&&(A=y=o,l=T)}return E.index=l,E.distance=A,E.dxy=y,void 0===l?[E]:[k(E,p,w,n)]}}},{"../scattergl/hover":988,"./helpers":1038}],1040:[function(v,ie,ae){"use strict";var _=v("./base_index");_.basePlotModule=v("./base_plot"),ie.exports=_},{"./base_index":1033,"./base_plot":1034}],1041:[function(v,ie,ae){"use strict";var _=v("regl-splom"),k=v("../../lib"),m=v("../../plots/cartesian/axis_ids"),E=v("../../components/dragelement/helpers").selectMode;function e(c,d){var S,p,w,l,y,n=c._fullLayout,t=n._size,i=d.trace,a=d.t,r=n._splomScenes[i.uid],g=r.matrixOptions,s=g.cdata,b=n._glcanvas.data()[0].regl,x=n.dragmode;if(0!==s.length){g.lower=i.showupperhalf,g.upper=i.showlowerhalf,g.diagonal=i.diagonal.visible;var A=i._visibleDims,T=s.length,M=r.viewOpts={};for(M.ranges=new Array(T),M.domains=new Array(T),y=0;y<A.length;y++){w=A[y];var f=M.ranges[y]=new Array(4),u=M.domains[y]=new Array(4);(S=m.getFromId(c,i._diag[w][0]))&&(f[0]=S._rl[0],f[2]=S._rl[1],u[0]=S.domain[0],u[2]=S.domain[1]),(p=m.getFromId(c,i._diag[w][1]))&&(f[1]=p._rl[0],f[3]=p._rl[1],u[1]=p.domain[0],u[3]=p.domain[1])}var h=c._context.plotGlPixelRatio,o=t.l*h,C=t.b*h;M.viewport=[o,C,t.w*h+o,t.h*h+C],!0===r.matrix&&(r.matrix=_(b));var O=n.clickmode.indexOf("select")>-1,F=!0;if(E(x)||i.selectedpoints||O){var D=i._length;if(i.selectedpoints){r.selectBatch=i.selectedpoints;var N=i.selectedpoints,U={};for(w=0;w<N.length;w++)U[N[w]]=!0;var X=[];for(w=0;w<D;w++)U[w]||X.push(w);r.unselectBatch=X}var oe=a.xpx=new Array(T),se=a.ypx=new Array(T);for(y=0;y<A.length;y++){if(S=m.getFromId(c,i._diag[w=A[y]][0]))for(oe[y]=new Array(D),l=0;l<D;l++)oe[y][l]=S.c2p(s[y][l]);if(p=m.getFromId(c,i._diag[w][1]))for(se[y]=new Array(D),l=0;l<D;l++)se[y][l]=p.c2p(s[y][l])}if(r.selectBatch.length||r.unselectBatch.length){var ne=k.extendFlat({},g,r.unselectedOptions,M),W=k.extendFlat({},g,r.selectedOptions,M);r.matrix.update(ne,W),F=!1}}else a.xpx=a.ypx=null;if(F){var G=k.extendFlat({},g,M);r.matrix.update(G,null)}}}ie.exports=function(d,n,t){if(t.length)for(var i=0;i<t.length;i++)e(d,t[i][0])}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../plots/cartesian/axis_ids":558,"regl-splom":282}],1042:[function(v,ie,ae){"use strict";var _=v("../../lib");ie.exports=function(m,E){var e=m._fullLayout,c=E.uid,d=e._splomScenes;d||(d=e._splomScenes={});var n={dirty:!0,selectBatch:[],unselectBatch:[]},i=d[E.uid];return i||((i=d[c]=_.extendFlat({},n,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){i.matrix&&i.matrix.draw&&(i.selectBatch.length||i.unselectBatch.length?i.matrix.draw(i.unselectBatch,i.selectBatch):i.matrix.draw()),i.dirty=!1},i.destroy=function(){i.matrix&&i.matrix.destroy&&i.matrix.destroy(),i.matrixOptions=null,i.selectBatch=null,i.unselectBatch=null,i=null}),i.dirty||_.extendFlat(i,n),i}},{"../../lib":503}],1043:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../scatter/subtypes"),m=v("./helpers");ie.exports=function(e,c){var d=e.cd,n=d[0].trace,t=d[0].t,i=e.scene,a=i.matrixOptions.cdata,r=e.xaxis,g=e.yaxis,s=[];if(!i)return s;var b=!k.hasMarkers(n)&&!k.hasText(n);if(!0!==n.visible||b)return s;var x=m.getDimIndex(n,r),S=m.getDimIndex(n,g);if(!1===x||!1===S)return s;var p=t.xpx[x],w=t.ypx[S],l=a[x],y=a[S],A=[],T=[];if(!1!==c&&!c.degenerate)for(var M=0;M<l.length;M++)c.contains([p[M],w[M]],null,M,e)?(A.push(M),s.push({pointNumber:M,x:l[M],y:y[M]})):T.push(M);var f=i.matrixOptions;return A.length||T.length?!i.selectBatch.length&&!i.unselectBatch.length&&i.matrix.update(i.unselectedOptions,_.extendFlat({},f,i.selectedOptions,i.viewOpts)):i.matrix.update(f,null),i.selectBatch=A,i.unselectBatch=T,s}},{"../../lib":503,"../scatter/subtypes":952,"./helpers":1038}],1044:[function(v,ie,ae){"use strict";var _=v("../../components/colorscale/attributes"),k=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=v("../../plots/template_attributes").hovertemplateAttrs,E=v("../mesh3d/attributes"),e=v("../../plots/attributes"),c=v("../../lib/extend").extendFlat,d={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:m({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:c({},e.showlegend,{dflt:!1})};c(d,_("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){d[t]=E[t]}),d.hoverinfo=c({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),d.transforms=void 0,ie.exports=d},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],1045:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../components/colorscale/calc");function E(d){var r,g,s,A,T,M,f,u,h,o,C,R,n=d._x,t=d._y,i=d._z,a=d._len,b=-1/0,x=1/0,S=-1/0,p=1/0,w=-1/0,l=1/0,y="";for(a&&(f=n[0],h=t[0],C=i[0]),a>1&&(u=n[a-1],o=t[a-1],R=i[a-1]),r=0;r<a;r++)b=Math.max(b,n[r]),x=Math.min(x,n[r]),S=Math.max(S,t[r]),p=Math.min(p,t[r]),w=Math.max(w,i[r]),l=Math.min(l,i[r]),!A&&n[r]!==f&&(A=!0,y+="x"),!T&&t[r]!==h&&(T=!0,y+="y"),!M&&i[r]!==C&&(M=!0,y+="z");A||(y+="x"),T||(y+="y"),M||(y+="z");var z=e(d._x),O=e(d._y),I=e(d._z);y=(y=(y=y.replace("x",(f>u?"-":"+")+"x")).replace("y",(h>o?"-":"+")+"y")).replace("z",(C>R?"-":"+")+"z");var F=function(){a=0,z=[],O=[],I=[]};(!a||a<z.length*O.length*I.length)&&F();var D=function(re){return"x"===re?n:"y"===re?t:i},N=function(re){return"x"===re?z:"y"===re?O:I},U=function(re){return re[a-1]<re[0]?-1:1},X=D(y[1]),oe=D(y[3]),se=D(y[5]),ne=N(y[1]).length,W=N(y[3]).length,G=N(y[5]).length,$=!1,V=function(re,le,ge){return ne*(W*re+le)+ge},H=U(D(y[1])),q=U(D(y[3])),K=U(D(y[5]));for(r=0;r<G-1;r++){for(g=0;g<W-1;g++){for(s=0;s<ne-1;s++){var Y=V(r,g,s),te=V(r,g,s+1),J=V(r,g+1,s),j=V(r+1,g,s);if(X[Y]*H<X[te]*H&&oe[Y]*q<oe[J]*q&&se[Y]*K<se[j]*K||($=!0),$)break}if($)break}if($)break}return $&&(_.warn("Encountered arbitrary coordinates! Unable to input data grid."),F()),{xMin:x,yMin:p,zMin:l,xMax:b,yMax:S,zMax:w,Xs:z,Ys:O,Zs:I,len:a,fill:y}}function e(d){return _.distinctVals(d).vals}function c(d,n){if(void 0===n&&(n=d.length),_.isTypedArray(d))return d.subarray(0,n);for(var t=[],i=0;i<n;i++)t[i]=+d[i];return t}ie.exports={calc:function m(d,n){n._len=Math.min(n.u.length,n.v.length,n.w.length,n.x.length,n.y.length,n.z.length),n._u=c(n.u,n._len),n._v=c(n.v,n._len),n._w=c(n.w,n._len),n._x=c(n.x,n._len),n._y=c(n.y,n._len),n._z=c(n.z,n._len);var t=E(n);n._gridFill=t.fill,n._Xs=t.Xs,n._Ys=t.Ys,n._Zs=t.Zs,n._len=t.len;var a,r,g,i=0;n.starts&&(a=c(n.starts.x||[]),r=c(n.starts.y||[]),g=c(n.starts.z||[]),i=Math.min(a.length,r.length,g.length)),n._startsX=a||[],n._startsY=r||[],n._startsZ=g||[];var x,s=0,b=1/0;for(x=0;x<n._len;x++){var S=n._u[x],p=n._v[x],w=n._w[x],l=Math.sqrt(S*S+p*p+w*w);s=Math.max(s,l),b=Math.min(b,l)}for(k(d,n,{vals:[b,s],containerStr:"",cLetter:"c"}),x=0;x<i;x++){var y=a[x];t.xMax=Math.max(t.xMax,y),t.xMin=Math.min(t.xMin,y);var A=r[x];t.yMax=Math.max(t.yMax,A),t.yMin=Math.min(t.yMin,A);var T=g[x];t.zMax=Math.max(t.zMax,T),t.zMin=Math.min(t.zMin,T)}n._slen=i,n._normMax=s,n._xbnds=[t.xMin,t.xMax],n._ybnds=[t.yMin,t.yMax],n._zbnds=[t.zMin,t.zMax]},filter:c,processGrid:E}},{"../../components/colorscale/calc":374,"../../lib":503}],1046:[function(v,ie,ae){"use strict";var _=v("../../../stackgl_modules").gl_streamtube3d,k=_.createTubeMesh,m=v("../../lib"),E=v("../../lib/gl_format_color").parseColorScale,e=v("../../components/colorscale").extractOpts,c=v("../../plots/gl3d/zip3"),d={xaxis:0,yaxis:1,zaxis:2};function n(s,b){this.scene=s,this.uid=b,this.mesh=null,this.data=null}var t=n.prototype;function i(s){var b=s.length;return b>2?s.slice(1,b-1):2===b?[(s[0]+s[1])/2]:s}function a(s){var b=s.length;return 1===b?[.5,.5]:[s[1]-s[0],s[b-1]-s[b-2]]}function r(s,b){var x=s.fullSceneLayout,S=s.dataScale,p=b._len,w={};function l(W,G){var $=x[G],V=S[d[G]];return m.simpleMap(W,function(H){return $.d2l(H)*V})}if(w.vectors=c(l(b._u,"xaxis"),l(b._v,"yaxis"),l(b._w,"zaxis"),p),!p)return{positions:[],cells:[]};var y=l(b._Xs,"xaxis"),A=l(b._Ys,"yaxis"),T=l(b._Zs,"zaxis");if(w.meshgrid=[y,A,T],w.gridFill=b._gridFill,b._slen)w.startingPositions=c(l(b._startsX,"xaxis"),l(b._startsY,"yaxis"),l(b._startsZ,"zaxis"));else{for(var f=A[0],u=i(y),h=i(T),o=new Array(u.length*h.length),C=0,R=0;R<u.length;R++)for(var z=0;z<h.length;z++)o[C++]=[u[R],f,h[z]];w.startingPositions=o}w.colormap=E(b),w.tubeSize=b.sizeref,w.maxLength=b.maxdisplayed;var O=l(b._xbnds,"xaxis"),I=l(b._ybnds,"yaxis"),F=l(b._zbnds,"zaxis"),D=a(y),N=a(A),U=a(T),oe=_(w,[[O[0]-D[0],I[0]-N[0],F[0]-U[0]],[O[1]+D[1],I[1]+N[1],F[1]+U[1]]]),se=e(b);oe.vertexIntensityBounds=[se.min/b._normMax,se.max/b._normMax];var ne=b.lightposition;return oe.lightPosition=[ne.x,ne.y,ne.z],oe.ambient=b.lighting.ambient,oe.diffuse=b.lighting.diffuse,oe.specular=b.lighting.specular,oe.roughness=b.lighting.roughness,oe.fresnel=b.lighting.fresnel,oe.opacity=b.opacity,b._pad=oe.tubeScale*b.sizeref*2,oe}t.handlePick=function(s){var b=this.scene.fullSceneLayout,x=this.scene.dataScale;function S(l,y){var T=x[d[y]];return b[y].l2c(l)/T}if(s.object===this.mesh){var p=s.data.position,w=s.data.velocity;return s.traceCoordinate=[S(p[0],"xaxis"),S(p[1],"yaxis"),S(p[2],"zaxis"),S(w[0],"xaxis"),S(w[1],"yaxis"),S(w[2],"zaxis"),s.data.intensity*this.data._normMax,s.data.divergence],s.textLabel=this.data.hovertext||this.data.text,!0}},t.update=function(s){this.data=s;var b=r(this.scene,s);this.mesh.update(b)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ie.exports=function g(s,b){var x=s.glplot.gl,S=r(s,b),p=k(x,S),w=new n(s,b.uid);return w.mesh=p,w.data=b,p._trace=w,s.glplot.add(p),w}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],1047:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../components/colorscale/defaults"),m=v("./attributes");ie.exports=function(e,c,d,n){function t(x,S){return _.coerce(e,c,m,x,S)}var i=t("u"),a=t("v"),r=t("w"),g=t("x"),s=t("y"),b=t("z");i&&i.length&&a&&a.length&&r&&r.length&&g&&g.length&&s&&s.length&&b&&b.length?(t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(e,c,n,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),c._length=null):c.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":1044}],1048:[function(v,ie,ae){"use strict";ie.exports={moduleType:"trace",name:"streamtube",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:v("./calc").calc,plot:v("./convert"),eventData:function(_,k){return _.tubex=_.x,_.tubey=_.y,_.tubez=_.z,_.tubeu=k.traceCoordinate[3],_.tubev=k.traceCoordinate[4],_.tubew=k.traceCoordinate[5],_.norm=k.traceCoordinate[6],_.divergence=k.traceCoordinate[7],delete _.x,delete _.y,delete _.z,_},meta:{}}},{"../../plots/gl3d":598,"./attributes":1044,"./calc":1045,"./convert":1046,"./defaults":1047}],1049:[function(v,ie,ae){"use strict";var _=v("../../plots/attributes"),k=v("../../plots/template_attributes").hovertemplateAttrs,m=v("../../plots/template_attributes").texttemplateAttrs,E=v("../../components/colorscale/attributes"),e=v("../../plots/domain").attributes,c=v("../pie/attributes"),d=v("./constants"),n=v("../../lib/extend").extendFlat;ie.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:n({colors:{valType:"data_array",editType:"calc"},line:{color:n({},c.marker.line.color,{dflt:null}),width:n({},c.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},E("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:c.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:m({editType:"plot"},{keys:d.eventDataKeys.concat(["label","value"])}),hovertext:c.hovertext,hoverinfo:n({},_.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:k({},{keys:d.eventDataKeys}),textfont:c.textfont,insidetextorientation:c.insidetextorientation,insidetextfont:c.insidetextfont,outsidetextfont:n({},c.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:c.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"./constants":1052}],1050:[function(v,ie,ae){"use strict";var _=v("../../plots/plots");ae.name="sunburst",ae.plot=function(k,m,E,e){_.plotBasePlot(ae.name,k,m,E,e)},ae.clean=function(k,m,E,e){_.cleanBasePlot(ae.name,k,m,E,e)}},{"../../plots/plots":619}],1051:[function(v,ie,ae){"use strict";var _=v("d3-hierarchy"),k=v("fast-isnumeric"),m=v("../../lib"),E=v("../../components/colorscale").makeColorScaleFuncFromTrace,e=v("../pie/calc").makePullColorFn,c=v("../pie/calc").generateExtendedColors,d=v("../../components/colorscale").calc,n=v("../../constants/numerical").ALMOST_EQUAL,t={},i={},a={};function r(g,s,b){var x=0,S=g.children;if(S){for(var p=S.length,w=0;w<p;w++)x+=r(S[w],s,b);b.branches&&x++}else b.leaves&&x++;return g.value=g.data.data.value=x,s._values||(s._values=[]),s._values[g.data.data.i]=x,x}ae.calc=function(g,s){var o,C,R,oe,H,q,b=g._fullLayout,x=s.ids,S=m.isArrayOrTypedArray(x),p=s.labels,w=s.parents,l=s.values,y=m.isArrayOrTypedArray(l),A=[],T={},M={},u=function(H){return H||"number"==typeof H},h=function(H){return!y||k(l[H])&&l[H]>=0};S?(o=Math.min(x.length,w.length),C=function(H){return u(x[H])&&h(H)},R=function(H){return String(x[H])}):(o=Math.min(p.length,w.length),C=function(H){return u(p[H])&&h(H)},R=function(H){return String(p[H])}),y&&(o=Math.min(o,l.length));for(var z=0;z<o;z++)if(C(z)){var O=R(z),I=u(w[z])?String(w[z]):"",F={i:z,id:O,pid:I,label:u(p[z])?String(p[z]):""};y&&(F.v=+l[z]),A.push(F),q=O,T[H=I]?T[H].push(q):T[H]=[q],M[q]=1}if(T[""]){if(T[""].length>1){for(var U=m.randstr(),X=0;X<A.length;X++)""===A[X].pid&&(A[X].pid=U);A.unshift({hasMultipleRoots:!0,id:U,pid:"",label:""})}}else{var N,D=[];for(N in T)M[N]||D.push(N);if(1!==D.length)return m.warn(["Multiple implied roots, cannot build",s.type,"hierarchy of",s.name+".","These roots include:",D.join(", ")].join(" "));A.unshift({hasImpliedRoot:!0,id:N=D[0],pid:"",label:N})}try{oe=_.stratify().id(function(H){return H.id}).parentId(function(H){return H.pid})(A)}catch(H){return m.warn(["Failed to build",s.type,"hierarchy of",s.name+".","Error:",H.message].join(" "))}var se=_.hierarchy(oe),ne=!1;if(y)switch(s.branchvalues){case"remainder":se.sum(function(H){return H.data.v});break;case"total":se.each(function(H){var q=H.data.data,K=q.v;if(H.children){var Y=H.children.reduce(function(te,J){return te+J.data.data.v},0);if((q.hasImpliedRoot||q.hasMultipleRoots)&&(K=Y),K<Y*n)return ne=!0,m.warn(["Total value for node",H.data.data.id,"of",s.name,"is smaller than the sum of its children.","\nparent value =",K,"\nchildren sum =",Y].join(" "))}H.value=K})}else r(se,s,{branches:-1!==s.count.indexOf("branches"),leaves:-1!==s.count.indexOf("leaves")});if(!ne){s.sort&&se.sort(function(H,q){return q.value-H.value});var W,G,$=s.marker.colors||[];return s._hasColorscale?(!!$.length||($=y?s.values:s._values),d(g,s,{vals:$,containerStr:"marker",cLetter:"c"}),G=E(s.marker)):W=e(b["_"+s.type+"colormap"]),se.each(function(H){var q=H.data.data;q.color=s._hasColorscale?G($[q.i]):W($[q.i],q.id)}),A[0].hierarchy=se,A}},ae._runCrossTraceCalc=function(g,s){var b=s._fullLayout,x=s.calcdata,S=b[g+"colorway"],p=b["_"+g+"colormap"];b["extend"+g+"colors"]&&(S=c(S,"icicle"===g?a:"treemap"===g?i:t));var l,w=0;function y(f){var u=f.data.data,h=u.id;!1===u.color&&(p[h]?u.color=p[h]:f.parent?f.parent.parent?u.color=f.parent.data.data.color:(p[h]=u.color=S[w%S.length],w++):u.color=l)}for(var A=0;A<x.length;A++){var M=x[A][0];M.trace.type===g&&M.hierarchy&&(l=M.trace.root.color,M.hierarchy.each(y))}},ae.crossTraceCalc=function(g){return ae._runCrossTraceCalc("sunburst",g)}},{"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../pie/calc":903,"d3-hierarchy":115,"fast-isnumeric":190}],1052:[function(v,ie,ae){"use strict";ie.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1053:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./attributes"),m=v("../../plots/domain").defaults,E=v("../bar/defaults").handleText,e=v("../../components/colorscale"),c=e.hasColorscale,d=e.handleDefaults;ie.exports=function(t,i,a,r){function g(y,A){return _.coerce(t,i,k,y,A)}var s=g("labels"),b=g("parents");if(s&&s.length&&b&&b.length){var x=g("values");g(x&&x.length?"branchvalues":"count"),g("level"),g("maxdepth"),g("marker.line.width")&&g("marker.line.color",r.paper_bgcolor),g("marker.colors");var p=i._hasColorscale=c(t,"marker","colors")||(t.marker||{}).coloraxis;p&&d(t,i,r,g,{prefix:"marker.",cLetter:"c"}),g("leaf.opacity",p?1:.7);var w=g("text");g("texttemplate"),i.texttemplate||g("textinfo",Array.isArray(w)?"text+label":"label"),g("hovertext"),g("hovertemplate"),E(t,i,r,g,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),g("insidetextorientation"),g("sort"),g("rotation"),g("root.color"),m(i,r,g),i._length=null}else i.visible=!1}},{"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":1049}],1054:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../registry"),m=v("../../components/fx/helpers").appendArrayPointValue,E=v("../../components/fx"),e=v("../../lib"),c=v("../../lib/events"),d=v("./helpers"),t=v("../pie/helpers").formatPieValue;function i(a,r,g){for(var s=a.data.data,b={curveNumber:r.index,pointNumber:s.i,data:r._input,fullData:r},x=0;x<g.length;x++){var S=g[x];S in a&&(b[S]=a[S])}return"parentString"in a&&!d.isHierarchyRoot(a)&&(b.parent=a.parentString),m(b,r,s.i),b}ie.exports=function(r,g,s,b,x){var S=b[0],p=S.trace,w=S.hierarchy,l="sunburst"===p.type,y="treemap"===p.type||"icicle"===p.type;"_hasHoverLabel"in p||(p._hasHoverLabel=!1),"_hasHoverEvent"in p||(p._hasHoverEvent=!1);r.on("mouseover",function(f){var u=s._fullLayout;if(!s._dragging&&!1!==u.hovermode){var U,h=s._fullData[p.index],o=f.data.data,C=o.i,R=d.isHierarchyRoot(f),z=d.getParent(w,f),O=d.getValue(f),I=function(te){return e.castOption(h,C,te)},F=I("hovertemplate"),D=E.castHoverinfo(h,u,C),N=u.separators;if(F||D&&"none"!==D&&"skip"!==D){var X,oe;l&&(X=S.cx+f.pxmid[0]*(1-f.rInscribed),oe=S.cy+f.pxmid[1]*(1-f.rInscribed)),y&&(X=f._hoverX,oe=f._hoverY);var se={},ne=[],W=[],G=function(te){return-1!==ne.indexOf(te)};D&&(ne="all"===D?h._module.attributes.hoverinfo.flags:D.split("+")),se.label=o.label,G("label")&&se.label&&W.push(se.label),o.hasOwnProperty("v")&&(se.value=o.v,se.valueLabel=t(se.value,N),G("value")&&W.push(se.valueLabel)),se.currentPath=f.currentPath=d.getPath(f.data),G("current path")&&!R&&W.push(se.currentPath);var $,V=[],H=function(){-1===V.indexOf($)&&(W.push($),V.push($))};se.percentParent=f.percentParent=O/d.getValue(z),se.parent=f.parentString=d.getPtLabel(z),G("percent parent")&&($=d.formatPercent(se.percentParent,N)+" of "+se.parent,H()),se.percentEntry=f.percentEntry=O/d.getValue(g),se.entry=f.entry=d.getPtLabel(g),G("percent entry")&&!R&&!f.onPathbar&&($=d.formatPercent(se.percentEntry,N)+" of "+se.entry,H()),se.percentRoot=f.percentRoot=O/d.getValue(w),se.root=f.root=d.getPtLabel(w),G("percent root")&&!R&&($=d.formatPercent(se.percentRoot,N)+" of "+se.root,H()),se.text=I("hovertext")||I("text"),G("text")&&e.isValidTextValue($=se.text)&&W.push($),U=[i(f,h,x.eventDataKeys)];var q={trace:h,y:oe,_x0:f._x0,_x1:f._x1,_y0:f._y0,_y1:f._y1,text:W.join("<br>"),name:F||G("name")?h.name:void 0,color:I("hoverlabel.bgcolor")||o.color,borderColor:I("hoverlabel.bordercolor"),fontFamily:I("hoverlabel.font.family"),fontSize:I("hoverlabel.font.size"),fontColor:I("hoverlabel.font.color"),nameLength:I("hoverlabel.namelength"),textAlign:I("hoverlabel.align"),hovertemplate:F,hovertemplateLabels:se,eventData:U};l&&(q.x0=X-f.rInscribed*f.rpx1,q.x1=X+f.rInscribed*f.rpx1,q.idealAlign=f.pxmid[0]<0?"left":"right"),y&&(q.x=X,q.idealAlign=X<0?"left":"right");var K=[];E.loneHover(q,{container:u._hoverlayer.node(),outerContainer:u._paper.node(),gd:s,inOut_bbox:K}),U[0].bbox=K[0],p._hasHoverLabel=!0}if(y){var Y=r.select("path.surface");x.styleOne(Y,f,h,{hovered:!0})}p._hasHoverEvent=!0,s.emit("plotly_hover",{points:U||[i(f,h,x.eventDataKeys)],event:_.event})}}),r.on("mouseout",function(f){var u=s._fullLayout,h=s._fullData[p.index],o=_.select(this).datum();if(p._hasHoverEvent&&(f.originalEvent=_.event,s.emit("plotly_unhover",{points:[i(o,h,x.eventDataKeys)],event:_.event}),p._hasHoverEvent=!1),p._hasHoverLabel&&(E.loneUnhover(u._hoverlayer.node()),p._hasHoverLabel=!1),y){var C=r.select("path.surface");x.styleOne(C,o,h,{hovered:!1})}}),r.on("click",function(f){var u=s._fullLayout,h=s._fullData[p.index],o=l&&(d.isHierarchyRoot(f)||d.isLeaf(f)),C=d.getPtId(f),R=d.isEntry(f)?d.findEntryWithChild(w,C):d.findEntryWithLevel(w,C),z=d.getPtId(R),O={points:[i(f,h,x.eventDataKeys)],event:_.event};o||(O.nextLevel=z);var I=c.triggerHandler(s,"plotly_"+p.type+"click",O);if(!1!==I&&u.hovermode&&(s._hoverdata=[i(f,h,x.eventDataKeys)],E.click(s,_.event)),!o&&!1!==I&&!s._dragging&&!s._transitioning){k.call("_storeDirectGUIEdit",h,u._tracePreGUI[h.uid],{level:h.level});var F={data:[{level:z}],traces:[p.index]},D={frame:{redraw:!1,duration:x.transitionTime},transition:{duration:x.transitionTime,easing:x.transitionEasing},mode:"immediate",fromcurrent:!0};E.loneUnhover(u._hoverlayer.node()),k.call("animate",s,F,D)}})}},{"../../components/fx":406,"../../components/fx/helpers":402,"../../lib":503,"../../lib/events":492,"../../registry":638,"../pie/helpers":906,"./helpers":1055,"@plotly/d3":58}],1055:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../components/color"),m=v("../../lib/setcursor"),E=v("../pie/helpers");function d(n){return n.data.data.pid}ae.findEntryWithLevel=function(n,t){var i;return t&&n.eachAfter(function(a){if(ae.getPtId(a)===t)return i=a.copy()}),i||n},ae.findEntryWithChild=function(n,t){var i;return n.eachAfter(function(a){for(var r=a.children||[],g=0;g<r.length;g++)if(ae.getPtId(r[g])===t)return i=a.copy()}),i||n},ae.isEntry=function(n){return!n.parent},ae.isLeaf=function(n){return!n.children},ae.getPtId=function(n){return n.data.data.id},ae.getPtLabel=function(n){return n.data.data.label},ae.getValue=function(n){return n.value},ae.isHierarchyRoot=function(n){return""===d(n)},ae.setSliceCursor=function(n,t,i){var a=i.isTransitioning;if(!a){var r=n.datum();a=i.hideOnRoot&&ae.isHierarchyRoot(r)||i.hideOnLeaves&&ae.isLeaf(r)}m(n,a?null:"pointer")},ae.getInsideTextFontKey=function(n,t,i,a,r){var b=i.data.data.i;return _.castOption(t,b,((r||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+n)||_.castOption(t,b,"textfont."+n)||a.size},ae.getOutsideTextFontKey=function(n,t,i,a){var r=i.data.data.i;return _.castOption(t,r,"outsidetextfont."+n)||_.castOption(t,r,"textfont."+n)||a.size},ae.isOutsideText=function(n,t){return!n._hasColorscale&&ae.isHierarchyRoot(t)},ae.determineTextFont=function(n,t,i,a){return ae.isOutsideText(n,t)?function e(n,t,i){return{color:ae.getOutsideTextFontKey("color",n,t,i),family:ae.getOutsideTextFontKey("family",n,t,i),size:ae.getOutsideTextFontKey("size",n,t,i)}}(n,t,i):function c(n,t,i,a){var g=t.data.data,s=g.i,b=_.castOption(n,s,((a||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");return!b&&n._input.textfont&&(b=_.castOption(n._input,s,"textfont.color")),{color:b||k.contrast(g.color),family:ae.getInsideTextFontKey("family",n,t,i,a),size:ae.getInsideTextFontKey("size",n,t,i,a)}}(n,t,i,a)},ae.hasTransition=function(n){return!!(n&&n.duration>0)},ae.getMaxDepth=function(n){return n.maxdepth>=0?n.maxdepth:1/0},ae.isHeader=function(n,t){return!(ae.isLeaf(n)||n.depth===t._maxDepth-1)},ae.getParent=function(n,t){return ae.findEntryWithLevel(n,d(t))},ae.listPath=function(n,t){var i=n.parent;if(!i)return[];var a=t?[i.data[t]]:[i];return ae.listPath(i,t).concat(a)},ae.getPath=function(n){return ae.listPath(n,"label").join("/")+"/"},ae.formatValue=E.formatPieValue,ae.formatPercent=function(n,t){var i=_.formatPercent(n,0);return"0%"===i&&(i=E.formatPiePercent(n,t)),i}},{"../../components/color":366,"../../lib":503,"../../lib/setcursor":524,"../pie/helpers":906}],1056:[function(v,ie,ae){"use strict";ie.exports={moduleType:"trace",name:"sunburst",basePlotModule:v("./base_plot"),categories:[],animatable:!0,attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot").plot,style:v("./style").style,colorbar:v("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":1049,"./base_plot":1050,"./calc":1051,"./defaults":1053,"./layout_attributes":1057,"./layout_defaults":1058,"./plot":1059,"./style":1060}],1057:[function(v,ie,ae){"use strict";ie.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1058:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./layout_attributes");ie.exports=function(E,e){function c(d,n){return _.coerce(E,e,k,d,n)}c("sunburstcolorway",e.colorway),c("extendsunburstcolors")}},{"../../lib":503,"./layout_attributes":1057}],1059:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("d3-hierarchy"),m=v("d3-interpolate").interpolate,E=v("../../components/drawing"),e=v("../../lib"),c=v("../../lib/svg_text_utils"),d=v("../bar/uniform_text"),n=d.recordMinTextSize,t=d.clearMinTextSize,i=v("../pie/plot"),a=v("../pie/helpers").getRotationAngle,r=i.computeTransform,g=i.transformInsideText,s=v("./style").styleOne,b=v("../bar/style").resizeText,x=v("./fx"),S=v("./constants"),p=v("./helpers");function w(M,f,u,h){var o=M._fullLayout,C=!o.uniformtext.mode&&p.hasTransition(h),z=_.select(u).selectAll("g.slice"),O=f[0],I=O.trace,D=p.findEntryWithLevel(O.hierarchy,I.level),N=p.getMaxDepth(I),U=o._size,X=I.domain,se=U.h*(X.y[1]-X.y[0]),ne=.5*Math.min(U.w*(X.x[1]-X.x[0]),se),W=O.cx=U.l+U.w*(X.x[1]+X.x[0])/2,G=O.cy=U.t+U.h*(1-X.y[0])-se/2;if(!D)return z.remove();var $=null,V={};C&&z.each(function(ye){V[p.getPtId(ye)]={rpx0:ye.rpx0,rpx1:ye.rpx1,x0:ye.x0,x1:ye.x1,transform:ye.transform},!$&&p.isEntry(ye)&&($=ye)});var H=function l(M){return k.partition().size([2*Math.PI,M.height+1])(M)}(D).descendants(),q=D.height+1,K=0,Y=N;O.hasMultipleRoots&&p.isHierarchyRoot(D)&&(H=H.slice(1),q-=1,K=1,Y+=1),H=H.filter(function(ye){return ye.y1<=Y});var te=a(I.rotation);te&&H.forEach(function(ye){ye.x0+=te,ye.x1+=te});var J=Math.min(q,N),j=function(ye){return(ye-K)/J*ne},re=function(ye,Ce){return[ye*Math.cos(Ce),-ye*Math.sin(Ce)]},le=function(ye){return e.pathAnnulus(ye.rpx0,ye.rpx1,ye.x0,ye.x1,W,G)},ge=function(ye){return W+A(ye)[0]*(ye.transform.rCenter||0)+(ye.transform.x||0)},pe=function(ye){return G+A(ye)[1]*(ye.transform.rCenter||0)+(ye.transform.y||0)};(z=z.data(H,p.getPtId)).enter().append("g").classed("slice",!0),C?z.exit().transition().each(function(){var ye=_.select(this);ye.select("path.surface").transition().attrTween("d",function(Ke){var Ue=function de(ye){var Ue,Ce=p.getPtId(ye),Fe=V[Ce],Ke=V[p.getPtId(D)];if(Ke){var Be=(ye.x1>Ke.x1?2*Math.PI:0)+te;Ue=ye.rpx1<Ke.rpx1?{x0:ye.x0,x1:ye.x1,rpx0:0,rpx1:0}:{x0:Be,x1:Be,rpx0:ye.rpx0,rpx1:ye.rpx1}}else{var Ie,nt=p.getPtId(ye.parent);z.each(function(Zt){if(p.getPtId(Zt)===nt)return Ie=Zt});var Nt,gt=Ie.children;gt.forEach(function(Zt,Et){if(p.getPtId(Zt)===Ce)return Nt=Et});var St=gt.length,Bt=m(Ie.x0,Ie.x1);Ue={rpx0:ne,rpx1:ne,x0:Bt(Nt/St),x1:Bt((Nt+1)/St)}}return m(Fe,Ue)}(Ke);return function(Be){return le(Ue(Be))}}),ye.select("g.slicetext").attr("opacity",0)}).remove():z.exit().remove(),z.order();var xe=null;if(C&&$){var ke=p.getPtId($);z.each(function(ye){null===xe&&p.getPtId(ye)===ke&&(xe=ye.x1)})}var we=z;function Le(ye){var Fe,Ce=V[p.getPtId(ye)],Ke=ye.transform;if(Ce)Fe=Ce;else if(Fe={rpx1:ye.rpx1,transform:{textPosAngle:Ke.textPosAngle,scale:0,rotate:Ke.rotate,rCenter:Ke.rCenter,x:Ke.x,y:Ke.y}},$)if(ye.parent)if(xe){var Ue=ye.x1>xe?2*Math.PI:0;Fe.x0=Fe.x1=Ue}else e.extendFlat(Fe,De(ye));else Fe.x0=Fe.x1=te;else Fe.x0=Fe.x1=te;var Be=m(Fe.transform.textPosAngle,ye.transform.textPosAngle),Ie=m(Fe.rpx1,ye.rpx1),nt=m(Fe.x0,ye.x0),gt=m(Fe.x1,ye.x1),Nt=m(Fe.transform.scale,Ke.scale),St=m(Fe.transform.rotate,Ke.rotate),Bt=0===Ke.rCenter?3:0===Fe.transform.rCenter?1/3:1,Zt=m(Fe.transform.rCenter,Ke.rCenter);return function(wt){var at=Ie(wt),vt=nt(wt),Qe=gt(wt),Pe=function(wt){return Zt(Math.pow(wt,Bt))}(wt),rt={pxmid:re(at,(vt+Qe)/2),rpx1:at,transform:{textPosAngle:Be(wt),rCenter:Pe,x:Ke.x,y:Ke.y}};return n(I.type,Ke,o),{transform:{targetX:ge(rt),targetY:pe(rt),scale:Nt(wt),rotate:St(wt),rCenter:Pe}}}}function De(ye){var Ce=ye.parent,Fe=V[p.getPtId(Ce)],Ke={};if(Fe){var Ue=Ce.children,Be=Ue.indexOf(ye),Ie=Ue.length,nt=m(Fe.x0,Fe.x1);Ke.x0=nt(Be/Ie),Ke.x1=nt(Be/Ie)}else Ke.x0=Ke.x1=0;return Ke}C&&(we=we.transition().each("end",function(){var ye=_.select(this);p.setSliceCursor(ye,M,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),we.each(function(ye){var Ce=_.select(this),Fe=e.ensureSingle(Ce,"path","surface",function(gt){gt.style("pointer-events","all")});ye.rpx0=j(ye.y0),ye.rpx1=j(ye.y1),ye.xmid=(ye.x0+ye.x1)/2,ye.pxmid=re(ye.rpx1,ye.xmid),ye.midangle=-(ye.xmid-Math.PI/2),ye.startangle=-(ye.x0-Math.PI/2),ye.stopangle=-(ye.x1-Math.PI/2),ye.halfangle=.5*Math.min(e.angleDelta(ye.x0,ye.x1)||Math.PI,Math.PI),ye.ring=1-ye.rpx0/ye.rpx1,ye.rInscribed=function y(M){return 0===M.rpx0&&e.isFullCircle([M.x0,M.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(M.halfangle)),M.ring/2))}(ye),C?Fe.transition().attrTween("d",function(gt){var Nt=function be(ye){var Fe,Ce=V[p.getPtId(ye)],Ke={x0:ye.x0,x1:ye.x1,rpx0:ye.rpx0,rpx1:ye.rpx1};if(Ce)Fe=Ce;else if($)if(ye.parent)if(xe){var Ue=(ye.x1>xe?2*Math.PI:0)+te;Fe={x0:Ue,x1:Ue}}else e.extendFlat(Fe={rpx0:ne,rpx1:ne},De(ye));else Fe={rpx0:0,rpx1:0};else Fe={x0:te,x1:te};return m(Fe,Ke)}(gt);return function(St){return le(Nt(St))}}):Fe.attr("d",le),Ce.call(x,D,M,f,{eventDataKeys:S.eventDataKeys,transitionTime:S.CLICK_TRANSITION_TIME,transitionEasing:S.CLICK_TRANSITION_EASING}).call(p.setSliceCursor,M,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:M._transitioning}),Fe.call(s,ye,I);var Ke=e.ensureSingle(Ce,"g","slicetext"),Ue=e.ensureSingle(Ke,"text","",function(gt){gt.attr("data-notex",1)}),Be=e.ensureUniformFontSize(M,p.determineTextFont(I,ye,o.font));Ue.text(ae.formatSliceLabel(ye,D,I,f,o)).classed("slicetext",!0).attr("text-anchor","middle").call(E.font,Be).call(c.convertToTspans,M);var Ie=E.bBox(Ue.node());ye.transform=g(Ie,ye,O),ye.transform.targetX=ge(ye),ye.transform.targetY=pe(ye);var nt=function(gt,Nt){var St=gt.transform;return r(St,Nt),St.fontSize=Be.size,n(I.type,St,o),e.getTextTransform(St)};C?Ue.transition().attrTween("transform",function(gt){var Nt=Le(gt);return function(St){return nt(Nt(St),Ie)}}):Ue.attr("transform",nt(ye,Ie))})}function A(M){return function T(M,f){return[M*Math.sin(f),-M*Math.cos(f)]}(M.rpx1,M.transform.textPosAngle)}ae.plot=function(M,f,u,h){var R,z,o=M._fullLayout,C=o._sunburstlayer,O=!u,I=!o.uniformtext.mode&&p.hasTransition(u);t("sunburst",o),(R=C.selectAll("g.trace.sunburst").data(f,function(D){return D[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),R.order(),I?(h&&(z=h()),_.transition().duration(u.duration).ease(u.easing).each("end",function(){z&&z()}).each("interrupt",function(){z&&z()}).each(function(){C.selectAll("g.trace").each(function(D){w(M,D,this,u)})})):(R.each(function(D){w(M,D,this,u)}),o.uniformtext.mode&&b(M,o._sunburstlayer.selectAll(".trace"),"sunburst")),O&&R.exit().remove()},ae.formatSliceLabel=function(M,f,u,h,o){var C=u.texttemplate,R=u.textinfo;if(!(C||R&&"none"!==R))return"";var z=o.separators,I=M.data.data,F=h[0].hierarchy,D=p.isHierarchyRoot(M),N=p.getParent(F,M),U=p.getValue(M);if(!C){var ne,X=R.split("+"),oe=function(Y){return-1!==X.indexOf(Y)},se=[];if(oe("label")&&I.label&&se.push(I.label),I.hasOwnProperty("v")&&oe("value")&&se.push(p.formatValue(I.v,z)),!D){oe("current path")&&se.push(p.getPath(M.data));var W=0;oe("percent parent")&&W++,oe("percent entry")&&W++,oe("percent root")&&W++;var G=W>1;if(W){var $,V=function(Y){ne=p.formatPercent($,z),G&&(ne+=" of "+Y),se.push(ne)};oe("percent parent")&&!D&&($=U/p.getValue(N),V("parent")),oe("percent entry")&&($=U/p.getValue(f),V("entry")),oe("percent root")&&($=U/p.getValue(F),V("root"))}}return oe("text")&&(ne=e.castOption(u,I.i,"text"),e.isValidTextValue(ne)&&se.push(ne)),se.join("<br>")}var H=e.castOption(u,I.i,"texttemplate");if(!H)return"";var q={};I.label&&(q.label=I.label),I.hasOwnProperty("v")&&(q.value=I.v,q.valueLabel=p.formatValue(I.v,z)),q.currentPath=p.getPath(M.data),D||(q.percentParent=U/p.getValue(N),q.percentParentLabel=p.formatPercent(q.percentParent,z),q.parent=p.getPtLabel(N)),q.percentEntry=U/p.getValue(f),q.percentEntryLabel=p.formatPercent(q.percentEntry,z),q.entry=p.getPtLabel(f),q.percentRoot=U/p.getValue(F),q.percentRootLabel=p.formatPercent(q.percentRoot,z),q.root=p.getPtLabel(F),I.hasOwnProperty("color")&&(q.color=I.color);var K=e.castOption(u,I.i,"text");return(e.isValidTextValue(K)||""===K)&&(q.text=K),q.customdata=e.castOption(u,I.i,"customdata"),e.texttemplateString(H,q,o._d3locale,q,u._meta||{})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/style":662,"../bar/uniform_text":664,"../pie/helpers":906,"../pie/plot":910,"./constants":1052,"./fx":1054,"./helpers":1055,"./style":1060,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1060:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../components/color"),m=v("../../lib"),E=v("../bar/uniform_text").resizeText;function c(d,n,t){var i=n.data.data,a=!n.children,r=i.i,g=m.castOption(t,r,"marker.line.color")||k.defaultLine,s=m.castOption(t,r,"marker.line.width")||0;d.style("stroke-width",s).call(k.fill,i.color).call(k.stroke,g).style("opacity",a?t.leaf.opacity:null)}ie.exports={style:function e(d){var n=d._fullLayout._sunburstlayer.selectAll(".trace");E(d,n,"sunburst"),n.each(function(t){var i=_.select(this),r=t[0].trace;i.style("opacity",r.opacity),i.selectAll("path.surface").each(function(g){_.select(this).call(c,g,r)})})},styleOne:c}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],1061:[function(v,ie,ae){"use strict";var _=v("../../components/color"),k=v("../../components/colorscale/attributes"),m=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,E=v("../../plots/template_attributes").hovertemplateAttrs,e=v("../../plots/attributes"),c=v("../../lib/extend").extendFlat,d=v("../../plot_api/edit_types").overrideAll;function t(a){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:_.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:_.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var i=ie.exports=d(c({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:E(),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},k("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:c({},k.zauto,{}),zmin:c({},k.zmin,{}),zmax:c({},k.zmax,{})},hoverinfo:c({},e.hoverinfo),showlegend:c({},e.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType="calc+clearAxisTypes",i.transforms=void 0},{"../../components/color":366,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633}],1062:[function(v,ie,ae){"use strict";var _=v("../../components/colorscale/calc");ie.exports=function(m,E){_(m,E,E.surfacecolor?{vals:E.surfacecolor,containerStr:"",cLetter:"c"}:{vals:E.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],1063:[function(v,ie,ae){"use strict";var _=v("../../../stackgl_modules").gl_surface3d,k=v("../../../stackgl_modules").ndarray,m=v("../../../stackgl_modules").ndarray_linear_interpolate.d2,E=v("../heatmap/interp2d"),e=v("../heatmap/find_empties"),c=v("../../lib").isArrayOrTypedArray,d=v("../../lib/gl_format_color").parseColorScale,n=v("../../lib/str2rgbarray"),t=v("../../components/colorscale").extractOpts;function i(h,o,C){this.scene=h,this.uid=C,this.surface=o,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var a=i.prototype;a.getXat=function(h,o,C,R){var z=c(this.data.x)?c(this.data.x[0])?this.data.x[o][h]:this.data.x[h]:h;return void 0===C?z:R.d2l(z,0,C)},a.getYat=function(h,o,C,R){var z=c(this.data.y)?c(this.data.y[0])?this.data.y[o][h]:this.data.y[o]:o;return void 0===C?z:R.d2l(z,0,C)},a.getZat=function(h,o,C,R){var z=this.data.z[o][h];return null===z&&this.data.connectgaps&&this.data._interpolatedZ&&(z=this.data._interpolatedZ[o][h]),void 0===C?z:R.d2l(z,0,C)},a.handlePick=function(h){if(h.object===this.surface){var C=(h.data.index[1]-1)/this.dataScaleY-1,R=Math.max(Math.min(Math.round((h.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),z=Math.max(Math.min(Math.round(C),this.data._ylength-1),0);h.index=[R,z],h.traceCoordinate=[this.getXat(R,z),this.getYat(R,z),this.getZat(R,z)],h.dataCoordinate=[this.getXat(R,z,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(R,z,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(R,z,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var O=0;O<3;O++)null!=h.dataCoordinate[O]&&(h.dataCoordinate[O]*=this.scene.dataScale[O]);var F=this.data.hovertext||this.data.text;return h.textLabel=Array.isArray(F)&&F[z]&&void 0!==F[z][R]?F[z][R]:F||"",h.data.dataCoordinate=h.dataCoordinate.slice(),this.surface.highlight(h.data),this.scene.glplot.spikes.position=h.dataCoordinate,!0}};var g=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function s(h,o){if(h<o)return 0;for(var C=0;0===Math.floor(h%o);)h/=o,C++;return C}function b(h){for(var o=[],C=0;C<g.length;C++)o.push(s(h,g[C]));return o}function x(h){for(var o=b(h),C=h,R=0;R<g.length;R++)if(o[R]>0){C=g[R];break}return C}function S(h,o){if(!(h<1||o<1)){for(var C=b(h),R=b(o),z=1,O=0;O<g.length;O++)z*=Math.pow(g[O],Math.max(C[O],R[O]));return z}}a.calcXnums=function(h){var o,C=[];for(o=1;o<h;o++){var R=this.getXat(o-1,0),z=this.getXat(o,0);C[o-1]=z!==R&&null!=R&&null!=z?Math.abs(z-R):0}var O=0;for(o=1;o<h;o++)O+=C[o-1];for(o=1;o<h;o++)C[o-1]=0===C[o-1]?1:Math.round(O/C[o-1]);return C},a.calcYnums=function(h){var o,C=[];for(o=1;o<h;o++){var R=this.getYat(0,o-1),z=this.getYat(0,o);C[o-1]=z!==R&&null!=R&&null!=z?Math.abs(z-R):0}var O=0;for(o=1;o<h;o++)O+=C[o-1];for(o=1;o<h;o++)C[o-1]=0===C[o-1]?1:Math.round(O/C[o-1]);return C};var w=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],l=w[9],y=w[13];function A(h,o,C){var R=C[8]+C[2]*o[0]+C[5]*o[1];return h[0]=(C[6]+C[0]*o[0]+C[3]*o[1])/R,h[1]=(C[7]+C[1]*o[0]+C[4]*o[1])/R,h}function T(h,o,C){return function M(h,o,C,R){for(var z=[0,0],O=h.shape[0],I=h.shape[1],F=0;F<O;F++)for(var D=0;D<I;D++)C(z,[F,D],R),h.set(F,D,m(o,z[0],z[1]));return h}(h,o,A,C),h}function f(h,o){for(var C=!1,R=0;R<h.length;R++)if(o===h[R]){C=!0;break}!1===C&&h.push(o)}a.estimateScale=function(h,o){for(var R=1+function p(h){if(0!==h.length){for(var o=1,C=0;C<h.length;C++)o=S(o,h[C]);return o}}(0===o?this.calcXnums(h):this.calcYnums(h));R<l;)R*=2;for(;R>y;)R--,R/=x(R),++R<l&&(R=y);var z=Math.round(R/h);return z>1?z:1},a.refineCoords=function(h){for(var o=this.dataScaleX,C=this.dataScaleY,R=h[0].shape[0],z=h[0].shape[1],O=0|Math.floor(h[0].shape[0]*o+1),I=0|Math.floor(h[0].shape[1]*C+1),F=1+R+1,D=1+z+1,N=k(new Float32Array(F*D),[F,D]),U=[1/o,0,0,0,1/C,0,0,0,1],X=0;X<h.length;++X){this.surface.padField(N,h[X]);var oe=k(new Float32Array(O*I),[O,I]);T(oe,N,U),h[X]=oe}},a.setContourLevels=function(){var R,z,h=[[],[],[]],o=[!1,!1,!1],C=!1;for(R=0;R<3;++R)if(this.showContour[R]&&(C=!0,this.contourSize[R]>0&&null!==this.contourStart[R]&&null!==this.contourEnd[R]&&this.contourEnd[R]>this.contourStart[R]))for(o[R]=!0,z=this.contourStart[R];z<this.contourEnd[R];z+=this.contourSize[R])f(h[R],z*this.scene.dataScale[R]);if(C){var I=[[],[],[]];for(R=0;R<3;++R)this.showContour[R]&&(I[R]=o[R]?h[R]:this.scene.contourLevels[R]);this.surface.update({levels:I})}},a.update=function(h){var o=this.scene,C=o.fullSceneLayout,R=this.surface,z=d(h),O=o.dataScale,I=h.z[0].length,F=h._ylength,D=o.contourLevels;this.data=h;var N,U,X,oe,se=[];for(N=0;N<3;N++)for(se[N]=[],U=0;U<I;U++)se[N][U]=[];for(U=0;U<I;U++)for(X=0;X<F;X++)se[0][U][X]=this.getXat(U,X,h.xcalendar,C.xaxis),se[1][U][X]=this.getYat(U,X,h.ycalendar,C.yaxis),se[2][U][X]=this.getZat(U,X,h.zcalendar,C.zaxis);if(h.connectgaps)for(h._emptypoints=e(se[2]),E(se[2],h._emptypoints),h._interpolatedZ=[],U=0;U<I;U++)for(h._interpolatedZ[U]=[],X=0;X<F;X++)h._interpolatedZ[U][X]=se[2][U][X];for(N=0;N<3;N++)for(U=0;U<I;U++)for(X=0;X<F;X++)null==(oe=se[N][U][X])?se[N][U][X]=NaN:oe=se[N][U][X]*=O[N];for(N=0;N<3;N++)for(U=0;U<I;U++)for(X=0;X<F;X++)null!=(oe=se[N][U][X])&&(this.minValues[N]>oe&&(this.minValues[N]=oe),this.maxValues[N]<oe&&(this.maxValues[N]=oe));for(N=0;N<3;N++)this.objectOffset[N]=.5*(this.minValues[N]+this.maxValues[N]);for(N=0;N<3;N++)for(U=0;U<I;U++)for(X=0;X<F;X++)null!=(oe=se[N][U][X])&&(se[N][U][X]-=this.objectOffset[N]);var ne=[k(new Float32Array(I*F),[I,F]),k(new Float32Array(I*F),[I,F]),k(new Float32Array(I*F),[I,F])];for(N=0;N<3;N++)for(U=0;U<I;U++)for(X=0;X<F;X++)ne[N].set(U,X,se[N][U][X]);se=[];var W={colormap:z,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!h.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:h.opacityscale,opacity:h.opacity},G=t(h);if(W.intensityBounds=[G.min,G.max],h.surfacecolor){var $=k(new Float32Array(I*F),[I,F]);for(U=0;U<I;U++)for(X=0;X<F;X++)$.set(U,X,h.surfacecolor[X][U]);ne.push($)}else W.intensityBounds[0]*=O[2],W.intensityBounds[1]*=O[2];(y<ne[0].shape[0]||y<ne[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(ne[0].shape[0],0),this.dataScaleY=this.estimateScale(ne[0].shape[1],1),(1!==this.dataScaleX||1!==this.dataScaleY)&&this.refineCoords(ne)),h.surfacecolor&&(W.intensity=ne.pop());var V=[!0,!0,!0],H=["x","y","z"];for(N=0;N<3;++N){var q=h.contours[H[N]];V[N]=q.highlight,W.showContour[N]=q.show||q.highlight,W.showContour[N]&&(W.contourProject[N]=[q.project.x,q.project.y,q.project.z],q.show?(this.showContour[N]=!0,W.levels[N]=D[N],R.highlightColor[N]=W.contourColor[N]=n(q.color),R.highlightTint[N]=W.contourTint[N]=q.usecolormap?0:1,W.contourWidth[N]=q.width,this.contourStart[N]=q.start,this.contourEnd[N]=q.end,this.contourSize[N]=q.size):(this.showContour[N]=!1,this.contourStart[N]=null,this.contourEnd[N]=null,this.contourSize[N]=0),q.highlight&&(W.dynamicColor[N]=n(q.highlightcolor),W.dynamicWidth[N]=q.highlightwidth))}(function r(h){var o=h[0].rgb,C=h[h.length-1].rgb;return o[0]===C[0]&&o[1]===C[1]&&o[2]===C[2]&&o[3]===C[3]})(z)&&(W.vertexColor=!0),W.objectOffset=this.objectOffset,W.coords=ne,R.update(W),R.visible=h.visible,R.enableDynamic=V,R.enableHighlight=V,R.snapToData=!0,"lighting"in h&&(R.ambientLight=h.lighting.ambient,R.diffuseLight=h.lighting.diffuse,R.specularLight=h.lighting.specular,R.roughness=h.lighting.roughness,R.fresnel=h.lighting.fresnel),"lightposition"in h&&(R.lightPosition=[h.lightposition.x,h.lightposition.y,h.lightposition.z])},a.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},ie.exports=function u(h,o){var R=_({gl:h.glplot.gl}),z=new i(h,R,o.uid);return R._trace=z,z.update(o),h.glplot.add(R),z}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../heatmap/find_empties":798,"../heatmap/interp2d":801}],1064:[function(v,ie,ae){"use strict";var _=v("../../registry"),k=v("../../lib"),m=v("../../components/colorscale/defaults"),E=v("./attributes");function t(a,r,g,s){var b=s("opacityscale");"max"===b?r.opacityscale=[[0,.1],[1,1]]:"min"===b?r.opacityscale=[[0,1],[1,.1]]:"extremes"===b?r.opacityscale=function c(a,r){for(var g=[],b=0;b<32;b++){var x=b/31,S=r+(1-r)*(1-Math.pow(Math.sin(a*x*Math.PI),2));g.push([x,Math.max(0,Math.min(1,S))])}return g}(1,.1):function d(a){var r=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||0!=+a[0][0]||1!=+a[a.length-1][0])return!1;for(var g=0;g<a.length;g++){var s=a[g];if(2!==s.length||+s[0]<r)return!1;r=+s[0]}return!0}(b)||(r.opacityscale=void 0)}function i(a,r,g){r in a&&!(g in a)&&(a[g]=a[r])}ie.exports={supplyDefaults:function n(a,r,g,s){var b,x;function S(h,o){return k.coerce(a,r,E,h,o)}var p=S("x"),w=S("y"),l=S("z");if(!l||!l.length||p&&p.length<1||w&&w.length<1)r.visible=!1;else{r._xlength=Array.isArray(p)&&k.isArrayOrTypedArray(p[0])?l.length:l[0].length,r._ylength=l.length,_.getComponentMethod("calendars","handleTraceDefaults")(a,r,["x","y","z"],s),S("text"),S("hovertext"),S("hovertemplate"),S("xhoverformat"),S("yhoverformat"),S("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(h){S(h)});var A=S("surfacecolor"),T=["x","y","z"];for(b=0;b<3;++b){var M="contours."+T[b],f=S(M+".show"),u=S(M+".highlight");if(f||u)for(x=0;x<3;++x)S(M+".project."+T[x]);f&&(S(M+".color"),S(M+".width"),S(M+".usecolormap")),u&&(S(M+".highlightcolor"),S(M+".highlightwidth")),S(M+".start"),S(M+".end"),S(M+".size")}A||(i(a,"zmin","cmin"),i(a,"zmax","cmax"),i(a,"zauto","cauto")),m(a,r,s,S,{prefix:"",cLetter:"c"}),t(0,r,0,S),r._length=null}},opacityscaleDefaults:t}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":1061}],1065:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:v("./calc"),plot:v("./convert"),moduleType:"trace",name:"surface",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":1061,"./calc":1062,"./convert":1063,"./defaults":1064}],1066:[function(v,ie,ae){"use strict";var _=v("../../components/annotations/attributes"),k=v("../../lib/extend").extendFlat,m=v("../../plot_api/edit_types").overrideAll,E=v("../../plots/font_attributes"),e=v("../../plots/domain").attributes,c=v("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers;(ie.exports=m({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:c("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:k({},_.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},E({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:c("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:k({},_.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},E({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":349,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585}],1067:[function(v,ie,ae){"use strict";var _=v("../../plots/get_data").getModuleCalcData,k=v("./plot"),m="table";ae.name=m,ae.plot=function(E){var e=_(E.calcdata,m)[0];e.length&&k(E,e)},ae.clean=function(E,e,c,d){var n=d._has&&d._has(m),t=e._has&&e._has(m);n&&!t&&d._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":593,"./plot":1074}],1068:[function(v,ie,ae){"use strict";var _=v("../../lib/gup").wrap;ie.exports=function(){return _({})}},{"../../lib/gup":500}],1069:[function(v,ie,ae){"use strict";ie.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1070:[function(v,ie,ae){"use strict";var _=v("./constants"),k=v("../../lib/extend").extendFlat,m=v("fast-isnumeric");function E(r){if(Array.isArray(r)){for(var g=0,s=0;s<r.length;s++)g=Math.max(g,E(r[s]));return g}return r}function e(r,g){return r+g}function c(r){var x,g=r.slice(),s=1/0,b=0;for(x=0;x<g.length;x++)Array.isArray(g[x])||(g[x]=[g[x]]),s=Math.min(s,g[x].length),b=Math.max(b,g[x].length);if(s!==b)for(x=0;x<g.length;x++){var S=b-g[x].length;S&&(g[x]=g[x].concat(d(S)))}return g}function d(r){for(var g=new Array(r),s=0;s<r;s++)g[s]="";return g}function n(r){return r.calcdata.columns.reduce(function(g,s){return s.xIndex<r.xIndex?g+s.columnWidth:g},0)}function t(r,g){return Object.keys(r).map(function(b){return k({},r[b],{auxiliaryBlocks:g})})}function i(r,g){for(var b,s={},x=0,S=0,p={firstRowIndex:null,lastRowIndex:null,rows:[]},w=0,l=0,y=0;y<r.length;y++)p.rows.push({rowIndex:y,rowHeight:b=r[y]}),((S+=b)>=g||y===r.length-1)&&(s[x]=p,p.key=l++,p.firstRowIndex=w,p.lastRowIndex=y,p={firstRowIndex:null,lastRowIndex:null,rows:[]},x+=S,w=y+1,S=0);return s}ie.exports=function(g,s){var b=c(s.cells.values),x=function(U){return U.slice(s.header.values.length,U.length)},S=c(s.header.values);S.length&&!S[0].length&&(S[0]=[""],S=c(S));var p=S.concat(x(b).map(function(){return d((S[0]||[""]).length)})),w=s.domain,l=Math.floor(g._fullLayout._size.w*(w.x[1]-w.x[0])),y=Math.floor(g._fullLayout._size.h*(w.y[1]-w.y[0])),A=s.header.values.length?p[0].map(function(){return s.header.height}):[_.emptyHeaderHeight],T=b.length?b[0].map(function(){return s.cells.height}):[],M=A.reduce(e,0),h=i(T,y-M+_.uplift),C=t(i(A,M),[]),R=t(h,C),z={},O=s._fullInput.columnorder.concat(x(b.map(function(U,X){return X}))),I=p.map(function(U,X){var oe=Array.isArray(s.columnwidth)?s.columnwidth[Math.min(X,s.columnwidth.length-1)]:s.columnwidth;return m(oe)?Number(oe):1}),F=I.reduce(e,0);I=I.map(function(U){return U/F*l});var D=Math.max(E(s.header.line.width),E(s.cells.line.width)),N={key:s.uid+g._context.staticPlot,translateX:w.x[0]*g._fullLayout._size.w,translateY:g._fullLayout._size.h*(1-w.y[1]),size:g._fullLayout._size,width:l,maxLineWidth:D,height:y,columnOrder:O,groupHeight:y,rowBlocks:R,headerRowBlocks:C,scrollY:0,cells:k({},s.cells,{values:b}),headerCells:k({},s.header,{values:p}),gdColumns:p.map(function(U){return U[0]}),gdColumnsOriginalOrder:p.map(function(U){return U[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:p.map(function(U,X){return z[U]=(z[U]||0)+1,{key:U+"__"+z[U],label:U,specIndex:X,xIndex:O[X],xScale:n,x:void 0,calcdata:void 0,columnWidth:I[X]}})};return N.columns.forEach(function(U){U.calcdata=N,U.x=n(U)}),N}},{"../../lib/extend":493,"./constants":1069,"fast-isnumeric":190}],1071:[function(v,ie,ae){"use strict";var _=v("../../lib/extend").extendFlat;ae.splitToPanels=function(m){var E=[0,0],e=_({},m,{key:"header",type:"header",page:0,prevPages:E,currentRepaint:[null,null],dragHandle:!0,values:m.calcdata.headerCells.values[m.specIndex],rowBlocks:m.calcdata.headerRowBlocks,calcdata:_({},m.calcdata,{cells:m.calcdata.headerCells})});return[_({},m,{key:"cells1",type:"cells",page:0,prevPages:E,currentRepaint:[null,null],dragHandle:!1,values:m.calcdata.cells.values[m.specIndex],rowBlocks:m.calcdata.rowBlocks}),_({},m,{key:"cells2",type:"cells",page:1,prevPages:E,currentRepaint:[null,null],dragHandle:!1,values:m.calcdata.cells.values[m.specIndex],rowBlocks:m.calcdata.rowBlocks}),e]},ae.splitToCells=function(m){var E=function k(m){var E=m.rowBlocks[m.page],e=E?E.rows[0].rowIndex:0;return[e,E?e+E.rows.length:0]}(m);return(m.values||[]).slice(E[0],E[1]).map(function(e,c){return{keyWithinBlock:c+("string"==typeof e&&e.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:E[0]+c,column:m,calcdata:m.calcdata,page:m.page,rowBlocks:m.rowBlocks,value:e}})}},{"../../lib/extend":493}],1072:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./attributes"),m=v("../../plots/domain").defaults;ie.exports=function(c,d,n,t){function i(a,r){return _.coerce(c,d,k,a,r)}m(d,t,i),i("columnwidth"),i("header.values"),i("header.format"),i("header.align"),i("header.prefix"),i("header.suffix"),i("header.height"),i("header.line.width"),i("header.line.color"),i("header.fill.color"),_.coerceFont(i,"header.font",_.extendFlat({},t.font)),function E(e,c){for(var n=e.header.values.length,t=(e.columnorder||[]).slice(0,n),i=t.slice().sort(function(g,s){return g-s}),a=t.map(function(g){return i.indexOf(g)}),r=a.length;r<n;r++)a.push(r);c("columnorder",a)}(d,i),i("cells.values"),i("cells.format"),i("cells.align"),i("cells.prefix"),i("cells.suffix"),i("cells.height"),i("cells.line.width"),i("cells.line.color"),i("cells.fill.color"),_.coerceFont(i,"cells.font",_.extendFlat({},t.font)),d._length=null}},{"../../lib":503,"../../plots/domain":584,"./attributes":1066}],1073:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot"),moduleType:"trace",name:"table",basePlotModule:v("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1066,"./base_plot":1067,"./calc":1068,"./defaults":1072,"./plot":1074}],1074:[function(v,ie,ae){"use strict";var _=v("./constants"),k=v("@plotly/d3"),E=v("../../lib").numberFormat,e=v("../../lib/gup"),c=v("../../components/drawing"),d=v("../../lib/svg_text_utils"),n=v("../../lib").raiseToTop,t=v("../../lib").strTranslate,i=v("../../lib").cancelTransition,a=v("./data_preparation_helper"),r=v("./data_split_helpers"),g=v("../../components/color");function s(te){return Math.ceil(te.calcdata.maxLineWidth/2)}function b(te,J){return"clip"+te._fullLayout._uid+"_scrollAreaBottomClip_"+J.key}function x(te,J){return"clip"+te._fullLayout._uid+"_columnBoundaryClippath_"+J.calcdata.key+"_"+J.specIndex}function S(te){return[].concat.apply([],te.map(function(J){return J})).map(function(J){return J.__data__})}function p(te,J,j){var le=te.selectAll("."+_.cn.scrollbarKit).data(e.repeat,e.keyFun);le.enter().append("g").classed(_.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),le.each(function(we){var de=we.scrollbarState;de.totalHeight=function re(we){var de=we.rowBlocks;return V(de,de.length-1)+(de.length?H(de[de.length-1],1/0):1)}(we),de.scrollableAreaHeight=we.groupHeight-N(we),de.currentlyVisibleHeight=Math.min(de.totalHeight,de.scrollableAreaHeight),de.ratio=de.currentlyVisibleHeight/de.totalHeight,de.barLength=Math.max(de.ratio*de.currentlyVisibleHeight,_.goldenRatio*_.scrollbarWidth),de.barWiggleRoom=de.currentlyVisibleHeight-de.barLength,de.wiggleRoom=Math.max(0,de.totalHeight-de.scrollableAreaHeight),de.topY=0===de.barWiggleRoom?0:we.scrollY/de.wiggleRoom*de.barWiggleRoom,de.bottomY=de.topY+de.barLength,de.dragMultiplier=de.wiggleRoom/de.barWiggleRoom}).attr("transform",function(we){return t(we.width+_.scrollbarWidth/2+_.scrollbarOffset,N(we))});var ge=le.selectAll("."+_.cn.scrollbar).data(e.repeat,e.keyFun);ge.enter().append("g").classed(_.cn.scrollbar,!0);var pe=ge.selectAll("."+_.cn.scrollbarSlider).data(e.repeat,e.keyFun);pe.enter().append("g").classed(_.cn.scrollbarSlider,!0),pe.attr("transform",function(we){return t(0,we.scrollbarState.topY||0)});var xe=pe.selectAll("."+_.cn.scrollbarGlyph).data(e.repeat,e.keyFun);xe.enter().append("line").classed(_.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",_.scrollbarWidth).attr("stroke-linecap","round").attr("y1",_.scrollbarWidth/2),xe.attr("y2",function(we){return we.scrollbarState.barLength-_.scrollbarWidth/2}).attr("stroke-opacity",function(we){return we.columnDragInProgress||!we.scrollbarState.barWiggleRoom||j?0:.4}),xe.transition().delay(0).duration(0),xe.transition().delay(_.scrollbarHideDelay).duration(_.scrollbarHideDuration).attr("stroke-opacity",0);var ke=ge.selectAll("."+_.cn.scrollbarCaptureZone).data(e.repeat,e.keyFun);ke.enter().append("line").classed(_.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",_.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(we){var de=k.event.y,be=this.getBoundingClientRect(),Le=we.scrollbarState,De=de-be.top,ye=k.scale.linear().domain([0,Le.scrollableAreaHeight]).range([0,Le.totalHeight]).clamp(!0);Le.topY<=De&&De<=Le.bottomY||oe(J,te,null,ye(De-Le.barLength/2))(we)}).call(k.behavior.drag().origin(function(we){return k.event.stopPropagation(),we.scrollbarState.scrollbarScrollInProgress=!0,we}).on("drag",oe(J,te)).on("dragend",function(){})),ke.attr("y2",function(we){return we.scrollbarState.scrollableAreaHeight}),J._context.staticPlot&&(xe.remove(),ke.remove())}function w(te,J,j,re){var ge=function y(te){var J=te.selectAll("."+_.cn.columnCell).data(r.splitToCells,function(j){return j.keyWithinBlock});return J.enter().append("g").classed(_.cn.columnCell,!0),J.exit().remove(),J}(function l(te){var J=te.selectAll("."+_.cn.columnCells).data(e.repeat,e.keyFun);return J.enter().append("g").classed(_.cn.columnCells,!0),J.exit().remove(),J}(j));(function f(te){te.each(function(J,j){var re=J.calcdata.cells.font,le=J.column.specIndex,ge={size:O(re.size,le,j),color:O(re.color,le,j),family:O(re.family,le,j)};J.rowNumber=J.key,J.align=O(J.calcdata.cells.align,le,j),J.cellBorderWidth=O(J.calcdata.cells.line.width,le,j),J.font=ge})})(ge),function h(te){te.attr("width",function(J){return J.column.columnWidth}).attr("stroke-width",function(J){return J.cellBorderWidth}).each(function(J){var j=k.select(this);g.stroke(j,O(J.calcdata.cells.line.color,J.column.specIndex,J.rowNumber)),g.fill(j,O(J.calcdata.cells.fill.color,J.column.specIndex,J.rowNumber))})}(function A(te){var J=te.selectAll("."+_.cn.cellRect).data(e.repeat,function(j){return j.keyWithinBlock});return J.enter().append("rect").classed(_.cn.cellRect,!0),J}(ge));var ke=function T(te){var J=te.selectAll("."+_.cn.cellText).data(e.repeat,function(j){return j.keyWithinBlock});return J.enter().append("text").classed(_.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){k.event.stopPropagation()}),J}(function M(te){var J=te.selectAll("."+_.cn.cellTextHolder).data(e.repeat,function(j){return j.keyWithinBlock});return J.enter().append("g").classed(_.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),J}(ge));(function u(te){te.each(function(J){c.font(k.select(this),J.font)})})(ke),o(ke,J,re,te),$(ge)}function o(te,J,j,re){te.text(function(le){var ge=le.column.specIndex,pe=le.rowNumber,xe=le.value,ke="string"==typeof xe,we=ke&&xe.match(/<br>/i),de=!ke||we;le.mayHaveMarkup=ke&&xe.match(/[<&>]/);var be=function C(te){return"string"==typeof te&&te.match(_.latexCheck)}(xe);le.latex=be;var Fe,Ke,Le=be?"":O(le.calcdata.cells.prefix,ge,pe)||"",De=be?"":O(le.calcdata.cells.suffix,ge,pe)||"",ye=be?null:O(le.calcdata.cells.format,ge,pe)||null,Ce=Le+(ye?E(ye)(le.value):le.value)+De;if(le.wrappingNeeded=!le.wrapped&&!de&&!be&&(Fe=R(Ce)),le.cellHeightMayIncrease=we||be||le.mayHaveMarkup||(void 0===Fe?R(Ce):Fe),le.needsConvertToTspans=le.mayHaveMarkup||le.wrappingNeeded||le.latex,le.wrappingNeeded){var Be=(" "===_.wrapSplitCharacter?Ce.replace(/<a href=/gi,"<a_href="):Ce).split(_.wrapSplitCharacter),Ie=" "===_.wrapSplitCharacter?Be.map(function(nt){return nt.replace(/<a_href=/gi,"<a href=")}):Be;le.fragments=Ie.map(function(nt){return{text:nt,width:null}}),le.fragments.push({fragment:_.wrapSpacer,width:null}),Ke=Ie.join(_.lineBreaker)+_.lineBreaker+_.wrapSpacer}else delete le.fragments,Ke=Ce;return Ke}).attr("dy",function(le){return le.needsConvertToTspans?0:"0.75em"}).each(function(le){var pe=k.select(this);le.needsConvertToTspans?d.convertToTspans(pe,re,(le.wrappingNeeded?ne:W)(j,this,J,re,le)):k.select(this.parentNode).attr("transform",function(ke){return t(G(ke),_.cellPad)}).attr("text-anchor",function(ke){return{left:"start",center:"middle",right:"end"}[ke.align]})})}function R(te){return-1!==te.indexOf(_.wrapSplitCharacter)}function O(te,J,j){if(Array.isArray(te)){var re=te[Math.min(J,te.length-1)];return Array.isArray(re)?re[Math.min(j,re.length-1)]:re}return te}function I(te,J,j){te.transition().ease(_.releaseTransitionEase).duration(_.releaseTransitionDuration).attr("transform",t(J.x,j))}function F(te){return"cells"===te.type}function D(te){return"header"===te.type}function N(te){return(te.rowBlocks.length?te.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(j,re){return j+H(re,1/0)},0)}function X(te,J,j){var re=S(J)[0];if(void 0!==re){var le=re.rowBlocks,ge=re.calcdata,pe=V(le,le.length),xe=re.calcdata.groupHeight-N(re),ke=ge.scrollY=Math.max(0,Math.min(pe-xe,ge.scrollY)),we=function U(te,J,j){for(var re=[],le=0,ge=0;ge<te.length;ge++){for(var pe=te[ge],xe=pe.rows,ke=0,we=0;we<xe.length;we++)ke+=xe[we].rowHeight;pe.allRowsHeight=ke,J<le+ke&&J+j>le&&re.push(ge),le+=ke}return re}(le,ke,xe);1===we.length&&(we[0]===le.length-1?we.unshift(we[0]-1):we.push(we[0]+1)),we[0]%2&&we.reverse(),J.each(function(de,be){de.page=we[be],de.scrollY=ke}),J.attr("transform",function(de){var be=V(de.rowBlocks,de.page)-de.scrollY;return t(0,be)}),te&&(se(te,j,J,we,re.prevPages,re,0),se(te,j,J,we,re.prevPages,re,1),p(j,te))}}function oe(te,J,j,re){return function(ge){var pe=ge.calcdata?ge.calcdata:ge,xe=J.filter(function(be){return pe.key===be.key}),we=pe.scrollY;pe.scrollY=void 0===re?pe.scrollY+(j||pe.scrollbarState.dragMultiplier)*k.event.dy:re;var de=xe.selectAll("."+_.cn.yColumn).selectAll("."+_.cn.columnBlock).filter(F);return X(te,de,xe),pe.scrollY===we}}function se(te,J,j,re,le,ge,pe){re[pe]!==le[pe]&&(clearTimeout(ge.currentRepaint[pe]),ge.currentRepaint[pe]=setTimeout(function(){var ke=j.filter(function(we,de){return de===pe&&re[de]!==le[de]});w(te,J,ke,j),le[pe]=re[pe]}))}function ne(te,J,j,re){return function(){var ge=k.select(J.parentNode);ge.each(function(pe){var xe=pe.fragments;ge.selectAll("tspan.line").each(function(Ce,Fe){xe[Fe].width=this.getComputedTextLength()});var be,Le,ke=xe[xe.length-1].width,we=xe.slice(0,-1),de=[],De=0,ye=pe.column.columnWidth-2*_.cellPad;for(pe.value="";we.length;)De+(Le=(be=we.shift()).width+ke)>ye&&(pe.value+=de.join(_.wrapSpacer)+_.lineBreaker,de=[],De=0),de.push(be.text),De+=Le;De&&(pe.value+=de.join(_.wrapSpacer)),pe.wrapped=!0}),ge.selectAll("tspan.line").remove(),o(ge.select("."+_.cn.cellText),j,te,re),k.select(J.parentNode.parentNode).call($)}}function W(te,J,j,re,le){return function(){if(!le.settledY){var pe=k.select(J.parentNode),xe=K(le),ke=le.key-xe.firstRowIndex,we=xe.rows[ke].rowHeight,de=le.cellHeightMayIncrease?J.parentNode.getBoundingClientRect().height+2*_.cellPad:we,be=Math.max(de,we);be-xe.rows[ke].rowHeight&&(xe.rows[ke].rowHeight=be,te.selectAll("."+_.cn.columnCell).call($),X(null,te.filter(F),0),p(j,re,!0)),pe.attr("transform",function(){var Ce=this.parentNode.getBoundingClientRect(),Fe=k.select(this.parentNode).select("."+_.cn.cellRect).node().getBoundingClientRect(),Ke=this.transform.baseVal.consolidate(),Ue=Fe.top-Ce.top+(Ke?Ke.matrix.f:_.cellPad);return t(G(le,k.select(this.parentNode).select("."+_.cn.cellTextHolder).node().getBoundingClientRect().width),Ue)}),le.settledY=!0}}}function G(te,J){switch(te.align){case"left":default:return _.cellPad;case"right":return te.column.columnWidth-(J||0)-_.cellPad;case"center":return(te.column.columnWidth-(J||0))/2}}function $(te){te.attr("transform",function(J){var j=J.rowBlocks[0].auxiliaryBlocks.reduce(function(pe,xe){return pe+H(xe,1/0)},0),le=H(K(J),J.key);return t(0,le+j)}).selectAll("."+_.cn.cellRect).attr("height",function(J){return function Y(te,J){return te.rows[J-te.firstRowIndex]}(K(J),J.key).rowHeight})}function V(te,J){for(var j=0,re=J-1;re>=0;re--)j+=q(te[re]);return j}function H(te,J){for(var j=0,re=0;re<te.rows.length&&te.rows[re].rowIndex<J;re++)j+=te.rows[re].rowHeight;return j}function q(te){var J=te.allRowsHeight;if(void 0!==J)return J;for(var j=0,re=0;re<te.rows.length;re++)j+=te.rows[re].rowHeight;return te.allRowsHeight=j,j}function K(te){return te.rowBlocks[te.page]}ie.exports=function(J,j){var re=!J._context.staticPlot,le=J._fullLayout._paper.selectAll("."+_.cn.table).data(j.map(function(Ue){var Be=e.unwrap(Ue);return a(J,Be.trace)}),e.keyFun);le.exit().remove(),le.enter().append("g").classed(_.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),le.attr("width",function(Ue){return Ue.width+Ue.size.l+Ue.size.r}).attr("height",function(Ue){return Ue.height+Ue.size.t+Ue.size.b}).attr("transform",function(Ue){return t(Ue.translateX,Ue.translateY)});var ge=le.selectAll("."+_.cn.tableControlView).data(e.repeat,e.keyFun),pe=ge.enter().append("g").classed(_.cn.tableControlView,!0).style("box-sizing","content-box");if(re){var xe="onwheel"in document?"wheel":"mousewheel";pe.on("mousemove",function(Ue){ge.filter(function(Be){return Ue===Be}).call(p,J)}).on(xe,function(Ue){Ue.scrollbarState.wheeling||(Ue.scrollbarState.wheeling=!0,oe(J,ge,null,Ue.scrollY+k.event.deltaY)(Ue)||(k.event.stopPropagation(),k.event.preventDefault()),Ue.scrollbarState.wheeling=!1)}).call(p,J,!0)}ge.attr("transform",function(Ue){return t(Ue.size.l,Ue.size.t)});var ke=ge.selectAll("."+_.cn.scrollBackground).data(e.repeat,e.keyFun);ke.enter().append("rect").classed(_.cn.scrollBackground,!0).attr("fill","none"),ke.attr("width",function(Ue){return Ue.width}).attr("height",function(Ue){return Ue.height}),ge.each(function(Ue){c.setClipUrl(k.select(this),b(J,Ue),J)});var we=ge.selectAll("."+_.cn.yColumn).data(function(Ue){return Ue.columns},e.keyFun);we.enter().append("g").classed(_.cn.yColumn,!0),we.exit().remove(),we.attr("transform",function(Ue){return t(Ue.x,0)}),re&&we.call(k.behavior.drag().origin(function(Ue){return I(k.select(this),Ue,-_.uplift),n(this),Ue.calcdata.columnDragInProgress=!0,p(ge.filter(function(Ie){return Ue.calcdata.key===Ie.key}),J),Ue}).on("drag",function(Ue){var Be=k.select(this),Ie=function(Nt){return(Ue===Nt?k.event.x:Nt.x)+Nt.columnWidth/2};Ue.x=Math.max(-_.overdrag,Math.min(Ue.calcdata.width+_.overdrag-Ue.columnWidth,k.event.x)),S(we).filter(function(Nt){return Nt.calcdata.key===Ue.calcdata.key}).sort(function(Nt,St){return Ie(Nt)-Ie(St)}).forEach(function(Nt,St){Nt.xIndex=St,Nt.x=Ue===Nt?Nt.x:Nt.xScale(Nt)}),we.filter(function(Nt){return Ue!==Nt}).transition().ease(_.transitionEase).duration(_.transitionDuration).attr("transform",function(Nt){return t(Nt.x,0)}),Be.call(i).attr("transform",t(Ue.x,-_.uplift))}).on("dragend",function(Ue){var Be=k.select(this),Ie=Ue.calcdata;Ue.x=Ue.xScale(Ue),Ue.calcdata.columnDragInProgress=!1,I(Be,Ue,0),function z(te,J,j){var re=J.gdColumnsOriginalOrder;J.gdColumns.sort(function(le,ge){return j[re.indexOf(le)]-j[re.indexOf(ge)]}),J.columnorder=j,te.emit("plotly_restyle")}(J,Ie,Ie.columns.map(function(nt){return nt.xIndex}))})),we.each(function(Ue){c.setClipUrl(k.select(this),x(J,Ue),J)});var de=we.selectAll("."+_.cn.columnBlock).data(r.splitToPanels,e.keyFun);de.enter().append("g").classed(_.cn.columnBlock,!0).attr("id",function(Ue){return Ue.key}),de.style("cursor",function(Ue){return Ue.dragHandle?"ew-resize":Ue.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var be=de.filter(D),Le=de.filter(F);re&&Le.call(k.behavior.drag().origin(function(Ue){return k.event.stopPropagation(),Ue}).on("drag",oe(J,ge,-1)).on("dragend",function(){})),w(J,ge,be,de),w(J,ge,Le,de);var De=ge.selectAll("."+_.cn.scrollAreaClip).data(e.repeat,e.keyFun);De.enter().append("clipPath").classed(_.cn.scrollAreaClip,!0).attr("id",function(Ue){return b(J,Ue)});var ye=De.selectAll("."+_.cn.scrollAreaClipRect).data(e.repeat,e.keyFun);ye.enter().append("rect").classed(_.cn.scrollAreaClipRect,!0).attr("x",-_.overdrag).attr("y",-_.uplift).attr("fill","none"),ye.attr("width",function(Ue){return Ue.width+2*_.overdrag}).attr("height",function(Ue){return Ue.height+_.uplift}),we.selectAll("."+_.cn.columnBoundary).data(e.repeat,e.keyFun).enter().append("g").classed(_.cn.columnBoundary,!0);var Fe=we.selectAll("."+_.cn.columnBoundaryClippath).data(e.repeat,e.keyFun);Fe.enter().append("clipPath").classed(_.cn.columnBoundaryClippath,!0),Fe.attr("id",function(Ue){return x(J,Ue)});var Ke=Fe.selectAll("."+_.cn.columnBoundaryRect).data(e.repeat,e.keyFun);Ke.enter().append("rect").classed(_.cn.columnBoundaryRect,!0).attr("fill","none"),Ke.attr("width",function(Ue){return Ue.columnWidth+2*s(Ue)}).attr("height",function(Ue){return Ue.calcdata.height+2*s(Ue)+_.uplift}).attr("x",function(Ue){return-s(Ue)}).attr("y",function(Ue){return-s(Ue)}),X(null,Le,ge)}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"./constants":1069,"./data_preparation_helper":1070,"./data_split_helpers":1071,"@plotly/d3":58}],1075:[function(v,ie,ae){"use strict";var _=v("../../plots/template_attributes").hovertemplateAttrs,k=v("../../plots/template_attributes").texttemplateAttrs,m=v("../../components/colorscale/attributes"),E=v("../../plots/domain").attributes,e=v("../pie/attributes"),c=v("../sunburst/attributes"),d=v("./constants"),n=v("../../lib/extend").extendFlat;ie.exports={labels:c.labels,parents:c.parents,values:c.values,branchvalues:c.branchvalues,count:c.count,level:c.level,maxdepth:c.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:n({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:c.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:c.marker.line,editType:"calc"},m("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:n({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:c.textinfo,texttemplate:k({editType:"plot"},{keys:d.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:c.hoverinfo,hovertemplate:_({},{keys:d.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:n({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:c.root,domain:E({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"../sunburst/attributes":1049,"./constants":1078}],1076:[function(v,ie,ae){"use strict";var _=v("../../plots/plots");ae.name="treemap",ae.plot=function(k,m,E,e){_.plotBasePlot(ae.name,k,m,E,e)},ae.clean=function(k,m,E,e){_.cleanBasePlot(ae.name,k,m,E,e)}},{"../../plots/plots":619}],1077:[function(v,ie,ae){"use strict";var _=v("../sunburst/calc");ae.calc=function(k,m){return _.calc(k,m)},ae.crossTraceCalc=function(k){return _._runCrossTraceCalc("treemap",k)}},{"../sunburst/calc":1051}],1078:[function(v,ie,ae){"use strict";ie.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1079:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./attributes"),m=v("../../components/color"),E=v("../../plots/domain").defaults,e=v("../bar/defaults").handleText,c=v("../bar/constants").TEXTPAD,d=v("../../components/colorscale"),n=d.hasColorscale,t=d.handleDefaults;ie.exports=function(a,r,g,s){function b(o,C){return _.coerce(a,r,k,o,C)}var x=b("labels"),S=b("parents");if(x&&x.length&&S&&S.length){var p=b("values");b(p&&p.length?"branchvalues":"count"),b("level"),b("maxdepth"),"squarify"===b("tiling.packing")&&b("tiling.squarifyratio"),b("tiling.flip"),b("tiling.pad");var l=b("text");b("texttemplate"),r.texttemplate||b("textinfo",Array.isArray(l)?"text+label":"label"),b("hovertext"),b("hovertemplate");var y=b("pathbar.visible");e(a,r,s,b,"auto",{hasPathbar:y,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),b("textposition");var T=-1!==r.textposition.indexOf("bottom");b("marker.line.width")&&b("marker.line.color",s.paper_bgcolor);var f=b("marker.colors");(r._hasColorscale=n(a,"marker","colors")||(a.marker||{}).coloraxis)?t(a,r,s,b,{prefix:"marker.",cLetter:"c"}):b("marker.depthfade",!(f||[]).length);var h=2*r.textfont.size;b("marker.pad.t",T?h/4:h),b("marker.pad.l",h/4),b("marker.pad.r",h/4),b("marker.pad.b",T?h:h/4),r._hovered={marker:{line:{width:2,color:m.contrast(s.paper_bgcolor)}}},y&&(b("pathbar.thickness",r.pathbar.textfont.size+2*c),b("pathbar.side"),b("pathbar.edgeshape")),b("sort"),b("root.color"),E(r,s,b),r._length=null}else r.visible=!1}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":1075}],1080:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../sunburst/helpers"),E=v("../bar/uniform_text").clearMinTextSize,e=v("../bar/style").resizeText,c=v("./plot_one");ie.exports=function(n,t,i,a,r){var S,p,g=r.type,s=r.drawDescendants,b=n._fullLayout,x=b["_"+g+"layer"],w=!i;E(g,b),(S=x.selectAll("g.trace."+g).data(t,function(y){return y[0].trace.uid})).enter().append("g").classed("trace",!0).classed(g,!0),S.order(),!b.uniformtext.mode&&k.hasTransition(i)?(a&&(p=a()),_.transition().duration(i.duration).ease(i.easing).each("end",function(){p&&p()}).each("interrupt",function(){p&&p()}).each(function(){x.selectAll("g.trace").each(function(y){c(n,y,this,i,s)})})):(S.each(function(y){c(n,y,this,i,s)}),b.uniformtext.mode&&e(n,x.selectAll(".trace"),g)),w&&S.exit().remove()}},{"../bar/style":662,"../bar/uniform_text":664,"../sunburst/helpers":1055,"./plot_one":1089,"@plotly/d3":58}],1081:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../lib"),m=v("../../components/drawing"),E=v("../../lib/svg_text_utils"),e=v("./partition"),c=v("./style").styleOne,d=v("./constants"),n=v("../sunburst/helpers"),t=v("../sunburst/fx"),i=!0;ie.exports=function(r,g,s,b,x){var S=x.barDifY,p=x.width,w=x.height,l=x.viewX,y=x.viewY,A=x.pathSlice,T=x.toMoveInsideSlice,M=x.strTransform,f=x.hasTransition,u=x.handleSlicesExit,h=x.makeUpdateSliceInterpolator,o=x.makeUpdateTextInterpolator,C={},R=r._fullLayout,z=g[0],O=z.trace,I=z.hierarchy,F=p/O._entryDepth,D=n.listPath(s.data,"id"),N=e(I.copy(),[p,w],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(N=N.filter(function(X){var oe=D.indexOf(X.data.id);return-1!==oe&&(X.x0=F*oe,X.x1=F*(oe+1),X.y0=S,X.y1=S+w,X.onPathbar=!0,!0)})).reverse(),(b=b.data(N,n.getPtId)).enter().append("g").classed("pathbar",!0),u(b,i,C,[p,w],A),b.order();var U=b;f&&(U=U.transition().each("end",function(){var X=_.select(this);n.setSliceCursor(X,r,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),U.each(function(X){X._x0=l(X.x0),X._x1=l(X.x1),X._y0=y(X.y0),X._y1=y(X.y1),X._hoverX=l(X.x1-Math.min(p,w)/2),X._hoverY=y(X.y1-w/2);var oe=_.select(this),se=k.ensureSingle(oe,"path","surface",function($){$.style("pointer-events","all")});f?se.transition().attrTween("d",function($){var V=h($,i,C,[p,w]);return function(H){return A(V(H))}}):se.attr("d",A),oe.call(t,s,r,g,{styleOne:c,eventDataKeys:d.eventDataKeys,transitionTime:d.CLICK_TRANSITION_TIME,transitionEasing:d.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,r,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:r._transitioning}),se.call(c,X,O,{hovered:!1}),X._text=(n.getPtLabel(X)||"").split("<br>").join(" ")||"";var ne=k.ensureSingle(oe,"g","slicetext"),W=k.ensureSingle(ne,"text","",function($){$.attr("data-notex",1)}),G=k.ensureUniformFontSize(r,n.determineTextFont(O,X,R.font,{onPathbar:!0}));W.text(X._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(m.font,G).call(E.convertToTspans,r),X.textBB=m.bBox(W.node()),X.transform=T(X,{fontSize:G.size,onPathbar:!0}),X.transform.fontSize=G.size,f?W.transition().attrTween("transform",function($){var V=o($,i,C,[p,w]);return function(H){return M(V(H))}}):W.attr("transform",M(X))})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"./constants":1078,"./partition":1087,"./style":1090,"@plotly/d3":58}],1082:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../lib"),m=v("../../components/drawing"),E=v("../../lib/svg_text_utils"),e=v("./partition"),c=v("./style").styleOne,d=v("./constants"),n=v("../sunburst/helpers"),t=v("../sunburst/fx"),i=v("../sunburst/plot").formatSliceLabel,a=!1;ie.exports=function(g,s,b,x,S){var p=S.width,w=S.height,l=S.viewX,y=S.viewY,A=S.pathSlice,T=S.toMoveInsideSlice,M=S.strTransform,f=S.hasTransition,u=S.handleSlicesExit,h=S.makeUpdateSliceInterpolator,o=S.makeUpdateTextInterpolator,C=S.prevEntry,z=g._fullLayout,I=s[0].trace,F=-1!==I.textposition.indexOf("left"),D=-1!==I.textposition.indexOf("right"),N=-1!==I.textposition.indexOf("bottom"),U=!N&&!I.marker.pad.t||N&&!I.marker.pad.b,oe=e(b,[p,w],{packing:I.tiling.packing,squarifyratio:I.tiling.squarifyratio,flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1,pad:{inner:I.tiling.pad,top:I.marker.pad.t,left:I.marker.pad.l,right:I.marker.pad.r,bottom:I.marker.pad.b}}).descendants(),se=1/0,ne=-1/0;oe.forEach(function(H){var q=H.depth;q>=I._maxDepth?(H.x0=H.x1=(H.x0+H.x1)/2,H.y0=H.y1=(H.y0+H.y1)/2):(se=Math.min(se,q),ne=Math.max(ne,q))}),x=x.data(oe,n.getPtId),I._maxVisibleLayers=isFinite(ne)?ne-se+1:0,x.enter().append("g").classed("slice",!0),u(x,a,{},[p,w],A),x.order();var W=null;if(f&&C){var G=n.getPtId(C);x.each(function(H){null===W&&n.getPtId(H)===G&&(W={x0:H.x0,x1:H.x1,y0:H.y0,y1:H.y1})})}var $=function(){return W||{x0:0,x1:p,y0:0,y1:w}},V=x;return f&&(V=V.transition().each("end",function(){var H=_.select(this);n.setSliceCursor(H,g,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),V.each(function(H){var q=n.isHeader(H,I);H._x0=l(H.x0),H._x1=l(H.x1),H._y0=y(H.y0),H._y1=y(H.y1),H._hoverX=l(H.x1-I.marker.pad.r),H._hoverY=y(N?H.y1-I.marker.pad.b/2:H.y0+I.marker.pad.t/2);var K=_.select(this),Y=k.ensureSingle(K,"path","surface",function(re){re.style("pointer-events","all")});f?Y.transition().attrTween("d",function(re){var le=h(re,a,$(),[p,w]);return function(ge){return A(le(ge))}}):Y.attr("d",A),K.call(t,b,g,s,{styleOne:c,eventDataKeys:d.eventDataKeys,transitionTime:d.CLICK_TRANSITION_TIME,transitionEasing:d.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,g,{isTransitioning:g._transitioning}),Y.call(c,H,I,{hovered:!1}),H._text=H.x0===H.x1||H.y0===H.y1?"":q?U?"":n.getPtLabel(H)||"":i(H,b,I,s,z)||"";var te=k.ensureSingle(K,"g","slicetext"),J=k.ensureSingle(te,"text","",function(re){re.attr("data-notex",1)}),j=k.ensureUniformFontSize(g,n.determineTextFont(I,H,z.font));J.text(H._text||" ").classed("slicetext",!0).attr("text-anchor",D?"end":F||q?"start":"middle").call(m.font,j).call(E.convertToTspans,g),H.textBB=m.bBox(J.node()),H.transform=T(H,{fontSize:j.size,isHeader:q}),H.transform.fontSize=j.size,f?J.transition().attrTween("transform",function(re){var le=o(re,a,$(),[p,w]);return function(ge){return M(le(ge))}}):J.attr("transform",M(H))}),W}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"../sunburst/plot":1059,"./constants":1078,"./partition":1087,"./style":1090,"@plotly/d3":58}],1083:[function(v,ie,ae){"use strict";ie.exports=function _(k,m,E){var e;E.swapXY&&(e=k.x0,k.x0=k.y0,k.y0=e,e=k.x1,k.x1=k.y1,k.y1=e),E.flipX&&(e=k.x0,k.x0=m[0]-k.x1,k.x1=m[0]-e),E.flipY&&(e=k.y0,k.y0=m[1]-k.y1,k.y1=m[1]-e);var c=k.children;if(c)for(var d=0;d<c.length;d++)_(c[d],m,E)}},{}],1084:[function(v,ie,ae){"use strict";ie.exports={moduleType:"trace",name:"treemap",basePlotModule:v("./base_plot"),categories:[],animatable:!0,attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot"),style:v("./style").style,colorbar:v("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":1075,"./base_plot":1076,"./calc":1077,"./defaults":1079,"./layout_attributes":1085,"./layout_defaults":1086,"./plot":1088,"./style":1090}],1085:[function(v,ie,ae){"use strict";ie.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1086:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./layout_attributes");ie.exports=function(E,e){function c(d,n){return _.coerce(E,e,k,d,n)}c("treemapcolorway",e.colorway),c("extendtreemapcolors")}},{"../../lib":503,"./layout_attributes":1085}],1087:[function(v,ie,ae){"use strict";var _=v("d3-hierarchy"),k=v("./flip_tree");ie.exports=function(e,c,d){var b,n=d.flipX,t=d.flipY,i="dice-slice"===d.packing,a=d.pad[t?"bottom":"top"],r=d.pad[n?"right":"left"],g=d.pad[n?"left":"right"],s=d.pad[t?"top":"bottom"];i&&(b=r,r=a,a=b,b=g,g=s,s=b);var x=_.treemap().tile(function m(E,e){switch(E){case"squarify":return _.treemapSquarify.ratio(e);case"binary":return _.treemapBinary;case"dice":return _.treemapDice;case"slice":return _.treemapSlice;default:return _.treemapSliceDice}}(d.packing,d.squarifyratio)).paddingInner(d.pad.inner).paddingLeft(r).paddingRight(g).paddingTop(a).paddingBottom(s).size(i?[c[1],c[0]]:c)(e);return(i||n||t)&&k(x,c,{swapXY:i,flipX:n,flipY:t}),x}},{"./flip_tree":1083,"d3-hierarchy":115}],1088:[function(v,ie,ae){"use strict";var _=v("./draw"),k=v("./draw_descendants");ie.exports=function(E,e,c,d){return _(E,e,c,d,{type:"treemap",drawDescendants:k})}},{"./draw":1080,"./draw_descendants":1082}],1089:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("d3-interpolate").interpolate,m=v("../sunburst/helpers"),E=v("../../lib"),e=v("../bar/constants").TEXTPAD,d=v("../bar/plot").toMoveInsideBar,t=v("../bar/uniform_text").recordMinTextSize,i=v("./constants"),a=v("./draw_ancestors");function r(g){return m.isHierarchyRoot(g)?"":m.getPtId(g)}ie.exports=function(s,b,x,S,p){var w=s._fullLayout,l=b[0],y=l.trace,T="icicle"===y.type,M=l.hierarchy,f=m.findEntryWithLevel(M,y.level),u=_.select(x),h=u.selectAll("g.pathbar"),o=u.selectAll("g.slice");if(!f)return h.remove(),void o.remove();var C=m.isHierarchyRoot(f),R=!w.uniformtext.mode&&m.hasTransition(S),z=m.getMaxDepth(y),I=w._size,F=y.domain,D=I.w*(F.x[1]-F.x[0]),N=I.h*(F.y[1]-F.y[0]),U=D,X=y.pathbar.thickness,oe=y.marker.line.width+i.gapWithPathbar,se=y.pathbar.visible?y.pathbar.side.indexOf("bottom")>-1?N+oe:-(X+oe):0,ne={x0:U,x1:U,y0:se,y1:se+X},W=function(Ie,nt,gt){var Nt=y.tiling.pad,St=function(wt){return wt-Nt<=nt.x0},Bt=function(wt){return wt+Nt>=nt.x1},Zt=function(wt){return wt-Nt<=nt.y0},Et=function(wt){return wt+Nt>=nt.y1};return Ie.x0===nt.x0&&Ie.x1===nt.x1&&Ie.y0===nt.y0&&Ie.y1===nt.y1?{x0:Ie.x0,x1:Ie.x1,y0:Ie.y0,y1:Ie.y1}:{x0:St(Ie.x0-Nt)?0:Bt(Ie.x0-Nt)?gt[0]:Ie.x0,x1:St(Ie.x1+Nt)?0:Bt(Ie.x1+Nt)?gt[0]:Ie.x1,y0:Zt(Ie.y0-Nt)?0:Et(Ie.y0-Nt)?gt[1]:Ie.y0,y1:Zt(Ie.y1+Nt)?0:Et(Ie.y1+Nt)?gt[1]:Ie.y1}},G=null,$={},V={},H=null,q=function(Ie,nt){return nt?$[r(Ie)]:V[r(Ie)]},K=function(Ie,nt,gt,Nt){if(nt)return $[r(M)]||ne;var St=V[y.level]||gt;return function(Ie){return Ie.data.depth-f.data.depth<z}(Ie)?W(Ie,St,Nt):{}};l.hasMultipleRoots&&C&&z++,y._maxDepth=z,y._backgroundColor=w.paper_bgcolor,y._entryDepth=f.data.depth,y._atRootLevel=C;var Y=-D/2+I.l+I.w*(F.x[1]+F.x[0])/2,te=-N/2+I.t+I.h*(1-(F.y[1]+F.y[0])/2),J=function(Ie){return Y+Ie},j=function(Ie){return te+Ie},re=j(0),le=J(0),ge=function(Ie){return le+Ie},pe=function(Ie){return re+Ie};function xe(Ie,nt){return Ie+","+nt}var ke=ge(0),we=function(Ie){Ie.x=Math.max(ke,Ie.x)},de=y.pathbar.edgeshape,De=function(Ie,nt){var gt=Ie.x0,Nt=Ie.x1,St=Ie.y0,Bt=Ie.y1,Zt=Ie.textBB,Et=function(Xt){return-1!==y.textposition.indexOf(Xt)},wt=Et("bottom"),vt=Et("top")||nt.isHeader&&!wt?"start":wt?"end":"middle",Qe=Et("right"),Pe=Et("left")||nt.onPathbar,Xe=y[T?"tiling":"marker"].pad;if(nt.isHeader){if((gt+=(T?Xe:Xe.l)-e)>=(Nt-=(T?Xe:Xe.r)-e)){var rt=(gt+Nt)/2;gt=rt,Nt=rt}var kt;wt?St<(kt=Bt-(T?Xe:Xe.b))&&kt<Bt&&(St=kt):St<(kt=St+(T?Xe:Xe.t))&&kt<Bt&&(Bt=kt)}var Tt=d(gt,Nt,St,Bt,Zt,{isHorizontal:!1,constrained:!0,angle:0,anchor:vt,leftToRight:Pe?-1:Qe?1:0});return Tt.fontSize=nt.fontSize,Tt.targetX=J(Tt.targetX),Tt.targetY=j(Tt.targetY),isNaN(Tt.targetX)||isNaN(Tt.targetY)?{}:(gt!==Nt&&St!==Bt&&t(y.type,Tt,w),{scale:Tt.scale,rotate:Tt.rotate,textX:Tt.textX,textY:Tt.textY,anchorX:Tt.anchorX,anchorY:Tt.anchorY,targetX:Tt.targetX,targetY:Tt.targetY})},ye=function(Ie,nt){for(var gt,Nt=0,St=Ie;!gt&&Nt<z;)Nt++,(St=St.parent)?gt=q(St,nt):Nt=z;return gt||{}},Fe=function(Ie,nt,gt,Nt,St){var Zt,Bt=q(Ie,nt);if(Bt)Zt=Bt;else if(nt)Zt=ne;else if(G)if(Ie.parent){var Et=H||gt;Et&&!nt?Zt=W(Ie,Et,Nt):E.extendFlat(Zt={},ye(Ie,nt))}else Zt=E.extendFlat({},Ie),T&&("h"===St.orientation?St.flipX?Zt.x0=Ie.x1:Zt.x1=0:St.flipY?Zt.y0=Ie.y1:Zt.y1=0);else Zt={};return k(Zt,{x0:Ie.x0,x1:Ie.x1,y0:Ie.y0,y1:Ie.y1})},Ke=function(Ie,nt,gt,Nt){var St=q(Ie,nt),Bt={},Zt=K(Ie,nt,gt,Nt);E.extendFlat(Bt,{transform:De({x0:Zt.x0,x1:Zt.x1,y0:Zt.y0,y1:Zt.y1,textBB:Ie.textBB,_text:Ie._text},{isHeader:m.isHeader(Ie,y)})}),St?Bt=St:Ie.parent&&E.extendFlat(Bt,ye(Ie,nt));var Et=Ie.transform;return Ie.x0!==Ie.x1&&Ie.y0!==Ie.y1&&t(y.type,Et,w),k(Bt,{transform:{scale:Et.scale,rotate:Et.rotate,textX:Et.textX,textY:Et.textY,anchorX:Et.anchorX,anchorY:Et.anchorY,targetX:Et.targetX,targetY:Et.targetY}})},Ue=function(Ie,nt,gt,Nt,St){var Bt=Nt[0],Zt=Nt[1];R?Ie.exit().transition().each(function(){var Et=_.select(this);Et.select("path.surface").transition().attrTween("d",function(vt){var Qe=function(Ie,nt,gt,Nt){var Bt,St=q(Ie,nt);if(nt)Bt=ne;else{var Zt=q(f,nt);Bt=Zt?W(Ie,Zt,Nt):{}}return k(St,Bt)}(vt,nt,0,[Bt,Zt]);return function(Pe){return St(Qe(Pe))}}),Et.select("g.slicetext").attr("opacity",0)}).remove():Ie.exit().remove()},Be=function(Ie){var nt=Ie.transform;return Ie.x0!==Ie.x1&&Ie.y0!==Ie.y1&&t(y.type,nt,w),E.getTextTransform({textX:nt.textX,textY:nt.textY,anchorX:nt.anchorX,anchorY:nt.anchorY,targetX:nt.targetX,targetY:nt.targetY,scale:nt.scale,rotate:nt.rotate})};R&&(h.each(function(Ie){$[r(Ie)]={x0:Ie.x0,x1:Ie.x1,y0:Ie.y0,y1:Ie.y1},Ie.transform&&($[r(Ie)].transform={textX:Ie.transform.textX,textY:Ie.transform.textY,anchorX:Ie.transform.anchorX,anchorY:Ie.transform.anchorY,targetX:Ie.transform.targetX,targetY:Ie.transform.targetY,scale:Ie.transform.scale,rotate:Ie.transform.rotate})}),o.each(function(Ie){V[r(Ie)]={x0:Ie.x0,x1:Ie.x1,y0:Ie.y0,y1:Ie.y1},Ie.transform&&(V[r(Ie)].transform={textX:Ie.transform.textX,textY:Ie.transform.textY,anchorX:Ie.transform.anchorX,anchorY:Ie.transform.anchorY,targetX:Ie.transform.targetX,targetY:Ie.transform.targetY,scale:Ie.transform.scale,rotate:Ie.transform.rotate}),!G&&m.isEntry(Ie)&&(G=Ie)})),H=p(s,b,f,o,{width:D,height:N,viewX:J,viewY:j,pathSlice:function(Ie){var nt=J(Ie.x0),gt=J(Ie.x1),Nt=j(Ie.y0),St=j(Ie.y1),Bt=gt-nt,Zt=St-Nt;if(!Bt||!Zt)return"";return"M"+xe(nt,Nt+0)+"L"+xe(gt-0,Nt)+"L"+xe(gt,St-0)+"L"+xe(nt+0,St)+"Z"},toMoveInsideSlice:De,prevEntry:G,makeUpdateSliceInterpolator:Fe,makeUpdateTextInterpolator:Ke,handleSlicesExit:Ue,hasTransition:R,strTransform:Be}),y.pathbar.visible?a(s,b,f,h,{barDifY:se,width:U,height:X,viewX:ge,viewY:pe,pathSlice:function(Ie){var nt=ge(Math.max(Math.min(Ie.x0,Ie.x0),0)),gt=ge(Math.min(Math.max(Ie.x1,Ie.x1),U)),Nt=pe(Ie.y0),St=pe(Ie.y1),Bt=X/2,Zt={},Et={};Zt.x=nt,Et.x=gt,Zt.y=Et.y=(Nt+St)/2;var wt={x:nt,y:Nt},at={x:gt,y:Nt},vt={x:gt,y:St},Qe={x:nt,y:St};return">"===de?(wt.x-=Bt,at.x-=Bt,vt.x-=Bt,Qe.x-=Bt):"/"===de?(vt.x-=Bt,Qe.x-=Bt,Zt.x-=Bt/2,Et.x-=Bt/2):"\\"===de?(wt.x-=Bt,at.x-=Bt,Zt.x-=Bt/2,Et.x-=Bt/2):"<"===de&&(Zt.x-=Bt,Et.x-=Bt),we(wt),we(Qe),we(Zt),we(at),we(vt),we(Et),"M"+xe(wt.x,wt.y)+"L"+xe(at.x,at.y)+"L"+xe(Et.x,Et.y)+"L"+xe(vt.x,vt.y)+"L"+xe(Qe.x,Qe.y)+"L"+xe(Zt.x,Zt.y)+"Z"},toMoveInsideSlice:De,makeUpdateSliceInterpolator:Fe,makeUpdateTextInterpolator:Ke,handleSlicesExit:Ue,hasTransition:R,strTransform:Be}):h.remove()}},{"../../lib":503,"../bar/constants":650,"../bar/plot":659,"../bar/uniform_text":664,"../sunburst/helpers":1055,"./constants":1078,"./draw_ancestors":1081,"@plotly/d3":58,"d3-interpolate":116}],1090:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../components/color"),m=v("../../lib"),E=v("../sunburst/helpers"),e=v("../bar/uniform_text").resizeText;function d(n,t,i,a){var b,x,r=(a||{}).hovered,g=t.data.data,s=g.i,S=g.color,p=E.isHierarchyRoot(t),w=1;if(r)b=i._hovered.marker.line.color,x=i._hovered.marker.line.width;else if(p&&S===i.root.color)w=100,b="rgba(0,0,0,0)",x=0;else if(b=m.castOption(i,s,"marker.line.color")||k.defaultLine,x=m.castOption(i,s,"marker.line.width")||0,!i._hasColorscale&&!t.onPathbar){var l=i.marker.depthfade;if(l){var A,y=k.combine(k.addOpacity(i._backgroundColor,.75),S);if(!0===l){var T=E.getMaxDepth(i);A=isFinite(T)?E.isLeaf(t)?0:i._maxVisibleLayers-(t.data.depth-i._entryDepth):t.data.height+1}else A=t.data.depth-i._entryDepth,i._atRootLevel||A++;if(A>0)for(var M=0;M<A;M++)S=k.combine(k.addOpacity(y,.5*M/A),S)}}n.style("stroke-width",x).call(k.fill,S).call(k.stroke,b).style("opacity",w)}ie.exports={style:function c(n){var t=n._fullLayout._treemaplayer.selectAll(".trace");e(n,t,"treemap"),t.each(function(i){var a=_.select(this),g=i[0].trace;a.style("opacity",g.opacity),a.selectAll("path.surface").each(function(s){_.select(this).call(d,s,g,{hovered:!1})})})},styleOne:d}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"../sunburst/helpers":1055,"@plotly/d3":58}],1091:[function(v,ie,ae){"use strict";var _=v("../box/attributes"),k=v("../../lib/extend").extendFlat,m=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat;ie.exports={y:_.y,x:_.x,x0:_.x0,y0:_.y0,xhoverformat:m("x"),yhoverformat:m("y"),name:k({},_.name,{}),orientation:k({},_.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:_.fillcolor,points:k({},_.boxpoints,{}),jitter:k({},_.jitter,{}),pointpos:k({},_.pointpos,{}),width:k({},_.width,{}),marker:_.marker,text:_.text,hovertext:_.hovertext,hovertemplate:_.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:_.offsetgroup,alignmentgroup:_.alignmentgroup,selected:_.selected,unselected:_.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673}],1092:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../plots/cartesian/axes"),m=v("../box/calc"),E=v("./helpers"),e=v("../../constants/numerical").BADNUM;function d(t,i,a){var r=i.max-i.min;if(!r)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,r/1e4);var g=a.length,s=_.stdev(a,g-1,i.mean);return Math.max(function c(t,i,a){return 1.059*Math.min(i,a/1.349)*Math.pow(t,-.2)}(g,s,i.q3-i.q1),r/100)}function n(t,i,a,r){var S,g=t.spanmode,s=t.span||[],x=[i.min-2*r,i.max+2*r];function p(l){var y=s[l],A="multicategory"===a.type?a.r2c(y):a.d2c(y,0,t[i.valLetter+"calendar"]);return A===e?x[l]:A}var w={type:"linear",range:S="soft"===g?x:"hard"===g?[i.min,i.max]:[p(0),p(1)]};return k.setConvert(w),w.cleanRange(),S}ie.exports=function(i,a){var r=m(i,a);if(r[0].t.empty)return r;for(var g=i._fullLayout,s=k.getFromId(i,a["h"===a.orientation?"xaxis":"yaxis"]),b=1/0,x=-1/0,S=0,p=0,w=0;w<r.length;w++){var l=r[w],y=l.pts.map(E.extractVal),A=l.bandwidth=d(a,l,y),T=l.span=n(a,l,s,A);if(l.min===l.max&&0===A)T=l.span=[l.min,l.max],l.density=[{v:1,t:T[0]}],l.bandwidth=A,S=Math.max(S,1);else{var M=T[1]-T[0],f=Math.ceil(M/(A/3)),u=M/f;if(!isFinite(u)||!isFinite(f))return _.error("Something went wrong with computing the violin span"),r[0].t.empty=!0,r;var h=E.makeKDE(l,a,y);l.density=new Array(f);for(var o=0,C=T[0];C<T[1]+u/2;o++,C+=u){var R=h(C);l.density[o]={v:R,t:C},S=Math.max(S,R)}}p=Math.max(p,y.length),b=Math.min(b,T[0]),x=Math.max(x,T[1])}var z=k.findExtremes(s,[b,x],{padded:!0});if(a._extremes[s._id]=z,a.width)r[0].t.maxKDE=S;else{var O=g._violinScaleGroupStats,I=a.scalegroup,F=O[I];F?(F.maxKDE=Math.max(F.maxKDE,S),F.maxCount=Math.max(F.maxCount,p)):O[I]={maxKDE:S,maxCount:p}}return r[0].t.labels.kde=_._(i,"kde:"),r}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../box/calc":674,"./helpers":1095}],1093:[function(v,ie,ae){"use strict";var _=v("../box/cross_trace_calc").setPositionOffset,k=["v","h"];ie.exports=function(E,e){for(var c=E.calcdata,d=e.xaxis,n=e.yaxis,t=0;t<k.length;t++){for(var i=k[t],a="h"===i?n:d,r=[],g=0;g<c.length;g++){var s=c[g],x=s[0].trace;!0===x.visible&&"violin"===x.type&&!s[0].t.empty&&x.orientation===i&&x.xaxis===d._id&&x.yaxis===n._id&&r.push(g)}_("violin",E,r,a)}}},{"../box/cross_trace_calc":675}],1094:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../components/color"),m=v("../box/defaults"),E=v("./attributes");ie.exports=function(c,d,n,t){function i(u,h){return _.coerce(c,d,E,u,h)}function a(u,h){return _.coerce2(c,d,E,u,h)}if(m.handleSampleDefaults(c,d,i,t),!1!==d.visible){i("bandwidth"),i("side"),i("width")||(i("scalegroup",d.name),i("scalemode"));var s,g=i("span");Array.isArray(g)&&(s="manual"),i("spanmode",s);var b=i("line.color",(c.marker||{}).color||n),x=i("line.width"),S=i("fillcolor",k.addOpacity(d.line.color,.5));m.handlePointsDefaults(c,d,i,{prefix:""});var p=a("box.width"),w=a("box.fillcolor",S),l=a("box.line.color",b),y=a("box.line.width",x);i("box.visible",Boolean(p||w||l||y))||(d.box={visible:!1});var T=a("meanline.color",b),M=a("meanline.width",x);i("meanline.visible",Boolean(T||M))||(d.meanline={visible:!1})}}},{"../../components/color":366,"../../lib":503,"../box/defaults":676,"./attributes":1091}],1095:[function(v,ie,ae){"use strict";var _=v("../../lib"),k_gaussian=function(m){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*m*m)};ae.makeKDE=function(m,E,e){var c=e.length,d=k_gaussian,n=m.bandwidth,t=1/(c*n);return function(i){for(var a=0,r=0;r<c;r++)a+=d((i-e[r])/n);return t*a}},ae.getPositionOnKdePath=function(m,E,e){var c,d;"h"===E.orientation?(c="y",d="x"):(c="x",d="y");var n=_.findPointOnPath(m.path,e,d,{pathLength:m.pathLength}),t=m.posCenterPx,i=n[c];return[i,"both"===E.side?2*t-i:t]},ae.getKdeValue=function(m,E,e){var c=m.pts.map(ae.extractVal);return ae.makeKDE(m,E,c)(e)/m.posDensityScale},ae.extractVal=function(m){return m.v}},{"../../lib":503}],1096:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../../plots/cartesian/axes"),m=v("../box/hover"),E=v("./helpers");ie.exports=function(c,d,n,t,i){i||(i={});var p,w,a=i.hoverLayer,r=c.cd,g=r[0].trace,s=g.hoveron,b=-1!==s.indexOf("violins"),x=-1!==s.indexOf("kde"),S=[];if(b||x){var l=m.hoverOnBoxes(c,d,n,t);if(x&&l.length>0){var T,M,f,u,h,y=c.xa,A=c.ya;"h"===g.orientation?(h=d,T="y",f=A,M="x",u=y):(h=n,T="x",f=y,M="y",u=A);var o=r[c.index];if(h>=o.span[0]&&h<=o.span[1]){var C=_.extendFlat({},c),R=u.c2p(h,!0),z=E.getKdeValue(o,g,h),O=E.getPositionOnKdePath(o,g,R),I=f._offset,F=f._length;C[T+"0"]=O[0],C[T+"1"]=O[1],C[M+"0"]=C[M+"1"]=R,C[M+"Label"]=M+": "+k.hoverLabelText(u,h,g[M+"hoverformat"])+", "+r[0].t.labels.kde+" "+z.toFixed(3),C.spikeDistance=l[0].spikeDistance;var D=T+"Spike";C[D]=l[0][D],l[0].spikeDistance=void 0,l[0][D]=void 0,C.hovertemplate=!1,S.push(C),(w={stroke:c.color})[T+"1"]=_.constrain(I+O[0],I,I+F),w[T+"2"]=_.constrain(I+O[1],I,I+F),w[M+"1"]=w[M+"2"]=u._offset+R}}b&&(S=S.concat(l))}-1!==s.indexOf("points")&&(p=m.hoverOnPoints(c,d,n));var N=a.selectAll(".violinline-"+g.uid).data(w?[0]:[]);return N.enter().append("line").classed("violinline-"+g.uid,!0).attr("stroke-width",1.5),N.exit().remove(),N.attr(w),"closest"===t?p?[p]:S:(p&&S.push(p),S)}},{"../../lib":503,"../../plots/cartesian/axes":554,"../box/hover":678,"./helpers":1095}],1097:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc"),crossTraceCalc:v("./cross_trace_calc"),plot:v("./plot"),style:v("./style"),styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover"),selectPoints:v("../box/select"),moduleType:"trace",name:"violin",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../box/defaults":676,"../box/select":683,"../scatter/style":951,"./attributes":1091,"./calc":1092,"./cross_trace_calc":1093,"./defaults":1094,"./hover":1096,"./layout_attributes":1098,"./layout_defaults":1099,"./plot":1100,"./style":1101}],1098:[function(v,ie,ae){"use strict";var _=v("../box/layout_attributes"),k=v("../../lib").extendFlat;ie.exports={violinmode:k({},_.boxmode,{}),violingap:k({},_.boxgap,{}),violingroupgap:k({},_.boxgroupgap,{})}},{"../../lib":503,"../box/layout_attributes":680}],1099:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./layout_attributes"),m=v("../box/layout_defaults");ie.exports=function(e,c,d){m._supply(e,c,d,function n(t,i){return _.coerce(e,c,k,t,i)},"violin")}},{"../../lib":503,"../box/layout_defaults":681,"./layout_attributes":1098}],1100:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../lib"),m=v("../../components/drawing"),E=v("../box/plot"),e=v("../scatter/line_points"),c=v("./helpers");ie.exports=function(n,t,i,a){var r=n._fullLayout,g=t.xaxis,s=t.yaxis;function b(x){var S=e(x,{xaxis:g,yaxis:s,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return m.smoothopen(S[0],1)}k.makeTraceGroups(a,i,"trace violins").each(function(x){var S=_.select(this),p=x[0],w=p.t,l=p.trace;if(!0!==l.visible||w.empty)S.remove();else{var y=w.bPos,A=w.bdPos,T=t[w.valLetter+"axis"],M=t[w.posLetter+"axis"],f="both"===l.side,u=f||"positive"===l.side,h=f||"negative"===l.side,o=S.selectAll("path.violin").data(k.identity);o.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),o.exit().remove(),o.each(function(N){var W,$,V,H,q,K,Y,te,U=_.select(this),X=N.density,oe=X.length,se=M.c2l(N.pos+y,!0),ne=M.l2p(se);if(l.width)W=w.maxKDE/A;else{var G=r._violinScaleGroupStats[l.scalegroup];W="count"===l.scalemode?G.maxKDE/A*(G.maxCount/N.pts.length):G.maxKDE/A}if(u){for(Y=new Array(oe),q=0;q<oe;q++)(te=Y[q]={})[w.posLetter]=se+X[q].v/W,te[w.valLetter]=T.c2l(X[q].t,!0);$=b(Y)}if(h){for(Y=new Array(oe),K=0,q=oe-1;K<oe;K++,q--)(te=Y[K]={})[w.posLetter]=se-X[q].v/W,te[w.valLetter]=T.c2l(X[q].t,!0);V=b(Y)}if(f)H=$+"L"+V.substr(1)+"Z";else{var J=[ne,T.c2p(X[0].t)],j=[ne,T.c2p(X[oe-1].t)];"h"===l.orientation&&(J.reverse(),j.reverse()),H=u?"M"+J+"L"+$.substr(1)+"L"+j:"M"+j+"L"+V.substr(1)+"L"+J}U.attr("d",H),N.posCenterPx=ne,N.posDensityScale=W*A,N.path=U.node(),N.pathLength=N.path.getTotalLength()/(f?2:1)});var O,I,F,C=l.box,R=C.width,z=(C.line||{}).width;f?(O=A*R,I=0):u?(O=[0,A*R/2],I=z*{x:1,y:-1}[w.posLetter]):(O=[A*R/2,0],I=z*{x:-1,y:1}[w.posLetter]),E.plotBoxAndWhiskers(S,{pos:M,val:T},l,{bPos:y,bdPos:O,bPosPxOffset:I}),E.plotBoxMean(S,{pos:M,val:T},l,{bPos:y,bdPos:O,bPosPxOffset:I}),!l.box.visible&&l.meanline.visible&&(F=k.identity);var D=S.selectAll("path.meanline").data(F||[]);D.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),D.exit().remove(),D.each(function(N){var U=T.c2p(N.mean,!0),X=c.getPositionOnKdePath(N,l,U);_.select(this).attr("d","h"===l.orientation?"M"+U+","+X[0]+"V"+X[1]:"M"+X[0]+","+U+"H"+X[1])}),E.plotPoints(S,{x:g,y:s},l,w)}})}},{"../../components/drawing":388,"../../lib":503,"../box/plot":682,"../scatter/line_points":941,"./helpers":1095,"@plotly/d3":58}],1101:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../components/color"),m=v("../scatter/style").stylePoints;ie.exports=function(e){var c=_.select(e).selectAll("g.trace.violins");c.style("opacity",function(d){return d[0].trace.opacity}),c.each(function(d){var n=d[0].trace,t=_.select(this),i=n.box||{},a=i.line||{},r=n.meanline||{},g=r.width;t.selectAll("path.violin").style("stroke-width",n.line.width+"px").call(k.stroke,n.line.color).call(k.fill,n.fillcolor),t.selectAll("path.box").style("stroke-width",a.width+"px").call(k.stroke,a.color).call(k.fill,i.fillcolor);var s={"stroke-width":g+"px","stroke-dasharray":2*g+"px,"+g+"px"};t.selectAll("path.mean").style(s).call(k.stroke,r.color),t.selectAll("path.meanline").style(s).call(k.stroke,r.color),m(t,n,e)})}},{"../../components/color":366,"../scatter/style":951,"@plotly/d3":58}],1102:[function(v,ie,ae){"use strict";var _=v("../../components/colorscale/attributes"),k=v("../isosurface/attributes"),m=v("../surface/attributes"),E=v("../../plots/attributes"),e=v("../../lib/extend").extendFlat,c=v("../../plot_api/edit_types").overrideAll,d=ie.exports=c(e({x:k.x,y:k.y,z:k.z,value:k.value,isomin:k.isomin,isomax:k.isomax,surface:k.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:k.slices,caps:k.caps,text:k.text,hovertext:k.hovertext,xhoverformat:k.xhoverformat,yhoverformat:k.yhoverformat,zhoverformat:k.zhoverformat,valuehoverformat:k.valuehoverformat,hovertemplate:k.hovertemplate},_("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:k.colorbar,opacity:k.opacity,opacityscale:m.opacityscale,lightposition:k.lightposition,lighting:k.lighting,flatshading:k.flatshading,contour:k.contour,hoverinfo:e({},E.hoverinfo),showlegend:e({},E.showlegend,{dflt:!1})}),"calc","nested");d.x.editType=d.y.editType=d.z.editType=d.value.editType="calc+clearAxisTypes",d.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../isosurface/attributes":862,"../surface/attributes":1061}],1103:[function(v,ie,ae){"use strict";var _=v("../../../stackgl_modules").gl_mesh3d,k=v("../../lib/gl_format_color").parseColorScale,m=v("../../lib/str2rgbarray"),E=v("../../components/colorscale").extractOpts,e=v("../../plots/gl3d/zip3"),c=v("../isosurface/convert").findNearestOnAxis,d=v("../isosurface/convert").generateIsoMeshes;function n(a,r,g){this.scene=a,this.uid=g,this.mesh=r,this.name="",this.data=null,this.showContour=!1}var t=n.prototype;t.handlePick=function(a){if(a.object===this.mesh){var r=a.data.index,s=this.data._meshY[r],b=this.data._meshZ[r],x=this.data._Ys.length,S=this.data._Zs.length,p=c(this.data._meshX[r],this.data._Xs).id,w=c(s,this.data._Ys).id,l=c(b,this.data._Zs).id,y=a.index=l+S*w+S*x*p;a.traceCoordinate=[this.data._meshX[y],this.data._meshY[y],this.data._meshZ[y],this.data._value[y]];var A=this.data.hovertext||this.data.text;return Array.isArray(A)&&void 0!==A[y]?a.textLabel=A[y]:A&&(a.textLabel=A),!0}},t.update=function(a){var r=this.scene,g=r.fullSceneLayout;function s(w,l,y,A){return l.map(function(T){return w.d2l(T,0,A)*y})}this.data=d(a);var S={positions:e(s(g.xaxis,a._meshX,r.dataScale[0],a.xcalendar),s(g.yaxis,a._meshY,r.dataScale[1],a.ycalendar),s(g.zaxis,a._meshZ,r.dataScale[2],a.zcalendar)),cells:e(a._meshI,a._meshJ,a._meshK),lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,opacityscale:a.opacityscale,contourEnable:a.contour.show,contourColor:m(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading},p=E(a);S.vertexIntensity=a._meshIntensity,S.vertexIntensityBounds=[p.min,p.max],S.colormap=k(a),this.mesh.update(S)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ie.exports=function i(a,r){var s=_({gl:a.glplot.gl}),b=new n(a,s,r.uid);return s._trace=b,b.update(r),a.glplot.add(s),b}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609,"../isosurface/convert":864}],1104:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./attributes"),m=v("../isosurface/defaults").supplyIsoDefaults,E=v("../surface/defaults").opacityscaleDefaults;ie.exports=function(c,d,n,t){function i(a,r){return _.coerce(c,d,k,a,r)}m(c,d,n,t,i),E(c,d,t,i)}},{"../../lib":503,"../isosurface/defaults":865,"../surface/defaults":1064,"./attributes":1102}],1105:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:v("./convert"),moduleType:"trace",name:"volume",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"../isosurface/calc":863,"./attributes":1102,"./convert":1103,"./defaults":1104}],1106:[function(v,ie,ae){"use strict";var _=v("../bar/attributes"),k=v("../scatter/attributes").line,m=v("../../plots/attributes"),E=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=v("../../plots/template_attributes").hovertemplateAttrs,c=v("../../plots/template_attributes").texttemplateAttrs,d=v("./constants"),n=v("../../lib/extend").extendFlat,t=v("../../components/color");function i(a){return{marker:{color:n({},_.marker.color,{arrayOk:!1,editType:"style"}),line:{color:n({},_.marker.line.color,{arrayOk:!1,editType:"style"}),width:n({},_.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}ie.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:_.x,x0:_.x0,dx:_.dx,y:_.y,y0:_.y0,dy:_.dy,xperiod:_.xperiod,yperiod:_.yperiod,xperiod0:_.xperiod0,yperiod0:_.yperiod0,xperiodalignment:_.xperiodalignment,yperiodalignment:_.yperiodalignment,xhoverformat:E("x"),yhoverformat:E("y"),hovertext:_.hovertext,hovertemplate:e({},{keys:d.eventDataKeys}),hoverinfo:n({},m.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:c({editType:"plot"},{keys:d.eventDataKeys.concat(["label"])}),text:_.text,textposition:_.textposition,insidetextanchor:_.insidetextanchor,textangle:_.textangle,textfont:_.textfont,insidetextfont:_.insidetextfont,outsidetextfont:_.outsidetextfont,constraintext:_.constraintext,cliponaxis:_.cliponaxis,orientation:_.orientation,offset:_.offset,width:_.width,increasing:i(),decreasing:i(),totals:i(),connector:{line:{color:n({},k.color,{dflt:t.defaultLine}),width:n({},k.width,{editType:"plot"}),dash:k.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:_.offsetgroup,alignmentgroup:_.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927,"./constants":1108}],1107:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/axes"),k=v("../../plots/cartesian/align_period"),m=v("../../lib").mergeArray,E=v("../scatter/calc_selection"),e=v("../../constants/numerical").BADNUM;function c(n){return"a"===n||"absolute"===n}function d(n){return"t"===n||"total"===n}ie.exports=function(t,i){var g,s,b,x,S,p,a=_.getFromId(t,i.xaxis||"x"),r=_.getFromId(t,i.yaxis||"y");"h"===i.orientation?(g=a.makeCalcdata(i,"x"),b=r.makeCalcdata(i,"y"),x=k(i,r,"y",b),S=!!i.yperiodalignment,p="y"):(g=r.makeCalcdata(i,"y"),b=a.makeCalcdata(i,"x"),x=k(i,a,"x",b),S=!!i.xperiodalignment,p="x"),s=x.vals;for(var A,w=Math.min(s.length,g.length),l=new Array(w),y=0,T=!1,M=0;M<w;M++){var f=g[M]||0,u=!1;(g[M]!==e||d(i.measure[M])||c(i.measure[M]))&&M+1<w&&(g[M+1]!==e||d(i.measure[M+1])||c(i.measure[M+1]))&&(u=!0);var h=l[M]={i:M,p:s[M],s:f,rawS:f,cNext:u};c(i.measure[M])?(y=h.s,h.isSum=!0,h.dir="totals",h.s=y):d(i.measure[M])?(h.isSum=!0,h.dir="totals",h.s=y):(h.isSum=!1,h.dir=h.rawS<0?"decreasing":"increasing",h.s=y+(A=h.s),y+=A),"totals"===h.dir&&(T=!0),S&&(l[M].orig_p=b[M],l[M][p+"End"]=x.ends[M],l[M][p+"Start"]=x.starts[M]),i.ids&&(h.id=String(i.ids[M])),h.v=(i.base||0)+y}return l.length&&(l[0].hasTotals=T),m(i.text,l,"tx"),m(i.hovertext,l,"htx"),E(l,i),l}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929}],1108:[function(v,ie,ae){"use strict";ie.exports={eventDataKeys:["initial","delta","final"]}},{}],1109:[function(v,ie,ae){"use strict";var _=v("../bar/cross_trace_calc").setGroupPositions;ie.exports=function(m,E){var g,s,e=m._fullLayout,c=m._fullData,d=m.calcdata,n=E.xaxis,t=E.yaxis,i=[],a=[],r=[];for(s=0;s<c.length;s++){var b=c[s];!0===b.visible&&b.xaxis===n._id&&b.yaxis===t._id&&"waterfall"===b.type&&(g=d[s],"h"===b.orientation?r.push(g):a.push(g),i.push(g))}var x={mode:e.waterfallmode,norm:e.waterfallnorm,gap:e.waterfallgap,groupgap:e.waterfallgroupgap};for(_(m,n,t,a,x),_(m,t,n,r,x),s=0;s<i.length;s++){g=i[s];for(var S=0;S<g.length;S++){var p=g[S];!1===p.isSum&&(p.s0+=0===S?0:g[S-1].s),S+1<g.length&&(g[S].nextP0=g[S+1].p0,g[S].nextS0=g[S+1].s0)}}}},{"../bar/cross_trace_calc":651}],1110:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("../bar/defaults").handleGroupingDefaults,m=v("../bar/defaults").handleText,E=v("../scatter/xy_defaults"),e=v("../scatter/period_defaults"),c=v("./attributes"),d=v("../../components/color"),n=v("../../constants/delta.js"),t=n.INCREASING.COLOR,i=n.DECREASING.COLOR;function r(b,x,S){b(x+".marker.color",S),b(x+".marker.line.color",d.defaultLine),b(x+".marker.line.width")}ie.exports={supplyDefaults:function g(b,x,S,p){function w(M,f){return _.coerce(b,x,c,M,f)}if(E(b,x,p,w)){e(b,x,p,w),w("xhoverformat"),w("yhoverformat"),w("measure"),w("orientation",x.x&&!x.y?"h":"v"),w("base"),w("offset"),w("width"),w("text"),w("hovertext"),w("hovertemplate");var y=w("textposition");m(b,x,p,w,y,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==x.textposition&&(w("texttemplate"),x.texttemplate||w("textinfo")),r(w,"increasing",t),r(w,"decreasing",i),r(w,"totals","#4499FF"),w("connector.visible")&&(w("connector.mode"),w("connector.line.width")&&(w("connector.line.color"),w("connector.line.dash")))}else x.visible=!1},crossTraceDefaults:function s(b,x){var p;function w(y){return _.coerce(p._input,p,c,y)}if("group"===x.waterfallmode)for(var l=0;l<b.length;l++)k((p=b[l])._input,p,x,w)}}},{"../../components/color":366,"../../constants/delta.js":473,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":1106}],1111:[function(v,ie,ae){"use strict";ie.exports=function(k,m){return k.x="xVal"in m?m.xVal:m.x,k.y="yVal"in m?m.yVal:m.y,"initial"in m&&(k.initial=m.initial),"delta"in m&&(k.delta=m.delta),"final"in m&&(k.final=m.final),m.xa&&(k.xaxis=m.xa),m.ya&&(k.yaxis=m.ya),k}},{}],1112:[function(v,ie,ae){"use strict";var _=v("../../plots/cartesian/axes").hoverLabelText,k=v("../../components/color").opacity,m=v("../bar/hover").hoverOnBars,E=v("../../constants/delta.js"),e_increasing=E.INCREASING.SYMBOL,e_decreasing=E.DECREASING.SYMBOL;ie.exports=function(n,t,i,a,r){var g=m(n,t,i,a,r);if(g){var s=g.cd,b=s[0].trace,x="h"===b.orientation,S=x?"x":"y",p=x?n.xa:n.ya,y=s[g.index],A=y.isSum?y.b+y.s:y.rawS;if(!y.isSum){g.initial=y.b+y.s-A,g.delta=A,g.final=g.initial+g.delta;var T=w(Math.abs(g.delta));g.deltaLabel=A<0?"("+T+")":T,g.finalLabel=w(g.final),g.initialLabel=w(g.initial)}var M=y.hi||b.hoverinfo,f=[];if(M&&"none"!==M&&"skip"!==M){var u="all"===M,h=M.split("+"),o=function(C){return u||-1!==h.indexOf(C)};y.isSum||(o("final")&&(x?!o("x"):!o("y"))&&f.push(g.finalLabel),o("delta")&&f.push(A<0?g.deltaLabel+" "+e_decreasing:g.deltaLabel+" "+e_increasing),o("initial")&&f.push("Initial: "+g.initialLabel))}return f.length&&(g.extraText=f.join("<br>")),g.color=function c(d,n){var t=d[n.dir].marker,i=t.color,a=t.line.color,r=t.line.width;return k(i)?i:k(a)&&r?a:void 0}(b,y),[g]}function w(C){return _(p,C,b[S+"hoverformat"])}}},{"../../components/color":366,"../../constants/delta.js":473,"../../plots/cartesian/axes":554,"../bar/hover":655}],1113:[function(v,ie,ae){"use strict";ie.exports={attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults").supplyDefaults,crossTraceDefaults:v("./defaults").crossTraceDefaults,supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc"),crossTraceCalc:v("./cross_trace_calc"),plot:v("./plot"),style:v("./style").style,hoverPoints:v("./hover"),eventData:v("./event_data"),selectPoints:v("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:v("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":1106,"./calc":1107,"./cross_trace_calc":1109,"./defaults":1110,"./event_data":1111,"./hover":1112,"./layout_attributes":1114,"./layout_defaults":1115,"./plot":1116,"./style":1117}],1114:[function(v,ie,ae){"use strict";ie.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1115:[function(v,ie,ae){"use strict";var _=v("../../lib"),k=v("./layout_attributes");ie.exports=function(m,E,e){var c=!1;function d(i,a){return _.coerce(m,E,k,i,a)}for(var n=0;n<e.length;n++){var t=e[n];if(t.visible&&"waterfall"===t.type){c=!0;break}}c&&(d("waterfallmode"),d("waterfallgap",.2),d("waterfallgroupgap"))}},{"../../lib":503,"./layout_attributes":1114}],1116:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../lib"),m=v("../../components/drawing"),E=v("../../constants/numerical").BADNUM,e=v("../bar/plot"),c=v("../bar/uniform_text").clearMinTextSize;ie.exports=function(i,a,r,g){var s=i._fullLayout;c("waterfall",s),e.plot(i,a,r,g,{mode:s.waterfallmode,norm:s.waterfallmode,gap:s.waterfallgap,groupgap:s.waterfallgroupgap}),function d(t,i,a,r){var g=i.xaxis,s=i.yaxis;k.makeTraceGroups(r,a,"trace bars").each(function(b){var x=_.select(this),S=b[0].trace,p=k.ensureSingle(x,"g","lines");if(S.connector&&S.connector.visible){var w="h"===S.orientation,l=S.connector.mode,y=p.selectAll("g.line").data(k.identity);y.enter().append("g").classed("line",!0),y.exit().remove();var A=y.size();y.each(function(T,M){if(M===A-1||T.cNext){var f=function n(t,i,a,r){var g=[],s=[],b=r?i:a,x=r?a:i;return g[0]=b.c2p(t.s0,!0),s[0]=x.c2p(t.p0,!0),g[1]=b.c2p(t.s1,!0),s[1]=x.c2p(t.p1,!0),g[2]=b.c2p(t.nextS0,!0),s[2]=x.c2p(t.nextP0,!0),r?[g,s]:[s,g]}(T,g,s,w),u=f[0],h=f[1],o="";u[0]!==E&&h[0]!==E&&u[1]!==E&&h[1]!==E&&("spanning"===l&&!T.isSum&&M>0&&(o+=w?"M"+u[0]+","+h[1]+"V"+h[0]:"M"+u[1]+","+h[0]+"H"+u[0]),"between"!==l&&(T.isSum||M<A-1)&&(o+=w?"M"+u[1]+","+h[0]+"V"+h[1]:"M"+u[0]+","+h[1]+"H"+u[1]),u[2]!==E&&h[2]!==E&&(o+=w?"M"+u[1]+","+h[1]+"V"+h[2]:"M"+u[1]+","+h[1]+"H"+u[2])),""===o&&(o="M0,0Z"),k.ensureSingle(_.select(this),"path").attr("d",o).call(m.setClipUrl,i.layerClipId,t)}})}else p.remove()})}(i,a,r,g)}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],1117:[function(v,ie,ae){"use strict";var _=v("@plotly/d3"),k=v("../../components/drawing"),m=v("../../components/color"),E=v("../../constants/interactions").DESELECTDIM,e=v("../bar/style"),c=v("../bar/uniform_text").resizeText,d=e.styleTextPoints;ie.exports={style:function n(t,i,a){var r=a||_.select(t).selectAll("g.waterfalllayer").selectAll("g.trace");c(t,r,"waterfall"),r.style("opacity",function(g){return g[0].trace.opacity}),r.each(function(g){var s=_.select(this),b=g[0].trace;s.selectAll(".point > path").each(function(x){if(!x.isBlank){var S=b[x.dir].marker;_.select(this).call(m.fill,S.color).call(m.stroke,S.line.color).call(k.dashLine,S.line.dash,S.line.width).style("opacity",b.selectedpoints&&!x.selected?E:1)}}),d(s,b,t),s.selectAll(".lines").each(function(){var x=b.connector.line;k.lineGroupStyle(_.select(this).selectAll("path"),x.width,x.color,x.dash)})})}}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],1118:[function(v,ie,ae){"use strict";var _=v("../plots/cartesian/axes"),k=v("../lib"),m=v("../plot_api/plot_schema"),E=v("./helpers").pointsAccessorFunction,e=v("../constants/numerical").BADNUM;ae.moduleType="transform",ae.name="aggregate";var c=ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},d=c.aggregations;function n(g,s,b,x){if(x.enabled){for(var S=x.target,p=k.nestedProperty(s,S),w=p.get(),y=function t(g,s){var x=s.d2c,S=s.c2d;switch(g.func){case"count":return i;case"first":return a;case"last":return r;case"sum":return function(p,w){for(var l=0,y=0;y<w.length;y++){var A=x(p[w[y]]);A!==e&&(l+=A)}return S(l)};case"avg":return function(p,w){for(var l=0,y=0,A=0;A<w.length;A++){var T=x(p[w[A]]);T!==e&&(l+=T,y++)}return y?S(l/y):e};case"min":return function(p,w){for(var l=1/0,y=0;y<w.length;y++){var A=x(p[w[y]]);A!==e&&(l=Math.min(l,A))}return l===1/0?e:S(l)};case"max":return function(p,w){for(var l=-1/0,y=0;y<w.length;y++){var A=x(p[w[y]]);A!==e&&(l=Math.max(l,A))}return l===-1/0?e:S(l)};case"range":return function(p,w){for(var l=1/0,y=-1/0,A=0;A<w.length;A++){var T=x(p[w[A]]);T!==e&&(l=Math.min(l,T),y=Math.max(y,T))}return y===-1/0||l===1/0?e:S(y-l)};case"change":return function(p,w){var l=x(p[w[0]]),y=x(p[w[w.length-1]]);return l===e||y===e?e:S(y-l)};case"median":return function(p,w){for(var l=[],y=0;y<w.length;y++){var A=x(p[w[y]]);A!==e&&l.push(A)}if(!l.length)return e;l.sort(k.sorterAsc);var T=(l.length-1)/2;return S((l[Math.floor(T)]+l[Math.ceil(T)])/2)};case"mode":return function(p,w){for(var l={},y=0,A=e,T=0;T<w.length;T++){var M=x(p[w[T]]);if(M!==e){var f=l[M]=(l[M]||0)+1;f>y&&(y=f,A=M)}}return y?S(A):e};case"rms":return function(p,w){for(var l=0,y=0,A=0;A<w.length;A++){var T=x(p[w[A]]);T!==e&&(l+=T*T,y++)}return y?S(Math.sqrt(l/y)):e};case"stddev":return function(p,w){var M,l=0,y=0,A=1,T=e;for(M=0;M<w.length&&T===e;M++)T=x(p[w[M]]);if(T===e)return e;for(;M<w.length;M++){var f=x(p[w[M]]);if(f!==e){var u=f-T;l+=u,y+=u*u,A++}}var h="sample"===g.funcmode?A-1:A;return h?Math.sqrt((y-l*l/A)/h):0}}}(x,_.getDataConversions(g,s,S,w)),A=new Array(b.length),T=0;T<b.length;T++)A[T]=y(w,b[T]);p.set(A),"count"===x.func&&k.pushUnique(s._arrayAttrs,S)}}function i(g,s){return s.length}function a(g,s){return g[s[0]]}function r(g,s){return g[s[s.length-1]]}ae.supplyDefaults=function(g,s){var x,b={};function S(C,R){return k.coerce(g,b,c,C,R)}if(!S("enabled"))return b;var w=m.findArrayAttributes(s),l={};for(x=0;x<w.length;x++)l[w[x]]=1;var y=S("groups");if(!Array.isArray(y)){if(!l[y])return b.enabled=!1,b;l[y]=0}var M,A=g.aggregations||[],T=b.aggregations=new Array(A.length);function f(C,R){return k.coerce(A[x],M,d,C,R)}for(x=0;x<A.length;x++){M={_index:x};var u=f("target"),h=f("func");f("enabled")&&u&&(l[u]||"count"===h&&void 0===l[u])?("stddev"===h&&f("funcmode"),l[u]=0,T[x]=M):T[x]={enabled:!1,_index:x}}for(x=0;x<w.length;x++)l[w[x]]&&T.push({target:w[x],func:d.func.dflt,enabled:!0,_index:-1});return b},ae.calcTransform=function(g,s,b){if(b.enabled){var x=b.groups,S=k.getTargetArray(s,{target:x});if(S){var p,w,l,A={},T={},M=[],f=E(s.transforms,b),u=S.length;for(s._length&&(u=Math.min(u,s._length)),p=0;p<u;p++)void 0===(l=A[w=S[p]])?(A[w]=M.length,M.push([p]),T[A[w]]=f(p)):(M[l].push(p),T[A[w]]=(T[A[w]]||[]).concat(f(p)));b._indexToPoints=T;var h=b.aggregations;for(p=0;p<h.length;p++)n(g,s,M,h[p]);"string"==typeof x&&n(g,s,M,{target:x,func:"first",enabled:!0}),s._length=M.length}}}},{"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plots/cartesian/axes":554,"./helpers":1121}],1119:[function(v,ie,ae){"use strict";var _=v("../lib"),k=v("../registry"),m=v("../plots/cartesian/axes"),E=v("./helpers").pointsAccessorFunction,e=v("../constants/filter_ops"),c=e.COMPARISON_OPS,d=e.INTERVAL_OPS,n=e.SET_OPS;ae.moduleType="transform",ae.name="filter",ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(c).concat(d).concat(n),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},ae.supplyDefaults=function(i){var a={};function r(x,S){return _.coerce(i,a,ae.attributes,x,S)}if(r("enabled")){var s=r("target");if(_.isArrayOrTypedArray(s)&&0===s.length)return a.enabled=!1,a;r("preservegaps"),r("operation"),r("value");var b=k.getComponentMethod("calendars","handleDefaults");b(i,a,"valuecalendar",null),b(i,a,"targetcalendar",null)}return a},ae.calcTransform=function(i,a,r){if(r.enabled){var g=_.getTargetArray(a,r);if(g){var s=r.target,b=g.length;a._length&&(b=Math.min(b,a._length));var x=r.targetcalendar,S=a._arrayAttrs,p=r.preservegaps;if("string"==typeof s){var w=_.nestedProperty(a,s+"calendar").get();w&&(x=w)}var u,h,y=function t(i,a,r){var g=i.operation,s=i.value,b=Array.isArray(s);function x(l){return-1!==l.indexOf(g)}var w,S=function(l){return a(l,0,i.valuecalendar)},p=function(l){return a(l,0,r)};switch(x(c)?w=S(b?s[0]:s):x(d)?w=b?[S(s[0]),S(s[1])]:[S(s),S(s)]:x(n)&&(w=b?s.map(S):[S(s)]),g){case"=":return function(l){return p(l)===w};case"!=":return function(l){return p(l)!==w};case"<":return function(l){return p(l)<w};case"<=":return function(l){return p(l)<=w};case">":return function(l){return p(l)>w};case">=":return function(l){return p(l)>=w};case"[]":return function(l){var y=p(l);return y>=w[0]&&y<=w[1]};case"()":return function(l){var y=p(l);return y>w[0]&&y<w[1]};case"[)":return function(l){var y=p(l);return y>=w[0]&&y<w[1]};case"(]":return function(l){var y=p(l);return y>w[0]&&y<=w[1]};case"][":return function(l){var y=p(l);return y<=w[0]||y>=w[1]};case")(":return function(l){var y=p(l);return y<w[0]||y>w[1]};case"](":return function(l){var y=p(l);return y<=w[0]||y>w[1]};case")[":return function(l){var y=p(l);return y<w[0]||y>=w[1]};case"{}":return function(l){return-1!==w.indexOf(p(l))};case"}{":return function(l){return-1===w.indexOf(p(l))}}}(r,m.getDataToCoordFunc(i,a,s,g),x),A={},T={},M=0;p?(u=function(z){A[z.astr]=_.extendDeep([],z.get()),z.set(new Array(b))},h=function(z,O){var I=A[z.astr][O];z.get()[O]=I}):(u=function(z){A[z.astr]=_.extendDeep([],z.get()),z.set([])},h=function(z,O){var I=A[z.astr][O];z.get().push(I)}),f(u);for(var o=E(a.transforms,r),C=0;C<b;C++)y(g[C])?(f(h,C),T[M++]=o(C)):p&&M++;r._indexToPoints=T,a._length=M}}function f(z,O){for(var I=0;I<S.length;I++)z(_.nestedProperty(a,S[I]),O)}}},{"../constants/filter_ops":475,"../lib":503,"../plots/cartesian/axes":554,"../registry":638,"./helpers":1121}],1120:[function(v,ie,ae){"use strict";var _=v("../lib"),k=v("../plot_api/plot_schema"),m=v("../plots/plots"),E=v("./helpers").pointsAccessorFunction;function e(c,d){var n,t,i,a,r,g,s,b,x,S,p=d.transform,w=d.transformIndex,l=c.transforms[w].groups,y=E(c.transforms,p);if(!_.isArrayOrTypedArray(l)||0===l.length)return[c];var A=_.filterUnique(l),T=new Array(A.length),M=l.length,f=k.findArrayAttributes(c),u=p.styles||[],h={};for(n=0;n<u.length;n++)h[u[n].target]=u[n].value;p.styles&&(S=_.keyedContainer(p,"styles","target","value.name"));var o={},C={};for(n=0;n<A.length;n++){o[g=A[n]]=n,C[g]=0,(s=T[n]=_.extendDeepNoArrays({},c))._group=g,s.transforms[w]._indexToPoints={};var R=null;for(S&&(R=S.get(g)),s.name=R||""===R?R:_.templateString(p.nameformat,{trace:c.name,group:g}),b=s.transforms,s.transforms=[],t=0;t<b.length;t++)s.transforms[t]=_.extendDeepNoArrays({},b[t]);for(t=0;t<f.length;t++)_.nestedProperty(s,f[t]).set([])}for(i=0;i<f.length;i++){for(a=f[i],t=0,x=[];t<A.length;t++)x[t]=_.nestedProperty(T[t],a).get();for(r=_.nestedProperty(c,a).get(),t=0;t<M;t++)x[o[l[t]]].push(r[t])}for(t=0;t<M;t++)(s=T[o[l[t]]]).transforms[w]._indexToPoints[C[l[t]]]=y(t),C[l[t]]++;for(n=0;n<A.length;n++)g=A[n],m.clearExpandedTraceDefaultColors(s=T[n]),s=_.extendDeepNoArrays(s,h[g]||{});return T}ae.moduleType="transform",ae.name="groupby",ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},ae.supplyDefaults=function(c,d,n){var t,i={};function a(S,p){return _.coerce(c,i,ae.attributes,S,p)}if(!a("enabled"))return i;a("groups"),a("nameformat",n._dataLength>1?"%{group} (%{trace})":"%{group}");var g=c.styles,s=i.styles=[];if(g)for(t=0;t<g.length;t++){var b=s[t]={};_.coerce(g[t],s[t],ae.attributes.styles,"target");var x=_.coerce(g[t],s[t],ae.attributes.styles,"value");_.isPlainObject(x)?b.value=_.extendDeep({},x):x&&delete b.value}return i},ae.transform=function(c,d){var n,t,i,a=[];for(t=0;t<c.length;t++)for(n=e(c[t],d),i=0;i<n.length;i++)a.push(n[i]);return a}},{"../lib":503,"../plot_api/plot_schema":542,"../plots/plots":619,"./helpers":1121}],1121:[function(v,ie,ae){"use strict";ae.pointsAccessorFunction=function(_,k){for(var m,E,e=0;e<_.length&&(m=_[e])!==k;e++)!m._indexToPoints||!1===m.enabled||(E=m._indexToPoints);return E?function(d){return E[d]}:function(d){return[d]}}},{}],1122:[function(v,ie,ae){"use strict";var _=v("../lib"),k=v("../plots/cartesian/axes"),m=v("./helpers").pointsAccessorFunction,E=v("../constants/numerical").BADNUM;function e(d,n,t,i){var g,a=new Array(i),r=new Array(i);for(g=0;g<i;g++)a[g]={v:n[g],i:g};for(a.sort(function c(d,n){switch(d.order){case"ascending":return function(t,i){var a=n(t.v),r=n(i.v);return a===E?1:r===E?-1:a-r};case"descending":return function(t,i){var a=n(t.v),r=n(i.v);return a===E?1:r===E?-1:r-a}}}(d,t)),g=0;g<i;g++)r[g]=a[g].i;return r}ae.moduleType="transform",ae.name="sort",ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},ae.supplyDefaults=function(d){var n={};function t(a,r){return _.coerce(d,n,ae.attributes,a,r)}return t("enabled")&&(t("target"),t("order")),n},ae.calcTransform=function(d,n,t){if(t.enabled){var i=_.getTargetArray(n,t);if(i){var a=t.target,r=i.length;n._length&&(r=Math.min(r,n._length));var p,w,g=n._arrayAttrs,b=e(t,i,k.getDataToCoordFunc(d,n,a,i),r),x=m(n.transforms,t),S={};for(p=0;p<g.length;p++){var l=_.nestedProperty(n,g[p]),y=l.get(),A=new Array(r);for(w=0;w<r;w++)A[w]=y[b[w]];l.set(A)}for(w=0;w<r;w++)S[w]=x(b[w]);t._indexToPoints=S,n._length=r}}}},{"../constants/numerical":479,"../lib":503,"../plots/cartesian/axes":554,"./helpers":1121}],1123:[function(v,ie,ae){"use strict";ae.version="2.12.1"},{}],1124:[function(v,ie,ae){(function(_){(function(){!function(k){"object"==typeof ae&&void 0!==ie?ie.exports=k():("undefined"!=typeof window?window:void 0!==_?_:"undefined"!=typeof self?self:this).stackgl=k()}(function(){return function e(c,d,n){function t(r,g){if(!d[r]){if(!c[r]){var s="function"==typeof v&&v;if(!g&&s)return s(r,!0);if(i)return i(r,!0);var b=new Error("Cannot find module '"+r+"'");throw b.code="MODULE_NOT_FOUND",b}var x=d[r]={exports:{}};c[r][0].call(x.exports,function(S){return t(c[r][1][S]||S)},x,x.exports,e,c,d,n)}return d[r].exports}for(var i="function"==typeof v&&v,a=0;a<n.length;a++)t(n[a]);return t}({1:[function(e,c,d){"use strict";d.byteLength=function b(y){var A=s(y),M=A[1];return 3*(A[0]+M)/4-M},d.toByteArray=function S(y){var A,C,T=s(y),M=T[0],f=T[1],u=new i(function x(y,A,T){return 3*(A+T)/4-T}(0,M,f)),h=0,o=f>0?M-4:M;for(C=0;C<o;C+=4)A=t[y.charCodeAt(C)]<<18|t[y.charCodeAt(C+1)]<<12|t[y.charCodeAt(C+2)]<<6|t[y.charCodeAt(C+3)],u[h++]=A>>16&255,u[h++]=A>>8&255,u[h++]=255&A;return 2===f&&(A=t[y.charCodeAt(C)]<<2|t[y.charCodeAt(C+1)]>>4,u[h++]=255&A),1===f&&(A=t[y.charCodeAt(C)]<<10|t[y.charCodeAt(C+1)]<<4|t[y.charCodeAt(C+2)]>>2,u[h++]=A>>8&255,u[h++]=255&A),u},d.fromByteArray=function l(y){for(var A,T=y.length,M=T%3,f=[],u=16383,h=0,o=T-M;h<o;h+=u)f.push(w(y,h,h+u>o?o:h+u));return 1===M?f.push(n[(A=y[T-1])>>2]+n[A<<4&63]+"=="):2===M&&f.push(n[(A=(y[T-2]<<8)+y[T-1])>>10]+n[A>>4&63]+n[A<<2&63]+"="),f.join("")};for(var n=[],t=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,g=a.length;r<g;++r)n[r]=a[r],t[a.charCodeAt(r)]=r;function s(y){var A=y.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var T=y.indexOf("=");return-1===T&&(T=A),[T,T===A?0:4-T%4]}function p(y){return n[y>>18&63]+n[y>>12&63]+n[y>>6&63]+n[63&y]}function w(y,A,T){for(var f=[],u=A;u<T;u+=3)f.push(p((y[u]<<16&16711680)+(y[u+1]<<8&65280)+(255&y[u+2])));return f.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63},{}],2:[function(e,c,d){},{}],3:[function(e,c,d){(function(n){(function(){"use strict";var t=e("base64-js"),i=e("ieee754");d.Buffer=s,d.SlowBuffer=function M(we){return+we!=we&&(we=0),s.alloc(+we)},d.INSPECT_MAX_BYTES=50;var a=2147483647;function g(we){if(we>a)throw new RangeError('The value "'+we+'" is invalid for option "size"');var de=new Uint8Array(we);return de.__proto__=s.prototype,de}function s(we,de,be){if("number"==typeof we){if("string"==typeof de)throw new TypeError('The "string" argument must be of type string. Received type number');return p(we)}return b(we,de,be)}function b(we,de,be){if("string"==typeof we)return function w(we,de){if(("string"!=typeof de||""===de)&&(de="utf8"),!s.isEncoding(de))throw new TypeError("Unknown encoding: "+de);var be=0|f(we,de),Le=g(be),De=Le.write(we,de);return De!==be&&(Le=Le.slice(0,De)),Le}(we,de);if(ArrayBuffer.isView(we))return l(we);if(null==we)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof we);if(xe(we,ArrayBuffer)||we&&xe(we.buffer,ArrayBuffer))return function y(we,de,be){if(de<0||we.byteLength<de)throw new RangeError('"offset" is outside of buffer bounds');if(we.byteLength<de+(be||0))throw new RangeError('"length" is outside of buffer bounds');var Le;return(Le=void 0===de&&void 0===be?new Uint8Array(we):void 0===be?new Uint8Array(we,de):new Uint8Array(we,de,be)).__proto__=s.prototype,Le}(we,de,be);if("number"==typeof we)throw new TypeError('The "value" argument must not be of type number. Received type number');var Le=we.valueOf&&we.valueOf();if(null!=Le&&Le!==we)return s.from(Le,de,be);var De=function A(we){if(s.isBuffer(we)){var de=0|T(we.length),be=g(de);return 0===be.length||we.copy(be,0,0,de),be}return void 0!==we.length?"number"!=typeof we.length||ke(we.length)?g(0):l(we):"Buffer"===we.type&&Array.isArray(we.data)?l(we.data):void 0}(we);if(De)return De;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof we[Symbol.toPrimitive])return s.from(we[Symbol.toPrimitive]("string"),de,be);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof we)}function x(we){if("number"!=typeof we)throw new TypeError('"size" argument must be of type number');if(we<0)throw new RangeError('The value "'+we+'" is invalid for option "size"')}function p(we){return x(we),g(we<0?0:0|T(we))}function l(we){for(var de=we.length<0?0:0|T(we.length),be=g(de),Le=0;Le<de;Le+=1)be[Le]=255&we[Le];return be}function T(we){if(we>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|we}function f(we,de){if(s.isBuffer(we))return we.length;if(ArrayBuffer.isView(we)||xe(we,ArrayBuffer))return we.byteLength;if("string"!=typeof we)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof we);var be=we.length,Le=arguments.length>2&&!0===arguments[2];if(!Le&&0===be)return 0;for(var De=!1;;)switch(de){case"ascii":case"latin1":case"binary":return be;case"utf8":case"utf-8":return j(we).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*be;case"hex":return be>>>1;case"base64":return ge(we).length;default:if(De)return Le?-1:j(we).length;de=(""+de).toLowerCase(),De=!0}}function u(we,de,be){var Le=!1;if((void 0===de||de<0)&&(de=0),de>this.length||((void 0===be||be>this.length)&&(be=this.length),be<=0)||(be>>>=0)<=(de>>>=0))return"";for(we||(we="utf8");;)switch(we){case"hex":return W(this,de,be);case"utf8":case"utf-8":return U(this,de,be);case"ascii":return se(this,de,be);case"latin1":case"binary":return ne(this,de,be);case"base64":return N(this,de,be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,de,be);default:if(Le)throw new TypeError("Unknown encoding: "+we);we=(we+"").toLowerCase(),Le=!0}}function h(we,de,be){var Le=we[de];we[de]=we[be],we[be]=Le}function o(we,de,be,Le,De){if(0===we.length)return-1;if("string"==typeof be?(Le=be,be=0):be>2147483647?be=2147483647:be<-2147483648&&(be=-2147483648),ke(be=+be)&&(be=De?0:we.length-1),be<0&&(be=we.length+be),be>=we.length){if(De)return-1;be=we.length-1}else if(be<0){if(!De)return-1;be=0}if("string"==typeof de&&(de=s.from(de,Le)),s.isBuffer(de))return 0===de.length?-1:C(we,de,be,Le,De);if("number"==typeof de)return de&=255,"function"==typeof Uint8Array.prototype.indexOf?De?Uint8Array.prototype.indexOf.call(we,de,be):Uint8Array.prototype.lastIndexOf.call(we,de,be):C(we,[de],be,Le,De);throw new TypeError("val must be string, number or Buffer")}function C(we,de,be,Le,De){var Ue,ye=1,Ce=we.length,Fe=de.length;if(void 0!==Le&&("ucs2"===(Le=String(Le).toLowerCase())||"ucs-2"===Le||"utf16le"===Le||"utf-16le"===Le)){if(we.length<2||de.length<2)return-1;ye=2,Ce/=2,Fe/=2,be/=2}function Ke(gt,Nt){return 1===ye?gt[Nt]:gt.readUInt16BE(Nt*ye)}if(De){var Be=-1;for(Ue=be;Ue<Ce;Ue++)if(Ke(we,Ue)===Ke(de,-1===Be?0:Ue-Be)){if(-1===Be&&(Be=Ue),Ue-Be+1===Fe)return Be*ye}else-1!==Be&&(Ue-=Ue-Be),Be=-1}else for(be+Fe>Ce&&(be=Ce-Fe),Ue=be;Ue>=0;Ue--){for(var Ie=!0,nt=0;nt<Fe;nt++)if(Ke(we,Ue+nt)!==Ke(de,nt)){Ie=!1;break}if(Ie)return Ue}return-1}function R(we,de,be,Le){be=Number(be)||0;var De=we.length-be;Le?(Le=Number(Le))>De&&(Le=De):Le=De;var ye=de.length;Le>ye/2&&(Le=ye/2);for(var Ce=0;Ce<Le;++Ce){var Fe=parseInt(de.substr(2*Ce,2),16);if(ke(Fe))return Ce;we[be+Ce]=Fe}return Ce}function z(we,de,be,Le){return pe(j(de,we.length-be),we,be,Le)}function O(we,de,be,Le){return pe(function re(we){for(var de=[],be=0;be<we.length;++be)de.push(255&we.charCodeAt(be));return de}(de),we,be,Le)}function I(we,de,be,Le){return O(we,de,be,Le)}function F(we,de,be,Le){return pe(ge(de),we,be,Le)}function D(we,de,be,Le){return pe(function le(we,de){for(var be,Le,ye=[],Ce=0;Ce<we.length&&!((de-=2)<0);++Ce)Le=(be=we.charCodeAt(Ce))>>8,ye.push(be%256),ye.push(Le);return ye}(de,we.length-be),we,be,Le)}function N(we,de,be){return t.fromByteArray(0===de&&be===we.length?we:we.slice(de,be))}function U(we,de,be){be=Math.min(we.length,be);for(var Le=[],De=de;De<be;){var Ke,Ue,Be,Ie,ye=we[De],Ce=null,Fe=ye>239?4:ye>223?3:ye>191?2:1;if(De+Fe<=be)switch(Fe){case 1:ye<128&&(Ce=ye);break;case 2:128==(192&(Ke=we[De+1]))&&(Ie=(31&ye)<<6|63&Ke)>127&&(Ce=Ie);break;case 3:Ue=we[De+2],128==(192&(Ke=we[De+1]))&&128==(192&Ue)&&(Ie=(15&ye)<<12|(63&Ke)<<6|63&Ue)>2047&&(Ie<55296||Ie>57343)&&(Ce=Ie);break;case 4:Ue=we[De+2],Be=we[De+3],128==(192&(Ke=we[De+1]))&&128==(192&Ue)&&128==(192&Be)&&(Ie=(15&ye)<<18|(63&Ke)<<12|(63&Ue)<<6|63&Be)>65535&&Ie<1114112&&(Ce=Ie)}null===Ce?(Ce=65533,Fe=1):Ce>65535&&(Le.push((Ce-=65536)>>>10&1023|55296),Ce=56320|1023&Ce),Le.push(Ce),De+=Fe}return function oe(we){var de=we.length;if(de<=X)return String.fromCharCode.apply(String,we);for(var be="",Le=0;Le<de;)be+=String.fromCharCode.apply(String,we.slice(Le,Le+=X));return be}(Le)}d.kMaxLength=a,!(s.TYPED_ARRAY_SUPPORT=function r(){try{var we=new Uint8Array(1);return we.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===we.foo()}catch(de){return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(we,de,be){return b(we,de,be)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(we,de,be){return function S(we,de,be){return x(we),we<=0?g(we):void 0!==de?"string"==typeof be?g(we).fill(de,be):g(we).fill(de):g(we)}(we,de,be)},s.allocUnsafe=function(we){return p(we)},s.allocUnsafeSlow=function(we){return p(we)},s.isBuffer=function(de){return null!=de&&!0===de._isBuffer&&de!==s.prototype},s.compare=function(de,be){if(xe(de,Uint8Array)&&(de=s.from(de,de.offset,de.byteLength)),xe(be,Uint8Array)&&(be=s.from(be,be.offset,be.byteLength)),!s.isBuffer(de)||!s.isBuffer(be))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(de===be)return 0;for(var Le=de.length,De=be.length,ye=0,Ce=Math.min(Le,De);ye<Ce;++ye)if(de[ye]!==be[ye]){Le=de[ye],De=be[ye];break}return Le<De?-1:De<Le?1:0},s.isEncoding=function(de){switch(String(de).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(de,be){if(!Array.isArray(de))throw new TypeError('"list" argument must be an Array of Buffers');if(0===de.length)return s.alloc(0);var Le;if(void 0===be)for(be=0,Le=0;Le<de.length;++Le)be+=de[Le].length;var De=s.allocUnsafe(be),ye=0;for(Le=0;Le<de.length;++Le){var Ce=de[Le];if(xe(Ce,Uint8Array)&&(Ce=s.from(Ce)),!s.isBuffer(Ce))throw new TypeError('"list" argument must be an Array of Buffers');Ce.copy(De,ye),ye+=Ce.length}return De},s.byteLength=f,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var de=this.length;if(de%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var be=0;be<de;be+=2)h(this,be,be+1);return this},s.prototype.swap32=function(){var de=this.length;if(de%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var be=0;be<de;be+=4)h(this,be,be+3),h(this,be+1,be+2);return this},s.prototype.swap64=function(){var de=this.length;if(de%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var be=0;be<de;be+=8)h(this,be,be+7),h(this,be+1,be+6),h(this,be+2,be+5),h(this,be+3,be+4);return this},s.prototype.toLocaleString=s.prototype.toString=function(){var de=this.length;return 0===de?"":0===arguments.length?U(this,0,de):u.apply(this,arguments)},s.prototype.equals=function(de){if(!s.isBuffer(de))throw new TypeError("Argument must be a Buffer");return this===de||0===s.compare(this,de)},s.prototype.inspect=function(){var de="",be=d.INSPECT_MAX_BYTES;return de=this.toString("hex",0,be).replace(/(.{2})/g,"$1 ").trim(),this.length>be&&(de+=" ... "),"<Buffer "+de+">"},s.prototype.compare=function(de,be,Le,De,ye){if(xe(de,Uint8Array)&&(de=s.from(de,de.offset,de.byteLength)),!s.isBuffer(de))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof de);if(void 0===be&&(be=0),void 0===Le&&(Le=de?de.length:0),void 0===De&&(De=0),void 0===ye&&(ye=this.length),be<0||Le>de.length||De<0||ye>this.length)throw new RangeError("out of range index");if(De>=ye&&be>=Le)return 0;if(De>=ye)return-1;if(be>=Le)return 1;if(this===de)return 0;for(var Ce=(ye>>>=0)-(De>>>=0),Fe=(Le>>>=0)-(be>>>=0),Ke=Math.min(Ce,Fe),Ue=this.slice(De,ye),Be=de.slice(be,Le),Ie=0;Ie<Ke;++Ie)if(Ue[Ie]!==Be[Ie]){Ce=Ue[Ie],Fe=Be[Ie];break}return Ce<Fe?-1:Fe<Ce?1:0},s.prototype.includes=function(de,be,Le){return-1!==this.indexOf(de,be,Le)},s.prototype.indexOf=function(de,be,Le){return o(this,de,be,Le,!0)},s.prototype.lastIndexOf=function(de,be,Le){return o(this,de,be,Le,!1)},s.prototype.write=function(de,be,Le,De){if(void 0===be)De="utf8",Le=this.length,be=0;else if(void 0===Le&&"string"==typeof be)De=be,Le=this.length,be=0;else{if(!isFinite(be))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");be>>>=0,isFinite(Le)?(Le>>>=0,void 0===De&&(De="utf8")):(De=Le,Le=void 0)}var ye=this.length-be;if((void 0===Le||Le>ye)&&(Le=ye),de.length>0&&(Le<0||be<0)||be>this.length)throw new RangeError("Attempt to write outside buffer bounds");De||(De="utf8");for(var Ce=!1;;)switch(De){case"hex":return R(this,de,be,Le);case"utf8":case"utf-8":return z(this,de,be,Le);case"ascii":return O(this,de,be,Le);case"latin1":case"binary":return I(this,de,be,Le);case"base64":return F(this,de,be,Le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,de,be,Le);default:if(Ce)throw new TypeError("Unknown encoding: "+De);De=(""+De).toLowerCase(),Ce=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var X=4096;function se(we,de,be){var Le="";be=Math.min(we.length,be);for(var De=de;De<be;++De)Le+=String.fromCharCode(127&we[De]);return Le}function ne(we,de,be){var Le="";be=Math.min(we.length,be);for(var De=de;De<be;++De)Le+=String.fromCharCode(we[De]);return Le}function W(we,de,be){var Le=we.length;(!de||de<0)&&(de=0),(!be||be<0||be>Le)&&(be=Le);for(var De="",ye=de;ye<be;++ye)De+=J(we[ye]);return De}function G(we,de,be){for(var Le=we.slice(de,be),De="",ye=0;ye<Le.length;ye+=2)De+=String.fromCharCode(Le[ye]+256*Le[ye+1]);return De}function $(we,de,be){if(we%1!=0||we<0)throw new RangeError("offset is not uint");if(we+de>be)throw new RangeError("Trying to access beyond buffer length")}function V(we,de,be,Le,De,ye){if(!s.isBuffer(we))throw new TypeError('"buffer" argument must be a Buffer instance');if(de>De||de<ye)throw new RangeError('"value" argument is out of bounds');if(be+Le>we.length)throw new RangeError("Index out of range")}function H(we,de,be,Le,De,ye){if(be+Le>we.length)throw new RangeError("Index out of range");if(be<0)throw new RangeError("Index out of range")}function q(we,de,be,Le,De){return de=+de,be>>>=0,De||H(we,0,be,4),i.write(we,de,be,Le,23,4),be+4}function K(we,de,be,Le,De){return de=+de,be>>>=0,De||H(we,0,be,8),i.write(we,de,be,Le,52,8),be+8}s.prototype.slice=function(de,be){var Le=this.length;(de=~~de)<0?(de+=Le)<0&&(de=0):de>Le&&(de=Le),(be=void 0===be?Le:~~be)<0?(be+=Le)<0&&(be=0):be>Le&&(be=Le),be<de&&(be=de);var De=this.subarray(de,be);return De.__proto__=s.prototype,De},s.prototype.readUIntLE=function(de,be,Le){de>>>=0,be>>>=0,Le||$(de,be,this.length);for(var De=this[de],ye=1,Ce=0;++Ce<be&&(ye*=256);)De+=this[de+Ce]*ye;return De},s.prototype.readUIntBE=function(de,be,Le){de>>>=0,be>>>=0,Le||$(de,be,this.length);for(var De=this[de+--be],ye=1;be>0&&(ye*=256);)De+=this[de+--be]*ye;return De},s.prototype.readUInt8=function(de,be){return de>>>=0,be||$(de,1,this.length),this[de]},s.prototype.readUInt16LE=function(de,be){return de>>>=0,be||$(de,2,this.length),this[de]|this[de+1]<<8},s.prototype.readUInt16BE=function(de,be){return de>>>=0,be||$(de,2,this.length),this[de]<<8|this[de+1]},s.prototype.readUInt32LE=function(de,be){return de>>>=0,be||$(de,4,this.length),(this[de]|this[de+1]<<8|this[de+2]<<16)+16777216*this[de+3]},s.prototype.readUInt32BE=function(de,be){return de>>>=0,be||$(de,4,this.length),16777216*this[de]+(this[de+1]<<16|this[de+2]<<8|this[de+3])},s.prototype.readIntLE=function(de,be,Le){de>>>=0,be>>>=0,Le||$(de,be,this.length);for(var De=this[de],ye=1,Ce=0;++Ce<be&&(ye*=256);)De+=this[de+Ce]*ye;return De>=(ye*=128)&&(De-=Math.pow(2,8*be)),De},s.prototype.readIntBE=function(de,be,Le){de>>>=0,be>>>=0,Le||$(de,be,this.length);for(var De=be,ye=1,Ce=this[de+--De];De>0&&(ye*=256);)Ce+=this[de+--De]*ye;return Ce>=(ye*=128)&&(Ce-=Math.pow(2,8*be)),Ce},s.prototype.readInt8=function(de,be){return de>>>=0,be||$(de,1,this.length),128&this[de]?-1*(255-this[de]+1):this[de]},s.prototype.readInt16LE=function(de,be){de>>>=0,be||$(de,2,this.length);var Le=this[de]|this[de+1]<<8;return 32768&Le?4294901760|Le:Le},s.prototype.readInt16BE=function(de,be){de>>>=0,be||$(de,2,this.length);var Le=this[de+1]|this[de]<<8;return 32768&Le?4294901760|Le:Le},s.prototype.readInt32LE=function(de,be){return de>>>=0,be||$(de,4,this.length),this[de]|this[de+1]<<8|this[de+2]<<16|this[de+3]<<24},s.prototype.readInt32BE=function(de,be){return de>>>=0,be||$(de,4,this.length),this[de]<<24|this[de+1]<<16|this[de+2]<<8|this[de+3]},s.prototype.readFloatLE=function(de,be){return de>>>=0,be||$(de,4,this.length),i.read(this,de,!0,23,4)},s.prototype.readFloatBE=function(de,be){return de>>>=0,be||$(de,4,this.length),i.read(this,de,!1,23,4)},s.prototype.readDoubleLE=function(de,be){return de>>>=0,be||$(de,8,this.length),i.read(this,de,!0,52,8)},s.prototype.readDoubleBE=function(de,be){return de>>>=0,be||$(de,8,this.length),i.read(this,de,!1,52,8)},s.prototype.writeUIntLE=function(de,be,Le,De){de=+de,be>>>=0,Le>>>=0,De||V(this,de,be,Le,Math.pow(2,8*Le)-1,0);var Ce=1,Fe=0;for(this[be]=255&de;++Fe<Le&&(Ce*=256);)this[be+Fe]=de/Ce&255;return be+Le},s.prototype.writeUIntBE=function(de,be,Le,De){de=+de,be>>>=0,Le>>>=0,De||V(this,de,be,Le,Math.pow(2,8*Le)-1,0);var Ce=Le-1,Fe=1;for(this[be+Ce]=255&de;--Ce>=0&&(Fe*=256);)this[be+Ce]=de/Fe&255;return be+Le},s.prototype.writeUInt8=function(de,be,Le){return de=+de,be>>>=0,Le||V(this,de,be,1,255,0),this[be]=255&de,be+1},s.prototype.writeUInt16LE=function(de,be,Le){return de=+de,be>>>=0,Le||V(this,de,be,2,65535,0),this[be]=255&de,this[be+1]=de>>>8,be+2},s.prototype.writeUInt16BE=function(de,be,Le){return de=+de,be>>>=0,Le||V(this,de,be,2,65535,0),this[be]=de>>>8,this[be+1]=255&de,be+2},s.prototype.writeUInt32LE=function(de,be,Le){return de=+de,be>>>=0,Le||V(this,de,be,4,4294967295,0),this[be+3]=de>>>24,this[be+2]=de>>>16,this[be+1]=de>>>8,this[be]=255&de,be+4},s.prototype.writeUInt32BE=function(de,be,Le){return de=+de,be>>>=0,Le||V(this,de,be,4,4294967295,0),this[be]=de>>>24,this[be+1]=de>>>16,this[be+2]=de>>>8,this[be+3]=255&de,be+4},s.prototype.writeIntLE=function(de,be,Le,De){if(de=+de,be>>>=0,!De){var ye=Math.pow(2,8*Le-1);V(this,de,be,Le,ye-1,-ye)}var Ce=0,Fe=1,Ke=0;for(this[be]=255&de;++Ce<Le&&(Fe*=256);)de<0&&0===Ke&&0!==this[be+Ce-1]&&(Ke=1),this[be+Ce]=(de/Fe>>0)-Ke&255;return be+Le},s.prototype.writeIntBE=function(de,be,Le,De){if(de=+de,be>>>=0,!De){var ye=Math.pow(2,8*Le-1);V(this,de,be,Le,ye-1,-ye)}var Ce=Le-1,Fe=1,Ke=0;for(this[be+Ce]=255&de;--Ce>=0&&(Fe*=256);)de<0&&0===Ke&&0!==this[be+Ce+1]&&(Ke=1),this[be+Ce]=(de/Fe>>0)-Ke&255;return be+Le},s.prototype.writeInt8=function(de,be,Le){return de=+de,be>>>=0,Le||V(this,de,be,1,127,-128),de<0&&(de=255+de+1),this[be]=255&de,be+1},s.prototype.writeInt16LE=function(de,be,Le){return de=+de,be>>>=0,Le||V(this,de,be,2,32767,-32768),this[be]=255&de,this[be+1]=de>>>8,be+2},s.prototype.writeInt16BE=function(de,be,Le){return de=+de,be>>>=0,Le||V(this,de,be,2,32767,-32768),this[be]=de>>>8,this[be+1]=255&de,be+2},s.prototype.writeInt32LE=function(de,be,Le){return de=+de,be>>>=0,Le||V(this,de,be,4,2147483647,-2147483648),this[be]=255&de,this[be+1]=de>>>8,this[be+2]=de>>>16,this[be+3]=de>>>24,be+4},s.prototype.writeInt32BE=function(de,be,Le){return de=+de,be>>>=0,Le||V(this,de,be,4,2147483647,-2147483648),de<0&&(de=4294967295+de+1),this[be]=de>>>24,this[be+1]=de>>>16,this[be+2]=de>>>8,this[be+3]=255&de,be+4},s.prototype.writeFloatLE=function(de,be,Le){return q(this,de,be,!0,Le)},s.prototype.writeFloatBE=function(de,be,Le){return q(this,de,be,!1,Le)},s.prototype.writeDoubleLE=function(de,be,Le){return K(this,de,be,!0,Le)},s.prototype.writeDoubleBE=function(de,be,Le){return K(this,de,be,!1,Le)},s.prototype.copy=function(de,be,Le,De){if(!s.isBuffer(de))throw new TypeError("argument should be a Buffer");if(Le||(Le=0),!De&&0!==De&&(De=this.length),be>=de.length&&(be=de.length),be||(be=0),De>0&&De<Le&&(De=Le),De===Le||0===de.length||0===this.length)return 0;if(be<0)throw new RangeError("targetStart out of bounds");if(Le<0||Le>=this.length)throw new RangeError("Index out of range");if(De<0)throw new RangeError("sourceEnd out of bounds");De>this.length&&(De=this.length),de.length-be<De-Le&&(De=de.length-be+Le);var ye=De-Le;if(this===de&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(be,Le,De);else if(this===de&&Le<be&&be<De)for(var Ce=ye-1;Ce>=0;--Ce)de[Ce+be]=this[Ce+Le];else Uint8Array.prototype.set.call(de,this.subarray(Le,De),be);return ye},s.prototype.fill=function(de,be,Le,De){if("string"==typeof de){if("string"==typeof be?(De=be,be=0,Le=this.length):"string"==typeof Le&&(De=Le,Le=this.length),void 0!==De&&"string"!=typeof De)throw new TypeError("encoding must be a string");if("string"==typeof De&&!s.isEncoding(De))throw new TypeError("Unknown encoding: "+De);if(1===de.length){var ye=de.charCodeAt(0);("utf8"===De&&ye<128||"latin1"===De)&&(de=ye)}}else"number"==typeof de&&(de&=255);if(be<0||this.length<be||this.length<Le)throw new RangeError("Out of range index");if(Le<=be)return this;var Ce;if(be>>>=0,Le=void 0===Le?this.length:Le>>>0,de||(de=0),"number"==typeof de)for(Ce=be;Ce<Le;++Ce)this[Ce]=de;else{var Fe=s.isBuffer(de)?de:s.from(de,De),Ke=Fe.length;if(0===Ke)throw new TypeError('The value "'+de+'" is invalid for argument "value"');for(Ce=0;Ce<Le-be;++Ce)this[Ce+be]=Fe[Ce%Ke]}return this};var Y=/[^+/0-9A-Za-z-_]/g;function J(we){return we<16?"0"+we.toString(16):we.toString(16)}function j(we,de){de=de||1/0;for(var be,Le=we.length,De=null,ye=[],Ce=0;Ce<Le;++Ce){if((be=we.charCodeAt(Ce))>55295&&be<57344){if(!De){if(be>56319){(de-=3)>-1&&ye.push(239,191,189);continue}if(Ce+1===Le){(de-=3)>-1&&ye.push(239,191,189);continue}De=be;continue}if(be<56320){(de-=3)>-1&&ye.push(239,191,189),De=be;continue}be=65536+(De-55296<<10|be-56320)}else De&&(de-=3)>-1&&ye.push(239,191,189);if(De=null,be<128){if((de-=1)<0)break;ye.push(be)}else if(be<2048){if((de-=2)<0)break;ye.push(be>>6|192,63&be|128)}else if(be<65536){if((de-=3)<0)break;ye.push(be>>12|224,be>>6&63|128,63&be|128)}else{if(!(be<1114112))throw new Error("Invalid code point");if((de-=4)<0)break;ye.push(be>>18|240,be>>12&63|128,be>>6&63|128,63&be|128)}}return ye}function ge(we){return t.toByteArray(function te(we){if((we=(we=we.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;we.length%4!=0;)we+="=";return we}(we))}function pe(we,de,be,Le){for(var De=0;De<Le&&!(De+be>=de.length||De>=we.length);++De)de[De+be]=we[De];return De}function xe(we,de){return we instanceof de||null!=we&&null!=we.constructor&&null!=we.constructor.name&&we.constructor.name===de.name}function ke(we){return we!=we}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(e,c,d){d.read=function(n,t,i,a,r){var g,s,b=8*r-a-1,x=(1<<b)-1,S=x>>1,p=-7,w=i?r-1:0,l=i?-1:1,y=n[t+w];for(w+=l,g=y&(1<<-p)-1,y>>=-p,p+=b;p>0;g=256*g+n[t+w],w+=l,p-=8);for(s=g&(1<<-p)-1,g>>=-p,p+=a;p>0;s=256*s+n[t+w],w+=l,p-=8);if(0===g)g=1-S;else{if(g===x)return s?NaN:1/0*(y?-1:1);s+=Math.pow(2,a),g-=S}return(y?-1:1)*s*Math.pow(2,g-a)},d.write=function(n,t,i,a,r,g){var s,b,x,S=8*g-r-1,p=(1<<S)-1,w=p>>1,l=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,y=a?0:g-1,A=a?1:-1,T=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(b=isNaN(t)?1:0,s=p):(s=Math.floor(Math.log(t)/Math.LN2),t*(x=Math.pow(2,-s))<1&&(s--,x*=2),(t+=s+w>=1?l/x:l*Math.pow(2,1-w))*x>=2&&(s++,x/=2),s+w>=p?(b=0,s=p):s+w>=1?(b=(t*x-1)*Math.pow(2,r),s+=w):(b=t*Math.pow(2,w-1)*Math.pow(2,r),s=0));r>=8;n[i+y]=255&b,y+=A,b/=256,r-=8);for(s=s<<r|b,S+=r;S>0;n[i+y]=255&s,y+=A,s/=256,S-=8);n[i+y-A]|=128*T}},{}],5:[function(e,c,d){var t,i,n=c.exports={};function a(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function g(T){if(t===setTimeout)return setTimeout(T,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(T,0);try{return t(T,0)}catch(M){try{return t.call(null,T,0)}catch(f){return t.call(this,T,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(T){t=a}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(T){i=r}}();var S,b=[],x=!1,p=-1;function w(){!x||!S||(x=!1,S.length?b=S.concat(b):p=-1,b.length&&l())}function l(){if(!x){var T=g(w);x=!0;for(var M=b.length;M;){for(S=b,b=[];++p<M;)S&&S[p].run();p=-1,M=b.length}S=null,x=!1,function s(T){if(i===clearTimeout)return clearTimeout(T);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(T);try{return i(T)}catch(M){try{return i.call(null,T)}catch(f){return i.call(this,T)}}}(T)}}function y(T,M){this.fun=T,this.array=M}function A(){}n.nextTick=function(T){var M=new Array(arguments.length-1);if(arguments.length>1)for(var f=1;f<arguments.length;f++)M[f-1]=arguments[f];b.push(new y(T,M)),1===b.length&&!x&&g(l)},y.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=A,n.addListener=A,n.once=A,n.off=A,n.removeListener=A,n.removeAllListeners=A,n.emit=A,n.prependListener=A,n.prependOnceListener=A,n.listeners=function(T){return[]},n.binding=function(T){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(T){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],6:[function(e,c,d){c.exports={alpha_shape:e("alpha-shape"),convex_hull:e("convex-hull"),delaunay_triangulate:e("delaunay-triangulate"),gl_cone3d:e("gl-cone3d"),gl_error3d:e("gl-error3d"),gl_heatmap2d:e("gl-heatmap2d"),gl_line3d:e("gl-line3d"),gl_mesh3d:e("gl-mesh3d"),gl_plot2d:e("gl-plot2d"),gl_plot3d:e("gl-plot3d"),gl_pointcloud2d:e("gl-pointcloud2d"),gl_scatter3d:e("gl-scatter3d"),gl_select_box:e("gl-select-box"),gl_spikes2d:e("gl-spikes2d"),gl_streamtube3d:e("gl-streamtube3d"),gl_surface3d:e("gl-surface3d"),ndarray:e("ndarray"),ndarray_linear_interpolate:e("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(e,c,d){"use strict";c.exports=function g(s){var b=(s=s||{}).eye||[0,0,1],x=s.center||[0,0,0],S=s.up||[0,1,0],p=s.distanceLimits||[0,1/0],w=s.mode||"turntable",l=n(),y=t(),A=i();return l.setDistanceLimits(p[0],p[1]),l.lookAt(0,b,x,S),y.setDistanceLimits(p[0],p[1]),y.lookAt(0,b,x,S),A.setDistanceLimits(p[0],p[1]),A.lookAt(0,b,x,S),new a({turntable:l,orbit:y,matrix:A},w)};var n=e("turntable-camera-controller"),t=e("orbit-camera-controller"),i=e("matrix-camera-controller");function a(s,b){this._controllerNames=Object.keys(s),this._controllerList=this._controllerNames.map(function(x){return s[x]}),this._mode=b,this._active=s[b],this._active||(this._mode="turntable",this._active=s.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var r=a.prototype;r.flush=function(s){for(var b=this._controllerList,x=0;x<b.length;++x)b[x].flush(s)},r.idle=function(s){for(var b=this._controllerList,x=0;x<b.length;++x)b[x].idle(s)},r.lookAt=function(s,b,x,S){for(var p=this._controllerList,w=0;w<p.length;++w)p[w].lookAt(s,b,x,S)},r.rotate=function(s,b,x,S){for(var p=this._controllerList,w=0;w<p.length;++w)p[w].rotate(s,b,x,S)},r.pan=function(s,b,x,S){for(var p=this._controllerList,w=0;w<p.length;++w)p[w].pan(s,b,x,S)},r.translate=function(s,b,x,S){for(var p=this._controllerList,w=0;w<p.length;++w)p[w].translate(s,b,x,S)},r.setMatrix=function(s,b){for(var x=this._controllerList,S=0;S<x.length;++S)x[S].setMatrix(s,b)},r.setDistanceLimits=function(s,b){for(var x=this._controllerList,S=0;S<x.length;++S)x[S].setDistanceLimits(s,b)},r.setDistance=function(s,b){for(var x=this._controllerList,S=0;S<x.length;++S)x[S].setDistance(s,b)},r.recalcMatrix=function(s){this._active.recalcMatrix(s)},r.getDistance=function(s){return this._active.getDistance(s)},r.getDistanceLimits=function(s){return this._active.getDistanceLimits(s)},r.lastT=function(){return this._active.lastT()},r.setMode=function(s){if(s!==this._mode){var b=this._controllerNames.indexOf(s);if(!(b<0)){var x=this._active,S=this._controllerList[b],p=Math.max(x.lastT(),S.lastT());x.recalcMatrix(p),S.setMatrix(p,x.computedMatrix),this._active=S,this._mode=s,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},r.getMode=function(){return this._mode}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(e,c,d){"use strict";var n="undefined"==typeof WeakMap?e("weak-map"):WeakMap,t=e("gl-buffer"),i=e("gl-vao"),a=new n;c.exports=function r(g){var s=a.get(g),b=s&&(s._triangleBuffer.handle||s._triangleBuffer.buffer);if(!b||!g.isBuffer(b)){var x=t(g,new Float32Array([-1,-1,-1,4,4,-1]));(s=i(g,[{buffer:x,type:g.FLOAT,size:2}]))._triangleBuffer=x,a.set(g,s)}s.bind(),g.drawArrays(g.TRIANGLES,0,3),s.unbind()}},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(e,c,d){var n=e("pad-left");c.exports=function t(i,a,r){a="number"==typeof a?a:1,r=r||": ";var g=i.split(/\r?\n/),s=String(g.length+a-1).length;return g.map(function(b,x){var S=x+a,p=String(S).length;return n(S,s-p)+r+b}).join("\n")}},{"pad-left":264}],10:[function(e,c,d){"use strict";c.exports=function i(a){var r=a.length;if(0===r)return[];if(1===r)return[0];for(var g=a[0].length,s=[a[0]],b=[0],x=1;x<r;++x)if(s.push(a[x]),t(s,g)){if(b.push(x),b.length===g+1)return b}else s.pop();return b};var n=e("robust-orientation");function t(a,r){for(var g=new Array(r+1),s=0;s<a.length;++s)g[s]=a[s];for(s=0;s<=a.length;++s){for(var b=a.length;b<=r;++b){for(var x=new Array(r),S=0;S<r;++S)x[S]=Math.pow(b+1-s,S);g[b]=x}if(n.apply(void 0,g))return!0}return!1}},{"robust-orientation":284}],11:[function(e,c,d){"use strict";c.exports=function i(a,r){return n(r).filter(function(g){for(var s=new Array(g.length),b=0;b<g.length;++b)s[b]=r[g[b]];return t(s)*a<1})};var n=e("delaunay-triangulate"),t=e("circumradius")},{circumradius:49,"delaunay-triangulate":63}],12:[function(e,c,d){c.exports=function i(a,r){return t(n(a,r))};var n=e("alpha-complex"),t=e("simplicial-complex-boundary")},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(e,c,d){c.exports=function(t){return atob(t)}},{}],14:[function(e,c,d){"use strict";c.exports=function i(a,r){for(var g=r.length,s=new Array(g+1),b=0;b<g;++b){for(var x=new Array(g+1),S=0;S<=g;++S)x[S]=a[S][b];s[b]=x}for(s[g]=new Array(g+1),b=0;b<=g;++b)s[g][b]=1;var p=new Array(g+1);for(b=0;b<g;++b)p[b]=r[b];p[g]=1;var w=n(s,p),l=t(w[g+1]);0===l&&(l=1);var y=new Array(g+1);for(b=0;b<=g;++b)y[b]=t(w[b])/l;return y};var n=e("robust-linear-solve");function t(a){for(var r=0,g=0;g<a.length;++g)r+=a[g];return r}},{"robust-linear-solve":283}],15:[function(e,c,d){"use strict";var n=e("./lib/rationalize");c.exports=function t(i,a){return n(i[0].mul(a[1]).add(a[0].mul(i[1])),i[1].mul(a[1]))}},{"./lib/rationalize":25}],16:[function(e,c,d){"use strict";c.exports=function n(t,i){return t[0].mul(i[1]).cmp(i[0].mul(t[1]))}},{}],17:[function(e,c,d){"use strict";var n=e("./lib/rationalize");c.exports=function t(i,a){return n(i[0].mul(a[1]),i[1].mul(a[0]))}},{"./lib/rationalize":25}],18:[function(e,c,d){"use strict";var n=e("./is-rat"),t=e("./lib/is-bn"),i=e("./lib/num-to-bn"),a=e("./lib/str-to-bn"),r=e("./lib/rationalize"),g=e("./div");c.exports=function s(b,x){if(n(b))return x?g(b,s(x)):[b[0].clone(),b[1].clone()];var p,w,S=0;if(t(b))p=b.clone();else if("string"==typeof b)p=a(b);else{if(0===b)return[i(0),i(1)];if(b===Math.floor(b))p=i(b);else{for(;b!==Math.floor(b);)b*=Math.pow(2,256),S-=256;p=i(b)}}if(n(x))p.mul(x[1]),w=x[0].clone();else if(t(x))w=x.clone();else if("string"==typeof x)w=a(x);else if(x)if(x===Math.floor(x))w=i(x);else{for(;x!==Math.floor(x);)x*=Math.pow(2,256),S+=256;w=i(x)}else w=i(1);return S>0?p=p.ushln(S):S<0&&(w=w.ushln(-S)),r(p,w)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(e,c,d){"use strict";var n=e("./lib/is-bn");c.exports=function t(i){return Array.isArray(i)&&2===i.length&&n(i[0])&&n(i[1])}},{"./lib/is-bn":23}],20:[function(e,c,d){"use strict";var n=e("bn.js");c.exports=function t(i){return i.cmp(new n(0))}},{"bn.js":33}],21:[function(e,c,d){"use strict";var n=e("./bn-sign");c.exports=function t(i){var a=i.length,r=i.words,g=0;if(1===a)g=r[0];else if(2===a)g=r[0]+67108864*r[1];else for(var s=0;s<a;s++)g+=r[s]*Math.pow(67108864,s);return n(i)*g}},{"./bn-sign":20}],22:[function(e,c,d){"use strict";var n=e("double-bits"),t=e("bit-twiddle").countTrailingZeros;c.exports=function i(a){var r=t(n.lo(a));if(r<32)return r;var g=t(n.hi(a));return g>20?52:g+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(e,c,d){"use strict";e("bn.js"),c.exports=function t(i){return i&&"object"==typeof i&&Boolean(i.words)}},{"bn.js":33}],24:[function(e,c,d){"use strict";var n=e("bn.js"),t=e("double-bits");c.exports=function i(a){var r=t.exponent(a);return r<52?new n(a):new n(a*Math.pow(2,52-r)).ushln(r-52)}},{"bn.js":33,"double-bits":64}],25:[function(e,c,d){"use strict";var n=e("./num-to-bn"),t=e("./bn-sign");c.exports=function i(a,r){var g=t(a),s=t(r);if(0===g)return[n(0),n(1)];if(0===s)return[n(0),n(0)];s<0&&(a=a.neg(),r=r.neg());var b=a.gcd(r);return b.cmpn(1)?[a.div(b),r.div(b)]:[a,r]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(e,c,d){"use strict";var n=e("bn.js");c.exports=function t(i){return new n(i)}},{"bn.js":33}],27:[function(e,c,d){"use strict";var n=e("./lib/rationalize");c.exports=function t(i,a){return n(i[0].mul(a[0]),i[1].mul(a[1]))}},{"./lib/rationalize":25}],28:[function(e,c,d){"use strict";var n=e("./lib/bn-sign");c.exports=function t(i){return n(i[0])*n(i[1])}},{"./lib/bn-sign":20}],29:[function(e,c,d){"use strict";var n=e("./lib/rationalize");c.exports=function t(i,a){return n(i[0].mul(a[1]).sub(i[1].mul(a[0])),i[1].mul(a[1]))}},{"./lib/rationalize":25}],30:[function(e,c,d){"use strict";var n=e("./lib/bn-to-num"),t=e("./lib/ctz");c.exports=function i(a){var r=a[0],g=a[1];if(0===r.cmpn(0))return 0;var s=r.abs().divmod(g.abs()),x=n(s.div),S=s.mod,p=r.negative!==g.negative?-1:1;if(0===S.cmpn(0))return p*x;if(x){var w=t(x)+4;return p*(x+(l=n(S.ushln(w).divRound(g)))*Math.pow(2,-w))}var y=g.bitLength()-S.bitLength()+53,l=n(S.ushln(y).divRound(g));return y<1023?p*l*Math.pow(2,-y):p*(l*=Math.pow(2,-1023))*Math.pow(2,1023-y)}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(e,c,d){"use strict";function n(s,b,x,S,p){for(var w=p+1;S<=p;){var l=S+p>>>1,y=s[l];(void 0!==x?x(y,b):y-b)>=0?(w=l,p=l-1):S=l+1}return w}function t(s,b,x,S,p){for(var w=p+1;S<=p;){var l=S+p>>>1,y=s[l];(void 0!==x?x(y,b):y-b)>0?(w=l,p=l-1):S=l+1}return w}function i(s,b,x,S,p){for(var w=S-1;S<=p;){var l=S+p>>>1,y=s[l];(void 0!==x?x(y,b):y-b)<0?(w=l,S=l+1):p=l-1}return w}function a(s,b,x,S,p){for(var w=S-1;S<=p;){var l=S+p>>>1,y=s[l];(void 0!==x?x(y,b):y-b)<=0?(w=l,S=l+1):p=l-1}return w}function r(s,b,x,S,p){for(;S<=p;){var w=S+p>>>1,l=s[w],y=void 0!==x?x(l,b):l-b;if(0===y)return w;y<=0?S=w+1:p=w-1}return-1}function g(s,b,x,S,p,w){return"function"==typeof x?w(s,b,x,void 0===S?0:0|S,void 0===p?s.length-1:0|p):w(s,b,void 0,void 0===x?0:0|x,void 0===S?s.length-1:0|S)}c.exports={ge:function(s,b,x,S,p){return g(s,b,x,S,p,n)},gt:function(s,b,x,S,p){return g(s,b,x,S,p,t)},lt:function(s,b,x,S,p){return g(s,b,x,S,p,i)},le:function(s,b,x,S,p){return g(s,b,x,S,p,a)},eq:function(s,b,x,S,p){return g(s,b,x,S,p,r)}}},{}],32:[function(e,c,d){"use strict";function t(a){var r=32;return(a&=-a)&&r--,65535&a&&(r-=16),16711935&a&&(r-=8),252645135&a&&(r-=4),858993459&a&&(r-=2),1431655765&a&&(r-=1),r}d.INT_BITS=32,d.INT_MAX=2147483647,d.INT_MIN=-1<<31,d.sign=function(a){return(a>0)-(a<0)},d.abs=function(a){var r=a>>31;return(a^r)-r},d.min=function(a,r){return r^(a^r)&-(a<r)},d.max=function(a,r){return a^(a^r)&-(a<r)},d.isPow2=function(a){return!(a&a-1||!a)},d.log2=function(a){var r,g;return r=(a>65535)<<4,r|=g=((a>>>=r)>255)<<3,r|=g=((a>>>=g)>15)<<2,(r|=g=((a>>>=g)>3)<<1)|(a>>>=g)>>1},d.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},d.popCount=function(a){return 16843009*((a=(858993459&(a-=a>>>1&1431655765))+(a>>>2&858993459))+(a>>>4)&252645135)>>>24},d.countTrailingZeros=t,d.nextPow2=function(a){return a+=0===a,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,1+((a|=a>>>8)|a>>>16)},d.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,(a|=a>>>16)-(a>>>1)},d.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,27030>>>(a&=15)&1};var i=new Array(256);(function(a){for(var r=0;r<256;++r){var g=r,s=r,b=7;for(g>>>=1;g;g>>>=1)s<<=1,s|=1&g,--b;a[r]=s<<b&255}})(i),d.reverse=function(a){return i[255&a]<<24|i[a>>>8&255]<<16|i[a>>>16&255]<<8|i[a>>>24&255]},d.interleave2=function(a,r){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a&=65535)|a<<8))|a<<4))|a<<2))|a<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))<<1},d.deinterleave2=function(a,r){return(a=65535&((a=16711935&((a=252645135&((a=858993459&((a=a>>>r&1431655765)|a>>>1))|a>>>2))|a>>>4))|a>>>16))<<16>>16},d.interleave3=function(a,r,g){return a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2),(a|=(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<1)|(g=1227133513&((g=3272356035&((g=251719695&((g=4278190335&((g&=1023)|g<<16))|g<<8))|g<<4))|g<<2))<<2},d.deinterleave3=function(a,r){return(a=1023&((a=4278190335&((a=251719695&((a=3272356035&((a=a>>>r&1227133513)|a>>>2))|a>>>4))|a>>>8))|a>>>16))<<22>>22},d.nextCombination=function(a){var r=a|a-1;return r+1|(~r&-~r)-1>>>t(a)+1}},{}],33:[function(e,c,d){!function(n,t){"use strict";function i(F,D){if(!F)throw new Error(D||"Assertion failed")}function a(F,D){F.super_=D;var N=function(){};N.prototype=D.prototype,F.prototype=new N,F.prototype.constructor=F}function r(F,D,N){if(r.isBN(F))return F;this.negative=0,this.words=null,this.length=0,this.red=null,null!==F&&(("le"===D||"be"===D)&&(N=D,D=10),this._init(F||0,D||10,N||"be"))}var g;"object"==typeof n?n.exports=r:t.BN=r,r.BN=r,r.wordSize=26;try{g="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:e("buffer").Buffer}catch(F){}function s(F,D){var N=F.charCodeAt(D);return N>=65&&N<=70?N-55:N>=97&&N<=102?N-87:N-48&15}function b(F,D,N){var U=s(F,N);return N-1>=D&&(U|=s(F,N-1)<<4),U}function x(F,D,N,U){for(var X=0,oe=Math.min(F.length,N),se=D;se<oe;se++){var ne=F.charCodeAt(se)-48;X*=U,X+=ne>=49?ne-49+10:ne>=17?ne-17+10:ne}return X}r.isBN=function(D){return D instanceof r||null!==D&&"object"==typeof D&&D.constructor.wordSize===r.wordSize&&Array.isArray(D.words)},r.max=function(D,N){return D.cmp(N)>0?D:N},r.min=function(D,N){return D.cmp(N)<0?D:N},r.prototype._init=function(D,N,U){if("number"==typeof D)return this._initNumber(D,N,U);if("object"==typeof D)return this._initArray(D,N,U);"hex"===N&&(N=16),i(N===(0|N)&&N>=2&&N<=36);var X=0;"-"===(D=D.toString().replace(/\s+/g,""))[0]&&(X++,this.negative=1),X<D.length&&(16===N?this._parseHex(D,X,U):(this._parseBase(D,N,X),"le"===U&&this._initArray(this.toArray(),N,U)))},r.prototype._initNumber=function(D,N,U){D<0&&(this.negative=1,D=-D),D<67108864?(this.words=[67108863&D],this.length=1):D<4503599627370496?(this.words=[67108863&D,D/67108864&67108863],this.length=2):(i(D<9007199254740992),this.words=[67108863&D,D/67108864&67108863,1],this.length=3),"le"===U&&this._initArray(this.toArray(),N,U)},r.prototype._initArray=function(D,N,U){if(i("number"==typeof D.length),D.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(D.length/3),this.words=new Array(this.length);for(var X=0;X<this.length;X++)this.words[X]=0;var oe,se,ne=0;if("be"===U)for(X=D.length-1,oe=0;X>=0;X-=3)this.words[oe]|=(se=D[X]|D[X-1]<<8|D[X-2]<<16)<<ne&67108863,this.words[oe+1]=se>>>26-ne&67108863,(ne+=24)>=26&&(ne-=26,oe++);else if("le"===U)for(X=0,oe=0;X<D.length;X+=3)this.words[oe]|=(se=D[X]|D[X+1]<<8|D[X+2]<<16)<<ne&67108863,this.words[oe+1]=se>>>26-ne&67108863,(ne+=24)>=26&&(ne-=26,oe++);return this.strip()},r.prototype._parseHex=function(D,N,U){this.length=Math.ceil((D.length-N)/6),this.words=new Array(this.length);for(var X=0;X<this.length;X++)this.words[X]=0;var ne,oe=0,se=0;if("be"===U)for(X=D.length-1;X>=N;X-=2)ne=b(D,N,X)<<oe,this.words[se]|=67108863&ne,oe>=18?(oe-=18,this.words[se+=1]|=ne>>>26):oe+=8;else for(X=(D.length-N)%2==0?N+1:N;X<D.length;X+=2)ne=b(D,N,X)<<oe,this.words[se]|=67108863&ne,oe>=18?(oe-=18,this.words[se+=1]|=ne>>>26):oe+=8;this.strip()},r.prototype._parseBase=function(D,N,U){this.words=[0],this.length=1;for(var X=0,oe=1;oe<=67108863;oe*=N)X++;X--,oe=oe/N|0;for(var se=D.length-U,ne=se%X,W=Math.min(se,se-ne)+U,G=0,$=U;$<W;$+=X)G=x(D,$,$+X,N),this.imuln(oe),this.words[0]+G<67108864?this.words[0]+=G:this._iaddn(G);if(0!==ne){var V=1;for(G=x(D,$,D.length,N),$=0;$<ne;$++)V*=N;this.imuln(V),this.words[0]+G<67108864?this.words[0]+=G:this._iaddn(G)}this.strip()},r.prototype.copy=function(D){D.words=new Array(this.length);for(var N=0;N<this.length;N++)D.words[N]=this.words[N];D.length=this.length,D.negative=this.negative,D.red=this.red},r.prototype.clone=function(){var D=new r(null);return this.copy(D),D},r.prototype._expand=function(D){for(;this.length<D;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],w=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function y(F,D,N){N.negative=D.negative^F.negative;var U=F.length+D.length|0;N.length=U,U=U-1|0;var X=0|F.words[0],oe=0|D.words[0],se=X*oe,W=se/67108864|0;N.words[0]=67108863&se;for(var G=1;G<U;G++){for(var $=W>>>26,V=67108863&W,H=Math.min(G,D.length-1),q=Math.max(0,G-F.length+1);q<=H;q++)$+=(se=(X=0|F.words[G-q|0])*(oe=0|D.words[q])+V)/67108864|0,V=67108863&se;N.words[G]=0|V,W=0|$}return 0!==W?N.words[G]=0|W:N.length--,N.strip()}r.prototype.toString=function(D,N){var U;if(N=0|N||1,16===(D=D||10)||"hex"===D){U="";for(var X=0,oe=0,se=0;se<this.length;se++){var ne=this.words[se],W=(16777215&(ne<<X|oe)).toString(16);U=0!=(oe=ne>>>24-X&16777215)||se!==this.length-1?S[6-W.length]+W+U:W+U,(X+=2)>=26&&(X-=26,se--)}for(0!==oe&&(U=oe.toString(16)+U);U.length%N!=0;)U="0"+U;return 0!==this.negative&&(U="-"+U),U}if(D===(0|D)&&D>=2&&D<=36){var G=p[D],$=w[D];U="";var V=this.clone();for(V.negative=0;!V.isZero();){var H=V.modn($).toString(D);U=(V=V.idivn($)).isZero()?H+U:S[G-H.length]+H+U}for(this.isZero()&&(U="0"+U);U.length%N!=0;)U="0"+U;return 0!==this.negative&&(U="-"+U),U}i(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var D=this.words[0];return 2===this.length?D+=67108864*this.words[1]:3===this.length&&1===this.words[2]?D+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-D:D},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(D,N){return i(void 0!==g),this.toArrayLike(g,D,N)},r.prototype.toArray=function(D,N){return this.toArrayLike(Array,D,N)},r.prototype.toArrayLike=function(D,N,U){var X=this.byteLength(),oe=U||Math.max(1,X);i(X<=oe,"byte array longer than desired length"),i(oe>0,"Requested array length <= 0"),this.strip();var W,G,se="le"===N,ne=new D(oe),$=this.clone();if(se){for(G=0;!$.isZero();G++)W=$.andln(255),$.iushrn(8),ne[G]=W;for(;G<oe;G++)ne[G]=0}else{for(G=0;G<oe-X;G++)ne[G]=0;for(G=0;!$.isZero();G++)W=$.andln(255),$.iushrn(8),ne[oe-G-1]=W}return ne},r.prototype._countBits=Math.clz32?function(D){return 32-Math.clz32(D)}:function(D){var N=D,U=0;return N>=4096&&(U+=13,N>>>=13),N>=64&&(U+=7,N>>>=7),N>=8&&(U+=4,N>>>=4),N>=2&&(U+=2,N>>>=2),U+N},r.prototype._zeroBits=function(D){if(0===D)return 26;var N=D,U=0;return 0==(8191&N)&&(U+=13,N>>>=13),0==(127&N)&&(U+=7,N>>>=7),0==(15&N)&&(U+=4,N>>>=4),0==(3&N)&&(U+=2,N>>>=2),0==(1&N)&&U++,U},r.prototype.bitLength=function(){var N=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+N},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=0,N=0;N<this.length;N++){var U=this._zeroBits(this.words[N]);if(D+=U,26!==U)break}return D},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(D){return 0!==this.negative?this.abs().inotn(D).iaddn(1):this.clone()},r.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(D){for(;this.length<D.length;)this.words[this.length++]=0;for(var N=0;N<D.length;N++)this.words[N]=this.words[N]|D.words[N];return this.strip()},r.prototype.ior=function(D){return i(0==(this.negative|D.negative)),this.iuor(D)},r.prototype.or=function(D){return this.length>D.length?this.clone().ior(D):D.clone().ior(this)},r.prototype.uor=function(D){return this.length>D.length?this.clone().iuor(D):D.clone().iuor(this)},r.prototype.iuand=function(D){var N;N=this.length>D.length?D:this;for(var U=0;U<N.length;U++)this.words[U]=this.words[U]&D.words[U];return this.length=N.length,this.strip()},r.prototype.iand=function(D){return i(0==(this.negative|D.negative)),this.iuand(D)},r.prototype.and=function(D){return this.length>D.length?this.clone().iand(D):D.clone().iand(this)},r.prototype.uand=function(D){return this.length>D.length?this.clone().iuand(D):D.clone().iuand(this)},r.prototype.iuxor=function(D){var N,U;this.length>D.length?(N=this,U=D):(N=D,U=this);for(var X=0;X<U.length;X++)this.words[X]=N.words[X]^U.words[X];if(this!==N)for(;X<N.length;X++)this.words[X]=N.words[X];return this.length=N.length,this.strip()},r.prototype.ixor=function(D){return i(0==(this.negative|D.negative)),this.iuxor(D)},r.prototype.xor=function(D){return this.length>D.length?this.clone().ixor(D):D.clone().ixor(this)},r.prototype.uxor=function(D){return this.length>D.length?this.clone().iuxor(D):D.clone().iuxor(this)},r.prototype.inotn=function(D){i("number"==typeof D&&D>=0);var N=0|Math.ceil(D/26),U=D%26;this._expand(N),U>0&&N--;for(var X=0;X<N;X++)this.words[X]=67108863&~this.words[X];return U>0&&(this.words[X]=~this.words[X]&67108863>>26-U),this.strip()},r.prototype.notn=function(D){return this.clone().inotn(D)},r.prototype.setn=function(D,N){i("number"==typeof D&&D>=0);var U=D/26|0,X=D%26;return this._expand(U+1),this.words[U]=N?this.words[U]|1<<X:this.words[U]&~(1<<X),this.strip()},r.prototype.iadd=function(D){var N,U,X;if(0!==this.negative&&0===D.negative)return this.negative=0,N=this.isub(D),this.negative^=1,this._normSign();if(0===this.negative&&0!==D.negative)return D.negative=0,N=this.isub(D),D.negative=1,N._normSign();this.length>D.length?(U=this,X=D):(U=D,X=this);for(var oe=0,se=0;se<X.length;se++)this.words[se]=67108863&(N=(0|U.words[se])+(0|X.words[se])+oe),oe=N>>>26;for(;0!==oe&&se<U.length;se++)this.words[se]=67108863&(N=(0|U.words[se])+oe),oe=N>>>26;if(this.length=U.length,0!==oe)this.words[this.length]=oe,this.length++;else if(U!==this)for(;se<U.length;se++)this.words[se]=U.words[se];return this},r.prototype.add=function(D){var N;return 0!==D.negative&&0===this.negative?(D.negative=0,N=this.sub(D),D.negative^=1,N):0===D.negative&&0!==this.negative?(this.negative=0,N=D.sub(this),this.negative=1,N):this.length>D.length?this.clone().iadd(D):D.clone().iadd(this)},r.prototype.isub=function(D){if(0!==D.negative){D.negative=0;var N=this.iadd(D);return D.negative=1,N._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(D),this.negative=1,this._normSign();var X,oe,U=this.cmp(D);if(0===U)return this.negative=0,this.length=1,this.words[0]=0,this;U>0?(X=this,oe=D):(X=D,oe=this);for(var se=0,ne=0;ne<oe.length;ne++)se=(N=(0|X.words[ne])-(0|oe.words[ne])+se)>>26,this.words[ne]=67108863&N;for(;0!==se&&ne<X.length;ne++)se=(N=(0|X.words[ne])+se)>>26,this.words[ne]=67108863&N;if(0===se&&ne<X.length&&X!==this)for(;ne<X.length;ne++)this.words[ne]=X.words[ne];return this.length=Math.max(this.length,ne),X!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(D){return this.clone().isub(D)};var A=function(D,N,U){var W,G,$,X=D.words,oe=N.words,se=U.words,ne=0,V=0|X[0],H=8191&V,q=V>>>13,K=0|X[1],Y=8191&K,te=K>>>13,J=0|X[2],j=8191&J,re=J>>>13,le=0|X[3],ge=8191&le,pe=le>>>13,xe=0|X[4],ke=8191&xe,we=xe>>>13,de=0|X[5],be=8191&de,Le=de>>>13,De=0|X[6],ye=8191&De,Ce=De>>>13,Fe=0|X[7],Ke=8191&Fe,Ue=Fe>>>13,Be=0|X[8],Ie=8191&Be,nt=Be>>>13,gt=0|X[9],Nt=8191&gt,St=gt>>>13,Bt=0|oe[0],Zt=8191&Bt,Et=Bt>>>13,wt=0|oe[1],at=8191&wt,vt=wt>>>13,Qe=0|oe[2],Pe=8191&Qe,Ze=Qe>>>13,Xe=0|oe[3],rt=8191&Xe,kt=Xe>>>13,Tt=0|oe[4],Xt=8191&Tt,ar=Tt>>>13,Ut=0|oe[5],Jt=8191&Ut,nr=Ut>>>13,rr=0|oe[6],br=8191&rr,Hr=rr>>>13,on=0|oe[7],jr=8191&on,et=on>>>13,Yt=0|oe[8],qt=8191&Yt,Vt=Yt>>>13,Tr=0|oe[9],tt=8191&Tr,je=Tr>>>13;U.negative=D.negative^N.negative,U.length=19;var ct=(ne+(W=Math.imul(H,Zt))|0)+((8191&(G=(G=Math.imul(H,Et))+Math.imul(q,Zt)|0))<<13)|0;ne=(($=Math.imul(q,Et))+(G>>>13)|0)+(ct>>>26)|0,ct&=67108863,W=Math.imul(Y,Zt),G=(G=Math.imul(Y,Et))+Math.imul(te,Zt)|0,$=Math.imul(te,Et);var ht=(ne+(W=W+Math.imul(H,at)|0)|0)+((8191&(G=(G=G+Math.imul(H,vt)|0)+Math.imul(q,at)|0))<<13)|0;ne=(($=$+Math.imul(q,vt)|0)+(G>>>13)|0)+(ht>>>26)|0,ht&=67108863,W=Math.imul(j,Zt),G=(G=Math.imul(j,Et))+Math.imul(re,Zt)|0,$=Math.imul(re,Et),W=W+Math.imul(Y,at)|0,G=(G=G+Math.imul(Y,vt)|0)+Math.imul(te,at)|0,$=$+Math.imul(te,vt)|0;var Me=(ne+(W=W+Math.imul(H,Pe)|0)|0)+((8191&(G=(G=G+Math.imul(H,Ze)|0)+Math.imul(q,Pe)|0))<<13)|0;ne=(($=$+Math.imul(q,Ze)|0)+(G>>>13)|0)+(Me>>>26)|0,Me&=67108863,W=Math.imul(ge,Zt),G=(G=Math.imul(ge,Et))+Math.imul(pe,Zt)|0,$=Math.imul(pe,Et),W=W+Math.imul(j,at)|0,G=(G=G+Math.imul(j,vt)|0)+Math.imul(re,at)|0,$=$+Math.imul(re,vt)|0,W=W+Math.imul(Y,Pe)|0,G=(G=G+Math.imul(Y,Ze)|0)+Math.imul(te,Pe)|0,$=$+Math.imul(te,Ze)|0;var Se=(ne+(W=W+Math.imul(H,rt)|0)|0)+((8191&(G=(G=G+Math.imul(H,kt)|0)+Math.imul(q,rt)|0))<<13)|0;ne=(($=$+Math.imul(q,kt)|0)+(G>>>13)|0)+(Se>>>26)|0,Se&=67108863,W=Math.imul(ke,Zt),G=(G=Math.imul(ke,Et))+Math.imul(we,Zt)|0,$=Math.imul(we,Et),W=W+Math.imul(ge,at)|0,G=(G=G+Math.imul(ge,vt)|0)+Math.imul(pe,at)|0,$=$+Math.imul(pe,vt)|0,W=W+Math.imul(j,Pe)|0,G=(G=G+Math.imul(j,Ze)|0)+Math.imul(re,Pe)|0,$=$+Math.imul(re,Ze)|0,W=W+Math.imul(Y,rt)|0,G=(G=G+Math.imul(Y,kt)|0)+Math.imul(te,rt)|0,$=$+Math.imul(te,kt)|0;var Je=(ne+(W=W+Math.imul(H,Xt)|0)|0)+((8191&(G=(G=G+Math.imul(H,ar)|0)+Math.imul(q,Xt)|0))<<13)|0;ne=(($=$+Math.imul(q,ar)|0)+(G>>>13)|0)+(Je>>>26)|0,Je&=67108863,W=Math.imul(be,Zt),G=(G=Math.imul(be,Et))+Math.imul(Le,Zt)|0,$=Math.imul(Le,Et),W=W+Math.imul(ke,at)|0,G=(G=G+Math.imul(ke,vt)|0)+Math.imul(we,at)|0,$=$+Math.imul(we,vt)|0,W=W+Math.imul(ge,Pe)|0,G=(G=G+Math.imul(ge,Ze)|0)+Math.imul(pe,Pe)|0,$=$+Math.imul(pe,Ze)|0,W=W+Math.imul(j,rt)|0,G=(G=G+Math.imul(j,kt)|0)+Math.imul(re,rt)|0,$=$+Math.imul(re,kt)|0,W=W+Math.imul(Y,Xt)|0,G=(G=G+Math.imul(Y,ar)|0)+Math.imul(te,Xt)|0,$=$+Math.imul(te,ar)|0;var We=(ne+(W=W+Math.imul(H,Jt)|0)|0)+((8191&(G=(G=G+Math.imul(H,nr)|0)+Math.imul(q,Jt)|0))<<13)|0;ne=(($=$+Math.imul(q,nr)|0)+(G>>>13)|0)+(We>>>26)|0,We&=67108863,W=Math.imul(ye,Zt),G=(G=Math.imul(ye,Et))+Math.imul(Ce,Zt)|0,$=Math.imul(Ce,Et),W=W+Math.imul(be,at)|0,G=(G=G+Math.imul(be,vt)|0)+Math.imul(Le,at)|0,$=$+Math.imul(Le,vt)|0,W=W+Math.imul(ke,Pe)|0,G=(G=G+Math.imul(ke,Ze)|0)+Math.imul(we,Pe)|0,$=$+Math.imul(we,Ze)|0,W=W+Math.imul(ge,rt)|0,G=(G=G+Math.imul(ge,kt)|0)+Math.imul(pe,rt)|0,$=$+Math.imul(pe,kt)|0,W=W+Math.imul(j,Xt)|0,G=(G=G+Math.imul(j,ar)|0)+Math.imul(re,Xt)|0,$=$+Math.imul(re,ar)|0,W=W+Math.imul(Y,Jt)|0,G=(G=G+Math.imul(Y,nr)|0)+Math.imul(te,Jt)|0,$=$+Math.imul(te,nr)|0;var st=(ne+(W=W+Math.imul(H,br)|0)|0)+((8191&(G=(G=G+Math.imul(H,Hr)|0)+Math.imul(q,br)|0))<<13)|0;ne=(($=$+Math.imul(q,Hr)|0)+(G>>>13)|0)+(st>>>26)|0,st&=67108863,W=Math.imul(Ke,Zt),G=(G=Math.imul(Ke,Et))+Math.imul(Ue,Zt)|0,$=Math.imul(Ue,Et),W=W+Math.imul(ye,at)|0,G=(G=G+Math.imul(ye,vt)|0)+Math.imul(Ce,at)|0,$=$+Math.imul(Ce,vt)|0,W=W+Math.imul(be,Pe)|0,G=(G=G+Math.imul(be,Ze)|0)+Math.imul(Le,Pe)|0,$=$+Math.imul(Le,Ze)|0,W=W+Math.imul(ke,rt)|0,G=(G=G+Math.imul(ke,kt)|0)+Math.imul(we,rt)|0,$=$+Math.imul(we,kt)|0,W=W+Math.imul(ge,Xt)|0,G=(G=G+Math.imul(ge,ar)|0)+Math.imul(pe,Xt)|0,$=$+Math.imul(pe,ar)|0,W=W+Math.imul(j,Jt)|0,G=(G=G+Math.imul(j,nr)|0)+Math.imul(re,Jt)|0,$=$+Math.imul(re,nr)|0,W=W+Math.imul(Y,br)|0,G=(G=G+Math.imul(Y,Hr)|0)+Math.imul(te,br)|0,$=$+Math.imul(te,Hr)|0;var lt=(ne+(W=W+Math.imul(H,jr)|0)|0)+((8191&(G=(G=G+Math.imul(H,et)|0)+Math.imul(q,jr)|0))<<13)|0;ne=(($=$+Math.imul(q,et)|0)+(G>>>13)|0)+(lt>>>26)|0,lt&=67108863,W=Math.imul(Ie,Zt),G=(G=Math.imul(Ie,Et))+Math.imul(nt,Zt)|0,$=Math.imul(nt,Et),W=W+Math.imul(Ke,at)|0,G=(G=G+Math.imul(Ke,vt)|0)+Math.imul(Ue,at)|0,$=$+Math.imul(Ue,vt)|0,W=W+Math.imul(ye,Pe)|0,G=(G=G+Math.imul(ye,Ze)|0)+Math.imul(Ce,Pe)|0,$=$+Math.imul(Ce,Ze)|0,W=W+Math.imul(be,rt)|0,G=(G=G+Math.imul(be,kt)|0)+Math.imul(Le,rt)|0,$=$+Math.imul(Le,kt)|0,W=W+Math.imul(ke,Xt)|0,G=(G=G+Math.imul(ke,ar)|0)+Math.imul(we,Xt)|0,$=$+Math.imul(we,ar)|0,W=W+Math.imul(ge,Jt)|0,G=(G=G+Math.imul(ge,nr)|0)+Math.imul(pe,Jt)|0,$=$+Math.imul(pe,nr)|0,W=W+Math.imul(j,br)|0,G=(G=G+Math.imul(j,Hr)|0)+Math.imul(re,br)|0,$=$+Math.imul(re,Hr)|0,W=W+Math.imul(Y,jr)|0,G=(G=G+Math.imul(Y,et)|0)+Math.imul(te,jr)|0,$=$+Math.imul(te,et)|0;var pt=(ne+(W=W+Math.imul(H,qt)|0)|0)+((8191&(G=(G=G+Math.imul(H,Vt)|0)+Math.imul(q,qt)|0))<<13)|0;ne=(($=$+Math.imul(q,Vt)|0)+(G>>>13)|0)+(pt>>>26)|0,pt&=67108863,W=Math.imul(Nt,Zt),G=(G=Math.imul(Nt,Et))+Math.imul(St,Zt)|0,$=Math.imul(St,Et),W=W+Math.imul(Ie,at)|0,G=(G=G+Math.imul(Ie,vt)|0)+Math.imul(nt,at)|0,$=$+Math.imul(nt,vt)|0,W=W+Math.imul(Ke,Pe)|0,G=(G=G+Math.imul(Ke,Ze)|0)+Math.imul(Ue,Pe)|0,$=$+Math.imul(Ue,Ze)|0,W=W+Math.imul(ye,rt)|0,G=(G=G+Math.imul(ye,kt)|0)+Math.imul(Ce,rt)|0,$=$+Math.imul(Ce,kt)|0,W=W+Math.imul(be,Xt)|0,G=(G=G+Math.imul(be,ar)|0)+Math.imul(Le,Xt)|0,$=$+Math.imul(Le,ar)|0,W=W+Math.imul(ke,Jt)|0,G=(G=G+Math.imul(ke,nr)|0)+Math.imul(we,Jt)|0,$=$+Math.imul(we,nr)|0,W=W+Math.imul(ge,br)|0,G=(G=G+Math.imul(ge,Hr)|0)+Math.imul(pe,br)|0,$=$+Math.imul(pe,Hr)|0,W=W+Math.imul(j,jr)|0,G=(G=G+Math.imul(j,et)|0)+Math.imul(re,jr)|0,$=$+Math.imul(re,et)|0,W=W+Math.imul(Y,qt)|0,G=(G=G+Math.imul(Y,Vt)|0)+Math.imul(te,qt)|0,$=$+Math.imul(te,Vt)|0;var Ct=(ne+(W=W+Math.imul(H,tt)|0)|0)+((8191&(G=(G=G+Math.imul(H,je)|0)+Math.imul(q,tt)|0))<<13)|0;ne=(($=$+Math.imul(q,je)|0)+(G>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,W=Math.imul(Nt,at),G=(G=Math.imul(Nt,vt))+Math.imul(St,at)|0,$=Math.imul(St,vt),W=W+Math.imul(Ie,Pe)|0,G=(G=G+Math.imul(Ie,Ze)|0)+Math.imul(nt,Pe)|0,$=$+Math.imul(nt,Ze)|0,W=W+Math.imul(Ke,rt)|0,G=(G=G+Math.imul(Ke,kt)|0)+Math.imul(Ue,rt)|0,$=$+Math.imul(Ue,kt)|0,W=W+Math.imul(ye,Xt)|0,G=(G=G+Math.imul(ye,ar)|0)+Math.imul(Ce,Xt)|0,$=$+Math.imul(Ce,ar)|0,W=W+Math.imul(be,Jt)|0,G=(G=G+Math.imul(be,nr)|0)+Math.imul(Le,Jt)|0,$=$+Math.imul(Le,nr)|0,W=W+Math.imul(ke,br)|0,G=(G=G+Math.imul(ke,Hr)|0)+Math.imul(we,br)|0,$=$+Math.imul(we,Hr)|0,W=W+Math.imul(ge,jr)|0,G=(G=G+Math.imul(ge,et)|0)+Math.imul(pe,jr)|0,$=$+Math.imul(pe,et)|0,W=W+Math.imul(j,qt)|0,G=(G=G+Math.imul(j,Vt)|0)+Math.imul(re,qt)|0,$=$+Math.imul(re,Vt)|0;var Dt=(ne+(W=W+Math.imul(Y,tt)|0)|0)+((8191&(G=(G=G+Math.imul(Y,je)|0)+Math.imul(te,tt)|0))<<13)|0;ne=(($=$+Math.imul(te,je)|0)+(G>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,W=Math.imul(Nt,Pe),G=(G=Math.imul(Nt,Ze))+Math.imul(St,Pe)|0,$=Math.imul(St,Ze),W=W+Math.imul(Ie,rt)|0,G=(G=G+Math.imul(Ie,kt)|0)+Math.imul(nt,rt)|0,$=$+Math.imul(nt,kt)|0,W=W+Math.imul(Ke,Xt)|0,G=(G=G+Math.imul(Ke,ar)|0)+Math.imul(Ue,Xt)|0,$=$+Math.imul(Ue,ar)|0,W=W+Math.imul(ye,Jt)|0,G=(G=G+Math.imul(ye,nr)|0)+Math.imul(Ce,Jt)|0,$=$+Math.imul(Ce,nr)|0,W=W+Math.imul(be,br)|0,G=(G=G+Math.imul(be,Hr)|0)+Math.imul(Le,br)|0,$=$+Math.imul(Le,Hr)|0,W=W+Math.imul(ke,jr)|0,G=(G=G+Math.imul(ke,et)|0)+Math.imul(we,jr)|0,$=$+Math.imul(we,et)|0,W=W+Math.imul(ge,qt)|0,G=(G=G+Math.imul(ge,Vt)|0)+Math.imul(pe,qt)|0,$=$+Math.imul(pe,Vt)|0;var Gt=(ne+(W=W+Math.imul(j,tt)|0)|0)+((8191&(G=(G=G+Math.imul(j,je)|0)+Math.imul(re,tt)|0))<<13)|0;ne=(($=$+Math.imul(re,je)|0)+(G>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,W=Math.imul(Nt,rt),G=(G=Math.imul(Nt,kt))+Math.imul(St,rt)|0,$=Math.imul(St,kt),W=W+Math.imul(Ie,Xt)|0,G=(G=G+Math.imul(Ie,ar)|0)+Math.imul(nt,Xt)|0,$=$+Math.imul(nt,ar)|0,W=W+Math.imul(Ke,Jt)|0,G=(G=G+Math.imul(Ke,nr)|0)+Math.imul(Ue,Jt)|0,$=$+Math.imul(Ue,nr)|0,W=W+Math.imul(ye,br)|0,G=(G=G+Math.imul(ye,Hr)|0)+Math.imul(Ce,br)|0,$=$+Math.imul(Ce,Hr)|0,W=W+Math.imul(be,jr)|0,G=(G=G+Math.imul(be,et)|0)+Math.imul(Le,jr)|0,$=$+Math.imul(Le,et)|0,W=W+Math.imul(ke,qt)|0,G=(G=G+Math.imul(ke,Vt)|0)+Math.imul(we,qt)|0,$=$+Math.imul(we,Vt)|0;var fr=(ne+(W=W+Math.imul(ge,tt)|0)|0)+((8191&(G=(G=G+Math.imul(ge,je)|0)+Math.imul(pe,tt)|0))<<13)|0;ne=(($=$+Math.imul(pe,je)|0)+(G>>>13)|0)+(fr>>>26)|0,fr&=67108863,W=Math.imul(Nt,Xt),G=(G=Math.imul(Nt,ar))+Math.imul(St,Xt)|0,$=Math.imul(St,ar),W=W+Math.imul(Ie,Jt)|0,G=(G=G+Math.imul(Ie,nr)|0)+Math.imul(nt,Jt)|0,$=$+Math.imul(nt,nr)|0,W=W+Math.imul(Ke,br)|0,G=(G=G+Math.imul(Ke,Hr)|0)+Math.imul(Ue,br)|0,$=$+Math.imul(Ue,Hr)|0,W=W+Math.imul(ye,jr)|0,G=(G=G+Math.imul(ye,et)|0)+Math.imul(Ce,jr)|0,$=$+Math.imul(Ce,et)|0,W=W+Math.imul(be,qt)|0,G=(G=G+Math.imul(be,Vt)|0)+Math.imul(Le,qt)|0,$=$+Math.imul(Le,Vt)|0;var pr=(ne+(W=W+Math.imul(ke,tt)|0)|0)+((8191&(G=(G=G+Math.imul(ke,je)|0)+Math.imul(we,tt)|0))<<13)|0;ne=(($=$+Math.imul(we,je)|0)+(G>>>13)|0)+(pr>>>26)|0,pr&=67108863,W=Math.imul(Nt,Jt),G=(G=Math.imul(Nt,nr))+Math.imul(St,Jt)|0,$=Math.imul(St,nr),W=W+Math.imul(Ie,br)|0,G=(G=G+Math.imul(Ie,Hr)|0)+Math.imul(nt,br)|0,$=$+Math.imul(nt,Hr)|0,W=W+Math.imul(Ke,jr)|0,G=(G=G+Math.imul(Ke,et)|0)+Math.imul(Ue,jr)|0,$=$+Math.imul(Ue,et)|0,W=W+Math.imul(ye,qt)|0,G=(G=G+Math.imul(ye,Vt)|0)+Math.imul(Ce,qt)|0,$=$+Math.imul(Ce,Vt)|0;var Jr=(ne+(W=W+Math.imul(be,tt)|0)|0)+((8191&(G=(G=G+Math.imul(be,je)|0)+Math.imul(Le,tt)|0))<<13)|0;ne=(($=$+Math.imul(Le,je)|0)+(G>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,W=Math.imul(Nt,br),G=(G=Math.imul(Nt,Hr))+Math.imul(St,br)|0,$=Math.imul(St,Hr),W=W+Math.imul(Ie,jr)|0,G=(G=G+Math.imul(Ie,et)|0)+Math.imul(nt,jr)|0,$=$+Math.imul(nt,et)|0,W=W+Math.imul(Ke,qt)|0,G=(G=G+Math.imul(Ke,Vt)|0)+Math.imul(Ue,qt)|0,$=$+Math.imul(Ue,Vt)|0;var Lr=(ne+(W=W+Math.imul(ye,tt)|0)|0)+((8191&(G=(G=G+Math.imul(ye,je)|0)+Math.imul(Ce,tt)|0))<<13)|0;ne=(($=$+Math.imul(Ce,je)|0)+(G>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,W=Math.imul(Nt,jr),G=(G=Math.imul(Nt,et))+Math.imul(St,jr)|0,$=Math.imul(St,et),W=W+Math.imul(Ie,qt)|0,G=(G=G+Math.imul(Ie,Vt)|0)+Math.imul(nt,qt)|0,$=$+Math.imul(nt,Vt)|0;var Ar=(ne+(W=W+Math.imul(Ke,tt)|0)|0)+((8191&(G=(G=G+Math.imul(Ke,je)|0)+Math.imul(Ue,tt)|0))<<13)|0;ne=(($=$+Math.imul(Ue,je)|0)+(G>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,W=Math.imul(Nt,qt),G=(G=Math.imul(Nt,Vt))+Math.imul(St,qt)|0,$=Math.imul(St,Vt);var en=(ne+(W=W+Math.imul(Ie,tt)|0)|0)+((8191&(G=(G=G+Math.imul(Ie,je)|0)+Math.imul(nt,tt)|0))<<13)|0;ne=(($=$+Math.imul(nt,je)|0)+(G>>>13)|0)+(en>>>26)|0,en&=67108863;var mr=(ne+(W=Math.imul(Nt,tt))|0)+((8191&(G=(G=Math.imul(Nt,je))+Math.imul(St,tt)|0))<<13)|0;return ne=(($=Math.imul(St,je))+(G>>>13)|0)+(mr>>>26)|0,mr&=67108863,se[0]=ct,se[1]=ht,se[2]=Me,se[3]=Se,se[4]=Je,se[5]=We,se[6]=st,se[7]=lt,se[8]=pt,se[9]=Ct,se[10]=Dt,se[11]=Gt,se[12]=fr,se[13]=pr,se[14]=Jr,se[15]=Lr,se[16]=Ar,se[17]=en,se[18]=mr,0!==ne&&(se[19]=ne,U.length++),U};function M(F,D,N){return(new f).mulp(F,D,N)}function f(F,D){this.x=F,this.y=D}Math.imul||(A=y),r.prototype.mulTo=function(D,N){var X=this.length+D.length;return 10===this.length&&10===D.length?A(this,D,N):X<63?y(this,D,N):X<1024?function T(F,D,N){N.negative=D.negative^F.negative,N.length=F.length+D.length;for(var U=0,X=0,oe=0;oe<N.length-1;oe++){var se=X;X=0;for(var ne=67108863&U,W=Math.min(oe,D.length-1),G=Math.max(0,oe-F.length+1);G<=W;G++){var q=(0|F.words[oe-G])*(0|D.words[G]),K=67108863&q;ne=67108863&(K=K+ne|0),X+=(se=(se=se+(q/67108864|0)|0)+(K>>>26)|0)>>>26,se&=67108863}N.words[oe]=ne,U=se,se=X}return 0!==U?N.words[oe]=U:N.length--,N.strip()}(this,D,N):M(this,D,N)},f.prototype.makeRBT=function(D){for(var N=new Array(D),U=r.prototype._countBits(D)-1,X=0;X<D;X++)N[X]=this.revBin(X,U,D);return N},f.prototype.revBin=function(D,N,U){if(0===D||D===U-1)return D;for(var X=0,oe=0;oe<N;oe++)X|=(1&D)<<N-oe-1,D>>=1;return X},f.prototype.permute=function(D,N,U,X,oe,se){for(var ne=0;ne<se;ne++)X[ne]=N[D[ne]],oe[ne]=U[D[ne]]},f.prototype.transform=function(D,N,U,X,oe,se){this.permute(se,D,N,U,X,oe);for(var ne=1;ne<oe;ne<<=1)for(var W=ne<<1,G=Math.cos(2*Math.PI/W),$=Math.sin(2*Math.PI/W),V=0;V<oe;V+=W)for(var H=G,q=$,K=0;K<ne;K++){var Y=U[V+K],te=X[V+K],J=U[V+K+ne],j=X[V+K+ne],re=H*J-q*j;j=H*j+q*J,U[V+K]=Y+(J=re),X[V+K]=te+j,U[V+K+ne]=Y-J,X[V+K+ne]=te-j,K!==W&&(re=G*H-$*q,q=G*q+$*H,H=re)}},f.prototype.guessLen13b=function(D,N){var U=1|Math.max(N,D),X=1&U,oe=0;for(U=U/2|0;U;U>>>=1)oe++;return 1<<oe+1+X},f.prototype.conjugate=function(D,N,U){if(!(U<=1))for(var X=0;X<U/2;X++){var oe=D[X];D[X]=D[U-X-1],D[U-X-1]=oe,oe=N[X],N[X]=-N[U-X-1],N[U-X-1]=-oe}},f.prototype.normalize13b=function(D,N){for(var U=0,X=0;X<N/2;X++){var oe=8192*Math.round(D[2*X+1]/N)+Math.round(D[2*X]/N)+U;D[X]=67108863&oe,U=oe<67108864?0:oe/67108864|0}return D},f.prototype.convert13b=function(D,N,U,X){for(var oe=0,se=0;se<N;se++)U[2*se]=8191&(oe+=0|D[se]),U[2*se+1]=8191&(oe>>>=13),oe>>>=13;for(se=2*N;se<X;++se)U[se]=0;i(0===oe),i(0==(-8192&oe))},f.prototype.stub=function(D){for(var N=new Array(D),U=0;U<D;U++)N[U]=0;return N},f.prototype.mulp=function(D,N,U){var X=2*this.guessLen13b(D.length,N.length),oe=this.makeRBT(X),se=this.stub(X),ne=new Array(X),W=new Array(X),G=new Array(X),$=new Array(X),V=new Array(X),H=new Array(X),q=U.words;q.length=X,this.convert13b(D.words,D.length,ne,X),this.convert13b(N.words,N.length,$,X),this.transform(ne,se,W,G,X,oe),this.transform($,se,V,H,X,oe);for(var K=0;K<X;K++){var Y=W[K]*V[K]-G[K]*H[K];G[K]=W[K]*H[K]+G[K]*V[K],W[K]=Y}return this.conjugate(W,G,X),this.transform(W,G,q,se,X,oe),this.conjugate(q,se,X),this.normalize13b(q,X),U.negative=D.negative^N.negative,U.length=D.length+N.length,U.strip()},r.prototype.mul=function(D){var N=new r(null);return N.words=new Array(this.length+D.length),this.mulTo(D,N)},r.prototype.mulf=function(D){var N=new r(null);return N.words=new Array(this.length+D.length),M(this,D,N)},r.prototype.imul=function(D){return this.clone().mulTo(D,this)},r.prototype.imuln=function(D){i("number"==typeof D),i(D<67108864);for(var N=0,U=0;U<this.length;U++){var X=(0|this.words[U])*D,oe=(67108863&X)+(67108863&N);N>>=26,N+=X/67108864|0,N+=oe>>>26,this.words[U]=67108863&oe}return 0!==N&&(this.words[U]=N,this.length++),this},r.prototype.muln=function(D){return this.clone().imuln(D)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(D){var N=function l(F){for(var D=new Array(F.bitLength()),N=0;N<D.length;N++){var X=N%26;D[N]=(F.words[N/26|0]&1<<X)>>>X}return D}(D);if(0===N.length)return new r(1);for(var U=this,X=0;X<N.length&&0===N[X];X++,U=U.sqr());if(++X<N.length)for(var oe=U.sqr();X<N.length;X++,oe=oe.sqr())0!==N[X]&&(U=U.mul(oe));return U},r.prototype.iushln=function(D){i("number"==typeof D&&D>=0);var oe,N=D%26,U=(D-N)/26,X=67108863>>>26-N<<26-N;if(0!==N){var se=0;for(oe=0;oe<this.length;oe++){var ne=this.words[oe]&X;this.words[oe]=(0|this.words[oe])-ne<<N|se,se=ne>>>26-N}se&&(this.words[oe]=se,this.length++)}if(0!==U){for(oe=this.length-1;oe>=0;oe--)this.words[oe+U]=this.words[oe];for(oe=0;oe<U;oe++)this.words[oe]=0;this.length+=U}return this.strip()},r.prototype.ishln=function(D){return i(0===this.negative),this.iushln(D)},r.prototype.iushrn=function(D,N,U){var X;i("number"==typeof D&&D>=0),X=N?(N-N%26)/26:0;var oe=D%26,se=Math.min((D-oe)/26,this.length),ne=67108863^67108863>>>oe<<oe,W=U;if(X-=se,X=Math.max(0,X),W){for(var G=0;G<se;G++)W.words[G]=this.words[G];W.length=se}if(0!==se)if(this.length>se)for(this.length-=se,G=0;G<this.length;G++)this.words[G]=this.words[G+se];else this.words[0]=0,this.length=1;var $=0;for(G=this.length-1;G>=0&&(0!==$||G>=X);G--){var V=0|this.words[G];this.words[G]=$<<26-oe|V>>>oe,$=V&ne}return W&&0!==$&&(W.words[W.length++]=$),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(D,N,U){return i(0===this.negative),this.iushrn(D,N,U)},r.prototype.shln=function(D){return this.clone().ishln(D)},r.prototype.ushln=function(D){return this.clone().iushln(D)},r.prototype.shrn=function(D){return this.clone().ishrn(D)},r.prototype.ushrn=function(D){return this.clone().iushrn(D)},r.prototype.testn=function(D){i("number"==typeof D&&D>=0);var N=D%26,U=(D-N)/26;return!(this.length<=U||!(this.words[U]&1<<N))},r.prototype.imaskn=function(D){i("number"==typeof D&&D>=0);var N=D%26,U=(D-N)/26;return i(0===this.negative,"imaskn works only with positive numbers"),this.length<=U?this:(0!==N&&U++,this.length=Math.min(U,this.length),0!==N&&(this.words[this.length-1]&=67108863^67108863>>>N<<N),this.strip())},r.prototype.maskn=function(D){return this.clone().imaskn(D)},r.prototype.iaddn=function(D){return i("number"==typeof D),i(D<67108864),D<0?this.isubn(-D):0!==this.negative?1===this.length&&(0|this.words[0])<D?(this.words[0]=D-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(D),this.negative=1,this):this._iaddn(D)},r.prototype._iaddn=function(D){this.words[0]+=D;for(var N=0;N<this.length&&this.words[N]>=67108864;N++)this.words[N]-=67108864,N===this.length-1?this.words[N+1]=1:this.words[N+1]++;return this.length=Math.max(this.length,N+1),this},r.prototype.isubn=function(D){if(i("number"==typeof D),i(D<67108864),D<0)return this.iaddn(-D);if(0!==this.negative)return this.negative=0,this.iaddn(D),this.negative=1,this;if(this.words[0]-=D,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var N=0;N<this.length&&this.words[N]<0;N++)this.words[N]+=67108864,this.words[N+1]-=1;return this.strip()},r.prototype.addn=function(D){return this.clone().iaddn(D)},r.prototype.subn=function(D){return this.clone().isubn(D)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(D,N,U){var oe;this._expand(D.length+U);var se,ne=0;for(oe=0;oe<D.length;oe++){se=(0|this.words[oe+U])+ne;var W=(0|D.words[oe])*N;ne=((se-=67108863&W)>>26)-(W/67108864|0),this.words[oe+U]=67108863&se}for(;oe<this.length-U;oe++)ne=(se=(0|this.words[oe+U])+ne)>>26,this.words[oe+U]=67108863&se;if(0===ne)return this.strip();for(i(-1===ne),ne=0,oe=0;oe<this.length;oe++)ne=(se=-(0|this.words[oe])+ne)>>26,this.words[oe]=67108863&se;return this.negative=1,this.strip()},r.prototype._wordDiv=function(D,N){var U,X=this.clone(),oe=D,se=0|oe.words[oe.length-1];0!=(U=26-this._countBits(se))&&(oe=oe.ushln(U),X.iushln(U),se=0|oe.words[oe.length-1]);var G,W=X.length-oe.length;if("mod"!==N){(G=new r(null)).length=W+1,G.words=new Array(G.length);for(var $=0;$<G.length;$++)G.words[$]=0}var V=X.clone()._ishlnsubmul(oe,1,W);0===V.negative&&(X=V,G&&(G.words[W]=1));for(var H=W-1;H>=0;H--){var q=67108864*(0|X.words[oe.length+H])+(0|X.words[oe.length+H-1]);for(q=Math.min(q/se|0,67108863),X._ishlnsubmul(oe,q,H);0!==X.negative;)q--,X.negative=0,X._ishlnsubmul(oe,1,H),X.isZero()||(X.negative^=1);G&&(G.words[H]=q)}return G&&G.strip(),X.strip(),"div"!==N&&0!==U&&X.iushrn(U),{div:G||null,mod:X}},r.prototype.divmod=function(D,N,U){return i(!D.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===D.negative?(se=this.neg().divmod(D,N),"mod"!==N&&(X=se.div.neg()),"div"!==N&&(oe=se.mod.neg(),U&&0!==oe.negative&&oe.iadd(D)),{div:X,mod:oe}):0===this.negative&&0!==D.negative?(se=this.divmod(D.neg(),N),"mod"!==N&&(X=se.div.neg()),{div:X,mod:se.mod}):0!=(this.negative&D.negative)?(se=this.neg().divmod(D.neg(),N),"div"!==N&&(oe=se.mod.neg(),U&&0!==oe.negative&&oe.isub(D)),{div:se.div,mod:oe}):D.length>this.length||this.cmp(D)<0?{div:new r(0),mod:this}:1===D.length?"div"===N?{div:this.divn(D.words[0]),mod:null}:"mod"===N?{div:null,mod:new r(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new r(this.modn(D.words[0]))}:this._wordDiv(D,N);var X,oe,se},r.prototype.div=function(D){return this.divmod(D,"div",!1).div},r.prototype.mod=function(D){return this.divmod(D,"mod",!1).mod},r.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod},r.prototype.divRound=function(D){var N=this.divmod(D);if(N.mod.isZero())return N.div;var U=0!==N.div.negative?N.mod.isub(D):N.mod,X=D.ushrn(1),oe=D.andln(1),se=U.cmp(X);return se<0||1===oe&&0===se?N.div:0!==N.div.negative?N.div.isubn(1):N.div.iaddn(1)},r.prototype.modn=function(D){i(D<=67108863);for(var N=(1<<26)%D,U=0,X=this.length-1;X>=0;X--)U=(N*U+(0|this.words[X]))%D;return U},r.prototype.idivn=function(D){i(D<=67108863);for(var N=0,U=this.length-1;U>=0;U--){var X=(0|this.words[U])+67108864*N;this.words[U]=X/D|0,N=X%D}return this.strip()},r.prototype.divn=function(D){return this.clone().idivn(D)},r.prototype.egcd=function(D){i(0===D.negative),i(!D.isZero());var N=this,U=D.clone();N=0!==N.negative?N.umod(D):N.clone();for(var X=new r(1),oe=new r(0),se=new r(0),ne=new r(1),W=0;N.isEven()&&U.isEven();)N.iushrn(1),U.iushrn(1),++W;for(var G=U.clone(),$=N.clone();!N.isZero();){for(var V=0,H=1;0==(N.words[0]&H)&&V<26;++V,H<<=1);if(V>0)for(N.iushrn(V);V-- >0;)(X.isOdd()||oe.isOdd())&&(X.iadd(G),oe.isub($)),X.iushrn(1),oe.iushrn(1);for(var q=0,K=1;0==(U.words[0]&K)&&q<26;++q,K<<=1);if(q>0)for(U.iushrn(q);q-- >0;)(se.isOdd()||ne.isOdd())&&(se.iadd(G),ne.isub($)),se.iushrn(1),ne.iushrn(1);N.cmp(U)>=0?(N.isub(U),X.isub(se),oe.isub(ne)):(U.isub(N),se.isub(X),ne.isub(oe))}return{a:se,b:ne,gcd:U.iushln(W)}},r.prototype._invmp=function(D){i(0===D.negative),i(!D.isZero());var V,N=this,U=D.clone();N=0!==N.negative?N.umod(D):N.clone();for(var X=new r(1),oe=new r(0),se=U.clone();N.cmpn(1)>0&&U.cmpn(1)>0;){for(var ne=0,W=1;0==(N.words[0]&W)&&ne<26;++ne,W<<=1);if(ne>0)for(N.iushrn(ne);ne-- >0;)X.isOdd()&&X.iadd(se),X.iushrn(1);for(var G=0,$=1;0==(U.words[0]&$)&&G<26;++G,$<<=1);if(G>0)for(U.iushrn(G);G-- >0;)oe.isOdd()&&oe.iadd(se),oe.iushrn(1);N.cmp(U)>=0?(N.isub(U),X.isub(oe)):(U.isub(N),oe.isub(X))}return(V=0===N.cmpn(1)?X:oe).cmpn(0)<0&&V.iadd(D),V},r.prototype.gcd=function(D){if(this.isZero())return D.abs();if(D.isZero())return this.abs();var N=this.clone(),U=D.clone();N.negative=0,U.negative=0;for(var X=0;N.isEven()&&U.isEven();X++)N.iushrn(1),U.iushrn(1);for(;;){for(;N.isEven();)N.iushrn(1);for(;U.isEven();)U.iushrn(1);var oe=N.cmp(U);if(oe<0){var se=N;N=U,U=se}else if(0===oe||0===U.cmpn(1))break;N.isub(U)}return U.iushln(X)},r.prototype.invm=function(D){return this.egcd(D).a.umod(D)},r.prototype.isEven=function(){return 0==(1&this.words[0])},r.prototype.isOdd=function(){return 1==(1&this.words[0])},r.prototype.andln=function(D){return this.words[0]&D},r.prototype.bincn=function(D){i("number"==typeof D);var N=D%26,U=(D-N)/26,X=1<<N;if(this.length<=U)return this._expand(U+1),this.words[U]|=X,this;for(var oe=X,se=U;0!==oe&&se<this.length;se++){var ne=0|this.words[se];oe=(ne+=oe)>>>26,this.words[se]=ne&=67108863}return 0!==oe&&(this.words[se]=oe,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(D){var U,N=D<0;if(0!==this.negative&&!N)return-1;if(0===this.negative&&N)return 1;if(this.strip(),this.length>1)U=1;else{N&&(D=-D),i(D<=67108863,"Number is too big");var X=0|this.words[0];U=X===D?0:X<D?-1:1}return 0!==this.negative?0|-U:U},r.prototype.cmp=function(D){if(0!==this.negative&&0===D.negative)return-1;if(0===this.negative&&0!==D.negative)return 1;var N=this.ucmp(D);return 0!==this.negative?0|-N:N},r.prototype.ucmp=function(D){if(this.length>D.length)return 1;if(this.length<D.length)return-1;for(var N=0,U=this.length-1;U>=0;U--){var X=0|this.words[U],oe=0|D.words[U];if(X!==oe){X<oe?N=-1:X>oe&&(N=1);break}}return N},r.prototype.gtn=function(D){return 1===this.cmpn(D)},r.prototype.gt=function(D){return 1===this.cmp(D)},r.prototype.gten=function(D){return this.cmpn(D)>=0},r.prototype.gte=function(D){return this.cmp(D)>=0},r.prototype.ltn=function(D){return-1===this.cmpn(D)},r.prototype.lt=function(D){return-1===this.cmp(D)},r.prototype.lten=function(D){return this.cmpn(D)<=0},r.prototype.lte=function(D){return this.cmp(D)<=0},r.prototype.eqn=function(D){return 0===this.cmpn(D)},r.prototype.eq=function(D){return 0===this.cmp(D)},r.red=function(D){return new O(D)},r.prototype.toRed=function(D){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),D.convertTo(this)._forceRed(D)},r.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(D){return this.red=D,this},r.prototype.forceRed=function(D){return i(!this.red,"Already a number in reduction context"),this._forceRed(D)},r.prototype.redAdd=function(D){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,D)},r.prototype.redIAdd=function(D){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,D)},r.prototype.redSub=function(D){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,D)},r.prototype.redISub=function(D){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,D)},r.prototype.redShl=function(D){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,D)},r.prototype.redMul=function(D){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.mul(this,D)},r.prototype.redIMul=function(D){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.imul(this,D)},r.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(D){return i(this.red&&!D.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,D)};var u={k256:null,p224:null,p192:null,p25519:null};function h(F,D){this.name=F,this.p=new r(D,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function o(){h.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function C(){h.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function R(){h.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function z(){h.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function O(F){if("string"==typeof F){var D=r._prime(F);this.m=D.p,this.prime=D}else i(F.gtn(1),"modulus must be greater than 1"),this.m=F,this.prime=null}function I(F){O.call(this,F),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}h.prototype._tmp=function(){var D=new r(null);return D.words=new Array(Math.ceil(this.n/13)),D},h.prototype.ireduce=function(D){var U,N=D;do{this.split(N,this.tmp),U=(N=(N=this.imulK(N)).iadd(this.tmp)).bitLength()}while(U>this.n);var X=U<this.n?-1:N.ucmp(this.p);return 0===X?(N.words[0]=0,N.length=1):X>0?N.isub(this.p):void 0!==N.strip?N.strip():N._strip(),N},h.prototype.split=function(D,N){D.iushrn(this.n,0,N)},h.prototype.imulK=function(D){return D.imul(this.k)},a(o,h),o.prototype.split=function(D,N){for(var U=4194303,X=Math.min(D.length,9),oe=0;oe<X;oe++)N.words[oe]=D.words[oe];if(N.length=X,D.length<=9)return D.words[0]=0,void(D.length=1);var se=D.words[9];for(N.words[N.length++]=se&U,oe=10;oe<D.length;oe++){var ne=0|D.words[oe];D.words[oe-10]=(ne&U)<<4|se>>>22,se=ne}D.words[oe-10]=se>>>=22,D.length-=0===se&&D.length>10?10:9},o.prototype.imulK=function(D){D.words[D.length]=0,D.words[D.length+1]=0,D.length+=2;for(var N=0,U=0;U<D.length;U++){var X=0|D.words[U];D.words[U]=67108863&(N+=977*X),N=64*X+(N/67108864|0)}return 0===D.words[D.length-1]&&(D.length--,0===D.words[D.length-1]&&D.length--),D},a(C,h),a(R,h),a(z,h),z.prototype.imulK=function(D){for(var N=0,U=0;U<D.length;U++){var X=19*(0|D.words[U])+N,oe=67108863&X;X>>>=26,D.words[U]=oe,N=X}return 0!==N&&(D.words[D.length++]=N),D},r._prime=function(D){if(u[D])return u[D];var N;if("k256"===D)N=new o;else if("p224"===D)N=new C;else if("p192"===D)N=new R;else{if("p25519"!==D)throw new Error("Unknown prime "+D);N=new z}return u[D]=N,N},O.prototype._verify1=function(D){i(0===D.negative,"red works only with positives"),i(D.red,"red works only with red numbers")},O.prototype._verify2=function(D,N){i(0==(D.negative|N.negative),"red works only with positives"),i(D.red&&D.red===N.red,"red works only with red numbers")},O.prototype.imod=function(D){return this.prime?this.prime.ireduce(D)._forceRed(this):D.umod(this.m)._forceRed(this)},O.prototype.neg=function(D){return D.isZero()?D.clone():this.m.sub(D)._forceRed(this)},O.prototype.add=function(D,N){this._verify2(D,N);var U=D.add(N);return U.cmp(this.m)>=0&&U.isub(this.m),U._forceRed(this)},O.prototype.iadd=function(D,N){this._verify2(D,N);var U=D.iadd(N);return U.cmp(this.m)>=0&&U.isub(this.m),U},O.prototype.sub=function(D,N){this._verify2(D,N);var U=D.sub(N);return U.cmpn(0)<0&&U.iadd(this.m),U._forceRed(this)},O.prototype.isub=function(D,N){this._verify2(D,N);var U=D.isub(N);return U.cmpn(0)<0&&U.iadd(this.m),U},O.prototype.shl=function(D,N){return this._verify1(D),this.imod(D.ushln(N))},O.prototype.imul=function(D,N){return this._verify2(D,N),this.imod(D.imul(N))},O.prototype.mul=function(D,N){return this._verify2(D,N),this.imod(D.mul(N))},O.prototype.isqr=function(D){return this.imul(D,D.clone())},O.prototype.sqr=function(D){return this.mul(D,D)},O.prototype.sqrt=function(D){if(D.isZero())return D.clone();var N=this.m.andln(3);if(i(N%2==1),3===N){var U=this.m.add(new r(1)).iushrn(2);return this.pow(D,U)}for(var X=this.m.subn(1),oe=0;!X.isZero()&&0===X.andln(1);)oe++,X.iushrn(1);i(!X.isZero());var se=new r(1).toRed(this),ne=se.redNeg(),W=this.m.subn(1).iushrn(1),G=this.m.bitLength();for(G=new r(2*G*G).toRed(this);0!==this.pow(G,W).cmp(ne);)G.redIAdd(ne);for(var $=this.pow(G,X),V=this.pow(D,X.addn(1).iushrn(1)),H=this.pow(D,X),q=oe;0!==H.cmp(se);){for(var K=H,Y=0;0!==K.cmp(se);Y++)K=K.redSqr();i(Y<q);var te=this.pow($,new r(1).iushln(q-Y-1));V=V.redMul(te),$=te.redSqr(),H=H.redMul($),q=Y}return V},O.prototype.invm=function(D){var N=D._invmp(this.m);return 0!==N.negative?(N.negative=0,this.imod(N).redNeg()):this.imod(N)},O.prototype.pow=function(D,N){if(N.isZero())return new r(1).toRed(this);if(0===N.cmpn(1))return D.clone();var X=new Array(16);X[0]=new r(1).toRed(this),X[1]=D;for(var oe=2;oe<X.length;oe++)X[oe]=this.mul(X[oe-1],D);var se=X[0],ne=0,W=0,G=N.bitLength()%26;for(0===G&&(G=26),oe=N.length-1;oe>=0;oe--){for(var $=N.words[oe],V=G-1;V>=0;V--){var H=$>>V&1;se!==X[0]&&(se=this.sqr(se)),0!==H||0!==ne?(ne<<=1,ne|=H,(4==++W||0===oe&&0===V)&&(se=this.mul(se,X[ne]),W=0,ne=0)):W=0}G=26}return se},O.prototype.convertTo=function(D){var N=D.umod(this.m);return N===D?N.clone():N},O.prototype.convertFrom=function(D){var N=D.clone();return N.red=null,N},r.mont=function(D){return new I(D)},a(I,O),I.prototype.convertTo=function(D){return this.imod(D.ushln(this.shift))},I.prototype.convertFrom=function(D){var N=this.imod(D.mul(this.rinv));return N.red=null,N},I.prototype.imul=function(D,N){if(D.isZero()||N.isZero())return D.words[0]=0,D.length=1,D;var U=D.imul(N),X=U.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),oe=U.isub(X).iushrn(this.shift),se=oe;return oe.cmp(this.m)>=0?se=oe.isub(this.m):oe.cmpn(0)<0&&(se=oe.iadd(this.m)),se._forceRed(this)},I.prototype.mul=function(D,N){if(D.isZero()||N.isZero())return new r(0)._forceRed(this);var U=D.mul(N),X=U.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),oe=U.isub(X).iushrn(this.shift),se=oe;return oe.cmp(this.m)>=0?se=oe.isub(this.m):oe.cmpn(0)<0&&(se=oe.iadd(this.m)),se._forceRed(this)},I.prototype.invm=function(D){return this.imod(D._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===c||c,this)},{buffer:2}],34:[function(e,c,d){"use strict";c.exports=function n(t){var i,a,r,g=t.length,s=0;for(i=0;i<g;++i)s+=t[i].length;var b=new Array(s),x=0;for(i=0;i<g;++i){var S=t[i],p=S.length;for(a=0;a<p;++a){var w=b[x++]=new Array(p-1),l=0;for(r=0;r<p;++r)r!==a&&(w[l++]=S[r]);if(1&a){var y=w[1];w[1]=w[0],w[0]=y}}}return b}},{}],35:[function(e,c,d){"use strict";c.exports=function p(w,l,y){switch(arguments.length){case 1:return x(w);case 2:return"function"==typeof l?g(w,w,l,!0):S(w,l);case 3:return g(w,l,y,!1);default:throw new Error("box-intersect: Invalid arguments")}};var s,n=e("typedarray-pool"),t=e("./lib/sweep"),i=e("./lib/intersect");function a(w,l){for(var y=0;y<w;++y)if(!(l[y]<=l[y+w]))return!0;return!1}function r(w,l,y,A){for(var T=0,M=0,f=0,u=w.length;f<u;++f){var h=w[f];if(!a(l,h)){for(var o=0;o<2*l;++o)y[T++]=h[o];A[M++]=f}}return M}function g(w,l,y,A){var T=w.length,M=l.length;if(!(T<=0||M<=0)){var f=w[0].length>>>1;if(!(f<=0)){var u,h=n.mallocDouble(2*f*T),o=n.mallocInt32(T);if((T=r(w,f,h,o))>0){if(1===f&&A)t.init(T),u=t.sweepComplete(f,y,0,T,h,o,0,T,h,o);else{var C=n.mallocDouble(2*f*M),R=n.mallocInt32(M);(M=r(l,f,C,R))>0&&(t.init(T+M),u=1===f?t.sweepBipartite(f,y,0,T,h,o,0,M,C,R):i(f,y,A,T,h,o,M,C,R),n.free(C),n.free(R))}n.free(h),n.free(o)}return u}}}function b(w,l){s.push([w,l])}function x(w){return s=[],g(w,w,b,!0),s}function S(w,l){return s=[],g(w,l,b,!1),s}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(e,c,d){"use strict";function i(a){return a?function g(s,b,x,S,p,w,l,y,A,T,M){return p-S>A-y?function a(s,b,x,S,p,w,l,y,A,T,M){for(var f=2*s,u=S,h=f*S;u<p;++u,h+=f){var o=w[b+h],C=w[b+h+s],R=l[u];e:for(var z=y,O=f*y;z<A;++z,O+=f){var D=M[z];if(!(T[b+O+s]<o||C<T[b+O])){for(var N=b+1;N<s;++N)if(w[N+s+h]<T[N+O]||T[N+s+O]<w[N+h])continue e;var ne=x(R,D);if(void 0!==ne)return ne}}}}(s,b,x,S,p,w,l,y,A,T,M):function r(s,b,x,S,p,w,l,y,A,T,M){for(var f=2*s,u=y,h=f*y;u<A;++u,h+=f){var o=T[b+h],C=T[b+h+s],R=M[u];e:for(var z=S,O=f*S;z<p;++z,O+=f){var D=l[z];if(!(C<w[b+O]||w[b+O+s]<o)){for(var N=b+1;N<s;++N)if(w[N+s+O]<T[N+h]||T[N+s+h]<w[N+O])continue e;var ne=x(D,R);if(void 0!==ne)return ne}}}}(s,b,x,S,p,w,l,y,A,T,M)}:function b(x,S,p,w,l,y,A,T,M,f,u,h){return y-l>f-M?w?function a(x,S,p,w,l,y,A,T,M,f,u){for(var h=2*x,o=w,C=h*w;o<l;++o,C+=h){var R=y[S+C],z=y[S+C+x],O=A[o];e:for(var I=T,F=h*T;I<M;++I,F+=h){var D=f[S+F],N=u[I];if(!(D<=R||z<D)){for(var U=S+1;U<x;++U)if(y[U+x+C]<f[U+F]||f[U+x+F]<y[U+C])continue e;var W=p(N,O);if(void 0!==W)return W}}}}(x,S,p,l,y,A,T,M,f,u,h):function r(x,S,p,w,l,y,A,T,M,f,u){for(var h=2*x,o=w,C=h*w;o<l;++o,C+=h){var R=y[S+C],z=y[S+C+x],O=A[o];e:for(var I=T,F=h*T;I<M;++I,F+=h){var D=f[S+F],N=u[I];if(!(D<R||z<D)){for(var U=S+1;U<x;++U)if(y[U+x+C]<f[U+F]||f[U+x+F]<y[U+C])continue e;var W=p(O,N);if(void 0!==W)return W}}}}(x,S,p,l,y,A,T,M,f,u,h):w?function g(x,S,p,w,l,y,A,T,M,f,u){for(var h=2*x,o=T,C=h*T;o<M;++o,C+=h){var R=f[S+C],z=u[o];e:for(var O=w,I=h*w;O<l;++O,I+=h){var N=A[O];if(!(R<=y[S+I]||y[S+I+x]<R)){for(var U=S+1;U<x;++U)if(y[U+x+I]<f[U+C]||f[U+x+C]<y[U+I])continue e;var W=p(z,N);if(void 0!==W)return W}}}}(x,S,p,l,y,A,T,M,f,u,h):function s(x,S,p,w,l,y,A,T,M,f,u){for(var h=2*x,o=T,C=h*T;o<M;++o,C+=h){var R=f[S+C],z=u[o];e:for(var O=w,I=h*w;O<l;++O,I+=h){var N=A[O];if(!(R<y[S+I]||y[S+I+x]<R)){for(var U=S+1;U<x;++U)if(y[U+x+I]<f[U+C]||f[U+x+C]<y[U+I])continue e;var W=p(N,z);if(void 0!==W)return W}}}}(x,S,p,l,y,A,T,M,f,u,h)}}d.partial=i(!1),d.full=i(!0)},{}],37:[function(e,c,d){"use strict";c.exports=function F(D,N,U,X,oe,se,ne,W,G){!function R(D,N){var U=8*t.log2(N+1)*(D+1)|0,X=t.nextPow2(6*U);o.length<X&&(n.free(o),o=n.mallocInt32(X));var oe=t.nextPow2(2*U);C.length<oe&&(n.free(C),C=n.mallocDouble(oe))}(D,X+ne);var H,$=0,V=2*D;for(z($++,0,0,X,0,ne,U?16:0,-1/0,1/0),U||z($++,0,0,ne,0,X,1,-1/0,1/0);$>0;){var q=6*($-=1),K=o[q],Y=o[q+1],te=o[q+2],J=o[q+3],j=o[q+4],re=o[q+5],le=2*$,ge=C[le],pe=C[le+1],xe=1&re,ke=!!(16&re),we=oe,de=se,be=W,Le=G;if(xe&&(we=W,de=G,be=oe,Le=se),!(2&re&&(te=y(D,K,Y,te,we,de,pe),Y>=te)||4&re&&(Y=A(D,K,Y,te,we,de,ge),Y>=te))){var De=te-Y,ye=j-J;if(ke){if(D*De*(De+ye)<4194304){if(void 0!==(H=g.scanComplete(D,K,N,Y,te,we,de,J,j,be,Le)))return H;continue}}else{if(D*Math.min(De,ye)<128){if(void 0!==(H=a(D,K,N,xe,Y,te,we,de,J,j,be,Le)))return H;continue}if(D*De*ye<4194304){if(void 0!==(H=g.scanBipartite(D,K,N,xe,Y,te,we,de,J,j,be,Le)))return H;continue}}var Ce=w(D,K,Y,te,we,de,ge,pe);if(Y<Ce)if(D*(Ce-Y)<128){if(void 0!==(H=r(D,K+1,N,Y,Ce,we,de,J,j,be,Le)))return H}else if(K===D-2){if(void 0!==(H=xe?g.sweepBipartite(D,N,J,j,be,Le,Y,Ce,we,de):g.sweepBipartite(D,N,Y,Ce,we,de,J,j,be,Le)))return H}else z($++,K+1,Y,Ce,J,j,xe,-1/0,1/0),z($++,K+1,J,j,Y,Ce,1^xe,-1/0,1/0);if(Ce<te){var Fe=s(D,K,J,j,be,Le),Ke=be[V*Fe+K],Ue=l(D,K,Fe,j,be,Le,Ke);if(Ue<j&&z($++,K,Ce,te,Ue,j,(4|xe)+(ke?16:0),Ke,pe),J<Fe&&z($++,K,Ce,te,J,Fe,(2|xe)+(ke?16:0),ge,Ke),Fe+1===Ue){if(void 0!==(H=ke?I(D,K,N,Ce,te,we,de,Fe,be,Le[Fe]):O(D,K,N,xe,Ce,te,we,de,Fe,be,Le[Fe])))return H}else if(Fe<Ue){var Be;if(ke){if(Ce<(Be=T(D,K,Ce,te,we,de,Ke))){var Ie=l(D,K,Ce,Be,we,de,Ke);if(K===D-2){if(Ce<Ie&&void 0!==(H=g.sweepComplete(D,N,Ce,Ie,we,de,Fe,Ue,be,Le))||Ie<Be&&void 0!==(H=g.sweepBipartite(D,N,Ie,Be,we,de,Fe,Ue,be,Le)))return H}else Ce<Ie&&z($++,K+1,Ce,Ie,Fe,Ue,16,-1/0,1/0),Ie<Be&&(z($++,K+1,Ie,Be,Fe,Ue,0,-1/0,1/0),z($++,K+1,Fe,Ue,Ie,Be,1,-1/0,1/0))}}else Ce<(Be=xe?M(D,K,Ce,te,we,de,Ke):T(D,K,Ce,te,we,de,Ke))&&(K===D-2?H=xe?g.sweepBipartite(D,N,Fe,Ue,be,Le,Ce,Be,we,de):g.sweepBipartite(D,N,Ce,Be,we,de,Fe,Ue,be,Le):(z($++,K+1,Ce,Be,Fe,Ue,xe,-1/0,1/0),z($++,K+1,Fe,Ue,Ce,Be,1^xe,-1/0,1/0)))}}}}};var n=e("typedarray-pool"),t=e("bit-twiddle"),i=e("./brute"),a=i.partial,r=i.full,g=e("./sweep"),s=e("./median"),b=e("./partition"),w=b("!(lo>=p0)&&!(p1>=hi)"),l=b("lo===p0"),y=b("lo<p0"),A=b("hi<=p0"),T=b("lo<=p0&&p0<=hi"),M=b("lo<p0&&p0<=hi"),o=n.mallocInt32(1024),C=n.mallocDouble(1024);function z(D,N,U,X,oe,se,ne,W,G){var $=6*D;o[$]=N,o[$+1]=U,o[$+2]=X,o[$+3]=oe,o[$+4]=se,o[$+5]=ne;var V=2*D;C[V]=W,C[V+1]=G}function O(D,N,U,X,oe,se,ne,W,G,$,V){var H=2*D,q=G*H,K=$[q+N];e:for(var Y=oe,te=oe*H;Y<se;++Y,te+=H){var j=ne[te+N+D];if(!(K<(J=ne[te+N])||j<K||X&&K===J)){for(var re=W[Y],le=N+1;le<D;++le){var J=ne[te+le];if((j=ne[te+le+D])<$[q+le]||$[q+le+D]<J)continue e}var xe;if(void 0!==(xe=X?U(V,re):U(re,V)))return xe}}}function I(D,N,U,X,oe,se,ne,W,G,$){var V=2*D,H=W*V,q=G[H+N];e:for(var K=X,Y=X*V;K<oe;++K,Y+=V){var te=ne[K];if(te!==$){var j=se[Y+N+D];if(!(q<(J=se[Y+N])||j<q)){for(var re=N+1;re<D;++re){var J=se[Y+re];if((j=se[Y+re+D])<G[H+re]||G[H+re+D]<J)continue e}var pe=U(te,$);if(void 0!==pe)return pe}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(e,c,d){"use strict";c.exports=function r(g,s,b,x,S,p){if(x<=b+1)return b;for(var w=b,l=x,y=x+b>>>1,A=2*g,T=y,M=S[A*y+s];w<l;){if(l-w<8){a(g,s,w,l,S,p),M=S[A*y+s];break}var f=l-w,u=Math.random()*f+w|0,h=S[A*u+s],o=Math.random()*f+w|0,C=S[A*o+s],R=Math.random()*f+w|0,z=S[A*R+s];h<=C?z>=C?(T=o,M=C):h>=z?(T=u,M=h):(T=R,M=z):C>=z?(T=o,M=C):z>=h?(T=u,M=h):(T=R,M=z);for(var F=A*(l-1),D=A*T,O=0;O<A;++O,++F,++D){var I=S[F];S[F]=S[D],S[D]=I}var N=p[l-1];for(p[l-1]=p[T],p[T]=N,F=A*(l-1),D=A*(T=t(g,s,w,l-1,S,p,M)),O=0;O<A;++O,++F,++D)I=S[F],S[F]=S[D],S[D]=I;if(N=p[l-1],p[l-1]=p[T],p[T]=N,y<T){for(l=T-1;w<l&&S[A*(l-1)+s]===M;)l-=1;l+=1}else{if(!(T<y))break;for(w=T+1;w<l&&S[A*w+s]===M;)w+=1}}return t(g,s,b,y,S,p,S[A*y+s])};var t=e("./partition")("lo<p0");function a(g,s,b,x,S,p){for(var w=2*g,l=w*(b+1)+s,y=b+1;y<x;++y,l+=w)for(var A=S[l],T=y,M=w*(y-1);T>b&&S[M+s]>A;--T,M-=w){for(var f=M,u=M+w,h=0;h<w;++h,++f,++u){var o=S[f];S[f]=S[u],S[u]=o}var C=p[T];p[T]=p[T-1],p[T-1]=C}}},{"./partition":39}],39:[function(e,c,d){"use strict";c.exports=function t(S){return n[S]};var n={"lo===p0":function i(S,p,w,l,y,A,T){for(var M=2*S,f=M*w,u=f,h=w,o=p,R=w;l>R;++R,f+=M)if(y[f+o]===T)if(h===R)h+=1,u+=M;else{for(var O=0;M>O;++O){var I=y[f+O];y[f+O]=y[u],y[u++]=I}var F=A[R];A[R]=A[h],A[h++]=F}return h},"lo<p0":function a(S,p,w,l,y,A,T){for(var M=2*S,f=M*w,u=f,h=w,o=p,R=w;l>R;++R,f+=M)if(y[f+o]<T)if(h===R)h+=1,u+=M;else{for(var O=0;M>O;++O){var I=y[f+O];y[f+O]=y[u],y[u++]=I}var F=A[R];A[R]=A[h],A[h++]=F}return h},"lo<=p0":function r(S,p,w,l,y,A,T){for(var M=2*S,f=M*w,u=f,h=w,C=S+p,R=w;l>R;++R,f+=M)if(y[f+C]<=T)if(h===R)h+=1,u+=M;else{for(var O=0;M>O;++O){var I=y[f+O];y[f+O]=y[u],y[u++]=I}var F=A[R];A[R]=A[h],A[h++]=F}return h},"hi<=p0":function g(S,p,w,l,y,A,T){for(var M=2*S,f=M*w,u=f,h=w,C=S+p,R=w;l>R;++R,f+=M)if(y[f+C]<=T)if(h===R)h+=1,u+=M;else{for(var O=0;M>O;++O){var I=y[f+O];y[f+O]=y[u],y[u++]=I}var F=A[R];A[R]=A[h],A[h++]=F}return h},"lo<p0&&p0<=hi":function b(S,p,w,l,y,A,T){for(var M=2*S,f=M*w,u=f,h=w,o=p,C=S+p,R=w;l>R;++R,f+=M)if(y[f+o]<T&&T<=y[f+C])if(h===R)h+=1,u+=M;else{for(var I=0;M>I;++I){var F=y[f+I];y[f+I]=y[u],y[u++]=F}var D=A[R];A[R]=A[h],A[h++]=D}return h},"lo<=p0&&p0<=hi":function s(S,p,w,l,y,A,T){for(var M=2*S,f=M*w,u=f,h=w,o=p,C=S+p,R=w;l>R;++R,f+=M)if(y[f+o]<=T&&T<=y[f+C])if(h===R)h+=1,u+=M;else{for(var I=0;M>I;++I){var F=y[f+I];y[f+I]=y[u],y[u++]=F}var D=A[R];A[R]=A[h],A[h++]=D}return h},"!(lo>=p0)&&!(p1>=hi)":function x(S,p,w,l,y,A,T,M){for(var f=2*S,u=f*w,h=u,o=w,C=p,R=S+p,z=w;l>z;++z,u+=f)if(!(y[u+C]>=T||M>=y[u+R]))if(o===z)o+=1,h+=f;else{for(var F=0;f>F;++F){var D=y[u+F];y[u+F]=y[h],y[h++]=D}var N=A[z];A[z]=A[o],A[o++]=N}return o}}},{}],40:[function(e,c,d){"use strict";c.exports=function t(p,w){w<=128?i(0,w-1,p):S(0,w-1,p)};function i(p,w,l){for(var y=2*(p+1),A=p+1;A<=w;++A){for(var T=l[y++],M=l[y++],f=A,u=y-2;f-- >p;){var h=l[u-2],o=l[u-1];if(h<T)break;if(h===T&&o<M)break;l[u]=h,l[u+1]=o,u-=2}l[u]=T,l[u+1]=M}}function a(p,w,l){var y=l[p*=2],A=l[p+1];l[p]=l[w*=2],l[p+1]=l[w+1],l[w]=y,l[w+1]=A}function r(p,w,l){l[p*=2]=l[w*=2],l[p+1]=l[w+1]}function g(p,w,l,y){l*=2;var A=y[p*=2],T=y[p+1];y[p]=y[w*=2],y[p+1]=y[w+1],y[w]=y[l],y[w+1]=y[l+1],y[l]=A,y[l+1]=T}function s(p,w,l,y,A){A[p*=2]=A[w*=2],A[w]=l,A[p+1]=A[w+1],A[w+1]=y}function b(p,w,l){var y=l[p*=2],A=l[w*=2];return!(y<A)&&(y!==A||l[p+1]>l[w+1])}function x(p,w,l,y){var A=y[p*=2];return A<w||A===w&&y[p+1]<l}function S(p,w,l){var y=(w-p+1)/6|0,A=p+y,T=w-y,M=p+w>>1,f=M-y,u=M+y,h=A,o=f,C=M,R=u,z=T,O=p+1,I=w-1,F=0;b(h,o,l)&&(F=h,h=o,o=F),b(R,z,l)&&(F=R,R=z,z=F),b(h,C,l)&&(F=h,h=C,C=F),b(o,C,l)&&(F=o,o=C,C=F),b(h,R,l)&&(F=h,h=R,R=F),b(C,R,l)&&(F=C,C=R,R=F),b(o,z,l)&&(F=o,o=z,z=F),b(o,C,l)&&(F=o,o=C,C=F),b(R,z,l)&&(F=R,R=z,z=F);for(var D=l[2*o],N=l[2*o+1],U=l[2*R],X=l[2*R+1],oe=2*h,se=2*C,ne=2*z,W=2*A,G=2*M,$=2*T,V=0;V<2;++V){var q=l[se+V],K=l[ne+V];l[W+V]=l[oe+V],l[G+V]=q,l[$+V]=K}r(f,p,l),r(u,w,l);for(var Y=O;Y<=I;++Y)if(x(Y,D,N,l))Y!==O&&a(Y,O,l),++O;else if(!x(Y,U,X,l))for(;;){if(x(I,U,X,l)){x(I,D,N,l)?(g(Y,O,I,l),++O,--I):(a(Y,I,l),--I);break}if(--I<Y)break}s(p,O-1,D,N,l),s(w,I+1,U,X,l),O-2-p<=32?i(p,O-2,l):S(p,O-2,l),w-(I+2)<=32?i(I+2,w,l):S(I+2,w,l),I-O<=32?i(O,I,l):S(O,I,l)}},{}],41:[function(e,c,d){"use strict";c.exports={init:function l(h){var o=t.nextPow2(h);g.length<o&&(n.free(g),g=n.mallocInt32(o)),s.length<o&&(n.free(s),s=n.mallocInt32(o)),b.length<o&&(n.free(b),b=n.mallocInt32(o)),x.length<o&&(n.free(x),x=n.mallocInt32(o)),S.length<o&&(n.free(S),S=n.mallocInt32(o)),p.length<o&&(n.free(p),p=n.mallocInt32(o));var C=8*o;w.length<C&&(n.free(w),w=n.mallocDouble(C))},sweepBipartite:function T(h,o,C,R,z,O,I,F,D,N){for(var U=0,X=2*h,oe=h-1,se=X-1,ne=C;ne<R;++ne){var W=O[ne],G=X*ne;w[U++]=z[G+oe],w[U++]=-(W+1),w[U++]=z[G+se],w[U++]=W}for(ne=I;ne<F;++ne){W=N[ne]+a;var $=X*ne;w[U++]=D[$+oe],w[U++]=-W,w[U++]=D[$+se],w[U++]=W}var V=U>>>1;i(w,V);var H=0,q=0;for(ne=0;ne<V;++ne){var K=0|w[2*ne+1];if(K>=a)y(b,x,q--,K=K-a|0);else if(K>=0)y(g,s,H--,K);else if(K<=-a){K=-K-a|0;for(var Y=0;Y<H;++Y)if(void 0!==(te=o(g[Y],K)))return te;A(b,x,q++,K)}else{for(K=-K-1|0,Y=0;Y<q;++Y){var te;if(void 0!==(te=o(K,b[Y])))return te}A(g,s,H++,K)}}},sweepComplete:function M(h,o,C,R,z,O,I,F,D,N){for(var U=0,X=2*h,oe=h-1,se=X-1,ne=C;ne<R;++ne){var W=O[ne]+1<<1,G=X*ne;w[U++]=z[G+oe],w[U++]=-W,w[U++]=z[G+se],w[U++]=W}for(ne=I;ne<F;++ne){W=N[ne]+1<<1;var $=X*ne;w[U++]=D[$+oe],w[U++]=1|-W,w[U++]=D[$+se],w[U++]=1|W}var V=U>>>1;i(w,V);var H=0,q=0,K=0;for(ne=0;ne<V;++ne){var Y=0|w[2*ne+1],te=1&Y;if(ne<V-1&&Y>>1==w[2*ne+3]>>1&&(te=2,ne+=1),Y<0){for(var J=-(Y>>1)-1,j=0;j<K;++j)if(void 0!==(re=o(S[j],J)))return re;if(0!==te)for(j=0;j<H;++j)if(void 0!==(re=o(g[j],J)))return re;if(1!==te)for(j=0;j<q;++j){var re;if(void 0!==(re=o(b[j],J)))return re}0===te?A(g,s,H++,J):1===te?A(b,x,q++,J):2===te&&A(S,p,K++,J)}else J=(Y>>1)-1,0===te?y(g,s,H--,J):1===te?y(b,x,q--,J):2===te&&y(S,p,K--,J)}},scanBipartite:function f(h,o,C,R,z,O,I,F,D,N,U,X){var oe=0,se=2*h,ne=o,W=o+h,G=1,$=1;R?$=a:G=a;for(var V=z;V<O;++V){var H=V+G,q=se*V;w[oe++]=I[q+ne],w[oe++]=-H,w[oe++]=I[q+W],w[oe++]=H}for(V=D;V<N;++V)H=V+$,w[oe++]=U[se*V+ne],w[oe++]=-H;var Y=oe>>>1;i(w,Y);var te=0;for(V=0;V<Y;++V){var J=0|w[2*V+1];if(J<0){var j=!1;if((H=-J)>=a?(j=!R,H-=a):(j=!!R,H-=1),j)A(g,s,te++,H);else{var re=X[H],le=se*H,ge=U[le+o+1],pe=U[le+o+1+h];e:for(var xe=0;xe<te;++xe){var ke=g[xe],we=se*ke;if(!(pe<I[we+o+1]||I[we+o+1+h]<ge)){for(var de=o+2;de<h;++de)if(U[le+de+h]<I[we+de]||I[we+de+h]<U[le+de])continue e;var Le,be=F[ke];if(void 0!==(Le=R?C(re,be):C(be,re)))return Le}}}}else y(g,s,te--,J-G)}},scanComplete:function u(h,o,C,R,z,O,I,F,D,N,U){for(var X=0,oe=2*h,se=o,ne=o+h,W=R;W<z;++W){var G=W+a,$=oe*W;w[X++]=O[$+se],w[X++]=-G,w[X++]=O[$+ne],w[X++]=G}for(W=F;W<D;++W)G=W+1,w[X++]=N[oe*W+se],w[X++]=-G;var H=X>>>1;i(w,H);var q=0;for(W=0;W<H;++W){var K=0|w[2*W+1];if(K<0)if((G=-K)>=a)g[q++]=G-a;else{var Y=U[G-=1],te=oe*G,J=N[te+o+1],j=N[te+o+1+h];e:for(var re=0;re<q;++re){var le=g[re],ge=I[le];if(ge===Y)break;var pe=oe*le;if(!(j<O[pe+o+1]||O[pe+o+1+h]<J)){for(var xe=o+2;xe<h;++xe)if(N[te+xe+h]<O[pe+xe]||O[pe+xe+h]<N[te+xe])continue e;var ke=C(ge,Y);if(void 0!==ke)return ke}}}else{for(G=K-a,re=q-1;re>=0;--re)if(g[re]===G){for(xe=re+1;xe<q;++xe)g[xe-1]=g[xe];break}--q}}}};var n=e("typedarray-pool"),t=e("bit-twiddle"),i=e("./sort"),a=1<<28,r=1024,g=n.mallocInt32(r),s=n.mallocInt32(r),b=n.mallocInt32(r),x=n.mallocInt32(r),S=n.mallocInt32(r),p=n.mallocInt32(r),w=n.mallocDouble(8*r);function y(h,o,C,R){var z=o[R],O=h[C-1];h[z]=O,o[O]=z}function A(h,o,C,R){h[C]=R,o[R]=C}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(e,c,d){"use strict";var n=e("./lib/monotone"),t=e("./lib/triangulation"),i=e("./lib/delaunay"),a=e("./lib/filter");function r(S){return[Math.min(S[0],S[1]),Math.max(S[0],S[1])]}function g(S,p){return S[0]-p[0]||S[1]-p[1]}function b(S,p,w){return p in S?S[p]:w}c.exports=function x(S,p,w){Array.isArray(p)?(w=w||{},p=p||[]):(w=p||{},p=[]);var l=!!b(w,"delaunay",!0),y=!!b(w,"interior",!0),A=!!b(w,"exterior",!0),T=!!b(w,"infinity",!1);if(!y&&!A||0===S.length)return[];var M=n(S,p);if(l||y!==A||T){for(var f=t(S.length,function s(S){return S.map(r).sort(g)}(p)),u=0;u<M.length;++u){var h=M[u];f.addTriangle(h[0],h[1],h[2])}return l&&i(S,f),A?y?T?a(f,0,T):f.cells():a(f,1,T):a(f,-1)}return M}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(e,c,d){"use strict";var n=e("robust-in-sphere")[4];function i(r,g,s,b,x,S){var p=g.opposite(b,x);if(!(p<0)){if(x<b){var w=b;b=x,x=w,w=S,S=p,p=w}g.isConstraint(b,x)||n(r[b],r[x],r[S],r[p])<0&&s.push(b,x)}}e("binary-search-bounds"),c.exports=function a(r,g){for(var s=[],b=r.length,x=g.stars,S=0;S<b;++S)for(var p=x[S],w=1;w<p.length;w+=2)if(!((l=p[w])<S||g.isConstraint(S,l))){for(var y=p[w-1],A=-1,T=1;T<p.length;T+=2)if(p[T-1]===l){A=p[T];break}A<0||n(r[S],r[l],r[y],r[A])<0&&s.push(S,l)}for(;s.length>0;){for(var l=s.pop(),M=(y=-1,A=-1,p=x[S=s.pop()],1);M<p.length;M+=2){var f=p[M-1],u=p[M];f===l?A=u:u===l&&(y=f)}y<0||A<0||n(r[S],r[l],r[y],r[A])>=0||(g.flip(S,l),i(r,g,s,y,S,A),i(r,g,s,S,A,y),i(r,g,s,A,l,y),i(r,g,s,l,y,A))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(e,c,d){"use strict";var b,n=e("binary-search-bounds");function t(b,x,S,p,w,l,y){this.cells=b,this.neighbor=x,this.flags=p,this.constraint=S,this.active=w,this.next=l,this.boundary=y}function a(b,x){return b[0]-x[0]||b[1]-x[1]||b[2]-x[2]}c.exports=function s(b,x,S){var p=function r(b,x){for(var S=b.cells(),p=S.length,w=0;w<p;++w){var y=(l=S[w])[0],T=l[2];(A=l[1])<T?A<y&&(l[0]=A,l[1]=T,l[2]=y):T<y&&(l[0]=T,l[1]=y,l[2]=A)}S.sort(a);var M=new Array(p);for(w=0;w<M.length;++w)M[w]=0;var f=[],u=[],h=new Array(3*p),o=new Array(3*p),C=null;x&&(C=[]);var R=new t(S,h,o,M,f,u,C);for(w=0;w<p;++w)for(var l=S[w],z=0;z<3;++z){var A,O=h[3*w+z]=R.locate(A=l[(z+1)%3],y=l[z],b.opposite(A,y)),I=o[3*w+z]=b.isConstraint(y,A);O<0&&(I?u.push(w):(f.push(w),M[w]=1),x&&C.push([A,y,-1]))}return R}(b,S);if(0===x)return S?p.cells.concat(p.boundary):p.cells;for(var w=1,l=p.active,y=p.next,A=p.flags,T=p.cells,M=p.constraint,f=p.neighbor;l.length>0||y.length>0;){for(;l.length>0;){var u=l.pop();if(A[u]!==-w){A[u]=w;for(var o=0;o<3;++o){var C=f[3*u+o];C>=0&&0===A[C]&&(M[3*u+o]?y.push(C):(l.push(C),A[C]=w))}}}var R=y;y=l,l=R,y.length=0,w=-w}var z=function g(b,x,S){for(var p=0,w=0;w<b.length;++w)x[w]===S&&(b[p++]=b[w]);return b.length=p,b}(T,A,x);return S?z.concat(p.boundary):z},t.prototype.locate=(b=[0,0,0],function(x,S,p){var w=x,l=S,y=p;return S<p?S<x&&(w=S,l=p,y=x):p<x&&(w=p,l=x,y=S),w<0?-1:(b[0]=w,b[1]=l,b[2]=y,n.eq(this.cells,b,a))})},{"binary-search-bounds":31}],45:[function(e,c,d){"use strict";var n=e("binary-search-bounds"),t=e("robust-orientation")[3];function g(A,T,M,f,u){this.a=A,this.b=T,this.idx=M,this.lowerIds=f,this.upperIds=u}function s(A,T,M,f){this.a=A,this.b=T,this.type=M,this.idx=f}function b(A,T){var M=A.a[0]-T.a[0]||A.a[1]-T.a[1]||A.type-T.type;return M||0!==A.type&&(M=t(A.a,A.b,T.b))?M:A.idx-T.idx}function x(A,T){return t(A.a,A.b,T)}function S(A,T,M,f,u){for(var h=n.lt(T,f,x),o=n.gt(T,f,x),C=h;C<o;++C){for(var R=T[C],z=R.lowerIds,I=z.length;I>1&&t(M[z[I-2]],M[z[I-1]],f)>0;)A.push([z[I-1],z[I-2],u]),I-=1;z.length=I,z.push(u);var O=R.upperIds;for(I=O.length;I>1&&t(M[O[I-2]],M[O[I-1]],f)<0;)A.push([O[I-2],O[I-1],u]),I-=1;O.length=I,O.push(u)}}function p(A,T){return(A.a[0]<T.a[0]?t(A.a,A.b,T.a):t(T.b,T.a,A.a))||(T.b[0]<A.b[0]?t(A.a,A.b,T.b):t(T.b,T.a,A.b))||A.idx-T.idx}function w(A,T,M){var f=n.le(A,M,p),u=A[f],h=u.upperIds,o=h[h.length-1];u.upperIds=[o],A.splice(f+1,0,new g(M.a,M.b,M.idx,[o],h))}function l(A,T,M){var f=M.a;M.a=M.b,M.b=f;var u=n.eq(A,M,p);A[u-1].upperIds=A[u].upperIds,A.splice(u,1)}c.exports=function y(A,T){for(var M=A.length,f=T.length,u=[],h=0;h<M;++h)u.push(new s(A[h],null,0,h));for(h=0;h<f;++h){var o=T[h],C=A[o[0]],R=A[o[1]];C[0]<R[0]?u.push(new s(C,R,2,h),new s(R,C,1,h)):C[0]>R[0]&&u.push(new s(R,C,2,h),new s(C,R,1,h))}u.sort(b);for(var z=u[0].a[0]-(1+Math.abs(u[0].a[0]))*Math.pow(2,-52),O=[new g([z,1],[z,0],-1,[],[],[],[])],I=[],F=(h=0,u.length);h<F;++h){var D=u[h],N=D.type;0===N?S(I,O,A,D.a,D.idx):2===N?w(O,0,D):l(O,0,D)}return I}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(e,c,d){"use strict";var n=e("binary-search-bounds");function t(g,s){this.stars=g,this.edges=s}c.exports=function r(g,s){for(var b=new Array(g),x=0;x<g;++x)b[x]=[];return new t(b,s)};var i=t.prototype;function a(g,s,b){for(var x=1,S=g.length;x<S;x+=2)if(g[x-1]===s&&g[x]===b)return g[x-1]=g[S-2],g[x]=g[S-1],void(g.length=S-2)}i.isConstraint=function(){var g=[0,0];function s(b,x){return b[0]-x[0]||b[1]-x[1]}return function(b,x){return g[0]=Math.min(b,x),g[1]=Math.max(b,x),n.eq(this.edges,g,s)>=0}}(),i.removeTriangle=function(g,s,b){var x=this.stars;a(x[g],s,b),a(x[s],b,g),a(x[b],g,s)},i.addTriangle=function(g,s,b){var x=this.stars;x[g].push(s,b),x[s].push(b,g),x[b].push(g,s)},i.opposite=function(g,s){for(var b=this.stars[s],x=1,S=b.length;x<S;x+=2)if(b[x]===g)return b[x-1];return-1},i.flip=function(g,s){var b=this.opposite(g,s),x=this.opposite(s,g);this.removeTriangle(g,s,b),this.removeTriangle(s,g,x),this.addTriangle(g,x,b),this.addTriangle(s,b,x)},i.edges=function(){for(var g=this.stars,s=[],b=0,x=g.length;b<x;++b)for(var S=g[b],p=0,w=S.length;p<w;p+=2)s.push([S[p],S[p+1]]);return s},i.cells=function(){for(var g=this.stars,s=[],b=0,x=g.length;b<x;++b)for(var S=g[b],p=0,w=S.length;p<w;p+=2){var l=S[p],y=S[p+1];b<Math.min(l,y)&&s.push([b,l,y])}return s}},{"binary-search-bounds":31}],47:[function(e,c,d){"use strict";c.exports=function n(t){for(var i=1,a=1;a<t.length;++a)for(var r=0;r<a;++r)if(t[a]<t[r])i=-i;else if(t[r]===t[a])return 0;return i}},{}],48:[function(e,c,d){"use strict";var n=e("dup"),t=e("robust-linear-solve");function i(g,s){for(var b=0,x=g.length,S=0;S<x;++S)b+=g[S]*s[S];return b}function a(g){var s=g.length;if(0===s)return[];var x=n([g.length+1,g.length+1],1),S=n([g.length+1],1);x[s][s]=0;for(var p=0;p<s;++p){for(var w=0;w<=p;++w)x[w][p]=x[p][w]=2*i(g[p],g[w]);S[p]=i(g[p],g[p])}var l=t(x,S),y=0,A=l[s+1];for(p=0;p<A.length;++p)y+=A[p];var T=new Array(s);for(p=0;p<s;++p){A=l[p];var M=0;for(w=0;w<A.length;++w)M+=A[w];T[p]=M/y}return T}function r(g){if(0===g.length)return[];for(var s=g[0].length,b=n([s]),x=a(g),S=0;S<g.length;++S)for(var p=0;p<s;++p)b[p]+=g[S][p]*x[S];return b}r.barycenetric=a,c.exports=r},{dup:65,"robust-linear-solve":283}],49:[function(e,c,d){c.exports=function t(i){for(var a=n(i),r=0,g=0;g<i.length;++g)for(var s=i[g],b=0;b<a.length;++b)r+=Math.pow(s[b]-a[b],2);return Math.sqrt(r/i.length)};var n=e("circumcenter")},{circumcenter:48}],50:[function(e,c,d){"use strict";c.exports=function C(R,z,O){var I;if(O){I=z;for(var F=new Array(z.length),D=0;D<z.length;++D)F[D]=[(N=z[D])[0],N[1],O[D]];z=F}for(var U=function h(R,z,O){var I=T(R,[],w(R));return u(z,I,O),!!I}(R,z,!!O);o(R,z,!!O);)U=!0;if(O&&U)for(I.length=0,O.length=0,D=0;D<z.length;++D){var N;I.push([(N=z[D])[0],N[1]]),O.push(N[2])}return U};var n=e("union-find"),t=e("box-intersect"),i=e("robust-segment-intersect"),a=e("big-rat"),r=e("big-rat/cmp"),g=e("big-rat/to-float"),s=e("rat-vec"),b=e("nextafter"),x=e("./lib/rat-seg-intersect");function S(R){var z=g(R);return[b(z,-1/0),b(z,1/0)]}function w(R){for(var z=new Array(R.length),O=0;O<R.length;++O){var I=R[O];z[O]=[b(I[0],-1/0),b(I[1],-1/0),b(I[0],1/0),b(I[1],1/0)]}return z}function T(R,z,O){for(var I=z.length,F=new n(I),D=[],N=0;N<z.length;++N){var U=z[N],X=S(U[0]),oe=S(U[1]);D.push([b(X[0],-1/0),b(oe[0],-1/0),b(X[1],1/0),b(oe[1],1/0)])}t(D,function($,V){F.link($,V)});var se=!0,ne=new Array(I);for(N=0;N<I;++N)(W=F.find(N))!==N&&(se=!1,R[W]=[Math.min(R[N][0],R[W][0]),Math.min(R[N][1],R[W][1])]);if(se)return null;var G=0;for(N=0;N<I;++N){var W;(W=F.find(N))===N?(ne[N]=G,R[G++]=R[N]):ne[N]=-1}for(R.length=G,N=0;N<I;++N)ne[N]<0&&(ne[N]=ne[F.find(N)]);return ne}function M(R,z){return R[0]-z[0]||R[1]-z[1]}function f(R,z){return R[0]-z[0]||R[1]-z[1]||(R[2]<z[2]?-1:R[2]>z[2]?1:0)}function u(R,z,O){if(0!==R.length){if(z)for(var I=0;I<R.length;++I){var D=z[(F=R[I])[0]],N=z[F[1]];F[0]=Math.min(D,N),F[1]=Math.max(D,N)}else for(I=0;I<R.length;++I){var F;D=(F=R[I])[0],N=F[1],F[0]=Math.min(D,N),F[1]=Math.max(D,N)}R.sort(O?f:M);var U=1;for(I=1;I<R.length;++I){var X=R[I-1],oe=R[I];oe[0]===X[0]&&oe[1]===X[1]&&(!O||oe[2]===X[2])||(R[U++]=oe)}R.length=U}}function o(R,z,O){var I=function p(R,z){for(var O=new Array(z.length),I=0;I<z.length;++I){var F=z[I],D=R[F[0]],N=R[F[1]];O[I]=[b(Math.min(D[0],N[0]),-1/0),b(Math.min(D[1],N[1]),-1/0),b(Math.max(D[0],N[0]),1/0),b(Math.max(D[1],N[1]),1/0)]}return O}(R,z),F=function l(R,z,O){var I=[];return t(O,function(F,D){var N=z[F],U=z[D];N[0]!==U[0]&&N[0]!==U[1]&&N[1]!==U[0]&&N[1]!==U[1]&&i(R[N[0]],R[N[1]],R[U[0]],R[U[1]])&&I.push([F,D])}),I}(R,z,I),D=w(R),N=function y(R,z,O,I){var F=[];return t(O,I,function(D,N){var U=z[D];if(U[0]!==N&&U[1]!==N){var X=R[N];i(R[U[0]],R[U[1]],X,X)&&F.push([D,N])}}),F}(R,z,I,D),X=T(R,function A(R,z,O,I,F){var D,N,U=R.map(function(le){return[a(le[0]),a(le[1])]});for(D=0;D<O.length;++D){var X=O[D],oe=X[1],se=z[N=X[0]],ne=z[oe],W=x(s(R[se[0]]),s(R[se[1]]),s(R[ne[0]]),s(R[ne[1]]));if(W){var G=R.length;R.push([g(W[0]),g(W[1])]),U.push(W),I.push([N,G],[oe,G])}}for(I.sort(function(le,ge){if(le[0]!==ge[0])return le[0]-ge[0];var pe=U[le[1]],xe=U[ge[1]];return r(pe[0],xe[0])||r(pe[1],xe[1])}),D=I.length-1;D>=0;--D){var V=z[N=($=I[D])[0]],H=V[0],q=V[1],K=R[H],Y=R[q];if((K[0]-Y[0]||K[1]-Y[1])<0){var te=H;H=q,q=te}V[0]=H;var j,J=V[1]=$[1];for(F&&(j=V[2]);D>0&&I[D-1][0]===N;){var $,re=($=I[--D])[1];z.push(F?[J,re,j]:[J,re]),J=re}z.push(F?[J,q,j]:[J,q])}return U}(R,z,F,N,O));return u(z,X,O),!!X||F.length>0||N.length>0}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(e,c,d){"use strict";c.exports=function x(S,p,w,l){var y=r(p,S),A=r(l,w),T=b(y,A);if(0===a(T))return null;var f=b(A,r(S,w)),u=t(f,T),h=s(y,u);return g(S,h)};var n=e("big-rat/mul"),t=e("big-rat/div"),i=e("big-rat/sub"),a=e("big-rat/sign"),r=e("rat-vec/sub"),g=e("rat-vec/add"),s=e("rat-vec/muls");function b(S,p){return i(n(S[0],p[1]),n(S[1],p[0]))}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(e,c,d){c.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(e,c,d){"use strict";var n=e("./colorScale"),t=e("lerp");function a(s){return[s[0]/255,s[1]/255,s[2]/255,s[3]]}function r(s){for(var b,x="#",S=0;S<3;++S)x+=("00"+(b=(b=s[S]).toString(16))).substr(b.length);return x}function g(s){return"rgba("+s.join(",")+")"}c.exports=function i(s){var b,x,S,p,w,l,y,A,T,M;if(s||(s={}),A=(s.nshades||72)-1,y=s.format||"hex",(l=s.colormap)||(l="jet"),"string"==typeof l){if(l=l.toLowerCase(),!n[l])throw Error(l+" not a supported colorscale");w=n[l]}else{if(!Array.isArray(l))throw Error("unsupported colormap option",l);w=l.slice()}if(w.length>A+1)throw new Error(l+" map requires nshades to be at least size "+w.length);T=Array.isArray(s.alpha)?2!==s.alpha.length?[1,1]:s.alpha.slice():"number"==typeof s.alpha?[s.alpha,s.alpha]:[1,1],b=w.map(function(C){return Math.round(C.index*A)}),T[0]=Math.min(Math.max(T[0],0),1),T[1]=Math.min(Math.max(T[1],0),1);var f=w.map(function(C,R){var z=w[R].index,O=w[R].rgb.slice();return 4===O.length&&O[3]>=0&&O[3]<=1||(O[3]=T[0]+(T[1]-T[0])*z),O}),u=[];for(M=0;M<b.length-1;++M){p=b[M+1]-b[M],x=f[M],S=f[M+1];for(var h=0;h<p;h++){var o=h/p;u.push([Math.round(t(x[0],S[0],o)),Math.round(t(x[1],S[1],o)),Math.round(t(x[2],S[2],o)),t(x[3],S[3],o)])}}return u.push(w[w.length-1].rgb.concat(T[1])),"hex"===y?u=u.map(r):"rgbaString"===y?u=u.map(g):"float"===y&&(u=u.map(a)),u}},{"./colorScale":52,lerp:240}],54:[function(e,c,d){"use strict";c.exports=function s(b,x,S,p){var w=n(x,S,p);if(0===w){var l=t(n(b,x,S)),y=t(n(b,x,p));if(l===y){if(0===l){var A=g(b,x,S);return A===g(b,x,p)?0:A?1:-1}return 0}return 0===y?l>0||g(b,x,p)?-1:1:0===l?y>0||g(b,x,S)?1:-1:t(y-l)}var M=n(b,x,S);return M>0?w>0&&n(b,x,p)>0?1:-1:M<0?w>0||n(b,x,p)>0?1:-1:n(b,x,p)>0||g(b,x,S)?1:-1};var n=e("robust-orientation"),t=e("signum"),i=e("two-sum"),a=e("robust-product"),r=e("robust-sum");function g(b,x,S){var p=i(b[0],-x[0]),w=i(b[1],-x[1]),l=i(S[0],-x[0]),y=i(S[1],-x[1]),A=r(a(p,l),a(w,y));return A[A.length-1]>=0}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(e,c,d){"use strict";c.exports=function(t){return t<0?-1:t>0?1:0}},{}],56:[function(e,c,d){c.exports=function i(a,r){var g=a.length,s=a.length-r.length;if(s)return s;switch(g){case 0:return 0;case 1:return a[0]-r[0];case 2:return a[0]+a[1]-r[0]-r[1]||n(a[0],a[1])-n(r[0],r[1]);case 3:var b=a[0]+a[1],x=r[0]+r[1];if(s=b+a[2]-(x+r[2]))return s;var S=n(a[0],a[1]),p=n(r[0],r[1]);return n(S,a[2])-n(p,r[2])||n(S+a[2],b)-n(p+r[2],x);case 4:var w=a[0],l=a[1],y=a[2],A=a[3],T=r[0],M=r[1],f=r[2],u=r[3];return w+l+y+A-(T+M+f+u)||n(w,l,y,A)-n(T,M,f,u,T)||n(w+l,w+y,w+A,l+y,l+A,y+A)-n(T+M,T+f,T+u,M+f,M+u,f+u)||n(w+l+y,w+l+A,w+y+A,l+y+A)-n(T+M+f,T+M+u,T+f+u,M+f+u);default:for(var h=a.slice().sort(t),o=r.slice().sort(t),C=0;C<g;++C)if(s=h[C]-o[C])return s;return 0}};var n=Math.min;function t(a,r){return a-r}},{}],57:[function(e,c,d){"use strict";var n=e("compare-cell"),t=e("cell-orientation");c.exports=function i(a,r){return n(a,r)||t(a)-t(r)}},{"cell-orientation":47,"compare-cell":56}],58:[function(e,c,d){"use strict";var n=e("./lib/ch1d"),t=e("./lib/ch2d"),i=e("./lib/chnd");c.exports=function a(r){var g=r.length;if(0===g)return[];if(1===g)return[[0]];var s=r[0].length;return 0===s?[]:1===s?n(r):2===s?t(r):i(r,s)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(e,c,d){"use strict";c.exports=function n(t){for(var i=0,a=0,r=1;r<t.length;++r)t[r][0]<t[i][0]&&(i=r),t[r][0]>t[a][0]&&(a=r);return i<a?[[i],[a]]:i>a?[[a],[i]]:[[i]]}},{}],60:[function(e,c,d){"use strict";c.exports=function t(i){var a=n(i),r=a.length;if(r<=2)return[];for(var g=new Array(r),s=a[r-1],b=0;b<r;++b){var x=a[b];g[b]=[s,x],s=x}return g};var n=e("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":246}],61:[function(e,c,d){"use strict";c.exports=function r(g,s){try{return n(g,!0)}catch(p){var b=t(g);if(b.length<=s)return[];var x=function i(g,s){for(var b=g.length,x=new Array(b),S=0;S<s.length;++S)x[S]=g[s[S]];var p=s.length;for(S=0;S<b;++S)s.indexOf(S)<0&&(x[p++]=g[S]);return x}(g,b);return function a(g,s){for(var b=g.length,x=s.length,S=0;S<b;++S)for(var p=g[S],w=0;w<p.length;++w){var l=p[w];if(l<x)p[w]=s[l];else{l-=x;for(var y=0;y<x;++y)l>=s[y]&&(l+=1);p[w]=l}}return g}(n(x,!0),b)}};var n=e("incremental-convex-hull"),t=e("affine-hull")},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(e,c,d){"use strict";c.exports=function t(i,a,r,g,s,b){var x=s-1,S=s*s,p=x*x,w=(1+2*s)*p,l=s*p,y=S*(3-2*s),A=S*x;if(i.length){b||(b=new Array(i.length));for(var T=i.length-1;T>=0;--T)b[T]=w*i[T]+l*a[T]+y*r[T]+A*g[T];return b}return w*i+l*a+y*r+A*g},c.exports.derivative=function n(i,a,r,g,s,b){var x=6*s*s-6*s,S=3*s*s-4*s+1,p=-6*s*s+6*s,w=3*s*s-2*s;if(i.length){b||(b=new Array(i.length));for(var l=i.length-1;l>=0;--l)b[l]=x*i[l]+S*a[l]+p*r[l]+w*g[l];return b}return x*i+S*a+p*r[l]+w*g}},{}],63:[function(e,c,d){"use strict";var n=e("incremental-convex-hull"),t=e("uniq");function i(s,b){this.point=s,this.index=b}function a(s,b){for(var x=s.point,S=b.point,p=x.length,w=0;w<p;++w){var l=S[w]-x[w];if(l)return l}return 0}c.exports=function g(s,b){var x=s.length;if(0===x)return[];var S=s[0].length;if(S<1)return[];if(1===S)return function r(s,b,x){if(1===s)return x?[[-1,0]]:[];var S=b.map(function(A,T){return[A[0],T]});S.sort(function(A,T){return A[0]-T[0]});for(var p=new Array(s-1),w=1;w<s;++w)p[w-1]=[S[w-1][1],S[w][1]];return x&&p.push([-1,p[0][1]],[p[s-1][1],-1]),p}(x,s,b);for(var p=new Array(x),w=1,l=0;l<x;++l){for(var y=s[l],A=new Array(S+1),T=0,M=0;M<S;++M){var f=y[M];A[M]=f,T+=f*f}A[S]=T,p[l]=new i(A,l),w=Math.max(T,w)}t(p,a),x=p.length;var u=new Array(x+S+1),h=new Array(x+S+1),o=(S+1)*(S+1)*w,C=new Array(S+1);for(l=0;l<=S;++l)C[l]=0;for(C[S]=o,u[0]=C.slice(),h[0]=-1,l=0;l<=S;++l)(A=C.slice())[l]=1,u[l+1]=A,h[l+1]=-1;for(l=0;l<x;++l)u[l+S+1]=(R=p[l]).point,h[l+S+1]=R.index;var z=n(u,!1);if(z=z.filter(b?function(O){for(var I=0,F=0;F<=S;++F){var D=h[O[F]];if(D<0&&++I>=2)return!1;O[F]=D}return!0}:function(O){for(var I=0;I<=S;++I){var F=h[O[I]];if(F<0)return!1;O[I]=F}return!0}),1&S)for(l=0;l<z.length;++l){var R;A=(R=z[l])[0],R[0]=R[1],R[1]=A}return z}},{"incremental-convex-hull":233,uniq:310}],64:[function(e,c,d){(function(n){(function(){var t=!1;if("undefined"!=typeof Float64Array){var i=new Float64Array(1),a=new Uint32Array(i.buffer);if(i[0]=1,t=!0,1072693248===a[1]){let A=function(f,u){return a[0]=f,a[1]=u,i[0]},T=function(f){return i[0]=f,a[0]},M=function(f){return i[0]=f,a[1]};c.exports=function(u){return i[0]=u,[a[0],a[1]]},c.exports.pack=A,c.exports.lo=T,c.exports.hi=M}else if(1072693248===a[0]){let A=function(f,u){return a[1]=f,a[0]=u,i[0]},T=function(f){return i[0]=f,a[1]},M=function(f){return i[0]=f,a[0]};c.exports=function(u){return i[0]=u,[a[1],a[0]]},c.exports.pack=A,c.exports.lo=T,c.exports.hi=M}else t=!1}if(!t){let A=function(f,u){return r.writeUInt32LE(f,0,!0),r.writeUInt32LE(u,4,!0),r.readDoubleLE(0,!0)},T=function(f){return r.writeDoubleLE(f,0,!0),r.readUInt32LE(0,!0)},M=function(f){return r.writeDoubleLE(f,0,!0),r.readUInt32LE(4,!0)};var r=new n(8);c.exports=function(u){return r.writeDoubleLE(u,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},c.exports.pack=A,c.exports.lo=T,c.exports.hi=M}c.exports.sign=function(A){return c.exports.hi(A)>>>31},c.exports.exponent=function(A){return(c.exports.hi(A)<<1>>>21)-1023},c.exports.fraction=function(A){var T=c.exports.lo(A),M=c.exports.hi(A),f=1048575&M;return 2146435072&M&&(f+=1<<20),[T,f]},c.exports.denormalized=function(A){return!(2146435072&c.exports.hi(A))}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:3}],65:[function(e,c,d){"use strict";function n(a,r,g){var s=0|a[g];if(s<=0)return[];var x,b=new Array(s);if(g===a.length-1)for(x=0;x<s;++x)b[x]=r;else for(x=0;x<s;++x)b[x]=n(a,r,g+1);return b}c.exports=function i(a,r){switch(void 0===r&&(r=0),typeof a){case"number":if(a>0)return function t(a,r){var g,s;for(g=new Array(a),s=0;s<a;++s)g[s]=r;return g}(0|a,r);break;case"object":if("number"==typeof a.length)return n(a,r,0)}return[]}},{}],66:[function(e,c,d){"use strict";c.exports=function t(i,a){var r=i.length;if("number"!=typeof a){a=0;for(var g=0;g<r;++g){var s=i[g];a=Math.max(a,s[0],s[1])}a=1+(0|a)}a|=0;var b=new Array(a);for(g=0;g<a;++g)b[g]=[];for(g=0;g<r;++g)b[(s=i[g])[0]].push(s[1]),b[s[1]].push(s[0]);for(var x=0;x<a;++x)n(b[x],function(S,p){return S-p});return b};var n=e("uniq")},{uniq:310}],67:[function(e,c,d){"use strict";c.exports=function n(t,i,a){var r=i||0,g=a||1;return[[t[12]+t[0],t[13]+t[1],t[14]+t[2],t[15]+t[3]],[t[12]-t[0],t[13]-t[1],t[14]-t[2],t[15]-t[3]],[t[12]+t[4],t[13]+t[5],t[14]+t[6],t[15]+t[7]],[t[12]-t[4],t[13]-t[5],t[14]-t[6],t[15]-t[7]],[r*t[12]+t[8],r*t[13]+t[9],r*t[14]+t[10],r*t[15]+t[11]],[g*t[12]-t[8],g*t[13]-t[9],g*t[14]-t[10],g*t[15]-t[11]]]}},{}],68:[function(e,c,d){"use strict";c.exports=function s(b,x,S){switch(arguments.length){case 0:return new a([0],[0],0);case 1:return"number"==typeof b?new a(p=g(b),p,0):new a(b,g(b.length),0);case 2:var p;if("number"==typeof x)return new a(b,p=g(b.length),+x);S=0;case 3:if(b.length!==x.length)throw new Error("state and velocity lengths must match");return new a(b,x,S)}};var n=e("cubic-hermite"),t=e("binary-search-bounds");function i(b,x,S){return Math.min(x,Math.max(b,S))}function a(b,x,S){this.dimension=b.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var p=0;p<this.dimension;++p)this.bounds[0][p]=-1/0,this.bounds[1][p]=1/0;this._state=b.slice().reverse(),this._velocity=x.slice().reverse(),this._time=[S],this._scratch=[b.slice(),b.slice(),b.slice(),b.slice(),b.slice()]}var r=a.prototype;function g(b){for(var x=new Array(b),S=0;S<b;++S)x[S]=0;return x}r.flush=function(b){var x=t.gt(this._time,b)-1;x<=0||(this._time.splice(0,x),this._state.splice(0,x*this.dimension),this._velocity.splice(0,x*this.dimension))},r.curve=function(b){var x=this._time,S=x.length,p=t.le(x,b),w=this._scratch[0],l=this._state,y=this._velocity,A=this.dimension,T=this.bounds;if(p<0)for(var M=A-1,f=0;f<A;++f,--M)w[f]=l[M];else if(p>=S-1){M=l.length-1;var u=b-x[S-1];for(f=0;f<A;++f,--M)w[f]=l[M]+u*y[M]}else{M=A*(p+1)-1;var h=x[p],C=x[p+1]-h||1,R=this._scratch[1],z=this._scratch[2],O=this._scratch[3],I=this._scratch[4],F=!0;for(f=0;f<A;++f,--M)R[f]=l[M],O[f]=y[M]*C,z[f]=l[M+A],I[f]=y[M+A]*C,F=F&&R[f]===z[f]&&O[f]===I[f]&&0===O[f];if(F)for(f=0;f<A;++f)w[f]=R[f];else n(R,O,z,I,(b-h)/C,w)}var D=T[0],N=T[1];for(f=0;f<A;++f)w[f]=i(D[f],N[f],w[f]);return w},r.dcurve=function(b){var x=this._time,S=x.length,p=t.le(x,b),w=this._scratch[0],l=this._state,y=this._velocity,A=this.dimension;if(p>=S-1)for(var T=l.length-1,f=0;f<A;++f,--T)w[f]=y[T];else{T=A*(p+1)-1;var u=x[p],o=x[p+1]-u||1,C=this._scratch[1],R=this._scratch[2],z=this._scratch[3],O=this._scratch[4],I=!0;for(f=0;f<A;++f,--T)C[f]=l[T],z[f]=y[T]*o,R[f]=l[T+A],O[f]=y[T+A]*o,I=I&&C[f]===R[f]&&z[f]===O[f]&&0===z[f];if(I)for(f=0;f<A;++f)w[f]=0;else for(n.derivative(C,z,R,O,(b-u)/o,w),f=0;f<A;++f)w[f]/=o}return w},r.lastT=function(){var b=this._time;return b[b.length-1]},r.stable=function(){for(var b=this._velocity,x=b.length,S=this.dimension-1;S>=0;--S)if(b[--x])return!1;return!0},r.jump=function(b){var x=this.lastT(),S=this.dimension;if(!(b<x||arguments.length!==S+1)){var p=this._state,w=this._velocity,l=p.length-this.dimension,y=this.bounds,A=y[0],T=y[1];this._time.push(x,b);for(var M=0;M<2;++M)for(var f=0;f<S;++f)p.push(p[l++]),w.push(0);for(this._time.push(b),f=S;f>0;--f)p.push(i(A[f-1],T[f-1],arguments[f])),w.push(0)}},r.push=function(b){var x=this.lastT(),S=this.dimension;if(!(b<x||arguments.length!==S+1)){var p=this._state,w=this._velocity,l=p.length-this.dimension,y=b-x,A=this.bounds,T=A[0],M=A[1],f=y>1e-6?1/y:0;this._time.push(b);for(var u=S;u>0;--u){var h=i(T[u-1],M[u-1],arguments[u]);p.push(h),w.push((h-p[l++])*f)}}},r.set=function(b){var x=this.dimension;if(!(b<this.lastT()||arguments.length!==x+1)){var S=this._state,p=this._velocity,w=this.bounds,l=w[0],y=w[1];this._time.push(b);for(var A=x;A>0;--A)S.push(i(l[A-1],y[A-1],arguments[A])),p.push(0)}},r.move=function(b){var x=this.lastT(),S=this.dimension;if(!(b<=x||arguments.length!==S+1)){var p=this._state,w=this._velocity,l=p.length-this.dimension,y=this.bounds,A=y[0],T=y[1],M=b-x,f=M>1e-6?1/M:0;this._time.push(b);for(var u=S;u>0;--u){var h=arguments[u];p.push(i(A[u-1],T[u-1],p[l++]+h)),w.push(h*f)}}},r.idle=function(b){var x=this.lastT();if(!(b<x)){var S=this.dimension,p=this._state,w=this._velocity,l=p.length-S,y=this.bounds,A=y[0],T=y[1],M=b-x;this._time.push(b);for(var f=S-1;f>=0;--f)p.push(i(A[f],T[f],p[l]+M*w[l])),w.push(0),l+=1}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(e,c,d){"use strict";c.exports=function M(f){return new s(f||T,null)};function i(f,u,h,o,C,R){this._color=f,this.key=u,this.value=h,this.left=o,this.right=C,this._count=R}function a(f){return new i(f._color,f.key,f.value,f.left,f.right,f._count)}function r(f,u){return new i(f,u.key,u.value,u.left,u.right,u._count)}function g(f){f._count=1+(f.left?f.left._count:0)+(f.right?f.right._count:0)}function s(f,u){this._compare=f,this.root=u}var b=s.prototype;function x(f,u){var h;return u.left&&(h=x(f,u.left))?h:(h=f(u.key,u.value))||(u.right?x(f,u.right):void 0)}function S(f,u,h,o){if(u(f,o.key)<=0){var R;if(o.left&&(R=S(f,u,h,o.left)))return R;if(R=h(o.key,o.value))return R}if(o.right)return S(f,u,h,o.right)}function p(f,u,h,o,C){var O,R=h(f,C.key),z=h(u,C.key);return R<=0&&(C.left&&(O=p(f,u,h,o,C.left))||z>0&&(O=o(C.key,C.value)))?O:z>0&&C.right?p(f,u,h,o,C.right):void 0}function w(f,u){this.tree=f,this._stack=u}Object.defineProperty(b,"keys",{get:function(){var f=[];return this.forEach(function(u,h){f.push(u)}),f}}),Object.defineProperty(b,"values",{get:function(){var f=[];return this.forEach(function(u,h){f.push(h)}),f}}),Object.defineProperty(b,"length",{get:function(){return this.root?this.root._count:0}}),b.insert=function(f,u){for(var h=this._compare,o=this.root,C=[],R=[];o;){var z=h(f,o.key);C.push(o),R.push(z),o=z<=0?o.left:o.right}C.push(new i(0,f,u,null,null,1));for(var O=C.length-2;O>=0;--O)o=C[O],C[O]=R[O]<=0?new i(o._color,o.key,o.value,C[O+1],o.right,o._count+1):new i(o._color,o.key,o.value,o.left,C[O+1],o._count+1);for(O=C.length-1;O>1;--O){var I=C[O-1];if(o=C[O],1===I._color||1===o._color)break;var F=C[O-2];if(F.left===I)if(I.left===o){if(!(D=F.right)||0!==D._color){F._color=0,F.left=I.right,I._color=1,I.right=F,C[O-2]=I,C[O-1]=o,g(F),g(I),O>=3&&((N=C[O-3]).left===F?N.left=I:N.right=I);break}I._color=1,F.right=r(1,D),F._color=0,O-=1}else{if(!(D=F.right)||0!==D._color){I.right=o.left,F._color=0,F.left=o.right,o._color=1,o.left=I,o.right=F,C[O-2]=o,C[O-1]=I,g(F),g(I),g(o),O>=3&&((N=C[O-3]).left===F?N.left=o:N.right=o);break}I._color=1,F.right=r(1,D),F._color=0,O-=1}else if(I.right===o){if(!(D=F.left)||0!==D._color){F._color=0,F.right=I.left,I._color=1,I.left=F,C[O-2]=I,C[O-1]=o,g(F),g(I),O>=3&&((N=C[O-3]).right===F?N.right=I:N.left=I);break}I._color=1,F.left=r(1,D),F._color=0,O-=1}else{var D;if(!(D=F.left)||0!==D._color){var N;I.left=o.right,F._color=0,F.right=o.left,o._color=1,o.right=I,o.left=F,C[O-2]=o,C[O-1]=I,g(F),g(I),g(o),O>=3&&((N=C[O-3]).right===F?N.right=o:N.left=o);break}I._color=1,F.left=r(1,D),F._color=0,O-=1}}return C[0]._color=1,new s(h,C[0])},b.forEach=function(u,h,o){if(this.root)switch(arguments.length){case 1:return x(u,this.root);case 2:return S(h,this._compare,u,this.root);case 3:return this._compare(h,o)>=0?void 0:p(h,o,this._compare,u,this.root)}},Object.defineProperty(b,"begin",{get:function(){for(var f=[],u=this.root;u;)f.push(u),u=u.left;return new w(this,f)}}),Object.defineProperty(b,"end",{get:function(){for(var f=[],u=this.root;u;)f.push(u),u=u.right;return new w(this,f)}}),b.at=function(f){if(f<0)return new w(this,[]);for(var u=this.root,h=[];;){if(h.push(u),u.left){if(f<u.left._count){u=u.left;continue}f-=u.left._count}if(!f)return new w(this,h);if(f-=1,!u.right)break;if(f>=u.right._count)break;u=u.right}return new w(this,[])},b.ge=function(f){for(var u=this._compare,h=this.root,o=[],C=0;h;){var R=u(f,h.key);o.push(h),R<=0&&(C=o.length),h=R<=0?h.left:h.right}return o.length=C,new w(this,o)},b.gt=function(f){for(var u=this._compare,h=this.root,o=[],C=0;h;){var R=u(f,h.key);o.push(h),R<0&&(C=o.length),h=R<0?h.left:h.right}return o.length=C,new w(this,o)},b.lt=function(f){for(var u=this._compare,h=this.root,o=[],C=0;h;){var R=u(f,h.key);o.push(h),R>0&&(C=o.length),h=R<=0?h.left:h.right}return o.length=C,new w(this,o)},b.le=function(f){for(var u=this._compare,h=this.root,o=[],C=0;h;){var R=u(f,h.key);o.push(h),R>=0&&(C=o.length),h=R<0?h.left:h.right}return o.length=C,new w(this,o)},b.find=function(f){for(var u=this._compare,h=this.root,o=[];h;){var C=u(f,h.key);if(o.push(h),0===C)return new w(this,o);h=C<=0?h.left:h.right}return new w(this,[])},b.remove=function(f){var u=this.find(f);return u?u.remove():this},b.get=function(f){for(var u=this._compare,h=this.root;h;){var o=u(f,h.key);if(0===o)return h.value;h=o<=0?h.left:h.right}};var l=w.prototype;function y(f,u){f.key=u.key,f.value=u.value,f.left=u.left,f.right=u.right,f._color=u._color,f._count=u._count}function T(f,u){return f<u?-1:f>u?1:0}Object.defineProperty(l,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(l,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),l.clone=function(){return new w(this.tree,this._stack.slice())},l.remove=function(){var f=this._stack;if(0===f.length)return this.tree;var u=new Array(f.length);u[u.length-1]=new i((h=f[f.length-1])._color,h.key,h.value,h.left,h.right,h._count);for(var o=f.length-2;o>=0;--o){var h;u[o]=(h=f[o]).left===f[o+1]?new i(h._color,h.key,h.value,u[o+1],h.right,h._count):new i(h._color,h.key,h.value,h.left,u[o+1],h._count)}if((h=u[u.length-1]).left&&h.right){var C=u.length;for(h=h.left;h.right;)u.push(h),h=h.right;var R=u[C-1];for(u.push(new i(h._color,R.key,R.value,h.left,h.right,h._count)),u[C-1].key=h.key,u[C-1].value=h.value,o=u.length-2;o>=C;--o)u[o]=new i((h=u[o])._color,h.key,h.value,h.left,u[o+1],h._count);u[C-1].left=u[C]}if(0===(h=u[u.length-1])._color){var z=u[u.length-2];for(z.left===h?z.left=null:z.right===h&&(z.right=null),u.pop(),o=0;o<u.length;++o)u[o]._count--;return new s(this.tree._compare,u[0])}if(h.left||h.right){for(h.left?y(h,h.left):h.right&&y(h,h.right),h._color=1,o=0;o<u.length-1;++o)u[o]._count--;return new s(this.tree._compare,u[0])}if(1===u.length)return new s(this.tree._compare,null);for(o=0;o<u.length;++o)u[o]._count--;var O=u[u.length-2];return function A(f){for(var u,h,o,C,R=f.length-1;R>=0;--R){if(u=f[R],0===R)return void(u._color=1);if((h=f[R-1]).left===u){if((o=h.right).right&&0===o.right._color)return C=(o=h.right=a(o)).right=a(o.right),h.right=o.left,o.left=h,o.right=C,o._color=h._color,u._color=1,h._color=1,C._color=1,g(h),g(o),R>1&&((z=f[R-2]).left===h?z.left=o:z.right=o),void(f[R-1]=o);if(o.left&&0===o.left._color)return C=(o=h.right=a(o)).left=a(o.left),h.right=C.left,o.left=C.right,C.left=h,C.right=o,C._color=h._color,h._color=1,o._color=1,u._color=1,g(h),g(o),g(C),R>1&&((z=f[R-2]).left===h?z.left=C:z.right=C),void(f[R-1]=C);if(1===o._color){if(0===h._color)return h._color=1,void(h.right=r(0,o));h.right=r(0,o);continue}o=a(o),h.right=o.left,o.left=h,o._color=h._color,h._color=0,g(h),g(o),R>1&&((z=f[R-2]).left===h?z.left=o:z.right=o),f[R-1]=o,f[R]=h,R+1<f.length?f[R+1]=u:f.push(u),R+=2}else{if((o=h.left).left&&0===o.left._color)return C=(o=h.left=a(o)).left=a(o.left),h.left=o.right,o.right=h,o.left=C,o._color=h._color,u._color=1,h._color=1,C._color=1,g(h),g(o),R>1&&((z=f[R-2]).right===h?z.right=o:z.left=o),void(f[R-1]=o);if(o.right&&0===o.right._color)return C=(o=h.left=a(o)).right=a(o.right),h.left=C.right,o.right=C.left,C.right=h,C.left=o,C._color=h._color,h._color=1,o._color=1,u._color=1,g(h),g(o),g(C),R>1&&((z=f[R-2]).right===h?z.right=C:z.left=C),void(f[R-1]=C);if(1===o._color){if(0===h._color)return h._color=1,void(h.left=r(0,o));h.left=r(0,o);continue}var z;o=a(o),h.left=o.right,o.right=h,o._color=h._color,h._color=0,g(h),g(o),R>1&&((z=f[R-2]).right===h?z.right=o:z.left=o),f[R-1]=o,f[R]=h,R+1<f.length?f[R+1]=u:f.push(u),R+=2}}}(u),O.left===h?O.left=null:O.right=null,new s(this.tree._compare,u[0])},Object.defineProperty(l,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(l,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(l,"index",{get:function(){var f=0,u=this._stack;if(0===u.length){var h=this.tree.root;return h?h._count:0}u[u.length-1].left&&(f=u[u.length-1].left._count);for(var o=u.length-2;o>=0;--o)u[o+1]===u[o].right&&(++f,u[o].left&&(f+=u[o].left._count));return f},enumerable:!0}),l.next=function(){var f=this._stack;if(0!==f.length){var u=f[f.length-1];if(u.right)for(u=u.right;u;)f.push(u),u=u.left;else for(f.pop();f.length>0&&f[f.length-1].right===u;)u=f[f.length-1],f.pop()}},Object.defineProperty(l,"hasNext",{get:function(){var f=this._stack;if(0===f.length)return!1;if(f[f.length-1].right)return!0;for(var u=f.length-1;u>0;--u)if(f[u-1].left===f[u])return!0;return!1}}),l.update=function(f){var u=this._stack;if(0===u.length)throw new Error("Can't update empty node!");var h=new Array(u.length),o=u[u.length-1];h[h.length-1]=new i(o._color,o.key,f,o.left,o.right,o._count);for(var C=u.length-2;C>=0;--C)h[C]=(o=u[C]).left===u[C+1]?new i(o._color,o.key,o.value,h[C+1],o.right,o._count):new i(o._color,o.key,o.value,o.left,h[C+1],o._count);return new s(this.tree._compare,h[0])},l.prev=function(){var f=this._stack;if(0!==f.length){var u=f[f.length-1];if(u.left)for(u=u.left;u;)f.push(u),u=u.right;else for(f.pop();f.length>0&&f[f.length-1].left===u;)u=f[f.length-1],f.pop()}},Object.defineProperty(l,"hasPrev",{get:function(){var f=this._stack;if(0===f.length)return!1;if(f[f.length-1].left)return!0;for(var u=f.length-1;u>0;--u)if(f[u-1].right===f[u])return!0;return!1}})},{}],70:[function(e,c,d){"use strict";c.exports=function u(h,o){var C=new b(h);return C.update(o),C};var n=e("./lib/text.js"),t=e("./lib/lines.js"),i=e("./lib/background.js"),a=e("./lib/cube.js"),r=e("./lib/ticks.js"),g=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function s(h,o){return h[0]=o[0],h[1]=o[1],h[2]=o[2],h}function b(h){this.gl=h,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=i(h)}var x=b.prototype;function S(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}x.update=function(h){function o(se,ne,W){if(W in h){var V,G=h[W],$=this[W];this[W]=V=(se?Array.isArray(G)&&Array.isArray(G[0]):Array.isArray(G))?[ne(G[0]),ne(G[1]),ne(G[2])]:[ne(G),ne(G),ne(G)];for(var H=0;H<3;++H)if(V[H]!==$[H])return!0}return!1}h=h||{};var I,C=o.bind(this,!1,Number),R=o.bind(this,!1,Boolean),z=o.bind(this,!1,String),O=o.bind(this,!0,function(se){if(Array.isArray(se)){if(3===se.length)return[+se[0],+se[1],+se[2],1];if(4===se.length)return[+se[0],+se[1],+se[2],+se[3]]}return[0,0,0,1]}),F=!1,D=!1;if("bounds"in h)for(var N=h.bounds,U=0;U<2;++U)for(var X=0;X<3;++X)N[U][X]!==this.bounds[U][X]&&(D=!0),this.bounds[U][X]=N[U][X];if("ticks"in h)for(I=h.ticks,F=!0,this.autoTicks=!1,U=0;U<3;++U)this.tickSpacing[U]=0;else C("tickSpacing")&&(this.autoTicks=!0,D=!0);if(this._firstInit&&("ticks"in h||"tickSpacing"in h||(this.autoTicks=!0),D=!0,F=!0,this._firstInit=!1),D&&this.autoTicks&&(I=r.create(this.bounds,this.tickSpacing),F=!0),F){for(U=0;U<3;++U)I[U].sort(function(ne,W){return ne.x-W.x});r.equal(I,this.ticks)?F=!1:this.ticks=I}R("tickEnable"),z("tickFont")&&(F=!0),C("tickSize"),C("tickAngle"),C("tickPad"),O("tickColor");var oe=z("labels");z("labelFont")&&(oe=!0),R("labelEnable"),C("labelSize"),C("labelPad"),O("labelColor"),R("lineEnable"),R("lineMirror"),C("lineWidth"),O("lineColor"),R("lineTickEnable"),R("lineTickMirror"),C("lineTickLength"),C("lineTickWidth"),O("lineTickColor"),R("gridEnable"),C("gridWidth"),O("gridColor"),R("zeroEnable"),O("zeroLineColor"),C("zeroLineWidth"),R("backgroundEnable"),O("backgroundColor"),this._text?this._text&&(oe||F)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=n(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&F&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=t(this.gl,this.bounds,this.ticks))};var p=[new S,new S,new S];function w(h,o,C,R,z){for(var O=h.primalOffset,I=h.primalMinor,F=h.mirrorOffset,D=h.mirrorMinor,N=R[o],U=0;U<3;++U)if(o!==U){var X=O,oe=F,se=I,ne=D;N&1<<U&&(X=F,oe=O,se=D,ne=I),X[U]=C[0][U],oe[U]=C[1][U],z[U]>0?(se[U]=-1,ne[U]=0):(se[U]=0,ne[U]=1)}}var l=[0,0,0],y={model:g,view:g,projection:g,_ortho:!1};x.isOpaque=function(){return!0},x.isTransparent=function(){return!1},x.drawTransparent=function(h){};var T=[0,0,0],M=[0,0,0],f=[0,0,0];x.draw=function(h){for(var $=this.gl,o=(h=h||y).model||g,C=h.view||g,R=h.projection||g,z=this.bounds,O=h._ortho||!1,I=a(o,C,R,z,O),F=I.cubeEdges,D=I.axis,ne=(O?2:1)*this.pixelRatio*(R[3]*C[12]+R[7]*C[13]+R[11]*C[14]+R[15]*C[15])/$.drawingBufferHeight,W=0;W<3;++W)this.lastCubeProps.cubeEdges[W]=F[W],this.lastCubeProps.axis[W]=D[W];var G=p;for(W=0;W<3;++W)w(p[W],W,this.bounds,F,D);$=this.gl;var V=l;for(W=0;W<3;++W)V[W]=this.backgroundEnable[W]?D[W]:0;for(this._background.draw(o,C,R,z,V,this.backgroundColor),this._lines.bind(o,C,R,this),W=0;W<3;++W){var H=[0,0,0];H[W]=D[W]>0?z[1][W]:z[0][W];for(var q=0;q<2;++q){var Y=(W+1+(1^q))%3;this.gridEnable[K=(W+1+q)%3]&&this._lines.drawGrid(K,Y,this.bounds,H,this.gridColor[K],this.gridWidth[K]*this.pixelRatio)}for(q=0;q<2;++q){var K=(W+1+q)%3;this.zeroEnable[Y=(W+1+(1^q))%3]&&Math.min(z[0][Y],z[1][Y])<=0&&Math.max(z[0][Y],z[1][Y])>=0&&this._lines.drawZero(K,Y,this.bounds,H,this.zeroLineColor[Y],this.zeroLineWidth[Y]*this.pixelRatio)}}for(W=0;W<3;++W){this.lineEnable[W]&&this._lines.drawAxisLine(W,this.bounds,G[W].primalOffset,this.lineColor[W],this.lineWidth[W]*this.pixelRatio),this.lineMirror[W]&&this._lines.drawAxisLine(W,this.bounds,G[W].mirrorOffset,this.lineColor[W],this.lineWidth[W]*this.pixelRatio);var te=s(T,G[W].primalMinor),J=s(M,G[W].mirrorMinor),j=this.lineTickLength;for(q=0;q<3;++q){var re=ne/o[5*q];te[q]*=j[q]*re,J[q]*=j[q]*re}this.lineTickEnable[W]&&this._lines.drawAxisTicks(W,G[W].primalOffset,te,this.lineTickColor[W],this.lineTickWidth[W]*this.pixelRatio),this.lineTickMirror[W]&&this._lines.drawAxisTicks(W,G[W].mirrorOffset,J,this.lineTickColor[W],this.lineTickWidth[W]*this.pixelRatio)}this._lines.unbind(),this._text.bind(o,C,R,this.pixelRatio);var le,pe,xe,ye,Ce,Fe,Ke,Ue,Be,Ie,nt,gt;function ke(ye){(xe=[0,0,0])[ye]=1}for(W=0;W<3;++W){var de=G[W].primalMinor,be=G[W].mirrorMinor,Le=s(f,G[W].primalOffset);for(q=0;q<3;++q)this.lineTickEnable[W]&&(Le[q]+=ne*de[q]*Math.max(this.lineTickLength[q],0)/o[5*q]);var De=[0,0,0];if(De[W]=1,this.tickEnable[W]){for(-3600===this.tickAngle[W]?(this.tickAngle[W]=0,this.tickAlign[W]="auto"):this.tickAlign[W]=-1,(le=[this.tickAlign[W],.5,pe=1])[0]="auto"===le[0]?0:parseInt(""+le[0]),xe=[0,0,0],Ke=void 0,Ue=void 0,Be=void 0,Ie=void 0,nt=void 0,gt=void 0,Ie=(Ce=de)[Ue=((ye=W)+2)%3],nt=(Fe=be)[Ke=(ye+1)%3],gt=Fe[Ue],(Be=Ce[Ke])>0&&gt>0||Be>0&&gt<0||Be<0&&gt>0||Be<0&&gt<0?ke(Ke):(Ie>0&&nt>0||Ie>0&&nt<0||Ie<0&&nt>0||Ie<0&&nt<0)&&ke(Ue),q=0;q<3;++q)Le[q]+=ne*de[q]*this.tickPad[q]/o[5*q];this._text.drawTicks(W,this.tickSize[W],this.tickAngle[W],Le,this.tickColor[W],De,xe,le)}if(this.labelEnable[W]){for(pe=0,xe=[0,0,0],this.labels[W].length>4&&(ke(W),pe=1),(le=[this.labelAlign[W],.5,pe])[0]="auto"===le[0]?0:parseInt(""+le[0]),q=0;q<3;++q)Le[q]+=ne*de[q]*this.labelPad[q]/o[5*q];Le[W]+=.5*(z[0][W]+z[1][W]),this._text.drawLabel(W,this.labelSize[W],this.labelAngle[W],Le,this.labelColor[W],[0,0,0],xe,le)}}this._text.unbind()},x.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(e,c,d){"use strict";c.exports=function g(s){for(var b=[],x=[],S=0,p=0;p<3;++p)for(var w=(p+1)%3,l=(p+2)%3,y=[0,0,0],A=[0,0,0],T=-1;T<=1;T+=2){x.push(S,S+2,S+1,S+1,S+2,S+3),y[p]=T,A[p]=T;for(var M=-1;M<=1;M+=2){y[w]=M;for(var f=-1;f<=1;f+=2)y[l]=f,b.push(y[0],y[1],y[2],A[0],A[1],A[2]),S+=1}var u=w;w=l,l=u}var h=n(s,new Float32Array(b)),o=n(s,new Uint16Array(x),s.ELEMENT_ARRAY_BUFFER),C=t(s,[{buffer:h,type:s.FLOAT,size:3,offset:0,stride:24},{buffer:h,type:s.FLOAT,size:3,offset:12,stride:24}],o),R=i(s);return R.attributes.position.location=0,R.attributes.normal.location=1,new a(s,h,C,R)};var n=e("gl-buffer"),t=e("gl-vao"),i=e("./shaders").bg;function a(s,b,x,S){this.gl=s,this.buffer=b,this.vao=x,this.shader=S}var r=a.prototype;r.draw=function(s,b,x,S,p,w){for(var l=!1,y=0;y<3;++y)l=l||p[y];if(l){var A=this.gl;A.enable(A.POLYGON_OFFSET_FILL),A.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:s,view:b,projection:x,bounds:S,enable:p,colors:w},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),A.disable(A.POLYGON_OFFSET_FILL)}},r.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(e,c,d){"use strict";c.exports=function T(M,f,u,h,o){t(r,f,M),t(r,u,r);for(var C=0,R=0;R<2;++R){b[2]=h[R][2];for(var z=0;z<2;++z){b[1]=h[z][1];for(var O=0;O<2;++O)b[0]=h[O][0],S(g[C],b,r),C+=1}}var I=-1;for(R=0;R<8;++R){for(var F=g[R][3],D=0;D<3;++D)s[R][D]=g[R][D]/F;o&&(s[R][2]*=-1),F<0&&(I<0||s[R][2]<s[I][2])&&(I=R)}if(I<0){I=0;for(var N=0;N<3;++N){for(var U=(N+2)%3,X=(N+1)%3,oe=-1,se=-1,ne=0;ne<2;++ne)a(s[W=ne<<N],s[W+(ne<<U)+(1-ne<<X)],s[W+(1-ne<<U)+(ne<<X)],x)<0||(ne?oe=1:se=1);if(oe<0||se<0)se>oe&&(I|=1<<N);else{for(ne=0;ne<2;++ne){var W,V=w([g[W=ne<<N],g[W+(ne<<U)+(1-ne<<X)],g[W+(1-ne<<U)+(ne<<X)],g[W+(1<<U)+(1<<X)]]);ne?oe=V:se=V}se>oe&&(I|=1<<N)}}}var H=7^I,q=-1;for(R=0;R<8;++R)R===I||R===H||(q<0||s[q][1]>s[R][1])&&(q=R);var K=-1;for(R=0;R<3;++R)(Y=q^1<<R)!==I&&Y!==H&&(K<0&&(K=Y),(X=s[Y])[0]<s[K][0]&&(K=Y));var te=-1;for(R=0;R<3;++R){var Y;(Y=q^1<<R)!==I&&Y!==H&&Y!==K&&(te<0&&(te=Y),(X=s[Y])[0]>s[te][0]&&(te=Y))}var J=l;J[0]=J[1]=J[2]=0,J[n.log2(K^q)]=q&K,J[n.log2(q^te)]=q&te;var j=7^te;j===I||j===H?J[n.log2(te^(j=7^K))]=j&te:J[n.log2(K^j)]=j&K;var re=y,le=I;for(N=0;N<3;++N)re[N]=le&1<<N?-1:1;return A};var n=e("bit-twiddle"),t=e("gl-mat4/multiply"),i=e("split-polygon"),a=e("robust-orientation"),r=new Array(16),g=new Array(8),s=new Array(8),b=new Array(3),x=[0,0,0];function S(M,f,u){for(var h=0;h<4;++h){M[h]=u[12+h];for(var o=0;o<3;++o)M[h]+=f[o]*u[4*o+h]}}!function(){for(var M=0;M<8;++M)g[M]=[1,1,1,1],s[M]=[1,1,1]}();var p=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function w(M){for(var f=0;f<p.length;++f)if((M=i.positive(M,p[f])).length<3)return 0;var u=M[0],h=u[0]/u[3],o=u[1]/u[3],C=0;for(f=1;f+1<M.length;++f){var R=M[f],z=M[f+1];C+=Math.abs((R[0]/R[3]-h)*(z[1]/z[3]-o)-(R[1]/R[3]-o)*(z[0]/z[3]-h))}return C}var l=[1,1,1],y=[0,0,0],A={cubeEdges:l,axis:y}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(e,c,d){"use strict";c.exports=function l(y,A,T){var M=[],f=[0,0,0],u=[0,0,0],h=[0,0,0],o=[0,0,0];M.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var C=0;C<3;++C){for(var O=M.length/3|0,R=0;R<T[C].length;++R)M.push(z=+T[C][R].x,0,1,z,1,1,z,0,-1,z,0,-1,z,1,1,z,1,-1);var F=M.length/3|0;f[C]=O,u[C]=F-O,O=M.length/3|0;for(var I=0;I<T[C].length;++I){var z;M.push(z=+T[C][I].x,0,1,z,1,1,z,0,-1,z,0,-1,z,1,1,z,1,-1)}F=M.length/3|0,h[C]=O,o[C]=F-O}var D=n(y,new Float32Array(M)),N=t(y,[{buffer:D,type:y.FLOAT,size:3,stride:0,offset:0}]),U=i(y);return U.attributes.position.location=0,new p(y,D,N,U,u,f,o,h)};var n=e("gl-buffer"),t=e("gl-vao"),i=e("./shaders").line,a=[0,0,0],r=[0,0,0],g=[0,0,0],s=[0,0,0],b=[1,1];function x(y){return y[0]=y[1]=y[2]=0,y}function S(y,A){return y[0]=A[0],y[1]=A[1],y[2]=A[2],y}function p(y,A,T,M,f,u,h,o){this.gl=y,this.vertBuffer=A,this.vao=T,this.shader=M,this.tickCount=f,this.tickOffset=u,this.gridCount=h,this.gridOffset=o}var w=p.prototype;w.bind=function(y,A,T){this.shader.bind(),this.shader.uniforms.model=y,this.shader.uniforms.view=A,this.shader.uniforms.projection=T,b[0]=this.gl.drawingBufferWidth,b[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=b,this.vao.bind()},w.unbind=function(){this.vao.unbind()},w.drawAxisLine=function(y,A,T,M,f){var u=x(r);this.shader.uniforms.majorAxis=r,u[y]=A[1][y]-A[0][y],this.shader.uniforms.minorAxis=u;var o,h=S(s,T);h[y]+=A[0][y],this.shader.uniforms.offset=h,this.shader.uniforms.lineWidth=f,this.shader.uniforms.color=M,(o=x(g))[(y+2)%3]=1,this.shader.uniforms.screenAxis=o,this.vao.draw(this.gl.TRIANGLES,6),(o=x(g))[(y+1)%3]=1,this.shader.uniforms.screenAxis=o,this.vao.draw(this.gl.TRIANGLES,6)},w.drawAxisTicks=function(y,A,T,M,f){if(this.tickCount[y]){var u=x(a);u[y]=1,this.shader.uniforms.majorAxis=u,this.shader.uniforms.offset=A,this.shader.uniforms.minorAxis=T,this.shader.uniforms.color=M,this.shader.uniforms.lineWidth=f;var h=x(g);h[y]=1,this.shader.uniforms.screenAxis=h,this.vao.draw(this.gl.TRIANGLES,this.tickCount[y],this.tickOffset[y])}},w.drawGrid=function(y,A,T,M,f,u){if(this.gridCount[y]){var h=x(r);h[A]=T[1][A]-T[0][A],this.shader.uniforms.minorAxis=h;var o=S(s,M);o[A]+=T[0][A],this.shader.uniforms.offset=o;var C=x(a);C[y]=1,this.shader.uniforms.majorAxis=C;var R=x(g);R[y]=1,this.shader.uniforms.screenAxis=R,this.shader.uniforms.lineWidth=u,this.shader.uniforms.color=f,this.vao.draw(this.gl.TRIANGLES,this.gridCount[y],this.gridOffset[y])}},w.drawZero=function(y,A,T,M,f,u){var h=x(r);this.shader.uniforms.majorAxis=h,h[y]=T[1][y]-T[0][y],this.shader.uniforms.minorAxis=h;var o=S(s,M);o[y]+=T[0][y],this.shader.uniforms.offset=o;var C=x(g);C[A]=1,this.shader.uniforms.screenAxis=C,this.shader.uniforms.lineWidth=u,this.shader.uniforms.color=f,this.vao.draw(this.gl.TRIANGLES,6)},w.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(e,c,d){"use strict";var n=e("glslify"),t=e("gl-shader"),i=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),a=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);d.line=function(x){return t(x,i,a,null,[{name:"position",type:"vec3"}])};var r=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),g=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);d.text=function(x){return t(x,r,g,null,[{name:"position",type:"vec3"}])};var s=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),b=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);d.bg=function(x){return t(x,s,b,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(e,c,d){(function(n){(function(){"use strict";c.exports=function l(y,A,T,M,f,u){var h=t(y),o=i(y,[{buffer:h,size:3}]),C=r(y);C.attributes.position.location=0;var R=new x(y,C,h,o);return R.update(A,T,M,f,u),R};var t=e("gl-buffer"),i=e("gl-vao"),a=e("vectorize-text"),r=e("./shaders").text,g=window||n.global||{},s=g.__TEXT_CACHE||{};g.__TEXT_CACHE={};function x(y,A,T,M){this.gl=y,this.shader=A,this.buffer=T,this.vao=M,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var S=x.prototype,p=[0,0];S.bind=function(y,A,T,M){this.vao.bind(),this.shader.bind();var f=this.shader.uniforms;f.model=y,f.view=A,f.projection=T,f.pixelScale=M,p[0]=this.gl.drawingBufferWidth,p[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=p},S.unbind=function(){this.vao.unbind()},S.update=function(y,A,T,M,f){var u=[];function h(N,U,X,oe,se,ne){var W=s[X];W||(W=s[X]={});var G=W[U];G||(G=W[U]=function w(y,A){try{return a(y,A)}catch(T){return console.warn('error vectorizing text:"'+y+'" error:',T),{cells:[],positions:[]}}}(U,{triangles:!0,font:X,textAlign:"center",textBaseline:"middle",lineSpacing:se,styletags:ne}));for(var $=(oe||12)/12,V=G.positions,H=G.cells,q=0,K=H.length;q<K;++q)for(var Y=H[q],te=2;te>=0;--te){var J=V[Y[te]];u.push($*J[0],-$*J[1],N)}}for(var o=[0,0,0],C=[0,0,0],R=[0,0,0],z=[0,0,0],I={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},F=0;F<3;++F){R[F]=u.length/3|0,h(.5*(y[0][F]+y[1][F]),A[F],T[F],12,1.25,I),z[F]=(u.length/3|0)-R[F],o[F]=u.length/3|0;for(var D=0;D<M[F].length;++D)!M[F][D].text||h(M[F][D].x,M[F][D].text,M[F][D].font||f,M[F][D].fontSize||12,1.25,I);C[F]=(u.length/3|0)-o[F]}this.buffer.update(u),this.tickOffset=o,this.tickCount=C,this.labelOffset=R,this.labelCount=z},S.drawTicks=function(y,A,T,M,f,u,h,o){!this.tickCount[y]||(this.shader.uniforms.axis=u,this.shader.uniforms.color=f,this.shader.uniforms.angle=T,this.shader.uniforms.scale=A,this.shader.uniforms.offset=M,this.shader.uniforms.alignDir=h,this.shader.uniforms.alignOpt=o,this.vao.draw(this.gl.TRIANGLES,this.tickCount[y],this.tickOffset[y]))},S.drawLabel=function(y,A,T,M,f,u,h,o){!this.labelCount[y]||(this.shader.uniforms.axis=u,this.shader.uniforms.color=f,this.shader.uniforms.angle=T,this.shader.uniforms.scale=A,this.shader.uniforms.offset=M,this.shader.uniforms.alignDir=h,this.shader.uniforms.alignOpt=o,this.vao.draw(this.gl.TRIANGLES,this.labelCount[y],this.labelOffset[y]))},S.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this)}).call(this,e("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(e,c,d){"use strict";function n(a,r){var g=a+"",s=g.indexOf("."),b=0;s>=0&&(b=g.length-s-1);var x=Math.pow(10,b),S=Math.round(a*r*x),p=S+"";if(p.indexOf("e")>=0)return p;var w=S/x,l=S%x;S<0?(w=0|-Math.ceil(w),l=0|-l):(w=0|Math.floor(w),l|=0);var y=""+w;if(S<0&&(y="-"+y),b){for(var A=""+l;A.length<b;)A="0"+A;return y+"."+A}return y}d.create=function t(a,r){for(var g=[],s=0;s<3;++s){for(var b=[],S=0;S*r[s]<=a[1][s];++S)b.push({x:S*r[s],text:n(r[s],S)});for(S=-1;S*r[s]>=a[0][s];--S)b.push({x:S*r[s],text:n(r[s],S)});g.push(b)}return g},d.equal=function i(a,r){for(var g=0;g<3;++g){if(a[g].length!==r[g].length)return!1;for(var s=0;s<a[g].length;++s){var b=a[g][s],x=r[g][s];if(b.x!==x.x||b.text!==x.text||b.font!==x.font||b.fontColor!==x.fontColor||b.fontSize!==x.fontSize||b.dx!==x.dx||b.dy!==x.dy)return!1}}return!0}},{}],77:[function(e,c,d){"use strict";c.exports=function A(T,M,f,u,I){var o=M.model||s,C=M.view||s,R=M.projection||s,z=M._ortho||!1,O=T.bounds,F=(I=I||i(o,C,R,O,z)).axis;a(b,C,o),a(b,R,b);for(var D=l,N=0;N<3;++N)D[N].lo=1/0,D[N].hi=-1/0,D[N].pixelsPerDataUnit=1/0;var U=n(r(b,b));r(b,b);for(var X=0;X<3;++X){var oe=(X+1)%3,se=(X+2)%3,ne=y;e:for(N=0;N<2;++N){var W=[];if(F[X]<0!=!!N){ne[X]=O[N][X];for(var G=0;G<2;++G){ne[oe]=O[G^N][oe];for(var $=0;$<2;++$)ne[se]=O[$^G^N][se],W.push(ne.slice())}var V=z?5:4;for(G=V;G===V;++G){if(0===W.length)continue e;W=t.positive(W,U[G])}for(G=0;G<W.length;++G){var H=w(y,b,se=W[G],f,u);for($=0;$<3;++$)D[$].lo=Math.min(D[$].lo,se[$]),D[$].hi=Math.max(D[$].hi,se[$]),$!==X&&(D[$].pixelsPerDataUnit=Math.min(D[$].pixelsPerDataUnit,Math.abs(H[$])))}}}}return D};var n=e("extract-frustum-planes"),t=e("split-polygon"),i=e("./lib/cube.js"),a=e("gl-mat4/multiply"),r=e("gl-mat4/transpose"),g=e("gl-vec4/transformMat4"),s=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),b=new Float32Array(16);function x(T,M,f){this.lo=T,this.hi=M,this.pixelsPerDataUnit=f}var S=[0,0,0,1],p=[0,0,0,1];function w(T,M,f,u,h){for(var o=0;o<3;++o){for(var C=S,R=p,z=0;z<3;++z)R[z]=C[z]=f[z];R[3]=C[3]=1,R[o]+=1,g(R,R,M),R[3]<0&&(T[o]=1/0),C[o]-=1,g(C,C,M),C[3]<0&&(T[o]=1/0);var O=(C[0]/C[3]-R[0]/R[3])*u,I=(C[1]/C[3]-R[1]/R[3])*h;T[o]=.25*Math.sqrt(O*O+I*I)}return T}var l=[new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0)],y=[0,0,0]},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(e,c,d){"use strict";var n=e("typedarray-pool"),t=e("ndarray-ops"),i=e("ndarray"),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function r(p,w,l,y,A){this.gl=p,this.type=w,this.handle=l,this.length=y,this.usage=A}var g=r.prototype;function s(p,w,l,y,A,T){var M=A.length*A.BYTES_PER_ELEMENT;if(T<0)return p.bufferData(w,A,y),M;if(M+T>l)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return p.bufferSubData(w,T,A),l}g.bind=function(){this.gl.bindBuffer(this.type,this.handle)},g.unbind=function(){this.gl.bindBuffer(this.type,null)},g.dispose=function(){this.gl.deleteBuffer(this.handle)},g.update=function(p,w){if("number"!=typeof w&&(w=-1),this.bind(),"object"==typeof p&&void 0!==p.shape){var l=p.dtype;if(a.indexOf(l)<0&&(l="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(l=gl.getExtension("OES_element_index_uint")&&"uint16"!==l?"uint32":"uint16"),l===p.dtype&&function x(p,w){for(var l=1,y=w.length-1;y>=0;--y){if(w[y]!==l)return!1;l*=p[y]}return!0}(p.shape,p.stride))this.length=s(this.gl,this.type,this.length,this.usage,0===p.offset&&p.data.length===p.shape[0]?p.data:p.data.subarray(p.offset,p.shape[0]),w);else{var A=n.malloc(p.size,l),T=i(A,p.shape);t.assign(T,p),this.length=s(this.gl,this.type,this.length,this.usage,w<0?A:A.subarray(0,p.size),w),n.free(A)}}else if(Array.isArray(p)){var M;M=function b(p,w){for(var l=n.malloc(p.length,w),y=p.length,A=0;A<y;++A)l[A]=p[A];return l}(p,this.type===this.gl.ELEMENT_ARRAY_BUFFER?"uint16":"float32"),this.length=s(this.gl,this.type,this.length,this.usage,w<0?M:M.subarray(0,p.length),w),n.free(M)}else if("object"==typeof p&&"number"==typeof p.length)this.length=s(this.gl,this.type,this.length,this.usage,p,w);else{if("number"!=typeof p&&void 0!==p)throw new Error("gl-buffer: Invalid data type");if(w>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(p|=0)<=0&&(p=1),this.gl.bufferData(this.type,0|p,this.usage),this.length=p}},c.exports=function S(p,w,l,y){if(y=y||p.DYNAMIC_DRAW,(l=l||p.ARRAY_BUFFER)!==p.ARRAY_BUFFER&&l!==p.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(y!==p.DYNAMIC_DRAW&&y!==p.STATIC_DRAW&&y!==p.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var A=p.createBuffer(),T=new r(p,l,A,0,y);return T.update(w),T}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(e,c,d){"use strict";var n=e("gl-vec3");c.exports=function(i,a){var r=i.positions,g=i.vectors,s={positions:[],vertexIntensity:[],vertexIntensityBounds:i.vertexIntensityBounds,vectors:[],cells:[],coneOffset:i.coneOffset,colormap:i.colormap};if(0===i.positions.length)return a&&(a[0]=[0,0,0],a[1]=[0,0,0]),s;for(var b=0,x=1/0,S=-1/0,p=1/0,w=-1/0,l=1/0,y=-1/0,A=null,T=null,M=[],f=1/0,u=!1,h=0;h<r.length;h++){var o=r[h];x=Math.min(o[0],x),S=Math.max(o[0],S),p=Math.min(o[1],p),w=Math.max(o[1],w),l=Math.min(o[2],l),y=Math.max(o[2],y);var C=g[h];if(n.length(C)>b&&(b=n.length(C)),h){var R=2*n.distance(A,o)/(n.length(T)+n.length(C));R?(f=Math.min(f,R),u=!1):u=!0}u||(A=o,T=C),M.push(C)}var O=[S,w,y];a&&(a[0]=[x,p,l],a[1]=O),0===b&&(b=1);var I=1/b;isFinite(f)||(f=1),s.vectorScale=f;var F=i.coneSize||.5;i.absoluteConeSize&&(F=i.absoluteConeSize*I),s.coneScale=F,h=0;for(var D=0;h<r.length;h++)for(var N=(o=r[h])[0],U=o[1],X=o[2],oe=M[h],se=n.length(oe)*I,ne=0;ne<8;ne++){s.positions.push([N,U,X,D++]),s.positions.push([N,U,X,D++]),s.positions.push([N,U,X,D++]),s.positions.push([N,U,X,D++]),s.positions.push([N,U,X,D++]),s.positions.push([N,U,X,D++]),s.vectors.push(oe),s.vectors.push(oe),s.vectors.push(oe),s.vectors.push(oe),s.vectors.push(oe),s.vectors.push(oe),s.vertexIntensity.push(se,se,se),s.vertexIntensity.push(se,se,se);var G=s.positions.length;s.cells.push([G-6,G-5,G-4],[G-3,G-2,G-1])}return s};var t=e("./lib/shaders");c.exports.createMesh=e("./create_mesh"),c.exports.createConeMesh=function(i,a){return c.exports.createMesh(i,a,{shaders:t,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(e,c,d){"use strict";var n=e("gl-shader"),t=e("gl-buffer"),i=e("gl-vao"),a=e("gl-texture2d"),r=e("gl-mat4/multiply"),g=e("gl-mat4/invert"),s=e("ndarray"),b=e("colormap"),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function S(M,f,u,h,o,C,R,z,O,I,F){this.gl=M,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=f,this.dirty=!0,this.triShader=u,this.pickShader=h,this.trianglePositions=o,this.triangleVectors=C,this.triangleColors=z,this.triangleUVs=O,this.triangleIds=R,this.triangleVAO=I,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=F,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=x,this._view=x,this._projection=x,this._resolution=[1,1]}var p=S.prototype;function y(M,f){var u=n(M,f.meshShader.vertex,f.meshShader.fragment,null,f.meshShader.attributes);return u.attributes.position.location=0,u.attributes.color.location=2,u.attributes.uv.location=3,u.attributes.vector.location=4,u}function A(M,f){var u=n(M,f.pickShader.vertex,f.pickShader.fragment,null,f.pickShader.attributes);return u.attributes.position.location=0,u.attributes.id.location=1,u.attributes.vector.location=4,u}p.isOpaque=function(){return this.opacity>=1},p.isTransparent=function(){return this.opacity<1},p.pickSlots=1,p.setPickBase=function(M){this.pickId=M},p.update=function(M){M=M||{};var f=this.gl;this.dirty=!0,"lightPosition"in M&&(this.lightPosition=M.lightPosition),"opacity"in M&&(this.opacity=M.opacity),"ambient"in M&&(this.ambientLight=M.ambient),"diffuse"in M&&(this.diffuseLight=M.diffuse),"specular"in M&&(this.specularLight=M.specular),"roughness"in M&&(this.roughness=M.roughness),"fresnel"in M&&(this.fresnel=M.fresnel),void 0!==M.tubeScale&&(this.tubeScale=M.tubeScale),void 0!==M.vectorScale&&(this.vectorScale=M.vectorScale),void 0!==M.coneScale&&(this.coneScale=M.coneScale),void 0!==M.coneOffset&&(this.coneOffset=M.coneOffset),M.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=f.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=f.LINEAR,this.texture.setPixels(function w(M){for(var f=b({colormap:M,nshades:256,format:"rgba"}),u=new Uint8Array(1024),h=0;h<256;++h){for(var o=f[h],C=0;C<3;++C)u[4*h+C]=o[C];u[4*h+3]=255*o[3]}return s(u,[256,256,4],[4,0,1])}(M.colormap)),this.texture.generateMipmap());var u=M.cells,h=M.positions,o=M.vectors;if(h&&u&&o){var C=[],R=[],z=[],O=[],I=[];this.cells=u,this.positions=h,this.vectors=o;var F=M.meshColor||[1,1,1,1],D=M.vertexIntensity,N=1/0,U=-1/0;if(D)if(M.vertexIntensityBounds)N=+M.vertexIntensityBounds[0],U=+M.vertexIntensityBounds[1];else for(var X=0;X<D.length;++X){var oe=D[X];N=Math.min(N,oe),U=Math.max(U,oe)}else for(X=0;X<h.length;++X)oe=h[X][2],N=Math.min(N,oe),U=Math.max(U,oe);for(this.intensity=D||function l(M){for(var f=M.length,u=new Array(f),h=0;h<f;++h)u[h]=M[h][2];return u}(h),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],X=0;X<h.length;++X)for(var se=h[X],ne=0;ne<3;++ne)isNaN(se[ne])||!isFinite(se[ne])||(this.bounds[0][ne]=Math.min(this.bounds[0][ne],se[ne]),this.bounds[1][ne]=Math.max(this.bounds[1][ne],se[ne]));var W=0;e:for(X=0;X<u.length;++X){var G=u[X];if(3===G.length){for(ne=0;ne<3;++ne){se=h[$=G[ne]];for(var V=0;V<3;++V)if(isNaN(se[V])||!isFinite(se[V]))continue e}for(ne=0;ne<3;++ne){var $;C.push((se=h[$=G[2-ne]])[0],se[1],se[2],se[3]);var H=o[$];R.push(H[0],H[1],H[2],H[3]||0);var K;z.push(F[0],F[1],F[2],3===F.length?1:F[3]),O.push((K=D?[(D[$]-N)/(U-N),0]:[(se[2]-N)/(U-N),0])[0],K[1]),I.push(X)}W+=1}}this.triangleCount=W,this.trianglePositions.update(C),this.triangleVectors.update(R),this.triangleColors.update(z),this.triangleUVs.update(O),this.triangleIds.update(new Uint32Array(I))}},p.drawTransparent=p.draw=function(M){for(var f=this.gl,u=(M=M||{}).model||x,h=M.view||x,o=M.projection||x,C=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],R=0;R<3;++R)C[0][R]=Math.max(C[0][R],this.clipBounds[0][R]),C[1][R]=Math.min(C[1][R],this.clipBounds[1][R]);var z={model:u,view:h,projection:o,inverseModel:x.slice(),clipBounds:C,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};z.inverseModel=g(z.inverseModel,z.model),f.disable(f.CULL_FACE),this.texture.bind(0);var O=new Array(16);for(r(O,z.view,z.model),r(O,z.projection,O),g(O,O),R=0;R<3;++R)z.eyePosition[R]=O[12+R]/O[15];var I=O[15];for(R=0;R<3;++R)I+=this.lightPosition[R]*O[4*R+3];for(R=0;R<3;++R){for(var F=O[12+R],D=0;D<3;++D)F+=O[4*D+R]*this.lightPosition[D];z.lightPosition[R]=F/I}if(this.triangleCount>0){var N=this.triShader;N.bind(),N.uniforms=z,this.triangleVAO.bind(),f.drawArrays(f.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},p.drawPick=function(M){for(var f=this.gl,u=(M=M||{}).model||x,h=M.view||x,o=M.projection||x,C=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],R=0;R<3;++R)C[0][R]=Math.max(C[0][R],this.clipBounds[0][R]),C[1][R]=Math.min(C[1][R],this.clipBounds[1][R]);this._model=[].slice.call(u),this._view=[].slice.call(h),this._projection=[].slice.call(o),this._resolution=[f.drawingBufferWidth,f.drawingBufferHeight];var z={model:u,view:h,projection:o,clipBounds:C,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},O=this.pickShader;O.bind(),O.uniforms=z,this.triangleCount>0&&(this.triangleVAO.bind(),f.drawArrays(f.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},p.pick=function(M){if(!M||M.id!==this.pickId)return null;var f=M.value[0]+256*M.value[1]+65536*M.value[2],u=this.cells[f],h=this.positions[u[1]].slice(0,3),o={position:h,dataCoordinate:h,index:Math.floor(u[1]/48)};return"cone"===this.traceType?o.index=Math.floor(u[1]/48):"streamtube"===this.traceType&&(o.intensity=this.intensity[u[1]],o.velocity=this.vectors[u[1]].slice(0,3),o.divergence=this.vectors[u[1]][3],o.index=f),o},p.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},c.exports=function T(M,f,u){var h=u.shaders;1===arguments.length&&(M=(f=M).gl);var o=y(M,h),C=A(M,h),R=a(M,s(new Uint8Array([255,255,255,255]),[1,1,4]));R.generateMipmap(),R.minFilter=M.LINEAR_MIPMAP_LINEAR,R.magFilter=M.LINEAR;var z=t(M),O=t(M),I=t(M),F=t(M),D=t(M),U=new S(M,R,o,C,z,O,D,I,F,i(M,[{buffer:z,type:M.FLOAT,size:4},{buffer:D,type:M.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:I,type:M.FLOAT,size:4},{buffer:F,type:M.FLOAT,size:2},{buffer:O,type:M.FLOAT,size:4}]),u.traceType||"cone");return U.update(f),U}},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(e,c,d){var n=e("glslify"),t=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),i=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),r=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);d.meshShader={vertex:t,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},d.pickShader={vertex:a,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(e,c,d){c.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(e,c,d){var n=e("./1.0/numbers");c.exports=function(i){return n[i]}},{"./1.0/numbers":82}],84:[function(e,c,d){"use strict";c.exports=function S(p){var w=p.gl,l=n(w),y=t(w,[{buffer:l,type:w.FLOAT,size:3,offset:0,stride:40},{buffer:l,type:w.FLOAT,size:4,offset:12,stride:40},{buffer:l,type:w.FLOAT,size:3,offset:28,stride:40}]),A=i(w);A.attributes.position.location=0,A.attributes.color.location=1,A.attributes.offset.location=2;var T=new r(w,l,y,A);return T.update(p),T};var n=e("gl-buffer"),t=e("gl-vao"),i=e("./shaders/index"),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(p,w,l,y){this.gl=p,this.shader=y,this.buffer=w,this.vao=l,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var g=r.prototype;function s(p,w){for(var l=0;l<3;++l)p[0][l]=Math.min(p[0][l],w[l]),p[1][l]=Math.max(p[1][l],w[l])}g.isOpaque=function(){return!this.hasAlpha},g.isTransparent=function(){return this.hasAlpha},g.drawTransparent=g.draw=function(p){var w=this.gl,l=this.shader.uniforms;this.shader.bind();var y=l.view=p.view||a,A=l.projection=p.projection||a;l.model=p.model||a,l.clipBounds=this.clipBounds,l.opacity=this.opacity;var C=(p._ortho?2:1)*this.pixelRatio*(A[3]*y[12]+A[7]*y[13]+A[11]*y[14]+A[15]*y[15])/w.drawingBufferHeight;this.vao.bind();for(var R=0;R<3;++R)w.lineWidth(this.lineWidth[R]*this.pixelRatio),l.capSize=this.capSize[R]*C,this.lineCount[R]&&w.drawArrays(w.LINES,this.lineOffset[R],this.lineCount[R]);this.vao.unbind()};var b=function(){for(var p=new Array(3),w=0;w<3;++w){for(var l=[],y=1;y<=2;++y)for(var A=-1;A<=1;A+=2){var M=[0,0,0];M[(y+w)%3]=A,l.push(M)}p[w]=l}return p}();function x(p,w,l,y){for(var A=b[y],T=0;T<A.length;++T){var M=A[T];p.push(w[0],w[1],w[2],l[0],l[1],l[2],l[3],M[0],M[1],M[2])}return A.length}g.update=function(p){"lineWidth"in(p=p||{})&&(this.lineWidth=p.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in p&&(this.capSize=p.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in p&&(this.opacity=+p.opacity,this.opacity<1&&(this.hasAlpha=!0));var w=p.color||[[0,0,0],[0,0,0],[0,0,0]],l=p.position,y=p.error;if(Array.isArray(w[0])||(w=[w,w,w]),l&&y){var A=[],T=l.length,M=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var f=0;f<3;++f){this.lineOffset[f]=M;e:for(var u=0;u<T;++u){for(var h=l[u],o=0;o<3;++o)if(isNaN(h[o])||!isFinite(h[o]))continue e;var z,C=y[u],R=w[f];Array.isArray(R[0])&&(R=w[u]),3===R.length?R=[R[0],R[1],R[2],1]:4===R.length&&(R=[R[0],R[1],R[2],R[3]],!this.hasAlpha&&R[3]<1&&(this.hasAlpha=!0)),isNaN(C[0][f])||isNaN(C[1][f])||(C[0][f]<0&&((z=h.slice())[f]+=C[0][f],A.push(h[0],h[1],h[2],R[0],R[1],R[2],R[3],0,0,0,z[0],z[1],z[2],R[0],R[1],R[2],R[3],0,0,0),s(this.bounds,z),M+=2+x(A,z,R,f)),C[1][f]>0&&((z=h.slice())[f]+=C[1][f],A.push(h[0],h[1],h[2],R[0],R[1],R[2],R[3],0,0,0,z[0],z[1],z[2],R[0],R[1],R[2],R[3],0,0,0),s(this.bounds,z),M+=2+x(A,z,R,f)))}this.lineCount[f]=M-this.lineOffset[f]}this.buffer.update(A)}},g.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(e,c,d){"use strict";var n=e("glslify"),t=e("gl-shader"),i=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),a=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);c.exports=function(r){return t(r,i,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(e,c,d){"use strict";var n=e("gl-texture2d");c.exports=function M(f,u,h,o){i||(i=f.FRAMEBUFFER_UNSUPPORTED,a=f.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,r=f.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,g=f.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var C=f.getExtension("WEBGL_draw_buffers");if(!t&&C&&function x(f,u){var h=f.getParameter(u.MAX_COLOR_ATTACHMENTS_WEBGL);t=new Array(h+1);for(var o=0;o<=h;++o){for(var C=new Array(h),R=0;R<o;++R)C[R]=f.COLOR_ATTACHMENT0+R;for(R=o;R<h;++R)C[R]=f.NONE;t[o]=C}}(f,C),Array.isArray(u)&&(o=h,h=0|u[1],u=0|u[0]),"number"!=typeof u)throw new Error("gl-fbo: Missing shape parameter");var R=f.getParameter(f.MAX_RENDERBUFFER_SIZE);if(u<0||u>R||h<0||h>R)throw new Error("gl-fbo: Parameters are too large for FBO");var z=1;if("color"in(o=o||{})){if((z=Math.max(0|o.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(z>1){if(!C)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(z>f.getParameter(C.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+z+" draw buffers")}}var O=f.UNSIGNED_BYTE,I=f.getExtension("OES_texture_float");if(o.float&&z>0){if(!I)throw new Error("gl-fbo: Context does not support floating point textures");O=f.FLOAT}else o.preferFloat&&z>0&&I&&(O=f.FLOAT);var F=!0;"depth"in o&&(F=!!o.depth);var D=!1;return"stencil"in o&&(D=!!o.stencil),new y(f,u,h,O,z,F,D,C)};var i,a,r,g,t=null;function s(f){return[f.getParameter(f.FRAMEBUFFER_BINDING),f.getParameter(f.RENDERBUFFER_BINDING),f.getParameter(f.TEXTURE_BINDING_2D)]}function b(f,u){f.bindFramebuffer(f.FRAMEBUFFER,u[0]),f.bindRenderbuffer(f.RENDERBUFFER,u[1]),f.bindTexture(f.TEXTURE_2D,u[2])}function S(f){switch(f){case i:throw new Error("gl-fbo: Framebuffer unsupported");case a:throw new Error("gl-fbo: Framebuffer incomplete attachment");case r:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case g:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function p(f,u,h,o,C,R){if(!o)return null;var z=n(f,u,h,C,o);return z.magFilter=f.NEAREST,z.minFilter=f.NEAREST,z.mipSamples=1,z.bind(),f.framebufferTexture2D(f.FRAMEBUFFER,R,f.TEXTURE_2D,z.handle,0),z}function w(f,u,h,o,C){var R=f.createRenderbuffer();return f.bindRenderbuffer(f.RENDERBUFFER,R),f.renderbufferStorage(f.RENDERBUFFER,o,u,h),f.framebufferRenderbuffer(f.FRAMEBUFFER,C,f.RENDERBUFFER,R),R}function y(f,u,h,o,C,R,z,O){this.gl=f,this._shape=[0|u,0|h],this._destroyed=!1,this._ext=O,this.color=new Array(C);for(var I=0;I<C;++I)this.color[I]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=o,this._useDepth=R,this._useStencil=z;var F=this,D=[0|u,0|h];Object.defineProperties(D,{0:{get:function(){return F._shape[0]},set:function(N){return F.width=N}},1:{get:function(){return F._shape[1]},set:function(N){return F.height=N}}}),this._shapeVector=D,function l(f){var u=s(f.gl),h=f.gl,o=f.handle=h.createFramebuffer(),C=f._shape[0],R=f._shape[1],z=f.color.length,O=f._ext,I=f._useStencil,F=f._useDepth,D=f._colorType;h.bindFramebuffer(h.FRAMEBUFFER,o);for(var N=0;N<z;++N)f.color[N]=p(h,C,R,D,h.RGBA,h.COLOR_ATTACHMENT0+N);0===z?(f._color_rb=w(h,C,R,h.RGBA4,h.COLOR_ATTACHMENT0),O&&O.drawBuffersWEBGL(t[0])):z>1&&O.drawBuffersWEBGL(t[z]);var U=h.getExtension("WEBGL_depth_texture");U?I?f.depth=p(h,C,R,U.UNSIGNED_INT_24_8_WEBGL,h.DEPTH_STENCIL,h.DEPTH_STENCIL_ATTACHMENT):F&&(f.depth=p(h,C,R,h.UNSIGNED_SHORT,h.DEPTH_COMPONENT,h.DEPTH_ATTACHMENT)):F&&I?f._depth_rb=w(h,C,R,h.DEPTH_STENCIL,h.DEPTH_STENCIL_ATTACHMENT):F?f._depth_rb=w(h,C,R,h.DEPTH_COMPONENT16,h.DEPTH_ATTACHMENT):I&&(f._depth_rb=w(h,C,R,h.STENCIL_INDEX,h.STENCIL_ATTACHMENT));var X=h.checkFramebufferStatus(h.FRAMEBUFFER);if(X!==h.FRAMEBUFFER_COMPLETE){for(f._destroyed=!0,h.bindFramebuffer(h.FRAMEBUFFER,null),h.deleteFramebuffer(f.handle),f.handle=null,f.depth&&(f.depth.dispose(),f.depth=null),f._depth_rb&&(h.deleteRenderbuffer(f._depth_rb),f._depth_rb=null),N=0;N<f.color.length;++N)f.color[N].dispose(),f.color[N]=null;f._color_rb&&(h.deleteRenderbuffer(f._color_rb),f._color_rb=null),b(h,u),S(X)}b(h,u)}(this)}var A=y.prototype;function T(f,u,h){if(f._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(f._shape[0]!==u||f._shape[1]!==h){var o=f.gl,C=o.getParameter(o.MAX_RENDERBUFFER_SIZE);if(u<0||u>C||h<0||h>C)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");f._shape[0]=u,f._shape[1]=h;for(var R=s(o),z=0;z<f.color.length;++z)f.color[z].shape=f._shape;f._color_rb&&(o.bindRenderbuffer(o.RENDERBUFFER,f._color_rb),o.renderbufferStorage(o.RENDERBUFFER,o.RGBA4,f._shape[0],f._shape[1])),f.depth&&(f.depth.shape=f._shape),f._depth_rb&&(o.bindRenderbuffer(o.RENDERBUFFER,f._depth_rb),f._useDepth&&f._useStencil?o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,f._shape[0],f._shape[1]):f._useDepth?o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_COMPONENT16,f._shape[0],f._shape[1]):f._useStencil&&o.renderbufferStorage(o.RENDERBUFFER,o.STENCIL_INDEX,f._shape[0],f._shape[1])),o.bindFramebuffer(o.FRAMEBUFFER,f.handle);var O=o.checkFramebufferStatus(o.FRAMEBUFFER);O!==o.FRAMEBUFFER_COMPLETE&&(f.dispose(),b(o,R),S(O)),b(o,R)}}Object.defineProperties(A,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(f){if(Array.isArray(f)||(f=[0|f,0|f]),2!==f.length)throw new Error("gl-fbo: Shape vector must be length 2");var u=0|f[0],h=0|f[1];return T(this,u,h),[u,h]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(f){return T(this,f|=0,this._shape[1]),f},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(f){return T(this,this._shape[0],f|=0),f},enumerable:!1}}),A.bind=function(){if(!this._destroyed){var f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,this.handle),f.viewport(0,0,this._shape[0],this._shape[1])}},A.dispose=function(){if(!this._destroyed){this._destroyed=!0;var f=this.gl;f.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(f.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var u=0;u<this.color.length;++u)this.color[u].dispose(),this.color[u]=null;this._color_rb&&(f.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":146}],87:[function(e,c,d){var n=e("sprintf-js").sprintf,t=e("gl-constants/lookup"),i=e("glsl-shader-name"),a=e("add-line-numbers");c.exports=function r(g,s,b){"use strict";var x=i(s)||"of unknown name (see npm glsl-shader-name)",S="unknown type";void 0!==b&&(S=b===t.FRAGMENT_SHADER?"fragment":"vertex");for(var p=n("Error compiling %s shader %s:\n",S,x),w=n("%s%s",p,g),l=g.split("\n"),y={},A=0;A<l.length;A++){var T=l[A];if(""!==T&&"\0"!==T){var M=parseInt(T.split(":")[2]);if(isNaN(M))throw new Error(n("Could not parse error: %s",T));y[M]=T}}var f=a(s).split("\n");for(A=0;A<f.length;A++)if((y[A+3]||y[A+2]||y[A+1])&&(p+=f[A]+"\n",y[A+1])){var h=y[A+1];h=h.substr(h.split(":",3).join(":").length+1).trim(),p+=n("^^^ %s\n\n",h)}return{long:p.trim(),short:w.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(e,c,d){"use strict";c.exports=function S(p,w){var l=p.gl,h=new s(p,a(l,g.vertex,g.fragment),a(l,g.pickVertex,g.pickFragment),r(l),r(l),r(l),r(l));return h.update(w),p.addObject(h),h};var n=e("binary-search-bounds"),t=e("iota-array"),i=e("typedarray-pool"),a=e("gl-shader"),r=e("gl-buffer"),g=e("./lib/shaders");function s(p,w,l,y,A,T,M){this.plot=p,this.shader=w,this.pickShader=l,this.positionBuffer=y,this.weightBuffer=A,this.colorBuffer=T,this.idBuffer=M,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var p,b=s.prototype,x=[0,0,1,0,0,1,1,0,1,1,0,1];b.draw=(p=[1,0,0,0,1,0,0,0,1],function(){var w=this.plot,l=this.shader,y=this.bounds,A=this.numVertices;if(!(A<=0)){var T=w.gl,M=w.dataBox,u=y[3]-y[1],h=M[2]-M[0],o=M[3]-M[1];p[0]=2*(y[2]-y[0])/h,p[4]=2*u/o,p[6]=2*(y[0]-M[0])/h-1,p[7]=2*(y[1]-M[1])/o-1,l.bind();var C=l.uniforms;C.viewTransform=p,C.shape=this.shape;var R=l.attributes;this.positionBuffer.bind(),R.position.pointer(),this.weightBuffer.bind(),R.weight.pointer(T.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),R.color.pointer(T.UNSIGNED_BYTE,!0),T.drawArrays(T.TRIANGLES,0,A)}}),b.drawPick=function(){var p=[1,0,0,0,1,0,0,0,1],w=[0,0,0,0];return function(l){var y=this.plot,A=this.pickShader,T=this.bounds,M=this.numVertices;if(!(M<=0)){var f=y.gl,u=y.dataBox,o=T[3]-T[1],C=u[2]-u[0],R=u[3]-u[1];p[0]=2*(T[2]-T[0])/C,p[4]=2*o/R,p[6]=2*(T[0]-u[0])/C-1,p[7]=2*(T[1]-u[1])/R-1;for(var z=0;z<4;++z)w[z]=l>>8*z&255;this.pickOffset=l,A.bind();var O=A.uniforms;O.viewTransform=p,O.pickOffset=w,O.shape=this.shape;var I=A.attributes;return this.positionBuffer.bind(),I.position.pointer(),this.weightBuffer.bind(),I.weight.pointer(f.UNSIGNED_BYTE,!1),this.idBuffer.bind(),I.pickId.pointer(f.UNSIGNED_BYTE,!1),f.drawArrays(f.TRIANGLES,0,M),l+this.shape[0]*this.shape[1]}}}(),b.pick=function(p,w,l){var y=this.pickOffset;if(l<y||l>=y+this.shape[0]*this.shape[1])return null;var T=l-y;return{object:this,pointId:T,dataCoord:[this.xData[T%this.shape[0]],this.yData[T/this.shape[0]|0]]}},b.update=function(p){var w=(p=p||{}).shape||[0,0],l=p.x||t(w[0]),y=p.y||t(w[1]),A=p.z||new Float32Array(w[0]*w[1]),T=!1!==p.zsmooth;this.xData=l,this.yData=y;var o,C,R,z,M=p.colorLevels||[0],f=p.colorValues||[0,0,0,1],u=M.length,h=this.bounds;T?(o=h[0]=l[0],C=h[1]=y[0],R=h[2]=l[l.length-1],z=h[3]=y[y.length-1]):(o=h[0]=l[0]+(l[1]-l[0])/2,C=h[1]=y[0]+(y[1]-y[0])/2,R=h[2]=l[l.length-1]+(l[l.length-1]-l[l.length-2])/2,z=h[3]=y[y.length-1]+(y[y.length-1]-y[y.length-2])/2);var O=1/(R-o),I=1/(z-C),F=w[0],D=w[1];this.shape=[F,D];var N=(T?(F-1)*(D-1):F*D)*(x.length>>>1);this.numVertices=N;for(var U=i.mallocUint8(4*N),X=i.mallocFloat32(2*N),oe=i.mallocUint8(2*N),se=i.mallocUint32(N),ne=0,W=T?F-1:F,G=T?D-1:D,$=0;$<G;++$){var V,H;T?(V=I*(y[$]-C),H=I*(y[$+1]-C)):(V=$<D-1?I*(y[$]-(y[$+1]-y[$])/2-C):I*(y[$]-(y[$]-y[$-1])/2-C),H=$<D-1?I*(y[$]+(y[$+1]-y[$])/2-C):I*(y[$]+(y[$]-y[$-1])/2-C));for(var q=0;q<W;++q){var K,Y;T?(K=O*(l[q]-o),Y=O*(l[q+1]-o)):(K=q<F-1?O*(l[q]-(l[q+1]-l[q])/2-o):O*(l[q]-(l[q]-l[q-1])/2-o),Y=q<F-1?O*(l[q]+(l[q+1]-l[q])/2-o):O*(l[q]+(l[q]-l[q-1])/2-o));for(var te=0;te<x.length;te+=2){var pe,xe,ke,we,J=x[te],j=x[te+1],le=A[T?($+j)*F+(q+J):$*F+q],ge=n.le(M,le);if(ge<0)pe=f[0],xe=f[1],ke=f[2],we=f[3];else if(ge===u-1)pe=f[4*u-4],xe=f[4*u-3],ke=f[4*u-2],we=f[4*u-1];else{var de=(le-M[ge])/(M[ge+1]-M[ge]),be=1-de,Le=4*ge,De=4*(ge+1);pe=be*f[Le]+de*f[De],xe=be*f[Le+1]+de*f[De+1],ke=be*f[Le+2]+de*f[De+2],we=be*f[Le+3]+de*f[De+3]}U[4*ne]=255*pe,U[4*ne+1]=255*xe,U[4*ne+2]=255*ke,U[4*ne+3]=255*we,X[2*ne]=.5*K+.5*Y,X[2*ne+1]=.5*V+.5*H,oe[2*ne]=J,oe[2*ne+1]=j,se[ne]=$*F+q,ne+=1}}}this.positionBuffer.update(X),this.weightBuffer.update(oe),this.colorBuffer.update(U),this.idBuffer.update(se),i.free(X),i.free(U),i.free(oe),i.free(se)},b.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(e,c,d){"use strict";var n=e("glslify");c.exports={fragment:n(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:n(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:231}],90:[function(e,c,d){var n=e("glslify"),t=e("gl-shader"),i=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),a=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),r=n(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),g=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];d.createShader=function(s){return t(s,i,a,null,g)},d.createPickShader=function(s){return t(s,i,r,null,g)}},{"gl-shader":132,glslify:231}],91:[function(e,c,d){"use strict";c.exports=function f(u){var h=u.gl||u.scene&&u.scene.gl,o=S(h);o.attributes.position.location=0,o.attributes.nextPosition.location=1,o.attributes.arcLength.location=2,o.attributes.lineWidth.location=3,o.attributes.color.location=4;var C=p(h);C.attributes.position.location=0,C.attributes.nextPosition.location=1,C.attributes.arcLength.location=2,C.attributes.lineWidth.location=3,C.attributes.color.location=4;for(var R=n(h),z=t(h,[{buffer:R,size:3,offset:0,stride:48},{buffer:R,size:3,offset:12,stride:48},{buffer:R,size:1,offset:24,stride:48},{buffer:R,size:1,offset:28,stride:48},{buffer:R,size:4,offset:32,stride:48}]),O=b(new Array(1024),[256,1,4]),I=0;I<1024;++I)O.data[I]=255;var F=i(h,O);F.wrap=h.REPEAT;var D=new T(h,o,C,R,z,F);return D.update(u),D};var n=e("gl-buffer"),t=e("gl-vao"),i=e("gl-texture2d"),a=new Uint8Array(4),r=new Float32Array(a.buffer);var s=e("binary-search-bounds"),b=e("ndarray"),x=e("./lib/shaders"),S=x.createShader,p=x.createPickShader,w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(u,h){for(var o=0,C=0;C<3;++C){var R=u[C]-h[C];o+=R*R}return Math.sqrt(o)}function y(u){for(var h=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)h[0][o]=Math.max(u[0][o],h[0][o]),h[1][o]=Math.min(u[1][o],h[1][o]);return h}function A(u,h,o,C){this.arcLength=u,this.position=h,this.index=o,this.dataCoordinate=C}function T(u,h,o,C,R,z){this.gl=u,this.shader=h,this.pickShader=o,this.buffer=C,this.vao=R,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=z,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var M=T.prototype;M.isTransparent=function(){return this.hasAlpha},M.isOpaque=function(){return!this.hasAlpha},M.pickSlots=1,M.setPickBase=function(u){this.pickId=u},M.drawTransparent=M.draw=function(u){if(this.vertexCount){var h=this.gl,o=this.shader,C=this.vao;o.bind(),o.uniforms={model:u.model||w,view:u.view||w,projection:u.projection||w,clipBounds:y(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[h.drawingBufferWidth,h.drawingBufferHeight],pixelRatio:this.pixelRatio},C.bind(),C.draw(h.TRIANGLE_STRIP,this.vertexCount),C.unbind()}},M.drawPick=function(u){if(this.vertexCount){var h=this.gl,o=this.pickShader,C=this.vao;o.bind(),o.uniforms={model:u.model||w,view:u.view||w,projection:u.projection||w,pickId:this.pickId,clipBounds:y(this.clipBounds),screenShape:[h.drawingBufferWidth,h.drawingBufferHeight],pixelRatio:this.pixelRatio},C.bind(),C.draw(h.TRIANGLE_STRIP,this.vertexCount),C.unbind()}},M.update=function(u){var h,o;this.dirty=!0;var C=!!u.connectGaps;"dashScale"in u&&(this.dashScale=u.dashScale),this.hasAlpha=!1,"opacity"in u&&(this.opacity=+u.opacity,this.opacity<1&&(this.hasAlpha=!0));var R=[],z=[],O=[],I=0,F=0,D=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],N=u.position||u.positions;if(N){var U=u.color||u.colors||[0,0,0,1],X=u.lineWidth||1,oe=!1;e:for(h=1;h<N.length;++h){var G,$,V,se=N[h-1],ne=N[h];for(z.push(I),O.push(se.slice()),o=0;o<3;++o){if(isNaN(se[o])||isNaN(ne[o])||!isFinite(se[o])||!isFinite(ne[o])){if(!C&&R.length>0){for(var W=0;W<24;++W)R.push(R[R.length-12]);F+=2,oe=!0}continue e}D[0][o]=Math.min(D[0][o],se[o],ne[o]),D[1][o]=Math.max(D[1][o],se[o],ne[o])}Array.isArray(U[0])?(G=U.length>h-1?U[h-1]:U.length>0?U[U.length-1]:[0,0,0,1],$=U.length>h?U[h]:U.length>0?U[U.length-1]:[0,0,0,1]):G=$=U,3===G.length&&(G=[G[0],G[1],G[2],1]),3===$.length&&($=[$[0],$[1],$[2],1]),!this.hasAlpha&&G[3]<1&&(this.hasAlpha=!0),V=Array.isArray(X)?X.length>h-1?X[h-1]:X.length>0?X[X.length-1]:[0,0,0,1]:X;var H=I;if(I+=l(se,ne),oe){for(o=0;o<2;++o)R.push(se[0],se[1],se[2],ne[0],ne[1],ne[2],H,V,G[0],G[1],G[2],G[3]);F+=2,oe=!1}R.push(se[0],se[1],se[2],ne[0],ne[1],ne[2],H,V,G[0],G[1],G[2],G[3],se[0],se[1],se[2],ne[0],ne[1],ne[2],H,-V,G[0],G[1],G[2],G[3],ne[0],ne[1],ne[2],se[0],se[1],se[2],I,-V,$[0],$[1],$[2],$[3],ne[0],ne[1],ne[2],se[0],se[1],se[2],I,V,$[0],$[1],$[2],$[3]),F+=4}}if(this.buffer.update(R),z.push(I),O.push(N[N.length-1].slice()),this.bounds=D,this.vertexCount=F,this.points=O,this.arcLength=z,"dashes"in u){var K=u.dashes.slice();for(K.unshift(0),h=1;h<K.length;++h)K[h]=K[h-1]+K[h];var Y=b(new Array(1024),[256,1,4]);for(h=0;h<256;++h){for(o=0;o<4;++o)Y.set(h,0,o,0);1&s.le(K,K[K.length-1]*h/255)?Y.set(h,0,0,0):Y.set(h,0,0,255)}this.texture.setPixels(Y)}},M.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},M.pick=function(u){if(!u||u.id!==this.pickId)return null;var h=function g(u,h,o,C){return a[0]=C,a[1]=o,a[2]=h,a[3]=u,r[0]}(u.value[0],u.value[1],u.value[2],0),o=s.le(this.arcLength,h);if(o<0)return null;if(o===this.arcLength.length-1)return new A(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),o);for(var C=this.points[o],R=this.points[Math.min(o+1,this.points.length-1)],z=(h-this.arcLength[o])/(this.arcLength[o+1]-this.arcLength[o]),O=1-z,I=[0,0,0],F=0;F<3;++F)I[F]=O*C[F]+z*R[F];var D=Math.min(z<.5?o:o+1,this.points.length-1);return new A(h,I,D,this.points[D])}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(e,c,d){c.exports=function n(t){var i=new Float32Array(16);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i}},{}],93:[function(e,c,d){c.exports=function n(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],94:[function(e,c,d){c.exports=function n(t){var i=t[0],a=t[1],r=t[2],g=t[3],s=t[4],b=t[5],x=t[6],S=t[7],p=t[8],w=t[9],l=t[10],y=t[11],A=t[12],T=t[13],M=t[14],f=t[15];return(i*b-a*s)*(l*f-y*M)-(i*x-r*s)*(w*f-y*T)+(i*S-g*s)*(w*M-l*T)+(a*x-r*b)*(p*f-y*A)-(a*S-g*b)*(p*M-l*A)+(r*S-g*x)*(p*T-w*A)}},{}],95:[function(e,c,d){c.exports=function n(t,i){var a=i[0],r=i[1],g=i[2],s=i[3],b=a+a,x=r+r,S=g+g,p=a*b,w=r*b,l=r*x,y=g*b,A=g*x,T=g*S,M=s*b,f=s*x,u=s*S;return t[0]=1-l-T,t[1]=w+u,t[2]=y-f,t[3]=0,t[4]=w-u,t[5]=1-p-T,t[6]=A+M,t[7]=0,t[8]=y+f,t[9]=A-M,t[10]=1-p-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],96:[function(e,c,d){c.exports=function n(t,i,a){var r=i[0],g=i[1],s=i[2],b=i[3],x=r+r,S=g+g,p=s+s,w=r*x,l=r*S,y=r*p,A=g*S,T=g*p,M=s*p,f=b*x,u=b*S,h=b*p;return t[0]=1-(A+M),t[1]=l+h,t[2]=y-u,t[3]=0,t[4]=l-h,t[5]=1-(w+M),t[6]=T+f,t[7]=0,t[8]=y+u,t[9]=T-f,t[10]=1-(w+A),t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}},{}],97:[function(e,c,d){c.exports=function n(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],98:[function(e,c,d){c.exports=function n(t,i){var a=i[0],r=i[1],g=i[2],s=i[3],b=i[4],x=i[5],S=i[6],p=i[7],w=i[8],l=i[9],y=i[10],A=i[11],T=i[12],M=i[13],f=i[14],u=i[15],h=a*x-r*b,o=a*S-g*b,C=a*p-s*b,R=r*S-g*x,z=r*p-s*x,O=g*p-s*S,I=w*M-l*T,F=w*f-y*T,D=w*u-A*T,N=l*f-y*M,U=l*u-A*M,X=y*u-A*f,oe=h*X-o*U+C*N+R*D-z*F+O*I;return oe?(t[0]=(x*X-S*U+p*N)*(oe=1/oe),t[1]=(g*U-r*X-s*N)*oe,t[2]=(M*O-f*z+u*R)*oe,t[3]=(y*z-l*O-A*R)*oe,t[4]=(S*D-b*X-p*F)*oe,t[5]=(a*X-g*D+s*F)*oe,t[6]=(f*C-T*O-u*o)*oe,t[7]=(w*O-y*C+A*o)*oe,t[8]=(b*U-x*D+p*I)*oe,t[9]=(r*D-a*U-s*I)*oe,t[10]=(T*z-M*C+u*h)*oe,t[11]=(l*C-w*z-A*h)*oe,t[12]=(x*F-b*N-S*I)*oe,t[13]=(a*N-r*F+g*I)*oe,t[14]=(M*o-T*R-f*h)*oe,t[15]=(w*R-l*o+y*h)*oe,t):null}},{}],99:[function(e,c,d){var n=e("./identity");c.exports=function t(i,a,r,g){var s,b,x,S,p,w,l,y,A,T,M=a[0],f=a[1],u=a[2],h=g[0],o=g[1],C=g[2],R=r[0],z=r[1],O=r[2];return Math.abs(M-R)<1e-6&&Math.abs(f-z)<1e-6&&Math.abs(u-O)<1e-6?n(i):(l=M-R,y=f-z,A=u-O,s=o*(A*=T=1/Math.sqrt(l*l+y*y+A*A))-C*(y*=T),b=C*(l*=T)-h*A,x=h*y-o*l,(T=Math.sqrt(s*s+b*b+x*x))?(s*=T=1/T,b*=T,x*=T):(s=0,b=0,x=0),S=y*x-A*b,p=A*s-l*x,w=l*b-y*s,(T=Math.sqrt(S*S+p*p+w*w))?(S*=T=1/T,p*=T,w*=T):(S=0,p=0,w=0),i[0]=s,i[1]=S,i[2]=l,i[3]=0,i[4]=b,i[5]=p,i[6]=y,i[7]=0,i[8]=x,i[9]=w,i[10]=A,i[11]=0,i[12]=-(s*M+b*f+x*u),i[13]=-(S*M+p*f+w*u),i[14]=-(l*M+y*f+A*u),i[15]=1,i)}},{"./identity":97}],100:[function(e,c,d){c.exports=function n(t,i,a){var r=i[0],g=i[1],s=i[2],b=i[3],x=i[4],S=i[5],p=i[6],w=i[7],l=i[8],y=i[9],A=i[10],T=i[11],M=i[12],f=i[13],u=i[14],h=i[15],o=a[0],C=a[1],R=a[2],z=a[3];return t[0]=o*r+C*x+R*l+z*M,t[1]=o*g+C*S+R*y+z*f,t[2]=o*s+C*p+R*A+z*u,t[3]=o*b+C*w+R*T+z*h,t[4]=(o=a[4])*r+(C=a[5])*x+(R=a[6])*l+(z=a[7])*M,t[5]=o*g+C*S+R*y+z*f,t[6]=o*s+C*p+R*A+z*u,t[7]=o*b+C*w+R*T+z*h,t[8]=(o=a[8])*r+(C=a[9])*x+(R=a[10])*l+(z=a[11])*M,t[9]=o*g+C*S+R*y+z*f,t[10]=o*s+C*p+R*A+z*u,t[11]=o*b+C*w+R*T+z*h,t[12]=(o=a[12])*r+(C=a[13])*x+(R=a[14])*l+(z=a[15])*M,t[13]=o*g+C*S+R*y+z*f,t[14]=o*s+C*p+R*A+z*u,t[15]=o*b+C*w+R*T+z*h,t}},{}],101:[function(e,c,d){c.exports=function n(t,i,a,r,g,s,b){var x=1/(i-a),S=1/(r-g),p=1/(s-b);return t[0]=-2*x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*S,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*p,t[11]=0,t[12]=(i+a)*x,t[13]=(g+r)*S,t[14]=(b+s)*p,t[15]=1,t}},{}],102:[function(e,c,d){c.exports=function n(t,i,a,r,g){var s=1/Math.tan(i/2),b=1/(r-g);return t[0]=s/a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(g+r)*b,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*g*r*b,t[15]=0,t}},{}],103:[function(e,c,d){c.exports=function n(t,i,a,r){var S,p,w,l,y,A,T,M,f,u,h,o,C,R,z,O,I,F,D,N,U,X,oe,se,g=r[0],s=r[1],b=r[2],x=Math.sqrt(g*g+s*s+b*b);return Math.abs(x)<1e-6?null:(g*=x=1/x,s*=x,b*=x,S=Math.sin(a),p=Math.cos(a),y=i[1],A=i[2],T=i[3],f=i[5],u=i[6],h=i[7],C=i[9],R=i[10],z=i[11],D=g*s*(w=1-p)-b*S,N=s*s*w+p,U=b*s*w+g*S,X=g*b*w+s*S,oe=s*b*w-g*S,se=b*b*w+p,t[0]=(l=i[0])*(O=g*g*w+p)+(M=i[4])*(I=s*g*w+b*S)+(o=i[8])*(F=b*g*w-s*S),t[1]=y*O+f*I+C*F,t[2]=A*O+u*I+R*F,t[3]=T*O+h*I+z*F,t[4]=l*D+M*N+o*U,t[5]=y*D+f*N+C*U,t[6]=A*D+u*N+R*U,t[7]=T*D+h*N+z*U,t[8]=l*X+M*oe+o*se,t[9]=y*X+f*oe+C*se,t[10]=A*X+u*oe+R*se,t[11]=T*X+h*oe+z*se,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t)}},{}],104:[function(e,c,d){c.exports=function n(t,i,a){var r=Math.sin(a),g=Math.cos(a),s=i[4],b=i[5],x=i[6],S=i[7],p=i[8],w=i[9],l=i[10],y=i[11];return i!==t&&(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t[4]=s*g+p*r,t[5]=b*g+w*r,t[6]=x*g+l*r,t[7]=S*g+y*r,t[8]=p*g-s*r,t[9]=w*g-b*r,t[10]=l*g-x*r,t[11]=y*g-S*r,t}},{}],105:[function(e,c,d){c.exports=function n(t,i,a){var r=Math.sin(a),g=Math.cos(a),s=i[0],b=i[1],x=i[2],S=i[3],p=i[8],w=i[9],l=i[10],y=i[11];return i!==t&&(t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t[0]=s*g-p*r,t[1]=b*g-w*r,t[2]=x*g-l*r,t[3]=S*g-y*r,t[8]=s*r+p*g,t[9]=b*r+w*g,t[10]=x*r+l*g,t[11]=S*r+y*g,t}},{}],106:[function(e,c,d){c.exports=function n(t,i,a){var r=Math.sin(a),g=Math.cos(a),s=i[0],b=i[1],x=i[2],S=i[3],p=i[4],w=i[5],l=i[6],y=i[7];return i!==t&&(t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t[0]=s*g+p*r,t[1]=b*g+w*r,t[2]=x*g+l*r,t[3]=S*g+y*r,t[4]=p*g-s*r,t[5]=w*g-b*r,t[6]=l*g-x*r,t[7]=y*g-S*r,t}},{}],107:[function(e,c,d){c.exports=function n(t,i,a){var r=a[0],g=a[1],s=a[2];return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=i[3]*r,t[4]=i[4]*g,t[5]=i[5]*g,t[6]=i[6]*g,t[7]=i[7]*g,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=i[11]*s,t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],t}},{}],108:[function(e,c,d){c.exports=function n(t,i,a){var b,x,S,p,w,l,y,A,T,M,f,u,r=a[0],g=a[1],s=a[2];return i===t?(t[12]=i[0]*r+i[4]*g+i[8]*s+i[12],t[13]=i[1]*r+i[5]*g+i[9]*s+i[13],t[14]=i[2]*r+i[6]*g+i[10]*s+i[14],t[15]=i[3]*r+i[7]*g+i[11]*s+i[15]):(x=i[1],S=i[2],p=i[3],w=i[4],l=i[5],y=i[6],A=i[7],T=i[8],M=i[9],f=i[10],u=i[11],t[0]=b=i[0],t[1]=x,t[2]=S,t[3]=p,t[4]=w,t[5]=l,t[6]=y,t[7]=A,t[8]=T,t[9]=M,t[10]=f,t[11]=u,t[12]=b*r+w*g+T*s+i[12],t[13]=x*r+l*g+M*s+i[13],t[14]=S*r+y*g+f*s+i[14],t[15]=p*r+A*g+u*s+i[15]),t}},{}],109:[function(e,c,d){c.exports=function n(t,i){if(t===i){var a=i[1],r=i[2],g=i[3],s=i[6],b=i[7],x=i[11];t[1]=i[4],t[2]=i[8],t[3]=i[12],t[4]=a,t[6]=i[9],t[7]=i[13],t[8]=r,t[9]=s,t[11]=i[14],t[12]=g,t[13]=b,t[14]=x}else t[0]=i[0],t[1]=i[4],t[2]=i[8],t[3]=i[12],t[4]=i[1],t[5]=i[5],t[6]=i[9],t[7]=i[13],t[8]=i[2],t[9]=i[6],t[10]=i[10],t[11]=i[14],t[12]=i[3],t[13]=i[7],t[14]=i[11],t[15]=i[15];return t}},{}],110:[function(e,c,d){"use strict";var n=e("barycentric"),t=e("polytope-closest-point/lib/closest_point_2d.js");function i(b,x){for(var S=[0,0,0,0],p=0;p<4;++p)for(var w=0;w<4;++w)S[w]+=b[4*p+w]*x[p];return S}function a(b,x,S,p,w){for(var l=i(p,i(S,i(x,[b[0],b[1],b[2],1]))),y=0;y<3;++y)l[y]/=l[3];return[.5*w[0]*(1+l[0]),.5*w[1]*(1-l[1])]}function g(b,x){for(var S=[0,0,0],p=0;p<b.length;++p)for(var w=b[p],l=x[p],y=0;y<3;++y)S[y]+=l*w[y];return S}c.exports=function s(b,x,S,p,w,l){if(1===b.length)return[0,b[0].slice()];for(var y=new Array(b.length),A=0;A<b.length;++A)y[A]=a(b[A],S,p,w,l);var T=0,M=1/0;for(A=0;A<y.length;++A){for(var f=0,u=0;u<2;++u)f+=Math.pow(y[A][u]-x[u],2);f<M&&(M=f,T=A)}var h=function r(b,x){if(2===b.length){for(var S=0,p=0,w=0;w<2;++w)S+=Math.pow(x[w]-b[0][w],2),p+=Math.pow(x[w]-b[1][w],2);return(S=Math.sqrt(S))+(p=Math.sqrt(p))<1e-6?[1,0]:[p/(S+p),S/(p+S)]}if(3===b.length){var l=[0,0];return t(b[0],b[1],b[2],x,l),n(b,l)}return[]}(y,x),o=0;for(A=0;A<3;++A){if(h[A]<-.001||h[A]>1.0001)return null;o+=h[A]}return Math.abs(o-1)>.001?null:[T,g(b,h),h]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(e,c,d){var n=e("glslify"),t=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),i=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),a=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),r=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),g=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),b=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),x=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),S=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),p=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),w=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);d.meshShader={vertex:t,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},d.wireShader={vertex:a,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},d.pointShader={vertex:g,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},d.pickShader={vertex:b,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},d.pointPickShader={vertex:S,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},d.contourShader={vertex:p,fragment:w,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(e,c,d){"use strict";var i=e("gl-shader"),a=e("gl-buffer"),r=e("gl-vao"),g=e("gl-texture2d"),s=e("normals"),b=e("gl-mat4/multiply"),x=e("gl-mat4/invert"),S=e("ndarray"),p=e("colormap"),w=e("simplicial-complex-contour"),l=e("typedarray-pool"),y=e("./lib/shaders"),A=e("./lib/closest-point"),T=y.meshShader,M=y.wireShader,f=y.pointShader,u=y.pickShader,h=y.pointPickShader,o=y.contourShader,C=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function R(W,G,$,V,H,q,K,Y,te,J,j,re,le,ge,pe,xe,ke,we,de,be,Le,De,ye,Ce,Fe,Ke,Ue){this.gl=W,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=G,this.dirty=!0,this.triShader=$,this.lineShader=V,this.pointShader=H,this.pickShader=q,this.pointPickShader=K,this.contourShader=Y,this.trianglePositions=te,this.triangleColors=j,this.triangleNormals=le,this.triangleUVs=re,this.triangleIds=J,this.triangleVAO=ge,this.triangleCount=0,this.lineWidth=1,this.edgePositions=pe,this.edgeColors=ke,this.edgeUVs=we,this.edgeIds=xe,this.edgeVAO=de,this.edgeCount=0,this.pointPositions=be,this.pointColors=De,this.pointUVs=ye,this.pointSizes=Ce,this.pointIds=Le,this.pointVAO=Fe,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Ke,this.contourVAO=Ue,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=C,this._view=C,this._projection=C,this._resolution=[1,1]}var z=R.prototype;function O(W,G){if(!G||!G.length)return 1;for(var $=0;$<G.length;++$){if(G.length<2)return 1;if(G[$][0]===W)return G[$][1];if(G[$][0]>W&&$>0){var V=(G[$][0]-W)/(G[$][0]-G[$-1][0]);return G[$][1]*(1-V)+V*G[$-1][1]}}return 1}function D(W){var G=i(W,T.vertex,T.fragment);return G.attributes.position.location=0,G.attributes.color.location=2,G.attributes.uv.location=3,G.attributes.normal.location=4,G}function N(W){var G=i(W,M.vertex,M.fragment);return G.attributes.position.location=0,G.attributes.color.location=2,G.attributes.uv.location=3,G}function U(W){var G=i(W,f.vertex,f.fragment);return G.attributes.position.location=0,G.attributes.color.location=2,G.attributes.uv.location=3,G.attributes.pointSize.location=4,G}function X(W){var G=i(W,u.vertex,u.fragment);return G.attributes.position.location=0,G.attributes.id.location=1,G}function oe(W){var G=i(W,h.vertex,h.fragment);return G.attributes.position.location=0,G.attributes.id.location=1,G.attributes.pointSize.location=4,G}function se(W){var G=i(W,o.vertex,o.fragment);return G.attributes.position.location=0,G}z.isOpaque=function(){return!this.hasAlpha},z.isTransparent=function(){return this.hasAlpha},z.pickSlots=1,z.setPickBase=function(W){this.pickId=W},z.highlight=function(W){if(W&&this.contourEnable){for(var G=w(this.cells,this.intensity,W.intensity),$=G.cells,V=G.vertexIds,H=G.vertexWeights,q=$.length,K=l.mallocFloat32(6*q),Y=0,te=0;te<q;++te)for(var J=$[te],j=0;j<2;++j){var re=J[0];2===J.length&&(re=J[j]);for(var pe=H[re],xe=1-pe,ke=this.positions[V[re][0]],we=this.positions[V[re][1]],de=0;de<3;++de)K[Y++]=pe*ke[de]+xe*we[de]}this.contourCount=Y/3|0,this.contourPositions.update(K.subarray(0,Y)),l.free(K)}else this.contourCount=0},z.update=function(W){W=W||{};var G=this.gl;this.dirty=!0,"contourEnable"in W&&(this.contourEnable=W.contourEnable),"contourColor"in W&&(this.contourColor=W.contourColor),"lineWidth"in W&&(this.lineWidth=W.lineWidth),"lightPosition"in W&&(this.lightPosition=W.lightPosition),this.hasAlpha=!1,"opacity"in W&&(this.opacity=W.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in W&&(this.opacityscale=W.opacityscale,this.hasAlpha=!0),"ambient"in W&&(this.ambientLight=W.ambient),"diffuse"in W&&(this.diffuseLight=W.diffuse),"specular"in W&&(this.specularLight=W.specular),"roughness"in W&&(this.roughness=W.roughness),"fresnel"in W&&(this.fresnel=W.fresnel),W.texture?(this.texture.dispose(),this.texture=g(G,W.texture)):W.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=G.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=G.LINEAR,this.texture.setPixels(function I(W,G){for(var $=p({colormap:W,nshades:256,format:"rgba"}),V=new Uint8Array(1024),H=0;H<256;++H){for(var q=$[H],K=0;K<3;++K)V[4*H+K]=q[K];V[4*H+3]=G?255*O(H/255,G):255*q[3]}return S(V,[256,256,4],[4,0,1])}(W.colormap,this.opacityscale)),this.texture.generateMipmap());var $=W.cells,V=W.positions;if(V&&$){var H=[],q=[],K=[],Y=[],te=[],J=[],j=[],re=[],le=[],ge=[],pe=[],xe=[],ke=[],we=[];this.cells=$,this.positions=V;var de=W.vertexNormals,be=W.cellNormals,Le=void 0===W.vertexNormalsEpsilon?1e-6:W.vertexNormalsEpsilon;W.useFacetNormals&&!be&&(be=s.faceNormals($,V,void 0===W.faceNormalsEpsilon?1e-6:W.faceNormalsEpsilon)),!be&&!de&&(de=s.vertexNormals($,V,Le));var ye=W.vertexColors,Ce=W.cellColors,Fe=W.meshColor||[1,1,1,1],Ke=W.vertexUVs,Ue=W.vertexIntensity,Be=W.cellUVs,Ie=W.cellIntensity,nt=1/0,gt=-1/0;if(!Ke&&!Be)if(Ue)if(W.vertexIntensityBounds)nt=+W.vertexIntensityBounds[0],gt=+W.vertexIntensityBounds[1];else for(var Nt=0;Nt<Ue.length;++Nt){var St=Ue[Nt];nt=Math.min(nt,St),gt=Math.max(gt,St)}else if(Ie)if(W.cellIntensityBounds)nt=+W.cellIntensityBounds[0],gt=+W.cellIntensityBounds[1];else for(Nt=0;Nt<Ie.length;++Nt)St=Ie[Nt],nt=Math.min(nt,St),gt=Math.max(gt,St);else for(Nt=0;Nt<V.length;++Nt)St=V[Nt][2],nt=Math.min(nt,St),gt=Math.max(gt,St);this.intensity=Ue||Ie||function F(W){for(var G=W.length,$=new Array(G),V=0;V<G;++V)$[V]=W[V][2];return $}(V),this.pickVertex=!(Ie||Ce);var Bt=W.pointSizes,Zt=W.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Nt=0;Nt<V.length;++Nt)for(var Et=V[Nt],wt=0;wt<3;++wt)isNaN(Et[wt])||!isFinite(Et[wt])||(this.bounds[0][wt]=Math.min(this.bounds[0][wt],Et[wt]),this.bounds[1][wt]=Math.max(this.bounds[1][wt],Et[wt]));var at=0,vt=0,Qe=0;e:for(Nt=0;Nt<$.length;++Nt){var Pe=$[Nt];switch(Pe.length){case 1:for(Et=V[Ze=Pe[0]],wt=0;wt<3;++wt)if(isNaN(Et[wt])||!isFinite(Et[wt]))continue e;ge.push(Et[0],Et[1],Et[2]),Xe=ye?ye[Ze]:Ce?Ce[Nt]:Fe,this.opacityscale&&Ue?q.push(Xe[0],Xe[1],Xe[2],this.opacity*O((Ue[Ze]-nt)/(gt-nt),this.opacityscale)):3===Xe.length?pe.push(Xe[0],Xe[1],Xe[2],this.opacity):(pe.push(Xe[0],Xe[1],Xe[2],Xe[3]*this.opacity),Xe[3]<1&&(this.hasAlpha=!0)),xe.push((rt=Ke?Ke[Ze]:Ue?[(Ue[Ze]-nt)/(gt-nt),0]:Be?Be[Nt]:Ie?[(Ie[Nt]-nt)/(gt-nt),0]:[(Et[2]-nt)/(gt-nt),0])[0],rt[1]),ke.push(Bt?Bt[Ze]:Zt),we.push(Nt),Qe+=1;break;case 2:for(wt=0;wt<2;++wt){Et=V[Ze=Pe[wt]];for(var kt=0;kt<3;++kt)if(isNaN(Et[kt])||!isFinite(Et[kt]))continue e}for(wt=0;wt<2;++wt)J.push((Et=V[Ze=Pe[wt]])[0],Et[1],Et[2]),Xe=ye?ye[Ze]:Ce?Ce[Nt]:Fe,this.opacityscale&&Ue?q.push(Xe[0],Xe[1],Xe[2],this.opacity*O((Ue[Ze]-nt)/(gt-nt),this.opacityscale)):3===Xe.length?j.push(Xe[0],Xe[1],Xe[2],this.opacity):(j.push(Xe[0],Xe[1],Xe[2],Xe[3]*this.opacity),Xe[3]<1&&(this.hasAlpha=!0)),re.push((rt=Ke?Ke[Ze]:Ue?[(Ue[Ze]-nt)/(gt-nt),0]:Be?Be[Nt]:Ie?[(Ie[Nt]-nt)/(gt-nt),0]:[(Et[2]-nt)/(gt-nt),0])[0],rt[1]),le.push(Nt);vt+=1;break;case 3:for(wt=0;wt<3;++wt)for(Et=V[Ze=Pe[wt]],kt=0;kt<3;++kt)if(isNaN(Et[kt])||!isFinite(Et[kt]))continue e;for(wt=0;wt<3;++wt){var Ze,Xe,rt,Tt;H.push((Et=V[Ze=Pe[2-wt]])[0],Et[1],Et[2]),(Xe=ye?ye[Ze]:Ce?Ce[Nt]:Fe)?this.opacityscale&&Ue?q.push(Xe[0],Xe[1],Xe[2],this.opacity*O((Ue[Ze]-nt)/(gt-nt),this.opacityscale)):3===Xe.length?q.push(Xe[0],Xe[1],Xe[2],this.opacity):(q.push(Xe[0],Xe[1],Xe[2],Xe[3]*this.opacity),Xe[3]<1&&(this.hasAlpha=!0)):q.push(.5,.5,.5,1),Y.push((rt=Ke?Ke[Ze]:Ue?[(Ue[Ze]-nt)/(gt-nt),0]:Be?Be[Nt]:Ie?[(Ie[Nt]-nt)/(gt-nt),0]:[(Et[2]-nt)/(gt-nt),0])[0],rt[1]),K.push((Tt=de?de[Ze]:be[Nt])[0],Tt[1],Tt[2]),te.push(Nt)}at+=1}}this.pointCount=Qe,this.edgeCount=vt,this.triangleCount=at,this.pointPositions.update(ge),this.pointColors.update(pe),this.pointUVs.update(xe),this.pointSizes.update(ke),this.pointIds.update(new Uint32Array(we)),this.edgePositions.update(J),this.edgeColors.update(j),this.edgeUVs.update(re),this.edgeIds.update(new Uint32Array(le)),this.trianglePositions.update(H),this.triangleColors.update(q),this.triangleUVs.update(Y),this.triangleNormals.update(K),this.triangleIds.update(new Uint32Array(te))}},z.drawTransparent=z.draw=function(W){for(var G=this.gl,$=(W=W||{}).model||C,V=W.view||C,H=W.projection||C,q=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],K=0;K<3;++K)q[0][K]=Math.max(q[0][K],this.clipBounds[0][K]),q[1][K]=Math.min(q[1][K],this.clipBounds[1][K]);var Y={model:$,view:V,projection:H,inverseModel:C.slice(),clipBounds:q,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};Y.inverseModel=x(Y.inverseModel,Y.model),G.disable(G.CULL_FACE),this.texture.bind(0);var le,te=new Array(16);for(b(te,Y.view,Y.model),b(te,Y.projection,te),x(te,te),K=0;K<3;++K)Y.eyePosition[K]=te[12+K]/te[15];var J=te[15];for(K=0;K<3;++K)J+=this.lightPosition[K]*te[4*K+3];for(K=0;K<3;++K){for(var j=te[12+K],re=0;re<3;++re)j+=te[4*re+K]*this.lightPosition[re];Y.lightPosition[K]=j/J}this.triangleCount>0&&((le=this.triShader).bind(),le.uniforms=Y,this.triangleVAO.bind(),G.drawArrays(G.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((le=this.lineShader).bind(),le.uniforms=Y,this.edgeVAO.bind(),G.lineWidth(this.lineWidth*this.pixelRatio),G.drawArrays(G.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((le=this.pointShader).bind(),le.uniforms=Y,this.pointVAO.bind(),G.drawArrays(G.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((le=this.contourShader).bind(),le.uniforms=Y,this.contourVAO.bind(),G.drawArrays(G.LINES,0,this.contourCount),this.contourVAO.unbind())},z.drawPick=function(W){for(var G=this.gl,$=(W=W||{}).model||C,V=W.view||C,H=W.projection||C,q=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],K=0;K<3;++K)q[0][K]=Math.max(q[0][K],this.clipBounds[0][K]),q[1][K]=Math.min(q[1][K],this.clipBounds[1][K]);this._model=[].slice.call($),this._view=[].slice.call(V),this._projection=[].slice.call(H),this._resolution=[G.drawingBufferWidth,G.drawingBufferHeight];var te,Y={model:$,view:V,projection:H,clipBounds:q,pickId:this.pickId/255};(te=this.pickShader).bind(),te.uniforms=Y,this.triangleCount>0&&(this.triangleVAO.bind(),G.drawArrays(G.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),G.lineWidth(this.lineWidth*this.pixelRatio),G.drawArrays(G.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((te=this.pointPickShader).bind(),te.uniforms=Y,this.pointVAO.bind(),G.drawArrays(G.POINTS,0,this.pointCount),this.pointVAO.unbind())},z.pick=function(W){if(!W||W.id!==this.pickId)return null;for(var G=W.value[0]+256*W.value[1]+65536*W.value[2],$=this.cells[G],V=this.positions,H=new Array($.length),q=0;q<$.length;++q)H[q]=V[$[q]];var K=W.coord[0],Y=W.coord[1];if(!this.pickVertex){var te=this.positions[$[0]],J=this.positions[$[1]],j=this.positions[$[2]];return{_cellCenter:!0,position:[K,Y],index:G,cell:$,cellId:G,intensity:this.intensity[G],dataCoordinate:[(te[0]+J[0]+j[0])/3,(te[1]+J[1]+j[1])/3,(te[2]+J[2]+j[2])/3]}}var le=A(H,[K*this.pixelRatio,this._resolution[1]-Y*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!le)return null;var ge=le[2],pe=0;for(q=0;q<$.length;++q)pe+=ge[q]*this.intensity[$[q]];return{position:le[1],index:$[le[0]],cell:$,cellId:G,intensity:pe,dataCoordinate:this.positions[$[le[0]]]}},z.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},c.exports=function ne(W,G){if(1===arguments.length&&(W=(G=W).gl),!(W.getExtension("OES_standard_derivatives")||W.getExtension("MOZ_OES_standard_derivatives")||W.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var V=D(W),H=N(W),q=U(W),K=X(W),Y=oe(W),te=se(W),J=g(W,S(new Uint8Array([255,255,255,255]),[1,1,4]));J.generateMipmap(),J.minFilter=W.LINEAR_MIPMAP_LINEAR,J.magFilter=W.LINEAR;var j=a(W),re=a(W),le=a(W),ge=a(W),pe=a(W),xe=r(W,[{buffer:j,type:W.FLOAT,size:3},{buffer:pe,type:W.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:re,type:W.FLOAT,size:4},{buffer:le,type:W.FLOAT,size:2},{buffer:ge,type:W.FLOAT,size:3}]),ke=a(W),we=a(W),de=a(W),be=a(W),Le=r(W,[{buffer:ke,type:W.FLOAT,size:3},{buffer:be,type:W.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:we,type:W.FLOAT,size:4},{buffer:de,type:W.FLOAT,size:2}]),De=a(W),ye=a(W),Ce=a(W),Fe=a(W),Ke=a(W),Ue=r(W,[{buffer:De,type:W.FLOAT,size:3},{buffer:Ke,type:W.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ye,type:W.FLOAT,size:4},{buffer:Ce,type:W.FLOAT,size:2},{buffer:Fe,type:W.FLOAT,size:1}]),Be=a(W),nt=new R(W,J,V,H,q,K,Y,te,j,pe,re,le,ge,xe,ke,be,we,de,Le,De,Ke,ye,Ce,Fe,Ue,Be,r(W,[{buffer:Be,type:W.FLOAT,size:3}]));return nt.update(G),nt}},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(e,c,d){"use strict";c.exports=function g(s){var b=s.gl;return new a(s,n(b,[0,0,0,1,1,0,1,1]),t(b,i.boxVert,i.lineFrag))};var n=e("gl-buffer"),t=e("gl-shader"),i=e("./shaders");function a(s,b,x){this.plot=s,this.vbo=b,this.shader=x}var s,b,r=a.prototype;r.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},r.drawBox=(s=[0,0],b=[0,0],function(x,S,p,w,l){var A=this.shader,T=this.plot.gl;s[0]=x,s[1]=S,b[0]=p,b[1]=w,A.uniforms.lo=s,A.uniforms.hi=b,A.uniforms.color=l,T.drawArrays(T.TRIANGLE_STRIP,0,4)}),r.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(e,c,d){"use strict";c.exports=function b(x){var S=x.gl;return new r(x,n(S),t(S,a.gridVert,a.gridFrag),t(S,a.tickVert,a.gridFrag))};var n=e("gl-buffer"),t=e("gl-shader"),i=e("binary-search-bounds"),a=e("./shaders");function r(x,S,p,w){this.plot=x,this.vbo=S,this.shader=p,this.tickShader=w,this.ticks=[[],[]]}function g(x,S){return x-S}var x,S,p,s=r.prototype;s.draw=(x=[0,0],S=[0,0],p=[0,0],function(){for(var w=this.plot,l=this.vbo,y=this.shader,A=this.ticks,T=w.gl,M=w._tickBounds,f=w.dataBox,u=w.viewBox,h=w.gridLineWidth,o=w.gridLineColor,C=w.gridLineEnable,R=w.pixelRatio,z=0;z<2;++z){var O=M[z],D=.5*(f[z+2]+f[z]),N=f[z+2]-f[z];S[z]=2*(M[z+2]-O)/N,x[z]=2*(O-D)/N}y.bind(),l.bind(),y.attributes.dataCoord.pointer(),y.uniforms.dataShift=x,y.uniforms.dataScale=S;var U=0;for(z=0;z<2;++z){p[0]=p[1]=0,p[z]=1,y.uniforms.dataAxis=p,y.uniforms.lineWidth=h[z]/(u[z+2]-u[z])*R,y.uniforms.color=o[z];var X=6*A[z].length;C[z]&&X&&T.drawArrays(T.TRIANGLES,U,X),U+=X}}),s.drawTickMarks=function(){var x=[0,0],S=[0,0],p=[1,0],w=[0,1],l=[0,0],y=[0,0];return function(){for(var A=this.plot,T=this.vbo,M=this.tickShader,f=this.ticks,u=A.gl,h=A._tickBounds,o=A.dataBox,C=A.viewBox,R=A.pixelRatio,z=A.screenBox,O=z[2]-z[0],I=z[3]-z[1],F=C[2]-C[0],D=C[3]-C[1],N=0;N<2;++N){var U=h[N],se=.5*(o[N+2]+o[N]),ne=o[N+2]-o[N];S[N]=2*(h[N+2]-U)/ne,x[N]=2*(U-se)/ne}S[0]*=F/O,x[0]*=F/O,S[1]*=D/I,x[1]*=D/I,M.bind(),T.bind(),M.attributes.dataCoord.pointer();var W=M.uniforms;W.dataShift=x,W.dataScale=S;var G=A.tickMarkLength,$=A.tickMarkWidth,V=A.tickMarkColor,q=6*f[0].length,K=Math.min(i.ge(f[0],(o[0]-h[0])/(h[2]-h[0]),g),f[0].length),Y=Math.min(i.gt(f[0],(o[2]-h[0])/(h[2]-h[0]),g),f[0].length),te=0+6*K,J=6*Math.max(0,Y-K),j=Math.min(i.ge(f[1],(o[1]-h[1])/(h[3]-h[1]),g),f[1].length),re=Math.min(i.gt(f[1],(o[3]-h[1])/(h[3]-h[1]),g),f[1].length),le=q+6*j,ge=6*Math.max(0,re-j);l[0]=2*(C[0]-G[1])/O-1,l[1]=(C[3]+C[1])/I-1,y[0]=G[1]*R/O,y[1]=$[1]*R/I,ge&&(W.color=V[1],W.tickScale=y,W.dataAxis=w,W.screenOffset=l,u.drawArrays(u.TRIANGLES,le,ge)),l[0]=(C[2]+C[0])/O-1,l[1]=2*(C[1]-G[0])/I-1,y[0]=$[0]*R/O,y[1]=G[0]*R/I,J&&(W.color=V[0],W.tickScale=y,W.dataAxis=p,W.screenOffset=l,u.drawArrays(u.TRIANGLES,te,J)),l[0]=2*(C[2]+G[3])/O-1,l[1]=(C[3]+C[1])/I-1,y[0]=G[3]*R/O,y[1]=$[3]*R/I,ge&&(W.color=V[3],W.tickScale=y,W.dataAxis=w,W.screenOffset=l,u.drawArrays(u.TRIANGLES,le,ge)),l[0]=(C[2]+C[0])/O-1,l[1]=2*(C[3]+G[2])/I-1,y[0]=$[2]*R/O,y[1]=G[2]*R/I,J&&(W.color=V[2],W.tickScale=y,W.dataAxis=p,W.screenOffset=l,u.drawArrays(u.TRIANGLES,te,J))}}(),s.update=function(){var x=[1,1,-1,-1,1,-1],S=[1,-1,1,1,-1,-1];return function(p){for(var w=p.ticks,l=p.bounds,y=new Float32Array(18*(w[0].length+w[1].length)),T=0,M=[[],[]],f=0;f<2;++f)for(var u=M[f],h=w[f],o=l[f],C=l[f+2],R=0;R<h.length;++R){var z=(h[R].x-o)/(C-o);u.push(z);for(var O=0;O<6;++O)y[T++]=z,y[T++]=x[O],y[T++]=S[O]}this.ticks=M,this.vbo.update(y)}}(),s.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(e,c,d){"use strict";c.exports=function g(s){var b=s.gl;return new a(s,n(b,[-1,-1,-1,1,1,-1,1,1]),t(b,i.lineVert,i.lineFrag))};var n=e("gl-buffer"),t=e("gl-shader"),i=e("./shaders");function a(s,b,x){this.plot=s,this.vbo=b,this.shader=x}var s,b,r=a.prototype;r.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},r.drawLine=(s=[0,0],b=[0,0],function(x,S,p,w,l,y){var A=this.plot,T=this.shader,M=A.gl;s[0]=x,s[1]=S,b[0]=p,b[1]=w,T.uniforms.start=s,T.uniforms.end=b,T.uniforms.width=l*A.pixelRatio,T.uniforms.color=y,M.drawArrays(M.TRIANGLE_STRIP,0,4)}),r.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(e,c,d){"use strict";var n=e("glslify"),t=n(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);c.exports={lineVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:t,textVert:n(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:t,gridVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:t,boxVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:231}],117:[function(e,c,d){"use strict";c.exports=function b(x){var S=x.gl;return new g(x,n(S),t(S,r.textVert,r.textFrag))};var n=e("gl-buffer"),t=e("gl-shader"),i=e("text-cache"),a=e("binary-search-bounds"),r=e("./shaders");function g(x,S,p){this.plot=x,this.vbo=S,this.shader=p,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var x,S,p,s=g.prototype;s.drawTicks=(x=[0,0],S=[0,0],p=[0,0],function(w){var l=this.plot,y=this.shader,A=this.tickX[w],T=this.tickOffset[w],M=l.gl,f=l.viewBox,u=l.dataBox,h=l.screenBox,o=l.pixelRatio,C=l.tickEnable,R=l.tickPad,z=l.tickColor,O=l.tickAngle,I=l.labelEnable,F=l.labelPad,D=l.labelColor,N=l.labelAngle,U=this.labelOffset[w],X=this.labelCount[w],oe=a.lt(A,u[w]),se=a.le(A,u[w+2]);x[0]=x[1]=0,x[w]=1,S[w]=(f[2+w]+f[w])/(h[2+w]-h[w])-1;var ne=2/h[2+(1^w)]-h[1^w];S[1^w]=ne*f[1^w]-1,C[w]&&(S[1^w]-=ne*o*R[w],oe<se&&T[se]>T[oe]&&(y.uniforms.dataAxis=x,y.uniforms.screenOffset=S,y.uniforms.color=z[w],y.uniforms.angle=O[w],M.drawArrays(M.TRIANGLES,T[oe],T[se]-T[oe]))),I[w]&&X&&(S[1^w]-=ne*o*F[w],y.uniforms.dataAxis=p,y.uniforms.screenOffset=S,y.uniforms.color=D[w],y.uniforms.angle=N[w],M.drawArrays(M.TRIANGLES,U,X)),S[1^w]=ne*f[2+(1^w)]-1,C[w+2]&&(S[1^w]+=ne*o*R[w+2],oe<se&&T[se]>T[oe]&&(y.uniforms.dataAxis=x,y.uniforms.screenOffset=S,y.uniforms.color=z[w+2],y.uniforms.angle=O[w+2],M.drawArrays(M.TRIANGLES,T[oe],T[se]-T[oe]))),I[w+2]&&X&&(S[1^w]+=ne*o*F[w+2],y.uniforms.dataAxis=p,y.uniforms.screenOffset=S,y.uniforms.color=D[w+2],y.uniforms.angle=N[w+2],M.drawArrays(M.TRIANGLES,U,X))}),s.drawTitle=function(){var x=[0,0],S=[0,0];return function(){var p=this.plot,w=this.shader,l=p.gl,y=p.screenBox,A=p.titleCenter,T=p.titleAngle,M=p.titleColor,f=p.pixelRatio;if(this.titleCount){for(var u=0;u<2;++u)S[u]=2*(A[u]*f-y[u])/(y[2+u]-y[u])-1;w.bind(),w.uniforms.dataAxis=x,w.uniforms.screenOffset=S,w.uniforms.angle=T,w.uniforms.color=M,l.drawArrays(l.TRIANGLES,this.titleOffset,this.titleCount)}}}(),s.bind=function(){var x=[0,0],S=[0,0],p=[0,0];return function(){var w=this.plot,l=this.shader,y=w._tickBounds,A=w.dataBox,T=w.screenBox,M=w.viewBox;l.bind();for(var f=0;f<2;++f){var u=y[f],C=.5*(A[f+2]+A[f]),R=A[f+2]-A[f],I=M[f+2]-M[f],N=T[f+2]-T[f];S[f]=2*(y[f+2]-u)/R*I/N,x[f]=2*(u-C)/R*I/N}p[1]=2*w.pixelRatio/(T[3]-T[1]),p[0]=p[1]*(T[3]-T[1])/(T[2]-T[0]),l.uniforms.dataScale=S,l.uniforms.dataShift=x,l.uniforms.textScale=p,this.vbo.bind(),l.attributes.textCoordinate.pointer()}}(),s.update=function(x){var l,y,T,M,f,S=[],p=x.ticks,w=x.bounds;for(f=0;f<2;++f){var u=[Math.floor(S.length/3)],h=[-1/0],o=p[f];for(l=0;l<o.length;++l){var C=o[l],R=C.x,O=C.font||"sans-serif";M=C.fontSize||12;for(var I=1/(w[f+2]-w[f]),F=w[f],D=C.text.split("\n"),N=0;N<D.length;N++)for(T=i(O,D[N]).data,y=0;y<T.length;y+=2)S.push(T[y]*M,-T[y+1]*M-N*M*1.2,(R-F)*I);u.push(Math.floor(S.length/3)),h.push(R)}this.tickOffset[f]=u,this.tickX[f]=h}for(f=0;f<2;++f){for(this.labelOffset[f]=Math.floor(S.length/3),T=i(x.labelFont[f],x.labels[f],{textAlign:"center"}).data,M=x.labelSize[f],l=0;l<T.length;l+=2)S.push(T[l]*M,-T[l+1]*M,0);this.labelCount[f]=Math.floor(S.length/3)-this.labelOffset[f]}for(this.titleOffset=Math.floor(S.length/3),T=i(x.titleFont,x.title).data,M=x.titleSize,l=0;l<T.length;l+=2)S.push(T[l]*M,-T[l+1]*M,0);this.titleCount=Math.floor(S.length/3)-this.titleOffset,this.vbo.update(S)},s.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(e,c,d){"use strict";c.exports=function p(w){var l=w.gl,A=new g(l,n(l,[l.drawingBufferWidth,l.drawingBufferHeight]));return A.grid=t(A),A.text=i(A),A.line=a(A),A.box=r(A),A.update(w),A};var n=e("gl-select-static"),t=e("./lib/grid"),i=e("./lib/text"),a=e("./lib/line"),r=e("./lib/box");function g(w,l){this.gl=w,this.pickBuffer=l,this.screenBox=[0,0,w.drawingBufferWidth,w.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var s=g.prototype;function x(w){for(var l=w.slice(),y=0;y<l.length;++y)l[y]=l[y].slice();return l}function S(w,l){return w.x-l.x}s.setDirty=function(){this.dirty=this.pickDirty=!0},s.setOverlayDirty=function(){this.dirty=!0},s.nextDepthValue=function(){return this._depthCounter++/65536},s.draw=function(){var l=this.gl,y=this.screenBox,A=this.viewBox,T=this.dataBox,M=this.pixelRatio,f=this.grid,u=this.line,h=this.text,o=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,l.bindFramebuffer(l.FRAMEBUFFER,null),l.enable(l.SCISSOR_TEST),l.disable(l.DEPTH_TEST),l.depthFunc(l.LESS),l.depthMask(!1),l.enable(l.BLEND),l.blendEquation(l.FUNC_ADD,l.FUNC_ADD),l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA),this.borderColor){l.scissor(y[0],y[1],y[2]-y[0],y[3]-y[1]);var C=this.borderColor;l.clearColor(C[0]*C[3],C[1]*C[3],C[2]*C[3],C[3]),l.clear(l.COLOR_BUFFER_BIT|l.DEPTH_BUFFER_BIT)}l.scissor(A[0],A[1],A[2]-A[0],A[3]-A[1]),l.viewport(A[0],A[1],A[2]-A[0],A[3]-A[1]);var R=this.backgroundColor;l.clearColor(R[0]*R[3],R[1]*R[3],R[2]*R[3],R[3]),l.clear(l.COLOR_BUFFER_BIT),f.draw();var z=this.zeroLineEnable,O=this.zeroLineColor,I=this.zeroLineWidth;if(z[0]||z[1]){u.bind();for(var F=0;F<2;++F)if(z[F]&&T[F]<=0&&T[F+2]>=0){var D=y[F]-T[F]*(y[F+2]-y[F])/(T[F+2]-T[F]);0===F?u.drawLine(D,y[1],D,y[3],I[F],O[F]):u.drawLine(y[0],D,y[2],D,I[F],O[F])}}for(F=0;F<o.length;++F)o[F].draw();l.viewport(y[0],y[1],y[2]-y[0],y[3]-y[1]),l.scissor(y[0],y[1],y[2]-y[0],y[3]-y[1]),this.grid.drawTickMarks(),u.bind();var N=this.borderLineEnable,U=this.borderLineWidth,X=this.borderLineColor;for(N[1]&&u.drawLine(A[0],A[1]-.5*U[1]*M,A[0],A[3]+.5*U[3]*M,U[1],X[1]),N[0]&&u.drawLine(A[0]-.5*U[0]*M,A[1],A[2]+.5*U[2]*M,A[1],U[0],X[0]),N[3]&&u.drawLine(A[2],A[1]-.5*U[1]*M,A[2],A[3]+.5*U[3]*M,U[3],X[3]),N[2]&&u.drawLine(A[0]-.5*U[0]*M,A[3],A[2]+.5*U[2]*M,A[3],U[2],X[2]),h.bind(),F=0;F<2;++F)h.drawTicks(F);this.titleEnable&&h.drawTitle();var oe=this.overlays;for(F=0;F<oe.length;++F)oe[F].draw();l.disable(l.SCISSOR_TEST),l.disable(l.BLEND),l.depthMask(!0)}},s.drawPick=function(){if(!this.static){var w=this.pickBuffer;this._pickTimeout=null,w.begin();for(var y=1,A=this.objects,T=0;T<A.length;++T)y=A[T].drawPick(y);w.end()}},s.pick=function(w,l){if(!this.static){var y=this.pixelRatio,A=this.pickPixelRatio,T=this.viewBox,M=0|Math.round((w-T[0]/y)*A),f=0|Math.round((l-T[1]/y)*A),u=this.pickBuffer.query(M,f,this.pickRadius);if(!u)return null;for(var h=u.id+(u.value[0]<<8)+(u.value[1]<<16)+(u.value[2]<<24),o=this.objects,C=0;C<o.length;++C){var R=o[C].pick(M,f,h);if(R)return R}return null}},s.setScreenBox=function(w){var l=this.screenBox,y=this.pixelRatio;l[0]=0|Math.round(w[0]*y),l[1]=0|Math.round(w[1]*y),l[2]=0|Math.round(w[2]*y),l[3]=0|Math.round(w[3]*y),this.setDirty()},s.setDataBox=function(w){var l=this.dataBox;(l[0]!==w[0]||l[1]!==w[1]||l[2]!==w[2]||l[3]!==w[3])&&(l[0]=w[0],l[1]=w[1],l[2]=w[2],l[3]=w[3],this.setDirty())},s.setViewBox=function(w){var l=this.pixelRatio,y=this.viewBox;y[0]=0|Math.round(w[0]*l),y[1]=0|Math.round(w[1]*l),y[2]=0|Math.round(w[2]*l),y[3]=0|Math.round(w[3]*l);var A=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((w[2]-w[0])*A),0|Math.round((w[3]-w[1])*A)],this.setDirty()},s.update=function(w){var l=this.gl;this.pixelRatio=(w=w||{}).pixelRatio||1;var y=this.pixelRatio;this.pickPixelRatio=Math.max(y,1),this.setScreenBox(w.screenBox||[0,0,l.drawingBufferWidth/y,l.drawingBufferHeight/y]),this.setViewBox(w.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/y,.125*(this.screenBox[3]-this.screenBox[1])/y,.875*(this.screenBox[2]-this.screenBox[0])/y,.875*(this.screenBox[3]-this.screenBox[1])/y]);var T=this.viewBox,M=(T[2]-T[0])/(T[3]-T[1]);this.setDataBox(w.dataBox||[-10,-10/M,10,10/M]),this.borderColor=!1!==w.borderColor&&(w.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(w.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(w.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(w.gridLineWidth||[1,1]).slice(),this.gridLineColor=x(w.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(w.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(w.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=x(w.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(w.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(w.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=x(w.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(w.titleCenter||[.5*(T[0]+T[2])/y,(T[3]+120)/y]).slice(),this.titleEnable=!("titleEnable"in w)||!!w.titleEnable,this.titleAngle=w.titleAngle||0,this.titleColor=(w.titleColor||[0,0,0,1]).slice(),this.labelPad=(w.labelPad||[15,15,15,15]).slice(),this.labelAngle=(w.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(w.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=x(w.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(w.tickPad||[15,15,15,15]).slice(),this.tickAngle=(w.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(w.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=x(w.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(w.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(w.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=x(w.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var f=w.ticks||[[],[]],u=this._tickBounds;u[0]=u[1]=1/0,u[2]=u[3]=-1/0;for(var h=0;h<2;++h){var o=f[h].slice(0);0!==o.length&&(o.sort(S),u[h]=Math.min(u[h],o[0].x),u[h+2]=Math.max(u[h+2],o[o.length-1].x))}this.grid.update({bounds:u,ticks:f}),this.text.update({bounds:u,ticks:f,labels:w.labels||["x","y"],labelSize:w.labelSize||[12,12],labelFont:w.labelFont||["sans-serif","sans-serif"],title:w.title||"",titleSize:w.titleSize||18,titleFont:w.titleFont||"sans-serif"}),this.static=!!w.static,this.setDirty()},s.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var w=this.objects.length-1;w>=0;--w)this.objects[w].dispose();for(this.objects.length=0,w=this.overlays.length-1;w>=0;--w)this.overlays[w].dispose();this.overlays.length=0,this.gl=null},s.addObject=function(w){this.objects.indexOf(w)<0&&(this.objects.push(w),this.setDirty())},s.removeObject=function(w){for(var l=this.objects,y=0;y<l.length;++y)if(l[y]===w){l.splice(y,1),this.setDirty();break}},s.addOverlay=function(w){this.overlays.indexOf(w)<0&&(this.overlays.push(w),this.setOverlayDirty())},s.removeOverlay=function(w){for(var l=this.overlays,y=0;y<l.length;++y)if(l[y]===w){l.splice(y,1),this.setOverlayDirty();break}}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(e,c,d){"use strict";c.exports=function s(b,x){b=b||document.body;var S=[.01,1/0];"distanceLimits"in(x=x||{})&&(S[0]=x.distanceLimits[0],S[1]=x.distanceLimits[1]),"zoomMin"in x&&(S[0]=x.zoomMin),"zoomMax"in x&&(S[1]=x.zoomMax);var p=t({center:x.center||[0,0,0],up:x.up||[0,1,0],eye:x.eye||[0,0,10],mode:x.mode||"orbit",distanceLimits:S}),w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=0,y=b.clientWidth,A=b.clientHeight,T={keyBindingMode:"rotate",enableWheel:!0,view:p,element:b,delay:x.delay||16,rotateSpeed:x.rotateSpeed||1,zoomSpeed:x.zoomSpeed||1,translateSpeed:x.translateSpeed||1,flipX:!!x.flipX,flipY:!!x.flipY,modes:p.modes,_ortho:x._ortho||x.projection&&"orthographic"===x.projection.type||!1,tick:function(){var M=n(),f=this.delay,u=M-2*f;p.idle(M-f),p.recalcMatrix(u),p.flush(M-(100+2*f));for(var h=!0,o=p.computedMatrix,C=0;C<16;++C)h=h&&w[C]===o[C],w[C]=o[C];var R=b.clientWidth===y&&b.clientHeight===A;return y=b.clientWidth,A=b.clientHeight,h?!R:(l=Math.exp(p.computedRadius[0]),!0)},lookAt:function(M,f,u){p.lookAt(p.lastT(),M,f,u)},rotate:function(M,f,u){p.rotate(p.lastT(),M,f,u)},pan:function(M,f,u){p.pan(p.lastT(),M,f,u)},translate:function(M,f,u){p.translate(p.lastT(),M,f,u)}};return Object.defineProperties(T,{matrix:{get:function(){return p.computedMatrix},set:function(M){return p.setMatrix(p.lastT(),M),p.computedMatrix},enumerable:!0},mode:{get:function(){return p.getMode()},set:function(M){var f=p.computedUp.slice(),u=p.computedEye.slice(),h=p.computedCenter.slice();if(p.setMode(M),"turntable"===M){var o=n();p._active.lookAt(o,u,h,f),p._active.lookAt(o+500,u,h,[0,0,1]),p._active.flush(o)}return p.getMode()},enumerable:!0},center:{get:function(){return p.computedCenter},set:function(M){return p.lookAt(p.lastT(),null,M),p.computedCenter},enumerable:!0},eye:{get:function(){return p.computedEye},set:function(M){return p.lookAt(p.lastT(),M),p.computedEye},enumerable:!0},up:{get:function(){return p.computedUp},set:function(M){return p.lookAt(p.lastT(),null,null,M),p.computedUp},enumerable:!0},distance:{get:function(){return l},set:function(M){return p.setDistance(p.lastT(),M),M},enumerable:!0},distanceLimits:{get:function(){return p.getDistanceLimits(S)},set:function(M){return p.setDistanceLimits(M),M},enumerable:!0}}),b.addEventListener("contextmenu",function(M){return M.preventDefault(),!1}),T._lastX=-1,T._lastY=-1,T._lastMods={shift:!1,control:!1,alt:!1,meta:!1},T.enableMouseListeners=function(){function M(f,u,h,o){var C=T.keyBindingMode;if(!1!==C){var R="rotate"===C,z="pan"===C,O="zoom"===C,I=!!o.control,F=!!o.alt,D=!!o.shift,N=!!(1&f),U=!!(2&f),X=!!(4&f),oe=1/b.clientHeight,se=oe*(u-T._lastX),ne=oe*(h-T._lastY),W=T.flipX?1:-1,G=T.flipY?1:-1,$=Math.PI*T.rotateSpeed,V=n();if(-1!==T._lastX&&-1!==T._lastY&&((R&&N&&!I&&!F&&!D||N&&!I&&!F&&D)&&p.rotate(V,W*$*se,-G*$*ne,0),(z&&N&&!I&&!F&&!D||U||N&&I&&!F&&!D)&&p.pan(V,-T.translateSpeed*se*l,T.translateSpeed*ne*l,0),O&&N&&!I&&!F&&!D||X||N&&!I&&F&&!D)){var H=-T.zoomSpeed*ne/window.innerHeight*(V-p.lastT())*100;p.pan(V,0,0,l*(Math.exp(H)-1))}return T._lastX=u,T._lastY=h,T._lastMods=o,!0}}T.mouseListener=i(b,M),b.addEventListener("touchstart",function(f){var u=r(f.changedTouches[0],b);M(0,u[0],u[1],T._lastMods),M(1,u[0],u[1],T._lastMods)},!!g&&{passive:!0}),b.addEventListener("touchmove",function(f){var u=r(f.changedTouches[0],b);M(1,u[0],u[1],T._lastMods),f.preventDefault()},!!g&&{passive:!1}),b.addEventListener("touchend",function(f){M(0,T._lastX,T._lastY,T._lastMods)},!!g&&{passive:!0}),T.wheelListener=a(b,function(f,u){if(!1!==T.keyBindingMode&&T.enableWheel){var h=T.flipX?1:-1,o=T.flipY?1:-1,C=n();if(Math.abs(f)>Math.abs(u))p.rotate(C,0,0,-f*h*Math.PI*T.rotateSpeed/window.innerWidth);else if(!T._ortho){var R=-T.zoomSpeed*o*u/window.innerHeight*(C-p.lastT())/20;p.pan(C,0,0,l*(Math.exp(R)-1))}}},!0)},T.enableMouseListeners(),T};var n=e("right-now"),t=e("3d-view"),i=e("mouse-change"),a=e("mouse-wheel"),r=e("mouse-event-offset"),g=e("has-passive-events")},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(e,c,d){var n=e("glslify"),t=e("gl-shader"),i=n(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),a=n(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);c.exports=function(r){return t(r,i,a,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(e,c,d){"use strict";var n=e("./camera.js"),t=e("gl-axes3d"),i=e("gl-axes3d/properties"),a=e("gl-spikes3d"),r=e("gl-select-static"),g=e("gl-fbo"),s=e("a-big-triangle"),b=e("mouse-change"),x=e("gl-mat4/perspective"),S=e("gl-mat4/ortho"),p=e("./lib/shader"),w=e("is-mobile")({tablet:!0,featureDetect:!0});function l(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function A(u){var h=Math.round(Math.log(Math.abs(u))/Math.log(10));if(h<0){var o=Math.round(Math.pow(10,-h));return Math.ceil(u*o)/o}return h>0?(o=Math.round(Math.pow(10,h)),Math.ceil(u/o)*o):Math.ceil(u)}function T(u){return"boolean"!=typeof u||u}c.exports={createScene:function M(u){(u=u||{}).camera=u.camera||{};var h=u.canvas;h||(h=document.createElement("canvas"),u.container?u.container.appendChild(h):document.body.appendChild(h));var C=u.gl;if(C||(u.glOptions&&(w=!!u.glOptions.preserveDrawingBuffer),C=function y(u,h){var o=null;try{(o=u.getContext("webgl",h))||(o=u.getContext("experimental-webgl",h))}catch(C){return null}return o}(h,u.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:w})),!C)throw new Error("webgl not supported");var R=u.bounds||[[-10,-10,-10],[10,10,10]],z=new l,O=g(C,C.drawingBufferWidth,C.drawingBufferHeight,{preferFloat:!w}),I=p(C),F=u.cameraObject&&!0===u.cameraObject._ortho||u.camera.projection&&"orthographic"===u.camera.projection.type||!1,D={eye:u.camera.eye||[2,0,0],center:u.camera.center||[0,0,0],up:u.camera.up||[0,1,0],zoomMin:u.camera.zoomMax||.1,zoomMax:u.camera.zoomMin||100,mode:u.camera.mode||"turntable",_ortho:F},N=u.axes||{},U=t(C,N);U.enable=!N.disable;var oe=a(C,u.spikes||{}),se=[],ne=[],W=[],G=[],$=!0,K=!0,q={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},Y=(K=!0,[C.drawingBufferWidth,C.drawingBufferHeight]),te=u.cameraObject||n(h,D),J={gl:C,contextLost:!1,pixelRatio:u.pixelRatio||1,canvas:h,selection:z,camera:te,axes:U,axesPixels:null,spikes:oe,bounds:R,objects:se,shape:Y,aspect:u.aspectRatio||[1,1,1],pickRadius:u.pickRadius||10,zNear:u.zNear||.01,zFar:u.zFar||1e3,fovy:u.fovy||Math.PI/4,clearColor:u.clearColor||[0,0,0,0],autoResize:T(u.autoResize),autoBounds:T(u.autoBounds),autoScale:!!u.autoScale,autoCenter:T(u.autoCenter),clipToBounds:T(u.clipToBounds),snapToData:!!u.snapToData,onselect:u.onselect||null,onrender:u.onrender||null,onclick:u.onclick||null,cameraParams:q,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(be){this.aspect[0]=be.x,this.aspect[1]=be.y,this.aspect[2]=be.z,K=!0},setBounds:function(be,Le){this.bounds[0][be]=Le.min,this.bounds[1][be]=Le.max},setClearColor:function(be){this.clearColor=be},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},j=[C.drawingBufferWidth/J.pixelRatio|0,C.drawingBufferHeight/J.pixelRatio|0];function re(){if(!J._stopped&&J.autoResize){var be=h.parentNode,Le=1,De=1;be&&be!==document.body?(Le=be.clientWidth,De=be.clientHeight):(Le=window.innerWidth,De=window.innerHeight);var ye=0|Math.ceil(Le*J.pixelRatio),Ce=0|Math.ceil(De*J.pixelRatio);if(ye!==h.width||Ce!==h.height){h.width=ye,h.height=Ce;var Fe=h.style;Fe.position=Fe.position||"absolute",Fe.left="0px",Fe.top="0px",Fe.width=Le+"px",Fe.height=De+"px",$=!0}}}function le(){for(var be=se.length,Le=G.length,De=0;De<Le;++De)W[De]=0;e:for(De=0;De<be;++De){var ye=se[De],Ce=ye.pickSlots;if(Ce){for(var Fe=0;Fe<Le;++Fe)if(W[Fe]+Ce<255){ne[De]=Fe,ye.setPickBase(W[Fe]+1),W[Fe]+=Ce;continue e}var Ke=r(C,Y);ne[De]=Le,G.push(Ke),W.push(Ce),ye.setPickBase(1),Le+=1}else ne[De]=-1}for(;Le>0&&0===W[Le-1];)W.pop(),G.pop().dispose()}function ge(){if(J.contextLost)return!0;C.isContextLost()&&(J.contextLost=!0,J.mouseListener.enabled=!1,J.selection.object=null,J.oncontextloss&&J.oncontextloss())}J.autoResize&&re(),window.addEventListener("resize",re),J.update=function(be){J._stopped||(be=be||{},$=!0,K=!0)},J.add=function(be){J._stopped||(be.axes=U,se.push(be),ne.push(-1),$=!0,K=!0,le())},J.remove=function(be){if(!J._stopped){var Le=se.indexOf(be);Le<0||(se.splice(Le,1),ne.pop(),$=!0,K=!0,le())}},J.dispose=function(){if(!J._stopped&&(J._stopped=!0,window.removeEventListener("resize",re),h.removeEventListener("webglcontextlost",ge),J.mouseListener.enabled=!1,!J.contextLost)){U.dispose(),oe.dispose();for(var be=0;be<se.length;++be)se[be].dispose();for(O.dispose(),be=0;be<G.length;++be)G[be].dispose();I.dispose(),C=null,U=null,oe=null,se=[]}},J._mouseRotating=!1,J._prevButtons=0,J.enableMouseListeners=function(){J.mouseListener=b(h,function(be,Le,De){if(!J._stopped){var ye=G.length,Ce=se.length,Fe=z.object;z.distance=1/0,z.mouse[0]=Le,z.mouse[1]=De,z.object=null,z.screen=null,z.dataCoordinate=z.dataPosition=null;var Ke=!1;if(be&&J._prevButtons)J._mouseRotating=!0;else{J._mouseRotating&&(K=!0),J._mouseRotating=!1;for(var Ue=0;Ue<ye;++Ue){var Be=G[Ue].query(Le,j[1]-De-1,J.pickRadius);if(Be){if(Be.distance>z.distance)continue;for(var Ie=0;Ie<Ce;++Ie){var nt=se[Ie];if(ne[Ie]===Ue){var gt=nt.pick(Be);gt&&(z.buttons=be,z.screen=Be.coord,z.distance=Be.distance,z.object=nt,z.index=gt.distance,z.dataPosition=gt.position,z.dataCoordinate=gt.dataCoordinate,z.data=gt,Ke=!0)}}}}}Fe&&Fe!==z.object&&(Fe.highlight&&Fe.highlight(null),$=!0),z.object&&(z.object.highlight&&z.object.highlight(z.data),$=!0),(Ke=Ke||z.object!==Fe)&&J.onselect&&J.onselect(z),1&be&&!(1&J._prevButtons)&&J.onclick&&J.onclick(z),J._prevButtons=be}})},h.addEventListener("webglcontextlost",ge);var xe=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],ke=[xe[0].slice(),xe[1].slice()];function we(){if(!ge()){re();var be=J.camera.tick();q.view=J.camera.matrix,$=$||be,K=K||be,U.pixelRatio=J.pixelRatio,oe.pixelRatio=J.pixelRatio;var Le=se.length,De=xe[0],ye=xe[1];De[0]=De[1]=De[2]=1/0,ye[0]=ye[1]=ye[2]=-1/0;for(var Ce=0;Ce<Le;++Ce){(Fe=se[Ce]).pixelRatio=J.pixelRatio,Fe.axes=J.axes,$=$||!!Fe.dirty,K=K||!!Fe.dirty;var Ke=Fe.bounds;if(Ke)for(var Ue=Ke[0],Be=Ke[1],Ie=0;Ie<3;++Ie)De[Ie]=Math.min(De[Ie],Ue[Ie]),ye[Ie]=Math.max(ye[Ie],Be[Ie])}var nt=J.bounds;if(J.autoBounds)for(Ie=0;Ie<3;++Ie){if(ye[Ie]<De[Ie])De[Ie]=-1,ye[Ie]=1;else{De[Ie]===ye[Ie]&&(De[Ie]-=1,ye[Ie]+=1);var gt=.05*(ye[Ie]-De[Ie]);De[Ie]=De[Ie]-gt,ye[Ie]=ye[Ie]+gt}nt[0][Ie]=De[Ie],nt[1][Ie]=ye[Ie]}var Nt=!1;for(Ie=0;Ie<3;++Ie)Nt=Nt||ke[0][Ie]!==nt[0][Ie]||ke[1][Ie]!==nt[1][Ie],ke[0][Ie]=nt[0][Ie],ke[1][Ie]=nt[1][Ie];if(K=K||Nt,$=$||Nt){if(Nt){var St=[0,0,0];for(Ce=0;Ce<3;++Ce)St[Ce]=A((nt[1][Ce]-nt[0][Ce])/10);U.update(U.autoTicks?{bounds:nt,tickSpacing:St}:{bounds:nt})}var Bt=C.drawingBufferWidth,Zt=C.drawingBufferHeight;for(Y[0]=Bt,Y[1]=Zt,j[0]=0|Math.max(Bt/J.pixelRatio,1),j[1]=0|Math.max(Zt/J.pixelRatio,1),function f(u,h){var o=u.bounds,C=u.cameraParams,R=C.projection,z=C.model,F=u.zNear,D=u.zFar,N=u.fovy,U=u.gl.drawingBufferWidth/u.gl.drawingBufferHeight;h?(S(R,-U,U,-1,1,F,D),C._ortho=!0):(x(R,N,U,F,D),C._ortho=!1);for(var X=0;X<16;++X)z[X]=0;z[15]=1;var oe=0;for(X=0;X<3;++X)oe=Math.max(oe,o[1][X]-o[0][X]);for(X=0;X<3;++X)z[5*X]=u.autoScale?u.aspect[X]/(o[1][X]-o[0][X]):1/oe,u.autoCenter&&(z[12+X]=.5*-z[5*X]*(o[0][X]+o[1][X]))}(J,F),Ce=0;Ce<Le;++Ce)(Fe=se[Ce]).axesBounds=nt,J.clipToBounds&&(Fe.clipBounds=nt);z.object&&(oe.position=J.snapToData?z.dataCoordinate:z.dataPosition,oe.bounds=nt),K&&(K=!1,function pe(){if(!ge()){C.colorMask(!0,!0,!0,!0),C.depthMask(!0),C.disable(C.BLEND),C.enable(C.DEPTH_TEST),C.depthFunc(C.LEQUAL);for(var be=se.length,Le=G.length,De=0;De<Le;++De){var ye=G[De];ye.shape=j,ye.begin();for(var Ce=0;Ce<be;++Ce)if(ne[Ce]===De){var Fe=se[Ce];Fe.drawPick&&(Fe.pixelRatio=1,Fe.drawPick(q))}ye.end()}}}()),J.axesPixels=i(J.axes,q,Bt,Zt),J.onrender&&J.onrender(),C.bindFramebuffer(C.FRAMEBUFFER,null),C.viewport(0,0,Bt,Zt),J.clearRGBA(),C.depthMask(!0),C.colorMask(!0,!0,!0,!0),C.enable(C.DEPTH_TEST),C.depthFunc(C.LEQUAL),C.disable(C.BLEND),C.disable(C.CULL_FACE);var Et=!1;for(U.enable&&(Et=Et||U.isTransparent(),U.draw(q)),oe.axes=U,z.object&&oe.draw(q),C.disable(C.CULL_FACE),Ce=0;Ce<Le;++Ce)(Fe=se[Ce]).axes=U,Fe.pixelRatio=J.pixelRatio,Fe.isOpaque&&Fe.isOpaque()&&Fe.draw(q),Fe.isTransparent&&Fe.isTransparent()&&(Et=!0);if(Et){for(O.shape=Y,O.bind(),C.clear(C.DEPTH_BUFFER_BIT),C.colorMask(!1,!1,!1,!1),C.depthMask(!0),C.depthFunc(C.LESS),U.enable&&U.isTransparent()&&U.drawTransparent(q),Ce=0;Ce<Le;++Ce)(Fe=se[Ce]).isOpaque&&Fe.isOpaque()&&Fe.draw(q);for(C.enable(C.BLEND),C.blendEquation(C.FUNC_ADD),C.blendFunc(C.ONE,C.ONE_MINUS_SRC_ALPHA),C.colorMask(!0,!0,!0,!0),C.depthMask(!1),C.clearColor(0,0,0,0),C.clear(C.COLOR_BUFFER_BIT),U.isTransparent()&&U.drawTransparent(q),Ce=0;Ce<Le;++Ce){var Fe;(Fe=se[Ce]).isTransparent&&Fe.isTransparent()&&Fe.drawTransparent(q)}C.bindFramebuffer(C.FRAMEBUFFER,null),C.blendFunc(C.ONE,C.ONE_MINUS_SRC_ALPHA),C.disable(C.DEPTH_TEST),I.bind(),O.color[0].bind(0),I.uniforms.accumBuffer=0,s(C),C.disable(C.BLEND)}for($=!1,Ce=0;Ce<Le;++Ce)se[Ce].dirty=!1}}}return J.enableMouseListeners(),function de(){J._stopped||J.contextLost||(we(),requestAnimationFrame(de))}(),J.redraw=function(){J._stopped||($=!0,we())},J},createCamera:n}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(e,c,d){var n=e("glslify");d.pointVertex=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),d.pointFragment=n(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),d.pickVertex=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),d.pickFragment=n(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},{glslify:231}],123:[function(e,c,d){"use strict";var n=e("gl-shader"),t=e("gl-buffer"),i=e("typedarray-pool"),a=e("./lib/shader");function r(x,S,p,w,l){this.plot=x,this.offsetBuffer=S,this.pickBuffer=p,this.shader=w,this.pickShader=l,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}c.exports=function b(x,S){var p=x.gl,T=new r(x,t(p),t(p),n(p,a.pointVertex,a.pointFragment),n(p,a.pickVertex,a.pickFragment));return T.update(S),x.addObject(T),T};var x,S,g=r.prototype;g.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},g.update=function(x){var S;function p(f,u){return f in x?x[f]:u}x=x||{},this.sizeMin=p("sizeMin",.5),this.sizeMax=p("sizeMax",20),this.color=p("color",[1,0,0,1]).slice(),this.areaRatio=p("areaRatio",1),this.borderColor=p("borderColor",[0,0,0,1]).slice(),this.blend=p("blend",!1);var w=x.positions.length>>>1,l=x.positions instanceof Float32Array,y=x.idToIndex instanceof Int32Array&&x.idToIndex.length>=w,A=x.positions,T=l?A:i.mallocFloat32(A.length),M=y?x.idToIndex:i.mallocInt32(w);if(l||T.set(A),!y)for(T.set(A),S=0;S<w;S++)M[S]=S;this.points=A,this.offsetBuffer.update(T),this.pickBuffer.update(M),l||i.free(T),y||i.free(M),this.pointCount=w,this.pickOffset=0},g.unifiedDraw=(x=[1,0,0,0,1,0,0,0,1],S=[0,0,0,0],function(p){var w=void 0!==p,l=w?this.pickShader:this.shader,y=this.plot.gl,A=this.plot.dataBox;if(0===this.pointCount)return p;var T=A[2]-A[0],M=A[3]-A[1],f=function s(x,S){var l,p=0,w=x.length>>>1;for(l=0;l<w;l++){var y=x[2*l],A=x[2*l+1];y>=S[0]&&y<=S[2]&&A>=S[1]&&A<=S[3]&&p++}return p}(this.points,A),u=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(f,.33333)));x[0]=2/T,x[4]=2/M,x[6]=-2*A[0]/T-1,x[7]=-2*A[1]/M-1,this.offsetBuffer.bind(),l.bind(),l.attributes.position.pointer(),l.uniforms.matrix=x,l.uniforms.color=this.color,l.uniforms.borderColor=this.borderColor,l.uniforms.pointCloud=u<5,l.uniforms.pointSize=u,l.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),w&&(S[0]=255&p,S[1]=p>>8&255,S[2]=p>>16&255,S[3]=p>>24&255,this.pickBuffer.bind(),l.attributes.pickId.pointer(y.UNSIGNED_BYTE),l.uniforms.pickOffset=S,this.pickOffset=p);var h=y.getParameter(y.BLEND),o=y.getParameter(y.DITHER);return h&&!this.blend&&y.disable(y.BLEND),o&&y.disable(y.DITHER),y.drawArrays(y.POINTS,0,this.pointCount),h&&!this.blend&&y.enable(y.BLEND),o&&y.enable(y.DITHER),p+this.pointCount}),g.draw=g.unifiedDraw,g.drawPick=g.unifiedDraw,g.pick=function(x,S,p){var w=this.pickOffset;if(p<w||p>=w+this.pointCount)return null;var y=p-w,A=this.points;return{object:this,pointId:y,dataCoord:[A[2*y],A[2*y+1]]}}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(e,c,d){c.exports=function n(t,i,a,r){var y,A,T,M,f,g=i[0],s=i[1],b=i[2],x=i[3],S=a[0],p=a[1],w=a[2],l=a[3];return(A=g*S+s*p+b*w+x*l)<0&&(A=-A,S=-S,p=-p,w=-w,l=-l),1-A>1e-6?(y=Math.acos(A),T=Math.sin(y),M=Math.sin((1-r)*y)/T,f=Math.sin(r*y)/T):(M=1-r,f=r),t[0]=M*g+f*S,t[1]=M*s+f*p,t[2]=M*b+f*w,t[3]=M*x+f*l,t}},{}],125:[function(e,c,d){"use strict";c.exports=function(n){return n||0===n?n.toString():""}},{}],126:[function(e,c,d){"use strict";var n=e("vectorize-text");c.exports=function i(a,r,g){var s=t[r];if(s||(s=t[r]={}),a in s)return s[a];var b={textAlign:"center",textBaseline:"middle",lineHeight:1,font:r,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},x=n(a,b);b.triangles=!1;var p,w,S=n(a,b);if(g&&1!==g){for(p=0;p<x.positions.length;++p)for(w=0;w<x.positions[p].length;++w)x.positions[p][w]/=g;for(p=0;p<S.positions.length;++p)for(w=0;w<S.positions[p].length;++w)S.positions[p][w]/=g}var l=[[1/0,1/0],[-1/0,-1/0]],y=S.positions.length;for(p=0;p<y;++p){var A=S.positions[p];for(w=0;w<2;++w)l[0][w]=Math.min(l[0][w],A[w]),l[1][w]=Math.max(l[1][w],A[w])}return s[a]=[x,S,l]};var t={}},{"vectorize-text":311}],127:[function(e,c,d){var n=e("gl-shader"),t=e("glslify"),i=t(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),a=t(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),r=t(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),g=t(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),s=t(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),b=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],x={vertex:i,fragment:g,attributes:b},S={vertex:a,fragment:g,attributes:b},p={vertex:r,fragment:g,attributes:b},w={vertex:i,fragment:s,attributes:b},l={vertex:a,fragment:s,attributes:b},y={vertex:r,fragment:s,attributes:b};function A(T,M){var f=n(T,M),u=f.attributes;return u.position.location=0,u.color.location=1,u.glyph.location=2,u.id.location=3,f}d.createPerspective=function(T){return A(T,x)},d.createOrtho=function(T){return A(T,S)},d.createProject=function(T){return A(T,p)},d.createPickPerspective=function(T){return A(T,w)},d.createPickOrtho=function(T){return A(T,l)},d.createPickProject=function(T){return A(T,y)}},{"gl-shader":132,glslify:231}],128:[function(e,c,d){"use strict";var n=e("is-string-blank"),t=e("gl-buffer"),i=e("gl-vao"),a=e("typedarray-pool"),r=e("gl-mat4/multiply"),g=e("./lib/shaders"),s=e("./lib/glyphs"),b=e("./lib/get-simple-string"),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function S(W,G){var $=W[0],V=W[1],H=W[2],q=W[3];return W[0]=G[0]*$+G[4]*V+G[8]*H+G[12]*q,W[1]=G[1]*$+G[5]*V+G[9]*H+G[13]*q,W[2]=G[2]*$+G[6]*V+G[10]*H+G[14]*q,W[3]=G[3]*$+G[7]*V+G[11]*H+G[15]*q,W}function p(W,G,$,V){return S(V,V),S(V,V),S(V,V)}function w(W,G){this.index=W,this.dataCoordinate=this.position=G}function l(W){return!0===W||W>1?1:W}function y(W,G,$,V,H,q,K,Y,te,J,j,re){this.gl=W,this.pixelRatio=1,this.shader=G,this.orthoShader=$,this.projectShader=V,this.pointBuffer=H,this.colorBuffer=q,this.glyphBuffer=K,this.idBuffer=Y,this.vao=te,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=J,this.pickOrthoShader=j,this.pickProjectShader=re,this.points=[],this._selectResult=new w(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}c.exports=function ne(W){var G=W.gl,$=g.createPerspective(G),V=g.createOrtho(G),H=g.createProject(G),q=g.createPickPerspective(G),K=g.createPickOrtho(G),Y=g.createPickProject(G),te=t(G),J=t(G),j=t(G),re=t(G),ge=new y(G,$,V,H,te,J,j,re,i(G,[{buffer:te,size:3,type:G.FLOAT},{buffer:J,size:4,type:G.FLOAT},{buffer:j,size:2,type:G.FLOAT},{buffer:re,size:4,type:G.UNSIGNED_BYTE,normalized:!0}]),q,K,Y);return ge.update(W),ge};var A=y.prototype;A.pickSlots=1,A.setPickBase=function(W){this.pickId=W},A.isTransparent=function(){if(this.hasAlpha)return!0;for(var W=0;W<3;++W)if(this.axesProject[W]&&this.projectHasAlpha)return!0;return!1},A.isOpaque=function(){if(!this.hasAlpha)return!0;for(var W=0;W<3;++W)if(this.axesProject[W]&&!this.projectHasAlpha)return!0;return!1};var T=[0,0],M=[0,0,0],f=[0,0,0],u=[0,0,0,1],h=[0,0,0,1],o=x.slice(),C=[0,0,0],R=[[0,0,0],[0,0,0]];function z(W){return W[0]=W[1]=W[2]=0,W}function O(W,G){return W[0]=G[0],W[1]=G[1],W[2]=G[2],W[3]=1,W}function I(W,G,$,V){return W[0]=G[0],W[1]=G[1],W[2]=G[2],W[$]=V,W}function D(W,G,$,V){var le,H=G.axesProject,q=G.gl,K=W.uniforms,Y=$.model||x,te=$.view||x,J=$.projection||x,j=G.axesBounds,re=function F(W){for(var G=R,$=0;$<2;++$)for(var V=0;V<3;++V)G[$][V]=Math.max(Math.min(W[$][V],1e8),-1e8);return G}(G.clipBounds);le=G.axes&&G.axes.lastCubeProps?G.axes.lastCubeProps.axis:[1,1,1],T[0]=2/q.drawingBufferWidth,T[1]=2/q.drawingBufferHeight,W.bind(),K.view=te,K.projection=J,K.screenSize=T,K.highlightId=G.highlightId,K.highlightScale=G.highlightScale,K.clipBounds=re,K.pickGroup=G.pickId/255,K.pixelRatio=V;for(var ge=0;ge<3;++ge)if(H[ge]){K.scale=G.projectScale[ge],K.opacity=G.projectOpacity[ge];for(var pe=o,xe=0;xe<16;++xe)pe[xe]=0;for(xe=0;xe<4;++xe)pe[5*xe]=1;pe[5*ge]=0,pe[12+ge]=le[ge]<0?j[0][ge]:j[1][ge],r(pe,Y,pe),K.model=pe;var ke=(ge+1)%3,we=(ge+2)%3,de=z(M),be=z(f);de[ke]=1,be[we]=1;var Le=p(0,0,0,O(u,de)),De=p(0,0,0,O(h,be));if(Math.abs(Le[1])>Math.abs(De[1])){var ye=Le;Le=De,De=ye,ye=de,de=be,be=ye;var Ce=ke;ke=we,we=Ce}Le[0]<0&&(de[ke]=-1),De[1]>0&&(be[we]=-1);var Fe=0,Ke=0;for(xe=0;xe<4;++xe)Fe+=Math.pow(Y[4*ke+xe],2),Ke+=Math.pow(Y[4*we+xe],2);de[ke]/=Math.sqrt(Fe),be[we]/=Math.sqrt(Ke),K.axes[0]=de,K.axes[1]=be,K.fragClipBounds[0]=I(C,re[0],ge,-1e8),K.fragClipBounds[1]=I(C,re[1],ge,1e8),G.vao.bind(),G.vao.draw(q.TRIANGLES,G.vertexCount),G.lineWidth>0&&(q.lineWidth(G.lineWidth*V),G.vao.draw(q.LINES,G.lineVertexCount,G.vertexCount)),G.vao.unbind()}}var X=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function oe(W,G,$,V,H,q,K){var Y=$.gl;if((q===$.projectHasAlpha||K)&&D(G,$,V,H),q===$.hasAlpha||K){W.bind();var te=W.uniforms;te.model=V.model||x,te.view=V.view||x,te.projection=V.projection||x,T[0]=2/Y.drawingBufferWidth,T[1]=2/Y.drawingBufferHeight,te.screenSize=T,te.highlightId=$.highlightId,te.highlightScale=$.highlightScale,te.fragClipBounds=X,te.clipBounds=$.axes.bounds,te.opacity=$.opacity,te.pickGroup=$.pickId/255,te.pixelRatio=H,$.vao.bind(),$.vao.draw(Y.TRIANGLES,$.vertexCount),$.lineWidth>0&&(Y.lineWidth($.lineWidth*H),$.vao.draw(Y.LINES,$.lineVertexCount,$.vertexCount)),$.vao.unbind()}}function se(W,G,$,V){var H;H=Array.isArray(W)?G<W.length?W[G]:void 0:W,H=b(H);var q=!0;n(H)&&(H="\u25bc",q=!1);var K=s(H,$,V);return{mesh:K[0],lines:K[1],bounds:K[2],visible:q}}A.draw=function(W){oe(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,W,this.pixelRatio,!1,!1)},A.drawTransparent=function(W){oe(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,W,this.pixelRatio,!0,!1)},A.drawPick=function(W){oe(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,W,1,!0,!0)},A.pick=function(W){if(!W||W.id!==this.pickId)return null;var G=W.value[2]+(W.value[1]<<8)+(W.value[0]<<16);if(G>=this.pointCount||G<0)return null;var $=this.points[G],V=this._selectResult;V.index=G;for(var H=0;H<3;++H)V.position[H]=V.dataCoordinate[H]=$[H];return V},A.highlight=function(W){if(W){var G=W.index;this.highlightId=[(255&G)/255,(G>>8&255)/255,(G>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},A.update=function(W){if("perspective"in(W=W||{})&&(this.useOrtho=!W.perspective),"orthographic"in W&&(this.useOrtho=!!W.orthographic),"lineWidth"in W&&(this.lineWidth=W.lineWidth),"project"in W)if(Array.isArray(W.project))this.axesProject=W.project;else{var G=!!W.project;this.axesProject=[G,G,G]}if("projectScale"in W&&(this.projectScale=Array.isArray(W.projectScale)?W.projectScale.slice():[$=+W.projectScale,$,$]),this.projectHasAlpha=!1,"projectOpacity"in W){var $;this.projectOpacity=Array.isArray(W.projectOpacity)?W.projectOpacity.slice():[$=+W.projectOpacity,$,$];for(var V=0;V<3;++V)this.projectOpacity[V]=l(this.projectOpacity[V]),this.projectOpacity[V]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in W&&(this.opacity=l(W.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var Y,te,H=W.position,q=W.font||"normal",K=W.alignment||[0,0];if(2===K.length)Y=K[0],te=K[1];else for(Y=[],te=[],V=0;V<K.length;++V)Y[V]=K[V][0],te[V]=K[V][1];var J=[1/0,1/0,1/0],j=[-1/0,-1/0,-1/0],re=W.glyph,le=W.color,ge=W.size,pe=W.angle,xe=W.lineColor,ke=-1,we=0,de=0,be=0;if(H.length){be=H.length;e:for(V=0;V<be;++V){for(var Le=H[V],De=0;De<3;++De)if(isNaN(Le[De])||!isFinite(Le[De]))continue e;var Ke=(ye=se(re,V,q,this.pixelRatio)).bounds;we+=3*(Ce=ye.mesh).cells.length,de+=2*(Fe=ye.lines).edges.length}}var Ue=we+de,Be=a.mallocFloat(3*Ue),Ie=a.mallocFloat(4*Ue),nt=a.mallocFloat(2*Ue),gt=a.mallocUint32(Ue);if(Ue>0){var Nt=0,St=we,Bt=[0,0,0,1],Zt=[0,0,0,1],Et=Array.isArray(le)&&Array.isArray(le[0]),wt=Array.isArray(xe)&&Array.isArray(xe[0]);e:for(V=0;V<be;++V){for(ke+=1,Le=H[V],De=0;De<3;++De){if(isNaN(Le[De])||!isFinite(Le[De]))continue e;j[De]=Math.max(j[De],Le[De]),J[De]=Math.min(J[De],Le[De])}var ye,Ce=(ye=se(re,V,q,this.pixelRatio)).mesh,Fe=ye.lines,at=(Ke=ye.bounds,ye.visible);if(at)if(Array.isArray(le)){if(3===(vt=Et?V<le.length?le[V]:[0,0,0,0]:le).length){for(De=0;De<3;++De)Bt[De]=vt[De];Bt[3]=1}else if(4===vt.length){for(De=0;De<4;++De)Bt[De]=vt[De];!this.hasAlpha&&vt[3]<1&&(this.hasAlpha=!0)}}else Bt[0]=Bt[1]=Bt[2]=0,Bt[3]=1;else Bt=[1,1,1,0];if(at)if(Array.isArray(xe)){var vt;if(3===(vt=wt?V<xe.length?xe[V]:[0,0,0,0]:xe).length){for(De=0;De<3;++De)Zt[De]=vt[De];Zt[De]=1}else if(4===vt.length){for(De=0;De<4;++De)Zt[De]=vt[De];!this.hasAlpha&&vt[3]<1&&(this.hasAlpha=!0)}}else Zt[0]=Zt[1]=Zt[2]=0,Zt[3]=1;else Zt=[1,1,1,0];var Qe=.5;at?Array.isArray(ge)?Qe=V<ge.length?+ge[V]:12:ge?Qe=+ge:this.useOrtho&&(Qe=12):Qe=0;var Pe=0;Array.isArray(pe)?Pe=V<pe.length?+pe[V]:0:pe&&(Pe=+pe);var Ze=Math.cos(Pe),Xe=Math.sin(Pe);for(Le=H[V],De=0;De<3;++De)j[De]=Math.max(j[De],Le[De]),J[De]=Math.min(J[De],Le[De]);var rt=Y,kt=te;rt=0,Array.isArray(Y)?rt=V<Y.length?Y[V]:0:Y&&(rt=Y),kt=0,Array.isArray(te)?kt=V<te.length?te[V]:0:te&&(kt=te);var Tt=[rt*=rt>0?1-Ke[0][0]:rt<0?1+Ke[1][0]:1,kt*=kt>0?1-Ke[0][1]:kt<0?1+Ke[1][1]:1],nr=Ce.cells||[],rr=Ce.positions||[];for(De=0;De<nr.length;++De)for(var Xt=nr[De],ar=0;ar<3;++ar){for(var Ut=0;Ut<3;++Ut)Be[3*Nt+Ut]=Le[Ut];for(Ut=0;Ut<4;++Ut)Ie[4*Nt+Ut]=Bt[Ut];gt[Nt]=ke,nt[2*Nt]=Qe*(Ze*(Jt=rr[Xt[ar]])[0]-Xe*Jt[1]+Tt[0]),nt[2*Nt+1]=Qe*(Xe*Jt[0]+Ze*Jt[1]+Tt[1]),Nt+=1}for(nr=Fe.edges,rr=Fe.positions,De=0;De<nr.length;++De)for(Xt=nr[De],ar=0;ar<2;++ar){for(Ut=0;Ut<3;++Ut)Be[3*St+Ut]=Le[Ut];for(Ut=0;Ut<4;++Ut)Ie[4*St+Ut]=Zt[Ut];var Jt;gt[St]=ke,nt[2*St]=Qe*(Ze*(Jt=rr[Xt[ar]])[0]-Xe*Jt[1]+Tt[0]),nt[2*St+1]=Qe*(Xe*Jt[0]+Ze*Jt[1]+Tt[1]),St+=1}}}this.bounds=[J,j],this.points=H,this.pointCount=H.length,this.vertexCount=we,this.lineVertexCount=de,this.pointBuffer.update(Be),this.colorBuffer.update(Ie),this.glyphBuffer.update(nt),this.idBuffer.update(gt),a.free(Be),a.free(Ie),a.free(nt),a.free(gt)},A.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(e,c,d){"use strict";var n=e("glslify");d.boxVertex=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),d.boxFragment=n(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},{glslify:231}],130:[function(e,c,d){"use strict";var n=e("gl-shader"),t=e("gl-buffer"),i=e("./lib/shaders");function a(s,b,x){this.plot=s,this.boxBuffer=b,this.boxShader=x,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}c.exports=function g(s,b){var x=s.gl,w=new a(s,t(x,[0,0,0,1,1,0,1,1]),n(x,i.boxVertex,i.boxFragment));return w.update(b),s.addOverlay(w),w};var r=a.prototype;r.draw=function(){if(this.enabled){var s=this.plot,b=this.selectBox,x=this.borderWidth,p=this.innerColor,l=this.outerColor,y=this.borderColor,A=s.box,T=s.screenBox,M=s.dataBox,f=s.viewBox,u=s.pixelRatio,h=(b[0]-M[0])*(f[2]-f[0])/(M[2]-M[0])+f[0],o=(b[1]-M[1])*(f[3]-f[1])/(M[3]-M[1])+f[1],C=(b[2]-M[0])*(f[2]-f[0])/(M[2]-M[0])+f[0],R=(b[3]-M[1])*(f[3]-f[1])/(M[3]-M[1])+f[1];if(h=Math.max(h,f[0]),o=Math.max(o,f[1]),C=Math.min(C,f[2]),R=Math.min(R,f[3]),!(C<h||R<o)){A.bind();var z=T[2]-T[0],O=T[3]-T[1];if(this.outerFill&&(A.drawBox(0,0,z,o,l),A.drawBox(0,o,h,R,l),A.drawBox(0,R,z,O,l),A.drawBox(C,o,z,R,l)),this.innerFill&&A.drawBox(h,o,C,R,p),x>0){var I=x*u;A.drawBox(h-I,o-I,C+I,o+I,y),A.drawBox(h-I,R-I,C+I,R+I,y),A.drawBox(h-I,o-I,h+I,R+I,y),A.drawBox(C-I,o-I,C+I,R+I,y)}}}},r.update=function(s){this.innerFill=!!(s=s||{}).innerFill,this.outerFill=!!s.outerFill,this.innerColor=(s.innerColor||[0,0,0,.5]).slice(),this.outerColor=(s.outerColor||[0,0,0,.5]).slice(),this.borderColor=(s.borderColor||[0,0,0,1]).slice(),this.borderWidth=s.borderWidth||0,this.selectBox=(s.selectBox||this.selectBox).slice()},r.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(e,c,d){"use strict";c.exports=function x(S,p){var w=p[0],l=p[1];return new s(S,n(S,w,l,{}),t.mallocUint8(w*l*4))};var n=e("gl-fbo"),t=e("typedarray-pool"),i=e("ndarray"),a=e("bit-twiddle").nextPow2;function g(S,p,w,l,y){this.coord=[S,p],this.id=w,this.value=l,this.distance=y}function s(S,p,w){this.gl=S,this.fbo=p,this.buffer=w,this._readTimeout=null;var l=this;this._readCallback=function(){!l.gl||(p.bind(),S.readPixels(0,0,p.shape[0],p.shape[1],S.RGBA,S.UNSIGNED_BYTE,l.buffer),l._readTimeout=null)}}var b=s.prototype;Object.defineProperty(b,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(S){if(this.gl){this.fbo.shape=S;var p=this.fbo.shape[0],w=this.fbo.shape[1];if(w*p*4>this.buffer.length){t.free(this.buffer);for(var l=this.buffer=t.mallocUint8(a(w*p*4)),y=0;y<w*p*4;++y)l[y]=255}return S}}}),b.begin=function(){var S=this.gl;!S||(this.fbo.bind(),S.clearColor(1,1,1,1),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT))},b.end=function(){var S=this.gl;!S||(S.bindFramebuffer(S.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},b.query=function(S,p,w){if(!this.gl)return null;var l=this.fbo.shape.slice();S|=0,p|=0,"number"!=typeof w&&(w=1);var y=0|Math.min(Math.max(S-w,0),l[0]),A=0|Math.min(Math.max(S+w,0),l[0]),T=0|Math.min(Math.max(p-w,0),l[1]),M=0|Math.min(Math.max(p+w,0),l[1]);if(A<=y||M<=T)return null;var f=[A-y,M-T],u=i(this.buffer,[f[0],f[1],4],[4,4*l[0],1],4*(y+l[0]*T)),h=function(S,p,w){for(var l=1e8,y=-1,A=-1,T=S.shape[0],M=S.shape[1],f=0;f<T;f++)for(var u=0;u<M;u++){var h=S.get(f,u,0),o=S.get(f,u,1),C=S.get(f,u,2),R=S.get(f,u,3);if(h<255||o<255||C<255||R<255){var z=p-f,O=w-u,I=z*z+O*O;I<l&&(l=I,y=f,A=u)}}return[y,A,l]}(u.hi(f[0],f[1],1),w,w),o=h[0],C=h[1];return o<0||Math.pow(this.radius,2)<h[2]?null:new g(o+y|0,C+T|0,u.get(o,C,0),[u.get(o,C,1),u.get(o,C,2),u.get(o,C,3)],Math.sqrt(h[2]))},b.dispose=function(){!this.gl||(this.fbo.dispose(),t.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(e,c,d){"use strict";var n=e("./lib/create-uniforms"),t=e("./lib/create-attributes"),i=e("./lib/reflect"),a=e("./lib/shader-cache"),r=e("./lib/runtime-reflect"),g=e("./lib/GLError");function s(p){this.gl=p,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var b=s.prototype;function x(p,w){return p.name<w.name?-1:1}b.bind=function(){this.program||this._relink();var p,w=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),l=this.gl.lastAttribCount;if(w>l)for(p=l;p<w;p++)this.gl.enableVertexAttribArray(p);else if(l>w)for(p=w;p<l;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=w,this.gl.useProgram(this.program)},b.dispose=function(){for(var p=this.gl.lastAttribCount,w=0;w<p;w++)this.gl.disableVertexAttribArray(w);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},b.update=function(p,w,l,y){if(!w||1===arguments.length){var A=p;p=A.vertex,w=A.fragment,l=A.uniforms,y=A.attributes}var T=this,M=T.gl,f=T._vref;T._vref=a.shader(M,M.VERTEX_SHADER,p),f&&f.dispose(),T.vertShader=T._vref.shader;var u=this._fref;if(T._fref=a.shader(M,M.FRAGMENT_SHADER,w),u&&u.dispose(),T.fragShader=T._fref.shader,!l||!y){var h=M.createProgram();if(M.attachShader(h,T.fragShader),M.attachShader(h,T.vertShader),M.linkProgram(h),!M.getProgramParameter(h,M.LINK_STATUS)){var o=M.getProgramInfoLog(h);throw new g(o,"Error linking program:"+o)}l=l||r.uniforms(M,h),y=y||r.attributes(M,h),M.deleteProgram(h)}(y=y.slice()).sort(x);var O,C=[],R=[],z=[];for(O=0;O<y.length;++O){var I=y[O];if(I.type.indexOf("mat")>=0){for(var F=0|I.type.charAt(I.type.length-1),D=new Array(F),N=0;N<F;++N)D[N]=z.length,R.push(I.name+"["+N+"]"),"number"==typeof I.location?z.push(I.location+N):Array.isArray(I.location)&&I.location.length===F&&"number"==typeof I.location[N]?z.push(0|I.location[N]):z.push(-1);C.push({name:I.name,type:I.type,locations:D})}else C.push({name:I.name,type:I.type,locations:[z.length]}),R.push(I.name),z.push("number"==typeof I.location?0|I.location:-1)}var U=0;for(O=0;O<z.length;++O)if(z[O]<0){for(;z.indexOf(U)>=0;)U+=1;z[O]=U}var X=new Array(l.length);function oe(){T.program=a.program(M,T._vref,T._fref,R,z);for(var se=0;se<l.length;++se)X[se]=M.getUniformLocation(T.program,l[se].name)}oe(),T._relink=oe,T.types={uniforms:i(l),attributes:i(y)},T.attributes=t(M,T,C,z),Object.defineProperty(T,"uniforms",n(M,T,l,X))},c.exports=function S(p,w,l,y,A){var T=new s(p);return T.update(w,l,y,A),T}},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(e,c,d){function n(t,i,a){this.shortMessage=i||"",this.longMessage=a||"",this.rawError=t||"",this.message="gl-shader: "+(i||t||"")+(a?"\n"+a:""),this.stack=(new Error).stack}(n.prototype=new Error).name="GLError",n.prototype.constructor=n,c.exports=n},{}],134:[function(e,c,d){"use strict";c.exports=function s(b,x,S,p){for(var w={},l=0,y=S.length;l<y;++l){var A=S[l],T=A.name,M=A.type,f=A.locations;switch(M){case"bool":case"int":case"float":r(b,x,f[0],p,1,w,T);break;default:if(M.indexOf("vec")>=0){if((u=M.charCodeAt(M.length-1)-48)<2||u>4)throw new n("","Invalid data type for attribute "+T+": "+M);r(b,x,f[0],p,u,w,T)}else{if(!(M.indexOf("mat")>=0))throw new n("","Unknown data type for attribute "+T+": "+M);var u;if((u=M.charCodeAt(M.length-1)-48)<2||u>4)throw new n("","Invalid data type for attribute "+T+": "+M);g(b,x,f,p,u,w,T)}}}return w};var n=e("./GLError");function t(b,x,S,p,w,l){this._gl=b,this._wrapper=x,this._index=S,this._locations=p,this._dimension=w,this._constFunc=l}var i=t.prototype;i.pointer=function(x,S,p,w){var l=this,y=l._gl,A=l._locations[l._index];y.vertexAttribPointer(A,l._dimension,x||y.FLOAT,!!S,p||0,w||0),y.enableVertexAttribArray(A)},i.set=function(b,x,S,p){return this._constFunc(this._locations[this._index],b,x,S,p)},Object.defineProperty(i,"location",{get:function(){return this._locations[this._index]},set:function(b){return b!==this._locations[this._index]&&(this._locations[this._index]=0|b,this._wrapper.program=null),0|b}});var a=[function(b,x,S){return void 0===S.length?b.vertexAttrib1f(x,S):b.vertexAttrib1fv(x,S)},function(b,x,S,p){return void 0===S.length?b.vertexAttrib2f(x,S,p):b.vertexAttrib2fv(x,S)},function(b,x,S,p,w){return void 0===S.length?b.vertexAttrib3f(x,S,p,w):b.vertexAttrib3fv(x,S)},function(b,x,S,p,w,l){return void 0===S.length?b.vertexAttrib4f(x,S,p,w,l):b.vertexAttrib4fv(x,S)}];function r(b,x,S,p,w,l,y){var A=a[w],T=new t(b,x,S,p,w,A);Object.defineProperty(l,y,{set:function(M){return b.disableVertexAttribArray(p[S]),A(b,p[S],M),M},get:function(){return T},enumerable:!0})}function g(b,x,S,p,w,l,y){for(var A=new Array(w),T=new Array(w),M=0;M<w;++M)r(b,x,S[M],p,w,A,M),T[M]=A[M];Object.defineProperty(A,"location",{set:function(h){if(Array.isArray(h))for(var o=0;o<w;++o)T[o].location=h[o];else for(o=0;o<w;++o)T[o].location=h+o;return h},get:function(){for(var h=new Array(w),o=0;o<w;++o)h[o]=p[S[o]];return h},enumerable:!0}),A.pointer=function(h,o,C,R){h=h||b.FLOAT,o=!!o,C=C||w*w,R=R||0;for(var z=0;z<w;++z){var O=p[S[z]];b.vertexAttribPointer(O,w,h,o,C,R+z*w),b.enableVertexAttribArray(O)}};var f=new Array(w),u=b["vertexAttrib"+w+"fv"];Object.defineProperty(l,y,{set:function(h){for(var o=0;o<w;++o){var C=p[S[o]];if(b.disableVertexAttribArray(C),Array.isArray(h[0]))u.call(b,C,h[o]);else{for(var R=0;R<w;++R)f[R]=h[w*o+R];u.call(b,C,f)}}return h},get:function(){return A},enumerable:!0})}},{"./GLError":133}],135:[function(e,c,d){"use strict";var n=e("./reflect"),t=e("./GLError");function i(g){return function(){return g}}function a(g,s){for(var b=new Array(g),x=0;x<g;++x)b[x]=s;return b}c.exports=function r(g,s,b,x){function S(M){return function(f,u,h){return f.getUniform(u.program,h[M])}}function p(M){return function(u){for(var h=w("",M),o=0;o<h.length;++o){var C=h[o],R=C[0],z=C[1];if(x[z]){var O=u;if("string"==typeof R&&(0===R.indexOf(".")||0===R.indexOf("["))){var I=R;if(0===R.indexOf(".")&&(I=R.slice(1)),I.indexOf("]")===I.length-1){var F=I.indexOf("["),D=I.slice(0,F),N=I.slice(F+1,I.length-1);O=D?u[D][N]:u[N]}else O=u[I]}var X,U=b[z].type;switch(U){case"bool":case"int":case"sampler2D":case"samplerCube":g.uniform1i(x[z],O);break;case"float":g.uniform1f(x[z],O);break;default:var oe=U.indexOf("vec");if(!(0<=oe&&oe<=1&&U.length===4+oe)){if(0===U.indexOf("mat")&&4===U.length){if((X=U.charCodeAt(U.length-1)-48)<2||X>4)throw new t("","Invalid uniform dimension type for matrix "+name+": "+U);g["uniformMatrix"+X+"fv"](x[z],!1,O);break}throw new t("","Unknown uniform data type for "+name+": "+U)}if((X=U.charCodeAt(U.length-1)-48)<2||X>4)throw new t("","Invalid data type");switch(U.charAt(0)){case"b":case"i":g["uniform"+X+"iv"](x[z],O);break;case"v":g["uniform"+X+"fv"](x[z],O);break;default:throw new t("","Unrecognized data type for vector "+name+": "+U)}}}}}}function w(M,f){if("object"!=typeof f)return[[M,f]];var u=[];for(var h in f){var o=f[h],C=M;parseInt(h)+""===h?C+="["+h+"]":C+="."+h,"object"==typeof o?u.push.apply(u,w(C,o)):u.push([C,o])}return u}function y(M,f,u){if("object"==typeof u){var h=A(u);Object.defineProperty(M,f,{get:i(h),set:p(u),enumerable:!0,configurable:!1})}else x[u]?Object.defineProperty(M,f,{get:S(u),set:p(u),enumerable:!0,configurable:!1}):M[f]=function l(M){switch(M){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var f=M.indexOf("vec");if(0<=f&&f<=1&&M.length===4+f){if((u=M.charCodeAt(M.length-1)-48)<2||u>4)throw new t("","Invalid data type");return"b"===M.charAt(0)?a(u,!1):a(u,0)}if(0===M.indexOf("mat")&&4===M.length){var u;if((u=M.charCodeAt(M.length-1)-48)<2||u>4)throw new t("","Invalid uniform dimension type for matrix "+name+": "+M);return a(u*u,0)}throw new t("","Unknown uniform data type for "+name+": "+M)}}(b[u].type)}function A(M){var f;if(Array.isArray(M)){f=new Array(M.length);for(var u=0;u<M.length;++u)y(f,u,M[u])}else for(var h in f={},M)y(f,h,M[h]);return f}var T=n(b,!0);return{get:i(A(T)),set:p(T),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(e,c,d){"use strict";c.exports=function n(t,i){for(var a={},r=0;r<t.length;++r)for(var s=t[r].name.split("."),b=a,x=0;x<s.length;++x){var S=s[x].split("[");if(S.length>1){S[0]in b||(b[S[0]]=[]),b=b[S[0]];for(var p=1;p<S.length;++p){var w=parseInt(S[p]);p<S.length-1||x<s.length-1?(w in b||(b[w]=p<S.length-1?[]:{}),b=b[w]):b[w]=i?r:t[r].type}}else x<s.length-1?(S[0]in b||(b[S[0]]={}),b=b[S[0]]):b[S[0]]=i?r:t[r].type}return a}},{}],137:[function(e,c,d){"use strict";d.uniforms=function a(g,s){for(var b=g.getProgramParameter(s,g.ACTIVE_UNIFORMS),x=[],S=0;S<b;++S){var p=g.getActiveUniform(s,S);if(p){var w=i(g,p.type);if(p.size>1)for(var l=0;l<p.size;++l)x.push({name:p.name.replace("[0]","["+l+"]"),type:w});else x.push({name:p.name,type:w})}}return x},d.attributes=function r(g,s){for(var b=g.getProgramParameter(s,g.ACTIVE_ATTRIBUTES),x=[],S=0;S<b;++S){var p=g.getActiveAttrib(s,S);p&&x.push({name:p.name,type:i(g,p.type)})}return x};var n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},t=null;function i(g,s){if(!t){var b=Object.keys(n);t={};for(var x=0;x<b.length;++x){var S=b[x];t[g[S]]=n[S]}}return t[s]}},{}],138:[function(e,c,d){"use strict";d.shader=function w(y,A,T){return p(y).getShaderReference(A,T)},d.program=function l(y,A,T,M,f){return p(y).getProgram(A,T,M,f)};var n=e("./GLError"),t=e("gl-format-compiler-error"),a=new("undefined"==typeof WeakMap?e("weakmap-shim"):WeakMap),r=0;function g(y,A,T,M,f,u,h){this.id=y,this.src=A,this.type=T,this.shader=M,this.count=u,this.programs=[],this.cache=h}function s(y){this.gl=y,this.shaders=[{},{}],this.programs={}}g.prototype.dispose=function(){if(0==--this.count){for(var y=this.cache,A=y.gl,T=this.programs,M=0,f=T.length;M<f;++M){var u=y.programs[T[M]];u&&(delete y.programs[M],A.deleteProgram(u))}A.deleteShader(this.shader),delete y.shaders[this.type===A.FRAGMENT_SHADER|0][this.src]}};var b=s.prototype;function p(y){var A=a.get(y);return A||(A=new s(y),a.set(y,A)),A}b.getShaderReference=function(y,A){var T=this.gl,M=this.shaders[y===T.FRAGMENT_SHADER|0],f=M[A];if(f&&T.isShader(f.shader))f.count+=1;else{var u=function x(y,A,T){var M=y.createShader(A);if(y.shaderSource(M,T),y.compileShader(M),!y.getShaderParameter(M,y.COMPILE_STATUS)){var f=y.getShaderInfoLog(M);try{var u=t(f,T,A)}catch(h){throw console.warn("Failed to format compiler error: "+h),new n(f,"Error compiling shader:\n"+f)}throw new n(f,u.short,u.long)}return M}(T,y,A);f=M[A]=new g(r++,A,y,u,[],1,this)}return f},b.getProgram=function(y,A,T,M){var f=[y.id,A.id,T.join(":"),M.join(":")].join("@"),u=this.programs[f];return(!u||!this.gl.isProgram(u))&&(this.programs[f]=u=function S(y,A,T,M,f){var u=y.createProgram();y.attachShader(u,A),y.attachShader(u,T);for(var h=0;h<M.length;++h)y.bindAttribLocation(u,f[h],M[h]);if(y.linkProgram(u),!y.getProgramParameter(u,y.LINK_STATUS)){var o=y.getProgramInfoLog(u);throw new n(o,"Error linking program: "+o)}return u}(this.gl,y.shader,A.shader,T,M),y.programs.push(f),A.programs.push(f)),u}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(e,c,d){"use strict";function n(a){this.plot=a,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}c.exports=function i(a,r){var g=new n(a);return g.update(r),a.addOverlay(g),g};var t=n.prototype;t.update=function(a){this.enable=((a=a||{}).enable||[!0,!0,!1,!1]).slice(),this.width=(a.width||[1,1,1,1]).slice(),this.color=(a.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(a.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},t.draw=function(){var a=this.enable,r=this.width,g=this.color,s=this.center,b=this.plot,x=b.line,S=b.dataBox,p=b.viewBox;if(x.bind(),S[0]<=s[0]&&s[0]<=S[2]&&S[1]<=s[1]&&s[1]<=S[3]){var w=p[0]+(s[0]-S[0])/(S[2]-S[0])*(p[2]-p[0]),l=p[1]+(s[1]-S[1])/(S[3]-S[1])*(p[3]-p[1]);a[0]&&x.drawLine(w,l,p[0],l,r[0],g[0]),a[1]&&x.drawLine(w,l,w,p[1],r[1],g[1]),a[2]&&x.drawLine(w,l,p[2],l,r[2],g[2]),a[3]&&x.drawLine(w,l,w,p[3],r[3],g[3])}},t.dispose=function(){this.plot.removeOverlay(this)}},{}],140:[function(e,c,d){"use strict";var n=e("glslify"),t=e("gl-shader"),i=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),a=n(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);c.exports=function(r){return t(r,i,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(e,c,d){"use strict";var n=e("gl-buffer"),t=e("gl-vao"),i=e("./shaders/index");c.exports=function S(p,w){var l=[];function y(u,h,o,C,R,z){var O=[u,h,o,0,0,0,1];O[C+3]=1,O[C]=R,l.push.apply(l,O),O[6]=-1,l.push.apply(l,O),O[C]=z,l.push.apply(l,O),l.push.apply(l,O),O[6]=1,l.push.apply(l,O),O[C]=R,l.push.apply(l,O)}y(0,0,0,0,0,1),y(0,0,0,1,0,1),y(0,0,0,2,0,1),y(1,0,0,1,-1,1),y(1,0,0,2,-1,1),y(0,1,0,0,-1,1),y(0,1,0,2,-1,1),y(0,0,1,0,-1,1),y(0,0,1,1,-1,1);var A=n(p,l),T=t(p,[{type:p.FLOAT,buffer:A,size:3,offset:0,stride:28},{type:p.FLOAT,buffer:A,size:3,offset:12,stride:28},{type:p.FLOAT,buffer:A,size:1,offset:24,stride:28}]),M=i(p);M.attributes.position.location=0,M.attributes.color.location=1,M.attributes.weight.location=2;var f=new r(p,A,T,M);return f.update(w),f};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(p,w,l,y){this.gl=p,this.buffer=w,this.vao=l,this.shader=y,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var g=r.prototype,s=[0,0,0],b=[0,0,0],x=[0,0];g.isTransparent=function(){return!1},g.drawTransparent=function(p){},g.draw=function(p){var w=this.gl,l=this.vao,y=this.shader;l.bind(),y.bind();var f,A=p.model||a,T=p.view||a,M=p.projection||a;this.axes&&(f=this.axes.lastCubeProps.axis);for(var u=s,h=b,o=0;o<3;++o)f&&f[o]<0?(u[o]=this.bounds[0][o],h[o]=this.bounds[1][o]):(u[o]=this.bounds[1][o],h[o]=this.bounds[0][o]);for(x[0]=w.drawingBufferWidth,x[1]=w.drawingBufferHeight,y.uniforms.model=A,y.uniforms.view=T,y.uniforms.projection=M,y.uniforms.coordinates=[this.position,u,h],y.uniforms.colors=this.colors,y.uniforms.screenShape=x,o=0;o<3;++o)y.uniforms.lineWidth=this.lineWidth[o]*this.pixelRatio,this.enabled[o]&&(l.draw(w.TRIANGLES,6,6*o),this.drawSides[o]&&l.draw(w.TRIANGLES,12,18+12*o));l.unbind()},g.update=function(p){!p||("bounds"in p&&(this.bounds=p.bounds),"position"in p&&(this.position=p.position),"lineWidth"in p&&(this.lineWidth=p.lineWidth),"colors"in p&&(this.colors=p.colors),"enabled"in p&&(this.enabled=p.enabled),"drawSides"in p&&(this.drawSides=p.drawSides))},g.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(e,c,d){var n=e("glslify"),t=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),i=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),r=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);d.meshShader={vertex:t,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},d.pickShader={vertex:a,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(e,c,d){"use strict";var n=e("gl-vec3"),t=e("gl-vec4"),i=["xyz","xzy","yxz","yzx","zxy","zyx"],r=function(y,A,T,M){for(var f=0,u=0;u<y.length;u++)for(var h=y[u].velocities,o=0;o<h.length;o++)f=Math.max(f,n.length(h[o]));var C=y.map(function(oe){return function(y,A,T,M){for(var f=y.points,u=y.velocities,h=y.divergences,o=[],C=[],R=[],z=[],O=[],I=[],F=0,D=0,N=t.create(),U=t.create(),oe=0;oe<f.length;oe++){var se=f[oe],ne=u[oe],W=h[oe];0===A&&(W=.05*T),D=n.length(ne)/M,N=t.create(),n.copy(N,ne),N[3]=W;for(var G=0;G<8;G++)O[G]=[se[0],se[1],se[2],G];if(z.length>0)for(G=0;G<8;G++){var $=(G+1)%8;o.push(z[G],O[G],O[$],O[$],z[$],z[G]),R.push(U,N,N,N,U,U),I.push(F,D,D,D,F,F);var V=o.length;C.push([V-6,V-5,V-4],[V-3,V-2,V-1])}var H=z;z=O,O=H;var q=U;U=N,N=q;var K=F;F=D,D=K}return{positions:o,cells:C,vectors:R,vertexIntensity:I}}(oe,T,M,f)}),R=[],z=[],O=[],I=[];for(u=0;u<C.length;u++){var F=C[u],D=R.length;for(R=R.concat(F.positions),O=O.concat(F.vectors),I=I.concat(F.vertexIntensity),o=0;o<F.cells.length;o++){var N=F.cells[o],U=[];z.push(U);for(var X=0;X<N.length;X++)U.push(N[X]+D)}}return{positions:R,cells:z,vectors:O,vertexIntensity:I,colormap:A}},g=function(y,A){var M,T=y.length;for(M=0;M<T;M++){var f=y[M];if(f===A)return M;if(f>A)return M-1}return M},s=function(y,A,T){return y<A?A:y>T?T:y},S=function(y){var A=1/0;y.sort(function(u,h){return u-h});for(var T=y.length,M=1;M<T;M++){var f=Math.abs(y[M]-y[M-1]);f<A&&(A=f)}return A};c.exports=function(y,A){var T=y.startingPositions,M=y.maxLength||1e3,f=y.tubeSize||1,u=y.absoluteTubeSize,h=y.gridFill||"+x+y+z",o={};-1!==h.indexOf("-x")&&(o.reversedX=!0),-1!==h.indexOf("-y")&&(o.reversedY=!0),-1!==h.indexOf("-z")&&(o.reversedZ=!0),o.filled=i.indexOf(h.replace(/-/g,"").replace(/\+/g,""));var ke,we,de,be,C=y.getVelocity||function(ke){return function(y,A,T){var M=A.vectors,f=A.meshgrid,u=y[0],h=y[1],o=y[2],C=f[0].length,R=f[1].length,z=f[2].length,O=g(f[0],u),I=g(f[1],h),F=g(f[2],o),D=O+1,N=I+1,U=F+1;if(O=s(O,0,C-1),D=s(D,0,C-1),I=s(I,0,R-1),N=s(N,0,R-1),F=s(F,0,z-1),U=s(U,0,z-1),O<0||I<0||F<0||D>C-1||N>R-1||U>z-1)return n.create();var q,K,Y,te,J,j,X=f[0][O],se=f[1][I],W=f[2][F],$=(u-X)/(f[0][D]-X),V=(h-se)/(f[1][N]-se),H=(o-W)/(f[2][U]-W);switch(isFinite($)||($=.5),isFinite(V)||(V=.5),isFinite(H)||(H=.5),T.reversedX&&(O=C-1-O,D=C-1-D),T.reversedY&&(I=R-1-I,N=R-1-N),T.reversedZ&&(F=z-1-F,U=z-1-U),T.filled){case 5:J=F,j=U,Y=I*z,te=N*z,q=O*z*R,K=D*z*R;break;case 4:J=F,j=U,q=O*z,K=D*z,Y=I*z*C,te=N*z*C;break;case 3:Y=I,te=N,J=F*R,j=U*R,q=O*R*z,K=D*R*z;break;case 2:Y=I,te=N,q=O*R,K=D*R,J=F*R*C,j=U*R*C;break;case 1:q=O,K=D,J=F*C,j=U*C,Y=I*C*z,te=N*C*z;break;default:q=O,K=D,Y=I*C,te=N*C,J=F*C*R,j=U*C*R}var re=M[q+Y+J],le=M[q+Y+j],ge=M[q+te+J],pe=M[q+te+j],xe=M[K+Y+J],ke=M[K+Y+j],we=M[K+te+J],de=M[K+te+j],be=n.create(),Le=n.create(),De=n.create(),ye=n.create();n.lerp(be,re,xe,$),n.lerp(Le,le,ke,$),n.lerp(De,ge,we,$),n.lerp(ye,pe,de,$);var Ce=n.create(),Fe=n.create();n.lerp(Ce,be,De,V),n.lerp(Fe,Le,ye,V);var Ke=n.create();return n.lerp(Ke,Ce,Fe,H),Ke}(ke,y,o)},R=y.getDivergence||function(ke,we){var de=n.create(),be=1e-4;n.add(de,ke,[be,0,0]);var Le=C(de);n.subtract(Le,Le,we),n.scale(Le,Le,1/be),n.add(de,ke,[0,be,0]);var De=C(de);n.subtract(De,De,we),n.scale(De,De,1/be),n.add(de,ke,[0,0,be]);var ye=C(de);return n.subtract(ye,ye,we),n.scale(ye,ye,1/be),n.add(de,Le,De),n.add(de,de,ye),de},z=[],O=A[0][0],I=A[0][1],F=A[0][2],D=A[1][0],N=A[1][1],U=A[1][2],se=10*n.distance(A[0],A[1])/M,ne=se*se,W=1,G=0,$=T.length;$>1&&(W=function(y){for(var A=[],T=[],M=[],f={},u={},h={},o=y.length,C=0;C<o;C++){var R=y[C],z=R[0],O=R[1],I=R[2];f[z]||(A.push(z),f[z]=!0),u[O]||(T.push(O),u[O]=!0),h[I]||(M.push(I),h[I]=!0)}var F=S(A),D=S(T),N=S(M),U=Math.min(F,D,N);return isFinite(U)?U:1}(T));for(var V=0;V<$;V++){var H=n.create();n.copy(H,T[V]);var q=[H],K=[],Y=C(H),te=H;K.push(Y);var J=[],j=R(H,Y),re=n.length(j);isFinite(re)&&re>G&&(G=re),J.push(re),z.push({points:q,velocities:K,divergences:J});for(var le=0;le<100*M&&q.length<M&&(we=void 0,de=void 0,be=void 0,de=(ke=H)[1],be=ke[2],!((we=ke[0])<O||we>D||de<I||de>N||be<F||be>U));){le++;var ge=n.clone(Y),pe=n.squaredLength(ge);if(0===pe)break;pe>ne&&n.scale(ge,ge,se/Math.sqrt(pe)),n.add(ge,ge,H),Y=C(ge),n.squaredDistance(te,ge)-ne>-1e-4*ne&&(q.push(ge),te=ge,K.push(Y),j=R(ge,Y),re=n.length(j),isFinite(re)&&re>G&&(G=re),J.push(re)),H=ge}}var xe=r(z,y.colormap,G,W);return u?xe.tubeScale=u:(0===G&&(G=1),xe.tubeScale=.5*f*W/G),xe};var w=e("./lib/shaders"),l=e("gl-cone3d").createMesh;c.exports.createTubeMesh=function(y,A){return l(y,A,{shaders:w,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(e,c,d){var n=e("gl-shader"),t=e("glslify"),i=t(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),a=t(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),r=t(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),g=t(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);d.createShader=function(s){var b=n(s,i,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return b.attributes.uv.location=0,b.attributes.f.location=1,b.attributes.normal.location=2,b},d.createPickShader=function(s){var b=n(s,i,g,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return b.attributes.uv.location=0,b.attributes.f.location=1,b.attributes.normal.location=2,b},d.createContourShader=function(s){var b=n(s,r,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return b.attributes.uv.location=0,b.attributes.f.location=1,b},d.createPickContourShader=function(s){var b=n(s,r,g,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return b.attributes.uv.location=0,b.attributes.f.location=1,b}},{"gl-shader":132,glslify:231}],145:[function(e,c,d){"use strict";c.exports=function q(K){var Y=K.gl,te=T(Y),J=f(Y),j=M(Y),re=u(Y),le=t(Y),ge=i(Y,[{buffer:le,size:4,stride:40,offset:0},{buffer:le,size:3,stride:40,offset:16},{buffer:le,size:3,stride:40,offset:28}]),pe=t(Y),xe=i(Y,[{buffer:pe,size:4,stride:20,offset:0},{buffer:pe,size:1,stride:20,offset:16}]),ke=t(Y),we=i(Y,[{buffer:ke,size:2,type:Y.FLOAT}]),de=a(Y,1,256,Y.RGBA,Y.UNSIGNED_BYTE);de.minFilter=Y.LINEAR,de.magFilter=Y.LINEAR;var be=new I(Y,[0,0],[[0,0,0],[0,0,0]],te,J,le,ge,de,j,re,pe,xe,ke,we,[0,0,0]),Le={levels:[[],[],[]]};for(var De in K)Le[De]=K[De];return Le.colormap=Le.colormap||"jet",be.update(Le),be};var n=e("bit-twiddle"),t=e("gl-buffer"),i=e("gl-vao"),a=e("gl-texture2d"),r=e("typedarray-pool"),g=e("colormap"),s=e("ndarray-ops"),b=e("ndarray-pack"),x=e("ndarray"),S=e("surface-nets"),p=e("gl-mat4/multiply"),w=e("gl-mat4/invert"),l=e("binary-search-bounds"),y=e("ndarray-gradient"),A=e("./lib/shaders"),T=A.createShader,M=A.createContourShader,f=A.createPickShader,u=A.createPickContourShader,o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],C=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],R=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function z(K,Y,te,J,j){this.position=K,this.index=Y,this.uv=te,this.level=J,this.dataCoordinate=j}!function(){for(var K=0;K<3;++K){var Y=R[K],J=(K+2)%3;Y[(K+1)%3+0]=1,Y[J+3]=1,Y[K+6]=1}}();function I(K,Y,te,J,j,re,le,ge,pe,xe,ke,we,de,be,Le){this.gl=K,this.shape=Y,this.bounds=te,this.objectOffset=Le,this.intensityBounds=[],this._shader=J,this._pickShader=j,this._coordinateBuffer=re,this._vao=le,this._colorMap=ge,this._contourShader=pe,this._contourPickShader=xe,this._contourBuffer=ke,this._contourVAO=we,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new z([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=de,this._dynamicVAO=be,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[x(r.mallocFloat(1024),[0,0]),x(r.mallocFloat(1024),[0,0]),x(r.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var F=I.prototype;F.genColormap=function(K,Y){var te=!1,J=b([g({colormap:K,nshades:256,format:"rgba"}).map(function(j,re){var le=Y?function D(K,Y){if(!Y||!Y.length)return 1;for(var te=0;te<Y.length;++te){if(Y.length<2)return 1;if(Y[te][0]===K)return Y[te][1];if(Y[te][0]>K&&te>0){var J=(Y[te][0]-K)/(Y[te][0]-Y[te-1][0]);return Y[te][1]*(1-J)+J*Y[te-1][1]}}return 1}(re/255,Y):j[3];return le<1&&(te=!0),[j[0],j[1],j[2],255*le]})]);return s.divseq(J,255),this.hasAlphaScale=te,J},F.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},F.isOpaque=function(){return!this.isTransparent()},F.pickSlots=1,F.setPickBase=function(K){this.pickId=K};var N=[0,0,0],U={showSurface:!1,showContour:!1,projections:[o.slice(),o.slice(),o.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function X(K,Y){var te,J,j,re=Y.axes&&Y.axes.lastCubeProps.axis||N,le=Y.showSurface,ge=Y.showContour;for(te=0;te<3;++te)for(le=le||Y.surfaceProject[te],J=0;J<3;++J)ge=ge||Y.contourProject[te][J];for(te=0;te<3;++te){var pe=U.projections[te];for(J=0;J<16;++J)pe[J]=0;for(J=0;J<4;++J)pe[5*J]=1;pe[5*te]=0,pe[12+te]=Y.axesBounds[+(re[te]>0)][te],p(pe,K.model,pe);var xe=U.clipBounds[te];for(j=0;j<2;++j)for(J=0;J<3;++J)xe[j][J]=K.clipBounds[j][J];xe[0][te]=-1e8,xe[1][te]=1e8}return U.showSurface=le,U.showContour=ge,U}var oe={model:o,view:o,projection:o,inverseModel:o.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},se=o.slice(),ne=[1,0,0,0,1,0,0,0,1];function W(K,Y){K=K||{};var te=this.gl;te.disable(te.CULL_FACE),this._colorMap.bind(0);var J=oe;J.model=K.model||o,J.view=K.view||o,J.projection=K.projection||o,J.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],J.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],J.objectOffset=this.objectOffset,J.contourColor=this.contourColor[0],J.inverseModel=w(J.inverseModel,J.model);for(var j=0;j<2;++j)for(var re=J.clipBounds[j],le=0;le<3;++le)re[le]=Math.min(Math.max(this.clipBounds[j][le],-1e8),1e8);J.kambient=this.ambientLight,J.kdiffuse=this.diffuseLight,J.kspecular=this.specularLight,J.roughness=this.roughness,J.fresnel=this.fresnel,J.opacity=this.opacity,J.height=0,J.permutation=ne,J.vertexColor=this.vertexColor;var ge=se;for(p(ge,J.view,J.model),p(ge,J.projection,ge),w(ge,ge),j=0;j<3;++j)J.eyePosition[j]=ge[12+j]/ge[15];var pe=ge[15];for(j=0;j<3;++j)pe+=this.lightPosition[j]*ge[4*j+3];for(j=0;j<3;++j){var xe=ge[12+j];for(le=0;le<3;++le)xe+=ge[4*le+j]*this.lightPosition[le];J.lightPosition[j]=xe/pe}var ke=X(J,this);if(ke.showSurface){for(this._shader.bind(),this._shader.uniforms=J,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(te.TRIANGLES,this._vertexCount),j=0;j<3;++j)!this.surfaceProject[j]||!this.vertexCount||(this._shader.uniforms.model=ke.projections[j],this._shader.uniforms.clipBounds=ke.clipBounds[j],this._vao.draw(te.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ke.showContour){var we=this._contourShader;J.kambient=1,J.kdiffuse=0,J.kspecular=0,J.opacity=1,we.bind(),we.uniforms=J;var de=this._contourVAO;for(de.bind(),j=0;j<3;++j)for(we.uniforms.permutation=R[j],te.lineWidth(this.contourWidth[j]*this.pixelRatio),le=0;le<this.contourLevels[j].length;++le)le===this.highlightLevel[j]?(we.uniforms.contourColor=this.highlightColor[j],we.uniforms.contourTint=this.highlightTint[j]):(0===le||le-1===this.highlightLevel[j])&&(we.uniforms.contourColor=this.contourColor[j],we.uniforms.contourTint=this.contourTint[j]),this._contourCounts[j][le]&&(we.uniforms.height=this.contourLevels[j][le],de.draw(te.LINES,this._contourCounts[j][le],this._contourOffsets[j][le]));for(j=0;j<3;++j)for(we.uniforms.model=ke.projections[j],we.uniforms.clipBounds=ke.clipBounds[j],le=0;le<3;++le)if(this.contourProject[j][le]){we.uniforms.permutation=R[le],te.lineWidth(this.contourWidth[le]*this.pixelRatio);for(var be=0;be<this.contourLevels[le].length;++be)be===this.highlightLevel[le]?(we.uniforms.contourColor=this.highlightColor[le],we.uniforms.contourTint=this.highlightTint[le]):(0===be||be-1===this.highlightLevel[le])&&(we.uniforms.contourColor=this.contourColor[le],we.uniforms.contourTint=this.contourTint[le]),this._contourCounts[le][be]&&(we.uniforms.height=this.contourLevels[le][be],de.draw(te.LINES,this._contourCounts[le][be],this._contourOffsets[le][be]))}for(de.unbind(),(de=this._dynamicVAO).bind(),j=0;j<3;++j)if(0!==this._dynamicCounts[j])for(we.uniforms.model=J.model,we.uniforms.clipBounds=J.clipBounds,we.uniforms.permutation=R[j],te.lineWidth(this.dynamicWidth[j]*this.pixelRatio),we.uniforms.contourColor=this.dynamicColor[j],we.uniforms.contourTint=this.dynamicTint[j],we.uniforms.height=this.dynamicLevel[j],de.draw(te.LINES,this._dynamicCounts[j],this._dynamicOffsets[j]),le=0;le<3;++le)!this.contourProject[le][j]||(we.uniforms.model=ke.projections[le],we.uniforms.clipBounds=ke.clipBounds[le],de.draw(te.LINES,this._dynamicCounts[j],this._dynamicOffsets[j]));de.unbind()}}F.draw=function(K){return W.call(this,K,!1)},F.drawTransparent=function(K){return W.call(this,K,!0)};var G={model:o,view:o,projection:o,inverseModel:o,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function $(K,Y){return Array.isArray(K)?[Y(K[0]),Y(K[1]),Y(K[2])]:[Y(K),Y(K),Y(K)]}function V(K){return Array.isArray(K)?3===K.length?[K[0],K[1],K[2],1]:[K[0],K[1],K[2],K[3]]:[0,0,0,1]}function H(K){if(Array.isArray(K)){if(Array.isArray(K))return[V(K[0]),V(K[1]),V(K[2])];var Y=V(K);return[Y.slice(),Y.slice(),Y.slice()]}}F.drawPick=function(K){K=K||{};var Y=this.gl;Y.disable(Y.CULL_FACE);var te=G;te.model=K.model||o,te.view=K.view||o,te.projection=K.projection||o,te.shape=this._field[2].shape,te.pickId=this.pickId/255,te.lowerBound=this.bounds[0],te.upperBound=this.bounds[1],te.objectOffset=this.objectOffset,te.permutation=ne;for(var J=0;J<2;++J)for(var j=te.clipBounds[J],re=0;re<3;++re)j[re]=Math.min(Math.max(this.clipBounds[J][re],-1e8),1e8);var le=X(te,this);if(le.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=te,this._vao.bind(),this._vao.draw(Y.TRIANGLES,this._vertexCount),J=0;J<3;++J)!this.surfaceProject[J]||(this._pickShader.uniforms.model=le.projections[J],this._pickShader.uniforms.clipBounds=le.clipBounds[J],this._vao.draw(Y.TRIANGLES,this._vertexCount));this._vao.unbind()}if(le.showContour){var ge=this._contourPickShader;ge.bind(),ge.uniforms=te;var pe=this._contourVAO;for(pe.bind(),re=0;re<3;++re)for(Y.lineWidth(this.contourWidth[re]*this.pixelRatio),ge.uniforms.permutation=R[re],J=0;J<this.contourLevels[re].length;++J)this._contourCounts[re][J]&&(ge.uniforms.height=this.contourLevels[re][J],pe.draw(Y.LINES,this._contourCounts[re][J],this._contourOffsets[re][J]));for(J=0;J<3;++J)for(ge.uniforms.model=le.projections[J],ge.uniforms.clipBounds=le.clipBounds[J],re=0;re<3;++re)if(this.contourProject[J][re]){ge.uniforms.permutation=R[re],Y.lineWidth(this.contourWidth[re]*this.pixelRatio);for(var xe=0;xe<this.contourLevels[re].length;++xe)this._contourCounts[re][xe]&&(ge.uniforms.height=this.contourLevels[re][xe],pe.draw(Y.LINES,this._contourCounts[re][xe],this._contourOffsets[re][xe]))}pe.unbind()}},F.pick=function(K){if(!K||K.id!==this.pickId)return null;var Y=this._field[2].shape,te=this._pickResult,J=Y[0]*(K.value[0]+(K.value[2]>>4)/16)/255,j=Math.floor(J),re=J-j,le=Y[1]*(K.value[1]+(15&K.value[2])/16)/255,ge=Math.floor(le),pe=le-ge;j+=1,ge+=1;var xe=te.position;xe[0]=xe[1]=xe[2]=0;for(var ke=0;ke<2;++ke)for(var we=ke?re:1-re,de=0;de<2;++de)for(var Le=j+ke,De=ge+de,ye=we*(de?pe:1-pe),Ce=0;Ce<3;++Ce)xe[Ce]+=this._field[Ce].get(Le,De)*ye;for(var Fe=this._pickResult.level,Ke=0;Ke<3;++Ke)if(Fe[Ke]=l.le(this.contourLevels[Ke],xe[Ke]),Fe[Ke]<0)this.contourLevels[Ke].length>0&&(Fe[Ke]=0);else if(Fe[Ke]<this.contourLevels[Ke].length-1){var Be=this.contourLevels[Ke][Fe[Ke]+1];Math.abs(this.contourLevels[Ke][Fe[Ke]]-xe[Ke])>Math.abs(Be-xe[Ke])&&(Fe[Ke]+=1)}for(te.index[0]=re<.5?j:j+1,te.index[1]=pe<.5?ge:ge+1,te.uv[0]=J/Y[0],te.uv[1]=le/Y[1],Ce=0;Ce<3;++Ce)te.dataCoordinate[Ce]=this._field[Ce].get(te.index[0],te.index[1]);return te},F.padField=function(K,Y){var te=Y.shape.slice(),J=K.shape.slice();s.assign(K.lo(1,1).hi(te[0],te[1]),Y),s.assign(K.lo(1).hi(te[0],1),Y.hi(te[0],1)),s.assign(K.lo(1,J[1]-1).hi(te[0],1),Y.lo(0,te[1]-1).hi(te[0],1)),s.assign(K.lo(0,1).hi(1,te[1]),Y.hi(1)),s.assign(K.lo(J[0]-1,1).hi(1,te[1]),Y.lo(te[0]-1)),K.set(0,0,Y.get(0,0)),K.set(0,J[1]-1,Y.get(0,te[1]-1)),K.set(J[0]-1,0,Y.get(te[0]-1,0)),K.set(J[0]-1,J[1]-1,Y.get(te[0]-1,te[1]-1))},F.update=function(K){this.objectOffset=(K=K||{}).objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in K&&(this.contourWidth=$(K.contourWidth,Number)),"showContour"in K&&(this.showContour=$(K.showContour,Boolean)),"showSurface"in K&&(this.showSurface=!!K.showSurface),"contourTint"in K&&(this.contourTint=$(K.contourTint,Boolean)),"contourColor"in K&&(this.contourColor=H(K.contourColor)),"contourProject"in K&&(this.contourProject=$(K.contourProject,function(Dt){return $(Dt,Boolean)})),"surfaceProject"in K&&(this.surfaceProject=K.surfaceProject),"dynamicColor"in K&&(this.dynamicColor=H(K.dynamicColor)),"dynamicTint"in K&&(this.dynamicTint=$(K.dynamicTint,Number)),"dynamicWidth"in K&&(this.dynamicWidth=$(K.dynamicWidth,Number)),"opacity"in K&&(this.opacity=K.opacity),"opacityscale"in K&&(this.opacityscale=K.opacityscale),"colorBounds"in K&&(this.colorBounds=K.colorBounds),"vertexColor"in K&&(this.vertexColor=K.vertexColor?1:0),"colormap"in K&&this._colorMap.setPixels(this.genColormap(K.colormap,this.opacityscale));var Y=K.field||K.coords&&K.coords[2]||null,te=!1;if(Y||(Y=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in K||"coords"in K){var J=(Y.shape[0]+2)*(Y.shape[1]+2);J>this._field[2].data.length&&(r.freeFloat(this._field[2].data),this._field[2].data=r.mallocFloat(n.nextPow2(J))),this._field[2]=x(this._field[2].data,[Y.shape[0]+2,Y.shape[1]+2]),this.padField(this._field[2],Y),this.shape=Y.shape.slice();for(var j=this.shape,re=0;re<2;++re)this._field[2].size>this._field[re].data.length&&(r.freeFloat(this._field[re].data),this._field[re].data=r.mallocFloat(this._field[2].size)),this._field[re]=x(this._field[re].data,[j[0]+2,j[1]+2]);if(K.coords){var le=K.coords;if(!Array.isArray(le)||3!==le.length)throw new Error("gl-surface: invalid coordinates for x/y");for(re=0;re<2;++re){var ge=le[re];for(de=0;de<2;++de)if(ge.shape[de]!==j[de])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[re],ge)}}else if(K.ticks){var pe=K.ticks;if(!Array.isArray(pe)||2!==pe.length)throw new Error("gl-surface: invalid ticks");for(re=0;re<2;++re){var xe=pe[re];if((Array.isArray(xe)||xe.length)&&(xe=x(xe)),xe.shape[0]!==j[re])throw new Error("gl-surface: invalid tick length");var ke=x(xe.data,j);ke.stride[re]=xe.stride[0],ke.stride[1^re]=0,this.padField(this._field[re],ke)}}else{for(re=0;re<2;++re){var we=[0,0];we[re]=1,this._field[re]=x(this._field[re].data,[j[0]+2,j[1]+2],we,0)}this._field[0].set(0,0,0);for(var de=0;de<j[0];++de)this._field[0].set(de+1,0,de);for(this._field[0].set(j[0]+1,0,j[0]-1),this._field[1].set(0,0,0),de=0;de<j[1];++de)this._field[1].set(0,de+1,de);this._field[1].set(0,j[1]+1,j[1]-1)}var be=this._field,Le=x(r.mallocFloat(3*be[2].size*2),[3,j[0]+2,j[1]+2,2]);for(re=0;re<3;++re)y(Le.pick(re),be[re],"mirror");var De=x(r.mallocFloat(3*be[2].size),[j[0]+2,j[1]+2,3]);for(re=0;re<j[0]+2;++re)for(de=0;de<j[1]+2;++de){var ye=Le.get(0,re,de,0),Ce=Le.get(0,re,de,1),Fe=Le.get(1,re,de,0),Ke=Le.get(1,re,de,1),Ue=Le.get(2,re,de,0),Be=Le.get(2,re,de,1),Ie=Fe*Be-Ke*Ue,nt=Ue*Ce-Be*ye,gt=ye*Ke-Ce*Fe,Nt=Math.sqrt(Ie*Ie+nt*nt+gt*gt);Nt<1e-8?(Nt=Math.max(Math.abs(Ie),Math.abs(nt),Math.abs(gt)))<1e-8?(gt=1,nt=Ie=0,Nt=1):Nt=1/Nt:Nt=1/Math.sqrt(Nt),De.set(re,de,0,Ie*Nt),De.set(re,de,1,nt*Nt),De.set(re,de,2,gt*Nt)}r.free(Le.data);var St=[1/0,1/0,1/0],Bt=[-1/0,-1/0,-1/0],Zt=1/0,Et=-1/0,at=r.mallocFloat(n.nextPow2((j[0]-1)*(j[1]-1)*6*10)),vt=0,Qe=0;for(re=0;re<j[0]-1;++re)e:for(de=0;de<j[1]-1;++de){for(var Pe=0;Pe<2;++Pe)for(var Ze=0;Ze<2;++Ze)for(var Xe=0;Xe<3;++Xe){var rt=this._field[Xe].get(1+re+Pe,1+de+Ze);if(isNaN(rt)||!isFinite(rt))continue e}for(Xe=0;Xe<6;++Xe){var kt=re+C[Xe][0],Tt=de+C[Xe][1],Xt=this._field[0].get(kt+1,Tt+1),ar=this._field[1].get(kt+1,Tt+1);rt=this._field[2].get(kt+1,Tt+1),Ie=De.get(kt+1,Tt+1,0),nt=De.get(kt+1,Tt+1,1),gt=De.get(kt+1,Tt+1,2),K.intensity&&(Ut=K.intensity.get(kt,Tt));var Ut=K.intensity?K.intensity.get(kt,Tt):rt+this.objectOffset[2];at[vt++]=kt,at[vt++]=Tt,at[vt++]=Xt,at[vt++]=ar,at[vt++]=rt,at[vt++]=0,at[vt++]=Ut,at[vt++]=Ie,at[vt++]=nt,at[vt++]=gt,St[0]=Math.min(St[0],Xt+this.objectOffset[0]),St[1]=Math.min(St[1],ar+this.objectOffset[1]),St[2]=Math.min(St[2],rt+this.objectOffset[2]),Zt=Math.min(Zt,Ut),Bt[0]=Math.max(Bt[0],Xt+this.objectOffset[0]),Bt[1]=Math.max(Bt[1],ar+this.objectOffset[1]),Bt[2]=Math.max(Bt[2],rt+this.objectOffset[2]),Et=Math.max(Et,Ut),Qe+=1}}for(K.intensityBounds&&(Zt=+K.intensityBounds[0],Et=+K.intensityBounds[1]),re=6;re<vt;re+=10)at[re]=(at[re]-Zt)/(Et-Zt);this._vertexCount=Qe,this._coordinateBuffer.update(at.subarray(0,vt)),r.freeFloat(at),r.free(De.data),this.bounds=[St,Bt],this.intensity=K.intensity||this._field[2],(this.intensityBounds[0]!==Zt||this.intensityBounds[1]!==Et)&&(te=!0),this.intensityBounds=[Zt,Et]}if("levels"in K){var Jt=K.levels;for(Jt=Array.isArray(Jt[0])?Jt.slice():[[],[],Jt],re=0;re<3;++re)Jt[re]=Jt[re].slice(),Jt[re].sort(function(Dt,Gt){return Dt-Gt});for(re=0;re<3;++re)for(de=0;de<Jt[re].length;++de)Jt[re][de]-=this.objectOffset[re];e:for(re=0;re<3;++re){if(Jt[re].length!==this.contourLevels[re].length){te=!0;break}for(de=0;de<Jt[re].length;++de)if(Jt[re][de]!==this.contourLevels[re][de]){te=!0;break e}}this.contourLevels=Jt}if(te){be=this._field,j=this.shape;for(var nr=[],rr=0;rr<3;++rr){var br=this.contourLevels[rr],Hr=[],on=[],jr=[0,0,0];for(re=0;re<br.length;++re){var et=S(this._field[rr],br[re]);Hr.push(nr.length/5|0),Qe=0;e:for(de=0;de<et.cells.length;++de){var Yt=et.cells[de];for(Xe=0;Xe<2;++Xe){var qt=et.positions[Yt[Xe]],Vt=qt[0],Tr=0|Math.floor(Vt),tt=Vt-Tr,je=qt[1],ct=0|Math.floor(je),ht=je-ct,Me=!1;t:for(var Se=0;Se<3;++Se){jr[Se]=0;var Je=(rr+Se+1)%3;for(Pe=0;Pe<2;++Pe){var We=Pe?tt:1-tt;for(kt=0|Math.min(Math.max(Tr+Pe,0),j[0]),Ze=0;Ze<2;++Ze){var st=Ze?ht:1-ht;if(Tt=0|Math.min(Math.max(ct+Ze,0),j[1]),rt=Se<2?this._field[Je].get(kt,Tt):(this.intensity.get(kt,Tt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(rt)||isNaN(rt)){Me=!0;break t}jr[Se]+=We*st*rt}}}if(Me){if(Xe>0){for(var pt=0;pt<5;++pt)nr.pop();Qe-=1}continue e}nr.push(jr[0],jr[1],qt[0],qt[1],jr[2]),Qe+=1}}on.push(Qe)}this._contourOffsets[rr]=Hr,this._contourCounts[rr]=on}var Ct=r.mallocFloat(nr.length);for(re=0;re<nr.length;++re)Ct[re]=nr[re];this._contourBuffer.update(Ct),r.freeFloat(Ct)}},F.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var K=0;K<3;++K)r.freeFloat(this._field[K].data)},F.highlight=function(K){var Y,te;if(!K)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(Y=0;Y<3;++Y)this.highlightLevel[Y]=this.enableHighlight[Y]?K.level[Y]:-1;for(te=this.snapToData?K.dataCoordinate:K.position,Y=0;Y<3;++Y)te[Y]-=this.objectOffset[Y];if(this.enableDynamic[0]&&te[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&te[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&te[2]!==this.dynamicLevel[2]){for(var J=0,j=this.shape,re=r.mallocFloat(12*j[0]*j[1]),le=0;le<3;++le)if(this.enableDynamic[le]){this.dynamicLevel[le]=te[le];var ke=this._field[(le+1)%3],we=this._field[(le+2)%3],de=S(this._field[le],te[le]),be=de.cells,Le=de.positions;for(this._dynamicOffsets[le]=J,Y=0;Y<be.length;++Y)for(var De=be[Y],ye=0;ye<2;++ye){var Ce=Le[De[ye]],Fe=+Ce[0],Ke=0|Fe,Ue=0|Math.min(Ke+1,j[0]),Be=Fe-Ke,Ie=1-Be,nt=+Ce[1],gt=0|nt,Nt=0|Math.min(gt+1,j[1]),St=nt-gt,Bt=1-St,Zt=Ie*Bt,Et=Ie*St,wt=Be*Bt,at=Be*St,vt=Zt*ke.get(Ke,gt)+Et*ke.get(Ke,Nt)+wt*ke.get(Ue,gt)+at*ke.get(Ue,Nt),Qe=Zt*we.get(Ke,gt)+Et*we.get(Ke,Nt)+wt*we.get(Ue,gt)+at*we.get(Ue,Nt);if(isNaN(vt)||isNaN(Qe)){ye&&(J-=1);break}re[2*J+0]=vt,re[2*J+1]=Qe,J+=1}this._dynamicCounts[le]=J-this._dynamicOffsets[le]}else this.dynamicLevel[le]=NaN,this._dynamicCounts[le]=0;this._dynamicBuffer.update(re.subarray(0,2*J)),r.freeFloat(re)}}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(e,c,d){"use strict";var n=e("ndarray"),t=e("ndarray-ops"),i=e("typedarray-pool");c.exports=function u(h){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(a||s(h),"number"==typeof arguments[1])return T(h,arguments[1],arguments[2],arguments[3]||h.RGBA,arguments[4]||h.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return T(h,0|arguments[1][0],0|arguments[1][1],arguments[2]||h.RGBA,arguments[3]||h.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var o=arguments[1],C=b(o)?o:o.raw;if(C)return M(h,C,0|o.width,0|o.height,arguments[2]||h.RGBA,arguments[3]||h.UNSIGNED_BYTE);if(o.shape&&o.data&&o.stride)return f(h,o)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,r=null,g=null;function s(h){a=[h.LINEAR,h.NEAREST_MIPMAP_LINEAR,h.LINEAR_MIPMAP_NEAREST,h.LINEAR_MIPMAP_NEAREST],r=[h.NEAREST,h.LINEAR,h.NEAREST_MIPMAP_NEAREST,h.NEAREST_MIPMAP_LINEAR,h.LINEAR_MIPMAP_NEAREST,h.LINEAR_MIPMAP_LINEAR],g=[h.REPEAT,h.CLAMP_TO_EDGE,h.MIRRORED_REPEAT]}function b(h){return"undefined"!=typeof HTMLCanvasElement&&h instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&h instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&h instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&h instanceof ImageData}var x=function(h,o){t.muls(h,o,255)};function S(h,o,C){var R=h.gl,z=R.getParameter(R.MAX_TEXTURE_SIZE);if(o<0||o>z||C<0||C>z)throw new Error("gl-texture2d: Invalid texture size");return h._shape=[o,C],h.bind(),R.texImage2D(R.TEXTURE_2D,0,h.format,o,C,0,h.format,h.type,null),h._mipLevels=[0],h}function p(h,o,C,R,z,O){this.gl=h,this.handle=o,this.format=z,this.type=O,this._shape=[C,R],this._mipLevels=[0],this._magFilter=h.NEAREST,this._minFilter=h.NEAREST,this._wrapS=h.CLAMP_TO_EDGE,this._wrapT=h.CLAMP_TO_EDGE,this._anisoSamples=1;var I=this,F=[this._wrapS,this._wrapT];Object.defineProperties(F,[{get:function(){return I._wrapS},set:function(N){return I.wrapS=N}},{get:function(){return I._wrapT},set:function(N){return I.wrapT=N}}]),this._wrapVector=F;var D=[this._shape[0],this._shape[1]];Object.defineProperties(D,[{get:function(){return I._shape[0]},set:function(N){return I.width=N}},{get:function(){return I._shape[1]},set:function(N){return I.height=N}}]),this._shapeVector=D}var w=p.prototype;function l(h,o){return 3===h.length?1===o[2]&&o[1]===h[0]*h[2]&&o[0]===h[2]:1===o[0]&&o[1]===h[0]}function A(h){var o=h.createTexture();return h.bindTexture(h.TEXTURE_2D,o),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),o}function T(h,o,C,R,z){var O=h.getParameter(h.MAX_TEXTURE_SIZE);if(o<0||o>O||C<0||C>O)throw new Error("gl-texture2d: Invalid texture shape");if(z===h.FLOAT&&!h.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var I=A(h);return h.texImage2D(h.TEXTURE_2D,0,R,o,C,0,R,z,null),new p(h,I,o,C,R,z)}function M(h,o,C,R,z,O){var I=A(h);return h.texImage2D(h.TEXTURE_2D,0,z,z,O,o),new p(h,I,C,R,z,O)}function f(h,o){var C=o.dtype,R=o.shape.slice(),z=h.getParameter(h.MAX_TEXTURE_SIZE);if(R[0]<0||R[0]>z||R[1]<0||R[1]>z)throw new Error("gl-texture2d: Invalid texture size");var O=l(R,o.stride.slice()),I=0;"float32"===C?I=h.FLOAT:"float64"===C?(I=h.FLOAT,O=!1,C="float32"):"uint8"===C?I=h.UNSIGNED_BYTE:(I=h.UNSIGNED_BYTE,O=!1,C="uint8");var F=0;if(2===R.length)F=h.LUMINANCE,o=n(o.data,R=[R[0],R[1],1],[o.stride[0],o.stride[1],1],o.offset);else{if(3!==R.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===R[2])F=h.ALPHA;else if(2===R[2])F=h.LUMINANCE_ALPHA;else if(3===R[2])F=h.RGB;else{if(4!==R[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");F=h.RGBA}}I===h.FLOAT&&!h.getExtension("OES_texture_float")&&(I=h.UNSIGNED_BYTE,O=!1);var D,N,U=o.size;if(O)D=0===o.offset&&o.data.length===U?o.data:o.data.subarray(o.offset,o.offset+U);else{var X=[R[2],R[2]*R[0],1];N=i.malloc(U,C);var oe=n(N,R,X,0);"float32"!==C&&"float64"!==C||I!==h.UNSIGNED_BYTE?t.assign(oe,o):x(oe,o),D=N.subarray(0,U)}var se=A(h);return h.texImage2D(h.TEXTURE_2D,0,F,R[0],R[1],0,F,I,D),O||i.free(N),new p(h,se,R[0],R[1],F,I)}Object.defineProperties(w,{minFilter:{get:function(){return this._minFilter},set:function(h){this.bind();var o=this.gl;if(this.type===o.FLOAT&&a.indexOf(h)>=0&&(o.getExtension("OES_texture_float_linear")||(h=o.NEAREST)),r.indexOf(h)<0)throw new Error("gl-texture2d: Unknown filter mode "+h);return o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,h),this._minFilter=h}},magFilter:{get:function(){return this._magFilter},set:function(h){this.bind();var o=this.gl;if(this.type===o.FLOAT&&a.indexOf(h)>=0&&(o.getExtension("OES_texture_float_linear")||(h=o.NEAREST)),r.indexOf(h)<0)throw new Error("gl-texture2d: Unknown filter mode "+h);return o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,h),this._magFilter=h}},mipSamples:{get:function(){return this._anisoSamples},set:function(h){var o=this._anisoSamples;if(this._anisoSamples=0|Math.max(h,1),o!==this._anisoSamples){var C=this.gl.getExtension("EXT_texture_filter_anisotropic");C&&this.gl.texParameterf(this.gl.TEXTURE_2D,C.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(h){if(this.bind(),g.indexOf(h)<0)throw new Error("gl-texture2d: Unknown wrap mode "+h);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,h),this._wrapS=h}},wrapT:{get:function(){return this._wrapT},set:function(h){if(this.bind(),g.indexOf(h)<0)throw new Error("gl-texture2d: Unknown wrap mode "+h);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,h),this._wrapT=h}},wrap:{get:function(){return this._wrapVector},set:function(h){if(Array.isArray(h)||(h=[h,h]),2!==h.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var o=0;o<2;++o)if(g.indexOf(h[o])<0)throw new Error("gl-texture2d: Unknown wrap mode "+h);this._wrapS=h[0],this._wrapT=h[1];var C=this.gl;return this.bind(),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,this._wrapS),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,this._wrapT),h}},shape:{get:function(){return this._shapeVector},set:function(h){if(Array.isArray(h)){if(2!==h.length)throw new Error("gl-texture2d: Invalid texture shape")}else h=[0|h,0|h];return S(this,0|h[0],0|h[1]),[0|h[0],0|h[1]]}},width:{get:function(){return this._shape[0]},set:function(h){return S(this,h|=0,this._shape[1]),h}},height:{get:function(){return this._shape[1]},set:function(h){return S(this,this._shape[0],h|=0),h}}}),w.bind=function(h){var o=this.gl;return void 0!==h&&o.activeTexture(o.TEXTURE0+(0|h)),o.bindTexture(o.TEXTURE_2D,this.handle),void 0!==h?0|h:o.getParameter(o.ACTIVE_TEXTURE)-o.TEXTURE0},w.dispose=function(){this.gl.deleteTexture(this.handle)},w.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var h=Math.min(this._shape[0],this._shape[1]),o=0;h>0;++o,h>>>=1)this._mipLevels.indexOf(o)<0&&this._mipLevels.push(o)},w.setPixels=function(h,o,C,R){var z=this.gl;this.bind(),Array.isArray(o)?(R=C,C=0|o[1],o=0|o[0]):(o=o||0,C=C||0),R=R||0;var O=b(h)?h:h.raw;if(O)this._mipLevels.indexOf(R)<0?(z.texImage2D(z.TEXTURE_2D,0,this.format,this.format,this.type,O),this._mipLevels.push(R)):z.texSubImage2D(z.TEXTURE_2D,R,o,C,this.format,this.type,O);else{if(!(h.shape&&h.stride&&h.data))throw new Error("gl-texture2d: Unsupported data type");if(h.shape.length<2||o+h.shape[1]>this._shape[1]>>>R||C+h.shape[0]>this._shape[0]>>>R||o<0||C<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function y(h,o,C,R,z,O,I,F){var D=F.dtype,N=F.shape.slice();if(N.length<2||N.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var U=0,X=0,oe=l(N,F.stride.slice());if("float32"===D?U=h.FLOAT:"float64"===D?(U=h.FLOAT,oe=!1,D="float32"):"uint8"===D?U=h.UNSIGNED_BYTE:(U=h.UNSIGNED_BYTE,oe=!1,D="uint8"),2===N.length)X=h.LUMINANCE,F=n(F.data,N=[N[0],N[1],1],[F.stride[0],F.stride[1],1],F.offset);else{if(3!==N.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===N[2])X=h.ALPHA;else if(2===N[2])X=h.LUMINANCE_ALPHA;else if(3===N[2])X=h.RGB;else{if(4!==N[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");X=h.RGBA}}if((X===h.LUMINANCE||X===h.ALPHA)&&(z===h.LUMINANCE||z===h.ALPHA)&&(X=z),X!==z)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var ne=F.size,W=I.indexOf(R)<0;if(W&&I.push(R),U===O&&oe)0===F.offset&&F.data.length===ne?W?h.texImage2D(h.TEXTURE_2D,R,z,N[0],N[1],0,z,O,F.data):h.texSubImage2D(h.TEXTURE_2D,R,o,C,N[0],N[1],z,O,F.data):W?h.texImage2D(h.TEXTURE_2D,R,z,N[0],N[1],0,z,O,F.data.subarray(F.offset,F.offset+ne)):h.texSubImage2D(h.TEXTURE_2D,R,o,C,N[0],N[1],z,O,F.data.subarray(F.offset,F.offset+ne));else{var G;G=O===h.FLOAT?i.mallocFloat32(ne):i.mallocUint8(ne);var $=n(G,N,[N[2],N[2]*N[0],1]);U===h.FLOAT&&O===h.UNSIGNED_BYTE?x($,F):t.assign($,F),W?h.texImage2D(h.TEXTURE_2D,R,z,N[0],N[1],0,z,O,G.subarray(0,ne)):h.texSubImage2D(h.TEXTURE_2D,R,o,C,N[0],N[1],z,O,G.subarray(0,ne)),O===h.FLOAT?i.freeFloat32(G):i.freeUint8(G)}}(z,o,C,R,this.format,this.type,this._mipLevels,h)}}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(e,c,d){"use strict";c.exports=function n(t,i,a){i?i.bind():t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null);var r=0|t.getParameter(t.MAX_VERTEX_ATTRIBS);if(a){if(a.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var g=0;g<a.length;++g){var s=a[g];if(s.buffer){var x=s.size||4,S=s.type||t.FLOAT,p=!!s.normalized,w=s.stride||0,l=s.offset||0;s.buffer.bind(),t.enableVertexAttribArray(g),t.vertexAttribPointer(g,x,S,p,w,l)}else{if("number"==typeof s)t.vertexAttrib1f(g,s);else if(1===s.length)t.vertexAttrib1f(g,s[0]);else if(2===s.length)t.vertexAttrib2f(g,s[0],s[1]);else if(3===s.length)t.vertexAttrib3f(g,s[0],s[1],s[2]);else{if(4!==s.length)throw new Error("gl-vao: Invalid vertex attribute");t.vertexAttrib4f(g,s[0],s[1],s[2],s[3])}t.disableVertexAttribArray(g)}}for(;g<r;++g)t.disableVertexAttribArray(g)}else for(t.bindBuffer(t.ARRAY_BUFFER,null),g=0;g<r;++g)t.disableVertexAttribArray(g)}},{}],148:[function(e,c,d){"use strict";var n=e("./do-bind.js");function t(a){this.gl=a,this._elements=null,this._attributes=null,this._elementsType=a.UNSIGNED_SHORT}t.prototype.bind=function(){n(this.gl,this._elements,this._attributes)},t.prototype.update=function(a,r,g){this._elements=r,this._attributes=a,this._elementsType=g||this.gl.UNSIGNED_SHORT},t.prototype.dispose=function(){},t.prototype.unbind=function(){},t.prototype.draw=function(a,r,g){g=g||0;var s=this.gl;this._elements?s.drawElements(a,r,this._elementsType,g):s.drawArrays(a,g,r)},c.exports=function i(a){return new t(a)}},{"./do-bind.js":147}],149:[function(e,c,d){"use strict";var n=e("./do-bind.js");function t(r,g,s,b,x,S){this.location=r,this.dimension=g,this.a=s,this.b=b,this.c=x,this.d=S}function i(r,g,s){this.gl=r,this._ext=g,this.handle=s,this._attribs=[],this._useElements=!1,this._elementsType=r.UNSIGNED_SHORT}t.prototype.bind=function(r){switch(this.dimension){case 1:r.vertexAttrib1f(this.location,this.a);break;case 2:r.vertexAttrib2f(this.location,this.a,this.b);break;case 3:r.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:r.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},i.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var r=0;r<this._attribs.length;++r)this._attribs[r].bind(this.gl)},i.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},i.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},i.prototype.update=function(r,g,s){if(this.bind(),n(this.gl,g,r),this.unbind(),this._attribs.length=0,r)for(var b=0;b<r.length;++b){var x=r[b];"number"==typeof x?this._attribs.push(new t(b,1,x)):Array.isArray(x)&&this._attribs.push(new t(b,x.length,x[0],x[1],x[2],x[3]))}this._useElements=!!g,this._elementsType=s||this.gl.UNSIGNED_SHORT},i.prototype.draw=function(r,g,s){s=s||0;var b=this.gl;this._useElements?b.drawElements(r,g,this._elementsType,s):b.drawArrays(r,s,g)},c.exports=function a(r,g){return new i(r,g,g.createVertexArrayOES())}},{"./do-bind.js":147}],150:[function(e,c,d){"use strict";var n=e("./lib/vao-native.js"),t=e("./lib/vao-emulated.js");function i(r){this.bindVertexArrayOES=r.bindVertexArray.bind(r),this.createVertexArrayOES=r.createVertexArray.bind(r),this.deleteVertexArrayOES=r.deleteVertexArray.bind(r)}c.exports=function a(r,g,s,b){var S,x=r.createVertexArray?new i(r):r.getExtension("OES_vertex_array_object");return(S=x?n(r,x):t(r)).update(g,s,b),S}},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(e,c,d){c.exports=function n(t,i,a){return t[0]=i[0]+a[0],t[1]=i[1]+a[1],t[2]=i[2]+a[2],t}},{}],152:[function(e,c,d){c.exports=function a(r,g){var s=n(r[0],r[1],r[2]),b=n(g[0],g[1],g[2]);t(s,s),t(b,b);var x=i(s,b);return x>1?0:Math.acos(x)};var n=e("./fromValues"),t=e("./normalize"),i=e("./dot")},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(e,c,d){c.exports=function n(t,i){return t[0]=Math.ceil(i[0]),t[1]=Math.ceil(i[1]),t[2]=Math.ceil(i[2]),t}},{}],154:[function(e,c,d){c.exports=function n(t){var i=new Float32Array(3);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i}},{}],155:[function(e,c,d){c.exports=function n(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t}},{}],156:[function(e,c,d){c.exports=function n(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}},{}],157:[function(e,c,d){c.exports=function n(t,i,a){var r=i[0],g=i[1],s=i[2],b=a[0],x=a[1],S=a[2];return t[0]=g*S-s*x,t[1]=s*b-r*S,t[2]=r*x-g*b,t}},{}],158:[function(e,c,d){c.exports=e("./distance")},{"./distance":159}],159:[function(e,c,d){c.exports=function n(t,i){var a=i[0]-t[0],r=i[1]-t[1],g=i[2]-t[2];return Math.sqrt(a*a+r*r+g*g)}},{}],160:[function(e,c,d){c.exports=e("./divide")},{"./divide":161}],161:[function(e,c,d){c.exports=function n(t,i,a){return t[0]=i[0]/a[0],t[1]=i[1]/a[1],t[2]=i[2]/a[2],t}},{}],162:[function(e,c,d){c.exports=function n(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]}},{}],163:[function(e,c,d){c.exports=1e-6},{}],164:[function(e,c,d){c.exports=function t(i,a){var r=i[0],g=i[1],s=i[2],b=a[0],x=a[1],S=a[2];return Math.abs(r-b)<=n*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(g-x)<=n*Math.max(1,Math.abs(g),Math.abs(x))&&Math.abs(s-S)<=n*Math.max(1,Math.abs(s),Math.abs(S))};var n=e("./epsilon")},{"./epsilon":163}],165:[function(e,c,d){c.exports=function n(t,i){return t[0]===i[0]&&t[1]===i[1]&&t[2]===i[2]}},{}],166:[function(e,c,d){c.exports=function n(t,i){return t[0]=Math.floor(i[0]),t[1]=Math.floor(i[1]),t[2]=Math.floor(i[2]),t}},{}],167:[function(e,c,d){c.exports=function t(i,a,r,g,s,b){var x,S;for(a||(a=3),r||(r=0),S=g?Math.min(g*a+r,i.length):i.length,x=r;x<S;x+=a)n[0]=i[x],n[1]=i[x+1],n[2]=i[x+2],s(n,n,b),i[x]=n[0],i[x+1]=n[1],i[x+2]=n[2];return i};var n=e("./create")()},{"./create":156}],168:[function(e,c,d){c.exports=function n(t,i,a){var r=new Float32Array(3);return r[0]=t,r[1]=i,r[2]=a,r}},{}],169:[function(e,c,d){c.exports={EPSILON:e("./epsilon"),create:e("./create"),clone:e("./clone"),angle:e("./angle"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),equals:e("./equals"),exactEquals:e("./exactEquals"),add:e("./add"),subtract:e("./subtract"),sub:e("./sub"),multiply:e("./multiply"),mul:e("./mul"),divide:e("./divide"),div:e("./div"),min:e("./min"),max:e("./max"),floor:e("./floor"),ceil:e("./ceil"),round:e("./round"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),dist:e("./dist"),squaredDistance:e("./squaredDistance"),sqrDist:e("./sqrDist"),length:e("./length"),len:e("./len"),squaredLength:e("./squaredLength"),sqrLen:e("./sqrLen"),negate:e("./negate"),inverse:e("./inverse"),normalize:e("./normalize"),dot:e("./dot"),cross:e("./cross"),lerp:e("./lerp"),random:e("./random"),transformMat4:e("./transformMat4"),transformMat3:e("./transformMat3"),transformQuat:e("./transformQuat"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),forEach:e("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(e,c,d){c.exports=function n(t,i){return t[0]=1/i[0],t[1]=1/i[1],t[2]=1/i[2],t}},{}],171:[function(e,c,d){c.exports=e("./length")},{"./length":172}],172:[function(e,c,d){c.exports=function n(t){var i=t[0],a=t[1],r=t[2];return Math.sqrt(i*i+a*a+r*r)}},{}],173:[function(e,c,d){c.exports=function n(t,i,a,r){var g=i[0],s=i[1],b=i[2];return t[0]=g+r*(a[0]-g),t[1]=s+r*(a[1]-s),t[2]=b+r*(a[2]-b),t}},{}],174:[function(e,c,d){c.exports=function n(t,i,a){return t[0]=Math.max(i[0],a[0]),t[1]=Math.max(i[1],a[1]),t[2]=Math.max(i[2],a[2]),t}},{}],175:[function(e,c,d){c.exports=function n(t,i,a){return t[0]=Math.min(i[0],a[0]),t[1]=Math.min(i[1],a[1]),t[2]=Math.min(i[2],a[2]),t}},{}],176:[function(e,c,d){c.exports=e("./multiply")},{"./multiply":177}],177:[function(e,c,d){c.exports=function n(t,i,a){return t[0]=i[0]*a[0],t[1]=i[1]*a[1],t[2]=i[2]*a[2],t}},{}],178:[function(e,c,d){c.exports=function n(t,i){return t[0]=-i[0],t[1]=-i[1],t[2]=-i[2],t}},{}],179:[function(e,c,d){c.exports=function n(t,i){var a=i[0],r=i[1],g=i[2],s=a*a+r*r+g*g;return s>0&&(s=1/Math.sqrt(s),t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s),t}},{}],180:[function(e,c,d){c.exports=function n(t,i){i=i||1;var a=2*Math.random()*Math.PI,r=2*Math.random()-1,g=Math.sqrt(1-r*r)*i;return t[0]=Math.cos(a)*g,t[1]=Math.sin(a)*g,t[2]=r*i,t}},{}],181:[function(e,c,d){c.exports=function n(t,i,a,r){var g=a[1],s=a[2],b=i[1]-g,x=i[2]-s,S=Math.sin(r),p=Math.cos(r);return t[0]=i[0],t[1]=g+b*p-x*S,t[2]=s+b*S+x*p,t}},{}],182:[function(e,c,d){c.exports=function n(t,i,a,r){var g=a[0],s=a[2],b=i[0]-g,x=i[2]-s,S=Math.sin(r),p=Math.cos(r);return t[0]=g+x*S+b*p,t[1]=i[1],t[2]=s+x*p-b*S,t}},{}],183:[function(e,c,d){c.exports=function n(t,i,a,r){var g=a[0],s=a[1],b=i[0]-g,x=i[1]-s,S=Math.sin(r),p=Math.cos(r);return t[0]=g+b*p-x*S,t[1]=s+b*S+x*p,t[2]=i[2],t}},{}],184:[function(e,c,d){c.exports=function n(t,i){return t[0]=Math.round(i[0]),t[1]=Math.round(i[1]),t[2]=Math.round(i[2]),t}},{}],185:[function(e,c,d){c.exports=function n(t,i,a){return t[0]=i[0]*a,t[1]=i[1]*a,t[2]=i[2]*a,t}},{}],186:[function(e,c,d){c.exports=function n(t,i,a,r){return t[0]=i[0]+a[0]*r,t[1]=i[1]+a[1]*r,t[2]=i[2]+a[2]*r,t}},{}],187:[function(e,c,d){c.exports=function n(t,i,a,r){return t[0]=i,t[1]=a,t[2]=r,t}},{}],188:[function(e,c,d){c.exports=e("./squaredDistance")},{"./squaredDistance":190}],189:[function(e,c,d){c.exports=e("./squaredLength")},{"./squaredLength":191}],190:[function(e,c,d){c.exports=function n(t,i){var a=i[0]-t[0],r=i[1]-t[1],g=i[2]-t[2];return a*a+r*r+g*g}},{}],191:[function(e,c,d){c.exports=function n(t){var i=t[0],a=t[1],r=t[2];return i*i+a*a+r*r}},{}],192:[function(e,c,d){c.exports=e("./subtract")},{"./subtract":193}],193:[function(e,c,d){c.exports=function n(t,i,a){return t[0]=i[0]-a[0],t[1]=i[1]-a[1],t[2]=i[2]-a[2],t}},{}],194:[function(e,c,d){c.exports=function n(t,i,a){var r=i[0],g=i[1],s=i[2];return t[0]=r*a[0]+g*a[3]+s*a[6],t[1]=r*a[1]+g*a[4]+s*a[7],t[2]=r*a[2]+g*a[5]+s*a[8],t}},{}],195:[function(e,c,d){c.exports=function n(t,i,a){var r=i[0],g=i[1],s=i[2],b=a[3]*r+a[7]*g+a[11]*s+a[15];return t[0]=(a[0]*r+a[4]*g+a[8]*s+a[12])/(b=b||1),t[1]=(a[1]*r+a[5]*g+a[9]*s+a[13])/b,t[2]=(a[2]*r+a[6]*g+a[10]*s+a[14])/b,t}},{}],196:[function(e,c,d){c.exports=function n(t,i,a){var r=i[0],g=i[1],s=i[2],b=a[0],x=a[1],S=a[2],p=a[3],w=p*r+x*s-S*g,l=p*g+S*r-b*s,y=p*s+b*g-x*r,A=-b*r-x*g-S*s;return t[0]=w*p+A*-b+l*-S-y*-x,t[1]=l*p+A*-x+y*-b-w*-S,t[2]=y*p+A*-S+w*-x-l*-b,t}},{}],197:[function(e,c,d){c.exports=function n(t,i,a){return t[0]=i[0]+a[0],t[1]=i[1]+a[1],t[2]=i[2]+a[2],t[3]=i[3]+a[3],t}},{}],198:[function(e,c,d){c.exports=function n(t){var i=new Float32Array(4);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i}},{}],199:[function(e,c,d){c.exports=function n(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t}},{}],200:[function(e,c,d){c.exports=function n(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}},{}],201:[function(e,c,d){c.exports=function n(t,i){var a=i[0]-t[0],r=i[1]-t[1],g=i[2]-t[2],s=i[3]-t[3];return Math.sqrt(a*a+r*r+g*g+s*s)}},{}],202:[function(e,c,d){c.exports=function n(t,i,a){return t[0]=i[0]/a[0],t[1]=i[1]/a[1],t[2]=i[2]/a[2],t[3]=i[3]/a[3],t}},{}],203:[function(e,c,d){c.exports=function n(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]+t[3]*i[3]}},{}],204:[function(e,c,d){c.exports=function n(t,i,a,r){var g=new Float32Array(4);return g[0]=t,g[1]=i,g[2]=a,g[3]=r,g}},{}],205:[function(e,c,d){c.exports={create:e("./create"),clone:e("./clone"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),add:e("./add"),subtract:e("./subtract"),multiply:e("./multiply"),divide:e("./divide"),min:e("./min"),max:e("./max"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),squaredDistance:e("./squaredDistance"),length:e("./length"),squaredLength:e("./squaredLength"),negate:e("./negate"),inverse:e("./inverse"),normalize:e("./normalize"),dot:e("./dot"),lerp:e("./lerp"),random:e("./random"),transformMat4:e("./transformMat4"),transformQuat:e("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(e,c,d){c.exports=function n(t,i){return t[0]=1/i[0],t[1]=1/i[1],t[2]=1/i[2],t[3]=1/i[3],t}},{}],207:[function(e,c,d){c.exports=function n(t){var i=t[0],a=t[1],r=t[2],g=t[3];return Math.sqrt(i*i+a*a+r*r+g*g)}},{}],208:[function(e,c,d){c.exports=function n(t,i,a,r){var g=i[0],s=i[1],b=i[2],x=i[3];return t[0]=g+r*(a[0]-g),t[1]=s+r*(a[1]-s),t[2]=b+r*(a[2]-b),t[3]=x+r*(a[3]-x),t}},{}],209:[function(e,c,d){c.exports=function n(t,i,a){return t[0]=Math.max(i[0],a[0]),t[1]=Math.max(i[1],a[1]),t[2]=Math.max(i[2],a[2]),t[3]=Math.max(i[3],a[3]),t}},{}],210:[function(e,c,d){c.exports=function n(t,i,a){return t[0]=Math.min(i[0],a[0]),t[1]=Math.min(i[1],a[1]),t[2]=Math.min(i[2],a[2]),t[3]=Math.min(i[3],a[3]),t}},{}],211:[function(e,c,d){c.exports=function n(t,i,a){return t[0]=i[0]*a[0],t[1]=i[1]*a[1],t[2]=i[2]*a[2],t[3]=i[3]*a[3],t}},{}],212:[function(e,c,d){c.exports=function n(t,i){return t[0]=-i[0],t[1]=-i[1],t[2]=-i[2],t[3]=-i[3],t}},{}],213:[function(e,c,d){c.exports=function n(t,i){var a=i[0],r=i[1],g=i[2],s=i[3],b=a*a+r*r+g*g+s*s;return b>0&&(b=1/Math.sqrt(b),t[0]=a*b,t[1]=r*b,t[2]=g*b,t[3]=s*b),t}},{}],214:[function(e,c,d){var n=e("./normalize"),t=e("./scale");c.exports=function i(a,r){return r=r||1,a[0]=Math.random(),a[1]=Math.random(),a[2]=Math.random(),a[3]=Math.random(),n(a,a),t(a,a,r),a}},{"./normalize":213,"./scale":215}],215:[function(e,c,d){c.exports=function n(t,i,a){return t[0]=i[0]*a,t[1]=i[1]*a,t[2]=i[2]*a,t[3]=i[3]*a,t}},{}],216:[function(e,c,d){c.exports=function n(t,i,a,r){return t[0]=i[0]+a[0]*r,t[1]=i[1]+a[1]*r,t[2]=i[2]+a[2]*r,t[3]=i[3]+a[3]*r,t}},{}],217:[function(e,c,d){c.exports=function n(t,i,a,r,g){return t[0]=i,t[1]=a,t[2]=r,t[3]=g,t}},{}],218:[function(e,c,d){c.exports=function n(t,i){var a=i[0]-t[0],r=i[1]-t[1],g=i[2]-t[2],s=i[3]-t[3];return a*a+r*r+g*g+s*s}},{}],219:[function(e,c,d){c.exports=function n(t){var i=t[0],a=t[1],r=t[2],g=t[3];return i*i+a*a+r*r+g*g}},{}],220:[function(e,c,d){c.exports=function n(t,i,a){return t[0]=i[0]-a[0],t[1]=i[1]-a[1],t[2]=i[2]-a[2],t[3]=i[3]-a[3],t}},{}],221:[function(e,c,d){c.exports=function n(t,i,a){var r=i[0],g=i[1],s=i[2],b=i[3];return t[0]=a[0]*r+a[4]*g+a[8]*s+a[12]*b,t[1]=a[1]*r+a[5]*g+a[9]*s+a[13]*b,t[2]=a[2]*r+a[6]*g+a[10]*s+a[14]*b,t[3]=a[3]*r+a[7]*g+a[11]*s+a[15]*b,t}},{}],222:[function(e,c,d){c.exports=function n(t,i,a){var r=i[0],g=i[1],s=i[2],b=a[0],x=a[1],S=a[2],p=a[3],w=p*r+x*s-S*g,l=p*g+S*r-b*s,y=p*s+b*g-x*r,A=-b*r-x*g-S*s;return t[0]=w*p+A*-b+l*-S-y*-x,t[1]=l*p+A*-x+y*-b-w*-S,t[2]=y*p+A*-S+w*-x-l*-b,t[3]=i[3],t}},{}],223:[function(e,c,d){var n=e("glsl-tokenizer"),t=e("atob-lite");c.exports=function i(a){for(var r=Array.isArray(a)?a:n(a),g=0;g<r.length;g++){var s=r[g];if("preprocessor"===s.type){var b=s.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(b&&b[2]){var S=b[2];return(b[1]?t(S):S).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(e,c,d){c.exports=function o(C){var I,F,V,R=0,z=0,O=g,D=[],N=[],oe=1,se=0,ne=0,W=!1,G=!1,$="",H=i,q=n;"300 es"===(C=C||{}).version&&(H=r,q=a);var K={},Y={};for(R=0;R<H.length;R++)K[H[R]]=!0;for(R=0;R<q.length;R++)Y[q[R]]=!0;return function(ye){return N=[],null!==ye?function J(ye){R=0,ye.toString&&(ye=ye.toString()),$+=ye.replace(/\r\n/g,"\n"),V=$.length;for(var Ce;I=$[R],R<V;){switch(Ce=R,O){case 0:R=xe();break;case 1:R=pe();break;case 2:R=ge();break;case 3:R=ke();break;case 4:R=be();break;case 11:R=de();break;case 5:R=Le();break;case s:R=De();break;case 9:R=le();break;case g:R=re()}Ce!==R&&("\n"===$[Ce]?(se=0,++oe):++se)}return z+=R,$=$.slice(R),N}(ye):function j(ye){return D.length&&te(D.join("")),O=10,te("(eof)"),N}()};function te(ye){ye.length&&N.push({type:h[O],data:ye,position:ne,line:oe,column:se})}function re(){return D=D.length?[]:D,"/"===F&&"*"===I?(ne=z+R-1,O=0,F=I,R+1):"/"===F&&"/"===I?(ne=z+R-1,O=1,F=I,R+1):"#"===I?(O=2,ne=z+R,R):/\s/.test(I)?(O=9,ne=z+R,R):(W=/\d/.test(I),G=/[^\w_]/.test(I),ne=z+R,O=W?4:G?3:s,R)}function le(){return/[^\s]/g.test(I)?(te(D.join("")),O=g,R):(D.push(I),F=I,R+1)}function ge(){return"\r"!==I&&"\n"!==I||"\\"===F?(D.push(I),F=I,R+1):(te(D.join("")),O=g,R)}function pe(){return ge()}function xe(){return"/"===I&&"*"===F?(D.push(I),te(D.join("")),O=g,R+1):(D.push(I),F=I,R+1)}function ke(){if("."===F&&/\d/.test(I))return O=5,R;if("/"===F&&"*"===I)return O=0,R;if("/"===F&&"/"===I)return O=1,R;if("."===I&&D.length){for(;we(D););return O=5,R}if(";"===I||")"===I||"("===I){if(D.length)for(;we(D););return te(I),O=g,R+1}var ye=2===D.length&&"="!==I;if(/[\w_\d\s]/.test(I)||ye){for(;we(D););return O=g,R}return D.push(I),F=I,R+1}function we(ye){for(var Fe,Ke,Ce=0;;){if(Fe=t.indexOf(ye.slice(0,ye.length+Ce).join("")),Ke=t[Fe],-1===Fe){if(Ce--+ye.length>0)continue;Ke=ye.slice(0,1).join("")}return te(Ke),ne+=Ke.length,(D=D.slice(Ke.length)).length}}function de(){return/[^a-fA-F0-9]/.test(I)?(te(D.join("")),O=g,R):(D.push(I),F=I,R+1)}function be(){return"."===I||/[eE]/.test(I)?(D.push(I),O=5,F=I,R+1):"x"===I&&1===D.length&&"0"===D[0]?(O=11,D.push(I),F=I,R+1):/[^\d]/.test(I)?(te(D.join("")),O=g,R):(D.push(I),F=I,R+1)}function Le(){return"f"===I&&(D.push(I),F=I,R+=1),/[eE]/.test(I)||("-"===I||"+"===I)&&/[eE]/.test(F)?(D.push(I),F=I,R+1):/[^\d]/.test(I)?(te(D.join("")),O=g,R):(D.push(I),F=I,R+1)}function De(){if(/[^\d\w_]/.test(I)){var ye=D.join("");return O=Y[ye]?8:K[ye]?7:6,te(D.join("")),O=g,R}return D.push(I),F=I,R+1}};var n=e("./lib/literals"),t=e("./lib/operators"),i=e("./lib/builtins"),a=e("./lib/literals-300es"),r=e("./lib/builtins-300es"),g=999,s=9999,h=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(e,c,d){var n=e("./builtins");n=n.slice().filter(function(t){return!/^(gl\_|texture)/.test(t)}),c.exports=n.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(e,c,d){c.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(e,c,d){var n=e("./literals");c.exports=n.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(e,c,d){c.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(e,c,d){c.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(e,c,d){var n=e("./index");c.exports=function t(i,a){var r=n(a),g=[];return(g=g.concat(r(i))).concat(r(null))}},{"./index":224}],231:[function(e,c,d){c.exports=function(n){"string"==typeof n&&(n=[n]);for(var t=[].slice.call(arguments,1),i=[],a=0;a<n.length-1;a++)i.push(n[a],t[a]||"");return i.push(n[a]),i.join("")}},{}],232:[function(e,c,d){"use strict";var n=e("is-browser");c.exports=n&&function t(){var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,a),window.removeEventListener("test",null,a)}catch(r){i=!1}return i}()},{"is-browser":236}],233:[function(e,c,d){"use strict";c.exports=function p(w,l){var y=w.length;if(0===y)throw new Error("Must have at least d+1 points");var A=w[0].length;if(y<=A)throw new Error("Must input at least d+1 points");var T=w.slice(0,A+1),M=n.apply(void 0,T);if(0===M)throw new Error("Input not in general position");for(var f=new Array(A+1),u=0;u<=A;++u)f[u]=u;M<0&&(f[0]=1,f[1]=0);var h=new i(f,new Array(A+1),!1),o=h.adjacent,C=new Array(A+2);for(u=0;u<=A;++u){for(var R=f.slice(),z=0;z<=A;++z)z===u&&(R[z]=-1);var O=R[0];R[0]=R[1],R[1]=O;var I=new i(R,new Array(A+1),!0);o[u]=I,C[u]=I}for(C[A+1]=h,u=0;u<=A;++u){R=o[u].vertices;var F=o[u].adjacent;for(z=0;z<=A;++z){var D=R[z];if(D<0)F[z]=h;else for(var N=0;N<=A;++N)o[N].vertices.indexOf(D)<0&&(F[z]=o[N])}}var U=new x(A,T,C),X=!!l;for(u=A+1;u<y;++u)U.insert(w[u],X);return U.boundary()};var n=e("robust-orientation"),t=e("simplicial-complex").compareCells;function i(w,l,y){this.vertices=w,this.adjacent=l,this.boundary=y,this.lastVisited=-1}function a(w,l,y){this.vertices=w,this.cell=l,this.index=y}function r(w,l){return t(w.vertices,l.vertices)}i.prototype.flip=function(){var w=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=w;var l=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=l};var b=[];function x(w,l,y){this.dimension=w,this.vertices=l,this.simplices=y,this.interior=y.filter(function(M){return!M.boundary}),this.tuple=new Array(w+1);for(var A=0;A<=w;++A)this.tuple[A]=this.vertices[A];var T=b[w];T||(T=b[w]=function s(w){var l=n[w+1];return l||(l=n),function g(w){return function(){return w.apply(this,this.tuple)}}(l)}(w)),this.orient=T}var S=x.prototype;S.handleBoundaryDegeneracy=function(w,l){var y=this.dimension,A=this.vertices.length-1,T=this.tuple,M=this.vertices,f=[w];for(w.lastVisited=-A;f.length>0;)for(var u=(w=f.pop()).adjacent,h=0;h<=y;++h){var o=u[h];if(o.boundary&&!(o.lastVisited<=-A)){for(var C=o.vertices,R=0;R<=y;++R){var z=C[R];T[R]=z<0?l:M[z]}var O=this.orient();if(O>0)return o;o.lastVisited=-A,0===O&&f.push(o)}}return null},S.walk=function(w,l){var y=this.vertices.length-1,A=this.dimension,T=this.vertices,M=this.tuple,f=l?this.interior.length*Math.random()|0:this.interior.length-1,u=this.interior[f];e:for(;!u.boundary;){for(var h=u.vertices,o=u.adjacent,C=0;C<=A;++C)M[C]=T[h[C]];for(u.lastVisited=y,C=0;C<=A;++C){var R=o[C];if(!(R.lastVisited>=y)){var z=M[C];M[C]=w;var O=this.orient();if(M[C]=z,O<0){u=R;continue e}R.lastVisited=R.boundary?-y:y}}return}return u},S.addPeaks=function(w,l){var y=this.vertices.length-1,A=this.dimension,T=this.vertices,M=this.tuple,f=this.interior,u=this.simplices,h=[l];l.lastVisited=y,l.vertices[l.vertices.indexOf(-1)]=y,l.boundary=!1,f.push(l);for(var o=[];h.length>0;){var C=(l=h.pop()).vertices,R=l.adjacent,z=C.indexOf(y);if(!(z<0))for(var O=0;O<=A;++O)if(O!==z){var I=R[O];if(I.boundary&&!(I.lastVisited>=y)){var F=I.vertices;if(I.lastVisited!==-y){for(var D=0,N=0;N<=A;++N)F[N]<0?(D=N,M[N]=w):M[N]=T[F[N]];if(this.orient()>0){F[D]=y,I.boundary=!1,f.push(I),h.push(I),I.lastVisited=y;continue}I.lastVisited=-y}var X=I.adjacent,oe=C.slice(),se=R.slice(),ne=new i(oe,se,!0);u.push(ne);var W=X.indexOf(l);if(!(W<0))for(X[W]=ne,se[z]=I,oe[O]=-1,se[O]=l,R[O]=ne,ne.flip(),N=0;N<=A;++N){var G=oe[N];if(!(G<0||G===y)){for(var $=new Array(A-1),V=0,H=0;H<=A;++H){var q=oe[H];q<0||H===N||($[V++]=q)}o.push(new a($,ne,N))}}}}}for(o.sort(r),O=0;O+1<o.length;O+=2){var K=o[O],Y=o[O+1];K.index<0||Y.index<0||(K.cell.adjacent[K.index]=Y.cell,Y.cell.adjacent[Y.index]=K.cell)}},S.insert=function(w,l){var y=this.vertices;y.push(w);var A=this.walk(w,l);if(A){for(var T=this.dimension,M=this.tuple,f=0;f<=T;++f){var u=A.vertices[f];M[f]=u<0?w:y[u]}var h=this.orient(M);h<0||0===h&&!(A=this.handleBoundaryDegeneracy(A,w))||this.addPeaks(w,A)}},S.boundary=function(){for(var w=this.dimension,l=[],y=this.simplices,A=y.length,T=0;T<A;++T){var M=y[T];if(M.boundary){for(var f=new Array(w),u=M.vertices,h=0,o=0,C=0;C<=w;++C)u[C]>=0?f[h++]=u[C]:o=1&C;if(o===(1&w)){var R=f[0];f[0]=f[1],f[1]=R}l.push(f)}}return l}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(e,c,d){"use strict";var n=e("binary-search-bounds");function r(o,C,R,z,O){this.mid=o,this.left=C,this.right=R,this.leftPoints=z,this.rightPoints=O,this.count=(C?C.count:0)+(R?R.count:0)+z.length}c.exports=function h(o){return new f(o&&0!==o.length?M(o):null)};var g=r.prototype;function s(o,C){o.mid=C.mid,o.left=C.left,o.right=C.right,o.leftPoints=C.leftPoints,o.rightPoints=C.rightPoints,o.count=C.count}function b(o,C){var R=M(C);o.mid=R.mid,o.left=R.left,o.right=R.right,o.leftPoints=R.leftPoints,o.rightPoints=R.rightPoints,o.count=R.count}function x(o,C){var R=o.intervals([]);R.push(C),b(o,R)}function S(o,C){var R=o.intervals([]),z=R.indexOf(C);return z<0?0:(R.splice(z,1),b(o,R),1)}function p(o,C,R){for(var z=0;z<o.length&&o[z][0]<=C;++z){var O=R(o[z]);if(O)return O}}function w(o,C,R){for(var z=o.length-1;z>=0&&o[z][1]>=C;--z){var O=R(o[z]);if(O)return O}}function l(o,C){for(var R=0;R<o.length;++R){var z=C(o[R]);if(z)return z}}function y(o,C){return o-C}function A(o,C){return o[0]-C[0]||o[1]-C[1]}function T(o,C){return o[1]-C[1]||o[0]-C[0]}function M(o){if(0===o.length)return null;for(var C=[],R=0;R<o.length;++R)C.push(o[R][0],o[R][1]);C.sort(y);var z=C[C.length>>1],O=[],I=[],F=[];for(R=0;R<o.length;++R){var D=o[R];D[1]<z?O.push(D):z<D[0]?I.push(D):F.push(D)}var N=F,U=F.slice();return N.sort(A),U.sort(T),new r(z,M(O),M(I),N,U)}function f(o){this.root=o}g.intervals=function(o){return o.push.apply(o,this.leftPoints),this.left&&this.left.intervals(o),this.right&&this.right.intervals(o),o},g.insert=function(o){var C=this.count-this.leftPoints.length;if(this.count+=1,o[1]<this.mid)this.left?4*(this.left.count+1)>3*(C+1)?x(this,o):this.left.insert(o):this.left=M([o]);else if(o[0]>this.mid)this.right?4*(this.right.count+1)>3*(C+1)?x(this,o):this.right.insert(o):this.right=M([o]);else{var R=n.ge(this.leftPoints,o,A),z=n.ge(this.rightPoints,o,T);this.leftPoints.splice(R,0,o),this.rightPoints.splice(z,0,o)}},g.remove=function(o){var C=this.count-this.leftPoints;if(o[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(C-1)?S(this,o):2===(z=this.left.remove(o))?(this.left=null,this.count-=1,1):(1===z&&(this.count-=1),z):0;if(o[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(C-1)?S(this,o):2===(z=this.right.remove(o))?(this.right=null,this.count-=1,1):(1===z&&(this.count-=1),z):0;if(1===this.count)return this.leftPoints[0]===o?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===o){if(this.left&&this.right){for(var I=this,F=this.left;F.right;)I=F,F=F.right;if(I===this)F.right=this.right;else{var D=this.left,z=this.right;I.count-=F.count,I.right=F.left,F.left=D,F.right=z}s(this,F),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else s(this,this.left?this.left:this.right);return 1}for(D=n.ge(this.leftPoints,o,A);D<this.leftPoints.length&&this.leftPoints[D][0]===o[0];++D)if(this.leftPoints[D]===o)for(this.count-=1,this.leftPoints.splice(D,1),z=n.ge(this.rightPoints,o,T);z<this.rightPoints.length&&this.rightPoints[z][1]===o[1];++z)if(this.rightPoints[z]===o)return this.rightPoints.splice(z,1),1;return 0},g.queryPoint=function(o,C){return o<this.mid?this.left&&(R=this.left.queryPoint(o,C))?R:p(this.leftPoints,o,C):o>this.mid?this.right&&(R=this.right.queryPoint(o,C))?R:w(this.rightPoints,o,C):l(this.leftPoints,C);var R},g.queryInterval=function(o,C,R){var z;return o<this.mid&&this.left&&(z=this.left.queryInterval(o,C,R))||C>this.mid&&this.right&&(z=this.right.queryInterval(o,C,R))?z:C<this.mid?p(this.leftPoints,C,R):o>this.mid?w(this.rightPoints,o,R):l(this.leftPoints,R)};var u=f.prototype;u.insert=function(o){this.root?this.root.insert(o):this.root=new r(o[0],null,null,[o],[o])},u.remove=function(o){if(this.root){var C=this.root.remove(o);return 2===C&&(this.root=null),0!==C}return!1},u.queryPoint=function(o,C){if(this.root)return this.root.queryPoint(o,C)},u.queryInterval=function(o,C,R){if(o<=C&&this.root)return this.root.queryInterval(o,C,R)},Object.defineProperty(u,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(u,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":31}],235:[function(e,c,d){"use strict";c.exports=function n(t){for(var i=new Array(t),a=0;a<t;++a)i[a]=a;return i}},{}],236:[function(e,c,d){c.exports=!0},{}],237:[function(e,c,d){function n(i){return!!i.constructor&&"function"==typeof i.constructor.isBuffer&&i.constructor.isBuffer(i)}c.exports=function(i){return null!=i&&(n(i)||function t(i){return"function"==typeof i.readFloatLE&&"function"==typeof i.slice&&n(i.slice(0,0))}(i)||!!i._isBuffer)}},{}],238:[function(e,c,d){"use strict";c.exports=i,c.exports.isMobile=i,c.exports.default=i;var n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function i(a){a||(a={});var r=a.ua;if(!r&&"undefined"!=typeof navigator&&(r=navigator.userAgent),r&&r.headers&&"string"==typeof r.headers["user-agent"]&&(r=r.headers["user-agent"]),"string"!=typeof r)return!1;var g=a.tablet?t.test(r):n.test(r);return!g&&a.tablet&&a.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==r.indexOf("Macintosh")&&-1!==r.indexOf("Safari")&&(g=!0),g}},{}],239:[function(e,c,d){"use strict";c.exports=function(n){for(var i,t=n.length,a=0;a<t;a++)if(((i=n.charCodeAt(a))<9||i>13)&&32!==i&&133!==i&&160!==i&&5760!==i&&6158!==i&&(i<8192||i>8205)&&8232!==i&&8233!==i&&8239!==i&&8287!==i&&8288!==i&&12288!==i&&65279!==i)return!1;return!0}},{}],240:[function(e,c,d){c.exports=function n(t,i,a){return t*(1-a)+i*a}},{}],241:[function(e,c,d){var n=e("./normalize"),t=e("gl-mat4/create"),i=e("gl-mat4/clone"),a=e("gl-mat4/determinant"),r=e("gl-mat4/invert"),g=e("gl-mat4/transpose"),s={length:e("gl-vec3/length"),normalize:e("gl-vec3/normalize"),dot:e("gl-vec3/dot"),cross:e("gl-vec3/cross")},b=t(),x=t(),S=[0,0,0,0],p=[[0,0,0],[0,0,0],[0,0,0]],w=[0,0,0];function A(T,M,f,u,h){T[0]=M[0]*u+f[0]*h,T[1]=M[1]*u+f[1]*h,T[2]=M[2]*u+f[2]*h}c.exports=function(M,f,u,h,o,C){if(f||(f=[0,0,0]),u||(u=[0,0,0]),h||(h=[0,0,0]),o||(o=[0,0,0,1]),C||(C=[0,0,0,1]),!n(b,M)||(i(x,b),x[3]=0,x[7]=0,x[11]=0,x[15]=1,Math.abs(a(x)<1e-8)))return!1;var R=b[3],z=b[7],O=b[11],I=b[12],F=b[13],D=b[14],N=b[15];if(0!==R||0!==z||0!==O){if(S[0]=R,S[1]=z,S[2]=O,S[3]=N,!r(x,x))return!1;g(x,x),function l(T,M,f){var u=M[0],h=M[1],o=M[2],C=M[3];return T[0]=f[0]*u+f[4]*h+f[8]*o+f[12]*C,T[1]=f[1]*u+f[5]*h+f[9]*o+f[13]*C,T[2]=f[2]*u+f[6]*h+f[10]*o+f[14]*C,T[3]=f[3]*u+f[7]*h+f[11]*o+f[15]*C,T}(o,S,x)}else o[0]=o[1]=o[2]=0,o[3]=1;if(f[0]=I,f[1]=F,f[2]=D,function y(T,M){T[0][0]=M[0],T[0][1]=M[1],T[0][2]=M[2],T[1][0]=M[4],T[1][1]=M[5],T[1][2]=M[6],T[2][0]=M[8],T[2][1]=M[9],T[2][2]=M[10]}(p,b),u[0]=s.length(p[0]),s.normalize(p[0],p[0]),h[0]=s.dot(p[0],p[1]),A(p[1],p[1],p[0],1,-h[0]),u[1]=s.length(p[1]),s.normalize(p[1],p[1]),h[0]/=u[1],h[1]=s.dot(p[0],p[2]),A(p[2],p[2],p[0],1,-h[1]),h[2]=s.dot(p[1],p[2]),A(p[2],p[2],p[1],1,-h[2]),u[2]=s.length(p[2]),s.normalize(p[2],p[2]),h[1]/=u[2],h[2]/=u[2],s.cross(w,p[1],p[2]),s.dot(p[0],w)<0)for(var X=0;X<3;X++)u[X]*=-1,p[X][0]*=-1,p[X][1]*=-1,p[X][2]*=-1;return C[0]=.5*Math.sqrt(Math.max(1+p[0][0]-p[1][1]-p[2][2],0)),C[1]=.5*Math.sqrt(Math.max(1-p[0][0]+p[1][1]-p[2][2],0)),C[2]=.5*Math.sqrt(Math.max(1-p[0][0]-p[1][1]+p[2][2],0)),C[3]=.5*Math.sqrt(Math.max(1+p[0][0]+p[1][1]+p[2][2],0)),p[2][1]>p[1][2]&&(C[0]=-C[0]),p[0][2]>p[2][0]&&(C[1]=-C[1]),p[1][0]>p[0][1]&&(C[2]=-C[2]),!0}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(e,c,d){c.exports=function(t,i){var a=i[15];if(0===a)return!1;for(var r=1/a,g=0;g<16;g++)t[g]=i[g]*r;return!0}},{}],243:[function(e,c,d){var n=e("gl-vec3/lerp"),t=e("mat4-recompose"),i=e("mat4-decompose"),a=e("gl-mat4/determinant"),r=e("quat-slerp"),g=S(),s=S(),b=S();function S(){return{translate:p(),scale:p(1),skew:p(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function p(l){return[l||0,l||0,l||0]}c.exports=function x(l,y,A,T){if(0===a(y)||0===a(A))return!1;var M=i(y,g.translate,g.scale,g.skew,g.perspective,g.quaternion),f=i(A,s.translate,s.scale,s.skew,s.perspective,s.quaternion);return!(!M||!f||(n(b.translate,g.translate,s.translate,T),n(b.skew,g.skew,s.skew,T),n(b.scale,g.scale,s.scale,T),n(b.perspective,g.perspective,s.perspective,T),r(b.quaternion,g.quaternion,s.quaternion,T),t(l,b.translate,b.scale,b.skew,b.perspective,b.quaternion),0))}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(e,c,d){var n={identity:e("gl-mat4/identity"),translate:e("gl-mat4/translate"),multiply:e("gl-mat4/multiply"),create:e("gl-mat4/create"),scale:e("gl-mat4/scale"),fromRotationTranslation:e("gl-mat4/fromRotationTranslation")},i=(n.create(),n.create());c.exports=function(r,g,s,b,x,S){return n.identity(r),n.fromRotationTranslation(r,S,g),r[3]=x[0],r[7]=x[1],r[11]=x[2],r[15]=x[3],n.identity(i),0!==b[2]&&(i[9]=b[2],n.multiply(r,r,i)),0!==b[1]&&(i[9]=0,i[8]=b[1],n.multiply(r,r,i)),0!==b[0]&&(i[8]=0,i[4]=b[0],n.multiply(r,r,i)),n.scale(r,r,s),r}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(e,c,d){"use strict";var n=e("binary-search-bounds"),t=e("mat4-interpolate"),i=e("gl-mat4/invert"),a=e("gl-mat4/rotateX"),r=e("gl-mat4/rotateY"),g=e("gl-mat4/rotateZ"),s=e("gl-mat4/lookAt"),b=e("gl-mat4/translate"),S=(e("gl-mat4/scale"),e("gl-vec3/normalize")),p=[0,0,0];function w(T){this._components=T.slice(),this._time=[0],this.prevMatrix=T.slice(),this.nextMatrix=T.slice(),this.computedMatrix=T.slice(),this.computedInverse=T.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}c.exports=function A(T){return new w((T=T||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var l=w.prototype;l.recalcMatrix=function(T){var M=this._time,f=n.le(M,T),u=this.computedMatrix;if(!(f<0)){var h=this._components;if(f===M.length-1)for(var o=16*f,C=0;C<16;++C)u[C]=h[o++];else{var R=M[f+1]-M[f],z=(o=16*f,this.prevMatrix),O=!0;for(C=0;C<16;++C)z[C]=h[o++];var I=this.nextMatrix;for(C=0;C<16;++C)I[C]=h[o++],O=O&&z[C]===I[C];if(R<1e-6||O)for(C=0;C<16;++C)u[C]=z[C];else t(u,z,I,(T-M[f])/R)}var F=this.computedUp;F[0]=u[1],F[1]=u[5],F[2]=u[9],S(F,F);var D=this.computedInverse;i(D,u);var N=this.computedEye,U=D[15];N[0]=D[12]/U,N[1]=D[13]/U,N[2]=D[14]/U;var X=this.computedCenter,oe=Math.exp(this.computedRadius[0]);for(C=0;C<3;++C)X[C]=N[C]-u[2+4*C]*oe}},l.idle=function(T){if(!(T<this.lastT())){for(var M=this._components,f=M.length-16,u=0;u<16;++u)M.push(M[f++]);this._time.push(T)}},l.flush=function(T){var M=n.gt(this._time,T)-2;M<0||(this._time.splice(0,M),this._components.splice(0,16*M))},l.lastT=function(){return this._time[this._time.length-1]},l.lookAt=function(T,M,f,u){this.recalcMatrix(T),this.setMatrix(T,s(this.computedMatrix,M=M||this.computedEye,f=f||p,u=u||this.computedUp));for(var h=0,o=0;o<3;++o)h+=Math.pow(f[o]-M[o],2);h=Math.log(Math.sqrt(h)),this.computedRadius[0]=h},l.rotate=function(T,M,f,u){this.recalcMatrix(T);var h=this.computedInverse;M&&r(h,h,M),f&&a(h,h,f),u&&g(h,h,u),this.setMatrix(T,i(this.computedMatrix,h))};var y=[0,0,0];l.pan=function(T,M,f,u){y[0]=-(M||0),y[1]=-(f||0),y[2]=-(u||0),this.recalcMatrix(T);var h=this.computedInverse;b(h,h,y),this.setMatrix(T,i(h,h))},l.translate=function(T,M,f,u){y[0]=M||0,y[1]=f||0,y[2]=u||0,this.recalcMatrix(T);var h=this.computedMatrix;b(h,h,y),this.setMatrix(T,h)},l.setMatrix=function(T,M){if(!(T<this.lastT())){this._time.push(T);for(var f=0;f<16;++f)this._components.push(M[f])}},l.setDistance=function(T,M){this.computedRadius[0]=M},l.setDistanceLimits=function(T,M){var f=this._limits;f[0]=T,f[1]=M},l.getDistanceLimits=function(T){var M=this._limits;return T?(T[0]=M[0],T[1]=M[1],T):M}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(e,c,d){"use strict";c.exports=function t(i){var a=i.length;if(a<3){for(var w=new Array(a),r=0;r<a;++r)w[r]=r;return 2===a&&i[0][0]===i[1][0]&&i[0][1]===i[1][1]?[0]:w}var g=new Array(a);for(r=0;r<a;++r)g[r]=r;g.sort(function(T,M){return i[T][0]-i[M][0]||i[T][1]-i[M][1]});var s=[g[0],g[1]],b=[g[0],g[1]];for(r=2;r<a;++r){for(var x=g[r],S=i[x],p=s.length;p>1&&n(i[s[p-2]],i[s[p-1]],S)<=0;)p-=1,s.pop();for(s.push(x),p=b.length;p>1&&n(i[b[p-2]],i[b[p-1]],S)>=0;)p-=1,b.pop();b.push(x)}w=new Array(b.length+s.length-2);for(var l=0,y=(r=0,s.length);r<y;++r)w[l++]=s[r];for(var A=b.length-2;A>0;--A)w[l++]=b[A];return w};var n=e("robust-orientation")[3]},{"robust-orientation":284}],247:[function(e,c,d){"use strict";c.exports=function t(i,a){a||(a=i,i=window);var r=0,g=0,s=0,b={shift:!1,alt:!1,control:!1,meta:!1},x=!1;function S(o){var C=!1;return"altKey"in o&&(C=C||o.altKey!==b.alt,b.alt=!!o.altKey),"shiftKey"in o&&(C=C||o.shiftKey!==b.shift,b.shift=!!o.shiftKey),"ctrlKey"in o&&(C=C||o.ctrlKey!==b.control,b.control=!!o.ctrlKey),"metaKey"in o&&(C=C||o.metaKey!==b.meta,b.meta=!!o.metaKey),C}function p(o,C){var R=n.x(C),z=n.y(C);"buttons"in C&&(o=0|C.buttons),(o!==r||R!==g||z!==s||S(C))&&(r=0|o,g=R||0,s=z||0,a&&a(r,g,s,b))}function w(o){p(0,o)}function l(){(r||g||s||b.shift||b.alt||b.meta||b.control)&&(g=s=0,r=0,b.shift=b.alt=b.control=b.meta=!1,a&&a(0,0,0,b))}function y(o){S(o)&&a&&a(r,g,s,b)}function A(o){0===n.buttons(o)?p(0,o):p(r,o)}function T(o){p(r|n.buttons(o),o)}function M(o){p(r&~n.buttons(o),o)}function f(){x||(x=!0,i.addEventListener("mousemove",A),i.addEventListener("mousedown",T),i.addEventListener("mouseup",M),i.addEventListener("mouseleave",w),i.addEventListener("mouseenter",w),i.addEventListener("mouseout",w),i.addEventListener("mouseover",w),i.addEventListener("blur",l),i.addEventListener("keyup",y),i.addEventListener("keydown",y),i.addEventListener("keypress",y),i!==window&&(window.addEventListener("blur",l),window.addEventListener("keyup",y),window.addEventListener("keydown",y),window.addEventListener("keypress",y)))}f();var h={element:i};return Object.defineProperties(h,{enabled:{get:function(){return x},set:function(o){o?f():function u(){!x||(x=!1,i.removeEventListener("mousemove",A),i.removeEventListener("mousedown",T),i.removeEventListener("mouseup",M),i.removeEventListener("mouseleave",w),i.removeEventListener("mouseenter",w),i.removeEventListener("mouseout",w),i.removeEventListener("mouseover",w),i.removeEventListener("blur",l),i.removeEventListener("keyup",y),i.removeEventListener("keydown",y),i.removeEventListener("keypress",y),i!==window&&(window.removeEventListener("blur",l),window.removeEventListener("keyup",y),window.removeEventListener("keydown",y),window.removeEventListener("keypress",y)))}()},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return g},enumerable:!0},y:{get:function(){return s},enumerable:!0},mods:{get:function(){return b},enumerable:!0}}),h};var n=e("mouse-event")},{"mouse-event":249}],248:[function(e,c,d){var n={left:0,top:0};c.exports=function t(a,r,g){r=r||a.currentTarget||a.srcElement,Array.isArray(g)||(g=[0,0]);var s=a.clientX||0,b=a.clientY||0,x=function i(a){return a===window||a===document||a===document.body?n:a.getBoundingClientRect()}(r);return g[0]=s-x.left,g[1]=b-x.top,g}},{}],249:[function(e,c,d){"use strict";function t(r){return r.target||r.srcElement||window}d.buttons=function n(r){if("object"==typeof r){if("buttons"in r)return r.buttons;if("which"in r){if(2===(g=r.which))return 4;if(3===g)return 2;if(g>0)return 1<<g-1}else if("button"in r){var g;if(1===(g=r.button))return 4;if(2===g)return 2;if(g>=0)return 1<<g}}return 0},d.element=t,d.x=function i(r){if("object"==typeof r){if("offsetX"in r)return r.offsetX;var s=t(r).getBoundingClientRect();return r.clientX-s.left}return 0},d.y=function a(r){if("object"==typeof r){if("offsetY"in r)return r.offsetY;var s=t(r).getBoundingClientRect();return r.clientY-s.top}return 0}},{}],250:[function(e,c,d){"use strict";var n=e("to-px");c.exports=function t(i,a,r){"function"==typeof i&&(r=!!a,a=i,i=window);var g=n("ex",i),s=function(b){r&&b.preventDefault();var x=b.deltaX||0,S=b.deltaY||0,p=b.deltaZ||0,l=1;switch(b.deltaMode){case 1:l=g;break;case 2:l=window.innerHeight}if(S*=l,p*=l,(x*=l)||S||p)return a(x,S,p,b)};return i.addEventListener("wheel",s),s}},{"to-px":304}],251:[function(e,c,d){"use strict";var n=e("typedarray-pool");c.exports=function a(r){function g(l){throw new Error("ndarray-extract-contour: "+l)}"object"!=typeof r&&g("Must specify arguments");var s=r.order;Array.isArray(s)||g("Must specify order");var b=r.arrayArguments||1;b<1&&g("Must have at least one array argument");var x=r.scalarArguments||0;x<0&&g("Scalar arg count must be > 0"),"function"!=typeof r.vertex&&g("Must specify vertex creation function"),"function"!=typeof r.cell&&g("Must specify cell creation function"),"function"!=typeof r.phase&&g("Must specify phase function");for(var S=r.getters||[],p=new Array(b),w=0;w<b;++w)p[w]=S.indexOf(w)>=0;return function i(r,g,s,b,x,S){var p=[S,x].join(",");return(0,t[p])(r,g,s,n.mallocUint32,n.freeUint32)}(r.vertex,r.cell,r.phase,0,s,p)};var t={"false,0,1":function(g,s,b,x,S){return function(w,l,y,A){var R,T=0|w.shape[0],M=0|w.shape[1],f=w.data,h=0|w.stride[0],o=0|w.stride[1],C=0|w.offset,z=0|-h,O=0,I=0|-o,F=0,D=-h-o|0,N=0,U=0|h,X=o-h*T|0,oe=0,se=0,ne=0,W=2*T|0,G=x(W),$=x(W),V=0,H=0,q=-1,K=-1,Y=0,te=0|-T,J=0|T,j=0,re=-T-1|0,le=T-1|0,ge=0,pe=0,xe=0;for(oe=0;oe<T;++oe)G[V++]=b(f[C],l,y,A),C+=U;if(C+=X,M>0){if(se=1,G[V++]=b(f[C],l,y,A),C+=U,T>0)for(oe=1,H=G[V]=b(R=f[C],l,y,A),j=G[V+te],ge=G[V+re],(H!==(Y=G[V+q])||H!==j||H!==ge)&&(g(oe,se,R,O=f[C+z],F=f[C+I],N=f[C+D],H,Y,j,ge,l,y,A),pe=$[V]=ne++),V+=1,C+=U,oe=2;oe<T;++oe)H=G[V]=b(R=f[C],l,y,A),j=G[V+te],ge=G[V+re],(H!==(Y=G[V+q])||H!==j||H!==ge)&&(g(oe,se,R,O=f[C+z],F=f[C+I],N=f[C+D],H,Y,j,ge,l,y,A),pe=$[V]=ne++,ge!==Y&&s($[V+q],pe,N,O,ge,Y,l,y,A)),V+=1,C+=U;for(C+=X,V=0,xe=q,q=K,K=xe,xe=te,te=J,J=xe,xe=re,re=le,le=xe,se=2;se<M;++se){if(G[V++]=b(f[C],l,y,A),C+=U,T>0)for(oe=1,H=G[V]=b(R=f[C],l,y,A),j=G[V+te],ge=G[V+re],(H!==(Y=G[V+q])||H!==j||H!==ge)&&(g(oe,se,R,O=f[C+z],F=f[C+I],N=f[C+D],H,Y,j,ge,l,y,A),pe=$[V]=ne++,ge!==j&&s($[V+te],pe,F,N,j,ge,l,y,A)),V+=1,C+=U,oe=2;oe<T;++oe)H=G[V]=b(R=f[C],l,y,A),j=G[V+te],ge=G[V+re],(H!==(Y=G[V+q])||H!==j||H!==ge)&&(g(oe,se,R,O=f[C+z],F=f[C+I],N=f[C+D],H,Y,j,ge,l,y,A),pe=$[V]=ne++,ge!==j&&s($[V+te],pe,F,N,j,ge,l,y,A),ge!==Y&&s($[V+q],pe,N,O,ge,Y,l,y,A)),V+=1,C+=U;1&se&&(V=0),xe=q,q=K,K=xe,xe=te,te=J,J=xe,xe=re,re=le,le=xe,C+=X}}S($),S(G)}},"false,1,0":function(g,s,b,x,S){return function(w,l,y,A){var R,T=0|w.shape[0],M=0|w.shape[1],f=w.data,h=0|w.stride[0],o=0|w.stride[1],C=0|w.offset,z=0|-h,O=0,I=0|-o,F=0,D=-h-o|0,N=0,U=0|o,X=h-o*M|0,oe=0,se=0,ne=0,W=2*M|0,G=x(W),$=x(W),V=0,H=0,q=-1,K=-1,Y=0,te=0|-M,J=0|M,j=0,re=-M-1|0,le=M-1|0,ge=0,pe=0,xe=0;for(se=0;se<M;++se)G[V++]=b(f[C],l,y,A),C+=U;if(C+=X,T>0){if(oe=1,G[V++]=b(f[C],l,y,A),C+=U,M>0)for(se=1,H=G[V]=b(R=f[C],l,y,A),Y=G[V+q],ge=G[V+re],(H!==(j=G[V+te])||H!==Y||H!==ge)&&(g(oe,se,R,O=f[C+z],F=f[C+I],N=f[C+D],H,j,Y,ge,l,y,A),pe=$[V]=ne++),V+=1,C+=U,se=2;se<M;++se)H=G[V]=b(R=f[C],l,y,A),Y=G[V+q],ge=G[V+re],(H!==(j=G[V+te])||H!==Y||H!==ge)&&(g(oe,se,R,O=f[C+z],F=f[C+I],N=f[C+D],H,j,Y,ge,l,y,A),pe=$[V]=ne++,ge!==Y&&s($[V+q],pe,F,N,Y,ge,l,y,A)),V+=1,C+=U;for(C+=X,V=0,xe=te,te=J,J=xe,xe=q,q=K,K=xe,xe=re,re=le,le=xe,oe=2;oe<T;++oe){if(G[V++]=b(f[C],l,y,A),C+=U,M>0)for(se=1,H=G[V]=b(R=f[C],l,y,A),Y=G[V+q],ge=G[V+re],(H!==(j=G[V+te])||H!==Y||H!==ge)&&(g(oe,se,R,O=f[C+z],F=f[C+I],N=f[C+D],H,j,Y,ge,l,y,A),pe=$[V]=ne++,ge!==j&&s($[V+te],pe,N,O,ge,j,l,y,A)),V+=1,C+=U,se=2;se<M;++se)H=G[V]=b(R=f[C],l,y,A),Y=G[V+q],ge=G[V+re],(H!==(j=G[V+te])||H!==Y||H!==ge)&&(g(oe,se,R,O=f[C+z],F=f[C+I],N=f[C+D],H,j,Y,ge,l,y,A),pe=$[V]=ne++,ge!==Y&&s($[V+q],pe,F,N,Y,ge,l,y,A),ge!==j&&s($[V+te],pe,N,O,ge,j,l,y,A)),V+=1,C+=U;1&oe&&(V=0),xe=te,te=J,J=xe,xe=q,q=K,K=xe,xe=re,re=le,le=xe,C+=X}}S($),S(G)}}}},{"typedarray-pool":308}],252:[function(e,c,d){"use strict";var n=e("dup"),t={zero:function(A,T,M,f){var u=A[0];f|=0;var o=0,C=M[0];for(o=0;o<u;++o)T[f]=0,f+=C},fdTemplate1:function(A,T,M,f,u,h,o){var C=A[0],R=M[0],O=-1*R,I=R;f|=0,o|=0;var F=0,D=R,N=h[0];for(F=0;F<C;++F)u[o]=.5*(T[f+O]-T[f+I]),f+=D,o+=N},fdTemplate2:function(A,T,M,f,u,h,o,C,R,z){var O=A[0],I=A[1],F=M[0],D=M[1],U=h[1],oe=R[1],se=-1*F,ne=F,W=-1*D,G=D;f|=0,o|=0,z|=0;var $=0,V=0,H=D,q=F-I*D,K=U,Y=h[0]-I*U,te=oe,J=R[0]-I*oe;for(V=0;V<O;++V){for($=0;$<I;++$)u[o]=.5*(T[f+se]-T[f+ne]),C[z]=.5*(T[f+W]-T[f+G]),f+=H,o+=K,z+=te;f+=q,o+=Y,z+=J}}},i={cdiff:function(A){var T={};return function(f,u,h){var o=f.dtype,C=f.order,R=u.dtype,z=u.order,O=h.dtype,I=h.order,F=[o,C.join(),R,z.join(),O,I.join()].join(),D=T[F];return D||(T[F]=D=A([o,C,R,z,O,I])),D(f.shape.slice(0),f.data,f.stride,0|f.offset,u.data,u.stride,0|u.offset,h.data,h.stride,0|h.offset)}},zero:function(A){var T={};return function(f){var u=f.dtype,h=f.order,o=[u,h.join()].join(),C=T[o];return C||(T[o]=C=A([u,h])),C(f.shape.slice(0),f.data,f.stride,0|f.offset)}},fdTemplate1:function(A){var T={};return function(f,u){var h=f.dtype,o=f.order,C=u.dtype,R=u.order,z=[h,o.join(),C,R.join()].join(),O=T[z];return O||(T[z]=O=A([h,o,C,R])),O(f.shape.slice(0),f.data,f.stride,0|f.offset,u.data,u.stride,0|u.offset)}},fdTemplate2:function(A){var T={};return function(f,u,h){var o=f.dtype,C=f.order,R=u.dtype,z=u.order,O=h.dtype,I=h.order,F=[o,C.join(),R,z.join(),O,I.join()].join(),D=T[F];return D||(T[F]=D=A([o,C,R,z,O,I])),D(f.shape.slice(0),f.data,f.stride,0|f.offset,u.data,u.stride,0|u.offset,h.data,h.stride,0|h.offset)}}};function a(A){return(0,i[A.funcName])(r.bind(void 0,A))}function r(A){return t[A.funcName]}function g(A){return a({funcName:A.funcName})}var s={},b={},S=g({funcName:"cdiff"}),p=g({funcName:"zero"});function w(A){return A in s?s[A]:s[A]=g({funcName:"fdTemplate"+A})}function l(A,T,M,f){return function(u,h){var o=h.shape.slice();return o[0]>2&&o[1]>2&&f(h.pick(-1,-1).lo(1,1).hi(o[0]-2,o[1]-2),u.pick(-1,-1,0).lo(1,1).hi(o[0]-2,o[1]-2),u.pick(-1,-1,1).lo(1,1).hi(o[0]-2,o[1]-2)),o[1]>2&&(M(h.pick(0,-1).lo(1).hi(o[1]-2),u.pick(0,-1,1).lo(1).hi(o[1]-2)),T(u.pick(0,-1,0).lo(1).hi(o[1]-2))),o[1]>2&&(M(h.pick(o[0]-1,-1).lo(1).hi(o[1]-2),u.pick(o[0]-1,-1,1).lo(1).hi(o[1]-2)),T(u.pick(o[0]-1,-1,0).lo(1).hi(o[1]-2))),o[0]>2&&(M(h.pick(-1,0).lo(1).hi(o[0]-2),u.pick(-1,0,0).lo(1).hi(o[0]-2)),T(u.pick(-1,0,1).lo(1).hi(o[0]-2))),o[0]>2&&(M(h.pick(-1,o[1]-1).lo(1).hi(o[0]-2),u.pick(-1,o[1]-1,0).lo(1).hi(o[0]-2)),T(u.pick(-1,o[1]-1,1).lo(1).hi(o[0]-2))),u.set(0,0,0,0),u.set(0,0,1,0),u.set(o[0]-1,0,0,0),u.set(o[0]-1,0,1,0),u.set(0,o[1]-1,0,0),u.set(0,o[1]-1,1,0),u.set(o[0]-1,o[1]-1,0,0),u.set(o[0]-1,o[1]-1,1,0),u}}c.exports=function(T,M,f){return Array.isArray(f)||(f=n(M.dimension,"string"==typeof f?f:"clamp")),0===M.size?T:0===M.dimension?(T.set(0),T):function y(A){var T=A.join();if(o=b[T])return o;for(var M=A.length,f=[S,p],u=1;u<=M;++u)f.push(w(u));var o=l.apply(void 0,f);return b[T]=o,o}(f)(T,M)}},{dup:65}],253:[function(e,c,d){"use strict";function n(g,s){var b=Math.floor(s),x=s-b,p=0<=b+1&&b+1<g.shape[0];return(1-x)*(0<=b&&b<g.shape[0]?+g.get(b):0)+x*(p?+g.get(b+1):0)}function t(g,s,b){var x=Math.floor(s),S=s-x,p=0<=x&&x<g.shape[0],w=0<=x+1&&x+1<g.shape[0],l=Math.floor(b),y=b-l,A=0<=l&&l<g.shape[1],T=0<=l+1&&l+1<g.shape[1],M=p&&A?g.get(x,l):0,f=p&&T?g.get(x,l+1):0;return(1-y)*((1-S)*M+S*(w&&A?g.get(x+1,l):0))+y*((1-S)*f+S*(w&&T?g.get(x+1,l+1):0))}function i(g,s,b,x){var S=Math.floor(s),p=s-S,w=0<=S&&S<g.shape[0],l=0<=S+1&&S+1<g.shape[0],y=Math.floor(b),A=b-y,T=0<=y&&y<g.shape[1],M=0<=y+1&&y+1<g.shape[1],f=Math.floor(x),u=x-f,h=0<=f&&f<g.shape[2],o=0<=f+1&&f+1<g.shape[2],C=w&&T&&h?g.get(S,y,f):0,R=w&&M&&h?g.get(S,y+1,f):0,z=l&&T&&h?g.get(S+1,y,f):0,O=l&&M&&h?g.get(S+1,y+1,f):0,I=w&&T&&o?g.get(S,y,f+1):0,F=w&&M&&o?g.get(S,y+1,f+1):0;return(1-u)*((1-A)*((1-p)*C+p*z)+A*((1-p)*R+p*O))+u*((1-A)*((1-p)*I+p*(l&&T&&o?g.get(S+1,y,f+1):0))+A*((1-p)*F+p*(l&&M&&o?g.get(S+1,y+1,f+1):0)))}function a(g){var w,l,s=0|g.shape.length,b=new Array(s),x=new Array(s),S=new Array(s),p=new Array(s);for(w=0;w<s;++w)l=+arguments[w+1],b[w]=Math.floor(l),x[w]=l-b[w],S[w]=0<=b[w]&&b[w]<g.shape[w],p[w]=0<=b[w]+1&&b[w]+1<g.shape[w];var A,T,M,y=0;e:for(w=0;w<1<<s;++w){for(T=1,M=g.offset,A=0;A<s;++A)if(w&1<<A){if(!p[A])continue e;T*=x[A],M+=g.stride[A]*(b[A]+1)}else{if(!S[A])continue e;T*=1-x[A],M+=g.stride[A]*b[A]}y+=T*g.data[M]}return y}c.exports=function r(g,s,b,x){switch(g.shape.length){case 0:return 0;case 1:return n(g,s);case 2:return t(g,s,b);case 3:return i(g,s,b,x);default:return a.apply(void 0,arguments)}},c.exports.d1=n,c.exports.d2=t,c.exports.d3=i},{}],254:[function(e,c,d){"use strict";var n={"float64,2,1,0":function(){return function(x,S,p,w,l){var y=x[0],A=x[1],T=x[2],f=p[1],u=p[2];w|=0;var h=0,o=0,C=0,R=u,z=f-T*u,O=p[0]-A*f;for(C=0;C<y;++C){for(o=0;o<A;++o){for(h=0;h<T;++h)S[w]/=l,w+=R;w+=z}w+=O}}},"uint8,2,0,1,float64,2,1,0":function(){return function(x,S,p,w,l,y,A,T){for(var M=x[0],f=x[1],u=x[2],h=p[0],o=p[1],C=p[2],R=y[0],z=y[1],O=y[2],I=w|=0,F=A|=0,D=0|x[0];D>0;){D<64?(M=D,D=0):(M=64,D-=64);for(var N=0|x[1];N>0;){N<64?(f=N,N=0):(f=64,N-=64),w=I+D*h+N*o,A=F+D*R+N*z;var U=0,X=0,oe=0,se=C,ne=h-u*C,W=o-M*h,G=O,$=R-u*O,V=z-M*R;for(oe=0;oe<f;++oe){for(X=0;X<M;++X){for(U=0;U<u;++U)S[w]=l[A]*T,w+=se,A+=G;w+=ne,A+=$}w+=W,A+=V}}}}},"float32,1,0,float32,1,0":function(){return function(x,S,p,w,l,y,A){var T=x[0],M=x[1],u=p[1],o=y[1];w|=0,A|=0;var C=0,R=0,z=u,O=p[0]-M*u,I=o,F=y[0]-M*o;for(R=0;R<T;++R){for(C=0;C<M;++C)S[w]=l[A],w+=z,A+=I;w+=O,A+=F}}},"float32,1,0,float32,0,1":function(){return function(x,S,p,w,l,y,A){for(var T=x[0],M=x[1],f=p[0],u=p[1],h=y[0],o=y[1],C=w|=0,R=A|=0,z=0|x[1];z>0;){z<64?(M=z,z=0):(M=64,z-=64);for(var O=0|x[0];O>0;){O<64?(T=O,O=0):(T=64,O-=64),w=C+z*u+O*f,A=R+z*o+O*h;var I=0,F=0,D=u,N=f-M*u,U=o,X=h-M*o;for(F=0;F<T;++F){for(I=0;I<M;++I)S[w]=l[A],w+=D,A+=U;w+=N,A+=X}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(x,S,p,w,l,y,A){for(var T=x[0],M=x[1],f=x[2],u=p[0],h=p[1],o=p[2],C=y[0],R=y[1],z=y[2],O=w|=0,I=A|=0,F=0|x[2];F>0;){F<64?(f=F,F=0):(f=64,F-=64);for(var D=0|x[0];D>0;){D<64?(T=D,D=0):(T=64,D-=64);for(var N=0|x[1];N>0;){N<64?(M=N,N=0):(M=64,N-=64),w=O+F*o+D*u+N*h,A=I+F*z+D*C+N*R;var U=0,X=0,oe=0,se=o,ne=u-f*o,W=h-T*u,G=z,$=C-f*z,V=R-T*C;for(oe=0;oe<M;++oe){for(X=0;X<T;++X){for(U=0;U<f;++U)S[w]=l[A],w+=se,A+=G;w+=ne,A+=$}w+=W,A+=V}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(x,S,p,w,l,y,A){var T=x[0],M=x[1],f=x[2],u=p[0],o=p[2],C=y[0],z=y[2];w|=0,A|=0;var O=0,I=0,F=0,D=o,N=u-f*o,U=p[1]-T*u,X=z,oe=C-f*z,se=y[1]-T*C;for(F=0;F<M;++F){for(I=0;I<T;++I){for(O=0;O<f;++O)S[w]=l[A],w+=D,A+=X;w+=N,A+=oe}w+=U,A+=se}}}};var i=function t(b,x){var S=x.join(",");return(0,n[S])()},a={mul:function(b){var x={};return function(p,w,l){var y=p.dtype,A=p.order,T=w.dtype,M=w.order,f=l.dtype,u=l.order,h=[y,A.join(),T,M.join(),f,u.join()].join(),o=x[h];return o||(x[h]=o=b([y,A,T,M,f,u])),o(p.shape.slice(0),p.data,p.stride,0|p.offset,w.data,w.stride,0|w.offset,l.data,l.stride,0|l.offset)}},muls:function(b){var x={};return function(p,w,l){var y=p.dtype,A=p.order,T=w.dtype,M=w.order,f=[y,A.join(),T,M.join()].join(),u=x[f];return u||(x[f]=u=b([y,A,T,M])),u(p.shape.slice(0),p.data,p.stride,0|p.offset,w.data,w.stride,0|w.offset,l)}},mulseq:function(b){var x={};return function(p,w){var l=p.dtype,y=p.order,A=[l,y.join()].join(),T=x[A];return T||(x[A]=T=b([l,y])),T(p.shape.slice(0),p.data,p.stride,0|p.offset,w)}},div:function(b){var x={};return function(p,w,l){var y=p.dtype,A=p.order,T=w.dtype,M=w.order,f=l.dtype,u=l.order,h=[y,A.join(),T,M.join(),f,u.join()].join(),o=x[h];return o||(x[h]=o=b([y,A,T,M,f,u])),o(p.shape.slice(0),p.data,p.stride,0|p.offset,w.data,w.stride,0|w.offset,l.data,l.stride,0|l.offset)}},divs:function(b){var x={};return function(p,w,l){var y=p.dtype,A=p.order,T=w.dtype,M=w.order,f=[y,A.join(),T,M.join()].join(),u=x[f];return u||(x[f]=u=b([y,A,T,M])),u(p.shape.slice(0),p.data,p.stride,0|p.offset,w.data,w.stride,0|w.offset,l)}},divseq:function(b){var x={};return function(p,w){var l=p.dtype,y=p.order,A=[l,y.join()].join(),T=x[A];return T||(x[A]=T=b([l,y])),T(p.shape.slice(0),p.data,p.stride,0|p.offset,w)}},assign:function(b){var x={};return function(p,w){var l=p.dtype,y=p.order,A=w.dtype,T=w.order,M=[l,y.join(),A,T.join()].join(),f=x[M];return f||(x[M]=f=b([l,y,A,T])),f(p.shape.slice(0),p.data,p.stride,0|p.offset,w.data,w.stride,0|w.offset)}}};function g(b){return function r(b){return(0,a[b.funcName])(i.bind(void 0,b))}({funcName:b.funcName})}var s={mul:"*",div:"/"};(function(){for(var b in s)d[b]=g({funcName:b}),d[b+"s"]=g({funcName:b+"s"}),d[b+"seq"]=g({funcName:b+"seq"})})(),d.assign=g({funcName:"assign"})},{}],255:[function(e,c,d){"use strict";var n=e("ndarray"),t=e("./doConvert.js");c.exports=function(a,r){for(var g=[],s=a,b=1;Array.isArray(s);)g.push(s.length),b*=s.length,s=s[0];return 0===g.length?n():(r||(r=n(new Float64Array(b),g)),t(r,a),r)}},{"./doConvert.js":256,ndarray:259}],256:[function(e,c,d){"use strict";var i=function t(){return function(s,b,x,S,p){var w=s[0],l=s[1],y=s[2],T=x[1],M=x[2],f=[0,0,0];S|=0;var u=0,h=0,o=0,C=M,R=T-y*M,z=x[0]-l*T;for(o=0;o<w;++o){for(h=0;h<l;++h){for(u=0;u<y;++u){var I,O=p;for(I=0;I<f.length-1;++I)O=O[f[I]];b[S]=O[f[f.length-1]],S+=C,++f[2]}S+=R,f[2]-=y,++f[1]}S+=z,f[1]-=l,++f[0]}}};c.exports=function g(s){return function r(s){return function a(s){var b={};return function(S,p){var w=S.dtype,l=S.order,y=[w,l.join()].join(),A=b[y];return A||(b[y]=A=s([w,l])),A(S.shape.slice(0),S.data,S.stride,0|S.offset,p)}}(i.bind(void 0,s))}({funcName:s.funcName})}({funcName:"convert"})},{}],257:[function(e,c,d){"use strict";var n=e("typedarray-pool");function t(x){return"uint32"===x?[n.mallocUint32,n.freeUint32]:null}var i={"uint32,1,0":function(x,S){return function(w,l,y,A,T,M,f,u,h,o,C){var R,z,O,F,N,U,X,oe,I=w*T+A,D=x(u);for(R=w+1;R<=l;++R){for(z=R,O=I+=T,N=0,U=I,F=0;F<u;++F)D[N++]=y[U],U+=h;e:for(;z-- >w;){N=0,U=O-T;t:for(F=0;F<u;++F){if((X=y[U])<(oe=D[N]))break e;if(X>oe)break t;U+=o,N+=C}for(N=O,U=O-T,F=0;F<u;++F)y[N]=y[U],N+=h,U+=h;O-=T}for(N=O,U=0,F=0;F<u;++F)y[N]=D[U++],N+=h}S(D)}}};var r={"uint32,1,0":function(x,S,p){return function w(l,y,A,T,M,f,u,h,o,C,R){var V,H,K,Y,te,J,j,re,xe,ke,we,de,be,Le,De,ye,Ce,Fe,Ke,Ue,Be,Ie,nt,gt,z=(y-l+1)/6|0,O=l+z,I=y-z,F=l+y>>1,D=F-z,N=F+z,U=O,X=D,oe=F,se=N,ne=I,W=l+1,G=y-1,$=!0,le=0,ge=0,pe=0,Nt=h,St=S(Nt),Bt=S(Nt);ke=M*U,we=M*X,gt=T;e:for(xe=0;xe<h;++xe){if((pe=A[J=ke+gt]-A[j=we+gt])>0){H=U,U=X,X=H;break e}if(pe<0)break e;gt+=C}ke=M*se,we=M*ne,gt=T;e:for(xe=0;xe<h;++xe){if((pe=A[J=ke+gt]-A[j=we+gt])>0){H=se,se=ne,ne=H;break e}if(pe<0)break e;gt+=C}ke=M*U,we=M*oe,gt=T;e:for(xe=0;xe<h;++xe){if((pe=A[J=ke+gt]-A[j=we+gt])>0){H=U,U=oe,oe=H;break e}if(pe<0)break e;gt+=C}ke=M*X,we=M*oe,gt=T;e:for(xe=0;xe<h;++xe){if((pe=A[J=ke+gt]-A[j=we+gt])>0){H=X,X=oe,oe=H;break e}if(pe<0)break e;gt+=C}ke=M*U,we=M*se,gt=T;e:for(xe=0;xe<h;++xe){if((pe=A[J=ke+gt]-A[j=we+gt])>0){H=U,U=se,se=H;break e}if(pe<0)break e;gt+=C}ke=M*oe,we=M*se,gt=T;e:for(xe=0;xe<h;++xe){if((pe=A[J=ke+gt]-A[j=we+gt])>0){H=oe,oe=se,se=H;break e}if(pe<0)break e;gt+=C}ke=M*X,we=M*ne,gt=T;e:for(xe=0;xe<h;++xe){if((pe=A[J=ke+gt]-A[j=we+gt])>0){H=X,X=ne,ne=H;break e}if(pe<0)break e;gt+=C}ke=M*X,we=M*oe,gt=T;e:for(xe=0;xe<h;++xe){if((pe=A[J=ke+gt]-A[j=we+gt])>0){H=X,X=oe,oe=H;break e}if(pe<0)break e;gt+=C}ke=M*se,we=M*ne,gt=T;e:for(xe=0;xe<h;++xe){if((pe=A[J=ke+gt]-A[j=we+gt])>0){H=se,se=ne,ne=H;break e}if(pe<0)break e;gt+=C}for(ke=M*U,we=M*X,de=M*oe,be=M*se,Le=M*ne,De=M*O,ye=M*F,Ce=M*I,nt=0,gt=T,xe=0;xe<h;++xe)J=ke+gt,re=de+gt,Fe=be+gt,Ke=Le+gt,Ue=De+gt,Be=ye+gt,Ie=Ce+gt,St[nt]=A[j=we+gt],Bt[nt]=A[Fe],$=$&&St[nt]===Bt[nt],K=A[re],Y=A[Ke],A[Ue]=A[J],A[Be]=K,A[Ie]=Y,++nt,gt+=o;for(ke=M*D,we=M*l,gt=T,xe=0;xe<h;++xe)A[J=ke+gt]=A[j=we+gt],gt+=o;for(ke=M*N,we=M*y,gt=T,xe=0;xe<h;++xe)A[J=ke+gt]=A[j=we+gt],gt+=o;if($)for(te=W;te<=G;++te){for(J=T+te*M,nt=0,xe=0;xe<h&&0==(pe=A[J]-St[nt]);++xe)nt+=R,J+=C;if(0!==pe)if(pe<0){if(te!==W)for(ke=M*te,we=M*W,gt=T,xe=0;xe<h;++xe)V=A[J=ke+gt],A[J]=A[j=we+gt],A[j]=V,gt+=o;++W}else for(;;){for(J=T+G*M,nt=0,xe=0;xe<h&&0==(pe=A[J]-St[nt]);++xe)nt+=R,J+=C;if(!(pe>0)){if(pe<0){for(ke=M*te,we=M*W,de=M*G,gt=T,xe=0;xe<h;++xe)re=de+gt,V=A[J=ke+gt],A[J]=A[j=we+gt],A[j]=A[re],A[re]=V,gt+=o;++W,--G;break}for(ke=M*te,we=M*G,gt=T,xe=0;xe<h;++xe)V=A[J=ke+gt],A[J]=A[j=we+gt],A[j]=V,gt+=o;--G;break}G--}}else for(te=W;te<=G;++te){for(J=T+te*M,nt=0,xe=0;xe<h&&0==(le=A[J]-St[nt]);++xe)nt+=R,J+=C;if(le<0){if(te!==W)for(ke=M*te,we=M*W,gt=T,xe=0;xe<h;++xe)V=A[J=ke+gt],A[J]=A[j=we+gt],A[j]=V,gt+=o;++W}else{for(J=T+te*M,nt=0,xe=0;xe<h&&0==(ge=A[J]-Bt[nt]);++xe)nt+=R,J+=C;if(ge>0)for(;;){for(J=T+G*M,nt=0,xe=0;xe<h&&0==(pe=A[J]-Bt[nt]);++xe)nt+=R,J+=C;if(!(pe>0)){for(J=T+G*M,nt=0,xe=0;xe<h&&0==(pe=A[J]-St[nt]);++xe)nt+=R,J+=C;if(pe<0){for(ke=M*te,we=M*W,de=M*G,gt=T,xe=0;xe<h;++xe)re=de+gt,V=A[J=ke+gt],A[J]=A[j=we+gt],A[j]=A[re],A[re]=V,gt+=o;++W,--G}else{for(ke=M*te,we=M*G,gt=T,xe=0;xe<h;++xe)V=A[J=ke+gt],A[J]=A[j=we+gt],A[j]=V,gt+=o;--G}break}if(--G<te)break}}}for(ke=M*l,we=M*(W-1),nt=0,gt=T,xe=0;xe<h;++xe)A[J=ke+gt]=A[j=we+gt],A[j]=St[nt],++nt,gt+=o;for(ke=M*y,we=M*(G+1),nt=0,gt=T,xe=0;xe<h;++xe)A[J=ke+gt]=A[j=we+gt],A[j]=Bt[nt],++nt,gt+=o;if(W-2-l<=32?x(l,W-2,A,T,M,f,u,h,o,C,R):w(l,W-2,A,T,M,f,u,h,o,C,R),y-(G+2)<=32?x(G+2,y,A,T,M,f,u,h,o,C,R):w(G+2,y,A,T,M,f,u,h,o,C,R),$)return p(St),void p(Bt);if(W<O&&G>I){e:for(;;){for(J=T+W*M,nt=0,gt=T,xe=0;xe<h;++xe){if(A[J]!==St[nt])break e;++nt,J+=o}++W}e:for(;;){for(J=T+G*M,nt=0,gt=T,xe=0;xe<h;++xe){if(A[J]!==Bt[nt])break e;++nt,J+=o}--G}for(te=W;te<=G;++te){for(J=T+te*M,nt=0,xe=0;xe<h&&0==(le=A[J]-St[nt]);++xe)nt+=R,J+=C;if(0===le){if(te!==W)for(ke=M*te,we=M*W,gt=T,xe=0;xe<h;++xe)V=A[J=ke+gt],A[J]=A[j=we+gt],A[j]=V,gt+=o;++W}else{for(J=T+te*M,nt=0,xe=0;xe<h&&0==(ge=A[J]-Bt[nt]);++xe)nt+=R,J+=C;if(0===ge)for(;;){for(J=T+G*M,nt=0,xe=0;xe<h&&0==(pe=A[J]-Bt[nt]);++xe)nt+=R,J+=C;if(0!==pe){for(J=T+G*M,nt=0,xe=0;xe<h&&0==(pe=A[J]-St[nt]);++xe)nt+=R,J+=C;if(pe<0){for(ke=M*te,we=M*W,de=M*G,gt=T,xe=0;xe<h;++xe)re=de+gt,V=A[J=ke+gt],A[J]=A[j=we+gt],A[j]=A[re],A[re]=V,gt+=o;++W,--G}else{for(ke=M*te,we=M*G,gt=T,xe=0;xe<h;++xe)V=A[J=ke+gt],A[J]=A[j=we+gt],A[j]=V,gt+=o;--G}break}if(--G<te)break}}}}p(St),p(Bt),G-W<=32?x(W,G,A,T,M,f,u,h,o,C,R):w(W,G,A,T,M,f,u,h,o,C,R)}}};var s={"uint32,1,0":function(x,S){return function(p){var w=p.data,l=0|p.offset,y=p.shape,A=p.stride,T=0|A[0],M=0|y[0],f=0|A[1],u=0|y[1],h=f,o=f;M<=32?x(0,M-1,w,l,T,f,M,u,h,o,1):S(0,M-1,w,l,T,f,M,u,h,o,1)}}};c.exports=function b(x,S){var p=[S,x].join(","),w=s[p],l=function a(x,S){var p=t(S),w=[S,x].join(","),l=i[w];return p?l(p[0],p[1]):l()}(x,S);return w(l,function g(x,S,p){var w=t(S),l=[S,x].join(","),y=r[l];return x.length>1&&w?y(p,w[0],w[1]):y(p)}(x,S,l))}},{"typedarray-pool":308}],258:[function(e,c,d){"use strict";var n=e("./lib/compile_sort.js"),t={};c.exports=function i(a){var r=a.order,g=a.dtype,b=[r,g].join(":"),x=t[b];return x||(t[b]=x=n(r,g)),x(a),a}},{"./lib/compile_sort.js":257}],259:[function(e,c,d){var n=e("is-buffer"),t="undefined"!=typeof Float64Array;function i(S,p){return S[0]-p[0]}function a(){var w,S=this.stride,p=new Array(S.length);for(w=0;w<p.length;++w)p[w]=[Math.abs(S[w]),w];p.sort(i);var l=new Array(p.length);for(w=0;w<l.length;++w)l[w]=p[w][1];return l}var r={T:function(S){function p(l){this.data=l}var w=p.prototype;return w.dtype=S,w.index=function(){return-1},w.size=0,w.dimension=-1,w.shape=w.stride=w.order=[],w.lo=w.hi=w.transpose=w.step=function(){return new p(this.data)},w.get=w.set=function(){},w.pick=function(){return null},function(y){return new p(y)}},0:function(S,p){function w(y,A){this.data=y,this.offset=A}var l=w.prototype;return l.dtype=S,l.index=function(){return this.offset},l.dimension=0,l.size=1,l.shape=l.stride=l.order=[],l.lo=l.hi=l.transpose=l.step=function(){return new w(this.data,this.offset)},l.pick=function(){return p(this.data)},l.valueOf=l.get=function(){return"generic"===S?this.data.get(this.offset):this.data[this.offset]},l.set=function(A){return"generic"===S?this.data.set(this.offset,A):this.data[this.offset]=A},function(A,T,M,f){return new w(A,f)}},1:function(S,p,w){function l(A,T,M,f){this.data=A,this.shape=[T],this.stride=[M],this.offset=0|f}var y=l.prototype;return y.dtype=S,y.dimension=1,Object.defineProperty(y,"size",{get:function(){return this.shape[0]}}),y.order=[0],y.set=function(T,M){return"generic"===S?this.data.set(this.offset+this.stride[0]*T,M):this.data[this.offset+this.stride[0]*T]=M},y.get=function(T){return"generic"===S?this.data.get(this.offset+this.stride[0]*T):this.data[this.offset+this.stride[0]*T]},y.index=function(T){return this.offset+this.stride[0]*T},y.hi=function(T){return new l(this.data,"number"!=typeof T||T<0?this.shape[0]:0|T,this.stride[0],this.offset)},y.lo=function(T){var M=this.offset,f=0,u=this.shape[0],h=this.stride[0];return"number"==typeof T&&T>=0&&(M+=h*(f=0|T),u-=f),new l(this.data,u,h,M)},y.step=function(T){var M=this.shape[0],f=this.stride[0],u=this.offset,h=0,o=Math.ceil;return"number"==typeof T&&((h=0|T)<0?(u+=f*(M-1),M=o(-M/h)):M=o(M/h),f*=h),new l(this.data,M,f,u)},y.transpose=function(T){return new l(this.data,this.shape[T=void 0===T?0:0|T],this.stride[T],this.offset)},y.pick=function(T){var M=[],f=[],u=this.offset;return"number"==typeof T&&T>=0?u=u+this.stride[0]*T|0:(M.push(this.shape[0]),f.push(this.stride[0])),(0,p[M.length+1])(this.data,M,f,u)},function(T,M,f,u){return new l(T,M[0],f[0],u)}},2:function(S,p,w){function l(A,T,M,f,u,h){this.data=A,this.shape=[T,M],this.stride=[f,u],this.offset=0|h}var y=l.prototype;return y.dtype=S,y.dimension=2,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(y,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),y.set=function(T,M,f){return"generic"===S?this.data.set(this.offset+this.stride[0]*T+this.stride[1]*M,f):this.data[this.offset+this.stride[0]*T+this.stride[1]*M]=f},y.get=function(T,M){return"generic"===S?this.data.get(this.offset+this.stride[0]*T+this.stride[1]*M):this.data[this.offset+this.stride[0]*T+this.stride[1]*M]},y.index=function(T,M){return this.offset+this.stride[0]*T+this.stride[1]*M},y.hi=function(T,M){return new l(this.data,"number"!=typeof T||T<0?this.shape[0]:0|T,"number"!=typeof M||M<0?this.shape[1]:0|M,this.stride[0],this.stride[1],this.offset)},y.lo=function(T,M){var f=this.offset,u=0,h=this.shape[0],o=this.shape[1],C=this.stride[0],R=this.stride[1];return"number"==typeof T&&T>=0&&(f+=C*(u=0|T),h-=u),"number"==typeof M&&M>=0&&(f+=R*(u=0|M),o-=u),new l(this.data,h,o,C,R,f)},y.step=function(T,M){var f=this.shape[0],u=this.shape[1],h=this.stride[0],o=this.stride[1],C=this.offset,R=0,z=Math.ceil;return"number"==typeof T&&((R=0|T)<0?(C+=h*(f-1),f=z(-f/R)):f=z(f/R),h*=R),"number"==typeof M&&((R=0|M)<0?(C+=o*(u-1),u=z(-u/R)):u=z(u/R),o*=R),new l(this.data,f,u,h,o,C)},y.transpose=function(T,M){var f=this.shape,u=this.stride;return new l(this.data,f[T=void 0===T?0:0|T],f[M=void 0===M?1:0|M],u[T],u[M],this.offset)},y.pick=function(T,M){var f=[],u=[],h=this.offset;return"number"==typeof T&&T>=0?h=h+this.stride[0]*T|0:(f.push(this.shape[0]),u.push(this.stride[0])),"number"==typeof M&&M>=0?h=h+this.stride[1]*M|0:(f.push(this.shape[1]),u.push(this.stride[1])),(0,p[f.length+1])(this.data,f,u,h)},function(T,M,f,u){return new l(T,M[0],M[1],f[0],f[1],u)}},3:function(S,p,w){function l(A,T,M,f,u,h,o,C){this.data=A,this.shape=[T,M,f],this.stride=[u,h,o],this.offset=0|C}var y=l.prototype;return y.dtype=S,y.dimension=3,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(y,"order",{get:function(){var T=Math.abs(this.stride[0]),M=Math.abs(this.stride[1]),f=Math.abs(this.stride[2]);return T>M?M>f?[2,1,0]:T>f?[1,2,0]:[1,0,2]:T>f?[2,0,1]:f>M?[0,1,2]:[0,2,1]}}),y.set=function(T,M,f,u){return"generic"===S?this.data.set(this.offset+this.stride[0]*T+this.stride[1]*M+this.stride[2]*f,u):this.data[this.offset+this.stride[0]*T+this.stride[1]*M+this.stride[2]*f]=u},y.get=function(T,M,f){return"generic"===S?this.data.get(this.offset+this.stride[0]*T+this.stride[1]*M+this.stride[2]*f):this.data[this.offset+this.stride[0]*T+this.stride[1]*M+this.stride[2]*f]},y.index=function(T,M,f){return this.offset+this.stride[0]*T+this.stride[1]*M+this.stride[2]*f},y.hi=function(T,M,f){return new l(this.data,"number"!=typeof T||T<0?this.shape[0]:0|T,"number"!=typeof M||M<0?this.shape[1]:0|M,"number"!=typeof f||f<0?this.shape[2]:0|f,this.stride[0],this.stride[1],this.stride[2],this.offset)},y.lo=function(T,M,f){var u=this.offset,h=0,o=this.shape[0],C=this.shape[1],R=this.shape[2],z=this.stride[0],O=this.stride[1],I=this.stride[2];return"number"==typeof T&&T>=0&&(u+=z*(h=0|T),o-=h),"number"==typeof M&&M>=0&&(u+=O*(h=0|M),C-=h),"number"==typeof f&&f>=0&&(u+=I*(h=0|f),R-=h),new l(this.data,o,C,R,z,O,I,u)},y.step=function(T,M,f){var u=this.shape[0],h=this.shape[1],o=this.shape[2],C=this.stride[0],R=this.stride[1],z=this.stride[2],O=this.offset,I=0,F=Math.ceil;return"number"==typeof T&&((I=0|T)<0?(O+=C*(u-1),u=F(-u/I)):u=F(u/I),C*=I),"number"==typeof M&&((I=0|M)<0?(O+=R*(h-1),h=F(-h/I)):h=F(h/I),R*=I),"number"==typeof f&&((I=0|f)<0?(O+=z*(o-1),o=F(-o/I)):o=F(o/I),z*=I),new l(this.data,u,h,o,C,R,z,O)},y.transpose=function(T,M,f){var u=this.shape,h=this.stride;return new l(this.data,u[T=void 0===T?0:0|T],u[M=void 0===M?1:0|M],u[f=void 0===f?2:0|f],h[T],h[M],h[f],this.offset)},y.pick=function(T,M,f){var u=[],h=[],o=this.offset;return"number"==typeof T&&T>=0?o=o+this.stride[0]*T|0:(u.push(this.shape[0]),h.push(this.stride[0])),"number"==typeof M&&M>=0?o=o+this.stride[1]*M|0:(u.push(this.shape[1]),h.push(this.stride[1])),"number"==typeof f&&f>=0?o=o+this.stride[2]*f|0:(u.push(this.shape[2]),h.push(this.stride[2])),(0,p[u.length+1])(this.data,u,h,o)},function(T,M,f,u){return new l(T,M[0],M[1],M[2],f[0],f[1],f[2],u)}},4:function(S,p,w){function l(A,T,M,f,u,h,o,C,R,z){this.data=A,this.shape=[T,M,f,u],this.stride=[h,o,C,R],this.offset=0|z}var y=l.prototype;return y.dtype=S,y.dimension=4,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(y,"order",{get:w}),y.set=function(T,M,f,u,h){return"generic"===S?this.data.set(this.offset+this.stride[0]*T+this.stride[1]*M+this.stride[2]*f+this.stride[3]*u,h):this.data[this.offset+this.stride[0]*T+this.stride[1]*M+this.stride[2]*f+this.stride[3]*u]=h},y.get=function(T,M,f,u){return"generic"===S?this.data.get(this.offset+this.stride[0]*T+this.stride[1]*M+this.stride[2]*f+this.stride[3]*u):this.data[this.offset+this.stride[0]*T+this.stride[1]*M+this.stride[2]*f+this.stride[3]*u]},y.index=function(T,M,f,u){return this.offset+this.stride[0]*T+this.stride[1]*M+this.stride[2]*f+this.stride[3]*u},y.hi=function(T,M,f,u){return new l(this.data,"number"!=typeof T||T<0?this.shape[0]:0|T,"number"!=typeof M||M<0?this.shape[1]:0|M,"number"!=typeof f||f<0?this.shape[2]:0|f,"number"!=typeof u||u<0?this.shape[3]:0|u,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},y.lo=function(T,M,f,u){var h=this.offset,o=0,C=this.shape[0],R=this.shape[1],z=this.shape[2],O=this.shape[3],I=this.stride[0],F=this.stride[1],D=this.stride[2],N=this.stride[3];return"number"==typeof T&&T>=0&&(h+=I*(o=0|T),C-=o),"number"==typeof M&&M>=0&&(h+=F*(o=0|M),R-=o),"number"==typeof f&&f>=0&&(h+=D*(o=0|f),z-=o),"number"==typeof u&&u>=0&&(h+=N*(o=0|u),O-=o),new l(this.data,C,R,z,O,I,F,D,N,h)},y.step=function(T,M,f,u){var h=this.shape[0],o=this.shape[1],C=this.shape[2],R=this.shape[3],z=this.stride[0],O=this.stride[1],I=this.stride[2],F=this.stride[3],D=this.offset,N=0,U=Math.ceil;return"number"==typeof T&&((N=0|T)<0?(D+=z*(h-1),h=U(-h/N)):h=U(h/N),z*=N),"number"==typeof M&&((N=0|M)<0?(D+=O*(o-1),o=U(-o/N)):o=U(o/N),O*=N),"number"==typeof f&&((N=0|f)<0?(D+=I*(C-1),C=U(-C/N)):C=U(C/N),I*=N),"number"==typeof u&&((N=0|u)<0?(D+=F*(R-1),R=U(-R/N)):R=U(R/N),F*=N),new l(this.data,h,o,C,R,z,O,I,F,D)},y.transpose=function(T,M,f,u){var h=this.shape,o=this.stride;return new l(this.data,h[T=void 0===T?0:0|T],h[M=void 0===M?1:0|M],h[f=void 0===f?2:0|f],h[u=void 0===u?3:0|u],o[T],o[M],o[f],o[u],this.offset)},y.pick=function(T,M,f,u){var h=[],o=[],C=this.offset;return"number"==typeof T&&T>=0?C=C+this.stride[0]*T|0:(h.push(this.shape[0]),o.push(this.stride[0])),"number"==typeof M&&M>=0?C=C+this.stride[1]*M|0:(h.push(this.shape[1]),o.push(this.stride[1])),"number"==typeof f&&f>=0?C=C+this.stride[2]*f|0:(h.push(this.shape[2]),o.push(this.stride[2])),"number"==typeof u&&u>=0?C=C+this.stride[3]*u|0:(h.push(this.shape[3]),o.push(this.stride[3])),(0,p[h.length+1])(this.data,h,o,C)},function(T,M,f,u){return new l(T,M[0],M[1],M[2],M[3],f[0],f[1],f[2],f[3],u)}},5:function(p,w,l){function y(T,M,f,u,h,o,C,R,z,O,I,F){this.data=T,this.shape=[M,f,u,h,o],this.stride=[C,R,z,O,I],this.offset=0|F}var A=y.prototype;return A.dtype=p,A.dimension=5,Object.defineProperty(A,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(A,"order",{get:l}),A.set=function(M,f,u,h,o,C){return"generic"===p?this.data.set(this.offset+this.stride[0]*M+this.stride[1]*f+this.stride[2]*u+this.stride[3]*h+this.stride[4]*o,C):this.data[this.offset+this.stride[0]*M+this.stride[1]*f+this.stride[2]*u+this.stride[3]*h+this.stride[4]*o]=C},A.get=function(M,f,u,h,o){return"generic"===p?this.data.get(this.offset+this.stride[0]*M+this.stride[1]*f+this.stride[2]*u+this.stride[3]*h+this.stride[4]*o):this.data[this.offset+this.stride[0]*M+this.stride[1]*f+this.stride[2]*u+this.stride[3]*h+this.stride[4]*o]},A.index=function(M,f,u,h,o){return this.offset+this.stride[0]*M+this.stride[1]*f+this.stride[2]*u+this.stride[3]*h+this.stride[4]*o},A.hi=function(M,f,u,h,o){return new y(this.data,"number"!=typeof M||M<0?this.shape[0]:0|M,"number"!=typeof f||f<0?this.shape[1]:0|f,"number"!=typeof u||u<0?this.shape[2]:0|u,"number"!=typeof h||h<0?this.shape[3]:0|h,"number"!=typeof o||o<0?this.shape[4]:0|o,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},A.lo=function(M,f,u,h,o){var C=this.offset,R=0,z=this.shape[0],O=this.shape[1],I=this.shape[2],F=this.shape[3],D=this.shape[4],N=this.stride[0],U=this.stride[1],X=this.stride[2],oe=this.stride[3],se=this.stride[4];return"number"==typeof M&&M>=0&&(C+=N*(R=0|M),z-=R),"number"==typeof f&&f>=0&&(C+=U*(R=0|f),O-=R),"number"==typeof u&&u>=0&&(C+=X*(R=0|u),I-=R),"number"==typeof h&&h>=0&&(C+=oe*(R=0|h),F-=R),"number"==typeof o&&o>=0&&(C+=se*(R=0|o),D-=R),new y(this.data,z,O,I,F,D,N,U,X,oe,se,C)},A.step=function(M,f,u,h,o){var C=this.shape[0],R=this.shape[1],z=this.shape[2],O=this.shape[3],I=this.shape[4],F=this.stride[0],D=this.stride[1],N=this.stride[2],U=this.stride[3],X=this.stride[4],oe=this.offset,se=0,ne=Math.ceil;return"number"==typeof M&&((se=0|M)<0?(oe+=F*(C-1),C=ne(-C/se)):C=ne(C/se),F*=se),"number"==typeof f&&((se=0|f)<0?(oe+=D*(R-1),R=ne(-R/se)):R=ne(R/se),D*=se),"number"==typeof u&&((se=0|u)<0?(oe+=N*(z-1),z=ne(-z/se)):z=ne(z/se),N*=se),"number"==typeof h&&((se=0|h)<0?(oe+=U*(O-1),O=ne(-O/se)):O=ne(O/se),U*=se),"number"==typeof o&&((se=0|o)<0?(oe+=X*(I-1),I=ne(-I/se)):I=ne(I/se),X*=se),new y(this.data,C,R,z,O,I,F,D,N,U,X,oe)},A.transpose=function(M,f,u,h,o){var C=this.shape,R=this.stride;return new y(this.data,C[M=void 0===M?0:0|M],C[f=void 0===f?1:0|f],C[u=void 0===u?2:0|u],C[h=void 0===h?3:0|h],C[o=void 0===o?4:0|o],R[M],R[f],R[u],R[h],R[o],this.offset)},A.pick=function(M,f,u,h,o){var C=[],R=[],z=this.offset;return"number"==typeof M&&M>=0?z=z+this.stride[0]*M|0:(C.push(this.shape[0]),R.push(this.stride[0])),"number"==typeof f&&f>=0?z=z+this.stride[1]*f|0:(C.push(this.shape[1]),R.push(this.stride[1])),"number"==typeof u&&u>=0?z=z+this.stride[2]*u|0:(C.push(this.shape[2]),R.push(this.stride[2])),"number"==typeof h&&h>=0?z=z+this.stride[3]*h|0:(C.push(this.shape[3]),R.push(this.stride[3])),"number"==typeof o&&o>=0?z=z+this.stride[4]*o|0:(C.push(this.shape[4]),R.push(this.stride[4])),(0,w[C.length+1])(this.data,C,R,z)},function(M,f,u,h){return new y(M,f[0],f[1],f[2],f[3],f[4],u[0],u[1],u[2],u[3],u[4],h)}}};function g(S,p){var w=-1===p?"T":String(p),l=r[w];return-1===p?l(S):0===p?l(S,b[S][0]):l(S,b[S],a)}var b={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};c.exports=function x(S,p,w,l){if(void 0===S)return(0,b.array[0])([]);"number"==typeof S&&(S=[S]),void 0===p&&(p=[S.length]);var y=p.length;if(void 0===w){w=new Array(y);for(var A=y-1,T=1;A>=0;--A)w[A]=T,T*=p[A]}if(void 0===l)for(l=0,A=0;A<y;++A)w[A]<0&&(l-=(p[A]-1)*w[A]);for(var M=function s(S){if(n(S))return"buffer";if(t)switch(Object.prototype.toString.call(S)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(S)?"array":"generic"}(S),f=b[M];f.length<=y+1;)f.push(g(M,f.length-1));return(0,f[y+1])(S,p,w,l)}},{"is-buffer":237}],260:[function(e,c,d){"use strict";var n=e("double-bits"),t=Math.pow(2,-1074),i=-1>>>0;c.exports=function a(r,g){if(isNaN(r)||isNaN(g))return NaN;if(r===g)return r;if(0===r)return g<0?-t:t;var s=n.hi(r),b=n.lo(r);return g>r==r>0?b===i?(s+=1,b=0):b+=1:0===b?(b=i,s-=1):b-=1,n.pack(b,s)}},{"double-bits":64}],261:[function(e,c,d){d.vertexNormals=function(i,a,r){for(var g=a.length,s=new Array(g),b=void 0===r?1e-6:r,x=0;x<g;++x)s[x]=[0,0,0];for(x=0;x<i.length;++x)for(var S=i[x],w=S[S.length-1],l=S[0],y=0;y<S.length;++y){for(var A=a[w],T=a[w=l],M=a[l=S[(y+1)%S.length]],f=new Array(3),u=0,h=new Array(3),o=0,C=0;C<3;++C)f[C]=A[C]-T[C],u+=f[C]*f[C],h[C]=M[C]-T[C],o+=h[C]*h[C];if(u*o>b){var R=s[w],z=1/Math.sqrt(u*o);for(C=0;C<3;++C){var O=(C+1)%3,I=(C+2)%3;R[C]+=z*(h[O]*f[I]-h[I]*f[O])}}}for(x=0;x<g;++x){R=s[x];var F=0;for(C=0;C<3;++C)F+=R[C]*R[C];if(F>b)for(z=1/Math.sqrt(F),C=0;C<3;++C)R[C]*=z;else for(C=0;C<3;++C)R[C]=0}return s},d.faceNormals=function(i,a,r){for(var g=i.length,s=new Array(g),b=void 0===r?1e-6:r,x=0;x<g;++x){for(var S=i[x],p=new Array(3),w=0;w<3;++w)p[w]=a[S[w]];var l=new Array(3),y=new Array(3);for(w=0;w<3;++w)l[w]=p[1][w]-p[0][w],y[w]=p[2][w]-p[0][w];var A=new Array(3),T=0;for(w=0;w<3;++w){var M=(w+1)%3,f=(w+2)%3;A[w]=l[M]*y[f]-l[f]*y[M],T+=A[w]*A[w]}for(T=T>b?1/Math.sqrt(T):0,w=0;w<3;++w)A[w]*=T;s[x]=A}return s}},{}],262:[function(e,c,d){"use strict";c.exports=function n(t,i,a,r,g,s,b,x,S,p){var w=i+s+p;if(l>0){var l=Math.sqrt(w+1);t[0]=.5*(b-S)/l,t[1]=.5*(x-r)/l,t[2]=.5*(a-s)/l,t[3]=.5*l}else{var y=Math.max(i,s,p);l=Math.sqrt(2*y-w+1),i>=y?(t[0]=.5*l,t[1]=.5*(g+a)/l,t[2]=.5*(x+r)/l,t[3]=.5*(b-S)/l):s>=y?(t[0]=.5*(a+g)/l,t[1]=.5*l,t[2]=.5*(S+b)/l,t[3]=.5*(x-r)/l):(t[0]=.5*(r+x)/l,t[1]=.5*(b+S)/l,t[2]=.5*l,t[3]=.5*(a-g)/l)}return t}},{}],263:[function(e,c,d){"use strict";c.exports=function p(w){var l=(w=w||{}).center||[0,0,0],y=w.rotation||[0,0,0,1],A=w.radius||1;l=[].slice.call(l,0,3),b(y=[].slice.call(y,0,4),y);var T=new x(y,l,Math.log(A));return T.setDistanceLimits(w.zoomMin,w.zoomMax),("eye"in w||"up"in w)&&T.lookAt(0,w.eye,w.center,w.up),T};var n=e("filtered-vector"),t=e("gl-mat4/lookAt"),i=e("gl-mat4/fromQuat"),a=e("gl-mat4/invert"),r=e("./lib/quatFromFrame");function g(w,l,y){return Math.sqrt(Math.pow(w,2)+Math.pow(l,2)+Math.pow(y,2))}function s(w,l,y,A){return Math.sqrt(Math.pow(w,2)+Math.pow(l,2)+Math.pow(y,2)+Math.pow(A,2))}function b(w,l){var y=l[0],A=l[1],T=l[2],M=l[3],f=s(y,A,T,M);f>1e-6?(w[0]=y/f,w[1]=A/f,w[2]=T/f,w[3]=M/f):(w[0]=w[1]=w[2]=0,w[3]=1)}function x(w,l,y){this.radius=n([y]),this.center=n(l),this.rotation=n(w),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var S=x.prototype;S.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},S.recalcMatrix=function(w){this.radius.curve(w),this.center.curve(w),this.rotation.curve(w);var l=this.computedRotation;b(l,l);var y=this.computedMatrix;i(y,l);var A=this.computedCenter,T=this.computedEye,M=this.computedUp,f=Math.exp(this.computedRadius[0]);T[0]=A[0]+f*y[2],T[1]=A[1]+f*y[6],T[2]=A[2]+f*y[10],M[0]=y[1],M[1]=y[5],M[2]=y[9];for(var u=0;u<3;++u){for(var h=0,o=0;o<3;++o)h+=y[u+4*o]*T[o];y[12+u]=-h}},S.getMatrix=function(w,l){this.recalcMatrix(w);var y=this.computedMatrix;if(l){for(var A=0;A<16;++A)l[A]=y[A];return l}return y},S.idle=function(w){this.center.idle(w),this.radius.idle(w),this.rotation.idle(w)},S.flush=function(w){this.center.flush(w),this.radius.flush(w),this.rotation.flush(w)},S.pan=function(w,l,y,A){l=l||0,y=y||0,A=A||0,this.recalcMatrix(w);var T=this.computedMatrix,M=T[1],f=T[5],u=T[9],h=g(M,f,u),o=T[0],C=T[4],R=T[8],z=o*(M/=h)+C*(f/=h)+R*(u/=h),O=g(o-=M*z,C-=f*z,R-=u*z),I=T[2],F=T[6],D=T[10],N=I*M+F*f+D*u,U=I*(o/=O)+F*(C/=O)+D*(R/=O),X=g(I-=N*M+U*o,F-=N*f+U*C,D-=N*u+U*R);I/=X,F/=X,D/=X,this.center.move(w,o*l+M*y,C*l+f*y,R*l+u*y);var W=Math.exp(this.computedRadius[0]);W=Math.max(1e-4,W+A),this.radius.set(w,Math.log(W))},S.rotate=function(w,l,y,A){this.recalcMatrix(w);var T=this.computedMatrix,R=T[2],z=T[6],O=T[10],I=(l=l||0)*T[0]+(y=y||0)*T[1],F=l*T[4]+y*T[5],D=l*T[8]+y*T[9],N=-(z*D-O*F),U=-(O*I-R*D),X=-(R*F-z*I),oe=Math.sqrt(Math.max(0,1-Math.pow(N,2)-Math.pow(U,2)-Math.pow(X,2))),se=s(N,U,X,oe);se>1e-6?(N/=se,U/=se,X/=se,oe/=se):(N=U=X=0,oe=1);var ne=this.computedRotation,W=ne[0],G=ne[1],$=ne[2],V=ne[3],H=W*oe+V*N+G*X-$*U,q=G*oe+V*U+$*N-W*X,K=$*oe+V*X+W*U-G*N,Y=V*oe-W*N-G*U-$*X;if(A){N=R,U=z,X=O;var te=Math.sin(A)/g(N,U,X);N*=te,U*=te,X*=te,Y=Y*(oe=Math.cos(l))-(H=H*oe+Y*N+q*X-K*U)*N-(q=q*oe+Y*U+K*N-H*X)*U-(K=K*oe+Y*X+H*U-q*N)*X}var J=s(H,q,K,Y);J>1e-6?(H/=J,q/=J,K/=J,Y/=J):(H=q=K=0,Y=1),this.rotation.set(w,H,q,K,Y)},S.lookAt=function(w,l,y,A){this.recalcMatrix(w);var T=this.computedMatrix;t(T,l=l||this.computedEye,y=y||this.computedCenter,A=A||this.computedUp);var M=this.computedRotation;r(M,T[0],T[1],T[2],T[4],T[5],T[6],T[8],T[9],T[10]),b(M,M),this.rotation.set(w,M[0],M[1],M[2],M[3]);for(var f=0,u=0;u<3;++u)f+=Math.pow(y[u]-l[u],2);this.radius.set(w,.5*Math.log(Math.max(f,1e-6))),this.center.set(w,y[0],y[1],y[2])},S.translate=function(w,l,y,A){this.center.move(w,l||0,y||0,A||0)},S.setMatrix=function(w,l){var y=this.computedRotation;r(y,l[0],l[1],l[2],l[4],l[5],l[6],l[8],l[9],l[10]),b(y,y),this.rotation.set(w,y[0],y[1],y[2],y[3]);var A=this.computedMatrix;a(A,l);var T=A[15];if(Math.abs(T)>1e-6){var M=A[12]/T,f=A[13]/T,u=A[14]/T;this.recalcMatrix(w);var h=Math.exp(this.computedRadius[0]);this.center.set(w,M-A[2]*h,f-A[6]*h,u-A[10]*h),this.radius.idle(w)}else this.center.idle(w),this.radius.idle(w)},S.setDistance=function(w,l){l>0&&this.radius.set(w,Math.log(l))},S.setDistanceLimits=function(w,l){w=w>0?Math.log(w):-1/0,l=l>0?Math.log(l):1/0,l=Math.max(l,w),this.radius.bounds[0][0]=w,this.radius.bounds[1][0]=l},S.getDistanceLimits=function(w){var l=this.radius.bounds;return w?(w[0]=Math.exp(l[0][0]),w[1]=Math.exp(l[1][0]),w):[Math.exp(l[0][0]),Math.exp(l[1][0])]},S.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},S.fromJSON=function(w){var l=this.lastT(),y=w.center;y&&this.center.set(l,y[0],y[1],y[2]);var A=w.rotation;A&&this.rotation.set(l,A[0],A[1],A[2],A[3]);var T=w.distance;T&&T>0&&this.radius.set(l,Math.log(T)),this.setDistanceLimits(w.zoomMin,w.zoomMax)}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(e,c,d){"use strict";var n=e("repeat-string");c.exports=function(i,a,r){return n(r=void 0!==r?r+"":" ",a)+i}},{"repeat-string":277}],265:[function(e,c,d){c.exports=function(t,i){i||(i=[0,""]),t=String(t);var a=parseFloat(t,10);return i[0]=a,i[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",i}},{}],266:[function(e,c,d){"use strict";c.exports=function t(i,a){for(var r=0|a.length,g=i.length,s=[new Array(r),new Array(r)],b=0;b<r;++b)s[0][b]=[],s[1][b]=[];for(b=0;b<g;++b){var x=i[b];s[0][x[0]].push(x),s[1][x[1]].push(x)}var S=[];for(b=0;b<r;++b)s[0][b].length+s[1][b].length===0&&S.push([b]);function p(u,h){var o=s[h][u[h]];o.splice(o.indexOf(u),1)}function w(u,h,o){for(var C,R,z,O=0;O<2;++O)if(s[O][h].length>0){C=s[O][h][0],z=O;break}R=C[1^z];for(var I=0;I<2;++I)for(var F=s[I][h],D=0;D<F.length;++D){var N=F[D],U=N[1^I];n(a[u],a[h],a[R],a[U])>0&&(C=N,R=U,z=I)}return o||C&&p(C,z),R}function l(u,h){var o=s[h][u][0],C=[u];p(o,h);for(var R=o[1^h];;){for(;R!==u;)C.push(R),R=w(C[C.length-2],R,!1);if(s[0][u].length+s[1][u].length===0)break;var O=C[C.length-1],I=u,F=C[1],D=w(O,I,!0);if(n(a[O],a[I],a[F],a[D])<0)break;C.push(u),R=w(O,I)}return C}for(b=0;b<r;++b)for(var A=0;A<2;++A){for(var T=[];s[A][b].length>0;){var f=l(b,A);(h=f)[1]===h[h.length-1]?T.push.apply(T,f):(T.length>0&&S.push(T),T=f)}T.length>0&&S.push(T)}var h;return S};var n=e("compare-angle")},{"compare-angle":54}],267:[function(e,c,d){"use strict";c.exports=function t(i,a){for(var r=n(i,a.length),g=new Array(a.length),s=new Array(a.length),b=[],x=0;x<a.length;++x){var S=r[x].length;s[x]=S,g[x]=!0,S<=1&&b.push(x)}for(;b.length>0;){g[p=b.pop()]=!1;var w=r[p];for(x=0;x<w.length;++x){var l=w[x];0==--s[l]&&b.push(l)}}var y=new Array(a.length),A=[];for(x=0;x<a.length;++x)if(g[x]){var p;y[x]=p=A.length,A.push(a[x])}else y[x]=-1;var T=[];for(x=0;x<i.length;++x){var M=i[x];g[M[0]]&&g[M[1]]&&T.push([y[M[0]],y[M[1]]])}return[T,A]};var n=e("edges-to-adjacency-list")},{"edges-to-adjacency-list":66}],268:[function(e,c,d){"use strict";c.exports=function S(p,w){p=(te=s(p,w))[0];for(var l=(w=te[1]).length,A=n(p,w.length),T=0;T<l;++T)if(A[T].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var M=t(p,w);var u=(M=M.filter(function f(xe){for(var ke=xe.length,we=[0],de=0;de<ke;++de){var be=w[xe[de]],Le=w[xe[(de+1)%ke]],De=a(-be[0],be[1]),ye=a(-be[0],Le[1]),Ce=a(Le[0],be[1]),Fe=a(Le[0],Le[1]);we=r(we,r(r(De,ye),r(Ce,Fe)))}return we[we.length-1]>0})).length,h=new Array(u),o=new Array(u);for(T=0;T<u;++T){h[T]=T;var C=new Array(u),R=M[T].map(function(ke){return w[ke]}),z=i([R]),O=0;e:for(var I=0;I<u;++I)if(C[I]=0,T!==I){for(var D=(F=M[I]).length,N=0;N<D;++N){var U=z(w[F[N]]);if(0!==U){U<0&&(C[I]=1,O+=1);continue e}}C[I]=1,O+=1}o[T]=[O,T,C]}for(o.sort(function(xe,ke){return ke[0]-xe[0]}),T=0;T<u;++T){var X=(C=o[T])[1],oe=C[2];for(I=0;I<u;++I)oe[I]&&(h[I]=X)}var se=function x(p){for(var w=new Array(p),l=0;l<p;++l)w[l]=[];return w}(u);for(T=0;T<u;++T)se[T].push(h[T]),se[h[T]].push(T);var ne={},W=b(l,!1);for(T=0;T<u;++T)for(D=(F=M[T]).length,I=0;I<D;++I){var G=F[I],$=F[(I+1)%D],V=Math.min(G,$)+":"+Math.max(G,$);if(V in ne){var H=ne[V];se[H].push(T),se[T].push(H),W[G]=W[$]=!0}else ne[V]=T}function q(xe){for(var ke=xe.length,we=0;we<ke;++we)if(!W[xe[we]])return!1;return!0}var K=[],Y=b(u,-1);for(T=0;T<u;++T)h[T]!==T||q(M[T])?Y[T]=-1:(K.push(T),Y[T]=0);for(var te=[];K.length>0;){var J=K.pop(),j=se[J];g(j,function(xe,ke){return xe-ke});var ge,re=j.length,le=Y[J];for(0===le&&(ge=[F=M[J]]),T=0;T<re;++T){var F,pe=j[T];Y[pe]>=0||(Y[pe]=1^le,K.push(pe),0!==le)||q(F=M[pe])||(F.reverse(),ge.push(F))}0===le&&te.push(ge)}return te};var n=e("edges-to-adjacency-list"),t=e("planar-dual"),i=e("point-in-big-polygon"),a=e("two-product"),r=e("robust-sum"),g=e("uniq"),s=e("./lib/trim-leaves");function b(p,w){for(var l=new Array(p),y=0;y<p;++y)l[y]=w;return l}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(e,c,d){c.exports=function w(l){for(var y=l.length,A=[],T=[],f=0;f<y;++f)for(var u=l[f],h=u.length,o=h-1,C=0;C<h;o=C++){var R=u[o],z=u[C];R[0]===z[0]?T.push([R,z]):A.push([R,z])}if(0===A.length)return 0===T.length?x:function S(l){return function(A){return l(A[0],A[1])?0:1}}(s(T));var O=t(A),I=function b(l,y){return function(A){var T=a.le(y,A[0]);if(T<0)return 1;var M=l[T];if(!M){if(!(T>0&&y[T]===A[0]))return 1;M=l[T-1]}for(var f=1;M;){var u=M.key,h=n(A,u[0],u[1]);if(u[0][0]<u[1][0])if(h<0)M=M.left;else{if(!(h>0))return 0;f=-1,M=M.right}else if(h>0)M=M.left;else{if(!(h<0))return 0;f=1,M=M.right}}return f}}(O.slabs,O.coordinates);return 0===T.length?I:function p(l,y){return function(T){return l(T[0],T[1])?0:y(T)}}(s(T),I)};var n=e("robust-orientation")[3],t=e("slab-decomposition"),i=e("interval-tree-1d"),a=e("binary-search-bounds");function r(){return!0}function s(l){for(var y={},A=0;A<l.length;++A){var T=l[A],M=T[0][0],f=T[0][1],u=T[1][1],h=[Math.min(f,u),Math.max(f,u)];M in y?y[M].push(h):y[M]=[h]}var o={},C=Object.keys(y);for(A=0;A<C.length;++A)o[C[A]]=i(y[C[A]]);return function g(l){return function(y,A){var T=l[y];return!!T&&!!T.queryPoint(A,r)}}(o)}function x(l){return 1}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(e,c,d){"use strict";var n=new Float64Array(4),t=new Float64Array(4),i=new Float64Array(4);c.exports=function a(r,g,s,b,x){n.length<b.length&&(n=new Float64Array(b.length),t=new Float64Array(b.length),i=new Float64Array(b.length));for(var S=0;S<b.length;++S)n[S]=r[S]-b[S],t[S]=g[S]-r[S],i[S]=s[S]-r[S];var p=0,w=0,l=0,y=0,A=0,T=0;for(S=0;S<b.length;++S){var M=t[S],f=i[S],u=n[S];p+=M*M,w+=M*f,l+=f*f,y+=u*M,A+=u*f,T+=u*u}var R,O,I,F,D,h=Math.abs(p*l-w*w),o=w*A-l*y,C=w*y-p*A;if(o+C<=h)if(o<0)C<0&&y<0?(C=0,-y>=p?(o=1,R=p+2*y+T):R=y*(o=-y/p)+T):(o=0,A>=0?(C=0,R=T):-A>=l?(C=1,R=l+2*A+T):R=A*(C=-A/l)+T);else if(C<0)C=0,y>=0?(o=0,R=T):-y>=p?(o=1,R=p+2*y+T):R=y*(o=-y/p)+T;else{var z=1/h;R=(o*=z)*(p*o+w*(C*=z)+2*y)+C*(w*o+l*C+2*A)+T}else o<0?(I=l+A)>(O=w+y)?(F=I-O)>=(D=p-2*w+l)?(o=1,C=0,R=p+2*y+T):R=(o=F/D)*(p*o+w*(C=1-o)+2*y)+C*(w*o+l*C+2*A)+T:(o=0,I<=0?(C=1,R=l+2*A+T):A>=0?(C=0,R=T):R=A*(C=-A/l)+T):C<0?(I=p+y)>(O=w+A)?(F=I-O)>=(D=p-2*w+l)?(C=1,o=0,R=l+2*A+T):R=(o=1-(C=F/D))*(p*o+w*C+2*y)+C*(w*o+l*C+2*A)+T:(C=0,I<=0?(o=1,R=p+2*y+T):y>=0?(o=0,R=T):R=y*(o=-y/p)+T):(F=l+A-w-y)<=0?(o=0,C=1,R=l+2*A+T):F>=(D=p-2*w+l)?(o=1,C=0,R=p+2*y+T):R=(o=F/D)*(p*o+w*(C=1-o)+2*y)+C*(w*o+l*C+2*A)+T;var N=1-o-C;for(S=0;S<b.length;++S)x[S]=N*r[S]+o*g[S]+C*s[S];return R<0?0:R}},{}],271:[function(e,c,d){c.exports=e("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(e,c,d){"use strict";var n=e("big-rat/add");c.exports=function t(i,a){for(var r=i.length,g=new Array(r),s=0;s<r;++s)g[s]=n(i[s],a[s]);return g}},{"big-rat/add":15}],273:[function(e,c,d){"use strict";c.exports=function t(i){for(var a=new Array(i.length),r=0;r<i.length;++r)a[r]=n(i[r]);return a};var n=e("big-rat")},{"big-rat":18}],274:[function(e,c,d){"use strict";var n=e("big-rat"),t=e("big-rat/mul");c.exports=function i(a,r){for(var g=n(r),s=a.length,b=new Array(s),x=0;x<s;++x)b[x]=t(a[x],g);return b}},{"big-rat":18,"big-rat/mul":27}],275:[function(e,c,d){"use strict";var n=e("big-rat/sub");c.exports=function t(i,a){for(var r=i.length,g=new Array(r),s=0;s<r;++s)g[s]=n(i[s],a[s]);return g}},{"big-rat/sub":29}],276:[function(e,c,d){"use strict";var n=e("compare-cell"),t=e("compare-oriented-cell"),i=e("cell-orientation");c.exports=function a(r){r.sort(t);for(var g=r.length,s=0,b=0;b<g;++b){var x=r[b],S=i(x);if(0!==S){if(s>0){var p=r[s-1];if(0===n(x,p)&&i(p)!==S){s-=1;continue}}r[s++]=x}}return r.length=s,r}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(e,c,d){"use strict";var t,n="";c.exports=function i(a,r){if("string"!=typeof a)throw new TypeError("expected a string");if(1===r)return a;if(2===r)return a+a;var g=a.length*r;if(t!==a||void 0===t)t=a,n="";else if(n.length>=g)return n.substr(0,g);for(;g>n.length&&r>1;)1&r&&(n+=a),r>>=1,a+=a;return n=(n+=a).substr(0,g)}},{}],278:[function(e,c,d){(function(n){(function(){c.exports=n.performance&&n.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,void 0!==_?_:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],279:[function(e,c,d){"use strict";c.exports=function n(t){for(var i=t.length,a=t[t.length-1],r=i,g=i-2;g>=0;--g)(S=(b=t[g])-((a=(s=a)+b)-s))&&(t[--r]=a,a=S);var p=0;for(g=r;g<i;++g){var s,b,S;(S=(b=a)-((a=(s=t[g])+b)-s))&&(t[p++]=S)}return t[p++]=a,t.length=p,t}},{}],280:[function(e,c,d){"use strict";var n=e("two-product"),t=e("robust-sum"),i=e("robust-scale"),a=e("robust-compress");function g(y,A,T,M){return function(u){return M(y(T(u[0][0],u[1][1]),T(-u[0][1],u[1][0])))}}function s(y,A,T,M){return function(u){return M(y(A(y(T(u[1][1],u[2][2]),T(-u[1][2],u[2][1])),u[0][0]),y(A(y(T(u[1][0],u[2][2]),T(-u[1][2],u[2][0])),-u[0][1]),A(y(T(u[1][0],u[2][1]),T(-u[1][1],u[2][0])),u[0][2]))))}}function b(y,A,T,M){return function(u){return M(y(y(A(y(A(y(T(u[2][2],u[3][3]),T(-u[2][3],u[3][2])),u[1][1]),y(A(y(T(u[2][1],u[3][3]),T(-u[2][3],u[3][1])),-u[1][2]),A(y(T(u[2][1],u[3][2]),T(-u[2][2],u[3][1])),u[1][3]))),u[0][0]),A(y(A(y(T(u[2][2],u[3][3]),T(-u[2][3],u[3][2])),u[1][0]),y(A(y(T(u[2][0],u[3][3]),T(-u[2][3],u[3][0])),-u[1][2]),A(y(T(u[2][0],u[3][2]),T(-u[2][2],u[3][0])),u[1][3]))),-u[0][1])),y(A(y(A(y(T(u[2][1],u[3][3]),T(-u[2][3],u[3][1])),u[1][0]),y(A(y(T(u[2][0],u[3][3]),T(-u[2][3],u[3][0])),-u[1][1]),A(y(T(u[2][0],u[3][1]),T(-u[2][1],u[3][0])),u[1][3]))),u[0][2]),A(y(A(y(T(u[2][1],u[3][2]),T(-u[2][2],u[3][1])),u[1][0]),y(A(y(T(u[2][0],u[3][2]),T(-u[2][2],u[3][0])),-u[1][1]),A(y(T(u[2][0],u[3][1]),T(-u[2][1],u[3][0])),u[1][2]))),-u[0][3]))))}}function x(y,A,T,M){return function(u){return M(y(y(A(y(y(A(y(A(y(T(u[3][3],u[4][4]),T(-u[3][4],u[4][3])),u[2][2]),y(A(y(T(u[3][2],u[4][4]),T(-u[3][4],u[4][2])),-u[2][3]),A(y(T(u[3][2],u[4][3]),T(-u[3][3],u[4][2])),u[2][4]))),u[1][1]),A(y(A(y(T(u[3][3],u[4][4]),T(-u[3][4],u[4][3])),u[2][1]),y(A(y(T(u[3][1],u[4][4]),T(-u[3][4],u[4][1])),-u[2][3]),A(y(T(u[3][1],u[4][3]),T(-u[3][3],u[4][1])),u[2][4]))),-u[1][2])),y(A(y(A(y(T(u[3][2],u[4][4]),T(-u[3][4],u[4][2])),u[2][1]),y(A(y(T(u[3][1],u[4][4]),T(-u[3][4],u[4][1])),-u[2][2]),A(y(T(u[3][1],u[4][2]),T(-u[3][2],u[4][1])),u[2][4]))),u[1][3]),A(y(A(y(T(u[3][2],u[4][3]),T(-u[3][3],u[4][2])),u[2][1]),y(A(y(T(u[3][1],u[4][3]),T(-u[3][3],u[4][1])),-u[2][2]),A(y(T(u[3][1],u[4][2]),T(-u[3][2],u[4][1])),u[2][3]))),-u[1][4]))),u[0][0]),A(y(y(A(y(A(y(T(u[3][3],u[4][4]),T(-u[3][4],u[4][3])),u[2][2]),y(A(y(T(u[3][2],u[4][4]),T(-u[3][4],u[4][2])),-u[2][3]),A(y(T(u[3][2],u[4][3]),T(-u[3][3],u[4][2])),u[2][4]))),u[1][0]),A(y(A(y(T(u[3][3],u[4][4]),T(-u[3][4],u[4][3])),u[2][0]),y(A(y(T(u[3][0],u[4][4]),T(-u[3][4],u[4][0])),-u[2][3]),A(y(T(u[3][0],u[4][3]),T(-u[3][3],u[4][0])),u[2][4]))),-u[1][2])),y(A(y(A(y(T(u[3][2],u[4][4]),T(-u[3][4],u[4][2])),u[2][0]),y(A(y(T(u[3][0],u[4][4]),T(-u[3][4],u[4][0])),-u[2][2]),A(y(T(u[3][0],u[4][2]),T(-u[3][2],u[4][0])),u[2][4]))),u[1][3]),A(y(A(y(T(u[3][2],u[4][3]),T(-u[3][3],u[4][2])),u[2][0]),y(A(y(T(u[3][0],u[4][3]),T(-u[3][3],u[4][0])),-u[2][2]),A(y(T(u[3][0],u[4][2]),T(-u[3][2],u[4][0])),u[2][3]))),-u[1][4]))),-u[0][1])),y(A(y(y(A(y(A(y(T(u[3][3],u[4][4]),T(-u[3][4],u[4][3])),u[2][1]),y(A(y(T(u[3][1],u[4][4]),T(-u[3][4],u[4][1])),-u[2][3]),A(y(T(u[3][1],u[4][3]),T(-u[3][3],u[4][1])),u[2][4]))),u[1][0]),A(y(A(y(T(u[3][3],u[4][4]),T(-u[3][4],u[4][3])),u[2][0]),y(A(y(T(u[3][0],u[4][4]),T(-u[3][4],u[4][0])),-u[2][3]),A(y(T(u[3][0],u[4][3]),T(-u[3][3],u[4][0])),u[2][4]))),-u[1][1])),y(A(y(A(y(T(u[3][1],u[4][4]),T(-u[3][4],u[4][1])),u[2][0]),y(A(y(T(u[3][0],u[4][4]),T(-u[3][4],u[4][0])),-u[2][1]),A(y(T(u[3][0],u[4][1]),T(-u[3][1],u[4][0])),u[2][4]))),u[1][3]),A(y(A(y(T(u[3][1],u[4][3]),T(-u[3][3],u[4][1])),u[2][0]),y(A(y(T(u[3][0],u[4][3]),T(-u[3][3],u[4][0])),-u[2][1]),A(y(T(u[3][0],u[4][1]),T(-u[3][1],u[4][0])),u[2][3]))),-u[1][4]))),u[0][2]),y(A(y(y(A(y(A(y(T(u[3][2],u[4][4]),T(-u[3][4],u[4][2])),u[2][1]),y(A(y(T(u[3][1],u[4][4]),T(-u[3][4],u[4][1])),-u[2][2]),A(y(T(u[3][1],u[4][2]),T(-u[3][2],u[4][1])),u[2][4]))),u[1][0]),A(y(A(y(T(u[3][2],u[4][4]),T(-u[3][4],u[4][2])),u[2][0]),y(A(y(T(u[3][0],u[4][4]),T(-u[3][4],u[4][0])),-u[2][2]),A(y(T(u[3][0],u[4][2]),T(-u[3][2],u[4][0])),u[2][4]))),-u[1][1])),y(A(y(A(y(T(u[3][1],u[4][4]),T(-u[3][4],u[4][1])),u[2][0]),y(A(y(T(u[3][0],u[4][4]),T(-u[3][4],u[4][0])),-u[2][1]),A(y(T(u[3][0],u[4][1]),T(-u[3][1],u[4][0])),u[2][4]))),u[1][2]),A(y(A(y(T(u[3][1],u[4][2]),T(-u[3][2],u[4][1])),u[2][0]),y(A(y(T(u[3][0],u[4][2]),T(-u[3][2],u[4][0])),-u[2][1]),A(y(T(u[3][0],u[4][1]),T(-u[3][1],u[4][0])),u[2][2]))),-u[1][4]))),-u[0][3]),A(y(y(A(y(A(y(T(u[3][2],u[4][3]),T(-u[3][3],u[4][2])),u[2][1]),y(A(y(T(u[3][1],u[4][3]),T(-u[3][3],u[4][1])),-u[2][2]),A(y(T(u[3][1],u[4][2]),T(-u[3][2],u[4][1])),u[2][3]))),u[1][0]),A(y(A(y(T(u[3][2],u[4][3]),T(-u[3][3],u[4][2])),u[2][0]),y(A(y(T(u[3][0],u[4][3]),T(-u[3][3],u[4][0])),-u[2][2]),A(y(T(u[3][0],u[4][2]),T(-u[3][2],u[4][0])),u[2][3]))),-u[1][1])),y(A(y(A(y(T(u[3][1],u[4][3]),T(-u[3][3],u[4][1])),u[2][0]),y(A(y(T(u[3][0],u[4][3]),T(-u[3][3],u[4][0])),-u[2][1]),A(y(T(u[3][0],u[4][1]),T(-u[3][1],u[4][0])),u[2][3]))),u[1][2]),A(y(A(y(T(u[3][1],u[4][2]),T(-u[3][2],u[4][1])),u[2][0]),y(A(y(T(u[3][0],u[4][2]),T(-u[3][2],u[4][0])),-u[2][1]),A(y(T(u[3][0],u[4][1]),T(-u[3][1],u[4][0])),u[2][2]))),-u[1][3]))),u[0][4])))))}}function S(y){return(2===y?g:3===y?s:4===y?b:5===y?x:void 0)(t,i,n,a)}var p=[function(){return[0]},function(A){return[A[0][0]]}];function w(y,A,T,M,f,u,h,o){return function(R){switch(R.length){case 0:return y(R);case 1:return A(R);case 2:return T(R);case 3:return M(R);case 4:return f(R);case 5:return u(R)}var z=h[R.length];return z||(z=h[R.length]=o(R.length)),z(R)}}!function l(){for(;p.length<6;)p.push(S(p.length));c.exports=w.apply(void 0,p.concat([p,S]));for(var y=0;y<p.length;++y)c.exports[y]=p[y]}()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(e,c,d){"use strict";var n=e("two-product"),t=e("robust-sum");c.exports=function i(a,r){for(var g=n(a[0],r[0]),s=1;s<a.length;++s)g=t(g,n(a[s],r[s]));return g}},{"robust-sum":289,"two-product":306}],282:[function(e,c,d){"use strict";var n=e("two-product"),t=e("robust-sum"),i=e("robust-subtract"),a=e("robust-scale");function g(f){return(3===f?S:4===f?p:5===f?w:l)(t,i,n,a)}function S(f,u,h,o){return function C(R,z,O){var I=h(R[0],R[0]),F=o(I,z[0]),D=o(I,O[0]),N=h(z[0],z[0]),U=o(N,R[0]),X=o(N,O[0]),oe=h(O[0],O[0]),se=o(oe,R[0]),ne=o(oe,z[0]),W=f(u(ne,X),u(U,F)),G=u(se,D),$=u(W,G);return $[$.length-1]}}function p(f,u,h,o){return function C(R,z,O,I){var F=f(h(R[0],R[0]),h(R[1],R[1])),D=o(F,z[0]),N=o(F,O[0]),U=o(F,I[0]),X=f(h(z[0],z[0]),h(z[1],z[1])),oe=o(X,R[0]),se=o(X,O[0]),ne=o(X,I[0]),W=f(h(O[0],O[0]),h(O[1],O[1])),G=o(W,R[0]),$=o(W,z[0]),V=o(W,I[0]),H=f(h(I[0],I[0]),h(I[1],I[1])),q=o(H,R[0]),K=o(H,z[0]),Y=o(H,O[0]),te=f(f(o(u(Y,V),z[1]),f(o(u(K,ne),-O[1]),o(u($,se),I[1]))),f(o(u(K,ne),R[1]),f(o(u(q,U),-z[1]),o(u(oe,D),I[1])))),J=f(f(o(u(Y,V),R[1]),f(o(u(q,U),-O[1]),o(u(G,N),I[1]))),f(o(u($,se),R[1]),f(o(u(G,N),-z[1]),o(u(oe,D),O[1])))),j=u(te,J);return j[j.length-1]}}function w(f,u,h,o){return function C(R,z,O,I,F){var D=f(h(R[0],R[0]),f(h(R[1],R[1]),h(R[2],R[2]))),N=o(D,z[0]),U=o(D,O[0]),X=o(D,I[0]),oe=o(D,F[0]),se=f(h(z[0],z[0]),f(h(z[1],z[1]),h(z[2],z[2]))),ne=o(se,R[0]),W=o(se,O[0]),G=o(se,I[0]),$=o(se,F[0]),V=f(h(O[0],O[0]),f(h(O[1],O[1]),h(O[2],O[2]))),H=o(V,R[0]),q=o(V,z[0]),K=o(V,I[0]),Y=o(V,F[0]),te=f(h(I[0],I[0]),f(h(I[1],I[1]),h(I[2],I[2]))),J=o(te,R[0]),j=o(te,z[0]),re=o(te,O[0]),le=o(te,F[0]),ge=f(h(F[0],F[0]),f(h(F[1],F[1]),h(F[2],F[2]))),pe=o(ge,R[0]),xe=o(ge,z[0]),ke=o(ge,O[0]),we=o(ge,I[0]),de=f(f(f(o(f(o(u(we,le),O[1]),f(o(u(ke,Y),-I[1]),o(u(re,K),F[1]))),z[2]),f(o(f(o(u(we,le),z[1]),f(o(u(xe,$),-I[1]),o(u(j,G),F[1]))),-O[2]),o(f(o(u(ke,Y),z[1]),f(o(u(xe,$),-O[1]),o(u(q,W),F[1]))),I[2]))),f(o(f(o(u(re,K),z[1]),f(o(u(j,G),-O[1]),o(u(q,W),I[1]))),-F[2]),f(o(f(o(u(we,le),z[1]),f(o(u(xe,$),-I[1]),o(u(j,G),F[1]))),R[2]),o(f(o(u(we,le),R[1]),f(o(u(pe,oe),-I[1]),o(u(J,X),F[1]))),-z[2])))),f(f(o(f(o(u(xe,$),R[1]),f(o(u(pe,oe),-z[1]),o(u(ne,N),F[1]))),I[2]),f(o(f(o(u(j,G),R[1]),f(o(u(J,X),-z[1]),o(u(ne,N),I[1]))),-F[2]),o(f(o(u(re,K),z[1]),f(o(u(j,G),-O[1]),o(u(q,W),I[1]))),R[2]))),f(o(f(o(u(re,K),R[1]),f(o(u(J,X),-O[1]),o(u(H,U),I[1]))),-z[2]),f(o(f(o(u(j,G),R[1]),f(o(u(J,X),-z[1]),o(u(ne,N),I[1]))),O[2]),o(f(o(u(q,W),R[1]),f(o(u(H,U),-z[1]),o(u(ne,N),O[1]))),-I[2]))))),be=f(f(f(o(f(o(u(we,le),O[1]),f(o(u(ke,Y),-I[1]),o(u(re,K),F[1]))),R[2]),o(f(o(u(we,le),R[1]),f(o(u(pe,oe),-I[1]),o(u(J,X),F[1]))),-O[2])),f(o(f(o(u(ke,Y),R[1]),f(o(u(pe,oe),-O[1]),o(u(H,U),F[1]))),I[2]),o(f(o(u(re,K),R[1]),f(o(u(J,X),-O[1]),o(u(H,U),I[1]))),-F[2]))),f(f(o(f(o(u(ke,Y),z[1]),f(o(u(xe,$),-O[1]),o(u(q,W),F[1]))),R[2]),o(f(o(u(ke,Y),R[1]),f(o(u(pe,oe),-O[1]),o(u(H,U),F[1]))),-z[2])),f(o(f(o(u(xe,$),R[1]),f(o(u(pe,oe),-z[1]),o(u(ne,N),F[1]))),O[2]),o(f(o(u(q,W),R[1]),f(o(u(H,U),-z[1]),o(u(ne,N),O[1]))),-F[2])))),Le=u(de,be);return Le[Le.length-1]}}function l(f,u,h,o){return function C(R,z,O,I,F,D){var N=f(f(h(R[0],R[0]),h(R[1],R[1])),f(h(R[2],R[2]),h(R[3],R[3]))),U=o(N,z[0]),X=o(N,O[0]),oe=o(N,I[0]),se=o(N,F[0]),ne=o(N,D[0]),W=f(f(h(z[0],z[0]),h(z[1],z[1])),f(h(z[2],z[2]),h(z[3],z[3]))),G=o(W,R[0]),$=o(W,O[0]),V=o(W,I[0]),H=o(W,F[0]),q=o(W,D[0]),K=f(f(h(O[0],O[0]),h(O[1],O[1])),f(h(O[2],O[2]),h(O[3],O[3]))),Y=o(K,R[0]),te=o(K,z[0]),J=o(K,I[0]),j=o(K,F[0]),re=o(K,D[0]),le=f(f(h(I[0],I[0]),h(I[1],I[1])),f(h(I[2],I[2]),h(I[3],I[3]))),ge=o(le,R[0]),pe=o(le,z[0]),xe=o(le,O[0]),ke=o(le,F[0]),we=o(le,D[0]),de=f(f(h(F[0],F[0]),h(F[1],F[1])),f(h(F[2],F[2]),h(F[3],F[3]))),be=o(de,R[0]),Le=o(de,z[0]),De=o(de,O[0]),ye=o(de,I[0]),Ce=o(de,D[0]),Fe=f(f(h(D[0],D[0]),h(D[1],D[1])),f(h(D[2],D[2]),h(D[3],D[3]))),Ke=o(Fe,R[0]),Ue=o(Fe,z[0]),Be=o(Fe,O[0]),Ie=o(Fe,I[0]),nt=o(Fe,F[0]),gt=f(f(f(o(f(f(o(f(o(u(nt,Ce),I[1]),f(o(u(Ie,we),-F[1]),o(u(ye,ke),D[1]))),O[2]),o(f(o(u(nt,Ce),O[1]),f(o(u(Be,re),-F[1]),o(u(De,j),D[1]))),-I[2])),f(o(f(o(u(Ie,we),O[1]),f(o(u(Be,re),-I[1]),o(u(xe,J),D[1]))),F[2]),o(f(o(u(ye,ke),O[1]),f(o(u(De,j),-I[1]),o(u(xe,J),F[1]))),-D[2]))),z[3]),f(o(f(f(o(f(o(u(nt,Ce),I[1]),f(o(u(Ie,we),-F[1]),o(u(ye,ke),D[1]))),z[2]),o(f(o(u(nt,Ce),z[1]),f(o(u(Ue,q),-F[1]),o(u(Le,H),D[1]))),-I[2])),f(o(f(o(u(Ie,we),z[1]),f(o(u(Ue,q),-I[1]),o(u(pe,V),D[1]))),F[2]),o(f(o(u(ye,ke),z[1]),f(o(u(Le,H),-I[1]),o(u(pe,V),F[1]))),-D[2]))),-O[3]),o(f(f(o(f(o(u(nt,Ce),O[1]),f(o(u(Be,re),-F[1]),o(u(De,j),D[1]))),z[2]),o(f(o(u(nt,Ce),z[1]),f(o(u(Ue,q),-F[1]),o(u(Le,H),D[1]))),-O[2])),f(o(f(o(u(Be,re),z[1]),f(o(u(Ue,q),-O[1]),o(u(te,$),D[1]))),F[2]),o(f(o(u(De,j),z[1]),f(o(u(Le,H),-O[1]),o(u(te,$),F[1]))),-D[2]))),I[3]))),f(f(o(f(f(o(f(o(u(Ie,we),O[1]),f(o(u(Be,re),-I[1]),o(u(xe,J),D[1]))),z[2]),o(f(o(u(Ie,we),z[1]),f(o(u(Ue,q),-I[1]),o(u(pe,V),D[1]))),-O[2])),f(o(f(o(u(Be,re),z[1]),f(o(u(Ue,q),-O[1]),o(u(te,$),D[1]))),I[2]),o(f(o(u(xe,J),z[1]),f(o(u(pe,V),-O[1]),o(u(te,$),I[1]))),-D[2]))),-F[3]),o(f(f(o(f(o(u(ye,ke),O[1]),f(o(u(De,j),-I[1]),o(u(xe,J),F[1]))),z[2]),o(f(o(u(ye,ke),z[1]),f(o(u(Le,H),-I[1]),o(u(pe,V),F[1]))),-O[2])),f(o(f(o(u(De,j),z[1]),f(o(u(Le,H),-O[1]),o(u(te,$),F[1]))),I[2]),o(f(o(u(xe,J),z[1]),f(o(u(pe,V),-O[1]),o(u(te,$),I[1]))),-F[2]))),D[3])),f(o(f(f(o(f(o(u(nt,Ce),I[1]),f(o(u(Ie,we),-F[1]),o(u(ye,ke),D[1]))),z[2]),o(f(o(u(nt,Ce),z[1]),f(o(u(Ue,q),-F[1]),o(u(Le,H),D[1]))),-I[2])),f(o(f(o(u(Ie,we),z[1]),f(o(u(Ue,q),-I[1]),o(u(pe,V),D[1]))),F[2]),o(f(o(u(ye,ke),z[1]),f(o(u(Le,H),-I[1]),o(u(pe,V),F[1]))),-D[2]))),R[3]),o(f(f(o(f(o(u(nt,Ce),I[1]),f(o(u(Ie,we),-F[1]),o(u(ye,ke),D[1]))),R[2]),o(f(o(u(nt,Ce),R[1]),f(o(u(Ke,ne),-F[1]),o(u(be,se),D[1]))),-I[2])),f(o(f(o(u(Ie,we),R[1]),f(o(u(Ke,ne),-I[1]),o(u(ge,oe),D[1]))),F[2]),o(f(o(u(ye,ke),R[1]),f(o(u(be,se),-I[1]),o(u(ge,oe),F[1]))),-D[2]))),-z[3])))),f(f(f(o(f(f(o(f(o(u(nt,Ce),z[1]),f(o(u(Ue,q),-F[1]),o(u(Le,H),D[1]))),R[2]),o(f(o(u(nt,Ce),R[1]),f(o(u(Ke,ne),-F[1]),o(u(be,se),D[1]))),-z[2])),f(o(f(o(u(Ue,q),R[1]),f(o(u(Ke,ne),-z[1]),o(u(G,U),D[1]))),F[2]),o(f(o(u(Le,H),R[1]),f(o(u(be,se),-z[1]),o(u(G,U),F[1]))),-D[2]))),I[3]),o(f(f(o(f(o(u(Ie,we),z[1]),f(o(u(Ue,q),-I[1]),o(u(pe,V),D[1]))),R[2]),o(f(o(u(Ie,we),R[1]),f(o(u(Ke,ne),-I[1]),o(u(ge,oe),D[1]))),-z[2])),f(o(f(o(u(Ue,q),R[1]),f(o(u(Ke,ne),-z[1]),o(u(G,U),D[1]))),I[2]),o(f(o(u(pe,V),R[1]),f(o(u(ge,oe),-z[1]),o(u(G,U),I[1]))),-D[2]))),-F[3])),f(o(f(f(o(f(o(u(ye,ke),z[1]),f(o(u(Le,H),-I[1]),o(u(pe,V),F[1]))),R[2]),o(f(o(u(ye,ke),R[1]),f(o(u(be,se),-I[1]),o(u(ge,oe),F[1]))),-z[2])),f(o(f(o(u(Le,H),R[1]),f(o(u(be,se),-z[1]),o(u(G,U),F[1]))),I[2]),o(f(o(u(pe,V),R[1]),f(o(u(ge,oe),-z[1]),o(u(G,U),I[1]))),-F[2]))),D[3]),o(f(f(o(f(o(u(Ie,we),O[1]),f(o(u(Be,re),-I[1]),o(u(xe,J),D[1]))),z[2]),o(f(o(u(Ie,we),z[1]),f(o(u(Ue,q),-I[1]),o(u(pe,V),D[1]))),-O[2])),f(o(f(o(u(Be,re),z[1]),f(o(u(Ue,q),-O[1]),o(u(te,$),D[1]))),I[2]),o(f(o(u(xe,J),z[1]),f(o(u(pe,V),-O[1]),o(u(te,$),I[1]))),-D[2]))),R[3]))),f(f(o(f(f(o(f(o(u(Ie,we),O[1]),f(o(u(Be,re),-I[1]),o(u(xe,J),D[1]))),R[2]),o(f(o(u(Ie,we),R[1]),f(o(u(Ke,ne),-I[1]),o(u(ge,oe),D[1]))),-O[2])),f(o(f(o(u(Be,re),R[1]),f(o(u(Ke,ne),-O[1]),o(u(Y,X),D[1]))),I[2]),o(f(o(u(xe,J),R[1]),f(o(u(ge,oe),-O[1]),o(u(Y,X),I[1]))),-D[2]))),-z[3]),o(f(f(o(f(o(u(Ie,we),z[1]),f(o(u(Ue,q),-I[1]),o(u(pe,V),D[1]))),R[2]),o(f(o(u(Ie,we),R[1]),f(o(u(Ke,ne),-I[1]),o(u(ge,oe),D[1]))),-z[2])),f(o(f(o(u(Ue,q),R[1]),f(o(u(Ke,ne),-z[1]),o(u(G,U),D[1]))),I[2]),o(f(o(u(pe,V),R[1]),f(o(u(ge,oe),-z[1]),o(u(G,U),I[1]))),-D[2]))),O[3])),f(o(f(f(o(f(o(u(Be,re),z[1]),f(o(u(Ue,q),-O[1]),o(u(te,$),D[1]))),R[2]),o(f(o(u(Be,re),R[1]),f(o(u(Ke,ne),-O[1]),o(u(Y,X),D[1]))),-z[2])),f(o(f(o(u(Ue,q),R[1]),f(o(u(Ke,ne),-z[1]),o(u(G,U),D[1]))),O[2]),o(f(o(u(te,$),R[1]),f(o(u(Y,X),-z[1]),o(u(G,U),O[1]))),-D[2]))),-I[3]),o(f(f(o(f(o(u(xe,J),z[1]),f(o(u(pe,V),-O[1]),o(u(te,$),I[1]))),R[2]),o(f(o(u(xe,J),R[1]),f(o(u(ge,oe),-O[1]),o(u(Y,X),I[1]))),-z[2])),f(o(f(o(u(pe,V),R[1]),f(o(u(ge,oe),-z[1]),o(u(G,U),I[1]))),O[2]),o(f(o(u(te,$),R[1]),f(o(u(Y,X),-z[1]),o(u(G,U),O[1]))),-I[2]))),D[3]))))),Nt=f(f(f(o(f(f(o(f(o(u(nt,Ce),I[1]),f(o(u(Ie,we),-F[1]),o(u(ye,ke),D[1]))),O[2]),o(f(o(u(nt,Ce),O[1]),f(o(u(Be,re),-F[1]),o(u(De,j),D[1]))),-I[2])),f(o(f(o(u(Ie,we),O[1]),f(o(u(Be,re),-I[1]),o(u(xe,J),D[1]))),F[2]),o(f(o(u(ye,ke),O[1]),f(o(u(De,j),-I[1]),o(u(xe,J),F[1]))),-D[2]))),R[3]),f(o(f(f(o(f(o(u(nt,Ce),I[1]),f(o(u(Ie,we),-F[1]),o(u(ye,ke),D[1]))),R[2]),o(f(o(u(nt,Ce),R[1]),f(o(u(Ke,ne),-F[1]),o(u(be,se),D[1]))),-I[2])),f(o(f(o(u(Ie,we),R[1]),f(o(u(Ke,ne),-I[1]),o(u(ge,oe),D[1]))),F[2]),o(f(o(u(ye,ke),R[1]),f(o(u(be,se),-I[1]),o(u(ge,oe),F[1]))),-D[2]))),-O[3]),o(f(f(o(f(o(u(nt,Ce),O[1]),f(o(u(Be,re),-F[1]),o(u(De,j),D[1]))),R[2]),o(f(o(u(nt,Ce),R[1]),f(o(u(Ke,ne),-F[1]),o(u(be,se),D[1]))),-O[2])),f(o(f(o(u(Be,re),R[1]),f(o(u(Ke,ne),-O[1]),o(u(Y,X),D[1]))),F[2]),o(f(o(u(De,j),R[1]),f(o(u(be,se),-O[1]),o(u(Y,X),F[1]))),-D[2]))),I[3]))),f(f(o(f(f(o(f(o(u(Ie,we),O[1]),f(o(u(Be,re),-I[1]),o(u(xe,J),D[1]))),R[2]),o(f(o(u(Ie,we),R[1]),f(o(u(Ke,ne),-I[1]),o(u(ge,oe),D[1]))),-O[2])),f(o(f(o(u(Be,re),R[1]),f(o(u(Ke,ne),-O[1]),o(u(Y,X),D[1]))),I[2]),o(f(o(u(xe,J),R[1]),f(o(u(ge,oe),-O[1]),o(u(Y,X),I[1]))),-D[2]))),-F[3]),o(f(f(o(f(o(u(ye,ke),O[1]),f(o(u(De,j),-I[1]),o(u(xe,J),F[1]))),R[2]),o(f(o(u(ye,ke),R[1]),f(o(u(be,se),-I[1]),o(u(ge,oe),F[1]))),-O[2])),f(o(f(o(u(De,j),R[1]),f(o(u(be,se),-O[1]),o(u(Y,X),F[1]))),I[2]),o(f(o(u(xe,J),R[1]),f(o(u(ge,oe),-O[1]),o(u(Y,X),I[1]))),-F[2]))),D[3])),f(o(f(f(o(f(o(u(nt,Ce),O[1]),f(o(u(Be,re),-F[1]),o(u(De,j),D[1]))),z[2]),o(f(o(u(nt,Ce),z[1]),f(o(u(Ue,q),-F[1]),o(u(Le,H),D[1]))),-O[2])),f(o(f(o(u(Be,re),z[1]),f(o(u(Ue,q),-O[1]),o(u(te,$),D[1]))),F[2]),o(f(o(u(De,j),z[1]),f(o(u(Le,H),-O[1]),o(u(te,$),F[1]))),-D[2]))),R[3]),o(f(f(o(f(o(u(nt,Ce),O[1]),f(o(u(Be,re),-F[1]),o(u(De,j),D[1]))),R[2]),o(f(o(u(nt,Ce),R[1]),f(o(u(Ke,ne),-F[1]),o(u(be,se),D[1]))),-O[2])),f(o(f(o(u(Be,re),R[1]),f(o(u(Ke,ne),-O[1]),o(u(Y,X),D[1]))),F[2]),o(f(o(u(De,j),R[1]),f(o(u(be,se),-O[1]),o(u(Y,X),F[1]))),-D[2]))),-z[3])))),f(f(f(o(f(f(o(f(o(u(nt,Ce),z[1]),f(o(u(Ue,q),-F[1]),o(u(Le,H),D[1]))),R[2]),o(f(o(u(nt,Ce),R[1]),f(o(u(Ke,ne),-F[1]),o(u(be,se),D[1]))),-z[2])),f(o(f(o(u(Ue,q),R[1]),f(o(u(Ke,ne),-z[1]),o(u(G,U),D[1]))),F[2]),o(f(o(u(Le,H),R[1]),f(o(u(be,se),-z[1]),o(u(G,U),F[1]))),-D[2]))),O[3]),o(f(f(o(f(o(u(Be,re),z[1]),f(o(u(Ue,q),-O[1]),o(u(te,$),D[1]))),R[2]),o(f(o(u(Be,re),R[1]),f(o(u(Ke,ne),-O[1]),o(u(Y,X),D[1]))),-z[2])),f(o(f(o(u(Ue,q),R[1]),f(o(u(Ke,ne),-z[1]),o(u(G,U),D[1]))),O[2]),o(f(o(u(te,$),R[1]),f(o(u(Y,X),-z[1]),o(u(G,U),O[1]))),-D[2]))),-F[3])),f(o(f(f(o(f(o(u(De,j),z[1]),f(o(u(Le,H),-O[1]),o(u(te,$),F[1]))),R[2]),o(f(o(u(De,j),R[1]),f(o(u(be,se),-O[1]),o(u(Y,X),F[1]))),-z[2])),f(o(f(o(u(Le,H),R[1]),f(o(u(be,se),-z[1]),o(u(G,U),F[1]))),O[2]),o(f(o(u(te,$),R[1]),f(o(u(Y,X),-z[1]),o(u(G,U),O[1]))),-F[2]))),D[3]),o(f(f(o(f(o(u(ye,ke),O[1]),f(o(u(De,j),-I[1]),o(u(xe,J),F[1]))),z[2]),o(f(o(u(ye,ke),z[1]),f(o(u(Le,H),-I[1]),o(u(pe,V),F[1]))),-O[2])),f(o(f(o(u(De,j),z[1]),f(o(u(Le,H),-O[1]),o(u(te,$),F[1]))),I[2]),o(f(o(u(xe,J),z[1]),f(o(u(pe,V),-O[1]),o(u(te,$),I[1]))),-F[2]))),R[3]))),f(f(o(f(f(o(f(o(u(ye,ke),O[1]),f(o(u(De,j),-I[1]),o(u(xe,J),F[1]))),R[2]),o(f(o(u(ye,ke),R[1]),f(o(u(be,se),-I[1]),o(u(ge,oe),F[1]))),-O[2])),f(o(f(o(u(De,j),R[1]),f(o(u(be,se),-O[1]),o(u(Y,X),F[1]))),I[2]),o(f(o(u(xe,J),R[1]),f(o(u(ge,oe),-O[1]),o(u(Y,X),I[1]))),-F[2]))),-z[3]),o(f(f(o(f(o(u(ye,ke),z[1]),f(o(u(Le,H),-I[1]),o(u(pe,V),F[1]))),R[2]),o(f(o(u(ye,ke),R[1]),f(o(u(be,se),-I[1]),o(u(ge,oe),F[1]))),-z[2])),f(o(f(o(u(Le,H),R[1]),f(o(u(be,se),-z[1]),o(u(G,U),F[1]))),I[2]),o(f(o(u(pe,V),R[1]),f(o(u(ge,oe),-z[1]),o(u(G,U),I[1]))),-F[2]))),O[3])),f(o(f(f(o(f(o(u(De,j),z[1]),f(o(u(Le,H),-O[1]),o(u(te,$),F[1]))),R[2]),o(f(o(u(De,j),R[1]),f(o(u(be,se),-O[1]),o(u(Y,X),F[1]))),-z[2])),f(o(f(o(u(Le,H),R[1]),f(o(u(be,se),-z[1]),o(u(G,U),F[1]))),O[2]),o(f(o(u(te,$),R[1]),f(o(u(Y,X),-z[1]),o(u(G,U),O[1]))),-F[2]))),-I[3]),o(f(f(o(f(o(u(xe,J),z[1]),f(o(u(pe,V),-O[1]),o(u(te,$),I[1]))),R[2]),o(f(o(u(xe,J),R[1]),f(o(u(ge,oe),-O[1]),o(u(Y,X),I[1]))),-z[2])),f(o(f(o(u(pe,V),R[1]),f(o(u(ge,oe),-z[1]),o(u(G,U),I[1]))),O[2]),o(f(o(u(te,$),R[1]),f(o(u(Y,X),-z[1]),o(u(G,U),O[1]))),-I[2]))),F[3]))))),St=u(gt,Nt);return St[St.length-1]}}var y=[function s(){return 0},function b(){return 0},function x(){return 0}];function A(f){var u=y[f.length];return u||(u=y[f.length]=g(f.length)),u.apply(void 0,f)}function T(f,u,h,o,C,R,z,O){return function I(F,D,N,U,X,oe){switch(arguments.length){case 0:case 1:return 0;case 2:return o(F,D);case 3:return C(F,D,N);case 4:return R(F,D,N,U);case 5:return z(F,D,N,U,X);case 6:return O(F,D,N,U,X,oe)}for(var se=new Array(arguments.length),ne=0;ne<arguments.length;++ne)se[ne]=arguments[ne];return f(se)}}!function M(){for(;y.length<=6;)y.push(g(y.length));c.exports=T.apply(void 0,[A].concat(y));for(var f=0;f<=6;++f)c.exports[f]=y[f]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(e,c,d){"use strict";var n=e("robust-determinant");function i(y){return(2===y?g:3===y?s:4===y?b:5===y?x:S)(y<6?n[y]:n)}function g(y){return function(T,M){return[y([[+M[0],+T[0][1]],[+M[1],+T[1][1]]]),y([[+T[0][0],+M[0]],[+T[1][0],+M[1]]]),y(T)]}}function s(y){return function(T,M){return[y([[+M[0],+T[0][1],+T[0][2]],[+M[1],+T[1][1],+T[1][2]],[+M[2],+T[2][1],+T[2][2]]]),y([[+T[0][0],+M[0],+T[0][2]],[+T[1][0],+M[1],+T[1][2]],[+T[2][0],+M[2],+T[2][2]]]),y([[+T[0][0],+T[0][1],+M[0]],[+T[1][0],+T[1][1],+M[1]],[+T[2][0],+T[2][1],+M[2]]]),y(T)]}}function b(y){return function(T,M){return[y([[+M[0],+T[0][1],+T[0][2],+T[0][3]],[+M[1],+T[1][1],+T[1][2],+T[1][3]],[+M[2],+T[2][1],+T[2][2],+T[2][3]],[+M[3],+T[3][1],+T[3][2],+T[3][3]]]),y([[+T[0][0],+M[0],+T[0][2],+T[0][3]],[+T[1][0],+M[1],+T[1][2],+T[1][3]],[+T[2][0],+M[2],+T[2][2],+T[2][3]],[+T[3][0],+M[3],+T[3][2],+T[3][3]]]),y([[+T[0][0],+T[0][1],+M[0],+T[0][3]],[+T[1][0],+T[1][1],+M[1],+T[1][3]],[+T[2][0],+T[2][1],+M[2],+T[2][3]],[+T[3][0],+T[3][1],+M[3],+T[3][3]]]),y([[+T[0][0],+T[0][1],+T[0][2],+M[0]],[+T[1][0],+T[1][1],+T[1][2],+M[1]],[+T[2][0],+T[2][1],+T[2][2],+M[2]],[+T[3][0],+T[3][1],+T[3][2],+M[3]]]),y(T)]}}function x(y){return function(T,M){return[y([[+M[0],+T[0][1],+T[0][2],+T[0][3],+T[0][4]],[+M[1],+T[1][1],+T[1][2],+T[1][3],+T[1][4]],[+M[2],+T[2][1],+T[2][2],+T[2][3],+T[2][4]],[+M[3],+T[3][1],+T[3][2],+T[3][3],+T[3][4]],[+M[4],+T[4][1],+T[4][2],+T[4][3],+T[4][4]]]),y([[+T[0][0],+M[0],+T[0][2],+T[0][3],+T[0][4]],[+T[1][0],+M[1],+T[1][2],+T[1][3],+T[1][4]],[+T[2][0],+M[2],+T[2][2],+T[2][3],+T[2][4]],[+T[3][0],+M[3],+T[3][2],+T[3][3],+T[3][4]],[+T[4][0],+M[4],+T[4][2],+T[4][3],+T[4][4]]]),y([[+T[0][0],+T[0][1],+M[0],+T[0][3],+T[0][4]],[+T[1][0],+T[1][1],+M[1],+T[1][3],+T[1][4]],[+T[2][0],+T[2][1],+M[2],+T[2][3],+T[2][4]],[+T[3][0],+T[3][1],+M[3],+T[3][3],+T[3][4]],[+T[4][0],+T[4][1],+M[4],+T[4][3],+T[4][4]]]),y([[+T[0][0],+T[0][1],+T[0][2],+M[0],+T[0][4]],[+T[1][0],+T[1][1],+T[1][2],+M[1],+T[1][4]],[+T[2][0],+T[2][1],+T[2][2],+M[2],+T[2][4]],[+T[3][0],+T[3][1],+T[3][2],+M[3],+T[3][4]],[+T[4][0],+T[4][1],+T[4][2],+M[4],+T[4][4]]]),y([[+T[0][0],+T[0][1],+T[0][2],+T[0][3],+M[0]],[+T[1][0],+T[1][1],+T[1][2],+T[1][3],+M[1]],[+T[2][0],+T[2][1],+T[2][2],+T[2][3],+M[2]],[+T[3][0],+T[3][1],+T[3][2],+T[3][3],+M[3]],[+T[4][0],+T[4][1],+T[4][2],+T[4][3],+M[4]]]),y(T)]}}function S(y){return function(T,M){return[y([[+M[0],+T[0][1],+T[0][2],+T[0][3],+T[0][4],+T[0][5]],[+M[1],+T[1][1],+T[1][2],+T[1][3],+T[1][4],+T[1][5]],[+M[2],+T[2][1],+T[2][2],+T[2][3],+T[2][4],+T[2][5]],[+M[3],+T[3][1],+T[3][2],+T[3][3],+T[3][4],+T[3][5]],[+M[4],+T[4][1],+T[4][2],+T[4][3],+T[4][4],+T[4][5]],[+M[5],+T[5][1],+T[5][2],+T[5][3],+T[5][4],+T[5][5]]]),y([[+T[0][0],+M[0],+T[0][2],+T[0][3],+T[0][4],+T[0][5]],[+T[1][0],+M[1],+T[1][2],+T[1][3],+T[1][4],+T[1][5]],[+T[2][0],+M[2],+T[2][2],+T[2][3],+T[2][4],+T[2][5]],[+T[3][0],+M[3],+T[3][2],+T[3][3],+T[3][4],+T[3][5]],[+T[4][0],+M[4],+T[4][2],+T[4][3],+T[4][4],+T[4][5]],[+T[5][0],+M[5],+T[5][2],+T[5][3],+T[5][4],+T[5][5]]]),y([[+T[0][0],+T[0][1],+M[0],+T[0][3],+T[0][4],+T[0][5]],[+T[1][0],+T[1][1],+M[1],+T[1][3],+T[1][4],+T[1][5]],[+T[2][0],+T[2][1],+M[2],+T[2][3],+T[2][4],+T[2][5]],[+T[3][0],+T[3][1],+M[3],+T[3][3],+T[3][4],+T[3][5]],[+T[4][0],+T[4][1],+M[4],+T[4][3],+T[4][4],+T[4][5]],[+T[5][0],+T[5][1],+M[5],+T[5][3],+T[5][4],+T[5][5]]]),y([[+T[0][0],+T[0][1],+T[0][2],+M[0],+T[0][4],+T[0][5]],[+T[1][0],+T[1][1],+T[1][2],+M[1],+T[1][4],+T[1][5]],[+T[2][0],+T[2][1],+T[2][2],+M[2],+T[2][4],+T[2][5]],[+T[3][0],+T[3][1],+T[3][2],+M[3],+T[3][4],+T[3][5]],[+T[4][0],+T[4][1],+T[4][2],+M[4],+T[4][4],+T[4][5]],[+T[5][0],+T[5][1],+T[5][2],+M[5],+T[5][4],+T[5][5]]]),y([[+T[0][0],+T[0][1],+T[0][2],+T[0][3],+M[0],+T[0][5]],[+T[1][0],+T[1][1],+T[1][2],+T[1][3],+M[1],+T[1][5]],[+T[2][0],+T[2][1],+T[2][2],+T[2][3],+M[2],+T[2][5]],[+T[3][0],+T[3][1],+T[3][2],+T[3][3],+M[3],+T[3][5]],[+T[4][0],+T[4][1],+T[4][2],+T[4][3],+M[4],+T[4][5]],[+T[5][0],+T[5][1],+T[5][2],+T[5][3],+M[5],+T[5][5]]]),y([[+T[0][0],+T[0][1],+T[0][2],+T[0][3],+T[0][4],+M[0]],[+T[1][0],+T[1][1],+T[1][2],+T[1][3],+T[1][4],+M[1]],[+T[2][0],+T[2][1],+T[2][2],+T[2][3],+T[2][4],+M[2]],[+T[3][0],+T[3][1],+T[3][2],+T[3][3],+T[3][4],+M[3]],[+T[4][0],+T[4][1],+T[4][2],+T[4][3],+T[4][4],+M[4]],[+T[5][0],+T[5][1],+T[5][2],+T[5][3],+T[5][4],+M[5]]]),y(T)]}}var p=[function a(){return[[0]]},function r(y,A){return[[A[0]],[y[0][0]]]}];function w(y,A,T,M,f,u,h,o){return function(R,z){switch(R.length){case 0:return y(R,z);case 1:return A(R,z);case 2:return T(R,z);case 3:return M(R,z);case 4:return f(R,z);case 5:return u(R,z)}var O=h[R.length];return O||(O=h[R.length]=o(R.length)),O(R,z)}}!function l(){for(;p.length<6;)p.push(i(p.length));c.exports=w.apply(void 0,p.concat([p,i]));for(var y=0;y<6;++y)c.exports[y]=p[y]}()},{"robust-determinant":280}],284:[function(e,c,d){"use strict";var n=e("two-product"),t=e("robust-sum"),i=e("robust-scale"),a=e("robust-subtract");function x(u,h,o,C){return function(z,O,I){var F=u(u(h(O[1],I[0]),h(-I[1],O[0])),u(h(z[1],O[0]),h(-O[1],z[0]))),D=u(h(z[1],I[0]),h(-I[1],z[0])),N=C(F,D);return N[N.length-1]}}function S(u,h,o,C){return function(z,O,I,F){var D=u(u(o(u(h(I[1],F[0]),h(-F[1],I[0])),O[2]),u(o(u(h(O[1],F[0]),h(-F[1],O[0])),-I[2]),o(u(h(O[1],I[0]),h(-I[1],O[0])),F[2]))),u(o(u(h(O[1],F[0]),h(-F[1],O[0])),z[2]),u(o(u(h(z[1],F[0]),h(-F[1],z[0])),-O[2]),o(u(h(z[1],O[0]),h(-O[1],z[0])),F[2])))),N=u(u(o(u(h(I[1],F[0]),h(-F[1],I[0])),z[2]),u(o(u(h(z[1],F[0]),h(-F[1],z[0])),-I[2]),o(u(h(z[1],I[0]),h(-I[1],z[0])),F[2]))),u(o(u(h(O[1],I[0]),h(-I[1],O[0])),z[2]),u(o(u(h(z[1],I[0]),h(-I[1],z[0])),-O[2]),o(u(h(z[1],O[0]),h(-O[1],z[0])),I[2])))),U=C(D,N);return U[U.length-1]}}function p(u,h,o,C){return function(z,O,I,F,D){var N=u(u(u(o(u(o(u(h(F[1],D[0]),h(-D[1],F[0])),I[2]),u(o(u(h(I[1],D[0]),h(-D[1],I[0])),-F[2]),o(u(h(I[1],F[0]),h(-F[1],I[0])),D[2]))),O[3]),u(o(u(o(u(h(F[1],D[0]),h(-D[1],F[0])),O[2]),u(o(u(h(O[1],D[0]),h(-D[1],O[0])),-F[2]),o(u(h(O[1],F[0]),h(-F[1],O[0])),D[2]))),-I[3]),o(u(o(u(h(I[1],D[0]),h(-D[1],I[0])),O[2]),u(o(u(h(O[1],D[0]),h(-D[1],O[0])),-I[2]),o(u(h(O[1],I[0]),h(-I[1],O[0])),D[2]))),F[3]))),u(o(u(o(u(h(I[1],F[0]),h(-F[1],I[0])),O[2]),u(o(u(h(O[1],F[0]),h(-F[1],O[0])),-I[2]),o(u(h(O[1],I[0]),h(-I[1],O[0])),F[2]))),-D[3]),u(o(u(o(u(h(F[1],D[0]),h(-D[1],F[0])),O[2]),u(o(u(h(O[1],D[0]),h(-D[1],O[0])),-F[2]),o(u(h(O[1],F[0]),h(-F[1],O[0])),D[2]))),z[3]),o(u(o(u(h(F[1],D[0]),h(-D[1],F[0])),z[2]),u(o(u(h(z[1],D[0]),h(-D[1],z[0])),-F[2]),o(u(h(z[1],F[0]),h(-F[1],z[0])),D[2]))),-O[3])))),u(u(o(u(o(u(h(O[1],D[0]),h(-D[1],O[0])),z[2]),u(o(u(h(z[1],D[0]),h(-D[1],z[0])),-O[2]),o(u(h(z[1],O[0]),h(-O[1],z[0])),D[2]))),F[3]),u(o(u(o(u(h(O[1],F[0]),h(-F[1],O[0])),z[2]),u(o(u(h(z[1],F[0]),h(-F[1],z[0])),-O[2]),o(u(h(z[1],O[0]),h(-O[1],z[0])),F[2]))),-D[3]),o(u(o(u(h(I[1],F[0]),h(-F[1],I[0])),O[2]),u(o(u(h(O[1],F[0]),h(-F[1],O[0])),-I[2]),o(u(h(O[1],I[0]),h(-I[1],O[0])),F[2]))),z[3]))),u(o(u(o(u(h(I[1],F[0]),h(-F[1],I[0])),z[2]),u(o(u(h(z[1],F[0]),h(-F[1],z[0])),-I[2]),o(u(h(z[1],I[0]),h(-I[1],z[0])),F[2]))),-O[3]),u(o(u(o(u(h(O[1],F[0]),h(-F[1],O[0])),z[2]),u(o(u(h(z[1],F[0]),h(-F[1],z[0])),-O[2]),o(u(h(z[1],O[0]),h(-O[1],z[0])),F[2]))),I[3]),o(u(o(u(h(O[1],I[0]),h(-I[1],O[0])),z[2]),u(o(u(h(z[1],I[0]),h(-I[1],z[0])),-O[2]),o(u(h(z[1],O[0]),h(-O[1],z[0])),I[2]))),-F[3]))))),U=u(u(u(o(u(o(u(h(F[1],D[0]),h(-D[1],F[0])),I[2]),u(o(u(h(I[1],D[0]),h(-D[1],I[0])),-F[2]),o(u(h(I[1],F[0]),h(-F[1],I[0])),D[2]))),z[3]),o(u(o(u(h(F[1],D[0]),h(-D[1],F[0])),z[2]),u(o(u(h(z[1],D[0]),h(-D[1],z[0])),-F[2]),o(u(h(z[1],F[0]),h(-F[1],z[0])),D[2]))),-I[3])),u(o(u(o(u(h(I[1],D[0]),h(-D[1],I[0])),z[2]),u(o(u(h(z[1],D[0]),h(-D[1],z[0])),-I[2]),o(u(h(z[1],I[0]),h(-I[1],z[0])),D[2]))),F[3]),o(u(o(u(h(I[1],F[0]),h(-F[1],I[0])),z[2]),u(o(u(h(z[1],F[0]),h(-F[1],z[0])),-I[2]),o(u(h(z[1],I[0]),h(-I[1],z[0])),F[2]))),-D[3]))),u(u(o(u(o(u(h(I[1],D[0]),h(-D[1],I[0])),O[2]),u(o(u(h(O[1],D[0]),h(-D[1],O[0])),-I[2]),o(u(h(O[1],I[0]),h(-I[1],O[0])),D[2]))),z[3]),o(u(o(u(h(I[1],D[0]),h(-D[1],I[0])),z[2]),u(o(u(h(z[1],D[0]),h(-D[1],z[0])),-I[2]),o(u(h(z[1],I[0]),h(-I[1],z[0])),D[2]))),-O[3])),u(o(u(o(u(h(O[1],D[0]),h(-D[1],O[0])),z[2]),u(o(u(h(z[1],D[0]),h(-D[1],z[0])),-O[2]),o(u(h(z[1],O[0]),h(-O[1],z[0])),D[2]))),I[3]),o(u(o(u(h(O[1],I[0]),h(-I[1],O[0])),z[2]),u(o(u(h(z[1],I[0]),h(-I[1],z[0])),-O[2]),o(u(h(z[1],O[0]),h(-O[1],z[0])),I[2]))),-D[3])))),X=C(N,U);return X[X.length-1]}}function w(u){return(3===u?x:4===u?S:p)(t,n,i,a)}var l=w(3),y=w(4),A=[function(){return 0},function(){return 0},function(h,o){return o[0]-h[0]},function(h,o,C){var I,R=(h[1]-C[1])*(o[0]-C[0]),z=(h[0]-C[0])*(o[1]-C[1]),O=R-z;if(R>0){if(z<=0)return O;I=R+z}else{if(!(R<0))return O;if(z>=0)return O;I=-(R+z)}var F=33306690738754716e-32*I;return O>=F||O<=-F?O:l(h,o,C)},function(h,o,C,R){var z=h[0]-R[0],O=o[0]-R[0],I=C[0]-R[0],F=h[1]-R[1],D=o[1]-R[1],N=C[1]-R[1],U=h[2]-R[2],X=o[2]-R[2],oe=C[2]-R[2],se=O*N,ne=I*D,W=I*F,G=z*N,$=z*D,V=O*F,H=U*(se-ne)+X*(W-G)+oe*($-V),K=7771561172376103e-31*((Math.abs(se)+Math.abs(ne))*Math.abs(U)+(Math.abs(W)+Math.abs(G))*Math.abs(X)+(Math.abs($)+Math.abs(V))*Math.abs(oe));return H>K||-H>K?H:y(h,o,C,R)}];function T(u){var h=A[u.length];return h||(h=A[u.length]=w(u.length)),h.apply(void 0,u)}function M(u,h,o,C,R,z,O){return function(F,D,N,U,X){switch(arguments.length){case 0:case 1:return 0;case 2:return C(F,D);case 3:return R(F,D,N);case 4:return z(F,D,N,U);case 5:return O(F,D,N,U,X)}for(var oe=new Array(arguments.length),se=0;se<arguments.length;++se)oe[se]=arguments[se];return u(oe)}}!function f(){for(;A.length<=5;)A.push(w(A.length));c.exports=M.apply(void 0,[T].concat(A));for(var u=0;u<=5;++u)c.exports[u]=A[u]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(e,c,d){"use strict";var n=e("robust-sum"),t=e("robust-scale");c.exports=function i(a,r){if(1===a.length)return t(r,a[0]);if(1===r.length)return t(a,r[0]);if(0===a.length||0===r.length)return[0];var g=[0];if(a.length<r.length)for(var s=0;s<a.length;++s)g=n(g,t(r,a[s]));else for(s=0;s<r.length;++s)g=n(g,t(a,r[s]));return g}},{"robust-scale":286,"robust-sum":289}],286:[function(e,c,d){"use strict";var n=e("two-product"),t=e("two-sum");c.exports=function i(a,r){var g=a.length;if(1===g){var s=n(a[0],r);return s[0]?s:[s[1]]}var b=new Array(2*g),x=[.1,.1],S=[.1,.1],p=0;n(a[0],r,x),x[0]&&(b[p++]=x[0]);for(var w=1;w<g;++w){n(a[w],r,S),t(x[1],S[0],x),x[0]&&(b[p++]=x[0]);var y=S[1],A=x[1],T=y+A,f=A-(T-y);x[1]=T,f&&(b[p++]=f)}return x[1]&&(b[p++]=x[1]),0===p&&(b[p++]=0),b.length=p,b}},{"two-product":306,"two-sum":307}],287:[function(e,c,d){"use strict";c.exports=function i(a,r,g,s){var b=n(a,g,s),x=n(r,g,s);if(b>0&&x>0||b<0&&x<0)return!1;var S=n(g,a,r),p=n(s,a,r);return!(S>0&&p>0||S<0&&p<0)&&(0!==b||0!==x||0!==S||0!==p||function t(a,r,g,s){for(var b=0;b<2;++b){var x=a[b],S=r[b],p=Math.min(x,S),w=Math.max(x,S),l=g[b],y=s[b],A=Math.min(l,y);if(Math.max(l,y)<p||w<A)return!1}return!0}(a,r,g,s))};var n=e("robust-orientation")[3]},{"robust-orientation":284}],288:[function(e,c,d){"use strict";c.exports=function t(i,a){var r=0|i.length,g=0|a.length;if(1===r&&1===g)return function n(i,a){var r=i+a,g=r-i,S=i-(r-g)+(a-g);return S?[S,r]:[r]}(i[0],-a[0]);var M,f,b=new Array(r+g),x=0,S=0,p=0,w=Math.abs,l=i[S],y=w(l),A=-a[p],T=w(A);y<T?(f=l,(S+=1)<r&&(y=w(l=i[S]))):(f=A,(p+=1)<g&&(T=w(A=-a[p]))),S<r&&y<T||p>=g?(M=l,(S+=1)<r&&(y=w(l=i[S]))):(M=A,(p+=1)<g&&(T=w(A=-a[p])));for(var z,O,u=M+f,h=u-M,o=f-h,C=o,R=u;S<r&&p<g;)y<T?(M=l,(S+=1)<r&&(y=w(l=i[S]))):(M=A,(p+=1)<g&&(T=w(A=-a[p]))),(o=(f=C)-(h=(u=M+f)-M))&&(b[x++]=o),C=R-((z=R+u)-(O=z-R))+(u-O),R=z;for(;S<r;)(o=(f=C)-(h=(u=(M=l)+f)-M))&&(b[x++]=o),C=R-((z=R+u)-(O=z-R))+(u-O),R=z,(S+=1)<r&&(l=i[S]);for(;p<g;)(o=(f=C)-(h=(u=(M=A)+f)-M))&&(b[x++]=o),C=R-((z=R+u)-(O=z-R))+(u-O),R=z,(p+=1)<g&&(A=-a[p]);return C&&(b[x++]=C),R&&(b[x++]=R),x||(b[x++]=0),b.length=x,b}},{}],289:[function(e,c,d){"use strict";c.exports=function t(i,a){var r=0|i.length,g=0|a.length;if(1===r&&1===g)return function n(i,a){var r=i+a,g=r-i,S=i-(r-g)+(a-g);return S?[S,r]:[r]}(i[0],a[0]);var M,f,b=new Array(r+g),x=0,S=0,p=0,w=Math.abs,l=i[S],y=w(l),A=a[p],T=w(A);y<T?(f=l,(S+=1)<r&&(y=w(l=i[S]))):(f=A,(p+=1)<g&&(T=w(A=a[p]))),S<r&&y<T||p>=g?(M=l,(S+=1)<r&&(y=w(l=i[S]))):(M=A,(p+=1)<g&&(T=w(A=a[p])));for(var z,O,u=M+f,h=u-M,o=f-h,C=o,R=u;S<r&&p<g;)y<T?(M=l,(S+=1)<r&&(y=w(l=i[S]))):(M=A,(p+=1)<g&&(T=w(A=a[p]))),(o=(f=C)-(h=(u=M+f)-M))&&(b[x++]=o),C=R-((z=R+u)-(O=z-R))+(u-O),R=z;for(;S<r;)(o=(f=C)-(h=(u=(M=l)+f)-M))&&(b[x++]=o),C=R-((z=R+u)-(O=z-R))+(u-O),R=z,(S+=1)<r&&(l=i[S]);for(;p<g;)(o=(f=C)-(h=(u=(M=A)+f)-M))&&(b[x++]=o),C=R-((z=R+u)-(O=z-R))+(u-O),R=z,(p+=1)<g&&(A=a[p]);return C&&(b[x++]=C),R&&(b[x++]=R),x||(b[x++]=0),b.length=x,b}},{}],290:[function(e,c,d){"use strict";c.exports=function i(a){return t(n(a))};var n=e("boundary-cells"),t=e("reduce-simplicial-complex")},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(e,c,d){"use strict";c.exports=function p(w,l,y,A){if(y=y||0,void 0===A&&(A=function r(w){for(var l=w.length,y=0,A=0;A<l;++A)y=0|Math.max(y,w[A].length);return y-1}(w)),0===w.length||A<1)return{cells:[],vertexIds:[],vertexWeights:[]};var M=function g(w,l){for(var y=w.length,A=t.mallocUint8(y),T=0;T<y;++T)A[T]=w[T]<l|0;return A}(l,+y),f=function s(w,l){for(var y=w.length,T=t.mallocUint32(2*(l*(l+1)/2*y|0)),M=0,f=0;f<y;++f)for(var u=w[f],h=(l=u.length,0);h<l;++h)for(var o=0;o<h;++o){var C=u[o],R=u[h];T[M++]=0|Math.min(C,R),T[M++]=0|Math.max(C,R)}i(n(T,[M/2|0,2]));var O=2;for(f=2;f<M;f+=2)T[f-2]===T[f]&&T[f-1]===T[f+1]||(T[O++]=T[f],T[O++]=T[f+1]);return n(T,[O/2|0,2])}(w,A),u=function b(w,l,y,A){for(var T=w.data,M=w.shape[0],f=t.mallocDouble(M),u=0,h=0;h<M;++h){var o=T[2*h],C=T[2*h+1];if(y[o]!==y[C]){var R=l[o],z=l[C];T[2*u]=o,T[2*u+1]=C,f[u++]=(z-A)/(z-R)}}return w.shape[0]=u,n(f,[u])}(f,l,M,+y),h=function x(w,l){var y=t.mallocInt32(2*l),A=w.shape[0],T=w.data;y[0]=0;for(var M=0,f=0;f<A;++f){var u=T[2*f];if(u!==M){for(y[2*M+1]=f;++M<u;)y[2*M]=f,y[2*M+1]=f;y[2*M]=f}}for(y[2*M+1]=A;++M<l;)y[2*M]=y[2*M+1]=A;return y}(f,0|l.length),o=a(A)(w,f.data,h,M),C=function S(w){for(var l=0|w.shape[0],y=w.data,A=new Array(l),T=0;T<l;++T)A[T]=[y[2*T],y[2*T+1]];return A}(f),R=[].slice.call(u.data,0,u.shape[0]);return t.free(M),t.free(f.data),t.free(u.data),t.free(h),{cells:o,vertexIds:C,vertexWeights:R}};var n=e("ndarray"),t=e("typedarray-pool"),i=e("ndarray-sort"),a=e("./lib/codegen")},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(e,c,d){"use strict";c.exports=function t(i){return n[i]()};var n=[function(){return function r(g,s,b,x){for(var S=g.length,w=0;w<S;++w);return[]}},function(){function a(g,s,b,x){for(var S=0|Math.min(b,x),p=0|Math.max(b,x),w=g[2*S],l=g[2*S+1];w<l;){var y=w+l>>1,A=s[2*y+1];if(A===p)return y;p<A?l=y:w=y+1}return w}return function r(g,s,b,x){for(var S=g.length,p=[],w=0;w<S;++w){var l=g[w];if(2===l.length){var A=(x[l[0]]<<0)+(x[l[1]]<<1);if(0===A||3===A)continue;switch(A){case 0:case 3:break;case 1:p.push([a(b,s,l[0],l[1])]);break;case 2:p.push([a(b,s,l[1],l[0])])}}}return p}},function(){function a(g,s,b,x){for(var S=0|Math.min(b,x),p=0|Math.max(b,x),w=g[2*S],l=g[2*S+1];w<l;){var y=w+l>>1,A=s[2*y+1];if(A===p)return y;p<A?l=y:w=y+1}return w}return function r(g,s,b,x){for(var S=g.length,p=[],w=0;w<S;++w){var l=g[w],y=l.length;if(3===y){if(0==(A=(x[l[0]]<<0)+(x[l[1]]<<1)+(x[l[2]]<<2))||7===A)continue;switch(A){case 0:case 7:break;case 1:p.push([a(b,s,l[0],l[2]),a(b,s,l[0],l[1])]);break;case 2:p.push([a(b,s,l[1],l[0]),a(b,s,l[1],l[2])]);break;case 3:p.push([a(b,s,l[0],l[2]),a(b,s,l[1],l[2])]);break;case 4:p.push([a(b,s,l[2],l[1]),a(b,s,l[2],l[0])]);break;case 5:p.push([a(b,s,l[2],l[1]),a(b,s,l[0],l[1])]);break;case 6:p.push([a(b,s,l[1],l[0]),a(b,s,l[2],l[0])])}}else if(2===y){var A;if(0==(A=(x[l[0]]<<0)+(x[l[1]]<<1))||3===A)continue;switch(A){case 0:case 3:break;case 1:p.push([a(b,s,l[0],l[1])]);break;case 2:p.push([a(b,s,l[1],l[0])])}}}return p}},function(){function a(g,s,b,x){for(var S=0|Math.min(b,x),p=0|Math.max(b,x),w=g[2*S],l=g[2*S+1];w<l;){var y=w+l>>1,A=s[2*y+1];if(A===p)return y;p<A?l=y:w=y+1}return w}return function r(g,s,b,x){for(var S=g.length,p=[],w=0;w<S;++w){var l=g[w],y=l.length;if(4===y){if(0==(A=(x[l[0]]<<0)+(x[l[1]]<<1)+(x[l[2]]<<2)+(x[l[3]]<<3))||15===A)continue;switch(A){case 0:case 15:break;case 1:p.push([a(b,s,l[0],l[1]),a(b,s,l[0],l[2]),a(b,s,l[0],l[3])]);break;case 2:p.push([a(b,s,l[1],l[2]),a(b,s,l[1],l[0]),a(b,s,l[1],l[3])]);break;case 3:p.push([a(b,s,l[1],l[2]),a(b,s,l[0],l[2]),a(b,s,l[0],l[3])],[a(b,s,l[1],l[3]),a(b,s,l[1],l[2]),a(b,s,l[0],l[3])]);break;case 4:p.push([a(b,s,l[2],l[0]),a(b,s,l[2],l[1]),a(b,s,l[2],l[3])]);break;case 5:p.push([a(b,s,l[0],l[1]),a(b,s,l[2],l[1]),a(b,s,l[0],l[3])],[a(b,s,l[2],l[1]),a(b,s,l[2],l[3]),a(b,s,l[0],l[3])]);break;case 6:p.push([a(b,s,l[2],l[0]),a(b,s,l[1],l[0]),a(b,s,l[1],l[3])],[a(b,s,l[2],l[3]),a(b,s,l[2],l[0]),a(b,s,l[1],l[3])]);break;case 7:p.push([a(b,s,l[0],l[3]),a(b,s,l[1],l[3]),a(b,s,l[2],l[3])]);break;case 8:p.push([a(b,s,l[3],l[1]),a(b,s,l[3],l[0]),a(b,s,l[3],l[2])]);break;case 9:p.push([a(b,s,l[3],l[1]),a(b,s,l[0],l[1]),a(b,s,l[0],l[2])],[a(b,s,l[3],l[2]),a(b,s,l[3],l[1]),a(b,s,l[0],l[2])]);break;case 10:p.push([a(b,s,l[1],l[0]),a(b,s,l[3],l[0]),a(b,s,l[1],l[2])],[a(b,s,l[3],l[0]),a(b,s,l[3],l[2]),a(b,s,l[1],l[2])]);break;case 11:p.push([a(b,s,l[1],l[2]),a(b,s,l[0],l[2]),a(b,s,l[3],l[2])]);break;case 12:p.push([a(b,s,l[3],l[0]),a(b,s,l[2],l[0]),a(b,s,l[2],l[1])],[a(b,s,l[3],l[1]),a(b,s,l[3],l[0]),a(b,s,l[2],l[1])]);break;case 13:p.push([a(b,s,l[0],l[1]),a(b,s,l[2],l[1]),a(b,s,l[3],l[1])]);break;case 14:p.push([a(b,s,l[2],l[0]),a(b,s,l[1],l[0]),a(b,s,l[3],l[0])])}}else if(3===y){if(0==(A=(x[l[0]]<<0)+(x[l[1]]<<1)+(x[l[2]]<<2))||7===A)continue;switch(A){case 0:case 7:break;case 1:p.push([a(b,s,l[0],l[2]),a(b,s,l[0],l[1])]);break;case 2:p.push([a(b,s,l[1],l[0]),a(b,s,l[1],l[2])]);break;case 3:p.push([a(b,s,l[0],l[2]),a(b,s,l[1],l[2])]);break;case 4:p.push([a(b,s,l[2],l[1]),a(b,s,l[2],l[0])]);break;case 5:p.push([a(b,s,l[2],l[1]),a(b,s,l[0],l[1])]);break;case 6:p.push([a(b,s,l[1],l[0]),a(b,s,l[2],l[0])])}}else if(2===y){var A;if(0==(A=(x[l[0]]<<0)+(x[l[1]]<<1))||3===A)continue;switch(A){case 0:case 3:break;case 1:p.push([a(b,s,l[0],l[1])]);break;case 2:p.push([a(b,s,l[1],l[0])])}}}return p}}]},{}],293:[function(e,c,d){"use strict";var n=e("bit-twiddle"),t=e("union-find");function g(u,h){var o=u.length,C=u.length-h.length,R=Math.min;if(C)return C;switch(o){case 0:return 0;case 1:return u[0]-h[0];case 2:return(D=u[0]+u[1]-h[0]-h[1])||R(u[0],u[1])-R(h[0],h[1]);case 3:var z=u[0]+u[1],O=h[0]+h[1];if(D=z+u[2]-(O+h[2]))return D;var D,I=R(u[0],u[1]),F=R(h[0],h[1]);return(D=R(I,u[2])-R(F,h[2]))||R(I+u[2],z)-R(F+h[2],O);default:var N=u.slice(0);N.sort();var U=h.slice(0);U.sort();for(var X=0;X<o;++X)if(C=N[X]-U[X])return C;return 0}}function s(u,h){return g(u[0],h[0])}function b(u,h){if(h){for(var o=u.length,C=new Array(o),R=0;R<o;++R)C[R]=[u[R],h[R]];for(C.sort(s),R=0;R<o;++R)u[R]=C[R][0],h[R]=C[R][1];return u}return u.sort(g),u}function x(u){if(0===u.length)return[];for(var h=1,o=u.length,C=1;C<o;++C){var R=u[C];if(g(R,u[C-1])){if(C===h){h++;continue}u[h++]=R}}return u.length=h,u}function S(u,h){for(var o=0,C=u.length-1,R=-1;o<=C;){var z=o+C>>1,O=g(u[z],h);O<=0?(0===O&&(R=z),o=z+1):O>0&&(C=z-1)}return R}function p(u,h){for(var o=new Array(u.length),C=0,R=o.length;C<R;++C)o[C]=[];for(var z=[],O=(C=0,h.length);C<O;++C)for(var I=h[C],F=I.length,D=1,N=1<<F;D<N;++D){z.length=n.popCount(D);for(var U=0,X=0;X<F;++X)D&1<<X&&(z[U++]=I[X]);var oe=S(u,z);if(!(oe<0))for(;o[oe++].push(C),!(oe>=u.length||0!==g(u[oe],z)););}return o}function y(u,h){if(h<0)return[];for(var o=[],C=(1<<h+1)-1,R=0;R<u.length;++R)for(var z=u[R],O=C;O<1<<z.length;O=n.nextCombination(O)){for(var I=new Array(h+1),F=0,D=0;D<z.length;++D)O&1<<D&&(I[F++]=z[D]);o.push(I)}return b(o)}d.dimension=function i(u){for(var h=0,o=Math.max,C=0,R=u.length;C<R;++C)h=o(h,u[C].length);return h-1},d.countVertices=function a(u){for(var h=-1,o=Math.max,C=0,R=u.length;C<R;++C)for(var z=u[C],O=0,I=z.length;O<I;++O)h=o(h,z[O]);return h+1},d.cloneCells=function r(u){for(var h=new Array(u.length),o=0,C=u.length;o<C;++o)h[o]=u[o].slice(0);return h},d.compareCells=g,d.normalize=b,d.unique=x,d.findCell=S,d.incidence=p,d.dual=function w(u,h){if(!h)return p(x(y(u,0)),u);for(var o=new Array(h),C=0;C<h;++C)o[C]=[];C=0;for(var R=u.length;C<R;++C)for(var z=u[C],O=0,I=z.length;O<I;++O)o[z[O]].push(C);return o},d.explode=function l(u){for(var h=[],o=0,C=u.length;o<C;++o)for(var R=u[o],z=0|R.length,O=1,I=1<<z;O<I;++O){for(var F=[],D=0;D<z;++D)O>>>D&1&&F.push(R[D]);h.push(F)}return b(h)},d.skeleton=y,d.boundary=function A(u){for(var h=[],o=0,C=u.length;o<C;++o)for(var R=u[o],z=0,O=R.length;z<O;++z){for(var I=new Array(R.length-1),F=0,D=0;F<O;++F)F!==z&&(I[D++]=R[F]);h.push(I)}return b(h)},d.connectedComponents=function f(u,h){return h?function T(u,h){for(var o=new t(h),C=0;C<u.length;++C)for(var R=u[C],z=0;z<R.length;++z)for(var O=z+1;O<R.length;++O)o.link(R[z],R[O]);var I=[],F=o.ranks;for(C=0;C<F.length;++C)F[C]=-1;for(C=0;C<u.length;++C){var D=o.find(u[C][0]);F[D]<0?(F[D]=I.length,I.push([u[C].slice(0)])):I[F[D]].push(u[C].slice(0))}return I}(u,h):function M(u){for(var h=x(b(y(u,0))),o=new t(h.length),C=0;C<u.length;++C)for(var R=u[C],z=0;z<R.length;++z)for(var O=S(h,[R[z]]),I=z+1;I<R.length;++I)o.link(O,S(h,[R[I]]));var F=[],D=o.ranks;for(C=0;C<D.length;++C)D[C]=-1;for(C=0;C<u.length;++C){var N=o.find(S(h,[u[C][0]]));D[N]<0?(D[N]=F.length,F.push([u[C].slice(0)])):F[D[N]].push(u[C].slice(0))}return F}(u)}},{"bit-twiddle":32,"union-find":309}],294:[function(e,c,d){arguments[4][32][0].apply(d,arguments)},{dup:32}],295:[function(e,c,d){arguments[4][293][0].apply(d,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(e,c,d){"use strict";function n(t){this.roots=new Array(t),this.ranks=new Array(t);for(var i=0;i<t;++i)this.roots[i]=i,this.ranks[i]=0}c.exports=n,n.prototype.length=function(){return this.roots.length},n.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},n.prototype.find=function(t){for(var i=this.roots;i[t]!==t;){var a=i[t];i[t]=i[a],t=a}return t},n.prototype.link=function(t,i){var a=this.find(t),r=this.find(i);if(a!==r){var g=this.ranks,s=this.roots,b=g[a],x=g[r];b<x?s[a]=r:x<b?s[r]=a:(s[r]=a,++g[a])}}},{}],297:[function(e,c,d){"use strict";c.exports=function a(r,g,s){for(var b=g.length,x=r.length,S=new Array(b),p=new Array(b),w=new Array(b),l=new Array(b),y=0;y<b;++y)S[y]=p[y]=-1,w[y]=1/0,l[y]=!1;for(y=0;y<x;++y){var A=r[y];if(2!==A.length)throw new Error("Input must be a graph");var T=A[1],M=A[0];p[M]=-1!==p[M]?-2:T,S[T]=-1!==S[T]?-2:M}function f(G){if(l[G])return 1/0;var $=S[G],V=p[G];return $<0||V<0?1/0:function i(r,g,s){return Math.abs(n(r,g,s))/Math.sqrt(Math.pow(g[0]-s[0],2)+Math.pow(g[1]-s[1],2))}(g[G],g[$],g[V])}function u(G,$){var V=F[G],H=F[$];F[G]=H,F[$]=V,D[V]=$,D[H]=G}function h(G){return w[F[G]]}function o(G){return 1&G?G-1>>1:(G>>1)-1}function C(G){for(var $=h(G);;){var V=$,H=2*G+1,q=2*(G+1),K=G;if(H<U){var Y=h(H);Y<V&&(K=H,V=Y)}if(q<U&&h(q)<V&&(K=q),K===G)return G;u(G,K),G=K}}function R(G){for(var $=h(G);G>0;){var V=o(G);if(!(V>=0&&$<h(V)))return G;u(G,V),G=V}}function z(){if(U>0){var G=F[0];return u(0,U-1),U-=1,C(0),G}return-1}function O(G,$){var V=F[G];return w[V]===$?G:(w[V]=-1/0,R(G),z(),w[V]=$,R((U+=1)-1))}function I(G){if(!l[G]){l[G]=!0;var $=S[G],V=p[G];S[V]>=0&&(S[V]=$),p[$]>=0&&(p[$]=V),D[$]>=0&&O(D[$],f($)),D[V]>=0&&O(D[V],f(V))}}var F=[],D=new Array(b);for(y=0;y<b;++y)(w[y]=f(y))<1/0?(D[y]=F.length,F.push(y)):D[y]=-1;var U=F.length;for(y=U>>1;y>=0;--y)C(y);for(;;){var X=z();if(X<0||w[X]>s)break;I(X)}var oe=[];for(y=0;y<b;++y)l[y]||(D[y]=oe.length,oe.push(g[y].slice()));function ne(G,$){if(G[$]<0)return $;var V=$,H=$;do{var q=G[H];if(!l[H]||q<0||q===H||(q=G[H=q],!l[H]||q<0||q===H))break;H=q,V=G[V]}while(V!==H);for(var K=$;K!==H;K=G[K])G[K]=H;return H}var W=[];return r.forEach(function(G){var $=ne(S,G[0]),V=ne(p,G[1]);if($>=0&&V>=0&&$!==V){var H=D[$],q=D[V];H!==q&&W.push([H,q])}}),t.unique(t.normalize(W)),{positions:oe,edges:W}};var n=e("robust-orientation"),t=e("simplicial-complex")},{"robust-orientation":284,"simplicial-complex":295}],298:[function(e,c,d){"use strict";c.exports=function i(a,r){var g,s,b,x;if(r[0][0]<r[1][0])g=r[0],s=r[1];else{if(!(r[0][0]>r[1][0]))return t(r,a);g=r[1],s=r[0]}if(a[0][0]<a[1][0])b=a[0],x=a[1];else{if(!(a[0][0]>a[1][0]))return-t(a,r);b=a[1],x=a[0]}var S=n(g,s,x),p=n(g,s,b);if(S<0){if(p<=0)return S}else if(S>0){if(p>=0)return S}else if(p)return p;if(S=n(x,b,s),p=n(x,b,g),S<0){if(p<=0)return S}else if(S>0){if(p>=0)return S}else if(p)return p;return s[0]-x[0]};var n=e("robust-orientation");function t(a,r){var g,s,w,l;if(r[0][0]<r[1][0])g=r[0],s=r[1];else{if(!(r[0][0]>r[1][0])){var b=Math.min(a[0][1],a[1][1]),x=Math.max(a[0][1],a[1][1]),S=Math.min(r[0][1],r[1][1]),p=Math.max(r[0][1],r[1][1]);return x<S?x-S:b>p?b-p:x-p}g=r[1],s=r[0]}a[0][1]<a[1][1]?(w=a[0],l=a[1]):(w=a[1],l=a[0]);var y=n(s,g,w);return y||(y=n(s,g,l))?y:l-s}},{"robust-orientation":284}],299:[function(e,c,d){"use strict";c.exports=function p(w){for(var l=w.length,y=2*l,A=new Array(y),T=0;T<l;++T){var M=w[T],f=M[0][0]<M[1][0];A[2*T]=new S(M[0][0],M,f,T),A[2*T+1]=new S(M[1][0],M,!f,T)}A.sort(function(F,D){var N=F.x-D.x;return N||(N=F.create-D.create)?N:Math.min(F.segment[0][1],F.segment[1][1])-Math.min(D.segment[0][1],D.segment[1][1])});var u=t(a),h=[],o=[],C=[];for(T=0;T<y;){for(var z=A[T].x,O=[];T<y;){var I=A[T];if(I.x!==z)break;T+=1,I.segment[0][0]===I.x&&I.segment[1][0]===I.x?I.create&&(I.segment[0][1]<I.segment[1][1]?(O.push(new x(I.segment[0][1],I.index,!0,!0)),O.push(new x(I.segment[1][1],I.index,!1,!1))):(O.push(new x(I.segment[1][1],I.index,!0,!1)),O.push(new x(I.segment[0][1],I.index,!1,!0)))):u=I.create?u.insert(I.segment,I.index):u.remove(I.segment)}h.push(u.root),o.push(z),C.push(O)}return new r(h,o,C)};var n=e("binary-search-bounds"),t=e("functional-red-black-tree"),i=e("robust-orientation"),a=e("./lib/order-segments");function r(w,l,y){this.slabs=w,this.coordinates=l,this.horizontal=y}function s(w,l){return w.y-l}function b(w,l){for(var y=null;w;){var T,M,A=w.key;A[0][0]<A[1][0]?(T=A[0],M=A[1]):(T=A[1],M=A[0]);var f=i(T,M,l);if(f<0)w=w.left;else if(f>0)if(l[0]!==A[1][0])y=w,w=w.right;else{if(u=b(w.right,l))return u;w=w.left}else{if(l[0]!==A[1][0])return w;var u;if(u=b(w.right,l))return u;w=w.left}}return y}function x(w,l,y,A){this.y=w,this.index=l,this.start=y,this.closed=A}function S(w,l,y,A){this.x=w,this.segment=l,this.create=y,this.index=A}r.prototype.castUp=function(w){var l=n.le(this.coordinates,w[0]);if(l<0)return-1;var A=b(this.slabs[l],w),T=-1;if(A&&(T=A.value),this.coordinates[l]===w[0]){var M=null;if(A&&(M=A.key),l>0){var f=b(this.slabs[l-1],w);f&&(M?a(f.key,M)>0&&(M=f.key,T=f.value):(T=f.value,M=f.key))}var u=this.horizontal[l];if(u.length>0){var h=n.ge(u,w[1],s);if(h<u.length){var o=u[h];if(w[1]===o.y){if(o.closed)return o.index;for(;h<u.length-1&&u[h+1].y===w[1];)if((o=u[h+=1]).closed)return o.index;if(o.y===w[1]&&!o.start){if((h+=1)>=u.length)return T;o=u[h]}}if(o.start)if(M){var C=i(M[0],M[1],[w[0],o.y]);M[0][0]>M[1][0]&&(C=-C),C>0&&(T=o.index)}else T=o.index;else o.y!==w[1]&&(T=o.index)}}}return T}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(e,c,d){"use strict";var n=e("robust-dot-product"),t=e("robust-sum");function i(b,x){var S=t(n(b,x),[x[x.length-1]]);return S[S.length-1]}function a(b,x,S,p){var l=-x/(p-x);l<0?l=0:l>1&&(l=1);for(var y=1-l,A=b.length,T=new Array(A),M=0;M<A;++M)T[M]=l*b[M]+y*S[M];return T}c.exports=function r(b,x){for(var S=[],p=[],w=i(b[b.length-1],x),l=b[b.length-1],y=b[0],A=0;A<b.length;++A,l=y){var T=i(y=b[A],x);if(w<0&&T>0||w>0&&T<0){var M=a(l,T,y,w);S.push(M),p.push(M.slice())}T<0?p.push(y.slice()):T>0?S.push(y.slice()):(S.push(y.slice()),p.push(y.slice())),w=T}return{positive:S,negative:p}},c.exports.positive=function g(b,x){for(var S=[],p=i(b[b.length-1],x),w=b[b.length-1],l=b[0],y=0;y<b.length;++y,w=l){var A=i(l=b[y],x);(p<0&&A>0||p>0&&A<0)&&S.push(a(w,A,l,p)),A>=0&&S.push(l.slice()),p=A}return S},c.exports.negative=function s(b,x){for(var S=[],p=i(b[b.length-1],x),w=b[b.length-1],l=b[0],y=0;y<b.length;++y,w=l){var A=i(l=b[y],x);(p<0&&A>0||p>0&&A<0)&&S.push(a(w,A,l,p)),A<=0&&S.push(l.slice()),p=A}return S}},{"robust-dot-product":281,"robust-sum":289}],301:[function(e,c,d){!function(){"use strict";var n={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function t(s){return a(g(s),arguments)}function i(s,b){return t.apply(null,[s].concat(b||[]))}function a(s,b){var p,l,y,A,T,M,f,u,h,x=1,S=s.length,w="";for(l=0;l<S;l++)if("string"==typeof s[l])w+=s[l];else if("object"==typeof s[l]){if((A=s[l]).keys)for(p=b[x],y=0;y<A.keys.length;y++){if(null==p)throw new Error(t('[sprintf] Cannot access property "%s" of undefined value "%s"',A.keys[y],A.keys[y-1]));p=p[A.keys[y]]}else p=A.param_no?b[A.param_no]:b[x++];if(n.not_type.test(A.type)&&n.not_primitive.test(A.type)&&p instanceof Function&&(p=p()),n.numeric_arg.test(A.type)&&"number"!=typeof p&&isNaN(p))throw new TypeError(t("[sprintf] expecting number but found %T",p));switch(n.number.test(A.type)&&(u=p>=0),A.type){case"b":p=parseInt(p,10).toString(2);break;case"c":p=String.fromCharCode(parseInt(p,10));break;case"d":case"i":p=parseInt(p,10);break;case"j":p=JSON.stringify(p,null,A.width?parseInt(A.width):0);break;case"e":p=A.precision?parseFloat(p).toExponential(A.precision):parseFloat(p).toExponential();break;case"f":p=A.precision?parseFloat(p).toFixed(A.precision):parseFloat(p);break;case"g":p=A.precision?String(Number(p.toPrecision(A.precision))):parseFloat(p);break;case"o":p=(parseInt(p,10)>>>0).toString(8);break;case"s":p=String(p),p=A.precision?p.substring(0,A.precision):p;break;case"t":p=String(!!p),p=A.precision?p.substring(0,A.precision):p;break;case"T":p=Object.prototype.toString.call(p).slice(8,-1).toLowerCase(),p=A.precision?p.substring(0,A.precision):p;break;case"u":p=parseInt(p,10)>>>0;break;case"v":p=p.valueOf(),p=A.precision?p.substring(0,A.precision):p;break;case"x":p=(parseInt(p,10)>>>0).toString(16);break;case"X":p=(parseInt(p,10)>>>0).toString(16).toUpperCase()}n.json.test(A.type)?w+=p:(!n.number.test(A.type)||u&&!A.sign?h="":(h=u?"+":"-",p=p.toString().replace(n.sign,"")),M=A.pad_char?"0"===A.pad_char?"0":A.pad_char.charAt(1):" ",f=A.width-(h+p).length,T=A.width&&f>0?M.repeat(f):"",w+=A.align?h+p+T:"0"===M?h+T+p:T+h+p)}return w}var r=Object.create(null);function g(s){if(r[s])return r[s];for(var x,b=s,S=[],p=0;b;){if(null!==(x=n.text.exec(b)))S.push(x[0]);else if(null!==(x=n.modulo.exec(b)))S.push("%");else{if(null===(x=n.placeholder.exec(b)))throw new SyntaxError("[sprintf] unexpected placeholder");if(x[2]){p|=1;var w=[],l=x[2],y=[];if(null===(y=n.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(w.push(y[1]);""!==(l=l.substring(y[0].length));)if(null!==(y=n.key_access.exec(l)))w.push(y[1]);else{if(null===(y=n.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");w.push(y[1])}x[2]=w}else p|=2;if(3===p)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");S.push({placeholder:x[0],param_no:x[1],keys:x[2],sign:x[3],pad_char:x[4],align:x[5],width:x[6],precision:x[7],type:x[8]})}b=b.substring(x[0].length)}return r[s]=S}void 0!==d&&(d.sprintf=t,d.vsprintf=i),"undefined"!=typeof window&&(window.sprintf=t,window.vsprintf=i)}()},{}],302:[function(e,c,d){"use strict";c.exports=function s(b,w){if(b.dimension<=0)return{positions:[],cells:[]};if(1===b.dimension)return function r(b,x){for(var S=t(b,x),p=S.length,w=new Array(p),l=new Array(p),y=0;y<p;++y)w[y]=[S[y]],l[y]=[y];return{positions:w,cells:l}}(b,w);var S=b.order.join()+"-"+b.dtype,p=g[S];return w=+w||0,p||(p=g[S]=function a(b,x){var p=i[b.length+"d"];if(p)return p(n,b,x)}(b.order,b.dtype)),p(b,w)};var n=e("ndarray-extract-contour"),t=e("zero-crossings"),i={"2d":function(b,x,S){var p=b({order:x,scalarArguments:3,getters:"generic"===S?[0]:void 0,phase:function(l,y,A,T){return l>T|0},vertex:function(l,y,A,T,M,f,u,h,o,C,R,z,O){var I=(u<<0)+(h<<1)+(o<<2)+(C<<3)|0;if(0!==I&&15!==I)switch(I){case 0:case 15:R.push([l-.5,y-.5]);break;case 1:R.push([l-.25-.25*(T+A-2*O)/(A-T),y-.25-.25*(M+A-2*O)/(A-M)]);break;case 2:R.push([l-.75-.25*(-T-A+2*O)/(T-A),y-.25-.25*(f+T-2*O)/(T-f)]);break;case 3:R.push([l-.5,y-.5-.5*(M+A+f+T-4*O)/(A-M+T-f)]);break;case 4:R.push([l-.25-.25*(f+M-2*O)/(M-f),y-.75-.25*(-M-A+2*O)/(M-A)]);break;case 5:R.push([l-.5-.5*(T+A+f+M-4*O)/(A-T+M-f),y-.5]);break;case 6:R.push([l-.5-.25*(-T-A+f+M)/(T-A+M-f),y-.5-.25*(-M-A+f+T)/(M-A+T-f)]);break;case 7:R.push([l-.75-.25*(f+M-2*O)/(M-f),y-.75-.25*(f+T-2*O)/(T-f)]);break;case 8:R.push([l-.75-.25*(-f-M+2*O)/(f-M),y-.75-.25*(-f-T+2*O)/(f-T)]);break;case 9:R.push([l-.5-.25*(T+A+-f-M)/(A-T+f-M),y-.5-.25*(M+A+-f-T)/(A-M+f-T)]);break;case 10:R.push([l-.5-.5*(-T-A-f-M+4*O)/(T-A+f-M),y-.5]);break;case 11:R.push([l-.25-.25*(-f-M+2*O)/(f-M),y-.75-.25*(M+A-2*O)/(A-M)]);break;case 12:R.push([l-.5,y-.5-.5*(-M-A-f-T+4*O)/(M-A+f-T)]);break;case 13:R.push([l-.75-.25*(T+A-2*O)/(A-T),y-.25-.25*(-f-T+2*O)/(f-T)]);break;case 14:R.push([l-.25-.25*(-T-A+2*O)/(T-A),y-.25-.25*(-M-A+2*O)/(M-A)])}},cell:function(l,y,A,T,M,f,u,h,o){h.push(M?[l,y]:[y,l])}});return function(w,l){var y=[],A=[];return p(w,y,A,l),{positions:y,cells:A}}}};var g={}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(e,c,d){(function(n){(function(){"use strict";c.exports=function g(s,b,S){S=S||{};var p=a[s];p||(p=a[s]={" ":{data:new Float32Array(0),shape:.2}});var w=p[b];if(!w)if(b.length<=1||!/\d/.test(b))w=p[b]=function r(s){for(var b=s.cells,x=s.positions,S=new Float32Array(6*b.length),p=0,w=0,l=0;l<b.length;++l)for(var y=b[l],A=0;A<3;++A){var T=x[y[A]];S[p++]=T[0],S[p++]=T[1]+1.4,w=Math.max(T[0],w)}return{data:S,shape:w}}(t(b,{triangles:!0,font:s,textAlign:S.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var l=b.split(/(\d|\s)/),y=new Array(l.length),A=0,T=0,M=0;M<l.length;++M)y[M]=g(s,l[M]),A+=y[M].data.length,T+=y[M].shape,M>0&&(T+=.02);var f=new Float32Array(A),u=0,h=-.5*T;for(M=0;M<y.length;++M){for(var o=y[M].data,C=0;C<o.length;C+=2)f[u++]=o[C]+h,f[u++]=o[C+1];h+=y[M].shape+.02}w=p[b]={data:f,shape:T}}return w};var t=e("vectorize-text"),i=window||n.global||{},a=i.__TEXT_CACHE||{};i.__TEXT_CACHE={}}).call(this)}).call(this,e("_process"))},{_process:5,"vectorize-text":311}],304:[function(e,c,d){"use strict";var n=e("parse-unit");c.exports=r;function i(g,s){var b=n(getComputedStyle(g).getPropertyValue(s));return b[0]*r(b[1],g)}function r(g,s){switch(s=s||document.body,g=(g||"px").trim().toLowerCase(),(s===window||s===document)&&(s=document.body),g){case"%":return s.clientHeight/100;case"ch":case"ex":return function a(g,s){var b=document.createElement("div");b.style["font-size"]="128"+g,s.appendChild(b);var x=i(b,"font-size")/128;return s.removeChild(b),x}(g,s);case"em":return i(s,"font-size");case"rem":return i(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}},{"parse-unit":265}],305:[function(e,c,d){"use strict";c.exports=function l(y){var A=(y=y||{}).center||[0,0,0],T=y.up||[0,1,0],M=y.right||x(T),f=y.radius||1,u=y.theta||0,h=y.phi||0;if(A=[].slice.call(A,0,3),T=[].slice.call(T,0,3),r(T,T),M=[].slice.call(M,0,3),r(M,M),"eye"in y){var o=y.eye,C=[o[0]-A[0],o[1]-A[1],o[2]-A[2]];a(M,C,T),s(M[0],M[1],M[2])<1e-6?M=x(T):r(M,M),f=s(C[0],C[1],C[2]);var R=g(T,C)/f,z=g(M,C)/f;h=Math.acos(R),u=Math.acos(z)}return f=Math.log(f),new S(y.zoomMin,y.zoomMax,A,T,M,f,u,h)};var n=e("filtered-vector"),t=e("gl-mat4/invert"),i=e("gl-mat4/rotate"),a=e("gl-vec3/cross"),r=e("gl-vec3/normalize"),g=e("gl-vec3/dot");function s(y,A,T){return Math.sqrt(Math.pow(y,2)+Math.pow(A,2)+Math.pow(T,2))}function b(y){return Math.min(1,Math.max(-1,y))}function x(y){var A=Math.abs(y[0]),T=Math.abs(y[1]),M=Math.abs(y[2]),f=[0,0,0];A>Math.max(T,M)?f[2]=1:T>Math.max(A,M)?f[0]=1:f[1]=1;for(var u=0,h=0,o=0;o<3;++o)u+=y[o]*y[o],h+=f[o]*y[o];for(o=0;o<3;++o)f[o]-=h/u*y[o];return r(f,f),f}function S(y,A,T,M,f,u,h,o){this.center=n(T),this.up=n(M),this.right=n(f),this.radius=n([u]),this.angle=n([h,o]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(y,A),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var C=0;C<16;++C)this.computedMatrix[C]=.5;this.recalcMatrix(0)}var p=S.prototype;p.setDistanceLimits=function(y,A){y=y>0?Math.log(y):-1/0,A=A>0?Math.log(A):1/0,A=Math.max(A,y),this.radius.bounds[0][0]=y,this.radius.bounds[1][0]=A},p.getDistanceLimits=function(y){var A=this.radius.bounds[0];return y?(y[0]=Math.exp(A[0][0]),y[1]=Math.exp(A[1][0]),y):[Math.exp(A[0][0]),Math.exp(A[1][0])]},p.recalcMatrix=function(y){this.center.curve(y),this.up.curve(y),this.right.curve(y),this.radius.curve(y),this.angle.curve(y);for(var A=this.computedUp,T=this.computedRight,M=0,f=0,u=0;u<3;++u)f+=A[u]*T[u],M+=A[u]*A[u];var h=Math.sqrt(M),o=0;for(u=0;u<3;++u)T[u]-=A[u]*f/M,o+=T[u]*T[u],A[u]/=h;var C=Math.sqrt(o);for(u=0;u<3;++u)T[u]/=C;var R=this.computedToward;a(R,A,T),r(R,R);var z=Math.exp(this.computedRadius[0]),O=this.computedAngle[0],I=this.computedAngle[1],F=Math.cos(O),D=Math.sin(O),N=Math.cos(I),U=Math.sin(I),X=this.computedCenter,oe=F*N,se=D*N,ne=U,W=-F*U,G=-D*U,$=N,V=this.computedEye,H=this.computedMatrix;for(u=0;u<3;++u){var q=oe*T[u]+se*R[u]+ne*A[u];H[4*u+1]=W*T[u]+G*R[u]+$*A[u],H[4*u+2]=q,H[4*u+3]=0}var K=H[1],Y=H[5],te=H[9],J=H[2],j=H[6],re=H[10],le=Y*re-te*j,ge=te*J-K*re,pe=K*j-Y*J,xe=s(le,ge,pe);for(ge/=xe,pe/=xe,H[0]=le/=xe,H[4]=ge,H[8]=pe,u=0;u<3;++u)V[u]=X[u]+H[2+4*u]*z;for(u=0;u<3;++u){o=0;for(var ke=0;ke<3;++ke)o+=H[u+4*ke]*V[ke];H[12+u]=-o}H[15]=1},p.getMatrix=function(y,A){this.recalcMatrix(y);var T=this.computedMatrix;if(A){for(var M=0;M<16;++M)A[M]=T[M];return A}return T};var w=[0,0,0];p.rotate=function(y,A,T,M){if(this.angle.move(y,A,T),M){this.recalcMatrix(y);var f=this.computedMatrix;w[0]=f[2],w[1]=f[6],w[2]=f[10];for(var u=this.computedUp,h=this.computedRight,o=this.computedToward,C=0;C<3;++C)f[4*C]=u[C],f[4*C+1]=h[C],f[4*C+2]=o[C];for(i(f,f,M,w),C=0;C<3;++C)u[C]=f[4*C],h[C]=f[4*C+1];this.up.set(y,u[0],u[1],u[2]),this.right.set(y,h[0],h[1],h[2])}},p.pan=function(y,A,T,M){A=A||0,T=T||0,M=M||0,this.recalcMatrix(y);var f=this.computedMatrix,h=(Math.exp(this.computedRadius[0]),f[1]),o=f[5],C=f[9],R=s(h,o,C),z=f[0],O=f[4],I=f[8],F=z*(h/=R)+O*(o/=R)+I*(C/=R),D=s(z-=h*F,O-=o*F,I-=C*F);this.center.move(y,(z/=D)*A+h*T,(O/=D)*A+o*T,(I/=D)*A+C*T);var oe=Math.exp(this.computedRadius[0]);oe=Math.max(1e-4,oe+M),this.radius.set(y,Math.log(oe))},p.translate=function(y,A,T,M){this.center.move(y,A||0,T||0,M||0)},p.setMatrix=function(y,A,T,M){var f=1;"number"==typeof T&&(f=0|T),(f<0||f>3)&&(f=1);var u=(f+2)%3;A||(this.recalcMatrix(y),A=this.computedMatrix);var o=A[f],C=A[f+4],R=A[f+8];if(M){var O=Math.abs(o),I=Math.abs(C),F=Math.abs(R),D=Math.max(O,I,F);O===D?(o=o<0?-1:1,C=R=0):F===D?(R=R<0?-1:1,o=C=0):(C=C<0?-1:1,o=R=0)}else{var z=s(o,C,R);o/=z,C/=z,R/=z}var V,H,N=A[u],U=A[u+4],X=A[u+8],oe=N*o+U*C+X*R,se=s(N-=o*oe,U-=C*oe,X-=R*oe),ne=C*(X/=se)-R*(U/=se),W=R*(N/=se)-o*X,G=o*U-C*N,$=s(ne,W,G);if(ne/=$,W/=$,G/=$,this.center.jump(y,De,ye,Ce),this.radius.idle(y),this.up.jump(y,o,C,R),this.right.jump(y,N,U,X),2===f){var q=A[1],K=A[5],Y=A[9];V=ge<0?-Math.PI/2:Math.PI/2,H=Math.atan2(q*ne+K*W+Y*G,q*N+K*U+Y*X)}else{var j=A[2],re=A[6],le=A[10],ge=j*o+re*C+le*R,pe=j*N+re*U+le*X,xe=j*ne+re*W+le*G;V=Math.asin(b(ge)),H=Math.atan2(xe,pe)}this.angle.jump(y,H,V),this.recalcMatrix(y);var ke=A[2],we=A[6],de=A[10],be=this.computedMatrix;t(be,A);var Le=be[15],De=be[12]/Le,ye=be[13]/Le,Ce=be[14]/Le,Fe=Math.exp(this.computedRadius[0]);this.center.jump(y,De-ke*Fe,ye-we*Fe,Ce-de*Fe)},p.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},p.idle=function(y){this.center.idle(y),this.up.idle(y),this.right.idle(y),this.radius.idle(y),this.angle.idle(y)},p.flush=function(y){this.center.flush(y),this.up.flush(y),this.right.flush(y),this.radius.flush(y),this.angle.flush(y)},p.setDistance=function(y,A){A>0&&this.radius.set(y,Math.log(A))},p.lookAt=function(y,A,T,M){this.recalcMatrix(y),A=A||this.computedEye,T=T||this.computedCenter;var f=(M=M||this.computedUp)[0],u=M[1],h=M[2],o=s(f,u,h);if(!(o<1e-6)){f/=o,u/=o,h/=o;var C=A[0]-T[0],R=A[1]-T[1],z=A[2]-T[2],O=s(C,R,z);if(!(O<1e-6)){C/=O,R/=O,z/=O;var I=this.computedRight,F=I[0],D=I[1],N=I[2],U=f*F+u*D+h*N,X=s(F-=U*f,D-=U*u,N-=U*h);if(!(X<.01&&(F=u*z-h*R,D=h*C-f*z,N=f*R-u*C,X=s(F,D,N),X<1e-6))){F/=X,D/=X,N/=X,this.up.set(y,f,u,h),this.right.set(y,F,D,N),this.center.set(y,T[0],T[1],T[2]),this.radius.set(y,Math.log(O));var oe=u*N-h*D,se=h*F-f*N,ne=f*D-u*F,W=s(oe,se,ne),$=F*C+D*R+N*z,V=(oe/=W)*C+(se/=W)*R+(ne/=W)*z,H=Math.asin(b(f*C+u*R+h*z)),q=Math.atan2(V,$),K=this.angle._state,Y=K[K.length-1],te=K[K.length-2];Y%=2*Math.PI;var J=Math.abs(Y+2*Math.PI-q),j=Math.abs(Y-q),re=Math.abs(Y-2*Math.PI-q);J<j&&(Y+=2*Math.PI),re<j&&(Y-=2*Math.PI),this.angle.jump(this.angle.lastT(),Y,te),this.angle.set(y,q,H)}}}}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(e,c,d){"use strict";c.exports=function t(i,a,r){var g=i*a,s=n*i,x=s-(s-i),S=i-x,p=n*a,l=p-(p-a),y=a-l,f=S*y-(g-x*l-S*l-x*y);return r?(r[0]=f,r[1]=g,r):[f,g]};var n=+(Math.pow(2,27)+1)},{}],307:[function(e,c,d){"use strict";c.exports=function n(t,i,a){var r=t+i,g=r-t,b=i-g,x=t-(r-g);return a?(a[0]=x+b,a[1]=r,a):[x+b,r]}},{}],308:[function(e,c,d){(function(n){(function(){"use strict";var t=e("bit-twiddle"),i=e("dup"),a=e("buffer").Buffer;n.__TYPEDARRAY_POOL||(n.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),BIGUINT64:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),BIGINT64:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var r="undefined"!=typeof Uint8ClampedArray,g="undefined"!=typeof BigUint64Array,s="undefined"!=typeof BigInt64Array,b=n.__TYPEDARRAY_POOL;b.UINT8C||(b.UINT8C=i([32,0])),b.BIGUINT64||(b.BIGUINT64=i([32,0])),b.BIGINT64||(b.BIGINT64=i([32,0])),b.BUFFER||(b.BUFFER=i([32,0]));var x=b.DATA,S=b.BUFFER;function p(F){if(F){var N=t.log2(F.length||F.byteLength);x[N].push(F)}}function l(D){D=t.nextPow2(D);var N=t.log2(D),U=x[N];return U.length>0?U.pop():new ArrayBuffer(D)}function y(F){return new Uint8Array(l(F),0,F)}function A(F){return new Uint16Array(l(2*F),0,F)}function T(F){return new Uint32Array(l(4*F),0,F)}function M(F){return new Int8Array(l(F),0,F)}function f(F){return new Int16Array(l(2*F),0,F)}function u(F){return new Int32Array(l(4*F),0,F)}function h(F){return new Float32Array(l(4*F),0,F)}function o(F){return new Float64Array(l(8*F),0,F)}function C(F){return r?new Uint8ClampedArray(l(F),0,F):y(F)}function R(F){return g?new BigUint64Array(l(8*F),0,F):null}function z(F){return s?new BigInt64Array(l(8*F),0,F):null}function O(F){return new DataView(l(F),0,F)}function I(F){F=t.nextPow2(F);var D=t.log2(F),N=S[D];return N.length>0?N.pop():new a(F)}d.free=function(D){if(a.isBuffer(D))S[t.log2(D.length)].push(D);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(D)&&(D=D.buffer),!D)return;var U=0|t.log2(D.length||D.byteLength);x[U].push(D)}},d.freeUint8=d.freeUint16=d.freeUint32=d.freeBigUint64=d.freeInt8=d.freeInt16=d.freeInt32=d.freeBigInt64=d.freeFloat32=d.freeFloat=d.freeFloat64=d.freeDouble=d.freeUint8Clamped=d.freeDataView=function w(F){p(F.buffer)},d.freeArrayBuffer=p,d.freeBuffer=function(D){S[t.log2(D.length)].push(D)},d.malloc=function(D,N){if(void 0===N||"arraybuffer"===N)return l(D);switch(N){case"uint8":return y(D);case"uint16":return A(D);case"uint32":return T(D);case"int8":return M(D);case"int16":return f(D);case"int32":return u(D);case"float":case"float32":return h(D);case"double":case"float64":return o(D);case"uint8_clamped":return C(D);case"bigint64":return z(D);case"biguint64":return R(D);case"buffer":return I(D);case"data":case"dataview":return O(D);default:return null}return null},d.mallocArrayBuffer=l,d.mallocUint8=y,d.mallocUint16=A,d.mallocUint32=T,d.mallocInt8=M,d.mallocInt16=f,d.mallocInt32=u,d.mallocFloat32=d.mallocFloat=h,d.mallocFloat64=d.mallocDouble=o,d.mallocUint8Clamped=C,d.mallocBigUint64=R,d.mallocBigInt64=z,d.mallocDataView=O,d.mallocBuffer=I,d.clearCache=function(){for(var D=0;D<32;++D)b.UINT8[D].length=0,b.UINT16[D].length=0,b.UINT32[D].length=0,b.INT8[D].length=0,b.INT16[D].length=0,b.INT32[D].length=0,b.FLOAT[D].length=0,b.DOUBLE[D].length=0,b.BIGUINT64[D].length=0,b.BIGINT64[D].length=0,b.UINT8C[D].length=0,x[D].length=0,S[D].length=0}}).call(this)}).call(this,void 0!==_?_:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(e,c,d){"use strict";function n(i){this.roots=new Array(i),this.ranks=new Array(i);for(var a=0;a<i;++a)this.roots[a]=a,this.ranks[a]=0}c.exports=n;var t=n.prototype;Object.defineProperty(t,"length",{get:function(){return this.roots.length}}),t.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},t.find=function(i){for(var a=i,r=this.roots;r[i]!==i;)i=r[i];for(;r[a]!==i;){var g=r[a];r[a]=i,a=g}return i},t.link=function(i,a){var r=this.find(i),g=this.find(a);if(r!==g){var s=this.ranks,b=this.roots,x=s[r],S=s[g];x<S?b[r]=g:S<x?b[g]=r:(b[g]=r,++s[r])}}},{}],310:[function(e,c,d){"use strict";c.exports=function i(a,r,g){return 0===a.length?a:r?(g||a.sort(r),function n(a,r){for(var g=1,s=a.length,b=a[0],x=a[0],S=1;S<s;++S)if(x=b,r(b=a[S],x)){if(S===g){g++;continue}a[g++]=b}return a.length=g,a}(a,r)):(g||a.sort(),function t(a){for(var r=1,g=a.length,s=a[0],b=a[0],x=1;x<g;++x,b=s)if(b=s,(s=a[x])!==b){if(x===r){r++;continue}a[r++]=s}return a.length=r,a}(a))}},{}],311:[function(e,c,d){"use strict";c.exports=function a(r,g){return("object"!=typeof g||null===g)&&(g={}),n(r,g.canvas||t,g.context||i,g)};var n=e("./lib/vtext"),t=null,i=null;"undefined"!=typeof document&&((t=document.createElement("canvas")).width=8192,t.height=1024,i=t.getContext("2d"))},{"./lib/vtext":312}],312:[function(e,c,d){c.exports=function R(z,O,I,F){var D=64,N=1.25,U={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return F&&(F.size&&F.size>0&&(D=F.size),F.lineSpacing&&F.lineSpacing>0&&(N=F.lineSpacing),F.styletags&&F.styletags.breaklines&&(U.breaklines=!!F.styletags.breaklines),F.styletags&&F.styletags.bolds&&(U.bolds=!!F.styletags.bolds),F.styletags&&F.styletags.italics&&(U.italics=!!F.styletags.italics),F.styletags&&F.styletags.subscripts&&(U.subscripts=!!F.styletags.subscripts),F.styletags&&F.styletags.superscripts&&(U.superscripts=!!F.styletags.superscripts)),I.font=[F.fontStyle,F.fontVariant,F.fontWeight,D+"px",F.font].filter(function(oe){return oe}).join(" "),I.textAlign="start",I.textBaseline="alphabetic",I.direction="ltr",C(function u(z,O,I,F,D,N){I=(I=I.replace(/\n/g,"")).replace(/\<br\>/g,!0===N.breaklines?"\n":" ");var U="",X=[];for(Y=0;Y<I.length;++Y)X[Y]=U;!0===N.bolds&&(X=M("b",b,I,X)),!0===N.italics&&(X=M("i",S,I,X)),!0===N.superscripts&&(X=M("sup","+1",I,X)),!0===N.subscripts&&(X=M("sub","-1",I,X));var oe=[],se="";for(Y=0;Y<I.length;++Y)null!==X[Y]&&(se+=I[Y],oe.push(X[Y]));var ne=se.split("\n"),W=ne.length,G=Math.round(D*F),$=F,V=2*F,H=0,q=W*G+V;z.height<q&&(z.height=q),O.fillStyle="#000",O.fillRect(0,0,z.width,z.height),O.fillStyle="#fff";var K,Y,te,J,j,re=0,le="";function ge(){if(""!==le){var ye=O.measureText(le).width;O.fillText(le,$+te,V+J),te+=ye}}function pe(){return Math.round(j)+"px "}function xe(ye,Ce){var Fe=""+O.font;if(!0===N.subscripts){var Ke=ye.indexOf(A),Ue=Ce.indexOf(A),Be=Ke>-1?parseInt(ye[1+Ke]):0,Ie=Ue>-1?parseInt(Ce[1+Ue]):0;Be!==Ie&&(Fe=Fe.replace(pe(),"?px "),j*=Math.pow(.75,Ie-Be),Fe=Fe.replace("?px ",pe())),J+=.25*G*(Ie-Be)}if(!0===N.superscripts){var nt=ye.indexOf(w),gt=Ce.indexOf(w),Nt=nt>-1?parseInt(ye[1+nt]):0,St=gt>-1?parseInt(Ce[1+gt]):0;Nt!==St&&(Fe=Fe.replace(pe(),"?px "),j*=Math.pow(.75,St-Nt),Fe=Fe.replace("?px ",pe())),J-=.25*G*(St-Nt)}if(!0===N.bolds){var Bt=ye.indexOf(b)>-1,Zt=Ce.indexOf(b)>-1;!Bt&&Zt&&(Fe=Et?Fe.replace("italic ","italic bold "):"bold "+Fe),Bt&&!Zt&&(Fe=Fe.replace("bold ",""))}if(!0===N.italics){var Et=ye.indexOf(S)>-1,wt=Ce.indexOf(S)>-1;!Et&&wt&&(Fe="italic "+Fe),Et&&!wt&&(Fe=Fe.replace("italic ",""))}O.font=Fe}for(K=0;K<W;++K){var ke=ne[K]+"\n";for(te=0,J=K*G,j=F,le="",Y=0;Y<ke.length;++Y){var we=Y+re<oe.length?oe[Y+re]:oe[oe.length-1];U===we?le+=ke[Y]:(ge(),le=ke[Y],void 0!==we&&(xe(U,we),U=we))}ge(),re+=ke.length;var de=0|Math.round(te+2*$);H<de&&(H=de)}var be=H,Le=V+G*W;return t(O.getImageData(0,0,be,Le).data,[Le,be,4]).pick(-1,-1,0).transpose(1,0)}(O,I,z,D,N,U),F,D)},c.exports.processPixels=C;var n=e("surface-nets"),t=e("ndarray"),i=e("simplify-planar-graph"),a=e("clean-pslg"),r=e("cdt2d"),g=e("planar-graph-to-polyline"),b="b|",S="i|",w="+",A="-";function M(z,O,I,F){for(var D="<"+z+">",N="</"+z+">",U=D.length,X=N.length,oe=O[0]===w||O[0]===A,se=0,ne=-X;se>-1&&!(-1===(se=I.indexOf(D,se))||(ne=I.indexOf(N,se+U),-1===ne)||ne<=se);){for(var W=se;W<ne+X;++W)if(W<se+U||W>=ne)F[W]=null,I=I.substr(0,W)+" "+I.substr(W+1);else if(null!==F[W]){var G=F[W].indexOf(O[0]);-1===G?F[W]+=O:oe&&(F[W]=F[W].substr(0,G+1)+(1+parseInt(F[W][G+1]))+F[W].substr(G+2))}var $=se+U,H=I.substr($,ne-$).indexOf(D);se=-1!==H?H:ne+X}return F}function o(z,O,I,F){var D=function h(z,O){var I=n(z,128);return O?i(I.cells,I.positions,.25):{edges:I.cells,positions:I.positions}}(z,F),N=function f(z,O,I){for(var F=O.textAlign||"start",D=O.textBaseline||"alphabetic",N=[1<<30,1<<30],U=[0,0],X=z.length,oe=0;oe<X;++oe)for(var se=z[oe],ne=0;ne<2;++ne)N[ne]=0|Math.min(N[ne],se[ne]),U[ne]=0|Math.max(U[ne],se[ne]);var W=0;switch(F){case"center":W=-.5*(N[0]+U[0]);break;case"right":case"end":W=-U[0];break;case"left":case"start":W=-N[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+F+"'")}var G=0;switch(D){case"hanging":case"top":G=-N[1];break;case"middle":G=-.5*(N[1]+U[1]);break;case"alphabetic":case"ideographic":G=-3*I;break;case"bottom":G=-U[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+D+"'")}var $=1/I;return"lineHeight"in O?$*=+O.lineHeight:"width"in O?$=O.width/(U[0]-N[0]):"height"in O&&($=O.height/(U[1]-N[1])),z.map(function(V){return[$*(V[0]+W),$*(V[1]+G)]})}(D.positions,O,I),U=D.edges,X="ccw"===O.orientation;if(a(N,U),O.polygons||O.polygon||O.polyline){for(var oe=g(U,N),se=new Array(oe.length),ne=0;ne<oe.length;++ne){for(var W=oe[ne],G=new Array(W.length),$=0;$<W.length;++$){for(var V=W[$],H=new Array(V.length),q=0;q<V.length;++q)H[q]=N[V[q]].slice();X&&H.reverse(),G[$]=H}se[ne]=G}return se}return O.triangles||O.triangulate||O.triangle?{cells:r(N,U,{delaunay:!1,exterior:!1,interior:!0}),positions:N}:{edges:U,positions:N}}function C(z,O,I){try{return o(z,O,I,!0)}catch(F){}try{return o(z,O,I,!1)}catch(F){}return O.polygons||O.polyline||O.polygon?[]:O.triangles||O.triangulate||O.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(e,c,d){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=t);var i=!1;if("function"==typeof WeakMap){var a=WeakMap;if("undefined"==typeof navigator||!/Firefox/.test(navigator.userAgent)){var r=new a,g=Object.freeze({});if(r.set(g,1),1===r.get(g))return void(c.exports=WeakMap);i=!0}}var b=Object.getOwnPropertyNames,x=Object.defineProperty,S=Object.isExtensible,p="weakmap:",w=p+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var l=new ArrayBuffer(25),y=new Uint8Array(l);crypto.getRandomValues(y),w=p+"rand:"+Array.prototype.map.call(y,function(R){return(R%36).toString(36)}).join("")+"___"}if(x(Object,"getOwnPropertyNames",{value:function(z){return b(z).filter(A)}}),"getPropertyNames"in Object){var T=Object.getPropertyNames;x(Object,"getPropertyNames",{value:function(z){return T(z).filter(A)}})}!function(){var R=Object.freeze;x(Object,"freeze",{value:function(F){return M(F),R(F)}});var z=Object.seal;x(Object,"seal",{value:function(F){return M(F),z(F)}});var O=Object.preventExtensions;x(Object,"preventExtensions",{value:function(F){return M(F),O(F)}})}();var u=!1,o=0,C=function(){this instanceof C||h();var R=[],z=[],O=o++;return Object.create(C.prototype,{get___:{value:f(function I(U,X){var oe,se=M(U);return se?O in se?se[O]:X:(oe=R.indexOf(U))>=0?z[oe]:X})},has___:{value:f(function F(U){var X=M(U);return X?O in X:R.indexOf(U)>=0})},set___:{value:f(function D(U,X){var oe,se=M(U);return se?se[O]=X:(oe=R.indexOf(U))>=0?z[oe]=X:(z[oe=R.length]=X,R[oe]=U),this})},delete___:{value:f(function N(U){var oe,se,X=M(U);return X?O in X&&delete X[O]:!((oe=R.indexOf(U))<0||(se=R.length-1,R[oe]=void 0,z[oe]=z[se],R[oe]=R[se],R.length=se,z.length=se,0))})}})};C.prototype=Object.create(Object.prototype,{get:{value:function(z,O){return this.get___(z,O)},writable:!0,configurable:!0},has:{value:function(z){return this.has___(z)},writable:!0,configurable:!0},set:{value:function(z,O){return this.set___(z,O)},writable:!0,configurable:!0},delete:{value:function(z){return this.delete___(z)},writable:!0,configurable:!0}}),"function"==typeof a?function(){function R(){this instanceof C||h();var N,z=new a,O=void 0,I=!1;return N=i?function(X,oe){return z.set(X,oe),z.has(X)||(O||(O=new C),O.set(X,oe)),this}:function(X,oe){if(I)try{z.set(X,oe)}catch(se){O||(O=new C),O.set___(X,oe)}else z.set(X,oe);return this},Object.create(C.prototype,{get___:{value:f(function F(X,oe){return O?z.has(X)?z.get(X):O.get___(X,oe):z.get(X,oe)})},has___:{value:f(function D(X){return z.has(X)||!!O&&O.has___(X)})},set___:{value:f(N)},delete___:{value:f(function U(X){var oe=!!z.delete(X);return O&&O.delete___(X)||oe})},permitHostObjects___:{value:f(function(X){if(X!==t)throw new Error("bogus call to permitHostObjects___");I=!0})}})}i&&"undefined"!=typeof Proxy&&(Proxy=void 0),R.prototype=C.prototype,c.exports=R,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),c.exports=C)}function t(R){R.permitHostObjects___&&R.permitHostObjects___(t)}function A(R){return!(R.substr(0,p.length)==p&&"___"===R.substr(R.length-3))}function M(R){if(R!==Object(R))throw new TypeError("Not an object: "+R);var z=R[w];if(z&&z.key===R)return z;if(S(R)){z={key:R};try{return x(R,w,{value:z,writable:!1,enumerable:!1,configurable:!1}),z}catch(O){return}}}function f(R){return R.prototype=null,Object.freeze(R)}function h(){!u&&"undefined"!=typeof console&&(u=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},{}],314:[function(e,c,d){var n=e("./hidden-store.js");c.exports=function t(){var i={};return function(a){if(("object"!=typeof a||null===a)&&"function"!=typeof a)throw new Error("Weakmap-shim: Key must be object");var r=a.valueOf(i);return r&&r.identity===i?r:n(a,i)}}},{"./hidden-store.js":315}],315:[function(e,c,d){c.exports=function n(t,i){var a={identity:i},r=t.valueOf;return Object.defineProperty(t,"valueOf",{value:function(g){return g!==i?r.apply(this,arguments):a},writable:!0}),a}},{}],316:[function(e,c,d){var n=e("./create-store.js");c.exports=function t(){var i=n();return{get:function(a,r){var g=i(a);return g.hasOwnProperty("value")?g.value:r},set:function(a,r){return i(a).value=r,this},has:function(a){return"value"in i(a)},delete:function(a){return delete i(a).value}}}},{"./create-store.js":314}],317:[function(e,c,d){"use strict";var i=function t(){return function(s,b,x,S,p,w){var l=s[0],y=x[0],A=[0],T=y;S|=0;var M=0,f=y;for(M=0;M<l;++M){var u=b[S]-w,h=b[S+T]-w;u>=0!=h>=0&&p.push(A[0]+.5+.5*(u+h)/(u-h)),S+=f,++A[0]}}};c.exports=function g(s){return function r(s){return function a(s){var b={};return function(S,p,w){var l=S.dtype,y=S.order,A=[l,y.join()].join(),T=b[A];return T||(b[A]=T=s([l,y])),T(S.shape.slice(0),S.data,S.stride,0|S.offset,p,w)}}(i.bind(void 0,s))}({funcName:s.funcName})}({funcName:"zeroCrossings"})},{}],318:[function(e,c,d){"use strict";c.exports=function t(i,a){var r=[];return a=+a||0,n(i.hi(i.shape[0]-1),r,a),r};var n=e("./lib/zc-core")},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[27])(27)}}]);